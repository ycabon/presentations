// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/Error","../../../../layers/support/fieldUtils"],function(n,e,k,g){function f(a,b){return new k(a,b)}function h(a,b){b&&(a=a?"("+a+") AND ("+b+")":b);return a}function l(a){var b=a.layer;return a.fields.filter(function(a){return!b.getField(a)})}function m(a){var b=a.layer;return a.fields.filter(function(a){a=b.getFieldUsageInfo(a);return!a||!a.supportsStatistics})}Object.defineProperty(e,"__esModule",{value:!0});e.getSQLFilterForNormalization=function(a){var b=
a.field,c=a.normalizationType;a=a.normalizationField;var d;"log"===c?d="(NOT "+b+" \x3d 0)":"field"===c&&(d="(NOT "+a+" \x3d 0)");return d};e.createError=f;e.getRangeExpr=function(a,b,c){b=null!=b?a+" \x3e\x3d "+b:"";a=null!=c?a+" \x3c\x3d "+c:"";c="";return(c=b&&a?h(b,a):b||a)?"("+c+")":""};e.verifyFieldType=function(a,b,c,d){var e=null;if(!b)e=f(c,"'field' is not defined in the layer schema");else if(b.name===a.objectIdField||-1===d.indexOf(b.type))e=f(c,"'field' should be one of these types: "+
d.join(","));return e};e.verifyNumericField=function(a,b,c){var d;if(!b)d=f(c,"'field' is not defined in the layer schema");else if(b.name===a.objectIdField||-1===g.numericTypes.indexOf(b.type))d=f(c,"'field' should be one of these numeric types: "+g.numericTypes.join(","));return d};e.mergeWhereClauses=h;e.verifyBasicFieldValidity=function(a,b,c){var d=l({layer:a,fields:b});if(d.length)return f(c,"Unknown fields: "+d.join(", ")+". You can only use fields defined in the layer schema");a=m({layer:a,
fields:b});if(a.length)return f(c,"Unsupported fields: "+a.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")}});