// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../geometry/Point ../../../geometry/support/aaBoundingRect ../lib/glMatrix ../support/earthUtils ../webgl-engine/lib/Selector".split(" "),function(v,k,r,t,c,l,u){function m(b,f,e,d){void 0===d&&(d=c.vec3d.create());var a=n[b.viewingMode];a||(a=new u(b.viewingMode),a.enableBackfacesTerrain=!b.state.isGlobal,a.enableInvisibleTerrain=!0,n[b.viewingMode]=a);b._stage.pickRay(f,e,null,null,null,null,a);if((a=a.getMinResult())&&a.getIntersectionPoint(d))return d;a=c.vec3d.direction(e,
f,h);if(!b.renderCoordsHelper.intersectManifold(f,a,0,d))if("global"===b.viewingMode){b=d;var a=c.vec3d.dot(f,f),g=l.earthRadius*l.earthRadius,a=a>g?Math.sqrt(a-g)/3:1;c.vec3d.subtract(e,f,b);c.vec3d.scale(b,a/c.vec3d.length(b),b);c.vec3d.add(b,f)}else e!==d&&c.vec3d.set(e,d);return d}Object.defineProperty(k,"__esModule",{value:!0});k.eyeWithinExtent=function(b,c,e,d){return b.renderCoordsHelper.fromRenderCoords(c.eye,p,d)&&t.containsPoint(e,p)};k.surfaceElevationBelowEye=function(b,c){return b.renderCoordsHelper.fromRenderCoords(c.eye,
q,b.basemapTerrain.spatialReference)?b.basemapTerrain.getElevation(q)||0:0};k.cameraOnContentAlongViewDirection=function(b,f,e,d){var a=b.state.camera.copy();f&&(a.eye=f);e&&(a.center=e);d&&(a.up=d);m(b,a.eye,a.center,g);e=b.state.constraints;d=e.minimumPoiDistance;c.vec3d.dist2(a.eye,g)<d&&(f=e.collision.enabled,c.vec3d.set(a.viewForward,h),c.vec3d.scale(h,d),f?c.vec3d.subtract(g,h,a.eye):c.vec3d.add(a.eye,h,g),b=b.renderCoordsHelper,d=b.getAltitude(a.eye),e=e.collision.elevationMargin,f&&d<e&&(c.vec3d.subtract(g,
a.eye,h),b.setAltitude(e,a.eye),c.vec3d.add(a.eye,h,g)));a.center=g;return a};k.contentAlongViewDirection=m;var n={},p=c.vec3d.create(),g=c.vec3d.create(),q=new r,h=c.vec3d.create()});