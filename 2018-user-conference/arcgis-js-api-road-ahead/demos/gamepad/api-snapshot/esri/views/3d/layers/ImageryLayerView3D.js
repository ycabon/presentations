// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ../../../core/watchUtils ../../../core/accessorSupport/decorators ./DynamicLayerView3D".split(" "),function(m,n,h,g,k,e,l){return function(f){function b(){return null!==f&&f.apply(this,arguments)||this}h(b,f);b.prototype.initialize=function(){var a=this;this.handles.add(k.whenOnce(this.view.basemapTerrain,"ready",function(){return a.initializeMaximumDataResolution()}))};b.prototype.initializeMaximumDataResolution=
function(){var a=this.view.basemapTerrain.spatialReference,c=this.layer.fullExtent;c&&a.equals(c.spatialReference)&&(this.maximumDataResolution={x:this.layer.pixelSizeX,y:this.layer.pixelSizeY})};b.prototype.processResult=function(a,c){a.image=document.createElement("canvas");a.pixelData=c.pixelData;var d=a.image;c=d.getContext("2d");a=this.layer.applyFilter(a.pixelData).pixelBlock;d.width=a.width;d.height=a.height;d=c.createImageData(a.width,a.height);a=a.getAsRGBA();d.data.set(a);c.putImageData(d,
0,0)};b.prototype.updateImage=function(a){if(a&&a.pixelData){var c=a.image,d=c.getContext("2d");a=this.layer.applyFilter(a.pixelData).pixelBlock;var b=d.createImageData(a.width,a.height),e=a.getAsRGBA();c.width=a.width;c.height=a.height;b.data.set(e);d.putImageData(b,0,0);return!0}return!1};g([e.property()],b.prototype,"layer",void 0);return b=g([e.subclass("esri.views.3d.layers.ImageryLayerView3D")],b)}(e.declared(l))});