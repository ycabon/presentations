// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Logger ../../../core/accessorSupport/decorators ../support/earthUtils ../support/mathUtils".split(" "),function(h,d,l,f,m,q,e,n,g){Object.defineProperty(d,"__esModule",{value:!0});var r=q.getLogger("esri.views.3d.state.Constraints");h=function(p){function a(b){b=p.call(this)||this;b.collision=new t;b.distance=Infinity;b.minimumPoiDistance=4;return b}l(a,
p);Object.defineProperty(a.prototype,"altitude",{get:function(){return"local"===this.mode?null:this._get("altitude")||null},set:function(b){"local"===this.mode?r.warn("Altitude constraint is ignored in local scenes"):this._set("altitude",b)},enumerable:!0,configurable:!0});a.prototype.clampAltitude=function(b){return this.altitude?g.clamp(b,this.altitude.min,this.altitude.max):b};a.prototype.clampTilt=function(b,a){if(!this.tilt)return a;b=this.tilt(b);return g.clamp(a,b.min,b.max)};a.prototype.clampDistance=
function(b){return Math.min(b,this.distance)};a.prototype.createDefaultTilt=function(){return"local"===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()};a.prototype.createConstantMaxTilt=function(b){return function(a,c){void 0===c&&(c=k);c.min=d.TiltDefault.min;c.max=b;return c}};a.prototype.createDefaultTiltLocal=function(){var a=g.makePiecewiseLinearFunction([[4E3,d.TiltDefault.max],[1E4,g.deg2rad(88)],[6E6,g.deg2rad(88)]]);return function(b,c){void 0===c&&(c=k);c.min=d.TiltDefault.min;
c.max=a(b);return c}};a.prototype.createDefaultTiltGlobal=function(){var a=g.makePiecewiseLinearFunction([[4E3,d.TiltDefault.max],[5E4,g.deg2rad(88)],[6E6,g.deg2rad(88)],[2E7,d.TiltDefault.min]]);return function(b,c){void 0===c&&(c=k);c.min=d.TiltDefault.min;c.max=a(b);return c}};f([e.property()],a.prototype,"altitude",null);f([e.property({readOnly:!0})],a.prototype,"collision",void 0);f([e.property()],a.prototype,"distance",void 0);f([e.property({readOnly:!0})],a.prototype,"minimumPoiDistance",void 0);
f([e.property()],a.prototype,"tilt",void 0);f([e.property({constructOnly:!0})],a.prototype,"mode",void 0);return a=f([e.subclass("esri.views.3d.state.Constraints")],a)}(e.declared(m));d.Constraints=h;d.AltitudeDefault={min:-n.earthRadius,max:4*n.earthRadius};d.TiltDefault={min:g.deg2rad(.5),max:g.deg2rad(179.5)};var k={min:0,max:0},t=function(d){function a(){var a=null!==d&&d.apply(this,arguments)||this;a.enabled=!0;a.elevationMargin=5;return a}l(a,d);f([e.property({type:Boolean})],a.prototype,"enabled",
void 0);f([e.property({type:Number})],a.prototype,"elevationMargin",void 0);return a=f([e.subclass("esri.views.3d.state.Constraints.CollisionConstraint")],a)}(e.declared(m));d.default=h});