// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.8/esri/copyright.txt for details.
//>>built
define(["require","exports","./ComponentUtils","./geometryDataUtils","../../../webgl/Util"],function(t,u,p,l,m){function q(a){switch(a){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw Error("Unhandled data type: "+a);}return function(){function a(f,g,e,h,c){void 0===e&&(e=null);void 0===h&&(h=a.DefaultOffsets);void 0===c&&(c=a.DefaultIndices);
this.preinterleaved=!0;this.primitiveType="triangle";this._positionData=null;var b=m.getStride(g)/4,b=f.length/b;(this._hasDefaultIndices=c===a.DefaultIndices)&&(c=l.generateDefaultIndexArray(b));for(var b={},k=0;k<g.length;k++){var d=g[k],r=new (q(d.type))(f.buffer),n=m.getBytesPerElement(d.type);b[d.name]={data:r,size:d.count,offsetIdx:d.offset/n,strideIdx:d.stride/n}}e&&(this._positionData=e,b.position={data:e.data,size:3,offsetIdx:0,strideIdx:3});this._id=l.getNewId();this._vertexData=f;this._vertexAttributes=
b;this._layout=g;this._indexData=c;this._componentOffsets=p.createOffsets(h);this._gpuMemoryUsage=f.byteLength+(this._hasDefaultIndices?0:c.byteLength)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"componentOffsets",{get:function(){return this._componentOffsets},enumerable:!0,configurable:!0});a.prototype.toRenderData=
function(){var a={id:this._id.toString(),preinterleaved:!0,indexData:this._hasDefaultIndices?null:this._indexData,indexCount:this._indexData.length,vertexData:this._vertexData,layout:this._layout};this._indexData=this._vertexData=null;this._vertexAttributes={position:this._vertexAttributes.position};return a};a.prototype.getIndices=function(a){return"position"===a&&this._positionData?this._positionData.indices:this._indexData};a.prototype.getAttribute=function(a){return this._vertexAttributes[a]};
a.prototype.estimateGpuMemoryUsage=function(){return this._gpuMemoryUsage};a.DefaultOffsets=new Uint32Array(0);a.DefaultIndices=new Uint32Array(0);return a}()});