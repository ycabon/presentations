//>>built
(function(a){"object"===typeof module&&"object"===typeof module.exports?(a=a(require,exports),void 0!==a&&(module.exports=a)):"function"===typeof define&&define.amd&&define(["require","exports","tslib","../shim/Map","./Evented"],a)})(function(a,f){Object.defineProperty(f,"__esModule",{value:!0});var g=a("tslib"),h=a("../shim/Map"),e=a("./Evented");a=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._queue=new h.default;b.maxEvents=0;return b}g.__extends(c,a);c.prototype.emit=
function(b){a.prototype.emit.call(this,b);var c=!1;this.listenersMap.forEach(function(a,d){e.isGlobMatch(d,b.type)&&(c=!0)});if(!c){var d=this._queue.get(b.type);d||(d=[],this._queue.set(b.type,d));d.push(b);if(0<this.maxEvents)for(;d.length>this.maxEvents;)d.shift()}};c.prototype.on=function(b,c){var d=this;b=a.prototype.on.call(this,b,c);this.listenersMap.forEach(function(a,b){d._queue.forEach(function(a,c){e.isGlobMatch(b,c)&&(a.forEach(function(a){return d.emit(a)}),d._queue.delete(c))})});return b};
return c}(e.default);f.default=a});