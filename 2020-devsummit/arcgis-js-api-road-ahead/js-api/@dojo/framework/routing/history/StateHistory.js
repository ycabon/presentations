//>>built
(function(a){"object"===typeof module&&"object"===typeof module.exports?(a=a(require,exports),void 0!==a&&(module.exports=a)):"function"===typeof define&&define.amd&&define(["require","exports","../../shim/global","../../has/has"],a)})(function(a,e){function f(a,b){return"/"===a?b:0===b.indexOf(a)?b.slice(a.length-1):"/"}Object.defineProperty(e,"__esModule",{value:!0});var h=a("../../shim/global"),g=a("../../has/has"),k=new RegExp(/\/$/),l=new RegExp(/^\//);a=function(){function a(b){var a=b.onChange,
d=b.window,d=void 0===d?h.default.window:d;b=b.base;var c=this;this._onChange=function(){var a=c._window.location.pathname.replace(/\/$/,""),a=f(c._base,a+c._window.location.search);c._current!==a&&(c._current=a,c._onChangeFunction(c._current))};b||(b=g.default("public-path")?""+g.default("public-path"):"/");if(/(#|\?)/.test(b))throw new TypeError("base must not contain '#' or '?'");this._onChangeFunction=a;this._window=d;this._base=b;k.test(this._base)||(this._base+="/");l.test(this._base)||(this._base=
"/"+this._base);this._window.addEventListener("popstate",this._onChange,!1);this._onChange()}a.prototype.prefix=function(a){"#"===a[0]&&(a=a.slice(1));"/"===a[0]&&(a=a.slice(1));return""+this._base+a};a.prototype.set=function(a){this._window.history.pushState({},"",this.prefix(f(this._base,a)));this._onChange()};Object.defineProperty(a.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0});return a}();e.StateHistory=a;e.default=a});