//>>built
(function(a){"object"===typeof module&&"object"===typeof module.exports?(a=a(require,exports),void 0!==a&&(module.exports=a)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./support/queue ./Symbol ../has/has".split(" "),a)})(function(a,f){Object.defineProperty(f,"__esModule",{value:!0});var u=a("tslib"),l=a("./global"),v=a("./support/queue");a("./Symbol");a=a("../has/has");f.ShimPromise=l.default.Promise;f.isThenable=function(b){return b&&"function"===typeof b.then};
a.default("es6-promise")||(l.default.Promise=f.ShimPromise=(m=function(){function b(g){var d=this;this.state=1;this[Symbol.toStringTag]="Promise";var a=!1,c=[],h=function(b){c&&c.push(b)},e=function(b,a){1===d.state&&(d.state=b,d.resolvedValue=a,h=v.queueMicroTask,c&&0<c.length&&v.queueMicroTask(function(){if(c){for(var b=c.length,a=0;a<b;++a)c[a].call(null);c=null}}))},k=function(b,c){1!==d.state||a||(f.isThenable(c)?(c.then(e.bind(null,0),e.bind(null,2)),a=!0):e(b,c))};this.then=function(a,c){return new b(function(b,
g){h(function(){var e=2===d.state?c:a;if("function"===typeof e)try{b(e(d.resolvedValue))}catch(q){g(q)}else 2===d.state?g(d.resolvedValue):b(d.resolvedValue)})})};try{g(k.bind(null,0),k.bind(null,2))}catch(n){e(2,n)}}b.all=function(a){return new this(function(d,g){function c(b,a){e[b]=a;++k;r||k<n||d(e)}function h(a,d){++n;f.isThenable(d)?d.then(c.bind(null,a),g):b.resolve(d).then(c.bind(null,a))}var e=[],k=0,n=0,r=!0,l=0;try{for(var t=u.__values(a),p=t.next();!p.done;p=t.next())h(l,p.value),l++}catch(w){q=
{error:w}}finally{try{p&&!p.done&&(m=t.return)&&m.call(t)}finally{if(q)throw q.error;}}(r=!1,k<n)||d(e);var q,m})};b.race=function(a){return new this(function(d,g){try{for(var c=u.__values(a),h=c.next();!h.done;h=c.next()){var e=h.value;e instanceof b?e.then(d,g):b.resolve(e).then(d)}}catch(r){k={error:r}}finally{try{h&&!h.done&&(f=c.return)&&f.call(c)}finally{if(k)throw k.error;}}var k,f})};b.reject=function(a){return new this(function(b,g){g(a)})};b.resolve=function(a){return new this(function(b){b(a)})};
b.prototype.catch=function(a){return this.then(void 0,a)};return b}(),m[Symbol.species]=f.ShimPromise,m));a.default("es2018-promise-finally")||(l.default.Promise.prototype.finally=function(a){return this.then(a&&function(b){return Promise.resolve(a()).then(function(){return b})},a&&function(b){return Promise.resolve(a()).then(function(){throw b;})})});f.default=f.ShimPromise;var m});