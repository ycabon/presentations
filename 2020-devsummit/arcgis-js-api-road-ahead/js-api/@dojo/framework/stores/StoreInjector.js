//>>built
(function(a){"object"===typeof module&&"object"===typeof module.exports?(a=a(require,exports),void 0!==a&&(module.exports=a)):"function"===typeof define&&define.amd&&define("require exports tslib ../shim/WeakMap ../widget-core/WidgetBase ../widget-core/d ../widget-core/decorators/handleDecorator ../widget-core/decorators/beforeProperties ../widget-core/decorators/alwaysRender ../widget-core/Registry".split(" "),a)})(function(a,d){function k(a){var c=a.name,b=a.paths,d=a.getProperties;return q.handleDecorator(function(a,
g){r.beforeProperties(function(a){var g=this,e=this.registry.getInjector(c);if(e){var f=e.injector,h=f(),f=m.get(this)||[];0===f.length&&m.set(this,f);if(-1===f.indexOf(e)){if(b){var l=void 0,l="function"===typeof b?b(h.path):b.map(function(a){return h.path(a.join("/"))}),k=h.onChange(l,function(){return g.invalidate()});this.own({destroy:function(){k.remove()}})}else this.own(h.on("invalidate",function(){g.invalidate()}));f.push(e)}return d(h,a)}})(a)})}function n(a,c,b){var d=b.paths,g=b.getProperties;
return function(b){function e(){return null!==b&&b.apply(this,arguments)||this}p.__extends(e,b);e.prototype.render=function(){return t.w(a,this.properties,this.children)};return e=p.__decorate([u.alwaysRender(),k({name:c,paths:d,getProperties:g})],e)}(v.WidgetBase)}Object.defineProperty(d,"__esModule",{value:!0});var p=a("tslib"),w=a("../shim/WeakMap"),v=a("../widget-core/WidgetBase"),t=a("../widget-core/d"),q=a("../widget-core/decorators/handleDecorator"),r=a("../widget-core/decorators/beforeProperties"),
u=a("../widget-core/decorators/alwaysRender"),x=a("../widget-core/Registry"),m=new w.default;d.storeInject=k;d.StoreContainer=n;d.createStoreContainer=function(){return function(a,c,b){return n(a,c,{paths:b.paths,getProperties:b.getProperties})}};d.registerStoreInjector=function(a,c){void 0===c&&(c={});var b=c.key,b=void 0===b?"state":b;c=c.registry;c=void 0===c?new x.Registry:c;if(c.hasInjector(b))throw Error("Store has already been defined for key "+b.toString());c.defineInjector(b,function(){return function(){return a}});
return c}});