//>>built
(function(b){"object"===typeof module&&"object"===typeof module.exports?(b=b(require,exports),void 0!==b&&(module.exports=b)):"function"===typeof define&&define.amd&&define("require exports tslib ../shim/Map ../core/Evented ./Registry".split(" "),b)})(function(b,d){Object.defineProperty(d,"__esModule",{value:!0});var k=b("tslib"),e=b("../shim/Map"),n=b("../core/Evented"),p=b("./Registry");b=function(b){function c(){var a=b.call(this)||this;a._registry=new p.Registry;a._registryWidgetLabelMap=new e.Map;
a._registryInjectorLabelMap=new e.Map;a.own(a._registry);a.own({destroy:function(){a.baseRegistry&&(a._registryWidgetLabelMap.delete(a.baseRegistry),a._registryInjectorLabelMap.delete(a.baseRegistry),a.baseRegistry=void 0)}});return a}k.__extends(c,b);Object.defineProperty(c.prototype,"base",{set:function(a){this.baseRegistry&&(this._registryWidgetLabelMap.delete(this.baseRegistry),this._registryInjectorLabelMap.delete(this.baseRegistry));this.baseRegistry=a},enumerable:!0,configurable:!0});c.prototype.define=
function(a,b){this._registry.define(a,b)};c.prototype.defineInjector=function(a,b){this._registry.defineInjector(a,b)};c.prototype.has=function(a){return this._registry.has(a)||!(!this.baseRegistry||!this.baseRegistry.has(a))};c.prototype.hasInjector=function(a){return this._registry.hasInjector(a)||!(!this.baseRegistry||!this.baseRegistry.hasInjector(a))};c.prototype.get=function(a,b){void 0===b&&(b=!1);return this._get(a,b,"get",this._registryWidgetLabelMap)};c.prototype.getInjector=function(a,
b){void 0===b&&(b=!1);return this._get(a,b,"getInjector",this._registryInjectorLabelMap)};c.prototype._get=function(a,b,c,d){for(var e=this,l=b?[this.baseRegistry,this._registry]:[this._registry,this.baseRegistry],h=0;h<l.length;h++){var f=l[h];if(f){var g=f[c](a),m=d.get(f)||[];if(g)return g;-1===m.indexOf(a)&&(g=f.on(a,function(d){"loaded"===d.action&&e[c](a,b)===d.item&&e.emit({type:"invalidate"})}),this.own(g),d.set(f,k.__spread(m,[a])))}}return null};return c}(n.Evented);d.RegistryHandler=b;
d.default=b});