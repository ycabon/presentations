//>>built
(function(a){"object"===typeof module&&"object"===typeof module.exports?(a=a(require,exports),void 0!==a&&(module.exports=a)):"function"===typeof define&&define.amd&&define("require exports tslib ../../i18n/i18n ../../shim/Map ./../d ./../decorators/afterRender ./../decorators/inject ./../Injector".split(" "),a)})(function(a,c){function k(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f.__extends(b,a);b.prototype.localizeBundle=function(d,e){void 0===e&&(e=!1);var a=
this._resolveBundle(d);d=this._getLocaleMessages(a);var b=!d,c=this.properties.locale;return Object.create({format:b&&!e?function(a,e){return""}:function(e,d){return g.formatMessage(a,e,d,c)},isPlaceholder:b,messages:d||(e?a.messages:this._getBlankMessages(a))})};b.prototype.renderDecorator=function(a){var e=this;l.decorate(a,{modifier:function(a,d){var b=e.properties,c=b.locale,b=b.rtl,h={};"boolean"===typeof b&&(h.dir=b?"rtl":"ltr");c&&(h.lang=c);a.properties=f.__assign({},a.properties,h);d()},
predicate:l.isVNode});return a};b.prototype._getBlankMessages=function(a){return Object.keys(a.messages).reduce(function(a,b){a[b]="";return a},{})};b.prototype._getLocaleMessages=function(a){var b=this,d=this.properties.locale||g.default.locale,c=g.getCachedMessages(a,d);if(c)return c;g.default(a,d).then(function(){b.invalidate()})};b.prototype._resolveBundle=function(a){var b=this.properties.i18nBundle;return b?b instanceof m.default&&(b=b.get(a),!b)?a:b:a};f.__decorate([n.afterRender()],b.prototype,
"renderDecorator",null);return b=f.__decorate([p.inject({name:c.INJECTOR_KEY,getProperties:function(a,b){var c=b.locale;b=b.rtl;return{locale:void 0===c?a.locale:c,rtl:void 0===b?a.rtl:b}}})],b)}(a)}Object.defineProperty(c,"__esModule",{value:!0});var f=a("tslib"),g=a("../../i18n/i18n"),m=a("../../shim/Map"),l=a("./../d"),n=a("./../decorators/afterRender"),p=a("./../decorators/inject"),q=a("./../Injector");c.INJECTOR_KEY="__i18n_injector";c.registerI18nInjector=function(a,f){var b=new q.Injector(a);
f.defineInjector(c.INJECTOR_KEY,function(a){b.setInvalidator(a);return function(){return b.get()}});return b};c.I18nMixin=k;c.default=k});