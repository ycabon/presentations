//>>built
(function(a){"object"===typeof module&&"object"===typeof module.exports?(a=a(require,exports),void 0!==a&&(module.exports=a)):"function"===typeof define&&define.amd&&define("require exports tslib ./../Injector ./../decorators/inject ./../decorators/handleDecorator ./../decorators/diffProperty ./../diff".split(" "),a)})(function(a,f){function p(a){return a.reduce(function(a,b){Object.keys(b).forEach(function(c){a[b[c]]=c});return a},{})}function n(a){return function(a){function b(){var c=null!==a&&
a.apply(this,arguments)||this;c._registeredBaseThemeKeys=[];c._recalculateClasses=!0;c._theme={};return c}g.__extends(b,a);b.prototype.theme=function(c){var a=this;this._recalculateClasses&&this._recalculateThemeClasses();return Array.isArray(c)?c.map(function(c){return a._getThemeClass(c)}):this._getThemeClass(c)};b.prototype.onPropertiesChanged=function(){this._recalculateClasses=!0};b.prototype._getThemeClass=function(c){var a=this;if(void 0===c||null===c||!1===c||!0===c)return c;var b=this.properties.extraClasses||
{},e=this._baseThemeClassesReverseLookup[c],d=[];if(!e)return console.warn("Class name: '"+c+"' not found in theme"),null;this._classes&&(c=Object.keys(this._classes).reduce(function(c,b){for(var k=Object.keys(a._classes[b]),h=0;h<k.length;h++){var d=a._classes[b][k[h]];if(k[h]===e&&d){d.forEach(function(a){a&&!0!==a&&c.push(a)});break}}return c},[]),d.push.apply(d,g.__spread(c)));b[e]&&d.push(b[e]);this._theme[e]?d.push(this._theme[e]):d.push(this._registeredBaseTheme[e]);return d.join(" ")};b.prototype._recalculateThemeClasses=
function(){var c=this,a=this.properties,b=a.theme,e=void 0===b?{}:b,a=a.classes,d=void 0===a?{}:a;this._registeredBaseTheme||(a=this.getDecorator("baseThemeClasses"),0===a.length&&console.warn("A base theme has not been provided to this widget. Please use the @theme decorator to add a theme."),this._registeredBaseTheme=a.reduce(function(a,b){var d=b[" _key"];b=g.__rest(b,[" _key"]);c._registeredBaseThemeKeys.push(d);return g.__assign({},a,b)},{}),this._baseThemeClassesReverseLookup=p(a));this._theme=
this._registeredBaseThemeKeys.reduce(function(a,c){return g.__assign({},a,e[c])},{});this._classes=Object.keys(d).reduce(function(a,b){-1<c._registeredBaseThemeKeys.indexOf(b)&&(a=g.__assign({},a,(e={},e[b]=d[b],e)));return a;var e},{});this._recalculateClasses=!1};g.__decorate([l.diffProperty("theme",m.shallow),l.diffProperty("extraClasses",m.shallow),l.diffProperty("classes",m.shallow)],b.prototype,"onPropertiesChanged",null);return b=g.__decorate([q.inject({name:f.INJECTED_THEME_KEY,getProperties:function(a,
b){return b.theme?{}:{theme:a}}})],b)}(a)}Object.defineProperty(f,"__esModule",{value:!0});var g=a("tslib"),r=a("./../Injector"),q=a("./../decorators/inject"),t=a("./../decorators/handleDecorator"),l=a("./../decorators/diffProperty"),m=a("./../diff");f.INJECTED_THEME_KEY="__theme_injector";f.theme=function(a){return t.handleDecorator(function(f){f.addDecorator("baseThemeClasses",a)})};f.registerThemeInjector=function(a,g){var b=new r.Injector(a);g.defineInjector(f.INJECTED_THEME_KEY,function(a){b.setInvalidator(a);
return function(){return b.get()}});return b};f.ThemedMixin=n;f.default=n});