//>>built
define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(G,x,y,p,H,g,q,m,z,c){function k(b,a,d){return v&&d?function(b,a){return g(b,d,a)}:I?function(d,c){var l=g(d,a,function(l){c.call(this,l);n=(new Date).getTime()}),f=g(d,b,function(l){(!n||(new Date).getTime()>n+1E3)&&c.call(this,l)});return{remove:function(){l.remove();f.remove()}}}:function(a,d){return g(a,b,d)}}function J(b){do if(void 0!==b.dojoClick)return b;while(b=
b.parentNode)}function A(b,a,d){if(!m.isRight(b)){var e=J(b.target);if(f=!b.target.disabled&&e&&e.dojoClick)if(t=(r="useTarget"==f)?e:b.target,r&&b.preventDefault(),B=b.changedTouches?b.changedTouches[0].pageX-c.global.pageXOffset:b.clientX,C=b.changedTouches?b.changedTouches[0].pageY-c.global.pageYOffset:b.clientY,D=("object"==typeof f?f.x:"number"==typeof f?f:0)||4,E=("object"==typeof f?f.y:"number"==typeof f?f:0)||4,!F){b=function(l){c.doc.addEventListener(l,function(b){var a=b.target;f&&!b._dojo_click&&
(new Date).getTime()<=w+1E3&&("INPUT"!=a.tagName||!p.contains(a,"dijitOffScreen"))&&(b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),"click"==l&&("INPUT"!=a.tagName||"radio"==a.type&&(p.contains(a,"dijitCheckBoxInput")||p.contains(a,"mblRadioButton"))||"checkbox"==a.type&&(p.contains(a,"dijitCheckBoxInput")||p.contains(a,"mblCheckBox")))&&"TEXTAREA"!=a.tagName&&"AUDIO"!=a.tagName&&"VIDEO"!=a.tagName&&b.preventDefault())},!0)};var h=function(a){f=r?y.isDescendant(c.doc.elementFromPoint(a.changedTouches?
a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY),t):f&&(a.changedTouches?a.changedTouches[0].target:a.target)==t&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX)-B)<=D&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY)-C)<=E};F=!0;c.doc.addEventListener(a,function(a){m.isRight(a)||(h(a),r&&a.preventDefault())},!0);c.doc.addEventListener(d,function(a){if(!m.isRight(a)&&
(h(a),f)){var b=function(b){var d=document.createEvent("MouseEvents");d._dojo_click=!0;d.initMouseEvent(b,!0,!0,a.view,a.detail,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return d};w=(new Date).getTime();var d=r?t:a.target;"LABEL"===d.tagName&&(d=y.byId(d.getAttribute("for"))||d);var c=a.changedTouches?a.changedTouches[0]:a,e=b("mousedown"),k=b("mouseup"),l=b("click");setTimeout(function(){g.emit(d,"mousedown",e);g.emit(d,"mouseup",k);g.emit(d,"click",
l);w=(new Date).getTime()},0)}},!0);b("click");b("mousedown");b("mouseup")}}}var u=5>q("ios"),v=q("pointer-events")||0,e=function(){var b={},a;for(a in{down:1,move:1,up:1,cancel:1,over:1,out:1})b[a]="pointer"+a;return b}(),I=q("touch-events"),F,f,r=!1,t,B,C,D,E,w,n,h;q("touch")&&(v?z(function(){c.doc.addEventListener(e.down,function(b){A(b,e.move,e.up)},!0)}):z(function(){function b(a){var b=H.delegate(a,{bubbles:!0});6<=q("ios")&&(b.touches=a.touches,b.altKey=a.altKey,b.changedTouches=a.changedTouches,
b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.targetTouches=a.targetTouches);return b}h=c.body();c.doc.addEventListener("touchstart",function(a){n=(new Date).getTime();var b=h;h=a.target;g.emit(b,"dojotouchout",{relatedTarget:h,bubbles:!0});g.emit(h,"dojotouchover",{relatedTarget:b,bubbles:!0});A(a,"touchmove","touchend")},!0);g(c.doc,"touchmove",function(a){n=(new Date).getTime();var d=c.doc.elementFromPoint(a.pageX-(u?0:c.global.pageXOffset),a.pageY-(u?0:c.global.pageYOffset));
d&&(h!==d&&(g.emit(h,"dojotouchout",{relatedTarget:d,bubbles:!0}),g.emit(d,"dojotouchover",{relatedTarget:h,bubbles:!0}),h=d),g.emit(d,"dojotouchmove",b(a))||a.preventDefault())});g(c.doc,"touchend",function(a){n=(new Date).getTime();var d=c.doc.elementFromPoint(a.pageX-(u?0:c.global.pageXOffset),a.pageY-(u?0:c.global.pageYOffset))||c.body();g.emit(d,"dojotouchend",b(a))})}));x={press:k("mousedown","touchstart",e.down),move:k("mousemove","dojotouchmove",e.move),release:k("mouseup","dojotouchend",
e.up),cancel:k(m.leave,"touchcancel",v?e.cancel:null),over:k("mouseover","dojotouchover",e.over),out:k("mouseout","dojotouchout",e.out),enter:m._eventHandler(k("mouseover","dojotouchover",e.over)),leave:m._eventHandler(k("mouseout","dojotouchout",e.out))};return G.touch=x});