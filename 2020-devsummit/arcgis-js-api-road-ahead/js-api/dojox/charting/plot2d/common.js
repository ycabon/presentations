//>>built
define("dojo/_base/lang dojo/_base/array dojo/_base/Color dojox/gfx dojox/lang/functional ../scaler/common".split(" "),function(r,t,q,u,x,v){var p=r.getObject("dojox.charting.plot2d.common",!0);return r.mixin(p,{doIfLoaded:v.doIfLoaded,makeStroke:function(a){if(!a)return a;if("string"==typeof a||a instanceof q)a={color:a};return u.makeParameters(u.defaultStroke,a)},augmentColor:function(a,d){a=new q(a);d=new q(d);d.a=a.a;return d},augmentStroke:function(a,d){if(a=p.makeStroke(a))a.color=p.augmentColor(a.color,
d);return a},augmentFill:function(a,d){new q(d);return"string"==typeof a||a instanceof q?p.augmentColor(a,d):a},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(a,d){for(var c=r.delegate(p.defaultStats),b=0;b<a.length;++b)for(var f=a[b],e=0;e<f.data.length;e++)if(!d(f.data[e])){if("number"==typeof f.data[e]){var e=c.vmin,w=c.vmax;t.forEach(f.data,function(b,a){d(b)||(a+=1,isNaN(b)&&(b=
0),c.hmin=Math.min(c.hmin,a),c.hmax=Math.max(c.hmax,a),c.vmin=Math.min(c.vmin,b),c.vmax=Math.max(c.vmax,b))})}else{var k=c.hmin,h=c.hmax,e=c.vmin,w=c.vmax;"xmin"in f&&"xmax"in f&&"ymin"in f&&"ymax"in f||t.forEach(f.data,function(b,a){d(b)||(a="x"in b?b.x:a+1,b=b.y,isNaN(a)&&(a=0),isNaN(b)&&(b=0),c.hmin=Math.min(c.hmin,a),c.hmax=Math.max(c.hmax,a),c.vmin=Math.min(c.vmin,b),c.vmax=Math.max(c.vmax,b))});"xmin"in f&&(c.hmin=Math.min(k,f.xmin));"xmax"in f&&(c.hmax=Math.max(h,f.xmax))}"ymin"in f&&(c.vmin=
Math.min(e,f.ymin));"ymax"in f&&(c.vmax=Math.max(w,f.ymax));break}return c},calculateBarSize:function(a,d,c){c||(c=1);var b=(a-2*d.gap)/c;"minBarSize"in d&&(b=Math.max(b,d.minBarSize));"maxBarSize"in d&&(b=Math.min(b,d.maxBarSize));b=Math.max(b,1);return{size:b,gap:(a-b*c)/2}},collectStackedStats:function(a){var d=r.clone(p.defaultStats);if(a.length){d.hmin=Math.min(d.hmin,1);d.hmax=x.foldl(a,"seed, run -\x3e Math.max(seed, run.data.length)",d.hmax);for(var c=0;c<d.hmax;++c){var b=a[0].data[c],b=
b&&("number"==typeof b?b:b.y);isNaN(b)&&(b=0);d.vmin=Math.min(d.vmin,b);for(var f=1;f<a.length;++f){var e=a[f].data[c],e=e&&("number"==typeof e?e:e.y);isNaN(e)&&(e=0);b+=e}d.vmax=Math.max(d.vmax,b)}}return d},curve:function(a,d){var c=a.slice(0);"x"==d&&(c[c.length]=c[0]);return t.map(c,function(b,a){if(0==a)return"M"+b.x+","+b.y;if(!isNaN(d)){var e=b.x-c[a-1].x;return"C"+(b.x-e/d*(d-1))+","+c[a-1].y+" "+(b.x-e/d)+","+b.y+" "+b.x+","+b.y}if("X"==d||"x"==d||"S"==d){var f;b=c[a-1];var e=c[a],k,h,l;
k=1/6;1==a?(f="x"==d?c[c.length-2]:b,k=1/3):f=c[a-2];a==c.length-1?(a="x"==d?c[1]:e,k=1/3):a=c[a+1];var g=Math.sqrt((e.x-b.x)*(e.x-b.x)+(e.y-b.y)*(e.y-b.y));h=Math.sqrt((e.x-f.x)*(e.x-f.x)+(e.y-f.y)*(e.y-f.y));l=Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y));var m=h*k,n=l*k;m>g/2&&n>g/2?(m=g/2,n=g/2):m>g/2?(m=g/2,n=g/2*l/h):n>g/2&&(n=g/2,m=g/2*h/l);"S"==d&&(f==b&&(m=0),e==a&&(n=0));k=b.x+m*(e.x-f.x)/h;f=b.y+m*(e.y-f.y)/h;h=e.x-n*(a.x-b.x)/l;l=e.y-n*(a.y-b.y)/l}return"C"+(k+","+f+" "+h+","+l+" "+
e.x+","+e.y)}).join(" ")},getLabel:function(a,d,c){return v.doIfLoaded("dojo/number",function(b){return(d?b.format(a,{places:c}):b.format(a))||""},function(){return d?a.toFixed(c):a.toString()})}})});