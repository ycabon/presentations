//>>built
define("dojo/_base/lang dojo/_base/declare dojo/_base/connect dojo/_base/fx dojox/gfx ./_Indicator".split(" "),function(t,u,v,w,k,x){return u("dojox.gauges.AnalogIndicatorBase",[x],{draw:function(g,c){if(this.shape)this._move(c);else{this.text&&(this.text.parent.remove(this.text),this.text=null);c=this._gauge._getAngle(Math.min(Math.max(this.value,this._gauge.min),this._gauge.max));this.color=this.color||"#000000";this.length=this.length||this._gauge.radius;this.width=this.width||1;this.offset=this.offset||
0;this.highlight=this.highlight||"#D0D0D0";var a=this._getShapes(g,this._gauge,this);if(a){if(1<a.length){this.shape=g.createGroup();for(var d=0;d<a.length;d++)this.shape.add(a[d])}else this.shape=a[0];this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},k.matrix.rotateg(c)]);this.shape.connect("onmouseover",this,this.handleMouseOver);this.shape.connect("onmouseout",this,this.handleMouseOut);this.shape.connect("onmousedown",this,this.handleMouseDown);this.shape.connect("touchstart",this,
this.handleTouchStart)}this.label&&((a=this.direction)||(a="outside"),d="inside"==a?-this.length+this.offset-5:this.length+this.offset+5,c=this._gauge._getRadians(90-c),this._layoutLabel(g,this.label+"",this._gauge.cx,this._gauge.cy,d,c,a));this.currentValue=this.value}},_layoutLabel:function(g,c,a,d,p,f,l){var h=this.font?this.font:k.defaultFont,r=k._base._getTextBox(c,{font:k.makeFontString(k.makeParameters(k.defaultFont,h))}).w,h=k.normalizedLength(h.size),m=a+Math.cos(f)*p-r/2,n=d-Math.sin(f)*
p-h/2,b,q=[];b=m;var e;e=-Math.tan(f)*b+d+Math.tan(f)*a;e>=n&&e<=n+h&&q.push({x:b,y:e});b=m+r;e=-Math.tan(f)*b+d+Math.tan(f)*a;e>=n&&e<=n+h&&q.push({x:b,y:e});b=n;e=-1/Math.tan(f)*b+a+1/Math.tan(f)*d;e>=m&&e<=m+r&&q.push({x:e,y:b});b=n+h;e=-1/Math.tan(f)*b+a+1/Math.tan(f)*d;e>=m&&e<=m+r&&q.push({x:e,y:b});if("inside"==l)for(l=0;l<q.length;l++){if(b=q[l],b=this._distance(b.x,b.y,a,d)-p,0<=b){m=a+Math.cos(f)*(p-b)-r/2;n=d-Math.sin(f)*(p-b)-h/2;break}}else for(l=0;l<q.length;l++)if(b=q[l],b=this._distance(b.x,
b.y,a,d)-p,0>=b){m=a+Math.cos(f)*(p-b)-r/2;n=d-Math.sin(f)*(p-b)-h/2;break}this.text=this._gauge.drawText(g,c,m+r/2,n+h,"middle",this.color,this.font)},_distance:function(g,c,a,d){return Math.sqrt((a-g)*(a-g)+(d-c)*(d-c))},_move:function(g){var c=Math.min(Math.max(this.value,this._gauge.min),this._gauge.max),a=this.currentValue;g?(g=this._gauge._getAngle(c),this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},k.matrix.rotateg(g)]),this.currentValue=c):a!=c&&(c=new w.Animation({curve:[a,
c],duration:this.duration,easing:this.easing}),v.connect(c,"onAnimate",t.hitch(this,function(a){this.shape.setTransform([{dx:this._gauge.cx,dy:this._gauge.cy},k.matrix.rotateg(this._gauge._getAngle(a))]);this.currentValue=a})),c.play())}})});