// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),function(C,x,l,h,z,d,y,w,t,p,u,v,r,q,A){Object.defineProperty(x,"__esModule",{value:!0});x.registerFunctions=function(m,n){m.ringisclockwise=function(c,e){return n(c,e,function(b,c,
a){d.pcCheck(a,1,1);b=[];var f=c=!1;if(null===a[0])return!1;if(d.isArray(a[0])){for(var e=0,k=a[0];e<k.length;e++){var g=k[e];if(g instanceof p)b.push(g.hasZ?g.hasM?[g.x,g.y,g.z,g.m]:[g.x,g.y,g.z]:[g.x,g.y]);else throw Error("Invalid Argument");}0<b.length&&(c=a[0][0].hasZ,f=a[0][0].hasM)}else if(a[0]instanceof z)b=a[0]._elements,0<b.length&&(c=a[0]._hasZ,f=a[0]._hasM);else if(d.isImmutableArray(a[0])){e=0;for(k=a[0].toArray();e<k.length;e++)if(g=k[e],g instanceof p)b.push(g.hasZ?g.hasM?[g.x,g.y,
g.z,g.m]:[g.x,g.y,g.z]:[g.x,g.y]);else throw Error("Invalid Argument");0<b.length&&(c=a[0].get(0).hasZ,f=a[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>b.length?!1:A.isClockwise(b,f,c)})};m.polygon=function(c,e){return n(c,e,function(b,f,a){d.pcCheck(a,1,1);b=null;if(a[0]instanceof l){if(b=d.fixSpatialReference(h.parseGeometryFromDictionary(a[0]),c.spatialReference),!1===b instanceof u)throw Error("Illegal Parameter");}else b=a[0]instanceof u?q.fromJSON(a[0].toJSON()):d.fixSpatialReference(new u(JSON.parse(a[0])),
c.spatialReference);if(null!==b&&!1===b.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};m.polyline=function(c,e){return n(c,e,function(b,f,a){d.pcCheck(a,1,1);b=null;if(a[0]instanceof l){if(b=d.fixSpatialReference(h.parseGeometryFromDictionary(a[0]),c.spatialReference),!1===b instanceof v)throw Error("Illegal Parameter");}else b=a[0]instanceof v?q.fromJSON(a[0].toJSON()):
d.fixSpatialReference(new v(JSON.parse(a[0])),c.spatialReference);if(null!==b&&!1===b.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};m.point=function(c,e){return n(c,e,function(b,f,a){d.pcCheck(a,1,1);b=null;if(a[0]instanceof l){if(b=d.fixSpatialReference(h.parseGeometryFromDictionary(a[0]),c.spatialReference),!1===b instanceof p)throw Error("Illegal Parameter");
}else b=a[0]instanceof p?q.fromJSON(a[0].toJSON()):d.fixSpatialReference(new p(JSON.parse(a[0])),c.spatialReference);if(null!==b&&!1===b.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};m.multipoint=function(c,e){return n(c,e,function(b,f,a){d.pcCheck(a,1,1);b=null;if(a[0]instanceof l){if(b=d.fixSpatialReference(h.parseGeometryFromDictionary(a[0]),c.spatialReference),
!1===b instanceof t)throw Error("Illegal Parameter");}else b=a[0]instanceof t?q.fromJSON(a[0].toJSON()):d.fixSpatialReference(new t(JSON.parse(a[0])),c.spatialReference);if(null!==b&&!1===b.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};m.extent=function(c,e){return n(c,e,function(b,f,a){a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,1,1);b=null;a[0]instanceof l?
b=d.fixSpatialReference(h.parseGeometryFromDictionary(a[0]),c.spatialReference):a[0]instanceof p?(b={xmin:a[0].x,ymin:a[0].y,xmax:a[0].x,ymax:a[0].y,spatialReference:a[0].spatialReference.toJSON()},a[0].hasZ?(b.zmin=a[0].z,b.zmax=a[0].z):a[0].hasM&&(b.mmin=a[0].m,b.mmax=a[0].m),b=q.fromJSON(b)):b=a[0]instanceof u?q.fromJSON(a[0].extent.toJSON()):a[0]instanceof v?q.fromJSON(a[0].extent.toJSON()):a[0]instanceof t?q.fromJSON(a[0].extent.toJSON()):a[0]instanceof y?q.fromJSON(a[0].toJSON()):d.fixSpatialReference(new y(JSON.parse(a[0])),
c.spatialReference);if(null!==b&&!1===b.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};m.geometry=function(c,e){return n(c,e,function(b,f,a){d.pcCheck(a,1,1);b=null;b=a[0]instanceof h?d.fixSpatialReference(a[0].geometry(),c.spatialReference):a[0]instanceof l?d.fixSpatialReference(h.parseGeometryFromDictionary(a[0]),c.spatialReference):d.fixSpatialReference(q.fromJSON(JSON.parse(a[0])),
c.spatialReference);if(null!==b&&!1===b.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(b)})};m.setgeometry=function(c,e){return n(c,e,function(b,c,a){d.pcCheck(a,2,2);if(a[0]instanceof h){if(!0===a[0].immutable)throw Error("Feature is Immutable");if(a[1]instanceof w||null===a[1])a[0]._geometry=a[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");
return d.voidOperation})};m.feature=function(c,e){return n(c,e,function(b,f,a){if(0===a.length)throw Error("Missing Parameters");b=null;if(1===a.length)if(d.isString(a[0]))b=h.fromJson(JSON.parse(a[0]));else if(a[0]instanceof h)b=h.createFromArcadeFeature(a[0]);else if(a[0]instanceof w)b=h.createFromGraphicLikeObject(a[0],null,null);else if(a[0]instanceof l)b=a[0].hasField("geometry")?a[0].field("geometry"):null,f=a[0].hasField("attributes")?a[0].field("attributes"):null,null!==b&&b instanceof l&&
(b=h.parseGeometryFromDictionary(b)),null!==f&&(f=h.parseAttributesFromDictionary(f)),b=h.createFromGraphicLikeObject(b,f,null);else throw Error("Illegal Argument");else{if(2===a.length){f=b=null;if(null!==a[0])if(a[0]instanceof w)b=a[0];else if(b instanceof l)b=h.parseGeometryFromDictionary(a[0]);else throw Error("Illegal Argument");if(null!==a[1])if(a[1]instanceof l)f=h.parseAttributesFromDictionary(a[1]);else throw Error("Illegal Argument");}else{b=null;f={};if(null!==a[0])if(a[0]instanceof w)b=
a[0];else if(b instanceof l)b=h.parseGeometryFromDictionary(a[0]);else throw Error("Illegal Argument");for(var e=1;e<a.length;e+=2){var B=d.toString(a[e]),k=a[e+1];if(null===k||void 0===k||d.isString(k)||isNaN(k)||d.isDate(k)||d.isNumber(k)||d.isBoolean(k)){if(d.isFunctionParameter(k)||!1===d.isSimpleType(k))throw Error("Illegal Argument");f[B]=k===d.voidOperation?null:k}else throw Error("Illegal Argument");}}b=h.createFromGraphicLikeObject(b,f,null)}b._geometry=d.fixSpatialReference(b.geometry(),
c.spatialReference);b.immutable=!1;return b})};m.dictionary=function(c,e){return n(c,e,function(b,c,a){if(0===a.length)return a=new l,a.immutable=!1,a;if(1===a.length&&d.isString(a[0]))try{var e=JSON.parse(a[0]),f=l.convertObjectToArcadeDictionary(e);f.immutable=!1;return f}catch(k){throw Error("Missing Parameters or Illegal Json");}if(0!==a.length%2)throw Error("Missing Parameters");b={};for(c=0;c<a.length;c+=2)if(e=d.toString(a[c]),f=a[c+1],null===f||void 0===f||d.isString(f)||isNaN(f)||d.isDate(f)||
d.isNumber(f)||d.isBoolean(f)||d.isArray(f)||d.isImmutableArray(f)){if(d.isFunctionParameter(f))throw Error("Illegal Argument");b[e]=f===d.voidOperation?null:f}else throw Error("Illegal Argument");a=new l(b);a.immutable=!1;return a})};m.haskey=function(c,e){return n(c,e,function(b,c,a){d.pcCheck(a,2,2);b=d.toString(a[1]);if(a[0]instanceof h||a[0]instanceof l)return a[0].hasField(b);throw Error("Illegal Argument");})};m.indexof=function(c,e){return n(c,e,function(b,c,a){d.pcCheck(a,2,2);b=a[1];if(d.isArray(a[0])){for(c=
0;c<a[0].length;c++)if(d.equalityTest(b,a[0][c]))return c;return-1}if(d.isImmutableArray(a[0])){var e=a[0].length();for(c=0;c<e;c++)if(d.equalityTest(b,a[0].get(c)))return c;return-1}throw Error("Illegal Argument");})};m.angle=function(c,e){return n(c,e,function(b,c,a){a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3);if(!(a[0]instanceof p))throw Error("Illegal Argument");if(!(a[1]instanceof p))throw Error("Illegal Argument");if(2<a.length&&!(a[2]instanceof p))throw Error("Illegal Argument");return 2===
a.length?r.angle2D(a[0],a[1]):r.angleBetween2D(a[0],a[1],a[2])})};m.bearing=function(c,e){return n(c,e,function(b,c,a){a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3);if(!(a[0]instanceof p))throw Error("Illegal Argument");if(!(a[1]instanceof p))throw Error("Illegal Argument");if(2<a.length&&!(a[2]instanceof p))throw Error("Illegal Argument");return 2===a.length?r.bearing2D(a[0],a[1]):r.bearingBetween2D(a[0],a[1],a[2])})};m.isselfintersecting=function(c,e){return n(c,e,function(b,e,a){a=d.autoCastFeatureToGeometry(a);
d.pcCheck(a,1,1);b=a[0];if(b instanceof u)return b.isSelfIntersecting;if(b instanceof v)return b=b.paths,r.pathsSelfIntersecting(b);if(b instanceof t)for(e=b.points,a=0;a<e.length;a++)for(var f=0;f<e.length;f++)if(f!==a){for(var h=!0,k=0;k<e[a].length;k++)if(e[a][k]!==e[f][k]){h=!1;break}if(!0===h)return!0}return d.isArray(b)||d.isImmutableArray(b)?(b=d.autoCastArrayOfPointsToPolyline(b,c.spatialReference),null!==b&&(b=b.paths),r.pathsSelfIntersecting(b)):!1})}}});