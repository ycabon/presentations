// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","./has","./string","@dojo/framework/shim/Promise"],function(e,k,l,h){var g={info:0,warn:1,error:2};e=function(){function c(b){void 0===b&&(b={});this._loggedMessages={error:new Map,warn:new Map,info:new Map};this.module=b.module||"";this.writer=b.writer||null;this.level=b.level||null;null!=b.enabled&&(this.enabled=!!b.enabled);c._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this.parent=c.getLogger(this.module.slice(0,b)))}c.prototype.log=function(b,
a){for(var f=[],d=2;d<arguments.length;d++)f[d-2]=arguments[d];if(this._isEnabled()&&this._matchLevel(b)){if("always"!==a&&!c._throttlingDisabled){var d=this._argsToKey(f),e=this._loggedMessages[b].get(d);if("once"===a&&null!=e||"oncePerTick"===a&&e>=c._tickCounter)return;this._loggedMessages[b].set(d,c._tickCounter);c._scheduleTickCounterIncrement()}(d=this._inheritedWriter())&&d.apply(void 0,[b,this.module].concat(f))}};c.prototype.error=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];
this.log.apply(this,["error","always"].concat(b))};c.prototype.warn=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["warn","always"].concat(b))};c.prototype.info=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["info","always"].concat(b))};c.prototype.errorOnce=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["error","once"].concat(b))};c.prototype.warnOnce=function(){for(var b=
[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["warn","once"].concat(b))};c.prototype.infoOnce=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["info","once"].concat(b))};c.prototype.errorOncePerTick=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["error","oncePerTick"].concat(b))};c.prototype.warnOncePerTick=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,
["warn","oncePerTick"].concat(b))};c.prototype.infoOncePerTick=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];this.log.apply(this,["info","oncePerTick"].concat(b))};c.prototype.getLogger=function(b){return c.getLogger(this.module+"."+b)};Object.defineProperty(c,"test",{get:function(){return{resetLoggers:function(b){void 0===b&&(b={});var a=c._loggers;c._loggers=b;return a},set throttlingDisabled(b){c._throttlingDisabled=b}}},enumerable:!0,configurable:!0});c.getLogger=function(b){var a=
c._loggers[b];a||(a=new c({module:b}));return a};c.prototype._parentWithMember=function(b,a){for(var c=this;c&&null==c[b];)c=c.parent;return c?c[b]:a};c.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};c.prototype._consoleWriter=function(b,a){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];console[b].apply(console,["["+a+"]"].concat(c))};c.prototype._matchLevel=function(b){return g[this._parentWithMember("level","error")]<=g[b]};c.prototype._isEnabled=
function(){return this._parentWithMember("enabled",!0)};c.prototype._argsToKey=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];return h.numericHash(JSON.stringify(b,function(b,a){return"object"!==typeof a||Array.isArray(a)?a:"[Object]"}))};c._scheduleTickCounterIncrement=function(){c._tickCounterScheduled||(c._tickCounterScheduled=!0,Promise.resolve().then(function(){c._tickCounter++;c._tickCounterScheduled=!1}))};c._loggers={};c._tickCounter=0;c._tickCounterScheduled=!1;c._throttlingDisabled=
!1;return c}();e.getLogger("esri").level="warn";return e});