// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./has ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),function(g,e,h,k,n,l,d,m,f){Object.defineProperty(e,"__esModule",{value:!0});var q=function(){function b(c){var a=this;this.instance=c;this._resolver=d.createDeferred();this._status=void 0;this._resolvingPromises=[];this._resolver.promise.then(function(){a._status=0;a._cleanUp()},function(){a._status=1;a._cleanUp()})}b.prototype.addResolvingPromise=
function(c){this._resolvingPromises.push(c);this._tryResolve()};b.prototype.isResolved=function(){return 0===this._status};b.prototype.isRejected=function(){return 1===this._status};b.prototype.isFulfilled=function(){return null!=this._status};b.prototype.abort=function(){this._resolver.reject(d.createAbortError())};b.prototype.when=function(c,a){return this._resolver.promise.then(c,a)};b.prototype._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};b.prototype._tryResolve=
function(){var c=this;if(!this.isFulfilled()){var a=d.createDeferred(),p=this._resolvingPromises.concat([a.promise]),b=this._allPromise=d.all(p);b.then(function(){c.isFulfilled()||c._allPromise!==b||c._resolver.resolve(c.instance)},function(a){c.isFulfilled()||c._allPromise!==b||d.isAbortError(a)||c._resolver.reject(a)});l("esri-native-promise")?a.resolve():m.schedule(function(){return a.resolve()})}};return b}();e.EsriPromiseMixin=function(b){return function(c){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=
arguments[b];a=c.apply(this,a)||this;a._promiseProps=new q(a);a.addResolvingPromise(l("esri-native-promise")?d.resolve():d.create(function(a){return m.schedule(a)}));return a}h(a,c);a.prototype.isResolved=function(){return this._promiseProps.isResolved()};a.prototype.isRejected=function(){return this._promiseProps.isRejected()};a.prototype.isFulfilled=function(){return this._promiseProps.isFulfilled()};a.prototype.when=function(a,b){var c=this;return d.create(function(a,b){c._promiseProps.when(a,
b)}).then(a,b)};a.prototype.catch=function(a){return this.when(null,a)};a.prototype.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in a?a.when():a)};return a=k([f.subclass("esri.core.Promise")],a)}(f.declared(b))};g=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}h(c,b);return c=k([f.subclass("esri.core.Promise")],c)}(f.declared(e.EsriPromiseMixin(n)));e.EsriPromise=g});