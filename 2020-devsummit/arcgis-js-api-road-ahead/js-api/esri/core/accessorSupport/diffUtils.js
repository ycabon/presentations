// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../Accessor ../Collection ../maybe ./utils".split(" "),function(C,h,u,w,v,z){function x(a){return a instanceof w?Object.keys(a.items):a instanceof u?z.getProperties(a).keys():a?Object.keys(a):[]}function q(a,b){return a instanceof w?a.items[b]:a[b]}function A(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function l(a){return a?a.declaredClass:null}function y(a,b){var e,c=a.diff;if(c&&"function"===typeof c)return c(a,b);var d=x(a),m=x(b);if(0!==d.length||
0!==m.length){if(!d.length||!m.length||A(a,b))return{type:"complete",oldValue:a,newValue:b};var n=m.filter(function(a){return-1===d.indexOf(a)}),p=d.filter(function(a){return-1===m.indexOf(a)}),n=d.filter(function(c){return-1<m.indexOf(c)&&q(a,c)!==q(b,c)}).concat(n,p).sort();if((p=l(a))&&-1<B.indexOf(p)&&n.length)return{type:"complete",oldValue:a,newValue:b};for(var r,p=a instanceof u&&b instanceof u,h=0;h<n.length;h++){var k=n[h],f=q(a,k),g=q(b,k),t=void 0;!(p||"function"!==typeof f&&"function"!==
typeof g)||f===g||null==f&&null==g||(t=c&&c[k]&&"function"===typeof c[k]?c[k](f,g):"object"===typeof f&&"object"===typeof g&&l(f)===l(g)?y(f,g):{type:"complete",oldValue:f,newValue:g},v.isSome(t)&&(v.isSome(r)?r.diff[k]=t:r={type:"partial",diff:(e={},e[k]=t,e)}))}return r}}function d(a){if(v.isNone(a))return!0;switch(a.type){case "complete":return!1;case "collection":for(var b=0,e=a.added;b<e.length;b++){var c=e[b];if(!d(c))return!1}b=0;for(e=a.removed;b<e.length;b++)if(c=e[b],!d(c))return!1;b=0;
for(a=a.changed;b<a.length;b++)if(c=a[b],!d(c))return!1;return!0;case "partial":for(b in a.diff)if(c=a.diff[b],!d(c))return!1;return!0}}Object.defineProperty(h,"__esModule",{value:!0});var B=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];h.diff=function(a,b){if("function"!==typeof a&&"function"!==typeof b&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof b&&l(a)!==l(b)?{type:"complete",oldValue:a,newValue:b}:
y(a,b)};h.isEmpty=d});