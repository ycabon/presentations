// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(F,d){function x(d){for(var m=0,q=0;q<d.length;q++)m+=d[q];return m/d.length}function g(d){for(var m=x(d),q=d.length,g=0,y=0;y<d.length;y++)g+=Math.pow(d[y]-m,2);return 1<q?g/(q-1):0}Object.defineProperty(d,"__esModule",{value:!0});d.aggregateFunction=function(d,g){var q=m[d.toLowerCase()];if(null==q)throw Error("Function Not Recognised");if(g.length<q.minParams||g.length>q.maxParams)throw Error("Invalid Parameter count for call to "+
d.toUpperCase());return q.evaluate(g)};d.isAggregate=function(d,g){d=m[d.toLowerCase()];return null!=d&&g>=d.minParams&&g<=d.maxParams};var m={min:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.min.apply(Math,d[0])}},max:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.max.apply(Math,d[0])}},avg:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:x(d[0])}},sum:{minParams:1,maxParams:1,evaluate:function(d){if(null==d[0])d=null;else{d=
d[0];for(var m=0,l=0;l<d.length;l++)m+=d[l];d=m}return d}},stddev:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.sqrt(g(d[0]))}},count:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].length}},var:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:g(d[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","../string"],function(F,d,x){Object.defineProperty(d,"__esModule",{value:!0});F=function(){function d(){this.op=
"+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}d.fixDefaults=function(d){if(null!==d.precision||null!==d.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};d.createFromMilliseconds=function(m){var q=new d;q.second=m/1E3;return q};d.createFromValueAndQualifer=function(m,g,l){var q=null,y=new d;y.op="-"===l?"-":"+";if("interval-period"===g.type){d.fixDefaults(g);if("year"===g.period||"month"===g.period)throw Error("Year-Month Intervals not supported");
if(/^[0-9]{1,}$/.test(m))y[g.period]=parseFloat(m);else throw Error("Illegal Interval");}else{d.fixDefaults(g.start);d.fixDefaults(g.end);if("year"===g.start.period||"month"===g.start.period)throw Error("Year-Month Intervals not supported");if("year"===g.end.period||"month"===g.end.period)throw Error("Year-Month Intervals not supported");switch(g.start.period){case "day":switch(g.end.period){case "hour":q=/^[0-9]{1,} [0-9]{1,}$/;if(q.test(m))y[g.start.period]=parseFloat(m.split(" ")[0]),y[g.end.period]=
parseFloat(m.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(q.test(m))y[g.start.period]=parseFloat(m.split(" ")[0]),m=m.split(" ")[1].split(":"),y.hour=parseFloat(m[0]),y.minute=parseFloat(m[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(m))y[g.start.period]=parseFloat(m.split(" ")[0]),m=m.split(" ")[1].split(":"),y.hour=parseFloat(m[0]),y.minute=
parseFloat(m[1]),y.second=parseFloat(m[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(g.end.period){case "minute":q=/^[0-9]{1,}:[0-9]{1,}$/;if(q.test(m))y.hour=parseFloat(m.split(":")[0]),y.minute=parseFloat(m.split(":")[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(m))m=m.split(":"),y.hour=parseFloat(m[0]),y.minute=parseFloat(m[1]),y.second=parseFloat(m[2]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(g.end.period){case "second":q=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(m))m=m.split(":"),y.minute=parseFloat(m[0]),y.second=parseFloat(m[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return y};d.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+
864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return d}();d.SqlInterval=F;d.evaluateFunction=function(d,q){var m=g[d.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(q.length<m.minParams||q.length>m.maxParams)throw Error("Invalid Parameter count for call to "+d.toUpperCase());return m.evaluate(q)};d.isStandardized=function(d,q){d=g[d.toLowerCase()];return null!=d&&q>=d.minParams&&q<=d.maxParams};var g={extract:{minParams:2,maxParams:2,evaluate:function(d){var m=d[0];
d=d[1];if(null==d)return null;if(d instanceof Date)switch(m.toUpperCase()){case "SECOND":return d.getSeconds();case "MINUTE":return d.getMinutes();case "HOUR":return d.getHours();case "DAY":return d.getDate();case "MONTH":return d.getMonth()+1;case "YEAR":return d.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(d){if(2===d.length){var m=d[0],g=d[1];return null==m||null==g?null:m.toString().substring(g-1)}if(3===d.length)return m=
d[0],g=d[1],d=d[2],null==m||null==g||null==d?null:0>=d?"":m.toString().substring(g-1,g+d-1)}},position:{minParams:2,maxParams:2,evaluate:function(d){var m=d[0];d=d[1];return null==m||null==d?null:d.indexOf(m)+1}},trim:{minParams:2,maxParams:3,evaluate:function(d){var m=3===d.length,g=m?d[1]:" ",m=m?d[2]:d[1];if(null==g||null==m)return null;g="("+x.escapeRegExpString(g)+")";switch(d[0]){case "BOTH":return m.replace(new RegExp("^"+g+"*|"+g+"*$","g"),"");case "LEADING":return m.replace(new RegExp("^"+
g+"*","g"),"");case "TRAILING":return m.replace(new RegExp(g+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.abs(d[0])}},ceiling:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.ceil(d[0])}},floor:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.floor(d[0])}},log:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.log(d[0])}},log10:{minParams:1,
maxParams:1,evaluate:function(d){return null==d[0]?null:Math.log(d[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.sin(d[0])}},cos:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.cos(d[0])}},tan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.tan(d[0])}},asin:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.asin(d[0])}},acos:{minParams:1,maxParams:1,evaluate:function(d){return null==
d[0]?null:Math.acos(d[0])}},atan:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:Math.atan(d[0])}},sign:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:0<d[0]?1:0>d[1]?-1:0}},power:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:Math.pow(d[0],d[1])}},mod:{minParams:2,maxParams:2,evaluate:function(d){return null==d[0]||null==d[1]?null:d[0]%d[1]}},round:{minParams:1,maxParams:2,evaluate:function(d){var g=d[0];d=2===d.length?
Math.pow(10,d[1]):1;return null==g?null:Math.round(g*d)/d}},truncate:{minParams:1,maxParams:2,evaluate:function(d){return null==d[0]?null:1===d.length?parseInt(d[0].toFixed(0),10):parseFloat(d[0].toFixed(d[1]))}},char_length:{minParams:1,maxParams:1,evaluate:function(d){return"string"===typeof d[0]||d[0]instanceof String?d[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(d){for(var g="",m=0;m<d.length;m++){if(null==d[m])return null;g+=d[m].toString()}return g}},lower:{minParams:1,
maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(d){return null==d[0]?null:d[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require","exports","./sql92grammar"],function(F,d,x){Object.defineProperty(d,"__esModule",{value:!0});F=function(){function d(){}d.parse=function(d){return x.parse(d)};return d}();d.WhereGrammar=F})},"esri/core/sql/sql92grammar":function(){define([],function(){function F(d,
x,g,m){this.message=d;this.expected=x;this.found=g;this.location=m;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,F)}(function(d,x){function g(){this.constructor=d}g.prototype=x.prototype;d.prototype=new g})(F,Error);F.buildMessage=function(d,x){function g(d){return d.charCodeAt(0).toString(16).toUpperCase()}function m(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+g(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+g(d)})}function q(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+g(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+g(d)})}var F={literal:function(d){return'"'+m(d.text)+'"'},"class":function(d){var g=
"",l;for(l=0;l<d.parts.length;l++)g+=d.parts[l]instanceof Array?q(d.parts[l][0])+"-"+q(d.parts[l][1]):q(d.parts[l]);return"["+(d.inverted?"^":"")+g+"]"},any:function(d){return"any character"},end:function(d){return"end of input"},other:function(d){return d.description}};return"Expected "+function(d){var g=Array(d.length),l;for(l=0;l<d.length;l++){var m=l,q;q=d[l];q=F[q.type](q);g[m]=q}g.sort();if(0<g.length){for(d=l=1;l<g.length;l++)g[l-1]!==g[l]&&(g[d]=g[l],d++);g.length=d}switch(g.length){case 1:return g[0];
case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}(d)+" but "+(x?'"'+m(x)+'"':"end of input")+" found."};return{SyntaxError:F,parse:function(d,x){function g(a,b){return{type:"literal",text:a,ignoreCase:b}}function m(a,b,h){return{type:"class",parts:a,inverted:b,ignoreCase:h}}function q(a){var b=qa[a],e;if(!b){for(e=a-1;!qa[e];)e--;b=qa[e];for(b={line:b.line,column:b.column};e<a;)10===d.charCodeAt(e)?(b.line++,b.column=1):b.column++,e++;qa[a]=b}return b}
function ja(a,b){var e=q(a),p=q(b);return{start:{offset:a,line:e.line,column:e.column},end:{offset:b,line:p.line,column:p.column}}}function l(a){b<R||(b>R&&(R=b,Ca=[]),Ca.push(a))}function I(){var e,p,h;e=b;p=n();p!==a?(p=G(),p!==a?(h=n(),h!==a?e=p:(b=e,e=a)):(b=e,e=a)):(b=e,e=a);return e}function y(){var e,p,h,d,c,f,k,g;e=b;p=G();if(p!==a){h=[];d=b;c=n();c!==a?(f=ka(),f!==a?(k=n(),k!==a?(g=G(),g!==a?d=c=[c,f,k,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);for(;d!==a;)h.push(d),d=b,c=n(),c!==a?(f=
ka(),f!==a?(k=n(),k!==a?(g=G(),g!==a?d=c=[c,f,k,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);if(h!==a){e={type:"expr_list"};p=[p];for(d=0;d<h.length;d++)p.push(h[d][3]);e.value=p}else b=e,e=a}else b=e,e=a;return e}function G(){var e,p,h,d,c,f,k,g;e=b;p=N();if(p!==a){h=[];d=b;c=n();c!==a?(f=Oa(),f!==a?(k=n(),k!==a?(g=N(),g!==a?d=c=[c,f,k,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);for(;d!==a;)h.push(d),d=b,c=n(),c!==a?(f=Oa(),f!==a?(k=n(),k!==a?(g=N(),g!==a?d=c=[c,f,k,g]:(b=d,d=a)):(b=d,d=a)):(b=
d,d=a)):(b=d,d=a);h!==a?e=p=la(p,h):(b=e,e=a)}else b=e,e=a;return e}function N(){var e,p,h,d,c,f,k,g;e=b;p=L();if(p!==a){h=[];d=b;c=n();c!==a?(f=fa(),f!==a?(k=n(),k!==a?(g=L(),g!==a?d=c=[c,f,k,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);for(;d!==a;)h.push(d),d=b,c=n(),c!==a?(f=fa(),f!==a?(k=n(),k!==a?(g=L(),g!==a?d=c=[c,f,k,g]:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a);h!==a?e=p=la(p,h):(b=e,e=a)}else b=e,e=a;return e}function L(){var e,p,h,c,f;e=b;p=ca();p===a&&(p=b,33===d.charCodeAt(b)?(h=bd,
b++):(h=a,0===k&&l(cd)),h!==a?(c=b,k++,61===d.charCodeAt(b)?(f=Pa,b++):(f=a,0===k&&l(Qa)),k--,f===a?c=void 0:(b=c,c=a),c!==a?p=h=[h,c]:(b=p,p=a)):(b=p,p=a));p!==a?(h=n(),h!==a?(c=L(),c!==a?e=p={type:"unary_expr",operator:"NOT",expr:c}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a);if(e===a)if(e=b,p=M(),p!==a)if(h=n(),h!==a){var g,r,m;h=[];c=b;f=n();f!==a?(g=ba(),g!==a?(r=n(),r!==a?(m=M(),m!==a?c=f=[f,g,r,m]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);if(c!==a)for(;c!==a;)h.push(c),c=b,f=n(),f!==a?(g=ba(),g!==a?(r=
n(),r!==a?(m=M(),m!==a?c=f=[f,g,r,m]:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a);else h=a;h!==a&&(h={type:"arithmetic",tail:h});h===a&&(h=b,c=S(),c!==a?(f=n(),f!==a?(f=O(),f!==a?(f=n(),f!==a?(f=y(),f!==a?(g=n(),g!==a?(g=P(),g!==a?h=c={op:c,right:f}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=S(),c!==a?(f=n(),f!==a?(f=O(),f!==a?(f=n(),f!==a?(f=P(),f!==a?h=c={op:c,right:{type:"expr_list",value:[]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===
a&&(h=b,c=S(),c!==a?(f=n(),f!==a?(f=Ra(),f!==a?h=c={op:c,right:f}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a))),h===a&&(h=b,f=ca(),f!==a?(c=n(),c!==a?(c=Sa(),c!==a?(g=n(),g!==a?(g=M(),g!==a?(r=n(),r!==a?(r=fa(),r!==a?(f=n(),f!==a?(f=M(),f!==a?h=f={op:"NOT"+c,right:{type:"expr_list",value:[g,f]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,f=Sa(),f!==a?(c=n(),c!==a?(c=M(),c!==a?(g=n(),g!==a?(g=fa(),g!==a?(r=n(),r!==a?(r=M(),r!==a?h=f={op:f,right:{type:"expr_list",
value:[c,r]}}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)),h===a&&(h=b,c=Ta(),c!==a?(f=n(),f!==a?(f=ca(),f!==a?(f=n(),f!==a?(f=M(),f!==a?h=c={op:c+"NOT",right:f}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=Ta(),c!==a?(f=n(),f!==a?(f=M(),f!==a?h=c={op:c,right:f}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)),h===a&&(h=b,c=ma(),c!==a?(f=n(),f!==a?(f=u(),f!==a?(g=n(),g!==a?(g=b,d.substr(b,6).toLowerCase()===dd?(r=d.substr(b,6),b+=6):(r=a,0===k&&l(ed)),r!==a?
(r=b,k++,m=t(),k--,m===a?r=void 0:(b=r,r=a),r!==a?g="ESCAPE":(b=g,g=a)):(b=g,g=a),g!==a?(g=n(),g!==a?(g=cc(),g!==a?h=c={op:c,right:f,escape:g.value}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,c=ma(),c!==a?(f=n(),f!==a?(f=u(),f!==a?h=c={op:c,right:f,escape:""}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a))))));h===a&&(h=null);h!==a?(e=p,p=h,""==p||void 0==p||null==p?p=e:(h=null,p=h="arithmetic"==p.type?la(e,p.tail):Ua(p.op,e,p.right,p.escape)),e=p):(b=e,e=a)}else b=e,
e=a;else b=e,e=a;return e}function ba(){var e;d.substr(b,2)===Va?(e=Va,b+=2):(e=a,0===k&&l(fd));e===a&&(62===d.charCodeAt(b)?(e=gd,b++):(e=a,0===k&&l(hd)),e===a&&(d.substr(b,2)===Wa?(e=Wa,b+=2):(e=a,0===k&&l(id)),e===a&&(d.substr(b,2)===Xa?(e=Xa,b+=2):(e=a,0===k&&l(jd)),e===a&&(60===d.charCodeAt(b)?(e=kd,b++):(e=a,0===k&&l(ld)),e===a&&(61===d.charCodeAt(b)?(e=Pa,b++):(e=a,0===k&&l(Qa)),e===a&&(d.substr(b,2)===Ya?(e=Ya,b+=2):(e=a,0===k&&l(md))))))));return e}function ma(){var e,c,d,f;e=e=b;c=ca();
c!==a?(d=n(),d!==a?(f=Za(),f!==a?e=c=[c,d,f]:(b=e,e=a)):(b=e,e=a)):(b=e,e=a);e!==a&&(e=e[0]+" "+e[2]);e===a&&(e=Za());return e}function S(){var e,c,d,f;e=e=b;c=ca();c!==a?(d=n(),d!==a?(f=dc(),f!==a?e=c=[c,d,f]:(b=e,e=a)):(b=e,e=a)):(b=e,e=a);e!==a&&(e=e[0]+" "+e[2]);e===a&&(e=dc());return e}function M(){var e,c,d,f,g,k,r,u;e=b;c=T();if(c!==a){d=[];f=b;g=n();g!==a?(k=H(),k!==a?(r=n(),r!==a?(u=T(),u!==a?f=g=[g,k,r,u]:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a);for(;f!==a;)d.push(f),f=b,g=n(),g!==a?(k=
H(),k!==a?(r=n(),r!==a?(u=T(),u!==a?f=g=[g,k,r,u]:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a);d!==a?e=c=la(c,d):(b=e,e=a)}else b=e,e=a;return e}function H(){var e;43===d.charCodeAt(b)?(e=ec,b++):(e=a,0===k&&l(fc));e===a&&(45===d.charCodeAt(b)?(e=gc,b++):(e=a,0===k&&l(hc)));return e}function T(){var e,c,d,f,g,k,r,u;e=b;c=ga();if(c!==a){d=[];f=b;g=n();g!==a?(k=V(),k!==a?(r=n(),r!==a?(u=ga(),u!==a?f=g=[g,k,r,u]:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a);for(;f!==a;)d.push(f),f=b,g=n(),g!==a?(k=V(),k!==
a?(r=n(),r!==a?(u=ga(),u!==a?f=g=[g,k,r,u]:(b=f,f=a)):(b=f,f=a)):(b=f,f=a)):(b=f,f=a);d!==a?e=c=la(c,d):(b=e,e=a)}else b=e,e=a;return e}function V(){var e;42===d.charCodeAt(b)?(e=nd,b++):(e=a,0===k&&l(od));e===a&&(47===d.charCodeAt(b)?(e=pd,b++):(e=a,0===k&&l(qd)));return e}function ga(){var e,c,h,f,g,r,m;m=cc();if(m===a){var q,x,F,M;q=b;var C,J,H,R;C=b;J=zb();J!==a?(H=yc(),H!==a?(R=zc(),R!==a?C=J=parseFloat(J+H+R):(b=C,C=a)):(b=C,C=a)):(b=C,C=a);C===a&&(C=b,J=zb(),J!==a?(H=yc(),H!==a?C=J=parseFloat(J+
H):(b=C,C=a)):(b=C,C=a),C===a&&(C=b,J=zb(),J!==a?(H=zc(),H!==a?C=J=parseFloat(J+H):(b=C,C=a)):(b=C,C=a),C===a&&(C=b,J=zb(),J!==a&&(J=parseFloat(J)),C=J)));x=C;x!==a?(F=b,k++,M=Da(),k--,M===a?F=void 0:(b=F,F=a),F!==a?q=x={type:"number",value:x}:(b=q,q=a)):(b=q,q=a);m=q;if(m===a){var L,I;L=b;var N,S,T,ga;N=b;d.substr(b,4).toLowerCase()===rd?(S=d.substr(b,4),b+=4):(S=a,0===k&&l(sd));S!==a?(T=b,k++,ga=t(),k--,ga===a?T=void 0:(b=T,T=a),T!==a?N=S=[S,T]:(b=N,N=a)):(b=N,N=a);I=N;I!==a&&(I={type:"bool",value:!0});
L=I;if(L===a){L=b;var ra,V,U,la;ra=b;d.substr(b,5).toLowerCase()===td?(V=d.substr(b,5),b+=5):(V=a,0===k&&l(ud));V!==a?(U=b,k++,la=t(),k--,la===a?U=void 0:(b=U,U=a),U!==a?ra=V=[V,U]:(b=ra,ra=a)):(b=ra,ra=a);I=ra;I!==a&&(I={type:"bool",value:!1});L=I}m=L;if(m===a){var ca,sa,ba,Ea,ma;sa=b;d.substr(b,4).toLowerCase()===vd?(ba=d.substr(b,4),b+=4):(ba=a,0===k&&l(wd));ba!==a?(Ea=b,k++,ma=t(),k--,ma===a?Ea=void 0:(b=Ea,Ea=a),Ea!==a?sa=ba=[ba,Ea]:(b=sa,sa=a)):(b=sa,sa=a);ca=sa;ca!==a&&(ca={type:"null",value:null});
m=ca;if(m===a){var ha,ja,qa,ka;ha=b;var ta,fa,$a,Ba;ta=b;d.substr(b,4).toLowerCase()===xd?(fa=d.substr(b,4),b+=4):(fa=a,0===k&&l(yd));fa!==a?($a=b,k++,Ba=t(),k--,Ba===a?$a=void 0:(b=$a,$a=a),$a!==a?ta=fa="DATE":(b=ta,ta=a)):(b=ta,ta=a);ja=ta;ja!==a?(qa=n(),qa!==a?(ka=u(),ka!==a?ha=ja={type:"date",value:ka.value}:(b=ha,ha=a)):(b=ha,ha=a)):(b=ha,ha=a);m=ha;if(m===a){var ia,pa,Ca,ic;ia=b;var ua,Ab,ab,Oa;ua=b;d.substr(b,9).toLowerCase()===zd?(Ab=d.substr(b,9),b+=9):(Ab=a,0===k&&l(Ad));Ab!==a?(ab=b,k++,
Oa=t(),k--,Oa===a?ab=void 0:(b=ab,ab=a),ab!==a?ua=Ab="TIMESTAMP":(b=ua,ua=a)):(b=ua,ua=a);pa=ua;pa!==a?(Ca=n(),Ca!==a?(ic=u(),ic!==a?ia=pa={type:"timestamp",value:ic.value}:(b=ia,ia=a)):(b=ia,ia=a)):(b=ia,ia=a);m=ia;if(m===a){var z,Fa,Bb,da,Cb,Ga,Pa,jc;z=b;Fa=Ac();Fa!==a?(Bb=n(),Bb!==a?(45===d.charCodeAt(b)?(da=gc,b++):(da=a,0===k&&l(hc)),da===a&&(43===d.charCodeAt(b)?(da=ec,b++):(da=a,0===k&&l(fc))),da!==a?(Cb=n(),Cb!==a?(Ga=u(),Ga!==a?(Pa=n(),Pa!==a?(jc=Db(),jc!==a?z=Fa={type:"interval",value:Ga,
qualifier:jc,op:da}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a);z===a&&(z=b,Fa=Ac(),Fa!==a?(Bb=n(),Bb!==a?(da=u(),da!==a?(Cb=n(),Cb!==a?(Ga=Db(),Ga!==a?z=Fa={type:"interval",value:da,qualifier:Ga,op:""}:(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a)):(b=z,z=a));m=z}}}}}}e=m;if(e===a){var D,kc,Qa,Sa,Ta,lc,Ua,Va,Wa,mc,Xa,Ya;D=b;var va,Eb,bb,Za;va=b;d.substr(b,7).toLowerCase()===Bd?(Eb=d.substr(b,7),b+=7):(Eb=a,0===k&&l(Cd));Eb!==a?(bb=b,k++,Za=t(),k--,Za===a?bb=void 0:(b=
bb,bb=a),bb!==a?va=Eb="EXTRACT":(b=va,va=a)):(b=va,va=a);kc=va;if(kc!==a)if(Qa=n(),Qa!==a)if(Sa=O(),Sa!==a)if(Ta=n(),Ta!==a){var W;W=Bc();W===a&&(W=Cc(),W===a&&(W=Dc(),W===a&&(W=Ec(),W===a&&(W=Fc(),W===a&&(W=wa())))));lc=W;lc!==a?(Ua=n(),Ua!==a?(Va=nc(),Va!==a?(Wa=n(),Wa!==a?(mc=G(),mc!==a?(Xa=n(),Xa!==a?(Ya=P(),Ya!==a?D=kc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:lc},mc]}}:(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)):(b=D,D=a)}else b=
D,D=a;else b=D,D=a;else b=D,D=a;else b=D,D=a;e=D;if(e===a){var B,oc,lb,mb,nb,Fb,ob,pb,qb,Gb,rb,Q,Ha,pc,qc,rc;B=b;var xa,Hb,cb,sb;xa=b;d.substr(b,9).toLowerCase()===Dd?(Hb=d.substr(b,9),b+=9):(Hb=a,0===k&&l(Ed));Hb!==a?(cb=b,k++,sb=t(),k--,sb===a?cb=void 0:(b=cb,cb=a),cb!==a?xa=Hb="SUBSTRING":(b=xa,xa=a)):(b=xa,xa=a);oc=xa;if(oc!==a)if(lb=n(),lb!==a)if(mb=O(),mb!==a)if(nb=n(),nb!==a)if(Fb=G(),Fb!==a)if(ob=n(),ob!==a)if(pb=nc(),pb!==a)if(qb=n(),qb!==a)if(Gb=G(),Gb!==a)if(rb=n(),rb!==a){Q=b;var ya,Ib,
db,tb;ya=b;d.substr(b,3).toLowerCase()===Fd?(Ib=d.substr(b,3),b+=3):(Ib=a,0===k&&l(Gd));Ib!==a?(db=b,k++,tb=t(),k--,tb===a?db=void 0:(b=db,db=a),db!==a?ya=Ib="FOR":(b=ya,ya=a)):(b=ya,ya=a);Ha=ya;Ha!==a?(pc=n(),pc!==a?(qc=G(),qc!==a?(rc=n(),rc!==a?Q=Ha=[Ha,pc,qc,rc]:(b=Q,Q=a)):(b=Q,Q=a)):(b=Q,Q=a)):(b=Q,Q=a);Q===a&&(Q=null);Q!==a?(Ha=P(),Ha!==a?B=oc={type:"function",name:"substring",args:{type:"expr_list",value:Q?[Fb,Gb,Q[2]]:[Fb,Gb]}}:(b=B,B=a)):(b=B,B=a)}else b=B,B=a;else b=B,B=a;else b=B,B=a;else b=
B,B=a;else b=B,B=a;else b=B,B=a;else b=B,B=a;else b=B,B=a;else b=B,B=a;else b=B,B=a;e=B;if(e===a){var v,Ia,Jb,Kb,Lb,X,Mb,Ja,Nb,Ob,ub,sc,vb,wb;v=b;Ia=Gc();Ia!==a?(Jb=n(),Jb!==a?(Kb=O(),Kb!==a?(Lb=n(),Lb!==a?(X=Pb(),X===a&&(X=null),X!==a?(Mb=n(),Mb!==a?(Ja=G(),Ja!==a?(Nb=n(),Nb!==a?(Ob=nc(),Ob!==a?(ub=n(),ub!==a?(sc=G(),sc!==a?(vb=n(),vb!==a?(wb=P(),wb!==a?v=Ia={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==X?"BOTH":X},Ja,sc]}}:(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):
(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a);v===a&&(v=b,Ia=Gc(),Ia!==a?(Jb=n(),Jb!==a?(Kb=O(),Kb!==a?(Lb=n(),Lb!==a?(X=Pb(),X===a&&(X=null),X!==a?(Mb=n(),Mb!==a?(Ja=G(),Ja!==a?(Nb=n(),Nb!==a?(Ob=P(),Ob!==a?v=Ia={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==X?"BOTH":X},Ja]}}:(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a)):(b=v,v=a));e=v;if(e===a){var E,tc,
xb,yb,Hc,uc,Ic,Jc,Kc,vc,Lc,Mc;E=b;var za,Qb,eb,Nc;za=b;d.substr(b,8).toLowerCase()===Hd?(Qb=d.substr(b,8),b+=8):(Qb=a,0===k&&l(Id));Qb!==a?(eb=b,k++,Nc=t(),k--,Nc===a?eb=void 0:(b=eb,eb=a),eb!==a?za=Qb="POSITION":(b=za,za=a)):(b=za,za=a);tc=za;tc!==a?(xb=n(),xb!==a?(yb=O(),yb!==a?(Hc=n(),Hc!==a?(uc=G(),uc!==a?(Ic=n(),Ic!==a?(Jc=dc(),Jc!==a?(Kc=n(),Kc!==a?(vc=G(),vc!==a?(Lc=n(),Lc!==a?(Mc=P(),Mc!==a?E=tc={type:"function",name:"position",args:{type:"expr_list",value:[uc,vc]}}:(b=E,E=a)):(b=E,E=a)):
(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a)):(b=E,E=a);e=E;if(e===a){var K,Rb,Oc,Pc,Qc,Ka,Rc,Sc;K=b;var Y,fb,gb,ea;Y=b;Y=fb=hb();if(Y===a)if(Y=b,96===d.charCodeAt(b)?(fb=Tc,b++):(fb=a,0===k&&l(Uc)),fb!==a){gb=[];Vc.test(d.charAt(b))?(ea=d.charAt(b),b++):(ea=a,0===k&&l(Wc));if(ea!==a)for(;ea!==a;)gb.push(ea),Vc.test(d.charAt(b))?(ea=d.charAt(b),b++):(ea=a,0===k&&l(Wc));else gb=a;gb!==a?(96===d.charCodeAt(b)?(ea=Tc,b++):(ea=a,0===k&&l(Uc)),ea!==a?Y=fb=gb.join(""):
(b=Y,Y=a)):(b=Y,Y=a)}else b=Y,Y=a;Rb=Y;Rb!==a?(Oc=n(),Oc!==a?(Pc=O(),Pc!==a?(Qc=n(),Qc!==a?(Ka=y(),Ka===a&&(Ka=null),Ka!==a?(Rc=n(),Rc!==a?(Sc=P(),Sc!==a?K=Rb={type:"function",name:Rb,args:Ka?Ka:{type:"expr_list",value:[]}}:(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a)):(b=K,K=a);e=K;if(e===a){var Sb,w,La,Tb,Ma,Ub,na,Z,ib,Xc,Yc;w=b;La=Vb();if(La!==a)if(Tb=n(),Tb!==a)if(Ma=G(),Ma!==a)if(Ub=n(),Ub!==a){na=[];for(Z=Wb();Z!==a;)na.push(Z),Z=Wb();na!==a?(Z=n(),Z!==a?(ib=Xb(),ib!==a?
w=La={type:"case_expression",format:"simple",operand:Ma,clauses:na,else:null}:(b=w,w=a)):(b=w,w=a)):(b=w,w=a)}else b=w,w=a;else b=w,w=a;else b=w,w=a;else b=w,w=a;if(w===a)if(w=b,La=Vb(),La!==a)if(Tb=n(),Tb!==a)if(Ma=G(),Ma!==a)if(Ub=n(),Ub!==a){na=[];for(Z=Wb();Z!==a;)na.push(Z),Z=Wb();na!==a?(Z=n(),Z!==a?(ib=Zc(),ib!==a?(Xc=n(),Xc!==a?(Yc=Xb(),Yc!==a?w=La={type:"case_expression",format:"simple",operand:Ma,clauses:na,else:ib.value}:(b=w,w=a)):(b=w,w=a)):(b=w,w=a)):(b=w,w=a)):(b=w,w=a)}else b=w,w=
a;else b=w,w=a;else b=w,w=a;else b=w,w=a;Sb=w;if(Sb===a){var A,Na,Yb,oa,aa,jb,$c,ad;A=b;Na=Vb();if(Na!==a)if(Yb=n(),Yb!==a){oa=[];for(aa=Zb();aa!==a;)oa.push(aa),aa=Zb();oa!==a?(aa=n(),aa!==a?(jb=Xb(),jb!==a?A=Na={type:"case_expression",format:"searched",clauses:oa,else:null}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)}else b=A,A=a;else b=A,A=a;if(A===a)if(A=b,Na=Vb(),Na!==a)if(Yb=n(),Yb!==a){oa=[];for(aa=Zb();aa!==a;)oa.push(aa),aa=Zb();oa!==a?(aa=n(),aa!==a?(jb=Zc(),jb!==a?($c=n(),$c!==a?(ad=Xb(),ad!==a?A=
Na={type:"case_expression",format:"searched",clauses:oa,else:jb.value}:(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)):(b=A,A=a)}else b=A,A=a;else b=A,A=a;Sb=A}e=Sb;if(e===a){var kb,Aa,wc,$b,ac;Aa=b;wc=Da();if(wc!==a){$b=[];for(ac=bc();ac!==a;)$b.push(ac),ac=bc();$b!==a?Aa=wc+=$b.join(""):(b=Aa,Aa=a)}else b=Aa,Aa=a;kb=Aa;if(kb!==a){var xc=kb;kb=/^CURRENT_DATE$/i.test(xc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(xc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",
column:xc}}e=kb;e===a&&(e=Ra(),e===a&&(e=b,c=O(),c!==a?(h=n(),h!==a?(f=G(),f!==a?(g=n(),g!==a?(r=P(),r!==a?(f.paren=!0,e=c=f):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)))}}}}}}}return e}function hb(){var e,c,d,f;e=b;c=Da();if(c!==a){d=[];for(f=t();f!==a;)d.push(f),f=t();d!==a?e=c+=d.join(""):(b=e,e=a)}else b=e,e=a;return e}function Da(){var e;Jd.test(d.charAt(b))?(e=d.charAt(b),b++):(e=a,0===k&&l(Kd));return e}function t(){var e;Ld.test(d.charAt(b))?(e=d.charAt(b),b++):(e=a,0===k&&l(Md));
return e}function bc(){var e;Nd.test(d.charAt(b))?(e=d.charAt(b),b++):(e=a,0===k&&l(Od));return e}function Ra(){var e,c,h;e=b;64===d.charCodeAt(b)?(c=Pd,b++):(c=a,0===k&&l(Qd));c!==a?(h=hb(),h!==a?e=c=[c,h]:(b=e,e=a)):(b=e,e=a);e!==a&&(e={type:"param",value:e[1]});return e}function Pb(){var e,c,h;e=b;d.substr(b,7).toLowerCase()===Rd?(c=d.substr(b,7),b+=7):(c=a,0===k&&l(Sd));c!==a?(c=b,k++,h=t(),k--,h===a?c=void 0:(b=c,c=a),c!==a?e="LEADING":(b=e,e=a)):(b=e,e=a);e===a&&(e=b,d.substr(b,8).toLowerCase()===
Td?(c=d.substr(b,8),b+=8):(c=a,0===k&&l(Ud)),c!==a?(c=b,k++,h=t(),k--,h===a?c=void 0:(b=c,c=a),c!==a?e="TRAILING":(b=e,e=a)):(b=e,e=a),e===a&&(e=b,d.substr(b,4).toLowerCase()===Vd?(c=d.substr(b,4),b+=4):(c=a,0===k&&l(Wd)),c!==a?(c=b,k++,h=t(),k--,h===a?c=void 0:(b=c,c=a),c!==a?e="BOTH":(b=e,e=a)):(b=e,e=a)));return e}function Db(){var e,p,h;e=b;var g,u;p=b;h=r();h!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),g!==a?(g=f(),g!==a?(u=n(),u!==a?(u=P(),u!==a?p=h={type:"interval-period",period:h.value,precision:g,
secondary:null}:(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a)):(b=p,p=a);p===a&&(p=b,h=r(),h!==a&&(h=lb(h)),p=h);if(p!==a)if(h=n(),h!==a)if(h=b,d.substr(b,2).toLowerCase()===Xd?(g=d.substr(b,2),b+=2):(g=a,0===k&&l(Yd)),g!==a?(g=b,k++,u=t(),k--,u===a?g=void 0:(b=g,g=a),g!==a?h="TO":(b=h,h=a)):(b=h,h=a),h!==a)if(h=n(),h!==a){var m;h=b;g=r();g!==a&&(g={type:"interval-period",period:g.value,precision:null,secondary:null});h=g;h===a&&(h=b,g=wa(),g!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),
g!==a?(g=f(),g!==a?(u=n(),u!==a?(u=ka(),u!==a?(u=n(),u!==a?(u=c(),u!==a?(m=n(),m!==a?(m=P(),m!==a?h=g=mb(g,u):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,g=wa(),g!==a?(g=n(),g!==a?(g=O(),g!==a?(g=n(),g!==a?(g=f(),g!==a?(u=n(),u!==a?(u=P(),u!==a?h=g={type:"interval-period",period:"second",precision:g,secondary:null}:(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a)):(b=h,h=a),h===a&&(h=b,g=wa(),g!==
a&&(g={type:"interval-period",period:"second",precision:null,secondary:null}),h=g)));h!==a?e=p={type:"interval-qualifier",start:p,end:h}:(b=e,e=a)}else b=e,e=a;else b=e,e=a;else b=e,e=a;else b=e,e=a;e===a&&(e=b,h=r(),h!==a?(p=n(),p!==a?(p=O(),p!==a?(p=n(),p!==a?(p=c(),p!==a?(g=n(),g!==a?(g=P(),g!==a?e=h={type:"interval-period",period:h.value,precision:p,secondary:null}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,h=r(),h!==a&&(h=lb(h)),e=h,e===a&&(e=b,h=
wa(),h!==a?(p=n(),p!==a?(p=O(),p!==a?(p=n(),p!==a?(p=f(),p!==a?(g=n(),g!==a?(g=ka(),g!==a?(h=n(),h!==a?(h=c(),h!==a?(g=n(),g!==a?(g=P(),g!==a?e=h=mb(p,h):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,h=wa(),h!==a?(p=n(),p!==a?(p=O(),p!==a?(p=n(),p!==a?(p=c(),p!==a?(g=n(),g!==a?(g=P(),g!==a?e=h={type:"interval-period",period:"second",precision:p,secondary:null}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):
(b=e,e=a)):(b=e,e=a),e===a&&(e=b,h=wa(),h!==a&&(h={type:"interval-period",period:"second",precision:null,secondary:null}),e=h)))));return e}function r(){var e;e=b;e=Dc();e!==a&&(e={type:"string",value:"day"});e===a&&(e=b,e=Ec(),e!==a&&(e={type:"string",value:"hour"}),e===a&&(e=b,e=Fc(),e!==a&&(e={type:"string",value:"minute"}),e===a&&(e=b,e=Cc(),e!==a&&(e={type:"string",value:"month"}),e===a&&(e=b,e=Bc(),e!==a&&(e={type:"string",value:"year"})))));return e}function c(){var b;b=U();b!==a&&(b=parseFloat(b));
return b}function f(){var b;b=U();b!==a&&(b=parseFloat(b));return b}function u(){var b;b=cc();b===a&&(b=Ra());return b}function cc(){var e,c,h;e=b;39===d.charCodeAt(b)?(c=nb,b++):(c=a,0===k&&l(ob));c===a&&(d.substr(b,2)===pb?(c=pb,b+=2):(c=a,0===k&&l(Zd)));if(c!==a){c=[];h=b;d.substr(b,2)===Ba?(h=Ba,b+=2):(h=a,0===k&&l(qb));h!==a&&(h="'");h===a&&(rb.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===k&&l(sb)));for(;h!==a;)c.push(h),h=b,d.substr(b,2)===Ba?(h=Ba,b+=2):(h=a,0===k&&l(qb)),h!==a&&(h="'"),
h===a&&(rb.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===k&&l(sb)));c!==a?(39===d.charCodeAt(b)?(h=nb,b++):(h=a,0===k&&l(ob)),h!==a?e=c={type:"string",value:c.join("")}:(b=e,e=a)):(b=e,e=a)}else b=e,e=a;return e}function Zb(){var e,c,d;e=b;c=tb();c!==a?(c=n(),c!==a?(c=G(),c!==a?(d=n(),d!==a?(d=ub(),d!==a?(d=n(),d!==a?(d=G(),d!==a?e=c={type:"when_clause",operand:c,value:d}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);return e}function Wb(){var e,c,d;e=b;c=tb();c!==a?
(c=n(),c!==a?(c=G(),c!==a?(d=n(),d!==a?(d=ub(),d!==a?(d=n(),d!==a?(d=G(),d!==a?e=c={type:"when_clause",operand:c,value:d}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a);return e}function Zc(){var e,c;e=b;var h,f;c=b;d.substr(b,4).toLowerCase()===$d?(h=d.substr(b,4),b+=4):(h=a,0===k&&l(ae));h!==a?(h=b,k++,f=t(),k--,f===a?h=void 0:(b=h,h=a),h!==a?c="ELSE":(b=c,c=a)):(b=c,c=a);c!==a?(c=n(),c!==a?(c=G(),c!==a?e={type:"else_clause",value:c}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a);
return e}function zb(){var e,c,h;e=U();e===a&&(e=b,45===d.charCodeAt(b)?(c=gc,b++):(c=a,0===k&&l(hc)),c===a&&(43===d.charCodeAt(b)?(c=ec,b++):(c=a,0===k&&l(fc))),c!==a?(h=U(),h!==a?e=c=c[0]+h:(b=e,e=a)):(b=e,e=a));return e}function yc(){var e,c;e=b;46===d.charCodeAt(b)?(c=be,b++):(c=a,0===k&&l(ce));c!==a?(c=U(),c===a&&(c=null),c!==a?e="."+(null!=c?c:""):(b=e,e=a)):(b=e,e=a);return e}function zc(){var e,c,h;c=e=b;de.test(d.charAt(b))?(h=d.charAt(b),b++):(h=a,0===k&&l(ee));h!==a?(fe.test(d.charAt(b))?
(h=d.charAt(b),b++):(h=a,0===k&&l(ge)),h===a&&(h=null),h!==a?c="e"+(null===h?"":h):(b=c,c=a)):(b=c,c=a);c!==a?(h=U(),h!==a?e=c+h:(b=e,e=a)):(b=e,e=a);return e}function U(){var b,c;b=[];c=vb();if(c!==a)for(;c!==a;)b.push(c),c=vb();else b=a;b!==a&&(b=b.join(""));return b}function vb(){var e;he.test(d.charAt(b))?(e=d.charAt(b),b++):(e=a,0===k&&l(ie));return e}function dc(){var e,c,h;e=b;d.substr(b,2).toLowerCase()===je?(c=d.substr(b,2),b+=2):(c=a,0===k&&l(ke));c!==a?(c=b,k++,h=t(),k--,h===a?c=void 0:
(b=c,c=a),c!==a?e="IN":(b=e,e=a)):(b=e,e=a);return e}function Ta(){var e,c,h;e=b;d.substr(b,2).toLowerCase()===le?(c=d.substr(b,2),b+=2):(c=a,0===k&&l(me));c!==a?(c=b,k++,h=t(),k--,h===a?c=void 0:(b=c,c=a),c!==a?e="IS":(b=e,e=a)):(b=e,e=a);return e}function Za(){var e,c,h;e=b;d.substr(b,4).toLowerCase()===ne?(c=d.substr(b,4),b+=4):(c=a,0===k&&l(oe));c!==a?(c=b,k++,h=t(),k--,h===a?c=void 0:(b=c,c=a),c!==a?e="LIKE":(b=e,e=a)):(b=e,e=a);return e}function ca(){var e,c,h;e=b;d.substr(b,3).toLowerCase()===
pe?(c=d.substr(b,3),b+=3):(c=a,0===k&&l(qe));c!==a?(c=b,k++,h=t(),k--,h===a?c=void 0:(b=c,c=a),c!==a?e="NOT":(b=e,e=a)):(b=e,e=a);return e}function fa(){var c,f,h;c=b;d.substr(b,3).toLowerCase()===re?(f=d.substr(b,3),b+=3):(f=a,0===k&&l(se));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="AND":(b=c,c=a)):(b=c,c=a);return c}function Oa(){var c,f,h;c=b;d.substr(b,2).toLowerCase()===te?(f=d.substr(b,2),b+=2):(f=a,0===k&&l(ue));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="OR":
(b=c,c=a)):(b=c,c=a);return c}function Sa(){var c,f,h;c=b;d.substr(b,7).toLowerCase()===ve?(f=d.substr(b,7),b+=7):(f=a,0===k&&l(we));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="BETWEEN":(b=c,c=a)):(b=c,c=a);return c}function nc(){var c,f,h;c=b;d.substr(b,4).toLowerCase()===xe?(f=d.substr(b,4),b+=4):(f=a,0===k&&l(ye));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="FROM":(b=c,c=a)):(b=c,c=a);return c}function Gc(){var c,f,h;c=b;d.substr(b,4).toLowerCase()===ze?(f=d.substr(b,
4),b+=4):(f=a,0===k&&l(Ae));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="TRIM":(b=c,c=a)):(b=c,c=a);return c}function Ac(){var c,f,h;c=b;d.substr(b,8).toLowerCase()===Be?(f=d.substr(b,8),b+=8):(f=a,0===k&&l(Ce));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="INTERVAL":(b=c,c=a)):(b=c,c=a);return c}function Bc(){var c,f,h;c=b;d.substr(b,4).toLowerCase()===De?(f=d.substr(b,4),b+=4):(f=a,0===k&&l(Ee));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="YEAR":(b=c,c=a)):
(b=c,c=a);return c}function Cc(){var c,f,h;c=b;d.substr(b,5).toLowerCase()===Fe?(f=d.substr(b,5),b+=5):(f=a,0===k&&l(Ge));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="MONTH":(b=c,c=a)):(b=c,c=a);return c}function Dc(){var c,f,h;c=b;d.substr(b,3).toLowerCase()===He?(f=d.substr(b,3),b+=3):(f=a,0===k&&l(Ie));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="DAY":(b=c,c=a)):(b=c,c=a);return c}function Ec(){var c,f,h;c=b;d.substr(b,4).toLowerCase()===Je?(f=d.substr(b,4),b+=4):(f=
a,0===k&&l(Ke));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="HOUR":(b=c,c=a)):(b=c,c=a);return c}function Fc(){var c,f,h;c=b;d.substr(b,6).toLowerCase()===Le?(f=d.substr(b,6),b+=6):(f=a,0===k&&l(Me));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="MINUTE":(b=c,c=a)):(b=c,c=a);return c}function wa(){var c,f,h;c=b;d.substr(b,6).toLowerCase()===Ne?(f=d.substr(b,6),b+=6):(f=a,0===k&&l(Oe));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="SECOND":(b=c,c=a)):(b=c,c=a);
return c}function Vb(){var c,f,h;c=b;d.substr(b,4).toLowerCase()===Pe?(f=d.substr(b,4),b+=4):(f=a,0===k&&l(Qe));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="CASE":(b=c,c=a)):(b=c,c=a);return c}function Xb(){var c,f,h;c=b;d.substr(b,3).toLowerCase()===Re?(f=d.substr(b,3),b+=3):(f=a,0===k&&l(Se));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="END":(b=c,c=a)):(b=c,c=a);return c}function tb(){var c,f,h;c=b;d.substr(b,4).toLowerCase()===Te?(f=d.substr(b,4),b+=4):(f=a,0===k&&l(Ue));
f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="WHEN":(b=c,c=a)):(b=c,c=a);return c}function ub(){var c,f,h;c=b;d.substr(b,4).toLowerCase()===Ve?(f=d.substr(b,4),b+=4):(f=a,0===k&&l(We));f!==a?(f=b,k++,h=t(),k--,h===a?f=void 0:(b=f,f=a),f!==a?c="THEN":(b=c,c=a)):(b=c,c=a);return c}function ka(){var c;44===d.charCodeAt(b)?(c=Xe,b++):(c=a,0===k&&l(Ye));return c}function O(){var c;40===d.charCodeAt(b)?(c=Ze,b++):(c=a,0===k&&l($e));return c}function P(){var c;41===d.charCodeAt(b)?(c=af,b++):
(c=a,0===k&&l(bf));return c}function n(){var b,c;b=[];for(c=wb();c!==a;)b.push(c),c=wb();return b}function wb(){var c;cf.test(d.charAt(b))?(c=d.charAt(b),b++):(c=a,0===k&&l(df));return c}function Ua(a,b,c,f){a={type:"binary_expr",operator:a,left:b,right:c};void 0!==f&&(a.escape=f);return a}function la(a,b){for(var c=0;c<b.length;c++)a=Ua(b[c][1],a,b[c][3]);return a}x=void 0!==x?x:{};var a={},xb={start:I},yb=I,bd="!",cd=g("!",!1),Pa="\x3d",Qa=g("\x3d",!1),Va="\x3e\x3d",fd=g("\x3e\x3d",!1),gd="\x3e",
hd=g("\x3e",!1),Wa="\x3c\x3d",id=g("\x3c\x3d",!1),Xa="\x3c\x3e",jd=g("\x3c\x3e",!1),kd="\x3c",ld=g("\x3c",!1),Ya="!\x3d",md=g("!\x3d",!1),ec="+",fc=g("+",!1),gc="-",hc=g("-",!1),nd="*",od=g("*",!1),pd="/",qd=g("/",!1),Jd=/^[A-Za-z_\x80-\uFFFF]/,Kd=m([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Ld=/^[A-Za-z0-9_]/,Md=m([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Nd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Od=m([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),Pd="@",Qd=g("@",!1),lb=function(a){return{type:"interval-period",
period:a.value,precision:null,secondary:null}},mb=function(a,b){return{type:"interval-period",period:"second",precision:a,secondary:b}},nb="'",ob=g("'",!1),pb="N'",Zd=g("N'",!1),Ba="''",qb=g("''",!1),rb=/^[^']/,sb=m(["'"],!0,!1),be=".",ce=g(".",!1),he=/^[0-9]/,ie=m([["0","9"]],!1,!1),de=/^[eE]/,ee=m(["e","E"],!1,!1),fe=/^[+\-]/,ge=m(["+","-"],!1,!1),vd="null",wd=g("NULL",!0),rd="true",sd=g("TRUE",!0),td="false",ud=g("FALSE",!0),je="in",ke=g("IN",!0),le="is",me=g("IS",!0),ne="like",oe=g("LIKE",!0),
dd="escape",ed=g("ESCAPE",!0),pe="not",qe=g("NOT",!0),re="and",se=g("AND",!0),te="or",ue=g("OR",!0),ve="between",we=g("BETWEEN",!0),xe="from",ye=g("FROM",!0),Fd="for",Gd=g("FOR",!0),Dd="substring",Ed=g("SUBSTRING",!0),Bd="extract",Cd=g("EXTRACT",!0),ze="trim",Ae=g("TRIM",!0),Hd="position",Id=g("POSITION",!0),zd="timestamp",Ad=g("TIMESTAMP",!0),xd="date",yd=g("DATE",!0),Rd="leading",Sd=g("LEADING",!0),Td="trailing",Ud=g("TRAILING",!0),Vd="both",Wd=g("BOTH",!0),Xd="to",Yd=g("TO",!0),Be="interval",Ce=
g("INTERVAL",!0),De="year",Ee=g("YEAR",!0),Fe="month",Ge=g("MONTH",!0),He="day",Ie=g("DAY",!0),Je="hour",Ke=g("HOUR",!0),Le="minute",Me=g("MINUTE",!0),Ne="second",Oe=g("SECOND",!0),Pe="case",Qe=g("CASE",!0),Re="end",Se=g("END",!0),Te="when",Ue=g("WHEN",!0),Ve="then",We=g("THEN",!0),$d="else",ae=g("ELSE",!0),Xe=",",Ye=g(",",!1),Ze="(",$e=g("(",!1),af=")",bf=g(")",!1),cf=/^[ \t\n\r]/,df=m([" ","\t","\n","\r"],!1,!1),Tc="`",Uc=g("`",!1),Vc=/^[^`]/,Wc=m(["`"],!0,!1),b=0,qa=[{line:1,column:1}],R=0,Ca=
[],k=0,pa;if("startRule"in x){if(!(x.startRule in xb))throw Error("Can't start parsing from rule \""+x.startRule+'".');yb=xb[x.startRule]}pa=yb();if(pa!==a&&b===d.length)return pa;pa!==a&&b<d.length&&l({type:"end"});throw function(a,b,c){return new F(F.buildMessage(a,b),a,b,c)}(Ca,R<d.length?d.charAt(R):null,R<d.length?ja(R,R+1):ja(R,R));}}})},"*noref":1}});
define("require exports ../has ../MapUtils ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(F,d,x,g,m,q,ja){function l(d,c){d+="";return d.length>=c?d:Array(c-d.length+1).join("0")+d}function I(d,c,f,g,m,q,t,x,y){void 0===f&&(f="0");void 0===g&&(g="0");void 0===m&&(m="0");void 0===q&&(q="0");void 0===t&&(t="");void 0===x&&(x="0");void 0===y&&(y="0");return"+"===t||"-"===t?(d=l(parseInt(d,10),4)+"-"+l(parseInt(c,10),2)+"-"+l(parseInt(f,10),2),c="",10>parseFloat(q)&&
(c="0"),g=l(parseInt(g,10),2)+":"+l(parseInt(m,10),2)+":"+(c+parseFloat(q).toString()),t=""+t+l(parseInt(x,10),2)+":"+l(parseInt(y,10),2),new Date(d+"T"+g+t)):new Date(parseInt(d,10),parseInt(c,10)-1,parseInt(f,10),parseInt(g,10),parseInt(m,10),parseFloat(q))}function y(d){var c=t.exec(d);if(null!==c){d=c[1];var f=c[2],g=c[3],r=c[4],m=c[5],l=c[6];return I(d,f,g,r,m,l)}c=bc.exec(d);if(null!==c){d=c[1];var f=c[2],g=c[3],r=c[4],m=c[5],l=c[6],q=c[7],x=c[8],c=c[9];return I(d,f,g,r,m,l,q,x,c)}c=Ra.exec(d);
if(null!==c)return d=c[1],f=c[2],g=c[3],r=c[4],m=c[5],q=c[6],x=c[7],c=c[8],I(d,f,g,r,m,"0",q,x,c);c=Pb.exec(d);if(null!==c)return d=c[1],f=c[2],g=c[3],r=c[4],m=c[5],I(d,f,g,r,m);c=Da.exec(d);if(null!==c)return d=c[1],f=c[2],g=c[3],I(d,f,g);throw Error("SQL Invalid Timestamp");}function G(d){d=Da.exec(d);if(null===d)throw Error("SQL Invalid Date");var c=d[2],f=d[3];return new Date(parseInt(d[1],10),parseInt(c,10)-1,parseInt(f,10))}function N(d){return Array.isArray(d)?d:[d]}function L(d){return null!==
d?!0!==d:null}function ba(d,c){return null!=d&&null!=c?!0===d&&!0===c:!1===d||!1===c?!1:null}function ma(d,c){return null!=d&&null!=c?!0===d||!0===c:!0===d||!0===c?!0:null}function S(d,c){if(null==d)return null;for(var f=!1,g=0;g<c.length;g++){var m=c[g];if(null==m)f=null;else if(d===m){f=!0;break}}return f}function M(d,c,f){if(null==d)return null;for(var g="",m=0,r=0;r<c.length;r++){var l=c.charAt(r);switch(m){case 0:l===f?m=1:g=0<="-[]/{}()*+?.\\^$|".indexOf(l)?g+("\\"+l):"%"===l?g+".*":"_"===l?
g+".":g+l;break;case 1:g=0<="-[]/{}()*+?.\\^$|".indexOf(l)?g+("\\"+l):g+l,m=0}}return(new RegExp("^"+g+"$")).test(d)}function H(d){return d instanceof Date?d.valueOf():d}function T(d,c,f){if(null==c||null==f)return null;c=H(c);f=H(f);switch(d){case "\x3c\x3e":return c!==f;case "\x3d":return c===f;case "\x3e":return c>f;case "\x3c":return c<f;case "\x3e\x3d":return c>=f;case "\x3c\x3d":return c<=f}}function V(d){for(var c=[],f={},g=0;g<d.length;g++){var m=d[g],l=m.toLowerCase();void 0===f[l]&&(c.push(m),
f[l]=1)}return c}function ga(d,c,f){if(c instanceof q.SqlInterval)if(f instanceof Date)switch(d){case "+":return new Date(c.valueInMilliseconds()+f.getTime());case "-":return c.valueInMilliseconds()-f.getTime();case "*":return c.valueInMilliseconds()*f.getTime();case "/":return c.valueInMilliseconds()/f.getTime()}else if(f instanceof q.SqlInterval)switch(d){case "+":return q.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()+f.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(c.valueInMilliseconds()-
f.valueInMilliseconds());case "*":return c.valueInMilliseconds()*f.valueInMilliseconds();case "/":return c.valueInMilliseconds()/f.valueInMilliseconds()}else c=c.valueInMilliseconds();else if(f instanceof q.SqlInterval)if(c instanceof Date)switch(d){case "+":return new Date(f.valueInMilliseconds()+c.getTime());case "-":return new Date(c.getTime()-f.valueInMilliseconds());case "*":return c.getTime()*f.valueInMilliseconds();case "/":return c.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();
else if(c instanceof Date&&"number"===typeof f)switch(f*=864E5,c=c.getTime(),d){case "+":return new Date(c+f);case "-":return new Date(c-f);case "*":return new Date(c*f);case "/":return new Date(c/f)}else if(f instanceof Date&&"number"===typeof c)switch(c*=864E5,f=f.getTime(),d){case "+":return new Date(c+f);case "-":return new Date(c-f);case "*":return new Date(c*f);case "/":return new Date(c/f)}switch(d){case "+":return c+f;case "-":return c-f;case "*":return c*f;case "/":return c/f}}function hb(d,
c,f,g){d=g.getAttribute(d,c);return null!=d&&1===f[c]?new Date(d):d}Object.defineProperty(d,"__esModule",{value:!0});var Da=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,bc=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Ra=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,Pb=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,Db=function(){function d(){}d.makeBool=
function(c){return!0===c};d.featureValue=function(c,d,g,m){return hb(c,d,g,m)};d.equalsNull=function(c){return null===c};d.applyLike=function(c,d,g){return M(c,d,g)};d.ensureArray=function(c){return N(c)};d.applyIn=function(c,d){return S(c,d)};d.currentDate=function(){var c=new Date;c.setHours(0,0,0,0);return c};d.makeSqlInterval=function(c,d,g){return q.SqlInterval.createFromValueAndQualifer(c,d,g)};d.convertInterval=function(c){return c instanceof q.SqlInterval?c.valueInMilliseconds():c};d.currentTimestamp=
function(){return new Date};d.compare=function(c,d,g){return T(c,d,g)};d.calculate=function(c,d,g){return ga(c,d,g)};d.makeComparable=function(c){return H(c)};d.evaluateFunction=function(c,d){return q.evaluateFunction(c,d)};d.lookup=function(c,d){c=d[c];return void 0===c?null:c};d.between=function(c,d){return null==c||null==d[0]||null==d[1]?null:c>=d[0]&&c<=d[1]};d.notbetween=function(c,d){return null==c||null==d[0]||null==d[1]?null:c<d[0]||c>d[1]};d.ternaryNot=function(c){return L(c)};d.ternaryAnd=
function(c,d){return ba(c,d)};d.ternaryOr=function(c,d){return ma(c,d)};return d}();F=function(){function l(c,d){this.fieldsIndex=d;this.datefields={};this.parameters={};this.parseTree=ja.WhereGrammar.parse(c);c=this.extractExpressionInfo(d);d=c.isStandardized;var f=c.isAggregate;this.referencedFieldNames=c.referencedFieldNames;this.isStandardized=d;this.isAggregate=f}l.create=function(c,d){return new l(c,d)};Object.defineProperty(l.prototype,"fieldNames",{get:function(){return this.referencedFieldNames},
enumerable:!0,configurable:!0});l.prototype.testSet=function(c,f){void 0===f&&(f=d.defaultAttributeAdapter);for(var g={},m=function(d){g[d]=c.map(function(c){return f.getAttribute(c,d)})},l=0,q=this.fieldNames;l<q.length;l++)m(q[l]);return!!this.evaluateNode(this.parseTree,{attributes:g},d.defaultAttributeAdapter)};l.prototype.calculateValue=function(c,f){void 0===f&&(f=d.defaultAttributeAdapter);c=this.evaluateNode(this.parseTree,c,f);return c instanceof q.SqlInterval?c.valueInMilliseconds()/864E5:
c};l.prototype.calculateValueCompiled=function(c,f){void 0===f&&(f=d.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(c,this.parameters,f,this.datefields);if(x("csp-restrictions"))return this.calculateValue(c,f);this.compileMe();return this.parseTree._compiledVersion(c,this.parameters,f,this.datefields)};l.prototype.testFeature=function(c,f){void 0===f&&(f=d.defaultAttributeAdapter);return!!this.evaluateNode(this.parseTree,c,f)};l.prototype.testFeatureCompiled=
function(c,f){void 0===f&&(f=d.defaultAttributeAdapter);if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(c,this.parameters,f,this.datefields);if(x("csp-restrictions"))return this.testFeature(c,f);this.compileMe();return!!this.parseTree._compiledVersion(c,this.parameters,f,this.datefields)};l.prototype.getFunctions=function(){var c=[];this.visitAll(this.parseTree,function(d){"function"===d.type&&c.push(d.name.toLowerCase())});return V(c)};l.prototype.getExpressions=
function(){var c=new Map;this.visitAll(this.parseTree,function(d){if("function"===d.type){var f=d.name.toLowerCase();d=d.args.value[0];if("column_ref"===d.type){d=d.column;var g=f+"-"+d;c.has(g)||c.set(g,{aggregateType:f,field:d})}}});return g.valuesOfMap(c)};l.prototype.getVariables=function(){var c=[];this.visitAll(this.parseTree,function(d){"param"===d.type&&c.push(d.value.toLowerCase())});return V(c)};l.prototype.compileMe=function(){var c="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",c)).bind(Db)};l.prototype.extractExpressionInfo=function(c){var d=this,g=[],l=!0,r=!0;this.visitAll(this.parseTree,function(f){switch(f.type){case "column_ref":var u=c.get(f.column),t=u&&u.name;!u||"date"!==u.type&&"esriFieldTypeDate"!==u.type||(d.datefields[u.name]=1);void 0!==t?(g.push(t),f.column=t):g.push(f.column);break;case "function":u=f.name,f=f.args.value.length,l&&(l=q.isStandardized(u,
f)),r&&(r=m.isAggregate(u,f))}});return{referencedFieldNames:V(g),isStandardized:l,isAggregate:r}};l.prototype.visitAll=function(c,d){if(null!=c)switch(d(c),c.type){case "when_clause":this.visitAll(c.operand,d);this.visitAll(c.value,d);break;case "case_expression":for(var f=0,g=c.clauses;f<g.length;f++){var l=g[f];this.visitAll(l,d)}"simple"===c.format&&this.visitAll(c.operand,d);null!==c.else&&this.visitAll(c.else,d);break;case "expr_list":f=0;for(c=c.value;f<c.length;f++)l=c[f],this.visitAll(l,
d);break;case "unary_expr":this.visitAll(c.expr,d);break;case "binary_expr":this.visitAll(c.left,d);this.visitAll(c.right,d);break;case "function":this.visitAll(c.args,d)}};l.prototype.evaluateNodeToJavaScript=function(c){switch(c.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(c.value)+", "+JSON.stringify(c.qualifier)+","+JSON.stringify(c.op)+")";case "case_expression":var d="";if("simple"===c.format)for(var g="this.makeComparable("+this.evaluateNodeToJavaScript(c.operand)+
")",d="( ",l=0;l<c.clauses.length;l++)d+=" ("+g+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(c.clauses[l].operand)+")) ? ("+this.evaluateNodeToJavaScript(c.clauses[l].value)+") : ";else for(d="( ",l=0;l<c.clauses.length;l++)d+=" this.makeBool("+this.evaluateNodeToJavaScript(c.clauses[l].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(c.clauses[l].value)+") : ";d=null!==c.else?d+this.evaluateNodeToJavaScript(c.else):d+"null";return d+" )";case "param":return"this.lookup("+
JSON.stringify(c.value.toLowerCase())+",lookups)";case "expr_list":d="[";g=0;for(c=c.value;g<c.length;g++)l=c[g],"["!==d&&(d+=","),d+=this.evaluateNodeToJavaScript(l);return d+"]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(c.expr)+")";case "binary_expr":switch(c.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(c.left)+","+
this.evaluateNodeToJavaScript(c.right)+" )";case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")";case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(c.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+
this.evaluateNodeToJavaScript(c.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(c.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+")";
case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+","+JSON.stringify(c.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+","+this.evaluateNodeToJavaScript(c.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(c.operator)+","+this.evaluateNodeToJavaScript(c.left)+
","+this.evaluateNodeToJavaScript(c.right)+")"}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(c.value);case "date":return"(new Date("+G(c.value).getTime().toString()+"))";case "timestamp":return"(new Date("+y(c.value).getTime().toString()+"))";case "current_time":return"date"===c.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(c.column)+",datefields,attributeAdapter)";
case "function":return"this.evaluateFunction("+JSON.stringify(c.name)+","+this.evaluateNodeToJavaScript(c.args)+")"}throw Error("Unsupported sql syntax "+c.type);};l.prototype.evaluateNode=function(c,d,g){switch(c.type){case "interval":return d=this.evaluateNode(c.value,d,g),q.SqlInterval.createFromValueAndQualifer(d,c.qualifier,c.op);case "case_expression":if("simple"===c.format)for(var f=H(this.evaluateNode(c.operand,d,g)),l=0;l<c.clauses.length;l++){if(f===H(this.evaluateNode(c.clauses[l].operand,
d,g)))return this.evaluateNode(c.clauses[l].value,d,g)}else for(l=0;l<c.clauses.length;l++)if(!0===this.evaluateNode(c.clauses[l].operand,d,g))return this.evaluateNode(c.clauses[l].value,d,g);return null!==c.else?this.evaluateNode(c.else,d,g):null;case "param":return this.parameters[c.value.toLowerCase()];case "expr_list":f=[];l=0;for(c=c.value;l<c.length;l++)f.push(this.evaluateNode(c[l],d,g));return f;case "unary_expr":return L(this.evaluateNode(c.expr,d,g));case "binary_expr":switch(c.operator){case "AND":return ba(this.evaluateNode(c.left,
d,g),this.evaluateNode(c.right,d,g));case "OR":return ma(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "IS":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(c.left,d,g);case "ISNOT":if("null"!==c.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(c.left,d,g);case "IN":return f=N(this.evaluateNode(c.right,d,g)),S(this.evaluateNode(c.left,d,g),f);case "NOT IN":return f=N(this.evaluateNode(c.right,d,g)),
L(S(this.evaluateNode(c.left,d,g),f));case "BETWEEN":return f=this.evaluateNode(c.left,d,g),c=this.evaluateNode(c.right,d,g),null==f||null==c[0]||null==c[1]?null:f>=H(c[0])&&f<=H(c[1]);case "NOTBETWEEN":return f=this.evaluateNode(c.left,d,g),c=this.evaluateNode(c.right,d,g),null==f||null==c[0]||null==c[1]?null:f<H(c[0])||f>H(c[1]);case "LIKE":return M(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g),c.escape);case "NOT LIKE":return L(M(this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,
d,g),c.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return T(c.operator,this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g));case "-":case "+":case "*":case "/":return ga(c.operator,this.evaluateNode(c.left,d,g),this.evaluateNode(c.right,d,g))}throw Error("Not Supported Operator "+c.operator);case "null":case "bool":case "string":case "number":return c.value;case "date":return G(c.value);case "timestamp":return y(c.value);case "current_time":return d=
new Date,"date"===c.mode&&d.setHours(0,0,0,0),d;case "column_ref":return hb(d,c.column,this.datefields,g);case "function":return d=this.evaluateNode(c.args,d,g),this.isAggregate?m.aggregateFunction(c.name,d):q.evaluateFunction(c.name,d)}throw Error("Unsupported sql syntax "+c.type);};return l}();d.WhereClause=F;d.defaultAttributeAdapter={getAttribute:function(d,c){return(d&&"object"===typeof d.attributes?d.attributes:d)[c]}}});