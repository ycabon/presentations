// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports"],function(F,l){function u(a){return 57>=a?a-48:104>=a?a-88:107>=a?a-89:110>=a?a-90:a-91}function v(a,c,g){a[0]=c;a[1]=g;return a}function q(a,c){var g=(a[0]+a[1])/2,e=!c;a[0]=e*a[0]+c*g;a[1]=e*g+c*a[1]}function t(a,c){c=c>(a[0]+a[1])/2;q(a,c);return c}function A(a,c){for(var g=v(B,-90,90),e=v(C,-180,180),f=0;f<c.length;f++){var b=c.charCodeAt(f),b=u(b);0===f%2?(q(e,!!(16&b)),q(e,!!(4&b)),q(e,!!(1&b)),q(g,!!(8&b)),q(g,!!(2&b))):(q(g,!!(16&b)),q(g,!!(4&b)),q(g,!!(1&b)),q(e,
!!(8&b)),q(e,!!(2&b)))}a[0]=(g[0]+g[1])/2;a[1]=(e[0]+e[1])/2;return a}function x(a,c,g){for(var e="",f=v(B,-90,90),b=v(C,-180,180),h=0;h<g;h++){var d=0;h%2?(d|=t(f,a)<<4,d|=t(b,c)<<3,d|=t(f,a)<<2,d|=t(b,c)<<1,d|=t(f,a)<<0):(d|=t(b,c)<<4,d|=t(f,a)<<3,d|=t(b,c)<<2,d|=t(f,a)<<1,d|=t(b,c)<<0);e+="0123456789bcdefghjkmnpqrstuvwxyz"[d]}return e}function y(a){return 180/Math.pow(2,Math.floor(5*a/2))}function z(a){return 360/Math.pow(2,Math.ceil(5*a/2))}function D(a,c){return c?1&a|(4&a)>>1|(16&a)>>2:(2&a)>>
1|(8&a)>>2}function E(a,c){return c?(2&a)>>1|(8&a)>>2:1&a|(4&a)>>1|(16&a)>>2}function w(a,c,g){var e=!((a.length-1)%2),f=a.substring(0,a.length-1),b=u(a.charCodeAt(a.length-1)),h=0,d=0,m=0,k=0;e?(h=8,d=4,m=1&b|(4&b)>>1|(16&b)>>2,k=(2&b)>>1|(8&b)>>2):(h=4,d=8,k=1&b|(4&b)>>1|(16&b)>>2,m=(2&b)>>1|(8&b)>>2);c=m+c;b=k+g;g=Math.floor(c/h);k=Math.floor(b/d);h=c-g*h;d=b-k*d;e="0123456789bcdefghjkmnpqrstuvwxyz"[e?h&1|(d&1)<<1|(h&2)<<1|(d&2)<<2|(h&4)<<2:d&1|(h&1)<<1|(d&2)<<1|(h&2)<<2|(d&4)<<2];return 1<a.length&&
(g||k)?w(f,g,k)+e:f+e}Object.defineProperty(l,"__esModule",{value:!0});var B=new Float64Array(2),C=new Float64Array(2);l.decodeBase32Char=u;l.encodeBase32Char=function(a){return"0123456789bcdefghjkmnpqrstuvwxyz"[a]};l.decodeGeohash=A;l.convertGeohash32ToXY=function(a,c){for(var g=a=0,e=30,f=30,b=0;b<c.length;b++){var h=c.charCodeAt(b),d=u(h),h=0===b%2,m=D(d,h),d=E(d,h),e=e-(h?3:2),f=f-(h?2:3);a|=m<<e;g|=d<<f}return{geohashX:a,geohashY:g}};l.decodeGeohashXY=function(a,c){for(var g=-90,e=90,f=-180,
b=180,h=0;h<c;h++){for(var d=Math.ceil((h+1)/2),m=Math.floor((h+1)/2),k=1-h%2,l=30-(3*d+2*m),n=30-(2*d+3*m),d=2*k+3*(1-k),m=(7*k+3*(1-k)<<l&a.geohashX)>>l,l=(3*k+7*(1-k)<<n&a.geohashY)>>n,k=3*k+2*(1-k)-1;0<=k;k--)var n=(f+b)/2,r=m&1<<k?1:0,f=(1-r)*f+r*n,b=(1-r)*n+r*b;for(k=d-1;0<=k;k--)d=(g+e)/2,m=l&1<<k?1:0,g=(1-m)*g+m*d,e=(1-m)*d+m*e}return[f,g,b,e]};l.setGeohashXY=function(a,c,g,e){e%2&&(e+=1);for(var f=0,b=0,h=-90,d=90,m=-180,k=180,l=0;l<e/2;l++){for(var n=0;5>n;n++)var r=(m+k)/2,p=g>r?1:0,f=
f|p<<29-(n+5*l),m=(1-p)*m+p*r,k=(1-p)*r+p*k;for(n=0;5>n;n++)r=(h+d)/2,p=c>r?1:0,b|=p<<29-(n+5*l),h=(1-p)*h+p*r,d=(1-p)*r+p*d}a.geohashX=f;a.geohashY=b};l.encodeGeohash=x;l.latDistPerGeohash=y;l.lonDistPerGeohash=z;l.unpackXBits=D;l.unpackYBits=E;l.getRelativeGeohash=w;l.getIntersectingGeohashes=function(a,c,g,e,f){g=Math.abs(g-a);e=Math.abs(e-c);var b=y(f),h=z(f);e=Math.ceil(e/h);g=Math.ceil(g/b);a=x(a,c,f);c=[];for(f=0;f<e;f++)for(b=0;b<g;b++)c.push(w(a,f,b));return c};l.forEachIntersectingGeohash=
function(a,c,g,e,f,b){var h=Math.abs(g-a),d=Math.abs(e-c),l=y(f),k=z(f),d=Math.ceil(d/k),h=Math.ceil(h/l);f=x(a,c,f);for(var q=0;q<d;q++)for(var n=0;n<h;n++){var r=w(f,q,n),p=A([0,0],r),t=p[0],p=p[1];b(r,Math.abs((Math.min(g,t+l/2)-Math.max(a,t-l/2))*(Math.min(e,p+k/2)-Math.max(c,p-k/2)))/(l*k))}}});