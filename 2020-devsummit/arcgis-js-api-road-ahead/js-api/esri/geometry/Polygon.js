// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/extentUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),function(l,B,r,g,n,e,t,u,h,v,w,x,y,z,A,p,q){l=function(l){function c(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=l.apply(this,a)||this;
a.rings=[];a.type="polygon";return a}r(c,l);m=c;c.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var d=!1,c=!1;b.map(function(a){a.hasZ&&(d=!0);a.hasM&&(c=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var f=a.zmin+.5*(a.zmax-a.zmin),k=0;k<b.length;k++)b[k].push(f);if(c&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),k=0;k<b.length;k++)b[k].push(a);return b}),spatialReference:a};d&&(b.hasZ=
!0);c&&(b.hasM=!0);return new m(b)};c.prototype.normalizeCtorArgs=function(a,b){var d=null,c,f,e=null;a&&!Array.isArray(a)?(d=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),c=a.hasZ,f=a.hasM):d=a;d=d||[];b=b||v.WGS84;d.length&&d[0]&&null!=d[0][0]&&"number"===typeof d[0][0]&&(d=[d]);if(e=d[0]&&d[0][0])void 0===c&&void 0===f?(c=2<e.length,f=!1):void 0===c?c=!f&&3<e.length:void 0===f&&(f=!c&&3<e.length);return{rings:d,spatialReference:b,hasZ:c,hasM:f}};Object.defineProperty(c.prototype,
"centroid",{get:function(){var a=w.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new h;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.spatialReference,b=z.getPolygonExtent(this);if(!b)return null;b=new t(b);b.spatialReference=a;return b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isSelfIntersecting",
{get:function(){return A.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});c.prototype.writePaths=function(a,b){b.rings=n.clone(this.rings)};c.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,d=b.length;if(Array.isArray(a[0]))b[d]=a.concat();else{for(var c=[],f=0,e=a.length;f<e;f++)c[f]=a[f].toArray();b[d]=c}return this}};c.prototype.clone=function(){var a=new m;a.spatialReference=this.spatialReference;a.rings=n.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;
return a};c.prototype.contains=function(a){if(!a)return!1;p.canProject(a,this.spatialReference)&&(a=p.project(a,this.spatialReference));return x.polygonContainsPoint(this,a)};c.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return y.isClockwise(a,this.hasM,this.hasZ)};c.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var d=this.hasM;return b&&
!d?new h(a[0],a[1],a[2],void 0,this.spatialReference):d&&!b?new h(a[0],a[1],void 0,a[2],this.spatialReference):b&&d?new h(a[0],a[1],a[2],a[3],this.spatialReference):new h(a[0],a[1],this.spatialReference)};c.prototype.insertPoint=function(a,b,d){if(!this._validateInputs(a,b,!0))return this;this.clearCache();q.updateSupportFromPoint(this,d);Array.isArray(d)||(d=d.toArray());this.rings[a].splice(b,0,d);return this};c.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();
return new h(this.rings[a].splice(b,1)[0],this.spatialReference)};c.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new h(a,b)})};c.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();q.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};c.prototype._validateInputs=function(a,
b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};c.prototype.toJSON=function(a){return this.write(null,a)};var m;g([e.property({dependsOn:["hasM","hasZ","rings"]})],c.prototype,"cache",void 0);g([e.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"centroid",null);g([e.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);g([e.property({dependsOn:["cache"],readOnly:!0})],c.prototype,
"isSelfIntersecting",null);g([e.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"rings",void 0);g([e.writer("rings")],c.prototype,"writePaths",null);return c=m=g([e.subclass("esri.geometry.Polygon")],c)}(e.declared(u));l.prototype.toJSON.isDefaultToJSON=!0;return l});