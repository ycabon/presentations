// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/Logger ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec3f64 ./projection ../../../views/3d/support/projectionUtils".split(" "),function(v,m,r,t,h,e,n){function p(c,e,b){void 0===b&&(b=h.vec3f64.ZEROS);if(c)for(var d=0;d<c.length;d+=3){for(var a=0;3>a;a++)f[a]=c[d+a]-b[a];t.vec3.scale(f,f,e);for(a=0;3>a;a++)c[d+a]=f[a]+b[a]}}Object.defineProperty(m,"__esModule",{value:!0});var u=r.getLogger("esri.geometry.support.meshUtils.scale");m.scale=
function(c,f,b){if(c.vertexAttributes&&c.vertexAttributes.position){var d=c.spatialReference,a=b&&b.origin||c.extent.center;if(d.isWGS84||d.isWebMercator&&(!b||!1!==b.geographic)){b=c.spatialReference;d=q;n.pointToVector(a,d,n.SphericalECEFSpatialReference)||n.pointToVector(c.extent.center,d,n.SphericalECEFSpatialReference);var a=c.vertexAttributes.position,k=c.vertexAttributes.normal,l=c.vertexAttributes.tangent,g=new Float64Array(a.length),h=new Float32Array(k?k.length:0),m=new Float32Array(l?l.length:
0);e.projectToECEF(a,b,g);k&&e.projectNormalToECEF(k,a,g,b,h);l&&e.projectTangentToECEF(l,a,g,b,m);p(g,f,d);e.projectFromECEF(g,a,b);k&&e.projectNormalFromECEF(h,a,g,b,k);l&&e.projectTangentFromECEF(m,a,g,b,l)}else b=q,n.pointToVector(a,b,c.spatialReference)||(d=c.extent.center,b[0]=d.x,b[1]=d.y,b[2]=d.z,u.error("Failed to project specified origin (wkid:"+a.spatialReference.wkid+") to mesh spatial reference (wkid:"+c.spatialReference.wkid+"). Using mesh extent.center instead")),p(c.vertexAttributes.position,
f,b);c.clearCache()}};var f=h.vec3f64.create(),q=h.vec3f64.create()});