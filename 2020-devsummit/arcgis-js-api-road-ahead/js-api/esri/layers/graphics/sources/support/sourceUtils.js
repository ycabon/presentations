// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../support/fieldUtils @dojo/framework/shim/Promise".split(" "),function(u,b,g,h,k){function m(a){return new v(a)}function r(){return h(this,void 0,void 0,function(){return g(this,function(a){switch(a.label){case 0:return c?[2,c]:[4,new Promise(function(a,b){u(["../../../../geometry/geometryEngine"],a,b)})];case 1:return c=a.sent(),[2,c]}})})}Object.defineProperty(b,"__esModule",{value:!0});
var w=function(){return function(){this.description=this.code=null}}(),v=function(){return function(a){this.error=new w;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=a}}();b.createFeatureEditErrorResult=m;var x=function(){return function(a){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=a}}();b.createFeatureEditSuccessResult=function(a){return new x(a)};var n=new Set;b.mixAttributes=function(a,b,c,g,p,h){void 0===p&&(p=!1);n.clear();for(var t in g){var d=
a.get(t);if(d){var l=g[t],e;e=d;var f=l,q=f;"string"===typeof f&&k.isNumericField(e)?q=parseFloat(f):null!=f&&k.isStringField(e)&&"string"!==typeof f&&(q=String(f));e=k.sanitizeNullFieldValue(q);e!==l&&h&&h.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:d,originalValue:l,sanitizedValue:e}});n.add(d.name);if(d&&(p||d.editable)){if(l=k.validateFieldValue(d,e))return m(k.validationErrorToString(l,d,e));c[d.name]=e}}}for(a=0;a<b.length;a++)if(c=
b[a],!n.has(c.name))return m('missing required field "'+c.name+'"');return null};var c;b.simplify=function(a,b){if(!a)return a;if("rings"in a||"paths"in a){if(!c)throw new TypeError("geometry engine not loaded");a.spatialReference||(a.spatialReference=b);return(a=c.simplify(a))?a.toJSON():null}return a};b.loadGeometryEngine=r;b.loadGeometryEngineForSimplify=function(a){return h(this,void 0,void 0,function(){return g(this,function(b){switch(b.label){case 0:return"esriGeometryPolygon"!==a&&"esriGeometryPolyline"!==
a?[3,2]:[4,r()];case 1:b.sent(),b.label=2;case 2:return[2]}})})}});