// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ./imageryRendererUtils ./MosaicRule".split(" "),function(g,h,r,n,d,k,p,c,e,q){Object.defineProperty(h,"__esModule",{value:!0});var l=new k.default({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),m=new k.default({esriNoDataMatchAny:"any",
esriNoDataMatchAll:"all"});g=function(f){function b(){var a=null!==f&&f.apply(this,arguments)||this;a.layer=null;a.adjustAspectRatio=void 0;a.bandIds=void 0;a.compression=void 0;a.compressionQuality=void 0;a.compressionTolerance=.01;a.format=null;a.interpolation=null;a.noData=null;a.noDataInterpretation=void 0;a.pixelType=void 0;a.lercVersion=2;return a}n(b,f);b.prototype.writeAdjustAspectRatio=function(a,b,c){10.3>this.layer.version||(b[c]=a)};b.prototype.writeCompressionQuality=function(a,b,c){this.format&&
-1<this.format.toLowerCase().indexOf("jpg")&&null!=a&&(b[c]=a)};b.prototype.writeCompressionTolerance=function(a,b,c){"lerc"===this.format&&null!=a&&(b[c]=a)};b.prototype.writeLercVersion=function(a,b,c){"lerc"===this.format&&10.5<=this.layer.version&&(b[c]=a)};Object.defineProperty(b.prototype,"version",{get:function(){var a=this.layer;a.bandIds;a.format;a.compressionQuality;a.compressionTolerance;a.interpolation;a.noData;a.noDataInterpretation;a.mosaicRule;a.renderingRule;a.adjustAspectRatio;a.pixelFilter;
a.renderer;a.definitionExpression;return(this._get("version")||0)+1},set:function(a){this._set("version",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"mosaicRule",{get:function(){var a=this.layer,b=a.mosaicRule,a=a.definitionExpression;b?a&&a!==b.where&&(b=b.clone(),b.where=a):a&&(b=new q({where:a}));return b},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"renderingRule",{get:function(){var a=this.layer,b=a.renderingRule,c=a.pixelFilter;(!a.format||-1<
a.format.indexOf("jpg")||-1<a.format.indexOf("png"))&&!c&&(b=this.combineRendererWithRenderingRule());return b},enumerable:!0,configurable:!0});b.prototype.combineRendererWithRenderingRule=function(){var a=this.layer,b=a.rasterInfo,c=a.renderingRule,d=a.renderer;return d&&e.isSupportedRendererType(d)?e.combineRenderingRules(e.convertRendererToRenderingRule(d,{rasterAttributeTable:b.attributeTable,pixelType:b.pixelType,convertColorRampToColormap:10.6>a.version}),c):c};d([c.property()],b.prototype,
"layer",void 0);d([c.property({json:{write:!0}})],b.prototype,"adjustAspectRatio",void 0);d([c.writer("adjustAspectRatio")],b.prototype,"writeAdjustAspectRatio",null);d([c.property({json:{write:!0}}),c.aliasOf("layer.bandIds")],b.prototype,"bandIds",void 0);d([c.property({json:{write:!0}})],b.prototype,"compression",void 0);d([c.property({json:{write:!0}}),c.aliasOf("layer.compressionQuality")],b.prototype,"compressionQuality",void 0);d([c.writer("compressionQuality")],b.prototype,"writeCompressionQuality",
null);d([c.property({json:{write:!0}}),c.aliasOf("layer.compressionTolerance")],b.prototype,"compressionTolerance",void 0);d([c.writer("compressionTolerance")],b.prototype,"writeCompressionTolerance",null);d([c.property({json:{write:!0}}),c.aliasOf("layer.format")],b.prototype,"format",void 0);d([c.property({type:String,json:{read:{reader:l.read},write:{writer:l.write}}}),c.aliasOf("layer.interpolation")],b.prototype,"interpolation",void 0);d([c.property({json:{write:!0}}),c.aliasOf("layer.noData")],
b.prototype,"noData",void 0);d([c.property({type:String,json:{read:{reader:m.read},write:{writer:m.write}}}),c.aliasOf("layer.noDataInterpretation")],b.prototype,"noDataInterpretation",void 0);d([c.property({json:{write:!0}})],b.prototype,"pixelType",void 0);d([c.property({json:{write:!0}})],b.prototype,"lercVersion",void 0);d([c.writer("lercVersion")],b.prototype,"writeLercVersion",null);d([c.property({type:Number,dependsOn:"layer.adjustAspectRatio layer.bandIds layer.format layer.compressionQuality layer.compressionTolerance layer.definitionExpression layer.interpolation layer.noData layer.noDataInterpretation layer.mosaicRule layer.renderingRule layer.pixelFilter layer.renderer lercVersion pixelType".split(" ")})],
b.prototype,"version",null);d([c.property({dependsOn:["layer.mosaicRule","layer.definitionExpression"],json:{write:!0}})],b.prototype,"mosaicRule",null);d([c.property({dependsOn:["layer.renderingRule","layer.renderer","layer.rasterInfo","layer.format"],json:{write:!0}})],b.prototype,"renderingRule",null);return b=d([c.subclass("esri.layers.mixins.ExportImageServiceParameters")],b)}(c.declared(p.JSONSupport));h.ExportImageServiceParameters=g});