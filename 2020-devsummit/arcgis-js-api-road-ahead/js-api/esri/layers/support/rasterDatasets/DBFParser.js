// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","./byteStreamUtils"],function(p,q,l){function n(c){var d=c.fields;c=c.records;var e=d.some(function(a){return"oid"===a.name.toLowerCase()})?"OBJECTID":"OID",d=[{name:e,type:"esriFieldTypeOID",alias:"OID"}].concat(d.map(function(a){return{name:a.name,type:"esriFieldType"+a.typeName,alias:a.name}})),b=d.map(function(a){return a.name}),m=[],g=0,f=0;c.forEach(function(a){var d={};d[e]=g++;for(f=1;f<b.length;f++)d[b[f]]=a[f-1];m.push({attributes:d})});return{displayFieldName:"",
fields:d,features:m}}return function(){function c(){}Object.defineProperty(c,"supportedVersions",{get:function(){return[5]},enumerable:!0,configurable:!0});c.parse=function(d){var e=new DataView(d),b=e.getUint8(0)&3;if(3!==b)return{header:{version:b},recordSet:null};var c=e.getUint32(4,!0),g=e.getUint16(8,!0),f=e.getUint16(10,!0),g={version:b,recordCount:c,headerByteCount:g,recordByteCount:f},a=32,h=[],k=[];if(3===b){for(;13!==e.getUint8(a);)b=String.fromCharCode(e.getUint8(a+11)).trim(),h.push({name:l.bytesToUTF8(new Uint8Array(d,
a,11)),type:b,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(b)],length:e.getUint8(a+16)}),a+=32;a+=1;if(0<h.length)for(b=function(){var c=[];32===e.getUint8(a)?(a+=1,h.forEach(function(b){if("C"===b.type)c.push(l.bytesToUTF8(new Uint8Array(d,a,b.length)).trim());else if("N"===b.type)c.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(d,a,b.length)).trim(),10));else if("F"===b.type)c.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(d,
a,b.length)).trim()));else if("D"===b.type){var e=String.fromCharCode.apply(null,new Uint8Array(d,a,b.length)).trim();c.push(new Date(parseInt(e.substring(0,4),10),parseInt(e.substring(4,6),10)-1,parseInt(e.substring(6,8),10)))}a+=b.length}),k.push(c)):a+=f};k.length<c&&d.byteLength-a>f;)b()}c=n({fields:h,records:k});return{header:g,fields:h,records:k,recordSet:c}};return c}()});