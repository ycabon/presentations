// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","./layerSourceUtils"],function(k,e,h){function g(a,d){if(!a||!a.length)return!0;d=d.slice().reverse().flatten(function(b){return(b=b.sublayers)&&b.toArray().reverse()}).map(function(b){return b.id}).toArray();if(a.length>d.length)return!1;for(var c=0,b=d.length,f=0;f<a.length;f++){for(var e=a[f].id;c<b&&d[c]!==e;)c++;if(c>=b)return!1}return!0}Object.defineProperty(e,"__esModule",{value:!0});e.shouldWriteSublayerStructure=function(a,d,c){return d.flatten(function(b){return b.sublayers}).length!==
a.length||a.some(function(b){return b.originIdOf("minScale")>c||b.originIdOf("maxScale")>c||b.originIdOf("renderer")>c||b.originIdOf("labelingInfo")>c||b.originIdOf("opacity")>c||b.originIdOf("labelsVisible")>c||b.originIdOf("source")>c})?!0:!g(a,d)};e.isExportDynamic=function(a,d,c){return a.some(function(b){var a=b.source;return!(!a||a.type===h.MAPLAYER&&a.mapLayerId===b.id&&(!a.gdbVersion||a.gdbVersion===c.gdbVersion))||2<b.originIdOf("renderer")||2<b.originIdOf("labelingInfo")||2<b.originIdOf("opacity")||
2<b.originIdOf("labelsVisible")})?!0:!g(a,d)};e.isSublayerOverhaul=function(a){return!!a&&a.some(function(a){return null!=a.minScale||a.layerDefinition&&null!=a.layerDefinition.minScale})}});