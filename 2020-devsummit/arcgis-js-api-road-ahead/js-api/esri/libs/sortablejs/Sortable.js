// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
(function(Z,x){"object"===typeof exports&&"undefined"!==typeof module?module.exports=x():"function"===typeof define&&define.amd?define(x):(Z=Z||self,Z.Sortable=x())})(this,function(){function Z(a){Z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return Z(a)}function x(){x=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],
d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return x.apply(this,arguments)}function V(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})));d.forEach(function(b){var d=c[b];b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):
a[b]=d})}return a}function Ab(a,b){if(null==a)return{};var c;if(null==a)c={};else{c={};var d=Object.keys(a),e,g;for(g=0;g<d.length;g++)e=d[g],0<=b.indexOf(e)||(c[e]=a[e])}if(Object.getOwnPropertySymbols)for(g=Object.getOwnPropertySymbols(a),e=0;e<g.length;e++)d=g[e],0<=b.indexOf(d)||Object.prototype.propertyIsEnumerable.call(a,d)&&(c[d]=a[d]);return c}function Bb(a){var b;if(Array.isArray(a)){b=0;for(var c=Array(a.length);b<a.length;b++)c[b]=a[b];b=c}else b=void 0;b||(b=Symbol.iterator in Object(a)||
"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=b))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function T(a){return!!navigator.userAgent.match(a)}function m(a,b,c){a.addEventListener(b,c,!S&&hb)}function q(a,b,c){a.removeEventListener(b,c,!S&&hb)}function za(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}
function O(a,b,c,d){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&za(a,b):za(a,b))||d&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function y(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(ib," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(ib," ")}}function h(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?
c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||-1!==b.indexOf("webkit")||(b="-webkit-"+b);d[b]=c+("string"===typeof c?"":"px")}}function aa(a,b){var c="";if("string"===typeof a)c=a;else{do{var d=h(a,"transform");d&&"none"!==d&&(c=d+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix)&&new a(c)}function jb(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var d=a.length;if(c)for(;b<d;b++)c(a[b],
b);return a}return[]}function U(){return S?document.documentElement:document.scrollingElement}function D(a,b,c,d,e){if(a.getBoundingClientRect||a===window){var g,k,H,t,f,ka,l;a!==window&&a!==U()?(g=a.getBoundingClientRect(),k=g.top,H=g.left,t=g.bottom,f=g.right,ka=g.height,l=g.width):(H=k=0,t=window.innerHeight,f=window.innerWidth,ka=window.innerHeight,l=window.innerWidth);if((b||c)&&a!==window&&(e=e||a.parentNode,!S)){do if(e&&e.getBoundingClientRect&&("none"!==h(e,"transform")||c&&"static"!==h(e,
"position"))){t=e.getBoundingClientRect();k-=t.top+parseInt(h(e,"border-top-width"));H-=t.left+parseInt(h(e,"border-left-width"));t=k+g.height;f=H+g.width;break}while(e=e.parentNode)}d&&a!==window&&(d=(a=aa(e||a))&&a.a,e=a&&a.d,a&&(k/=e,H/=d,l/=d,ka/=e,t=k+ka,f=H+l));return{top:k,left:H,bottom:t,right:f,width:l,height:ka}}}function kb(a,b,c){var d=W(a,!0);for(a=D(a)[b];d;){b=D(d)[c];var e=void 0,e="top"===c||"left"===c?a>=b:a<=b;if(!e)return d;if(d===U())break;d=W(d,!1)}return!1}function Aa(a,b,c){for(var d=
0,e=0,g=a.children;e<g.length;){if("none"!==g[e].style.display&&g[e]!==l.ghost&&g[e]!==l.dragged&&O(g[e],c.draggable,a,!1)){if(d===b)return g[e];d++}e++}return null}function Na(a,b){for(a=a.lastElementChild;a&&(a===l.ghost||"none"===h(a,"display")||b&&!za(a,b));)a=a.previousElementSibling;return a||null}function A(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===l.clone||b&&!za(a,b)||c++;return c}function lb(a){var b=0,c=0,d=U();
if(a){do var e=aa(a),g=e.d,b=b+a.scrollLeft*e.a,c=c+a.scrollTop*g;while(a!==d&&(a=a.parentNode))}return[b,c]}function Cb(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var d in b)if(b.hasOwnProperty(d)&&b[d]===a[c][d])return Number(c);return-1}function W(a,b){if(!a||!a.getBoundingClientRect)return U();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var d=h(a);if(a.clientWidth<a.scrollWidth&&("auto"==d.overflowX||"scroll"==d.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==
d.overflowY||"scroll"==d.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return U()}function Oa(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function mb(a,b){return function(){if(!la){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);la=setTimeout(function(){la=void 0},b)}}}function nb(a,b,c){a.scrollLeft+=
b;a.scrollTop+=c}function Pa(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function ob(a,b){h(a,"position","absolute");h(a,"top",b.top);h(a,"left",b.left);h(a,"width",b.width);h(a,"height",b.height)}function Qa(a){h(a,"position","");h(a,"top","");h(a,"left","");h(a,"width","");h(a,"height","")}function Db(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(b){if("none"!==
h(b,"display")&&b!==l.ghost){a.push({target:b,rect:D(b)});var c=V({},a[a.length-1].rect);if(b.thisAnimationDuration){var e=aa(b,!0);e&&(c.top-=e.f,c.left-=e.e)}b.fromRect=c}})},addAnimationState:function(b){a.push(b)},removeAnimationState:function(b){a.splice(Cb(a,{target:b}),1)},animateAll:function(c){var d=this;if(this.options.animation){var e=!1,g=0;a.forEach(function(a){var b=0,c=a.target,k=c.fromRect,f=D(c),h=c.prevFromRect,l=c.prevToRect;a=a.rect;var p=aa(c,!0);p&&(f.top-=p.f,f.left-=p.e);c.toRect=
f;c.thisAnimationDuration&&Oa(h,f)&&!Oa(k,f)&&(a.top-f.top)/(a.left-f.left)===(k.top-f.top)/(k.left-f.left)&&(b=Math.sqrt(Math.pow(h.top-a.top,2)+Math.pow(h.left-a.left,2))/Math.sqrt(Math.pow(h.top-l.top,2)+Math.pow(h.left-l.left,2))*d.options.animation);Oa(f,k)||(c.prevFromRect=k,c.prevToRect=f,b||(b=d.options.animation),d.animate(c,a,f,b));b&&(e=!0,g=Math.max(g,b),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0;c.prevFromRect=null;c.fromRect=null;
c.prevToRect=null;c.thisAnimationDuration=null},b),c.thisAnimationDuration=b)});clearTimeout(b);e?b=setTimeout(function(){"function"===typeof c&&c()},g):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(a,b,e,g){if(g){h(a,"transition","");h(a,"transform","");var c=aa(this.el),d=(b.left-e.left)/(c&&c.a||1);b=(b.top-e.top)/(c&&c.d||1);a.animatingX=!!d;a.animatingY=!!b;h(a,"transform","translate3d("+d+"px,"+b+"px,0)");h(a,"transition","transform "+g+"ms"+
(this.options.easing?" "+this.options.easing:""));h(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){h(a,"transition","");h(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},g)}}}}function ma(a){var b=a.sortable,c=a.rootEl,d=a.name,e=a.targetEl,g=a.cloneEl,k=a.toEl,f=a.fromEl,t=a.oldIndex,h=a.newIndex,l=a.oldDraggableIndex,p=a.newDraggableIndex,n=a.originalEvent,q=a.putSortable,m=a.extraEventProperties;if(b=
b||c&&c[I]){var r=b.options,y="on"+d.charAt(0).toUpperCase()+d.substr(1);!window.CustomEvent||S||na?(a=document.createEvent("Event"),a.initEvent(d,!0,!0)):a=new CustomEvent(d,{bubbles:!0,cancelable:!0});a.to=k||c;a.from=f||c;a.item=e||c;a.clone=g;a.oldIndex=t;a.newIndex=h;a.oldDraggableIndex=l;a.newDraggableIndex=p;a.originalEvent=n;a.pullMode=q?q.lastPutMode:void 0;var d=V({},m,oa.getEventProperties(d,b)),E;for(E in d)a[E]=d[E];c&&c.dispatchEvent(a);r[y]&&r[y].call(b,a)}}function J(a){ma(V({putSortable:G,
cloneEl:v,targetEl:f,rootEl:z,oldIndex:ga,oldDraggableIndex:pa,newIndex:M,newDraggableIndex:X},a))}function l(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=x({},b);a[I]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pb(a,this.options)},
ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==
l.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};oa.initializePlugins(this,a,c);for(var d in c)d in b||(b[d]=c[d]);qb(b);for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Eb)this.options.touchStartThreshold=1;b.supportPointer?m(a,"pointerdown",this._onTapStart):(m(a,"mousedown",this._onTapStart),m(a,"touchstart",this._onTapStart));this.nativeDraggable&&(m(a,"dragover",this),m(a,"dragenter",this));
Ba.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);x(this,Db())}function Sa(a,b,c,d,e,g,k,f){var t,h=a[I],H=h.options.onMove,l;!window.CustomEvent||S||na?(t=document.createEvent("Event"),t.initEvent("move",!0,!0)):t=new CustomEvent("move",{bubbles:!0,cancelable:!0});t.to=b;t.from=a;t.dragged=c;t.draggedRect=d;t.related=e||b;t.relatedRect=g||D(b);t.willInsertAfter=f;t.originalEvent=k;a.dispatchEvent(t);H&&(l=H.call(h,t,k));return l}function Ta(a){a.draggable=!1}function Fb(){Ua=
!1}function Gb(a,b,c){c=D(Na(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function Hb(a,b,c,d,e,g,k,h){a=d?a.clientY:a.clientX;var t=d?c.height:c.width,H=d?c.top:c.left;c=d?c.bottom:c.right;d=!1;if(!k)if(h&&Ca<t*e)if(!qa&&(1===ra?a>H+t*g/2:a<c-t*g/2)&&(qa=!0),qa)d=!0;else{if(1===ra?a<H+Ca:a>c-Ca)return-ra}else if(a>H+t*(1-e)/2&&a<c-t*(1-e)/2)return b=
A(f)<A(b)?1:-1,b;if(d||k)if(a<H+t*g/2||a>c-t*g/2)return a>H+t/2?1:-1;return 0}function Ib(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function Jb(a){Da.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&Da.push(c)}}function Ea(a){return setTimeout(a,0)}function Fa(){w.forEach(function(a){clearInterval(a.pid)});w=[]}function Va(){}function Wa(){}function Kb(a,b){p.forEach(function(c,
d){(d=b.children[c.sortableIndex+(a?Number(d):0)])?b.insertBefore(c,d):b.appendChild(c)})}function rb(a,b){F.forEach(function(c,d){(d=b.children[c.sortableIndex+(a?Number(d):0)])?b.insertBefore(c,d):b.appendChild(c)})}function Ga(){p.forEach(function(a){a!==r&&a.parentNode&&a.parentNode.removeChild(a)})}var S=T(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),na=T(/Edge/i),sb=T(/firefox/i),Xa=T(/safari/i)&&!T(/chrome/i)&&!T(/android/i),sa=T(/iP(ad|od|hone)/i),Lb=T(/chrome/i)&&T(/android/i),
hb={capture:!1,passive:!1},ib=/\s+/g,la,I="Sortable"+(new Date).getTime(),ta=[],Ya={initializeByDefault:!0},oa={mount:function(a){for(var b in Ya)!Ya.hasOwnProperty(b)||b in a||(a[b]=Ya[b]);ta.push(a)},pluginEvent:function(a,b,c){var d=this;this.eventCanceled=!1;c.cancel=function(){d.eventCanceled=!0};var e=a+"Global";ta.forEach(function(d){if(b[d.pluginName]){if(b[d.pluginName][e])b[d.pluginName][e](V({sortable:b},c));if(b.options[d.pluginName]&&b[d.pluginName][a])b[d.pluginName][a](V({sortable:b},
c))}})},initializePlugins:function(a,b,c,d){ta.forEach(function(d){var e=d.pluginName;if(a.options[e]||d.initializeByDefault)d=new d(a,b,a.options),d.sortable=a,d.options=a.options,a[e]=d,x(c,d.defaults)});for(var e in a.options)a.options.hasOwnProperty(e)&&(d=this.modifyOption(a,e,a.options[e]),"undefined"!==typeof d&&(a.options[e]=d))},getEventProperties:function(a,b){var c={};ta.forEach(function(d){"function"===typeof d.eventProperties&&x(c,d.eventProperties.call(b[d.pluginName],a))});return c},
modifyOption:function(a,b,c){var d;ta.forEach(function(e){a[e.pluginName]&&e.optionListeners&&"function"===typeof e.optionListeners[b]&&(d=e.optionListeners[b].call(a[e.pluginName],c))});return d}},L=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=c.evt,c=Ab(c,["evt"]);oa.pluginEvent.bind(l)(a,b,V({dragEl:f,parentEl:B,ghostEl:n,rootEl:z,nextEl:ca,lastDownEl:Ha,cloneEl:v,cloneHidden:Y,dragStarted:ua,putSortable:G,activeSortable:l.active,originalEvent:d,oldIndex:ga,oldDraggableIndex:pa,
newIndex:M,newDraggableIndex:X,hideGhostForTarget:tb,unhideGhostForTarget:ub,cloneNowHidden:function(){Y=!0},cloneNowShown:function(){Y=!1},dispatchSortableEvent:function(a){J({sortable:b,name:a,originalEvent:d})}},c))};if("undefined"===typeof window||!window.document)throw Error("Sortable.js requires a window with a document");var f,B,n,z,ca,Ha,v,Y,ga,M,pa,X,Ia,G,ha=!1,Ja=!1,Ba=[],da,P,Za,$a,vb,wb,ua,ia,ra,qa=!1,Ka=!1,Ca,C,ab=[],Ua=!1,Da=[],xb=na||S?"cssFloat":"float",Eb=!Lb&&!sa&&"draggable"in document.createElement("div"),
yb=function(){if(S)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),pb=function(a,b){var c=h(a),d=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),e=Aa(a,0,b);a=Aa(a,1,b);var g=e&&h(e);b=a&&h(a);var k=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+D(e).width,f=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+D(a).width;return"flex"===c.display?"column"===
c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":e&&g["float"]&&"none"!==g["float"]?(c="left"===g["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):e&&("block"===g.display||"flex"===g.display||"table"===g.display||"grid"===g.display||k>=d&&"none"===c[xb]||a&&"none"===c[xb]&&k+f>d)?"vertical":"horizontal"},Mb=function(a,b,c){var d=c?a.left:a.top,e=c?a.right:
a.bottom;a=c?a.width:a.height;var g=c?b.left:b.top,k=c?b.right:b.bottom;b=c?b.width:b.height;return d===g||e===k||d+a/2===g+b/2},Nb=function(a,b){var c;Ba.some(function(d){if(!Na(d)){var e=D(d),g=d[I].options.emptyInsertThreshold,k=a>=e.left-g&&a<=e.right+g,e=b>=e.top-g&&b<=e.bottom+g;if(g&&k&&e)return c=d}});return c},qb=function(a){function b(a,c){return function(d,e,g,f){var k=d.options.group.name&&e.options.group.name&&d.options.group.name===e.options.group.name;if(null==a&&(c||k))return!0;if(null==
a||!1===a)return!1;if(c&&"clone"===a)return a;if("function"===typeof a)return b(a(d,e,g,f),c)(d,e,g,f);d=(c?d:e).options.group.name;return!0===a||"string"===typeof a&&a===d||a.join&&-1<a.indexOf(d)}}var c={},d=a.group;d&&"object"==Z(d)||(d={name:d});c.name=d.name;c.checkPull=b(d.pull,!0);c.checkPut=b(d.put);c.revertClone=d.revertClone;a.group=c},tb=function(){!yb&&n&&h(n,"display","none")},ub=function(){!yb&&n&&h(n,"display","")};document.addEventListener("click",function(a){if(Ja)return a.preventDefault(),
a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Ja=!1},!0);var ea=function(a){if(f){a=a.touches?a.touches[0]:a;var b=Nb(a.clientX,a.clientY);if(b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[I]._onDragOver(c)}}},Ob=function(a){f&&f.parentNode[I]._isOutsideThisEl(a.target)};l.prototype={constructor:l,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(ia=null)},
_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,f):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,d=this.options,e=d.preventOnFilter,g=a.type,k=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,h=(k||a).target,t=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||h,l=d.filter;Jb(c);if(!(f||/mousedown|pointerdown/.test(g)&&0!==a.button||d.disabled||t.isContentEditable||
(h=O(h,d.draggable,c,!1),h&&h.animated||Ha===h))){ga=A(h);pa=A(h,d.draggable);if("function"===typeof l){if(l.call(this,a,h,this)){J({sortable:b,rootEl:t,name:"filter",targetEl:h,toEl:c,fromEl:c});L("filter",b,{evt:a});e&&a.cancelable&&a.preventDefault();return}}else if(l&&(l=l.split(",").some(function(d){if(d=O(t,d.trim(),c,!1))return J({sortable:b,rootEl:d,name:"filter",targetEl:h,fromEl:c,toEl:c}),L("filter",b,{evt:a}),!0}))){e&&a.cancelable&&a.preventDefault();return}d.handle&&!O(t,d.handle,c,
!1)||this._prepareDragStart(a,k,h)}}},_prepareDragStart:function(a,b,c){var d=this,e=d.el,g=d.options,k=e.ownerDocument;if(c&&!f&&c.parentNode===e){var h=D(c);z=e;f=c;B=f.parentNode;ca=f.nextSibling;Ha=c;Ia=g.group;l.dragged=f;da={target:f,clientX:(b||a).clientX,clientY:(b||a).clientY};vb=da.clientX-h.left;wb=da.clientY-h.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;f.style["will-change"]="all";c=function(){L("delayEnded",d,{evt:a});l.eventCanceled?d._onDrop():(d._disableDelayedDragEvents(),
!sb&&d.nativeDraggable&&(f.draggable=!0),d._triggerDragStart(a,b),J({sortable:d,name:"choose",originalEvent:a}),y(f,g.chosenClass,!0))};g.ignore.split(",").forEach(function(a){jb(f,a.trim(),Ta)});m(k,"dragover",ea);m(k,"mousemove",ea);m(k,"touchmove",ea);m(k,"mouseup",d._onDrop);m(k,"touchend",d._onDrop);m(k,"touchcancel",d._onDrop);sb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0);L("delayStart",this,{evt:a});!g.delay||g.delayOnTouchOnly&&!b||this.nativeDraggable&&(na||
S)?c():l.eventCanceled?this._onDrop():(m(k,"mouseup",d._disableDelayedDrag),m(k,"touchend",d._disableDelayedDrag),m(k,"touchcancel",d._disableDelayedDrag),m(k,"mousemove",d._delayedDragTouchMoveHandler),m(k,"touchmove",d._delayedDragTouchMoveHandler),g.supportPointer&&m(k,"pointermove",d._delayedDragTouchMoveHandler),d._dragStartTimer=setTimeout(c,g.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=
Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&Ta(f);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;q(a,"mouseup",this._disableDelayedDrag);q(a,"touchend",this._disableDelayedDrag);q(a,"touchcancel",this._disableDelayedDrag);q(a,"mousemove",this._delayedDragTouchMoveHandler);q(a,"touchmove",this._delayedDragTouchMoveHandler);
q(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?m(document,"pointermove",this._onTouchMove):b?m(document,"touchmove",this._onTouchMove):m(document,"mousemove",this._onTouchMove):(m(f,"dragend",this),m(z,"dragstart",this._onDragStart));try{document.selection?Ea(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){ha=
!1;if(z&&f){L("dragStarted",this,{evt:b});this.nativeDraggable&&m(document,"dragover",Ob);var c=this.options;!a&&y(f,c.dragClass,!1);y(f,c.ghostClass,!0);l.active=this;a&&this._appendGhost();J({sortable:this,name:"start",originalEvent:b})}else this._nulling()},_emulateDragOver:function(){if(P){this._lastX=P.clientX;this._lastY=P.clientY;tb();for(var a=document.elementFromPoint(P.clientX,P.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(P.clientX,P.clientY);if(a===b)break;b=a}f.parentNode[I]._isOutsideThisEl(a);
if(b){do{if(b[I]){var c=void 0;if((c=b[I]._onDragOver({clientX:P.clientX,clientY:P.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=b}while(b=b.parentNode)}ub()}},_onTouchMove:function(a){if(da){var b=this.options,c=b.fallbackTolerance,d=b.fallbackOffset,b=a.touches?a.touches[0]:a,e=n&&aa(n),g=n&&e&&e.a,k=n&&e&&e.d,f=sa&&C&&lb(C),g=(b.clientX-da.clientX+d.x)/(g||1)+(f?f[0]-ab[0]:0)/(g||1),d=(b.clientY-da.clientY+d.y)/(k||1)+(f?f[1]-ab[1]:0)/(k||1);if(!l.active&&!ha){if(c&&Math.max(Math.abs(b.clientX-
this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}n&&(e?(e.e+=g-(Za||0),e.f+=d-($a||0)):e={a:1,b:0,c:0,d:1,e:g,f:d},c="matrix(".concat(e.a,",").concat(e.b,",").concat(e.c,",").concat(e.d,",").concat(e.e,",").concat(e.f,")"),h(n,"webkitTransform",c),h(n,"mozTransform",c),h(n,"msTransform",c),h(n,"transform",c),Za=g,$a=d,P=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!n){var a=this.options.fallbackOnBody?document.body:z,b=D(f,!0,sa,!0,a),c=this.options;
if(sa){for(C=a;"static"===h(C,"position")&&"none"===h(C,"transform")&&C!==document;)C=C.parentNode;C!==document.body&&C!==document.documentElement?(C===document&&(C=U()),b.top+=C.scrollTop,b.left+=C.scrollLeft):C=U();ab=lb(C)}n=f.cloneNode(!0);y(n,c.ghostClass,!1);y(n,c.fallbackClass,!0);y(n,c.dragClass,!0);h(n,"transition","");h(n,"transform","");h(n,"box-sizing","border-box");h(n,"margin",0);h(n,"top",b.top);h(n,"left",b.left);h(n,"width",b.width);h(n,"height",b.height);h(n,"opacity","0.8");h(n,
"position",sa?"absolute":"fixed");h(n,"zIndex","100000");h(n,"pointerEvents","none");l.ghost=n;a.appendChild(n);h(n,"transform-origin",vb/parseInt(n.style.width)*100+"% "+wb/parseInt(n.style.height)*100+"%")}},_onDragStart:function(a,b){var c=this,d=a.dataTransfer,e=c.options;L("dragStart",this,{evt:a});l.eventCanceled?this._onDrop():(L("setupClone",this),l.eventCanceled||(v=Pa(f),v.draggable=!1,v.style["will-change"]="",this._hideClone(),y(v,this.options.chosenClass,!1),l.clone=v),c.cloneId=Ea(function(){L("clone",
c);l.eventCanceled||(c.options.removeCloneOnHide||z.insertBefore(v,f),c._hideClone(),J({sortable:c,name:"clone"}))}),!b&&y(f,e.dragClass,!0),b?(Ja=!0,c._loopId=setInterval(c._emulateDragOver,50)):(q(document,"mouseup",c._onDrop),q(document,"touchend",c._onDrop),q(document,"touchcancel",c._onDrop),d&&(d.effectAllowed="move",e.setData&&e.setData.call(c,d,f)),m(document,"drop",c),h(f,"transform","translateZ(0)")),ha=!0,c._dragStartId=Ea(c._dragStarted.bind(c,b,a)),m(document,"selectstart",c),ua=!0,Xa&&
h(document.body,"user-select","none"))},_onDragOver:function(a){function b(b,c){L(b,E,V({evt:a,isOwner:Ra,axis:x?"vertical":"horizontal",revert:q,dragRect:p,targetRect:t,canSort:v,fromSortable:w,target:k,completed:d,onMove:function(b,c){return Sa(z,g,f,p,b,D(b),a,c)},changed:e},c))}function c(){b("dragOverAnimationCapture");E.captureAnimationState();E!==w&&w.captureAnimationState()}function d(c){b("dragOverCompleted",{insertion:c});c&&(Ra?ba._hideClone():ba._showClone(E),E!==w&&(y(f,G?G.options.ghostClass:
ba.options.ghostClass,!1),y(f,m.ghostClass,!0)),G!==E&&E!==l.active?G=E:E===l.active&&G&&(G=null),w===E&&(E._ignoreWhileAnimating=k),E.animateAll(function(){b("dragOverAnimationComplete");E._ignoreWhileAnimating=null}),E!==w&&(w.animateAll(),w._ignoreWhileAnimating=null));if(k===f&&!f.animated||k===g&&!k.animated)ia=null;m.dragoverBubble||a.rootEl||k===document||(f.parentNode[I]._isOutsideThisEl(a.target),!c&&ea(a));!m.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return C=!0}function e(){M=
A(f);X=A(f,m.draggable);J({sortable:E,name:"change",toEl:g,newIndex:M,newDraggableIndex:X,originalEvent:a})}var g=this.el,k=a.target,p,t,q,m=this.options,r=m.group,ba=l.active,Ra=Ia===r,v=m.sort,w=G||ba,x,E=this,C=!1;if(!Ua){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();k=O(k,m.draggable,g,!0);b("dragOver");if(l.eventCanceled)return C;if(f.contains(a.target)||k.animated&&k.animatingX&&k.animatingY||E._ignoreWhileAnimating===k)return d(!1);Ja=!1;if(ba&&!m.disabled&&(Ra?v||(q=!z.contains(f)):
G===this||(this.lastPutMode=Ia.checkPull(this,ba,f,a))&&r.checkPut(this,ba,f,a))){x="vertical"===this._getDirection(a,k);p=D(f);b("dragOverValid");if(l.eventCanceled)return C;if(q)return B=z,c(),this._hideClone(),b("revert"),l.eventCanceled||(ca?z.insertBefore(f,ca):z.appendChild(f)),d(!0);r=Na(g,m.draggable);if(!r||Gb(a,x,this)&&!r.animated){if(r===f)return d(!1);r&&g===a.target&&(k=r);k&&(t=D(k));if(!1!==Sa(z,g,f,p,k,t,a,!!k))return c(),g.appendChild(f),B=g,e(),d(!0)}else if(k.parentNode===g){t=
D(k);var N=0,bb,N=f.parentNode!==g,Q=!Mb(f.animated&&f.toRect||p,k.animated&&k.toRect||t,x),r=x?"top":"left",F=kb(k,"top","top")||kb(f,"top","top"),K=F?F.scrollTop:void 0;ia!==k&&(bb=t[r],qa=!1,Ka=!Q&&m.invertSwap||N);var N=Hb(a,k,t,x,Q?1:m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,Ka,ia===k),u;if(0!==N){Q=A(f);do Q-=N,u=B.children[Q];while(u&&("none"===h(u,"display")||u===n))}if(0===N||u===k)return d(!1);ia=k;ra=N;u=k.nextElementSibling;Q=!1;Q=1===N;N=Sa(z,
g,f,p,k,t,a,Q);if(!1!==N){if(1===N||-1===N)Q=1===N;Ua=!0;setTimeout(Fb,30);c();Q&&!u?g.appendChild(f):k.parentNode.insertBefore(f,Q?u:k);F&&nb(F,0,K-F.scrollTop);B=f.parentNode;void 0===bb||Ka||(Ca=Math.abs(bb-D(k)[r]));e();return d(!0)}}if(g.contains(f))return d(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){q(document,"mousemove",this._onTouchMove);q(document,"touchmove",this._onTouchMove);q(document,"pointermove",this._onTouchMove);q(document,"dragover",ea);q(document,"mousemove",
ea);q(document,"touchmove",ea)},_offUpEvents:function(){var a=this.el.ownerDocument;q(a,"mouseup",this._onDrop);q(a,"touchend",this._onDrop);q(a,"pointerup",this._onDrop);q(a,"touchcancel",this._onDrop);q(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;M=A(f);X=A(f,c.draggable);L("drop",this,{evt:a});B=f&&f.parentNode;M=A(f);X=A(f,c.draggable);if(!l.eventCanceled&&(qa=Ka=ha=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),
clearTimeout(this._dragStartId),this.nativeDraggable&&(q(document,"drop",this),q(b,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Xa&&h(document.body,"user-select",""),a&&(ua&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),(z===B||G&&"clone"!==G.lastPutMode)&&v&&v.parentNode&&v.parentNode.removeChild(v),f&&(this.nativeDraggable&&q(f,"dragend",this),Ta(f),f.style["will-change"]="",ua&&!ha&&y(f,G?G.options.ghostClass:
this.options.ghostClass,!1),y(f,this.options.chosenClass,!1),J({sortable:this,name:"unchoose",toEl:B,newIndex:null,newDraggableIndex:null,originalEvent:a}),z!==B?(0<=M&&(J({rootEl:B,name:"add",toEl:B,fromEl:z,originalEvent:a}),J({sortable:this,name:"remove",toEl:B,originalEvent:a}),J({rootEl:B,name:"sort",toEl:B,fromEl:z,originalEvent:a}),J({sortable:this,name:"sort",toEl:B,originalEvent:a})),G&&G.save()):M!==ga&&0<=M&&(J({sortable:this,name:"update",toEl:B,originalEvent:a}),J({sortable:this,name:"sort",
toEl:B,originalEvent:a})),l.active)))){if(null==M||-1===M)M=ga,X=pa;J({sortable:this,name:"end",toEl:B,originalEvent:a});this.save()}this._nulling()},_nulling:function(){L("nulling",this);z=f=B=n=ca=v=Ha=Y=da=P=ua=M=X=ga=pa=ia=ra=G=Ia=l.dragged=l.ghost=l.clone=l.active=null;Da.forEach(function(a){a.checked=!0});Da.length=Za=$a=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":f&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect=
"move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,d=0,e=c.length,g=this.options;d<e;d++)b=c[d],O(b,g.draggable,this.el,!1)&&a.push(b.getAttribute(g.dataIdAttr)||Ib(b));return a},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,e){e=c.children[e];O(e,this.options.draggable,c,!1)&&(b[a]=e)},this);a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=
this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return O(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var d=oa.modifyOption(this,a,b);c[a]="undefined"!==typeof d?d:b;"group"===a&&qb(c)},destroy:function(){L("destroy",this);var a=this.el;a[I]=null;q(a,"mousedown",this._onTapStart);q(a,"touchstart",this._onTapStart);q(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(q(a,"dragover",this),q(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(a){a.removeAttribute("draggable")});this._onDrop();Ba.splice(Ba.indexOf(this.el),1);this.el=a=null},_hideClone:function(){Y||(L("hideClone",this),l.eventCanceled||(h(v,"display","none"),this.options.removeCloneOnHide&&v.parentNode&&v.parentNode.removeChild(v),Y=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():Y&&(L("showClone",this),l.eventCanceled||(z.contains(f)&&!this.options.group.revertClone?z.insertBefore(v,f):ca?z.insertBefore(v,ca):z.appendChild(v),this.options.group.revertClone&&
this.animate(f,v),h(v,"display",""),Y=!1))}};m(document,"touchmove",function(a){(l.active||ha)&&a.cancelable&&a.preventDefault()});l.utils={on:m,off:q,css:h,find:jb,is:function(a,b){return!!O(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:mb,closest:O,toggleClass:y,clone:Pa,index:A,nextTick:Ea,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:pb,getChild:Aa};l.get=function(a){return a[I]};l.mount=function(){for(var a=arguments.length,
b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(l.utils=V({},l.utils,a.utils));oa.mount(a)})};l.create=function(a,b){return new l(a,b)};l.version="1.10.0";var w=[],va,cb,db=!1,eb,fb,La,ja,gb=mb(function(a,b,c,d){if(b.scroll){var e=(a.touches?a.touches[0]:a).clientX,g=(a.touches?a.touches[0]:a).clientY,
k=b.scrollSensitivity,f=b.scrollSpeed,t=U(),p=!1,m;cb!==c&&(cb=c,Fa(),va=b.scroll,m=b.scrollFn,!0===va&&(va=W(c,!0)));c=0;var q=va;do{var n=q,r=D(n),y=r.top,v=r.bottom,x=r.left,E=r.right,z=r.width,r=r.height,A=void 0,u=void 0,B=n.scrollWidth,C=n.scrollHeight,u=h(n),F=n.scrollLeft,G=n.scrollTop;n===t?(A=z<B&&("auto"===u.overflowX||"scroll"===u.overflowX||"visible"===u.overflowX),u=r<C&&("auto"===u.overflowY||"scroll"===u.overflowY||"visible"===u.overflowY)):(A=z<B&&("auto"===u.overflowX||"scroll"===
u.overflowX),u=r<C&&("auto"===u.overflowY||"scroll"===u.overflowY));x=A&&(Math.abs(E-e)<=k&&F+z<B)-(Math.abs(x-e)<=k&&!!F);y=u&&(Math.abs(v-g)<=k&&G+r<C)-(Math.abs(y-g)<=k&&!!G);if(!w[c])for(v=0;v<=c;v++)w[v]||(w[v]={});if(w[c].vx!=x||w[c].vy!=y||w[c].el!==n)if(w[c].el=n,w[c].vx=x,w[c].vy=y,clearInterval(w[c].pid),0!=x||0!=y)p=!0,w[c].pid=setInterval(function(){d&&0===this.layer&&l.active._onTouchMove(La);var b=w[this.layer].vy?w[this.layer].vy*f:0,c=w[this.layer].vx?w[this.layer].vx*f:0;"function"===
typeof m&&"continue"!==m.call(l.dragged.parentNode[I],c,b,a,La,w[this.layer].el)||nb(w[this.layer].el,c,b)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&q!==t&&(q=W(q,!1)));db=p}},30),zb=function(a){var b=a.originalEvent,c=a.putSortable,d=a.dragEl,e=a.activeSortable,g=a.dispatchSortableEvent,f=a.hideGhostForTarget;a=a.unhideGhostForTarget;e=c||e;f();b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b;b=document.elementFromPoint(b.clientX,b.clientY);a();e&&!e.el.contains(b)&&(g("spill"),
this.onSpill({dragEl:d,putSortable:c}))};Va.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=Aa(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);this.sortable.animateAll();a&&a.animateAll()},drop:zb};x(Va,{pluginName:"revertOnSpill"});Wa.prototype={onSpill:function(a){var b=
a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:zb};x(Wa,{pluginName:"removeOnSpill"});var u,p=[],F=[],wa,R,xa=!1,K=!1,ya=!1,r,fa,Ma;l.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?
m(document,"dragover",this._handleAutoScroll):this.options.supportPointer?m(document,"pointermove",this._handleFallbackAutoScroll):a.touches?m(document,"touchmove",this._handleFallbackAutoScroll):m(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},drop:function(){this.sortable.nativeDraggable?q(document,"dragover",this._handleAutoScroll):(q(document,"pointermove",this._handleFallbackAutoScroll),
q(document,"touchmove",this._handleFallbackAutoScroll),q(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(ja);Fa();clearTimeout(la);la=void 0},nulling:function(){La=cb=va=db=ja=eb=fb=null;w.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,c){var b=this,e=(a.touches?a.touches[0]:a).clientX,g=(a.touches?a.touches[0]:a).clientY,f=document.elementFromPoint(e,g);La=a;if(c||na||S||Xa){gb(a,this.options,f,c);var h=W(f,!0);!db||
ja&&e===eb&&g===fb||(ja&&clearInterval(ja),ja=setInterval(function(){var d=W(document.elementFromPoint(e,g),!0);d!==h&&(h=d,Fa());gb(a,b.options,d,c)},10),eb=e,fb=g)}else this.options.bubbleScroll&&W(f,!0)!==U()?gb(a,this.options,W(f,!1),!1):Fa()}};return x(a,{pluginName:"scroll",initializeByDefault:!0})});l.mount(Wa,Va);l.mount(new function(){function a(){this.defaults={swapClass:"sortable-swap-highlight"}}a.prototype={dragStart:function(a){u=a.dragEl},dragOverValid:function(a){var b=a.completed,
d=a.target,e=a.onMove,g=a.changed,f=a.cancel;if(a.activeSortable.options.swap){var h=this.sortable.el;a=this.options;d&&d!==h&&(h=u,!1!==e(d)?(y(d,a.swapClass,!0),u=d):u=null,h&&h!==u&&y(h,a.swapClass,!1));g();b(!0);f()}},drop:function(a){var b=a.activeSortable,d=a.putSortable;a=a.dragEl;var e=d||this.sortable,g=this.options;u&&y(u,g.swapClass,!1);if(u&&(g.swap||d&&d.options.swap)&&a!==u){e.captureAnimationState();e!==b&&b.captureAnimationState();var d=u,g=a.parentNode,f=d.parentNode,h,l;g&&f&&!g.isEqualNode(d)&&
!f.isEqualNode(a)&&(h=A(a),l=A(d),g.isEqualNode(f)&&h<l&&l++,g.insertBefore(d,g.children[h]),f.insertBefore(a,f.children[l]));e.animateAll();e!==b&&b.animateAll()}},nulling:function(){u=null}};return x(a,{pluginName:"swap",eventProperties:function(){return{swapItem:u}}})});l.mount(new function(){function a(a){for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this));a.options.supportPointer?m(document,"pointerup",this._deselectMultiDrag):(m(document,"mouseup",
this._deselectMultiDrag),m(document,"touchend",this._deselectMultiDrag));m(document,"keydown",this._checkKeyDown);m(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(b,c){var d="";p.length&&R===a?p.forEach(function(a,b){d+=(b?", ":"")+a.textContent}):d=c.textContent;b.setData("Text",d)}}}a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(a){r=a.dragEl},delayEnded:function(){this.isMultiDrag=~p.indexOf(r)},
setupClone:function(a){var b=a.sortable;a=a.cancel;if(this.isMultiDrag){for(var d=0;d<p.length;d++)F.push(Pa(p[d])),F[d].sortableIndex=p[d].sortableIndex,F[d].draggable=!1,F[d].style["will-change"]="",y(F[d],this.options.selectedClass,!1),p[d]===r&&y(F[d],this.options.chosenClass,!1);b._hideClone();a()}},clone:function(a){var b=a.sortable,d=a.rootEl,e=a.dispatchSortableEvent;a=a.cancel;this.isMultiDrag&&!this.options.removeCloneOnHide&&p.length&&R===b&&(rb(!0,d),e("clone"),a())},showClone:function(a){var b=
a.cloneNowShown,d=a.cancel;this.isMultiDrag&&(rb(!1,a.rootEl),F.forEach(function(a){h(a,"display","")}),b(),Ma=!1,d())},hideClone:function(a){var b=this,d=a.cloneNowHidden;a=a.cancel;this.isMultiDrag&&(F.forEach(function(a){h(a,"display","none");b.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),d(),Ma=!0,a())},dragStartGlobal:function(a){!this.isMultiDrag&&R&&R.multiDrag._deselectMultiDrag();p.forEach(function(a){a.sortableIndex=A(a)});p=p.sort(function(a,b){return a.sortableIndex-
b.sortableIndex});ya=!0},dragStarted:function(a){var b=this;a=a.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){p.forEach(function(a){a!==r&&h(a,"position","absolute")});var d=D(r,!1,!0,!0);p.forEach(function(a){a!==r&&ob(a,d)});xa=K=!0}a.animateAll(function(){xa=K=!1;b.options.animation&&p.forEach(function(a){Qa(a)});b.options.sort&&Ga()})}},dragOver:function(a){var b=a.target,d=a.completed;a=a.cancel;K&&~p.indexOf(b)&&(d(!1),a())},revert:function(a){var b=
a.fromSortable,d=a.rootEl,e=a.sortable,g=a.dragRect;1<p.length&&(p.forEach(function(a){e.addAnimationState({target:a,rect:K?D(a):g});Qa(a);a.fromRect=g;b.removeAnimationState(a)}),K=!1,Kb(!this.options.removeCloneOnHide,d))},dragOverCompleted:function(a){var b=a.sortable,d=a.isOwner,e=a.activeSortable,g=a.parentEl,f=a.putSortable,h=this.options;if(a.insertion){d&&e._hideClone();xa=!1;if(h.animation&&1<p.length&&(K||!d&&!e.options.sort&&!f)){var l=D(r,!1,!0,!0);p.forEach(function(a){a!==r&&(ob(a,l),
g.appendChild(a))});K=!0}d||(K||Ga(),1<p.length?(a=Ma,e._showClone(b),e.options.animation&&!Ma&&a&&F.forEach(function(a){e.addAnimationState({target:a,rect:fa});a.fromRect=fa;a.thisAnimationDuration=null})):e._showClone(b))}},dragOverAnimationCapture:function(a){var b=a.dragRect,d=a.isOwner;a=a.activeSortable;p.forEach(function(a){a.thisAnimationDuration=null});a.options.animation&&!d&&a.multiDrag.isMultiDrag&&(fa=x({},b),b=aa(r,!0),fa.top-=b.f,fa.left-=b.e)},dragOverAnimationComplete:function(){K&&
(K=!1,Ga())},drop:function(a){var b=a.originalEvent,d=a.rootEl,e=a.parentEl,g=a.sortable,f=a.dispatchSortableEvent,h=a.oldIndex,l=(a=a.putSortable)||this.sortable;if(b){var m=this.options,n=e.children;if(!ya)if(m.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),y(r,m.selectedClass,!~p.indexOf(r)),~p.indexOf(r))p.splice(p.indexOf(r),1),wa=null,ma({sortable:g,rootEl:d,name:"deselect",targetEl:r,originalEvt:b});else{p.push(r);ma({sortable:g,rootEl:d,name:"select",targetEl:r,originalEvt:b});
if(b.shiftKey&&wa&&g.el.contains(wa)){var q=A(wa),u=A(r);if(~q&&~u&&q!==u){var v;u>q?(v=q,q=u):(v=u,q+=1);for(;v<q;v++)~p.indexOf(n[v])||(y(n[v],m.selectedClass,!0),p.push(n[v]),ma({sortable:g,rootEl:d,name:"select",targetEl:n[v],originalEvt:b}))}}else wa=r;R=l}if(ya&&this.isMultiDrag){if((e[I].options.sort||e!==d)&&1<p.length){var x=D(r),w=A(r,":not(."+this.options.selectedClass+")");!xa&&m.animation&&(r.thisAnimationDuration=null);l.captureAnimationState();if(!xa&&(m.animation&&(r.fromRect=x,p.forEach(function(a){a.thisAnimationDuration=
null;if(a!==r){var b=K?D(a):x;a.fromRect=b;l.addAnimationState({target:a,rect:b})}})),Ga(),p.forEach(function(a){n[w]?e.insertBefore(a,n[w]):e.appendChild(a);w++}),h===A(r))){var z=!1;p.forEach(function(a){a.sortableIndex!==A(a)&&(z=!0)});z&&f("update")}p.forEach(function(a){Qa(a)});l.animateAll()}R=l}(d===e||a&&"clone"!==a.lastPutMode)&&F.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)})}},nullingGlobal:function(){this.isMultiDrag=ya=!1;F.length=0},destroyGlobal:function(){this._deselectMultiDrag();
q(document,"pointerup",this._deselectMultiDrag);q(document,"mouseup",this._deselectMultiDrag);q(document,"touchend",this._deselectMultiDrag);q(document,"keydown",this._checkKeyDown);q(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(a){if(!(ya||R!==this.sortable||a&&O(a.target,this.options.draggable,this.sortable.el,!1)||a&&0!==a.button))for(;p.length;){var b=p[0];y(b,this.options.selectedClass,!1);p.shift();ma({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:b,
originalEvt:a})}},_checkKeyDown:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}};return x(a,{pluginName:"multiDrag",utils:{select:function(a){var b=a.parentNode[I];b&&b.options.multiDrag&&!~p.indexOf(a)&&(R&&R!==b&&(R.multiDrag._deselectMultiDrag(),R=b),y(a,b.options.selectedClass,!0),p.push(a))},deselect:function(a){var b=a.parentNode[I],d=p.indexOf(a);b&&b.options.multiDrag&&~d&&(y(a,
b.options.selectedClass,!1),p.splice(d,1))}},eventProperties:function(){var a=this,c=[],d=[];p.forEach(function(b){c.push({multiDragElement:b,index:b.sortableIndex});var e;e=K&&b!==r?-1:K?A(b,":not(."+a.options.selectedClass+")"):A(b);d.push({multiDragElement:b,index:e})});return{items:Bb(p),clones:[].concat(F),oldIndicies:c,newIndicies:d}},optionListeners:{multiDragKey:function(a){a=a.toLowerCase();"ctrl"===a?a="Control":1<a.length&&(a=a.charAt(0).toUpperCase()+a.substr(1));return a}}})});return l});