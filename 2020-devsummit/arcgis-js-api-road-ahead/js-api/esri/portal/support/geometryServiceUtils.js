// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../core/Error ../Portal ../../tasks/GeometryService ../../tasks/support/ProjectParameters @dojo/framework/shim/Promise".split(" "),function(t,c,l,d,m,h,q,n,r){function p(b,c){void 0===b&&(b=null);return d(this,void 0,void 0,function(){var a;return l(this,function(e){switch(e.label){case 0:if(m.geometryServiceUrl)return[2,new n({url:m.geometryServiceUrl})];if(!b)throw new h("internal:geometry-service-url-not-configured");
a="portal"in b?b.portal||q.getDefault():b;return[4,a.load({signal:c})];case 1:e.sent();if(a.helperServices&&a.helperServices.geometry&&a.helperServices.geometry.url)return[2,new n({url:a.helperServices.geometry.url})];throw new h("internal:geometry-service-url-not-configured");}})})}Object.defineProperty(c,"__esModule",{value:!0});c.create=p;c.projectGeometry=function(b,c,a,e){void 0===a&&(a=null);return d(this,void 0,void 0,function(){var d,f,g;return l(this,function(k){switch(k.label){case 0:return[4,
p(a,e)];case 1:return d=k.sent(),f=new r,f.geometries=[b],f.outSpatialReference=c,[4,d.project(f,{signal:e})];case 2:if((g=k.sent())&&Array.isArray(g)&&1===g.length)return[2,g[0]];throw new h("internal:geometry-service-projection-failed");}})})}});