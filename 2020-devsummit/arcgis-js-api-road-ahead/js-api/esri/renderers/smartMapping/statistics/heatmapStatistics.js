// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/restHelper ../../../core/Error ../../../core/maybe ../../../layers/support/fieldUtils ./support/utils ../support/utils".split(" "),function(B,C,w,m,b,n,p,x,y,q,g){function z(d){return b(this,void 0,void 0,function(){var e,r,f,a,c,b,h,k,t,u,v;return m(this,function(l){switch(l.label){case 0:if(!(d&&d.layer&&d.view))throw new p("heatmap-statistics:missing-parameters",
"'layer' and 'view' parameters are required");e=[0,2,1];r=d.layer;f=n(d,["layer"]);a=g.createLayerAdapter(r,e);c=w({layerAdapter:a},f);c.blurRadius=null==c.blurRadius?10:c.blurRadius;if(!a)throw new p("heatmap-statistics:invalid-parameters","'layer' must be one of these types: "+g.getLayerTypeLabels(e).join(", "));b=x.isSome(c.signal)?{signal:c.signal}:null;return[4,a.load(b)];case 1:return l.sent(),k=(h=c.field)?a.getField(h):null,[4,g.getFieldsList({field:h})];case 2:t=l.sent();if(u=q.verifyBasicFieldValidity(a,
t,"heatmap-statistics:invalid-parameters"))throw u;if(k&&(v=q.verifyFieldType(a,k,"heatmap-statistics:invalid-parameters",A)))throw v;return[2,c]}})})}var A=y.numericTypes;return function(d){return b(this,void 0,void 0,function(){var e,b,f;return m(this,function(a){switch(a.label){case 0:return[4,z(d)];case 1:return e=a.sent(),b=e.layerAdapter,f=n(e,["layerAdapter"]),[2,b.heatmapStatistics(f)]}})})}});