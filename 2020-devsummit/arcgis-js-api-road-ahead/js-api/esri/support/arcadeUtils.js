// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./languageUtils ./parser ./treeAnalysis ../core/has ../core/promiseUtils ../intl/moment".split(" "),function(v,h,l,r,n,m,q,f,a,g){function e(b,c){if(null===R)throw Error("Async Arcade must be enabled for this script");return f("csp-restrictions")||!1===d?function(d){return R.executeScript(b,d)}:l.compileScript(b,c,!0)}function C(b,d){void 0===d&&(d=[]);return m.parseScript(b,d)}function c(b,d){if(!0===
d.useAsync||!0===b.isAsync){if(null===R)throw Error("Async Arcade must be enabled for this script");return R.executeScript(b,d)}return r.executeScript(b,d)}function w(b,d){return r.referencesMember(b,d)}function y(b,d){void 0===d&&(d=[]);void 0===b.usesGeometry&&q.findScriptDependencies(b,d);return!0===b.usesGeometry}function D(){return U?U:U=a.create(function(b,d){v(["../geometry/geometryEngine","./functions/geomsync"],function(d,c){I=!0;c.setGeometryEngine(d);b(!0)},function(b){d(b)})})}function E(){return null!==
J?J:J=l.enableAsyncSupport().then(function(){return a.create(function(b,d){v(["./arcadeAsyncRuntime"],function(c){try{R=c;c=0;for(var k=t;c<k.length;c++){var a=k[c];R.extend(a);l.extend(a,"async")}t=null;b(!0)}catch(Y){d(Y)}},d)})})}function V(){return R?!0:!1}function da(){return ea?ea:ea=E().then(function(){return a.create(function(b,d){v(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(c,k,a,e,
g){try{T=c,R.extend([k,a,e,g]),l.extend([k,a,e,g],"async"),N=!0,b(!0)}catch(S){d(S)}},d)})})}function F(b,d){void 0===d&&(d=[]);void 0===b.usesFeatureSet&&q.findScriptDependencies(b,d);return!0===b.usesFeatureSet}function b(b,d){if(d)for(var c=0;c<d.length;c++)if(w(b,d[c]))return!0;return!1}function k(){return null!==aa?aa:aa=g.loadMoment().then(function(b){n.MomentLibrary.Moment=b;return!0})}Object.defineProperty(h,"__esModule",{value:!0});var d=function(){if(f("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(ta){return!1}}(),
N=!1,I=!1,R=null,t=[];h.compileScript=function(b,d){return!0===d.useAsync||!0===b.isAsync?e(b,d):f("csp-restrictions")?function(d){return r.executeScript(b,d)}:l.compileScript(b,d)};h.extend=function(b){r.extend(b);l.extend(b,"sync");null===R?t.push(b):(l.extend(b,"async"),R.extend(b))};h.parseScript=C;h.validateScript=function(b,d,c){void 0===c&&(c="");return m.validateScript(b,d,c)};h.scriptCheck=function(b,d,c,k){void 0===k&&(k="");return m.scriptCheck(b,d,c,k)};h.parseAndExecuteScript=function(b,
d,k){void 0===k&&(k=[]);b=m.parseScript(b,k);return c(b,d)};h.executeScript=c;h.referencesMember=w;h.referencesFunction=function(b,d){return r.referencesFunction(b,d)};h.extractFieldLiterals=function(b,d){void 0===d&&(d=!1);return m.extractFieldLiterals(b,d)};h.scriptUsesGeometryEngine=y;var U=null;h.enableGeometrySupport=D;var J=null;h.enableAsyncSupport=E;h.isFeatureSetSupportEnabled=function(){return N};h.isAsyncEnabled=V;h.isGeometryEnabled=function(){return I};var ea=null;h.enableFeatureSetSupport=
da;h.scriptUsesFeatureSet=F;h.scriptIsAsync=function(b,d){void 0===d&&(d=[]);void 0===b.isAsync&&q.findScriptDependencies(b,d);return!0===b.isAsync};h.loadScriptDependencies=function(d,c,e,g){void 0===e&&(e=[]);void 0===g&&(g=!1);return a.create(function(f,w){var m="string"===typeof d?C(d):d,n=[];n.push(k());m&&(!1===I&&(y(m)||g)&&n.push(D()),!1===V()&&(!0===m.isAsync||c)&&n.push(E()),!1===N&&(F(m)||b(m,e))&&n.push(da()));n?a.all(n).then(function(){f(!0)},w):f(!0)})};h.scriptTouchesGeometry=function(b){if(y(b))return!0;
b=q.findFunctionCalls(b);return-1<b.indexOf("geometry")||-1<b.indexOf("feature")?!0:!1};var T=null;h.featureSetUtils=function(){return T};h.load=k;var aa=null})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(v,h,l,r,n,m,q,f,a,g,e,C,c,w,y,D,E,V,da,F,b,k,d,N){function I(b,d,c){try{return c(b,null,d)}catch(ga){throw ga;}}function R(b){return b instanceof Error?E.reject(b):E.reject(Error(b))}function t(b,d){try{switch(d.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return aa(b,d);case "VariableDeclaration":for(var c=[],k=0;k<d.declarations.length;k++)c.push(t(b,d.declarations[k]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return T(b,
d);case "FunctionDeclaration":var a=d.id.name.toLowerCase(),e={isAsync:b.isAsync,spatialReference:b.spatialReference,console:b.console,lrucache:b.lrucache,services:b.services,symbols:b.symbols,mangleMap:b.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:b.depthCounter+1,globalScope:b.globalScope};if(64<e.depthCounter)throw Error("Exceeded maximum function depth");for(var c="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",
f=0;f<d.params.length;f++){var w=d.params[f].name.toLowerCase(),qa=ca(b);e.localScope._SymbolsMap[w]=qa;e.mangleMap[w]=qa;c+="lscope['"+qa+"']\x3darguments["+f.toString()+"];\n"}!0===b.isAsync?(c=c+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(T(e,d.body)+"\n return lastStatement; "),c+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(c+=T(e,d.body)+"\n return lastStatement; }, runtimeCtx))",c+="\n lastStatement \x3d lc.voidOperation; \n");void 0!==b.globalScope[a]?
k="gscope['"+a+"']\x3d"+c:void 0!==b.globalScope._SymbolsMap[a]?k="gscope['"+b.globalScope._SymbolsMap[a]+"']\x3d"+c:(qa=ca(b),b.globalScope._SymbolsMap[a]=qa,b.mangleMap[a]=qa,k="gscope['"+qa+"']\x3d"+c);return k;case "ReturnStatement":var m;m=null===d.argument?"return lc.voidOperation":"return "+t(b,d.argument)+"";return m;case "IfStatement":if("AssignmentExpression"===d.test.type||"UpdateExpression"===d.test.type)throw Error(g.nodeErrorMessage(d.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
var Ga=t(b,d.test),ka=ha(b),ia="var "+ka+" \x3d "+Ga+";\n if ("+ka+" \x3d\x3d\x3d true) {\n"+ea(b,d.consequent)+"\n }\n",ia=null!==d.alternate?ia+("else if ("+ka+"\x3d\x3d\x3dfalse)   { \n"+ea(b,d.alternate)+"}\n"):ia+("else if ("+ka+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return ia+="else { lang.error({type: '"+d.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var y;y="AssignmentExpression"===d.expression.type?"lastStatement \x3d lc.voidOperation; "+
t(b,d.expression)+"; \n ":"lastStatement \x3d "+t(b,d.expression)+"; ";return y;case "AssignmentExpression":return J(b,d);case "UpdateExpression":return U(b,d);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==d.init&&(c+=t(b,d.init)+"; ");var n=ha(b),C=ha(b),c=c+("var "+n+" \x3d true; ")+"\n do { ";null!==d.update&&(c+=" if ("+n+"\x3d\x3d\x3dfalse) {\n "+t(b,d.update)+"  \n}\n "+n+"\x3dfalse; \n");
null!==d.test&&(c+="var "+C+" \x3d "+t(b,d.test)+"; ",c+="if ("+C+"\x3d\x3d\x3dfalse) { break; } else if ("+C+"!\x3d\x3dtrue) { lang.error({type: '"+d.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=t(b,d.body);null!==d.update&&(c+="\n "+t(b,d.update));return c+("\n"+n+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var D=ha(b),h=ha(b),N=ha(b),l="var "+D+" \x3d "+t(b,d.right)+";\n";"VariableDeclaration"===d.left.type&&(l+=t(b,d.left));
var F="VariableDeclaration"===d.left.type?d.left.declarations[0].id.name:d.left.name,F=F.toLowerCase(),c="";null!==b.localScope&&(void 0!==b.localScope[F]?c="lscope['"+F+"']":void 0!==b.localScope._SymbolsMap[F]&&(c="lscope['"+b.localScope._SymbolsMap[F]+"']"));""===c&&(void 0!==b.globalScope[F]?c="gscope['"+F+"']":void 0!==b.globalScope._SymbolsMap[F]&&(c="gscope['"+b.globalScope._SymbolsMap[F]+"']"));l=l+("if ("+D+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+
D+") || lc.isString("+D+")) {")+("var "+h+"\x3d"+D+".length; \n")+("for(var "+N+"\x3d0; "+N+"\x3c"+h+"; "+N+"++) {\n");l+=c+"\x3d"+N+";\n";l+=t(b,d.body);l+="\n}\n";l+=" lastStatement \x3d lc.voidOperation; \n";l+=" \n}\n";l+="else if (lc.isImmutableArray("+D+")) {";l=l+("var "+h+"\x3d"+D+".length(); \n")+("for(var "+N+"\x3d0; "+N+"\x3c"+h+"; "+N+"++) {\n");l+=c+"\x3d"+N+";\n";l+=t(b,d.body);l+="\n}\n";l+=" lastStatement \x3d lc.voidOperation; \n";l+=" \n}\n";l+="else if (( "+D+" instanceof lang.Dictionary) || ( "+
D+" instanceof lang.Feature)) {";l=l+("var "+h+"\x3d"+D+".keys(); \n")+("for(var "+N+"\x3d0; "+N+"\x3c"+h+".length; "+N+"++) {\n");l+=c+"\x3d"+h+"["+N+"];\n";l+=t(b,d.body);l+="\n}\n";l+=" lastStatement \x3d lc.voidOperation; \n";l+=" \n}\n";b.isAsync&&(l+="else if (lc.isFeatureSet("+D+")) {",l=l+("var "+h+"\x3d"+D+".iterator(runtimeCtx.abortSignal); \n")+("for(var "+N+"\x3dlang. graphicToFeature( yield "+h+".next(),"+D+"); "+N+"!\x3dnull; "+N+"\x3dlang. graphicToFeature( yield "+h+".next(),"+D+")) {\n")+
(c+"\x3d"+N+";\n"),l+=t(b,d.body),l+="\n}\n",l+=" lastStatement \x3d lc.voidOperation; \n",l+=" \n}\n");return l+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return G(b,d);case "MemberExpression":var q;try{c=void 0,c=!0===d.computed?t(b,d.property):"'"+d.property.name+"'",q="lang.member("+t(b,d.object)+","+c+")"}catch(B){throw B;}return q;case "Literal":return null===d.value||void 0===d.value?"null":JSON.stringify(d.value);case "ThisExpression":throw Error(g.nodeErrorMessage(d,
"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==d.callee.type)throw Error(g.nodeErrorMessage(d,"RUNTIME","ONLYNODESSUPPORTED"));var fa=d.callee.name.toLowerCase(),k="";null!==b.localScope&&(void 0!==b.localScope[fa]?k="lscope['"+fa+"']":void 0!==b.localScope._SymbolsMap[fa]&&(k="lscope['"+b.localScope._SymbolsMap[fa]+"']"));""===k&&(void 0!==b.globalScope[fa]?k="gscope['"+fa+"']":void 0!==b.globalScope._SymbolsMap[fa]&&(k="gscope['"+b.globalScope._SymbolsMap[fa]+"']"));if(""!==
k){a="[";for(e=0;e<d.arguments.length;e++)0<e&&(a+=", "),a+=t(b,d.arguments[e]);a+="]";c=b.isAsync?"(yield lang.callfunc("+k+","+a+",runtimeCtx) )":"lang.callfunc("+k+","+a+",runtimeCtx)"}else throw Error(g.nodeErrorMessage(d,"RUNTIME","NOTFOUND"));}catch(B){throw B;}return c;case "UnaryExpression":var E;try{E="lang.unary("+t(b,d.argument)+",'"+d.operator+"')"}catch(B){throw B;}return E;case "BinaryExpression":var wa;try{wa="lang.binary("+t(b,d.left)+","+t(b,d.right)+",'"+d.operator+"')"}catch(B){throw B;
}return wa;case "LogicalExpression":var p;try{if("AssignmentExpression"===d.left.type||"UpdateExpression"===d.left.type)throw Error(g.nodeErrorMessage(d.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===d.right.type||"UpdateExpression"===d.right.type)throw Error(g.nodeErrorMessage(d.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===d.operator||"||"===d.operator)p="(lang.logicalCheck("+t(b,d.left)+") "+d.operator+" lang.logicalCheck("+t(b,d.right)+
"))";else throw Error(g.nodeErrorMessage(d,"RUNTIME","ONLYORORAND"));}catch(B){throw B;}return p;case "ConditionalExpression":throw Error(g.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(k=0;k<d.elements.length;k++)"Literal"===d.elements[k].type?c.push(t(b,d.elements[k])):c.push("lang.aCheck("+t(b,d.elements[k])+",'ArrayExpression')");f="["+c.join(",")+"]"}catch(B){throw B;}return f;case "ObjectExpression":c="lang.dictionary([";for(k=0;k<d.properties.length;k++){var V=
d.properties[k],ra="Identifier"===V.key.type?"'"+V.key.name+"'":t(b,V.key),r=t(b,V.value);0<k&&(c+=",");c+="lang.strCheck("+ra+",'ObjectExpression'),lang.aCheck("+r+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(g.nodeErrorMessage(d,"RUNTIME","NOTSUPPORTED"));default:throw Error(g.nodeErrorMessage(d,"RUNTIME","UNREOGNISED"));}}catch(B){throw B;}}function U(b,d){var c=null,k="";if("MemberExpression"===d.argument.type)return c=t(b,d.argument.object),
k=!0===d.argument.computed?t(b,d.argument.property):"'"+d.argument.property.name+"'","lang.memberupdate("+c+","+k+",'"+d.operator+"',"+d.prefix+")";c=d.argument.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[c])return"lang.update(lscope, '"+c+"','"+d.operator+"',"+d.prefix+")";if(void 0!==b.localScope._SymbolsMap[c])return"lang.update(lscope, '"+b.localScope._SymbolsMap[c]+"','"+d.operator+"',"+d.prefix+")"}if(void 0!==b.globalScope[c])return"lang.update(gscope, '"+c+"','"+d.operator+
"',"+d.prefix+")";if(void 0!==b.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+b.globalScope._SymbolsMap[c]+"','"+d.operator+"',"+d.prefix+")";throw Error("Variable not recognised");}function J(b,d){var c=t(b,d.right),k=null,a="";if("MemberExpression"===d.left.type)return k=t(b,d.left.object),a=!0===d.left.computed?t(b,d.left.property):"'"+d.left.property.name+"'","lang.assignmember("+k+","+a+",'"+d.operator+"',"+c+")";k=d.left.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[k])return"lscope['"+
k+"']\x3dlang.assign("+c+",'"+d.operator+"', lscope['"+k+"'])";if(void 0!==b.localScope._SymbolsMap[k])return"lscope['"+b.localScope._SymbolsMap[k]+"']\x3dlang.assign("+c+",'"+d.operator+"', lscope['"+b.localScope._SymbolsMap[k]+"'])"}if(void 0!==b.globalScope[k])return"gscope['"+k+"']\x3dlang.assign("+c+",'"+d.operator+"', gscope['"+k+"'])";if(void 0!==b.globalScope._SymbolsMap[k])return"gscope['"+b.globalScope._SymbolsMap[k]+"']\x3dlang.assign("+c+",'"+d.operator+"', gscope['"+b.globalScope._SymbolsMap[k]+
"'])";throw Error("Variable not recognised");}function ea(b,d){return"BlockStatement"===d.type?t(b,d):"ReturnStatement"===d.type||"BreakStatement"===d.type||"ContinueStatement"===d.type?t(b,d)+"; ":"UpdateExpression"===d.type?"lastStatement \x3d "+t(b,d)+"; ":"ExpressionStatement"===d.type?t(b,d):"ObjectExpression"===d.type?"lastStatement \x3d "+t(b,d)+"; ":t(b,d)+"; "}function T(b,d){for(var c="",k=0;k<d.body.length;k++)c="ReturnStatement"===d.body[k].type?c+(t(b,d.body[k])+"; \n"):"BreakStatement"===
d.body[k].type?c+(t(b,d.body[k])+"; \n"):"ContinueStatement"===d.body[k].type?c+(t(b,d.body[k])+"; \n"):"UpdateExpression"===d.body[k].type?c+("lastStatement \x3d "+t(b,d.body[k])+"; \n"):"ObjectExpression"===d.body[k].type?c+("lastStatement \x3d "+t(b,d.body[k])+"; \n"):c+(t(b,d.body[k])+" \n");return c}function aa(b,d){var c=null===d.init?null:t(b,d.init);c===a.voidOperation&&(c=null);d=d.id.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[d])return"lscope['"+d+"']\x3d"+c+"; ";
if(void 0!==b.localScope._SymbolsMap[d])return"lscope['"+b.localScope._SymbolsMap[d]+"']\x3d"+c+"; ";var k=ca(b);b.localScope._SymbolsMap[d]=k;b.mangleMap[d]=k;return"lscope['"+k+"']\x3d"+c+"; "}if(void 0!==b.globalScope[d])return"gscope['"+d+"']\x3d"+c+"; ";if(void 0!==b.globalScope._SymbolsMap[d])return"gscope['"+b.globalScope._SymbolsMap[d]+"']\x3d"+c+"; ";k=ca(b);b.globalScope._SymbolsMap[d]=k;b.mangleMap[d]=k;return"gscope['"+k+"']\x3d"+c+"; "}function ta(b,d,c){d=d.toLowerCase();switch(d){case "hasz":return b=
b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return d=b.spatialReference._arcadeCacheId,void 0===d&&(c=!0,Object.freeze&&Object.isFrozen(b.spatialReference)&&(c=!1),c&&(na++,d=b.spatialReference._arcadeCacheId=na)),b=new n({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),void 0!==d&&(b._arcadeCacheId="SPREF"+d.toString()),b}switch(b.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=
b[d],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=b.cache._arcadeCacheId,void 0===d&&(na++,d=na,b.cache._arcadeCacheId=d),b=new q(b.rings,b.spatialReference,!0===b.hasZ,!0===b.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==b[d]?b[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=b.cache._arcadeCacheId,void 0===d&&(na++,d=na,b.cache._arcadeCacheId=
d),b=new q(b.paths,b.spatialReference,!0===b.hasZ,!0===b.hasM,d);case "type":return"Polyline"}break;case "multipoint":switch(d){case "points":return d=b.cache._arcadeCacheId,void 0===d&&(na++,d=na,b.cache._arcadeCacheId=d),b=new f(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,d,1);case "type":return"Multipoint"}}throw Error(g.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function G(b,d){try{var c=d.name.toLowerCase();if(null!==b.localScope){if(void 0!==b.localScope[c])return"lscope['"+
c+"']";if(void 0!==b.localScope._SymbolsMap[c])return"lscope['"+b.localScope._SymbolsMap[c]+"']"}if(void 0!==b.globalScope[c])return"gscope['"+c+"']";if(void 0!==b.globalScope._SymbolsMap[c])return"gscope['"+b.globalScope._SymbolsMap[c]+"']";throw Error(g.nodeErrorMessage(d,"RUNTIME","VARIABLENOTFOUND"));}catch(ga){throw ga;}}function ba(c){return null===c?"":a.isArray(c)||a.isImmutableArray(c)?"Array":a.isDate(c)?"Date":a.isString(c)?"String":a.isBoolean(c)?"Boolean":a.isNumber(c)?"Number":c instanceof
r?"Attachment":c instanceof l?"Portal":c instanceof n?"Dictionary":c instanceof m?"Feature":c instanceof b?"Point":c instanceof k?"Polygon":c instanceof d?"Polyline":c instanceof F?"Multipoint":c instanceof V?"Extent":a.isFunctionParameter(c)?"Function":a.isFeatureSet(c)?"FeatureSet":a.isFeatureSetCollection(c)?"FeatureSetCollection":c===a.voidOperation?"":"number"===typeof c&&isNaN(c)?"Number":"Unrecognised Type"}function M(b,d,c,k){try{if(a.equalityTest(d[c],k))return d[c+1];var e=d.length-c;return 1===
e?d[c]:2===e?null:3===e?d[c+2]:M(b,d,c+2,k)}catch(sa){throw sa;}}function la(b,d,c,k){try{if(!0===k)return d[c+1];if(3===d.length-c)return d[c+2];var e=d[c+2];if(!1===a.isBoolean(e))throw Error("WHEN needs boolean test conditions");return la(b,d,c+2,e)}catch(sa){throw sa;}}function Y(b,d){var c=b.length,k=Math.floor(c/2);if(0===c)return[];if(1===c)return[b[0]];var a=Y(b.slice(0,k),d);b=Y(b.slice(k,c),d);for(c=[];0<a.length||0<b.length;)0<a.length&&0<b.length?(k=d(a[0],b[0]),isNaN(k)&&(k=0),0>=k?(c.push(a[0]),
a=a.slice(1)):(c.push(b[0]),b=b.slice(1))):0<a.length?(c.push(a[0]),a=a.slice(1)):0<b.length&&(c.push(b[0]),b=b.slice(1));return c}function u(b,d){try{var c=b.length,k=Math.floor(c/2);if(0===c)return E.resolve([]);if(1===c)return E.resolve([b[0]]);var a=[u(b.slice(0,k),d),u(b.slice(k,c),d)];return E.all(a).then(function(b){return S(b[0],b[1],d,[])})}catch(sa){return E.reject(sa)}}function S(b,d,c,k){return E.create(function(a,e){0<b.length||0<d.length?0<b.length&&0<d.length?c(b[0],d[0]).then(function(g){try{isNaN(g)&&
(g=1),0>=g?(k.push(b[0]),b=b.slice(1)):(k.push(d[0]),d=d.slice(1)),S(b,d,c,k).then(function(b){a(b)},e)}catch(Da){e(Da)}},e):0<b.length?(k.push(b[0]),b=b.slice(1),S(b,d,c,k).then(function(b){a(b)},e)):0<d.length&&(k.push(d[0]),d=d.slice(1),S(b,d,c,k).then(function(b){a(b)},e)):a(k)})}function ca(b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}function ha(b){b.symbols.symbolCounter++;return"_Tvar"+b.symbols.symbolCounter.toString()}function fa(b,d,c){var k={};b||(b={});c||
(c={});k._SymbolsMap={};k.textformatting=1;k.infinity=1;k.pi=1;for(var a in d)k[a]=1;for(a in c)k[a]=1;for(a in b)k[a]=1;return k}function za(b,d){for(var c={mode:d,compiled:!0,functions:{},signatures:[],failDefferred:R,standardFunction:I,standardFunctionAsync:I,evaluateIdentifier:oa},k=0;k<b.length;k++)b[k].registerFunctions(c);if("sync"===d){for(var e in c.functions)Q[e]=new a.NativeFunction(c.functions[e]),wa.prototype[e]=Q[e];for(k=0;k<c.signatures.length;k++)g.addFunctionDeclaration(c.signatures[k],
"sync")}else{for(e in c.functions)ia[e]=new a.NativeFunction(c.functions[e]),ja.prototype[e]=ia[e];for(k=0;k<c.signatures.length;k++)g.addFunctionDeclaration(c.signatures[k],"async")}}function oa(b,d){d=d.name;if("_SymbolsMap"===d)throw"Illegal";if(0<b.localStack.length){if("_t"!==d.substr(0,2).toLowerCase()&&void 0!==b.localStack[b.localStack.length-1][d])return b.localStack[b.localStack.length-1][d];var c=b.mangleMap[d];if(void 0!==c&&void 0!==b.localStack[b.localStack.length-1][c])return b.localStack[b.localStack.length-
1][c]}if("_t"!==d.substr(0,2).toLowerCase()&&void 0!==b.globalScope[d]||1===b.globalScope._SymbolsMap[d])return b.globalScope[d];d=b.mangleMap[d];if(void 0!==d)return b.globalScope[d]}function Z(b){console.log(b)}Object.defineProperty(h,"__esModule",{value:!0});var na=0,Q={};e.registerFunctions(Q,I);D.registerFunctions(Q,I);w.registerFunctions(Q,I);C.registerFunctions(Q,I);y.registerFunctions(Q,I);Q["typeof"]=function(b,d){return I(b,d,function(b,d,c){a.pcCheck(c,1,1);b=ba(c[0]);if("Unrecognised Type"===
b)throw Error("Unrecognised Type");return b})};Q.iif=function(b,d){try{return I(b,d,function(b,d,c){a.pcCheck(c,3,3);if(!1===a.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(va){throw va;}};Q.decode=function(b,d){try{return I(b,d,function(d,c,k){if(2>k.length)throw Error("Missing Parameters");if(2===k.length)return k[1];if(0===(k.length-1)%2)throw Error("Must have a default value result.");return M(b,k,1,k[0])})}catch(va){throw va;}};Q.when=
function(b,d){try{return I(b,d,function(d,c,k){if(3>k.length)throw Error("Missing Parameters");if(0===k.length%2)throw Error("Must have a default value result.");d=k[0];if(!1===a.isBoolean(d))throw Error("WHEN needs boolean test conditions");return la(b,k,0,d)})}catch(va){throw va;}};Q.top=function(b,d){return I(b,d,function(b,d,c){a.pcCheck(c,2,2);if(a.isArray(c[0]))return a.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,a.toNumber(c[1]));if(a.isImmutableArray(c[0]))return a.toNumber(c[1])>=
c[0].length()?c[0].slice(0):c[0].slice(0,a.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};Q.first=function(b,d){return I(b,d,function(b,d,c){a.pcCheck(c,1,1);return a.isArray(c[0])?0===c[0].length?null:c[0][0]:a.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};Q.sort=function(b,d){return I(b,d,function(d,c,k){a.pcCheck(k,1,2);c=k[0];a.isImmutableArray(c)&&(c=c.toArray());if(!1===a.isArray(c))throw Error("Illegal Argument");if(1<k.length){if(!1===a.isFunctionParameter(k[1]))throw Error("Illegal Argument");
var e=function(b,c){return pa.callfunc(k[1],[b,c],d)};return b.isAsync?u(c,e):c=Y(c,function(b,d){return e(b,d)})}if(0===c.length)return[];for(var g={},f=0;f<c.length;f++){var w=ba(c[f]);""!==w&&(g[w]=!0)}if(!0===g.Array||!0===g.Dictionary||!0===g.Feature||!0===g.Point||!0===g.Polygon||!0===g.Polyline||!0===g.Multipoint||!0===g.Extent||!0===g.Function)return c.slice(0);var f=0,w="",ha;for(ha in g)f++,w=ha;return c=1<f||"String"===w?Y(c,function(b,d){if(null===b||void 0===b||b===a.voidOperation)return null===
d||void 0===d||d===a.voidOperation?0:1;if(null===d||void 0===d||d===a.voidOperation)return-1;b=a.toString(b);d=a.toString(d);return b<d?-1:b===d?0:1}):"Number"===w?Y(c,function(b,d){return b-d}):"Boolean"===w?Y(c,function(b,d){return b===d?0:d?-1:1}):"Date"===w?Y(c,function(b,d){return d-b}):c.slice(0)})};var ia={},ka;for(ka in Q)ia[ka]=new a.NativeFunction(Q[ka]);c.registerFunctions(Q,I);for(ka in Q)Q[ka]=new a.NativeFunction(Q[ka]);var wa=function(){};wa.prototype=Q;var ja=function(){};ja.prototype=
ia;h.functionHelper={fixSpatialReference:a.fixSpatialReference,parseArguments:function(b,d){for(var c=[],k=0;k<d.arguments.length;k++)c.push(t(b,d.arguments[k]));return c},standardFunction:I};h.extend=za;h.executeScript=function(b,d){return b(d)};h.extractFieldLiterals=function(b,d){void 0===d&&(d=!1);return g.findFieldLiterals(b)};h.validateScript=function(b,d){return g.validateScript(b,d,"sync")};h.referencesMember=function(b,d){return g.referencesMember(b,d)};h.referencesFunction=function(b,d){return g.referencesFunction(b,
d)};var ra=0,pa={error:function(b,d,c){throw Error(g.nodeErrorMessage(b,d,c));},__awaiter:function(b,d,c,k){return E.create(function(c,a){function e(b){try{f(k.next(b))}catch(ya){a(ya)}}function g(b){try{f(k["throw"](b))}catch(ya){a(ya)}}function f(b){b.done?c(b.value):b.value&&b.value.then?b.value.then(e,g):(ra++,0===ra%100?setTimeout(function(){ra=0;e(b.value)},0):e(b.value))}f((k=k.apply(b,d||[])).next())})},functionDepthchecker:function(b,d){return function(){d.depthCounter++;d.localStack.push([]);
if(64<d.depthCounter)throw Error("Exceeded maximum function depth");var c=b.apply(this,arguments);if(E.isPromiseLike(c))return c.then(function(b){d.depthCounter--;--d.localStack.length;return b});d.depthCounter--;--d.localStack.length;return c}},aCheck:function(b,d){if(a.isFunctionParameter(b))throw Error(g.nodeErrorMessage({type:d},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return b===a.voidOperation?null:b},Dictionary:n,Feature:m,dictionary:function(b){for(var d={},c=0;c<b.length;c+=2){if(a.isFunctionParameter(b[c+
1]))throw Error("Illegal Argument");if(!1===a.isString(b[c]))throw Error("Illegal Argument");d[b[c].toString()]=b[c+1]===a.voidOperation?null:b[c+1]}b=new n(d);b.immutable=!1;return b},strCheck:function(b){if(!1===a.isString(b))throw Error("Illegal Argument");return b},unary:function(b,d){if(a.isBoolean(b)){if("!"===d)return!b;if("-"===d)return-1*a.toNumber(b);if("+"===d)return 1*a.toNumber(b);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:d,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));
}if("-"===d)return-1*a.toNumber(b);if("+"===d)return 1*a.toNumber(b);throw Error(g.nodeErrorMessage({type:"UnaryExpression",operator:d,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(b){if(!1===a.isBoolean(b))throw Error(g.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return b},logical:function(b,d,c){if(a.isBoolean(b)&&a.isBoolean(d))switch(c){case "||":return b||d;case "\x26\x26":return b&&d}throw Error(g.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(b,d,c){switch(c){case "\x3d\x3d":return a.equalityTest(b,d);case "\x3d":return a.equalityTest(b,d);case "!\x3d":return!a.equalityTest(b,d);case "\x3c":return a.greaterThanLessThan(b,d,c);case "\x3e":return a.greaterThanLessThan(b,d,c);case "\x3c\x3d":return a.greaterThanLessThan(b,d,c);case "\x3e\x3d":return a.greaterThanLessThan(b,d,c);case "+":return a.isString(b)||a.isString(d)?a.toString(b)+a.toString(d):a.toNumber(b)+
a.toNumber(d);case "-":return a.toNumber(b)-a.toNumber(d);case "*":return a.toNumber(b)*a.toNumber(d);case "/":return a.toNumber(b)/a.toNumber(d);case "%":return a.toNumber(b)%a.toNumber(d);default:throw Error(g.nodeErrorMessage({type:"BinaryExpression",operator:c,left:b,right:d},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(b,d,c){switch(d){case "\x3d":return b===a.voidOperation?null:b;case "/\x3d":return a.toNumber(c)/a.toNumber(b);case "*\x3d":return a.toNumber(c)*a.toNumber(b);case "-\x3d":return a.toNumber(c)-
a.toNumber(b);case "+\x3d":return a.isString(c)||a.isString(b)?a.toString(c)+a.toString(b):a.toNumber(c)+a.toNumber(b);case "%\x3d":return a.toNumber(c)%a.toNumber(b);default:throw Error(g.nodeErrorMessage({type:"AssignmentExpression",operator:d,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(b,d,c,k){var e=a.toNumber(b[d]);b[d]="++"===c?e+1:e-1;return!1===k?e:"++"===c?e+1:e-1},graphicToFeature:function(b,d){return null===b?null:m.createFromGraphicLikeObject(b.geometry,
b.attributes,d)},memberupdate:function(b,d,c,k){var e;if(a.isArray(b))if(a.isNumber(d)){0>d&&(d=b.length+d);if(0>d||d>=b.length)throw Error("Assignment outside of array bounds");e=a.toNumber(b[d]);b[d]="++"===c?e+1:e-1}else throw Error("Invalid Parameter");else if(b instanceof n){if(!1===a.isString(d))throw Error("Dictionary accessor must be a string");if(!0===b.hasField(d))e=a.toNumber(b.field(d)),b.setField(d,"++"===c?e+1:e-1);else throw Error("Invalid Parameter");}else if(b instanceof m){if(!1===
a.isString(d))throw Error("Feature accessor must be a string");if(!0===b.hasField(d))e=a.toNumber(b.field(d)),b.setField(d,"++"===c?e+1:e-1);else throw Error("Invalid Parameter");}else{if(a.isImmutableArray(b))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===k?e:"++"===c?e+1:e-1},assignmember:function(b,d,c,k){if(a.isArray(b))if(a.isNumber(d)){0>d&&(d=b.length+d);if(0>d||d>b.length)throw Error("Assignment outside of array bounds");if(d===b.length&&"\x3d"!==c)throw Error("Invalid Parameter");
b[d]=this.assign(k,c,b[d])}else throw Error("Invalid Parameter");else if(b instanceof n){if(!1===a.isString(d))throw Error("Dictionary accessor must be a string");if(!0===b.hasField(d))b.setField(d,this.assign(k,c,b.field(d)));else{if("\x3d"!==c)throw Error("Invalid Parameter");b.setField(d,this.assign(k,c,null))}}else if(b instanceof m){if(!1===a.isString(d))throw Error("Feature accessor must be a string");if(!0===b.hasField(d))b.setField(d,this.assign(k,c,b.field(d)));else{if("\x3d"!==c)throw Error("Invalid Parameter");
b.setField(d,this.assign(k,c,null))}}else{if(a.isImmutableArray(b))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(b,d){if(null===b)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(b instanceof n||b instanceof m){if(a.isString(d))return b.field(d);throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(b instanceof da){if(a.isString(d))return ta(b,
d,"MemberExpression");throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a.isArray(b)){if(a.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length+d);if(d>=b.length||0>d)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return b[d]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
}if(a.isString(b)){if(a.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length+d);if(d>=b.length||0>d)throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return b[d]}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(a.isImmutableArray(b)&&a.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=b.length()+d);if(d>=b.length()||0>d)throw Error(g.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return b.get(d)}throw Error(g.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(b,d,c){return b instanceof a.NativeFunction?b.fn(c,d):b instanceof a.SizzleFunction?b.fn.apply(this,d):b.apply(this,d)}};h.compileScript=function(b,d,c){void 0===d&&(d=null);void 0===c&&(c=!1);null===d&&(d={vars:{},customfunctions:{}});d={isAsync:c,globalScope:fa(d.vars,c?ia:
Q,d.customfunctions),localScope:null,mangleMap:{},console:Z,lrucache:d.lrucache,services:d.services,symbols:{symbolCounter:0}};b=t(d,b.body[0].body);""===b&&(b="lc.voidOperation; ");d={lc:a,lang:pa,mangles:d.mangleMap,postProcess:function(b){b instanceof a.ReturnResult&&(b=b.value);b instanceof a.ImplicitResult&&(b=b.value);b===a.voidOperation&&(b=null);if(b===a.breakResult)throw Error("Cannot return BREAK");if(b===a.continueResult)throw Error("Cannot return CONTINUE");if(a.isFunctionParameter(b))throw Error("Cannot return FUNCTION");
return b},prepare:function(b,d){var c=b.spatialReference;if(null===c||void 0===c)c=new N({wkid:102100});var k=b.vars,a=b.customfunctions,e=d?new ja:new wa;k||(k={});a||(a={});var g=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});g.immutable=!1;e._SymbolsMap={textformatting:1,infinity:1,pi:1};e.textformatting=g;e.infinity=Number.POSITIVE_INFINITY;e.pi=Math.PI;for(var f in a)e[f]=a[f],e._SymbolsMap[f]=1;for(f in k)e._SymbolsMap[f]=1,e[f]=k[f]&&"esri.Graphic"===
k[f].declaredClass?m.createFromGraphic(k[f]):k[f];return{localStack:[],isAsync:d,mangleMap:this.mangles,spatialReference:c,globalScope:e,abortSignal:void 0===b.abortSignal||null===b.abortSignal?{aborted:!1}:b.abortSignal,localScope:null,services:b.services,console:b.console?b.console:Z,lrucache:b.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",c?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
b+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+b+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(d)};h.enableAsyncSupport=function(){return E.create(function(b,d){v(["./functions/geomasync"],function(d){za([d],"async");b(!0)},function(b){d(b)})})}})},
"esri/arcade/ArcadePortal":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(v,h,l,r){return function(n){function m(m){var f=n.call(this)||this;f.immutable=!1;f.setField("url",m);f.immutable=!0;return f}l(m,n);return m}(r)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(v,h,l,r,n){function m(f){var a=null;if(null!==f)if(r.isNumber(f))a=r.toNumber(f);else if(r.isBoolean(f))a=
r.toBoolean(f);else if(r.isString(f))a=r.toString(f);else if(r.isDate(f))a=r.toDate(f);else if(r.isArray(f))for(var a=[],g=0;g<f.length;g++)a.push(m(f[g]));else{if(0===Object.keys(f).length)return null;a=new q;a.immutable=!1;for(var g=0,e=Object.keys(f);g<e.length;g++){var n=e[g];a.setField(n,m(f[n]))}a.immutable=!0}return a}var q=function(){function f(a){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=a instanceof f?a.attributes:void 0===
a?{}:null===a?{}:a}f.prototype.field=function(a){var g=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var e in this.attributes)if(e.toLowerCase()===g)return this.attributes[e];throw Error("Field not Found");};f.prototype.setField=function(a,g){if(this.immutable)throw Error("Dictionary is Immutable");var e=a.toLowerCase();if(void 0===this.attributes[a])for(var f in this.attributes)if(f.toLowerCase()===e){this.attributes[f]=g;return}this.attributes[a]=g};f.prototype.hasField=function(a){var g=
a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var e in this.attributes)if(e.toLowerCase()===g)return!0;return!1};f.prototype.keys=function(){var a=[],g;for(g in this.attributes)a.push(g);return a=a.sort()};f.prototype.castToText=function(){var a="",g;for(g in this.attributes){""!==a&&(a+=",");var e=this.attributes[g];null==e?a+=JSON.stringify(g)+":null":r.isBoolean(e)||r.isNumber(e)||r.isString(e)?a+=JSON.stringify(g)+":"+JSON.stringify(e):e instanceof n?a+=JSON.stringify(g)+":"+r.toStringExplicit(e):
e instanceof l?a+=JSON.stringify(g)+":"+r.toStringExplicit(e):e instanceof Array?a+=JSON.stringify(g)+":"+r.toStringExplicit(e):e instanceof Date?a+=JSON.stringify(g)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(a+=JSON.stringify(g)+":"+e.castToText())}return"{"+a+"}"};f.convertObjectToArcadeDictionary=function(a){var g=new f;g.immutable=!1;for(var e in a)g.setField(e.toString(),m(a[e]));g.immutable=!0;return g};return f}();return q})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(v,h){return function(){function l(l){void 0===l&&(l=[]);this._elements=l}l.prototype.length=function(){return this._elements.length};l.prototype.get=function(l){return this._elements[l]};l.prototype.toArray=function(){for(var l=[],n=0;n<this.length();n++)l.push(this.get(n));return l};return l}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../core/number ../core/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/support/coordsUtils ../core/maybe".split(" "),
function(v,h,l,r,n,m,q,f,a,g,e,C,c,w,y,D){function E(b,d,c){return""===d||null===d||void 0===d||d===c||d===c?b:b=b.split(d).join(c)}function V(b){return b instanceof u||b instanceof l||b instanceof S}function da(d){return F(d)||k(d)||I(d)||b(d)||null===d||d===h.voidOperation||"number"===typeof d?!0:!1}function F(b){return"string"===typeof b||b instanceof String}function b(b){return"boolean"===typeof b}function k(b){return"number"===typeof b}function d(b){return b instanceof Array}function N(b){return b instanceof
r}function I(b){return b instanceof Date}function R(b,d){if(!1===isNaN(b)){if(void 0===d||null===d||""===d)return b.toString();d=E(d,"\u2030","");d=E(d,"\u00a4","");return q.format(b,{pattern:d})}return b.toString()}function t(b,d){b=h.MomentLibrary.Moment(b);return void 0===d||null===d||""===d?b.format():b.format(U(d))}function U(b){return b.replace(/(LTS)|L|l/g,function(b){return"["+b+"]"})}function J(b,d,c){switch(c){case "\x3e":return b>d;case "\x3c":return b<d;case "\x3e\x3d":return b>=d;case "\x3c\x3d":return b<=
d}return!1}function ea(b,d){if(b===d||null===b&&d===h.voidOperation||null===d&&b===h.voidOperation)return!0;if(I(b)&&I(d))return b.getTime()===d.getTime();if(b instanceof n||b instanceof m)return b.equalityTest(d);if(b instanceof C&&d instanceof C){var c=void 0,k=void 0,c=b.cache._arcadeCacheId,k=d.cache._arcadeCacheId;if(void 0!==c&&null!==c)return c===k}return void 0!==b&&void 0!==d&&null!==b&&null!==d&&"object"===typeof b&&"object"===typeof d&&(b._arcadeCacheId===d._arcadeCacheId&&void 0!==b._arcadeCacheId&&
null!==b._arcadeCacheId||b._underlyingGraphic===d._underlyingGraphic&&void 0!==b._underlyingGraphic&&null!==b._underlyingGraphic)?!0:!1}function T(c,a){if(F(c))return c;if(null===c)return"";if(k(c))return R(c,a);if(b(c))return c.toString();if(I(c))return t(c,a);if(c instanceof g)return JSON.stringify(c.toJSON());if(d(c)){a=[];for(var e=0;e<c.length;e++)a[e]=ta(c[e]);return"["+a.join(",")+"]"}if(c instanceof r){a=[];for(e=0;e<c.length();e++)a[e]=ta(c.get(e));return"["+a.join(",")+"]"}return null!==
c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():V(c)?"object, Function":""}function aa(c,e){if(F(c))return c;if(null===c)return"";if(k(c))return R(c,e);if(b(c))return c.toString();if(I(c))return t(c,e);if(c instanceof g)return c instanceof a?'{"xmin":'+c.xmin.toString()+',"ymin":'+c.ymin.toString()+","+(c.hasZ?'"zmin":'+c.zmin.toString()+",":"")+(c.hasM?'"mmin":'+c.mmin.toString()+",":"")+'"xmax":'+c.xmax.toString()+',"ymax":'+c.ymax.toString()+","+(c.hasZ?'"zmax":'+c.zmax.toString()+
",":"")+(c.hasM?'"mmax":'+c.mmax.toString()+",":"")+'"spatialReference":'+M(c.spatialReference)+"}":M(c.toJSON(),function(b,d){return b.key===d.key?0:"spatialReference"===b.key?1:"spatialReference"===d.key||b.key<d.key?-1:b.key>d.key?1:0});if(d(c)){e=[];for(var f=0;f<c.length;f++)e[f]=ta(c[f]);return"["+e.join(",")+"]"}if(c instanceof r){e=[];for(f=0;f<c.length();f++)e[f]=ta(c.get(f));return"["+e.join(",")+"]"}return null!==c&&"object"===typeof c&&void 0!==c.castToText?c.castToText():V(c)?"object, Function":
""}function ta(d){return null===d?"null":b(d)||k(d)||F(d)?JSON.stringify(d):d instanceof g||d instanceof r||d instanceof Array?aa(d):d instanceof Date?JSON.stringify(t(d,"")):null!==d&&"object"===typeof d&&void 0!==d.castToText?d.castToText():"null"}function G(c,a){return k(c)?c:null===c||""===c?0:I(c)?NaN:b(c)?c?1:0:d(c)||""===c||void 0===c?NaN:void 0!==a&&F(c)?(a=E(a,"\u2030",""),a=E(a,"\u00a4",""),q.parse(c,{pattern:a})):c===h.voidOperation?0:Number(c)}function ba(b,d){var c;d.fields.some(function(d){d.name===
b&&(c=d.domain);return!!c});return c}function M(b,d){d||(d={});"function"===typeof d&&(d={cmp:d});var c="boolean"===typeof d.cycles?d.cycles:!1,k=d.cmp&&function(b){return function(d){return function(c,k){return b({key:c,value:d[c]},{key:k,value:d[k]})}}}(d.cmp),a=[];return function Q(b){b&&b.toJSON&&"function"===typeof b.toJSON&&(b=b.toJSON());if(void 0!==b){if("number"===typeof b)return isFinite(b)?""+b:"null";if("object"!==typeof b)return JSON.stringify(b);var d,e;if(Array.isArray(b)){e="[";for(d=
0;d<b.length;d++)d&&(e+=","),e+=Q(b[d])||"null";return e+"]"}if(null===b)return"null";if(-1!==a.indexOf(b)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var g=a.push(b)-1,f=Object.keys(b).sort(k&&k(b));e="";for(d=0;d<f.length;d++){var w=f[d],m=Q(b[w]);m&&(e&&(e+=","),e+=JSON.stringify(w)+":"+m)}a.splice(g,1);return"{"+e+"}"}}(b)}function la(b,d){if(d instanceof C)b.push(d.hasZ?d.hasM?[d.x,d.y,d.z,d.m]:[d.x,d.y,d.z]:[d.x,d.y]);else throw Error("Invalid Argument");
}Object.defineProperty(h,"__esModule",{value:!0});v=function(){return function(b){this.value=b}}();h.ReturnResultE=v;var Y=function(){return function(b){this.value=b}}();h.ImplicitResultE=Y;var u=function(){return function(b){this.fn=b}}();h.NativeFunctionE=u;var S=function(){return function(b){this.fn=b}}();h.SizzleFunctionE=S;h.NativeFunction=u;h.ImplicitResult=Y;h.ReturnResult=v;h.SizzleFunction=S;h.voidOperation={type:"VOID"};h.breakResult={type:"BREAK"};h.continueResult={type:"CONTINUE"};h.multiReplace=
E;h.isFunctionParameter=V;h.isSimpleType=da;h.defaultUndefined=function(b,d){return void 0===b?d:b};h.isString=F;h.isBoolean=b;h.isNumber=k;h.isArray=d;h.isFeatureSet=function(b){return!0===(b&&b.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===b.declaredRootClass)};h.isFeatureSetCollection=function(b){return!0===(b&&b.declaredRootClass&&"esri.arcade.featureSetCollection"===b.declaredRootClass)};h.isImmutableArray=N;h.isDate=I;h.pcCheck=function(b,d,c){if(b.length<d||b.length>c)throw Error("Function called with wrong number of Parameters");
};h.generateUUID=function(){var b=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var c=(b+16*Math.random())%16|0;b=Math.floor(b/16);return("x"===d?c:c&3|8).toString(16)})};h.formatNumber=R;h.formatDate=t;h.standardiseDateFormat=U;h.greaterThanLessThan=function(d,c,a){if(null===d){if(null===c||c===h.voidOperation)return J(null,null,a);if(k(c))return J(0,c,a);if(F(c)||b(c))return J(0,G(c),a);if(I(c))return J(0,c.getTime(),a)}if(d===h.voidOperation){if(null===
c||c===h.voidOperation)return J(null,null,a);if(k(c))return J(0,c,a);if(F(c)||b(c))return J(0,G(c),a);if(I(c))return J(0,c.getTime(),a)}else if(k(d)){if(k(c))return J(d,c,a);if(b(c))return J(d,G(c),a);if(null===c||c===h.voidOperation)return J(d,0,a);if(F(c))return J(d,G(c),a);if(I(c))return J(d,c.getTime(),a)}else if(F(d)){if(F(c))return J(T(d),T(c),a);if(I(c))return J(G(d),c.getTime(),a);if(k(c))return J(G(d),c,a);if(null===c||c===h.voidOperation)return J(G(d),0,a);if(b(c))return J(G(d),G(c),a)}else if(I(d)){if(I(c))return J(d,
c,a);if(null===c||c===h.voidOperation)return J(d.getTime(),0,a);if(k(c))return J(d.getTime(),c,a);if(b(c)||F(c))return J(d.getTime(),G(c),a)}else if(b(d)){if(b(c))return J(d,c,a);if(k(c))return J(G(d),G(c),a);if(I(c))return J(G(d),c.getTime(),a);if(null===c||c===h.voidOperation)return J(G(d),0,a);if(F(c))return J(G(d),G(c),a)}return!ea(d,c)||"\x3c\x3d"!==a&&"\x3e\x3d"!==a?!1:!0};h.equalityTest=ea;h.toString=T;h.toNumberArray=function(b){var c=[];if(!1===d(b))return null;if(b instanceof r){for(var k=
0;k<b.length();k++)c[k]=G(b.get(k));return c}for(k=0;k<b.length;k++)c[k]=G(b[k]);return c};h.toStringExplicit=aa;h.toNumber=G;h.toDate=function(b,d){return I(b)?b:F(b)&&(b=h.MomentLibrary.Moment(b,[void 0===d||null===d||""===d?h.MomentLibrary.Moment.ISO_8601:d]),b.isValid())?b.toDate():null};h.toDateM=function(b,d){return I(b)?h.MomentLibrary.Moment(b):F(b)&&(b=h.MomentLibrary.Moment(b,[void 0===d||null===d||""===d?h.MomentLibrary.Moment.ISO_8601:d]),b.isValid())?b:null};h.toBoolean=function(d){return b(d)?
d:F(d)?(d=d.toLowerCase(),"true"===d?!0:!1):k(d)?0===d||isNaN(d)?!1:!0:!1};h.fixSpatialReference=function(b,d){if(D.isNone(b))return null;if(null===b.spatialReference||void 0===b.spatialReference)b.spatialReference=d;return b};h.fixNullGeometry=function(b){return null===b?null:b instanceof C?"NaN"===b.x||null===b.x||isNaN(b.x)?null:b:b instanceof c?0===b.rings.length?null:b:b instanceof w?0===b.paths.length?null:b:b instanceof e?0===b.points.length?null:b:b instanceof a?"NaN"===b.xmin||null===b.xmin||
isNaN(b.xmin)?null:b:null};h.getDomainValue=function(b,d){if(!b||!b.domain)return d;var c=null;if("string"===b.field.type||"esriFieldTypeString"===b.field.type)d=T(d);else{if(null===d||void 0===d)return null;if(""===d)return d;d=G(d)}for(var k=0;k<b.domain.codedValues.length;k++){var a=b.domain.codedValues[k];a.code===d&&(c=a)}return null===c?d:c.name};h.getDomainCode=function(b,d){if(!b||!b.domain)return d;var c=null;d=T(d);for(var k=0;k<b.domain.codedValues.length;k++){var a=b.domain.codedValues[k];
a.name===d&&(c=a)}return null===c?d:c.code};h.getDomain=function(b,d,c,k){void 0===c&&(c=null);if(!d||!d.fields)return null;for(var a=null,e=0;e<d.fields.length;e++){var g=d.fields[e];g.name.toLowerCase()===b.toString().toLowerCase()&&(a=g)}if(null===a)throw Error("Field not found");var f,w;k||(k=c&&d.typeIdField&&c._field(d.typeIdField));null!=k&&d.types.some(function(b){return b.id===k?((f=b.domains&&b.domains[a.name])&&"inherited"===f.type&&(f=ba(a.name,d),w=!0),!0):!1});w||f||(f=ba(b,d));return{field:a,
domain:f}};h.stableStringify=M;h.autoCastFeatureToGeometry=function(b){if(null===b)return null;for(var d=[],c=0;c<b.length;c++){var k=b[c];k&&k.declaredClass&&"esri.arcade.Feature"===k.declaredClass?d.push(k.geometry()):d.push(k)}return d};h.autoCastArrayOfPointsToPolygon=function(b,k){if(d(b)||N(b)){var a=!1,e=!1,g=[];if(d(b)){for(var f=0;f<b.length;f++){var w=b[f];la(g,w)}0<g.length&&(k=b[0].spatialReference,a=b[0].hasZ,e=b[0].hasM)}else if(b instanceof m)g=b._elements,0<g.length&&(a=b._hasZ,e=
b._hasM,k=b.get(0).spatialReference);else if(N(b)){for(var f=0,n=b.toArray();f<n.length;f++)w=n[f],la(g,w);0<g.length&&(k=b.get(0).spatialReference,a=!0===b.get(0).hasZ,e=!0===b.get(0).hasM)}else throw Error("Invalid Argument");if(0===g.length)return null;!1===y.isClockwise(g,e,a)&&(g=g.slice(0).reverse());return new c({rings:[g],spatialReference:k,hasZ:a,hasM:e})}return b};h.autoCastArrayOfPointsToPolyline=function(b,c){if(d(b)||N(b)){var k=!1,a=!1,e=[];if(d(b)){for(var g=0;g<b.length;g++){var f=
b[g];la(e,f)}0<e.length&&(c=b[0].spatialReference,k=!0===b[0].hasZ,a=!0===b[0].hasM)}else if(b instanceof m)e=b._elements,0<e.length&&(k=b._hasZ,a=b._hasM,c=b.get(0).spatialReference);else if(N(b)){for(var g=0,y=b.toArray();g<y.length;g++)f=y[g],la(e,f);0<e.length&&(c=b.get(0).spatialReference,k=!0===b.get(0).hasZ,a=!0===b.get(0).hasM)}return 0===e.length?null:new w({paths:[e],spatialReference:c,hasZ:k,hasM:a})}return b};h.autoCastArrayOfPointsToMultiPoint=function(b,c){if(d(b)||N(b)){var k=!1,a=
!1,g=[];if(d(b)){for(var f=0;f<b.length;f++){var w=b[f];la(g,w)}0<g.length&&(c=b[0].spatialReference,k=!0===b[0].hasZ,a=!0===b[0].hasM)}else if(b instanceof m)g=b._elements,0<g.length&&(k=b._hasZ,a=b._hasM,c=b.get(0).spatialReference);else if(N(b)){for(var f=0,y=b.toArray();f<y.length;f++)w=y[f],la(g,w);0<g.length&&(c=b.get(0).spatialReference,k=!0===b.get(0).hasZ,a=!0===b.get(0).hasM)}return 0===g.length?null:new e({points:g,spatialReference:c,hasZ:k,hasM:a})}return b};h.toStringArray=function(b,
c){void 0===c&&(c=!1);var k=[];if(null===b)return k;if(!0===d(b)){for(var a=0;a<b.length;a++){var e=T(b[a]);""===e&&!0!==c||k.push(e)}return k}if(b instanceof r){for(a=0;a<b.length();a++)e=T(b.get(a)),""===e&&!0!==c||k.push(e);return k}return da(b)?(e=T(b),""===e&&!0!==c||k.push(e),k):[]};var ca=0;h.tick=function(b){ca++;return 0===ca%100?(ca=0,f.create(function(d){setTimeout(function(){d(b)},0)})):b};h.MomentLibrary={Moment:null}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],
function(v,h){return function(){return function(l,h){this.context=this.definition=null;this.definition=l;this.context=h}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(v,h,l,r,n){return function(m){function h(f,a,g,e,n){f=m.call(this,f)||this;f._lazyPath=[];f._hasZ=!1;f._hasM=!1;f._hasZ=g;f._hasM=e;f._spRef=a;f._cacheId=n;return f}l(h,m);h.prototype.get=function(f){if(void 0===this._lazyPath[f]){var a=
this._elements[f];if(void 0===a)return;this._lazyPath[f]=new n(a,this._spRef,this._hasZ,this._hasM,this._cacheId,f)}return this._lazyPath[f]};h.prototype.equalityTest=function(f){return f===this?!0:null===f||!1===f instanceof h?!1:f.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};return h}(r)})},"esri/arcade/ImmutablePointArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","../geometry/Point"],
function(v,h,l,r,n){return function(m){function h(f,a,g,e,n,c){f=m.call(this,f)||this;f._lazyPt=[];f._hasZ=!1;f._hasM=!1;f._spRef=a;f._hasZ=g;f._hasM=e;f._cacheId=n;f._partId=c;return f}l(h,m);h.prototype.get=function(f){if(void 0===this._lazyPt[f]){var a=this._elements[f];if(void 0===a)return;var g=this._hasZ,e=this._hasM,m=null,m=g&&!e?new n(a[0],a[1],a[2],void 0,this._spRef):e&&g?new n(a[0],a[1],void 0,a[2],this._spRef):g&&e?new n(a[0],a[1],a[2],a[3],this._spRef):new n(a[0],a[1],this._spRef);m.cache._arcadeCacheId=
this._cacheId.toString()+"-"+this._partId.toString()+"-"+f.toString();this._lazyPt[f]=m}return this._lazyPt[f]};h.prototype.equalityTest=function(f){return f===this?!0:null===f||!1===f instanceof h?!1:f.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return h}(r)})},"esri/core/number":function(){define(["require","exports","../core/tsSupport/assignHelper","../core/string","../intl/locale"],function(v,h,l,r,n){function m(c){c||
(c=n.getLocale());var a=c in e;if(!a){var g=c.split("-");1<g.length&&g[0]in e&&(c=g[0],a=!0);a||(c="en")}c=e[c];a=c[2];return{decimal:c[0],group:c[1],pattern:void 0===a?"#,##0.###":a}}function q(c,a,e){e=e||{};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);a=a.split(".");var g="string"===typeof e.places&&e.places.indexOf(","),f=e.places;g?f=e.places.substring(g+1):0<=f||(f=(a[1]||[]).length);0>e.round||(c=Number(c.toFixed(Number(f))));c=String(Math.abs(c)).split(".");var w=c[1]||"";
a[1]||e.places?(g&&(e.places=e.places.substring(0,g)),g=void 0!==e.places?e.places:a[1]&&a[1].lastIndexOf("0")+1,g>w.length&&(c[1]=r.padEnd(w,Number(g),"0")),f<w.length&&(c[1]=w.substr(0,Number(f)))):c[1]&&c.pop();f=a[0].replace(",","");g=f.indexOf("0");-1!==g&&(g=f.length-g,g>c[0].length&&(c[0]=r.padStart(c[0],g,"0")),-1===f.indexOf("#")&&(c[0]=c[0].substr(c[0].length-g)));var f=a[0].lastIndexOf(","),m,b;-1!==f&&(m=a[0].length-f-1,a=a[0].substr(0,f),f=a.lastIndexOf(","),-1!==f&&(b=a.length-f-1));
a=[];for(f=c[0];f;)g=f.length-m,a.push(0<g?f.substr(g):f),f=0<g?f.slice(0,g):"",b&&(m=b,b=void 0);c[0]=a.reverse().join(e.group||",");return c.join(e.decimal||".")}function f(e){e=e||{};var g=m(e.locale),f=e.pattern||g.pattern,w=g.group,n=g.decimal,l=1;if(-1!==f.indexOf("%"))l/=100;else if(-1!==f.indexOf("\u2030"))l/=1E3;else if(-1!==f.indexOf("\u00a4"))throw Error("currency notation not supported");g=f.split(";");1===g.length&&g.push("-"+g[0]);return{regexp:c(g,function(c){c="(?:"+r.escapeRegExpString(c,
".")+")";return c.replace(C,function(b){var c={signed:!1,separator:e.strict?w:[w,""],fractional:e.fractional,decimal:n,exponent:!1};b=b.split(".");var d=e.places;1===b.length&&1!==l&&(b[1]="###");1===b.length||0===d?c.fractional=!1:(void 0===d&&(d=e.pattern?b[1].lastIndexOf("0")+1:Infinity),d&&null==e.fractional&&(c.fractional=!0),!e.places&&d<b[1].length&&(d+=","+b[1].length),c.places=d);b=b[0].split(",");1<b.length&&(c.groupSize=b.pop().length,1<b.length&&(c.groupSize2=b.pop().length));return"("+
a(c)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:w,decimal:n,factor:l}}function a(a){a=a||{};"places"in a||(a.places=Infinity);"string"!==typeof a.decimal&&(a.decimal=".");"fractional"in a&&!/^0/.test(String(a.places))||(a.fractional=[!0,!1]);"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var e=g(a),f=c(a.fractional,function(c){var e="";c&&0!==a.places&&(e="\\"+a.decimal,e=Infinity===a.places?"(?:"+e+"\\d+)?":e+("\\d{"+a.places+"}"));return e},!0),w=c(a.exponent,function(c){return c?
"([eE]"+g({signed:a.eSigned})+")":""}),e=e+f;f&&(e="(?:(?:"+e+")|(?:"+f+"))");return e+w}function g(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var e=c(a.signed,function(c){return c?"[-+]":""},!0),g=c(a.separator,function(c){if(!c)return"(?:\\d+)";c=r.escapeRegExpString(c);" "===c?c="\\s":"\u00a0"===c&&(c="\\s\\xa0");var e=a.groupSize,g=a.groupSize2;return g?(c="(?:0|[1-9]\\d{0,"+(g-1)+"}(?:["+c+"]\\d{"+g+"})*["+c+"]\\d{"+e+"})",0<e-
g?"(?:"+c+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":c):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+c+"]\\d{"+e+"})*)"},!0);return e+g}Object.defineProperty(h,"__esModule",{value:!0});var e={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",",
"."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]};h.getCustoms=m;h.format=function(c,a){a=l({},a);var e=m(a.locale);a.customs=e;var g=a.pattern||e.pattern;if(isNaN(c)||Infinity===Math.abs(c))return null;
a=a||{};var e=a.customs.group,f=a.customs.decimal,g=g.split(";"),w=g[0],g=g[0>c?1:0]||"-"+w;if(-1!==g.indexOf("%"))c*=100;else if(-1!==g.indexOf("\u2030"))c*=1E3;else{if(-1!==g.indexOf("\u00a4"))throw Error("currency notation not supported");if(-1!==g.indexOf("E"))throw Error("exponential notation not supported");}var n=C,w=w.match(n);if(!w)throw Error("unable to find a number expression in pattern: "+g);!1===a.fractional&&(a.places=0);return g.replace(n,q(c,w[0],{decimal:f,group:e,places:a.places,
round:a.round}))};var C=/[#0,]*[#0](?:\.0*#*)?/;h.regexp=function(c){return f(c).regexp};h._parseInfo=f;h.parse=function(c,a){a=f(a);c=(new RegExp("^"+a.regexp+"$")).exec(c);if(!c)return NaN;var e=c[1];if(!c[1]){if(!c[2])return NaN;e=c[2];a.factor*=-1}e=e.replace(new RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return Number(e)*a.factor};var c=function(c,a,e){if(!(c instanceof Array))return a(c);for(var g=[],f=0;f<c.length;f++)g.push(a(c[f]));c=g.join("|");return"("+(e?"?:":"")+
c+")"}})},"esri/arcade/Attachment":function(){define(["require","exports","../core/tsSupport/extendsHelper","./Dictionary"],function(v,h,l,r){return function(n){function m(m,f,a,g,e){var l=n.call(this)||this;l.attachmentUrl=e;l.immutable=!1;l.setField("id",m);l.setField("name",f);l.setField("contenttype",a);l.setField("size",g);l.immutable=!0;return l}l(m,n);return m}(r)})},"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../core/maybe".split(" "),
function(v,h,l,r,n,m,q,f,a,g,e){return function(){function h(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}h.createFromGraphic=function(c){var a=new h;a._geometry=e.isSome(c.geometry)?c.geometry:null;a.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes;c._sourceLayer?(a._layer=c._sourceLayer,a._datesfixed=!1):c._layer?(a._layer=
c._layer,a._datesfixed=!1):c.layer?(a._layer=c.layer,a._datesfixed=!1):c.sourceLayer&&(a._layer=c.sourceLayer,a._datesfixed=!1);return a};h.createFromArcadeFeature=function(c){var a=new h;a._datesfixed=c._datesfixed;a.attributes=c.attributes;a._geometry=c._geometry;a._optimizedGeomDefinition=c._optimizedGeomDefinition;c._layer&&(a._layer=c._layer);return a};h.createFromOptimisedFeature=function(c,a,e){var g=new h;g._geometry=c.geometry?{geometry:c.geometry}:null;g._optimizedGeomDefinition=e;g.attributes=
c.attributes||{};g._layer=a;g._datesfixed=!1;return g};h.createFromArcadeDictionary=function(c){var a=new h;a.attributes=c.field("attributes");null!==a.attributes?a.attributes instanceof r?(a.attributes=a.attributes.attributes,null===a.attributes&&(a.attributes={})):a.attributes={}:a.attributes={};a._geometry=c.field("geometry");null!==a._geometry&&(a._geometry instanceof r?a._geometry=h.parseGeometryFromDictionary(a._geometry):a._geometry instanceof q||(a._geometry=null));return a};h.createFromGraphicLikeObject=
function(c,a,g){void 0===g&&(g=null);var f=new h;null===a&&(a={});f.attributes=a;f._geometry=e.isSome(c)?c:null;f._layer=g;f._layer&&(f._datesfixed=!1);return f};h.prototype.repurposeFromGraphicLikeObject=function(c,a,e){void 0===e&&(e=null);null===a&&(a={});this.attributes=a;this._geometry=c?c:null;this._datesfixed=(this._layer=e)?!1:!0};h.prototype.castToText=function(){var c="",a;for(a in this.attributes){""!==c&&(c+=",");var e=this.attributes[a];null==e?c+=JSON.stringify(a)+":null":m.isBoolean(e)||
m.isNumber(e)||m.isString(e)?c+=JSON.stringify(a)+":"+JSON.stringify(e):e instanceof q?c+=JSON.stringify(a)+":"+m.toStringExplicit(e):e instanceof n?c+=JSON.stringify(a)+":"+m.toStringExplicit(e):e instanceof Array?c+=JSON.stringify(a)+":"+m.toStringExplicit(e):e instanceof Date?c+=JSON.stringify(a)+":"+JSON.stringify(e):null!==e&&"object"===typeof e&&void 0!==e.castToText&&(c+=JSON.stringify(a)+":"+e.castToText())}return'{"geometry":'+(null===this.geometry()?"null":m.toStringExplicit(this.geometry()))+
',"attributes":{'+c+"}}"};h.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);else{for(var c=[],a=0;a<this._layer.fields.length;a++){var e=this._layer.fields[a];"date"!==e.type&&"esriFieldTypeDate"!==e.type||c.push(e.name)}this._datefields=c;0<c.length&&this._fixDateFields(c)}this._datesfixed=!0};h.prototype._fixDateFields=function(c){this.attributes=l({},this.attributes);for(var a=0;a<c.length;a++){var e=this.attributes[c[a]];
if(null!==e)if(void 0===e)for(var g in this.attributes){if(g.toLowerCase()===c[a].toLowerCase()){e=this.attributes[g];null===e||e instanceof Date||(this.attributes[g]=new Date(e));break}}else e instanceof Date||(this.attributes[c[a]]=new Date(e))}};h.prototype.geometry=function(){if(null===this._geometry||this._geometry instanceof q)return this._geometry;this._optimizedGeomDefinition?(this._geometry=e.unwrap(a.fromJSON(g.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,
this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=e.unwrap(a.fromJSON(this._geometry));return this._geometry};h.prototype.field=function(c){!1===this._datesfixed&&this._fixDates();var a=this.attributes[c];if(void 0!==a)return a;c=c.toLowerCase();for(var e in this.attributes)if(e.toLowerCase()===c)return this.attributes[e];if(this._hasFieldDefinition(c))return null;throw Error("Field not Found");
};h.prototype._hasFieldDefinition=function(c){if(null===this._layer)return!1;for(var a=0;a<this._layer.fields.length;a++)if(this._layer.fields[a].name.toLowerCase()===c)return!0;return!1};h.prototype._field=function(c){!1===this._datesfixed&&this._fixDates();var a=c.toLowerCase();c=this.attributes[c];if(void 0!==c)return c;for(var e in this.attributes)if(e.toLowerCase()===a)return this.attributes[e];return null};h.prototype.setField=function(c,a){if(this.immutable)throw Error("Feature is Immutable");
if(!1===m.isSimpleType(a))throw Error("Illegal Value Assignment to Feature");var e=c.toLowerCase();if(void 0===this.attributes[c])for(var g in this.attributes)if(g.toLowerCase()===e){this.attributes[g]=a;return}this.attributes[c]=a};h.prototype.hasField=function(c){var a=c.toLowerCase();if(void 0!==this.attributes[c])return!0;for(var e in this.attributes)if(e.toLowerCase()===a)return!0;return this._hasFieldDefinition(a)?!0:!1};h.prototype.keys=function(){var c=[],a={},e;for(e in this.attributes)c.push(e),
a[e.toLowerCase()]=1;if(null!==this._layer)for(e=0;e<this._layer.fields.length;e++){var g=this._layer.fields[e];1!==a[g.name.toLowerCase()]&&c.push(g.name)}return c=c.sort()};h.parseGeometryFromDictionary=function(c){c=h.convertDictionaryToJson(c,!0);void 0!==c.spatialreference&&(c.spatialReference=c.spatialreference,delete c.spatialreference);void 0!==c.rings&&(c.rings=this.fixPathArrays(c.rings,!0===c.hasZ,!0===c.hasM));void 0!==c.paths&&(c.paths=this.fixPathArrays(c.paths,!0===c.hasZ,!0===c.hasM));
void 0!==c.points&&(c.points=this.fixPointArrays(c.points,!0===c.hasZ,!0===c.hasM));return a.fromJSON(c)};h.fixPathArrays=function(c,a,e){var g=[];if(c instanceof Array)for(var f=0;f<c.length;f++)g.push(this.fixPointArrays(c[f],a,e));else if(c instanceof n)for(f=0;f<c.length();f++)g.push(this.fixPointArrays(c.get(f),a,e));return g};h.fixPointArrays=function(c,a,e){var g=[];if(c instanceof Array)for(var m=0;m<c.length;m++){var h=c[m];h instanceof f?a&&e?g.push([h.x,h.y,h.z,h.m]):a?g.push([h.x,h.y,
h.z]):e?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):h instanceof n?g.push(h.toArray()):g.push(h)}else if(c instanceof n)for(m=0;m<c.length();m++)h=c.get(m),h instanceof f?a&&e?g.push([h.x,h.y,h.z,h.m]):a?g.push([h.x,h.y,h.z]):e?g.push([h.x,h.y,h.m]):g.push([h.x,h.y]):h instanceof n?g.push(h.toArray()):g.push(h);return g};h.convertDictionaryToJson=function(c,a){void 0===a&&(a=!1);var e={},g;for(g in c.attributes){var f=c.attributes[g];f instanceof r&&(f=h.convertDictionaryToJson(f));a?e[g.toLowerCase()]=
f:e[g]=f}return e};h.parseAttributesFromDictionary=function(c){var a={},e;for(e in c.attributes){var g=c.attributes[e];if(m.isSimpleType(g))a[e]=g;else throw Error("Illegal Argument");}return a};h.fromJson=function(c){var e=null;null!==c.geometry&&void 0!==c.geometry&&(e=a.fromJSON(c.geometry));var g={};if(null!==c.attributes&&void 0!==c.attributes)for(var f in c.attributes){var n=c.attributes[f];if(null===n)g[f]=n;else if(m.isString(n)||m.isNumber(n)||m.isBoolean(n)||m.isDate(n))g[f]=n;else throw Error("Illegal Argument");
}return h.createFromGraphicLikeObject(e,g,null)};h.prototype.domainValueLookup=function(c,a,e){if(null===this._layer||!this._layer.fields)return null;e=m.getDomain(c,this._layer,this,e);if(void 0===a)try{a=this.field(c)}catch(D){return null}return m.getDomainValue(e,a)};h.prototype.domainCodeLookup=function(c,a,e){if(null===this._layer||!this._layer.fields)return null;if(void 0===a){try{a=this.field(c)}catch(D){return null}return a}c=m.getDomain(c,this._layer,this,e);return m.getDomainCode(c,a)};
return h}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(v,h){function l(b,c){return"0"!==b.min&&c.length<Number(b.min)||"*"!==b.max&&c.length>Number(b.max)?-2:1}function r(b,c,d){if(null!==d.localScope&&void 0!==d.localScope[b.toLowerCase()]){var a=d.localScope[b.toLowerCase()];if("FormulaFunction"===a.type||"any"===a.type)return void 0===a.signature&&(a.signature={min:"0",max:"*"}),l(a.signature,c)}return void 0!==d.globalScope[b.toLowerCase()]&&(a=d.globalScope[b.toLowerCase()],
"FormulaFunction"===a.type||"any"===a.type)?(void 0===a.signature&&(a.signature={min:"0",max:"*"}),l(a.signature,c)):-1}function n(b,c){if(b)for(var d=0;d<b.length;d++)m(b[d],c)}function m(b,c){if(b&&!1!==c(b))switch(b.type){case "ArrayExpression":n(b.elements,c);break;case "AssignmentExpression":case "BinaryExpression":m(b.left,c);m(b.right,c);break;case "BlockStatement":n(b.body,c);break;case "CallExpression":m(b.callee,c);n(b.arguments,c);break;case "ConditionalExpression":m(b.test,c);m(b.alternate,
c);m(b.consequent,c);break;case "DoWhileStatement":m(b.test,c);m(b.body,c);break;case "ExpressionStatement":m(b.expression,c);break;case "ForInStatement":m(b.left,c);m(b.right,c);m(b.body,c);break;case "ForStatement":m(b.init,c);m(b.test,c);m(b.update,c);m(b.body,c);break;case "FunctionDeclaration":case "FunctionDeclaration":case "FunctionExpression":m(b.id,c);n(b.params,c);m(b.body,c);break;case "IfStatement":m(b.test,c);m(b.consequent,c);m(b.alternate,c);break;case "LogicalExpression":m(b.left,
c);m(b.right,c);break;case "MemberExpression":m(b.object,c);m(b.property,c);break;case "NewExpression":m(b.callee,c);n(b.arguments,c);break;case "ObjectExpression":n(b.properties,c);break;case "Program":n(b.body,c);break;case "Property":m(b.key,c);m(b.value,c);break;case "ReturnStatement":m(b.argument,c);break;case "UnaryExpression":m(b.argument,c);break;case "UpdateExpression":m(b.argument,c);break;case "VariableDeclaration":n(b.declarations,c);break;case "VariableDeclarator":m(b.id,c),m(b.init,
c)}}function q(b,a){void 0===a&&(a=!0);var d=c(b,"SYNTAX","UNREOGNISED");try{switch(b.type){case "VariableDeclarator":return null!==b.init&&"FunctionExpression"===b.init.type?c(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==b.id.type?c(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==b.init?q(b.init,!1):"";case "VariableDeclaration":for(var e=0;e<b.declarations.length;e++)if(d=q(b.declarations[e],a),""!==d)return d;return"";case "ForInStatement":d=q(b.left,a);if(""!==d)break;if("VariableDeclaration"===
b.left.type){if(1<b.left.declarations.length)return c(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return c(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return c(b,"SYNTAX","LEFTNOTVAR");d=q(b.right,a);if(""!==d)break;d=q(b.body,a);if(""!==d)break;return"";case "ForStatement":if(null!==b.test&&(d=q(b.test,a),""!==d))break;if(null!==b.init&&(d=q(b.init,a),""!==d))break;if(null!==b.update&&(d=q(b.update,a),""!==d))break;if(null!==b.body&&(d=q(b.body,a),""!==d))break;
return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":d=q(b.test,a);if(""!==d)break;if(null!==b.consequent&&(d=q(b.consequent,!1),""!==d))break;if(null!==b.alternate&&(d=q(b.alternate,!1),""!==d))break;return"";case "BlockStatement":for(var k=[],e=0;e<b.body.length;e++)"EmptyStatement"!==b.body[e].type&&k.push(b.body[e]);b.body=k;for(e=0;e<b.body.length;e++)if(d=q(b.body[e],a),""!==d)return d;return"";case "FunctionDeclaration":return!1===
a?c(b,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==b.id.type?c(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):q(b.body,!1);case "ReturnStatement":return null!==b.argument?q(b.argument,a):"";case "UpdateExpression":return"Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type?c(b,"SYNTAX","ASSIGNMENTTOVARSONLY"):q(b.argument,a);case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return c(b,"SYNTAX","ASSIGNMENTTOVARSONLY");d=q(b.left,a);if(""!==d)break;
switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return c(b,"SYNTAX","OPERATORNOTRECOGNISED")}return q(b.right,!1);case "ExpressionStatement":return q(b.expression,!1);case "Identifier":d="";break;case "MemberExpression":d=q(b.object,a);if(""!==d)break;return!0===b.computed?q(b.property,a):"";case "Literal":return"";case "CallExpression":if("Identifier"!==b.callee.type)return c(b,"SYNTAX","ONLYNODESSUPPORTED");d="";for(e=0;e<b.arguments.length;e++)if(d=
q(b.arguments[e],a),""!==d)return d;return"";case "UnaryExpression":d=q(b.argument,a);break;case "BinaryExpression":d=q(b.left,a);if(""!==d)break;d=q(b.right,a);if(""!==d)break;switch(b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return c(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":d=q(b.left,a);if(""!==d)break;d=q(b.right);if(""!==d)break;switch(b.operator){case "\x26\x26":case "||":break;
default:return c(b,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return c(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(e=0;e<b.elements.length&&(d=q(b.elements[e],a),""===d);e++);break;case "ObjectExpression":d="";for(e=0;e<b.properties.length;e++){d="";if(null!==b.properties[e].key&&("Literal"!==b.properties[e].key.type&&"Identifier"!==b.properties[e].key.type&&(d=c(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[e].key.type)){var k=b.properties[e].key,
g="value"in k?k.value:null;"string"===typeof g||g instanceof String||(d=c(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=q(b.properties[e],a));if(""!==d)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return c(b,"SYNTAX","ONLYLITERAL");if("Identifier"!==b.key.type&&(d=q(b.key,a),""!==d))break;d=q(b.value,a)}return d}catch(t){throw t;}}function f(b,a){var d=c(b,"SYNTAX","UNREOGNISED"),k=null,m="";try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&
"FunctionExpression"===b.init.type)return c(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var h=null===b.init?"":f(b.init,a);if(""!==h)return h;"Identifier"===b.id.type&&(null===a.localScope?a.globalScope[b.id.name.toLowerCase()]={type:"any"}:a.localScope[b.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":k=g(b.id.name.toLowerCase(),b);m=e(b,a);if(""!==m)return m;if(null!==a.localScope)return c(b,"SYNTAX","GLOBALFUNCTIONSONLY");k.isnative=!1;a.globalScope[b.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[k]};return"";case "VariableDeclaration":for(var d="",n=0;n<b.declarations.length&&(d=f(b.declarations[n],a),""===d);n++);break;case "IfStatement":d=f(b.test,a);if(""!==d)break;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)return c(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==b.consequent&&(d=f(b.consequent,a),""!==d))break;if(null!==b.alternate&&(d=f(b.alternate,a),""!==d))break;return"";case "EmptyStatement":return"";
case "BlockStatement":for(n=0;n<b.body.length;n++)if(d=f(b.body[n],a),""!==d)return d;return"";case "ReturnStatement":return null!==b.argument?f(b.argument,a):"";case "ForInStatement":if("VariableDeclaration"===b.left.type){if(1<b.left.declarations.length)return c(b,"SYNTAX","ONLY1VAR");if(null!==b.left.declarations[0].init)return c(b,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==b.left.type)return c(b,"SYNTAX","LEFTNOTVAR");d=f(b.left,a);if(""!==d)break;d=f(b.right,a);if(""!==d)break;d=f(b.body,
a);if(""!==d)break;return"";case "ForStatement":if(null!==b.init&&(d=f(b.init,a),""!==d))break;if(null!==b.test&&(d=f(b.test,a),""!==d))break;if(null!==b.body&&(d=f(b.body,a),""!==d))break;if(null!==b.update&&(d=f(b.update,a),""!==d))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type)return c(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var l=!1;if("MemberExpression"===b.argument.type)return f(b.argument,
a);null!==a.localScope&&void 0!==a.localScope[b.argument.name.toLowerCase()]&&(l=!0);void 0!==a.globalScope[b.argument.name.toLowerCase()]&&(l=!0);return!1===l?"Identifier "+b.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==b.left.type&&"MemberExpression"!==b.left.type)return c(b,"SYNTAX","ASSIGNMENTTOVARSONLY");var F=f(b.right,a);if(""!==F)return F;l=!1;if("MemberExpression"===b.left.type)return F=f(b.left,a),""!==F?F:"";null!==a.localScope&&void 0!==a.localScope[b.left.name.toLowerCase()]&&
(l=!0);void 0!==a.globalScope[b.left.name.toLowerCase()]&&(l=!0);return!1===l?"Identifier "+b.left.name+" has not been declared.":"";case "ExpressionStatement":return f(b.expression,a);case "Identifier":var w=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[w])return"";d=void 0!==a.globalScope[w]?"":c(b,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":d=f(b.object,a);if(""!==d)break;return!0===b.computed?f(b.property,a):"";case "Literal":return"";case "CallExpression":if("Identifier"!==
b.callee.type)return c(b,"SYNTAX","ONLYNODESSUPPORTED");d="";for(n=0;n<b.arguments.length;n++)if(d=f(b.arguments[n],a),""!==d)return d;var C=r(b.callee.name,b.arguments,a);-1===C&&(d=c(b,"SYNTAX","NOTFOUND"));-2===C&&(d=c(b,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":d=f(b.argument,a);break;case "BinaryExpression":d=f(b.left,a);if(""!==d)break;d=f(b.right,a);if(""!==d)break;return"";case "LogicalExpression":d=f(b.left,a);if(""!==d)break;if("AssignmentExpression"===b.left.type||"UpdateExpression"===
b.left.type)return c(b.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");d=f(b.right,a);if(""!==d)break;return"AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type?c(b.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return c(b,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(n=0;n<b.elements.length&&(d=f(b.elements[n],a),""===d);n++);break;case "ObjectExpression":d="";for(n=0;n<b.properties.length;n++){d="";if(null!==b.properties[n].key&&
("Literal"!==b.properties[n].key.type&&"Identifier"!==b.properties[n].key.type&&(d=c(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===b.properties[n].key.type)){var q=b.properties[n].key,D="value"in q?q.value:null;"string"===typeof D||D instanceof String||(d=c(b,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=f(b.properties[n],a));if(""!==d)break}break;case "Property":if("Literal"!==b.key.type&&"Identifier"!==b.key.type)return c(b,"SYNTAX","ONLYLITERAL");if("Identifier"!==b.key.type&&(d=f(b.key,
a),""!==d))break;d=f(b.value,a)}return d}catch(G){throw G;}}function a(b,c){var d=!1,a=c.toLowerCase();m(b,function(b){if(d)return!1;"Identifier"===b.type&&b.name&&b.name.toLowerCase()===a&&(d=!0);return!0});return d}function g(b,c){var d=[];if(void 0!==c.params&&null!==c.params)for(var a=0;a<c.params.length;a++)d.push("any");return{name:b,return:"any",params:d}}function e(b,c){c={globalScope:c.globalScope,localScope:{}};for(var d=0;d<b.params.length;d++)c.localScope[b.params[d].name.toLowerCase()]=
{type:"any"};return f(b.body,c)}function C(b,c,d,a){var e={};if(void 0===b||null===b)b={};if(void 0===d||null===d)d={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var k in c)"sync"===a&&void 0!==c[k].min?e[k]={type:"FormulaFunction",signature:{min:c[k].min,max:c[k].max}}:"sync"!==a&&void 0!==c[k].fmin&&(e[k]={type:"FormulaFunction",signature:{min:c[k].fmin,max:c[k].fmax}});for(c=0;c<d.length;c++)k=d[c],e[k.name]={type:"FormulaFunction",signature:k};for(k in b)e[k]=
b[k],e[k].type="any";return e}function c(b,c,d){var a="";switch(c){case "SYNTAX":a="Syntax Error: ";break;case "RUNTIME":a="Runtime Error: ";break;default:a="Syntax Error: "}try{switch(b.type){case "IfStatement":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":a+=" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":a+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(d){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":a+=
" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":a+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":a+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(d){case "GLOBALFUNCTIONSONLY":a+=" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":a+=" Function Definition must have an identifier"}break;case "VariableDeclaration":a+=" Only 1 variable can be declared at a time";break;
case "VariableDeclarator":switch(d){case "FUNCTIONVARIABLEDECLARATOR":a+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":a+=" Variable Definition must have an identifier"}break;case "Identifier":a+=" Identifier Not Found. ";a+=b.name;break;case "ObjectExpression":switch(d){case "OBJECTPROPERTYMUSTBESTRING":a+=" Property name must be a string"}break;case "ForStatement":switch(d){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":a+=" Non Boolean used as Condition"}break;
case "ForInStatement":switch(d){case "ONLY1VAR":a+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":a+=" Can only declare value for use with IN";break;case "LEFTNOVAR":a+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":a+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":a+="This type cannot be used in an IN loop"}break;case "MemberExpression":switch(d){case "PROPERTYNOTFOUND":a+="Cannot find member property. ";a+=
!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "OUTOFBOUNDS":a+="Out of Bounds. ";a+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "NOTFOUND":a+="Cannot call member method on null. ";a+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":"";break;case "INVALIDTYPE":a+="Cannot call member property on object of this type. ",a+=!1===b.computed?"Identifier"===b.property.type?b.property.name:"":""}break;case "Property":switch(d){case "ONLYLITERAL":a+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(d){case "WRONGSIGNATURE":a+="Function signature does not match: ";a+="Identifier"===b.callee.type?b.callee.name:"";break;case "ONLYNODESUPPORTED":a+="Functions must be declared.";a+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTAFUNCTION":a+="Not a Function: ";a+="Identifier"===b.callee.type?b.callee.name:"";break;case "NOTFOUND":a+="Function Not Found: "+("Identifier"===b.callee.type?
b.callee.name:"")}break;case "UnaryExpression":switch(d){case "NOTSUPPORTEDUNARYOPERATOR":a+="Operator "+b.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":a+="Unary operator "+b.operator+" cannot be used with this argument."}case "BinaryExpression":switch(d){case "OPERATORNOTRECOGNISED":a+="Binary Operator not recognised "+b.operator}break;case "LogicalExpression":switch(d){case "ONLYBOOLEAN":a+="Operator "+b.operator+" cannot be used. Only || or \x26\x26 are allowed values";
break;case "ONLYORORAND":a+="Logical Expression "+b.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":a+="Conditional statements not supported.";break;case "ArrayExpression":switch(d){case "FUNCTIONCONTEXTILLEGAL":a+=" Cannot Put Function inside Array."}break;default:a+="Expression contains unrecognised code structures."}}catch(I){throw I;}return a}function w(b,a,d){return{line:b.loc.start.line,character:b.loc.start.column,reason:c(b,a,d)}}function y(b,
c,d,a){c={globalScope:c.globalScope,localScope:{}};for(var e=0;e<b.params.length;e++)c.localScope[b.params[e].name.toLowerCase()]={type:"any"};D(b.body,c,d,a,!1)}function D(b,c,d,a,e){void 0===e&&(e=!0);if(null===b)throw Error("Unnexpexted Expression Syntax");var k=null;try{switch(b.type){case "VariableDeclarator":if(null!==b.init&&"FunctionExpression"===b.init.type){a.push(w(b,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==b.id.type?a.push(w(b,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):
(b.id.name.toLowerCase(),null===c.localScope?c.globalScope[b.id.name.toLowerCase()]={type:"any"}:c.localScope[b.id.name.toLowerCase()]={type:"any"});null!==b.init&&D(b.init,c,d,a,e);break;case "FunctionDeclaration":!1===e&&a.push(w(b,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==b.id.type&&a.push(w(b,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));k=g("",b);y(b,c,d,a);null!==c.localScope&&a.push(w(b,"SYNTAX","GLOBALFUNCTIONSONLY"));k.isnative=!1;"Identifier"===b.id.type&&(c.globalScope[b.id.name.toLowerCase()]=
{type:"FormulaFunction",signature:[k]});break;case "VariableDeclaration":for(var f=0;f<b.declarations.length;f++)D(b.declarations[f],c,d,a,e);break;case "IfStatement":null!==b.test&&(D(b.test,c,d,a,e),"AssignmentExpression"!==b.test.type&&"UpdateExpression"!==b.test.type||a.push(w(b.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==b.consequent&&D(b.consequent,c,d,a,e);null!==b.alternate&&D(b.alternate,c,d,a,e);break;case "EmptyStatement":break;case "BlockStatement":if(null!==b.body)for(f=
0;f<b.body.length;f++)D(b.body[f],c,d,a,e);break;case "ReturnStatement":null!==b.argument&&D(b.argument,c,d,a,e);break;case "ForInStatement":"VariableDeclaration"===b.left.type?(1<b.left.declarations.length&&a.push(w(b,"SYNTAX","ONLY1VAR")),null!==b.left.declarations[0].init&&a.push(w(b,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==b.left.type&&a.push(w(b,"SYNTAX","LEFTNOTVAR"));D(b.left,c,d,a,e);D(b.right,c,d,a,e);D(b.body,c,d,a,e);break;case "ForStatement":null!==b.init&&D(b.init,c,d,a,e);null!==
b.test&&D(b.test,c,d,a,e);null!==b.body&&D(b.body,c,d,a,e);null!==b.update&&D(b.update,c,d,a,e);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==b.argument.type&&"MemberExpression"!==b.argument.type?a.push(w(b,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===b.argument.type&&(k=!1,!1===d&&(null!==c.localScope&&void 0!==c.localScope[b.argument.name.toLowerCase()]&&(k=!0),void 0!==c.globalScope[b.argument.name.toLowerCase()]&&(k=!0),!1===k&&a.push({line:null===
b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.argument.name+" has not been declared."}))),"MemberExpression"===b.argument.type&&D(b.argument,c,d,a,e));break;case "AssignmentExpression":"Identifier"!==b.left.type&&"MemberExpression"!==b.left.type&&a.push(w(b,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(b.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:a.push(w(b,"SYNTAX","OPERATORNOTRECOGNISED"))}D(b.right,c,d,a,
e);k=!1;"Identifier"===b.left.type&&(null!==c.localScope&&void 0!==c.localScope[b.left.name.toLowerCase()]&&(k=!0),void 0!==c.globalScope[b.left.name.toLowerCase()]&&(k=!0),!1===d&&!1===k&&a.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Identifier "+b.left.name+" has not been declared."}));"MemberExpression"===b.left.type&&D(b.left,c,d,a,e);break;case "ExpressionStatement":D(b.expression,c,d,a,e);break;case "Identifier":var m=b.name.toLowerCase();if(null!==
c.localScope&&void 0!==c.localScope[m]||void 0!==c.globalScope[m])break;!1===d&&a.push(w(b,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":D(b.object,c,d,a,e);!0===b.computed&&D(b.property,c,d,a,e);break;case "Literal":break;case "CallExpression":"Identifier"!==b.callee.type&&a.push(w(b,"SYNTAX","ONLYNODESSUPPORTED"));for(f=0;f<b.arguments.length;f++)D(b.arguments[f],c,d,a,e);if("Identifier"===b.callee.type){var h=r(b.callee.name,b.arguments,c);!1===d&&-1===h&&a.push(w(b,"SYNTAX","NOTFOUND"));
-2===h&&a.push(w(b,"SYNTAX","WRONGSIGNATURE"))}break;case "UnaryExpression":D(b.argument,c,d,a,e);break;case "BinaryExpression":D(b.left,c,d,a,e);D(b.right,c,d,a,e);switch(b.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:a.push(w(b,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(b.operator){case "\x26\x26":case "||":break;default:a.push(w(b,"SYNTAX","OPERATORNOTRECOGNISED"))}D(b.left,
c,d,a,e);"AssignmentExpression"!==b.left.type&&"UpdateExpression"!==b.left.type||a.push(w(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));D(b.right,c,d,a,e);"AssignmentExpression"!==b.right.type&&"UpdateExpression"!==b.right.type||a.push(w(b,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":a.push(w(b,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(f=0;f<b.elements.length;f++)D(b.elements[f],c,d,a,e);break;case "ObjectExpression":for(f=0;f<b.properties.length;f++)D(b.properties[f],
c,d,a,e);break;case "Property":"Literal"!==b.key.type&&"Identifier"!==b.key.type&&a.push(w(b,"SYNTAX","ONLYLITERAL"));"Literal"===b.key.type&&D(b.key,c,d,a,e);D(b.value,c,d,a,e);break;default:a.push(w(b,"SYNTAX","UNRECOGNISED"))}}catch(ea){a.push({line:null===b?0:b.loc.start.line,character:null===b?0:b.loc.start.column,reason:"Unnexpected Syntax"})}}function E(b){var c=[];m(b,function(b){"CallExpression"===b.type&&"Identifier"===b.callee.type&&c.push(b.callee.name.toLowerCase());return!0});return c}
Object.defineProperty(h,"__esModule",{value:!0});h.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",
max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},
polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",
max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",
max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",
max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",
max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"}};for(var V in h.functionDecls)h.functionDecls[V].fmin=h.functionDecls[V].min,h.functionDecls[V].fmax=h.functionDecls[V].max;var da="featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl attachments featuresetbyportalitem".split(" "),F="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
h.addFunctionDeclaration=function(b,c){var d=h.functionDecls[b.name.toLowerCase()];void 0===d?"sync"===c?h.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max}:h.functionDecls[b.name.toLowerCase()]={fmin:b.min,fmax:b.max}:"sync"===c?(d.min=b.min,d.max=b.max):(d.fmin=b.min,d.fmax=b.max)};h.checkFunctionSignature=l;h.findFunction=r;h.walk=m;h.validateLanguageNode=q;h.testValidityOfExpression=f;h.referencesMember=a;h.referencesFunction=function(b,c){var d=!1,a=c.toLowerCase();m(b,function(b){return d?
!1:"CallExpression"===b.type&&"Identifier"===b.callee.type&&b.callee.name&&b.callee.name.toLowerCase()===a?(d=!0,!1):!0});return d};h.findFieldLiterals=function(b){var c=[];m(b,function(b){if("MemberExpression"!==b.type||"Identifier"!==b.object.type)return!0;!1===b.computed&&b.object&&b.object.name&&b.property&&"Identifier"===b.property.type&&b.property.name?c.push(b.object.name.toLowerCase()+"."+b.property.name.toLowerCase()):b.object&&b.object.name&&b.property&&"Literal"===b.property.type&&"string"===
typeof b.property.value&&c.push(b.object.name.toLowerCase()+"."+b.property.value.toString().toLowerCase());return!1});return c};h.extractFunctionDeclaration=g;h.validateFunction=e;h.constructGlobalScope=C;h.validateScript=function(b,c,d,a){void 0===d&&(d="async");void 0===a&&(a=h.functionDecls);c={globalScope:C(c.vars,a,c.customFunctions,d),localScope:null};return f(b.body[0].body,c)};h.validateLanguage=function(b){return"BlockStatement"!==b.body[0].body.type?"Invalid formula content.":q(b.body[0].body)};
h.nodeErrorMessage=c;h.makeError=w;h.extractAllIssuesInFunction=y;h.extractAllIssues=D;h.checkScript=function(b,c,d,a,e){void 0===a&&(a="async");void 0===e&&(e=h.functionDecls);var g=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===c||void 0===c)c={vars:{},customFunctions:[]};c={globalScope:C(c.vars,e,c.customFunctions,a),localScope:null};try{D(b.body[0].body,c,d,g)}catch(t){}return g};h.findFunctionCalls=E;h.findScriptDependencies=function(b,
c){void 0===c&&(c=[]);var d=null;if(void 0===b.usesFeatureSet){null===d&&(d=E(b));b.usesFeatureSet=!1;for(var e=0;e<d.length;e++)-1<da.indexOf(d[e])&&(b.usesFeatureSet=!0,b.isAsync=!0);if(!1===b.usesFeatureSet&&c&&0<c.length)for(e=0;e<c.length;e++)if(a(b,c[e])){b.usesFeatureSet=!0;b.isAsync=!0;break}}if(void 0===b.usesGeometry)for(b.usesGeometry=!1,null===d&&(d=E(b)),e=0;e<d.length;e++)-1<F.indexOf(d[e])&&(b.usesGeometry=!0)};h.scriptUsesFeatureSet=function(b){b=E(b);for(var c=0;c<b.length;c++)if(-1<
da.indexOf(b[c]))return!0;return!1}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils"],function(v,h,l){function r(h){return null===h?h:isNaN(h.getTime())?null:h}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(h,m){h.today=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,0,0);a=new Date;a.setHours(0,0,0,0);return a})};h.now=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,0,0);return new Date})};h.timestamp=function(h,
f){return m(h,f,function(a,g,e){l.pcCheck(e,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};h.toutc=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};h.tolocal=function(h,f){return m(h,f,function(a,g,
e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?null:l.MomentLibrary.Moment.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};h.day=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getDate()})};h.month=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getMonth()})};h.year=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,
1,1);a=l.toDate(e[0]);return null===a?NaN:a.getFullYear()})};h.hour=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getHours()})};h.second=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getSeconds()})};h.millisecond=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getMilliseconds()})};h.minute=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,
1,1);a=l.toDate(e[0]);return null===a?NaN:a.getMinutes()})};h.weekday=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,1,1);a=l.toDate(e[0]);return null===a?NaN:a.getDay()})};h.date=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,0,7);if(3===e.length)return r(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),0,0,0,0));if(4===e.length)return r(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),0,0,0));if(5===e.length)return r(new Date(l.toNumber(e[0]),
l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),l.toNumber(e[4]),0,0));if(6===e.length)return r(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),l.toNumber(e[4]),l.toNumber(e[5]),0));if(7===e.length)return r(new Date(l.toNumber(e[0]),l.toNumber(e[1]),l.toNumber(e[2]),l.toNumber(e[3]),l.toNumber(e[4]),l.toNumber(e[5]),l.toNumber(e[6])));if(2===e.length){a=l.toString(e[1]);if(""===a)return null;a=l.standardiseDateFormat(a);e=l.MomentLibrary.Moment(l.toString(e[0]),a,!0);
return!0===e.isValid()?e.toDate():null}if(1===e.length){if(l.isString(e[0])&&""===e[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=l.toNumber(e[0]);return!1===isNaN(a)?r(new Date(a)):l.toDate(e[0])}if(0===e.length)return new Date})};h.datediff=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,2,3);a=l.toDateM(e[0]);g=l.toDateM(e[1]);if(null===a||null===g)return NaN;switch(l.toString(e[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(g,"days",!0);case "months":case "month":return a.diff(g,
"months",!0);case "minutes":case "minute":case "m":return"M"===e[2]?a.diff(g,"months",!0):a.diff(g,"minutes",!0);case "seconds":case "second":case "s":return a.diff(g,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(g);case "hours":case "hour":case "h":return a.diff(g,"hours",!0);case "years":case "year":case "y":return a.diff(g,"years",!0);default:return a.diff(g)}})};h.dateadd=function(h,f){return m(h,f,function(a,g,e){l.pcCheck(e,2,3);a=l.toDateM(e[0]);if(null===a)return null;
g="milliseconds";switch(l.toString(e[2]).toLowerCase()){case "days":case "day":case "d":g="days";break;case "months":case "month":g="months";break;case "minutes":case "minute":case "m":g="M"===e[2]?"months":"minutes";break;case "seconds":case "second":case "s":g="seconds";break;case "milliseconds":case "millisecond":case "ms":g="milliseconds";break;case "hours":case "hour":case "h":g="hours";break;case "years":case "year":case "y":g="years"}a.add(l.toNumber(e[1]),g);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/support/jsonUtils ../../geometry/support/coordsUtils".split(" "),
function(v,h,l,r,n,m,q,f,a,g,e,C,c,w,y){Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(h,E){h.ringisclockwise=function(c,a){return E(c,a,function(c,b,a){m.pcCheck(a,1,1);c=[];var d=b=!1;if(null===a[0])return!1;if(m.isArray(a[0])){for(var e=0,k=a[0];e<k.length;e++){var f=k[e];if(f instanceof g)c.push(f.hasZ?f.hasM?[f.x,f.y,f.z,f.m]:[f.x,f.y,f.z]:[f.x,f.y]);else throw Error("Invalid Argument");}0<c.length&&(b=a[0][0].hasZ,d=a[0][0].hasM)}else if(a[0]instanceof n)c=a[0]._elements,
0<c.length&&(b=a[0]._hasZ,d=a[0]._hasM);else if(m.isImmutableArray(a[0])){e=0;for(k=a[0].toArray();e<k.length;e++)if(f=k[e],f instanceof g)c.push(f.hasZ?f.hasM?[f.x,f.y,f.z,f.m]:[f.x,f.y,f.z]:[f.x,f.y]);else throw Error("Invalid Argument");0<c.length&&(b=a[0].get(0).hasZ,d=a[0].get(0).hasM)}else throw Error("Invalid Argument");return 3>c.length?!1:y.isClockwise(c,d,b)})};h.polygon=function(c,a){return E(c,a,function(a,b,g){m.pcCheck(g,1,1);a=null;if(g[0]instanceof l){if(a=m.fixSpatialReference(r.parseGeometryFromDictionary(g[0]),
c.spatialReference),!1===a instanceof e)throw Error("Illegal Parameter");}else a=g[0]instanceof e?w.fromJSON(g[0].toJSON()):m.fixSpatialReference(new e(JSON.parse(g[0])),c.spatialReference);if(null!==a&&!1===a.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return m.fixNullGeometry(a)})};h.polyline=function(c,a){return E(c,a,function(a,b,e){m.pcCheck(e,1,1);a=null;if(e[0]instanceof l){if(a=m.fixSpatialReference(r.parseGeometryFromDictionary(e[0]),
c.spatialReference),!1===a instanceof C)throw Error("Illegal Parameter");}else a=e[0]instanceof C?w.fromJSON(e[0].toJSON()):m.fixSpatialReference(new C(JSON.parse(e[0])),c.spatialReference);if(null!==a&&!1===a.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return m.fixNullGeometry(a)})};h.point=function(c,a){return E(c,a,function(a,b,e){m.pcCheck(e,1,1);a=null;if(e[0]instanceof l){if(a=m.fixSpatialReference(r.parseGeometryFromDictionary(e[0]),
c.spatialReference),!1===a instanceof g)throw Error("Illegal Parameter");}else a=e[0]instanceof g?w.fromJSON(e[0].toJSON()):m.fixSpatialReference(new g(JSON.parse(e[0])),c.spatialReference);if(null!==a&&!1===a.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return m.fixNullGeometry(a)})};h.multipoint=function(c,e){return E(c,e,function(e,b,g){m.pcCheck(g,1,1);e=null;if(g[0]instanceof l){if(e=
m.fixSpatialReference(r.parseGeometryFromDictionary(g[0]),c.spatialReference),!1===e instanceof a)throw Error("Illegal Parameter");}else e=g[0]instanceof a?w.fromJSON(g[0].toJSON()):m.fixSpatialReference(new a(JSON.parse(g[0])),c.spatialReference);if(null!==e&&!1===e.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return m.fixNullGeometry(e)})};h.extent=function(c,f){return E(c,f,function(f,
b,k){k=m.autoCastFeatureToGeometry(k);m.pcCheck(k,1,1);f=null;k[0]instanceof l?f=m.fixSpatialReference(r.parseGeometryFromDictionary(k[0]),c.spatialReference):k[0]instanceof g?(f={xmin:k[0].x,ymin:k[0].y,xmax:k[0].x,ymax:k[0].y,spatialReference:k[0].spatialReference.toJSON()},k[0].hasZ?(f.zmin=k[0].z,f.zmax=k[0].z):k[0].hasM&&(f.mmin=k[0].m,f.mmax=k[0].m),f=w.fromJSON(f)):f=k[0]instanceof e?w.fromJSON(k[0].extent.toJSON()):k[0]instanceof C?w.fromJSON(k[0].extent.toJSON()):k[0]instanceof a?w.fromJSON(k[0].extent.toJSON()):
k[0]instanceof q?w.fromJSON(k[0].toJSON()):m.fixSpatialReference(new q(JSON.parse(k[0])),c.spatialReference);if(null!==f&&!1===f.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return m.fixNullGeometry(f)})};h.geometry=function(c,a){return E(c,a,function(a,b,e){m.pcCheck(e,1,1);a=null;a=e[0]instanceof r?m.fixSpatialReference(e[0].geometry(),c.spatialReference):e[0]instanceof l?m.fixSpatialReference(r.parseGeometryFromDictionary(e[0]),
c.spatialReference):m.fixSpatialReference(w.fromJSON(JSON.parse(e[0])),c.spatialReference);if(null!==a&&!1===a.spatialReference.equals(c.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return m.fixNullGeometry(a)})};h.setgeometry=function(c,a){return E(c,a,function(c,b,a){m.pcCheck(a,2,2);if(a[0]instanceof r){if(!0===a[0].immutable)throw Error("Feature is Immutable");if(a[1]instanceof f||null===a[1])a[0]._geometry=a[1];
else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return m.voidOperation})};h.feature=function(c,a){return E(c,a,function(a,b,e){if(0===e.length)throw Error("Missing Parameters");a=null;if(1===e.length)if(m.isString(e[0]))a=r.fromJson(JSON.parse(e[0]));else if(e[0]instanceof r)a=r.createFromArcadeFeature(e[0]);else if(e[0]instanceof f)a=r.createFromGraphicLikeObject(e[0],null,null);else if(e[0]instanceof l)a=e[0].hasField("geometry")?e[0].field("geometry"):null,b=e[0].hasField("attributes")?
e[0].field("attributes"):null,null!==a&&a instanceof l&&(a=r.parseGeometryFromDictionary(a)),null!==b&&(b=r.parseAttributesFromDictionary(b)),a=r.createFromGraphicLikeObject(a,b,null);else throw Error("Illegal Argument");else{if(2===e.length){b=a=null;if(null!==e[0])if(e[0]instanceof f)a=e[0];else if(a instanceof l)a=r.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");if(null!==e[1])if(e[1]instanceof l)b=r.parseAttributesFromDictionary(e[1]);else throw Error("Illegal Argument");
}else{a=null;b={};if(null!==e[0])if(e[0]instanceof f)a=e[0];else if(a instanceof l)a=r.parseGeometryFromDictionary(e[0]);else throw Error("Illegal Argument");for(var d=1;d<e.length;d+=2){var g=m.toString(e[d]),k=e[d+1];if(null===k||void 0===k||m.isString(k)||isNaN(k)||m.isDate(k)||m.isNumber(k)||m.isBoolean(k)){if(m.isFunctionParameter(k)||!1===m.isSimpleType(k))throw Error("Illegal Argument");b[g]=k===m.voidOperation?null:k}else throw Error("Illegal Argument");}}a=r.createFromGraphicLikeObject(a,
b,null)}a._geometry=m.fixSpatialReference(a.geometry(),c.spatialReference);a.immutable=!1;return a})};h.dictionary=function(c,a){return E(c,a,function(c,b,a){if(0===a.length)return a=new l,a.immutable=!1,a;if(1===a.length&&m.isString(a[0]))try{var d=JSON.parse(a[0]),e=l.convertObjectToArcadeDictionary(d);e.immutable=!1;return e}catch(I){throw Error("Missing Parameters or Illegal Json");}if(0!==a.length%2)throw Error("Missing Parameters");c={};for(b=0;b<a.length;b+=2)if(d=m.toString(a[b]),e=a[b+1],
null===e||void 0===e||m.isString(e)||isNaN(e)||m.isDate(e)||m.isNumber(e)||m.isBoolean(e)||m.isArray(e)||m.isImmutableArray(e)){if(m.isFunctionParameter(e))throw Error("Illegal Argument");c[d]=e===m.voidOperation?null:e}else throw Error("Illegal Argument");a=new l(c);a.immutable=!1;return a})};h.haskey=function(c,a){return E(c,a,function(c,b,a){m.pcCheck(a,2,2);c=m.toString(a[1]);if(a[0]instanceof r||a[0]instanceof l)return a[0].hasField(c);throw Error("Illegal Argument");})};h.indexof=function(c,
a){return E(c,a,function(c,b,a){m.pcCheck(a,2,2);c=a[1];if(m.isArray(a[0])){for(b=0;b<a[0].length;b++)if(m.equalityTest(c,a[0][b]))return b;return-1}if(m.isImmutableArray(a[0])){var d=a[0].length();for(b=0;b<d;b++)if(m.equalityTest(c,a[0].get(b)))return b;return-1}throw Error("Illegal Argument");})};h.angle=function(a,e){return E(a,e,function(a,b,e){e=m.autoCastFeatureToGeometry(e);m.pcCheck(e,2,3);if(!(e[0]instanceof g))throw Error("Illegal Argument");if(!(e[1]instanceof g))throw Error("Illegal Argument");
if(2<e.length&&!(e[2]instanceof g))throw Error("Illegal Argument");return 2===e.length?c.angle2D(e[0],e[1]):c.angleBetween2D(e[0],e[1],e[2])})};h.bearing=function(a,e){return E(a,e,function(a,b,e){e=m.autoCastFeatureToGeometry(e);m.pcCheck(e,2,3);if(!(e[0]instanceof g))throw Error("Illegal Argument");if(!(e[1]instanceof g))throw Error("Illegal Argument");if(2<e.length&&!(e[2]instanceof g))throw Error("Illegal Argument");return 2===e.length?c.bearing2D(e[0],e[1]):c.bearingBetween2D(e[0],e[1],e[2])})};
h.isselfintersecting=function(g,f){return E(g,f,function(f,b,k){k=m.autoCastFeatureToGeometry(k);m.pcCheck(k,1,1);f=k[0];if(f instanceof e)return f.isSelfIntersecting;if(f instanceof C)return f=f.paths,c.pathsSelfIntersecting(f);if(f instanceof a)for(b=f.points,k=0;k<b.length;k++)for(var d=0;d<b.length;d++)if(d!==k){for(var h=!0,n=0;n<b[k].length;n++)if(b[k][n]!==b[d][n]){h=!1;break}if(!0===h)return!0}return m.isArray(f)||m.isImmutableArray(f)?(f=m.autoCastArrayOfPointsToPolyline(f,g.spatialReference),
null!==f&&(f=f.paths),c.pathsSelfIntersecting(f)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point","../../geometry/support/intersects"],function(v,h,l,r){function n(a,g,c){var e={x:0,y:0};g&&(e.z=0);c&&(e.m=0);for(var f=0,h=a[0],n=0;n<a.length;n++){var l=a[n],C;a:if(l.length!==h.length)C=!1;else{for(C=0;C<l.length;C++)if(l[C]!==h[C]){C=!1;break a}C=!0}if(!1===C){C=m(h,l,g);var q=l,b=g,k=c,d={x:(h[0]+q[0])/2,y:(h[1]+q[1])/2};b&&(d.z=(h[2]+q[2])/
2);b&&k?d.m=(h[3]+q[3])/2:k&&(d.m=(h[2]+q[2])/2);h=d;h.x*=C;h.y*=C;e.x+=h.x;e.y+=h.y;g&&(h.z*=C,e.z+=h.z);c&&(h.m*=C,e.m+=h.m);f+=C;h=l}}0<f?(e.x/=f,e.y/=f,g&&(e.z/=f),c&&(e.m/=f)):(e.x=a[0][0],e.y=a[0][1],g&&(e.z=a[0][2]),c&&g?e.m=a[0][3]:c&&(e.m=a[0][2]));return e}function m(a,g,c){var e=g[0]-a[0];a=g[1]-a[1];return c?(g=g[2]-g[2],Math.sqrt(e*e+a*a+g*g)):Math.sqrt(e*e+a*a)}function q(a,g,c){for(void 0===c&&(c=0);a<c;)a+=g;for(c+=g;a>=c;)a-=g;return a}function f(a,g){return Math.atan2(g.y-a.y,g.x-
a.x)}function a(a,g,c){var e=a.x-g.x;a=a.y-g.y;var f=c.x-g.x;g=c.y-g.y;return Math.atan2(f*a-e*g,f*e+g*a)}Object.defineProperty(h,"__esModule",{value:!0});h.centroidPolyline=function(a){for(var e={x:0,y:0,spatialReference:a.spatialReference.toJSON()},c={x:0,y:0,spatialReference:a.spatialReference.toJSON()},g=0,f=0,h=0;h<a.paths.length;h++)if(0!==a.paths[h].length){var q;q=a.paths[h];var r=!0===a.hasZ;if(1>=q.length)q=0;else{for(var da=0,F=1;F<q.length;F++)da+=m(q[F-1],q[F],r);q=da}0===q?(r=n(a.paths[h],
!0===a.hasZ,!0===a.hasM),e.x+=r.x,e.y+=r.y,!0===a.hasZ&&(e.z+=r.z),!0===a.hasM&&(e.m+=r.m),++g):(r=n(a.paths[h],!0===a.hasZ,!0===a.hasM),c.x+=r.x*q,c.y+=r.y*q,!0===a.hasZ&&(c.z+=r.z*q),!0===a.hasM&&(c.m+=r.m*q),f+=q)}return 0<f?(c.x/=f,c.y/=f,!0===a.hasZ&&(c.z/=f),!0===a.hasM&&(c.m/=f),new l(c)):0<g?(e.x/=g,e.y/=g,!0===a.hasZ&&(c.z/=g),!0===a.hasM&&(e.m/=g),new l(e)):null};h.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var e=0,c=0,g=0,f=0,h=0;h<a.points.length;h++){var m=
a.getPoint(h);!0===m.hasZ&&(g+=m.z);!0===m.hasM&&(f+=m.m);e+=m.x;c+=m.y;f+=m.m}e={x:e/a.points.length,y:c/a.points.length,spatialReference:null};e.spatialReference=a.spatialReference.toJSON();!0===a.hasZ&&(e.z=g/a.points.length);!0===a.hasM&&(e.m=f/a.points.length);return new l(e)};h.angleRad=f;h.angle2D=function(a,g){return q(f(a,g),2*Math.PI)*(180/Math.PI)};h.bearing2D=function(a,g){return q(Math.PI/2-f(a,g),2*Math.PI)*(180/Math.PI)};h.angleBetweenRad=a;h.angleBetween2D=function(e,g,c){return q(a(e,
g,c),2*Math.PI)*(180/Math.PI)};h.bearingBetween2D=function(e,g,c){return q(-1*a(e,g,c),2*Math.PI)*(180/Math.PI)};var g=[0,0];h.pathsSelfIntersecting=function(a){for(var e=0;e<a.length;e++){for(var c=a[e],f=0;f<c.length-1;f++)for(var h=c[f],m=c[f+1],n=e+1;n<a.length;n++)for(var l=0;l<a[n].length-1;l++){var q=a[n][l],F=a[n][l+1],b=r.segmentIntersects(h,m,q,F,g);if(b&&!(g[0]===h[0]&&g[1]===h[1]||g[0]===q[0]&&g[1]===q[1]||g[0]===m[0]&&g[1]===m[1]||g[0]===F[0]&&g[1]===F[1]))return!0}l=c.length;if(!(3>
l))for(f=0;f<=l-2;f++)for(h=c[f],m=c[f+1],n=f+2;n<=l-2;n++)if(q=c[n],F=c[n+1],(b=r.segmentIntersects(h,m,q,F,g))&&!(g[0]===h[0]&&g[1]===h[1]||g[0]===q[0]&&g[1]===q[1]||g[0]===m[0]&&g[1]===m[1]||g[0]===F[0]&&g[1]===F[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(v,h,l,r,n,m,q,f,a,g,e,C,c){function w(c){return 0===l.version.indexOf("4.")?e.fromExtent(c):new e({spatialReference:c.spatialReference,rings:[[[c.xmin,c.ymin],[c.xmin,c.ymax],[c.xmax,c.ymax],[c.xmax,c.ymin],[c.xmin,c.ymin]]]})}Object.defineProperty(h,"__esModule",{value:!0});var y=null;h.setGeometryEngine=function(c){y=c};h.registerFunctions=function(h,l){function v(c){n.pcCheck(c,2,2);if(!(c[0]instanceof f&&c[1]instanceof f||c[0]instanceof f&&null===c[1]||c[1]instanceof f&&null===c[0]||
null===c[0]&&null===c[1]))throw Error("Illegal Argument");}h.disjoint=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!0:y.disjoint(d[0],d[1])})};h.intersects=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:y.intersects(d[0],d[1])})};h.touches=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:y.touches(d[0],
d[1])})};h.crosses=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:y.crosses(d[0],d[1])})};h.within=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:y.within(d[0],d[1])})};h.contains=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:y.contains(d[0],d[1])})};h.overlaps=function(c,a){return l(c,a,function(b,
c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?!1:y.overlaps(d[0],d[1])})};h.equals=function(c,a){return l(c,a,function(b,c,d){n.pcCheck(d,2,2);return d[0]===d[1]?!0:d[0]instanceof f&&d[1]instanceof f?y.equals(d[0],d[1]):n.isDate(d[0])&&n.isDate(d[1])?d[0].getTime()===d[1].getTime():!1})};h.relate=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);n.pcCheck(d,3,3);if(d[0]instanceof f&&d[1]instanceof f)return y.relate(d[0],d[1],n.toString(d[2]));
if(d[0]instanceof f&&null===d[1]||d[1]instanceof f&&null===d[0]||null===d[0]&&null===d[1])return!1;throw Error("Illegal Argument");})};h.intersection=function(c,a){return l(c,a,function(b,c,d){d=n.autoCastFeatureToGeometry(d);v(d);return null===d[0]||null===d[1]?null:y.intersect(d[0],d[1])})};h.union=function(c,a){return l(c,a,function(b,a,d){d=n.autoCastFeatureToGeometry(d);b=[];if(0===d.length)throw Error("Function called with wrong number of Parameters");if(1===d.length)if(n.isArray(d[0]))for(d=
n.autoCastFeatureToGeometry(d[0]),a=0;a<d.length;a++){if(null!==d[a]){if(!(d[a]instanceof f))throw Error("Illegal Argument");b.push(d[a])}}else if(n.isImmutableArray(d[0]))for(d=n.autoCastFeatureToGeometry(d[0].toArray()),a=0;a<d.length;a++){if(null!==d[a]){if(!(d[a]instanceof f))throw Error("Illegal Argument");b.push(d[a])}}else{if(d[0]instanceof f)return n.fixSpatialReference(r.cloneGeometry(d[0]),c.spatialReference);if(null===d[0])return null;throw Error("Illegal Argument");}else for(a=0;a<d.length;a++)if(null!==
d[a]){if(!(d[a]instanceof f))throw Error("Illegal Argument");b.push(d[a])}return 0===b.length?null:y.union(b)})};h.difference=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);v(a);return null!==a[0]&&null===a[1]?r.cloneGeometry(a[0]):null===a[0]?null:y.difference(a[0],a[1])})};h.symmetricdifference=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);v(a);return null===a[0]&&null===a[1]?null:null===a[0]?r.cloneGeometry(a[1]):null===a[1]?r.cloneGeometry(a[0]):
y.symmetricDifference(a[0],a[1])})};h.clip=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,2);if(!(a[1]instanceof q)&&null!==a[1])throw Error("Illegal Argument");if(null===a[0])return null;if(!(a[0]instanceof f))throw Error("Illegal Argument");return null===a[1]?null:y.clip(a[0],a[1])})};h.cut=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,2);if(!(a[1]instanceof C)&&null!==a[1])throw Error("Illegal Argument");if(null===
a[0])return[];if(!(a[0]instanceof f))throw Error("Illegal Argument");return null===a[1]?[r.cloneGeometry(a[0])]:y.cut(a[0],a[1])})};h.area=function(c,a){return l(c,a,function(b,a,d){n.pcCheck(d,1,2);d=n.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(n.isArray(d[0])||n.isImmutableArray(d[0]))return b=n.autoCastArrayOfPointsToPolygon(d[0],c.spatialReference),null===b?0:y.planarArea(b,r.convertSquareUnitsToCode(n.defaultUndefined(d[1],-1)));if(!(d[0]instanceof f))throw Error("Illegal Argument");
return y.planarArea(d[0],r.convertSquareUnitsToCode(n.defaultUndefined(d[1],-1)))})};h.areageodetic=function(c,a){return l(c,a,function(b,a,d){n.pcCheck(d,1,2);d=n.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(n.isArray(d[0])||n.isImmutableArray(d[0]))return b=n.autoCastArrayOfPointsToPolygon(d[0],c.spatialReference),null===b?0:y.geodesicArea(b,r.convertSquareUnitsToCode(n.defaultUndefined(d[1],-1)));if(!(d[0]instanceof f))throw Error("Illegal Argument");return y.geodesicArea(d[0],r.convertSquareUnitsToCode(n.defaultUndefined(d[1],
-1)))})};h.length=function(c,a){return l(c,a,function(b,a,d){n.pcCheck(d,1,2);d=n.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(n.isArray(d[0])||n.isImmutableArray(d[0]))return b=n.autoCastArrayOfPointsToPolyline(d[0],c.spatialReference),null===b?0:y.planarLength(b,r.convertLinearUnitsToCode(n.defaultUndefined(d[1],-1)));if(!(d[0]instanceof f))throw Error("Illegal Argument");return y.planarLength(d[0],r.convertLinearUnitsToCode(n.defaultUndefined(d[1],-1)))})};h.lengthgeodetic=function(c,
a){return l(c,a,function(b,a,d){n.pcCheck(d,1,2);d=n.autoCastFeatureToGeometry(d);if(null===d[0])return 0;if(n.isArray(d[0])||n.isImmutableArray(d[0]))return b=n.autoCastArrayOfPointsToPolyline(d[0],c.spatialReference),null===b?0:y.geodesicLength(b,r.convertLinearUnitsToCode(n.defaultUndefined(d[1],-1)));if(!(d[0]instanceof f))throw Error("Illegal Argument");return y.geodesicLength(d[0],r.convertLinearUnitsToCode(n.defaultUndefined(d[1],-1)))})};h.distance=function(c,a){return l(c,a,function(b,a,
d){d=n.autoCastFeatureToGeometry(d);n.pcCheck(d,2,3);b=d[0];if(n.isArray(d[0])||n.isImmutableArray(d[0]))b=n.autoCastArrayOfPointsToMultiPoint(d[0],c.spatialReference);a=d[1];if(n.isArray(d[1])||n.isImmutableArray(d[1]))a=n.autoCastArrayOfPointsToMultiPoint(d[1],c.spatialReference);if(!(b instanceof f))throw Error("Illegal Argument");if(!(a instanceof f))throw Error("Illegal Argument");return y.distance(b,a,r.convertLinearUnitsToCode(n.defaultUndefined(d[2],-1)))})};h.distancegeodetic=function(c,
a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,3);b=a[0];c=a[1];if(!(b instanceof g))throw Error("Illegal Argument");if(!(c instanceof g))throw Error("Illegal Argument");var d=new C({paths:[],spatialReference:b.spatialReference});d.addPath([b,c]);return y.geodesicLength(d,r.convertLinearUnitsToCode(n.defaultUndefined(a[2],-1)))})};h.densify=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,3);if(null===a[0])return null;if(!(a[0]instanceof
f))throw Error("Illegal Argument");b=n.toNumber(a[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return a[0]instanceof e||a[0]instanceof C?y.densify(a[0],b,r.convertLinearUnitsToCode(n.defaultUndefined(a[2],-1))):a[0]instanceof q?y.densify(w(a[0]),b,r.convertLinearUnitsToCode(n.defaultUndefined(a[2],-1))):a[0]})};h.densifygeodetic=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,3);if(null===a[0])return null;if(!(a[0]instanceof
f))throw Error("Illegal Argument");b=n.toNumber(a[1]);if(isNaN(b))throw Error("Illegal Argument");if(0>=b)throw Error("Illegal Argument");return a[0]instanceof e||a[0]instanceof C?y.geodesicDensify(a[0],b,r.convertLinearUnitsToCode(n.defaultUndefined(a[2],-1))):a[0]instanceof q?y.geodesicDensify(w(a[0]),b,r.convertLinearUnitsToCode(n.defaultUndefined(a[2],-1))):a[0]})};h.generalize=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,4);if(null===a[0])return null;
if(!(a[0]instanceof f))throw Error("Illegal Argument");b=n.toNumber(a[1]);if(isNaN(b))throw Error("Illegal Argument");return y.generalize(a[0],b,n.toBoolean(n.defaultUndefined(a[2],!0)),r.convertLinearUnitsToCode(n.defaultUndefined(a[3],-1)))})};h.buffer=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,3);if(null===a[0])return null;if(!(a[0]instanceof f))throw Error("Illegal Argument");b=n.toNumber(a[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===
b?r.cloneGeometry(a[0]):y.buffer(a[0],b,r.convertLinearUnitsToCode(n.defaultUndefined(a[2],-1)))})};h.buffergeodetic=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,3);if(null===a[0])return null;if(!(a[0]instanceof f))throw Error("Illegal Argument");b=n.toNumber(a[1]);if(isNaN(b))throw Error("Illegal Argument");return 0===b?r.cloneGeometry(a[0]):y.geodesicBuffer(a[0],b,r.convertLinearUnitsToCode(n.defaultUndefined(a[2],-1)))})};h.offset=function(a,c){return l(a,
c,function(b,a,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,2,6);if(null===c[0])return null;if(!(c[0]instanceof e||c[0]instanceof C))throw Error("Illegal Argument");b=n.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");a=n.toNumber(n.defaultUndefined(c[4],10));if(isNaN(a))throw Error("Illegal Argument");var d=n.toNumber(n.defaultUndefined(c[5],0));if(isNaN(d))throw Error("Illegal Argument");return y.offset(c[0],b,r.convertLinearUnitsToCode(n.defaultUndefined(c[2],-1)),n.toString(n.defaultUndefined(c[3],
"round")).toLowerCase(),a,d)})};h.rotate=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,2,3);b=a[0];if(null===b)return null;if(!(b instanceof f))throw Error("Illegal Argument");b instanceof q&&(b=e.fromExtent(b));c=n.toNumber(a[1]);if(isNaN(c))throw Error("Illegal Argument");a=n.defaultUndefined(a[2],null);if(null===a)return y.rotate(b,c);if(a instanceof g)return y.rotate(b,c,a);throw Error("Illegal Argument");})};h.centroid=function(c,h){return l(c,h,function(b,
h,d){d=n.autoCastFeatureToGeometry(d);n.pcCheck(d,1,1);if(null===d[0])return null;b=d[0];if(n.isArray(d[0])||n.isImmutableArray(d[0]))b=n.autoCastArrayOfPointsToMultiPoint(d[0],c.spatialReference);if(null===b)return null;if(!(b instanceof f))throw Error("Illegal Argument");return b instanceof g?n.fixSpatialReference(r.cloneGeometry(d[0]),c.spatialReference):b instanceof e?b.centroid:b instanceof C?m.centroidPolyline(b):b instanceof a?m.centroidMultiPoint(b):b instanceof q?b.center:null})};h.multiparttosinglepart=
function(h,m){return l(h,m,function(b,m,d){d=n.autoCastFeatureToGeometry(d);n.pcCheck(d,1,1);m=[];if(null===d[0])return null;if(!(d[0]instanceof f))throw Error("Illegal Argument");if(d[0]instanceof g||d[0]instanceof q)return[n.fixSpatialReference(r.cloneGeometry(d[0]),h.spatialReference)];b=y.simplify(d[0]);if(b instanceof e){m=[];var k=[];for(d=0;d<b.rings.length;d++)if(b.isClockwise(b.rings[d])){var l=c.fromJSON({rings:[b.rings[d]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJSON()});
m.push(l)}else k.push({ring:b.rings[d],pt:b.getPoint(d,0)});for(b=0;b<k.length;b++)for(d=0;d<m.length;d++)if(m[d].contains(k[b].pt)){m[d].addRing(k[b].ring);break}return m}if(b instanceof C){m=[];for(d=0;d<b.paths.length;d++)k=c.fromJSON({paths:[b.paths[d]],hasZ:!0===b.hasZ,hasM:!0===b.hasM,spatialReference:b.spatialReference.toJSON()}),m.push(k);return m}if(d[0]instanceof a){b=n.fixSpatialReference(r.cloneGeometry(d[0]),h.spatialReference);for(d=0;d<b.points.length;d++)m.push(b.getPoint(d));return m}return null})};
h.issimple=function(c,a){return l(c,a,function(b,c,a){a=n.autoCastFeatureToGeometry(a);n.pcCheck(a,1,1);if(null===a[0])return!0;if(!(a[0]instanceof f))throw Error("Illegal Argument");return y.isSimple(a[0])})};h.simplify=function(a,c){return l(a,c,function(b,a,c){c=n.autoCastFeatureToGeometry(c);n.pcCheck(c,1,1);if(null===c[0])return null;if(!(c[0]instanceof f))throw Error("Illegal Argument");return y.simplify(c[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent"],
function(v,h,l){Object.defineProperty(h,"__esModule",{value:!0});h.convertSquareUnitsToCode=function(h){if(void 0===h)return null;if("number"===typeof h)return h;switch(h.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};h.shapeExtent=function(h){if(null===h)return null;switch(h.type){case "polygon":case "multipoint":case "polyline":return h.extent;case "point":return new l({xmin:h.x,
ymin:h.y,xmax:h.x,ymax:h.y,spatialReference:h.spatialReference});case "extent":return h}return null};h.convertLinearUnitsToCode=function(h){if(void 0===h)return null;if("number"===typeof h||"number"===typeof h)return h;switch(h.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};h.sameGeomType=function(h,l){return h===l||"point"===h&&"esriGeometryPoint"===l||"polyline"===h&&"esriGeometryPolyline"===l||"polygon"===h&&"esriGeometryPolygon"===l||"extent"===h&&"esriGeometryEnvelope"===l||"multipoint"===h&&"esriGeometryMultipoint"===
l||"point"===l&&"esriGeometryPoint"===h||"polyline"===l&&"esriGeometryPolyline"===h||"polygon"===l&&"esriGeometryPolygon"===h||"extent"===l&&"esriGeometryEnvelope"===h||"multipoint"===l&&"esriGeometryMultipoint"===h?!0:!1};h.cloneGeometry=function(h){if(null===h)return null;var l=h.clone();void 0!==h.cache._geVersion&&(l.cache._geVersion=h.cache._geVersion);return l}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","../../core/number"],function(v,h,l,r){function n(h,
l,f){if("undefined"===typeof f||0===+f)return Math[h](l);l=+l;f=+f;if(isNaN(l)||"number"!==typeof f||0!==f%1)return NaN;l=l.toString().split("e");l=Math[h](+(l[0]+"e"+(l[1]?+l[1]-f:-f)));l=l.toString().split("e");return+(l[0]+"e"+(l[1]?+l[1]+f:f))}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(h,q){function f(a,g,e){a=l.toNumber(a);return isNaN(a)?a:isNaN(g)||isNaN(e)||g>e?NaN:a<g?g:a>e?e:a}h.number=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,2);a=c[0];
return l.isNumber(a)?a:null===a?0:l.isDate(a)||l.isBoolean(a)?Number(a):l.isArray(a)?NaN:""===a||void 0===a?Number(a):l.isString(a)?void 0!==c[1]?(c=l.multiReplace(c[1],"\u2030",""),c=l.multiReplace(c,"\u00a4",""),r.parse(a,{pattern:c})):Number(a.trim()):Number(a)})};h.abs=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.abs(l.toNumber(c[0]))})};h.acos=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.acos(l.toNumber(c[0]))})};h.asin=function(a,g){return q(a,
g,function(a,g,c){l.pcCheck(c,1,1);return Math.asin(l.toNumber(c[0]))})};h.atan=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.atan(l.toNumber(c[0]))})};h.atan2=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,2,2);return Math.atan2(l.toNumber(c[0]),l.toNumber(c[1]))})};h.ceil=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,2);return 2===c.length?(a=l.toNumber(c[1]),isNaN(a)&&(a=0),n("ceil",l.toNumber(c[0]),-1*a)):Math.ceil(l.toNumber(c[0]))})};h.round=function(a,
g){return q(a,g,function(a,g,c){l.pcCheck(c,1,2);return 2===c.length?(a=l.toNumber(c[1]),isNaN(a)&&(a=0),n("round",l.toNumber(c[0]),-1*a)):Math.round(l.toNumber(c[0]))})};h.floor=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,2);return 2===c.length?(a=l.toNumber(c[1]),isNaN(a)&&(a=0),n("floor",l.toNumber(c[0]),-1*a)):Math.floor(l.toNumber(c[0]))})};h.cos=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.cos(l.toNumber(c[0]))})};h.isnan=function(a,g){return q(a,g,function(a,
g,c){l.pcCheck(c,1,1);return"number"===typeof c[0]&&isNaN(c[0])})};h.exp=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.exp(l.toNumber(c[0]))})};h.log=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.log(l.toNumber(c[0]))})};h.pow=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,2,2);return Math.pow(l.toNumber(c[0]),l.toNumber(c[1]))})};h.random=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,0,0);return Math.random()})};h.sin=function(a,
g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.sin(l.toNumber(c[0]))})};h.sqrt=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.sqrt(l.toNumber(c[0]))})};h.tan=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return Math.tan(l.toNumber(c[0]))})};h.defaultvalue=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,2,2);return null===c[0]||""===c[0]||void 0===c[0]?c[1]:c[0]})};h.isempty=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return null===
c[0]||""===c[0]||void 0===c[0]?!0:!1})};h["boolean"]=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,1,1);return l.toBoolean(c[0])})};h.constrain=function(a,g){return q(a,g,function(a,g,c){l.pcCheck(c,3,3);a=l.toNumber(c[1]);g=l.toNumber(c[2]);if(l.isArray(c[0])){var e=[],h=0;for(c=c[0];h<c.length;h++)e.push(f(c[h],a,g));return e}if(l.isImmutableArray(c[0])){e=[];for(h=0;h<c[0].length();h++)e.push(f(c[0].get(h),a,g));return e}return f(c[0],a,g)})}}})},"esri/arcade/functions/stats":function(){define(["require",
"exports","../languageUtils","./fieldStats"],function(v,h,l,r){function n(h,n,f,a){if(1===a.length){if(l.isArray(a[0]))return r.calculateStat(h,a[0],-1);if(l.isImmutableArray(a[0]))return r.calculateStat(h,a[0].toArray(),-1)}return r.calculateStat(h,a,-1)}Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(h,q){h.stdev=function(f,a){return q(f,a,function(a,e,f){return n("stdev",a,e,f)})};h.variance=function(f,a){return q(f,a,function(a,e,f){return n("variance",a,e,f)})};
h.average=function(f,a){return q(f,a,function(a,e,f){return n("mean",a,e,f)})};h.mean=function(f,a){return q(f,a,function(a,e,f){return n("mean",a,e,f)})};h.sum=function(f,a){return q(f,a,function(a,e,f){return n("sum",a,e,f)})};h.min=function(f,a){return q(f,a,function(a,e,f){return n("min",a,e,f)})};h.max=function(f,a){return q(f,a,function(a,e,f){return n("max",a,e,f)})};h.distinct=function(f,a){return q(f,a,function(a,e,f){return n("distinct",a,e,f)})};h.count=function(f,a){return q(f,a,function(a,
e,f){l.pcCheck(f,1,1);if(l.isArray(f[0])||l.isString(f[0]))return f[0].length;if(l.isImmutableArray(f[0]))return f[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(v,h,l){function r(h){for(var l=0,f=0;f<h.length;f++)l+=h[f];return l/h.length}function n(h){for(var l=r(h),f=0,a=0;a<h.length;a++)f+=Math.pow(l-h[a],2);return f/h.length}Object.defineProperty(h,"__esModule",{value:!0});
h.decodeStatType=function(h){switch(h.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};h.calculateStat=function(h,q,f){void 0===f&&(f=1E3);switch(h.toLowerCase()){case "distinct":a:{h=f;f=[];for(var a={},g=[],e=0;e<q.length;e++){if(void 0!==q[e]&&null!==q[e]&&q[e]!==l.voidOperation){var m=
q[e];if(l.isNumber(m)||l.isString(m))void 0===a[m]&&(f.push(m),a[m]=1);else{for(var c=!1,w=0;w<g.length;w++)!0===l.equalityTest(g[w],m)&&(c=!0);!1===c&&(g.push(m),f.push(m))}}if(f.length>=h&&-1!==h){q=f;break a}}q=f}return q;case "avg":case "mean":return r(l.toNumberArray(q));case "min":return Math.min.apply(Math,l.toNumberArray(q));case "sum":q=l.toNumberArray(q);for(f=h=0;f<q.length;f++)h+=q[f];return h;case "max":return Math.max.apply(Math,l.toNumberArray(q));case "stdev":case "stddev":return Math.sqrt(n(l.toNumberArray(q)));
case "var":case "variance":return n(l.toNumberArray(q));case "count":return q.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Dictionary ../Feature ../languageUtils".split(" "),function(v,h,l,r,n,m){Object.defineProperty(h,"__esModule",{value:!0});h.registerFunctions=function(h,f){h.portal=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,1,1);return new l(m.toString(c[0]))})};h.trim=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,
1,1);return m.toString(c[0]).trim()})};h.upper=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,1,1);return m.toString(c[0]).toUpperCase()})};h.proper=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,1,2);a=1;2===c.length&&"firstword"===m.toString(c[1]).toLowerCase()&&(a=2);g=/\s/;c=m.toString(c[0]);for(var e="",f=!0,h=0;h<c.length;h++){var l=c[h];g.test(l)?1===a&&(f=!0):l.toUpperCase()!==l.toLowerCase()&&(f?(l=l.toUpperCase(),f=!1):l=l.toLowerCase());e+=l}return e})};h.lower=function(a,
g){return f(a,g,function(a,g,c){m.pcCheck(c,1,1);return m.toString(c[0]).toLowerCase()})};h.guid=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,0,1);if(0<c.length)switch(m.toString(c[0]).toLowerCase()){case "digits":return m.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return m.generateUUID();case "digits-hyphen-parentheses":return"("+m.generateUUID()+")"}return"{"+m.generateUUID()+"}"})};h.console=function(a,g){return f(a,g,function(e,
g,c){0!==c.length&&(1===c.length?a.console(m.toString(c[0])):a.console(m.toString(c)));return m.voidOperation})};h.mid=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,2,3);a=m.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===c.length)return m.toString(c[0]).substr(a);g=m.toNumber(c[2]);if(isNaN(g))return"";0>g&&(g=0);return m.toString(c[0]).substr(a,g)})};h.find=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,2,3);a=0;if(2<c.length){a=m.toNumber(m.defaultUndefined(c[2],0));if(isNaN(a))return-1;
0>a&&(a=0)}return m.toString(c[1]).indexOf(m.toString(c[0]),a)})};h.left=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,2,2);a=m.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return m.toString(c[0]).substr(0,a)})};h.right=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,2,2);a=m.toNumber(c[1]);if(isNaN(a))return"";0>a&&(a=0);return m.toString(c[0]).substr(-1*a,a)})};h.split=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,2,4);a=m.toNumber(m.defaultUndefined(c[2],-1));g=m.toBoolean(m.defaultUndefined(c[3],
!1));-1===a||null===a||!0===g?c=m.toString(c[0]).split(m.toString(c[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),c=m.toString(c[0]).split(m.toString(c[1]),a));if(!1===g)return c;g=[];for(var e=0;e<c.length&&!(-1!==a&&g.length>=a);e++)""!==c[e]&&void 0!==c[e]&&g.push(c[e]);return g})};h.text=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,1,2);return m.toStringExplicit(c[0],c[1])})};h.concatenate=function(a,g){return f(a,g,function(a,g,c){a=[];if(1>c.length)return"";if(m.isArray(c[0])){g=m.defaultUndefined(c[2],
"");for(var e=0;e<c[0].length;e++)a[e]=m.toStringExplicit(c[0][e],g);return 1<c.length?a.join(c[1]):a.join("")}if(m.isImmutableArray(c[0])){g=m.defaultUndefined(c[2],"");for(e=0;e<c[0].length();e++)a[e]=m.toStringExplicit(c[0].get(e),g);return 1<c.length?a.join(c[1]):a.join("")}for(e=0;e<c.length;e++)a[e]=m.toStringExplicit(c[e]);return a.join("")})};h.reverse=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,1,1);if(m.isArray(c[0]))return a=c[0].slice(0),a.reverse(),a;if(m.isImmutableArray(c[0]))return a=
c[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};h.replace=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,3,4);a=m.toString(c[0]);g=m.toString(c[1]);var e=m.toString(c[2]);return(4===c.length?m.toBoolean(c[3]):1)?m.multiReplace(a,g,e):a.replace(g,e)})};h.domainname=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,2,4);if(c[0]instanceof n)return c[0].domainValueLookup(m.toString(c[1]),c[2],void 0===c[3]?void 0:m.toNumber(c[3]));throw Error("Invalid Parameter");
})};h.domaincode=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,2,4);if(c[0]instanceof n)return c[0].domainCodeLookup(m.toString(c[1]),c[2],void 0===c[3]?void 0:m.toNumber(c[3]));throw Error("Invalid Parameter");})};h.urlencode=function(a,g){return f(a,g,function(a,g,c){m.pcCheck(c,1,1);if(null===c[0])return"";if(c[0]instanceof r){a="";g=0;for(var e=c[0].keys();g<e.length;g++){var f=e[g],h=c[0].field(f);""!==a&&(a+="\x26");a=null===h?a+(encodeURIComponent(f)+"\x3d"):a+(encodeURIComponent(f)+
"\x3d"+encodeURIComponent(h))}return a}return encodeURIComponent(m.toString(c[0]))})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(v,h,l,r,n,m,q,f,a,g,e,C,c,w,y,D,E,V,da,F,b,k,d,N){function I(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(t(a,b.arguments[d]));return c}function R(a,b,c){try{return c(a,b,I(a,b))}catch(ja){throw ja;}}function t(a,b){try{switch(b.type){case "EmptyStatement":return g.voidOperation;case "VariableDeclarator":var c=null===b.init?null:t(a,b.init);c===g.voidOperation&&(c=null);if("Identifier"!==b.id.type)throw Error("Can only assign a regular variable");var d=b.id.name.toLowerCase();null!==
a.localScope?a.localScope[d]={value:c,valueset:!0,node:b.init}:a.globalScope[d]={value:c,valueset:!0,node:b.init};return g.voidOperation;case "VariableDeclaration":for(var f=0;f<b.declarations.length;f++)t(a,b.declarations[f]);return g.voidOperation;case "BlockStatement":var h;a:{for(var l=g.voidOperation,f=0;f<b.body.length;f++)if(l=t(a,b.body[f]),l instanceof g.ReturnResult||l===g.breakResult||l===g.continueResult){h=l;break a}h=l}return h;case "FunctionDeclaration":var k=b.id.name.toLowerCase();
a.globalScope[k]={valueset:!0,node:null,value:new q(b,a)};return g.voidOperation;case "ReturnStatement":var ia;if(null===b.argument)ia=new g.ReturnResult(g.voidOperation);else{var ka=t(a,b.argument);ia=new g.ReturnResult(ka)}return ia;case "IfStatement":var w;if("AssignmentExpression"===b.test.type||"UpdateExpression"===b.test.type)throw Error(e.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var r=t(a,b.test);if(!0===r)w=t(a,b.consequent);else if(!1===r)w=null!==b.alternate?
t(a,b.alternate):g.voidOperation;else throw Error(e.nodeErrorMessage(b,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return w;case "ExpressionStatement":var y;if("AssignmentExpression"===b.expression.type||"UpdateExpression"===b.expression.type)y=t(a,b.expression);else{var v=t(a,b.expression);y=v===g.voidOperation?g.voidOperation:new g.ImplicitResult(v)}return y;case "AssignmentExpression":var D;var C=t(a,b.right),f=null,u="";if("MemberExpression"===b.left.type){f=t(a,b.left.object);!0===b.left.computed?
u=t(a,b.left.property):"Identifier"===b.left.property.type&&(u=b.left.property.name);if(g.isArray(f))if(g.isNumber(u)){0>u&&(u=f.length+u);if(0>u||u>f.length)throw Error("Assignment outside of array bounds");if(u===f.length&&"\x3d"!==b.operator)throw Error("Invalid Parameter");f[u]=J(C,b.operator,f[u],b)}else throw Error("Invalid Parameter");else if(f instanceof n){if(!1===g.isString(u))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(u))f.setField(u,J(C,b.operator,f.field(u),
b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");f.setField(u,J(C,b.operator,null,b))}}else if(f instanceof m){if(!1===g.isString(u))throw Error("Feature accessor must be a string");if(!0===f.hasField(u))f.setField(u,J(C,b.operator,f.field(u),b));else{if("\x3d"!==b.operator)throw Error("Invalid Parameter");f.setField(u,J(C,b.operator,null,b))}}else{if(g.isImmutableArray(f))throw Error("Array is Immutable");throw Error("Invalid Parameter");}D=g.voidOperation}else if(f=b.left.name.toLowerCase(),
null!==a.localScope&&void 0!==a.localScope[f])a.localScope[f]={value:J(C,b.operator,a.localScope[f].value,b),valueset:!0,node:b.right},D=g.voidOperation;else if(void 0!==a.globalScope[f])a.globalScope[f]={value:J(C,b.operator,a.globalScope[f].value,b),valueset:!0,node:b.right},D=g.voidOperation;else throw Error("Variable not recognised");return D;case "UpdateExpression":var F;var E,f=null,u="";if("MemberExpression"===b.argument.type){f=t(a,b.argument.object);!0===b.argument.computed?u=t(a,b.argument.property):
"Identifier"===b.argument.property.type&&(u=b.argument.property.name);if(g.isArray(f))if(g.isNumber(u)){0>u&&(u=f.length+u);if(0>u||u>=f.length)throw Error("Assignment outside of array bounds");E=g.toNumber(f[u]);f[u]="++"===b.operator?E+1:E-1}else throw Error("Invalid Parameter");else if(f instanceof n){if(!1===g.isString(u))throw Error("Dictionary accessor must be a string");if(!0===f.hasField(u))E=g.toNumber(f.field(u)),f.setField(u,"++"===b.operator?E+1:E-1);else throw Error("Invalid Parameter");
}else if(f instanceof m){if(!1===g.isString(u))throw Error("Feature accessor must be a string");if(!0===f.hasField(u))E=g.toNumber(f.field(u)),f.setField(u,"++"===b.operator?E+1:E-1);else throw Error("Invalid Parameter");}else{if(g.isImmutableArray(f))throw Error("Array is Immutable");throw Error("Invalid Parameter");}F=!1===b.prefix?E:"++"===b.operator?E+1:E-1}else{f="Identifier"===b.argument.type?b.argument.name.toLowerCase():"";if(!f)throw Error("Invalid identifier");if(null!==a.localScope&&void 0!==
a.localScope[f])E=g.toNumber(a.localScope[f].value),a.localScope[f]={value:"++"===b.operator?E+1:E-1,valueset:!0,node:b},F=!1===b.prefix?E:"++"===b.operator?E+1:E-1;else if(void 0!==a.globalScope[f])E=g.toNumber(a.globalScope[f].value),a.globalScope[f]={value:"++"===b.operator?E+1:E-1,valueset:!0,node:b},F=!1===b.prefix?E:"++"===b.operator?E+1:E-1;else throw Error("Variable not recognised");}return F;case "BreakStatement":return g.breakResult;case "ContinueStatement":return g.continueResult;case "ForStatement":null!==
b.init&&t(a,b.init);u={testResult:!0,lastAction:g.voidOperation};do b:{D=a;C=b;F=u;if(null!==C.test){F.testResult=t(D,C.test);if(!1===F.testResult)break b;if(!0!==F.testResult)throw Error(e.nodeErrorMessage(C,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}F.lastAction=t(D,C.body);F.lastAction===g.breakResult?F.testResult=!1:F.lastAction instanceof g.ReturnResult?F.testResult=!1:null!==C.update&&t(D,C.update)}while(!0===u.testResult);f=u.lastAction instanceof g.ReturnResult?u.lastAction:g.voidOperation;
return f;case "ForInStatement":return U(a,b);case "Identifier":return ba(a,b);case "MemberExpression":return T(a,b);case "Literal":return b.value;case "CallExpression":return M(a,b);case "UnaryExpression":return aa(a,b);case "BinaryExpression":return ta(a,b);case "LogicalExpression":return G(a,b);case "ConditionalExpression":throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(f=[],u=0;u<b.elements.length;u++){var I=t(a,b.elements[u]);if(g.isFunctionParameter(I))throw Error(e.nodeErrorMessage(b,
"RUNTIME","FUNCTIONCONTEXTILLEGAL"));I===g.voidOperation?f.push(null):f.push(I)}}catch(ma){throw ma;}return f;case "ObjectExpression":f={};for(u=0;u<b.properties.length;u++){var N=t(a,b.properties[u]);if(g.isFunctionParameter(N.value))throw Error("Illegal Argument");if(!1===g.isString(N.key))throw Error("Illegal Argument");f[N.key.toString()]=N.value===g.voidOperation?null:N.value}var A=new n(f);A.immutable=!1;return A;case "Property":return{key:"Identifier"===b.key.type?b.key.name:t(a,b.key),value:t(a,
b.value)};default:throw Error(e.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(ma){throw ma;}}function U(a,b){var c=t(a,b.right);"VariableDeclaration"===b.left.type&&t(a,b.left);var d=null,f="";if("VariableDeclaration"===b.left.type){var h=b.left.declarations[0].id;"Identifier"===h.type&&(f=h.name)}else"Identifier"===b.left.type&&(f=b.left.name);if(!f)throw Error(e.nodeErrorMessage(b,"RUNTIME","INVALIDVARIABLE"));f=f.toLowerCase();null!==a.localScope&&void 0!==a.localScope[f]&&(d=a.localScope[f]);
null===d&&void 0!==a.globalScope[f]&&(d=a.globalScope[f]);if(null===d)throw Error(e.nodeErrorMessage(b,"RUNTIME","VARIABLENOTDECLARED"));if(g.isArray(c)||g.isString(c)){c=c.length;for(h=0;h<c;h++){d.value=h;f=t(a,b.body);if(f===g.breakResult)break;if(f instanceof g.ReturnResult)return f}return g.voidOperation}if(g.isImmutableArray(c)){for(h=0;h<c.length();h++){d.value=h;f=t(a,b.body);if(f===g.breakResult)break;if(f instanceof g.ReturnResult)return f}return g.voidOperation}if(c instanceof n||c instanceof
m)for(c=c.keys(),h=0;h<c.length;h++){d.value=c[h];f=t(a,b.body);if(f===g.breakResult)break;if(f instanceof g.ReturnResult)return f}else return g.voidOperation}function J(a,b,c,d){switch(b){case "\x3d":return a===g.voidOperation?null:a;case "/\x3d":return g.toNumber(c)/g.toNumber(a);case "*\x3d":return g.toNumber(c)*g.toNumber(a);case "-\x3d":return g.toNumber(c)-g.toNumber(a);case "+\x3d":return g.isString(c)||g.isString(a)?g.toString(c)+g.toString(a):g.toNumber(c)+g.toNumber(a);case "%\x3d":return g.toNumber(c)%
g.toNumber(a);default:throw Error(e.nodeErrorMessage(d,"RUNTIME","OPERATORNOTRECOGNISED"));}}function ea(b,c,d){c=c.toLowerCase();switch(c){case "hasz":return b=b.hasZ,void 0===b?!1:b;case "hasm":return b=b.hasM,void 0===b?!1:b;case "spatialreference":return c=b.spatialReference._arcadeCacheId,void 0===c&&(d=!0,Object.freeze&&Object.isFrozen(b.spatialReference)&&(d=!1),d&&(oa++,c=b.spatialReference._arcadeCacheId=oa)),b=new n({wkt:b.spatialReference.wkt,wkid:b.spatialReference.wkid}),void 0!==c&&
(b._arcadeCacheId="SPREF"+c.toString()),b}switch(b.type){case "extent":switch(c){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return b=b[c],void 0!==b?b:null;case "type":return"Extent"}break;case "polygon":switch(c){case "rings":return c=b.cache._arcadeCacheId,void 0===c&&(oa++,c=oa,b.cache._arcadeCacheId=c),b=new f(b.rings,b.spatialReference,!0===b.hasZ,!0===b.hasM,c);case "type":return"Polygon"}break;case "point":switch(c){case "x":case "y":case "z":case "m":return void 0!==
b[c]?b[c]:null;case "type":return"Point"}break;case "polyline":switch(c){case "paths":return c=b.cache._arcadeCacheId,void 0===c&&(oa++,c=oa,b.cache._arcadeCacheId=c),b=new f(b.paths,b.spatialReference,!0===b.hasZ,!0===b.hasM,c);case "type":return"Polyline"}break;case "multipoint":switch(c){case "points":return c=b.cache._arcadeCacheId,void 0===c&&(oa++,c=oa,b.cache._arcadeCacheId=c),b=new a(b.points,b.spatialReference,!0===b.hasZ,!0===b.hasM,c,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(d,
"RUNTIME","PROPERTYNOTFOUND"));}function T(a,b){try{var c=t(a,b.object);if(null===c)throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));if(!1===b.computed){if("Identifier"===b.property.type){if(c instanceof n||c instanceof m)return c.field(b.property.name);if(c instanceof da)return ea(c,b.property.name,b)}throw Error(e.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}var d=t(a,b.property);if(c instanceof n||c instanceof m){if(g.isString(d))return c.field(d);throw Error(e.nodeErrorMessage(b,"RUNTIME",
"INVALIDTYPE"));}if(c instanceof da){if(g.isString(d))return ea(c,d,b);throw Error(e.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isArray(c)){if(g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length+d);if(d>=c.length||0>d)throw Error(e.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c[d]}throw Error(e.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isString(c)){if(g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length+d);if(d>=c.length||0>d)throw Error(e.nodeErrorMessage(b,
"RUNTIME","OUTOFBOUNDS"));return c[d]}throw Error(e.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}if(g.isImmutableArray(c)&&g.isNumber(d)&&isFinite(d)&&Math.floor(d)===d){0>d&&(d=c.length()+d);if(d>=c.length()||0>d)throw Error(e.nodeErrorMessage(b,"RUNTIME","OUTOFBOUNDS"));return c.get(d)}throw Error(e.nodeErrorMessage(b,"RUNTIME","INVALIDTYPE"));}catch(ra){throw ra;}}function aa(a,b){try{var c=t(a,b.argument);if(g.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*g.toNumber(c);
if("+"===b.operator)return 1*g.toNumber(c);throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*g.toNumber(c);if("+"===b.operator)return 1*g.toNumber(c);throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(ja){throw ja;}}function ta(a,b){try{var c=[t(a,b.left),t(a,b.right)],d=c[0],f=c[1];switch(b.operator){case "\x3d\x3d":return g.equalityTest(d,f);case "!\x3d":return!g.equalityTest(d,f);case "\x3c":return g.greaterThanLessThan(d,
f,b.operator);case "\x3e":return g.greaterThanLessThan(d,f,b.operator);case "\x3c\x3d":return g.greaterThanLessThan(d,f,b.operator);case "\x3e\x3d":return g.greaterThanLessThan(d,f,b.operator);case "+":return g.isString(d)||g.isString(f)?g.toString(d)+g.toString(f):g.toNumber(d)+g.toNumber(f);case "-":return g.toNumber(d)-g.toNumber(f);case "*":return g.toNumber(d)*g.toNumber(f);case "/":return g.toNumber(d)/g.toNumber(f);case "%":return g.toNumber(d)%g.toNumber(f);default:throw Error(e.nodeErrorMessage(b,
"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(pa){throw pa;}}function G(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(e.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(e.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=t(a,b.left);if(g.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var d=t(a,b.right);
if(g.isBoolean(d))return d;throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;d=t(a,b.right);if(g.isBoolean(d))return d;throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));}throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(ra){throw ra;}}function ba(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d]){c=a.localScope[d];if(!0===
c.valueset)return c.value;c.value=t(a,c.node);c.valueset=!0;return c.value}if(void 0!==a.globalScope[d]){c=a.globalScope[d];if(!0===c.valueset)return c.value;c.value=t(a,c.node);c.valueset=!0;return c.value}throw Error(e.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(ra){throw ra;}}function M(a,b){try{if("Identifier"!==b.callee.type)throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];
if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof q)return ha(a,b,c.value.definition);throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof g.NativeFunction)return c.value.fn(a,b);if(c.value instanceof q)return ha(a,b,c.value.definition);throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(e.nodeErrorMessage(b,"RUNTIME",
"NOTFOUND"));}catch(ja){throw ja;}}function la(a){return null==a?"":g.isArray(a)||g.isImmutableArray(a)?"Array":g.isDate(a)?"Date":g.isString(a)?"String":g.isBoolean(a)?"Boolean":g.isNumber(a)?"Number":a instanceof r?"Attachment":a instanceof l?"Portal":a instanceof n?"Dictionary":a instanceof m?"Feature":a instanceof b?"Point":a instanceof k?"Polygon":a instanceof d?"Polyline":a instanceof F?"Multipoint":a instanceof V?"Extent":g.isFunctionParameter(a)?"Function":g.isFeatureSet(a)?"FeatureSet":g.isFeatureSetCollection(a)?
"FeatureSetCollection":a===g.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function Y(a,b,c,d){try{var e=t(a,b.arguments[c]);if(g.equalityTest(e,d))return t(a,b.arguments[c+1]);var f=b.arguments.length-c;return 1===f?t(a,b.arguments[c]):2===f?null:3===f?t(a,b.arguments[c+2]):Y(a,b,c+2,d)}catch(qa){throw qa;}}function u(a,b,c,d){try{if(!0===d)return t(a,b.arguments[c+1]);if(3===b.arguments.length-c)return t(a,b.arguments[c+2]);var e=t(a,b.arguments[c+2]);if(!1===g.isBoolean(e))throw Error("WHEN needs boolean test conditions");
return u(a,b,c+2,e)}catch(pa){throw pa;}}function S(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=S(a.slice(0,d),b);a=S(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function ca(a,b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");
for(var e=0;e<c.length;e++)b.localScope[a.params[e].name.toLowerCase()]={value:c[e],valueset:!0,node:null};var f=t(b,d);if(f instanceof g.ReturnResult)return f.value;if(f===g.breakResult)throw Error("Cannot Break from a Function");if(f===g.continueResult)throw Error("Cannot Continue from a Function");return f instanceof g.ImplicitResult?f.value:f}catch(qa){throw qa;}}function ha(a,b,c){return R(a,b,function(b,d,e){b={spatialReference:a.spatialReference,globalScope:a.globalScope,depthCounter:a.depthCounter+
1,console:a.console,lrucache:a.lrucache,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return ca(c,b,e)})}function fa(a){return function(){var b={spatialReference:a.context.spatialReference,console:a.context.console,lrucache:a.context.lrucache,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return ca(a.definition,b,arguments)}}function za(a){console.log(a)}
Object.defineProperty(h,"__esModule",{value:!0});var oa=0,Z={};C.registerFunctions(Z,R);E.registerFunctions(Z,R);y.registerFunctions(Z,R);c.registerFunctions(Z,R);D.registerFunctions(Z,R);w.registerFunctions(Z,R);Z["typeof"]=function(a,b){return R(a,b,function(a,b,c){g.pcCheck(c,1,1);a=la(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};Z.iif=function(a,b){try{g.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=t(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("IF Function must have a boolean test condition");
var d=t(a,b.arguments[1]),e=t(a,b.arguments[2]);return!0===c?d:e}catch(pa){throw pa;}};Z.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===b.arguments.length)return t(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=t(a,b.arguments[0]);return Y(a,b,1,c)}catch(ja){throw ja;}};Z.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");
var c=t(a,b.arguments[0]);if(!1===g.isBoolean(c))throw Error("WHEN needs boolean test conditions");return u(a,b,0,c)}catch(ja){throw ja;}};Z.top=function(a,b){return R(a,b,function(a,b,c){g.pcCheck(c,2,2);if(g.isArray(c[0]))return g.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));if(g.isImmutableArray(c[0]))return g.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,g.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};Z.first=function(a,b){return R(a,
b,function(a,b,c){g.pcCheck(c,1,1);return g.isArray(c[0])?0===c[0].length?null:c[0][0]:g.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};Z.sort=function(a,b){return R(a,b,function(a,b,c){g.pcCheck(c,1,2);a=c[0];g.isImmutableArray(a)&&(a=a.toArray());if(!1===g.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===g.isFunctionParameter(c[1]))throw Error("Illegal Argument");var d=fa(c[1]);return a=S(a,function(a,b){return d(a,b)})}if(0===a.length)return[];c={};for(b=0;b<
a.length;b++){var e=la(a[b]);""!==e&&(c[e]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var e="",f;for(f in c)b++,e=f;return a=1<b||"String"===e?S(a,function(a,b){if(null===a||void 0===a||a===g.voidOperation)return null===b||void 0===b||b===g.voidOperation?0:1;if(null===b||void 0===b||b===g.voidOperation)return-1;a=g.toString(a);b=g.toString(b);return a<b?-1:a===b?0:1}):
"Number"===e?S(a,function(a,b){return a-b}):"Boolean"===e?S(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?S(a,function(a,b){return b-a}):a.slice(0)})};for(var na in Z)Z[na]={value:new g.NativeFunction(Z[na]),valueset:!0,node:null};var Q=function(){};Q.prototype=Z;Q.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};Q.prototype.pi={value:Math.PI,valueset:!0,node:null};h.functionHelper={fixSpatialReference:g.fixSpatialReference,parseArguments:I,standardFunction:R};h.extend=
function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:R,evaluateIdentifier:ba,arcadeCustomFunctionHandler:fa},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var d in b.functions)Z[d]={value:new g.NativeFunction(b.functions[d]),valueset:!0,node:null},Q.prototype[d]=Z[d];for(c=0;c<b.signatures.length;c++)e.addFunctionDeclaration(b.signatures[c],"async")};h.executeScript=function(a,b){var c=b.spatialReference;if(null===c||void 0===c)c=new N({wkid:102100});var d=
b.vars,e=b.customfunctions,f=new Q;d||(d={});e||(e={});var h=new n({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;f.textformatting={value:h,valueset:!0,node:null};for(var l in e)f[l]={value:new g.NativeFunction(e[l]),native:!0,valueset:!0,node:null};for(l in d)f[l]=d[l]&&"esri.Graphic"===d[l].declaredClass?{value:m.createFromGraphic(d[l]),valueset:!0,node:null}:{value:d[l],valueset:!0,node:null};a=t({spatialReference:c,globalScope:f,localScope:null,
console:b.console?b.console:za,lrucache:b.lrucache,depthCounter:1},a.body[0].body);a instanceof g.ReturnResult&&(a=a.value);a instanceof g.ImplicitResult&&(a=a.value);a===g.voidOperation&&(a=null);if(a===g.breakResult)throw Error("Cannot return BREAK");if(a===g.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof q)throw Error("Cannot return FUNCTION");if(a instanceof g.NativeFunction)throw Error("Cannot return FUNCTION");return a};h.extractFieldLiterals=function(a,b){void 0===b&&
(b=!1);return e.findFieldLiterals(a)};h.validateScript=function(a,b){return e.validateScript(a,b,"simple")};h.referencesMember=function(a,b){return e.referencesMember(a,b)};h.referencesFunction=function(a,b){return e.referencesFunction(a,b)};h.findFunctionCalls=function(a){return e.findFunctionCalls(a)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(v,h,l,r){Object.defineProperty(h,"__esModule",{value:!0});h.parseScript=function(h,m){void 0===
m&&(m=[]);h=r.parse("function _() { "+h+"\n}");if(null===h.body||void 0===h.body)throw Error("No formula provided.");if(0===h.body.length)throw Error("No formula provided.");if(0===h.body.length)throw Error("No formula provided.");if("BlockStatement"!==h.body[0].body.type)throw Error("Invalid formula content.");var n=l.validateLanguage(h);if(""!==n)throw Error(n);l.findScriptDependencies(h,m);return h};h.scriptCheck=function(h,m,q,f,a){var g=[];try{var e=r.parse("function _() { "+h+"\n}",{tolerant:!0,
loc:!0}),n=e.errors;if(0<n.length)for(var c=0;c<n.length;c++)g.push({line:n[c].lineNumber,character:n[c].column,reason:n[c].description});var w=l.checkScript(e,m,q,f,a);for(m=0;m<w.length;m++)g.push(w[m])}catch(y){try{"Unexpected token }"===y.description?(y.index=("function _() { "+h+"\n}").length-1,g.push({line:y.lineNumber,character:y.column,reason:"Unexpected end of script"})):g.push({line:y.lineNumber,character:y.column,reason:y.description})}catch(D){}}return g};h.extractFieldLiterals=function(h,
m){void 0===m&&(m=!1);return l.findFieldLiterals(h)};h.validateScript=function(h,m,q){return l.validateScript(h,m,q)};h.referencesMember=function(h,m){return l.referencesMember(h,m)};h.referencesFunction=function(h,m){return l.referencesFunction(h,m)}})},"esri/arcade/lib/esprima":function(){(function(v,h){"function"===typeof define&&define.amd?define(["exports"],h):"undefined"!==typeof exports?h(exports):h(v.esprima={})})(this,function(v){function h(a,b){if(!a)throw Error("ASSERT: "+b);}function l(a){return 48<=
a&&57>=a}function r(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function n(a){return 0<="01234567".indexOf(a)}function m(a){return 10===a||13===a||8232===a||8233===a}function q(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Ia.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function f(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Ia.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function a(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===
a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function g(a,b,c,d,e){h("number"===typeof c,"Comment must have valid position");H.lastCommentStart>=c||(H.lastCommentStart=c,a={type:a,value:b},x.range&&(a.range=[c,d]),x.loc&&(a.loc=e),x.comments.push(a),x.attachComment&&(x.leadingComments.push(a),x.trailingComments.push(a)))}function e(a){var b,c,d;b=
p-a;for(c={start:{line:L,column:p-O-a}};p<W;)if(d=z.charCodeAt(p),++p,m(d)){x.comments&&(a=z.slice(b+a,p-1),c.end={line:L,column:p-O-1},g("Line",a,b,p-1,c));13===d&&10===z.charCodeAt(p)&&++p;++L;O=p;return}x.comments&&(a=z.slice(b+a,p),c.end={line:L,column:p-O},g("Line",a,b,p,c))}function C(){var a,b;for(b=0===p;p<W;)if(a=z.charCodeAt(p),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++p;else if(m(a))++p,
13===a&&10===z.charCodeAt(p)&&++p,++L,O=p,b=!0;else if(47===a)if(a=z.charCodeAt(p+1),47===a)++p,++p,e(2),b=!0;else if(42===a){++p;++p;a:{var c=a=void 0,d=void 0,d=void 0;x.comments&&(a=p-2,c={start:{line:L,column:p-O-2}});for(;p<W;)if(d=z.charCodeAt(p),m(d))13===d&&10===z.charCodeAt(p+1)&&++p,++L,++p,O=p,p>=W&&G();else{if(42===d&&47===z.charCodeAt(p+1)){++p;++p;x.comments&&(d=z.slice(a+2,p-2),c.end={line:L,column:p-O},g("Block",d,a,p,c));break a}++p}G()}}else break;else if(b&&45===a)if(45===z.charCodeAt(p+
1)&&62===z.charCodeAt(p+2))p+=3,e(3);else break;else if(60===a)if("!--"===z.slice(p+1,p+4))++p,++p,++p,++p,e(4);else break;else break}function c(a){var b,c,d=0;b="u"===a?4:2;for(a=0;a<b;++a)if(p<W&&r(z[p]))c=z[p++],d=16*d+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(d)}function w(){var a,b;a=z.charCodeAt(p++);b=String.fromCharCode(a);92===a&&(117!==z.charCodeAt(p)&&G(),++p,(a=c("u"))&&"\\"!==a&&q(a.charCodeAt(0))||G(),b=a);for(;p<W;){a=z.charCodeAt(p);if(!f(a))break;
++p;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==z.charCodeAt(p)&&G(),++p,(a=c("u"))&&"\\"!==a&&f(a.charCodeAt(0))||G(),b+=a)}return b}function y(){var a=p,b=z.charCodeAt(p),c,d=z[p];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++p,x.tokenize&&(40===b?x.openParenToken=x.tokens.length:123===b&&(x.openCurlyToken=x.tokens.length)),{type:A.Punctuator,value:String.fromCharCode(b),lineNumber:L,lineStart:O,start:a,
end:p};default:if(c=z.charCodeAt(p+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return p+=2,{type:A.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:L,lineStart:O,start:a,end:p};case 33:case 61:return p+=2,61===z.charCodeAt(p)&&++p,{type:A.Punctuator,value:z.slice(a,p),lineNumber:L,lineStart:O,start:a,end:p}}}b=z.substr(p,4);if("\x3e\x3e\x3e\x3d"===b)return p+=4,{type:A.Punctuator,value:b,lineNumber:L,lineStart:O,start:a,
end:p};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return p+=3,{type:A.Punctuator,value:b,lineNumber:L,lineStart:O,start:a,end:p};b=b.substr(0,2);if(d===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return p+=2,{type:A.Punctuator,value:b,lineNumber:L,lineStart:O,start:a,end:p};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++p,{type:A.Punctuator,value:d,lineNumber:L,lineStart:O,start:a,end:p};G()}function D(){var a,b,c;c=z[p];h(l(c.charCodeAt(0))||"."===
c,"Numeric literal must start with a decimal digit or a decimal point");b=p;a="";if("."!==c){a=z[p++];c=z[p];if("0"===a){if("x"===c||"X"===c){++p;for(a="";p<W&&r(z[p]);)a+=z[p++];0===a.length&&G();q(z.charCodeAt(p))&&G();return{type:A.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:L,lineStart:O,start:b,end:p}}if("b"===c||"B"===c){++p;for(c="";p<W;){a=z[p];if("0"!==a&&"1"!==a)break;c+=z[p++]}0===c.length&&G();p<W&&(a=z.charCodeAt(p),(q(a)||l(a))&&G());return{type:A.NumericLiteral,value:parseInt(c,
2),lineNumber:L,lineStart:O,start:b,end:p}}if("o"===c||"O"===c){n(c)?(c=!0,a="0"+z[p++]):(c=!1,++p,a="");for(;p<W&&n(z[p]);)a+=z[p++];c||0!==a.length||G();(q(z.charCodeAt(p))||l(z.charCodeAt(p)))&&G();return{type:A.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:L,lineStart:O,start:b,end:p}}}for(;l(z.charCodeAt(p));)a+=z[p++];c=z[p]}if("."===c){for(a+=z[p++];l(z.charCodeAt(p));)a+=z[p++];c=z[p]}if("e"===c||"E"===c){a+=z[p++];c=z[p];if("+"===c||"-"===c)a+=z[p++];if(l(z.charCodeAt(p)))for(;l(z.charCodeAt(p));)a+=
z[p++];else G()}q(z.charCodeAt(p))&&G();return{type:A.NumericLiteral,value:parseFloat(a),lineNumber:L,lineStart:O,start:b,end:p}}function E(){B=null;C();T("Regular Expression language structures not supported")}function V(){C();E()}function da(){var a;a=x.tokens[x.tokens.length-1];if(!a)return V();if("Punctuator"===a.type){if("]"===a.value)return y();if(")"===a.value)return a=x.tokens[x.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==
a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?y():V();if("}"===a.value){if(x.tokens[x.openCurlyToken-3]&&"Keyword"===x.tokens[x.openCurlyToken-3].type){if(a=x.tokens[x.openCurlyToken-4],!a)return y()}else if(x.tokens[x.openCurlyToken-4]&&"Keyword"===x.tokens[x.openCurlyToken-4].type){if(a=x.tokens[x.openCurlyToken-5],!a)return V()}else return y();if(0<=La.indexOf(a.value))return y()}return V()}return"Keyword"===a.type&&"this"!==a.value?V():y()}function F(){var b;C();if(p>=W)return{type:A.EOF,
lineNumber:L,lineStart:O,start:p,end:p};b=z.charCodeAt(p);if(q(b)){var d;b=p;if(92===z.charCodeAt(p))d=w();else a:{var e;for(d=p++;p<W;){e=z.charCodeAt(p);if(92===e){p=d;d=w();break a}if(f(e))++p;else break}d=z.slice(d,p)}return{type:1===d.length?A.Identifier:a(d)?A.Keyword:"null"===d.toLowerCase()?A.NullLiteral:"true"===d.toLowerCase()||"false"===d.toLowerCase()?A.BooleanLiteral:A.Identifier,value:d,lineNumber:L,lineStart:O,start:b,end:p}}if(40===b||41===b||59===b)return y();if(39===b||34===b){var g=
"",k,t,u;e=!1;var v,B;v=L;B=O;b=z[p];h("'"===b||'"'===b,"String literal must starts with a quote");d=p;for(++p;p<W;)if(k=z[p++],k===b){b="";break}else if("\\"===k)if((k=z[p++])&&m(k.charCodeAt(0)))++L,"\r"===k&&"\n"===z[p]&&++p,O=p;else switch(k){case "u":case "x":if("{"===z[p]){++p;t=k=void 0;k=z[p];t=0;for("}"===k&&G();p<W;){k=z[p++];if(!r(k))break;t=16*t+"0123456789abcdef".indexOf(k.toLowerCase())}(1114111<t||"}"!==k)&&G();k=65535>=t?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,
(t-65536&1023)+56320);g+=k}else u=p,(t=c(k))?g+=t:(p=u,g+=k);break;case "n":g+="\n";break;case "r":g+="\r";break;case "t":g+="\t";break;case "b":g+="\b";break;case "f":g+="\f";break;case "v":g+="\x0B";break;default:n(k)?(t="01234567".indexOf(k),0!==t&&(e=!0),p<W&&n(z[p])&&(e=!0,t=8*t+"01234567".indexOf(z[p++]),0<="0123".indexOf(k)&&p<W&&n(z[p])&&(t=8*t+"01234567".indexOf(z[p++]))),g+=String.fromCharCode(t)):g+=k}else if(m(k.charCodeAt(0)))break;else g+=k;""!==b&&G();return{type:A.StringLiteral,value:g,
octal:e,startLineNumber:v,startLineStart:B,lineNumber:L,lineStart:O,start:d,end:p}}return 46===b?l(z.charCodeAt(p+1))?D():y():l(b)?D():x.tokenize&&47===b?da():y()}function b(){var a,b,c;C();a={start:{line:L,column:p-O}};b=F();a.end={line:L,column:p-O};b.type!==A.EOF&&(c=z.slice(b.start,b.end),a={type:ma[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),x.tokens.push(a));return b}function k(){var a;a=B;p=a.end;L=a.lineNumber;O=a.lineStart;
B="undefined"!==typeof x.tokens?b():F();p=a.end;L=a.lineNumber;O=a.lineStart;return a}function d(){var a,c,d;a=p;c=L;d=O;B="undefined"!==typeof x.tokens?b():F();p=a;L=c;O=d}function N(){this.line=L;this.column=p-O}function I(){this.start=new N;this.end=null}function R(a){this.start=a.type===A.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function t(){p=B.start;B.type===A.StringLiteral?(L=B.startLineNumber,O=B.startLineStart):
(L=B.lineNumber,O=B.lineStart);x.range&&(this.range=[p,0]);x.loc&&(this.loc=new I)}function U(a){x.range&&(this.range=[a.start,0]);x.loc&&(this.loc=new R(a))}function J(){var a,b,c,d;a=p;b=L;c=O;C();d=L!==b;p=a;L=b;O=c;return d}function ea(a,b,c){var d=Error("Line "+a+": "+c);d.index=b;d.lineNumber=a;d.column=b-O+1;d.description=c;return d}function T(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){h(c<b.length,"Message reference must be in range");return b[c]});
throw ea(L,p,c);}function aa(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){h(c<b.length,"Message reference must be in range");return b[c]});c=ea(L,p,c);if(x.errors)x.errors.push(c);else throw c;}function ta(a,b){var c=P.UnexpectedToken;a&&(c=b?b:a.type===A.EOF?P.UnexpectedEOS:a.type===A.Identifier?P.UnexpectedIdentifier:a.type===A.NumericLiteral?P.UnexpectedNumber:a.type===A.StringLiteral?P.UnexpectedString:P.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");
return a&&"number"===typeof a.lineNumber?ea(a.lineNumber,a.start,c):ea(L,p,c)}function G(a,b){throw ta(a,b);}function ba(a,b){a=ta(a,b);if(x.errors)x.errors.push(a);else throw a;}function M(a){var b=k();b.type===A.Punctuator&&b.value===a||G(b)}function la(){var a;x.errors?(a=B,a.type===A.Punctuator&&","===a.value?k():a.type===A.Punctuator&&";"===a.value?(k(),ba(a)):ba(a,P.UnexpectedToken)):M(",")}function Y(a){var b=k();b.type===A.Keyword&&b.value.toLowerCase()===a.toLowerCase()||G(b)}function u(a){return B.type===
A.Punctuator&&B.value===a}function S(a){return B.type===A.Keyword&&B.value.toLowerCase()===a.toLowerCase()}function ca(){var a;59===z.charCodeAt(p)||u(";")?k():(a=L,C(),L===a&&(B.type===A.EOF||u("}")||G(B)))}function ha(a){return a.type===K.Identifier||a.type===K.MemberExpression}function fa(a,b){var c,d=new t;b=X;c=Ea();X=b;return d.finishFunctionExpression(null,a,[],c)}function za(){var a,b;a=X;X=!0;b=Ha();b=fa(b.params);X=a;return b}function oa(){var a,b=new t;a=k();return a.type===A.StringLiteral||
a.type===A.NumericLiteral?(X&&a.octal&&ba(a,P.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function Z(){var a,b,c,d=new t;a=B;if(a.type===A.Identifier)return b=oa(),"get"!==a.value||u(":")||u("(")?"set"!==a.value||u(":")||u("(")?u(":")?(k(),a=ga(),d.finishProperty("init",b,a,!1,!1)):u("(")?(a=za(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=oa(),M("("),a=B,a.type!==A.Identifier?(M(")"),ba(a),a=fa([])):(c=[sa()],M(")"),a=fa(c,a)),d.finishProperty("set",
b,a,!1,!1)):(b=oa(),M("("),M(")"),a=fa([]),d.finishProperty("get",b,a,!1,!1));if(a.type===A.EOF||a.type===A.Punctuator)G(a);else{b=oa();if(u(":"))return k(),a=ga(),d.finishProperty("init",b,a,!1,!1);if(u("("))return a=za(),d.finishProperty("init",b,a,!0,!1);G(k())}}function na(a){var b=[],c,d,e={},f=String,g=new t;for(!0!==a&&M("{");!u("}");)a=Z(),c=a.key.type===K.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?xa.Data:"get"===a.kind?xa.Get:xa.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,
c)?(e[c]===xa.Data?X&&d===xa.Data?aa(P.StrictDuplicateProperty):d!==xa.Data&&aa(P.AccessorDataProperty):d===xa.Data?aa(P.AccessorDataProperty):e[c]&d&&aa(P.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),u("}")||la();M("}");return g.finishObjectExpression(b)}function Q(){var a,b,c,e;if(u("("))return M("("),u(")")?(k(),b=Ba.ArrowParameterPlaceHolder):(++H.parenthesisCount,b=ua(),M(")")),b;if(u("[")){b=[];var f=new t;for(M("[");!u("]");)u(",")?(k(),b.push(null)):(b.push(ga()),u("]")||M(","));k();return f.finishArrayExpression(b)}if(u("{"))return na();
a=B.type;e=new t;if(a===A.Identifier)c=e.finishIdentifier(k().value);else if(a===A.StringLiteral||a===A.NumericLiteral)X&&B.octal&&ba(B,P.StrictOctalLiteral),c=e.finishLiteral(k());else if(a===A.Keyword){if(S("function")){e=null;var g;c=[];var h=[],l,m=new t;Y("function");u("(")||(e=sa());g=Ha(b);c=g.params;h=g.defaults;a=g.stricted;b=g.firstRestricted;g.message&&(f=g.message);l=X;g=Ea();X&&b&&G(b,f);X&&a&&ba(a,f);X=l;return m.finishFunctionExpression(e,c,h,g)}S("this")?(k(),c=e.finishThisExpression()):
G(k())}else a===A.BooleanLiteral?(b=k(),b.value="true"===b.value.toLowerCase(),c=e.finishLiteral(b)):a===A.NullLiteral?(b=k(),b.value=null,c=e.finishLiteral(b)):u("/")||u("/\x3d")?(c="undefined"!==typeof x.tokens?e.finishLiteral(V()):e.finishLiteral(E()),d()):G(k());return c}function ia(){var a=[];M("(");if(!u(")"))for(;p<W;){a.push(ga());if(u(")"))break;la()}M(")");return a}function ka(){M(".");var a,b=new t;a=k();a.type===A.Identifier||a.type===A.Keyword||a.type===A.BooleanLiteral||a.type===A.NullLiteral||
G(a);return b.finishIdentifier(a.value)}function wa(){var a;M("[");a=ua();M("]");return a}function ja(){var a,b,c=new t;Y("new");var d;h(H.allowIn,"callee of new expression always allow in keyword.");d=B;for(a=S("new")?ja():Q();;)if(u("["))b=wa(),a=(new U(d)).finishMemberExpression("[",a,b);else if(u("."))b=ka(),a=(new U(d)).finishMemberExpression(".",a,b);else break;b=u("(")?ia():[];return c.finishNewExpression(a,b)}function ra(){var a,b,c=B,d,e=H.allowIn;b=B;H.allowIn=!0;for(a=S("new")?ja():Q();;)if(u("."))d=
ka(),a=(new U(b)).finishMemberExpression(".",a,d);else if(u("("))d=ia(),a=(new U(b)).finishCallExpression(a,d);else if(u("["))d=wa(),a=(new U(b)).finishMemberExpression("[",a,d);else break;H.allowIn=e;B.type!==A.Punctuator||!u("++")&&!u("--")||J()||(ha(a)||aa(P.InvalidLHSInAssignment),b=k(),a=(new U(c)).finishPostfixExpression(b.value,a));return a}function pa(){var a,b,c;B.type!==A.Punctuator&&B.type!==A.Keyword?b=ra():u("++")||u("--")?(c=B,a=k(),b=pa(),ha(b)||aa(P.InvalidLHSInAssignment),b=(new U(c)).finishUnaryExpression(a.value,
b)):u("+")||u("-")||u("~")||u("!")?(c=B,a=k(),b=pa(),b=(new U(c)).finishUnaryExpression(a.value,b)):S("delete")||S("void")||S("typeof")?(c=B,a=k(),b=pa(),b=(new U(c)).finishUnaryExpression(a.value,b),X&&"delete"===b.operator&&b.argument.type===K.Identifier&&aa(P.StrictDelete)):b=ra();return b}function qa(a,b){var c=0;if(a.type!==A.Punctuator&&a.type!==A.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=
6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function Ga(){var a,b,c,d,e,f;a=B;b=pa();if(b===Ba.ArrowParameterPlaceHolder)return b;c=B;d=qa(c,H.allowIn);if(0===d)return b;c.prec=d;k();a=[a,B];f=pa();for(e=[b,c,f];0<(d=qa(B,H.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,
b=e.pop(),a.pop(),b=(new U(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=k();c.prec=d;e.push(c);a.push(B);b=pa();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new U(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function va(a){var b,c,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===K.Identifier)e.push(d),f.push(null),ya(h,d,d.name);else if(d.type===K.AssignmentExpression)e.push(d.left),f.push(d.right),++g,ya(h,d.left,d.left.name);
else return null;h.message===P.StrictParamDupe&&(a=X?h.stricted:h.firstRestricted,G(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function ga(){var a,b,c,d,e;a=H.parenthesisCount;b=e=B;var f,g;g=B;c=Ga();c!==Ba.ArrowParameterPlaceHolder&&u("?")&&(k(),f=H.allowIn,H.allowIn=!0,b=ga(),H.allowIn=f,M(":"),f=ga(),c=(new U(g)).finishConditionalExpression(c,b,f));if(c===Ba.ArrowParameterPlaceHolder||u("\x3d\x3e"))if(H.parenthesisCount===
a||H.parenthesisCount===a+1)if(c.type===K.Identifier?d=va([c]):c.type===K.AssignmentExpression?d=va([c]):c.type===K.SequenceExpression?d=va(c.expressions):c===Ba.ArrowParameterPlaceHolder&&(d=va([])),d)return a=d,e=new U(e),M("\x3d\x3e"),d=X,c=u("{")?Ea():ga(),X&&a.firstRestricted&&G(a.firstRestricted,a.message),X&&a.stricted&&ba(a.stricted,a.message),X=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==K.BlockStatement);B.type!==A.Punctuator?a=!1:(a=B.value,a="\x3d"===a||"*\x3d"===
a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(ha(c)||aa(P.InvalidLHSInAssignment),b=k(),a=ga(),c=(new U(e)).finishAssignmentExpression(b.value,c,a));return c}function ua(){var a,b=B;a=ga();if(u(",")){for(a=[a];p<W&&u(",");)k(),a.push(ga());a=(new U(b)).finishSequenceExpression(a)}return a}function sa(){var a,b=new t;a=k();a.type!==A.Identifier&&G(a);return b.finishIdentifier(a.value)}
function Ma(a){var b=null,c,d=new t;c=sa();"const"===a?(M("\x3d"),b=ga()):u("\x3d")&&(k(),b=ga());return d.finishVariableDeclarator(c,b)}function Da(a){var b=[];do{b.push(Ma(a));if(!u(","))break;k()}while(p<W);return b}function Aa(a){var b=B.type,c,d;b===A.EOF&&G(B);if(b===A.Punctuator&&"{"===B.value){if(a){M("{");var e=B;a=p;c=L;d=O;k();b=u(":");B=e;p=a;L=c;O=d;if((B.type===A.Identifier||B.type===A.StringLiteral)&&b)return na(!0);a=new t;for(c=[];p<W&&!u("}");){d=Ca();if("undefined"===typeof d)break;
c.push(d)}M("}");return a.finishBlockStatement(c)}return na()}a=new t;if(b===A.Punctuator)switch(B.value){case ";":return a=new t,M(";"),a.finishEmptyStatement();case "(":return c=ua(),ca(),a.finishExpressionStatement(c)}else if(b===A.Keyword)switch(B.value.toLowerCase()){case "break":return c=null,Y("break"),59===z.charCodeAt(p)?(k(),H.inIteration||H.inSwitch||T(P.IllegalBreak),a=a.finishBreakStatement(null)):J()?(H.inIteration||H.inSwitch||T(P.IllegalBreak),a=a.finishBreakStatement(null)):(B.type===
A.Identifier&&(c=sa(),d="$"+c.name,Object.prototype.hasOwnProperty.call(H.labelSet,d)||T(P.UnknownLabel,c.name)),ca(),null!==c||H.inIteration||H.inSwitch||T(P.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,Y("continue"),59===z.charCodeAt(p)?(k(),H.inIteration||T(P.IllegalContinue),a=a.finishContinueStatement(null)):J()?(H.inIteration||T(P.IllegalContinue),a=a.finishContinueStatement(null)):(B.type===A.Identifier&&(c=sa(),d="$"+c.name,Object.prototype.hasOwnProperty.call(H.labelSet,
d)||T(P.UnknownLabel,c.name)),ca(),null!==c||H.inIteration||T(P.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var f,g,h;g=H.allowIn;f=b=e=null;Y("for");M("(");if(u(";"))k();else{if(S("var")){H.allowIn=!1;var l=new t;f=k();h=Da();f=l.finishVariableDeclaration(h,f.value);H.allowIn=g;1===f.declarations.length&&S("in")&&(k(),c=f,d=ua(),f=null)}else H.allowIn=!1,f=ua(),H.allowIn=g,S("in")&&(ha(f)||aa(P.InvalidLHSInForIn),k(),c=f,d=ua(),f=null);"undefined"===typeof c&&M(";")}"undefined"===
typeof c&&(u(";")||(b=ua()),M(";"),u(")")||(e=ua()));M(")");h=H.inIteration;H.inIteration=!0;g=Aa(!0);H.inIteration=h;return"undefined"===typeof c?a.finishForStatement(f,b,e,g):a.finishForInStatement(c,d,g);case "function":return Ja(a);case "if":return Y("if"),M("("),c=ua(),M(")"),d=Aa(!0),S("else")?(k(),b=Aa(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,Y("return"),H.inFunctionBody||aa(P.IllegalReturn),32===z.charCodeAt(p)&&q(z.charCodeAt(p+1))?(c=ua(),ca(),a=a.finishReturnStatement(c)):
J()?a=a.finishReturnStatement(null):(u(";")||u("}")||B.type===A.EOF||(c=ua()),ca(),a=a.finishReturnStatement(c)),a;case "var":return Y("var"),c=Da(),ca(),a.finishVariableDeclaration(c,"var")}c=ua();if(c.type===K.Identifier&&u(":"))return k(),b="$"+c.name,Object.prototype.hasOwnProperty.call(H.labelSet,b)&&T(P.Redeclaration,"Label",c.name),H.labelSet[b]=!0,d=Aa(!1),delete H.labelSet[b],a.finishLabeledStatement(c,d);ca();return a.finishExpressionStatement(c)}function Ea(){var a,b=[],c,d,e,f,g,h=new t;
for(M("{");p<W&&B.type===A.StringLiteral;){c=B;a=Ca();b.push(a);if(a.expression.type!==K.Literal)break;a=z.slice(c.start+1,c.end-1);"use strict"===a?(X=!0,d&&ba(d,P.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=H.labelSet;d=H.inIteration;e=H.inSwitch;f=H.inFunctionBody;g=H.parenthesizedCount;H.labelSet={};H.inIteration=!1;H.inSwitch=!1;H.inFunctionBody=!0;for(H.parenthesizedCount=0;p<W&&!u("}");){a=Ca();if("undefined"===typeof a)break;b.push(a)}M("}");H.labelSet=c;H.inIteration=d;H.inSwitch=e;H.inFunctionBody=
f;H.parenthesizedCount=g;return h.finishBlockStatement(b)}function ya(a,b,c){c="$"+c;X?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=P.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=P.StrictParamDupe);a.paramSet[c]=!0}function Ha(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};M("(");if(!u(")"))for(a.paramSet={};p<W;){var b=a,c=void 0,d=void 0,e=void 0,c=B,d=sa();ya(b,c,c.value);u("\x3d")&&
(k(),e=ga(),++b.defaultCount);b.params.push(d);b.defaults.push(e);if(u(")"))break;M(",")}M(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ja(){var a,b=[],c=[],d,e,f,g,h,k=new t;Y("function");a=sa();d=Ha(f);b=d.params;c=d.defaults;e=d.stricted;f=d.firstRestricted;d.message&&(g=d.message);h=X;d=Ea();X&&f&&G(f,g);X&&e&&ba(e,g);X=h;return k.finishFunctionDeclaration(a,b,c,d)}function Ca(){if(B.type===
A.Keyword)return"function"===B.value.toLowerCase()?Ja():Aa(!1);if(B.type!==A.EOF)return Aa(!1)}function Ka(){var a,b,c,d=[];for(a=0;a<x.tokens.length;++a)b=x.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),x.range&&(c.range=b.range),x.loc&&(c.loc=b.loc),d.push(c);x.tokens=d}var A,ma,La,K,Ba,xa,P,Ia,z,X,p,L,O,W,B,H,x;A={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};
ma={};ma[A.BooleanLiteral]="Boolean";ma[A.EOF]="\x3cend\x3e";ma[A.Identifier]="Identifier";ma[A.Keyword]="Keyword";ma[A.NullLiteral]="Null";ma[A.NumericLiteral]="Numeric";ma[A.Punctuator]="Punctuator";ma[A.StringLiteral]="String";ma[A.RegularExpression]="RegularExpression";La="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
K={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ba={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
xa={Data:1,Get:2,Set:4};P={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Ia={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
U.prototype=t.prototype={processComment:function(){var a,b,c,d=x.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===K.Program&&0<this.body.length)){if(0<x.trailingComments.length){c=[];for(e=x.trailingComments.length-1;0<=e;--e)f=x.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),x.trailingComments.splice(e,1));x.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<x.leadingComments.length)for(b=[],e=x.leadingComments.length-1;0<=e;--e)f=x.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),x.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){x.range&&(this.range[1]=p);x.loc&&(this.loc.end=
new N,x.source&&(this.loc.source=x.source));x.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=K.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=K.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?K.LogicalExpression:K.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=K.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=K.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=K.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=K.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
K.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=K.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=K.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=K.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=K.ForInStatement;this.left=a;this.right=b;this.body=c;
this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=K.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=K.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=K.Identifier;this.name=
a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=K.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=K.Literal;this.value=a.value;this.raw=z.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=K.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
K.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=K.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=K.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=K.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=K.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?K.UpdateExpression:K.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=K.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=K.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};v.version="2.0.0-dev";v.tokenize=
function(a,b){var c,e;c=String;"string"===typeof a||a instanceof String||(a=c(a));z=a;p=0;L=0<z.length?1:0;O=0;W=z.length;B=null;H={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};x={};b=b||{};b.tokens=!0;x.tokens=[];x.tokenize=!0;x.openParenToken=-1;x.openCurlyToken=-1;x.range="boolean"===typeof b.range&&b.range;x.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(x.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(x.errors=
[]);try{d();if(B.type===A.EOF)return x.tokens;for(k();B.type!==A.EOF;)try{k()}catch(Fa){if(x.errors){x.errors.push(Fa);break}else throw Fa;}Ka();e=x.tokens;"undefined"!==typeof x.comments&&(e.comments=x.comments);"undefined"!==typeof x.errors&&(e.errors=x.errors)}catch(Fa){throw Fa;}finally{x={}}return e};v.parse=function(a,b){var c,e;e=String;"string"===typeof a||a instanceof String||(a=e(a));z=a;p=0;L=0<z.length?1:0;O=0;W=z.length;B=null;H={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};x={};"undefined"!==typeof b&&(x.range="boolean"===typeof b.range&&b.range,x.loc="boolean"===typeof b.loc&&b.loc,x.attachComment="boolean"===typeof b.attachComment&&b.attachComment,x.loc&&null!==b.source&&void 0!==b.source&&(x.source=e(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(x.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(x.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(x.errors=[]),x.attachComment&&(x.range=!0,x.comments=
[],x.bottomRightStack=[],x.trailingComments=[],x.leadingComments=[]));try{var f;C();d();f=new t;X=!1;var g;a=[];for(var h,k,l;p<W;){h=B;if(h.type!==A.StringLiteral)break;g=Ca();a.push(g);if(g.expression.type!==K.Literal)break;k=z.slice(h.start+1,h.end-1);"use strict"===k?(X=!0,l&&ba(l,P.StrictOctalLiteral)):!l&&h.octal&&(l=h)}for(;p<W;){g=Ca();if("undefined"===typeof g)break;a.push(g)}c=f.finishProgram(a);"undefined"!==typeof x.comments&&(c.comments=x.comments);"undefined"!==typeof x.tokens&&(Ka(),
c.tokens=x.tokens);"undefined"!==typeof x.errors&&(c.errors=x.errors)}catch(Na){throw Na;}finally{x={}}return c};v.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in K)K.hasOwnProperty(a)&&(b[a]=K[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/intl/moment":function(){define("require exports ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/MapUtils ./locale @dojo/framework/shim/Promise".split(" "),
function(v,h,l,r,n,m){Object.defineProperty(h,"__esModule",{value:!0});var q=n.MapFromValues([["ar",function(){return new Promise(function(f,a){v(["moment/locale/ar"],f,a)})}],["ar-dz",function(){return new Promise(function(f,a){v(["moment/locale/ar-dz"],f,a)})}],["ar-kw",function(){return new Promise(function(f,a){v(["moment/locale/ar-kw"],f,a)})}],["ar-ly",function(){return new Promise(function(f,a){v(["moment/locale/ar-ly"],f,a)})}],["ar-ma",function(){return new Promise(function(f,a){v(["moment/locale/ar-ma"],
f,a)})}],["ar-sa",function(){return new Promise(function(f,a){v(["moment/locale/ar-sa"],f,a)})}],["ar-tn",function(){return new Promise(function(f,a){v(["moment/locale/ar-tn"],f,a)})}],["bs",function(){return new Promise(function(f,a){v(["moment/locale/bs"],f,a)})}],["ca",function(){return new Promise(function(f,a){v(["moment/locale/ca"],f,a)})}],["cs",function(){return new Promise(function(f,a){v(["moment/locale/cs"],f,a)})}],["da",function(){return new Promise(function(f,a){v(["moment/locale/da"],
f,a)})}],["de",function(){return new Promise(function(f,a){v(["moment/locale/de"],f,a)})}],["de-at",function(){return new Promise(function(f,a){v(["moment/locale/de-at"],f,a)})}],["de-ch",function(){return new Promise(function(f,a){v(["moment/locale/de-ch"],f,a)})}],["el",function(){return new Promise(function(f,a){v(["moment/locale/el"],f,a)})}],["en-au",function(){return new Promise(function(f,a){v(["moment/locale/en-au"],f,a)})}],["en-ca",function(){return new Promise(function(f,a){v(["moment/locale/en-ca"],
f,a)})}],["en-gb",function(){return new Promise(function(f,a){v(["moment/locale/en-gb"],f,a)})}],["en-ie",function(){return new Promise(function(f,a){v(["moment/locale/en-ie"],f,a)})}],["en-il",function(){return new Promise(function(f,a){v(["moment/locale/en-il"],f,a)})}],["en-nz",function(){return new Promise(function(f,a){v(["moment/locale/en-nz"],f,a)})}],["es",function(){return new Promise(function(f,a){v(["moment/locale/es"],f,a)})}],["es-do",function(){return new Promise(function(f,a){v(["moment/locale/es-do"],
f,a)})}],["es-us",function(){return new Promise(function(f,a){v(["moment/locale/es-us"],f,a)})}],["et",function(){return new Promise(function(f,a){v(["moment/locale/et"],f,a)})}],["fi",function(){return new Promise(function(f,a){v(["moment/locale/fi"],f,a)})}],["fr",function(){return new Promise(function(f,a){v(["moment/locale/fr"],f,a)})}],["fr-ca",function(){return new Promise(function(f,a){v(["moment/locale/fr-ca"],f,a)})}],["fr-ch",function(){return new Promise(function(f,a){v(["moment/locale/fr-ch"],
f,a)})}],["he",function(){return new Promise(function(f,a){v(["moment/locale/he"],f,a)})}],["hr",function(){return new Promise(function(f,a){v(["moment/locale/hr"],f,a)})}],["hu",function(){return new Promise(function(f,a){v(["moment/locale/hu"],f,a)})}],["id",function(){return new Promise(function(f,a){v(["moment/locale/id"],f,a)})}],["it",function(){return new Promise(function(f,a){v(["moment/locale/it"],f,a)})}],["it-ch",function(){return new Promise(function(f,a){v(["moment/locale/it-ch"],f,a)})}],
["ja",function(){return new Promise(function(f,a){v(["moment/locale/ja"],f,a)})}],["ko",function(){return new Promise(function(f,a){v(["moment/locale/ko"],f,a)})}],["lt",function(){return new Promise(function(f,a){v(["moment/locale/lt"],f,a)})}],["lv",function(){return new Promise(function(f,a){v(["moment/locale/lv"],f,a)})}],["nb",function(){return new Promise(function(f,a){v(["moment/locale/nb"],f,a)})}],["nl",function(){return new Promise(function(f,a){v(["moment/locale/nl"],f,a)})}],["nl-be",
function(){return new Promise(function(f,a){v(["moment/locale/nl-be"],f,a)})}],["pl",function(){return new Promise(function(f,a){v(["moment/locale/pl"],f,a)})}],["pt",function(){return new Promise(function(f,a){v(["moment/locale/pt"],f,a)})}],["pt-br",function(){return new Promise(function(f,a){v(["moment/locale/pt-br"],f,a)})}],["ro",function(){return new Promise(function(f,a){v(["moment/locale/ro"],f,a)})}],["ru",function(){return new Promise(function(f,a){v(["moment/locale/ru"],f,a)})}],["sl",
function(){return new Promise(function(f,a){v(["moment/locale/sl"],f,a)})}],["sr",function(){return new Promise(function(f,a){v(["moment/locale/sr"],f,a)})}],["sr-cyrl",function(){return new Promise(function(f,a){v(["moment/locale/sr-cyrl"],f,a)})}],["sv",function(){return new Promise(function(f,a){v(["moment/locale/sv"],f,a)})}],["th",function(){return new Promise(function(f,a){v(["moment/locale/th"],f,a)})}],["tr",function(){return new Promise(function(f,a){v(["moment/locale/tr"],f,a)})}],["uk",
function(){return new Promise(function(f,a){v(["moment/locale/uk"],f,a)})}],["vi",function(){return new Promise(function(f,a){v(["moment/locale/vi"],f,a)})}],["zh-cn",function(){return new Promise(function(f,a){v(["moment/locale/zh-cn"],f,a)})}],["zh-hk",function(){return new Promise(function(f,a){v(["moment/locale/zh-hk"],f,a)})}],["zh-tw",function(){return new Promise(function(f,a){v(["moment/locale/zh-tw"],f,a)})}]]);h.loadMoment=function(f){void 0===f&&(f=m.getLocale());return l(this,void 0,void 0,
function(){var a,g,e;return r(this,function(h){switch(h.label){case 0:return[4,new Promise(function(a,e){v(["moment/moment"],a,e)})];case 1:return a=h.sent(),g=q.has(f),g||(e=f.split("-"),1<e.length&&q.has(e[0])&&(f=e[0],g=!0)),g?[4,q.get(f)()]:[3,3];case 2:return h.sent(),[3,4];case 3:f="en",h.label=4;case 4:return f!==a.locale()&&a.locale(f),[2,a]}})})}})},"*noref":1}});
define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang ../core/promiseUtils ../renderers/visualVariables/support/sizeVariableUtils".split(" "),function(v,h,l,r,n,m,q,f){function a(a){if(!a)return null;try{return l.parseScript(a)}catch(w){}return null}function g(c){c=a(c);return!!c&&l.scriptUsesGeometryEngine(c)}Object.defineProperty(h,"__esModule",{value:!0});h.arcade=l;h.Dictionary=r;h.arcadeFeature=n;var e=/^\$feature\./i,C={vars:{$feature:"any",$view:"any"},
spatialReference:null};h.createSyntaxTree=a;h.createFunction=function(c,e){c="string"===typeof c?a(c):c;if(!c)return null;try{return e=e||m.clone(C),l.compileScript(c,e)}catch(y){}return null};h.createExecContext=function(a,e){return{vars:{$feature:null==a?new n:n.createFromGraphic(a),$view:e&&e.view},spatialReference:e&&e.sr}};h.createFeature=function(a,e,f){return n.createFromGraphicLikeObject(e,a,f)};h.updateExecContext=function(a,e){a.vars.$feature=e};h.evalSyntaxTree=function(a,e){var c;try{c=
l.executeScript(a,e)}catch(D){c=null}return c};h.executeFunction=function(a,e){var c;try{c=a?a(e):null}catch(D){c=null}return c};h.executeAsyncFunction=function(a,e){try{return a?a(e):q.resolve(null)}catch(y){return q.resolve(null)}};h.extractFieldNames=function(c){if(!c)return[];c="string"===typeof c?a(c):c;if(!c)return[];var f=[];l.extractFieldLiterals(c).forEach(function(a){e.test(a)&&(a=a.replace(e,""),f.push(a))});f.sort();return f.filter(function(a,c){return 0===c||f[c-1]!==a})};h.dependsOnView=
function(a){return l.referencesMember(a,"$view")};h.hasVariable=function(a,e){return a?l.referencesMember(a,e):!1};h.getViewInfo=function(a){if(a&&(null!=a.spatialReference||null!=a.scale&&null!=a.viewingMode))return{view:a.viewingMode&&null!=a.scale?new r({viewingMode:a.viewingMode,scale:a.scale}):null,sr:a.spatialReference}};h.convertServiceUrlToWorkspace=function(a,e){var c=l.featureSetUtils();return c?c.createFeatureSetCollectionFromService(a,e):null};h.convertFeatureLayerToFeatureSet=function(a,
e){if(null===a)return null;var c=l.featureSetUtils();return c?c.constructFeatureSet(a,e):null};h.convertMapToFeatureSetCollection=function(a){if(null===a||null===a.map)return null;var c=l.featureSetUtils();return c?c.createFeatureSetCollectionFromMap(a.map,a.spatialReference):null};h.loadScriptDependencies=function(a,e,f){void 0===f&&(f=[]);return l.loadScriptDependencies(a,e,f)};h.enableGeometryOperations=function(){return l.enableGeometrySupport()};h.enableFeatureSetOperations=function(){return l.enableFeatureSetSupport()};
h.applyTextFormattingHTML=function(a){var c=/(\n)/gi;return"string"===typeof a?a.replace(c,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):a};h.hasGeometryOperations=function(a){if(!a)return!1;if("string"===typeof a)return g(a);if("simple"===a.type||"class-breaks"===a.type||"unique-value"===a.type||"dot-density"===a.type||"dictionary"===a.type){if("dot-density"===a.type){var c=a.attributes.some(function(a){return g(a.valueExpression)});if(c)return c}c=a.visualVariables;c=!!c&&c.some(function(a){var c=
g(a.valueExpression);"size"===a.type&&(f.isSizeVariable(a.minSize)&&(c=c||g(a.minSize.valueExpression)),f.isSizeVariable(a.maxSize)&&(c=c||g(a.maxSize.valueExpression)));return c});return"valueExpression"in a&&g(a.valueExpression)?!0:c}return"esri.layers.support.LabelClass"===a.declaredClass?(a=a.labelExpressionInfo&&a.labelExpressionInfo.expression,!(!a||!g(a))||!1):"esri.PopupTemplate"===a.declaredClass?!!a.expressionInfos&&a.expressionInfos.some(function(a){return g(a.expression)}):!1}});