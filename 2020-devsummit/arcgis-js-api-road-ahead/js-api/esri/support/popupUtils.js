// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/assignHelper ../PopupTemplate ../popup/content ../popup/FieldInfo ../popup/support/FieldInfoFormat".split(" "),function(z,l,p,q,m,r,f){function t(a,b){var c=a;b.ignoreFieldTypes&&(a=a.filter(function(a){return-1===b.ignoreFieldTypes.indexOf(a.type)}));if(0===a.length)return null;a===c&&(a=a.slice());a.sort(u);return{fields:a}}function u(a,b){return"oid"===a.type?-1:"oid"===b.type?1:n(a)?-1:n(b)?1:(a.alias||a.name).toLocaleLowerCase().localeCompare((b.alias||
b.name).toLocaleLowerCase())}function v(a){var b=a.visibleFieldNames,c=a.editFieldsInfo;return a.fields.map(function(a){var d=a.name,e;if(e=a.editable&&-1===w.indexOf(a.type)){if((e=a.name)&&c){var g=c.creationDateField,k=c.creatorField,f=c.editDateField,h=c.editorField;e=-1!==[g&&g.toLowerCase(),k&&k.toLowerCase(),f&&f.toLowerCase(),h&&h.toLowerCase()].indexOf(e.toLowerCase())}else e=!1;e=!e}return new r({fieldName:d,isEditable:e,label:a.alias,format:x(a),visible:b?b.has(a.name):!0})})}function x(a){switch(a.type){case "small-integer":case "integer":case "single":return new f({digitSeparator:!0,
places:0});case "double":return new f({digitSeparator:!0,places:2});case "date":return new f({dateFormat:"long-month-day-year"});default:return null}}function h(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d&&d.valueType&&d.valueType===b)return d.name}return null}function n(a){if("name"===(a.name&&a.name.toLowerCase())||"name"===(a.alias&&a.alias.toLowerCase()))return!0}Object.defineProperty(l,"__esModule",{value:!0});var w=["oid","global-id","guid"];l.createPopupTemplate=function(a,b){var c=a.displayField,
d=a.fields,f=a.title,e=a.visibleFieldNames;a=a.editFieldsInfo;if(!d)return null;b=p({},y,b);d=t(d,b);if(!d)return null;b=d.fields;if(!c){if(b&&b.length){if(!(c=h(b,"name-or-title")||h(b,"unique-identifier")||h(b,"type-or-category")))a:{for(c=0;c<b.length;c++){var g=b[c];if(g&&g.name){var k=g.name.toLowerCase();if(-1<k.indexOf("name")||-1<k.indexOf("title")){c=g.name;break a}}}c=null}b=c}else b=null;c=b}f=(b=c)?f+": {"+b.trim()+"}":f;b=[new m.FieldsContent,new m.AttachmentsContent];e=v({fields:d.fields,
visibleFieldNames:e,editFieldsInfo:a});return new q({title:f,content:b,fieldInfos:e})};var y={ignoreFieldTypes:["geometry","blob","raster","guid","xml"]}});