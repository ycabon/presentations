// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/lang ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/fieldUtils ../portal/Portal ./Symbol ./support/cimSymbolUtils".split(" "),function(x,y,m,c,n,p,q,r,b,t,u,v,w){return function(e){function a(a){a=e.call(this,a)||this;a.data=null;a.portal=null;a.styleUrl="";a.type="cim";return a}m(a,e);d=a;a.prototype.readData=
function(a,b){return b.symbol};a.prototype.writeData=function(a,b){a&&(b.symbol=a)};a.prototype.readStyleUrl=function(a,b){return b.symbolUrl?b.symbolUrl:a};a.prototype.writeStyleUrl=function(a,b){a&&(b.symbolUrl=a)};a.prototype.collectRequiredFields=function(a,b){return p(this,void 0,void 0,function(){var c,d,g,h,e,k,l;return n(this,function(f){switch(f.label){case 0:return[4,w.fetchSymbol(this)];case 1:f.sent(),d=(c="object"===typeof this.data&&this.data.length)?this.data:[this.data],g=0,h=d,f.label=
2;case 2:if(!(g<h.length))return[3,5];e=h[g];k=e.primitiveOverrides;if(!k)return[3,4];l=k.map(function(c){return t.collectArcadeFieldNames(a,b,c.valueExpressionInfo.expression)});return[4,r.all(l)];case 3:f.sent(),f.label=4;case 4:return g++,[3,2];case 5:return[2]}})})};a.prototype.clone=function(){return new d({color:this.color.clone(),data:q.clone(this.data),portal:this.portal,styleName:this.styleName,styleUrl:this.styleUrl})};a.prototype.hash=function(){return this.color.hash()+"."+this.data+"."+
this.portal+"."+this.styleName+"."+this.styleUrl};var d;c([b.property({json:{write:!1}})],a.prototype,"color",void 0);c([b.property({json:{write:!0}})],a.prototype,"data",void 0);c([b.reader("data",["data","symbol"])],a.prototype,"readData",null);c([b.writer("data")],a.prototype,"writeData",null);c([b.property({type:u,json:{write:!1}})],a.prototype,"portal",void 0);c([b.property({json:{write:!0}})],a.prototype,"styleName",void 0);c([b.property({type:String,json:{write:!0}})],a.prototype,"styleUrl",
void 0);c([b.reader("styleUrl",["styleUrl","symbolUrl"])],a.prototype,"readStyleUrl",null);c([b.writer("styleUrl")],a.prototype,"writeStyleUrl",null);c([b.enumeration.serializable()({CIMSymbolReference:"cim"})],a.prototype,"type",void 0);return a=d=c([b.subclass("esri.symbols.CIMSymbol")],a)}(b.declared(v))});