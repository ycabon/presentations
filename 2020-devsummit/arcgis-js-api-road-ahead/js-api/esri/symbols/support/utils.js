// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../Color ../../symbols ../../core/compilerUtils ../../core/has ../../core/Logger ../../core/maybe ../../core/screenUtils ./gfxUtils ./Symbol3DMaterial".split(" "),function(y,d,h,e,m,n,p,f,q,r,t){function g(a,b){if(null==b)return a;a=a.toRgba();a[3]*=b;return new h(a)}function u(a,b,c){if(a=a.symbolLayers){var k=function(a){a=f.isSome(a)?a:null;b=b||a||null!=c&&v;return g(b,c)};a.forEach(function(a){if("object"!==a.type||null==a.resource.href||b)if("water"===a.type)a.color=
k(a.color);else{var d=f.isSome(a.material)?a.material.color:null,d=k(d);f.isNone(a.material)?a.material=new t.default({color:d}):a.material.color=d;null!=c&&"outline"in a&&f.isSome(a.outline)&&f.isSome(a.outline.color)&&(a.outline.color=g(a.outline.color,c))}})}}function w(a,b,c){(a=a.symbolLayers)&&a.forEach(function(a){if(a)switch(a.type){case "icon":case "line":case "path":case "extrude":case "text":a.size=b;break;case "object":switch(c){case "width":a.width=b;break;case "depth":a.depth=b;break;
case "height":a.height=b;break;case "width-and-depth":a.width=b;a.depth=b;break;default:a.width=b,a.depth=b,a.height=b}break;default:x.warn("symbolUtils: applySizeToSymbol","symbolLayer not supported")}})}Object.defineProperty(d,"__esModule",{value:!0});var x=p.getLogger("esri.symbols.support.utils"),l=/\/resource\/(.*?)\.svg$/,v=new h("white");d.getSymbolOutlineSize=function(a){if(!a)return 0;if(e.isSymbol3D(a)){var b=a.symbolLayers&&a.symbolLayers.length;b?(a=a.symbolLayers.getItemAt(b-1),a="outline"in
a?f.get(a,"outline","size"):void 0):a=void 0;return f.isSome(a)?a:0}return(a=r.getStroke(a))&&q.px2pt(a.width)||0};d.isVolumetricSymbol=function(a){if(!a||!a.symbolLayers)return!1;switch(a.type){case "point-3d":return a.symbolLayers.some(function(a){return"object"===a.type});case "line-3d":return a.symbolLayers.some(function(a){return"path"===a.type});case "polygon-3d":return a.symbolLayers.some(function(a){return"object"===a.type||"extrude"===a.type});default:return!1}};d.getIconHref=function(a,
b){b=b.resource.href;return!n("esri-canvas-svg-support")&&a.styleOrigin&&l.test(b)?b.replace(l,"/resource/png/$1.png"):b};d.applyOpacityToColor=g;d.applyColorToSymbol=function(a,b,c){if(a&&(b||null!=c))if(b&&(b=new h(b)),e.isSymbol3D(a))u(a,b,c);else if(e.isSymbol2D(a)){if(b=b||a.color)a.color=g(b,c);null!=c&&"outline"in a&&a.outline&&a.outline.color&&(a.outline.color=g(a.outline.color,c))}};d.applySizeToSymbol=function(a,b,c){if(a&&null!=b)if(e.isSymbol3D(a))w(a,b,c);else if(e.isSymbol2D(a))switch(a.type){case "simple-marker":a.size=
b;break;case "picture-marker":c=a.width/a.height;1<c?(a.width=b,a.height=b*c):(a.width=b*c,a.height=b);break;case "simple-line":a.width=b;break;case "text":a.font.size=b;break;case "simple-fill":case "picture-fill":break;case "cim":break;default:m.neverReached(a)}};d.applyRotationToSymbol=function(a,b,c){a&&null!=b&&(e.isSymbol3D(a)?(a=a.symbolLayers)&&a.forEach(function(a){if(a&&"object"===a.type)switch(c){case "tilt":a.tilt=b;break;case "roll":a.roll=b;break;default:a.heading=b}}):!e.isSymbol2D(a)||
"simple-marker"!==a.type&&"picture-marker"!==a.type&&"text"!==a.type||(a.angle=b))}});