// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryAttachments ./operations/queryRelatedRecords ./support/AttachmentQuery ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),function(v,w,m,f,x,d,n,e,p,g,h,q,r,k,t,u){return function(l){function c(a){a=l.call(this,a)||this;a.gdbVersion=
null;a.source=null;a.sourceSpatialReference=null;return a}m(c,l);c.prototype.execute=function(a,b){return this.executeJSON(a,b).then(function(a){return k.fromJSON(a)})};c.prototype.executeJSON=function(a,b){return g.executeQuery(this.parsedUrl,this._normalizeQuery(a),this.sourceSpatialReference,d({},this.requestOptions,b)).then(function(a){return a.data})};c.prototype.executeForCount=function(a,b){return g.executeQueryForCount(this.parsedUrl,this._normalizeQuery(a),d({},this.requestOptions,b)).then(function(a){return a.data.count})};
c.prototype.executeForExtent=function(a,b){return g.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(a),d({},this.requestOptions,b)).then(function(a){return{count:a.data.count,extent:n.Extent.fromJSON(a.data.extent)}})};c.prototype.executeForIds=function(a,b){return g.executeQueryForIds(this.parsedUrl,this._normalizeQuery(a),d({},this.requestOptions,b)).then(function(a){return a.data.objectIds})};c.prototype.executeRelationshipQuery=function(a,b){a=u.from(a);if(this.gdbVersion||this.source)a=
a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source});return q.executeRelationshipQuery(this.parsedUrl,a,d({},this.requestOptions,b)).then(function(a){var b=a.data,c={};Object.keys(b).forEach(function(a){return c[a]=k.fromJSON(b[a])});return c})};c.prototype.executeAttachmentQuery=function(a,b){var c=this;return h.executeAttachmentQuery(this.parsedUrl,r.from(a),d({},this.requestOptions,b)).then(function(a){return h.processAttachmentQueryResult(a.data.attachmentGroups,
c.parsedUrl.path)})};c.prototype._normalizeQuery=function(a){var b=t.from(a);return this.gdbVersion||this.source?(b===a?b.clone():b).set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source}):b};f([e.property()],c.prototype,"gdbVersion",void 0);f([e.property()],c.prototype,"source",void 0);f([e.property()],c.prototype,"sourceSpatialReference",void 0);return c=f([e.subclass("esri.tasks.QueryTask")],c)}(e.declared(p))});