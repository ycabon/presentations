// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/unitUtils","../../geometry/support/spatialReferenceUtils"],function(r,g,k,m){function n(c,d,b){if(!d||!b||b.vcsWkid||m.equals(d,b))return null;d=k.getMetersPerVerticalUnitForSR(d);b=k.getMetersPerVerticalUnitForSR(b);var e=d/b;if(1===e)return null;switch(c){case "point":case "esriGeometryPoint":return function(a){a&&null!=a.z&&(a.z*=e)};case "polyline":case "esriGeometryPolyline":return function(a){if(a){var b=0;for(a=a.paths;b<a.length;b++)for(var c=0,d=a[b];c<
d.length;c++){var h=d[c];2<h.length&&(h[2]*=e)}}};case "polygon":case "esriGeometryPolygon":return function(a){if(a){var b=0;for(a=a.rings;b<a.length;b++)for(var c=0,d=a[b];c<d.length;c++){var h=d[c];2<h.length&&(h[2]*=e)}}};case "multipoint":case "esriGeometryMultipoint":return function(a){if(a){var b=0;for(a=a.points;b<a.length;b++){var c=a[b];2<c.length&&(c[2]*=e)}}};default:return null}}function p(c,d,b){if(null==c.hasM||c.hasZ)for(c=0;c<d.length;c++)for(var e=0,a=d[c];e<a.length;e++){var f=a[e];
2<f.length&&(f[2]*=b)}}function q(c,d,b){if(c)for(var e=0;e<c.length;e++){var a=c[e].geometry,f=b;if(a&&a.spatialReference&&!m.equals(a.spatialReference,d)&&(f=k.getMetersPerVerticalUnitForSR(a.spatialReference)/f,1!==f))if("x"in a)null!=a.z&&(a.z*=f);else if("rings"in a)p(a,a.rings,f);else if("paths"in a)p(a,a.paths,f);else if("points"in a&&(null==a.hasM||a.hasZ))for(var g=0,a=a.points;g<a.length;g++){var l=a[g];2<l.length&&(l[2]*=f)}}}Object.defineProperty(g,"__esModule",{value:!0});g.getGeometryZScaler=
n;g.applyFeatureSetZUnitScaling=function(c,d,b){if(b&&b.features&&b.hasZ&&(c=n(b.geometryType,d,c.outSpatialReference)))for(d=0,b=b.features;d<b.length;d++)c(b[d].geometry)};g.unapplyEditsZUnitScaling=function(c,d,b){if((c||d)&&b){var e=k.getMetersPerVerticalUnitForSR(b);q(c,b,e);q(d,b,e)}}});