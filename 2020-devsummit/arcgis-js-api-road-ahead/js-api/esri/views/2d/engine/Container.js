// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(g,h,k,l){Object.defineProperty(h,"__esModule",{value:!0});g=function(f){function c(){var a=null!==f&&f.apply(this,arguments)||this;a._childrenSet=new Set;a._childrenToAttach=[];a._childrenToDetach=[];a._blendMode=null;a._postProcessingEffects=null;a.children=[];return a}k(c,f);Object.defineProperty(c.prototype,"blendMode",{get:function(){return this._blendMode},set:function(a){if(this._blendMode!==a){this._blendMode=
a;for(var b=0,d=this.children;b<d.length;b++){var e=d[b];e instanceof c&&(e.blendMode=a)}this.requestRender()}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"postProcessingEffects",{get:function(){return this._postProcessingEffects},set:function(a){if(a&&0<a.length){this._postProcessingEffects=Array(a.length);for(var b=0;b<a.length;b++)this._postProcessingEffects[b]=
a[b]}else this._postProcessingEffects=null;for(var b=0,d=this.children;b<d.length;b++){var e=d[b];e instanceof c&&(e.postProcessingEffects=a)}this.requestRender()},enumerable:!0,configurable:!0});c.prototype.detach=function(){for(var a=0,b=this.children.concat(this._childrenToDetach);a<b.length;a++){var d=b[a];d.attached&&(this.detachChild(d),d.attached=!1,d.parent=null)}};c.prototype.doRender=function(a){var b=a.globalOpacity;a.globalOpacity*=this.opacity;this.attachChildren();this.detachChildren();
this.renderChildren(a);a.globalOpacity=b};c.prototype.addChild=function(a){return this.addChildAt(a,this.children.length)};c.prototype.addChildAt=function(a,b){void 0===b&&(b=this.numChildren);if(!a||this.contains(a))return a;var d=a.parent;d&&d!==this&&d.removeChild(a);b>=this.numChildren?this.children.push(a):this.children.splice(b,0,a);this._childrenSet.add(a);b=this._childrenToDetach.indexOf(a);-1<b&&this._childrenToDetach.splice(b,1);a instanceof c&&(a.blendMode=this.blendMode);this._childrenToAttach.push(a);
this.requestRender();return a};c.prototype.contains=function(a){return this._childrenSet.has(a)};c.prototype.getChildIndex=function(a){return this.children.indexOf(a)};c.prototype.getChildAt=function(a){return 0>a||a>this.children.length?null:this.children[a]};c.prototype.removeAllChildren=function(){for(var a=this.numChildren;a--;)this.removeChildAt(0)};c.prototype.removeChild=function(a){return this.contains(a)?this.removeChildAt(this.getChildIndex(a)):a};c.prototype.removeChildAt=function(a){if(0>
a||a>=this.children.length)return null;a=this.children.splice(a,1)[0];this._childrenSet["delete"](a);if(a.attached)this._childrenToDetach.push(a);else{var b=this._childrenToAttach.indexOf(a);-1<b&&this._childrenToAttach.splice(b,1)}return a};c.prototype.setChildIndex=function(a,b){var d=this.getChildIndex(a);-1<d&&(this.children.splice(d,1),this.children.splice(b,0,a))};c.prototype.sortChildren=function(a){return this.children.sort(a)};c.prototype.attachChildren=function(){var a=this._childrenToAttach;
if(0!==a.length)for(var b=0,d=!1;!d;)d=a[b],d.parent=this,d.stage=this.stage,this.attachChild(d)?(d.attached=!0,a.splice(b,1)):++b,d=a.length===b};c.prototype.detachChildren=function(){for(var a=this._childrenToDetach;0<a.length;){var b=a.shift();this.detachChild(b);b.attached=!1;b.parent=null;b.stage=null}};c.prototype.renderChildren=function(a){for(var b=this.children,d=b.length,c=0;c<d;c++)b[c].processRender(a)};c.prototype.attachChild=function(a){return a.attach()};c.prototype.detachChild=function(a){a.detach()};
return c}(l.DisplayObject);h.Container=g});