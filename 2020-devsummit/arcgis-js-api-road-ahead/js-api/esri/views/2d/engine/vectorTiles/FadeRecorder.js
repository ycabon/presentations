// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/now"],function(f,g,h){Object.defineProperty(g,"__esModule",{value:!0});(function(){return function(c,b){this.level=c;this.now=b}})();f=function(){return function(c,b,d,a){this.fadeSpeed=c;this.minfadeLevel=b;this.maxfadeLevel=d;this.fadeChange=a}}();g.FadeProperties=f;f=function(){function c(b,d){void 0===b&&(b=300);void 0===d&&(d=!1);this._levelSnapshots=[];this._duration=b;this._ignoreSpeed=d}c.prototype.recordLevel=function(b){var d=h(),a=this._levelSnapshots;
0===a.length&&(a.push({level:b,now:0}),a.push({level:b,now:0}));2!==a.length&&a[0].level===b||a.push({level:b,now:d})};c.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var b=this._duration,d=this._levelSnapshots,a=d.length,c=d[a-1],e=-1;a>e+1&&d[e+1].now+b<c.now;)e++;for(0>e&&(e=0);e<a;e++)if(d[e].level!==c.level)return!0;return!1};c.prototype.getFadeValues=function(){for(var b=this._duration,d=h(),a=this._levelSnapshots;3<a.length&&a[1].now+b<d;)a.shift();a[1].now+
b<d&&(a[0].level=a[1].level);var c=a[0].level,e=a[a.length-1],f=e.level,g=Math.min(c,f),c=Math.max(c,f),a=(e.level-a[1].level)/((e.now-a[1].now)/b);return this._ignoreSpeed?{fadeSpeed:0,minfadeLevel:g,maxfadeLevel:c,fadeChange:0}:{fadeSpeed:a,minfadeLevel:g,maxfadeLevel:c,fadeChange:(d-e.now)/b*a}};return c}();g.FadeRecorder=f});