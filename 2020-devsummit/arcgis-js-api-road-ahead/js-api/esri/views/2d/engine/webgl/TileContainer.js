// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ./enums ./WGLContainer ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil".split(" "),function(g,e,h,k,f,l,m,n){Object.defineProperty(e,"__esModule",{value:!0});e.sortByLevel=function(c,a){return 0!==c.key.level-a.key.level?c.key.level-a.key.level:0!==c.key.row-a.key.row?c.key.row-a.key.row:c.key.col-a.key.col};g=function(c){function a(d,b){b=c.call(this,b)||this;b._tileInfoView=d;return b}h(a,c);
a.prototype.renderChildren=function(d){this.sortChildren(e.sortByLevel);this.setStencilReference();c.prototype.renderChildren.call(this,d)};a.prototype.createRenderParams=function(d){var b=d.state;return k({},c.prototype.createRenderParams.call(this,d),{requiredLevel:this._tileInfoView.getClosestInfoForScale(b.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(b.scale)})};a.prototype.prepareRenderPasses=function(d){var b=this,a=d.registerRenderPass({name:"stencil",brushes:[n.default],
drawPhase:f.WGLDrawPhase.DEBUG|f.WGLDrawPhase.MAP,target:function(){return b.children}}),e=d.registerRenderPass({name:"tileInfo",brushes:[m.default],drawPhase:f.WGLDrawPhase.DEBUG,target:function(){return b.children},has:"esri-tiles-debug"});return c.prototype.prepareRenderPasses.call(this,d).concat([a,e])};a.prototype.updateTransforms=function(a){for(var b=0,d=this.children;b<d.length;b++){var c=d[b],e=this._tileInfoView.getTileResolution(c.key);c.setTransform(a,e)}};a.prototype.setStencilReference=
function(){for(var a=1,b=0,c=this.children;b<c.length;b++)c[b].stencilRef=a++};return a}(l.default);e.default=g});