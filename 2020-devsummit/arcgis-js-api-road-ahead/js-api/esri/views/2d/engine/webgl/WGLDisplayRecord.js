// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","./MeshData","./Utils"],function(q,r,n,m){return function(){function c(a,b,k,d,f){void 0===d&&(d=0);void 0===f&&(f=0);this.id=a;this.geometryType=b;this.materialKey=k;this.minZoom=d;this.maxZoom=f;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(c.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});c.prototype.clone=
function(){return this.copy()};c.prototype.copy=function(){var a=new c(this.id,this.geometryType,this.materialKey);a.vertexFrom=this.vertexFrom;a.vertexCount=this.vertexCount;a.indexFrom=this.indexFrom;a.indexCount=this.indexCount;a.zOrder=this.zOrder;a.symbolLevel=this.symbolLevel;a.meshData=this.meshData;a.minZoom=this.minZoom;a.maxZoom=this.maxZoom;return a};c.prototype.setMeshDataFromBuffers=function(a,b,k){var d=new n,f;for(f in b){for(var g=b[f].stride,c=b[f].data,h=[],p=m.strideToPackingFactor(g),
e=0;e<g*a.vertexCount/p;++e)h[e]=c[e+g*a.vertexFrom/p];d.vertexData.set(f,h)}for(e=d.indexData.length=0;e<a.indexCount;++e)d.indexData[e]=k[e+a.indexFrom]-a.vertexFrom;d.vertexCount=a.vertexCount;this.meshData=d};c.prototype.readMeshDataFromBuffers=function(a,b){this.meshData?this.meshData.clear():this.meshData=new n;for(var c in a){for(var d=a[c].stride,f=a[c].data,g=[],l=m.strideToPackingFactor(d),h=0;h<d*this.vertexCount/l;++h)g[h]=f[h+d*this.vertexFrom/l];this.meshData.vertexData.set(c,g)}for(h=
this.meshData.indexData.length=0;h<this.indexCount;++h)this.meshData.indexData[h]=b[h+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};c.prototype.writeMeshDataToBuffers=function(a,b,c,d){for(var f in b)for(var g=b[f].stride,l=this.meshData.vertexData.get(f),h=b[f].data,k=m.strideToPackingFactor(g),e=0;e<g*this.meshData.vertexCount/k;++e)h[e+g*a/k]=l[e];for(e=0;e<this.meshData.indexData.length;++e)d[e+c]=this.meshData.indexData[e]+a;this.vertexFrom=a;this.vertexCount=this.meshData.vertexCount;
this.indexFrom=c;this.indexCount=this.meshData.indexData.length};c.writeAllMeshDataToBuffers=function(a,b,c){for(var d=0,f=0,g=0;g<a.length;g++){var k=a[g];k.writeMeshDataToBuffers(d,b,f,c);d+=k.vertexCount;f+=k.indexCount}};c.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};c.prototype.serialize=function(a){a.push(this.geometryType);a.push(this.materialKey);a.push(this.symbolLevel);a.push(this.zOrder);a.push(this.vertexFrom);a.push(this.vertexCount);
a.push(this.indexFrom);a.push(this.indexCount);a.push(this.minZoom);a.push(this.maxZoom);return a};c.deserialize=function(a,b){var k=a.readInt32(),d=a.readInt32();b=new c(b.id,k,d);b.symbolLevel=a.readInt32();b.zOrder=a.readInt32();b.vertexFrom=a.readInt32();b.vertexCount=a.readInt32();b.indexFrom=a.readInt32();b.indexCount=a.readInt32();b.minZoom=a.readInt32();b.maxZoom=a.readInt32();return b};return c}()});