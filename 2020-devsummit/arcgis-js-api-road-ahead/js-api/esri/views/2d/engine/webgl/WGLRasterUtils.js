// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../webgl"],function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});k.createRasterTexture=function(e,a,c,d){void 0===c&&(c="nearest");void 0===d&&(d=!1);var b=!(d&&"u8"===a.pixelType);d=b?5126:5121;b=null==a.pixels||0===a.pixels.length?null:b?a.getAsRGBAFloat():a.getAsRGBA();return new l.Texture(e,{width:a.width,height:a.height,target:3553,pixelFormat:6408,internalFormat:6408,samplingMode:"bilinear"===c?9729:9728,dataType:d,wrapMode:33071,flipped:!1},b)};
k.createFrameBuffer=function(e,a,c,d){d=new l.Texture(e,{width:a,height:c,target:3553,pixelFormat:6408,internalFormat:6408,samplingMode:9728,dataType:d?5121:5126,wrapMode:33071,flipped:!1});return new l.FramebufferObject(e,{colorTarget:0,depthStencilTarget:3,width:a,height:c},d)};k.createTransformTexture=function(e,a){for(var c=4*a.size[0],d=a.size[1],b={width:c,height:d,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5126,samplingMode:9728,wrapMode:33071,flipped:!1},c=new Float32Array(c*
d*4),f=d=0;f<a.coefficients.length;f++)c[d++]=a.coefficients[f],2===f%3&&(c[d++]=1);return new l.Texture(e,b,c)};k.createColormapTexture=function(e,a){return new l.Texture(e,{width:a.length/4,height:1,target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,flipped:!1},a)};k.getUniformInfos=function(e,a){e=e.gl;a=a.glName;for(var c=e.getProgramParameter(a,e.ACTIVE_UNIFORMS),d=new Map,b,f=0;f<c;f++)(b=e.getActiveUniform(a,f))&&d.set(b.name,{location:e.getUniformLocation(a,
b.name),info:b});return d};k.setUniforms=function(e,a,c,d){Object.keys(d).forEach(function(b){var f=c.get(b)||c.get(b+"[0]");if(f){var h=d[b];if(null!==f&&null!=h){var g=e.gl,f=f.info;switch(f.type){case g.FLOAT:1<f.size?a.setUniform1fv(b,h):a.setUniform1f(b,h);break;case g.FLOAT_VEC2:a.setUniform2fv(b,h);break;case g.FLOAT_VEC3:a.setUniform3fv(b,h);break;case g.FLOAT_VEC4:a.setUniform4fv(b,h);break;case g.FLOAT_MAT3:a.setUniformMatrix3fv(b,h);break;case g.FLOAT_MAT4:a.setUniformMatrix4fv(b,h);break;
case g.INT:case g.BOOL:1<f.size?a.setUniform1iv(b,h):a.setUniform1i(b,h);break;case g.INT_VEC2:case g.BOOL_VEC2:a.setUniform2iv(b,h);break;case g.INT_VEC3:case g.BOOL_VEC3:a.setUniform3iv(b,h);break;case g.INT_VEC4:case g.BOOL_VEC4:a.setUniform4iv(b,h)}}}})};k.setTextures=function(e,a,c,d){c.length===d.length&&(d.some(function(a){return null==a})||c.some(function(a){return null==a})||c.forEach(function(b,c){a.setUniform1i(b,c);e.bindTexture(d[c],c)}))}});