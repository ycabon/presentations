// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../VertexStream ../WGLRasterUtils ./WGLBrush".split(" "),function(h,k,l,m,n,g,p){Object.defineProperty(k,"__esModule",{value:!0});h=function(e){function c(){var a=null!==e&&e.apply(this,arguments)||this;a._desc={lut:{path:"raster/lut",attributes:{a_position:0,a_texcoord:1}},stretch:{path:"raster/stretch",attributes:{a_position:0,a_texcoord:1}},hillshade:{path:"raster/hillshade",attributes:{a_position:0,
a_texcoord:1}}};return a}l(c,e);c.prototype.dispose=function(){this._quad&&this._quad.dispose()};c.prototype.prepareState=function(a,b){a=a.context;a.setBlendingEnabled(!0);a.setBlendFunctionSeparate(1,771,1,771);a.setColorMask(!0,!0,!0,!0);a.setStencilWriteMask(0);a.setStencilTestEnabled(!0);a.setStencilFunction(514,b.stencilRef,255)};c.prototype.draw=function(a,b){var c=a.context,d=a.painter;if(b.source&&!b.suspended){a.timeline.begin(this.name);this._quad||(this._quad=new n(c,[0,0,1,0,0,1,1,1]));
d=d.materialManager.getProgram(a,this._desc[b.symbolizerParameters.type]);c.bindProgram(d);var e=g.getUniformInfos(c,d),f=b.getTextures();g.setTextures(c,d,f.names,f.textures);f=b.getUniforms();b=m({u_opacity:b.opacity,u_coordScale:b.coordScale},f);b.u_flipY=!1;g.setUniforms(c,d,e,b);this._quad.draw();a.timeline.end(this.name)}};return c}(p.default);k.default=h});