// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/screenUtils ./visualVariableSimpleUtils".split(" "),function(m,d,p,n,q,r){function t(a){return function(b){return q.pt2px(r.getSizeForValueSimple(b,a))}}function l(a){if(!a)return null;for(var b=0;b<a.length;b++){var c=a[b];if("size"===c.type)return t(c)}return null}Object.defineProperty(d,"__esModule",{value:!0});var u=function(a,b){return a.order-b.order},v=function(a,b){return a.index-b.index},
w=p.getLogger("esri/views/2d/engine/webgl/collisions/CollisionEngine");d.createLabelVVEvaluator=l;m=function(){function a(b,a,f,k){var c=this;this._vvHandle=null;var e=b.layer,g=e.geometryType,h=e.labelingInfo,d=e.renderer;this.vvEval=l("visualVariables"in d&&d.visualVariables);this._vvHandle=e.watch("visualVariables",function(b){c.vvEval=l(b)});e=h.map(function(b){var a=!!b.maxScale,c=!!b.minScale&&k.scaleToZoom(b.minScale)||0;b=a&&k.scaleToZoom(b.maxScale)||255;return{minZoom:n.clamp(Math.floor(10*
c),0,255),maxZoom:n.clamp(Math.floor(10*b),0,255)}});this.layerView=b;this.geometryType=g;this.index=a;this.order=f;this.zoomRanges=e;this.layerView=b}a.prototype.hasVV=function(){return!!this.vvEval};a.prototype.allOrNothing=function(){return"polyline"!==this.geometryType};a.prototype.destroy=function(){this._vvHandle.remove()};a.create=function(b,c,f,k){f=f.sort(u);for(var d=!1,e=-1,g=0;g<f.length;g++){var h=f[g];!d&&h.order>c&&(e=h.index,d=!0);d&&h.index++}d||(e=f.length);return new a(b,e,c,k)};
a.delete=function(b,a){for(var f=a.sort(v),c=b+1;c<f.length;c++)a[c].index--;a[b].destroy();a.splice(b,1)};a.find=function(b,a){for(var c=0;c<a.length;c++){var d=a[c];if(d.index===b)return d}w.error("Tried to get a LayerCollisionInfo for an index that doesn't exist!");return null};return a}();d.default=m});