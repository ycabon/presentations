// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/assignHelper ../../../../../renderers ../../../../../core/Error ../../../../../core/maybe ../enums ../mesh/templates/WGLLabelTemplate ../util/vvFlagUtils".split(" "),function(g,f,e,m,x,y,k,d,z,l){Object.defineProperty(f,"__esModule",{value:!0});f.createMaterialKey=function(c,a,b,h){if(k.isSome(a)){a:{if("heatmap"===a.type)throw Error("Symbol processor does not support heatmap renderer");switch(c){case d.WGLGeometryType.FILL:c=
q.from(a);break a;case d.WGLGeometryType.LINE:c=r.from(a,b);break a;case d.WGLGeometryType.MARKER:if("dot-density"===a.type)throw Error("Dot Density renderer does not support Marker GeometryTypes");c=t.from(a);break a;case d.WGLGeometryType.TEXT:if("dot-density"===a.type)throw Error("Dot Density renderer does not support Text GeometryTypes");c=u.from(a);break a;case d.WGLGeometryType.LABEL:if("dot-density"===a.type)throw Error("Dot Density renderer does not support Label GeometryTypes");c=v.from(a,
h);break a;default:throw Error("Unable to createMaterialKey for unknown geometryType "+c);}}return c}switch(c){case d.WGLGeometryType.FILL:return q.from(null);case d.WGLGeometryType.LINE:return r.from(null,b);case d.WGLGeometryType.MARKER:return t.from(null);case d.WGLGeometryType.TEXT:return u.from(null);case d.WGLGeometryType.LABEL:return v.from(null,h);default:throw Error("Unable to createMaterialKey for unknown geometryType "+c);}};g=function(){function c(a){this._data=0;this._data=a}c.load=function(a){var b=
this.shared;b.data=a;return b};Object.defineProperty(c.prototype,"data",{get:function(){return this._data},set:function(a){this._data=a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"geometryType",{get:function(){return this.bits(8,11)},set:function(a){this.setBits(a,8,11)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"mapAligned",{get:function(){return!!this.bit(20)},set:function(a){this.setBit(20,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"sdf",{get:function(){return!!this.bit(11)},set:function(a){this.setBit(11,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pattern",{get:function(){return!!this.bit(12)},set:function(a){this.setBit(12,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"textureBinding",{get:function(){return this.bits(0,8)},set:function(a){this.setBits(a,0,8)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"geometryTypeString",{get:function(){switch(this.geometryType){case d.WGLGeometryType.FILL:return"fill";
case d.WGLGeometryType.MARKER:return"marker";case d.WGLGeometryType.LINE:return"line";case d.WGLGeometryType.TEXT:return"text";case d.WGLGeometryType.LABEL:return"label";default:throw new y("Unable to handle unknown geometryType: "+this.geometryType);}},enumerable:!0,configurable:!0});c.prototype.setBit=function(a,b){a=1<<a;this._data=b?this._data|a:this._data&~a};c.prototype.bit=function(a){return(this._data&1<<a)>>a};c.prototype.setBits=function(a,b,h){for(var c=0;b<h;b++,c++)this.setBit(b,0!==
(a&1<<c))};c.prototype.bits=function(a,b){for(var h=0,c=0;a<b;a++,c++)h|=this.bit(a)<<c;return h};c.prototype.hasVV=function(){return!1};c.prototype.setVV=function(a,b){};c.prototype.getVariation=function(){var a={},b;for(b in this)"boolean"===typeof this[b]&&(a[b]=this[b]);return a};c.prototype.getVariationHash=function(){return this._data&~(7&this.textureBinding)};c.shared=new c(0);return c}();f.MaterialKeyBase=g;m=function(c){return function(a){function b(){return null!==a&&a.apply(this,arguments)||
this}e(b,a);Object.defineProperty(b.prototype,"vvSizeMinMaxValue",{get:function(){return 0!==this.bit(16)},set:function(a){this.setBit(16,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vvSizeScaleStops",{get:function(){return 0!==this.bit(17)},set:function(a){this.setBit(17,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"vvSizeFieldStops",{get:function(){return 0!==this.bit(18)},set:function(a){this.setBit(18,a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"vvSizeUnitValue",{get:function(){return 0!==this.bit(19)},set:function(a){this.setBit(19,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);b&=l.getSizeFlagsMask(b,c);this.vvSizeMinMaxValue=!!(b&d.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(b&d.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=
!!(b&d.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(b&d.WGLVVFlag.SIZE_SCALE_STOPS)};return b}(c)};var w=function(c){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}e(b,a);Object.defineProperty(b.prototype,"vvRotation",{get:function(){return 0!==this.bit(15)},set:function(a){this.setBit(15,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvRotation};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,
b,c);this.vvRotation=!c&&!!(b&d.WGLVVFlag.ROTATION)};return b}(c)},n=function(c){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}e(b,a);Object.defineProperty(b.prototype,"vvColor",{get:function(){return 0!==this.bit(13)},set:function(a){this.setBit(13,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvColor};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);this.vvColor=!c&&!!(b&d.WGLVVFlag.COLOR)};
return b}(c)},p=function(c){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}e(b,a);Object.defineProperty(b.prototype,"vvOpacity",{get:function(){return 0!==this.bit(14)},set:function(a){this.setBit(14,a)},enumerable:!0,configurable:!0});b.prototype.hasVV=function(){return a.prototype.hasVV.call(this)||this.vvOpacity};b.prototype.setVV=function(b,c){a.prototype.setVV.call(this,b,c);this.vvOpacity=!c&&!!(b&d.WGLVVFlag.OPACITY)};return b}(c)},q=function(c){function a(){return null!==
c&&c.apply(this,arguments)||this}e(a,c);a.load=function(a){var b=this.shared;b.data=a;return b};a.from=function(a){var b=this.load(0);b.geometryType=d.WGLGeometryType.FILL;k.isSome(a)&&(a instanceof x.DotDensityRenderer?b.dotDensity=!0:(a=l.getVVFlags(a.visualVariables),b.setVV(a,!1)));return b.data};a.prototype.getVariation=function(){return c.prototype.getVariation.call(this)};Object.defineProperty(a.prototype,"dotDensity",{get:function(){return!!this.bit(15)},set:function(a){this.setBit(15,a)},
enumerable:!0,configurable:!0});a.shared=new a(0);return a}(n(p(g)));f.FillMaterialKey=q;var t=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}e(a,c);a.load=function(a){var b=this.shared;b.data=a;return b};a.from=function(a){var b=this.load(0);b.geometryType=d.WGLGeometryType.MARKER;k.isSome(a)&&(a=l.getVVFlags(a.visualVariables),b.setVV(a,!1));return b.data};a.prototype.getVariation=function(){return c.prototype.getVariation.call(this)};a.shared=new a(0);return a}(n(p(w(m(g)))));
f.MarkerMaterialKey=t;var r=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}e(a,c);a.load=function(a){var b=this.shared;b.data=a;return b};a.from=function(a,c){var b=this.load(0);b.geometryType=d.WGLGeometryType.LINE;k.isSome(a)&&(a=l.getVVFlags(a.visualVariables),b.setVV(a,c));return b.data};a.prototype.getVariation=function(){return c.prototype.getVariation.call(this)};a.shared=new a(0);return a}(n(p(m(g))));f.LineMaterialKey=r;var u=function(c){function a(){return null!==
c&&c.apply(this,arguments)||this}e(a,c);a.load=function(a){var b=this.shared;b.data=a;return b};a.from=function(a){var b=this.load(0);b.geometryType=d.WGLGeometryType.TEXT;k.isSome(a)&&(a=l.getVVFlags(a.visualVariables),b.setVV(a,!1));return b.data};a.prototype.getVariation=function(){return c.prototype.getVariation.call(this)};a.shared=new a(0);return a}(n(p(w(m(g)))));f.TextMaterialKey=u;var v=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}e(a,c);a.load=function(a){var b=
this.shared;b.data=a;return b};a.from=function(a,c){var b=this.load(0);b.geometryType=d.WGLGeometryType.LABEL;k.isSome(a)&&(a=l.getVVFlags(a.visualVariables),b.setVV(a,!1));b.mapAligned=!!z.isMapAligned(c.labelPlacement);return b.data};a.prototype.getVariation=function(){return c.prototype.getVariation.call(this)};a.shared=new a(0);return a}(m(g));f.LabelMaterialKey=v});