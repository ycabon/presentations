// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../util/serializationUtils","../util/Writer"],function(f,g,h,k){Object.defineProperty(g,"__esModule",{value:!0});f=function(){function b(a,b){this.displayObjects=a;this.vertexVectorsMap=b}Object.defineProperty(b.prototype,"vertexBuffersMap",{get:function(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(var a=0;a<this.vertexVectorsMap.length;a++)this._vertexBuffersMap[a]=this.vertexVectorsMap[a].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap},
enumerable:!0,configurable:!0});b.prototype.get=function(a){return this.vertexVectorsMap[a]};b.prototype.pushDisplayObject=function(a){this.displayObjects.push(a)};b.prototype.encode=function(a,b){var d=h.serializeList(new k.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),c={};b.push(d);for(var e=0;e<this.vertexVectorsMap.length;e++){var f=this.vertexVectorsMap[e];c[e]={};f.transfer(c[e],b)}a.displayObjects=d;a.vertexBuffersMap=c;this.destroy()};b.prototype.destroy=function(){this.displayObjects=
this.vertexVectorsMap=null};b.prototype._guessSize=function(){for(var a=this.displayObjects,b=Math.min(a.length,4),d=0,c=0;c<b;c++)d=Math.max(d,a[c].displayRecords.length);return 2*(12*a.length+a.length*d*40)};return b}();g.MeshData=f});