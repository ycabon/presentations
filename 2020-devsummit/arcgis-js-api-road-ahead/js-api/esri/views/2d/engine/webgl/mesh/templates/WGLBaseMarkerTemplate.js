// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../enums ../../number ../../WGLDisplayRecord".split(" "),function(v,d,m,q,r,t,u){Object.defineProperty(d,"__esModule",{value:!0});var k=q.getLogger("esri.views.2d.engine.webgl.WGLMarkerTemplateBase");d.default=function(d){return function(d){function e(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];b=d.apply(this,b)||this;b.xOffset=0;b.yOffset=0;b.width=0;b.height=0;b.geometryType=r.WGLGeometryType.MARKER;
return b}m(e,d);e.prototype.writeMesh=function(b,a,c,g,d){var h=a.indexVector,e=a.get("geometry"),f=new u(g,this.geometryType,this._materialKey);a=a.getVector("geometry").vertexCount;b.push(f);f.vertexFrom=a;f.indexFrom=h.length;switch(c){case "esriGeometryPoint":c=d.geometry;b=c.x;c=c.y;this._writeVertices(f,e,g,this._getPos(b,c));this._writeIndices(f,h,a);break;case "esriGeometryPolyline":this._writeMany(f,h,e,a,g,d.geometry.paths[0]);break;case "esriGeometryPolygon":(c=d.centroid)?(b=c.x,c=c.y,
this._writeVertices(f,e,g,this._getPos(b,c)),this._writeIndices(f,h,a)):k.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(f,h,e,a,g,d.geometry.points);break;default:k.error("Unable to handle geometryType: "+c)}};e.prototype._getPos=function(b,a){return t.i1616to32(b,a)};e.prototype._writeMany=function(b,a,c,d,e,h){for(var g=0,f=0,k=0,n=0;n<h.length;n++){var l=h[n],p=l[0],l=l[1],m=this._getPos(p+g,l+f);this._writeVertices(b,
c,e,m);this._writeIndices(b,a,d+k);g+=p;f+=l;k+=4}};e.prototype._writeVertices=function(b,a,c,d){a.push(d);a.push(this._offsetUpperLeft);a.push(this._texUpperLeft);a.push(this._bitestAndDistRatio);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);a.push(d);a.push(this._offsetUpperRight);a.push(this._texUpperRight);a.push(this._bitestAndDistRatio);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);a.push(d);a.push(this._offsetBottomLeft);
a.push(this._texBottomLeft);a.push(this._bitestAndDistRatio);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);a.push(d);a.push(this._offsetBottomRight);a.push(this._texBottomRight);a.push(this._bitestAndDistRatio);a.push(c);a.push(this._fillColor);a.push(this._outlineColor);a.push(this._sizeOutlineWidth);b.vertexCount+=4};e.prototype._writeIndices=function(b,a,c){a.push(c+0);a.push(c+1);a.push(c+2);a.push(c+1);a.push(c+3);a.push(c+2);b.indexCount+=6};return e}(d)}});