// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Graphic ../../../core/Collection ../../../core/Handles ../../../core/promiseUtils ../../../core/accessorSupport/decorators ../engine/Container ./LayerView2D ./graphics/GraphicsView2D ../../layers/LayerView".split(" "),function(w,x,h,e,k,l,m,n,p,g,d,q,r,t,u){var v={remove:function(){},pause:function(){},resume:function(){}};
return function(f){function b(){var a=null!==f&&f.apply(this,arguments)||this;a._handles=new p;a.container=new q.Container;return a}h(b,f);b.prototype.initialize=function(){this.graphicsView=new t.default({view:this.view,graphics:this.layer.graphics})};b.prototype.attach=function(){var a=this;this.graphicsView.install(this.container);this._handles.add([this.layer.on("graphic-update",this.graphicsView.graphicUpdateHandler),this.clips.on("change",function(){return a.graphicsView.container.setClips(a.clips)})]);
this.graphicsView.container.setClips(this.clips)};b.prototype.detach=function(){this.graphicsView.destroy();this._handles.removeAll()};b.prototype.hitTest=function(a,b){return this.suspended||!this.graphicsView?g.resolve(null):this.graphicsView.hitTest(a,b)};b.prototype.fetchPopupFeatures=function(a){return l(this,void 0,void 0,function(){return k(this,function(b){return this.graphicsView?[2,this.graphicsView.searchFeatures(a).then(function(a){return a.filter(function(a){return!!a.popupTemplate})})]:
[2,void 0]})})};b.prototype.update=function(a){this.graphicsView.update(a)};b.prototype.moveStart=function(){this.requestUpdate()};b.prototype.viewChange=function(){this.requestUpdate()};b.prototype.moveEnd=function(){this.requestUpdate()};b.prototype.isUpdating=function(){return!this.graphicsView||this.graphicsView.updating};b.prototype.highlight=function(a){var b=this,c;"number"===typeof a?c=[a]:a instanceof m?c=[a.uid]:Array.isArray(a)&&0<a.length?c="number"===typeof a[0]?a:a.map(function(a){return a&&
a.uid}):n.isCollection(a)&&(c=a.map(function(a){return a&&a.uid}).toArray());c=c.filter(function(a){return null!=a});if(!c.length)return v;this.graphicsView.addHighlight(c);return{remove:function(){return b.graphicsView.removeHighlight(c)},pause:function(){},resume:function(){}}};b.prototype.queryGraphics=function(){return g.resolve(this.graphicsView.graphics)};e([d.property()],b.prototype,"graphicsView",void 0);e([d.property({dependsOn:["graphicsView.updating"]})],b.prototype,"updating",void 0);
return b=e([d.subclass("esri.views.2d.layers.GraphicsLayerView2D")],b)}(d.declared(r.LayerView2D(u)))});