// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Collection ../../../core/collectionUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../layers/support/ClipArea ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),function(r,e,h,d,k,l,f,c,m,n,p,q){Object.defineProperty(e,"__esModule",{value:!0});var g=k.ofType({key:"type",base:m,typeMap:{rect:n,path:q,geometry:p}});
e.LayerView2D=function(e){return function(e){function b(){var a=null!==e&&e.apply(this,arguments)||this;a.clips=new g;a.moving=!1;a.attached=!1;a.blendMode=null;a.lastUpdateId=-1;a.postProcessingEffects=null;a.updateRequested=!1;return a}h(b,e);b.prototype.initialize=function(){var a=this;this.when(function(){a.requestUpdate()},function(){});var b=function(){return a.notifyChange("rendering")};this.handles.add([f.init(this,"suspended",function(b){a.container&&(a.container.visible=!b);a.view&&!b&&
a.updateRequested&&a.view.requestLayerViewUpdate(a)},!0),f.init(this,["fullOpacity","container"],function(){a.container&&(a.container.opacity=a.fullOpacity)},!0),f.init(this,["blendMode","container"],function(){a.container&&(a.container.blendMode=a.blendMode)},!0),f.init(this,["postProcessingEffects","container"],function(){a.container&&(a.container.postProcessingEffects=a.postProcessingEffects)},!0),f.on(this,"container","post-render",b),f.on(this,"container","will-render",b)])};b.prototype.destroy=
function(){this.attached&&(this.attached=!1,this.detach());this.handles.remove("initialize");this.updateRequested=!1;this.view=this.layer=null};Object.defineProperty(b.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,
configurable:!0});b.prototype.isVisibleAtScale=function(a){var b=!0,c=this.layer,d=c.minScale,c=c.maxScale;if(null!=d&&null!=c){var b=!d,e=!c;!b&&a<=d&&(b=!0);!e&&a>=c&&(e=!0);b=b&&e}return b};b.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))};b.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&
(this.updateRequested=!1,this.update(a)))};b.prototype.isUpdating=function(){return!1};b.prototype.isRendering=function(){return!1};b.prototype.canResume=function(){var a=this.inherited(arguments);a&&(a=this.isVisibleAtScale(this.view.scale));return a};d([c.property({type:g,set:function(a){a=l.referenceSetter(a,this._get("clips"),g);this._set("clips",a)}})],b.prototype,"clips",void 0);d([c.property()],b.prototype,"moving",void 0);d([c.property({dependsOn:["attached","suspended","moving"]})],b.prototype,
"rendering",null);d([c.property()],b.prototype,"attached",void 0);d([c.property()],b.prototype,"blendMode",void 0);d([c.property()],b.prototype,"container",void 0);d([c.property()],b.prototype,"postProcessingEffects",void 0);d([c.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],b.prototype,"suspended",void 0);d([c.property({readOnly:!0})],b.prototype,"updateParameters",void 0);d([c.property()],b.prototype,"updateRequested",void 0);d([c.property({dependsOn:["updateRequested",
"attached","suspended"]})],b.prototype,"updating",null);d([c.property()],b.prototype,"view",void 0);return b=d([c.subclass("esri.views.2d.layers.LayerView2D")],b)}(c.declared(e))}});