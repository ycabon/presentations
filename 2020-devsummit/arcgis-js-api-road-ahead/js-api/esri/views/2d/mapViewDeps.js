// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/LabelManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/throttle ../../core/accessorSupport/decorators ./engine".split(" "),function(w,a,u,f,r,p,k,t,l,e,v){Object.defineProperty(a,"__esModule",{value:!0});var n=t.getLogger("esri.views.2d.layers.labels.LabelManager");w=function(a){function b(b){b=a.call(this,b)||
this;b._applyVisibilityPassThrottled=l.throttle(b._applyVisibilityPass,64,b);b.lastUpdateId=-1;b.updateRequested=!1;b.view=null;return b}u(b,a);b.prototype.initialize=function(){var b=this;this.collisionEngine=new v.CollisionEngine(this.view.featuresTilingScheme);this._layerViewSorter=new v.LayerViewSorter(function(a,c){b.collisionEngine.registerLayerView(a,c);(c=a.tileRenderer)&&c.forEachTile(function(c){c.isDirty=!0;b.addTile(a,c)});b.requestUpdate()},function(a){b.collisionEngine.unregisterLayerView(a);
b.requestUpdate()});this.handles.add(this.view.allLayerViews.on("change",function(a){b._layerViewSorter.update(a)}))};b.prototype.destroy=function(){this._layerViewSorter.destroy();this.collisionEngine=this._layerViewSorter=null;this._applyVisibilityPassThrottled.remove()};Object.defineProperty(b.prototype,"updating",{get:function(){return this.updateRequested},enumerable:!0,configurable:!0});b.prototype.update=function(b){this._applyVisibilityPassThrottled(b)};b.prototype.viewChange=function(){this.requestUpdate()};
b.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))};b.prototype.processUpdate=function(b){this._set("updateParameters",b);this.updateRequested&&(this.update(b),this.updateRequested=!1)};b.prototype.addTile=function(b,a){this.collisionEngine.addTile(b,a)};b.prototype.removeTile=function(b,a){this.collisionEngine.removeTile(b,a)};b.prototype._applyVisibilityPass=function(b){try{var a=this.view.featuresTilingScheme.getClosestInfoForScale(b.state.scale).level;
this.collisionEngine.run(b,a)}catch(c){n.error(new p("mapview-labeling","Encountered an error during label decluttering",c))}};f([e.property()],b.prototype,"updateRequested",void 0);f([e.property({readOnly:!0})],b.prototype,"updateParameters",void 0);f([e.property({dependsOn:["updateRequested"]})],b.prototype,"updating",null);f([e.property()],b.prototype,"view",void 0);return b=f([e.subclass("esri.views.2d.layers.labels.LabelManager")],b)}(e.declared(k.HandleOwnerMixin(r)));a.default=w})},"esri/core/throttle":function(){define(["require",
"exports"],function(w,a){function u(a,r,p,k){var f=null,l=1E3;"number"===typeof r?(l=r,k=p):(f=r,l=p);var e=0,v,n=function(){e=0;a.apply(k,v)};r=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];f&&f.apply(k,a);v=a;l?e||(e=setTimeout(n,l)):n()};r.remove=function(){e&&(clearTimeout(e),e=0)};r.forceUpdate=function(){e&&(clearTimeout(e),n())};r.hasPendingUpdates=function(){return!!e};return r}Object.defineProperty(a,"__esModule",{value:!0});a.throttle=u;a.default=u})},"esri/views/2d/layers/graphics/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Accessor ../../../../core/HandleOwner ../../../../core/Identifiable ../../../../core/MapPool ../../../../core/MapUtils ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../geometry/Polygon ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/coordsUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../../../layers/graphics/data/projectionSupport ../../../../symbols/support/cimSymbolUtils ../../../../symbols/support/defaults ../../engine ../../engine/webgl/definitions ../features/support/AttributeStore ../features/support/TileStore ./GraphicContainer ./GraphicProcessingQueue ./GraphicStore ./graphicsUtils ../../../layers/GraphicsView".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n,z,b,g,m,c,d,x,h,y,q,H,E,K,F,C,G,I,D,A,L,P,M,B){function J(b,c,a){if(a.has(b))return a.get(b);c={tile:c,addedOrModified:[],removed:[]};a.set(b,c);return c}Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function e(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];c=a.apply(this,c)||this;c._tiles=new Map;c._graphicStoreUpdate=!1;c._graphicsSet=new Set;c._matcher=b.resolve(null);c._tileUpdateSet=new Set;c._tilesToUpdate=new Map;c._graphicIdToAbortController=
new Map;c._attached=!1;c._highlightIds=new Map;c._updatingGraphicsTimer=null;c.lastUpdateId=-1;c.updateRequested=!1;c.graphicUpdateHandler=c.graphicUpdateHandler.bind(c);c.addOrUpdateGraphic=c.addOrUpdateGraphic.bind(c);c._processAnalyzedGraphics=c._processAnalyzedGraphics.bind(c);c._graphicsChangeHandler=c._graphicsChangeHandler.bind(c);return c}u(e,a);e.prototype.initialize=function(){var c=this;this._tileStore=new D.default(this.view.featuresTilingScheme);this.container=new A.default(this.view.featuresTilingScheme,
null);this._attributeStore=new I.default({type:"local",initialize:function(a){return b.resolve(c.container.attributeView.initialize(a))},update:function(b){return c.container.attributeView.requestUpdate(b)},render:function(){return c.container.requestRender()}});this._graphicStore=new P.default(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,function(b){c._attributeStore.createLocalId(b.uid);c._setFilterState(b.uid,b.visible)},function(b){c._attributeStore.freeLocalId(b.uid)});
this._graphicProcessingQueue=new L.default({process:this.addOrUpdateGraphic});var a=new C.WGLTemplateStore(this.container.getMaterialItems.bind(this.container),!0),d=this._tileStore.tileScheme.tileInfo;this._matcher=this.renderer?C.createMatcher(a,null,this.renderer):C.createMatcher(a,null);this._meshFactory=new C.WGLMeshFactory(null,this.uid,null,a,null,d);this._templateStore=a;this.watch("renderer",function(b){b&&(c._matcher=c.renderer?C.createMatcher(a,null,c.renderer):C.createMatcher(a,null))});
this._tileStore.on("update",this._onTileUpdate.bind(this));this.container.on("attach",function(){0<c.graphics.items.length&&c._graphicsChangeHandler({target:c.graphics,added:c.graphics.items,removed:[],moved:[]});c.handles.add(c.graphics.on("change",c._graphicsChangeHandler),"graphics");c._attached=!0;c.notifyChange("updating")});this.container.on("detach",function(){c._graphicProcessingQueue&&c._graphicProcessingQueue.clear()})};e.prototype.destroy=function(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),
this._updatingGraphicsTimer=null,this.notifyChange("updating"));this.container.dispose();this._set("graphics",null);this._graphicProcessingQueue&&(this._graphicProcessingQueue.destroy(),this._graphicProcessingQueue=null);this._graphicStore.clear();this._tileStore.destroy();this._attributeStore=null};Object.defineProperty(e.prototype,"updating",{get:function(){return!this._attached||null!==this._updatingGraphicsTimer||this._graphicProcessingQueue.updating||0<this._tileUpdateSet.size||0<this._tilesToUpdate.size},
enumerable:!0,configurable:!0});e.prototype.install=function(b){b.addChild(this.container)};e.prototype.uninstall=function(b){b.removeChild(this.container)};e.prototype.hitTest=function(c,a){if(!this.view||!this.view.position)return b.resolve();c=this.view.toMap(m.createScreenPoint(c,a));return this.searchFeatures(c).then(function(b){return b&&b.length?b[0]:null})};e.prototype.searchFeatures=function(c,a){var d=this;void 0===a&&(a=2);return b.create(function(b){b(d._graphicStore.hitTest(c.x,c.y,a,
d.view.state.resolution,d.view.state.rotation))})};e.prototype.update=function(b){b=b.state;var c=this.view.featuresTilingScheme.getClosestInfoForScale(b.scale).level;this._graphicStore.updateLevel(c);this._tileStore.setViewState(b);this._graphicStoreUpdate=!0;this.updateRequested=!1};e.prototype.viewChange=function(){this.requestUpdate()};e.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))};e.prototype.processUpdate=function(b){this.updateRequested&&
(this.updateRequested=!1,this.update(b))};e.prototype.graphicUpdateHandler=function(b){var c=b.newValue,a=b.graphic;switch(b.property){case "geometry":case "symbol":this._graphicProcessingQueue.push(a,"update");break;case "visible":this._setFilterState(a.uid,c),this._attributeStore.sendUpdates()}};e.prototype.addHighlight=function(b){for(var c=0;c<b.length;c++){var a=b[c];if(this._highlightIds.has(a)){var d=this._highlightIds.get(a);this._highlightIds.set(a,d+1)}else this._highlightIds.set(a,1)}this._updateHighlight()};
e.prototype.removeHighlight=function(b){for(var c=0;c<b.length;c++){var a=b[c];if(this._highlightIds.has(a)){var d=this._highlightIds.get(a)-1;0===d?this._highlightIds.delete(a):this._highlightIds.set(a,d)}}this._updateHighlight()};e.prototype._updateHighlight=function(){this._attributeStore.setHighlight(n.keysOfMap(this._highlightIds))};e.prototype._getIntersectingTiles=function(b){return(b=this._graphicStore.getBounds(b))&&0!==h.width(b)&&0!==h.height(b)?this._tileStore.boundsIntersections(b):[]};
e.prototype._updateTile=function(b){var c=this,a=b.tile,d=this._getGraphicsData(this._templateStore,a,b.addedOrModified);return this._processGraphics(a.key,d).then(function(d){c._patchTile(a.key,{addOrUpdate:d,remove:b.removed});return d})};e.prototype._patchTile=function(b,c){this._tiles.has(b)&&(b=this._tiles.get(b),this.container.onTileData(b,c),this.container.requestRender())};e.prototype._graphicsChangeHandler=function(c){var a=this;if(!this._graphicStoreUpdate){var d=this.view.state,h=this.view.featuresTilingScheme.getClosestInfoForScale(d.scale).level;
this._graphicStore.updateLevel(h);this._tileStore.setViewState(d)}var q=c.added,h=c.removed;c=c.moved;for(var x=this._tilesToUpdate,y,d=[],e=Array(q.length),g=0;g<q.length;g++){var m=q[g];e[g]=m;this._graphicsSet.add(m);d.push(this.addGraphic(m))}for(g=0;g<h.length;g++){m=h[g];this._abortProcessingGraphic(m.uid);for(var q=this._getIntersectingTiles(m),A=0,f=q;A<f.length;A++)q=f[A],y=q.key.id,q=J(y,q,x),q.removed.push(this._attributeStore.getLocalId(m.uid));this._graphicsSet.delete(m);this._graphicStore.remove(m)}for(h=
0;h<c.length;h++)for(g=c[h],q=this._getIntersectingTiles(g),m=0,A=q;m<A.length;m++)q=A[m],y=q.key.id,q=J(y,q,x),q.addedOrModified.push(g);this._flipUpdatingGraphics();b.all(d).then(function(){for(var c,d=0;d<e.length;d++){c=e[d];for(var h=0,q=a._getIntersectingTiles(c);h<q.length;h++){var g=q[h];y=g.key.id;J(y,g,x).addedOrModified.push(c)}}a._graphicStore.updateZ();var m=[];x.forEach(function(b){return m.push(a._updateTile(b))});return b.all(m).then(function(){x.clear();a.notifyChange("updating")})}).catch(function(){x.clear();
a.notifyChange("updating")})};e.prototype._getArcadeInfo=function(b){var c=(b.attributes?Object.keys(b.attributes):[]).map(function(c){return{name:c,alias:c,type:"string"===typeof b.attributes[c]?"esriFieldTypeString":"esriFieldTypeDouble"}});return z.isNone(b.geometry)?null:{geometryType:q.getJsonType(b.geometry),spatialReference:x.fromJSON(b.geometry.spatialReference),fields:c}};e.prototype._getSymbolForGraphic=function(b,c){return k(this,void 0,void 0,function(){return p(this,function(a){return z.isSome(b.symbol)?
[2,b.symbol]:this.renderer?[2,this.renderer.getSymbolAsync(b,{scale:this.view.scale,abortOptions:c})]:[2,this._getNullSymbol(b)]})})};e.prototype._getSymbolResources=function(c,a){return k(this,void 0,void 0,function(){var d,h,q,x,y,g,e,m,A,f;return p(this,function(l){switch(l.label){case 0:if(!this.container.attached)return[2,b.resolve(null)];d=this._getArcadeInfo(c);q=K.expandSymbol;return[4,this._getSymbolForGraphic(c,a)];case 1:return[4,q.apply(void 0,[l.sent(),null,d,a])];case 2:h=l.sent();if("text"!==
h.type)return[3,4];x=new Set;y=h;g=C.bidiText(y.text)[0];for(e=0;e<g.length;e++)x.add(g.charCodeAt(e));m=[];x.forEach(function(b){return m.push(b)});A={symbol:h.toJSON(),id:0,glyphIds:m};return[4,this.container.getMaterialItems([A])];case 3:return f=l.sent()[0].mosaicItem,[2,{symbol:h,mosaicItem:f}];case 4:return[2,{symbol:h,mosaicItem:null}]}})})};e.prototype._projectAndNormalizeGeometry=function(c){return k(this,void 0,void 0,function(){var a,h,x,g=this;return p(this,function(e){if(z.isNone(c.geometry))return[2,
b.resolve(null)];a=c.geometry;q.isPolygon(a)?(h=a.rings,a.rings=h):q.isPolyline(a)?(x=a.paths,a.paths=x):q.isExtent(a)&&(a=d.fromExtent(a));return[2,E.checkProjectionSupport(a.spatialReference,this.view.spatialReference).then(function(){var b=M.normalizeCentralMeridian(a),b=E.project(b,a.spatialReference,g.view.spatialReference);y.closeRingsAndFixWinding(b);return b})]})})};e.prototype._onTileUpdate=function(b){var c=H.getInfo(this.view.spatialReference);if(b.added&&0<b.added.length)for(var a=0,d=
b.added;a<d.length;a++)this._addNewTile(d[a],c);if(b.removed&&0<b.removed.length)for(c=0,b=b.removed;c<b.length;c++)this._removeTile(b[c].key)};e.prototype.addOrUpdateGraphic=function(b,c,a){return this._addOrUpdateGraphic(b,c,a)};e.prototype.addGraphic=function(c){var a=this;this._abortProcessingGraphic(c.uid);var d=g.createAbortController();this._graphicIdToAbortController.set(c.uid,d);return this._addOrUpdateGraphic(c,"add",{signal:d.signal}).then(function(){a._graphicIdToAbortController.delete(c.uid)}).catch(function(d){a._graphicIdToAbortController.delete(c.uid);
if(!b.isAbortError(d))throw d;})};e.prototype._addOrUpdateGraphic=function(c,a,d){var h=this,q=this._projectAndNormalizeGeometry(c),x=this._getSymbolResources(c,d);return b.all([q,x]).then(function(b){var q=b[0];b=b[1];return"add"===a?h._addProjectedGraphic(c,b,q):h._updateGraphic(c,b,q,d)})};e.prototype._addProjectedGraphic=function(b,c,a){this._graphicsSet.has(b)&&this._graphicStore.add(b,c,a)};e.prototype._updateGraphic=function(c,a,d,q){var x=this;if(!this._graphicStore.has(c)||b.isAborted(q))return b.resolve();
d=this._graphicStore.update(c,a,d);a=d.oldBounds;d=d.newBounds;var y=0===h.width(a)&&0===h.height(a),g=0===h.width(d)&&0===h.height(d),y=y?[]:this._tileStore.boundsIntersections(a);a=g?[]:this._tileStore.boundsIntersections(d);d=v.acquire();for(var e=0;e<y.length;e++)g=y[e],d.set(g.key,{addOrUpdate:null,remove:[this._attributeStore.getLocalId(c.uid)]});for(y=0;y<a.length;y++)g=a[y],e=this._getGraphicData(this._templateStore,g,c),d.has(g.key)?(g=d.get(g.key),g.remove.length=0,g.addOrUpdate=e):d.set(g.key,
{addOrUpdate:e,remove:null});var m=[];d.forEach(function(b,c){var a=x._processGraphics(c,b.addOrUpdate,q).then(function(a){x._patchTile(c,{addOrUpdate:a,remove:b.remove})});m.push(a)});v.release(d);return b.all(m).then(function(){})};e.prototype._addTile=function(b,c){var a=h.create();this.view.featuresTilingScheme.getTileBounds(a,b);a=new C.WGLTile(b,a,!0);c={clear:!0,addOrUpdate:c,remove:[]};this._tiles.set(b,a);this.container.addChild(a);a.setData(c,!1,!1)};e.prototype._addNewTile=function(c,a){var d=
this,h=this._graphicStore.queryTileData(this._templateStore,c);if(a){a=Math.round((a.valid[1]-a.valid[0])/c.resolution);for(var x=0;x<h.length;x++){var y=h[x];y.geometry&&q.isPoint(y.geometry)&&this._wrapPoints(y,a)}}var g=c.key;this._tileUpdateSet.add(c.key);this.notifyChange("updating");this._processGraphics(g,h).then(function(b){d._addTile(g,b);d._tileUpdateSet.delete(g);d.notifyChange("updating")}).catch(function(c){d._tileUpdateSet.delete(g);d.notifyChange("updating");if(!b.isAbortError(c))throw c;
})};e.prototype._removeTile=function(b){if(this._tiles.has(b)){var c=this._tiles.get(b);this.container.removeChild(c);c.destroy();this._tiles.delete(b)}};e.prototype._setFilterState=function(b,c){var a=this._attributeStore.getLocalId(b);b=this._attributeStore.getHighlightFlag(b);this._attributeStore.setData(a,0,0,b|(c?G.FILTER_FLAG_0:0))};e.prototype._getGraphicsData=function(b,c,a){var d=H.getInfo(this.view.spatialReference);b=this._graphicStore.getGraphicsData(b,c,a);if(d)for(c=Math.round((d.valid[1]-
d.valid[0])/c.resolution),d=0;d<b.length;d++)a=b[d],a.geometry&&q.isPoint(a.geometry)&&this._wrapPoints(a,c);b.sort(function(b,c){return b.insertAfter-c.insertAfter});return b};e.prototype._getGraphicData=function(b,c,a){b=this._graphicStore.getGraphicData(b,c,a);a=[b];var d=H.getInfo(this.view.spatialReference);d&&(c=Math.round((d.valid[1]-d.valid[0])/c.resolution),b.geometry&&q.isPoint(b.geometry)&&this._wrapPoints(b,c));return a};e.prototype._wrapPoints=function(b,c){var a=b.geometry;512===c?20>
a.x?b.geometry={points:[[a.x,a.y],[c,0]]}:492<a.x&&(b.geometry={points:[[a.x,a.y],[-c,0]]}):-20>a.x?b.geometry={points:[[a.x,a.y],[c,0]]}:532<a.x&&(b.geometry={points:[[a.x,a.y],[-c,0]]})};e.prototype._processGraphics=function(b,c,a){return k(this,void 0,void 0,function(){var d,h,q;return p(this,function(x){switch(x.label){case 0:d=c&&c.length;if(!d||!this._meshFactory)return[2,null];h=this._meshFactory;return[4,this._matcher.then(function(b){return h.analyze(c,b,null,null,a)})];case 1:return q=x.sent(),
this._attributeStore.sendUpdates(),[2,this._processAnalyzedGraphics(b,q)]}})})};e.prototype._processAnalyzedGraphics=function(b,c){for(var a=this._meshFactory,d=a.createMeshData(c.length),h=this._attributeStore,q=0;q<c.length;q++){var x=c[q];x.insertAfter=-1===x.insertAfter?-1:h.getLocalId(x.insertAfter);x.localId=h.getLocalId(x.attributes[this.uid]);a.write(d,x,null,null,b.level)}return C.TileData.fromMeshData(d)};e.prototype._abortProcessingGraphic=function(b){this._graphicIdToAbortController.has(b)&&
this._graphicIdToAbortController.get(b).abort()};e.prototype._getNullSymbol=function(b){b=b.geometry;return q.isPolyline(b)?F.errorPolylineSymbol2D:q.isPolygon(b)||q.isExtent(b)?F.errorPolygonSymbol2D:F.errorPointSymbol2D};e.prototype._flipUpdatingGraphics=function(){var b=this;this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer);this._updatingGraphicsTimer=setTimeout(function(){b._updatingGraphicsTimer=null;b.notifyChange("updating")},160);this.notifyChange("updating")};f([c.property()],
e.prototype,"_graphicProcessingQueue",void 0);f([c.property({constructOnly:!0})],e.prototype,"graphics",void 0);f([c.property({dependsOn:["_graphicProcessingQueue.updating"]})],e.prototype,"updating",null);f([c.property()],e.prototype,"view",void 0);f([c.property()],e.prototype,"updateRequested",void 0);return e=f([c.subclass("esri.views.2d.layers.support.GraphicsView2D")],e)}(c.declared(B.GraphicsView(l.HandleOwnerMixin(e.IdentifiableMixin(t)))));a.default=w})},"esri/core/MapPool":function(){define(["require",
"exports","./ObjectPool"],function(w,a,u){w=function(){function a(a,f){void 0===a&&(a=50);void 0===f&&(f=50);this._pool=new u(Map,!1,function(a){return a.clear()},f,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return f.acquire()};a.release=function(a){return f.release(a)};return a}();var f=new w(100);return w})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(w,a,u,f,r,p,k,t,l){function e(c,a){var d;if(!a)return null;if("x"in a){var y={x:0,y:0};c=c(a.x,a.y,b);y.x=c[0];y.y=c[1];null!=a.z&&(y.z=a.z);null!=a.m&&(y.m=a.m);return y}if("xmin"in a)return y={xmin:0,ymin:0,xmax:0,ymax:0},d=c(a.xmin,a.ymin,b),y.xmin=d[0],y.ymin=d[1],c=c(a.xmax,a.ymax,b),y.xmax=c[0],y.ymax=c[1],a.hasZ&&(y.zmin=a.zmin,y.zmax=a.zmax,y.hasZ=!0),a.hasM&&(y.mmin=a.mmin,y.mmax=a.mmax,y.hasM=!0),y;if("rings"in a)return{rings:v(a.rings,c),hasM:a.hasM,hasZ:a.hasZ};if("paths"in a)return{paths:v(a.paths,
c),hasM:a.hasM,hasZ:a.hasZ};if("points"in a)return{points:n(a.points,c),hasM:a.hasM,hasZ:a.hasZ}}function v(b,c){for(var a=[],d=0;d<b.length;d++)a.push(n(b[d],c));return a}function n(b,c){for(var a=[],d=0;d<b.length;d++){var q=b[d],g=c(q[0],q[1],[0,0]);a.push(g);2<q.length&&g.push(q[2]);3<q.length&&g.push(q[3])}return a}function z(b,c){return!t.isValid(b)||!t.isValid(c)||t.equals(b,c)||l.canProject(b,c)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var b=[0,0];a.doesBrowserSupportProjection=
function(b,c){return z(b,c)?k.isSupported():!0};a.checkProjectionSupport=function(b,c){return f(this,void 0,void 0,function(){var a,d,q;return u(this,function(h){if(!c)return[2];if(Array.isArray(b)){a=0;for(d=b;a<d.length;a++)if(q=d[a],z(q.geometry&&q.geometry.spatialReference,c)){if(k.isSupported())return[2,k.load()];throw new r("feature-store:unsupported-query","projection not supported",{inSpatialReference:b,outSpatialReference:c});}return[2]}if(!z(b,c))return[2];if(k.isSupported())return[2,k.load()];
throw new r("feature-store:unsupported-query","projection not supported",{inSpatialReference:b,outSpatialReference:c});})})};var g=e.bind(null,l.lngLatToXY),m=e.bind(null,l.xyToLngLat);a.project=function(b,c,a){if(!b)return b;a||(a=c,c=b.spatialReference);return t.isValid(c)&&t.isValid(a)&&!t.equals(c,a)?l.canProject(c,a)?t.isWebMercator(a)?g(b):m(b):k.projectMany([b],c,a,null,!0)[0]:b};var c=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}b.prototype.push=
function(b,c,a){return f(this,void 0,void 0,function(){var d,h=this;return u(this,function(q){b&&b.length&&c&&a&&!t.equals(c,a)||p.resolve(b);d={geometries:b,inSpatialReference:c,outSpatialReference:a,resolve:null};this._jobs.push(d);return[2,p.create(function(b){d.resolve=b;null===h._timer&&(h._timer=setTimeout(h._process,10))})]})})};b.prototype._process=function(){this._timer=null;var b=this._jobs.shift();if(b){var c=b.geometries,a=b.inSpatialReference,d=b.outSpatialReference,b=b.resolve;l.canProject(a,
d)?t.isWebMercator(d)?b(c.map(g)):b(c.map(m)):b(k.projectMany(c,a,d,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());a.projectMany=function(b,a,h){return f(this,void 0,void 0,function(){return u(this,function(d){return[2,c.push(b,a,h)]})})}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(w,a,u,f,r,p){function k(a,e,b,g,m){void 0===g&&(g=null);
void 0===m&&(m=!1);if(null===g){var c=p.cacheKey(e,b);void 0!==v[c]?g=v[c]:(g=t(e,b,null),null===g&&(g=new p),v[c]=g)}return l._project(a,e,b instanceof r||!1===m?b:new r(b),g,m)}function t(a,e,b){void 0===b&&(b=null);a=l._getTransformation(a,e,b);return null!==a?p.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var l=null;a.isLoaded=function(){return!!l&&f.isLoaded()};a.isSupported=function(){return f.isSupported()};var e=null;a.load=function(){return e?e:e=u.create(function(a,e){var b=
f.load();w(["./geometryEngine"],function(g){l=g;b.then(function(){l._enableProjection(f);a()},function(b){e(b)})})})};a.project=function(a,e,b){void 0===b&&(b=null);return a instanceof Array?0===a.length?[]:k(a,a[0].spatialReference,e,b):k([a],a.spatialReference,e,b)[0]};var v={};a.projectMany=k;a.getTransformation=t;a.getTransformations=function(a,e,b){void 0===b&&(b=null);a=l._getTransformationBySuitability(a,e,b);if(null!==a){e=[];for(b=0;b<a.length;b++)e.push(p.fromGE(a[b]));return e}return[]}})},
"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(w,a,u,f,r){function p(c){function d(b,c,a){b[c]=a(b[c])}a._pe=c;n.init();z.init();b.init();g.init();m.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}u(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var x=0,h=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,
a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];x<h.length;x++)c=h[x],d(c.prototype,"getName",function(b){return function(){return b.call(this,Array(n.PE_NAME_MAX))}});x=0;for(h=[a._pe.PeGeogtran,a._pe.PeProjcs];x<h.length;x++)c=h[x],d(c.prototype,"getParameters",function(b){return function(){for(var c=Array(n.PE_PARM_MAX),d=b.call(this),h=0;h<c.length;h++){var q=a._pe.getValue(d,"*");c[h]=q?a._pe.wrapPointer(q,a._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c}});d(a._pe.PeHorizon.prototype,
"getCoord",function(b){return function(){var c=this.getSize();if(!c)return null;var a=[],d=b.call(this);e(a,c,d);return a}});d(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=null,h=b.call(this);if(!a._pe.compare(h,a._pe.NULL)){var d=[h],q=this.getSteps();if(1<q)for(var h=a._pe.getPointer(h),g=1;g<q;g++)d.push(a._pe.wrapPointer(h+c*g,a._pe.PeGTlistExtendedGTs))}return d}});var y=a._pe._pe_getPeHorizonSize();c=function(b){return function(){var c=
this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,h=b.call(this);if(!a._pe.compare(h,a._pe.NULL)){var d=[h],q=h.getNump();if(1<q)for(var h=a._pe.getPointer(h),g=1;g<q;g++)d.push(a._pe.wrapPointer(h+y*g,a._pe.PeHorizon))}c.set(b,d);return d}};d(a._pe.PeProjcs.prototype,"horizonGcsGenerate",c);d(a._pe.PeProjcs.prototype,"horizonPcsGenerate",c);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=n.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),
d=a._pe.ensureInt8(Array(n.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,b,d))}}function k(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}function t(b,d){var c=[];d=Array(d);for(var h=0;h<b;h++)c.push(a._pe.ensureInt8(d));return c}function l(b){var c;Array.isArray(b[0])?(c=[],b.forEach(function(b){c.push(b[0],b[1])})):c=b;return c}function e(b,d,g,h){void 0===h&&(h=!1);if(h)for(h=0;h<2*d;h++)b[h]=a._pe.getValue(g+h*Float64Array.BYTES_PER_ELEMENT,
"double");else{var c=0===b.length;for(h=0;h<d;h++)c&&(b[h]=Array(2)),b[h][0]=a._pe.getValue(g,"double"),b[h][1]=a._pe.getValue(g+Float64Array.BYTES_PER_ELEMENT,"double"),g+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var v;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!f("esri-wasm")};a.load=function(){return v?v:v=r.create(function(b,a){w(["./support/pe-wasm"],function(c){c({locateFile:function(b){return w.toUrl("./support/"+
b)},onAbort:function(b){a(Error(b))}}).then(function(c){p(c);b()})})})};(function(b){function c(b,c,d){a._pe.ensureCache.prepare();var h=l(d),g=d===h,h=a._pe.ensureFloat64(h);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,h))&&e(d,c,h,g);return b}function g(b,c,a){return h(b,c,a,0)}function h(b,c,d,h){a._pe.ensureCache.prepare();var g=l(d),q=d===g,g=a._pe.ensureFloat64(g);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),c,g,h))&&e(d,c,g,q);return b}b.geogToProj=c;b.projGeog=function(b,a,d,h){switch(h){case n.PE_TRANSFORM_P_TO_G:return g(b,
a,d);case n.PE_TRANSFORM_G_TO_P:return c(b,a,d)}return 0};b.projToGeog=g;b.projToGeogCenter=h})(a.PeCSTransformations||(a.PeCSTransformations={}));var n;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;
b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=
a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;
b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(n=a.PeDefs||(a.PeDefs={}));(function(b){function c(b,c){var d=null,q=h[b];q||(q={},h[b]=q);q.hasOwnProperty(String(c))?d=q[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,q[c]=d));return d=g(d)}function g(b){if(b){var c=b.getType();
switch(c){case n.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case n.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case n.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&n.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var h={},e={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(b){return c(n.PE_TYPE_COORDSYS,b)};b.factoryByType=c;b.fromString=function(b,c){var d=null,h=e[b];h||(h={},e[b]=h);h.hasOwnProperty(c)?
d=h[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,h[c]=d));return d=g(d)};b.geogcs=function(b){return c(n.PE_TYPE_GEOGCS,b)};b.geogtran=function(b){return c(n.PE_TYPE_GEOGTRAN,b)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(b){return c(n.PE_TYPE_PROJCS,b)};b.unit=function(b){return c(n.PE_TYPE_UNIT,b)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var z;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;
c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,d,g,e,m,f){var h=null,q=new a._pe.PeInteger(f);try{var y=a._pe.PeGTlistExtended.prototype.getGTlist(b,d,g,e,m,q);if(f=q.val)if(h=[y],1<f){var x=a._pe.getPointer(y);for(b=1;b<f;b++)h.push(a._pe.wrapPointer(x+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(q)}return h}})(z=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var c=0;c<b.length;c++){var d=b[c];k(d);d.getEntries().forEach(function(b){k(b);
b=b.getGeogtran();k(b);b.getParameters().forEach(k);[b.getGeogcs1(),b.getGeogcs2()].forEach(function(b){k(b);var c=b.getDatum();k(c);k(c.getSpheroid());k(b.getPrimem());k(b.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,h,g,q){a._pe.ensureCache.prepare();var d=l(h),m=h===d,d=a._pe.ensureFloat64(d),y=0;g&&(y=a._pe.ensureFloat64(g));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,d,y,
q))&&e(h,c,d,m);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function c(b,c,d,g,e,m){a._pe.ensureCache.prepare();var h,q;switch(b){case "dd":h=a._pe._pe_geog_to_dd;q=n.PE_DD_MAX;break;case "ddm":h=a._pe._pe_geog_to_ddm;q=n.PE_DDM_MAX;break;case "dms":h=a._pe._pe_geog_to_dms,q=n.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));c=l(g);c=a._pe.ensureFloat64(c);q=t(d,q);g=a._pe.ensureInt32(q);if(e=h(b,d,c,e,g))for(h=0;h<d;h++)m[h]=a._pe.UTF8ToString(q[h]);return e}function g(b,
c,d,g,m){a._pe.ensureCache.prepare();var h;switch(b){case "dd":h=a._pe._pe_dd_to_geog;break;case "ddm":h=a._pe._pe_ddm_to_geog;break;case "dms":h=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(h=h(b,d,g,c))&&e(m,d,c);return h}b.geog_to_dms=function(b,a,d,g,e){return c("dms",b,a,d,g,e)};b.dms_to_geog=function(b,c,a,d){return g("dms",b,c,a,d)};b.geog_to_ddm=function(b,a,d,g,e){return c("ddm",
b,a,d,g,e)};b.ddm_to_geog=function(b,c,a,d){return g("ddm",b,c,a,d)};b.geog_to_dd=function(b,a,d,g,e){return c("dd",b,a,d,g,e)};b.dd_to_geog=function(b,c,a,d){return g("dd",b,c,a,d)}})(a.PeNotationDms||(a.PeNotationDms={}));var b;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(b,c,g,e,m,f,k){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=l(g);g=a._pe.ensureFloat64(b);b=t(c,n.PE_MGRS_MAX);var h=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_mgrs_extended(d,c,g,e,m,f,h))for(m=0;m<c;m++)k[m]=a._pe.UTF8ToString(b[m]);return e};b.mgrs_to_geog_extended=function(b,c,g,m,q){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=g.map(function(b){return a._pe.ensureString(b)});
g=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(m=a._pe._pe_mgrs_to_geog_extended(d,c,g,m,b))&&e(q,c,b);return m}})(b=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,c,g,e,m,f,k){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=l(g);g=a._pe.ensureFloat64(b);b=t(c,n.PE_MGRS_MAX);var h=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_usng(d,c,g,e,m,f,h))for(m=0;m<c;m++)k[m]=a._pe.UTF8ToString(b[m]);return e};b.usng_to_geog=function(b,c,g,m){a._pe.ensureCache.prepare();
var d=0;b&&(d=a._pe.getPointer(b));b=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(d=a._pe._pe_usng_to_geog(d,c,g,b))&&e(m,c,b);return d}})(a.PeNotationUsng||(a.PeNotationUsng={}));var g;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,
c,g,e,m){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=l(g);g=a._pe.ensureFloat64(b);b=t(c,n.PE_UTM_MAX);var h=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_utm(d,c,g,e,h))for(d=0;d<c;d++)m[d]=a._pe.UTF8ToString(b[d]);return e};b.utm_to_geog=function(b,c,g,m,q){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(m=a._pe._pe_utm_to_geog(d,c,g,m,b))&&e(q,c,b);return m}})(g=
a.PeNotationUtm||(a.PeNotationUtm={}));var m;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(d,g){void 0===g&&(g=b.PE_PCSINFO_OPTION_DOMAIN);var e,h;c.has(d)&&(h=c.get(d),h[g]&&(e=h[g]));e||(e=a._pe.PePCSInfo.prototype.generate(d,
g),h||(h=[],c.set(d,h)),h[g]=e);return e}})(m=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=p})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(w,a,u){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var f=0;for(a=a.steps;f<
a.length;f++){var k=a[f];k instanceof u?this.steps.push(k):this.steps.push(new u({wkid:k.wkid,wkt:k.wkt,isInverse:k.isInverse}))}}}a.cacheKey=function(a,f){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==f.wkid&&null!==f.wkid?f.wkid.toString():"-1",void 0!==f.wkt&&null!==f.wkt?f.wkt.toString():""].join()};a.fromGE=function(f){var r=new a,k="",t=0;for(f=f.steps;t<f.length;t++){var l=u.fromGE(f[t]);r.steps.push(l);k+=l.uid.toString()+
","}r._cached_projection={};r._gtlistentry=null;r._chain=k;return r};a.prototype.getInverse=function(){var f=new a;f.steps=[];for(var p=this.steps.length-1;0<=p;p--)f.steps.push(this.steps[p].getInverse());return f};a.prototype.getGTListEntry=function(){for(var a="",f=0,k=this.steps;f<k.length;f++)a+=k[f].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(f,p,k){this._cached_projection[a.cacheKey(f,
p)]=k};a.prototype.getCachedGeTransformation=function(f,p){for(var k="",t=0,l=this.steps;t<l.length;t++)k+=l[t].uid.toString()+",";k!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=k);f=this._cached_projection[a.cacheKey(f,p)];return void 0===f?null:f};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(w,a){var u=0;return function(){function a(a){void 0===a&&(a=null);this.uid=u++;a?(this._wkt=void 0!==
a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(f){var r=new a;r._wkt=f.wkt;r._wkid=f.wkid;r._isInverse=f.isInverse;return r};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=u++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=
a;this.uid=u++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=u++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var f=new a;f._wkt=this.wkt;f._wkid=this._wkid;f._isInverse=!this.isInverse;return f};return a}()})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../layers/support/FieldsIndex ../../../../../support/arcadeOnDemand ../../../../webgl ../../../engine ../../../arcade/utils ../../../engine/webgl/definitions ../tileRenderers/support/visualVariablesUtils @dojo/framework/shim/Promise".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n,z,b,g,m,c){Object.defineProperty(a,"__esModule",{value:!0});var d=k.getLogger("esri.views.layers.2d.features.support.AttributeStore"),x=b.debug.createDebugLogger(b.debug.DEBUG_ATTR_UPDATES,d),h=function(b,a){return function(c,d,g){var h;try{h=a(c,d,g)}catch(L){h=NaN}return(null===h||isNaN(h)||Infinity===h)&&b||h}},y=p("esri-shared-array-buffer"),q=p("esri-webgl-texture-float"),H=p("esri-webgl-max-texture-size"),E=p("esri-atomics"),K=function(){function a(b,a,c,d){this.texelSize=
4;var g=d.pixelType,h=d.layout;this.textureOnly=(d=d.textureOnly)||!1;this.pixelType=g;this._ctype=a;this.layout=h;this._resetRange();this._shared=b;d||(this.data=this._initData(g,c,b,a))}Object.defineProperty(a.prototype,"buffer",{get:function(){return l.andThen(this.data,function(b){return b.buffer})},enumerable:!0,configurable:!0});a.prototype.getData=function(b,a){b&=2147483647;return l.expect(this.data)[b*this.texelSize+a]};a.prototype.setData=function(b,a,c){b&=2147483647;0===(this.layout&1<<
a)?d.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[b*this.texelSize+a]=c,this.dirtyStart=Math.min(this.dirtyStart,b),this.dirtyEnd=Math.max(this.dirtyEnd,b))};a.prototype.lock=function(){5121===this.pixelType&&this._shared&&E&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};a.prototype.unlock=function(){5121===this.pixelType&&this._shared&&E&&"local"!==this._ctype&&Atomics.store(this.data,0,0)};a.prototype.expand=function(b){if(!this.textureOnly){b=
this._initData(this.pixelType,b,this._shared,this._ctype);var a=l.expect(this.data);b.set(a);this.data=b}};a.prototype.toMessage=function(){var a=this.dirtyStart,c=this.dirtyEnd,d=this.texelSize;if(a>c)return null;this._resetRange();var g=!this._shared&&"local"!==this._ctype,h=this.pixelType,e=this.layout,m=l.expect(this.data);if(!m.slice){if(!g)return{start:a,end:c,data:null,pixelType:h,layout:e};d=new (b.Utils.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,a*d,(c+1)*d));
return{start:a,end:c,data:d,pixelType:h,layout:e}}d=g&&m.slice(a*d,(c+1)*d)||null;return{start:a,end:c,data:d,pixelType:h,layout:e}};a.prototype._initData=function(a,c,d,g){d=d&&"local"!==g?SharedArrayBuffer:ArrayBuffer;a=b.Utils.getPixelArrayCtor(a);c=new a(new d(c*c*4*a.BYTES_PER_ELEMENT));for(a=0;a<c.length;a+=4)c[a+1]=255;return c};a.prototype._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};return a}();p=function(){function a(a){this._attributeComputeMap=new Map;this._blocks=
[];this._idMap=new Map;this._localToObjectId=new Map;this._filters=Array(b.definitions.MAX_FILTERS);this._freeTexelsList=[];this._abortController=e.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idCounter=1;this._idsToHighlight=new Set;var c=q?5126:5121;x("Creating AttributeStore "+(y?"with":"without")+" shared memory");this._client=a;this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:c,layout:15},{pixelType:c,layout:15}];this._blocks=
this._blockDescriptors.map(function(){return null})}a.prototype.destroy=function(){this._abortController.abort()};Object.defineProperty(a.prototype,"hasScaleExpr",{get:function(){return this._hasScaleExpr},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_signal",{get:function(){return this._abortController.signal},enumerable:!0,configurable:!0});a.prototype.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=e.createAbortController()};
a.prototype.createLocalId=function(b,a){void 0===a&&(a=!1);if(!this._idMap.has(b)){var c=this._getFreeTexel();a=((a?2147483648:0)|c)>>>0;this._idMap.set(b,-1===a?0:a);this._localToObjectId.set(a,b)}return this._idMap.get(b)};a.prototype.addLocalId=function(b){this._getBlock(0).setData(b,0,0);this._freeTexelsList.push(b&2147483647)};a.prototype.removeLocalId=function(b){var a=this._idMap.get(b);this._idMap.delete(b);this._localToObjectId.delete(a);return a};a.prototype.freeLocalId=function(b){var a=
this._idMap.get(b);this._getBlock(0).setData(a,0,0);this._idMap.delete(b);this._localToObjectId.delete(a);this._freeTexelsList.push(a&2147483647)};a.prototype.getFeatureId=function(b){return this._localToObjectId.get(b)};a.prototype.getLocalId=function(b){return this._idMap.has(b)?this._idMap.get(b):null};a.prototype.setHighlight=function(b){return f(this,void 0,void 0,function(){var a,c,d,g,h,e,m=this;return u(this,function(f){switch(f.label){case 0:this._getBlock(0).lock();this._idsToHighlight.forEach(function(b){if(b=
m.getLocalId(b)){var a=m._getBlock(0).getData(b,0);m._getBlock(0).setData(b,0,a&-2)}});this._idsToHighlight.clear();a=0;for(c=b;a<c.length;a++)d=c[a],this._idsToHighlight.add(d);for(g=0;g<b.length;g++)h=this.getLocalId(b[g]),null!=h&&(e=this._getBlock(0).getData(h,0),this._getBlock(0).setData(h,0,e|1));this._getBlock(0).unlock();return[4,this.sendUpdates()];case 1:return f.sent(),[2]}})})};a.prototype.addHighlight=function(){return f(this,void 0,void 0,function(){return u(this,function(b){return[2]})})};
a.prototype.removeHighlight=function(){return f(this,void 0,void 0,function(){return u(this,function(b){return[2]})})};a.prototype.updateFilters=function(b){return f(this,void 0,void 0,function(){var a,c,d,g,h,m=this;return u(this,function(f){switch(f.label){case 0:return a=b.config,c=b.service,d=b.spatialReference,g=a.filters,h=g.map(function(a,g){return m._updateFilter(b,a,g,c,d)}),[4,e.all(h)];case 1:return f.sent(),[2]}})})};a.prototype.setAttributeBindings=function(b,a){return f(this,void 0,
void 0,function(){return u(this,function(c){this._hasScaleExpr=!1;switch(b.type){case "simple":case "class-breaks":case "unique-value":case "dictionary":return[2,this._bindVVEvaluators(b.visualVariables,a)];case "dot-density":return[2,this._bindDDEvaluators(b.attributes,a)];case "heatmap":break;default:d.error(new r("attribute-store","Found invalid renderer type: "+b))}return[2]})})};a.prototype.setData=function(b,a,c,d){this._getBlock(a).setData(b,c,d)};a.prototype.getData=function(b,a,c){return this._getBlock(a).getData(b,
c)};a.prototype.getHighlightFlag=function(b){return this._idsToHighlight.has(b)?m.HIGHLIGHT_FLAG:0};a.prototype.setAttributeData=function(a,c,d,g){var h=this;this._getBlock(0).setData(a,0,this.getFilterFlags(c));var e=q?1:2;this._attributeComputeMap.forEach(function(f,A){var l=A*e%4;A=h._getBlock(Math.floor(A*e/4)+m.ATTRIBUTE_DATA_VV);f=f(c,{$view:g},d);if(q)A.setData(a,l,f);else if(f===b.definitions.NAN_MAGIC_NUMBER)A.setData(a,l,255),A.setData(a,l+1,255);else{f=t.clamp(Math.round(f),-32767,32766)+
32768;var y=(f&65280)>>8;A.setData(a,l,f&255);A.setData(a,l+1,y)}})};a.prototype.sendUpdates=function(){var b=this;if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=e.createResolver(),this._nextUpdate.promise;var a={blocks:this._blocks.map(function(b){return l.isSome(b)?b.toMessage():null})};return this._currUpdate=this._createResources().then(function(){var c=function(){b._currUpdate=null;if(b._nextUpdate){var a=b._nextUpdate;b._nextUpdate=null;b.sendUpdates().then(function(){return a.resolve()})}},
c=b._client.update(a,b._signal).then(c).catch(c);b._client.render();return c}).catch(function(a){if(e.isAbortError(a))return b._createResourcesPromise=null,b._createResources();d.error(new r("mapview-attribute-store","Encountered an error during client update",a));return e.resolve()})};a.prototype._createResources=function(){var b=this;if(l.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(m.ATTRIBUTE_DATA_ANIMATION);x("Initializing AttributeStore");var a={shared:y&&
"local"!==this._client.type,size:this._size,blocks:l.mapMany(this._blocks,function(b){return{textureOnly:b.textureOnly,buffer:b.buffer,pixelType:b.pixelType}})};this._createResourcesPromise=a=this._client.initialize(a,this._signal).catch(function(a){e.isAbortError(a)&&(b._createResourcesPromise=null);d.error(new r("mapview-attribute-store","Encountered an error during client initialization",a))});a.then(function(){return l.isNone(b._createResourcesPromise)?b._createResources():void 0});return a};
a.prototype._getBlock=function(b){var a=this._blocks[b];if(l.isSome(a))return a;x("Initializing AttributeBlock at index "+b);a=new K(y,this._client.type,this._size,this._blockDescriptors[b]);this._blocks[b]=a;this._createResourcesPromise=null;return a};a.prototype._expand=function(){if(this._size<H){var b=this._size<<=1;x("Expanding block size to",b,this._blocks);l.forEachSome(this._blocks,function(a){return a.expand(b)});this._createResourcesPromise=null;this._size=b;return 0}d.error(new r("mapview-limitations",
"Maximum number of onscreen features exceeded."));return-1};a.prototype._getFreeTexel=function(){return this._freeTexelsList.length?this._freeTexelsList.pop():this._idCounter>=this._size*this._size&&this._expand()?-1:this._idCounter++};a.prototype._updateFilter=function(b,a,c,d,g){return f(this,void 0,void 0,function(){var h,e,m,f,q,A,y,x,k,v=this;return u(this,function(n){switch(n.label){case 0:h=this._filters[c];e=l.isSome(h)&&h.hash;if(e===JSON.stringify(a))return[2];m=1<<c+1;return l.isNone(a)?
(this._filters[c]=null,this._idMap.forEach(function(b){var a=v._getBlock(0).getData(b,0);v._getBlock(0).setData(b,0,a|m)}),[2]):[4,b.queryObjectIds(a)];case 1:return f=n.sent(),a.hiddenIds&&a.hiddenIds.length&&(f=f.filter(function(b){return-1===a.hiddenIds.indexOf(b)})),q=f.map(function(b){return v._idMap.get(b)}),[4,this._getFilter(c,d)];case 2:A=n.sent();A.update(a,g);this._getBlock(0).lock();this._idMap.forEach(function(b){if(1!==(b&2147483648)>>>31){var a=v._getBlock(0).getData(b,0);v._getBlock(0).setData(b,
0,a&~m)}});for(y=0;y<q.length;y++)x=q[y],null!=x&&(k=this._getBlock(0).getData(x,0),this._getBlock(0).setData(x,0,k|m));this._getBlock(0).unlock();return[2]}})})};a.prototype._getFilter=function(b,a){return f(this,void 0,void 0,function(){var c,d,g;return u(this,function(h){switch(h.label){case 0:return c=this._filters[b],l.isSome(c)?[2,c]:[4,new Promise(function(b,a){w(["../../../../../layers/graphics/data/FeatureFilter"],b,a)})];case 1:return d=h.sent().default,g=new d({geometryType:a.geometryType,
hasM:!1,hasZ:!1,timeInfo:a.timeInfo,fieldsIndex:new v(a.fields)}),this._filters[b]=g,[2,g]}})})};a.prototype.isVisible=function(b){return!!(this._getBlock(0).getData(b.localId,0)&2)};a.prototype.getFilterFlags=function(b){for(var a=0,c=1===(b.localId&2147483648)>>>31?254:255,d=0;d<this._filters.length;d++)var g=this._filters[d],g=!(c&1<<d)||l.isNone(g)||g.check(b),a=a|(g?1:0)<<d;b=this.getFeatureId(b.localId);return a<<1|this.getHighlightFlag(b)};a.prototype._bindVVEvaluators=function(a,c){return f(this,
void 0,void 0,function(){var d,g=this;return u(this,function(h){switch(h.label){case 0:this._attributeComputeMap.clear();if(!l.isSome(a))return[3,2];d=e.all(a.map(function(a){return f(g,void 0,void 0,function(){var d,g;return u(this,function(h){switch(h.label){case 0:return d=b.Utils.getVVType(a.type),[4,this._createGetValueFunction(a,c)];case 1:return g=h.sent(),l.isSome(g)&&this._attributeComputeMap.set(d,g),[2]}})})}));return[4,d];case 1:h.sent(),h.label=2;case 2:return[2]}})})};a.prototype._bindDDEvaluators=
function(a,c){return f(this,void 0,void 0,function(){var g,m,f,q=this;return u(this,function(A){switch(A.label){case 0:return this._attributeComputeMap.clear(),a.length>b.definitions.DOT_DENSITY_MAX_FIELDS&&d.warn("mapview-invalid-value","DotDensityRenderer supports a maximum of "+b.definitions.DOT_DENSITY_MAX_FIELDS+" attribtues, but found "+a.length),[4,e.all(a.map(function(b){return q._createNormalizedFunction(b,c)}))];case 1:g=A.sent().map(function(b){return h(0,b)});for(m=0;m<b.definitions.DOT_DENSITY_MAX_FIELDS;m++)(f=
m<a.length&&g[m])?this._attributeComputeMap.set(m,f):this._attributeComputeMap.has(m)&&this._attributeComputeMap.delete(m);return[2]}})})};a.prototype._createGetValueFunction=function(a,d){return f(this,void 0,void 0,function(){var g,e,m,f,q,l,y;return u(this,function(A){switch(A.label){case 0:if("size"!==a.type)return[3,2];g=b.getTypeOfSizeVisualVariable(a);if(g===b.enums.WGLVVFlag.SIZE_SCALE_STOPS)return[2,null];m=(e=g===b.enums.WGLVVFlag.SIZE_UNIT_VALUE)&&function(b){return c.getVisualVariableSizeValueRepresentationRatio(b,
a.valueRepresentation)};f=h;q=[b.definitions.NAN_MAGIC_NUMBER];return[4,this._createNormalizedFunction(a,d,m)];case 1:return[2,f.apply(void 0,q.concat([A.sent()]))];case 2:return l=h,y=[b.definitions.NAN_MAGIC_NUMBER],[4,this._createNormalizedFunction(a,d)];case 3:return[2,l.apply(void 0,y.concat([A.sent()]))]}})})};a.prototype._createNormalizedFunction=function(b,a,c){return f(this,void 0,void 0,function(){var h,e,m;return u(this,function(f){switch(f.label){case 0:if(h=b.field){if("string"===typeof h)return(e=
b.normalizationField)?[2,function(b){if(b.attributes[h]&&b.attributes[e])return b=b.attributes[h]/b.attributes[e],c?c(b):b}]:[2,c?function(b){return c(b.attributes[h])}:function(b){return b.attributes[h]}];d.error(new r("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof h));return[2,function(){}]}if(!b.valueExpression)return[3,2];this._hasScaleExpr=this._hasScaleExpr||-1!==b.valueExpression.indexOf("scale");return[4,n.createVVExpression(b.valueExpression,
a.spatialReference,a.fields)];case 1:return m=f.sent(),[2,g.callWithOptimizedFeature.bind(null,m)];case 2:return d.error("Unable to create a normalized function for visual variable: "+b),[2,function(){}]}})})};return a}();a.default=p})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("require exports ../../../../../../core/tsSupport/assignHelper ../../../../../../core/screenUtils ../../../../engine ../../../../engine/webgl/definitions ../../../../../3d/layers/support/FastSymbolUpdates".split(" "),
function(w,a,u,f,r,p,k){function t(b){return{value:b.value,size:f.toPt(b.size)}}function l(b){return b.map(function(b){return t(b)})}function e(b){return"string"===typeof b||"number"===typeof b?f.toPt(b):{type:"size",expression:b.expression,stops:l(b.stops)}}function v(b){var a={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(r.Utils.isString(b.field))if(b.stops){if(8<b.stops.length)return null;var e=b.stops;for(b=0;8>b;++b){var c=e[Math.min(b,e.length-1)];a.values[b]=c.value;a.opacities[b]=
c.opacity}}else return null;else if(b.stops&&0<=b.stops.length)for(e=b.stops&&0<=b.stops.length&&b.stops[0].opacity,b=0;8>b;b++)a.values[b]=Infinity,a.opacities[b]=e;else return null;return a}Object.defineProperty(a,"__esModule",{value:!0});var n=r.enums.WGLVVFlag;a.getVisualVariableSizeValueRepresentationRatio=function(b,a){if(!b||!a)return b;switch(a){case "radius":case "distance":return 2*b;case "area":return Math.sqrt(b)}return b};a.stopToSizeStop=t;a.normalizeSizeStops=l;a.normalizeSizeElement=
e;a.getVisualVariablesFields=function(b){var a=b&&0<b.length?{}:null;a&&b.forEach(function(b){var c=b.type;b.field&&(a[c]=b.field)});return a};var z=function(b){var a=[],e=[];b=l(b);for(var c=b.length,d=0;6>d;d++){var x=b[Math.min(d,c-1)];a.push(x.value);e.push(null==x.size?p.NAN_MAGIC_NUMBER:f.pt2px(x.size))}return{values:new Float32Array(a),sizes:new Float32Array(e)}};a.convertVisualVariables=function(b){var a=b&&0<b.length?{}:null,m=a?{}:null;if(!a)return{vvFields:a,vvRanges:m};for(var c=0;c<b.length;c++){var d=
b[c],f=d.type;d.field&&(a[f]=d.field);if("size"===f)switch(m.size||(m.size={}),r.getTypeOfSizeVisualVariable(d)){case n.SIZE_MINMAX_VALUE:m.size.minMaxValue={minDataValue:d.minDataValue,maxDataValue:d.maxDataValue,minSize:e(d.minSize),maxSize:e(d.maxSize)};break;case n.SIZE_SCALE_STOPS:m.size.scaleStops={stops:l(d.stops)};break;case n.SIZE_FIELD_STOPS:if(d.levels){var f={},h;for(h in d.levels)f[h]=z(d.levels[h]);m.size.fieldStops={type:"level-dependent",levels:f}}else m.size.fieldStops=u({type:"static"},
z(d.stops));break;case n.SIZE_UNIT_VALUE:m.size.unitValue={unit:d.valueUnit,valueRepresentation:d.valueRepresentation}}else if("color"===f)for(d=k.convertVisualVariables([d],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),m.color=d.color,d=0;32>d;d+=4)r.color.premultiplyAlpha(m.color.colors,d,!0);else"opacity"===f?m.opacity=v(d):"rotation"===f&&(m.rotation={type:d.rotationType})}return{vvFields:a,vvRanges:m}}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../renderers/support/utils ../../support/debugFlags".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n){function z(b){return null!==b&&void 0!==b}function b(b){return"number"===typeof b}function g(b){return"string"===typeof b}function m(b,a){b&&b.push(a)}function c(a,c,g,h,e){var f=a.minSize,q=a.maxSize;if(a.expression)return m(e,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=h.symbolSize[g],c.minSize[g]=a,c.maxSize[g]=a,c.offset[g]=c.minSize[g],c.factor[g]=0,c.type[g]=1,!0;if(z(a.field)){if(z(a.stops)){if(2===a.stops.length&&
b(a.stops[0].size)&&b(a.stops[1].size))return d(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,c,g),c.type[g]=1,!0;m(e,"Could not convert size info: stops only supported with 2 elements");return!1}if(b(f)&&b(q)&&z(a.minDataValue)&&z(a.maxDataValue))return d(f,q,a.minDataValue,a.maxDataValue,c,g),c.type[g]=1,!0;if(null!=v.meterIn[a.valueUnit])return c.minSize[g]=-Infinity,c.maxSize[g]=Infinity,c.offset[g]=0,c.factor[g]=1/v.meterIn[a.valueUnit],c.type[g]=1,!0;if("unknown"===a.valueUnit)return m(e,
"Could not convert size info: proportional size not supported"),!1;m(e,"Could not convert size info: scale-dependent size not supported");return!1}if(!z(a.field)){if(a.stops&&a.stops[0]&&b(a.stops[0].size))return c.minSize[g]=a.stops[0].size,c.maxSize[g]=a.stops[0].size,c.offset[g]=c.minSize[g],c.factor[g]=0,c.type[g]=1,!0;if(b(f))return c.minSize[g]=f,c.maxSize[g]=f,c.offset[g]=f,c.factor[g]=0,c.type[g]=1,!0}m(e,"Could not convert size info: unsupported variant of sizeInfo");return!1}function d(b,
a,c,d,g,h){d=0<Math.abs(d-c)?(a-b)/(d-c):0;g.minSize[h]=0<d?b:a;g.maxSize[h]=0<d?a:b;g.offset[h]=b-c*d;g.factor[h]=d}function x(b,a,d,h){if(b.normalizationField||b.valueRepresentation)return m(h,"Could not convert size info: unsupported property"),null;var e=b.field;if(null!=e&&!g(e))return m(h,"Could not convert size info: field is not a string"),null;if(!a.size)a.size={field:b.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(b.field)if(!a.size.field)a.size.field=
b.field;else if(b.field!==a.size.field)return m(h,"Could not convert size info: multiple fields in use"),null;switch(b.axis){case "width":return(e=c(b,a.size,0,d,h))?a:null;case "height":return(e=c(b,a.size,2,d,h))?a:null;case "depth":return(e=c(b,a.size,1,d,h))?a:null;case "width-and-depth":return(e=c(b,a.size,0,d,h))&&c(b,a.size,1,d,h),e?a:null;case null:case void 0:case "all":return(e=(e=(e=c(b,a.size,0,d,h))&&c(b,a.size,1,d,h))&&c(b,a.size,2,d,h))?a:null;default:return m(h,'Could not convert size info: unknown axis "'+
b.axis+'""'),null}}function h(b,a,c){for(var d=0;3>d;++d){var g=a.unitInMeters;1===b.type[d]&&(g*=a.modelSize[d],b.type[d]=2);b.minSize[d]/=g;b.maxSize[d]/=g;b.offset[d]/=g;b.factor[d]/=g}if(0!==b.type[0])a=0;else if(0!==b.type[1])a=1;else if(0!==b.type[2])a=2;else return m(c,"No size axis contains a valid size or scale"),!1;for(d=0;3>d;++d)0===b.type[d]&&(b.minSize[d]=b.minSize[a],b.maxSize[d]=b.maxSize[a],b.offset[d]=b.offset[a],b.factor[d]=b.factor[a],b.type[d]=b.type[a]);return!0}function y(b,
a,c){b[4*a+0]=c.r/255;b[4*a+1]=c.g/255;b[4*a+2]=c.b/255;b[4*a+3]=c.a}function q(b,a,c){if(b.normalizationField)return m(c,"Could not convert color info: unsupported property"),null;if(g(b.field))if(b.stops){if(8<b.stops.length)return m(c,"Could not convert color info: too many color stops"),null;a.color={field:b.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=b.stops;for(b=0;8>b;++b){var d=c[Math.min(b,c.length-1)];a.color.values[b]=d.value;
y(a.color.colors,b,d.color)}}else return m(c,"Could not convert color info: missing stops or colors"),null;else if(b.stops&&0<=b.stops.length)for(c=b.stops&&0<=b.stops.length&&b.stops[0].color,a.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},b=0;8>b;b++)a.color.values[b]=Infinity,y(a.color.colors,b,c);else return m(c,"Could not convert color info: no field and no colors/stops"),null;return a}function H(b,a,c){if(b.normalizationField)return m(c,
"Could not convert opacity info: unsupported property"),null;if(g(b.field))if(b.stops){if(8<b.stops.length)return m(c,"Could not convert opacity info: too many opacity stops"),null;a.opacity={field:b.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};c=b.stops;for(b=0;8>b;++b){var d=c[Math.min(b,c.length-1)];a.opacity.values[b]=d.value;a.opacity.opacityValues[b]=d.opacity}}else return m(c,"Could not convert opacity info: missing stops or opacities"),null;else if(b.stops&&0<=b.stops.length)for(c=
b.stops&&0<=b.stops.length&&b.stops[0].opacity,a.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},b=0;8>b;b++)a.opacity.values[b]=Infinity,a.opacity.opacityValues[b]=c;else return m(c,"Could not convert opacity info: no field and no opacities/stops"),null;return a}function E(b,a,c){b=2===c&&"arithmetic"===b.rotationType;a.offset[c]=b?90:0;a.factor[c]=b?-1:1;a.type[c]=1}function K(b,a,c){if(!g(b.field))return m(c,"Could not convert rotation info: field is not a string"),
null;if(!a.rotation)a.rotation={field:b.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(b.field)if(!a.rotation.field)a.rotation.field=b.field;else if(b.field!==a.rotation.field)return m(c,"Could not convert rotation info: multiple fields in use"),null;switch(b.axis){case "tilt":return E(b,a.rotation,0),a;case "roll":return E(b,a.rotation,1),a;case null:case void 0:case "heading":return E(b,a.rotation,2),a;default:return m(c,'Could not convert rotation info: unknown axis "'+b.axis+'""'),
null}}function F(b,a,c){if(!b)return null;var d=!a.supportedTypes||!!a.supportedTypes.size,g=!a.supportedTypes||!!a.supportedTypes.color,e=!a.supportedTypes||!!a.supportedTypes.rotation,f=!!a.supportedTypes&&!!a.supportedTypes.opacity,l=b.reduce(function(b,h){if(!b)return b;if(h.valueExpression)return m(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(h.type){case "size":return d?x(h,b,a,c):b;case "color":return g?q(h,b,c):b;case "opacity":return f?H(h,b,c):null;
case "rotation":return e?K(h,b,c):b;default:return u.neverReached(h),null}},{size:null,color:null,opacity:null,rotation:null});return 0<b.length&&l&&!l.size&&!l.color&&!l.opacity&&!l.rotation||l&&l.size&&!h(l.size,a,c)?null:l}function C(b,a,c){if(!!b!==!!a||b&&b.field!==a.field)return!1;if(b&&"rotation"===c)for(c=0;3>c;c++)if(b.type[c]!==a.type[c]||b.offset[c]!==a.offset[c]||b.factor[c]!==a.factor[c])return!1;return!0}function G(b,a){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,
vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},d=b&&null!=b.size;b&&b.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=b.size.minSize,c.vvSizeMaxSize=b.size.maxSize,c.vvSizeOffset=b.size.offset,c.vvSizeFactor=b.size.factor):b&&d&&(c.vvSizeValue=a.transformation.scale);if(b&&d){c.vvSymbolAnchor=a.transformation.anchor;c.vvSymbolRotationMatrix=p.mat3f64.create();
k.mat4.identity(D);var g=a.transformation.rotation[2],d=a.transformation.rotation[0],h=a.transformation.rotation[1];a=D;void 0===a&&(a=t.mat4f64.create());g=g||0;d=d||0;h=h||0;0!==g&&k.mat4.rotateZ(a,a,-g/180*Math.PI);0!==d&&k.mat4.rotateX(a,a,d/180*Math.PI);0!==h&&k.mat4.rotateY(a,a,h/180*Math.PI);r.mat3.fromMat4(c.vvSymbolRotationMatrix,D)}b&&b.color&&(c.vvColorEnabled=!0,c.vvColorValues=b.color.values,c.vvColorColors=b.color.colors);b&&b.opacity&&(c.vvOpacityEnabled=!0,c.vvOpacityValues=b.opacity.values,
c.vvOpacityOpacities=b.opacity.opacityValues);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=F;a.initFastSymbolUpdatesState=function(b,a){return!b||n.DISABLE_FAST_UPDATES?{enabled:!1}:(b=F(b.visualVariables,a))?{enabled:!0,visualVariables:b,materialParameters:G(b,a),requiresShaderTransformation:b&&null!=b.size}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(b,a,c){if(!a||!b.enabled)return!1;var d=b.visualVariables;a=F(a.visualVariables,c);if(!(a&&C(d.size,
a.size,"size")&&C(d.color,a.color,"color")&&C(d.rotation,a.rotation,"rotation")&&C(d.opacity,a.opacity,"opacity")))return!1;b.visualVariables=a;b.materialParameters=G(a,c);b.requiresShaderTransformation=a&&null!=a.size;return!0};a.getMaterialParams=G;var I;(function(b){var a=t.mat4f64.create(),c=e.vec3f64.create();b.evaluateModelTransform=function(b,d,g){if(!b.vvSizeEnabled)return g;k.mat4.copy(a,g);g=b.vvSymbolRotationMatrix;k.mat4.set(D,g[0],g[1],g[2],0,g[3],g[4],g[5],0,g[6],g[7],g[8],0,0,0,0,1);
k.mat4.multiply(a,a,D);for(g=0;3>g;++g)c[g]=f.clamp(b.vvSizeOffset[g]+d[0]*b.vvSizeFactor[g],b.vvSizeMinSize[g],b.vvSizeMaxSize[g]);k.mat4.scale(a,a,c);k.mat4.translate(a,a,b.vvSymbolAnchor);return a};b.evaluateModelTransformScale=function(b,a,c){if(!a.vvSizeEnabled)return l.vec3.set(b,1,1,1);for(var d=0;3>d;++d)b[d]=f.clamp(a.vvSizeOffset[d]+c[0]*a.vvSizeFactor[d],a.vvSizeMinSize[d],a.vvSizeMaxSize[d]);return b}})(I||(I={}));var D=t.mat4f64.create();a.evaluateModelTransform=I.evaluateModelTransform;
a.evaluateModelTransformScale=I.evaluateModelTransformScale})},"esri/core/libs/gl-matrix-2/mat3f64":function(){define(["require","exports","./factories/mat3f64"],function(w,a,u){Object.defineProperty(a,"__esModule",{value:!0});a.mat3f64=u})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,1,0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],
a[7],a[8]]};a.fromValues=function(a,f,r,p,k,t,l,e,v){return[a,f,r,p,k,t,l,e,v]};a.createView=function(a,f){return new Float64Array(a,f,9)}})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["require","exports","./factories/mat4f64"],function(w,a,u){Object.defineProperty(a,"__esModule",{value:!0});a.mat4f64=u})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(w,a){function u(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Object.defineProperty(a,"__esModule",
{value:!0});a.create=u;a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]};a.fromValues=function(a,r,p,k,t,l,e,v,n,z,b,g,m,c,d,x){return[a,r,p,k,t,l,e,v,n,z,b,g,m,c,d,x]};a.createView=function(a,r){return new Float64Array(a,r,16)};a.IDENTITY=u()})},"esri/views/3d/support/debugFlags":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(w,a,u,f,r,p){return new (function(a){function k(){var f=null!==a&&a.apply(this,arguments)||this;f.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1;f.SCENEVIEW_LOCKING_LOG=!1;f.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1;f.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1;f.DECONFLICTOR_SHOW_OUTLINES=!1;f.DECONFLICTOR_SHOW_OUTLINES_INVISIBLE=!1;f.DECONFLICTOR_SHOW_GRID=!1;f.LABELS_SHOW_BORDER=!1;f.OVERLAY_DRAW_DEBUG_TEXTURE=!1;f.OVERLAY_SHOW_CENTER=!1;f.TERRAIN_DEBUG_POPUP=!1;f.TESTS_DISABLE_UPDATE_THRESHOLDS=!1;f.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=
!1;f.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1;f.DRAW_MESH_GEOMETRY_NORMALS=!1;f.FEATURE_TILE_FETCH_SHOW_TILES=!1;f.FEATURE_TILE_TREE_SHOW_TILES=!1;f.I3S_TREE_SHOW_TILES=!1;f.ENABLE_PROFILE_DEPTH_RANGE=!1;f.DISABLE_FAST_UPDATES=!1;f.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1;f.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1;f.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1;return f}u(k,a);f([p.property()],k.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);f([p.property()],k.prototype,"SCENEVIEW_LOCKING_LOG",
void 0);f([p.property()],k.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",void 0);f([p.property()],k.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0);f([p.property()],k.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0);f([p.property()],k.prototype,"DECONFLICTOR_SHOW_OUTLINES_INVISIBLE",void 0);f([p.property()],k.prototype,"DECONFLICTOR_SHOW_GRID",void 0);f([p.property()],k.prototype,"LABELS_SHOW_BORDER",void 0);f([p.property()],k.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0);f([p.property()],k.prototype,
"OVERLAY_SHOW_CENTER",void 0);f([p.property()],k.prototype,"TERRAIN_DEBUG_POPUP",void 0);f([p.property()],k.prototype,"TESTS_DISABLE_UPDATE_THRESHOLDS",void 0);f([p.property()],k.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0);f([p.property()],k.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0);f([p.property()],k.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);f([p.property()],k.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0);f([p.property()],k.prototype,"FEATURE_TILE_TREE_SHOW_TILES",
void 0);f([p.property()],k.prototype,"I3S_TREE_SHOW_TILES",void 0);f([p.property()],k.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0);f([p.property()],k.prototype,"DISABLE_FAST_UPDATES",void 0);f([p.property()],k.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);f([p.property()],k.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);f([p.property()],k.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0);return k=f([p.subclass("esri.views.3d.support.DebugFlags")],k)}(p.declared(r)))})},
"esri/views/2d/layers/features/support/TileStore":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Evented ../../../../../core/has ../../../../../core/libs/rbush/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),function(w,a,u,f,r,p,k,t,l,e){Object.defineProperty(a,"__esModule",{value:!0});var v={added:[],removed:[]},n=new Set,z=new e(0,0,0,0);w=function(b){function a(a){var c=
b.call(this)||this;c._tiles=new Map;c._index=k(9,p("csp-restrictions")?function(b){return{minX:b.bounds[0],minY:b.bounds[1],maxX:b.bounds[2],maxY:b.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);c.tiles=[];c.tileScheme=a;return c}u(a,b);a.prototype.destroy=function(){this._tiles.clear()};a.prototype.has=function(b){return this._tiles.has(b)};a.prototype.get=function(b){return this._tiles.get(b)};a.prototype.findByKey=function(b){return this._tiles.get(b.id)};a.prototype.intersections=
function(b,a){var c="string"===typeof b?this.get(b):b;if(!c)return[];var g=a*c.resolution;a=c.bounds[0]-g;b=c.bounds[1]-g;for(var h=c.bounds[2]+g,c=c.bounds[3]+g,g=[],e=0,m=this._index.search({minX:a,minY:b,maxX:h,maxY:c});e<m.length;e++){var f=m[e],k=f.bounds.slice();k[0]=Math.max(k[0],a);k[1]=Math.max(k[1],b);k[2]=Math.min(k[2],h);k[3]=Math.min(k[3],c);0<k[2]-k[0]&&0<k[3]-k[1]&&g.push({bounds:k,tile:f})}return g};a.prototype.boundsIntersections=function(b){return this._index.search({minX:b[0],minY:b[1],
maxX:b[2],maxY:b[3]})};a.prototype.setViewState=function(b){if(b=this.tileScheme.getTileCoverage(b,0)){var a=b.spans,d=b.lodInfo,g=d.level;if(0<a.length)for(var h=0;h<a.length;h++)for(var e=a[h],f=e.row,m=e.colTo,k=e.colFrom;k<=m;k++){var r=z.set(g,f,d.normalizeCol(k),d.getWorldForColumn(k)).id;n.add(r);this.has(r)||(e=new t.default(this.tileScheme,r),this._tiles.set(r,e),this._index.insert(e),this.tiles.push(e),v.added.push(e))}for(a=this.tiles.length-1;0<=a;a--)e=this.tiles[a],n.has(e.id)||(this._tiles.delete(e.id),
this.tiles.splice(a,1),this._index.remove(e),v.removed.push(e));(v.added.length||v.removed.length)&&this.emit("update",v);l.pool.release(b);n.clear();v.added.length=0;v.removed.length=0}};return a}(r);a.default=w})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],function(w){function a(b,g){if(!(this instanceof a))return new a(b,g);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));g&&("function"===typeof g?this.toBBox=g:this._initFormat(g));
this.clear()}function u(b,a){f(b,0,b.children.length,a,b)}function f(b,a,e,c,d){d||(d=n(null));d.minX=Infinity;d.minY=Infinity;d.maxX=-Infinity;d.maxY=-Infinity;for(var g;a<e;a++)g=b.children[a],r(d,b.leaf?c(g):g);return d}function r(b,a){b.minX=Math.min(b.minX,a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);b.maxY=Math.max(b.maxY,a.maxY);return b}function p(b,a){return b.minX-a.minX}function k(b,a){return b.minY-a.minY}function t(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function l(b){return b.maxX-
b.minX+(b.maxY-b.minY)}function e(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function v(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function n(b){return{children:b,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function z(b,a,e,c,d){for(var g=[a,e],h;g.length;)e=g.pop(),a=g.pop(),e-a<=c||(h=a+Math.ceil((e-a)/c/2)*c,w(b,h,a,e,d),g.push(a,h,h,e))}a.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=
this.data,f=[],c=this.toBBox;if(!v(b,a))return f;for(var d=[],k,h,l,q;a;){k=0;for(h=a.children.length;k<h;k++)l=a.children[k],q=a.leaf?c(l):l,v(b,q)&&(a.leaf?f.push(l):e(b,q)?this._all(l,f):d.push(l));a=d.pop()}return f},collides:function(b){var a=this.data,f=this.toBBox;if(!v(b,a))return!1;for(var c=[],d,k,h,l;a;){d=0;for(k=a.children.length;d<k;d++)if(h=a.children[d],l=a.leaf?f(h):h,v(b,l)){if(a.leaf||e(b,l))return!0;c.push(h)}a=c.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<
this._minEntries){for(var a=0,e=b.length;a<e;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-b.height-1,!0)):this.data=b;return this},insert:function(b){b&&this._insert(b,this.data.height-1);return this},clear:function(){this.data=n([]);return this},remove:function(b,a){if(!b)return this;for(var g=this.data,
c=this.toBBox(b),d=[],f=[],h,k,q,l;g||d.length;){g||(g=d.pop(),k=d[d.length-1],h=f.pop(),l=!0);if(g.leaf){a:{q=b;var v=g.children,n=a;if(n){for(var r=0;r<v.length;r++)if(n(q,v[r])){q=r;break a}q=-1}else q=v.indexOf(q)}if(-1!==q){g.children.splice(q,1);d.push(g);this._condense(d);break}}l||g.leaf||!e(g,c)?k?(h++,g=k.children[h],l=!1):g=null:(d.push(g),f.push(h),h=0,k=g,g=g.children[0])}return this},toBBox:function(b){return b},compareMinX:p,compareMinY:k,toJSON:function(){return this.data},fromJSON:function(b){this.data=
b;return this},_all:function(b,a){for(var g=[];b;)b.leaf?a.push.apply(a,b.children):g.push.apply(g,b.children),b=g.pop();return a},_build:function(b,a,e,c){var d=e-a+1,g=this._maxEntries,h;if(d<=g)return h=n(b.slice(a,e+1)),u(h,this.toBBox),h;c||(c=Math.ceil(Math.log(d)/Math.log(g)),g=Math.ceil(d/Math.pow(g,c-1)));h=n([]);h.leaf=!1;h.height=c;var d=Math.ceil(d/g),g=d*Math.ceil(Math.sqrt(g)),f,m,k;for(z(b,a,e,g,this.compareMinX);a<=e;a+=g)for(m=Math.min(a+g-1,e),z(b,a,m,d,this.compareMinY),f=a;f<=
m;f+=d)k=Math.min(f+d-1,m),h.children.push(this._build(b,f,k,c-1));u(h,this.toBBox);return h},_chooseSubtree:function(b,a,e,c){for(var d,g,h,f,m,k,l,v;;){c.push(a);if(a.leaf||c.length-1===e)break;l=v=Infinity;d=0;for(g=a.children.length;d<g;d++)h=a.children[d],m=t(h),k=(Math.max(h.maxX,b.maxX)-Math.min(h.minX,b.minX))*(Math.max(h.maxY,b.maxY)-Math.min(h.minY,b.minY))-m,k<v?(v=k,l=m<l?m:l,f=h):k===v&&m<l&&(l=m,f=h);a=f||a.children[0]}return a},_insert:function(b,a,e){var c=this.toBBox;e=e?b:c(b);var c=
[],d=this._chooseSubtree(e,this.data,a,c);d.children.push(b);for(r(d,e);0<=a;)if(c[a].children.length>this._maxEntries)this._split(c,a),a--;else break;this._adjustParentBBoxes(e,c,a)},_split:function(b,a){var g=b[a],c=g.children.length,d=this._minEntries;this._chooseSplitAxis(g,d,c);c=this._chooseSplitIndex(g,d,c);c=n(g.children.splice(c,g.children.length-c));c.height=g.height;c.leaf=g.leaf;u(g,this.toBBox);u(c,this.toBBox);a?b[a-1].children.push(c):this._splitRoot(g,c)},_splitRoot:function(b,a){this.data=
n([b,a]);this.data.height=b.height+1;this.data.leaf=!1;u(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,e){var c,d,g,h,k,m,l;k=m=Infinity;for(c=a;c<=e-a;c++)d=f(b,0,c,this.toBBox),g=f(b,c,e,this.toBBox),h=Math.max(0,Math.min(d.maxX,g.maxX)-Math.max(d.minX,g.minX))*Math.max(0,Math.min(d.maxY,g.maxY)-Math.max(d.minY,g.minY)),d=t(d)+t(g),h<k?(k=h,l=c,m=d<m?d:m):h===k&&d<m&&(m=d,l=c);return l},_chooseSplitAxis:function(b,a,e){var c=b.leaf?this.compareMinX:p,d=b.leaf?this.compareMinY:k,g=this._allDistMargin(b,
a,e,c);a=this._allDistMargin(b,a,e,d);g<a&&b.children.sort(c)},_allDistMargin:function(b,a,e,c){b.children.sort(c);c=this.toBBox;var d=f(b,0,a,c),g=f(b,e-a,e,c),h=l(d)+l(g),k,m;for(k=a;k<e-a;k++)m=b.children[k],r(d,b.leaf?c(m):m),h+=l(d);for(k=e-a-1;k>=a;k--)m=b.children[k],r(g,b.leaf?c(m):m),h+=l(g);return h},_adjustParentBBoxes:function(b,a,e){for(;0<=e;e--)r(a[e],b)},_condense:function(b){for(var a=b.length-1,e;0<=a;a--)0===b[a].children.length?0<a?(e=b[a-1].children,e.splice(e.indexOf(b[a]),1)):
this.clear():u(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function w(f,r,p,k,t){for(;k>p;){if(600<k-p){var l=k-p+1,e=r-p+1,v=Math.log(l),n=.5*Math.exp(2*v/3),v=.5*Math.sqrt(v*
n*(l-n)/l)*(0>e-l/2?-1:1);w(f,r,Math.max(p,Math.floor(r-e*n/l+v)),Math.min(k,Math.floor(r+(l-e)*n/l+v)),t)}l=f[r];e=p;n=k;a(f,p,r);for(0<t(f[k],l)&&a(f,p,k);e<n;){a(f,e,n);e++;for(n--;0>t(f[e],l);)e++;for(;0<t(f[n],l);)n--}0===t(f[p],l)?a(f,p,n):(n++,a(f,n,k));n<=r&&(p=n+1);r<=n&&(k=n-1)}}function a(a,r,p){var f=a[r];a[r]=a[p];a[p]=f}function u(a,r){return a<r?-1:a>r?1:0}return function(a,r,p,k,t){w(a,r,p||0,k||a.length-1,t||u)}})},"esri/views/2d/layers/features/support/Tile":function(){define("require exports ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(w,a,u,f,r,p,k){function t(a,e){var f=a.bounds,k=e.bounds;return a.key.id!==e.key.id&&a.key.world===e.key.world&&f[0]<=k[0]&&f[1]<=k[1]&&f[2]>=k[2]&&f[3]>=k[3]}Object.defineProperty(a,"__esModule",{value:!0});a.isParentOf=t;a.isChildOf=function(a,e){return t(e,a)};w=function(){function a(a,f){this.bounds=r.create();this.key=new k(0,0,0,0);this.objectIds=new Set;this.key.set(f);f=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=
f.resolution;this.scale=f.scale;this.level=f.level;this.needsClear=!0}Object.defineProperty(a.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"extent",{get:function(){return f.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transform",{get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],
this.bounds[3]]}},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.tileInfoView,this.id)};a.prototype.createChildTiles=function(){for(var e=this.key.getChildKeys(),f=u.acquire(),k=0;k<e.length;k++)f[k]=new a(this.tileInfoView,e[k]);return f};a.prototype.getQuantizationParameters=function(){return p.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],
spatialReference:this.tileInfoView.tileInfo.spatialReference}})};return a}();a.Tile=w;a.default=w})},"esri/views/2d/layers/graphics/GraphicContainer":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../engine/FeatureContainer".split(" "),function(w,a,u,f,r,p,k){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function k(){return null!==
a&&a.apply(this,arguments)||this}f(k,a);Object.defineProperty(k.prototype,"hasLabels",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"labelsVisible",{get:function(){return!1},enumerable:!0,configurable:!0});k.prototype._renderGraphics=function(a,f){for(var e=0,k=this.children;e<k.length;e++){var b=k[e];b.isReady&&b.hasData&&(b.commitChanges(),a.context.setStencilFunction(514,b.stencilRef,255),b._displayList.replay(a,b,f))}};k.prototype.renderChildren=function(e){var f=
e.painter;this.children.some(function(a){return a.hasData})&&(a.prototype.renderChildren.call(this,e),this._renderGraphics(e),f=f.effects.highlight,f.bind(e),this._renderGraphics(e,f.defines),f.draw(e),f.unbind())};return k}(k.FeatureContainer);a.default=w})},"esri/views/2d/engine/FeatureContainer":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../core/promiseUtils ../../../core/promiseUtils ../../../geometry/support/aaBoundingRect ../engine".split(" "),
function(w,a,u,f,r,p,k,t,l,e){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function n(f,b){f=a.call(this,f,b)||this;f._rendererInfo=new e.WGLRendererInfo;f.attributeView=new e.AttributeStoreView;return f}r(n,a);n.prototype.destroy=function(){this.removeAllChildren();this.children.forEach(function(a){return a.destroy()});this.attributeView.destroy()};n.prototype.whenAttached=function(){var a=this;return this.attached?k.resolve():k.create(function(b){return a.once("attached",function(){return b()})})};
n.prototype.setRendererInfo=function(a,b,e){this._rendererInfo.setInfo(a,b,e);this.requestRender()};n.prototype.getMaterialItems=function(a,b){return f(this,void 0,void 0,function(){var e,f,c,d;return u(this,function(g){switch(g.label){case 0:return a&&0!==a.length?[4,this.whenAttached()]:[2,null];case 1:return g.sent(),e=this.stage.painter.textureManager,f=a.map(function(a){return e.rasterizeItem(a.symbol,a.glyphIds,b)}),[4,t.all(f)];case 2:return c=g.sent(),d=c.map(function(b,c){return{id:a[c].id,
mosaicItem:b}}),[2,d]}})})};n.prototype.onTileData=function(a,b){if(!(b.addOrUpdate&&"tileDisplayData"in b.addOrUpdate)){var g=b.addOrUpdate&&e.TileData.decode(b.addOrUpdate);b=p({},b,{addOrUpdate:g})}a.setData(b,this.hasLabels,this.labelsVisible);this.contains(a)||this.addChild(a);this.requestRender()};n.prototype.onTileError=function(a){a.clear();this.contains(a)||this.addChild(a)};n.prototype.renderChildren=function(e){this._rendererInfo.update(e.state);this.attributeView.bindTextures(this.stage.context);
a.prototype.renderChildren.call(this,e)};n.prototype.createTile=function(a){var b=this._tileInfoView.getTileBounds(l.create(),a);return new e.WGLTile(a,b)};n.prototype.destroyTile=function(a){this.removeChild(a);a.destroy()};n.prototype.attach=function(){this._initializeExtensions();return a.prototype.attach.call(this)};n.prototype.createRenderParams=function(e){return p({},a.prototype.createRenderParams.call(this,e),{rendererInfo:this._rendererInfo,attributeView:this.attributeView})};n.prototype._initializeExtensions=
function(){var a=this.stage.context.capabilities;a.textureFloat;a.vao};return n}(e.TileContainer);a.FeatureContainer=w})},"esri/views/2d/layers/graphics/GraphicProcessingQueue":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/promiseUtils ../../../../core/scheduling ../../../../core/accessorSupport/decorators".split(" "),function(w,a,u,f,r,p,k,t){Object.defineProperty(a,"__esModule",
{value:!0});w=function(a){function e(e){e=a.call(this,e)||this;e._queue=new Map;e._queueArray=[];e._onGoingGraphic=null;e._onGoingPromise=null;e._scheduledNextHandle=null;e._next=e._next.bind(e);e._finalize=e._finalize.bind(e);return e}u(e,a);Object.defineProperty(e.prototype,"length",{get:function(){return this._queueArray.length},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return 0<this._queueArray.length||null!==this._onGoingPromise},enumerable:!0,
configurable:!0});e.prototype.cancel=function(a){this._onGoingGraphic&&this._onGoingGraphic.graphic===a&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null);if(this._queue.has(a)){var e=this._queue.get(a);this._queue.delete(a);a=this._queueArray.indexOf(e);this._queueArray.slice(a,1)}this._scheduleNext();this.notifyChange("updating")};e.prototype.clear=function(){this._queue.clear();this._queueArray.length=0;this._onGoingPromise&&(this._ongoingAbortController.abort(),
this._onGoingGraphic=this._onGoingPromise=null);this._cancelNext();this.notifyChange("updating")};e.prototype.has=function(a){return this._queue.has(a)};e.prototype.isOngoing=function(a){return this._onGoingGraphic&&this._onGoingGraphic.graphic===a};e.prototype.push=function(a,e){this._queue.has(a)||(e={graphic:a,addOrUpdate:e},this._queueArray.push(e),this._queue.set(a,e),this._scheduleNext(),this.notifyChange("updating"))};e.prototype.refresh=function(){this.reset()};e.prototype.reset=function(){var a=
this._onGoingGraphic;a&&this.push(a.graphic,a.addOrUpdate)};e.prototype._finalize=function(){this._onGoingPromise=this._ongoingAbortController=this._onGoingGraphic=null;this.notifyChange("updating");this._scheduleNext()};e.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};e.prototype._scheduleNext=function(){this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingGraphic||(this._scheduledNextHandle=k.schedule(this._next))};
e.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingGraphic)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var a=this._peek(),e=a.graphic,f=a.addOrUpdate,b=p.createAbortController();this._queue.delete(e);this._onGoingGraphic=a;this._onGoingPromise=this.process(e,f,{signal:b.signal});this._ongoingAbortController=b;this._onGoingPromise.then(this._finalize,this._finalize);this.notifyChange("updating")}};e.prototype._peek=function(){return 0===
this._queueArray.length?null:this._queueArray.pop()};f([t.property({readOnly:!0})],e.prototype,"length",null);f([t.property({readOnly:!0})],e.prototype,"updating",null);f([t.property({constructOnly:!0})],e.prototype,"process",void 0);return e=f([t.subclass("esri.views.2d.layers.graphics.GraphicProcessingQueue")],e)}(t.declared(r));a.default=w})},"esri/views/2d/layers/graphics/GraphicStore":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/has ../../../../core/screenUtils ../../../../core/libs/rbush/rbush ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/contains ../../../../geometry/support/extentUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ./GraphicStoreItem ./graphicsUtils".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n,z){function b(a,b,c,e,f){g.minX=b;g.minY=c;g.maxX=e;g.maxY=f;return a.search(g)}Object.defineProperty(a,"__esModule",{value:!0});var g={minX:0,minY:0,maxX:0,maxY:0},m=k.create(),c=[];w=function(){function a(a,b,c,d,e,g){this._graphics=d;this._onAdd=e;this._onRemove=g;this._index=p(9,f("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this._itemByGraphic=new Map;this._currentLevel=
-Infinity;this._tileInfoView=a;this._uidFieldName=c;if(a=a.getClosestInfoForScale(b))this._currentLevel=a.level,this._resolution=this._tileInfoView.getTileResolution(a.level)}a.prototype.hitTest=function(a,c,d,g,f){a=v.normalizeMapX(a,this._tileInfoView.spatialReference);var h=.5*g*d;m[0]=a-h;m[1]=c-h;m[2]=a+h;m[3]=c+h;d=.5*g*(d+50);d=b(this._index,a-d,c-d,a+d,c+d);if(!d||0===d.length)return[];for(var h={x:a,y:c},q=[],n,y=0;y<d.length;y++){var p=d[y];if(p.graphic.visible)switch(e.getJsonType(p.geometry)){case "esriGeometryPoint":n=
p.symbol;if(!n)continue;var x=p.geometry,u=void 0;switch(n.type){case "text":u=z.getTextSymbolBounds(x.x,x.y,n,p.size,this._resolution,f);break;case "cim":u=z.getCIMMarkerBounds(x.x,x.y,n,this._resolution,f);break;default:u=z.getMarkerSymbolBounds(x.x,x.y,n,this._resolution,f)}t.polygonContainsPoint(u,h)&&q.push(p);break;case "esriGeometryPolyline":n=p.symbol;if(!n)continue;n=1.5*g*window.devicePixelRatio*r.pt2px(n.width);z.isPointOnPolyline(p.geometry,a,c,n)&&q.push(p);break;case "esriGeometryEnvelope":n=
p.geometry;n=k.fromValues(n.xmin,n.ymin,n.xmax,n.ymax);k.intersects(n,m)&&q.push(p);break;case "esriGeometryPolygon":if(t.polygonContainsPoint(p.geometry,h)){q.push(p);break}n=l.getPolygonExtent(p.geometry);if(Math.abs(n.ymax-n.ymin)<5*g||Math.abs(n.xmax-n.xmin)<5*g)n=k.fromValues(n.xmin,n.ymin,n.xmax,n.ymax),k.intersects(n,m)&&q.push(p);break;case "esriGeometryMultipoint":if(n=p.symbol)for(var x=p.geometry.points,u=void 0,w=0;w<x.length;w++)if(u="text"===n.type?z.getTextSymbolBounds(x[w][0],x[w][1],
n,p.size,this._resolution,f):z.getMarkerSymbolBounds(x[w][0],x[w][1],n,this._resolution,f),t.polygonContainsPoint(u,h)){q.push(p);break}}}q.sort(function(a,b){var c=z.graphicGeometryToNumber(a.graphic),d=z.graphicGeometryToNumber(b.graphic);return c===d?b.zorder-a.zorder:c-d});return q.map(function(a){return a.graphic})};a.prototype.getGraphicsData=function(a,c,d){var e=b(this._index,c.bounds[0],c.bounds[1],c.bounds[2],c.bounds[3]);if(0===e.length||0===d.length)return[];e.sort(function(a,b){return a.zorder-
b.zorder});e[0].insertAfter=-1;for(var g=1;g<e.length;g++)e[g].insertAfter=e[g-1].graphic.uid;e.sort(function(a,b){return a.graphic.uid-b.graphic.uid});d.sort(function(a,b){return a.uid-b.uid});var h=g=0,f,k=[];c={originPosition:"upperLeft",scale:[c.resolution,c.resolution],translate:[c.bounds[0],c.bounds[3]]};for(var m=0;m<d.length;m++){for(var l=d[m],h=-2;g<e.length;)if(f=e[g],g++,l.uid===f.graphic.uid){h=f.insertAfter;break}if(f.geometry&&-2!==h){var p=f.getGeometryQuantized(c),y=u({},f.graphic.attributes);
y[this._uidFieldName]=l.uid;null==f.groupId&&(f.groupId=a.createTemplateGroup(f.symbol,null,null));k.push({centroid:n.default.getCentroidQuantized(f,c),geometry:p,attributes:y,symbol:f.symbol,groupId:f.groupId,insertAfter:h})}}return k};a.prototype.getGraphicData=function(a,c,d){var e=this._itemByGraphic.get(d);if(!e)return null;var g=b(this._index,c.bounds[0],c.bounds[1],c.bounds[2],c.bounds[3]);g.sort(function(a,b){return a.zorder-b.zorder});var h=g.indexOf(e),g=0===h||-1===h?-1:g[h-1].graphic.uid;
c={originPosition:"upperLeft",scale:[c.resolution,c.resolution],translate:[c.bounds[0],c.bounds[3]]};var h=e.getGeometryQuantized(c),f=u({},e.graphic.attributes);f[this._uidFieldName]=d.uid;null==e.groupId&&(e.groupId=a.createTemplateGroup(e.symbol,null,null));return{centroid:n.default.getCentroidQuantized(e,c),geometry:h,attributes:f,symbol:e.symbol,groupId:e.groupId,insertAfter:g}};a.prototype.queryTileData=function(a,c){var d=k.pad(c.bounds,50*c.resolution,k.create()),d=b(this._index,d[0],d[1],
d[2],d[3]),e=[];this._createTileGraphics(e,a,d,{originPosition:"upperLeft",scale:[c.resolution,c.resolution],translate:[c.bounds[0],c.bounds[3]]});return e};a.prototype.has=function(a){return this._itemByGraphic.has(a)};a.prototype.getBounds=function(a){return this._itemByGraphic.has(a)?this._itemByGraphic.get(a).bounds:null};a.prototype.add=function(a,b,c){if(a)return this._onAdd(a),b=n.default.acquire(a,b,c,this._resolution,this._tileInfoView.spatialReference),this._itemByGraphic.set(a,b),c&&this._index.insert(b),
b.bounds};a.prototype.remove=function(a){if(this._itemByGraphic.has(a)){this._onRemove(a);var b=this._itemByGraphic.get(a);this._index.remove(b);this._itemByGraphic.delete(a)}};a.prototype.updateZ=function(){for(var a=this._graphics.items,b,c=0;c<a.length;c++)if(b=a[c],b=this._itemByGraphic.get(b))b.zorder=c};a.prototype.update=function(a,b,c){var d=this._itemByGraphic.get(a),e=k.clone(d.bounds);d.size[0]=d.size[1]=0;this._index.remove(d);d.set(a,b,c,this._resolution,this._tileInfoView.spatialReference);
c&&this._index.insert(d);return{oldBounds:e,newBounds:d.bounds}};a.prototype.updateLevel=function(a){var b=this;this._currentLevel!==a&&(this._currentLevel=a,this._resolution=this._tileInfoView.getTileResolution(a),this._index.clear(),c.length=0,this._itemByGraphic.forEach(function(a){a.updateBounds(b._resolution,b._tileInfoView.spatialReference);a.geometry&&c.push(a)}),this._index.load(c))};a.prototype.clear=function(){this._itemByGraphic.clear();this._index.clear()};a.prototype._createTileGraphics=
function(a,b,c,d){var e=this._uidFieldName;c.sort(function(a,b){return a.zorder-b.zorder});for(var g,f,h,k,m=0;m<c.length;m++){h=c[m];g=h.graphic;f=h.getGeometryQuantized(d);k=0===m?-1:c[m-1].graphic.uid;var l=u({},h.graphic.attributes);l[e]=g.uid;null==h.groupId&&(h.groupId=b.createTemplateGroup(h.symbol,null,null));a.push({centroid:n.default.getCentroidQuantized(h,d),geometry:f,attributes:l,symbol:h.symbol,groupId:h.groupId,insertAfter:k})}};return a}();a.default=w})},"esri/views/2d/layers/graphics/GraphicStoreItem":function(){define("require exports ../../../../core/maybe ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/jsonUtils ../../../../geometry/support/quantizationUtils ../../../../layers/graphics/featureConversionUtils ../../../../layers/graphics/OptimizedGeometry ./graphicsUtils".split(" "),
function(w,a,u,f,r,p,k,t,l,e){Object.defineProperty(a,"__esModule",{value:!0});var v=new l.default,n=new l.default;w=function(){function a(){this.bounds=f.create();this.graphic=null;this.size=[0,0,0,0]}a.acquire=function(b,e,f,c,d){void 0===b&&(b=null);var g;0===a._pool.length?g=new a:(g=a._pool.pop(),this._set.delete(g));g.acquire(b,e,f,c,d);return g};a.release=function(a){a&&!this._set.has(a)&&(a.release(),this._pool.push(a),this._set.add(a))};a.getCentroidQuantized=function(a,g){if(p.isPolygon(a.geometry)){var b=
a.symbol;if(u.isNone(b))return null;if(e.isMarkerSymbol(b.type))return a=r.polygonCentroid(a.geometry),k.quantizePoint(g,{},{x:a[0],y:a[1]},!1,!1)}return null};a.prototype.acquire=function(a,e,f,c,d){void 0===a&&(a=null);a&&this.set(a,e,f,c,d)};a.prototype.release=function(){this.geometry=this.symbolResource=this.graphic=null};Object.defineProperty(a.prototype,"symbol",{get:function(){return this.symbolResource.symbol},enumerable:!0,configurable:!0});a.prototype.set=function(a,e,f,c,d){this.graphic=
a;this.geometry=f;this.symbolResource=e;this.updateBounds(c,d)};a.prototype.updateBounds=function(a,g){e.getBounds(this.bounds,this.size,this.symbolResource,this.geometry,a,g)};a.prototype.getGeometryQuantized=function(a){if(p.isPolygon(this.geometry)){var b=this.geometry.rings;if(1===b.length&&2===b[0].length)return k.quantizeGeometry(a,{paths:[[b[0][0],b[0][1]]]})}else if(p.isPolyline(this.geometry))return v.coords.length=0,v.lengths.length=0,n.coords.length=0,n.lengths.length=0,t.convertFromPolyline(v,
this.geometry),t.generalizeOptimizedGeometry(n,v,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",a.scale[0]),t.quantizeOptimizedGeometry(v,n,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",a),t.convertToPolyline(v,this.geometry.hasZ,this.geometry.hasM);return k.quantizeGeometry(a,this.geometry)};a._pool=[];a._set=new Set;return a}();a.default=w})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("require exports ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat2d ../../../../core/libs/gl-matrix-2/mat2df32 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/intersects ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/spatialReferenceUtils ../../engine".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n,z,b,g,m,c){function d(a,b,c,d,e){var g,h,m=f.pt2px(c.xoffset),l=f.pt2px(c.yoffset),n=D*c.angle;e*=D;switch(c.type){case "simple-marker":g=h=f.pt2px(c.size);break;case "picture-marker":g=f.pt2px(c.width),h=f.pt2px(c.height)}c=r.mat2d.identity(M);r.mat2d.translate(c,c,k.vec2.set(B,a,b));r.mat2d.rotate(c,c,e-n);r.mat2d.scale(c,c,k.vec2.set(B,d,-d));r.mat2d.translate(c,c,k.vec2.set(B,m,-l));a=[0,0];k.vec2.transformMat2d(a,k.vec2.set(B,-.5*g,-.5*h),c);b=[0,0];k.vec2.transformMat2d(b,
k.vec2.set(B,-.5*g,.5*h),c);d=[0,0];k.vec2.transformMat2d(d,k.vec2.set(B,.5*g,-.5*h),c);m=[0,0];k.vec2.transformMat2d(m,k.vec2.set(B,.5*g,.5*h),c);return{rings:[[a,d,m,b,a]]}}function x(a,b,d,e,g){var h=c.CIMSymbolHelper.getEnvelope(d.data);if(!h)return null;d=f.pt2px(h.width);var m=f.pt2px(h.height),l=f.pt2px(h.x),h=f.pt2px(h.y),n=0*D,q=D*g;g=r.mat2d.identity(M);r.mat2d.translate(g,g,k.vec2.set(B,a,b));r.mat2d.rotate(g,g,q-n);r.mat2d.scale(g,g,k.vec2.set(B,e,e));a=[0,0];k.vec2.transformMat2d(a,k.vec2.set(B,
l,h+m),g);b=[0,0];k.vec2.transformMat2d(b,k.vec2.set(B,l,h),g);e=[0,0];k.vec2.transformMat2d(e,k.vec2.set(B,l+d,h+m),g);m=[0,0];k.vec2.transformMat2d(m,k.vec2.set(B,l+d,h),g);return{rings:[[a,e,m,b,a]]}}function h(a,b,d,e,g,h){var m=c.alignmentUtils.getYAnchorDirection(d.verticalAlignment||"baseline"),l="baseline"===(d.verticalAlignment||"baseline"),n=f.pt2px(d.xoffset),q=f.pt2px(d.yoffset),p=f.pt2px(d.font.size)/24,v=4*p,m=l?25*p:e[1]+(1+m)*e[3]*.5;d=D*d.angle;l=D*h;h=r.mat2d.identity(M);r.mat2d.translate(h,
h,k.vec2.set(B,a,b));r.mat2d.rotate(h,h,l-d);r.mat2d.scale(h,h,k.vec2.set(B,g,-g));r.mat2d.translate(h,h,k.vec2.set(B,n,-q));r.mat2d.translate(h,h,k.vec2.set(B,-v,-v-m));a=[0,0];k.vec2.transformMat2d(a,k.vec2.set(B,e[0],e[1]),h);b=[0,0];k.vec2.transformMat2d(b,k.vec2.set(B,e[0],e[1]+e[3]),h);g=[0,0];k.vec2.transformMat2d(g,k.vec2.set(B,e[0]+e[2],e[1]),h);n=[0,0];k.vec2.transformMat2d(n,k.vec2.set(B,e[0]+e[2],e[1]+e[3]),h);return{rings:[[a,g,n,b,a]]}}function y(a,b,d){if(!d||0===d.glyphMosaicItems.length)return a;
var e=c.bidiText(b.text),g=e[0],e=e[1],h=c.alignmentUtils.getJustification(b.horizontalAlignment||"center"),k=c.alignmentUtils.getXAnchorDirection(b.horizontalAlignment||"center");d=(new c.TextShapingNew([d.glyphMosaicItems],c.definitions.TEXT_MAX_WIDTH,c.definitions.TEXT_LINE_HEIGHT,c.definitions.TEXT_SPACING,[0,.5*-L],.5*(1-k),0,h)).getShaping(g,e);g=c.fontUtils.getFontDecorationTop(b.font.decoration);isNaN(g)||c.TextShapingNew.addDecoration(d,g);d=c.TextShapingNew.getBox(d);b=f.pt2px(b.font.size)/
W;a[0]=b*d.x;a[1]=b*d.y;a[2]=b*d.width;a[3]=b*d.height;return a}function q(a,b){return Math.ceil((a-b)/(2*b))}function H(a,b){var c;c=z.isPolygon(a)?a.rings:a.paths;for(var d=0;d<c.length;d++)for(var e=0,g=c[d];e<g.length;e++)g[e][0]+=b;return a}function E(a,b){if(!b)return a;var c=K(a,b).map(function(a){return a.extent});return 2>c.length?c[0]||a:2<c.length?(a.xmin=b.valid[0],a.xmax=b.valid[1],a):{rings:c.map(function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,
a.ymin]]})}}function K(a,b){var c=[],d=a.ymin,e=a.ymax,g=a.xmax-a.xmin,h=a.xmin,f=a.xmax,k,m=b.valid,l=m[0],n=m[1];k=F(a.xmin,b);var q=k.x,m=k.frameId;k=F(a.xmax,b);b=k.x;a=k.frameId;k=q===b&&0<g;if(g>2*n){g={xmin:h<f?q:b,ymin:d,xmax:n,ymax:e};h={xmin:l,ymin:d,xmax:h<f?b:q,ymax:e};f={xmin:0,ymin:d,xmax:n,ymax:e};d={xmin:l,ymin:d,xmax:0,ymax:e};e=[];l=[];C(g,f)&&e.push(m);C(g,d)&&l.push(m);C(h,f)&&e.push(a);C(h,d)&&l.push(a);for(n=m+1;n<a;n++)e.push(n),l.push(n);c.push({extent:g,frameIds:[m]},{extent:h,
frameIds:[a]},{extent:f,frameIds:e},{extent:d,frameIds:l})}else q>b||k?c.push({extent:{xmin:q,ymin:d,xmax:n,ymax:e},frameIds:[m]},{extent:{xmin:l,ymin:d,xmax:b,ymax:e},frameIds:[a]}):c.push({extent:{xmin:q,ymin:d,xmax:b,ymax:e},frameIds:[m]});return c}function F(a,b){var c=b.valid;b=c[0];var d=c[1],c=2*d,e=0;a>d?(b=Math.ceil(Math.abs(a-d)/c),a-=b*c,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,e=-b);return{x:a,frameId:e}}function C(a,b){var c=b.xmin,d=b.ymin,e=b.xmax;b=b.ymax;return G(a,c,d)&&G(a,
c,b)&&G(a,e,b)&&G(a,e,d)}function G(a,b,c){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?!0:!1}function I(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=q(d,b);a[0]=d+-2*e*b}else d<c&&(e=q(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=q(d,b),a.x+=-2*e*b):d<c&&(e=q(d,c),a.x+=-2*e*c);return a}Object.defineProperty(a,"__esModule",{value:!0});var D=Math.PI/180,A=c.definitions.TEXT_MAX_WIDTH,L=c.definitions.TEXT_LINE_HEIGHT,P=c.definitions.TEXT_SPACING,M=p.mat2df32.create(),B=t.vec2f32.create(),J=e.create();
a.getBounds=function(a,e,g,f,k,l){if(!f||!g.symbol)return a[0]=a[1]=a[2]=a[3]=0,e[0]=e[1]=e[2]=e[3]=0,a;if(z.isPoint(f)){var n=f.x;f=f.y;"text"===g.symbol.type&&0===e[2]&&0===e[3]&&y(e,g.symbol,g.mosaicItem);g=g.symbol;var q;switch(g.type){case "simple-marker":case "picture-marker":q=d(n,f,g,k,0);break;case "text":q=h(n,f,g,e,k,0);break;case "cim":case "expanded-cim":q=x(n,f,g,k,0)}for(k=e=0;k<q.rings[0].length-1;k++)g=q.rings[0][k],g=(n-g[0])*(n-g[0])+(f-g[1])*(f-g[1]),e=Math.max(e,g);e=Math.sqrt(e);
k=b.normalizeMapX(n-e,l);n=b.normalizeMapX(n+e,l);k>n&&(l=m.getInfo(l))&&(k=l.valid,l=k[1],k=k[0],n=l);a[0]=k;a[1]=f-e;a[2]=n;a[3]=f+e}else{v.getBoundsXY(a,f);f=e[0];if(0===f){a:switch(f=0,g.symbol.type){case "simple-fill":case "picture-fill":f=g.symbol.outline;if(!f){f=0;break a}f=f.width;break;case "simple-line":f=g.symbol.width;break;case "simple-marker":f=g.symbol.size;break;case "picture-marker":f=Math.max(g.symbol.width,g.symbol.height);break;case "text":f=[0,0,0,0];y(f,g.symbol,g.mosaicItem);
f=Math.max(f[0],f[1]);break;case "cim":case "expanded-cim":f=c.CIMSymbolHelper.getEnvelope(g.symbol.data),f=Math.sqrt(f.width*f.width+f.height*f.height)}e[0]=f}f=k*f/2;a[0]-=f;a[1]-=f;a[2]+=f;a[3]+=f}return a};a.isMarkerSymbol=function(a){return"simple-marker"===a||"picture-marker"===a||"text"===a};a.graphicGeometryToNumber=function(a){switch(u.expect(a.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};var Q=t.vec2f32.create(),T=t.vec2f32.create(),U=t.vec2f32.create(),
N=t.vec2f32.create(),R=t.vec2f32.create(),V=t.vec2f32.create(),S=t.vec2f32.create();a.isPointOnPolyline=function(a,b,c,d){k.vec2.set(U,b,c);a=a.paths;for(var e,g,f,h,m,l,n,q,p=Infinity,r=0;r<a.length;r++){var v=a[r];if(!(2>v.length))for(var t=1;t<v.length;t++)e=v[t-1][0],f=v[t-1][1],g=v[t][0],h=v[t][1],m=Math.min(e,g)-d,l=Math.min(f,h)-d,n=Math.max(e,g)+d,q=Math.max(f,h)+d,b<m||b>n||c<l||c>q||(k.vec2.set(Q,e,f),k.vec2.set(T,g,h),k.vec2.subtract(N,T,Q),k.vec2.subtract(R,Q,U),k.vec2.scale(V,N,k.vec2.dot(N,
R)/k.vec2.dot(N,N)),k.vec2.subtract(S,R,V),e=k.vec2.dot(S,S),p>e&&(p=e))}return Math.sqrt(p)<=d};a.getMarkerSymbolBounds=d;a.getCIMMarkerBounds=x;a.getTextSymbolBounds=h;a.normalizeCentralMeridian=function(a){var b,c,d,e,f,h=null;if(!a)return null;b=a.spatialReference;c=g.getInfo(b);f=b.isWebMercator?102100:4326;d=O[f].maxX;e=O[f].minX;b=O[f].plus180Line;f=O[f].minus180Line;var k,m=a.toJSON();if(!c)return m;"mesh"===a.type?k=m:z.isPoint(m)?k=I(m,d,e):z.isMultipoint(m)?(m.points=m.points.map(function(a){return I(a,
d,e)}),k=m):z.isExtent(m)?k=E(m,c):z.isPolygon(m)||z.isPolyline(m)?(v.getBoundsXY(J,m),a={xmin:J[0],ymin:J[1],xmax:J[2],ymax:J[3]},c=2*q(a.xmin,e)*d,m=0===c?m:H(m,c),a.xmin+=c,a.xmax+=c,n.extentIntersectsPolyline(a,b)&&a.xmax!==d?h=m:n.extentIntersectsPolyline(a,f)&&a.xmin!==e?h=m:k=m):k=a.clone();return null!==h?(new X).cut(h,d):k};var W=24;a.getTextSymbolSize=y;a.getTextSymbolEstimatedSize=function(a,b,d){var e=c.bidiText(b.text),g=e[0],e=e[1],h=c.alignmentUtils.getJustification(b.horizontalAlignment||
"center"),k=c.alignmentUtils.getXAnchorDirection(b.horizontalAlignment||"center");d=(new c.TextShapingNew([],A,L,P,[0,.5*-L],.5*(1-k),0,h)).getEstimatedShaping(g,e,d);d=c.TextShapingNew.getBox(d);b=f.pt2px(b.font.size)/W;a[0]=b*d.x;a[1]=b*d.y;a[2]=b*d.width;a[3]=b*d.height;return a};var O={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:{paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:l.WebMercator},minus180Line:{paths:[[[-2.0037508342788905E7,
-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:l.WebMercator}},4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:l.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:l.WGS84}}},X=function(){function a(){}a.prototype.cut=function(a,b){var c;if(a.rings)this.closed=!0,c=a.rings,this.minPts=4;else if(a.paths)this.closed=!1,c=a.paths,this.minPts=2;else return null;var d=c.length;b*=-2;for(var e=0;e<d;e++){var g=
c[e];if(g&&g.length>=this.minPts){for(var f=[],h=0;h<g.length;h++){var k=g[h];f.push([k[0]+b,k[1]])}c.push(f)}}this.closed?a.rings=c:a.paths=c;return a};return a}()})},"esri/views/layers/GraphicsView":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(w,a,u,f,r){Object.defineProperty(a,"__esModule",{value:!0});a.GraphicsView=function(a){return function(a){function k(){var f=null!==
a&&a.apply(this,arguments)||this;f.graphics=null;f.renderer=null;f.view=null;return f}u(k,a);f([r.property()],k.prototype,"graphics",void 0);f([r.property()],k.prototype,"renderer",void 0);f([r.property()],k.prototype,"updating",void 0);f([r.property()],k.prototype,"view",void 0);return k=f([r.subclass("esri.views.layers.GraphicsView")],k)}(r.declared(a))}})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Viewpoint ../../../core/Accessor ../../../core/now ../../../core/accessorSupport/decorators ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n,z,b,g,m){Object.defineProperty(a,"__esModule",{value:!0});var c=new k({targetGeometry:new v}),d=[0,0];w=function(a){function h(b){b=a.call(this,b)||this;b._endTimer=null;b.animationManager=null;return b}u(h,a);h.prototype.initialize=function(){this.pan=new b({navigation:this});this.rotate=new m({navigation:this});this.pinch=new g({navigation:this});this.zoomBox=new z({view:this.view,navigation:this})};h.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=
this.zoomBox=null};h.prototype.begin=function(){this._set("interacting",!0)};h.prototype.end=function(){this._lastEventTimestamp=l();this._startTimer(250)};h.prototype.zoom=function(a,b){void 0===b&&(b=this._getDefaultAnchor());return p(this,void 0,void 0,function(){return r(this,function(c){this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?[2,this.zoomIn(b)]:[2,this.zoomOut(b)];this.setViewpoint(b,a,0,[0,0]);return[2]})})};h.prototype.zoomIn=
function(a){return p(this,void 0,void 0,function(){var b,c;return r(this,function(d){b=this.view;c=b.constraints.snapToNextScale(b.scale);return[2,this._zoomToScale(c,a)]})})};h.prototype.zoomOut=function(a){return p(this,void 0,void 0,function(){var b,c;return r(this,function(d){b=this.view;c=b.constraints.snapToPreviousScale(b.scale);return[2,this._zoomToScale(c,a)]})})};h.prototype.setViewpoint=function(a,b,c,d){this.begin();this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,
a,b,c,d);this.end()};h.prototype.setViewpointImmediate=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=[0,0]);void 0===d&&(d=this._getDefaultAnchor());this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,d,a,b,c)};h.prototype.continousRotateClockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.rotateBy(a,a,-1)})};h.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){n.rotateBy(a,a,1)})};h.prototype.resetRotation=function(){this.view.rotation=0};h.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.translateBy(a,a,[-10,0])})};h.prototype.continousPanRight=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.translateBy(a,a,[10,0])})};h.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){n.translateBy(a,a,[0,10])})};h.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){n.translateBy(a,a,[0,-10])})};h.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();this.end();null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))};h.prototype._startTimer=function(a){var b=this;return null!==this._endTimer?this._endTimer:this._endTimer=
setTimeout(function(){b._endTimer=null;var a=l()-b._lastEventTimestamp;250>a?b._endTimer=b._startTimer(a):b._set("interacting",!1)},a)};h.prototype._getDefaultAnchor=function(){var a=this.view,b=a.size,a=a.padding,c=a.top,e=a.bottom;d[0]=.5*(b[0]-a.right+a.left);d[1]=.5*(b[1]-e+c);return d};h.prototype._zoomToScale=function(a,b){void 0===b&&(b=this._getDefaultAnchor());return p(this,void 0,void 0,function(){var d,e,g,f,h,k,m,l;return r(this,function(q){d=this.view;e=d.constraints;g=d.scale;f=d.viewpoint;
h=d.size;k=d.padding;m=e.canZoomInTo(a);l=e.canZoomOutTo(a);return a<g&&!m||a>g&&!l?[2]:[2,d.goTo(n.padAndScaleAndRotateBy(c,f,a/g,0,b,h,k),{animate:!0})]})})};h.prototype._scaleRotateTranslateViewpoint=function(a,b,c,d,e){var g=this.view,f=g.size,h=g.padding,k=g.constraints,m=g.viewpoint,l=g.scale*c,g=k.canZoomInTo(l),k=k.canZoomOutTo(l);if(1>c&&!g||1<c&&!k)c=1;n.translateBy(m,m,e);return n.padAndScaleAndRotateBy(a,m,c,d,b,f,h)};f([e.property()],h.prototype,"animationManager",void 0);f([e.property({type:Boolean,
readOnly:!0})],h.prototype,"interacting",void 0);f([e.property()],h.prototype,"pan",void 0);f([e.property()],h.prototype,"pinch",void 0);f([e.property()],h.prototype,"rotate",void 0);f([e.property()],h.prototype,"view",void 0);f([e.property()],h.prototype,"zoomBox",void 0);return h=f([e.subclass("esri.views.2d.navigation.MapViewNavigation")],h)}(e.declared(t));a.default=w})},"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),
function(w,a,u,f,r,p,k){return function(a){function l(e){e=a.call(this,e)||this;e._container=null;e._overlay=null;e._backgroundShape=null;e._boxShape=null;e._box={x:0,y:0,width:0,height:0};e._redraw=e._redraw.bind(e);return e}u(l,a);l.prototype.destroy=function(){this.view=null};Object.defineProperty(l.prototype,"view",{set:function(a){var e=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return e._handleDrag(a,
1)}),a.on("drag",["Shift","Ctrl"],function(a){return e._handleDrag(a,-1)}))},enumerable:!0,configurable:!0});l.prototype._start=function(){this._createContainer();this._createOverlay();this.navigation.begin()};l.prototype._update=function(a,f,k,l){this._box.x=a;this._box.y=f;this._box.width=k;this._box.height=l;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};l.prototype._end=function(a,f,k,l,b){var e=this.view;a=e.toMap(p.createScreenPoint(a+.5*k,f+.5*l));k=Math.max(k/e.width,l/e.height);
-1===b&&(k=1/k);this._destroyOverlay();this.navigation.end();e.goTo({center:a,scale:e.scale*k})};l.prototype._updateBox=function(a,f,k,l){var b=this._boxShape;b.setAttributeNS(null,"x",""+a);b.setAttributeNS(null,"y",""+f);b.setAttributeNS(null,"width",""+k);b.setAttributeNS(null,"height",""+l);b.setAttributeNS(null,"class","esri-zoom-box__outline")};l.prototype._updateBackground=function(a,f,k,l){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,f,k,l,this.view.width,this.view.height))};
l.prototype._createContainer=function(){var a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a};l.prototype._createOverlay=function(){var a=this.view.width,f=this.view.height,k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+f+" L 0 "+f+" Z");k.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg",
"rect");f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");f.setAttributeNS(null,"class","esri-zoom-box__overlay");f.appendChild(k);f.appendChild(a);this._container.appendChild(f);this._backgroundShape=k;this._boxShape=a;this._overlay=f};l.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=
this._backgroundShape=this._boxShape=this._overlay=null};l.prototype._toSVGPath=function(a,f,k,l,b,g){k=a+k;l=f+l;return"M 0 0 L "+b+" 0 L "+b+" "+g+" L 0 "+g+" ZM "+a+" "+f+" L "+a+" "+l+" L "+k+" "+l+" L "+k+" "+f+" Z"};l.prototype._handleDrag=function(a,f){var e=a.x,k=a.y,b=a.origin.x,g=a.origin.y,m;e>b?(m=b,b=e-b):(m=e,b-=e);k>g?(e=g,k-=g):(e=k,k=g-k);switch(a.action){case "start":this._start();break;case "update":this._update(m,e,b,k);break;case "end":this._end(m,e,b,k,f)}a.stopPropagation()};
l.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=this._box,f=a.x,k=a.y,l=a.width,a=a.height;this._updateBox(f,k,l,a);this._updateBackground(f,k,l,a);this._rafId=requestAnimationFrame(this._redraw)}};f([k.property()],l.prototype,"navigation",void 0);f([k.property()],l.prototype,"view",null);return l=f([k.subclass("esri.views.2d.navigation.ZoomBox")],l)}(k.declared(r))})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../viewpointUtils ../../../navigation/PanPlanarMomentumEstimator".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n,z){return function(a){function b(b){var c=a.call(this,b)||this;c.animationTime=0;c.momentumEstimator=new z.PanPlanarMomentumEstimator(500,6,.92);c.momentum=null;c.tmpMomentum=v.vec3f64.create();c.momentumFinished=!1;c.viewpoint=new p({targetGeometry:new r.Point,scale:0,rotation:0});c.watch("momentumFinished",function(a){a&&c.navigation.stop()});return c}u(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b);
this.previousDrag=b};b.prototype.update=function(a,b){this.addToEstimator(b);var c=b.center.x,e=b.center.y,g=this.previousDrag,c=g?g.center.x-c:-c,e=g?e-g.center.y:e;a.viewpoint=n.translateBy(this.viewpoint,a.viewpoint,[c||0,e||0]);this.previousDrag=b};b.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=a.navigation.momentumEnabled?this.momentumEstimator.evaluateMomentum():null;this.animationTime=0;if(this.momentum)this.onAnimationUpdate(a);this.previousDrag=null;this.navigation.end()};
b.prototype.addToEstimator=function(a){var b=a.center.x,d=a.center.y,e=t.createScreenPointArray(-b,d),b=v.vec3f64.fromValues(-b,d,0);this.momentumEstimator.add(e,b,.001*a.timestamp)};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,g){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);g*=.001;if(!b.momentumFinished){var d=b.momentum.valueDelta(b.animationTime,g);e.vec3.scale(b.tmpMomentum,b.momentum.direction,
d);a.viewpoint=n.translateBy(c,c,b.tmpMomentum)}b.animationTime+=g})};b.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};f([l.property()],b.prototype,"momentumFinished",void 0);f([l.property()],b.prototype,"viewpoint",void 0);f([l.property()],b.prototype,"navigation",void 0);return b=f([l.subclass("esri.views.2d.navigation.actions.Pan")],b)}(l.declared(k))})},"esri/views/navigation/PanPlanarMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ./FilteredFiniteDifference ./Momentum".split(" "),
function(w,a,u,f,r,p,k){Object.defineProperty(a,"__esModule",{value:!0});var t=function(a){function e(e,f,k,b,g){e=a.call(this,e,f,k)||this;e.sceneVelocity=b;e.direction=g;return e}u(e,a);e.prototype.value=function(e){return a.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,e)};return e}(k.Momentum);a.PanPlanarMomentum=t;w=function(){function a(a,f,k){void 0===a&&(a=300);void 0===f&&(f=12);void 0===k&&(k=.84);this.minimumInitialVelocity=a;this.stopVelocity=f;this.friction=k;this.enabled=
!0;this.time=new p.FilteredFiniteDifference(.6);this.screen=[new p.FilteredFiniteDifference(.4),new p.FilteredFiniteDifference(.4)];this.scene=[new p.FilteredFiniteDifference(.6),new p.FilteredFiniteDifference(.6),new p.FilteredFiniteDifference(.6)];this.tmpDirection=r.vec3f64.create()}a.prototype.add=function(a,f,k){!this.enabled||this.time.hasLastValue&&.015>this.time.computeDelta(k)||(this.screen[0].update(a[0]),this.screen[1].update(a[1]),this.scene[0].update(f[0]),this.scene[1].update(f[1]),
this.scene[2].update(f[2]),this.time.update(k))};a.prototype.reset=function(){this.screen[0].reset();this.screen[1].reset();this.scene[0].reset();this.scene[1].reset();this.scene[2].reset();this.time.reset()};a.prototype.evaluateMomentum=function(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;var a=this.screen[0].filteredDelta,f=this.screen[1].filteredDelta,a=Math.sqrt(a*a+f*f)/this.time.filteredDelta;return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,
this.friction)};a.prototype.createMomentum=function(a,k,l){f.vec3.set(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);var e=f.vec3.length(this.tmpDirection);0<e&&f.vec3.scale(this.tmpDirection,this.tmpDirection,1/e);return new t(a,k,l,e/this.time.filteredDelta,this.tmpDirection)};return a}();a.PanPlanarMomentumEstimator=w})},"esri/views/navigation/FilteredFiniteDifference":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,
"__esModule",{value:!0});w=function(){function a(a){this.gain=a}a.prototype.update=function(a){if(this.hasLastValue){var f=this.computeDelta(a);this.updateDelta(f)}this.lastValue=a};a.prototype.reset=function(){this.filteredDelta=this.lastValue=void 0};Object.defineProperty(a.prototype,"hasLastValue",{get:function(){return void 0!==this.lastValue},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasFilteredDelta",{get:function(){return void 0!==this.filteredDelta},enumerable:!0,
configurable:!0});a.prototype.computeDelta=function(a){return a-this.lastValue};a.prototype.updateDelta=function(a){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*a:a};return a}();a.FilteredFiniteDifference=w})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(w,a,u){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,f,k){this._initialVelocity=a;this._stopVelocity=f;this._friction=
k;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0});a.prototype.isFinished=function(a){return a>this.duration};Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});a.prototype.value=function(a){return this.valueFromInitialVelocity(this._initialVelocity,a)};a.prototype.valueDelta=
function(a,f){var k=this.value(a);return this.value(a+f)-k};a.prototype.valueFromInitialVelocity=function(a,f){f=Math.min(f,this.duration);var k=1-this.friction;return a*(Math.pow(k,f)-1)/Math.log(k)};return a}();a.Momentum=w})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../viewpointUtils ../../../navigation/RotationMomentumEstimator ../../../navigation/ZoomMomentumEstimator".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v,n,z){return function(a){function b(b){var c=a.call(this,b)||this;c._animationTime=0;c._momentumFinished=!1;c._rotationMomentumEstimator=new n.RotationMomentumEstimator(.6,.15,.95);c._rotationDirection=1;c._zoomDirection=1;c._zoomMomentumEstimator=new z.ZoomMomentumEstimator;c._zoomOnly=null;c.zoomMomentum=null;c.rotateMomentum=null;c.viewpoint=new p({targetGeometry:new r.Point,scale:0,rotation:0});c.watch("_momentumFinished",function(a){a&&c.navigation.stop()});return c}
u(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this._rotationMomentumEstimator.reset();this._zoomMomentumEstimator.reset();this._zoomOnly=null;this._previousAngle=this._startAngle=b.angle;this._previousRadius=this._startRadius=b.radius;this._previousCenter=b.center;this._updateTimestamp=null;a.constraints.rotationEnabled&&this.addToRotateEstimator(0,b.timestamp);this.addToZoomEstimator(b,1)};b.prototype.update=function(a,b){null===this._updateTimestamp&&(this._updateTimestamp=b.timestamp);
var c=b.angle,e=b.radius,g=b.center,f=Math.abs(180*(c-this._startAngle)/Math.PI),k=Math.abs(e-this._startRadius),m=this._startRadius/e;if(this._previousRadius){var l=e/this._previousRadius,n=180*(c-this._previousAngle)/Math.PI;this._rotationDirection=0<=n?1:-1;this._zoomDirection=1<=l?1:-1;a.constraints.rotationEnabled?(null===this._zoomOnly&&200<b.timestamp-this._updateTimestamp&&(this._zoomOnly=0<k-f),null===this._zoomOnly||this._zoomOnly?n=0:this.addToRotateEstimator(c-this._startAngle,b.timestamp)):
n=0;this.addToZoomEstimator(b,m);this.navigation.setViewpoint([g.x,g.y],1/l,n,[this._previousCenter.x-g.x,g.y-this._previousCenter.y])}this._previousAngle=c;this._previousRadius=e;this._previousCenter=g};b.prototype.end=function(a){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum();this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum();this._animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(a);this.navigation.end()};b.prototype.addToRotateEstimator=
function(a,b){this._rotationMomentumEstimator.add(a,.001*b)};b.prototype.addToZoomEstimator=function(a,b){this._zoomMomentumEstimator.add(b,.001*a.timestamp)};b.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a};b.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||b<a};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,g){var d=!b.canZoomIn(a)&&
1<b._zoomDirection||!b.canZoomOut(a)&&1>b._zoomDirection,f=!b.rotateMomentum||b.rotateMomentum.isFinished(b._animationTime),d=d||!b.zoomMomentum||b.zoomMomentum.isFinished(b._animationTime);g*=.001;b._momentumFinished=f&&d;if(!b._momentumFinished){var f=b.rotateMomentum?Math.abs(b.rotateMomentum.valueDelta(b._animationTime,g))*b._rotationDirection*180/Math.PI:0,d=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b._animationTime,g)):1,k=e.vec2f64.create(),m=e.vec2f64.create();if(b._previousCenter){l.vec2.set(k,
b._previousCenter.x,b._previousCenter.y);v.getPaddingScreenTranslation(m,a.size,a.padding);l.vec2.add(k,k,m);var m=a.constraints,n=a.scale,p=n*d;1>d&&!m.canZoomInTo(p)?(d=n/m.effectiveMaxScale,b.zoomMomentum=null,b.rotateMomentum=null):1<d&&!m.canZoomOutTo(p)&&(d=n/m.effectiveMinScale,b.zoomMomentum=null,b.rotateMomentum=null);v.scaleAndRotateBy(c,a.viewpoint,d,f,k,a.size)}}b._animationTime+=g})};b.prototype.stopMomentumNavigation=function(){if(this.rotateMomentum||this.zoomMomentum)this.rotateMomentum&&
(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};f([t.property()],b.prototype,"_momentumFinished",void 0);f([t.property()],b.prototype,"viewpoint",void 0);f([t.property()],b.prototype,"navigation",void 0);return b=f([t.subclass("esri.views.2d.navigation.actions.Pinch")],b)}(t.declared(k))})},"esri/views/navigation/RotationMomentumEstimator":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","./MomentumEstimator"],function(w,a,u,f){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function f(f,p,l,e){void 0===f&&(f=3);void 0===p&&(p=.01);void 0===l&&(l=.95);void 0===e&&(e=12);return a.call(this,f,p,l,e)||this}u(f,a);f.prototype.add=function(f,p){if(this.value.hasLastValue){var k=this.value.lastValue;for(f-=k;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;f=k+f}a.prototype.add.call(this,f,p)};return f}(f.MomentumEstimator);a.RotationMomentumEstimator=
w})},"esri/views/navigation/MomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/mathUtils ./FilteredFiniteDifference ./Momentum".split(" "),function(w,a,u,f,r,p){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,f,e,k){void 0===a&&(a=2.5);void 0===f&&(f=.01);void 0===e&&(e=.95);void 0===k&&(k=12);this.minimumInitialVelocity=a;this.stopVelocity=f;this.friction=e;this.maxVelocity=k;this.enabled=!0;this.value=new r.FilteredFiniteDifference(.8);
this.time=new r.FilteredFiniteDifference(.3)}a.prototype.add=function(a,f){if(this.enabled){if(this.time.hasLastValue){if(.01>this.time.computeDelta(f))return;if(this.value.hasFilteredDelta){var e=this.value.computeDelta(a);0>this.value.filteredDelta*e&&this.value.reset()}}this.time.update(f);this.value.update(a)}};a.prototype.reset=function(){this.value.reset();this.time.reset()};a.prototype.evaluateMomentum=function(){if(!this.enabled||!this.value.hasFilteredDelta)return null;var a=this.value.filteredDelta/
this.time.filteredDelta,a=f.clamp(a,-this.maxVelocity,this.maxVelocity);return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,this.friction)};a.prototype.createMomentum=function(a,f,e){return new p.Momentum(a,f,e)};return a}();a.MomentumEstimator=w})},"esri/views/navigation/ZoomMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./Momentum","./MomentumEstimator"],function(w,a,u,f,r){Object.defineProperty(a,"__esModule",
{value:!0});var p=function(a){function f(f,e,k){return a.call(this,f,e,k)||this}u(f,a);f.prototype.value=function(f){f=a.prototype.value.call(this,f);return Math.exp(f)};f.prototype.valueDelta=function(f,e){var k=a.prototype.value.call(this,f);f=a.prototype.value.call(this,f+e);return Math.exp(f-k)};return f}(f.Momentum);a.ZoomMomentum=p;w=function(a){function f(f,e,k,n){void 0===f&&(f=2.5);void 0===e&&(e=.01);void 0===k&&(k=.95);void 0===n&&(n=12);return a.call(this,f,e,k,n)||this}u(f,a);f.prototype.add=
function(f,e){a.prototype.add.call(this,Math.log(f),e)};f.prototype.createMomentum=function(a,e,f){return new p(a,e,f)};return f}(r.MomentumEstimator);a.ZoomMomentumEstimator=w})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../viewpointUtils".split(" "),
function(w,a,u,f,r,p,k,t,l,e,v){var n=e.vec2f64.create(),z=e.vec2f64.create();return function(a){function b(b){b=a.call(this,b)||this;b._previousCenter=e.vec2f64.create();b.viewpoint=new p({targetGeometry:new r.Point,scale:0,rotation:0});return b}u(b,a);b.prototype.begin=function(a,b){this.navigation.begin();l.vec2.set(this._previousCenter,b.center.x,b.center.y)};b.prototype.update=function(a,b){var c=a.state,e=c.size,c=c.padding;l.vec2.set(n,b.center.x,b.center.y);v.getAnchor(z,e,c);a.viewpoint=
v.rotateBy(this.viewpoint,a.content.viewpoint,v.angleBetween(z,this._previousCenter,n));l.vec2.copy(this._previousCenter,n)};b.prototype.end=function(){this.navigation.end()};f([t.property()],b.prototype,"viewpoint",void 0);f([t.property()],b.prototype,"navigation",void 0);return b=f([t.subclass("esri.views.2d.actions.Rotate")],b)}(t.declared(k))})},"esri/views/2d/magnifier/MagnifierView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../request ../../../core/promiseUtils ../../webgl ../engine".split(" "),
function(w,a,u,f,r,p,k,t,l){Object.defineProperty(a,"__esModule",{value:!0});var e=l.enums.WGLDrawPhase,v=function(a){function n(){var b=a.call(this)||this;b.visible=!1;return b}u(n,a);n.prototype.destroy=function(){this._readbackTexture&&(this._readbackTexture.dispose(),this._readbackTexture=null,this._maskTexture.dispose(),this._maskTexture=null,this._overlayTexture.dispose(),this._overlayTexture=null,this._vertexArrayObject.dispose(),this._vertexArrayObject=null,this._program.dispose(),this._resourcesPromise=
this._program=null)};Object.defineProperty(n.prototype,"magnifier",{get:function(){return this._magnifier},set:function(a){var b=this;this._magnifier=a;this._handle&&this._handle.remove();this._handle=a.watch("version",function(){b.visible=a.visible});this.visible=a.visible},enumerable:!0,configurable:!0});n.prototype.doRender=function(a){var b=this.stage.context;if(!this._resourcesPromise)this._resourcesPromise=this._loadResources(w.toUrl("../../../images/magnifier/mask.png"),w.toUrl("../../../images/magnifier/overlay.png"));
else if(a.drawPhase===e.MAP&&this._canRender()){this._updateResources(b);var f=this._magnifier,c=1/f.factor,d=Math.ceil(c*this.overlay.width),k=Math.ceil(c*this.overlay.height),h=a.state.size,l=a.pixelRatio,c=l*h[0];a=l*h[1];var n=f.position||{x:.5*h[0],y:.5*h[1]},h=l*n.x,l=a-l*n.y,n=.5*d,p=.5*k;n>h?h=n:h>=c-n&&(h=c-n-1);p>l?l=p:l>=a-p&&(l=a-p-1);var n=h-n,p=l-p,r=this._readbackTexture;b.bindTexture(r,0);b.gl.copyTexImage2D(r.descriptor.target,0,r.descriptor.pixelFormat,n,p,d,k,0);d=(d=this.stage.background&&
this.stage.background.color)?[d.a*d.r/255,d.a*d.g/255,d.a*d.b/255,d.a]:[1,1,1,1];k=-1+(h+f.offsetX)/c*2;f=-1+(l-f.offsetY)/a*2;c=this.overlay.width/c*2;a=this.overlay.height/a*2;h=this._program;b.bindVAO(this._vertexArrayObject);b.bindTexture(this._overlayTexture,6);b.bindTexture(this._maskTexture,7);b.bindProgram(h);h.setUniform4fv("u_background",d);h.setUniform1i("u_readbackTexture",0);h.setUniform1i("u_overlyTexture",6);h.setUniform1i("u_maskTexture",7);h.setUniform2f("u_drawPos",k,f);h.setUniform1f("u_width",
c);h.setUniform1f("u_height",a);b.setStencilTestEnabled(!1);b.drawArrays(5,0,4);b.bindVAO()}};n.prototype._canRender=function(){return this.mask&&this.overlay&&null!=this._magnifier};n.prototype._loadResources=function(a,e){return f(this,void 0,void 0,function(){var b,c,d;return r(this,function(f){switch(f.label){case 0:return[4,k.all([p(a,{responseType:"image"}),p(e,{responseType:"image"})])];case 1:return b=f.sent(),c=b[0].data,d=b[1].data,this.mask=c,this.overlay=d,this.requestRender(),[2]}})})};
n.prototype._updateResources=function(a){if(!this._readbackTexture){var b=1/this._magnifier.factor,e=Math.ceil(b*this.overlay.width),b=Math.ceil(b*this.overlay.height);this._program=l.createMagnifierProgram(a);var c=new Uint16Array([0,1,0,0,1,1,1,0]);this._vertexArrayObject=new t.VertexArrayObject(a,l.magnifier.attributes,{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:t.BufferObject.createVertex(a,35044,c)});this._overlayTexture=new t.Texture(a,{target:3553,
pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.overlay);this._maskTexture=new t.Texture(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.mask);this._readbackTexture=new t.Texture(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:e,height:b})}};return n}(l.DisplayObject);a.default=v})},"*noref":1}});
define("require exports ./LabelManager ./layers/graphics/GraphicsView2D ./navigation/MapViewNavigation ./magnifier/MagnifierView2D".split(" "),function(w,a,u,f,r,p){Object.defineProperty(a,"__esModule",{value:!0});a.LabelManager=u.default;a.GraphicsView2D=f.default;a.MapViewNavigation=r.default;a.MagnifierView2D=p.default});