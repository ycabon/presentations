// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/maybe ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/vec3 ../../../core/libs/gl-matrix-2/vec4f64 ../../../layers/graphics/dehydratedFeatures ../layers/graphics/graphicUtils ../support/stack ../webgl-engine/lib/Geometry ../webgl-engine/lib/GeometryUtil ../webgl-engine/materials/ColorMaterial ../webgl-engine/materials/ShadedColorMaterial ../../interactive/Manipulator3D".split(" "),function(y,e,h,p,g,k,q,r,f,t,u,v,w,x){function l(a,b){void 0===
b&&(b=4);var c=k.vec4f64.fromValues(a[0],a[1],a[2],3<a.length?a[3]:1);a=new w.ShadedColorMaterial({color:c,transparent:1>a[3],writeDepth:!0,cullFace:2},"manipulator");a.renderOccluded=b;return a}function m(a,b,c,d){a=g.vec3.normalize(f.sv3d.get(),a);b=g.vec3.normalize(f.sv3d.get(),b);var e=g.vec3.cross(f.sv3d.get(),a,b);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=0;d[4]=b[0];d[5]=b[1];d[6]=b[2];d[7]=0;d[8]=e[0];d[9]=e[1];d[10]=e[2];d[11]=0;d[12]=c[0];d[13]=c[1];d[14]=c[2];d[15]=1;return d}function n(a,b){var c=
a.getViewForGraphic(b);return h.isSome(c)&&"computeAttachmentOrigin"in c?c.computeAttachmentOrigin(b,a.spatialReference):null}Object.defineProperty(e,"__esModule",{value:!0});e.createManipulatorMaterial=l;e.createManipulatorOutlineMaterial=function(a,b){void 0===b&&(b=4);a=k.vec4f64.fromValues(a[0],a[1],a[2],4===a.length?a[3]:1);a=new v({color:a,transparent:!0,writeDepth:!0,cullFace:1},"manipulator-outline");a.renderOccluded=b;return a};e.createSphereManipulator=function(a,b,c){return new x.Manipulator3D({view:a,
renderObjects:[{geometry:new t(u.createSphereGeometry(1,32,32),"manipulator"),material:l(k.vec4f64.fromValues(b[0],b[1],b[2],null!=c?c:1))}]})};e.calculateInputRotationTransform=function(a,b,c,d){a=g.vec3.subtract(f.sv3d.get(),a,c);d=g.vec3.cross(f.sv3d.get(),d,a);c=m(a,d,c,f.sm4d.get());p.mat4.invert(c,c);b=g.vec3.transformMat4(f.sv3d.get(),b,c);return Math.atan2(b[1],b[0])};e.calculateTranslateRotateFromBases=m;e.getGraphicAttachmentOrigin=n;e.placeAtGraphic=function(a,b,c){a=n(a,c);h.isSome(a)?
b.elevationAlignedLocation=a:(c=c.geometry,h.isNone(c)||(c=r.computeCentroid(c),h.isNone(c)||(b.location=q.hydrateGeometry(c))))}});