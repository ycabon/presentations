// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../core/maybe"],function(c,d,b){Object.defineProperty(d,"__esModule",{value:!0});c=function(){function a(a){this.resourceFactory=a;this._resources=null;this._attached=this._hidden=!1}a.prototype.destroy=function(){this._destroyResources()};Object.defineProperty(a.prototype,"resources",{get:function(){return b.isSome(this._resources)?this._resources.external:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hidden",{get:function(){return this._hidden},
set:function(a){a!==this._hidden&&(this._hidden=a,this._syncGeometriesToRenderer())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"attached",{get:function(){return this._attached},set:function(a){a!==this._attached&&(this._attached=a,this._createOrDestroyResources())},enumerable:!0,configurable:!0});a.prototype.recreate=function(){this.attached&&this._createResources()};a.prototype.recreateGeometry=function(){this.resourceFactory.recreateGeometry?b.isNone(this._resources)||(this.ensureRenderGeometriesRemoved(),
this.resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()};a.prototype._createOrDestroyResources=function(){this._attached?b.isNone(this._resources)&&this._createResources():this._destroyResources()};a.prototype._createResources=function(){this._destroyResources();var a=this.resourceFactory.createResources();this._resources={layerView:{view:this.resourceFactory.view,notifyGraphicUpdate:function(){},watch:function(){return{remove:function(){}}}},
external:a,geometriesAdded:!1};this._syncGeometriesToRenderer()};a.prototype._destroyResources=function(){b.isNone(this._resources)||(this.ensureRenderGeometriesRemoved(),this._resources=null)};a.prototype._syncGeometriesToRenderer=function(){this._hidden?this.ensureRenderGeometriesRemoved():this._hidden||this.ensureRenderGeometriesAdded()};a.prototype.ensureRenderGeometriesRemoved=function(){!b.isNone(this._resources)&&this._resources.geometriesAdded&&(this.resourceFactory.view.basemapTerrain.overlayManager.renderer.removeGeometries(this._resources.external.geometries,
this._resources.layerView,2),this._resources.geometriesAdded=!1)};a.prototype.ensureRenderGeometriesAdded=function(){b.isNone(this._resources)||this._resources.geometriesAdded||(this.resourceFactory.view.basemapTerrain.overlayManager.renderer.addGeometries(this._resources.external.geometries,this._resources.layerView,2),this._resources.geometriesAdded=!0)};return a}();d.DrapedVisualElementResources=c});