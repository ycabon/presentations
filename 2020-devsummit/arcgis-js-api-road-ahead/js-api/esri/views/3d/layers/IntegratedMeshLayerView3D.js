// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/assignHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Graphic ../../../core/maybe ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec4f64 ../../../geometry/support/aaBoundingRect ./I3SMeshView3D ./LayerView3D ./support/layerViewUpdatingProperties ../../layers/LayerView".split(" "),function(r,t,u,h,d,k,l,c,g,f,m,n,p,q){return function(e){function b(){var a=null!==e&&e.apply(this,
arguments)||this;a.lodFactor=1;a._elevationContext="im";a._isIntegratedMesh=!0;a._supportsLabeling=!1;a.drapeTargetType=1;a._overlayTexOffset=g.vec4f64.fromValues(-1,-1,-1,-1);a._overlayTexScale=g.vec4f64.create();a._overlayTextures=[null,null];a._overlayHighlights=[null,null];return a}h(b,e);Object.defineProperty(b.prototype,"progressiveLoadFactor",{get:function(){return 1<=this.lodFactor?.2:1},enumerable:!0,configurable:!0});b.prototype.setDrapingTextures=function(a,b,c,d){var e=this;l.isSome(c)&&
0<f.area(b)?(this._overlayTextures[a]=c,this._overlayHighlights[a]=d,this._overlayTexOffset[2*a]=-b[0]/f.width(b),this._overlayTexOffset[2*a+1]=-b[1]/f.height(b),this._overlayTexScale[2*a]=1/f.width(b),this._overlayTexScale[2*a+1]=1/f.height(b)):(this._overlayTextures[a]=null,this._overlayHighlights[a]=null,this._overlayTexOffset[2*a]=-1,this._overlayTexOffset[2*a+1]=-1,this._overlayTexScale[2*a]=0,this._overlayTexScale[2*a+1]=0);this._forAllNodes(function(a){return e._collection.updateMaterial(a.objectHandle,
function(a){return e._updateMaterialOverlay(a)})})};b.prototype._updateMaterialOverlay=function(a){a.overlayColorInner=this._overlayTextures[0];a.overlayColorOuter=this._overlayTextures[1];a.overlayHighlightInner=this._overlayHighlights[0];a.overlayHighlightOuter=this._overlayHighlights[1];a.overlayTexOffset=this._overlayTexOffset;a.overlayTexScale=this._overlayTexScale};b.prototype.initialize=function(){};b.prototype.destroy=function(){};b.prototype._createLayerGraphic=function(){var a=new k;a.layer=
this.layer;a.sourceLayer=this.layer;return a};b.prototype.canResume=function(){return this.inherited(arguments)&&(!this._controller||this._controller.rootNodeVisible)};b.prototype.isUpdating=function(){return this.updatingMeshView3D};d([c.property()],b.prototype,"layer",void 0);d([c.property({dependsOn:["updatingMeshView3D"]})],b.prototype,"updating",void 0);d([c.property({dependsOn:["_controller.rootNodeVisible"]})],b.prototype,"suspended",void 0);d([c.property(p.updatingProgress)],b.prototype,"updatingProgress",
void 0);d([c.property({readOnly:!0,aliasOf:"_controller.updatingProgress"})],b.prototype,"updatingProgressValue",void 0);d([c.property({readOnly:!0,aliasOf:"view.qualitySettings.sceneService.integratedMesh.lodFactor"})],b.prototype,"lodFactor",void 0);d([c.property({readOnly:!0,dependsOn:["lodFactor"]})],b.prototype,"progressiveLoadFactor",null);return b=d([c.subclass("esri.views.3d.layers.SceneLayerView3D")],b)}(c.declared(m.I3SMeshView3D(n.LayerView3D(q))))});