// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/promiseUtils ./Graphics3DCalloutSymbolLayerFactory ./Graphics3DSymbol".split(" "),function(m,n,f,g,h,e,k,l){return function(d){function c(a,b,c){a=d.call(this,a,b,c)||this;a.calloutSymbolLayer=null;a.symbol.hasVisibleCallout()&&(a.calloutSymbolLayer=k.make(a.symbol,b));return a}f(c,d);c.prototype.doLoad=function(a){return h(this,void 0,
void 0,function(){return g(this,function(b){switch(b.label){case 0:return[4,d.prototype.doLoad.call(this,a)];case 1:return b.sent(),this.calloutSymbolLayer?[4,this.calloutSymbolLayer.load()]:[3,3];case 2:b.sent(),b.label=3;case 3:if(e.isAborted(a))throw e.createAbortError();return[2]}})})};c.prototype.destroy=function(){d.prototype.destroy.call(this);this.calloutSymbolLayer&&this.calloutSymbolLayer.destroy()};c.prototype.createGraphics3DGraphic=function(a,b){b=d.prototype.createGraphics3DGraphic.call(this,
a,b);this.calloutSymbolLayer&&(a=this.createCalloutGraphic(a))&&b.addAuxiliaryGraphic(a);return b};c.prototype.globalPropertyChanged=function(a,b){var c=this;return d.prototype.globalPropertyChanged.call(this,a,b)?this.calloutSymbolLayer?this.calloutSymbolLayer.globalPropertyChanged(a,b,function(a){return c._getCalloutGraphicLayer(a)}):!0:!1};c.prototype.updateGeometry=function(a,b){var c=d.prototype.updateGeometry.call(this,a,b);return c&&this.calloutSymbolLayer&&(a=this._getCalloutGraphicLayer(a))?
this.calloutSymbolLayer.updateGeometry(a,b):c};c.prototype.createCalloutGraphic=function(a){var b=a.renderingInfo;a.renderingInfo={renderer:b.renderer,symbol:b.symbol,translation:[0,0,0],centerOffset:[0,0,0,0],screenOffset:[0,0],centerOffsetUnits:"world",elevationOffset:0,materialCollection:null};return this.calloutSymbolLayer.createGraphics3DGraphic(a)};c.prototype._getCalloutGraphicLayer=function(a){var b=0;for(a=a._auxiliaryGraphics;b<a.length;b++){var c=a[b];if(c.graphics3DSymbolLayer===this.calloutSymbolLayer)return c}};
return c}(l)});