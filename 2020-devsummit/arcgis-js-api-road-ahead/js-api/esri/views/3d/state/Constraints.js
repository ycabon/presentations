// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Logger ../../../core/mathUtils ../../../core/mathUtils ../../../core/accessorSupport/decorators ../support/earthUtils ../support/mathUtils".split(" "),function(h,c,m,f,n,r,p,g,e,t,k){Object.defineProperty(c,"__esModule",{value:!0});var u=r.getLogger("esri.views.3d.state.Constraints");h=function(q){function a(b){b=q.call(this,b)||this;b.collision=new v;b.distance=
Infinity;b.minimumPoiDistance=4;return b}m(a,q);Object.defineProperty(a.prototype,"altitude",{get:function(){return"local"===this.mode?null:this._get("altitude")||null},set:function(b){"local"===this.mode?u.warn("Altitude constraint is ignored in local scenes"):this._set("altitude",b)},enumerable:!0,configurable:!0});a.prototype.clampAltitude=function(b){return this.altitude?p.clamp(b,this.altitude.min,this.altitude.max):b};a.prototype.clampTilt=function(b,a){if(!this.tilt)return a;b=this.tilt(b);
return p.clamp(a,b.min,b.max)};a.prototype.clampDistance=function(b){return Math.min(b,this.distance)};a.prototype.createDefaultTilt=function(){return"local"===this.mode?this.createDefaultTiltLocal():this.createDefaultTiltGlobal()};a.prototype.createConstantMaxTilt=function(b){return function(a,d){void 0===d&&(d=l);d.min=c.TiltDefault.min;d.max=b;return d}};a.prototype.createDefaultTiltLocal=function(){var b=this.collision.enabled?k.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[1E4,g.deg2rad(88)],
[6E6,g.deg2rad(88)]]):function(){return c.TiltDefault.max};return function(a,d){void 0===d&&(d=l);d.min=c.TiltDefault.min;d.max=b(a);return d}};a.prototype.createDefaultTiltGlobal=function(){var a=this.collision.enabled?k.makePiecewiseLinearFunction([[4E3,c.TiltDefault.max],[5E4,g.deg2rad(88)],[6E6,g.deg2rad(88)],[2E7,c.TiltDefault.min]]):k.makePiecewiseLinearFunction([[3E5,c.TiltDefault.max],[3E6,g.deg2rad(88)],[6E6,g.deg2rad(88)],[2E7,c.TiltDefault.min]]);return function(b,d){void 0===d&&(d=l);
d.min=c.TiltDefault.min;d.max=a(b);return d}};f([e.property()],a.prototype,"altitude",null);f([e.property({readOnly:!0})],a.prototype,"collision",void 0);f([e.property()],a.prototype,"distance",void 0);f([e.property({readOnly:!0})],a.prototype,"minimumPoiDistance",void 0);f([e.property()],a.prototype,"tilt",void 0);f([e.property({constructOnly:!0})],a.prototype,"mode",void 0);return a=f([e.subclass("esri.views.3d.state.Constraints")],a)}(e.declared(n));c.Constraints=h;c.AltitudeDefault={min:-2E5,
max:4*t.earthRadius};c.TiltDefault={min:g.deg2rad(.5),max:g.deg2rad(179.5)};var l={min:0,max:0},v=function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.elevationMargin=5;return a}m(a,c);f([e.property({type:Boolean})],a.prototype,"enabled",void 0);f([e.property({type:Number})],a.prototype,"elevationMargin",void 0);return a=f([e.subclass("esri.views.3d.state.Constraints.CollisionConstraint")],a)}(e.declared(n));c.default=h});