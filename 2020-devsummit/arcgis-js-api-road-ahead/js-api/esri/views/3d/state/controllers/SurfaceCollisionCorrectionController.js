// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Handles ../../../../core/accessorSupport/decorators ../../camera/constraintUtils ../../camera/intersectionUtils ./CameraController".split(" "),function(c,g,h,e,k,d,l,m,f){Object.defineProperty(g,"__esModule",{value:!0});c=function(c){function a(b){b=c.call(this,b)||this;b.handles=new k;return b}h(a,c);Object.defineProperty(a.prototype,"desiredCamera",{set:function(b){this._set("desiredCamera",
b.clone())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"canStop",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"constraintEnabled",{get:function(){return this.view.state.constraints.collision.enabled},enumerable:!0,configurable:!0});a.prototype.onControllerStart=function(){var b=this;this.state=f.State.Running;this.handles.add(this.view.basemapTerrain.on("elevation-change",function(a){return b.handleElevationChangeEvent(a)}));this.applyCorrection()};
a.prototype.onControllerEnd=function(){this.handles.removeAll()};a.prototype.stepController=function(){};a.prototype.handleElevationChangeEvent=function(b){m.eyeWithinExtent(this.view,this.desiredCamera,b.extent,b.spatialReference)&&this.applyCorrection()};a.prototype.applyCorrection=function(){var b=this;this.view.state.updateCamera(function(a){a.copyViewFrom(b.desiredCamera);l.applySurfaceCollisionConstraint(b.view,a,1)||b.constraintEnabled||(b.state=f.State.Stopped)})};e([d.property({constructOnly:!0})],
a.prototype,"view",void 0);e([d.property({constructOnly:!0})],a.prototype,"desiredCamera",null);return a=e([d.subclass("esri.views.3d.state.controllers.SurfaceCollisionCorrectionController")],a)}(d.declared(f.CameraController));g.SurfaceCollisionCorrectionController=c});