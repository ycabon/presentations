// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../geometry ../../../core/Error ../../../core/unitUtils ../../../portal/support/geometryServiceUtils ../../../tasks/support/ProjectParameters".split(" "),function(a,c,l,d,f,g,p,q,r){Object.defineProperty(c,"__esModule",{value:!0});a=function(){function a(t,a,b){void 0===b&&(b=null);this.spatialReference=a;this.unitInMeters=p.getMetersPerUnitForSR(this.spatialReference);this._geometryServicePromise=
this.loadGeometryService(t,b)}a.prototype.loadGeometryService=function(a,e){return d(this,void 0,void 0,function(){return l(this,function(b){switch(b.label){case 0:if(e)return[2,e];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,q.create(a&&a.get("portalItem"))];case 2:return[2,b.sent()];case 3:throw b.sent(),new g("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config");case 4:return[2]}})})};a.prototype.toGeographic=function(a){return d(this,void 0,void 0,function(){var e,
b,c,d,m,n,h,g=this;return l(this,function(k){switch(k.label){case 0:return[4,this._geometryServicePromise];case 1:return e=k.sent(),b=!0,Array.isArray(a[0])&&"number"!==typeof a[0]?c=a:(c=[a],b=!1),d=c.map(function(a){return a instanceof f.Point?a:new f.Point(a,g.spatialReference)}),m=new r({geometries:d,outSpatialReference:f.SpatialReference.WGS84}),[4,e.project(m)];case 2:return n=k.sent(),h=n.map(function(a){return"point"===a.type?[a.x,a.y]:void 0}),[2,b?h:h[0]]}})})};return a}();c.MapCoordsHelper=
a;c.default=a});