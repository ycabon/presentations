// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../core/ReentrantObjectPool","../../../core/accessorSupport/watch"],function(g,h,l,k){Object.defineProperty(h,"__esModule",{value:!0});g=function(){function e(b,a){var c=this;this.owner=a;this.properties={};this.afterDispatchHandle=null;for(var d in b)a=new l.ReentrantObjectPool(b[d],null,null,2,2),this.properties[d]={pool:a,acquired:[]};this.afterDispatchHandle=k.afterDispatch(function(){return c.release()})}e.prototype.destroy=function(){this.afterDispatchHandle&&
(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(var b in this.properties){for(var a=this.properties[b],c=0,d=a.acquired;c<d.length;c++){var f=d[c];k.isValueInUse(f)||a.pool.release(f)}a.pool.destroy();a.pool=null;a.acquired=null}this.owner=this.properties=null};e.prototype.get=function(b){var a=this.owner._get(b);b=this.properties[b];var c=b.pool.acquire();for(b.acquired.push(c);c===a;)b.acquired.push(c),c=b.pool.acquire();return c};e.prototype.release=function(){for(var b in this.properties){for(var a=
this.properties[b],c=0,d=0,f=a.acquired;d<f.length;d++){var e=f[d];k.isValueInUse(e)?a.acquired[c++]=e:a.pool.release(e)}a.acquired.length=c}};return e}();h.PropertiesPool=g;h.default=g});