// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/ObjectStack ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack".split(" "),function(v,d,t,h,l,e,k,f){function g(a){return a?{origin:k.vec3f64.clone(a.origin),direction:k.vec3f64.clone(a.direction)}:{origin:k.vec3f64.create(),direction:k.vec3f64.create()}}function m(a,c,b){void 0===b&&(b=g());e.vec3.copy(b.origin,a);e.vec3.copy(b.direction,c);return b}
function n(a,c,b){void 0===b&&(b=g());var d=h.castRenderScreenPointArray3(l.vec2.copy(f.sv3d.get(),c));d[2]=0;a.unprojectPoint(d,b.origin);c=h.castRenderScreenPointArray3(l.vec2.copy(f.sv3d.get(),c));c[2]=1;a=a.unprojectPoint(c,f.sv3d.get());e.vec3.subtract(b.direction,a,b.origin);return b}function p(a,c,b){void 0===b&&(b=g());e.vec3.copy(b.origin,a.eye);c=e.vec3.set(f.sv3d.get(),c[0],c[1],1);a=a.unprojectPoint(c,f.sv3d.get());e.vec3.subtract(b.direction,a,b.origin);return b}function q(a,c){a=e.vec3.cross(f.sv3d.get(),
e.vec3.normalize(f.sv3d.get(),a.direction),e.vec3.subtract(f.sv3d.get(),c,a.origin));return e.vec3.dot(a,a)}function r(){return{origin:null,direction:null}}Object.defineProperty(d,"__esModule",{value:!0});d.create=g;d.wrap=function(a,c){var b=u.get();b.origin=a;b.direction=c;return b};d.copy=function(a,c){void 0===c&&(c=g());return m(a.origin,a.direction,c)};d.fromPoints=function(a,c,b){void 0===b&&(b=g());e.vec3.copy(b.origin,a);e.vec3.subtract(b.direction,c,a);return b};d.fromValues=m;d.fromScreen=
function(a,c,b){void 0===b&&(b=g());return n(a,a.screenToRender(c,h.castRenderScreenPointArray3(f.sv3d.get())),b)};d.fromRender=n;d.fromScreenAtEye=function(a,c,b){void 0===b&&(b=g());return p(a,a.screenToRender(c,h.castRenderScreenPointArray3(f.sv3d.get())),b)};d.fromRenderAtEye=p;d.distance2=q;d.distance=function(a,c){return Math.sqrt(q(a,c))};d.closestPoint=function(a,c,b){c=e.vec3.dot(a.direction,e.vec3.subtract(b,c,a.origin));e.vec3.add(b,a.origin,e.vec3.scale(b,a.direction,c));return b};d.createWrapper=
r;var u=new t.ObjectStack(r)});