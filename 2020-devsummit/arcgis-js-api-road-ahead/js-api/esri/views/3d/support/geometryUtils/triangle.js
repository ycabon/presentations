// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/ObjectStack ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../stack ./lineSegment".split(" "),function(D,f,x,r,e,h,k,n){function t(a){return a?{p0:h.vec3f64.clone(a.p0),p1:h.vec3f64.clone(a.p1),p2:h.vec3f64.clone(a.p2)}:{p0:h.vec3f64.create(),p1:h.vec3f64.create(),p2:h.vec3f64.create()}}function y(a,b,d,c){void 0===c&&(c=t());e.vec3.copy(c.p0,a);e.vec3.copy(c.p1,b);e.vec3.copy(c.p2,d);
return c}function z(a,b,d){var c=r.vec2.distance(a,b);b=r.vec2.distance(b,d);a=r.vec2.distance(d,a);d=(c+b+a)/2;c=d*(d-c)*(d-b)*(d-a);return 0>=c?0:Math.sqrt(c)}Object.defineProperty(f,"__esModule",{value:!0});f.create=t;f.wrap=function(a,b,d){var c=C.get();c.p0=a;c.p1=b;c.p2=d;return c};f.copy=function(a,b){void 0===b&&(b=t());return y(a.p0,a.p1,a.p2,b)};f.fromValues=y;f.distance2=function(a,b){var d=a.p0,c=a.p1;a=a.p2;var g=e.vec3.subtract(k.sv3d.get(),c,d),f=e.vec3.subtract(k.sv3d.get(),a,c),m=
e.vec3.subtract(k.sv3d.get(),d,a),A=e.vec3.subtract(k.sv3d.get(),b,d),p=e.vec3.subtract(k.sv3d.get(),b,c),q=e.vec3.subtract(k.sv3d.get(),b,a),l=e.vec3.cross(g,g,m),h=e.vec3.dot(e.vec3.cross(k.sv3d.get(),g,l),A),p=e.vec3.dot(e.vec3.cross(k.sv3d.get(),f,l),p),q=e.vec3.dot(e.vec3.cross(k.sv3d.get(),m,l),q);if(0<h&&0<p&&0<q)return b=e.vec3.dot(l,A),b*b/e.vec3.dot(l,l);d=n.distance2(n.fromValues(d,g,v.get()),b);c=n.distance2(n.fromValues(c,f,v.get()),b);b=n.distance2(n.fromValues(a,m,v.get()),b);return Math.min(d,
c,b)};f.intersectRay=function(a,b,d){var c=b.direction;b=b.origin;var g=a.p0,f=a.p1,m=a.p2,h=f[0]-g[0],p=f[1]-g[1],q=f[2]-g[2],f=m[0]-g[0];a=m[1]-g[1];var m=m[2]-g[2],l=c[1]*m-a*c[2],k=c[2]*f-m*c[0],n=c[0]*a-f*c[1],u=h*l+p*k+q*n;if(-1E-5<u&&1E-5>u)return!1;var u=1/u,r=b[0]-g[0],t=b[1]-g[1],g=b[2]-g[2],l=u*(r*l+t*k+g*n);if(0>l||1<l)return!1;k=t*q-p*g;q=g*h-q*r;h=r*p-h*t;p=u*(c[0]*k+c[1]*q+c[2]*h);if(0>p||1<l+p)return!1;d&&(e.vec3.scale(d,c,u*(f*k+a*q+m*h)),e.vec3.add(d,b,d));return!0};f.areaPoints2d=
z;f.area2d=function(a){return z(a.p0,a.p1,a.p2)};f.areaPoints3d=function(a,b,d){e.vec3.subtract(w,b,a);e.vec3.subtract(B,d,a);return e.vec3.length(e.vec3.cross(w,w,B))/2};var v=new x.ObjectStack(n.create),C=new x.ObjectStack(function(){return{p0:null,p1:null,p2:null}}),w=h.vec3f64.create(),B=h.vec3f64.create()});