// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../../core/tsSupport/makeTemplateObjectHelper ../../../../../../core/libs/gl-matrix-2/vec3f64 ../util/DoublePrecision.glsl ../../shaderModules/interfaces ../../../lib/doublePrecisionUtils".split(" "),function(v,e,c,g,t,d,u){function h(a,b){b.instanced&&b.instancedDoublePrecision?(a.attributes.add("modelOriginHi","vec3"),a.attributes.add("modelOriginLo","vec3"),a.attributes.add("model","mat3"),a.attributes.add("modelNormal","mat3")):(a.vertex.uniforms.add("model",
"mat4"),a.vertex.uniforms.add("modelNormal","mat4"));b.instancedDoublePrecision&&(a.include(t.DoublePrecision,b),a.vertex.uniforms.add("viewOriginHi","vec3"),a.vertex.uniforms.add("viewOriginLo","vec3"));var f=[d.glsl(k||(k=c(["\n    vec3 calculateVPos() {\n      ","\n    }\n    "],["\n    vec3 calculateVPos() {\n      ","\n    }\n    "])),b.instancedDoublePrecision?"return model * localPosition().xyz;":"return (model * localPosition()).xyz;"),d.glsl(l||(l=c(["\n    vec3 subtractOrigin(vec3 _pos) {\n      ",
"\n    }\n    "],["\n    vec3 subtractOrigin(vec3 _pos) {\n      ","\n    }\n    "])),b.instancedDoublePrecision?d.glsl(m||(m=c(["\n          vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;"],["\n          vec3 originDelta \x3d dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;"]))):"return vpos;"),d.glsl(n||(n=c(["\n    vec3 dpNormal(vec4 _normal) {\n      ","\n    }\n    "],
["\n    vec3 dpNormal(vec4 _normal) {\n      ","\n    }\n    "])),b.instancedDoublePrecision?"return normalize(modelNormal * _normal.xyz);":"return normalize((modelNormal * _normal).xyz);"),d.glsl(p||(p=c(["\n    vec3 dpNormalView(vec4 _normal) {\n      ","\n    }\n    "],["\n    vec3 dpNormalView(vec4 _normal) {\n      ","\n    }\n    "])),b.instancedDoublePrecision?"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);":"return normalize((viewNormal * modelNormal * _normal).xyz);")];
a.vertex.code.add(f[0]);a.vertex.code.add(f[1]);a.vertex.code.add(f[2]);2===b.output&&a.vertex.code.add(f[3])}Object.defineProperty(e,"__esModule",{value:!0});e.InstancedDoublePrecision=h;(function(a){var b=function(){return function(){}}();a.Uniforms=b;a.bindCustomOrigin=function(a,b){u.encodeDoubleArraySplit(b,q,r,3);a.setUniform3fv("viewOriginHi",q);a.setUniform3fv("viewOriginLo",r)}})(h=e.InstancedDoublePrecision||(e.InstancedDoublePrecision={}));var q=g.vec3f64.create(),r=g.vec3f64.create(),
k,m,l,n,p});