// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define(["require","exports","../../../../../core/tsSupport/extendsHelper","../../lib/AutoDisposable"],function(d,e,f,g){Object.defineProperty(e,"__esModule",{value:!0});d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}f(b,a);Object.defineProperty(b.prototype,"bucketKey",{get:function(){return this._bucket.key},enumerable:!0,configurable:!0});return b}(g.AutoDisposable);e.BucketStorable=d;d=function(){function a(){this._buckets=new Map;this._count=0}a.prototype.add=function(b,
c){b=this._getBucket(b);c._bucket=b;c._bucketIndex=b.count;b._data.push(c);this._count++};a.prototype.remove=function(b){var c=b._bucket._data,a=c[c.length-1];c[b._bucketIndex]=a;a._bucketIndex=b._bucketIndex;c.pop();this._count--};a.prototype.updateKey=function(b,a){this.remove(b);this.add(a,b)};a.prototype.getBucket=function(b){return this._getBucket(b).data};a.prototype.forEach=function(b){this._buckets.forEach(function(a){b(a.data,a.key)})};Object.defineProperty(a.prototype,"count",{get:function(){return this._count},
enumerable:!0,configurable:!0});a.prototype._getBucket=function(b){var a=this._buckets.get(b);if(a)return a;a=new h(b);this._buckets.set(b,a);return a};return a}();e.BucketedObjectStore=d;var h=function(){function a(a){this.key=a;this._data=[]}Object.defineProperty(a.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"count",{get:function(){return this._data.length},enumerable:!0,configurable:!0});return a}()});