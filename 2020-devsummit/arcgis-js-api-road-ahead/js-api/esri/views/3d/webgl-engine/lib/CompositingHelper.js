// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/maybe ./glUtil3D ../shaders/CompositingTechnique ../../../webgl/Util".split(" "),function(f,g,h,l,k,m){Object.defineProperty(g,"__esModule",{value:!0});f=function(){function b(c,a){this._rctx=c;this._techniqueRepository=a;this._techniques=new Set}b.prototype.dispose=function(){var c=this;this._techniques.forEach(function(a){return c._techniqueRepository.release(a)});this._techniques.clear();h.isSome(this._vao)&&(this._vao.dispose(),this._vao=null)};b.prototype.composite=
function(c,a,b){void 0===a&&(a=0);void 0===b&&(b=1);this.compositeInternal(c,a,b,0)};b.prototype.compositeSpecial=function(c,a){this.compositeInternal(c,0,1,a)};b.prototype.compositeInternal=function(c,a,b,f){var d=this._rctx;e.alphaMode=a;e.function=f;e.hasOpacityFactor=1!==b;a=this._techniqueRepository.acquire(k.CompositingTechnique,e);d.bindProgram(a.program);a.bindPipelineState(d);a.program.setUniform1i("tex",1);e.hasOpacityFactor&&a.program.setUniform1f("opacity",b);d.bindTexture(c,1);c=this.ensureVAO();
d.bindVAO(c);d.drawArrays(5,0,m.vertexCount(c,"geometry"));d.bindVAO(null);this._techniqueRepository.release(a)};b.prototype.ensureVAO=function(){h.isNone(this._vao)&&(this._vao=l.createQuadVAO(this._rctx));return this._vao};return b}();g.default=f;var e=new k.CompositingTechniqueConfiguration});