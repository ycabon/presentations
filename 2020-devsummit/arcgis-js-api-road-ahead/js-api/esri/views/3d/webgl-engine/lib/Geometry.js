// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ./BoundingInfo ./ComponentUtils ./geometryDataUtils ./IdGen ./Util ./Util".split(" "),function(z,A,m,n,k,x,y,f){return function(){function a(c,d,b){this._componentAABBs=this._boundingInfo=null;this._id=a.__idGen.gen(d);this._data=c;this._boundingInfo=b}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0});a.prototype.getIndices=
function(c){return this.data.getIndices(c)};Object.defineProperty(a.prototype,"indexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});a.prototype.getAttribute=function(c){return this.data.getAttribute(c)};Object.defineProperty(a.prototype,"componentCount",{get:function(){return n.componentCount(this.data.componentOffsets)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"componentOffsets",{get:function(){return this.data.componentOffsets},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"vertexCount",{get:function(){return this.data.indexCount},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"faceCount",{get:function(){return this.data.indexCount/3},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"boundingInfo",{get:function(){null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo},enumerable:!0,configurable:!0});a.prototype.computeAttachmentOrigin=
function(c){return"triangle"===this.data.primitiveType?this.computeAttachmentOriginTriangles(c):this.computeAttachmentOriginPoints(c)};a.prototype.computeAttachmentOriginTriangles=function(c){var a=this.getIndices(f.VertexAttrConstants.POSITION),b=this.getAttribute(f.VertexAttrConstants.POSITION);return k.computeAttachmentOriginTriangles(b,a,c)};a.prototype.computeAttachmentOriginPoints=function(c){var a=this.getIndices(f.VertexAttrConstants.POSITION),b=this.getAttribute(f.VertexAttrConstants.POSITION);
return k.computeAttachmentOriginPoints(b,a,c)};a.prototype.invalidateBoundingInfo=function(){this._componentAABBs=this._boundingInfo=null};a.prototype.getComponentAABB=function(c,a){null==this._componentAABBs&&(this._componentAABBs=this._computeComponentAABBs());for(var b=0;6>b;b++)a[b]=this._componentAABBs[6*c+b];return a};a.prototype._computeComponentAABBs=function(){for(var c=this.componentCount,a=new Float32Array(6*c),b=0;b<c;b++)this._calculateAABB(b,a,6*b);return a};a.prototype._calculateAABB=
function(a,d,b){var c=this.data.getIndices(f.VertexAttrConstants.POSITION),l=this.data.getAttribute(f.VertexAttrConstants.POSITION),g=this.data.componentOffsets,k=g.length?g[a+1]:c.length,p=Infinity,q=Infinity,r=Infinity,t=-Infinity,u=-Infinity,v=-Infinity,m=l.offsetIdx,n=l.strideIdx;for(a=g.length?g[a]:0;a<k;a++)var h=m+n*c[a],g=l.data[h],w=l.data[h+1],h=l.data[h+2],p=Math.min(p,g),q=Math.min(q,w),r=Math.min(r,h),t=Math.max(t,g),u=Math.max(u,w),v=Math.max(v,h);d[b]=p;d[b+1]=q;d[b+2]=r;d[b+3]=t;d[b+
4]=u;d[b+5]=v};a.prototype._calculateBoundingInfo=function(){var a=this.data.getIndices(f.VertexAttrConstants.POSITION),d=this.data.getAttribute(f.VertexAttrConstants.POSITION),b="triangle"===this.data.primitiveType?3:1;if(0===a.length)for(var a=new Uint32Array(b),e=0;e<b;++e)a[e]=e;e=a.length;y.assert(0===e%b,"Indexing error: "+e.toFixed(0)+" not divisible by "+b.toFixed(0));e=k.generateDefaultIndexArray(e/b);return new m(e,b,a,d)};a.__idGen=new x.IdGen;return a}()});