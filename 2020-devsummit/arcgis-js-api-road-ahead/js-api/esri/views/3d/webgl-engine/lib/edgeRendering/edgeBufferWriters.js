// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../../../core/RandomLCG ../../../../../core/libs/gl-matrix-2/vec3 ../../../../../core/libs/gl-matrix-2/vec3f64 ../../../support/buffer/glUtil ./bufferLayouts".split(" "),function(g,h,w,x,u,p,v,q,e){Object.defineProperty(h,"__esModule",{value:!0});var n=function(){function a(){}a.prototype.updateSettings=function(d){this.settings=d};a.prototype.write=function(d,a,c){var b=r;b[0]=c.position0[0];
b[1]=c.position0[1];b[2]=c.position0[2];b[3]=c.position1[0];b[4]=c.position1[1];b[5]=c.position1[2];k[0]=5381;for(b=0;b<t.length;b++)k[0]=31*k[0]+t[b];l.seed=k[0];var b=l.getIntRange(0,255),e=l.getIntRange(0,this.settings.variants-1),f=l.getFloat(),f=-(1-Math.min(f/.7,1))+Math.max(0,f-.7)/(1-.7),f=255*(Math.pow(Math.abs(f),1.2)*(0>f?-1:1)*.5+.5);d.position0.setVec(a,c.position0);d.position1.setVec(a,c.position1);d.componentIndex.set(a,c.componentIndex);d.variantOffset.set(a,b);d.variantStroke.set(a,
e);d.variantExtension.set(a,f)};a.prototype.trim=function(d,a){return d.slice(0,a)};return a}();h.CommonBufferWriter=n;var r=new Float32Array(6),t=new Uint32Array(r.buffer),k=new Uint32Array(1),l=new u;g=function(){function a(){this.commonWriter=new n}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};a.prototype.allocate=function(a){return e.RegularEdgeInstancesLayout.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);p.vec3.add(m,c.faceNormal0,
c.faceNormal1);p.vec3.normalize(m,m);a.normal.setVec(b,m)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=e.RegularEdgeInstancesLayout;a.glLayout=q.glLayout(e.RegularEdgeInstancesLayout,{divisor:1});return a}();h.RegularEdgeBufferWriter=g;g=function(){function a(){this.commonWriter=new n}a.prototype.updateSettings=function(a){this.commonWriter.updateSettings(a)};a.prototype.allocate=function(a){return e.SilhouetteEdgeInstancesLayout.createBuffer(a)};a.prototype.write=
function(a,b,c){this.commonWriter.write(a,b,c);a.normalA.setVec(b,c.faceNormal0);a.normalB.setVec(b,c.faceNormal1)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=e.SilhouetteEdgeInstancesLayout;a.glLayout=q.glLayout(e.SilhouetteEdgeInstancesLayout,{divisor:1});return a}();h.SilhouetteEdgeBufferWriter=g;var m=v.vec3f64.create()});