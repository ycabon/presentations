// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/Transform.glsl ../core/shaderLibrary/attributes/PathVertexPosition.glsl ../core/shaderLibrary/attributes/VertexNormal.glsl ../core/shaderLibrary/output/ReadLinearDepth.glsl ../core/shaderLibrary/shading/ReadShadowMap.glsl ../core/shaderLibrary/util/Camera.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/StencilUtils ../shaders/Path.glsl ../../../webgl/Program ../../../webgl/renderState".split(" "),
function(m,d,k,c,f,n,p,q,r,t,u,v,w,x,b,l,y,z,g){Object.defineProperty(d,"__esModule",{value:!0});d.PathVertexAttrConstants={POSITION:"position",PROFILERIGHT:"profileRight",PROFILEUP:"profileUp",PROFILEVERTEXANDNORMAL:"profileVertexAndNormal",FEATUREVALUE:"featureValue"};d.pathVertexAttributeLocations={position:0,profileRight:1,profileUp:2,profileVertexAndNormal:3,featureValue:4};f=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}k(a,b);a.prototype.initializeProgram=function(h){var b=
a.shader.get(),e=this.configuration,b=b.build({output:e.output,viewingMode:h.viewingMode,slicePlaneEnabled:e.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,receiveShadows:e.receiveShadows,vvSize:e.vvSize,vvColor:e.vvColor,vvInstancingEnabled:!0,vvOpacity:e.vvOpacity,useOldSceneLightInterface:!1,pbrMode:0,useCustomDTRExponentForWater:!1,receiveAmbientOcclusion:e.receiveSSAO,doubleSidedMode:e.doubleSidedMode});return new z(h.rctx,b.generateSource("vertex"),b.generateSource("fragment"),
d.pathVertexAttributeLocations)};a.prototype.bindPass=function(h,a,b){this.program.setUniform3fv("size",a.size);0===this.configuration.output?(this.program.setUniform3fv("size",a.size),this.program.setUniform3fv("ambient",a.ambient),this.program.setUniform3fv("diffuse",a.diffuse),this.program.setUniform3fv("specular",a.specular),this.program.setUniform1f("opacity",a.opacity)):1!==this.configuration.output&&3!==this.configuration.output||t.ReadLinearDepth.bindUniforms(this.program,b);q.setVVUniforms(this.program,
a)};a.prototype.bindDraw=function(a){p.Transform.bindUniforms(this.program,a);n.Slice.bindUniformsWithOrigin(this.program,this.configuration,a);0===this.configuration.output&&(v.Camera.bindUniforms(this.program,a),u.ReadShadowMap.bindView(this.program,a));2===this.configuration.output&&r.VertexNormal.bindUniforms(this.program,a)};a.prototype.initializePipeline=function(){var a=this.configuration,b=function(b){return g.makePipelineState({blending:b,culling:(a.slicePlaneEnabled?!1:!a.transparent&&0!==
a.doubleSidedMode)&&{face:1028,mode:2305},depthTest:{func:513},depthWrite:g.defaultDepthWriteParams,colorWrite:g.defaultColorWriteParams,stencilWrite:a.sceneHasOcludees?l.stencilWriteMaskOn:null,stencilTest:a.sceneHasOcludees?l.stencilBaseAllZerosParams:null})};return 0===a.output?b(a.transparent&&g.separateBlendingParams(770,1,771,771)):b(null)};a.shader=new w.ReloadableShaderModule(y,"../shaders/Path.glsl",m);return a}(x.ShaderTechnique);d.PathTechnique=f;f=function(d){function a(){var a=null!==
d&&d.apply(this,arguments)||this;a.output=0;a.doubleSidedMode=0;a.receiveShadows=!1;a.receiveSSAO=!1;a.vvSize=!1;a.vvColor=!1;a.vvOpacity=!1;a.slicePlaneEnabled=!1;a.shadowMap=!1;a.transparent=!1;a.sceneHasOcludees=!1;return a}k(a,d);c([b.parameter({count:7})],a.prototype,"output",void 0);c([b.parameter({count:3})],a.prototype,"doubleSidedMode",void 0);c([b.parameter()],a.prototype,"receiveShadows",void 0);c([b.parameter()],a.prototype,"receiveSSAO",void 0);c([b.parameter()],a.prototype,"vvSize",
void 0);c([b.parameter()],a.prototype,"vvColor",void 0);c([b.parameter()],a.prototype,"vvOpacity",void 0);c([b.parameter()],a.prototype,"slicePlaneEnabled",void 0);c([b.parameter()],a.prototype,"shadowMap",void 0);c([b.parameter()],a.prototype,"transparent",void 0);c([b.parameter()],a.prototype,"sceneHasOcludees",void 0);return a}(b.ShaderTechniqueConfiguration);d.PathTechniqueConfiguration=f});