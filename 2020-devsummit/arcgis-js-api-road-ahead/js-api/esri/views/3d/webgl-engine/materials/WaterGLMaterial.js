// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../lib/GLMaterial ./WaterTechnique ./internal/MaterialUtil ./internal/waterMaterialUtils".split(" "),function(c,e,f,l,g,h,k,d){Object.defineProperty(e,"__esModule",{value:!0});c=function(c){function b(a){a=c.call(this,a)||this;a.updateParameters();return a}f(b,c);b.prototype.updateParameters=function(){this.params=k.copyParameters(this.material.getParameters());this.technique=this.techniqueRep.acquireAndReleaseExisting(h.WaterTechnique,
this.material.getTechniqueConfig(this.output),this.technique)};b.prototype.beginSlot=function(a){if(2===this.output)return 22===a;if(5===this.output)return null==a;var b=3;this.params.transparent&&(b=this.params.writeDepth?5:8);return a===b};b.prototype.setElapsedTimeUniform=function(a){a.setUniform1f("timeElapsed",.001*this.material.animation.time*this.params.animationSpeed)};b.prototype._updateShadowState=function(a){a.shadowMappingEnabled!==this.params.receiveShadows&&(this.material.setParameterValues({receiveShadows:a.shadowMappingEnabled}),
this.updateParameters())};b.prototype.ensureResources=function(a){d.waterTextureRepo.ready()||d.waterTextureRepo.loading()||d.waterTextureRepo.initialize(a);return d.waterTextureRepo.ready()?2:1};b.prototype.ensureParameters=function(a){0===this.output&&this._updateShadowState(a)};b.prototype.bind=function(a,b){a.bindProgram(this.technique.program);this.technique.bindPass(a,this.params);if(2===this.output||0===this.output)d.waterTextureRepo.bindRepo(a),this.setElapsedTimeUniform(this.technique.program)};
return b}(g.GLMaterial);e.WaterGLMaterial=c});