// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/assignHelper ../lib/AnimationTimer ../lib/Material ./WaterGLMaterial ./WaterTechnique ./internal/DefaultBufferWriter ./internal/MaterialUtil ./internal/waterMaterialUtils ./renderers/MergedRenderer".split(" "),function(c,d,g,k,l,m,e,n,f,h,p,q){Object.defineProperty(d,"__esModule",{value:!0});c=function(c){function a(b,a){a=c.call(this,a)||this;a.animation=new l.AnimationTimer;a.techniqueConfig=new n.WaterTechniqueConfiguration;
a.params=h.copyParameters(b,p.defaultWaterMaterialParameters);return a}g(a,c);a.prototype.setParameterValues=function(b){this.params=k({},this.params,b);this.parametersChanged()};a.prototype.getParameters=function(){return this.params};a.prototype.getTechniqueConfig=function(b){this.techniqueConfig.output=b;this.techniqueConfig.writeDepth=this.params.writeDepth;this.techniqueConfig.receiveShadows=this.params.receiveShadows;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.transparent=
this.params.transparent;return this.techniqueConfig};a.prototype.update=function(b){this.animation.enabled=Math.sqrt(this.params.waveTextureRepeat/this.params.waveStrength)*Math.min(b.camera.relativeElevation,b.camera.distance)<r;this.animation.advance(b.dt);return this.animation.enabled};a.prototype.intersect=function(b,a,c,d,e,f,g){h.intersectTriangleGeometry(b,a,d,e,f,void 0,g)};a.prototype.getGLMaterial=function(a){if(2===a.output)return new e.WaterGLMaterial(a);if(0===a.output)return this.params.isDraped&&
(a.output=5),new e.WaterGLMaterial(a)};a.prototype.createBufferWriter=function(){return new f.DefaultBufferWriter(f.PositionUVLayout)};a.prototype.createRenderer=function(a,c){return new q(a,c,this)};return a}(m.Material);d.WaterMaterial=c;var r=35E3});