// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/libs/gl-matrix-2/vec2f64 ../../../support/imageUtils ../../../../webgl/Texture".split(" "),function(e,a,f,g,h,k,l){Object.defineProperty(a,"__esModule",{value:!0});var m=f.getLogger("esri.views.3d.webgl-engine.materials.internal.waterMaterialUtils");a.waveAndPertubationTextureUrls=[e.toUrl("../../../../../images/materials/water/normals.jpg"),e.toUrl("../../../../../images/materials/water/perturbation.jpg")];
a.defaultWaterMaterialParameters={waveStrength:.06,waveTextureRepeat:32,waveDirection:h.vec2f64.fromValues(1,0),waveVelocity:.05,flowStrength:.015,flowOffset:-.5,animationSpeed:.35,color:[0,.35686,.4,1],transparent:!1,writeDepth:!0,slicePlaneEnabled:!1,isDraped:!1,receiveShadows:!0};a.wavePresets={"calm-small":{waveStrength:.005,perturbationStrength:.02,textureRepeat:12,waveVelocity:.01},"rippled-small":{waveStrength:.02,perturbationStrength:.09,textureRepeat:32,waveVelocity:.07},"slight-small":{waveStrength:.05,
perturbationStrength:.07,textureRepeat:28,waveVelocity:.1},"moderate-small":{waveStrength:.075,perturbationStrength:.07,textureRepeat:24,waveVelocity:.1},"calm-medium":{waveStrength:.003125,perturbationStrength:.01,textureRepeat:8,waveVelocity:.02},"rippled-medium":{waveStrength:.035,perturbationStrength:.015,textureRepeat:12,waveVelocity:.07},"slight-medium":{waveStrength:.06,perturbationStrength:.015,textureRepeat:8,waveVelocity:.12},"moderate-medium":{waveStrength:.09,perturbationStrength:.03,
textureRepeat:4,waveVelocity:.12},"calm-large":{waveStrength:.01,perturbationStrength:0,textureRepeat:4,waveVelocity:.05},"rippled-large":{waveStrength:.025,perturbationStrength:.01,textureRepeat:8,waveVelocity:.11},"slight-large":{waveStrength:.06,perturbationStrength:.02,textureRepeat:3,waveVelocity:.13},"moderate-large":{waveStrength:.14,perturbationStrength:.03,textureRepeat:2,waveVelocity:.15}};e=function(){function c(){this.loadingState=0;this.data=[]}c.prototype.getTextureProps=function(a,
b,d){void 0===d&&(d=!1);return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:10497,samplingMode:9987,hasMipmap:d,maxAnisotropy:8,width:a,height:b}};c.prototype.ready=function(){return 2===this.loadingState};c.prototype.loading=function(){return 1===this.loadingState};c.prototype.initialize=function(c){var b=this;this.loadingState=1;g.all(a.waveAndPertubationTextureUrls.map(function(b){return k.requestImage(b)})).then(function(a){a.forEach(function(a,d){b.data[d]=new l(c,b.getTextureProps(a.width,
a.height,!0),a)});b.loadingState=2}).catch(function(a){m.error("Failed to load textures for water material.",a);b.loadingState=0})};c.prototype.bindRepo=function(a){for(var b=0;b<this.data.length;b++)a.bindTexture(this.data[b],b)};return c}();a.waterTextureRepo=new e});