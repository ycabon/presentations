// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../../../../core/libs/gl-matrix-2/vec4f64 ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/Transform.glsl ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ./ShadedColorMaterial.glsl ../../../webgl/Program ../../../webgl/renderState".split(" "),
function(m,k,l,g,f,n,p,q,r,t,b,u,v,w,h){Object.defineProperty(k,"__esModule",{value:!0});f=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}l(a,b);a.prototype.initializeProgram=function(d){var c=a.shader.get(),e=this.configuration,c=c.build({slicePlaneEnabled:e.slicePlaneEnabled,sliceHighlightDisabled:e.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1});return new w(d.rctx,c.generateSource("vertex"),c.generateSource("fragment"),u.Default3D)};a.prototype.bindPass=function(d,
c,a){d=c.color;var e=c.shadingTint;this.program.setUniform4fv("color",d);this.program.setUniform4fv("shadedColor",this.blendColor(x,e,d));this.program.setUniform3fv("shadingDirection",c.shadingDirection);this.program.setUniformMatrix4fv("viewNormal",a.viewInvTransp)};a.prototype.blendColor=function(d,a,e){var b=1-a[3],c=a[3]+e[3]*b;if(0===c)return d[3]=c,d;d[0]=(a[0]*a[3]+e[0]*e[3]*b)/c;d[1]=(a[1]*a[3]+e[1]*e[3]*b)/c;d[2]=(a[2]*a[3]+e[2]*e[3]*b)/c;d[3]=e[3];return d};a.prototype.bindDraw=function(a){q.Transform.bindUniforms(this.program,
a);p.Slice.bindUniformsWithOrigin(this.program,this.configuration,a)};a.prototype.initializePipeline=function(){var a=this.configuration,b=0===a.output?a.transparent&&h.separateBlendingParams(770,1,771,771):null;return h.makePipelineState({blending:b,culling:function(a){return 0!==a&&{face:1===a?1028:1029,mode:2305}}(a.cullFace),depthTest:{func:515},depthWrite:a.writeDepth&&h.defaultDepthWriteParams,colorWrite:h.defaultColorWriteParams})};a.shader=new r.ReloadableShaderModule(v,"./ShadedColorMaterial.glsl",
m);return a}(t.ShaderTechnique);k.ShadedColorMaterialTechnique=f;f=function(f){function a(){var a=null!==f&&f.apply(this,arguments)||this;a.output=0;a.cullFace=0;a.slicePlaneEnabled=!1;a.sliceHighlightDisabled=!1;a.transparent=!1;a.writeDepth=!0;return a}l(a,f);g([b.parameter({count:7})],a.prototype,"output",void 0);g([b.parameter({count:3})],a.prototype,"cullFace",void 0);g([b.parameter()],a.prototype,"slicePlaneEnabled",void 0);g([b.parameter()],a.prototype,"sliceHighlightDisabled",void 0);g([b.parameter()],
a.prototype,"transparent",void 0);g([b.parameter()],a.prototype,"writeDepth",void 0);return a}(b.ShaderTechniqueConfiguration);k.ShadedColorMaterialTechniqueConfiguration=f;var x=n.vec4f64.create()});