// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(q,d,n,h,l,c,e,g,p){function a(a,f){return f?b[a].valueToClassName[f].split(" "):[]}Object.defineProperty(d,"__esModule",{value:!0});var b={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;
var f=this.values;return b<=a.xsmall?f.xsmall:b<=a.small?f.small:b<=a.medium?f.medium:b<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var f=this.values;return b<=a.xsmall?f.xsmall:b<=a.small?f.small:b<=a.medium?f.medium:b<=a.large?f.large:f.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},f={xsmall:544,small:768,medium:992,large:1200};d.BreakpointsOwner=function(k){return function(k){function m(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=k.apply(this,a)||this;a._breakpointsHandles=new e;a.orientation=null;
a.widthBreakpoint=null;a.heightBreakpoint=null;a.breakpoints=f;return a}n(m,k);m.prototype.initialize=function(){this._breakpointsHandles.add(g.init(this,["breakpoints","size"],this._updateClassNames))};m.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};Object.defineProperty(m.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<
b.large;if(!b){var c=JSON.stringify(f,null,2);console.warn("provided breakpoints are not valid, using defaults:"+c)}a=b?a:f;this._set("breakpoints",l({},a))}},enumerable:!0,configurable:!0});m.prototype._updateClassNames=function(){if(this.container){var f=c.acquire(),k=c.acquire(),m=!1,e;for(e in b){var r=this[e],g=b[e].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==g&&(m=!0,this[e]=g,a(e,r).forEach(function(a){return k.push(a)}),a(e,g).forEach(function(a){return f.push(a)}))}m&&
(this._applyClassNameChanges(f,k),c.release(f),c.release(k))}};m.prototype._applyClassNameChanges=function(a,b){var f=this.container;f&&(b.forEach(function(a){return f.classList.remove(a)}),a.forEach(function(a){return f.classList.add(a)}))};m.prototype._removeActiveClassNames=function(){var f=this.container;if(f)for(var c in b)a(c,this[c]).forEach(function(a){return f.classList.remove(a)})};h([p.property()],m.prototype,"breakpoints",null);h([p.property()],m.prototype,"orientation",void 0);h([p.property()],
m.prototype,"widthBreakpoint",void 0);h([p.property()],m.prototype,"heightBreakpoint",void 0);return m=h([p.subclass("esri.views.BreakpointsOwner")],m)}(p.declared(k))}})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(q,d,n,h,l,c){return function(e){function g(c){c=e.call(this,c)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=
!1;return c}n(g,e);Object.defineProperty(g.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});h([c.property({type:Number})],g.prototype,"factor",void 0);h([c.property({type:Number})],g.prototype,"offsetX",void 0);h([c.property({type:Number})],g.prototype,"offsetY",void 0);h([c.property()],g.prototype,"position",void 0);h([c.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],g.prototype,"version",null);h([c.property({type:Boolean})],
g.prototype,"visible",void 0);return g=h([c.subclass("esri.views.Magnifier")],g)}(c.declared(l))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/now ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(q,d,n,h,l,c,e,g,p,a,b,f,k,m,r,I,w,y,t,z,B,v,u,x,C,A,H){var D=p.getLogger("esri.views.MapView");return function(p){function d(b){var f=p.call(this,b)||this;f._stationaryTimer=null;f.frameTask=new B.default(f);f.featuresTilingScheme=null;f.fullOpacity=1;f.initialExtent=null;f.labelManager=null;f.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};f.resizeAlign="center";f.timeline=new H.Timeline;f.type="2d";f.constraints=new u;f.padding=
{top:0,right:0,bottom:0,left:0};var c=f.handles,k=function(){return f.notifyChange("updating")};c.add([f.watch("viewpoint",function(){f._lastStationaryEventTimestamp=a();f._flipStationary(160)},!0),f.on("resize",function(a){return f._resizeHandler(a)}),f.watch("animationManager.animation",function(a){f.animation=a}),f.allLayerViews.on("change",function(){k();c.remove("map-view-base-layerViewsUpdating");c.add(f.allLayerViews.map(function(a){return a.watch("updating",k)}),"map-view-base-layerViewsUpdating")})],
"map-view-base");return f}h(d,p);d.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(d.prototype,"animation",{set:function(a){var b=this,f=this._get("animation");a!==f&&(f&&f.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,f=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());b.frameTask.animationInProgress=
!1},a.when(f,f)))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;A.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else D.error("#center","incompatible spatialReference "+
JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"constraints",{set:function(a){var b=this,f=this._get("constraints");f&&(this.handles.remove("map-view-base-constraints"),f.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),
"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,A.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):
D.error("#extent","invalid extent size"):D.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,f=this.scale,c=this.viewpoint,k=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==f||-1!==k)||c?!1:!0},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:
this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;A.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;A.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",
a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stationary",{get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&
!("layerViews"in a)&&a.attached&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new e({targetGeometry:new c.Point,scale:0,rotation:0}),A.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",
a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?D.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?D.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):D.error("#viewpoint","geometry not defined")}},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,A.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},
enumerable:!0,configurable:!0});d.prototype.goTo=function(a,b){var f=this;if(a)return k.whenTrueOnce(this,"ready",b&&b.signal).then(function(){f.animation&&(f.animation=null);var c=n({animate:!0},b),k=A.createAsync(a,f);f._gotoTask={};return c.animate?f._gotoAnimated(k,c):f._gotoImmediate(k,c)});D.error("#goTo()","target cannot be null or undefined")};d.prototype.hitTest=function(a){return b.reject("Should be implemented by subclasses")};d.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(f){return n({},
f,{mapPoint:b.toMap(a)})})};d.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};d.prototype.isTileInfoRequired=function(){return!0};d.prototype.toScreen=function(a){if(!this.ready)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return f.createScreenPoint(a[0],a[1])};d.prototype.pixelSizeAt=function(a,b){if(!this.ready)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);
return this.content.pixelSizeAt([a,b])};d.prototype.requestLayerViewUpdate=function(a){this.ready&&this.frameTask.requestLayerViewUpdate(a)};d.prototype.requestUpdate=function(a){this.ready&&this.frameTask.requestUpdate(a)};d.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};d.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};
d.prototype.importLayerView=function(a){return v.layerView2DImporter.importLayerView(a)};d.prototype.hasLayerViewModule=function(a){return v.layerView2DImporter.hasLayerViewModule(a)};d.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new t;this.animation.update(a);return this.animation};d.prototype._cancellableGoTo=function(a,f,c){var k=this,m=c.then(function(){a===k._gotoTask&&(k.animation=null)}).catch(function(b){a===k._gotoTask&&(k.animation=
null,f.done||(f.stop(),k.frameTask.animationInProgress=!1));throw b;}),e=b.create(function(a){return a(m)},function(){a!==k._gotoTask||f.done||(f.stop(),k.frameTask.animationInProgress=!1)});f.when().catch(function(){a===k._gotoTask&&e.cancel&&e.cancel()});return e};d.prototype._gotoImmediate=function(a,f){var c=this,k=this._gotoTask,m=this._createOrReplaceAnimation(a);a=a.then(function(a){b.throwIfAborted(f);if(k!==c._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");c.viewpoint=
m.target=a;m.finish()});return this._cancellableGoTo(k,m,a)};d.prototype._gotoAnimated=function(a,b){var f=this,c=this._gotoTask,k=this._createOrReplaceAnimation(a);a=a.then(function(a){if(c!==f._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");k.update(a);f.animationManager.animate(k,f.viewpoint,b);return k.when().then(function(){},function(){})});return this._cancellableGoTo(c,k,a)};d.prototype._resizeHandler=function(a){var b=this.state;if(b){var f=this.content.viewpoint,c=
this.content.size.concat();b.size=[a.width,a.height];A.resize(f,f,c,this.content.size,this.resizeAlign);f=this.constraints.constrain(f,null);this.state.viewpoint=f}};d.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new z.default({view:this}));this._set("state",new x({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new C.TileInfoView(I.create({spatialReference:this.spatialReference,
size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};d.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,f=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:f});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",
a.rotation);this._set("scale",a.scale);this._set("spatialReference",f);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null};d.prototype._flipStationary=function(b){var f=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){f._stationaryTimer=null;var b=a()-f._lastStationaryEventTimestamp;160>b?f._stationaryTimer=f._flipStationary(b):
f.notifyChange("stationary")},b)};d.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var f=a&&a.targetGeometry||a;return b?f?b.equals(f.spatialReference)?a:r.canProject(f,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=r.project(f,b),a):r.project(f,b):null:null:a};d.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),f=this._get("scale"),c=this._normalizeInput(this._get("center")),k=this._normalizeInput(this._get("extent")),
m=this._get("rotation"),r=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(f=a.zoomToScale(b)):b=-1;var g=null,p=null,b=0,a=r&&r.rotation,d=r&&r.targetGeometry;d&&("extent"===d.type?g=d:"point"===d.type&&(p=d,b=r.scale));r=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));d=this._normalizeInput(this.initialExtent);k=k||g||r||d;c=c||p||k&&k.center;f=f||b||k&&A.extentToScale(k,this.size);return c&&f?new e({targetGeometry:c,scale:f,rotation:m||
a||0}):null};l([m.property()],d.prototype,"animation",null);l([m.property({readOnly:!0})],d.prototype,"animationManager",void 0);l([m.property({value:null,type:c.Point,dependsOn:["content.viewpoint","ready"]})],d.prototype,"center",null);l([m.property({type:u})],d.prototype,"constraints",null);l([m.property({readOnly:!0})],d.prototype,"content",void 0);l([m.property({value:null,type:c.Extent,dependsOn:["content.viewpoint","ready"]})],d.prototype,"extent",null);l([m.property({readOnly:!0})],d.prototype,
"featuresTilingScheme",void 0);l([m.property()],d.prototype,"fullOpacity",void 0);l([m.property({type:c.Extent})],d.prototype,"initialExtent",void 0);l([m.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],d.prototype,"initialExtentRequired",null);l([m.property()],d.prototype,"labelManager",void 0);l([m.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return n({top:0,right:0,bottom:0,left:0},a)}})],d.prototype,"padding",null);l([m.property({type:Object})],d.prototype,
"renderingOptions",void 0);l([m.property()],d.prototype,"resizeAlign",void 0);l([m.property({readOnly:!0,dependsOn:["content.viewpoint"]})],d.prototype,"resolution",null);l([m.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],d.prototype,"rotation",null);l([m.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],d.prototype,"scale",null);l([m.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],
d.prototype,"spatialReference",void 0);l([m.property({readOnly:!0})],d.prototype,"state",void 0);l([m.property()],d.prototype,"stationary",null);l([m.property({type:H.Timeline,readOnly:!0})],d.prototype,"timeline",void 0);l([m.property({readOnly:!0})],d.prototype,"type",void 0);l([m.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],d.prototype,"updating",null);l([m.property({value:null,type:e,dependsOn:["content.viewpoint","ready"]})],
d.prototype,"viewpoint",null);l([m.property({value:-1,dependsOn:["scale"]})],d.prototype,"zoom",null);return d=l([m.subclass("esri.views.MapViewBase")],d)}(m.declared(w.PopupView(y)))})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(q,d,n,h,l,c,e,g,p,a,b,f,k,m,r){var I=new e.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(e){function g(a){a=e.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}h(g,e);d=g;g.create=function(a){void 0===a&&(a=
{size:256,spatialReference:c.SpatialReference.WebMercator});var b=a.resolutionFactor||1,f=a.scales,m=a.size||256;a=a.spatialReference||c.SpatialReference.WebMercator;if(!k.isValid(a)){b=[];if(f)for(var e=0;e<f.length;e++){var g=f[e];b.push({level:e,scale:g,resolution:g})}else for(var r=5E-4,e=23;0<=e;e--)b.unshift({level:e,scale:r,resolution:r}),r*=2;return new d({dpi:96,lods:b,origin:new c.Point(0,0,a),size:[m,m],spatialReference:a})}var I=(e=k.getInfo(a))?new c.Point(e.origin[0],e.origin[1],a):
new c.Point(0,0,a),t=1/(39.37*p.getMetersPerUnitForSR(a)*96),h=[];if(f)for(e=0;e<f.length;e++)g=f[e],r=g*t,h.push({level:e,scale:g,resolution:r});else for(g=k.isGeographic(a)?512/m*5.916575275917094E8:256/m*5.91657527591555E8,f=Math.ceil(24/b),h.push({level:0,scale:g,resolution:g*t}),e=1;e<f;e++)g/=Math.pow(2,b),r=g*t,h.push({level:e,scale:g,resolution:r});return new d({dpi:96,lods:h,origin:I,size:[m,m],spatialReference:a})};Object.defineProperty(g.prototype,"isWrappable",{get:function(){var a=this.spatialReference,
b=this.origin;if(a&&b){var f=k.getInfo(a);return a.isWrappable&&Math.abs(f.origin[0]-b.x)<=f.dx}return!1},enumerable:!0,configurable:!0});g.prototype.readOrigin=function(a,b){return c.Point.fromJSON(n({spatialReference:b.spatialReference},a))};Object.defineProperty(g.prototype,"lods",{set:function(a){var b=this,f=0,c=0,k=[];this._levelToLOD={};a&&(f=-Infinity,c=Infinity,a.forEach(function(a){k.push(a.scale);f=a.scale>f?a.scale:f;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",
k);this._set("minScale",f);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});g.prototype.readSize=function(a,b){return[b.cols,b.rows]};g.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};g.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var f=Math.round(a);return b[f]+(f-a)*(b[Math.round(a-.5)]-b[f])};g.prototype.scaleToZoom=function(a){for(var b=this.scales,f=b.length-
1,c=0;c<f;c++){var k=b[c],m=b[c+1];if(k<=a)break;if(m===a)return c+1;if(k>a&&m<a)return c+1-(a-m)/(k-m)}return c};g.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};g.prototype.tileAt=function(a,b,c,e){var g=this.lodAt(a);if(!g)return null;var r;if("number"===typeof b)r=b,b=c;else{if(k.equals(b.spatialReference,this.spatialReference))r=b.x,b=b.y;else{e=m.project(b,this.spatialReference);
if(!e)return null;r=e.x;b=e.y}e=c}c=g.resolution*this.size[0];g=g.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:f.create()});e.level=a;e.row=Math.floor((this.origin.y-b)/g+.001);e.col=Math.floor((r-this.origin.x)/c+.001);this.updateTileInfo(e);return e};g.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var c=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=f.create());a.extent[0]=this.origin.x+a.col*
c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+b}};g.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};g.prototype.getTileBounds=function(a,b){var f=this.lodAt(b.level).resolution,c=f*this.size[0],f=f*this.size[1];a[0]=this.origin.x+b.col*c;a[1]=this.origin.y-(b.row+1)*f;
a[2]=a[0]+c;a[3]=a[1]+f;return a};g.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};g.prototype.clone=function(){return d.fromJSON(this.write({}))};g.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,f=0;f<a.length;f++){var c=a[f];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}};var d;l([a.property({type:Number,json:{write:!0}})],g.prototype,"compressionQuality",void 0);
l([a.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);l([a.property({type:String,json:{read:I.read,write:I.write,origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"format",void 0);l([a.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],g.prototype,"isWrappable",null);l([a.property({type:c.Point,json:{write:!0}})],g.prototype,"origin",void 0);l([a.reader("origin")],g.prototype,"readOrigin",null);l([a.property({type:[r],value:null,json:{write:!0}})],g.prototype,
"lods",null);l([a.property({readOnly:!0})],g.prototype,"minScale",void 0);l([a.property({readOnly:!0})],g.prototype,"maxScale",void 0);l([a.property({readOnly:!0})],g.prototype,"scales",void 0);l([a.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],g.prototype,"size",void 0);l([a.reader("size",["rows","cols"])],g.prototype,"readSize",null);l([a.writer("size",{cols:{type:b.Integer},rows:{type:b.Integer}})],g.prototype,"writeSize",null);l([a.property({type:c.SpatialReference,
json:{write:!0}})],g.prototype,"spatialReference",void 0);return g=d=l([a.subclass("esri.layers.support.TileInfo")],g)}(a.declared(g.JSONSupport))})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(q,d,n,h,l,c,e){return function(g){function p(a){a=g.call(this,a)||this;a.level=0;a.levelValue=
null;a.resolution=0;a.scale=0;return a}n(p,g);a=p;p.prototype.clone=function(){return new a({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var a;h([c.property({type:e.Integer,json:{write:!0}})],p.prototype,"level",void 0);h([c.property({type:String,json:{write:!0}})],p.prototype,"levelValue",void 0);h([c.property({type:Number,json:{write:!0}})],p.prototype,"resolution",void 0);h([c.property({type:Number,json:{write:!0}})],p.prototype,"scale",void 0);return p=
a=h([c.subclass("esri.layers.support.LOD")],p)}(c.declared(l.JSONSupport))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(q,d,n,h,l,c,e,g,p,a,b){Object.defineProperty(d,"__esModule",{value:!0});d.PopupView=function(f){return function(f){function k(){return null!==
f&&f.apply(this,arguments)||this}h(k,f);k.prototype.fetchPopupFeatures=function(a,b){return this._fetchPopupFeaturesAsync(a,b)};k.prototype._fetchPopupFeaturesAsync=function(b,f){return c(this,void 0,void 0,function(){var c,k,m,r,p,d;return e(this,function(e){switch(e.label){case 0:return[4,this.when()];case 1:return e.sent(),[4,this._prepareFetchPopupFeatures(b,f)];case 2:return c=e.sent(),k=c.location,m=this._queryLayerPopupFeatures(c,f),r=a.resolve(c.clientOnlyGraphics),p=[r].concat(m),d=a.eachAlwaysValues(p).then(g.flatten),
[2,{promise:d,location:k,promises:p}]}})})};k.prototype._queryLayerPopupFeatures=function(a,b){var f=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,event:p.isSome(b)?b.event:null,signal:p.isSome(b)?b.signal:null,defaultPopupTemplateEnabled:p.isSome(b)?!!b.defaultPopupTemplateEnabled:!1};return c.fetchPopupFeatures(f,a)})};k.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(p.isSome(b)&&b.defaultPopupTemplateEnabled)};
k.prototype._prepareFetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var f,c,k,m,g,r,p,d;return e(this,function(e){switch(e.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return f=e.sent(),c=f.clientGraphics,k=f.queryArea,m=f.location,g=this._getFetchPopupLayerViews(),r=this._graphicsPerFetchPopupLayerView(c,g),p=r.layerViewsAndGraphics,d=r.clientOnlyGraphics,[2,{clientOnlyGraphics:d,layerViewsAndGraphics:p,queryArea:k,location:m}]}})})};k.prototype._popupHitTestGraphics=
function(a,b){return c(this,void 0,void 0,function(){var f,c,k,m,g,r,p=this;return e(this,function(e){switch(e.label){case 0:return[4,this.popupHitTest(a)];case 1:return f=e.sent(),c=f.results,k=f.mapPoint,m=c.filter(function(a){return p._isValidPopupGraphic(a.graphic,b)}),g=m.length?m[0].mapPoint:null,r=m.map(function(a){return a.graphic}),[2,{clientGraphics:r,queryArea:k,location:k||g}]}})})};k.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(f){a._isValidPopupLayerView(f)&&
b.push(f)});p.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};k.prototype._isValidPopupLayerView=function(a){return p.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};k.prototype._graphicsPerFetchPopupLayerView=function(a,b){var f=[],c=new Map;b=b.map(function(a){var b=[];"layer"in a?c.set(a.layer,b):c.set(a.graphics,b);return{layerView:a,graphics:b}});for(var k=0;k<a.length;k++){var e=a[k],m=c.get(e.layer)||
null;m?m.push(e):f.push(e)}return{layerViewsAndGraphics:b,clientOnlyGraphics:f}};return k=l([b.subclass("esri.views.PopupView")],k)}(b.declared(f))}})},"esri/views/2d/AnimationManager":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(q,d,n,h,l,c,e,g,p,a,b,f){Object.defineProperty(d,
"__esModule",{value:!0});var k=function(){function a(a,f,c,k){var e=a.targetGeometry,m=f.targetGeometry;k?"string"===typeof k&&(k=b.parse(k)||b.easingFunctions.ease):k=b.easingFunctions.ease;this.easing=k;this.duration=c;this.sCenterX=e.x;this.sCenterY=e.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=m.x;this.tCenterY=m.y;this.tScale=f.scale;this.tRotation=f.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;
this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}a.prototype.applyRatio=function(a,b){var f=this.easing(b),c,k;1<=b?(b=this.tCenterX,c=this.tCenterY,k=this.tRotation,f=this.tScale):(b=this.sCenterX+f*this.dCenterX,c=this.sCenterY+f*this.dCenterY,k=this.sRotation+f*this.dRotation,f=this.sScale+f*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=c;a.scale=f;a.rotation=k};return a}();q=function(e){function m(a){a=e.call(this,
a)||this;a.duration=200;a.transition=null;a.easing=b.easingFunctions.ease;a.view=null;a.viewpoint=null;a.viewpoint=new c({targetGeometry:new l.Point,scale:0,rotation:0});a._updateTask=g.addFrameTask({postRender:a._postRender.bind(a)});a._updateTask.pause();return a}h(m,e);m.prototype.destroy=function(){this._updateTask.remove();this._updateTask=null};m.prototype.animate=function(a,b,c){var e=this;this.stop();f.copy(this.viewpoint,b);this.transition=new k(this.viewpoint,a.target,c&&c.duration||this.duration,
c&&c.easing||this.easing);b=function(){e.animation===a&&e._updateTask&&("finished"===a.state&&(e.transition.applyRatio(e.viewpoint,1),e.view.state&&(e.view.state.viewpoint=e.viewpoint.clone())),e.animation=null,e.updateFunction=null)};a.when(b,b);this._startTime=g.now();this._updateTask.resume();return this.animation=a};m.prototype.animateContinous=function(b,f){var c=this;this.stop();this.updateFunction=f;this.viewpoint=b;var k=new a({target:b.clone()});b=function(){c.animation===k&&c._updateTask&&
(c.animation=null,c.updateFunction=null)};k.when(b,b);this._startTime=g.now();this._updateTask.resume();return this.animation=k};m.prototype.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};m.prototype._postRender=function(b){var f=this.animation;f&&f.state!==a.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(g.now()-this._startTime)/this.transition.duration,f=1<=b,this.transition.applyRatio(this.viewpoint,b),f&&
this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};n([p.property()],m.prototype,"animation",void 0);n([p.property()],m.prototype,"duration",void 0);n([p.property()],m.prototype,"transition",void 0);n([p.property()],m.prototype,"easing",void 0);n([p.property()],m.prototype,"view",void 0);n([p.property()],m.prototype,"viewpoint",void 0);return m=n([p.subclass("esri.views.2d.AnimationManager")],m)}(p.declared(e));d.default=q})},"esri/views/2d/unitBezier":function(){define(["require",
"exports"],function(q,d){function n(d,c,e,g){function p(c,k){var e,m,g,r;g=c;for(m=0;8>m;m++){r=((f*g+b)*g+a)*g-c;if(Math.abs(r)<k)return g;e=(3*f*g+2*b)*g+a;if(1E-6>Math.abs(e))break;g-=r/e}e=0;m=1;g=c;if(g<e)return e;if(g>m)return m;for(;e<m;){r=((f*g+b)*g+a)*g;if(Math.abs(r-c)<k)break;c>r?e=g:m=g;g=.5*(m-e)+e}return g}var a=3*d,b=3*(e-d)-a,f=1-a-b,k=3*c,m=3*(g-c)-k,r=1-k-m;return function(a,b){void 0===b&&(b=1E-6);a=p(a,b);return((r*a+m)*a+k)*a}}Object.defineProperty(d,"__esModule",{value:!0});
d.unitBezier=n;var h=/^cubic-bezier\((.*)\)/;d.easingFunctions={};d.parse=function(l){var c=d.easingFunctions[l]||null;!c&&(l=h.exec(l))&&(l=l[1].split(",").map(function(c){return parseFloat(c.trim())}),4!==l.length||l.some(function(c){return isNaN(c)})||(c=n.apply(n,l)));return c};d.easingFunctions.ease=n(.25,.1,.25,1);d.easingFunctions.linear=n(0,0,1,1);d.easingFunctions.easeIn=d.easingFunctions["ease-in"]=n(.42,0,1,1);d.easingFunctions.easeOut=d.easingFunctions["ease-out"]=n(0,0,.58,1);d.easingFunctions.easeInOut=
d.easingFunctions["ease-in-out"]=n(.42,0,.58,1)})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(q,d,n,h,l,c,e,g,p,a,b,f,k,m,r,I,w,y,t,z,B,v){function u(a,f,c,k){return k&&c&&!k.equals(c)&&B.canProject(k,c)&&k.isWebMercator?(k.isWebMercator?(c=f[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(b.common.toRadian(c)),a=m.vec2.set(a,b.common.toRadian(f[0])*O,.5*O*Math.log((1+c)/(1-c)))):(c=b.common.toDegree(f[0]/O),a=m.vec2.set(a,c-360*Math.floor((c+180)/360),b.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*f[1]/O))))),a):m.vec2.copy(a,f)}function x(a){return a.wkid?a:
a.spatialReference||t.WGS84}function C(a,b){return b.type?m.vec2.set(a,b.x,b.y):m.vec2.copy(a,b)}function A(a,b){return Math.max(a.width/b[0],a.height/b[1])*M(a.spatialReference)}function H(a,b,f,k){return h(this,void 0,void 0,function(){var m,r,p,d,h,t,l,z,v,x,u,S,C,q,A,T,V,U,D,K,F,E,G,Q,N,P,L,M;return n(this,function(J){switch(J.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];c.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];r=
a.every(function(a){return"attributes"in a});p=a.some(function(a){return!a.geometry});d=a;if(!(r&&p&&b&&b.allLayerViews))return[3,2];h=new Map;t=0;for(l=a;t<l.length;t++)z=l[t],v=z.layer,x=h.get(v)||[],u=z.attributes[v.objectIdField],null!=u&&x.push(u),h.set(v,x);S=[];h.forEach(function(a,f){var c=b.allLayerViews.find(function(a){return a.layer.id===f.id});if("queryFeatures"in c){var k=f.createQuery();k.objectIds=a;k.returnGeometry=!0;S.push(c.queryFeatures(k))}});return[4,g.all(S)];case 1:C=J.sent();
q=[];A=0;for(T=C;A<T.length;A++)if((V=T[A])&&V.features&&V.features.length)for(U=0,D=V.features;U<D.length;U++)z=D[U],e.isSome(z.geometry)&&q.push(z.geometry);d=q;J.label=2;case 2:K=0,F=d,J.label=3;case 3:if(!(K<F.length))return[3,6];E=F[K];return[4,H(E,b,f,k)];case 4:k=J.sent(),J.label=5;case 5:return K++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];m=new y(a);return[3,12];case 8:if(!(a instanceof w))return[3,9];m=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];m=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];G=a.layer;Q=b.allLayerViews.find(function(a){return a.layer.id===G.id});if(!("queryFeatures"in Q))return[3,12];N=G.createQuery();N.objectIds=[a.attributes[G.objectIdField]];N.returnGeometry=!0;return[4,Q.queryFeatures(N)];case 11:P=J.sent(),m=e.get(P,"features",0,"geometry"),J.label=12;case 12:if(e.isNone(m))return[2,null];L="point"===m.type?new I({xmin:m.x,
ymin:m.y,xmax:m.x,ymax:m.y,spatialReference:m.spatialReference}):m.extent;if(!L)return[2,null];M=B.canProject(L,f);if(!L.spatialReference.equals(f)&&M)L=B.project(L,f);else if(!M)return[2,null];k=k?k.union(L):L.clone();return[2,k]}})})}function D(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var f=0,c=0,k=0;k<a.length;k++)(b=a[k].layer)&&b.minScale&&b.maxScale&&(f=b.minScale<f?b.minScale:f,c=b.maxScale>c?b.maxScale:c);return f&&c?{min:f,max:c}:null}}}function E(a,b){return h(this,void 0,void 0,function(){var f,c,k,m,e,g,p,d,h,t,w,z,q,S,T,K;return n(this,function(J){switch(J.label){case 0:if(!a||!b)return[2,new l({targetGeometry:new y,scale:0,rotation:0})];f=b.spatialReference;c=b.size;k=b.viewpoint;m=b.constraints;e=null;a instanceof l?e=a:
a.viewpoint?e=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(e=a.target);g=null;if(!e||!e.targetGeometry)return[3,1];g=e.targetGeometry;return[3,10];case 1:if(!(a instanceof I))return[3,2];g=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,H(a.center,b,f)]:[3,10];case 3:return(h=J.sent())?[3,5]:[4,H(a.extent,b,f)];case 4:h=J.sent(),J.label=5;case 5:return(d=h)?[3,7]:[4,H(a.target,b,f)];case 6:d=J.sent(),J.label=7;case 7:return(p=d)?[3,9]:[4,H(a,b,
f)];case 8:p=J.sent(),J.label=9;case 9:g=p,J.label=10;case 10:!g&&k&&k.targetGeometry?g=k.targetGeometry:!g&&b.extent&&(g=b.extent);t=x(g);f||(f=x(b.spatialReference||b.extent||g));if(!v.canProject(g,f)&&t&&!t.equals(f))return[2,null];w=C(r.vec2f64.create(),g.center?g.center:g);z=new y(u(w,w,t,f),f);q=null;q=e&&e.targetGeometry&&"point"===e.targetGeometry.type?e.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&m&&m.effectiveLODs?m.zoomToScale(a.zoom):Array.isArray(g)||
"point"===g.type||"extent"===g.type&&0===g.width&&0===g.height?b.extent&&B.canProject(b.extent,f)?A(B.project(b.extent,f),c):b.extent?A(b.extent,c):k.scale:B.canProject(g.extent,f)?A(B.project(g.extent,f),c):A(g.extent,c);if(S=D(a))S.min&&S.min>q?q=S.min:S.max&&S.max<q&&(q=S.max);T=0;e?T=e.rotation:a.hasOwnProperty("rotation")?T=a.rotation:k&&(T=k.rotation);K=new l({targetGeometry:z,scale:q,rotation:T});m&&(K=m.fit(K),m.rotationEnabled||(K.rotation=T));return[2,K]}})})}function F(a,b){var f=a.targetGeometry,
c=b.targetGeometry;f.x=c.x;f.y=c.y;f.spatialReference=c.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function G(a,b,f){return f?m.vec2.set(a,.5*(b[0]-f.right+f.left),.5*(b[1]-f.bottom+f.top)):m.vec2.scale(a,b,.5)}function P(a,b,c,k){d.getTransform(a,b,c,k);return f.mat2d.invert(a,a)}function Q(a,b,f){var c=N(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return m.vec2.set(a,Math.round(f[1]*c+f[0]*b),Math.round(f[1]*b+f[0]*c))}function K(a){var b=a.scale;a=a.targetGeometry.spatialReference;
a=z.isValid(a)?1/(39.37*p.getMetersPerUnitForSR(a)*96):1;return b*a}function N(a){return b.common.toRadian(a.rotation)||0}function M(a){return z.isValid(a)?39.37*p.getMetersPerUnitForSR(a)*96:1}function R(a){return a.isWrappable?(a=z.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(d,"__esModule",{value:!0});var O=a.wgs84Radius,L=180/Math.PI;d.extentToScale=A;d.create=E;d.copy=F;d.getAnchor=G;d.getExtent=function(){var a=r.vec2f64.create();return function(b,f,c){var k=f.targetGeometry;C(a,
k);f=.5*K(f);b.xmin=a[0]-f*c[0];b.ymin=a[1]-f*c[1];b.xmax=a[0]+f*c[0];b.ymax=a[1]+f*c[1];b.spatialReference=k.spatialReference;return b}}();d.setExtent=function(a,b,f,c,k){d.centerAt(a,b,f.center);a.scale=A(f,c);k&&k.constraints&&k.constraints.constrain(a);return a};d.getOuterExtent=function(){var a=r.vec2f64.create(),b=r.vec2f64.create();return function(f,c,k){C(a,c.targetGeometry);Q(b,c,k);k=.5*K(c);f.set({xmin:a[0]-k*b[0],ymin:a[1]-k*b[1],xmax:a[0]+k*b[0],ymax:a[1]+k*b[1],spatialReference:c.targetGeometry.spatialReference});
return f}}();d.getOuterSize=Q;d.getPaddingScreenTranslation=function(){var a=r.vec2f64.create();return function(b,f,c){return m.vec2.sub(b,m.vec2.scale(b,f,.5),G(a,f,c))}}();d.getPaddingMapTranslation=function(){var a=k.mat2df64.create(),b=r.vec2f64.create();return function(c,k,e,g){var r=K(k);k=N(k);m.vec2.set(b,r,r);f.mat2d.fromScaling(a,b);f.mat2d.rotate(a,a,k);f.mat2d.translate(a,a,d.getPaddingScreenTranslation(b,e,g));f.mat2d.translate(a,a,[0,g.top-g.bottom]);return m.vec2.set(c,a[4],a[5])}}();
d.getResolution=K;d.getResolutionToScaleFactor=M;d.getMatrix=function(){var a=r.vec2f64.create(),b=r.vec2f64.create(),c=r.vec2f64.create();return function(k,e,g,r,p,d){m.vec2.negate(a,e);m.vec2.scale(b,g,.5*d);m.vec2.set(c,1/r*d,-1/r*d);f.mat2d.identity(k);f.mat2d.translate(k,k,b);p&&f.mat2d.rotate(k,k,p);f.mat2d.scale(k,k,c);f.mat2d.translate(k,k,a);return k}}();d.getTransform=function(){var a=r.vec2f64.create();return function(b,f,c,k){var e=K(f),m=N(f);C(a,f.targetGeometry);return d.getMatrix(b,
a,c,e,m,k)}}();d.getTransformNoRotation=function(){var a=r.vec2f64.create();return function(b,f,c,k){var e=K(f);C(a,f.targetGeometry);return d.getMatrix(b,a,c,e,0,k)}}();d.getWorldWidth=R;d.getWorldScreenWidth=function(a,b){return Math.round(R(a)/b)};d.createAsync=function(a,b){return E(a,b)};d.angleBetween=function(){var a=r.vec2f64.create(),b=r.vec2f64.create(),f=[0,0,0];return function(c,k,e){m.vec2.subtract(a,c,k);m.vec2.normalize(a,a);m.vec2.subtract(b,c,e);m.vec2.normalize(b,b);m.vec2.cross(f,
a,b);c=Math.acos(m.vec2.dot(a,b)/(m.vec2.length(a)*m.vec2.length(b)))*L;0>f[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();d.addPadding=function(){var a=r.vec2f64.create();return function(b,f,c,k){var e=b.targetGeometry;F(b,f);d.getPaddingMapTranslation(a,f,c,k);e.x+=a[0];e.y+=a[1];return b}}();d.removePadding=function(){var a=r.vec2f64.create();return function(b,f,c,k){var e=b.targetGeometry;F(b,f);d.getPaddingMapTranslation(a,f,c,k);e.x-=a[0];e.y-=a[1];return b}}();d.centerAt=function(){var a=r.vec2f64.create();
return function(b,f,c){F(b,f);f=b.targetGeometry;var k=x(c),e=x(f);C(a,c);u(a,a,k,e);f.x=a[0];f.y=a[1];return b}}();d.pixelSizeAt=function(a,b){return K(b)};d.resize=function(){var a=r.vec2f64.create();return function(b,f,c,k,e){e||(e="center");m.vec2.sub(a,c,k);m.vec2.scale(a,a,.5);c=a[0];k=a[1];switch(e){case "center":m.vec2.set(a,0,0);break;case "left":m.vec2.set(a,-c,0);break;case "top":m.vec2.set(a,0,k);break;case "right":m.vec2.set(a,c,0);break;case "bottom":m.vec2.set(a,0,-k);break;case "top-left":m.vec2.set(a,
-c,k);break;case "bottom-left":m.vec2.set(a,-c,-k);break;case "top-right":m.vec2.set(a,c,k);break;case "bottom-right":m.vec2.set(a,c,-k)}d.translateBy(b,f,a);return b}}();d.rotateBy=function(a,b,f){F(a,b);a.rotation+=f;return a};d.rotateTo=function(a,b,f){F(a,b);a.rotation=f;return a};d.scaleBy=function(){var a=r.vec2f64.create();return function(b,f,c,k,e){F(b,f);isNaN(c)||0===c||(d.toMap(a,k,f,e),b.scale=f.scale*c,d.toScreen(a,a,b,e),d.translateBy(b,b,m.vec2.set(a,a[0]-k[0],k[1]-a[1])));return b}}();
d.scaleTo=function(a,b,f){F(a,b);a.scale=f;return a};d.scaleAndRotateBy=function(){var a=r.vec2f64.create();return function(b,f,c,k,e,g){F(b,f);isNaN(c)||0===c||(d.toMap(a,e,f,g),b.scale=f.scale*c,b.rotation+=k,d.toScreen(a,a,b,g),d.translateBy(b,b,m.vec2.set(a,a[0]-e[0],e[1]-a[1])));return b}}();d.padAndScaleAndRotateBy=function(){var a=r.vec2f64.create(),b=r.vec2f64.create();return function(f,c,k,e,g,r,p){d.getPaddingScreenTranslation(b,r,p);m.vec2.add(a,g,b);return e?d.scaleAndRotateBy(f,c,k,e,
a,r):d.scaleBy(f,c,k,a,r)}}();d.toMap=function(){var a=k.mat2df64.create();return function(b,f,c,k){return m.vec2.transformMat2d(b,f,P(a,c,k,1))}}();d.toScreen=function(){var a=k.mat2df64.create();return function(b,f,c,k){return m.vec2.transformMat2d(b,f,d.getTransform(a,c,k,1))}}();d.translateBy=function(){var a=r.vec2f64.create(),b=k.mat2df64.create();return function(c,k,e){F(c,k);var g=K(k),p=c.targetGeometry;f.mat2d.fromRotation(b,N(k));f.mat2d.scale(b,b,r.vec2f64.fromValues(g,g));m.vec2.transformMat2d(a,
e,b);p.x+=a[0];p.y+=a[1];return c}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.common=n})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat2d=n})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(q,d,n){function h(c,e,
g){var p=e[0],a=e[1],b=e[2],f=e[3],k=e[4];e=e[5];var m=g[0],r=g[1],d=g[2],h=g[3],l=g[4];g=g[5];c[0]=p*m+b*r;c[1]=a*m+f*r;c[2]=p*d+b*h;c[3]=a*d+f*h;c[4]=p*l+b*g+k;c[5]=a*l+f*g+e;return c}function l(c,e,g){c[0]=e[0]-g[0];c[1]=e[1]-g[1];c[2]=e[2]-g[2];c[3]=e[3]-g[3];c[4]=e[4]-g[4];c[5]=e[5]-g[5];return c}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c};d.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;
c[5]=0;return c};d.set=function(c,e,g,p,a,b,f){c[0]=e;c[1]=g;c[2]=p;c[3]=a;c[4]=b;c[5]=f;return c};d.invert=function(c,e){var g=e[0],p=e[1],a=e[2],b=e[3],f=e[4];e=e[5];var k=g*b-p*a;if(!k)return null;k=1/k;c[0]=b*k;c[1]=-p*k;c[2]=-a*k;c[3]=g*k;c[4]=(a*e-b*f)*k;c[5]=(p*f-g*e)*k;return c};d.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};d.multiply=h;d.rotate=function(c,e,g){var p=e[0],a=e[1],b=e[2],f=e[3],k=e[4];e=e[5];var m=Math.sin(g);g=Math.cos(g);c[0]=p*g+b*m;c[1]=a*g+f*m;c[2]=p*-m+b*g;c[3]=
a*-m+f*g;c[4]=k;c[5]=e;return c};d.scale=function(c,e,g){var p=e[1],a=e[2],b=e[3],f=e[4],k=e[5],m=g[0];g=g[1];c[0]=e[0]*m;c[1]=p*m;c[2]=a*g;c[3]=b*g;c[4]=f;c[5]=k;return c};d.translate=function(c,e,g){var p=e[0],a=e[1],b=e[2],f=e[3],k=e[4];e=e[5];var m=g[0];g=g[1];c[0]=p;c[1]=a;c[2]=b;c[3]=f;c[4]=p*m+b*g+k;c[5]=a*m+f*g+e;return c};d.fromRotation=function(c,e){var g=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=g;c[2]=-g;c[3]=e;c[4]=0;c[5]=0;return c};d.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=
e[1];c[4]=0;c[5]=0;return c};d.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=e[0];c[5]=e[1];return c};d.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};d.add=function(c,e,g){c[0]=e[0]+g[0];c[1]=e[1]+g[1];c[2]=e[2]+g[2];c[3]=e[3]+g[3];c[4]=e[4]+g[4];c[5]=e[5]+g[5];return c};d.subtract=l;d.multiplyScalar=
function(c,e,g){c[0]=e[0]*g;c[1]=e[1]*g;c[2]=e[2]*g;c[3]=e[3]*g;c[4]=e[4]*g;c[5]=e[5]*g;return c};d.multiplyScalarAndAdd=function(c,e,g,p){c[0]=e[0]+g[0]*p;c[1]=e[1]+g[1]*p;c[2]=e[2]+g[2]*p;c[3]=e[3]+g[3]*p;c[4]=e[4]+g[4]*p;c[5]=e[5]+g[5]*p;return c};d.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]};d.equals=function(c,e){var g=c[0],p=c[1],a=c[2],b=c[3],f=c[4];c=c[5];var k=e[0],m=e[1],r=e[2],d=e[3],h=e[4];e=e[5];return Math.abs(g-k)<=
n.EPSILON*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(p-m)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(m))&&Math.abs(a-r)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(r))&&Math.abs(b-d)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(d))&&Math.abs(f-h)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(c-e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};d.mul=h;d.sub=l})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.mat2df64=n})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,1,0,0]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};d.fromValues=function(d,h,l,c,e,g){return[d,h,l,c,e,g]};d.createView=function(d,h){return new Float64Array(d,h,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(q,
d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec2=n})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(q,d,n){function h(a,f,c){a[0]=f[0]-c[0];a[1]=f[1]-c[1];return a}function l(a,f,c){a[0]=f[0]*c[0];a[1]=f[1]*c[1];return a}function c(a,f,c){a[0]=f[0]/c[0];a[1]=f[1]/c[1];return a}function e(a,f){var b=f[0]-a[0];a=f[1]-a[1];return Math.sqrt(b*b+a*a)}function g(a,f){var b=f[0]-a[0];a=f[1]-a[1];return b*b+a*a}function p(a){var b=a[0];a=a[1];
return Math.sqrt(b*b+a*a)}function a(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,f){a[0]=f[0];a[1]=f[1];return a};d.set=function(a,f,c){a[0]=f;a[1]=c;return a};d.add=function(a,f,c){a[0]=f[0]+c[0];a[1]=f[1]+c[1];return a};d.subtract=h;d.multiply=l;d.divide=c;d.ceil=function(a,f){a[0]=Math.ceil(f[0]);a[1]=Math.ceil(f[1]);return a};d.floor=function(a,f){a[0]=Math.floor(f[0]);a[1]=Math.floor(f[1]);return a};d.min=function(a,f,c){a[0]=Math.min(f[0],
c[0]);a[1]=Math.min(f[1],c[1]);return a};d.max=function(a,f,c){a[0]=Math.max(f[0],c[0]);a[1]=Math.max(f[1],c[1]);return a};d.round=function(a,f){a[0]=Math.round(f[0]);a[1]=Math.round(f[1]);return a};d.scale=function(a,f,c){a[0]=f[0]*c;a[1]=f[1]*c;return a};d.scaleAndAdd=function(a,f,c,e){a[0]=f[0]+c[0]*e;a[1]=f[1]+c[1]*e;return a};d.distance=e;d.squaredDistance=g;d.length=p;d.squaredLength=a;d.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];return a};d.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];return a};
d.normalize=function(a,f){var b=f[0],c=f[1],b=b*b+c*c;0<b&&(b=1/Math.sqrt(b),a[0]=f[0]*b,a[1]=f[1]*b);return a};d.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]};d.cross=function(a,f,c){f=f[0]*c[1]-f[1]*c[0];a[0]=a[1]=0;a[2]=f;return a};d.lerp=function(a,f,c,e){var b=f[0];f=f[1];a[0]=b+e*(c[0]-b);a[1]=f+e*(c[1]-f);return a};d.random=function(a,f){f=f||1;var b=2*n.RANDOM()*Math.PI;a[0]=Math.cos(b)*f;a[1]=Math.sin(b)*f;return a};d.transformMat2=function(a,f,c){var b=f[0];f=f[1];a[0]=c[0]*b+c[2]*f;a[1]=
c[1]*b+c[3]*f;return a};d.transformMat2d=function(a,f,c){var b=f[0];f=f[1];a[0]=c[0]*b+c[2]*f+c[4];a[1]=c[1]*b+c[3]*f+c[5];return a};d.transformMat3=function(a,f,c){var b=f[0];f=f[1];a[0]=c[0]*b+c[3]*f+c[6];a[1]=c[1]*b+c[4]*f+c[7];return a};d.transformMat4=function(a,f,c){var b=f[0];f=f[1];a[0]=c[0]*b+c[4]*f+c[12];a[1]=c[1]*b+c[5]*f+c[13];return a};d.rotate=function(a,f,c,e){var b=f[0]-c[0];f=f[1]-c[1];var k=Math.sin(e);e=Math.cos(e);a[0]=b*e-f*k+c[0];a[1]=b*k+f*e+c[1];return a};d.angle=function(a,
f){var b=a[0];a=a[1];var c=f[0];f=f[1];var e=b*b+a*a;0<e&&(e=1/Math.sqrt(e));var g=c*c+f*f;0<g&&(g=1/Math.sqrt(g));b=(b*c+a*f)*e*g;return 1<b?0:-1>b?Math.PI:Math.acos(b)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,f){return a[0]===f[0]&&a[1]===f[1]};d.equals=function(a,f){var b=a[0];a=a[1];var c=f[0];f=f[1];return Math.abs(b-c)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))&&Math.abs(a-f)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))};d.len=p;d.sub=h;d.mul=l;d.div=
c;d.dist=e;d.sqrDist=g;d.sqrLen=a})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f64=n})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0]};d.clone=function(d){return[d[0],d[1]]};d.fromValues=function(d,h){return[d,h]};d.fromArray=function(d){for(var h=
[0,0],l=Math.min(2,d.length),c=0;c<l;++c)h[c]=d[c];return h};d.createView=function(d,h){return new Float64Array(d,h,2)};d.zeros=function(){return[0,0]};d.ones=function(){return[1,1]};d.unitX=function(){return[1,0]};d.unitY=function(){return[0,1]};d.ZEROS=[0,0];d.ONES=[1,1];d.UNIT_X=[1,0];d.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d){var c=this;this.view=
d;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio;c._updateParameters.renderingOptions=c.view.renderingOptions};this.update=function(){if(c.updateEnabled){var e=c.view,g=e.labelManager,p=c.graphicsView,a=e.allLayerViews.toArray().filter(function(a){return!("layerViews"in a)&&a.isFulfilled()}),
b=a.length,f=e.state,k=0;for(;k<a.length;k++)if(e=a[k],e.attached){var m=e.lastUpdateId;if(null==m||!c.stationary&&!e.moving)e.moving=!0,e.moveStart();m!==f.id&&e.viewChange();c.stationary&&e.moving&&(e.moving=!1,e.moveEnd());e.lastUpdateId=f.id}g&&g.lastUpdateId!==f.id&&(g.viewChange(),g.lastUpdateId=f.id);p&&p.lastUpdateId!==f.id&&(p.viewChange(),p.lastUpdateId=f.id);g=c._layerViewsTrash;for(p=0;p<g.length;p++)e=g[p],c._detachLayerView(e);for(p=g.length=0;p<b;p++)e=a[p],e.isFulfilled()&&!e.attached&&
c._attachLayerView(e);a=c._updateParameters;b=c._layerViewsToUpdate;e=b.slice();p=b.length=0;for(f=e;p<f.length;p++)e=f[p],"layerViews"in e?b.push(e):e.processUpdate(a);b=c._updatablesToUpdate;e=b.slice();for(b=b.length=0;b<e.length;b++)e[b].processUpdate(a);c.animationInProgress||0!==c._layerViewsToUpdate.length||0!==c._updatablesToUpdate.length||0!==g.length||c._frameTaskHandle.pause()}}}d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var d=this;this.stationary=this.view.stationary;
this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(d._layerViewsTrash,c.removed);d.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){d.stationary=c;d.requestFrame()});this._frameTaskHandle=
n.addFrameTask(this)};d.prototype.stop=function(){var d=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){"layerViews"in c||d._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0,this.animationInProgress=!1)};d.prototype.requestLayerViewUpdate=
function(d){this._layerViewsToUpdate.push(d);this.requestFrame()};d.prototype.requestUpdate=function(d){this._updatablesToUpdate.push(d);this.requestFrame()};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};d.prototype._attachLayerView=function(d){d.attached||(d.attached=!0,d.attach(),this._updateParameters.stationary?d.moving=!1:(d.moving=!0,d.moveStart()))};d.prototype._detachLayerView=function(d){d.attached&&(d.detach(),d.attached=!1,d.moving=!1)};return d}();
d.default=q})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(q,d,n,h){function l(){return Promise.all([new Promise(function(c,a){q(["../webgl"],c,a)}),new Promise(function(c,a){q(["./engine"],c,a)})])}Object.defineProperty(d,"__esModule",{value:!0});var c=function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/TileLayerView2D"],c,a)})})},e=function(){return l().then(function(){return new Promise(function(c,
a){q(["./layers/FeatureLayerView2D"],c,a)})})},g={"base-dynamic":function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/BaseDynamicLayerView2D"],c,a)})})},"base-tile":c,"bing-maps":c,csv:e,"geo-rss":function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/GeoRSSLayerView2D"],c,a)})})},feature:e,geojson:e,graphics:function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/GraphicsLayerView2D"],c,a)})})},group:function(){return l().then(function(){return new Promise(function(c,
a){q(["../layers/GroupLayerView"],c,a)})})},imagery:function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/ImageryLayerView2D"],c,a)})})},"imagery-tile":function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/TileImageryLayerView2D"],c,a)})})},kml:function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/KMLLayerView2D"],c,a)})})},"map-image":function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/MapImageLayerView2D"],
c,a)})})},"map-notes":function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/MapNotesLayerView2D"],c,a)})})},"open-street-map":c,route:function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/RouteLayerView2D"],c,a)})})},stream:function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/StreamLayerView2D"],c,a)})})},tile:c,"vector-tile":function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/VectorTileLayerView2D"],
c,a)})})},"web-tile":c,wms:function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/WMSLayerView2D"],c,a)})})},wmts:function(){return l().then(function(){return new Promise(function(c,a){q(["./layers/WMTSLayerView2D"],c,a)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};d.layerView2DImporter={hasLayerViewModule:function(c){return h.isSome(g[c.type])},importLayerView:function(c){var a=
g[c.type];if(!h.isSome(a))throw c=c.declaredClass?c.declaredClass.slice(c.declaredClass.lastIndexOf(".")+1):"Unknown",a=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new n(a+":view-not-supported",c+" is not supported in 2D");return a(c)}}})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(q,d,n,h,l,c,e,g,p){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}n(b,a);b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(b.prototype,"_rotation",{get:function(){return new g({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_zoom",{get:function(){return new p({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};b.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};b.prototype.fit=function(a){return this._zoom.fit(a)};b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};b.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};b.prototype.snapScale=
function(a){return this._zoom.snapToClosestScale(a)};b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],b.prototype,"effectiveLODs",void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],b.prototype,"effectiveMinScale",void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],b.prototype,"effectiveMaxScale",
void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],b.prototype,"effectiveMinZoom",void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],b.prototype,"effectiveMaxZoom",void 0);h([c.property({type:[e]})],b.prototype,"lods",void 0);h([c.property()],b.prototype,"minScale",void 0);h([c.property()],b.prototype,"maxScale",void 0);h([c.property()],b.prototype,"minZoom",void 0);h([c.property()],b.prototype,"maxZoom",void 0);h([c.property()],b.prototype,"rotationEnabled",
void 0);h([c.property()],b.prototype,"snapToZoom",void 0);h([c.property()],b.prototype,"view",void 0);h([c.property({type:g,dependsOn:["rotationEnabled"]})],b.prototype,"_rotation",null);h([c.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],b.prototype,"_defaultLODs",null);h([c.property({readOnly:!0,type:p,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],b.prototype,"_zoom",null);return b=h([c.subclass("esri.views.2d.MapViewConstraints")],
b)}(c.declared(l.EventedAccessor))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(q,d,n,h,l,c){return function(e){function g(){var a=null!==e&&e.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}n(g,e);d=g;g.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||
(a.rotation=b.rotation);return a};g.prototype.clone=function(){return new d({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var d;h([c.property()],g.prototype,"enabled",void 0);h([c.property()],g.prototype,"rotationEnabled",void 0);return g=d=h([c.subclass("esri.views.2d.constraints.RotationConstraint")],g)}(c.declared(l))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(q,d,n,h,l,c,e){return function(g){function d(a){a=g.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}n(d,g);a=d;d.prototype.initialize=function(){var a=this,f,c,e=this.lods;c=this.minScale;f=this.maxScale;var g=this.minZoom,d=this.maxZoom,p=-1,h=-1,t=!1,l=!1;0!==c&&0!==f&&c<f&&(f=[f,c],c=f[0],
f=f[1]);if(e&&e.length){e=e.map(function(a){return a.clone()});e.sort(function(a,b){return b.scale-a.scale});e.forEach(function(a,b){return a.level=b});for(var n,v=0,u=e;v<u.length;v++){var x=u[v];!t&&0<c&&c>=x.scale&&(p=x.level,t=!0);!l&&0<f&&f>=x.scale&&(h=n?n.level:-1,l=!0);n=x}-1===g&&(g=0===c?0:p);-1===d&&(d=0===f?e.length-1:h);g=Math.max(g,0);g=Math.min(g,e.length-1);d=Math.max(d,0);d=Math.min(d,e.length-1);g>d&&(c=[d,g],g=c[0],d=c[1]);c=e[g].scale;f=e[d].scale;e.splice(0,g);e.splice(d-g+1,
e.length);e.forEach(function(b,f){a._lodByScale[b.scale]=b;a._scales[f]=b.scale});this._set("effectiveLODs",e);this._set("effectiveMinZoom",g);this._set("effectiveMaxZoom",d)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",f)};d.prototype.constrain=function(a,f){if(f&&a.scale===f.scale)return a;var b=this.effectiveMinScale,c=this.effectiveMaxScale,e=a.targetGeometry,g=f&&f.targetGeometry,d=0!==b&&a.scale>b;if(0!==c&&a.scale<c||d)b=d?b:c,g&&(f=(b-f.scale)/(a.scale-f.scale),e.x=g.x+(e.x-
g.x)*f,e.y=g.y+(e.y-g.y)*f),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};d.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};d.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=
b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};d.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,e;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var g=0;g<b.length-1;g++){c=b[g];e=b[g+1];if(e===a)return b=g+this.effectiveMinZoom,b+1;if(c>a&&e<a)return b=g+this.effectiveMinZoom,b+1-(a-e)/(c-e)}};d.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;
a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};d.prototype.snapToNextScale=function(a,f){void 0===f&&(f=.5);if(!this.effectiveLODs)return a*f;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};d.prototype.snapToPreviousScale=function(a,f){void 0===f&&(f=2);if(!this.effectiveLODs)return a*f;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};d.prototype.clone=function(){return new a({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};d.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var a;h([c.property({readOnly:!0})],d.prototype,"effectiveLODs",void 0);h([c.property({readOnly:!0})],d.prototype,"effectiveMinZoom",void 0);h([c.property({readOnly:!0})],d.prototype,"effectiveMaxZoom",void 0);h([c.property({readOnly:!0})],d.prototype,
"effectiveMinScale",void 0);h([c.property({readOnly:!0})],d.prototype,"effectiveMaxScale",void 0);h([c.property({type:[e]})],d.prototype,"lods",void 0);h([c.property()],d.prototype,"minZoom",void 0);h([c.property()],d.prototype,"maxZoom",void 0);h([c.property()],d.prototype,"minScale",void 0);h([c.property()],d.prototype,"maxScale",void 0);h([c.property()],d.prototype,"snapToZoom",void 0);return d=a=h([c.subclass("esri.views.2d.constraints.ZoomConstraint")],d)}(c.declared(l))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(q,d,n,h,l,c,e,g,p,a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}n(b,a);h([c.property()],b.prototype,"left",void 0);h([c.property()],b.prototype,"top",void 0);h([c.property()],b.prototype,"right",void 0);h([c.property()],b.prototype,"bottom",void 0);return b=h([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(l));return function(f){function k(){for(var c=[],k=0;k<arguments.length;k++)c[k]=arguments[k];
var d=f.apply(this,c)||this;d.content=new a;d._updateContent=function(){var a=g.vec2f64.create();return function(){var b=d._get("size"),f=d._get("padding");if(b&&f){var c=d.content;e.vec2.set(a,f.left+f.right,f.top+f.bottom);e.vec2.subtract(a,b,a);e.vec2.copy(c.size,a);if(b=c.viewpoint)d.viewpoint=b}}}();d.watch(["size","padding"],d._updateContent,!0);d.padding=new b;d.size=[0,0];return d}n(k,f);Object.defineProperty(k.prototype,"padding",{set:function(a){this._set("padding",a||new b)},enumerable:!0,
configurable:!0});Object.defineProperty(k.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;p.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var f=b.targetGeometry;a.center[0]=f.x;a.center[1]=f.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=f.spatialReference;this._update()}},enumerable:!0,configurable:!0});h([c.property()],k.prototype,"content",void 0);h([c.property({type:b})],k.prototype,"padding",null);h([c.property()],
k.prototype,"viewpoint",null);return k=h([c.subclass("esri.views.2d.PaddedViewState")],k)}(c.declared(a))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(q,d,n,h,l,c,e,g,p,a,b,f,k,m,r,I,w,y,t){var z=[0,0];return function(e){function d(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=e.apply(this,a)||this;a._viewpoint2D={center:w.vec2f64.create(),rotation:0,scale:0,spatialReference:null};a.center=[0,0];a.extent=new l.Extent;a.id=0;a.inverseTransform=f.mat2df64.create();a.resolution=0;a.rotation=0;a.scale=0;a.transform=f.mat2df64.create();a.transformNoRotation=f.mat2df64.create();a.displayMat3=m.mat3f32.create();a.displayViewMat3=
m.mat3f32.create();a.viewMat3=m.mat3f32.create();a.viewMat2d=b.mat2df32.create();a.worldScreenWidth=0;a.size=[0,0];return a}n(d,e);B=d;Object.defineProperty(d.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,f=a.targetGeometry;
b.center[0]=f.x;b.center[1]=f.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=f.spatialReference}this._update()},enumerable:!0,configurable:!0});d.prototype.copy=function(a){var b=this.size,f=this.viewpoint;f&&b?(this.viewpoint=t.copy(f,a.viewpoint),this._set("size",r.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};d.prototype.clone=function(){return new B({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};d.prototype.toMap=function(a,b,f){if(y.isVec2(b))return r.vec2.transformMat2d(a,b,this.inverseTransform);z[0]=b;z[1]=f;return r.vec2.transformMat2d(a,z,this.inverseTransform)};d.prototype.toScreen=function(a,b,f){if(y.isVec2(b))return r.vec2.transformMat2d(a,b,this.transform);z[0]=b;z[1]=f;return r.vec2.transformMat2d(a,z,this.transform)};d.prototype.toScreenNoRotation=function(a,b,f){if(y.isVec2(b))return r.vec2.transformMat2d(a,b,this.transformNoRotation);z[0]=b;z[1]=
f;return r.vec2.transformMat2d(a,z,this.transformNoRotation)};d.prototype.pixelSizeAt=function(a){return t.pixelSizeAt(a,this.viewpoint)};d.prototype.getScreenTransform=function(a,b){var f=this._viewpoint2D.center,c=this._get("pixelRatio")||1,e=this._get("size");t.getMatrix(a,f,e,b,0,c);return a};d.prototype._update=function(){var b=this._viewpoint2D,f=b.center,e=b.spatialReference,g=b.scale,m=b.rotation,b=this._get("pixelRatio")||1,d=this._get("size");this._set("id",this.id+1);var h=new c({targetGeometry:new l.Point(f[0],
f[1],e),scale:g,rotation:m});this._set("viewpoint",h);if(d&&e&&g)return this.resolution=t.getResolution(h),this.rotation=m,this.scale=g,this.spatialReference=e,r.vec2.copy(this.center,f),k.mat3.set(this.displayMat3,0!==d[0]?2/d[0]:0,0,0,0,0!==d[1]?-2/d[1]:0,0,-1,1,1),g=k.mat3.identity(this.viewMat3),f=I.vec2f32.fromValues(d[0]/2,d[1]/2),e=I.vec2f32.fromValues(-d[0]/2,-d[1]/2),m=p.common.toRadian(m),k.mat3.translate(g,g,f),k.mat3.rotate(g,g,m),k.mat3.translate(g,g,e),k.mat3.multiply(this.displayViewMat3,
this.displayMat3,g),g=a.mat2d.identity(this.viewMat2d),a.mat2d.translate(g,g,f),a.mat2d.rotate(g,g,m),a.mat2d.translate(g,g,e),t.getExtent(this.extent,h,d),t.getTransform(this.transform,h,d,b),a.mat2d.invert(this.inverseTransform,this.transform),t.getTransformNoRotation(this.transformNoRotation,h,d,b),this.worldScreenWidth=t.getWorldScreenWidth(this.spatialReference,this.resolution),this};var B;h([g.property({readOnly:!0})],d.prototype,"id",void 0);h([g.property({value:1,json:{write:!0}})],d.prototype,
"pixelRatio",null);h([g.property({json:{write:!0}})],d.prototype,"size",null);h([g.property({type:c,json:{write:!0}})],d.prototype,"viewpoint",null);return d=B=h([g.subclass("esri.views.2d.ViewState")],d)}(g.declared(e.JSONSupport))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df32=n})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],
function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};d.clone=function(d){var h=new Float32Array(6);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];h[4]=d[4];h[5]=d[5];return h};d.fromValues=function(d,h,l,c,e,g){var p=new Float32Array(6);p[0]=d;p[1]=h;p[2]=l;p[3]=c;p[4]=e;p[5]=g;return p};d.createView=function(d,h){return new Float32Array(d,h,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat3=n})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(q,d,n){function h(c,e,g){var d=e[0],a=e[1],b=e[2],f=e[3],k=e[4],m=e[5],r=e[6],h=e[7];e=e[8];var l=g[0],y=g[1],t=g[2],z=g[3],n=g[4],v=g[5],u=g[6],x=g[7];g=g[8];c[0]=l*d+y*f+t*r;c[1]=l*a+y*k+t*h;c[2]=l*b+y*m+t*e;c[3]=z*d+n*f+v*r;c[4]=z*a+n*k+v*h;c[5]=z*b+n*m+v*e;c[6]=u*d+x*f+g*r;c[7]=u*a+x*k+g*h;c[8]=u*b+x*m+g*e;return c}function l(c,
e,g){c[0]=e[0]-g[0];c[1]=e[1]-g[1];c[2]=e[2]-g[2];c[3]=e[3]-g[3];c[4]=e[4]-g[4];c[5]=e[5]-g[5];c[6]=e[6]-g[6];c[7]=e[7]-g[7];c[8]=e[8]-g[8];return c}Object.defineProperty(d,"__esModule",{value:!0});d.fromMat4=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[4];c[4]=e[5];c[5]=e[6];c[6]=e[8];c[7]=e[9];c[8]=e[10];return c};d.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];return c};d.set=function(c,e,g,d,a,b,f,k,m,r){c[0]=e;c[1]=g;c[2]=d;
c[3]=a;c[4]=b;c[5]=f;c[6]=k;c[7]=m;c[8]=r;return c};d.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.transpose=function(c,e){if(c===e){var g=e[1],d=e[2],a=e[5];c[1]=e[3];c[2]=e[6];c[3]=g;c[5]=e[7];c[6]=d;c[7]=a}else c[0]=e[0],c[1]=e[3],c[2]=e[6],c[3]=e[1],c[4]=e[4],c[5]=e[7],c[6]=e[2],c[7]=e[5],c[8]=e[8];return c};d.invert=function(c,e){var g=e[0],d=e[1],a=e[2],b=e[3],f=e[4],k=e[5],m=e[6],r=e[7];e=e[8];var h=e*f-k*r,l=-e*b+k*m,y=r*b-f*m,t=g*h+d*l+a*
y;if(!t)return null;t=1/t;c[0]=h*t;c[1]=(-e*d+a*r)*t;c[2]=(k*d-a*f)*t;c[3]=l*t;c[4]=(e*g-a*m)*t;c[5]=(-k*g+a*b)*t;c[6]=y*t;c[7]=(-r*g+d*m)*t;c[8]=(f*g-d*b)*t;return c};d.adjoint=function(c,e){var g=e[0],d=e[1],a=e[2],b=e[3],f=e[4],k=e[5],m=e[6],r=e[7];e=e[8];c[0]=f*e-k*r;c[1]=a*r-d*e;c[2]=d*k-a*f;c[3]=k*m-b*e;c[4]=g*e-a*m;c[5]=a*b-g*k;c[6]=b*r-f*m;c[7]=d*m-g*r;c[8]=g*f-d*b;return c};d.determinant=function(c){var e=c[3],g=c[4],d=c[5],a=c[6],b=c[7],f=c[8];return c[0]*(f*g-d*b)+c[1]*(-f*e+d*a)+c[2]*
(b*e-g*a)};d.multiply=h;d.translate=function(c,e,g){var d=e[0],a=e[1],b=e[2],f=e[3],k=e[4],m=e[5],r=e[6],h=e[7];e=e[8];var l=g[0];g=g[1];c[0]=d;c[1]=a;c[2]=b;c[3]=f;c[4]=k;c[5]=m;c[6]=l*d+g*f+r;c[7]=l*a+g*k+h;c[8]=l*b+g*m+e;return c};d.rotate=function(c,e,g){var d=e[0],a=e[1],b=e[2],f=e[3],k=e[4],m=e[5],r=e[6],h=e[7];e=e[8];var l=Math.sin(g);g=Math.cos(g);c[0]=g*d+l*f;c[1]=g*a+l*k;c[2]=g*b+l*m;c[3]=g*f-l*d;c[4]=g*k-l*a;c[5]=g*m-l*b;c[6]=r;c[7]=h;c[8]=e;return c};d.scale=function(c,e,g){var d=g[0],
a=g[1];g=g[2];c[0]=d*e[0];c[1]=d*e[1];c[2]=d*e[2];c[3]=a*e[3];c[4]=a*e[4];c[5]=a*e[5];c[6]=g*e[6];c[7]=g*e[7];c[8]=g*e[8];return c};d.scaleByVec2=function(c,e,g){var d=g[0];g=g[1];c[0]=d*e[0];c[1]=d*e[1];c[2]=d*e[2];c[3]=g*e[3];c[4]=g*e[4];c[5]=g*e[5];return c};d.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=e[0];c[7]=e[1];c[8]=1;return c};d.fromRotation=function(c,e){var g=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=g;c[2]=0;c[3]=-g;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};
d.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=0;c[4]=e[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.fromMat2d=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=0;c[3]=e[2];c[4]=e[3];c[5]=0;c[6]=e[4];c[7]=e[5];c[8]=1;return c};d.fromQuat=function(c,e){var g=e[0],d=e[1],a=e[2];e=e[3];var b=g+g,f=d+d,k=a+a,g=g*b,m=d*b,d=d*f,r=a*b,h=a*f,a=a*k,b=e*b,f=e*f;e*=k;c[0]=1-d-a;c[3]=m-e;c[6]=r+f;c[1]=m+e;c[4]=1-g-a;c[7]=h-b;c[2]=r-f;c[5]=h+b;c[8]=1-g-d;return c};d.normalFromMat4Legacy=function(c,e){var g=e[0],
d=e[1],a=e[2],b=e[4],f=e[5],k=e[6],m=e[8],r=e[9];e=e[10];var h=e*f-k*r,l=-e*b+k*m,y=r*b-f*m,t=g*h+d*l+a*y;if(!t)return null;t=1/t;c[0]=h*t;c[1]=(-e*d+a*r)*t;c[2]=(k*d-a*f)*t;c[3]=l*t;c[4]=(e*g-a*m)*t;c[5]=(-k*g+a*b)*t;c[6]=y*t;c[7]=(-r*g+d*m)*t;c[8]=(f*g-d*b)*t;return c};d.normalFromMat4=function(c,e){var g=e[0],d=e[1],a=e[2],b=e[3],f=e[4],k=e[5],m=e[6],r=e[7],h=e[8],l=e[9],y=e[10],t=e[11],z=e[12],n=e[13],v=e[14];e=e[15];var u=g*k-d*f,x=g*m-a*f,q=g*r-b*f,A=d*m-a*k,H=d*r-b*k,D=a*r-b*m,E=h*n-l*z,F=
h*v-y*z,h=h*e-t*z,G=l*v-y*n,l=l*e-t*n,y=y*e-t*v,t=u*y-x*l+q*G+A*h-H*F+D*E;if(!t)return null;t=1/t;c[0]=(k*y-m*l+r*G)*t;c[1]=(m*h-f*y-r*F)*t;c[2]=(f*l-k*h+r*E)*t;c[3]=(a*l-d*y-b*G)*t;c[4]=(g*y-a*h+b*F)*t;c[5]=(d*h-g*l-b*E)*t;c[6]=(n*D-v*H+e*A)*t;c[7]=(v*q-z*D-e*x)*t;c[8]=(z*H-n*q+e*u)*t;return c};d.projection=function(c,e,g){c[0]=2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/g;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};d.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+
", "+c[7]+", "+c[8]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};d.add=function(c,e,g){c[0]=e[0]+g[0];c[1]=e[1]+g[1];c[2]=e[2]+g[2];c[3]=e[3]+g[3];c[4]=e[4]+g[4];c[5]=e[5]+g[5];c[6]=e[6]+g[6];c[7]=e[7]+g[7];c[8]=e[8]+g[8];return c};d.subtract=l;d.multiplyScalar=function(c,e,g){c[0]=e[0]*g;c[1]=e[1]*g;c[2]=e[2]*g;c[3]=e[3]*g;c[4]=e[4]*g;c[5]=e[5]*g;
c[6]=e[6]*g;c[7]=e[7]*g;c[8]=e[8]*g;return c};d.multiplyScalarAndAdd=function(c,e,g,d){c[0]=e[0]+g[0]*d;c[1]=e[1]+g[1]*d;c[2]=e[2]+g[2]*d;c[3]=e[3]+g[3]*d;c[4]=e[4]+g[4]*d;c[5]=e[5]+g[5]*d;c[6]=e[6]+g[6]*d;c[7]=e[7]+g[7]*d;c[8]=e[8]+g[8]*d;return c};d.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]&&c[6]===e[6]&&c[7]===e[7]&&c[8]===e[8]};d.equals=function(c,e){var g=c[0],d=c[1],a=c[2],b=c[3],f=c[4],k=c[5],m=c[6],r=c[7];c=c[8];var h=e[0],
l=e[1],y=e[2],t=e[3],z=e[4],B=e[5],v=e[6],u=e[7];e=e[8];return Math.abs(g-h)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(h))&&Math.abs(d-l)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(a-y)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(b-t)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(t))&&Math.abs(f-z)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(z))&&Math.abs(k-B)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(B))&&Math.abs(m-v)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(v))&&Math.abs(r-
u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(c-e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};d.mul=h;d.sub=l})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat3f32=n})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(9);
d[0]=1;d[4]=1;d[8]=1;return d};d.clone=function(d){var h=new Float32Array(9);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];h[4]=d[4];h[5]=d[5];h[6]=d[6];h[7]=d[7];h[8]=d[8];return h};d.fromValues=function(d,h,l,c,e,g,p,a,b){var f=new Float32Array(9);f[0]=d;f[1]=h;f[2]=l;f[3]=c;f[4]=e;f[5]=g;f[6]=p;f[7]=a;f[8]=b;return f};d.createView=function(d,h){return new Float32Array(d,h,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.vec2f32=n})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(q,d){function n(){return new Float32Array(2)}function h(c,e){var a=new Float32Array(2);a[0]=c;a[1]=e;return a}function l(){return h(1,1)}function c(){return h(1,0)}function e(){return h(0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(c){var e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e};d.fromValues=h;d.createView=function(c,
e){return new Float32Array(c,e,2)};d.zeros=function(){return n()};d.ones=l;d.unitX=c;d.unitY=e;d.ZEROS=n();d.ONES=l();d.UNIT_X=c();d.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(q,d){function n(d){return d instanceof Float32Array&&2<=d.length}function h(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(d,"__esModule",{value:!0});d.isVec2f32=n;d.isVec2f64=h;d.isVec2=function(d){return n(d)||h(d)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(q,d,n,h,l,c){Object.defineProperty(d,"__esModule",{value:!0});d.TileInfoView=n;d.TileKey=h;d.TileQueue=l;d.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(q,d,n,h,l,c,e){var g=new c("0/0/0/0"),p=function(){function a(a,b,c,e,d,g,h,p){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=d;this.rightAdjust=g;this.leftBound=h;this.rightBound=
p}a.create=function(b,c){var f;b[1]>c[1]&&(f=[c,b],b=f[0],c=f[1]);f=b[0];b=b[1];var e=c[0];c=c[1];var k=e-f,d=c-b,d=0!==d?k/d:0,g=(Math.ceil(b)-b)*d,h=(Math.floor(b)-b)*d;return new a(f,Math.floor(b),Math.ceil(c),d,0>k?g:h,0>k?h:g,0>k?e:f,0>k?f:e)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),a=[[0,0],
[0,0],[0,0],[0,0]];return function(){function b(a,b){var f=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=c.map(function(f){return h.create(a,f,b)});c.forEach(function(a,b){f._infoByLevel[a.level]=e[b];f._infoByScale[a.scale]=e[b];f.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},
enumerable:!0,configurable:!0});b.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};b.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);g.set(b);return(b=this._infoByLevel[g.level])?b.getTileBounds(a,g,c):a};b.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);g.set(b);return(b=this._infoByLevel[g.level])?b.getTileCoords(a,g,c):a};b.prototype.getTileCoverage=function(b,c,d){void 0===c&&(c=192);void 0===d&&(d="closest");d="closest"===d?this.getClosestInfoForScale(b.scale):
this.getSmallestInfoForScale(b.scale);var f=l.pool.acquire(d),k=this._wrap,g;g=Infinity;var m=-Infinity,h,z,n=f.spans;a[0][0]=a[0][1]=a[1][1]=a[3][0]=-c;a[1][0]=a[2][0]=b.size[0]+c;a[2][1]=a[3][1]=b.size[1]+c;for(c=0;c<a.length;c++){var v=a[c];b.toMap(v,v);v[0]=d.getColumnForX(v[0]);v[1]=d.getRowForY(v[1])}b=[];v=3;for(c=0;4>c;c++){if(a[c][1]!==a[v][1]){var u=p.create(a[c],a[v]);g=Math.min(u.ymin,g);m=Math.max(u.ymax,m);void 0===b[u.ymin]&&(b[u.ymin]=[]);b[u.ymin].push(u)}v=c}if(null==g||null==m||
100<m-g)return null;for(v=[];g<m;){null!=b[g]&&(v=v.concat(b[g]));h=Infinity;z=-Infinity;for(c=v.length-1;0<=c;c--)u=v[c],h=Math.min(h,u.getLeftCol()),z=Math.max(z,u.getRightCol());h=Math.floor(h);z=Math.floor(z);if(g>=d.first[1]&&g<=d.last[1])if(k)if(d.size[0]<d.worldSize[0])for(u=Math.floor(z/d.worldSize[0]),c=Math.floor(h/d.worldSize[0]);c<=u;c++)n.push(new e(g,Math.max(d.getFirstColumnForWorld(c),h),Math.min(d.getLastColumnForWorld(c),z)));else n.push(new e(g,h,z));else h>d.last[0]||z<d.first[0]||
(h=Math.max(h,d.first[0]),z=Math.min(z,d.last[0]),n.push(new e(g,h,z)));g+=1;for(c=v.length-1;0<=c;c--)u=v[c],u.ymax>=g?u.incrRow():v.splice(c,1)}return f};b.prototype.getTileParentId=function(a){g.set(a);a=this._lodInfos.indexOf(this._infoByLevel[g.level])-1;if(0>a)return null;this._getTileIdAtLOD(g,this._lodInfos[a],g);return g.id};b.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};b.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};b.prototype.intersects=function(a,b){g.set(b);b=this._infoByLevel[g.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(g,c,g);for(var f=c.denormalizeCol(g.col,g.world),e=0,d=a.spans;e<d.length;e++){var k=d[e];if(k.row===g.row&&k.colFrom<=f&&k.colTo>=f)return!0}}if(c.resolution<b.resolution){d=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,
-Infinity]);a=d[0];var f=d[1],e=d[2],d=d[3],h=b.denormalizeCol(g.col,g.world),k=c.getColumnForX(b.getXForColumn(h)),p=c.getRowForY(b.getYForRow(g.row)),h=c.getColumnForX(b.getXForColumn(h+1))-1;b=c.getRowForY(b.getYForRow(g.row+1))-1;return!(k>d||h<e||p>f||b<a)}var l=c.denormalizeCol(g.col,g.world);return a.spans.some(function(a){return a.row===g.row&&a.colFrom<=l&&a.colTo>=l})};b.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=n.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};b.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var c=1;c<b.length-1;c++)if(a>b[c]+1E-6)return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};b.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-
a)?c:b},b[0]);return this._infoByScale[a]};b.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};b.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};b.prototype._getTileIdAtLOD=function(a,b,c){var f=this._infoByLevel[c.level];a.set(c);
if(b.resolution<f.resolution)return null;if(b.resolution===f.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*f.resolution/b.resolution+.01);a.row=Math.floor(c.row*f.resolution/b.resolution+.01);return a};return b}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(q,d,n,h){function l(c,d,h){c[0]=d;c[1]=h;return c}var c=new h("0/0/0/0");return function(){function e(c,e,a,b,f,d,m,r,h,l,y,t){this.level=
c;this.resolution=e;this.scale=a;this.origin=b;this.first=f;this.last=d;this.size=m;this.norm=r;this.worldStart=h;this.worldEnd=l;this.worldSize=y;this.wrap=t}e.create=function(c,d,a){var b=n.getInfo(c.spatialReference),f=[c.origin.x,c.origin.y],g=[c.size[0]*d.resolution,c.size[1]*d.resolution],m=[-Infinity,-Infinity],r=[Infinity,Infinity],h=[Infinity,Infinity];a&&(l(m,Math.max(0,Math.floor((a.xmin-f[0])/g[0])),Math.max(0,Math.floor((f[1]-a.ymax)/g[1]))),l(r,Math.max(0,Math.floor((a.xmax-f[0])/g[0])),
Math.max(0,Math.floor((f[1]-a.ymin)/g[1]))),l(h,r[0]-m[0]+1,r[1]-m[1]+1));var p;c.isWrappable?(c=[Math.ceil(Math.round(2*b.origin[1]/d.resolution)/c.size[0]),h[1]],b=[Math.floor((b.origin[0]-f[0])/g[0]),m[1]],a=[c[0]+b[0]-1,r[1]],p=!0):(b=m,a=r,c=h,p=!1);return new e(d.level,d.resolution,d.scale,f,m,r,h,g,b,a,c,p)};e.prototype.normalizeCol=function(c){if(!this.wrap)return c;var e=this.worldSize[0];return 0>c?e-1-Math.abs((c+1)%e):c%e};e.prototype.denormalizeCol=function(c,e){return this.wrap?this.worldSize[0]*
e+c:c};e.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};e.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};e.prototype.getTileBounds=function(e,d,a){void 0===a&&(a=!1);c.set(d);var b=a?c.col:this.denormalizeCol(c.col,c.world),f=c.row;d=this.getXForColumn(b);a=this.getYForRow(f+1);b=this.getXForColumn(b+1);f=this.getYForRow(f);e[0]=d;e[1]=a;e[2]=b;e[3]=f;return e};e.prototype.getTileCoords=function(e,d,a){void 0===a&&(a=!1);c.set(d);d=a?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(e)?l(e,this.getXForColumn(d),
this.getYForRow(c.row)):(e.x=this.getXForColumn(d),e.y=this.getYForRow(c.row));return e};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(q,d,n){return function(){function d(d,c,e,g){this.set(d,c,e,g)}d.getId=function(d,c,e,g){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+c+"/"+e+"/"+g};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,c,e,g){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),c=d[1],e=d[2],
g=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(c),this.col=parseFloat(e),this.world=parseFloat(g)):(this.level=+d,this.row=+c,this.col=+e,this.world=+g||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var h=this.level+1,c=this.row<<1,e=this.col<<1,g=this.world;return[new d(h,c,e,g),new d(h,c,e+1,g),new d(h,c+1,e,g),new d(h,c+1,e+1,g)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?
-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.pool=new n(d,!0,null,25,50);return d}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(q,d,n){return function(){function d(d){this.lodInfo=d;this.spans=[]}d.prototype.release=function(){};d.prototype.forEach=function(d,c){var e=this.spans,g=this.lodInfo,h=g.level;if(0!==e.length)for(var a=0;a<e.length;a++)for(var b=e[a],f=b.row,k=b.colTo,b=b.colFrom;b<=k;b++)d.call(c,h,f,
g.normalizeCol(b),g.getWorldForColumn(b))};d.pool=new n(d,!0);return d}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(q,d,n){return function(){function d(d,c,e){this.row=d;this.colFrom=c;this.colTo=e}d.pool=new n(d,!0);return d}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(q,d,n,h,l,c,e,g,p){function a(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var b=new Set,f=[],k=new Map,m=[0,0];return function(d){function r(a){a=d.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}h(r,d);r.prototype.initialize=function(){var a=this,b=this.process;this._queue=new p.QueueProcessor({concurrency:this.concurrency,process:function(c,f){c=a._keyToItem.get(c);return b(c,{signal:f})},peeker:"scale-first"===
this.strategy?function(b){return a._peekByScaleFirst(b)}:function(b){return a._peekByCenterFirst(b)}})};r.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(r.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"updating",{get:function(){return 0<
this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});r.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};r.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};r.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};r.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};r.prototype.pause=function(){this._queue.pause()};
r.prototype.push=function(a){var b=this,c=a.key.id;if(this.has(c))return this.get(c);var f=this._queue.push(c),d=function(){b._keyToItem.delete(c);b.notifyChange("updating")};this._keyToItem.set(c,a);f.then(d,d);this.notifyChange("updating");return f};r.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};r.prototype.resume=function(){this._queue.resume()};r.prototype._peekByScaleFirst=function(d){var e=this;if(!this.state)return c.firstOfSet(d);var g=this.tileInfoView,m=
Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;d.forEach(function(a){a=e._keyToItem.get(a);var c=e.tileInfoView.getTileScale(a.key);k.has(c)||(k.set(c,[]),m=Math.max(c,m),r=Math.min(c,r));k.get(c).push(a.key);b.add(c)});var h=this.state.scale;k.has(h)||(a(f,b),f.sort(),h=f.reduce(function(a,b){return Math.abs(b-h)<Math.abs(a-h)?b:a},f[0]));h=Math.min(h,m);h=Math.max(h,r);d=k.get(h);var p=g.getClosestInfoForScale(h),l=p.getColumnForX(this.state.center[0]),I=p.getRowForY(this.state.center[1]);
d.sort(function(a,b){var c=p.denormalizeCol(a.col,a.world),f=p.denormalizeCol(b.col,b.world);return Math.sqrt((l-c)*(l-c)+(I-a.row)*(I-a.row))-Math.sqrt((l-f)*(l-f)+(I-b.row)*(I-b.row))});b.clear();k.clear();return d[0].id};r.prototype._peekByCenterFirst=function(a){var b=this;if(!this.state)return c.firstOfSet(a);var f=this.tileInfoView,d=this.state.center,e=Number.POSITIVE_INFINITY,k=null;a.forEach(function(a){a=b._keyToItem.get(a);f.getTileCoords(m,a.key);var c=g.vec2.distance(m,d);c<e&&(e=c,k=
a.key)});return k.id};n([e.property({constructOnly:!0})],r.prototype,"concurrency",void 0);n([e.property({constructOnly:!0})],r.prototype,"process",void 0);n([e.property()],r.prototype,"state",void 0);n([e.property({constructOnly:!0})],r.prototype,"strategy",void 0);n([e.property({constructOnly:!0})],r.prototype,"tileInfoView",void 0);n([e.property({readOnly:!0})],r.prototype,"updating",null);return r=n([e.subclass("esri.views.2d.tiling.TileQueue")],r)}(e.declared(l))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),
function(q,d,n,h,l,c){Object.defineProperty(d,"__esModule",{value:!0});var e=function(){return function(c,d){this.item=c;this.controller=d;this.promise=null}}();q=function(){function d(c){var a=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;c.concurrency&&(this.concurrency=c.concurrency);this._queue=new l.default(c.peeker);this.process=c.process;var b=c.scheduler;c.task&&n.isSome(b)&&(this._task=
b.registerTask(c.task,function(b){return a.update(b)},function(){return a.needsUpdate()}))}d.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(d.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});d.prototype.abort=function(c){(c=this._controllers.get(c))&&c.abort()};d.prototype.clear=function(){this._queue.clear();
var c=[];this._controllers.forEach(function(a){return c.push(a)});this._controllers.clear();c.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};d.prototype.get=function(c){return(c=this._deferreds.get(c))?c.promise:void 0};d.prototype.isOngoing=function(c){return this._processingItems.has(c)};d.prototype.has=function(c){return this._deferreds.has(c)};d.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};d.prototype.push=function(c){var a=
this,b=this.get(c);if(b)return b;var f,b=h.createAbortController(),d=function(){e.remove();a._deferreds.delete(c);a._controllers.delete(c);a._queue.remove(c);a._processingItems.delete(c);a._scheduleNext()},e=h.onAbortOrThrow(b.signal,function(){var b=a._processingItems.get(c);b&&b.controller.abort();d();f.reject(h.createAbortError())});f=h.createDeferred();this._deferreds.set(c,f);this._controllers.set(c,b);f.promise.then(d,d);this._queue.push(c);this._scheduleNext();return f.promise};d.prototype.reset=
function(){var c=[];this._processingItems.forEach(function(a){return c.push(a)});this._processingItems.clear();for(var a=0;a<c.length;a++){var b=c[a];this._queue.push(b.item);b.controller.abort()}this._scheduleNext()};d.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};d.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};d.prototype.update=function(c){for(;!c.done&&0<this._queue.length&&this._processingItems.size<
this.concurrency;)this._process(this._queue.pop()),c.madeProgress()};d.prototype._scheduleNext=function(){var d=this;this._task||this._isPaused||this._schedule||(this._schedule=c.schedule(function(){d._schedule=null;d._next()}))};d.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};d.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};d.prototype._processResult=function(c,
a){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).resolve(a))};d.prototype._processError=function(c,a){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).reject(a))};d.prototype._canProcessFulfillment=function(c){return this._deferreds.get(c.item)&&this._processingItems.get(c.item)===c?!0:!1};d.prototype._process=function(c){var a=this;if(!n.isNone(c)){var b,f=h.createAbortController(),d=new e(c,f);this._processingItems.set(c,d);try{b=
this.process(c,f.signal)}catch(m){this._processError(d,m)}b&&"function"===typeof b.then?(d.promise=b,b.then(function(b){return a._processResult(d,b)},function(b){return a._processError(d,b)})):this._processResult(d,b)}};Object.defineProperty(d.prototype,"test",{get:function(){var c=this;return{update:function(a){return c.update(a)}}},enumerable:!0,configurable:!0});return d}();d.QueueProcessor=q})},"esri/core/Queue":function(){define(["require","exports","./SetUtils"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});q=function(){function d(d){void 0===d&&(d=function(c){return n.firstOfSet(c)});this._peeker=d;this._items=new Set}Object.defineProperty(d.prototype,"length",{get:function(){return this._items.size},enumerable:!0,configurable:!0});d.prototype.clear=function(){this._items.clear()};d.prototype.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};d.prototype.push=function(d){this.contains(d)||this._items.add(d)};d.prototype.contains=function(d){return this._items.has(d)};
d.prototype.pop=function(){if(0!==this.length){var d=this.peek();this._items.delete(d);return d}};d.prototype.remove=function(d){this._items.delete(d)};return d}();d.default=q})},"esri/views/2d/tiling/TileStrategy":function(){define("require exports ../../../core/tsSupport/extendsHelper ./TileCache ./TileCoverage ./TileKey".split(" "),function(q,d,n,h,l,c){var e=new c(0,0,0,0),g=new Map,p=[],a=[];return function(){function b(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy=
"keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new h.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}
b.prototype.destroy=function(){this.tileIndex.clear()};b.prototype.update=function(b){var c=this,f=this.resampling,d=this.tileIndex,h=this.tileInfoView.getTileCoverage(b.state,this.buffer,this.coveragePolicy);a.length=0;p.length=0;g.clear();if(h){var w=this.tileInfoView.tileInfo,y=w.minScale,t=w.maxScale,z=h.spans,n=h.lodInfo,v=n.level,u=b.state,x=u.scale,w=u.center,u=u.resolution,q=!b.stationary&&x>this._previousScale;this._previousScale=x;this.tiles.length=0;if(!f&&(x>y||x<t))return this.tiles.length=
0,g.clear(),d.forEach(function(a){c.releaseTile(a)}),d.clear(),a.length=0,p.length=0,g.clear(),l.pool.release(h),!0;d.forEach(function(a){return a.visible=!0});t=y=0;if(0<z.length)for(x=0;x<z.length;x++){b=z[x];for(var A=b.row,H=b.colTo,D=b.colFrom;D<=H;D++)if(y++,b=e.set(v,A,n.normalizeCol(D),n.getWorldForColumn(D)).id,d.has(b))f=d.get(b),f.isReady?(g.set(b,f),t++):q||this._addParentTile(b,g);else{f=void 0;if(this._tileCache&&this._tileCache.has(b)){if(f=this._tileCache.pop(b),this.tileIndex.set(b,
f),f.isReady){g.set(b,f);t++;continue}}else f=this.acquireTile(e),this.tileIndex.set(b,f);q||this._addParentTile(b,g)}}var E=t===y;d.forEach(function(b,f){e.set(f);if(!g.has(f)){var d=c.tileInfoView.intersects(h,e);!d||!q&&E?"purge"===c.cachePolicy?e.level===v&&d||p.push(f):(e.level>v||!d)&&p.push(f):b.isReady?a.push(f):e.level>v&&p.push(f)}});for(z=0;z<a.length;z++)b=a[z],(f=d.get(b))&&f.isReady&&g.set(b,f);for(z=0;z<p.length;z++)b=p[z],f=d.get(b),this._tileCache?this._tileCache.add(f):this.releaseTile(f),
d["delete"](b);g.forEach(function(a){return c.tiles.push(a)});d.forEach(function(a){g.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(v,w,u);l.pool.release(h);return E}};b.prototype.clear=function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};b.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||
b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return b}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d,c,e){this.maxSize=d;this.tileInfoView=c;this.removedFunc=e;this._tilePerId=new Map;this._tileKeysPerLevel=
[]}d.prototype.has=function(d){return this._tilePerId.has(d)};d.prototype.get=function(d){return this._tilePerId.get(d)};d.prototype.pop=function(d){var c=this._tilePerId.get(d);if(!c)return null;var e=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](d);for(var g=0;g<e.length;g++)if(e[g].id===d){e.splice(g,1);break}c.visible=!0;return c};d.prototype.add=function(d){d.visible=!1;var c=d.key,e=c.id;this._tilePerId.has(e)||(this._tilePerId.set(e,d),d=c.level,this._tileKeysPerLevel[d]||(this._tileKeysPerLevel[d]=
[]),this._tileKeysPerLevel[d].push(c))};d.prototype.prune=function(d,c,e){var g=this._tilePerId.size;if(!(g<=this.maxSize)){for(var h=this._tileKeysPerLevel.length-1;g>this.maxSize&&0<=h;)h!==d&&(g=this._pruneAroundCenterTile(g,c,e,h)),h--;g>this.maxSize&&(g=this._pruneAroundCenterTile(g,c,e,d))}};d.prototype._pruneAroundCenterTile=function(d,c,e,g){g=this._tileKeysPerLevel[g];if(!g||0===g.length)return d;var h=this.tileInfoView.tileInfo,a=h.size,b=h.origin,f=e*a[0],k=e*a[1],m=[0,0],r=[0,0];for(g.sort(function(a,
d){m[0]=b.x+f*(a.col+.5);m[1]=b.y-k*(a.row+.5);r[0]=b.x+f*(d.col+.5);r[1]=b.y-k*(d.row+.5);return n.vec2.squaredDistance(m,c)-n.vec2.squaredDistance(r,c)});0<g.length&&(e=g.pop(),this._removeTile(e.id),d--,d!==this.maxSize););return d};d.prototype._removeTile=function(d){var c=this._tilePerId.get(d);this.removedFunc&&this.removedFunc(c);this._tilePerId["delete"](d)};return d}();d.default=q})},"esri/views/2d/support/Timeline":function(){define(["require","exports","../../../core/tsSupport/decorateHelper",
"../../../core/tsSupport/declareExtendsHelper","../../../core/accessorSupport/decorators"],function(q,d,n,h,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function c(){this._names=new Map}c.prototype.begin=function(c){this._names.has(c)||(this._names.set(c,!1),-1!==c.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+c+".Start"))};c.prototype.end=function(c){this._names.has(c)&&!this._names.get(c)&&(this._names.set(c,!0),performance.mark("Esri."+c+".End"))};
c.prototype.record=function(c){this._names.has(c)||(this._names.set(c,!0),performance.mark("Esri."+c))};return c=n([l.subclass("esri.views.2d.support.Timeline")],c)}();d.Timeline=q})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(q,d,n,h,l,c,e,g,p,a,b,f,k,m,r,I,w,y,t,z,B,v,u,x,C,A){var H={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},D={zoomIn:["\x3d","+"],zoomOut:["-","_"]},E={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(d){function l(){var a=null!==d&&d.apply(this,arguments)||this;a._handles=new c;return a}n(l,d);l.prototype.initialize=function(){var a=this;this._handles.add([e.whenNot(this.view,
"ready",function(){return a._disconnect()}),e.when(this.view,"ready",function(){return a._connect()})])};l.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};l.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};l.prototype._connect=function(){var c=this,d=new t.BrowserEventSource(this.view.surface,this.view.input),
g=[new x.ImmediateDoubleClick,new C.PointerClickHoldAndDrag,new A.SingleAndDoubleClick,new u.Drag(this.view.navigation),new v.DoubleTapDrag],g=new z.InputManager({eventSource:d,recognizers:g});g.installHandlers("prevent-context-menu",[new B.PreventContextMenu],z.ViewEventPriorities.INTERNAL);g.installHandlers("navigation",[new y.PinchRotateAndZoom(this.view),new k.GamepadNavigation(this.view),new w.MouseWheelZoom(this.view),new p.DoubleClickZoom(this.view),new p.DoubleClickZoom(this.view,["Ctrl"]),
new b.DragPan(this.view,"primary"),new m.KeyPan(this.view,H),new I.KeyZoom(this.view,D),new r.KeyRotate(this.view,E),new f.DragRotate(this.view,"secondary"),new a.DoubleTapDragZoom(this.view,"touch")],z.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(g);this._source=d;this._inputManager=g;e.init(this.view.navigation,"browserTouchPanEnabled",function(a){c._source.browserTouchPanningEnabled=!a})};Object.defineProperty(l.prototype,"test",{get:function(){return{inputManager:this._inputManager}},
enumerable:!0,configurable:!0});h([g.property()],l.prototype,"view",void 0);return l=h([g.subclass("esri.views.2d.input.MapViewInputManager")],l)}(g.declared(l))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(q,d,n,h,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(d,e){var a=c.call(this,!0)||this;a.view=d;a.registerIncoming("double-click",
e,function(b){return a._handleDoubleClick(b,e)});return a}n(d,c);d.prototype._handleDoubleClick=function(c,d){l.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),d?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return d}(h.InputHandler);d.DoubleClickZoom=q})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.eventMatchesPointerAction=
function(d,h){switch(h){case "primary":return"touch"===d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}};d.eventMatchesMousePointerAction=function(d,h){if("touch"===d.pointerType)return!1;switch(h){case "primary":return 0===d.button;case "secondary":return 2===d.button;case "tertiary":return 1===d.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../../core/compilerUtils","../../../input/InputHandler"],function(q,d,n,h,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(d,e,a){var b=c.call(this,!0)||this;b.view=d;b.pointerType=e;b.registerIncoming("double-tap-drag",a,function(a){return b._handleDoubleTapDrag(a)});return b}n(d,c);d.prototype._handleDoubleTapDrag=function(c){var d=c.data;if(d.pointerType===this.pointerType){c.stopPropagation();var a=d.action;c=d.delta;var b=this.view,d=b.mapViewNavigation;switch(a){case "begin":this._currentScale=
this._startScale=a=b.scale;this._previousDelta=c;d.begin();break;case "update":if(this._previousDelta.y===c.y)break;this._previousDelta=c;c=this._startScale*Math.pow(1.015,c.y);d.setViewpointImmediate(c/this._currentScale);this._currentScale=c;break;case "end":a=b.constraints;b=a.effectiveLODs;if(!a.snapToZoom||!b){d.end();break}b=a.snapScale(this._currentScale);c=(0<c.y?Math.max(b,a.snapToPreviousScale(this._startScale)):Math.min(b,a.snapToNextScale(this._startScale)))/this._currentScale;d.zoom(c);
break;default:h.neverReached(a)}}};return d}(l.InputHandler);d.DoubleTapDragZoom=q})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(q,d,n,h,l,c){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function e(e,a,b){var f=d.call(this,!0)||this;f.view=e;f.pointerAction=a;f.registerIncoming("drag",b,function(a){return f._handleDrag(a)});
f.registerIncoming("pointer-down",function(){return f.stopMomentumNavigation()});var k=f.view.mapViewNavigation;f.dragEventSeparator=new h.DragEventSeparator({start:function(a,b){k.pan.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){k.pan.update(f.view,b.data);b.stopPropagation()},end:function(a,b){k.pan.end(f.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,f.pointerAction)}});return f}n(e,d);e.prototype._handleDrag=function(c){var a=
this.view.mapViewNavigation;a.pinch.zoomMomentum||a.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return e}(l.InputHandler);d.DragPan=q})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d){this.callbacks=d;this.currentCount=0;this.callbacks.condition||
(this.callbacks.condition=function(){return!0})}d.prototype.handle=function(d){var h=d.data,c=h.pointers.size;switch(h.action){case "start":this.currentCount=c;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=d};d.prototype.emitStart=
function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};d.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};d.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return d}();d.DragEventSeparator=q})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(q,d,n,h,l,c){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function e(e,a,b){var f=d.call(this,!0)||this;f.view=e;f.pointerAction=a;var k=f.view.mapViewNavigation;f.dragEventSeparator=new h.DragEventSeparator({start:function(a,b){k.rotate.begin(f.view,b.data);b.stopPropagation()},update:function(a,b){k.rotate.update(f.view,b.data);b.stopPropagation()},end:function(a,b){k.rotate.end();b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
f.pointerAction)}});f.registerIncoming("drag",b,function(a){return f.dragEventSeparator.handle(a)});return f}n(e,d);return e}(l.InputHandler);d.DragRotate=q})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(q,d,n,h,l,c,e,g,p){Object.defineProperty(d,
"__esModule",{value:!0});q=function(d){function k(a){var b=d.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new h;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}n(k,d);k.prototype.onInstall=function(a){var b=this;d.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=l.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};k.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);d.prototype.onUninstall.call(this)};k.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,p.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,p.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};k.prototype.frameUpdate=function(c){var d=this.transformation;if(!p.isZeroTransformation(d)){var k=this.view.viewpoint.clone(),g=b*this.view.navigation.gamepad.velocityFactor*c;e.translateBy(k,k,[d.translation[0]*g,-d.translation[1]*g]);g=this.view.size;e.scaleAndRotateBy(k,k,1+d.translation[2]*f*c,this.view.constraints.rotationEnabled?
-d.heading*a*c:0,[g[0]/2,g[1]],g);c=this.view.constraints.constrain(k,this.view.viewpoint);this.view.viewpoint=c}};return k}(g.InputHandler);d.GamepadNavigation=q;var a=.06,b=.7,f=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(q,d,n){function h(d){var c=d*d;0>d&&(c*=-1);return c}Object.defineProperty(d,"__esModule",{value:!0});d.quadraticAccentuation=h;d.resetTransformation=function(d){d.translation[0]=0;
d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};d.extractTransformation=function(d,c,e){var g=d.state;d=d.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===d.deviceType?(e.translation[0]=h(g.axes[0]),e.translation[1]=h(g.axes[1]),e.translation[2]=h(g.buttons[7])-h(g.buttons[6]),e.heading=h(g.axes[2]),e.tilt=h(g.axes[3])):"spacemouse"===d.deviceType&&(e.translation[0]=1.2*h(g.axes[0]),e.translation[1]=1.2*h(g.axes[1]),e.translation[2]=2*-h(g.axes[2]),e.heading=1.2*h(g.axes[5]),
e.tilt=1.2*h(g.axes[3]));e.tilt*=c;n.vec3.scale(e.translation,e.translation,1);return e};d.extractTransformationKeyboard=function(d,c){c.translation[0]=d[1]-d[0];c.translation[1]=d[3]-d[2];c.translation[2]=d[4]-d[5];c.heading=d[7]-d[6];c.tilt=d[8]-d[9];return c};d.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(c,g,h){var a,b=d.call(this,!0)||this;b.view=c;b.keys=g;b._pressed=!1;b._keyMap=(a={},a[g.left]="left",a[g.right]="right",a[g.up]="up",a[g.down]="down",a);b.registerIncoming("key-down",h,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",h,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",h,function(){return b._handleBlur()});return b}n(c,d);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=this._keyMap[c.data.key];if(this._pressed=null!=e){if(d)switch(this.view.mapViewNavigation.begin(),e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(h.InputHandler);d.KeyPan=q})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(c,g,h){var a,b=d.call(this,!0)||this;b.view=c;b.keys=g;b._pressed=!1;b._keyToDirection=
(a={},a[g.clockwiseOption1]="clockwise",a[g.clockwiseOption2]="clockwise",a[g.counterClockwiseOption1]="counterClockwise",a[g.counterClockwiseOption2]="counterClockwise",a[g.resetOption1]="reset",a[g.resetOption2]="reset",a);b.registerIncoming("key-down",h,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",h,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",h,function(){return b._handleBlur()});return b}n(c,d);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=c.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[c.data.key],this._pressed=null!=e)){if(d)switch(this.view.mapViewNavigation.begin(),e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;
case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(h.InputHandler);d.KeyRotate=q})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/compilerUtils","../../../input/InputHandler"],function(q,d,n,h,l){Object.defineProperty(d,"__esModule",
{value:!0});q=function(c){function d(d,e,a){var b=c.call(this,!0)||this;b.view=d;b.keys=e;b._keysToZoomAction={};b.registerIncoming("key-down",a,function(a){return b._handleKeyDown(a)});e.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});e.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}n(d,c);d.prototype._handleKeyDown=function(c){this._handleKey(c)};d.prototype._handleKey=function(c){var d=c.modifiers;if(!(0<d.size)||d.has("Shift"))if(d=c.data.key,d in this._keysToZoomAction){var d=
this._keysToZoomAction[d],a=this.view.mapViewNavigation,b=null;switch(d){case 0:b=a.zoomIn();break;case 1:b=a.zoomOut();break;default:h.neverReached(d);return}a.begin();b.then(function(){return a.end()});c.stopPropagation()}};return d}(l.InputHandler);d.KeyZoom=q})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(c,
g){var e=d.call(this,!0)||this;e.view=c;e._canZoom=!0;e.registerIncoming("mouse-wheel",g,function(a){return e._handleMouseWheel(a)});return e}n(c,d);c.prototype._handleMouseWheel=function(c){var d=this;if(this.view.navigation.mouseWheelZoomEnabled&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var e=this.view.mapViewNavigation;c=c.data;if(c=e.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.catch(function(){}).then(function(){d._canZoom=!0;e.end()})}};return c}(h.InputHandler);
d.MouseWheelZoom=q})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(q,d,n,h,l){Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(d){var e=c.call(this,!0)||this;e.view=d;e.registerIncoming("drag",function(a){return e._handleDrag(a)});e.registerIncoming("pointer-down",function(){return e.stopMomentumNavigation()});var a=e.view.mapViewNavigation;
e.dragEventSeparator=new h.DragEventSeparator({start:function(b,c){a.pinch.begin(e.view,c.data);c.stopPropagation()},update:function(b,c){a.pinch.update(e.view,c.data);c.stopPropagation()},end:function(b,c){a.pinch.end(e.view);c.stopPropagation()},condition:function(a){return 2<=a}});return e}n(d,c);d.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};d.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return d}(l.InputHandler);
d.PinchRotateAndZoom=q})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(q,d,n,h,l,c,e){Object.defineProperty(d,"__esModule",{value:!0});var g=n("trident"),p=n("edge"),a=n("chrome"),b=n("ff"),f=n("safari");q=function(){function d(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=a;l.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",a)}}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",
this._preventAltKeyDefault)};Object.defineProperty(d.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&
a.has(c)||(this._element.removeEventListener(k[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&k[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(k[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),
this._activePointerCaptures.delete(a.pointerId))};d.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};d.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(I){}};
d.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=h.createScreenPointFromNativeEvent(this._element,a);d.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};d.prototype._handleKey=function(a,b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};d.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};d.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};d.prototype._handleMouseWheel=function(c,d){var e=d.deltaY;switch(d.deltaMode){case 0:if(g||p)e=e/document.documentElement.clientHeight*
600;break;case 1:e*=30;break;case 2:e*=900}g||p?e*=.7:a||f?e*=.6:b&&(e*=1.375);var k=Math.abs(e);100<k&&(e=e/k*200/(1+Math.exp(-.02*(k-100))));d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0,deltaY:e});this._callback(c,d)};d.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};d.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};d.prototype._preventAltKeyDefault=function(a){"Alt"===
a.key&&a.preventDefault()};d.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};d.test={disableSubpixelCoordinates:!1};return d}();d.BrowserEventSource=q;var k={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave",
"pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function q(c,d){d=d||Object.create(null);var f=document.createEvent("Event");f.initEvent(c,d.bubbles||!1,d.cancelable||!1);c=2;for(var e;c<a.length;c++)e=a[c],f[e]=d[e]||b[c];f.buttons=d.buttons||0;c=0;c=d.pressure&&f.buttons?d.pressure:f.buttons?.5:0;f.x=f.clientX;f.y=f.clientY;f.pointerId=d.pointerId||0;f.width=d.width||0;f.height=d.height||0;f.pressure=c;f.tiltX=d.tiltX||0;f.tiltY=
d.tiltY||0;f.twist=d.twist||0;f.tangentialPressure=d.tangentialPressure||0;f.pointerType=d.pointerType||"";f.hwTimestamp=d.hwTimestamp||0;f.isPrimary=d.isPrimary||!1;return f}function d(){this.array=[];this.size=0}function n(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);u&&(this.observer=new u(this.mutationWatcher.bind(this)))}function h(a){return"body /shadow-deep/ "+l(a)}function l(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+
a+"; touch-action: "+a+"; }"}function e(){if(H){C.forEach(function(a){String(a)===a?(A+=l(a)+c(a)+"\n",D&&(A+=h(a)+c(a)+"\n")):(A+=a.selectors.map(l)+c(a.rule)+"\n",D&&(A+=a.selectors.map(h)+c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=A;document.head.appendChild(a)}}function g(a){if(!w.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function p(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),
a.name="InvalidStateError",a;}var a="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),b=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],f=window.Map&&window.Map.prototype.forEach?Map:d;d.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},
get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),m=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,
0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],r={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},I="undefined"!==typeof SVGElementInstance,w={pointermap:new f,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,
c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new q(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<k.length;d++)c=k[d],b[c]=a[c]||m[d],I&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in r))return b},propagate:function(a,b,c){for(var d=a.target,f=[];null!=d&&
d!==document&&!d.contains(a.relatedTarget);)if(f.push(d),d=d.parentNode,!d)return;c&&f.reverse();f.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new q("gotpointercapture");d.pointerId=a;d._target=b;c||this.asyncDispatchEvent(d)},
releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new q("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};w.boundHandler=w.eventHandler.bind(w);
var y={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),f;for(f=this.targetingShadow(d);f;){if(a=
f.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;f=this.olderShadow(f)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},t=Array.prototype.forEach.call.bind(Array.prototype.forEach),z=Array.prototype.map.call.bind(Array.prototype.map),
B=Array.prototype.slice.call.bind(Array.prototype.slice),v=Array.prototype.filter.call.bind(Array.prototype.filter),u=window.MutationObserver||window.WebKitMutationObserver,x={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(a){this.observer&&y.canTarget(a)&&this.observer.observe(a,x)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){t(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(B(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=z(a,this.findElements,this);b.push(v(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var C=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],A="",H=window.PointerEvent||window.MSPointerEvent,D=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,E=w.pointermap,F=[1,4,2,8,16],G=!1;try{G=1===(new MouseEvent("test",{buttons:1})).buttons}catch(J){}var P={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){w.listen(a,this.events)},unregister:function(a){w.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,f=b.length,e;d<f&&(e=b[d]);d++){var k=Math.abs(a-e.y);if(25>=Math.abs(c-e.x)&&25>=k)return!0}},prepareEvent:function(a){var b=w.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=E.get(this.POINTER_ID);a.buttons=0!==
b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),c=this.prepareEvent(a);G||(c.buttons=F[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);E.set(this.POINTER_ID,a);b&&0!==b.buttons?w.move(c):w.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);w.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
E.get(this.POINTER_ID),c=this.prepareEvent(a);if(!G){var d=F[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}E.set(this.POINTER_ID,a);c.buttons&=~F[c.button];0===c.buttons?w.up(c):w.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);w.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);G||this.prepareButtonsForMove(b,a);b.button=
-1;w.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);w.cancel(a);this.deactivateMouse()},deactivateMouse:function(){E.delete(this.POINTER_ID)}},Q=w.captureInfo,K=y.findTarget.bind(y),N=y.allShadows.bind(y),M=w.pointermap,R,O={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){R.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,w.listen(a,this.events),N(a).forEach(function(a){a._scrollType=
c;w.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;w.unlisten(a,this.events);N(a).forEach(function(a){a._scrollType=void 0;w.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,N(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",
SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===M.size||1===M.size&&M.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},
removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=w.cloneEvent(a),d=c.pointerId=
a.identifier+2;c.target=Q[d]||K(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var f=this;c.preventDefault=function(){f.scrolling=!1;f.firstXY=null;b.preventDefault()};return c},
processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,f;c<d&&(f=a[c]);c++)if(f.identifier===
b)return!0},vacuumTouches:function(a){var b=a.touches;if(M.size>=b.length){var c=[];M.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){M.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});w.enterOver(a);w.down(a)},touchmove:function(a){this.scrolling||
(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=M.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;w.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(w.leaveOut(c),w.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(w.up(a),w.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){w.cancel(a);w.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){M.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=P.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};R=new n(O.elementAdded,
O.elementRemoved,O.elementChanged,O);var L=w.pointermap,S=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){w.listen(a,this.events)},unregister:function(a){w.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;S&&(b=w.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){L.delete(a)},MSPointerDown:function(a){L.set(a.pointerId,a);a=this.prepareEvent(a);w.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);w.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);w.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);w.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);w.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);w.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=w.makeEvent("lostpointercapture",a);w.dispatchEvent(a)},MSGotPointerCapture:function(a){a=w.makeEvent("gotpointercapture",a);w.dispatchEvent(a)}},V,U,Y;window.navigator.msPointerEnabled?(V=function(a){g(a);p(this);0!==w.pointermap.get(a).buttons&&(w.setCapture(a,this,!0),this.msSetPointerCapture(a))},U=function(a){g(a);w.releaseCapture(a,!0);this.msReleasePointerCapture(a)}):(V=function(a){g(a);p(this);0!==w.pointermap.get(a).buttons&&w.setCapture(a,this)},U=function(a){g(a);
w.releaseCapture(a)});Y=function(a){return!!w.captureInfo[a]};var W=window.PointerEvent||window.MSPointerEvent;return{dispatcher:w,Installer:n,PointerEvent:q,PointerMap:f,targetFinding:y,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=q,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),w.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),
w.registerSource("mouse",P),void 0!==window.ontouchstart&&w.registerSource("touch",O)),w.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:V},releasePointerCapture:{value:U},hasPointerCapture:{value:Y}})},applyLocal:function(a){W||(window.PointerEvent||(window.navigator.msPointerEnabled?w.registerSource("ms",T):(w.registerSource("mouse",P),void 0!==window.ontouchstart&&w.registerSource("touch",O)),w.register(document)),
window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=V.bind(a),a.releasePointerCapture=U.bind(a),a.hasPointerCapture=Y.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(q,d,n,h,l,c){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d,
e){var a=this;this.element=d;this.input=e;this.handleGamepadConnectedEvent=function(b){a.handleGamepadConnected(b.gamepad)};this.handleGamepadDisconnectedEvent=function(b){b=b.gamepad;var d=a.inputDevices[b.index];d&&(a.emitGamepadEvent(b,c.extractState(d),!1),a.inputDevices[b.index]=void 0,a.latestUpdate[b.index]=void 0,a.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return a.handleGamepadConnected(b)}),
window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}d.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(d.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"pollingEnabled",{set:function(c){this.supported&&(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});d.prototype.handleGamepadConnected=function(c){var d=new l(c);"unknown"!==d.deviceType&&(this.inputDevices[c.index]=d,this.input.gamepad.devices.add(d))};d.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=h.addFrameTask({update:function(){return c.readGamepadState()}}))};d.prototype.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};d.prototype.readGamepadState=function(){var d=this,e=document.hasFocus(),a=this.element.contains(document.activeElement),b="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!a;this.forEachGamepad(function(a){var f=d.inputDevices[a.index];if(f){var e=d.latestUpdate[a.index],f=c.extractState(f),g=b||c.stateIdle(f);e&&(e.timestamp===a.timestamp||!e.active&&g||c.stateEqual(e.state,
f))||d.emitGamepadEvent(a,f,!g)}})};d.prototype.forEachGamepad=function(c){for(var d=window.navigator.getGamepads(),a=0;a<d.length;a++){var b=d[a];this.validate(b)&&c(b)}};d.prototype.emitGamepadEvent=function(c,d,a){var b=this.latestUpdate[c.index];if((b=b&&b.active)||a)this.latestUpdate[c.index]={timestamp:c.timestamp,state:d,active:a},this.callback&&this.callback({device:this.inputDevices[c.index],state:d,action:!b&&a?"start":b&&a?"update":"end"})};d.prototype.validate=function(c){if(!c||!c.connected)return!1;
for(var d=0;d<c.axes.length;d++)if(isNaN(c.axes[d]))return!1;return!0};return d}();d.GamepadSource=q})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.extractState=function(d){var h=d.native;return{buttons:h.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:h.axes.map(function(c){var e=d.axisThreshold,g=Math.abs(c);c=g<e?0:n.sign(c)*(g-e)/(1-e);return c})}};
d.stateEqual=function(d,l){if(d.axes.length!==l.axes.length||d.buttons.length!==l.buttons.length)return!1;for(var c=0;c<d.axes.length;c++)if(d.axes[c]!==l.axes[c])return!1;for(c=0;c<d.buttons.length;c++)if(d.buttons[c]!==l.buttons[c])return!1;return!0};d.stateIdle=function(d){for(var h=0;h<d.axes.length;h++)if(0!==d.axes[h])return!1;for(h=0;h<d.buttons.length;h++)if(0!==d.buttons[h])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(){var c=d.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}n(c,d);return c}(h.InputHandler);d.PreventContextMenu=q;d.default=q})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(q,d,n,h,l,c,e,g,p,a){Object.defineProperty(d,"__esModule",{value:!0});q=function(b){function d(a,d,f,g,l){void 0===a&&(a=p.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=p.DefaultParameters.maximumDoubleClickDistance);void 0===f&&(f=p.DefaultParameters.maximumDoubleTouchDelay);void 0===g&&(g=p.DefaultParameters.maximumDoubleTouchDistance);void 0===l&&(l=h.default);var k=b.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=d;k.maximumDoubleTouchDelay=f;
k.maximumDoubleTouchDistance=g;k._clock=l;k._doubleTapDragReady=!1;k._doubleTapDragActive=!1;k._dragStartCenter=c.createScreenPoint(0,0);k._pointerState=new Map;k._doubleTapDrag=k.registerOutgoing("double-tap-drag");k._dragEventSeparator=new e.DragEventSeparator({start:function(a,b){return k._dragStart(a,b)},update:function(a,b){return k._dragUpdate(b)},end:function(a,b){return k._dragEnd(b)}});k.registerIncoming("drag",function(a){return k._dragEventSeparator.handle(a)});k.registerIncoming("pointer-down",
function(a){return k._handlePointerDown(a)});k.registerIncoming("pointer-up",function(){return k._handlePointerUp()});return k}n(d,b);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return l.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});d.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};d.prototype._createDoubleTapDragData=function(a,b,c){return{action:a,delta:b,button:c.button,buttons:c.buttons,pointer:c.pointer,pointers:c.pointers,pointerType:c.pointerType,timestamp:c.timestamp}};d.prototype._dragStart=function(a,b){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var d=b.data;
a=b.modifiers;this._dragStartCenter=d.center;d=this._createDoubleTapDragData("begin",c.createScreenPoint(0,0),d);this._doubleTapDrag.emit(d,void 0,a);b.stopPropagation()}};d.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var b=a.data,d=a.modifiers,f=b.center,f=c.createScreenPoint(f.x-this._dragStartCenter.x,f.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("update",f,b);this._doubleTapDrag.emit(b,void 0,d);a.stopPropagation()}};d.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var b=
a.data,d=a.modifiers,f=b.center,f=c.createScreenPoint(f.x-this._dragStartCenter.x,f.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("end",f,b);this._doubleTapDrag.emit(b,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};d.prototype._handlePointerDown=function(b){var c=b.data,d=this._pointerId(c),f=this._pointerState.get(d),e=c.native.pointerType;f?(e="touch"===e?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),a.manhattanDistance(f.event.data,
c)>e?this._storePointerDown(b):this._doubleTapDragReady=!0):this._storePointerDown(b)};d.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};d.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var c=b.button,b=b.pointerType;return"mouse"===b?a+":"+c:""+b};d.prototype._storePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerType,f=this._pointerId(c),c=this._clock.setTimeout(function(){return b._clearPointerDown(f)},"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(f,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()};return d}(g.InputHandler);d.DoubleTapDrag=q})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(q,d,n,h,l,c,e){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,
maximumDoubleTouchDistance:35};q=function(c){function g(a,b,f,e,g){void 0===a&&(a=d.DefaultParameters.maximumDoubleClickDelay);void 0===b&&(b=d.DefaultParameters.maximumDoubleClickDistance);void 0===f&&(f=d.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=d.DefaultParameters.maximumDoubleTouchDistance);void 0===g&&(g=h.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=b;k.maximumDoubleTouchDelay=f;k.maximumDoubleTouchDistance=e;k._clock=g;k._pointerState=
new Map;k._click=k.registerOutgoing("click");k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(k));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(k));k.registerIncoming("drag",k._handleDrag.bind(k));return k}n(g,c);g.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(g.prototype,"hasPendingInputs",
{get:function(){return l.someMap(this._pointerState,function(a){return null!=a.doubleClickTimeout})},enumerable:!0,configurable:!0});g.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};g.prototype._handleImmediateClick=function(a){var b=a.data,c=this._pointerId(b),d=this._pointerState.get(c);if(d){var g="touch"===b.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(d.event.data,b)>
g?(this._clearDoubleClickTimeout(c,!0),this._startClick(a)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(a)};g.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
g.prototype._handlePointerDrag=function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};g.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};g.prototype._clearDoubleClickTimeout=function(a,b){var c=this._pointerState.get(a);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,b&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};g.prototype._doubleClickTimeoutExceeded=
function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return g}(c.InputHandler);d.SingleAndDoubleClick=q})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.manhattanDistance=function(d,l){return Math.abs(l.x-d.x)+Math.abs(l.y-d.y)};d.euclideanDistance=
function(d,l){var c=l.x-d.x;d=l.y-d.y;return Math.sqrt(c*c+d*d)};d.fitCircleLSQ=function(d,l){l?(l.radius=0,l.center.x=0,l.center.y=0):l={radius:0,center:n.createScreenPoint()};if(0===d.length)return l;if(1===d.length)return l.center.x=d[0].x,l.center.y=d[0].y,l;if(2===d.length){var c=d[0];d=d[1];var e=[d.x-c.x,d.y-c.y],g=e[0],e=e[1];l.radius=Math.sqrt(g*g+e*e)/2;l.center.x=(c.x+d.x)/2;l.center.y=(c.y+d.y)/2;return l}for(var h=0,a=0,b=0;b<d.length;b++)h+=d[b].x,a+=d[b].y;for(var h=h/d.length,a=a/
d.length,f=d.map(function(a){return a.x-h}),k=d.map(function(b){return b.y-a}),m=c=l=0,r=0,I=g=0,b=e=0;b<f.length;b++){var w=f[b],y=k[b],t=w*w,z=y*y;l+=t;c+=z;m+=w*y;r+=t*w;g+=z*y;I+=w*z;e+=y*t}b=l;f=m;k=c;r=.5*(r+I);g=.5*(g+e);e=b*k-m*f;I=(r*k-g*f)/e;g=(b*g-m*r)/e;e=n.createScreenPoint(I+h,g+a);return{radius:Math.sqrt(I*I+g*g+(l+c)/d.length),center:e}}})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),
function(q,d,n,h,l,c,e){function g(a){var b=[];a.forEach(function(a){b.push(h.createScreenPoint(a.event.x,a.event.y))});return e.fitCircleLSQ(b)}function p(a){var c=g(a),d=0;a.forEach(function(a){for(var f=b(a,c),f=f-a.lastAngle;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;f=a.lastAngle+f;a.lastAngle=f;d+=f-a.initialAngle});d/=a.size||1;return{angle:d,radius:c.radius,center:c.center}}function a(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function b(a,b){a=
a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(a){var b=c.call(this,!1)||this;b.navigationTouch=a;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));
b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}n(d,c);d.prototype.createPayload=function(b,c,d,f){return{action:b,pointerType:this.pointerType,button:this.mouseButton,buttons:c.buttons,timestamp:f,pointers:a(this.activePointerMap),pointer:c,angle:d.angle,radius:d.radius,center:d.center}};d.prototype.addPointer=function(a){var c=a.native.pointerId,d=p(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,a);c=b(a,g(this.activePointerMap));
a.initialAngle=c;a.lastAngle=c;this.updatePointerAngles(d)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var b=p(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};d.prototype.updatePointerAngles=function(a){var c=p(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=b(d,c)-a;d.lastAngle=
b(d,c)-a})};d.prototype.emitEvent=function(a,b,c){var d=p(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=l.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),
this.emitEvent("removed",a.data,l.Milliseconds(a.timestamp))))};d.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=l.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,d)):(this.addPointer(c),this.emitEvent("added",c,d),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,
this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,d))}};Object.defineProperty(d.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return d}(c.InputHandler);d.Drag=q;(function(a){a[a.Left=0]="Left";
a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(d.Button||(d.Button={}))})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(q,d,n,h,l,c,e){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function g(a,b,f,e,g){void 0===a&&(a=c.DefaultParameters.maximumDoubleClickDelay);
void 0===b&&(b=c.DefaultParameters.maximumDoubleClickDistance);void 0===f&&(f=c.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=c.DefaultParameters.maximumDoubleTouchDistance);void 0===g&&(g=h.default);var k=d.call(this,!1)||this;k.maximumDoubleClickDelay=a;k.maximumDoubleClickDistance=b;k.maximumDoubleTouchDelay=f;k.maximumDoubleTouchDistance=e;k._clock=g;k._pointerState=new Map;k._immediateDoubleClick=k.registerOutgoing("immediate-double-click");k.registerIncoming("pointer-down",k._handlePointerDown.bind(k));
k.registerIncoming("pointer-up",function(a){k._handlePointerLoss(a,"pointer-up")});k.registerIncoming("pointer-capture-lost",function(a){k._handlePointerLoss(a,"pointer-capture-lost")});k.registerIncoming("pointer-cancel",function(a){k._handlePointerLoss(a,"pointer-cancel")});return k}n(g,d);g.prototype.onUninstall=function(){this._pointerState.forEach(function(a){a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});d.prototype.onUninstall.call(this)};g.prototype._handlePointerDown=
function(a){a=a.data;var b=a.native.pointerId;this._pointerState.has(b)||(this._pointerState.set(b,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};g.prototype._handlePointerLoss=function(a,b){var c=a.data,d=this._pointerState.get(c.native.pointerId);if(d&&"pointer-up"===b&&d.downButton===c.native.button)if(b=d.immediateDoubleClick){b.timeoutHandle.remove();var g="touch"===a.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;
e.manhattanDistance(b,a.data)>g?this._startImmediateDoubleClick(a,d):(this._immediateDoubleClick.emit(a.data,void 0,b.modifiers),this._removeState(c.native))}else this._startImmediateDoubleClick(a,d)};g.prototype._startImmediateDoubleClick=function(a,b){var c=this;b.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,timeoutHandle:this._clock.setTimeout(function(){return c._removeState(a.data.native)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};
g.prototype._removeState=function(a){this._pointerState.delete(a.pointerId);this.stopCapturingPointer(a);this.refreshHasPendingInputs()};return g}(l.InputHandler);d.ImmediateDoubleClick=q})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(q,d,n,h,l,c){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,
movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};q=function(e){function g(c,a,b,f,k,g){void 0===c&&(c=d.DefaultParameters.maximumClickDelay);void 0===a&&(a=d.DefaultParameters.movementUntilMouseDrag);void 0===b&&(b=d.DefaultParameters.movementUntilPenDrag);void 0===f&&(f=d.DefaultParameters.movementUntilTouchDrag);void 0===k&&(k=d.DefaultParameters.holdDelay);void 0===g&&(g=h.default);var m=e.call(this,!1)||this;m.maximumClickDelay=c;m.movementUntilMouseDrag=a;m.movementUntilPenDrag=
b;m.movementUntilTouchDrag=f;m.holdDelay=k;m._clock=g;m._pointerState=new Map;m._pointerDrag=m.registerOutgoing("pointer-drag");m._immediateClick=m.registerOutgoing("immediate-click");m._pointerHold=m.registerOutgoing("hold");m.registerIncoming("pointer-down",m._handlePointerDown.bind(m));m.registerIncoming("pointer-up",function(a){m._handlePointerLoss(a,"pointer-up")});m.registerIncoming("pointer-capture-lost",function(a){m._handlePointerLoss(a,"pointer-capture-lost")});m.registerIncoming("pointer-cancel",
function(a){m._handlePointerLoss(a,"pointer-cancel")});m._moveHandle=m.registerIncoming("pointer-move",m._handlePointerMove.bind(m));m._moveHandle.pause();return m}n(g,e);g.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});e.prototype.onUninstall.call(this)};g.prototype._handlePointerDown=function(c){var a=this,b=c.data,d=b.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var b=
a._pointerState.get(d);b&&(b.isDragging||(a._pointerHold.emit(b.previousEvent,void 0,c.modifiers),b.holdEmitted=!0),b.holdTimeout=null)},this.holdDelay));e={startEvent:b,previousEvent:b,startTimestamp:c.timestamp,isDragging:!1,downButton:b.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(b.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};g.prototype._createPointerDragData=function(c,a,b){return{action:c,startEvent:a.startEvent,
previousEvent:a.previousEvent,currentEvent:b}};g.prototype._handlePointerMove=function(d){var a=d.data,b=this._pointerState.get(a.native.pointerId);if(b){if(b.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",b,a),void 0,b.modifiers);else{var f=c.euclideanDistance(a,b.startEvent),e=this._getDragThreshold(a.native.pointerType);f>e&&this.startDragging(d)}b.previousEvent=a}};g.prototype._getDragThreshold=function(c){switch(c){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;
default:return this.movementUntilMouseDrag}};g.prototype.startDragging=function(c){var a=this,b=c.data,d=b.native.pointerId;this._pointerState.forEach(function(f){null!=f.holdTimeout&&(f.holdTimeout.remove(),f.holdTimeout=null);f.isDragging||(f.modifiers=c.modifiers,f.isDragging=!0,d===f.startEvent.native.pointerId?a._pointerDrag.emit(a._createPointerDragData("start",f,b)):a._pointerDrag.emit(a._createPointerDragData("start",f,f.previousEvent),c.timestamp))})};g.prototype._handlePointerLoss=function(c,
a){var b=c.data,d=b.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===a?b:e.previousEvent),void 0,e.modifiers):"pointer-up"===a&&e.downButton===b.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(d),this.stopCapturingPointer(b.native),0===this._pointerState.size&&
this._moveHandle.pause())};return g}(l.InputHandler);d.PointerClickHoldAndDrag=q})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(q,d,n,h,l,c,e){var g=0;return function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new l([0,255,255]);a.haloOpacity=1;a.fillOpacity=
.25;return a}n(a,c);Object.defineProperty(a.prototype,"version",{get:function(){return g++},enumerable:!0,configurable:!0});h([e.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],a.prototype,"version",null);h([e.property({type:l})],a.prototype,"color",void 0);h([e.property({type:l})],a.prototype,"haloColor",void 0);h([e.property()],a.prototype,"haloOpacity",void 0);h([e.property()],a.prototype,"fillOpacity",void 0);return a=h([e.subclass("esri.views.2d.support.HighlightOptions")],
a)}(e.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(q,d,n,h,l){function c(c,d){var f=c||{},e=f.format,g=f.quality,k=f.rotation,f=f.disableSlice,m=b(c,d.padding),t;t=d.width-m.left-m.right;d=d.height-m.top-m.bottom;m={x:0,y:0,width:t,height:d};if(c&&c.area){null!=c.area.x&&(m.x=Math.floor(c.area.x));null!=c.area.y&&(m.y=Math.floor(c.area.y));var y=null!=c.area.width?
Math.floor(c.area.width):null,w=null!=c.area.height?Math.floor(c.area.height):null;m.width=t-m.x;m.height=d-m.y;null!=y&&null!=w?(m.width=Math.min(m.width,y),m.height=Math.min(m.height,w)):null==y&&null!=w?(y=Math.min(m.width,y),m.height*=y/m.width,m.width=y):null!=y&&null==w&&(y=Math.min(m.height,w),m.width*=y/m.height,m.height=y)}m=a(m,c);y=Math.floor(Math.max(m.x,0));w=Math.floor(Math.max(m.y,0));t={x:y,y:w,width:Math.floor(Math.min(m.width,t-y)),height:Math.floor(Math.min(m.height,d-w))};d=t.width/
t.height;m=m.width/m.height;m!==d&&(m>d?(d=Math.floor(t.width/m),t={x:t.x,y:Math.floor(t.y+(t.height-d)/2),width:t.width,height:d}):(d=Math.floor(t.height*m),t={x:Math.floor(t.x+(t.width-d)/2),y:t.y,width:d,height:t.height}));m=p(c,t);d=m.width;m=m.height;a:switch(e){case "png":case "jpg":case "jpeg":break a;case null:case void 0:e=r;break a;default:h.neverReached(e),e=r}y=I[e];g=l.clamp(null!=g?g:y,0,100);return{format:e,quality:g,area:t,width:d,height:m,rotation:k,disableSlice:!!f,ignoreBackground:!(!c||
!c.ignoreBackground),ignorePadding:!(!c||!c.ignorePadding)}}function e(a,b){return a.toDataURL(m[b.format],b.quality/100)}function g(a,b,c){c||(f||(f=document.createElement("canvas"),f.width=1,f.height=1),c=f);return c.getContext("2d").createImageData(a,b)}function p(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*
b),height:Math.floor(a)}}function a(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function b(a,b){return!b||a&&a.ignorePadding?w:b}Object.defineProperty(d,"__esModule",{value:!0});d.completeUserSettings=c;d.toRenderSettings=function(a,d){var f=c(a,d),e=f.area,g=f.width/e.width,k=b(f,d.padding),m=k.left+
k.right,h=k.top+k.bottom;return{framebufferWidth:Math.floor((d.width-m)*g+m),framebufferHeight:Math.floor((d.height-h)*g+h),region:{x:Math.floor(e.x*g)+k.left,y:Math.floor(e.y*g)+k.top,width:f.width,height:f.height},format:f.format,quality:f.quality,rotation:f.rotation,pixelRatio:g,layers:a&&a.layers?a.layers:[],disableSlice:f.disableSlice,ignoreBackground:f.ignoreBackground,ignorePadding:f.ignorePadding}};d.encodeResult=function(a,b,c,d){if(d.premultipliedAlpha)for(var f=a.data,g=f.length,k=0;k<
g;k+=4){var m=f[k+3];0<m&&(m/=255,f[k+0]/=m,f[k+1]/=m,f[k+2]/=m)}c.width=a.width;c.height=a.height;f=c.getContext("2d");f.putImageData(a,0,0);d.flipY&&(f.save(),f.globalCompositeOperation="copy",f.scale(1,-1),f.translate(0,-f.canvas.height),f.drawImage(f.canvas,0,0),f.restore());a=f.getImageData(0,0,a.width,a.height);b=e(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};d.toDataUrl=e;d.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,
b)}catch(B){k=!1}return g(a,b,c)};d.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b,c)}catch(v){k=!1}b=g(b,c,d);b.data.set(a,0);return b};d.resampleHermite=function(a,b,c,d,f,e,g,k){void 0===d&&(d=0);void 0===f&&(f=0);void 0===e&&(e=a.width-d);void 0===g&&(g=a.height-f);void 0===k&&(k=!1);var m=a.data,h=b.width,t=b.height,r=b.data;e/=h;g/=t;var l=Math.ceil(e/2),z=Math.ceil(g/2);a=a.width;for(var p=0;p<t;p++)for(var w=
0;w<h;w++){for(var y=4*(w+(k?t-p-1:p)*h),n=0,v=0,I=0,q=0,B=0,u=0,x=(p+.5)*g,C=Math.floor(p*g);C<(p+1)*g;C++)for(var U=Math.abs(x-(C+.5))/z,Y=(w+.5)*e,U=U*U,W=Math.floor(w*e);W<(w+1)*e;W++){var J=Math.abs(Y-(W+.5))/l,J=Math.sqrt(U+J*J);if(!(1<=J)){var J=2*J*J*J-3*J*J+1,X=4*(d+W+(f+C)*a),u=u+J*m[X+3],v=v+J;!c&&255>m[X+3]&&(J=J*m[X+3]/255);I+=J*m[X];q+=J*m[X+1];B+=J*m[X+2];n+=J}}r[y]=I/n;r[y+1]=q/n;r[y+2]=B/n;r[y+3]=u/v}return b};d.screenshotSuperSampleSettings=function(a,c,d){if(!c)return a;c=a.framebufferWidth;
var f=a.framebufferHeight,e=a.pixelRatio,g=a.region;d=b(a,d);var k=d.left+d.right,m=d.top+d.bottom,h=c-k,t=f-m,r=Math.min(8,Math.min((2048-k)/h,(2048-m)/t));return 1.5>r?a:n({},a,{framebufferWidth:Math.round(h*r)+k,framebufferHeight:Math.round(t*r)+m,pixelRatio:e*r,resample:{region:{x:Math.round((g.x-d.left)*r)+d.left,y:Math.round((g.y-d.top)*r)+d.top,width:Math.round(g.width*r),height:Math.round(g.height*r)},width:c,height:f}})};var f=null,k=!0,m={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},
r="jpg",I={png:100,jpg:98,jpeg:98},w={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(q,d,n,h,l){Object.defineProperty(d,"__esModule",{value:!0});var c={supportsMajorWebPerformanceCaveat:!1};d.check=function(d){d=n({},c,d);return l("esri-webgl")?!d.supportsMajorWebPerformanceCaveat&&l("esri-webgl-major-performance-caveat")?new h("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):l("esri-webgl-high-precision-fragment")?l("esri-webgl-vertex-shader-samplers")?l("esri-webgl-element-index-uint")?l("esri-webgl-standard-derivatives")?l("esri-webgl-instanced-arrays")?null:new h("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new h("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new h("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new h("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new h("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new h("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(q,d,n,h,l,c){return function(c){function d(d){d=c.call(this,d)||this;d.components=["attribution","zoom"];return d}n(d,c);h([l.property()],d.prototype,"components",void 0);return d=h([l.subclass("esri.views.ui.2d.DefaultUI2D")],d)}(l.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(q,d,n,h,l,c,e,g,p,a,b,f){return function(d){function g(a){a=d.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}n(g,d);g.prototype.initialize=function(){this._handles.add([l.init(this,"components",this._componentsWatcher.bind(this)),l.init(this,"view",this._updateViewAwareWidgets.bind(this))])};g.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=
b._find(a))b.remove(a),a.destroy()})};g.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b._find(c))&&c.widget)&&void 0!==c.view&&(c.view=a)})};g.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};g.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};g.prototype._addComponents=function(a){var b=this;this.initialized&&
a.forEach(function(a){return b.add(b._createComponent(a),b._defaultPositionLookup[a])})};g.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new e({id:a,node:b})};g.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};g.prototype._createAttribution=function(){return new p({view:this.view})};
g.prototype._createCompass=function(){return new a({view:this.view})};g.prototype._createNavigationToggle=function(){return new b({view:this.view})};g.prototype._createZoom=function(){return new f({view:this.view})};h([c.property()],g.prototype,"components",void 0);return g=h([c.subclass("esri.views.ui.DefaultUI")],g)}(c.declared(g))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),
function(q,d,n,h,l,c,e){return function(d){function g(){var a=null!==d&&d.apply(this,arguments)||this;a.widget=null;return a}n(g,d);g.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(g.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&a.classList.add("esri-component"),b&&b.classList.remove("esri-component"),
this._set("node",a))},enumerable:!0,configurable:!0});g.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),c.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};h([e.property()],g.prototype,"id",null);h([e.property()],g.prototype,"node",null);h([e.cast("node")],g.prototype,"castNode",null);h([e.property({readOnly:!0})],
g.prototype,"widget",void 0);return g=h([e.subclass("esri.views.ui.Component")],g)}(e.declared(l))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(q,d,n,h,l,c,e,g,p,a,b,f){function k(a){return"object"!==
typeof a||a instanceof b||"declaredClass"in a||!("component"in a||"index"in a||"position"in a)?null:a}function m(a,b){var c=b.bottom,d=b.left,f=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=f}var r={left:0,top:0,bottom:0,right:0},I={bottom:30,top:15,right:15,left:15};return function(d){function e(a){a=d.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new g;a.view=null;a._initContainers();
return a}h(e,d);e.prototype.initialize=function(){this._handles.add([p.init(this,"view.padding, container",this._applyViewPadding.bind(this)),p.init(this,"padding",this._applyUIPadding.bind(this))])};e.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(e.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),
this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),m(b,{top:"",bottom:"",left:"",right:""}),c.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",
a):this._clearOverride("padding")},enumerable:!0,configurable:!0});e.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:n({},I,a)};Object.defineProperty(e.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});e.prototype.add=function(a,c){var d=this,f,e;if(Array.isArray(a))a.forEach(function(a){return d.add(a,c)});else{var g=k(a);
g&&(f=g.index,c=g.position,a=g.component,e=g.key);c&&"object"===typeof c&&(f=c.index,e=c.key,c=c.position);!a||c&&!this._isValidPosition(c)||(a instanceof b||(a=new b({node:a})),this._place({component:a,position:c,index:f}),this._components.push(a),e&&this._componentToKey.set(a,e))}};e.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this._find(a);if(d){var f=this._componentToKey;if(!f.has(a)||f.get(a)===b)return f=this._components.indexOf(d),
d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(f,1)[0]}}};e.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};e.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,f=k(a)||k(b);f&&(d=f.index,b=f.position,a=f.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};e.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};e.prototype._find=function(a){return a?a instanceof b?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||
a):null};e.prototype._getViewPadding=function(){return this.get("view.padding")||r};e.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};e.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");var c=document.createElement("div");
c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var g=document.createElement("div");g.classList.add("esri-ui-bottom-right");g.classList.add("esri-ui-corner");a.appendChild(g);this._innerContainer=a;this._manualContainer=
b;a=f.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":g,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?g:e,"bottom-trailing":a?e:g};this._positionNameToContainerLookup=n({manual:b},this._cornerNameToContainerLookup)};e.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};e.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var f=-1<d,
e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();f?(f=Array.prototype.slice.call(a.children),0===d?a.firstChild?c.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=f.length?a.appendChild(b.node):c.insertBefore(b.node,f[d])):a.appendChild(b.node)};e.prototype._applyViewPadding=function(){var a=this.container;a&&m(a,this._toPxPosition(this._getViewPadding()))};
e.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&m(a,this._toPxPosition(this.padding))};e.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};e.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};e.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};e.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};e.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};l([a.property()],e.prototype,"container",null);l([a.property({dependsOn:["view.height"]})],e.prototype,"height",null);l([a.property({value:I})],e.prototype,"padding",null);l([a.cast("padding")],e.prototype,"castPadding",null);l([a.property()],e.prototype,"view",void 0);l([a.property({dependsOn:["view.width"]})],
e.prototype,"width",null);return e=l([a.subclass("esri.views.ui.UI")],e)}(a.declared(e.EventedAccessor))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(q,d,n,h,l,c,e,g,p,a){return function(b){function d(a){a=b.call(this,a)||this;a._isOpen=
!1;a._attributionTextOverflowed=!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=l.widgetLabel;a.view=null;a.viewModel=new p;return a}n(d,b);d.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});d.prototype.render=function(){var b,c=(b={},b["esri-attribution--open"]=this._isOpen,b);return a.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),a.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",a.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri")))};
d.prototype._renderSourcesNode=function(){var b,c=this._isOpen,d=this._isInteractive(),f=d?0:-1,e=this.attributionText,g=d?"button":void 0,c=(b={},b["esri-attribution__sources--open"]=c,b["esri-interactive"]=d,b);return a.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:e,role:g,tabIndex:f})};d.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};d.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};d.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};d.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};h([e.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),a.renderable()],d.prototype,"attributionText",null);h([e.property()],d.prototype,"iconClass",void 0);h([e.property(),a.renderable()],d.prototype,"itemDelimiter",void 0);h([e.property()],d.prototype,"label",void 0);h([e.aliasOf("viewModel.view")],d.prototype,"view",void 0);h([e.property({type:p}),a.renderable(["state","view.size"])],d.prototype,"viewModel",void 0);h([a.accessibleHandler()],d.prototype,"_toggleState",null);return d=h([e.subclass("esri.widgets.Attribution")],
d)}(e.declared(g))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(q,d,n,h,l,c,e,g,p,a,b,f,k,m,r){function I(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function w(a,b,c){c&&b&&(g.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var y=[];return function(b){function d(c){var d=b.call(this,c)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension");d.notifyChange("state")};d._pendingAttributions=new Set;d._fetchedAttributionData=
new Map;d.items=new a;d.view=null;d._allLayerViewsChange=function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");y.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"copyright"in b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))w(y,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&w(y,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?w(y,a,c):w(y,a,b.copyright)}}),I(d.items,y)&&(d.items.removeAll(),d.items.addMany(y)),d.notifyChange("state")):d.clear()};
d.handles.add([f.on(d,"view.allLayerViews","change",d._allLayerViewsChange,d._allLayerViewsChange,d.clear),f.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}n(d,b);d.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});
d.prototype._fetchAttributionData=function(a){return l(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,p.result(a.layer.fetchAttributionData())];case 1:return b=c.sent(),this._pendingAttributions.has(a)&&(d=b.ok?this._createContributionIndex(b.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,d)),this._updateAttributionItems(),
[2]}})})};d.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=0;d<a.length;d++){var f=a[d],g=f.coverageAreas;if(!g)return;for(var k=0;k<g.length;k++)for(var m=g[k],h=m.bbox,l=m.zoomMin-(b&&m.zoomMin?1:0),p=m.zoomMax-(b&&m.zoomMax?1:0),m={extent:r.geographicToWebMercator({xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:e.SpatialReference.WGS84}),attribution:f.attribution||"",score:null!=m.score?m.score:100,id:d};l<=p;l++)c[l]=c[l]||[],c[l].push(m)}c.maxKey=
Math.max.apply(null,Object.keys(c));return c};d.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var f=r.project(d.center.clone().normalize(),b.spatialReference),e={};return a?a.filter(function(a){var b=!e[a.id]&&f&&m.extentContainsPoint(a.extent,f);b&&(e[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):
""};h([k.property({readOnly:!0,type:a})],d.prototype,"items",void 0);h([k.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"state",null);h([k.property()],d.prototype,"view",void 0);return d=h([k.subclass("esri.widgets.Attribution.AttributionViewModel")],d)}(k.declared(b.HandleOwner))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(q,d,n,h,l,c,e,g,p){return function(a){function b(b){b=a.call(this,b)||this;b.goToOverride=null;b.iconClass="esri-icon-locate-circled";b.label=l.widgetLabel;b.view=null;b.viewModel=new g;return b}n(b,a);b.prototype.reset=function(){};b.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,e="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=e?-1:0,e=(a={},a["esri-disabled"]=e,a["esri-interactive"]=!e,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=
!g,b);return p.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",e),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":l.reset,title:l.reset},p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),p.tsx("span",{class:"esri-icon-font-fallback-text"},l.reset))};b.prototype._reset=function(){this.viewModel.reset()};b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+
a.z+"deg)"}};h([c.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);h([c.property()],b.prototype,"iconClass",void 0);h([c.property()],b.prototype,"label",void 0);h([c.aliasOf("viewModel.view")],b.prototype,"view",void 0);h([c.property({type:g}),p.renderable(["viewModel.orientation","viewModel.state"])],b.prototype,"viewModel",void 0);h([c.aliasOf("viewModel.reset")],b.prototype,"reset",null);h([p.accessibleHandler()],b.prototype,"_reset",null);return b=h([c.subclass("esri.widgets.Compass")],
b)}(c.declared(e))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(q,d,n,h,l,c,e,g,p){return function(a){function b(b){b=a.call(this,b)||this;b._handles=new c;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=
b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);b.view;return b}n(b,a);b.prototype.initialize=function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};b.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();
a&&("2d"===a.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):this._handles.add(e.init(this,"view.camera",this._updateForCamera)))};h([g.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],b.prototype,"canShowNorth",null);h([g.property()],b.prototype,"orientation",void 0);h([g.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],b.prototype,"state",null);h([g.property()],b.prototype,"view",void 0);h([g.property()],
b.prototype,"reset",null);return b=h([g.subclass("esri.widgets.CompassViewModel")],b)}(g.declared(p.GoToMixin(l)))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),function(q,d,n,h,l,c,e,g,p){return function(a){function b(b){b=a.call(this,b)||
this;b.iconClass="esri-icon-pan2";b.label=l.widgetLabel;b.view=null;b.viewModel=new g;return b}n(b,a);Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.toggle=function(){};b.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),e="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,
a);a=(b={},b["esri-navigation-toggle__button--active"]=e,b);b=(c={},c["esri-navigation-toggle__button--active"]=!e,c);c=d?-1:0;return p.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":l.toggle,title:l.toggle},p.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",a)},p.tsx("span",{class:"esri-icon-pan"})),p.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",b)},p.tsx("span",{class:"esri-icon-rotate"})))};b.prototype._toggle=function(){this.toggle()};h([c.property()],b.prototype,"iconClass",void 0);h([c.property()],b.prototype,"label",void 0);h([c.property({value:"vertical"}),p.renderable()],b.prototype,"layout",null);h([c.aliasOf("viewModel.view"),p.renderable()],b.prototype,"view",void 0);h([c.property({type:g}),p.renderable(["viewModel.state","viewModel.navigationMode"])],b.prototype,"viewModel",void 0);h([c.aliasOf("viewModel.toggle")],
b.prototype,"toggle",null);h([p.accessibleHandler()],b.prototype,"_toggle",null);return b=h([c.subclass("esri.widgets.NavigationToggle")],b)}(c.declared(e))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(q,d,n,h,l,c,e,g){return function(d){function a(a){a=
d.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}n(a,d);a.prototype.initialize=function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});a.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};a.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};h([g.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null);h([g.property()],a.prototype,"navigationMode",void 0);h([g.property()],a.prototype,"view",void 0);h([g.property()],a.prototype,"toggle",null);return a=h([g.subclass("esri.widgets.NavigationToggleViewModel")],
a)}(g.declared(l))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(q,d,n,h,l,c,e,g,p,a){return function(b){function d(a){a=b.call(this,a)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";a.label=l.widgetLabel;a.view=null;a.viewModel=new p;return a}n(d,b);d.prototype.postInitialize=
function(){this._zoomInButton=new g({action:this.zoomIn,iconClass:"esri-icon-plus",title:l.zoomIn});this._zoomOutButton=new g({action:this.zoomOut,iconClass:"esri-icon-minus",title:l.zoomOut})};Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.render=function(){var b,c=this.viewModel,d=(b={},b["esri-zoom--horizontal"]="horizontal"===this.layout,b);this._zoomInButton.enabled="ready"===c.state&&
c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return a.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};h([c.property()],d.prototype,"iconClass",void 0);h([c.property()],d.prototype,"label",void 0);h([c.property({value:"vertical"}),a.renderable()],d.prototype,"layout",null);h([c.aliasOf("viewModel.view"),a.renderable()],d.prototype,"view",void 0);
h([c.property({type:p}),a.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],d.prototype,"viewModel",void 0);h([c.aliasOf("viewModel.zoomIn")],d.prototype,"zoomIn",null);h([c.aliasOf("viewModel.zoomOut")],d.prototype,"zoomOut",null);return d=h([c.subclass("esri.widgets.Zoom")],d)}(c.declared(e))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(q,d,n,h,l,c,e){return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.iconClass="";a.title="";return a}n(d,c);d.prototype.render=function(){var a,b,c=this.enabled?0:-1,d=(a={},a["esri-disabled"]=!this.enabled,a["esri-interactive"]=this.enabled,a);a=(b={},b[this.iconClass]=!!this.iconClass,b);return e.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",d),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},e.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};d.prototype._triggerAction=function(){this.action.call(this)};h([l.property()],d.prototype,"action",void 0);h([l.property(),e.renderable()],d.prototype,"enabled",void 0);h([l.property(),e.renderable()],d.prototype,"iconClass",void 0);h([l.property(),e.renderable()],d.prototype,"title",void 0);h([e.accessibleHandler()],d.prototype,
"_triggerAction",null);return d=h([l.subclass("esri.widgets.IconButton")],d)}(l.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(q,d,n,h,l,c,e,g,p){return function(a){function b(b){b=a.call(this,b)||this;b.canZoomIn=!1;b.canZoomOut=!1;b.zoomIn=b.zoomIn.bind(b);
b.zoomOut=b.zoomOut.bind(b);return b}n(b,a);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new g({view:a}):"3d"===a.type&&(this._zoomConditions=new p({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():c.ignoreAbortErrors(a.goTo({zoomFactor:2}))}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():c.ignoreAbortErrors(a.goTo({zoomFactor:.5}))}};h([e.property()],b.prototype,"_zoomConditions",void 0);h([e.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);h([e.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",
void 0);h([e.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);h([e.property()],b.prototype,"view",null);h([e.property()],b.prototype,"zoomIn",null);h([e.property()],b.prototype,"zoomOut",null);return b=h([e.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(e.declared(l))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(q,d,n,h,l,c){return function(d){function e(){return null!==d&&d.apply(this,arguments)||this}n(e,d);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),a=this.get("view.constraints.effectiveMaxScale");return 0===a||c>a},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||
this.get("view.scale"),a=this.get("view.constraints.effectiveMinScale");return 0===a||c<a},enumerable:!0,configurable:!0});h([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],e.prototype,"canZoomIn",null);h([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],e.prototype,"canZoomOut",null);h([c.property()],e.prototype,"view",void 0);return e=
h([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],e)}(c.declared(l))})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,d,n,h,l,c){return function(d){function e(){return null!==d&&d.apply(this,arguments)||this}n(e,d);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,
configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});h([c.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomIn",null);h([c.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomOut",null);h([c.property()],e.prototype,"view",void 0);return e=h([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],e)}(c.declared(l))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require",
"exports","./math/mat4"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat4=n})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(q,d,n,h){function l(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function c(a,b,c){var d=b[0],f=b[1],e=b[2],g=b[3],h=b[4],l=b[5],n=b[6],p=b[7],q=b[8],v=b[9],u=b[10],x=b[11],C=b[12],A=b[13],H=b[14];
b=b[15];var D=c[0],E=c[1],F=c[2],G=c[3];a[0]=D*d+E*h+F*q+G*C;a[1]=D*f+E*l+F*v+G*A;a[2]=D*e+E*n+F*u+G*H;a[3]=D*g+E*p+F*x+G*b;D=c[4];E=c[5];F=c[6];G=c[7];a[4]=D*d+E*h+F*q+G*C;a[5]=D*f+E*l+F*v+G*A;a[6]=D*e+E*n+F*u+G*H;a[7]=D*g+E*p+F*x+G*b;D=c[8];E=c[9];F=c[10];G=c[11];a[8]=D*d+E*h+F*q+G*C;a[9]=D*f+E*l+F*v+G*A;a[10]=D*e+E*n+F*u+G*H;a[11]=D*g+E*p+F*x+G*b;D=c[12];E=c[13];F=c[14];G=c[15];a[12]=D*d+E*h+F*q+G*C;a[13]=D*f+E*l+F*v+G*A;a[14]=D*e+E*n+F*u+G*H;a[15]=D*g+E*p+F*x+G*b;return a}function e(a,b,c){var d=
b[0],f=b[1],e=b[2],g=b[3],h=d+d,l=f+f,n=e+e;b=d*h;var p=d*l,d=d*n,q=f*l,f=f*n,e=e*n,h=g*h,l=g*l,g=g*n;a[0]=1-(q+e);a[1]=p+g;a[2]=d-l;a[3]=0;a[4]=p-g;a[5]=1-(b+e);a[6]=f+h;a[7]=0;a[8]=d+l;a[9]=f-h;a[10]=1-(b+q);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-
c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};d.set=function(a,b,c,d,e,g,h,l,n,p,q,B,v,u,x,C,A){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=g;a[5]=h;a[6]=l;a[7]=n;a[8]=p;a[9]=q;a[10]=B;a[11]=v;a[12]=u;a[13]=x;a[14]=C;a[15]=A;return a};d.identity=l;d.transpose=
function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],g=b[6],h=b[7],l=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=g;a[11]=b[14];a[12]=e;a[13]=h;a[14]=l}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};d.invert=function(a,b){var c=b[0],d=b[1],e=b[2],g=b[3],h=b[4],l=b[5],n=b[6],p=b[7],q=b[8],B=b[9],v=b[10],u=b[11],x=b[12],C=b[13],A=b[14];
b=b[15];var H=c*l-d*h,D=c*n-e*h,E=c*p-g*h,F=d*n-e*l,G=d*p-g*l,P=e*p-g*n,Q=q*C-B*x,K=q*A-v*x,N=q*b-u*x,M=B*A-v*C,R=B*b-u*C,O=v*b-u*A,L=H*O-D*R+E*M+F*N-G*K+P*Q;if(!L)return null;L=1/L;a[0]=(l*O-n*R+p*M)*L;a[1]=(e*R-d*O-g*M)*L;a[2]=(C*P-A*G+b*F)*L;a[3]=(v*G-B*P-u*F)*L;a[4]=(n*N-h*O-p*K)*L;a[5]=(c*O-e*N+g*K)*L;a[6]=(A*E-x*P-b*D)*L;a[7]=(q*P-v*E+u*D)*L;a[8]=(h*R-l*N+p*Q)*L;a[9]=(d*N-c*R-g*Q)*L;a[10]=(x*G-C*E+b*H)*L;a[11]=(B*E-q*G-u*H)*L;a[12]=(l*K-h*M-n*Q)*L;a[13]=(c*M-d*K+e*Q)*L;a[14]=(C*D-x*F-A*H)*L;
a[15]=(q*F-B*D+v*H)*L;return a};d.adjoint=function(a,b){var c=b[0],d=b[1],e=b[2],g=b[3],h=b[4],l=b[5],n=b[6],p=b[7],q=b[8],B=b[9],v=b[10],u=b[11],x=b[12],C=b[13],A=b[14];b=b[15];a[0]=l*(v*b-u*A)-B*(n*b-p*A)+C*(n*u-p*v);a[1]=-(d*(v*b-u*A)-B*(e*b-g*A)+C*(e*u-g*v));a[2]=d*(n*b-p*A)-l*(e*b-g*A)+C*(e*p-g*n);a[3]=-(d*(n*u-p*v)-l*(e*u-g*v)+B*(e*p-g*n));a[4]=-(h*(v*b-u*A)-q*(n*b-p*A)+x*(n*u-p*v));a[5]=c*(v*b-u*A)-q*(e*b-g*A)+x*(e*u-g*v);a[6]=-(c*(n*b-p*A)-h*(e*b-g*A)+x*(e*p-g*n));a[7]=c*(n*u-p*v)-h*(e*u-
g*v)+q*(e*p-g*n);a[8]=h*(B*b-u*C)-q*(l*b-p*C)+x*(l*u-p*B);a[9]=-(c*(B*b-u*C)-q*(d*b-g*C)+x*(d*u-g*B));a[10]=c*(l*b-p*C)-h*(d*b-g*C)+x*(d*p-g*l);a[11]=-(c*(l*u-p*B)-h*(d*u-g*B)+q*(d*p-g*l));a[12]=-(h*(B*A-v*C)-q*(l*A-n*C)+x*(l*v-n*B));a[13]=c*(B*A-v*C)-q*(d*A-e*C)+x*(d*v-e*B);a[14]=-(c*(l*A-n*C)-h*(d*A-e*C)+x*(d*n-e*l));a[15]=c*(l*v-n*B)-h*(d*v-e*B)+q*(d*n-e*l);return a};d.determinant=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],l=a[6],n=a[7],p=a[8],q=a[9],B=a[10],v=a[11],u=a[12],x=a[13],
C=a[14];a=a[15];return(b*h-c*g)*(B*a-v*C)-(b*l-d*g)*(q*a-v*x)+(b*n-e*g)*(q*C-B*x)+(c*l-d*h)*(p*a-v*u)-(c*n-e*h)*(p*C-B*u)+(d*n-e*l)*(p*x-q*u)};d.multiply=c;d.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f=void 0,g=void 0,h=void 0,l=void 0,n=void 0,p=void 0,q=void 0,v=void 0,u=void 0,x=void 0,C=void 0,A=void 0;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],g=b[1],h=b[2],l=b[3],n=b[4],p=
b[5],q=b[6],v=b[7],u=b[8],x=b[9],C=b[10],A=b[11],a[0]=f,a[1]=g,a[2]=h,a[3]=l,a[4]=n,a[5]=p,a[6]=q,a[7]=v,a[8]=u,a[9]=x,a[10]=C,a[11]=A,a[12]=f*d+n*e+u*c+b[12],a[13]=g*d+p*e+x*c+b[13],a[14]=h*d+q*e+C*c+b[14],a[15]=l*d+v*e+A*c+b[15]);return a};d.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};d.rotate=
function(a,b,c,d){var e=d[0],f=d[1];d=d[2];var g=Math.sqrt(e*e+f*f+d*d),k=void 0,l=void 0,n=void 0,p=void 0,q=void 0,v=void 0,u=void 0,x=void 0,C=void 0,A=void 0,H=void 0,D=void 0,E=void 0,F=void 0,G=void 0,P=void 0,Q=void 0,K=void 0,N=void 0,M=void 0,R=void 0,O=void 0,l=k=void 0;if(g<h.EPSILON)return null;g=1/g;e*=g;f*=g;d*=g;k=Math.sin(c);l=Math.cos(c);n=1-l;p=b[0];q=b[1];v=b[2];u=b[3];x=b[4];C=b[5];A=b[6];H=b[7];D=b[8];E=b[9];F=b[10];G=b[11];P=e*e*n+l;Q=f*e*n+d*k;K=d*e*n-f*k;N=e*f*n-d*k;M=f*f*
n+l;R=d*f*n+e*k;O=e*d*n+f*k;k=f*d*n-e*k;l=d*d*n+l;a[0]=p*P+x*Q+D*K;a[1]=q*P+C*Q+E*K;a[2]=v*P+A*Q+F*K;a[3]=u*P+H*Q+G*K;a[4]=p*N+x*M+D*R;a[5]=q*N+C*M+E*R;a[6]=v*N+A*M+F*R;a[7]=u*N+H*M+G*R;a[8]=p*O+x*k+D*l;a[9]=q*O+C*k+E*l;a[10]=v*O+A*k+F*l;a[11]=u*O+H*k+G*l;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};d.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],g=b[6],h=b[7],l=b[8],n=b[9],p=b[10],q=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],
a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+l*d;a[5]=f*c+n*d;a[6]=g*c+p*d;a[7]=h*c+q*d;a[8]=l*c-e*d;a[9]=n*c-f*d;a[10]=p*c-g*d;a[11]=q*c-h*d;return a};d.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],l=b[8],n=b[9],p=b[10],q=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-l*d;a[1]=f*c-n*d;a[2]=g*c-p*d;a[3]=h*c-q*d;a[8]=e*d+l*c;a[9]=f*d+n*c;a[10]=g*d+p*c;a[11]=h*d+q*c;return a};d.rotateZ=function(a,
b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],g=b[2],h=b[3],l=b[4],n=b[5],p=b[6],q=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+l*d;a[1]=f*c+n*d;a[2]=g*c+p*d;a[3]=h*c+q*d;a[4]=l*c-e*d;a[5]=n*c-f*d;a[6]=p*c-g*d;a[7]=q*c-h*d;return a};d.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};d.fromScaling=function(a,
b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotation=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f=Math.sqrt(d*d+e*e+c*c),g=void 0,l=void 0,n=void 0;if(f<h.EPSILON)return null;f=1/f;d*=f;e*=f;c*=f;g=Math.sin(b);l=Math.cos(b);n=1-l;a[0]=d*d*n+l;a[1]=e*d*n+c*g;a[2]=c*d*n-e*g;a[3]=0;a[4]=d*e*n-c*g;a[5]=e*e*n+l;a[6]=c*e*n+d*g;a[7]=0;a[8]=d*c*n+e*g;a[9]=e*c*n-d*g;a[10]=c*c*n+l;a[11]=0;a[12]=0;a[13]=0;
a[14]=0;a[15]=1;return a};d.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=
-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotationTranslation=e;d.fromQuat2=function(a,b){var c=p,d=-b[0],g=-b[1],h=-b[2],l=b[3],n=b[4],q=b[5],t=b[6],z=b[7],B=d*d+g*g+h*h+l*l;0<B?(c[0]=2*(n*l+z*d+q*h-t*g)/B,c[1]=2*(q*l+z*g+t*d-n*h)/B,c[2]=2*(t*l+z*h+n*g-q*d)/B):(c[0]=2*(n*l+z*d+q*h-t*g),c[1]=2*(q*l+z*g+t*d-n*h),c[2]=2*(t*l+z*h+n*g-q*d));e(a,b,c);return a};var p=n.create();d.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};
d.getScaling=function(a,b){var c=b[0],d=b[1],e=b[2],g=b[4],h=b[5],l=b[6],n=b[8],p=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+e*e);a[1]=Math.sqrt(g*g+h*h+l*l);a[2]=Math.sqrt(n*n+p*p+b*b);return a};d.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;0<c?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),
a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d);return a};d.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],g=b[2],h=b[3],k=e+e,l=f+f,n=g+g;b=e*k;var p=e*l,e=e*n,q=f*l,f=f*n,g=g*n,k=h*k,l=h*l,h=h*n,n=d[0],u=d[1];d=d[2];a[0]=(1-(q+g))*n;a[1]=(p+h)*n;a[2]=(e-l)*n;a[3]=0;a[4]=(p-h)*u;a[5]=(1-(b+g))*u;a[6]=(f+k)*u;a[7]=0;a[8]=(e+l)*d;a[9]=(f-k)*d;a[10]=(1-(b+q))*
d;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};d.fromRotationTranslationScaleOrigin=function(a,b,c,d,e){var f=b[0],g=b[1],h=b[2],k=b[3],l=f+f,m=g+g,n=h+h;b=f*l;var p=f*m,q=f*n,f=g*m,g=g*n,x=h*n,h=k*l,m=k*m,C=k*n,A=d[0],H=d[1],n=d[2];d=e[0];k=e[1];e=e[2];var l=(1-(f+x))*A,D=(p+C)*A,A=(q-m)*A,p=(p-C)*H,x=(1-(b+x))*H,H=(g+h)*H,q=(q+m)*n,g=(g-h)*n;b=(1-(b+f))*n;a[0]=l;a[1]=D;a[2]=A;a[3]=0;a[4]=p;a[5]=x;a[6]=H;a[7]=0;a[8]=q;a[9]=g;a[10]=b;a[11]=0;a[12]=c[0]+d-(l*d+p*k+q*e);a[13]=c[1]+k-(D*
d+x*k+g*e);a[14]=c[2]+e-(A*d+H*k+b*e);a[15]=1;return a};d.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var g=c+c,h=d+d,l=e+e,c=c*g,n=d*g,d=d*h,p=e*g,q=e*h,e=e*l,g=b*g,h=b*h;b*=l;a[0]=1-d-e;a[1]=n+b;a[2]=p-h;a[3]=0;a[4]=n-b;a[5]=1-c-e;a[6]=q+g;a[7]=0;a[8]=p+h;a[9]=q-g;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.frustum=function(a,b,c,d,e,g,h){var f=1/(c-b),k=1/(e-d),l=1/(g-h);a[0]=2*g*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*k;a[6]=0;a[7]=0;a[8]=(c+b)*f;a[9]=(e+d)*k;a[10]=
(h+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*g*2*l;a[15]=0;return a};d.perspective=function(a,b,c,d,e){b=1/Math.tan(b/2);var f=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=e&&Infinity!==e?(f=1/(d-e),a[10]=(e+d)*f,a[14]=2*e*d*f):(a[10]=-1,a[14]=-2*d);return a};d.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),g=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var h=2/(g+b),k=2/(e+f);a[0]=h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((g-b)*h*.5);a[9]=(e-f)*k*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a};d.ortho=function(a,b,c,d,e,g,h){var f=1/(b-c),k=1/(d-e),l=1/(g-h);a[0]=-2*f;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*f;a[13]=(e+d)*k;a[14]=(h+g)*l;a[15]=1;return a};d.lookAt=function(a,b,c,d){var e=void 0,f=void 0,g=void 0,k=void 0,n=void 0,p=void 0,
q=void 0,B=void 0,v=void 0,u=void 0,x=b[0],C=b[1];b=b[2];g=d[0];k=d[1];d=d[2];q=c[0];B=c[1];c=c[2];if(Math.abs(x-q)<h.EPSILON&&Math.abs(C-B)<h.EPSILON&&Math.abs(b-c)<h.EPSILON)return l(a);q=x-q;B=C-B;v=b-c;u=1/Math.sqrt(q*q+B*B+v*v);q*=u;B*=u;v*=u;e=k*v-d*B;f=d*q-g*v;g=g*B-k*q;(u=Math.sqrt(e*e+f*f+g*g))?(u=1/u,e*=u,f*=u,g*=u):g=f=e=0;k=B*g-v*f;n=v*e-q*g;p=q*f-B*e;(u=Math.sqrt(k*k+n*n+p*p))?(u=1/u,k*=u,n*=u,p*=u):p=n=k=0;a[0]=e;a[1]=k;a[2]=q;a[3]=0;a[4]=f;a[5]=n;a[6]=B;a[7]=0;a[8]=g;a[9]=p;a[10]=v;
a[11]=0;a[12]=-(e*x+f*C+g*b);a[13]=-(k*x+n*C+p*b);a[14]=-(q*x+B*C+v*b);a[15]=1;return a};d.targetTo=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];var g=d[0],h=d[1],k=d[2];d=e-c[0];var l=f-c[1];c=b-c[2];var n=d*d+l*l+c*c;0<n&&(n=1/Math.sqrt(n),d*=n,l*=n,c*=n);var p=h*c-k*l,k=k*d-g*c,g=g*l-h*d,n=p*p+k*k+g*g;0<n&&(n=1/Math.sqrt(n),p*=n,k*=n,g*=n);a[0]=p;a[1]=k;a[2]=g;a[3]=0;a[4]=l*g-c*k;a[5]=c*p-d*g;a[6]=d*k-l*p;a[7]=0;a[8]=d;a[9]=l;a[10]=c;a[11]=0;a[12]=e;a[13]=f;a[14]=b;a[15]=1;return a};d.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,b,
c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};d.subtract=g;d.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*
c;a[15]=b[15]*c;return a};d.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;a[9]=b[9]+c[9]*d;a[10]=b[10]+c[10]*d;a[11]=b[11]+c[11]*d;a[12]=b[12]+c[12]*d;a[13]=b[13]+c[13]*d;a[14]=b[14]+c[14]*d;a[15]=b[15]+c[15]*d;return a};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&
a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};d.equals=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],l=a[4],n=a[5],p=a[6],q=a[7],z=a[8],B=a[9],v=a[10],u=a[11],x=a[12],C=a[13],A=a[14];a=a[15];var H=b[0],D=b[1],E=b[2],F=b[3],G=b[4],P=b[5],Q=b[6],K=b[7],N=b[8],M=b[9],R=b[10],O=b[11],L=b[12],S=b[13],T=b[14];b=b[15];return Math.abs(c-H)<=h.EPSILON*Math.max(1,Math.abs(c),Math.abs(H))&&Math.abs(d-D)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&
Math.abs(e-E)<=h.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(g-F)<=h.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(l-G)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(n-P)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(p-Q)<=h.EPSILON*Math.max(1,Math.abs(p),Math.abs(Q))&&Math.abs(q-K)<=h.EPSILON*Math.max(1,Math.abs(q),Math.abs(K))&&Math.abs(z-N)<=h.EPSILON*Math.max(1,Math.abs(z),Math.abs(N))&&Math.abs(B-M)<=h.EPSILON*Math.max(1,Math.abs(B),Math.abs(M))&&Math.abs(v-
R)<=h.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(u-O)<=h.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(x-L)<=h.EPSILON*Math.max(1,Math.abs(x),Math.abs(L))&&Math.abs(C-S)<=h.EPSILON*Math.max(1,Math.abs(C),Math.abs(S))&&Math.abs(A-T)<=h.EPSILON*Math.max(1,Math.abs(A),Math.abs(T))&&Math.abs(a-b)<=h.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};d.mul=c;d.sub=g})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4f32=n})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(q,d){function n(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(d){var h=new Float32Array(16);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];h[4]=d[4];h[5]=d[5];h[6]=d[6];h[7]=d[7];h[8]=d[8];h[9]=d[9];h[10]=d[10];h[11]=d[11];h[12]=d[12];h[13]=d[13];h[14]=d[14];h[15]=d[15];return h};
d.fromValues=function(d,l,c,e,g,n,a,b,f,k,m,q,I,w,y,t){var h=new Float32Array(16);h[0]=d;h[1]=l;h[2]=c;h[3]=e;h[4]=g;h[5]=n;h[6]=a;h[7]=b;h[8]=f;h[9]=k;h[10]=m;h[11]=q;h[12]=I;h[13]=w;h[14]=y;h[15]=t;return h};d.createView=function(d,l){return new Float32Array(d,l,16)};d.IDENTITY=n()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec3f32=n})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(q,d){function n(){return new Float32Array(3)}function h(c,a,b){var d=new Float32Array(3);d[0]=c;d[1]=a;d[2]=b;return d}function l(){return h(1,1,1)}function c(){return h(1,0,0)}function e(){return h(0,1,0)}function g(){return h(0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(c){var a=new Float32Array(3);a[0]=c[0];a[1]=c[1];a[2]=c[2];return a};d.fromValues=h;d.createView=function(c,a){return new Float32Array(c,a,3)};d.zeros=function(){return n()};
d.ones=l;d.unitX=c;d.unitY=e;d.unitZ=g;d.ZEROS=n();d.ONES=l();d.UNIT_X=c();d.UNIT_Y=e();d.UNIT_Z=g()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec4f32=n})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(q,d){function n(){return new Float32Array(4)}function h(a,b,c,d){var e=new Float32Array(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e}
function l(){return h(1,1,1,1)}function c(){return h(1,0,0,0)}function e(){return h(0,1,0,0)}function g(){return h(0,0,1,0)}function p(){return h(0,0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.fromValues=h;d.createView=function(a,b){return new Float32Array(a,b,4)};d.zeros=function(){return n()};d.ones=l;d.unitX=c;d.unitY=e;d.unitZ=g;d.unitW=p;d.ZEROS=n();d.ONES=l();d.UNIT_X=c();
d.UNIT_Y=e();d.UNIT_Z=g();d.UNIT_W=p()})},"*now":function(q){q(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),function(q,
d,n,h,l,c,e,g,p,a,b,f,k,m,r,I,w,y,t,z,B,v,u){function x(){return c(this,void 0,void 0,function(){var a,b,c,d,e,f,g;return l(this,function(h){switch(h.label){case 0:return[4,Promise.all([new Promise(function(a,b){q(["./webgl"],a,b)}),new Promise(function(a,b){q(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){q(["./2d/engine"],a,b)})])];case 1:return a=h.sent(),b=a[1],c=b.GraphicsView2D,d=b.LabelManager,e=b.MapViewNavigation,f=b.MagnifierView2D,g=a[2].Stage,D=c,E=d,F=e,G=f,H=g,[2]}})})}function C(a){return!("layerViews"in
a)&&null!=a.container}var A=p.getLogger("esri.views.MapView"),H,D,E,F,G;return function(c){function d(a){a=c.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.graphicsView=null;a.highlightOptions=new z;a.magnifier=new w;a.inputManager=new t({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new u;a.rendering=!1;k.initialize();return a}n(d,c);d.prototype.destroy=function(){this.inputManager.destroy();this._set("inputManager",null)};Object.defineProperty(d.prototype,
"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"navigating",{get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)},enumerable:!0,configurable:!0});d.prototype.toMap=function(a){if(b.isSupportedScreenPointEvent(a)){var c=b.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[c])}return this.inherited(arguments)};d.prototype.hitTest=function(c){var d=
b.isSupportedScreenPointEvent(c)?b.createScreenPointFromSupportedEvent(this,c):c;if(!this.ready||isNaN(d.x)||isNaN(d.y))return a.resolve({screenPoint:d,results:[]});var e=this.toMap(d);c=[this.graphicsView];c.push.apply(c,this.allLayerViews.toArray().reverse());return a.all(c.map(function(a){return a&&a.hitTest?a.hitTest(d.x,d.y):null})).then(function(a){return{screenPoint:d,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:e,graphic:a}})}})};d.prototype.takeScreenshot=
function(b){return this.ready?this._stage.takeScreenshot(B.toRenderSettings(b,this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};d.prototype.on=function(a,b,c,d){var e=this.inputManager&&this.viewEvents.on(a,b,c,d);return e?e:this.inherited(arguments)};d.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.viewEvents.hasHandler(a)};d.prototype.whenLayerView=function(a){return this.inherited(arguments)};d.prototype.graphicChanged=function(a){this.graphicsView&&
this.graphicsView.graphicUpdateHandler(a)};d.prototype.whenReady=function(){var b=this;return a.create(function(a){b.ready?a(b):b._resolveWhenReady.push(a)})};d.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};d.prototype.validate=function(){var b=v.check({supportsMajorWebPerformanceCaveat:!0});g("safari")&&9>g("safari")&&(b=new e("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:g("safari")}));
return b?(A.warn("#validate()",b.message),a.reject(b)):x()};d.prototype._startup=function(){var a=this;this.timeline.begin("MapView Startup");this.inherited(arguments);this.graphics.owner=this;var b=new H(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),c=new D({view:this,
graphics:this.graphics}),d=new F({view:this,animationManager:this.animationManager}),e=new E({view:this});this._magnifierView=new G;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=c;this._set("graphicsView",c);this._set("mapViewNavigation",d);this._set("labelManager",e);this.handles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!("layerViews"in
a)&&!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=b.error}),f.init(this,"stationary",function(a){return b.stationary=a},!0),f.init(this,"state.viewpoint",function(){return b.state=a.state},!0),f.init(this,"background",function(a){return b.background=a},!0),f.init(this,"magnifier",function(b){return a._magnifierView.magnifier=b},!0),f.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),f.init(this,"highlightOptions",function(){return b.highlightOptions=
a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=[];c.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};d.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",
null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.inherited(arguments)};d.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(C).forEach(function(b,c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};h([m.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],d.prototype,
"background",null);h([m.property()],d.prototype,"graphicsView",void 0);h([m.property({type:z})],d.prototype,"highlightOptions",void 0);h([m.property({type:w})],d.prototype,"magnifier",void 0);h([m.property({readOnly:!0})],d.prototype,"inputManager",void 0);h([m.property({readOnly:!0})],d.prototype,"mapViewNavigation",void 0);h([m.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],d.prototype,"navigating",null);h([m.property({type:Boolean,constructOnly:!0})],d.prototype,"supersampleScreenhotsEnabled",
void 0);h([m.property({type:u})],d.prototype,"ui",void 0);h([m.property({readOnly:!0})],d.prototype,"rendering",void 0);h([m.property({constructOnly:!0})],d.prototype,"renderCanvas",void 0);h([m.property({constructOnly:!0})],d.prototype,"deactivatedWebGLExtensions",void 0);h([m.property({constructOnly:!0})],d.prototype,"debugWebGLExtensions",void 0);return d=h([m.subclass("esri.views.MapView")],d)}(m.declared(r.BreakpointsOwner(I.DOMContainer(y))))});