// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/has ../../core/promiseUtils ../../core/scheduling ../../core/accessorSupport/decorators ./interactiveToolUtils ./ManipulatorCollection".split(" "),function(d,e,f,c,g,h,k,l,m,b,n,p){Object.defineProperty(e,"__esModule",{value:!0});d=function(d){function a(a){a=d.call(this,a)||this;a.attached=!1;a.created=!1;a.completed=!1;a.manipulators=new p.ManipulatorCollection;
a.deferCreation=!1;a._editableFlags=[];a._manipulatorHandles=new h;a._creationResolver=l.createResolver();return a}f(a,d);Object.defineProperty(a.prototype,"active",{get:function(){return null!=this.view&&this.view.activeTool===this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isSupported",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"visible",{set:function(a){this._set("visible",a);a||n.setActive(this,!1);this.attached&&(a?this._show():
this._hide())},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"editable",{get:function(){return this.hasEditableFlag(0)},set:function(a){this.setEditableFlag(0,a)},enumerable:!0,configurable:!0});a.prototype.attach=function(){if(!this.attached&&this.isSupported){this.manipulators.attach();this.onAttach();if(this.visible)this.onShow();this._set("attached",!0)}};a.prototype.detach=function(){this.attached&&(this.onHide(),this.onDetach(),this.manipulators.detach(),this._manipulatorHandles.removeAll(),
this._set("attached",!1))};a.prototype.handleInputEvent=function(a){if(this.attached)this.onInputEvent(a)};a.prototype.destroy=function(){this.manipulators.destroy();this._manipulatorHandles&&(this._manipulatorHandles.destroy(),this._manipulatorHandles=null);this._set("view",null)};a.prototype.setEditableFlag=function(a,b){this._editableFlags[a]=b;this.manipulators.isToolEditable=this._editableFlags.every(function(a){return null==a||a});this._updateManipulatorAttachment();0===a&&this.notifyChange("editable");
this.onEditableChange()};a.prototype.hasEditableFlag=function(a){a=this._editableFlags[a];return null==a?!0:a};a.prototype.when=function(){return this._creationResolver.promise};a.prototype.rejectCreation=function(a){this._creationResolver.reject(a)};a.prototype.initialize=function(){this.deferCreation||this.complete()};a.prototype.onAttach=function(){};a.prototype.onDetach=function(){};a.prototype.onShow=function(){};a.prototype.onHide=function(){};a.prototype.onEditableChange=function(){};a.prototype.onInputEvent=
function(a){};Object.defineProperty(a.prototype,"internallyEditable",{get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)},enumerable:!0,configurable:!0});a.prototype.create=function(){var a=this;this.created||(this._set("created",!0),k("esri-native-promise")?this._creationResolver(this):m.schedule(function(){return a._creationResolver(a)}))};a.prototype.complete=function(){this.create();this._set("completed",!0)};a.prototype._show=function(){this._updateManipulatorAttachment();
this.onShow()};a.prototype._hide=function(){this._updateManipulatorAttachment();this.onHide()};a.prototype._updateManipulatorAttachment=function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()};c([b.property({constructOnly:!0})],a.prototype,"view",void 0);c([b.property({dependsOn:["view.activeTool"],readOnly:!0})],a.prototype,"active",null);c([b.property({value:!0})],a.prototype,"visible",null);c([b.property({value:!0})],a.prototype,"editable",null);c([b.property({readOnly:!0})],
a.prototype,"attached",void 0);c([b.property({readOnly:!0})],a.prototype,"created",void 0);c([b.property({readOnly:!0})],a.prototype,"completed",void 0);c([b.property({readOnly:!0})],a.prototype,"manipulators",void 0);c([b.property({constructOnly:!0})],a.prototype,"deferCreation",void 0);return a=c([b.subclass("esri.views.interactive.InteractiveToolBase")],a)}(b.declared(g));e.InteractiveToolBase=d});