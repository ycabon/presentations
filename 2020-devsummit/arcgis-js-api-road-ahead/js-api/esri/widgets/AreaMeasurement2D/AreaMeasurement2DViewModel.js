// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/compilerUtils ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/unitFormatUtils ../../core/unitUtils ../../core/unitUtils ../../core/accessorSupport/decorators ./AreaMeasurement2DTool ../support/commonProperties ../support/InteractiveToolViewModel".split(" "),function(w,x,m,d,n,p,q,r,e,k,f,c,g,t,u){var v={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:2,pathColor:[255,
128,0,1],fillColor:[255,128,0,.3]},h=q.getLogger("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel");return function(l){function a(b){b=l.call(this,b)||this;b.supportedViewType="2d";b.geodesicDistanceThreshold=1E5;b.measurement=null;b.palette=v;b.tool=null;return b}m(a,l);Object.defineProperty(a.prototype,"measurementLabel",{get:function(){if(!this.measurement)return null;var b={area:null,perimeter:null},a=this.measurement,c=a.area,a=a.perimeter;switch(this.unit){case "metric":b.area=e.formatMetricArea(c,
"square-meters");break;case "imperial":b.area=e.formatImperialArea(c,"square-meters");break;default:c=k.convertUnit(c,"square-meters",this.unit),b.area=e.formatDecimal(c,this.unit)}c=this._deriveLengthUnitFromAreaUnit(this.unit);switch(c){case "metric":b.perimeter=e.formatMetricLength(a,"meters");break;case "imperial":b.perimeter=e.formatImperialLength(a,"meters");break;default:a=k.convertUnit(a,"meters",c),b.perimeter=e.formatDecimal(a,c)}return b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"state",{get:function(){return this.isDisabled||g.isProjectionEngineRequired(this.view)&&!g.isProjectionEngineSupported()?"disabled":this.tool?this.measurement?this.tool.active?"measuring":"measured":"ready":"ready"},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"unit",{get:function(){return this._validateUnit(this.defaultUnit)},set:function(b){void 0===b?this._clearOverride("unit"):this._override("unit",this._validateUnit(b))},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"unitOptions",{get:function(){return f.measurementAreaUnits},set:function(b){void 0===b?this._clearOverride("unitOptions"):this._override("unitOptions",this._validateUnits(b))},enumerable:!0,configurable:!0});a.prototype.newMeasurement=function(){r.ignoreAbortErrors(this.createTool())};a.prototype.clearMeasurement=function(){this.removeTool()};a.prototype.createToolParams=function(){return{toolConstructor:g,constructorArguments:{viewModel:this}}};a.prototype.logUnsupportedError=function(){h.error("AreaMeasurement2D widget is not implemented for SceneView")};
a.prototype.logError=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];h.error.apply(h,b)};a.prototype._deriveLengthUnitFromAreaUnit=function(a){switch(a){case "metric":return"metric";case "imperial":return"imperial";case "square-inches":return"inches";case "square-feet":return"feet";case "square-yards":return"yards";case "square-miles":return"miles";case "square-us-feet":return"us-feet";case "square-meters":return"meters";case "square-kilometers":return"kilometers";case "acres":return"imperial";
case "ares":case "hectares":return"metric";case "square-millimeters":return"millimeters";case "square-centimeters":return"centimeters";case "square-decimeters":return"decimeters";default:n.neverReachedSilent(a)}throw new p("area-measurement-2d-viewmodel:unhandled-area-unit","Unexpected area unit encountered.");};a.prototype._validateUnit=function(a){return-1!==this.unitOptions.indexOf(a)?a:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]};a.prototype._validateUnits=
function(a){void 0===a&&(a=[]);a=a.filter(function(a){return-1!==f.measurementAreaUnits.indexOf(a)});return 0===a.length?f.measurementAreaUnits.slice():a};d([c.property(t.defaultUnitPropertyMetadata)],a.prototype,"defaultUnit",void 0);d([c.property({type:Number})],a.prototype,"geodesicDistanceThreshold",void 0);d([c.property()],a.prototype,"measurement",void 0);d([c.property({dependsOn:["measurement","unit","geodesicDistanceThreshold"],readOnly:!0})],a.prototype,"measurementLabel",null);d([c.property()],
a.prototype,"palette",void 0);d([c.property({dependsOn:["isDisabled","measurement","tool.active","view.spatialReference"],readOnly:!0})],a.prototype,"state",null);d([c.property({constructOnly:!0,readOnly:!0})],a.prototype,"tool",void 0);d([c.property({type:String,dependsOn:["unitOptions","defaultUnit"]})],a.prototype,"unit",null);d([c.property({type:[String]})],a.prototype,"unitOptions",null);return a=d([c.subclass("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel")],a)}(c.declared(u.InteractiveToolViewModel))});