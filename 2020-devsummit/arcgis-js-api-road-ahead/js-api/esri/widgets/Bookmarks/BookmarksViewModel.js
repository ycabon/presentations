// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/Collection ../../core/Error ../../core/Evented ../../core/Logger ../../core/promiseUtils ../../core/accessorSupport/decorators ../../webmap/Bookmark ../support/GoTo".split(" "),function(x,y,n,e,k,p,f,q,r,g,d,l,t){var h=r.getLogger("esri.widgets.Bookmarks.BookmarksViewModel"),u=p.ofType(l),v={width:128,height:128},w={takeScreenshot:!0,captureExtent:!0};
return function(m){function b(a){a=m.call(this,a)||this;a.activeBookmark=null;return a}n(b,m);b.prototype.destroy=function(){this.view=null;this._set("activeBookmark",null)};Object.defineProperty(b.prototype,"bookmarks",{get:function(){return this.get("view.map.bookmarks")},set:function(a){void 0===a?this._clearOverride("bookmarks"):this._override("bookmarks",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){var a=this.get("view");return a&&!a.ready?"loading":
"ready"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{get:function(){return this._get("view")},set:function(a){a&&"2d"!==a.type&&h.error(new f("view:invalid-view","SceneView is not supported",{view:a}));this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.createBookmark=function(a){var b=this.view,c=k({},w,a);a=c.takeScreenshot;var d=c.screenshotSettings,c=c.captureExtent;if(a&&!b)return b=new f("create-bookmark:invalid-view","Cannot create a bookmark without a view.",
{view:b}),h.error(b),g.reject(b);a=a?b.takeScreenshot(k({},v,d)).then(function(a){return a.dataUrl}):g.resolve();var e=c?b.extent.clone():void 0;return a.then(function(a){return new l({extent:e,thumbnail:a})})};b.prototype.goTo=function(a){var b=this,c=this.view;if(!c||!a||!a.extent)return a=new f("go-to:invalid-bookmark-or-view","Cannot go to a bookmark without a view and a bookmark containing an extent.",{bookmark:a,view:c}),h.error(a),g.reject(a);this._set("activeBookmark",a);c=this.callGoTo({target:{target:a.extent}});
this.emit("select-bookmark",{bookmark:a});c.catch(function(){}).then(function(){return b._set("activeBookmark",null)});return c};e([d.property({readOnly:!0})],b.prototype,"activeBookmark",void 0);e([d.property({type:u,dependsOn:["view.map.bookmarks"]})],b.prototype,"bookmarks",null);e([d.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);e([d.property({value:null})],b.prototype,"view",null);return b=e([d.subclass("esri.widgets.Bookmarks.BookmarksViewModel")],b)}(d.declared(t.GoToMixin(q.EventedAccessor)))});