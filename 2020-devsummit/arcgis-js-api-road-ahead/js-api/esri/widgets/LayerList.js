// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
require({cache:{"esri/libs/sortablejs/Sortable":function(){(function(J,D){"object"===typeof exports&&"undefined"!==typeof module?module.exports=D():"function"===typeof define&&define.amd?define(D):(J=J||self,J.Sortable=D())})(this,function(){function J(a){J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return J(a)}function D(){D=Object.assign||
function(a){for(var d=1;d<arguments.length;d++){var e=arguments[d],k;for(k in e)Object.prototype.hasOwnProperty.call(e,k)&&(a[k]=e[k])}return a};return D.apply(this,arguments)}function I(a){for(var d=1;d<arguments.length;d++){var e=null!=arguments[d]?arguments[d]:{},k=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(k=k.concat(Object.getOwnPropertySymbols(e).filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})));k.forEach(function(d){var k=e[d];d in a?Object.defineProperty(a,
d,{value:k,enumerable:!0,configurable:!0,writable:!0}):a[d]=k})}return a}function b(a,d){if(null==a)return{};var e;if(null==a)e={};else{e={};var k=Object.keys(a),z,c;for(c=0;c<k.length;c++)z=k[c],0<=d.indexOf(z)||(e[z]=a[z])}if(Object.getOwnPropertySymbols)for(c=Object.getOwnPropertySymbols(a),z=0;z<c.length;z++)k=c[z],0<=d.indexOf(k)||Object.prototype.propertyIsEnumerable.call(a,k)&&(e[k]=a[k]);return e}function K(a){var d;if(Array.isArray(a)){d=0;for(var e=Array(a.length);d<a.length;d++)e[d]=a[d];
d=e}else d=void 0;d||(d=Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)?Array.from(a):void 0);if(!(a=d))throw new TypeError("Invalid attempt to spread non-iterable instance");return a}function t(a){return!!navigator.userAgent.match(a)}function g(a,d,e){a.addEventListener(d,e,!L&&ob)}function l(a,d,e){a.removeEventListener(d,e,!L&&ob)}function F(a,d){if(d){"\x3e"===d[0]&&(d=d.substring(1));if(a)try{if(a.matches)return a.matches(d);if(a.msMatchesSelector)return a.msMatchesSelector(d);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(d)}catch(e){}return!1}}function R(a,d,e,k){if(a){e=e||document;do{if(null!=d&&("\x3e"===d[0]?a.parentNode===e&&F(a,d):F(a,d))||k&&a===e)return a;if(a===e)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function w(a,d,e){if(a&&d)if(a.classList)a.classList[e?"add":"remove"](d);else{var k=(" "+a.className+" ").replace(pb," ").replace(" "+d+" "," ");a.className=(k+(e?" "+d:"")).replace(pb," ")}}function p(a,
d,e){var k=a&&a.style;if(k){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(e=a.currentStyle),void 0===d?e:e[d];d in k||-1!==d.indexOf("webkit")||(d="-webkit-"+d);k[d]=e+("string"===typeof e?"":"px")}}function T(a,d){var e="";if("string"===typeof a)e=a;else{do{var k=p(a,"transform");k&&"none"!==k&&(e=k+" "+e)}while(!d&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix)&&
new a(e)}function f(a,d,e){if(a){a=a.getElementsByTagName(d);d=0;var k=a.length;if(e)for(;d<k;d++)e(a[d],d);return a}return[]}function A(){return L?document.documentElement:document.scrollingElement}function E(a,d,e,k,z){if(a.getBoundingClientRect||a===window){var c,m,h,q,b,f,n;a!==window&&a!==A()?(c=a.getBoundingClientRect(),m=c.top,h=c.left,q=c.bottom,b=c.right,f=c.height,n=c.width):(h=m=0,q=window.innerHeight,b=window.innerWidth,f=window.innerHeight,n=window.innerWidth);if((d||e)&&a!==window&&
(z=z||a.parentNode,!L)){do if(z&&z.getBoundingClientRect&&("none"!==p(z,"transform")||e&&"static"!==p(z,"position"))){q=z.getBoundingClientRect();m-=q.top+parseInt(p(z,"border-top-width"));h-=q.left+parseInt(p(z,"border-left-width"));q=m+c.height;b=h+c.width;break}while(z=z.parentNode)}k&&a!==window&&(k=(a=T(z||a))&&a.a,z=a&&a.d,a&&(m/=z,h/=k,n/=k,f/=z,q=m+f,b=h+n));return{top:m,left:h,bottom:q,right:b,width:n,height:f}}}function fa(a,d,e){var k=r(a,!0);for(a=E(a)[d];k;){d=E(k)[e];var c=void 0,c=
"top"===e||"left"===e?a>=d:a<=d;if(!c)return k;if(k===A())break;k=r(k,!1)}return!1}function ka(a,d,e){for(var k=0,c=0,m=a.children;c<m.length;){if("none"!==m[c].style.display&&m[c]!==x.ghost&&m[c]!==x.dragged&&R(m[c],e.draggable,a,!1)){if(k===d)return m[c];k++}c++}return null}function v(a,d){for(a=a.lastElementChild;a&&(a===x.ghost||"none"===p(a,"display")||d&&!F(a,d));)a=a.previousElementSibling;return a||null}function H(a,d){var e=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===
a.nodeName.toUpperCase()||a===x.clone||d&&!F(a,d)||e++;return e}function na(a){var d=0,e=0,k=A();if(a){do var c=T(a),m=c.d,d=d+a.scrollLeft*c.a,e=e+a.scrollTop*m;while(a!==k&&(a=a.parentNode))}return[d,e]}function Da(a,d){for(var e in a)if(a.hasOwnProperty(e))for(var k in d)if(d.hasOwnProperty(k)&&d[k]===a[e][k])return Number(e);return-1}function r(a,d){if(!a||!a.getBoundingClientRect)return A();var e=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var k=p(a);if(a.clientWidth<
a.scrollWidth&&("auto"==k.overflowX||"scroll"==k.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==k.overflowY||"scroll"==k.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(e||d)return a;e=!0}}while(a=a.parentNode);return A()}function G(a,d){return Math.round(a.top)===Math.round(d.top)&&Math.round(a.left)===Math.round(d.left)&&Math.round(a.height)===Math.round(d.height)&&Math.round(a.width)===Math.round(d.width)}function C(a,d){return function(){if(!Ea){var e=arguments;1===e.length?
a.call(this,e[0]):a.apply(this,e);Ea=setTimeout(function(){Ea=void 0},d)}}}function c(a,d,e){a.scrollLeft+=d;a.scrollTop+=e}function h(a){var d=window.Polymer,e=window.jQuery||window.Zepto;return d&&d.dom?d.dom(a).cloneNode(!0):e?e(a).clone(!0)[0]:a.cloneNode(!0)}function M(a,d){p(a,"position","absolute");p(a,"top",d.top);p(a,"left",d.left);p(a,"width",d.width);p(a,"height",d.height)}function ba(a){p(a,"position","");p(a,"top","");p(a,"left","");p(a,"width","");p(a,"height","")}function ga(){var a=
[],d;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(d){if("none"!==p(d,"display")&&d!==x.ghost){a.push({target:d,rect:E(d)});var e=I({},a[a.length-1].rect);if(d.thisAnimationDuration){var c=T(d,!0);c&&(e.top-=c.f,e.left-=c.e)}d.fromRect=e}})},addAnimationState:function(d){a.push(d)},removeAnimationState:function(d){a.splice(Da(a,{target:d}),1)},animateAll:function(e){var k=this;if(this.options.animation){var c=!1,m=0;a.forEach(function(a){var d=
0,e=a.target,z=e.fromRect,h=E(e),q=e.prevFromRect,Ca=e.prevToRect;a=a.rect;var b=T(e,!0);b&&(h.top-=b.f,h.left-=b.e);e.toRect=h;e.thisAnimationDuration&&G(q,h)&&!G(z,h)&&(a.top-h.top)/(a.left-h.left)===(z.top-h.top)/(z.left-h.left)&&(d=Math.sqrt(Math.pow(q.top-a.top,2)+Math.pow(q.left-a.left,2))/Math.sqrt(Math.pow(q.top-Ca.top,2)+Math.pow(q.left-Ca.left,2))*k.options.animation);G(h,z)||(e.prevFromRect=z,e.prevToRect=h,d||(d=k.options.animation),k.animate(e,a,h,d));d&&(c=!0,m=Math.max(m,d),clearTimeout(e.animationResetTimer),
e.animationResetTimer=setTimeout(function(){e.animationTime=0;e.prevFromRect=null;e.fromRect=null;e.prevToRect=null;e.thisAnimationDuration=null},d),e.thisAnimationDuration=d)});clearTimeout(d);c?d=setTimeout(function(){"function"===typeof e&&e()},m):"function"===typeof e&&e();a=[]}else clearTimeout(d),"function"===typeof e&&e()},animate:function(a,d,c,m){if(m){p(a,"transition","");p(a,"transform","");var e=T(this.el),k=(d.left-c.left)/(e&&e.a||1);d=(d.top-c.top)/(e&&e.d||1);a.animatingX=!!k;a.animatingY=
!!d;p(a,"transform","translate3d("+k+"px,"+d+"px,0)");p(a,"transition","transform "+m+"ms"+(this.options.easing?" "+this.options.easing:""));p(a,"transform","translate3d(0,0,0)");"number"===typeof a.animated&&clearTimeout(a.animated);a.animated=setTimeout(function(){p(a,"transition","");p(a,"transform","");a.animated=!1;a.animatingX=!1;a.animatingY=!1},m)}}}}function qa(a){var d=a.sortable,e=a.rootEl,k=a.name,c=a.targetEl,m=a.cloneEl,h=a.toEl,q=a.fromEl,b=a.oldIndex,f=a.newIndex,A=a.oldDraggableIndex,
n=a.newDraggableIndex,p=a.originalEvent,C=a.putSortable,M=a.extraEventProperties;if(d=d||e&&e[X]){var G=d.options,u="on"+k.charAt(0).toUpperCase()+k.substr(1);!window.CustomEvent||L||Z?(a=document.createEvent("Event"),a.initEvent(k,!0,!0)):a=new CustomEvent(k,{bubbles:!0,cancelable:!0});a.to=h||e;a.from=q||e;a.item=c||e;a.clone=m;a.oldIndex=b;a.newIndex=f;a.oldDraggableIndex=A;a.newDraggableIndex=n;a.originalEvent=p;a.pullMode=C?C.lastPutMode:void 0;var k=I({},M,Fa.getEventProperties(k,d)),E;for(E in k)a[E]=
k[E];e&&e.dispatchEvent(a);G[u]&&G[u].call(d,a)}}function N(a){qa(I({putSortable:W,cloneEl:S,targetEl:u,rootEl:Q,oldIndex:wa,oldDraggableIndex:Ga,newIndex:ca,newDraggableIndex:oa},a))}function x(a,d){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=d=D({},d);a[X]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,
invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return qb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,d){a.setData("Text",d.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",
fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==x.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};Fa.initializePlugins(this,a,e);for(var k in e)k in d||(d[k]=e[k]);rb(d);for(var c in this)"_"===c.charAt(0)&&"function"===typeof this[c]&&(this[c]=this[c].bind(this));if(this.nativeDraggable=d.forceFallback?!1:Ab)this.options.touchStartThreshold=1;d.supportPointer?g(a,"pointerdown",this._onTapStart):(g(a,"mousedown",this._onTapStart),g(a,"touchstart",
this._onTapStart));this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this));Sa.push(this.el);d.store&&d.store.get&&this.sort(d.store.get(this)||[]);D(this,ga())}function Ha(a,d,e,k,c,m,h,q){var z,b=a[X],f=b.options.onMove,Ca;!window.CustomEvent||L||Z?(z=document.createEvent("Event"),z.initEvent("move",!0,!0)):z=new CustomEvent("move",{bubbles:!0,cancelable:!0});z.to=d;z.from=a;z.dragged=e;z.draggedRect=k;z.related=c||d;z.relatedRect=m||E(d);z.willInsertAfter=q;z.originalEvent=h;a.dispatchEvent(z);
f&&(Ca=f.call(b,z,h));return Ca}function xa(a){a.draggable=!1}function Ia(){bb=!1}function ha(a,d,e){e=E(v(e.el,e.options.draggable));return d?a.clientX>e.right+10||a.clientX<=e.right&&a.clientY>e.bottom&&a.clientX>=e.left:a.clientX>e.right&&a.clientY>e.top||a.clientX<=e.right&&a.clientY>e.bottom+10}function ra(a,d,e,k,c,m,h,q){a=k?a.clientY:a.clientX;var z=k?e.height:e.width,b=k?e.top:e.left;e=k?e.bottom:e.right;k=!1;if(!h)if(q&&Ta<z*c)if(!Ja&&(1===Ka?a>b+z*m/2:a<e-z*m/2)&&(Ja=!0),Ja)k=!0;else{if(1===
Ka?a<b+Ta:a>e-Ta)return-Ka}else if(a>b+z*(1-c)/2&&a<e-z*(1-c)/2)return d=H(u)<H(d)?1:-1,d;if(k||h)if(a<b+z*m/2||a>e-z*m/2)return a>b+z/2?1:-1;return 0}function ya(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var d=a.length,e=0;d--;)e+=a.charCodeAt(d);return e.toString(36)}function cb(a){Ua.length=0;a=a.getElementsByTagName("input");for(var d=a.length;d--;){var e=a[d];e.checked&&Ua.push(e)}}function ia(a){return setTimeout(a,0)}function Va(){U.forEach(function(a){clearInterval(a.pid)});
U=[]}function n(){}function db(){}function m(a,d){y.forEach(function(e,k){(k=d.children[e.sortableIndex+(a?Number(k):0)])?d.insertBefore(e,k):d.appendChild(e)})}function q(a,d){da.forEach(function(e,k){(k=d.children[e.sortableIndex+(a?Number(k):0)])?d.insertBefore(e,k):d.appendChild(e)})}function O(){y.forEach(function(a){a!==P&&a.parentNode&&a.parentNode.removeChild(a)})}var L=t(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Z=t(/Edge/i),sb=t(/firefox/i),eb=t(/safari/i)&&!t(/chrome/i)&&
!t(/android/i),La=t(/iP(ad|od|hone)/i),Bb=t(/chrome/i)&&t(/android/i),ob={capture:!1,passive:!1},pb=/\s+/g,Ea,X="Sortable"+(new Date).getTime(),Ma=[],fb={initializeByDefault:!0},Fa={mount:function(a){for(var d in fb)!fb.hasOwnProperty(d)||d in a||(a[d]=fb[d]);Ma.push(a)},pluginEvent:function(a,d,e){var k=this;this.eventCanceled=!1;e.cancel=function(){k.eventCanceled=!0};var c=a+"Global";Ma.forEach(function(k){if(d[k.pluginName]){if(d[k.pluginName][c])d[k.pluginName][c](I({sortable:d},e));if(d.options[k.pluginName]&&
d[k.pluginName][a])d[k.pluginName][a](I({sortable:d},e))}})},initializePlugins:function(a,d,e,k){Ma.forEach(function(k){var c=k.pluginName;if(a.options[c]||k.initializeByDefault)k=new k(a,d,a.options),k.sortable=a,k.options=a.options,a[c]=k,D(e,k.defaults)});for(var c in a.options)a.options.hasOwnProperty(c)&&(k=this.modifyOption(a,c,a.options[c]),"undefined"!==typeof k&&(a.options[c]=k))},getEventProperties:function(a,d){var e={};Ma.forEach(function(k){"function"===typeof k.eventProperties&&D(e,
k.eventProperties.call(d[k.pluginName],a))});return e},modifyOption:function(a,d,e){var k;Ma.forEach(function(c){a[c.pluginName]&&c.optionListeners&&"function"===typeof c.optionListeners[d]&&(k=c.optionListeners[d].call(a[c.pluginName],e))});return k}},aa=function(a,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},k=e.evt,e=b(e,["evt"]);Fa.pluginEvent.bind(x)(a,d,I({dragEl:u,parentEl:V,ghostEl:B,rootEl:Q,nextEl:sa,lastDownEl:Wa,cloneEl:S,cloneHidden:pa,dragStarted:Na,putSortable:W,
activeSortable:x.active,originalEvent:k,oldIndex:wa,oldDraggableIndex:Ga,newIndex:ca,newDraggableIndex:oa,hideGhostForTarget:tb,unhideGhostForTarget:ub,cloneNowHidden:function(){pa=!0},cloneNowShown:function(){pa=!1},dispatchSortableEvent:function(a){N({sortable:d,name:a,originalEvent:k})}},e))};if("undefined"===typeof window||!window.document)throw Error("Sortable.js requires a window with a document");var u,V,B,Q,sa,Wa,S,pa,wa,ca,Ga,oa,Xa,W,za=!1,Ya=!1,Sa=[],ta,la,gb,hb,vb,wb,Na,Aa,Ka,Ja=!1,Za=
!1,Ta,Y,ib=[],bb=!1,Ua=[],xb=Z||L?"cssFloat":"float",Ab=!Bb&&!La&&"draggable"in document.createElement("div"),yb=function(){if(L)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}(),qb=function(a,d){var e=p(a),k=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),c=ka(a,0,d);a=ka(a,1,d);var m=c&&p(c);d=a&&p(a);var h=m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+
E(c).width,q=d&&parseInt(d.marginLeft)+parseInt(d.marginRight)+E(a).width;return"flex"===e.display?"column"===e.flexDirection||"column-reverse"===e.flexDirection?"vertical":"horizontal":"grid"===e.display?1>=e.gridTemplateColumns.split(" ").length?"vertical":"horizontal":c&&m["float"]&&"none"!==m["float"]?(e="left"===m["float"]?"left":"right",!a||"both"!==d.clear&&d.clear!==e?"horizontal":"vertical"):c&&("block"===m.display||"flex"===m.display||"table"===m.display||"grid"===m.display||h>=k&&"none"===
e[xb]||a&&"none"===e[xb]&&h+q>k)?"vertical":"horizontal"},Cb=function(a,d,e){var k=e?a.left:a.top,c=e?a.right:a.bottom;a=e?a.width:a.height;var m=e?d.left:d.top,h=e?d.right:d.bottom;d=e?d.width:d.height;return k===m||c===h||k+a/2===m+d/2},Db=function(a,d){var e;Sa.some(function(k){if(!v(k)){var c=E(k),m=k[X].options.emptyInsertThreshold,h=a>=c.left-m&&a<=c.right+m,c=d>=c.top-m&&d<=c.bottom+m;if(m&&h&&c)return e=k}});return e},rb=function(a){function d(a,e){return function(k,c,m,h){var z=k.options.group.name&&
c.options.group.name&&k.options.group.name===c.options.group.name;if(null==a&&(e||z))return!0;if(null==a||!1===a)return!1;if(e&&"clone"===a)return a;if("function"===typeof a)return d(a(k,c,m,h),e)(k,c,m,h);k=(e?k:c).options.group.name;return!0===a||"string"===typeof a&&a===k||a.join&&-1<a.indexOf(k)}}var e={},k=a.group;k&&"object"==J(k)||(k={name:k});e.name=k.name;e.checkPull=d(k.pull,!0);e.checkPut=d(k.put);e.revertClone=k.revertClone;a.group=e},tb=function(){!yb&&B&&p(B,"display","none")},ub=function(){!yb&&
B&&p(B,"display","")};document.addEventListener("click",function(a){if(Ya)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Ya=!1},!0);var ua=function(a){if(u){a=a.touches?a.touches[0]:a;var d=Db(a.clientX,a.clientY);if(d){var e={},k;for(k in a)a.hasOwnProperty(k)&&(e[k]=a[k]);e.target=e.rootEl=d;e.preventDefault=void 0;e.stopPropagation=void 0;d[X]._onDragOver(e)}}},Eb=function(a){u&&u.parentNode[X]._isOutsideThisEl(a.target)};
x.prototype={constructor:x,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Aa=null)},_getDirection:function(a,d){return"function"===typeof this.options.direction?this.options.direction.call(this,a,d,u):this.options.direction},_onTapStart:function(a){if(a.cancelable){var d=this,e=this.el,k=this.options,c=k.preventOnFilter,m=a.type,h=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,q=(h||a).target,b=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||
q,f=k.filter;cb(e);if(!(u||/mousedown|pointerdown/.test(m)&&0!==a.button||k.disabled||b.isContentEditable||(q=R(q,k.draggable,e,!1),q&&q.animated||Wa===q))){wa=H(q);Ga=H(q,k.draggable);if("function"===typeof f){if(f.call(this,a,q,this)){N({sortable:d,rootEl:b,name:"filter",targetEl:q,toEl:e,fromEl:e});aa("filter",d,{evt:a});c&&a.cancelable&&a.preventDefault();return}}else if(f&&(f=f.split(",").some(function(k){if(k=R(b,k.trim(),e,!1))return N({sortable:d,rootEl:k,name:"filter",targetEl:q,fromEl:e,
toEl:e}),aa("filter",d,{evt:a}),!0}))){c&&a.cancelable&&a.preventDefault();return}k.handle&&!R(b,k.handle,e,!1)||this._prepareDragStart(a,h,q)}}},_prepareDragStart:function(a,d,e){var k=this,c=k.el,m=k.options,h=c.ownerDocument;if(e&&!u&&e.parentNode===c){var q=E(e);Q=c;u=e;V=u.parentNode;sa=u.nextSibling;Wa=e;Xa=m.group;x.dragged=u;ta={target:u,clientX:(d||a).clientX,clientY:(d||a).clientY};vb=ta.clientX-q.left;wb=ta.clientY-q.top;this._lastX=(d||a).clientX;this._lastY=(d||a).clientY;u.style["will-change"]=
"all";e=function(){aa("delayEnded",k,{evt:a});x.eventCanceled?k._onDrop():(k._disableDelayedDragEvents(),!sb&&k.nativeDraggable&&(u.draggable=!0),k._triggerDragStart(a,d),N({sortable:k,name:"choose",originalEvent:a}),w(u,m.chosenClass,!0))};m.ignore.split(",").forEach(function(a){f(u,a.trim(),xa)});g(h,"dragover",ua);g(h,"mousemove",ua);g(h,"touchmove",ua);g(h,"mouseup",k._onDrop);g(h,"touchend",k._onDrop);g(h,"touchcancel",k._onDrop);sb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,
u.draggable=!0);aa("delayStart",this,{evt:a});!m.delay||m.delayOnTouchOnly&&!d||this.nativeDraggable&&(Z||L)?e():x.eventCanceled?this._onDrop():(g(h,"mouseup",k._disableDelayedDrag),g(h,"touchend",k._disableDelayedDrag),g(h,"touchcancel",k._disableDelayedDrag),g(h,"mousemove",k._delayedDragTouchMoveHandler),g(h,"touchmove",k._delayedDragTouchMoveHandler),m.supportPointer&&g(h,"pointermove",k._delayedDragTouchMoveHandler),k._dragStartTimer=setTimeout(e,m.delay))}},_delayedDragTouchMoveHandler:function(a){a=
a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){u&&xa(u);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;l(a,"mouseup",this._disableDelayedDrag);l(a,"touchend",this._disableDelayedDrag);l(a,"touchcancel",this._disableDelayedDrag);
l(a,"mousemove",this._delayedDragTouchMoveHandler);l(a,"touchmove",this._delayedDragTouchMoveHandler);l(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,d){d=d||"touch"==a.pointerType&&a;!this.nativeDraggable||d?this.options.supportPointer?g(document,"pointermove",this._onTouchMove):d?g(document,"touchmove",this._onTouchMove):g(document,"mousemove",this._onTouchMove):(g(u,"dragend",this),g(Q,"dragstart",this._onDragStart));try{document.selection?ia(function(){document.selection.empty()}):
window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(a,d){za=!1;if(Q&&u){aa("dragStarted",this,{evt:d});this.nativeDraggable&&g(document,"dragover",Eb);var e=this.options;!a&&w(u,e.dragClass,!1);w(u,e.ghostClass,!0);x.active=this;a&&this._appendGhost();N({sortable:this,name:"start",originalEvent:d})}else this._nulling()},_emulateDragOver:function(){if(la){this._lastX=la.clientX;this._lastY=la.clientY;tb();for(var a=document.elementFromPoint(la.clientX,la.clientY),d=a;a&&a.shadowRoot;){a=
a.shadowRoot.elementFromPoint(la.clientX,la.clientY);if(a===d)break;d=a}u.parentNode[X]._isOutsideThisEl(a);if(d){do{if(d[X]){var e=void 0;if((e=d[X]._onDragOver({clientX:la.clientX,clientY:la.clientY,target:a,rootEl:d}))&&!this.options.dragoverBubble)break}a=d}while(d=d.parentNode)}ub()}},_onTouchMove:function(a){if(ta){var d=this.options,e=d.fallbackTolerance,k=d.fallbackOffset,d=a.touches?a.touches[0]:a,c=B&&T(B),m=B&&c&&c.a,h=B&&c&&c.d,q=La&&Y&&na(Y),m=(d.clientX-ta.clientX+k.x)/(m||1)+(q?q[0]-
ib[0]:0)/(m||1),k=(d.clientY-ta.clientY+k.y)/(h||1)+(q?q[1]-ib[1]:0)/(h||1);if(!x.active&&!za){if(e&&Math.max(Math.abs(d.clientX-this._lastX),Math.abs(d.clientY-this._lastY))<e)return;this._onDragStart(a,!0)}B&&(c?(c.e+=m-(gb||0),c.f+=k-(hb||0)):c={a:1,b:0,c:0,d:1,e:m,f:k},e="matrix(".concat(c.a,",").concat(c.b,",").concat(c.c,",").concat(c.d,",").concat(c.e,",").concat(c.f,")"),p(B,"webkitTransform",e),p(B,"mozTransform",e),p(B,"msTransform",e),p(B,"transform",e),gb=m,hb=k,la=d);a.cancelable&&a.preventDefault()}},
_appendGhost:function(){if(!B){var a=this.options.fallbackOnBody?document.body:Q,d=E(u,!0,La,!0,a),e=this.options;if(La){for(Y=a;"static"===p(Y,"position")&&"none"===p(Y,"transform")&&Y!==document;)Y=Y.parentNode;Y!==document.body&&Y!==document.documentElement?(Y===document&&(Y=A()),d.top+=Y.scrollTop,d.left+=Y.scrollLeft):Y=A();ib=na(Y)}B=u.cloneNode(!0);w(B,e.ghostClass,!1);w(B,e.fallbackClass,!0);w(B,e.dragClass,!0);p(B,"transition","");p(B,"transform","");p(B,"box-sizing","border-box");p(B,"margin",
0);p(B,"top",d.top);p(B,"left",d.left);p(B,"width",d.width);p(B,"height",d.height);p(B,"opacity","0.8");p(B,"position",La?"absolute":"fixed");p(B,"zIndex","100000");p(B,"pointerEvents","none");x.ghost=B;a.appendChild(B);p(B,"transform-origin",vb/parseInt(B.style.width)*100+"% "+wb/parseInt(B.style.height)*100+"%")}},_onDragStart:function(a,d){var e=this,c=a.dataTransfer,m=e.options;aa("dragStart",this,{evt:a});x.eventCanceled?this._onDrop():(aa("setupClone",this),x.eventCanceled||(S=h(u),S.draggable=
!1,S.style["will-change"]="",this._hideClone(),w(S,this.options.chosenClass,!1),x.clone=S),e.cloneId=ia(function(){aa("clone",e);x.eventCanceled||(e.options.removeCloneOnHide||Q.insertBefore(S,u),e._hideClone(),N({sortable:e,name:"clone"}))}),!d&&w(u,m.dragClass,!0),d?(Ya=!0,e._loopId=setInterval(e._emulateDragOver,50)):(l(document,"mouseup",e._onDrop),l(document,"touchend",e._onDrop),l(document,"touchcancel",e._onDrop),c&&(c.effectAllowed="move",m.setData&&m.setData.call(e,c,u)),g(document,"drop",
e),p(u,"transform","translateZ(0)")),za=!0,e._dragStartId=ia(e._dragStarted.bind(e,d,a)),g(document,"selectstart",e),Na=!0,eb&&p(document.body,"user-select","none"))},_onDragOver:function(a){function d(d,e){aa(d,g,I({evt:a,isOwner:M,axis:ga?"vertical":"horizontal",revert:A,dragRect:b,targetRect:f,canSort:L,fromSortable:l,target:q,completed:k,onMove:function(d,e){return Ha(Q,h,u,b,d,E(d),a,e)},changed:m},e))}function e(){d("dragOverAnimationCapture");g.captureAnimationState();g!==l&&l.captureAnimationState()}
function k(e){d("dragOverCompleted",{insertion:e});e&&(M?G._hideClone():G._showClone(g),g!==l&&(w(u,W?W.options.ghostClass:G.options.ghostClass,!1),w(u,n.ghostClass,!0)),W!==g&&g!==x.active?W=g:g===x.active&&W&&(W=null),l===g&&(g._ignoreWhileAnimating=q),g.animateAll(function(){d("dragOverAnimationComplete");g._ignoreWhileAnimating=null}),g!==l&&(l.animateAll(),l._ignoreWhileAnimating=null));if(q===u&&!u.animated||q===h&&!q.animated)Aa=null;n.dragoverBubble||a.rootEl||q===document||(u.parentNode[X]._isOutsideThisEl(a.target),
!e&&ua(a));!n.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return ba=!0}function m(){ca=H(u);oa=H(u,n.draggable);N({sortable:g,name:"change",toEl:h,newIndex:ca,newDraggableIndex:oa,originalEvent:a})}var h=this.el,q=a.target,b,f,A,n=this.options,C=n.group,G=x.active,M=Xa===C,L=n.sort,l=W||G,ga,g=this,ba=!1;if(!bb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();q=R(q,n.draggable,h,!0);d("dragOver");if(x.eventCanceled)return ba;if(u.contains(a.target)||q.animated&&q.animatingX&&
q.animatingY||g._ignoreWhileAnimating===q)return k(!1);Ya=!1;if(G&&!n.disabled&&(M?L||(A=!Q.contains(u)):W===this||(this.lastPutMode=Xa.checkPull(this,G,u,a))&&C.checkPut(this,G,u,a))){ga="vertical"===this._getDirection(a,q);b=E(u);d("dragOverValid");if(x.eventCanceled)return ba;if(A)return V=Q,e(),this._hideClone(),d("revert"),x.eventCanceled||(sa?Q.insertBefore(u,sa):Q.appendChild(u)),k(!0);C=v(h,n.draggable);if(!C||ha(a,ga,this)&&!C.animated){if(C===u)return k(!1);C&&h===a.target&&(q=C);q&&(f=
E(q));if(!1!==Ha(Q,h,u,b,q,f,a,!!q))return e(),h.appendChild(u),V=h,m(),k(!0)}else if(q.parentNode===h){f=E(q);var r=0,O,r=u.parentNode!==h,t=!Cb(u.animated&&u.toRect||b,q.animated&&q.toRect||f,ga),C=ga?"top":"left",Z=fa(q,"top","top")||fa(u,"top","top"),T=Z?Z.scrollTop:void 0;Aa!==q&&(O=f[C],Ja=!1,Za=!t&&n.invertSwap||r);var r=ra(a,q,f,ga,t?1:n.swapThreshold,null==n.invertedSwapThreshold?n.swapThreshold:n.invertedSwapThreshold,Za,Aa===q),y;if(0!==r){t=H(u);do t-=r,y=V.children[t];while(y&&("none"===
p(y,"display")||y===B))}if(0===r||y===q)return k(!1);Aa=q;Ka=r;y=q.nextElementSibling;t=!1;t=1===r;r=Ha(Q,h,u,b,q,f,a,t);if(!1!==r){if(1===r||-1===r)t=1===r;bb=!0;setTimeout(Ia,30);e();t&&!y?h.appendChild(u):q.parentNode.insertBefore(u,t?y:q);Z&&c(Z,0,T-Z.scrollTop);V=u.parentNode;void 0===O||Za||(Ta=Math.abs(O-E(q)[C]));m();return k(!0)}}if(h.contains(u))return k(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){l(document,"mousemove",this._onTouchMove);l(document,"touchmove",this._onTouchMove);
l(document,"pointermove",this._onTouchMove);l(document,"dragover",ua);l(document,"mousemove",ua);l(document,"touchmove",ua)},_offUpEvents:function(){var a=this.el.ownerDocument;l(a,"mouseup",this._onDrop);l(a,"touchend",this._onDrop);l(a,"pointerup",this._onDrop);l(a,"touchcancel",this._onDrop);l(document,"selectstart",this)},_onDrop:function(a){var d=this.el,e=this.options;ca=H(u);oa=H(u,e.draggable);aa("drop",this,{evt:a});V=u&&u.parentNode;ca=H(u);oa=H(u,e.draggable);if(!x.eventCanceled&&(Ja=Za=
za=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(l(document,"drop",this),l(d,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),eb&&p(document.body,"user-select",""),a&&(Na&&(a.cancelable&&a.preventDefault(),!e.dropBubble&&a.stopPropagation()),B&&B.parentNode&&B.parentNode.removeChild(B),(Q===V||W&&"clone"!==W.lastPutMode)&&S&&S.parentNode&&S.parentNode.removeChild(S),u&&(this.nativeDraggable&&
l(u,"dragend",this),xa(u),u.style["will-change"]="",Na&&!za&&w(u,W?W.options.ghostClass:this.options.ghostClass,!1),w(u,this.options.chosenClass,!1),N({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:a}),Q!==V?(0<=ca&&(N({rootEl:V,name:"add",toEl:V,fromEl:Q,originalEvent:a}),N({sortable:this,name:"remove",toEl:V,originalEvent:a}),N({rootEl:V,name:"sort",toEl:V,fromEl:Q,originalEvent:a}),N({sortable:this,name:"sort",toEl:V,originalEvent:a})),W&&W.save()):ca!==
wa&&0<=ca&&(N({sortable:this,name:"update",toEl:V,originalEvent:a}),N({sortable:this,name:"sort",toEl:V,originalEvent:a})),x.active)))){if(null==ca||-1===ca)ca=wa,oa=Ga;N({sortable:this,name:"end",toEl:V,originalEvent:a});this.save()}this._nulling()},_nulling:function(){aa("nulling",this);Q=u=V=B=sa=S=Wa=pa=ta=la=Na=ca=oa=wa=Ga=Aa=Ka=W=Xa=x.dragged=x.ghost=x.clone=x.active=null;Ua.forEach(function(a){a.checked=!0});Ua.length=gb=hb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);
break;case "dragenter":case "dragover":u&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],d,e=this.el.children,c=0,m=e.length,h=this.options;c<m;c++)d=e[c],R(d,h.draggable,this.el,!1)&&a.push(d.getAttribute(h.dataIdAttr)||ya(d));return a},sort:function(a){var d={},e=this.el;this.toArray().forEach(function(a,c){c=e.children[c];R(c,this.options.draggable,e,!1)&&(d[a]=
c)},this);a.forEach(function(a){d[a]&&(e.removeChild(d[a]),e.appendChild(d[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,d){return R(a,d||this.options.draggable,this.el,!1)},option:function(a,d){var e=this.options;if(void 0===d)return e[a];var c=Fa.modifyOption(this,a,d);e[a]="undefined"!==typeof c?c:d;"group"===a&&rb(e)},destroy:function(){aa("destroy",this);var a=this.el;a[X]=null;l(a,"mousedown",this._onTapStart);l(a,"touchstart",this._onTapStart);l(a,
"pointerdown",this._onTapStart);this.nativeDraggable&&(l(a,"dragover",this),l(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();Sa.splice(Sa.indexOf(this.el),1);this.el=a=null},_hideClone:function(){pa||(aa("hideClone",this),x.eventCanceled||(p(S,"display","none"),this.options.removeCloneOnHide&&S.parentNode&&S.parentNode.removeChild(S),pa=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():
pa&&(aa("showClone",this),x.eventCanceled||(Q.contains(u)&&!this.options.group.revertClone?Q.insertBefore(S,u):sa?Q.insertBefore(S,sa):Q.appendChild(S),this.options.group.revertClone&&this.animate(u,S),p(S,"display",""),pa=!1))}};g(document,"touchmove",function(a){(x.active||za)&&a.cancelable&&a.preventDefault()});x.utils={on:g,off:l,css:p,find:f,is:function(a,d){return!!R(a,d,a,!1)},extend:function(a,d){if(a&&d)for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e]);return a},throttle:C,closest:R,toggleClass:w,
clone:h,index:H,nextTick:ia,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:qb,getChild:ka};x.get=function(a){return a[X]};x.mount=function(){for(var a=arguments.length,d=Array(a),e=0;e<a;e++)d[e]=arguments[e];d[0].constructor===Array&&(d=d[0]);d.forEach(function(a){if(!a.prototype||!a.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(a));a.utils&&(x.utils=I({},x.utils,a.utils));Fa.mount(a)})};x.create=function(a,
d){return new x(a,d)};x.version="1.10.0";var U=[],Oa,jb,kb=!1,lb,mb,$a,Ba,nb=C(function(a,d,e,k){if(d.scroll){var m=(a.touches?a.touches[0]:a).clientX,h=(a.touches?a.touches[0]:a).clientY,q=d.scrollSensitivity,b=d.scrollSpeed,f=A(),n=!1,C;jb!==e&&(jb=e,Va(),Oa=d.scroll,C=d.scrollFn,!0===Oa&&(Oa=r(e,!0)));e=0;var G=Oa;do{var M=G,g=E(M),L=g.top,l=g.bottom,u=g.left,ga=g.right,ba=g.width,g=g.height,t=void 0,O=void 0,v=M.scrollWidth,Z=M.scrollHeight,O=p(M),y=M.scrollLeft,w=M.scrollTop;M===f?(t=ba<v&&("auto"===
O.overflowX||"scroll"===O.overflowX||"visible"===O.overflowX),O=g<Z&&("auto"===O.overflowY||"scroll"===O.overflowY||"visible"===O.overflowY)):(t=ba<v&&("auto"===O.overflowX||"scroll"===O.overflowX),O=g<Z&&("auto"===O.overflowY||"scroll"===O.overflowY));u=t&&(Math.abs(ga-m)<=q&&y+ba<v)-(Math.abs(u-m)<=q&&!!y);L=O&&(Math.abs(l-h)<=q&&w+g<Z)-(Math.abs(L-h)<=q&&!!w);if(!U[e])for(l=0;l<=e;l++)U[l]||(U[l]={});if(U[e].vx!=u||U[e].vy!=L||U[e].el!==M)if(U[e].el=M,U[e].vx=u,U[e].vy=L,clearInterval(U[e].pid),
0!=u||0!=L)n=!0,U[e].pid=setInterval(function(){k&&0===this.layer&&x.active._onTouchMove($a);var d=U[this.layer].vy?U[this.layer].vy*b:0,e=U[this.layer].vx?U[this.layer].vx*b:0;"function"===typeof C&&"continue"!==C.call(x.dragged.parentNode[X],e,d,a,$a,U[this.layer].el)||c(U[this.layer].el,e,d)}.bind({layer:e}),24);e++}while(d.bubbleScroll&&G!==f&&(G=r(G,!1)));kb=n}},30),zb=function(a){var d=a.originalEvent,e=a.putSortable,c=a.dragEl,m=a.activeSortable,h=a.dispatchSortableEvent,q=a.hideGhostForTarget;
a=a.unhideGhostForTarget;m=e||m;q();d=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:d;d=document.elementFromPoint(d.clientX,d.clientY);a();m&&!m.el.contains(d)&&(h("spill"),this.onSpill({dragEl:c,putSortable:e}))};n.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var d=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var e=ka(this.sortable.el,this.startIndex,this.options);e?this.sortable.el.insertBefore(d,
e):this.sortable.el.appendChild(d);this.sortable.animateAll();a&&a.animateAll()},drop:zb};D(n,{pluginName:"revertOnSpill"});db.prototype={onSpill:function(a){var d=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();d.parentNode&&d.parentNode.removeChild(d);a.animateAll()},drop:zb};D(db,{pluginName:"removeOnSpill"});var ja,y=[],da=[],Pa,ma,Qa=!1,ea=!1,Ra=!1,P,va,ab;x.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var a in this)"_"===
a.charAt(0)&&"function"===typeof this[a]&&(this[a]=this[a].bind(this))}a.prototype={dragStarted:function(a){a=a.originalEvent;this.sortable.nativeDraggable?g(document,"dragover",this._handleAutoScroll):this.options.supportPointer?g(document,"pointermove",this._handleFallbackAutoScroll):a.touches?g(document,"touchmove",this._handleFallbackAutoScroll):g(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(a){a=a.originalEvent;this.options.dragOverBubble||a.rootEl||this._handleAutoScroll(a)},
drop:function(){this.sortable.nativeDraggable?l(document,"dragover",this._handleAutoScroll):(l(document,"pointermove",this._handleFallbackAutoScroll),l(document,"touchmove",this._handleFallbackAutoScroll),l(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Ba);Va();clearTimeout(Ea);Ea=void 0},nulling:function(){$a=jb=Oa=kb=Ba=lb=mb=null;U.length=0},_handleFallbackAutoScroll:function(a){this._handleAutoScroll(a,!0)},_handleAutoScroll:function(a,e){var d=this,c=(a.touches?a.touches[0]:
a).clientX,m=(a.touches?a.touches[0]:a).clientY,h=document.elementFromPoint(c,m);$a=a;if(e||Z||L||eb){nb(a,this.options,h,e);var q=r(h,!0);!kb||Ba&&c===lb&&m===mb||(Ba&&clearInterval(Ba),Ba=setInterval(function(){var k=r(document.elementFromPoint(c,m),!0);k!==q&&(q=k,Va());nb(a,d.options,k,e)},10),lb=c,mb=m)}else this.options.bubbleScroll&&r(h,!0)!==A()?nb(a,this.options,r(h,!1),!1):Va()}};return D(a,{pluginName:"scroll",initializeByDefault:!0})});x.mount(db,n);x.mount(new function(){function a(){this.defaults=
{swapClass:"sortable-swap-highlight"}}a.prototype={dragStart:function(a){ja=a.dragEl},dragOverValid:function(a){var d=a.completed,c=a.target,m=a.onMove,h=a.changed,q=a.cancel;if(a.activeSortable.options.swap){var b=this.sortable.el;a=this.options;c&&c!==b&&(b=ja,!1!==m(c)?(w(c,a.swapClass,!0),ja=c):ja=null,b&&b!==ja&&w(b,a.swapClass,!1));h();d(!0);q()}},drop:function(a){var d=a.activeSortable,c=a.putSortable;a=a.dragEl;var m=c||this.sortable,h=this.options;ja&&w(ja,h.swapClass,!1);if(ja&&(h.swap||
c&&c.options.swap)&&a!==ja){m.captureAnimationState();m!==d&&d.captureAnimationState();var c=ja,h=a.parentNode,q=c.parentNode,b,f;h&&q&&!h.isEqualNode(c)&&!q.isEqualNode(a)&&(b=H(a),f=H(c),h.isEqualNode(q)&&b<f&&f++,h.insertBefore(c,h.children[b]),q.insertBefore(a,q.children[f]));m.animateAll();m!==d&&d.animateAll()}},nulling:function(){ja=null}};return D(a,{pluginName:"swap",eventProperties:function(){return{swapItem:ja}}})});x.mount(new function(){function a(a){for(var d in this)"_"===d.charAt(0)&&
"function"===typeof this[d]&&(this[d]=this[d].bind(this));a.options.supportPointer?g(document,"pointerup",this._deselectMultiDrag):(g(document,"mouseup",this._deselectMultiDrag),g(document,"touchend",this._deselectMultiDrag));g(document,"keydown",this._checkKeyDown);g(document,"keyup",this._checkKeyUp);this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(d,e){var c="";y.length&&ma===a?y.forEach(function(a,d){c+=(d?", ":"")+a.textContent}):c=e.textContent;d.setData("Text",
c)}}}a.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(a){P=a.dragEl},delayEnded:function(){this.isMultiDrag=~y.indexOf(P)},setupClone:function(a){var d=a.sortable;a=a.cancel;if(this.isMultiDrag){for(var c=0;c<y.length;c++)da.push(h(y[c])),da[c].sortableIndex=y[c].sortableIndex,da[c].draggable=!1,da[c].style["will-change"]="",w(da[c],this.options.selectedClass,!1),y[c]===P&&w(da[c],this.options.chosenClass,!1);d._hideClone();a()}},clone:function(a){var d=a.sortable,c=a.rootEl,
m=a.dispatchSortableEvent;a=a.cancel;this.isMultiDrag&&!this.options.removeCloneOnHide&&y.length&&ma===d&&(q(!0,c),m("clone"),a())},showClone:function(a){var d=a.cloneNowShown,c=a.cancel;this.isMultiDrag&&(q(!1,a.rootEl),da.forEach(function(a){p(a,"display","")}),d(),ab=!1,c())},hideClone:function(a){var d=this,c=a.cloneNowHidden;a=a.cancel;this.isMultiDrag&&(da.forEach(function(a){p(a,"display","none");d.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),c(),ab=!0,a())},dragStartGlobal:function(a){!this.isMultiDrag&&
ma&&ma.multiDrag._deselectMultiDrag();y.forEach(function(a){a.sortableIndex=H(a)});y=y.sort(function(a,d){return a.sortableIndex-d.sortableIndex});Ra=!0},dragStarted:function(a){var d=this;a=a.sortable;if(this.isMultiDrag){if(this.options.sort&&(a.captureAnimationState(),this.options.animation)){y.forEach(function(a){a!==P&&p(a,"position","absolute")});var c=E(P,!1,!0,!0);y.forEach(function(a){a!==P&&M(a,c)});Qa=ea=!0}a.animateAll(function(){Qa=ea=!1;d.options.animation&&y.forEach(function(a){ba(a)});
d.options.sort&&O()})}},dragOver:function(a){var d=a.target,c=a.completed;a=a.cancel;ea&&~y.indexOf(d)&&(c(!1),a())},revert:function(a){var d=a.fromSortable,c=a.rootEl,h=a.sortable,q=a.dragRect;1<y.length&&(y.forEach(function(a){h.addAnimationState({target:a,rect:ea?E(a):q});ba(a);a.fromRect=q;d.removeAnimationState(a)}),ea=!1,m(!this.options.removeCloneOnHide,c))},dragOverCompleted:function(a){var d=a.sortable,c=a.isOwner,m=a.activeSortable,h=a.parentEl,q=a.putSortable,b=this.options;if(a.insertion){c&&
m._hideClone();Qa=!1;if(b.animation&&1<y.length&&(ea||!c&&!m.options.sort&&!q)){var f=E(P,!1,!0,!0);y.forEach(function(a){a!==P&&(M(a,f),h.appendChild(a))});ea=!0}c||(ea||O(),1<y.length?(a=ab,m._showClone(d),m.options.animation&&!ab&&a&&da.forEach(function(a){m.addAnimationState({target:a,rect:va});a.fromRect=va;a.thisAnimationDuration=null})):m._showClone(d))}},dragOverAnimationCapture:function(a){var d=a.dragRect,c=a.isOwner;a=a.activeSortable;y.forEach(function(a){a.thisAnimationDuration=null});
a.options.animation&&!c&&a.multiDrag.isMultiDrag&&(va=D({},d),d=T(P,!0),va.top-=d.f,va.left-=d.e)},dragOverAnimationComplete:function(){ea&&(ea=!1,O())},drop:function(a){var d=a.originalEvent,c=a.rootEl,m=a.parentEl,h=a.sortable,q=a.dispatchSortableEvent,b=a.oldIndex,f=(a=a.putSortable)||this.sortable;if(d){var n=this.options,A=m.children;if(!Ra)if(n.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),w(P,n.selectedClass,!~y.indexOf(P)),~y.indexOf(P))y.splice(y.indexOf(P),1),Pa=null,qa({sortable:h,
rootEl:c,name:"deselect",targetEl:P,originalEvt:d});else{y.push(P);qa({sortable:h,rootEl:c,name:"select",targetEl:P,originalEvt:d});if(d.shiftKey&&Pa&&h.el.contains(Pa)){var C=H(Pa),M=H(P);if(~C&&~M&&C!==M){var G;M>C?(G=C,C=M):(G=M,C+=1);for(;G<C;G++)~y.indexOf(A[G])||(w(A[G],n.selectedClass,!0),y.push(A[G]),qa({sortable:h,rootEl:c,name:"select",targetEl:A[G],originalEvt:d}))}}else Pa=P;ma=f}if(Ra&&this.isMultiDrag){if((m[X].options.sort||m!==c)&&1<y.length){var g=E(P),p=H(P,":not(."+this.options.selectedClass+
")");!Qa&&n.animation&&(P.thisAnimationDuration=null);f.captureAnimationState();if(!Qa&&(n.animation&&(P.fromRect=g,y.forEach(function(a){a.thisAnimationDuration=null;if(a!==P){var d=ea?E(a):g;a.fromRect=d;f.addAnimationState({target:a,rect:d})}})),O(),y.forEach(function(a){A[p]?m.insertBefore(a,A[p]):m.appendChild(a);p++}),b===H(P))){var L=!1;y.forEach(function(a){a.sortableIndex!==H(a)&&(L=!0)});L&&q("update")}y.forEach(function(a){ba(a)});f.animateAll()}ma=f}(c===m||a&&"clone"!==a.lastPutMode)&&
da.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)})}},nullingGlobal:function(){this.isMultiDrag=Ra=!1;da.length=0},destroyGlobal:function(){this._deselectMultiDrag();l(document,"pointerup",this._deselectMultiDrag);l(document,"mouseup",this._deselectMultiDrag);l(document,"touchend",this._deselectMultiDrag);l(document,"keydown",this._checkKeyDown);l(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(a){if(!(Ra||ma!==this.sortable||a&&R(a.target,this.options.draggable,this.sortable.el,
!1)||a&&0!==a.button))for(;y.length;){var d=y[0];w(d,this.options.selectedClass,!1);y.shift();qa({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:d,originalEvt:a})}},_checkKeyDown:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(a){a.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}};return D(a,{pluginName:"multiDrag",utils:{select:function(a){var d=a.parentNode[X];d&&d.options.multiDrag&&!~y.indexOf(a)&&(ma&&ma!==d&&
(ma.multiDrag._deselectMultiDrag(),ma=d),w(a,d.options.selectedClass,!0),y.push(a))},deselect:function(a){var d=a.parentNode[X],c=y.indexOf(a);d&&d.options.multiDrag&&~c&&(w(a,d.options.selectedClass,!1),y.splice(c,1))}},eventProperties:function(){var a=this,c=[],m=[];y.forEach(function(d){c.push({multiDragElement:d,index:d.sortableIndex});var e;e=ea&&d!==P?-1:ea?H(d,":not(."+a.options.selectedClass+")"):H(d);m.push({multiDragElement:d,index:e})});return{items:K(y),clones:[].concat(da),oldIndicies:c,
newIndicies:m}},optionListeners:{multiDragKey:function(a){a=a.toLowerCase();"ctrl"===a?a="Control":1<a.length&&(a=a.charAt(0).toUpperCase()+a.substr(1));return a}}})});return x})},"esri/widgets/LayerList/LayerListViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Collection ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./ListItem ./support/layerListUtils".split(" "),
function(J,D,I,b,K,t,g,l,F,R,w){var p=K.ofType(R);return function(t){function f(b){b=t.call(this,b)||this;b._handles=new g;b.listItemCreatedFunction=null;b.operationalItems=new p;b.view=null;return b}I(f,t);f.prototype.initialize=function(){var b=this;this._handles.add(l.init(this,["view","view.ready"],function(){return b._viewHandles()}),"view")};f.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};Object.defineProperty(f.prototype,
"state",{get:function(){var b=this.get("view");return this.get("view.ready")?"ready":b?"loading":"disabled"},enumerable:!0,configurable:!0});f.prototype.triggerAction=function(b,f){b&&this.emit("trigger-action",{action:b,item:f})};f.prototype._createLayerViewHandles=function(b){var f=this,A=this._handles;A.remove("layer-views");this._compileList();b&&A.add(b.on("change",function(){return f._compileList()}),"layer-views")};f.prototype._createMapLayerHandles=function(b){var f=this,A=this._handles;A.remove("map-layers");
this._compileList();b&&A.add(b.on("change",function(){return f._compileList()}),"map-layers")};f.prototype._watchItemProperties=function(b){var f=this;this._handles.add([b.children.on("change",function(){f._modifyListItemChildren(b.children)})],"children-change-"+b.uid)};f.prototype._modifyListItemChildren=function(b){var f=this;b.forEach(function(b){return f._modifyListItem(b)})};f.prototype._modifyListItem=function(b){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:b});this._modifyListItemChildren(b.children)};f.prototype._createListItem=function(b){b=new R({layer:b,view:this.view});this._watchItemProperties(b);return b};f.prototype._removeAllItems=function(){var b=this._handles,f=this.operationalItems;f.forEach(function(f){b.remove("children-change-"+f.uid)});f.removeAll()};f.prototype._getViewableLayers=function(b){if(b)return b.filter(function(b){return"hide"!==w.findLayerListMode(b)})};f.prototype._watchLayersListMode=function(b){var f=this,g=this._handles;
g.remove("layer-list-mode");b&&b.forEach(function(b){g.add(l.watch(b,"listMode",function(){return f._compileList()}),"layer-list-mode")})};f.prototype._compileList=function(){var b=this.get("view.map.layers");this._watchLayersListMode(b);(b=this._getViewableLayers(b))&&b.length?(this._createNewItems(b),this._modifyOrRemoveItems(b),this._sortItems(b)):this._removeAllItems()};f.prototype._createNewItems=function(b){var f=this,g=this.operationalItems;b.forEach(function(b){g.find(function(f){return f.layer===
b})||g.add(f._createListItem(b))})};f.prototype._modifyOrRemoveItems=function(b){var f=this,g=this._handles,p=this.operationalItems;p.forEach(function(l){l&&(b.find(function(b){return l.layer===b})?f._modifyListItem(l):(g.remove("children-change-"+l.uid),p.remove(l)))})};f.prototype._sortItems=function(b){this.operationalItems.sort(function(f,g){f=b.indexOf(f.layer);g=b.indexOf(g.layer);return f>g?-1:f<g?1:0})};f.prototype._viewHandles=function(){var b=this,f=this._handles,g=this.view;f.remove(["map-layers",
"layer-views","view-layers"]);this._compileList();g&&g.ready&&f.add([l.init(this,"view.map.layers",function(f){return b._createMapLayerHandles(f)}),l.init(this,"view.layerViews",function(f){return b._createLayerViewHandles(f)}),l.init(this,"listItemCreatedFunction",function(){return b._compileList()})],"view-layers")};b([F.property()],f.prototype,"listItemCreatedFunction",void 0);b([F.property({type:p})],f.prototype,"operationalItems",void 0);b([F.property({dependsOn:["view.ready"],readOnly:!0})],
f.prototype,"state",null);b([F.property()],f.prototype,"view",void 0);return f=b([F.subclass("esri.widgets.LayerList.LayerListViewModel")],f)}(F.declared(t.EventedAccessor))})},"esri/widgets/LayerList/ListItem":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/Collection ../../core/Handles ../../core/Identifiable ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/Sublayer ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(J,D,I,b,K,t,g,l,F,R,w,p,T,f,A,E,fa,ka,v){J=l.ofType({key:"type",defaultKeyValue:"button",base:f,typeMap:{button:A,toggle:fa,slider:E}});var H=l.ofType(J);return function(f){function g(b){b=f.call(this,b)||this;b._handles=new F;b.actionsSections=new H;b.actionsOpen=!1;b.children=new (l.ofType(r));b.error=null;b.layer=null;b.layerView=null;b.open=!1;b.panel=null;b.parent=null;b.view=null;b.visible=null;return b}I(g,f);r=g;g.prototype.initialize=function(){var b=this;this._handles.add([w.init(this,
"layer",function(f){return b._watchLayerProperties(f)}),w.init(this,"view",function(f){return b._updateChildren(f)}),w.init(this,"panel",function(f){return b._setListItemOnPanel(f)}),w.init(this,["layer","view"],function(){return b._getLayerView()})])};g.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};g.prototype.castPanel=function(b){this.get("panel.open")&&!b.hasOwnProperty("open")&&(b.open=!0);return b?new ka(b):null};Object.defineProperty(g.prototype,"title",
{get:function(){var b=this.get("layer.layer");return(!b||b&&this.get("layer.layer.loaded"))&&this.get("layer.title")||""},set:function(b){void 0===b?this._clearOverride("title"):this._override("title",b)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"updating",{get:function(){var b=this.layerView;return b?b.updating:this._isLayerUpdating(this.layer)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"visibleAtCurrentScale",{get:function(){return!v.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"visibilityMode",{get:function(){return v.findLayerVisibilityMode(this.layer)},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new r({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};g.prototype._setListItemOnPanel=function(b){b&&
(b.listItem=this)};g.prototype._updateChildren=function(b){var f=this.children;f&&f.forEach(function(c){return c.view=b})};g.prototype._addChildren=function(b){var f=this;this.children.removeAll();if(b){this._handles.remove("child-list-mode");b.forEach(function(c){f._handles.add(w.watch(c,"listMode",function(){return f._addChildren(b)}),"child-list-mode")});var c=[];b.filter(function(c){return"hide"!==v.findLayerListMode(c)}).forEach(function(b){v.canDisplayLayer(b)&&(b=new r({layer:b,parent:f,view:f.view}),
c.unshift(b))});this.children.addMany(c)}};g.prototype._watchSublayerChanges=function(b){var f=this;b&&this._handles.add(b.on("change",function(){f._addChildren(b)}),"layer")};g.prototype._initializeChildLayers=function(b){this._addChildren(b);this._watchSublayerChanges(b)};g.prototype._watchLayerProperties=function(b){var f=this;if(this._handles&&(this._handles.remove("layer"),b))if(this._handles.add(w.watch(b,"listMode",function(){return f._watchLayerProperties(b)}),"layer"),"hide-children"===v.findLayerListMode(b))this.children.removeAll();
else{var c=v.getNormalizedChildLayerProperty(b);c&&this._handles.add(w.init(b,c,function(){b.hasOwnProperty(c)&&f._initializeChildLayers(b[c])}),"layer")}};g.prototype._getLayerView=function(){return t(this,void 0,void 0,function(){var b,f,c,h;return K(this,function(g){switch(g.label){case 0:b=this;f=b.layer;c=b.view;if(!f||!c)return[2];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,c.whenLayerView(f)];case 2:h=g.sent();if(h.layer!==this.layer)return[2];this._set("layerView",h);return[3,4];case 3:return g.sent(),
[3,4];case 4:return[2]}})})};g.prototype._isLayerUpdating=function(b){return b instanceof T?!1:b&&"loading"===b.loadStatus};var r;b([p.property({type:H})],g.prototype,"actionsSections",void 0);b([p.property()],g.prototype,"actionsOpen",void 0);b([p.property({type:l})],g.prototype,"children",void 0);b([p.aliasOf("layer.loadError?")],g.prototype,"error",void 0);b([p.property()],g.prototype,"layer",void 0);b([p.property({readOnly:!0})],g.prototype,"layerView",void 0);b([p.property()],g.prototype,"open",
void 0);b([p.property({type:ka})],g.prototype,"panel",void 0);b([p.cast("panel")],g.prototype,"castPanel",null);b([p.property()],g.prototype,"parent",void 0);b([p.property({dependsOn:["layer.layer?.loaded","layer.title"]})],g.prototype,"title",null);b([p.property({dependsOn:["layer.loadStatus?","layerView.updating"],readOnly:!0})],g.prototype,"updating",null);b([p.property({value:null})],g.prototype,"view",void 0);b([p.aliasOf("layer.visible")],g.prototype,"visible",void 0);b([p.property({dependsOn:["layer.minScale?",
"layer.maxScale?","view.scale"],readOnly:!0})],g.prototype,"visibleAtCurrentScale",null);b([p.property({dependsOn:["layer.visibilityMode?","layer.capabilities?.exportMap?.supportsSublayerVisibility","layer.layer?.capabilities?.exportMap?.supportsSublayerVisibility"],readOnly:!0})],g.prototype,"visibilityMode",null);return g=r=b([p.subclass("esri.widgets.LayerList.ListItem")],g)}(p.declared(R.IdentifiableMixin(g)))})},"esri/layers/support/Sublayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/paramHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/assignHelper ../../geometry ../../PopupTemplate ../../renderers ../../request ../../symbols ../../core/Collection ../../core/Error ../../core/HandleOwner ../../core/lang ../../core/Loadable ../../core/Logger ../../core/MultiOriginJSONSupport ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../core/accessorSupport/PropertyOrigin ../../core/accessorSupport/utils ./FeatureType ./Field ./FieldsIndex ./fieldUtils ./LabelClass ./layerSourceUtils ../../renderers/support/jsonUtils ../../support/popupUtils ../../tasks/support/Query".split(" "),
function(J,D,I,b,K,t,g,l,F,R,w,p,T,f,A,E,fa,ka,v,H,na,Da,r,G,C,c,h,M,ba,ga,qa,N,x,Ha,xa){function Ia(c){return c&&"esriSMS"===c.type}function ha(c,b,h){return{ignoreOrigin:!0,enabled:h&&h.writeSublayerStructure||!1}}function ra(c,b,h){return{ignoreOrigin:!0,enabled:h?h.writeSublayerStructure||this.originIdOf(b)>=C.nameToId(h.origin):!1}}var ya=v.getLogger("esri.layers.support.Sublayer"),cb=0,ia=new Set;ia.add("layer");ia.add("parent");ia.add("loaded");ia.add("loadStatus");ia.add("loadError");ia.add("loadWarnings");
return function(C){function n(c){c=C.call(this,c)||this;c.capabilities=void 0;c.fields=null;c.fullExtent=null;c.globalIdField=null;c.legendEnabled=!0;c.objectIdField=null;c.popupEnabled=!0;c.popupTemplate=null;c.sourceJSON=null;c.title=null;c.typeIdField=null;c.types=null;return c}I(n,C);v=n;n.prototype.load=function(c){return g(this,void 0,void 0,function(){var b=this;return t(this,function(m){this.addResolvingPromise(function(){return g(b,void 0,void 0,function(){var b,m,h;return t(this,function(q){switch(q.label){case 0:if(!this.layer)throw new A("sublayer:missing-layer",
"Sublayer can't be loaded without being part of a layer",{sublayer:this});b=null;return 2<this.originIdOf("url")||N.isDataLayerSource(this.source)?[4,p(this.url,l({responseType:"json",query:{f:"json"}},c))]:[3,2];case 1:return m=q.sent(),b=m.data,[3,4];case 2:return h=this.id,this.source&&null!=this.source.mapLayerId&&(h=this.source.mapLayerId),[4,this.layer.fetchSublayerInfo(h,c)];case 3:b=q.sent(),q.label=4;case 4:return b&&(this.sourceJSON=b,this.read({layerDefinition:b},{origin:"service"})),[2]}})})}());
return[2,this]})})};n.prototype.readCapabilities=function(c,b){return{exportMap:{supportsModification:!!b.layerDefinition.canModifyLayer}}};Object.defineProperty(n.prototype,"definitionExpression",{set:function(c){this._setAndNotifyLayer("definitionExpression",c)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"fieldsIndex",{get:function(){return new ba(this.fields||[])},enumerable:!0,configurable:!0});n.prototype.readGlobalIdFieldFromService=function(c,b){b=b.layerDefinition||
b;if(b.globalIdField)return b.globalIdField;if(b.fields)for(c=0,b=b.fields;c<b.length;c++){var m=b[c];if("esriFieldTypeGlobalID"===m.type)return m.name}};Object.defineProperty(n.prototype,"id",{get:function(){var c=this._get("id");return null==c?cb++:c},set:function(c){this._get("id")!==c&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",c))},enumerable:!0,
configurable:!0});Object.defineProperty(n.prototype,"labelingInfo",{set:function(c){this._setAndNotifyLayer("labelingInfo",c)},enumerable:!0,configurable:!0});n.prototype.writeLabelingInfo=function(c,b,h,f){c&&c.length&&(b.layerDefinition={drawingInfo:{labelingInfo:c.map(function(c){return c.write({},f)})}})};Object.defineProperty(n.prototype,"labelsVisible",{set:function(c){this._setAndNotifyLayer("labelsVisible",c)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"layer",{set:function(c){this._set("layer",
c);this.sublayers&&this.sublayers.forEach(function(b){return b.layer=c})},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"listMode",{set:function(c){this._set("listMode",c)},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"minScale",{set:function(c){this._setAndNotifyLayer("minScale",c)},enumerable:!0,configurable:!0});n.prototype.readMinScale=function(c,b){return b.minScale||b.layerDefinition&&b.layerDefinition.minScale||0};Object.defineProperty(n.prototype,"maxScale",
{set:function(c){this._setAndNotifyLayer("maxScale",c)},enumerable:!0,configurable:!0});n.prototype.readMaxScale=function(c,b){return b.maxScale||b.layerDefinition&&b.layerDefinition.maxScale||0};n.prototype.readObjectIdFieldFromService=function(c,b){b=b.layerDefinition||b;if(b.objectIdField)return b.objectIdField;if(b.fields)for(c=0,b=b.fields;c<b.length;c++){var h=b[c];if("esriFieldTypeOID"===h.type)return h.name}};Object.defineProperty(n.prototype,"opacity",{set:function(c){this._setAndNotifyLayer("opacity",
c)},enumerable:!0,configurable:!0});n.prototype.readOpacity=function(c,b){c=b.layerDefinition;return 1-.01*(null!=c.transparency?c.transparency:c.drawingInfo.transparency)};n.prototype.writeOpacity=function(c,b,h,f){b.layerDefinition={drawingInfo:{transparency:100-100*c}}};n.prototype.writeParent=function(c,b){b.parentLayerId=this.parent&&this.parent!==this.layer?this.parent.id:-1};Object.defineProperty(n.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,
configurable:!0});Object.defineProperty(n.prototype,"renderer",{set:function(c){if(c)for(var b=0,h=c.getSymbols();b<h.length;b++)if(T.isSymbol3D(h[b])){ya.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",c)},enumerable:!0,configurable:!0});n.prototype.readRenderer=function(c,b,h){if(c=b.layerDefinition.drawingInfo.renderer||void 0)(c=x.read(c,b,h)||void 0)||ya.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:h});
return c};n.prototype.writeRenderer=function(c,b,h,f){b.layerDefinition={drawingInfo:{renderer:c.write({},f)}}};n.prototype.writeWebSceneRenderer=function(c,b,h,f){b.layerDefinition={drawingInfo:{renderer:c.write({},f)}}};Object.defineProperty(n.prototype,"source",{get:function(){return this._get("source")||{mapLayerId:this.id,type:N.MAPLAYER}},set:function(c){this._setAndNotifyLayer("source",c)},enumerable:!0,configurable:!0});n.prototype.writeSource=function(c,b){b.layerDefinition={source:N.sourceToJSON(c)}};
Object.defineProperty(n.prototype,"sublayers",{set:function(c){this._handleSublayersChange(c,this._get("sublayers"));this._set("sublayers",c)},enumerable:!0,configurable:!0});n.prototype.castSublayers=function(c){return G.default(f.ofType(v),c)};n.prototype.writeSublayers=function(c,b,h){this.get("sublayers.length")&&(b[h]=this.sublayers.map(function(c){return c.id}).toArray().reverse())};n.prototype.readTypeIdField=function(c,b){b=b.layerDefinition||b;if(c=b.typeIdField)if(b=ga.getField(b.fields,
c))return b.name;return null};Object.defineProperty(n.prototype,"url",{get:function(){var c=this.layer,b=this.source;if(!c)return null;if(N.isMapLayerSource(b))return c.parsedUrl.path+"/"+b.mapLayerId;b={layer:JSON.stringify({source:N.sourceToJSON(this.source)})};return c.parsedUrl.path+"/dynamicLayer?"+Da.objectToQuery(b)},set:function(c){c?this._override("url",c):this._clearOverride("url")},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"visible",{set:function(c){this._setAndNotifyLayer("visible",
c)},enumerable:!0,configurable:!0});n.prototype.writeVisible=function(c,b,h,f){b[h]=this.getAtOrigin("defaultVisibility","service")||c};n.prototype.clone=function(){var b=c.getProperties(this).store,h=new v;c.getProperties(h).store=b.clone(ia);return h};n.prototype.createPopupTemplate=function(c){return Ha.createPopupTemplate(this,c)};n.prototype.createQuery=function(){return new xa({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};n.prototype.createFeatureLayer=function(){return g(this,
void 0,void 0,function(){var c,b,h,f,g;return t(this,function(m){switch(m.label){case 0:if(this.hasOwnProperty("sublayers"))return[2,null];c=this.layer&&this.layer.parsedUrl;b=this.source;h=null;c&&(h=N.isMapLayerSource(b)?c.path+"/"+b.mapLayerId:c.path+"/dynamicLayer");return[4,na.create(function(c){return J(["../FeatureLayer"],c)})];case 1:return f=m.sent(),g=new f({url:h}),this.definitionExpression&&(g.definitionExpression=this.definitionExpression),2<this.originIdOf("labelingInfo")&&(g.labelingInfo=
fa.clone(this.labelingInfo)),0<this.originIdOf("labelsVisible")&&(g.labelsVisible=this.labelsVisible),0<this.originIdOf("legendEnabled")&&(g.legendEnabled=this.legendEnabled),0<this.originIdOf("visible")&&(g.visible=this.visible),0<this.originIdOf("minScale")&&(g.minScale=this.minScale),0<this.originIdOf("maxScale")&&(g.maxScale=this.maxScale),0<this.originIdOf("opacity")&&(g.opacity=this.opacity),0<this.originIdOf("popupTemplate")&&(g.popupTemplate=fa.clone(this.popupTemplate)),2<this.originIdOf("renderer")&&
(g.renderer=fa.clone(this.renderer)),N.isDataLayerSource(this.source)&&(g.dynamicDataSource=fa.clone(this.source)),0<this.originIdOf("title")&&(g.title=this.title),[2,g]}})})};n.prototype.getFeatureType=function(c){var b=this.typeIdField;if(!b||!c)return null;var h=c.attributes?c.attributes[b]:void 0;if(null==h)return null;var f=null;this.types.some(function(c){var b=c.id;if(null==b)return!1;b.toString()===h.toString()&&(f=c);return!!f});return f};n.prototype.getFieldDomain=function(c,b){return(b=
this.getFeatureType(b&&b.feature))&&(b=b.domains&&b.domains[c])&&"inherited"!==b.type?b:this._getLayerDomain(c)};n.prototype.queryFeatures=function(c,b){var h=this;void 0===c&&(c=this.createQuery());return na.all([na.create(function(c){return J(["../../tasks/operations/query"],c)}),na.create(function(c){return J(["../../tasks/support/FeatureSet"],c)})]).then(function(f){var m=f[0].executeQuery,g=f[1];return m(h.url,xa.from(c),h.layer.spatialReference,b).then(function(c){return g.fromJSON(c.data)})}).then(function(c){c&&
c.features&&c.features.forEach(function(c){c.sourceLayer=h});return c})};n.prototype.toExportImageJSON=function(){var c=this,b={id:this.id,source:N.sourceToJSON(this.source)};this.definitionExpression&&(b.definitionExpression=this.definitionExpression);var h=["renderer","labelingInfo","opacity","labelsVisible"].reduce(function(b,h){b[h]=c.originIdOf(h);return b},{});if(Object.keys(h).some(function(c){return 2<=h[c]})){var f=b.drawingInfo={};2<=h.renderer&&(f.renderer=this.renderer?this.renderer.toJSON():
null);2<=h.labelsVisible&&(f.showLabels=this.labelsVisible);this.labelsVisible&&2<=h.labelingInfo&&(f.labelingInfo=this.labelingInfo?this.labelingInfo.map(function(c){return c.write({},{origin:"service"})}):null,f.showLabels=!0);2<=h.opacity&&(f.transparency=100-100*this.opacity);this._assignDefaultSymbolColors(f.renderer)}return b};n.prototype._assignDefaultSymbolColors=function(c){this._forEachSimpleMarkerSymbols(c,function(c){c.color||"esriSMSX"!==c.style&&"esriSMSCross"!==c.style||(c.color=c.outline&&
c.outline.color?c.outline.color:[0,0,0,0])})};n.prototype._forEachSimpleMarkerSymbols=function(c,b){if(c){var h=0,f="uniqueValueInfos"in c?c.uniqueValueInfos:"classBreakInfos"in c?c.classBreakInfos:[];for(;h<f.length;h++){var g=f[h];Ia(g.symbol)&&b(g.symbol)}"symbol"in c&&Ia(c.symbol)&&b(c.symbol);"defaultSymbol"in c&&Ia(c.defaultSymbol)&&b(c.defaultSymbol)}};n.prototype._setAndNotifyLayer=function(c,b){var h=this.layer,f=this._get(c),g,m;switch(c){case "definitionExpression":g="supportsSublayerDefinitionExpression";
case "minScale":case "maxScale":case "visible":g="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":g="supportsDynamicLayers",m="supportsModification"}g&&!1===this.get("layer.capabilities.exportMap."+g)?this._logLockedError(c,"capability not available 'layer.capabilities.exportMap."+g+"'"):m&&!1===this.get("capabilities.exportMap."+m)?this._logLockedError(c,"capability not available 'capabilities.exportMap."+m+"'"):"source"===c&&
"not-loaded"!==this.loadStatus?this._logLockedError(c,"'source' can't be changed after calling sublayer.load()"):(this._set(c,b),f!==b&&h&&h.emit&&h.emit("sublayer-update",{propertyName:c}))};n.prototype._handleSublayersChange=function(c,b){var h=this;b&&(b.forEach(function(c){c.parent=null;c.layer=null}),this.handles.removeAll());c&&(c.forEach(function(c){c.parent=h;c.layer=h.layer}),this.handles.add([c.on("after-add",function(c){c=c.item;c.parent=h;c.layer=h.layer}),c.on("after-remove",function(c){c=
c.item;c.parent=null;c.layer=null}),c.on("before-changes",function(c){var b=h.get("layer.capabilities.exportMap.supportsSublayersChanges");null==b||b||(ya.error(new A("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:h,layer:h.layer})),c.preventDefault())})]))};n.prototype._logLockedError=function(c,b){ya.error(new A("sublayer:locked","Property '"+c+"' can't be changed on Sublayer from the layer '"+this.layer.id+"'",{reason:b,sublayer:this,
layer:this.layer}))};n.prototype._getLayerDomain=function(c){return(c=this.fieldsIndex.get(c))?c.domain:null};var v;b([r.property({readOnly:!0})],n.prototype,"capabilities",void 0);b([r.reader("service","capabilities",["layerDefinition.canModifyLayer"])],n.prototype,"readCapabilities",null);b([r.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:ra}}})],n.prototype,"definitionExpression",null);
b([r.property({type:[M],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],n.prototype,"fields",void 0);b([r.property({readOnly:!0,dependsOn:["fields"]})],n.prototype,"fieldsIndex",null);b([r.property({type:F.Extent,json:{read:{source:"layerDefinition.extent"}}})],n.prototype,"fullExtent",void 0);b([r.property({type:String})],n.prototype,"globalIdField",void 0);b([r.reader("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],n.prototype,"readGlobalIdFieldFromService",
null);b([r.property({type:Number,json:{write:{ignoreOrigin:!0}}})],n.prototype,"id",null);b([r.property({value:null,type:[qa],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ha}}})],n.prototype,"labelingInfo",null);b([r.writer("labelingInfo")],n.prototype,"writeLabelingInfo",null);b([r.property({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",
overridePolicy:ha}}})],n.prototype,"labelsVisible",null);b([r.property({value:null})],n.prototype,"layer",null);b([r.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:ra}}})],n.prototype,"legendEnabled",void 0);b([r.property({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],n.prototype,"listMode",null);b([r.property({type:Number,value:0,
json:{write:{enabled:!1,overridePolicy:ha}}})],n.prototype,"minScale",null);b([r.reader("minScale",["minScale","layerDefinition.minScale"])],n.prototype,"readMinScale",null);b([r.property({type:Number,value:0,json:{write:{enabled:!1,overridePolicy:ha}}})],n.prototype,"maxScale",null);b([r.reader("maxScale",["maxScale","layerDefinition.maxScale"])],n.prototype,"readMaxScale",null);b([r.property({type:String})],n.prototype,"objectIdField",void 0);b([r.reader("service","objectIdField",["layerDefinition.objectIdField",
"layerDefinition.fields"])],n.prototype,"readObjectIdFieldFromService",null);b([r.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ha}}})],n.prototype,"opacity",null);b([r.reader("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],n.prototype,"readOpacity",null);b([r.writer("opacity")],n.prototype,"writeOpacity",null);b([r.property({json:{type:Number,write:{target:"parentLayerId",allowNull:!0,overridePolicy:ha}}})],
n.prototype,"parent",void 0);b([r.writer("parent")],n.prototype,"writeParent",null);b([r.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(c,b){return!b.disablePopup}},write:{target:"disablePopup",overridePolicy:ra,writer:function(c,b,h){b[h]=!c}}}})],n.prototype,"popupEnabled",void 0);b([r.property({type:R,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:ra}}})],n.prototype,"popupTemplate",void 0);b([r.property({readOnly:!0,dependsOn:["fields",
"title"]})],n.prototype,"defaultPopupTemplate",null);b([r.property({types:w.rendererTypes,value:null,json:{write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:ha}}})],n.prototype,"renderer",null);b([r.reader("renderer",["layerDefinition.drawingInfo.renderer"])],n.prototype,"readRenderer",null);b([r.writer("renderer")],n.prototype,"writeRenderer",null);b([r.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:w.webSceneRendererTypes}})],n.prototype,"writeWebSceneRenderer",
null);b([r.property({cast:N.castSource,json:{read:{source:"layerDefinition.source",reader:N.sourceFromJSON},write:{target:"layerDefinition.source",overridePolicy:ha}}})],n.prototype,"source",null);b([r.writer("source")],n.prototype,"writeSource",null);b([r.property()],n.prototype,"sourceJSON",void 0);b([r.property({value:null,json:{type:[G.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ha}}})],n.prototype,"sublayers",null);b([r.cast("sublayers")],n.prototype,"castSublayers",null);
b([r.writer("sublayers")],n.prototype,"writeSublayers",null);b([r.property({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:ra}}})],n.prototype,"title",void 0);b([r.property({type:String})],n.prototype,"typeIdField",void 0);b([r.reader("typeIdField",["layerDefinition.typeIdField"])],n.prototype,"readTypeIdField",null);b([r.property({type:[h],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],n.prototype,"types",void 0);b([r.property({type:String,
dependsOn:["layer","source"],json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:function(){return{enabled:this._isOverridden("url")}}}}})],n.prototype,"url",null);b([r.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ha}}})],n.prototype,"visible",null);b([r.writer("visible")],n.prototype,"writeVisible",null);return n=v=b([r.subclass("esri.layers.support.Sublayer")],n)}(r.declared(E.HandleOwnerMixin(H.MultiOriginJSONMixin(ka))))})},
"esri/support/actions/ActionSlider":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(J,D,I,b,K,t){return function(g){function l(b){b=g.call(this,b)||this;b.displayValueEnabled=!1;b.max=1;b.min=0;b.step=.1;b.type="slider";b.value=null;return b}I(l,g);t=l;l.prototype.clone=function(){return new t({active:this.active,className:this.className,disabled:this.disabled,id:this.id,
indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};var t;b([K.property()],l.prototype,"displayValueEnabled",void 0);b([K.property()],l.prototype,"max",void 0);b([K.property()],l.prototype,"min",void 0);b([K.property()],l.prototype,"step",void 0);b([K.property()],l.prototype,"value",void 0);return l=t=b([K.subclass("esri.support.Action.ActionSlider")],l)}(K.declared(t))})},"esri/widgets/LayerList/ListItemPanel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Handles ../../core/Identifiable ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(J,D,I,b,K,t,g,l,F,R,w){return function(p){function t(b){b=p.call(this,b)||this;b._legend=null;b._handles=new K;b.content=null;b.image=null;b.listItem=null;b.open=!1;b.visible=!0;return b}I(t,p);t.prototype.postInitialize=function(){var b=this;this.own([l.init(this,"content",function(f){return b._createLegend(f)})])};t.prototype.destroy=function(){var b=this._legend;b&&b.destroy();this._legend=null};Object.defineProperty(t.prototype,"className",{get:function(){var b=this.image,g=this._getFirstWidget();
return this._get("className")||!b&&g?g.iconClass:""},set:function(b){void 0===b?this._clearOverride("className"):this._override("className",b)},enumerable:!0,configurable:!0});Object.defineProperty(t.prototype,"title",{get:function(){var b=this._getFirstWidget();return this._get("title")||b?b.label:""},set:function(b){void 0===b?this._clearOverride("title"):this._override("title",b)},enumerable:!0,configurable:!0});t.prototype.render=function(){return w.tsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
t.prototype._renderContent=function(b){var f=this._legend,g=this.listItem;return b?"legend"===b?g&&g.view&&g.layer&&f?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:f},f.render()):null:"string"===typeof b?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:b,innerHTML:b}):w.isWidget(b)?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:b},b.render()):b instanceof HTMLElement?w.tsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:b,bind:b,afterCreate:this._attachToNode}):null:null};t.prototype._renderContents=function(){var b=this,g=this.content;return Array.isArray(g)?g.map(function(f){return b._renderContent(f)}):this._renderContent(g)};t.prototype._getLegendOptions=function(b){if(b){var f=b.layer;b=b.view;if(f&&b)return{view:b,layerInfos:[{layer:f,title:""}]}}};
t.prototype._createLegend=function(b){var f=this;this._hasLegend(b)&&!this._legend&&g.create(function(b){J(["../Legend"],b)}).then(function(b){var g=f._handles,t=new b(f._getLegendOptions(f.listItem));f._legend=t;f.notifyChange("className");f.notifyChange("title");b=l.init(f,["listItem.view","listItem.layer"],function(){return f._updateLegend(t)});g.add(b,"legends");f.scheduleRender()})};t.prototype._hasLegend=function(b){return"legend"===b?!0:Array.isArray(b)?b.some(function(b){return"legend"===
b}):!1};t.prototype._attachToNode=function(b){b.appendChild(this)};t.prototype._updateLegend=function(b){var f=this.listItem;if(f){var g=f.layer;b.view=f.view;b.layerInfos=[{layer:g,title:null}];this.scheduleRender()}};t.prototype._getWidget=function(b){return"legend"===b?this._legend:w.isWidget(b)?b:null};t.prototype._getFirstWidget=function(){var b=this,g=this.content;if(Array.isArray(g)){var t=null;g.some(function(f){(f=b._getWidget(f))&&(t=f);return!!f});return t}return this._getWidget(g)};b([F.property({dependsOn:["content",
"image"]})],t.prototype,"className",null);b([F.property(),w.renderable()],t.prototype,"content",void 0);b([F.property()],t.prototype,"image",void 0);b([F.property()],t.prototype,"listItem",void 0);b([F.property({dependsOn:["content"]})],t.prototype,"title",null);b([F.property(),w.renderable()],t.prototype,"open",void 0);b([F.property()],t.prototype,"visible",void 0);return t=b([F.subclass("esri.widgets.LayerList.ListItemPanel")],t)}(F.declared(t.IdentifiableMixin(R)))})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["require",
"exports"],function(J,D){function I(b){if(b)return null!=b.listMode?b.listMode:void 0}function b(b){if(b)return null!=b.minScale?b.minScale:void 0}function K(b){if(b)return null!=b.maxScale?b.maxScale:void 0}Object.defineProperty(D,"__esModule",{value:!0});D.findLayerListMode=I;D.findLayerMinScale=b;D.findLayerMaxScale=K;D.findLayerVisibilityMode=function(b){if(!b)return"inherited";var g=b.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof g)return g?"independent":
"inherited";g=b.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof g?g?"independent":"inherited":null!=b.visibilityMode?b.visibilityMode:"independent"};D.getNormalizedChildLayerProperty=function(b){if(b&&"hide-children"!==b.listMode&&"wmts"!==b.type)return"group"===b.type?"layers":"sublayers"};D.canDisplayLayer=function(b){return"hide"!==I(b)};D.isLayerOutsideScaleRange=function(t,g){if(!t||isNaN(g))return!1;var l=b(t);t=K(t);l=!isNaN(l)&&0<l&&g>=l;g=!isNaN(t)&&0<t&&
g<=t;return l||g}})},"*now":function(J){J(['dojo/i18n!*preload*esri/widgets/nls/LayerList*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper dojo/i18n!../nls/common dojo/i18n!./LayerList/nls/LayerList ../core/Collection ../core/deprecate ../core/events ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ../libs/sortablejs/Sortable ./Widget ./LayerList/LayerListViewModel ./LayerList/ListItem ./support/widget".split(" "),function(J,D,I,b,K,t,g,l,F,R,w,p,T,f,A,E,fa,ka,v){function H(b){var f=
b.children;b.actionsOpen&&(b.actionsOpen=!1);f.forEach(function(c){return H(c)})}var na=l.ofType(ka),Da=p.getLogger("esri.widgets.LayerList"),r={statusIndicators:!0};return function(p){function l(c){c=p.call(this,c)||this;c._handles=new w;c._sortable=null;c._sortableNode=null;c._focusSortUid=null;c.iconClass="esri-icon-layers";c.label=g.widgetLabel;c.listItemCreatedFunction=null;c.multipleSelectionEnabled=!1;c.operationalItems=null;c.selectionEnabled=!1;c.selectedItems=new na;c.view=null;c.viewModel=
new fa;c.visibleElements=K({},r);return c}I(l,p);l.prototype.postInitialize=function(){var c=this,b=this.operationalItems;this.own(T.on(this,"operationalItems","change",function(){return c._itemsChanged(b)}),T.init(this,"selectionEnabled",function(){return c._toggleSorting()}))};l.prototype.destroy=function(){this._destroySortable();this._handles.destroy();this._handles=null};Object.defineProperty(l.prototype,"statusIndicatorsVisible",{set:function(c){F.deprecatedProperty(Da,"statusIndicatorsVisible",
{replacement:"visibleElements.statusIndicators",version:"4.15"});this.visibleElements=K({},this.visibleElements,{statusIndicators:c})},enumerable:!0,configurable:!0});l.prototype.castVisibleElements=function(c){return K({},r,c)};l.prototype.triggerAction=function(c,b){this.viewModel.triggerAction(c,b)};l.prototype.render=function(){var c=this,b,f=this._getItems(),l=this.get("viewModel.state"),f=0===f.length?v.tsx("div",{class:"esri-layer-list__no-items"},g.noItemsToDisplay):v.tsx("ul",{"aria-label":g.widgetLabel,
role:this.selectionEnabled?"listbox":void 0,afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"data-node-ref":"_sortableNode",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},f.map(function(b){return c._renderItem(b,null)})),l=(b={},b["esri-hidden"]="loading"===l,b["esri-disabled"]="disabled"===l,b);return v.tsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",l)},f)};l.prototype._destroySortable=
function(){var c=this._sortable;c&&c.destroy();this._sortable=null};l.prototype._toggleSorting=function(){var c=this,b=this._sortable,f=this._sortableNode,g=this.selectionEnabled;if(f)if(b)b.option("disabled",!g);else{var l=A.create(f,{dataIdAttr:"data-layer-uid",group:"root-layers",fallbackTolerance:4,disabled:!g,onSort:function(){return c._sortLayersToItems(l.toArray())}});this._sortable=l}};l.prototype._sortNodeCreated=function(c){this._sortableNode=c;this._toggleSorting()};l.prototype._sortLayersToItems=
function(c){var b=this.get("view.map.layers");b&&b.sort(function(b,h){b=c.indexOf(b.uid);h=c.indexOf(h.uid);return b>h?-1:b<h?1:0})};l.prototype._getItems=function(){var c=this;return this.operationalItems.toArray().filter(function(b){return c.errorsVisible||!b.error})};l.prototype._getSingleActionButton=function(c){return c.actionsSections.reduce(function(c){return c}).filter(function(c){return c&&"button"===c.type}).getItemAt(0)};l.prototype._renderItem=function(c,b){var h=this,f,l,p,r,x,w,A=this.id+
"_"+c.uid,C=A+"_actions",E=A+"__list",A=A+"__title",D=!!c.error,G=!!c.children.length&&!D,H=D?g.layerError:"",F=c.visibilityMode,I=c.children&&c.children.toArray(),n=(f={},f["esri-layer-list__list--exclusive"]="exclusive"===F,f["esri-layer-list__list--inherited"]="inherited"===F,f["esri-layer-list__list--independent"]="inherited"!==F&&"exclusive"!==F,f);f=(l={},l["esri-layer-list__item--has-children"]=G,l["esri-layer-list__item--error"]=!!D,l["esri-layer-list__item--updating"]=c.updating&&!b&&this.visibleElements.statusIndicators,
l["esri-layer-list__item--invisible"]=!c.visible,l["esri-layer-list__item--invisible-at-scale"]=!c.visibleAtCurrentScale,l["esri-layer-list__item--selectable"]=this.selectionEnabled,l);var J=this._countActions(c.actionsSections),m=c.panel;l=m&&m.open?m.render():null;var m=m&&m.visible?this._renderPanelButton(m):null,q=(p={},p["esri-layer-list__item-actions-menu-item--active"]=c.actionsOpen,p),O=c.actionsOpen?t.close:t.open,L=1===J&&this._getSingleActionButton(c);p=L?this._renderAction({item:c,action:L,
singleAction:!0}):null;p=(q=!L&&J?v.tsx("div",{key:"actions-menu-toggle","data-item":c,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",q),tabindex:"0",role:"button","aria-controls":C,"aria-label":O,title:O},v.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null)||m||p?v.tsx("div",{key:"esri-layer-list__actions-menu",class:"esri-layer-list__item-actions-menu"},m,p,q):null;C=J?this._renderActionsSections(c,
c.actionsSections,C):null;F=G?v.tsx("ul",{key:"esri-layer-list__list-items",id:E,class:this.classes("esri-layer-list__list",n),"aria-expanded":c.open?"true":"false",role:"exclusive"===F?"radiogroup":"group",hidden:c.open?null:!0},I.map(function(b){return h._renderItem(b,c)})):null;I=(r={},r["esri-layer-list__child-toggle--open"]=c.open,r);r=c.open?t.collapse:t.expand;E=G?v.tsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":c,key:"esri-layer-list__toggle-children",
class:this.classes("esri-layer-list__child-toggle",I),tabindex:"0",role:"button","aria-controls":E,"aria-label":r,title:r},v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed","esri-icon-right-triangle-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),v.tsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):
null;r=this._createLabelNode(c,b,A);D=D?v.tsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},v.tsx("span",null,H)):null;H=-1<this.selectedItems.indexOf(c);b=b?null:c.get("layer.uid");b=this.selectionEnabled?(x={bind:this,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":c,tabIndex:0,"aria-selected":H?"true":"false",role:"option","aria-labelledby":A},x["data-layer-uid"]=b,x):(w={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,
tabIndex:void 0,"aria-selected":void 0,role:void 0,"aria-labelledby":void 0},w["data-layer-uid"]=void 0,w);return v.tsx("li",K({key:c,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",f),"aria-labelledby":A},b),v.tsx("div",{key:"esri-layer-list__list-item-container",class:"esri-layer-list__item-container"},E,r,p),D,C,l,F)};l.prototype._focusListItem=function(c){var b=this._focusSortUid;c&&b&&c.dataset.layerUid===b&&(c.focus(),this._focusSortUid=
null)};l.prototype._createLabelNode=function(c,b,f){var h,l=this.selectionEnabled;b=b&&b.visibilityMode;var p=(h={},h["esri-layer-list__item-toggle-icon"]="exclusive"!==b,h["esri-layer-list__item-radio-icon"]="exclusive"===b,h["esri-icon-radio-checked"]="exclusive"===b&&c.visible,h["esri-icon-radio-unchecked"]="exclusive"===b&&!c.visible,h["esri-icon-non-visible"]="exclusive"!==b,h),r="exclusive"===b?"radio":"switch";h=c.title||g.untitledLayer;var t=c.visibleAtCurrentScale?h:h+" ("+g.layerInvisibleAtScale+
")";h=v.tsx("span",{key:"layer-title-container",id:f,title:t,"aria-label":t,class:"esri-layer-list__item-title"},h);p=v.tsx("span",{class:this.classes(p),"aria-hidden":"true"});f={bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":c,"data-parent-visibility":b,tabIndex:0,"aria-checked":c.visible?"true":"false",role:r,"aria-labelledby":f};r={bind:void 0,onclick:void 0,onkeydown:void 0,"data-item":void 0,"data-parent-visibility":void 0,tabIndex:void 0,"aria-checked":void 0,
role:void 0,"aria-labelledby":void 0};t=l?f:r;l=v.tsx("div",K({key:c,class:"esri-layer-list__item-label"},l?r:f),h,v.tsx("span",K({class:"esri-layer-list__item-toggle"},t),p));p=(f=!!c.error)?v.tsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null;return"inherited"===b||f?v.tsx("div",{key:c,class:"esri-layer-list__item-label"},p,h):l};l.prototype._renderPanelButton=function(c){var b,f,g=c.className,l=c.open,p=c.title,g=c.image||g?g:"esri-icon-default-action",
r=this._getIconImageStyles(c),l=(b={},b["esri-layer-list__item-actions-menu-item--active"]=l,b);b=(f={},f["esri-layer-list__item-action-image"]=!!r["background-image"],f);g&&(b[g]=!!g);return v.tsx("div",{key:c,bind:this,"data-panel":c,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",l),role:"button",tabindex:"0",title:p,"aria-label":p},v.tsx("span",{class:this.classes(b),styles:r}))};l.prototype._watchActionSectionChanges=function(c,
b){var h=this,f="action-section"+b;this._handles.add(c.on("change",this.scheduleRender.bind(this)),f);c.forEach(function(c){return h._renderOnActionChanges(c,b)})};l.prototype._renderOnActionChanges=function(c,b){var h=this;b="actions"+b;"toggle"===c.type?this._handles.add([T.init(c,"className image id title visible value".split(" "),function(){return h.scheduleRender()})],b):"slider"===c.type?this._handles.add([T.init(c,"className id title visible value displayValueEnabled max min step".split(" "),
function(){return h.scheduleRender()})],b):this._handles.add([T.init(c,["className","image","id","title","visible"],function(){return h.scheduleRender()})],b)};l.prototype._renderOnItemChanges=function(c){var b=this,f=c.uid,g="items"+f;this._handles.add([T.init(c,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className".split(" "),function(){return b.scheduleRender()}),c.actionsSections.on("change",function(){return b.scheduleRender()}),
c.children.on("change",function(){return b.scheduleRender()})],g);c.children.forEach(function(c){return b._renderOnItemChanges(c)});c.actionsSections.forEach(function(c){return b._watchActionSectionChanges(c,f)})};l.prototype._itemsChanged=function(c){var b=this;this._handles.removeAll();c.forEach(function(c){return b._renderOnItemChanges(c)});this.scheduleRender()};l.prototype._renderActionsSections=function(c,b,f){var h=this;b=b.toArray().map(function(b){return v.tsx("ul",{key:b,class:"esri-layer-list__item-actions-list"},
h._renderActionSection(c,b))});return v.tsx("div",{role:"group","aria-expanded":c.actionsOpen?"true":"false",key:"esri-layer-list__actions-section",id:f,class:"esri-layer-list__item-actions",hidden:c.actionsOpen?null:!0},b)};l.prototype._renderActionSection=function(b,h){var c=this;return(h&&h.toArray()).map(function(h){return c._renderAction({item:b,action:h})})};l.prototype._renderAction=function(b){var c,f,g=b.item,l=b.action;b=b.singleAction;var p=this._getIconImageStyles(l),r=l.active,t=l.className,
w=l.disabled,A=l.title,t="button"!==l.type||l.image||t?t:"esri-icon-default-action",w=(c={},c["esri-layer-list__item-actions-menu-item"]=b&&"button"===l.type,c["esri-layer-list__item-action"]=!b&&"toggle"!==l.type,c["esri-layer-list__action-toggle"]="toggle"===l.type,c["esri-layer-list__action-toggle--on"]="toggle"===l.type&&l.value,c["esri-disabled-element"]=w,c);c=(f={},f["esri-layer-list__item-action-image"]=!r&&!!p["background-image"],f["esri-icon-loading-indicator"]=r,f["esri-rotating"]=r,f);
t&&(c[t]=!0);f=v.tsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",c),styles:p});c=b?null:v.tsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},A);f=[f,c];return b?v.tsx("div",{bind:this,"data-item":g,"data-action":l,role:"button",key:l,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:w,tabindex:"0",title:A,"aria-label":A},f):v.tsx("li",{bind:this,"data-item":g,"data-action":l,key:l,onclick:this._triggerAction,
onkeydown:this._triggerAction,classes:w,tabindex:"0",role:"button",title:A,"aria-label":A},f)};l.prototype._countActions=function(b){return b.reduce(function(b,c){return b+c.length},0)};l.prototype._getIconImageStyles=function(b){b="esri.widgets.LayerList.ListItemPanel"===b.declaredClass||"esri.support.Action.ActionButton"===b.declaredClass||"esri.support.Action.ActionToggle"===b.declaredClass?b.image:null;return{"background-image":b?'url("'+b+'")':null}};l.prototype._selectionKeydown=function(b){var c=
R.eventKey(b);if(-1===["ArrowDown","ArrowUp"].indexOf(c))this._toggleSelection(b);else{b.stopPropagation();var f=this._sortable,g=-1<this.selectedItems.indexOf(b.currentTarget["data-item"]),l=f.toArray();b=l.indexOf(b.target.dataset.layerUid);if(-1!==b){if("ArrowDown"===c){var p=b+1;if(p>=l.length)return;g?(l.splice(p,0,l.splice(b,1)[0]),f.sort(l),this._sortLayersToItems(f.toArray()),this._focusSortUid=l[p]):(this._focusSortUid=l[p],this.scheduleRender())}"ArrowUp"===c&&(p=b-1,-1>=p||(g?(l.splice(p,
0,l.splice(b,1)[0]),f.sort(l),this._sortLayersToItems(f.toArray()),this._focusSortUid=l[p]):(this._focusSortUid=l[p],this.scheduleRender())))}}};l.prototype._toggleActionsOpen=function(b){var c=b.currentTarget["data-item"],f=!c.actionsOpen;f&&this.operationalItems.forEach(function(b){return H(b)});c.actionsOpen=f;b.stopPropagation()};l.prototype._triggerPanel=function(b){var c=b.currentTarget["data-panel"];c&&(c.open=!c.open);b.stopPropagation()};l.prototype._triggerAction=function(b){var c=b.currentTarget,
f=c["data-action"],c=c["data-item"];"toggle"===f.type&&(f.value=!f.value);this.triggerAction(f,c);b.stopPropagation()};l.prototype._toggleVisibility=function(b){var c=b.currentTarget,f=c.getAttribute("data-parent-visibility"),c=c["data-item"];"exclusive"===f&&c.visible||(c.visible=!c.visible);b.stopPropagation()};l.prototype._toggleChildrenClick=function(b){var c=b.currentTarget["data-item"];c.open=!c.open;b.stopPropagation()};l.prototype._toggleSelection=function(b){b.stopPropagation();var c=this.selectedItems,
f=this.multipleSelectionEnabled&&(b.metaKey||b.ctrlKey);b=b.currentTarget["data-item"];var g=-1<c.indexOf(b),l=c.length,p=g&&1===l;f?g?c.remove(b):c.add(b):l&&!p?(c.removeAll(),c.add(b)):g?c.remove(b):c.add(b)};b([f.property()],l.prototype,"iconClass",void 0);b([f.property(),v.renderable()],l.prototype,"errorsVisible",void 0);b([f.property()],l.prototype,"label",void 0);b([f.aliasOf("viewModel.listItemCreatedFunction"),v.renderable()],l.prototype,"listItemCreatedFunction",void 0);b([f.property()],
l.prototype,"multipleSelectionEnabled",void 0);b([f.aliasOf("viewModel.operationalItems"),v.renderable()],l.prototype,"operationalItems",void 0);b([f.property(),v.renderable()],l.prototype,"selectionEnabled",void 0);b([f.property(),v.renderable()],l.prototype,"selectedItems",void 0);b([f.property(),v.renderable()],l.prototype,"statusIndicatorsVisible",null);b([f.aliasOf("viewModel.view"),v.renderable()],l.prototype,"view",void 0);b([v.vmEvent("trigger-action"),f.property({type:fa}),v.renderable("viewModel.state")],
l.prototype,"viewModel",void 0);b([f.property(),v.renderable()],l.prototype,"visibleElements",void 0);b([f.cast("visibleElements")],l.prototype,"castVisibleElements",null);b([f.aliasOf("viewModel.triggerAction")],l.prototype,"triggerAction",null);b([v.accessibleHandler()],l.prototype,"_toggleActionsOpen",null);b([v.accessibleHandler()],l.prototype,"_triggerPanel",null);b([v.accessibleHandler()],l.prototype,"_triggerAction",null);b([v.accessibleHandler()],l.prototype,"_toggleVisibility",null);b([v.accessibleHandler()],
l.prototype,"_toggleChildrenClick",null);b([v.accessibleHandler()],l.prototype,"_toggleSelection",null);return l=b([f.subclass("esri.widgets.LayerList")],l)}(f.declared(E))});