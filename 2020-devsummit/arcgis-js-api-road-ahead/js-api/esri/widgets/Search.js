// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchResultRenderer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./nls/Search ../../core/accessorSupport/decorators ../Widget ./SearchViewModel ../support/widget".split(" "),function(r,d,p,k,m,c,f,g,n){return function(a){function b(b){b=a.call(this,b)||this;b.showMoreResultsOpen=!1;b.viewModel=null;return b}p(b,a);b.prototype.render=function(){var b=this,a,l=this.get("viewModel.selectedResult"),
c=this.get("viewModel.results"),l=l&&l.name||"",f=1<this._countResults(c),g=f&&c.map(function(a){return b._moreResultsList(a)}),c=f?n.tsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},n.tsx("a",{class:"esri-widget__anchor",href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?m.hideMoreResults:m.showMoreResults)):null,f=f?n.tsx("div",{key:"esri-search-renderer__more-results-container",
class:"esri-search-result-renderer__more-results-list"},g):null,g=(a={},a["esri-search-result-renderer__more-results--show-more-results"]=this.showMoreResultsOpen,a);return n.tsx("div",{class:"esri-search-result-renderer esri-widget"},n.tsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",g)},n.tsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},l),n.tsx("div",{key:"esri-search-renderer__more-results"},
c,f)))};b.prototype._showMoreResultsClick=function(b){b.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(b=this.get("viewModel.view.popup"))&&b.reposition()};b.prototype._selectResultClick=function(b){b.preventDefault();b=b.currentTarget["data-result"];this.viewModel&&this.viewModel.select(b)};b.prototype._moreResultsList=function(b){var a=this,e=b.results,c=e.length,f=!!c,g=this.get("viewModel.selectedResult"),c=1===c&&e[0]===g,g=this._getSourceName(b.source,b.sourceIndex),g=
1<this.get("viewModel.results").length&&!c?n.tsx("div",{key:"esri-search-result-renderer__header-"+b.sourceIndex,class:"esri-search-result-renderer__more-results-list-header"},g):null,e=f&&e.map(function(b,e){return a._moreResultsListItem(b,e)}),e=f&&!c?n.tsx("ul",{key:"esri-search-result-renderer__list-"+b.sourceIndex},e):null;return f?n.tsx("div",{key:"esri-search-result-renderer__results-"+b.sourceIndex},g,e):null};b.prototype._moreResultsListItem=function(b,a){var e=this.get("viewModel.selectedResult");
return b!==e?n.tsx("li",{key:"esri-search-result-renderer__list-item-"+a},n.tsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":b,onclick:this._selectResultClick,onkeydown:this._selectResultClick},b.name)):null};b.prototype._getSourceName=function(b,a){return a===g.ALL_INDEX?m.all:b.name};b.prototype._countResults=function(b){return b?b.reduce(function(b,a){return b+a.results.length},0):0};k([n.renderable(),c.property()],b.prototype,"showMoreResultsOpen",void 0);k([c.property(),
n.renderable(["viewModel.results","viewModel.selectedResult"])],b.prototype,"viewModel",void 0);k([n.accessibleHandler()],b.prototype,"_showMoreResultsClick",null);k([n.accessibleHandler()],b.prototype,"_selectResultClick",null);return b=k([c.subclass("esri.widgets.Search.SearchResultRenderer")],b)}(c.declared(f))})},"esri/widgets/Search/SearchViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper dojo/i18n!./nls/Search ../../Graphic ../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Error ../../core/Evented ../../core/geolocationUtils ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/Point ../../geometry/SpatialReference ../../portal/Portal ../../renderers/smartMapping/symbology/location ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../views/support/layerViewUtils ./LayerSearchSource ./LocatorSearchSource ./SearchSource ./support/geometryUtils ./support/locatorUtils ../support/GoTo".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w,y,z,v,x,D,C,B,H,E,G,F,I,N,R,O,M,P,S){function J(b,a){return b.hasOwnProperty(a)&&null!=b[a]&&""!==b[a]}var K=u.getLogger("esri.widgets.Search.SearchViewModel"),Q=b.ofType({key:function(b){return b.layer?"layer":"locator"},base:O,typeMap:{layer:N,locator:R}}),T=x.WGS84,V=/<(?:.|\s)*?>/g;return function(b){function a(a){a=b.call(this,a)||this;a._handles=new q;a._gotoController=null;a._searching=null;a._loadingDefaultSources=null;a.allPlaceholder=f.allPlaceholder;
a.autoNavigate=!0;a.autoSelect=!0;a.defaultSources=new Q;a.defaultSymbol=new B({url:r.toUrl(A("trident")?"../../images/search/search-symbol-32.png":"../../images/search/search-symbol-32.svg"),size:24,width:24,height:24});a.includeDefaultSources=!0;a.maxInputLength=128;a.maxResults=6;a.maxSuggestions=6;a.minSuggestCharacters=1;a.popupEnabled=!0;a.popupTemplate=new n({title:f.searchResult,content:"{Match_addr}"});a.portal=D.getDefault();a.resultGraphicEnabled=!0;a.resultGraphic=null;a.results=null;
a.selectedSuggestion=null;a.searchAllEnabled=!0;a.selectedResult=null;a.sources=new Q;a.suggestionDelay=150;a.suggestions=null;a.suggestionsEnabled=!0;a.view=null;return a}p(a,b);a.prototype.initialize=function(){var a=this;this._handles.add(y.on(this,["defaultSources","sources"],"change",function(){return a.notifyChange("allSources")}))};a.prototype.destroy=function(){this._abortGoTo();this.clearGraphics();this._loadingDefaultSources=null;this._clearLoadingDefaultSources();this._handles.destroy();
this._handles=null};Object.defineProperty(a.prototype,"activeSource",{get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"activeSourceIndex",{get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(a){void 0===a?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"allSources",{get:function(){var a=
this.sources,b=this.defaultSources,e=this.includeDefaultSources,a="function"===typeof e?e.call(null,{sources:a,defaultSources:b}):e?b.concat(a):a,b=this._get("allSources")||new Q;b.removeAll();b.addMany(a.filter(Boolean));return b},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"locationEnabled",{get:function(){return this._get("locationEnabled")||l.supported()},set:function(a){if(void 0===a)this._clearOverride("locationEnabled");else{var b=l.supported();if(a&&!b){var h=new e("locationEnabled:geolocation-unsupported",
"Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(h)}this._override("locationEnabled",a&&b)}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"placeholder",{get:function(){var a=this.activeSourceIndex,b=this.allPlaceholder,b=void 0===b?f.allPlaceholder:b;return-1===a?b:(a=this.allSources.getItemAt(a))?a.placeholder:""},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"searchTerm",{get:function(){return this._get("searchTerm")||""},set:function(a){this._set("searchTerm",
a||"");this.clearGraphics();this.selectedSuggestion&&this.selectedSuggestion.text!==a&&this._set("selectedSuggestion",null);""===a&&this._clear()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"state",{get:function(){return this._searching?"searching":this._loadingDefaultSources?"loading":0===this.allSources.length?"disabled":"ready"},enumerable:!0,configurable:!0});a.prototype.load=function(){return c(this,void 0,void 0,function(){var a=this;return m(this,function(b){this._handles.add([y.init(this,
["portal","includeDefaultSources"],function(){return a._loadPortal()}),y.init(this,["view","portal","includeDefaultSources"],function(){return a._loadDefaultSources()})]);return[2]})})};a.prototype.clear=function(){this.searchTerm=""};a.prototype.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};a.prototype.search=function(a,b){var e=this;this.emit("search-start");this.clearGraphics();var h=
this._createSuggestionForSearch(a);this._searching=a=this._whenViewAndPortalLoaded().then(function(){return e._getResultsFromSources(h,b).then(function(a){var b={activeSourceIndex:e.activeSourceIndex,searchTerm:h.text,numResults:0,numErrors:0,errors:[],results:[]};e._formatResponse(b,a,h);a=e._getFirstResult(b.results);var c=(h.location&&a?a.name:h.text).replace(V,"");e._set("searchTerm",c);(h.key&&"number"===typeof h.sourceIndex||h.location)&&e._set("selectedSuggestion",h);e._set("results",b.results);
e.emit("search-complete",b);return e._selectFirstResult(a).then(function(){return b})})}).then(function(a){e._clearSearching();return a},function(a){e._clearSearching();throw a;});this.notifyChange("state");return a};a.prototype.searchNearby=function(a){var b=this;if(!this.locationEnabled){var h=new e("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});K.error(h);return w.reject(h)}this._searching=h=l.getCurrentPosition().then(function(e){return l.positionToPoint({position:e,
view:b.view},a)}).then(function(e){return b.search(e,a)});this.notifyChange("state");h.catch(function(){}).then(function(){return b._clearSearching()});return h};a.prototype.select=function(a){var b=this;this.clearGraphics();if(!a){var h=new e("select:missing-parameter","Cannot select without a searchResult.",{searchResult:a});K.error(h);return w.reject(h)}var c=this.view,l=J(a,"sourceIndex")?a.sourceIndex:this._getSourceIndexOfResult(a),f=this.allSources.getItemAt(l);if(!f)return h=new e("select:missing-source",
"Cannot select without a source.",{source:f}),K.error(h),w.reject(h);var h=f instanceof N?this._getLayerSourcePopupTemplate(f):f.popupTemplate,n=f.resultSymbol||this._getDefaultSymbol(a),q=J(f,"resultGraphicEnabled")?f.resultGraphicEnabled:this.resultGraphicEnabled,k=J(f,"autoNavigate")?f.autoNavigate:this.autoNavigate,v=J(f,"popupEnabled")?f.popupEnabled:this.popupEnabled,A=v?h||this.popupTemplate:null,u=a.feature;if(!u)return h=new e("select:missing-feature","Cannot select without a feature.",{feature:u}),
K.error(h),w.reject(h);var d=u.attributes,y=u.geometry,m=u.layer,x=u.sourceLayer,z=M.getPointFromGeometry(y),h={layerViewQuery:this._getLayerView(u),elevationQuery:c&&t.isSome(z)?M.getPointWithElevation(z,c).catch(function(){return z}):w.resolve(z)};return w.eachAlways(h).then(function(e){var h=e.layerViewQuery.value,N=e.elevationQuery.value;n instanceof F&&(n.text=a.name);e=c&&k?b._getGoToTarget(a,f):null;return(t.isSome(e)?b._goToSearchResult(e):w.resolve()).then(function(){var e=h?u:new g({geometry:y,
symbol:n,attributes:d,layer:m,sourceLayer:x,popupTemplate:A}),k=v&&b.get("view.popup");(k=k&&e.getEffectivePopupTemplate(k.defaultPopupTemplateEnabled))&&c.popup.open({features:[e],location:N});h&&I.highlightsSupported(h)&&!k&&b._highlightFeature({graphic:e,layerView:h});!h&&q&&c&&c.graphics.push(e);b._set("selectedResult",a);b._set("resultGraphic",e);b.emit("select-result",{result:a,source:f,sourceIndex:l});return a})})};a.prototype.suggest=function(a,b,e){var h=this,c=a||this.searchTerm;this.emit("suggest-start",
{searchTerm:c});return this._suggestTimer(b,e).then(function(){return h._suggestImmediate(c,e).then(function(a){h._set("suggestions",a.results);h.emit("suggest-complete",a);return a})})};a.prototype._loadPortal=function(){var a=this.portal;this.includeDefaultSources&&a&&!a.loaded&&a.load()};a.prototype._clearLoadingDefaultSources=function(){this._loadingDefaultSources=null;this.notifyChange("state")};a.prototype._clearSearching=function(){this._searching=null;this.notifyChange("state")};a.prototype._convertHelperServices=
function(){var a=this.get("portal.helperServices.geocode");return a?a.map(function(a){if(!1!==a.placefinding&&(a=R.fromJSON(a),P.isArcGISWorldGeocoder(a.get("locator.url"))&&a.set({singleLineFieldName:"SingleLine",outFields:["Addr_type","Match_addr","StAddr","City"],placeholder:f.placeholder,defaultZoomScale:2500}),a.singleLineFieldName))return a}).filter(Boolean):[]};a.prototype._convertApplicationProperties=function(){var a=this,b=this.get("view.map.applicationProperties.viewing.search"),e=this.get("view.map");
if(!e||!b)return[];var h=b.hintText;return b.enabled?b.layers.map(function(b){var c=e.findLayerById(b.id);if(c){b=a._getLayerJSON(b);var l=N.fromJSON(b);l.placeholder=h;a._getLayer(c,b).then(function(a){l.layer=a});return l}}).filter(Boolean):[]};a.prototype._getSubLayer=function(a,b){return a&&a.allSublayers?(a=a.allSublayers.find(function(a){return a.id===b.subLayer}))?a.createFeatureLayer():w.reject():w.reject()};a.prototype._getLayer=function(a,b){var h=this;if("feature"===a.type||"scene"===a.type)return w.resolve(a);
if("map-image"===a.type)return a.load().then(function(){return h._getSubLayer(a,b).catch(function(){var b=new e("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:a});K.error(b);return null})})};a.prototype._getLayerJSON=function(a){return"function"===typeof a.toJSON?a.toJSON():a};a.prototype._updateDefaultSources=function(){var a=this.defaultSources,b=this.includeDefaultSources;a.removeAll();b&&a.addMany(this._convertApplicationProperties().concat(this._convertHelperServices()));
this.notifyChange("allSources")};a.prototype._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};a.prototype._clear=function(){this._abortGoTo();this._set("results",null);this._set("suggestions",null);this._set("selectedResult",null);this._set("selectedSuggestion",null);this.emit("search-clear")};a.prototype._closePopup=function(){var a=this.get("view.popup"),b=this.resultGraphic;if(a&&b){var e=a.selectedFeature;e&&e===b&&a.close()}};a.prototype._suggestTimer=
function(a,b){return w.after(null!=a?a:this.suggestionDelay,null,b&&b.signal)};a.prototype._createLocationForSearch=function(a){return a instanceof g?M.getPointFromGeometry(a.geometry):a instanceof v?a:Array.isArray(a)&&2===a.length?new v({longitude:a[0],latitude:a[1]}):null};a.prototype._createSuggestionForSearch=function(a){if(a&&J(a,"key")&&J(a,"text")&&J(a,"sourceIndex"))return a;var b=this._createLocationForSearch(a),e="string"===typeof a?a:this.searchTerm,h=this.selectedSuggestion,c=this.selectedResult,
l=(a=!a&&h&&c)&&h.location;return a&&h.key===c.key&&h.sourceIndex===c.sourceIndex||l?h:{location:t.unwrap(b),text:b?"":e,sourceIndex:null,key:null}};a.prototype._getFirstResult=function(a){var b=null;a&&a.some(function(a){a=a.results[0];var e=!!a;e&&(b=a);return e});return b};a.prototype._selectFirstResult=function(a){return this.autoSelect&&a?this.select(a):w.resolve()};a.prototype._suggestImmediate=function(a,b){var e=this;return this._whenViewAndPortalLoaded().then(function(){return e._getSuggestionsFromSources(a,
b)}).then(function(b){var h={activeSourceIndex:e.activeSourceIndex,searchTerm:a,numResults:0,numErrors:0,errors:[],results:[]};e._formatResponse(h,b);return h})};a.prototype._formatSourceResponse=function(a,b,e){var h=b&&b.value||[];b=b&&b.error;var c=this.allSources.getItemAt(e);b?(a.errors.push({sourceIndex:e,source:c,error:b}),a.numErrors++):(a.results.push({sourceIndex:e,source:c,results:h}),a.numResults+=h.length)};a.prototype._formatResponse=function(a,b,e){var h=this;if(b)if(-1===a.activeSourceIndex){var c=
e&&J(e,"sourceIndex")&&-1!==e.sourceIndex?e.sourceIndex:void 0;b.forEach(function(b,e){h._formatSourceResponse(a,b,void 0!==c?c:e)})}else this._formatSourceResponse(a,b[0],a.activeSourceIndex)};a.prototype._getResultsFromSources=function(a,b){var h=this,c=this.allSources,l=!a.location&&J(a,"sourceIndex")?a.sourceIndex:this.activeSourceIndex,f=[];if(!c.length)return c=new e("search:no-sources-defined","At least one source is required.",{allSources:c}),K.error(c),w.reject(c);-1===l?c.forEach(function(e,
c){f.push(h._getResultsFromSource(a,c,b))}):f.push(this._getResultsFromSource(a,l,b));return w.eachAlways(f)};a.prototype._getSuggestionsFromSources=function(a,b){var h=this,c=this.allSources,l=this.activeSourceIndex,f=[];if(!c.length)return c=new e("suggest:no-sources-defined","At least one source is required.",{allSources:c}),K.error(c),w.reject(c);-1===l?c.forEach(function(e,c){f.push(h._getSuggestionsFromSource(a,c,b))}):f.push(this._getSuggestionsFromSource(a,l,b));return w.eachAlways(f)};a.prototype._getResultsFromSource=
function(a,b,e){var h=this.allSources.getItemAt(b),c=a.location,c=void 0===c?null:c,l=this.get("view.spatialReference")||T,f=J(h,"maxResults")?h.maxResults:this.maxResults,g=h instanceof N&&J(h,"exactMatch")?h.exactMatch:!1;return h.getResults({view:this.view,sourceIndex:b,location:c,suggestResult:a,spatialReference:l,exactMatch:g,maxResults:f},e)};a.prototype._getSuggestionsFromSource=function(a,b,e){var h=this.allSources.getItemAt(b),c=J(h,"suggestionsEnabled")?h.suggestionsEnabled:this.suggestionsEnabled,
l=a.length,f=J(h,"minSuggestCharacters")?h.minSuggestCharacters:this.minSuggestCharacters;return c&&a.trim()&&l>=f?(c=this.get("view.spatialReference")||T,l=J(h,"maxSuggestions")?h.maxSuggestions:this.maxSuggestions,h.getSuggestions({view:this.view,sourceIndex:b,suggestTerm:a,spatialReference:c,maxSuggestions:l},e)):w.resolve()};a.prototype.createDefaultSymbol=function(a,b){if("point"===b)return new G({color:a.color,size:a.size,outline:{color:a.outline.color,width:a.outline.width}});if("polyline"===
b)return new E({color:a.color,width:a.width});if("polygon"===b)return new H({color:a.color,outline:{color:a.outline.color,width:a.outline.width}})};a.prototype._getLayerSourcePopupTemplate=function(a){var b=a.layer;if(b)return J(a,"popupTemplate")?a.popupTemplate:b.popupTemplate};a.prototype._getSourceIndexOfResult=function(a){var b=null;this.results.some(function(e){return e.results.some(function(h){return h===a?(b=e.sourceIndex,!0):!1})});return b};a.prototype._getGoToTarget=function(a,b){var e=
a.extent;a=a.feature;return b instanceof N?a||e:e||a};a.prototype._goToSearchResult=function(a){return c(this,void 0,void 0,function(){var b,e,h;return m(this,function(c){switch(c.label){case 0:return b=!!a,this._abortGoTo(),this._gotoController=e=w.createAbortController(),h={target:{target:a},options:{animate:b,signal:e.signal}},[4,this.callGoTo(h)];case 1:return c.sent(),this._gotoController=null,[2]}})})};a.prototype._whenViewAndPortalLoaded=function(){var a=this.includeDefaultSources,b=this.portal,
e=this.view,e=e?e.when():w.resolve(),a=b&&a?b.when():w.resolve();return w.eachAlways([e,a]).then(function(){})};a.prototype._loadDefaultSources=function(){return c(this,void 0,void 0,function(){var a,b,e=this;return m(this,function(h){switch(h.label){case 0:return this._loadingDefaultSources=b=(a=this.includeDefaultSources)?this._whenViewAndPortalLoaded():w.resolve(),this.notifyChange("state"),[4,b.catch(function(){}).then(function(){e._loadingDefaultSources===b&&(e._clearLoadingDefaultSources(),
e._updateDefaultSources())})];case 1:return h.sent(),[2]}})})};a.prototype._getDefaultSymbol=function(a){var b=this.get("view.map.basemap.id");a=t.get(a,"feature","geometry","type");return t.isSome(a)&&(b=(b=C.getSchemes({basemap:b,geometryType:a})||C.getSchemes({basemap:"topo",geometryType:a}))&&b.primaryScheme)?(b.color&&J(b,"opacity")&&(b.color.a=b.opacity),this.createDefaultSymbol(b,a)):this.defaultSymbol};a.prototype._removeHighlight=function(){this._handles.remove("highlight")};a.prototype._getLayerView=
function(a){return c(this,void 0,void 0,function(){var b,e;return m(this,function(h){switch(h.label){case 0:b=this.view;if(!a||!b)return[2,w.resolve(null)];e=a.layer;return[4,b.when()];case 1:return h.sent(),[2,b.whenLayerView(e)]}})})};a.prototype._highlightFeature=function(a){var b=a.graphic,e=b.attributes,h=b.layer.objectIdField;a=a.layerView.highlight(e&&e[h]||b);this._handles.add(a,"highlight")};a.ALL_INDEX=-1;k([z.property({readOnly:!0,dependsOn:["activeSourceIndex","allSources.length"],value:null})],
a.prototype,"activeSource",null);k([z.property({dependsOn:["allSources.length","searchAllEnabled"]})],a.prototype,"activeSourceIndex",null);k([z.property()],a.prototype,"allPlaceholder",void 0);k([z.property({dependsOn:["defaultSources.length","sources.length","includeDefaultSources"],readOnly:!0})],a.prototype,"allSources",null);k([z.property()],a.prototype,"autoNavigate",void 0);k([z.property()],a.prototype,"autoSelect",void 0);k([z.property({readOnly:!0})],a.prototype,"defaultSources",void 0);
k([z.property()],a.prototype,"defaultSymbol",void 0);k([z.property()],a.prototype,"includeDefaultSources",void 0);k([z.property()],a.prototype,"locationEnabled",null);k([z.property()],a.prototype,"maxInputLength",void 0);k([z.property()],a.prototype,"maxResults",void 0);k([z.property()],a.prototype,"maxSuggestions",void 0);k([z.property()],a.prototype,"minSuggestCharacters",void 0);k([z.property({readOnly:!0,dependsOn:["activeSourceIndex","activeSource.placeholder","allPlaceholder","allSources"]})],
a.prototype,"placeholder",null);k([z.property()],a.prototype,"popupEnabled",void 0);k([z.property({type:n})],a.prototype,"popupTemplate",void 0);k([z.property({type:D})],a.prototype,"portal",void 0);k([z.property()],a.prototype,"resultGraphicEnabled",void 0);k([z.property({readOnly:!0})],a.prototype,"resultGraphic",void 0);k([z.property({readOnly:!0})],a.prototype,"results",void 0);k([z.property({readOnly:!0})],a.prototype,"selectedSuggestion",void 0);k([z.property()],a.prototype,"searchAllEnabled",
void 0);k([z.property({readOnly:!0})],a.prototype,"selectedResult",void 0);k([z.property()],a.prototype,"searchTerm",null);k([z.property({type:Q})],a.prototype,"sources",void 0);k([z.property({readOnly:!0,dependsOn:["allSources.length"]})],a.prototype,"state",null);k([z.property()],a.prototype,"suggestionDelay",void 0);k([z.property({readOnly:!0})],a.prototype,"suggestions",void 0);k([z.property()],a.prototype,"suggestionsEnabled",void 0);k([z.property()],a.prototype,"view",void 0);k([z.property()],
a.prototype,"clear",null);return a=k([z.subclass("esri.widgets.Search.SearchViewModel")],a)}(z.declared(S.GoToMixin(h.EventedMixin(a))))})},"esri/core/geolocationUtils":function(){define("require exports ./tsSupport/assignHelper ../config ./Error ./has ./Logger ./promiseUtils ../geometry/Point ../geometry/support/webMercatorUtils ../portal/Portal ../tasks/GeometryService ../tasks/support/ProjectParameters".split(" "),function(r,d,p,k,m,c,f,g,n,a,b,e,h){function l(b,c,l){if(!c)return g.resolve(b);
var f=c.spatialReference;return f.isWGS84?g.resolve(b):f.isWebMercator?g.resolve(a.geographicToWebMercator(b)):q(l).then(function(a){if(!a)throw new m("geometry-service:missing-url","Geometry service URL is missing");a=new e({url:a});var c=new h({geometries:[b],outSR:f});return a.project(c,l).then(function(a){return a[0]})})}function q(a){if(k.geometryServiceUrl)return g.resolve(k.geometryServiceUrl);var e=b.getDefault();return e.load(a).catch(function(){}).then(function(){return e.get("helperServices.geometry.url")})}
Object.defineProperty(d,"__esModule",{value:!0});var A=f.getLogger("esri.core.geolocationUtils"),u={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};d.supported=function(){var a=c("esri-geolocation");a||A.warn("geolocation-unsupported","Geolocation unsupported.");a&&((a=c("esri-secure-context"))||A.warn("insecure-context","Geolocation requires a secure origin."));return a};d.getCurrentPosition=function(a){a||(a=u);return g.create(function(b,e){setTimeout(function(){return e(new m("geolocation:timeout",
"getting the current geolocation position timed out"))},15E3);navigator.geolocation.getCurrentPosition(b,e,a)})};d.positionToPoint=function(a,b){var e=a.position;a=a.view;var h=e&&e.coords||{},h={accuracy:h.accuracy,altitude:h.altitude,altitudeAccuracy:h.altitudeAccuracy,heading:h.heading,latitude:h.latitude,longitude:h.longitude,speed:h.speed},e=e?{coords:h,timestamp:e.timestamp}:e;e=(e=e&&e.coords)?new n({longitude:e.longitude,latitude:e.latitude,z:e.altitude||null,spatialReference:{wkid:4326}}):
null;return l(e,a,b)}})},"esri/tasks/GeometryService":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../request ../core/jsonMap ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../geometry/support/jsonUtils ./Task ./operations/generalize ./operations/lengths ./operations/offset ./operations/relation ./operations/trimExtend ./support/GeneralizeParameters ./support/LengthsParameters ./support/OffsetParameters ./support/ProjectParameters ./support/RelationParameters ./support/TrimExtendParameters".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w,y,z,v,x,D){var C=new n.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),B=b.ensureType(v);return function(b){function h(a){a=b.call(this,a)||this;a.url=null;return a}p(h,b);h.prototype.areasAndLengths=function(a,b){a=c({},this.parsedUrl.query,{f:"json"},a.toJSON());b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/areasAndLengths",b).then(function(a){return a.data})};h.prototype.autoComplete=
function(a,b,e){var h=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)});e=this._asValidOptions(a,e);return g(this.parsedUrl.path+"/autoComplete",e).then(function(a){return(a.data.geometries||[]).map(function(a){return new f.Polygon({spatialReference:h,rings:a.rings})})})};h.prototype.buffer=function(a,b){var e=c({},this.parsedUrl.query,
{f:"json"},a.toJSON()),h=a.outSpatialReference||a.geometries[0].spatialReference;a=this._asValidOptions(e,b);return g(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new f.Polygon({spatialReference:h,rings:a.rings})})})};h.prototype.convexHull=function(a,b){var h=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))});b=this._asValidOptions(a,b);return g(this.parsedUrl.path+
"/convexHull",b).then(function(a){return e.fromJSON(a.data.geometry).set({spatialReference:h})})};h.prototype.cut=function(a,b,h){var l=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),target:JSON.stringify({geometryType:e.getJsonType(a[0]),geometries:f}),cutter:JSON.stringify(b.toJSON())});h=this._asValidOptions(a,h);return g(this.parsedUrl.path+"/cut",h).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||
[]).map(function(a){return e.fromJSON(a).set({spatialReference:l})})}})};h.prototype.densify=function(a,b){var h=a.geometries[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json"},a.toJSON());b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/densify",b).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set({spatialReference:h})})})};h.prototype.difference=function(a,b,h){var l=a[0].spatialReference;a={query:c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),
geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:e.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||h)a=c({},this.requestOptions,h,a);return g(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set({spatialReference:l})})})};h.prototype.distance=function(a,b){a=c({},this.parsedUrl.query,{f:"json"},a.toJSON());b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/distance",
b).then(function(a){return(a=a.data)&&a.distance})};h.prototype.fromGeoCoordinateString=function(a,b){var e={};e.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;e.strings=JSON.stringify(a.strings);e.conversionType=C.toJSON(a.conversionType||"mgrs");e.conversionMode=a.conversionMode;a=c({},this.parsedUrl.query,{f:"json"},e);b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/fromGeoCoordinateString",b).then(function(a){return a.data.coordinates})};h.prototype.generalize=
function(a,b){a=w.from(a);var h=a.toJSON();a=l.generalizeToRESTParameters(a);a=c({},this.parsedUrl.query,{f:"json"},a);var f=h.geometries[0].spatialReference;b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/generalize",b).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set({spatialReference:f})})})};h.prototype.intersect=function(a,b,h){var l=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),
geometry:JSON.stringify({geometryType:e.getJsonType(b),geometry:b.toJSON()})});h=this._asValidOptions(a,h);return g(this.parsedUrl.path+"/intersect",h).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set({spatialReference:l})})})};h.prototype.labelPoints=function(a,b){var h=a.map(function(a){return a.toJSON()}),l=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:l.wkid?l.wkid:JSON.stringify(l.toJSON()),polygons:JSON.stringify(h)});b=this._asValidOptions(a,
b);return g(this.parsedUrl.path+"/labelPoints",b).then(function(a){return(a.data.labelPoints||[]).map(function(a){return e.fromJSON(a).set({spatialReference:l})})})};h.prototype.lengths=function(a,b){a=y.from(a);a=q.lengthsToRESTParameters(a);a=c({},this.parsedUrl.query,{f:"json"},a);b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/lengths",b).then(function(a){return a.data})};h.prototype.offset=function(a,b){a=z.from(a);var h=A.offsetToRESTParameters(a),h=c({},this.parsedUrl.query,{f:"json"},
h),l=a.geometries[0].spatialReference;a=this._asValidOptions(h,b);return g(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set({spatialReference:l})})})};h.prototype.project=function(a,b){var h=this;a=B(a);var l=c({},this.parsedUrl.query,{f:"json"},a.toJSON()),f=a.outSpatialReference,n=e.getJsonType(a.geometries[0]);a=this._asValidOptions(l,b);return g(this.parsedUrl.path+"/project",a).then(function(a){return h._decodeGeometries(a.data,
n,f)})};h.prototype.relation=function(a,b){a=x.from(a);a=u.relationToRESTParameters(a);a=c({},this.parsedUrl.query,{f:"json"},a);b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/relation",b).then(function(a){return a.data.relations})};h.prototype.reshape=function(a,b,h){var l=a.spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(l.toJSON()),target:JSON.stringify({geometryType:e.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())});h=this._asValidOptions(a,
h);return g(this.parsedUrl.path+"/reshape",h).then(function(a){return e.fromJSON(a.data.geometry).set({spatialReference:l})})};h.prototype.simplify=function(a,b){var h=this,l=a[0].spatialReference,f=c({},this.parsedUrl.query,{f:"json",sr:l.wkid?l.wkid:JSON.stringify(l.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),n=e.getJsonType(a[0]);a=this._asValidOptions(f,b);return g(this.parsedUrl.path+"/simplify",a).then(function(a){return h._decodeGeometries(a.data,n,l)})};h.prototype.toGeoCoordinateString=
function(a,b){var e={};e.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;e.coordinates=JSON.stringify(a.coordinates);e.conversionType=C.toJSON(a.conversionType||"mgrs");e.conversionMode=a.conversionMode;e.numOfDigits=a.numOfDigits;e.rounding=a.rounding;e.addSpaces=a.addSpaces;a=c({},this.parsedUrl.query,{f:"json"},e);b=this._asValidOptions(a,b);return g(this.parsedUrl.path+"/toGeoCoordinateString",b).then(function(a){return a.data.strings})};h.prototype.trimExtend=function(a,
b){a=D.from(a);var e=t.trimExtendToRESTParameters(a),e=c({},this.parsedUrl.query,{f:"json"},e),h=a.sr;a=this._asValidOptions(e,b);return g(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new f.Polyline({spatialReference:h,paths:a.paths})})})};h.prototype.union=function(a,b){var h=a[0].spatialReference;a=c({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(h.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))});b=this._asValidOptions(a,
b);return g(this.parsedUrl.path+"/union",b).then(function(a){return e.fromJSON(a.data.geometry).set({spatialReference:h})})};h.prototype._asValidOptions=function(a,b){a={query:a};if(this.requestOptions||b)a=c({},this.requestOptions,b,a);return a};h.prototype._encodeGeometries=function(a){for(var b=[],h=a.length,c=0;c<h;c++)b.push(a[c].toJSON());return{geometryType:e.getJsonType(a[0]),geometries:b}};h.prototype._decodeGeometries=function(a,b,h){var l=e.getGeometryType(b);a=a.geometries;var f=[],g=
{spatialReference:h.toJSON()};a.forEach(function(a,b){f[b]=new l(c({},a,g))});return f};h.prototype._toProjectGeometry=function(a){var b=a.spatialReference.toJSON();return a instanceof f.Extent?new f.Polygon({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:b}):new f.Polyline({paths:[[].concat(a.points)],spatialReference:b})};h.prototype._fromProjectedGeometry=function(a,b,e){return"extent"===b?(a=a.rings[0],new f.Extent(a[0][0],a[0][1],a[2][0],
a[2][1],e)):new f.Multipoint({points:a.paths[0],spatialReference:e.toJSON()})};h.UNIT_METER=9001;h.UNIT_GERMAN_METER=9031;h.UNIT_FOOT=9002;h.UNIT_SURVEY_FOOT=9003;h.UNIT_CLARKE_FOOT=9005;h.UNIT_FATHOM=9014;h.UNIT_NAUTICAL_MILE=9030;h.UNIT_SURVEY_CHAIN=9033;h.UNIT_SURVEY_LINK=9034;h.UNIT_SURVEY_MILE=9035;h.UNIT_KILOMETER=9036;h.UNIT_CLARKE_YARD=9037;h.UNIT_CLARKE_CHAIN=9038;h.UNIT_CLARKE_LINK=9039;h.UNIT_SEARS_YARD=9040;h.UNIT_SEARS_FOOT=9041;h.UNIT_SEARS_CHAIN=9042;h.UNIT_SEARS_LINK=9043;h.UNIT_BENOIT_1895A_YARD=
9050;h.UNIT_BENOIT_1895A_FOOT=9051;h.UNIT_BENOIT_1895A_CHAIN=9052;h.UNIT_BENOIT_1895A_LINK=9053;h.UNIT_BENOIT_1895B_YARD=9060;h.UNIT_BENOIT_1895B_FOOT=9061;h.UNIT_BENOIT_1895B_CHAIN=9062;h.UNIT_BENOIT_1895B_LINK=9063;h.UNIT_INDIAN_FOOT=9080;h.UNIT_INDIAN_1937_FOOT=9081;h.UNIT_INDIAN_1962_FOOT=9082;h.UNIT_INDIAN_1975_FOOT=9083;h.UNIT_INDIAN_YARD=9084;h.UNIT_INDIAN_1937_YARD=9085;h.UNIT_INDIAN_1962_YARD=9086;h.UNIT_INDIAN_1975_YARD=9087;h.UNIT_FOOT_1865=9070;h.UNIT_RADIAN=9101;h.UNIT_DEGREE=9102;h.UNIT_ARCMINUTE=
9103;h.UNIT_ARCSECOND=9104;h.UNIT_GRAD=9105;h.UNIT_GON=9106;h.UNIT_MICRORADIAN=9109;h.UNIT_ARCMINUTE_CENTESIMAL=9112;h.UNIT_ARCSECOND_CENTESIMAL=9113;h.UNIT_MIL6400=9114;h.UNIT_BRITISH_1936_FOOT=9095;h.UNIT_GOLDCOAST_FOOT=9094;h.UNIT_INTERNATIONAL_CHAIN=109003;h.UNIT_INTERNATIONAL_LINK=109004;h.UNIT_INTERNATIONAL_YARD=109001;h.UNIT_STATUTE_MILE=9093;h.UNIT_SURVEY_YARD=109002;h.UNIT_50KILOMETER_LENGTH=109030;h.UNIT_150KILOMETER_LENGTH=109031;h.UNIT_DECIMETER=109005;h.UNIT_CENTIMETER=109006;h.UNIT_MILLIMETER=
109007;h.UNIT_INTERNATIONAL_INCH=109008;h.UNIT_US_SURVEY_INCH=109009;h.UNIT_INTERNATIONAL_ROD=109010;h.UNIT_US_SURVEY_ROD=109011;h.UNIT_US_NAUTICAL_MILE=109012;h.UNIT_UK_NAUTICAL_MILE=109013;h.UNIT_SQUARE_INCHES="esriSquareInches";h.UNIT_SQUARE_FEET="esriSquareFeet";h.UNIT_SQUARE_YARDS="esriSquareYards";h.UNIT_ACRES="esriAcres";h.UNIT_SQUARE_MILES="esriSquareMiles";h.UNIT_SQUARE_MILLIMETERS="esriSquareMillimeters";h.UNIT_SQUARE_CENTIMETERS="esriSquareCentimeters";h.UNIT_SQUARE_DECIMETERS="esriSquareDecimeters";
h.UNIT_SQUARE_METERS="esriSquareMeters";h.UNIT_ARES="esriAres";h.UNIT_HECTARES="esriHectares";h.UNIT_SQUARE_KILOMETERS="esriSquareKilometers";k([a.property()],h.prototype,"url",void 0);return h=k([a.subclass("esri.tasks.GeometryService")],h)}(a.declared(h))})},"esri/tasks/operations/generalize":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,d,p,k){Object.defineProperty(d,"__esModule",{value:!0});var m=new p.default({109006:"centimeters",
9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});d.generalizeToRESTParameters=function(c){var f=c.toJSON();c=f.geometries;var g=f.deviationUnit,f={maxDeviation:f.maxDeviation};c&&c.length&&(f.geometries=JSON.stringify({geometryType:k.getJsonType(c[0]),geometries:c}),f.sr=JSON.stringify(c[0].spatialReference));m.write(g,f,"deviationUnit");return f}})},"esri/tasks/operations/lengths":function(){define(["require",
"exports","../../core/jsonMap"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});var k=new p.default({preserveShape:"preserve-shape"});d.lengthsToRESTParameters=function(d){var c=d.toJSON(),f=c.lengthUnit,g=c.geodesic,n=c.calculationType,a={};a.polylines=JSON.stringify(c.polylines);d=d.polylines[0].spatialReference;a.sr=d.wkid?d.wkid:JSON.stringify(d.toJSON());f&&(a.lengthUnit=f);g&&(a.geodesic=g);n&&(a.calculationType=k.toJSON(n));return a}})},"esri/tasks/operations/offset":function(){define(["require",
"exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,d,p,k){Object.defineProperty(d,"__esModule",{value:!0});var m=new p.default({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),c=new p.default({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});d.offsetToRESTParameters=function(f){var g=f.toJSON();f=g.geometries;var n=g.offsetHow,a=g.offsetUnit,g={bevelRatio:g.bevelRatio,
offsetDistance:g.offsetDistance};f&&f.length&&(g.geometries=JSON.stringify({geometryType:k.getJsonType(f[0]),geometries:f}),g.sr=JSON.stringify(f[0].spatialReference));n&&(g.offsetHow=m.toJSON(n));a&&(g.offsetUnit=c.toJSON(a));return g}})},"esri/tasks/operations/relation":function(){define(["require","exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(r,d,p,k){Object.defineProperty(d,"__esModule",{value:!0});var m=new p.default({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",
esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});d.relationToRESTParameters=function(c){var f=c.toJSON(),g=f.geometries1;
c=f.geometries2;var n=f.relation,f=f.relationParameter,a={};g&&g.length&&(a.geometries1=JSON.stringify({geometryType:k.getJsonType(g[0]),geometries:g}),g=g[0].spatialReference,a.sr=g.wkid?g.wkid:JSON.stringify(g));c&&0<c.length&&(a.geometries2=JSON.stringify({geometryType:k.getJsonType(c[0]),geometries:c}));n&&(a.relation=m.toJSON(n));f&&(a.relationParam=f);return a}})},"esri/tasks/operations/trimExtend":function(){define(["require","exports","../../core/jsonMap"],function(r,d,p){Object.defineProperty(d,
"__esModule",{value:!0});var k=new p.default({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});d.trimExtendToRESTParameters=function(d){d=d.toJSON();var c=d.polylines,f=d.trimExtendTo,g={};g.extendHow=k.toJSON(d.extendHow);c&&c.length&&(g.polylines=JSON.stringify(c),g.sr=JSON.stringify(c[0].spatialReference));f&&(g.trimExtendTo=JSON.stringify(f));return g}})},"esri/tasks/support/GeneralizeParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,d,p,k,m,c,f,g){r=function(f){function a(a){a=f.call(this,a)||this;a.deviationUnit=null;a.geometries=null;a.maxDeviation=null;return a}p(a,f);k([c.property({type:String,json:{write:!0}})],a.prototype,"deviationUnit",void 0);k([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return g.fromJSON(a)}):null}},write:{writer:function(a,e){e.geometries=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries",void 0);k([c.property({type:Number,json:{write:!0}})],
a.prototype,"maxDeviation",void 0);return a=k([c.subclass("esri.tasks.support.GeneralizeParameters")],a)}(c.declared(m.JSONSupport));r.from=f.default(r);return r})},"esri/tasks/support/LengthsParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),function(r,d,p,k,m,c,f,g,
n){r=function(a){function b(b){b=a.call(this,b)||this;b.calculationType=null;b.geodesic=null;b.lengthUnit=null;b.polylines=null;return b}p(b,a);k([f.property({type:String,json:{write:!0}})],b.prototype,"calculationType",void 0);k([f.property({type:Boolean,json:{write:!0}})],b.prototype,"geodesic",void 0);k([f.property({json:{write:!0}})],b.prototype,"lengthUnit",void 0);k([f.property({type:[m.Polyline],json:{read:{reader:function(a){return a?a.map(function(a){return n.fromJSON(a)}):null}},write:{writer:function(a,
b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],b.prototype,"polylines",void 0);return b=k([f.subclass("esri.tasks.support.LengthsParameters")],b)}(f.declared(c.JSONSupport));r.from=g.default(r);return r})},"esri/tasks/support/OffsetParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,d,p,k,m,c,f,g){r=function(f){function a(a){a=f.call(this,a)||this;a.bevelRatio=null;a.geometries=null;a.offsetDistance=null;a.offsetHow=null;a.offsetUnit=null;return a}p(a,f);k([c.property({type:Number,json:{write:!0}})],a.prototype,"bevelRatio",void 0);k([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return g.fromJSON(a)}):null}},write:{writer:function(a,e){e.geometries=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries",void 0);k([c.property({type:Number,
json:{write:!0}})],a.prototype,"offsetDistance",void 0);k([c.property({type:String,json:{write:!0}})],a.prototype,"offsetHow",void 0);k([c.property({type:String,json:{write:!0}})],a.prototype,"offsetUnit",void 0);return a=k([c.subclass("esri.tasks.support.OffsetParameters")],a)}(c.declared(m.JSONSupport));r.from=f.default(r);return r})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(r,d,p,k,m,c,f,g){var n=c.getLogger("esri.tasks.support.ProjectParameters");return function(a){function b(b){b=a.call(this,b)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}p(b,a);Object.defineProperty(b.prototype,"outSR",{get:function(){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){n.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});b.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:g.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};k([f.property()],b.prototype,"geometries",void 0);k([f.property({json:{read:{source:"outSR"}}})],b.prototype,"outSpatialReference",void 0);k([f.property({json:{read:!1}})],b.prototype,"outSR",null);k([f.property()],b.prototype,"transformation",void 0);k([f.property()],b.prototype,"transformForward",void 0);return b=k([f.subclass("esri.tasks.support.ProjectParameters")],b)}(f.declared(m.JSONSupport))})},"esri/tasks/support/RelationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,d,p,k,m,c,f,g){r=function(f){function a(a){a=f.call(this,a)||this;a.geometries1=null;a.geometries2=null;a.relation=null;a.relationParameter=null;return a}p(a,f);k([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return g.fromJSON(a)}):null}},write:{writer:function(a,e){e.geometries1=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries1",void 0);k([c.property({json:{read:{reader:function(a){return a?a.map(function(a){return g.fromJSON(a)}):null}},write:{writer:function(a,
e){e.geometries2=a.map(function(a){return a.toJSON()})}}}})],a.prototype,"geometries2",void 0);k([c.property({type:String,json:{write:!0}})],a.prototype,"relation",void 0);k([c.property({type:String,json:{write:!0}})],a.prototype,"relationParameter",void 0);return a=k([c.subclass("esri.tasks.support.RelationParameters")],a)}(c.declared(m.JSONSupport));r.from=f.default(r);return r})},"esri/tasks/support/TrimExtendParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils".split(" "),
function(r,d,p,k,m,c,f,g,n){r=function(a){function b(b){b=a.call(this,b)||this;b.extendHow="default-curve-extension";b.polylines=null;b.trimExtendTo=null;return b}p(b,a);k([f.property({type:String,json:{write:!0}})],b.prototype,"extendHow",void 0);k([f.property({type:[m.Polyline],json:{read:{reader:function(a){return a?a.map(function(a){return n.fromJSON(a)}):null}},write:{writer:function(a,b){b.polylines=a.map(function(a){return a.toJSON()})}}}})],b.prototype,"polylines",void 0);k([f.property({json:{read:{reader:function(a){return a?
n.fromJSON(a):null}},write:{writer:function(a,b){b.trimExtendTo=a.toJSON()}}}})],b.prototype,"trimExtendTo",void 0);return b=k([f.subclass("esri.tasks.support.TrimExtendParameters")],b)}(f.declared(c.JSONSupport));r.from=g.default(r);return r})},"esri/renderers/smartMapping/symbology/location":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../Color ./support/SymbologyBase ./support/utils".split(" "),function(r,d,p,k,m,c,f){function g(a,
b){var e="mesh"!==a.geometryType&&a.worldScale?a.view:null;switch(a.geometryType){case "point":case "multipoint":a=b.color;var h=k({},b.outline);b=b.size;return{color:new m(a),outline:{color:new m(h.color),width:h.width},size:e?f.toWorldScale(b,e):b,opacity:1};case "polyline":return a=b.width,{color:new m(b.color),width:e?f.toWorldScale(a,e):a,opacity:1};case "polygon":a=b.size;var h=b.color,c=k({},b.outline);b=b.opacity;return{color:new m(h),outline:{color:new m(c.color),width:c.width},size:e?f.toWorldScale(a,
e):a,opacity:b};case "mesh":return e=b.opacity,{color:new m(b.color),opacity:e}}}var n={default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,
255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},
polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},
opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}};return new (function(a){function b(){return a.call(this,{themeDictionary:n})||this}p(b,a);b.prototype.getSchemes=function(a){var b=this.getRawSchemes({theme:"default",basemap:a.basemap,geometryType:a.geometryType,basemapTheme:a.basemapTheme});if(b){var e=b.schemesInfo,c=b.basemapId,b=b.basemapTheme;return{primaryScheme:g(a,e.primary),secondarySchemes:e.secondary.map(function(b){return g(a,b)}).filter(Boolean),
basemapId:c,basemapTheme:b}}};b.prototype.cloneScheme=function(a){if(a)return a=k({},a),a.color&&(a.color=new m(a.color)),"outline"in a&&a.outline&&(a.outline={color:a.outline.color&&new m(a.outline.color),width:a.outline.width}),a};return b}(c))})},"esri/renderers/smartMapping/symbology/support/SymbologyBase":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/tsSupport/restHelper","./Theme"],function(r,d,p,k,m){return function(){function c(c){this.themes=
null;c=c.themeDictionary;var f=new Map,n;for(n in c)f.set(n,new m(c[n]));this.themes=f}c.prototype.getThemes=function(c){var f=[];this.themes.forEach(function(g){g.isBasemapSupported(c)&&f.push({name:g.name,label:g.label,description:g.description,basemaps:g.supportedBasemaps.slice()})});return f};c.prototype.filterSchemesByName=function(c){var f=c.name;c=k(c,["name"]);if(f){var n=this.getSchemes(c);if(n){c=null;for(var a=0,n=[n.primaryScheme].concat(n.secondarySchemes);a<n.length;a++){var b=n[a];
if(b.name.toLowerCase()===f.toLowerCase()){c=b;break}}return c}}};c.prototype.filterSchemesByTag=function(c){var f=c.includedTags,n=c.excludedTags;c=k(c,["includedTags","excludedTags"]);if(!f&&!n)return[];var a=this.getSchemes(c);if(!a)return[];var b=!(f&&f.length),e=!(n&&n.length),h=[];c=function(a){var c=b?!0:f.some(function(b){return-1<a.tags.indexOf(b)}),l=!e&&n.some(function(b){return-1<a.tags.indexOf(b)});c&&!l&&h.push(a)};for(var l=0,a=[a.primaryScheme].concat(a.secondarySchemes);l<a.length;l++)c(a[l]);
return h};c.prototype.getRawSchemes=function(c){var f=this.themes.get(c.theme);if(f)return f.getRawSchemes({basemap:c.basemap,geometryType:c.geometryType,basemapTheme:c.basemapTheme})};return c}()})},"esri/core/tsSupport/restHelper":function(){define([],function(){return function(r,d){var p={},k;for(k in r)Object.prototype.hasOwnProperty.call(r,k)&&0>d.indexOf(k)&&(p[k]=r[k]);if(null!=r&&"function"===typeof Object.getOwnPropertySymbols){var m=0;for(k=Object.getOwnPropertySymbols(r);m<k.length;m++)0>
d.indexOf(k[m])&&(p[k[m]]=r[k[m]])}return p}})},"esri/renderers/smartMapping/symbology/support/Theme":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/lang ../../../../core/maybe ../../support/utils".split(" "),function(r,d,p,k,m,c){return function(){function f(f){this.schemes=this.basemapGroups=this.supportedBasemaps=this.description=this.label=this.name=null;var g=f.label,a=f.description,b=f.schemes;this.name=f.name;this.label=g;this.description=a;this.schemes=
b;f=f.basemapGroups||c.defaultBasemapGroups;g=[];if(f)for(var e in f)g=g.concat(f[e]);this.supportedBasemaps=g;this.basemapGroups=f}f.prototype.isBasemapSupported=function(f){return(f=c.getBasemapId(f,this.supportedBasemaps))&&-1<this.supportedBasemaps.indexOf(f)?!0:!1};f.prototype.getRawSchemes=function(f){var g,a=f.basemap;g=f.basemapTheme;var b=null,e=null;a&&(b=c.getBasemapId(a,this.supportedBasemaps,!1))&&(a=c.getBasemapGroup(b),m.isSome(a)&&(e=a));!b&&g&&(b="dark"===g?"dark-gray":"gray",e=g);
b||e||(b="gray",e="light");g=b;b=e;g&&(a=c.getBasemapGroup(g,this.basemapGroups),m.isSome(a)&&(b=a));f=f.geometryType;"multipoint"===f?f="point":"mesh"===f&&(f="polygon");return{schemesInfo:k.clone((this.schemes[f]||this.schemes["default"])[b]),basemapId:g,basemapTheme:e}};return f}()})},"esri/renderers/smartMapping/support/utils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Basemap ../../../core/string ./adapters/CSVLayerAdapter ./adapters/FeatureLayerAdapter ./adapters/LayerAdapter ./adapters/PointCloudLayerAdapter ./adapters/SceneLayerAdapter ../../../support/arcadeOnDemand ../../../support/basemapUtils".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h){function l(a){return c.padStart(a,2,"0")}function q(a,b,e){if("date"===b||"number"===b){"number"===b&&(a=new Date(a));b=e?a.getFullYear():a.getUTCFullYear();var h=l((e?a.getMonth():a.getUTCMonth())+1),c=l(e?a.getDate():a.getUTCDate()),f=l(e?a.getHours():a.getUTCHours()),g=l(e?a.getMinutes():a.getUTCMinutes());a=l(e?a.getSeconds():a.getUTCSeconds());a="TIMESTAMP'"+b+"-"+h+"-"+c+" "+f+":"+g+":"+a+"'"}return a}function A(a,b){if(b instanceof Date)return"date";if("number"===
typeof b)return"number";if("string"===typeof b&&(a=a.getField(b),"\x3cnow\x3e"!==b.toLowerCase()&&a&&"date"===a.type))return"field"}Object.defineProperty(d,"__esModule",{value:!0});var u;d.defaultBasemapGroups={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]};var t=(u={},u[0]={adapter:f,type:"csv",label:"CSVLayer"},
u[2]={adapter:g,type:"feature",label:"FeatureLayer"},u[1]={adapter:g,type:"geojson",label:"GeoJSONLayer"},u[3]={adapter:b,type:"scene",label:"SceneLayer"},u[4]={adapter:a,type:"point-cloud",label:"PointCloudLayer"},u),w=[0,2,1,3,4];d.unitValueInDays={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5};var y=["integer","small-integer"],z=null;d.getLayerTypeLabels=function(a){return a.map(function(a){return t[a].label})};d.createLayerAdapter=function(a,b){void 0===
b&&(b=w);if(a instanceof n)return a;var e=null;b.some(function(b){var h=a.type===t[b].type;h&&(e=new t[b].adapter({layer:a}));return h});return e};d.getFieldsList=function(a){return k(this,void 0,void 0,function(){var b,h,c,l,f;return p(this,function(g){switch(g.label){case 0:return b=a.field,h=a.normalizationField,c=a.valueExpression,l=[],c?z?[3,2]:[4,e.loadArcade()]:[3,3];case 1:z=f=g.sent().arcadeUtils,g.label=2;case 2:l=z.extractFieldNames(c),g.label=3;case 3:return b&&l.push(b),h&&l.push(h),
[2,l]}})})};d.getNormalizationType=function(a){var b=a.normalizationType;b||(a.normalizationField?b="field":null!=a.normalizationTotal&&(b="percent-of-total"));return b};d.getDateDiffSQL=function(a,b,e,h){var c=a.hasQueryEngine;e=q(e,A(a,e),c);a=q(b,A(a,b),c);a="("+e+" - "+a+")";c&&(a="("+a+" * "+d.unitValueInDays.milliseconds+")");h=d.unitValueInDays[h];c="/";1>h&&(h=1/h,c="*");return{sqlExpression:1===h?a:"("+a+" "+c+" "+h+")",sqlWhere:null}};d.getDateType=A;d.getBasemapGroup=function(a,b){void 0===
b&&(b=d.defaultBasemapGroups);for(var e in b)if(-1<b[e].indexOf(a))return e};d.getBasemapId=function(a,b,e){void 0===e&&(e=!0);var c=null;"string"===typeof a&&-1<b.indexOf(a)?c=a:a instanceof m&&(c=h.getWellKnownBasemapId(a));return e?c||"gray":c};d.isIntegerField=function(a,b){return(a=b&&a.getField(b))&&-1<y.indexOf(a.type)};d.castIntegerFieldToFloat=function(a){return"cast("+a+" as float)"}})},"esri/renderers/smartMapping/support/adapters/CSVLayerAdapter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Error ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../statistics/support/utils ../utils ./FeatureLayerAdapter ./support/utils ../../../../tasks/support/generateRendererUtils".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l){function q(a){return"esri.tasks.support.ClassBreaksDefinition"===a.declaredClass}function A(a){return"esri.tasks.support.UniqueValueDefinition"===a.declaredClass}return function(e){function t(a){return e.call(this,a)||this}p(t,e);t.prototype._createGenerateRendererResult=function(a,b,e,g,n){return c(this,void 0,void 0,function(){var c,k,t,v,u;return m(this,function(w){switch(w.label){case 0:k=(c=a&&a.features)&&c.length;if(!k)throw new f("csv-layer-adapter:insufficient-data",
"No features are available to calculate statistics");t=null;return"percent-of-total"!==g?[3,2]:[4,h.calculateStatsFromMemory({field:b},c)];case 1:v=w.sent();t=v.sum;if(null==t)throw new f("csv-layer-adapter:invalid","invalid normalizationTotal");w.label=2;case 2:return q(n)?[4,h.getDataValues({field:b,normalizationType:g,normalizationField:e,normalizationTotal:t},c)]:[3,4];case 3:return u=w.sent().filter(function(a){return null!=a&&h.isValidNumber(a)}),[2,l.createGenerateRendererClassBreaks({definition:n,
values:u,normalizationTotal:t})];case 4:return A(n)?[4,h.getDataValues({field:b},c)]:[3,6];case 5:return u=w.sent().filter(function(a){return null!=a&&"string"===typeof a&&""!==a.trim()}),[2,l.createGenerateRendererUniqueValues(u)];case 6:return[2,void 0]}})})};t.prototype.generateRenderer=function(e,h){var c=this,l=e.classificationDefinition,f=null,g=null,n=null;q(l)?(f=l.classificationField,g=l.normalizationField,n=l.normalizationType):A(l)&&(f=l.attributeField);var k=this.layer;return b.getFieldsList({field:f,
normalizationField:g}).then(function(b){var q=k.createQuery();q.returnGeometry=!1;q.outFields=b;q.where=a.mergeWhereClauses(q.where,e.where);return k.queryFeatures(q,{signal:h}).then(function(a){return c._createGenerateRendererResult(a,f,g,n,l)})})};t.prototype.load=function(a){var b=this;a=this.layer.load(a).then(function(a){b.geometryType=a.geometryType;b.objectIdField=a.objectIdField;b.supportsSQLExpression=!0;b._hasLocalSource=!1;b.hasQueryEngine=!0});this.addResolvingPromise(a);return g.resolve(this)};
return t=k([n.subclass("esri.renderers.smartMapping.support.adapters.CSVLayerAdapter")],t)}(n.declared(e))})},"esri/renderers/smartMapping/statistics/support/utils":function(){define(["require","exports","../../../../core/Error","../../../../layers/support/fieldUtils"],function(r,d,p,k){function m(c,a){return new p(c,a)}function c(c,a){a&&(c=c?"("+c+") AND ("+a+")":a);return c}function f(c){var a=c.layer;return c.fields.filter(function(b){return!a.getField(b)})}function g(c){var a=c.layer;return c.fields.filter(function(b){b=
a.getFieldUsageInfo(b);return!b||!b.supportsStatistics})}Object.defineProperty(d,"__esModule",{value:!0});d.getSQLFilterForNormalization=function(c){var a=c.field,b=c.normalizationType;c=c.normalizationField;var e;"log"===b?e="(NOT "+a+" \x3d 0)":"field"===b&&(e="(NOT "+c+" \x3d 0)");return e};d.createError=m;d.getRangeExpr=function(f,a,b){a=null!=a?f+" \x3e\x3d "+a:"";f=null!=b?f+" \x3c\x3d "+b:"";b="";return(b=a&&f?c(a,f):a||f)?"("+b+")":""};d.verifyFieldType=function(c,a,b,e){var h=null;if(!a)h=
m(b,"'field' is not defined in the layer schema");else if(a.name===c.objectIdField||-1===e.indexOf(a.type))h=m(b,"'field' should be one of these types: "+e.join(","));return h};d.verifyNumericField=function(c,a,b){var e;a?a.name!==c.objectIdField&&k.isNumericField(a)||(e=m(b,"'field' should be one of these numeric types: "+k.numericTypes.join(","))):e=m(b,"'field' is not defined in the layer schema");return e};d.mergeWhereClauses=c;d.verifyBasicFieldValidity=function(c,a,b){var e=f({layer:c,fields:a});
if(e.length)return m(b,"Unknown fields: "+e.join(", ")+". You can only use fields defined in the layer schema");c=g({layer:c,fields:a});if(c.length)return m(b,"Unsupported fields: "+c.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")}})},"esri/renderers/smartMapping/support/adapters/FeatureLayerAdapter":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../geometry ../../../../core/arrayUtils ../../../../core/Error ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../geometry/support/quantizationUtils ../../../../geometry/support/spatialReferenceUtils ../../../../layers/support/arcgisLayerUrl ../../../../layers/support/fieldUtils ../../statistics/support/predominanceUtils ../../statistics/support/utils ../utils ./LayerAdapter ./support/utils ../../../../tasks/GenerateRendererTask ../../../../tasks/support/GenerateRendererParameters ../../../../tasks/support/QuantizationParameters ../../../../tasks/support/Query ../../../../tasks/support/StatisticDefinition ../../../../tasks/support/UniqueValueDefinition".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w,y,z,v,x,D,C,B,H,E,G){return function(v){function d(a){return v.call(this,a)||this}k(d,v);d.prototype.destroy=function(){this._hasLocalSource=null};d.prototype._isStatsSupportedOnService=function(){var b=this.layer;return!b.get("capabilities.query.supportsStatistics")||"multipatch"===this.geometryType&&!u.isHostedAgolService(b.url)&&10.5>b.version?e.reject(new a("feature-layer-adapter:not-supported","Layer does not support statistics query")):e.resolve()};
d.prototype._fetchFeaturesFromMemory=function(b,e,l){return f(this,void 0,void 0,function(){var f,g,q,n;return c(this,function(c){switch(c.label){case 0:return f=this.layer,this._hasLocalSource?[4,f.queryFeatures(e)]:[3,2];case 1:return g=c.sent(),[2,g.features];case 2:if(!b)throw new a("feature-layer-adapter:insufficient-data","view is required to fetch the features from layerView");return[4,b.whenLayerView(f)];case 3:return q=c.sent(),[4,h.whenFalseOnce(q,"updating")];case 4:return c.sent(),[4,
q.queryFeatures(e,{signal:l})];case 5:return n=c.sent(),[2,n.features]}})})};d.prototype._fetchFeaturesFromService=function(a,b){return this.layer.queryFeatures(a,{signal:b}).then(function(a){return a&&a.features})};d.prototype._fetchFeaturesForStats=function(a){var b=this;return z.getFieldsList({field:a.field,normalizationField:a.normalizationField,valueExpression:a.valueExpression}).then(function(e){return b.getSampleFeatures({sampleSize:-1,view:a.view,requiredFields:e,signal:a.signal})})};d.prototype._hasRequiredFieldsInView=
function(a,b){return f(this,void 0,void 0,function(){var e,l,f=this;return c(this,function(c){switch(c.label){case 0:return[4,b.whenLayerView(this.layer)];case 1:return e=c.sent(),[4,h.whenFalseOnce(e,"updating")];case 2:return c.sent(),l=!0,a&&a.length&&(l=a.every(function(a){a=f.getField(a);return-1<e.availableFields.indexOf(a.name)})),[2,l]}})})};d.prototype._summaryStatsFromGenRend=function(a){var b=a.normalizationType,e=a.normalizationField;return this.classBreaks({field:a.field,numClasses:5,
classificationMethod:"standard-deviation",standardDeviationInterval:.25,normalizationType:b,normalizationField:"field"===b?e:void 0,minValue:a.minValue,maxValue:a.maxValue,signal:a.signal}).then(function(a){var b,e,h;a.classBreakInfos.some(function(a){a.hasAvg&&(b=a);return!!b});b&&(h=b.maxValue-b.minValue,e=b.minValue+h/2,h*=4);return x.processSummaryStatisticsResult({min:a.minValue,max:a.maxValue,avg:e,stddev:h})})};d.prototype._getSummaryStatsQuery=function(a,b){var e=a.field,h=a.normalizationType,
c=a.normalizationField,l=a.normalizationTotal;b=this.supportsSQLExpression&&b?x.msSinceUnixEpochSQL(this,e):a.sqlExpression;var l=x.getFieldExpr({field:e,normalizationType:h,normalizationField:c,normalizationTotal:l,layer:this}),f=b||l,l=f?y.getRangeExpr(f,a.minValue,a.maxValue):null,e=y.getSQLFilterForNormalization({field:e,normalizationField:c,normalizationType:h});a=y.mergeWhereClauses(a.sqlWhere,e);a=y.mergeWhereClauses(a,l);e=this.layer.createQuery();e.where=y.mergeWhereClauses(e.where,a);e.sqlFormat=
b?"standard":null;e.outStatistics=x.statisticTypes.map(function(a){var b=new E;b.statisticType="variance"===a?"var":a;b.onStatisticField=f;b.outStatisticFieldName=a+"_value";return b});return e};d.prototype._summaryStatsFromServiceQuery=function(a,b){return f(this,void 0,void 0,function(){var e,h,l,f;return c(this,function(c){switch(c.label){case 0:return[4,this._isStatsSupportedOnService()];case 1:c.sent();if("percent-of-total"!==a.normalizationType)return[3,3];e=a;return[4,this._getNormalizationTotal(a.field,
a.normalizationType)];case 2:e.normalizationTotal=c.sent(),c.label=3;case 3:return h=this._getSummaryStatsQuery(a,b),[4,this.layer.queryFeatures(h,{signal:a.signal})];case 4:return l=c.sent(),f=x.getSummaryStatisticsFromFeatureSet(l,b),[2,x.processSummaryStatisticsResult(f)]}})})};d.prototype._summaryStatsFromClientQuery=function(b,e){return f(this,void 0,void 0,function(){var l,f,g,q,n,k,t,A,d;return c(this,function(c){switch(c.label){case 0:l=b.view;f=b.signal;if(!l)throw new a("feature-layer-adapter:insufficient-data",
"view is required to query stats from layerView");return[4,l.whenLayerView(this.layer)];case 1:return g=c.sent(),[4,h.whenFalseOnce(g,"updating")];case 2:return c.sent(),[4,z.getFieldsList({field:b.field,normalizationField:b.normalizationField,valueExpression:b.valueExpression})];case 3:return q=c.sent(),[4,this._hasRequiredFieldsInView(q,l)];case 4:return n=c.sent(),k=this._getSummaryStatsQuery(b,e),!this._hasLocalSource||n?[3,6]:[4,this.layer.queryFeatures(k,{signal:f})];case 5:return A=c.sent(),
[3,8];case 6:return[4,g.queryFeaturesJSON(k,{signal:f})];case 7:A=c.sent(),c.label=8;case 8:return t=A,d=x.getSummaryStatisticsFromFeatureSet(t,e),[2,x.processSummaryStatisticsResult(d)]}})})};d.prototype._summaryStatsFromMemory=function(b,e){return f(this,void 0,void 0,function(){var h,l,f,g,q,n,k,t,A,d,v;return c(this,function(c){switch(c.label){case 0:return h=b.field,l=b.valueExpression,f=b.view,g={field:h,valueExpression:l,normalizationField:b.normalizationField,view:f,signal:b.signal},(n=b.features)?
[3,2]:[4,this._fetchFeaturesForStats(g)];case 1:n=c.sent(),c.label=2;case 2:k=(q=n)&&q.length;if(!k)throw new a("feature-layer-adapter:insufficient-data","No features are available to calculate statistics");t=p({},b);return"percent-of-total"!==t.normalizationType?[3,4]:[4,x.calculateStatsFromMemory({field:h},q)];case 3:A=c.sent();d=A.sum;if(null==d)throw new a("feature-layer-adapter:invalid","invalid normalizationTotal");t.normalizationTotal=d;c.label=4;case 4:return[4,x.calculateStatsFromMemory(t,
q,e)];case 5:return v=c.sent(),[2,x.processSummaryStatisticsResult(v)]}})})};d.prototype._uvFromGenRenderer=function(a,b){var e=this,h=a.field,c=new G;c.attributeField=h;var l=new C;l.classificationDefinition=c;return this.generateRenderer(l,a.signal).then(function(a){var b={},c=e.getField(h);a.uniqueValues.forEach(function(a){var e=a.value;if(null==e||""===e||"string"===typeof e&&(""===e.trim()||"\x3cnull\x3e"===e.toLowerCase()))e=null;null==b[e]?b[e]={count:a.count,data:t.isNumericField(c)&&e?Number(e):
e}:b[e].count+=a.count});return{count:b}}).then(function(e){return x.createUVResult(e,b,a.returnAllCodedValues)})};d.prototype._getUVQuery=function(a){var b=a.field,e=a.sqlExpression,h="countOF"+(b||"Expr"),c=new E;c.statisticType="count";c.onStatisticField=e?"1":b;c.outStatisticFieldName=h;h=this.layer.createQuery();h.where=y.mergeWhereClauses(h.where,a.sqlWhere);h.sqlFormat=e?"standard":null;h.outStatistics=[c];h.groupByFieldsForStatistics=[b||e];return h};d.prototype._uvFromServiceQuery=function(a,
b){var e=this;return this._isStatsSupportedOnService().then(function(){return e.layer.queryFeatures(e._getUVQuery(a),{signal:a.signal})}).then(function(b){return x.getUniqueValuesFromFeatureSet(b,e,a.field,null,a.signal)}).then(function(e){return x.createUVResult(e,b,a.returnAllCodedValues)})};d.prototype._uvFromClientQuery=function(b,e){return f(this,void 0,void 0,function(){var l,f,g,q,n;return c(this,function(c){switch(c.label){case 0:l=b.view;f=b.signal;if(!l)throw new a("feature-layer-adapter:insufficient-data",
"view is required to query stats from layerView");return[4,l.whenLayerView(this.layer)];case 1:return g=c.sent(),[4,h.whenFalseOnce(g,"updating")];case 2:return c.sent(),[4,g.queryFeaturesJSON(this._getUVQuery(b),{signal:f})];case 3:return q=c.sent(),[4,x.getUniqueValuesFromFeatureSet(q,this,b.field,null,b.signal)];case 4:return n=c.sent(),[2,x.createUVResult(n,e,b.returnAllCodedValues)]}})})};d.prototype._uvFromMemory=function(a,b){return f(this,void 0,void 0,function(){var e,h,l,f,g,q,n;return c(this,
function(c){switch(c.label){case 0:e=a.field;h=a.valueExpression;l=a.view;f=a.signal;g={field:e,valueExpression:h,view:l,signal:f};if(!a.features)return[3,1];n=a.features;return[3,3];case 1:return[4,this._fetchFeaturesForStats(g)];case 2:n=c.sent(),c.label=3;case 3:return q=n,[2,x.calculateUniqueValuesFromMemory(a,q,b)]}})})};d.prototype._calcBinsSQL=function(a,b){var e=[],h=b.length;b.forEach(function(b,c){b=y.mergeWhereClauses(a+" \x3e\x3d "+b[0],a+(c===h-1?" \x3c\x3d ":" \x3c ")+b[1]);e.push("WHEN ("+
b+") THEN "+(c+1))});return["CASE",e.join(" "),"ELSE 0 END"].join(" ")};d.prototype._getNormalizationTotal=function(a,b,h){return a&&"percent-of-total"===b?this.summaryStatistics({field:a,signal:h}).then(function(a){return a.sum}):e.resolve(null)};d.prototype._getQueryParamsForExpr=function(a,b){var e=a.signal;if(!a.valueExpression&&!a.sqlExpression){var h=a.field,c=h?this.getField(h):null,c=t.isDateField(c);b={field:h,normalizationType:a.normalizationType,normalizationField:a.normalizationField,
normalizationTotal:b,layer:this};return{sqlExpression:c?x.msSinceUnixEpochSQL(this,h):x.getFieldExpr(b),sqlWhere:c?null:a.sqlWhere||y.getSQLFilterForNormalization(a),signal:e}}return{valueExpression:a.valueExpression,sqlExpression:a.sqlExpression,sqlWhere:a.sqlWhere,signal:e}};d.prototype._getDataRange=function(a,b,h){return null!=b&&null!=h?e.resolve({min:b,max:h}):this.summaryStatistics(a).then(function(a){return{min:a.min,max:a.max}})};d.prototype._histogramForExpr=function(a){var b=this;return this._getNormalizationTotal(a.field,
a.normalizationType,a.signal).then(function(e){var h=b._getQueryParamsForExpr(a,e);return b._getDataRange(h,a.minValue,a.maxValue).then(function(c){var l=c.min,f=c.max,g=a.numBins||10;c=x.getEqualIntervalBins(l,f,g);c=b._calcBinsSQL(h.sqlExpression,c);var q=new E({statisticType:"count",outStatisticFieldName:"countOFExpr",onStatisticField:"1"}),n=b.layer.createQuery();n.where=y.mergeWhereClauses(n.where,h.sqlWhere);n.sqlFormat="standard";n.outStatistics=[q];n.groupByFieldsForStatistics=[c];n.orderByFields=
[c];return b._isStatsSupportedOnService().then(function(){return b.layer.queryFeatures(n,{signal:h.signal})}).then(function(a){return x.getHistogramFromFeatureSet(a,l,f,g,e)})})})};d.prototype._histogramForField=function(b){var h=this,c=null,c=null!=b.minValue&&null!=b.maxValue?e.resolve({min:b.minValue,max:b.maxValue}):this.summaryStatistics(b).then(function(b){if(!b.count)throw new a("feature-layer-adapter:insufficient-data","Either the layer has no features or none of the features have data for the field");
return{min:b.min,max:b.max}});return c.then(function(a){return h._getBins({min:a.min,max:a.max},b.field,b.numBins,b.signal)})};d.prototype._getBins=function(a,b,e,h){void 0===e&&(e=10);var c=a.min,l=a.max,f=a.normTotal,g=a.excludeZerosExpr,q=a.intervals||x.getEqualIntervalBins(c,l,e);return this._queryBins(q,a.sqlExpr||b,g,h).then(function(a){return{bins:a.map(function(a,b){return{minValue:q[b][0],maxValue:q[b][1],count:a.value}}),minValue:c,maxValue:l,normalizationTotal:f}})};d.prototype._queryBins=
function(a,b,h,c){for(var l=this,f=[],g=a.length,q=0;q<g;q++){var n=y.mergeWhereClauses(h,y.mergeWhereClauses(b+" \x3e\x3d "+a[q][0],null!==a[q][1]?b+(q===g-1?" \x3c\x3d ":" \x3c ")+a[q][1]:""));f.push(n)}return e.eachAlways(f.map(function(a){return l.queryFeatureCount(a,c)}))};d.prototype._binParamsFromGenRend=function(a,b){var e=this,h=a.field,c=a.normalizationType,l=a.normalizationField,f=a.signal,g=y.getSQLFilterForNormalization({field:h,normalizationType:c,normalizationField:l});a=new C({classificationDefinition:x.createCBDefn({field:h,
normalizationType:c,normalizationField:l,classificationMethod:a.classificationMethod,standardDeviationInterval:a.standardDeviationInterval,breakCount:a.numBins||10}),where:y.mergeWhereClauses(g,b)});return this.generateRenderer(a,f).then(function(a){return x.generateBinParams({field:h,normalizationType:c,normalizationField:l,normalizationTotal:a.normalizationTotal,classBreaks:a.classBreaks,where:g,layer:e})})};d.prototype._histogramFromMemory=function(b){var h=this,c=b.field,l=b.normalizationType,
f=b.valueExpression,g=b.classificationMethod,q=b.minValue,n=b.maxValue,k=b.view,t=b.signal,A={field:c,valueExpression:f,normalizationField:b.normalizationField,view:k,signal:t};return(b.features?e.resolve(b.features):this._fetchFeaturesForStats(A)).then(function(A){if(!A||!A.length)throw new a("feature-layer-adapter:insufficient-data","No features are available to calculate histogram");var d=null!=q&&null!=n,v=null;g&&"equal-interval"!==g||l?(d=p({},b),d.features=A,v=h._getBinParamsFromMemory(d)):
v=d?e.resolve({min:q,max:n,source:"parameters"}):h.summaryStatistics({field:c,valueExpression:f,features:A,view:k,signal:t}).then(function(b){return b.count?{min:b.min,max:b.max}:e.reject(new a("feature-layer-adapter:insufficient-data","No features are available to calculate histogram"))});return v.then(function(a){return x.calculateHistogramFromMemory(b,a,A)})})};d.prototype._getBinParamsFromMemory=function(a){return f(this,void 0,void 0,function(){var b,e,h,l,f,g,q,n,k,t,A,d=this;return c(this,
function(c){b=a.field;e=a.valueExpression;h=a.classificationMethod;l=a.standardDeviationInterval;f=a.normalizationType;g=a.normalizationField;q=a.minValue;n=a.maxValue;k=a.features;t=a.view;A=a.signal;return[2,this._classBreaksFromMemory({field:b,valueExpression:e,normalizationType:f,normalizationField:g,classificationMethod:h,standardDeviationInterval:l,minValue:q,maxValue:n,numClasses:a.numBins,features:k,view:t,signal:A}).then(function(a){var e=a.normalizationTotal;a=a.classBreakInfos;var h=y.getSQLFilterForNormalization({field:b,
normalizationType:f,normalizationField:g});return x.generateBinParams({field:b,normalizationType:f,normalizationField:g,normalizationTotal:e,classBreaks:a,where:h,layer:d})})]})})};d.prototype._classBreaksFromGenRend=function(a){var b=a.field,e=a.normalizationType,h=a.normalizationField,c=a.normalizationTotal,l=a.signal,f=y.getSQLFilterForNormalization({field:b,normalizationType:e,normalizationField:h}),c=x.getFieldExpr({field:b,normalizationType:e,normalizationField:h,normalizationTotal:c,layer:this}),
c=y.getRangeExpr(c,a.minValue,a.maxValue),b=x.createCBDefn({field:b,normalizationType:e,normalizationField:h,classificationMethod:a.classificationMethod,standardDeviationInterval:a.standardDeviationInterval,breakCount:a.numClasses||5}),e=new C;e.classificationDefinition=b;e.where=y.mergeWhereClauses(f,c);return this.generateRenderer(e,l).then(function(b){return x.resolveCBResult(a,b)})};d.prototype._classBreaksFromInterpolation=function(a){for(var b=a.minValue,h=a.maxValue,c=a.numClasses||5,l=[],
f=(h-b)/c,g=0;g<c;g++){var q=b+g*f;l.push({minValue:q,maxValue:q+f})}l[c-1].maxValue=h;a=x.resolveCBResult(a,{classBreaks:l,normalizationTotal:a.normalizationTotal});return e.resolve(a)};d.prototype._classBreaksFromMemory=function(b){return f(this,void 0,void 0,function(){var e,h,l,f,g,q,n,k,t,A,d,v;return c(this,function(c){switch(c.label){case 0:return e=b.field,h=b.normalizationField,l=b.valueExpression,f=b.view,g=b.signal,q={field:e,valueExpression:l,normalizationField:h,view:f,signal:g},(k=b.features)?
[3,2]:[4,this._fetchFeaturesForStats(q)];case 1:k=c.sent(),c.label=2;case 2:t=(n=k)&&n.length;if(!t)throw new a("feature-layer-adapter:insufficient-data","No features are available to calculate statistics");A=p({},b);return"percent-of-total"!==A.normalizationType?[3,4]:[4,x.calculateStatsFromMemory({field:e},n)];case 3:d=c.sent();v=d.sum;if(null==v)throw new a("feature-layer-adapter:invalid","invalid normalizationTotal");A.normalizationTotal=v;c.label=4;case 4:return[2,x.calculateClassBreaksFromMemory(A,
n)]}})})};d.prototype._heatmapStatsFromMemory=function(b,e){return f(this,void 0,void 0,function(){var h,l,f,g,q,n,k,t,A,d,v,u;return c(this,function(c){switch(c.label){case 0:h=b.blurRadius;l=b.field;f=b.view;g=b.signal;q=f.state;n=q.resolution;k=q.size;t=new B.default({extent:f.extent,tolerance:n});A=new H({returnGeometry:!0,geometry:f.extent,quantizationParameters:t});if(!b.features)return[3,1];v=this._quantizeFeatures(b.features,t,f);return[3,3];case 1:return[4,this._fetchFeaturesFromMemory(f,
A,g)];case 2:v=c.sent(),c.label=3;case 3:d=v;if(!d||!d.length)return[2,{count:0,min:null,max:null,avg:null,stddev:null}];if(u=x.calculateHeatmapStats(d,h,e,l,k[0],k[1]))return[2,{count:u.count,min:u.min,max:u.max,avg:u.mean,stddev:u.stdDev}];throw new a("feature-layer-adapter:invalid","unable to calculate heatmap statistics");}})})};d.prototype._quantizeFeatures=function(a,e,h){var c=this,l=q.toQuantizationTransform(e);e=h.spatialReference;var f=h.size,n=A.isWrappable(e);h=A.getInfo(e);var k=Math.round((h.valid[1]-
h.valid[0])/l.scale[0]);return a.map(function(a){var e=new g.Point(b.unwrap(a.geometry));q.quantizePoint(l,e,e,e.hasZ,e.hasM);a.geometry=n?c._wrapPoint(e,k,f[0]):e;return a})};d.prototype._wrapPoint=function(a,b,e){0>a.x?a.x+=b:a.x>e&&(a.x-=b);return a};d.prototype.getField=function(a){void 0===a&&(a="");return this.layer.getField(a)};d.prototype.getFieldUsageInfo=function(a){return this.getField(a)?{supportsLabelingInfo:!0,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:!0,supportsStatistics:!0}:
null};d.prototype.getFieldDomain=function(a,b){return this.layer.getFieldDomain(a,b)};d.prototype.summaryStatistics=function(b){var h=this,c=b.field,c=c?this.getField(c):null,l=t.isDateField(c),f=(c=b.valueExpression||b.sqlExpression)&&!b.sqlExpression,g=b.view,g=g&&"3d"===g.type;return this._hasLocalSource||b.features||f?f||b.features||g?this._summaryStatsFromMemory(b,l):this._summaryStatsFromClientQuery(b,l):this.supportsSQLExpression||!l&&!c?(b.normalizationType&&!this.supportsSQLExpression?this._summaryStatsFromGenRend(b):
this._summaryStatsFromServiceQuery(b,l)).catch(function(){e.throwIfAborted(b.signal);return h._summaryStatsFromMemory(b,l)}):e.reject(new a("feature-layer-adapter:not-supported","Layer does not support standardized SQL expression for queries"))};d.prototype.uniqueValues=function(a){var b=this,h=a.field,c=a.valueExpression,l=a.sqlExpression,f=a.signal,g=(h?this.getField(h):null)&&this.getFieldDomain(h),q=c&&(!l||!this.supportsSQLExpression),n=(h=a.view)&&"3d"===h.type;return this._hasLocalSource||
a.features||q?q||a.features||n?this._uvFromMemory(a,g):this._uvFromClientQuery(a,g):this._uvFromServiceQuery(a,g).catch(function(h){e.throwIfAborted(f);return a.field?b._uvFromGenRenderer(a,g):h}).catch(function(){e.throwIfAborted(f);return q||a.features||n?b._uvFromMemory(a,g):b._uvFromClientQuery(a,g)})};d.prototype.histogram=function(b){var h=this,c=b.field,l=b.normalizationType,f=b.normalizationField,g=b.classificationMethod,q=b.signal,n=c?this.getField(c):null,n=t.isDateField(n),k=b.valueExpression||
b.sqlExpression,A=k&&!b.sqlExpression,d=this.supportsSQLExpression,v=!g||"equal-interval"===g,u=b.minValue,w=b.maxValue,m=null!=u&&null!=w,z=b.numBins||10;return this._hasLocalSource||b.features||A?this._histogramFromMemory(b):(k||d)&&v?k&&!d?e.reject(new a("feature-layer-adapter:not-supported","Layer does not support standardized SQL expression for queries")):this._histogramForExpr(b):n&&v?e.reject(new a("feature-layer-adapter:not-supported","Normalization and date field are not allowed when layer does not support standardized SQL expression for queries")):
l||!v?this._binParamsFromGenRend(b).then(function(e){if(!m)return h._getBins(e,c,z,q);if(u>e.max||w<e.min)throw new a("histogram:insufficient-data","Range defined by 'minValue' and 'maxValue' does not intersect available data range of the field");if(v)return h._getBins({min:u,max:w,sqlExpr:e.sqlExpr,excludeZerosExpr:e.excludeZerosExpr},c,z,q);e=x.getFieldExpr({field:c,normalizationType:l,normalizationField:f,normalizationTotal:e.normTotal,layer:h});e=y.getRangeExpr(e,u,w);return h._binParamsFromGenRend(b,
e).then(function(a){return h._getBins(a,c,z,q)})}):this._histogramForField(b)};d.prototype.classBreaks=function(a){var b=this,h=!1!==a.analyzeData,c=this._hasLocalSource||a.features||a.valueExpression;return h&&c?this._classBreaksFromMemory(a):(h?this._classBreaksFromGenRend(a):this._classBreaksFromInterpolation(a)).catch(function(){e.throwIfAborted(a.signal);return b._classBreaksFromMemory(a)})};d.prototype.queryFeatureCount=function(b,h){if(this._hasLocalSource)return e.reject(new a("feature-layer-adapter:not-supported",
"Layer does not support count query"));var c=this.layer,l=c.createQuery();l.where=y.mergeWhereClauses(l.where,b);return c.queryFeatureCount(l,{signal:h})};d.prototype.generateRenderer=function(b,h){var c=this.layer;if(this._hasLocalSource||10.1>c.version)return e.reject(new a("feature-layer-adapter:not-supported","Layer does not support generateRenderer operation (requires ArcGIS Server version 10.1+)"));var l=new D({url:c.parsedUrl.path,source:c.dynamicDataSource,gdbVersion:c.gdbVersion}),c=c.createQuery();
b.where=y.mergeWhereClauses(b.where,c.where);return l.execute(b,{signal:h})};d.prototype.heatmapStatistics=function(a){var b=this,h=a.field,c=a.fieldOffset,l=a.signal;return(h&&null==c?this.summaryStatistics({field:h,signal:l}):e.resolve(null)).then(function(e){var h=c||0;if(e){var l=e.min,f=e.max;e.count?l===f&&0===l?h=1:0>=f?h="abs":0>l&&(h=-1.01*l):h=1}return b._heatmapStatsFromMemory(a,h).then(function(a){return p({},a,{summaryStatistics:e,fieldOffset:h})})})};d.prototype.predominantCategories=
function(b){return f(this,void 0,void 0,function(){var e,h,l,f,g,q,n,k,t,A,d,v,u,m,y,x;return c(this,function(c){switch(c.label){case 0:if(!this._hasLocalSource&&!this.supportsSQLExpression)throw new a("feature-layer-adapter:not-supported","Layer does not support advanced SQL expressions and standardized queries");e=b.fields;h=b.view;l=b.signal;f=w.getArcadeForPredominantCategory(e);g=w.getSQLForPredominantCategoryName(e);return h&&this._hasLocalSource?[4,this._uvFromMemory({valueExpression:f,view:h,
signal:l})]:[3,2];case 1:return n=c.sent(),[3,4];case 2:return[4,this._uvFromServiceQuery({sqlExpression:g.expression,valueExpression:f,signal:l})];case 3:n=c.sent(),c.label=4;case 4:q=n;k=q.uniqueValueInfos;t=k.map(function(a){return a.value});A=e.filter(function(a){return-1===t.indexOf(a)});d=0;for(v=A;d<v.length;d++)u=v[d],k.push({value:u,count:0});k.sort(function(a,b){return e.indexOf(a.value)-e.indexOf(b.value)});m=0;for(y=k;m<y.length;m++)x=y[m],x.value===w.noDominantCategoryField&&(x.value=
null);return[2,{predominantCategoryInfos:k}]}})})};d.prototype.getSampleFeatures=function(a){return f(this,void 0,void 0,function(){var b,h,l,f,g,q,k,t,A,d,v,u,w,m;return c(this,function(c){switch(c.label){case 0:b=a.view,h=a.sampleSize,l=a.requiredFields,f=a.returnGeometry,g=a.signal,q=this.layer.createQuery(),k=1,q.outSpatialReference=a.spatialReference||b&&b.spatialReference,q.returnGeometry=!!f,q.outFields=l,t=[],A=!1,c.label=1;case 1:return c.trys.push([1,5,,6]),[4,this._hasRequiredFieldsInView(l,
b)];case 2:return(A=c.sent())?[4,this._fetchFeaturesFromMemory(b,q,g)]:[3,4];case 3:t=c.sent();if(t.length&&0<h&&h<=t.length)return[2,n.pickRandom(t,h,k)];c.label=4;case 4:return[3,6];case 5:return c.sent(),e.throwIfAborted(g),[3,6];case 6:return c.trys.push([6,10,,11]),this._hasLocalSource?[2,A?t:this._fetchFeaturesFromService(q,g)]:[4,this.queryFeatureCount(null,g)];case 7:d=c.sent();v=this.layer.capabilities.query.maxRecordCount;u=-1===h?d:h;u=v&&u>v?v:u;if(d<=t.length||t.length>=v)return[2,t];
w=b.extent.width/b.width/b.scale*4E5;q.maxAllowableOffset=a.resolution||w;return d<=u?[2,this._fetchFeaturesFromService(q,g)]:2E4>=d?[4,this.layer.queryObjectIds()]:[3,9];case 8:return m=c.sent(),q.objectIds=n.pickRandom(m,u,k),[2,this._fetchFeaturesFromService(q,g)];case 9:return this.layer.get("capabilities.query.supportsPagination")&&(q.num=Math.min(u,2E4)),[2,this._fetchFeaturesFromService(q,g)];case 10:return c.sent(),e.throwIfAborted(g),[2,t];case 11:return[2]}})})};d.prototype.load=function(a){var b=
this;a=this.layer.load(a).then(function(a){b.geometryType=a.geometryType;b.objectIdField=a.objectIdField;b.supportsSQLExpression=a.get("capabilities.query.supportsSqlExpression");b._hasLocalSource=!a.url&&!!a.source;b.hasQueryEngine=b._hasLocalSource;b.minScale=a.minScale;b.maxScale=a.maxScale;b.fullExtent=a.fullExtent});this.addResolvingPromise(a);return e.resolve(this)};m([l.property({constructOnly:!0})],d.prototype,"layer",void 0);return d=m([l.subclass("esri.renderers.smartMapping.support.adapters.FeatureLayerAdapter")],
d)}(l.declared(v))})},"esri/renderers/smartMapping/statistics/support/predominanceUtils":function(){define(["require","exports","../../support/utils"],function(r,d,p){function k(a){return"("+a.map(function(a){return a+" \x3e\x3d 0"}).join(" OR ")+")"}function m(a,e){var b=e.returnFieldName,c=e.defaultValue,f=e.layer,g=[];b&&c&&(e=a.map(function(a){return a+" \x3c\x3d 0"}).join(" AND "),g.push("WHEN "+e+" THEN "+c));e=function(e){var h=a.reduce(function(a,b){e!==b&&a.push(e+" \x3e "+b);return a},[]).join(" AND "),
c=f&&p.isIntegerField(f,e),c=b&&"'"+e+"'"?"'"+e+"'":c?p.castIntegerFieldToFloat(e):e;g.push("WHEN "+h+" THEN "+c)};for(var n=0;n<a.length;n++)e(a[n]);return"CASE "+g.join(" ")+" ELSE "+(c||"0")+" END"}function c(a){return a&&a.map(function(a){return'$feature["'+a+'"];'}).join("\n")+"\n"||""}function f(a,e){void 0===e&&(e=!1);a=a.map(function(a){return'"'+a+'"'});return"\n  var fieldNames \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+a.length+";\n  var maxValueField \x3d null;\n  var maxValue \x3d -Infinity;\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value \x3e 0) {\n      if(value \x3e maxValue) {\n        maxValue \x3d value;\n        maxValueField \x3d fieldNames[i];\n      }\n      else if (value \x3d\x3d maxValue) {\n        maxValueField \x3d null;\n      }\n    }\n    "+
(e?"\n  if(value !\x3d null \x26\x26 value \x3e\x3d 0) {\n    if (totalValue \x3d\x3d null) { totalValue \x3d 0; }\n    totalValue \x3d totalValue + value;\n  }\n  ":"")+"\n  }\n  "}function g(a){var b=f(a);return"\n  "+c(a)+"\n  "+b+"\n  return maxValueField;\n  "}function n(a){var b=c(a);a=a.map(function(a){return'"'+a+'"'});return"\n  "+b+"\n  var fieldNames \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+a.length+";\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value !\x3d null \x26\x26 value \x3e\x3d 0) {\n      if (totalValue \x3d\x3d null) { totalValue \x3d 0; }\n      totalValue \x3d totalValue + value;\n    }\n  }\n\n  return totalValue;\n  "}
function a(a){var b=f(a,!0);return"\n  "+c(a)+"\n  "+b+"\n\n  var strength \x3d null;\n\n  if (maxValueField !\x3d null \x26\x26 totalValue \x3e 0) {\n    strength \x3d (maxValue / totalValue) * 100;\n  }\n\n  return strength;\n  "}Object.defineProperty(d,"__esModule",{value:!0});d.noDominantCategoryField="no_dominant_category";d.getSQLForPredominantCategoryName=function(a){return{expression:m(a,{returnFieldName:!0,defaultValue:"'"+d.noDominantCategoryField+"'"})}};d.getPredominanceExpressions=function(b,
e){var h=e.join(" + "),c={sqlExpression:"("+h+")",sqlWhere:k(e)};b={sqlExpression:"(( ("+m(e,{layer:b})+") / ("+h+") ) * 100)",sqlWhere:k(e)+" AND (("+h+") \x3e 0)"};return{predominantCategory:{valueExpression:g(e)},size:{valueExpression:n(e),statisticsQuery:c,histogramQuery:c},opacity:{valueExpression:a(e),statisticsQuery:b,histogramQuery:b}}};d.getArcadeForPredominantCategory=g;d.getArcadeForPredominantCategoryValue=function(a){var b=f(a);return"\n  "+c(a)+"\n  "+b+"\n  return maxValue;\n  "};d.getArcadeForPredominantCategoryAlias=
function(a){var b=a.map(function(a){return a.fieldName}),h=c(b),b=b.map(function(a){return'"'+a+'"'});a=a.map(function(a){return a.label?'"'+a.label+'"':'"'+a.fieldName+'"'});return"\n  "+h+"\n  var fieldNames \x3d [ "+b.join(", ")+" ];\n  var fieldAliases \x3d [ "+a.join(", ")+" ];\n  var numFields \x3d "+b.length+';\n  var maxFieldAlias \x3d null;\n  var maxValue \x3d -Infinity;\n  var value, i, totalValue \x3d null;\n\n  for(i \x3d 0; i \x3c numFields; i++) {\n    value \x3d $feature[fieldNames[i]];\n\n    if(value \x3e 0) {\n      if(value \x3e maxValue) {\n        maxValue \x3d value;\n        maxFieldAlias \x3d fieldAliases[i];\n      }\n      else if (value \x3d\x3d maxValue) {\n        maxFieldAlias \x3d "Tie";\n      }\n    }\n  }\n  return maxFieldAlias;\n  '};
d.getArcadeForPredominanceMargin=function(a){var b=c(a);a=a.map(function(a){return'$feature["'+a+'"]'});return"\n  "+b+"\n  var fieldValues \x3d [ "+a.join(", ")+" ];\n  var totalValue \x3d Sum(fieldValues);\n  var order \x3d Reverse(Sort(fieldValues));\n  return IIF(totalValue \x3e 0, Round(((order[0] - order[1]) / totalValue) * 100, 2), null);\n  "};d.getArcadeForSumOfFields=n;d.getArcadeForStrengthOfPredominance=a;d.getArcadeForOrderedFields=function(a){var b=a.map(function(a){return a.fieldName}),
b=c(b);a=a.map(function(a){return'{\n    value: $feature["'+a.fieldName+'"],\n    alias: "'+(a.label||a.fieldName)+'"\n    }'});return"\n  "+b+"\n  var groups \x3d [ "+a.join(", ")+' ];\n  var numTopValues \x3d Count(groups);\n\n  function getValuesArray(arr){\n    var valuesArray \x3d []\n    for(var i in arr){\n      valuesArray[i] \x3d arr[i].value;\n    }\n    return valuesArray;\n  }\n\n  function findAliases(top5Array, fullArray){\n    var aliases \x3d [];\n    var found \x3d "";\n    for(var i in top5Array){\n      for(var k in fullArray){\n        if(top5Array[i] \x3d\x3d fullArray[k].value \x26\x26 Find(fullArray[k].alias, found) \x3d\x3d -1){\n          found +\x3d fullArray[k].alias;\n          aliases[Count(aliases)] \x3d {\n            alias: fullArray[k].alias,\n            value: top5Array[i]\n          };\n        }\n      }\n    }\n    return aliases;\n  }\n\n  function getTopGroups(groupsArray){\n    var values \x3d getValuesArray(groupsArray);\n    var top5Values \x3d IIF(Max(values) \x3e 0, Top(Reverse(Sort(values)),numTopValues), "no data");\n    var top5Aliases \x3d findAliases(top5Values,groupsArray);\n\n    if(TypeOf(top5Values) \x3d\x3d "String"){\n      return top5Values;\n    } else {\n      var content \x3d "";\n      for(var i in top5Aliases){\n        if(top5Aliases[i].value \x3e 0){\n          content +\x3d (i+1) + ". " + top5Aliases[i].alias + " (" + Text(top5Aliases[i].value, "#,###") + ")";\n          content +\x3d IIF(i \x3c numTopValues-1, TextFormatting.NewLine, "");\n        }\n      }\n    }\n\n    return content;\n  }\n\n  getTopGroups(groups);\n  '}})},
"esri/renderers/smartMapping/support/adapters/LayerAdapter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Loadable ../../../../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,c,f,g){return function(c){function a(a){return c.call(this,a)||this}p(a,c);k([g.property()],a.prototype,"geometryType",void 0);k([g.property()],
a.prototype,"objectIdField",void 0);k([g.property()],a.prototype,"supportsSQLExpression",void 0);k([g.property()],a.prototype,"hasQueryEngine",void 0);k([g.property()],a.prototype,"minScale",void 0);k([g.property()],a.prototype,"maxScale",void 0);k([g.property()],a.prototype,"fullExtent",void 0);return a=k([g.subclass("esri.renderers.smartMapping.support.adapters.LayerAdapter")],a)}(g.declared(f))})},"esri/renderers/smartMapping/support/adapters/support/utils":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/promiseUtils ../../utils ../../../../support/heatmapUtils ../../../../../support/arcadeOnDemand ../../../../../tasks/support/ClassBreaksDefinition ../../../../../tasks/support/generateRendererUtils".split(" "),
function(r,d,p,k,m,c,f,g,n,a){function b(a,b,e){b=null==b?-Infinity:b;e=null==e?Infinity:e;return a.filter(function(a){return null!=a&&x(a)&&a>=b&&a<=e})}function e(a,b){return k(this,void 0,void 0,function(){var e,h,c,l,f,q,n,k,t,A,d;return p(this,function(v){switch(v.label){case 0:return e=a.field,h="function"===typeof e,c=a.valueExpression,l=a.normalizationType,f=a.normalizationField,q=a.normalizationTotal,n=[],k=a.view,A=t=null,c?H?[3,2]:[4,g.loadArcade()]:[3,3];case 1:H=d=v.sent().arcadeUtils,
v.label=2;case 2:t=H.createFunction(c),A=k&&H.getViewInfo({viewingMode:"2d"===k.type?"map":k.viewingMode,scale:k.scale,spatialReference:k.spatialReference}),v.label=3;case 3:if(!b)return[2,n];b.forEach(function(a){var b=a.attributes,g;c?(g=H.createExecContext(a,A),g=H.executeFunction(t,g)):h?g=e.call(null,a):b&&(g=b[e]);l&&null!=g&&x(g)&&(b=b&&parseFloat(b[f]),"log"===l&&0!==g?g=Math.log(g)*Math.LOG10E:"percent-of-total"===l&&x(q)&&0!==q?g=g/q*100:"field"===l&&x(b)&&0!==b&&(g/=b));n.push(g)});return[2,
n]}})})}function h(a,b){for(var e=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,c=null,l=null,f=null,g=null,q=0;q<a.length;q++)var n=a[q],c=c+n,e=Math.min(e,n),h=Math.max(h,n);if(q=a.length){l=c/q;for(g=f=0;g<a.length;g++)n=a[g],f+=Math.pow(n-l,2);g=b?1<q?f/(q-1):0:0<q?f/q:0;f=Math.sqrt(g)}else h=e=null;return{avg:l,count:q,max:h,min:e,stddev:f,sum:c,variance:g}}function l(a){var b=a.field,e=a.classificationMethod||"equal-interval",h=a.normalizationType,c=a.normalizationField,l=new n;l.classificationField=
b;l.breakCount=a.breakCount;l.classificationMethod=e;l.standardDeviationInterval="standard-deviation"===e?a.standardDeviationInterval||1:void 0;l.normalizationType=h;l.normalizationField="field"===h?c:void 0;return l}function q(a,b){var e=b.classBreaks,h=e[0].minValue,c=e[e.length-1].maxValue,l="standard-deviation"===a.classificationMethod,f=C,e=e.map(function(a){var b=a.label;a={minValue:a.minValue,maxValue:a.maxValue,label:b};if(l&&b){var e=b.match(f).map(function(a){return+a.trim()});2===e.length?
(a.minStdDev=e[0],a.maxStdDev=e[1],0>e[0]&&0<e[1]&&(a.hasAvg=!0)):1===e.length&&(-1<b.indexOf("\x3c")?(a.minStdDev=null,a.maxStdDev=e[0]):-1<b.indexOf("\x3e")&&(a.minStdDev=e[0],a.maxStdDev=null))}return a});return{minValue:h,maxValue:c,classBreakInfos:e,normalizationTotal:b.normalizationTotal}}function A(a,b,e){b=(b-a)/e;for(var h=[],c,l=1;l<=e;l++)c=a+b,c=Number(c.toFixed(16)),h.push([a,c]),a=c;return h}function u(a){var b=a.field,e=a.normalizationType,h=a.normalizationField,l=a.normalizationTotal;
a=c.isIntegerField(a.layer,b);var f=b;"percent-of-total"===e?f="(("+(a?c.castIntegerFieldToFloat(b):b)+" / "+l+") * 100)":"log"===e?f="(log("+b+") * "+B+")":"field"===e&&(f="("+(a?c.castIntegerFieldToFloat(b):b)+" / "+h+")");return f}function t(a,b){for(var e=-1,h=a.length-1;0<=h;h--)if(b>=a[h][0]){e=h;break}return e}function w(a,b){var e;b=b.toLowerCase();if(a)for(var h in a)if(h.toLowerCase()!==b){e=a[h];break}return e}function y(a,b){var e;b=b.toLowerCase();if(a)for(var h in a)if(h.toLowerCase()===
b){e=a[h];break}return e}function z(a,b){if(b)for(var e in a)a[e].label=b[e];return{count:a}}function v(a,b,e){var h=a.count;a=[];e&&b&&"coded-value"===b.type&&b.codedValues.forEach(function(a){a=a.code;h.hasOwnProperty(a)||(h[a]={data:a,count:0})});for(var c in h)b=h[c],a.push({value:b.data,count:b.count,label:b.label});return{uniqueValueInfos:a}}function x(a){return"number"===typeof a&&!isNaN(a)&&Infinity!==a&&-Infinity!==a}Object.defineProperty(d,"__esModule",{value:!0});var D=/_value$/i,C=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,
B=Math.LOG10E;d.statisticTypes="min max avg stddev count sum variance".split(" ");var H=null;d.getSummaryStatisticsFromFeatureSet=function(a,b){a=(a=a&&a.features)&&a[0]&&a[0].attributes;var e={},h;for(h in a)e[h.replace(D,"").toLowerCase()]=a[h];e.min===e.max&&null!=e.min&&null==e.stddev&&(e.stddev=e.variance=0);b&&("min max avg stddev sum variance".split(" ").forEach(function(a){null!=e[a]&&(e[a]=Math.ceil(e[a]))}),e.min===e.max&&null!=e.min&&(e.avg=e.min,e.stddev=e.variance=0));return e};d.calculateStatsFromMemory=
function(a,c,l){return k(this,void 0,void 0,function(){var f,g;return p(this,function(q){switch(q.label){case 0:return[4,e(a,c)];case 1:return f=q.sent(),f=b(f,a.minValue,a.maxValue),g=h(f,!a.normalizationType),l&&["avg","stddev","variance"].forEach(function(a){null!=g[a]&&(g[a]=Math.ceil(g[a]))}),[2,g]}})})};d.getDataValues=e;d.processSummaryStatisticsResult=function(a){for(var b in a)-1<d.statisticTypes.indexOf(b)&&(x(a[b])||(a[b]=null));return a};d.createCBDefn=l;d.calculateHeatmapStats=function(a,
b,e,h,c,l){void 0===b&&(b=10);var g=new Float64Array(c*l),q=f.createKernel(b);b=Math.round(3*b);var n=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,t=0,A=0,d=0,v=0;e=f.createValueFunction(h,e);for(h=0;h<a.length;h++)for(var u=a[h],w=u.geometry,m=w.x-b,y=w.y-b,x=Math.max(0,m),t=Math.max(0,y),z=Math.min(l,w.y+b),w=Math.min(c,w.x+b),u=+e(u.attributes),D=t;D<z;D++)for(var p=q[D-y],C=x;C<w;C++){var t=D*c+C,B=g[t],t=g[t]+=p*q[C-m]*u,B=t-B,A=A+B,d=d+B*B;t<n&&(n=t);t>k&&(k=t);v++}return v?{mean:A/v,
stdDev:Math.sqrt((d-A*A/v)/v),min:n,max:k,mid:(k-n)/2,count:v}:{mean:0,stddev:0,min:0,max:0,mid:0,count:0}};d.calculateClassBreaksFromMemory=function(h,c){return k(this,void 0,void 0,function(){var f,g,n,k;return p(this,function(t){switch(t.label){case 0:return f=h.normalizationTotal,g=l({field:h.field,normalizationType:h.normalizationType,normalizationField:h.normalizationField,classificationMethod:h.classificationMethod,standardDeviationInterval:h.standardDeviationInterval,breakCount:h.numClasses||
5}),[4,e(h,c)];case 1:return n=t.sent(),n=b(n,h.minValue,h.maxValue),k=a.createGenerateRendererClassBreaks({definition:g,values:n,normalizationTotal:f}),[2,q(h,k)]}})})};d.resolveCBResult=q;d.getEqualIntervalBins=A;d.generateBinParams=function(a){var b=[],e=a.classBreaks,h=e[0].minValue,c=e[e.length-1].maxValue;e.forEach(function(a){b.push([a.minValue,a.maxValue])});return{min:h,max:c,intervals:b,sqlExpr:u({field:a.field,normalizationType:a.normalizationType,normalizationField:a.normalizationField,
normalizationTotal:a.normalizationTotal,layer:a.layer}),excludeZerosExpr:a.where,normTotal:a.normalizationTotal}};d.getFieldExpr=u;d.calculateHistogramFromMemory=function(a,b,h){return k(this,void 0,void 0,function(){var c,l,f,g,q,n,k,d,v,u,w;return p(this,function(m){switch(m.label){case 0:return c=b.min,l=b.max,f=b.normTotal,g=a.numBins||10,q=b.intervals||A(c,l,g),n=q.map(function(a,b){return{minValue:q[b][0],maxValue:q[b][1],count:0}}),[4,e(a,h)];case 1:k=m.sent();d=0;for(v=k;d<v.length;d++)u=
v[d],null!=u&&u>=c&&u<=l&&(w=t(q,u),-1<w&&n[w].count++);return[2,{bins:n,minValue:c,maxValue:l,normalizationTotal:f}]}})})};d.getHistogramFromFeatureSet=function(a,b,e,h,c){var l={};a&&a.features&&a.features.forEach(function(a){var b=a.attributes;a=w(b,"countOFExpr");b=y(b,"countOFExpr");0!==a&&(l[a]=b)});var f=[];A(b,e,h).forEach(function(a,b){b=(b+1).toString();f.push({minValue:a[0],maxValue:a[1],count:l.hasOwnProperty(b)?l[b]:0})});return{bins:f,minValue:b,maxValue:e,normalizationTotal:c}};d.getUniqueValuesFromFeatureSet=
function(a,b,e,h,c){var l="countOF"+(e||"Expr"),f={},g=!1;(a&&a.features).forEach(function(a){var b=a.attributes;a=y(b,l);b=e?y(b,e):w(b,l);null===b&&0===a&&(g=!0);if(null==b||"string"===typeof b&&""===b.trim())b=null;null==f[b]?f[b]={count:a,data:b}:f[b].count+=a});return e&&g?b.queryFeatureCount(e+" is NULL",c).then(function(a){f["null"].count+=a||0;return z(f,h)}).catch(function(){m.throwIfAborted(c);return z(f,h)}):m.resolve(z(f,h))};d.createUVResult=v;d.calculateUniqueValuesFromMemory=function(a,
b,h){return k(this,void 0,void 0,function(){var c,l,f,g,q;return p(this,function(n){switch(n.label){case 0:return[4,e(a,b)];case 1:c=n.sent();l={};f=0;for(g=c;f<g.length;f++){q=g[f];if(null==q||"string"===typeof q&&""===q.trim())q=null;null==l[q]?l[q]={count:1,data:q}:l[q].count++}return[2,v({count:l},h,a.returnAllCodedValues)]}})})};d.msSinceUnixEpochSQL=function(a,b){return c.getDateDiffSQL(a,new Date(0),b,"milliseconds").sqlExpression};d.isValidNumber=x})},"esri/renderers/support/heatmapUtils":function(){define(["require",
"exports","../../core/global","../../core/mathUtils"],function(r,d,p,k){function m(c,f,a,b,e){c=new Uint32Array(c*c);f="buffer"in f?f:new Float64Array(f);a="buffer"in a?new Uint32Array(a.buffer):new Uint32Array((new Uint8Array(a)).buffer);e=a.length/(e-b);for(var h=0;h<f.length;h++)c[h]=a[k.clamp(Math.floor((f[h]-b)*e),0,a.length-1)];return c.buffer}function c(c){for(var f=Math.round(3*c),a=2*c*c,b=new Float64Array(2*f+1),e=0;e<=b.length;e++)b[e]=Math.exp(-Math.pow(e-f,2)/a)/Math.sqrt(2*Math.PI)*
(c/2);return b}function f(c,f){return"function"===typeof c?c:c?"string"===typeof f?function(a){return-1*+a[c]}:function(a){return+a[c]+f}:function(){return 1}}Object.defineProperty(d,"__esModule",{value:!0});d.generateGradient=function(){if(!("document"in p))return function(){return null};var c=document.createElement("canvas"),f=c.getContext("2d");c.height=512;c.width=1;return function(a){f.clearRect(0,0,1,c.height);var b=f.createLinearGradient(0,0,0,c.height),e=0;for(a=a.colorStops;e<a.length;e++){var h=
a[e],l=h.color;b.addColorStop(Math.max(h.ratio,.001),"rgba("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+")")}f.fillStyle=b;f.fillRect(0,0,1,c.height);return f.getImageData(0,0,1,c.height).data}}();d.calculateHeatmapIntensityInfo=function(g,n,a,b){var e=n.blurRadius,h=n.fieldOffset,l=n.field;n=new Float64Array(a*b);for(var q=c(e),e=Math.round(3*e),k=Number.NEGATIVE_INFINITY,d,h=f(l,h),l=0;l<g.length;l++){var t=g[l],w=t.geometry,m=w.x-e,z=w.y-e,v=Math.max(0,m);d=Math.max(0,z);for(var x=Math.min(b,w.y+e),w=
Math.min(a,w.x+e),t=+h(t.attributes),D=d;D<x;D++)for(var p=q[D-z],B=v;B<w;B++)d=n[D*a+B]+=p*q[B-m]*t,d>k&&(k=d)}return{matrix:n.buffer,max:k}};d.drawHeatmap=function(c,f,a,b,e,h){c.canvas.width=c.canvas.height=f;c.clearRect(0,0,f,f);var l=c.getImageData(0,0,f,f);a&&b&&l.data.set(new Uint8ClampedArray(m(f,a,b,e,h)));c.putImageData(l,0,0)};d.createHeatmapImageData=m;d.createKernel=c;d.createValueFunction=f})},"esri/tasks/support/ClassBreaksDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),
function(r,d,p,k,m,c,f){var g=new m.default({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),n=new m.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.breakCount=null;b.classificationField=null;b.classificationMethod=
null;b.normalizationField=null;b.normalizationType=null;b.type="class-breaks-definition";return b}p(b,a);Object.defineProperty(b.prototype,"standardDeviationInterval",{set:function(a){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});k([c.property({json:{write:!0}})],b.prototype,"breakCount",void 0);k([c.property({json:{write:!0}})],b.prototype,"classificationField",void 0);k([c.property({type:String,json:{read:g.read,write:g.write}})],
b.prototype,"classificationMethod",void 0);k([c.property({json:{write:!0}})],b.prototype,"normalizationField",void 0);k([c.property({json:{read:n.read,write:n.write}})],b.prototype,"normalizationType",void 0);k([c.property({value:null,json:{write:!0}})],b.prototype,"standardDeviationInterval",null);k([c.property()],b.prototype,"type",void 0);return b=k([c.subclass("esri.tasks.support.ClassBreaksDefinition")],b)}(c.declared(f))})},"esri/tasks/support/ClassificationDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/Symbol ./colorRamps".split(" "),
function(r,d,p,k,m,c,f,g,n){var a=new m.default({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});return function(b){function e(){var a=null!==b&&b.apply(this,arguments)||this;a.baseSymbol=null;a.colorRamp=null;a.type=null;return a}p(e,b);k([f.property({type:g,json:{write:!0}})],e.prototype,"baseSymbol",void 0);k([f.property({types:n.types,json:{read:{reader:n.fromJSON},write:!0}})],e.prototype,"colorRamp",void 0);k([f.property({json:{read:a.read,write:a.write}})],
e.prototype,"type",void 0);return e=k([f.subclass("esri.tasks.support.ClassificationDefinition")],e)}(f.declared(c.JSONSupport))})},"esri/tasks/support/generateRendererUtils":function(){define(["require","exports"],function(r,d){function p(b){var e=b.definition,l=e.classificationMethod,f=e.breakCount,d=e.normalizationType,u=[],t=b.values;if(0===t.length)return[];var t=t.sort(function(a,b){return a-b}),w=t[0];b=t[t.length-1];if("equal-interval"===l)if(t.length>=f){t=(b-w)/f;l=w;for(e=1;e<f;e++){var y=
Number((w+e*t).toFixed(6));u.push({minValue:l,maxValue:y,label:k(l,y,d)});l=y}u.push({minValue:l,maxValue:b,label:k(l,b,d)})}else t.forEach(function(a){u.push({minValue:a,maxValue:a,label:k(a,a,d)})});else if("natural-breaks"===l){for(var t=m(t),z=c(t.uniqueValues,t.valueFrequency,f),l=w,e=1;e<f;e++)t.uniqueValues.length>e&&(y=Number(t.uniqueValues[z[e]].toFixed(6)),u.push({minValue:l,maxValue:y,label:k(l,y,d)}),l=y);u.push({minValue:l,maxValue:b,label:k(l,b,d)})}else if("quantile"===l)if(t.length>=
f&&w!==b){l=w;w=Math.ceil(t.length/f);y=0;for(e=1;e<f;e++)z=w+y-1,z>t.length&&(z=t.length-1),0>z&&(z=0),u.push({minValue:l,maxValue:t[z],label:k(l,t[z],d)}),l=t[z],y+=w,w=Math.ceil((t.length-y)/(f-e));u.push({minValue:l,maxValue:b,label:k(l,b,d)})}else for(l=-1,e=0;e<t.length;e++)y=t[e],y!==l&&(l=y,u.push({minValue:l,maxValue:y,label:k(l,y,d)}),l=y);else if("standard-deviation"===l)if(z=n(t),l=a(t,z),0===l)u.push({minValue:t[0],maxValue:t[0],label:k(t[0],t[0],d)});else{for(var t=g(w,b,f,z,l),t=t*
l,v=0,l=w,e=f;1<=e;e--)w=Number((z-(e-.5)*t).toFixed(6)),u.push({minValue:l,maxValue:w,label:k(l,w,d)}),l=w,v++;y=Number((z+.5*t).toFixed(6));u.push({minValue:l,maxValue:y,label:k(l,y,d)});l=y;v++;for(e=1;e<=f;e++)y=v===2*f?b:Number((z+(e+.5)*t).toFixed(6)),u.push({minValue:l,maxValue:y,label:k(l,y,d)}),l=y,v++}return u}function k(a,b,c){var e=null;return e=a===b?c&&"percent-of-total"===c?a+"%":a.toString():c&&"percent-of-total"===c?a+"% - "+b+"%":a+" - "+b}function m(a){for(var b=[],e=[],c=Number.MIN_VALUE,
f=1,g=-1,k=0;k<a.length;k++){var n=a[k];n===c?(f++,e[g]=f):null!==n&&(b.push(n),c=n,f=1,e.push(f),g++)}return{uniqueValues:b,valueFrequency:e}}function c(a,h,c){var e=a.length,l=[];c>e&&(c=e);for(var g=0;g<c;g++)l.push(Math.round(g*e/c-1));l.push(e-1);for(var g=f(l,a,h,c),e=g.mean,g=g.sdcm,k=c,n=0,d=0,m=0,v=0,x=!0,D=0;2>D&&x;D++){0===D&&(x=!1);for(var p=0;p<k-1;p++)for(;l[p+1]+1!==l[p+2];)if(l[p+1]+=1,n=b(p,l,a,h),m=n.sbMean,n=n.sbSdcm,d=b(p+1,l,a,h),v=d.sbMean,d=d.sbSdcm,n+d<g[p]+g[p+1])g[p]=n,g[p+
1]=d,e[p]=m,e[p+1]=v,x=!0;else{--l[p+1];break}for(p=k-1;0<p;p--)for(;l[p]!==l[p-1]+1;)if(--l[p],n=b(p-1,l,a,h),m=n.sbMean,n=n.sbSdcm,d=b(p,l,a,h),v=d.sbMean,d=d.sbSdcm,n+d<g[p-1]+g[p])g[p-1]=n,g[p]=d,e[p-1]=m,e[p]=v,x=!0;else{l[p]+=1;break}}x&&(g=f(l,a,h,c));return l}function f(a,h,c,f){for(var e=[],l=[],g=[],q=0,n=[],k=[],d=0;d<f;d++){var m=b(d,a,h,c);n.push(m.sbMean);k.push(m.sbSdcm);q+=k[d]}for(var p=q,C=!0;C||q<p;){C=!1;e=[];for(d=0;d<f;d++)e.push(a[d]);for(d=0;d<f;d++)for(g=a[d]+1;g<=a[d+1];g++)if(l=
h[g],0<d&&g!==a[d+1]&&Math.abs(l-n[d])>Math.abs(l-n[d-1]))a[d]=g;else if(d<f-1&&a[d]!==g-1&&Math.abs(l-n[d])>Math.abs(l-n[d+1])){a[d+1]=g-1;break}p=q;q=0;l=[];g=[];for(d=0;d<f;d++)l.push(n[d]),g.push(k[d]),m=b(d,a,h,c),n[d]=m.sbMean,k[d]=m.sbSdcm,q+=k[d]}if(q>p){for(d=0;d<f;d++)a[d]=e[d],n[d]=l[d],k[d]=g[d];q=p}return{mean:n,sdcm:k}}function g(a,b,c,f,g){a=Math.max(f-a,b-f)/g/c;return 1<=a?1:.5<=a?.5:.25}function n(a){for(var b=0,e=0;e<a.length;e++)b+=a[e];return b/=a.length}function a(a,b){for(var e=
0,h=0;h<a.length;h++)var c=a[h],e=e+(c-b)*(c-b);e/=a.length;return Math.sqrt(e)}function b(a,b,c,f){for(var e=0,h=0,l=b[a]+1;l<=b[a+1];l++)var g=f[l],e=e+c[l]*g,h=h+g;0>=h&&console.log("Exception in Natural Breaks calculation");e/=h;h=0;for(l=b[a]+1;l<=b[a+1];l++)h+=f[l]*Math.pow(c[l]-e,2);return{sbMean:e,sbSdcm:h}}Object.defineProperty(d,"__esModule",{value:!0});d.createGenerateRendererUniqueValues=function(a){a=m(a);for(var b=[],e=a.uniqueValues.length,c=0;c<e;c++){var f=a.uniqueValues[c];b.push({value:f,
count:a.valueFrequency[c],label:f.toString()})}return{uniqueValues:b}};d.createGenerateRendererClassBreaks=function(a){var b=a.normalizationTotal;return{classBreaks:p(a),normalizationTotal:b}}})},"esri/tasks/GenerateRendererTask":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../request ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/layerSourceUtils ../renderers/support/jsonUtils ./QueryTask ./Task ./support/Query ./support/StatisticDefinition".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l){return function(e){function q(a){a=e.call(this,a)||this;a._field=null;a.checkValueRange=null;a.gdbVersion=null;a.source=null;return a}k(q,e);Object.defineProperty(q.prototype,"parsedUrl",{get:function(){var a=this._parseUrl(this.url);a.path+="/generateRenderer";return a},enumerable:!0,configurable:!0});q.prototype.execute=function(a,b){var e=this,h=a.classificationDefinition;a=p({},a.toJSON(),{f:"json"});this._field="esri.tasks.support.ClassBreaksDefinition"===
h.declaredClass?h.classificationField:h.attributeField;this.source&&(h={source:n.sourceToJSON(this.source)},a.layer=JSON.stringify(h));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);a.classificationDef&&(a.classificationDef=JSON.stringify(a.classificationDef));h={query:a};if(this.requestOptions||b)h=p({},this.requestOptions,b,h);return c(this.parsedUrl.path,h).then(function(a){return e._handleExecuteResponse(a)})};q.prototype._handleExecuteResponse=function(a){var e=this,c=a&&a.data;if(c){if(!this.checkValueRange)return a=
this._processRendererJSON(c),f.resolve(a);a=new b(this.url);var g=new l({statisticType:"min",onStatisticField:this._field}),q=new l({statisticType:"max",onStatisticField:this._field}),g=new h({outStatistics:[g,q]});return a.execute(g).then(function(a){a=a.features[0].attributes;var b=null,h=null,l;for(l in a)0===l.toLowerCase().indexOf("min")?b=a[l]:h=a[l];return e._processRendererJSON(c,b,h)})}};q.prototype._processRendererJSON=function(b,e,h){if("classBreaks"===b.type){var c=a.fromJSON(b);return{classBreaks:c.classBreakInfos.map(function(a,
b){0===b&&void 0!==e&&null!==e&&(a.minValue=e);b===c.classBreakInfos.length-1&&void 0!==h&&null!==h&&(a.maxValue=h);return{minValue:a.minValue,maxValue:a.maxValue,label:a.label}}),normalizationTotal:c.normalizationTotal}}return{uniqueValues:b.uniqueValueInfos.map(function(a,c){0===c&&void 0!==e&&null!==e&&(a.value=e);c===b.uniqueValueInfos.length-1&&void 0!==h&&null!==h&&(a.value=h);return{count:a.count,value:a.value,label:a.label}})}};m([g.property()],q.prototype,"checkValueRange",void 0);m([g.property()],
q.prototype,"gdbVersion",void 0);m([g.property()],q.prototype,"source",void 0);m([g.property({readOnly:!0,dependsOn:["url"]})],q.prototype,"parsedUrl",null);return q=m([g.subclass("esri.tasks.GenerateRendererTask")],q)}(g.declared(e))})},"esri/tasks/support/GenerateRendererParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),function(r,
d,p,k,m,c,f){return function(g){function n(){var a=null!==g&&g.apply(this,arguments)||this;a.classificationDefinition=null;a.where=null;return a}p(n,g);k([c.property({type:f,json:{read:{source:"classificationDef"},write:{target:"classificationDef"}}})],n.prototype,"classificationDefinition",void 0);k([c.property({type:String,json:{write:!0}})],n.prototype,"where",void 0);return n=k([c.subclass("esri.tasks.support.GenerateRendererParameters")],n)}(c.declared(m.JSONSupport))})},"esri/tasks/support/UniqueValueDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ClassificationDefinition".split(" "),
function(r,d,p,k,m,c){return function(c){function f(){var f=null!==c&&c.apply(this,arguments)||this;f.attributeField=null;f.attributeField2=null;f.attributeField3=null;f.fieldDelimiter=null;f.type="unique-value-definition";return f}p(f,c);Object.defineProperty(f.prototype,"uniqueValueFields",{get:function(){var c=[];this.attributeField&&c.push(this.attributeField);this.attributeField2&&c.push(this.attributeField2);this.attributeField3&&c.push(this.attributeField3);return c},enumerable:!0,configurable:!0});
k([m.property()],f.prototype,"attributeField",void 0);k([m.property()],f.prototype,"attributeField2",void 0);k([m.property()],f.prototype,"attributeField3",void 0);k([m.property({json:{write:!0}})],f.prototype,"fieldDelimiter",void 0);k([m.property({dependsOn:["attributeField","attributeField2","attributeField3"],json:{write:!0}})],f.prototype,"uniqueValueFields",null);k([m.property()],f.prototype,"type",void 0);return f=k([m.subclass("esri.tasks.support.UniqueValueDefinition")],f)}(m.declared(c))})},
"esri/renderers/smartMapping/support/adapters/PointCloudLayerAdapter":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/fieldUtils ./SceneLayerAdapter".split(" "),function(r,d,p,k,m,c,f,g){return function(g){function a(a){return g.call(this,a)||this}p(a,g);a.prototype.getField=function(a){void 0===a&&(a="");return f.getField(this.layer.fields,
a)};a.prototype.getFieldUsageInfo=function(a){a=this.getField(a);if(!a)return null;a=this._hasCachedStatistics(a.name);return{supportsLabelingInfo:a,supportsPopupTemplate:a,supportsRenderer:a,supportsLayerQuery:!1,supportsStatistics:a}};a.prototype.getFieldDomain=function(){return null};a.prototype.load=function(a){var b=this;a=this.layer.load(a).then(function(){b.geometryType="point";b.objectIdField=null;b.supportsSQLExpression=!1;b.hasQueryEngine=!1});this.addResolvingPromise(a);return m.resolve(this)};
return a=k([c.subclass("esri.renderers.smartMapping.support.adapters.PointCloudLayerAdapter")],a)}(c.declared(g))})},"esri/renderers/smartMapping/support/adapters/SceneLayerAdapter":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../Graphic ../../../../core/arrayUtils ../../../../core/Error ../../../../core/promiseUtils ../../../../core/watchUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/fieldUtils ../../statistics/support/utils ./FeatureLayerAdapter ./LayerAdapter ./support/utils ../../../../tasks/support/FeatureSet".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w){return function(d){function u(a){return d.call(this,a)||this}k(u,d);u.prototype._hasCachedStatistics=function(a){return this.layer.hasCachedStatistics(a)};u.prototype._fetchFeaturesFromMemory=function(h,c){return h?h.whenLayerView(this.layer).then(function(a){var h=e.whenFalseOnce(a,"updating").then(function(){return a.queryFeatures(c)}).then(function(a){return"esri.tasks.support.FeatureSet"===a.declaredClass?a.features:a});return b.timeout(h,1E4,null)}):
b.reject(new a("scene-layer-adapter:insufficient-data","view is required to fetch the features from layerView"))};u.prototype._generateFeatureSetForCachedHistogram=function(a,b,e,h){void 0===b&&(b=a.minimum);void 0===e&&(e=a.maximum);for(var c=[],l=0;l<h;l++)c[l]=0;for(var f=a.counts.length,q=a.minimum,k=a.maximum,l=0;l<f;l++){var n=(l+.5)/f,n=((1-n)*q+n*k-b)/(e-b)*h;0<=n&&n<=h&&(c[n===h?h-1:Math.floor(n)]+=a.counts[l])}var d=[];c.forEach(function(a,b){var e=new g({attributes:{}});e.attributes.EXPR_1=
b+1;e.attributes.countOFExpr=a;d.push(e)});a=new w;a.features=d;return a};u.prototype._getCachedStatistics=function(e,h){var c=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.minValue||e.maxValue?b.reject(new a("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression', 'sqlWhere', 'minValue' or 'maxValue' is specified")):c.queryCachedStatistics(h&&h.name,{signal:e.signal}).then(function(a){var b=a.stats;a=b.min;
var e=b.max,h=b.avg,c=b.stddev,l=b.sum,f=b.variance,b=b.count;if(0!==a||0!==e)h=0===h?null:h,l=0===l?null:l,c=0===c?null:c,f=0===f?null:f,b=0===b?null:b;null==b&&null!=l&&null!=h&&(b=Math.round(l/h));return{avg:h,count:b,max:e,min:a,stddev:c,sum:l,variance:f}})};u.prototype._getSummaryStatisticsFromMemory=function(b,e){return f(this,void 0,void 0,function(){var h,f,g,q,n,k,d,A;return c(this,function(c){switch(c.label){case 0:if(!b.features)return[3,1];f=b.features;return[3,3];case 1:return[4,this._fetchFeaturesFromMemory(b.view)];
case 2:f=c.sent(),c.label=3;case 3:g=(h=f)&&h.length;if(!g)throw new a("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");q=l.isDateField(e);n=p({},b);return"percent-of-total"!==n.normalizationType?[3,5]:[4,t.calculateStatsFromMemory({field:n.field},h)];case 4:k=c.sent();d=k.sum;if(null==d)throw new a("scene-layer-adapter:invalid","invalid normalizationTotal");n.normalizationTotal=d;c.label=5;case 5:return[4,t.calculateStatsFromMemory(n,h,q)];case 6:return A=
c.sent(),[2,t.processSummaryStatisticsResult(A)]}})})};u.prototype._getCachedStatisticsForUniqueValues=function(e,h){var c=this,f=this.layer,q=h&&h.name,n=h&&this.getFieldDomain(e.field);return e.valueExpression||e.sqlExpression||e.sqlWhere?b.reject(new a("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression', 'sqlExpression' or 'sqlWhere' is specified")):f.queryCachedStatistics(q,{signal:e.signal}).then(function(a){var b=a.stats;a=a.labels&&
a.labels.labels;var n={},k=[];if(b.mostFrequentValues){var d="countOF"+q;b.mostFrequentValues.forEach(function(a){var b=new g({attributes:{}});b.attributes[q]=h&&h.name!==f.objectIdField&&(l.isNumericField(h)||l.isDateField(h))?Number(a.value):a.value;b.attributes[d]=a.count;k.push(b)});a&&a.forEach(function(a){n[a.value]=a.label})}b=new w;b.features=k;return t.getUniqueValuesFromFeatureSet(b,c,e.field,n,e.signal)}).then(function(a){return t.createUVResult(a,n,e.returnAllCodedValues)})};u.prototype._getUniqueValuesFromMemory=
function(a,e){var h=e&&this.getFieldDomain(a.field);return(a.features?b.resolve(a.features):this._fetchFeaturesFromMemory(a.view)).then(function(b){return t.calculateUniqueValuesFromMemory(a,b,h)})};u.prototype._getCachedStatisticsForHistogram=function(e,h){var c=this,l=this.layer;return e.valueExpression||e.sqlExpression||e.sqlWhere||e.normalizationType?b.reject(new a("scene-layer-adapter:not-supported","This Layer does not support calculating statistics when 'valueExpression' or 'sqlExpression' or 'sqlWhere' or 'normalizationType' is specified")):
l.queryCachedStatistics(h&&h.name,{signal:e.signal}).then(function(a){a=a.stats;var b=e.minValue,h=e.maxValue,b=null!=b?b:a.min,h=null!=h?h:a.max,l=e.numBins||10;a=c._generateFeatureSetForCachedHistogram(a.histogram,b,h,l);return t.getHistogramFromFeatureSet(a,b,h,l)})};u.prototype._getClassBreaksFromMemory=function(b){return f(this,void 0,void 0,function(){var e,h,l,f,g,q;return c(this,function(c){switch(c.label){case 0:if(!b.features)return[3,1];h=b.features;return[3,3];case 1:return[4,this._fetchFeaturesFromMemory(b.view)];
case 2:h=c.sent(),c.label=3;case 3:l=(e=h)&&e.length;if(!l)throw new a("scene-layer-adapter:insufficient-data","No features are available to calculate statistics");f=p({},b);return"percent-of-total"!==f.normalizationType?[3,5]:[4,t.calculateStatsFromMemory({field:f.field},e)];case 4:g=c.sent();q=g.sum;if(null==q)throw new a("scene-layer-adapter:invalid","invalid normalizationTotal");f.normalizationTotal=q;c.label=5;case 5:return[2,t.calculateClassBreaksFromMemory(f,e)]}})})};u.prototype._getHistogramFromMemory=
function(e){var h=this;return(e.features?b.resolve(e.features):this._fetchFeaturesFromMemory(e.view)).then(function(c){if(!c||!c.length)throw new a("scene-layer-adapter:insufficient-data","No features are available to calculate histogram");var l=e.field,f=e.normalizationType,g=e.valueExpression,q=e.classificationMethod,n=e.minValue,k=e.maxValue,d=e.view,A=null!=n&&null!=k,u=null;q&&"equal-interval"!==q||f?(l=p({},e),l.features=c,u=h._getBinParamsFromMemory(l)):u=A?b.resolve({min:n,max:k}):h.summaryStatistics({field:l,
valueExpression:g,features:c,view:d,signal:e.signal}).then(function(e){return e.count?{min:e.min,max:e.max}:b.reject(new a("feature-layer-adapter:insufficient-data","No features are available to calculate histogram"))});return u.then(function(a){return t.calculateHistogramFromMemory(e,a,c)})})};u.prototype._getBinParamsFromMemory=function(a){return f(this,void 0,void 0,function(){var b,e,h,l,f,g,n,k,d,A,u=this;return c(this,function(c){b=a.field;e=a.valueExpression;h=a.classificationMethod;l=a.standardDeviationInterval;
f=a.normalizationType;g=a.normalizationField;n=a.minValue;k=a.maxValue;d=a.features;A=a.view;return[2,this._getClassBreaksFromMemory({field:b,valueExpression:e,normalizationType:f,normalizationField:g,classificationMethod:h,standardDeviationInterval:l,minValue:n,maxValue:k,numClasses:a.numBins,features:d,view:A}).then(function(a){var e=a.normalizationTotal;a=a.classBreakInfos;var h=q.getSQLFilterForNormalization({field:b,normalizationType:f,normalizationField:g});return t.generateBinParams({field:b,
normalizationType:f,normalizationField:g,normalizationTotal:e,classBreaks:a,where:h,layer:u})})]})})};u.prototype.getField=function(a){void 0===a&&(a="");return this.layer.getField(a)};u.prototype.getFieldUsageInfo=function(a){a=this.getField(a);if(!a)return null;a=this.layer.getFieldUsageInfo(a.name);return{supportsLabelingInfo:a.supportsLabelingInfo,supportsPopupTemplate:a.supportsPopupTemplate,supportsRenderer:a.supportsRenderer,supportsLayerQuery:a.supportsLayerQuery,supportsStatistics:!0}};u.prototype.getFieldDomain=
function(a,b){return this._featureLayerAdapter?this._featureLayerAdapter.getFieldDomain(a,b):null};u.prototype.summaryStatistics=function(a){var e=this,h=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.summaryStatistics(a):this._hasCachedStatistics(h&&h.name)?this._getCachedStatistics(a,h).catch(function(){b.throwIfAborted(a.signal);return e._getSummaryStatisticsFromMemory(a,h)}):this._getSummaryStatisticsFromMemory(a,h)};u.prototype.uniqueValues=function(a){var e=
this,h=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.uniqueValues(a):this._hasCachedStatistics(h&&h.name)?this._getCachedStatisticsForUniqueValues(a,h).catch(function(){b.throwIfAborted(a.signal);return e._getUniqueValuesFromMemory(a,h)}):this._getUniqueValuesFromMemory(a,h)};u.prototype.histogram=function(a){var e=this,h=this.getField(a.field);return this._featureLayerAdapter?this._featureLayerAdapter.histogram(a):this._hasCachedStatistics(h&&h.name)?this._getCachedStatisticsForHistogram(a,
h).catch(function(){b.throwIfAborted(a.signal);return e._getHistogramFromMemory(a)}):this._getHistogramFromMemory(a)};u.prototype.classBreaks=function(e){var h=this.getField(e.field);return this._featureLayerAdapter?this._featureLayerAdapter.classBreaks(e):this._hasCachedStatistics(h&&h.name)?b.reject(new a("scene-layer-adapter:not-supported","Cached stats not supported")):this._getClassBreaksFromMemory(e)};u.prototype.queryFeatureCount=function(e,h){return this._featureLayerAdapter?this._featureLayerAdapter.queryFeatureCount(e,
h):b.reject(new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support count query"))};u.prototype.generateRenderer=function(e,h){return this._featureLayerAdapter?this._featureLayerAdapter.generateRenderer(e,h):b.reject(new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support generateRenderer operation"))};u.prototype.heatmapStatistics=function(e){return this._featureLayerAdapter?this._featureLayerAdapter.heatmapStatistics(e):
b.reject(new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support heatmapStatistics operation"))};u.prototype.predominantCategories=function(b){return f(this,void 0,void 0,function(){return c(this,function(e){if(this._featureLayerAdapter)return[2,this._featureLayerAdapter.predominantCategories(b)];throw new a("scene-layer-adapter:not-supported","SceneLayer without associated FeatureLayer does not support predominantCategories");})})};u.prototype.getSampleFeatures=
function(b){return f(this,void 0,void 0,function(){var e,h,l,f,g,q,k;return c(this,function(c){switch(c.label){case 0:if("mesh"===this.layer.geometryType)throw new a("scene-layer-adapter:not-supported","getSampleFeatures does not support scene layer with mesh geometry type");e=b.view;h=b.sampleSize;l=1;f=this.layer.createQuery();f.outFields=null;f.returnGeometry=!0;f.where=null;f.num=h;g=[];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this._fetchFeaturesFromMemory(e,f)];case 2:return g=c.sent(),
g.length&&0<h&&h<=g.length?[2,n.pickRandom(g,h,l)]:[3,4];case 3:return c.sent(),[3,4];case 4:q=null;if(!this._featureLayerAdapter)return[3,6];k=p({},b);delete k.view;return[4,this._featureLayerAdapter.getSampleFeatures(k)];case 5:q=c.sent(),c.label=6;case 6:return q&&q.length?[2,q]:[2,n.pickRandom(g,g.length,l)]}})})};u.prototype.load=function(a){var e=this,h=this.layer.load(a).then(function(b){var h=b.associatedLayer;e.geometryType=b.geometryType;if(h)return e._featureLayerAdapter=new A({layer:h}),
e._featureLayerAdapter.load(a).then(function(){e.objectIdField=e._featureLayerAdapter.objectIdField;e.supportsSQLExpression=e._featureLayerAdapter.supportsSQLExpression;e.minScale=e._featureLayerAdapter.minScale;e.maxScale=e._featureLayerAdapter.maxScale;e.fullExtent=e._featureLayerAdapter.fullExtent});e.objectIdField=b.objectIdField;e.supportsSQLExpression=!1;e.hasQueryEngine=!1;e.fullExtent=b.fullExtent});this.addResolvingPromise(h);return b.resolve(this)};m([h.property({constructOnly:!0})],u.prototype,
"layer",void 0);return u=m([h.subclass("esri.renderers.smartMapping.support.adapters.SceneLayerAdapter")],u)}(h.declared(u))})},"esri/renderers/smartMapping/symbology/support/utils":function(){define(["require","exports","../../../../core/arrayUtils","../../../../core/screenUtils","../../support/utils"],function(r,d,p,k,m){function c(a,e){return a.r===e.r&&a.g===e.g&&a.b===e.b}function f(a){var b=a.width,h=a.height,c=a.pixelSizeAt(k.createScreenPoint(.5*b,.5*h));0>=c&&(c=a.pixelSizeAt(k.createScreenPoint(.5*
b,.95*h)),0>=c&&(b=a.camera.position.clone(),b.z=0,c=2*a.pixelSizeAt(b)));return c}Object.defineProperty(d,"__esModule",{value:!0});var g="streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),n=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"],a=[].concat(g).concat(n);d.hasIdenticalColors=function(a,e){var b=0;if(a.length===e.length){var f=a.every(function(a,b){return c(a,
e[b])});f?b=1:(f=a.slice(0).reverse().every(function(a,b){return c(a,e[b])}))&&(b=-1)}return b};d.getPixelSize=f;d.toWorldScale=function(a,e){return Math.ceil(f(e)*k.pt2px(k.toPt(a)))};d.getStorageType=function(a){return"multipoint"===a?"point":"mesh"===a?"polygon":a};d.getBasemapTheme=function(b){b=m.getBasemapId(b,a,!1);if(!b)return null;if(-1<g.indexOf(b))return"light";if(-1<n.indexOf(b))return"dark"};d.getTagsFromSchemes=function(a){if(!a)return[];var b=new Set,h=[a.primaryScheme];a.secondarySchemes&&
h.push.apply(h,a.secondarySchemes);for(a=0;a<h.length;a++){var c=h[a];c&&"tags"in c&&c.tags&&c.tags.forEach(function(a){return b.add(a)})}return p.keysOfSet(b)}})},"esri/widgets/Search/LayerSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),function(r,d,p,k,m,c,f,g,n){return function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;b.displayField=null;b.exactMatch=null;b.orderByFields=null;b.searchFields=null;b.searchQueryParams=null;b.searchTemplate=null;b.suggestionTemplate=null;b.suggestQueryParams=null;b.getResults=function(a,e){return n.getResults(m({source:b},a),e)};b.getSuggestions=function(a,e){return n.getSuggestions(m({source:b},a),e)};return b}p(b,a);e=b;Object.defineProperty(b.prototype,"layer",{set:function(a){this._set("layer",a);a&&a.load().catch(function(){})},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",a)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new e({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,
popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?c.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?
c.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?c.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};b.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};b.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};b.prototype._getSearchFieldsString=
function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var e=a.getField(b);return e&&e.alias||b}).join(", "):""};b.prototype._getLayerTitle=function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var e;k([f.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],b.prototype,"displayField",void 0);k([f.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],b.prototype,
"exactMatch",void 0);k([f.property({value:null})],b.prototype,"layer",null);k([f.property({dependsOn:["layer.title","layer.loaded"]})],b.prototype,"name",null);k([f.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0);k([f.property()],b.prototype,"searchFields",void 0);k([f.property()],b.prototype,"searchQueryParams",void 0);k([f.property()],b.prototype,"searchTemplate",void 0);k([f.property()],b.prototype,"suggestionTemplate",void 0);k([f.property()],b.prototype,"suggestQueryParams",
void 0);return b=e=k([f.subclass("esri.widgets.Search.LayerSearchSource")],b)}(f.declared(g))})},"esri/widgets/Search/SearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,c,f){return function(c){function g(a){a=c.call(this,a)||this;a.autoNavigate=null;a.filter=null;a.getResults=null;a.getSuggestions=null;a.maxResults=
null;a.maxSuggestions=null;a.minSuggestCharacters=null;a.outFields=null;a.placeholder="";a.popupEnabled=null;a.popupTemplate=null;a.prefix="";a.resultGraphicEnabled=null;a.resultSymbol=null;a.searchExtent=null;a.suggestionsEnabled=null;a.suffix="";a.withinViewEnabled=!1;a.zoomScale=null;return a}p(g,c);k([f.property()],g.prototype,"autoNavigate",void 0);k([f.property()],g.prototype,"filter",void 0);k([f.property()],g.prototype,"getResults",void 0);k([f.property()],g.prototype,"getSuggestions",void 0);
k([f.property()],g.prototype,"maxResults",void 0);k([f.property()],g.prototype,"maxSuggestions",void 0);k([f.property()],g.prototype,"minSuggestCharacters",void 0);k([f.property()],g.prototype,"outFields",void 0);k([f.property()],g.prototype,"placeholder",void 0);k([f.property()],g.prototype,"popupEnabled",void 0);k([f.property()],g.prototype,"popupTemplate",void 0);k([f.property()],g.prototype,"prefix",void 0);k([f.property()],g.prototype,"resultGraphicEnabled",void 0);k([f.property()],g.prototype,
"resultSymbol",void 0);k([f.property()],g.prototype,"searchExtent",void 0);k([f.property()],g.prototype,"suggestionsEnabled",void 0);k([f.property()],g.prototype,"suffix",void 0);k([f.property()],g.prototype,"withinViewEnabled",void 0);k([f.property()],g.prototype,"zoomScale",void 0);return g=k([f.subclass("esri.widgets.Search.SearchSource")],g)}(f.declared(m.IdentifiableMixin(c.JSONSupport)))})},"esri/widgets/Search/support/layerSearchUtils":function(){define("require exports ../../../intl ../../../core/Error ../../../core/lang ../../../core/Logger ../../../core/promiseUtils ../../../core/unitUtils ./geometryUtils".split(" "),
function(r,d,p,k,m,c,f,g,n){function a(a,b){var e=a.filter,h=a.searchExtent;b=b&&b.extent;a=a.withinViewEnabled&&b?b:void 0;return e&&e.geometry||h||a}function b(a){return a?a.load().then(f.resolve).catch(f.reject):f.resolve()}function e(a){return a&&!!a.get("capabilities.query.supportsPagination")}function h(a){var b="";a&&(a=a.fields)&&a.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b}function l(a,b){return a&&b?b.every(function(b){return!!a.getField(b)}):!1}function q(a){for(var b=
0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1}function A(a,b,e){var h=null;(a=a.codedValues)&&a.some(function(a){var c=a.name,c=e?c:c.toLowerCase();return(e?b:b.toLowerCase())===c?(h=a.code.toString(),!0):!1});return h}function u(a,b){return(b=b&&b.where)?"("+a+") AND ("+b+")":a}function t(a,b,e,h,c){var f=b.definitionExpression,l="";if(a){var g=x.test(b.url)&&q(a)?"N":"";e&&e.forEach(function(e){var f=b.getField(e);e=((e="function"===typeof b.getFieldDomain&&b.getFieldDomain(e))&&"coded-value"===
e.type?A(e,a,c):null)||a||null;if(null!==e){var q=f.type,f=f.name;"string"===q||"date"===q||"global-id"===q?c?f=u(f+" \x3d "+g+"'"+e+"'",h):(e=e.toUpperCase(),f=u("UPPER("+f+") LIKE "+g+"'%"+e+"%'",h)):"oid"===q||"small-integer"===q||"integer"===q||"single"===q||"double"===q?(e=Number(e),f=isNaN(e)?null:u(f+" \x3d "+e,h)):f=u(f+" \x3d "+e,h);f&&(l+=l?" OR ("+f+")":"("+f+")")}})}return f?"("+f+") AND ("+l+")":l}function w(a,b){var e=null;(a=a.codedValues)&&a.length&&a.some(function(a){return a.code===
b?(e=a.name,!0):!1});return e}function y(a,b,e){var h=a.layer,c=a.attributes,f="function"===typeof h.getFieldDomain&&h.getFieldDomain(e);return b?p.substitute(b,c):e&&a.hasOwnProperty("attributes")&&c.hasOwnProperty(e)?(a=c[e],e=h.getField(e),f&&"coded-value"===f.type?w(f,a):e&&"date"===e.type?p.formatDate(new Date(a)):"number"===typeof a?a.toString():"string"!==typeof a?"":a.trim()):""}function z(a,b,e,h){return a.features.map(function(a){var c=a.attributes[a.layer.objectIdField];return{text:y(a,
b.suggestionTemplate,h),key:c,sourceIndex:e}})}function v(a,b,e,h,c,f,l){return a.features.map(function(a){var g=a.clone(),q=a.layer,q=(q=q&&q.objectIdField)&&a.attributes[q];a=y(a,e.searchTemplate,c);var k=n.createExtentFromGeometry(g.geometry,b,f);return{extent:l?n.scaleExtent(m.clone(k),b,l):k,feature:g,key:q,name:a,sourceIndex:h}})}Object.defineProperty(d,"__esModule",{value:!0});var x=/https?:\/\/services.*\.arcgis\.com/i,D=/(?:\{([^}]+)\})/g,C=c.getLogger("esri.widgets.Search.support.layerSearchUtils");
d.getResults=function(c,f){var q=c.exactMatch,n=void 0===q?!1:q,d=c.location,A=c.maxResults,u=c.spatialReference,w=c.source,m=c.sourceIndex,y=c.suggestResult,z=c.view,x=w.layer,p=w.filter,D=w.zoomScale,Q=z&&z.scale,r=a(w,z),B=f&&f.signal;return b(x).then(function(){var a=x.popupTemplate;return a?a.getRequiredFields(x.fields):null}).then(function(a){var b=x.objectIdField,c=x.returnZ,f=w.displayField||w.layer.displayField||h(w.layer);if(!x.getField(f))throw C.error("invalid-field: displayField is invalid."),
new k("getResults():invalid-field","displayField is invalid.");a=a&&a.length?a:[f];var q=(a=w.outFields||a)&&-1!==a.indexOf("*");-1!==a.indexOf(b)||q||a.push(b);if(!q&&!l(x,a))throw C.error("invalid-field: outField is invalid."),new k("getResults():invalid-field","outField is invalid.");var b=x.createQuery(),q=w.orderByFields,I=w.searchQueryParams;I&&b.set(I);q&&(b.orderByFields=q);u&&(b.outSpatialReference=u,q=1/g.getMetersPerUnitForSR(u))&&(b.maxAllowableOffset=q);q=!!x.get("capabilities.data.supportsZ");
b.returnZ=q&&!1!==c;b.returnGeometry=!0;a&&(b.outFields=a);if(d)b.geometry=d;else if(y.key)b.objectIds=[parseInt(y.key,10)];else{c=w.searchFields||[f];if(!l(x,c))throw C.error("invalid-field: search field is invalid."),new k("getResults():invalid-field","search field is invalid.");e(x)&&(b.num=A);r&&(b.geometry=r);if(!y.text.trim())return[];a=w.prefix;q=w.suffix;a=(""+(void 0===a?"":a)+y.text+(void 0===q?"":q)).replace(/\'/g,"''");c=t(a,x,c,p,n);if(!c)return[];b.where=c}return x.queryFeatures(b,{signal:B}).then(function(a){return v(a,
z,w,m,f,Q,D)})})};d.getSuggestions=function(c,f){var g=c.source,q=c.spatialReference,n=c.suggestTerm,d=c.maxSuggestions,A=c.sourceIndex,u=g.layer,w=g.filter,m=f&&f.signal,y=a(g,c.view);return b(u).then(function(){if(!e(u))return[];var a=g.displayField||g.layer.displayField||h(g.layer),b=g.searchFields||[a],c=[];g.suggestionTemplate?g.suggestionTemplate.replace(D,function(a,b){c.push(b);return a}):c.push(a);var f=c&&-1!==c.indexOf("*");-1!==c.indexOf(u.objectIdField)||f||c.push(u.objectIdField);var v=
!!u.getField(a),f=f||l(u,c),x=l(u,b);if(!v)throw C.error("invalid-field: displayField is invalid."),new k("getSuggestions():invalid-field","displayField is invalid.");if(!f)throw C.error("invalid-field: outField is invalid."),new k("getSuggestions():invalid-field","outField is invalid.");if(!x)throw C.error("invalid-field: search field is invalid."),new k("getSuggestions():invalid-field","search field is invalid.");v=u.createQuery();f=g.orderByFields;(x=g.suggestQueryParams)&&v.set(x);f&&(v.orderByFields=
f);v.outSpatialReference=q;v.returnGeometry=!1;v.num=d;v.outFields=c;y&&(v.geometry=y);if(!n.trim())return[];f=g.prefix;x=g.suffix;f=(""+(void 0===f?"":f)+n+(void 0===x?"":x)).replace(/\'/g,"''");b=t(f,u,b,w,!1);if(!b)return[];v.where=b;return u.queryFeatures(v,{signal:m}).then(function(b){return z(b,g,A,a)})})}})},"esri/widgets/Search/support/geometryUtils":function(){define("require exports ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../geometry/support/scaleUtils ../../../views/MapView".split(" "),
function(r,d,p,k,m,c,f,g,n){function a(a,b,c){var e=a.hasZ?a.z:void 0;return b&&b.map?(c?g.getExtentForScale(b,c):b.extent).clone().centerAt(a).set({zmax:e,zmin:e}):new p.Extent({xmin:a.x-.25,ymin:a.y-.25,xmax:a.x+.25,ymax:a.y+.25,spatialReference:a.spatialReference,zmin:e,zmax:e})}Object.defineProperty(d,"__esModule",{value:!0});var b=m.getLogger("esri.widgets.Search.support.geometryUtils");d.getPointWithElevation=function(a,c){return c?a?a.hasZ||c instanceof n?f.resolve(a):(c=c.get("map.ground"))&&
c.layers.length?c.queryElevation(a).then(function(a){return a.geometry}):f.resolve(a):(b.error("missing-parameter: point is missing."),f.reject(new k("searchgeometryutils:missing-parameter","point is missing."))):(b.error("missing-parameter: view is missing."),f.reject(new k("searchgeometryutils:missing-parameter","view is missing.")))};d.getPointFromGeometry=function(a){return a instanceof p.Point?a:a instanceof p.Extent?a.center:a instanceof p.Polygon?a.centroid:a instanceof p.Multipoint?a.getPoint(0):
a instanceof p.Polyline?a.getPoint(0,0):null};d.createExtentFromGeometry=function(b,h,f){if(c.isNone(b))return null;if(b instanceof p.Extent)return b;if(b instanceof p.Multipoint||b instanceof p.Polygon||b instanceof p.Polyline)return b.extent;if(b instanceof p.Point)return a(b,h,f)};d.scaleExtent=function(b,h,f){return c.isNone(b)||c.isNone(h)?null:a(b.center,h,f)}})},"esri/geometry/support/scaleUtils":function(){define(["require","exports","../../core/unitUtils"],function(r,d,p){function k(k,c){c=
p.getMetersPerUnitForSR(c);return k/(c*p.inchesPerMeter*96)}Object.defineProperty(d,"__esModule",{value:!0});d.getScale=function(k,c){c=c||k.extent;k=k.width;var f=p.getMetersPerUnitForSR(c&&c.spatialReference);return c&&k?c.width/k*f*p.inchesPerMeter*96:0};d.getResolutionForScale=k;d.getScaleForResolution=function(k,c){c=p.getMetersPerUnitForSR(c);return k*c*p.inchesPerMeter*96};d.getExtentForScale=function(d,c){var f=d.extent;d=d.width;c=k(c,f.spatialReference);return f.clone().expand(c*d/f.width)}})},
"esri/views/MapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w,y,z,v,x){function D(){return c(this,void 0,void 0,function(){var a,b,e,c,h,f,l;return m(this,function(g){switch(g.label){case 0:return[4,Promise.all([new Promise(function(a,b){r(["./webgl"],a,b)}),new Promise(function(a,b){r(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){r(["./2d/engine"],a,b)})])];case 1:return a=g.sent(),b=a[1],e=b.GraphicsView2D,c=b.LabelManager,h=b.MapViewNavigation,f=b.MagnifierView2D,l=a[2].Stage,E=e,G=c,F=h,I=f,H=l,[2]}})})}
function C(a){return!("layerViews"in a)&&null!=a.container}var B=n.getLogger("esri.views.MapView"),H,E,G,F,I;return function(c){function q(a){a=c.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.graphicsView=null;a.highlightOptions=new y;a.magnifier=new u;a.inputManager=new w({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new x;a.rendering=!1;h.initialize();return a}p(q,c);q.prototype.destroy=function(){this.inputManager.destroy();this._set("inputManager",
null)};Object.defineProperty(q.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||null},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"navigating",{get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)},enumerable:!0,configurable:!0});q.prototype.toMap=function(a){if(b.isSupportedScreenPointEvent(a)){var e=b.createScreenPointFromSupportedEvent(this,a);return this.inherited(arguments,[e])}return this.inherited(arguments)};
q.prototype.hitTest=function(e){var c=b.isSupportedScreenPointEvent(e)?b.createScreenPointFromSupportedEvent(this,e):e;if(!this.ready||isNaN(c.x)||isNaN(c.y))return a.resolve({screenPoint:c,results:[]});var h=this.toMap(c);e=[this.graphicsView];e.push.apply(e,this.allLayerViews.toArray().reverse());return a.all(e.map(function(a){return a&&a.hitTest?a.hitTest(c.x,c.y):null})).then(function(a){return{screenPoint:c,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:h,graphic:a}})}})};
q.prototype.takeScreenshot=function(b){return this.ready?this._stage.takeScreenshot(z.toRenderSettings(b,this),this.allLayerViews):a.reject("Map view cannot be used before it is ready")};q.prototype.on=function(a,b,e,c){var h=this.inputManager&&this.viewEvents.on(a,b,e,c);return h?h:this.inherited(arguments)};q.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.viewEvents.hasHandler(a)};q.prototype.whenLayerView=function(a){return this.inherited(arguments)};q.prototype.graphicChanged=
function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};q.prototype.whenReady=function(){var b=this;return a.create(function(a){b.ready?a(b):b._resolveWhenReady.push(a)})};q.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};q.prototype.validate=function(){var b=v.check({supportsMajorWebPerformanceCaveat:!0});g("safari")&&9>g("safari")&&(b=new f("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,
detectedVersion:g("safari")}));return b?(B.warn("#validate()",b.message),a.reject(b)):D()};q.prototype._startup=function(){var a=this;this.timeline.begin("MapView Startup");this.inherited(arguments);this.graphics.owner=this;var b=new H(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),
c=new E({view:this,graphics:this.graphics}),h=new F({view:this,animationManager:this.animationManager}),f=new G({view:this});this._magnifierView=new I;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=c;this._set("graphicsView",c);this._set("mapViewNavigation",h);this._set("labelManager",f);this.handles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!("layerViews"in
a)&&!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=b.error}),e.init(this,"stationary",function(a){return b.stationary=a},!0),e.init(this,"state.viewpoint",function(){return b.state=a.state},!0),e.init(this,"background",function(a){return b.background=a},!0),e.init(this,"magnifier",function(b){return a._magnifierView.magnifier=b},!0),e.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),e.init(this,"highlightOptions",function(){return b.highlightOptions=
a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=[];c.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};q.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",
null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.inherited(arguments)};q.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(C).forEach(function(b,e){a._stage.addChildAt(b.container,e)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};k([l.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],q.prototype,
"background",null);k([l.property()],q.prototype,"graphicsView",void 0);k([l.property({type:y})],q.prototype,"highlightOptions",void 0);k([l.property({type:u})],q.prototype,"magnifier",void 0);k([l.property({readOnly:!0})],q.prototype,"inputManager",void 0);k([l.property({readOnly:!0})],q.prototype,"mapViewNavigation",void 0);k([l.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],q.prototype,"navigating",null);k([l.property({type:Boolean,constructOnly:!0})],q.prototype,"supersampleScreenhotsEnabled",
void 0);k([l.property({type:x})],q.prototype,"ui",void 0);k([l.property({readOnly:!0})],q.prototype,"rendering",void 0);k([l.property({constructOnly:!0})],q.prototype,"renderCanvas",void 0);k([l.property({constructOnly:!0})],q.prototype,"deactivatedWebGLExtensions",void 0);k([l.property({constructOnly:!0})],q.prototype,"debugWebGLExtensions",void 0);return q=k([l.subclass("esri.views.MapView")],q)}(l.declared(q.BreakpointsOwner(A.DOMContainer(t))))})},"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
function(r,d,p,k,m,c,f,g,n){function a(a,e){return e?b[a].valueToClassName[e].split(" "):[]}Object.defineProperty(d,"__esModule",{value:!0});var b={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;var e=this.values;return b<=a.xsmall?e.xsmall:b<=a.small?e.small:b<=a.medium?e.medium:b<=a.large?e.large:e.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var e=this.values;return b<=a.xsmall?e.xsmall:b<=a.small?e.small:b<=a.medium?e.medium:b<=a.large?e.large:e.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},e={xsmall:544,small:768,medium:992,large:1200};d.BreakpointsOwner=
function(h){return function(h){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=h.apply(this,a)||this;a._breakpointsHandles=new f;a.orientation=null;a.widthBreakpoint=null;a.heightBreakpoint=null;a.breakpoints=e;return a}p(l,h);l.prototype.initialize=function(){this._breakpointsHandles.add(g.init(this,["breakpoints","size"],this._updateClassNames))};l.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=
null)};Object.defineProperty(l.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<b.large;if(!b){var c=JSON.stringify(e,null,2);console.warn("provided breakpoints are not valid, using defaults:"+c)}a=b?a:e;this._set("breakpoints",m({},a))}},enumerable:!0,configurable:!0});l.prototype._updateClassNames=function(){if(this.container){var e=c.acquire(),h=c.acquire(),f=!1,l;for(l in b){var g=this[l],q=b[l].getValue({viewSize:this.size,
breakpoints:this.breakpoints});g!==q&&(f=!0,this[l]=q,a(l,g).forEach(function(a){return h.push(a)}),a(l,q).forEach(function(a){return e.push(a)}))}f&&(this._applyClassNameChanges(e,h),c.release(e),c.release(h))}};l.prototype._applyClassNameChanges=function(a,b){var e=this.container;e&&(b.forEach(function(a){return e.classList.remove(a)}),a.forEach(function(a){return e.classList.add(a)}))};l.prototype._removeActiveClassNames=function(){var e=this.container;if(e)for(var c in b)a(c,this[c]).forEach(function(a){return e.classList.remove(a)})};
k([n.property()],l.prototype,"breakpoints",null);k([n.property()],l.prototype,"orientation",void 0);k([n.property()],l.prototype,"widthBreakpoint",void 0);k([n.property()],l.prototype,"heightBreakpoint",void 0);return l=k([n.subclass("esri.views.BreakpointsOwner")],l)}(n.declared(h))}})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,
c){return function(f){function g(c){c=f.call(this,c)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=!1;return c}p(g,f);Object.defineProperty(g.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});k([c.property({type:Number})],g.prototype,"factor",void 0);k([c.property({type:Number})],g.prototype,"offsetX",void 0);k([c.property({type:Number})],g.prototype,"offsetY",void 0);k([c.property()],g.prototype,"position",void 0);k([c.property({readOnly:!0,
dependsOn:["factor","offsetX","offsetY","position","visible"]})],g.prototype,"version",null);k([c.property({type:Boolean})],g.prototype,"visible",void 0);return g=k([c.subclass("esri.views.Magnifier")],g)}(c.declared(m))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/now ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w,y,z,v,x,D,C,B,H){var E=n.getLogger("esri.views.MapView");return function(n){function d(b){var e=n.call(this,b)||this;e._stationaryTimer=null;e.frameTask=new z.default(e);e.featuresTilingScheme=null;e.fullOpacity=1;e.initialExtent=null;e.labelManager=null;e.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};e.resizeAlign="center";e.timeline=new H.Timeline;e.type="2d";e.constraints=new x;e.padding=
{top:0,right:0,bottom:0,left:0};var c=e.handles,h=function(){return e.notifyChange("updating")};c.add([e.watch("viewpoint",function(){e._lastStationaryEventTimestamp=a();e._flipStationary(160)},!0),e.on("resize",function(a){return e._resizeHandler(a)}),e.watch("animationManager.animation",function(a){e.animation=a}),e.allLayerViews.on("change",function(){h();c.remove("map-view-base-layerViewsUpdating");c.add(e.allLayerViews.map(function(a){return a.watch("updating",h)}),"map-view-base-layerViewsUpdating")})],
"map-view-base");return e}k(d,n);d.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(d.prototype,"animation",{set:function(a){var b=this,e=this._get("animation");a!==e&&(e&&e.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,e=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());b.frameTask.animationInProgress=
!1},a.when(e,e)))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;B.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else E.error("#center","incompatible spatialReference "+
JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"constraints",{set:function(a){var b=this,e=this._get("constraints");e&&(this.handles.remove("map-view-base-constraints"),e.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),
"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,B.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):
E.error("#extent","invalid extent size"):E.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,e=this.scale,c=this.viewpoint,h=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==e||-1!==h)||c?!1:!0},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:
this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;B.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;B.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",
a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stationary",{get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&
!("layerViews"in a)&&a.attached&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new f({targetGeometry:new c.Point,scale:0,rotation:0}),B.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",
a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?E.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?E.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):E.error("#viewpoint","geometry not defined")}},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,B.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},
enumerable:!0,configurable:!0});d.prototype.goTo=function(a,b){var e=this;if(a)return h.whenTrueOnce(this,"ready",b&&b.signal).then(function(){e.animation&&(e.animation=null);var c=p({animate:!0},b),h=B.createAsync(a,e);e._gotoTask={};return c.animate?e._gotoAnimated(h,c):e._gotoImmediate(h,c)});E.error("#goTo()","target cannot be null or undefined")};d.prototype.hitTest=function(a){return b.reject("Should be implemented by subclasses")};d.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(e){return p({},
e,{mapPoint:b.toMap(a)})})};d.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};d.prototype.isTileInfoRequired=function(){return!0};d.prototype.toScreen=function(a){if(!this.ready)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return e.createScreenPoint(a[0],a[1])};d.prototype.pixelSizeAt=function(a,b){if(!this.ready)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);
return this.content.pixelSizeAt([a,b])};d.prototype.requestLayerViewUpdate=function(a){this.ready&&this.frameTask.requestLayerViewUpdate(a)};d.prototype.requestUpdate=function(a){this.ready&&this.frameTask.requestUpdate(a)};d.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};d.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};
d.prototype.importLayerView=function(a){return v.layerView2DImporter.importLayerView(a)};d.prototype.hasLayerViewModule=function(a){return v.layerView2DImporter.hasLayerViewModule(a)};d.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new w;this.animation.update(a);return this.animation};d.prototype._cancellableGoTo=function(a,e,c){var h=this,f=c.then(function(){a===h._gotoTask&&(h.animation=null)}).catch(function(b){a===h._gotoTask&&(h.animation=
null,e.done||(e.stop(),h.frameTask.animationInProgress=!1));throw b;}),l=b.create(function(a){return a(f)},function(){a!==h._gotoTask||e.done||(e.stop(),h.frameTask.animationInProgress=!1)});e.when().catch(function(){a===h._gotoTask&&l.cancel&&l.cancel()});return l};d.prototype._gotoImmediate=function(a,e){var c=this,h=this._gotoTask,f=this._createOrReplaceAnimation(a);a=a.then(function(a){b.throwIfAborted(e);if(h!==c._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");c.viewpoint=
f.target=a;f.finish()});return this._cancellableGoTo(h,f,a)};d.prototype._gotoAnimated=function(a,b){var e=this,c=this._gotoTask,h=this._createOrReplaceAnimation(a);a=a.then(function(a){if(c!==e._gotoTask)throw new g("view:goto-interrupted","Goto was interrupted");h.update(a);e.animationManager.animate(h,e.viewpoint,b);return h.when().then(function(){},function(){})});return this._cancellableGoTo(c,h,a)};d.prototype._resizeHandler=function(a){var b=this.state;if(b){var e=this.content.viewpoint,c=
this.content.size.concat();b.size=[a.width,a.height];B.resize(e,e,c,this.content.size,this.resizeAlign);e=this.constraints.constrain(e,null);this.state.viewpoint=e}};d.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new y.default({view:this}));this._set("state",new D({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new C.TileInfoView(A.create({spatialReference:this.spatialReference,
size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};d.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,e=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:e});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",
a.rotation);this._set("scale",a.scale);this._set("spatialReference",e);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null};d.prototype._flipStationary=function(b){var e=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){e._stationaryTimer=null;var b=a()-e._lastStationaryEventTimestamp;160>b?e._stationaryTimer=e._flipStationary(b):
e.notifyChange("stationary")},b)};d.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var e=a&&a.targetGeometry||a;return b?e?b.equals(e.spatialReference)?a:q.canProject(e,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=q.project(e,b),a):q.project(e,b):null:null:a};d.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),e=this._get("scale"),c=this._normalizeInput(this._get("center")),h=this._normalizeInput(this._get("extent")),
l=this._get("rotation"),g=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(e=a.zoomToScale(b)):b=-1;var q=null,d=null,b=0,a=g&&g.rotation,k=g&&g.targetGeometry;k&&("extent"===k.type?q=k:"point"===k.type&&(d=k,b=g.scale));g=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));k=this._normalizeInput(this.initialExtent);h=h||q||g||k;c=c||d||h&&h.center;e=e||b||h&&B.extentToScale(h,this.size);return c&&e?new f({targetGeometry:c,scale:e,rotation:l||
a||0}):null};m([l.property()],d.prototype,"animation",null);m([l.property({readOnly:!0})],d.prototype,"animationManager",void 0);m([l.property({value:null,type:c.Point,dependsOn:["content.viewpoint","ready"]})],d.prototype,"center",null);m([l.property({type:x})],d.prototype,"constraints",null);m([l.property({readOnly:!0})],d.prototype,"content",void 0);m([l.property({value:null,type:c.Extent,dependsOn:["content.viewpoint","ready"]})],d.prototype,"extent",null);m([l.property({readOnly:!0})],d.prototype,
"featuresTilingScheme",void 0);m([l.property()],d.prototype,"fullOpacity",void 0);m([l.property({type:c.Extent})],d.prototype,"initialExtent",void 0);m([l.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],d.prototype,"initialExtentRequired",null);m([l.property()],d.prototype,"labelManager",void 0);m([l.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return p({top:0,right:0,bottom:0,left:0},a)}})],d.prototype,"padding",null);m([l.property({type:Object})],d.prototype,
"renderingOptions",void 0);m([l.property()],d.prototype,"resizeAlign",void 0);m([l.property({readOnly:!0,dependsOn:["content.viewpoint"]})],d.prototype,"resolution",null);m([l.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],d.prototype,"rotation",null);m([l.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],d.prototype,"scale",null);m([l.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],
d.prototype,"spatialReference",void 0);m([l.property({readOnly:!0})],d.prototype,"state",void 0);m([l.property()],d.prototype,"stationary",null);m([l.property({type:H.Timeline,readOnly:!0})],d.prototype,"timeline",void 0);m([l.property({readOnly:!0})],d.prototype,"type",void 0);m([l.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],d.prototype,"updating",null);m([l.property({value:null,type:f,dependsOn:["content.viewpoint","ready"]})],
d.prototype,"viewpoint",null);m([l.property({value:-1,dependsOn:["scale"]})],d.prototype,"zoom",null);return d=m([l.subclass("esri.views.MapViewBase")],d)}(l.declared(u.PopupView(t)))})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q){var A=new f.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});return function(f){function g(a){a=f.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}k(g,f);d=g;g.create=function(a){void 0===a&&(a=
{size:256,spatialReference:c.SpatialReference.WebMercator});var b=a.resolutionFactor||1,e=a.scales,f=a.size||256;a=a.spatialReference||c.SpatialReference.WebMercator;if(!h.isValid(a)){b=[];if(e)for(var l=0;l<e.length;l++){var g=e[l];b.push({level:l,scale:g,resolution:g})}else for(var q=5E-4,l=23;0<=l;l--)b.unshift({level:l,scale:q,resolution:q}),q*=2;return new d({dpi:96,lods:b,origin:new c.Point(0,0,a),size:[f,f],spatialReference:a})}var k=(l=h.getInfo(a))?new c.Point(l.origin[0],l.origin[1],a):
new c.Point(0,0,a),t=1/(39.37*n.getMetersPerUnitForSR(a)*96),A=[];if(e)for(l=0;l<e.length;l++)g=e[l],q=g*t,A.push({level:l,scale:g,resolution:q});else for(g=h.isGeographic(a)?512/f*5.916575275917094E8:256/f*5.91657527591555E8,e=Math.ceil(24/b),A.push({level:0,scale:g,resolution:g*t}),l=1;l<e;l++)g/=Math.pow(2,b),q=g*t,A.push({level:l,scale:g,resolution:q});return new d({dpi:96,lods:A,origin:k,size:[f,f],spatialReference:a})};Object.defineProperty(g.prototype,"isWrappable",{get:function(){var a=this.spatialReference,
b=this.origin;if(a&&b){var e=h.getInfo(a);return a.isWrappable&&Math.abs(e.origin[0]-b.x)<=e.dx}return!1},enumerable:!0,configurable:!0});g.prototype.readOrigin=function(a,b){return c.Point.fromJSON(p({spatialReference:b.spatialReference},a))};Object.defineProperty(g.prototype,"lods",{set:function(a){var b=this,e=0,c=0,h=[];this._levelToLOD={};a&&(e=-Infinity,c=Infinity,a.forEach(function(a){h.push(a.scale);e=a.scale>e?a.scale:e;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",
h);this._set("minScale",e);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});g.prototype.readSize=function(a,b){return[b.cols,b.rows]};g.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};g.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var e=Math.round(a);return b[e]+(e-a)*(b[Math.round(a-.5)]-b[e])};g.prototype.scaleToZoom=function(a){for(var b=this.scales,e=b.length-
1,c=0;c<e;c++){var h=b[c],f=b[c+1];if(h<=a)break;if(f===a)return c+1;if(h>a&&f<a)return c+1-(a-f)/(h-f)}return c};g.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};g.prototype.tileAt=function(a,b,c,f){var g=this.lodAt(a);if(!g)return null;var q;if("number"===typeof b)q=b,b=c;else{if(h.equals(b.spatialReference,this.spatialReference))q=b.x,b=b.y;else{f=l.project(b,this.spatialReference);
if(!f)return null;q=f.x;b=f.y}f=c}c=g.resolution*this.size[0];g=g.resolution*this.size[1];f||(f={id:null,level:0,row:0,col:0,extent:e.create()});f.level=a;f.row=Math.floor((this.origin.y-b)/g+.001);f.col=Math.floor((q-this.origin.x)/c+.001);this.updateTileInfo(f);return f};g.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var c=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=e.create());a.extent[0]=this.origin.x+a.col*
c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=a.extent[0]+c;a.extent[3]=a.extent[1]+b}};g.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};g.prototype.getTileBounds=function(a,b){var e=this.lodAt(b.level).resolution,c=e*this.size[0],e=e*this.size[1];a[0]=this.origin.x+b.col*c;a[1]=this.origin.y-(b.row+1)*e;
a[2]=a[0]+c;a[3]=a[1]+e;return a};g.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};g.prototype.clone=function(){return d.fromJSON(this.write({}))};g.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,e=0;e<a.length;e++){var c=a[e];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}};var d;m([a.property({type:Number,json:{write:!0}})],g.prototype,"compressionQuality",void 0);
m([a.property({type:Number,json:{write:!0}})],g.prototype,"dpi",void 0);m([a.property({type:String,json:{read:A.read,write:A.write,origins:{"web-scene":{read:!1,write:!1}}}})],g.prototype,"format",void 0);m([a.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],g.prototype,"isWrappable",null);m([a.property({type:c.Point,json:{write:!0}})],g.prototype,"origin",void 0);m([a.reader("origin")],g.prototype,"readOrigin",null);m([a.property({type:[q],value:null,json:{write:!0}})],g.prototype,
"lods",null);m([a.property({readOnly:!0})],g.prototype,"minScale",void 0);m([a.property({readOnly:!0})],g.prototype,"maxScale",void 0);m([a.property({readOnly:!0})],g.prototype,"scales",void 0);m([a.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],g.prototype,"size",void 0);m([a.reader("size",["rows","cols"])],g.prototype,"readSize",null);m([a.writer("size",{cols:{type:b.Integer},rows:{type:b.Integer}})],g.prototype,"writeSize",null);m([a.property({type:c.SpatialReference,
json:{write:!0}})],g.prototype,"spatialReference",void 0);return g=d=m([a.subclass("esri.layers.support.TileInfo")],g)}(a.declared(g.JSONSupport))})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(r,d,p,k,m,c,f){return function(g){function d(a){a=g.call(this,a)||this;a.level=0;a.levelValue=
null;a.resolution=0;a.scale=0;return a}p(d,g);a=d;d.prototype.clone=function(){return new a({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var a;k([c.property({type:f.Integer,json:{write:!0}})],d.prototype,"level",void 0);k([c.property({type:String,json:{write:!0}})],d.prototype,"levelValue",void 0);k([c.property({type:Number,json:{write:!0}})],d.prototype,"resolution",void 0);k([c.property({type:Number,json:{write:!0}})],d.prototype,"scale",void 0);return d=
a=k([c.subclass("esri.layers.support.LOD")],d)}(c.declared(m.JSONSupport))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,c,f,g,n,a,b){Object.defineProperty(d,"__esModule",{value:!0});d.PopupView=function(e){return function(e){function h(){return null!==
e&&e.apply(this,arguments)||this}k(h,e);h.prototype.fetchPopupFeatures=function(a,b){return this._fetchPopupFeaturesAsync(a,b)};h.prototype._fetchPopupFeaturesAsync=function(b,e){return c(this,void 0,void 0,function(){var c,h,l,q,d,k;return f(this,function(f){switch(f.label){case 0:return[4,this.when()];case 1:return f.sent(),[4,this._prepareFetchPopupFeatures(b,e)];case 2:return c=f.sent(),h=c.location,l=this._queryLayerPopupFeatures(c,e),q=a.resolve(c.clientOnlyGraphics),d=[q].concat(l),k=a.eachAlwaysValues(d).then(g.flatten),
[2,{promise:k,location:h,promises:d}]}})})};h.prototype._queryLayerPopupFeatures=function(a,b){var e=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,event:n.isSome(b)?b.event:null,signal:n.isSome(b)?b.signal:null,defaultPopupTemplateEnabled:n.isSome(b)?!!b.defaultPopupTemplateEnabled:!1};return c.fetchPopupFeatures(e,a)})};h.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(n.isSome(b)&&b.defaultPopupTemplateEnabled)};
h.prototype._prepareFetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var e,c,h,l,g,q,d,k;return f(this,function(f){switch(f.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return e=f.sent(),c=e.clientGraphics,h=e.queryArea,l=e.location,g=this._getFetchPopupLayerViews(),q=this._graphicsPerFetchPopupLayerView(c,g),d=q.layerViewsAndGraphics,k=q.clientOnlyGraphics,[2,{clientOnlyGraphics:k,layerViewsAndGraphics:d,queryArea:h,location:l}]}})})};h.prototype._popupHitTestGraphics=
function(a,b){return c(this,void 0,void 0,function(){var e,c,h,l,g,q,d=this;return f(this,function(f){switch(f.label){case 0:return[4,this.popupHitTest(a)];case 1:return e=f.sent(),c=e.results,h=e.mapPoint,l=c.filter(function(a){return d._isValidPopupGraphic(a.graphic,b)}),g=l.length?l[0].mapPoint:null,q=l.map(function(a){return a.graphic}),[2,{clientGraphics:q,queryArea:h,location:h||g}]}})})};h.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(e){a._isValidPopupLayerView(e)&&
b.push(e)});n.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};h.prototype._isValidPopupLayerView=function(a){return n.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};h.prototype._graphicsPerFetchPopupLayerView=function(a,b){var e=[],c=new Map;b=b.map(function(a){var b=[];"layer"in a?c.set(a.layer,b):c.set(a.graphics,b);return{layerView:a,graphics:b}});for(var h=0;h<a.length;h++){var f=a[h],l=c.get(f.layer)||
null;l?l.push(f):e.push(f)}return{layerViewsAndGraphics:b,clientOnlyGraphics:e}};return h=m([b.subclass("esri.views.PopupView")],h)}(b.declared(e))}})},"esri/views/2d/AnimationManager":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../geometry ../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/accessorSupport/decorators ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(r,d,p,k,m,c,f,g,n,a,b,e){Object.defineProperty(d,
"__esModule",{value:!0});var h=function(){function a(a,e,c,h){var f=a.targetGeometry,l=e.targetGeometry;h?"string"===typeof h&&(h=b.parse(h)||b.easingFunctions.ease):h=b.easingFunctions.ease;this.easing=h;this.duration=c;this.sCenterX=f.x;this.sCenterY=f.y;this.sScale=a.scale;this.sRotation=a.rotation;this.tCenterX=l.x;this.tCenterY=l.y;this.tScale=e.scale;this.tRotation=e.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;
this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}a.prototype.applyRatio=function(a,b){var e=this.easing(b),c,h;1<=b?(b=this.tCenterX,c=this.tCenterY,h=this.tRotation,e=this.tScale):(b=this.sCenterX+e*this.dCenterX,c=this.sCenterY+e*this.dCenterY,h=this.sRotation+e*this.dRotation,e=this.sScale+e*this.dScale);a.targetGeometry.x=b;a.targetGeometry.y=c;a.scale=e;a.rotation=h};return a}();r=function(f){function l(a){a=f.call(this,
a)||this;a.duration=200;a.transition=null;a.easing=b.easingFunctions.ease;a.view=null;a.viewpoint=null;a.viewpoint=new c({targetGeometry:new m.Point,scale:0,rotation:0});a._updateTask=g.addFrameTask({postRender:a._postRender.bind(a)});a._updateTask.pause();return a}k(l,f);l.prototype.destroy=function(){this._updateTask.remove();this._updateTask=null};l.prototype.animate=function(a,b,c){var f=this;this.stop();e.copy(this.viewpoint,b);this.transition=new h(this.viewpoint,a.target,c&&c.duration||this.duration,
c&&c.easing||this.easing);b=function(){f.animation===a&&f._updateTask&&("finished"===a.state&&(f.transition.applyRatio(f.viewpoint,1),f.view.state&&(f.view.state.viewpoint=f.viewpoint.clone())),f.animation=null,f.updateFunction=null)};a.when(b,b);this._startTime=g.now();this._updateTask.resume();return this.animation=a};l.prototype.animateContinous=function(b,e){var c=this;this.stop();this.updateFunction=e;this.viewpoint=b;var h=new a({target:b.clone()});b=function(){c.animation===h&&c._updateTask&&
(c.animation=null,c.updateFunction=null)};h.when(b,b);this._startTime=g.now();this._updateTask.resume();return this.animation=h};l.prototype.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};l.prototype._postRender=function(b){var e=this.animation;e&&e.state!==a.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(g.now()-this._startTime)/this.transition.duration,e=1<=b,this.transition.applyRatio(this.viewpoint,b),e&&
this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};p([n.property()],l.prototype,"animation",void 0);p([n.property()],l.prototype,"duration",void 0);p([n.property()],l.prototype,"transition",void 0);p([n.property()],l.prototype,"easing",void 0);p([n.property()],l.prototype,"view",void 0);p([n.property()],l.prototype,"viewpoint",void 0);return l=p([n.subclass("esri.views.2d.AnimationManager")],l)}(n.declared(f));d.default=r})},"esri/views/2d/unitBezier":function(){define(["require",
"exports"],function(r,d){function p(d,c,f,g){function k(c,h){var f,l,g,q;g=c;for(l=0;8>l;l++){q=((e*g+b)*g+a)*g-c;if(Math.abs(q)<h)return g;f=(3*e*g+2*b)*g+a;if(1E-6>Math.abs(f))break;g-=q/f}f=0;l=1;g=c;if(g<f)return f;if(g>l)return l;for(;f<l;){q=((e*g+b)*g+a)*g;if(Math.abs(q-c)<h)break;c>q?f=g:l=g;g=.5*(l-f)+f}return g}var a=3*d,b=3*(f-d)-a,e=1-a-b,h=3*c,l=3*(g-c)-h,q=1-h-l;return function(a,b){void 0===b&&(b=1E-6);a=k(a,b);return((q*a+l)*a+h)*a}}Object.defineProperty(d,"__esModule",{value:!0});
d.unitBezier=p;var k=/^cubic-bezier\((.*)\)/;d.easingFunctions={};d.parse=function(m){var c=d.easingFunctions[m]||null;!c&&(m=k.exec(m))&&(m=m[1].split(",").map(function(c){return parseFloat(c.trim())}),4!==m.length||m.some(function(c){return isNaN(c)})||(c=p.apply(p,m)));return c};d.easingFunctions.ease=p(.25,.1,.25,1);d.easingFunctions.linear=p(0,0,1,1);d.easingFunctions.easeIn=d.easingFunctions["ease-in"]=p(.42,0,1,1);d.easingFunctions.easeOut=d.easingFunctions["ease-out"]=p(0,0,.58,1);d.easingFunctions.easeInOut=
d.easingFunctions["ease-in-out"]=p(.42,0,.58,1)})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w,y,z,v){function x(a,e,c,h){return h&&c&&!h.equals(c)&&z.canProject(h,c)&&h.isWebMercator?(h.isWebMercator?(c=e[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(b.common.toRadian(c)),a=l.vec2.set(a,b.common.toRadian(e[0])*J,.5*J*Math.log((1+c)/(1-c)))):(c=b.common.toDegree(e[0]/J),a=l.vec2.set(a,c-360*Math.floor((c+180)/360),b.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*e[1]/J))))),a):l.vec2.copy(a,e)}function D(a){return a.wkid?a:
a.spatialReference||w.WGS84}function C(a,b){return b.type?l.vec2.set(a,b.x,b.y):l.vec2.copy(a,b)}function B(a,b){return Math.max(a.width/b[0],a.height/b[1])*P(a.spatialReference)}function H(a,b,e,h){return k(this,void 0,void 0,function(){var l,q,d,k,n,m,w,v,x,y,D,C,r,Q,B,T,V,E,U,F,G,I,N,J,O,K,M,P;return p(this,function(L){switch(L.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];c.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];q=
a.every(function(a){return"attributes"in a});d=a.some(function(a){return!a.geometry});k=a;if(!(q&&d&&b&&b.allLayerViews))return[3,2];n=new Map;m=0;for(w=a;m<w.length;m++)v=w[m],x=v.layer,y=n.get(x)||[],D=v.attributes[x.objectIdField],null!=D&&y.push(D),n.set(x,y);C=[];n.forEach(function(a,e){var c=b.allLayerViews.find(function(a){return a.layer.id===e.id});if("queryFeatures"in c){var h=e.createQuery();h.objectIds=a;h.returnGeometry=!0;C.push(c.queryFeatures(h))}});return[4,g.all(C)];case 1:r=L.sent();
Q=[];B=0;for(T=r;B<T.length;B++)if((V=T[B])&&V.features&&V.features.length)for(E=0,U=V.features;E<U.length;E++)v=U[E],f.isSome(v.geometry)&&Q.push(v.geometry);k=Q;L.label=2;case 2:F=0,G=k,L.label=3;case 3:if(!(F<G.length))return[3,6];I=G[F];return[4,H(I,b,e,h)];case 4:h=L.sent(),L.label=5;case 5:return F++,[3,3];case 6:return[2,h];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];l=new t(a);return[3,12];case 8:if(!(a instanceof u))return[3,9];l=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];l=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];N=a.layer;J=b.allLayerViews.find(function(a){return a.layer.id===N.id});if(!("queryFeatures"in J))return[3,12];O=N.createQuery();O.objectIds=[a.attributes[N.objectIdField]];O.returnGeometry=!0;return[4,J.queryFeatures(O)];case 11:K=L.sent(),l=f.get(K,"features",0,"geometry"),L.label=12;case 12:if(f.isNone(l))return[2,null];M="point"===l.type?new A({xmin:l.x,
ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference}):l.extent;if(!M)return[2,null];P=z.canProject(M,e);if(!M.spatialReference.equals(e)&&P)M=z.project(M,e);else if(!P)return[2,null];h=h?h.union(M):M.clone();return[2,h]}})})}function E(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var e=0,c=0,h=0;h<a.length;h++)(b=a[h].layer)&&b.minScale&&b.maxScale&&(e=b.minScale<e?b.minScale:e,c=b.maxScale>c?b.maxScale:c);return e&&c?{min:e,max:c}:null}}}function G(a,b){return k(this,void 0,void 0,function(){var e,c,h,f,l,g,d,k,n,u,w,y,r,Q,T,F;return p(this,function(L){switch(L.label){case 0:if(!a||!b)return[2,new m({targetGeometry:new t,scale:0,rotation:0})];e=b.spatialReference;c=b.size;h=b.viewpoint;f=b.constraints;l=null;a instanceof m?l=a:
a.viewpoint?l=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(l=a.target);g=null;if(!l||!l.targetGeometry)return[3,1];g=l.targetGeometry;return[3,10];case 1:if(!(a instanceof A))return[3,2];g=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,H(a.center,b,e)]:[3,10];case 3:return(n=L.sent())?[3,5]:[4,H(a.extent,b,e)];case 4:n=L.sent(),L.label=5;case 5:return(k=n)?[3,7]:[4,H(a.target,b,e)];case 6:k=L.sent(),L.label=7;case 7:return(d=k)?[3,9]:[4,H(a,b,
e)];case 8:d=L.sent(),L.label=9;case 9:g=d,L.label=10;case 10:!g&&h&&h.targetGeometry?g=h.targetGeometry:!g&&b.extent&&(g=b.extent);u=D(g);e||(e=D(b.spatialReference||b.extent||g));if(!v.canProject(g,e)&&u&&!u.equals(e))return[2,null];w=C(q.vec2f64.create(),g.center?g.center:g);y=new t(x(w,w,u,e),e);r=null;r=l&&l.targetGeometry&&"point"===l.targetGeometry.type?l.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&f&&f.effectiveLODs?f.zoomToScale(a.zoom):Array.isArray(g)||
"point"===g.type||"extent"===g.type&&0===g.width&&0===g.height?b.extent&&z.canProject(b.extent,e)?B(z.project(b.extent,e),c):b.extent?B(b.extent,c):h.scale:z.canProject(g.extent,e)?B(z.project(g.extent,e),c):B(g.extent,c);if(Q=E(a))Q.min&&Q.min>r?r=Q.min:Q.max&&Q.max<r&&(r=Q.max);T=0;l?T=l.rotation:a.hasOwnProperty("rotation")?T=a.rotation:h&&(T=h.rotation);F=new m({targetGeometry:y,scale:r,rotation:T});f&&(F=f.fit(F),f.rotationEnabled||(F.rotation=T));return[2,F]}})})}function F(a,b){var e=a.targetGeometry,
c=b.targetGeometry;e.x=c.x;e.y=c.y;e.spatialReference=c.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function I(a,b,e){return e?l.vec2.set(a,.5*(b[0]-e.right+e.left),.5*(b[1]-e.bottom+e.top)):l.vec2.scale(a,b,.5)}function N(a,b,c,h){d.getTransform(a,b,c,h);return e.mat2d.invert(a,a)}function R(a,b,e){var c=M(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return l.vec2.set(a,Math.round(e[1]*c+e[0]*b),Math.round(e[1]*b+e[0]*c))}function O(a){var b=a.scale;a=a.targetGeometry.spatialReference;
a=y.isValid(a)?1/(39.37*n.getMetersPerUnitForSR(a)*96):1;return b*a}function M(a){return b.common.toRadian(a.rotation)||0}function P(a){return y.isValid(a)?39.37*n.getMetersPerUnitForSR(a)*96:1}function S(a){return a.isWrappable?(a=y.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(d,"__esModule",{value:!0});var J=a.wgs84Radius,K=180/Math.PI;d.extentToScale=B;d.create=G;d.copy=F;d.getAnchor=I;d.getExtent=function(){var a=q.vec2f64.create();return function(b,e,c){var h=e.targetGeometry;C(a,
h);e=.5*O(e);b.xmin=a[0]-e*c[0];b.ymin=a[1]-e*c[1];b.xmax=a[0]+e*c[0];b.ymax=a[1]+e*c[1];b.spatialReference=h.spatialReference;return b}}();d.setExtent=function(a,b,e,c,h){d.centerAt(a,b,e.center);a.scale=B(e,c);h&&h.constraints&&h.constraints.constrain(a);return a};d.getOuterExtent=function(){var a=q.vec2f64.create(),b=q.vec2f64.create();return function(e,c,h){C(a,c.targetGeometry);R(b,c,h);h=.5*O(c);e.set({xmin:a[0]-h*b[0],ymin:a[1]-h*b[1],xmax:a[0]+h*b[0],ymax:a[1]+h*b[1],spatialReference:c.targetGeometry.spatialReference});
return e}}();d.getOuterSize=R;d.getPaddingScreenTranslation=function(){var a=q.vec2f64.create();return function(b,e,c){return l.vec2.sub(b,l.vec2.scale(b,e,.5),I(a,e,c))}}();d.getPaddingMapTranslation=function(){var a=h.mat2df64.create(),b=q.vec2f64.create();return function(c,h,f,g){var q=O(h);h=M(h);l.vec2.set(b,q,q);e.mat2d.fromScaling(a,b);e.mat2d.rotate(a,a,h);e.mat2d.translate(a,a,d.getPaddingScreenTranslation(b,f,g));e.mat2d.translate(a,a,[0,g.top-g.bottom]);return l.vec2.set(c,a[4],a[5])}}();
d.getResolution=O;d.getResolutionToScaleFactor=P;d.getMatrix=function(){var a=q.vec2f64.create(),b=q.vec2f64.create(),c=q.vec2f64.create();return function(h,f,g,q,d,k){l.vec2.negate(a,f);l.vec2.scale(b,g,.5*k);l.vec2.set(c,1/q*k,-1/q*k);e.mat2d.identity(h);e.mat2d.translate(h,h,b);d&&e.mat2d.rotate(h,h,d);e.mat2d.scale(h,h,c);e.mat2d.translate(h,h,a);return h}}();d.getTransform=function(){var a=q.vec2f64.create();return function(b,e,c,h){var f=O(e),l=M(e);C(a,e.targetGeometry);return d.getMatrix(b,
a,c,f,l,h)}}();d.getTransformNoRotation=function(){var a=q.vec2f64.create();return function(b,e,c,h){var f=O(e);C(a,e.targetGeometry);return d.getMatrix(b,a,c,f,0,h)}}();d.getWorldWidth=S;d.getWorldScreenWidth=function(a,b){return Math.round(S(a)/b)};d.createAsync=function(a,b){return G(a,b)};d.angleBetween=function(){var a=q.vec2f64.create(),b=q.vec2f64.create(),e=[0,0,0];return function(c,h,f){l.vec2.subtract(a,c,h);l.vec2.normalize(a,a);l.vec2.subtract(b,c,f);l.vec2.normalize(b,b);l.vec2.cross(e,
a,b);c=Math.acos(l.vec2.dot(a,b)/(l.vec2.length(a)*l.vec2.length(b)))*K;0>e[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();d.addPadding=function(){var a=q.vec2f64.create();return function(b,e,c,h){var f=b.targetGeometry;F(b,e);d.getPaddingMapTranslation(a,e,c,h);f.x+=a[0];f.y+=a[1];return b}}();d.removePadding=function(){var a=q.vec2f64.create();return function(b,e,c,h){var f=b.targetGeometry;F(b,e);d.getPaddingMapTranslation(a,e,c,h);f.x-=a[0];f.y-=a[1];return b}}();d.centerAt=function(){var a=q.vec2f64.create();
return function(b,e,c){F(b,e);e=b.targetGeometry;var h=D(c),f=D(e);C(a,c);x(a,a,h,f);e.x=a[0];e.y=a[1];return b}}();d.pixelSizeAt=function(a,b){return O(b)};d.resize=function(){var a=q.vec2f64.create();return function(b,e,c,h,f){f||(f="center");l.vec2.sub(a,c,h);l.vec2.scale(a,a,.5);c=a[0];h=a[1];switch(f){case "center":l.vec2.set(a,0,0);break;case "left":l.vec2.set(a,-c,0);break;case "top":l.vec2.set(a,0,h);break;case "right":l.vec2.set(a,c,0);break;case "bottom":l.vec2.set(a,0,-h);break;case "top-left":l.vec2.set(a,
-c,h);break;case "bottom-left":l.vec2.set(a,-c,-h);break;case "top-right":l.vec2.set(a,c,h);break;case "bottom-right":l.vec2.set(a,c,-h)}d.translateBy(b,e,a);return b}}();d.rotateBy=function(a,b,e){F(a,b);a.rotation+=e;return a};d.rotateTo=function(a,b,e){F(a,b);a.rotation=e;return a};d.scaleBy=function(){var a=q.vec2f64.create();return function(b,e,c,h,f){F(b,e);isNaN(c)||0===c||(d.toMap(a,h,e,f),b.scale=e.scale*c,d.toScreen(a,a,b,f),d.translateBy(b,b,l.vec2.set(a,a[0]-h[0],h[1]-a[1])));return b}}();
d.scaleTo=function(a,b,e){F(a,b);a.scale=e;return a};d.scaleAndRotateBy=function(){var a=q.vec2f64.create();return function(b,e,c,h,f,g){F(b,e);isNaN(c)||0===c||(d.toMap(a,f,e,g),b.scale=e.scale*c,b.rotation+=h,d.toScreen(a,a,b,g),d.translateBy(b,b,l.vec2.set(a,a[0]-f[0],f[1]-a[1])));return b}}();d.padAndScaleAndRotateBy=function(){var a=q.vec2f64.create(),b=q.vec2f64.create();return function(e,c,h,f,g,q,k){d.getPaddingScreenTranslation(b,q,k);l.vec2.add(a,g,b);return f?d.scaleAndRotateBy(e,c,h,f,
a,q):d.scaleBy(e,c,h,a,q)}}();d.toMap=function(){var a=h.mat2df64.create();return function(b,e,c,h){return l.vec2.transformMat2d(b,e,N(a,c,h,1))}}();d.toScreen=function(){var a=h.mat2df64.create();return function(b,e,c,h){return l.vec2.transformMat2d(b,e,d.getTransform(a,c,h,1))}}();d.translateBy=function(){var a=q.vec2f64.create(),b=h.mat2df64.create();return function(c,h,f){F(c,h);var g=O(h),d=c.targetGeometry;e.mat2d.fromRotation(b,M(h));e.mat2d.scale(b,b,q.vec2f64.fromValues(g,g));l.vec2.transformMat2d(a,
f,b);d.x+=a[0];d.y+=a[1];return c}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.common=p})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.mat2d=p})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(r,d,p){function k(c,f,
g){var d=f[0],a=f[1],b=f[2],e=f[3],h=f[4];f=f[5];var l=g[0],q=g[1],k=g[2],m=g[3],t=g[4];g=g[5];c[0]=d*l+b*q;c[1]=a*l+e*q;c[2]=d*k+b*m;c[3]=a*k+e*m;c[4]=d*t+b*g+h;c[5]=a*t+e*g+f;return c}function m(c,f,g){c[0]=f[0]-g[0];c[1]=f[1]-g[1];c[2]=f[2]-g[2];c[3]=f[3]-g[3];c[4]=f[4]-g[4];c[5]=f[5]-g[5];return c}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];return c};d.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;
c[5]=0;return c};d.set=function(c,f,g,d,a,b,e){c[0]=f;c[1]=g;c[2]=d;c[3]=a;c[4]=b;c[5]=e;return c};d.invert=function(c,f){var g=f[0],d=f[1],a=f[2],b=f[3],e=f[4];f=f[5];var h=g*b-d*a;if(!h)return null;h=1/h;c[0]=b*h;c[1]=-d*h;c[2]=-a*h;c[3]=g*h;c[4]=(a*f-b*e)*h;c[5]=(d*e-g*f)*h;return c};d.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};d.multiply=k;d.rotate=function(c,f,g){var d=f[0],a=f[1],b=f[2],e=f[3],h=f[4];f=f[5];var l=Math.sin(g);g=Math.cos(g);c[0]=d*g+b*l;c[1]=a*g+e*l;c[2]=d*-l+b*g;c[3]=
a*-l+e*g;c[4]=h;c[5]=f;return c};d.scale=function(c,f,g){var d=f[1],a=f[2],b=f[3],e=f[4],h=f[5],l=g[0];g=g[1];c[0]=f[0]*l;c[1]=d*l;c[2]=a*g;c[3]=b*g;c[4]=e;c[5]=h;return c};d.translate=function(c,f,g){var d=f[0],a=f[1],b=f[2],e=f[3],h=f[4];f=f[5];var l=g[0];g=g[1];c[0]=d;c[1]=a;c[2]=b;c[3]=e;c[4]=d*l+b*g+h;c[5]=a*l+e*g+f;return c};d.fromRotation=function(c,f){var g=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=g;c[2]=-g;c[3]=f;c[4]=0;c[5]=0;return c};d.fromScaling=function(c,f){c[0]=f[0];c[1]=0;c[2]=0;c[3]=
f[1];c[4]=0;c[5]=0;return c};d.fromTranslation=function(c,f){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=f[0];c[5]=f[1];return c};d.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};d.add=function(c,f,g){c[0]=f[0]+g[0];c[1]=f[1]+g[1];c[2]=f[2]+g[2];c[3]=f[3]+g[3];c[4]=f[4]+g[4];c[5]=f[5]+g[5];return c};d.subtract=m;d.multiplyScalar=
function(c,f,g){c[0]=f[0]*g;c[1]=f[1]*g;c[2]=f[2]*g;c[3]=f[3]*g;c[4]=f[4]*g;c[5]=f[5]*g;return c};d.multiplyScalarAndAdd=function(c,f,g,d){c[0]=f[0]+g[0]*d;c[1]=f[1]+g[1]*d;c[2]=f[2]+g[2]*d;c[3]=f[3]+g[3]*d;c[4]=f[4]+g[4]*d;c[5]=f[5]+g[5]*d;return c};d.exactEquals=function(c,f){return c[0]===f[0]&&c[1]===f[1]&&c[2]===f[2]&&c[3]===f[3]&&c[4]===f[4]&&c[5]===f[5]};d.equals=function(c,f){var g=c[0],d=c[1],a=c[2],b=c[3],e=c[4];c=c[5];var h=f[0],l=f[1],q=f[2],k=f[3],m=f[4];f=f[5];return Math.abs(g-h)<=
p.EPSILON*Math.max(1,Math.abs(g),Math.abs(h))&&Math.abs(d-l)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(a-q)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(q))&&Math.abs(b-k)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(k))&&Math.abs(e-m)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(c-f)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))};d.mul=k;d.sub=m})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(r,d,p){Object.defineProperty(d,
"__esModule",{value:!0});d.mat2df64=p})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,1,0,0]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};d.fromValues=function(d,k,m,c,f,g){return[d,k,m,c,f,g]};d.createView=function(d,k){return new Float64Array(d,k,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(r,
d,p){Object.defineProperty(d,"__esModule",{value:!0});d.vec2=p})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(r,d,p){function k(a,e,c){a[0]=e[0]-c[0];a[1]=e[1]-c[1];return a}function m(a,e,c){a[0]=e[0]*c[0];a[1]=e[1]*c[1];return a}function c(a,e,c){a[0]=e[0]/c[0];a[1]=e[1]/c[1];return a}function f(a,e){var b=e[0]-a[0];a=e[1]-a[1];return Math.sqrt(b*b+a*a)}function g(a,e){var b=e[0]-a[0];a=e[1]-a[1];return b*b+a*a}function n(a){var b=a[0];a=a[1];
return Math.sqrt(b*b+a*a)}function a(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,e){a[0]=e[0];a[1]=e[1];return a};d.set=function(a,e,c){a[0]=e;a[1]=c;return a};d.add=function(a,e,c){a[0]=e[0]+c[0];a[1]=e[1]+c[1];return a};d.subtract=k;d.multiply=m;d.divide=c;d.ceil=function(a,e){a[0]=Math.ceil(e[0]);a[1]=Math.ceil(e[1]);return a};d.floor=function(a,e){a[0]=Math.floor(e[0]);a[1]=Math.floor(e[1]);return a};d.min=function(a,e,c){a[0]=Math.min(e[0],
c[0]);a[1]=Math.min(e[1],c[1]);return a};d.max=function(a,e,c){a[0]=Math.max(e[0],c[0]);a[1]=Math.max(e[1],c[1]);return a};d.round=function(a,e){a[0]=Math.round(e[0]);a[1]=Math.round(e[1]);return a};d.scale=function(a,e,c){a[0]=e[0]*c;a[1]=e[1]*c;return a};d.scaleAndAdd=function(a,e,c,f){a[0]=e[0]+c[0]*f;a[1]=e[1]+c[1]*f;return a};d.distance=f;d.squaredDistance=g;d.length=n;d.squaredLength=a;d.negate=function(a,e){a[0]=-e[0];a[1]=-e[1];return a};d.inverse=function(a,e){a[0]=1/e[0];a[1]=1/e[1];return a};
d.normalize=function(a,e){var b=e[0],c=e[1],b=b*b+c*c;0<b&&(b=1/Math.sqrt(b),a[0]=e[0]*b,a[1]=e[1]*b);return a};d.dot=function(a,e){return a[0]*e[0]+a[1]*e[1]};d.cross=function(a,e,c){e=e[0]*c[1]-e[1]*c[0];a[0]=a[1]=0;a[2]=e;return a};d.lerp=function(a,e,c,f){var b=e[0];e=e[1];a[0]=b+f*(c[0]-b);a[1]=e+f*(c[1]-e);return a};d.random=function(a,e){e=e||1;var b=2*p.RANDOM()*Math.PI;a[0]=Math.cos(b)*e;a[1]=Math.sin(b)*e;return a};d.transformMat2=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[2]*e;a[1]=
c[1]*b+c[3]*e;return a};d.transformMat2d=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[2]*e+c[4];a[1]=c[1]*b+c[3]*e+c[5];return a};d.transformMat3=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[3]*e+c[6];a[1]=c[1]*b+c[4]*e+c[7];return a};d.transformMat4=function(a,e,c){var b=e[0];e=e[1];a[0]=c[0]*b+c[4]*e+c[12];a[1]=c[1]*b+c[5]*e+c[13];return a};d.rotate=function(a,e,c,f){var b=e[0]-c[0];e=e[1]-c[1];var h=Math.sin(f);f=Math.cos(f);a[0]=b*f-e*h+c[0];a[1]=b*h+e*f+c[1];return a};d.angle=function(a,
e){var b=a[0];a=a[1];var c=e[0];e=e[1];var f=b*b+a*a;0<f&&(f=1/Math.sqrt(f));var g=c*c+e*e;0<g&&(g=1/Math.sqrt(g));b=(b*c+a*e)*f*g;return 1<b?0:-1>b?Math.PI:Math.acos(b)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,e){return a[0]===e[0]&&a[1]===e[1]};d.equals=function(a,e){var b=a[0];a=a[1];var c=e[0];e=e[1];return Math.abs(b-c)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(c))&&Math.abs(a-e)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(e))};d.len=n;d.sub=k;d.mul=m;d.div=
c;d.dist=f;d.sqrDist=g;d.sqrLen=a})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f64=p})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0]};d.clone=function(d){return[d[0],d[1]]};d.fromValues=function(d,k){return[d,k]};d.fromArray=function(d){for(var k=
[0,0],m=Math.min(2,d.length),c=0;c<m;++c)k[c]=d[c];return k};d.createView=function(d,k){return new Float64Array(d,k,2)};d.zeros=function(){return[0,0]};d.ones=function(){return[1,1]};d.unitX=function(){return[1,0]};d.unitY=function(){return[0,1]};d.ZEROS=[0,0];d.ONES=[1,1];d.UNIT_X=[1,0];d.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){var c=this;this.view=
d;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio;c._updateParameters.renderingOptions=c.view.renderingOptions};this.update=function(){if(c.updateEnabled){var f=c.view,g=f.labelManager,d=c.graphicsView,a=f.allLayerViews.toArray().filter(function(a){return!("layerViews"in a)&&a.isFulfilled()}),
b=a.length,e=f.state,h=0;for(;h<a.length;h++)if(f=a[h],f.attached){var l=f.lastUpdateId;if(null==l||!c.stationary&&!f.moving)f.moving=!0,f.moveStart();l!==e.id&&f.viewChange();c.stationary&&f.moving&&(f.moving=!1,f.moveEnd());f.lastUpdateId=e.id}g&&g.lastUpdateId!==e.id&&(g.viewChange(),g.lastUpdateId=e.id);d&&d.lastUpdateId!==e.id&&(d.viewChange(),d.lastUpdateId=e.id);g=c._layerViewsTrash;for(d=0;d<g.length;d++)f=g[d],c._detachLayerView(f);for(d=g.length=0;d<b;d++)f=a[d],f.isFulfilled()&&!f.attached&&
c._attachLayerView(f);a=c._updateParameters;b=c._layerViewsToUpdate;f=b.slice();d=b.length=0;for(e=f;d<e.length;d++)f=e[d],"layerViews"in f?b.push(f):f.processUpdate(a);b=c._updatablesToUpdate;f=b.slice();for(b=b.length=0;b<f.length;b++)f[b].processUpdate(a);c.animationInProgress||0!==c._layerViewsToUpdate.length||0!==c._updatablesToUpdate.length||0!==g.length||c._frameTaskHandle.pause()}}}d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var d=this;this.stationary=this.view.stationary;
this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(d._layerViewsTrash,c.removed);d.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){d.stationary=c;d.requestFrame()});this._frameTaskHandle=
p.addFrameTask(this)};d.prototype.stop=function(){var d=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){"layerViews"in c||d._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0,this.animationInProgress=!1)};d.prototype.requestLayerViewUpdate=
function(d){this._layerViewsToUpdate.push(d);this.requestFrame()};d.prototype.requestUpdate=function(d){this._updatablesToUpdate.push(d);this.requestFrame()};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};d.prototype._attachLayerView=function(d){d.attached||(d.attached=!0,d.attach(),this._updateParameters.stationary?d.moving=!1:(d.moving=!0,d.moveStart()))};d.prototype._detachLayerView=function(d){d.attached&&(d.detach(),d.attached=!1,d.moving=!1)};return d}();
d.default=r})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(r,d,p,k){function m(){return Promise.all([new Promise(function(c,a){r(["../webgl"],c,a)}),new Promise(function(c,a){r(["./engine"],c,a)})])}Object.defineProperty(d,"__esModule",{value:!0});var c=function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/TileLayerView2D"],c,a)})})},f=function(){return m().then(function(){return new Promise(function(c,
a){r(["./layers/FeatureLayerView2D"],c,a)})})},g={"base-dynamic":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/BaseDynamicLayerView2D"],c,a)})})},"base-tile":c,"bing-maps":c,csv:f,"geo-rss":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/GeoRSSLayerView2D"],c,a)})})},feature:f,geojson:f,graphics:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/GraphicsLayerView2D"],c,a)})})},group:function(){return m().then(function(){return new Promise(function(c,
a){r(["../layers/GroupLayerView"],c,a)})})},imagery:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/ImageryLayerView2D"],c,a)})})},"imagery-tile":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/TileImageryLayerView2D"],c,a)})})},kml:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/KMLLayerView2D"],c,a)})})},"map-image":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/MapImageLayerView2D"],
c,a)})})},"map-notes":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/MapNotesLayerView2D"],c,a)})})},"open-street-map":c,route:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/RouteLayerView2D"],c,a)})})},stream:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/StreamLayerView2D"],c,a)})})},tile:c,"vector-tile":function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/VectorTileLayerView2D"],
c,a)})})},"web-tile":c,wms:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/WMSLayerView2D"],c,a)})})},wmts:function(){return m().then(function(){return new Promise(function(c,a){r(["./layers/WMTSLayerView2D"],c,a)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};d.layerView2DImporter={hasLayerViewModule:function(c){return k.isSome(g[c.type])},importLayerView:function(c){var a=
g[c.type];if(!k.isSome(a))throw c=c.declaredClass?c.declaredClass.slice(c.declaredClass.lastIndexOf(".")+1):"Unknown",a=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new p(a+":view-not-supported",c+" is not supported in 2D");return a(c)}}})},"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(r,d,p,k,m,c,f,g,n){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.lods=null;b.minScale=0;b.maxScale=0;b.minZoom=-1;b.maxZoom=-1;b.rotationEnabled=!0;b.snapToZoom=!0;return b}p(b,a);b.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};b.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(b.prototype,"_rotation",{get:function(){return new g({rotationEnabled:this.rotationEnabled})},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"_zoom",{get:function(){return new n({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,
configurable:!0});b.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};b.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===b||a<=b};b.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};b.prototype.fit=function(a){return this._zoom.fit(a)};b.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};b.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};b.prototype.snapScale=
function(a){return this._zoom.snapToClosestScale(a)};b.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};b.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};k([c.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],b.prototype,"effectiveLODs",void 0);k([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],b.prototype,"effectiveMinScale",void 0);k([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],b.prototype,"effectiveMaxScale",
void 0);k([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],b.prototype,"effectiveMinZoom",void 0);k([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],b.prototype,"effectiveMaxZoom",void 0);k([c.property({type:[f]})],b.prototype,"lods",void 0);k([c.property()],b.prototype,"minScale",void 0);k([c.property()],b.prototype,"maxScale",void 0);k([c.property()],b.prototype,"minZoom",void 0);k([c.property()],b.prototype,"maxZoom",void 0);k([c.property()],b.prototype,"rotationEnabled",
void 0);k([c.property()],b.prototype,"snapToZoom",void 0);k([c.property()],b.prototype,"view",void 0);k([c.property({type:g,dependsOn:["rotationEnabled"]})],b.prototype,"_rotation",null);k([c.property({dependsOn:["view.spatialReference","view.defaultsFromMap.tileInfo"]})],b.prototype,"_defaultLODs",null);k([c.property({readOnly:!0,type:n,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],b.prototype,"_zoom",null);return b=k([c.subclass("esri.views.2d.MapViewConstraints")],
b)}(c.declared(m.EventedAccessor))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,c){return function(f){function g(){var a=null!==f&&f.apply(this,arguments)||this;a.enabled=!0;a.rotationEnabled=!0;return a}p(g,f);d=g;g.prototype.constrain=function(a,b){if(!this.enabled||!b)return a;this.rotationEnabled||
(a.rotation=b.rotation);return a};g.prototype.clone=function(){return new d({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var d;k([c.property()],g.prototype,"enabled",void 0);k([c.property()],g.prototype,"rotationEnabled",void 0);return g=d=k([c.subclass("esri.views.2d.constraints.RotationConstraint")],g)}(c.declared(m))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),
function(r,d,p,k,m,c,f){return function(g){function d(a){a=g.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}p(d,g);a=d;d.prototype.initialize=function(){var a=this,e,c,f=this.lods;c=this.minScale;e=this.maxScale;var g=this.minZoom,d=this.maxZoom,k=-1,n=-1,m=!1,y=!1;0!==c&&0!==e&&c<e&&(e=[e,c],c=e[0],
e=e[1]);if(f&&f.length){f=f.map(function(a){return a.clone()});f.sort(function(a,b){return b.scale-a.scale});f.forEach(function(a,b){return a.level=b});for(var p,v=0,x=f;v<x.length;v++){var D=x[v];!m&&0<c&&c>=D.scale&&(k=D.level,m=!0);!y&&0<e&&e>=D.scale&&(n=p?p.level:-1,y=!0);p=D}-1===g&&(g=0===c?0:k);-1===d&&(d=0===e?f.length-1:n);g=Math.max(g,0);g=Math.min(g,f.length-1);d=Math.max(d,0);d=Math.min(d,f.length-1);g>d&&(c=[d,g],g=c[0],d=c[1]);c=f[g].scale;e=f[d].scale;f.splice(0,g);f.splice(d-g+1,
f.length);f.forEach(function(b,e){a._lodByScale[b.scale]=b;a._scales[e]=b.scale});this._set("effectiveLODs",f);this._set("effectiveMinZoom",g);this._set("effectiveMaxZoom",d)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",e)};d.prototype.constrain=function(a,e){if(e&&a.scale===e.scale)return a;var b=this.effectiveMinScale,c=this.effectiveMaxScale,f=a.targetGeometry,g=e&&e.targetGeometry,d=0!==b&&a.scale>b;if(0!==c&&a.scale<c||d)b=d?b:c,g&&(e=(b-e.scale)/(a.scale-e.scale),f.x=g.x+(f.x-
g.x)*e,f.y=g.y+(f.y-g.y)*e),a.scale=b;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};d.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};d.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=
b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};d.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,f;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;for(var g=0;g<b.length-1;g++){c=b[g];f=b[g+1];if(f===a)return b=g+this.effectiveMinZoom,b+1;if(c>a&&f<a)return b=g+this.effectiveMinZoom,b+1-(a-f)/(c-f)}};d.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;
a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};d.prototype.snapToNextScale=function(a,e){void 0===e&&(e=.5);if(!this.effectiveLODs)return a*e;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};d.prototype.snapToPreviousScale=function(a,e){void 0===e&&(e=2);if(!this.effectiveLODs)return a*e;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};d.prototype.clone=function(){return new a({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,
maxScale:this.maxScale})};d.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var a;k([c.property({readOnly:!0})],d.prototype,"effectiveLODs",void 0);k([c.property({readOnly:!0})],d.prototype,"effectiveMinZoom",void 0);k([c.property({readOnly:!0})],d.prototype,"effectiveMaxZoom",void 0);k([c.property({readOnly:!0})],d.prototype,
"effectiveMinScale",void 0);k([c.property({readOnly:!0})],d.prototype,"effectiveMaxScale",void 0);k([c.property({type:[f]})],d.prototype,"lods",void 0);k([c.property()],d.prototype,"minZoom",void 0);k([c.property()],d.prototype,"maxZoom",void 0);k([c.property()],d.prototype,"minScale",void 0);k([c.property()],d.prototype,"maxScale",void 0);k([c.property()],d.prototype,"snapToZoom",void 0);return d=a=k([c.subclass("esri.views.2d.constraints.ZoomConstraint")],d)}(c.declared(m))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(r,d,p,k,m,c,f,g,n,a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}p(b,a);k([c.property()],b.prototype,"left",void 0);k([c.property()],b.prototype,"top",void 0);k([c.property()],b.prototype,"right",void 0);k([c.property()],b.prototype,"bottom",void 0);return b=k([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(m));return function(e){function h(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];
var d=e.apply(this,c)||this;d.content=new a;d._updateContent=function(){var a=g.vec2f64.create();return function(){var b=d._get("size"),e=d._get("padding");if(b&&e){var c=d.content;f.vec2.set(a,e.left+e.right,e.top+e.bottom);f.vec2.subtract(a,b,a);f.vec2.copy(c.size,a);if(b=c.viewpoint)d.viewpoint=b}}}();d.watch(["size","padding"],d._updateContent,!0);d.padding=new b;d.size=[0,0];return d}p(h,e);Object.defineProperty(h.prototype,"padding",{set:function(a){this._set("padding",a||new b)},enumerable:!0,
configurable:!0});Object.defineProperty(h.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;n.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var e=b.targetGeometry;a.center[0]=e.x;a.center[1]=e.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=e.spatialReference;this._update()}},enumerable:!0,configurable:!0});k([c.property()],h.prototype,"content",void 0);k([c.property({type:b})],h.prototype,"padding",null);k([c.property()],
h.prototype,"viewpoint",null);return h=k([c.subclass("esri.views.2d.PaddedViewState")],h)}(c.declared(a))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w){var y=[0,0];return function(f){function d(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a=f.apply(this,a)||this;a._viewpoint2D={center:u.vec2f64.create(),rotation:0,scale:0,spatialReference:null};a.center=[0,0];a.extent=new m.Extent;a.id=0;a.inverseTransform=e.mat2df64.create();a.resolution=0;a.rotation=0;a.scale=0;a.transform=e.mat2df64.create();a.transformNoRotation=e.mat2df64.create();a.displayMat3=l.mat3f32.create();a.displayViewMat3=
l.mat3f32.create();a.viewMat3=l.mat3f32.create();a.viewMat2d=b.mat2df32.create();a.worldScreenWidth=0;a.size=[0,0];return a}p(d,f);x=d;Object.defineProperty(d.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,e=a.targetGeometry;
b.center[0]=e.x;b.center[1]=e.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=e.spatialReference}this._update()},enumerable:!0,configurable:!0});d.prototype.copy=function(a){var b=this.size,e=this.viewpoint;e&&b?(this.viewpoint=w.copy(e,a.viewpoint),this._set("size",q.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};d.prototype.clone=function(){return new x({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};d.prototype.toMap=function(a,b,e){if(t.isVec2(b))return q.vec2.transformMat2d(a,b,this.inverseTransform);y[0]=b;y[1]=e;return q.vec2.transformMat2d(a,y,this.inverseTransform)};d.prototype.toScreen=function(a,b,e){if(t.isVec2(b))return q.vec2.transformMat2d(a,b,this.transform);y[0]=b;y[1]=e;return q.vec2.transformMat2d(a,y,this.transform)};d.prototype.toScreenNoRotation=function(a,b,e){if(t.isVec2(b))return q.vec2.transformMat2d(a,b,this.transformNoRotation);y[0]=b;y[1]=
e;return q.vec2.transformMat2d(a,y,this.transformNoRotation)};d.prototype.pixelSizeAt=function(a){return w.pixelSizeAt(a,this.viewpoint)};d.prototype.getScreenTransform=function(a,b){var e=this._viewpoint2D.center,c=this._get("pixelRatio")||1,h=this._get("size");w.getMatrix(a,e,h,b,0,c);return a};d.prototype._update=function(){var b=this._viewpoint2D,e=b.center,f=b.spatialReference,l=b.scale,g=b.rotation,b=this._get("pixelRatio")||1,d=this._get("size");this._set("id",this.id+1);var k=new c({targetGeometry:new m.Point(e[0],
e[1],f),scale:l,rotation:g});this._set("viewpoint",k);if(d&&f&&l)return this.resolution=w.getResolution(k),this.rotation=g,this.scale=l,this.spatialReference=f,q.vec2.copy(this.center,e),h.mat3.set(this.displayMat3,0!==d[0]?2/d[0]:0,0,0,0,0!==d[1]?-2/d[1]:0,0,-1,1,1),l=h.mat3.identity(this.viewMat3),e=A.vec2f32.fromValues(d[0]/2,d[1]/2),f=A.vec2f32.fromValues(-d[0]/2,-d[1]/2),g=n.common.toRadian(g),h.mat3.translate(l,l,e),h.mat3.rotate(l,l,g),h.mat3.translate(l,l,f),h.mat3.multiply(this.displayViewMat3,
this.displayMat3,l),l=a.mat2d.identity(this.viewMat2d),a.mat2d.translate(l,l,e),a.mat2d.rotate(l,l,g),a.mat2d.translate(l,l,f),w.getExtent(this.extent,k,d),w.getTransform(this.transform,k,d,b),a.mat2d.invert(this.inverseTransform,this.transform),w.getTransformNoRotation(this.transformNoRotation,k,d,b),this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution),this};var x;k([g.property({readOnly:!0})],d.prototype,"id",void 0);k([g.property({value:1,json:{write:!0}})],d.prototype,
"pixelRatio",null);k([g.property({json:{write:!0}})],d.prototype,"size",null);k([g.property({type:c,json:{write:!0}})],d.prototype,"viewpoint",null);return d=x=k([g.subclass("esri.views.2d.ViewState")],d)}(g.declared(f.JSONSupport))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df32=p})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],
function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};d.clone=function(d){var k=new Float32Array(6);k[0]=d[0];k[1]=d[1];k[2]=d[2];k[3]=d[3];k[4]=d[4];k[5]=d[5];return k};d.fromValues=function(d,k,m,c,f,g){var n=new Float32Array(6);n[0]=d;n[1]=k;n[2]=m;n[3]=c;n[4]=f;n[5]=g;return n};d.createView=function(d,k){return new Float32Array(d,k,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.mat3=p})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(r,d,p){function k(c,f,g){var d=f[0],a=f[1],b=f[2],e=f[3],h=f[4],l=f[5],k=f[6],m=f[7];f=f[8];var u=g[0],t=g[1],w=g[2],y=g[3],p=g[4],v=g[5],x=g[6],D=g[7];g=g[8];c[0]=u*d+t*e+w*k;c[1]=u*a+t*h+w*m;c[2]=u*b+t*l+w*f;c[3]=y*d+p*e+v*k;c[4]=y*a+p*h+v*m;c[5]=y*b+p*l+v*f;c[6]=x*d+D*e+g*k;c[7]=x*a+D*h+g*m;c[8]=x*b+D*l+g*f;return c}function m(c,
f,g){c[0]=f[0]-g[0];c[1]=f[1]-g[1];c[2]=f[2]-g[2];c[3]=f[3]-g[3];c[4]=f[4]-g[4];c[5]=f[5]-g[5];c[6]=f[6]-g[6];c[7]=f[7]-g[7];c[8]=f[8]-g[8];return c}Object.defineProperty(d,"__esModule",{value:!0});d.fromMat4=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[4];c[4]=f[5];c[5]=f[6];c[6]=f[8];c[7]=f[9];c[8]=f[10];return c};d.copy=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];c[6]=f[6];c[7]=f[7];c[8]=f[8];return c};d.set=function(c,f,g,d,a,b,e,h,l,k){c[0]=f;c[1]=g;c[2]=d;
c[3]=a;c[4]=b;c[5]=e;c[6]=h;c[7]=l;c[8]=k;return c};d.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.transpose=function(c,f){if(c===f){var g=f[1],d=f[2],a=f[5];c[1]=f[3];c[2]=f[6];c[3]=g;c[5]=f[7];c[6]=d;c[7]=a}else c[0]=f[0],c[1]=f[3],c[2]=f[6],c[3]=f[1],c[4]=f[4],c[5]=f[7],c[6]=f[2],c[7]=f[5],c[8]=f[8];return c};d.invert=function(c,f){var g=f[0],d=f[1],a=f[2],b=f[3],e=f[4],h=f[5],l=f[6],k=f[7];f=f[8];var m=f*e-h*k,u=-f*b+h*l,t=k*b-e*l,w=g*m+d*u+a*
t;if(!w)return null;w=1/w;c[0]=m*w;c[1]=(-f*d+a*k)*w;c[2]=(h*d-a*e)*w;c[3]=u*w;c[4]=(f*g-a*l)*w;c[5]=(-h*g+a*b)*w;c[6]=t*w;c[7]=(-k*g+d*l)*w;c[8]=(e*g-d*b)*w;return c};d.adjoint=function(c,f){var g=f[0],d=f[1],a=f[2],b=f[3],e=f[4],h=f[5],l=f[6],k=f[7];f=f[8];c[0]=e*f-h*k;c[1]=a*k-d*f;c[2]=d*h-a*e;c[3]=h*l-b*f;c[4]=g*f-a*l;c[5]=a*b-g*h;c[6]=b*k-e*l;c[7]=d*l-g*k;c[8]=g*e-d*b;return c};d.determinant=function(c){var f=c[3],g=c[4],d=c[5],a=c[6],b=c[7],e=c[8];return c[0]*(e*g-d*b)+c[1]*(-e*f+d*a)+c[2]*
(b*f-g*a)};d.multiply=k;d.translate=function(c,f,g){var d=f[0],a=f[1],b=f[2],e=f[3],h=f[4],l=f[5],k=f[6],m=f[7];f=f[8];var u=g[0];g=g[1];c[0]=d;c[1]=a;c[2]=b;c[3]=e;c[4]=h;c[5]=l;c[6]=u*d+g*e+k;c[7]=u*a+g*h+m;c[8]=u*b+g*l+f;return c};d.rotate=function(c,f,g){var d=f[0],a=f[1],b=f[2],e=f[3],h=f[4],l=f[5],k=f[6],m=f[7];f=f[8];var u=Math.sin(g);g=Math.cos(g);c[0]=g*d+u*e;c[1]=g*a+u*h;c[2]=g*b+u*l;c[3]=g*e-u*d;c[4]=g*h-u*a;c[5]=g*l-u*b;c[6]=k;c[7]=m;c[8]=f;return c};d.scale=function(c,f,g){var d=g[0],
a=g[1];g=g[2];c[0]=d*f[0];c[1]=d*f[1];c[2]=d*f[2];c[3]=a*f[3];c[4]=a*f[4];c[5]=a*f[5];c[6]=g*f[6];c[7]=g*f[7];c[8]=g*f[8];return c};d.scaleByVec2=function(c,f,g){var d=g[0];g=g[1];c[0]=d*f[0];c[1]=d*f[1];c[2]=d*f[2];c[3]=g*f[3];c[4]=g*f[4];c[5]=g*f[5];return c};d.fromTranslation=function(c,f){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=f[0];c[7]=f[1];c[8]=1;return c};d.fromRotation=function(c,f){var g=Math.sin(f);f=Math.cos(f);c[0]=f;c[1]=g;c[2]=0;c[3]=-g;c[4]=f;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};
d.fromScaling=function(c,f){c[0]=f[0];c[1]=0;c[2]=0;c[3]=0;c[4]=f[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.fromMat2d=function(c,f){c[0]=f[0];c[1]=f[1];c[2]=0;c[3]=f[2];c[4]=f[3];c[5]=0;c[6]=f[4];c[7]=f[5];c[8]=1;return c};d.fromQuat=function(c,f){var g=f[0],d=f[1],a=f[2];f=f[3];var b=g+g,e=d+d,h=a+a,g=g*b,l=d*b,d=d*e,k=a*b,m=a*e,a=a*h,b=f*b,e=f*e;f*=h;c[0]=1-d-a;c[3]=l-f;c[6]=k+e;c[1]=l+f;c[4]=1-g-a;c[7]=m-b;c[2]=k-e;c[5]=m+b;c[8]=1-g-d;return c};d.normalFromMat4Legacy=function(c,f){var g=f[0],
d=f[1],a=f[2],b=f[4],e=f[5],h=f[6],l=f[8],k=f[9];f=f[10];var m=f*e-h*k,u=-f*b+h*l,t=k*b-e*l,w=g*m+d*u+a*t;if(!w)return null;w=1/w;c[0]=m*w;c[1]=(-f*d+a*k)*w;c[2]=(h*d-a*e)*w;c[3]=u*w;c[4]=(f*g-a*l)*w;c[5]=(-h*g+a*b)*w;c[6]=t*w;c[7]=(-k*g+d*l)*w;c[8]=(e*g-d*b)*w;return c};d.normalFromMat4=function(c,f){var g=f[0],d=f[1],a=f[2],b=f[3],e=f[4],h=f[5],l=f[6],k=f[7],m=f[8],u=f[9],t=f[10],w=f[11],y=f[12],p=f[13],v=f[14];f=f[15];var x=g*h-d*e,D=g*l-a*e,r=g*k-b*e,B=d*l-a*h,H=d*k-b*h,E=a*k-b*l,G=m*p-u*y,F=
m*v-t*y,m=m*f-w*y,I=u*v-t*p,u=u*f-w*p,t=t*f-w*v,w=x*t-D*u+r*I+B*m-H*F+E*G;if(!w)return null;w=1/w;c[0]=(h*t-l*u+k*I)*w;c[1]=(l*m-e*t-k*F)*w;c[2]=(e*u-h*m+k*G)*w;c[3]=(a*u-d*t-b*I)*w;c[4]=(g*t-a*m+b*F)*w;c[5]=(d*m-g*u-b*G)*w;c[6]=(p*E-v*H+f*B)*w;c[7]=(v*r-y*E-f*D)*w;c[8]=(y*H-p*r+f*x)*w;return c};d.projection=function(c,f,g){c[0]=2/f;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/g;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};d.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+
", "+c[7]+", "+c[8]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};d.add=function(c,f,g){c[0]=f[0]+g[0];c[1]=f[1]+g[1];c[2]=f[2]+g[2];c[3]=f[3]+g[3];c[4]=f[4]+g[4];c[5]=f[5]+g[5];c[6]=f[6]+g[6];c[7]=f[7]+g[7];c[8]=f[8]+g[8];return c};d.subtract=m;d.multiplyScalar=function(c,f,g){c[0]=f[0]*g;c[1]=f[1]*g;c[2]=f[2]*g;c[3]=f[3]*g;c[4]=f[4]*g;c[5]=f[5]*g;
c[6]=f[6]*g;c[7]=f[7]*g;c[8]=f[8]*g;return c};d.multiplyScalarAndAdd=function(c,f,g,d){c[0]=f[0]+g[0]*d;c[1]=f[1]+g[1]*d;c[2]=f[2]+g[2]*d;c[3]=f[3]+g[3]*d;c[4]=f[4]+g[4]*d;c[5]=f[5]+g[5]*d;c[6]=f[6]+g[6]*d;c[7]=f[7]+g[7]*d;c[8]=f[8]+g[8]*d;return c};d.exactEquals=function(c,f){return c[0]===f[0]&&c[1]===f[1]&&c[2]===f[2]&&c[3]===f[3]&&c[4]===f[4]&&c[5]===f[5]&&c[6]===f[6]&&c[7]===f[7]&&c[8]===f[8]};d.equals=function(c,f){var g=c[0],d=c[1],a=c[2],b=c[3],e=c[4],h=c[5],l=c[6],k=c[7];c=c[8];var m=f[0],
u=f[1],t=f[2],w=f[3],y=f[4],z=f[5],v=f[6],x=f[7];f=f[8];return Math.abs(g-m)<=p.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(d-u)<=p.EPSILON*Math.max(1,Math.abs(d),Math.abs(u))&&Math.abs(a-t)<=p.EPSILON*Math.max(1,Math.abs(a),Math.abs(t))&&Math.abs(b-w)<=p.EPSILON*Math.max(1,Math.abs(b),Math.abs(w))&&Math.abs(e-y)<=p.EPSILON*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(h-z)<=p.EPSILON*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(l-v)<=p.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(k-
x)<=p.EPSILON*Math.max(1,Math.abs(k),Math.abs(x))&&Math.abs(c-f)<=p.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))};d.mul=k;d.sub=m})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.mat3f32=p})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(9);
d[0]=1;d[4]=1;d[8]=1;return d};d.clone=function(d){var k=new Float32Array(9);k[0]=d[0];k[1]=d[1];k[2]=d[2];k[3]=d[3];k[4]=d[4];k[5]=d[5];k[6]=d[6];k[7]=d[7];k[8]=d[8];return k};d.fromValues=function(d,k,m,c,f,g,n,a,b){var e=new Float32Array(9);e[0]=d;e[1]=k;e[2]=m;e[3]=c;e[4]=f;e[5]=g;e[6]=n;e[7]=a;e[8]=b;return e};d.createView=function(d,k){return new Float32Array(d,k,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(r,d,p){Object.defineProperty(d,
"__esModule",{value:!0});d.vec2f32=p})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(r,d){function p(){return new Float32Array(2)}function k(c,f){var a=new Float32Array(2);a[0]=c;a[1]=f;return a}function m(){return k(1,1)}function c(){return k(1,0)}function f(){return k(0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=p;d.clone=function(c){var f=new Float32Array(2);f[0]=c[0];f[1]=c[1];return f};d.fromValues=k;d.createView=function(c,
f){return new Float32Array(c,f,2)};d.zeros=function(){return p()};d.ones=m;d.unitX=c;d.unitY=f;d.ZEROS=p();d.ONES=m();d.UNIT_X=c();d.UNIT_Y=f()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(r,d){function p(d){return d instanceof Float32Array&&2<=d.length}function k(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(d,"__esModule",{value:!0});d.isVec2f32=p;d.isVec2f64=k;d.isVec2=function(d){return p(d)||k(d)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(r,d,p,k,m,c){Object.defineProperty(d,"__esModule",{value:!0});d.TileInfoView=p;d.TileKey=k;d.TileQueue=m;d.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(r,d,p,k,m,c,f){var g=new c("0/0/0/0"),n=function(){function a(a,b,c,f,d,g,k,n){this.x=a;this.ymin=b;this.ymax=c;this.invM=f;this.leftAdjust=d;this.rightAdjust=g;this.leftBound=k;this.rightBound=
n}a.create=function(b,c){var e;b[1]>c[1]&&(e=[c,b],b=e[0],c=e[1]);e=b[0];b=b[1];var h=c[0];c=c[1];var f=h-e,d=c-b,d=0!==d?f/d:0,g=(Math.ceil(b)-b)*d,k=(Math.floor(b)-b)*d;return new a(e,Math.floor(b),Math.ceil(c),d,0>f?g:k,0>f?k:g,0>f?h:e,0>f?e:h)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),a=[[0,0],
[0,0],[0,0],[0,0]];return function(){function b(a,b){var e=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var c=a.lods.slice();c.sort(function(a,b){return b.scale-a.scale});var h=this._lodInfos=c.map(function(e){return k.create(a,e,b)});c.forEach(function(a,b){e._infoByLevel[a.level]=h[b];e._infoByScale[a.scale]=h[b];e.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(b.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},
enumerable:!0,configurable:!0});b.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};b.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);g.set(b);return(b=this._infoByLevel[g.level])?b.getTileBounds(a,g,c):a};b.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);g.set(b);return(b=this._infoByLevel[g.level])?b.getTileCoords(a,g,c):a};b.prototype.getTileCoverage=function(b,c,l){void 0===c&&(c=192);void 0===l&&(l="closest");l="closest"===l?this.getClosestInfoForScale(b.scale):
this.getSmallestInfoForScale(b.scale);var e=m.pool.acquire(l),h=this._wrap,d;d=Infinity;var g=-Infinity,k,y,p=e.spans;a[0][0]=a[0][1]=a[1][1]=a[3][0]=-c;a[1][0]=a[2][0]=b.size[0]+c;a[2][1]=a[3][1]=b.size[1]+c;for(c=0;c<a.length;c++){var v=a[c];b.toMap(v,v);v[0]=l.getColumnForX(v[0]);v[1]=l.getRowForY(v[1])}b=[];v=3;for(c=0;4>c;c++){if(a[c][1]!==a[v][1]){var x=n.create(a[c],a[v]);d=Math.min(x.ymin,d);g=Math.max(x.ymax,g);void 0===b[x.ymin]&&(b[x.ymin]=[]);b[x.ymin].push(x)}v=c}if(null==d||null==g||
100<g-d)return null;for(v=[];d<g;){null!=b[d]&&(v=v.concat(b[d]));k=Infinity;y=-Infinity;for(c=v.length-1;0<=c;c--)x=v[c],k=Math.min(k,x.getLeftCol()),y=Math.max(y,x.getRightCol());k=Math.floor(k);y=Math.floor(y);if(d>=l.first[1]&&d<=l.last[1])if(h)if(l.size[0]<l.worldSize[0])for(x=Math.floor(y/l.worldSize[0]),c=Math.floor(k/l.worldSize[0]);c<=x;c++)p.push(new f(d,Math.max(l.getFirstColumnForWorld(c),k),Math.min(l.getLastColumnForWorld(c),y)));else p.push(new f(d,k,y));else k>l.last[0]||y<l.first[0]||
(k=Math.max(k,l.first[0]),y=Math.min(y,l.last[0]),p.push(new f(d,k,y)));d+=1;for(c=v.length-1;0<=c;c--)x=v[c],x.ymax>=d?x.incrRow():v.splice(c,1)}return e};b.prototype.getTileParentId=function(a){g.set(a);a=this._lodInfos.indexOf(this._infoByLevel[g.level])-1;if(0>a)return null;this._getTileIdAtLOD(g,this._lodInfos[a],g);return g.id};b.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};b.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};b.prototype.intersects=function(a,b){g.set(b);b=this._infoByLevel[g.level];var e=a.lodInfo;if(e.resolution>b.resolution){this._getTileIdAtLOD(g,e,g);for(var c=e.denormalizeCol(g.col,g.world),h=0,f=a.spans;h<f.length;h++){var d=f[h];if(d.row===g.row&&d.colFrom<=c&&d.colTo>=c)return!0}}if(e.resolution<b.resolution){f=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,
-Infinity]);a=f[0];var c=f[1],h=f[2],f=f[3],k=b.denormalizeCol(g.col,g.world),d=e.getColumnForX(b.getXForColumn(k)),n=e.getRowForY(b.getYForRow(g.row)),k=e.getColumnForX(b.getXForColumn(k+1))-1;b=e.getRowForY(b.getYForRow(g.row+1))-1;return!(d>f||k<h||n>c||b<a)}var m=e.denormalizeCol(g.col,g.world);return a.spans.some(function(a){return a.row===g.row&&a.colFrom<=m&&a.colTo>=m})};b.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=p.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};b.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var e=1;e<b.length-1;e++)if(a>b[e]+1E-6)return this._infoByScale[b[e-1]];return this._infoByScale[b[b.length-1]]};b.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,e){return Math.abs(e-a)<Math.abs(b-
a)?e:b},b[0]);return this._infoByScale[a]};b.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var e=b.length-1;0<=e;e--)if(a<b[e])return e===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[e]].level+(b[e]-a)/(b[e]-b[e+1]);return this._infoByScale[b[0]].level};b.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};b.prototype._getTileIdAtLOD=function(a,b,c){var e=this._infoByLevel[c.level];a.set(c);
if(b.resolution<e.resolution)return null;if(b.resolution===e.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*e.resolution/b.resolution+.01);a.row=Math.floor(c.row*e.resolution/b.resolution+.01);return a};return b}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(r,d,p,k){function m(c,d,k){c[0]=d;c[1]=k;return c}var c=new k("0/0/0/0");return function(){function f(c,f,a,b,e,h,d,k,m,u,t,w){this.level=
c;this.resolution=f;this.scale=a;this.origin=b;this.first=e;this.last=h;this.size=d;this.norm=k;this.worldStart=m;this.worldEnd=u;this.worldSize=t;this.wrap=w}f.create=function(c,d,a){var b=p.getInfo(c.spatialReference),e=[c.origin.x,c.origin.y],h=[c.size[0]*d.resolution,c.size[1]*d.resolution],l=[-Infinity,-Infinity],g=[Infinity,Infinity],k=[Infinity,Infinity];a&&(m(l,Math.max(0,Math.floor((a.xmin-e[0])/h[0])),Math.max(0,Math.floor((e[1]-a.ymax)/h[1]))),m(g,Math.max(0,Math.floor((a.xmax-e[0])/h[0])),
Math.max(0,Math.floor((e[1]-a.ymin)/h[1]))),m(k,g[0]-l[0]+1,g[1]-l[1]+1));var n;c.isWrappable?(c=[Math.ceil(Math.round(2*b.origin[1]/d.resolution)/c.size[0]),k[1]],b=[Math.floor((b.origin[0]-e[0])/h[0]),l[1]],a=[c[0]+b[0]-1,g[1]],n=!0):(b=l,a=g,c=k,n=!1);return new f(d.level,d.resolution,d.scale,e,l,g,k,h,b,a,c,n)};f.prototype.normalizeCol=function(c){if(!this.wrap)return c;var f=this.worldSize[0];return 0>c?f-1-Math.abs((c+1)%f):c%f};f.prototype.denormalizeCol=function(c,f){return this.wrap?this.worldSize[0]*
f+c:c};f.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};f.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};f.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};f.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};f.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};f.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};f.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};f.prototype.getTileBounds=function(f,d,a){void 0===a&&(a=!1);c.set(d);var b=a?c.col:this.denormalizeCol(c.col,c.world),e=c.row;d=this.getXForColumn(b);a=this.getYForRow(e+1);b=this.getXForColumn(b+1);e=this.getYForRow(e);f[0]=d;f[1]=a;f[2]=b;f[3]=e;return f};f.prototype.getTileCoords=function(f,d,a){void 0===a&&(a=!1);c.set(d);d=a?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(f)?m(f,this.getXForColumn(d),
this.getYForRow(c.row)):(f.x=this.getXForColumn(d),f.y=this.getYForRow(c.row));return f};return f}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(r,d,p){return function(){function d(d,c,f,g){this.set(d,c,f,g)}d.getId=function(d,c,f,g){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+c+"/"+f+"/"+g};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,c,f,g){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),c=d[1],f=d[2],
g=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(c),this.col=parseFloat(f),this.world=parseFloat(g)):(this.level=+d,this.row=+c,this.col=+f,this.world=+g||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var k=this.level+1,c=this.row<<1,f=this.col<<1,g=this.world;return[new d(k,c,f,g),new d(k,c,f+1,g),new d(k,c+1,f,g),new d(k,c+1,f+1,g)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?
-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.pool=new p(d,!0,null,25,50);return d}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(r,d,p){return function(){function d(d){this.lodInfo=d;this.spans=[]}d.prototype.release=function(){};d.prototype.forEach=function(d,c){var f=this.spans,g=this.lodInfo,k=g.level;if(0!==f.length)for(var a=0;a<f.length;a++)for(var b=f[a],e=b.row,h=b.colTo,b=b.colFrom;b<=h;b++)d.call(c,k,e,
g.normalizeCol(b),g.getWorldForColumn(b))};d.pool=new p(d,!0);return d}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(r,d,p){return function(){function d(d,c,f){this.row=d;this.colFrom=c;this.colTo=f}d.pool=new p(d,!0);return d}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/Accessor ../../../core/SetUtils ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(r,d,p,k,m,c,f,g,n){function a(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var b=new Set,e=[],h=new Map,l=[0,0];return function(d){function q(a){a=d.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}k(q,d);q.prototype.initialize=function(){var a=this,b=this.process;this._queue=new n.QueueProcessor({concurrency:this.concurrency,process:function(e,c){e=a._keyToItem.get(e);return b(e,{signal:c})},peeker:"scale-first"===
this.strategy?function(b){return a._peekByScaleFirst(b)}:function(b){return a._peekByCenterFirst(b)}})};q.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(q.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"updating",{get:function(){return 0<
this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});q.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};q.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};q.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};q.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&this._queue.isOngoing(a)};q.prototype.pause=function(){this._queue.pause()};
q.prototype.push=function(a){var b=this,e=a.key.id;if(this.has(e))return this.get(e);var c=this._queue.push(e),h=function(){b._keyToItem.delete(e);b.notifyChange("updating")};this._keyToItem.set(e,a);c.then(h,h);this.notifyChange("updating");return c};q.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};q.prototype.resume=function(){this._queue.resume()};q.prototype._peekByScaleFirst=function(f){var d=this;if(!this.state)return c.firstOfSet(f);var l=this.tileInfoView,g=
Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY;f.forEach(function(a){a=d._keyToItem.get(a);var e=d.tileInfoView.getTileScale(a.key);h.has(e)||(h.set(e,[]),g=Math.max(e,g),k=Math.min(e,k));h.get(e).push(a.key);b.add(e)});var q=this.state.scale;h.has(q)||(a(e,b),e.sort(),q=e.reduce(function(a,b){return Math.abs(b-q)<Math.abs(a-q)?b:a},e[0]));q=Math.min(q,g);q=Math.max(q,k);f=h.get(q);var n=l.getClosestInfoForScale(q),m=n.getColumnForX(this.state.center[0]),u=n.getRowForY(this.state.center[1]);
f.sort(function(a,b){var e=n.denormalizeCol(a.col,a.world),c=n.denormalizeCol(b.col,b.world);return Math.sqrt((m-e)*(m-e)+(u-a.row)*(u-a.row))-Math.sqrt((m-c)*(m-c)+(u-b.row)*(u-b.row))});b.clear();h.clear();return f[0].id};q.prototype._peekByCenterFirst=function(a){var b=this;if(!this.state)return c.firstOfSet(a);var e=this.tileInfoView,h=this.state.center,f=Number.POSITIVE_INFINITY,d=null;a.forEach(function(a){a=b._keyToItem.get(a);e.getTileCoords(l,a.key);var c=g.vec2.distance(l,h);c<f&&(f=c,d=
a.key)});return d.id};p([f.property({constructOnly:!0})],q.prototype,"concurrency",void 0);p([f.property({constructOnly:!0})],q.prototype,"process",void 0);p([f.property()],q.prototype,"state",void 0);p([f.property({constructOnly:!0})],q.prototype,"strategy",void 0);p([f.property({constructOnly:!0})],q.prototype,"tileInfoView",void 0);p([f.property({readOnly:!0})],q.prototype,"updating",null);return q=p([f.subclass("esri.views.2d.tiling.TileQueue")],q)}(f.declared(m))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),
function(r,d,p,k,m,c){Object.defineProperty(d,"__esModule",{value:!0});var f=function(){return function(c,f){this.item=c;this.controller=f;this.promise=null}}();r=function(){function d(c){var a=this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;c.concurrency&&(this.concurrency=c.concurrency);this._queue=new m.default(c.peeker);this.process=c.process;var b=c.scheduler;c.task&&p.isSome(b)&&(this._task=
b.registerTask(c.task,function(b){return a.update(b)},function(){return a.needsUpdate()}))}d.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(d.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});d.prototype.abort=function(c){(c=this._controllers.get(c))&&c.abort()};d.prototype.clear=function(){this._queue.clear();
var c=[];this._controllers.forEach(function(a){return c.push(a)});this._controllers.clear();c.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};d.prototype.get=function(c){return(c=this._deferreds.get(c))?c.promise:void 0};d.prototype.isOngoing=function(c){return this._processingItems.has(c)};d.prototype.has=function(c){return this._deferreds.has(c)};d.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};d.prototype.push=function(c){var a=
this,b=this.get(c);if(b)return b;var e,b=k.createAbortController(),h=function(){f.remove();a._deferreds.delete(c);a._controllers.delete(c);a._queue.remove(c);a._processingItems.delete(c);a._scheduleNext()},f=k.onAbortOrThrow(b.signal,function(){var b=a._processingItems.get(c);b&&b.controller.abort();h();e.reject(k.createAbortError())});e=k.createDeferred();this._deferreds.set(c,e);this._controllers.set(c,b);e.promise.then(h,h);this._queue.push(c);this._scheduleNext();return e.promise};d.prototype.reset=
function(){var c=[];this._processingItems.forEach(function(a){return c.push(a)});this._processingItems.clear();for(var a=0;a<c.length;a++){var b=c[a];this._queue.push(b.item);b.controller.abort()}this._scheduleNext()};d.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};d.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};d.prototype.update=function(c){for(;!c.done&&0<this._queue.length&&this._processingItems.size<
this.concurrency;)this._process(this._queue.pop()),c.madeProgress()};d.prototype._scheduleNext=function(){var f=this;this._task||this._isPaused||this._schedule||(this._schedule=c.schedule(function(){f._schedule=null;f._next()}))};d.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};d.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};d.prototype._processResult=function(c,
a){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).resolve(a))};d.prototype._processError=function(c,a){this._canProcessFulfillment(c)&&(this._scheduleNext(),this._deferreds.get(c.item).reject(a))};d.prototype._canProcessFulfillment=function(c){return this._deferreds.get(c.item)&&this._processingItems.get(c.item)===c?!0:!1};d.prototype._process=function(c){var a=this;if(!p.isNone(c)){var b,e=k.createAbortController(),h=new f(c,e);this._processingItems.set(c,h);try{b=
this.process(c,e.signal)}catch(l){this._processError(h,l)}b&&"function"===typeof b.then?(h.promise=b,b.then(function(b){return a._processResult(h,b)},function(b){return a._processError(h,b)})):this._processResult(h,b)}};Object.defineProperty(d.prototype,"test",{get:function(){var c=this;return{update:function(a){return c.update(a)}}},enumerable:!0,configurable:!0});return d}();d.QueueProcessor=r})},"esri/core/Queue":function(){define(["require","exports","./SetUtils"],function(r,d,p){Object.defineProperty(d,
"__esModule",{value:!0});r=function(){function d(d){void 0===d&&(d=function(c){return p.firstOfSet(c)});this._peeker=d;this._items=new Set}Object.defineProperty(d.prototype,"length",{get:function(){return this._items.size},enumerable:!0,configurable:!0});d.prototype.clear=function(){this._items.clear()};d.prototype.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};d.prototype.push=function(d){this.contains(d)||this._items.add(d)};d.prototype.contains=function(d){return this._items.has(d)};
d.prototype.pop=function(){if(0!==this.length){var d=this.peek();this._items.delete(d);return d}};d.prototype.remove=function(d){this._items.delete(d)};return d}();d.default=r})},"esri/views/2d/tiling/TileStrategy":function(){define("require exports ../../../core/tsSupport/extendsHelper ./TileCache ./TileCoverage ./TileKey".split(" "),function(r,d,p,k,m,c){var f=new c(0,0,0,0),g=new Map,n=[],a=[];return function(){function b(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy=
"keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new k.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}
b.prototype.destroy=function(){this.tileIndex.clear()};b.prototype.update=function(b){var c=this,e=this.resampling,d=this.tileIndex,k=this.tileInfoView.getTileCoverage(b.state,this.buffer,this.coveragePolicy);a.length=0;n.length=0;g.clear();if(k){var u=this.tileInfoView.tileInfo,t=u.minScale,w=u.maxScale,y=k.spans,p=k.lodInfo,v=p.level,x=b.state,D=x.scale,u=x.center,x=x.resolution,r=!b.stationary&&D>this._previousScale;this._previousScale=D;this.tiles.length=0;if(!e&&(D>t||D<w))return this.tiles.length=
0,g.clear(),d.forEach(function(a){c.releaseTile(a)}),d.clear(),a.length=0,n.length=0,g.clear(),m.pool.release(k),!0;d.forEach(function(a){return a.visible=!0});w=t=0;if(0<y.length)for(D=0;D<y.length;D++){b=y[D];for(var B=b.row,H=b.colTo,E=b.colFrom;E<=H;E++)if(t++,b=f.set(v,B,p.normalizeCol(E),p.getWorldForColumn(E)).id,d.has(b))e=d.get(b),e.isReady?(g.set(b,e),w++):r||this._addParentTile(b,g);else{e=void 0;if(this._tileCache&&this._tileCache.has(b)){if(e=this._tileCache.pop(b),this.tileIndex.set(b,
e),e.isReady){g.set(b,e);w++;continue}}else e=this.acquireTile(f),this.tileIndex.set(b,e);r||this._addParentTile(b,g)}}var G=w===t;d.forEach(function(b,e){f.set(e);if(!g.has(e)){var h=c.tileInfoView.intersects(k,f);!h||!r&&G?"purge"===c.cachePolicy?f.level===v&&h||n.push(e):(f.level>v||!h)&&n.push(e):b.isReady?a.push(e):f.level>v&&n.push(e)}});for(y=0;y<a.length;y++)b=a[y],(e=d.get(b))&&e.isReady&&g.set(b,e);for(y=0;y<n.length;y++)b=n[y],e=d.get(b),this._tileCache?this._tileCache.add(e):this.releaseTile(e),
d["delete"](b);g.forEach(function(a){return c.tiles.push(a)});d.forEach(function(a){g.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(v,u,x);m.pool.release(k);return G}};b.prototype.clear=function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};b.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||
b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return b}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,c,f){this.maxSize=d;this.tileInfoView=c;this.removedFunc=f;this._tilePerId=new Map;this._tileKeysPerLevel=
[]}d.prototype.has=function(d){return this._tilePerId.has(d)};d.prototype.get=function(d){return this._tilePerId.get(d)};d.prototype.pop=function(d){var c=this._tilePerId.get(d);if(!c)return null;var f=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](d);for(var g=0;g<f.length;g++)if(f[g].id===d){f.splice(g,1);break}c.visible=!0;return c};d.prototype.add=function(d){d.visible=!1;var c=d.key,f=c.id;this._tilePerId.has(f)||(this._tilePerId.set(f,d),d=c.level,this._tileKeysPerLevel[d]||(this._tileKeysPerLevel[d]=
[]),this._tileKeysPerLevel[d].push(c))};d.prototype.prune=function(d,c,f){var g=this._tilePerId.size;if(!(g<=this.maxSize)){for(var k=this._tileKeysPerLevel.length-1;g>this.maxSize&&0<=k;)k!==d&&(g=this._pruneAroundCenterTile(g,c,f,k)),k--;g>this.maxSize&&(g=this._pruneAroundCenterTile(g,c,f,d))}};d.prototype._pruneAroundCenterTile=function(d,c,f,g){g=this._tileKeysPerLevel[g];if(!g||0===g.length)return d;var k=this.tileInfoView.tileInfo,a=k.size,b=k.origin,e=f*a[0],h=f*a[1],l=[0,0],q=[0,0];for(g.sort(function(a,
f){l[0]=b.x+e*(a.col+.5);l[1]=b.y-h*(a.row+.5);q[0]=b.x+e*(f.col+.5);q[1]=b.y-h*(f.row+.5);return p.vec2.squaredDistance(l,c)-p.vec2.squaredDistance(q,c)});0<g.length&&(f=g.pop(),this._removeTile(f.id),d--,d!==this.maxSize););return d};d.prototype._removeTile=function(d){var c=this._tilePerId.get(d);this.removedFunc&&this.removedFunc(c);this._tilePerId["delete"](d)};return d}();d.default=r})},"esri/views/2d/support/Timeline":function(){define(["require","exports","../../../core/tsSupport/decorateHelper",
"../../../core/tsSupport/declareExtendsHelper","../../../core/accessorSupport/decorators"],function(r,d,p,k,m){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function c(){this._names=new Map}c.prototype.begin=function(c){this._names.has(c)||(this._names.set(c,!1),-1!==c.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark("Esri."+c+".Start"))};c.prototype.end=function(c){this._names.has(c)&&!this._names.get(c)&&(this._names.set(c,!0),performance.mark("Esri."+c+".End"))};
c.prototype.record=function(c){this._names.has(c)||(this._names.set(c,!0),performance.mark("Esri."+c))};return c=p([m.subclass("esri.views.2d.support.Timeline")],c)}();d.Timeline=r})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t,w,y,z,v,x,D,C,B){var H={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},E={zoomIn:["\x3d","+"],zoomOut:["-","_"]},G={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(d){function m(){var a=null!==d&&d.apply(this,arguments)||this;a._handles=new c;return a}p(m,d);m.prototype.initialize=function(){var a=this;this._handles.add([f.whenNot(this.view,
"ready",function(){return a._disconnect()}),f.when(this.view,"ready",function(){return a._connect()})])};m.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};m.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};m.prototype._connect=function(){var c=this,d=new w.BrowserEventSource(this.view.surface,this.view.input),
g=[new D.ImmediateDoubleClick,new C.PointerClickHoldAndDrag,new B.SingleAndDoubleClick,new x.Drag(this.view.navigation),new v.DoubleTapDrag],g=new y.InputManager({eventSource:d,recognizers:g});g.installHandlers("prevent-context-menu",[new z.PreventContextMenu],y.ViewEventPriorities.INTERNAL);g.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new h.GamepadNavigation(this.view),new u.MouseWheelZoom(this.view),new n.DoubleClickZoom(this.view),new n.DoubleClickZoom(this.view,["Ctrl"]),
new b.DragPan(this.view,"primary"),new l.KeyPan(this.view,H),new A.KeyZoom(this.view,E),new q.KeyRotate(this.view,G),new e.DragRotate(this.view,"secondary"),new a.DoubleTapDragZoom(this.view,"touch")],y.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(g);this._source=d;this._inputManager=g;f.init(this.view.navigation,"browserTouchPanEnabled",function(a){c._source.browserTouchPanningEnabled=!a})};Object.defineProperty(m.prototype,"test",{get:function(){return{inputManager:this._inputManager}},
enumerable:!0,configurable:!0});k([g.property()],m.prototype,"view",void 0);return m=k([g.subclass("esri.views.2d.input.MapViewInputManager")],m)}(g.declared(m))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(r,d,p,k,m){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function f(f,d){var a=c.call(this,!0)||this;a.view=f;a.registerIncoming("double-click",
d,function(b){return a._handleDoubleClick(b,d)});return a}p(f,c);f.prototype._handleDoubleClick=function(c,f){m.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),f?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return f}(k.InputHandler);d.DoubleClickZoom=r})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});d.eventMatchesPointerAction=
function(d,k){switch(k){case "primary":return"touch"===d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}};d.eventMatchesMousePointerAction=function(d,k){if("touch"===d.pointerType)return!1;switch(k){case "primary":return 0===d.button;case "secondary":return 2===d.button;case "tertiary":return 1===d.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../../core/compilerUtils","../../../input/InputHandler"],function(r,d,p,k,m){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function f(f,d,a){var b=c.call(this,!0)||this;b.view=f;b.pointerType=d;b.registerIncoming("double-tap-drag",a,function(a){return b._handleDoubleTapDrag(a)});return b}p(f,c);f.prototype._handleDoubleTapDrag=function(c){var f=c.data;if(f.pointerType===this.pointerType){c.stopPropagation();var a=f.action;c=f.delta;var b=this.view,f=b.mapViewNavigation;switch(a){case "begin":this._currentScale=
this._startScale=a=b.scale;this._previousDelta=c;f.begin();break;case "update":if(this._previousDelta.y===c.y)break;this._previousDelta=c;c=this._startScale*Math.pow(1.015,c.y);f.setViewpointImmediate(c/this._currentScale);this._currentScale=c;break;case "end":a=b.constraints;b=a.effectiveLODs;if(!a.snapToZoom||!b){f.end();break}b=a.snapScale(this._currentScale);c=(0<c.y?Math.max(b,a.snapToPreviousScale(this._startScale)):Math.min(b,a.snapToNextScale(this._startScale)))/this._currentScale;f.zoom(c);
break;default:k.neverReached(a)}}};return f}(m.InputHandler);d.DoubleTapDragZoom=r})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(r,d,p,k,m,c){Object.defineProperty(d,"__esModule",{value:!0});r=function(f){function d(d,a,b){var e=f.call(this,!0)||this;e.view=d;e.pointerAction=a;e.registerIncoming("drag",b,function(a){return e._handleDrag(a)});
e.registerIncoming("pointer-down",function(){return e.stopMomentumNavigation()});var h=e.view.mapViewNavigation;e.dragEventSeparator=new k.DragEventSeparator({start:function(a,b){h.pan.begin(e.view,b.data);b.stopPropagation()},update:function(a,b){h.pan.update(e.view,b.data);b.stopPropagation()},end:function(a,b){h.pan.end(e.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,e.pointerAction)}});return e}p(d,f);d.prototype._handleDrag=function(c){var a=
this.view.mapViewNavigation;a.pinch.zoomMomentum||a.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};d.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return d}(m.InputHandler);d.DragPan=r})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(r,d){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d){this.callbacks=d;this.currentCount=0;this.callbacks.condition||
(this.callbacks.condition=function(){return!0})}d.prototype.handle=function(d){var k=d.data,c=k.pointers.size;switch(k.action){case "start":this.currentCount=c;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=d};d.prototype.emitStart=
function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};d.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};d.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return d}();d.DragEventSeparator=r})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(r,d,p,k,m,c){Object.defineProperty(d,"__esModule",{value:!0});r=function(f){function d(d,a,b){var e=f.call(this,!0)||this;e.view=d;e.pointerAction=a;var h=e.view.mapViewNavigation;e.dragEventSeparator=new k.DragEventSeparator({start:function(a,b){h.rotate.begin(e.view,b.data);b.stopPropagation()},update:function(a,b){h.rotate.update(e.view,b.data);b.stopPropagation()},end:function(a,b){h.rotate.end();b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
e.pointerAction)}});e.registerIncoming("drag",b,function(a){return e.dragEventSeparator.handle(a)});return e}p(d,f);return d}(m.InputHandler);d.DragRotate=r})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(r,d,p,k,m,c,f,g,n){Object.defineProperty(d,
"__esModule",{value:!0});r=function(h){function d(a){var b=h.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new k;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}p(d,h);d.prototype.onInstall=function(a){var b=this;h.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=m.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};d.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);h.prototype.onUninstall.call(this)};d.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,n.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,n.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};d.prototype.frameUpdate=function(c){var h=this.transformation;if(!n.isZeroTransformation(h)){var d=this.view.viewpoint.clone(),l=b*this.view.navigation.gamepad.velocityFactor*c;f.translateBy(d,d,[h.translation[0]*l,-h.translation[1]*l]);l=this.view.size;f.scaleAndRotateBy(d,d,1+h.translation[2]*e*c,this.view.constraints.rotationEnabled?
-h.heading*a*c:0,[l[0]/2,l[1]],l);c=this.view.constraints.constrain(d,this.view.viewpoint);this.view.viewpoint=c}};return d}(g.InputHandler);d.GamepadNavigation=r;var a=.06,b=.7,e=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(r,d,p){function k(d){var c=d*d;0>d&&(c*=-1);return c}Object.defineProperty(d,"__esModule",{value:!0});d.quadraticAccentuation=k;d.resetTransformation=function(d){d.translation[0]=0;
d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};d.extractTransformation=function(d,c,f){var g=d.state;d=d.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===d.deviceType?(f.translation[0]=k(g.axes[0]),f.translation[1]=k(g.axes[1]),f.translation[2]=k(g.buttons[7])-k(g.buttons[6]),f.heading=k(g.axes[2]),f.tilt=k(g.axes[3])):"spacemouse"===d.deviceType&&(f.translation[0]=1.2*k(g.axes[0]),f.translation[1]=1.2*k(g.axes[1]),f.translation[2]=2*-k(g.axes[2]),f.heading=1.2*k(g.axes[5]),
f.tilt=1.2*k(g.axes[3]));f.tilt*=c;p.vec3.scale(f.translation,f.translation,1);return f};d.extractTransformationKeyboard=function(d,c){c.translation[0]=d[1]-d[0];c.translation[1]=d[3]-d[2];c.translation[2]=d[4]-d[5];c.heading=d[7]-d[6];c.tilt=d[8]-d[9];return c};d.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(r,d,p,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function c(c,g,k){var a,b=d.call(this,!0)||this;b.view=c;b.keys=g;b._pressed=!1;b._keyMap=(a={},a[g.left]="left",a[g.right]="right",a[g.up]="up",a[g.down]="down",a);b.registerIncoming("key-down",k,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",k,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",k,function(){return b._handleBlur()});return b}p(c,d);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var f=this._keyMap[c.data.key];if(this._pressed=null!=f){if(d)switch(this.view.mapViewNavigation.begin(),f){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(k.InputHandler);d.KeyPan=r})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(r,d,p,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function c(c,g,k){var a,b=d.call(this,!0)||this;b.view=c;b.keys=g;b._pressed=!1;b._keyToDirection=
(a={},a[g.clockwiseOption1]="clockwise",a[g.clockwiseOption2]="clockwise",a[g.counterClockwiseOption1]="counterClockwise",a[g.counterClockwiseOption2]="counterClockwise",a[g.resetOption1]="reset",a[g.resetOption2]="reset",a);b.registerIncoming("key-down",k,function(a){return b._handleKeyDown(a)});b.registerIncoming("key-up",k,function(a){return b._handleKeyUp(a)});b.registerIncoming("blur",k,function(){return b._handleBlur()});return b}p(c,d);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var f=c.modifiers;if(!(0<f.size&&!f.has("Shift")||!this.view.constraints.rotationEnabled)&&(f=this._keyToDirection[c.data.key],this._pressed=null!=f)){if(d)switch(this.view.mapViewNavigation.begin(),f){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;
case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(k.InputHandler);d.KeyRotate=r})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/compilerUtils","../../../input/InputHandler"],function(r,d,p,k,m){Object.defineProperty(d,"__esModule",
{value:!0});r=function(c){function f(f,d,a){var b=c.call(this,!0)||this;b.view=f;b.keys=d;b._keysToZoomAction={};b.registerIncoming("key-down",a,function(a){return b._handleKeyDown(a)});d.zoomIn.forEach(function(a){return b._keysToZoomAction[a]=0});d.zoomOut.forEach(function(a){return b._keysToZoomAction[a]=1});return b}p(f,c);f.prototype._handleKeyDown=function(c){this._handleKey(c)};f.prototype._handleKey=function(c){var f=c.modifiers;if(!(0<f.size)||f.has("Shift"))if(f=c.data.key,f in this._keysToZoomAction){var f=
this._keysToZoomAction[f],a=this.view.mapViewNavigation,b=null;switch(f){case 0:b=a.zoomIn();break;case 1:b=a.zoomOut();break;default:k.neverReached(f);return}a.begin();b.then(function(){return a.end()});c.stopPropagation()}};return f}(m.InputHandler);d.KeyZoom=r})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(r,d,p,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function c(c,
g){var f=d.call(this,!0)||this;f.view=c;f._canZoom=!0;f.registerIncoming("mouse-wheel",g,function(a){return f._handleMouseWheel(a)});return f}p(c,d);c.prototype._handleMouseWheel=function(c){var f=this;if(this.view.navigation.mouseWheelZoomEnabled&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var d=this.view.mapViewNavigation;c=c.data;if(c=d.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.catch(function(){}).then(function(){f._canZoom=!0;d.end()})}};return c}(k.InputHandler);
d.MouseWheelZoom=r})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(r,d,p,k,m){Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function f(f){var d=c.call(this,!0)||this;d.view=f;d.registerIncoming("drag",function(a){return d._handleDrag(a)});d.registerIncoming("pointer-down",function(){return d.stopMomentumNavigation()});var a=d.view.mapViewNavigation;
d.dragEventSeparator=new k.DragEventSeparator({start:function(b,c){a.pinch.begin(d.view,c.data);c.stopPropagation()},update:function(b,c){a.pinch.update(d.view,c.data);c.stopPropagation()},end:function(b,c){a.pinch.end(d.view);c.stopPropagation()},condition:function(a){return 2<=a}});return d}p(f,c);f.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};f.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return f}(m.InputHandler);
d.PinchRotateAndZoom=r})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(r,d,p,k,m,c,f){Object.defineProperty(d,"__esModule",{value:!0});var g=p("trident"),n=p("edge"),a=p("chrome"),b=p("ff"),e=p("safari");r=function(){function d(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=a;m.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new f.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",a)}}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",
this._preventAltKeyDefault)};Object.defineProperty(d.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&
a.has(c)||(this._element.removeEventListener(h[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&h[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(h[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),
this._activePointerCaptures.delete(a.pointerId))};d.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};d.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(A){}};
d.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=k.createScreenPointFromNativeEvent(this._element,a);d.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};d.prototype._handleKey=function(a,b){var e=c.eventKey(b);e&&"key-up"===a&&this._keyDownState.delete(e);b={native:b,key:e,repeat:e&&this._keyDownState.has(e)};e&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};d.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};d.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};d.prototype._handleMouseWheel=function(c,d){var f=d.deltaY;switch(d.deltaMode){case 0:if(g||n)f=f/document.documentElement.clientHeight*
600;break;case 1:f*=30;break;case 2:f*=900}g||n?f*=.7:a||e?f*=.6:b&&(f*=1.375);var h=Math.abs(f);100<h&&(f=f/h*200/(1+Math.exp(-.02*(h-100))));d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0,deltaY:f});this._callback(c,d)};d.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};d.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};d.prototype._preventAltKeyDefault=function(a){"Alt"===
a.key&&a.preventDefault()};d.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};d.test={disableSubpixelCoordinates:!1};return d}();d.BrowserEventSource=r;var h={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave",
"pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function r(c,e){e=e||Object.create(null);var d=document.createEvent("Event");d.initEvent(c,e.bubbles||!1,e.cancelable||!1);c=2;for(var f;c<a.length;c++)f=a[c],d[f]=e[f]||b[c];d.buttons=e.buttons||0;c=0;c=e.pressure&&d.buttons?e.pressure:d.buttons?.5:0;d.x=d.clientX;d.y=d.clientY;d.pointerId=e.pointerId||0;d.width=e.width||0;d.height=e.height||0;d.pressure=c;d.tiltX=e.tiltX||0;d.tiltY=
e.tiltY||0;d.twist=e.twist||0;d.tangentialPressure=e.tangentialPressure||0;d.pointerType=e.pointerType||"";d.hwTimestamp=e.hwTimestamp||0;d.isPrimary=e.isPrimary||!1;return d}function d(){this.array=[];this.size=0}function p(a,b,c,e){this.addCallback=a.bind(e);this.removeCallback=b.bind(e);this.changedCallback=c.bind(e);x&&(this.observer=new x(this.mutationWatcher.bind(this)))}function k(a){return"body /shadow-deep/ "+m(a)}function m(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+
a+"; touch-action: "+a+"; }"}function f(){if(H){C.forEach(function(a){String(a)===a?(B+=m(a)+c(a)+"\n",E&&(B+=k(a)+c(a)+"\n")):(B+=a.selectors.map(m)+c(a.rule)+"\n",E&&(B+=a.selectors.map(k)+c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=B;document.head.appendChild(a)}}function g(a){if(!u.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function n(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),
a.name="InvalidStateError",a;}var a="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),b=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],e=window.Map&&window.Map.prototype.forEach?Map:d;d.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},
get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,e){a.call(b,c,e,this)},this)}};var h="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),l=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,
0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],q={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},A="undefined"!==typeof SVGElementInstance,u={pointermap:new e,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,
c=0,e;c<b&&(e=this.eventSourceList[c]);c++)e.register.call(e,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,e;c<b&&(e=this.eventSourceList[c]);c++)e.unregister.call(e,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new r(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,e=0;e<h.length;e++)c=h[e],b[c]=a[c]||l[e],A&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in q))return b},propagate:function(a,b,c){for(var e=a.target,d=[];null!=e&&
e!==document&&!e.contains(a.relatedTarget);)if(d.push(e),e=e.parentNode,!e)return;c&&d.reverse();d.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var e=new r("gotpointercapture");e.pointerId=a;e._target=b;c||this.asyncDispatchEvent(e)},
releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var e=new r("lostpointercapture");e.pointerId=a;e._target=c;b||this.asyncDispatchEvent(e)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};u.boundHandler=u.eventHandler.bind(u);
var t={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var e=a.elementFromPoint(b,c),d;for(d=this.targetingShadow(e);d;){if(a=
d.elementFromPoint(b,c))return e=this.targetingShadow(a),this.searchRoot(e,b,c)||a;d=this.olderShadow(d)}return e}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),y=Array.prototype.map.call.bind(Array.prototype.map),
z=Array.prototype.slice.call.bind(Array.prototype.slice),v=Array.prototype.filter.call.bind(Array.prototype.filter),x=window.MutationObserver||window.WebKitMutationObserver,D={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};p.prototype={watchSubtree:function(a){this.observer&&t.canTarget(a)&&this.observer.observe(a,D)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(z(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=y(a,this.findElements,this);b.push(v(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var C=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],B="",H=window.PointerEvent||window.MSPointerEvent,E=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,G=u.pointermap,F=[1,4,2,8,16],I=!1;try{I=1===(new MouseEvent("test",{buttons:1})).buttons}catch(L){}var N={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var e=0,d=b.length,f;e<d&&(f=b[e]);e++){var h=Math.abs(a-f.y);if(25>=Math.abs(c-f.x)&&25>=h)return!0}},prepareEvent:function(a){var b=u.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=G.get(this.POINTER_ID);a.buttons=0!==
b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=G.get(this.POINTER_ID),c=this.prepareEvent(a);I||(c.buttons=F[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);G.set(this.POINTER_ID,a);b&&0!==b.buttons?u.move(c):u.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);u.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
G.get(this.POINTER_ID),c=this.prepareEvent(a);if(!I){var e=F[c.button];c.buttons=b?b.buttons&~e:0;a.buttons=c.buttons}G.set(this.POINTER_ID,a);c.buttons&=~F[c.button];0===c.buttons?u.up(c):u.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=-1;G.set(this.POINTER_ID,a);u.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);I||this.prepareButtonsForMove(b,a);b.button=
-1;u.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);u.cancel(a);this.deactivateMouse()},deactivateMouse:function(){G.delete(this.POINTER_ID)}},R=u.captureInfo,O=t.findTarget.bind(t),M=t.allShadows.bind(t),P=u.pointermap,S,J={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){S.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,u.listen(a,this.events),M(a).forEach(function(a){a._scrollType=
c;u.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;u.unlisten(a,this.events);M(a).forEach(function(a){a._scrollType=void 0;u.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),e=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);e&&b?(a._scrollType=e,M(a).forEach(function(a){a._scrollType=e},this)):b?this.elementRemoved(a):e&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",
SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===P.size||1===P.size&&P.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},
removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=u.cloneEvent(a),e=c.pointerId=
a.identifier+2;c.target=R[e]||O(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var d=this;c.preventDefault=function(){d.scrolling=!1;d.firstXY=null;b.preventDefault()};return c},
processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var e;a<c.length;a++)e=c[a],b.call(this,this.touchToPointer(e))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,e=a.length,d;c<e&&(d=a[c]);c++)if(d.identifier===
b)return!0},vacuumTouches:function(a){var b=a.touches;if(P.size>=b.length){var c=[];P.forEach(function(a,e){1===e||this.findTouch(b,e-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){P.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});u.enterOver(a);u.down(a)},touchmove:function(a){this.scrolling||
(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=P.get(a.pointerId);if(b){var c=b.out,e=b.outTarget;u.move(a);c&&e!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=e,c.target=e,a.target?(u.leaveOut(c),u.enterOver(a)):(a.target=e,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(u.up(a),u.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){u.cancel(a);u.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){P.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=N.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};S=new p(J.elementAdded,
J.elementRemoved,J.elementChanged,J);var K=u.pointermap,Q=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;Q&&(b=u.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){K.delete(a)},MSPointerDown:function(a){K.set(a.pointerId,a);a=this.prepareEvent(a);u.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);u.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);u.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);u.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);u.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);u.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=u.makeEvent("lostpointercapture",a);u.dispatchEvent(a)},MSGotPointerCapture:function(a){a=u.makeEvent("gotpointercapture",a);u.dispatchEvent(a)}},V,U,Y;window.navigator.msPointerEnabled?(V=function(a){g(a);n(this);0!==u.pointermap.get(a).buttons&&(u.setCapture(a,this,!0),this.msSetPointerCapture(a))},U=function(a){g(a);u.releaseCapture(a,!0);this.msReleasePointerCapture(a)}):(V=function(a){g(a);n(this);0!==u.pointermap.get(a).buttons&&u.setCapture(a,this)},U=function(a){g(a);
u.releaseCapture(a)});Y=function(a){return!!u.captureInfo[a]};var W=window.PointerEvent||window.MSPointerEvent;return{dispatcher:u,Installer:p,PointerEvent:r,PointerMap:e,targetFinding:t,applyGlobal:function(){f();window.PointerEvent||(window.PointerEvent=r,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),u.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),
u.registerSource("mouse",N),void 0!==window.ontouchstart&&u.registerSource("touch",J)),u.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:V},releasePointerCapture:{value:U},hasPointerCapture:{value:Y}})},applyLocal:function(a){W||(window.PointerEvent||(window.navigator.msPointerEnabled?u.registerSource("ms",T):(u.registerSource("mouse",N),void 0!==window.ontouchstart&&u.registerSource("touch",J)),u.register(document)),
window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=V.bind(a),a.releasePointerCapture=U.bind(a),a.hasPointerCapture=Y.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(r,d,p,k,m,c){Object.defineProperty(d,"__esModule",{value:!0});r=function(){function d(d,
f){var a=this;this.element=d;this.input=f;this.handleGamepadConnectedEvent=function(b){a.handleGamepadConnected(b.gamepad)};this.handleGamepadDisconnectedEvent=function(b){b=b.gamepad;var e=a.inputDevices[b.index];e&&(a.emitGamepadEvent(b,c.extractState(e),!1),a.inputDevices[b.index]=void 0,a.latestUpdate[b.index]=void 0,a.input.gamepad.devices.remove(e))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(b){return a.handleGamepadConnected(b)}),
window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}d.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(d.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"pollingEnabled",{set:function(c){this.supported&&(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});d.prototype.handleGamepadConnected=function(c){var d=new m(c);"unknown"!==d.deviceType&&(this.inputDevices[c.index]=d,this.input.gamepad.devices.add(d))};d.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=k.addFrameTask({update:function(){return c.readGamepadState()}}))};d.prototype.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};d.prototype.readGamepadState=function(){var d=this,f=document.hasFocus(),a=this.element.contains(document.activeElement),b="document"===this.input.gamepad.enabledFocusMode&&!f||"view"===this.input.gamepad.enabledFocusMode&&!a;this.forEachGamepad(function(a){var e=d.inputDevices[a.index];if(e){var f=d.latestUpdate[a.index],e=c.extractState(e),g=b||c.stateIdle(e);f&&(f.timestamp===a.timestamp||!f.active&&g||c.stateEqual(f.state,
e))||d.emitGamepadEvent(a,e,!g)}})};d.prototype.forEachGamepad=function(c){for(var d=window.navigator.getGamepads(),a=0;a<d.length;a++){var b=d[a];this.validate(b)&&c(b)}};d.prototype.emitGamepadEvent=function(c,d,a){var b=this.latestUpdate[c.index];if((b=b&&b.active)||a)this.latestUpdate[c.index]={timestamp:c.timestamp,state:d,active:a},this.callback&&this.callback({device:this.inputDevices[c.index],state:d,action:!b&&a?"start":b&&a?"update":"end"})};d.prototype.validate=function(c){if(!c||!c.connected)return!1;
for(var d=0;d<c.axes.length;d++)if(isNaN(c.axes[d]))return!1;return!0};return d}();d.GamepadSource=r})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.extractState=function(d){var k=d.native;return{buttons:k.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:k.axes.map(function(c){var f=d.axisThreshold,g=Math.abs(c);c=g<f?0:p.sign(c)*(g-f)/(1-f);return c})}};
d.stateEqual=function(d,m){if(d.axes.length!==m.axes.length||d.buttons.length!==m.buttons.length)return!1;for(var c=0;c<d.axes.length;c++)if(d.axes[c]!==m.axes[c])return!1;for(c=0;c<d.buttons.length;c++)if(d.buttons[c]!==m.buttons[c])return!1;return!0};d.stateIdle=function(d){for(var k=0;k<d.axes.length;k++)if(0!==d.axes[k])return!1;for(k=0;k<d.buttons.length;k++)if(0!==d.buttons[k])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler"],function(r,d,p,k){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function c(){var c=d.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}p(c,d);return c}(k.InputHandler);d.PreventContextMenu=r;d.default=r})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/MapUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(r,d,p,k,m,c,f,g,n,a){Object.defineProperty(d,"__esModule",{value:!0});r=function(b){function e(a,e,d,g,m){void 0===a&&(a=n.DefaultParameters.maximumDoubleClickDelay);void 0===e&&(e=n.DefaultParameters.maximumDoubleClickDistance);void 0===d&&(d=n.DefaultParameters.maximumDoubleTouchDelay);void 0===g&&(g=n.DefaultParameters.maximumDoubleTouchDistance);void 0===m&&(m=k.default);var h=b.call(this,!1)||this;h.maximumDoubleClickDelay=a;h.maximumDoubleClickDistance=e;h.maximumDoubleTouchDelay=d;
h.maximumDoubleTouchDistance=g;h._clock=m;h._doubleTapDragReady=!1;h._doubleTapDragActive=!1;h._dragStartCenter=c.createScreenPoint(0,0);h._pointerState=new Map;h._doubleTapDrag=h.registerOutgoing("double-tap-drag");h._dragEventSeparator=new f.DragEventSeparator({start:function(a,b){return h._dragStart(a,b)},update:function(a,b){return h._dragUpdate(b)},end:function(a,b){return h._dragEnd(b)}});h.registerIncoming("drag",function(a){return h._dragEventSeparator.handle(a)});h.registerIncoming("pointer-down",
function(a){return h._handlePointerDown(a)});h.registerIncoming("pointer-up",function(){return h._handlePointerUp()});return h}p(e,b);e.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(e.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});e.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};e.prototype._createDoubleTapDragData=function(a,b,c){return{action:a,delta:b,button:c.button,buttons:c.buttons,pointer:c.pointer,pointers:c.pointers,pointerType:c.pointerType,timestamp:c.timestamp}};e.prototype._dragStart=function(a,b){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var e=b.data;
a=b.modifiers;this._dragStartCenter=e.center;e=this._createDoubleTapDragData("begin",c.createScreenPoint(0,0),e);this._doubleTapDrag.emit(e,void 0,a);b.stopPropagation()}};e.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var b=a.data,e=a.modifiers,d=b.center,d=c.createScreenPoint(d.x-this._dragStartCenter.x,d.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("update",d,b);this._doubleTapDrag.emit(b,void 0,e);a.stopPropagation()}};e.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var b=
a.data,e=a.modifiers,d=b.center,d=c.createScreenPoint(d.x-this._dragStartCenter.x,d.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("end",d,b);this._doubleTapDrag.emit(b,void 0,e);this._doubleTapDragActive=!1;a.stopPropagation()}};e.prototype._handlePointerDown=function(b){var c=b.data,e=this._pointerId(c),d=this._pointerState.get(e),f=c.native.pointerType;d?(f="touch"===f?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(e),a.manhattanDistance(d.event.data,
c)>f?this._storePointerDown(b):this._doubleTapDragReady=!0):this._storePointerDown(b)};e.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};e.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var c=b.button,b=b.pointerType;return"mouse"===b?a+":"+c:""+b};e.prototype._storePointerDown=function(a){var b=this,c=a.data,e=c.native.pointerType,d=this._pointerId(c),c=this._clock.setTimeout(function(){return b._clearPointerDown(d)},"touch"===e?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(d,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()};return e}(g.InputHandler);d.DoubleTapDrag=r})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(r,d,p,k,m,c,f){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,
maximumDoubleTouchDistance:35};r=function(c){function g(a,b,e,f,l){void 0===a&&(a=d.DefaultParameters.maximumDoubleClickDelay);void 0===b&&(b=d.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=d.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=d.DefaultParameters.maximumDoubleTouchDistance);void 0===l&&(l=k.default);var h=c.call(this,!1)||this;h.maximumDoubleClickDelay=a;h.maximumDoubleClickDistance=b;h.maximumDoubleTouchDelay=e;h.maximumDoubleTouchDistance=f;h._clock=l;h._pointerState=
new Map;h._click=h.registerOutgoing("click");h._doubleClick=h.registerOutgoing("double-click");h.registerIncoming("immediate-click",h._handleImmediateClick.bind(h));h.registerIncoming("pointer-drag",h._handlePointerDrag.bind(h));h.registerIncoming("drag",h._handleDrag.bind(h));return h}p(g,c);g.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleClickTimeout&&(a.doubleClickTimeout.remove(),a.doubleClickTimeout=null)})};Object.defineProperty(g.prototype,"hasPendingInputs",
{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleClickTimeout})},enumerable:!0,configurable:!0});g.prototype._pointerId=function(a){a=a.native;return"mouse"===a.pointerType?a.pointerId+":"+a.button:""+a.pointerType};g.prototype._handleImmediateClick=function(a){var b=a.data,c=this._pointerId(b),d=this._pointerState.get(c);if(d){var l="touch"===b.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;f.manhattanDistance(d.event.data,b)>
l?(this._clearDoubleClickTimeout(c,!0),this._startClick(a)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(a)};g.prototype._startClick=function(a){var b=this,c=this._pointerId(a.data);this._pointerState.set(c,{event:a,doubleClickTimeout:this._clock.setTimeout(function(){return b._doubleClickTimeoutExceeded(c)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
g.prototype._handlePointerDrag=function(a){a=this._pointerId(a.data.currentEvent);this._clearDoubleClickTimeout(a,!0)};g.prototype._handleDrag=function(a){a=this._pointerId(a.data.pointer);this._clearDoubleClickTimeout(a,!0)};g.prototype._clearDoubleClickTimeout=function(a,b){var c=this._pointerState.get(a);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,b&&this._doubleClickTimeoutExceeded(a),this._pointerState.delete(a),this.refreshHasPendingInputs())};g.prototype._doubleClickTimeoutExceeded=
function(a){var b=this._pointerState.get(a);this._click.emit(b.event.data,void 0,b.event.modifiers);b.doubleClickTimeout=null;this._pointerState.delete(a);this.refreshHasPendingInputs()};return g}(c.InputHandler);d.SingleAndDoubleClick=r})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.manhattanDistance=function(d,m){return Math.abs(m.x-d.x)+Math.abs(m.y-d.y)};d.euclideanDistance=
function(d,m){var c=m.x-d.x;d=m.y-d.y;return Math.sqrt(c*c+d*d)};d.fitCircleLSQ=function(d,m){m?(m.radius=0,m.center.x=0,m.center.y=0):m={radius:0,center:p.createScreenPoint()};if(0===d.length)return m;if(1===d.length)return m.center.x=d[0].x,m.center.y=d[0].y,m;if(2===d.length){var c=d[0];d=d[1];var f=[d.x-c.x,d.y-c.y],g=f[0],f=f[1];m.radius=Math.sqrt(g*g+f*f)/2;m.center.x=(c.x+d.x)/2;m.center.y=(c.y+d.y)/2;return m}for(var k=0,a=0,b=0;b<d.length;b++)k+=d[b].x,a+=d[b].y;for(var k=k/d.length,a=a/
d.length,e=d.map(function(a){return a.x-k}),h=d.map(function(b){return b.y-a}),l=c=m=0,q=0,A=g=0,b=f=0;b<e.length;b++){var u=e[b],t=h[b],w=u*u,y=t*t;m+=w;c+=y;l+=u*t;q+=w*u;g+=y*t;A+=u*y;f+=t*w}b=m;e=l;h=c;q=.5*(q+A);g=.5*(g+f);f=b*h-l*e;A=(q*h-g*e)/f;g=(b*g-l*q)/f;f=p.createScreenPoint(A+k,g+a);return{radius:Math.sqrt(A*A+g*g+(m+c)/d.length),center:f}}})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),
function(r,d,p,k,m,c,f){function g(a){var b=[];a.forEach(function(a){b.push(k.createScreenPoint(a.event.x,a.event.y))});return f.fitCircleLSQ(b)}function n(a){var c=g(a),e=0;a.forEach(function(a){for(var d=b(a,c),d=d-a.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=a.lastAngle+d;a.lastAngle=d;e+=d-a.initialAngle});e/=a.size||1;return{angle:e,radius:c.radius,center:c.center}}function a(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function b(a,b){a=
a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(d,"__esModule",{value:!0});r=function(c){function e(a){var b=c.call(this,!1)||this;b.navigationTouch=a;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));
b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}p(e,c);e.prototype.createPayload=function(b,c,e,d){return{action:b,pointerType:this.pointerType,button:this.mouseButton,buttons:c.buttons,timestamp:d,pointers:a(this.activePointerMap),pointer:c,angle:e.angle,radius:e.radius,center:e.center}};e.prototype.addPointer=function(a){var c=a.native.pointerId,e=n(this.activePointerMap).angle;a={event:a,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,a);c=b(a,g(this.activePointerMap));
a.initialAngle=c;a.lastAngle=c;this.updatePointerAngles(e)};e.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};e.prototype.removePointer=function(a){var b=n(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};e.prototype.updatePointerAngles=function(a){var c=n(this.activePointerMap);this.activePointerMap.forEach(function(e){e.initialAngle=b(e,c)-a;e.lastAngle=
b(e,c)-a})};e.prototype.emitEvent=function(a,b,c){var e=n(this.activePointerMap);this.drag.emit(this.createPayload(a,b,e,c),void 0,this.startStateModifiers)};e.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=m.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),
this.emitEvent("removed",a.data,m.Milliseconds(a.timestamp))))};e.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,e=m.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,e)):(this.addPointer(c),this.emitEvent("added",c,e),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,
this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,e))}};Object.defineProperty(e.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return e}(c.InputHandler);d.Drag=r;(function(a){a[a.Left=0]="Left";
a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(d.Button||(d.Button={}))})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./SingleAndDoubleClick ./support".split(" "),function(r,d,p,k,m,c,f){Object.defineProperty(d,"__esModule",{value:!0});r=function(d){function g(a,b,e,f,g){void 0===a&&(a=c.DefaultParameters.maximumDoubleClickDelay);
void 0===b&&(b=c.DefaultParameters.maximumDoubleClickDistance);void 0===e&&(e=c.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=c.DefaultParameters.maximumDoubleTouchDistance);void 0===g&&(g=k.default);var h=d.call(this,!1)||this;h.maximumDoubleClickDelay=a;h.maximumDoubleClickDistance=b;h.maximumDoubleTouchDelay=e;h.maximumDoubleTouchDistance=f;h._clock=g;h._pointerState=new Map;h._immediateDoubleClick=h.registerOutgoing("immediate-double-click");h.registerIncoming("pointer-down",h._handlePointerDown.bind(h));
h.registerIncoming("pointer-up",function(a){h._handlePointerLoss(a,"pointer-up")});h.registerIncoming("pointer-capture-lost",function(a){h._handlePointerLoss(a,"pointer-capture-lost")});h.registerIncoming("pointer-cancel",function(a){h._handlePointerLoss(a,"pointer-cancel")});return h}p(g,d);g.prototype.onUninstall=function(){this._pointerState.forEach(function(a){a.immediateDoubleClick&&a.immediateDoubleClick.timeoutHandle.remove()});d.prototype.onUninstall.call(this)};g.prototype._handlePointerDown=
function(a){a=a.data;var b=a.native.pointerId;this._pointerState.has(b)||(this._pointerState.set(b,{downButton:a.native.button,immediateDoubleClick:null}),this.startCapturingPointer(a.native))};g.prototype._handlePointerLoss=function(a,b){var c=a.data,d=this._pointerState.get(c.native.pointerId);if(d&&"pointer-up"===b&&d.downButton===c.native.button)if(b=d.immediateDoubleClick){b.timeoutHandle.remove();var g="touch"===a.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;
f.manhattanDistance(b,a.data)>g?this._startImmediateDoubleClick(a,d):(this._immediateDoubleClick.emit(a.data,void 0,b.modifiers),this._removeState(c.native))}else this._startImmediateDoubleClick(a,d)};g.prototype._startImmediateDoubleClick=function(a,b){var c=this;b.immediateDoubleClick={x:a.data.x,y:a.data.y,modifiers:a.modifiers,timeoutHandle:this._clock.setTimeout(function(){return c._removeState(a.data.native)},"touch"===a.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};
g.prototype._removeState=function(a){this._pointerState.delete(a.pointerId);this.stopCapturingPointer(a);this.refreshHasPendingInputs()};return g}(m.InputHandler);d.ImmediateDoubleClick=r})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(r,d,p,k,m,c){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,
movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};r=function(f){function g(c,a,b,e,h,g){void 0===c&&(c=d.DefaultParameters.maximumClickDelay);void 0===a&&(a=d.DefaultParameters.movementUntilMouseDrag);void 0===b&&(b=d.DefaultParameters.movementUntilPenDrag);void 0===e&&(e=d.DefaultParameters.movementUntilTouchDrag);void 0===h&&(h=d.DefaultParameters.holdDelay);void 0===g&&(g=k.default);var l=f.call(this,!1)||this;l.maximumClickDelay=c;l.movementUntilMouseDrag=a;l.movementUntilPenDrag=
b;l.movementUntilTouchDrag=e;l.holdDelay=h;l._clock=g;l._pointerState=new Map;l._pointerDrag=l.registerOutgoing("pointer-drag");l._immediateClick=l.registerOutgoing("immediate-click");l._pointerHold=l.registerOutgoing("hold");l.registerIncoming("pointer-down",l._handlePointerDown.bind(l));l.registerIncoming("pointer-up",function(a){l._handlePointerLoss(a,"pointer-up")});l.registerIncoming("pointer-capture-lost",function(a){l._handlePointerLoss(a,"pointer-capture-lost")});l.registerIncoming("pointer-cancel",
function(a){l._handlePointerLoss(a,"pointer-cancel")});l._moveHandle=l.registerIncoming("pointer-move",l._handlePointerMove.bind(l));l._moveHandle.pause();return l}p(g,f);g.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});f.prototype.onUninstall.call(this)};g.prototype._handlePointerDown=function(c){var a=this,b=c.data,e=b.native.pointerId,d=null;0===this._pointerState.size&&(d=this._clock.setTimeout(function(){var b=
a._pointerState.get(e);b&&(b.isDragging||(a._pointerHold.emit(b.previousEvent,void 0,c.modifiers),b.holdEmitted=!0),b.holdTimeout=null)},this.holdDelay));d={startEvent:b,previousEvent:b,startTimestamp:c.timestamp,isDragging:!1,downButton:b.native.button,holdTimeout:d,modifiers:new Set};this._pointerState.set(e,d);this.startCapturingPointer(b.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};g.prototype._createPointerDragData=function(c,a,b){return{action:c,startEvent:a.startEvent,
previousEvent:a.previousEvent,currentEvent:b}};g.prototype._handlePointerMove=function(d){var a=d.data,b=this._pointerState.get(a.native.pointerId);if(b){if(b.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",b,a),void 0,b.modifiers);else{var e=c.euclideanDistance(a,b.startEvent),f=this._getDragThreshold(a.native.pointerType);e>f&&this.startDragging(d)}b.previousEvent=a}};g.prototype._getDragThreshold=function(c){switch(c){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;
default:return this.movementUntilMouseDrag}};g.prototype.startDragging=function(c){var a=this,b=c.data,e=b.native.pointerId;this._pointerState.forEach(function(d){null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null);d.isDragging||(d.modifiers=c.modifiers,d.isDragging=!0,e===d.startEvent.native.pointerId?a._pointerDrag.emit(a._createPointerDragData("start",d,b)):a._pointerDrag.emit(a._createPointerDragData("start",d,d.previousEvent),c.timestamp))})};g.prototype._handlePointerLoss=function(c,
a){var b=c.data,e=b.native.pointerId,d=this._pointerState.get(e);d&&(null!=d.holdTimeout&&(d.holdTimeout.remove(),d.holdTimeout=null),d.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",d,"pointer-up"===a?b:d.previousEvent),void 0,d.modifiers):"pointer-up"===a&&d.downButton===b.native.button&&c.timestamp-d.startTimestamp<=this.maximumClickDelay&&!d.holdEmitted&&this._immediateClick.emit(b),this._pointerState.delete(e),this.stopCapturingPointer(b.native),0===this._pointerState.size&&
this._moveHandle.pause())};return g}(m.InputHandler);d.PointerClickHoldAndDrag=r})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,c,f){var g=0;return function(c){function a(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=
.25;return a}p(a,c);Object.defineProperty(a.prototype,"version",{get:function(){return g++},enumerable:!0,configurable:!0});k([f.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],a.prototype,"version",null);k([f.property({type:m})],a.prototype,"color",void 0);k([f.property({type:m})],a.prototype,"haloColor",void 0);k([f.property()],a.prototype,"haloOpacity",void 0);k([f.property()],a.prototype,"fillOpacity",void 0);return a=k([f.subclass("esri.views.2d.support.HighlightOptions")],
a)}(f.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(r,d,p,k,m){function c(c,e){var d=c||{},f=d.format,h=d.quality,g=d.rotation,d=d.disableSlice,l=b(c,e.padding),t;t=e.width-l.left-l.right;e=e.height-l.top-l.bottom;l={x:0,y:0,width:t,height:e};if(c&&c.area){null!=c.area.x&&(l.x=Math.floor(c.area.x));null!=c.area.y&&(l.y=Math.floor(c.area.y));var w=null!=c.area.width?
Math.floor(c.area.width):null,u=null!=c.area.height?Math.floor(c.area.height):null;l.width=t-l.x;l.height=e-l.y;null!=w&&null!=u?(l.width=Math.min(l.width,w),l.height=Math.min(l.height,u)):null==w&&null!=u?(w=Math.min(l.width,w),l.height*=w/l.width,l.width=w):null!=w&&null==u&&(w=Math.min(l.height,u),l.width*=w/l.height,l.height=w)}l=a(l,c);w=Math.floor(Math.max(l.x,0));u=Math.floor(Math.max(l.y,0));t={x:w,y:u,width:Math.floor(Math.min(l.width,t-w)),height:Math.floor(Math.min(l.height,e-u))};e=t.width/
t.height;l=l.width/l.height;l!==e&&(l>e?(e=Math.floor(t.width/l),t={x:t.x,y:Math.floor(t.y+(t.height-e)/2),width:t.width,height:e}):(e=Math.floor(t.height*l),t={x:Math.floor(t.x+(t.width-e)/2),y:t.y,width:e,height:t.height}));l=n(c,t);e=l.width;l=l.height;a:switch(f){case "png":case "jpg":case "jpeg":break a;case null:case void 0:f=q;break a;default:k.neverReached(f),f=q}w=A[f];h=m.clamp(null!=h?h:w,0,100);return{format:f,quality:h,area:t,width:e,height:l,rotation:g,disableSlice:!!d,ignoreBackground:!(!c||
!c.ignoreBackground),ignorePadding:!(!c||!c.ignorePadding)}}function f(a,b){return a.toDataURL(l[b.format],b.quality/100)}function g(a,b,c){c||(e||(e=document.createElement("canvas"),e.width=1,e.height=1),c=e);return c.getContext("2d").createImageData(a,b)}function n(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*
b),height:Math.floor(a)}}function a(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function b(a,b){return!b||a&&a.ignorePadding?u:b}Object.defineProperty(d,"__esModule",{value:!0});d.completeUserSettings=c;d.toRenderSettings=function(a,e){var d=c(a,e),f=d.area,h=d.width/f.width,l=b(d,e.padding),g=l.left+
l.right,k=l.top+l.bottom;return{framebufferWidth:Math.floor((e.width-g)*h+g),framebufferHeight:Math.floor((e.height-k)*h+k),region:{x:Math.floor(f.x*h)+l.left,y:Math.floor(f.y*h)+l.top,width:d.width,height:d.height},format:d.format,quality:d.quality,rotation:d.rotation,pixelRatio:h,layers:a&&a.layers?a.layers:[],disableSlice:d.disableSlice,ignoreBackground:d.ignoreBackground,ignorePadding:d.ignorePadding}};d.encodeResult=function(a,b,c,e){if(e.premultipliedAlpha)for(var d=a.data,h=d.length,l=0;l<
h;l+=4){var g=d[l+3];0<g&&(g/=255,d[l+0]/=g,d[l+1]/=g,d[l+2]/=g)}c.width=a.width;c.height=a.height;d=c.getContext("2d");d.putImageData(a,0,0);e.flipY&&(d.save(),d.globalCompositeOperation="copy",d.scale(1,-1),d.translate(0,-d.canvas.height),d.drawImage(d.canvas,0,0),d.restore());a=d.getImageData(0,0,a.width,a.height);b=f(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};d.toDataUrl=f;d.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(a,
b)}catch(z){h=!1}return g(a,b,c)};d.wrapImageData=function(a,b,c,e){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(a,b,c)}catch(v){h=!1}b=g(b,c,e);b.data.set(a,0);return b};d.resampleHermite=function(a,b,c,e,d,f,h,l){void 0===e&&(e=0);void 0===d&&(d=0);void 0===f&&(f=a.width-e);void 0===h&&(h=a.height-d);void 0===l&&(l=!1);var g=a.data,k=b.width,q=b.height,m=b.data;f/=k;h/=q;var t=Math.ceil(f/2),w=Math.ceil(h/2);a=a.width;for(var u=0;u<q;u++)for(var n=
0;n<k;n++){for(var v=4*(n+(l?q-u-1:u)*k),x=0,p=0,y=0,z=0,A=0,r=0,D=(u+.5)*h,C=Math.floor(u*h);C<(u+1)*h;C++)for(var U=Math.abs(D-(C+.5))/w,Y=(n+.5)*f,U=U*U,W=Math.floor(n*f);W<(n+1)*f;W++){var L=Math.abs(Y-(W+.5))/t,L=Math.sqrt(U+L*L);if(!(1<=L)){var L=2*L*L*L-3*L*L+1,X=4*(e+W+(d+C)*a),r=r+L*g[X+3],p=p+L;!c&&255>g[X+3]&&(L=L*g[X+3]/255);y+=L*g[X];z+=L*g[X+1];A+=L*g[X+2];x+=L}}m[v]=y/x;m[v+1]=z/x;m[v+2]=A/x;m[v+3]=r/p}return b};d.screenshotSuperSampleSettings=function(a,c,e){if(!c)return a;c=a.framebufferWidth;
var d=a.framebufferHeight,f=a.pixelRatio,h=a.region;e=b(a,e);var l=e.left+e.right,g=e.top+e.bottom,k=c-l,q=d-g,m=Math.min(8,Math.min((2048-l)/k,(2048-g)/q));return 1.5>m?a:p({},a,{framebufferWidth:Math.round(k*m)+l,framebufferHeight:Math.round(q*m)+g,pixelRatio:f*m,resample:{region:{x:Math.round((h.x-e.left)*m)+e.left,y:Math.round((h.y-e.top)*m)+e.top,width:Math.round(h.width*m),height:Math.round(h.height*m)},width:c,height:d}})};var e=null,h=!0,l={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},
q="jpg",A={png:100,jpg:98,jpeg:98},u={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(r,d,p,k,m){Object.defineProperty(d,"__esModule",{value:!0});var c={supportsMajorWebPerformanceCaveat:!1};d.check=function(d){d=p({},c,d);return m("esri-webgl")?!d.supportsMajorWebPerformanceCaveat&&m("esri-webgl-major-performance-caveat")?new k("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):m("esri-webgl-high-precision-fragment")?m("esri-webgl-vertex-shader-samplers")?m("esri-webgl-element-index-uint")?m("esri-webgl-standard-derivatives")?m("esri-webgl-instanced-arrays")?null:new k("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new k("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new k("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new k("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new k("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new k("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),
function(r,d,p,k,m,c){return function(c){function d(d){d=c.call(this,d)||this;d.components=["attribution","zoom"];return d}p(d,c);k([m.property()],d.prototype,"components",void 0);return d=k([m.subclass("esri.views.ui.2d.DefaultUI2D")],d)}(m.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e){return function(d){function h(a){a=d.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}p(h,d);h.prototype.initialize=function(){this._handles.add([m.init(this,"components",this._componentsWatcher.bind(this)),m.init(this,"view",this._updateViewAwareWidgets.bind(this))])};h.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=
b._find(a))b.remove(a),a.destroy()})};h.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b._find(c))&&c.widget)&&void 0!==c.view&&(c.view=a)})};h.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};h.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};h.prototype._addComponents=function(a){var b=this;this.initialized&&
a.forEach(function(a){return b.add(b._createComponent(a),b._defaultPositionLookup[a])})};h.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new f({id:a,node:b})};h.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};h.prototype._createAttribution=function(){return new n({view:this.view})};
h.prototype._createCompass=function(){return new a({view:this.view})};h.prototype._createNavigationToggle=function(){return new b({view:this.view})};h.prototype._createZoom=function(){return new e({view:this.view})};k([c.property()],h.prototype,"components",void 0);return h=k([c.subclass("esri.views.ui.DefaultUI")],h)}(c.declared(g))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),
function(r,d,p,k,m,c,f){return function(d){function g(){var a=null!==d&&d.apply(this,arguments)||this;a.widget=null;return a}p(g,d);g.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(g.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"node",{set:function(a){var b=this._get("node");a!==b&&(a&&a.classList.add("esri-component"),b&&b.classList.remove("esri-component"),
this._set("node",a))},enumerable:!0,configurable:!0});g.prototype.castNode=function(a){if(!a)return this._set("widget",null),null;if("string"===typeof a||a&&"nodeType"in a)return this._set("widget",null),c.byId(a);a&&"function"===typeof a.render&&!a.domNode&&(a.domNode=document.createElement("div"));this._set("widget",a);return a.domNode};k([f.property()],g.prototype,"id",null);k([f.property()],g.prototype,"node",null);k([f.cast("node")],g.prototype,"castNode",null);k([f.property({readOnly:!0})],
g.prototype,"widget",void 0);return g=k([f.subclass("esri.views.ui.Component")],g)}(f.declared(m))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(r,d,p,k,m,c,f,g,n,a,b,e){function h(a){return"object"!==
typeof a||a instanceof b||"declaredClass"in a||!("component"in a||"index"in a||"position"in a)?null:a}function l(a,b){var c=b.bottom,e=b.left,d=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=e;a.style.right=d}var q={left:0,top:0,bottom:0,right:0},A={bottom:30,top:15,right:15,left:15};return function(d){function f(a){a=d.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new g;a.view=null;a._initContainers();
return a}k(f,d);f.prototype.initialize=function(){this._handles.add([n.init(this,"view.padding, container",this._applyViewPadding.bind(this)),n.init(this,"padding",this._applyUIPadding.bind(this))])};f.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(f.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),
this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),l(b,{top:"",bottom:"",left:"",right:""}),c.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",
a):this._clearOverride("padding")},enumerable:!0,configurable:!0});f.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:p({},A,a)};Object.defineProperty(f.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});f.prototype.add=function(a,c){var e=this,d,f;if(Array.isArray(a))a.forEach(function(a){return e.add(a,c)});else{var g=h(a);
g&&(d=g.index,c=g.position,a=g.component,f=g.key);c&&"object"===typeof c&&(d=c.index,f=c.key,c=c.position);!a||c&&!this._isValidPosition(c)||(a instanceof b||(a=new b({node:a})),this._place({component:a,position:c,index:d}),this._components.push(a),f&&this._componentToKey.set(a,f))}};f.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var e=this._find(a);if(e){var d=this._componentToKey;if(!d.has(a)||d.get(a)===b)return d=this._components.indexOf(e),
e.node.parentNode&&e.node.parentNode.removeChild(e.node),this._componentToKey.delete(a),this._components.splice(d,1)[0]}}};f.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};f.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var e,d=h(a)||h(b);d&&(e=d.index,b=d.position,a=d.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:e})}};f.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};f.prototype._find=function(a){return a?a instanceof b?this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||
a):null};f.prototype._getViewPadding=function(){return this.get("view.padding")||q};f.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};f.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");var c=document.createElement("div");
c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var f=document.createElement("div");f.classList.add("esri-ui-bottom-left");f.classList.add("esri-ui-corner");a.appendChild(f);var h=document.createElement("div");h.classList.add("esri-ui-bottom-right");h.classList.add("esri-ui-corner");a.appendChild(h);this._innerContainer=a;this._manualContainer=
b;a=e.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":f,"bottom-right":h,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?h:f,"bottom-trailing":a?f:h};this._positionNameToContainerLookup=p({manual:b},this._cornerNameToContainerLookup)};f.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};f.prototype._place=function(a){var b=a.component,e=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var d=-1<e,
f=b.widget;f&&!f._started&&"function"===typeof f.postMixInProperties&&"function"===typeof f.buildRendering&&"function"===typeof f.postCreate&&"function"===typeof f.startup&&b.widget.startup();d?(d=Array.prototype.slice.call(a.children),0===e?a.firstChild?c.insertBefore(b.node,a.firstChild):a.appendChild(b.node):e>=d.length?a.appendChild(b.node):c.insertBefore(b.node,d[e])):a.appendChild(b.node)};f.prototype._applyViewPadding=function(){var a=this.container;a&&l(a,this._toPxPosition(this._getViewPadding()))};
f.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&l(a,this._toPxPosition(this.padding))};f.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};f.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};f.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(e){(c=e===a)&&(b=e);return c});return b};f.prototype._findById=function(a){var b=null,
c;this._components.some(function(e){(c=e.id===a)&&(b=e);return c});return b};f.prototype._findByNode=function(a){var b=null,c;this._components.some(function(e){(c=e.node===a)&&(b=e);return c});return b};m([a.property()],f.prototype,"container",null);m([a.property({dependsOn:["view.height"]})],f.prototype,"height",null);m([a.property({value:A})],f.prototype,"padding",null);m([a.cast("padding")],f.prototype,"castPadding",null);m([a.property()],f.prototype,"view",void 0);m([a.property({dependsOn:["view.width"]})],
f.prototype,"width",null);return f=m([a.subclass("esri.views.ui.UI")],f)}(a.declared(f.EventedAccessor))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(r,d,p,k,m,c,f,g,n,a){return function(b){function e(a){a=b.call(this,a)||this;a._isOpen=
!1;a._attributionTextOverflowed=!1;a._prevSourceNodeHeight=0;a.iconClass="esri-icon-description";a.itemDelimiter=" | ";a.label=m.widgetLabel;a.view=null;a.viewModel=new n;return a}p(e,b);e.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(e.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});e.prototype.render=function(){var b,c=(b={},b["esri-attribution--open"]=this._isOpen,b);return a.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),a.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",a.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri")))};
e.prototype._renderSourcesNode=function(){var b,c=this._isOpen,e=this._isInteractive(),d=e?0:-1,f=this.attributionText,g=e?"button":void 0,c=(b={},b["esri-attribution__sources--open"]=c,b["esri-interactive"]=e,b);return a.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:f,role:g,tabIndex:d})};e.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};e.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var e=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;e&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};e.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};e.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};k([f.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),a.renderable()],e.prototype,"attributionText",null);k([f.property()],e.prototype,"iconClass",void 0);k([f.property(),a.renderable()],e.prototype,"itemDelimiter",void 0);k([f.property()],e.prototype,"label",void 0);k([f.aliasOf("viewModel.view")],e.prototype,"view",void 0);k([f.property({type:n}),a.renderable(["state","view.size"])],e.prototype,"viewModel",void 0);k([a.accessibleHandler()],e.prototype,"_toggleState",null);return e=k([f.subclass("esri.widgets.Attribution")],
e)}(f.declared(g))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q){function A(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function u(a,b,c){c&&b&&(g.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var t=[];return function(b){function d(c){var d=b.call(this,c)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension");d.notifyChange("state")};d._pendingAttributions=new Set;d._fetchedAttributionData=
new Map;d.items=new a;d.view=null;d._allLayerViewsChange=function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");t.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"copyright"in b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))u(t,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&u(t,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?u(t,a,c):u(t,a,b.copyright)}}),A(d.items,t)&&(d.items.removeAll(),d.items.addMany(t)),d.notifyChange("state")):d.clear()};
d.handles.add([e.on(d,"view.allLayerViews","change",d._allLayerViewsChange,d._allLayerViewsChange,d.clear),e.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}p(d,b);d.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});
d.prototype._fetchAttributionData=function(a){return m(this,void 0,void 0,function(){var b,e;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,n.result(a.layer.fetchAttributionData())];case 1:return b=c.sent(),this._pendingAttributions.has(a)&&(e=b.ok?this._createContributionIndex(b.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,e)),this._updateAttributionItems(),
[2]}})})};d.prototype._createContributionIndex=function(a,b){a=a.contributors;var c={};if(!a)return c;for(var e=0;e<a.length;e++){var d=a[e],h=d.coverageAreas;if(!h)return;for(var g=0;g<h.length;g++)for(var l=h[g],k=l.bbox,m=l.zoomMin-(b&&l.zoomMin?1:0),t=l.zoomMax-(b&&l.zoomMax?1:0),l={extent:q.geographicToWebMercator({xmin:k[1],ymin:k[0],xmax:k[3],ymax:k[2],spatialReference:f.SpatialReference.WGS84}),attribution:d.attribution||"",score:null!=l.score?l.score:100,id:e};m<=t;m++)c[m]=c[m]||[],c[m].push(l)}c.maxKey=
Math.max.apply(null,Object.keys(c));return c};d.prototype._getDynamicAttribution=function(a,b,c){var e=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!e||null==c||-1>=c)return"";a=a[c];var d=q.project(e.center.clone().normalize(),b.spatialReference),f={};return a?a.filter(function(a){var b=!f[a.id]&&d&&l.extentContainsPoint(a.extent,d);b&&(f[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):
""};k([h.property({readOnly:!0,type:a})],d.prototype,"items",void 0);k([h.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"state",null);k([h.property()],d.prototype,"view",void 0);return d=k([h.subclass("esri.widgets.Attribution.AttributionViewModel")],d)}(h.declared(b.HandleOwner))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(r,d,p,k,m,c,f,g,n){return function(a){function b(b){b=a.call(this,b)||this;b.goToOverride=null;b.iconClass="esri-icon-locate-circled";b.label=m.widgetLabel;b.view=null;b.viewModel=new g;return b}p(b,a);b.prototype.reset=function(){};b.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,f="disabled"===c,g="compass"===("rotation"===c?"rotation":"compass"),c=f?-1:0,f=(a={},a["esri-disabled"]=f,a["esri-interactive"]=!f,a);a=(b={},b["esri-icon-compass"]=g,b["esri-icon-dial"]=
!g,b);return n.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",f),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":m.reset,title:m.reset},n.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),n.tsx("span",{class:"esri-icon-font-fallback-text"},m.reset))};b.prototype._reset=function(){this.viewModel.reset()};b.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+
a.z+"deg)"}};k([c.aliasOf("viewModel.goToOverride")],b.prototype,"goToOverride",void 0);k([c.property()],b.prototype,"iconClass",void 0);k([c.property()],b.prototype,"label",void 0);k([c.aliasOf("viewModel.view")],b.prototype,"view",void 0);k([c.property({type:g}),n.renderable(["viewModel.orientation","viewModel.state"])],b.prototype,"viewModel",void 0);k([c.aliasOf("viewModel.reset")],b.prototype,"reset",null);k([n.accessibleHandler()],b.prototype,"_reset",null);return b=k([c.subclass("esri.widgets.Compass")],
b)}(c.declared(f))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(r,d,p,k,m,c,f,g,n){return function(a){function b(b){b=a.call(this,b)||this;b._handles=new c;b.orientation={x:0,y:0,z:0};b.view=null;b._updateForCamera=b._updateForCamera.bind(b);b._updateForRotation=
b._updateForRotation.bind(b);b._updateRotationWatcher=b._updateRotationWatcher.bind(b);b.view;return b}p(b,a);b.prototype.initialize=function(){this._handles.add(f.init(this,"view",this._updateRotationWatcher))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});b.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};b.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};b.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};b.prototype._updateRotationWatcher=function(a){this._handles.removeAll();
a&&("2d"===a.type?this._handles.add(f.init(this,"view.rotation",this._updateForRotation)):this._handles.add(f.init(this,"view.camera",this._updateForCamera)))};k([g.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],b.prototype,"canShowNorth",null);k([g.property()],b.prototype,"orientation",void 0);k([g.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],b.prototype,"state",null);k([g.property()],b.prototype,"view",void 0);k([g.property()],
b.prototype,"reset",null);return b=k([g.subclass("esri.widgets.CompassViewModel")],b)}(g.declared(n.GoToMixin(m)))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),function(r,d,p,k,m,c,f,g,n){return function(a){function b(b){b=a.call(this,b)||
this;b.iconClass="esri-icon-pan2";b.label=m.widgetLabel;b.view=null;b.viewModel=new g;return b}p(b,a);Object.defineProperty(b.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});b.prototype.toggle=function(){};b.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),f="pan"===this.get("viewModel.navigationMode"),g=(a={},a["esri-disabled"]=d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,
a);a=(b={},b["esri-navigation-toggle__button--active"]=f,b);b=(c={},c["esri-navigation-toggle__button--active"]=!f,c);c=d?-1:0;return n.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",g),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":m.toggle,title:m.toggle},n.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",a)},n.tsx("span",{class:"esri-icon-pan"})),n.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",b)},n.tsx("span",{class:"esri-icon-rotate"})))};b.prototype._toggle=function(){this.toggle()};k([c.property()],b.prototype,"iconClass",void 0);k([c.property()],b.prototype,"label",void 0);k([c.property({value:"vertical"}),n.renderable()],b.prototype,"layout",null);k([c.aliasOf("viewModel.view"),n.renderable()],b.prototype,"view",void 0);k([c.property({type:g}),n.renderable(["viewModel.state","viewModel.navigationMode"])],b.prototype,"viewModel",void 0);k([c.aliasOf("viewModel.toggle")],
b.prototype,"toggle",null);k([n.accessibleHandler()],b.prototype,"_toggle",null);return b=k([c.subclass("esri.widgets.NavigationToggle")],b)}(c.declared(f))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,c,f,g){return function(d){function a(a){a=
d.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}p(a,d);a.prototype.initialize=function(){this._handles.add(f.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});a.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};a.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};k([g.property({dependsOn:["view.ready"],readOnly:!0})],a.prototype,"state",null);k([g.property()],a.prototype,"navigationMode",void 0);k([g.property()],a.prototype,"view",void 0);k([g.property()],a.prototype,"toggle",null);return a=k([g.subclass("esri.widgets.NavigationToggleViewModel")],
a)}(g.declared(m))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(r,d,p,k,m,c,f,g,n,a){return function(b){function e(a){a=b.call(this,a)||this;a.iconClass="esri-icon-zoom-in-magnifying-glass";a.label=m.widgetLabel;a.view=null;a.viewModel=new n;return a}p(e,b);e.prototype.postInitialize=
function(){this._zoomInButton=new g({action:this.zoomIn,iconClass:"esri-icon-plus",title:m.zoomIn});this._zoomOutButton=new g({action:this.zoomOut,iconClass:"esri-icon-minus",title:m.zoomOut})};Object.defineProperty(e.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});e.prototype.render=function(){var b,c=this.viewModel,e=(b={},b["esri-zoom--horizontal"]="horizontal"===this.layout,b);this._zoomInButton.enabled="ready"===c.state&&
c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return a.tsx("div",{class:this.classes("esri-zoom esri-widget",e)},this._zoomInButton.render(),this._zoomOutButton.render())};e.prototype.zoomIn=function(){};e.prototype.zoomOut=function(){};k([c.property()],e.prototype,"iconClass",void 0);k([c.property()],e.prototype,"label",void 0);k([c.property({value:"vertical"}),a.renderable()],e.prototype,"layout",null);k([c.aliasOf("viewModel.view"),a.renderable()],e.prototype,"view",void 0);
k([c.property({type:n}),a.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],e.prototype,"viewModel",void 0);k([c.aliasOf("viewModel.zoomIn")],e.prototype,"zoomIn",null);k([c.aliasOf("viewModel.zoomOut")],e.prototype,"zoomOut",null);return e=k([c.subclass("esri.widgets.Zoom")],e)}(c.declared(f))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(r,d,p,k,m,c,f){return function(c){function d(){var a=null!==c&&c.apply(this,arguments)||this;a.enabled=!0;a.iconClass="";a.title="";return a}p(d,c);d.prototype.render=function(){var a,b,c=this.enabled?0:-1,d=(a={},a["esri-disabled"]=!this.enabled,a["esri-interactive"]=this.enabled,a);a=(b={},b[this.iconClass]=!!this.iconClass,b);return f.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",d),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},f.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",a)}),f.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};d.prototype._triggerAction=function(){this.action.call(this)};k([m.property()],d.prototype,"action",void 0);k([m.property(),f.renderable()],d.prototype,"enabled",void 0);k([m.property(),f.renderable()],d.prototype,"iconClass",void 0);k([m.property(),f.renderable()],d.prototype,"title",void 0);k([f.accessibleHandler()],d.prototype,
"_triggerAction",null);return d=k([m.subclass("esri.widgets.IconButton")],d)}(m.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(r,d,p,k,m,c,f,g,n){return function(a){function b(b){b=a.call(this,b)||this;b.canZoomIn=!1;b.canZoomOut=!1;b.zoomIn=b.zoomIn.bind(b);
b.zoomOut=b.zoomOut.bind(b);return b}p(b,a);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new g({view:a}):"3d"===a.type&&(this._zoomConditions=new n({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():c.ignoreAbortErrors(a.goTo({zoomFactor:2}))}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():c.ignoreAbortErrors(a.goTo({zoomFactor:.5}))}};k([f.property()],b.prototype,"_zoomConditions",void 0);k([f.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);k([f.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",
void 0);k([f.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);k([f.property()],b.prototype,"view",null);k([f.property()],b.prototype,"zoomIn",null);k([f.property()],b.prototype,"zoomOut",null);return b=k([f.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(f.declared(m))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
function(r,d,p,k,m,c){return function(d){function f(){return null!==d&&d.apply(this,arguments)||this}p(f,d);Object.defineProperty(f.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),a=this.get("view.constraints.effectiveMaxScale");return 0===a||c>a},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||
this.get("view.scale"),a=this.get("view.constraints.effectiveMinScale");return 0===a||c<a},enumerable:!0,configurable:!0});k([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],f.prototype,"canZoomIn",null);k([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],f.prototype,"canZoomOut",null);k([c.property()],f.prototype,"view",void 0);return f=
k([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],f)}(c.declared(m))})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(r,d,p,k,m,c){return function(d){function f(){return null!==d&&d.apply(this,arguments)||this}p(f,d);Object.defineProperty(f.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"canZoomOut",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});k([c.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"canZoomIn",null);k([c.property({dependsOn:["view.ready"],readOnly:!0})],f.prototype,"canZoomOut",null);k([c.property()],f.prototype,"view",void 0);return f=k([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],f)}(c.declared(m))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require",
"exports","./math/mat4"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.mat4=p})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(r,d,p,k){function m(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function c(a,b,c){var e=b[0],d=b[1],f=b[2],g=b[3],k=b[4],m=b[5],n=b[6],p=b[7],z=b[8],v=b[9],x=b[10],r=b[11],C=b[12],B=b[13],H=b[14];
b=b[15];var E=c[0],G=c[1],F=c[2],I=c[3];a[0]=E*e+G*k+F*z+I*C;a[1]=E*d+G*m+F*v+I*B;a[2]=E*f+G*n+F*x+I*H;a[3]=E*g+G*p+F*r+I*b;E=c[4];G=c[5];F=c[6];I=c[7];a[4]=E*e+G*k+F*z+I*C;a[5]=E*d+G*m+F*v+I*B;a[6]=E*f+G*n+F*x+I*H;a[7]=E*g+G*p+F*r+I*b;E=c[8];G=c[9];F=c[10];I=c[11];a[8]=E*e+G*k+F*z+I*C;a[9]=E*d+G*m+F*v+I*B;a[10]=E*f+G*n+F*x+I*H;a[11]=E*g+G*p+F*r+I*b;E=c[12];G=c[13];F=c[14];I=c[15];a[12]=E*e+G*k+F*z+I*C;a[13]=E*d+G*m+F*v+I*B;a[14]=E*f+G*n+F*x+I*H;a[15]=E*g+G*p+F*r+I*b;return a}function f(a,b,c){var e=
b[0],d=b[1],f=b[2],g=b[3],k=e+e,m=d+d,n=f+f;b=e*k;var p=e*m,e=e*n,z=d*m,d=d*n,f=f*n,k=g*k,m=g*m,g=g*n;a[0]=1-(z+f);a[1]=p+g;a[2]=e-m;a[3]=0;a[4]=p-g;a[5]=1-(b+f);a[6]=d+k;a[7]=0;a[8]=e+m;a[9]=d-k;a[10]=1-(b+z);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-
c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};d.set=function(a,b,c,d,f,g,k,m,t,n,p,z,v,x,r,C,B){a[0]=b;a[1]=c;a[2]=d;a[3]=f;a[4]=g;a[5]=k;a[6]=m;a[7]=t;a[8]=n;a[9]=p;a[10]=z;a[11]=v;a[12]=x;a[13]=r;a[14]=C;a[15]=B;return a};d.identity=m;d.transpose=
function(a,b){if(a===b){var c=b[1],d=b[2],f=b[3],g=b[6],k=b[7],m=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=g;a[11]=b[14];a[12]=f;a[13]=k;a[14]=m}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};d.invert=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],k=b[4],m=b[5],n=b[6],p=b[7],y=b[8],z=b[9],v=b[10],x=b[11],r=b[12],C=b[13],B=b[14];
b=b[15];var H=c*m-d*k,E=c*n-f*k,G=c*p-g*k,F=d*n-f*m,I=d*p-g*m,N=f*p-g*n,R=y*C-z*r,O=y*B-v*r,M=y*b-x*r,P=z*B-v*C,S=z*b-x*C,J=v*b-x*B,K=H*J-E*S+G*P+F*M-I*O+N*R;if(!K)return null;K=1/K;a[0]=(m*J-n*S+p*P)*K;a[1]=(f*S-d*J-g*P)*K;a[2]=(C*N-B*I+b*F)*K;a[3]=(v*I-z*N-x*F)*K;a[4]=(n*M-k*J-p*O)*K;a[5]=(c*J-f*M+g*O)*K;a[6]=(B*G-r*N-b*E)*K;a[7]=(y*N-v*G+x*E)*K;a[8]=(k*S-m*M+p*R)*K;a[9]=(d*M-c*S-g*R)*K;a[10]=(r*I-C*G+b*H)*K;a[11]=(z*G-y*I-x*H)*K;a[12]=(m*O-k*P-n*R)*K;a[13]=(c*P-d*O+f*R)*K;a[14]=(C*E-r*F-B*H)*K;
a[15]=(y*F-z*E+v*H)*K;return a};d.adjoint=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[3],k=b[4],m=b[5],n=b[6],p=b[7],y=b[8],z=b[9],v=b[10],x=b[11],r=b[12],C=b[13],B=b[14];b=b[15];a[0]=m*(v*b-x*B)-z*(n*b-p*B)+C*(n*x-p*v);a[1]=-(d*(v*b-x*B)-z*(f*b-g*B)+C*(f*x-g*v));a[2]=d*(n*b-p*B)-m*(f*b-g*B)+C*(f*p-g*n);a[3]=-(d*(n*x-p*v)-m*(f*x-g*v)+z*(f*p-g*n));a[4]=-(k*(v*b-x*B)-y*(n*b-p*B)+r*(n*x-p*v));a[5]=c*(v*b-x*B)-y*(f*b-g*B)+r*(f*x-g*v);a[6]=-(c*(n*b-p*B)-k*(f*b-g*B)+r*(f*p-g*n));a[7]=c*(n*x-p*v)-k*(f*x-
g*v)+y*(f*p-g*n);a[8]=k*(z*b-x*C)-y*(m*b-p*C)+r*(m*x-p*z);a[9]=-(c*(z*b-x*C)-y*(d*b-g*C)+r*(d*x-g*z));a[10]=c*(m*b-p*C)-k*(d*b-g*C)+r*(d*p-g*m);a[11]=-(c*(m*x-p*z)-k*(d*x-g*z)+y*(d*p-g*m));a[12]=-(k*(z*B-v*C)-y*(m*B-n*C)+r*(m*v-n*z));a[13]=c*(z*B-v*C)-y*(d*B-f*C)+r*(d*v-f*z);a[14]=-(c*(m*B-n*C)-k*(d*B-f*C)+r*(d*n-f*m));a[15]=c*(m*v-n*z)-k*(d*v-f*z)+y*(d*n-f*m);return a};d.determinant=function(a){var b=a[0],c=a[1],d=a[2],f=a[3],g=a[4],k=a[5],m=a[6],n=a[7],p=a[8],r=a[9],z=a[10],v=a[11],x=a[12],D=a[13],
C=a[14];a=a[15];return(b*k-c*g)*(z*a-v*C)-(b*m-d*g)*(r*a-v*D)+(b*n-f*g)*(r*C-z*D)+(c*m-d*k)*(p*a-v*x)-(c*n-f*k)*(p*C-z*x)+(d*n-f*m)*(p*D-r*x)};d.multiply=c;d.translate=function(a,b,c){var e=c[0],d=c[1];c=c[2];var f=void 0,g=void 0,k=void 0,m=void 0,n=void 0,p=void 0,r=void 0,v=void 0,x=void 0,D=void 0,C=void 0,B=void 0;b===a?(a[12]=b[0]*e+b[4]*d+b[8]*c+b[12],a[13]=b[1]*e+b[5]*d+b[9]*c+b[13],a[14]=b[2]*e+b[6]*d+b[10]*c+b[14],a[15]=b[3]*e+b[7]*d+b[11]*c+b[15]):(f=b[0],g=b[1],k=b[2],m=b[3],n=b[4],p=
b[5],r=b[6],v=b[7],x=b[8],D=b[9],C=b[10],B=b[11],a[0]=f,a[1]=g,a[2]=k,a[3]=m,a[4]=n,a[5]=p,a[6]=r,a[7]=v,a[8]=x,a[9]=D,a[10]=C,a[11]=B,a[12]=f*e+n*d+x*c+b[12],a[13]=g*e+p*d+D*c+b[13],a[14]=k*e+r*d+C*c+b[14],a[15]=m*e+v*d+B*c+b[15]);return a};d.scale=function(a,b,c){var e=c[0],d=c[1];c=c[2];a[0]=b[0]*e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*d;a[5]=b[5]*d;a[6]=b[6]*d;a[7]=b[7]*d;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};d.rotate=
function(a,b,c,d){var e=d[0],f=d[1];d=d[2];var h=Math.sqrt(e*e+f*f+d*d),g=void 0,m=void 0,n=void 0,p=void 0,r=void 0,v=void 0,x=void 0,D=void 0,C=void 0,B=void 0,H=void 0,E=void 0,G=void 0,F=void 0,I=void 0,N=void 0,R=void 0,O=void 0,M=void 0,P=void 0,S=void 0,J=void 0,m=g=void 0;if(h<k.EPSILON)return null;h=1/h;e*=h;f*=h;d*=h;g=Math.sin(c);m=Math.cos(c);n=1-m;p=b[0];r=b[1];v=b[2];x=b[3];D=b[4];C=b[5];B=b[6];H=b[7];E=b[8];G=b[9];F=b[10];I=b[11];N=e*e*n+m;R=f*e*n+d*g;O=d*e*n-f*g;M=e*f*n-d*g;P=f*f*
n+m;S=d*f*n+e*g;J=e*d*n+f*g;g=f*d*n-e*g;m=d*d*n+m;a[0]=p*N+D*R+E*O;a[1]=r*N+C*R+G*O;a[2]=v*N+B*R+F*O;a[3]=x*N+H*R+I*O;a[4]=p*M+D*P+E*S;a[5]=r*M+C*P+G*S;a[6]=v*M+B*P+F*S;a[7]=x*M+H*P+I*S;a[8]=p*J+D*g+E*m;a[9]=r*J+C*g+G*m;a[10]=v*J+B*g+F*m;a[11]=x*J+H*g+I*m;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};d.rotateX=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[4],f=b[5],g=b[6],k=b[7],m=b[8],n=b[9],p=b[10],r=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],
a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=d*c+m*e;a[5]=f*c+n*e;a[6]=g*c+p*e;a[7]=k*c+r*e;a[8]=m*c-d*e;a[9]=n*c-f*e;a[10]=p*c-g*e;a[11]=r*c-k*e;return a};d.rotateY=function(a,b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],f=b[1],g=b[2],k=b[3],m=b[8],n=b[9],p=b[10],r=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*c-m*e;a[1]=f*c-n*e;a[2]=g*c-p*e;a[3]=k*c-r*e;a[8]=d*e+m*c;a[9]=f*e+n*c;a[10]=g*e+p*c;a[11]=k*e+r*c;return a};d.rotateZ=function(a,
b,c){var e=Math.sin(c);c=Math.cos(c);var d=b[0],f=b[1],g=b[2],k=b[3],m=b[4],n=b[5],p=b[6],r=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=d*c+m*e;a[1]=f*c+n*e;a[2]=g*c+p*e;a[3]=k*c+r*e;a[4]=m*c-d*e;a[5]=n*c-f*e;a[6]=p*c-g*e;a[7]=r*c-k*e;return a};d.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};d.fromScaling=function(a,
b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotation=function(a,b,c){var e=c[0],d=c[1];c=c[2];var f=Math.sqrt(e*e+d*d+c*c),g=void 0,m=void 0,n=void 0;if(f<k.EPSILON)return null;f=1/f;e*=f;d*=f;c*=f;g=Math.sin(b);m=Math.cos(b);n=1-m;a[0]=e*e*n+m;a[1]=d*e*n+c*g;a[2]=c*e*n-d*g;a[3]=0;a[4]=e*d*n-c*g;a[5]=d*d*n+m;a[6]=c*d*n+e*g;a[7]=0;a[8]=e*c*n+d*g;a[9]=d*c*n-e*g;a[10]=c*c*n+m;a[11]=0;a[12]=0;a[13]=0;
a[14]=0;a[15]=1;return a};d.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=
-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.fromRotationTranslation=f;d.fromQuat2=function(a,b){var c=n,d=-b[0],g=-b[1],k=-b[2],m=b[3],p=b[4],t=b[5],r=b[6],y=b[7],z=d*d+g*g+k*k+m*m;0<z?(c[0]=2*(p*m+y*d+t*k-r*g)/z,c[1]=2*(t*m+y*g+r*d-p*k)/z,c[2]=2*(r*m+y*k+p*g-t*d)/z):(c[0]=2*(p*m+y*d+t*k-r*g),c[1]=2*(t*m+y*g+r*d-p*k),c[2]=2*(r*m+y*k+p*g-t*d));f(a,b,c);return a};var n=p.create();d.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};
d.getScaling=function(a,b){var c=b[0],d=b[1],f=b[2],g=b[4],k=b[5],m=b[6],n=b[8],p=b[9];b=b[10];a[0]=Math.sqrt(c*c+d*d+f*f);a[1]=Math.sqrt(g*g+k*k+m*m);a[2]=Math.sqrt(n*n+p*p+b*b);return a};d.getRotation=function(a,b){var c=b[0]+b[5]+b[10],d=0;0<c?(d=2*Math.sqrt(c+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),
a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d);return a};d.fromRotationTranslationScale=function(a,b,c,d){var e=b[0],f=b[1],h=b[2],g=b[3],k=e+e,m=f+f,n=h+h;b=e*k;var p=e*m,e=e*n,v=f*m,f=f*n,h=h*n,k=g*k,m=g*m,g=g*n,n=d[0],x=d[1];d=d[2];a[0]=(1-(v+h))*n;a[1]=(p+g)*n;a[2]=(e-m)*n;a[3]=0;a[4]=(p-g)*x;a[5]=(1-(b+h))*x;a[6]=(f+k)*x;a[7]=0;a[8]=(e+m)*d;a[9]=(f-k)*d;a[10]=(1-(b+v))*
d;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};d.fromRotationTranslationScaleOrigin=function(a,b,c,d,f){var e=b[0],h=b[1],g=b[2],k=b[3],l=e+e,m=h+h,n=g+g;b=e*l;var p=e*m,x=e*n,e=h*m,h=h*n,r=g*n,g=k*l,m=k*m,C=k*n,B=d[0],H=d[1],n=d[2];d=f[0];k=f[1];f=f[2];var l=(1-(e+r))*B,E=(p+C)*B,B=(x-m)*B,p=(p-C)*H,r=(1-(b+r))*H,H=(h+g)*H,x=(x+m)*n,h=(h-g)*n;b=(1-(b+e))*n;a[0]=l;a[1]=E;a[2]=B;a[3]=0;a[4]=p;a[5]=r;a[6]=H;a[7]=0;a[8]=x;a[9]=h;a[10]=b;a[11]=0;a[12]=c[0]+d-(l*d+p*k+x*f);a[13]=c[1]+k-(E*
d+r*k+h*f);a[14]=c[2]+f-(B*d+H*k+b*f);a[15]=1;return a};d.fromQuat=function(a,b){var c=b[0],d=b[1],f=b[2];b=b[3];var g=c+c,k=d+d,m=f+f,c=c*g,n=d*g,d=d*k,p=f*g,r=f*k,f=f*m,g=b*g,k=b*k;b*=m;a[0]=1-d-f;a[1]=n+b;a[2]=p-k;a[3]=0;a[4]=n-b;a[5]=1-c-f;a[6]=r+g;a[7]=0;a[8]=p+k;a[9]=r-g;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};d.frustum=function(a,b,c,d,f,g,k){var e=1/(c-b),h=1/(f-d),l=1/(g-k);a[0]=2*g*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*h;a[6]=0;a[7]=0;a[8]=(c+b)*e;a[9]=(f+d)*h;a[10]=
(k+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=k*g*2*l;a[15]=0;return a};d.perspective=function(a,b,c,d,f){b=1/Math.tan(b/2);var e=void 0;a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=f&&Infinity!==f?(e=1/(d-f),a[10]=(f+d)*e,a[14]=2*f*d*e):(a[10]=-1,a[14]=-2*d);return a};d.perspectiveFromFieldOfView=function(a,b,c,d){var e=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),h=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var g=2/(h+b),k=2/(e+f);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((h-b)*g*.5);a[9]=(e-f)*k*.5;a[10]=d/(c-d);a[11]=-1;a[12]=0;a[13]=0;a[14]=d*c/(c-d);a[15]=0;return a};d.ortho=function(a,b,c,d,f,g,k){var e=1/(b-c),h=1/(d-f),l=1/(g-k);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*h;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*e;a[13]=(f+d)*h;a[14]=(k+g)*l;a[15]=1;return a};d.lookAt=function(a,b,c,d){var e=void 0,f=void 0,h=void 0,g=void 0,n=void 0,p=void 0,
r=void 0,z=void 0,v=void 0,x=void 0,D=b[0],C=b[1];b=b[2];h=d[0];g=d[1];d=d[2];r=c[0];z=c[1];c=c[2];if(Math.abs(D-r)<k.EPSILON&&Math.abs(C-z)<k.EPSILON&&Math.abs(b-c)<k.EPSILON)return m(a);r=D-r;z=C-z;v=b-c;x=1/Math.sqrt(r*r+z*z+v*v);r*=x;z*=x;v*=x;e=g*v-d*z;f=d*r-h*v;h=h*z-g*r;(x=Math.sqrt(e*e+f*f+h*h))?(x=1/x,e*=x,f*=x,h*=x):h=f=e=0;g=z*h-v*f;n=v*e-r*h;p=r*f-z*e;(x=Math.sqrt(g*g+n*n+p*p))?(x=1/x,g*=x,n*=x,p*=x):p=n=g=0;a[0]=e;a[1]=g;a[2]=r;a[3]=0;a[4]=f;a[5]=n;a[6]=z;a[7]=0;a[8]=h;a[9]=p;a[10]=v;
a[11]=0;a[12]=-(e*D+f*C+h*b);a[13]=-(g*D+n*C+p*b);a[14]=-(r*D+z*C+v*b);a[15]=1;return a};d.targetTo=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];var h=d[0],g=d[1],k=d[2];d=e-c[0];var m=f-c[1];c=b-c[2];var n=d*d+m*m+c*c;0<n&&(n=1/Math.sqrt(n),d*=n,m*=n,c*=n);var p=g*c-k*m,k=k*d-h*c,h=h*m-g*d,n=p*p+k*k+h*h;0<n&&(n=1/Math.sqrt(n),p*=n,k*=n,h*=n);a[0]=p;a[1]=k;a[2]=h;a[3]=0;a[4]=m*h-c*k;a[5]=c*p-d*h;a[6]=d*k-m*p;a[7]=0;a[8]=d;a[9]=m;a[10]=c;a[11]=0;a[12]=e;a[13]=f;a[14]=b;a[15]=1;return a};d.str=function(a){return"mat4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};d.add=function(a,b,
c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};d.subtract=g;d.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*
c;a[15]=b[15]*c;return a};d.multiplyScalarAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;a[4]=b[4]+c[4]*d;a[5]=b[5]+c[5]*d;a[6]=b[6]+c[6]*d;a[7]=b[7]+c[7]*d;a[8]=b[8]+c[8]*d;a[9]=b[9]+c[9]*d;a[10]=b[10]+c[10]*d;a[11]=b[11]+c[11]*d;a[12]=b[12]+c[12]*d;a[13]=b[13]+c[13]*d;a[14]=b[14]+c[14]*d;a[15]=b[15]+c[15]*d;return a};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&
a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};d.equals=function(a,b){var c=a[0],d=a[1],f=a[2],g=a[3],m=a[4],n=a[5],p=a[6],r=a[7],y=a[8],z=a[9],v=a[10],x=a[11],D=a[12],C=a[13],B=a[14];a=a[15];var H=b[0],E=b[1],G=b[2],F=b[3],I=b[4],N=b[5],R=b[6],O=b[7],M=b[8],P=b[9],S=b[10],J=b[11],K=b[12],Q=b[13],T=b[14];b=b[15];return Math.abs(c-H)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(H))&&Math.abs(d-E)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&
Math.abs(f-G)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(g-F)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))&&Math.abs(m-I)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(n-N)<=k.EPSILON*Math.max(1,Math.abs(n),Math.abs(N))&&Math.abs(p-R)<=k.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(r-O)<=k.EPSILON*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(y-M)<=k.EPSILON*Math.max(1,Math.abs(y),Math.abs(M))&&Math.abs(z-P)<=k.EPSILON*Math.max(1,Math.abs(z),Math.abs(P))&&Math.abs(v-
S)<=k.EPSILON*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(x-J)<=k.EPSILON*Math.max(1,Math.abs(x),Math.abs(J))&&Math.abs(D-K)<=k.EPSILON*Math.max(1,Math.abs(D),Math.abs(K))&&Math.abs(C-Q)<=k.EPSILON*Math.max(1,Math.abs(C),Math.abs(Q))&&Math.abs(B-T)<=k.EPSILON*Math.max(1,Math.abs(B),Math.abs(T))&&Math.abs(a-b)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};d.mul=c;d.sub=g})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(r,d,p){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4f32=p})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(r,d){function p(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d}Object.defineProperty(d,"__esModule",{value:!0});d.create=p;d.clone=function(d){var k=new Float32Array(16);k[0]=d[0];k[1]=d[1];k[2]=d[2];k[3]=d[3];k[4]=d[4];k[5]=d[5];k[6]=d[6];k[7]=d[7];k[8]=d[8];k[9]=d[9];k[10]=d[10];k[11]=d[11];k[12]=d[12];k[13]=d[13];k[14]=d[14];k[15]=d[15];return k};
d.fromValues=function(d,m,c,f,g,n,a,b,e,h,l,p,r,u,t,w){var k=new Float32Array(16);k[0]=d;k[1]=m;k[2]=c;k[3]=f;k[4]=g;k[5]=n;k[6]=a;k[7]=b;k[8]=e;k[9]=h;k[10]=l;k[11]=p;k[12]=r;k[13]=u;k[14]=t;k[15]=w;return k};d.createView=function(d,m){return new Float32Array(d,m,16)};d.IDENTITY=p()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.vec3f32=p})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(r,d){function p(){return new Float32Array(3)}function k(c,a,b){var d=new Float32Array(3);d[0]=c;d[1]=a;d[2]=b;return d}function m(){return k(1,1,1)}function c(){return k(1,0,0)}function f(){return k(0,1,0)}function g(){return k(0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=p;d.clone=function(c){var a=new Float32Array(3);a[0]=c[0];a[1]=c[1];a[2]=c[2];return a};d.fromValues=k;d.createView=function(c,a){return new Float32Array(c,a,3)};d.zeros=function(){return p()};
d.ones=m;d.unitX=c;d.unitY=f;d.unitZ=g;d.ZEROS=p();d.ONES=m();d.UNIT_X=c();d.UNIT_Y=f();d.UNIT_Z=g()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(r,d,p){Object.defineProperty(d,"__esModule",{value:!0});d.vec4f32=p})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(r,d){function p(){return new Float32Array(4)}function k(a,b,c,d){var e=new Float32Array(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e}
function m(){return k(1,1,1,1)}function c(){return k(1,0,0,0)}function f(){return k(0,1,0,0)}function g(){return k(0,0,1,0)}function n(){return k(0,0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=p;d.clone=function(a){var b=new Float32Array(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};d.fromValues=k;d.createView=function(a,b){return new Float32Array(a,b,4)};d.zeros=function(){return p()};d.ones=m;d.unitX=c;d.unitY=f;d.unitZ=g;d.unitW=n;d.ZEROS=p();d.ONES=m();d.UNIT_X=c();
d.UNIT_Y=f();d.UNIT_Z=g();d.UNIT_W=n()})},"esri/widgets/Search/LocatorSearchSource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),function(r,d,p,k,m,c,f,g,n,a){return function(b){function d(){var c=null!==b&&b.apply(this,arguments)||this;c.categories=null;c.countryCode=null;c.defaultZoomScale=
null;c.locator=null;c.locationType=null;c.name="";c.placeholder="";c.searchTemplate="";c.singleLineFieldName=null;c.suggestionsEnabled=null;c.zoomScale=null;c.getResults=function(b,d){return a.getResults(m({source:c},b),d)};c.getSuggestions=function(b,d){return a.getSuggestions(m({source:c},b),d)};return c}p(d,b);h=d;d.prototype.readLocator=function(a,b){return(a=b.url)?new g({url:a}):null};d.prototype.writeLocator=function(a,b){b.url=a?a.url:null};d.prototype.clone=function(){return new h({autoNavigate:this.autoNavigate,
filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?c.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,
categories:this.categories?c.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};var h;k([f.property()],d.prototype,"categories",void 0);k([f.property()],d.prototype,"countryCode",void 0);k([f.property({json:{write:!0}})],d.prototype,"defaultZoomScale",void 0);k([f.property({type:g})],d.prototype,"locator",void 0);k([f.reader("locator",
["url"])],d.prototype,"readLocator",null);k([f.writer("locator")],d.prototype,"writeLocator",null);k([f.property()],d.prototype,"locationType",void 0);k([f.property({json:{write:!0}})],d.prototype,"name",void 0);k([f.property({json:{write:!0}})],d.prototype,"placeholder",void 0);k([f.property()],d.prototype,"searchTemplate",void 0);k([f.property({json:{write:!0}})],d.prototype,"singleLineFieldName",void 0);k([f.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],d.prototype,"suggestionsEnabled",
void 0);k([f.property({json:{write:!0}})],d.prototype,"zoomScale",void 0);return d=h=k([f.subclass("esri.widgets.Search.LocatorSearchSource")],d)}(f.declared(n))})},"esri/tasks/Locator":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../request ../core/accessorSupport/decorators ../geometry/SpatialReference ./Task ./support/AddressCandidate".split(" "),function(r,d,p,k,m,c,f,g,n,a){return function(b){function d(a){a=
b.call(this,a)||this;a.outSpatialReference=null;a.url=null;return a}p(d,b);d.prototype.addressToLocations=function(a,b){var d=a.address,e=a.categories,f=a.countryCode,h=a.forStorage,g=a.location,k=a.locationType,l=a.magicKey,n=a.maxLocations,p=a.outFields;a=a.searchExtent;var r=g?g.clone().normalize():null,C=a?a.shiftCentralMeridian():null,B=this.outSpatialReference,g=this.parsedUrl;a=this.requestOptions;e={f:"json",outSR:B?JSON.stringify(B.toJSON()):null,outFields:p?p.join(","):null,searchExtent:C?
JSON.stringify(C.toJSON()):null,category:e?e.join(","):null,countryCode:f||null,magicKey:l||null,location:r,locationType:k||null,maxLocations:n||null,forStorage:h||null};d={query:this._encode(m({},g.query,d,e))};b=m({},a,b,d);return c(g.path+"/findAddressCandidates",b).then(this._handleAddressToLocationsResponse)};d.prototype.suggestLocations=function(a,b){var d=this.parsedUrl,e=this.requestOptions,f=a.location,h=a.searchExtent,f=f?f.clone().normalize():null,h=h?h.shiftCentralMeridian():null;a={f:"json",
text:a.text,maxSuggestions:a.maxSuggestions,searchExtent:h?JSON.stringify(h.toJSON()):null,category:a.categories?a.categories.join(","):null,countryCode:a.countryCode||null,location:f};a={query:this._encode(m({},d.query,a))};b=m({},e,b,a);return c(d.path+"/suggest",b).then(this._handleSuggestLocationsResponse)};d.prototype.addressesToLocations=function(a,b){var d=this.outSpatialReference,e=this.parsedUrl,f=this.requestOptions,h=a.addresses,g=a.categories,k=a.locationType;a=a.countryCode;var l=[];
Array.isArray(h)&&h.forEach(function(a){l.push({attributes:a})});d={category:g?g.join(","):null,sourceCountry:a||null,addresses:JSON.stringify({records:l}),locationType:k||null,f:"json",outSR:d?JSON.stringify(d):null};d={query:this._encode(m({},e.query,d))};b=m({},f,b,d);return c(e.path+"/geocodeAddresses",b).then(this._handleAddressesToLocationsResponse)};d.prototype.locationToAddress=function(a,b){var d=a.locationType,e=(a=a.location)?a.clone().normalize():null,f="undefined"!==typeof e,h=this.outSpatialReference;
a=this.parsedUrl;var g=this.requestOptions,d={outSR:h?JSON.stringify(h.toJSON()):null,location:f?JSON.stringify(e.toJSON()):null,locationType:d||null,f:"json"},d={query:this._encode(m({},a.query,d))};b=m({},g,b,d);return c(a.path+"/reverseGeocode",b).then(this._handleLocationToAddressResponse)};d.prototype._handleAddressToLocationsResponse=function(b){b=b.data;if(!b)return[];var c=b.candidates,d=b.spatialReference;return c?c.map(function(b){if(b){var c=b.extent,e=b.location,f=c?c&&"number"===typeof c.xmin&&
"number"===typeof c.ymin&&"number"===typeof c.xmax&&"number"===typeof c.ymax:!0;if(e&&"number"===typeof e.x&&"number"===typeof e.y&&f)return c&&(c.spatialReference=d),e.spatialReference=d,a.fromJSON(b)}}):[]};d.prototype._handleSuggestLocationsResponse=function(a){return(a=a.data)?a.suggestions||[]:[]};d.prototype._handleAddressesToLocationsResponse=function(b){b=b.data;if(!b)return[];var c=b.locations,d=b.spatialReference;return c?c.map(function(b){var c=b.location;c&&(c.spatialReference=d);return a.fromJSON(b)}):
[]};d.prototype._handleLocationToAddressResponse=function(b){if(b=b.data){var c=b.address;return a.fromJSON({address:c&&c.Match_addr||"",attributes:c||{},location:b.location,score:100})}};k([f.property({type:g})],d.prototype,"outSpatialReference",void 0);k([f.property()],d.prototype,"url",void 0);return d=k([f.subclass("esri.tasks.Locator")],d)}(f.declared(n))})},"esri/tasks/support/AddressCandidate":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ../../geometry/Point".split(" "),
function(r,d,p,k,m,c,f,g){return function(d){function a(a){a=d.call(this,a)||this;a.address=null;a.attributes=null;a.extent=null;a.location=null;a.score=null;return a}k(a,d);p([c.property({type:String,json:{write:!0}})],a.prototype,"address",void 0);p([c.property({type:Object,json:{write:!0}})],a.prototype,"attributes",void 0);p([c.property({type:f,json:{write:!0}})],a.prototype,"extent",void 0);p([c.property({type:g,json:{write:!0}})],a.prototype,"location",void 0);p([c.property({type:Number,json:{write:!0}})],
a.prototype,"score",void 0);return a=p([c.subclass("esri.tasks.support.AddressCandidate")],a)}(c.declared(m.JSONSupport))})},"esri/widgets/Search/support/locatorUtils":function(){define("require exports ../../../Graphic ../../../core/maybe ../../../core/promiseUtils ./geometryUtils".split(" "),function(r,d,p,k,m,c){function f(a,c){var d=a.source,e=a.spatialReference,f=a.location,g=a.sourceIndex,h=a.view;a=d.locator;var k=d.zoomScale,m=d.defaultZoomScale,n=h&&h.scale;c=c&&c.signal;e&&(a.outSpatialReference=
e);return a.locationToAddress({location:f},{signal:c}).then(function(a){return b([a],{sourceIndex:g,scale:n,view:h,zoomScale:k,defaultZoomScale:m})})}function g(a,b){var d=a.filter,e=a.searchExtent;a=a.withinViewEnabled;var f=b&&b.extent;return(b=c.createExtentFromGeometry(d&&d.geometry,b,b&&b.scale))||e||(a&&f?f:void 0)}function n(a,c){var d=a.source,e=a.suggestResult,f=a.spatialReference,h=a.view,n=a.maxResults,p=a.sourceIndex,r=d&&d.zoomScale,z=d&&d.defaultZoomScale;if(!e.text.trim())return m.resolve();
a=""+(!e.key&&d.prefix?d.prefix:"")+e.text+(!e.key&&d.suffix?d.suffix:"");var v={},x=d.locator,D=h&&h.scale,C=g(d,h);c=c&&c.signal;if(!x)return m.resolve();d.categories&&(v.categories=d.categories);d.locationType&&(v.locationType=d.locationType);f&&(x.outSpatialReference=f);if(f=h&&h.get("extent.center"))v.location=f;v.maxLocations=n;C&&(v.searchExtent=k.unwrap(C));d.countryCode&&(v.countryCode=d.countryCode);var B=e.key;B&&(v.magicKey=B);v.address={};v.address[d.singleLineFieldName||"Single Line Input"]=
a;d.outFields&&(v.outFields=d.outFields);return x.addressToLocations(v,{signal:c}).then(function(a){return b(a,{key:B,scale:D,sourceIndex:p,view:h,zoomScale:r,defaultZoomScale:z})})}function a(a,b){return a.map(function(a){return{text:a.text,key:a.magicKey,sourceIndex:b}})}function b(a,b){return a.map(function(a){var d=b.key,e=b.scale,f=b.sourceIndex,g=b.view,h=b.zoomScale,k=b.defaultZoomScale,l=a.extent,m=a.location,n=a.address;a=new p({geometry:m,attributes:a.attributes});l=l||m;e=c.createExtentFromGeometry(l,
g,e);g=h?c.scaleExtent(e,g,h):k&&"point"===l.type?c.scaleExtent(e,g,k):e;m=m?m.x+","+m.y:"";return{extent:g,feature:a,key:d,name:n||m,sourceIndex:f}})}Object.defineProperty(d,"__esModule",{value:!0});d.getResults=function(a,b){return a.location?f(a,b):n(a,b)};d.getSuggestions=function(b,c){var d=b.source,e=b.spatialReference,f=b.view,h=b.suggestTerm,n=b.maxSuggestions,p=b.sourceIndex;b={};var r=d.locator,z=g(d,f);c=c&&c.signal;if(!r)return m.resolve();d.categories&&(b.categories=d.categories);r.outSpatialReference=
e;if(e=f&&f.get("extent.center"))b.location=e;if(!h.trim())return m.resolve();e=d.prefix;f=d.suffix;b.text=""+(void 0===e?"":e)+h+(void 0===f?"":f);z&&(b.searchExtent=k.unwrap(z));b.maxSuggestions=n;d.countryCode&&(b.countryCode=d.countryCode);return r.suggestLocations(b,{signal:c}).then(function(b){return a(b,p)})};d.isArcGISWorldGeocoder=function(a){return a?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(a)||/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(a):
!1}})},"*now":function(r){r(['dojo/i18n!*preload*esri/widgets/nls/Search*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper @dojo/framework/shim/array dojo/i18n!../nls/common dojo/i18n!./Search/nls/Search ../intl ../../esri/core/promiseUtils ../core/events ../core/Handles ../core/string ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Search/SearchResultRenderer ./Search/SearchViewModel ./support/widget".split(" "),function(r,d,p,k,m,c,f,g,n,a,b,e,h,l,q,A,u,t){var w=/<[a-z/][\s\S]*>/i;return function(d){function q(a){var c=
d.call(this,a)||this;c._handles=new b;c._inputNode=null;c._sourceMenuButtonNode=null;c._sourceListNode=null;c._suggestionListNode=null;c._searchResultRenderer=new A;c._relatedTarget=null;c.activeMenu="none";c.activeSource=null;c.activeSourceIndex=null;c.allPlaceholder=null;c.allSources=null;c.autoNavigate=null;c.autoSelect=null;c.defaultSources=null;c.disabled=!1;c.goToOverride=null;c.iconClass="esri-icon-search";c.includeDefaultSources=null;c.label=f.widgetLabel;c.locationEnabled=null;c.maxResults=
null;c.maxSuggestions=null;c.minSuggestCharacters=null;c.popupEnabled=null;c.popupTemplate=null;c.portal=null;c.resultGraphic=null;c.resultGraphicEnabled=null;c.results=null;c.searchAllEnabled=null;c.searchTerm=null;c.selectedResult=null;c.sources=null;c.suggestions=null;c.suggestionsEnabled=null;c.view=null;c.viewModel=new u;c.own(h.watch(c,"searchTerm",function(a){if(a&&"warning"===c.activeMenu||!a&&!c.get("viewModel.selectedSuggestion.location"))c.activeMenu="none"}),h.on(c,"viewModel.allSources",
"change",function(){return c._watchSourceChanges()}),h.init(c,["viewModel.popupTemplate","viewModel.popupTemplate.content"],function(){"{Match_addr}"===c.get("viewModel.popupTemplate.content")&&(c.viewModel.popupTemplate.content=c._renderSearchResultsContent.bind(c))}));return c}p(q,d);q.prototype.postInitialize=function(){this.viewModel.load().catch(function(){})};q.prototype.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&
(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};q.prototype.clear=function(){};q.prototype.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};q.prototype.blur=function(a){this._inputNode&&(this._inputNode.blur(),this._inputBlur(a),this.emit("search-blur"))};q.prototype.search=function(a){var b=this;this.activeMenu="none";this._cancelSuggest();this._cancelSearch();var c=
n.createAbortController(),d=c.signal;this._searchController=c;return this.viewModel.search(a,{signal:d}).catch(function(a){if(b._searchController===c)return b.activeMenu="none",b._searchController=null,a}).then(function(a){if(b._searchController===c)return b.activeMenu=a.numResults?"none":"warning",b._searchController=null,a})};q.prototype.suggest=function(a){var b=this;this._cancelSuggest();var c=n.createAbortController(),d=c.signal;this._suggestController=c;return this.viewModel.suggest(a,null,
{signal:d}).then(function(a){if(b._suggestController===c)return b._suggestController=null,a.numResults&&(b.activeMenu="suggestion"),b._scrollToTopSuggestion(),a}).catch(function(){if(b._suggestController===c)return b._suggestController=null})};q.prototype.render=function(){var a=this,b,d,e=this.viewModel,h=e.activeSourceIndex,k=e.suggestions,l=e.maxInputLength,m=e.placeholder,n=e.searchTerm,p=e.searchAllEnabled,q=e.allSources,r=this._getSourceName(h),w=(""+n).trim(),y=this.activeMenu,z=this.id,A=
this.viewModel.state,J=this.id+"-suggest-menu",K=n?t.tsx("div",{key:"esri-search__clear-button",bind:this,role:"button",class:this.classes("esri-search__clear-button","esri-widget--button"),tabindex:"0",title:f.clearButtonTitle,onfocus:this._clearButtonFocus,onclick:this._handleClearButtonClick,onkeydown:this._handleClearButtonClick},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null,Q=this.locationEnabled&&!w,T=Q?t.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-current-location",
class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},t.tsx("li",{bind:this,onclick:this._handleUseCurrentLocationClick,onkeydown:this._handleUseCurrentLocationClick,onkeyup:this._handleSuggestionKeyup,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-locate-circled"})," ",f.useCurrentLocation)):null,V=1<q.length&&h===u.ALL_INDEX,h=k?k.map(function(b){var c=
b.sourceIndex,d=b.results.length,e=d&&V?a._getSuggestionHeaderNode(c):null;b=b.results.map(function(b,c){return a._getSuggestionNode(b,c)});c=d?t.tsx("ul",{role:"presentation",key:"esri-search__suggestion-list-"+c,class:a.classes("esri-menu__list","esri-search__suggestions-list")},b):null;return[e,c]}):null,Q=Q||h&&h.length,l=t.tsx("input",{bind:this,placeholder:m,"aria-label":f.searchButtonTitle,maxlength:l,autocomplete:"off",type:"text",tabindex:"0",class:this.classes("esri-input","esri-search__input"),
"aria-autocomplete":"list",value:n,"aria-haspopup":"true","aria-owns":Q?J:null,role:"textbox",onkeydown:this._handleInputKeydown,onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:t.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:n?"":m}),l=t.tsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},
l),J=Q?t.tsx("div",{id:J,"aria-expanded":"suggestion"===y,key:"esri-search__suggestions-menu",class:this.classes("esri-menu","esri-search__suggestions-menu"),role:"menu",bind:this,afterCreate:t.storeNode,"data-node-ref":"_suggestionListNode"},T,h):null,K=t.tsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},l,J,K),J=t.tsx("div",{key:"esri-search__submit-button",bind:this,role:"button",title:f.searchButtonTitle,class:this.classes("esri-search__submit-button","esri-widget--button"),
tabindex:"0",onclick:this._handleSearchButtonClick,onkeydown:this._handleSearchButtonClick},t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-search"}),t.tsx("span",{class:"esri-icon-font-fallback-text"},f.searchButtonTitle)),n=w?g.substitute(f.noResultsFoundForValue,{value:'"'+n+'"'}):f.noResultsFound,n=e.get("selectedSuggestion.location")||w?t.tsx("div",{key:"esri-search__no_results"},t.tsx("div",{class:"esri-search__warning-header"},f.noResults),t.tsx("div",{class:"esri-search__warning-text"},
n)):null,e=e.get("selectedSuggestion.location")||w?null:t.tsx("div",{key:"esri-search__empty-search"},t.tsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),t.tsx("span",{class:"esri-search__no-value-text"},f.emptyValue)),e=t.tsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu","esri-search__warning-menu")},t.tsx("div",{class:"esri-search__warning-body"},n,e)),w=1<q.length,q=q&&q.toArray(),p=p?this._getSourceNode(u.ALL_INDEX):null,z=z+"-source-menu",r=w?t.tsx("div",
{key:"esri-search__source-menu-button",bind:this,role:"button",title:f.searchIn,"aria-haspopup":"true","aria-expanded":"source"===y,"aria-controls":z,class:this.classes("esri-search__sources-button","esri-widget--button"),tabindex:"0",onkeydown:this._handleSourceMenuButtonKeydown,onclick:this._handleSourcesMenuToggleClick,onkeyup:this._handleSourceMenuButtonKeyup,onblur:this._sourcesButtonBlur,afterCreate:t.storeNode,"data-node-ref":"_sourceMenuButtonNode"},t.tsx("span",{"aria-hidden":"true",role:"presentation",
class:"esri-icon-down-arrow esri-search__sources-button--down"}),t.tsx("span",{"aria-hidden":"true",role:"presentation",class:"esri-icon-up-arrow esri-search__sources-button--up"}),t.tsx("span",{class:"esri-search__source-name"},r)):null,z=w?t.tsx("ul",{id:z,role:"menu",bind:this,afterCreate:t.storeNode,"data-node-ref":"_sourceListNode",class:"esri-menu__list"},p,q.map(function(b,c){return a._getSourceNode(c)})):null,z=w?t.tsx("div",{tabIndex:0,key:"esri-search__source-menu",class:this.classes("esri-menu",
"esri-search__sources-menu")},z):null,y=(b={},b["esri-search--multiple-sources"]=w,b["esri-search--loading"]="loading"===A,b["esri-search--searching"]="searching"===A,b["esri-search--warning"]="warning"===y,b["esri-search--sources"]="source"===y,b["esri-search--show-suggestions"]="suggestion"===y,b);b=(d={},d["esri-disabled"]="disabled"===A,d["esri-widget--disabled"]=this.disabled,d);d="loading"===A?t.tsx("div",{role:"presentation",class:"esri-widget__loader",key:"base-loader"},t.tsx("span",{"aria-hidden":"true",
role:"presentation",class:"esri-widget__loader-animation"}),t.tsx("span",{class:"esri-icon-font-fallback-text"},f.searchButtonTitle),t.tsx("span",{class:"esri-widget__loader-text"},c.loading)):t.tsx("div",{role:"presentation",class:this.classes(y,"esri-search__container"),key:"base-container"},r,z,K,J,e);return t.tsx("div",{class:this.classes("esri-search esri-widget",b)},d)};q.prototype._watchSourceChanges=function(){var a=this,b=this._handles,c=this.viewModel.allSources;b.remove("sources");c.forEach(function(c){return b.add(h.watch(c,
"name",function(){return a.scheduleRender()}),"sources")})};q.prototype._handleSourceMenuButtonKeydown=function(b){var c=a.eventKey(b);"ArrowUp"===c||"ArrowDown"===c||"End"===c||"Home"===c?(b.preventDefault(),b.stopPropagation(),this.activeMenu="source"):this._handleSourcesMenuToggleClick(b)};q.prototype._handleSourcesMenuToggleClick=function(b){var c="source"===this.activeMenu;this.activeMenu=c?"none":"source";this.renderNow();c?this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus():(c=this._sourceListNode?
this._sourceListNode.getElementsByTagName("li"):null)&&(b="End"===a.eventKey(b)?c[c.length-1]:c[0])&&b.focus()};q.prototype._handleClearButtonClick=function(){this.viewModel.clear();this._focus()};q.prototype._handleSearchButtonClick=function(){this.search()};q.prototype._handleSuggestionClick=function(a){if(a=a.currentTarget["data-suggestion"])this._focus(),this.search(a)};q.prototype._handleUseCurrentLocationClick=function(){var a=this;this._focus("none");this._cancelSuggest();this._cancelSearch();
var b=n.createAbortController(),c=b.signal;this._searchController=b;this.viewModel.searchNearby({signal:c}).catch().then(function(){a._searchController=null})};q.prototype._handleSourceClick=function(a){this.viewModel.activeSourceIndex=a.currentTarget["data-source-index"];this._focus("none")};q.prototype._sourcesButtonBlur=function(a){this._removeActiveMenu(a&&a.relatedTarget,this._sourceListNode)};q.prototype._inputBlur=function(a){a=a&&a.relatedTarget;this._removeActiveMenu(a?a:this._relatedTarget,
this._suggestionListNode)};q.prototype._storeRelatedTarget=function(a){this._relatedTarget=a.relatedTarget};q.prototype._clearButtonFocus=function(){this.activeMenu="none"};q.prototype._removeActiveMenu=function(a,b){!a||a&&b&&b.contains(a)||(this.activeMenu="none")};q.prototype._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};q.prototype._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=
null)};q.prototype._handleInputKeydown=function(b){var c=a.eventKey(b);("Tab"===c||"Escape"===c||b.shiftKey&&"Tab"===c)&&this._cancelSuggest()};q.prototype._handleInputKeyup=function(b){var c=a.eventKey(b),d=b.ctrlKey||b.metaKey||"Copy"===c||"ArrowLeft"===c||"ArrowRight"===c||"Enter"===c||"Shift"===c,e=this._suggestionListNode?this._suggestionListNode.getElementsByTagName("li"):null;d||("Tab"===c||"Escape"===c||b.shiftKey&&"Tab"===c?(this._cancelSuggest(),"Escape"===c&&(this.activeMenu="none")):"ArrowUp"!==
c&&"ArrowDown"!==c||!e?this.viewModel.searchTerm&&this.suggest():(this.activeMenu="suggestion",b.stopPropagation(),b.preventDefault(),this._cancelSuggest(),(b=e["ArrowUp"===c?e.length-1:0])&&b.focus()))};q.prototype._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};q.prototype._handleInputClick=function(){this.activeMenu="suggestion"};q.prototype._handleInputPaste=function(a){a=a.target;this.viewModel.searchTerm!==a.value&&(this.viewModel.searchTerm=
a.value);this.viewModel.searchTerm&&this.suggest()};q.prototype._handleSourceMenuButtonKeyup=function(b){var c=a.eventKey(b);if("ArrowUp"===c||"ArrowDown"===c||"Home"===c||"End"===c)b.stopPropagation(),b.preventDefault(),(b=this._sourceListNode?this._sourceListNode.getElementsByTagName("li"):null)&&(c=b["ArrowUp"===c||"End"===c?b.length-1:0])&&c.focus()};q.prototype._handleSourceKeyup=function(b){var c=b.target,d=this._sourceListNode?m.from(this._sourceListNode.getElementsByTagName("li")):null,e=
a.eventKey(b);if("Escape"===e)this._focus("none"),this._sourceMenuButtonNode&&this._sourceMenuButtonNode.focus();else if(d){c=d.indexOf(c);if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)b.stopPropagation(),b.preventDefault();"Home"===e?(d=d[0])&&d.focus():"End"===e?(d=d[d.length-1])&&d.focus():"ArrowUp"===e?(b=c-1,(d=0>b?this._sourceMenuButtonNode:d[b])&&d.focus()):"ArrowDown"===e&&(b=c+1,(d=b>=d.length?this._sourceMenuButtonNode:d[b])&&d.focus())}};q.prototype._handleSuggestionKeyup=function(b){var c=
b.target,d=this._suggestionListNode?m.from(this._suggestionListNode.getElementsByTagName("li")):null,c=d.indexOf(c),e=a.eventKey(b);this._cancelSuggest();if("Backspace"===e||"Delete"===e)this._focus();else if("Escape"===e)this._focus("none");else if(d){if("Home"===e||"End"===e||"ArrowUp"===e||"ArrowDown"===e)b.stopPropagation(),b.preventDefault();"Home"===e&&(b=d[0])&&b.focus();"End"===e&&(b=d[d.length-1])&&b.focus();"ArrowUp"===e?(--c,(d=0>c?d[d.length-1]:d[c])&&d.focus()):"ArrowDown"===e&&(c+=1,
(d=c>=d.length?d[0]:d[c])&&d.focus())}};q.prototype._focus=function(a){this.focus();a&&(this.activeMenu=a)};q.prototype._formSubmit=function(a){a.preventDefault();this.search()};q.prototype._getSourceName=function(a){var b=this.viewModel.allSources.getItemAt(a);return a===u.ALL_INDEX?f.all:b?b.name||f.untitledSource:f.untitledSource};q.prototype._getSuggestionHeaderNode=function(a){var b=this._getSourceName(a);return t.tsx("div",{key:"esri-search__suggestion-header-"+a,class:"esri-menu__header"},
b)};q.prototype._splitResult=function(a,b){b=e.escapeRegExpString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")};q.prototype._getSuggestionNode=function(a,b){var c=this.viewModel.searchTerm;if(c){var d=a.text||f.untitledResult,e=[];if(w.test(d))e.push(t.tsx("div",{innerHTML:d}));else{var d=this._splitResult(d,c),g=c.toLowerCase();d.forEach(function(a,b){a&&a.length&&(a.toLowerCase()===g?e.push(t.tsx("strong",{key:b},a)):e.push(a))})}return t.tsx("li",{bind:this,onclick:this._handleSuggestionClick,
onkeydown:this._handleSuggestionClick,onkeyup:this._handleSuggestionKeyup,key:"esri-search__suggestion$-{sourceIndex}_"+b,"data-suggestion":a,role:"menuitem",class:"esri-menu__list-item",tabindex:"-1"},e)}};q.prototype._getSourceNode=function(a){var b,c=(b={},b["esri-menu__list-item--active"]=a===this.viewModel.activeSourceIndex,b);return t.tsx("li",{bind:this,key:"esri-search__source-"+a,onclick:this._handleSourceClick,onkeydown:this._handleSourceClick,onkeyup:this._handleSourceKeyup,"data-source-index":a,
role:"menuitem",class:this.classes("esri-search__source","esri-menu__list-item",c),tabindex:"-1"},this._getSourceName(a))};q.prototype._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};k([l.property(),t.renderable()],q.prototype,"activeMenu",void 0);k([l.aliasOf("viewModel.activeSource"),t.renderable()],q.prototype,"activeSource",void 0);k([l.aliasOf("viewModel.activeSourceIndex"),
t.renderable()],q.prototype,"activeSourceIndex",void 0);k([l.aliasOf("viewModel.allPlaceholder"),t.renderable()],q.prototype,"allPlaceholder",void 0);k([l.aliasOf("viewModel.allSources")],q.prototype,"allSources",void 0);k([l.aliasOf("viewModel.autoNavigate")],q.prototype,"autoNavigate",void 0);k([l.aliasOf("viewModel.autoSelect")],q.prototype,"autoSelect",void 0);k([l.aliasOf("viewModel.defaultSources")],q.prototype,"defaultSources",void 0);k([t.renderable(),l.property()],q.prototype,"disabled",
void 0);k([l.aliasOf("viewModel.goToOverride")],q.prototype,"goToOverride",void 0);k([l.property()],q.prototype,"iconClass",void 0);k([l.aliasOf("viewModel.includeDefaultSources")],q.prototype,"includeDefaultSources",void 0);k([l.property()],q.prototype,"label",void 0);k([t.renderable(),l.aliasOf("viewModel.locationEnabled")],q.prototype,"locationEnabled",void 0);k([l.aliasOf("viewModel.maxResults")],q.prototype,"maxResults",void 0);k([l.aliasOf("viewModel.maxSuggestions")],q.prototype,"maxSuggestions",
void 0);k([l.aliasOf("viewModel.minSuggestCharacters")],q.prototype,"minSuggestCharacters",void 0);k([l.aliasOf("viewModel.popupEnabled")],q.prototype,"popupEnabled",void 0);k([l.aliasOf("viewModel.popupTemplate")],q.prototype,"popupTemplate",void 0);k([l.aliasOf("viewModel.portal")],q.prototype,"portal",void 0);k([l.aliasOf("viewModel.resultGraphic")],q.prototype,"resultGraphic",void 0);k([l.aliasOf("viewModel.resultGraphicEnabled")],q.prototype,"resultGraphicEnabled",void 0);k([l.aliasOf("viewModel.results"),
t.renderable()],q.prototype,"results",void 0);k([l.aliasOf("viewModel.searchAllEnabled"),t.renderable()],q.prototype,"searchAllEnabled",void 0);k([l.aliasOf("viewModel.searchTerm"),t.renderable()],q.prototype,"searchTerm",void 0);k([l.aliasOf("viewModel.selectedResult")],q.prototype,"selectedResult",void 0);k([l.aliasOf("viewModel.sources")],q.prototype,"sources",void 0);k([l.aliasOf("viewModel.suggestions"),t.renderable()],q.prototype,"suggestions",void 0);k([l.aliasOf("viewModel.suggestionsEnabled")],
q.prototype,"suggestionsEnabled",void 0);k([l.aliasOf("viewModel.view"),t.renderable()],q.prototype,"view",void 0);k([t.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),l.property({type:u}),t.renderable(["viewModel.allSources","viewModel.activeSource.placeholder","viewModel.activeSource.name","viewModel.state"])],q.prototype,"viewModel",void 0);k([l.aliasOf("viewModel.clear")],q.prototype,"clear",null);k([t.accessibleHandler()],q.prototype,
"_handleSourcesMenuToggleClick",null);k([t.accessibleHandler()],q.prototype,"_handleClearButtonClick",null);k([t.accessibleHandler()],q.prototype,"_handleSearchButtonClick",null);k([t.accessibleHandler()],q.prototype,"_handleSuggestionClick",null);k([t.accessibleHandler()],q.prototype,"_handleUseCurrentLocationClick",null);k([t.accessibleHandler()],q.prototype,"_handleSourceClick",null);return q=k([l.subclass("esri.widgets.Search")],q)}(l.declared(q))});