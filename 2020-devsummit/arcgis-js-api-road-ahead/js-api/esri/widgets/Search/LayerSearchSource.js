// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/lang ../../core/accessorSupport/decorators ./SearchSource ./support/layerSearchUtils".split(" "),function(n,p,l,d,h,e,c,m,k){return function(f){function b(){var a=null!==f&&f.apply(this,arguments)||this;a.displayField=null;a.exactMatch=null;a.orderByFields=null;a.searchFields=null;a.searchQueryParams=null;a.searchTemplate=null;a.suggestionTemplate=null;
a.suggestQueryParams=null;a.getResults=function(b,c){return k.getResults(h({source:a},b),c)};a.getSuggestions=function(b,c){return k.getSuggestions(h({source:a},b),c)};return a}l(b,f);g=b;Object.defineProperty(b.prototype,"layer",{set:function(a){this._set("layer",a);a&&a.load().catch(function(){})},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"name",{get:function(){return this._getLayerTitle()||""},set:function(a){void 0===a?this._clearOverride("name"):this._override("name",
a)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new g({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?e.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,searchExtent:this.searchExtent?
this.searchExtent.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?e.clone(this.searchFields):null,searchQueryParams:this.searchQueryParams?e.clone(this.searchQueryParams):null,suggestionTemplate:this.suggestionTemplate,suggestQueryParams:this.suggestQueryParams?e.clone(this.suggestQueryParams):null,zoomScale:this.zoomScale})};
b.prototype._getFirstStringField=function(){var a=this.layer,b="";a&&a.fields&&a.fields.some(function(a){return"string"===a.type?(b=a.name,!0):!1});return b};b.prototype._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};b.prototype._getSearchFieldsString=function(){var a=this.layer;return a.loaded?": "+(this.searchFields||[this._getDisplayField()]).map(function(b){var c=a.getField(b);return c&&c.alias||b}).join(", "):""};b.prototype._getLayerTitle=
function(){var a=this.layer;if(a&&(a=a.title))return""+a+this._getSearchFieldsString()};var g;d([c.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],b.prototype,"displayField",void 0);d([c.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],b.prototype,"exactMatch",void 0);d([c.property({value:null})],b.prototype,"layer",null);d([c.property({dependsOn:["layer.title","layer.loaded"]})],b.prototype,"name",null);d([c.property({type:[String],
json:{write:!0}})],b.prototype,"orderByFields",void 0);d([c.property()],b.prototype,"searchFields",void 0);d([c.property()],b.prototype,"searchQueryParams",void 0);d([c.property()],b.prototype,"searchTemplate",void 0);d([c.property()],b.prototype,"suggestionTemplate",void 0);d([c.property()],b.prototype,"suggestQueryParams",void 0);return b=g=d([c.subclass("esri.widgets.Search.LayerSearchSource")],b)}(c.declared(m))});