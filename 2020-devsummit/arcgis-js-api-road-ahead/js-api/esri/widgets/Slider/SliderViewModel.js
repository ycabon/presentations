// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/Logger ../../core/maybe ../../core/accessorSupport/decorators".split(" "),function(r,t,l,f,m,n,p,g,d){var q=p.getLogger("esri.widgets.Slider.SliderViewModel");return function(k){function b(a){a=k.call(this,a)||this;a.precision=4;a.thumbsConstrained=!0;return a}l(b,k);Object.defineProperty(b.prototype,"labelFormatFunction",{set:function(a){this._set("labelFormatFunction",
a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"inputFormatFunction",{set:function(a){this._set("inputFormatFunction",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"inputParseFunction",{set:function(a){this._set("inputParseFunction",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"labels",{get:function(){var a=this,h=this.max,b=this.min,c=this.values,c=c&&c.length?c.map(function(h,b){return a.getLabelForValue(h,"value",b)}):[];return{max:this.getLabelForValue(h,
"max"),min:this.getLabelForValue(b,"min"),values:c}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"max",{set:function(a){this.setMax(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"min",{set:function(a){this.setMin(a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){var a=this.min;return g.isSome(this.max)&&g.isSome(a)?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"values",
{set:function(a){var h=this.max,b=this.min,c=this.values;c&&a&&c.length===a.length&&c.every(function(b,h){return b===a[h]})||(this._set("values",null),a&&a.length&&(g.isSome(b)&&a.some(function(a){return a<b})&&(this.min=Math.min.apply(Math,a)),g.isSome(h)&&a.some(function(a){return a>h})&&(this.max=Math.max.apply(Math,a))),this._set("values",a))},enumerable:!0,configurable:!0});b.prototype.toPrecision=function(a){return parseFloat(a.toFixed(this.precision))};b.prototype.defaultLabelFormatFunction=
function(a){var b=this.precision;return parseFloat(a.toFixed(10<this.max-this.min?2:b)).toString()};b.prototype.defaultInputFormatFunction=function(a){return a.toString()};b.prototype.defaultInputParseFunction=function(a){return parseFloat(a)};b.prototype.getBoundsForValueAtIndex=function(a){var b=this.max,e=this.min,c=this.values;if(this.thumbsConstrained){var d=a-1;a+=1;return{min:g.isSome(c[d])?c[d]:e,max:g.isSome(c[a])?c[a]:b}}return{min:e,max:b}};b.prototype.getLabelForValue=function(a,b,e){return g.isSome(a)?
this.labelFormatFunction?this.labelFormatFunction(a,b,e):this.defaultLabelFormatFunction(a):null};b.prototype.setMax=function(a){var b=this.max,e=this.min,c=this.values;if(isNaN(a))this._logError("slider:invalid-value","Property 'max' must of type 'number'.");else if(null===a)this._set("max",null);else if(a=this.toPrecision(a),b!==a)if(g.isSome(e)&&a<=e)this._logError("slider:invalid-value","Property 'max' must be greater than 'min'.");else if(this._set("max",a),c&&c.length)for(b=0;b<c.length;b++)a<
c[b]&&this.setValue(b,a)};b.prototype.setMin=function(a){var b=this.max,e=this.min,c=this.values;if(isNaN(a))this._logError("slider:invalid-value","Property 'min' must of type 'number'.");else if(null===a)this._set("min",null);else if(a=this.toPrecision(a),e!==a)if(g.isSome(b)&&a>=b)this._logError("slider:invalid-value","Property 'min' must be less than 'max'.");else if(this._set("min",a),c&&c.length)for(b=0;b<c.length;b++)a>c[b]&&this.setValue(b,a)};b.prototype.setValue=function(a,b){var e=this.values,
c=e[a];b=this.toPrecision(b);if(c!==b){var c=this.getBoundsForValueAtIndex(a),d=c.max;b<c.min||b>d?this._logError("slider:invalid-value","Members of property 'values' must be within range."):(e=e.slice(),e[a]=b,this._set("values",e),this.notifyChange("labels"))}};b.prototype._logError=function(a,b,d){q.error(new n(a,b,d))};f([d.property()],b.prototype,"labelFormatFunction",null);f([d.property()],b.prototype,"inputFormatFunction",null);f([d.property()],b.prototype,"inputParseFunction",null);f([d.property({dependsOn:["labelFormatFunction",
"max","min","values"],readOnly:!0})],b.prototype,"labels",null);f([d.property()],b.prototype,"max",null);f([d.property()],b.prototype,"min",null);f([d.property()],b.prototype,"precision",void 0);f([d.property({dependsOn:["max","min"],readOnly:!0})],b.prototype,"state",null);f([d.property()],b.prototype,"thumbsConstrained",void 0);f([d.property()],b.prototype,"values",null);return b=f([d.subclass("esri.widgets.Slider.SliderViewModel")],b)}(d.declared(m))});