// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/i18n!./SizeSlider/nls/SizeSlider ../../Color ../../core/maybe ../../core/accessorSupport/decorators ../../renderers/visualVariables/SizeVariable ../../renderers/visualVariables/support/SizeStop ./SmartMappingSliderBase ./SizeSlider/SizeSliderViewModel ./support/utils ./../support/widget".split(" "),function(A,B,q,w,k,x,n,r,f,t,u,y,z,m,l){var v={trackFillColor:new n([149,
149,149]),trackBackgroundColor:new n([224,224,224])};return function(n){function b(a){a=n.call(this,a)||this;a._maxRampFillWidth=1;a._minRampFillWidth=.2;a._rampNode=null;a.label=x.widgetLabel;a.stops=null;a.style=q({},v);a.viewModel=new z;a.zoomOptions=null;return a}w(b,n);p=b;b.prototype.castStyle=function(a){return q({},v,a)};b.fromRendererResult=function(a,e){var c=a.statistics,g=c.avg,c=c.stddev,b=a.visualVariables[0],d=m.getSizesFromVariable(b);a=a.renderer.authoringInfo.visualVariables[0];
return new p({max:a.maxSliderValue,min:a.minSliderValue,stops:[{value:b.minDataValue,size:d[1]},{value:b.maxDataValue,size:d[0]}],histogramConfig:{average:g,standardDeviation:c,bins:e?e.bins:[]}})};b.prototype.updateFromRendererResult=function(a,e){var c=a.statistics,b=c.avg,c=c.stddev,h=a.visualVariables[0],d=m.getSizesFromVariable(h);a=a.renderer.authoringInfo.visualVariables[0];this.set({max:a.maxSliderValue,min:a.minSliderValue,stops:[{value:h.minDataValue,size:d[1]},{value:h.maxDataValue,size:d[0]}],
histogramConfig:{average:b,standardDeviation:c,bins:e?e.bins:[]}})};b.prototype.updateVisualVariable=function(a){var e=a.clone(),c=this.stops;if(!a||!c)return null;if(e.stops)return e.stops=c,e;a=c[0];var c=c[c.length-1],b=e.maxSize,h=e.minSize;if(b instanceof t){var d=b.stops,f=c.size/d[0].size,d=d.map(function(a){a.size*=f;return a});b.stops=d}else b=c.size;if(h instanceof t){var d=h.stops,l=a.size/d[0].size,d=d.map(function(a){a.size*=l;return a});h.stops=d}else h=a.size;e.set({maxDataValue:c.value,
minDataValue:a.value,maxSize:b,minSize:h});return e};b.prototype.updateFromVisualVariable=function(a){if(a){var b=a.maxDataValue,c=a.minDataValue,g=a.stops;g?this.stops=g:(a=m.getSizesFromVariable(a),g=a[0],this.stops=[new u({value:c,size:a[1]}),new u({value:b,size:g})])}};b.prototype.render=function(){var a,b=this.label,c="disabled"===this.state,g=this.classes("esri-size-slider","esri-widget","esri-widget--panel",(a={},a["esri-disabled"]=c,a));return l.tsx("div",{"aria-label":b,class:g},c?null:this.renderContent(this.renderRamp(),
"esri-size-slider__slider-container","esri-size-slider__histogram-container"))};b.prototype.renderRamp=function(){var a=this.zoomOptions;return l.tsx("div",{afterCreate:l.storeNode,bind:this,class:"esri-size-slider__ramp","data-node-ref":"_rampNode"},l.tsx("svg",{key:"ramp-svg",xmlns:"http://www.w3.org/2000/svg"},l.tsx("rect",{x:"0",y:"0",fill:m.getFillFromColor(this.style.trackBackgroundColor),height:"100%",width:"100%"}),this.renderPath()),a?this.renderZoomCaps():null)};b.prototype.renderPath=function(){if(this._rampNode){var a=
this._rampNode,b=a.offsetHeight,b=void 0===b?0:b,a=a.offsetWidth,c=void 0===a?0:a;if(r.isSome(b)&&r.isSome(c)){var g=this.stops,a=this.style.trackFillColor,h=this.values,d=this.viewModel,f=d.max,d=d.min,k=[this._maxRampFillWidth,this._minRampFillWidth];g[0].size<g[g.length-1].size&&k.reverse();b=m.getPathForSizeStops({bottomValue:h[0],bottomWidth:k[0],max:f,min:d,pathHeight:b,pathWidth:c,topValue:h[1],topWidth:k[1]});return l.tsx("path",{d:b,fill:m.getFillFromColor(a)})}}};var p;k([f.property()],
b.prototype,"label",void 0);k([f.aliasOf("viewModel.stops")],b.prototype,"stops",void 0);k([f.property(),l.renderable()],b.prototype,"style",void 0);k([f.cast("style")],b.prototype,"castStyle",null);k([f.property(),l.renderable("viewModel.hasTimeData viewModel.inputFormatFunction viewModel.inputParseFunction viewModel.labelFormatFunction viewModel.max viewModel.min viewModel.stops viewModel.values viewModel.zoomOptions".split(" "))],b.prototype,"viewModel",void 0);k([f.aliasOf("viewModel.zoomOptions")],
b.prototype,"zoomOptions",void 0);return b=p=k([f.subclass("esri.widgets.smartMapping.SizeSlider")],b)}(f.declared(y.SmartMappingSliderBase))});