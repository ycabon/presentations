// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.16/esri/copyright.txt for details.
//>>built
define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/maybe ../../core/watchUtils ../../core/accessorSupport/decorators ../Histogram ../Slider ../Widget ./support/utils ../support/widget".split(" "),function(h,m,p,e,n,l,g,k,d,q,r,t,u,f){Object.defineProperty(m,"__esModule",{value:!0});h=function(h){function b(a){var c=h.call(this,a)||this;c.hasTimeData=null;c.histogram=new q({layout:"vertical"});
c.histogramConfig=null;c.inputFormatFunction=null;c.inputParseFunction=null;c.labelFormatFunction=null;c.precision=4;c.slider=new r({layout:"vertical",visibleElements:{labels:!0,rangeLabels:!0},labelInputsEnabled:!0,rangeLabelInputsEnabled:!0});c.state=null;c.viewModel=null;c.zoomOptions=null;a=c.slider;c.own(a.on("max-change",function(a){return c.emit("max-change",a)}),a.on("min-change",function(a){return c.emit("min-change",a)}),a.on("thumb-change",function(a){return c.emit("thumb-change",a)}),
a.on("thumb-drag",function(a){return c.emit("thumb-drag",a)}),k.watch(c,["histogramConfig","max","min","zoomOptions"],function(){var a=c.histogram,b=c.viewModel,d=b.max,b=b.min,e=c.getParamsFromHistogramConfig(c.histogramConfig);a.set(n({},e,{max:d,min:b}))}),k.watch(c,"labelFormatFunction",function(){c.histogram.set({labelFormatFunction:c.labelFormatFunction})}));c._onMaxZoomCapPointerDown=c._onMaxZoomCapPointerDown.bind(c);c._onMinZoomCapPointerDown=c._onMinZoomCapPointerDown.bind(c);return c}p(b,
h);b.prototype.postInitialize=function(){var a=this,c=this.histogramConfig,b=this.viewModel,d=b.labelFormatFunction,e=b.max,f=b.min,c=this.getParamsFromHistogramConfig(void 0===c?{}:c);this.own(k.watch(b,"max",function(){return a.notifyChange("max")}),k.watch(b,"min",function(){return a.notifyChange("min")}));this.histogram.set(n({labelFormatFunction:d},c,{max:e,min:f}));this.slider.set({viewModel:b})};Object.defineProperty(b.prototype,"max",{get:function(){return this.viewModel?this.viewModel.getUnzoomedMax():
null},set:function(a){this.viewModel.max=a;this._set("max",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"min",{get:function(){return this.viewModel?this.viewModel.getUnzoomedMin():null},set:function(a){this.viewModel.min=a;this._set("min",a)},enumerable:!0,configurable:!0});b.prototype.renderContent=function(a,c,b){this.slider.extraNodes=[a,this.renderHistogram(b)];return f.tsx("div",{class:c},this.slider.render())};b.prototype.renderHistogram=function(a){return this.histogramConfig?
f.tsx("div",{class:a?a:null},this.histogram.render()):null};b.prototype.renderBackgroundFillDefinition=function(a){return f.tsx("pattern",{id:a,patternUnits:"userSpaceOnUse",x:"0",y:"0",width:"15",height:"15"},f.tsx("image",{x:"0",y:"0",width:"15",height:"15",href:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}))};
b.prototype.renderRampFillDefinition=function(a,c){return f.tsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"1"},this.renderRampFillStops(c))};b.prototype.renderRampFillStops=function(a){var c=this;return a.reverse().map(function(a,b){return c.renderStop(a,b)})};b.prototype.renderStop=function(a,c){a=this.getPropsForStop(a);return f.tsx("stop",{key:c+"-stop",offset:a.offset,"stop-color":a.color,"stop-opacity":a.opacity})};b.prototype.renderZoomCaps=function(){return[this.renderMaxZoomCap(),this.renderMinZoomCap()]};
b.prototype.renderMinZoomCap=function(){if(this.zoomOptions&&g.isSome(this.zoomOptions.min))return f.tsx("svg",{key:"bottom",class:this.classes("zoom-cap","zoom-cap--min"),viewBox:"0 0 30 11",xmlns:"http://www.w3.org/2000/svg",onpointerdown:this._onMinZoomCapPointerDown},f.tsx("polygon",{class:"zoom-cap--mask",key:"mask",fill:"#1B8617",points:"0 11.3846154 30 11.3846154 30 1 25 5.38461538 20 1 15 5.38461538 10 1 5 5.38461538 0 1"}),f.tsx("polygon",{class:"zoom-cap--underline",key:"underline",fill:"#69DCFF",
points:"0 0 5 4.38461538 10 0 15 4.38461538 20 0 25 4.38461538 30 0 30 4.61538462 25 9 20 4.61538462 15 9 10 4.61538462 5 9 0 4.61538462"}),f.tsx("polygon",{class:"zoom-cap--line",key:"line",fill:"#DA5656",points:"0 1 5 5.38461538 10 1 15 5.38461538 20 1 25 5.38461538 30 1 30 5.61538462 25 10 20 5.61538462 15 10 10 5.61538462 5 10 0 5.61538462"}))};b.prototype.renderMaxZoomCap=function(){if(this.zoomOptions&&g.isSome(this.zoomOptions.max))return f.tsx("svg",{key:"top",class:this.classes("zoom-cap",
"zoom-cap--max"),viewBox:"0 0 30 11",xmlns:"http://www.w3.org/2000/svg",onpointerdown:this._onMaxZoomCapPointerDown},f.tsx("polygon",{class:"zoom-cap--mask",key:"mask",points:"0 -1.81994377e-12 30 -1.81994377e-12 30 8.23076923 25 3.61538462 20 8.23076923 15 3.61538462 10 8.23076923 5 3.61538462 0 8.23076923"}),f.tsx("polygon",{class:"zoom-cap--underline",key:"underline",points:"0 5.61538462 5 1 10 5.61538462 15 1 20 5.61538462 25 1 30 5.61538462 30 10.2307692 25 5.61538462 20 10.2307692 15 5.61538462 10 10.2307692 5 5.61538462 0 10.2307692"}),
f.tsx("polygon",{class:"zoom-cap--line",key:"line",points:"0 4.61538462 5 -1.87329639e-12 10 4.61538462 15 -1.87329639e-12 20 4.61538462 25 -1.87329639e-12 30 4.61538462 30 9.23076923 25 4.61538462 20 9.23076923 15 4.61538462 10 9.23076923 5 4.61538462 0 9.23076923"}))};b.prototype.getPropsForStop=function(a){var c=a.color;a=a.offset;return{color:c instanceof l?c.toCss(!0):l.fromString(c).toCss(!0),offset:(100*a).toFixed(2)+"%",opacity:c instanceof l?c.toRgba()[3]:null}};b.prototype.getParamsFromHistogramConfig=
function(a){return a?{average:a.average,barCreatedFunction:a.barCreatedFunction,bins:a.bins,dataLineCreatedFunction:a.dataLineCreatedFunction,dataLines:this._getDataLines(a)}:null};b.prototype._onMaxZoomCapPointerDown=function(){var a=this.zoomOptions;a&&g.isSome(a.max)&&(a=a.min,this.zoomOptions=g.isSome(a)?{min:a}:null)};b.prototype._onMinZoomCapPointerDown=function(){var a=this.zoomOptions;a&&g.isSome(a.min)&&(a=a.max,this.zoomOptions=g.isSome(a)?{max:a}:null)};b.prototype._getDataLines=function(a){return this._getStandardDeviationDataLines(a.standardDeviation,
a.average,a.standardDeviationCount||1).concat(a.dataLines||[])};b.prototype._getStandardDeviationDataLines=function(a,c,b){return u.getDeviationValues(a,c,b).map(function(a){return{value:a}})};e([d.aliasOf("viewModel.hasTimeData")],b.prototype,"hasTimeData",void 0);e([d.property()],b.prototype,"histogram",void 0);e([d.property()],b.prototype,"histogramConfig",void 0);e([d.aliasOf("viewModel.inputFormatFunction")],b.prototype,"inputFormatFunction",void 0);e([d.aliasOf("viewModel.inputParseFunction")],
b.prototype,"inputParseFunction",void 0);e([d.aliasOf("viewModel.labelFormatFunction")],b.prototype,"labelFormatFunction",void 0);e([d.property({dependsOn:["viewModel.max","viewModel.zoomOptions"]})],b.prototype,"max",null);e([d.property({dependsOn:["viewModel.min","viewModel.zoomOptions"]})],b.prototype,"min",null);e([d.aliasOf("viewModel.precision")],b.prototype,"precision",void 0);e([d.property()],b.prototype,"slider",void 0);e([d.aliasOf("viewModel.state")],b.prototype,"state",void 0);e([d.aliasOf("viewModel.values")],
b.prototype,"values",void 0);e([d.property()],b.prototype,"viewModel",void 0);e([d.aliasOf("viewModel.zoomOptions")],b.prototype,"zoomOptions",void 0);return b=e([d.subclass("esri.widgets.smartMapping.SmartMappingSliderBase")],b)}(d.declared(t));m.SmartMappingSliderBase=h});