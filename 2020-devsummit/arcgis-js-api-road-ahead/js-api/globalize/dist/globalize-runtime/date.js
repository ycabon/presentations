//>>built
(function(d,r){"function"===typeof define&&define.amd?define(["../globalize-runtime","./number"],r):"object"===typeof exports?module.exports=r(require("../globalize-runtime"),require("./number")):r(d.Globalize)})(this,function(d){function r(a){return void 0!==a.skeleton||void 0!==a.date||void 0!==a.time||void 0!==a.datetime||void 0!==a.raw}var N=d._createErrorUnsupportedFeature,O=d._looseMatching,C=d._regexpEscape,D=d._removeLiteralQuotes,B=d._runtimeKey,E=d._stringPad,v=d._validateParameterPresence,
P=d._validateParameterType,F=d._validateParameterTypeString,x=function(a,e){P(a,e,void 0===a||a instanceof Date,"Date")},y=function(){function a(a,b){var f=0;for(a=a.getTime();f<b.length-1&&a>=b[f];)f++;return f}function e(a){var b=this.getTimezoneOffset();a=a();this.original.setTime(new Date(this.getTime()));var f=this.getTimezoneOffset();f-b&&this.original.setMinutes(this.original.getMinutes()+f-b);return a}var b=function(a,b){var f=new Date(a.getTime());Object.defineProperty(this,"original",{value:f});
a=new Date(a.getTime());Object.defineProperty(this,"local",{value:a});Object.defineProperty(this,"timeZoneData",{value:b});Object.defineProperty(this,"setWrap",{value:e});if(!(b.untils&&b.offsets&&b.isdsts))throw Error("Invalid IANA data");this.setTime(this.local.getTime()-6E4*this.getTimezoneOffset())};b.prototype.clone=function(){return new b(this.original,this.timeZoneData)};"getFullYear getMonth getDate getDay getHours getMinutes getSeconds getMilliseconds".split(" ").forEach(function(a){var f=
"getUTC"+a.substr(3);b.prototype[a]=function(){return this.local[f]()}});b.prototype.valueOf=b.prototype.getTime=function(){return this.local.getTime()+6E4*this.getTimezoneOffset()};b.prototype.getTimezoneOffset=function(){var b=a(this.original,this.timeZoneData.untils);return this.timeZoneData.offsets[b]};"setFullYear setMonth setDate setHours setMinutes setSeconds setMilliseconds".split(" ").forEach(function(a){var f="setUTC"+a.substr(3);b.prototype[a]=function(a){var b=this.local;return this.setWrap(function(){return b[f](a)})}});
b.prototype.setTime=function(a){return this.local.setTime(a)};b.prototype.isDST=function(){var b=a(this.original,this.timeZoneData.untils);return!!this.timeZoneData.isdsts[b]};b.prototype.inspect=function(){var b=a(this.original,this.timeZoneData.untils),e=this.timeZoneData.abbrs;return this.local.toISOString().replace(/Z$/,"")+" "+(e&&e[b]+" "||-1*this.getTimezoneOffset()+" ")+(this.isDST()?"(daylight savings)":"")};b.prototype.toDate=function(){return new Date(this.getTime())};["toISOString","toJSON",
"toUTCString"].forEach(function(a){b.prototype[a]=function(){return this.toDate()[a]()}});return b}(),z=function(a,e){return(a.getDay()-e+7)%7},Q=function(a,e){return(e.getTime()-a.getTime())/864E5},w=function(a,e){a=a instanceof y?a.clone():new Date(a.getTime());switch(e){case "year":a.setMonth(0);case "month":a.setDate(1);case "day":a.setHours(0);case "hour":a.setMinutes(0);case "minute":a.setSeconds(0);case "second":a.setMilliseconds(0)}return a},G=function(a){return Math.floor(Q(w(a,"year"),a))},
R=function(a,e){e=e||function(a,f,e){a[e]=f;return a};return Object.keys(a).reduce(function(b,f){return e(b,f,a[f])},{})}({era:"G",year:"yY",quarter:"qQ",month:"ML",week:"wW",day:"dDF",weekday:"ecE",dayperiod:"a",hour:"hHkK",minute:"m",second:"sSA",zone:"zvVOxX"},function(a,e,b){b.split("").forEach(function(b){a[b]=e});return a}),H=/([a-z])\1*|'([^']|'')+'|''|./ig,I=function(a,e,b,f){var d;a=a.getTimezoneOffset();d=Math.abs(a);f=f||{1:function(a){return E(a,1)},2:function(a){return E(a,2)}};return e.split(";")[0<
a?1:0].replace(":",b).replace(/HH?/,function(a){return f[a.length](Math.floor(d/60))}).replace(/mm/,function(){return f[2](Math.floor(d%60))}).replace(/ss/,function(){return f[2](Math.floor(d%1*60))})},S="sun mon tue wed thu fri sat".split(" "),J=function(a,e,b){var f=[],d=b.timeSeparator;b.timeZoneData&&(a=new y(a,b.timeZoneData()));b.pattern.replace(H,function(t){var c,l;l=t.charAt(0);var h=t.length;"j"===l&&(l=b.preferredTime);"Z"===l&&(4>h?(l="x",h=4):5>h?(l="O",h=4):(l="X",h=5));"z"===l&&(a.isDST&&
(c=a.isDST()?b.daylightTzName:b.standardTzName),c||(l="O",4>h&&(h=1)));switch(l){case "G":c=b.eras[0>a.getFullYear()?0:1];break;case "y":c=a.getFullYear();2===h&&(c=String(c),c=+c.substr(c.length-2));break;case "Y":c=new Date(a.getTime());c.setDate(c.getDate()+7-z(a,b.firstDay)-b.firstDay-b.minDays);c=c.getFullYear();2===h&&(c=String(c),c=+c.substr(c.length-2));break;case "Q":case "q":c=Math.ceil((a.getMonth()+1)/3);2<h&&(c=b.quarters[l][h][c]);break;case "M":case "L":c=a.getMonth()+1;2<h&&(c=b.months[l][h][c]);
break;case "w":c=z(w(a,"year"),b.firstDay);c=Math.ceil((G(a)+c)/7)-(7-c>=b.minDays?0:1);break;case "W":c=z(w(a,"month"),b.firstDay);c=Math.ceil((a.getDate()+c)/7)-(7-c>=b.minDays?0:1);break;case "d":c=a.getDate();break;case "D":c=G(a)+1;break;case "F":c=Math.floor(a.getDate()/7)+1;break;case "e":case "c":if(2>=h){c=z(a,b.firstDay)+1;break}case "E":c=S[a.getDay()];c=b.days[l][h][c];break;case "a":c=b.dayPeriods[12>a.getHours()?"am":"pm"];break;case "h":c=a.getHours()%12||12;break;case "H":c=a.getHours();
break;case "K":c=a.getHours()%12;break;case "k":c=a.getHours()||24;break;case "m":c=a.getMinutes();break;case "s":c=a.getSeconds();break;case "S":c=Math.round(a.getMilliseconds()*Math.pow(10,h-3));break;case "A":c=Math.round((a-w(a,"day"))*Math.pow(10,h-3));break;case "z":break;case "v":if(b.genericTzName){c=b.genericTzName;break}case "V":if(b.timeZoneName){c=b.timeZoneName;break}"v"===t&&(h=1);case "O":0===a.getTimezoneOffset()?c=b.gmtZeroFormat:(4>h?(c=a.getTimezoneOffset(),c=b.hourFormat[0===c%
60-c%1?0:1]):c=b.hourFormat,c=I(a,c,d,e),c=b.gmtFormat.replace(/\{0\}/,c));break;case "X":if(0===a.getTimezoneOffset()){c="Z";break}case "x":c=a.getTimezoneOffset();1===h&&0!==c%60-c%1&&(h+=1);4!==h&&5!==h||0!==c%1||(h-=2);c=["+HH;-HH","+HHmm;-HHmm","+HH:mm;-HH:mm","+HHmmss;-HHmmss","+HH:mm:ss;-HH:mm:ss"][h-1];c=I(a,c,":");break;case ":":c=d;break;case "'":c=D(t);break;default:c=t}"number"===typeof c&&(c=e[h](c));l=(l=R[l])?l:"literal";"literal"===l&&f.length&&"literal"===f[f.length-1].type?f[f.length-
1].value+=c:f.push({type:l,value:c})});return f},T=function(a){return(new Date(a.getFullYear(),a.getMonth()+1,0)).getDate()},U=function(a,e){var b=a.getDate();a.setDate(1);a.setMonth(e);e=(new Date(a.getFullYear(),a.getMonth()+1,0)).getDate();a.setDate(1>b?1:b<e?b:e)},K=function(a,e,b){return a<e||a>b},L=function(a,e,b){var f,d,t,c,l,h,A,r,g=new Date,m=[];b.timeZoneData&&(g=new y(g,b.timeZoneData()));if(!e.length||!e.every(function(a){var e,n;if("literal"===a.type)return!0;n=a.type.charAt(0);e=a.type.length;
"j"===n&&(n=b.preferredTimeData);switch(n){case "G":m.push(0);l=+a.value;break;case "y":a=a.value;if(2===e){if(0>a||99<a)return!1;e=100*Math.floor(g.getFullYear()/100);a+=e;a>g.getFullYear()+20&&(a-=100)}g.setFullYear(a);m.push(0);break;case "Y":throw N({feature:"year pattern `"+n+"`"});case "M":case "L":a=2>=e?a.value:+a.value;if(1>a||12<a)return!1;c=a;m.push(1);break;case "d":d=a.value;m.push(2);break;case "D":t=a.value;m.push(2);break;case "a":f=a.value;break;case "h":a=a.value;if(1>a||12<a)return!1;
h=A=!0;g.setHours(12===a?0:a);m.push(3);break;case "K":a=a.value;if(0>a||11<a)return!1;h=A=!0;g.setHours(a);m.push(3);break;case "k":a=a.value;if(1>a||24<a)return!1;h=!0;g.setHours(24===a?0:a);m.push(3);break;case "H":a=a.value;if(0>a||23<a)return!1;h=!0;g.setHours(a);m.push(3);break;case "m":a=a.value;if(0>a||59<a)return!1;g.setMinutes(a);m.push(4);break;case "s":a=a.value;if(0>a||59<a)return!1;g.setSeconds(a);m.push(5);break;case "A":g.setHours(0),g.setMinutes(0),g.setSeconds(0);case "S":a=Math.round(a.value*
Math.pow(10,3-e));g.setMilliseconds(a);m.push(6);break;case "z":case "Z":case "O":case "v":case "V":case "X":case "x":"number"===typeof a.value&&(r=a.value)}return!0})||h&&!(!f^A))return null;0===l&&g.setFullYear(-1*g.getFullYear()+1);void 0!==c&&U(g,c-1);if(void 0!==d){if(K(d,1,T(g)))return null;g.setDate(d)}else if(void 0!==t){if(K(t,1,1===(new Date(g.getFullYear(),1,29)).getMonth()?366:365))return null;g.setMonth(0);g.setDate(t)}A&&"pm"===f&&g.setHours(g.getHours()+12);void 0!==r&&g.setMinutes(g.getMinutes()+
r-g.getTimezoneOffset());m=Math.max.apply(null,m);g=w(g,"year month day hour minute second milliseconds".split(" ")[m]);g instanceof y&&(g=g.toDate());return g},M=function(a,e,b){var f,d,t=[],c=["abbreviated","wide","narrow"];f=b.digitsRe;a=O(a);d=b.pattern.match(H).every(function(d){function h(b,c){var d,e=a.match(b);c=c||function(a){return+a};if(!e)return!1;d=e[1];6>e.length?q.value=60*c(e[d?1:3]):10>e.length?(b=d?[1,3]:[5,7],q.value=60*c(e[b[0]])+c(e[b[1]])):(b=d?[1,3,5]:[7,9,11],q.value=60*c(e[b[0]])+
c(e[b[1]])+c(e[b[2]])/60);d&&(q.value*=-1);return!0}function l(){if(1===k)return u=!0,p=f}function r(){if(1===k||2===k)return u=!0,p=new RegExp("^("+f.source+"){1,2}")}function g(){if(2===k)return u=!0,p=new RegExp("^("+f.source+"){2}")}function m(c){c=b[c.join("/")];if(!c)return null;c.some(function(b){if(b[1].test(a))return q.value=b[0],p=b[1],!0});return null}var n,k,u,p,q={};q.type=d;n=d.charAt(0);k=d.length;"Z"===n&&(4>k?(n="x",k=4):5>k?(n="O",k=4):(n="X",k=5));"z"===n&&b.standardOrDaylightTzName&&
(q.value=null,p=b.standardOrDaylightTzName);"v"===n&&(b.genericTzName?(q.value=null,p=b.genericTzName):(n="V",k=4));"V"===n&&b.timeZoneName&&(q.value=2===k?b.timeZoneName:null,p=b.timeZoneNameRe);switch(n){case "G":m(["gregorian/eras",3>=k?"eraAbbr":4===k?"eraNames":"eraNarrow"]);break;case "y":case "Y":u=!0;p=1===k?new RegExp("^("+f.source+")+"):2===k?new RegExp("^("+f.source+"){1,2}"):new RegExp("^("+f.source+"){"+k+",}");break;case "Q":case "q":l()||g()||m(["gregorian/quarters","Q"===n?"format":
"stand-alone",c[k-3]]);break;case "M":case "L":r()||m(["gregorian/months","M"===n?"format":"stand-alone",c[k-3]]);break;case "D":3>=k&&(u=!0,p=new RegExp("^("+f.source+"){"+k+",3}"));break;case "W":case "F":l();break;case "e":case "c":if(2>=k){l()||g();break}case "E":6===k?m(["gregorian/days",["c"===n?"stand-alone":"format"],"short"])||m(["gregorian/days",["c"===n?"stand-alone":"format"],"abbreviated"]):m(["gregorian/days",["c"===n?"stand-alone":"format"],c[3>k?0:k-3]]);break;case "a":m(["gregorian/dayPeriods/format/wide"]);
break;case "w":1===k?(u=!0,d=p=new RegExp("^("+f.source+"){1,2}")):d=void 0;d||g();break;case "d":case "h":case "H":case "K":case "k":case "j":case "m":case "s":r();break;case "S":u=!0;p=new RegExp("^("+f.source+"){"+k+"}");break;case "A":u=!0;p=new RegExp("^("+f.source+"){"+(k+5)+"}");break;case "v":case "V":case "z":if(p&&p.test(a))break;if("V"===n&&2===k)break;case "O":if(a===b["timeZoneNames/gmtZeroFormat"])q.value=0,p=b["timeZoneNames/gmtZeroFormatRe"];else if(d=b["timeZoneNames/hourFormat"].some(function(a){if(h(a,
e))return p=a,!0}),!d)return null;break;case "X":if("Z"===a){q.value=0;p=/^Z/;break}case "x":d=b.x.some(function(a){if(h(a))return p=a,!0});if(!d)return null;break;case "'":q.type="literal";p=new RegExp("^"+C(D(d)));break;default:q.type="literal",p=new RegExp("^"+C(d))}if(!p)return!1;a=a.replace(p,function(a){q.lexeme=a;u&&(q.value=e(a));return""});if(!q.lexeme||u&&isNaN(q.value))return!1;t.push(q);return!0});""!==a&&(d=!1);return d?t:[]};d._dateFormat=J;d._dateFormatterFn=function(a){return function(d){return a(d).map(function(a){return a.value}).join("")}};
d._dateParser=L;d._dateParserFn=function(a,d,b){return function(e){var f;v(e,"value");F(e,"value");f=M(e,a,b);return L(e,f,d)||null}};d._dateTokenizer=M;d._dateToPartsFormatterFn=function(a,d){return function(b){v(b,"value");x(b,"value");return J(b,a,d)}};d._validateParameterTypeDate=x;d.dateFormatter=d.prototype.dateFormatter=function(a){a=a||{};r(a)||(a.skeleton="yMd");return d[B("dateFormatter",this._locale,[a])]};d.dateToPartsFormatter=d.prototype.dateToPartsFormatter=function(a){a=a||{};r(a)||
(a.skeleton="yMd");return d[B("dateToPartsFormatter",this._locale,[a])]};d.dateParser=d.prototype.dateParser=function(a){a=a||{};r(a)||(a.skeleton="yMd");return d[B("dateParser",this._locale,[a])]};d.formatDate=d.prototype.formatDate=function(a,d){v(a,"value");x(a,"value");return this.dateFormatter(d)(a)};d.formatDateToParts=d.prototype.formatDateToParts=function(a,d){v(a,"value");x(a,"value");return this.dateToPartsFormatter(d)(a)};d.parseDate=d.prototype.parseDate=function(a,d){v(a,"value");F(a,
"value");return this.dateParser(d)(a)};return d});