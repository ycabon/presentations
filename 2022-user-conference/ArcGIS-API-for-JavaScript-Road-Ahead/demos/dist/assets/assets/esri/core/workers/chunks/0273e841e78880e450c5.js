"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[934],{46521:(t,e,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(t,e){return new Float64Array(t,e,9)}n.d(e,{a:()=>i,c:()=>r}),Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},fromValues:function(t,e,n,r,i,o,s,c,a){return[t,e,n,r,i,o,s,c,a]},createView:i},Symbol.toStringTag,{value:"Module"}))},13598:(t,e,n)=>{function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function o(t,e){return new Float64Array(t,e,16)}n.d(e,{I:()=>s,a:()=>o,b:()=>i,c:()=>r});const s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(t,e,n,r,i,o,s,c,a,u,l,d,h,f,_,T){return[t,e,n,r,i,o,s,c,a,u,l,d,h,f,_,T]},createView:o,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))},94961:(t,e,n)=>{function r(){return[0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3]]}function o(t,e){return new Float64Array(t,e,4)}n.d(e,{I:()=>s,a:()=>r,b:()=>i,c:()=>o});const s=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:i,fromValues:function(t,e,n,r){return[t,e,n,r]},createView:o,IDENTITY:s},Symbol.toStringTag,{value:"Module"}))},29268:(t,e,n)=>{n.d(e,{a:()=>m,c:()=>g,g:()=>O,h:()=>p,j:()=>A,m:()=>y}),n(80442);var r,i,o=n(92604),s=n(22021),c=n(70586),a=n(52138),u=n(17896),l=n(65617),d=n(98766),h=n(88669);(i=r||(r={}))[i.X=0]="X",i[i.Y=1]="Y",i[i.Z=2]="Z";var f=n(78341),_=n(61277),T=n(12981);function g(){return(0,h.c)()}function p(t,e=g()){return(0,d.c)(e,t)}function m(t){return t[3]}function O(t){return t}function N(t,e,n){if((0,c.Wi)(e))return!1;const{origin:r,direction:i}=e,o=E;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2],a=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),u=a*a-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(u<0)return!1;const l=Math.sqrt(u);let d=(-a-l)/(2*s);const h=(-a+l)/(2*s);return(d<0||h<d&&h>0)&&(d=h),!(d<0||(n&&(n[0]=r[0]+i[0]*d,n[1]=r[1]+i[1]*d,n[2]=r[2]+i[2]*d),0))}const E=(0,l.c)();function A(t,e){return N(t,e,null)}function I(t,e,n){const r=T.WM.get(),i=T.MP.get();(0,u.f)(r,e.origin,e.direction);const o=m(t);(0,u.f)(n,r,e.origin),(0,u.g)(n,n,1/(0,u.l)(n)*o);const s=b(t,e.origin),c=(0,_.EU)(e.origin,n);return(0,a.d)(i,c+s,r),(0,u.m)(n,n,i),n}function R(t,e,n){const r=(0,u.b)(T.WM.get(),e,t),i=(0,u.g)(T.WM.get(),r,t[3]/(0,u.l)(r));return(0,u.a)(n,i,t)}function b(t,e){const n=(0,u.b)(T.WM.get(),e,t),r=(0,u.l)(n),i=m(t),o=i+Math.abs(i-r);return(0,s.ZF)(i/o)}const S=(0,l.c)();function F(t,e,n,i){const o=(0,u.b)(S,e,t);switch(n){case r.X:{const t=(0,s.jE)(o,S)[2];return(0,u.s)(i,-Math.sin(t),Math.cos(t),0)}case r.Y:{const t=(0,s.jE)(o,S),e=t[1],n=t[2],r=Math.sin(e);return(0,u.s)(i,-r*Math.cos(n),-r*Math.sin(n),Math.cos(e))}case r.Z:return(0,u.n)(i,o);default:return}}function M(t,e){const n=(0,u.b)(v,e,t);return(0,u.l)(n)-t[3]}function y(t,e){const n=(0,u.d)(t,e),r=m(t);return n<=r*r}const v=(0,l.c)(),w=g();Object.freeze(Object.defineProperty({__proto__:null,create:g,copy:p,fromCenterAndRadius:function(t,e){return(0,h.f)(t[0],t[1],t[2],e)},wrap:function(t){return t},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},getRadius:m,getCenter:O,fromValues:function(t,e,n,r){return(0,h.f)(t,e,n,r)},elevate:function(t,e,n){return t!==n&&(0,u.c)(n,t),n[3]=t[3]+e,n},setExtent:function(t,e,n){return o.Z.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t===n?n:p(t,n)},intersectRay:N,intersectsRay:A,intersectRayClosestSilhouette:function(t,e,n){if(N(t,e,n))return n;const r=I(t,e,T.WM.get());return(0,u.a)(n,e.origin,(0,u.g)(T.WM.get(),e.direction,(0,u.i)(e.origin,r)/(0,u.l)(e.direction))),n},closestPointOnSilhouette:I,closestPoint:function(t,e,n){return N(t,e,n)?n:((0,f.JI)(e,t,n),R(t,n,n))},projectPoint:R,distanceToSilhouette:function(t,e){const n=(0,u.b)(T.WM.get(),e,t),r=(0,u.p)(n),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},angleToSilhouette:b,axisAt:F,altitudeAt:M,setAltitudeAt:function(t,e,n,i){const o=M(t,e),s=F(t,e,r.Z,v),c=(0,u.g)(v,s,n-o);return(0,u.a)(i,e,c)},containsPoint:y,tmpSphere:w},Symbol.toStringTag,{value:"Module"}))},88669:(t,e,n)=>{function r(){return[0,0,0,0]}function i(t,e,n,r){return[t,e,n,r]}function o(t,e){return new Float64Array(t,e,4)}function s(){return i(1,1,1,1)}function c(){return i(1,0,0,0)}function a(){return i(0,1,0,0)}function u(){return i(0,0,1,0)}function l(){return i(0,0,0,1)}n.d(e,{a:()=>o,c:()=>r,f:()=>i});const d=s(),h=c(),f=a(),_=u(),T=l();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:function(t){return[t[0],t[1],t[2],t[3]]},fromValues:i,fromArray:function(t){const e=[0,0,0,0],n=Math.min(4,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e},createView:o,zeros:function(){return[0,0,0,0]},ones:s,unitX:c,unitY:a,unitZ:u,unitW:l,ZEROS:[0,0,0,0],ONES:d,UNIT_X:h,UNIT_Y:f,UNIT_Z:_,UNIT_W:T},Symbol.toStringTag,{value:"Module"}))},47545:(t,e,n)=>{n.d(e,{d:()=>i});var r=n(22021);function i(t,e,n){const i=t.byteLength/(4*e),u=new Uint32Array(t,0,i*e);let l=new Uint32Array(i);const d=n?.minReduction??0,h=n?.originalIndices||null,f=h?h.length:0,_=n?.componentOffsets||null;let T=0;if(_)for(let t=0;t<_.length-1;t++){const e=_[t+1]-_[t];e>T&&(T=e)}else T=i;const g=Math.floor(1.1*T)+1;(null==a||a.length<2*g)&&(a=new Uint32Array((0,r.Sf)(2*g)));for(let t=0;t<2*g;t++)a[t]=0;let p=0;const m=!!_&&!!h,O=m?f:i,N=m?new Uint32Array(f):null,E=1.96;let A=0!==d?Math.ceil(4*E*E/(d*d)*d*(1-d)):O,I=1,R=_?_[1]:O;for(let t=0;t<O;t++){if(t===A){const e=1-p/t;if(e+E*Math.sqrt(e*(1-e)/t)<d)return null;A*=2}if(t===R){for(let t=0;t<2*g;t++)a[t]=0;if(h)for(let t=_[I-1];t<_[I];t++)N[t]=l[h[t]];R=_[++I]}const n=m?h[t]:t,r=n*e,i=c(u,r,e);let s=i%g,f=p;for(;0!==a[2*s+1];){if(a[2*s]===i){const t=a[2*s+1]-1;if(o(u,r,t*e,e)){f=l[t];break}}s++,s>=g&&(s-=g)}f===p&&(a[2*s]=i,a[2*s+1]=n+1,p++),l[n]=f}if(0!==d&&1-p/i<d)return null;if(m){for(let t=_[I-1];t<N.length;t++)N[t]=l[h[t]];l=N}const b=new Uint32Array(e*p);p=0;for(let t=0;t<O;t++)l[t]===p&&(s(u,(m?h[t]:t)*e,b,p*e,e),p++);if(h&&!m){const t=new Uint32Array(f);for(let e=0;e<t.length;e++)t[e]=l[h[e]];l=t}return{buffer:b.buffer,indices:l,uniqueCount:p}}function o(t,e,n,r){for(let i=0;i<r;i++)if(t[e+i]!==t[n+i])return!1;return!0}function s(t,e,n,r,i){for(let o=0;o<i;o++)n[r+o]=t[e+o]}function c(t,e,n){let r=0;for(let i=0;i<n;i++)r=t[e+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null},78341:(t,e,n)=>{n.d(e,{JI:()=>a,Ue:()=>s,re:()=>c}),n(67676);var r=n(22807),i=n(17896),o=n(65617);function s(t){return t?{origin:(0,o.a)(t.origin),direction:(0,o.a)(t.direction)}:{origin:(0,o.c)(),direction:(0,o.c)()}}function c(t,e){const n=u.get();return n.origin=t,n.direction=e,n}function a(t,e,n){const r=(0,i.e)(t.direction,(0,i.b)(n,e,t.origin));return(0,i.a)(n,t.origin,(0,i.g)(n,t.direction,r)),n}n(12981);const u=new r.x((function(){return{origin:null,direction:null}}))},61277:(t,e,n)=>{n.d(e,{EU:()=>s});var r=n(22021),i=n(17896),o=n(65617);function s(t,e){const n=(0,i.e)(t,e)/((0,i.l)(t)*(0,i.l)(e));return-(0,r.ZF)(n)}(0,o.c)(),(0,o.c)()},65576:(t,e,n)=>{n.d(e,{U$:()=>c});var r=n(56481),i=n(79583);class o{constructor(t,e){this.layout=t,this.buffer="number"==typeof e?new ArrayBuffer(e*t.stride):e;for(const e of t.fieldNames){const n=t.fields.get(e);this[e]=new n.constructor(this.buffer,n.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(t,e){const n=this[t];return n&&n.elementCount===e.ElementCount&&n.elementType===e.ElementType?n:null}slice(t,e){return new o(this.layout,this.buffer.slice(t*this.stride,e*this.stride))}copyFrom(t,e,n,r){const i=this.stride;if(i%4==0){const o=new Uint32Array(t.buffer,e*i,r*i/4);new Uint32Array(this.buffer,n*i,r*i/4).set(o)}else{const o=new Uint8Array(t.buffer,e*i,r*i);new Uint8Array(this.buffer,n*i,r*i).set(o)}}}class s{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(t,e){return this._appendField(t,r.Eu,e),this}vec2f64(t,e){return this._appendField(t,r.q6,e),this}vec3f(t,e){return this._appendField(t,r.ct,e),this}vec3f64(t,e){return this._appendField(t,r.fP,e),this}vec4f(t,e){return this._appendField(t,r.ek,e),this}vec4f64(t,e){return this._appendField(t,r.Cd,e),this}mat3f(t,e){return this._appendField(t,r.gK,e),this}mat3f64(t,e){return this._appendField(t,r.ey,e),this}mat4f(t,e){return this._appendField(t,r.bj,e),this}mat4f64(t,e){return this._appendField(t,r.O1,e),this}vec4u8(t,e){return this._appendField(t,r.mc,e),this}f32(t,e){return this._appendField(t,r.ly,e),this}f64(t,e){return this._appendField(t,r.oS,e),this}u8(t,e){return this._appendField(t,r.D_,e),this}u16(t,e){return this._appendField(t,r.av,e),this}i8(t,e){return this._appendField(t,r.Hz,e),this}vec2i8(t,e){return this._appendField(t,r.Vs,e),this}vec2i16(t,e){return this._appendField(t,r.or,e),this}vec2u8(t,e){return this._appendField(t,r.xA,e),this}vec4u16(t,e){return this._appendField(t,r.v6,e),this}u32(t,e){return this._appendField(t,r.Nu,e),this}_appendField(t,e,n){const r=e.ElementCount*(0,i.n1)(e.ElementType),o=this.stride;this.fields.set(t,{size:r,constructor:e,offset:o,optional:n}),this.stride+=r,this.fieldNames.push(t)}alignTo(t){return this.stride=Math.floor((this.stride+t-1)/t)*t,this}hasField(t){return this.fieldNames.includes(t)}createBuffer(t){return new o(this,t)}createView(t){return new o(this,t)}clone(){const t=new s;return t.stride=this.stride,t.fields=new Map,this.fields.forEach(((e,n)=>t.fields.set(n,e))),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}function c(){return new s}},5329:(t,e,n)=>{n.d(e,{K:()=>o});var r=n(35371),i=n(21968);function o(t,e=0){const n=t.stride;return t.fieldNames.filter((e=>{const n=t.fields.get(e).optional;return!(n&&n.glPadding)})).map((r=>{const o=t.fields.get(r),c=o.constructor.ElementCount,a=s(o.constructor.ElementType),u=o.offset,l=!(!o.optional||!o.optional.glNormalized);return new i.G(r,c,a,u,n,l,e)}))}function s(t){const e=c[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}const c={u8:r.g.UNSIGNED_BYTE,u16:r.g.UNSIGNED_SHORT,u32:r.g.UNSIGNED_INT,i8:r.g.BYTE,i16:r.g.SHORT,i32:r.g.INT,f32:r.g.FLOAT}},11726:(t,e,n)=>{n.d(e,{hu:()=>i,yK:()=>o}),n(97323),n(98766),(0,n(88669).c)();class r{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function i(t,e){if(!t)throw e=e||"assert",console.log(new Error(e).stack),new r(e)}function o(t,e,n,r){let i,o=(n[0]-t[0])/e[0],s=(r[0]-t[0])/e[0];o>s&&(i=o,o=s,s=i);let c=(n[1]-t[1])/e[1],a=(r[1]-t[1])/e[1];if(c>a&&(i=c,c=a,a=i),o>a||c>s)return!1;c>o&&(o=c),a<s&&(s=a);let u=(n[2]-t[2])/e[2],l=(r[2]-t[2])/e[2];return u>l&&(i=u,u=l,l=i),!(o>l||u>s||(l<s&&(s=l),s<0))}},35065:(t,e,n)=>{var r;n.d(e,{T:()=>r}),function(t){t.POSITION="position",t.NORMAL="normal",t.UV0="uv0",t.AUXPOS1="auxpos1",t.AUXPOS2="auxpos2",t.MAPPOS="mapPos",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.NORMALCOMPRESSED="normalCompressed",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.MODELORIGINHI="modelOriginHi",t.MODELORIGINLO="modelOriginLo",t.MODEL="model",t.MODELNORMAL="modelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMALA="normalA",t.NORMALB="normalB",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.U8PADDING="u8padding",t.U16PADDING="u16padding",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude"}(r||(r={}))},17288:(t,e,n)=>{n.d(e,{Hr:()=>l,dG:()=>u,tf:()=>s});var r=n(5329),i=n(65576),o=n(35065);const s=(0,i.U$)().vec3f(o.T.POSITION).u16(o.T.COMPONENTINDEX).u16(o.T.U16PADDING),c=(0,i.U$)().vec2u8(o.T.SIDENESS),a=((0,r.K)(c),(0,i.U$)().vec3f(o.T.POSITION0).vec3f(o.T.POSITION1).u16(o.T.COMPONENTINDEX).u8(o.T.VARIANTOFFSET,{glNormalized:!0}).u8(o.T.VARIANTSTROKE).u8(o.T.VARIANTEXTENSION,{glNormalized:!0}).u8(o.T.U8PADDING,{glPadding:!0}).u16(o.T.U16PADDING,{glPadding:!0})),u=a.clone().vec3f(o.T.NORMAL),l=a.clone().vec3f(o.T.NORMALA).vec3f(o.T.NORMALB);new Map([[o.T.POSITION0,0],[o.T.POSITION1,1],[o.T.COMPONENTINDEX,2],[o.T.VARIANTOFFSET,3],[o.T.VARIANTSTROKE,4],[o.T.VARIANTEXTENSION,5],[o.T.NORMAL,6],[o.T.NORMALA,6],[o.T.NORMALB,7],[o.T.SIDENESS,8]])},97411:(t,e,n)=>{n.d(e,{n:()=>d});var r=n(67676),i=n(22021),o=n(1533),s=n(17896),c=n(65617);const a=-1;var u,l;function d(t,e,n,c=m){const u=t.vertices.position,l=t.vertices.componentIndex,d=(0,i.Vl)(c.anglePlanar),p=(0,i.Vl)(c.angleSignificantEdge),O=Math.cos(p),N=Math.cos(d),E=g.edge,A=E.position0,I=E.position1,R=E.faceNormal0,b=E.faceNormal1,S=T(t),F=function(t){const e=t.faces.length/3,n=t.faces,r=t.neighbors;let i=0;for(let t=0;t<e;t++){const e=r[3*t+0],o=r[3*t+1],s=r[3*t+2],c=n[3*t+0],u=n[3*t+1],l=n[3*t+2];i+=e===a||c<u?1:0,i+=o===a||u<l?1:0,i+=s===a||l<c?1:0}const o=new Int32Array(4*i);let s=0;for(let t=0;t<e;t++){const e=r[3*t+0],i=r[3*t+1],c=r[3*t+2],u=n[3*t+0],l=n[3*t+1],d=n[3*t+2];(e===a||u<l)&&(o[s++]=u,o[s++]=l,o[s++]=t,o[s++]=e),(i===a||l<d)&&(o[s++]=l,o[s++]=d,o[s++]=t,o[s++]=i),(c===a||d<u)&&(o[s++]=d,o[s++]=u,o[s++]=t,o[s++]=c)}return o}(t),M=F.length/4,y=e.allocate(M);let v=0;const w=M,L=n.allocate(w);let P=0,C=0,x=0;const D=(0,r.w6)(0,M),U=new Float32Array(M);(0,o.Ed)(U,((t,e,n)=>{u.getVec(F[4*e+0],A),u.getVec(F[4*e+1],I),n[e]=(0,s.i)(A,I)})),D.sort(((t,e)=>U[e]-U[t]));const B=new Array,j=new Array;for(let t=0;t<M;t++){const r=D[t],i=U[r],o=F[4*r+0],c=F[4*r+1],T=F[4*r+2],g=F[4*r+3],p=g===a;if(u.getVec(o,A),u.getVec(c,I),p)(0,s.s)(R,S[3*T+0],S[3*T+1],S[3*T+2]),(0,s.c)(b,R),E.componentIndex=l.get(o),E.cosAngle=(0,s.e)(R,b);else{if((0,s.s)(R,S[3*T+0],S[3*T+1],S[3*T+2]),(0,s.s)(b,S[3*g+0],S[3*g+1],S[3*g+2]),E.componentIndex=l.get(o),E.cosAngle=(0,s.e)(R,b),f(E,N))continue;E.cosAngle<-.9999&&(0,s.c)(b,R)}C+=i,x++,p||h(E,O)?(e.write(y,v++,E),B.push(i)):_(E,d)&&(n.write(L,P++,E),j.push(i))}const V=new Float32Array(B.reverse()),G=new Float32Array(j.reverse());return{regular:{instancesData:e.trim(y,v),lodInfo:{lengths:V}},silhouette:{instancesData:n.trim(L,P),lodInfo:{lengths:G}},averageEdgeLength:C/x}}function h(t,e){return t.cosAngle<e}function f(t,e){return t.cosAngle>e}function _(t,e){const n=(0,i.ZF)(t.cosAngle),r=g.fwd,o=g.ortho;return(0,s.r)(r,t.position1,t.position0),n*((0,s.e)((0,s.f)(o,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}function T(t){const e=t.faces.length/3,n=t.vertices.position,r=t.faces,i=p.v0,o=p.v1,c=p.v2,a=new Float32Array(3*e);for(let t=0;t<e;t++){const e=r[3*t+0],u=r[3*t+1],l=r[3*t+2];n.getVec(e,i),n.getVec(u,o),n.getVec(l,c),(0,s.b)(o,o,i),(0,s.b)(c,c,i),(0,s.f)(i,o,c),(0,s.n)(i,i),a[3*t+0]=i[0],a[3*t+1]=i[1],a[3*t+2]=i[2]}return a}(l=u||(u={}))[l.SOLID=0]="SOLID",l[l.SKETCH=1]="SKETCH";const g={edge:{position0:(0,c.c)(),position1:(0,c.c)(),faceNormal0:(0,c.c)(),faceNormal1:(0,c.c)(),componentIndex:0,cosAngle:0},ortho:(0,c.c)(),fwd:(0,c.c)()},p={v0:(0,c.c)(),v1:(0,c.c)(),v2:(0,c.c)()},m={anglePlanar:4,angleSignificantEdge:35}},212:(t,e,n)=>{n.d(e,{Kl:()=>R,n_:()=>y,kY:()=>b,Yr:()=>M});var r=n(47545);function i(t,e,n){const r=e/3,i=new Uint32Array(n+1),o=new Uint32Array(n+1),s=(t,e)=>{t<e?i[t+1]++:o[e+1]++};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],i=t[3*e+2];s(n,r),s(r,i),s(i,n)}let c=0,a=0;for(let t=0;t<n;t++){const e=i[t+1],n=o[t+1];i[t+1]=c,o[t+1]=a,c+=e,a+=n}const u=new Uint32Array(6*r),l=i[n],d=(t,e,n)=>{if(t<e){const r=i[t+1]++;u[2*r]=e,u[2*r+1]=n}else{const r=o[e+1]++;u[2*l+2*r]=t,u[2*l+2*r+1]=n}};for(let e=0;e<r;e++){const n=t[3*e],r=t[3*e+1],i=t[3*e+2];d(n,r,e),d(r,i,e),d(i,n,e)}const h=(t,e)=>{const n=2*t,r=e-t;for(let t=1;t<r;t++){const e=u[n+2*t],r=u[n+2*t+1];let i=t-1;for(;i>=0&&u[n+2*i]>e;i--)u[n+2*i+2]=u[n+2*i],u[n+2*i+3]=u[n+2*i+1];u[n+2*i+2]=e,u[n+2*i+3]=r}};for(let t=0;t<n;t++)h(i[t],i[t+1]),h(l+o[t],l+o[t+1]);const f=new Int32Array(3*r),_=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,T=(t,e)=>{const n=_(t,e);f[3*e+n]=-1},g=(t,e,n,r)=>{const i=_(t,e);f[3*e+i]=r;const o=_(n,r);f[3*r+o]=e};for(let t=0;t<n;t++){let e=i[t];const n=i[t+1];let r=o[t];const s=o[t+1];for(;e<n&&r<s;){const n=u[2*e],i=u[2*l+2*r];n===i?(g(t,u[2*e+1],i,u[2*l+2*r+1]),e++,r++):n<i?(T(t,u[2*e+1]),e++):(T(i,u[2*l+2*r+1]),r++)}for(;e<n;)T(t,u[2*e+1]),e++;for(;r<s;)T(u[2*l+2*r],u[2*l+2*r+1]),r++}return f}var o=n(65576),s=n(35065),c=n(17288),a=n(77734),u=n(17896),l=n(65617),d=n(5329);class h{updateSettings(t){this.settings=t,this.edgeHashFunction=t.reducedPrecision?p:g}write(t,e,n){const r=this.edgeHashFunction(n);A.seed=r;const i=A.getIntRange(0,255),o=A.getIntRange(0,this.settings.variants-1),s=A.getFloat(),c=255*(.5*function(t,e){const n=t<0?-1:1;return Math.abs(t)**1.2*n}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,i),t.variantStroke.set(e,o),t.variantExtension.set(e,c)}trim(t,e){return t.slice(0,e)}}const f=new Float32Array(6),_=new Uint32Array(f.buffer),T=new Uint32Array(1);function g(t){const e=f;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],T[0]=5381;for(let t=0;t<_.length;t++)T[0]=31*T[0]+_[t];return T[0]}function p(t){const e=f;e[0]=m(t.position0[0]),e[1]=m(t.position0[1]),e[2]=m(t.position0[2]),e[3]=m(t.position1[0]),e[4]=m(t.position1[1]),e[5]=m(t.position1[2]),T[0]=5381;for(let t=0;t<_.length;t++)T[0]=31*T[0]+_[t];return T[0]}function m(t){return Math.round(1e4*t)/1e4}class O{constructor(){this.commonWriter=new h}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return c.dG.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),(0,u.a)(E,n.faceNormal0,n.faceNormal1),(0,u.n)(E,E),t.normal.setVec(e,E)}trim(t,e){return this.commonWriter.trim(t,e)}}O.Layout=c.dG,O.glLayout=(0,d.K)(c.dG,1);class N{constructor(){this.commonWriter=new h}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return c.Hr.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this.commonWriter.trim(t,e)}}N.Layout=c.Hr,N.glLayout=(0,d.K)(c.Hr,1);const E=(0,l.c)(),A=new a.Z;var I=n(97411);function R(t){const e=b(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return S.updateSettings(t.writerSettings),F.updateSettings(t.writerSettings),(0,I.n)(e,S,F)}function b(t,e,n,o){if(e)return{faces:n,facesLength:o,neighbors:i(n,o,t.count),vertices:t};const s=(0,r.d)(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:o}),a=i(s.indices,o,s.uniqueCount);return{faces:s.indices,facesLength:s.indices.length,neighbors:a,vertices:c.tf.createView(s.buffer)}}const S=new O,F=new N,M=(0,o.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1),y=(0,o.U$)().vec3f(s.T.POSITION0).vec3f(s.T.POSITION1).u16(s.T.COMPONENTINDEX).u16(s.T.U16PADDING,{glPadding:!0})},40614:(t,e,n)=>{n.r(e),n.d(e,{default:()=>tt});var r,i,o,s,c,a,u,l=n(43697),d=n(70586),h=n(95330),f=(n(92604),n(75215),n(67676),n(80442),n(20102),n(52011)),_=n(17896),T=n(65617),g=n(16996),p=n(29268),m=n(98370),O=n(71143),N=n(44553),E=n(22807),A=(n(52138),n(98766),n(88669)),I=n(78341);function R(t,e){for(let n=0;n<a.NUM;n++){const r=t[n];if(r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]>=e[3])return!1}return!0}n(12981),new E.x((()=>({c0:0,c1:0,ray:null}))),n(22021),n(61277),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(i=r||(r={}))[i.NONE=0]="NONE",i[i.CLAMP=1]="CLAMP",i[i.INFINITE_MIN=4]="INFINITE_MIN",i[i.INFINITE_MAX=8]="INFINITE_MAX",r.INFINITE_MIN,r.INFINITE_MAX,r.INFINITE_MAX,(c=o||(o={}))[c.LEFT=0]="LEFT",c[c.RIGHT=1]="RIGHT",c[c.BOTTOM=2]="BOTTOM",c[c.TOP=3]="TOP",c[c.NEAR=4]="NEAR",c[c.FAR=5]="FAR",function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(s||(s={})),s.FAR_BOTTOM_RIGHT,s.NEAR_BOTTOM_RIGHT,s.NEAR_BOTTOM_LEFT,s.FAR_BOTTOM_LEFT,s.NEAR_BOTTOM_LEFT,s.NEAR_BOTTOM_RIGHT,s.NEAR_TOP_RIGHT,s.NEAR_TOP_LEFT,s.FAR_BOTTOM_RIGHT,s.FAR_BOTTOM_LEFT,s.FAR_TOP_LEFT,s.FAR_TOP_RIGHT,s.NEAR_BOTTOM_RIGHT,s.FAR_BOTTOM_RIGHT,s.FAR_TOP_RIGHT,s.NEAR_TOP_RIGHT,s.FAR_BOTTOM_LEFT,s.NEAR_BOTTOM_LEFT,s.NEAR_TOP_LEFT,s.FAR_TOP_LEFT,s.FAR_TOP_LEFT,s.NEAR_TOP_LEFT,s.NEAR_TOP_RIGHT,s.FAR_TOP_RIGHT,function(t){t[t.NUM=6]="NUM"}(a||(a={})),function(t){t[t.NUM=8]="NUM"}(u||(u={})),(0,A.f)(-1,-1,-1,1),(0,A.f)(1,-1,-1,1),(0,A.f)(1,1,-1,1),(0,A.f)(-1,1,-1,1),(0,A.f)(-1,-1,1,1),(0,A.f)(1,-1,1,1),(0,A.f)(1,1,1,1),(0,A.f)(-1,1,1,1),new E.x((function(t){return t?{ray:(0,I.Ue)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,I.Ue)(),c0:0,c1:Number.MAX_VALUE}})),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)(),(0,T.c)();var b=n(11726);class S{constructor(t,e){this._objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new F,this._objectCount=0,e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth))}get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}destroy(){this._degenerateObjects.clear(),F.clearPool(),B[0]=null,H.prune(),q.prune()}add(t,e=t.length){this._objectCount+=e,this._grow(t,e);const n=F.acquire();for(let r=0;r<e;r++){const e=t[r];this._isDegenerate(e)?this._degenerateObjects.add(e):(n.init(this._root),this._add(e,n))}F.release(n)}remove(t,e=null){this._objectCount-=t.length;const n=F.acquire();for(const r of t){const t=(0,d.pC)(e)?e:(0,p.h)(this._objectToBoundingSphere(r),W);C(t[3])?(n.init(this._root),this._remove(r,t,n)):this._degenerateObjects.delete(r)}F.release(n),this._shrink()}update(t,e){if(!C(e[3])&&this._isDegenerate(t))return;const n=function(t){return B[0]=t,B}(t);this.remove(n,e),this.add(n)}forEachAlongRay(t,e,n){const r=(0,I.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNode(r,t))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObject(r,t)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObject(r,t)&&n(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,e,n,r){const i=(0,I.re)(t,e);this._forEachNode(this._root,(t=>{if(!this._intersectsNodeWithOffset(i,t,r))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObjectWithOffset(i,t,r)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObjectWithOffset(i,t,r)&&n(t)})),!0}))}forEach(t){this._forEachNode(this._root,(e=>{const n=e.node;return n.terminals.forAll(t),null!==n.residents&&n.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,e,n,r=(()=>!0),i=1/0){let o=1/0,s=1/0,c=null;const a=L(t,e),u=a=>{if(--i,!r(a))return;const u=this._objectToBoundingSphere(a);if(!R(n,u))return;const l=P(t,e,(0,p.g)(u)),d=l-u[3],h=l+u[3];d<o&&(o=d,s=h,c=a)};return this._forEachNodeDepthOrdered(this._root,(r=>{if(i<=0||!R(n,r.bounds))return!1;if((0,_.g)(V,a,r.halfSize),(0,_.a)(V,V,r.bounds),P(t,e,V)>s)return!1;const o=r.node;return o.terminals.forAll((t=>u(t))),null!==o.residents&&o.residents.forAll((t=>u(t))),!0}),t,e),c}forEachInDepthRange(t,e,n,r,i,o,s){let c=-1/0,a=1/0;const u={setRange:t=>{n===S.DepthOrder.FRONT_TO_BACK?(c=Math.max(c,t.near),a=Math.min(a,t.far)):(c=Math.max(c,-t.far),a=Math.min(a,-t.near))}};u.setRange(r);const l=P(e,n,t),d=L(e,n),h=L(e,-n),f=t=>{if(!s(t))return;const r=this._objectToBoundingSphere(t),d=(0,p.g)(r),h=P(e,n,d)-l,f=h-r[3],_=h+r[3];f>a||_<c||!R(o,r)||i(t,u)};this._forEachNodeDepthOrdered(this._root,(t=>{if(!R(o,t.bounds))return!1;if((0,_.g)(V,d,t.halfSize),(0,_.a)(V,V,t.bounds),P(e,n,V)-l>a)return!1;if((0,_.g)(V,h,t.halfSize),(0,_.a)(V,V,t.bounds),P(e,n,V)-l<c)return!1;const r=t.node;return r.terminals.forAll((t=>f(t))),null!==r.residents&&r.residents.forAll((t=>f(t))),!0}),e,n)}forEachNode(t){this._forEachNode(this._root,(e=>t(e.node,e.bounds,e.halfSize)))}forEachNeighbor(t,e){const n=(0,p.a)(e),r=(0,p.g)(e),i=e=>{const i=this._objectToBoundingSphere(e),o=(0,p.a)(i),s=n+o;(0,_.d)((0,p.g)(i),r)-s*s<=0&&t(e)};this._forEachNode(this._root,(t=>{const e=(0,p.a)(t.bounds),o=n+e;if((0,_.d)((0,p.g)(t.bounds),r)-o*o>0)return!1;const s=t.node;return s.terminals.forAll((t=>i(t))),null!==s.residents&&s.residents.forAll((t=>i(t))),!0})),this.forEachDegenerateObject(i)}_intersectsNode(t,e){return v(e.bounds,2*-e.halfSize,G),v(e.bounds,2*e.halfSize,z),(0,b.yK)(t.origin,t.direction,G,z)}_intersectsNodeWithOffset(t,e,n){return v(e.bounds,2*-e.halfSize,G),v(e.bounds,2*e.halfSize,z),n.applyToMinMax(G,z),(0,b.yK)(t.origin,t.direction,G,z)}_intersectsObject(t,e){const n=this._objectToBoundingSphere(e);return!(n[3]>0)||(0,p.j)(n,t)}_intersectsObjectWithOffset(t,e,n){const r=this._objectToBoundingSphere(e);return!(r[3]>0)||(0,p.j)(n.applyToBoundingSphere(r),t)}_forEachNode(t,e){let n=F.acquire().init(t);const r=[n];for(;0!==r.length;){if(n=r.pop(),e(n)&&!n.isLeaf())for(let t=0;t<n.node.children.length;t++)n.node.children[t]&&r.push(F.acquire().init(n).advance(t));F.release(n)}}_forEachNodeDepthOrdered(t,e,n,r=S.DepthOrder.FRONT_TO_BACK){let i=F.acquire().init(t);const o=[i];for(function(t,e,n){if(!q.length)for(let t=0;t<8;++t)q.push({index:0,distance:0});for(let n=0;n<8;++n){const r=x[n];q.data[n].index=n,q.data[n].distance=P(t,e,r)}q.sort(((t,e)=>t.distance-e.distance));for(let t=0;t<8;++t)n[t]=q.data[t].index}(n,r,Y);0!==o.length;){if(i=o.pop(),e(i)&&!i.isLeaf())for(let t=7;t>=0;--t){const e=Y[t];i.node.children[e]&&o.push(F.acquire().init(i).advance(e))}F.release(i)}}_remove(t,e,n){H.clear();const r=n.advanceTo(e,((t,e)=>{H.push(t.node),H.push(e)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(t),0===r.length)for(let t=H.length-2;t>=0;t-=2){const e=H.data[t],n=H.data[t+1];if(!this._purge(e,n))break}}_nodeIsEmpty(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let e=0;e<t.children.length;e++)if(t.children[e])return!1;return!0}_purge(t,e){return e>=0&&(t.children[e]=null),!!this._nodeIsEmpty(t)&&(null===t.residents&&(t.residents=new N.Z({shrink:!0})),!0)}_add(t,e){e.advanceTo(this._objectToBoundingSphere(t))?e.node.terminals.push(t):(e.node.residents.push(t),e.node.residents.length>this._maximumObjectsPerNode&&e.depth<this._maximumDepth&&this._split(e))}_split(t){const e=t.node.residents;t.node.residents=null;for(let n=0;n<e.length;n++){const r=F.acquire().init(t);this._add(e.getItemAt(n),r),F.release(r)}}_grow(t,e){if(0!==e&&(w(t,e,(t=>this._objectToBoundingSphere(t)),k),C(k[3])&&!this._fitsInsideTree(k)))if(this._nodeIsEmpty(this._root.node))(0,p.h)(k,this._root.bounds),this._root.halfSize=1.25*k[3];else{const t=this._rootBoundsForRootAsSubNode(k);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(k,t):this._growRootAsSubNode(t),F.release(t)}}_rebuildTree(t,e){(0,_.c)(X,e.bounds),X[3]=e.halfSize,w([t,X],2,(t=>t),K);const n=F.acquire().init(this._root);this._root.initFrom(null,K,1.25*K[3]),this._forEachNode(n,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),F.release(n)}_placingRootViolatesMaxDepth(t){const e=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return this._forEachNode(this._root,(t=>(n=Math.max(n,t.depth),n+e<=this._maximumDepth))),n+e>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const e=t[3],n=t;let r=-1/0;const i=this._root.bounds,o=this._root.halfSize;for(let t=0;t<3;t++){const s=i[t]-o-(n[t]-e),c=n[t]+e-(i[t]+o),a=Math.max(0,Math.ceil(s/(2*o))),u=Math.max(0,Math.ceil(c/(2*o)))+1,l=2**Math.ceil(Math.log(a+u)*Math.LOG2E);r=Math.max(r,l),Z[t].min=a,Z[t].max=u}for(let t=0;t<3;t++){let e=Z[t].min,n=Z[t].max;const s=(r-(e+n))/2;e+=Math.ceil(s),n+=Math.floor(s);const c=i[t]-o-e*o*2;j[t]=c+(n+e)*o}return j[3]=r*o*U,F.acquire().initFrom(null,j,r*o,0)}_growRootAsSubNode(t){const e=this._root.node;(0,_.c)(k,this._root.bounds),k[3]=this._root.halfSize,this._root.init(t),t.advanceTo(k,null,!0),t.node.children=e.children,t.node.residents=e.residents,t.node.terminals=e.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const e=this._root.node.children;let n=0,r=0;for(;r<e.length&&null==t;)n=r++,t=e[n];for(;r<e.length;)if(e[r++])return-1;return n}_isDegenerate(t){return!C(this._objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const e=this._root.bounds,n=this._root.halfSize;return t[3]<=n&&t[0]>=e[0]-n&&t[0]<=e[0]+n&&t[1]>=e[1]-n&&t[1]<=e[1]+n&&t[2]>=e[2]-n&&t[2]<=e[2]+n}}class F{constructor(){this.bounds=(0,p.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,e,n,r=this.depth){return this.node=(0,d.pC)(t)?t:F.createEmptyNode(),(0,d.pC)(e)&&(0,p.h)(e,this.bounds),this.halfSize=n,this.depth=r,this}advance(t){let e=this.node.children[t];e||(e=F.createEmptyNode(),this.node.children[t]=e),this.node=e,this.halfSize/=2,this.depth++;const n=x[t];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.bounds[3]=this.halfSize*U,this}advanceTo(t,e,n=!1){for(;;){if(this.isTerminalFor(t))return e&&e(this,-1),!0;if(this.isLeaf()){if(!n)return e&&e(this,-1),!1;this.node.residents=null}const r=this._childIndex(t);e&&e(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const e=this.bounds;return(e[0]<t[0]?1:0)+(e[1]<t[1]?2:0)+(e[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new N.Z({shrink:!0}),residents:new N.Z({shrink:!0})}}static acquire(){return F._pool.acquire()}static release(t){F._pool.release(t)}static clearPool(){F._pool.prune()}}function M(t,e){t[0]=Math.min(t[0],e[0]-e[3]),t[1]=Math.min(t[1],e[1]-e[3]),t[2]=Math.min(t[2],e[2]-e[3])}function y(t,e){t[0]=Math.max(t[0],e[0]+e[3]),t[1]=Math.max(t[1],e[1]+e[3]),t[2]=Math.max(t[2],e[2]+e[3])}function v(t,e,n){n[0]=t[0]+e,n[1]=t[1]+e,n[2]=t[2]+e}function w(t,e,n,r){if(1===e){const e=n(t[0]);(0,p.h)(e,r)}else{G[0]=1/0,G[1]=1/0,G[2]=1/0,z[0]=-1/0,z[1]=-1/0,z[2]=-1/0;for(let r=0;r<e;r++){const e=n(t[r]);C(e[3])&&(M(G,e),y(z,e))}(0,_.h)(r,G,z,.5),r[3]=Math.max(z[0]-G[0],z[1]-G[1],z[2]-G[2])/2}}function L(t,e){let n=1/0,r=null;for(let i=0;i<8;++i){const o=P(t,e,D[i]);o<n&&(n=o,r=D[i])}return r}function P(t,e,n){return e*(t[0]*n[0]+t[1]*n[1]+t[2]*n[2])}function C(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}F._pool=new O.Z(F),function(t){var e;(e=t.DepthOrder||(t.DepthOrder={}))[e.FRONT_TO_BACK=1]="FRONT_TO_BACK",e[e.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(S||(S={}));const x=[(0,T.f)(-1,-1,-1),(0,T.f)(1,-1,-1),(0,T.f)(-1,1,-1),(0,T.f)(1,1,-1),(0,T.f)(-1,-1,1),(0,T.f)(1,-1,1),(0,T.f)(-1,1,1),(0,T.f)(1,1,1)],D=[(0,T.f)(-1,-1,-1),(0,T.f)(-1,-1,1),(0,T.f)(-1,1,-1),(0,T.f)(-1,1,1),(0,T.f)(1,-1,-1),(0,T.f)(1,-1,1),(0,T.f)(1,1,-1),(0,T.f)(1,1,1)],U=Math.sqrt(3),B=[null],j=(0,p.c)(),V=(0,T.c)(),G=(0,T.c)(),z=(0,T.c)(),H=new N.Z,W=(0,p.c)(),k=(0,p.c)(),X=(0,p.c)(),K=(0,p.c)(),Z=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],q=new N.Z,Y=[0,0,0,0,0,0,0,0],$=S;var J=n(212);let Q=class{constructor(){this._idToComponent=new Map,this._components=new $((t=>t.bounds)),this._edges=new $((t=>t.bounds)),this._tmpLineSegment=(0,g.Ue)(),this._tmpP1=(0,T.c)(),this._tmpP2=(0,T.c)(),this._tmpP3=(0,T.c)(),this.remoteClient=null}async fetchCandidates(t,e){await Promise.resolve(),(0,h.k_)(e),await this._ensureEdgeLocations(t,e);const n=[];return this._edges.forEachNeighbor((e=>this._addCandidates(t,e,n)),t.bounds),{result:{candidates:n}}}async _ensureEdgeLocations(t,e){const n=[];if(this._components.forEachNeighbor((t=>{if((0,d.Wi)(t.info)){const{id:e,uid:r}=t;n.push({id:e,uid:r})}}),t.bounds),!n.length)return;const r={components:n},i=await this.remoteClient.invoke("fetchAllEdgeLocations",r,(0,d.Pt)(e,{}));for(const t of i.components)this._setFetchEdgeLocations(t)}async add(t){const e=new et(t.id,t.bounds);return this._idToComponent.set(e.id,e),this._components.add([e]),{result:{}}}async remove(t){const e=this._idToComponent.get(t.id);if(e){const t=[];this._edges.forEachNeighbor((n=>{n.component===e&&t.push(n)}),e.bounds),this._edges.remove(t),this._components.remove([e]),this._idToComponent.delete(e.id)}return{result:{}}}_setFetchEdgeLocations(t){const e=this._idToComponent.get(t.id);if((0,d.Wi)(e)||t.uid!==e.uid)return;const n=J.n_.createView(t.locations),r=new Array(n.count),i=(0,T.c)(),o=(0,T.c)();for(let s=0;s<n.count;s++){const c=(0,p.c)(),a=(0,p.g)(c);n.position0.getVec(s,i),n.position1.getVec(s,o),(0,_.C)(a,a,i,.5),(0,_.C)(a,a,o,.5),(0,_.a)(a,a,t.origin),c[3]=(0,_.i)(a,i);const u=new nt(e,s,c);r[s]=u}this._edges.add(r);const{objectIds:s,origin:c}=t;e.info={locations:n,objectIds:s,origin:c}}_addCandidates(t,e,n){const{locations:r,origin:i,objectIds:o}=e.component.info,s=r.position0.getVec(e.index,this._tmpP1),c=r.position1.getVec(e.index,this._tmpP2);(0,_.a)(s,s,i),(0,_.a)(c,c,i);const a=o[r.componentIndex.get(e.index)];this._addEdgeCandidate(t,a,s,c,n),this._addVertexCandidate(t,a,s,n),this._addVertexCandidate(t,a,c,n)}_addEdgeCandidate(t,e,n,r,i){if(!(t.types&m.r.EDGE))return;const o=(0,p.g)(t.bounds),s=(0,g.zk)(n,r,this._tmpLineSegment),c=(0,g.nF)(s,o,this._tmpP3);if(!(0,p.m)(t.bounds,c))return null;i.push({type:"edge",objectId:e,target:(0,T.a)(c),distance:(0,_.i)(o,c),start:(0,T.a)(n),end:(0,T.a)(r)})}_addVertexCandidate(t,e,n,r){if(!(t.types&m.r.VERTEX))return;const i=(0,p.g)(t.bounds);if(!(0,p.m)(t.bounds,n))return null;r.push({type:"vertex",objectId:e,target:(0,T.a)(n),distance:(0,_.i)(i,n)})}};Q=(0,l._)([(0,f.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],Q);const tt=Q;class et{constructor(t,e){this.id=t,this.bounds=e,this.info=null,this.uid=++et.uid}}et.uid=0;class nt{constructor(t,e,n){this.component=t,this.index=e,this.bounds=n}}},21968:(t,e,n)=>{n.d(e,{G:()=>r});class r{constructor(t,e,n,r,i,o=!1,s=0){this.name=t,this.count=e,this.type=n,this.offset=r,this.stride=i,this.normalized=o,this.divisor=s}}}}]);