import { bg as b$1, r as r$2, e2 as e$3, e3 as r$3, e4 as r$4, aH as n$3, e5 as e$4, e6 as n$4, bj as g$4, e7 as P$1, e8 as e$5, e9 as z$2, ea as _, eb as Q, ec as O, ed as E$1, ee as g$5, ef as f$2, eg as a$e, eh as I$2, dY as m$8, d$ as m$9, y as y$1, ei as i$1, bF as v$2, ej as A, t as t$1, ek as g$6, dy as $, el as m$a, B as e$6, C as d$2, D as n$5, E as f$4, em as e$7, en as M, eo as ue, ep as m$b, cA as c$c, eq as n$6, b3 as l$6, er as w$2, cv as o$1, dX as l$7, es as f$5, et as o$2, eu as M$1, ev as k$2, ew as w$3, ex as hn, R as k$3, ey as z$4, ez as yn, eA as E$2, eB as y$2, eC as Gn, bl as r$5, ba as a$g, aZ as n$7, eD as c$d, eE as r$6, eF as h$4, g as g$7, dW as n$8, bG as e$8, eG as v$3, eH as L$1, eI as d$5, eJ as l$8, bd as c$e, eK as g$9, eL as w$4, bk as i$2, eM as v$4, eN as f$6 } from './_virtual_index-9b831d4a.js';
import { j as j$1, U as U$2, a as a$f, o as o$3 } from './quantityUtils-95a87361.js';
import { simplify as w$1, distance as f$3, geodesicArea as q$2, geodesicLength as C$2 } from './geometryEngine-54622e44.js';
import { p as p$h, y as y$3 } from './dragEventPipeline-b56dbe77.js';
import { x as x$2, F as F$2, S as S$2, k as k$1, z as z$3, U as U$3, q as q$1 } from './quantityFormatUtils-2bdbcd46.js';
import { j as j$2, h as h$2, d as d$3 } from './euclideanAreaMeasurementUtils-66d0703c.js';
import { d as d$4, j as j$3, h as h$3, p as p$g, R as R$2, a as d$6, b as h$5 } from './SnappingOperation-11f9e419.js';
import { a as a$h } from './dehydratedFeatureComparison-dbb61b6e.js';
import { R as R$3, S as S$3, g as g$8, p as p$i } from './EditGeometryOperations-7433228d.js';
import { e as e$9 } from './SnappingContext-43cb3fd4.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function g$3(r,e,s=null){return r$2(s)?[r,e,s]:[r,e]}function R$1(r,e,s=null){return r$2(s)?{x:r,y:e,z:s}:{x:r,y:e}}class W{constructor(t){this.spatialReference=t;}mapToLocalMultiple(t){return g$5(t.map((t=>this.mapToLocal(t))))}get doUnnormalization(){return !1}}class v$1 extends W{constructor(t,r,o=null){super(r),this._defaultZ=o,this.transform=e$3(),this.transformInv=e$3(),this.transform=r$3(t),r$4(this.transformInv,this.transform);}makeMapPoint(t,r){return g$3(t,r,this._defaultZ)}mapToLocal(t){return R$1(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return g$3(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class F$1 extends W{constructor(t,r){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=n$3(),this.tangentFrameUpWS=n$3(),this.tangentFrameRightWS=n$3(),this.tangentFrameForwardWS=n$3(),this.localFrameRightWS=n$3(),this.localFrameUpWS=n$3(),this.worldToLocalTransform=e$4(),this.localToWorldTransform=e$4(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=r,this.defaultZ=r.hasZ?r.z:null;const e=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,n$4.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,n$4.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,n$4.Z,this.tangentFrameForwardWS);const s=n$3();g$4(s,this.tangentFrameForwardWS,P$1(e,this.tangentFrameForwardWS)),e$5(this.localFrameRightWS,e,s),z$2(this.localFrameRightWS,this.localFrameRightWS),_(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Q(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),O(this.localToWorldTransform,this.worldToLocalTransform);}get doUnnormalization(){return "global"===this.view.viewingMode}makeMapPoint(t,r){return g$3(t,r,this.defaultZ)}mapToLocal(r){const e=n$3();this.view.renderCoordsHelper.toRenderCoords(new b$1({x:r[0],y:r[1],spatialReference:this.spatialReference}),e),E$1(e,e,this.worldToLocalTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return r$2(s)?R$1(s.x/this.scale,s.y/this.scale):null}localToMap(r){const e=n$3();this.view.renderCoordsHelper.toRenderCoords(new b$1({x:r.x*this.scale,y:r.y*this.scale,spatialReference:this.spatialReference}),e),E$1(e,e,this.localToWorldTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return r$2(s)?g$3(s.x,s.y,this.defaultZ):null}}function S$1(t,r){if("2d"===t.type)return new v$1(t.state.transform,t.spatialReference,r.length>2?r[2]:null);if("3d"===t.type){const e=r.length>2?new b$1({x:r[0],y:r[1],z:r[2],spatialReference:t.spatialReference}):new b$1({x:r[0],y:r[1],spatialReference:t.spatialReference});return new F$1(t,e)}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function T(t,e){const o=new b$1({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(o.z=t[2]),o}function b(t,e){return new m$8({points:t,spatialReference:e})}function U$1(t,e,o){const n=new m$9({paths:t,spatialReference:e});return o&&a$e(n),n}function P(o,n,r,a=!0){const s=y$1(o);s.forEach((e=>{const o=e[0],n=e[e.length-1];i$1(o,n)&&1!==e.length||e.push(e[0]);}));let l=new v$2({rings:s,spatialReference:n});return l.rings.forEach((t=>{f$2(t,!1,!1)||t.reverse();})),r&&a$e(l),a&&l.isSelfIntersecting&&I$2(n)&&(l=w$1(l)),l}function w(t,e,o){const r=e.mapToLocalMultiple(t),a=[],s={x:r[0].x,y:r[0].y},l={x:r[1].x,y:r[1].y},i=Math.round(l.x-s.x),c=Math.round(l.y-s.y),p=Math.max(Math.abs(i),Math.abs(c));if(o){const t={x:s.x+p,y:s.y+p},e={x:s.x-p,y:s.y-p};a.push(R$1(t.x,e.y),R$1(e.x,e.y),R$1(e.x,t.y),R$1(t.x,t.y));}else {const t={x:i>0?s.x+p:s.x-p,y:c>0?s.y+p:s.y-p};a.push(R$1(s.x,s.y),R$1(t.x,s.y),R$1(t.x,t.y),R$1(s.x,t.y));}return I$1(P([g$5(a.map((t=>e.localToMap(t))))],e.spatialReference,e.doUnnormalization,!0),a,e)}function z$1(t,e,o){let r=e.mapToLocalMultiple(t);if(1===r.length){const t=48,e=r[0];r=[R$1(e.x-t,e.y+t),R$1(e.x+t,e.y-t),R$1(e.x+t,e.y-t),R$1(e.x-t,e.y+t)];}const a=[],s={x:r[0].x,y:r[0].y},l={x:r[1].x,y:r[1].y};if(o){const t=Math.round(l.x-s.x),e=Math.round(l.y-s.y);a.push(R$1(s.x-t,s.y-e),R$1(l.x,s.y-e),R$1(l.x,l.y),R$1(s.x-t,l.y));}else a.push(R$1(s.x,s.y),R$1(l.x,s.y),R$1(l.x,l.y),R$1(s.x,l.y));return I$1(P([g$5(a.map((t=>e.localToMap(t))))],e.spatialReference,e.doUnnormalization,!0),a,e)}function I$1(t,e,n){const r=L(e[3],e[2],n),a=L(e[1],e[2],n),s=L(e[0],e[1],n),l=L(e[0],e[3],n);return {geometry:t,midpoints:r$2(r)&&r$2(a)&&r$2(s)&&r$2(l)?{top:r,right:a,bottom:s,left:l}:null}}function L(t,e,n){E[0]=t.x,E[1]=t.y,E[2]=0,k[0]=e.x,k[1]=e.y,k[2]=0,A(E,E,k,.5),v.x=E[0],v.y=k[1],v.z=k[2];const r=n.localToMap(v);return r$2(r)?T(r,n.spatialReference):null}const v=R$1(0,0,0),E=n$3(),k=n$3();function C$1(t,e,o,n){const s=e.mapToLocalMultiple(t);let l=null,c=null;if(o)l=s[0],c=s[1];else {const t=s[0],e=s[1],o=Math.round(e.x-t.x),n=Math.round(e.y-t.y),r=Math.max(Math.abs(o),Math.abs(n));l=R$1(o>0?t.x+r/2:t.x-r/2,n>0?t.y+r/2:t.y-r/2),c=R$1(Math.abs(o)>Math.abs(n)?l.x-r/2:l.x,Math.abs(o)>Math.abs(n)?l.y:l.y-r/2);}const y=e.localToMap(l),m=e.localToMap(c);if(t$1(y)||t$1(m))return null;e.doUnnormalization&&g$6([[y,m]],e.spatialReference);const h=T(y,e.spatialReference),M=T(m,e.spatialReference),g=$(e.spatialReference);let d=0;if(I$2(e.spatialReference))d=g*f$3(h,M,null);else {const t=l.x-c.x,e=l.y-c.y;d=g*Math.sqrt(t*t+e*e)*(n||1);}const R=new m$a({center:h,radius:d,radiusUnit:"meters",spatialReference:e.spatialReference});return {geometry:P(R.rings,R.spatialReference,!1),center:h,edge:M}}function S(t,e,r){const a=e.mapToLocalMultiple(t),s=a[0],l=a[1],i=Math.round(l.x-s.x),c=Math.round(l.y-s.y),p=R$1(r?s.x:s.x+i/2,r?s.y:s.y+c/2),y=r?i:i/2,m=r?c:c/2,u=60,x=[],h=2*Math.PI/u;function M(t){const e=Math.cos(t),o=Math.sin(t);return R$1(y*e+p.x,m*o+p.y)}for(let o=0;o<u;o++)x.push(M(o*h));x.push(x[0]);const{spatialReference:g,doUnnormalization:d}=e,R=P([g$5(x.map((t=>e.localToMap(t))))],g,d,!1),j=e.localToMap(M(Math.PI/2)),b=e.localToMap(M(0)),U=e.localToMap(M(-Math.PI/2)),w=e.localToMap(M(Math.PI));return {geometry:R,midpoints:r$2(j)&&r$2(b)&&r$2(U)&&r$2(w)?{top:T(j,g),right:T(b,g),bottom:T(U,g),left:T(w,g)}:null}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let e$2=class extends f$4{constructor(o){super(o);}};e$6([d$2()],e$2.prototype,"tooltipOptions",void 0),e$2=e$6([n$5("esri.views.interactive.tooltip.SketchTooltipInfo")],e$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let s=class extends e$2{constructor(t){super(t),this.type="draw-point";}};e$6([d$2()],s.prototype,"type",void 0),e$6([d$2()],s.prototype,"elevation",void 0),s=e$6([n$5("esri.views.interactive.tooltip.DrawPointTooltipInfo")],s);let a$d=class extends e$2{constructor(t){super(t),this.type="draw-polyline";}};e$6([d$2()],a$d.prototype,"type",void 0),e$6([d$2()],a$d.prototype,"elevation",void 0),e$6([d$2()],a$d.prototype,"totalLength",void 0),a$d=e$6([n$5("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],a$d);let l$5=class extends e$2{constructor(t){super(t),this.type="draw-polygon";}};e$6([d$2()],l$5.prototype,"type",void 0),e$6([d$2()],l$5.prototype,"elevation",void 0),e$6([d$2()],l$5.prototype,"area",void 0),l$5=e$6([n$5("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],l$5);let n$2=class extends e$2{constructor(t){super(t),this.type="draw-rectangle",this.xSize=j$1,this.ySize=j$1,this.area=U$2;}};e$6([d$2()],n$2.prototype,"type",void 0),e$6([d$2()],n$2.prototype,"xSize",void 0),e$6([d$2()],n$2.prototype,"ySize",void 0),e$6([d$2()],n$2.prototype,"area",void 0),n$2=e$6([n$5("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],n$2);let c$b=class extends e$2{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=U$2;}};e$6([d$2()],c$b.prototype,"type",void 0),e$6([d$2()],c$b.prototype,"radius",void 0),e$6([d$2()],c$b.prototype,"xSize",void 0),e$6([d$2()],c$b.prototype,"ySize",void 0),e$6([d$2()],c$b.prototype,"area",void 0),c$b=e$6([n$5("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],c$b);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const t="esri-tooltip",o=`${t}-content`;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let g$2=class extends M{constructor(){super(...arguments),this._messagesUnits=null,this._messagesTooltip=null;}get _units(){const t=ue(this.tooltip.view);return {length:t,verticalLength:t,area:t}}_formatScale(t){return m$b(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return m$b(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,r,i){return x$2(this._messagesUnits,t,c$c(r,this._units.length),i)}_formatRelativeLength(t){return F$2(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return S$2(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return k$1(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return x$2(this._messagesUnits,t,this._units.length)}_formatArea(t){return z$3(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return m$b(t.value,{style:"percent"})}};e$6([d$2()],g$2.prototype,"info",void 0),e$6([d$2()],g$2.prototype,"tooltip",void 0),e$6([d$2()],g$2.prototype,"_units",null),e$6([e$7("esri/core/t9n/Units"),d$2()],g$2.prototype,"_messagesUnits",void 0),e$6([e$7("esri/views/interactive/tooltip/t9n/Tooltip"),d$2()],g$2.prototype,"_messagesTooltip",void 0),g$2=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContent")],g$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$f=`${t}-field`,a$c={base:p$f,title:`${p$f}__title`,value:`${p$f}__value`};let c$a=class extends M{render(){return n$6("div",{class:a$c.base},n$6("div",{class:a$c.title},this.title),n$6("div",{class:a$c.value},this.value))}};e$6([d$2()],c$a.prototype,"title",void 0),e$6([d$2()],c$a.prototype,"value",void 0),c$a=e$6([n$5("esri.views.interactive.tooltip.support.TooltipField")],c$a);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$e={base:`${t}-value-by-value`};let a$b=class extends M{constructor(){super(...arguments),this.divider="×";}render(){return n$6("div",{class:p$e.base},n$6("span",null,this.left),n$6("span",null,this.divider),n$6("span",null,this.right))}};e$6([d$2()],a$b.prototype,"left",void 0),e$6([d$2()],a$b.prototype,"divider",void 0),e$6([d$2()],a$b.prototype,"right",void 0),a$b=e$6([n$5("esri.views.interactive.tooltip.support.ValueByValue")],a$b);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const m$7={base:`${o} ${`${o}--draw-rectangle`}`};let l$4=class extends g$2{render(){const{area:t,radius:s,xSize:o,ySize:e,tooltipOptions:l}=this.info,{visibleElements:c}=l,n=this._messagesTooltip?.sketch;return n$6("div",{class:m$7.base},c.radius&&r$2(s)&&n$6(c$a,{title:n?.radius,value:this._formatLength(s)}),c.size&&r$2(o)&&r$2(e)&&n$6(c$a,{title:n?.size,value:n$6(a$b,{left:this._formatLength(o),right:this._formatLength(e)})}),c.area&&n$6(c$a,{title:n?.area,value:this._formatArea(t)}))}};l$4=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],l$4);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$d={base:`${o} ${`${o}--draw-point`}`};let c$9=class extends g$2{render(){const{elevation:o}=this.info,t=this._messagesTooltip?.sketch;return n$6("div",{class:p$d.base},n$6(c$a,{title:t?.elevation,value:this._formatVerticalLength(o)}))}};c$9=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],c$9);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$c={base:`${o} ${`${o}--draw-polygon`}`};let a$a=class extends g$2{render(){const{area:o,elevation:t}=this.info,r=this._messagesTooltip?.sketch;return n$6("div",{class:p$c.base},n$6(c$a,{title:r?.elevation,value:this._formatVerticalLength(t)}),n$6(c$a,{title:r?.area,value:this._formatArea(o)}))}};a$a=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],a$a);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$b={base:`${o} ${`${o}--draw-polyline`}`};let a$9=class extends g$2{render(){const{elevation:t,totalLength:o}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$b.base},n$6(c$a,{title:s?.elevation,value:this._formatVerticalLength(t)}),n$6(c$a,{title:s?.totalLength,value:this._formatLength(o)}))}};a$9=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],a$9);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const m$6={base:`${o} ${`${o}--draw-rectangle`}`};let c$8=class extends g$2{render(){const{area:t,xSize:r,ySize:s,tooltipOptions:e}=this.info,{visibleElements:c}=e,l=this._messagesTooltip?.sketch;return n$6("div",{class:m$6.base},c.size&&r$2(r)&&r$2(s)&&n$6(c$a,{title:l?.size,value:n$6(a$b,{left:this._formatLength(r),right:this._formatLength(s)})}),c.area&&n$6(c$a,{title:l?.area,value:this._formatArea(t)}))}};c$8=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],c$8);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$a={base:`${o} ${`${o}--extent-rotate`}`};let a$8=class extends g$2{render(){const{angle:t}=this.info,o=this._messagesTooltip?.sketch;return n$6("div",{class:p$a.base},n$6(c$a,{title:o?.rotation,value:this._formatRelativeOrientation(t)}))}};a$8=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],a$8);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const a$7={base:`${o} ${`${o}--extent-scale`}`};let c$7=class extends g$2{render(){const{xScale:t,yScale:s,xSize:e,ySize:o}=this.info,c=this._messagesTooltip?.sketch;return n$6("div",{class:a$7.base},n$6(c$a,{title:c?.size,value:n$6(a$b,{left:this._formatLength(e),right:this._formatLength(o)})}),n$6(c$a,{title:c?.scale,value:n$6(a$b,{left:this._formatScale(t),right:this._formatScale(s)})}))}};c$7=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],c$7);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$9={base:`${o} ${`${o}--reshape-edge-offset`}`};let c$6=class extends g$2{render(){const{distance:s}=this.info,t=this._messagesTooltip?.sketch;return n$6("div",{class:p$9.base},n$6(c$a,{title:t?.distance,value:this._formatRelativeLength(s)}))}};c$6=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],c$6);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$8={base:`${o} ${`${o}--transform-absolute`}`};let a$6=class extends g$2{render(){const{orientation:o,orientationEnabled:s,orientationPrecision:r,rotationType:e,size:a,sizeEnabled:c,sizeUnit:m,sizePrecision:l}=this.info,j=this._messagesTooltip?.sketch;return n$6("div",{class:p$8.base},s&&n$6(c$a,{title:j?.orientation,value:U$3(o,e,r)}),c&&n$6(c$a,{title:j?.size,value:this._formatLength(a,m,l)}))}};a$6=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],a$6);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const n$1={base:`${o} ${`${o}--transform-rotate`}`};let c$5=class extends g$2{render(){const{rotation:o,rotationPrecision:s,orientation:i,orientationPrecision:e,rotationType:c}=this.info,m=this._messagesTooltip?.sketch;return n$6("div",{class:n$1.base},n$6(c$a,{title:m?.rotation,value:q$1(o,c,s)}),n$6(c$a,{title:m?.orientation,value:U$3(i,c,e)}))}};c$5=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],c$5);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$7={base:`${o} ${`${o}--transform-scale`}`};let c$4=class extends g$2{render(){const{scale:s,size:t,sizePrecision:o,sizeUnit:r}=this.info,c=this._messagesTooltip?.sketch;return n$6("div",{class:p$7.base},n$6(c$a,{title:c?.scale,value:this._formatPercentage(s)}),n$6(c$a,{title:c?.size,value:this._formatLength(t,r,o)}))}};c$4=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],c$4);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$6={base:`${o} ${`${o}--translate-graphic`}`};let c$3=class extends g$2{render(){const{distance:s}=this.info,t=this._messagesTooltip?.sketch;return n$6("div",{class:p$6.base},n$6(c$a,{title:t?.distance,value:this._formatLength(s)}))}};c$3=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],c$3);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$5={base:`${o} ${`${o}--translate-graphic-xy`}`};let a$5=class extends g$2{render(){const{distance:t}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$5.base},n$6(c$a,{title:s?.distance,value:this._formatRelativeLength(t)}))}};a$5=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],a$5);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$4={base:`${o} ${`${o}--translate-graphic-z`}`};let a$4=class extends g$2{render(){const{distance:t}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$4.base},n$6(c$a,{title:s?.distance,value:this._formatRelativeVerticalLength(t)}))}};a$4=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],a$4);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$3={base:`${o} ${`${o}--translate-vertex`}`};let l$3=class extends g$2{render(){const{area:t,distance:o,elevation:r,totalLength:s}=this.info,l=this._messagesTooltip?.sketch;return n$6("div",{class:p$3.base},n$6(c$a,{title:l?.distance,value:this._formatLength(o)}),r$2(r)&&n$6(c$a,{title:l?.elevation,value:this._formatVerticalLength(r)}),r$2(t)&&n$6(c$a,{title:l?.area,value:this._formatArea(t)}),r$2(s)&&n$6(c$a,{title:l?.totalLength,value:this._formatLength(s)}))}};l$3=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],l$3);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$2={base:`${o} ${`${o}--translate-vertex`}`};let l$2=class extends g$2{render(){const{area:t,distance:o,elevation:r,totalLength:s}=this.info,l=this._messagesTooltip?.sketch;return n$6("div",{class:p$2.base},n$6(c$a,{title:l?.distance,value:this._formatRelativeLength(o)}),r$2(r)&&n$6(c$a,{title:l?.elevation,value:this._formatVerticalLength(r)}),r$2(t)&&n$6(c$a,{title:l?.area,value:this._formatArea(t)}),r$2(s)&&n$6(c$a,{title:l?.totalLength,value:this._formatLength(s)}))}};l$2=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],l$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$1={base:`${o} ${`${o}--translate-vertex`}`};let c$2=class extends g$2{render(){const{distance:t,elevation:o}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$1.base},n$6(c$a,{title:s?.distance,value:this._formatRelativeVerticalLength(t)}),r$2(o)&&n$6(c$a,{title:s?.elevation,value:this._formatVerticalLength(o)}))}};c$2=e$6([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],c$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function x$1(x,d){if(t$1(d))return null;const g=document.createElement("div");switch(d.type){case"draw-point":return new c$9({tooltip:x,info:d,container:g});case"draw-polygon":return new a$a({tooltip:x,info:d,container:g});case"draw-polyline":return new a$9({tooltip:x,info:d,container:g});case"draw-rectangle":return new c$8({tooltip:x,info:d,container:g});case"draw-circle":return new l$4({tooltip:x,info:d,container:g});case"extent-rotate":return new a$8({tooltip:x,info:d,container:g});case"extent-scale":return new c$7({tooltip:x,info:d,container:g});case"transform-absolute":return new a$6({tooltip:x,info:d,container:g});case"transform-rotate":return new c$5({tooltip:x,info:d,container:g});case"transform-scale":return new c$4({tooltip:x,info:d,container:g});case"translate-graphic":return new c$3({tooltip:x,info:d,container:g});case"translate-graphic-z":return new a$4({tooltip:x,info:d,container:g});case"translate-graphic-xy":return new a$5({tooltip:x,info:d,container:g});case"translate-vertex":return new l$3({tooltip:x,info:d,container:g});case"translate-vertex-z":return new c$2({tooltip:x,info:d,container:g});case"translate-vertex-xy":return new l$2({tooltip:x,info:d,container:g});case"reshape-edge-offset":return new c$6({tooltip:x,info:d,container:g})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const h$1={base:`${t}`};let m$5=class extends f$4{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(h$1.base),t})(),this._contentWidget=null;}initialize(){const t=this._contentContainer;this.addHandles([l$6((()=>this.view.overlay?.surface),(o=>{t.remove(),o$1(o,(o=>o.appendChild(t)));}),w$2),l$6((()=>this.info),((o,s)=>{r$2(this._contentWidget)&&r$2(o)&&r$2(s)&&o.type===s.type?this._contentWidget.info=o:(this._contentWidget=l$7(this._contentWidget),o$1(x$1(this,o),(o=>{this._contentWidget=o,t.appendChild(o.container);})));}),w$2),l$6((()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this.view.inputManager?.latestPointerLocation})),u$1,w$2)]);}destroy(){this._contentWidget=l$7(this._contentWidget),this._contentContainer.remove();}clear(){this.info=null;}get test(){return {contentContainer:this._contentContainer}}};function u$1({container:t,contentWidget:o,screenPoint:e}){const{style:i}=t;if(r$2(e)&&r$2(o)){i.display="block";const o=f$5(t),n=`translate(${Math.round(e.x)+f$1[0]*(o?-1:1)}px, ${Math.round(e.y)+f$1[1]}px)`;i.transform=o?`translate(-100%, 0) ${n}`:n;}else i.display="none";}e$6([d$2({nonNullable:!0})],m$5.prototype,"view",void 0),e$6([d$2()],m$5.prototype,"info",void 0),e$6([d$2()],m$5.prototype,"_contentContainer",void 0),e$6([d$2()],m$5.prototype,"_contentWidget",void 0),m$5=e$6([n$5("esri.views.interactive.tooltip.Tooltip")],m$5);const f$1=[20,20];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function r$1(r,t,i,s,...l){return o$2(r)&&M$1(r)?t.apply(void 0,l):k$2(r)?i.apply(void 0,l):s.apply(void 0,l)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function m$4(e){const{spatialReference:r}=e;return r$1(r,i,a$3,u,e)}function i(r){return a$f(Math.abs(w$3([r],"square-meters")[0]),"square-meters")}function a$3(t){try{return a$f(Math.abs(q$2(t,"square-meters")),"square-meters")}catch(s){return null}}function u(r){const o=[];return hn(r,o)?a$f(Math.abs(w$3([{type:"polygon",rings:o,spatialReference:k$3.WGS84}],"square-meters")[0]),"square-meters"):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function m$3(m,s,n=d$3()){if(s){const t=m$4(m);return r$2(t)?t:j$2(m,n)}return h$2(m,n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function f(e){const{spatialReference:t}=e;return r$1(t,y,j,d$1,e)}function m$2(e,t){if(!E$2(e.spatialReference,t.spatialReference))return null;const{spatialReference:r}=e;return U[0]=e.x,U[1]=e.y,U[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,l$1(U,x,r)}function l$1(e,t,r){return r$1(r,a$2,p,g$1,e,t,r)}function a$2(t,r,n){return o$3(z$4(R,t,r,n).distance,"meters")}function p(t,n,o){return o$3(C$2(h(t,n,o),"meters"),"meters")}function g$1(t,r,o){return yn(t,o,z)&&yn(r,o,Z$1)?o$3(z$4(R,z,Z$1).distance,"meters"):null}function y(t){return o$3(y$2([t],"meters")[0],"meters")}function j(t){return o$3(C$2(t,"meters"),"meters")}function d$1(t){const r=[];if(!Gn(t,r))return null;let n=0;for(const e of r){let t=0;for(let r=1;r<e.length;++r)t+=z$4(R,e[r-1],e[r]).distance;n+=t;}return o$3(n,"meters")}function h(e,t,r){return {type:"polyline",spatialReference:r,paths:[[[...e],[...t]]]}}const R={distance:null},U=n$3(),x=n$3(),z=n$3(),Z$1=n$3();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function m$1(n,e){return g(p$g,f,h$3,e,n)}function a$1(n,r,t,e){return g(j$3,l$1,d$4,e,n,r,t)}function d(n,r,t){return g(R$2,m$2,R$2,t,n,r)}function l(n,r,t,e){return g(d$4,l$1,d$4,e,n,r,t)}function g(r,t,e,o,...i){if("on-the-ground"===o){const r=t.apply(void 0,i);return r$2(r)?r:e.apply(void 0,i)}return r.apply(void 0,i)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function a(n,s){const i=t=>m$1(t,s),a=(t,r,e)=>a$1(t,r,e,s),m=i(n),p=n.paths[0]?.[n.paths[0]?.length-1]??null,{hasZ:l,spatialReference:f}=n,h=p?r$5(p[0],p[1],l?p[2]:0):null;return e=>{if(t$1(e)||t$1(m)||t$1(h))return m;c$1[0]=e.x,c$1[1]=e.y,c$1[2]=l?e.z:0;const n=a(h,c$1,f);return t$1(n)?m:o$3(m.value+n.value,m.unit)}}function m(r,e){const n=d$3(),o=t=>m$3(t,e,n);return e=>{if(t$1(e)||r.rings.length<1||r.rings[0].length<2)return o(r);const n=r.clone();return n.rings[0].push([e.x,e.y]),o(n)}}const c$1=n$3();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let F=class extends(a$g(n$7.EventedMixin(p$h))){constructor(t){super(t),this._graphic=null,this._createOperationGeometry=null,this._tooltipContext={calculateTotalLength:null,calculateArea:null},this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.labelOptions=new c$d,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.tooltip=null,this.tooltipOptions=new r$6;}initialize(){this.internalGraphicsLayer=new h$4({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(t=>this.onVertexAdd(t))),this.drawOperation.on("vertex-remove",(t=>this.onVertexRemove(t))),this.drawOperation.on("vertex-update",(t=>this.onVertexUpdate(t))),this.drawOperation.on("cursor-update",(t=>this.onCursorUpdate(t))),this.drawOperation.on("complete",(t=>this.onComplete(t))),this.drawOperation.on(["vertex-add","vertex-update","vertex-remove"],(()=>{this._tooltipContext={calculateArea:this._calculateAreaFunction,calculateTotalLength:this._calculateTotalLengthFunction};})),l$6((()=>this.tooltipOptions.enabled),(t=>{this.tooltip=t?new m$5({view:this.view,info:this._tooltipInfo}):l$7(this.tooltip);}),w$2),l$6((()=>this._tooltipInfo),(t=>{r$2(this.tooltip)&&(this.tooltip.info=t);}),w$2)]),this.finishToolCreation();}destroy(){this.drawOperation=l$7(this.drawOperation),this.tooltip=l$7(this.tooltip),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=l$7(this.internalGraphicsLayer),this._set("view",null);}get _defaultElevation(){return o$3(this.defaultZ,"meters")}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic();}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t);}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic();}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),r$2(this._graphic)&&(this._graphic.symbol=t);}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete();}onInputEvent(t){this.drawOperation.onInputEvent(t);}redo(){this.drawOperation.redo();}reset(){}undo(){this.drawOperation.undo();}_createGraphic(t){this._graphic=new g$7({...this.graphicProperties,geometry:t,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(n$8((()=>{r$2(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=l$7(this._graphic));})),Z);}_destroyAllVisualisations(){this.handles.remove(H.outline),this.handles.remove(H.regularVertices),this.handles.remove(H.activeVertex),this.handles.remove(Z);}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const e=this.drawOperation.stagedVertex,i=this.drawOperation.committedVertices,o=i.slice();r$2(e)&&o.push(this.drawOperation.coordinateHelper.pointToArray(e));const r=r$2(e)?this.drawOperation.coordinateHelper.pointToArray(e):i.splice(-1)[0],n={regularVertices:null,activeVertex:null,full:null,outline:null,circle:null,rectangle:null},a=o.length,s=this.view.spatialReference,p="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":n.regularVertices=i,n.activeVertex=r,n.full=this.drawOperation.coordinateHelper.arrayToPoint(o[0]);break;case"multipoint":n.regularVertices=i,n.activeVertex=r,a>0&&(n.full=b(o,s));break;case"polyline":n.regularVertices=i,n.activeVertex=r,a>0&&(n.full=U$1([o],s,p));break;case"polygon":n.regularVertices=i,n.activeVertex=r,a>0&&(n.full=P([o],s,p,!0));break;case"circle":if(a>0){const e=S$1(this.view,o[0]);if(1===a&&t.operationComplete){const t=o[0],i=e.makeMapPoint(t[0]+q*this.view.resolution,t[1]);n.circle=C$1([t,i],e,!0),n.full=r$2(n.circle)?n.circle.geometry:null;}else 2===a&&(this.forceUniformSize?(n.circle=C$1(o,e,this.centered),n.full=r$2(n.circle)?n.circle.geometry:null):(n.rectangle=S(o,e,this.centered),n.full=n.rectangle.geometry));}break;case"rectangle":if(a>0){const e=S$1(this.view,o[0]);if(1===a&&t.operationComplete){const t=o[0],i=e.makeMapPoint(t[0]+q*this.view.resolution,t[1]);n.rectangle=w([t,i],e,!0),n.full=n.rectangle.geometry;}else 2===a&&(n.rectangle=this.forceUniformSize?w(o,e,this.centered):z$1(o,e,this.centered),n.full=n.rectangle.geometry);}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":a>1&&(n.outline=U$1([o],s,p));break;case"circle":case"rectangle":r$2(n.full)&&"polygon"===n.full.type&&(n.outline=P(n.full.rings,s,p));}return n}initializeGraphic(t){return null}onComplete(t){this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});r$2(t)&&(t$1(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full,e=e$8(this._graphic).clone());}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t});}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t);}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel();}onVertexAdd(t){this._updateGraphic(),this.emit("vertex-add",t);}onVertexRemove(t){this._updateGraphic(),this.emit("vertex-remove",t);}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t);}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,t$1(t)?this._destroyAllVisualisations():(r$2(t.outline)?this.handles.add(this.onOutlineChanged(t.outline),H.outline):this.handles.remove(H.outline),r$2(t.regularVertices)?this.handles.add(this.onRegularVerticesChanged(t.regularVertices),H.regularVertices):this.handles.remove(H.regularVertices),r$2(t.activeVertex)?this.handles.add(this.onActiveVertexChanged(t.activeVertex),H.activeVertex):this.handles.remove(H.activeVertex),r$2(t.full)?t$1(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full:this.handles.remove(Z));}get _tooltipInfo(){const{drawOperation:t}=this;if(!t)return null;switch(this.geometryType){case"point":return this._drawPointTooltipInfo;case"polyline":return this._drawPolylineTooltipInfo;case"polygon":return this._drawPolygonTooltipInfo;case"rectangle":return this._drawRectangleTooltipInfo;case"circle":return this._drawCircleTooltipInfo;default:return null}}get _drawPointTooltipInfo(){const t=o$1(this.graphic,(t=>t.geometry));return t$1(t)||"point"!==t.type?null:new s({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail})}get _drawPolylineTooltipInfo(){const t=this._tooltipContext.calculateTotalLength;if(t$1(t))return null;const e=t(this.drawOperation.stagedOrLastVertex);return new a$d({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,totalLength:c$c(e,j$1)})}get _calculateTotalLengthFunction(){const{drawOperation:t}=this,e=this._geometry;return t$1(t)||t$1(e)||"polyline"!==e.type?null:a(e,this._lengthElevationMode)}get _drawPolygonTooltipInfo(){const t=this._tooltipContext.calculateArea;if(t$1(t))return null;const e=t(this.drawOperation.stagedOrLastVertex);return new l$5({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:c$c(e,U$2)})}get _calculateAreaFunction(){const t=this._geometry;return t$1(this.drawOperation)||t$1(t)||"polygon"!==t.type?null:m(t,this.drawOperation.isDraped)}get _drawRectangleTooltipInfo(){return t$1(this.drawOperation)?null:new n$2({tooltipOptions:this.tooltipOptions,xSize:c$c(this._xSize,j$1),ySize:c$c(this._ySize,j$1),area:c$c(this._fullGeometryArea,U$2)})}get _drawCircleTooltipInfo(){if(t$1(this.drawOperation))return null;const t=this.forceUniformSize;return new c$b({tooltipOptions:this.tooltipOptions,radius:t?c$c(this._circleRadius,j$1):null,xSize:t?null:c$c(this._xSize,j$1),ySize:t?null:c$c(this._ySize,j$1),area:c$c(this._fullGeometryArea,U$2)})}get _circleRadius(){const t=this._createOperationGeometry;return r$2(t)&&r$2(t.circle)&&r$2(t.circle.center)&&r$2(t.circle.edge)?d(t.circle.center,t.circle.edge,this._lengthElevationMode):null}get _xSize(){const t=this._createOperationGeometry;if(t$1(t)||t$1(t.rectangle))return null;const{midpoints:e}=t.rectangle;return r$2(e)?d(e.left,e.right,this._lengthElevationMode):null}get _ySize(){const t=this._createOperationGeometry;if(t$1(t)||t$1(t.rectangle))return null;const{midpoints:e}=t.rectangle;return r$2(e)?d(e.top,e.bottom,this._lengthElevationMode):null}get _fullGeometryArea(){const{drawOperation:t}=this;if(t$1(t))return null;const e=this._createOperationGeometry,i=r$2(e)?e.full:null;return r$2(i)&&"polygon"===i.type?m(i,t.isDraped)(null):null}get _elevationTooltipDetail(){return {mode:this.drawOperation.elevationInfo.mode,...this._vertexTooltipElevation}}get _vertexTooltipElevation(){const{tooltipOptions:t,view:e,drawOperation:i}=this;if(t$1(i))return this._defaultElevation;const{stagedVertex:o,elevationInfo:r}=i;if(t$1(o)||"2d"===e.type)return this._defaultElevation;const n=v$3(e,o,r,{mode:t.elevation.mode,offset:0})*L$1(o.spatialReference);return o$3(n,"meters")}get _lengthElevationMode(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}get _geometry(){const{graphic:t}=this;return r$2(t)?t.geometry:null}};e$6([d$2()],F.prototype,"_createOperationGeometry",void 0),e$6([d$2()],F.prototype,"_defaultElevation",null),e$6([d$2()],F.prototype,"_tooltipContext",void 0),e$6([d$2({value:!0})],F.prototype,"centered",null),e$6([d$2({nonNullable:!0})],F.prototype,"defaultZ",void 0),e$6([d$2()],F.prototype,"drawOperation",void 0),e$6([d$2({value:!0})],F.prototype,"enabled",null),e$6([d$2({value:!0})],F.prototype,"forceUniformSize",null),e$6([d$2({constructOnly:!0})],F.prototype,"geometryType",void 0),e$6([d$2()],F.prototype,"graphic",null),e$6([d$2({constructOnly:!0})],F.prototype,"graphicProperties",void 0),e$6([d$2()],F.prototype,"graphicSymbol",null),e$6([d$2({constructOnly:!0})],F.prototype,"hasZ",void 0),e$6([d$2({constructOnly:!0,type:c$d})],F.prototype,"labelOptions",void 0),e$6([d$2({constructOnly:!0})],F.prototype,"mode",void 0),e$6([d$2()],F.prototype,"snappingManager",void 0),e$6([d$2()],F.prototype,"snapToScene",void 0),e$6([d$2()],F.prototype,"tooltip",void 0),e$6([d$2({constructOnly:!0,type:r$6})],F.prototype,"tooltipOptions",void 0),e$6([d$2({readOnly:!0})],F.prototype,"type",void 0),e$6([d$2({readOnly:!0})],F.prototype,"updating",null),e$6([d$2({constructOnly:!0,nonNullable:!0})],F.prototype,"view",void 0),e$6([d$2()],F.prototype,"_tooltipInfo",null),e$6([d$2()],F.prototype,"_drawPointTooltipInfo",null),e$6([d$2()],F.prototype,"_drawPolylineTooltipInfo",null),e$6([d$2()],F.prototype,"_calculateTotalLengthFunction",null),e$6([d$2()],F.prototype,"_drawPolygonTooltipInfo",null),e$6([d$2()],F.prototype,"_calculateAreaFunction",null),e$6([d$2()],F.prototype,"_drawRectangleTooltipInfo",null),e$6([d$2()],F.prototype,"_drawCircleTooltipInfo",null),e$6([d$2()],F.prototype,"_circleRadius",null),e$6([d$2()],F.prototype,"_xSize",null),e$6([d$2()],F.prototype,"_ySize",null),e$6([d$2()],F.prototype,"_fullGeometryArea",null),e$6([d$2()],F.prototype,"_elevationTooltipDetail",null),e$6([d$2()],F.prototype,"_vertexTooltipElevation",null),e$6([d$2()],F.prototype,"_lengthElevationMode",null),e$6([d$2()],F.prototype,"_geometry",null),F=e$6([n$5("esri.views.draw.DrawGraphicTool")],F);const Z="create-operation-graphic",H={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function N(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return "segment";default:return null}}const q=48;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const e$1="click";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
class e{constructor({grabbableForEvent:e}){this.events=new n$7,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e;}intersectionDistance(t,e){return 0}attach(){}detach(){}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let C=class extends(n$7.EventedMixin(d$5)){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new d$6,this.isDraped=!0,this.labelOptions=new c$d,this.tooltipOptions=new r$6,this.snapToSceneEnabled=null,t$1(e.elevationInfo)&&(this.elevationInfo={mode:e.hasZ?"absolute-height":"on-the-ground",offset:0});}initialize(){const{geometryType:e$1,view:t}=this,{spatialReference:i}=t,n="viewingMode"in t.state?t.state.viewingMode:l$8.Local,s="segment"===e$1||"multipoint"===e$1?"polyline":e$1;this.coordinateHelper=R$3(this.hasZ,this.hasM,i),this._editGeometryOperations=new S$3(new g$8(s,this.coordinateHelper)),this._snappingOperation=new h$5({view:t}),this.handles.add(l$6((()=>this.stagedVertex),(e=>{t$1(e)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"});}),{sync:!0,equals:(e,t)=>w$4(e,t,a$h)})),this._activeComponent=new p$i(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const a=this.segmentLabels;r$2(a)&&(a.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([l$6((()=>this.labelOptions.enabled),(e=>{a.visible=e;}),w$2),this.on("cursor-update",(()=>{const e=this.stagedVertex;a.stagedVertex=r$2(e)?this.coordinateHelper.pointToVector(e):null;}))])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),i=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t});}}))),this._manipulator=new e({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==e$1,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(e=>this._onImmediateClick(e))),this._manipulator.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e)))]);}destroy(){l$7(this.segmentLabels),l$7(this._snappingOperation),this._editGeometryOperations=l$7(this._editGeometryOperations);}get _snappingEnabled(){return r$2(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}set drawingMode(e){this._set("drawingMode",e??e$1);}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e;}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return r$2(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=y$1(e);}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return r$2(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}get stagedOrLastVertex(){if(r$2(this.stagedVertex))return this.stagedVertex;const e=this._activeComponent.getLastVertex();return t$1(e)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(e.pos)}cancel(){this.complete({aborted:!0});}commitStagedVertex(){if(this._snappingOperation.abort(),r$2(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e));}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),r$2(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;const i="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"});}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId);}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo();}undo(){r$2(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo();}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(e$8(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return y$3(e,((e,t,i,n)=>{const r="touch"===n&&this._snappingEnabled;!this.isCompleted&&r&&(t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||r&&0===this.numVertices)&&this.commitStagedVertex()),e))).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>r,cancel:i,snappingManager:this.snappingManager,snappingContext:new e$9({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:n,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next((e=>(r&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e))),i.next((()=>{r&&r$2(this.snappingManager)&&this.snappingManager.doneSnapping();})));}))}_createManipulatorDragPipelineFreehand(e){return y$3(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(t$1(this.stagedVertex)&&(this.stagedVertex=e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete();}return e}));}))}_createManipulatorDragPipelineHybrid(e){return y$3(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(t$1(this.stagedVertex)&&(this.stagedVertex=e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete();}return e}));}))}_getDrawSurface(){if(t$1(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;r$2(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(t=!0),r$2(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),r$2(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(t=!1);const i=this._activeComponent.vertices.length;return ("segment"===this.geometryType||"polygon"===this.geometryType)&&i>0&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation();}_onImmediateClick(e){if("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(r$2(i))return e.stopPropagation(),void this.complete();const n=this._screenToMap(e.screenPoint);if(r$2(n))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(r$2(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),r$2(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete();}e.stopPropagation();}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation());}_onPointerMove(e){const t=c$e(e.x,e.y);if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void this._snappingOperation.abort();e.stopPropagation();const i=this._closeOnClickVertexIndex(t);if(r$2(i))return this._closeOnVertex(i),void this._snappingOperation.abort();const n=this._screenToMap(t);if(this._manipulator.cursor=r$2(n)?"crosshair":null,t$1(n))return void this._snappingOperation.abort();if(t$1(this.snappingManager))return this.stagedVertex=n,void this._snappingOperation.abort();const s=this.snappingManager,a=new e$9({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise(g$9(this._snappingOperation.snap(n,s,a)));}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"});}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),t$1(e))return null;const i=this._screenToMap(t.screenEnd);return r$2(i)?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const i=25,n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return !!r$2(n)&&I(n,t,i)}};function I(e,t,i){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r<=i}e$6([d$2()],C.prototype,"defaultZ",void 0),e$6([d$2()],C.prototype,"isDraped",void 0),e$6([d$2({value:e$1})],C.prototype,"drawingMode",null),e$6([d$2({constructOnly:!0})],C.prototype,"elevationDrawSurface",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"elevationInfo",void 0),e$6([d$2({constructOnly:!0,type:c$d})],C.prototype,"labelOptions",void 0),e$6([d$2({constructOnly:!0,type:r$6})],C.prototype,"tooltipOptions",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"geometryType",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"hasM",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"hasZ",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"manipulators",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"drawSurface",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"segmentLabels",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"snappingManager",void 0),e$6([d$2({constructOnly:!0})],C.prototype,"snappingVisualizer",void 0),e$6([d$2()],C.prototype,"snapToSceneEnabled",void 0),e$6([d$2()],C.prototype,"_snappingOperation",void 0),e$6([d$2()],C.prototype,"stagedVertex",null),e$6([d$2()],C.prototype,"updating",null),e$6([d$2({constructOnly:!0})],C.prototype,"view",void 0),C=e$6([n$5("esri.views.draw.DrawOperation")],C);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
class r{constructor(e,t,i,s=null){this._elevationInfo=e,this.defaultZ=t,this._view=i,this._excludeGraphics=s;}screenToMap(i){if(r$2(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen(i$2(i.x,i.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const s=this._view.sceneIntersectionHelper.intersectElevationFromScreen(i$2(i.x,i.y),this._elevationInfo,0,this._excludeGraphics);return r$2(s)&&(s.z=void 0),s}mapToScreen(e){const t=v$4(e.x,e.y,v$3(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}}class n{constructor(e,t,i=[]){this.view=e,this.elevationInfo=t,this.exclude=i;}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return r$2(i)&&(i.z=f$6(i,this.view,this.elevationInfo)),i}mapToScreen(t){let o=t;return r$2(this.elevationInfo)&&(o=v$4(t.x,t.y,v$3(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(o)}}class c{constructor(e,t=!1,i=0){this.view=e,this.hasZ=t,this.defaultZ=i,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const s=e.toMap(t);return s.z=i,s}:t=>e.toMap(t);}}

export { C, F, N, a$1 as a, m$3 as b, c, d, e$2 as e, m$1 as f, l as g, l$1 as l, m$5 as m, n, r };
