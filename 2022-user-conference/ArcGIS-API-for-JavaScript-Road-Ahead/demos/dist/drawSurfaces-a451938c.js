import { dm as E$2, dn as P$2, t as t$1, dp as E$3, b1 as b$3, r as r$3, dq as e$4, dr as r$4, ds as r$5, ay as n$3, a$ as g$6, dt as P$3, du as e$6, dv as z$4, dw as _, dx as E$4, dy as g$7, dz as f$3, dA as a$g, dB as I$3, dg as m$9, dj as m$a, y as y$5, dC as i$3, bj as v$6, dD as A$1, dE as g$8, cQ as $, dF as m$b, j as j$6, B as e$7, C as d$6, D as n$5, E as f$5, dG as o$2, c7 as D$2, Z as s$1, dH as z$5, dI as w$4, dJ as Z$2, aK as c$d, dK as g$9, dL as D$3, dM as h$6, dN as p$k, dO as x$5, dP as d$7, dQ as y$6, dR as j$7, dS as F$3, dT as B, dU as M$3, dV as $$1, dW as e$8, dX as M$4, dY as ue, dZ as m$c, d_ as n$6, aP as l$6, d$ as w$5, aJ as o$3, df as l$7, e0 as f$6, e1 as An, e2 as O$1, e3 as I$4, e4 as p$l, e5 as se, aA as o$4, e6 as Bn, e7 as F$4, e8 as r$6, e9 as o$5, ea as M$5, eb as k$4, ec as w$6, ed as hn, R as k$5, ee, ef as Z$3, eg as x$7, eh as z$6, ei as yn, ej as y$7, ek as Gn, aI as r$7, aW as a$h, aH as n$7, el as c$f, em as r$8, en as h$7, g as g$a, de as n$8, al as e$9, eo as v$7, ep as L$2, aT as o$6, aZ as c$g, eq as Z$4, er as rn, es as l$8, et as A$2, eu as v$8, ev as g$b, ew as h$8, N as x$8, ex as a$i, ey as d$8, ez as w$7, b4 as i$4, eA as v$9, eB as f$7 } from './_virtual_index-a68dd1ed.js';
import { simplify as w$3, distance as f$4, geodesicArea as q$3, geodesicLength as C$3 } from './geometryEngine-bf603757.js';
import { Q, O } from './quat-08f73fae.js';
import { e as e$5 } from './quatf64-808fd6fd.js';
import { n as n$4 } from './sphere-a826bb8b.js';
import { x as x$6 } from './earcut-da8a3e33.js';
import { j as j$8, E as E$5, K } from './plane-999ac6bd.js';
import { S as S$5 } from './triangle-ee8127e2.js';
import { c as c$e } from './vectorStacks-5f70b87b.js';
import { e as e$a, R as R$5, S as S$6, g as g$c, p as p$m } from './SnappingContext-d087b90e.js';
import { r as r$9 } from './drawUtils-59f13a7a.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function a$f(e,n){return !!E$2(e.spatialReference,n.spatialReference)&&(e.x===n.x&&e.y===n.y&&e.z===n.z&&e.m===n.m)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function r$2(t,u){return {type:P$2(u),value:t,unit:u}}function o$1(t,u){return {type:P$2(u),value:t,unit:u}}function a$e(t,u){return {type:P$2(u),value:t,unit:u}}function c$c(t,u,e="arithmetic"){return {type:P$2(u),value:t,unit:u,rotationType:e}}function v$5(t,n){return r$2(E$3(t.value,t.unit,n),n)}function p$j(n,u){return t$1(n)?u:t$1(u)||n.value>E$3(u.value,u.unit,n.unit)?n:u}function y$4(n,u){return t$1(n)?null:{...n,value:n.value*u}}const j$5=o$1(0,"meters"),U$4=a$e(0,"square-meters");

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function g$5(r,e,s=null){return r$3(s)?[r,e,s]:[r,e]}function R$4(r,e,s=null){return r$3(s)?{x:r,y:e,z:s}:{x:r,y:e}}class W{constructor(t){this.spatialReference=t;}mapToLocalMultiple(t){return g$7(t.map((t=>this.mapToLocal(t))))}get doUnnormalization(){return !1}}class v$4 extends W{constructor(t,r,o=null){super(r),this._defaultZ=o,this.transform=e$4(),this.transformInv=e$4(),this.transform=r$4(t),r$5(this.transformInv,this.transform);}makeMapPoint(t,r){return g$5(t,r,this._defaultZ)}mapToLocal(t){return R$4(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return g$5(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class F$2 extends W{constructor(t,r){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=n$3(),this.tangentFrameUpWS=n$3(),this.tangentFrameRightWS=n$3(),this.tangentFrameForwardWS=n$3(),this.localFrameRightWS=n$3(),this.localFrameUpWS=n$3(),this.worldToLocalTransform=e$5(),this.localToWorldTransform=e$5(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=r,this.defaultZ=r.hasZ?r.z:null;const e=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,n$4.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,n$4.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,n$4.Z,this.tangentFrameForwardWS);const s=n$3();g$6(s,this.tangentFrameForwardWS,P$3(e,this.tangentFrameForwardWS)),e$6(this.localFrameRightWS,e,s),z$4(this.localFrameRightWS,this.localFrameRightWS),_(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),Q(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),O(this.localToWorldTransform,this.worldToLocalTransform);}get doUnnormalization(){return "global"===this.view.viewingMode}makeMapPoint(t,r){return g$5(t,r,this.defaultZ)}mapToLocal(r){const e=n$3();this.view.renderCoordsHelper.toRenderCoords(new b$3({x:r[0],y:r[1],spatialReference:this.spatialReference}),e),E$4(e,e,this.worldToLocalTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return r$3(s)?R$4(s.x/this.scale,s.y/this.scale):null}localToMap(r){const e=n$3();this.view.renderCoordsHelper.toRenderCoords(new b$3({x:r.x*this.scale,y:r.y*this.scale,spatialReference:this.spatialReference}),e),E$4(e,e,this.localToWorldTransform);const s=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return r$3(s)?g$5(s.x,s.y,this.defaultZ):null}}function S$4(t,r){if("2d"===t.type)return new v$4(t.state.transform,t.spatialReference,r.length>2?r[2]:null);if("3d"===t.type){const e=r.length>2?new b$3({x:r[0],y:r[1],z:r[2],spatialReference:t.spatialReference}):new b$3({x:r[0],y:r[1],spatialReference:t.spatialReference});return new F$2(t,e)}return null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function T(t,e){const o=new b$3({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(o.z=t[2]),o}function b$2(t,e){return new m$9({points:t,spatialReference:e})}function U$3(t,e,o){const n=new m$a({paths:t,spatialReference:e});return o&&a$g(n),n}function P$1(o,n,r,a=!0){const s=y$5(o);s.forEach((e=>{const o=e[0],n=e[e.length-1];i$3(o,n)&&1!==e.length||e.push(e[0]);}));let l=new v$6({rings:s,spatialReference:n});return l.rings.forEach((t=>{f$3(t,!1,!1)||t.reverse();})),r&&a$g(l),a&&l.isSelfIntersecting&&I$3(n)&&(l=w$3(l)),l}function w$2(t,e,o){const r=e.mapToLocalMultiple(t),a=[],s={x:r[0].x,y:r[0].y},l={x:r[1].x,y:r[1].y},i=Math.round(l.x-s.x),c=Math.round(l.y-s.y),p=Math.max(Math.abs(i),Math.abs(c));if(o){const t={x:s.x+p,y:s.y+p},e={x:s.x-p,y:s.y-p};a.push(R$4(t.x,e.y),R$4(e.x,e.y),R$4(e.x,t.y),R$4(t.x,t.y));}else {const t={x:i>0?s.x+p:s.x-p,y:c>0?s.y+p:s.y-p};a.push(R$4(s.x,s.y),R$4(t.x,s.y),R$4(t.x,t.y),R$4(s.x,t.y));}return I$2(P$1([g$7(a.map((t=>e.localToMap(t))))],e.spatialReference,e.doUnnormalization,!0),a,e)}function z$3(t,e,o){let r=e.mapToLocalMultiple(t);if(1===r.length){const t=48,e=r[0];r=[R$4(e.x-t,e.y+t),R$4(e.x+t,e.y-t),R$4(e.x+t,e.y-t),R$4(e.x-t,e.y+t)];}const a=[],s={x:r[0].x,y:r[0].y},l={x:r[1].x,y:r[1].y};if(o){const t=Math.round(l.x-s.x),e=Math.round(l.y-s.y);a.push(R$4(s.x-t,s.y-e),R$4(l.x,s.y-e),R$4(l.x,l.y),R$4(s.x-t,l.y));}else a.push(R$4(s.x,s.y),R$4(l.x,s.y),R$4(l.x,l.y),R$4(s.x,l.y));return I$2(P$1([g$7(a.map((t=>e.localToMap(t))))],e.spatialReference,e.doUnnormalization,!0),a,e)}function I$2(t,e,n){const r=L$1(e[3],e[2],n),a=L$1(e[1],e[2],n),s=L$1(e[0],e[1],n),l=L$1(e[0],e[3],n);return {geometry:t,midpoints:r$3(r)&&r$3(a)&&r$3(s)&&r$3(l)?{top:r,right:a,bottom:s,left:l}:null}}function L$1(t,e,n){E$1[0]=t.x,E$1[1]=t.y,E$1[2]=0,k$3[0]=e.x,k$3[1]=e.y,k$3[2]=0,A$1(E$1,E$1,k$3,.5),v$3.x=E$1[0],v$3.y=k$3[1],v$3.z=k$3[2];const r=n.localToMap(v$3);return r$3(r)?T(r,n.spatialReference):null}const v$3=R$4(0,0,0),E$1=n$3(),k$3=n$3();function C$2(t,e,o,n){const s=e.mapToLocalMultiple(t);let l=null,c=null;if(o)l=s[0],c=s[1];else {const t=s[0],e=s[1],o=Math.round(e.x-t.x),n=Math.round(e.y-t.y),r=Math.max(Math.abs(o),Math.abs(n));l=R$4(o>0?t.x+r/2:t.x-r/2,n>0?t.y+r/2:t.y-r/2),c=R$4(Math.abs(o)>Math.abs(n)?l.x-r/2:l.x,Math.abs(o)>Math.abs(n)?l.y:l.y-r/2);}const y=e.localToMap(l),m=e.localToMap(c);if(t$1(y)||t$1(m))return null;e.doUnnormalization&&g$8([[y,m]],e.spatialReference);const h=T(y,e.spatialReference),M=T(m,e.spatialReference),g=$(e.spatialReference);let d=0;if(I$3(e.spatialReference))d=g*f$4(h,M,null);else {const t=l.x-c.x,e=l.y-c.y;d=g*Math.sqrt(t*t+e*e)*(n||1);}const R=new m$b({center:h,radius:d,radiusUnit:"meters",spatialReference:e.spatialReference});return {geometry:P$1(R.rings,R.spatialReference,!1),center:h,edge:M}}function S$3(t,e,r){const a=e.mapToLocalMultiple(t),s=a[0],l=a[1],i=Math.round(l.x-s.x),c=Math.round(l.y-s.y),p=R$4(r?s.x:s.x+i/2,r?s.y:s.y+c/2),y=r?i:i/2,m=r?c:c/2,u=60,x=[],h=2*Math.PI/u;function M(t){const e=Math.cos(t),o=Math.sin(t);return R$4(y*e+p.x,m*o+p.y)}for(let o=0;o<u;o++)x.push(M(o*h));x.push(x[0]);const{spatialReference:g,doUnnormalization:d}=e,R=P$1([g$7(x.map((t=>e.localToMap(t))))],g,d,!1),j=e.localToMap(M(Math.PI/2)),b=e.localToMap(M(0)),U=e.localToMap(M(-Math.PI/2)),w=e.localToMap(M(Math.PI));return {geometry:R,midpoints:r$3(j)&&r$3(b)&&r$3(U)&&r$3(w)?{top:T(j,g),right:T(b,g),bottom:T(U,g),left:T(w,g)}:null}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
var i$2;!function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always";}(i$2||(i$2={}));class e$3{constructor(){this._isToolEditable=!0,this._manipulators=new j$6,this._resourceContexts={manipulator3D:{}},this._attached=!1;}set isToolEditable(t){this._isToolEditable=t;}get length(){return this._manipulators.length}add(t,a=i$2.WhenToolEditable){this.addMany([t],a);}addMany(t,a=i$2.WhenToolEditable){for(const i of t){const t={manipulator:i,visibilityPredicate:a,attached:!1};this._manipulators.add(t),this._attached&&this._updateManipulatorAttachment(t);}}remove(t){for(let a=0;a<this._manipulators.length;a++)if(this._manipulators.getItemAt(a).manipulator===t){const t=this._manipulators.splice(a,1)[0];this._detachManipulator(t);break}}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t);})),this._manipulators.removeAll();}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t);})),this._attached=!0;}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t);})),this._attached=!1;}destroy(){this._manipulators.forEach((({manipulator:t})=>{t.destroy&&t.destroy();})),this._manipulators.destroy(),this._resourceContexts=null;}on(t,a){return this._manipulators.on(t,(t=>{a(t);}))}forEach(t){for(const a of this._manipulators.items)t(a);}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((a=>t.push(a.manipulator))),t}intersect(t,i){let e=null,o=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:s,attached:r})=>{if(!r||!s.interactive)return;const n=s.intersectionDistance(t,i);r$3(n)&&n<o&&(o=n,e=s);})),e}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t);}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0);}_detachManipulator(t){if(!t.attached)return;const a=t.manipulator;a.grabbing=!1,a.dragging=!1,a.hovering=!1,a.selected=!1,a.detach&&a.detach(this._resourceContexts),t.attached=!1;}_isManipulatorItemVisible(t){return t.visibilityPredicate===i$2.Always||(this._isToolEditable?t.visibilityPredicate===i$2.WhenToolEditable:t.visibilityPredicate===i$2.WhenToolNotEditable)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let p$i=class extends f$5{constructor(t){super(t),this.manipulators=new e$3,this.automaticManipulatorSelection=!0,this.hasFocusedManipulators=!1,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[o$2.MANAGER,!0],[o$2.USER,!0]]),this._creationFinishedResolver=D$2();}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible());}get editable(){return this.getEditableFlag(o$2.USER)}set editable(t){this.setEditableFlag(o$2.USER,t);}get updating(){return !1}get cursor(){return null}destroy(){this.manipulators.destroy(),this._set("view",null);}onAdd(){this._syncVisible();}activate(){t$1(this.view)?s$1.getLogger(this.declaredClass).error("Can't activate tool if view is not defined."):(z$5(this.view)&&this.view.focus(),this.onActivate());}deactivate(){this.onDeactivate();}handleInputEvent(t){this.onInputEvent(t);}handleInputEventAfter(t){this.onInputEventAfter(t);}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===o$2.USER&&this.notifyChange("editable"),this.onEditableChange();}getEditableFlag(t){return this._editableFlags.get(t)}whenCreated(){return this._creationFinishedResolver.promise}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(o$2.USER)&&this.getEditableFlag(o$2.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0);}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow();}_hide(){this._updateManipulatorAttachment(),this.onHide();}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach();}};e$7([d$6({constructOnly:!0})],p$i.prototype,"view",void 0),e$7([d$6({readOnly:!0})],p$i.prototype,"active",null),e$7([d$6({value:!0})],p$i.prototype,"visible",null),e$7([d$6({value:!0})],p$i.prototype,"editable",null),e$7([d$6({readOnly:!0})],p$i.prototype,"manipulators",void 0),e$7([d$6({readOnly:!0})],p$i.prototype,"updating",null),e$7([d$6()],p$i.prototype,"cursor",null),e$7([d$6({readOnly:!0})],p$i.prototype,"automaticManipulatorSelection",void 0),e$7([d$6()],p$i.prototype,"hasFocusedManipulators",void 0),e$7([d$6({readOnly:!0})],p$i.prototype,"created",void 0),e$7([d$6({readOnly:!0})],p$i.prototype,"removeIncompleteOnCancel",void 0),p$i=e$7([n$5("esri.views.interactive.InteractiveToolBase")],p$i);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let e$2=class extends f$5{constructor(o){super(o);}};e$7([d$6()],e$2.prototype,"tooltipOptions",void 0),e$2=e$7([n$5("esri.views.interactive.tooltip.SketchTooltipInfo")],e$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let s=class extends e$2{constructor(t){super(t),this.type="draw-point";}};e$7([d$6()],s.prototype,"type",void 0),e$7([d$6()],s.prototype,"elevation",void 0),s=e$7([n$5("esri.views.interactive.tooltip.DrawPointTooltipInfo")],s);let a$d=class extends e$2{constructor(t){super(t),this.type="draw-polyline";}};e$7([d$6()],a$d.prototype,"type",void 0),e$7([d$6()],a$d.prototype,"elevation",void 0),e$7([d$6()],a$d.prototype,"totalLength",void 0),a$d=e$7([n$5("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],a$d);let l$5=class extends e$2{constructor(t){super(t),this.type="draw-polygon";}};e$7([d$6()],l$5.prototype,"type",void 0),e$7([d$6()],l$5.prototype,"elevation",void 0),e$7([d$6()],l$5.prototype,"area",void 0),l$5=e$7([n$5("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],l$5);let n$2=class extends e$2{constructor(t){super(t),this.type="draw-rectangle",this.xSize=j$5,this.ySize=j$5,this.area=U$4;}};e$7([d$6()],n$2.prototype,"type",void 0),e$7([d$6()],n$2.prototype,"xSize",void 0),e$7([d$6()],n$2.prototype,"ySize",void 0),e$7([d$6()],n$2.prototype,"area",void 0),n$2=e$7([n$5("esri.views.interactive.tooltip.DrawRectangleTooltipInfo")],n$2);let c$b=class extends e$2{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=U$4;}};e$7([d$6()],c$b.prototype,"type",void 0),e$7([d$6()],c$b.prototype,"radius",void 0),e$7([d$6()],c$b.prototype,"xSize",void 0),e$7([d$6()],c$b.prototype,"ySize",void 0),e$7([d$6()],c$b.prototype,"area",void 0),c$b=e$7([n$5("esri.views.interactive.tooltip.DrawCircleTooltipInfo")],c$b);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const t="esri-tooltip",o=`${t}-content`;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function g$4(t,a,n,u=2,i="abbr"){return g$9(t,v$5(a,n).value,n,u,i)}function L(t,e,n,u=2,i="abbr"){return p$k(t,v$5(e,n).value,n,u,i)}function M$2(t,r,e=2,a="abbr"){return D$3(t,r.value,r.unit,e,a)}function d$5(t,r,e=2,a="abbr"){return x$5(t,r.value,r.unit,e,a)}function w$1(t,r,e=2,a="abbr"){return y$6(t,r.value,r.unit,e,a)}function I$1(t,r,e=2,a="abbr"){return F$3(t,r.value,r.unit,e,a)}function R$3(t,r,e=2,a="abbr"){return M$3(t,r.value,r.unit,e,a)}function y$3(t,r,e=2,a="abbr"){return h$6(t,r.value,r.unit,e,a)}function V$1(t,r,e=2,a="abbr"){return d$7(t,r.value,r.unit,e,a)}function j$4(t,r,e=2,a="abbr"){return j$7(t,r.value,r.unit,e,a)}function D$1(t,r,e=2,a="abbr"){return B(t,r.value,r.unit,e,a)}function A(t,r,e=2,a="abbr"){return $$1(t,r.value,r.unit,e,a)}function U$2(t,r,e){return w$4(t.value,t.unit,t.rotationType,r,e)}function q$2(t,r,e){return Z$2(t.value,t.unit,t.rotationType,r,e)}function x$4(r,e,a,n,u="abbr"){switch(n=c$d(n,2),a){case"imperial":return y$3(r,e,n,u);case"metric":return M$2(r,e,n,u);default:return g$4(r,e,a,n,u)}}function F$1(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return V$1(t,r,a,n);case"metric":return d$5(t,r,a,n);default:return L(t,r,e,a,n)}}function S$2(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return j$4(t,r,a,n);case"metric":return w$1(t,r,a,n);default:return g$4(t,r,e,a,n)}}function k$2(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return D$1(t,r,a,n);case"metric":return I$1(t,r,a,n);default:return L(t,r,e,a,n)}}function z$2(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return A(t,r,a,n);case"metric":return R$3(t,r,a,n);default:return g$4(t,r,e,a,n)}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let g$3=class extends M$4{constructor(){super(...arguments),this._messagesUnits=null,this._messagesTooltip=null;}get _units(){const t=ue(this.tooltip.view);return {length:t,verticalLength:t,area:t}}_formatScale(t){return m$c(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return m$c(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,r,i){return x$4(this._messagesUnits,t,c$d(r,this._units.length),i)}_formatRelativeLength(t){return F$1(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return S$2(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return k$2(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return x$4(this._messagesUnits,t,this._units.length)}_formatArea(t){return z$2(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return m$c(t.value,{style:"percent"})}};e$7([d$6()],g$3.prototype,"info",void 0),e$7([d$6()],g$3.prototype,"tooltip",void 0),e$7([d$6()],g$3.prototype,"_units",null),e$7([e$8("esri/core/t9n/Units"),d$6()],g$3.prototype,"_messagesUnits",void 0),e$7([e$8("esri/views/interactive/tooltip/t9n/Tooltip"),d$6()],g$3.prototype,"_messagesTooltip",void 0),g$3=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContent")],g$3);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$h=`${t}-field`,a$c={base:p$h,title:`${p$h}__title`,value:`${p$h}__value`};let c$a=class extends M$4{render(){return n$6("div",{class:a$c.base},n$6("div",{class:a$c.title},this.title),n$6("div",{class:a$c.value},this.value))}};e$7([d$6()],c$a.prototype,"title",void 0),e$7([d$6()],c$a.prototype,"value",void 0),c$a=e$7([n$5("esri.views.interactive.tooltip.support.TooltipField")],c$a);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$g={base:`${t}-value-by-value`};let a$b=class extends M$4{constructor(){super(...arguments),this.divider="×";}render(){return n$6("div",{class:p$g.base},n$6("span",null,this.left),n$6("span",null,this.divider),n$6("span",null,this.right))}};e$7([d$6()],a$b.prototype,"left",void 0),e$7([d$6()],a$b.prototype,"divider",void 0),e$7([d$6()],a$b.prototype,"right",void 0),a$b=e$7([n$5("esri.views.interactive.tooltip.support.ValueByValue")],a$b);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const m$8={base:`${o} ${`${o}--draw-rectangle`}`};let l$4=class extends g$3{render(){const{area:t,radius:s,xSize:o,ySize:e,tooltipOptions:l}=this.info,{visibleElements:c}=l,n=this._messagesTooltip?.sketch;return n$6("div",{class:m$8.base},c.radius&&r$3(s)&&n$6(c$a,{title:n?.radius,value:this._formatLength(s)}),c.size&&r$3(o)&&r$3(e)&&n$6(c$a,{title:n?.size,value:n$6(a$b,{left:this._formatLength(o),right:this._formatLength(e)})}),c.area&&n$6(c$a,{title:n?.area,value:this._formatArea(t)}))}};l$4=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],l$4);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$f={base:`${o} ${`${o}--draw-point`}`};let c$9=class extends g$3{render(){const{elevation:o}=this.info,t=this._messagesTooltip?.sketch;return n$6("div",{class:p$f.base},n$6(c$a,{title:t?.elevation,value:this._formatVerticalLength(o)}))}};c$9=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],c$9);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$e={base:`${o} ${`${o}--draw-polygon`}`};let a$a=class extends g$3{render(){const{area:o,elevation:t}=this.info,r=this._messagesTooltip?.sketch;return n$6("div",{class:p$e.base},n$6(c$a,{title:r?.elevation,value:this._formatVerticalLength(t)}),n$6(c$a,{title:r?.area,value:this._formatArea(o)}))}};a$a=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],a$a);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$d={base:`${o} ${`${o}--draw-polyline`}`};let a$9=class extends g$3{render(){const{elevation:t,totalLength:o}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$d.base},n$6(c$a,{title:s?.elevation,value:this._formatVerticalLength(t)}),n$6(c$a,{title:s?.totalLength,value:this._formatLength(o)}))}};a$9=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],a$9);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const m$7={base:`${o} ${`${o}--draw-rectangle`}`};let c$8=class extends g$3{render(){const{area:t,xSize:r,ySize:s,tooltipOptions:e}=this.info,{visibleElements:c}=e,l=this._messagesTooltip?.sketch;return n$6("div",{class:m$7.base},c.size&&r$3(r)&&r$3(s)&&n$6(c$a,{title:l?.size,value:n$6(a$b,{left:this._formatLength(r),right:this._formatLength(s)})}),c.area&&n$6(c$a,{title:l?.area,value:this._formatArea(t)}))}};c$8=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],c$8);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$c={base:`${o} ${`${o}--extent-rotate`}`};let a$8=class extends g$3{render(){const{angle:t}=this.info,o=this._messagesTooltip?.sketch;return n$6("div",{class:p$c.base},n$6(c$a,{title:o?.rotation,value:this._formatRelativeOrientation(t)}))}};a$8=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],a$8);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const a$7={base:`${o} ${`${o}--extent-scale`}`};let c$7=class extends g$3{render(){const{xScale:t,yScale:s,xSize:e,ySize:o}=this.info,c=this._messagesTooltip?.sketch;return n$6("div",{class:a$7.base},n$6(c$a,{title:c?.size,value:n$6(a$b,{left:this._formatLength(e),right:this._formatLength(o)})}),n$6(c$a,{title:c?.scale,value:n$6(a$b,{left:this._formatScale(t),right:this._formatScale(s)})}))}};c$7=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],c$7);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$b={base:`${o} ${`${o}--reshape-edge-offset`}`};let c$6=class extends g$3{render(){const{distance:s}=this.info,t=this._messagesTooltip?.sketch;return n$6("div",{class:p$b.base},n$6(c$a,{title:t?.distance,value:this._formatRelativeLength(s)}))}};c$6=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],c$6);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$a={base:`${o} ${`${o}--transform-absolute`}`};let a$6=class extends g$3{render(){const{orientation:o,orientationEnabled:s,orientationPrecision:r,rotationType:e,size:a,sizeEnabled:c,sizeUnit:m,sizePrecision:l}=this.info,j=this._messagesTooltip?.sketch;return n$6("div",{class:p$a.base},s&&n$6(c$a,{title:j?.orientation,value:U$2(o,e,r)}),c&&n$6(c$a,{title:j?.size,value:this._formatLength(a,m,l)}))}};a$6=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],a$6);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const n$1={base:`${o} ${`${o}--transform-rotate`}`};let c$5=class extends g$3{render(){const{rotation:o,rotationPrecision:s,orientation:i,orientationPrecision:e,rotationType:c}=this.info,m=this._messagesTooltip?.sketch;return n$6("div",{class:n$1.base},n$6(c$a,{title:m?.rotation,value:q$2(o,c,s)}),n$6(c$a,{title:m?.orientation,value:U$2(i,c,e)}))}};c$5=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],c$5);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$9={base:`${o} ${`${o}--transform-scale`}`};let c$4=class extends g$3{render(){const{scale:s,size:t,sizePrecision:o,sizeUnit:r}=this.info,c=this._messagesTooltip?.sketch;return n$6("div",{class:p$9.base},n$6(c$a,{title:c?.scale,value:this._formatPercentage(s)}),n$6(c$a,{title:c?.size,value:this._formatLength(t,r,o)}))}};c$4=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],c$4);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$8={base:`${o} ${`${o}--translate-graphic`}`};let c$3=class extends g$3{render(){const{distance:s}=this.info,t=this._messagesTooltip?.sketch;return n$6("div",{class:p$8.base},n$6(c$a,{title:t?.distance,value:this._formatLength(s)}))}};c$3=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],c$3);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$7={base:`${o} ${`${o}--translate-graphic-xy`}`};let a$5=class extends g$3{render(){const{distance:t}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$7.base},n$6(c$a,{title:s?.distance,value:this._formatRelativeLength(t)}))}};a$5=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],a$5);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$6={base:`${o} ${`${o}--translate-graphic-z`}`};let a$4=class extends g$3{render(){const{distance:t}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$6.base},n$6(c$a,{title:s?.distance,value:this._formatRelativeVerticalLength(t)}))}};a$4=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],a$4);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$5={base:`${o} ${`${o}--translate-vertex`}`};let l$3=class extends g$3{render(){const{area:t,distance:o,elevation:r,totalLength:s}=this.info,l=this._messagesTooltip?.sketch;return n$6("div",{class:p$5.base},n$6(c$a,{title:l?.distance,value:this._formatLength(o)}),r$3(r)&&n$6(c$a,{title:l?.elevation,value:this._formatVerticalLength(r)}),r$3(t)&&n$6(c$a,{title:l?.area,value:this._formatArea(t)}),r$3(s)&&n$6(c$a,{title:l?.totalLength,value:this._formatLength(s)}))}};l$3=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],l$3);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$4={base:`${o} ${`${o}--translate-vertex`}`};let l$2=class extends g$3{render(){const{area:t,distance:o,elevation:r,totalLength:s}=this.info,l=this._messagesTooltip?.sketch;return n$6("div",{class:p$4.base},n$6(c$a,{title:l?.distance,value:this._formatRelativeLength(o)}),r$3(r)&&n$6(c$a,{title:l?.elevation,value:this._formatVerticalLength(r)}),r$3(t)&&n$6(c$a,{title:l?.area,value:this._formatArea(t)}),r$3(s)&&n$6(c$a,{title:l?.totalLength,value:this._formatLength(s)}))}};l$2=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],l$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const p$3={base:`${o} ${`${o}--translate-vertex`}`};let c$2=class extends g$3{render(){const{distance:t,elevation:o}=this.info,s=this._messagesTooltip?.sketch;return n$6("div",{class:p$3.base},n$6(c$a,{title:s?.distance,value:this._formatRelativeVerticalLength(t)}),r$3(o)&&n$6(c$a,{title:s?.elevation,value:this._formatVerticalLength(o)}))}};c$2=e$7([n$5("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],c$2);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function x$3(x,d){if(t$1(d))return null;const g=document.createElement("div");switch(d.type){case"draw-point":return new c$9({tooltip:x,info:d,container:g});case"draw-polygon":return new a$a({tooltip:x,info:d,container:g});case"draw-polyline":return new a$9({tooltip:x,info:d,container:g});case"draw-rectangle":return new c$8({tooltip:x,info:d,container:g});case"draw-circle":return new l$4({tooltip:x,info:d,container:g});case"extent-rotate":return new a$8({tooltip:x,info:d,container:g});case"extent-scale":return new c$7({tooltip:x,info:d,container:g});case"transform-absolute":return new a$6({tooltip:x,info:d,container:g});case"transform-rotate":return new c$5({tooltip:x,info:d,container:g});case"transform-scale":return new c$4({tooltip:x,info:d,container:g});case"translate-graphic":return new c$3({tooltip:x,info:d,container:g});case"translate-graphic-z":return new a$4({tooltip:x,info:d,container:g});case"translate-graphic-xy":return new a$5({tooltip:x,info:d,container:g});case"translate-vertex":return new l$3({tooltip:x,info:d,container:g});case"translate-vertex-z":return new c$2({tooltip:x,info:d,container:g});case"translate-vertex-xy":return new l$2({tooltip:x,info:d,container:g});case"reshape-edge-offset":return new c$6({tooltip:x,info:d,container:g})}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const h$5={base:`${t}`};let m$6=class extends f$5{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(h$5.base),t})(),this._contentWidget=null;}initialize(){const t=this._contentContainer;this.addHandles([l$6((()=>this.view.overlay?.surface),(o=>{t.remove(),o$3(o,(o=>o.appendChild(t)));}),w$5),l$6((()=>this.info),((o,s)=>{r$3(this._contentWidget)&&r$3(o)&&r$3(s)&&o.type===s.type?this._contentWidget.info=o:(this._contentWidget=l$7(this._contentWidget),o$3(x$3(this,o),(o=>{this._contentWidget=o,t.appendChild(o.container);})));}),w$5),l$6((()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this.view.inputManager?.latestPointerLocation})),u$1,w$5)]);}destroy(){this._contentWidget=l$7(this._contentWidget),this._contentContainer.remove();}clear(){this.info=null;}get test(){return {contentContainer:this._contentContainer}}};function u$1({container:t,contentWidget:o,screenPoint:e}){const{style:i}=t;if(r$3(e)&&r$3(o)){i.display="block";const o=f$6(t),n=`translate(${Math.round(e.x)+f$2[0]*(o?-1:1)}px, ${Math.round(e.y)+f$2[1]}px)`;i.transform=o?`translate(-100%, 0) ${n}`:n;}else i.display="none";}e$7([d$6({nonNullable:!0})],m$6.prototype,"view",void 0),e$7([d$6()],m$6.prototype,"info",void 0),e$7([d$6()],m$6.prototype,"_contentContainer",void 0),e$7([d$6()],m$6.prototype,"_contentWidget",void 0),m$6=e$7([n$5("esri.views.interactive.tooltip.Tooltip")],m$6);const f$2=[20,20];

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function i$1(i){const m=O$1(i),n=m===I$4?p$l:m;return An(i,n)?n:i}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function h$4(t,r=d$4()){return y$2(t,r)}function j$3(t,r=d$4()){return y$2(t,r,!1)}function y$2(e,h,j=e.hasZ){const y=i$1(e.spatialReference),d=se(y);if(t$1(d))return null;const R=(t,r)=>!(r.length<2)&&(o$4(t,r[0],r[1],j&&r[2]||0),!0);let U=0;for(const t of e.rings){if(t.length<3)continue;const{positionsWorldCoords:r}=h;for(;r.length<t.length;)r.push(n$3());const o=k$1;for(let n=0;n<3;n++){if(!R(o,t[n]))return null;if(!Bn(o,e.spatialReference,r[n],y))return null}if(F$4(r[0],r[1])||F$4(r[0],r[2])||F$4(r[1],r[2]))continue;const i=j$8(r[0],r[1],r[2],E$5()),g=r$6(c$e.get(),r[0]);for(let t=0;t<3;t++)K(i,g,r[t],r[t]);for(let n=3;n<t.length;n++){if(!R(o,t[n]))return null;Bn(o,e.spatialReference,r[n],y),K(i,g,r[n],r[n]);}const j=v$2(r);for(let t=0;t<j.length;t+=3)U+=S$5(r[j[t]],r[j[t+1]],r[j[t+2]]);}return a$e(U,d)}const k$1=n$3();function d$4(){return {positionsWorldCoords:[]}}function v$2(t){return x$6(R$2(t),[],2)}function R$2(t){const r=new Float64Array(2*t.length);for(let o=0;o<t.length;++o){const e=t[o],n=2*o;r[n+0]=e[0],r[n+1]=e[1];}return r}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function r$1(r,t,i,s,...l){return o$5(r)&&M$5(r)?t.apply(void 0,l):k$4(r)?i.apply(void 0,l):s.apply(void 0,l)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function m$5(e){const{spatialReference:r}=e;return r$1(r,i,a$3,u,e)}function i(r){return a$e(Math.abs(w$6([r],"square-meters")[0]),"square-meters")}function a$3(t){try{return a$e(Math.abs(q$3(t,"square-meters")),"square-meters")}catch(s){return null}}function u(r){const o=[];return hn(r,o)?a$e(Math.abs(w$6([{type:"polygon",rings:o,spatialReference:k$5.WGS84}],"square-meters")[0]),"square-meters"):null}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function m$4(m,s,n=d$4()){if(s){const t=m$5(m);return r$3(t)?t:j$3(m,n)}return h$4(m,n)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
var f$1;function p$2(t){return m$3(t,f$1.Direct)}function h$3(t){return m$3(t,f$1.Horizontal)}function m$3(t,i){const{hasZ:o,spatialReference:c}=t,u=i$1(c);let l=0;const a=Z$3(u);if(t$1(a))return null;const p=i===f$1.Direct?j$2:d$3;for(const r of t.paths){if(r.length<2)continue;const t=r.length-1;for(let e=0;e<t;++e){const t=r[e];U$1[0]=t[0],U$1[1]=t[1],U$1[2]=o?t[2]:0;const i=r[e+1];b$1[0]=i[0],b$1[1]=i[1],b$1[2]=o?i[2]:0;const u=p(U$1,b$1,c);if(t$1(u))return null;l+=u.value;}}return o$1(l,a)}function R$1(t,n){const{spatialReference:r}=t;return E$2(r,n.spatialReference)?(U$1[0]=t.x,U$1[1]=t.y,U$1[2]=t.hasZ?t.z:0,b$1[0]=n.x,b$1[1]=n.y,b$1[2]=n.hasZ?n.z:0,d$3(U$1,b$1,r)):null}function v$1(t,n){const{spatialReference:r}=t;return E$2(r,n.spatialReference)?(U$1[0]=t.x,U$1[1]=t.y,U$1[2]=t.hasZ?t.z:0,b$1[0]=n.x,b$1[1]=n.y,b$1[2]=n.hasZ?n.z:0,D(U$1,b$1,r)):null}function x$2(t){return U$1[0]=t.x,U$1[1]=t.y,U$1[2]=t.hasZ?t.z:0,H$1(U$1,t.spatialReference)}function j$2(n,e,i){const o=V(n,e,i,f$1.Direct);return r$3(o)?o$1(o.direct,o.unit):null}function d$3(n,e,i){const o=V(n,e,i,f$1.Horizontal);return r$3(o)?o$1(o.horizontal,o.unit):null}function D(n,e,i){const o=V(n,e,i,f$1.Vertical);return r$3(o)?o$1(o.verticalSigned,o.unit):null}function H$1(n,e){const o=ee(e);return r$3(o)?o$1(n[2],o):null}function V(t,r,i,u){const a=i$1(i),p=Z$3(a);if(t$1(p))return null;const h=r[2]-t[2];if(u===f$1.Vertical)return {verticalSigned:h,unit:p};if(!Bn(t,i,S$1,a)||!Bn(r,i,k,a))return null;if(u===f$1.Direct){return {direct:x$7(k,S$1),unit:p}}if(o$4(M$1,t[0],t[1],r[2]),!Bn(M$1,i,M$1,a))return null;const m=x$7(M$1,k);if(u===f$1.Horizontal)return {horizontal:m,unit:p};return {direct:x$7(k,S$1),horizontal:m,vertical:Math.abs(h),unit:p}}!function(t){t[t.Direct=0]="Direct",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical";}(f$1||(f$1={}));const U$1=n$3(),b$1=n$3(),S$1=n$3(),k=n$3(),M$1=n$3();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function f(e){const{spatialReference:t}=e;return r$1(t,y$1,j$1,d$2,e)}function m$2(e,t){if(!E$2(e.spatialReference,t.spatialReference))return null;const{spatialReference:r}=e;return U[0]=e.x,U[1]=e.y,U[2]=e.hasZ?e.z:0,x$1[0]=t.x,x$1[1]=t.y,x$1[2]=t.hasZ?t.z:0,l$1(U,x$1,r)}function l$1(e,t,r){return r$1(r,a$2,p$1,g$2,e,t,r)}function a$2(t,r,n){return o$1(z$6(R,t,r,n).distance,"meters")}function p$1(t,n,o){return o$1(C$3(h$2(t,n,o),"meters"),"meters")}function g$2(t,r,o){return yn(t,o,z$1)&&yn(r,o,Z$1)?o$1(z$6(R,z$1,Z$1).distance,"meters"):null}function y$1(t){return o$1(y$7([t],"meters")[0],"meters")}function j$1(t){return o$1(C$3(t,"meters"),"meters")}function d$2(t){const r=[];if(!Gn(t,r))return null;let n=0;for(const e of r){let t=0;for(let r=1;r<e.length;++r)t+=z$6(R,e[r-1],e[r]).distance;n+=t;}return o$1(n,"meters")}function h$2(e,t,r){return {type:"polyline",spatialReference:r,paths:[[[...e],[...t]]]}}const R={distance:null},U=n$3(),x$1=n$3(),z$1=n$3(),Z$1=n$3();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function m$1(n,e){return g$1(p$2,f,h$3,e,n)}function a$1(n,r,t,e){return g$1(j$2,l$1,d$3,e,n,r,t)}function d$1(n,r,t){return g$1(R$1,m$2,R$1,t,n,r)}function l(n,r,t,e){return g$1(d$3,l$1,d$3,e,n,r,t)}function g$1(r,t,e,o,...i){if("on-the-ground"===o){const r=t.apply(void 0,i);return r$3(r)?r:e.apply(void 0,i)}return r.apply(void 0,i)}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function a(n,s){const i=t=>m$1(t,s),a=(t,r,e)=>a$1(t,r,e,s),m=i(n),p=n.paths[0]?.[n.paths[0]?.length-1]??null,{hasZ:l,spatialReference:f}=n,h=p?r$7(p[0],p[1],l?p[2]:0):null;return e=>{if(t$1(e)||t$1(m)||t$1(h))return m;c$1[0]=e.x,c$1[1]=e.y,c$1[2]=l?e.z:0;const n=a(h,c$1,f);return t$1(n)?m:o$1(m.value+n.value,m.unit)}}function m(r,e){const n=d$4(),o=t=>m$4(t,e,n);return e=>{if(t$1(e)||r.rings.length<1||r.rings[0].length<2)return o(r);const n=r.clone();return n.rings[0].push([e.x,e.y]),o(n)}}const c$1=n$3();

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let F=class extends(a$h(n$7.EventedMixin(p$i))){constructor(t){super(t),this._graphic=null,this._createOperationGeometry=null,this._tooltipContext={calculateTotalLength:null,calculateArea:null},this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.labelOptions=new c$f,this.mode=null,this.snappingManager=null,this.snapToScene=!1,this.tooltip=null,this.tooltipOptions=new r$8;}initialize(){this.internalGraphicsLayer=new h$7({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(t=>this.onVertexAdd(t))),this.drawOperation.on("vertex-remove",(t=>this.onVertexRemove(t))),this.drawOperation.on("vertex-update",(t=>this.onVertexUpdate(t))),this.drawOperation.on("cursor-update",(t=>this.onCursorUpdate(t))),this.drawOperation.on("complete",(t=>this.onComplete(t))),this.drawOperation.on(["vertex-add","vertex-update","vertex-remove"],(()=>{this._tooltipContext={calculateArea:this._calculateAreaFunction,calculateTotalLength:this._calculateTotalLengthFunction};})),l$6((()=>this.tooltipOptions.enabled),(t=>{this.tooltip=t?new m$6({view:this.view,info:this._tooltipInfo}):l$7(this.tooltip);}),w$5),l$6((()=>this._tooltipInfo),(t=>{r$3(this.tooltip)&&(this.tooltip.info=t);}),w$5)]),this.finishToolCreation();}destroy(){this.drawOperation=l$7(this.drawOperation),this.tooltip=l$7(this.tooltip),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=l$7(this.internalGraphicsLayer),this._set("view",null);}get _defaultElevation(){return o$1(this.defaultZ,"meters")}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic();}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t);}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic();}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),r$3(this._graphic)&&(this._graphic.symbol=t);}get updating(){return this.drawOperation?.updating??!1}completeCreateOperation(){this.drawOperation.complete();}onInputEvent(t){this.drawOperation.onInputEvent(t);}redo(){this.drawOperation.redo();}reset(){}undo(){this.drawOperation.undo();}_createGraphic(t){this._graphic=new g$a({...this.graphicProperties,geometry:t,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(n$8((()=>{r$3(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=l$7(this._graphic));})),Z);}_destroyAllVisualisations(){this.handles.remove(H.outline),this.handles.remove(H.regularVertices),this.handles.remove(H.activeVertex),this.handles.remove(Z);}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const e=this.drawOperation.stagedVertex,i=this.drawOperation.committedVertices,o=i.slice();r$3(e)&&o.push(this.drawOperation.coordinateHelper.pointToArray(e));const r=r$3(e)?this.drawOperation.coordinateHelper.pointToArray(e):i.splice(-1)[0],n={regularVertices:null,activeVertex:null,full:null,outline:null,circle:null,rectangle:null},a=o.length,s=this.view.spatialReference,p="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":n.regularVertices=i,n.activeVertex=r,n.full=this.drawOperation.coordinateHelper.arrayToPoint(o[0]);break;case"multipoint":n.regularVertices=i,n.activeVertex=r,a>0&&(n.full=b$2(o,s));break;case"polyline":n.regularVertices=i,n.activeVertex=r,a>0&&(n.full=U$3([o],s,p));break;case"polygon":n.regularVertices=i,n.activeVertex=r,a>0&&(n.full=P$1([o],s,p,!0));break;case"circle":if(a>0){const e=S$4(this.view,o[0]);if(1===a&&t.operationComplete){const t=o[0],i=e.makeMapPoint(t[0]+q$1*this.view.resolution,t[1]);n.circle=C$2([t,i],e,!0),n.full=r$3(n.circle)?n.circle.geometry:null;}else 2===a&&(this.forceUniformSize?(n.circle=C$2(o,e,this.centered),n.full=r$3(n.circle)?n.circle.geometry:null):(n.rectangle=S$3(o,e,this.centered),n.full=n.rectangle.geometry));}break;case"rectangle":if(a>0){const e=S$4(this.view,o[0]);if(1===a&&t.operationComplete){const t=o[0],i=e.makeMapPoint(t[0]+q$1*this.view.resolution,t[1]);n.rectangle=w$2([t,i],e,!0),n.full=n.rectangle.geometry;}else 2===a&&(n.rectangle=this.forceUniformSize?w$2(o,e,this.centered):z$3(o,e,this.centered),n.full=n.rectangle.geometry);}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":a>1&&(n.outline=U$3([o],s,p));break;case"circle":case"rectangle":r$3(n.full)&&"polygon"===n.full.type&&(n.outline=P$1(n.full.rings,s,p));}return n}initializeGraphic(t){return null}onComplete(t){this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});r$3(t)&&(t$1(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full,e=e$9(this._graphic).clone());}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t});}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t);}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel();}onVertexAdd(t){this._updateGraphic(),this.emit("vertex-add",t);}onVertexRemove(t){this._updateGraphic(),this.emit("vertex-remove",t);}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t);}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,t$1(t)?this._destroyAllVisualisations():(r$3(t.outline)?this.handles.add(this.onOutlineChanged(t.outline),H.outline):this.handles.remove(H.outline),r$3(t.regularVertices)?this.handles.add(this.onRegularVerticesChanged(t.regularVertices),H.regularVertices):this.handles.remove(H.regularVertices),r$3(t.activeVertex)?this.handles.add(this.onActiveVertexChanged(t.activeVertex),H.activeVertex):this.handles.remove(H.activeVertex),r$3(t.full)?t$1(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full:this.handles.remove(Z));}get _tooltipInfo(){const{drawOperation:t}=this;if(!t)return null;switch(this.geometryType){case"point":return this._drawPointTooltipInfo;case"polyline":return this._drawPolylineTooltipInfo;case"polygon":return this._drawPolygonTooltipInfo;case"rectangle":return this._drawRectangleTooltipInfo;case"circle":return this._drawCircleTooltipInfo;default:return null}}get _drawPointTooltipInfo(){const t=o$3(this.graphic,(t=>t.geometry));return t$1(t)||"point"!==t.type?null:new s({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail})}get _drawPolylineTooltipInfo(){const t=this._tooltipContext.calculateTotalLength;if(t$1(t))return null;const e=t(this.drawOperation.stagedOrLastVertex);return new a$d({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,totalLength:c$d(e,j$5)})}get _calculateTotalLengthFunction(){const{drawOperation:t}=this,e=this._geometry;return t$1(t)||t$1(e)||"polyline"!==e.type?null:a(e,this._lengthElevationMode)}get _drawPolygonTooltipInfo(){const t=this._tooltipContext.calculateArea;if(t$1(t))return null;const e=t(this.drawOperation.stagedOrLastVertex);return new l$5({tooltipOptions:this.tooltipOptions,elevation:this._elevationTooltipDetail,area:c$d(e,U$4)})}get _calculateAreaFunction(){const t=this._geometry;return t$1(this.drawOperation)||t$1(t)||"polygon"!==t.type?null:m(t,this.drawOperation.isDraped)}get _drawRectangleTooltipInfo(){return t$1(this.drawOperation)?null:new n$2({tooltipOptions:this.tooltipOptions,xSize:c$d(this._xSize,j$5),ySize:c$d(this._ySize,j$5),area:c$d(this._fullGeometryArea,U$4)})}get _drawCircleTooltipInfo(){if(t$1(this.drawOperation))return null;const t=this.forceUniformSize;return new c$b({tooltipOptions:this.tooltipOptions,radius:t?c$d(this._circleRadius,j$5):null,xSize:t?null:c$d(this._xSize,j$5),ySize:t?null:c$d(this._ySize,j$5),area:c$d(this._fullGeometryArea,U$4)})}get _circleRadius(){const t=this._createOperationGeometry;return r$3(t)&&r$3(t.circle)&&r$3(t.circle.center)&&r$3(t.circle.edge)?d$1(t.circle.center,t.circle.edge,this._lengthElevationMode):null}get _xSize(){const t=this._createOperationGeometry;if(t$1(t)||t$1(t.rectangle))return null;const{midpoints:e}=t.rectangle;return r$3(e)?d$1(e.left,e.right,this._lengthElevationMode):null}get _ySize(){const t=this._createOperationGeometry;if(t$1(t)||t$1(t.rectangle))return null;const{midpoints:e}=t.rectangle;return r$3(e)?d$1(e.top,e.bottom,this._lengthElevationMode):null}get _fullGeometryArea(){const{drawOperation:t}=this;if(t$1(t))return null;const e=this._createOperationGeometry,i=r$3(e)?e.full:null;return r$3(i)&&"polygon"===i.type?m(i,t.isDraped)(null):null}get _elevationTooltipDetail(){return {mode:this.drawOperation.elevationInfo.mode,...this._vertexTooltipElevation}}get _vertexTooltipElevation(){const{tooltipOptions:t,view:e,drawOperation:i}=this;if(t$1(i))return this._defaultElevation;const{stagedVertex:o,elevationInfo:r}=i;if(t$1(o)||"2d"===e.type)return this._defaultElevation;const n=v$7(e,o,r,{mode:t.elevation.mode,offset:0})*L$2(o.spatialReference);return o$1(n,"meters")}get _lengthElevationMode(){return this.drawOperation.isDraped?"on-the-ground":"absolute-height"}get _geometry(){const{graphic:t}=this;return r$3(t)?t.geometry:null}};e$7([d$6()],F.prototype,"_createOperationGeometry",void 0),e$7([d$6()],F.prototype,"_defaultElevation",null),e$7([d$6()],F.prototype,"_tooltipContext",void 0),e$7([d$6({value:!0})],F.prototype,"centered",null),e$7([d$6({nonNullable:!0})],F.prototype,"defaultZ",void 0),e$7([d$6()],F.prototype,"drawOperation",void 0),e$7([d$6({value:!0})],F.prototype,"enabled",null),e$7([d$6({value:!0})],F.prototype,"forceUniformSize",null),e$7([d$6({constructOnly:!0})],F.prototype,"geometryType",void 0),e$7([d$6()],F.prototype,"graphic",null),e$7([d$6({constructOnly:!0})],F.prototype,"graphicProperties",void 0),e$7([d$6()],F.prototype,"graphicSymbol",null),e$7([d$6({constructOnly:!0})],F.prototype,"hasZ",void 0),e$7([d$6({constructOnly:!0,type:c$f})],F.prototype,"labelOptions",void 0),e$7([d$6({constructOnly:!0})],F.prototype,"mode",void 0),e$7([d$6()],F.prototype,"snappingManager",void 0),e$7([d$6()],F.prototype,"snapToScene",void 0),e$7([d$6()],F.prototype,"tooltip",void 0),e$7([d$6({constructOnly:!0,type:r$8})],F.prototype,"tooltipOptions",void 0),e$7([d$6({readOnly:!0})],F.prototype,"type",void 0),e$7([d$6({readOnly:!0})],F.prototype,"updating",null),e$7([d$6({constructOnly:!0,nonNullable:!0})],F.prototype,"view",void 0),e$7([d$6()],F.prototype,"_tooltipInfo",null),e$7([d$6()],F.prototype,"_drawPointTooltipInfo",null),e$7([d$6()],F.prototype,"_drawPolylineTooltipInfo",null),e$7([d$6()],F.prototype,"_calculateTotalLengthFunction",null),e$7([d$6()],F.prototype,"_drawPolygonTooltipInfo",null),e$7([d$6()],F.prototype,"_calculateAreaFunction",null),e$7([d$6()],F.prototype,"_drawRectangleTooltipInfo",null),e$7([d$6()],F.prototype,"_drawCircleTooltipInfo",null),e$7([d$6()],F.prototype,"_circleRadius",null),e$7([d$6()],F.prototype,"_xSize",null),e$7([d$6()],F.prototype,"_ySize",null),e$7([d$6()],F.prototype,"_fullGeometryArea",null),e$7([d$6()],F.prototype,"_elevationTooltipDetail",null),e$7([d$6()],F.prototype,"_vertexTooltipElevation",null),e$7([d$6()],F.prototype,"_lengthElevationMode",null),e$7([d$6()],F.prototype,"_geometry",null),F=e$7([n$5("esri.views.draw.DrawGraphicTool")],F);const Z="create-operation-graphic",H={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function N(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return "segment";default:return null}}const q$1=48;

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const e$1="click";

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
class e{constructor({grabbableForEvent:e}){this.events=new n$7,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e;}intersectionDistance(t,e){return 0}attach(){}detach(){}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function p(t,n){let e=null,a=null;return s=>{if("cancel"===s.action)return void(r$3(a)&&(a.execute({action:"cancel"}),e=null,a=null));const c={action:s.action,screenStart:s.start,screenEnd:s.screenPoint};"start"===s.action&&t$1(e)&&(e=new P,a=new P,n(t,e,a,s.pointerType,c)),r$3(e)&&e.execute(c),"end"===s.action&&r$3(e)&&(e=null,a=null);}}function y(t,n){return t.events.on("drag",p(t,n))}function x(t,n){const e=[t.x,t.y,t.z],r=n,o=[Math.cos(r),Math.sin(r)],a=Math.sqrt(o[0]*o[0]+o[1]*o[1]);if(0===a)return null;o[0]/=a,o[1]/=a;const s=t=>{const n=(t.x-e[0])*o[0]+(t.y-e[1])*o[1];t.x=e[0]+n*o[0],t.y=e[1]+n*o[1];};return t=>(s(t.mapStart),s(t.mapEnd),{...t,axis:o})}function g(t,n){let e=null;return r=>{if("start"===r.action&&(e=E(t,r.mapStart.spatialReference,n)),t$1(e))return null;const a=r.mapEnd.x-r.mapStart.x,s=r.mapEnd.y-r.mapStart.y,c=r.mapEnd.z-r.mapStart.z;return e.move(a,s,c),{...r,translationX:a,translationY:s,translationZ:c}}}function h$1(t,n){return t$1(t)?null:t.spatialReference.equals(n)?t.clone():rn(t,n)}function E(t,n,e){const r=t.geometry,a=Z$4(n);if(t$1(r))return null;if("mesh"===r.type)return S(t,r,a,e);const s=h$1(r,a),c=r.spatialReference;return t$1(s)?null:{move:(n,e,r)=>{const o=r$9(s.clone(),n,e,r);o.spatialReference.equals(c)?t.geometry=o:t.geometry=rn(o,c);}}}function S(t,n,e,o){if(r$3(n.transform))return j(t,n,n.transform,e);if(!n.spatialReference.equals(e))return null;let a=0,s=0,c=0;return {move:(e,r,i)=>{const l=e-a,m=r-s,p=i-c;if(l||m||p){const y=new b$3(n.origin.x+l,n.origin.y+m,n.origin.z+p,n.origin.spatialReference);n.centerAt(y,{geographic:o===l$8.Global}),t.notifyGeometryChanged(),a=e,s=r,c=i;}}}}function j(t,n,e,a){const s=h$1(e.getOriginPoint(n.spatialReference),a),l=n.spatialReference;return t$1(s)?null:{move:(n,o,a)=>{const u=r$9(s.clone(),n,o,a);if(u.spatialReference.equals(l))e.origin=r$7(u.x,u.y,u.z);else {const t=rn(u,l);r$3(t)&&(e.origin=r$7(t.x,t.y,t.z));}t.notifyMeshTransformChanged(),t.notifyGeometryChanged();}}}function z(t,n){const e=t.map((t=>e$9(g(t,n)))).filter((t=>r$3(t)));return t=>{const n=t.mapEnd.x-t.mapStart.x,r=t.mapEnd.y-t.mapStart.y,o=t.mapEnd.z-t.mapStart.z;return e.forEach((n=>n(t))),{...t,translationX:n,translationY:r,translationZ:o}}}function w(t,e){const r=new Map;for(const o of e)r.set(o,y$5(t[o]));return n=>(r.forEach(((n,e)=>{t[e]=n;})),n)}function v(t){return r$3(t.geometry)&&"mesh"===t.geometry.type?M(t,t.geometry):w(t,["geometry"])}function M(t,n){const e=r$3(n.transform)?n.transform.clone():null,o=n.vertexAttributes.clonePositional();return r=>(n.transform=e,n.vertexAttributes=o,t.notifyGeometryChanged(),r)}function q(t){const n=t.map((t=>e$9(v(t)))).filter((t=>r$3(t)));return t=>(n.forEach((n=>n(t))),t)}function b(){let t=0,n=0,e=0;return r=>{"start"===r.action&&(t=r.mapStart.x,n=r.mapStart.y,e=r.mapStart.z);const o=r.mapEnd.x-t,a=r.mapEnd.y-n,s=r.mapEnd.z-e;return t=r.mapEnd.x,n=r.mapEnd.y,e=r.mapEnd.z,{...r,mapDeltaX:o,mapDeltaY:a,mapDeltaZ:s,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function C$1(){let t=0,n=0;return e=>{"start"===e.action&&(t=e.screenStart.x,n=e.screenStart.y);const r=e.screenEnd.x-t,o=e.screenEnd.y-n;return t=e.screenEnd.x,n=e.screenEnd.y,{...e,screenDeltaX:r,screenDeltaY:o}}}function G(t,n){let r=null,o=0,a=0;return c=>{if("start"===c.action&&(r=t.toScreen(n),r.x<0||r.x>t.width||r.y<0||r.y>t.height?r=null:(o=c.screenStart.x-r.x,a=c.screenStart.y-r.y)),null==r)return null;const i=o$6(c.screenEnd.x-o,0,t.width),l=o$6(c.screenEnd.y-a,0,t.height),u=c$g(i,l);return c.screenStart=r,c.screenEnd=u,c}}class P{constructor(){this.execute=()=>{};}next(t,n=new P){return r$3(t)&&(this.execute=e=>{const o=t(e);r$3(o)&&n.execute(o);}),n}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
class d{constructor(){this.next=new P;}createSnapDragEventPipelineStep({predicate:d=(()=>!0),cancel:c,snappingManager:m,snappingContext:x,updatingHandles:u}){if(t$1(m))return e=>e;let y=null,f=null;const g=()=>{y=h$8(y),m.doneSnapping(),r$3(f)&&f.frameTask.remove(),f=null;};c.next((e=>(g(),e))),this.next=new P;const v=x$8((async({frameTask:e,point:t,context:n,event:r,dx:a,dy:i},s)=>{const p=await e.schedule((()=>m.snap(t,n,s)),s);if(p.valid){let l=await e.schedule((()=>p.apply()),s);t!==P$1&&(l=m.update(P$1,n)),a$f(l,h)||(r.mapEnd.x=l.x+a,r.mapEnd.y=l.y+i,this.next.execute(r));}}));let P$1,h;return e=>{if(!d(e))return e;if("start"===e.action){const n="3d"===m.view.type?m.view.resourceController.scheduler.registerTask(A$2.SNAPPING):v$8;f={context:new e$a({editGeometryOperations:x.editGeometryOperations,elevationInfo:x.elevationInfo,pointer:x.pointer,vertexHandle:r$3(e.info)?e.info.handle:null,excludeFeature:x.excludeFeature,visualizer:x.visualizer}),originalPos:r$3(e.snapOrigin)?x.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,frameTask:n};}if(r$3(f)){const n=f.context.coordinateHelper.vectorToDehydratedPoint(f.context.coordinateHelper.arrayToVector([f.originalPos.x,f.originalPos.y,f.originalPos.z]));n.x+=e.mapEnd.x-e.mapStart.x,n.y+=e.mapEnd.y-e.mapStart.y;const a=e.mapStart.x-f.originalPos.x,o=e.mapStart.y-f.originalPos.y,i={...e,action:"update"},s=f.context,p=m.update(n,f.context);if(h=p,e.mapEnd.x=p.x+a,e.mapEnd.y=p.y+o,P$1=n,"end"!==e.action){const e=f.frameTask;r$3(y)||(y=new AbortController),u.addPromise(g$b(v({frameTask:e,event:i,context:s,point:n,dx:a,dy:o},y.signal)));}}return "end"===e.action&&g(),e}}}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let h=class extends f$5{constructor(t){super(t),this.stagedPoint=null,this._abortController=null,this._snap=x$8((async(t,r,s,o)=>{const e=await this._frameTask.schedule((()=>r.snap(t,s,o)),o);e.valid&&await this._frameTask.schedule((()=>{this.stagedPoint=e.apply(),t!==this._snapMapPoint&&(this.stagedPoint=r.update(this._snapMapPoint,s));}),o);}));}initialize(){const t="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=r$3(t)?t.registerTask(A$2.SNAPPING):v$8;}destroy(){this._abortController=h$8(this._abortController),this._frameTask=a$i(this._frameTask);}async snap(t,r,s){return this.stagedPoint=r.update(t,s),this._snapMapPoint=t,t$1(this._abortController)&&(this._abortController=new AbortController),this._snap(t,r,s,this._abortController.signal)}abort(){this._abortController=h$8(this._abortController);}};e$7([d$6({constructOnly:!0})],h.prototype,"view",void 0),e$7([d$6()],h.prototype,"stagedPoint",void 0),h=e$7([n$5("esri.views.interactive.snapping.SnappingOperation")],h);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let C=class extends(n$7.EventedMixin(d$8)){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new d,this.isDraped=!0,this.labelOptions=new c$f,this.tooltipOptions=new r$8,this.snapToSceneEnabled=null,t$1(e.elevationInfo)&&(this.elevationInfo={mode:e.hasZ?"absolute-height":"on-the-ground",offset:0});}initialize(){const{geometryType:e$1,view:t}=this,{spatialReference:i}=t,n="viewingMode"in t.state?t.state.viewingMode:l$8.Local,s="segment"===e$1||"multipoint"===e$1?"polyline":e$1;this.coordinateHelper=R$5(this.hasZ,this.hasM,i),this._editGeometryOperations=new S$6(new g$c(s,this.coordinateHelper)),this._snappingOperation=new h({view:t}),this.handles.add(l$6((()=>this.stagedVertex),(e=>{t$1(e)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"});}),{sync:!0,equals:(e,t)=>w$7(e,t,a$f)})),this._activeComponent=new p$m(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const a=this.segmentLabels;r$3(a)&&(a.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([l$6((()=>this.labelOptions.enabled),(e=>{a.visible=e;}),w$5),this.on("cursor-update",(()=>{const e=this.stagedVertex;a.stagedVertex=r$3(e)?this.coordinateHelper.pointToVector(e):null;}))])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(e=>{const t=e.vertices.map((e=>({componentIndex:0,vertexIndex:e.index,coordinates:this.coordinateHelper.vectorToArray(e.pos)}))),i=t.map((e=>e.coordinates));switch(e.type){case"vertex-add":this.emit(e.type,{...e,added:i,vertices:t});break;case"vertex-update":this.emit(e.type,{...e,updated:i,vertices:t});break;case"vertex-remove":this.emit(e.type,{...e,removed:i,vertices:t});}}))),this._manipulator=new e({grabbableForEvent:e=>"click"!==this.drawingMode||"touch"===e.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==e$1,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(e=>this._onImmediateClick(e))),this._manipulator.events.on("immediate-double-click",(e=>this._onImmediateDoubleClick(e)))]);}destroy(){l$7(this.segmentLabels),l$7(this._snappingOperation),this._editGeometryOperations=l$7(this._editGeometryOperations);}get _snappingEnabled(){return r$3(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((e=>this.coordinateHelper.vectorToArray(e.pos)))}set drawingMode(e){this._set("drawingMode",e??e$1);}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e;}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return r$3(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=y$5(e);}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return r$3(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}get stagedOrLastVertex(){if(r$3(this.stagedVertex))return this.stagedVertex;const e=this._activeComponent.getLastVertex();return t$1(e)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(e.pos)}cancel(){this.complete({aborted:!0});}commitStagedVertex(){if(this._snappingOperation.abort(),r$3(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e));}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),r$3(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;const i="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map(((e,t)=>({componentIndex:0,vertexIndex:t,coordinates:e}))),aborted:t,type:"complete"});}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId);}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo();}undo(){r$3(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo();}_closeOnClickVertexIndex(e){const t=this._activeComponent;if("polygon"===this.geometryType&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(e$9(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return y(e,((e,t,i,n)=>{const r="touch"===n&&this._snappingEnabled;!this.isCompleted&&r&&(t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(this.stagedVertex=e.mapStart,("segment"===this.geometryType||r&&0===this.numVertices)&&this.commitStagedVertex()),e))).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>r,cancel:i,snappingManager:this.snappingManager,snappingContext:new e$a({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:n,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next((e=>(r&&(this.stagedVertex=e.mapEnd,"end"===e.action&&this.commitStagedVertex()),e))).next((e=>("end"===e.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),e))),i.next((()=>{r&&r$3(this.snappingManager)&&this.snappingManager.doneSnapping();})));}))}_createManipulatorDragPipelineFreehand(e){return y(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(t$1(this.stagedVertex)&&(this.stagedVertex=e.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete();}return e}));}))}_createManipulatorDragPipelineHybrid(e){return y(e,((e,t)=>{this.isCompleted||t.next(this._screenToMapDragEventStep()).next((e=>("start"===e.action&&(t$1(this.stagedVertex)&&(this.stagedVertex=e.mapStart),this.commitStagedVertex()),e))).next((e=>{switch(e.action){case"start":case"update":this.stagedVertex=e.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete();}return e}));}))}_getDrawSurface(){if(t$1(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;r$3(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(t=!0),r$3(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),r$3(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(t=!1);const i=this._activeComponent.vertices.length;return ("segment"===this.geometryType||"polygon"===this.geometryType)&&i>0&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===e.pointerType&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation();}_onImmediateClick(e){if("mouse"===e.pointerType&&2===e.button||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(r$3(i))return e.stopPropagation(),void this.complete();const n=this._screenToMap(e.screenPoint);if(r$3(n))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&(r$3(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),r$3(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),("point"===this.geometryType||"segment"===this.geometryType&&2===t.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===t.vertices.length)&&this.complete();}e.stopPropagation();}_onImmediateDoubleClick(e){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),e.stopPropagation());}_onPointerMove(e){const t=c$g(e.x,e.y);if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void this._snappingOperation.abort();e.stopPropagation();const i=this._closeOnClickVertexIndex(t);if(r$3(i))return this._closeOnVertex(i),void this._snappingOperation.abort();const n=this._screenToMap(t);if(this._manipulator.cursor=r$3(n)?"crosshair":null,t$1(n))return void this._snappingOperation.abort();if(t$1(this.snappingManager))return this.stagedVertex=n,void this._snappingOperation.abort();const s=this.snappingManager,a=new e$a({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise(g$b(this._snappingOperation.snap(n,s,a)));}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"});}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if("start"===t.action&&(e=this._screenToMap(t.screenStart)),t$1(e))return null;const i=this._screenToMap(t.screenEnd);return r$3(i)?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const i=25,n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return !!r$3(n)&&I(n,t,i)}};function I(e,t,i){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r<=i}e$7([d$6()],C.prototype,"defaultZ",void 0),e$7([d$6()],C.prototype,"isDraped",void 0),e$7([d$6({value:e$1})],C.prototype,"drawingMode",null),e$7([d$6({constructOnly:!0})],C.prototype,"elevationDrawSurface",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"elevationInfo",void 0),e$7([d$6({constructOnly:!0,type:c$f})],C.prototype,"labelOptions",void 0),e$7([d$6({constructOnly:!0,type:r$8})],C.prototype,"tooltipOptions",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"geometryType",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"hasM",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"hasZ",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"manipulators",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"drawSurface",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"segmentLabels",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"snappingManager",void 0),e$7([d$6({constructOnly:!0})],C.prototype,"snappingVisualizer",void 0),e$7([d$6()],C.prototype,"snapToSceneEnabled",void 0),e$7([d$6()],C.prototype,"_snappingOperation",void 0),e$7([d$6()],C.prototype,"stagedVertex",null),e$7([d$6()],C.prototype,"updating",null),e$7([d$6({constructOnly:!0})],C.prototype,"view",void 0),C=e$7([n$5("esri.views.draw.DrawOperation")],C);

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
class r{constructor(e,t,i,s=null){this._elevationInfo=e,this.defaultZ=t,this._view=i,this._excludeGraphics=s;}screenToMap(i){if(r$3(this.defaultZ))return this._view.sceneIntersectionHelper.intersectElevationFromScreen(i$4(i.x,i.y),this._elevationInfo,this.defaultZ,this._excludeGraphics);const s=this._view.sceneIntersectionHelper.intersectElevationFromScreen(i$4(i.x,i.y),this._elevationInfo,0,this._excludeGraphics);return r$3(s)&&(s.z=void 0),s}mapToScreen(e){const t=v$9(e.x,e.y,v$7(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}}class n{constructor(e,t,i=[]){this.view=e,this.elevationInfo=t,this.exclude=i;}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return r$3(i)&&(i.z=f$7(i,this.view,this.elevationInfo)),i}mapToScreen(t){let o=t;return r$3(this.elevationInfo)&&(o=v$9(t.x,t.y,v$7(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(o)}}class c{constructor(e,t=!1,i=0){this.view=e,this.hasZ=t,this.defaultZ=i,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const s=e.toMap(t);return s.z=i,s}:t=>e.toMap(t);}}

export { c$c as A, p$j as B, C, l as D, D as E, F, G, N, P, a$1 as a, x as b, c, C$1 as d, b as e, e$2 as f, g, d as h, v$1 as i, j$5 as j, d$1 as k, y$4 as l, m$6 as m, n, x$2 as o, p$i as p, q, r, m$4 as s, m$1 as t, l$1 as u, v, o$1 as w, x$4 as x, y, z };
