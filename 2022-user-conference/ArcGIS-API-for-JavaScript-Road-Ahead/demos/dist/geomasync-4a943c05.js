import { pN as p$1, w, ev as m$1, bk as w$2, bJ as v$1, er as u, Q as v$3, ql as a$1, e1 as $ } from './_virtual_index-1ea2035a.js';
import { q as pe, V, z, K, t, e, Y, E, g as se, v as c, P, x as r, y as v, G as he, H as a, S as Se, I as be, r as re, L as le, O as l, R as u$1, T as s, U as e$1 } from './arcadeUtils-cbca72a3.js';
import { A, h, S, m, x, p, O, g, R, D, b, E as E$1, k, y, w as w$1, W, K as K$1, F, M, d, C, U, B, L, P as P$1, v as v$2, H, N, J, j } from './geometryEngineAsync-8eb3bd06.js';
import './number-2aae57c3.js';
import './hash-da85b7aa.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
function un(t){return 0===a$1.indexOf("4.")?v$1.fromExtent(t):new v$1({spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]})}function fn(n,t$1,e$1){if(V(n,2,2,t$1,e$1),n[0]instanceof p$1&&n[1]instanceof p$1);else if(n[0]instanceof p$1&&null===n[1]);else if(n[1]instanceof p$1&&null===n[0]);else if(null!==n[0]||null!==n[1])throw new t(t$1,e.InvalidParameter,e$1)}async function cn(n,t){if("polygon"!==n.type&&"polyline"!==n.type&&"extent"!==n.type)return 0;let e=1;if(n.spatialReference.vcsWkid||n.spatialReference.latestVcsWkid){e=s(n.spatialReference)/$(n.spatialReference);}let r=0;if("polyline"===n.type)for(const a of n.paths)for(let n=1;n<a.length;n++)r+=e$1(a[n],a[n-1],e);else if("polygon"===n.type)for(const a of n.rings){for(let n=1;n<a.length;n++)r+=e$1(a[n],a[n-1],e);(a[0][0]!==a[a.length-1][0]||a[0][1]!==a[a.length-1][1]||void 0!==a[0][2]&&a[0][2]!==a[a.length-1][2])&&(r+=e$1(a[0],a[a.length-1],e));}else "extent"===n.type&&(r+=2*e$1([n.xmin,n.ymin,0],[n.xmax,n.ymin,0],e),r+=2*e$1([n.xmin,n.ymin,0],[n.xmin,n.ymax,0],e),r*=2,r+=4*Math.abs(v(n.zmax,0)*e-v(n.zmin,0)*e));const i=new m$1({hasZ:!1,hasM:!1,spatialReference:n.spatialReference,paths:[[0,0],[0,r]]});return F(i,t)}function dn(n){"async"===n.mode&&(n.functions.disjoint=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null===a[0]||null===a[1]||A(a[0],a[1]))))},n.functions.intersects=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null!==a[0]&&null!==a[1]&&h(a[0],a[1]))))},n.functions.touches=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null!==a[0]&&null!==a[1]&&S(a[0],a[1]))))},n.functions.crosses=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null!==a[0]&&null!==a[1]&&m(a[0],a[1]))))},n.functions.within=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null!==a[0]&&null!==a[1]&&x(a[0],a[1]))))},n.functions.contains=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null!==a[0]&&null!==a[1]&&p(a[0],a[1]))))},n.functions.overlaps=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null!==a[0]&&null!==a[1]&&O(a[0],a[1]))))},n.functions.equals=function(t,e){return n.standardFunctionAsync(t,e,((n,r,i)=>(V(i,2,2,t,e),i[0]===i[1]||(i[0]instanceof p$1&&i[1]instanceof p$1?g(i[0],i[1]):!(!z(i[0])||!z(i[1]))&&i[0].getTime()===i[1].getTime()))))},n.functions.relate=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,r,o)=>{if(o=pe(o),V(o,3,3,t$1,e$1),o[0]instanceof p$1&&o[1]instanceof p$1)return R(o[0],o[1],K(o[2]));if(o[0]instanceof p$1&&null===o[1])return !1;if(o[1]instanceof p$1&&null===o[0])return !1;if(null===o[0]&&null===o[1])return !1;throw new t(t$1,e.InvalidParameter,e$1)}))},n.functions.intersection=function(t,e){return n.standardFunctionAsync(t,e,((n,r,a)=>(fn(a=pe(a),t,e),null===a[0]||null===a[1]?null:D(a[0],a[1]))))},n.functions.union=function(e$1,r){return n.standardFunctionAsync(e$1,r,((n,a,o)=>{const s=[];if(0===(o=pe(o)).length)throw new t(e$1,e.WrongNumberOfParameters,r);if(1===o.length)if(Y(o[0])){const n=pe(o[0]);for(let t$1=0;t$1<n.length;t$1++)if(null!==n[t$1]){if(!(n[t$1]instanceof p$1))throw new t(e$1,e.InvalidParameter,r);s.push(n[t$1]);}}else {if(!E(o[0])){if(o[0]instanceof p$1)return se(c(o[0]),e$1.spatialReference);if(null===o[0])return null;throw new t(e$1,e.InvalidParameter,r)}{const n=pe(o[0].toArray());for(let t$1=0;t$1<n.length;t$1++)if(null!==n[t$1]){if(!(n[t$1]instanceof p$1))throw new t(e$1,e.InvalidParameter,r);s.push(n[t$1]);}}}else for(let t$1=0;t$1<o.length;t$1++)if(null!==o[t$1]){if(!(o[t$1]instanceof p$1))throw new t(e$1,e.InvalidParameter,r);s.push(o[t$1]);}return 0===s.length?null:b(s)}))},n.functions.difference=function(e,r){return n.standardFunctionAsync(e,r,((n,a,o)=>(fn(o=pe(o),e,r),null!==o[0]&&null===o[1]?c(o[0]):null===o[0]?null:E$1(o[0],o[1]))))},n.functions.symmetricdifference=function(e,r){return n.standardFunctionAsync(e,r,((n,a,o)=>(fn(o=pe(o),e,r),null===o[0]&&null===o[1]?null:null===o[0]?c(o[1]):null===o[1]?c(o[0]):k(o[0],o[1]))))},n.functions.clip=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,r,o)=>{if(o=pe(o),V(o,2,2,t$1,e$1),!(o[1]instanceof w)&&null!==o[1])throw new t(t$1,e.InvalidParameter,e$1);if(null===o[0])return null;if(!(o[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return null===o[1]?null:y(o[0],o[1])}))},n.functions.cut=function(e$1,r){return n.standardFunctionAsync(e$1,r,((n,o,s)=>{if(s=pe(s),V(s,2,2,e$1,r),!(s[1]instanceof m$1)&&null!==s[1])throw new t(e$1,e.InvalidParameter,r);if(null===s[0])return [];if(!(s[0]instanceof p$1))throw new t(e$1,e.InvalidParameter,r);return null===s[1]?[c(s[0])]:w$1(s[0],s[1])}))},n.functions.area=function(t$1,r$1){return n.standardFunctionAsync(t$1,r$1,(async(n,o,s)=>{if(V(s,1,2,t$1,r$1),null===(s=pe(s))[0])return 0;if(P(s[0])){const n=await s[0].sumArea(r(v(s[1],-1)),!1,t$1.abortSignal);if(t$1.abortSignal.aborted)throw new t(t$1,e.Cancelled,r$1);return n}if(Y(s[0])||E(s[0])){const n=he(s[0],t$1.spatialReference);return null===n?0:W(n,r(v(s[1],-1)))}if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,r$1);return W(s[0],r(v(s[1],-1)))}))},n.functions.areageodetic=function(t$1,r$1){return n.standardFunctionAsync(t$1,r$1,(async(n,o,s)=>{if(V(s,1,2,t$1,r$1),null===(s=pe(s))[0])return 0;if(P(s[0])){const n=await s[0].sumArea(r(v(s[1],-1)),!0,t$1.abortSignal);if(t$1.abortSignal.aborted)throw new t(t$1,e.Cancelled,r$1);return n}if(Y(s[0])||E(s[0])){const n=he(s[0],t$1.spatialReference);return null===n?0:K$1(n,r(v(s[1],-1)))}if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,r$1);return K$1(s[0],r(v(s[1],-1)))}))},n.functions.length=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,(async(n,o,s)=>{if(V(s,1,2,t$1,e$1),null===(s=pe(s))[0])return 0;if(P(s[0])){const n=await s[0].sumLength(a(v(s[1],-1)),!1,t$1.abortSignal);if(t$1.abortSignal.aborted)throw new t(t$1,e.Cancelled,e$1);return n}if(Y(s[0])||E(s[0])){const n=Se(s[0],t$1.spatialReference);return null===n?0:F(n,a(v(s[1],-1)))}if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return F(s[0],a(v(s[1],-1)))}))},n.functions.length3d=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,o,s)=>{if(V(s,1,2,t$1,e$1),null===(s=pe(s))[0])return 0;if(Y(s[0])||E(s[0])){const n=Se(s[0],t$1.spatialReference);return null===n?0:!0===n.hasZ?cn(n,a(v(s[1],-1))):F(n,a(v(s[1],-1)))}if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return !0===s[0].hasZ?cn(s[0],a(v(s[1],-1))):F(s[0],a(v(s[1],-1)))}))},n.functions.lengthgeodetic=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,(async(n,o,s)=>{if(V(s,1,2,t$1,e$1),null===(s=pe(s))[0])return 0;if(P(s[0])){const n=await s[0].sumLength(a(v(s[1],-1)),!0,t$1.abortSignal);if(t$1.abortSignal.aborted)throw new t(t$1,e.Cancelled,e$1);return n}if(Y(s[0])||E(s[0])){const n=Se(s[0],t$1.spatialReference);return null===n?0:M(n,a(v(s[1],-1)))}if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return M(s[0],a(v(s[1],-1)))}))},n.functions.distance=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,o,s)=>{s=pe(s),V(s,2,3,t$1,e$1);let f=s[0];(Y(s[0])||E(s[0]))&&(f=be(s[0],t$1.spatialReference));let c=s[1];if((Y(s[1])||E(s[1]))&&(c=be(s[1],t$1.spatialReference)),!(f instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);if(!(c instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return d(f,c,a(v(s[2],-1)))}))},n.functions.distancegeodetic=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,o,s)=>{s=pe(s),V(s,2,3,t$1,e$1);const l=s[0],u=s[1];if(!(l instanceof w$2))throw new t(t$1,e.InvalidParameter,e$1);if(!(u instanceof w$2))throw new t(t$1,e.InvalidParameter,e$1);const f=new m$1({paths:[],spatialReference:l.spatialReference});return f.addPath([l,u]),M(f,a(v(s[2],-1)))}))},n.functions.densify=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,o,s)=>{if(s=pe(s),V(s,2,3,t$1,e$1),null===s[0])return null;if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);const l=re(s[1]);if(isNaN(l))throw new t(t$1,e.InvalidParameter,e$1);if(l<=0)throw new t(t$1,e.InvalidParameter,e$1);return s[0]instanceof v$1||s[0]instanceof m$1?C(s[0],l,a(v(s[2],-1))):s[0]instanceof w?C(un(s[0]),l,a(v(s[2],-1))):s[0]}))},n.functions.densifygeodetic=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,o,s)=>{if(s=pe(s),V(s,2,3,t$1,e$1),null===s[0])return null;if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);const l=re(s[1]);if(isNaN(l))throw new t(t$1,e.InvalidParameter,e$1);if(l<=0)throw new t(t$1,e.InvalidParameter,e$1);return s[0]instanceof v$1||s[0]instanceof m$1?U(s[0],l,a(v(s[2],-1))):s[0]instanceof w?U(un(s[0]),l,a(v(s[2],-1))):s[0]}))},n.functions.generalize=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,o,s)=>{if(s=pe(s),V(s,2,4,t$1,e$1),null===s[0])return null;if(!(s[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);const l=re(s[1]);if(isNaN(l))throw new t(t$1,e.InvalidParameter,e$1);return B(s[0],l,le(v(s[2],!0)),a(v(s[3],-1)))}))},n.functions.buffer=function(e$1,o){return n.standardFunctionAsync(e$1,o,((n,s,l)=>{if(l=pe(l),V(l,2,3,e$1,o),null===l[0])return null;if(!(l[0]instanceof p$1))throw new t(e$1,e.InvalidParameter,o);const u=re(l[1]);if(isNaN(u))throw new t(e$1,e.InvalidParameter,o);return 0===u?c(l[0]):L(l[0],u,a(v(l[2],-1)))}))},n.functions.buffergeodetic=function(e$1,o){return n.standardFunctionAsync(e$1,o,((n,s,l)=>{if(l=pe(l),V(l,2,3,e$1,o),null===l[0])return null;if(!(l[0]instanceof p$1))throw new t(e$1,e.InvalidParameter,o);const u=re(l[1]);if(isNaN(u))throw new t(e$1,e.InvalidParameter,o);return 0===u?c(l[0]):P$1(l[0],u,a(v(l[2],-1)))}))},n.functions.offset=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,o,l)=>{if(l=pe(l),V(l,2,6,t$1,e$1),null===l[0])return null;if(!(l[0]instanceof v$1||l[0]instanceof m$1))throw new t(t$1,e.InvalidParameter,e$1);const u=re(l[1]);if(isNaN(u))throw new t(t$1,e.InvalidParameter,e$1);const f=re(v(l[4],10));if(isNaN(f))throw new t(t$1,e.InvalidParameter,e$1);const c=re(v(l[5],0));if(isNaN(c))throw new t(t$1,e.InvalidParameter,e$1);return v$2(l[0],u,a(v(l[2],-1)),K(v(l[3],"round")).toLowerCase(),f,c)}))},n.functions.rotate=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,r,o)=>{o=pe(o),V(o,2,3,t$1,e$1);let s=o[0];if(null===s)return null;if(!(s instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);s instanceof w&&(s=v$1.fromExtent(s));const l=re(o[1]);if(isNaN(l))throw new t(t$1,e.InvalidParameter,e$1);const u=v(o[2],null);if(null===u)return H(s,l);if(u instanceof w$2)return H(s,l,u);throw new t(t$1,e.InvalidParameter,e$1)}))},n.functions.centroid=function(e$1,r){return n.standardFunctionAsync(e$1,r,((n,o,s)=>{if(s=pe(s),V(s,1,1,e$1,r),null===s[0])return null;let c$1=s[0];if((Y(s[0])||E(s[0]))&&(c$1=be(s[0],e$1.spatialReference)),null===c$1)return null;if(!(c$1 instanceof p$1))throw new t(e$1,e.InvalidParameter,r);return c$1 instanceof w$2?se(c(s[0]),e$1.spatialReference):c$1 instanceof v$1?c$1.centroid:c$1 instanceof m$1?l(c$1):c$1 instanceof u?u$1(c$1):c$1 instanceof w?c$1.center:null}))},n.functions.multiparttosinglepart=function(e$1,r){return n.standardFunctionAsync(e$1,r,(async(n,o,s)=>{s=pe(s),V(s,1,1,e$1,r);const l=[];if(null===s[0])return null;if(!(s[0]instanceof p$1))throw new t(e$1,e.InvalidParameter,r);if(s[0]instanceof w$2)return [se(c(s[0]),e$1.spatialReference)];if(s[0]instanceof w)return [se(c(s[0]),e$1.spatialReference)];const u$1=await N(s[0]);if(u$1 instanceof v$1){const n=[],t=[];for(let e=0;e<u$1.rings.length;e++)if(u$1.isClockwise(u$1.rings[e])){const t=v$3({rings:[u$1.rings[e]],hasZ:!0===u$1.hasZ,hazM:!0===u$1.hasM,spatialReference:u$1.spatialReference.toJSON()});n.push(t);}else t.push({ring:u$1.rings[e],pt:u$1.getPoint(e,0)});for(let e=0;e<t.length;e++)for(let r=0;r<n.length;r++)if(n[r].contains(t[e].pt)){n[r].addRing(t[e].ring);break}return n}if(u$1 instanceof m$1){const n=[];for(let t=0;t<u$1.paths.length;t++){const e=v$3({paths:[u$1.paths[t]],hasZ:!0===u$1.hasZ,hazM:!0===u$1.hasM,spatialReference:u$1.spatialReference.toJSON()});n.push(e);}return n}if(s[0]instanceof u){const n=se(c(s[0]),e$1.spatialReference);for(let t=0;t<n.points.length;t++)l.push(n.getPoint(t));return l}return null}))},n.functions.issimple=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,r,o)=>{if(o=pe(o),V(o,1,1,t$1,e$1),null===o[0])return !0;if(!(o[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return J(o[0])}))},n.functions.simplify=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,r,o)=>{if(o=pe(o),V(o,1,1,t$1,e$1),null===o[0])return null;if(!(o[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return N(o[0])}))},n.functions.convexhull=function(t$1,e$1){return n.standardFunctionAsync(t$1,e$1,((n,r,o)=>{if(o=pe(o),V(o,1,1,t$1,e$1),null===o[0])return null;if(!(o[0]instanceof p$1))throw new t(t$1,e.InvalidParameter,e$1);return j(o[0])}))});}

export { dn as registerFunctions };
