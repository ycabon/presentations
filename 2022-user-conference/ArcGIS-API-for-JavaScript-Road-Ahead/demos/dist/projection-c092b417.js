import { C as s, fe as Un, dr as O$1, iD as u, iE as P, iF as s$1, gm as qn, fq as a, hS as o, fr as S$1, iG as c, cW as z, a3 as n, eD as e$1, O as t, hL as g$1, iH as B$1 } from './_virtual_index-64b818a8.js';
import { e } from './mat4f64-2ebd3575.js';
import { i, T } from './BufferView-e399da5f.js';
import { t as t$1, r, o as o$1 } from './vec33-84eb2a4f.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
const g=s.getLogger("esri.geometry.support.meshUtils.normalProjection");function j(r,e,o,t,n){return B(t)?(b(Y.TO_PCPF,i.fromTypedArray(r),T.fromTypedArray(e),T.fromTypedArray(o),t,i.fromTypedArray(n)),n):(g.error("Cannot convert spatial reference to PCPF"),n)}function h(r,e,o,t,n){return B(t)?(b(Y.FROM_PCPF,i.fromTypedArray(r),T.fromTypedArray(e),T.fromTypedArray(o),t,i.fromTypedArray(n)),n):(g.error("Cannot convert to spatial reference from PCPF"),n)}function M(r,e,o){return Un(r,e,0,o,O$1(e),0,r.length/3),o}function O(r,e,o){return Un(r,O$1(o),0,e,o,0,r.length/3),e}function R(r,o,t$2){if(t(r))return o;const n=T.fromTypedArray(r),f=T.fromTypedArray(o);return t$1(f,n,t$2),o}function v(r$1,n,f){if(t(r$1))return n;g$1(x,f);const a=i.fromTypedArray(r$1),c=i.fromTypedArray(n);return r(c,a,x),B$1(x)||o$1(c,c),n}function V(r$1,n,f){if(t(r$1))return n;g$1(x,f);const a=i.fromTypedArray(r$1,4*Float32Array.BYTES_PER_ELEMENT),c=i.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT);if(r(c,a,x),B$1(x)||o$1(c,c),r$1!==n)for(let e=3;e<r$1.length;e+=4)n[e]=r$1[e];return n}function k(r,e,o,t,n){if(!B(t))return g.error("Cannot convert spatial reference to PCPF"),n;b(Y.TO_PCPF,i.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),T.fromTypedArray(e),T.fromTypedArray(o),t,i.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function L(r,e,o,t,n){if(!B(t))return g.error("Cannot convert to spatial reference from PCPF"),n;b(Y.FROM_PCPF,i.fromTypedArray(r,16),T.fromTypedArray(e),T.fromTypedArray(o),t,i.fromTypedArray(n,16));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function b(r,e,o$1,t,a$1,c$1){if(!e)return;const i=o$1.count,y=O$1(a$1);if(S(a$1))for(let s=0;s<i;s++)t.getVec(s,U),e.getVec(s,w),qn(y,U,W,y),a(x,W),r===Y.FROM_PCPF&&o(x,x),S$1(w,w,x),c$1.setVec(s,w);else for(let u=0;u<i;u++){t.getVec(u,U),e.getVec(u,w),qn(y,U,W,y),a(x,W);const a$1=c(o$1.get(u,1));let i=Math.cos(a$1);r===Y.TO_PCPF&&(i=1/i),x[0]*=i,x[1]*=i,x[2]*=i,x[3]*=i,x[4]*=i,x[5]*=i,r===Y.FROM_PCPF&&o(x,x),S$1(w,w,x),z(w,w),c$1.setVec(u,w);}return c$1}function B(r){return S(r)||N(r)}function S(r){return r.isWGS84||u(r)||P(r)||s$1(r)}function N(r){return r.isWebMercator}var Y;!function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF";}(Y||(Y={}));const U=n(),w=n(),W=e(),x=e$1();

export { L, M, O, R, V, h, j, k, v };
