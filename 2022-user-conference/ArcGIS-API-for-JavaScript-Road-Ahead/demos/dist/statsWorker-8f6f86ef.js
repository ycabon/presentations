import { uC as p$1, bH as R, bk as w, L as e, bO as O, kO as i, O as k, uD as c$1, uE as x, aF as u, uF as y$1, uG as m, uH as m$1, uI as f, uJ as d$1, uK as V, uL as T, uM as F, uN as D, uO as N, uP as S } from './_virtual_index-1ea2035a.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
let y=null;function $(e,t,n){return e.x<0?e.x+=t:e.x>n&&(e.x-=t),e}function I(e$1,n,r,i){const a=p$1(r)?R(r):null,u=a?Math.round((a.valid[1]-a.valid[0])/n.scale[0]):null;return e$1.map((e$1=>{const r=new w(e(e$1.geometry));return O(n,r,r,r.hasZ,r.hasM),e$1.geometry=a?$(r,u,i[0]):r,e$1}))}function g(e,t=18,n,i,o,s){const l=new Float64Array(o*s);t=Math.round(u(t));let a=Number.POSITIVE_INFINITY,u$1=Number.NEGATIVE_INFINITY,m$1=0,d=0,p=0,h=0;const y=y$1(i,n);for(const{geometry:r,attributes:c}of e){const{x:e,y:n}=r,i=Math.max(0,e-t),$=Math.max(0,n-t),I=Math.min(s,n+t),g=Math.min(o,e+t),j=+y(c);for(let r=$;r<I;r++)for(let s=i;s<g;s++){const i=r*o+s,c=m(s-e,r-n,t),y=l[i];m$1=l[i]+=c*j;const $=m$1-y;d+=$,p+=$*$,m$1<a&&(a=m$1),m$1>u$1&&(u$1=m$1),h++;}}if(!h)return {mean:0,stddev:0,min:0,max:0,mid:0,count:0};const $=(u$1-a)/2;return {mean:d/h,stdDev:Math.sqrt((p-d*d/h)/h),min:a,max:u$1,mid:$,count:h}}async function j(e,t){if(!t)return [];const{field:n,field2:r,field3:o,fieldDelimiter:s}=e,l=e.valueExpression,a=e.normalizationType,u=e.normalizationField,f=e.normalizationTotal,c=[],h=e.viewInfoParams;let $=null,I=null;if(l){if(!y){const{arcadeUtils:e}=await i();y=e;}$=y.createFunction(l),I=h&&y.getViewInfo({viewingMode:h.viewingMode,scale:h.scale,spatialReference:new k(h.spatialReference)});}const g=e.fieldInfos,j=!(t[0]&&"declaredClass"in t[0]&&"esri.Graphic"===t[0].declaredClass)&&g?{fields:g}:null;return t.forEach((e=>{const t=e.attributes;let i;if(l){const t=j?{...e,layer:j}:e,n=y.createExecContext(t,I);i=y.executeFunction($,n);}else t&&(i=t[n],r&&(i=`${c$1(i)}${s}${c$1(t[r])}`,o&&(i=`${i}${s}${c$1(t[o])}`)));if(a&&"number"==typeof i&&isFinite(i)){const e=t&&parseFloat(t[u]);i=x(i,a,e,f);}c.push(i);})),c}

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.25/esri/copyright.txt for details.
*/
async function d(i){const{attribute:e,features:s}=i,{normalizationType:r,normalizationField:m,minValue:f$1,maxValue:u,fieldType:d}=e,p=await j({field:e.field,valueExpression:e.valueExpression,normalizationType:r,normalizationField:m,normalizationTotal:e.normalizationTotal,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},s),v=m$1({normalizationType:r,normalizationField:m,minValue:f$1,maxValue:u}),c={value:.5,fieldType:d},z="esriFieldTypeString"===d?f({values:p,supportsNullCount:v,percentileParams:c}):d$1({values:p,minValue:f$1,maxValue:u,useSampleStdDev:!r,supportsNullCount:v,percentileParams:c});return V(z,"esriFieldTypeDate"===d)}async function p(i){const{attribute:e,features:n}=i,l=await j({field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:e.valueExpression,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n),t=T(l);return F(t,e.domains,e.returnAllCodedValues,e.fieldDelimiter)}async function v(i){const{attribute:e,features:n}=i,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r}=e,u=await j({field:l,valueExpression:e.valueExpression,normalizationType:t,normalizationField:o,normalizationTotal:s,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n),d=D(u,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r,standardDeviationInterval:e.standardDeviationInterval,numClasses:e.numClasses,minValue:e.minValue,maxValue:e.maxValue});return N(d,r)}async function c(i){const{attribute:e,features:n}=i,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r}=e,m=await j({field:l,valueExpression:e.valueExpression,normalizationType:t,normalizationField:o,normalizationTotal:s,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n);return S(m,{field:l,normalizationType:t,normalizationField:o,normalizationTotal:s,classificationMethod:r,standardDeviationInterval:e.standardDeviationInterval,numBins:e.numBins,minValue:e.minValue,maxValue:e.maxValue})}async function z(a){const{attribute:n,features:l}=a,{field:t,radius:o,fieldOffset:s,transform:r,spatialReference:m,size:f}=n,u=I(l,r,m,f),{count:d,min:p,max:v,mean:c,stdDev:z}=g(u,o,s,t,f[0],f[1]);return {count:d,min:p,max:v,avg:c,stddev:z}}

export { v as classBreaks, z as heatmapStatistics, c as histogram, d as summaryStatistics, p as uniqueValues };
