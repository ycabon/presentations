"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[708],{85674:(e,t,r)=>{r.d(t,{O:()=>n,h:()=>o});class n{constructor(e=null,t={},r,n){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new n(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}clone(){const e=this.geometry?.clone(),t=new n(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function o(e){return!!e.geometry?.coords?.length}},9006:(e,t,r)=>{r.d(t,{O:()=>n});class n{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new n;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},10708:(e,t,r)=>{r.d(t,{Q:()=>w});var n=r(29768),o=r(21972),s=r(60991),i=r(76506),a=r(50406),u=r(32101),l=r(34250),c=(r(92143),r(17533)),h=r(13235),d=r(69218),f=r(20438),m=r(55402),y=r(82827),p=r(2845),g=r(6502),b=r(87258),_=r(31292);let F=class extends o.Z{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,u.mN)(this.url)}async execute(e,t){const r=await this.executeJSON(e,t);return this.featureSetFromJSON(e,r,t)}async executeJSON(e,t){const r=this._normalizeQuery(e),n=null!=e.outStatistics?.[0],o=(0,i.h)("featurelayer-pbf-statistics"),s=!n||o;let a;if(this.pbfSupported&&s)try{a=await(0,g.e)(this.url,r,t)}catch(e){if("query:parsing-pbf"!==e.name)throw e;this.pbfSupported=!1}return this.pbfSupported&&s||(a=await(0,p.e)(this.url,r,t)),this._normalizeFields(a.fields),a}async featureSetFromJSON(e,t,n){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!t.features)return b.Z.fromJSON(t);const{meshFeatureSetFromJSON:o}=await(0,a.Hl)(Promise.all([r.e(4017),r.e(260),r.e(8088)]).then(r.bind(r,68088)),n);return o(e,this.infoFor3D,t)}executeForCount(e,t){return(0,m.e)(this.url,this._normalizeQuery(e),t)}executeForExtent(e,t){return(0,y.e)(this.url,this._normalizeQuery(e),t)}executeForIds(e,t){return(0,m.a)(this.url,this._normalizeQuery(e),t)}async executeRelationshipQuery(e,t){const[{default:n},{executeRelationshipQuery:o}]=await(0,a.Hl)(Promise.all([r.e(6646).then(r.bind(r,46646)),r.e(8827).then(r.bind(r,8827))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeRelationshipQueryForCount(e,t){const[{default:n},{executeRelationshipQueryForCount:o}]=await(0,a.Hl)(Promise.all([r.e(6646).then(r.bind(r,46646)),r.e(8827).then(r.bind(r,8827))]),t);return e=n.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),o(this.url,e,t)}async executeAttachmentQuery(e,t){const{executeAttachmentQuery:n,fetchAttachments:o,processAttachmentQueryResult:s}=await(0,a.Hl)(r.e(1220).then(r.bind(r,61220)),t),i=(0,f.p)(this.url);return s(i,await(this.queryAttachmentsSupported?n(i,e,t):o(i,e,t)))}async executeTopFeaturesQuery(e,t){const{executeTopFeaturesQuery:n}=await(0,a.Hl)(r.e(3558).then(r.bind(r,63558)),t);return n(this.parsedUrl,e,this.sourceSpatialReference,t)}async executeForTopIds(e,t){const{executeForTopIds:n}=await(0,a.Hl)(r.e(6771).then(r.bind(r,36771)),t);return n(this.parsedUrl,e,t)}async executeForTopExtents(e,t){const{executeForTopExtents:n}=await(0,a.Hl)(r.e(1426).then(r.bind(r,81426)),t);return n(this.parsedUrl,e,t)}async executeForTopCount(e,t){const{executeForTopCount:n}=await(0,a.Hl)(r.e(1171).then(r.bind(r,91171)),t);return n(this.parsedUrl,e,t)}_normalizeQuery(e){let t=_.Z.from(e);t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?d.D.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;const{supportedFormats:n,queryFormats:o}=r,i=(0,h.a)("model/gltf-binary",n)??(0,h.b)("glb",n),a=(0,h.a)("model/gltf+json",n)??(0,h.b)("gltf",n);for(const e of o){if(e===i){t.formatOf3DObjects=e;break}e!==a||t.formatOf3DObjects||(t.formatOf3DObjects=e)}if(!t.formatOf3DObjects)throw new s.Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(null==t.outFields||!t.outFields.includes("*")){t=t===e?t.clone():t,null==t.outFields&&(t.outFields=[]);const{originX:n,originY:o,originZ:s,translationX:i,translationY:a,translationZ:u,scaleX:l,scaleY:c,scaleZ:h,rotationX:d,rotationY:f,rotationZ:m,rotationDeg:y}=r.transformFieldRoles;t.outFields.push(n,o,s,i,a,u,l,c,h,d,f,m,y)}}return t}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const t of e){const e=this.fieldsIndex.get(t.name);e&&Object.assign(t,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,n._)([(0,l.Cb)({type:d.D})],F.prototype,"dynamicDataSource",void 0),(0,n._)([(0,l.Cb)()],F.prototype,"fieldsIndex",void 0),(0,n._)([(0,l.Cb)()],F.prototype,"gdbVersion",void 0),(0,n._)([(0,l.Cb)()],F.prototype,"infoFor3D",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],F.prototype,"parsedUrl",null),(0,n._)([(0,l.Cb)()],F.prototype,"pbfSupported",void 0),(0,n._)([(0,l.Cb)()],F.prototype,"queryAttachmentsSupported",void 0),(0,n._)([(0,l.Cb)()],F.prototype,"sourceSpatialReference",void 0),(0,n._)([(0,l.Cb)({type:String})],F.prototype,"url",void 0),F=(0,n._)([(0,c.j)("esri.tasks.QueryTask")],F);const w=F},82827:(e,t,r)=>{r.d(t,{e:()=>a}),r(74569);var n=r(20438),o=r(49214),s=r(31292),i=r(21801);async function a(e,t,r){const a=(0,n.p)(e),u=await(0,o.a)(a,s.Z.from(t),{...r}),l=u.data.extent;return!l||isNaN(l.xmin)||isNaN(l.ymin)||isNaN(l.xmax)||isNaN(l.ymax)?{count:u.data.count,extent:null}:{count:u.data.count,extent:i.Z.fromJSON(l)}}},55402:(e,t,r)=>{r.d(t,{a:()=>a,e:()=>i});var n=r(20438),o=r(49214),s=r(31292);async function i(e,t,r){const i=(0,n.p)(e);return(0,o.b)(i,s.Z.from(t),{...r}).then((e=>e.data.count))}async function a(e,t,r){const i=(0,n.p)(e);return(0,o.c)(i,s.Z.from(t),{...r}).then((e=>e.data.objectIds))}},2845:(e,t,r)=>{r.d(t,{a:()=>a,e:()=>u});var n=r(20438),o=r(49214),s=r(87258),i=r(31292);async function a(e,t,r){const n=await u(e,t,r);return s.Z.fromJSON(n)}async function u(e,t,r){const s=(0,n.p)(e),a={...r},u=i.Z.from(t),{data:l}=await(0,o.e)(s,u,u.sourceSpatialReference,a);return l}},6502:(e,t,r)=>{r.d(t,{e:()=>p});var n=r(20438),o=r(71252),s=r(92847),i=r(40267),a=r(49214),u=(r(87258),r(31292));function l(e,t){return t}function c(e,t,r,n){switch(r){case 0:return m(e,t+n,0);case 1:return"lowerLeft"===e.originPosition?m(e,t+n,1):function({translate:e,scale:t},r,n){return e[n]-r*t[n]}(e,t+n,1)}}function h(e,t,r,n){return 2===r?m(e,t,2):c(e,t,r,n)}function d(e,t,r,n){return 2===r?m(e,t,3):c(e,t,r,n)}function f(e,t,r,n){return 3===r?m(e,t,3):h(e,t,r,n)}function m({translate:e,scale:t},r,n){return e[n]+r*t[n]}class y{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=l,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const t=(0,s.g)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=t)for(const r of e.features)t(r.geometry)}createSpatialReference(){return{}}addField(e,t){const r=e.fields;(0,o.b)(r),r.push(t);const n=r.map((e=>e.name));this._attributesConstructor=function(){for(const e of n)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++,e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this._lengths.length&&(this._toAddInCurrentPath=t),this._lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:n}=t,o=(0,i.u)(r.clone(),r,!1,!1,this._transform),s=(0,i.b)(o,n,!1,!1);e.queryGeometryType=n,e.queryGeometry={...s}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){const n=this._transform;switch(t=this._applyTransform(n,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:"z"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;t<=1&&(r=this._previousCoordinate[t],this._previousCoordinate[t]+=e);const n=this._transform;return this._applyTransform(n,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const n=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(n)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?f:t?h:r?d:c}}async function p(e,t,r){const o=(0,n.p)(e),s={...r},i=u.Z.from(t),l=!i.quantizationParameters,{data:c}=await(0,a.d)(o,i,new y({sourceSpatialReference:i.sourceSpatialReference,applyTransform:l}),s);return c}},40267:(e,t,r)=>{r.d(t,{a:()=>J,b:()=>B,c:()=>L,d:()=>U,e:()=>Q,f:()=>Y,g:()=>re,h:()=>z,i:()=>K,j:()=>I,k:()=>q,l:()=>k,m:()=>D,n:()=>H,o:()=>X,p:()=>v,q:()=>W,r:()=>oe,t:()=>ie,u:()=>ne,v:()=>$});var n=r(60991),o=r(92143),s=r(71252),i=r(53326),a=r(92482),u=r(32422),l=r(85674),c=r(9006),h=r(16204);function d(e,t){return e?t?4:3:t?3:2}const f=()=>o.L.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},y=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s},p=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2]},g=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+3]},b=(e,t,r,n,o,s)=>{e[r]=o,e[r+1]=s,e[r+2]=t[n+2],e[r+3]=t[n+3]};function _(e,t,r,n){if(e){if(r)return t&&n?b:p;if(t&&n)return g}else if(t&&n)return p;return y}function F({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function w({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function x({scale:e,translate:t},r,n){return r*e[n]+t[n]}function I(e,t,r){return e?t?r?N(e):G(e):r?T(e):C(e):null}function C(e){const t=e.coords;return{x:t[0],y:t[1]}}function P(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function G(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function S(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function T(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function Z(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function N(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function M(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function O(e,t){return e&&t?M:e?S:t?Z:P}function v(e,t,r=O(null!=t.z,null!=t.m)){return r(e,t)}function D(e,t,r){if(null==e)return null;const n=d(t,r),o=[];for(let t=0;t<e.coords.length;t+=n){const r=[];for(let o=0;o<n;o++)r.push(e.coords[t+o]);o.push(r)}return t?r?{points:o,hasZ:t,hasM:r}:{points:o,hasZ:t}:r?{points:o,hasM:r}:{points:o}}function R(e,t,r=d(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const n=e.coords;let o=0;for(const e of t.points)for(let t=0;t<r;t++)n[o++]=e[t];return e}function q(e,t,r){if(!e)return null;const n=d(t,r),{coords:o,lengths:s}=e,i=[];let a=0;for(const e of s){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<n;t++)e.push(o[a++]);t.push(e)}i.push(t)}return t?r?{paths:i,hasZ:t,hasM:r}:{paths:i,hasZ:t}:r?{paths:i,hasM:r}:{paths:i}}function j(e,t,r=d(t.hasZ,t.hasM)){const{lengths:n,coords:o}=e;let s=0;for(const e of t.paths){for(const t of e)for(let e=0;e<r;e++)o[s++]=t[e];n.push(e.length)}return e}function k(e,t,r){if(!e)return null;const n=d(t,r),{coords:o,lengths:s}=e,i=[];let a=0;for(const e of s){const t=[];for(let r=0;r<e;r++){const e=[];for(let t=0;t<n;t++)e.push(o[a++]);t.push(e)}i.push(t)}return t?r?{rings:i,hasZ:t,hasM:r}:{rings:i,hasZ:t}:r?{rings:i,hasM:r}:{rings:i}}function L(e,t,r=t.hasZ,n=t.hasM){return function(e,t,r,n){const o=d(r,n),{lengths:s,coords:i}=e;let a=0;ae(e);for(const e of t){for(const t of e)for(let e=0;e<o;e++)i[a++]=t[e];s.push(e.length)}return e}(e,t.rings,r,n)}const V=[],A=[];function z(e,t,r,n,o){V[0]=e;const[s]=Q(A,V,t,r,n,o);return ue(V),ue(A),s}function Q(e,t,r,o,s,i){if(ue(e),!r){for(const r of t){const t=i?r.attributes[i]:void 0;e.push(new l.O(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return function(e,t,r,n,o){const s=O(r,n);for(const{geometry:r,attributes:n}of t){const t=null!=r?s(new h.O,r):null;e.push(new l.O(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryMultipoint":return function(e,t,r,n,o){const s=d(r,n);for(const{geometry:r,attributes:n}of t){const t=null!=r?R(new h.O,r,s):null;e.push(new l.O(t,n,null,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolyline":return function(e,t,r,n,o){const s=d(r,n);for(const{geometry:r,attributes:n,centroid:i}of t){const t=null!=r?j(new h.O,r,s):null,a=null!=i?v(new h.O,i):null;e.push(new l.O(t,n,a,o?n[o]:void 0))}return e}(e,t,o,s,i);case"esriGeometryPolygon":return function(e,t,r,n,o){for(const{geometry:s,centroid:i,attributes:a}of t){const t=null!=s?L(new h.O,s,r,n):null,u=o?a[o]:void 0;null!=i?e.push(new l.O(t,a,P(new h.O,i),u)):e.push(new l.O(t,a,null,u))}return e}(e,t,o,s,i);default:f().error("convertToFeatureSet:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${r}'`)),ue(e)}return e}function Y(e,t,r,n){A[0]=e,E(V,A,t,r,n);const o=V[0];return ue(V),ue(A),o}function U(e,t,r){if(null==e)return null;const o=new h.O;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,u.wp)(e)?O(null!=t?t:null!=e.z,null!=r?r:null!=e.m)(o,e):(0,u.oU)(e)?L(o,e,t,r):(0,u.l9)(e)?j(o,e,d(t,r)):(0,u.aW)(e)?R(o,e,d(t,r)):void f().error("convertFromGeometry:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${e}'`))}function B(e,t,r,o){const s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(t){case"esriGeometryPoint":{let e=C;return r&&o?e=N:r?e=G:o&&(e=T),e(s)}case"esriGeometryMultipoint":return D(s,r,o);case"esriGeometryPolyline":return q(s,r,o);case"esriGeometryPolygon":return k(s,r,o);default:return f().error("convertToGeometry:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${t}'`)),null}}function E(e,t,r,o,s){if(ue(e),null==r)return function(e,t){for(const r of t)e.push({attributes:r.attributes});return e}(e,t);switch(r){case"esriGeometryPoint":return function(e,t,r,n){let o=C;r&&n?o=N:r?o=G:n&&(o=T);for(const r of t){const{geometry:t,attributes:n}=r,s=null!=t?o(t):null;e.push({attributes:n,geometry:s})}return e}(e,t,o,s);case"esriGeometryMultipoint":return function(e,t,r,n){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?D(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolyline":return function(e,t,r,n){for(const{geometry:o,attributes:s}of t)e.push({attributes:s,geometry:null!=o?q(o,r,n):null});return e}(e,t,o,s);case"esriGeometryPolygon":return function(e,t,r,n){for(const{geometry:o,attributes:s,centroid:i}of t){const t=null!=o?k(o,r,n):null;if(null!=i){const r=C(i);e.push({attributes:s,centroid:r,geometry:t})}else e.push({attributes:s,geometry:t})}return e}(e,t,o,s);default:f().error("convertToFeatureSet:unknown-geometry",new n.Z(`Unable to parse unknown geometry type '${r}'`))}return e}function J(e){const{objectIdFieldName:t,spatialReference:r,transform:n,fields:o,hasM:s,hasZ:i,features:a,geometryType:u,exceededTransferLimit:l,uniqueIdField:c,queryGeometry:h,queryGeometryType:d}=e,f={features:E([],a,u,i,s),fields:o,geometryType:u,objectIdFieldName:t,spatialReference:r,uniqueIdField:c,queryGeometry:B(h,d,!1,!1)};return n&&(f.transform=n),l&&(f.exceededTransferLimit=l),s&&(f.hasM=s),i&&(f.hasZ=i),f}function X(e,t){const r=new c.O,{hasM:o,hasZ:s,features:i,objectIdFieldName:a,spatialReference:u,geometryType:l,exceededTransferLimit:h,transform:d,fields:m}=e;return m&&(r.fields=m),r.geometryType=l??null,r.objectIdFieldName=a??t??null,r.spatialReference=u??null,r.objectIdFieldName?(i&&Q(r.features,i,l,s,o,r.objectIdFieldName),h&&(r.exceededTransferLimit=h),o&&(r.hasM=o),s&&(r.hasZ=s),d&&(r.transform=d),r):(f().error(new n.Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function H(e){const{transform:t,features:r,hasM:n,hasZ:o}=e;if(!t)return e;for(const e of r)null!=e.geometry&&ne(e.geometry,e.geometry,n,o,t),null!=e.centroid&&ne(e.centroid,e.centroid,n,o,t);return e.transform=null,e}function $(e,t){const{geometryType:r,features:n,hasM:o,hasZ:s}=t;if(!e)return t;for(let t=0;t<n.length;t++){const i=n[t],a=i.weakClone();a.geometry=new h.O,W(a.geometry,i.geometry,o,s,r,e),i.centroid&&(a.centroid=new h.O,W(a.centroid,i.centroid,o,s,"esriGeometryPoint",e)),n[t]=a}return t.transform=e,t}function W(e,t,r,n,o,s,i=r,a=n){if(ae(e),!t?.coords.length)return null;const u=m[o],{coords:l,lengths:c}=t,h=d(r,n),f=d(r&&i,n&&a),y=_(r,n,i,a);if(!c.length)return y(e.coords,l,0,0,F(s,l[0]),w(s,l[1])),ae(e,h,0),e;let p,g,b,x,I=0,C=0,P=C;for(const t of c){if(t<u)continue;let r=0;C=P,b=p=F(s,l[I]),x=g=w(s,l[I+1]),y(e.coords,l,C,I,b,x),r++,I+=h,C+=f;for(let n=1;n<t;n++,I+=h)b=F(s,l[I]),x=w(s,l[I+1]),b===p&&x===g||(y(e.coords,l,C,I,b-p,x-g),C+=f,r++,p=b,g=x);r>=u&&(e.lengths.push(r),P=C)}return ue(e.coords,P),e.coords.length?e:null}function K(e,t,r,n,o,s,i=r,a=n){if(ae(e),!t?.coords.length)return null;const u=m[o],{coords:l,lengths:c}=t,h=d(r,n),f=d(r&&i,n&&a),y=_(r,n,i,a);if(!c.length)return y(e.coords,l,0,0,l[0],l[1]),ae(e,h,0),e;let p=0;const g=s*s;for(const t of c){if(t<u){p+=t*h;continue}const r=e.coords.length/f,n=p,o=p+(t-1)*h;y(e.coords,l,e.coords.length,n,l[n],l[n+1]),te(e.coords,l,h,g,y,n,o),y(e.coords,l,e.coords.length,o,l[o],l[o+1]);const s=e.coords.length/f-r;s>=u?e.lengths.push(s):ue(e.coords,r*f),p+=t*h}return e.coords.length?e:null}function ee(e,t,r,n){const o=e[t],s=e[t+1],i=e[r],a=e[r+1],u=e[n],l=e[n+1];let c=i,h=a,d=u-c,f=l-h;if(0!==d||0!==f){const e=((o-c)*d+(s-h)*f)/(d*d+f*f);e>1?(c=u,h=l):e>0&&(c+=d*e,h+=f*e)}return d=o-c,f=s-h,d*d+f*f}function te(e,t,r,n,o,s,i){let a,u=n,l=0;for(let e=s+r;e<i;e+=r)a=ee(t,e,s,i),a>u&&(l=e,u=a);u>n&&(l-s>r&&te(e,t,r,n,o,s,l),o(e,t,e.length,l,t[l],t[l+1]),i-l>r&&te(e,t,r,n,o,l,i))}function re(e,t,r,n){if(!t?.coords?.length)return null;const o=d(r,n);let s=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=o){const r=e[t],n=e[t+1];s=Math.min(s,r),l=Math.max(l,r),u=Math.min(u,n),c=Math.max(c,n)}}return(0,i.i)(e)?(0,i.g)(e,s,u,l,c):(0,a.f)(s,u,l,c,e),e}function ne(e,t,r,n,o){const{coords:i,lengths:a}=t,u=d(r,n);if(!i.length)return e!==t&&ae(e),e;(0,s.b)(o);const{originPosition:l,scale:c,translate:h}=o,f=le;f.originPosition=l;const m=f.scale;m[0]=c[0]??1,m[1]=-(c[1]??1),m[2]=c[2]??1,m[3]=c[3]??1;const y=f.translate;if(y[0]=h[0]??0,y[1]=h[1]??0,y[2]=h[2]??0,y[3]=h[3]??0,!a.length){for(let t=0;t<u;++t)e.coords[t]=x(f,i[t],t);return e!==t&&ae(e,u,0),e}let p=0;for(let t=0;t<a.length;t++){const r=a[t];e.lengths[t]=r;for(let t=0;t<u;++t)e.coords[p+t]=x(f,i[p+t],t);let n=e.coords[p],o=e.coords[p+1];p+=u;for(let t=1;t<r;t++,p+=u){n+=i[p]*m[0],o+=i[p+1]*m[1],e.coords[p]=n,e.coords[p+1]=o;for(let t=2;t<u;++t)e.coords[p+t]=x(f,i[p+t],t)}}return e!==t&&ae(e,i.length,a.length),e}function oe(e,t,r,n,o,s){if(ae(e),e.lengths.push(...t.lengths),r===o&&n===s)for(let r=0;r<t.coords.length;r++)e.coords.push(t.coords[r]);else{const i=d(r,n),a=_(r,n,o,s),u=t.coords;for(let t=0;t<u.length;t+=i)a(e.coords,u,e.coords.length,t,u[t],u[t+1])}return e}function se(e,t,r,n){let o=0,s=e[n*t],i=e[n*(t+1)];for(let a=1;a<r;a++){const r=s+e[n*(t+a)],u=i+e[n*(t+a)+1],l=(r-s)*(u+i);s=r,i=u,o+=l}return.5*o}function ie(e,t){const{coords:r,lengths:n}=e;let o=0,s=0;for(let e=0;e<n.length;e++){const i=n[e];s+=se(r,o,i,t),o+=i}return Math.abs(s)}function ae(e,t=0,r=0){ue(e.lengths,r),ue(e.coords,t)}function ue(e,t=0){e.length!==t&&(e.length=t)}const le={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},13235:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>a,c:()=>m,d:()=>u,f:()=>o,g:()=>l,i:()=>s});const n=[["binary","application/octet-stream","bin",""]];function o(e,t){return null!=h(t.name,e?.supportedFormats??[])}function s(e,t){if(!e)return!1;const r=l(t,e.supportedFormats??[]);return null!=r&&e.editFormats.includes(r)}function i(e,t){return d(function(e,t){const r=e.toLowerCase();return c(t).find((e=>f(e)===r))}(e,t))}function a(e,t){return d(h(e,t))}function u(e,t){return f(function(e,t){return c(t).find((t=>d(t)===e))}(e,t))}function l(e,t){return a(e.name,t)??i(e.type,t)}function c(e){return[...n,...e]}function h(e,t){const r=e.toLowerCase();return c(t).find((e=>function(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}(e).some((e=>r.endsWith(e)))))}function d(e){return e?.[0]}function f(e){return e?.[1].toLowerCase()}function m(e){return e.tables?.find((e=>"assetMaps"===e.role))}}}]);