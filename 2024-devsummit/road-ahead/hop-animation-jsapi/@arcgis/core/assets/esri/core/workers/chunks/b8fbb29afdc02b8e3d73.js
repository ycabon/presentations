"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[3296,7880],{78537:(t,e,s)=>{s.d(e,{B:()=>O});const i=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],n=["آ","أ","إ","ا"],r=["ﻵ","ﻷ","ﻹ","ﻻ"],h=["ﻶ","ﻸ","ﻺ","ﻼ"],o=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],a=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],c=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],l=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],u=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],_=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],f=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],p=["ء","ف"],d=["غ","ي"],g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],P=0,x=1,y=2,b=3,M=4,S=5,C=6,w=7,z=8,A=11,v=12,L=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],T=100,I=10,k=18,E=[T+0,P,P,P,P,T+1,T+2,T+3,x,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,T+4,M,M,M,P,M,P,M,P,M,M,M,P,P,M,M,P,P,P,P,P,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,P,P,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,P,P,M,M,P,P,M,M,P,P,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,P,P,P,T+5,w,w,T+6,T+7],N=[[k,k,k,k,k,k,k,k,k,C,S,C,z,S,k,k,k,k,k,k,k,k,k,k,k,k,k,k,S,S,S,C,z,M,M,A,A,A,M,M,M,M,M,I,9,I,9,9,y,y,y,y,y,y,y,y,y,y,9,M,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,M,k,k,k,k,k,k,S,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,9,M,A,A,A,A,M,M,M,M,P,M,M,k,M,M,A,A,y,y,M,P,M,M,M,y,P,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,P,P,P,P,P,P,P,P],[P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,M,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,P,P,P,P,P,P,P,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,P,M,M,M,M,M,M,M,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,x,v,x,v,v,x,v,v,x,v,M,M,M,M,M,M,M,M,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,M,M,M,M,M,x,x,x,x,x,M,M,M,M,M,M,M,M,M,M,M],[b,b,b,b,M,M,M,M,w,A,A,w,9,w,M,M,v,v,v,v,v,v,v,v,v,v,v,w,M,M,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,b,b,b,b,b,b,b,b,b,b,A,b,b,w,w,w,v,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,v,v,v,v,v,v,v,b,M,v,v,v,v,v,v,w,w,v,v,M,v,v,v,v,w,w,y,y,y,y,y,y,y,y,y,y,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,M,w,w,v,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,M,M,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,v,v,v,v,v,v,v,v,v,v,v,w,M,M,M,M,M,M,M,M,M,M,M,M,M,M,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,v,v,v,v,v,v,v,v,v,x,x,M,M,M,M,x,M,M,M,M,M],[z,z,z,z,z,z,z,z,z,z,z,k,k,k,P,x,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,z,S,13,14,15,16,17,9,A,A,A,A,A,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,9,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,z,k,k,k,k,k,M,M,M,M,M,k,k,k,k,k,k,y,P,M,M,y,y,y,y,y,y,I,I,M,M,M,P,y,y,y,y,y,y,y,y,y,y,I,I,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M],[P,P,P,P,P,P,P,M,M,M,M,M,M,M,M,M,M,M,M,P,P,P,P,P,M,M,M,M,M,x,v,x,x,x,x,x,x,x,x,x,x,I,x,x,x,x,x,x,x,x,x,x,x,x,x,M,x,x,x,x,x,M,x,M,x,x,M,x,x,M,x,x,x,x,x,x,x,x,x,x,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,v,v,v,v,v,v,v,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,9,M,9,M,M,9,M,M,M,M,M,M,M,M,M,A,M,M,I,I,M,M,M,M,M,A,A,M,M,M,M,M,w,w,w,w,w,M,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,M,M,k],[M,M,M,A,A,A,M,M,M,M,M,I,9,I,9,9,y,y,y,y,y,y,y,y,y,y,9,M,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,M,M,M,M,M,M,M,M,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,P,M,M,M,P,P,P,P,P,P,M,M,P,P,P,P,P,P,M,M,P,P,P,P,P,P,M,M,P,P,P,M,M,M,A,A,M,M,M,A,A,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M]];class O{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(t,e,s){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(function(t,e,s){it=[],rt=[];for(let i=0;i<s;i++)t[i]=i,e[i]=i,it[i]=i}(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(e,s))return t;e=this.inputFormat,s=this.outputFormat;let i=t;const o=ht,l=Q(e.charAt(1)),_=Q(s.charAt(1)),p=("I"===e.charAt(0)?"L":e.charAt(0))+l,d=("I"===s.charAt(0)?"L":s.charAt(0))+_,g=e.charAt(2)+s.charAt(2);o.defInFormat=p,o.defOutFormat=d,o.defSwap=g;const m=G(t,p,d,g,o);let P=!1;return"R"===s.charAt(1)?P=!0:"C"!==s.charAt(1)&&"D"!==s.charAt(1)||(P="rtl"===this.checkContextual(m)),this.sourceToTarget=it,this.targetToSource=function(t){const e=new Array(t.length);for(let s=0;s<t.length;s++)e[t[s]]=s;return e}(this.sourceToTarget),nt=this.targetToSource,i=e.charAt(3)===s.charAt(3)?m:"S"===s.charAt(3)?function(t,e,s){if(0===e.length)return"";void 0===t&&(t=!0),void 0===s&&(s=!0);const i=(e=String(e)).split("");let n=0,o=1,l=i.length;t||(n=i.length-1,o=-1,l=1);const _=function(t,e,s,i,n){let o=0;const l=[];let _=0;for(let f=e;f*s<i;f+=s)if(U(t[f])||$(t[f])){if("ل"===t[f]&&D(t,f+s,s,i)){t[f]=et(t[f+s],0===o?r:h),f+=s,tt(t,f,s,i),n&&(l[_]=f,_++),o=0;continue}const e=t[f];1===o?t[f]=H(t,f+s,s,i)?q(t[f]):K(t[f],c):!0===H(t,f+s,s,i)?t[f]=K(t[f],u):t[f]=K(t[f],a),$(e)||(o=1),!0===j(e)&&(o=0)}else o=0;return l}(i,n,o,l,s);let f="";for(let e=0;e<i.length;e++)s&&V(_,_.length,e)>-1?(st(nt,e,!t,-1),it.splice(e,1)):f+=i[e];return f}(P,m,!0):function(t,e,s){if(0===t.length)return"";void 0===s&&(s=!0),void 0===e&&(e=!0);let i="";const r=(t=String(t)).split("");for(let h=0;h<t.length;h++){let o=!1;if(r[h]>="ﹰ"&&r[h]<"\ufeff"){const a=t.charCodeAt(h);r[h]>="ﻵ"&&r[h]<="ﻼ"?(e?(h>0&&s&&" "===r[h-1]?i=i.substring(0,i.length-1)+"ل":(i+="ل",o=!0),i+=n[(a-65269)/2]):(i+=n[(a-65269)/2],i+="ل",h+1<t.length&&s&&" "===r[h+1]?h++:o=!0),o&&(st(nt,h,!0,1),it.splice(h,0,it[h]))):i+=f[a-65136]}else i+=r[h]}return i}(m,P,!0),this.sourceToTarget=it,this.targetToSource=nt,this.levels=rt,i}_inputFormatSetter(t){if(!ut.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}_outputFormatSetter(t){if(!ut.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}checkParameters(t,e){return t?this._inputFormatSetter(t):t=this.inputFormat,e?this._outputFormatSetter(e):e=this.outputFormat,t!==e}checkContextual(t){let e=F(t);if("ltr"!==e&&"rtl"!==e){try{e=document.dir.toLowerCase()}catch(t){}"ltr"!==e&&"rtl"!==e&&(e="ltr")}return e}hasBidiChar(t){return _t.test(t)}}function G(t,e,s,i,n){const r=function(t,e,s){if(void 0===e.inFormat&&(e.inFormat=s.defInFormat),void 0===e.outFormat&&(e.outFormat=s.defOutFormat),void 0===e.swap&&(e.swap=s.defSwap),e.inFormat===e.outFormat)return e;const i=e.inFormat.substring(0,1),n=e.outFormat.substring(0,1);let r,h=e.inFormat.substring(1,4),o=e.outFormat.substring(1,4);return"C"===h.charAt(0)&&(r=F(t),h="ltr"===r||"rtl"===r?r.toUpperCase():"L"===e.inFormat.charAt(2)?"LTR":"RTL",e.inFormat=i+h),"C"===o.charAt(0)&&(r=F(t),"rtl"===r?o="RTL":"ltr"===r?(r=function(t){const e=t.split("");return e.reverse(),F(e.join(""))}(t),o=r.toUpperCase()):o="L"===e.outFormat.charAt(2)?"LTR":"RTL",e.outFormat=n+o),e}(t,{inFormat:e,outFormat:s,swap:i},n);if(r.inFormat===r.outFormat)return t;e=r.inFormat,s=r.outFormat,i=r.swap;const h=e.substring(0,1),o=e.substring(1,4),a=s.substring(0,1),c=s.substring(1,4);if(n.inFormat=e,n.outFormat=s,n.swap=i,"L"===h&&"VLTR"===s){if("LTR"===o)return n.dir=ct,R(t,n);if("RTL"===o)return n.dir=lt,R(t,n)}if("V"===h&&"V"===a)return n.dir="RTL"===o?lt:ct,Y(t,n);if("L"===h&&"VRTL"===s)return"LTR"===o?(n.dir=ct,t=R(t,n)):(n.dir=lt,t=R(t,n)),Y(t);if("VLTR"===e&&"LLTR"===s)return n.dir=ct,R(t,n);if("V"===h&&"L"===a&&o!==c)return t=Y(t),"RTL"===o?G(t,"LLTR","VLTR",i,n):G(t,"LRTL","VRTL",i,n);if("VRTL"===e&&"LRTL"===s)return G(t,"LRTL","VRTL",i,n);if("L"===h&&"L"===a){const e=n.swap;return n.swap=e.substr(0,1)+"N","RTL"===o?(n.dir=lt,t=R(t,n),n.swap="N"+e.substr(1,2),n.dir=ct,t=R(t,n)):(n.dir=ct,t=R(t,n),n.swap="N"+e.substr(1,2),t=G(t,"VLTR","LRTL",n.swap,n)),t}return t}function F(t){const e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return e?e[0]<="z"?"ltr":"rtl":""}function R(t,e){const s=t.split(""),i=[];return B(s,i,e),function(t,e,s){if(0!==s.hiLevel&&s.swap.substr(0,1)!==s.swap.substr(1,2))for(let s=0;s<t.length;s++)1===e[s]&&(t[s]=Z(t[s]))}(s,i,e),W(2,s,i,e),W(1,s,i,e),rt=i,s.join("")}function B(t,e,s){const i=t.length,n=s.dir?m:g;let r=0,h=-1;const o=[],a=[];s.hiLevel=s.dir,s.lastArabic=!1,s.hasUbatAl=!1,s.hasUbatB=!1,s.hasUbatS=!1;for(let e=0;e<i;e++)o[e]=X(t[e]);for(let c=0;c<i;c++){const i=r,l=J(t,o,a,c,s);a[c]=l,r=n[i][l];const u=240&r;r&=15;const _=n[r][ot];if(e[c]=_,u>0)if(16===u){for(let t=h;t<c;t++)e[t]=1;h=-1}else h=-1;if(n[r][at])-1===h&&(h=c);else if(h>-1){for(let t=h;t<c;t++)e[t]=_;h=-1}o[c]===S&&(e[c]=0),s.hiLevel|=_}s.hasUbatS&&function(t,e,s,i){for(let n=0;n<s;n++)if(t[n]===C){e[n]=i.dir;for(let s=n-1;s>=0&&t[s]===z;s--)e[s]=i.dir}}(o,e,i,s)}function X(t){const e=t.charCodeAt(0),s=E[e>>8];return s<T?s:N[s-T][255&e]}function Y(t,e){const s=t.split("");if(e){const t=[];B(s,t,e),rt=t}return s.reverse(),it.reverse(),s.join("")}function V(t,e,s){for(let i=0;i<e;i++)if(t[i]===s)return i;return-1}function U(t){for(let e=0;e<p.length;e++)if(t>=p[e]&&t<=d[e])return!0;return!1}function H(t,e,s,i){for(;e*s<i&&$(t[e]);)e+=s;return!!(e*s<i&&U(t[e]))}function D(t,e,s,i){for(;e*s<i&&$(t[e]);)e+=s;let r=" ";if(!(e*s<i))return!1;r=t[e];for(let t=0;t<n.length;t++)if(n[t]===r)return!0;return!1}function W(t,e,s,i){if(i.hiLevel<t)return;if(1===t&&i.dir===lt&&!i.hasUbatB)return e.reverse(),void it.reverse();const n=e.length;let r,h,o,a,c,l=0;for(;l<n;){if(s[l]>=t){for(r=l+1;r<n&&s[r]>=t;)r++;for(h=l,o=r-1;h<o;h++,o--)a=e[h],e[h]=e[o],e[o]=a,c=it[h],it[h]=it[o],it[o]=c;l=r}l++}}function J(t,e,s,i,n){const r=e[i];return{UBAT_L:()=>(n.lastArabic=!1,P),UBAT_R:()=>(n.lastArabic=!1,x),UBAT_ON:()=>M,UBAT_AN:()=>b,UBAT_EN:()=>n.lastArabic?b:y,UBAT_AL:()=>(n.lastArabic=!0,n.hasUbatAl=!0,x),UBAT_WS:()=>M,UBAT_CS:()=>{let t,r;return i<1||i+1>=e.length||(t=s[i-1])!==y&&t!==b||(r=e[i+1])!==y&&r!==b?M:(n.lastArabic&&(r=b),r===t?r:M)},UBAT_ES:()=>(i>0?s[i-1]:S)===y&&i+1<e.length&&e[i+1]===y?y:M,UBAT_ET:()=>{if(i>0&&s[i-1]===y)return y;if(n.lastArabic)return M;let t=i+1;const r=e.length;for(;t<r&&e[t]===A;)t++;return t<r&&e[t]===y?y:M},UBAT_NSM:()=>{if("VLTR"===n.inFormat){const s=e.length;let n=i+1;for(;n<s&&e[n]===v;)n++;if(n<s){const s=t[i].charCodeAt(0),r=s>=1425&&s<=2303||64286===s,h=e[n];if(r&&(h===x||h===w))return x}}return i<1||e[i-1]===S?M:s[i-1]},UBAT_B:()=>(n.lastArabic=!0,n.hasUbatB=!0,n.dir),UBAT_S:()=>(n.hasUbatS=!0,M),UBAT_LRE:()=>(n.lastArabic=!1,M),UBAT_RLE:()=>(n.lastArabic=!1,M),UBAT_LRO:()=>(n.lastArabic=!1,M),UBAT_RLO:()=>(n.lastArabic=!1,M),UBAT_PDF:()=>(n.lastArabic=!1,M),UBAT_BN:()=>M}[L[r]]()}function Z(t){let e,s=0,n=i.length-1;for(;s<=n;)if(e=Math.floor((s+n)/2),t<i[e][0])n=e-1;else{if(!(t>i[e][0]))return i[e][1];s=e+1}return t}function j(t){for(let e=0;e<_.length;e++)if(_[e]===t)return!0;return!1}function q(t){for(let e=0;e<o.length;e++)if(t===o[e])return l[e];return t}function K(t,e){for(let s=0;s<o.length;s++)if(t===o[s])return e[s];return t}function $(t){return t>="ً"&&t<="ٕ"}function Q(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function tt(t,e,s,i){for(;e*s<i&&$(t[e]);)e+=s;return e*s<i&&(t[e]=" ",!0)}function et(t,e){for(let s=0;s<n.length;s++)if(t===n[s])return e[s];return t}function st(t,e,s,i){for(let n=0;n<t.length;n++)(t[n]>e||!s&&t[n]===e)&&(t[n]+=i)}let it=[],nt=[],rt=[];const ht={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},ot=5,at=6,ct=0,lt=1,ut=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,_t=/[\u0591-\u06ff\ufb1d-\ufefc]/},70766:(t,e,s)=>{s.d(e,{B:()=>n});var i=s(87372);class n{constructor(t,e,s,n){this.computedX=0,this.computedY=0,this.center=(0,i.f)(t,e),this.centerT=(0,i.c)(),this.halfWidth=s/2,this.halfHeight=n/2,this.width=s,this.height=n}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new n(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,e=4){const s=Math.abs(t.centerT[0]-this.centerT[0]),i=Math.abs(t.centerT[1]-this.centerT[1]),n=(t.halfWidth+this.halfWidth+e)/s,r=(t.halfHeight+this.halfHeight+e)/i,h=Math.min(n,r);return Math.log2(h)}extend(t){const e=Math.min(this.xmin,t.xmin),s=Math.min(this.ymin,t.ymin),i=Math.max(this.xmax,t.xmax)-e,n=Math.max(this.ymax,t.ymax)-s,r=e+i/2,h=s+n/2;this.width=i,this.height=n,this.halfWidth=i/2,this.halfHeight=n/2,this.x=r,this.y=h}static deserialize(t){const e=t.readF32(),s=t.readF32(),i=t.readInt32(),r=t.readInt32();return new n(e,s,i,r)}}},30726:(t,e,s)=>{s.d(e,{G:()=>m,S:()=>w,f:()=>Kt,g:()=>kt,h:()=>Zt,i:()=>jt,r:()=>$t});var i=s(78537),n=s(76506),r=(s(92143),s(92482)),h=s(98380),o=(s(5853),s(13260),s(21972),s(44567)),a=s(32422),c=s(16204),l=s(66992),u=s(70870),_=(s(74569),s(60947)),f=s(63685),p=s(21801),d=s(19124);s(82356),s(2775),s(30439),new i.B;class g{constructor(){this.setIdentity()}getAngle(){return(null==this.rz||0===this.rz&&1!==this.rzCos&&0!==this.rzSin)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(t,e){this.tx=t,this.ty=e}setTranslateZ(t){this.tz=t}setRotateCS(t,e){this.rz=void 0,this.rzCos=t,this.rzSin=e}setRotate(t){this.rz=t,this.rzCos=void 0,this.rzSin=void 0}setRotateY(t){this.ry=t}setScale(t){this.s=t}setMeasure(t){this.m=t}}class m{static fromOptimized(t,e,s=!1,i=!1,n=1){return(new P).initialize(t,e,s,i,n)}static fromJSON(t,e=!1,s=!1){const[i,n]=y(t);return(new b).initialize(i,n,e,s,1)}static fromOptimizedCIM(t,e,s=!1,i=!1,n=1){return(new M).initialize(t,e,s,i,n)}static fromJSONCIM(t,e=!1,s=!1,i=1){const[n,r]=y(t);return(new S).initialize(n,r,e,s,i)}static fromFeatureSetReader(t){const e=t.readGeometryForDisplay(),s=t.geometryType;return e&&s?this.fromOptimized(e,s):null}static fromFeatureSetReaderCIM(t){const e=t.readGeometryForDisplay(),s=t.geometryType;return e&&s?this.fromOptimizedCIM(e,s):null}static createEmptyOptimized(t,e=!1,s=!1,i=1){return(new P).initialize(new c.O,t,e,s,i)}static createEmptyJSON(t,e=!1,s=!1){return(new b).initialize([],t,e,s,1)}static createEmptyOptimizedCIM(t,e=!1,s=!1,i=1){return(new M).initialize(new c.O,t,e,s,i)}static createEmptyJSONCIM(t,e=!1,s=!1,i=1){return(new S).initialize([],t,e,s,i)}asJSON(){const t=(0,o.c)(this);return"esriGeometryEnvelope"===this.geometryType?{xmin:t[0][0][0],ymin:t[0][0][1],xmax:t[0][2][0],ymax:t[0][2][1]}:"esriGeometryMultipoint"===this.geometryType?{points:t.flat()}:"esriGeometryPoint"===this.geometryType?{x:t[0][0][0],y:t[0][0][1]}:"esriGeometryPolygon"===this.geometryType?{rings:t}:{paths:t}}getCurrentRingArea(){if(this.pathSize<3)return 0;let t,e,s=0;if(this.seekPathStart(),!this.nextPoint())return 0;t=this.x,e=this.y;const i=t,n=e;for(;this.nextPoint();)s+=(t-this.x)*(e+this.y),t=this.x,e=this.y;return s+=(t-i)*(e+n),-.5*s}invertY(){this.yFactor*=-1}}class P extends m{constructor(){super(...arguments),this._end=-1}initialize(t,e,s,i,n){return this.hasZ=s,this.hasM=i,this.geometryType=e,this._stride=2+Number(s)+Number(i),this._geometry=t,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=n,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(t){if(t>=0&&t<this.totalSize){if(this._pathIndex<t)for(;this._pathIndex<t&&this.nextPath(););else if(this._pathIndex>t)for(;this._pathIndex>t&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(t){const e=this._pathOffset+t*this._stride;return e>=0&&e<this._end&&(this._pointOffset=e,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){return!(this.pathIndex>=this.totalSize-1||(this._pathIndex>=0&&(this._pathOffset+=this._stride*this.pathSize),this._pathIndex++,this._pointOffset=this._pathOffset-this._stride,this._end=this._pointOffset+this._stride+this._stride*this.pathSize,0))}prevPath(){return!(this.pathIndex<=0||(this._pathIndex--,this._end=this._pathOffset,this._pathOffset-=this._stride*this.pathSize,this._pointOffset=this._pathOffset-this._stride,0))}pathLength(){const t=this._end,e=this._stride,s=this._geometry.coords;let i=0;for(let n=this._pathOffset+e;n<t;n+=e){const t=s[n-e],r=s[n-e+1],h=s[n]-t,o=s[n+1]-r;i+=Math.sqrt(h*h+o*o)}return i}startPath(){this._geometry.lengths.push(0)}pushPath(t){this.startPath(),this.pushPoints(t)}pushPoint(t){for(let e=0;e<this._stride;++e)this._geometry.coords.push(t[e]);this._geometry.lengths[this.totalSize-1]++}pushXY(t,e){this._geometry.coords.push(t,e),this._geometry.lengths[this.totalSize-1]++}pushPoints(t){for(const e of t)for(let t=0;t<this._stride;++t)this._geometry.coords.push(e[t]);this._geometry.lengths[this.totalSize-1]+=t.length}pushCursor(t){const e=t.asOptimized();this._geometry.coords.push(...e.coords),this._geometry.lengths.push(...e.lengths)}asOptimized(){const t=this._geometry.clone();if(1!==this.yFactor)for(let e=1;e<t.coords.length;e+=this._stride)t.coords[e]*=this.yFactor;return"esriGeometryPoint"===this.geometryType&&(t.lengths.length=0),t}isClosed(){const t=this._geometry.coords,e=this._pathOffset,s=this._end-this._stride;for(let i=0;i<this._stride;i++)if(t[e+i]!==t[s+i])return!1;return!0}clone(){return(new P).initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.isPoint?1:this._geometry.lengths.reduce(((t,e)=>t+e))}get pathSize(){const{lengths:t}=this._geometry;return this._pathIndex<0||this._pathIndex>t.length-1?0:this._geometry.isPoint?1:t[this._pathIndex]}get totalSize(){return this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(t){this._geometry.coords[this._pointOffset]=t}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(t){this._geometry.coords[this._pointOffset+1]=this.yFactor*t}get z(){return this._geometry.coords[this._pointOffset+2]}set z(t){this._geometry.coords[this._pointOffset+2]=t}get m(){const t=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+t]}set m(t){this._geometry.coords[this._pointOffset+3]=t}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}}function x(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function y(t){return(0,a.oU)(t)?[t.rings,"esriGeometryPolygon"]:(0,a.l9)(t)?[t.paths,"esriGeometryPolyline"]:(0,a.aW)(t)?[[t.points],"esriGeometryMultipoint"]:(0,a.YX)(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:(0,a.wp)(t)?[[[x(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}class b extends m{initialize(t,e,s,i,n){return this._paths=t,this.geometryType=e,this.hasZ=s,this.hasM=i,this._pathIndex=this._pointIndex=-1,this.yFactor=n,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(t){return this._pathIndex=t,this._pointIndex=-1,t>=0&&t<this.totalSize&&(this._currentPath=this._paths[t],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(t){return t>=0&&t<this._currentPath.length&&(this._pointIndex=t,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this.pathIndex>0&&(this._pointIndex=-1,this._pathIndex--,this._currentPath=this._paths[this._pathIndex],!0)}pathLength(){const t=this._currentPath.length,e=this._currentPath;let s=0;for(let i=1;i<t;i++){const t=e[i-1],n=e[i],r=t[0],h=t[1],o=n[0]-r,a=n[1]-h;s+=Math.sqrt(o*o+a*a)}return s}startPath(){this._paths.push([])}pushPath(t){this._paths.push(t)}pushPoint(t){this._paths[this.totalSize-1].push(t)}pushXY(t,e){this._paths[this.totalSize-1].push([t,e])}pushPoints(t){this._paths[this.totalSize-1].push(...t)}pushCursor(t){const e=(0,o.c)(t);for(const t of e)this.pushPath(t)}asOptimized(){const t=new c.O;if("esriGeometryPoint"===this.geometryType)t.coords.push(...this._paths[0][0]),t.lengths.length=0;else for(const e of this._paths){for(const s of e)t.coords.push(s[0]),t.coords.push(s[1]*this.yFactor),this.hasZ&&t.coords.push(s[2]),this.hasM&&t.coords.push(s[this._mIndex]);t.lengths.push(e.length)}return t}isClosed(){const t=this._currentPath[0],e=this._currentPath[this._currentPath.length-1];for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}clone(){return(new b).initialize((0,n.d9)(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map((t=>t.length)).reduce(((t,e)=>t+e))}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(t){this._currentPoint[0]=t}get y(){return this.yFactor*this._currentPoint[1]}set y(t){this._currentPoint[1]=this.yFactor*t}get z(){return this._currentPoint[2]}set z(t){this._currentPoint[2]=t}get m(){return this._currentPoint[this._mIndex]}set m(t){this._currentPoint[this._mIndex]=t}get pathIndex(){return this._pathIndex}}class M extends P{initialize(t,e,s,i,n){return super.initialize(t,e,s,i,n),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map((t=>new Set))),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const t=(new M).initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return t._controlPoints=this._controlPoints,t}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(t){this._controlPoints[this.pathIndex].add(t)}getControlPointAt(t){return this._controlPoints[this.pathIndex].has(t)}}class S extends b{initialize(t,e,s,i,n){return super.initialize(t,e,s,i,n)}clone(){return(new S).initialize((0,n.d9)(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][4]=1}getControlPoint(){return 1===this._paths[this.pathIndex][this._pointIndex][4]}setControlPointAt(t){this._paths[this.pathIndex][t][4]=1}getControlPointAt(t){return 1===this._paths[this.pathIndex][t][4]}}let C;class w{constructor(t){this._geometry=t}next(){const t=this._geometry;return this._geometry=null,t}}function z(t,e){C||(C=new l.T(0,0,0,1));const s="esriGeometryPolygon"===t.geometryType,i=s?l.G.Polygon:l.G.LineString,n=s?3:2;let r,h;for(C.reset(i),C.setPixelMargin(e+1),C.setExtent(512);t.nextPath();)if(!(t.pathSize<n)){for(t.nextPoint(),r=t.x,h=-t.y,C.moveTo(r,h);t.nextPoint();)r=t.x,h=-t.y,C.lineTo(r,h);s&&C.close()}const o=C.result(!1);if(o){const e=m.createEmptyOptimizedCIM(t.geometryType);for(const t of o){e.startPath();for(const s of t)e.pushXY(s.x,-s.y)}return e.reset(),e}return null}class A{static local(){return null===A.instance&&(A.instance=new A),A.instance}execute(t,e,s,i,n){return new v(t,e,s)}}A.instance=null;class v{constructor(t,e,s){this._inputGeometries=t,this._angleTolerance=void 0!==e.angleTolerance?e.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let t=this._inputGeometries.next();for(;t;){if("esriGeometryPolygon"===t.geometryType)this._isClosed=!0;else if("esriGeometryPolyline"===t.geometryType)this._isClosed=!1;else{if("esriGeometryEnvelope"!==t.geometryType){t=this._inputGeometries.next();continue}if(this._maxCosAngle)return t;this._isClosed=!0}for(;t.nextPath();)this._processPath(t);return t.reset(),t}return null}_processPath(t){if(t.nextPoint()){const e=t.x,s=t.y;let i=e,n=s,r=t.pathSize,h=0,o=0,a=0,c=0,l=0,u=0;this._isClosed&&++r;for(let _=1;t.nextPoint()||_<r;++_){let f,p;this._isClosed&&_===r-1?(f=e,p=s):(f=t.x,p=t.y);const d=f-i,g=p-n,m=Math.sqrt(d*d+g*g);_>1&&m>0&&a>0&&(h*d+o*g)/m/a<=this._maxCosAngle&&t.setControlPointAt(_-1),1===_&&(c=d,l=g,u=m),m>0&&(i=f,n=p,h=d,o=g,a=m)}this._isClosed&&a>0&&u>0&&(h*c+o*l)/u/a<=this._maxCosAngle&&t.setControlPointAt(0)}}}function L(t,e){t[4]=e}class T{constructor(t,e=!0,s=!0,i=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!e&&"esriGeometryPolygon"===t.geometryType||!s&&"esriGeometryPolyline"===t.geometryType?null:t,this.geomUnitsPerPoint=i,this.iteratePath=!1,this.internalPlacement=new g}next(){if(!this.geometryCursor)return null;for(;this.iteratePath||this.geometryCursor.pathIndex<this.geometryCursor.totalSize-1;){this.iteratePath||this.geometryCursor.nextPath();const t=this.processPath(this.geometryCursor);if(t)return t}return this.geometryCursor=null,null}}class I{constructor(t,e,s,i=0){this.isClosed=!1,this.inputGeometries=t,this.acceptPolygon=e,this.acceptPolyline=s,this.geomUnitsPerPoint=i,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let t=this.inputGeometries.next();for(;t&&(this.isClosed=this.acceptPolygon&&"esriGeometryPolygon"===t.geometryType||"esriGeometryEnvelope"===t.geometryType,this.multiPathCursor=t,!this.multiPathCursor);)t=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const t=this.processPath(this.multiPathCursor);if(t)return t}this.multiPathCursor=null}}}const k=.03;class E{constructor(t=0,e=!1){}isEmpty(t){if(!t.nextPoint())return!0;let e,s,i,n;for(e=t.x,s=t.y;t.nextPoint();e=s,s=n)if(i=t.x,n=t.y,i!==e||n!==s)return t.seekPathStart(),!1;return t.seekPathStart(),!0}normalize(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);0!==e&&(t[0]/=e,t[1]/=e)}getLength(t,e,s,i){const n=s-t,r=i-e;return Math.sqrt(n*n+r*r)}getSegLength(t){const[[e,s],[i,n]]=t;return this.getLength(e,s,i,n)}getCoord2D(t,e,s,i,n){return[t+(s-t)*n,e+(i-e)*n]}getSegCoord2D(t,e){const[[s,i],[n,r]]=t;return this.getCoord2D(s,i,n,r,e)}getAngle(t,e,s,i,n){const r=s-t,h=i-e;return Math.atan2(h,r)}getAngleCS(t,e,s,i,n){const r=s-t,h=i-e,o=Math.sqrt(r*r+h*h);return o>0?[r/o,h/o]:[1,0]}getSegAngleCS(t,e){const[[s,i],[n,r]]=t;return this.getAngleCS(s,i,n,r,e)}cut(t,e,s,i,n,r){return[n<=0?[t,e]:this.getCoord2D(t,e,s,i,n),r>=1?[s,i]:this.getCoord2D(t,e,s,i,r)]}getSubCurve(t,e,s){const i=m.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(i,t,e,s)?i:null}appendSubCurve(t,e,s,i){t.startPath(),e.seekPathStart();let n=0,r=!0;if(!e.nextPoint())return!1;let h=e.x,o=e.y;for(;e.nextPoint();){const a=this.getLength(h,o,e.x,e.y);if(0!==a){if(r){if(n+a>s){const c=(s-n)/a;let l=1,u=!1;n+a>=i&&(l=(i-n)/a,u=!0);const _=this.cut(h,o,e.x,e.y,c,l);if(_&&t.pushPoints(_),u)break;r=!1}}else{if(n+a>i){const s=this.cut(h,o,e.x,e.y,0,(i-n)/a);s&&t.pushPoint(s[1]);break}t.pushXY(e.x,e.y)}n+=a,h=e.x,o=e.y}else h=e.x,o=e.y}return!0}getCIMPointAlong(t,e){if(!t.nextPoint())return null;let s,i,n,r,h=0;for(s=t.x,i=t.y;t.nextPoint();s=n,i=r){n=t.x,r=t.y;const o=this.getLength(s,i,n,r);if(0!==o){if(h+o>e){const t=(e-h)/o;return this.getCoord2D(s,i,n,r,t)}h+=o}}return null}offset(t,e,s,i,n){if(!t||t.length<2)return null;let r=0,h=t[r++],o=r;for(;r<t.length;){const e=t[r];e[0]===h[0]&&e[1]===h[1]||(r!==o&&(t[o]=t[r]),h=t[o++]),r++}const a=t[0][0]===t[o-1][0]&&t[0][1]===t[o-1][1];if(a&&--o,o<(a?3:2))return null;const c=[];h=a?t[o-1]:null;let l=t[0];for(let n=0;n<o;n++){const r=n===o-1?a?t[0]:null:t[n+1];if(h)if(r){const t=[r[0]-l[0],r[1]-l[1]];this.normalize(t);const n=[l[0]-h[0],l[1]-h[1]];this.normalize(n);const o=n[0]*t[1]-n[1]*t[0],a=n[0]*t[0]+n[1]*t[1];if(0===o&&1===a){l=r;continue}if(o>=0==e<=0){if(a<1){const s=[t[0]-n[0],t[1]-n[1]];this.normalize(s);const r=Math.sqrt((1+a)/2);if(r>1/i){const t=-Math.abs(e)/r;c.push([l[0]-s[0]*t,l[1]-s[1]*t])}}}else switch(s){case u.G.Mitered:{const s=Math.sqrt((1+a)/2);if(s>0&&1/s<i){const i=[t[0]-n[0],t[1]-n[1]];this.normalize(i);const r=Math.abs(e)/s;c.push([l[0]-i[0]*r,l[1]-i[1]*r]);break}}case u.G.Bevelled:c.push([l[0]+n[1]*e,l[1]-n[0]*e]),c.push([l[0]+t[1]*e,l[1]-t[0]*e]);break;case u.G.Rounded:if(a<1){c.push([l[0]+n[1]*e,l[1]-n[0]*e]);const s=Math.floor(2.5*(1-a));if(s>0){const i=1/s;let r=i;for(let h=1;h<s;h++,r+=i){const s=[n[1]*(1-r)+t[1]*r,-n[0]*(1-r)-t[0]*r];this.normalize(s),c.push([l[0]+s[0]*e,l[1]+s[1]*e])}}c.push([l[0]+t[1]*e,l[1]-t[0]*e])}break;case u.G.Square:default:if(o<0)c.push([l[0]+(n[1]+n[0])*e,l[1]+(n[1]-n[0])*e]),c.push([l[0]+(t[1]-t[0])*e,l[1]-(t[0]+t[1])*e]);else{const s=Math.sqrt((1+Math.abs(a))/2),i=[t[0]-n[0],t[1]-n[1]];this.normalize(i);const r=e/s;c.push([l[0]-i[0]*r,l[1]-i[1]*r])}}}else{const t=[l[0]-h[0],l[1]-h[1]];this.normalize(t),c.push([l[0]+t[1]*e,l[1]-t[0]*e])}else{const t=[r[0]-l[0],r[1]-l[1]];this.normalize(t),c.push([l[0]+t[1]*e,l[1]-t[0]*e])}h=l,l=r}return c.length<(a?3:2)?null:(a&&c.push([c[0][0],c[0][1]]),c)}}const N=1.7320508075688772,O=u.c.OpenEnded;class G{static local(){return null===G.instance&&(G.instance=new G),G.instance}execute(t,e,s,i,n){return new F(t,e,s)}}G.instance=null;class F extends I{constructor(t,e,s){super(t,!1,!0),this._curveHelper=new E,this._width=(void 0!==e.width?e.width:5)*s,this._arrowType=void 0!==e.geometricEffectArrowType?e.geometricEffectArrowType:void 0!==e.arrowType?e.arrowType:O,this._offsetFlattenError=k*s}processPath(t){const e=m.createEmptyOptimizedCIM(t.geometryType);switch(this._arrowType){case u.c.OpenEnded:default:this._constructSimpleArrow(e,t,!0);break;case u.c.Block:this._constructSimpleArrow(e,t,!1);break;case u.c.Crossed:this._constructCrossedArrow(e,t)}return e}_constructSimpleArrow(t,e,s){const i=e.pathLength();let n=this._width;i<2*n&&(n=i/2);const r=this._curveHelper.getSubCurve(e,0,i-n);if(!r||!r.nextPath())return;r.seekPathStart();const h=n/2;if(this._curveHelper.isEmpty(r))return;const a=(0,o.a)(r),c=this._constructOffset(a,-h);if(!c)return;const l=this._constructOffset(a,h);if(!l)return;const u=this._constructArrowBasePoint(c,-h/2);if(!u)return;const _=this._constructArrowBasePoint(l,h/2);if(!_)return;e.seekInPath(e.pathSize-1);const f=[e.x,e.y];t.pushPath(l),t.nextPath(),t.nextPoint(),t.setControlPoint(),t.pushPoint(_),t.nextPoint(),t.setControlPoint(),t.pushPoint(f),t.nextPoint(),t.setControlPoint(),t.pushPoint(u),t.nextPoint(),t.setControlPoint(),t.pushPoints(c.reverse()),t.setControlPoint(),s||(t.setControlPointAt(0),t.setControlPointAt(t.pathSize-1),t.pushPoint(l[0])),t.reset()}_constructCrossedArrow(t,e){const s=e.pathLength();let i=this._width;s<i*(1+N+1)&&(i=s/(1+N+1)),e.seekPathStart();const n=this._curveHelper.getSubCurve(e,0,s-i*(1+N));if(!n)return;n.nextPath();const r=i/2;if(this._curveHelper.isEmpty(n))return;const h=(0,o.a)(n),a=this._constructOffset(h,r);if(!a)return;const c=this._constructOffset(h,-r);if(!c)return;const l=this._curveHelper.getSubCurve(e,0,s-i);if(!l)return;if(l.nextPath(),this._curveHelper.isEmpty(l))return;const u=(0,o.a)(l),_=this._constructOffset(u,r);if(!_)return;const f=this._constructOffset(u,-r);if(!f)return;const p=_[_.length-1],d=this._constructArrowBasePoint(_,r/2);if(!d)return;const g=f[f.length-1],m=this._constructArrowBasePoint(f,-r/2);if(!m)return;e.seekInPath(e.pathSize-1);const P=[e.x,e.y];t.pushPath(a),t.nextPath(),t.nextPoint(),t.setControlPoint(),t.pushPoint(g),t.nextPoint(),t.setControlPoint(),t.pushPoint(m),t.nextPoint(),t.setControlPoint(),t.pushPoint(P),t.nextPoint(),t.setControlPoint(),t.pushPoint(d),t.nextPoint(),t.setControlPoint(),t.pushPoint(p),t.nextPoint(),t.setControlPoint(),t.pushPoints(c.reverse()),t.nextPoint(),t.setControlPoint(),t.reset()}_constructOffset(t,e){return this._curveHelper.offset(t,e,u.G.Rounded,4,this._offsetFlattenError)}_constructArrowBasePoint(t,e){if(!t||t.length<2)return null;const s=t[t.length-2],i=t[t.length-1],n=[i[0]-s[0],i[1]-s[1]];return this._curveHelper.normalize(n),[i[0]+n[1]*e,i[1]-n[0]*e]}}class R{static local(){return null===R.instance&&(R.instance=new R),R.instance}execute(t,e,s,i,n,r){return new B(t,e,s,i,n,r)}}R.instance=null;class B{constructor(t,e,s,i,n,r){this._inputGeometries=t,this._tileKey=i,this._geometryEngine=n,this._curveHelper=new E,this._size=(void 0!==e.size?e.size:1)*s,this._maxInflateSize=r*s,this._offsetFlattenError=k*s}next(){let t;for(;t=this._inputGeometries.next();){if(0===this._size)return t;if("esriGeometryEnvelope"===t.geometryType)if(this._size>0){const e=m.createEmptyOptimizedCIM(t.geometryType),s=(0,o.c)(t)[0],i=this._curveHelper.offset(s,this._size,u.G.Rounded,4,this._offsetFlattenError);if(i)return e.pushPath(i),e}else if(this._size<0){const e=t.asJSON();if(Math.min(e.xmax-e.xmin,e.ymax-e.ymin)+2*this._size>0)return m.fromJSONCIM({xmin:e.xmin-this._size,xmax:e.xmax+this._size,ymin:e.ymin-this._size,ymax:e.ymax+this._size})}const e=this._geometryEngine;if(null==e)return null;const s=this._tileKey?z(t,this._maxInflateSize):t;if(!s)continue;const i=e.buffer(_.Z.WebMercator,s.asJSON(),this._size,1);return i?m.fromJSONCIM(i):null}return null}}class X{static local(){return null===X.instance&&(X.instance=new X),X.instance}execute(t,e,s,i,n){return new Y(t,e,s)}}X.instance=null;class Y{constructor(t,e,s){this._defaultPointSize=20,this._inputGeometries=t,this._geomUnitsPerPoint=s,this._rule=e.rule??u.d.FullGeometry,this._defaultSize=this._defaultPointSize*s}next(){let t;for(;t=this._inputGeometries.next();){const e=this._processGeom((0,o.c)(t));if(e&&e.length)return m.fromJSONCIM({paths:e})}return null}_clone(t){return[t[0],t[1]]}_mid(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}_mix(t,e,s,i){return[t[0]*e+s[0]*i,t[1]*e+s[1]*i]}_add(t,e){return[t[0]+e[0],t[1]+e[1]]}_add2(t,e,s){return[t[0]+e,t[1]+s]}_sub(t,e){return[t[0]-e[0],t[1]-e[1]]}_dist(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}_norm(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}_normalize(t,e=1){const s=e/this._norm(t);t[0]*=s,t[1]*=s}_leftPerpendicular(t){const e=-t[1],s=t[0];t[0]=e,t[1]=s}_leftPerp(t){return[-t[1],t[0]]}_rightPerpendicular(t){const e=t[1],s=-t[0];t[0]=e,t[1]=s}_rightPerp(t){return[t[1],-t[0]]}_dotProduct(t,e){return t[0]*e[0]+t[1]*e[1]}_crossProduct(t,e){return t[0]*e[1]-t[1]*e[0]}_rotateDirect(t,e,s){const i=t[0]*e-t[1]*s,n=t[0]*s+t[1]*e;t[0]=i,t[1]=n}_makeCtrlPt(t){const e=[t[0],t[1]];return L(e,1),e}_addAngledTicks(t,e,s,i){const n=this._sub(s,e);this._normalize(n);const r=this._crossProduct(n,this._sub(i,e));let h;h=r>0?this._rightPerp(n):this._leftPerp(n);const o=Math.abs(r)/2,a=[];a.push([e[0]+(h[0]-n[0])*o,e[1]+(h[1]-n[1])*o]),a.push(e),a.push(s),a.push([s[0]+(h[0]+n[0])*o,s[1]+(h[1]+n[1])*o]),t.push(a)}_addBezier2(t,e,s,i,n){if(0==n--)return void t.push(i);const r=this._mid(e,s),h=this._mid(s,i),o=this._mid(r,h);this._addBezier2(t,e,r,o,n),this._addBezier2(t,o,h,i,n)}_addBezier3(t,e,s,i,n,r){if(0==r--)return void t.push(n);const h=this._mid(e,s),o=this._mid(s,i),a=this._mid(i,n),c=this._mid(h,o),l=this._mid(o,a),u=this._mid(c,l);this._addBezier3(t,e,h,c,u,r),this._addBezier3(t,u,l,a,n,r)}_add90DegArc(t,e,s,i,n){const r=n??this._crossProduct(this._sub(s,e),this._sub(i,e))>0,h=this._mid(e,s),o=this._sub(h,e);r?this._leftPerpendicular(o):this._rightPerpendicular(o),h[0]+=o[0],h[1]+=o[1],this._addBezier3(t,e,this._mix(e,.33333,h,.66667),this._mix(s,.33333,h,.66667),s,4)}_addArrow(t,e,s){const i=e[0],n=e[1],r=e[e.length-1],h=this._sub(i,n);this._normalize(h);const o=this._crossProduct(h,this._sub(r,n)),a=.5*o,c=this._leftPerp(h),l=[r[0]-c[0]*o,r[1]-c[1]*o],u=e.length-1,_=[];_.push(s?[-c[0],-c[1]]:c);let f=[-h[0],-h[1]];for(let t=1;t<u-1;t++){const s=this._sub(e[t+1],e[t]);this._normalize(s);const i=this._dotProduct(s,f),n=this._crossProduct(s,f),r=Math.sqrt((1+i)/2),h=this._sub(s,f);this._normalize(h),h[0]/=r,h[1]/=r,_.push(n<0?[-h[0],-h[1]]:h),f=s}_.push(this._rightPerp(f));for(let s=_.length-1;s>0;s--)t.push([e[s][0]+_[s][0]*a,e[s][1]+_[s][1]*a]);t.push([l[0]+_[0][0]*a,l[1]+_[0][1]*a]),t.push([l[0]+_[0][0]*o,l[1]+_[0][1]*o]),t.push(i),t.push([l[0]-_[0][0]*o,l[1]-_[0][1]*o]),t.push([l[0]-_[0][0]*a,l[1]-_[0][1]*a]);for(let s=1;s<_.length;s++)t.push([e[s][0]-_[s][0]*a,e[s][1]-_[s][1]*a])}_cp2(t,e,s){return t.length>=2?t[1]:this._add2(t[0],e*this._defaultSize,s*this._defaultSize)}_cp3(t,e,s,i){if(t.length>=3)return t[2];const n=this._mix(t[0],1-s,e,s),r=this._sub(e,t[0]);return this._normalize(r),this._rightPerpendicular(r),[n[0]+r[0]*i*this._defaultSize,n[1]+r[1]*i*this._defaultSize]}_arrowPath(t){if(t.length>2)return t;const e=t[0],s=this._cp2(t,-4,0),i=this._sub(e,s);this._normalize(i);const n=this._rightPerp(i);return[e,s,[e[0]+(n[0]-i[0])*this._defaultSize,e[1]+(n[1]-i[1])*this._defaultSize]]}_arrowLastSeg(t){const e=t[0],s=this._cp2(t,-4,0);let i;if(t.length>=3)i=t[t.length-1];else{const t=this._sub(e,s);this._normalize(t);const n=this._rightPerp(t);i=[e[0]+(n[0]-t[0])*this._defaultSize,e[1]+(n[1]-t[1])*this._defaultSize]}return[s,i]}_processGeom(t){if(!t)return null;const e=[];for(const s of t){if(!s||0===s.length)continue;const t=s.length;let i=s[0];switch(this._rule){case u.d.PerpendicularFromFirstSegment:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,.5,4),r=[];r.push(n),r.push(this._mid(i,t)),e.push(r);break}case u.d.ReversedFirstSegment:{const t=this._cp2(s,0,-1);e.push([t,i]);break}case u.d.PerpendicularToSecondSegment:{const t=this._cp2(s,-4,1),n=this._cp3(s,t,.882353,-1.94),r=[];r.push(this._mid(t,n)),r.push(i),e.push(r);break}case u.d.SecondSegmentWithTicks:{const t=this._cp2(s,-4,1),n=this._cp3(s,t,.882353,-1.94),r=this._sub(n,t);let h;h=this._crossProduct(r,this._sub(i,t))>0?this._rightPerp(h):this._leftPerp(r);const o=[];o.push([t[0]+(h[0]-r[0])/3,t[1]+(h[1]-r[1])/3]),o.push(t),o.push(n),o.push([n[0]+(h[0]+r[0])/3,n[1]+(h[1]+r[1])/3]),e.push(o);break}case u.d.DoublePerpendicular:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,.5,3),r=this._mid(i,t),h=this._sub(r,n);this._normalize(h);const o=this._crossProduct(h,this._sub(i,n));this._leftPerpendicular(h);const a=[];a.push(i),a.push([n[0]+h[0]*o,n[1]+h[1]*o]),e.push(a);const c=[];c.push([n[0]-h[0]*o,n[1]-h[1]*o]),c.push(t),e.push(c);break}case u.d.OppositeToFirstSegment:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,.5,3),r=this._mid(i,t),h=this._sub(r,n);this._normalize(h);const o=this._crossProduct(h,this._sub(i,n));this._leftPerpendicular(h);const a=[];a.push([n[0]+h[0]*o,n[1]+h[1]*o]),a.push([n[0]-h[0]*o,n[1]-h[1]*o]),e.push(a);break}case u.d.TriplePerpendicular:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,.5,4),r=this._mid(i,t),h=this._sub(r,n);this._normalize(h);const o=this._crossProduct(h,this._sub(i,n));this._leftPerpendicular(h);const a=[];a.push([n[0]+h[0]*o*.8,n[1]+h[1]*o*.8]),a.push([r[0]+.8*(i[0]-r[0]),r[1]+.8*(i[1]-r[1])]),e.push(a),e.push([n,r]);const c=[];c.push([n[0]-h[0]*o*.8,n[1]-h[1]*o*.8]),c.push([r[0]+.8*(t[0]-r[0]),r[1]+.8*(t[1]-r[1])]),e.push(c);break}case u.d.HalfCircleFirstSegment:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,.5,4),r=this._mid(i,t);let h=this._sub(t,i);const o=Math.cos(Math.PI/18),a=Math.sin(Math.PI/18),c=Math.sqrt((1+o)/2),l=Math.sqrt((1-o)/2),u=[];let _;this._crossProduct(h,this._sub(n,i))>0?(u.push(i),h=this._sub(i,r),_=t):(u.push(t),h=this._sub(t,r),_=i),this._rotateDirect(h,c,l),h[0]/=c,h[1]/=c;for(let t=1;t<=18;t++)u.push(this._add(r,h)),this._rotateDirect(h,o,a);u.push(_),e.push(u);break}case u.d.HalfCircleSecondSegment:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,1,-1);let r=this._sub(i,t);this._normalize(r);const h=this._crossProduct(r,this._sub(n,t))/2;this._leftPerpendicular(r);const o=[t[0]+r[0]*h,t[1]+r[1]*h];r=this._sub(t,o);const a=Math.cos(Math.PI/18);let c=Math.sin(Math.PI/18);h>0&&(c=-c);const l=[t];for(let t=1;t<=18;t++)this._rotateDirect(r,a,c),l.push(this._add(o,r));e.push(l);break}case u.d.HalfCircleExtended:{const n=this._cp2(s,0,-2),r=this._cp3(s,n,1,-1);let h;if(t>=4)h=s[3];else{const t=this._sub(i,n);h=this._add(r,t)}const o=this._dist(n,r)/2/.75,a=this._sub(n,i);this._normalize(a,o);const c=this._sub(r,h);this._normalize(c,o);const l=[h,r];e.push(l);const u=[this._clone(r)];this._addBezier3(u,r,this._add(r,c),this._add(n,a),n,4),u.push(i),e.push(u);break}case u.d.OpenCircle:{const t=this._cp2(s,-2,0),n=this._sub(t,i),r=Math.cos(Math.PI/18),h=-Math.sin(Math.PI/18),o=[t];for(let t=1;t<=33;t++)this._rotateDirect(n,r,h),o.push(this._add(i,n));e.push(o);break}case u.d.CoverageEdgesWithTicks:{const n=this._cp2(s,0,-1);let r,h;if(t>=3)r=s[2];else{const t=this._sub(n,i),e=this._leftPerp(t);r=[i[0]+e[0]-.25*t[0],i[1]+e[1]-.25*t[1]]}if(t>=4)h=s[3];else{const t=this._mid(i,n),e=this._sub(i,n);this._normalize(e),this._leftPerpendicular(e);const s=this._crossProduct(e,this._sub(r,t));this._rightPerpendicular(e),h=[r[0]+e[0]*s*2,r[1]+e[1]*s*2]}const o=this._sub(n,i);let a,c;a=this._crossProduct(o,this._sub(r,i))>0?this._rightPerp(o):this._leftPerp(o),c=[],c.push(r),c.push(i),c.push([i[0]+(a[0]-o[0])/3,i[1]+(a[1]-o[1])/3]),e.push(c),a=this._crossProduct(o,this._sub(h,n))>0?this._rightPerp(a):this._leftPerp(o),c=[],c.push([n[0]+(a[0]+o[0])/3,n[1]+(a[1]+o[1])/3]),c.push(n),c.push(h),e.push(c);break}case u.d.GapExtentWithDoubleTicks:{const n=this._cp2(s,0,2),r=this._cp3(s,n,0,1);let h;if(t>=4)h=s[3];else{const t=this._sub(n,i);h=this._add(r,t)}this._addAngledTicks(e,i,n,this._mid(r,h)),this._addAngledTicks(e,r,h,this._mid(i,n));break}case u.d.GapExtentMidline:{const n=this._cp2(s,2,0),r=this._cp3(s,n,0,1);let h;if(t>=4)h=s[3];else{const t=this._sub(n,i);h=this._add(r,t)}const o=[];o.push(this._mid(i,r)),o.push(this._mid(n,h)),e.push(o);break}case u.d.Chevron:{const n=this._cp2(s,-1,-1);let r;if(t>=3)r=s[2];else{const t=this._sub(n,i);this._leftPerpendicular(t),r=this._add(i,t)}e.push([n,this._makeCtrlPt(i),r]);break}case u.d.PerpendicularWithArc:{const t=this._cp2(s,0,-2),n=this._cp3(s,t,.5,-1);let r=this._sub(t,i);const h=this._norm(r);r[0]/=h,r[1]/=h;const o=this._crossProduct(r,this._sub(n,i));let a=this._dotProduct(r,this._sub(n,i));a<.05*h?a=.05*h:a>.95*h&&(a=.95*h);const c=[i[0]+r[0]*a,i[1]+r[1]*a];this._leftPerpendicular(r);let l=[];l.push([c[0]-r[0]*o,c[1]-r[1]*o]),l.push([c[0]+r[0]*o,c[1]+r[1]*o]),e.push(l);const u=[t[0]+r[0]*o,t[1]+r[1]*o];r=this._sub(t,u);const _=Math.cos(Math.PI/18);let f=Math.sin(Math.PI/18);o<0&&(f=-f),l=[i,t];for(let t=1;t<=9;t++)this._rotateDirect(r,_,f),l.push(this._add(u,r));e.push(l);break}case u.d.ClosedHalfCircle:{const t=this._cp2(s,2,0),n=this._mid(i,t),r=this._sub(t,n),h=Math.cos(Math.PI/18),o=Math.sin(Math.PI/18),a=[i,t];for(let t=1;t<=18;t++)this._rotateDirect(r,h,o),a.push(this._add(n,r));e.push(a);break}case u.d.TripleParallelExtended:{const t=this._cp2(s,0,-2),n=this._cp3(s,t,1,-2),r=this._mid(i,t),h=this._sub(n,t);this._normalize(h);const o=Math.abs(this._crossProduct(h,this._sub(r,t)))/2,a=this._dist(t,n),c=[t,i];c.push([i[0]+h[0]*a*.5,i[1]+h[1]*a*.5]),e.push(c);const l=[];l.push([r[0]-h[0]*o,r[1]-h[1]*o]),l.push([r[0]+h[0]*a*.375,r[1]+h[1]*a*.375]),L(l[l.length-1],1),l.push([r[0]+h[0]*a*.75,r[1]+h[1]*a*.75]),e.push(l);const u=[t,n];e.push(u);break}case u.d.ParallelWithTicks:{const t=this._cp2(s,3,0),n=this._cp3(s,t,.5,-1),r=this._sub(n,t);this._normalize(r);const h=this._crossProduct(r,this._sub(n,i));this._leftPerpendicular(r),this._addAngledTicks(e,i,t,n),this._addAngledTicks(e,this._mix(i,1,r,h),this._mix(t,1,r,h),this._mid(i,t));break}case u.d.Parallel:{const t=this._cp2(s,3,0),n=this._cp3(s,t,.5,-1),r=this._sub(t,i);this._normalize(r);const h=this._leftPerp(r),o=this._crossProduct(r,this._sub(n,i));let a=[i,t];e.push(a),a=[],a.push([i[0]+h[0]*o,i[1]+h[1]*o]),a.push([t[0]+h[0]*o,t[1]+h[1]*o]),e.push(a);break}case u.d.PerpendicularToFirstSegment:{const t=this._cp2(s,3,0),n=this._cp3(s,t,.5,-1),r=this._mid(i,t),h=this._sub(t,i);this._normalize(h);const o=this._crossProduct(h,this._sub(n,i));this._leftPerpendicular(h);const a=[];a.push([r[0]-h[0]*o*.25,r[1]-h[1]*o*.25]),a.push([r[0]+h[0]*o*1.25,r[1]+h[1]*o*1.25]),e.push(a);break}case u.d.ParallelOffset:{const t=this._cp2(s,3,0),n=this._cp3(s,t,.5,-1),r=this._sub(t,i);this._normalize(r);const h=this._crossProduct(r,this._sub(n,i));this._leftPerpendicular(r);const o=[];o.push([i[0]-r[0]*h,i[1]-r[1]*h]),o.push([t[0]-r[0]*h,t[1]-r[1]*h]),e.push(o);const a=[];a.push([i[0]+r[0]*h,i[1]+r[1]*h]),a.push([t[0]+r[0]*h,t[1]+r[1]*h]),e.push(a);break}case u.d.OffsetOpposite:{const t=this._cp2(s,3,0),n=this._cp3(s,t,.5,-1),r=this._sub(t,i);this._normalize(r);const h=this._crossProduct(r,this._sub(n,i));this._leftPerpendicular(r);const o=[];o.push([i[0]-r[0]*h,i[1]-r[1]*h]),o.push([t[0]-r[0]*h,t[1]-r[1]*h]),e.push(o);break}case u.d.OffsetSame:{const t=this._cp2(s,3,0),n=this._cp3(s,t,.5,-1),r=this._sub(t,i);this._normalize(r);const h=this._crossProduct(r,this._sub(n,i));this._leftPerpendicular(r);const o=[];o.push([i[0]+r[0]*h,i[1]+r[1]*h]),o.push([t[0]+r[0]*h,t[1]+r[1]*h]),e.push(o);break}case u.d.CircleWithArc:{let n=this._cp2(s,3,0);const r=this._cp3(s,n,.5,-1);let h,o;if(t>=4)h=s[3],o=this._crossProduct(this._sub(h,n),this._sub(r,n))>0;else{h=n,o=this._crossProduct(this._sub(h,i),this._sub(r,i))>0;const t=24*this._geomUnitsPerPoint,e=this._sub(h,i);this._normalize(e,t);const s=Math.sqrt(2)/2;this._rotateDirect(e,s,o?s:-s),n=this._add(i,e)}const a=this._sub(n,i),c=Math.cos(Math.PI/18),l=Math.sin(Math.PI/18),u=[n];for(let t=1;t<=36;t++)this._rotateDirect(a,c,l),u.push(this._add(i,a));this._add90DegArc(u,n,h,r,o),L(u[u.length-8],1),e.push(u);break}case u.d.DoubleJog:{let n,r,h=this._cp2(s,-3,1);if(n=t>=3?s[2]:this._add(i,this._sub(i,h)),t>=4)r=s[3];else{const t=i;i=h,r=n;const e=this._dist(i,t),s=this._dist(r,t);let o=30*this._geomUnitsPerPoint;.5*e<o&&(o=.5*e),.5*s<o&&(o=.5*s),h=this._mix(i,o/e,t,(e-o)/e),n=this._mix(r,o/s,t,(s-o)/s)}const o=this._mid(i,h),a=this._mid(r,n),c=this._dist(i,h),l=this._dist(n,r);let u=Math.min(c,l)/8;u=Math.min(u,24*this._geomUnitsPerPoint);const _=Math.cos(Math.PI/4);let f=this._sub(i,h);this._normalize(f,u),this._crossProduct(f,this._sub(r,h))>0?this._rotateDirect(f,_,-_):this._rotateDirect(f,_,_);let p=[];p.push(h),p.push(this._add(o,f)),p.push(this._sub(o,f)),p.push(i),e.push(p),f=this._sub(r,n),this._normalize(f,u),this._crossProduct(f,this._sub(i,n))<0?this._rotateDirect(f,_,_):this._rotateDirect(f,_,-_),p=[],p.push(n),p.push(this._add(a,f)),p.push(this._sub(a,f)),p.push(r),e.push(p);break}case u.d.PerpendicularOffset:{const t=this._cp2(s,-4,1),n=this._cp3(s,t,.882353,-1.94),r=this._sub(n,t);this._crossProduct(r,this._sub(i,t))>0?this._rightPerpendicular(r):this._leftPerpendicular(r);const h=[r[0]/8,r[1]/8],o=this._sub(this._mid(t,n),h);e.push([o,i]);break}case u.d.LineExcludingLastSegment:{const t=this._arrowPath(s),i=[];let n=t.length-2;for(;n--;)i.push(t[n]);e.push(i);break}case u.d.MultivertexArrow:{const t=this._arrowPath(s),i=[];this._addArrow(i,t,!1),e.push(i);break}case u.d.CrossedArrow:{const t=this._arrowPath(s),i=[];this._addArrow(i,t,!0),e.push(i);break}case u.d.ChevronArrow:{const[t,n]=this._arrowLastSeg(s),r=10*this._geomUnitsPerPoint,h=this._sub(i,t);this._normalize(h);const o=this._crossProduct(h,this._sub(n,t)),a=this._leftPerp(h),c=[n[0]-a[0]*o*2,n[1]-a[1]*o*2],l=[];l.push([n[0]+h[0]*r,n[1]+h[1]*r]),l.push(i),l.push([c[0]+h[0]*r,c[1]+h[1]*r]),e.push(l);break}case u.d.ChevronArrowOffset:{const[t,n]=this._arrowLastSeg(s),r=this._sub(i,t);this._normalize(r);const h=this._crossProduct(r,this._sub(n,t));this._leftPerpendicular(r);const o=[n[0]-r[0]*h,n[1]-r[1]*h],a=[];a.push([o[0]+r[0]*h*.5,o[1]+r[1]*h*.5]),a.push(this._mid(o,i)),a.push([o[0]-r[0]*h*.5,o[1]-r[1]*h*.5]),e.push(a);break}case u.d.PartialFirstSegment:{const[t,n]=this._arrowLastSeg(s),r=this._sub(i,t);this._normalize(r);const h=this._crossProduct(r,this._sub(n,t));this._leftPerpendicular(r);const o=[n[0]-r[0]*h,n[1]-r[1]*h];e.push([t,o]);break}case u.d.Arch:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,.5,1),r=this._sub(i,t),h=this._mix(n,1,r,.55),o=this._mix(n,1,r,-.55),a=[i];this._addBezier2(a,i,h,n,4),this._addBezier2(a,n,o,t,4),e.push(a);break}case u.d.CurvedParallelTicks:{const t=this._cp2(s,-4,1),n=this._cp3(s,t,.882353,-1.94),r=this._sub(n,t);this._crossProduct(r,this._sub(i,t))>0?this._rightPerpendicular(r):this._leftPerpendicular(r);const h=[r[0]/8,r[1]/8],o=this._sub(this._mid(t,n),h),a=this._sub(this._mix(t,.75,n,.25),h),c=this._sub(this._mix(t,.25,n,.75),h),l=[t];this._addBezier2(l,t,a,o,3),this._addBezier2(l,o,c,n,3),e.push(l);for(let t=0;t<8;t++){const s=l[2*t+1],i=[this._clone(s)];i.push(this._add(s,[r[0]/4,r[1]/4])),e.push(i)}break}case u.d.Arc90Degrees:{const t=this._cp2(s,0,-1),n=this._cp3(s,t,.5,1),r=[t];this._add90DegArc(r,t,i,n),e.push(r);break}case u.d.FullGeometry:default:e.push(s)}}return e}}class V{static local(){return null===V.instance&&(V.instance=new V),V.instance}execute(t,e,s,i,n){return new U(t,e,s)}}V.instance=null;class U extends I{constructor(t,e,s){super(t,!0,!0),this._curveHelper=new E,this._beginCut=(void 0!==e.beginCut?e.beginCut:1)*s,this._endCut=(void 0!==e.endCut?e.endCut:1)*s,this._middleCut=(void 0!==e.middleCut?e.middleCut:0)*s,this._invert=void 0!==e.invert&&e.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(t){const{_beginCut:e,_endCut:s,_middleCut:i}=this,n=t.pathLength(),r=m.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(0!==e||0!==s||0!==i)if(e+s+i>=n)for(r.startPath();t.nextPoint();)r.pushXY(t.x,t.y);else this._curveHelper.appendSubCurve(r,t,0,e),this._curveHelper.appendSubCurve(r,t,.5*(n-i),.5*(n+i)),this._curveHelper.appendSubCurve(r,t,n-s,s)}else if(0===e&&0===s&&0===i)for(r.startPath();t.nextPoint();)r.pushXY(t.x,t.y);else e+s+i<n&&(0===i?this._curveHelper.appendSubCurve(r,t,e,n-s):(this._curveHelper.appendSubCurve(r,t,e,.5*(n-i)),this._curveHelper.appendSubCurve(r,t,.5*(n+i),n-s)));return 0===r.totalSize?null:r}}class H{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return 0===this._values.length}size(){return this._values.length}init(t,e,s=!0){if(this._setEmpty(),!t||0===t.length)return!1;for(let e=0;e<t.length;e++){let i=Math.abs(t[e]);s&&i<1e-7&&(i=1e-7),this._values.push(i),this._length+=i}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(t){const e=this._values?this._values.length:0;for(let s=0;s<e;++s)this._values[s]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}addValue(t){this._length+=t,this._values.push(t)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}class D{constructor(){this.pt=null,this.ca=0,this.sa=0}}var W,J;(J=W||(W={}))[J.FAIL=0]="FAIL",J[J.END=1]="END",J[J.CONTINUE=2]="CONTINUE";class Z{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return null!==this.segment}copyTo(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}class j extends E{constructor(t=0,e=!1){super(t,e),this._tolerance=k,this._currentPosition=new Z}updateTolerance(t){this._tolerance=k*t}init(t,e,s=!0){return s?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=t,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(t,e=W.FAIL){const s=new Z;return!!this._nextPosition(t,s,null,e)&&(s.copyTo(this._currentPosition),!0)}curPointAndAngle(t){t.pt=this._getPoint(this._currentPosition);const[e,s]=this._getAngleCS(this._currentPosition);t.ca=e,t.sa=s}nextPointAndAngle(t,e,s=W.FAIL){const i=new Z;if(!this._nextPosition(t,i,null,s))return!1;i.copyTo(this._currentPosition),e.pt=this._getPoint(i);const[n,r]=this._getAngleCS(i);return e.ca=n,e.sa=r,!0}nextCurve(t){if(0===t)return null;const e=m.createEmptyOptimizedCIM("esriGeometryPolyline");e.startPath(),e.nextPath();const s=new Z;return this._nextPosition(t,s,e,W.END)?(s.copyTo(this._currentPosition),e):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(t){return this._pathCursor.seekInPath(t),[this._pathCursor.x,this._pathCursor.y]}getSeg(t){return[this.getPt(t),this.getPt(t+1)]}_nextPosition(t,e,s,i){if(this._currentPosition.isPathEnd)return!1;let n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(s){if(0===s.pathSize)if(0===n){const t=e.segment[0];s.pushXY(t[0],t[1])}else s.pushPoint(this.getSegCoord2D(e.segment,n));const t=e.segment[1];s.pushXY(t[0],t[1])}if(n=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this._nextSegment(),e.segmentLength=this.getSegLength(e.segment),e.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return i!==W.FAIL&&(e.segmentLength=this.getSegLength(e.segment),e.isPartEnd=!0,i===W.END?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,s){0===s.pathSize&&(0===n?s.pushPoint(e.segment[0]):s.pushPoint(this.getSegCoord2D(e.segment,n)));const t=e.abscissa/e.segmentLength;1===t?s.pushPoint(e.segment[1]):s.pushPoint(this.getSegCoord2D(e.segment,t))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}_getPoint(t){const e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,e)}_getAngleCS(t){const e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._currentPosition.segment,e)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let t=this._partSegCount;for(;t;)this._previousSegment(),--t;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const e=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(e);let s=e+this._partSegCount+1;if(s>=this._pathCursor.pathSize&&(s=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(s),this._patternLength>0){const t=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,e=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let s=Math.round((this._partLength-(t+e))/this._patternLength);s<=0&&(s=t+e>0?0:1),this._partLengthRatio=this._partLength/(t+e+s*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}}class q{static local(){return null===q.instance&&(q.instance=new q),q.instance}execute(t,e,s,i,n){return new K(t,e,s)}}q.instance=null;class K extends I{constructor(t,e,s){super(t,!0,!0),this._firstCurve=null,this._walker=new j,this._walker.updateTolerance(s),this._endings=e.lineDashEnding,this._customDashPos=-(e.offsetAlongLine??0)*s,this._offsetAtEnd=(e.customEndingOffset??0)*s,this._pattern=new H,this._pattern.init(e.dashTemplate,!0),this._pattern.scale(s)}processPath(t){if(0===this._pattern.length()){this.iteratePath=!1;const e=(0,o.a)(t);return m.fromJSONCIM({paths:[e]})}if(!this.iteratePath){let e=!0;switch(this._endings){case u.e.HalfPattern:case u.e.HalfGap:default:this._pattern.extPtGap=0;break;case u.e.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case u.e.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case u.e.NoConstraint:this.isClosed||(e=!1);break;case u.e.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const s=t.pathLength();if(this._pattern.isEmpty()||s<.1*this._pattern.length()){const e=(0,o.a)(t);return m.fromJSONCIM({paths:[e]})}if(!this._walker.init(t,this._pattern,e)){const e=(0,o.a)(t);return m.fromJSONCIM({paths:[e]})}}let e;if(this.iteratePath)e=this._pattern.nextValue();else{let t;switch(this._endings){case u.e.HalfPattern:default:t=.5*this._pattern.firstValue();break;case u.e.HalfGap:t=.5*-this._pattern.lastValue();break;case u.e.FullGap:t=-this._pattern.lastValue();break;case u.e.FullPattern:t=0;break;case u.e.NoConstraint:case u.e.Custom:t=-this._customDashPos}let s=t/this._pattern.length();s-=Math.floor(s),t=s*this._pattern.length(),this._pattern.reset(),e=this._pattern.nextValue();let i=!1;for(;t>=e;)t-=e,e=this._pattern.nextValue(),i=!i;e-=t,i?(this._walker.nextPosition(e),e=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(e),e=this._pattern.nextValue(),this._walker.nextPosition(e),e=this._pattern.nextValue())}let s=this._walker.nextCurve(e);if(s)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)s.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else e=this._pattern.nextValue(),!this._walker.nextPosition(e)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(s.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,s=this._firstCurve,this._firstCurve=null;return s?.reset(),s}}class ${static local(){return null===$.instance&&($.instance=new $),$.instance}execute(t,e,s,i,n,r){return new Q(t,e,s,i,n,r)}}$.instance=null;class Q{constructor(t,e,s,i,n,r){switch(this._inputGeometries=t,this._tileKey=i,this._geometryEngine=n,this._maxInflateSize=r*s,this._width=(void 0!==e.width?e.width:2)*s,e.method){case u.f.Mitered:case u.f.Bevelled:case u.f.Rounded:case u.f.TrueBuffer:case u.f.Square:}this._option=e.option}next(){let t;for(;t=this._inputGeometries.next();){if("esriGeometryEnvelope"===t.geometryType&&this._width>0){const e=t.asJSON();return Math.min(e.xmax-e.xmin,e.ymax-e.ymin)-2*this._width<0?t:m.fromJSONCIM({paths:[[[e.xmin+this._width,e.ymin+this._width],[e.xmax-this._width,e.ymin+this._width],[e.xmax-this._width,e.ymax-this._width],[e.xmin+this._width,e.ymax-this._width],[e.xmin+this._width,e.ymin+this._width]],[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}if("esriGeometryPolygon"===t.geometryType){if(0===this._width)return t.clone();const e=this._geometryEngine;if(null==e)return null;const s=this._tileKey?z(t,this._maxInflateSize):t.clone();if(!s)continue;const i=e.buffer(_.Z.WebMercator,s.asJSON(),-this._width,1);if(i)for(const t of i.rings)if(t){s.startPath();for(const e of t.reverse())s.pushXY(e[0],s.yFactor*e[1])}return s}}return null}}class tt{static local(){return null===tt.instance&&(tt.instance=new tt),tt.instance}execute(t,e,s,i,n){return new et(t,e,s)}}tt.instance=null;class et extends I{constructor(t,e,s){super(t,!1,!0),this._curveHelper=new E,this._length=(void 0!==e.length?e.length:20)*s,this._angle=void 0!==e.angle?e.angle:225,this._position=void 0!==e.position?e.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(t){const e=m.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(t))return null;t.seekInPath(0);const s=t.x,i=t.y;t.seekInPath(t.pathSize-1);const n=t.x,r=t.y,h=[n-s,r-i];this._curveHelper.normalize(h);const o=s+(n-s)*this._position/100,a=i+(r-i)*this._position/100,c=Math.cos((90-this._angle)/180*Math.PI);let l=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(l=-l),this._mirror=!this._mirror;const u=[o-this._length/2*c,a-this._length/2*l],_=[o+this._length/2*c,a+this._length/2*l];return e.pushPath([[s,i],u,_,[n,r]]),e}}class st{static local(){return null===st.instance&&(st.instance=new st),st.instance}execute(t,e,s,i,n){return new it(t,e,s)}}st.instance=null;class it{constructor(t,e,s){this._inputGeometries=t,this._offsetX=void 0!==e.offsetX?e.offsetX*s:0,this._offsetY=void 0!==e.offsetY?e.offsetY*s:0}next(){let t=this._inputGeometries.next();for(;t;){if(t.totalSize>0)return this._move(t.clone(),this._offsetX,this._offsetY);t=this._inputGeometries.next()}return null}_move(t,e,s){for(;t.nextPath();)for(;t.nextPoint();)t.x=t.x+e,t.y=t.y+s;return t.reset(),t}}class nt{static local(){return null===nt.instance&&(nt.instance=new nt),nt.instance}execute(t,e,s,i,n,r){return new rt(t,e,s,i,n,r)}}nt.instance=null;class rt{constructor(t,e,s,i,n,r){this._inputGeometries=t,this._tileKey=i,this._geometryEngine=n,this._curveHelper=new E,this._offset=(e.offset??1)*s,this._method=e.method,this._maxInflateSize=r*s,this._option=e.option,this._offsetFlattenError=k*s}next(){let t;for(;t=this._inputGeometries.next();){if(0===this._offset)return t.clone();if("esriGeometryEnvelope"===t.geometryType){if(this._method===u.G.Rounded&&this._offset>0){const e=(0,o.a)(t),s=this._curveHelper.offset(e,-this._offset,this._method,4,this._offsetFlattenError);if(s){const e=m.createEmptyOptimizedCIM(t.geometryType);return e.pushPath(s),e}return null}const e=t.asJSON();if((0,a.YX)(e)&&Math.min(e.xmax-e.xmin,e.ymax-e.ymin)+2*this._offset>0)return m.fromJSONCIM({xmin:e.xmin-this._offset,xmax:e.xmax+this._offset,ymin:e.ymin-this._offset,ymax:e.ymax+this._offset})}const e=this._geometryEngine;if(null==e)continue;const s=this._tileKey?z(t,this._maxInflateSize):t.clone();if(!s)continue;const i=e.offset(_.Z.WebMercator,s.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return i?m.fromJSONCIM(i):null}return null}}class ht{static local(){return null===ht.instance&&(ht.instance=new ht),ht.instance}execute(t,e,s,i,n){return new ot(t,e,s)}}ht.instance=null;class ot{constructor(t,e,s){this._inputGeometries=t,this._reverse=void 0===e.reverse||e.reverse}next(){let t=this._inputGeometries.next();for(;t;){if(!this._reverse)return t;if("esriGeometryPolyline"===t.geometryType)return at(t.clone());t=this._inputGeometries.next()}return null}}function at(t){for(;t.nextPath();)for(let e=0;e<t.pathSize/2;e++){t.seekInPath(e);const s=t.x,i=t.y;t.seekInPath(t.pathSize-e-1);const n=t.x,r=t.y;t.x=s,t.y=i,t.seekInPath(e),t.x=n,t.y=r}return t.reset(),t}class ct{static local(){return null===ct.instance&&(ct.instance=new ct),ct.instance}execute(t,e,s,i,n){return new lt(t,e,s)}}ct.instance=null;class lt{constructor(t,e,s){this._inputGeometries=t,this._rotateAngle=void 0!==e.angle?e.angle*Math.PI/180:0}next(){let t=this._inputGeometries.next();for(;t;){if(0===this._rotateAngle||"esriGeometryPoint"===t.geometryType)return t;if(t.totalSize>0){const e=(0,h.f)(t),s=(e[2]+e[0])/2,i=(e[3]+e[1])/2;return t.reset(),this._rotate(t.clone(),s,i)}t=this._inputGeometries.next()}return null}_rotate(t,e,s){const i=Math.cos(this._rotateAngle),n=Math.sin(this._rotateAngle);for(;t.nextPath();)for(;t.nextPoint();){const r=t.x-e,h=t.y-s;t.x=e+r*i-h*n,t.y=s+r*n+h*i}return t.reset(),t}}class ut{static local(){return null===ut.instance&&(ut.instance=new ut),ut.instance}execute(t,e,s,i,n){return new _t(t,e,s)}}ut.instance=null;class _t{constructor(t,e,s){this._inputGeometries=t,this._xFactor=void 0!==e.XScaleFactor?e.XScaleFactor:1.15,this._yFactor=void 0!==e.YScaleFactor?e.YScaleFactor:1.15}next(){const t=this._inputGeometries.next();if(t){if(1===this._xFactor&&1===this._yFactor)return t;if("esriGeometryPoint"===t.geometryType)return t;if(t.totalSize>0){const e=(0,h.f)(t),s=(e[2]+e[0])/2,i=(e[3]+e[1])/2;return t.reset(),this._scaleCursor(t.clone(),s,i)}}return null}_scaleCursor(t,e,s){for(;t.nextPath();)for(;t.nextPoint();)t.x=e+(t.x-e)*this._xFactor,t.y=s+(t.y-s)*this._yFactor;return t.reset(),t}}class ft{static local(){return null===ft.instance&&(ft.instance=new ft),ft.instance}execute(t,e,s,i,n){return new pt(t,e,s)}}ft.instance=null;class pt{constructor(t,e,s){this._inputGeometries=t,this._height=(void 0!==e.amplitude?e.amplitude:2)*s,this._period=(void 0!==e.period?e.period:3)*s,this._style=e.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new H,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new j,this._walker.updateTolerance(s)}next(){let t=this._inputGeometries.next();for(;t;){if(0===this._height||0===this._period)return t;const e=this._processGeom(t);if(e)return e;t=this._inputGeometries.next()}return null}_processGeom(t){const e=m.createEmptyOptimizedCIM(t.geometryType);for(;t.nextPath();){e.startPath();const s=t.pathLength();if(this._walker.init(t,this._pattern))switch(this._style){case u.g.Sinus:default:this._constructCurve(e,s,!1);break;case u.g.Square:this._constructSquare(e,s);break;case u.g.Triangle:this._constructTriangle(e,s);break;case u.g.Random:this._constructCurve(e,s,!0)}else for(;t.nextPoint();)e.pushXY(t.x,t.y)}return e}_constructCurve(t,e,s){let i=Math.round(e/this._period);0===i&&(i=1);const n=16*i+1,r=e/i,h=this._period/16,o=1/n,a=2*Math.PI*e/r,c=2*Math.PI*Math.random(),l=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),_=.75-Math.random()/2,f=.75-Math.random()/2,p=new D;this._walker.curPointAndAngle(p),t.pushPoint(p.pt);let d=0;for(;;){if(!this._walker.nextPointAndAngle(h,p)){t.pushPoint(this._walker.getPathEnd());break}{const e=d;let i;if(d+=o,s){const t=this._height/2*(1+.3*Math.sin(_*a*e+c));i=t*Math.sin(a*e+l),i+=t*Math.sin(f*a*e+u),i/=2}else i=.5*this._height*Math.sin(.5*a*e);t.pushXY(p.pt[0]-i*p.sa,p.pt[1]+i*p.ca)}}}_constructSquare(t,e){Math.round(e/this._period);let s=!0;for(;;){let e=!1;if(this._walker.curPositionIsValid()){const i=new D;this._walker.curPointAndAngle(i);const n=new D;if(this._walker.nextPointAndAngle(this._period,n)){const r=new D;this._walker.nextPointAndAngle(this._period,r)&&(s?(t.pushPoint(i.pt),s=!1):t.pushPoint(i.pt),t.pushXY(i.pt[0]-this._height/2*i.sa,i.pt[1]+this._height/2*i.ca),t.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),t.pushXY(n.pt[0]+this._height/2*n.sa,n.pt[1]-this._height/2*n.ca),t.pushXY(r.pt[0]+this._height/2*r.sa,r.pt[1]-this._height/2*r.ca),e=!0)}}if(!e){t.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(t,e){Math.round(e/this._period);let s=!0;for(;;){let e=!1;if(this._walker.curPositionIsValid()){const i=new D;this._walker.curPointAndAngle(i);const n=new D;if(this._walker.nextPointAndAngle(this._period/2,n)){const r=new D;this._walker.nextPointAndAngle(this._period,r)&&(this._walker.nextPosition(this._period/2)&&(s?(t.pushPoint(i.pt),s=!1):t.pushPoint(i.pt),t.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),t.pushXY(r.pt[0]+this._height/2*r.sa,r.pt[1]-this._height/2*r.ca)),e=!0)}}if(!e){t.pushPoint(this._walker.getPathEnd());break}}}}class dt{static local(){return null===dt.instance&&(dt.instance=new dt),dt.instance}execute(t,e,s,i,n){return new gt(t,e,s)}}dt.instance=null;class gt extends T{constructor(t,e,s){super(t),this._geometryWalker=new j,this._geometryWalker.updateTolerance(s),this._angleToLine=e.angleToLine??!0,this._offset=(e.offset?e.offset:0)*s,this._originalEndings=e.endings,this._offsetAtEnd=(e.customEndingOffset?e.customEndingOffset:0)*s,this._position=-(e.offsetAlongLine?e.offsetAlongLine:0)*s,this._pattern=new H,this._pattern.init(e.placementTemplate,!1),this._pattern.scale(s),this._endings=this._originalEndings}processPath(t){if(this._pattern.isEmpty())return null;let e;if(this.iteratePath)e=this._pattern.nextValue();else{this._originalEndings===u.P.WithFullGap&&this.isClosed?this._endings=u.P.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;let s,i=!0;switch(this._endings){case u.P.NoConstraint:s=-this._position,s=this._adjustPosition(s),i=!1;break;case u.P.WithHalfGap:default:s=-this._pattern.lastValue()/2;break;case u.P.WithFullGap:s=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case u.P.WithMarkers:s=0;break;case u.P.Custom:s=-this._position,s=this._adjustPosition(s),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(t,this._pattern,i))return null;this._pattern.reset();let n=0;for(;s>n;)s-=n,n=this._pattern.nextValue();n-=s,e=n,this.iteratePath=!0}const s=new D;return this._geometryWalker.nextPointAndAngle(e,s)?this._endings===u.P.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===u.P.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca),this._angleToLine&&this.internalPlacement.setRotateCS(s.ca,s.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(t){let e=t/this._pattern.length();return e-=Math.floor(e),e*this._pattern.length()}}class mt{static local(){return null===mt.instance&&(mt.instance=new mt),mt.instance}execute(t,e,s,i,n){return new Pt(t,e,s)}}mt.instance=null;class Pt extends T{constructor(t,e,s){super(t,!1,!0),this._curveHelper=new E,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*s:0,this._type=e.extremityPlacement,this._position=void 0!==e.offsetAlongLine?e.offsetAlongLine*s:0,this._beginProcessed=!1}processPath(t){let e;switch(this._type){case u.E.Both:default:this._beginProcessed?(e=this._atExtremities(t,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(e=this._atExtremities(t,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case u.E.JustBegin:e=this._atExtremities(t,this._position,!0);break;case u.E.JustEnd:e=this._atExtremities(t,this._position,!1);case u.E.None:}return e}_atExtremities(t,e,s){if(s||t.seekPathEnd(),s?t.nextPoint():t.prevPoint()){let i=0,[n,r]=[0,0],[h,o]=[t.x,t.y];for(;s?t.nextPoint():t.prevPoint();){n=h,r=o,h=t.x,o=t.y;const s=this._curveHelper.getLength(n,r,h,o);if(i+s>e){const t=(e-i)/s,[a,c]=this._curveHelper.getAngleCS(n,r,h,o,t),l=this._curveHelper.getCoord2D(n,r,h,o,t);return this.internalPlacement.setTranslate(l[0]-this._offset*c,l[1]+this._offset*a),this._angleToLine&&this.internalPlacement.setRotateCS(-a,-c),this.internalPlacement}i+=s}}return null}}class xt{static local(){return null===xt.instance&&(xt.instance=new xt),xt.instance}execute(t,e,s,i,n){return new yt(t,e,s)}}xt.instance=null;class yt extends T{constructor(t,e,s){super(t),this._walker=new j,this._walker.updateTolerance(s),this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*s:0,this._beginGap=void 0!==e.beginPosition?e.beginPosition*s:0,this._endGap=void 0!==e.endPosition?e.endPosition*s:0,this._flipFirst=void 0===e.flipFirst||e.flipFirst,this._pattern=new H,this._pattern.init(e.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(t){if(this._pattern.isEmpty())return null;let e;if(this.iteratePath){const t=this._pattern.nextValue()*this._subPathLen,s=this._beginGap+t;e=s-this._prevPos,this._prevPos=s}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=t.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();const s=this._pattern.nextValue()*this._subPathLen,i=this._beginGap+s;e=i-this._prevPos,this._prevPos=i,this.iteratePath=!0}const s=new D;if(!this._walker.nextPointAndAngle(e,s,W.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca);const i=this._isFirst&&this._flipFirst;let n,r;return this._angleToLine?(n=s.ca,r=s.sa):(n=1,r=0),i&&(n=-n,r=-r),this.internalPlacement.setRotateCS(n,r),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}const bt=512,Mt=24,St=1e-6;class Ct{static local(){return null===Ct.instance&&(Ct.instance=new Ct),Ct.instance}execute(t,e,s,i,n){return new wt(t,e,s,i,n)}}Ct.instance=null;class wt{constructor(t,e,s,i,r){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(e.stepX??16)*s,this._stepY=Math.abs(e.stepY??16)*s,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,0!==this._stepX&&0!==this._stepY){if(this._gridType=e.gridType??u.h.Fixed,this._gridType===u.h.Random){const t=e.seed??13,s=1;this._randomLCG=new n.R(t*s),this._randomness=(e.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=e.gridAngle??0,this._shiftOddRows=e.shiftOddRows??!1,this._offsetX=(e.offsetX??0)*s,this._offsetY=(e.offsetY??0)*s,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,null!=i){const[t,e,s,n]=i.split("/"),r=parseFloat(t),h=parseFloat(e),o=parseFloat(s),a=parseFloat(n);this._graphicOriginX=-(a*2**r+o)*bt,this._graphicOriginY=h*bt,this._testInsidePolygon=!0}this._internalPlacement=new g,this._calculateMinMax(t),this._geometryCursor=t}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!wt._randValues){wt._randValues=[];for(let t=0;t<Mt;t++)for(let t=0;t<Mt;t++)wt._randValues.push(this._randomLCG.getFloat()),wt._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(t){let e,s,i,n,r,h,o,a,c,l,u,_,f,p;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,o=a=f=u=Number.MAX_VALUE,c=l=p=_=-Number.MAX_VALUE;const d=1!==this._cosAngle;for(t.reset();t.nextPath();)for(;t.nextPoint();)h=t.x,r=t.y,e=h-this._graphicOriginX-this._offsetX,s=r-this._graphicOriginY-this._offsetY,d?(i=this._cosAngle*e-this._sinAngle*s,n=this._sinAngle*e+this._cosAngle*s):(i=e,n=s),o=Math.min(o,i),c=Math.max(c,i),a=Math.min(a,n),l=Math.max(l,n),u=Math.min(u,r),_=Math.max(_,r),f=Math.min(f,h),p=Math.max(p,h);u=u!==Number.MAX_VALUE?u:-512-this._stepY,_=_!==-Number.MAX_VALUE?_:this._stepY,f=f!==Number.MAX_VALUE?f:-this._stepX,p=p!==-Number.MAX_VALUE?p:bt+this._stepX;const g=_-u,m=p-f;if(this._verticalSubdivision=g>=m,this._polygonMin=this._verticalSubdivision?u:f,this._testInsidePolygon){let t=0-this._graphicOriginX-this._offsetX-this._stepX,e=bt-this._graphicOriginX-this._offsetX+this._stepX,s=-512-this._graphicOriginY-this._offsetY-this._stepY,i=0-this._graphicOriginY-this._offsetY+this._stepY;if(d){const n=[[t,s],[t,i],[e,s],[e,i]];t=s=Number.MAX_VALUE,e=i=-Number.MAX_VALUE;for(const r of n){const n=this._cosAngle*r[0]-this._sinAngle*r[1],h=this._sinAngle*r[0]+this._cosAngle*r[1];t=Math.min(t,n),e=Math.max(e,n),s=Math.min(s,h),i=Math.max(i,h)}}o=o!==Number.MAX_VALUE?Math.max(o,t):t,a=a!==Number.MAX_VALUE?Math.max(a,s):s,c=c!==-Number.MAX_VALUE?Math.min(c,e):e,l=l!==-Number.MAX_VALUE?Math.min(l,i):i}this._xMin=Math.round(o/this._stepX),this._xMax=Math.round(c/this._stepX),this._yMin=Math.round(a/this._stepY),this._yMax=Math.round(l/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(t,f,p,u,_)}_buildAccelerationMap(t,e,s,i,n){t.reset();const r=new Map,h=this._verticalSubdivision,o=h?n-i:s-e;let a=Math.ceil(o/10);if(a<=1)return;const c=Math.floor(o/a);let l,u,_,f,p,d,g,m,P,x,y;for(a++,this._delta=c,h?(P=-512-2*this._stepY,x=2*this._stepY,y=i):(P=-2*this._stepX,x=bt+2*this._stepX,y=e);t.nextPath();)if(!(t.pathSize<2)&&t.nextPoint())for(l=t.x,u=t.y;t.nextPoint();l=_,u=f){if(_=t.x,f=t.y,h){if(u===f||u<P&&f<P||u>x&&f>x)continue;p=Math.min(u,f),d=Math.max(u,f)}else{if(l===_||l<P&&_<P||l>x&&_>x)continue;p=Math.min(l,_),d=Math.max(l,_)}for(;p<d;)g=Math.floor((p-y)/c),zt(g,l,u,_,f,r),p+=c;m=Math.floor((d-y)/c),m>g&&zt(m,l,u,_,f,r)}this._accelerationMap=r}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);const e=this._currentY*this._stepY+this._offsetY;let s,i;if(this._currentX++,this._gridType===u.h.Random){const n=(this._currentX%Mt+Mt)%Mt,r=(this._currentY%Mt+Mt)%Mt;s=this._graphicOriginX+t+this._stepX*this._randomness*(.5-wt._randValues[r*Mt+n])*2/3,i=this._graphicOriginY+e+this._stepY*this._randomness*(.5-wt._randValues[r*Mt+n+1])*2/3}else s=this._graphicOriginX+this._cosAngle*t+this._sinAngle*e,i=this._graphicOriginY-this._sinAngle*t+this._cosAngle*e;if(!this._testInsidePolygon||this._isInsidePolygon(s,i,this._geometryCursor))return this._internalPlacement.setTranslate(s,i),this._internalPlacement}}_isInsidePolygon(t,e,s){if(null==this._accelerationMap)return function(t,e,s){let i,n,r,h,o=0;for(t+=St,e+=St,s.reset();s.nextPath();)if(s.nextPoint())for(i=s.x,n=s.y;s.nextPoint();i=r,n=h)r=s.x,h=s.y,n>e!=h>e&&((r-i)*(e-n)-(h-n)*(t-i)>0?o++:o--);return 0!==o}(t,e,s);t+=St,e+=St;const i=this._verticalSubdivision,n=i?e:t,r=Math.floor((n-this._polygonMin)/this._delta),h=this._accelerationMap.get(r);if(!h)return!1;let o,a,c,l=0;for(const s of h){if(o=s[0],a=s[1],i){if(o[1]>e==a[1]>e)continue;c=(a[0]-o[0])*(e-o[1])-(a[1]-o[1])*(t-o[0])}else{if(o[0]>t==a[0]>t)continue;c=(a[1]-o[1])*(t-o[0])-(a[0]-o[0])*(e-o[1])}c>0?l++:l--}return 0!==l}}function zt(t,e,s,i,n,r){let h=r.get(t);h||(h=[],r.set(t,h)),h.push([[e,s],[i,n]])}class At{static local(){return null===At.instance&&(At.instance=new At),At.instance}execute(t,e,s,i,n){return new vt(t,e,s)}}At.instance=null;class vt extends T{constructor(t,e,s){super(t),this._curveHelper=new E,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*s:0,this._relativeTo=e.relativeTo,this._position=void 0!==e.startPointOffset?e.startPointOffset*s:0,this._epsilon=.001*s}processPath(t){const e=this._position;if(this._relativeTo===u.i.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),t.nextPoint()){let[e,s]=[t.x,t.y],[i,n]=[0,0];for(;t.nextPoint();){i=t.x,n=t.y;const r=this._curveHelper.getLength(e,s,i,n);if(r<this._epsilon){e=i,s=n;continue}const h=.5+this._position/r,[o,a]=this._curveHelper.getAngleCS(e,s,i,n,h),c=this._curveHelper.getCoord2D(e,s,i,n,h);return this.internalPlacement.setTranslate(c[0]-this._offset*a,c[1]+this._offset*o),this._angleToLine&&this.internalPlacement.setRotateCS(o,a),this.internalPlacement}}return this.iteratePath=!1,null}const s=this._relativeTo===u.i.LineEnd;return this.onLine(t,e,s)}onLine(t,e,s){let i,n=!1;switch(this._relativeTo){case u.i.LineMiddle:default:t.seekPathStart(),i=t.pathLength()/2+e;break;case u.i.LineBeginning:i=e;break;case u.i.LineEnd:i=e,n=!0}s?t.seekPathEnd():t.seekPathStart();let r=0;if(s?t.prevPoint():t.nextPoint()){let[e,h]=[t.x,t.y],[o,a]=[0,0];for(;s?t.prevPoint():t.nextPoint();){o=t.x,a=t.y;const s=this._curveHelper.getLength(e,h,o,a);if(r+s>i){const t=(i-r)/s,[c,l]=this._curveHelper.getAngleCS(e,h,o,a,t),u=this._curveHelper.getCoord2D(e,h,o,a,t),_=n?-this._offset:this._offset;return this.internalPlacement.setTranslate(u[0]-_*l,u[1]+_*c),this._angleToLine&&(n?this.internalPlacement.setRotateCS(-c,-l):this.internalPlacement.setRotateCS(c,l)),this.internalPlacement}e=o,h=a,r+=s}}return null}}class Lt{static local(){return null===Lt.instance&&(Lt.instance=new Lt),Lt.instance}execute(t,e,s,i,n){return new Tt(t,e,s)}}Lt.instance=null;class Tt extends T{constructor(t,e,s){super(t),this._curveHelper=new E,this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*s:0,this._endPoints=void 0===e.placeOnEndPoints||e.placeOnEndPoints,this._controlPoints=void 0===e.placeOnControlPoints||e.placeOnControlPoints,this._regularVertices=void 0===e.placeOnRegularVertices||e.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);let s=e[0],i=e[1];if(0!==this._offset){const t=Math.cos(e[2]),n=Math.sin(e[2]);s-=this._offset*n,i+=this._offset*t}return this.internalPlacement.setTranslate(s,i),this._tagIterator++,this.internalPlacement}_preparePath(t){this._tags.length=0,this._tagIterator=0,t.seekPathStart();const e=t.isClosed();let s=0,i=!1,n=0,r=0;if(t.seekPathStart(),t.nextPoint()){let h=t.x,o=t.y,a=t.getControlPoint(),c=!0,l=t.nextPoint();for(;l;){const u=t.x,_=t.y,f=t.getControlPoint();(this._angleToLine||0!==this._offset)&&(n=this._curveHelper.getAngle(h,o,u,_,0)),c?(c=!1,e?(s=n,i=a):(this._endPoints||this._controlPoints&&a)&&this._tags.push([h,o,n])):a?this._controlPoints&&this._tags.push([h,o,It(r,n)]):this._regularVertices&&this._tags.push([h,o,It(r,n)]),(this._angleToLine||0!==this._offset)&&(r=this._curveHelper.getAngle(h,o,u,_,1)),l=t.nextPoint(),l||(e?f||i?this._controlPoints&&this._tags.push([u,_,It(r,s)]):this._regularVertices&&this._tags.push([u,_,It(r,s)]):(this._endPoints||this._controlPoints&&f)&&this._tags.push([u,_,r])),h=u,o=_,a=f}}this._tagIterator=0}}function It(t,e){const s=Math.PI;for(;Math.abs(e-t)>s+2e-15;)e-t>s?e-=2*s:e+=2*s;return(t+e)/2}function kt(t){if(0===t.totalSize)return null;const e=(0,h.f)(t);if(!e)return null;const s=4*(Math.abs(e[0])+Math.abs(e[2])+Math.abs(e[1])+Math.abs(e[3])+1)*222045e-19;let i=0,n=0;t.reset();for(let e=0;t.nextPath();e++){const s=t.getCurrentRingArea();s>n&&(n=s,i=e)}if(t.seekPath(i),0===t.pathSize)return null;t.seekPathStart();const a=(0,h.h)(t);if(Math.abs(n)<=2*s*s)return[(a[0]+a[2])/2,(a[1]+a[3])/2];t.seekPathStart();const c=(0,o.b)(t,(0,r.c)());if(null===c)return null;if(t.totalPoints<4)return c;const l=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],u=[NaN,NaN,NaN,NaN],_=[NaN,NaN,NaN,NaN];let f=!1,p=Nt(c,t,!0);0===p.distance&&(f=!0,l[0][0]=c[0],l[0][1]=c[1],p=Nt(c,t,!1)),u[0]=p.distance,_[0]=0;const d=[NaN,NaN];let g=!1,m=.25,P=-1,x=NaN;do{if(x=NaN,l[1]=Ot(t,Ut(a[0],a[2],m),0,e),isNaN(l[1][0])||isNaN(l[1][1])||(p=Nt(l[1],t,!1),x=p.distance),!isNaN(x)&&x>s&&Et(l[1],t))g=!0,u[1]=x,_[1]=Ht(l[1],c);else if(!isNaN(x)&&x>P&&(P=x,d[0]=l[1][0],d[1]=l[1][1]),m-=.01,m<.1){if(!(P>=0))break;g=!0,u[1]=P,l[1][0]=d[0],l[1][1]=d[1],_[1]=Ht(l[1],c)}}while(!g);g=!1,m=.5,P=-1;let y=.01,b=1;do{if(x=NaN,l[2]=Ot(t,Ut(a[0],a[2],m),0,e),isNaN(l[2][0])||isNaN(l[2][1])||(p=Nt(l[2],t,!1),x=p.distance),!isNaN(x)&&x>s&&Et(l[2],t))g=!0,u[2]=x,_[2]=Ht(l[2],c);else if(!isNaN(x)&&x>P)P=x,d[0]=l[2][0],d[1]=l[2][1];else if(x>P&&(P=x,d[0]=l[2][0],d[1]=l[2][1]),m=.5+y*b,y+=.01,b*=-1,m<.3||m>.7){if(!(P>=0))break;g=!0,u[2]=P,l[2][0]=d[0],l[2][1]=d[1],_[2]=Ht(l[2],c)}}while(!g);g=!1,m=.75,P=-1;do{if(x=NaN,l[3]=Ot(t,Ut(a[0],a[2],m),0,e),isNaN(l[3][0])||isNaN(l[3][1])||(p=Nt(l[3],t,!1),x=p.distance),!isNaN(x)&&x>s&&Et(l[3],t))g=!0,u[3]=x,_[3]=Ht(l[3],c);else if(x>P&&(P=x,d[0]=l[3][0],d[1]=l[3][1]),m+=.01,m>.9){if(!(P>=0))break;g=!0,u[3]=P,l[3][0]=d[0],l[3][1]=d[1],_[3]=Ht(l[3],c)}}while(!g);const M=[0,1,2,3],S=f?0:1;let C;for(let t=S;t<4;t++)for(let t=S;t<3;t++){const e=_[t],s=_[t+1];Dt(e,s)>0&&(C=M[t],M[t]=M[t+1],M[t+1]=C,_[t]=s,_[t+1]=e)}let w=S,z=0,A=0;for(let t=S;t<4;t++){switch(t){case 0:A=2*u[M[t]];break;case 1:A=1.66666666*u[M[t]];break;case 2:A=1.33333333*u[M[t]];break;case 3:A=u[M[t]]}A>z&&(z=A,w=M[t])}return l[w]}function Et(t,e){let s,i,n,r,h=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(s=e.x,i=e.y;e.nextPoint();s=n,i=r)n=e.x,r=e.y,i>t[1]!=r>t[1]&&((n-s)*(t[1]-i)-(r-i)*(t[0]-s)>0?h++:h--);return 0!==h}function Nt(t,e,s){if(s&&Et(t,e))return{coord:t,distance:0};let i=1/0,n=0,r=0,h=[0,0],o=[0,0];const a=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(h[0]=e.x,h[1]=e.y;e.nextPoint();h=o){o=[e.x,e.y],(0,f.l)(a,t,h,o);const s=Ht(t,a);s<i&&(i=s,n=a[0],r=a[1])}return{coord:[n,r],distance:Math.sqrt(i)}}function Ot(t,e,s,i){const n=[e,0];let h=1/0,o=1/0,a=!1,c=!1;const l=[[e,i[1]-1],[e,i[3]+1]],u=[0,0],_=[0,0],f=[0,0],d=[[0,0],[0,0]],g=(0,r.c)();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(d[0][0]=t.x,d[0][1]=t.y;t.nextPoint();d[0][0]=d[1][0],d[0][1]=d[1][1]){if(d[1][0]=t.x,d[1][1]=t.y,null===Gt(g,d))continue;if(_[0]=l[0][0],_[1]=l[0][1],f[0]=l[1][0],f[1]=l[1][1],0===Yt(g,_,f))continue;if(!(0,p.s)(l[0],l[1],d[0],d[1],u))continue;const e=u[1];h>o?e<h&&(h=e,a=!0):e<o&&(o=e,c=!0)}return a&&c?n[1]=(h+o)/2:n[0]=n[1]=NaN,n}function Gt(t,e){if(e.length<2)return null;t||(t=(0,r.c)());const[s,i]=e[0],[n,h]=e[1];return t[0]=Math.min(s,n),t[1]=Math.min(i,h),t[2]=Math.max(s,n),t[3]=Math.max(i,h),t}const Ft=1,Rt=4,Bt=3,Xt=12;function Yt(t,e,s){let i=Vt(e,t),n=Vt(s,t);const r=t[0],h=t[1],o=t[2],a=t[3];if(i&n)return 0;if(!(i|n))return 4;const c=(i?1:0)|(n?2:0);do{const c=s[0]-e[0],l=s[1]-e[1];if(c>l)i&Bt?(i&Ft?(e[1]+=l*(r-e[0])/c,e[0]=r):(e[1]+=l*(o-e[0])/c,e[0]=o),i=Vt(e,t)):n&Bt?(n&Ft?(s[1]+=l*(r-s[0])/c,s[0]=r):(s[1]+=l*(o-s[0])/c,s[0]=o),n=Vt(s,t)):i?(i&Rt?(e[0]+=c*(h-e[1])/l,e[1]=h):(e[0]+=c*(a-e[1])/l,e[1]=a),i=Vt(e,t)):(n&Rt?(s[0]+=c*(h-s[1])/l,s[1]=h):(s[0]+=c*(a-s[1])/l,s[1]=a),n=Vt(s,t));else if(i&Xt?(i&Rt?(e[0]+=c*(h-e[1])/l,e[1]=h):(e[0]+=c*(a-e[1])/l,e[1]=a),i=Vt(e,t)):n&Xt?(n&Rt?(s[0]+=c*(h-s[1])/l,s[1]=h):(s[0]+=c*(a-s[1])/l,s[1]=a),n=Vt(s,t)):i?(i&Ft?(e[1]+=l*(r-e[0])/c,e[0]=r):(e[1]+=l*(o-e[0])/c,e[0]=o),i=Vt(e,t)):(n&Ft?(s[1]+=l*(r-s[0])/c,s[0]=r):(s[1]+=l*(o-s[0])/c,s[0]=o),n=Vt(s,t)),i&n)return 0}while(i|n);return c}function Vt(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function Ut(t,e,s){return t+(e-t)*s}function Ht(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function Dt(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const s=isNaN(t),i=isNaN(e);return s<i?-1:s>i?1:0}class Wt{static local(){return null===Wt.instance&&(Wt.instance=new Wt),Wt.instance}execute(t,e,s,i,n){return new Jt(t,e,s)}}Wt.instance=null;class Jt{constructor(t,e,s){this._geometryCursor=t,this._offsetX=void 0!==e.offsetX?e.offsetX*s:0,this._offsetY=void 0!==e.offsetY?e.offsetY*s:0,this._method=void 0!==e.method?e.method:u.j.OnPolygon,this._internalPlacement=new g}next(){const t=this._geometryCursor;return this._geometryCursor=null,t?this._polygonCenter(t):null}_polygonCenter(t){let e=!1;switch(this._method){case u.j.CenterOfMass:{const s=(0,o.w)(t);s&&(this._internalPlacement.setTranslate(s[0]+this._offsetX,s[1]+this._offsetY),e=!0)}break;case u.j.BoundingBoxCenter:{const s=(0,h.f)(t);s&&(this._internalPlacement.setTranslate((s[2]+s[0])/2+this._offsetX,(s[3]+s[1])/2+this._offsetY),e=!0)}break;case u.j.OnPolygon:default:{const s=kt(t);null!==s&&(this._internalPlacement.setTranslate(s[0]+this._offsetX,s[1]+this._offsetY),e=!0)}}return e?this._internalPlacement:null}}function Zt(t){if(!t)return null;switch(t.type){case"CIMGeometricEffectAddControlPoints":return A.local();case"CIMGeometricEffectArrow":return G.local();case"CIMGeometricEffectBuffer":return R.local();case"CIMGeometricEffectControlMeasureLine":return X.local();case"CIMGeometricEffectCut":return V.local();case"CIMGeometricEffectDashes":return q.local();case"CIMGeometricEffectDonut":return $.local();case"CIMGeometricEffectJog":return tt.local();case"CIMGeometricEffectMove":return st.local();case"CIMGeometricEffectOffset":return nt.local();case"CIMGeometricEffectReverse":return ht.local();case"CIMGeometricEffectRotate":return ct.local();case"CIMGeometricEffectScale":return ut.local();case"CIMGeometricEffectWave":return ft.local()}return null}function jt(t){if(!t)return null;switch(t.type){case"CIMMarkerPlacementAlongLineSameSize":return dt.local();case"CIMMarkerPlacementAtExtremities":return mt.local();case"CIMMarkerPlacementAtRatioPositions":return xt.local();case"CIMMarkerPlacementInsidePolygon":return Ct.local();case"CIMMarkerPlacementOnLine":return At.local();case"CIMMarkerPlacementOnVertices":return Lt.local();case"CIMMarkerPlacementPolygonCenter":return Wt.local()}return null}function qt(t){if(!t)return 0;switch(t.type){case"CIMGeometricEffectArrow":return Math.abs(.5*t.width);case"CIMGeometricEffectBuffer":return Math.abs(t.size);case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(t.length);case"CIMGeometricEffectJog":return Math.abs(.5*t.length);case"CIMGeometricEffectMove":return Math.max(Math.abs((0,d.k)(t.offsetX)),Math.abs((0,d.k)(t.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(t.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(t.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(t.fromWidth),Math.abs(t.toWidth));case"CIMGeometricEffectWave":return Math.abs(t.amplitude);case"CIMGeometricEffectDonut":return Math.abs(t.width)}}function Kt(t){if(!t)return 0;let e=0;for(const s of t)e+=qt(s);return e}Math.PI,Math.PI,Math.PI;const $t=t=>{if(!t)return[0,0,0,0];const{r:e,g:s,b:i,a:n}=t;return[e,s,i,255*n]}},89241:(t,e,s)=>{s.d(e,{L:()=>n});var i=s(91700);class n{constructor(t,e){this._storage=new i.M,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),e&&this._storage.registerRemoveFunc("",e)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e,s=1){this._storage.put(this,t,e,s,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}},91700:(t,e,s)=>{s.d(e,{M:()=>o,a:()=>h});var i,n,r=s(6906);(n=i||(i={}))[n.ALL=0]="ALL",n[n.SOME=1]="SOME";class h{constructor(t,e,s){this.name=t,this._storage=e,this.id=a+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),s&&(this._storage.registerRemoveFunc(this.id,s),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(t){return this._storage.getSize(this,t)}resetHitRate(){this._hit=this._miss=0}put(t,e,s,i=0){this._storage.put(this,t,e,s,i)}pop(t){const e=this._storage.pop(this,t);return void 0===e?++this._miss:++this._hit,e}get(t){const e=this._storage.get(this,t);return void 0===e?++this._miss:++this._hit,e}peek(t){return this._storage.peek(this,t)}updateSize(t,e,s){this._storage.updateSize(this,t,e,s)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class o{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new r.P,this._users=new r.P}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,e){const s=this._db.get(t.id+e);return s?.size??0}put(t,e,s,n,r){e=t.id+e;const h=this._db.get(e);if(h&&(this._size-=h.size,t.size-=h.size,this._db.delete(e),h.entry!==s&&this._notifyRemove(e,h.entry,h.size,i.ALL)),n>this._maxSize)return void this._notifyRemove(e,s,n,i.ALL);if(void 0===s)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${e}`),void this._notifyRemove(e,s,0,i.ALL);const o=1+Math.max(r,-4)- -3;this._db.set(e,new c(s,n,o)),this._size+=n,t.size+=n,this._checkSize()}updateSize(t,e,s,n){e=t.id+e;const r=this._db.get(e);if(r&&r.entry===s){for(this._size-=r.size,t.size-=r.size;n>this._maxSize;){const t=this._notifyRemove(e,s,n,i.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);n=t}r.size=n,this._size+=n,t.size+=n,this._checkSize()}}pop(t,e){e=t.id+e;const s=this._db.get(e);if(s)return this._size-=s.size,t.size-=s.size,this._db.delete(e),++this._hit,s.entry;++this._miss}get(t,e){e=t.id+e;const s=this._db.get(e);if(void 0!==s)return this._db.delete(e),s.lives=s.lifetime,this._db.set(e,s),++this._hit,s.entry;++this._miss}peek(t,e){const s=this._db.get(t.id+e);return s?++this._hit:++this._miss,s?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},s=new Array;this._db.forEach(((t,i)=>{const n=t.lifetime;s[n]=(s[n]||0)+t.size,this._users.forAll((s=>{const{id:n,name:r}=s;if(i.startsWith(n)){const s=e[r]||0;e[r]=s+t.size}}))}));const i={};this._users.forAll((t=>{const s=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const n=e[s]||0;e[s]=n,i[s]=Math.round(100*t.hitRate)+"%"}else i[s]="0%"}));const n=Object.keys(e);n.sort(((t,s)=>e[s]-e[t])),n.forEach((s=>t[s]=Math.round(e[s]/2**20)+"MB / "+i[s]));for(let e=s.length-1;e>=0;--e){const i=s[e];i&&(t["Priority "+(e+-3-1)]=Math.round(i/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,s)=>{s.startsWith(e)&&(this._size-=t.size,this._db.delete(s),this._notifyRemove(s,t.entry,t.size,i.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,t.size,i.ALL))),this._users.forAll((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,s,i){let n;return this._removeFuncs.some((r=>{if(t.startsWith(r[0])){const t=r[1](e,i,s);return"number"==typeof t&&(n=t),!0}return!1})),n}_checkSize(){this._users.forAll((t=>this._checkSizeLimits(t))),this._checkSizeLimits()}_checkSizeLimits(t){const e=t??this;if(e.maxSize<0||e.size<=e.maxSize)return;const s=t?.id;let i=!0;for(;i;){i=!1;for(const[n,r]of this._db)if(0===r.lifetime&&(!s||n.startsWith(s))){if(this._purgeItem(n,r,t),e.size<=.9*e.maxSize)return;i||=this._db.has(n)}}for(const[i,n]of this._db)if((!s||i.startsWith(s))&&(this._purgeItem(i,n,t),e.size<=.9*e.maxSize))return}_purgeItem(t,e,s=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,s&&(s.size-=e.size);const n=this._notifyRemove(t,e.entry,e.size,i.SOME);null!=n&&n>0&&(this._size+=n,s&&(s.size+=n),e.lives=e.lifetime,e.size=n,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}let a=0;class c{constructor(t,e,s){this.entry=t,this.size=e,this.lifetime=s,this.lives=s}}},20369:(t,e,s)=>{s.d(e,{R:()=>i});class i{constructor(t=0,e=0,s=0,i=0){this.x=t,this.y=e,this.width=s,this.height=i}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}},30439:(t,e,s)=>{s.d(e,{a:()=>c,b:()=>a,c:()=>u,d:()=>l}),s(76506);var i=s(5909),n=s(78548),r=s(60669),h=s(48208),o=s(6941);const a=r.Z.fromJSON(o.d),c=n.Z.fromJSON(o.a),l=i.Z.fromJSON(o.b),u=h.Z.fromJSON(o.c);r.Z.fromJSON(o.e),n.Z.fromJSON(o.f),i.Z.fromJSON(o.g)},6941:(t,e,s)=>{s.d(e,{a:()=>r,b:()=>h,c:()=>o,d:()=>n,e:()=>a,f:()=>c,g:()=>l});const i=[252,146,31,255],n={type:"esriSMS",style:"esriSMSCircle",size:6,color:i,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},r={type:"esriSLS",style:"esriSLSSolid",width:.75,color:i},h={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},o={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},a={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},l={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},93939:(t,e,s)=>{s.d(e,{a:()=>p,b:()=>_,d:()=>d,h:()=>f});var i=s(21972),n=s(15324),r=s(66396);const h=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function o(t){return t instanceof i.Z}function a(t){return t instanceof n.Z?Object.keys(t.items):o(t)?(0,r.g)(t).keys():t?Object.keys(t):[]}function c(t,e){return t instanceof n.Z?t.items[e]:t[e]}function l(t){return t?t.declaredClass:null}function u(t,e){const s=t.diff;if(s&&"function"==typeof s)return s(t,e);const i=a(t),n=a(e);if(0===i.length&&0===n.length)return;if(!i.length||!n.length||function(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}(t,e))return{type:"complete",oldValue:t,newValue:e};const r=n.filter((t=>!i.includes(t))),_=i.filter((t=>!n.includes(t))),f=i.filter((s=>n.includes(s)&&c(t,s)!==c(e,s))).concat(r,_).sort(),p=l(t);if(p&&h.has(p)&&f.length)return{type:"complete",oldValue:t,newValue:e};let d;const g=o(t)&&o(e);for(const i of f){const n=c(t,i),r=c(e,i);let h;if((g||"function"!=typeof n&&"function"!=typeof r)&&n!==r&&(null!=n||null!=r)){if(s&&s[i]&&"function"==typeof s[i])h=s[i]?.(n,r);else if(n instanceof Date&&r instanceof Date){if(n.getTime()===r.getTime())continue;h={type:"complete",oldValue:n,newValue:r}}else h="object"==typeof n&&"object"==typeof r&&l(n)===l(r)?u(n,r):{type:"complete",oldValue:n,newValue:r};null!=h&&(null!=d?d.diff[i]=h:d={type:"partial",diff:{[i]:h}})}}return d}function _(t,e){return f(t,e)}function f(t,e){if(null==t)return!1;const s=e.split(".");let i=t;for(const t of s){if("complete"===i.type)return!0;if("partial"!==i.type)return!1;{const e=i.diff[t];if(!e)return!1;i=e}}return!0}function p(t,e){if(!t)return!1;if("partial"===t.type){const s=Object.keys(t.diff);return 1===s.length&&s[0]===e}return!1}function d(t,e){if("function"!=typeof t&&"function"!=typeof e&&(null!=t||null!=e))return null==t||null==e||"object"==typeof t&&"object"==typeof e&&l(t)!==l(e)?{type:"complete",oldValue:t,newValue:e}:u(t,e)}},13260:(t,e,s)=>{s(31450),new Map,new Set},46427:(t,e,s)=>{function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function n(t,e,s){const i=e[0],n=e[1],r=e[2],h=e[3],o=e[4],a=e[5],c=s[0],l=s[1],u=s[2],_=s[3],f=s[4],p=s[5];return t[0]=i*c+r*l,t[1]=n*c+h*l,t[2]=i*u+r*_,t[3]=n*u+h*_,t[4]=i*f+r*p+o,t[5]=n*f+h*p+a,t}function r(t,e,s){const i=e[0],n=e[1],r=e[2],h=e[3],o=e[4],a=e[5],c=Math.sin(s),l=Math.cos(s);return t[0]=i*l+r*c,t[1]=n*l+h*c,t[2]=i*-c+r*l,t[3]=n*-c+h*l,t[4]=o,t[5]=a,t}function h(t,e,s){const i=e[0],n=e[1],r=e[2],h=e[3],o=e[4],a=e[5],c=s[0],l=s[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=i*c+r*l+o,t[5]=n*c+h*l+a,t}function o(t,e){const s=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=s,t[2]=-s,t[3]=i,t[4]=0,t[5]=0,t}s.d(e,{c:()=>i,f:()=>o,m:()=>n,r:()=>r,t:()=>h})},63096:(t,e,s)=>{function i(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function n(t,e,s,i){const n=e[i],r=e[i+1];t[i]=s[0]*n+s[2]*r+s[4],t[i+1]=s[1]*n+s[3]*r+s[5]}function r(t,e,s,i=0,r=0,h=2){const o=r||e.length/h;for(let r=i;r<o;r++)n(t,e,s,r*h)}s.d(e,{c:()=>i,t:()=>r})},2775:(t,e,s)=>{s.d(e,{a:()=>g,b:()=>m,c:()=>p,d:()=>d,s:()=>z});var i=s(46427),n=s(63096),r=s(47880),h=s(87372),o=s(92143),a=s(20369),c=s(70766);const l=()=>o.L.getLogger("esri.views.2d.engine.webgl.alignmentUtils");var u,_,f;function p(t){if(!t)return u.Center;switch(t){case"Left":case"left":return u.Left;case"Right":case"right":return u.Right;case"Justify":return l().warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),u.Center;case"Center":case"center":return u.Center}}function d(t){if(!t)return _.Center;switch(t){case"Top":case"top":return _.Top;case"Center":case"middle":return _.Center;case"Baseline":case"baseline":return _.Baseline;case"Bottom":case"bottom":return _.Bottom}}function g(t){switch(t){case u.Right:case"right":return-1;case u.Center:case"center":return 0;case u.Left:case"left":return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function m(t){switch(t){case _.Top:case"top":return 1;case _.Center:case"middle":return 0;case _.Bottom:case _.Baseline:case"baseline":case"bottom":return-1;default:return console.debug(`Found invalid vertical alignment ${t}`),0}}(f=u||(u={}))[f.Left=-1]="Left",f[f.Center=0]="Center",f[f.Right=1]="Right",function(t){t[t.Top=1]="Top",t[t.Center=0]="Center",t[t.Bottom=-1]="Bottom",t[t.Baseline=2]="Baseline"}(_||(_={}));const P=Math.PI/180;class x{constructor(t,e,s,i){this._rotationT=(0,n.c)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const r=s.rect,h=new Float32Array(8);t*=i,e*=i;const o=s.code?r.width*i:s.metrics.width,a=s.code?r.height*i:s.metrics.height;this.width=o,this.height=a,h[0]=t,h[1]=e,h[2]=t+o,h[3]=e,h[4]=t,h[5]=e+a,h[6]=t+o,h[7]=e+a,this._data=h,this._setTextureCoords(r),this._scale=i,this._mosaic=s,this.x=t,this.y=e,this.maxOffset=Math.max(t+o,e+a)}get mosaic(){return this._mosaic}set angle(t){this._angle=t,(0,i.f)(this._rotationT,-t),this._setOffsets()}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:t,width:e}=this._mosaic.metrics,s=e*this._scale,r=Math.abs(t)*this._scale,h=new Float32Array(8);h[0]=this.x,h[1]=this.y,h[2]=this.x+s,h[3]=this.y,h[4]=this.x,h[5]=this.y+r,h[6]=this.x+s,h[7]=this.y+r;const o=(0,i.m)((0,n.c)(),this._rotationT,this._transform);(0,n.t)(h,h,o);let a=1/0,l=1/0,u=0,_=0;for(let t=0;t<4;t++){const e=h[2*t],s=h[2*t+1];a=Math.min(a,e),l=Math.min(l,s),u=Math.max(u,e),_=Math.max(_,s)}const f=u-a,p=_-l,d=a+f/2,g=l+p/2;this._bounds=new c.B(d,g,f,p)}return this._bounds}setTransform(t){this._transform=t,this._offsets=null}_setOffsets(){this._offsets||(this._offsets={topLeft:[0,0],topRight:[0,0],bottomLeft:[0,0],bottomRight:[0,0]});const t=(0,i.m)((0,n.c)(),this._rotationT,this._transform);this._offsets.topLeft[0]=this._data[0],this._offsets.topLeft[1]=this._data[1],this._offsets.topRight[0]=this._data[2],this._offsets.topRight[1]=this._data[3],this._offsets.bottomLeft[0]=this._data[4],this._offsets.bottomLeft[1]=this._data[5],this._offsets.bottomRight[0]=this._data[6],this._offsets.bottomRight[1]=this._data[7],(0,r.t)(this._offsets.topLeft,this._offsets.topLeft,t),(0,r.t)(this._offsets.topRight,this._offsets.topRight,t),(0,r.t)(this._offsets.bottomLeft,this._offsets.bottomLeft,t),(0,r.t)(this._offsets.bottomRight,this._offsets.bottomRight,t)}_setTextureCoords({x:t,y:e,width:s,height:i}){this._texcoords={topLeft:[t,e],topRight:[t+s,e],bottomLeft:[t,e+i],bottomRight:[t+s,e+i]}}}const y=(t,e)=>({code:0,page:0,sdf:!0,rect:new a.R(0,0,11,8),textureBinding:e,metrics:{advance:0,height:4,width:t,left:0,top:0}});function b(t,e){return t.forEach((t=>(0,r.t)(t,t,e))),{topLeft:t[0],topRight:t[1],bottomLeft:t[2],bottomRight:t[3]}}class M{constructor(t,e,s){this._rotation=0,this._decorate(t,e,s),this.glyphs=t,this.bounds=this._createBounds(t),this.isMultiline=e.length>1,this._hasRotation=0!==s.angle,this._transform=this._createGlyphTransform(this.bounds,s),this._borderLineSizePx=s.borderLineSizePx,(s.borderLineSizePx||s.hasBackground)&&([this.bounds,this.textBox]=this.shapeBackground(this._transform));for(const e of t)e.setTransform(this._transform)}setRotation(t){if(0===t&&0===this._rotation)return;this._rotation=t;const e=this._transform,s=(0,i.f)((0,n.c)(),t);(0,i.m)(e,s,e);for(const t of this.glyphs)t.setTransform(this._transform)}_decorate(t,e,s){if(!s.decoration||"none"===s.decoration||!t.length)return;const i=s.scale,n="underline"===s.decoration?26:16,r=t[0].textureBinding;for(const s of e){const e=s.startX*i,h=s.startY*i,o=(s.width+s.glyphWidthEnd)*i;t.push(new x(e,h+n*i,y(o,r),1))}}shapeBackground(t){const e=(1.5+(this._borderLineSizePx||0))/2,s=this._borderLineSizePx?e:0,{xmin:i,ymin:n,xmax:r,ymax:h,x:o,y:a,width:l,height:u}=this.bounds,_=[i-8,n-8],f=[r+8,n-8],p=[i-8,h+8],d=[r+8,h+8],g=b([[_[0]-e,_[1]-e],[f[0]+e,f[1]-e],[_[0]+s,_[1]+s],[f[0]-s,f[1]+s]],t),m=b([[p[0]+s,p[1]-s],[d[0]-s,d[1]-s],[p[0]-e,p[1]+e],[d[0]+e,d[1]+e]],t),P=b([[_[0]-e,_[1]-e],[_[0]+s,_[1]+s],[p[0]-e,p[1]+e],[p[0]+s,p[1]-s]],t),x=b([[f[0]-s,f[1]+s],[f[0]+e,f[1]-e],[d[0]-s,d[1]-s],[d[0]+e,d[1]+e]],t),y={main:b([_,f,p,d],t),top:g,bot:m,left:P,right:x};return[new c.B(o,a,l+2*e,u+2*e),y]}get boundsT(){const t=this.bounds,e=(0,r.g)((0,h.c)(),t.x,t.y);if((0,r.t)(e,e,this._transform),this._hasRotation){const s=Math.max(t.width,t.height);return new c.B(e[0],e[1],s,s)}return new c.B(e[0],e[1],t.width,t.height)}_createBounds(t){let e=1/0,s=1/0,i=0,n=0;for(const r of t)e=Math.min(e,r.xTopLeft),s=Math.min(s,r.yTopLeft),i=Math.max(i,r.xBottomRight),n=Math.max(n,r.yBottomRight);const r=i-e,h=n-s;return new c.B(e+r/2,s+h/2,r,h)}_createGlyphTransform(t,e){const s=P*e.angle,o=(0,n.c)(),a=(0,h.c)();return(0,i.t)(o,o,(0,r.g)(a,e.xOffset,-e.yOffset)),e.useCIMAngleBehavior?(0,i.r)(o,o,s):((0,i.t)(o,o,(0,r.g)(a,t.x,t.y)),(0,i.r)(o,o,s),(0,i.t)(o,o,(0,r.g)(a,-t.x,-t.y))),o}}class S{constructor(t,e,s,i,n,r){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(e,s)),this.end=Math.max(0,Math.max(e,s)),this.end<t.length&&(this.glyphWidthEnd=t[this.end].metrics.width),this.width=i,this.yMin=n,this.yMax=r}}const C=t=>10===t,w=t=>32===t;function z(t,e){const s=e.scale,i=new Array,{glyphs:n,isRightToLeft:r}=t,h=function(t,e,s){const i=new Array,n=1/s.scale,r=s.maxLineWidth*n,h=e?t.length-1:0,o=e?-1:t.length,a=e?-1:1;let c=h,l=0,u=0,_=c,f=_,p=0,d=1/0,g=0;for(;c!==o;){const{code:e,metrics:s}=t[c],n=Math.abs(s.top);if(C(e)||w(e)||(d=Math.min(d,n),g=Math.max(g,n+s.height)),C(e))c!==h&&(i.push(new S(t,_,c-a,l,d,g)),d=1/0,g=0),l=0,_=c+a,f=c+a,u=0;else if(w(e))f=c+a,u=0,p=s.advance,l+=s.advance;else if(l>r){if(f!==_){const e=f-2*a;l-=p,i.push(new S(t,_,e,l-u,d,g)),d=1/0,g=0,_=f,l=u}else i.push(new S(t,_,c-a,l,d,g)),d=1/0,g=0,_=c,f=c,l=0;l+=s.advance,u+=s.advance}else l+=s.advance,u+=s.advance;c+=a}const m=new S(t,_,c-a,l,d,g);return m.start>=0&&m.end<t.length&&i.push(m),i}(n,r,e),o=function(t,e){let s=0;for(let e=0;e<t.length;e++){const{width:i}=t[e];s=Math.max(i,s)}const i="underline"===e.decoration?4:0,n=t[0].yMin;return{x:0,y:n,height:t[t.length-1].yMax+e.lineHeight*(t.length-1)+i-n,width:s}}(h,e),a=p(e.horizontalAlignment),c=d(e.verticalAlignment),l=c===_.Baseline?1:0,u=l?0:c-1,f=(1-l)*-o.y+u*(o.height/2)+-22*(l?1:0);for(let t=0;t<h.length;t++){const{start:r,end:o,width:c}=h[t];let l=-1*(a+1)*(c/2)-3;const u=t*e.lineHeight+f-3;h[t].startX=l,h[t].startY=u;for(let t=r;t<=o;t++){const e=n[t];if(C(e.code))continue;const r=new x(l+e.metrics.left,u-e.metrics.top,e,s);l+=e.metrics.advance,i.push(r)}}return new M(i,h,e)}},19124:(t,e,s)=>{s.d(e,{F:()=>l,d:()=>a,e:()=>r,f:()=>h,g:()=>u,k:()=>o,u:()=>c});const i=" /-,\n";function n(t){let e=t.length;for(;e--;)if(!i.includes(t.charAt(e)))return!1;return!0}function r(t,e){const s=[];let i=0,r=-1;do{if(r=t.indexOf("[",i),r>=i){if(r>i){const e=t.substr(i,r-i);s.push([e,null,n(e)])}if(i=r+1,r=t.indexOf("]",i),r>=i){if(r>i){const n=e[t.substr(i,r-i)];n&&s.push([null,n,!1])}i=r+1}}}while(-1!==r);if(i<t.length-1){const e=t.substr(i);s.push([e,null,n(e)])}return s}function h(t,e,s){let i="",n=null;for(const s of e){const[e,r,h]=s;if(e)h?n=e:(n&&(i+=n,n=null),i+=e);else{const e=t.attributes[r];e&&(n&&(i+=n,n=null),i+=e)}}return function(t,e){switch("string"!=typeof t&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}(i,s)}const o=(t,e=0)=>null==t||isNaN(t)?e:t;function a(t){return(t?Object.keys(t):[]).map((e=>({name:e,alias:e,type:"string"==typeof t[e]?"esriFieldTypeString":"esriFieldTypeDouble"})))}function c(t){return t?t.charAt(0).toLowerCase()+t.substring(1):t}function l(t,e,s,i,n,r){const{infos:h}=r;let o=1,a=0,c=0,l=0;for(const{offsetX:t,offsetY:e,rotation:s,size:i,frameHeight:n,rotateClockWise:r}of h)c=f(t,e,a,o,c),l=_(t,e,a,o,l),n&&(o*=i/n),a=p(s,r,a);const u=f(i,n,a,o,c),d=_(i,n,a,o,l);return{size:t*o,rotation:p(e,s,a),offsetX:u,offsetY:d}}function u(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const t of e)if("CIMVectorMarker"===t.type)return u(t)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const t of e)if(t.symbol)return u(t.symbol)}}return"Normal"}function _(t,e,s,i,n){const r=s*Math.PI/180;if(r){const s=Math.cos(r);return(Math.sin(r)*t+s*e)*i+n}return e*i+n}function f(t,e,s,i,n){const r=s*Math.PI/180;return r?(Math.cos(r)*t-Math.sin(r)*e)*i+n:t*i+n}function p(t,e,s){return e?s-t:s+t}},47880:(t,e,s)=>{function i(t,e,s){return t[0]=e,t[1]=s,t}function n(t,e){const s=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(s*s+i*i)}function r(t,e,s,i){const n=e[0],r=e[1];return t[0]=n+i*(s[0]-n),t[1]=r+i*(s[1]-r),t}function h(t,e,s){const i=e[0],n=e[1];return t[0]=s[0]*i+s[2]*n+s[4],t[1]=s[1]*i+s[3]*n+s[5],t}function o(t,e,s,i){const n=e[0]-s[0],r=e[1]-s[1],h=Math.sin(i),o=Math.cos(i);return t[0]=n*o-r*h+s[0],t[1]=n*h+r*o+s[1],t}s.d(e,{g:()=>i,h:()=>r,r:()=>o,t:()=>h,x:()=>n}),s(29794)},87372:(t,e,s)=>{function i(){return new Float32Array(2)}function n(t,e){const s=new Float32Array(2);return s[0]=t,s[1]=e,s}s.d(e,{O:()=>h,Z:()=>r,c:()=>i,f:()=>n});const r=i(),h=n(1,1);n(1,0),n(0,1)}}]);