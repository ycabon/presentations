/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import{s as r}from"./jsonMap.js";import{JSONSupport as t}from"../core/JSONSupport.js";import{property as o}from"../core/accessorSupport/decorators/property.js";import{cast as a}from"../core/accessorSupport/decorators/cast.js";import{e as s}from"./enumeration.js";import{r as p}from"./reader.js";import{subclass as i,c as n}from"../core/accessorSupport/decorators/subclass.js";import{I as l,e as y,a as c}from"./ensureType.js";import u from"../layers/support/Field.js";import"../core/lang.js";import"../geometry.js";import"./Logger.js";import d from"../geometry/SpatialReference.js";import{f as S}from"./typeUtils.js";var b;let m=b=class extends t{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:r}=this;return new b({mapLayerId:e,gdbVersion:r})}};var j;e([s({mapLayer:"map-layer"})],m.prototype,"type",void 0),e([o({type:l,json:{write:!0}})],m.prototype,"mapLayerId",void 0),e([o({type:String,json:{write:!0}})],m.prototype,"gdbVersion",void 0),m=b=e([i("esri.layers.support.source.MapLayerSource")],m);let f=j=class extends t{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:r,oidFields:t,spatialReference:o,geometryType:a}=this,s={workspaceId:e,query:r,oidFields:t,spatialReference:o?.clone()??void 0,geometryType:a};return new j(s)}};var g;e([s({queryTable:"query-table"})],f.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],f.prototype,"workspaceId",void 0),e([o({type:String,json:{write:!0}})],f.prototype,"query",void 0),e([o({type:String,json:{write:!0}})],f.prototype,"oidFields",void 0),e([o({type:d,json:{write:!0}})],f.prototype,"spatialReference",void 0),e([s(S)],f.prototype,"geometryType",void 0),f=j=e([i("esri.layers.support.source.QueryTableDataSource")],f);let T=g=class extends t{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:r}=this;return new g({workspaceId:e,dataSourceName:r})}};var v;e([s({raster:"raster"})],T.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],T.prototype,"dataSourceName",void 0),e([o({type:String,json:{write:!0}})],T.prototype,"workspaceId",void 0),T=g=e([i("esri.layers.support.source.RasterDataSource")],T);let w=v=class extends t{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:r,dataSourceName:t}=this;return new v({workspaceId:e,gdbVersion:r,dataSourceName:t})}};var h,I;e([s({table:"table"})],w.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),e([o({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),e([o({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=v=e([i("esri.layers.support.source.TableDataSource")],w);const L=r()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let k=h=class extends t{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,r,t){return q()(e,r,t)}castLeftTableSource(e){return c(N(),e)}readRightTableSource(e,r,t){return q()(e,r,t)}castRightTableSource(e){return c(N(),e)}clone(){const{leftTableKey:e,rightTableKey:r,leftTableSource:t,rightTableSource:o,joinType:a}=this,s={leftTableKey:e,rightTableKey:r,leftTableSource:t?.clone()??void 0,rightTableSource:o?.clone()??void 0,joinType:a};return new h(s)}};e([s({joinTable:"join-table"})],k.prototype,"type",void 0),e([o({type:String,json:{write:!0}})],k.prototype,"leftTableKey",void 0),e([o({type:String,json:{write:!0}})],k.prototype,"rightTableKey",void 0),e([o({json:{write:!0}})],k.prototype,"leftTableSource",void 0),e([p("leftTableSource")],k.prototype,"readLeftTableSource",null),e([a("leftTableSource")],k.prototype,"castLeftTableSource",null),e([o({json:{write:!0}})],k.prototype,"rightTableSource",void 0),e([p("rightTableSource")],k.prototype,"readRightTableSource",null),e([a("rightTableSource")],k.prototype,"castRightTableSource",null),e([s(L)],k.prototype,"joinType",void 0),k=h=e([i("esri.layers.support.source.JoinTableDataSource")],k);let R=null;function q(){return R||(R=n({types:N()})),R}let x=null;function N(){return x||(x={key:"type",base:null,typeMap:{"data-layer":K,"map-layer":m}}),x}const D={key:"type",base:null,typeMap:{"join-table":k,"query-table":f,raster:T,table:w}};let K=I=class extends t{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:r}=this;return new I({fields:e,dataSource:r})}};e([s({dataLayer:"data-layer"})],K.prototype,"type",void 0),e([o({type:[u],json:{write:!0}})],K.prototype,"fields",void 0),e([o({types:D,json:{write:!0}})],K.prototype,"dataSource",void 0),K=I=e([i("esri.layers.support.source.DataLayerSource")],K),K.from=y(K);export{K as D,m as M};
