/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{c as e,j as t}from"../core/lang.js";import{W as s}from"./WorkerHandle.js";import{u as a}from"./workerHelper.js";import{e as n}from"./edgeProcessing.js";class r extends s{constructor(e){super("EdgeProcessingWorker","extract",{extract:e=>[e.dataBuffer],extractComponentsEdgeLocations:e=>[e.dataBuffer],extractEdgeLocations:e=>[e.dataBuffer]},e)}async process(e,t,s){if(s)return n(e);const a=await this.invoke(new i(e),t);return this._unpackOutput(a)}async extractEdgeLocations(e,t){const s=await this.invokeMethod("extractEdgeLocations",new i(e),t);return a(s)}async extractComponentsEdgeLocations(e,t){const s=await this.invokeMethod("extractComponentsEdgeLocations",new i(e),t);return a(s)}_unpackOutput(e){return{regular:{instancesData:a(e.regular.instancesData),lodInfo:{lengths:new Float32Array(e.regular.lodInfo.lengths)}},silhouette:{instancesData:a(e.silhouette.instancesData),lodInfo:{lengths:new Float32Array(e.silhouette.lodInfo.lengths)}},averageEdgeLength:e.averageEdgeLength}}}class i{constructor(s){this.dataBuffer=s.data.buffer,this.writerSettings=s.writerSettings,this.skipDeduplicate=s.skipDeduplicate,this.indices=e(s.indices)?s.indices:s.indices.buffer,this.indicesType=e(s.indices)?"Array":t(s.indices)?"Uint32Array":"Uint16Array",this.indicesLength=s.indicesLength}}export{r as E};
