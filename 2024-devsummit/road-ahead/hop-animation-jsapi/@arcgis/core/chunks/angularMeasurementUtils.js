/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{c as e,C as t}from"./Cyclical.js";import{c as r,a}from"./quantityUtils.js";import{l as s,f as i}from"./unitUtils.js";import{f as o}from"./vec2.js";import{c as n,U as c}from"./vec2f64.js";import{s as l,o as u,p as f}from"./vec3.js";import{c as p}from"./vec3f64.js";import{p as g}from"./projectVectorToVector.js";import{geodesicCompatibleSpatialReference as m,inverseGeodeticSolver as v,InverseGeodeticSolverResult as d,directGeodeticSolver as h}from"../geometry/support/geodesicUtils.js";var j;function R(e,t){if(null==e||null==t)return;const a=b(e,t);return null!=a?r(a,"radians","geographic"):void 0}!function(e){e.Absolute="absolute",e.Relative="relative",e.RelativeBilateral="relative-bilateral"}(j||(j={}));const b=(()=>{const e=p(),t=p();return(r,a)=>(l(e,r.x,r.y,r.z??0),l(t,a.x,a.y,a.z??0),y(e,t,r.spatialReference,a.spatialReference))})(),y=(()=>{const e=n(),t=p(),r=p();return(a,n,l,f)=>{if(u(a,n))return;const p=m(l),d=m(f);if(p&&d&&i(p,d)&&g(a,l,t,p)&&g(n,f,r,d)){const{azimuth:e}=v(U,t,r,p);return null!=e?s(e,"degrees","radians"):void 0}e[0]=n[0]-a[0],e[1]=n[1]-a[1];let h=o(c,e);return e[0]<0&&(h=x-h),h}})();function z(e,t,r,a=j.Absolute){if(t&&r)switch(a){case j.Absolute:return R(t,r);case j.Relative:return A(w(e,t,r),j.Relative);case j.RelativeBilateral:return A(w(e,t,r),j.RelativeBilateral)}}function w(e,t,a){if(!e||!t||!a)return;const s=b(e,t),i=b(t,a);return null!=s&&null!=i?r(i-s,"radians","geographic"):void 0}function A(e,t){if(null==e)return;const a=M(e);switch(t){case j.Absolute:{const e=C.normalize(a,0,!0);return r(e,"degrees","geographic")}case j.Relative:{let e=T.normalize(a,0,!0);return-180===e&&(e=180),r(e,"degrees","geographic")}case j.RelativeBilateral:{const e=Math.abs(T.normalize(a,0,!0));return r(e,"degrees","geographic")}}}const B=(()=>{const e=p();return(t,r,i,o,n,c="geodesic")=>{f(e,r);const u=M(n);if("geodesic"===c){const a=m(i);if(a&&g(e,i,e,a))return h(t,e,u,o,a),t[2]=r[2],!!g(t,a,t,i)}const p=a(u,"geographic","arithmetic"),v=s(p,"degrees","radians"),d=r[0]+o*Math.cos(v),j=r[1]+o*Math.sin(v),R=r[2];return l(t,d,j,R),!0}})();function M(e){return null!=e?a(s(e.value,e.unit,"degrees"),e.rotationType,"geographic"):void 0}const U=new d,x=2*Math.PI,C=e,T=new t(-180,180);export{j as D,A as a,z as b,R as d,M as g,B as p,y as r};
