/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{q as e,a as t}from"./dom.js";import{h as n}from"../widgets/Widget.js";
/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v2.3.0
 */const a=["calcite-input","calcite-input-number","calcite-input-text","calcite-text-area"],i="hidden-form-input";function o(e){return"checked"in e}const s=new WeakMap,r=new WeakSet;function c(e){"status"in e&&(e.status="idle"),"validationIcon"in e&&(e.validationIcon=!1),"validationMessage"in e&&(e.validationMessage="")}function l(e){const t=e?.target,n=t?.parentElement,i=n?.nodeName?.toLowerCase(),o=i?.split("-");if(o.length<2||"calcite"!==o[0])return;var s,r;e?.preventDefault(),s=n,r=t?.validationMessage||"","status"in s&&(s.status="invalid"),"validationIcon"in s&&(s.validationIcon=!0),"validationMessage"in s&&(s.validationMessage=r);const l=`${o.map(((e,t)=>0===t?e:`${e[0].toUpperCase()}${e.slice(1)}`)).join("")}${a.includes(i)?"Input":"Change"}`;n.addEventListener(l,(()=>c(n)),{once:!0})}function u(e){const{formEl:t}=e;return!!t&&(t.addEventListener("invalid",l,!0),t.requestSubmit(),t.removeEventListener("invalid",l,!0),requestAnimationFrame((()=>{const e=t.querySelectorAll("[status=invalid]");for(const t of e)if(t?.validationMessage){t?.setFocus();break}})),!0)}function d(e){e.formEl?.reset()}function f(e){const{el:n,value:a}=e,i=m(e);if(!i||function(e,n){if(t(n.parentElement,"[form]"))return!0;const a="calciteInternalFormComponentRegister";let i=!1;return e.addEventListener(a,(e=>{i=e.composedPath().some((e=>r.has(e))),e.stopPropagation()}),{once:!0}),n.dispatchEvent(new CustomEvent(a,{bubbles:!0,composed:!0})),i}(i,n))return;e.formEl=i,e.defaultValue=a,o(e)&&(e.defaultChecked=e.checked);const c=(e.onFormReset||v).bind(e);i.addEventListener("reset",c),s.set(e.el,c),r.add(n)}function m(n){const{el:a,form:i}=n;return i?e(a,{id:i}):t(a,"form")}function v(){c(this),o(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function p(e){const{el:t,formEl:n}=e;if(!n)return;const a=s.get(t);n.removeEventListener("reset",a),s.delete(t),e.formEl=null,r.delete(t)}function h(e,t){e.defaultValue=t}const E="calciteInternalHiddenInputInput",g=e=>{e.target.dispatchEvent(new CustomEvent(E,{bubbles:!0}))},b=e=>e.removeEventListener("input",g);function k(e,t,n){const{defaultValue:a,disabled:i,form:s,name:r,required:c}=e;t.defaultValue=a,t.disabled=i,t.name=r,t.required=c,t.tabIndex=-1,s?t.setAttribute("form",s):t.removeAttribute("form"),o(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?n||"on":""):t.value=n||"",e.syncHiddenFormInput?.(t)}const I=({component:e})=>(function(e){const{el:t,formEl:n,name:a,value:o}=e,{ownerDocument:s}=t,r=t.querySelectorAll(`input[slot="${i}"]`);if(!n||!a)return void r.forEach((e=>{b(e),e.remove()}));const c=Array.isArray(o)?o:[o],l=[],u=new Set;let d;r.forEach((t=>{const n=c.find((e=>e==t.value));null!=n?(u.add(n),k(e,t,n)):l.push(t)})),c.forEach((t=>{if(u.has(t))return;let n=l.pop();n||(n=s.createElement("input"),n.slot=i),d||(d=s.createDocumentFragment()),d.append(n),n.addEventListener("input",g),k(e,n,t)})),d&&t.append(d),l.forEach((e=>{b(e),e.remove()}))}(e),n("slot",{name:i}));export{I as H,h as a,f as c,p as d,m as f,E as i,d as r,u as s};
