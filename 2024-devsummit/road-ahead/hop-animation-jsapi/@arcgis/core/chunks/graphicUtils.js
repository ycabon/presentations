/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{g as n}from"./unitUtils.js";import{r as t,d as e,h as r}from"./mat4.js";import{c as i}from"./mat4f64.js";import{e as o,O as s}from"./vec3f64.js";import{s as a}from"./vec4.js";import{a as l,O as u}from"./vec4f64.js";import{projectPoint as m}from"../geometry/projection.js";import{w as c,m as f,o as h}from"./aaBoundingBox.js";import{c as p}from"./aaBoundingRect.js";import{r as y}from"../geometry/Polygon.js";import{e as g,d}from"./coordsUtils.js";import{m as x}from"./dehydratedPoint.js";import{i as j,c as v}from"./hydratedFeatures.js";function w(n,t){if("point"===n.type)return P(n,t,!1);if(j(n))switch(n.type){case"extent":return P(n.center,t,!1);case"polygon":return P(n.centroid,t,!1);case"polyline":return P(z(n),t,!0);case"mesh":return P(n.origin,t,!1)}else switch(n.type){case"extent":return P(function(n){return x(.5*(n.xmax+n.xmin),.5*(n.ymax+n.ymin),null!=n.zmin&&null!=n.zmax&&isFinite(n.zmin)&&isFinite(n.zmax)?.5*(n.zmax+n.zmin):void 0,n.spatialReference)}(n),t,!0);case"polygon":return P(function(n){const t=n.rings[0];if(!t||0===t.length)return null;const e=y(n.rings,!!n.hasZ);return x(e[0],e[1],e[2],n.spatialReference)}(n),t,!0);case"polyline":return P(z(n),t,!0)}}function z(n){const t=n.paths[0];if(!t||0===t.length)return null;const e=g(t,d(t)/2);return x(e[0],e[1],e[2],n.spatialReference)}function P(n,t,e){const r=e?n:v(n);return t&&n?m(n,r,t)?r:null:r}function R(n,t,e,r=0){if(n){t||(t=p());const i=n;let o=.5*i.width*(e-1),s=.5*i.height*(e-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),a(t,i.xmin-o-r,i.ymin-s-r,i.xmax+o+r,i.ymax+s+r),t}return null}function M(n,t,e=null){const r=l(u);return null!=n&&(r[0]=n[0],r[1]=n[1],r[2]=n[2]),null!=t?r[3]=t:null!=n&&n.length>3&&(r[3]=n[3]),e&&(r[0]*=e,r[1]*=e,r[2]*=e,r[3]*=e),r}function b(n,t,e,r,i,o=[0,0,0,0]){for(let t=0;t<3;++t)o[t]=null!=n?.[t]?n[t]:null!=e?.[t]?e[t]:i[t];return o[3]=null!=t?t:null!=r?r:i[3],o}function F(n=s,t,e,r=1){const i=new Array(3);if(null==t||null==e)i[0]=1,i[1]=1,i[2]=1;else{let r,o=0;for(let s=2;s>=0;s--){const a=n[s];let l;const u=null!=a,m=0===s&&!r&&!u,c=e[s];"symbol-value"===a||m?l=0!==c?t[s]/c:1:u&&"proportional"!==a&&isFinite(a)&&(l=0!==c?a/c:1),null!=l&&(i[s]=l,r=l,o=Math.max(o,Math.abs(l)))}for(let n=2;n>=0;n--)null==i[n]?i[n]=r:0===i[n]&&(i[n]=.001*o)}for(let n=2;n>=0;n--)i[n]/=r;return o(i)}function A(n){return B(null!=n.isPrimitive?[n.width,n.depth,n.height]:n)?null:"Symbol sizes may not be negative values"}function B(n){const t=n=>null==n||n>=0;return Array.isArray(n)?n.every(t):t(n)}function D(n,o,s,a=i()){return n&&t(a,a,-n/180*Math.PI),o&&e(a,a,o/180*Math.PI),s&&r(a,a,s/180*Math.PI),a}function I(t,e,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=n(e),o=c(t)*i,s=f(t)*i,a=h(t)*(e.isGeographic?1:i);return 0===o&&0===s&&0===a?r.minDemResolutionForPoints:.01*Math.max(o,s,a)}export{F as a,D as b,w as c,I as d,R as e,B as i,M as m,b as o,A as v};
