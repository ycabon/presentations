/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{formatNumber as t}from"../intl.js";const n=/^-?(\d+)(\.(\d+))?$/i;function e(t,n){return t-n}function r(t,n){let e,r;return e=Number(t.toFixed(n)),e<t?r=e+1/10**n:(r=e,e-=1/10**n),e=Number(e.toFixed(n)),r=Number(r.toFixed(n)),[e,r]}function o(t,n,e,r,o){const i=l(t,n,e,r),s=null==i.previous||i.previous<=o,u=null==i.next||i.next<=o;return s&&u||i.previous+i.next<=2*o}function i(t){const e=String(t),r=e.match(n);if(r&&r[1])return{integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(e.toLowerCase().includes("e")){const t=e.split("e"),n=t[0],r=t[1];if(n&&r){const t=Number(n);let e=Number(r);const o=e>0;o||(e=Math.abs(e));const l=i(t);return o?(l.integer+=e,e>l.fractional?l.fractional=0:l.fractional-=e):(l.fractional+=e,e>l.integer?l.integer=1:l.integer-=e),l}}return{integer:0,fractional:0}}function l(t,n,e,r){const o={previous:null,next:null};if(null!=e){const r=t-e,i=n-e-r;o.previous=Math.floor(Math.abs(100*i/r))}if(null!=r){const e=r-t,i=r-n-e;o.next=Math.floor(Math.abs(100*i/e))}return o}function s(t,n={}){const l=t.slice(0),{tolerance:s=2,strictBounds:u=!1,indexes:c=l.map(((t,n)=>n))}=n;c.sort(e);for(let t=0;t<c.length;t++){const n=c[t],e=l[n],a=0===n?null:l[n-1],f=n===l.length-1?null:l[n+1],g=i(e).fractional;if(g){let i,c=0,m=!1;for(;c<=g&&!m;){const n=r(e,c);i=u&&0===t?n[1]:n[0],m=o(e,i,a,f,s),c++}m&&(l[n]=i)}}return l}const u={maximumFractionDigits:20};function c(n){return t(n,u)}export{c as f,i as n,l as p,s as r};
