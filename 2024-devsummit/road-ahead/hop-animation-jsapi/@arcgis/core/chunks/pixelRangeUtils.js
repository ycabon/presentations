/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
const t={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function e(e){return t[e]??[-34028234663852886e22,34028234663852886e22]}function n(t,e){return null==t||null==e?"s32":t<0?t>=-128&&e<128?"s8":t>=-32768&&e<32768?"s16":"s32":e<256?"u8":e<65536?"u16":"u32"}function s(t){return(t?.startsWith("s")||t?.startsWith("u"))??!1}function u(t,n,s){if(t.depthCount&&t.depthCount>1)return;const{pixels:u,statistics:a,pixelType:i}=t,l=u[0].length,o=t.bandMasks??[],r=t.mask??new Uint8Array(l).fill(255),c="f32"===i||"f64"===i,f=e(i);let b=!1;for(let t=0;t<u.length;t++){const e="number"==typeof n?n:n[t];if(null==e)continue;const l=a?.[t]?.minValue??f[0],h=a?.[t]?.maxValue??f[1];if(l>e+Number.EPSILON||h<e-Number.EPSILON)continue;const m=o[t]||r.slice(),d=u[t],p=s?.customFloatTolerance;if(c&&0!==p){let t=p;t||(t=Math.abs(e)>=9999999e31?2e-7*Math.abs(e):"f32"===i?2**-23:Number.EPSILON);for(let n=0;n<d.length;n++)m[n]&&Math.abs(d[n]-e)<t&&(d[n]=0,m[n]=0,r[n]=0,b=!0)}else for(let t=0;t<d.length;t++)m[t]&&d[t]===e&&(d[t]=0,m[t]=0,r[t]=0,b=!0);o[t]=m}b&&(t.bandMasks=t.bandMasks||t.pixels.length>1?o:null,t.mask=r),b&&"updateStatistics"in t&&t.updateStatistics()}export{n as a,u as c,e as g,s as i};
