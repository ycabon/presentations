/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{r as n,c as l,d as C,e as E}from"./mathUtils.js";import{h as e,s as _,t as S,f as A,g as t,a9 as a,i as u,b as R,aa as r,W as P,a6 as s,M as O,N as L,O as M,Q as c}from"./unitUtils.js";import{e as N}from"./geodesicConstants.js";var o;!function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",n[n.WGS84=2]="WGS84",n[n.WEB_MERCATOR=3]="WEB_MERCATOR",n[n.WGS84_ECEF=4]="WGS84_ECEF",n[n.CGCS2000=5]="CGCS2000",n[n.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",n[n.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",n[n.GCSMARS2000=8]="GCSMARS2000",n[n.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",n[n.GCSMOON2000=10]="GCSMOON2000",n[n.LON_LAT=11]="LON_LAT",n[n.PLATE_CARREE=12]="PLATE_CARREE"}(o||(o={}));const i={[o.WGS84]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:d,[o.PLATE_CARREE]:K,[o.WGS84]:f,[o.WGS84_ECEF]:D},[o.CGCS2000]:{[o.CGCS2000]:f,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:K,[o.WGS84]:null,[o.WGS84_ECEF]:D},[o.GCSMARS2000]:{[o.CGCS2000]:null,[o.GCSMARS2000]:f,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:j,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.GCSMOON2000]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:f,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:g,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.WEB_MERCATOR]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:I,[o.WGS84_COMPARABLE_LON_LAT]:I,[o.SPHERICAL_ECEF]:H,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:f,[o.PLATE_CARREE]:m,[o.WGS84]:I,[o.WGS84_ECEF]:p},[o.WGS84_ECEF]:{[o.CGCS2000]:J,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:J,[o.WGS84_COMPARABLE_LON_LAT]:J,[o.SPHERICAL_ECEF]:V,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:X,[o.PLATE_CARREE]:function(n,l,C,E){J(n,l,C,E),K(C,E,C,E)},[o.WGS84]:J,[o.WGS84_ECEF]:f},[o.SPHERICAL_ECEF]:{[o.CGCS2000]:v,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:v,[o.WGS84_COMPARABLE_LON_LAT]:v,[o.SPHERICAL_ECEF]:f,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:z,[o.PLATE_CARREE]:function(n,l,C,E){v(n,l,C,E),K(C,E,C,E)},[o.WGS84]:v,[o.WGS84_ECEF]:Q},[o.SPHERICAL_MARS_PCPF]:{[o.CGCS2000]:null,[o.GCSMARS2000]:x,[o.GCSMOON2000]:null,[o.LON_LAT]:x,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:f,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.SPHERICAL_MOON_PCPF]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:y,[o.LON_LAT]:y,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:f,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.UNKNOWN]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:null,[o.WGS84_COMPARABLE_LON_LAT]:null,[o.SPHERICAL_ECEF]:null,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:f,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:null,[o.WGS84]:null,[o.WGS84_ECEF]:null},[o.LON_LAT]:{[o.CGCS2000]:f,[o.GCSMARS2000]:f,[o.GCSMOON2000]:f,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:j,[o.SPHERICAL_MOON_PCPF]:g,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:d,[o.PLATE_CARREE]:K,[o.WGS84]:f,[o.WGS84_ECEF]:D},[o.WGS84_COMPARABLE_LON_LAT]:{[o.CGCS2000]:null,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:f,[o.WGS84_COMPARABLE_LON_LAT]:f,[o.SPHERICAL_ECEF]:q,[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:null,[o.PLATE_CARREE]:K,[o.WGS84]:f,[o.WGS84_ECEF]:D},[o.PLATE_CARREE]:{[o.CGCS2000]:w,[o.GCSMARS2000]:null,[o.GCSMOON2000]:null,[o.LON_LAT]:w,[o.WGS84_COMPARABLE_LON_LAT]:w,[o.SPHERICAL_ECEF]:function(n,l,C,E){w(n,l,C,E),q(C,E,C,E)},[o.SPHERICAL_MARS_PCPF]:null,[o.SPHERICAL_MOON_PCPF]:null,[o.UNKNOWN]:null,[o.WEB_MERCATOR]:function(n,l,C,E){w(n,l,C,E),d(C,E,C,E)},[o.PLATE_CARREE]:f,[o.WGS84]:w,[o.WGS84_ECEF]:function(n,l,C,E){w(n,l,C,E),D(C,E,C,E)}}};function G(n){const l=F(n,$);return i[l][o.WGS84_COMPARABLE_LON_LAT]}function W(n,l,C=Z()){return null==n||null==l?null:Y(n,l,C).projector}function T(n,l){switch(W(n,l,ln)){case f:return"copy3";case q:return"wgs84ToSphericalECEF";case d:return"wgs84ToWebMercator";case K:return"wgs84ToPlateCarree";case D:return"wgs84ToWGS84ECEF";case I:return"webMercatorToWGS84";case H:return"webMercatorToSphericalECEF";case p:return"webMercatorToWGS84ECEF";case m:return"webMercatorToPlateCarree";case J:return"wgs84ECEFToWGS84";case V:return"wgs84ECEFToSphericalECEF";case X:return"wgs84ECEFToWebMercator";case v:return"sphericalECEFToWGS84";case z:return"sphericalECEFToWebMercator";case x:return"sphericalMarsPCPFToMars2000";case y:return"sphericalMoonPCPFToMoon2000";case Q:return"sphericalECEFToWGS84ECEF";case j:return"mars2000ToSphericalPCPF";case g:return"moon2000ToSphericalPCPF";default:return null}}function F(n,l){return n?l.spatialReference===n?l.spatialReferenceId:(l.spatialReference=n,"metersPerUnit"in l&&(l.metersPerUnit=t(n,1)),a(n)?l.spatialReferenceId=o.SPHERICAL_ECEF:u(n)?l.spatialReferenceId=o.WGS84:R(n)?l.spatialReferenceId=o.WEB_MERCATOR:r(n)?l.spatialReferenceId=o.PLATE_CARREE:n.wkt===P.wkt?l.spatialReferenceId=o.WGS84_ECEF:n.wkid===s.CGCS2000?l.spatialReferenceId=o.CGCS2000:n.wkt===O.wkt?l.spatialReferenceId=o.SPHERICAL_MARS_PCPF:n.wkt===L.wkt?l.spatialReferenceId=o.SPHERICAL_MOON_PCPF:M(n)?l.spatialReferenceId=o.GCSMARS2000:c(n)?l.spatialReferenceId=o.GCSMOON2000:l.spatialReferenceId=o.UNKNOWN):o.UNKNOWN}function f(n,l,C,E){n!==C&&(C[E++]=n[l++],C[E++]=n[l++],C[E]=n[l])}function I(n,l,C,E){C[E++]=En*(n[l++]/e.radius),C[E++]=En*(Math.PI/2-2*Math.atan(Math.exp(-n[l++]/e.radius))),C[E]=n[l]}function H(n,l,C,E){I(n,l,C,E),q(C,E,C,E)}function p(n,l,C,E){I(n,l,C,E),D(C,E,C,E)}function h(n,C,E,e,_){const S=.4999999*Math.PI,A=l(Cn*n[C+1],-S,S),t=Math.sin(A);E[e++]=Cn*n[C]*_.radius,E[e++]=_.halfSemiMajorAxis*Math.log((1+t)/(1-t)),E[e]=n[C+2]}function d(n,l,C,E){h(n,l,C,E,e)}const B=e.radius*Math.PI/180,U=180/(e.radius*Math.PI);function K(n,l,C,E){C[E]=n[l]*B,C[E+1]=n[l+1]*B,C[E+2]=n[l+2]}function w(n,l,C,E){C[E]=n[l]*U,C[E+1]=n[l+1]*U,C[E+2]=n[l+2]}function m(n,l,C,E){I(n,l,C,E),K(C,E,C,E)}function b(n,l,C,E,e){const _=e+n[l+2],S=Cn*n[l+1],A=Cn*n[l],t=Math.cos(S);C[E++]=Math.cos(A)*t*_,C[E++]=Math.sin(A)*t*_,C[E]=Math.sin(S)*_}function g(n,l,C,E){b(n,l,C,E,_.radius)}function j(n,l,C,E){b(n,l,C,E,S.radius)}function q(n,l,C,E){b(n,l,C,E,e.radius)}function k(n,l,C,e,_){const S=n[l],A=n[l+1],t=n[l+2],a=Math.sqrt(S*S+A*A+t*t),u=E(t/(0===a?1:a)),R=Math.atan2(A,S);C[e++]=En*R,C[e++]=En*u,C[e]=a-_}function y(n,l,C,E){k(n,l,C,E,_.radius)}function x(n,l,C,E){k(n,l,C,E,S.radius)}function v(n,l,C,E){k(n,l,C,E,e.radius)}function z(n,l,C,E){v(n,l,C,E),d(C,E,C,E)}function Q(n,l,C,E){v(n,l,C,E),D(C,E,C,E)}function D(n,l,C,E){!function(n,l,C,E,e){const _=Cn*n[l],S=Cn*n[l+1],A=n[l+2],t=Math.sin(S),a=Math.cos(S),u=e.radius/Math.sqrt(1-e.eccentricitySquared*t*t);C[E++]=(u+A)*a*Math.cos(_),C[E++]=(u+A)*a*Math.sin(_),C[E++]=(u*(1-e.eccentricitySquared)+A)*t}(n,l,C,E,e)}function J(n,l,C,E){const _=N,S=n[l],A=n[l+1],t=n[l+2];let a,u,R,r,P,s,O,L,M,c,o,i,G,W,T,F,f,I,H,p,h;a=Math.abs(t),u=S*S+A*A,R=Math.sqrt(u),r=u+t*t,P=Math.sqrt(r),p=Math.atan2(A,S),s=t*t/r,O=u/r,W=_.a2/P,T=_.a3-_.a4/P,O>.3?(L=a/P*(1+O*(_.a1+W+s*T)/P),H=Math.asin(L),c=L*L,M=Math.sqrt(1-c)):(M=R/P*(1-s*(_.a5-W-O*T)/P),H=Math.acos(M),c=1-M*M,L=Math.sqrt(c)),o=1-e.eccentricitySquared*c,i=e.radius/Math.sqrt(o),G=_.a6*i,W=R-i*M,T=a-G*L,f=M*W+L*T,F=M*T-L*W,I=F/(G/o+f),H+=I,h=f+F*I/2,t<0&&(H=-H),C[E++]=En*p,C[E++]=En*H,C[E]=h}function V(n,l,C,E){J(n,l,C,E),q(C,E,C,E)}function X(n,l,C,E){J(n,l,C,E),d(C,E,C,E)}function Y(n,l,C){if(null==n||null==l||C.source.spatialReference===n&&C.dest.spatialReference===l)return C;const E=F(n,C.source),e=F(l,C.dest);return E===o.UNKNOWN&&e===o.UNKNOWN?A(n,l)?C.projector=f:C.projector=null:C.projector=i[E][e],C}function Z(){return{source:{spatialReference:null,spatialReferenceId:o.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:o.UNKNOWN,metersPerUnit:1},projector:f}}const $={spatialReference:null,spatialReferenceId:o.UNKNOWN},nn={spatialReference:null,spatialReferenceId:o.UNKNOWN},ln=Z(),Cn=C(1),En=n(1);function en(n,l,C,E,e,_,S=1){const A=W(l,e,ln);if(null==A)return!1;if(A===f){if(n===E&&C===_)return!0;const l=C+3*S;for(let e=C,S=_;e<l;e++,S++)E[S]=n[e];return!0}const t=C+3*S;for(let l=C,e=_;l<t;l+=3,e+=3)A(n,l,E,e);return!0}const _n=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:en},Symbol.toStringTag,{value:"Module"}));export{o as P,W as a,ln as b,F as c,nn as d,i as e,Z as f,G as g,Y as h,U as i,f as j,k,h as l,T as m,_n as n,en as p,$ as s,d as w};
