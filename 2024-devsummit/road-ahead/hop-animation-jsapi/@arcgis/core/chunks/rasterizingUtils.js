/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{p as o}from"./floatRGBA.js";import{j as t}from"./mathUtils.js";import{d as a}from"./constants.js";function r(o,a,r){const e=a.style,s=t(Math.ceil(r)),i=(o=>"vertical"===o||"horizontal"===o||"cross"===o||"esriSFSCross"===o||"esriSFSVertical"===o||"esriSFSHorizontal"===o)(e)?8*s:16*s,n=2*s;o.width=i,o.height=i;const l=o.getContext("2d");l.strokeStyle="#FFFFFF",l.lineWidth=s,l.beginPath(),"vertical"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSVertical"!==e||(l.moveTo(i/2,-n),l.lineTo(i/2,i+n)),"horizontal"!==e&&"cross"!==e&&"esriSFSCross"!==e&&"esriSFSHorizontal"!==e||(l.moveTo(-n,i/2),l.lineTo(i+n,i/2)),"backward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSDiagonalCross"!==e&&"esriSFSBackwardDiagonal"!==e||(l.moveTo(-n,-n),l.lineTo(i+n,i+n),l.moveTo(i-n,-n),l.lineTo(i+n,n),l.moveTo(-n,i-n),l.lineTo(n,i+n)),"forward-diagonal"!==e&&"diagonal-cross"!==e&&"esriSFSForwardDiagonal"!==e&&"esriSFSDiagonalCross"!==e||(l.moveTo(i+n,-n),l.lineTo(-n,i+n),l.moveTo(n,-n),l.lineTo(-n,n),l.moveTo(i+n,i-n),l.lineTo(i-n,i+n)),l.stroke();const h=l.getImageData(0,0,o.width,o.height),c=new Uint8Array(h.data);let m;for(let o=0;o<c.length;o+=4)m=c[o+3]/255,c[o]=c[o]*m,c[o+1]=c[o+1]*m,c[o+2]=c[o+2]*m;return[c,o.width,o.height,s]}function e(t,r){const e="Butt"===r,s="Square"===r,i=!e&&!s;t.length%2==1&&(t=[...t,...t]);const n=a,l=2*n;let h=0;for(const o of t)h+=o;const c=Math.round(h*n),m=new Float32Array(c*l),S=.5*n;let F=0,g=0,d=.5,T=!0;for(const o of t){for(F=g,g+=o*n;d<=g;){let o=.5;for(;o<l;){const t=(o-.5)*c+d-.5,a=i?(o-n)*(o-n):Math.abs(o-n);m[t]=T?e?Math.max(Math.max(F+S-d,a),Math.max(d-g+S,a)):a:i?Math.min((d-F)*(d-F)+a,(d-g)*(d-g)+a):s?Math.min(Math.max(d-F,a),Math.max(g-d,a)):Math.min(Math.max(d-F+S,a),Math.max(g+S-d,a)),o++}d++}T=!T}const f=m.length,M=new Uint8Array(4*f);for(let t=0;t<f;++t){const a=(i?Math.sqrt(m[t]):m[t])/n;o(a,M,4*t)}return[M,c,l]}export{r as a,e as r};
