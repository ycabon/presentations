/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{b as t,d as n}from"./coordsUtils.js";import{d as e}from"./extentUtils.js";function o(n,e=!1){let o=[];if(e){for(const t of n)if(t.geometry){const n=t.geometry;o.push.apply(o,n.points)}}else o=n.map((t=>t.geometry));const s=[],i=[];let l=1/0,a=-1/0,r=0,c=0,f=0,u=0;for(const n of o){if(!n)continue;e?(s[0]=n[0],s[1]=n[1]):(s[0]=n.x,s[1]=n.y);let m=1/0,g=-1/0;for(const r of o){if(r===n)continue;if(!r)continue;e?(i[0]=r[0],i[1]=r[1]):(i[0]=r.x,i[1]=r.y);const o=t(s,i);o>0&&(o<m&&(m=o),o<l&&(l=o),o>g&&(g=o),o>a&&(a=o))}m!==1/0&&(++f,r+=m),g!==-1/0&&(++u,c+=g)}return{minDistance:l!==1/0?l:null,maxDistance:a!==-1/0?a:null,avgMinDistance:f?r/f:null,avgMaxDistance:u?c/u:null}}function s(t){const{features:s}=t;let i=null;switch(t.geometryType){case"point":i=o(s);break;case"multipoint":i=o(s,!0);break;case"polyline":i=function(t){let e=0,o=0,s=1/0,i=-1/0;for(const l of t){const t=l.geometry;if(t){let l=0;for(const e of t.paths){const t=n(e);t>0&&(l+=t)}l>0&&(++e,o+=l,l<s&&(s=l),l>i&&(i=l))}}return{minLength:s!==1/0?s:null,maxLength:i!==-1/0?i:null,avgLength:e?o/e:null}}(s);break;case"polygon":i=function(t){let n=0,o=0,s=1/0,i=-1/0;for(const l of t){const t=l.geometry;if(t){const l=e(t);if(l){const t=Math.abs(l.xmax-l.xmin),e=Math.abs(l.ymax-l.ymin),a=Math.sqrt(t*e);a>0&&(++n,o+=a,a<s&&(s=a),a>i&&(i=a))}}}return{minSize:s!==1/0?s:null,maxSize:i!==-1/0?i:null,avgSize:n?o/n:null}}(s)}return Promise.resolve(i)}export{s};
