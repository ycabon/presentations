/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{clone as e}from"../core/lang.js";import{h as s,l as t,m as a}from"./utils2.js";class n{constructor(e){const{name:t,label:a,description:n,schemes:o}=e;this.name=t,this.label=a,this.description=n,this.schemes=o;const r=e.basemapGroups||s;let m=[];r&&Object.keys(r).forEach((e=>{m=m.concat(r[e])})),this.supportedBasemaps=m,this.basemapGroups=r}isBasemapSupported(e){const s=t(e,this.supportedBasemaps);return!(!s||!this.supportedBasemaps.includes(s))}getRawSchemes(s){const{basemapId:n,basemapTheme:o}=function(e,s,n){let o=null,r=null;if(s&&(o=t(s,e,!1),o)){const e=a(o);null!=e&&(r=e)}return!o&&n&&(o="dark"===n?"dark-gray":"gray",r=n),o||r||(o="gray",r="light"),{basemapId:o,basemapTheme:r}}(this.supportedBasemaps,s.basemap,s.basemapTheme);let r=o;if(n){const e=a(n,this.basemapGroups);null!=e&&(r=e)}let m=s.geometryType;"multipoint"===m?m="point":"mesh"===m&&(m="polygon");const p=this.schemes[m]||this.schemes.default;return{schemesInfo:e(p[r]),basemapId:n,basemapTheme:o}}}function o(e){const s=e.themeDictionary,t=new Map;for(const e in s){const a=s[e];t.set(e,new n(a))}return t}function r(e,s){const t=[];return e.forEach((e=>{e.isBasemapSupported(s)&&t.push({name:e.name,label:e.label,description:e.description,basemaps:[...e.supportedBasemaps]})})),t}function m(e,s){if(!e)return;if(!s)return;let t=null;const a=[s.primaryScheme,...s.secondarySchemes];for(const s of a)if(s.name?.toLowerCase()===e.toLowerCase()){t=s;break}return t}function p(e,s,t){if(!e&&!s)return[];if(!t)return[];const a=!e?.length,n=!s?.length,o=[t.primaryScheme,...t.secondarySchemes],r=[];for(const t of o){const o=!!a||e.some((e=>t.tags.includes(e))),m=!n&&s.some((e=>t.tags.includes(e)));o&&!m&&r.push(t)}return r}function c(e){const s=e.theme;if(s)return s.getRawSchemes({basemap:e.basemap,geometryType:e.geometryType,basemapTheme:e.basemapTheme})}export{c as a,p as b,o as c,m as f,r as g};
