/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import"../symbols.js";import e,{L as n}from"../layers/support/LabelClass.js";import o from"../renderers/support/UniqueValueInfo.js";import{g as t}from"./clusterUtils2.js";import a from"../symbols/TextSymbol.js";function l(e,n){const o=n.featureReduction;if("fields"in o)for(const n of o.fields)if(n.name.toLowerCase()===e.toLowerCase())return n;return null}function r(e){return`\n  $feature["${e}"];\n  var value = $feature["${e}"];\n  var num = Count(Text(Round(value)));\n  var label = When(\n    num < 4, Text(value, "#.#"),\n    num == 4, Text(value / Pow(10, 3), "#.0k"),\n    num <= 6, Text(value / Pow(10, 3), "#k"),\n    num == 7, Text(value / Pow(10, 6), "#.0m"),\n    num > 7, Text(value / Pow(10, 6), "#m"),\n    Text(value, "#,###")\n  );\n  return label;\n  `}function u(e,n,a,l){const u=a.name;if("mode"===a.statisticType){const r="getFieldDomain"in e?e.getFieldDomain(a.onStatisticField):null;let s=null;return"coded-value"===r?.type?s=r.codedValues.map((e=>new o({value:e.code,label:e.name}))):"unique-value"===n?.type&&"string"==typeof n.field&&n.field.toLowerCase()===u.toLowerCase()&&(s=(n.uniqueValueInfos??[]).map((e=>e.clone()))),s?t(s,u,l):`Text($feature["${u}"])`}return r(u)}function s(o,t=!1){const l=new a({haloColor:"#373837",haloSize:"1px",color:"#f0f0f0",font:{family:"Noto Sans",size:"12px",weight:"bold"}});return new e({symbol:l,deconflictionStrategy:"none",labelPlacement:t?"always-horizontal":"center-center",labelExpressionInfo:new n({expression:o})})}export{s as a,r as b,u as c,l as g};
