/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import{clone as s}from"../core/lang.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import"../chunks/Logger.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import{w as i}from"../chunks/writer.js";import o from"./Extent.js";import n from"./Geometry.js";import a from"./Point.js";import h from"./SpatialReference.js";import{g as p}from"../chunks/extentUtils.js";import{u as c}from"../chunks/zmUtils.js";import"../chunks/ensureType.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/metadata.js";import"../core/Error.js";import"../config.js";import"../chunks/tracking.js";import"../chunks/unitUtils.js";import"../chunks/jsonMap.js";import"../chunks/assets.js";import"../request.js";import"../kernel.js";import"../core/urlUtils.js";import"../core/JSONSupport.js";import"../core/Accessor.js";import"../core/Handles.js";import"../chunks/maybe.js";import"../chunks/ObservableBase.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"./support/webMercatorUtils.js";import"../chunks/reader.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/aaBoundingRect.js";import"../chunks/mathUtils.js";import"../chunks/vec3.js";import"../chunks/vec3f64.js";import"../chunks/common.js";var l;let u=l=class extends n{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,s){let e,r,i=null,o=null;return t&&!Array.isArray(t)?(i=t.paths??null,s||(t.spatialReference?s=t.spatialReference:t.paths||(s=t)),e=t.hasZ,r=t.hasM):i=t,i=i||[],s=s||h.WGS84,i.length&&null!=i[0]?.[0]&&"number"==typeof i[0][0]&&(i=[i]),o=i[0]?.[0],o&&(void 0===e&&void 0===r?(e=o.length>2,r=!1):void 0===e?e=!r&&o.length>3:void 0===r&&(r=!e&&o.length>3)),{paths:i,spatialReference:s,hasZ:e,hasM:r}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,s=p(this);if(!s)return null;const e=new o(s);return e.spatialReference=t,e}writePaths(t,e){e.paths=s(this.paths)}addPath(t){if(!t)return;const s=this.paths,e=s.length;if(function(t){return!Array.isArray(t[0])}(t)){const r=[];for(let s=0,e=t.length;s<e;s++)r[s]=t[s].toArray();s[e]=r}else s[e]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new l;return t.spatialReference=this.spatialReference,t.paths=s(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,s){if(!this._validateInputs(t,s))return null;const e=this.paths[t][s],r=this.hasZ,i=this.hasM;return r&&!i?new a(e[0],e[1],e[2],void 0,this.spatialReference):i&&!r?new a(e[0],e[1],void 0,e[2],this.spatialReference):r&&i?new a(e[0],e[1],e[2],e[3],this.spatialReference):new a(e[0],e[1],this.spatialReference)}insertPoint(t,s,e){return this._validateInputs(t,s,!0)?(c(this,e),Array.isArray(e)||(e=e.toArray()),this.paths[t].splice(s,0,e),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const s=this.paths.splice(t,1)[0],e=this.spatialReference,r=s.map((t=>new a(t,e)));return this.notifyChange("paths"),r}removePoint(t,s){if(!this._validateInputs(t,s))return null;const e=new a(this.paths[t].splice(s,1)[0],this.spatialReference);return this.notifyChange("paths"),e}setPoint(t,s,e){return this._validateInputs(t,s)?(c(this,e),Array.isArray(e)||(e=e.toArray()),this.paths[t][s]=e,this.notifyChange("paths"),this):this}_validateInputs(t,s,e=!1){if(null==t||t<0||t>=this.paths.length)return!1;if(null!=s){const r=this.paths[t];if(e&&(s<0||s>r.length))return!1;if(!e&&(s<0||s>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};t([e({readOnly:!0})],u.prototype,"cache",null),t([e({readOnly:!0})],u.prototype,"extent",null),t([e({type:[[[Number]]],json:{write:{isRequired:!0}}})],u.prototype,"paths",void 0),t([i("paths")],u.prototype,"writePaths",null),u=l=t([r("esri.geometry.Polyline")],u),u.prototype.toJSON.isDefaultToJSON=!0;const m=u;export{m as default};
