/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{f as t}from"./chunks/date.js";export{c as convertDateFormatToIntlOptions,d as formatDateOnly,b as formatTimeOnly,a as formatTimestamp}from"./chunks/date.js";import{b as e,g as r}from"./chunks/locale.js";export{o as onLocaleChange,p as prefersRTL,s as setLocale}from"./chunks/locale.js";import{r as n,L as i}from"./chunks/Logger.js";import{g as u}from"./config.js";import{n as m,r as l}from"./chunks/messages.js";export{f as fetchMessageBundle}from"./chunks/messages.js";import h from"./request.js";import j from"./core/Error.js";import{g}from"./chunks/assets.js";import"./chunks/jsonMap.js";import"./chunks/timeZoneUtils.js";import"./chunks/datetime.js";import"./chunks/handleUtils.js";import"./core/lang.js";import"./core/promiseUtils.js";import"./chunks/maybe.js";import"./kernel.js";import"./core/urlUtils.js";import"./core/JSONSupport.js";import"./chunks/tslib.es6.js";import"./core/Accessor.js";import"./core/Handles.js";import"./core/accessorSupport/decorators/subclass.js";import"./chunks/metadata.js";import"./chunks/utils.js";import"./chunks/tracking.js";import"./chunks/ensureType.js";import"./core/accessorSupport/decorators/property.js";import"./chunks/ObservableBase.js";import"./core/scheduling.js";const w={ar:"ar-u-nu-latn"};let k=new WeakMap,y={};function $(t={}){const e={};return null!=t.digitSeparator&&(e.useGrouping=t.digitSeparator),null!=t.places&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function L(t,e){return Object.is(t,-0)&&(t=0),function(t){const e=t||y;if(!k.has(e)){const s=r(),n=w[r()]||s;k.set(e,new Intl.NumberFormat(n,t))}return k.get(e)}(e).format(t)}e((()=>{k=new WeakMap,y={}}));const U=()=>i.getLogger("esri.intl.substitute");function x(e,r,s={}){const{format:o={}}=s;return n(e,(e=>function(e,r,s){let n,o;const i=e.indexOf(":");if(-1===i?n=e.trim():(n=e.slice(0,i).trim(),o=e.slice(i+1).trim()),!n)return"";const a=u(n,r);if(null==a)return"";const c=(o?s?.[o]:null)??s?.[n];return c?function(e,r){switch(r.type){case"date":return t(e,r.intlOptions);case"number":return L(e,r.intlOptions);default:return U().warn("missing format descriptor for key {key}"),O(e)}}(a,c):o?function(e,r){switch(r.toLowerCase()){case"dateformat":return t(e);case"numberformat":return L(e);default:return U().warn(`inline format is unsupported since 4.12: ${r}`),/^(dateformat|datestring)/i.test(r)?t(e):/^numberformat/i.test(r)?L(e):O(e)}}(a,o):O(a)}(e,r,o)))}function O(e){switch(typeof e){case"string":return e;case"number":return L(e);case"boolean":return""+e;default:return e instanceof Date?t(e):""}}async function B(t){if(null!=T.fetchBundleAsset)return T.fetchBundleAsset(t);const e=await h(t,{responseType:"text"});return JSON.parse(e.data)}class R{constructor({base:t="",pattern:e,location:r=new URL(window.location.href)}){let s;s="string"==typeof r?t=>new URL(t,new URL(r,window.location.href)).href:r instanceof URL?t=>new URL(t,r).href:r,this.pattern="string"==typeof e?new RegExp(`^${e}`):e,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,e){return async function(t,e,r,s){const n=e.exec(r);if(!n)throw new j("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${e}"`);const o=n[1]?`${n[1]}/`:"",i=n[2],a=m(s),c=`${o}${i}.json`,u=a?`${o}${i}_${a}.json`:c;let l;try{l=await B(t(u))}catch(e){if(u===c)throw new j("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:e});try{l=await B(t(c))}catch(t){throw new j("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:t})}}return l}(this.getAssetUrl,this.matcher,t,e)}}function S(t){return new R(t)}const T={};l(S({pattern:"esri/",location:g}));export{$ as convertNumberFormatToIntlOptions,S as createJSONLoader,t as formatDate,L as formatNumber,r as getLocale,m as normalizeMessageBundleLocale,l as registerMessageBundleLoader,x as substitute};
