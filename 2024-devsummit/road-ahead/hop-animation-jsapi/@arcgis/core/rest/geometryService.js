/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import e from"../request.js";import{p as t,a as r}from"../chunks/utils7.js";import"../geometry.js";import{X as o}from"../chunks/unitUtils.js";import{e as n}from"../chunks/utils8.js";import i from"../geometry/Polygon.js";import{fromJSON as a,getJsonType as m}from"../geometry/support/jsonUtils.js";export{c as cut,s as simplify}from"../chunks/simplify.js";import{J as N}from"../chunks/jsonMap.js";import f from"./support/GeneralizeParameters.js";import I from"./support/LengthsParameters.js";import T from"./support/OffsetParameters.js";export{p as project}from"../chunks/project.js";import u from"./support/RelationParameters.js";import _ from"./support/TrimExtendParameters.js";import l from"../geometry/Polyline.js";import"../config.js";import"../core/lang.js";import"../kernel.js";import"../core/urlUtils.js";import"../core/Error.js";import"../chunks/Logger.js";import"../core/JSONSupport.js";import"../chunks/tslib.es6.js";import"../core/Accessor.js";import"../core/Handles.js";import"../chunks/maybe.js";import"../core/accessorSupport/decorators/subclass.js";import"../chunks/metadata.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/tracking.js";import"../chunks/ensureType.js";import"../core/accessorSupport/decorators/property.js";import"../chunks/ObservableBase.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../geometry/Extent.js";import"../geometry/Geometry.js";import"../chunks/reader.js";import"../geometry/SpatialReference.js";import"../chunks/writer.js";import"../chunks/assets.js";import"../geometry/Point.js";import"../core/accessorSupport/decorators/cast.js";import"../geometry/support/webMercatorUtils.js";import"../geometry/Multipoint.js";import"../chunks/zmUtils.js";import"../chunks/typeUtils.js";import"../chunks/coordsUtils.js";import"../chunks/Axis.js";import"../chunks/extentUtils.js";import"../chunks/aaBoundingRect.js";import"../chunks/mathUtils.js";import"../chunks/vec3.js";import"../chunks/vec3f64.js";import"../chunks/common.js";import"./support/ProjectParameters.js";async function y(s,o,n){const i=t(s),a={...i.query,f:"json",...o.toJSON()},c=r(a,n);return e(i.path+"/areasAndLengths",c).then((e=>e.data))}async function g(s,a,c,m){const N=a[0].spatialReference,p=t(s),f={...p.query,f:"json",sr:o(N),polygons:JSON.stringify(n(a).geometries),polylines:JSON.stringify(n(c).geometries)},I=r(f,m);return e(p.path+"/autoComplete",I).then((({data:e})=>(e.geometries||[]).map((({rings:e})=>new i({spatialReference:N,rings:e})))))}async function S(s,o,n){const a=t(s),c={...a.query,f:"json",...o.toJSON()},m=o.outSpatialReference||o.geometries[0].spatialReference,N=r(c,n);return e(a.path+"/buffer",N).then((e=>(e.data.geometries||[]).map((({rings:e})=>new i({spatialReference:m,rings:e})))))}async function R(s,o,i){const c=o[0].spatialReference,m=t(s),N={...m.query,f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(n(o))},p=r(N,i);return e(m.path+"/convexHull",p).then((({data:e})=>a(e.geometry).set({spatialReference:c})))}async function U(s,o,n){const i=o.geometries?.[0].spatialReference,c=t(s),m={...c.query,f:"json",...o.toJSON()},N=r(m,n);return e(c.path+"/densify",N).then((({data:e})=>(e.geometries||[]).map((e=>a(e).set({spatialReference:i})))))}async function O(r,s,o,i){const c=s[0].spatialReference,N=t(r);let p={query:{...N.query,f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(n(s)),geometry:JSON.stringify({geometryType:m(o),geometry:o.toJSON()})}};return i&&(p={...i,...p}),e(N.path+"/difference",p).then((({data:e})=>(e.geometries||[]).map((e=>a(e).set({spatialReference:c})))))}async function E(s,o,n){const i=t(s),a={...i.query,f:"json",...o.toJSON()},c=r(a,n);return e(i.path+"/distance",c).then((({data:e})=>e&&e.distance))}const h=new N({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),d={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};async function A(s,n,i){const a={};null!=n.sr&&"object"==typeof n.sr?a.sr=o(n.sr):a.sr=n.sr,a.strings=JSON.stringify(n.strings);const c=n.conversionType||"mgrs";a.conversionType=h.toJSON(c),a.conversionMode=n.conversionMode;const m=t(s),N={...m.query,f:"json",...a},p=r(N,i);return e(m.path+"/fromGeoCoordinateString",p).then((({data:e})=>e.coordinates))}const j=new N({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});async function J(s,o,n){const i=(o=f.from(o)).toJSON(),c=function(e){const{geometries:t,deviationUnit:r,maxDeviation:s}=e.toJSON(),o={maxDeviation:s};return t&&t.length&&(o.geometries=JSON.stringify({geometryType:m(t[0]),geometries:t}),o.sr=JSON.stringify(t[0].spatialReference)),j.write(r,o,"deviationUnit"),o}(o),N=t(s),p={...N.query,f:"json",...c},I=i.geometries[0].spatialReference,T=r(p,n);return e(N.path+"/generalize",T).then((({data:e})=>(e.geometries||[]).map((e=>a(e).set({spatialReference:I})))))}async function M(s,o,i,c){const N=o[0].spatialReference,p=t(s),f={...p.query,f:"json",sr:JSON.stringify(N.toJSON()),geometries:JSON.stringify(n(o)),geometry:JSON.stringify({geometryType:m(i),geometry:i.toJSON()})},I=r(f,c);return e(p.path+"/intersect",I).then((({data:e})=>(e.geometries||[]).map((e=>a(e).set({spatialReference:N})))))}function D(s,n,i){const c=n.map((e=>e.toJSON())),m=n[0].spatialReference,N=t(s),p={...N.query,f:"json",sr:o(m),polygons:JSON.stringify(c)},f=r(p,i);return e(N.path+"/labelPoints",f).then((({data:e})=>(e.labelPoints||[]).map((e=>a(e).set({spatialReference:m})))))}const L=new N({preserveShape:"preserve-shape"});async function C(s,n,i){const a=function(e){const{polylines:t,lengthUnit:r,geodesic:s,calculationType:n}=e.toJSON(),i={};i.polylines=JSON.stringify(t);const a=e.polylines[0].spatialReference;return i.sr=o(a),r&&(i.lengthUnit=r),s&&(i.geodesic=s),n&&(i.calculationType=L.toJSON(n)),i}(n=I.from(n)),c=t(s),m={...c.query,f:"json",...a},N=r(m,i);return e(c.path+"/lengths",N).then((({data:e})=>e))}const k=new N({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),G=new N({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});async function q(s,o,n){const i=function(e){const{geometries:t,bevelRatio:r,offsetDistance:s,offsetHow:o,offsetUnit:n}=e.toJSON(),i={bevelRatio:r,offsetDistance:s};return t&&t.length&&(i.geometries=JSON.stringify({geometryType:m(t[0]),geometries:t}),i.sr=JSON.stringify(t[0].spatialReference)),o&&(i.offsetHow=k.toJSON(o)),n&&(i.offsetUnit=G.toJSON(n)),i}(o=T.from(o)),c=t(s),N={...c.query,f:"json",...i},p=o.geometries?.[0].spatialReference,f=r(N,n);return e(c.path+"/offset",f).then((({data:e})=>(e.geometries||[]).map((e=>a(e).set({spatialReference:p})))))}const v=new N({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});async function H(s,n,i){const a=function(e){const{geometries1:t,geometries2:r,relation:s,relationParameter:n}=e.toJSON(),i={};return t?.length&&(i.geometries1=JSON.stringify({geometryType:m(t[0]),geometries:t}),i.sr=o(t[0].spatialReference)),r&&r.length>0&&(i.geometries2=JSON.stringify({geometryType:m(r[0]),geometries:r})),s&&(i.relation=v.toJSON(s)),n&&(i.relationParam=n),i}(n=u.from(n)),c=t(s),N={...c.query,f:"json",...a},p=r(N,i);return e(c.path+"/relation",p).then((({data:e})=>e.relations))}async function Y(s,n,i,c){const N=n.spatialReference,p=t(s),f={...p.query,f:"json",sr:o(N),target:JSON.stringify({geometryType:m(n),geometry:n.toJSON()}),reshaper:JSON.stringify(i.toJSON())},I=r(f,c);return e(p.path+"/reshape",I).then((({data:e})=>a(e.geometry).set({spatialReference:N})))}async function w(s,n,i){const a={};null!=n.sr&&"object"==typeof n.sr?a.sr=o(n.sr):a.sr=n.sr,a.coordinates=JSON.stringify(n.coordinates);const c=n.conversionType||"mgrs";a.conversionType=h.toJSON(c),a.conversionMode=n.conversionMode,a.numOfDigits=n.numOfDigits,a.rounding=n.rounding,a.addSpaces=n.addSpaces;const m=t(s),N={...m.query,f:"json",...a},p=r(N,i);return e(m.path+"/toGeoCoordinateString",p).then((({data:e})=>e.strings))}const x=new N({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});async function b(s,o,n){const i=function(e){const{extendHow:t,polylines:r,trimExtendTo:s}=e.toJSON(),o={};return o.extendHow=x.toJSON(t),r?.length&&(o.polylines=JSON.stringify(r),o.sr=JSON.stringify(r[0].spatialReference)),s&&(o.trimExtendTo=JSON.stringify(s)),o}(o=_.from(o)),a=t(s),c={...a.query,f:"json",...i},m=o.sr,N=r(c,n);return e(a.path+"/trimExtend",N).then((({data:e})=>(e.geometries||[]).map((({paths:e})=>new l({spatialReference:m,paths:e})))))}async function B(s,o,i){const c=o[0].spatialReference,m=t(s),N={...m.query,f:"json",sr:JSON.stringify(c.toJSON()),geometries:JSON.stringify(n(o))},p=r(N,i);return e(m.path+"/union",p).then((({data:e})=>a(e.geometry).set({spatialReference:c})))}export{y as areasAndLengths,g as autoComplete,S as buffer,h as conversionTypeKebabDict,R as convexHull,U as densify,O as difference,E as distance,A as fromGeoCoordinateString,J as generalize,M as intersect,D as labelPoints,C as lengths,q as offset,H as relation,Y as reshape,w as toGeoCoordinateString,b as trimExtend,B as union,d as units};
