/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.29/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import s from"../core/Collection.js";import{r as e}from"../chunks/collectionUtils.js";import{L as r}from"../chunks/Logger.js";import{property as o}from"../core/accessorSupport/decorators/property.js";import"../core/lang.js";import{subclass as i}from"../core/accessorSupport/decorators/subclass.js";import"../core/Accessor.js";import"../core/Handles.js";import"../chunks/maybe.js";import"../chunks/metadata.js";import"../chunks/utils.js";import"../chunks/handleUtils.js";import"../chunks/ObservableBase.js";import"../chunks/tracking.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../core/Error.js";import"../config.js";import"../core/Evented.js";import"../chunks/ensureType.js";import"../chunks/shared.js";import"../chunks/SimpleObservable.js";function a(t,s,e){if(t)for(let r=0,o=t.length;r<o;r++){const o=t.at(r);if(o[s]===e)return o;if("group"===o?.type){const t=a(o.tables,s,e);if(t)return t}}}const n=n=>{let p=class extends n{constructor(...t){super(...t),this.tables=new s,this.addHandles([this.tables.on("after-add",(t=>{const s=t.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,"feature"!==s.type&&r.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)})),this.tables.on("after-remove",(t=>{t.item.parent=null}))])}destroy(){const t=this.tables.toArray();for(const s of t)s.destroy();this.tables.destroy()}set tables(t){this._set("tables",e(t,this._get("tables")))}findTableById(t){return a(this.tables,"id",t)}findTableByUid(t){return a(this.tables,"uid",t)}};return t([o()],p.prototype,"tables",null),p=t([i("esri.support.TablesMixin")],p),p};export{n as TablesMixin};
