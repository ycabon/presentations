// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(b,a){b.updateOrigins=function(h){h?.writtenProperties&&h.writtenProperties.forEach(({target:g,propName:p,newOrigin:r})=>{a.isMultiOriginJSONMixin(g)&&r&&g.originOf(p)!==r&&g.updateOrigin(p,r)})};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(b){b.isMultiOriginJSONMixin=function(a){return a&&
"getAtOrigin"in a&&"originOf"in a};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/jsonContext":function(){define(["exports","../../core/urlUtils","../Portal"],function(b,a,h){function g(p,r){return{origin:r,url:a.urlToObject(p.itemUrl),portal:p.portal||h.getDefault(),portalItem:p}}b.createForItemRead=function(p,r){return{...g(p,r),readResourcePaths:[]}};b.createForItemWrite=function(p,r,f){const d=a.urlToObject(p.itemUrl);return{...g(p,r),messages:[],writtenProperties:[],
blockedRelativeUrls:[],verifyItemRelativeUrls:d?{rootPath:d.path,writtenUrls:[]}:null,resources:f?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/MapFloorInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(b,a,h,g,p,r,f,d,l,n){a=class extends a.JSONSupport{constructor(m){super(m);this.siteLayer=this.facilityLayer=this.levelLayer=null}};b.__decorate([h.property({type:l,json:{write:!0}})],a.prototype,"levelLayer",void 0);b.__decorate([h.property({type:d,json:{write:!0}})],a.prototype,"facilityLayer",void 0);b.__decorate([h.property({type:n,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([f.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f){a=class extends a.JSONSupport{constructor(d){super(d);this.sublayerId=this.siteIdField=this.nameField=this.layerId=this.facilityIdField=null}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,
"siteIdField",void 0);b.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([f.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f){a=class extends a.JSONSupport{constructor(d){super(d);this.verticalOrderField=this.sublayerId=this.shortNameField=this.longNameField=this.levelNumberField=this.levelIdField=this.layerId=this.facilityIdField=null}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"facilityIdField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"levelIdField",
void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"levelNumberField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"longNameField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"shortNameField",void 0);b.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);b.__decorate([h.property({type:String,
json:{write:!0}})],a.prototype,"verticalOrderField",void 0);return a=b.__decorate([f.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,g,p,r,f){a=class extends a.JSONSupport{constructor(d){super(d);this.sublayerId=this.siteIdField=
this.nameField=this.layerId=null}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"layerId",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"nameField",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([h.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([f.subclass("esri.layers.support.SiteLayerInfo")],
a)})},"esri/support/tagSymbols":function(){define(["exports"],function(b){const a=Symbol("WebScene");b.WebSceneTag=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(b,a){b.createCopyError=function(){return new a("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};b.createSchemaValidationError=function(h){return new a("webscene:schema-validation",
"Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:h})};b.schemaValidationErrorName="webscene:schema-validation";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports","../../geometry/support/SupportedGCSWkids","../ViewingMode"],function(b,a,h){b.isSpatialReferenceSupported=function(g,p){return null==g?!1:null==p?!0:p===h.ViewingMode.Local?g.isGeographic?
g.isWGS84||g.wkid===a.SupportedGCSWkids.CGCS2000:!0:g.isWebMercator||g.isWGS84||g.wkid===a.SupportedGCSWkids.CGCS2000||g.wkid===a.SupportedGCSWkids.GCSMARS2000||g.wkid===a.SupportedGCSWkids.GCSMARS2000_SPHERE||g.wkid===a.SupportedGCSWkids.GCSMOON2000};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/resourceUtils":function(){define("require exports ../../core/Error ../../core/promiseUtils ../../core/uuid ../../portal/support/resourceUtils".split(" "),function(b,
a,h,g,p,r){async function f(l,n,m){if(n?.resources){var w=n.portalItem===l.portalItem?new Set(l.paths):new Set;l.paths.length=0;l.portalItem=n.portalItem;var D=new Set(n.resources.toKeep.map(B=>B.resource.path)),C=new Set,G=[];D.forEach(B=>{w.delete(B);l.paths.push(B)});var I=[],H=[],F=[];for(const B of n.resources.toUpdate)if(w.delete(B.resource.path),D.has(B.resource.path)||C.has(B.resource.path)){const {resource:L,content:X,finish:P}=B,R=r.getSiblingOfSameTypeI(L,p.generateUUID());l.paths.push(R.path);
I.push({resource:R,content:await r.contentToBlob(X),compress:B.compress});P&&F.push(()=>P(R))}else{l.paths.push(B.resource.path);H.push({resource:B.resource,content:await r.contentToBlob(B.content),compress:B.compress});const L=B.finish;L&&F.push(()=>L(B.resource));C.add(B.resource.path)}for(const B of n.resources.toAdd)if(l.paths.push(B.resource.path),w.has(B.resource.path))w.delete(B.resource.path);else{I.push({resource:B.resource,content:await r.contentToBlob(B.content),compress:B.compress});const L=
B.finish;L&&F.push(()=>L(B.resource))}if(I.length||H.length)({addOrUpdateResources:D}=await new Promise((B,L)=>b(["../../portal/support/resourceUtils"],B,L))),await D(n.portalItem,I,"add",m),await D(n.portalItem,H,"update",m);F.forEach(B=>B());if(0===G.length)return w;n=await g.allSettledErrors(G);g.throwIfAborted(m);if(0<n.length)throw new h("save:resources","Failed to save one or more resources",{errors:n});return w}}async function d(l,n,m){if(l&&n.portalItem){var w=[];for(const D of l)l=n.portalItem.resourceFromPath(D),
w.push(l.portalItem.removeResource(l,m));await g.eachAlways(w)}}a.saveResources=async function(l,n,m){l=await f(l,n,m);await d(l,n,m)};a.updateItemWithResources=async function(l,n,m,w,D){m=await f(m,w,D);await l.update({data:n});await d(m,w,D)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/resourceUtils":function(){define(["exports","../../request","../../core/Error","../../core/urlUtils"],function(b,a,h,g){function p(f){const d=f.lastIndexOf("/");return-1===
d?[".",f]:[f.slice(0,d),f.slice(d+1)]}function r(f){{const w=g.getPathExtension(f);f=null==w?[f,""]:[f.slice(0,f.length-w.length-1),`.${w}`]}const [d,l]=f,[n,m]=p(d);return[n,m,l]}b.addOrUpdateResources=async function(f,d,l,n){var m=new Map;for(const {resource:w,content:D,compress:C,access:G}of d){if(!w.hasPath())throw new h(`portal-item-resource-${l}:invalid-path`,"Resource does not have a valid path");const [I,H]=p(w.path);d=`${I}/${C??""}/${G??""}`;m.has(d)||m.set(d,{prefix:I,compress:C,access:G,
files:[]});m.get(d).files.push({fileName:H,content:D})}await f.load(n);l=g.join(f.userItemUrl,"add"===l?"addResources":"updateResources");for(const {prefix:w,compress:D,access:C,files:G}of m.values())for(m=0;m<G.length;m+=25){d=G.slice(m,m+25);const I=new FormData;w&&"."!==w&&I.append("resourcesPrefix",w);D&&I.append("compress","true");C&&I.append("access",C);let H=0;for(const {fileName:F,content:B}of d)I.append(`file${++H}`,B,F);I.append("f","json");await f.portal.request(l,{method:"post",body:I,
signal:n?.signal})}};b.contentToBlob=async function(f){return"blob"===f.type?f.blob:"json"===f.type?new Blob([f.jsonString],{type:"application/json"}):(await a(f.url,{responseType:"blob"})).data};b.fetchResources=async function(f,d={},l){await f.load(l);const n=g.join(f.itemUrl,"resources"),{start:m=1,num:w=10,sortOrder:D="asc",sortField:C="created"}=d;d=await f.portal.request(n,{query:{start:m,num:w,sortOrder:D,sortField:C,token:f.apiKey},signal:l?.signal});return{total:d.total,nextStart:d.nextStart,
resources:d.resources.map(({created:G,size:I,resource:H})=>({created:new Date(G),size:I,resource:f.resourceFromPath(H)}))}};b.getSiblingOfSameType=function(f,d){if(!f.hasPath())return null;const [l,,n]=r(f.path);return f.portalItem.resourceFromPath(g.join(l,d+n))};b.getSiblingOfSameTypeI=function(f,d){if(!f.hasPath())return null;const [l,,n]=r(f.path);return f.portalItem.resourceFromPath(g.join(l,d+n))};b.removeAllResources=async function(f,d){await f.load(d);const l=g.join(f.userItemUrl,"removeResources");
return f.portal.request(l,{method:"post",query:{deleteAll:!0},signal:d?.signal})};b.removeResource=async function(f,d,l){if(!d.hasPath())throw new h("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await f.load(l);const n=g.join(f.userItemUrl,"removeResources");await f.portal.request(n,{method:"post",query:{resource:d.path},signal:l?.signal});d.portalItem=null};b.splitPrefixFileNameAndExtension=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/saveAPIKeyUtils":function(){define(["exports",
"../../config","../../core/Error","../../support/apiKeyUtils"],function(b,a,h,g){b.validateSaveAPIKey=function(p){if(a.apiKey&&g.supportsApiKey(p.portal.url))throw new h("save-api-key-utils:api-key-not-supported",`Saving is not supported on ${p.portal.url} when using an api key`);};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/saveUtils":function(){define(["exports","../../core/Error"],function(b,a){const h=new Set(["layer:unsupported","property:unsupported",
"symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);b.beforeSave=async function(g){const p=[];for(const r of g.allLayers)"beforeSave"in r&&"function"===typeof r.beforeSave&&(g=r.beforeSave())&&p.push(g);await Promise.allSettled(p)};b.evaluateWriteErrors=function(g,p,r){let f=(g.messages??[]).filter(({type:d})=>"error"===d).map(({name:d,message:l,details:n})=>new a(d,l,n));g.blockedRelativeUrls&&(f=f.concat(g.blockedRelativeUrls.map(d=>new a("url:unsupported",`Relative url '${d}' is not supported`))));
if(r){const {ignoreUnsupported:d,supplementalUnsupportedErrors:l=[],requiredPropertyChecksDisabled:n}=r;d&&(f=f.filter(({name:m})=>!(h.has(m)||l.includes(m))));n&&(f=f.filter(m=>"web-document-write:property-required"!==m.name))}if(0<f.length)throw new a(p.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:f});};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],
function(b){const a={width:600,height:400};b.getOptimalThumbnailSize=function(h,g){g=g||a;let {width:p,height:r}=g;g=p/r;1.5>g?r=p/1.5:1.5<g&&(p=1.5*r);p>h.width&&(r*=h.width/p,p=h.width);r>h.height&&(p*=h.height/r,r=h.height);return{width:Math.round(p),height:Math.round(r)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(b,a,h,g,p,r,f,d){var l;a=l=class extends a.JSONSupport{constructor(n){super(n);this.viewing=null}clone(){return new l({viewing:this.viewing?this.viewing.clone():null})}};b.__decorate([h.property({type:d,json:{write:!0}})],a.prototype,"viewing",void 0);return a=l=b.__decorate([f.subclass("esri.webscene.ApplicationProperties")],a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Search".split(" "),
function(b,a,h,g,p,r,f,d){var l;a=l=class extends a.JSONSupport{constructor(n){super(n);this.search=null}clone(){return new l(h.clone({search:this.search}))}};b.__decorate([g.property({type:d,json:{write:!0}})],a.prototype,"search",void 0);return a=l=b.__decorate([f.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(b,a,h,g,p,r,f,d,l,n,m,w,D){var C;const G=a.ofType(w),I=a.ofType(D);a=C=class extends h.JSONSupport{constructor(H){super(H);this.enabled=this.addressSearchEnabled=!0;this.hintText=null;this.layers=new G;this.tables=new I}readAddressSearchEnabled(H){return!H}writeAddressSearchEnabled(H,F,B){F[B]=!H}clone(){return new C(g.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};b.__decorate([p.property({type:Boolean,
nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([d.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([n.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([p.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,
write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([p.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([p.property({type:G,json:{write:{overridePolicy:m.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([p.property({type:I,json:{read:!0,write:{overridePolicy:m.writeNonEmptyCollectionPolicy}}})],a.prototype,"tables",void 0);return a=C=b.__decorate([l.subclass("esri.webdoc.applicationProperties.Search")],
a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(b){b.writeNonEmptyCollectionPolicy=function(a){return{enabled:!!a?.length}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(b,a,h,g,p,r,f){var d;a=d=class extends a.JSONSupport{constructor(l){super(l);this.subLayer=this.id=this.field=null}clone(){return new d(h.clone({field:this.field,id:this.id,subLayer:this.subLayer}))}};b.__decorate([g.property({type:f,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([g.property({type:p.Integer,json:{write:!0}})],a.prototype,"subLayer",void 0);return a=d=b.__decorate([r.subclass("esri.webdoc.applicationProperties.SearchLayer")],
a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(b,a,h,g,p,r,f,d,l){var n;a=n=class extends a.JSONSupport{constructor(m){super(m);this.exactMatch=!1;this.type=this.name=null}clone(){return new n({exactMatch:this.exactMatch,
type:this.type,name:this.name})}};b.__decorate([h.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([f.enumeration(l.kebabDict)],a.prototype,"type",void 0);return a=n=b.__decorate([d.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),
function(b,a,h,g,p,r,f,d){var l;a=l=class extends a.JSONSupport{constructor(n){super(n);this.id=this.field=null}clone(){return new l(h.clone({field:this.field,id:this.id}))}};b.__decorate([g.property({type:d,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=l=b.__decorate([f.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(b,a,h,g,p,r,f,d,l){var n;a=n=class extends a.JSONSupport{constructor(m){super(m);this.exactMatch=!1;this.type=this.name=null}clone(){return new n({exactMatch:this.exactMatch,type:this.type,name:this.name})}};b.__decorate([h.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([f.enumeration(l.kebabDict)],a.prototype,"type",void 0);return a=n=b.__decorate([d.subclass("esri.webdoc.applicationProperties.SearchTableField")],
a)})},"esri/webscene/Environment":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/subclass ../views/3d/environment/SunnyWeather ../views/3d/environment/weather ./lightingTypes ./SunLighting ./VirtualLighting ./background/utils".split(" "),function(b,a,h,g,p,r,f,d,l,n,m,w,D){var C;r=(G,I,H)=>({enabled:!H||!H.isPresentation});a=C=class extends a.JSONSupport{constructor(G){super(G);
this.lighting=new m;this.background=null;this.starsEnabled=this.atmosphereEnabled=!0}set weather(G){l.validateWeatherType(G?.type,g.getLogger(this))&&this._set("weather",G)}clone(){return new C(this.cloneConstructProperties())}cloneConstructProperties(){return{lighting:this.lighting&&"virtual"===this.lighting.type?w.prototype.clone.call(this.lighting):m.prototype.clone.call(this.lighting),background:h.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,starsEnabled:this.starsEnabled,weather:this.weather.clone()}}};
b.__decorate([p.property({types:n.lightingTypes,nonNullable:!0,json:{write:!0}})],a.prototype,"lighting",void 0);b.__decorate([p.property(D.backgroundProperty)],a.prototype,"background",void 0);b.__decorate([p.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:r}}})],a.prototype,"atmosphereEnabled",void 0);b.__decorate([p.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:r}}})],a.prototype,"starsEnabled",void 0);b.__decorate([p.property({types:l.weatherTypes,nonNullable:!0,
json:{write:!0},value:new d})],a.prototype,"weather",null);return a=C=b.__decorate([f.subclass("esri.webscene.Environment")],a)})},"esri/views/3d/environment/SunnyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,g,p,r,f,d){var l;
a=l=class extends a.JSONSupport{constructor(n){super(n);this.type="sunny";this.cloudCover=.5}clone(){return new l({cloudCover:this.cloudCover})}};b.__decorate([f.enumeration({sunny:"sunny"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);return a=l=b.__decorate([d.subclass("esri.views.3d.environment.SunnyWeather")],a)})},"esri/views/3d/environment/weather":function(){define("exports ./CloudyWeather ./FoggyWeather ./RainyWeather ./SnowyWeather ./SunnyWeather".split(" "),
function(b,a,h,g,p,r){a={key:"type",base:r,typeMap:{sunny:r,cloudy:a,rainy:g,snowy:p,foggy:h}};const f=Object.keys(a.typeMap);b.cloudsHeight=1E5;b.validateWeatherType=function(d,l){return f.includes(d)?!0:(l.error(`"${d}" is not a valid weather type`),!1)};b.weatherHeightLimit=1E4;b.weatherTypes=a;b.weatherTypesArray=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/environment/CloudyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f,d){var l;a=l=class extends a.JSONSupport{constructor(n){super(n);this.type="cloudy";this.cloudCover=.5}clone(){return new l({cloudCover:this.cloudCover})}};b.__decorate([f.enumeration({cloudy:"cloudy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);return a=l=b.__decorate([d.subclass("esri.views.3d.environment.CloudyWeather")],a)})},"esri/views/3d/environment/FoggyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f,d){var l;a=l=class extends a.JSONSupport{constructor(n){super(n);this.type="foggy";this.fogStrength=.5}clone(){return new l({fogStrength:this.fogStrength})}};b.__decorate([f.enumeration({foggy:"foggy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"fogStrength",void 0);return a=l=b.__decorate([d.subclass("esri.views.3d.environment.FoggyWeather")],a)})},"esri/views/3d/environment/RainyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f,d){var l;a=l=class extends a.JSONSupport{constructor(n){super(n);this.type="rainy";this.precipitation=this.cloudCover=.5}clone(){return new l({cloudCover:this.cloudCover,precipitation:this.precipitation})}};b.__decorate([f.enumeration({rainy:"rainy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},
json:{write:!0}})],a.prototype,"precipitation",void 0);return a=l=b.__decorate([d.subclass("esri.views.3d.environment.RainyWeather")],a)})},"esri/views/3d/environment/SnowyWeather":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,g,p,r,
f,d){var l;a=l=class extends a.JSONSupport{constructor(n){super(n);this.type="snowy";this.precipitation=this.cloudCover=.5;this.snowCover="disabled"}clone(){return new l({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};b.__decorate([f.enumeration({snowy:"snowy"})],a.prototype,"type",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],a.prototype,"cloudCover",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,
range:{min:0,max:1},json:{write:!0}})],a.prototype,"precipitation",void 0);b.__decorate([h.property({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],a.prototype,"snowCover",void 0);return a=l=b.__decorate([d.subclass("esri.views.3d.environment.SnowyWeather")],a)})},"esri/webscene/lightingTypes":function(){define(["exports","./SunLighting","./VirtualLighting"],function(b,a,h){b.lightingTypes={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:a,virtual:h}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/webscene/SunLighting":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer".split(" "),function(b,a,h,g,p,r,f,d,l){var n;a=n=class extends a.JSONSupport{constructor(m){super(m);this.type="sun";this.date=null;this.directShadowsEnabled=
!1;this.displayUTCOffset=null}readDate(m,w){return null!=w.datetime&&new Date(w.datetime)||null}writeDate(m,w,D){w[D]=m.getTime()}readDirectShadowsEnabled(m,w){return!!w.directShadows}writedirectShadowsEnabled(m,w,D){m&&(w[D]=m)}writeDisplayUTCOffset(m,w){null!=m&&(w.displayUTCOffset=m)}clone(){return new n(this.cloneConstructProperties())}cloneConstructProperties(){const m={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=
this.date&&(m.date=new Date(this.date.getTime()));return m}};b.__decorate([h.property({readOnly:!0,type:["sun"],json:{write:!0}})],a.prototype,"type",void 0);b.__decorate([h.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],a.prototype,"date",void 0);b.__decorate([f.reader("date",["datetime"])],a.prototype,"readDate",null);b.__decorate([l.writer("date")],a.prototype,"writeDate",null);b.__decorate([h.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],a.prototype,
"directShadowsEnabled",void 0);b.__decorate([f.reader("directShadowsEnabled",["directShadows"])],a.prototype,"readDirectShadowsEnabled",null);b.__decorate([l.writer("directShadowsEnabled")],a.prototype,"writedirectShadowsEnabled",null);b.__decorate([h.property({type:Number,json:{write:!0}})],a.prototype,"displayUTCOffset",void 0);b.__decorate([l.writer("displayUTCOffset")],a.prototype,"writeDisplayUTCOffset",null);return a=n=b.__decorate([d.subclass("esri.webscene.SunLighting")],a)})},"esri/webscene/VirtualLighting":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f){var d;a=d=class extends a.JSONSupport{constructor(l){super(l);this.type="virtual";this.directShadowsEnabled=!1}clone(){return new d(this.cloneConstructProperties())}cloneConstructProperties(){return{directShadowsEnabled:this.directShadowsEnabled}}};b.__decorate([h.property({readOnly:!0,type:["virtual"],json:{write:!0}})],a.prototype,"type",void 0);b.__decorate([h.property({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],a.prototype,"directShadowsEnabled",void 0);
return a=d=b.__decorate([f.subclass("esri.webscene.VirtualLighting")],a)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(b,a,h){a={base:a,key:"type",typeMap:{color:h}};a={types:a,json:{read:function(g){return(p,r,f)=>{if(!p)return p;for(const d in g.typeMap)if(p.type===d)return r=new g.typeMap[d],r.read(p,f),r}}(a),write:{overridePolicy:(g,p,r)=>({enabled:!r||!r.isPresentation})}}};b.backgroundProperty=a;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/webscene/background/Background":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,g,p,r,f){a=class extends a.JSONSupport{constructor(d){super(d)}clone(){}};b.__decorate([h.property({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0);return a=b.__decorate([f.subclass("esri.webscene.background.Background")],
a)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../symbols/support/materialUtils ./Background".split(" "),function(b,a,h,g,p,r,f,d,l,n){var m;g={...l.colorAndTransparencyProperty,nonNullable:!0};n=m=class extends n{constructor(w){super(w);this.type=
"color";this.color=new a([0,0,0,1])}clone(){return new m(this.cloneProperties())}cloneProperties(){return{color:this.color.clone()}}};b.__decorate([f.enumeration({color:"color"},{readOnly:!0})],n.prototype,"type",void 0);b.__decorate([h.property(g)],n.prototype,"color",void 0);return n=m=b.__decorate([d.subclass("esri.webscene.background.ColorBackground")],n)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/tslib.es6 ../Viewpoint ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ./Environment".split(" "),
function(b,a,h,g,p,r,f,d,l,n){var m;h=m=class extends h.JSONSupport{constructor(w){super(w);this.environment=new n;this.viewpoint=this.spatialReference=null}set viewingMode(w){this._set("viewingMode",w)}clone(){return new m({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})}};b.__decorate([g.property({type:n,json:{write:{isRequired:!0}}})],h.prototype,"environment",
void 0);b.__decorate([g.property({type:l})],h.prototype,"spatialReference",void 0);b.__decorate([g.property({type:["local","global"]})],h.prototype,"viewingMode",null);b.__decorate([g.property({type:a,json:{write:{isRequired:!0}}})],h.prototype,"viewpoint",void 0);return h=m=b.__decorate([d.subclass("esri.webscene.InitialViewProperties")],h)})},"esri/webscene/Presentation":function(){define("../chunks/tslib.es6 ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./Slide".split(" "),
function(b,a,h,g,p,r,f,d,l,n){const m=a.ofType(n);a=class extends g.JSONSupport{constructor(w){super(w);this.slides=new m}destroy(){this.slides.forEach(w=>w.destroy());this.slides.removeAll()}set slides(w){w&&=w.filter(D=>!!D.viewpoint);this._set("slides",h.referenceSetter(w,this._get("slides"),m))}clone(){return new this.constructor({slides:this.slides.clone()})}};b.__decorate([p.property({type:m,nonNullable:!0,json:{write:!0}}),r.cast(h.castForReferenceSetter)],a.prototype,"slides",null);return a=
b.__decorate([l.subclass("esri.webscene.Presentation")],a)})},"esri/webscene/Slide":function(){define("require ../chunks/tslib.es6 ../Basemap ../Viewpoint ../core/asyncUtils ../core/Collection ../core/collectionUtils ../core/JSONSupport ../core/Logger ../core/mathUtils ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../chunks/vec32 ../core/libs/gl-matrix-2/factories/vec3f64 ../layers/Layer ../support/basemapUtils ../views/support/Scheduler ../webdoc/support/SlideThumbnail ./SunLighting ./VirtualLighting ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(b,a,h,g,p,r,f,d,l,n,m,w,D,C,G,I,H,F,B,L,X,P,R,da,Y,ea,y,M,U,S,q,u){function x(k){if("building-scene"===k.type||"map-image"===k.type)return k.allSublayers.toArray()}function N(k){if(k=x(k))return k.filter(v=>v.visible).map(v=>v.id)}function V(k,v){k=v-k;43200<k&&(k-=86400);-43200>k&&(k+=86400);return k}let ma=0;const ja=r.ofType(q.SlideVisibleLayer);d=class extends d.JSONSupport{constructor(k){super(k);this.id=Date.now().toString(16)+"-slide-"+ma++;this.title=new u;this.description=new M;
this.hidden=!1;this.thumbnail=new Y.SlideThumbnail;this.ground=this.basemap=this.viewpoint=null;this.environment=new U.SlideEnvironment;this.visibleLayers=new ja}destroy(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail=m.destroyMaybe(this.thumbnail);this.thumbnail=this.title=this.description=null}castTitle(k){return"string"===typeof k?new u({text:k}):B.ensureType(u,k)}castDescription(k){return"string"===typeof k?new M({text:k}):B.ensureType(M,k)}castThumbnail(k){return"string"===
typeof k?new Y.SlideThumbnail({url:k}):B.ensureType(Y.SlideThumbnail,k)}castBasemap(k){return R.ensureType(k)}set visibleLayers(k){this._set("visibleLayers",f.referenceSetter(k,this._get("visibleLayers"),ja))}castVisibleLayers(k){return k&&"function"===typeof k.map?k.map(v=>{if("string"===typeof v)return{id:v};if(v instanceof P){const A=N(v);return{id:v.id,sublayerIds:A}}if(v.id)return{id:v.id,sublayerIds:"sublayerIds"in v?v.sublayerIds:void 0};l.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"');
return v}):null}clone(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap?.clone()||null,ground:this.ground?.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null,hidden:this.hidden})}async _updateVisibleLayersFrom(k){const v=[];await Promise.allSettled(this._getLayers(k.map).map(A=>
k.whenLayerView(A).then(K=>{if(K.visible){const O=N(A);v.push(new q.SlideVisibleLayer({id:K.layer.id,sublayerIds:O}))}})).toArray());this.visibleLayers.removeAll();this.visibleLayers.addMany(v)}updateFrom(k,v){const A={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...v?.screenshot};return k.when(()=>{this.viewpoint=k.viewpoint.clone();this.environment.lighting="virtual"===k.environment.lighting.type?y.prototype.clone.apply(k.environment.lighting):ea.prototype.clone.apply(k.environment.lighting);
this.environment.weather=k.environment.weather.clone();this.basemap=k.map.basemap&&k.map.basemap.clone()||null;this.ground=k.map.ground?S.fromGround(k.map.ground):null;return this._updateVisibleLayersFrom(k)}).then(()=>k.takeScreenshot(A)).then(K=>{this.thumbnail=new Y.SlideThumbnail({url:K.dataUrl});return this})}async applyTo(k,v){null!=this._applyToController&&this._applyToController.abort();let A=new AbortController;this._applyToController=A;const K=w.onAbortOrThrow(v,()=>A?.abort()),O=()=>{this._applyToController===
A&&(this._applyToController=null);A=null;K?.remove()};try{await D.whenOnce(()=>k.ready,A.signal)}catch(fa){throw O(),fa;}if(A.signal.aborted)throw O(),w.createAbortError();const T=k.resourceController.scheduler.registerTask(da.TaskPriority.SLIDE);let ha=!1;const W={animate:!0,...v,signal:this._applyToController.signal};v=await p.result(k.addUpdatingPromise((async()=>{await Promise.all([T.schedule(async()=>ha=await this._setViewpointOfInterest(k,W)),T.schedule(()=>this._applyBasemap(k,W),W.signal)]);
await this._loadLayersWithSublayerVisibility(k);await Promise.all([T.schedule(()=>this._applyLayerVisibility(k),W.signal),T.schedule(()=>this._applyGround(k),W.signal),T.schedule(()=>this._applyViewpoint(k,W),W.signal)]);await T.schedule(()=>k.environment.weather=this.environment.weather.clone())})()));ha&&(k.contentCamera=null);T.remove();O();if(!1===v.ok)throw v.error;return this}async _applyBasemap(k,v){if(this.basemap){try{await this.basemap.load(v)}catch(A){if(w.isAbortError(A))throw A;}k.map.basemap=
R.clonePreservingTiledLayers(this.basemap,k.map.basemap)}}_applyGround(k){this.ground&&(k.map.ground=this.ground.cloneAndApplyTo(k.map.ground))}_getLayers(k){const v=new r;this._collectLayers(k,v);this._collectLayers(k.ground,v);return v}_collectLayers(k,v){k.layers.forEach(A=>{A.persistenceEnabled&&(v.add(A),"layers"in A&&this._collectLayers(A,v))})}async _loadLayersWithSublayerVisibility(k){this.visibleLayers&&await Promise.allSettled(this._getLayers(k.map).items.map(v=>this.visibleLayers.find(A=>
A.id===v.id)?.sublayerIds?v.load():null))}_applyLayerVisibility(k){this.visibleLayers&&this._getLayers(k.map).forEach(v=>{var A=this.visibleLayers.find(O=>O.id===v.id);v.visible=null!=A;const K=A?.sublayerIds;A=x(v);K&&A&&A.forEach(O=>O.visible=K.includes(O.id))})}async _setViewpointOfInterest(k,v){if(k.state.fixedContentCamera||!this.viewpoint||v?.ignoreViewpoint||!v?.useDestinationCamera)return!1;({toCameraAsync:v}=await new Promise((A,K)=>b(["../views/3d/support/viewpointUtils"],A,K)));v=await v(k,
this.viewpoint);k.contentCamera=v;return null!=v}async _applyViewpoint(k,v){this._applyCachedCameraTrackingEnabled(k);if(this.viewpoint&&!v.ignoreViewpoint){null!=this.viewpoint.camera&&(this.viewpoint.camera.fov=k.camera.fov);const A=this.environment.lighting;if(v.animate&&"sun"===A.type&&A.date)return this._animateToLighting(k,v);v.animate&&(k.environment.applyLighting(A.clone()),await k.goTo(this.viewpoint,v));k.viewpoint=this.viewpoint}k.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(k,
v){let A=null;"virtual"!==k.environment.lighting.type&&"virtual"!==this.environment.lighting.type&&("global"===k.viewingMode&&(A=this._animateLightingWithCamera(k,k.environment.lighting,this.environment.lighting)),k.environment.cachedCameraTrackingEnabled=k.environment.lighting.cameraTrackingEnabled,k.environment.lighting.cameraTrackingEnabled=!1);k.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;"virtual"===this.environment.lighting.type||"virtual"===k.environment.lighting.type?
(k.environment.applyLighting(this.environment.lighting.clone()),"virtual"!==k.environment.lighting.type&&(k.environment.cachedCameraTrackingEnabled=k.environment.lighting.cameraTrackingEnabled,k.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(k.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return k.goTo(this.viewpoint,v).then(()=>{this._applyCachedCameraTrackingEnabled(k);k.environment.applyLighting(this.environment.lighting.clone())}).catch(K=>
{null==k.animation&&this._applyCachedCameraTrackingEnabled(k);throw K;}).finally(()=>{m.removeMaybe(A)})}_applyCachedCameraTrackingEnabled(k){null!=k.environment.cachedCameraTrackingEnabled&&(k.environment.lighting.cameraTrackingEnabled=k.environment.cachedCameraTrackingEnabled,k.environment.cachedCameraTrackingEnabled=null)}_getTime(k){const v=k.getTime();k=3600*k.getUTCHours()+60*k.getUTCMinutes()+k.getUTCSeconds();return[v,k]}_setTime(k,v,A){k.setTime(v);k.setUTCHours(A/3600);k.setUTCMinutes(A%
3600/60);k.setUTCSeconds(A%3600%60);return k}_animateLightingWithCamera(k,v,A){const [K,O]=this._getTime(new Date(v.date.toString())),[T,ha]=this._getTime(A.date),W=V(O,ha),fa=k.renderCoordsHelper,na=X.create();fa.toRenderCoords(k.camera.position,na);const ka=X.create(),ba=X.create();null!=this.viewpoint.camera&&fa.toRenderCoords(this.viewpoint.camera.position,ka);const oa=new Date;return D.when(()=>k.camera,aa=>{fa.toRenderCoords(aa.position,ba);var Z=L.squaredDistance(na,ba);const pa=L.squaredDistance(ka,
ba);aa=0;0!==Z+pa&&(aa=Z/(Z+pa));Z=K+(T-K)*aa;aa=n.moduloPositive(O+W*aa,86400);v.date=this._setTime(oa,Z,aa)})}static createFrom(k,v){return(new this).updateFrom(k,v)}};a.__decorate([C.property({type:String,json:{write:{isRequired:!0}}})],d.prototype,"id",void 0);a.__decorate([C.property({type:u,json:{default:()=>new u({text:""}),write:{isRequired:!0}}})],d.prototype,"title",void 0);a.__decorate([G.cast("title")],d.prototype,"castTitle",null);a.__decorate([C.property({type:M,json:{write:{overridePolicy(k){return{enabled:!(!k||
!k.text)}}}}})],d.prototype,"description",void 0);a.__decorate([G.cast("description")],d.prototype,"castDescription",null);a.__decorate([C.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],d.prototype,"hidden",void 0);a.__decorate([C.property({type:Y.SlideThumbnail,json:{default:()=>new Y.SlideThumbnail({url:""}),write:{isRequired:!0}}})],d.prototype,"thumbnail",void 0);a.__decorate([G.cast("thumbnail")],d.prototype,"castThumbnail",null);a.__decorate([C.property({type:g,nonNullable:!0,
json:{write:{isRequired:!0}}})],d.prototype,"viewpoint",void 0);a.__decorate([C.property({type:h,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],d.prototype,"basemap",void 0);a.__decorate([G.cast("basemap")],d.prototype,"castBasemap",null);a.__decorate([C.property({type:S,json:{write:!0}})],d.prototype,"ground",void 0);a.__decorate([C.property({type:ja,json:{write:{isRequired:!0}}})],d.prototype,"visibleLayers",null);a.__decorate([G.cast("visibleLayers")],d.prototype,"castVisibleLayers",
null);a.__decorate([C.property({type:U.SlideEnvironment,json:{write:!0}})],d.prototype,"environment",void 0);return d=a.__decorate([F.subclass("esri.webscene.Slide")],d)})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(b,a,h,g,p,r,f,d,l,n,m,w,D,C,G){function I(y){return H.has(y)?H.get(y):"number"===typeof y?y:1}b.TaskPriority=void 0;(function(y){y.RESOURCE_CONTROLLER_IMMEDIATE="immediate";y.RESOURCE_CONTROLLER="schedule";y.SLIDE="slide";y.STREAM_DATA_LOADER="stream loader";y.ELEVATION_QUERY="elevation query";y.TERRAIN_SURFACE="terrain";y.SURFACE_GEOMETRY_UPDATES="surface geometry updates";y.LOD_RENDERER="LoD renderer";y.GRAPHICS_CORE="Graphics3D";y.I3S_CONTROLLER="I3S";y.POINT_CLOUD_LAYER="point cloud";
y.FEATURE_TILE_FETCHER="feature fetcher";y.OVERLAY="overlay";y.STAGE="stage";y.GRAPHICS_DECONFLICTOR="graphics deconflictor";y.FILTER_VISIBILITY="Graphics3D filter visibility";y.SCALE_VISIBILITY="Graphics3D scale visibility";y.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";y.POINT_OF_INTEREST_FREQUENT="POI frequent";y.POINT_OF_INTEREST_INFREQUENT="POI infrequent";y.LABELER="labeler";y.FEATURE_QUERY_ENGINE="feature query";y.FEATURE_TILE_TREE="feature tile tree";y.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
y.ELEVATION_ALIGNMENT="elevation alignment";y.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";y.TEXT_TEXTURE_ATLAS="text texture atlas";y.TEXTURE_UNLOAD="texture unload";y.LINE_OF_SIGHT_TOOL="line of sight tool";y.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";y.ELEVATION_PROFILE="elevation profile";y.SNAPPING="snapping";y.SHADOW_ACCUMULATOR="shadow accumulator";y.CLOUDS_GENERATOR="clouds generator";y[y.NONE=0]="NONE";y[y.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority=
{}));const H=new Map([[b.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[b.TaskPriority.RESOURCE_CONTROLLER,4],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.LOD_RENDERER,2],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,
4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.CLOUDS_GENERATOR,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30]]),F=m.Milliseconds(6.5),B=m.Milliseconds(1),L=m.Milliseconds(30),X=m.Milliseconds(1E3/30),P=m.Milliseconds(100);var R;(function(y){class M{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(q=>q.needsUpdate)}constructor(){this._updating=
n.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new r("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new S;this._state=C.RenderState.INTERACTING;this._tasks=new f;this._runQueue=new f;this._load=0;this._idleStateCallbacks=new f;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=l.watch(()=>D.SCHEDULER_LOG_SLOW_TASKS,u=>this._debug=u,l.initial);for(const u of Object.keys(b.TaskPriority))this.performanceInfo.tasks.set(b.TaskPriority[u],
new r(b.TaskPriority[u]));const q=this;this._test={FRAME_SAFETY_BUDGET:F,INTERACTING_BUDGET:X,IDLE_BUDGET:P,get availableBudget(){return q._budget.budget},usedBudget:0,getBudget:()=>q._budget,setBudget:u=>q._budget=u,updateTask:u=>this._updateTask(u),getState:u=>this._getState(u),getRuntime:u=>this._getRuntime(u),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(q=>q.remove());this._tasks.clear();
p.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(q){this._updatingChanged();q&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(q,u){u=new U(this,q,u);this._tasks.push(u);this._updatingChanged();this.performanceInfo.tasks.has(q)||this.performanceInfo.tasks.set(q,new r(q));return u}registerIdleStateCallbacks(q,
u){const x={idleBegin:q,idleEnd:u};this._idleStateCallbacks.push(x);this.state===C.RenderState.IDLE&&this._idleUpdatesStartFired&&x.idleBegin();const N=this;return{remove:()=>this._removeIdleStateCallbacks(x),set idleBegin(V){N._idleUpdatesStartFired&&(x.idleEnd(),N._state===C.RenderState.IDLE&&V());x.idleBegin=V},set idleEnd(V){x.idleEnd=V}}}get load(){return this._load}set state(q){this._state!==q&&(this._state=q,this.state!==C.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(u=>u.idleEnd())))}get state(){return this._state}updateBudget(q){this._test.usedBudget=0;++this._frameNumber;let u=F,x=q.frameDuration,N=B;switch(this.state){case C.RenderState.IDLE:u=m.Milliseconds(0);x=m.Milliseconds(Math.max(P,q.frameDuration));N=L;break;case C.RenderState.INTERACTING:x=m.Milliseconds(Math.max(X,q.frameDuration))}x=m.Milliseconds(x-q.elapsedFrameTime-u);if(this.state!==C.RenderState.IDLE&&x<B&&!this._forceTask)return this._forceTask=!0,!1;x=m.Milliseconds(Math.max(x,
N));this._budget.reset(x,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case C.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(q=>q.idleBegin()));this._runIdle();break;case C.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(m.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(q){this._idleUpdatesStartFired&&
q.idleEnd();this._idleStateCallbacks.removeUnordered(q)}removeTask(q){this._tasks.removeUnordered(q);this._runQueue.removeUnordered(q);this._updatingChanged()}_updateTask(q){this._tasks.forAll(u=>{u.name===q&&u.setPriority(q)})}_getState(q){if(this._runQueue.some(x=>x.name===q))return b.TaskState.SCHEDULED;let u=b.TaskState.IDLE;this._tasks.forAll(x=>{x.name===q&&x.needsUpdate&&(1>=x.schedulePriority?u=b.TaskState.READY:u!==b.TaskState.READY&&(u=b.TaskState.WAITING))});return u}_getRuntime(q){let u=
0;this._tasks.forAll(x=>{x.name===q&&(u+=x.runtime)});return u}_resetRuntimes(){this._tasks.forAll(q=>q.runtime=0)}_getRunning(){const q=new Map;this._tasks.forAll(x=>{x.needsUpdate&&q.set(x.name,(q.get(x.name)||0)+1)});if(0===q.size)return null;let u="";q.forEach((x,N)=>{u=1<x?u+` ${x}x ${N}`:u+` ${N}`});return u}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const q=this._tasks.reduce((u,x)=>x.needsUpdate?++u:u,0);this._load=.9*this._load+q*(1-.9)}_schedule(){this._runQueue.filterInPlace(q=>
{if(q.needsUpdate)return!0;q.schedulePriority=q.basePriority;return!1});for(this._tasks.forAll(q=>{0===q.basePriority&&q.needsUpdate&&!this._runQueue.includes(q)&&q.blockFrame!==this._frameNumber&&this._runQueue.unshift(q)});0===this._runQueue.length;){let q=!1;this._tasks.forAll(u=>{if(u.needsUpdate&&0!==u.schedulePriority&&0!==u.basePriority&&u.blockFrame!==this._frameNumber)switch(q=!0,u.schedulePriority){case 1:u.schedulePriority=0;this._runQueue.push(u);break;default:--u.schedulePriority}});
if(!q)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const q=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var u=this._budget.now();const x=this._runQueue.pop();this._budget.resetProgress();try{x.task.runTask(this._budget)===G.Yield&&(x.blockFrame=this._frameNumber)}catch(N){g.getLogger("esri.views.support.Scheduler").error(`Exception in task "${x.name}"`,N),x.blockFrame=this._frameNumber}!this._budget.hasProgressed&&x.blockFrame!==this._frameNumber&&
x.needsUpdate&&(x.blockFrame=this._frameNumber);x.schedulePriority=x.basePriority;u=this._budget.now()-u;x.runtime+=u;this._frameTaskTimes.set(x.priority,this._frameTaskTimes.get(x.priority)+u);this._debug&&u>2*this._budget.budget&&console.log("Task",x.name,"used",u,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-q);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
q)}_startFrameTaskTimes(){for(const q of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[q],0)}_recordFrameTaskTimes(q){this._frameTaskTimes.forEach((u,x)=>this.performanceInfo.tasks.get(x).record(u));this.performanceInfo.total.record(q)}get test(){return this._test}}y.Scheduler=M;class U{get task(){return this._task.value}get updating(){return this._queue.running}constructor(q,u,x){this._scheduler=q;this.name=u;this.runtime=this.blockFrame=0;this._queue=new w.PromiseQueue;this._handles=
new a;this.schedulePriority=this._basePriority=I(u);this._task=n.signal(null!=x?x:this._queue);this._handles.add(l.when(()=>this.task.running,N=>q.taskRunningChanged(N)))}remove(){this.processQueue(da);this._scheduler.removeTask(this);this.schedule=ea.schedule;this.reschedule=ea.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(q){if(this.name!==q){this.name=q;q=I(q);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=q;this._basePriority=
q}}get priority(){return this.name}set priority(q){this.setPriority(q)}get needsUpdate(){return this.updating||this.task.running}schedule(q,u,x){return this._queue.push(q,u,x)}reschedule(q,u,x){return this._queue.unshift(q,u,x)}processQueue(q){return this._queue.runTask(q)}}class S{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=C.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(q){if(this.done)return!1;!0===q()&&this.madeProgress();
return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(q){this._enabled=q}reset(q,u){this._begin=this.now();this._budget=q;this._state=u;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=
this._progressed=!1}get hasProgressed(){return this._progressed}}y.Budget=S})(R||={});b.TaskState=void 0;(function(y){y.SCHEDULED="s";y.READY="r";y.WAITING="w";y.IDLE="i"})(b.TaskState||(b.TaskState={}));const da=(()=>{const y=new R.Budget;y.enabled=!1;return y})();class Y{remove(){}processQueue(){}schedule(y,M,U){try{if(d.isAborted(M)){const S=d.createAbortError();return U?Promise.resolve(U(S)):Promise.reject(S)}return d.when(y(da))}catch(S){return Promise.reject(S)}}reschedule(y,M,U){return this.schedule(y,
M,U)}}const ea=new Y;b.ImmediateTask=ea;b.getTaskPriority=I;b.newScheduler=function(){return new R.Scheduler};b.noBudget=da;b.taskPriorities=H;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(b,a,h,g){class p{constructor(){this._tasks=[];this._runningTasks=h.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(f){if(0===
this.length)return g.Yield;for(;!f.done&&this._process(f);)f.madeProgress()}push(f,d,l){++this._runningTasks.value;return(new Promise((n,m)=>this._tasks.push(new r(n,m,f,d,l)))).finally(()=>--this._runningTasks.value)}unshift(f,d,l){++this._runningTasks.value;return(new Promise((n,m)=>this._tasks.unshift(new r(n,m,f,d,l)))).finally(()=>--this._runningTasks.value)}_process(f){if(0===this._tasks.length)return!1;const d=this._tasks.shift();try{const l=a.isAborted(d.signal);if(l&&!d.abortCallback)d.reject(a.createAbortError());
else{const n=l?d.abortCallback?.(a.createAbortError()):d.callback(f);a.isPromiseLike(n)?n.then(d.resolve,d.reject):d.resolve(n)}}catch(l){d.reject(l)}return!0}cancelAll(){const f=a.createAbortError();for(const d of this._tasks)if(d.abortCallback){const l=d.abortCallback(f);d.resolve(l)}else d.reject(f);this._tasks.length=0}}class r{constructor(f,d,l,n,m){this.resolve=f;this.reject=d;this.callback=l;this.signal=n;this.abortCallback=m}}b.PromiseQueue=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/support/Yield":function(){define(["exports"],function(b){const a=Symbol("Yield");b.Yield=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,g,p,r,f){a=class extends a{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=
this.SCHEDULER_LOG_SLOW_TASKS=!1}};b.__decorate([h.property()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([h.property()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);a=b.__decorate([f.subclass("esri.views.support.DebugFlags")],a);return new a})},"esri/views/support/RenderState":function(){define(["exports"],function(b){b.RenderState=void 0;var a=b.RenderState||(b.RenderState={});a[a.ANIMATING=0]="ANIMATING";a[a.INTERACTING=1]="INTERACTING";a[a.IDLE=2]=
"IDLE";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,g,p,r,f,d){var l;b.SlideThumbnail=l=class extends h.JSONSupport{constructor(){super(...arguments);this.url=""}destroy(){this.url=""}clone(){return new l({url:this.url})}};
a.__decorate([g.property({type:String,json:{write:{isRequired:!0}}})],b.SlideThumbnail.prototype,"url",void 0);b.SlideThumbnail=l=a.__decorate([d.subclass("esri.webdoc.support.SlideThumbnail")],b.SlideThumbnail);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Description":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f){var d;a=d=class extends a.JSONSupport{constructor(){super(...arguments);this.text=""}clone(){return new d({text:this.text})}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);return a=d=b.__decorate([f.subclass("esri.webscene.support.Description")],a)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../views/3d/environment/SunnyWeather ../../views/3d/environment/weather ../lightingTypes ../SunLighting".split(" "),
function(b,a,h,g,p,r,f,d,l,n,m,w){var D;b.SlideEnvironment=D=class extends h.JSONSupport{constructor(){super(...arguments);this.lighting=new w;this.weather=new l}clone(){return new D({lighting:g.clone(this.lighting),weather:g.clone(this.weather)})}};a.__decorate([p.property({types:m.lightingTypes,json:{write:!0}})],b.SlideEnvironment.prototype,"lighting",void 0);a.__decorate([p.property({types:n.weatherTypes,json:{write:!0}})],b.SlideEnvironment.prototype,"weather",void 0);b.SlideEnvironment=D=a.__decorate([d.subclass("esri.webscene.Environment")],
b.SlideEnvironment);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/tslib.es6 ../../Ground ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ../../webdoc/support/opacityUtils".split(" "),function(b,a,h,g,p,r,f,d,l){var n;h=n=class extends h.JSONSupport{constructor(){super(...arguments);
this.opacity=null}clone(){return new n({opacity:this.opacity})}cloneAndApplyTo(m){if(null==this.opacity)return m;m=m?.clone()??new a;m.opacity=this.opacity;return m}static fromGround(m){return new n({opacity:m.opacity})}};b.__decorate([g.property({type:Number,json:{type:p.Integer,read:{reader:l.transparencyToOpacity,source:"transparency"},write:{writer:(m,w)=>{w.transparency=l.opacityToTransparency(m)},target:"transparency"}}})],h.prototype,"opacity",void 0);return h=n=b.__decorate([d.subclass("esri.webscene.support.SlideGround")],
h)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,h,g,p,r,f){var d;b.SlideVisibleLayer=d=class extends h.JSONSupport{constructor(l){super(l);this.id="";this.sublayerIds=null}clone(){return new d({id:this.id,sublayerIds:g.clone(this.sublayerIds)})}};a.__decorate([p.property({type:String,
json:{write:!0}})],b.SlideVisibleLayer.prototype,"id",void 0);a.__decorate([p.property({type:[r.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],b.SlideVisibleLayer.prototype,"sublayerIds",void 0);b.SlideVisibleLayer=d=a.__decorate([f.subclass("esri.webscene.support.SlideVisibleLayer")],b.SlideVisibleLayer);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/Title":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f){var d;a=d=class extends a.JSONSupport{constructor(){super(...arguments);this.text=""}clone(){return new d({text:this.text})}};b.__decorate([h.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"text",void 0);return a=d=b.__decorate([f.subclass("esri.webscene.support.Title")],a)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,h,g,p,r,f){var d;a=d=class extends a.JSONSupport{constructor(l){super(l)}clone(){return new d({name:this.name,path:this.path,title:this.title})}};b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"path",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=d=b.__decorate([f.subclass("esri.webscene.TransportationNetwork")],a)})},"esri/webscene/Version":function(){define(["exports",
"../core/Version"],function(b,a){class h extends a.Version{constructor(g,p){super(g,p,"webscene")}get supportsGround(){return this.since(1,8)}get supportsVisibleElevationLayersInSlides(){return this.lessThan(1,8)}}b.Version=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webscene/support/schemaValidatorLoader":function(){define(["exports"],function(b){let a=null;b.getLoader=function(){return a};b.registerLoader=function(h){a=h};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"*noref":1}});
define("require ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/Collection ./core/Error ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/originUtils ./core/accessorSupport/read ./geometry/Extent ./geometry/HeightModelInfo ./geometry/projection ./geometry/SpatialReference ./geometry/support/heightModelInfoUtils ./geometry/support/jsonUtils ./geometry/support/spatialReferenceUtils ./portal/Portal ./portal/PortalItem ./portal/support/jsonContext ./portal/support/portalItemUtils ./support/basemapUtils ./support/MapFloorInfo ./support/tagSymbols ./support/webSceneUtils ./views/ViewingMode ./views/support/spatialReferenceSupport ./webdoc/interfaces ./webdoc/support/resourceUtils ./webdoc/support/saveAPIKeyUtils ./webdoc/support/saveUtils ./webdoc/support/thumbnailUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version ./webscene/support/schemaValidatorLoader".split(" "),function(b,
a,h,g,p,r,f,d,l,n,m,w,D,C,G,I,H,F,B,L,X,P,R,da,Y,ea,y,M,U,S,q,u,x,N,V,ma,ja,k,v,A,K,O,T,ha,W,fa,na,ka,ba,oa,aa,Z,pa){const ia=new Z.Version(1,33);g=class extends l.LoadableMixin(C.EsriPromiseMixin(D.MultiOriginJSONMixin(g))){constructor(c){super(c);this[ra]=!0;this._layersIdGCTimeoutId=void 0;this.clippingArea=this.applicationProperties=this._updateFromPromise=null;this.clippingEnabled=!1;this.floorInfo=null;this.heightModelInfo=void 0;this.transportationNetworks=this.sourceVersion=null;this.presentation=
new oa;this.initialViewProperties=new ba;this.resourceInfo=this.portalItem=null;this._debouncedSaveOperations=G.debounce(async(e,t,z)=>{switch(e){case O.SaveOperationType.SAVE:return this._saveImpl(t);case O.SaveOperationType.SAVE_AS:return this._saveAsImpl(z,t)}});this._resourceReferences={portalItem:null,paths:[]};this.authoringAppVersion=this.authoringApp=null;this._isAuthoringAppVersionSetByUser=this._isAuthoringAppSetByUser=!1}initialize(){this.when().catch(c=>{m.getLogger(this).error("#load()",
"Failed to load web scene",c)});if(this.resourceInfo){let c;try{c=this._validateJSON(this.resourceInfo)}catch(e){this.addResolvingPromise(Promise.reject(e));return}this.read(c);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this.addHandles(I.on(()=>this.allLayers,"change",()=>this._scheduleLayersIdGC()))}destroy(){this._unscheduleLayersIdGC();this.presentation&&this.presentation.destroy();this.portalItem=w.destroyMaybe(this.portalItem)}writeClippingArea(c,
e){e.clippingArea||(e.clippingArea={});e.clippingArea.geometry=c.toJSON()}readClippingEnabled(c,e){return e.clippingArea?!!e.clippingArea.clip:!1}writeClippingEnabled(c,e){this.clippingArea&&(e.clippingArea||(e.clippingArea={}),e.clippingArea.clip=c)}writeLayers(c,e,t,z){e[t]=this._layersToJSON(c,"operational-layers",z)}readSourceVersion(c,e){const [t,z]=e.version.split(".");return new Z.Version(parseInt(t,10),parseInt(z,10))}writeSourceVersion(c,e,t){e[t]=`${ia.major}.${ia.minor}`}writeTables(c,
e,t,z){c=this._layersToJSON(c,"tables",z);c.length&&(e[t]=c)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl??null}set thumbnailUrl(c){c?this._override("thumbnailUrl",c):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}set authoringApp(c){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",c)}writeAuthoringApp(c,e){e.authoringApp=c&&this._isAuthoringAppSetByUser?c:"ArcGIS API for JavaScript"}set authoringAppVersion(c){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",
c)}writeAuthoringAppVersion(c,e){e.authoringAppVersion=c&&this._isAuthoringAppVersionSetByUser?c:h.version}writeGround(c,e,t,z){e[t]=c?c.write({},z):{transparency:0,layers:[]}}readInitialViewProperties(c,e){c={};e.initialState?.environment&&(c.environment=ka.fromJSON(e.initialState.environment));c.spatialReference=e.spatialReference?M.fromJSON(e.spatialReference):M.WebMercator;c.viewingMode=e.viewingMode??"global";e.initialState?.viewpoint&&(c.viewpoint=p.fromJSON(e.initialState.viewpoint));return new ba(c)}get spatialReference(){return this.initialViewProperties?.spatialReference??
M.WebMercator}get viewingMode(){return this.initialViewProperties?.viewingMode??"global"}load(c){const e=this.ground;this.addResolvingPromise(this._loadFromSource().then(()=>{e&&e!==this.ground&&e.destroy()}));return Promise.resolve(this)}loadAll(){return n.loadAll(this,c=>{const e=this.presentation&&this.presentation.slides;c(this.ground,this.basemap,this.layers,e&&e.map(t=>t.basemap),this.tables)})}read(c,e){e={...e,origin:"web-scene"};const t=this._isAuthoringAppVersionSetByUser,z=this._isAuthoringAppSetByUser;
da.readLoadable(this,c,E=>super.read(c,E),e);z||(this._isAuthoringAppSetByUser=!1);t||(this._isAuthoringAppVersionSetByUser=!1);if(c.baseMap&&Array.isArray(c.baseMap.elevationLayers)&&(this.sourceVersion?.supportsVisibleElevationLayersInSlides??!1)){e=c.baseMap.elevationLayers.map(Q=>({id:Q.id}));const E=this.presentation.slides,J=(Q,la)=>Q.visibleLayers.some(qa=>qa.id===la),ca=e.filter(Q=>!E.some(la=>J(la,Q.id)));E.forEach(Q=>{Q.visibleLayers.addMany(ca)})}}_writeBasemapElevationLayers(c){const e=
c.ground?.layers;!c.baseMap&&e?.length&&(c.baseMap={title:"Basemap",baseMapLayers:[]});c.baseMap&&(c.baseMap.elevationLayers=d.clone(e))}_layersToJSON(c,e,t){const z={...t,layerContainerType:e};return c.map(E=>this._verifyWritableLayer(E,t)?E.write({},z):null).filter(E=>!!E).toArray()}_verifyWritableLayer(c,e){return c.persistenceEnabled?"write"in c?!0:(e?.messages&&e.messages.push(new f("layer:unsupported",`Layers (${c.title}, ${c.id}) of type '${c.declaredClass}' cannot be persisted in web scenes`,
{layer:c})),!1):!1}write(c,e){if("loaded"!==this.loadStatus)throw e=new f("webscene:not-loaded","Web scene must be loaded before it can be serialized"),m.getLogger(this).error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),e;this._runLayersIdGC();var t=!e?.messages;e={messages:[],...e,origin:"web-scene"};c=super.write(c,e);if(t&&(e=e.messages?.filter(z=>"web-document-write:property-required"===z.name)??[],e.length))throw t=new f("web-document:property-required",
"One or more properties that are required in the webscene JSON are missing, see details for the specific errors",{errors:e}),m.getLogger(this).error("#toJSON()","One or more properties that are required in the webscene JSON are missing",e),t;this._writeBasemapElevationLayers(c);return c}async save(c){return this._debouncedSaveOperations(O.SaveOperationType.SAVE,c)}async _saveImpl(c){if(!this.portalItem)throw new f("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene");
ha.validateSaveAPIKey(this.portalItem);if("Web Scene"!==this.portalItem?.type)throw new f("webscene:portal-item-wrong-type",'Portal item needs to have type "Web Scene"');const e=this._updateFromPromise;await this._ensureLoadBeforeSave();const t=this._enableVerifyItemRelativeUrls(N.createForItemWrite(this.portalItem,"web-scene",!0)),z=this.write({},t);await Promise.all(t.resources.pendingOperations);await this._verifySave(z,t,c);this._updateTypeKeywords(this.portalItem);await T.updateItemWithResources(this.portalItem,
z,this._resourceReferences,t);R.updateOrigins(t);e&&await e;await this._saveThumbnail();return this.portalItem}async saveAs(c,e){return this._debouncedSaveOperations(O.SaveOperationType.SAVE_AS,e,c)}async _saveAsImpl(c,e){c=x.from(c);if(!c)throw new f("webscene:portal-item-required","saveAs requires a portal item to save to");ha.validateSaveAPIKey(c);c.id&&(c=c.clone(),c.id=null);const t=c.portal||u.getDefault();await this._ensureLoadBeforeSave();c.type="Web Scene";c.portal=t;const z=this._enableVerifyItemRelativeUrls(N.createForItemWrite(c,
"web-scene",!0)),E=this.write({},z);await Promise.all(z.resources.pendingOperations);await this._verifySaveAs(E,z,e);const J=this.thumbnailUrl,ca=!this._isOverridden("thumbnailUrl");this._updateTypeKeywords(c);await t.signIn();if(!t.user)throw new f("webscene:user-not-signed-in","saveAs requires a user to be signed in to the portal");await t.user.addItem({item:c,folder:e?.folder,data:E});await T.saveResources(this._resourceReferences,z);this.portalItem=c;D.MultiOriginJSONSupport.prototype.read.call(this,
{version:E.version,authoringApp:E.authoringApp,authoringAppVersion:E.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:c.itemUrl?H.urlToObject(c.itemUrl):void 0});R.updateOrigins(z);J&&(this.thumbnailUrl=ca?H.addQueryParameter(J,"w","8192"):J);z.portalItem=c;await this._saveThumbnail();return c}async _saveThumbnail(){this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}async _verifySave(c,
e,t,z=!1){if(!q.isEarth(this.spatialReference))throw new f("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently.");const {ignoreUnsupported:E,requiredPropertyChecksDisabled:J,strictSchemaValidationEnabled:ca}=t||{};W.evaluateWriteErrors(e,{errorName:"webscene:save"},{ignoreUnsupported:E,supplementalUnsupportedErrors:["scenemodification:unsupported"],requiredPropertyChecksDisabled:J});e=pa.getLoader();if(ca&&e&&(e=(await e()).validate(c),
e.length))throw c=`webscene did not validate:\n${e.join("\n")}`,m.getLogger(this).error(`${z?"saveAs":"save"}(): ${c}`),z=e.map(Q=>new f("webscene:schema-validation",Q)),v.createSchemaValidationError(z);}_verifySaveAs(c,e,t){return this.canNotSaveAs(e)?Promise.reject(v.createCopyError()):this._verifySave(c,e,t,!0)}verifySaveAs(c){const e=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),t=this.write({},e);return this._verifySaveAs(t,e,c)}canNotSaveAs(c){c||(c=this._enableVerifyItemRelativeUrls({origin:"web-scene",
messages:[]}),this.write({},c));return 0<(c.verifyItemRelativeUrls?.writtenUrls?.length??0)}async updateFrom(c,e={}){this._updateFromPromise=c=this._updateFrom(c,e);await c;this._updateFromPromise===c&&(this._updateFromPromise=null)}async _updateFrom(c,e={}){await c.whenReady();!e.environmentExcluded&&c.environment&&(this.initialViewProperties.environment=ka.prototype.clone.apply(c.environment));!e.viewpointExcluded&&c.viewpoint&&(this.initialViewProperties.viewpoint=c.viewpoint.clone());this.initialViewProperties.spatialReference=
c.spatialReference.clone();this.initialViewProperties.viewingMode=c.viewingMode;null!=c.clippingArea?c.clippingArea!==this.clippingArea&&(this.clippingArea=c.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;c.heightModelInfo&&(this.heightModelInfo=c.heightModelInfo.clone());if(c.map===this)for(const t of c.allLayerViews)"visible"in t&&"visible"in t.layer&&t._isOverridden("visible")&&(t.layer.visible=t.visible);(!1===e.thumbnailExcluded||null==e.thumbnailExcluded&&!e.viewpointExcluded)&&
await this._updateFromThumbnail(c,e.thumbnailSize??void 0)}async _updateFromThumbnail(c,e){e=fa.getOptimalThumbnailSize(c,e);this.thumbnailUrl=(await c.takeScreenshot({format:"jpg",width:e.width,height:e.height,disableDecorations:!0})).dataUrl}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem?.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()}_readAndLoadFromJSON(c,e){c=this._validateJSON(c);this.read(c,e);return this._loadFromJSON(c,
e)}_extractOperationalLayers(c){const e=[];if(!this.sourceVersion?.supportsGround&&c.baseMap&&Array.isArray(c.baseMap.elevationLayers))for(const E of c.baseMap.elevationLayers)e.push(E);const t=[],z=E=>{E.layers&&(E.layers=E.layers.filter(z));return"ArcGISTiledElevationServiceLayer"===E.layerType?(this.sourceVersion?.supportsGround||t.push(E),!1):!0};return{operationalLayers:c.operationalLayers?c.operationalLayers.filter(z):[],operationalElevationLayers:t,basemapElevationLayers:e}}async _loadFromJSON(c,
e){const t=new r;await this._validateSpatialReference();await this._validateHeightModelInfo();const {populateOperationalLayers:z}=await new Promise((la,qa)=>b(["./layers/support/layersCreator"],la,qa)),{operationalLayers:E,operationalElevationLayers:J,basemapElevationLayers:ca}=this._extractOperationalLayers(c),Q=[];e={context:{...e,layerContainerType:"operational-layers"}};this.portalItem&&(e.context.portal=this.portalItem.portal||u.getDefault());0<ca.length&&Q.push(z(this.ground.layers,ca,{...e,
context:{...e.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<J.length&&Q.push(z(t,J,{...e,context:{...e.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));E&&0<E.length&&Q.push(z(this.layers,E,e));c.tables?.length&&Q.push(z(this.tables,c.tables,{...e,context:{...e.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"}));await Promise.allSettled(Q);await this._loadObjectsWithLayers();this.ground.layers.addMany(t)}async _ensureLoadBeforeSave(){await this.load();
await this._loadObjectsWithLayers();const c=[];var e=[...this.allLayers.items];for(const {basemap:t}of this.presentation.slides.items)t&&(e.push(...t.baseLayers.items),e.push(...t.referenceLayers.items));for(const t of e)"beforeSave"in t&&"function"===typeof t.beforeSave&&(e=t.beforeSave())&&c.push(e);await Promise.allSettled(c)}async _loadObjectsWithLayers(){const c=[];this.ground&&c.push(this.ground.load());this.basemap&&c.push(this.basemap.load());this.presentation.slides.forEach(e=>{e.basemap&&
c.push(e.basemap.load())});await Promise.allSettled(c)}async _loadFromItem(c){await c.load().catch(z=>{throw new f("webscene:load-portal-item","Failed to load portal item",{error:z});});if("Web Scene"!==c.type)throw new f("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:c.type});const e=await c.fetchData();this.resourceInfo=e;const t={origin:"web-scene",url:H.urlToObject(c.itemUrl),portal:c.portal||u.getDefault(),portalItem:c,readResourcePaths:[]};await this._readAndLoadFromJSON(e,
t);this._resourceReferences={portalItem:c,paths:t.readResourcePaths??[]}}_validateSpatialReference(){const c=this.initialViewProperties,e=this._sceneSpatialReference;let t=void 0;if("local"!==c.viewingMode){if(!K.isSpatialReferenceSupported(e,A.ViewingMode.Global))return Promise.reject(new f("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:e,viewingMode:c.viewingMode}));
t=J=>!J||y.canProjectWithoutEngine(J,e)}else{if(!K.isSpatialReferenceSupported(e,A.ViewingMode.Local))return Promise.reject(new f("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:e,viewingMode:c.viewingMode}));t=J=>!J||J.equals(e)}const z=J=>J?.camera?.position.spatialReference??J?.targetGeometry?.spatialReference;var E=z(c.viewpoint);return E&&!t(E)?Promise.reject(new f("webscene:incompatible-camera-spatial-reference",
"Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:E,sceneSpatialReference:e,viewingMode:c.viewingMode})):(E=this.presentation.slides.find(J=>!t(z(J.viewpoint))))?(E=z(E.viewpoint),Promise.reject(new f("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",
{slideSpatialReference:E,sceneSpatialReference:e,viewingMode:c.viewingMode}))):Promise.resolve()}_validateHeightModelInfo(){const c=U.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);return c?Promise.reject(c):Promise.resolve()}_validateJSON(c){const e=Z.Version.parse(c.version||"","webscene");ia.validate(e);c.version=`${e.major}.${e.minor}`;1===e.major&&2>=e.minor&&(c.spatialReference=M.WebMercator.toJSON());return c}_updateTypeKeywords(c){V.toggleTypeKeyword(c,V.typeKeyword.LOCAL_SCENE,
"local"===this.initialViewProperties.viewingMode);V.toggleTypeKeyword(c,V.typeKeyword.DEVELOPER_BASEMAP,ma.hasDeveloperBasemapLayer(this.basemap)||this.presentation.slides.some(({basemap:e})=>!!e&&ma.hasDeveloperBasemapLayer(e)));c.typeKeywords&&(c.typeKeywords=c.typeKeywords.filter((e,t,z)=>z.indexOf(e)===t))}get _sceneSpatialReference(){return this.initialViewProperties.spatialReference||M.WebMercator}get _verifyItemRelativeRootPath(){return this.portalItem?.itemUrl?H.urlToObject(this.portalItem.itemUrl).path:
null}_enableVerifyItemRelativeUrls(c){const e=this._verifyItemRelativeRootPath;e&&(c.verifyItemRelativeUrls={rootPath:e,writtenUrls:[]});return c}_unscheduleLayersIdGC(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)}_scheduleLayersIdGC(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)}_runLayersIdGC(){this._unscheduleLayersIdGC();var c=this.applicationProperties?.viewing?.search;
const e=t=>this.allLayers.some(z=>z.id===t&&z.persistenceEnabled);c&&c.layers&&(c.layers=c.layers.filter(t=>e(t.id)));(c=this.presentation&&this.presentation.slides)&&c.forEach(t=>{t.visibleLayers&&(t.visibleLayers=t.visibleLayers.filter(z=>e(z.id)))})}static fromJSON(c){if(!c)throw new f("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:c})}};var ra=k.WebSceneTag;g.version=`${ia.major}.${ia.minor}`;a.__decorate([F.property({type:na,json:{write:!0}})],
g.prototype,"applicationProperties",void 0);a.__decorate([F.property({type:Y,json:{read:{source:"clippingArea.geometry",reader:S.fromJSON},write:{target:"clippingArea.geometry"}}})],g.prototype,"clippingArea",void 0);a.__decorate([P.writer("clippingArea")],g.prototype,"writeClippingArea",null);a.__decorate([F.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],g.prototype,"clippingEnabled",void 0);a.__decorate([L.reader("clippingEnabled",["clippingArea"])],g.prototype,"readClippingEnabled",
null);a.__decorate([P.writer("clippingEnabled")],g.prototype,"writeClippingEnabled",null);a.__decorate([F.property({type:ja,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],g.prototype,"floorInfo",void 0);a.__decorate([F.property({type:ea,json:{write:!0}})],g.prototype,"heightModelInfo",void 0);a.__decorate([F.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],g.prototype,"layers",void 0);a.__decorate([P.writer("layers")],g.prototype,"writeLayers",null);a.__decorate([F.property({readOnly:!0,
type:Z.Version,json:{type:(()=>{const c=[],e=ia.major;for(let t=8;t<=ia.minor;t++)c.push(`${e}.${t}`);return c})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],g.prototype,"sourceVersion",void 0);a.__decorate([L.reader("sourceVersion",["version"])],g.prototype,"readSourceVersion",null);a.__decorate([P.writer("sourceVersion")],g.prototype,"writeSourceVersion",null);a.__decorate([F.property({json:{read:!1,write:{enabled:!0,
ignoreOrigin:!0}}})],g.prototype,"tables",void 0);a.__decorate([P.writer("tables")],g.prototype,"writeTables",null);a.__decorate([F.property()],g.prototype,"thumbnailUrl",null);a.__decorate([F.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringApp",null);a.__decorate([P.writer("authoringApp")],g.prototype,"writeAuthoringApp",null);a.__decorate([F.property({type:String,json:{write:{writerEnsuresNonNull:!0,ignoreOrigin:!0}}})],g.prototype,"authoringAppVersion",
null);a.__decorate([P.writer("authoringAppVersion")],g.prototype,"writeAuthoringAppVersion",null);a.__decorate([F.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],g.prototype,"ground",void 0);a.__decorate([P.writer("ground")],g.prototype,"writeGround",null);a.__decorate([F.property({type:r.ofType(aa),json:{write:!0}})],g.prototype,"transportationNetworks",void 0);a.__decorate([F.property({type:oa,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(c,e,t,z)=>{c.slides&&
0<c.slides.length&&(e.presentation=c.write({},{...z,isPresentation:!0}))}}}})],g.prototype,"presentation",void 0);a.__decorate([F.property({type:ba,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new ba({viewingMode:"global",spatialReference:M.WebMercator})}})],g.prototype,"initialViewProperties",void 0);a.__decorate([L.reader("initialViewProperties",["initialState.environment","initialState.viewpoint","spatialReference","viewingMode"])],g.prototype,"readInitialViewProperties",
null);a.__decorate([F.property({type:M,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],g.prototype,"spatialReference",null);a.__decorate([F.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],g.prototype,"viewingMode",null);a.__decorate([F.property({type:x})],g.prototype,"portalItem",void 0);a.__decorate([F.property()],g.prototype,"resourceInfo",void 0);return g=a.__decorate([X.subclass("esri.WebScene")],g)});