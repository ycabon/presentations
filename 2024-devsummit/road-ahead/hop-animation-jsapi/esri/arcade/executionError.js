// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../core/string"],function(b,e){function f(a){return a&&a.loc?`Line : ${a.loc.start?.line}, ${a.loc.start?.column}: `:""}b.ExecutionErrorCodes=void 0;(function(a){a.AsyncNotEnabled="AsyncNotEnabled";a.ModulesNotSupported="ModulesNotSupported";a.CircularModules="CircularModules";a.CannotCompareDateAndTime="CannotCompareDateAndTime";a.NeverReach="NeverReach";a.UnsupportedHashType="UnsupportedHashType";a.InvalidParameter="InvalidParameter";a.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes";
a.UnexpectedToken="UnexpectedToken";a.Unrecognized="Unrecognized";a.UnrecognizedType="UnrecognizedType";a.MaximumCallDepth="MaximumCallDepth";a.BooleanConditionRequired="BooleanConditionRequired";a.TypeNotAllowedInFeature="TypeNotAllowedInFeature";a.KeyMustBeString="KeyMustBeString";a.WrongNumberOfParameters="WrongNumberOfParameters";a.CallNonFunction="CallNonFunction";a.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";a.NoFunctionInDictionary="NoFunctionInDictionary";a.NoFunctionInArray=
"NoFunctionInArray";a.AssignModuleFunction="AssignModuleFunction";a.LogicExpressionOrAnd="LogicExpressionOrAnd";a.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";a.FunctionNotFound="FunctionNotFound";a.InvalidMemberAccessKey="InvalidMemberAccessKey";a.UnsupportedUnaryOperator="UnsupportUnaryOperator";a.InvalidIdentifier="InvalidIdentifier";a.MemberOfNull="MemberOfNull";a.UnsupportedOperator="UnsupportedOperator";a.Cancelled="Cancelled";a.ModuleAccessorMustBeString="ModuleAccessorMustBeString";
a.ModuleExportNotFound="ModuleExportNotFound";a.Immutable="Immutable";a.OutOfBounds="OutOfBounds";a.IllegalResult="IllegalResult";a.FieldNotFound="FieldNotFound";a.PortalRequired="PortalRequired";a.LogicError="LogicError";a.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";a.KeyAccessorMustBeString="KeyAccessorMustBeString";a.WrongSpatialReference="WrongSpatialReference";a.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime";a.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(b.ExecutionErrorCodes||
(b.ExecutionErrorCodes={}));const g={[b.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[b.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[b.ExecutionErrorCodes.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[b.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[b.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[b.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",
[b.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[b.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[b.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[b.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[b.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[b.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[b.ExecutionErrorCodes.Cancelled]:"Execution cancelled",
[b.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[b.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[b.ExecutionErrorCodes.PortalRequired]:"Portal is required",[b.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[b.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[b.ExecutionErrorCodes.Unrecognized]:"Unrecognized code structure",[b.ExecutionErrorCodes.UnrecognizedType]:"Unrecognized type",[b.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[b.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[b.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[b.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[b.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[b.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[b.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[b.ExecutionErrorCodes.Immutable]:"Object is immutable",
[b.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[b.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[b.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[b.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[b.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognized",[b.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[b.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[b.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",
[b.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[b.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[b.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[b.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26",[b.ExecutionErrorCodes.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[b.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",
[b.ExecutionErrorCodes.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};class l extends Error{constructor(...a){super(...a)}}class h extends l{constructor(a,d){super(f(d)+a.message,{cause:a});this.loc=null;Error.captureStackTrace&&Error.captureStackTrace(this,h);d?.loc&&(this.loc=d.loc)}}class m extends Error{constructor(a,d,c,k){super("Execution error - "+f(c)+e.replace(g[d],k));this.loc=null;this.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(this,
m);c?.loc&&(this.loc=c.loc)}}class n extends Error{constructor(a,d,c,k){super("Compilation error - "+f(c)+e.replace(g[d],k));this.loc=null;this.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(this,n);c?.loc&&(this.loc=c.loc)}}class p extends Error{constructor(){super("Uncompilable code structures");this.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(this,p)}}b.ModuleErrorCodes=void 0;
(function(a){a.UnrecognizedUri="UnrecognizedUri";a.UnsupportedUriProtocol="UnsupportedUriProtocol"})(b.ModuleErrorCodes||(b.ModuleErrorCodes={}));const q={[b.ModuleErrorCodes.UnrecognizedUri]:"Unrecognized uri - {uri}",[b.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognized uri protocol"};class r extends Error{constructor(a,d){super(e.replace(q[a],d));this.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(this,r)}}b.ArcadeCompilationError=n;b.ArcadeExecutionError=
m;b.ArcadeUncompilableError=p;b.ErrorWithCause=l;b.LocatableArcadeExecutionError=h;b.ModuleError=r;b.ensureArcadeExecutionError=function(a,d,c){return"esri.arcade.arcadeexecutionerror"===c.declaredRootClass||"esri.arcade.arcadecompilationerror"===c.declaredRootClass?null===c.loc&&d?.loc?new h(c,{cause:c}):c:d?.loc?new h(c,{cause:c}):c};b.executionErrorMessages=g;b.moduleErrorMessages=q;b.parsingValidationMessage=function(a,d,c){return"Parsing error - "+f(a)+e.replace(g[d],c)};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})});