// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../Dictionary","../executionError","../../chunks/languageUtils","../featureset/support/shared"],function(l,k,g,b,m){function n(d,c){return d&&d.domain?"coded-value"===d.domain.type||"codedValue"===d.domain.type?k.convertObjectToArcadeDictionary({type:"codedValue",name:d.domain.name,dataType:m.layerFieldEsriConstants[d.field.type],codedValues:d.domain.codedValues.map(e=>({name:e.name,code:e.code}))},b.defaultTimeZone(c)):k.convertObjectToArcadeDictionary({type:"range",name:d.domain.name,
dataType:m.layerFieldEsriConstants[d.field.type],min:d.domain.min,max:d.domain.max},b.defaultTimeZone(c)):null}l.registerFunctions=function(d){"async"===d.mode&&(d.functions.domain=function(c,e){return d.standardFunctionAsync(c,e,async(f,h,a)=>{b.pcCheck(a,2,3,c,e);if(b.isFeature(a[0]))return f=b.featureFullDomain(a[0],b.toString(a[1]),void 0===a[2]?void 0:a[2]),n(f,c);if(b.isFeatureSet(a[0]))return await a[0]._ensureLoaded(),f=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[2]?void 0:a[2]),n(f,
c);throw new g.ArcadeExecutionError(c,g.ExecutionErrorCodes.InvalidParameter,e);})},d.functions.subtypes=function(c,e){return d.standardFunctionAsync(c,e,async(f,h,a)=>{b.pcCheck(a,1,1,c,e);if(b.isFeature(a[0]))return(f=b.featureSubtypes(a[0]))?k.convertObjectToArcadeDictionary(f,b.defaultTimeZone(c)):null;if(b.isFeatureSet(a[0]))return await a[0]._ensureLoaded(),(f=a[0].subtypes())?k.convertObjectToArcadeDictionary(f,b.defaultTimeZone(c)):null;throw new g.ArcadeExecutionError(c,g.ExecutionErrorCodes.InvalidParameter,
e);})},d.functions.domainname=function(c,e){return d.standardFunctionAsync(c,e,async(f,h,a)=>{b.pcCheck(a,2,4,c,e);if(b.isFeature(a[0]))return b.featureDomainValueLookup(a[0],b.toString(a[1]),a[2],void 0===a[3]?void 0:a[3]);if(b.isFeatureSet(a[0]))return await a[0]._ensureLoaded(),f=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:a[3]),b.getDomainValue(f,a[2]);throw new g.ArcadeExecutionError(c,g.ExecutionErrorCodes.InvalidParameter,e);})},d.signatures.push({name:"domainname",min:2,max:4}),
d.functions.domaincode=function(c,e){return d.standardFunctionAsync(c,e,async(f,h,a)=>{b.pcCheck(a,2,4,c,e);if(b.isFeature(a[0]))return b.featureDomainCodeLookup(a[0],b.toString(a[1]),a[2],void 0===a[3]?void 0:a[3]);if(b.isFeatureSet(a[0]))return await a[0]._ensureLoaded(),f=b.getDomain(b.toString(a[1]),a[0],null,void 0===a[3]?void 0:a[3]),b.getDomainCode(f,a[2]);throw new g.ArcadeExecutionError(c,g.ExecutionErrorCodes.InvalidParameter,e);})},d.signatures.push({name:"domaincode",min:2,max:4}));d.functions.text=
function(c,e){return d.standardFunctionAsync(c,e,(f,h,a)=>{b.pcCheck(a,1,2,c,e);if(b.isFeatureSet(a[0])){h=b.defaultUndefined(a[1],"");if(""===h)return a[0].castToText();if("schema"===h.toLowerCase())return a[0].convertToText("schema",f.abortSignal);if("featureset"===h.toLowerCase())return a[0].convertToText("featureset",f.abortSignal)}else return b.toStringExplicit(a[0],a[1])})};d.functions.gdbversion=function(c,e){return d.standardFunctionAsync(c,e,async(f,h,a)=>{b.pcCheck(a,1,1,c,e);if(b.isFeature(a[0]))return a[0].gdbVersion();
if(b.isFeatureSet(a[0]))return(await a[0].load()).gdbVersion;throw new g.ArcadeExecutionError(c,g.ExecutionErrorCodes.InvalidParameter,e);})};d.functions.schema=function(c,e){return d.standardFunctionAsync(c,e,async(f,h,a)=>{b.pcCheck(a,1,1,c,e);if(b.isFeatureSet(a[0]))return await a[0].load(),k.convertObjectToArcadeDictionary(a[0].schema(),b.defaultTimeZone(c));if(b.isFeature(a[0]))return(f=b.featureSchema(a[0]))?k.convertObjectToArcadeDictionary(f,b.defaultTimeZone(c)):null;throw new g.ArcadeExecutionError(c,
g.ExecutionErrorCodes.InvalidParameter,e);})}};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});