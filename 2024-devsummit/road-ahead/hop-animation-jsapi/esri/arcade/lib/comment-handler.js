// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","./types"],function(k,f){function h(a,b){return b?b.loc.end.line===a.loc.start.line&&b.loc.end.column<=a.loc.start.column:!1}class l{constructor(){this.comments=[];this._nodeStack=[];this._newComments=[]}insertInnerComments(a){if(f.isBlockStatement(a)&&0===a.body.length){var b=[];for(let c=this._newComments.length-1;0<=c;--c){const d=this._newComments[c];a.range[1]>=d.range[0]&&(b.unshift(d),this._newComments.splice(c,1))}b.length&&(a.innerComments=b)}}attachTrailingComments(a){if(a){var b=
this._nodeStack[this._nodeStack.length-1];if(f.isBlockStatement(a)&&b.range[0]>=a.range[0]&&b.range[1]<=a.range[1])for(var c=this._newComments.length-1;0<=c;--c){var d=this._newComments[c];d.range[0]>=a.range[0]&&d.range[1]<=a.range[1]&&(b.trailingComments=[...(b.trailingComments??[]),d],this._newComments.splice(c,1))}c=[];if(0<this._newComments.length)for(d=this._newComments.length-1;0<=d;--d){const e=this._newComments[d];h(e,b)?(b.trailingComments=[...(b.trailingComments??[]),e],this._newComments.splice(d,
1)):h(e,a)&&(c.unshift(e),this._newComments.splice(d,1))}b?.trailingComments&&h(b.trailingComments[0],a)&&(c=[...c,...b.trailingComments],delete b.trailingComments);0<c.length&&(a.trailingComments=c)}}attachLeadingComments(a){if(a){for(var b;0<this._nodeStack.length;){var c=this._nodeStack[this._nodeStack.length-1];if(a.range[0]<=c.range[0])b=c,this._nodeStack.pop();else break}c=[];var d=[];if(b){var e=b.leadingComments?.length??0;for(--e;0<=e;--e){const g=b.leadingComments[e];a.range[0]>=g.range[1]?
(c.unshift(g),b.leadingComments.splice(e,1)):f.isVariableDeclarator(a)&&!f.isBlockComment(g)&&(d.unshift(g),b.leadingComments.splice(e,1))}0===b.leadingComments?.length&&delete b.leadingComments;c.length&&(a.leadingComments=c);d.length&&(a.trailingComments=[...d,...(a.trailingComments??[])])}else{for(b=this._newComments.length-1;0<=b;--b)d=this._newComments[b],a.range[0]>=d.range[0]&&(c.unshift(d),this._newComments.splice(b,1));c.length&&(a.leadingComments=c)}}}attachComments(a){if(f.isProgram(a)&&
0<a.body.length){const b=this._nodeStack[this._nodeStack.length-1];b?(b.trailingComments=[...(b.trailingComments??[]),...this._newComments],this._newComments.length=0,this._nodeStack.pop()):(a.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(a),this.attachLeadingComments(a),this.insertInnerComments(a),this._nodeStack.push(a)}collectComment(a){this.comments.push(a);this._newComments.push(a)}}k.CommentHandler=l;Object.defineProperty(k,Symbol.toStringTag,
{value:"Module"})});