// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["./iteratorUtils"],function(e){class d{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let a=0;this._groups.forEach(b=>{a+=b.length});return a}add(a,b){if(e.isIterable(a)){b=this._getOrCreateGroup(b);for(const c of a)this._isHandle(c)&&b.push(c)}else this._isHandle(a)&&this._getOrCreateGroup(b).push(a);return this}forEach(a,b){if("function"===typeof a)this._groups.forEach(c=>c.forEach(a));else{const c=this._getGroup(a);c&&b&&c.forEach(b)}}has(a){return this._groups.has(this._ensureGroupKey(a))}remove(a){if("string"!==
typeof a&&e.isIterable(a)){for(const b of a)this.remove(b);return this}if(!this.has(a))return this;this._removeAllFromGroup(this._getGroup(a));this._groups.delete(this._ensureGroupKey(a));return this}removeAll(){this._groups.forEach(a=>this._removeAllFromGroup(a));this._groups.clear();return this}_isHandle(a){return a&&(!!a.remove||a instanceof d)}_getOrCreateGroup(a){if(this.has(a))return this._getGroup(a);const b=[];this._groups.set(this._ensureGroupKey(a),b);return b}_getGroup(a){return this._groups.get(this._ensureGroupKey(a))}_ensureGroupKey(a){return a||
"_default_"}_removeAllFromGroup(a){for(const b of a)b instanceof d?b.removeAll():b.remove()}}return d});