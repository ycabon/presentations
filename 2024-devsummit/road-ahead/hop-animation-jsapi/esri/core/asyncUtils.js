// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../chunks/tslib.es6 ./Accessor ./maybe ./promiseUtils ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,f,t,p,k,g,u){function l(a){return{ok:!0,value:a}}function m(a){return{ok:!1,error:a}}function q(a){return null!=a&&!0===a.ok?a.value:null}function r(a){return null!=a&&!1===a.ok?a.error:null}let e=class extends t{get value(){return q(this._result)}get error(){return r(this._result)}get finished(){return null!=this._result}constructor(a,
b){super({});this._abortHandle=this._result=null;this.remove=this.abort=()=>{this._abortController=p.abortMaybe(this._abortController)};this._abortController=new AbortController;const {signal:h}=this._abortController;this.promise=a(h);this.promise.then(d=>{this._result=l(d);this._cleanup()},d=>{this._result=m(d);this._cleanup()});this._abortHandle=k.onAbort(b,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=p.removeMaybe(this._abortHandle);this._abortController=
null}};f.__decorate([g.property()],e.prototype,"value",null);f.__decorate([g.property()],e.prototype,"error",null);f.__decorate([g.property()],e.prototype,"finished",null);f.__decorate([g.property()],e.prototype,"promise",void 0);f.__decorate([g.property()],e.prototype,"_result",void 0);e=f.__decorate([u.subclass("esri.core.asyncUtils.ReactiveTask")],e);c.assertResult=function(a){if(!0===a.ok)return a.value;throw a.error;};c.createTask=function(a,b){return new e(a,b)};c.forEach=function(a,b,h){return k.eachAlways(a.map((d,
n)=>b.apply(h,[d,n])))};c.makeResultError=m;c.makeResultOk=l;c.map=async function(a,b,h){return(await k.eachAlways(a.map((d,n)=>b.apply(h,[d,n])))).map(d=>d.value)};c.result=async function(a){if(null==a)return{ok:!1,error:Error("no promise provided")};try{return l(await a)}catch(b){return m(b)}};c.resultError=r;c.resultOrAbort=async function(a){try{return l(await a)}catch(b){return k.throwIfAbortError(b),m(b)}};c.resultValue=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});