// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(h,g,l,e){function k(a){a=a.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let b="";const c=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const f of a.match(c)||[])switch(f){case "D":b+="d";break;case "DD":b+="dd";break;case "DDD":b+="o";break;case "d":b+=
"c";break;case "ddd":b+="ccc";break;case "dddd":b+="cccc";break;case "M":b+="L";break;case "MM":b+="LL";break;case "MMM":b+="LLL";break;case "MMMM":b+="LLLL";break;case "YY":b+="yy";break;case "Y":case "YYYY":b+="yyyy";break;case "Q":b+="q";break;case "X":case "x":b+=f;break;default:b=2<=f.length&&"["===f.slice(0,1)&&"]"===f.slice(-1)?b+`'${f.slice(1,-1)}'`:b+`'${f}'`}return b}class d{constructor(a,b,c){this._year=a;this._month=b;this._day=c;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-
1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(a){return a instanceof d&&a.day===this.day&&a.month===this.month&&a.year===this.year}clone(){return new d(this._year,this._month,this._day)}toDateTime(a){return e.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(a)})}toDateTimeLuxon(a){return e.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(a)})}toString(){return`${this.year.toString().padStart(4,
"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(a=null){if(null===a||""===a)return this.toString();a=k(a);if(!a)return"";const b=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(b).toFormat(a,{locale:l.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const a=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(a)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(a,b){return d.fromDateTime(this.toUTCDateTime().plus({[a]:b}))}toUTCDateTime(){return e.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(a,b){switch(b.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(a.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(a.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===b?this.toUTCDateTime().diff(a.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(a.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(a.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(a.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(a.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(a.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(a.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(a){a=e.DateTime.fromMillis(a,{zone:e.FixedOffsetZone.utcInstance});return a.isValid?d.fromParts(a.year,a.month,a.day):null}static fromSeconds(a){a=e.DateTime.fromSeconds(a,{zone:e.FixedOffsetZone.utcInstance});return a.isValid?d.fromParts(a.year,a.month,a.day):null}static fromReader(a){if(!a)return null;a=a.split("-");return 3!==a.length?null:new d(parseInt(a[0],10),parseInt(a[1],
10),parseInt(a[2],10))}static fromParts(a,b,c){a=new d(a,b,c);return!1===a.isValid?null:a}static fromDateJS(a){return d.fromParts(a.getFullYear(),a.getMonth()+1,a.getDay())}static fromDateTime(a){return d.fromParts(a.year,a.month,a.day)}static fromSqlTimeStampOffset(a){return this.fromDateTime(a.toDateTime())}static fromString(a,b=null){if(""===a||null===a)return null;var c=[];if(b)(b=k(b))&&c.push(b);else if(null===b||""===b)return a=e.DateTime.fromISO(a,{setZone:!0}),a.isValid?d.fromParts(a.year,
a.month,a.day):null;for(const f of c)if(c=e.DateTime.fromFormat(a,b??f),c.isValid)return new d(c.year,c.month,c.day);return null}static fromNow(a="system"){a=e.DateTime.fromJSDate(new Date).setZone(g.createDateTimeZone(a));return new d(a.year,a.month,a.day)}}h.DateOnly=d;h.standardizeDateOnlyFormat=k;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});