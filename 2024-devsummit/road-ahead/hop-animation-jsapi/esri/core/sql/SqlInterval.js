// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../arcade/featureset/support/errorsupport"],function(h,b){class f{constructor(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(a){if(null!==a.precision||null!==a.secondary)throw new b.SqlError(b.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(a,c){c.includes(".")?(c=c.split("."),a.second=parseFloat(c[0]),a.millis=parseInt(c[1],10)):a.second=parseFloat(c)}static createFromMilliseconds(a){const c=
new f;c.second=a/1E3;return c}static createFromValueAndQualifier(a,c,g){let e=null;const d=new f;d.op="-"===g?"-":"+";if("interval-period"===c.type){f._fixDefaults(c);g=RegExp("^[0-9]{1,}$");if("year"===c.period||"month"===c.period)throw new b.SqlError(b.SqlErrorCodes.YearMonthIntervals);if("second"===c.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(a))f._parseSecondsComponent(d,a);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);else if(g.test(a))d[c.period]=parseFloat(a);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);
}else{f._fixDefaults(c.start);f._fixDefaults(c.end);if("year"===c.start.period||"month"===c.start.period||"year"===c.end.period||"month"===c.end.period)throw new b.SqlError(b.SqlErrorCodes.YearMonthIntervals);switch(c.start.period){case "day":switch(c.end.period){case "hour":e=RegExp("^[0-9]{1,} [0-9]{1,}$");if(e.test(a))d[c.start.period]=parseFloat(a.split(" ")[0]),d[c.end.period]=parseFloat(a.split(" ")[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;case "minute":e=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");
if(e.test(a))d[c.start.period]=parseFloat(a.split(" ")[0]),a=a.split(" ")[1].split(":"),d.hour=parseFloat(a[0]),d.minute=parseFloat(a[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;case "second":e=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(a))d[c.start.period]=parseFloat(a.split(" ")[0]),a=a.split(" ")[1].split(":"),d.hour=parseFloat(a[0]),d.minute=parseFloat(a[1]),f._parseSecondsComponent(d,a[2]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);
break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);}break;case "hour":switch(c.end.period){case "minute":e=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(e.test(a))d.hour=parseFloat(a.split(":")[0]),d.minute=parseFloat(a.split(":")[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;case "second":e=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(a))a=a.split(":"),d.hour=parseFloat(a[0]),d.minute=parseFloat(a[1]),f._parseSecondsComponent(d,a[2]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);
break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);}break;case "minute":switch(c.end.period){case "second":e=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(a))a=a.split(":"),d.minute=parseFloat(a[0]),f._parseSecondsComponent(d,a[1]);else throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);}break;default:throw new b.SqlError(b.SqlErrorCodes.IllegalInterval);}}return d}valueInMilliseconds(){return("-"===
this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}h.SqlInterval=f;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});