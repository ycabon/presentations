// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../Error"],function(k,l){k.execute=function(f,c){let a=c.responseType;a?"array-buffer"!==a&&"blob"!==a&&"json"!==a&&"native"!==a&&"native-request-init"!==a&&"text"!==a&&(a="text"):a="json";c.responseType=a;const m=c.signal;delete c.signal;return globalThis.invokeStaticMessage("request",{url:f,options:c},{signal:m}).then(async b=>{let e,g,h;if(b.data)if(b.data instanceof ArrayBuffer){if("json"===a||"text"===a||"blob"===a){var d=new Blob([b.data]);if("json"===a||"text"===a)if(h=await d.text(),
"json"===a){try{e=JSON.parse(h||null)}catch(n){throw new l("request:server",n.message,{...n,url:f,requestOptions:c});}if(e.error)throw new l("request:server",e.error.message,{...e.error,url:f,requestOptions:c});}}}else"native"===a&&(b.data.signal=m,g=await fetch(b.data.url,b.data),b.httpStatus=g.status);switch(a){case "blob":break;case "json":d=e;break;case "native":d=g;break;case "text":d=h;break;default:d=b.data}return{data:d,httpStatus:b.httpStatus,requestOptions:c,ssl:b.ssl,url:f}})};Object.defineProperty(k,
Symbol.toStringTag,{value:"Module"})});