// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../Indices"],function(E,H,B){let k=null;E.deduplicate=function(b,c,a){var r=Array.isArray(b),f=r?b.length/c:b.byteLength/(4*c),n=r?b:new Uint32Array(b,0,f*c),l=a?.minReduction??0;const C=(b=a?.originalIndices||null)?b.length:0;var e=a?.componentOffsets||null;a=0;if(e)for(var d=0;d<e.length-1;d++){var v=e[d+1]-e[d];v>a&&(a=v)}else a=f;var p=Math.floor(1.1*a)+1;if(null==k||k.length<2*p)k=new Uint32Array(H.nextHighestPowerOfTwo(2*p));for(a=0;a<2*p;a++)k[a]=
0;a=0;const y=(v=!!e&&!!b)?C:f;d=B.newIndexArray(f);var x=new Uint32Array(C),t=0!==l?Math.ceil(7.84*1.96/(l*l)*l*(1-l)):y,q=1,h=e?e[1]:y;for(let u=0;u<y;u++){if(u===t){var w=1-a/u;if(w+1.96*Math.sqrt(w*(1-w)/u)<l)return null;t*=2}if(u===h){for(h=0;h<2*p;h++)k[h]=0;if(b)for(h=e[q-1];h<e[q];h++)x[h]=d[b[h]];h=e[++q]}w=v?b[u]:u;const F=w*c;var m=0;for(var g=0;g<c;g++)m=n[F+g]+m|0,m=m+(m<<11)+(m>>>2)|0;m>>>=0;g=m%p;let D=a;for(;0!==k[2*g+1];){if(k[2*g]===m){const G=k[2*g+1]-1;var z=G*c;a:{for(let A=0;A<
c;A++)if(n[F+A]!==n[z+A]){z=!1;break a}z=!0}if(z){D=d[G];break}}g++;g>=p&&(g-=p)}D===a&&(k[2*g]=m,k[2*g+1]=w+1,a++);d[w]=D}if(0!==l&&1-a/f<l)return null;if(v){for(f=e[q-1];f<x.length;f++)x[f]=d[b[f]];d=B.compactIndices(x)}r=r?Array(a):new Uint32Array(a*c);a=0;for(t=0;t<y;t++)if(d[t]===a){f=n;l=(v?b[t]:t)*c;e=r;p=a*c;x=c;for(q=0;q<x;q++)e[p+q]=f[l+q];a++}if(b&&!v){c=new Uint32Array(C);for(n=0;n<c.length;n++)c[n]=d[b[n]];d=B.compactIndices(c)}return{buffer:Array.isArray(r)?r:r.buffer,indices:d,uniqueCount:a}};
Object.defineProperty(E,Symbol.toStringTag,{value:"Module"})});