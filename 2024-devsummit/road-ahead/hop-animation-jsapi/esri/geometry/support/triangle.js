// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../core/ObjectStack ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ./lineSegment ./vectorStacks".split(" "),function(h,E,d,p,q,m){function y(a){return a?{p0:p.clone(a.p0),p1:p.clone(a.p1),p2:p.clone(a.p2)}:{p0:p.create(),p1:p.create(),p2:p.create()}}function F(a,b,e,c=y()){d.copy(c.p0,a);d.copy(c.p1,b);d.copy(c.p2,e);return c}function G(a,b,e){return.5*Math.abs((b[0]-a[0])*(e[1]-a[1])-(b[1]-a[1])*(e[0]-a[0]))}const z=new E.ObjectStack(q.create),J=new E.ObjectStack(()=>
y()),A=p.create(),H=p.create();h.area2d=function(a){return G(a.p0,a.p1,a.p2)};h.areaPoints2d=G;h.areaPoints3d=function(a,b,e){d.subtract(A,b,a);d.subtract(H,e,a);return.5*d.length(d.cross(A,A,H))};h.copy=function(a,b=y()){return F(a.p0,a.p1,a.p2,b)};h.create=y;h.distance2=function(a,b){var e=a.p0,c=a.p1;a=a.p2;const n=d.subtract(m.sv3d.get(),c,e),g=d.subtract(m.sv3d.get(),a,c),r=d.subtract(m.sv3d.get(),e,a),u=d.subtract(m.sv3d.get(),b,e);var k=d.subtract(m.sv3d.get(),b,c),l=d.subtract(m.sv3d.get(),
b,a);const f=d.cross(n,n,r),w=d.dot(d.cross(m.sv3d.get(),n,f),u);k=d.dot(d.cross(m.sv3d.get(),g,f),k);l=d.dot(d.cross(m.sv3d.get(),r,f),l);if(0<w&&0<k&&0<l)return b=d.dot(f,u),b*b/d.dot(f,f);e=q.distance2(q.fromValues(e,n,z.get()),b);c=q.distance2(q.fromValues(c,g,z.get()),b);b=q.distance2(q.fromValues(a,r,z.get()),b);return Math.min(e,c,b)};h.fromValues=F;h.intersectRay=function(a,b,e){const {direction:c,origin:n}=b,{p0:g,p1:r,p2:u}=a;var k=r[0]-g[0],l=r[1]-g[1],f=r[2]-g[2];a=u[0]-g[0];b=u[1]-g[1];
const w=u[2]-g[2];var v=c[1]*w-b*c[2],x=c[2]*a-w*c[0];const I=c[0]*b-a*c[1];var t=k*v+l*x+f*I;if(-1E-5<t&&1E-5>t)return!1;t=1/t;const B=n[0]-g[0],C=n[1]-g[1],D=n[2]-g[2];v=t*(B*v+C*x+D*I);if(0>v||1<v)return!1;x=C*f-l*D;f=D*k-f*B;k=B*l-k*C;l=t*(c[0]*x+c[1]*f+c[2]*k);if(0>l||1<v+l)return!1;e&&(d.scale(e,c,t*(a*x+b*f+w*k)),d.add(e,n,e));return!0};h.wrap=function(a,b,e){const c=J.get();c.p0=a;c.p1=b;c.p2=e;return c};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});