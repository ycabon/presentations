// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../Graphic ../../rasterRenderers ../../request ../../core/deprecate ../../core/Error ../../core/lang ../../core/Logger ../../core/reactiveUtils ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/spatialReferenceUtils ../support/commonProperties ../support/DimensionalDefinition ../support/ExportImageServiceParameters ../support/Field ../support/FieldsIndex ../support/imageBitmapUtils ../support/imageryRendererUtils ../support/MosaicRule ../support/MultidimensionalSubset ../support/PixelBlock ../support/rasterEnums ../support/RasterFunction ../support/RasterInfo ../support/RasterJobHandler ../support/rasterDatasets/multidimensionalUtils ../support/rasterFormats/RasterCodec ../support/rasterFunctions/vectorFieldUtils ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../core/has ../support/source/DataLayerSource ../../rest/query/executeQueryJSON ../../config ../../kernel ../../core/unitUtils ../../geometry/ellipsoidUtils ../../geometry/support/aaBoundingBox ../../core/mathUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/normalizeUtilsCommon ../../geometry/SpatialReference ../../geometry/support/Ellipsoid ../../core/pbf ../../rest/support/FeatureSet ../../rest/support/Query ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../../rest/query/executeForCount ../../rest/query/executeForIds ../../rest/support/RelationshipQuery ../../rest/support/TopFeaturesQuery ../../rest/imageService/fetchRasterInfo ../../rest/imageService/getCatalogItemRasterInfo ../../rest/support/FindImagesParameters ../../rest/support/ImageAngleParameters ../../rest/support/ImageAreaParameters ../../rest/support/ImageBoundaryParameters ../../rest/support/ImageDistanceParameters ../../rest/support/ImageGPSInfoParameters ../../rest/support/ImageHeightParameters ../../rest/support/ImageHistogramParameters ../../rest/support/ImageIdentifyParameters ../../rest/support/ImagePixelLocationParameters ../../rest/support/ImagePointParameters ../../rest/support/ImageSampleParameters ../../rest/support/ImageToMapMultirayParameters ../../rest/support/ImageToMapParameters ../../rest/support/ImageUrlParameters ../../rest/support/MapToImageParameters ../../rest/support/MeasureFromImageParameters ../../views/2d/engine/flow/dataUtils".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l,p,c,u,y,v,a,e,g,n,b,k,x,E,r,A,w,q,G,B,K,C,D,N,R,I,P,O,S,W,X,ba,Z,ca,aa,ea,ha,fa,ja,ia,na,qa,ta,wa,ya,xa,Ba,sa,Ca,Ga,mb,nb,Ka,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,La,Na,Za,$a,ab,bb,cb,db,eb,Oa,fb){function gb(la){return la?(la=JSON.stringify(la).match(/"rasterFunction":"(.*?")/gi)?.map(Aa=>Aa.replace('"rasterFunction":"',"").replace('"',"")))?la.join("/"):null:null}const hb=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),ib=h.ensureRange(l.ensureNumber,
{min:0,max:255});d.ArcGISImageService=la=>{function Aa(H){return H?.path??""}la=class extends la{constructor(){super(...arguments);this._functionRasterInfos={};this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};this._serviceSupportsMosaicRule=this._cachedRendererJson=null;this._rasterAttributeTableFieldPrefix="Raster.";this.adjustAspectRatio=null;this.bandIds=void 0;this.capabilities=null;this.compressionQuality=void 0;this.compressionTolerance=.01;this.fullExtent=this.fields=
this.rasterInfo=this.exportImageServiceParameters=this.definitionExpression=this.defaultMosaicRule=this.copyright=null;this.hasMultidimensions=!1;this.imageMaxWidth=this.imageMaxHeight=4100;this.interpolation=void 0;this.maxScale=this.minScale=0;this.noData=this.multidimensionalSubset=this.multidimensionalInfo=null;this.noDataInterpretation=void 0;this.objectIdField=null;this.geometryType="polygon";this.typeIdField=null;this.types=[];this.pixelFilter=null;this.raster=void 0;this.sourceType=null;this.viewId=
void 0;this.url=this.sourceJSON=this.serviceRasterInfo=this.pixelType=this.spatialReference=this.serviceDataType=this.rasterFunctionInfos=this.symbolizer=null;this.version=void 0}initialize(){this._set("exportImageServiceParameters",new e.ExportImageServiceParameters({layer:this}))}readServiceSupportsMosaicRule(H,U){return this._isMosaicRuleSupported(U)}get _rasterFunctionNamesIndex(){const H=new Map;if(!this.rasterFunctionInfos||null!=this.rasterFunctionInfos&&1>this.rasterFunctionInfos.length)return H;
null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.forEach(U=>{H.set(U.name.toLowerCase().replaceAll(/ /gi,"_"),U.name)});return H}readBandIds(H,U){if(Array.isArray(H)&&0<H.length&&H.every(Y=>"number"===typeof Y))return H}readCapabilities(H,U){return this._readCapabilities(U)}writeCompressionQuality(H,U,Y){null!=H&&"lerc"!==this.format&&(U[Y]=H)}writeCompressionTolerance(H,U,Y){"lerc"===this.format&&null!=H&&(U[Y]=H)}readDefaultMosaicRule(H,U){return this._serviceSupportsMosaicRule?x.fromJSON(U):
null}get fieldsIndex(){return this.fields?new n(this.fields):null}set format(H){H&&hb.has(H.toLowerCase())&&this._set("format",H.toLowerCase())}readFormat(H,U){return"esriImageServiceDataTypeVector-UV"===U.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===U.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"}readMinScale(H,U){return null!=U.minLOD&&null!=U.maxLOD?H:0}readMaxScale(H,U){return null!=U.minLOD&&null!=U.maxLOD?H:0}set mosaicRule(H){H?.mosaicMethod&&(H=x.fromJSON({...H.toJSON(),
mosaicMethod:H.mosaicMethod,mosaicOperation:H.mosaicOperation}));this._set("mosaicRule",H)}readMosaicRule(H,U){return(H=H||U.mosaicRule)?x.fromJSON(H):this._isMosaicRuleSupported(U)?x.fromJSON(U):null}writeMosaicRule(H,U,Y){H=this.mosaicRule;const da=this.definitionExpression;H?da&&da!==H.where&&(H=H.clone(),H.where=da):da&&(H=new x({where:da}));this._isValidCustomizedMosaicRule(H)&&(U[Y]=H.toJSON())}writeNoData(H,U,Y){null!=H&&"number"===typeof H&&(U[Y]=ib(H))}readObjectIdField(H,U){H||=U.fields.find(Y=>
"esriFieldTypeOID"===Y.type||"oid"===Y.type)?.name;return H}get parsedUrl(){return f.urlToObject(this.url)}readSourceType(H,U){return this._isMosaicDataset(U)?"mosaic-dataset":"raster-dataset"}set renderer(H){this.loaded&&(H=this._configRenderer(H));this._set("renderer",H)}readRenderer(H,U,Y){H=U?.layerDefinition?.drawingInfo?.renderer;Y=t.read(H,Y);if(null==Y)return null;"vector-field"===Y.type&&U.symbolTileSize&&!H.symbolTileSize&&(Y.symbolTileSize=U.symbolTileSize);k.isSupportedRendererType(Y)||
M.getLogger(this).warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return Y}writeRenderer(H,U,Y){U.layerDefinition=U.layerDefinition||{};U.layerDefinition.drawingInfo=U.layerDefinition.drawingInfo||{};U.layerDefinition.drawingInfo.renderer=H.toJSON();"vector-field"===H.type&&(U.symbolTileSize=H.symbolTileSize)}get rasterFields(){const H=this._rasterAttributeTableFieldPrefix;var U=new g({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,
type:"string"});const Y=new g({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),da=new g({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ma=this.fields?T.clone(this.fields):[];ma.push(Y);this.capabilities?.operations.supportsQuery&&this.fields&&0<this.fields.length&&ma.push(U);10.4<=this.version&&null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.some(ka=>"none"===
ka.name.toLowerCase())&&ma.push(da);null!=this.rasterFunctionInfos&&this.rasterFunctionInfos.filter(ka=>"none"!==ka.name.toLowerCase()).forEach(ka=>{ma.push(new g({name:"Raster.ServicePixelValue."+ka.name,alias:ka.name,domain:null,editable:!1,length:50,type:"string"}))});this._isVectorDataSet()&&(ma.push(new g({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ma.push(new g({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));({attributeTable:U}=
this.rasterInfo??{});null!=U&&(U=U.fields.filter(ka=>"esriFieldTypeOID"!==ka.type&&"value"!==ka.name.toLowerCase()).map(ka=>{const ra=T.clone(ka);ra.name=H+ka.name;return ra}),ma=ma.concat(U));return ma}get renderingRule(){Q.deprecatedProperty(M.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this.rasterFunction}set renderingRule(H){Q.deprecatedProperty(M.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",
H)}set rasterFunction(H){H?.rasterFunction&&(H=w.fromJSON({...H.toJSON(),rasterFunction:H.rasterFunction,rasterFunctionArguments:H.rasterFunctionArguments}));this._set("rasterFunction",H)}readRasterFunction(H,U){H=U.rasterFunctionInfos;return U.renderingRule||H?.length&&"None"!==H[0].name?this._isRFTJson(U.renderingRule)?w.fromJSON({rasterFunctionDefinition:U.renderingRule}):w.fromJSON(U.renderingRule||{rasterFunctionInfos:U.rasterFunctionInfos}):null}readSpatialReference(H,U){return(H=H||U.extent.spatialReference)?
qa.fromJSON(H):null}readPixelType(H){return A.pixelTypeKebabDict.fromJSON(H)||H}writePixelType(H,U,Y){if(null==this.serviceRasterInfo||this.pixelType!==this.serviceRasterInfo.pixelType)U[Y]=A.pixelTypeKebabDict.toJSON(H)}readVersion(H,U){(H=U.currentVersion)||(H=U.hasOwnProperty("fields")||U.hasOwnProperty("timeInfo")?10:9.3);return H}applyFilter(H){let U=H;this.pixelFilter&&(U=this._clonePixelData(H),this.pixelFilter(U));return U}async applyRenderer(H,U){var Y=H;const {renderer:da,symbolizer:ma,
pixelFilter:ka,bandIds:ra}=this;if(!this._isPicture()&&da&&ma&&!ka){Y=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(da.toJSON());const oa=this._rasterJobHandler.instance;oa?(Y&&(ma.bind(),await oa.updateSymbolizer(ma,U),this._cachedRendererJson=da.toJSON()),U=await oa.symbolize({bandIds:ra,...H},U),Y={extent:H.extent,pixelBlock:U}):Y={extent:H.extent,pixelBlock:ma.symbolize({bandIds:ra,...H})}}return Y}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--;
0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()}async computeAngles(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputeAngles)throw new L("imagery-layer:compute-angles","this operation is not supported on the input image service");H=l.ensureClass(Ta,H).clone();return R.computeAngles(this.url,H,this._getRequestOptions(U))}async computePixelSpaceLocations(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputePixelLocation)throw new L("imagery-layer:compute-pixel-space-locations",
"this operation is not supported on the input image service");H=l.ensureClass(Za,H).clone();return R.computePixelSpaceLocations(this.url,H,this._getRequestOptions(U))}async computeHistograms(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputeHistograms)throw new L("imagery-layer:compute-histograms","this operation is not supported on the input image service");H=l.ensureClass(La,H).clone();this._applyMosaicAndRenderingRules(H);return R.computeHistograms(this.url,H,this._getRequestOptions(U))}async computeStatisticsHistograms(H,
U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsComputeStatisticsHistograms)throw new L("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");H=l.ensureClass(La,H).clone();this._applyMosaicAndRenderingRules(H);return R.computeStatisticsHistograms(this.url,H,this._getRequestOptions(U))}async measureHeight(H,U){const Y=await this._fetchCapabilities(U?.signal);if(!("base-and-top"===H.operationType?Y.mensuration.supportsHeightFromBaseAndTop:
"base-and-top-shadow"===H.operationType?Y.mensuration.supportsHeightFromBaseAndTopShadow:Y.mensuration.supportsHeightFromTopAndTopShadow))throw new L("imagery-layer:measure-height","this operation is not supported on the input image service");H=l.ensureClass(Ya,H).clone();this._applyMosaicAndRenderingRules(H);return R.measureHeight(this.url,H,this._getRequestOptions(U))}async measureAreaAndPerimeter(H,U){const Y=await this._fetchCapabilities(U?.signal);if(!Y.mensuration.supportsAreaAndPerimeter||
H.is3D&&!Y.mensuration.supports3D)throw new L("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");H=l.ensureClass(Ua,H).clone();this._applyMosaicAndRenderingRules(H);return R.measureAreaAndPerimeter(this.url,H,this._getRequestOptions(U))}async measureDistanceAndAngle(H,U){const Y=await this._fetchCapabilities(U?.signal);if(!Y.mensuration.supportsDistanceAndAngle||H.is3D&&!Y.mensuration.supports3D)throw new L("imagery-layer:measure-distance-and-angle",
"this operation is not supported on the input image service");H=l.ensureClass(Wa,H).clone();this._applyMosaicAndRenderingRules(H);return R.measureDistanceAndAngle(this.url,H,this._getRequestOptions(U))}async measurePointOrCentroid(H,U){const Y=await this._fetchCapabilities(U?.signal);if(!Y.mensuration.supportsPointOrCentroid||H.is3D&&!Y.mensuration.supports3D)throw new L("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");H=l.ensureClass($a,H).clone();
this._applyMosaicAndRenderingRules(H);return R.measurePointOrCentroid(this.url,H,this._getRequestOptions(U))}async measureLengthFromImage(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsMeasureFromImage)throw new L("imagery-layer:measure-length-from-image","this operation is not supported on the input image service");if("polyline"!==H.geometry.type)throw new L("imagery-layer:measure-length-from-image","this input geometry must be a polyline");H=l.ensureClass(Oa,H).clone();return R.measureLengthFromImage(this.url,
H,this._getRequestOptions(U))}async measureAreaFromImage(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsMeasureFromImage)throw new L("imagery-layer:measure-area-from-image","this operation is not supported on the input image service");if("polygon"!==H.geometry.type)throw new L("imagery-layer:measure-area-from-image","this input geometry must be a polygon");H=l.ensureClass(Oa,H).clone();return R.measureAreaFromImage(this.url,H,this._getRequestOptions(U))}getField(H){const {fieldsIndex:U}=
this;return null!=U?U.get(H):void 0}getFieldDomain(H,U){return(H=this.getField(H))?H.domain:null}async fetchImage(H,U,Y,da={}){if(null==H||null==U||null==Y)throw new L("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){var ma=await this._generateRasterInfo(this.rasterFunction,{signal:da.signal});ma&&(this.rasterInfo=ma)}ma=this.getExportImageServiceParameters(H,U,Y,da.timeExtent);
if(null==ma){if(da.requestAsImageElement&&this._canRequestImageElement(this.format))return H=document.createElement("canvas"),H.width=U,H.height=Y,da.returnImageBitmap?{imageBitmap:await b.createBitmap(H,`${Aa(this.parsedUrl)}/exportImage`,da.signal)}:{imageOrCanvasElement:H};const {bandIds:ra,rasterInfo:oa}=this;da=(ra?.length||oa.bandCount)??0;ma=U*Y;var ka=oa.pixelType;const ua=[];for(let pa=0;pa<da;pa++)ua.push(r.createEmptyBand(ka,ma));return{pixelData:{pixelBlock:new r({width:U,height:Y,pixels:ua,
mask:new Uint8Array(ma),pixelType:ka}),extent:H}}}ka=!!da.requestAsImageElement&&!this.pixelFilter;return this._requestArrayBuffer({imageServiceParameters:ma,imageProps:{extent:H,width:U,height:Y,format:this.format},requestAsImageElement:ka,returnImageBitmap:ka&&!!da.returnImageBitmap,signal:da.signal})}fetchKeyProperties(H){return J(Aa(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version?H?.rasterFunction:null})}).then(U=>U.data)}fetchRasterAttributeTable(H){return 10.1>
this.version?Promise.reject(new L("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):J(Aa(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version?H?.rasterFunction:null})}).then(U=>ya.fromJSON(U.data))}getCatalogItemRasterInfo(H,U){const Y=this._getQueryParams();U={...U,query:Y};return Ra.getCatalogItemRasterInfo(Aa(this.parsedUrl),H,U)}async getCatalogItemICSInfo(H,U){var {data:Y}=await J(Aa(this.parsedUrl)+"/"+H+"/info/ics",{query:this._getQueryParams(),
...U});if(Y=Y?.ics){var da=null;try{da=(await J(Aa(this.parsedUrl)+"/"+H+"/info",{query:this._getQueryParams(),...U})).data.extent}catch{}if(!da||!da.spatialReference)return{ics:Y,icsToPixelTransform:null,icsExtent:null,northDirection:null};var ma=10.7<=this.version?J(Aa(this.parsedUrl)+"/"+H+"/info/icstopixel",{query:this._getQueryParams(),...U}).then(va=>va.data).catch(()=>({})):{},ka=da.spatialReference,ra={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[da]}),inSR:y.srToRESTValue(ka),
outSR:"0:"+H};ra=J(Aa(this.parsedUrl)+"/project",{query:this._getQueryParams(ra),...U}).then(va=>va.data).catch(()=>({}));var oa=(da.xmin+da.xmax)/2,ua=(da.ymax-da.ymin)/6;da=da.ymin+ua;var pa=[];for(let va=0;5>va;va++)pa.push({x:oa,y:da+ua*va});H={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:pa}),inSR:y.srToRESTValue(ka),outSR:"0:"+H};U=J(Aa(this.parsedUrl)+"/project",{query:this._getQueryParams(H),...U}).then(va=>va.data).catch(()=>({}));H=await Promise.all([ma,ra,U]);
U=H[0].ipxf;null==U&&(ma=Y.geodataXform?.xf_0,"topup"===ma?.name?.toLowerCase()&&6===ma?.coefficients?.length&&(U={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:ma.coefficients,cellsizeRatio:0,type:"GeometricXform"}}));if(ma=aa.fromJSON(H[1]?.geometries?.[0]))ma.spatialReference=new qa({wkid:0,imageCoordinateSystem:Y});H=H[2].geometries?H[2].geometries.filter(va=>null!=va?.x&&null!=va.y&&"NaN"!==va.x&&"NaN"!==va.y):[];ra=H.length;if(3>ra)return{ics:Y,icsToPixelTransform:U,
icsExtent:ma,northDirection:null};da=ua=oa=ka=0;for(pa=0;pa<ra;pa++)ka+=H[pa].x,oa+=H[pa].y,ua+=H[pa].x*H[pa].x,da+=H[pa].x*H[pa].y;ra=(ra*da-ka*oa)/(ra*ua-ka*ka);ka=0;oa=H[4].x>H[0].x;H=H[4].y>H[0].y;Infinity===ra?ka=H?90:270:0===ra?ka=oa?0:180:0<ra?ka=oa?180*Math.atan(ra)/Math.PI:180*Math.atan(ra)/Math.PI+180:0>ra&&(ka=H?180+180*Math.atan(ra)/Math.PI:360+180*Math.atan(ra)/Math.PI);return{ics:Y,icsToPixelTransform:U,icsExtent:ma,northDirection:ka}}}async generateRasterInfo(H,U){H=l.ensureClass(w,
H);if(this.serviceRasterInfo&&(!H||"none"===H.functionName?.toLowerCase()||this._isVectorFieldResampleFunction(H)))return this.serviceRasterInfo;const Y=gb(H);if(!Y)throw new L("imagery-layer:generate-raster-info","the rendering rule is not supported");if(this._functionRasterInfos[Y])return this._functionRasterInfos[Y];const da=this._getQueryParams();U={...U,query:da};H=Ka.generateRasterInfo(Aa(this.parsedUrl),H,U);this._functionRasterInfos[Y]=H;try{return await H}catch(ma){throw this._functionRasterInfos[Y]=
null,ma;}}getExportImageServiceParameters(H,U,Y,da){H=H.clone().shiftCentralMeridian();const ma=R.getImageSpatialReferenceQueryParameter(H.spatialReference,Aa(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const ka=this.exportImageServiceParameters.toJSON(),{bandIds:ra,noData:oa}=ka;var {renderingRule:ua}=ka,pa=this.rasterFunction?.rasterFunctionDefinition,va=!this.renderer||"raster-stretch"===this.renderer.type;ra?.length&&
this._hasRasterFunction(this.rasterFunction)&&!pa&&va?(pa={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:ra}},"Stretch"===ua.rasterFunction?(pa.rasterFunctionArguments.Raster=ua.rasterFunctionArguments.Raster,ua.rasterFunctionArguments.Raster=pa):"Colormap"===ua.rasterFunction?(va=ua.rasterFunctionArguments.Raster,"Stretch"===va?.rasterFunction?(pa.rasterFunctionArguments.Raster=va.rasterFunctionArguments.Raster,va.rasterFunctionArguments.Raster=pa):(pa.rasterFunctionArguments.Raster=
va,ua.rasterFunctionArguments.Raster=pa)):(pa.rasterFunctionArguments.Raster=ua,ua=pa),ka.bandIds=void 0):ka.bandIds=ra?.join(",");oa instanceof Array&&0<oa.length&&(ka.noData=oa.join(","));da=this._processMultidimensionalIntersection(null,da,this.exportImageServiceParameters.mosaicRule);if(da.isOutSide)return null;ka.mosaicRule=null!=da.mosaicRule?JSON.stringify(da.mosaicRule):null;da=da.timeExtent;ka.renderingRule=this._getRenderingRuleString(w.fromJSON(ua));ua={};if(null!=da){const {start:za,end:Da}=
da.toJSON();if(za&&Da&&za===Da)ua.time=""+za;else if(null!=za||null!=Da)ua.time=`${null==za?"null":za},${null==Da?"null":Da}`}return{bbox:H.xmin+","+H.ymin+","+H.xmax+","+H.ymax,bboxSR:ma,imageSR:ma,size:U+","+Y,...ka,...ua}}async getSamples(H,U){if(!(await this._fetchCapabilities(U?.signal))?.operations.supportsGetSamples)throw new L("imagery-layer:get-samples","getSamples operation is not supported on the input image service");H=l.ensureClass(ab,H).clone();const {raster:Y}=this;Y&&null==H.raster&&
(H.raster=Y);return R.getSamples(this.url,H,this._getRequestOptions(U))}async identify(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsIdentify)throw new L("imagery-layer:identify","identify operation is not supported on the input image service");H=l.ensureClass(Na,H).clone();10.91>this.version&&"extent"===H.geometry?.type&&(H.geometry=ja.fromExtent(H.geometry));const Y=this._processMultidimensionalIntersection(H.geometry,H.timeExtent,H.mosaicRule||this.mosaicRule);if(Y.isOutSide)throw new L("imagery-layer:identify",
"the request cannot be fulfilled when falling outside of the multidimensional subset");H.timeExtent=Y.timeExtent;H.mosaicRule=Y.mosaicRule;const {raster:da,rasterFunction:ma}=this;ma&&null==H.rasterFunction&&(H.rasterFunction=ma);da&&null==H.raster&&(H.raster=da);return R.identify(this.url,H,this._getRequestOptions(U))}async imageToMap(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsImageToMap)throw new L("imagery-layer:image-to-map","imageToMap operation is not supported on the input image service");
H=l.ensureClass(cb,H);return R.imageToMap(Aa(this.parsedUrl),H,this._getRequestOptions(U))}async imageToMapMultiray(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsImageToMapMultiray)throw new L("imagery-layer:image-to-map-multiray","imageToMapMultiray operation is not supported on the input image service");H=l.ensureClass(bb,H);return R.imageToMapMultiray(Aa(this.parsedUrl),H,this._getRequestOptions(U))}async mapToImage(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsMapToImage)throw new L("imagery-layer:map-to-image",
"mapToImage operation is not supported on the input image service");H=l.ensureClass(eb,H);return R.mapToImage(Aa(this.parsedUrl),H,this._getRequestOptions(U))}async findImages(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsFindImages)throw new L("imagery-layer:find-images","findImages operation is not supported on the input image service");H=l.ensureClass(Sa,H);return R.findImages(Aa(this.parsedUrl),H,this._getRequestOptions(U))}async getImageUrl(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsGetImageUrl)throw new L("imagery-layer:get-image-url",
"getImageUrl operation is not supported on the input image service");H=l.ensureClass(db,H);return R.getImageUrl(Aa(this.parsedUrl),H,this._getRequestOptions(U))}createQuery(){const H=new xa;H.outFields=["*"];H.returnGeometry=!0;H.where=this.definitionExpression||"1\x3d1";return H}async queryBoundary(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsQueryBoundary)throw new L("imagery-layer:query-boundary","queryBoundary operation is not supported on the input image service");H=
l.ensureClass(Va,H??{outSpatialReference:this.spatialReference}).clone();return R.queryBoundary(Aa(this.parsedUrl),H,this._getRequestOptions(U))}async queryRasters(H,U){({query:H,requestOptions:U}=await this._prepareForQuery(H,U));return O.executeQueryJSON(this.url,H,U)}async queryObjectIds(H,U){({query:H,requestOptions:U}=await this._prepareForQuery(H,U));return Ga.executeForIds(this.url,H,U)}async queryGPSInfo(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsQueryGPSInfo)throw new L("imagery-layer:query-gps-info",
"queryGPSInfo operation is not supported on the input image service");H=l.ensureClass(Xa,H??{outSpatialReference:this.spatialReference}).clone();return R.queryGPSInfo(Aa(this.parsedUrl),H,this._getRequestOptions(U))}async queryRasterCount(H,U){({query:H,requestOptions:U}=await this._prepareForQuery(H,U));return Ca.executeForCount(this.url,H,U)}async queryVisibleRasters(H,U){if(!H)throw new L("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const {pixelSize:Y,returnDomainValues:da,
returnTopmostRaster:ma,showNoDataRecords:ka}=U||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let ra=!1;var oa=null,ua=null;const pa=this._rasterFunctionNamesIndex;if(null!=H.outFields&&(ra=H.outFields.some(Fa=>!Fa.toLowerCase().includes("raster.servicepixelvalue")),10.4<=this.version)){ua=H.outFields.filter(Ea=>Ea.toLowerCase().includes("raster.servicepixelvalue")&&24<Ea.length).map(Ea=>{Ea=Ea.slice(25);return[this._updateRenderingRulesFunctionName(Ea,pa),Ea]});
oa=ua.map(Ea=>new w({functionName:Ea[0]}));ua=ua.map(Ea=>Ea[1]);const {rasterFunction:Fa}=this;0===oa.length?Fa?.functionName?(oa.push(Fa),ua.push(Fa.functionName)):oa=null:Fa?.functionName&&!oa.some(Ea=>Ea.functionName===Fa.functionName)&&(oa.push(Fa),ua.push(Fa.functionName))}const va=null==H.outSpatialReference||H.outSpatialReference.equals(this.spatialReference);var {multidimensionalSubset:za}=this;let Da=H.timeExtent||this.timeExtent;if(za){const {isOutside:Fa,intersection:Ea}=B.intersectMultimensionalSubset(za,
{geometry:H.geometry,timeExtent:H.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(Fa)throw new L("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");null!=Ea?.timeExtent&&(Da=Ea.timeExtent)}za=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,Da);let Ha=H.geometry;10.91>this.version&&"extent"===Ha?.type&&(Ha=ja.fromExtent(Ha));
oa=this._getQueryParams({geometry:Ha,timeExtent:Da,mosaicRule:za,rasterFunction:10.4>this.version?this.rasterFunction:null,rasterFunctions:oa,pixelSize:Y,returnCatalogItems:ra,returnGeometry:va,raster:this.raster,maxItemCount:ma?1:null});delete oa.f;oa=new Na(oa);try{await this._generateRasterInfo(this.rasterFunction);const Fa=await R.identify(this.url,oa,{signal:U?.signal,query:{...this.customParameters}}),Ea=H.outFields,jb=null!=Fa.value&&Fa.value.toLowerCase().includes("nodata");if(!ra||va||!Fa?.catalogItems?.features.length||
!ka&&jb)return this._processVisibleRastersResponse(Fa,{returnDomainValues:da,templateRRFunctionNames:ua,showNoDataRecords:ka,templateFields:Ea});const Ia=this.objectIdField||"ObjectId",Pa=Fa.catalogItems?.features??[],kb=Pa.map(Ja=>Ja.attributes?.[Ia]),lb=new xa({objectIds:kb,returnGeometry:!0,outSpatialReference:H.outSpatialReference,outFields:[Ia]}),Qa=await this.queryRasters(lb);Qa?.features?.length&&Qa.features.forEach(Ja=>{Pa.forEach(Ma=>{Ma.attributes[Ia]===Ja.attributes[Ia]&&(Ma.geometry=new ja(Ja.geometry),
null!=H.outSpatialReference&&(Ma.geometry.spatialReference=H.outSpatialReference))})});return this._processVisibleRastersResponse(Fa,{returnDomainValues:da,templateRRFunctionNames:ua,showNoDataRecords:ka,templateFields:Ea})}catch{throw new L("imagery-layer:query-visible-rasters","encountered error when querying visible rasters");}}async fetchVariableStatisticsHistograms(H,U){var Y=J(Aa(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:H}),signal:U}).then(da=>da.data?.statistics);
H=J(Aa(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:H}),signal:U}).then(da=>da.data?.histograms);Y=await Promise.all([Y,H]);Y[0]&&Y[0].forEach(da=>{da.avg=da.mean;da.stddev=da.standardDeviation});return{statistics:Y[0]||null,histograms:Y[1]||null}}async createFlowMesh(H,U){const Y=this._rasterJobHandler.instance;return Y?Y.createFlowMesh(H,U):fb.createFlowMesh(H.meshType,H.simulationSettings,H.flowData,null!=U.signal?U.signal:(new AbortController).signal)}getMultidimensionalSubsetVariables(H){return B.getSubsetVariablesFromMdInfo(this.multidimensionalSubset,
H??this.serviceRasterInfo.multidimensionalInfo)}async _fetchService(H){await this._fetchServiceInfo(H);this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const U=this.sourceJSON,Y=null!=this.serviceRasterInfo?Promise.resolve(this.serviceRasterInfo):Ka.fetchServiceRasterInfo(Aa(this.parsedUrl),U,{signal:H,query:this._getQueryParams()}).then(ma=>{this._set("serviceRasterInfo",ma);this._set("multidimensionalInfo",ma.multidimensionalInfo);Ka.patchServiceInfo(ma,U);return ma});H=this._hasRasterFunction(this.rasterFunction)?
this._generateRasterInfo(this.rasterFunction,{signal:H}):null;const da=this._getRasterFunctionInfos();return Promise.all([Y,H,da]).then(ma=>{ma[1]?this._set("rasterInfo",ma[1]):this._set("rasterInfo",ma[0]);ma[2]&&this._set("rasterFunctionInfos",ma[2]);this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),M.getLogger(this).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._set("renderer",this._configRenderer(this.renderer));
this.addHandles([V.watch(()=>this.rasterFunction,ka=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this._generateRasterInfo(ka).then(ra=>{ra&&(this.rasterInfo=ra)})})]);({serviceRasterInfo:ma}=this);null!=ma.multidimensionalInfo&&this._updateMultidimensionalDefinition(ma)})}_combineMosaicRuleWithTimeExtent(H,U){var Y=this.timeInfo,{multidimensionalInfo:da}=this.serviceRasterInfo;if(null==H||null==da||null==U||null==Y?.startField)return H;const {startField:ma}=Y,ka=da.variables.some(pa=>
pa.dimensions.some(va=>va.name===ma))?ma:"StdTime";H=H.clone();if("mosaic-dataset"===this.sourceType)return H.multidimensionalDefinition=H.multidimensionalDefinition?.filter(pa=>pa.dimensionName!==ka),this._cleanupMultidimensionalDefinition(H);H.multidimensionalDefinition=H.multidimensionalDefinition||[];Y=H.multidimensionalDefinition.filter(pa=>pa.dimensionName===ka);da=null!=U.start?U.start.getTime():null;U=null!=U.end?U.end.getTime():null;const ra=null==da||null==U||da===U,oa=ra?[da||U]:[[da,U]],
ua=10.8<=this.version;Y.length?Y.forEach(pa=>{pa.dimensionName===ka&&(ua?(pa.dimensionName=null,pa.isSlice=!1,pa.values=[]):(pa.isSlice=ra,pa.values=oa))}):ua||(U=H.multidimensionalDefinition.filter(pa=>null!=pa.variableName&&null==pa.dimensionName),U.length?U.forEach(pa=>{pa.dimensionName=ka;pa.isSlice=ra;pa.values=oa}):H.multidimensionalDefinition.push(new a({variableName:"",dimensionName:ka,isSlice:ra,values:oa})));return this._cleanupMultidimensionalDefinition(H)}_cleanupMultidimensionalDefinition(H){if(null==
H)return null;H.multidimensionalDefinition&&(H.multidimensionalDefinition=H.multidimensionalDefinition.filter(U=>!(!U.variableName&&!U.dimensionName)),0===H.multidimensionalDefinition.length&&(H.multidimensionalDefinition=null));return"mosaic-dataset"!==this.sourceType&&null==H.multidimensionalDefinition?null:H}async _prepareForQuery(H,U){if(!(await this._fetchCapabilities(U?.signal)).operations.supportsQuery)throw new L("imagery-layer:query-rasters","query operation is not supported on the input image service");
H=null!=H?l.ensureClass(xa,H):this.createQuery();U=this._getRequestOptions(U);this.raster&&(U.query={...U.query,raster:this.raster});return{query:H,requestOptions:U}}async _initJobHandler(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const H=new G;this._rasterJobHandler.connectionPromise=H.initialize().then(()=>{this._rasterJobHandler.instance=H},()=>{});await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&
this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this._cachedRendererJson=null}_isSupportedRenderer(H){const {rasterInfo:U,rasterFunction:Y}=this;return"unique-value"===H.type&&this._hasRasterFunction(Y)&&1===U?.bandCount&&["u8","s8"].includes(U.pixelType)||null!=U&&null!=H&&D.getSupportedRendererTypes(U).includes(H.type)}async _fetchCapabilities(H){if(this.capabilities)return this.capabilities;
await this._fetchServiceInfo(H);return this.capabilities}async _fetchServiceInfo(H){let U=this.sourceJSON;if(!U){const {data:Y,ssl:da}=await J(Aa(this.parsedUrl),{query:this._getQueryParams(),signal:H});this.sourceJSON=U=Y;da&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<U.capabilities?.toLowerCase().split(",").map(Y=>Y.trim()).indexOf("tilesonly"))throw new L("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(U,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(H){return H.serviceSourceType?
"esriImageServiceSourceTypeMosaicDataset"===H.serviceSourceType:0<H.fields?.length}_isMosaicRuleSupported(H){if(!H)return!1;const U=this._isMosaicDataset(H);H=10.71<=H.currentVersion&&H.hasMultidimensions&&!(1<H.fields?.length);return U||H}_isVectorFieldResampleFunction(H){if(null==H)return!1;const {functionName:U,functionArguments:Y}=H;H="resample"===U?.toLowerCase();const da=Y?.ResampleType||Y?.resampleType;return H&&(7===da||10===da)}_isPicture(){return!this.format||this.format.includes("jpg")||
this.format.includes("png")}_configRenderer(H){var U=this._isPicture();const {rasterInfo:Y}=this;if(!U&&!this.pixelFilter||this._isVectorDataSet())!this.bandIds&&3<=Y.bandCount&&(!(U=D.getDefaultBandCombination(Y))||3===Y.bandCount&&0===U[0]&&1===U[1]&&2===U[2]||(this.bandIds=U)),H||=D.createDefaultRenderer(Y,{bandIds:this.bandIds,variableName:this.rasterFunction?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}),U=D.normalizeRendererJSON(H.toJSON()),this.symbolizer?(this.symbolizer.rendererJSON=
U,this.symbolizer.rasterInfo=Y):this.symbolizer=new N({rendererJSON:U,rasterInfo:Y}),this.symbolizer.bind().success||(this.symbolizer=null);return H}_clonePixelData(H){return null==H?H:{extent:H.extent&&H.extent.clone(),pixelBlock:null!=H.pixelBlock?H.pixelBlock.clone():null}}_getQueryParams(H){null!=H?.renderingRule&&"string"!==typeof H.renderingRule&&(H.renderingRule=this._getRenderingRuleString(H.renderingRule));const {raster:U,viewId:Y}=this;return{raster:U,viewId:Y,f:"json",...H,...this.customParameters}}_getRequestOptions(H){return{...H,
query:{...H?.query,...this.customParameters}}}_decodePixelBlock(H,U,Y){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:H,options:U}):K.decode(H,U,Y)}async _getRasterFunctionInfos(H){const U=this.sourceJSON.rasterFunctionInfos;return this.loaded?U:U&&10.3<=this.version?1===U.length&&"none"===U[0].name.toLowerCase()?U:(await J(Aa(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:H})).data?.rasterFunctionInfos:null}_canRequestImageElement(H){return!this.pixelFilter&&
(!H||H.includes("png"))}async _requestArrayBuffer(H){const {imageProps:U,requestAsImageElement:Y,returnImageBitmap:da,signal:ma}=H;if(Y&&this._canRequestImageElement(U.format)){var ka=`${Aa(this.parsedUrl)}/exportImage`;({data:H}=await J(ka,{responseType:da?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...H.imageServiceParameters}),signal:ma}));return H instanceof Blob?{imageBitmap:await b.createBitmap(H,ka,ma),params:U}:{imageOrCanvasElement:H,params:U}}ka=this._initJobHandler();
H=J(Aa(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...H.imageServiceParameters}),signal:ma});H=(await Promise.all([H,ka]))[0].data;var ra=ka=U.format||"jpgpng";"bsq"!==ra&&"bip"!==ra&&(ra=K.getFormat(H));if(!ra)throw new L("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(H)));ra="gif"===ka||"bmp"===ka||ka.includes("png")&&("png"===ra||"jpg"===ra);const oa={signal:ma};return{pixelData:{pixelBlock:await (ra?
K.decode(H,{useCanvas:!0,...U},oa):this._decodePixelBlock(H,{width:U.width,height:U.height,planes:null,pixelType:null,noDataValue:null,format:ka},oa)),extent:U.extent},params:U}}_generateRasterInfo(H,U){return this.generateRasterInfo(H,U).catch(()=>null)}_isValidCustomizedMosaicRule(H){return H&&JSON.stringify(H.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(H){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)&&(H=B.getDefaultMultidimensionalDefinition(H,
{multidimensionalSubset:this.multidimensionalSubset}),null!=H&&0<H.length)){this.mosaicRule=this.mosaicRule||new x;const U=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&"none"!==this.rasterFunction.functionName?.toLowerCase()&&H.forEach(Y=>Y.variableName="");H=H.filter(({variableName:Y,dimensionName:da})=>Y&&"*"!==Y||da);!U?.length&&H.length&&(this.mosaicRule.multidimensionalDefinition=H)}}_processVisibleRastersResponse(H,U){U=U||{};const Y=
H.value,{templateRRFunctionNames:da,showNoDataRecords:ma,returnDomainValues:ka,templateFields:ra}=U;U=H.processedValues;var oa=H.catalogItems?.features;let ua=H.properties?.Values?.map(Ha=>Ha.replaceAll(/ /gi,", "))||[];var pa=this.objectIdField||"ObjectId",va="string"===typeof Y&&Y.toLowerCase().includes("nodata");H=[];!Y||oa||va||(oa={},oa[pa]=0,oa=new F(this.fullExtent,null,oa),ua=[Y],oa=[oa]);if(!oa)return[];this._updateResponseFieldNames(oa,ra);va&&!ma&&(oa=[]);for(pa=0;pa<oa.length;pa++){va=
oa[pa];if(null!=Y){var za=ua[pa];var Da=this.rasterFunction&&U&&0<U.length&&da&&0<da.length&&da.includes(this.rasterFunction.functionName)?U[da.indexOf(this.rasterFunction.functionName)]:Y;if("nodata"===za.toLowerCase()&&!ma)continue;va.attributes["Raster.ItemPixelValue"]=za;va.attributes["Raster.ServicePixelValue"]=Da;this._updateFeatureWithMagDirValues(va,za);const Ha=this.fields&&0<this.fields.length;Da=this.rasterFunction&&null!=this.serviceRasterInfo.attributeTable?Ha?za:Y:Da;this.rasterFunction||
(Da=Ha?za:Y);this._updateFeatureWithRasterAttributeTableValues(va,Da)}va.sourceLayer=va.layer=this;ka&&this._updateFeatureWithDomainValues(va);if(da&&U&&da.length===U.length)for(za=0;za<da.length;za++)va.attributes["Raster.ServicePixelValue."+da[za]]=U[za];H.push(oa[pa])}return H}_processMultidimensionalIntersection(H,U,Y){const {multidimensionalSubset:da}=this;if(!da)return Y=this._combineMosaicRuleWithTimeExtent(Y,U),{isOutSide:!1,timeExtent:U,mosaicRule:Y};if(da){const {isOutside:ma,intersection:ka}=
B.intersectMultimensionalSubset(da,{geometry:H,timeExtent:U});if(ma)return{isOutSide:!0,timeExtent:null,mosaicRule:null};null!=ka?.timeExtent&&(U=ka.timeExtent)}Y=this._combineMosaicRuleWithTimeExtent(Y,U);return Y?.multidimensionalDefinition&&({isOutside:H}=B.intersectMultimensionalSubset(da,{multidimensionalDefinition:Y.multidimensionalDefinition}),H)?{isOutSide:!0,timeExtent:null,mosaicRule:null}:{isOutSide:!1,timeExtent:U,mosaicRule:Y}}_updateFeatureWithRasterAttributeTableValues(H,U){const Y=
this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(null!=Y){var {features:da,fields:ma}=Y,ka=ma.map(oa=>oa.name).find(oa=>"value"===oa.toLowerCase());if(ka){var ra=da.filter(oa=>oa.attributes[ka]===(null!=U?parseInt(U,10):null));ra&&ra[0]&&ma.forEach(oa=>{H.attributes[this._rasterAttributeTableFieldPrefix+oa.name]=ra[0].attributes[oa.name]})}}}_updateFeatureWithMagDirValues(H,U){if(this._isVectorDataSet()){var Y=U.split(/,\s*/).map(da=>parseFloat(da));U=Y.map(da=>[da]);Y=Y.map(da=>
({minValue:da,maxValue:da,noDataValue:null}));U=new r({height:1,width:1,pixelType:"f32",pixels:U,statistics:Y});null!=this.pixelFilter&&this.pixelFilter({pixelBlock:U,extent:new aa(0,0,0,0,this.spatialReference)});U="esriImageServiceDataTypeVector-MagDir"===this.serviceDataType?[U.pixels[0][0],U.pixels[1][0]]:C.uvComponentToVector([U.pixels[0][0],U.pixels[1][0]]);H.attributes["Raster.Magnitude"]=U[0];H.attributes["Raster.Direction"]=U[1]}}_updateFeatureWithDomainValues(H){const U=this.fields&&this.fields.filter(Y=>
Y.domain&&"coded-value"===Y.domain.type);null!=U&&U.forEach(Y=>{const da=H.attributes[Y.name];if(null!=da){const ma=Y.domain.codedValues.find(ka=>ka.code===da);ma&&(H.attributes[Y.name]=ma.name)}})}_updateResponseFieldNames(H,U){if(U&&!(1>U.length)){var Y=this.fieldsIndex;null!=Y&&H.forEach(da=>{if(da?.attributes)for(const ma of U){const ka=Y.get(ma)?.name;ka&&ka!==ma&&(da.attributes[ma]=da.attributes[ka],delete da.attributes[ka])}})}}_getRenderingRuleString(H){if(H){H=H.toJSON();H=H.rasterFunctionDefinition??
H;if(H.thumbnail||H.thumbnailEx)H.thumbnail=H.thumbnailEx=null;return JSON.stringify(H)}return null}_hasRasterFunction(H){return null!=H?.functionName&&"none"!==H.functionName.toLowerCase()}_updateRenderingRulesFunctionName(H,U){if(H&&!(1>H.length)){if("Raw"===H)return H.replace("Raw","None");var Y=H.toLowerCase().replaceAll(/ /gi,"_");return U.has(Y)?U.get(Y):H}}_isRFTJson(H){return H?.name&&H.arguments&&H.function&&H.hasOwnProperty("functionType")}_isVectorDataSet(){return"esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType}_applyMosaicAndRenderingRules(H){const {raster:U,mosaicRule:Y,rasterFunction:da}=this;da&&H instanceof La&&null==H.rasterFunction&&(H.rasterFunction=da);Y&&null==H.mosaicRule&&(H.mosaicRule=Y);U&&null==H.raster&&(H.raster=U)}_readCapabilities(H){var U=H.capabilities?H.capabilities.toLowerCase().split(",").map(Da=>Da.trim()):["image","catalog"];const {currentVersion:Y,advancedQueryCapabilities:da,maxRecordCount:ma}=
H,ka=U.includes("image"),ra="esriImageServiceDataTypeElevation"===H.serviceDataType;var oa=!(!H.spatialReference&&!H.extent?.spatialReference);const ua=U.includes("edit");oa=U.includes("mensuration")&&oa;const pa=null==H.mensurationCapabilities?[]:H.mensurationCapabilities.toLowerCase().split(",").map(Da=>Da.trim()),va=oa&&pa.includes("basic"),za=this._isMosaicDataset(H)&&U.includes("catalog");U=U.includes("download");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:ka,supportsExportImage:ka,
supportsIdentify:ka,supportsImageToMap:11.2<=Y&&za,supportsImageToMapMultiray:11.2<=Y&&za,supportsMapToImage:11.2<=Y&&za,supportsFindImages:11.2<=Y&&za,supportsGetImageUrl:11.2<=Y&&U,supportsMeasure:oa,supportsMeasureFromImage:11.2<=Y,supportsDownload:U,supportsQuery:za&&H.fields&&0<H.fields.length,supportsGetSamples:10.2<=Y&&ka,supportsProject:10.3<=Y&&ka,supportsComputeStatisticsHistograms:10.4<=Y&&ka,supportsQueryBoundary:10.6<=Y&&ka,supportsCalculateVolume:10.7<=Y&&ra,supportsComputePixelLocation:10.7<=
Y&&za,supportsComputeAngles:10.91<=Y,supportsQueryGPSInfo:11.2<=Y&&za,supportsAdd:ua,supportsDelete:ua,supportsEditing:ua,supportsUpdate:ua,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:ma,maxRecordCountFactor:void 0,supportsStatistics:!!da?.supportsStatistics,
supportsOrderBy:!!da?.supportsOrderBy,supportsDistinct:!!da?.supportsDistinct,supportsPagination:!!da?.supportsPagination,supportsStandardizedQueriesOnly:!!da?.useStandardizedQueries,supportsPercentileStatistics:!!da?.supportsPercentileStatistics,supportsCentroid:!!da?.supportsReturningGeometryCentroid,supportsDistance:!!da?.supportsQueryWithDistance,supportsExtent:!!da?.supportsReturningQueryExtent,supportsGeometryProperties:!!da?.supportsReturningGeometryProperties,supportsHavingClause:!!da?.supportsHavingClause,
supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!da?.supportsDefaultSR,
supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:va,supportsAreaAndPerimeter:va,supportsPointOrCentroid:va,supportsHeightFromBaseAndTop:oa&&pa.includes("base-top height"),supportsHeightFromBaseAndTopShadow:oa&&pa.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:oa&&pa.includes("top-top shadow height"),supports3D:oa&&pa.includes("3d")}}}};m.__decorate([h.property({clonable:!1})],la.prototype,
"_functionRasterInfos",void 0);m.__decorate([h.property({clonable:!1})],la.prototype,"_rasterJobHandler",void 0);m.__decorate([h.property({clonable:!1})],la.prototype,"_cachedRendererJson",void 0);m.__decorate([h.property({readOnly:!0})],la.prototype,"_serviceSupportsMosaicRule",void 0);m.__decorate([p.reader("_serviceSupportsMosaicRule",["currentVersion","fields"])],la.prototype,"readServiceSupportsMosaicRule",null);m.__decorate([h.property({readOnly:!0})],la.prototype,"_rasterAttributeTableFieldPrefix",
void 0);m.__decorate([h.property({readOnly:!0})],la.prototype,"_rasterFunctionNamesIndex",null);m.__decorate([h.property()],la.prototype,"adjustAspectRatio",void 0);m.__decorate([h.property({type:[l.Integer],json:{write:!0}})],la.prototype,"bandIds",void 0);m.__decorate([p.reader("bandIds")],la.prototype,"readBandIds",null);m.__decorate([h.property({readOnly:!0,json:{read:!1}})],la.prototype,"capabilities",void 0);m.__decorate([p.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],
la.prototype,"readCapabilities",null);m.__decorate([h.property({type:Number})],la.prototype,"compressionQuality",void 0);m.__decorate([u.writer("compressionQuality")],la.prototype,"writeCompressionQuality",null);m.__decorate([h.property({type:Number})],la.prototype,"compressionTolerance",void 0);m.__decorate([u.writer("compressionTolerance")],la.prototype,"writeCompressionTolerance",null);m.__decorate([h.property({json:{read:{source:"copyrightText"}}})],la.prototype,"copyright",void 0);m.__decorate([h.property({readOnly:!0,
dependsOn:["_serviceSupportsMosaicRule"]})],la.prototype,"defaultMosaicRule",void 0);m.__decorate([p.reader("defaultMosaicRule",["defaultMosaicMethod"])],la.prototype,"readDefaultMosaicRule",null);m.__decorate([h.property({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],la.prototype,"definitionExpression",void 0);m.__decorate([h.property({readOnly:!0,constructOnly:!0})],la.prototype,"exportImageServiceParameters",void 0);m.__decorate([h.property()],
la.prototype,"rasterInfo",void 0);m.__decorate([h.property({readOnly:!0,type:[g]})],la.prototype,"fields",void 0);m.__decorate([h.property({readOnly:!0})],la.prototype,"fieldsIndex",null);m.__decorate([h.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],la.prototype,"format",null);m.__decorate([p.reader("service","format",["serviceDataType"])],la.prototype,"readFormat",null);m.__decorate([h.property({type:aa})],la.prototype,"fullExtent",void 0);m.__decorate([h.property({readOnly:!0})],
la.prototype,"hasMultidimensions",void 0);m.__decorate([h.property({json:{read:{source:"maxImageHeight"}}})],la.prototype,"imageMaxHeight",void 0);m.__decorate([h.property({json:{read:{source:"maxImageWidth"}}})],la.prototype,"imageMaxWidth",void 0);m.__decorate([h.property({type:String,json:{type:A.interpolationKebab.jsonValues,read:A.interpolationKebab.read,write:A.interpolationKebab.write}})],la.prototype,"interpolation",void 0);m.__decorate([h.property()],la.prototype,"minScale",void 0);m.__decorate([p.reader("service",
"minScale")],la.prototype,"readMinScale",null);m.__decorate([h.property()],la.prototype,"maxScale",void 0);m.__decorate([p.reader("service","maxScale")],la.prototype,"readMaxScale",null);m.__decorate([h.property({type:x})],la.prototype,"mosaicRule",null);m.__decorate([p.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],la.prototype,"readMosaicRule",null);m.__decorate([u.writer("mosaicRule")],la.prototype,"writeMosaicRule",null);m.__decorate([h.property()],la.prototype,"multidimensionalInfo",
void 0);m.__decorate([h.property({type:E,json:{write:!0}})],la.prototype,"multidimensionalSubset",void 0);m.__decorate([h.property({json:{type:l.Integer}})],la.prototype,"noData",void 0);m.__decorate([u.writer("noData")],la.prototype,"writeNoData",null);m.__decorate([h.property({type:String,json:{type:A.noDataInterpretationKebab.jsonValues,read:A.noDataInterpretationKebab.read,write:A.noDataInterpretationKebab.write}})],la.prototype,"noDataInterpretation",void 0);m.__decorate([h.property({type:String,
readOnly:!0,json:{read:{source:["fields"]}}})],la.prototype,"objectIdField",void 0);m.__decorate([p.reader("objectIdField")],la.prototype,"readObjectIdField",null);m.__decorate([h.property({readOnly:!0})],la.prototype,"geometryType",void 0);m.__decorate([h.property({})],la.prototype,"typeIdField",void 0);m.__decorate([h.property({})],la.prototype,"types",void 0);m.__decorate([h.property({readOnly:!0})],la.prototype,"parsedUrl",null);m.__decorate([h.property({type:Function})],la.prototype,"pixelFilter",
void 0);m.__decorate([h.property()],la.prototype,"raster",void 0);m.__decorate([h.property({readOnly:!0})],la.prototype,"sourceType",void 0);m.__decorate([p.reader("sourceType",["serviceSourceType","fields"])],la.prototype,"readSourceType",null);m.__decorate([h.property()],la.prototype,"viewId",void 0);m.__decorate([h.property({types:t.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:t.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",
write:{overridePolicy(H){return{enabled:H&&"vector-field"!==H.type&&"flow"!==H.type}}}}}}})],la.prototype,"renderer",null);m.__decorate([p.reader("renderer")],la.prototype,"readRenderer",null);m.__decorate([u.writer("renderer")],la.prototype,"writeRenderer",null);m.__decorate([h.property({clonable:!1})],la.prototype,"symbolizer",void 0);m.__decorate([h.property(v.opacity)],la.prototype,"opacity",void 0);m.__decorate([h.property({readOnly:!0})],la.prototype,"rasterFields",null);m.__decorate([h.property({constructOnly:!0})],
la.prototype,"rasterFunctionInfos",void 0);m.__decorate([h.property({type:w})],la.prototype,"renderingRule",null);m.__decorate([h.property({type:w,json:{name:"renderingRule"}})],la.prototype,"rasterFunction",null);m.__decorate([p.reader("rasterFunction",["renderingRule","rasterFunctionInfos"])],la.prototype,"readRasterFunction",null);m.__decorate([h.property({readOnly:!0})],la.prototype,"serviceDataType",void 0);m.__decorate([h.property({readOnly:!0,type:qa})],la.prototype,"spatialReference",void 0);
m.__decorate([p.reader("spatialReference",["spatialReference","extent"])],la.prototype,"readSpatialReference",null);m.__decorate([h.property({json:{type:A.pixelTypeKebabDict.jsonValues}})],la.prototype,"pixelType",void 0);m.__decorate([p.reader("pixelType")],la.prototype,"readPixelType",null);m.__decorate([u.writer("pixelType")],la.prototype,"writePixelType",null);m.__decorate([h.property({constructOnly:!0,type:q})],la.prototype,"serviceRasterInfo",void 0);m.__decorate([h.property()],la.prototype,
"sourceJSON",void 0);m.__decorate([h.property(v.url)],la.prototype,"url",void 0);m.__decorate([h.property({readOnly:!0})],la.prototype,"version",void 0);m.__decorate([p.reader("version",["currentVersion","fields","timeInfo"])],la.prototype,"readVersion",null);return la=m.__decorate([c.subclass("esri.layers.mixins.ArcGISImageService")],la)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/FlowRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(d,m,z,F,t,J,Q,L,T){function M(l,p){if(!l)return null;if("classBreaks"===l.type&&l.classificationMethod){var c=l.authoringInfo||{classificationMethod:""};c.classificationMethod=l.classificationMethod;l.authoringInfo=c}"vectorField"===l.type&&l.visualVariables&&!Array.isArray(l.visualVariables)&&(l.visualVariables=[l.visualVariables]);c=l?h[l.type]||null:null;if(c)return c=new c,c.read(l,p),c;p?.messages&&l&&p.messages.push(new m("renderer:unsupported","Renderers of type '"+(l.type||"unknown")+
"' are not supported",{definition:l,context:p}));return null}const V={key:"type",base:null,typeMap:{"unique-value":L,"class-breaks":z,"raster-colormap":t,"raster-stretch":Q,"vector-field":T,"raster-shaded-relief":J,flow:F}},f={...V,typeMap:{...V.typeMap}};delete f.typeMap["vector-field"];delete f.typeMap.flow;const h={uniqueValue:L,classBreaks:z,rasterStretch:Q,rasterColormap:t,vectorField:T,rasterShadedRelief:J,flowRenderer:F};d.ClassBreaksRenderer=z;d.FlowRenderer=F;d.RasterColormapRenderer=t;d.RasterShadedReliefRenderer=
J;d.RasterStretchRenderer=Q;d.UniqueValueRenderer=L;d.VectorFieldRenderer=T;d.fromJSON=function(l,p){return M(l,p)};d.rasterRendererTypes=V;d.read=M;d.websceneRasterRendererTypes=f;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/FlowRenderer":function(){define("../chunks/tslib.es6 ../Color ../core/jsonMap ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./mixins/VisualVariablesMixin ./support/AuthoringInfo ./support/LegendOptions".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l){var p;z=new z.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});F=p=class extends f.VisualVariablesMixin(F.JSONSupport){constructor(c){super(c);this.density=.8;this.color=new m([255,255,255,1]);this.maxPathLength=200;this.trailWidth=1.5;this.flowSpeed=10;this.trailLength=100;this.smoothing=0;this.flowRepresentation="flow-from";this.type="flow";this.legendOptions=this.authoringInfo=null;this.trailCap="butt";this.background="none"}clone(){const {density:c,maxPathLength:u,
trailWidth:y,flowSpeed:v,trailLength:a,smoothing:e,flowRepresentation:g,trailCap:n,background:b}=this,k=this.color.clone(),x=(this.visualVariables||[]).map(A=>A.clone()),E=this.authoringInfo?.clone(),r=this.legendOptions?.clone();return new p({density:c,color:k,maxPathLength:u,trailWidth:y,flowSpeed:v,trailLength:a,trailCap:n,background:b,smoothing:e,flowRepresentation:g,visualVariables:x,authoringInfo:E,legendOptions:r})}getSymbol(c,u){}async getSymbolAsync(c,u){}getSymbols(){return[]}};d.__decorate([J.property({type:Number,
json:{write:!0}})],F.prototype,"density",void 0);d.__decorate([J.property({type:m,json:{write:{allowNull:!0}}})],F.prototype,"color",void 0);d.__decorate([J.property({type:Number,cast:t.toPt,json:{write:!0}})],F.prototype,"maxPathLength",void 0);d.__decorate([J.property({type:Number,cast:t.toPt,json:{write:!0}})],F.prototype,"trailWidth",void 0);d.__decorate([J.property({type:Number,json:{write:!0}})],F.prototype,"flowSpeed",void 0);d.__decorate([J.property({type:Number,json:{write:!0}})],F.prototype,
"trailLength",void 0);d.__decorate([J.property({type:Number,cast:t.toPt,json:{write:!1}})],F.prototype,"smoothing",void 0);d.__decorate([J.property({type:z.apiValues,json:{type:z.jsonValues,read:{reader:z.read},write:{writer:z.write}}})],F.prototype,"flowRepresentation",void 0);d.__decorate([M.enumeration({flowRenderer:"flow"})],F.prototype,"type",void 0);d.__decorate([J.property({type:h,json:{write:!0}})],F.prototype,"authoringInfo",void 0);d.__decorate([J.property({type:l.LegendOptions,json:{write:!0}})],
F.prototype,"legendOptions",void 0);d.__decorate([J.property({type:String,json:{write:!0}})],F.prototype,"trailCap",void 0);d.__decorate([J.property({type:String,json:{write:!0}})],F.prototype,"background",void 0);return F=p=d.__decorate([V.subclass("esri.renderers.FlowRenderer")],F)})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){var V;m=V=class extends m.JSONSupport{constructor(f){super(f);this.colormapInfos=null;this.type="raster-colormap"}static createFromColormap(f,h){if(!f)return null;const l=5===f[0].length;f=[...f].sort((p,c)=>p[0]-c[0]).map(p=>T.fromJSON({value:p[0],color:l?p.slice(1,5):p.slice(1,4).concat([255]),label:h?h[p[0]]??"":p[0]}));return new V({colormapInfos:f})}static createFromColorramp(f){f=M.convertColorRampToColormap(f);return V.createFromColormap(f)}clone(){return new V({colormapInfos:this.colormapInfos.map(f=>
f.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:f,color:h})=>[f,h.r,h.g,h.b,1<h.a?h.a:255*h.a&255]).sort((f,h)=>f[0]-h[0])}};d.__decorate([z.property({type:[T],json:{write:!0}})],m.prototype,"colormapInfos",void 0);d.__decorate([Q.enumeration({rasterColormap:"raster-colormap"})],m.prototype,"type",void 0);return m=V=d.__decorate([L.subclass("esri.renderers.RasterColormapRenderer")],m)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,z,F,t,J,Q,L){z=class extends z.JSONSupport{constructor(){super(...arguments);this.color=this.label=this.value=null}};d.__decorate([F.property({type:Number,json:{write:!0}})],z.prototype,"value",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],z.prototype,"label",void 0);d.__decorate([F.property({type:m,json:{type:[t.Integer],write:!0}})],z.prototype,"color",void 0);return z=d.__decorate([L.subclass("esri.renderers.support.ColormapInfo")],z)})},"esri/renderers/support/colorRampUtils":function(){define(["exports",
"../../Color","../../core/colorUtils","../../core/jsonMap","../../core/JSONSupport"],function(d,m,z,F,t){function J(a,e){if(!a||!e||a.length!==e.length)return!1;for(let g=0;g<a.length;g++)if(a[g]>e[g]+2||a[g]<e[g]-2)return!1;return!0}function Q(a){const e=a.clone();e.fromColor=a.toColor;e.toColor=a.fromColor;e.algorithm=a.algorithm;return e}function L(a){if("multipart"===a.type){a=a.clone();if(!a.colorRamps?.length)return a;a.colorRamps=a.colorRamps.reverse().map(e=>Q(e));return a}return Q(a)}function T(a,
e){if(a){e=e??y;var g=null;"algorithmic"===a.type?e.some(n=>{if(J(a.fromColor.toRgb(),n.fromColor)&&J(a.toColor.toRgb(),n.toColor))return g=n.id,!0}):"multipart"===a.type&&e.some(n=>{const b=a.colorRamps,k=n.colorRamps;if(b&&k&&b.length===k.length&&!k.some((x,E)=>{if(!J(b[E].fromColor.toRgb(),(new m(x.fromColor)).toRgb())||!J(b[E].toColor.toRgb(),(new m(x.toColor)).toRgb()))return!0})){if(g)return!0;g=n.id}});return g}}function M(a,e,g=!1){if(a){var n=!1,b=T(a,e);null!=b||g||(n=!0,a=L(a),b=T(a,e));
return b?{id:b,inverted:n}:void 0}}function V(a,e=!1){return(a="string"===typeof a?a:M(a,void 0,e)?.id)?v.toJSON(a):null}function f(a){a=a||{};const e=a.numColors||256;return{...a,numColors:e,distanceOffset:a.distanceOffset||0,interpolateAlpha:!!a.interpolateAlpha,distanceInterval:a.distanceInterval||1/(e-1),isCustomInterval:null!=a.isCustomInterval?a.isCustomInterval:null!==a.distanceInterval&&a.distanceInterval!==1/(e-1),weights:a.weights}}function h(a,e){let {fromColor:g,toColor:n}=a;g=[...g];
n=[...n];3===g.length&&(g=g.concat([255]));3===n.length&&(n=n.concat([255]));a=a.algorithm||"esriCIELabAlgorithm";var b=f(e);const {numColors:k,distanceOffset:x,isCustomInterval:E,interpolateAlpha:r}=b;if(1===k&&0===x)return[g];if(2===k&&0===x&&!E)return[g,n];var A={r:g[0],g:g[1],b:g[2]};e={r:n[0],g:n[1],b:n[2]};if("esriCIELabAlgorithm"===a){a=z.toLAB(A);e=z.toLAB(e);const {numColors:B,distanceOffset:K,distanceInterval:C,isCustomInterval:D}=b;let {l:N,a:R,b:I}=a;a=(e.l-N)*C;A=(e.a-R)*C;b=(e.b-I)*
C;var w=[];if(K){var q=K/C;N+=q*a;R+=q*A;I+=q*b}for(q=0;q<B-1;q++)w.push({l:N,a:R,b:I}),N+=a,R+=A,I+=b;w.push(D?{l:N,a:R,b:I}:e);e=w}else if("esriHSVAlgorithm"===a){a=z.toHSV(A);e=z.toHSV(e);const {numColors:B,distanceOffset:K,distanceInterval:C,isCustomInterval:D}=b;w=0===a.s;q=0===e.s;A=a.h;b=e.h;w&&!q?A=b:q&&!w&&(e={...e,h:A},b=A);w=Math.abs(b-A);180>w?b=(b-A)*C:(w=360-w,b=A>b?w*C:-w*C);w=(e.s-a.s)*C;q=(e.v-a.v)*C;let {s:N,v:R}=a;a=A;K&&(A=K/C,a=(a+A*b+360)%360,N+=A*w,R+=A*q);A=[];for(var G=0;G<
B-1;G++)A.push({h:a,s:N,v:R}),a=(a+b+360)%360,N+=w,R+=q;A.push(D?{h:a,s:N,v:R}:e);e=A}else{A=z.toLCH(A);e=z.toLCH(e);const {numColors:B,distanceOffset:K,distanceInterval:C,isCustomInterval:D}=b;b=A.h;w=e.h;a=2*Math.PI;b<=w?(q=w-b,b=w-b-a,b=Math.abs(b)<Math.abs(q)?b:q):(q=w+a-b,b=w-b,b=Math.abs(b)<Math.abs(q)?b:q);b*=C;w=(e.l-A.l)*C;q=(e.c-A.c)*C;let {l:N,c:R,h:I}=A;K&&(A=K/C,N+=A*w,R+=A*q,I=(I+A*b+a)%a);A=[];for(G=0;G<B-1;G++)A.push({l:N,c:R,h:I}),N+=w,R+=q,I=(I+b+a)%a;A.push(D?{l:N,c:R,h:I}:e);e=
A}a=[];A=g[3]??255;b=((n[3]??255)-A)/(k-1);for(w=0;w<k;w++){const {r:B,g:K,b:C}=z.toRGB(e[w]);a.push([B,K,C,r?Math.round(A+b*w):255])}return a}function l(a,e){const {numColors:g,interpolateAlpha:n}=f(e);e=e?.weights;({colorRamps:a}=a);if(e){const w=e.reduce((q,G)=>q+G);e=e.map(q=>q/w)}else{e=[];for(var b=0;b<a.length;b++)e[b]=1/a.length}b=[];const k=1/(g-1);let x=0,E=!1;for(let w=0;w<a.length;w++){var r=b.length,A=E?0:r*k-x;x+=e[w];r=w===a.length-1?g-1-r:(e[w]-A)/k;E=Math.ceil(r)===r;r=Math.ceil(r);
0!==r&&(A=h(a[w],{numColors:r,interpolateAlpha:n,distanceOffset:A/e[w],distanceInterval:k/e[w]}),b.push(...A))}e=[...a[a.length-1].toColor];3===e.length&&e.push(255);b.push(e);return b}function p(a,e){a=t.isSerializable(a)?a.toJSON():a;return"multipart"===a.type?l(a,e):h(a,e)}function c(a){a=z.toHSV(a);return{type:"HsvColor",Hue:a.h,Saturation:a.s,Value:a.v,AlphaValue:255}}function u(a){return{Algorithm:a.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:c(a.fromColor),
ToColor:c(a.toColor)}}const y=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,
0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,
255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,
255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,
255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,
96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,
242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},
{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},
{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",
colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",
fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},
{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",
type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,
0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},
{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",
colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,
107,45]}],v=new F.JSONMap({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging",
"Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging",
"Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark",
"Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark",
"Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});d.colorRampDict=v;d.convertColorRampToColormap=function(a,e){a=p(a,e);const g=e?.interpolateAlpha;a.forEach((n,b)=>{n.unshift(b);g||n.pop()});
return a};d.convertColorRampToColors=p;d.convertRGBATo32Bit=function(a){a=a.reverse().map(e=>{e=e.toString(16);return 2>e.length?"0"+e:e});return 4294967295&Number.parseInt(a.join(""),16)};d.getColorRampId=M;d.getColorRampJSON=function(a,e="esriCIELabAlgorithm"){const g=y.find(({id:n})=>n===a);return g?g.colorRamps?{type:"multipart",colorRamps:g.colorRamps.map(n=>({type:"algorithmic",algorithm:e,fromColor:[...n.fromColor],toColor:[...n.toColor]}))}:{type:"algorithmic",algorithm:e,fromColor:[...g.fromColor],
toColor:[...g.toColor]}:null};d.getColorRampName=V;d.getRFxArgColorRampValue=function(a){const e=V(a);return e?"algorithmic"===a.type?{...u(a),Name:e}:a.colorRamps?(a=a.colorRamps.map(u),{type:"MultiPartColorRamp",NumColorRamps:a.length,ArrayOfColorRamp:a,Name:e}):null:null};d.predefinedJsonColorRamps=y;d.rasterColormapNames="random ndvi ndvi2 ndvi3 elevation gray hillshade".split(" ");Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../rest/support/colorRamps".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){var V;m=V=class extends m.JSONSupport{constructor(f){super(f);this.altitude=45;this.azimuth=315;this.colorRamp=null;this.hillshadeType="traditional";this.pixelSizePower=.664;this.pixelSizeFactor=.024;this.scalingType="none";this.type="raster-shaded-relief";this.zFactor=1}readColorRamp(f){return M.fromJSON(f)}clone(){return new V({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,
pixelSizePower:this.pixelSizePower,colorRamp:z.clone(this.colorRamp)})}};d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"altitude",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"azimuth",void 0);d.__decorate([F.property({types:M.types,json:{write:!0}})],m.prototype,"colorRamp",void 0);d.__decorate([L.reader("colorRamp")],m.prototype,"readColorRamp",null);d.__decorate([F.property({type:["traditional","multi-directional"],json:{write:!0}})],m.prototype,
"hillshadeType",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"pixelSizePower",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"pixelSizeFactor",void 0);d.__decorate([F.property({type:["none","adjusted"],json:{write:!0}})],m.prototype,"scalingType",void 0);d.__decorate([Q.enumeration({rasterShadedRelief:"raster-shaded-relief"})],m.prototype,"type",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"zFactor",void 0);
return m=V=d.__decorate([T.subclass("esri.renderers.RasterShadedReliefRenderer")],m)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./support/stretchRendererUtils ../rest/support/colorRamps".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){var h;m=h=class extends m.JSONSupport{constructor(l){super(l);this.colorRamp=null;this.dynamicRangeAdjustment=this.computeGamma=!1;this.gamma=[];this.sigmoidStrengthLevel=this.outputMin=this.outputMax=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=null;this.statistics=[];this.histograms=null;this.useGamma=!1;this.stretchType="none";this.type="raster-stretch"}readColorRamp(l){if(l)return f.fromJSON(l)}writeStatistics(l,p,c){l?.length&&(Array.isArray(l[0])||
(l=l.map(u=>[u.min,u.max,u.avg,u.stddev])),p[c]=l)}readStretchType(l,p){l=p.stretchType;"number"===typeof l&&(l=V.stretchTypeFunctionEnum[l]);return V.stretchTypeJSONDict.read(l)}clone(){return new h({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:z.clone(this.statistics),gamma:z.clone(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,
minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:z.clone(this.colorRamp),histograms:z.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};d.__decorate([F.property({types:f.types,json:{write:!0}})],m.prototype,"colorRamp",void 0);d.__decorate([L.reader("colorRamp")],m.prototype,"readColorRamp",null);d.__decorate([F.property({type:Boolean,json:{write:!0}})],m.prototype,"computeGamma",void 0);d.__decorate([F.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],
m.prototype,"dynamicRangeAdjustment",void 0);d.__decorate([F.property({type:[Number],json:{write:!0}})],m.prototype,"gamma",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"maxPercent",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"minPercent",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"numberOfStandardDeviations",void 0);d.__decorate([F.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],
m.prototype,"outputMax",void 0);d.__decorate([F.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],m.prototype,"outputMin",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"sigmoidStrengthLevel",void 0);d.__decorate([F.property({json:{type:[[Number]],write:!0}})],m.prototype,"statistics",void 0);d.__decorate([F.property()],m.prototype,"histograms",void 0);d.__decorate([M.writer("statistics")],m.prototype,"writeStatistics",null);d.__decorate([F.property({type:Boolean,
json:{write:!0}})],m.prototype,"useGamma",void 0);d.__decorate([F.property({type:V.stretchTypeJSONDict.apiValues,json:{type:V.stretchTypeJSONDict.jsonValues,write:V.stretchTypeJSONDict.write}})],m.prototype,"stretchType",void 0);d.__decorate([L.reader("stretchType",["stretchType"])],m.prototype,"readStretchType",null);d.__decorate([Q.enumeration({rasterStretch:"raster-stretch"})],m.prototype,"type",void 0);return m=h=d.__decorate([T.subclass("esri.renderers.RasterStretchRenderer")],m)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports",
"../../core/jsonMap"],function(d,m){m=new m.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});d.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};d.stretchTypeJSONDict=m;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/tslib.es6 ../Color ../geometry ../Graphic ../symbols ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ./ClassBreaksRenderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./visualVariables/RotationVariable ./visualVariables/SizeVariable ./visualVariables/support/visualVariableUtils ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../symbols/support/utils ../geometry/Point ../symbols/PictureMarkerSymbol".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l,p,c,u,y,v,a,e,g,n,b,k,x,E){var r;const A=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]);z=new J.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});
J=new J.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});Q=r=class extends y.VisualVariablesMixin(Q.JSONSupport){constructor(w){super(w);this.attributeField="Magnitude";this.flowRepresentation="flow-from";this.rotationType="arithmetic";this.style="single-arrow";this.symbolTileSize=50;this.type="vector-field"}readInputUnit(w,q){return A.has(w)?c.unitKebabDict.fromJSON(w):null}readOutputUnit(w,q){return A.has(w)?c.unitKebabDict.fromJSON(w):null}get styleRenderer(){const w=this.attributeField,q=this._createStyleRenderer(this.style);
q.field=w;return q}get sizeVariables(){const w=[];if(this.visualVariables)for(var q of this.visualVariables)"size"===q.type&&w.push(q);0===w.length&&(q=new e({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(q):this._set("visualVariables",[q]),w.push(q));return w}get rotationVariables(){const w=[];if(this.visualVariables)for(var q of this.visualVariables)"rotation"===q.type&&w.push(q);0===w.length&&(q=new a({field:"Direction",
rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(q):this._set("visualVariables",[q]),w.push(q));return w}clone(){return new r({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:L.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(w,q=!1,G=[]){const B=[];var K=c.getUnitConversionFactor(this.inputUnit,
this.outputUnit),C=this.rotationVariables[0]?.rotationType||this.rotationType;q=q?c.convertVectorFieldData(w.pixelBlock,"vector-uv",C,K):c.convertVectorFieldUnit(w.pixelBlock,"vector-magdir",K);if(null==q)return B;w=w.extent;K=null!=q.mask&&0<q.mask.length;C=0;const D=(w.xmax-w.xmin)/q.width,N=(w.ymax-w.ymin)/q.height;for(let I=0;I<q.height;I++)for(let P=0;P<q.width;P++,C++){let O=new x({x:w.xmin+P*D+D/2,y:w.ymax-I*N-N/2,spatialReference:w.spatialReference});O=(await p.normalizeCentralMeridian(O))[0];
var R=G.some(S=>S.intersects(O));K&&!q.mask[C]||R||(R=new F({geometry:{type:"point",x:O.x,y:O.y,spatialReference:w.spatialReference},attributes:{Magnitude:q.pixels[0][C],Direction:q.pixels[1][C]}}),R.symbol=this._getVisualVariablesAppliedSymbol(R),B.push(R))}return B}getSymbol(w,q){}async getSymbolAsync(w,q){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(w){return new b({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",
outline:new n({width:0}),size:20,color:w||new m([0,92,230])})}_getVisualVariablesAppliedSymbol(w){if(w){var q=this.styleRenderer?.getSymbol(w)?.clone(),G=this.sizeVariables,B=this.rotationVariables;G&&G.length&&this.sizeVariables.forEach(K=>k.applySizesToSymbol(q,g.getAllSizes([K],w)));B&&B.length&&(w.attributes.Direction+="flow-to"===this.flowRepresentation===("ocean-current-kn"===this.style||"ocean-current-m"===this.style)?0:180,this.rotationVariables.forEach(K=>k.applyRotationToSymbol(q,g.getRotationAngle(K,
w),K.axis)));return q}}_createStyleRenderer(w){let q={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(w){case "single-arrow":q=this._createSingleArrowRenderer();break;case "beaufort-kn":q=this._createBeaufortKnotsRenderer();break;case "beaufort-m":q=this._createBeaufortMeterRenderer();break;case "beaufort-ft":q=this._createBeaufortFeetRenderer();break;case "beaufort-mi":q=this._createBeaufortMilesRenderer();break;case "beaufort-km":q=this._createBeaufortKilometersRenderer();break;
case "ocean-current-m":q=this._createCurrentMeterRenderer();break;case "ocean-current-kn":q=this._createCurrentKnotsRenderer();break;case "simple-scalar":q=this._createSimpleScalarRenderer();break;case "wind-barb":q=this._createWindBarbsRenderer();break;case "classified-arrow":q=this._createClassifiedArrowRenderer()}return new u(q)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const w=this._getDefaultSymbol(new m([214,47,39])),q=this._getClassBreaks([0,
1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:w,classBreakInfos:q}}_createBeaufortMeterRenderer(){const w=this._getDefaultSymbol(new m([214,47,39])),q=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,
220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:q}}_createBeaufortFeetRenderer(){const w=this._getDefaultSymbol(new m([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(G=>3.28084*G);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:q}}_createBeaufortMilesRenderer(){const w=
this._getDefaultSymbol(new m([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];q=q.map(G=>2.23694*G);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:q}}_createBeaufortKilometersRenderer(){const w=this._getDefaultSymbol(new m([214,47,39]));var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,
32.7];q=q.map(G=>3.6*G);q=this._getClassBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:w,classBreakInfos:q}}_createCurrentMeterRenderer(){const w=this._getDefaultSymbol(new m([177,177,177])),q=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:w,classBreakInfos:q}}_createCurrentKnotsRenderer(){const w=
this._getDefaultSymbol(new m([177,177,177])),q=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:w,classBreakInfos:q}}_createClassifiedArrowRenderer(){const w=this._getDefaultSymbol(new m([56,168,0]));var q=[0,1E-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const G=this.sizeVariables[0].minDataValue,B=this.sizeVariables[0].maxDataValue;if(G&&B){const K=(B-G)/5;q=
Array.from(Array(6).keys()).map(C=>G+K*C)}}q=this._getClassBreaks(q,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:w,classBreakInfos:q}}_createSimpleScalarRenderer(){return{defaultSymbol:E.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const w=Array.from(Array(31).keys()).map(K=>5*K),q=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],G=E.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),B=w.map((K,C)=>{if(C!==w.length-1)if(0===C)var D={minValue:K,maxValue:w[C+1],symbol:G};else D=E.fromJSON({type:"esriPMS",imageData:q[C].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),D={minValue:K,maxValue:w[C+1],symbol:D};return new v(D)});return{defaultSymbol:G,classBreakInfos:B}}_getClassBreaks(w,q){return q.map((G,B)=>new v({minValue:w[B],maxValue:w[B+1],symbol:this._getDefaultSymbol(new m(G))}))}};d.__decorate([T.property({type:String,
json:{write:!0}})],Q.prototype,"attributeField",void 0);d.__decorate([T.property({type:J.apiValues,json:{type:J.jsonValues,read:{reader:J.read},write:{writer:J.write}}})],Q.prototype,"flowRepresentation",void 0);d.__decorate([T.property({type:["geographic","arithmetic"],json:{write:!0}})],Q.prototype,"rotationType",void 0);d.__decorate([T.property({type:z.apiValues,json:{type:z.jsonValues,read:{reader:z.read},write:{writer:z.write}}})],Q.prototype,"style",void 0);d.__decorate([T.property({json:{write:!0}})],
Q.prototype,"symbolTileSize",void 0);d.__decorate([T.property({type:c.unitKebabDict.apiValues,json:{type:c.unitKebabDict.jsonValues,write:{writer:c.unitKebabDict.write}}})],Q.prototype,"inputUnit",void 0);d.__decorate([h.reader("inputUnit")],Q.prototype,"readInputUnit",null);d.__decorate([T.property({type:c.unitKebabDict.apiValues,json:{type:c.unitKebabDict.jsonValues,read:{reader:c.unitKebabDict.read},write:{writer:c.unitKebabDict.write}}})],Q.prototype,"outputUnit",void 0);d.__decorate([h.reader("outputUnit")],
Q.prototype,"readOutputUnit",null);d.__decorate([f.enumeration({vectorField:"vector-field"})],Q.prototype,"type",void 0);d.__decorate([T.property({type:u})],Q.prototype,"styleRenderer",null);d.__decorate([T.property({type:e})],Q.prototype,"sizeVariables",null);d.__decorate([T.property({type:a})],Q.prototype,"rotationVariables",null);return Q=r=d.__decorate([l.subclass("esri.renderers.VectorFieldRenderer")],Q)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/jsonMap",
"../PixelBlock","./pixelUtils"],function(d,m,z,F){function t(b,k){return c.get(b)/c.get(k)||1}function J(b,k="geographic"){const [x,E]=b;b=Math.sqrt(x*x+E*E);let r=Math.atan2(E,x)*u;r=(360+r)%360;"geographic"===k&&(r=(450-r)%360);return[b,r]}function Q(b,k="geographic"){let x=b[1];"geographic"===k&&(x=(450-x)%360);x%=360;b=b[0];return[b*Math.cos(x/u),b*Math.sin(x/u)]}function L(b,k,x="geographic",E=1){if(!F.isValidPixelBlock(b))return b;const {pixels:r,width:A,height:w}=b;var q=A*w;const G=r[0],B=
r[1],K=b.pixelType.startsWith("f")?b.pixelType:"f32",C=z.createEmptyBand(K,q);q=z.createEmptyBand(K,q);let D=0;for(let N=0;N<w;N++)for(let R=0;R<A;R++)"vector-uv"===k?([C[D],q[D]]=J([G[D],B[D]],x),C[D]*=E):([C[D],q[D]]=Q([G[D],B[D]],x),C[D]*=E,q[D]*=E),D++;b=new z({pixelType:K,width:b.width,height:b.height,mask:b.mask,validPixelCount:b.validPixelCount,maskIsAlpha:b.maskIsAlpha,pixels:[C,q]});b.updateStatistics();return b}function T(b=0,k=0,x=Math.PI,E=!0){E&&(x=(2*Math.PI-x)%(2*Math.PI));E=E?-1:1;
const r=-7*E,A=-2*E,w=-16*E,[q,G]=V(0,k+13*E,x,21.75),[B,K]=V(b-5.5,k+r,x,21.75),[C,D]=V(b+5.5,k+r,x,21.75),[N,R]=V(b-1.5,k+A,x,21.75),[I,P]=V(b+1.5,k+A,x,21.75),[O,S]=V(b-1.5,k+w,x,21.75),[W,X]=V(b+1.5,k+w,x,21.75);return[q,G,B,K,N,R,I,P,C,D,O,S,W,X]}function M(b=0,k=Math.PI,x=!0){x&&(k=(2*Math.PI-k)%(2*Math.PI));var E=x?-1:1,r=5*E;const A=20*E,w=25*E;E*=2;const q=x?1:-1;x=5*q;let [G,B]=[0+x,0-A],[K,C]=[G+2*q,B],[D,N]=[K-0*q,C+E],[R,I]=[0-x,0-w],[P,O]=[R+0*q,I-E],S=Math.ceil(b/5),W=Math.floor(S/
10);S-=8*W;b=[];const X=[];for(let ia=0;ia<S/2;ia++,W--){0>=W&&1===S%2&&ia===(S-1)/2&&(R=0,P=R+0*q,I=(I+B)/2,O=I-E);const [na,qa]=V(R,I,k,45);if(0<W){const [ta,wa]=V(K,I,k,45),[ya,xa]=V(G,B,k,45);b.push(ta);b.push(wa);b.push(na);b.push(qa);b.push(ya);b.push(xa)}else{const [ta,wa]=V(K,C,k,45),[ya,xa]=V(D,N,k,45),[Ba,sa]=V(P,O,k,45);X.push(na);X.push(qa);X.push(Ba);X.push(sa);X.push(ya);X.push(xa);X.push(ta);X.push(wa)}I+=r;B+=r;C+=r;N+=r;O+=r}const [ba,Z]=V(0+x,0+A,k,45);r=7*q;const [ca,aa]=V(0+r,
0+A,k,45),[ea,ha]=V(0+x,0-w,k,45),[fa,ja]=V(0+r,0-w,k,45);return{pennants:b,barbs:X,shaft:[ba,Z,ca,aa,ea,ha,fa,ja]}}function V(b,k,x,E=1){return[Math.sqrt(b*b+k*k)/E,(2*Math.PI+(2*Math.PI+Math.atan2(k,b))%(2*Math.PI)-x)%(2*Math.PI)]}function f(b,k,x,E){x=t(E||"knots",x);for(E=1;E<k.length;E++)if(E===k.length-1){if(b<k[E]*x)break}else if(b<=k[E]*x)break;return Math.min(E-1,k.length-2)}function h(b,k,x,E,r){let A=0;switch(k){case "beaufort_kn":A=f(b,a,"knots",x);break;case "beaufort_km":A=f(b,a,"kilometer-per-hour",
x);break;case "beaufort_ft":A=f(b,a,"feet-per-second",x);break;case "beaufort_m":A=f(b,a,"meter-per-second",x);break;case "classified_arrow":A=f(b,r??[],E,x);break;case "ocean_current_m":A=f(b,e,"meter-per-second",x);break;case "ocean_current_kn":A=f(b,g,"knots",x)}return A}function l(b,k){const {style:x,inputUnit:E,outputUnit:r,breakValues:A}=k,w=y.fromJSON(E),q=y.fromJSON(r);let G=0,B=0;const {width:K,height:C,mask:D}=b,N=b.pixels[0];b=b.pixels[1];var R=null!=D?D.filter(O=>0<O).length:K*C;const I=
new Float32Array(42*R);R=new Uint32Array(15*R);k=k.invertDirection?T(0,0,0,!1):v;for(let O=0;O<C;O++)for(let S=0;S<K;S++){var P=O*K+S;if(!D||D[O*K+S]){const W=(b[P]+360)%360/180*Math.PI,X=h(N[P],x,w,q,A);for(let ba=0;ba<k.length;ba+=2)I[G++]=(S+.5)/K,I[G++]=(O+.5)/C,I[G++]=k[ba],I[G++]=k[ba+1]+W,I[G++]=X,I[G++]=N[P];P=7*(G/42-1);R[B++]=P;R[B++]=P+1;R[B++]=P+2;R[B++]=P+0;R[B++]=P+4;R[B++]=P+3;R[B++]=P+0;R[B++]=P+2;R[B++]=P+3;R[B++]=P+2;R[B++]=P+5;R[B++]=P+3;R[B++]=P+5;R[B++]=P+6;R[B++]=P+3}}return{vertexData:I,
indexData:R}}function p(b,k){let x=0,E=0;const {width:r,height:A,mask:w}=b;b=b.pixels[0];const q=[],G=[];var B=y.fromJSON(k.inputUnit);B=t(B,"knots");k="wind_speed"===k.style?5:Number.MAX_VALUE;for(let C=0;C<A;C++)for(let D=0;D<r;D++){var K=b[C*r+D]*B;if((!w||w[C*r+D])&&K<k){for(let N=0;4>N;N++)q[x++]=(D+.5)/r,q[x++]=(C+.5)/A,q[x++]=2>N?-.5:.5,q[x++]=0===N%2?-.5:.5,q[x++]=0,q[x++]=K;K=4*(x/24-1);G[E++]=K;G[E++]=K+1;G[E++]=K+2;G[E++]=K+1;G[E++]=K+2;G[E++]=K+3}}return{vertexData:new Float32Array(q),
indexData:new Uint32Array(G)}}const c=new Map;c.set("meter-per-second",1);c.set("kilometer-per-hour",.277778);c.set("knots",.514444);c.set("feet-per-second",.3048);c.set("mile-per-hour",.44704);const u=180/Math.PI,y=new m.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"}),v=T(0,0,0),a=[0,1,3,6,10,16,21,27,33,40,47,55,63],e=[0,.5,1,1.5,2],g=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],
n=[];d.convertToLocalDirections=function(b,k,x,E="geographic"){if(!F.isValidPixelBlock(b)||null==x)return b;b="vector-magdir"===k?b.clone():L(b,k);const r=b.pixels[1];for(let A=0;A<r.length;A++)r[A]="geographic"===E?(r[A]+x[A]+270)%360:(r[A]+360-x[A])%360;return"vector-magdir"===k?b:L(b,"vector-magdir")};d.convertVectorFieldData=L;d.convertVectorFieldUnit=function(b,k,x=1){if(1===x||!F.isValidPixelBlock(b))return b;b=b.clone();const {pixels:E,width:r,height:A}=b,w=E[0],q=E[1];let G=0;for(let B=0;B<
A;B++)for(let K=0;K<r;K++)"vector-uv"===k?(w[G]*=x,q[G]*=x):w[G]*=x,G++;b.updateStatistics();return b};d.createVFMesh=function(b,k){if("simple_scalar"===k.style)k=p(b,k);else if("wind_speed"===k.style){if(0===n.length)for(var x=0;30>x;x++)n.push(M(5*x,0,!k.invertDirection));k=y.fromJSON(k.inputUnit);k=t(k,"knots");const {width:w,height:q,mask:G}=b;x=b.pixels[0];b=b.pixels[1];const B=[],K=[];let C=0,D=0;for(let N=0;N<q;N++)for(let R=0;R<w;R++){var E=N*w+R,r=x[E]*k;if((!G||G[N*w+R])&&5<=r){const I=
(b[E]+360)%360/180*Math.PI,{pennants:P,barbs:O,shaft:S}=n[Math.min(Math.floor(r/5),29)];if(0===P.length+O.length)continue;E=B.length/6;const W=(R+.5)/w,X=(N+.5)/q;for(var A=0;A<P.length;A+=2)B[C++]=W,B[C++]=X,B[C++]=P[A],B[C++]=P[A+1]+I,B[C++]=0,B[C++]=r;for(A=0;A<O.length;A+=2)B[C++]=W,B[C++]=X,B[C++]=O[A],B[C++]=O[A+1]+I,B[C++]=0,B[C++]=r;for(A=0;A<S.length;A+=2)B[C++]=W,B[C++]=X,B[C++]=S[A],B[C++]=S[A+1]+I,B[C++]=0,B[C++]=r;for(r=0;r<P.length/6;r++)K[D++]=E,K[D++]=E+1,K[D++]=E+2,E+=3;for(r=0;r<
O.length/8;r++)K[D++]=E,K[D++]=E+1,K[D++]=E+2,K[D++]=E+1,K[D++]=E+2,K[D++]=E+3,E+=4;K[D++]=E+0;K[D++]=E+1;K[D++]=E+2;K[D++]=E+1;K[D++]=E+3;K[D++]=E+2;E+=4}}k={vertexData:new Float32Array(B),indexData:new Uint32Array(K)}}else k=l(b,k);return k};d.createVFMeshScalar=p;d.getUnitConversionFactor=t;d.sampleVectorField=function(b,k,x,E=[0,0],r=.5){const {width:A,height:w,mask:q}=b,[G,B]=b.pixels,[K,C]=E;b=Math.round((A-K)/x);E=Math.round((w-C)/x);var D=b*E;const N=new Float32Array(D),R=new Float32Array(D);
D=new Uint8Array(D);k="vector-uv"===k;for(let P=0;P<E;P++)for(let O=0;O<b;O++){let S=0;const W=P*b+O,X=Math.max(0,P*x+C),ba=Math.max(0,O*x+K),Z=Math.min(w,X+x),ca=Math.min(A,ba+x);for(let aa=X;aa<Z;aa++)for(let ea=ba;ea<ca;ea++){var I=aa*A+ea;if(!q||q[I]){S++;I=k?[G[I],B[I]]:[G[I],(360+B[I])%360];const [ha,fa]=k?I:Q(I);N[W]+=ha;R[W]+=fa}}if(S>=(Z-X)*(ca-ba)*(1-r)){D[W]=1;const [aa,ea]=J([N[W]/S,R[W]/S]);N[W]=aa;R[W]=ea}else D[W]=0,N[W]=0,R[W]=0}x=new z({width:b,height:E,pixels:[N,R],mask:D});x.updateStatistics();
return x};d.snapImageToSymbolTile=function(b,k,x,E,r){if(null==r||!r.spatialReference.equals(b.spatialReference))return{extent:b,width:Math.round(k/E),height:Math.round(x/E),resolution:b.width/k};const A=r.xmin;r=r.ymax;k=(b.xmax-b.xmin)/k*E;x=(b.ymax-b.ymin)/x*E;b.xmin=A+Math.floor((b.xmin-A)/k)*k;b.xmax=A+Math.ceil((b.xmax-A)/k)*k;b.ymin=r+Math.floor((b.ymin-r)/x)*x;b.ymax=r+Math.ceil((b.ymax-r)/x)*x;return{extent:b,width:Math.round(b.width/k),height:Math.round(b.height/x),resolution:(k+x)/2}};
d.unitKebabDict=y;d.uvComponentToVector=J;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/tslib.es6 ../../core/Error ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/subclass ./SimpleBandStatistics ./rasterFormats/pixelRangeUtils".split(" "),function(d,m,z,F,t,J,Q,L,T,M){var V;z=V=class extends z.JSONSupport{static createEmptyBand(f,
h){return new (V.getPixelArrayConstructor(f))(h)}static combineBandMasks(f){if(2>f.length)return f[0];const h=f[0].length,l=(new Uint8Array(h)).fill(255);for(let p=0;p<f.length;p++){const c=f[p];for(let u=0;u<h;u++)c[u]||(l[u]=0)}return l}static getPixelArrayConstructor(f){let h;switch(f){case "u1":case "u2":case "u4":case "u8":h=Uint8Array;break;case "u16":h=Uint16Array;break;case "u32":h=Uint32Array;break;case "s8":h=Int8Array;break;case "s16":h=Int16Array;break;case "s32":h=Int32Array;break;case "f32":h=
Float32Array;break;case "f64":h=Float64Array;break;case "c64":case "c128":case "unknown":h=Float32Array}return h}constructor(f){super(f);this.height=this.width=null;this.pixelType="f32";this.mask=this.validPixelCount=null;this.premultiplyAlpha=this.maskIsAlpha=!1;this.statistics=null;this.depthCount=1}castPixelType(f){if(!f)return"f32";f=f.toLowerCase();["u1","u2","u4"].includes(f)?f="u8":"unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").includes(f)||(f="f32");return f}getPlaneCount(){return this.pixels?.length}addData(f){if(!f.pixels||
f.pixels.length!==this.width*this.height)throw new m("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(f.pixels);this.statistics.push(f.statistics??new T.SimpleBandStatistics)}getAsRGBA(){const f=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(f);
break;default:this._fillFrom8Bit(f)}return new Uint8ClampedArray(f)}getAsRGBAFloat(){const f=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(f);return f}updateStatistics(){if(this.pixels){this.statistics=this.pixels.map(l=>this._calculateBandStatistics(l,this.mask));var f=this.mask,h=0;if(null!=f)for(let l=0;l<f.length;l++)f[l]&&h++;else h=this.width*this.height;this.validPixelCount=h}}clamp(f){if(f&&"f64"!==f&&"f32"!==f&&this.pixels){var [h,l]=M.getPixelValueRange(f),p=this.pixels,
c=this.width*this.height,u=p.length,y=[];for(let g=0;g<u;g++){var v=V.createEmptyBand(f,c);var a=p[g];for(let n=0;n<c;n++){var e=a[n];v[n]=e>l?l:e<h?h:e}y.push(v)}this.pixels=y;this.pixelType=f}}extractBands(f){const {pixels:h,statistics:l}=this;if(null==f||0===f.length||!h||0===h.length)return this;var p=h.length;const c=f.some(g=>g>=h.length),u=p===f.length&&!f.some((g,n)=>g!==n);if(c||u)return this;p=this.bandMasks?.length===p?f.map(g=>this.bandMasks[g]):void 0;let {mask:y,validPixelCount:v}=this;
const {width:a,height:e}=this;p?.length&&(y=V.combineBandMasks(p),v=y.filter(g=>!!g).length);return new V({pixelType:this.pixelType,width:a,height:e,mask:y,bandMasks:p,validPixelCount:v,maskIsAlpha:this.maskIsAlpha,pixels:f.map(g=>h[g]),statistics:l&&f.map(g=>l[g])})}clone(){const f=new V({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});null!=this.mask&&(f.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):
this.mask.slice(0));this.bandMasks&&(f.bandMasks=this.bandMasks.map(p=>new Uint8Array(p)));let h;const l=V.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){f.pixels=[];const p=!!this.pixels[0].slice;for(h=0;h<this.pixels.length;h++)f.pixels[h]=p?this.pixels[h].slice(0,this.pixels[h].length):new l(this.pixels[h])}if(this.statistics)for(f.statistics=[],h=0;h<this.statistics.length;h++)f.statistics[h]=F.clone(this.statistics[h]);f.premultiplyAlpha=this.premultiplyAlpha;
return f}_fillFrom8Bit(f){const {mask:h,maskIsAlpha:l,premultiplyAlpha:p,pixels:c}=this;if(f&&c?.length){var u,y;var v=u=y=c[0];3<=c.length?(u=c[1],y=c[2]):2===c.length&&(u=c[1]);var a=new Uint32Array(f),e=this.width*this.height;if(v.length!==e)t.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(null!=h&&h.length===e)if(l)for(f=0;f<e;f++){const g=h[f];if(g){const n=g/255;a[f]=p?g<<24|y[f]*n<<16|u[f]*n<<8|v[f]*n:g<<24|y[f]<<16|u[f]<<8|v[f]}}else for(f=
0;f<e;f++)h[f]&&(a[f]=-16777216|y[f]<<16|u[f]<<8|v[f]);else for(f=0;f<e;f++)a[f]=-16777216|y[f]<<16|u[f]<<8|v[f]}else t.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}_fillFromNon8Bit(f){const {pixels:h,mask:l,statistics:p}=this;if(f&&h?.length){var c=this.pixelType,u=1,y=0;u=1;if(p&&0<p.length){for(var v of p)null!=v.minValue&&(y=Math.min(y,v.minValue)),null!=v.maxValue&&null!=v.minValue&&(u=Math.max(u,v.maxValue-v.minValue));u=255/u}else u=255,
"s8"===c?(y=-128,u=127):"u16"===c?u=65535:"s16"===c?(y=-32768,u=32767):"u32"===c?u=4294967295:"s32"===c?(y=-2147483648,u=2147483647):"f32"===c?(y=-3.4*1E39,u=3.4*1E39):"f64"===c&&(y=-Number.MAX_VALUE,u=Number.MAX_VALUE),u=255/(u-y);f=new Uint32Array(f);c=this.width*this.height;var a,e,g;v=a=e=h[0];if(v.length!==c)return t.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=h.length)if(a=h[1],3<=h.length&&(e=h[2]),null!=l&&l.length===c)for(g=0;g<c;g++)l[g]&&
(f[g]=-16777216|(e[g]-y)*u<<16|(a[g]-y)*u<<8|(v[g]-y)*u);else for(g=0;g<c;g++)f[g]=-16777216|(e[g]-y)*u<<16|(a[g]-y)*u<<8|(v[g]-y)*u;else if(null!=l&&l.length===c)for(g=0;g<c;g++)a=(v[g]-y)*u,l[g]&&(f[g]=-16777216|a<<16|a<<8|a);else for(g=0;g<c;g++)a=(v[g]-y)*u,f[g]=-16777216|a<<16|a<<8|a}else t.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")}_fillFrom32Bit(f){const {pixels:h,mask:l}=this;if(!f||!h?.length)return t.getLogger(this).error("getAsRGBAFloat()",
"Unable to convert to RGBA. The input pixel block is empty.");let p,c,u,y;p=c=u=h[0];3<=h.length?(c=h[1],u=h[2]):2===h.length&&(c=h[1]);const v=this.width*this.height;if(p.length!==v)return t.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let a=0;if(null!=l&&l.length===v)for(y=0;y<v;y++)f[a++]=p[y],f[a++]=c[y],f[a++]=u[y],f[a++]=l[y]&1;else for(y=0;y<v;y++)f[a++]=p[y],f[a++]=c[y],f[a++]=u[y],f[a++]=1}_calculateBandStatistics(f,h){let l=Infinity,p=
-Infinity;const c=f.length;let u,y=0;if(null!=h)for(u=0;u<c;u++)h[u]&&(y=f[u],l=y<l?y:l,p=y>p?y:p);else for(u=0;u<c;u++)y=f[u],l=y<l?y:l,p=y>p?y:p;return new T.SimpleBandStatistics(l,p)}};d.__decorate([J.property({json:{write:!0}})],z.prototype,"width",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"height",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"pixelType",void 0);d.__decorate([Q.cast("pixelType")],z.prototype,"castPixelType",null);d.__decorate([J.property({json:{write:!0}})],
z.prototype,"validPixelCount",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"mask",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"maskIsAlpha",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"pixels",void 0);d.__decorate([J.property()],z.prototype,"premultiplyAlpha",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"statistics",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"depthCount",void 0);d.__decorate([J.property({json:{write:!0}})],
z.prototype,"noDataValues",void 0);d.__decorate([J.property({json:{write:!0}})],z.prototype,"bandMasks",void 0);return z=V=d.__decorate([L.subclass("esri.layers.support.PixelBlock")],z)})},"esri/layers/support/SimpleBandStatistics":function(){define(["exports"],function(d){class m{constructor(z=null,F=null,t=null){this.minValue=z;this.maxValue=F;this.noDataValue=t}}d.SimpleBandStatistics=m;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/pixelRangeUtils":function(){define(["exports"],
function(d){function m(F){return z[F]??[-3.4028234663852886E38,3.4028234663852886E38]}const z={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4028234663852886E38,3.4028234663852886E38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};d.convertNoDataToMask=function(F,t,J){if(!(F.depthCount&&1<F.depthCount)){var {pixels:Q,statistics:L,pixelType:T}=F,M=Q[0].length,V=F.bandMasks??
[];M=F.mask??(new Uint8Array(M)).fill(255);var f="f32"===T||"f64"===T,h=m(T),l=!1;for(let u=0;u<Q.length;u++){const y="number"===typeof t?t:t[u];if(null==y)continue;var p=L?.[u]?.maxValue??h[1];if((L?.[u]?.minValue??h[0])>y+Number.EPSILON||p<y-Number.EPSILON)continue;p=V[u]||M.slice();const v=Q[u];var c=J?.customFloatTolerance;if(f&&0!==c){c||=9.999999E37<=Math.abs(y)?2E-7*Math.abs(y):"f32"===T?2**-23:Number.EPSILON;for(let a=0;a<v.length;a++)p[a]&&Math.abs(v[a]-y)<c&&(v[a]=0,p[a]=0,M[a]=0,l=!0)}else for(c=
0;c<v.length;c++)p[c]&&v[c]===y&&(v[c]=0,p[c]=0,M[c]=0,l=!0);V[u]=p}l&&(F.bandMasks=F.bandMasks||1<F.pixels.length?V:null,F.mask=M);l&&"updateStatistics"in F&&F.updateStatistics()}};d.getIntegerPixelType=function(F,t){return null==F||null==t?"s32":0>F?-128<=F&&128>t?"s8":-32768<=F&&32768>t?"s16":"s32":256>t?"u8":65536>t?"u16":"u32"};d.getPixelValueRange=m;d.isIntegerPixelType=function(F){return(F?.startsWith("s")||F?.startsWith("u"))??!1};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock","../rasterFormats/pixelRangeUtils"],function(d,m,z){function F(a){return null!=a&&"esri.layers.support.PixelBlock"===a.declaredClass&&a.pixels&&0<a.pixels.length}function t(a,e,g,n,b){const k=a.length;b=m.createEmptyBand(b,k);if(e)for(let x=0;x<k;x++)e[x]&&(b[x]=g[a[x]-n]);else for(e=0;e<k;e++)b[e]=g[a[e]-n];return b}function J(a,e,g,n){const b=null!=g&&2<=g.length?new Set(g):null;g=1===g?.length?g[0]:null;
const k=!!e?.length;for(let x=0;x<a.length;x++)if(n[x]){const E=a[x];if(k){let r=!1;for(let A=0;A<e.length;A+=2)if(E>=e[A]&&E<=e[A+1]){r=!0;break}r||(n[x]=0)}n[x]&&(E===g||b?.has(E))&&(n[x]=0)}}function Q(a,e){const g=a[0].length;for(let n=0;n<g;n++)if(e[n]){let b=!1;for(let k=0;k<a.length;k++)if(a[k][n]){b=!0;break}b||(e[n]=0)}}function L(a,e){const g=a[0].length;for(let n=0;n<g;n++)if(e[n]){let b=!1;for(let k=0;k<a.length;k++)if(0===a[k][n]){b=!0;break}b&&(e[n]=0)}}function T(a,e,g,n,b,k,x,E){return{xmin:b<=
g*a?0:b<g*a+a?b-g*a:a,ymin:k<=n*e?0:k<n*e+e?k-n*e:e,xmax:b+x<=g*a?0:b+x<g*a+a?b+x-g*a:a,ymax:k+E<=n*e?0:k+E<n*e+e?k+E-n*e:e}}function M(a,e,g,n,b,k){const {width:x,height:E}=g.block,{x:r,y:A}=g.offset,{width:w,height:q}=g.mosaic;g=T(x,E,n,b,r,A,w,q);let G=0;var B=0;if(k){var K=k.hasGCSSShiftTransform?360:k.halfWorldWidth??0,C=x*k.resolutionX;const D=k.startX+n*C;D<K&&D+C>K?B=k.rightPadding:D>=K&&(G=k.leftMargin-k.rightPadding,B=0)}g.xmax-=B;if("number"===typeof e)for(k=g.ymin;k<g.ymax;k++)for(B=(b*
E+k-A)*w+(n*x-r)+G,K=g.xmin;K<g.xmax;K++)a[B+K]=e;else for(k=g.ymin;k<g.ymax;k++)for(B=(b*E+k-A)*w+(n*x-r)+G,K=k*x,C=g.xmin;C<g.xmax;C++)a[B+C]=e[K+C]}function V(a,e,g={}){const {clipOffset:n,clipSize:b,alignmentInfo:k,blockWidths:x}=g;if(x)return f(a,e,{blockWidths:x});var E=a.find(I=>F(I));if(null==E)return null;g=b?b.width:e.width;const r=b?b.height:e.height;var A=E.width,w=E.height;const q=e.width/A,G=e.height/w;e={offset:n||{x:0,y:0},mosaic:b||e,block:{width:A,height:w}};A=E.pixelType;var B=
m.getPixelArrayConstructor(A);E=E.pixels.length;w=[];for(var K=0;K<E;K++){var C=new B(g*r);for(var D=0;D<G;D++)for(var N=0;N<q;N++){var R=a[D*q+N];F(R)&&(R=R.pixels[K],M(C,R,e,N,D,k))}w.push(C)}B=a.some(I=>null==I||null!=I.mask&&0<I.mask.length);C=a.some(I=>I?.bandMasks&&1<I.bandMasks.length);B=B?new Uint8Array(g*r):void 0;C=C?[]:void 0;if(B){for(K=0;K<G;K++)for(D=0;D<q;D++)N=a[K*q+D],R=null!=N?N.mask:null,null!=R?M(B,R,e,D,K,k):N?M(B,255,e,D,K,k):M(B,0,e,D,K,k);if(C)for(K=0;K<E;K++){D=new Uint8Array(g*
r);for(N=0;N<G;N++)for(R=0;R<q;R++){const I=a[N*q+R],P=I?.bandMasks?.[K]??I?.mask;null!=P?M(D,P,e,R,N,k):I?M(D,255,e,R,N,k):M(D,0,e,R,N,k)}C.push(D)}}a=new m({width:g,height:r,pixels:w,pixelType:A,bandMasks:C,mask:B});a.updateStatistics();return a}function f(a,e,g){const n=a.find(D=>null!=D);if(null==n)return null;var b=a.some(D=>null!=D?!!D.mask:!0);const {width:k,height:x}=e;e=b?new Uint8Array(k*x):null;({blockWidths:g}=g);const E=[],r=n.getPlaneCount(),A=m.getPixelArrayConstructor(n.pixelType);
if(b)for(let D=0,N=0;D<a.length;N+=g[D],D++)if(b=a[D],F(b)){var w=b.mask;for(var q=0;q<x;q++)for(var G=0;G<g[D];G++)e[q*k+G+N]=null==w?255:w[q*b.width+G]}w=(b=a.some(D=>D?.bandMasks&&1<D.bandMasks.length))?[]:void 0;q=k*x;for(G=0;G<r;G++){const D=new A(q),N=b?new Uint8Array(q):void 0;for(let R=0,I=0;R<a.length;I+=g[R],R++){const P=a[R];if(F(P)){var B=P.pixels[G];if(null!=B){for(var K=0;K<x;K++)for(var C=0;C<g[R];C++)D[K*k+C+I]=B[K*P.width+C];if(N)for(B=P.bandMasks?.[G]??P.mask,K=0;K<x;K++)for(C=0;C<
g[R];C++)N[K*k+C+I]=B?B[K*P.width+C]:255}}}E.push(D);w&&N&&w.push(N)}a=new m({width:k,height:x,mask:e,bandMasks:w,pixels:E,pixelType:n.pixelType});a.updateStatistics();return a}function h(a){if(!F(a))return null;const e=a.clone(),{width:g,height:n,pixels:b}=a;var k=b[0];const x=e.pixels[0];a=a.mask;for(let A=2;A<n-1;A++){const w=new Map;for(var E=A-2;E<A+2;E++)for(var r=0;4>r;r++){const q=E*g+r;c(w,k[q],a?a[q]:1)}x[A*g]=l(w);x[A*g+1]=x[A*g+2]=x[A*g];for(E=3;E<g-1;E++)r=(A-2)*g+E+1,c(w,k[r],a?a[r]:
1),r=(A-1)*g+E+1,c(w,k[r],a?a[r]:1),r=A*g+E+1,c(w,k[r],a?a[r]:1),r=(A+1)*g+E+1,c(w,k[r],a?a[r]:1),r=(A-2)*g+E-3,p(w,k[r],a?a[r]:1),r=(A-1)*g+E-3,p(w,k[r],a?a[r]:1),r=A*g+E-3,p(w,k[r],a?a[r]:1),r=(A+1)*g+E-3,p(w,k[r],a?a[r]:1),x[A*g+E]=l(w);x[A*g+E+1]=x[A*g+E]}for(k=0;k<g;k++)x[k]=x[g+k]=x[2*g+k],x[(n-1)*g+k]=x[(n-2)*g+k];e.updateStatistics();return e}function l(a){if(0===a.size)return 0;let e=0,g=-1,n=0;const b=a.keys();let k=b.next();for(;!k.done;)n=a.get(k.value),n>e&&(g=k.value,e=n),k=b.next();
return g}function p(a,e,g){0!==g&&(g=a.get(e),1===g?a.delete(e):a.set(e,g-1))}function c(a,e,g){0!==g&&a.set(e,a.has(e)?a.get(e)+1:1)}function u(a,e,g){let {x:n,y:b}=e;const {width:k,height:x}=g;if(0===n&&0===b&&x===a.height&&k===a.width)return a;const {width:E,height:r}=a;e=Math.max(0,b);const A=Math.max(0,n),w=Math.min(n+k,E),q=Math.min(b+x,r);if(0>w||0>q||!F(a))return null;n=Math.max(0,-n);b=Math.max(0,-b);var {pixels:G}=a,B=k*x,K=G.length;const C=[];for(var D=0;D<K;D++){var N=G[D],R=m.createEmptyBand(a.pixelType,
B);for(let I=e;I<q;I++){const P=I*E;let O=(I+b-e)*k+n;for(let S=A;S<w;S++)R[O++]=N[P+S]}C.push(R)}G=new Uint8Array(B);B=a.mask;for(K=e;K<q;K++)for(D=K*E,N=(K+b-e)*k+n,R=A;R<w;R++)G[N++]=B?B[D+R]:1;a=new m({width:g.width,height:g.height,pixelType:a.pixelType,pixels:C,mask:G});a.updateStatistics();return a}function y(a,e=!0){if(!F(a))return null;const {pixels:g,width:n,height:b,mask:k,pixelType:x}=a;a=[];const E=Math.round(n/2),r=Math.round(b/2),A=b-1,w=n-1;for(var q=0;q<g.length;q++){var G=g[q],B=
m.createEmptyBand(x,E*r),K=0;for(var C=0;C<b;C+=2)for(var D=0;D<n;D+=2){var N=G[C*n+D];if(e){var R=D===w?N:G[C*n+D+1];const I=C===A?N:G[C*n+D+n],P=D===w?I:C===A?R:G[C*n+D+n+1];B[K++]=(N+R+I+P)/4}else B[K++]=N}a.push(B)}q=null;if(null!=k)for(q=new Uint8Array(E*r),G=0,B=0;B<b;B+=2)for(K=0;K<n;K+=2)C=k[B*n+K],e?(D=K===w?C:k[B*n+K+1],N=B===A?C:k[B*n+K+n],R=K===w?N:B===A?D:k[B*n+K+n+1],q[G++]=C*D*N*R?1:0):q[G++]=C;return new m({width:E,height:r,pixelType:x,pixels:a,mask:q})}function v(a,e,g,n,b=0){const {width:k,
height:x}=a,{width:E,height:r}=e;a=n.cols;n=n.rows;e=Math.ceil(E/a-.1/a);const A=Math.ceil(r/n-.1/n);let w,q,G,B,K;const C=e*a;var D=C*A*n;const N=new Float32Array(D),R=new Float32Array(D),I=new Uint32Array(D),P=new Uint32Array(D);let O=0,S,W;for(let Z=0;Z<A;Z++)for(let ca=0;ca<e;ca++){var X=12*(Z*e+ca);D=g[X];w=g[X+1];q=g[X+2];G=g[X+3];B=g[X+4];K=g[X+5];for(var ba=0;ba<n;ba++){O=(Z*n+ba)*C+ca*a;W=(ba+.5)/n;for(let aa=0;aa<ba;aa++)S=(aa+.5)/a,N[O+aa]=(D*S+w*W+q)*k+b,R[O+aa]=(G*S+B*W+K)*x+b,I[O+aa]=
Math.floor(N[O+aa]),P[O+aa]=Math.floor(R[O+aa])}X+=6;D=g[X];w=g[X+1];q=g[X+2];G=g[X+3];B=g[X+4];K=g[X+5];for(X=0;X<n;X++)for(O=(Z*n+X)*C+ca*a,W=(X+.5)/n,ba=X;ba<a;ba++)S=(ba+.5)/a,N[O+ba]=(D*S+w*W+q)*k+b,R[O+ba]=(G*S+B*W+K)*x+b,I[O+ba]=Math.floor(N[O+ba]),P[O+ba]=Math.floor(R[O+ba])}return{offsets_x:N,offsets_y:R,offsets_xi:I,offsets_yi:P,gridWidth:C}}d.NoDataInterpretation=void 0;(function(a){a[a.matchAny=0]="matchAny";a[a.matchAll=1]="matchAll"})(d.NoDataInterpretation||(d.NoDataInterpretation=
{}));d.MissingBandAction=void 0;(function(a){a[a.bestMatch=0]="bestMatch";a[a.fail=1]="fail"})(d.MissingBandAction||(d.MissingBandAction={}));d.approximateTransform=function(a,e,g,n,b="nearest"){if(!F(a))return null;"majority"===b&&(a=h(a));const {pixels:k,mask:x,bandMasks:E,pixelType:r}=a,A=a.width;var w=a.height;const q=m.getPixelArrayConstructor(r),G=k.length,{width:B,height:K}=e;a=!1;for(var C=0;C<g.length;C+=3)-1===g[C]&&-1===g[C+1]&&-1===g[C+2]&&(a=!0);const {offsets_x:D,offsets_y:N,offsets_xi:R,
offsets_yi:I,gridWidth:P}=v({width:A,height:w},e,g,n,"majority"===b?.5:0);let O;e=(W,X,ba,Z)=>{const ca=W instanceof Float32Array||W instanceof Float64Array?0:.5;for(let aa=0;aa<K;aa++){O=aa*P;for(let ea=0;ea<B;ea++){if(0>D[O]||0>N[O])W[aa*B+ea]=0;else if(Z)W[aa*B+ea]=X[R[O]+I[O]*A];else{const ha=Math.floor(D[O]),fa=Math.floor(N[O]),ja=Math.ceil(D[O]),ia=Math.ceil(N[O]),na=D[O]-ha,qa=N[O]-fa;W[aa*B+ea]=!ba||ba[ha+fa*A]&&ba[ja+fa*A]&&ba[ha+ia*A]&&ba[ja+ia*A]?(1-qa)*((1-na)*X[ha+fa*A]+na*X[ja+fa*A])+
qa*((1-na)*X[ha+ia*A]+na*X[ja+ia*A])+ca:X[R[O]+I[O]*A]}O++}}};g=[];n=E?.length===G;w=[];for(C=0;C<G;C++){if(n){var S=new Uint8Array(B*K);e(S,E[C],E[C],!0);w.push(S)}S=new q(B*K);e(S,k[C],n?E[C]:x,"nearest"===b||"majority"===b);g.push(S)}b=new m({width:B,height:K,pixelType:r,pixels:g,bandMasks:n?w:void 0});if(null!=x)b.mask=new Uint8Array(B*K),e(b.mask,x,x,!0);else if(a)for(b.mask=new Uint8Array(B*K),a=0;a<B*K;a++)b.mask[a]=0>D[a]||0>N[a]?0:1;b.updateStatistics();return b};d.clip=u;d.clipTile=function(a){const {pixelBlock:e,
tileSize:g,level:n,row:b,col:k,useBilinear:x}=a;if(!F(e))return null;const {width:E,height:r}=g;var A=2**n;a=A*E;A*=r;a=u(e,{y:b*A,x:k*a},{width:a,height:A});if(!a)return null;for(A=n;0<A;A--)a=y(a,x);return a};d.colorize=function(a,e){if(!F(a)||!e||!e.indexedColormap&&!e.indexed2DColormap)return a;const g=a.clone();var n=g.pixels;let b=g.mask;const k=g.width*g.height;if(1!==n.length)return a;const {indexedColormap:x,indexed2DColormap:E,offset:r,alphaSpecified:A}=e;a=0;n=n[0];e=new Uint8Array(n.length);
const w=new Uint8Array(n.length),q=new Uint8Array(n.length);var G=0;if(x){const B=x.length-1;if(null!=b)for(a=0;a<k;a++)b[a]&&(G=4*(n[a]-r),G<r||G>B?b[a]=0:(e[a]=x[G],w[a]=x[G+1],q[a]=x[G+2],b[a]=x[G+3]));else{b=new Uint8Array(k);for(a=0;a<k;a++)G=4*(n[a]-r),G<r||G>B?b[a]=0:(e[a]=x[G],w[a]=x[G+1],q[a]=x[G+2],b[a]=x[G+3]);g.mask=b}}else if(E)if(null!=b)for(a=0;a<k;a++)b[a]&&(G=E[n[a]],e[a]=G[0],w[a]=G[1],q[a]=G[2],b[a]=G[3]);else{b=new Uint8Array(k);for(a=0;a<k;a++)G=E[n[a]],e[a]=G[0],w[a]=G[1],q[a]=
G[2],b[a]=G[3];g.mask=b}g.pixels=[e,w,q];g.statistics=null;g.pixelType="u8";g.maskIsAlpha=A;return g};d.compositeBands=function(a){if(!a?.length||a.some(r=>!F(r)))return null;if(1===a.length)return a[0]?.clone()??null;const {width:e,height:g,pixelType:n}=a[0];if(a.some(r=>r.width!==e||r.height!==g))return null;const b=a.map(({mask:r})=>r).filter(r=>null!=r);let k=null;b.length&&(k=new Uint8Array(e*g),k.set(b[0]),1<b.length&&L(b.slice(1),k));const x=[];a.forEach(({pixels:r})=>x.push(...r));const E=
[];a.map(({statistics:r})=>r).filter(r=>r?.length).forEach(r=>E.push(...r));return new m({pixelType:n,width:e,height:g,mask:k,pixels:x,statistics:E.length?E:null})};d.createColormapLUT=function(a){if(a){var e=a.colormap;if(e&&0!==e.length){e=e.sort((A,w)=>A[0]-w[0]);var g=0;0>e[0][0]&&(g=e[0][0]);var n=Math.max(256,e[e.length-1][0]-g+1),b=new Uint8Array(4*n),k=[],x=0,E=0,r=5===e[0].length;if(65536<n)return e.forEach(A=>{k[A[0]-g]=r?A.slice(1):A.slice(1).concat([255])}),{indexed2DColormap:k,offset:g,
alphaSpecified:r};if(a.fillUnspecified)for(a=e[E],x=a[0]-g;x<n;x++)b[4*x]=a[1],b[4*x+1]=a[2],b[4*x+2]=a[3],b[4*x+3]=r?a[4]:255,x===a[0]-g&&(a=E===e.length-1?a:e[++E]);else for(x=0;x<e.length;x++)a=e[x],E=4*(a[0]-g),b[E]=a[1],b[E+1]=a[2],b[E+2]=a[3],b[E+3]=r?a[4]:255;return{indexedColormap:b,offset:g,alphaSpecified:r}}}};d.createMaskLUT=function(a,e,g){if("u8"!==a&&"s8"!==a&&"u16"!==a&&"s16"!==a)return null;var n=a.includes("16")?65536:256;a=a.includes("s")?-n/2:0;n=new Uint8Array(n);if(e)for(let k=
0;k<e.length;k++){var b=Math.ceil(e[2*k]-a);const x=Math.floor(e[2*k+1]-a);for(;b<=x;b++)n[b]=255}else n.fill(255);if(g)for(e=0;e<g.length;e++)n[g[e]-a]=0;return{lut:n,offset:a}};d.createRemapLUT=function(a){const {srcPixelType:e,inputRanges:g,outputValues:n,allowUnmatched:b,noDataRanges:k,isLastInputRangeInclusive:x,outputPixelType:E}=a;if("u8"!==e&&"s8"!==e&&"u16"!==e&&"s16"!==e)return null;var r=e.includes("16")?65536:256;a=e.includes("s")?-r/2:0;const A=m.createEmptyBand(E,r);r=new Uint8Array(r);
b&&r.fill(255);const [w,q]=z.getPixelValueRange(E);if(g?.length&&n?.length){var G=g.map(D=>D-1E-6);G[0]=g[0];x&&(G[G.length-1]=g[g.length-1]);for(var B=0;B<G.length;B++){var K=n[B]>q?q:n[B]<w?w:n[B],C=Math.ceil(G[2*B]-a);const D=Math.floor(G[2*B+1]-a);for(;C<=D;C++)A[C]=K,r[C]=255}}if(k?.length)for(G=0;G<k.length;G++)for(K=Math.ceil(k[2*G]-a),B=Math.floor(k[2*G+1]-a);K<=B;K++)r[K]=0;return{lut:A,offset:a,mask:r}};d.extractBands=function(a,e){return e?.length&&F(a)?a.extractBands(e):a};d.getClipBounds=
T;d.getLocalArithmeticNorthRotations=function(a,e){const {coefficients:g,spacing:n}=e,{offsets_x:b,offsets_y:k,gridWidth:x}=v(a,a,g,{rows:n[0],cols:n[1]}),{width:E,height:r}=a;a=new Float32Array(E*r);e=180/Math.PI;for(let q=0;q<r;q++)for(let G=0;G<E;G++){var A=q*x+G,w=0===q?A:A-x;const B=q===r-1?A:A+x;A=b[w]-b[B];w=k[B]-k[w];isNaN(A)||isNaN(w)?a[q*E+G]=90:(w=Math.atan2(w,A)*e,w=(360+w)%360,a[q*E+G]=w)}return a};d.interpolateOffsets=v;d.isValidPixelBlock=F;d.lookupBandValues=t;d.lookupPixels=function(a,
e){if(!F(a))return null;const {pixels:g,mask:n}=a,b=g.length;let k=e.lut;const {offset:x}=e;k&&1===k[0].length&&(k=g.map(()=>k));const E=[];e=e.outputPixelType||"u8";for(let r=0;r<b;r++){const A=t(g[r],n,k[r],x||0,e);E.push(A)}a=new m({width:a.width,height:a.height,pixels:E,mask:n,pixelType:e});a.updateStatistics();return a};d.mask=function(a,e){if(!F(a))return null;const {width:g,height:n,pixels:b}=a;var k=g*n;const x=new Uint8Array(k);a.mask?x.set(a.mask):x.fill(255);a=b.length;const {includedRanges:E,
noDataValues:r,outputPixelType:A,matchAll:w,lookups:q}=e;if(q){k=[];for(e=0;e<a;e++){var G=q[e];G=t(b[e],x,G.lut,G.offset||0,"u8");k.push(G)}1===k.length?x.set(k[0]):w?Q(k,x):L(k,x)}else if(w){e=[];for(G=0;G<a;G++){const B=new Uint8Array(k);B.set(x);J(b[G],E?.slice(2*G,2*G+2),r?.[G],B);e.push(B)}1===e.length?x.set(e[0]):Q(e,x)}else for(k=0;k<a;k++)J(b[k],E?.slice(2*k,2*k+2),r?.[k],x);return new m({width:g,height:n,pixelType:A,pixels:b,mask:x})};d.maxMapSizeGpu=6;d.mosaic=V;d.mosaicPixelData=function(a,
e){if(!a||0===a.length)return null;var g=a.find(q=>q.pixelBlock);if(null==g?.pixelBlock)return null;var n=(g.extent.xmax-g.extent.xmin)/g.pixelBlock.width;const b=(g.extent.ymax-g.extent.ymin)/g.pixelBlock.height,k=.01*Math.min(n,b),x=a.sort((q,G)=>Math.abs(q.extent.ymax-G.extent.ymax)>k?G.extent.ymax-q.extent.ymax:Math.abs(q.extent.xmin-G.extent.xmin)>k?q.extent.xmin-G.extent.xmin:0);var E=Math.min.apply(null,x.map(q=>q.extent.xmin));const r=Math.min.apply(null,x.map(q=>q.extent.ymin)),A=Math.max.apply(null,
x.map(q=>q.extent.xmax)),w=Math.max.apply(null,x.map(q=>q.extent.ymax));a={x:Math.round((e.xmin-E)/n),y:Math.round((w-e.ymax)/b)};E={width:Math.round((A-E)/n),height:Math.round((w-r)/b)};n={width:Math.round((e.xmax-e.xmin)/n),height:Math.round((e.ymax-e.ymin)/b)};if(Math.round(E.width/g.pixelBlock.width)*Math.round(E.height/g.pixelBlock.height)!==x.length||0>a.x||0>a.y||E.width<n.width||E.height<n.height)return null;g=x.map(q=>q.pixelBlock);g=V(g,E,{clipOffset:a,clipSize:n});return{extent:e,pixelBlock:g}};
d.remap=function(a,e){if(!F(a))return null;const {width:g,height:n}=a,{inputRanges:b,outputValues:k,outputPixelType:x,noDataRanges:E,allowUnmatched:r,isLastInputRangeInclusive:A}=e;e=a.pixels[0];const w=m.createEmptyBand(x,e.length),q=a.mask,G=new Uint8Array(g*n);q?G.set(q):G.fill(255);const B=a.pixelType.startsWith("f")?1E-6:0;a=b.map(O=>O-B);a[0]=b[0];a[a.length-1]=b[b.length-1]+(A?1E-6:0);var K=b.length/2;const [C,D]=z.getPixelValueRange(x);for(var N=0;N<n;N++)for(var R=0;R<g;R++){var I=N*g+R;
if(G[I]){var P=e[I];let O=!1;for(let S=K-1;0<=S;S--)if(P===a[2*S]||P>a[2*S]&&P<a[2*S+1]){w[I]=k[S];O=!0;break}O||(r?w[I]=P>D?D:P<C?C:P:G[I]=0)}}if(a=E?.length)for(K=0;K<n;K++)for(N=0;N<g;N++)if(R=K*g+N,!q||q[R])for(I=e[R],P=0;P<a;P+=2)if(I>=E[P]&&I<=E[P+1]){w[R]=0;G[R]=0;break}return new m({width:g,height:n,pixelType:x,pixels:[w],mask:G})};d.remapColor=function(a,e){if(!F(a))return null;a=a.clone();var {pixels:g}=a;const n=a.width*a.height,b=e.length,k=Math.floor(b/2),x=e[Math.floor(k)];g=g[0];let E,
r,A,w,q,G,B=!1;const K=new Uint8Array(n),C=new Uint8Array(n),D=new Uint8Array(n);let N=a.mask;const R=4===e[0].mappedColor.length;N||(N=new Uint8Array(n),N.fill(R?255:1),a.mask=N);for(q=0;q<n;q++)if(N[q]){E=g[q];B=!1;G=k;r=x;A=0;for(w=b-1;1<w-A;){if(E===r.value){B=!0;break}E>r.value?A=G:w=G;G=Math.floor((A+w)/2);r=e[Math.floor(G)]}B||(E===e[A].value?(r=e[A],B=!0):E===e[w].value?(r=e[w],B=!0):E<e[A].value?(B=!1,r=null):E>e[A].value&&(E<e[w].value?(r=e[A],B=!0):w===b-1?(B=!1,r=null):(r=e[w],B=!0)));
B?(K[q]=r.mappedColor[0],C[q]=r.mappedColor[1],D[q]=r.mappedColor[2],N[q]=r.mappedColor[3]):K[q]=C[q]=D[q]=N[q]=0}a.pixels=[K,C,D];a.mask=N;a.pixelType="u8";a.maskIsAlpha=R;return a};d.resampleByMajority=h;d.setValidBoundary=function(a,e,g){if(!F(a))return null;const {width:n,height:b}=a,k=e.x;e=e.y;const x=g.width+k;g=g.height+e;if(0>k||0>e||x>n||g>b||0===k&&0===e&&x===n&&g===b)return a;a.mask||(a.mask=new Uint8Array(n*b));const E=a.mask;for(let r=0;r<b;r++){const A=r*n;for(let w=0;w<n;w++)E[A+w]=
r<e||r>=g||w<k||w>=x?0:1}a.updateStatistics();return a};d.split=function(a,e,g=0,n=!0){if(!F(a))return null;const {width:b,height:k}=e;let {width:x,height:E}=a;const r=new Map,A={x:0,y:0};g=1+g;for(let w=0;w<g;w++){const q=Math.ceil(x/b),G=Math.ceil(E/k);for(let B=0;B<G;B++){A.y=B*k;for(let K=0;K<q;K++){A.x=K*b;const C=u(a,A,e);r.set(`${w}/${B}/${K}`,C)}}w<g-1&&(a=y(a,n));x=Math.round(x/2);E=Math.round(E/2)}return r};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/screenUtils ../../core/libs/gl-matrix-2/factories/vec3f64 ../../layers/effects/jsonUtils ./cimSymbolUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){function h(b){b=b.symbolLayers;if(!b)return null;let k=null;b.forEach(x=>{"object"===x.type&&x.resource?.href||(k="water"===x.type?x.color:x.material?x.material.color:null)});return k?new z(k):null}function l(b,k){if(null==k||null==b)return b;b=b.toRgba();b[3]*=k;return new z(b)}function p(b,k,x){if(b=b.symbolLayers){var E=r=>{k=k??r??(null!=x?n:null);return l(k,x)};b.forEach(r=>{if("object"!==r.type||!r.resource?.href||k)if("water"===r.type)r.color=E(r.color);else{const A=
E(null!=r.material?r.material.color:null);null==r.material?r.material=new f.Symbol3DMaterial({color:A}):r.material.color=A;null!=x&&"outline"in r&&null!=r.outline?.color&&(r.outline.color=l(r.outline.color,x))}})}}async function c(b,k){(b=b.symbolLayers)&&await t.forEach(b,async x=>u(x,k))}async function u(b,k){switch(b.type){case "extrude":b.size="number"===typeof k[2]?k[2]:0;break;case "icon":case "line":case "text":k=y(k);null!=k&&(b.size=k);break;case "path":const x=a(k,L.ONES,[b.width,void 0,
b.height]);b.width=g(k[0],b.width,1,x);b.height=g(k[2],b.height,1,x);break;case "object":await v(b,k)}}function y(b){for(const k of b)if("number"===typeof k)return k;return null}async function v(b,k){const {resourceSize:x,symbolSize:E}=await e(b),r=a(k,x,E);b.width=g(k[0],E[0],x[0],r);b.depth=g(k[1],E[1],x[1],r);b.height=g(k[2],E[2],x[2],r)}function a(b,k,x){for(let E=0;3>E;E++){const r=b[E];switch(r){case "symbol-value":return b=x[E],null!=b?b/k[E]:1;case "proportional":break;default:if(r&&k[E])return r/
k[E]}}return 1}async function e(b){var {computeObjectLayerResourceSize:k}=await new Promise((q,G)=>d(["./symbolLayerUtils"],q,G));k=await k(b,10);const {width:x,height:E,depth:r}=b;b=[x,r,E];let A=1;for(var w=0;3>w;w++){const q=b[w];if(null!=q){A=q/k[w];break}}for(w=0;3>w;w++)null==b[w]&&(b[w]=k[w]*A);return{resourceSize:k,symbolSize:b}}function g(b,k,x,E){switch(b){case "proportional":return x*E;case "symbol-value":return null!=k?k:x;default:return b}}const n=new z("white");m.applyColorToSymbol=
function(b,k,x){if(b&&(k||null!=x))if(k&&=new z(k),F.isSymbol3D(b))p(b,k,x);else if(F.isSymbol2D(b)){if(k=k??b.color)b.color=l(k,x);null!=x&&"outline"in b&&b.outline?.color&&(b.outline.color=l(b.outline.color,x))}};m.applyOpacityToColor=l;m.applyRotationToSymbol=function(b,k,x){b&&null!=k&&(F.isSymbol3D(b)?(b=b.symbolLayers)&&b.forEach(E=>{if(E&&"object"===E.type)switch(x){case "tilt":E.tilt=k;break;case "roll":E.roll=k;break;default:E.heading=k}}):!F.isSymbol2D(b)||"simple-marker"!==b.type&&"picture-marker"!==
b.type&&"text"!==b.type||(b.angle=k))};m.applySizesToSymbol=async function(b,k){if(b&&k){if(F.isSymbol3D(b))return c(b,k);if(F.isSymbol2D(b)&&(k=y(k),null!=k))switch(b.type){case "simple-marker":b.size=k;break;case "picture-marker":const x=b.width/b.height;1<x?(b.width=k,b.height=k*x):(b.width=k*x,b.height=k);break;case "simple-line":b.width=k;break;case "text":b.font.size=k}}};m.fetchWebStyleSymbol=async function(b,k){const x=await b.fetchSymbol(k);return x?x:b.fetchCIMSymbol(k)};m.getCSSFilterFromEffectList=
function(b){if(!b)return null;b=b.effects.filter(k=>"bloom"!==k.type).map(k=>k.toJSON());return T.effectFunctionsFromJSON(b)};m.getColorFromSymbol=function(b,k){if(!b)return null;let x=null;F.isSymbol3D(b)?x=h(b):F.isSymbol2D(b)&&(x="cim"===b.type?M.getCIMSymbolColor(b):b.color?new z(b.color):null);return x?l(x,k):null};m.getIconHref=function(b){return b.resource?.href??""};m.getSymbolOutlineSize=function(b){return b?F.isSymbol3D(b)?(b=(b=b.symbolLayers?.at(-1))&&"outline"in b?b?.outline?.size:void 0,
null!=b?b:0):Q.px2pt(V.getStroke(b)?.width):0};m.isVolumetricSymbol=function(b){if(null==b||!("symbolLayers"in b)||null==b.symbolLayers)return!1;switch(b.type){case "point-3d":return b.symbolLayers.some(k=>"object"===k.type);case "line-3d":return b.symbolLayers.some(k=>"path"===k.type);case "polygon-3d":return b.symbolLayers.some(k=>"object"===k.type||"extrude"===k.type);default:return!1}};m.symbolHasExtrudeSymbolLayer=function(b){return null!=b&&"polygon-3d"===b.type&&b.symbolLayers.some(k=>"extrude"===
k.type)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports","../../Color","../cim/utils"],function(d,m,z){function F(f){f=z.toCIMSymbolJSON(f);if("CIMTextSymbol"===f?.type)return f.height??0;let h=0;if(f?.symbolLayers)for(const l of f.symbolLayers)z.isCIMMarker(l)&&null!=l.size&&l.size>h?h=l.size:z.isCIMStroke(l)&&null!=l.width&&l.width>h?h=l.width:z.isCIMFill(l);return h}function t(f,h,l,p){if(f)if("CIMTextSymbol"===
f.type)null!=f.height&&(f.height*=h);else{if(l&&f.effects)for(const c of f.effects)L(c,h);if(f.symbolLayers)for(const c of f.symbolLayers)switch(c.type){case "CIMPictureMarker":case "CIMVectorMarker":J(c,h,p);break;case "CIMPictureStroke":case "CIMSolidStroke":!p?.preserveOutlineWidth&&c.width&&(c.width*=h);break;case "CIMPictureFill":c.height&&(c.height*=h);c.offsetX&&(c.offsetX*=h);c.offsetY&&(c.offsetY*=h);break;case "CIMHatchFill":t(c.lineSymbol,h,!0,{...p,preserveOutlineWidth:!1}),c.offsetX&&
(c.offsetX*=h),c.offsetY&&(c.offsetY*=h),c.separation&&(c.separation*=h)}}}function J(f,h,l){if(f&&(f.markerPlacement&&Q(f.markerPlacement,h),f.offsetX&&(f.offsetX*=h),f.offsetY&&(f.offsetY*=h),f.anchorPoint&&"Absolute"===f.anchorPointUnits&&(f.anchorPoint={x:f.anchorPoint.x*h,y:f.anchorPoint.y*h}),f.size=null!=f.size?f.size*h:0,"CIMVectorMarker"===f.type&&f.markerGraphics))for(const p of f.markerGraphics)f.scaleSymbolsProportionally||t(p.symbol,h,!0,l)}function Q(f,h){z.isCIMMarkerStrokePlacement(f)&&
f.offset&&(f.offset*=h);switch(f.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":f.customEndingOffset&&(f.customEndingOffset*=h);f.offsetAlongLine&&(f.offsetAlongLine*=h);if(f.placementTemplate&&f.placementTemplate.length){var l=f.placementTemplate.map(p=>p*h);f.placementTemplate=l}break;case "CIMMarkerPlacementAlongLineVariableSize":f.maxRandomOffset&&(f.maxRandomOffset*=h);f.placementTemplate&&f.placementTemplate.length&&(l=f.placementTemplate.map(p=>
p*h),f.placementTemplate=l);break;case "CIMMarkerPlacementOnLine":f.startPointOffset&&(f.startPointOffset*=h);break;case "CIMMarkerPlacementAtExtremities":f.offsetAlongLine&&(f.offsetAlongLine*=h);break;case "CIMMarkerPlacementAtRatioPositions":f.beginPosition&&(f.beginPosition*=h);f.endPosition&&(f.endPosition*=h);break;case "CIMMarkerPlacementPolygonCenter":f.offsetX&&(f.offsetX*=h);f.offsetY&&(f.offsetY*=h);break;case "CIMMarkerPlacementInsidePolygon":f.offsetX&&(f.offsetX*=h),f.offsetY&&(f.offsetY*=
h),f.stepX&&(f.stepX*=h),f.stepY&&(f.stepY*=h)}}function L(f,h){switch(f.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":f.width&&(f.width*=h);break;case "CIMGeometricEffectBuffer":f.size&&(f.size*=h);break;case "CIMGeometricEffectCut":f.beginCut&&(f.beginCut*=h);f.endCut&&(f.endCut*=h);f.middleCut&&(f.middleCut*=h);break;case "CIMGeometricEffectDashes":f.customEndingOffset&&(f.customEndingOffset*=h);f.offsetAlongLine&&(f.offsetAlongLine*=h);if(f.dashTemplate&&f.dashTemplate.length){const l=
f.dashTemplate.map(p=>p*h);f.dashTemplate=l}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":f.length&&(f.length*=h);break;case "CIMGeometricEffectMove":f.offsetX&&(f.offsetX*=h);f.offsetY&&(f.offsetY*=h);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":f.offset&&(f.offset*=h);break;case "CIMGeometricEffectRegularPolygon":f.radius&&(f.radius*=h);break;case "CIMGeometricEffectTaperedPolygon":f.fromWidth&&(f.fromWidth*=
h);f.length&&(f.length*=h);f.toWidth&&(f.toWidth*=h);break;case "CIMGeometricEffectWave":f.amplitude&&(f.amplitude*=h),f.period&&(f.period*=h)}}function T(f,h){if(f){var l="CIMTextSymbol"===f.type?f.symbol:f;f="CIMPolygonSymbol"===f.type;if(l?.symbolLayers)for(const p of l.symbolLayers)if(!(p.colorLocked||f&&(z.isCIMStroke(p)||z.isCIMMarker(p)&&p.markerPlacement&&z.isCIMMarkerStrokePlacement(p.markerPlacement))))switch(p.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":p.tintColor&&
M(h,p.tintColor);break;case "CIMVectorMarker":p.markerGraphics?.forEach(c=>{T(c.symbol,h)});break;case "CIMSolidStroke":case "CIMSolidFill":M(h,p.color);break;case "CIMHatchFill":T(p.lineSymbol,h)}}}function M(f,h){for(const l of f)if(l.join(".")===h.join("."))return;f.push(h)}function V(f,h,l){if(f){var p="CIMTextSymbol"===f.type?f.symbol:f;f="CIMPolygonSymbol"===p?.type;if(p?.symbolLayers)for(const c of p.symbolLayers)if(!c.colorLocked){if(f)if(l){if({layersToColor:p}=l,(z.isCIMStroke(c)||z.isCIMMarker(c)&&
c.markerPlacement&&z.isCIMMarkerStrokePlacement(c.markerPlacement))&&"fill"===p||z.isCIMFill(c)&&"outline"===p)continue}else if(z.isCIMStroke(c)||z.isCIMMarker(c)&&c.markerPlacement&&z.isCIMMarkerStrokePlacement(c.markerPlacement))continue;p=h.toArray();switch(c.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":c.tintColor=p;break;case "CIMVectorMarker":c.markerGraphics?.forEach(u=>{V(u.symbol,h,l)});break;case "CIMSolidStroke":case "CIMSolidFill":c.color=p;break;case "CIMHatchFill":V(c.lineSymbol,
h,l)}}}}d.applyCIMSymbolColor=function(f,h,l){h instanceof m||(h=new m(h));(f=z.toCIMSymbolJSON(f))&&V(f,h,l)};d.applyCIMSymbolRotation=function(f,h,l=!1){f=z.toCIMSymbolJSON(f);l&&0!==h&&(h=360-h);if("CIMTextSymbol"===f?.type)f.angle=h;else if("CIMPointSymbol"===f?.type&&f.symbolLayers){l=h-(f.angle||0);for(const p of f.symbolLayers)if(z.isCIMMarker(p)){let c=p.rotation||0;c=p.rotateClockwise?c-l:c+l;p.rotation=c}f.angle=h}};d.getCIMSymbolColor=function(f){f=z.toCIMSymbolJSON(f);const h=[];T(f,h);
return h.length?new m(z.normalizeAlpha(h[0])):null};d.getCIMSymbolRotation=function(f,h=!1){f=z.toCIMSymbolJSON(f);return"CIMTextSymbol"===f?.type||"CIMPointSymbol"===f?.type?(f=f.angle,null!=f&&0!==f&&h?360-f:f??0):0};d.getCIMSymbolSize=F;d.getCIMSymbolType=function(f){f=z.toCIMSymbolJSON(f);if(!f)return null;switch(f.type){case "CIMPointSymbol":return"CIMPointSymbol";case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";
case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};d.scaleCIMMarker=J;d.scaleCIMSymbol=t;d.scaleCIMSymbolTo=function(f,h,l){if(f){var p=z.toCIMSymbolJSON(f);f=F(f);if(0===f){if(p)if("CIMTextSymbol"===p.type)p.height=h;else if(p.symbolLayers)for(const c of p.symbolLayers)switch(c.type){case "CIMPictureMarker":case "CIMVectorMarker":c.size=h;break;case "CIMPictureStroke":case "CIMSolidStroke":c.width=h}}else t(p,h/f,!1,l)}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/LRUCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(d,m,z,F,t,J,Q){function L(h){if(!h)return null;let l=null;switch(h.type){case "simple-fill":case "picture-fill":case "simple-marker":l=L(h.outline);break;case "simple-line":const p=J.pt2px(h.width);null!=h.style&&"none"!==h.style&&0!==p&&(l={color:h.color,style:f(h.style),width:p,cap:h.cap,join:"miter"===h.join?J.pt2px(h.miterLimit):
h.join},l.dashArray=T(l).join(",")||"none");break;default:l=null}return l}function T(h){if(!h?.style)return[];const {dashArray:l,style:p,width:c}=h;if("string"===typeof l&&"none"!==l)return l.split(",").map(v=>Number(v));const u=c??0,y=M.has(p)?M.get(p).map(v=>v*u):[];if("butt"!==h.cap)for(const [v,a]of y.entries())y[v]=1===v%2?a+u:Math.max(a-u,1);return y}const M=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,
3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),V=new t.LRUCache(1E3),f=(()=>{const h={};return l=>{if(h[l])return h[l];const p=l.replaceAll("-","");return h[l]=p}})();z=new z([128,128,128]);d.defaultThematicColor=z;d.dekebabifyLineStyle=f;d.getDashArray=T;d.getFill=function(h){const l=h.style;let p=null;if(h)switch(h.type){case "simple-marker":"cross"!==l&&"x"!==l&&(p=h.color);break;case "simple-fill":"solid"===l?p=h.color:"none"!==
l&&(p={type:"pattern",x:0,y:0,src:m.getAssetUrl(`esri/symbols/patterns/${l}.png`),width:5,height:5});break;case "picture-fill":p={type:"pattern",src:h.url,width:J.pt2px(h.width)*h.xscale,height:J.pt2px(h.height)*h.yscale,x:J.pt2px(h.xoffset),y:J.pt2px(h.yoffset)};break;case "text":p=h.color;break;case "cim":p=Q.getCIMSymbolColor(h)}return p};d.getPatternUrlWithColor=function(h,l){const p=h+"-"+l;return void 0!==V.get(p)?Promise.resolve(V.get(p)):F(h,{responseType:"image"}).then(c=>{c=c.data;const u=
c.naturalWidth,y=c.naturalHeight,v=document.createElement("canvas");v.width=u;v.height=y;const a=v.getContext("2d");a.fillStyle=l;a.fillRect(0,0,u,y);a.globalCompositeOperation="destination-in";a.drawImage(c,0,0);c=v.toDataURL();V.put(p,c);return c})};d.getStroke=L;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,z,F,t,J){var Q;m=Q=class extends m.JSONSupport{constructor(L){super(L);this.dimensionName=this.variableName=null;this.values=[];this.isSlice=!1}clone(){return new Q({variableName:this.variableName,dimensionName:this.dimensionName,values:z.clone(this.values),isSlice:this.isSlice})}};d.__decorate([F.property({type:String,json:{write:!0}})],m.prototype,"variableName",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],m.prototype,"dimensionName",void 0);d.__decorate([F.property({type:t.types.array(t.types.oneOf([t.types.native(Number),
t.types.array(t.types.native(Number))])),json:{write:!0}})],m.prototype,"values",void 0);d.__decorate([F.property({type:Boolean,json:{write:!0}})],m.prototype,"isSlice",void 0);return m=Q=d.__decorate([J.subclass("esri.layers.support.DimensionalDefinition")],m)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./imageryRendererUtils ./MosaicRule ./rasterEnums ./RasterFunction".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h){d.ExportImageServiceParameters=class extends z.JSONSupport{constructor(){super(...arguments);this.layer=null;this.pixelType=this.compression=void 0;this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(l,p,c){10.3>this.layer.version||(p[c]=l)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(l,p,c){this.format&&this.format.toLowerCase().includes("jpg")&&
null!=l&&(p[c]=l)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(l,p,c){"lerc"===this.format&&null!=l&&(p[c]=l)}get format(){return"vector-field"===this.layer.renderer?.type?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(l,p,c){"lerc"===this.format&&10.5<=this.layer.version&&(p[c]=l)}get version(){const l=
this.layer;l.commitProperty("bandIds");l.commitProperty("format");l.commitProperty("compressionQuality");l.commitProperty("compressionTolerance");l.commitProperty("interpolation");l.commitProperty("noData");l.commitProperty("noDataInterpretation");l.commitProperty("mosaicRule");l.commitProperty("rasterFunction");l.commitProperty("adjustAspectRatio");l.commitProperty("pixelFilter");l.commitProperty("definitionExpression");l.commitProperty("multidimensionalSubset");return(this._get("version")||0)+1}set version(l){this._set("version",
l)}get mosaicRule(){var l=this.layer;let p=l.mosaicRule;l=l.definitionExpression;p?l&&l!==p.where&&(p=p.clone(),p.where=l):l&&(p=new V({where:l}));return p}get rasterFunction(){const l=this.layer;let {rasterFunction:p}=l;const c=l.pixelFilter,u=!l.format||l.format.includes("jpg")||l.format.includes("png");p=this._addResampleRasterFunction(p);const y=l.multidimensionalSubset?.areaOfInterest;y&&(p=this._addClipFunction(p,y));u&&!c&&"vector-field"!==l.renderer?.type&&(p=this.combineRendererWithRenderingRule(p));
return p}combineRendererWithRenderingRule(l){const p=this.layer,{rasterInfo:c,renderer:u}=p;l=l||p.rasterFunction;return u&&M.isSupportedRendererType(u)?M.combineRenderingRules(M.convertRendererToRenderingRule(u,{rasterAttributeTable:c.attributeTable,pixelType:c.pixelType,dataType:c.dataType,bandNames:c.bandInfos.map(({name:y})=>y),convertColorRampToColormap:10.6>p.version,convertToRFT:!!l?.rasterFunctionDefinition,bandCount:c.bandCount}),l):l}_addResampleRasterFunction(l){if("vector-field"!==this.layer.renderer?.type||
"Resample"===l?.functionName)return l;let p=new h({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:this.layer.serviceRasterInfo.pixelSize}});p=l?.rasterFunctionDefinition?new h({rasterFunctionDefinition:M.convertRenderingRuleToRFT(p)}):p;return M.combineRenderingRules(p,l)}_addClipFunction(l,p){p=new h({functionName:"Clip",functionArguments:{ClippingGeometry:p.toJSON(),ClippingType:1}});return M.combineRenderingRules(p,
l)}};m.__decorate([F.property()],d.ExportImageServiceParameters.prototype,"layer",void 0);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,"adjustAspectRatio",null);m.__decorate([T.writer("adjustAspectRatio")],d.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,"bandIds",null);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,
"compression",void 0);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,"compressionQuality",null);m.__decorate([T.writer("compressionQuality")],d.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,"compressionTolerance",null);m.__decorate([T.writer("compressionTolerance")],d.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);m.__decorate([F.property({json:{write:!0}})],
d.ExportImageServiceParameters.prototype,"format",null);m.__decorate([F.property({type:String,json:{read:{reader:f.interpolationKebab.read},write:{writer:f.interpolationKebab.write}}})],d.ExportImageServiceParameters.prototype,"interpolation",null);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,"noData",null);m.__decorate([F.property({type:String,json:{read:{reader:f.noDataInterpretationKebab.read},write:{writer:f.noDataInterpretationKebab.write}}})],d.ExportImageServiceParameters.prototype,
"noDataInterpretation",null);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,"pixelType",void 0);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,"lercVersion",void 0);m.__decorate([T.writer("lercVersion")],d.ExportImageServiceParameters.prototype,"writeLercVersion",null);m.__decorate([F.property({type:Number})],d.ExportImageServiceParameters.prototype,"version",null);m.__decorate([F.property({json:{write:!0}})],d.ExportImageServiceParameters.prototype,
"mosaicRule",null);m.__decorate([F.property({json:{write:!0,name:"renderingRule"}})],d.ExportImageServiceParameters.prototype,"rasterFunction",null);d.ExportImageServiceParameters=m.__decorate([L.subclass("esri.layers.mixins.ExportImageServiceParameters")],d.ExportImageServiceParameters);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ./RasterFunction ./rasterFormats/pixelRangeUtils ./rasterFunctions/rasterFunctionSchema ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ../../renderers/visualVariables/SizeVariable".split(" "),
function(d,m,z,F,t,J,Q,L){function T(b,k){for(const x in b)"raster"===x.toLowerCase()&&("RasterFunctionVariable"===b[x].type?(b[x]=k.rasterFunctionDefinition,b[x].type="RasterFunctionTemplate"):"RasterFunctionTemplate"===b[x].type&&T(b[x].arguments,k))}function M(b){const k=m.clone(t.schema[b.functionName+"Function"]);b=b.functionArguments;for(const x in b)"raster"===x.toLowerCase()?(k.arguments[x]=M(b[x]),k.arguments[x].type="RasterFunctionTemplate"):"colormap"===x.toLowerCase()?(k.arguments[x].value=
v(b[x]),k.arguments.ColorSchemeType.value=0):k.arguments[x].value=b[x];return k}function V(b){const k=b?.Raster??b?.raster;return k&&"esri.layers.support.RasterFunction"===k.declaredClass?V(k.functionArguments):b}function f(b,k){const x=new z;x.functionName="VectorFieldRenderer";const {dataType:E,bandNames:r}=k,A="vector-uv"===E;let w;if(r&&2===r.length){var q=r.map(C=>C.toLowerCase());w=q.indexOf("magnitude");q=q.indexOf("direction")}if(-1===w||null===w)w=0,q=1;const G="arithmetic"===b.rotationType?
1:2,B="flow-from"===b.flowRepresentation?0:1,K=b.visualVariables?b.visualVariables.find(C=>"Magnitude"===C.field):new L;b={magnitudeBandID:w,directionBandID:q,isUVComponents:A,referenceSystem:G,massFlowAngleRepresentation:B,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:e[b.style.toLowerCase().replace("-","_")],minimumMagnitude:K.minDataValue,maximumMagnitude:K.maxDataValue,minimumSymbolSize:K.minSize,maximumSymbolSize:K.maxSize};x.functionArguments=b;b=
M(x);return k.convertToRFT?z.fromJSON({rasterFunctionDefinition:b}):x}function h(b,k){const x=k.convertToRFT,E=new z;E.functionName="Stretch";var r=n[Q.stretchTypeJSONDict.toJSON(b.stretchType)],A=y(b.statistics??[]);A={StretchType:r,Statistics:A,DRA:b.dynamicRangeAdjustment,UseGamma:b.useGamma,Gamma:b.gamma,ComputeGamma:b.computeGamma};null!=b.outputMin&&(A.Min=b.outputMin);null!=b.outputMax&&(A.Max=b.outputMax);r===n.standardDeviation?(A.NumberOfStandardDeviations=b.numberOfStandardDeviations,E.outputPixelType=
"u8"):r===n.percentClip?(A.MinPercent=b.minPercent,A.MaxPercent=b.maxPercent,E.outputPixelType="u8"):r===n.minMax?E.outputPixelType="u8":r===n.sigmoid&&(A.SigmoidStrengthLevel=b.sigmoidStrengthLevel);E.functionArguments=A;E.variableName="Raster";if(b.colorRamp){A=b.colorRamp;r=new z;if(x)r.functionArguments={ColorRamp:J.getRFxArgColorRampValue(A)};else{const w=J.getColorRampName(A,!0);w?r.functionArguments={colorRampName:w}:!k.convertColorRampToColormap||"algorithmic"!==A.type&&"multipart"!==A.type?
(b=b.colorRamp.toJSON(),"algorithmic"===b.type?b.algorithm=b.algorithm||"esriCIELabAlgorithm":"multipart"===b.type&&b.colorRamps?.length&&b.colorRamps.forEach(q=>q.algorithm=q.algorithm||"esriCIELabAlgorithm"),r.functionArguments={colorRamp:b}):r.functionArguments={Colormap:J.convertColorRampToColormap(A)}}r.variableName="Raster";r.functionName="Colormap";r.functionArguments.Raster=E;return x?new z({rasterFunctionDefinition:M(r)}):r}return x?new z({rasterFunctionDefinition:M(E)}):E}function l(b,k){const x=
[],E=[],r=[],A=[],{pixelType:w,rasterAttributeTable:q}=k,G=null==q?null:q.features,B=c(q);if(B&&G&&Array.isArray(G)&&b.classBreakInfos){b.classBreakInfos.forEach((N,R)=>{const I=N.symbol?.color;let P;I?.a&&null!=N.minValue&&null!=N.maxValue&&G.forEach(O=>{null!=N.minValue&&null!=N.maxValue&&(P=O.attributes[b.field],(P>=N.minValue&&P<N.maxValue||R===b.classBreakInfos.length-1&&P>=N.minValue)&&A.push([O.attributes[B],I.r,I.g,I.b]))})});var K=w?p(A,w):A,C=new z;C.functionName="Colormap";C.functionArguments=
{};C.functionArguments.Colormap=K;C.variableName="Raster";return k.convertToRFT?new z({rasterFunctionDefinition:M(C)}):C}b.classBreakInfos.forEach((N,R)=>{if(null!=N.minValue&&null!=N.maxValue){var I=N.symbol&&N.symbol.color;I?.a?(0===R?x.push(N.minValue,N.maxValue+1E-4):x.push(N.minValue+1E-4,N.maxValue+1E-4),E.push(R),A.push([R,I.r,I.g,I.b])):r.push(N.minValue,N.maxValue)}});K=w?p(A,w):A;C=new z;C.functionName="Remap";C.functionArguments={InputRanges:x,OutputValues:E,NoDataRanges:r};C.variableName=
"Raster";const D=new z;D.functionName="Colormap";D.functionArguments={Colormap:K,Raster:C};return k.convertToRFT?new z({rasterFunctionDefinition:M(D)}):D}function p(b,k){(k=a.has(k)?F.getPixelValueRange(k):null)&&b.push([Math.floor(k[0]-1),0,0,0],[Math.ceil(k[1]+1),0,0,0]);return b}function c(b){if(null!=b)return{fields:b}=b,b?.find(k=>k?.name&&"value"===k.name.toLowerCase())?.name}function u(b,k){const x=[],{pixelType:E,rasterAttributeTable:r}=k;var A=null==r?null:r.features;const w=c(r),q=b.defaultSymbol?.color?.toRgb();
var G=b.uniqueValueInfos;if(G)if(!A)for(b=0;b<G.length;b++){var B=G[b];A=B.symbol?.color;B=+B.value;if(A?.a){if(isNaN(B))return null;x.push([B,A.r,A.g,A.b])}}else if(w){const K=new Map;G.forEach(D=>{const N=D.value;D=D.symbol?.color;null!=N&&D?.a&&K.set(String(N),D.toRgb())});const C=b.field;A.forEach(({attributes:D})=>{const N=D[w];(D=K.get(String(D[C])))?x.push([N,...D]):q&&x.push([N,...q])})}G=E?p(x,E):x;b=new z;b.functionName="Colormap";b.functionArguments={};b.functionArguments.Colormap=G;b.variableName=
"Raster";return k.convertToRFT?new z({rasterFunctionDefinition:M(b)}):b}function y(b){const k=[];b?.forEach(x=>{Array.isArray(x)?k.push(x):null!=x.min&&null!=x.max&&k.push([x.min,x.max,x.avg||0,x.stddev||0])});return k}function v(b){const k=[],x=[];b.forEach(E=>{k.push(E[0]);x.push(J.convertRGBATo32Bit([...E.slice(1),255]))});return{type:"RasterColormap",values:k,colors:x}}const a=new Set("u1 u2 u4 u8 s8 u16 s16".split(" ")),e={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",
beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},g=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),n={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};d.combineRenderingRules=function(b,k){if(!b||!k)return m.clone(b||k);b=m.clone(b);if(b.functionDefinition&&k.rasterFunctionDefinition){const x=
k.rasterFunctionDefinition;if(x.thumbnail||x.thumbnailEx)x.thumbnail=x.thumbnailEx=void 0;T(b.functionDefinition.arguments,k);b.rasterFunctionDefinition=b.functionDefinition.toJSON()}else"none"!==k.functionName?.toLowerCase()&&(V(b.functionArguments).Raster=k);return b};d.convertRendererToRenderingRule=function(b,k){k=k||{};switch(b.type){case "raster-stretch":return h(b,k);case "class-breaks":return l(b,k);case "unique-value":return u(b,k);case "raster-colormap":var x=k;(k=b.extractColormap())&&
0!==k.length?({pixelType:b}=x,b=b?p(k,b):k,k=new z,k.functionName="Colormap",k.functionArguments={},k.functionArguments.Colormap=b,b=x.convertToRFT?new z({rasterFunctionDefinition:M(k)}):k):b=null;return b;case "vector-field":return f(b,k);case "raster-shaded-relief":x=k.convertToRFT;if("elevation"!==k.dataType&&("generic"!==k.dataType||1!==k.bandCount||"s16"!==k.pixelType&&"s32"!==k.pixelType&&"f32"!==k.pixelType&&"f64"!==k.pixelType))b=new z;else{k=new z;k.functionName="Hillshade";var E="traditional"===
b.hillshadeType?0:1,r="none"===b.scalingType?1:3,A={HillshadeType:E,SlopeType:r,ZFactor:b.zFactor};0===E&&(A.Azimuth=b.azimuth,A.Altitude=b.altitude);3===r&&(A.PSPower=b.pixelSizePower,A.PSZFactor=b.pixelSizeFactor);k.functionArguments=A;k.variableName="Raster";b.colorRamp&&(k.functionName="ShadedRelief",x?A.ColorRamp=J.getRFxArgColorRampValue(b.colorRamp):A.Colormap=J.convertColorRampToColormap(b.colorRamp));b=x?new z({rasterFunctionDefinition:M(k)}):k}return b;case "flow":throw Error("Unsupported rendering rule.");
}};d.convertRenderingRuleToRFT=M;d.isSupportedRendererType=function(b){return g.has(b.type)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunction":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./RasterFunctionTemplate".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V){var f;const h=new Set(["raster","raster2","dem","fillraster"]),l=new Set(["rasters"]),p=v=>v?.rasterFunction?y.fromJSON(v):v,c=v=>v&&v instanceof y?v.toJSON():v,u=v=>v?.functionName&&!v.declaredClass?new y(v):v;t={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:V}},json:{write:!0,name:"rasterFunctionDefinition"}};let y=f=class extends m.JSONSupport{constructor(v){super(v);this.functionName=null;this.outputPixelType="unknown";this.functionDefinition=this.variableName=
null}set functionArguments(v){if(v){const a=Object.keys(v);if(a.some(e=>{var g;if(g=h.has(e.toLowerCase()))e=v[e],g=e?.functionName&&!e.declaredClass;return g})||a.some(e=>l.has(e.toLowerCase())&&Array.isArray(v[e])&&v[e].some(g=>g?.functionName&&!g.declaredClass))){v=z.clone(v);for(const e of a)h.has(e.toLowerCase())?v[e]=u(v[e]):l.has(e.toLowerCase())&&Array.isArray(v[e])&&(v[e]=v[e].map(g=>u(g)))}}this._set("functionArguments",v)}readFunctionArguments(v){if(null==v)var a=null;else{v=z.clone(v);
var e={};for(a of Object.keys(v))h.has(a.toLowerCase())?e[a]=p(v[a]):l.has(a.toLowerCase())&&Array.isArray(v[a])?e[a]=v[a].map(p):e[a]=v[a];a=e}return a}writeFunctionArguments(v,a,e){const g={};for(const n of Object.keys(v))h.has(n.toLowerCase())?g[n]=c(v[n]):l.has(n.toLowerCase())&&Array.isArray(v[n])?g[n]=v[n].map(c):g[n]=c(v[n]);a[e]=g}readFunctionName(v,a){v=a.rasterFunctionInfos;const e=a.name;return e?e:v?.length&&"None"!==v[0].name?v[0].name:a.rasterFunctionDefinition?a.rasterFunctionDefinition.name:
a.rasterFunction}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(v){this.functionDefinition=v?V.fromJSON(v):null}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes('"type":"ClipFunction"'):JSON.stringify(this).includes('"rasterFunction":"Clip"')}clone(){return new f({functionName:this.functionName,functionArguments:z.clone(this.functionArguments),outputPixelType:this.outputPixelType,
variableName:this.variableName,rasterFunctionDefinition:z.clone(this.rasterFunctionDefinition)})}};d.__decorate([F.property({json:{type:Object,name:"rasterFunctionArguments"}})],y.prototype,"functionArguments",null);d.__decorate([L.reader("functionArguments")],y.prototype,"readFunctionArguments",null);d.__decorate([M.writer("functionArguments")],y.prototype,"writeFunctionArguments",null);d.__decorate([F.property({json:{type:String,write:{target:"rasterFunction"}}})],y.prototype,"functionName",void 0);
d.__decorate([L.reader("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],y.prototype,"readFunctionName",null);d.__decorate([Q.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),F.property({json:{default:"unknown"}})],y.prototype,"outputPixelType",void 0);d.__decorate([F.property({type:String,json:{read:!0,write:!0}})],y.prototype,"variableName",
void 0);d.__decorate([F.property()],y.prototype,"rasterFunctionDefinition",null);d.__decorate([F.property(t)],y.prototype,"functionDefinition",void 0);d.__decorate([F.property()],y.prototype,"hasClipFunction",null);return y=f=d.__decorate([T.subclass("esri.layers.support.RasterFunction")],y)})},"esri/layers/support/RasterFunctionTemplate":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ./RasterFunctionInfo ./RasterFunctionProperties".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){m=new m.JSONMap({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});z=class extends z.JSONSupport{constructor(){super(...arguments);this.functionType="mosaic";this.type="RasterFunctionTemplate"}};d.__decorate([F.property({type:[String],json:{write:!0}})],z.prototype,"aliases",void 0);d.__decorate([F.property({type:Object,json:{write:!0}})],z.prototype,"arguments",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],z.prototype,"description",void 0);
d.__decorate([F.property({type:T,json:{write:!0,name:"function"}})],z.prototype,"functionInfo",void 0);d.__decorate([F.property({type:m.apiValues,json:{type:[0,1,2],read:m.read,write:m.write}})],z.prototype,"functionType",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],z.prototype,"group",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],z.prototype,"help",void 0);d.__decorate([F.property({type:Number,json:{type:t.Integer,write:!0,name:"_object_id"}})],z.prototype,
"id",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);d.__decorate([F.property({type:String,json:{write:!0,name:"definition"}})],z.prototype,"queryDefinition",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],z.prototype,"tag",void 0);d.__decorate([F.property({type:M,json:{write:!0}})],z.prototype,"properties",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],z.prototype,"thumbnail",void 0);d.__decorate([F.property({type:String,
json:{write:!0}})],z.prototype,"thumbnailEx",void 0);d.__decorate([F.property({json:{type:["RasterFunctionTemplate"],write:!0}})],z.prototype,"type",void 0);return z=d.__decorate([L.subclass("esri.layers.support.RasterFunctionTemplate")],z)})},"esri/layers/support/RasterFunctionInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ./rasterEnums".split(" "),
function(d,m,z,F,t,J,Q,L){m=class extends m.JSONSupport{constructor(){super(...arguments);this.pixelType="unknown"}};d.__decorate([z.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);d.__decorate([z.property({type:String,json:{write:!0}})],m.prototype,"description",void 0);d.__decorate([z.property({type:F.Integer,json:{type:F.Integer,write:!0,name:"_object_id"}})],m.prototype,"id",void 0);d.__decorate([z.property({type:String,json:{type:L.pixelTypeKebabDict.jsonValues,read:L.pixelTypeKebabDict.read,
write:L.pixelTypeKebabDict.write}})],m.prototype,"pixelType",void 0);d.__decorate([z.property({type:String,json:{write:!0}})],m.prototype,"type",void 0);return m=d.__decorate([Q.subclass("esri.layers.support.RasterFunctionInfo")],m)})},"esri/layers/support/rasterEnums":function(){define(["exports","../../core/jsonMap"],function(d,m){const z=m.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),F=m.strict()({esriNoDataMatchAny:"any",
esriNoDataMatchAll:"all"});m=m.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});d.interpolationKebab=z;d.noDataInterpretationKebab=F;d.pixelTypeKebabDict=m;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/RasterFunctionProperties":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ./RasterFunctionVariable".split(" "),
function(d,m,z,F,t,J,Q,L){t={key:"type",base:null,typeMap:{RasterFunctionVariable:L}};m=class extends m.JSONSupport{};d.__decorate([z.property({types:t,json:{types:t,name:"MatchVariable"}})],m.prototype,"matchVariable",void 0);d.__decorate([z.property({types:t,json:{types:t,name:"UnionDimension"}})],m.prototype,"unionDimension",void 0);d.__decorate([z.property({type:Number,json:{type:F.Integer,write:!0,name:"_object_id"}})],m.prototype,"id",void 0);d.__decorate([z.property({type:String,json:{write:!0}})],
m.prototype,"type",void 0);return m=d.__decorate([Q.subclass("esri.layers.support.RasterFunctionProperties")],m)})},"esri/layers/support/RasterFunctionVariable":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(d,m,z,F,t,J,Q){m=class extends m.JSONSupport{constructor(){super(...arguments);this.isPublic=
this.isDataset=!1;this.type="RasterFunctionVariable"}};d.__decorate([z.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);d.__decorate([z.property({type:Number,json:{type:F.Integer,write:!0,name:"_object_id"}})],m.prototype,"id",void 0);d.__decorate([z.property({type:Boolean,json:{write:!0}})],m.prototype,"isDataset",void 0);d.__decorate([z.property({type:Boolean,json:{write:!0}})],m.prototype,"isPublic",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"value",void 0);
d.__decorate([z.property({type:String,json:{write:!0}})],m.prototype,"type",void 0);return m=d.__decorate([Q.subclass("esri.layers.support.RasterFunctionVariable")],m)})},"esri/layers/support/rasterFunctions/rasterFunctionSchema":function(){define(["exports"],function(d){d.schema={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,
isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",
value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},
StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",
name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},
UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},
InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},
functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,
type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",
description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",
isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},
SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},
functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",
isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},
PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",
isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/support/MosaicRule":function(){define("../../chunks/tslib.es6 ../../core/deprecate ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l,p){var c;const u=z.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),y=z.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});z=c=class extends F.JSONSupport{constructor(v){super(v);this.ascending=!0;this.where=
this.viewpoint=this.sortValue=this.sortField=this.operation=this.objectIds=this.multidimensionalDefinition=this.method=this.lockRasterIds=this.itemRasterFunction=null}readAscending(v,a){return null!=a.ascending?a.ascending:null!=a.sortAscending?a.sortAscending:!0}get itemRenderingRule(){m.deprecatedProperty(J.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0});return this._get("itemRasterFunction")}set itemRenderingRule(v){m.deprecatedProperty(J.getLogger(this),
"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0});this._set("itemRasterFunction",v)}readMethod(v,a){v=a.mosaicMethod||a.defaultMosaicMethod;switch(v?v.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":v="esriMosaicAttribute";break;case "lockraster":v="esriMosaicLockRaster";break;case "center":v="esriMosaicCenter";break;case "northwest":v="esriMosaicNorthwest";break;case "nadir":v="esriMosaicNadir";break;case "viewpoint":v="esriMosaicViewpoint";
break;case "seamline":v="esriMosaicSeamline";break;case "none":v="esriMosaicNone";break;default:v="esriMosaicNone"}return y.fromJSON(v)}writeMultidimensionalDefinition(v,a,e){null!=v&&(v=v.filter(({variableName:g,dimensionName:n})=>g&&"*"!==g||n),v.length&&(a[e]=v.map(g=>g.toJSON())))}readOperation(v,a){v=a.mosaicOperation;a=a.mosaicOperator?.toLowerCase();a=v||(a?u.toJSON(a):null);return u.fromJSON(a)||"first"}castSortValue(v){return null==v||"string"===typeof v||"number"===typeof v?v:`${v}`}clone(){return new c({ascending:this.ascending,
itemRasterFunction:t.clone(this.itemRasterFunction),lockRasterIds:t.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:t.clone(this.multidimensionalDefinition),objectIds:t.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:t.clone(this.viewpoint),where:this.where})}};d.__decorate([Q.property({type:Boolean,json:{write:!0}})],z.prototype,"ascending",void 0);d.__decorate([T.reader("ascending",["ascending","sortAscending"])],
z.prototype,"readAscending",null);d.__decorate([Q.property({type:p,json:{name:"itemRenderingRule",write:!0}})],z.prototype,"itemRasterFunction",void 0);d.__decorate([Q.property({type:p})],z.prototype,"itemRenderingRule",null);d.__decorate([Q.property({type:[f.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],z.prototype,"lockRasterIds",void 0);d.__decorate([Q.property({type:String,json:{type:y.jsonValues,write:{target:"mosaicMethod",writer:y.write}}})],z.prototype,
"method",void 0);d.__decorate([T.reader("method",["mosaicMethod","defaultMosaicMethod"])],z.prototype,"readMethod",null);d.__decorate([Q.property({type:[l],json:{write:!0}})],z.prototype,"multidimensionalDefinition",void 0);d.__decorate([V.writer("multidimensionalDefinition")],z.prototype,"writeMultidimensionalDefinition",null);d.__decorate([Q.property({type:[f.Integer],json:{name:"fids",write:!0}})],z.prototype,"objectIds",void 0);d.__decorate([Q.property({json:{type:u.jsonValues,read:{reader:u.read},
write:{target:"mosaicOperation",writer:u.write}}})],z.prototype,"operation",void 0);d.__decorate([T.reader("operation",["mosaicOperation","mosaicOperator"])],z.prototype,"readOperation",null);d.__decorate([Q.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],z.prototype,"sortField",void 0);d.__decorate([Q.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],z.prototype,
"sortValue",void 0);d.__decorate([L.cast("sortValue")],z.prototype,"castSortValue",null);d.__decorate([Q.property({type:h,json:{write:!0}})],z.prototype,"viewpoint",void 0);d.__decorate([Q.property({type:String,json:{write:!0}})],z.prototype,"where",void 0);return z=c=d.__decorate([M.subclass("esri.layers.support.MosaicRule")],z)})},"esri/layers/support/imageBitmapUtils":function(){define(["exports","../../core/Error","../../core/promiseUtils"],function(d,m,z){d.createBitmap=async function(F,t,J){let Q;
try{Q=await createImageBitmap(F)}catch(L){throw new m("request:server",`Unable to load ${t}`,{url:t,error:L});}z.throwIfAborted(J);return Q};d.createTileBitmap=async function(F,t,J,Q,L){let T;try{T=await createImageBitmap(F)}catch(M){throw new m("request:server",`Unable to load tile ${t}/${J}/${Q}`,{error:M,level:t,row:J,col:Q});}z.throwIfAborted(L);return T};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/MultidimensionalSubset":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon ../../geometry/support/jsonUtils ./DimensionalDefinition ../../geometry/Geometry".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h){var l;m={base:h,key:"type",typeMap:{extent:T,polygon:M}};z=l=class extends z.JSONSupport{constructor(p){super(p);this.subsetDefinitions=this.areaOfInterest=null}get dimensions(){var {subsetDefinitions:p}=this;if(null==p||0===p.length)return[];const c=new Map;p.forEach(u=>{if(u.dimensionName){if(Array.isArray(u.values[0])){var y=u.values;var v=y[0][0];y=y[u.values.length-1][1]}else y=u.values,v=y[0],y=y[u.values.length-1];c.has(u.dimensionName)?(u=c.get(u.dimensionName),
u[0]=Math.min(v,u[0]),u[1]=Math.max(y,u[1])):c.set(u.dimensionName,[v,y])}});p=[];for(const u of c)p.push({name:u[0],extent:u[1]});return p}get variables(){const {subsetDefinitions:p}=this;if(null==p||0===p.length)return[];const c=new Set;p.forEach(u=>{u.variableName&&c.add(u.variableName)});return[...c]}clone(){const p=this.subsetDefinitions?.map(u=>u.clone()),c=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new l({areaOfInterest:c,subsetDefinitions:p})}};d.__decorate([F.property({types:m,
json:{read:V.fromJSON,write:!0}})],z.prototype,"areaOfInterest",void 0);d.__decorate([F.property({readOnly:!0})],z.prototype,"dimensions",null);d.__decorate([F.property({readOnly:!0})],z.prototype,"variables",null);d.__decorate([F.property({type:[f],json:{write:!0}})],z.prototype,"subsetDefinitions",void 0);return z=l=d.__decorate([L.subclass("esri.layers.support.MultidimensionalSubset")],z)})},"esri/layers/support/RasterInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ./RasterBandInfo ./RasterSensorInfo ./RasterStorageInfo".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){var h;m=h=class extends m.JSONSupport{constructor(l){super(l);this.extent=this.colormap=this.bandCount=this.attributeTable=null;this.format=void 0;this.histograms=this.width=this.height=null;this.keyProperties={};this.pixelType=this.pixelSize=this.noDataValue=this.multidimensionalInfo=null;this.isPseudoSpatialReference=!1;this.transform=this.storageInfo=this.statistics=this.spatialReference=null}get bandInfos(){var l=this.keyProperties.BandProperties,{bandCount:p}=
this;if(!l?.length||l.length<p){l=[];for(let c=1;c<=p;c++)l.push(new M({name:"band_"+c}));return l}p=l.map(c=>M.fromJSON(c));for(l=0;l<p.length;l++)p[l].name=p[l].name||"band_"+(l+1);return p}get dataType(){const l=this.keyProperties?.DataType?.toLowerCase()??"generic";return"stdtime"===l?"standard-time":l}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(l){l&&this._set("nativeExtent",l)}get nativePixelSize(){if(null==this.transform||!this.transform.affectsPixelSize)return this.pixelSize;
const l=this.nativeExtent;return{x:l.width/this.width,y:l.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return V.fromJSON(this.keyProperties)}clone(){return new h({attributeTable:z.clone(this.attributeTable),bandCount:this.bandCount,colormap:z.clone(this.colormap),extent:z.clone(this.extent),nativePixelSize:z.clone(this.nativePixelSize),format:this.format,height:this.height,width:this.width,histograms:z.clone(this.histograms),
keyProperties:z.clone(this.keyProperties),multidimensionalInfo:z.clone(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:z.clone(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:z.clone(this.spatialReference),statistics:z.clone(this.statistics),storageInfo:z.clone(this.storageInfo),transform:z.clone(this.transform)})}};d.__decorate([F.property({json:{write:!0}})],m.prototype,"attributeTable",void 0);d.__decorate([F.property({json:{write:!0}})],
m.prototype,"bandCount",void 0);d.__decorate([F.property({readOnly:!0})],m.prototype,"bandInfos",null);d.__decorate([F.property({json:{write:!0}})],m.prototype,"colormap",void 0);d.__decorate([F.property({type:String,readOnly:!0})],m.prototype,"dataType",null);d.__decorate([F.property({type:L,json:{write:!0}})],m.prototype,"extent",void 0);d.__decorate([F.property({type:L,json:{write:!0}})],m.prototype,"nativeExtent",null);d.__decorate([F.property({json:{write:!0}})],m.prototype,"nativePixelSize",
null);d.__decorate([F.property({json:{write:!0}})],m.prototype,"format",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"height",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"width",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"hasMultidimensionalTranspose",null);d.__decorate([F.property({json:{write:!0}})],m.prototype,"histograms",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"keyProperties",void 0);d.__decorate([F.property({json:{write:!0}})],
m.prototype,"multidimensionalInfo",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"noDataValue",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"pixelSize",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"pixelType",void 0);d.__decorate([F.property()],m.prototype,"isPseudoSpatialReference",void 0);d.__decorate([F.property({readOnly:!0})],m.prototype,"sensorInfo",null);d.__decorate([F.property({type:T,json:{write:!0}})],m.prototype,"spatialReference",
void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"statistics",void 0);d.__decorate([F.property({type:f,json:{write:!0}})],m.prototype,"storageInfo",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"transform",void 0);return m=h=d.__decorate([Q.subclass("esri.layers.support.RasterInfo")],m)})},"esri/layers/support/RasterBandInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,z,F,t,J,Q){function L(M){M=Number(M);return isNaN(M)?void 0:M}var T;m=T=class extends m.JSONSupport{constructor(){super(...arguments);this.name=null;this.solarIrradiance=this.reflectanceGain=this.reflectanceBias=this.radianceGain=this.radianceBias=this.maxWavelength=this.minWavelength=void 0}clone(){return new T({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,
reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};d.__decorate([z.property({json:{name:"BandName",write:!0}})],m.prototype,"name",void 0);d.__decorate([z.property({json:{name:"WavelengthMin",read:{reader:L},write:!0}})],m.prototype,"minWavelength",void 0);d.__decorate([z.property({json:{name:"WavelengthMax",read:{reader:L},write:!0}})],m.prototype,"maxWavelength",void 0);d.__decorate([z.property({json:{name:"RadianceBias",read:{reader:L},write:!0}})],m.prototype,"radianceBias",
void 0);d.__decorate([z.property({json:{name:"RadianceGain",read:{reader:L},write:!0}})],m.prototype,"radianceGain",void 0);d.__decorate([z.property({json:{name:"ReflectanceBias",read:{reader:L},write:!0}})],m.prototype,"reflectanceBias",void 0);d.__decorate([z.property({json:{name:"ReflectanceGain",read:{reader:L},write:!0}})],m.prototype,"reflectanceGain",void 0);d.__decorate([z.property({json:{name:"SolarIrradiance",read:{reader:L},write:!0}})],m.prototype,"solarIrradiance",void 0);return m=T=
d.__decorate([Q.subclass("esri.layers.support.RasterBandInfo")],m)})},"esri/layers/support/RasterSensorInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(d,m,z,F,t,J,Q,L,T){function M(f){f=Number(f);return isNaN(f)?void 0:
f}var V;m=V=class extends m.JSONSupport{constructor(){super(...arguments);this.productName=this.cloudCover=this.acquisitionDate=void 0;this.sensorName=null;this.sunElevation=this.sunAzimuth=this.sensorElevation=this.sensorAzimuth=void 0}readAcquisitionDate(f){return new Date(f)}writeAcquisitionDate(f,h){h.AcquisitionDate=f.getTime()}clone(){return new V({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,
sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};d.__decorate([z.property({json:{name:"AcquisitionDate",write:!0}})],m.prototype,"acquisitionDate",void 0);d.__decorate([Q.reader("acquisitionDate")],m.prototype,"readAcquisitionDate",null);d.__decorate([T.writer("acquisitionDate")],m.prototype,"writeAcquisitionDate",null);d.__decorate([z.property({json:{name:"CloudCover",read:{reader:M},write:!0}})],m.prototype,"cloudCover",void 0);d.__decorate([z.property({json:{name:"ProductName",
write:!0}})],m.prototype,"productName",void 0);d.__decorate([z.property({json:{name:"SensorName",write:!0}})],m.prototype,"sensorName",void 0);d.__decorate([z.property({json:{name:"SensorAzimuth",read:{reader:M},write:!0}})],m.prototype,"sensorAzimuth",void 0);d.__decorate([z.property({json:{name:"SensorElevation",read:{reader:M},write:!0}})],m.prototype,"sensorElevation",void 0);d.__decorate([z.property({json:{name:"SunAzimuth",read:{reader:M},write:!0}})],m.prototype,"sunAzimuth",void 0);d.__decorate([z.property({json:{name:"SunElevation",
read:{reader:M},write:!0}})],m.prototype,"sunElevation",void 0);return m=V=d.__decorate([L.subclass("esri.layers.support.RasterSensorInfo")],m)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),function(d,m,z,F,t,J,Q,L){var T;m=T=class extends m.JSONSupport{constructor(){super(...arguments);
this.blockHeight=this.blockWidth=void 0;this.maximumPyramidLevel=this.firstPyramidLevel=this.origin=this.compression=null;this.pyramidScalingFactor=2;this.pyramidBlockHeight=this.pyramidBlockWidth=null;this.isVirtualTileInfo=!1;this.blockBoundary=this.transposeInfo=this.tileInfo=null}clone(){return new T({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:z.clone(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,
pyramidResolutions:z.clone(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:z.clone(this.tileInfo),transposeInfo:z.clone(this.transposeInfo),blockBoundary:z.clone(this.blockBoundary)})}};d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"blockWidth",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,
"blockHeight",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],m.prototype,"compression",void 0);d.__decorate([F.property({type:L,json:{write:!0}})],m.prototype,"origin",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"firstPyramidLevel",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"maximumPyramidLevel",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"pyramidResolutions",void 0);d.__decorate([F.property({type:Number,
json:{write:!0}})],m.prototype,"pyramidScalingFactor",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"pyramidBlockWidth",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"pyramidBlockHeight",void 0);d.__decorate([F.property({type:Boolean,json:{write:!0}})],m.prototype,"isVirtualTileInfo",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"tileInfo",void 0);d.__decorate([F.property()],m.prototype,"transposeInfo",void 0);d.__decorate([F.property()],
m.prototype,"blockBoundary",void 0);return m=T=d.__decorate([Q.subclass("esri.layers.support.RasterStorageInfo")],m)})},"esri/layers/support/RasterJobHandler":function(){define(["../../core/Error","../../core/workers/workers","./PixelBlock"],function(d,m,z){class F{constructor(){this._workerThread=null;this._destroyed=!1}async initialize(){const t=await m.open("RasterWorker");this._destroyed?t.close():this._workerThread=t}destroy(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),
this._workerThread=null)}async convertVectorFieldData(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");return(t=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},J))?new z(t):null}computeStatisticsHistograms(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:t.pixelBlock.toJSON()},
J)}async decode(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");return(t=await this._workerThread.invoke("decode",t,J))?new z(t):null}async symbolize(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");t={extent:t.extent?.toJSON(),pixelBlock:t.pixelBlock?.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds};return(J=await this._workerThread.invoke("symbolize",t,J))?
new z(J):null}async updateSymbolizer(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");const Q=t?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:Q},J))}async updateRasterFunction(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:t.toJSON()},
J))}async process(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");return(t=await this._workerThread.invoke("process",{extent:t.extent?.toJSON(),primaryPixelSizes:t.primaryPixelSizes?.map(Q=>null!=Q?Q.toJSON():null),primaryPixelBlocks:t.primaryPixelBlocks.map(Q=>null!=Q?Q.toJSON():null),primaryRasterIds:t.primaryRasterIds},J))?new z(t):null}async stretch(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");
if(!t?.pixelBlock)return null;t={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams};return(J=await this._workerThread.invoke("stretch",t,J))?new z(J):null}async split(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;t={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel,useBilinear:t.useBilinear};const Q=await this._workerThread.invoke("split",t,J);
Q&&Q.forEach((L,T)=>{Q.set(T,L?z.fromJSON(L):null)});return Q}async clipTile(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;t={...t,pixelBlock:t.pixelBlock.toJSON()};return(J=await this._workerThread.invoke("clipTile",t,J))?z.fromJSON(J):null}async estimateStatisticsHistograms(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;
t={srcPixelBlock:t.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",t,J)}async mosaicAndTransform(t,J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");if(!t?.srcPixelBlocks?.length)return{pixelBlock:null};t={...t,srcPixelBlocks:t.srcPixelBlocks.map(Q=>null!=Q?Q.toJSON():null)};J=await this._workerThread.invoke("mosaicAndTransform",t,J);return{pixelBlock:J.pixelBlock?new z(J.pixelBlock):null,localNorthDirections:J.localNorthDirections}}async createFlowMesh(t,
J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");const Q={buffer:t.flowData.data.buffer,maskBuffer:t.flowData.mask.buffer,width:t.flowData.width,height:t.flowData.height},{meshType:L,simulationSettings:T}=t;t=await this._workerThread.invoke("createFlowMesh",{meshType:L,flowData:Q,simulationSettings:T},{...J,transferList:[Q.buffer,Q.maskBuffer]});return{vertexData:new Float32Array(t.vertexBuffer),indexData:new Uint32Array(t.indexBuffer)}}getProjectionOffsetGrid(t,
J){if(!this._workerThread)throw new d("raster-jobhandler:no-connection","no available worker connection");const Q=null!=t.datumTransformation?t.datumTransformation.steps.map(T=>({wkid:T.wkid,wkt:T.wkt,isInverse:T.isInverse})):null,L=null!=t.rasterTransform?t.rasterTransform.toJSON():null;t={projectedExtent:t.projectedExtent.toJSON(),srcBufferExtent:t.srcBufferExtent.toJSON(),pixelSize:t.pixelSize,hasWrapAround:t.hasWrapAround,spacing:t.spacing,datumTransformationSteps:Q,rasterTransform:L,isAdaptive:t.isAdaptive,
includeGCSGrid:t.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",t,J)}}return F})},"esri/layers/support/rasterDatasets/multidimensionalUtils":function(){define(["exports","../../../core/arrayUtils","../DimensionalDefinition"],function(d,m,z){function F(l,p,c){const u=p.shift();0===c.length&&c.push({sliceId:-1,multidimensionalDefinition:[]});const y=c.length;for(let v=0;v<y;v++){const a=c.shift().multidimensionalDefinition;u.values?.forEach(e=>{c.push({sliceId:-1,multidimensionalDefinition:[...a,
{variableName:l,dimensionName:u.name,values:[e]}]})})}p.length&&F(l,p,c)}function t(l,p){return Array.isArray(l)?p[0]===p[1]?l[0]===p[0]||l[1]===p[0]:l[0]>=p[0]&&l[0]<=p[1]&&l[1]>=p[0]&&l[1]<=p[1]:l>=p[0]&&l<=p[1]}function J(l,p){return l[0]<=p[0]&&l[1]>=p[0]||l[0]<=p[1]&&l[1]>=p[1]||l[0]>=p[0]&&l[1]<=p[1]}function Q(l){return 1===l.length?[l[0],l[0]]:[l[0],l[l.length-1]]}function L(l,p,c){if(!p?.subsetDefinitions?.length)return l;if(c){const {variables:y}=p;if(y.length&&!y.includes(c))return null;
p=p.subsetDefinitions.find(v=>v.dimensionName===l.name&&v.variableName===c);if(!p?.values?.length)return l;p=Q(p.values)}else p=p.dimensions.find(({name:y})=>y===l.name)?.extent;const u=p;if(!u?.length)return l;p=l.values.filter(y=>t(y,u));return{...l,extent:[...u],values:p}}function T(l,p,c){if(!p?.subsetDefinitions?.length)return!1;const {variables:u}=p;if(u.length&&l.some(({variableName:y})=>y&&!u.includes(y)))return!0;for(let y=0;y<l.length;y++){const v=l[y],a=p.subsetDefinitions.find(e=>(""===
v.variableName||e.variableName===v.variableName)&&e.dimensionName===v.dimensionName);if(a?.values.length){const e=Q(a.values);if(!v.isSlice&&2===v.values.length&&!Array.isArray(v.values[0])&&v.values[0]!==v.values[1]&&c){if(!J(v.values,e))return!0}else if(v.values.some(g=>!t(g,e)))return!0}}return!1}function M(l,p){var c=l.dimensions.find(({name:a})=>"StdTime"===a);if(null==c||null==p.start&&null==p.end)return p;p=p.clone();const {start:u,end:y}=p.toJSON(),v=u===y?[u]:null!=u&&null!=y?[u,y]:[u??y];
if(2===v.length&&c?.extent.length&&(v[0]=Math.max(v[0],c.extent[0]),v[1]=Math.min(v[1],c.extent[1]??c.extent[0]),v[1]<v[0]))return null;c=new z({variableName:"",dimensionName:"StdTime",isSlice:1===v.length,values:v});if(T([c],l,!0))return null;p.start=new Date(v[0]);p.end=new Date(v[1]??v[0]);return p}function V(l,p={}){const {multidimensionalInfo:c,keyProperties:u}=l;if(null==c)return null;const {variableName:y,multidimensionalSubset:v,multidimensionalDefinition:a}=p;l=null!=a?a[0]?.variableName:
null;const e=y||l||u?.DefaultVariable;({variables:l}=c);v?.variables?.length&&(l=l.filter(({name:g})=>v.variables.includes(g)));return e?l.find(({name:g})=>g===e)??l[0]:l[0]}function f(l,p){var {values:c}=p;if(c?.length){p=Array.isArray(c[0]);var u=Array.isArray(l);return p!==u?-1:p&&u?c.findIndex(v=>v[0]===l[0]&&v[1]===l[1]):c.indexOf(l)}({extent:u}=p);if(Array.isArray(l)||l<u[0]||l>u[1])return-1;c=p.interval||1;if("ISO8601"!==p.unit)return Math.round((l-u[0])/c);u=u[0];let y=-1;switch(p.intervalUnit?.toLowerCase()||
"seconds"){case "seconds":y=Math.round((l-u)/1E3/c);break;case "minutes":y=Math.round((l-u)/6E4/c);break;case "hours":y=Math.round((l-u)/36E5/c);break;case "days":y=Math.round((l-u)/864E5/c);break;case "months":p=(new Date(l)).getUTCFullYear()-(new Date(u)).getUTCFullYear();c=(new Date(u)).getUTCMonth();u=(new Date(l)).getUTCMonth();y=0===p?u-c:u+11-c+12*(p-1);break;case "years":y=Math.round(((new Date(l)).getUTCFullYear()-(new Date(u)).getUTCFullYear())/c);break;case "decades":y=Math.round(((new Date(l)).getUTCFullYear()-
(new Date(u)).getUTCFullYear())/10/c)}return y}function h(l){var p=l.values?.length;if(p)return p;const {extent:c,unit:u}=l;p=l.interval||1;var y=c?c[1]-c[0]:0;if("ISO8601"!==u)return Math.round(y/p);switch(l.intervalUnit?.toLowerCase()??"seconds"){case "seconds":p=Math.round(y/1E3/p);break;case "minutes":p=Math.round(y/6E4/p);break;case "hours":p=Math.round(y/36E5/p);break;case "days":p=Math.round(y/864E5/p);break;case "months":l=(new Date(c[1])).getUTCFullYear()-(new Date(c[0])).getUTCFullYear();
p=(new Date(c[0])).getUTCMonth();y=(new Date(c[1])).getUTCMonth();p=0===l?y-p+1:y+11-p+12*(l-1)+1;break;case "years":p=Math.round(((new Date(c[1])).getUTCFullYear()-(new Date(c[0])).getUTCFullYear())/p);break;case "decades":p=Math.round(((new Date(c[1])).getUTCFullYear()-(new Date(c[0])).getUTCFullYear())/10/p);break;default:p=0}return p}d.createSlices=function(l,p){const c=[];let u=0;(p?l.variables.filter(y=>y.name.toLowerCase()===p.toLowerCase()):[...l.variables].sort((y,v)=>y.name>v.name?1:-1)).forEach(y=>
{const v=[],a=[...y.dimensions].sort((e,g)=>e.name>g.name?-1:1);F(y.name,a,v);v.forEach(e=>{c.push({...e,sliceId:u++})})});return c};d.getDefaultMultidimensionalDefinition=function(l,p={}){var c=V(l,p);if(!c)return null;l=[];const {dimensions:u,name:y}=c;if(0===u.length)return[new z({variableName:y,dimensionName:"",values:[],isSlice:!0})];for(c=0;c<u.length;c++){const v=L(u[c],p.multidimensionalSubset,y);if(!v)return null;const {values:a,extent:e}=v;let g=a?.[0]??e[0];"stdz"===v.name.toLowerCase()&&
!v.hasRanges&&Math.abs(e[1])<=Math.abs(e[0])&&(g=a?.length?a[a.length-1]:e[1]);l.push(new z({variableName:y,dimensionName:v.name,values:[g],isSlice:p.useRangeForRangedDimensionInfo?!!v.hasRanges:!0}))}return l};d.getDefaultVariableInfo=V;d.getSliceIds=function(l,p,c){let u=l;p&&(p=[...p].sort((y,v)=>y.dimensionName<v.dimensionName?-1:1),p.forEach(({dimensionName:y,values:v,isSlice:a})=>{v.length&&(u=u.filter(e=>{e=e.multidimensionalDefinition.find(n=>n.dimensionName===y);if(null==e)return!1;const g=
e.values[0];return"number"===typeof g?"number"===typeof v[0]?v.includes(g):v.some(n=>n[0]<=g&&n[1]>=g):"number"===typeof v[0]?v.some(n=>g[0]<=n&&g[1]>=n):a?v.some(n=>n[0]===g[0]&&n[0]===g[1]):v.some(n=>n[0]>=g[0]&&n[0]<=g[1]||n[1]>=g[0]&&n[1]<=g[1]||n[0]<g[0]&&n[1]>g[1])}))}));if(u.length&&null!=c?.start&&null!=c.end){const y=c.start.getTime(),v=c.end.getTime(),a=u[0].multidimensionalDefinition.findIndex(e=>"StdTime"===e.dimensionName);-1<a&&(u=u.filter(e=>{e=e.multidimensionalDefinition[a].values[0];
return y<=e&&v>=e}))}return u.map(y=>y.sliceId)};d.getSliceIndex=function(l,p){let c=0;var u=l[0].variableName;p=[...p.variables].sort((v,a)=>v.name>a.name?1:-1);for(var y=0;y<p.length;y++){const v=p[y],a=[...v.dimensions].sort((e,g)=>e.name>g.name?-1:1);if(v.name!==u)c+=a.map(e=>h(e)).reduce((e,g)=>e*g);else{u=a.map(e=>h(e));p=a.length;for(let e=0;e<p;e++){y=l.find(g=>g.dimensionName===a[e].name);if(null==y)return null;y=f(y.values[0],a[e]);if(-1===y)return null;u.shift();c=e===p-1?c+y:c+y*u.reduce((g,
n)=>g*n)}break}}return c};d.getSubsetVariablesFromMdInfo=function(l,p){if(null==p||null==l)return null;p=p.variables.map(c=>({...c}));l?.variables?.length&&(p=p.filter(({name:c})=>l.variables.includes(c)),p.forEach(c=>{c.dimensions=c.dimensions.map(u=>L(u,l,c.name)).filter(m.isSome)}));return p};d.hasExcludedVariableOrDimension=T;d.intersectMultimensionalSubset=function(l,p){if(null==l)return{isOutside:!1};const {geometry:c,timeExtent:u,multidimensionalDefinition:y}=p;p=null;if(null!=u&&(p=M(l,u),
null==p))return{isOutside:!0};const {areaOfInterest:v}=l;if(v&&c){const a="point"===c.type?c:"extent"===c.type?c.center:"polygon"===c.type?c.centroid:null;if(a&&!v.contains(a))return{isOutside:!0}}return null!=y&&y.length&&T(y,l,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:c,timeExtent:p,multidimensionalDefinition:y}}};d.isMultiSliceOrRangeDefinition=function(l){return l?.length?l.some(p=>{if(null==p.values)return!0;const c=p.values.length;return 0===c||1<c||!p.isSlice&&Array.isArray(p.values[0])}):
!1};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../../../core/maybe ../PixelBlock ./ImageCanvasDecoder ./JpgPlus ./Lerc ./Lzw ./pixelRangeUtils ../../../chunks/Zlib ./Raw ./TiffDecoder ./utils".split(" "),function(d,m,z,F,t,J,Q,L,T,M,V,f,h){async function l(r,A){if(!h.isPlatformLittleEndian)throw new m("rasterCoded:decode","lerc decoder is not supported on big endian platform");await Q.load();
const {offset:w}=A,{width:q,height:G,pixelType:B,statistics:K,depthCount:C,noDataValues:D,bandMasks:N,pixels:R,mask:I}=Q.decode(r,{inputOffset:w,returnInterleaved:A.returnInterleaved});r=new F({width:q,height:G,pixelType:B.toLowerCase(),pixels:R,mask:I,statistics:K,bandMasks:N,depthCount:C,noDataValues:D});K?.length||r.updateStatistics();return r}async function p(r,A){r=await f.decode(r,{...A,noDataValue:null});z.assertIsSome(r);r=new F({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),
mask:r.mask,bandMasks:r.bandMasks,statistics:null});r.updateStatistics();return r}async function c(r,A){r=await f.decodeTileOrStrip(r,A.customOptions);r=new F({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});r.updateStatistics();return r}function u(r,A){const w=A.pixelType||"u8",q=F.getPixelArrayConstructor(w),G="u8"===w?r:new q(r.buffer),B=[],K=A.planes||1;if(1===K)B.push(G);else for(let C=0;C<K;C++){const D=(A.width||1)*(A.height||
r.length),N=new q(D);for(let R=0;R<D;R++)N[R]=G[R*K+C];B.push(N)}r=new F({width:A.width||1,height:A.height||r.length,pixels:B,pixelType:w,statistics:null});r.updateStatistics();return r}function y(r,A){r=(new M.Zlib(new Uint8Array(r))).getBytes();return u(r,A)}function v(r,A){r=L.decode(r,A.offset,A.eof,!A.isInputBigEndian);return u(r,A)}function a(r,A){r=J.decode(r,A.hasNoZlibMask??void 0);r=new F({width:r.width,height:r.height,pixels:r.pixels,pixelType:"U8",mask:r.mask,statistics:null});r.updateStatistics();
return r}function e(r,A){r=new Uint8Array(r);r=new x(r);const {width:w,height:q}=A;A=w*q;r=r.decode();let G=0;var B=0;let K;B=new Uint8Array(A);for(G=0;G<A;G++)B[G]=r[4*G+3];const C=new F({width:w,height:q,pixels:[],pixelType:"U8",mask:B,statistics:[]});for(G=0;3>G;G++){K=new Uint8Array(A);for(B=0;B<A;B++)K[B]=r[4*B+G];C.addData({pixels:K})}C.updateStatistics();return C}async function g(r,A,w,q){r=await (new t).decode(r,{applyJpegMask:!1,format:A,...w},q);r=new F(r);r.updateStatistics();return r}
function n(r){if(null==r)throw new m("rasterCodec:decode","parameter encodeddata is required.");r=new Uint8Array(r,0,10);let A="";255===r[0]&&216===r[1]?A="jpg":137===r[0]&&80===r[1]&&78===r[2]&&71===r[3]?A="png":67===r[0]&&110===r[1]&&116===r[2]&&90===r[3]&&73===r[4]&&109===r[5]&&97===r[6]&&103===r[7]&&101===r[8]&&32===r[9]?A="lerc":76===r[0]&&101===r[1]&&114===r[2]&&99===r[3]&&50===r[4]&&32===r[5]?A="lerc2":73===r[0]&&73===r[1]&&42===r[2]&&0===r[3]||77===r[0]&&77===r[1]&&0===r[2]&&42===r[3]||73===
r[0]&&73===r[1]&&43===r[2]&&0===r[3]||77===r[0]&&77===r[1]&&0===r[2]&&43===r[3]?A="tiff":71===r[0]&&73===r[1]&&70===r[2]?A="gif":66===r[0]&&77===r[1]?A="bmp":String.fromCharCode.apply(null,r).toLowerCase().includes("error")&&(A="error");return A}function b(r){let A=null;switch(r){case "lerc":case "lerc2":A=l;break;case "jpg":A=a;break;case "png":A=e;break;case "bsq":case "bip":A=(w,q)=>{var G=q.pixelType,B=null;let K=null;switch(G?G.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":K=255;
B=Uint8Array;break;case "u16":K=K||65535;B=Uint16Array;break;case "u32":K=K||2**32-1;B=Uint32Array;break;case "s8":K=K||-128;B=Int8Array;break;case "s16":K=K||-32768;B=Int16Array;break;case "s32":K=K||-(2**31);B=Int32Array;break;default:B=Float32Array}({pixelTypeCtor:G}={pixelTypeCtor:B,noDataValue:K});B=V.decode;w=B(w,{width:q.width,height:q.height,pixelType:G,format:r});q=new F({width:q.width,height:q.height,pixels:w.pixels,pixelType:q.pixelType,mask:w.mask,statistics:null});q.updateStatistics();
return q};break;case "tiff":A=p;break;case "deflate":A=y;break;case "lzw":A=v;break;case "error":A=()=>{throw new m("rasterCodec:decode","input data contains error");};break;default:A=()=>{throw new m("rasterCodec:decode","unsupported raster format");}}return A}function k(r,A=1){if(r){var {pixels:w,width:q,height:G,mask:B}=r;if(w&&0!==w.length){var K=w.length,C=q-1,D=G-1,N=[],R,I,P=null,O=F.getPixelArrayConstructor(r.pixelType);if(0===A){for(A=0;A<K;A++){var S=w[A];var W=new O(C*D);for(R=0;R<D;R++){var X=
R*q;for(I=0;I<C;I++)W[R*C+I]=S[X+I]}N.push(W)}if(null!=B)for(P=new Uint8Array(C*D),R=0;R<D;R++)for(X=R*q,I=0;I<C;I++)P[R*C+I]=B[X+I]}else{for(A=0;A<K;A++){S=w[A];W=new O(C*D);for(R=0;R<D;R++)for(X=R*q,I=0;I<C;I++)W[R*C+I]=(S[X+I]+S[X+I+1]+S[X+q+I]+S[X+q+I+1])/4;N.push(W)}if(B)for(P=new Uint8Array(C*D),R=0;R<D;R++)for(X=R*q,I=0;I<C;I++)P[R*C+I]=Math.min.apply(null,[B[X+I],B[X+I+1],B[X+q+I],B[X+q+I+1]])}r.width=C;r.height=D;r.mask=P;r.pixels=N}}}var x=function(r){function A(B){var K,C;this.data=B;this.pos=
8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(C=null;;){var D=this.readUInt32();var N=B=void 0;B=[];for(N=0;4>N;++N)B.push(String.fromCharCode(this.data[this.pos++]));B=B.join("");switch(B){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];
break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(D);break;case "fcTL":C&&this.animation.frames.push(C);this.pos+=4;C={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};B=this.readUInt16();D=this.readUInt16()||100;C.delay=1E3*B/D;C.disposeOp=this.data[this.pos++];C.blendOp=this.data[this.pos++];C.data=[];break;case "IDAT":case "fdAT":"fdAT"===B&&
(this.pos+=4,D-=4);B=(null!=C?C.data:void 0)||this.imgData;for(N=0;0<=D?N<D:N>D;0<=D?++N:--N)B.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:this.transparency.indexed=this.read(D);D=255-this.transparency.indexed.length;if(0<D)for(B=0;0<=D?B<D:B>D;0<=D?++B:--B)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(D)[0];break;case 2:this.transparency.rgb=this.read(D)}break;case "tEXt":N=this.read(D);D=N.indexOf(0);B=
String.fromCharCode.apply(String,N.slice(0,D));this.text[B]=String.fromCharCode.apply(String,N.slice(D+1));break;case "IEND":C&&this.animation.frames.push(C);a:{switch(this.colorType){case 0:case 3:case 4:C=1;break a;case 2:case 6:C=3;break a}C=void 0}this.colors=C;this.hasAlphaChannel=4===(K=this.colorType)||6===K;K=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*K;a:{switch(this.colors){case 1:K="DeviceGray";break a;case 3:K="DeviceRGB";break a}K=void 0}this.colorSpace=K;this.imgData=
new Uint8Array(this.imgData);return;default:this.pos+=D}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var w;A.load=function(B,K,C){"function"===typeof K&&(C=K);var D=new XMLHttpRequest;D.open("GET",B,!0);D.responseType="arraybuffer";D.onload=function(){var N=new Uint8Array(D.response||D.mozResponseArrayBuffer);N=new A(N);"function"===typeof(null!=K?K.getContext:void 0)&&N.render(K);return"function"===typeof C?C(N):void 0};return D.send(null)};A.prototype.read=
function(B){var K;var C=[];for(K=0;0<=B?K<B:K>B;0<=B?++K:--K)C.push(this.data[this.pos++]);return C};A.prototype.readUInt32=function(){var B=this.data[this.pos++]<<24;var K=this.data[this.pos++]<<16;var C=this.data[this.pos++]<<8;var D=this.data[this.pos++];return B|K|C|D};A.prototype.readUInt16=function(){var B=this.data[this.pos++]<<8;var K=this.data[this.pos++];return B|K};A.prototype.decodePixels=function(B){var K,C,D,N,R,I,P,O;null==B&&(B=this.imgData);if(0===B.length)return new Uint8Array(0);
B=new M.Zlib(B);B=B.getBytes();var S=this.pixelBitlength/8;var W=S*this.width;var X=new Uint8Array(W*this.height);var ba=B.length;for(C=N=R=0;N<ba;){switch(B[N++]){case 0:for(D=K=0;K<W;D=K+=1)X[C++]=B[N++];break;case 1:for(D=I=0;I<W;D=I+=1){K=B[N++];var Z=D<S?0:X[C-S];X[C++]=(K+Z)%256}break;case 2:for(D=Z=0;Z<W;D=Z+=1){K=B[N++];var ca=(D-D%S)/S;I=R&&X[(R-1)*W+ca*S+D%S];X[C++]=(I+K)%256}break;case 3:for(D=O=0;O<W;D=O+=1)K=B[N++],ca=(D-D%S)/S,Z=D<S?0:X[C-S],I=R&&X[(R-1)*W+ca*S+D%S],X[C++]=(K+Math.floor((Z+
I)/2))%256;break;case 4:for(D=O=0;O<W;D=O+=1){K=B[N++];ca=(D-D%S)/S;Z=D<S?0:X[C-S];0===R?I=P=0:(I=X[(R-1)*W+ca*S+D%S],P=ca&&X[(R-1)*W+(ca-1)*S+D%S]);var aa=Z+I-P;D=Math.abs(aa-Z);ca=Math.abs(aa-I);aa=Math.abs(aa-P);Z=D<=ca&&D<=aa?Z:ca<=aa?I:P;X[C++]=(K+Z)%256}break;default:throw Error("Invalid filter algorithm: "+B[N-1]);}R++}return X};A.prototype.decodePalette=function(){var B,K,C,D;var N=this.palette;var R=this.transparency.indexed||[];var I=new Uint8Array((R.length||0)+N.length);var P=0;N.length;
var O=K=B=0;for(C=N.length;K<C;O=K+=3)I[P++]=N[O],I[P++]=N[O+1],I[P++]=N[O+2],I[P++]=null!=(D=R[B++])?D:255;return I};A.prototype.copyToImageData=function(B,K){var C,D;var N=this.colors;var R=null;var I=this.hasAlphaChannel;this.palette.length&&(R=null!=(C=this._decodedPalette)?C:this._decodedPalette=this.decodePalette(),N=4,I=!0);B=B.data||B;var P=B.length;var O=R||K;C=D=0;if(1===N)for(;C<P;)N=R?4*K[C/4]:D,D=O[N++],B[C++]=D,B[C++]=D,B[C++]=D,B[C++]=I?O[N++]:this.transparency.grayscale&&this.transparency.grayscale===
D?0:255,D=N;else for(;C<P;)N=R?4*K[C/4]:D,B[C++]=O[N++],B[C++]=O[N++],B[C++]=O[N++],B[C++]=I?O[N++]:this.transparency.rgb&&this.transparency.rgb[1]===O[N-3]&&this.transparency.rgb[3]===O[N-2]&&this.transparency.rgb[5]===O[N-1]?0:255,D=N};A.prototype.decode=function(){var B=new Uint8Array(this.width*this.height*4);this.copyToImageData(B,this.decodePixels());return B};var q=(w=r.document&&r.document.createElement("canvas"))&&w.getContext("2d");var G=function(B){q.width=B.width;q.height=B.height;q.clearRect(0,
0,B.width,B.height);q.putImageData(B,0,0);B=new Image;B.src=w.toDataURL();return B};A.prototype.decodeFrames=function(B){var K,C;if(this.animation){var D=this.animation.frames;var N=[];var R=K=0;for(C=D.length;K<C;R=++K){R=D[R];var I=B.createImageData(R.width,R.height);var P=this.decodePixels(new Uint8Array(R.data));this.copyToImageData(I,P);R.imageData=I;N.push(R.image=G(I))}return N}};A.prototype.renderFrame=function(B,K){var C=this.animation.frames;var D=C[K];C=C[K-1];0===K&&B.clearRect(0,0,this.width,
this.height);1===(null!=C?C.disposeOp:void 0)?B.clearRect(C.xOffset,C.yOffset,C.width,C.height):2===(null!=C?C.disposeOp:void 0)&&B.putImageData(C.imageData,C.xOffset,C.yOffset);0===D.blendOp&&B.clearRect(D.xOffset,D.yOffset,D.width,D.height);return B.drawImage(D.image,D.xOffset,D.yOffset)};A.prototype.animate=function(B){var K,C=this;var D=0;var N=this.animation;var R=N.numFrames;var I=N.frames;var P=N.numPlays;return(K=function(){var O=D++%R;var S=I[O];C.renderFrame(B,O);if(1<R&&D/R<P)return C.animation._timeout=
setTimeout(K,S.delay)})()};A.prototype.stopAnimation=function(){var B;return clearTimeout(null!=(B=this.animation)?B._timeout:void 0)};A.prototype.render=function(B){B._png&&B._png.stopAnimation();B._png=this;B.width=this.width;B.height=this.height;B=B.getContext("2d");if(this.animation)return this.decodeFrames(B),this.animate(B);var K=B.createImageData(this.width,this.height);this.copyToImageData(K,this.decodePixels());return B.putImageData(K,0,0)};return A}(self);const E=new Set(["jpg","png","bmp",
"gif"]);d.decode=async function(r,A={},w){if(null==r)throw new m("rasterCodec:decode","missing encodeddata parameter.");let q=A.format?.toLowerCase();if(!("bsq"!==q&&"bip"!==q||null!=A.width&&null!=A.height))throw new m("rasterCodec:decode","requires width and height in options parameter.");if("tiff"===q&&A.customOptions)return c(r,A);if(!q||"bsq"!==q&&"bip"!==q&&"deflate"!==q&&"lzw"!==q)q=n(r);if(A.useCanvas&&E.has(q))return g(r,q,A,w);const G=b(q);A.isPoint&&(A={...A},null!=A.width&&A.width++,null!=
A.height&&A.height++);let B;const {offsets:K}=A;if(K&&1<K.length){w=K.map((D,N)=>G(r.slice(D,K[N+1]),A));w=await Promise.all(w);B=w[0];B.pixels=w.map(D=>D.pixels[0]);const C=w.map(D=>D.mask);w.some(D=>null!=D)&&(C.forEach((D,N)=>{null==D&&(C[N]=(new Uint8Array(B.width*B.height)).fill(255))}),B.bandMasks=C,B.mask=F.combineBandMasks(C));B.updateStatistics()}else B=await G(r,{...A,offset:K?.[0]??A.offset});"jpg"!==q&&null!=A.noDataValue&&1===B.depthCount&&T.convertNoDataToMask(B,A.noDataValue,{customFloatTolerance:A.tolerance});
A.isPoint&&k(B);return B};d.getFormat=function(r){r=n(r);"lerc2"===r?r="lerc":"error"===r&&(r="");return r};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(d,m,z){class F{constructor(t){this._ctx=this._canvas=null;t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,J,Q){if(!t||10>t.byteLength)throw new d("imagecanvasdecoder: decode",
"required a valid encoded data as input.");let {width:L=0,height:T=0,format:M}=J;const {applyJpegMask:V}=J;if(V&&(!L||!T))throw new d("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((f,h)=>{let l=null;"jpg"===M&&V&&(l=F._getMask(t,{width:L,height:T}));const p=new Blob([new Uint8Array(t)],{type:"jpg"==="image/"+M?"jpeg":M}),c=URL.createObjectURL(p),u=new Image;let y;u.src=c;u.onload=()=>{URL.revokeObjectURL(c);if(m.isAborted(Q))h(m.createAbortError());
else{L=u.width;T=u.height;if(this._canvas&&this._ctx){if(this._canvas.width!==L||this._canvas.height!==T)this._canvas.width=L,this._canvas.height=T;this._ctx.clearRect(0,0,L,T)}else this._canvas=document.createElement("canvas"),this._canvas.width=L,this._canvas.height=T,this._ctx=this._canvas.getContext("2d");this._ctx.drawImage(u,0,0);var v=this._ctx.getImageData(0,0,L,T);y=v.data;var a;if(J.renderOnCanvas){if(l)for(a=0;a<l.length;a++)y[4*a+3]=l[a]?255:0;this._ctx.putImageData(v,0,0);f(null)}else{v=
L*T;var e=new Uint8Array(v),g=new Uint8Array(v),n=new Uint8Array(v);if(l)for(a=0;a<v;a++)e[a]=y[4*a],g[a]=y[4*a+1],n[a]=y[4*a+2];else for(l=new Uint8Array(v),a=0;a<v;a++)e[a]=y[4*a],g[a]=y[4*a+1],n[a]=y[4*a+2],l[a]=y[4*a+3];f({width:L,height:T,pixels:[e,g,n],mask:l,pixelType:"u8"})}}};u.onerror=()=>{URL.revokeObjectURL(c);h("cannot load image")}})}static _getMask(t,J){let Q=null;try{var L=new Uint8Array(t);t=0;var T=L.length-2;for(t=Math.ceil(L.length/2);t<T&&(255!==L[t]||217!==L[t+1]);t++);t+=2;
if(t<L.length-1){const M=(new z.Zlib(L.subarray(t))).getBytes();Q=new Uint8Array(J.width*J.height);J=0;for(L=0;L<M.length;L++)for(T=7;0<=T;T--)Q[J++]=M[L]>>T&1}}catch(M){}return Q}}return F})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(d,m){var z={exports:{}};(function(F){(function(t){t=t();void 0!==t&&(F.exports=t)})(function(){var t=function(){function J(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}J.prototype={ensureBuffer:function(Q){var L=this.buffer,
T=L?L.byteLength:0;if(Q<T)return L;for(var M=512;M<Q;)M<<=1;Q=new Uint8Array(M);for(M=0;M<T;++M)Q[M]=L[M];return this.buffer=Q},getByte:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(Q){var L=this.pos;if(Q){this.ensureBuffer(L+Q);for(Q=L+Q;!this.eof&&this.bufferLength<Q;)this.readBlock();var T=this.bufferLength;Q>T&&(Q=T)}else{for(;!this.eof;)this.readBlock();Q=this.bufferLength}this.pos=Q;return this.buffer.subarray(L,
Q)},lookChar:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var Q=this.pos;this.bufferLength<=Q;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(Q,L,T){for(var M=Q+L;this.bufferLength<=M&&!this.eof;)this.readBlock();return new Stream(this.buffer,Q,L,T)},skip:function(Q){Q||=1;this.pos+=Q},reset:function(){this.pos=
0}};return J}();return function(){function J(h){throw Error(h);}function Q(h){var l=0,p=h[l++],c=h[l++];-1!=p&&-1!=c||J("Invalid header in flate stream");8!=(p&15)&&J("Unknown compression method in flate stream");0!=((p<<8)+c)%31&&J("Bad FCHECK in flate stream");c&32&&J("FDICT bit set in flate stream");this.bytes=h;this.bytesPos=l;this.codeBuf=this.codeSize=0;t.call(this)}if(!self||!self.Uint32Array)return null;var L=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),T=new Uint32Array([3,
4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),M=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),V=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,
459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,
459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,
459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,
459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,
459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,
459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,
459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],f=[new Uint32Array([327680,327696,327688,327704,
327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];Q.prototype=Object.create(t.prototype);Q.prototype.getBits=function(h){for(var l=this.codeSize,p=this.codeBuf,c=this.bytes,u=this.bytesPos,y;l<h;)"undefined"==typeof(y=c[u++])&&J("Bad encoding in flate stream"),p|=y<<l,l+=8;this.codeBuf=p>>h;this.codeSize=l-=h;this.bytesPos=u;return p&(1<<h)-1};Q.prototype.getCode=
function(h){var l=h[0],p=h[1];h=this.codeSize;for(var c=this.codeBuf,u=this.bytes,y=this.bytesPos;h<p;){var v;"undefined"==typeof(v=u[y++])&&J("Bad encoding in flate stream");c|=v<<h;h+=8}p=l[c&(1<<p)-1];l=p>>16;p&=65535;(0==h||h<l||0==l)&&J("Bad encoding in flate stream");this.codeBuf=c>>l;this.codeSize=h-l;this.bytesPos=y;return p};Q.prototype.generateHuffmanTable=function(h){for(var l=h.length,p=0,c=0;c<l;++c)h[c]>p&&(p=h[c]);for(var u=1<<p,y=new Uint32Array(u),v=1,a=0,e=2;v<=p;++v,a<<=1,e<<=1)for(var g=
0;g<l;++g)if(h[g]==v){var n=0,b=a;for(c=0;c<v;++c)n=n<<1|b&1,b>>=1;for(c=n;c<u;c+=e)y[c]=v<<16|g;++a}return[y,p]};Q.prototype.readBlock=function(){function h(n,b,k,x,E){for(n=n.getBits(k)+x;0<n--;)b[a++]=E}var l=this.getBits(3);l&1&&(this.eof=!0);l>>=1;if(0==l){var p=this.bytes,c=this.bytesPos,u;"undefined"==typeof(u=p[c++])&&J("Bad block header in flate stream");var y=u;"undefined"==typeof(u=p[c++])&&J("Bad block header in flate stream");y|=u<<8;"undefined"==typeof(u=p[c++])&&J("Bad block header in flate stream");
l=u;"undefined"==typeof(u=p[c++])&&J("Bad block header in flate stream");(l|u<<8)!=(~y&65535)&&J("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;u=this.bufferLength;l=this.ensureBuffer(u+y);this.bufferLength=y=u+y;for(var v=u;v<y;++v){if("undefined"==typeof(u=p[c++])){this.eof=!0;break}l[v]=u}this.bytesPos=c}else{if(1==l)c=V,u=f;else if(2==l){l=this.getBits(5)+257;u=this.getBits(5)+1;p=this.getBits(4)+4;c=Array(L.length);for(var a=0;a<p;)c[L[a++]]=this.getBits(3);c=this.generateHuffmanTable(c);
a=p=0;u=l+u;for(y=Array(u);a<u;)v=this.getCode(c),16==v?h(this,y,2,3,p):17==v?h(this,y,3,3,p=0):18==v?h(this,y,7,11,p=0):y[a++]=p=v;c=this.generateHuffmanTable(y.slice(0,l));u=this.generateHuffmanTable(y.slice(l,u))}else J("Unknown block type in flate stream");y=(l=this.buffer)?l.length:0;for(v=this.bufferLength;;){var e=this.getCode(c);if(256>e)v+1>=y&&(l=this.ensureBuffer(v+1),y=l.length),l[v++]=e;else{if(256==e){this.bufferLength=v;break}e-=257;e=T[e];var g=e>>16;0<g&&(g=this.getBits(g));p=(e&
65535)+g;e=this.getCode(u);e=M[e];g=e>>16;0<g&&(g=this.getBits(g));e=(e&65535)+g;v+p>=y&&(l=this.ensureBuffer(v+p),y=l.length);for(g=0;g<p;++g,++v)l[v]=l[v-e]}}}};return Q}()})})(z);m=m.getDefaultExportFromCjs(z.exports);d.Zlib=m})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Jpg","../../../chunks/Zlib"],function(d,m){class z{static decode(F,t=!1){const J=new Uint8Array(F);F=new d.JpegImage;F.parse(J);const {width:Q,height:L,numComponents:T,eof:M}=F,V=F.getData(Q,
L,!0),f=Q*L;F=null;let h=0,l=0,p=0;if(!t&&M<J.length-1)try{var c=(new m.Zlib(J.subarray(M))).getBytes();F=new Uint8Array(f);for(h=t=0;h<c.length;h++)for(p=7;0<=p;p--)F[t++]=c[h]>>p&1}catch{}if(1===T&&V.length===Q*L)c=new Uint8Array(V.buffer),c=[c,c,c];else{c=[];for(h=0;3>h;h++)c.push(new Uint8Array(f));for(l=p=0;l<f;l++)for(h=0;3>h;h++)c[h][l]=V[p++]}return{width:Q,height:L,pixels:c,mask:F}}}return z})},"esri/chunks/Jpg":function(){define(["exports","./_commonjsHelpers"],function(d,m){var z={exports:{}};
(function(F){(function(t){t=t();void 0!==t&&(F.exports=t)})(function(){var t=function(){function J(Q){this.message="JPEG error: "+Q}J.prototype=Error();J.prototype.name="JpegError";return J.constructor=J}();return function(){function J(){this.decodeTransform=null;this.colorTransform=-1}function Q(f,h){for(var l=0,p=[],c,u,y=16;0<y&&!f[y-1];)y--;p.push({children:[],index:0});var v=p[0],a;for(c=0;c<y;c++){for(u=0;u<f[c];u++){v=p.pop();for(v.children[v.index]=h[l];0<v.index;)v=p.pop();v.index++;for(p.push(v);p.length<=
c;)p.push(a={children:[],index:0}),v.children[v.index]=a.children,v=a;l++}c+1<y&&(p.push(a={children:[],index:0}),v.children[v.index]=a.children,v=a)}return p[0].children}function L(f,h,l,p,c,u,y,v,a){function e(){if(0<B)return B--,G>>B&1;G=f[h++];if(255===G){var ca=f[h++];if(ca)throw new t("unexpected marker "+(G<<8|ca).toString(16));}B=7;return G>>>7}function g(ca){for(;;){ca=ca[e()];if("number"===typeof ca)return ca;if("object"!==typeof ca)throw new t("invalid huffman sequence");}}function n(ca){for(var aa=
0;0<ca;)aa=aa<<1|e(),ca--;return aa}function b(ca){if(1===ca)return 1===e()?1:-1;var aa=n(ca);return aa>=1<<ca-1?aa:aa+(-1<<ca)+1}function k(ca,aa){var ea=g(ca.huffmanTableDC);ea=0===ea?0:b(ea);ca.blockData[aa]=ca.pred+=ea;for(ea=1;64>ea;){var ha=g(ca.huffmanTableAC),fa=ha&15;ha>>=4;if(0===fa){if(15>ha)break;ea+=16}else ea+=ha,ca.blockData[aa+V[ea]]=b(fa),ea++}}function x(ca,aa){var ea=g(ca.huffmanTableDC);ea=0===ea?0:b(ea)<<a;ca.blockData[aa]=ca.pred+=ea}function E(ca,aa){ca.blockData[aa]|=e()<<
a}function r(ca,aa){if(0<K)K--;else for(var ea=u;ea<=y;){var ha=g(ca.huffmanTableAC),fa=ha&15;ha>>=4;if(0===fa){if(15>ha){K=n(ha)+(1<<ha)-1;break}ea+=16}else ea+=ha,ca.blockData[aa+V[ea]]=b(fa)*(1<<a),ea++}}function A(ca,aa){for(var ea=u,ha=0,fa;ea<=y;){fa=V[ea];switch(C){case 0:ha=g(ca.huffmanTableAC);fa=ha&15;ha>>=4;if(0===fa)15>ha?(K=n(ha)+(1<<ha),C=4):(ha=16,C=1);else{if(1!==fa)throw new t("invalid ACn encoding");D=b(fa);C=ha?2:3}continue;case 1:case 2:ca.blockData[aa+fa]?ca.blockData[aa+fa]+=
e()<<a:(ha--,0===ha&&(C=2===C?3:0));break;case 3:ca.blockData[aa+fa]?ca.blockData[aa+fa]+=e()<<a:(ca.blockData[aa+fa]=D<<a,C=0);break;case 4:ca.blockData[aa+fa]&&(ca.blockData[aa+fa]+=e()<<a)}ea++}4===C&&(K--,0===K&&(C=0))}var w=l.mcusPerLine,q=h,G=0,B=0,K=0,C=0,D,N=p.length,R,I,P,O;v=l.progressive?0===u?0===v?x:E:0===v?r:A:k;var S=0;l=1===N?p[0].blocksPerLine*p[0].blocksPerColumn:w*l.mcusPerColumn;for(var W,X;S<l;){var ba=c?Math.min(l-S,c):l;for(R=0;R<N;R++)p[R].pred=0;K=0;if(1===N){var Z=p[0];for(O=
0;O<ba;O++)v(Z,64*((Z.blocksPerLine+1)*(S/Z.blocksPerLine|0)+S%Z.blocksPerLine)),S++}else for(O=0;O<ba;O++){for(R=0;R<N;R++)for(Z=p[R],W=Z.h,X=Z.v,I=0;I<X;I++)for(P=0;P<W;P++)v(Z,64*((Z.blocksPerLine+1)*((S/w|0)*Z.v+I)+(S%w*Z.h+P)));S++}B=0;(Z=M(f,h))&&Z.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+Z.invalid),h=Z.offset);Z=Z&&Z.marker;if(!Z||65280>=Z)throw new t("marker was not found");if(65488<=Z&&65495>=Z)h+=2;else break}(Z=M(f,h))&&Z.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+
Z.invalid),h=Z.offset);return h-q}function T(f,h){f=h.blocksPerLine;for(var l=h.blocksPerColumn,p=new Int16Array(64),c=0;c<l;c++)for(var u=0;u<f;u++){var y=void 0,v=void 0,a=void 0,e=void 0,g=void 0,n=void 0,b=void 0,k=void 0,x=g=n=e=v=y=void 0,E=void 0,r=void 0,A=void 0,w=64*((h.blocksPerLine+1)*c+u),q=p,G=h.quantizationTable,B=h.blockData;if(!G)throw new t("missing required Quantization Table.");for(var K=0;64>K;K+=8)y=B[w+K],k=B[w+K+1],b=B[w+K+2],n=B[w+K+3],g=B[w+K+4],e=B[w+K+5],a=B[w+K+6],v=B[w+
K+7],y*=G[K],0===(k|b|n|g|e|a|v)?(y=5793*y+512>>10,q[K]=y,q[K+1]=y,q[K+2]=y,q[K+3]=y,q[K+4]=y,q[K+5]=y,q[K+6]=y,q[K+7]=y):(k*=G[K+1],b*=G[K+2],n*=G[K+3],g*=G[K+4],e*=G[K+5],a*=G[K+6],v*=G[K+7],A=5793*y+128>>8,r=5793*g+128>>8,E=b,x=a,g=2896*(k-v)+128>>8,v=2896*(k+v)+128>>8,n<<=4,e<<=4,A=A+r+1>>1,r=A-r,y=3784*E+1567*x+128>>8,E=1567*E-3784*x+128>>8,x=y,g=g+e+1>>1,e=g-e,v=v+n+1>>1,n=v-n,A=A+x+1>>1,x=A-x,r=r+E+1>>1,E=r-E,y=2276*g+3406*v+2048>>12,g=3406*g-2276*v+2048>>12,v=y,y=799*n+4017*e+2048>>12,n=4017*
n-799*e+2048>>12,e=y,q[K]=A+v,q[K+7]=A-v,q[K+1]=r+e,q[K+6]=r-e,q[K+2]=E+n,q[K+5]=E-n,q[K+3]=x+g,q[K+4]=x-g);for(G=0;8>G;++G)y=q[G],k=q[G+8],b=q[G+16],n=q[G+24],g=q[G+32],e=q[G+40],a=q[G+48],v=q[G+56],0===(k|b|n|g|e|a|v)?(y=5793*y+8192>>14,y=-2040>y?0:2024<=y?255:y+2056>>4,B[w+G]=y,B[w+G+8]=y,B[w+G+16]=y,B[w+G+24]=y,B[w+G+32]=y,B[w+G+40]=y,B[w+G+48]=y,B[w+G+56]=y):(A=5793*y+2048>>12,r=5793*g+2048>>12,E=b,x=a,g=2896*(k-v)+2048>>12,v=2896*(k+v)+2048>>12,A=(A+r+1>>1)+4112,r=A-r,y=3784*E+1567*x+2048>>
12,E=1567*E-3784*x+2048>>12,x=y,g=g+e+1>>1,e=g-e,v=v+n+1>>1,n=v-n,A=A+x+1>>1,x=A-x,r=r+E+1>>1,E=r-E,y=2276*g+3406*v+2048>>12,g=3406*g-2276*v+2048>>12,v=y,y=799*n+4017*e+2048>>12,n=4017*n-799*e+2048>>12,e=y,y=A+v,v=A-v,k=r+e,a=r-e,b=E+n,e=E-n,n=x+g,g=x-g,y=16>y?0:4080<=y?255:y>>4,k=16>k?0:4080<=k?255:k>>4,b=16>b?0:4080<=b?255:b>>4,n=16>n?0:4080<=n?255:n>>4,g=16>g?0:4080<=g?255:g>>4,e=16>e?0:4080<=e?255:e>>4,a=16>a?0:4080<=a?255:a>>4,v=16>v?0:4080<=v?255:v>>4,B[w+G]=y,B[w+G+8]=k,B[w+G+16]=b,B[w+G+24]=
n,B[w+G+32]=g,B[w+G+40]=e,B[w+G+48]=a,B[w+G+56]=v)}return h.blockData}function M(f,h,l){var p=f.length-1;l=l<h?l:h;if(h>=p)return null;var c=f[h]<<8|f[h+1];if(65472<=c&&65534>=c)return{invalid:null,marker:c,offset:h};for(h=f[l]<<8|f[l+1];!(65472<=h&&65534>=h);){if(++l>=p)return null;h=f[l]<<8|f[l+1]}return{invalid:c.toString(16),marker:h,offset:l}}if(!self||!self.Uint8ClampedArray)return null;var V=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,
28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);J.prototype={parse:function(f){function h(){var G=f[c]<<8|f[c+1];c+=2;return G}function l(){var G=h();G=c+G-2;var B=M(f,G,c);B&&B.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+B.invalid),G=B.offset);G=f.subarray(c,G);c+=G.length;return G}function p(G){for(var B=Math.ceil(G.samplesPerLine/8/G.maxH),K=Math.ceil(G.scanLines/8/G.maxV),C=0;C<G.components.length;C++){q=G.components[C];
var D=Math.ceil(Math.ceil(G.samplesPerLine/8)*q.h/G.maxH),N=Math.ceil(Math.ceil(G.scanLines/8)*q.v/G.maxV);q.blockData=new Int16Array(64*K*q.v*(B*q.h+1));q.blocksPerLine=D;q.blocksPerColumn=N}G.mcusPerLine=B;G.mcusPerColumn=K}var c=0,u=null,y=null,v=[],a=[],e=[],g=h();if(65496!==g)throw new t("SOI not found");for(g=h();65497!==g;){switch(g){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var n=
l();65504===g&&74===n[0]&&70===n[1]&&73===n[2]&&70===n[3]&&0===n[4]&&(u={version:{major:n[5],minor:n[6]},densityUnits:n[7],xDensity:n[8]<<8|n[9],yDensity:n[10]<<8|n[11],thumbWidth:n[12],thumbHeight:n[13],thumbData:n.subarray(14,14+3*n[12]*n[13])});65518===g&&65===n[0]&&100===n[1]&&111===n[2]&&98===n[3]&&101===n[4]&&(y={version:n[5]<<8|n[6],flags0:n[7]<<8|n[8],flags1:n[9]<<8|n[10],transformCode:n[11]});break;case 65499:g=h()+c-2;for(var b;c<g;){var k=f[c++],x=new Uint16Array(64);if(0===k>>4)for(n=
0;64>n;n++)b=V[n],x[b]=f[c++];else if(1===k>>4)for(n=0;64>n;n++)b=V[n],x[b]=h();else throw new t("DQT - invalid table spec");v[k&15]=x}break;case 65472:case 65473:case 65474:if(E)throw new t("Only single frame JPEGs supported");h();var E={};E.extended=65473===g;E.progressive=65474===g;E.precision=f[c++];E.scanLines=h();E.samplesPerLine=h();E.components=[];E.componentIds={};n=f[c++];for(g=x=k=0;g<n;g++){b=f[c];var r=f[c+1]>>4;var A=f[c+1]&15;k<r&&(k=r);x<A&&(x=A);r=E.components.push({h:r,v:A,quantizationId:f[c+
2],quantizationTable:null});E.componentIds[b]=r-1;c+=3}E.maxH=k;E.maxV=x;p(E);break;case 65476:b=h();for(g=2;g<b;){k=f[c++];x=new Uint8Array(16);for(n=r=0;16>n;n++,c++)r+=x[n]=f[c];A=new Uint8Array(r);for(n=0;n<r;n++,c++)A[n]=f[c];g+=17+r;(0===k>>4?e:a)[k&15]=Q(x,A)}break;case 65501:h();var w=h();break;case 65498:h();b=f[c++];n=[];for(g=0;g<b;g++){k=E.componentIds[f[c++]];var q=E.components[k];k=f[c++];q.huffmanTableDC=e[k>>4];q.huffmanTableAC=a[k&15];n.push(q)}g=f[c++];b=f[c++];k=f[c++];g=L(f,c,
E,n,w,g,b,k>>4,k&15);c+=g;break;case 65535:255!==f[c]&&c--;break;default:if(255===f[c-3]&&192<=f[c-2]&&254>=f[c-2])c-=3;else throw new t("unknown marker "+g.toString(16));}g=h()}this.width=E.samplesPerLine;this.height=E.scanLines;this.jfif=u;this.eof=c;this.adobe=y;this.components=[];for(g=0;g<E.components.length;g++){q=E.components[g];if(u=v[q.quantizationId])q.quantizationTable=u;this.components.push({output:T(E,q),scaleX:q.h/E.maxH,scaleY:q.v/E.maxV,blocksPerLine:q.blocksPerLine,blocksPerColumn:q.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(f,h){var l=this.width/f,p=this.height/h,c,u,y=0,v=this.components.length,a=f*h*v,e=new Uint8ClampedArray(a),g=new Uint32Array(f);for(u=0;u<v;u++){var n=this.components[u];var b=n.scaleX*l;var k=n.scaleY*p;y=u;var x=n.output;var E=n.blocksPerLine+1<<3;for(c=0;c<f;c++)n=0|c*b,g[c]=(n&4294967288)<<3|n&7;for(b=0;b<h;b++)for(n=0|b*k,n=E*(n&4294967288)|(n&7)<<3,c=0;c<f;c++)e[y]=x[n+g[c]],y+=v}if(h=this.decodeTransform)for(u=0;u<a;)for(f=n=0;n<v;n++,
u++,f+=2)e[u]=(e[u]*h[f]>>8)+h[f+1];return e},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(f){for(var h,l,p,c=0,u=f.length;c<u;c+=3)h=f[c],l=f[c+1],p=f[c+2],f[c]=h-179.456+1.402*p,f[c+1]=h+135.459-.344*l-.714*p,f[c+2]=h-226.816+1.772*l;return f},_convertYcckToRgb:function(f){for(var h,l,p,c,u=0,y=0,v=f.length;y<v;y+=4)h=f[y],l=f[y+1],p=f[y+2],c=f[y+3],f[u++]=
-122.67195406894+l*(-6.60635669420364E-5*l+4.37130475926232E-4*p-5.4080610064599E-5*h+4.8449797120281E-4*c-.154362151871126)+p*(-9.57964378445773E-4*p+8.17076911346625E-4*h-.00477271405408747*c+1.53380253221734)+h*(9.61250184130688E-4*h-.00266257332283933*c+.48357088451265)+c*(-3.36197177618394E-4*c+.484791561490776),f[u++]=107.268039397724+l*(2.19927104525741E-5*l-6.40992018297945E-4*p+6.59397001245577E-4*h+4.26105652938837E-4*c-.176491792462875)+p*(-7.78269941513683E-4*p+.00130872261408275*h+7.70482631801132E-4*
c-.151051492775562)+h*(.00126935368114843*h-.00265090189010898*c+.25802910206845)+c*(-3.18913117588328E-4*c-.213742400323665),f[u++]=-20.810012546947+l*(-5.70115196973677E-4*l-2.63409051004589E-5*p+.0020741088115012*h-.00288260236853442*c+.814272968359295)+p*(-1.53496057440975E-5*p-1.32689043961446E-4*h+5.60833691242812E-4*c-.195152027534049)+h*(.00174418132927582*h-.00255243321439347*c+.116935020465145)+c*(-3.43531996510555E-4*c+.24165260232407);return f},_convertYcckToCmyk:function(f){for(var h,
l,p,c=0,u=f.length;c<u;c+=4)h=f[c],l=f[c+1],p=f[c+2],f[c]=434.456-h-1.402*p,f[c+1]=119.541-h+.344*l+.714*p,f[c+2]=481.816-h-1.772*l;return f},_convertCmykToRgb:function(f){for(var h,l,p,c,u=0,y=1/255,v=0,a=f.length;v<a;v+=4)h=f[v]*y,l=f[v+1]*y,p=f[v+2]*y,c=f[v+3]*y,f[u++]=255+h*(-4.387332384609988*h+54.48615194189176*l+18.82290502165302*p+212.25662451639585*c-285.2331026137004)+l*(1.7149763477362134*l-5.6096736904047315*p-17.873870861415444*c-5.497006427196366)+p*(-2.5217340131683033*p-21.248923337353073*
c+17.5119270841813)-c*(21.86122147463605*c+189.48180835922747),f[u++]=255+h*(8.841041422036149*h+60.118027045597366*l+6.871425592049007*p+31.159100130055922*c-79.2970844816548)+l*(-15.310361306967817*l+17.575251261109482*p+131.35250912493976*c-190.9453302588951)+p*(4.444339102852739*p+9.8632861493405*c-24.86741582555878)-c*(20.737325471181034*c+187.80453709719578),f[u++]=255+h*(.8842522430003296*h+8.078677503112928*l+30.89978309703729*p-.23883238689178934*c-14.183576799673286)+l*(10.49593273432072*
l+63.02378494754052*p+50.606957656360734*c-112.23884253719248)+p*(.03296041114873217*p+115.60384449646641*c-193.58209356861505)-c*(22.33816807309886*c+180.12613974708367);return f},getData:function(f,h,l){if(4<this.numComponents)throw new t("Unsupported color mode");f=this._getLinearizedBlockData(f,h);if(1===this.numComponents&&l){l=f.length;h=new Uint8ClampedArray(3*l);for(var p=0,c=0;c<l;c++){var u=f[c];h[p++]=u;h[p++]=u;h[p++]=u}return h}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(f);
if(4===this.numComponents){if(this._isColorConversionNeeded())return l?this._convertYcckToRgb(f):this._convertYcckToCmyk(f);if(l)return this._convertCmykToRgb(f)}return f}};return J}()})})(z);m=m.getDefaultExportFromCjs(z.exports);d.JpegImage=m})},"esri/layers/support/rasterFormats/Lerc":function(){define(["require","exports","../../../assets"],function(d,m,z){function F(M,V,f){f.set(M.slice(V,V+f.length))}function t(M){const {_malloc:V,_free:f,_lerc_getBlobInfo:h,_lerc_getDataRanges:l,_lerc_decode_4D:p,
asm:c}=M;let u;const y=Object.values(c).find(a=>a&&"buffer"in a&&a.buffer===M.HEAPU8.buffer),v=a=>{a=a.map(n=>(n>>3<<3)+16);var e=a.reduce((n,b)=>n+b),g=V(e);u=new Uint8Array(y.buffer);e=a[0];a[0]=g;for(g=1;g<a.length;g++){const n=a[g];a[g]=a[g-1]+e;e=n}return a};T.getBlobInfo=a=>{var e=new Uint8Array(48),g=new Uint8Array(24);const [n,b,k]=v([a.length,e.length,g.length]);u.set(a,n);u.set(e,b);u.set(g,k);var x=h(n,a.length,b,k,12,3);if(x)throw f(n),Error(`lerc-getBlobInfo: error code is ${x}`);u=new Uint8Array(y.buffer);
F(u,b,e);F(u,k,g);e=new Uint32Array(e.buffer);var E=new Float64Array(g.buffer);const [r,A,,w,q,G,B,K,C,D,N]=e;g={version:r,depthCount:D,width:w,height:q,validPixelCount:B,bandCount:G,blobSize:K,maskCount:C,dataType:A,minValue:E[0],maxValue:E[1],maxZerror:E[2],statistics:[],bandCountWithNoData:N};if(N&&1<D)return f(n),g;if(1===D&&1===G)return f(n),g.statistics.push({minValue:E[0],maxValue:E[1]}),g;x=D*G*8;var R=new Uint8Array(x),I=new Uint8Array(x);e=n;var P=E=0;let O=!1;u.byteLength<n+2*x?(f(n),O=
!0,[e,E,P]=v([a.length,x,x]),u.set(a,e)):[E,P]=v([x,x]);u.set(R,E);u.set(I,P);if(x=l(e,a.length,D,G,E,P))throw f(e),O||f(E),Error(`lerc-getDataRanges: error code is ${x}`);u=new Uint8Array(y.buffer);F(u,E,R);F(u,P,I);a=new Float64Array(R.buffer);x=new Float64Array(I.buffer);I=g.statistics;for(R=0;R<G;R++)if(1<D){P=a.slice(R*D,(R+1)*D);const S=x.slice(R*D,(R+1)*D),W=Math.min.apply(null,P),X=Math.max.apply(null,S);I.push({minValue:W,maxValue:X,depthStats:{minValues:P,maxValues:S}})}else I.push({minValue:a[R],
maxValue:x[R]});f(e);O||f(E);return g};T.decode=(a,e)=>{const {maskCount:g,depthCount:n,bandCount:b,width:k,height:x,dataType:E,bandCountWithNoData:r}=e;var A=J[E],w=k*x;e=new Uint8Array(w*b);A=new Uint8Array(w*n*b*A.size);w=new Uint8Array(b);var q=new Uint8Array(8*b);const [G,B,K,C,D]=v([a.length,e.length,A.length,w.length,q.length]);u.set(a,G);u.set(e,B);u.set(A,K);u.set(w,C);u.set(q,D);if(a=p(G,a.length,g,B,n,k,x,b,E,K,C,D))throw f(G),Error(`lerc-decode: error code is ${a}`);u=new Uint8Array(y.buffer);
F(u,K,A);F(u,B,e);a=null;if(r){F(u,C,w);F(u,D,q);a=[];q=new Float64Array(q.buffer);for(let N=0;N<w.length;N++)a.push(w[N]?q[N]:null)}f(G);return{data:A,maskData:e,noDataValues:a}}}const J=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",
size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-3.4027999387901484E38,3.4027999387901484E38]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-1.7976931348623157E308,1.7976931348623157E308]}];let Q=null,L=!1;const T={getBlobInfo:null,decode:null};m.decode=function(M,V={}){var f=V.inputOffset??0;M=M instanceof Uint8Array?M.subarray(f):new Uint8Array(M,f);f=T.getBlobInfo(M);const {data:h,maskData:l,noDataValues:p}=T.decode(M,f),{width:c,height:u,bandCount:y,
depthCount:v,dataType:a,maskCount:e,statistics:g}=f;var n=J[a],b=new n.ctor(h.buffer);M=[];f=[];const k=c*u;var x=k*v;for(var E=0;E<y;E++){var r=b.subarray(E*x,(E+1)*x);if(V.returnInterleaved)M.push(r);else{a:{var A=k,w=v;if(2>w)break a;const q=new n.ctor(A*w);for(let G=0,B=0;G<A;G++)for(let K=0,C=G;K<w;K++,C+=A)q[C]=r[B++];r=q}M.push(r)}f.push(l.subarray(E*x,(E+1)*x))}b=0===e?null:1===e?f[0]:new Uint8Array(k);if(1<e)for(b.set(f[0]),x=1;x<f.length;x++)for(E=f[x],r=0;r<k;r++)b[r]&=E[r];({noDataValue:V}=
V);x=null!=V&&n.range[0]<=V&&n.range[1]>=V;if(0<e&&x)for(x=0;x<y;x++)for(E=M[x],r=f[x]||b,A=0;A<k;A++)0===r[A]&&(E[A]=V);({pixelType:n}=n);return{width:c,height:u,bandCount:y,pixelType:n,depthCount:v,statistics:g,pixels:M,mask:b,bandMasks:e===y&&1<y?f:null,noDataValues:p}};m.getBlobInfo=function(M,V={}){M=M instanceof Uint8Array?M.subarray(V.inputOffset??0):new Uint8Array(M,V.inputOffset??0);return T.getBlobInfo(M)};m.isLoaded=function(){return L};m.load=function(){return Q?Q:Q=(new Promise((M,V)=>
d(["../../../chunks/lerc-wasm"],M,V))).then(M=>M.lercWasm).then(({default:M})=>M({locateFile:V=>z.getAssetUrl(`esri/layers/support/rasterFormats/${V}`)})).then(M=>{t(M);L=!0})};m.pixelTypeInfoMap=J;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(d){function m(J,Q,L,T=!0){if(0!==Q%4||0!==L%4){var M=new ArrayBuffer(4*Math.ceil(L/4));M=new Uint8Array(M);J=new Uint8Array(J,Q,L);if(T)for(T=0;T<M.length;T+=4)M[T]=
J[T+3],M[T+1]=J[T+2],M[T+2]=J[T+1],M[T+3]=J[T];else M.set(J);return new Uint32Array(M.buffer)}if(T){T=new Uint8Array(J,Q,L);M=new Uint8Array(T.length);for(J=0;J<M.length;J+=4)M[J]=T[J+3],M[J+1]=T[J+2],M[J+2]=T[J+1],M[J+3]=T[J];return new Uint32Array(M.buffer)}return new Uint32Array(J,Q,L/4)}function z(){const J=[];for(let Q=0;257>=Q;Q++)J[Q]=[Q];return J}function F(J,Q){for(let L=0;L<Q.length;L++)J.push(Q[L])}const t=new Set;t.add(511);t.add(1023);t.add(2047);t.add(4095);t.add(8191);d.decode=function(J,
Q,L,T=!0){J=m(J,Q,L,T);Q=9;T=z();let M=32,V=T.length,f=[],h=1,l=J[0],p=0;const c=J.length;L=8*(4*c-L);const u=[];for(;null!=l;){if(M>=Q)M-=Q,p=l>>>32-Q,l<<=Q;else{p=l>>>32-M;l=J[h++];var y=Q-M;M=32-y;p=(p<<y)+(l>>>M);l<<=y}if(257===p)break;if(256===p)Q=9,T=z(),V=T.length,f=[];else{y=T[p];if(null==y){if(p>T.length)throw Error("data integrity issue: code does not exist on code page");f.push(f[0]);T[V++]=f.slice();F(u,f)}else F(u,y),f.push(y[0]),1<f.length&&(T[V++]=f.slice()),f=y.slice();t.has(V)&&Q++;
0===M&&(l=J[h++],M=32);if(h>c||h===c&&M<=L)break}}return new Uint8Array(u)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const d=z=>{let F=1;switch(z){case Uint8Array:case Int8Array:F=1;break;case Uint16Array:case Int16Array:F=2;break;case Uint32Array:case Int32Array:case Float32Array:F=4;break;case Float64Array:F=8}return F};class m{static decode(z,F){var t=F.pixelType;const J=[],Q=F.width*F.height;var L=Math.floor(z.byteLength/
(F.width*F.height*d(F.pixelType)));const {bandIds:T,format:M}=F;F=T?.length||Math.floor(z.byteLength/(F.width*F.height*d(F.pixelType)));var V=z.byteLength-z.byteLength%(Q*d(t)),f=new t(z,0,Q*L);let h,l,p,c,u=null;if("bip"===M)for(h=0;h<F;h++){p=new t(Q);c=T?T[h]:h;for(l=0;l<Q;l++)p[l]=f[l*L+c];J.push(p)}else if("bsq"===M)for(h=0;h<F;h++)c=T?T[h]:h,J.push(f.subarray(c*Q,(c+1)*Q));if(V<z.byteLength-1)if(z=z.slice(V),8*z.byteLength<Q)u=null;else{z=new Uint8Array(z,0,Math.ceil(Q/8));t=new Uint8Array(Q);
for(V=f=V=F=L=0;V<z.length-1;V++)for(F=z[V],f=7;0<=f;f--)t[L++]=F>>f&1;for(f=7;L<Q-1;)F=z[z.length-1],t[L++]=F>>f&1,f--;u=t}return{pixels:J,mask:u}}}return m})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(d,m,z,F,t,J,Q,L,T){function M(C,D){let N="unknown";3===C?N=64===D?"f64":"f32":1===C?1===D?N="u1":2===D?N="u2":4===D?N="u4":
8>=D?N="u8":16>=D?N="u16":32>=D&&(N="u32"):2===C&&(8>=D?N="s8":16>=D?N="s16":32>=D&&(N="s32"));return N}function V(C){let D=null;switch(C?C.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":D=Uint8Array;break;case "u16":D=Uint16Array;break;case "u32":D=Uint32Array;break;case "s8":D=Int8Array;break;case "s16":D=Int16Array;break;case "s32":D=Int32Array;break;case "f64":D=Float64Array;break;default:D=Float32Array}return D}function f(C,D){return{x:D[0]*C.x+D[1]*C.y+D[2],y:D[3]*C.x+D[4]*C.y+
D[5]}}function h(C,D){return C.get(D)?.values?.[0]}function l(C,D,N,R=0,I=Q.tiffTags,P=4){var O=8===P;const S=O?x(new DataView(C,N,8),0,D):(new DataView(C,N,2)).getUint16(0,D),W=4+2*P;var X=O?8:2;O=X+S*W;if(N+O>C.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:O};const ba=N+O+4<=C.byteLength?E(new DataView(C,N+O,8===P?8:4),0,D,8===P):null;N+=X;X=new Map;let Z,ca,aa,ea=0,ha=0;for(let ja=0;ja<S;ja++){var fa=new DataView(C,N+W*ja,W);Z=fa.getUint16(0,D);aa=fa.getUint16(2,D);ca=Q.getTagName(Z,
I);const ia=[];2===P?(ea=fa.getUint16(4,D),ha=fa.getUint16(6,D)):4===P?(ea=fa.getUint32(4,D),ha=fa.getUint32(8,D)):8===P&&(ea=E(fa,4,D,!0),ha=E(fa,12,D,!0),ia.push(fa.getUint32(12,D)),ia.push(fa.getUint32(16,D)));fa={id:Z,type:aa,valueCount:ea,valueOffset:ha,valueOffsets:ia,values:null};a(C,D,fa,R,!1,P);X.set(ca,fa)}return{success:!0,ifd:X,nextIFD:ba,requiredBufferSize:O}}function p(C,D){if(1!==D&&2!==D&&4!==D)return C;const N=new Uint8Array(C),R=8/D;C=new Uint8Array(C.byteLength*R);let I=0;const P=
2**D-1;for(let O=0;O<N.length;O++){const S=N[O];for(let W=0;W<R;W++)C[I++]=S<<D*W>>>8-D&P}return C.buffer}function c(C,D,N){const R=new z.JpegImage;R.parse(C);R.colorTransform=6===N?-1:0;C=R.getData(R.width,R.height,1!==D&&4!==D);return new Uint8Array(C.buffer)}function u(C){C=(new T.Zlib(C)).getBytes();var D=new ArrayBuffer(C.length);D=new Uint8Array(D);D.set(C);return D}async function y(C,D,N,R,I){var P=L.isPlatformLittleEndian===D,O=h(N,"BITSPERSAMPLE"),S=h(N,"SAMPLESPERPIXEL")??1,W=h(N,"PHOTOMETRICINTERPRETATION"),
X=h(N,"SAMPLEFORMAT")??1,ba=M(X,O),Z=h(N,"COMPRESSION")??1,ca=V(ba);if(34887===Z)return await F.load(),F.decode(C,{inputOffset:R}).pixels[0];if(1===Z)W=C.slice(R,R+I),D=new Uint8Array(W);else if(8===Z||32946===Z)D=new Uint8Array(C,R,I),D=u(D),W=D.buffer;else if(6===Z)D=new Uint8Array(C,R,I),D=c(D,S,W),W=D.buffer;else if(7===Z){const aa=N.get("JPEGTABLES").values,ea=aa.length-2;D=new Uint8Array(ea+I-2);for(let ha=0;ha<ea;ha++)D[ha]=aa[ha];C=new Uint8Array(C,R+2,I-2);for(R=0;R<C.length;R++)D[ea+R]=
C[R];D=c(D,S,W);W=D.buffer}else if(5===Z)D=t.decode(C,R,I,D),W=D.buffer;else throw Error("tiff-decode: unsupport compression "+Z);W=p(W,O);if("u8"!==ba&&"s8"!==ba&&!P)switch(W=new ArrayBuffer(D.length),P=new Uint8Array(W),ba){case "u16":case "s16":for(ba=0;ba<D.length;ba+=2)P[ba]=D[ba+1],P[ba+1]=D[ba];break;case "u32":case "s32":case "f32":for(ba=0;ba<D.length;ba+=4)P[ba]=D[ba+3],P[ba+1]=D[ba+2],P[ba+2]=D[ba+1],P[ba+3]=D[ba]}O=new ca(W);P=h(N,"PREDICTOR")??1;ba=h(N,"TILEWIDTH");D=h(N,"TILELENGTH");
if(1<P&&(5===Z||8===Z||32946===Z)&&ba&&D){Z=g(N);ca=new ca(O.length);ca.set(O);N=3===X&&3===P;Z=Z?1:S;S=N?4:1;X=ba*S*Z;N&&(ca=new Uint8Array(ca.buffer));for(P=0;P<D;P++)for(O=P*X,W=Z;W<X;W++)ca[O+W]+=ca[O+W-Z];if(N){N=new Uint8Array(ca.length);Z*=ba;for(ba=0;ba<D;ba++)for(P=ba*X,O=0;O<Z;O++)for(W=0;W<S;W++)N[P+O*S+W]=ca[P+O+(S-W-1)*Z];O=new Float32Array(N.buffer)}else O=ca}return O}async function v(C,D,N){const R=N.get("TILEOFFSETS")?.values;if(void 0===R)return null;const I=N.get("TILEBYTECOUNTS")?.values,
{width:P,height:O,pixelType:S,tileWidth:W,tileHeight:X}=e([N]);var ba=g(N,D);const Z=h(N,"SAMPLESPERPIXEL")||D.planes;var ca=P*O,aa=h(N,"BITSPERSAMPLE"),ea=34887===(h(N,"COMPRESSION")??1),ha=V(S);const fa=[];for(var ja=0;ja<Z;ja++)fa.push(new ha(ca));let ia,na,qa,ta,wa,ya,xa,Ba,sa;ha=Math.ceil(P/W);ca=(new Uint8Array(ca)).fill(255);ja=!1;if(0===aa%8)if(ea&&ba&&1<Z)for(ba=Math.round(R.length/Z),aa=0;aa<ba;aa++){var Ca=Math.floor(aa/ha)*X;qa=aa%ha*W;ta=Ca*P+qa;for(ea=0;ea<Z;ea++){var Ga=aa*Z+ea;0===
I[Ga]?(Ga=null,ja=!0):Ga=await y(C,D.littleEndian,N,R[Ga],I[Ga]);ya=0;wa=ta;Ba=Math.min(W,P-qa);xa=Math.min(X,O-Ca);sa=fa[ea];for(ia=0;ia<xa;ia++)for(wa=ta+ia*P,ya=ia*W,na=0;na<Ba;na++,wa++,ya++)Ga?sa[wa]=Ga[ya]:ca[wa]=0}}else for(aa=0;aa<R.length;aa++)for(Ca=Math.floor(aa/ha)*X,qa=aa%ha*W,ta=Ca*P+qa,0===I[aa]?(Ga=null,ja=!0):Ga=await y(C,D.littleEndian,N,R[aa],I[aa]),ya=0,wa=ta,Ba=Math.min(W,P-qa),xa=Math.min(X,O-Ca),Ca=0;Ca<Z;Ca++)if(sa=fa[Ca],ba||ea)for(ia=0;ia<xa;ia++)for(wa=ta+ia*P,ya=W*X*Ca+
ia*W,na=0;na<Ba;na++,wa++,ya++)Ga?sa[wa]=Ga[ya]:ca[wa]=0;else for(ia=0;ia<xa;ia++)for(wa=ta+ia*P,ya=ia*W*Z+Ca,na=0;na<Ba;na++,wa++,ya+=Z)Ga?sa[wa]=Ga[ya]:ca[wa]=0;return{width:P,height:O,pixelType:S,pixels:fa,mask:ja?ca:void 0}}function a(C,D,N,R=0,I=!1,P=4){if(N.values)return!0;var O=N.type,S=N.valueCount,W=N.valueOffset;let X=[];var ba=q[O],Z=8*ba,ca=S*ba,aa=S*q[O]*8,ea=8===P?64:32;P=N.valueOffsets;if(aa>ea&&ca>(I?C.byteLength:C?C.byteLength-W+R:0))return N.offlineOffsetSize=[W,ca],N.values=null,
!1;if(aa<=ea)if(D||(32>=ea?W>>>=32-aa:(C=P?.length?P[0]:W>>>0,D=P?.length?P[1]:Math.round((W-C)/4294967296),32>=aa?(W=C>>>32-aa,P[0]=W):(W=C*2**(32-aa)+(D>>>32-aa),P[0]=C,P[1]=D>>>32-aa))),1===S&&Z===ea)X=[W];else if(64===ea)for(C=P?.length?P[0]:W>>>0,W=P?.length?P[1]:Math.round((W-C)/4294967296),D=C,ba=32,C=1;C<=S;C++)ca=32-Z*C%32,ba<Z?(ca=D<<ca>>>32-ba,aa=W<<32-ba>>>32-ba,D=W,X.push(ca+aa*2**(Z-ba)),ba-=32-(Z-ba)):(X.push(D<<ca>>>32-Z),ba-=Z),0===ba&&(ba=32,D=W);else for(C=1;C<=S;C++)X.push(W<<
32-Z*C>>>32-Z);else for(W-=R,I&&(W=0),S=W;S<W+ca;S+=ba){switch(O){case 1:Z=(new DataView(C,S,1)).getUint8(0);break;case 2:Z=(new DataView(C,S,1)).getUint8(0);break;case 3:Z=(new DataView(C,S,2)).getUint16(0,D);break;case 4:case 13:Z=(new DataView(C,S,4)).getUint32(0,D);break;case 5:Z=(new DataView(C,S,4)).getUint32(0,D)/(new DataView(C,S+4,4)).getUint32(0,D);break;case 6:Z=(new DataView(C,S,1)).getInt8(0);break;case 7:Z=(new DataView(C,S,1)).getUint8(0);break;case 8:Z=(new DataView(C,S,2)).getInt16(0,
D);break;case 9:Z=(new DataView(C,S,4)).getInt32(0,D);break;case 10:Z=(new DataView(C,S,4)).getInt32(0,D)/(new DataView(C,S+4,4)).getInt32(0,D);break;case 11:Z=(new DataView(C,S,4)).getFloat32(0,D);break;case 12:Z=(new DataView(C,S,8)).getFloat64(0,D);break;case 16:case 18:Z=x(new DataView(C,S,8),0,D);break;case 17:P=new DataView(C,S,8);aa=(Z=D)?P.getInt32(0,Z):P.getUint32(0,Z);P=Z?P.getUint32(4,Z):P.getInt32(4,Z);ea=0<=(Z?aa:P)?1:-1;Z?aa*=ea:P*=ea;Z=ea*(Z?4294967296*P+aa:4294967296*aa+P);break;default:Z=
null}X.push(Z)}if(2===O){O="";W=X;X=[];for(C=0;C<W.length;C++)0===W[C]&&""!==O?(X.push(O),O=""):O+=String.fromCharCode(W[C]);""===O&&0!==X.length||X.push(O)}N.values=X;return!0}function e(C){var D=C[0];const N=h(D,"TILEWIDTH"),R=h(D,"TILELENGTH"),I=h(D,"IMAGEWIDTH"),P=h(D,"IMAGELENGTH");var O=h(D,"BITSPERSAMPLE");const S=h(D,"SAMPLESPERPIXEL");var W=h(D,"SAMPLEFORMAT")??1;const X=M(W,O),ba=g(D);var Z=D.get("GDAL_NODATA")?.values;let ca=null;Z?.length&&(ca=Z.map(sa=>parseFloat(sa)),ca.some(sa=>isNaN(sa))&&
(ca=null));var aa=h(D,"COMPRESSION")??1;switch(aa){case 1:Z="NONE";break;case 2:case 3:case 4:case 32771:Z="CCITT";break;case 5:Z="LZW";break;case 6:case 7:Z="JPEG";break;case 32773:Z="PACKBITS";break;case 8:case 32946:Z="DEFLATE";break;case 34712:Z="JPEG2000";break;case 34887:Z="LERC";break;default:Z=String(aa)}let ea=!0,ha="";G.has(aa)||(ea=!1,ha+="unsupported tag compression "+aa);3<W&&(ea=!1,ha+="unsupported tag sampleFormat "+W);1!==O&&2!==O&&4!==O&&0!==O%8&&(ea=!1,ha+="unsupported tag bitsPerSample "+
O);O=D.get("GEOASCIIPARAMS")?.values?.[0];if(O){var fa=(fa=O.split("|").find(sa=>sa.includes("ESRI PE String \x3d ")))?fa.replace("ESRI PE String \x3d ",""):"";fa=fa.startsWith("COMPD_CS")||fa.startsWith("PROJCS")||fa.startsWith("GEOGCS")?{wkid:null,wkt:fa}:null}W=D.get("GEOTIEPOINTS")?.values;O=D.get("GEOPIXELSCALE")?.values;aa=D.get("GEOTRANSMATRIX")?.values;var ja=D.has("GEOKEYDIRECTORY")?D.get("GEOKEYDIRECTORY").data:null,ia=!1;D=!1;if(ja){ia=2===h(ja,"GTRasterTypeGeoKey");var na=h(ja,"GTModelTypeGeoKey");
2===na?(ja=h(ja,"GeographicTypeGeoKey"),1024<=ja&&32766>=ja&&(fa={wkid:ja}),fa||32767!==ja||(D=!0,fa={wkid:4326})):1===na&&(ja=h(ja,"ProjectedCSTypeGeoKey"),1024<=ja&&32766>=ja&&(fa={wkid:ja}))}let qa;O&&W&&6<=W.length?(qa=[O[0],0,W[3]-W[0]*O[0],0,-Math.abs(O[1]),W[4]-W[1]*O[1]],ia&&(qa[2]-=.5*qa[0]+.5*qa[1],qa[5]-=.5*qa[3]+.5*qa[4])):aa&&16===aa.length&&(qa=ia?[aa[0],aa[1],aa[3]-.5*aa[0],aa[4],aa[5],aa[7]-.5*aa[5]]:[aa[0],aa[1],aa[3],aa[4],aa[5],aa[7]]);if(qa){W=[{x:0,y:P},{x:0,y:0},{x:I,y:P},{x:I,
y:0}];ja=ia=Number.POSITIVE_INFINITY;let sa=na=Number.NEGATIVE_INFINITY;for(let Ca=0;Ca<W.length;Ca++)aa=f(W[Ca],qa),ia=aa.x>ia?ia:aa.x,na=aa.x<na?na:aa.x,ja=aa.y>ja?ja:aa.y,sa=aa.y<sa?sa:aa.y;W={xmin:ia,xmax:na,ymin:ja,ymax:sa,spatialReference:fa}}else W={xmin:-.5,ymin:.5-P,xmax:I-.5,ymax:.5,spatialReference:fa};D&&(400<W.xmax-W.xmin||361<Math.max(Math.abs(W.xmin),Math.abs(W.xmax)))&&(fa=null,W.spatialReference=null);fa=n(C);let ta;let wa,ya;if(0<fa.length){wa=Math.round(Math.log(I/h(fa[0],"IMAGEWIDTH"))/
Math.LN2);var xa=fa[fa.length-1];ya=Math.round(Math.log(I/h(xa,"IMAGEWIDTH"))/Math.LN2);ta=h(xa,"TILEWIDTH");xa=h(xa,"TILELENGTH")}ta=null!=ya&&0<ya?ta||N:null;xa=null!=ya&&0<ya?xa||R:null;let Ba;N&&(Ba=[{maxCol:Math.ceil(I/N)-1,maxRow:Math.ceil(P/R)-1,minRow:0,minCol:0}],fa.forEach(sa=>{Ba.push({maxCol:Math.ceil(h(sa,"IMAGEWIDTH")/h(sa,"TILEWIDTH"))-1,maxRow:Math.ceil(h(sa,"IMAGELENGTH")/h(sa,"TILELENGTH"))-1,minRow:0,minCol:0})}));aa=C[0].get("GDAL_METADATA")?.values?.[0];aa=K(aa);ha+=" "+w({width:I,
height:P,tileWidth:N,tileHeight:R,planes:S,ifds:C});C=b(C).length===fa.length+1;return{width:I,height:P,tileWidth:N,tileHeight:R,planes:S,isBSQ:ba,pixelType:X,compression:Z,noData:ca,hasMaskBand:C,isSupported:ea,message:ha,extent:W,isPseudoGeographic:D,affine:O?null:qa,firstPyramidLevel:wa,maximumPyramidLevel:ya,pyramidBlockWidth:ta,pyramidBlockHeight:xa,tileBoundary:Ba,metadata:aa}}function g(C,D){return(C=C.get("PLANARCONFIGURATION")?.values)?2===C[0]:D?D.isBSQ:!1}function n(C){return C.filter(D=>
1===h(D,"NEWSUBFILETYPE"))}function b(C){return C.filter(D=>{const N=4===((h(D,"NEWSUBFILETYPE")??0)&4);D=4===h(D,"PHOTOMETRICINTERPRETATION");return N&&D})}function k(C){const {littleEndian:D,isBigTiff:N,firstIFDPos:R}=r(C);var I=R;const P=[];do if(I=A(C,D,I,0,Q.tiffTags,N?8:4),I.success)P.push(I.ifd),I=I.nextIFD;else break;while(0<I);C=e(P);I=n(P);const O=b(P);return{...C,littleEndian:D,isBigTiff:N,ifds:P,pyramidIFDs:I,maskIFDs:O}}function x(C,D,N){const R=C.getUint32(D,N);C=C.getUint32(D+4,N);
return N?4294967296*C+R:4294967296*R+C}function E(C,D,N,R){return R?x(C,D,N):C.getUint32(D,N)}function r(C){var D=new DataView(C,0,16),N=D.getUint16(0,!1);C=null;if(18761===N)C=!0;else if(19789===N)C=!1;else throw Error("unexpected endianess byte");var R=D.getUint16(2,C);if(42!==R&&43!==R)throw Error("unexpected tiff identifier");N=4;if(R=43===R){const I=D.getUint16(N,C);N+=2;if(8!==I)throw Error("unsupported bigtiff version");if(0!==D.getUint16(N,C))throw Error("unsupported bigtiff version");N+=
2}D=E(D,N,C,R);return{littleEndian:C,isBigTiff:R,firstIFDPos:D}}function A(C,D,N,R=0,I=Q.tiffTags,P=4){N=l(C,D,N,R,I,P);let O;const S=N.ifd;S&&(Q.ifdTags.forEach((W,X)=>{S.has(X)&&(O=S.get(X),O.data=l(C,D,O.valueOffset-R,R,W).ifd)}),S.has("GEOKEYDIRECTORY")&&(O=S.get("GEOKEYDIRECTORY"),(I=O.values)&&4<I.length&&(I=I[0]+"."+I[1]+"."+I[2],O.data=l(C,D,O.valueOffset+6-R,R,Q.geoKeys,2).ifd,O.data&&O.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[I]}))),S.has("XMP")&&(O=S.get("XMP"),
I=O.values,"number"===typeof I[0]&&7===O.type&&(O.values=[m.bytesToUTF8(new Uint8Array(I))])));return N}function w(C){const {width:D,height:N,tileHeight:R,tileWidth:I}=C,P=C.planes,O=I?I*R:D*N;C=h(C.ifds[0],"BITSPERSAMPLE");let S="";O*P>2**30/(8<C?C/8:1)&&(S=I?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return S}const q=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],G=new Set([1,5,6,7,8,34712,34887]),B=(C,D,N)=>{if(!(C&&0<C.length&&
D&&N))return null;let R,I,P;const O=C[0].length,S=C.length,W=new Uint8Array(O);for(let ba=0;ba<S;ba++)if(R=C[ba],I=D[ba],P=N[ba],0===ba)for(var X=0;X<O;X++)W[X]=R[X]<I||R[X]>P?0:1;else for(X=0;X<O;X++)W[X]&&(W[X]=R[X]<I||R[X]>P?0:1);return W},K=C=>{if(!C)return null;var D=C.match(/<Item(.*?)Item>/gi);if(!D||0===D.length)return null;C=new Map;var N;for(var R=0;R<D.length;R++){var I=D[R];var P=I.slice(6,I.indexOf("\x3e"));var O=I.indexOf("sample\x3d");-1<O&&(N=I.slice(O+8,I.indexOf('"',O+8)));O=I.indexOf("name\x3d");
-1<O&&(P=I.slice(O+6,I.indexOf('"',O+6)));P&&(I=I.slice(I.indexOf("\x3e")+1,I.indexOf("\x3c/Item\x3e")).trim(),null!=N?C.has(P)?C.get(P)[N]=I:C.set(P,[I]):C.set(P,I));N=null}D=C.get("STATISTICS_MINIMUM");P=C.get("STATISTICS_MAXIMUM");R=C.get("STATISTICS_MEAN");I=C.get("STATISTICS_STDDEV");N=null;if(D&&P)for(N=[],O=0;O<D.length;O++)N.push({min:parseFloat(D[O]),max:parseFloat(P[O]),avg:R&&parseFloat(R[O]),stddev:I&&parseFloat(I[O])});P=C.get("BandName");R=C.get("WavelengthMin");I=C.get("WavelengthMax");
D=null;if(P)for(D=[],O=0;O<P.length;O++)D.push({BandName:P[O],WavelengthMin:R&&parseFloat(R[O]),WavelengthMax:I&&parseFloat(I[O])});P=C.get("DataType");return{statistics:N,bandProperties:D,dataType:P,rawMetadata:C}};d.decode=async function(C,D={}){var N=D.pyramidLevel||0,R=D.headerInfo||k(C);const {ifds:I,noData:P}=R;if(0===I.length)throw Error("no valid image file directory");var O=w(R);if(O)throw O;O=null;var S=-1===N?I[I.length-1]:I[N];D=P??D.noDataValue;if(R.tileWidth)O=await v(C,R,S);else{{const ya=
L.isPlatformLittleEndian===R.littleEndian,xa=S.get("STRIPOFFSETS")?.values;if(void 0===xa)O=null;else{var {width:W,height:X,pixelType:ba}=e([S]);N=h(S,"SAMPLESPERPIXEL")||R.planes;var Z=h(S,"PHOTOMETRICINTERPRETATION");O=W*X;var ca=h(S,"BITSPERSAMPLE"),aa=V(ba),ea=new aa(O*N),ha=S.get("STRIPBYTECOUNTS")?.values,fa=h(S,"ROWSPERSTRIP"),ja=h(S,"COMPRESSION")??1;var ia=fa;if(0===ca%8)for(S=0;S<xa.length;S++){var na=S*fa*W*N;ia=(S+1)*fa>X?X-S*fa:fa;if("u8"===ba||"s8"===ba||ya)if(8===ja||32946===ja){var qa=
new Uint8Array(C,xa[S],ha[S]);qa=u(qa);var ta=qa.buffer}else 6===ja?(qa=new Uint8Array(C,xa[S],ha[S]),qa=c(qa,N,Z),ta=qa.buffer):5===ja?(qa=t.decode(C,xa[S],ha[S],R.littleEndian),ta=qa.buffer):(ha[S]!==ia*W*N*ca/8&&console.log("strip byte counts is different than expected"),ta=C.slice(xa[S],xa[S]+ha[S]));else{if(6===ja||8===ja||32946===ja){qa=new Uint8Array(C,xa[S],ha[S]);var wa=u(qa);ta=wa.buffer}else ha[S]!==ia*W*N*ca/8&&console.log("strip byte counts is different than expected"),ta=new ArrayBuffer(ha[S]),
qa=new Uint8Array(C,xa[S],ha[S]),wa=new Uint8Array(ta);switch(ba){case "u16":case "s16":for(ia=0;ia<qa.length;ia+=2)wa[ia]=qa[ia+1],wa[ia+1]=qa[ia];break;case "u32":case "s32":case "f32":for(ia=0;ia<qa.length;ia+=4)wa[ia]=qa[ia+3],wa[ia+1]=qa[ia+2],wa[ia+2]=qa[ia+1],wa[ia+3]=qa[ia]}}ta=p(ta,ca);ia=new aa(ta);ea.set(ia,na)}Z=[];if(1===N)Z.push(ea);else for(S=0;S<N;S++){R=new aa(O);for(C=0;C<O;C++)R[C]=ea[C*N+S];Z.push(R)}O={width:W,height:X,pixelType:ba,pixels:Z}}}}if(!O)return O;null!=D&&J.convertNoDataToMask(O,
D);return O};d.decodeTileOrStrip=async function(C,D){const {headerInfo:N,ifd:R,offsets:I,sizes:P}=D;var O=[];for(var S=0;S<I.length;S++){0===P[S]?1:0;var W=await y(C,N.littleEndian,R,I[S],P[S]||C.byteLength);O.push(W)}var X=g(R,N);C=h(R,"BITSPERSAMPLE");S=h(R,"SAMPLEFORMAT")??1;S=M(S,C);var ba=h(R,"SAMPLESPERPIXEL")||N.planes;const Z=V(S);W=h(R,"TILEWIDTH");const ca=h(R,"TILELENGTH");var aa=h(R,"COMPRESSION")??1;const ea=W*ca;C=[];let ha=O[0];const fa=34887===aa;for(let ja=0;ja<ba;ja++){aa=new Z(ea);
if(O.length===ba)ha=O[ja],ha.length===ea&&(aa=ha);else if(ha.length)if(X||fa)aa=ha.length===ea?ha:ha.slice(ea*ja,ea*(ja+1));else for(let ia=0;ia<ea;ia++)aa[ia]=ha[ia*ba+ja];C.push(aa)}O=N.noData?N.noData[0]:D.noDataValue;X=(ba=N.metadata?N.metadata.statistics:null)?ba.map(ja=>ja.min):null;ba=ba?ba.map(ja=>ja.max):null;S={pixelType:S,width:W,height:ca,pixels:C,noDataValue:O};null!=O?J.convertNoDataToMask(S,O):X&&ba&&D.applyMinMaxConstraint&&(S.mask=B(C,X,ba));return S};d.getImageInfo=e;d.getMaskIFDs=
b;d.getPyramidIFDs=n;d.isBSQConfig=g;d.parseFieldValues=a;d.parseHeader=k;d.parseIFD=A;d.parseSignature=r;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(d){d.bytesToUTF8=function(m,z){let F=0,t="",J=0,Q=0;const L=m.length;for(;F<L;)if(Q=m[F++],J=Q>>4,8>J?J=1:15===J?(J=4,Q=(Q&7)<<18|(m[F++]&63)<<12|(m[F++]&63)<<6|m[F++]&63):14===J?(J=3,Q=(Q&15)<<12|(m[F++]&63)<<6|m[F++]&63):(J=2,Q=(Q&31)<<6|
m[F++]&63),0!==Q||z)t+=String.fromCharCode(Q);return t};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const d=(()=>{const t=[];t[254]="NEWSUBFILETYPE";t[255]="SUBFILETYPE";t[256]="IMAGEWIDTH";t[257]="IMAGELENGTH";t[258]="BITSPERSAMPLE";t[259]="COMPRESSION";t[262]="PHOTOMETRICINTERPRETATION";t[263]="THRESHHOLDING";t[264]="CELLWIDTH";t[265]="CELLLENGTH";t[266]="FILLORDER";t[269]="DOCUMENTNAME";t[270]="IMAGEDESCRIPTION";
t[271]="MAKE";t[272]="MODEL";t[273]="STRIPOFFSETS";t[274]="ORIENTATION";t[277]="SAMPLESPERPIXEL";t[278]="ROWSPERSTRIP";t[279]="STRIPBYTECOUNTS";t[280]="MINSAMPLEVALUE";t[281]="MAXSAMPLEVALUE";t[282]="XRESOLUTION";t[283]="YRESOLUTION";t[284]="PLANARCONFIGURATION";t[285]="PAGENAME";t[286]="XPOSITION";t[287]="YPOSITION";t[288]="FREEOFFSETS";t[289]="FREEBYTECOUNTS";t[290]="GRAYRESPONSEUNIT";t[291]="GRAYRESPONSECURVE";t[292]="T4OPTIONS";t[293]="T6OPTIONS";t[296]="RESOLUTIONUNIT";t[297]="PAGENUMBER";t[300]=
"COLORRESPONSEUNIT";t[301]="TRANSFERFUNCTION";t[305]="SOFTWARE";t[306]="DATETIME";t[315]="ARTIST";t[316]="HOSTCOMPUTER";t[317]="PREDICTOR";t[318]="WHITEPOINT";t[319]="PRIMARYCHROMATICITIES";t[320]="COLORMAP";t[321]="HALFTONEHINTS";t[322]="TILEWIDTH";t[323]="TILELENGTH";t[324]="TILEOFFSETS";t[325]="TILEBYTECOUNTS";t[326]="BADFAXLINES";t[327]="CLEANFAXDATA";t[328]="CONSECUTIVEBADFAXLINES";t[330]="SUBIFD";t[332]="INKSET";t[333]="INKNAMES";t[334]="NUMBEROFINKS";t[336]="DOTRANGE";t[337]="TARGETPRINTER";
t[338]="EXTRASAMPLES";t[339]="SAMPLEFORMAT";t[340]="SMINSAMPLEVALUE";t[341]="SMAXSAMPLEVALUE";t[342]="TRANSFERRANGE";t[347]="JPEGTABLES";t[512]="JPEGPROC";t[513]="JPEGIFOFFSET";t[514]="JPEGIFBYTECOUNT";t[515]="JPEGRESTARTINTERVAL";t[517]="JPEGLOSSLESSPREDICTORS";t[518]="JPEGPOINTTRANSFORM";t[519]="JPEGQTABLES";t[520]="JPEGDCTABLES";t[521]="JPEGACTABLES";t[529]="YCBCRCOEFFICIENTS";t[530]="YCBCRSUBSAMPLING";t[531]="YCBCRPOSITIONING";t[532]="REFERENCEBLACKWHITE";t[700]="XMP";t[33550]="GEOPIXELSCALE";
t[33922]="GEOTIEPOINTS";t[33432]="COPYRIGHT";t[42112]="GDAL_METADATA";t[42113]="GDAL_NODATA";t[50844]="RPCCOEFFICIENT";t[34264]="GEOTRANSMATRIX";t[34735]="GEOKEYDIRECTORY";t[34736]="GEODOUBLEPARAMS";t[34737]="GEOASCIIPARAMS";t[34665]="EXIFIFD";t[34853]="GPSIFD";t[40965]="INTEROPERABILITYIFD";return t})(),m=(()=>{const t=d.slice();t[36864]="ExifVersion";t[40960]="FlashpixVersion";t[40961]="ColorSpace";t[42240]="Gamma";t[37121]="ComponentsConfiguration";t[37122]="CompressedBitsPerPixel";t[40962]="PixelXDimension";
t[40963]="PixelYDimension";t[37500]="MakerNote";t[37510]="UserComment";t[40964]="RelatedSoundFile";t[36867]="DateTimeOriginal";t[36868]="DateTimeDigitized";t[36880]="OffsetTime";t[36881]="OffsetTimeOriginal";t[36882]="OffsetTimeDigitized";t[37520]="SubSecTime";t[37521]="SubSecTimeOriginal";t[37522]="SubSecTimeDigitized";t[37888]="Temperature";t[37889]="Humidity";t[37890]="Pressure";t[37891]="WaterDepth";t[37892]="Acceleration";t[37893]="CameraElevationAngle";t[42016]="ImageUniqueID";t[42032]="CameraOwnerName";
t[42033]="BodySerialNumber";t[42034]="LensSpecification";t[42035]="LensMake";t[42036]="LensModel";t[42037]="LensSerialNumber";t[33434]="ExposureTime";t[33437]="FNumber";t[34850]="ExposureProgram";t[34852]="SpectralSensitivity";t[34855]="PhotographicSensitivity";t[34856]="OECF";t[34864]="SensitivityType";t[34865]="StandardOutputSensitivity";t[34866]="RecommendedExposureIndex";t[34867]="ISOSpeed";t[34868]="ISOSpeedLatitudeyyy";t[34869]="ISOSpeedLatitudezzz";t[37377]="ShutterSpeedValue";t[37378]="ApertureValue";
t[37379]="BrightnessValue";t[37380]="ExposureBiasValue";t[37381]="MaxApertureValue";t[37382]="SubjectDistance";t[37383]="MeteringMode";t[37384]="LightSource";t[37385]="Flash";t[37386]="FocalLength";t[37396]="SubjectArea";t[41483]="FlashEnergy";t[41484]="SpatialFrequencyResponse";t[41486]="FocalPlaneXResolution";t[41487]="FocalPlaneYResolution";t[41488]="FocalPlaneResolutionUnit";t[41492]="SubjectLocation";t[41493]="ExposureIndex";t[41495]="SensingMethod";t[41728]="FileSource";t[41729]="SceneType";
t[41730]="CFAPattern";t[41985]="CustomRendered";t[41986]="ExposureMode";t[41987]="WhiteBalance";t[41988]="DigitalZoomRatio";t[41989]="FocalLengthIn35mmFilm";t[41990]="SceneCaptureType";t[41991]="GainControl";t[41992]="Contrast";t[41993]="Saturation";t[41994]="Sharpness";t[41995]="DeviceSettingDescription";t[41996]="SubjectDistanceRange";return t})(),z=(()=>{const t=[];t[1024]="GTModelTypeGeoKey";t[1025]="GTRasterTypeGeoKey";t[1026]="GTCitationGeoKey";t[2048]="GeographicTypeGeoKey";t[2049]="GeogCitationGeoKey";
t[2050]="GeogGeodeticDatumGeoKey";t[2051]="GeogPrimeMeridianGeoKey";t[2052]="GeogLinearUnitsGeoKey";t[2053]="GeogLinearUnitSizeGeoKey";t[2054]="GeogAngularUnitsGeoKey";t[2055]="GeogAngularUnitSizeGeoKey";t[2056]="GeogEllipsoidGeoKey";t[2057]="GeogSemiMajorAxisGeoKey";t[2058]="GeogSemiMinorAxisGeoKey";t[2059]="GeogInvFlatteningGeoKey";t[2061]="GeogPrimeMeridianLongGeoKey";t[2060]="GeogAzimuthUnitsGeoKey";t[3072]="ProjectedCSTypeGeoKey";t[3073]="PCSCitationGeoKey";t[3074]="ProjectionGeoKey";t[3075]=
"ProjCoordTransGeoKey";t[3076]="ProjLinearUnitsGeoKey";t[3077]="ProjLinearUnitSizeGeoKey";t[3078]="ProjStdParallel1GeoKey";t[3079]="ProjStdParallel2GeoKey";t[3080]="ProjNatOriginLongGeoKey";t[3081]="ProjNatOriginLatGeoKey";t[3082]="ProjFalseEastingGeoKey";t[3083]="ProjFalseNorthingGeoKey";t[3084]="ProjFalseOriginLongGeoKey";t[3085]="ProjFalseOriginLatGeoKey";t[3086]="ProjFalseOriginEastingGeoKey";t[3087]="ProjFalseOriginNorthingGeoKey";t[3088]="ProjCenterLongGeoKey";t[3090]="ProjCenterEastingGeoKey";
t[3091]="ProjCenterNorthingGeoKey";t[3092]="ProjScaleAtNatOriginGeoKey";t[3093]="ProjScaleAtCenterGeoKey";t[3094]="ProjAzimuthAngleGeoKey";t[3095]="ProjStraightVertPoleLongGeoKey";t[4096]="VerticalCSTypeGeoKey";t[4097]="VerticalCitationGeoKey";t[4098]="VerticalDatumGeoKey";t[4099]="VerticalUnitsGeoKey";return t})(),F=new Map;F.set("EXIFIFD",m);F.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{tiffTags:d,ifdTags:F,geoKeys:z,getTagName:(t,J)=>{J=(J||d)[t];void 0===J&&(J="unknown"+String(t));return J}}})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(d){const m=new ArrayBuffer(4),z=new Uint8Array(m);(new Uint32Array(m))[0]=1;d.isPlatformLittleEndian=1===z[0];Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../Color ../../rasterRenderers ../../core/unitUtils ../../layers/support/Field ../FlowRenderer ./AuthoringInfo ./ClassBreakInfo ./colorRampUtils ./rasterRendererChecks ./UniqueValueInfo ../../rest/support/ClassBreaksDefinition ../../rest/support/generateRendererUtils ../../rest/support/MultipartColorRamp ../RasterStretchRenderer ../UniqueValueRenderer ../RasterColormapRenderer ../RasterShadedReliefRenderer ../ClassBreaksRenderer ../VectorFieldRenderer".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l,p,c,u,y,v,a){function e(I,P){I=g(I,P?.variableName);const {bandCount:O}=I;let {bandIds:S,stretchType:W}=P||{};S?.some(aa=>aa>=O)&&(S=null);let X=I.statistics,ba=I.histograms;1<O?(S=S?.length?S:n(I),X=null==X?null:S?.map(aa=>X[aa]),ba=null==ba?null:S?.map(aa=>ba[aa])):S=[0];null==W&&(W=k(I));let Z=!1;switch(W){case "none":Z=!1;break;case "percent-clip":Z=!ba?.length;break;default:Z=!X?.length}var {dataType:ca}=I;ca=1===S?.length&&N.has(ca)?C:null;ca=new p({stretchType:W,
dynamicRangeAdjustment:Z,colorRamp:ca,outputMin:0,outputMax:255,gamma:1===S?.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===W?ca.maxPercent=ca.minPercent=.25:"standard-deviation"===W&&(ca.numberOfStandardDeviations=2);if(!Z&&(null!=I.multidimensionalInfo||P?.includeStatisticsInStretch))if("percent-clip"===W)ca.histograms=ba;else if("min-max"===W||"standard-deviation"===W)ca.statistics=X;return ca}function g(I,P){var {multidimensionalInfo:O}=I;if(!P||!O)return I;O=O.variables.find(S=>S.name===P);
if(!O)return I;I=I.clone();if(O){const {statistics:S,histograms:W}=O;S?.length&&(I.statistics=S.map(X=>({min:X.min,max:X.max,avg:X.avg,stddev:X.stddev})));W?.length&&(I.histograms=W)}return I}function n(I){const P=I.bandCount;if(1===P)return null;if(2===P)return[0];({bandInfos:I}=I);let O;if(I.length===P){const {red:S,green:W,blue:X,nir:ba}=b(I);null!=S&&null!=W&&null!=X?O=[S,W,X]:null!=ba&&null!=S&&null!=W&&(O=[ba,S,W])}!O&&3<=P&&(O=[0,1,2]);return O}function b(I){const P={};for(let W=0;W<I.length;W++){var O=
I[W],S=O.name.toLowerCase();"red"===S?P.red=W:"green"===S?P.green=W:"blue"===S?P.blue=W:"nearinfrared"===S||"nearinfrared_1"===S||"nir"===S?P.nir=W:O.maxWavelength&&O.minWavelength&&(S=O.minWavelength,O=O.maxWavelength,null==P.blue&&410<=S&&480>=S&&480<=O&&540>=O?P.blue=W:null==P.green&&490<=S&&560>=S&&560<=O&&610>=O?P.green=W:null==P.red&&595<=S&&670>=S&&660<=O&&730>=O?P.red=W:null==P.nir&&700<=S&&860>=S&&800<=O&&950>=O&&(P.nir=W))}return P}function k(I){let P="percent-clip";const {pixelType:O,dataType:S,
histograms:W,statistics:X,multidimensionalInfo:ba}=I;I=N.has(S)||"generic"===S&&null!=ba;"u8"!==O||"processed"!==S&&null!=W&&null!=X?"u8"===O||"elevation"===S||I?P="min-max":null!=W?P="percent-clip":null!=X&&(P="min-max"):P="none";return P}function x(I,P,O,S){if(!M.isUVRendererSupported(I,P))return null;const {attributeTable:W,statistics:X}=I,ba=E(W,P),Z=A(W,"red"),ca=A(W,"green"),aa=A(W,"blue");I=new Q;const ea=[],ha=new Set,fa=!!(Z&&ca&&aa);if(null!=W)W.features.forEach(ja=>{var ia=ja.attributes[ba.name];
ha.has(ja.attributes[ba.name])||null==ia||(ha.add(ia),ia=!fa||"single"!==Z.type&&"double"!==Z.type||"single"!==ca.type&&"double"!==ca.type||"single"!==aa.type&&"double"!==aa.type||W.features.some(na=>1<na.attributes[Z.name]||1<na.attributes[ca.name]||1<na.attributes[aa.name])?1:255,ea.push(new V({value:ja.attributes[ba.name],label:ja.attributes[ba.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:fa?new m([ja.attributes[Z.name]*ia,ja.attributes[ca.name]*ia,ja.attributes[aa.name]*
ia,1]):new m([0,0,0,0])}})))});else if(X?.[0])for(P=X[0].min;P<=X[0].max;P++)ea.push(new V({value:P,label:P.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new m([0,0,0,0])}}));ea.sort((ja,ia)=>ja.value&&"string"===typeof ja.value.valueOf()?0:ja.value>ia.value?1:-1);if(!fa){const ja=T.convertColorRampToColormap(D,{numColors:ea.length});ea.forEach((ia,na)=>ia.symbol.color=new m(ja[na].slice(1,4)));I.colorRamp=D}if(O||S){const ja=O||T.convertColorRampToColormap(S,{numColors:ea.length}).map(ia=>
ia.slice(1));ea.forEach((ia,na)=>ia.symbol.color=new m(ja[na]));I.colorRamp=S}return new c({field:ba.name,uniqueValueInfos:ea,authoringInfo:I})}function E(I,P,O){let S;null!=I?(S=P?I.fields.find(W=>P.toLowerCase()===W.name.toLowerCase()):r(I.fields),S||(O||(S=I.fields.find(W=>"string"===W.type)),S||=A(I,"value"))):S=new t({name:"value"});return S}function r(I){let P;for(let O=0;O<I.length;O++){const S=I[O].name.toLowerCase();if("string"===I[O].type){if(S.startsWith("class")){P=I[O];break}null==P&&
(S.endsWith("name")||S.endsWith("type"))&&(P=I[O])}}return P}function A(I,P){return null==I?null:I.fields.find(O=>O.name.toLowerCase()===P)}function w(I){if(!M.isColormapRendererSupported(I))return null;let P;const {attributeTable:O,colormap:S}=I;if(null!=O){const W=A(O,"value"),X=E(O,null,!0);"string"===X.type&&(P={},O.features.forEach(ba=>{ba=ba.attributes;P[ba[W.name]]=X?ba[X.name]:ba[W.name]}))}return u.createFromColormap(S,P)}function q(I,P,O){let S=0,W=0;null!=I.attributeTable?(I=I.attributeTable,
S=W=I.features[0].attributes[P.name],I.features.forEach(X=>{X=X.attributes[P.name];X<S&&(S=X);X>W&&(W=X)})):null!=I.histograms&&(I=I.histograms,S=I[0].min,W=I[0].max);return(W-S)/O}function G(I){if(!M.isVectorFieldRendererSupported(I))return null;if(null!=I.statistics&&I.statistics.length&&("vector-magdir"===I.dataType||"vector-uv"===I.dataType)){const {minMagnitude:O,maxMagnitude:S}=K(I.dataType,I.statistics);var P=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:O,maxDataValue:S}]}I=
null!=I.multidimensionalInfo?R.get(I.multidimensionalInfo.variables[0].unit):null;P=new a({visualVariables:P,inputUnit:I,rotationType:"geographic"});P.visualVariables=[...P.sizeVariables,...P.rotationVariables];return P}function B(I){return{color:I.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function K(I,P){if("vector-magdir"===I)I=P[0].min,P=P[0].max;else{const O=P[0].min,S=P[0].max,W=P[1].min;P=P[1].max;I=0;P=Math.max(Math.abs(O),Math.abs(W),Math.abs(S),Math.abs(P))}return{minMagnitude:I,
maxMagnitude:P}}const C=l.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),D=l.fromJSON(T.predefinedJsonColorRamps[0]),N=new Set("scientific standard-time vector-uv vector-magdir vector-u vector-v vector-magnitude vector-direction".split(" ")),R=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);
d.createClassBreaksRenderer=function(I,P){I=g(I,P?.variableName);const {attributeTable:O}=I;if(!M.isClassBreaksSupported(I))return null;const S=null!=I.histograms?I.histograms[0]:null,W=null!=P?.numClasses&&isFinite(P?.numClasses)?P.numClasses:5,X=new Q({classificationMethod:P?.classificationMethod,colorRamp:P?.colorRamp});let ba=P?.field||"value";const Z=[],ca=[],aa=null!=O,ea=aa&&O.fields.find(na=>"count"===na.name.toLowerCase()),ha=aa?O.fields.find(na=>na.name.toLowerCase()===ba.toLowerCase()):
void 0;if(ha&&aa){ba=ha.name;const na=O.features.length;let qa=0;O.features.forEach(ta=>qa+=(ea?ta.attributes[ea.name]:50)/na);O.features.forEach(ta=>{const wa=ta.attributes[ha.name];ta=ea?ta.attributes[ea.name]:50;if(0<ta){ca.push(ta);ta=Math.max(1,Math.round(ta/na/qa*1E3));for(let ya=0;ya<ta;ya++)Z.push(wa)}})}else{var {pixelType:fa}=I;const na=(S.max-S.min)/S.size,qa=(fa=fa.includes("s")||fa.includes("u"))&&1===na?Math.floor(S.min+.5):S.min,ta=fa&&1===na?Math.floor(S.max-.5):S.max,wa=S.size;let ya=
0,xa;S.counts.forEach(Ba=>ya+=Ba/wa);S.counts.forEach((Ba,sa)=>{if(0<Ba)for(ca.push(Ba),Ba=Math.max(1,Math.round(Ba/wa/ya*1E3)),xa=aa?O.features[sa].attributes[ha.name]:0===sa?qa:sa===wa-1?ta:S.min+na*(sa+.5),sa=0;sa<Ba;sa++)Z.push(xa)})}fa=P?.classificationMethod||"natural-breaks";let ja=P?.definedInterval;"defined-interval"!==fa||ja||(ja=q(I,ha,W));I=h.createGenerateRendererClassBreaks({values:Z,valueFrequency:ca,normalizationTotal:null,definition:new f({classificationMethod:fa,breakCount:W,definedInterval:ja})});
let ia=P?.colors;ia||(P=P?.colorRamp||C,X.colorRamp=P,ia=T.convertColorRampToColormap(P,{numColors:I.classBreaks.length,interpolateAlpha:!0}).map(na=>na.slice(1)));P=I.classBreaks.map((na,qa)=>new L({minValue:na.minValue,maxValue:na.maxValue,label:na.label,symbol:{type:"simple-fill",color:ia[qa]}}));return new v({field:ba,classBreakInfos:P,authoringInfo:X})};d.createColormapRenderer=w;d.createDefaultRenderer=function(I,P){const {attributeTable:O,colormap:S}=I;if(M.isVectorFieldRendererSupported(I)){var W=
G(I);if(null!=W)return W}return null!=S&&(W=w(I),null!=W)||null!=O&&(W=x(I),null!=W)?W:e(I,P)};d.createFlowRenderer=function(I){if(!M.isFlowRendererSupported(I))return null;let P;if(null!=I.statistics&&0<I.statistics.length&&("vector-magdir"===I.dataType||"vector-uv"===I.dataType)){const {minMagnitude:O,maxMagnitude:S}=K(I.dataType,I.statistics);P=[{type:"color",field:"Magnitude",stops:[{value:O,color:"#1020C0"},{value:S,color:"#C02010"}]}]}return new J({visualVariables:P})};d.createShadedReliefRenderer=
function(I,P="traditional"){if(!M.isShadedReliefRendererSupported(I))return null;({extent:I}=I);I=I.width*F.getMetersPerUnitForSR(I.spatialReference);return new y({hillshadeType:P,scalingType:5E6<I?"adjusted":"none"})};d.createStretchRenderer=e;d.createUVRenderer=x;d.createVectorFieldRenderer=G;d.estimateMagnitudeRange=K;d.getBandNames=function(I,P){const O=I.bandInfos.map(({name:S})=>S);return P?.length?P.map(S=>O[S]):O};d.getClassField=E;d.getDefaultBandCombination=n;d.getDefaultInterpolation=function(I,
P,O){const S=["nearest","bilinear","cubic","majority"].find(W=>W===O?.toLowerCase());return"Map"===P?S??"bilinear":"standard-time"===I.dataType?S??"nearest":"thematic"===I.dataType||I.attributeTable||I.colormap?"nearest"===S||"majority"===S?S:"nearest":S??"bilinear"};d.getDefinedInterval=q;d.getField=A;d.getSupportedRendererTypes=function(I,P=!1){const O=["raster-stretch"];M.isColormapRendererSupported(I,P)&&O.push("raster-colormap");M.isUVRendererSupported(I)&&O.push("unique-value");M.isClassBreaksSupported(I,
P)&&O.push("class-breaks");M.isShadedReliefRendererSupported(I)&&O.push("raster-shaded-relief");M.isVectorFieldRendererSupported(I)&&O.push("vector-field");M.isFlowRendererSupported(I)&&O.push("flow");return O};d.getVariableRasterInfo=g;d.getWellKnownBandIndexes=b;d.normalizeRendererJSON=function(I){if("uniqueValue"===I.type){var P=I.uniqueValueInfos;P?.[0].symbol?.symbolLayers?.length&&(I.uniqueValueInfos=P?.map(O=>({value:O.value,label:O.label,symbol:O.symbol?B(O.symbol):null})));return I}"classBreaks"===
I.type&&(P=I.classBreakInfos,P[0].symbol?.symbolLayers?.length&&(I.classBreakInfos=P.map(O=>({classMinValue:O.classMinValue,classMaxValue:O.classMaxValue,label:O.label,symbol:O.symbol?B(O.symbol):null}))));return I};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/rasterRendererChecks":function(){define(["exports"],function(d){function m(z){return["u8","s8"].includes(z.pixelType)&&null!=z.statistics?.[0]?.min&&null!=z.statistics[0]?.max&&1===z.bandCount}d.isClassBreaksSupported=
function(z,F=!1){const {attributeTable:t,bandCount:J}=z;return 1===J&&(!F||null!=t||null!=z.histograms)};d.isColormapRendererSupported=function(z,F=!1){const {bandCount:t,colormap:J,pixelType:Q}=z;return 1===t&&(!!J?.length||!F&&"u8"===Q)};d.isFlowRendererSupported=function(z){({dataType:z}=z);return"vector-uv"===z||"vector-magdir"===z};d.isShadedReliefRendererSupported=function(z){const {bandCount:F,dataType:t,pixelType:J}=z;return"elevation"===t||"generic"===t&&1===F&&("s16"===J||"s32"===J||"f32"===
J||"f64"===J)};d.isSingleBand8BitRasterWithStats=m;d.isUVRendererSupported=function(z,F){const {attributeTable:t,bandCount:J}=z;return null==t&&m(z)?!0:null==t||1<J||F&&null==t.fields.find(Q=>Q.name.toLowerCase()===F.toLowerCase())?!1:!0};d.isVectorFieldRendererSupported=function(z){({dataType:z}=z);return"vector-uv"===z||"vector-magdir"===z};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,z,F,t,J,Q,L,T){t=new m.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});m=new m.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});z=class extends z.JSONSupport{constructor(M){super(M);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(M){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",M)}set definedInterval(M){"defined-interval"===this.classificationMethod&&this._set("definedInterval",M)}};d.__decorate([L.enumeration({classBreaksDef:"class-breaks-definition"})],z.prototype,"type",void 0);d.__decorate([F.property({json:{write:!0}})],z.prototype,
"breakCount",void 0);d.__decorate([F.property({json:{write:!0}})],z.prototype,"classificationField",void 0);d.__decorate([F.property({type:String,json:{read:t.read,write:t.write}})],z.prototype,"classificationMethod",void 0);d.__decorate([F.property({json:{write:!0}})],z.prototype,"normalizationField",void 0);d.__decorate([F.property({json:{read:m.read,write:m.write}})],z.prototype,"normalizationType",void 0);d.__decorate([F.property({value:null,json:{write:!0}})],z.prototype,"standardDeviationInterval",
null);d.__decorate([F.property({value:null,json:{write:!0}})],z.prototype,"definedInterval",null);return z=d.__decorate([T.subclass("esri.rest.support.ClassBreaksDefinition")],z)})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(d,m){function z(f){var h=f.definition;const {classificationMethod:l,normalizationType:p,definedInterval:c}=h;h=h.breakCount??1;const u=[];var y=f.values;if(0===y.length)return[];y=y.sort((b,k)=>b-k);var v=y[0],a=y[y.length-
1];if("equal-interval"===l)if(y.length>=h){y=(a-v)/h;f=v;for(var e=1;e<h;e++){var g=Number((v+e*y).toFixed(6));u.push({minValue:f,maxValue:g,label:F(f,g,p)});f=g}u.push({minValue:f,maxValue:a,label:F(f,a,p)})}else y.forEach(b=>{u.push({minValue:b,maxValue:b,label:F(b,b,p)})});else if("natural-breaks"===l){y=t(y);f=J(y.uniqueValues,f.valueFrequency||y.valueFrequency,h);for(e=1;e<h;e++)y.uniqueValues.length>e&&(g=Number(y.uniqueValues[f[e]].toFixed(6)),u.push({minValue:v,maxValue:g,label:F(v,g,p)}),
v=g);u.push({minValue:v,maxValue:a,label:F(v,a,p)})}else if("quantile"===l)if(y.length>=h&&v!==a){f=Math.ceil(y.length/h);e=0;for(g=1;g<h;g++){var n=f+e-1;n>y.length&&(n=y.length-1);0>n&&(n=0);u.push({minValue:v,maxValue:y[n],label:F(v,y[n],p)});v=y[n];e+=f;f=Math.ceil((y.length-e)/(h-g))}u.push({minValue:v,maxValue:a,label:F(v,a,p)})}else for(h=-1,a=0;a<y.length;a++)v=y[a],v!==h&&(h=v,u.push({minValue:h,maxValue:v,label:F(h,v,p)}),h=v);else if("standard-deviation"===l)if(f=T(y),e=M(y,f),0===e)u.push({minValue:y[0],
maxValue:y[0],label:F(y[0],y[0],p)});else{y=L(v,a,h,f,e)*e;e=0;for(g=h;1<=g;g--)n=Number((f-(g-.5)*y).toFixed(6)),u.push({minValue:v,maxValue:n,label:F(v,n,p)}),v=n,e++;g=Number((f+.5*y).toFixed(6));u.push({minValue:v,maxValue:g,label:F(v,g,p)});v=g;e++;for(n=1;n<=h;n++)g=e===2*h?a:Number((f+(n+.5)*y).toFixed(6)),u.push({minValue:v,maxValue:g,label:F(v,g,p)}),v=g,e++}else if("defined-interval"===l){if(!c)return u;h=y[0];a=y[y.length-1];y=Math.ceil((a-h)/c);v=h;for(f=1;f<y;f++)e=Number((h+f*c).toFixed(6)),
u.push({minValue:v,maxValue:e,label:F(v,e,p)}),v=e;u.push({minValue:v,maxValue:a,label:F(v,a,p)})}return u}function F(f,h,l){let p=null;return p=f===h?l&&"percent-of-total"===l?f+"%":f.toString():l&&"percent-of-total"===l?f+"% - "+h+"%":f+" - "+h}function t(f){const h=[],l=[];let p=Number.MIN_VALUE,c=1,u=-1;for(let y=0;y<f.length;y++){const v=f[y];v===p?(c++,l[u]=c):null!==v&&(h.push(v),p=v,c=1,l.push(c),u++)}return{uniqueValues:h,valueFrequency:l}}function J(f,h,l){var p=f.length;const c=[];l>p&&
(l=p);for(var u=0;u<l;u++)c.push(Math.round(u*p/l-1));c.push(p-1);u=Q(c,f,h,l);p=u.mean;u=u.sdcm;var y=l,v=0,a=0;let e=0,g=0,n=!0;for(let k=0;2>k&&n;k++){0===k&&(n=!1);for(var b=0;b<y-1;b++)for(;c[b+1]+1!==c[b+2];)if(c[b+1]+=1,v=V(b,c,f,h),e=v.sbMean,v=v.sbSdcm,a=V(b+1,c,f,h),g=a.sbMean,a=a.sbSdcm,v+a<u[b]+u[b+1])u[b]=v,u[b+1]=a,p[b]=e,p[b+1]=g,n=!0;else{--c[b+1];break}for(b=y-1;0<b;b--)for(;c[b]!==c[b-1]+1;)if(--c[b],v=V(b-1,c,f,h),e=v.sbMean,v=v.sbSdcm,a=V(b,c,f,h),g=a.sbMean,a=a.sbSdcm,v+a<u[b-
1]+u[b])u[b-1]=v,u[b]=a,p[b-1]=e,p[b]=g,n=!0;else{c[b]+=1;break}}n&&(u=Q(c,f,h,l));return c}function Q(f,h,l,p){let c=[];var u=[],y=[];let v=0;const a=[],e=[];for(var g=0;g<p;g++){var n=V(g,f,h,l);a.push(n.sbMean);e.push(n.sbSdcm);v+=e[g]}n=v;for(g=!0;g||v<n;){g=!1;c=[];for(u=0;u<p;u++)c.push(f[u]);for(y=0;y<p;y++)for(n=f[y]+1;n<=f[y+1];n++)if(u=h[n],0<y&&n!==f[y+1]&&Math.abs(u-a[y])>Math.abs(u-a[y-1]))f[y]=n;else if(y<p-1&&f[y]!==n-1&&Math.abs(u-a[y])>Math.abs(u-a[y+1])){f[y+1]=n-1;break}n=v;v=0;
u=[];y=[];for(let b=0;b<p;b++){u.push(a[b]);y.push(e[b]);const k=V(b,f,h,l);a[b]=k.sbMean;e[b]=k.sbSdcm;v+=e[b]}}if(v>n){for(h=0;h<p;h++)f[h]=c[h],a[h]=u[h],e[h]=y[h];v=n}return{mean:a,sdcm:e}}function L(f,h,l,p,c){f=Math.max(p-f,h-p)/c/l;return 1<=f?1:.5<=f?.5:.25}function T(f){let h=0;for(let l=0;l<f.length;l++)h+=f[l];return h/=f.length}function M(f,h){let l=0;for(let p=0;p<f.length;p++){const c=f[p];l+=(c-h)*(c-h)}l/=f.length;return Math.sqrt(l)}function V(f,h,l,p){var c=0,u=0;for(var y=h[f]+
1;y<=h[f+1];y++){const v=p[y];c+=l[y]*v;u+=v}0>=u&&m.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");c/=u;u=0;for(y=h[f]+1;y<=h[f+1];y++)u+=p[y]*(l[y]-c)**2;return{sbMean:c,sbSdcm:u}}d.createGenerateRendererClassBreaks=function(f){const {normalizationTotal:h}=f;return{classBreaks:z(f),normalizationTotal:h}};d.createGenerateRendererUniqueValues=function(f){f=t(f);const h=[],l=f.uniqueValues.length;for(let p=0;p<l;p++){const c=f.uniqueValues[p];h.push({value:c,
count:f.valueFrequency[p],label:c.toString()})}return{uniqueValues:h}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/tslib.es6 ../../core/colorUtils ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/stretchUtils ../../layers/support/rasterFunctions/surfaceUtils ./colorRampUtils ./rasterRendererChecks".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l){function p(c){return M.isValidPixelBlock(c)&&0!==c.validPixelCount}z=class extends z.JSONSupport{constructor(c){super(c)}bind(){const {rendererJSON:c}=this;if(!c)return{success:!1};this.lookup={rendererJSON:{}};let u;switch(c.type){case "uniqueValue":u=this._updateUVRenderer(c);break;case "rasterColormap":u=this._updateColormapRenderer(c);break;case "rasterStretch":u=this._updateStretchRenderer(c);break;case "classBreaks":u=this._updateClassBreaksRenderer(c);
break;case "rasterShadedRelief":u=this._updateShadedReliefRenderer(c);break;case "vectorField":u=this._updateVectorFieldRenderer();break;case "flowRenderer":u=this._updateFlowRenderer()}return u}symbolize(c){let u=c?.pixelBlock;if(!p(u))return u;if(c.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(u,c.simpleStretchParams);try{3<u.pixels.length&&(u=u.extractBands(c.bandIds??[0,1,2]));let y;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":y=
this._symbolizeColormap(u);break;case "classBreaks":y=this._symbolizeClassBreaks(u);break;case "rasterStretch":y=this._symbolizeStretch(u,c.bandIds);break;case "rasterShadedRelief":const v=c.extent;y=this._symbolizeShadedRelief(u,{isGCS:v.spatialReference.isGeographic,resolution:{x:(v.xmax-v.xmin)/u.width,y:(v.ymax-v.ymin)/u.height}})}return y}catch(y){return F.getLogger(this).error("symbolize",y.message),u}}simpleStretch(c,u){if(!p(c))return c;try{return 3<c.pixels.length&&(c=c.extractBands([0,1,
2])),V.stretch(c,{...u,isRenderer:!0})}catch(y){return F.getLogger(this).error("symbolize",y.message),c}}generateWebGLParameters(c){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const {indexedColormap:e,offset:g}=this.lookup.colormapLut||{};return{colormap:e,colormapOffset:g,type:"lut"}}const {pixelBlock:u,isGCS:y,resolution:v,bandIds:a}=c;({rendererJSON:c}=this);return"rasterStretch"===c.type?this._generateStretchWebGLParams(u,c,a):"rasterShadedRelief"===c.type?
this._generateShadedReliefWebGLParams(c,y,v??void 0):"vectorField"===c.type?this._generateVectorFieldWebGLParams(c):null}_isLUTChanged(c){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const u=this.rendererJSON.colorRamp;if(c)return JSON.stringify(u)!==JSON.stringify(this.lookup.rendererJSON.colorRamp);({...this.rendererJSON});({...this.lookup.rendererJSON})}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(c){return this._isLUTChanged()&&
!this.bind().success?c:M.colorize(c,this.lookup.colormapLut)}_symbolizeClassBreaks(c){const {canUseIndexedLUT:u}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?c:u?M.colorize(c,this.lookup.colormapLut):M.remapColor(c,this.lookup.remapLut??[])}_symbolizeStretch(c,u){const {rasterInfo:y}=this,{pixelType:v,bandCount:a}=y,e=this.rendererJSON;var g=["u8","u16","s8","s16"].includes(v);let n;var {dra:b}=e;({gamma:k}=this.lookup);if("histogramEqualization"===
e.stretchType){g=b?null:this.lookup?.histogramLut;u=V.getStretchCutoff(e,{rasterInfo:y,pixelBlock:c,bandIds:u,returnHistogramLut:!g});var k=V.stretch(c,{...u,gamma:k,isRenderer:!0});k=M.lookupPixels(k,{lut:b?u.histogramLut:g,offset:0})}else if(g){if(b)b=V.getStretchCutoff(e,{rasterInfo:y,pixelBlock:c,bandIds:u}),n=V.createStretchLUT({pixelType:v,...b,gamma:k,rounding:"floor"});else{if(this._isLUTChanged()&&!this.bind().success)return c;n=this.lookup?this.lookup.stretchLut:null}if(!n)return c;1<a&&
null!=u&&u.length===c?.pixels.length&&n?.lut.length===a&&(n={lut:u.map(x=>n.lut[x]),offset:n.offset});k=M.lookupPixels(c,n)}else b=V.getStretchCutoff(e,{rasterInfo:y,pixelBlock:c,bandIds:u}),k=V.stretch(c,{...b,gamma:k,isRenderer:!0});if(e.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return c;k=M.colorize(k,this.lookup?.colormapLut)}return k}_symbolizeShadedRelief(c,u){var y=this.rendererJSON;u=f.hillshade(c,{...y,...u});if(!y.colorRamp||this._isLUTChanged(!0)&&!this.bind().success)return u;
y=this.lookup?this.lookup.hsvMap:null;if(!y)return u;f.tintHillshade(u,c,y,this.rasterInfo.statistics?.[0]??{min:0,max:8E3});return u}_isVectorFieldData(){const {bandCount:c,dataType:u}=this.rasterInfo;return 2===c&&("vector-magdir"===u||"vector-uv"===u)}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?
{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(c){const {bandCount:u,attributeTable:y,pixelType:v}=this.rasterInfo,a=c.field1;if(!a)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const e=c.defaultSymbol;var g=1===u&&["u8","s8"].includes(v);if(!l.isUVRendererSupported(this.rasterInfo,a)&&!g)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};
const n=[];if(null!=y){const b=y.fields.find(k=>"value"===k.name.toLowerCase());if(!b)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};y.features.forEach(k=>{const x=c.uniqueValueInfos?.find(E=>String(E.value)===String(k.attributes[a]))?.symbol?.color;x?n.push([k.attributes[b.name]].concat(x)):e&&n.push([k.attributes[b.name]].concat(e.color))})}else{if("value"!==a.toLowerCase())return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not availalbe.'};
c.uniqueValueInfos?.forEach(b=>{const k=b?.symbol?.color;k?n.push([parseInt(""+b.value,10)].concat(k)):e&&n.push([parseInt(""+b.value,10)].concat(e?.color))})}if(0===n.length)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};g=M.createColormapLUT({colormap:n});this.lookup={rendererJSON:c,colormapLut:g};this.canRenderInWebGL=this._isColormapSupportedByWebGL(g?.indexedColormap);return{success:!0}}_updateColormapRenderer(c){if(!l.isColormapRendererSupported(this.rasterInfo))return{success:!1,
error:"Unsupported data; the data source does not have a colormap."};var u=c.colormapInfos.map(y=>[y.value].concat(y.color)).sort((y,v)=>y[0]-v[0]);if(!u||0===u.length)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};u=M.createColormapLUT({colormap:u});this.lookup={rendererJSON:c,colormapLut:u};this.canRenderInWebGL=this._isColormapSupportedByWebGL(u?.indexedColormap);return{success:!0}}_updateShadedReliefRenderer(c){if(!l.isShadedReliefRendererSupported(this.rasterInfo))return{success:!1,
error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(c.colorRamp){var u=h.convertColorRampToColormap(c.colorRamp,{interpolateAlpha:!0});u=M.createColormapLUT({colormap:u});const y=[],v=u.indexedColormap;for(let a=0;a<v.length;a+=4){const e=m.toHSV({r:v[a],g:v[a+1],b:v[a+2]});y.push([e.h/60,e.s/100,255*e.v/100])}this.lookup={rendererJSON:c,colormapLut:u,hsvMap:y}}else this.lookup=null;this.canRenderInWebGL=!0;
return{success:!0}}_analyzeClassBreaks(c){const {attributeTable:u,pixelType:y}=this.rasterInfo,v=null!=u?u.fields.find(g=>"value"===g.name.toLowerCase()):null,a=null!=u?u.fields.find(g=>g.name.toLowerCase()===c.field.toLowerCase()):null,e=null!=v&&null!==a;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(y)||e,tableValueField:v,tableBreakField:a}}_updateClassBreaksRenderer(c){var {attributeTable:u}=this.rasterInfo;const {canUseIndexedLUT:y,tableValueField:v,tableBreakField:a}=this._analyzeClassBreaks(c);
var e=c.classBreakInfos;if(!e?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};e=e.sort((x,E)=>x.classMaxValue-E.classMaxValue);var g=e[e.length-1],n=c.minValue;if(!y){var b=[];for(var k=0;k<e.length;k++)b.push({value:e[k].classMinValue??n,mappedColor:e[k].symbol.color}),n=e[k].classMaxValue;b.push({value:g.classMaxValue,mappedColor:g.symbol.color});this.lookup={rendererJSON:c,remapLut:b};this.canRenderInWebGL=!1;return{success:!0}}b=
[];if(null!=u&&null!=v&&null!==a&&v!==a){g=v.name;const x=a.name,E=e[e.length-1],{classMaxValue:r}=E;n=c.minValue;for(k of u.features){u=k.attributes[g];const A=k.attributes[x],w=A===r?E:A<n?null:e.find(({classMaxValue:q})=>q>A);w&&b.push([u].concat(w.symbol.color))}}else{n=Math.floor(c.minValue);for(k=0;k<e.length;k++){for(u=e[k];n<u.classMaxValue;n++)b.push([n].concat(u.symbol.color));n=Math.ceil(u.classMaxValue)}g.classMaxValue===n&&b.push([g.classMaxValue].concat(g.symbol.color))}e=M.createColormapLUT({colormap:b,
fillUnspecified:!1});this.lookup={rendererJSON:c,colormapLut:e};this.canRenderInWebGL=this._isColormapSupportedByWebGL(e?.indexedColormap);return{success:!0}}_isColormapSupportedByWebGL(c){return!!c?.length&&16384>=c.length}_isHistogramRequired(c){return"percentClip"===c||"histogramEqualization"===c}_isValidRasterStatistics(c){return null!=c&&0<c.length&&null!=c[0].min&&null!=c[0].max}_updateStretchRenderer(c){let {stretchType:u,dra:y}=c;if(!("none"===u||c.statistics?.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||
y))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};var v=c.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(c.stretchType)||v?.length||y||(u="minMax");const {computeGamma:a,useGamma:e,colorRamp:g}=c;let {gamma:n}=c;e&&a&&!n?.length&&(n=V.computeGammaValues(this.rasterInfo.pixelType,c.statistics?.length?c.statistics:this.rasterInfo.statistics));var b=this.rasterInfo.pixelType;const k=!y&&["u8","u16",
"s8","s16"].includes(b);"histogramEqualization"===u?(b=v.map(x=>V.createHistogramEqualizationLUT(x)),this.lookup={rendererJSON:c,histogramLut:b}):k&&(v=V.getStretchCutoff(c,{rasterInfo:this.rasterInfo}),b=V.createStretchLUT({pixelType:b,...v,gamma:e?n:null,rounding:"floor"}),this.lookup={rendererJSON:c,stretchLut:b});g&&!this._isStretchColorRampNoop(g)&&(b=h.convertColorRampToColormap(g,{interpolateAlpha:!0}),this.lookup||(this.lookup={rendererJSON:c}),this.lookup.colormapLut=M.createColormapLUT({colormap:b}),
this.lookup.rendererJSON=c);this.lookup.gamma=e&&n?.length?n:null;this.canRenderInWebGL=!0;return{success:!0}}_isStretchColorRampNoop(c){return"algorithmic"===c.type&&["0,0,0,255","0,0,0"].includes(c.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(c.toColor.join(","))}_generateStretchWebGLParams(c,u,y){let v=null,a=null;var e=this.lookup?.colormapLut;u.colorRamp&&e&&(v=e.indexedColormap,a=e.offset);"histogramEqualization"===u.stretchType&&(u={...u,stretchType:"minMax"});({gamma:e}=
this.lookup);const g=!!(u.useGamma&&e&&e.some(w=>1!==w)),{minCutOff:n,maxCutOff:b,outMin:k,outMax:x}=V.getStretchCutoff(u,{rasterInfo:this.rasterInfo,pixelBlock:c,bandIds:y});var E=0;null!=c&&(E=c.getPlaneCount(),2===E&&(c=c.clone(),c.statistics=[c.statistics[0]],c.pixels=[c.pixels[0]]));({bandCount:c}=this.rasterInfo);y=Math.min(3,y?.length||E||c,c);c=new Float32Array(y);E=v||g?1:255;let r;for(r=0;r<n.length;r++)c[r]=b[r]===n[r]?0:(x-k)/(b[r]-n[r])/E;const A=new Float32Array(y);if(g&&e)for(r=0;r<
y;r++)A[r]=1<e[r]?2<e[r]?6.5+(e[r]-2)**2.5:6.5+100*(2-e[r])**4:1;return{bandCount:y,outMin:k/E,outMax:x/E,minCutOff:n,maxCutOff:b,factor:c,useGamma:g,gamma:g?e:[1,1,1],gammaCorrection:g?A:[1,1,1],colormap:v,colormapOffset:a,stretchType:u.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(c,u=!1,y={x:0,y:0}){let v=null,a=null;const e=this.lookup?.colormapLut;c.colorRamp&&e&&(v=e.indexedColormap,a=e.offset);u=f.calculateHillshadeParams({...c,isGCS:u,resolution:y});y=this.rasterInfo.statistics?.[0];
return{...u,minValue:y?.min??0,maxValue:y?.max??8E3,hillshadeType:"traditional"===c.hillshadeType?0:1,type:"hillshade",colormap:v,colormapOffset:a}}_generateVectorFieldWebGLParams(c){const {style:u,inputUnit:y,outputUnit:v,visualVariables:a,symbolTileSize:e,flowRepresentation:g}=c;let n;var b=this.rasterInfo.statistics?.[0].min??0,k=this.rasterInfo.statistics?.[0].max??50,x=a?.find(A=>"sizeInfo"===A.type)??{type:"sizeInfo",field:"Magnitude",maxDataValue:k,maxSize:.8*e,minDataValue:b,minSize:.2*e},
E=x.minDataValue??b,r=x.maxDataValue??k;k=null!=x.maxSize&&null!=x.minSize?[x.minSize/e,x.maxSize/e]:[.2,.8];"wind_speed"===u&&(k[0]=k[1]=(k[0]+k[1])/2);b=null!=E&&null!=r?[E,r]:null;if("classified_arrow"===u)if(null!=E&&null!=r&&null!=x)for(n=[],E=(x.maxDataValue-x.minDataValue)/5,r=0;6>r;r++)n.push(x.minDataValue+E*r);else n=[0,1E-6,3.5,7,10.5,14];x="flow_to"===g===("ocean_current_kn"===u||"ocean_current_m"===u)?0:Math.PI;E=a?.find(A=>"rotationInfo"===A.type);return{breakValues:n,dataRange:b,inputUnit:y,
outputUnit:v,symbolTileSize:e,symbolPercentRange:k,style:u||"single_arrow",rotation:x,rotationType:this.rasterInfo.storageInfo?.tileInfo&&"vector-uv"===this.rasterInfo.dataType?"geographic":E?.rotationType||c.rotationType,type:"vectorField"}}};d.__decorate([t.property({json:{write:!0}})],z.prototype,"rendererJSON",void 0);d.__decorate([t.property({type:T,json:{write:!0}})],z.prototype,"rasterInfo",void 0);d.__decorate([t.property({json:{write:!0}})],z.prototype,"lookup",void 0);d.__decorate([t.property()],
z.prototype,"canRenderInWebGL",void 0);return z=d.__decorate([L.subclass("esri.renderers.support.RasterSymbolizer")],z)})},"esri/layers/support/rasterFunctions/stretchUtils":function(){define(["exports","../../../core/maybe","../PixelBlock","../rasterFormats/pixelRangeUtils","../../../renderers/support/stretchRendererUtils"],function(d,m,z,F,t){function J(h,l=256){l=Math.min(l,256);const {size:p,counts:c}=h;h=new Uint8Array(p);var u=c.reduce((g,n)=>g+n/l,0);let y=0;var v=0;let a=0,e=u;for(let g=0;g<
p;g++)if(a+=c[g],!(g<p-1&&a+c[g+1]<e)){for(;y<l-1&&e<a;)y++,e+=u;for(;v<=g;v++)h[v]=y;v=g+1}for(u=v;u<p;u++)h[u]=l-1;return h}function Q(h,l){h=Math.min(Math.max(h,-100),100);l=Math.min(Math.max(l??0,-100),100);let p=0,c=0;const u=new Uint8Array(256);for(p=0;256>p;p++)0<h&&100>h?c=(200*p-25500+510*l)/(2*(100-h))+128:0>=h&&-100<h?c=(200*p-25500+510*l)*(100+h)/2E4+128:100===h?(c=200*p-25500+256*(100-h)+510*l,c=0<c?255:0):-100===h&&(c=128),u[p]=255<c?255:0>c?0:c;return u}function L(h,l,p,c){let u=Infinity,
y=-Infinity;var v=0,a=0,e=0,g=0;const n=h.length;var b=new Map,k=[];for(let x=0;x<n;x++){const E=h[x];if(!l||l[x]){k.push(E);const r=(b.get(E)??0)+1;b.set(E,r);r>g&&(g=r,e=E);u=E<u?E:u;y=E>y?E:y;v+=E;a++}}if(0===a)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};v/=a;g=0;for(b=0;b<n;b++)if(!l||l[b])g+=(h[b]-v)**2;b=l?l.filter(x=>x).length:n;g=1>=b?0:Math.sqrt(g/(b-1));k.sort((x,E)=>x-E);b=a>>>1;e={min:u,max:y,avg:v,stddev:g,mode:e,median:a%2?k[Math.floor(b)]:(k[b-1]+
k[b])/2};if(!c)return{statistics:e,histogram:null};if(["u8","s8","u4","u2","u1"].includes(p)){a=y-u+1;p=new Uint32Array(a);for(c=0;c<n;c++)l&&!l[c]||p[h[c]-u]++;return{statistics:e,histogram:{min:u-.5,max:y+.5,size:a,counts:p}}}p=new Uint32Array(256);c=(y-u)/256;if(0===c)return{statistics:e,histogram:{min:u,max:y,size:1,counts:(new Uint32Array(1)).fill(a)}};a=new Uint32Array(257);for(k=0;k<n;k++)l&&!l[k]||a[Math.floor((h[k]-u)/c)]++;for(h=0;255>h;h++)p[h]=a[h];p[255]=a[255]+a[256];return{statistics:e,
histogram:{min:u,max:y,size:256,counts:p}}}function T(h){if(!h?.pixels?.length)return null;const {pixels:l,mask:p,bandMasks:c,pixelType:u}=h,y=h.width*h.height,v=l.length,a=[],e=[];let g,n;for(let q=0;q<v;q++){var b=new Uint32Array(256);var k=l[q],x=c?.[q]??p;if("u8"===u){g=255;n=0;if(x)for(var E=0;E<y;E++){if(x[E]){var r=k[E];g=r<g?r:g;n=r>n?r:n;b[r]++}}else for(x=0;x<y;x++)E=k[x],g=E<g?E:g,n=E>n?E:n,b[E]++;b=b.slice(g,n+1)}else{r=!1;h.statistics||(h.updateStatistics(),r=!0);var A=h.statistics;g=
A[q].minValue;n=A[q].maxValue;E=(n-g)/256;if(0===E)for(!A||h.validPixelCount||r||h.updateStatistics(),k=(h.validPixelCount||h.width*h.height)/256,x=0;256>x;x++)b[x]=Math.round(k*(x+1))-Math.round(k*x);else{r=new Uint32Array(257);for(A=0;A<y;A++)x&&!x[A]||r[Math.floor((k[A]-g)/E)]++;for(k=0;255>k;k++)b[k]=r[k];b[255]=r[255]+r[256]}}E="u8"===u?g-.5:g;r="u8"===u?n+.5:n;a.push({min:E,max:r,size:b.length,counts:b});x=A=k=0;for(var w=0;w<b.length;w++)k+=b[w],A+=w*b[w];A/=k;for(w=0;w<b.length;w++)x+=b[w]*
(w-A)**2;b=(r-E)/b.length;e.push({min:g,max:n,avg:(A+("u8"===u?0:.5))*b+g,stddev:Math.sqrt(x/(k-1))*b})}return{statistics:e,histograms:a}}function M(h,l){if(null==l||0===l.length)return h;const p=Math.max.apply(null,l),{minCutOff:c,maxCutOff:u,outMin:y,outMax:v,histogramLut:a}=h;return c.length===l.length||c.length<=p?h:{minCutOff:l.map(e=>c[e]),maxCutOff:l.map(e=>u[e]),histogramLut:a?l.map(e=>a[e]):null,outMin:y,outMax:v}}function V(h,l){const p=new Float32Array(h);for(let c=0;c<h;c++)p[c]=1<l[c]?
2<l[c]?6.5+(l[c]-2)**2.5:6.5+100*(2-l[c])**4:1;return p}const f=[.299,.587,.114];d.computeGammaCorrection=V;d.computeGammaValues=function(h,l,p){const c=[];for(let e=0;e<l.length;e++){var u=0,y=0,v=0;"min"in l[e]?{min:u,max:y,avg:v}=l[e]:[u,y,v]=l[e];v=v??0;"u8"!==h&&(v=255*(v-u)/(y-u));p&&(v*=f[e]);u=c;y=u.push;if(0>=v||255<=v)v=1;else{var a=0;150!==v&&(a=150>=v?45*Math.cos(.01047*v):17*Math.sin(.021*v));a=Math.log((v+a)/255);0===a?v=1:(v=Math.log(v/255)/a,v=isNaN(v)?1:Math.min(9.9,Math.max(.01,
v)))}y.call(u,v)}return c};d.computeStatisticsHistograms=function(h){const {pixels:l,mask:p,pixelType:c,bandMasks:u}=h;var y=l.map((v,a)=>L(v,u?.[a]??p,c,!0));h=y.map(({statistics:v})=>v);y=y.map(({histogram:v})=>v);return{statistics:h,histograms:y}};d.createContrastBrightnessLUT=Q;d.createHistogramEqualizationLUT=J;d.createStretchLUT=function(h){const {minCutOff:l,maxCutOff:p,gamma:c,pixelType:u,rounding:y}=h,v=h.outMin||0,a=h.outMax||255;if(!["u8","u16","s8","s16"].includes(u))return null;const e=
l.length;let g,n,b=0;"s8"===u?b=-127:"s16"===u&&(b=-32767);let k=256;["u16","s16"].includes(u)&&(k=65536);var x=[],E=[];const r=a-v;for(g=0;g<e;g++)E[g]=p[g]-l[g],x[g]=0===E[g]?0:r/E[g];let A;const w=[];let q,G;if(c&&c.length>=e)for(x=V(e,c),g=0;g<e;g++){G=[];for(n=0;n<k;n++)if(0===E[g])G[n]=v;else{var B=n+b;A=(B-l[g])/E[g];q=1;1<c[g]&&(q-=(1/r)**(A*x[g]));B<p[g]&&B>l[g]?(B=q*r*A**(1/c[g])+v,G[n]="floor"===y?Math.floor(B):"round"===y?Math.round(B):B):G[n]=B>=p[g]?a:v}w[g]=G}else for(g=0;g<e;g++){G=
[];for(n=0;n<k;n++)B=n+b,B<=l[g]?G[n]=v:B>=p[g]?G[n]=a:(E=(B-l[g])*x[g]+v,G[n]="floor"===y?Math.floor(E):"round"===y?Math.round(E):E);w[g]=G}if(null!=h.contrastOffset)for(h=Q(h.contrastOffset,h.brightnessOffset),g=0;g<e;g++)for(G=w[g],n=0;n<k;n++)G[n]=h[G[n]];return{lut:w,offset:b}};d.estimateStatisticsFromHistograms=function(h){const l=[];for(let y=0;y<h.length;y++){const {min:v,max:a,size:e,counts:g}=h[y];let n=0;var p=0;for(var c=0;c<e;c++)n+=g[c],p+=c*g[c];p/=n;c=0;for(var u=0;u<e;u++)c+=g[u]*
(u-p)**2;u=(a-v)/e;l.push({min:v,max:a,avg:(p+.5)*u+v,stddev:Math.sqrt(c/(n-1))*u})}return l};d.estimateStatisticsHistograms=T;d.getStretchCutoff=function(h,l){const {pixelBlock:p,bandIds:c,returnHistogramLut:u,rasterInfo:y}=l;var v=null;l=null;var a=h.stretchType;"number"===typeof a&&(a=t.stretchTypeFunctionEnum[a]);h.dra?"minMax"===a&&p?.statistics?v=p.statistics.map(B=>[B.minValue,B.maxValue,0,0]):(l=T(p),v=null!=l?l.statistics:null,l=null!=l?l.histograms:null):(v=h.statistics?.length?h.statistics:
y.statistics,l="histograms"in h?h.histograms:void 0,l||(l=y.histograms));"percentClip"!==a&&"histogramEqualization"!==a||l?.length||(a="minMax");var e=v?.length||l?.length||y.bandCount;const g=[],n=[];let b,k,x;v&&!Array.isArray(v[0])&&(v=v.map(B=>[B.min,B.max,B.avg,B.stddev]));const [E,r]=F.getPixelValueRange(y.pixelType);if(!v?.length){v=[];for(k=0;k<e;k++)v.push([E,r,1,1]);"standardDeviation"===a&&(a="minMax")}switch(a){case "none":for(k=0;k<e;k++)g[k]=E,n[k]=r;break;case "minMax":for(k=0;k<e;k++){var A=
v[k];g[k]=A[0];n[k]=A[1]}break;case "standardDeviation":({numberOfStandardDeviations:A=2}=h);for(k=0;k<e;k++){var w=v[k];g[k]=w[2]-A*w[3];n[k]=w[2]+A*w[3];g[k]<w[0]&&(g[k]=w[0]);n[k]>w[1]&&(n[k]=w[1])}break;case "histogramEqualization":m.assertIsSome(l);for(k=0;k<e;k++)g[k]=l[k].min,n[k]=l[k].max;break;case "percentClip":m.assertIsSome(l);for(k=0;k<l.length;k++){v=l[k];w=new Uint32Array(v.size);var q=[...v.counts];20<=q.length&&(q[0]=q[1]=q[2]=q[q.length-1]=q[q.length-2]=0);A=0;e=(v.max-v.min)/v.size;
b=-.5===v.min&&1===e?.5:0;for(x=0;x<v.size;x++)A+=q[x],w[x]=A;q=(h.minPercent||0)*A/100;g[k]=v.min+b;for(x=0;x<v.size;x++)if(w[x]>q){g[k]=v.min+e*(x+b);break}q=(1-(h.maxPercent||0)/100)*A;n[k]=v.max+b;for(x=v.size-2;0<=x;x--)if(w[x]<q){n[k]=v.min+e*(x+2-b);break}n[k]<g[k]&&(v=g[k],g[k]=n[k],n[k]=v)}break;default:for(k=0;k<e;k++)A=v[k],g[k]=A[0],n[k]=A[1]}let G;"histogramEqualization"===a?(m.assertIsSome(l),a=l[0].size||256,h=0,u&&(G=l.map(B=>J(B)))):(a=h.max||255,h=h.min||0);return M({minCutOff:g,
maxCutOff:n,outMax:a,outMin:h,histogramLut:G},c)};d.stretch=function(h,l){if(!h?.pixels?.length)return h;const {mask:p,bandMasks:c,width:u,height:y,pixels:v}=h,{minCutOff:a,maxCutOff:e,gamma:g}=l;var n=l.outMin||0;const b=l.outMax||255,k=u*y,x=l.outputPixelType||"u8";h=h.pixels.map(()=>z.createEmptyBand(x,k));const E=h.length;var r=b-n,A=[],w=[];for(var q=0;q<E;q++)w[q]=e[q]-a[q],A[q]=0===w[q]?0:r/w[q];q=x.startsWith("u")||x.startsWith("s");l=!!l.isRenderer;if(g&&g.length>=E){A=V(E,g);for(var G=0;G<
E;G++){var B=c?.[G]??p;for(let C=0;C<k;C++)if(null==B||B[C]){if(0===w[G]){h[G][C]=n;continue}var K=v[G][C];const D=(K-a[G])/w[G];let N=1;1<g[G]&&(N-=(1/r)**(D*A[G]));K<e[G]&&K>a[G]?(K=N*r*D**(1/g[G])+n,h[G][C]=l?Math.floor(K):q?Math.round(K):K):h[G][C]=K>=e[G]?b:n}}}else for(r=0;r<E;r++)for(w=c?.[r]??p,G=0;G<k;G++)if(null==w||w[G])B=v[r][G],B<e[r]&&B>a[r]?(B=(B-a[r])*A[r]+n,h[r][G]=l?Math.floor(B):q?Math.round(B):B):h[r][G]=B>=e[r]?b:n;n=new z({width:u,height:y,mask:p,bandMasks:c,pixels:h,pixelType:x});
n.updateStatistics();return n};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports","../PixelBlock","./pixelUtils"],function(d,m,z){function F(L){let {altitude:T,azimuth:M}=L;const {hillshadeType:V,pixelSizePower:f=1,pixelSizeFactor:h=1,scalingType:l,isGCS:p,resolution:c}=L;var u="multi-directional"===V?2*L.zFactor:L.zFactor;const {x:y,y:v}=c;L=u/(8*y);var a=u/(8*v);p&&.001<u&&(L/=Q,a/=Q);"adjusted"===l&&(p?
(L=y*Q,a=v*Q,L=(u+L**f*h)/(8*L),a=(u+a**f*h)/(8*a)):(L=(u+y**f*h)/(8*y),a=(u+v**f*h)/(8*v)));var e=(90-T)*Math.PI/180;u=Math.cos(e);let g=(360-M+90)*Math.PI/180,n=Math.sin(e)*Math.cos(g);e=Math.sin(e)*Math.sin(g);const b=[315,270,225,360,180,0],k=[60,60,60,60,60,90];var x=new Float32Array([3,5,3,2,1,4]);const E=x.reduce((G,B)=>G+B);x=x.map(G=>G/E);const r="multi-directional"===V?b.length:1,A=new Float32Array(6),w=new Float32Array(6),q=new Float32Array(6);if("multi-directional"===V)for(let G=0;G<r;G++)T=
k[G],M=b[G],e=(90-T)*Math.PI/180,u=Math.cos(e),g=(360-M+90)*Math.PI/180,n=Math.sin(e)*Math.cos(g),e=Math.sin(e)*Math.sin(g),A[G]=u,w[G]=n,q[G]=e;else A.fill(u),w.fill(n),q.fill(e);return{resolution:c,factor:[L,a],sinZcosA:n,sinZsinA:e,cosZ:u,sinZcosAs:w,sinZsinAs:q,cosZs:A,weights:x,hillshadeType:["traditional","multi-directional"].indexOf(V)}}function t(L,T){const {width:M,height:V}=L;var f=M*V;const h=new Uint8Array(f),l=null!=L.mask;let p;if(l){p=new Uint8Array(L.mask);for(var c=0;c<p.length;c++)p[c]&&
(h[c]=1,p[c]=1)}L=L.pixels[0];c=new Float32Array(f);const u=new Float32Array(f);let y=0;if(T){({resolution:v}=T);var v=v?(v.x+v.y)/2:1;y=200*T.zFactor/(v*v);v=new Float32Array(f)}T=T?.curvatureType;let a;let e;for(f=1;f<V-1;f++){const A=f*M;for(let w=1;w<M-1;w++){const q=A+w;if(!p||0!==p[q]){if(p){if(7>p[q-M-1]+p[q-M]+p[q-M+1]+p[q-1]+p[q+1]+p[q+M-1]+p[q+M]+p[q+M+1]){h[q]=0;continue}var g=p[q-M-1]?L[q-M-1]:L[q];var n=p[q-M]?L[q-M]:L[q];var b=p[q-M+1]?L[q-M+1]:L[q];var k=p[q-1]?L[q-1]:L[q];var x=p[q+
1]?L[q+1]:L[q];a=p[q+M-1]?L[q+M-1]:L[q];var E=p[q+M]?L[q+M]:L[q];e=p[q+M+1]?L[q+M+1]:L[q]}else g=L[q-M-1],n=L[q-M],b=L[q-M+1],k=L[q-1],x=L[q+1],a=L[q+M-1],E=L[q+M],e=L[q+M+1];c[q]=b+x+x+e-(g+k+k+a);u[q]=a+E+E+e-(g+n+n+b);if(null!=v){var r=L[q];const G=.5*(k+x)-r;r=.5*(n+E)-r;"standard"===T?v[q]=-y*(G+r):(g=(-g+b+a-e)/4,k=(-k+x)/2,n=(n-E)/2,E=k*k,x=n*n,(b=E+x)&&(v[q]="profile"===T?y*(G*E+r*x+g*k*n)/b:-y*(G*x+r*E-g*k*n)/b))}}}}return{outMask:l?h:null,dzxs:c,dzys:u,curvatures:v}}function J(L,T,M){for(var V=
0;V<M;V++)L[V*T]=L[V*T+1],L[(V+1)*T-1]=L[(V+1)*T-2];for(V=1;V<T-1;V++)L[V]=L[V+T],L[V+(M-1)*T]=L[V+(M-2)*T]}const Q=1/111E3;d.aspect=function(L,T={}){if(!z.isValidPixelBlock(L))return L;var {resolution:M}=T;T=M?1/M.x:1;M=M?1/M.y:1;const {dzxs:V,dzys:f,outMask:h}=t(L),{width:l,height:p}=L,c=new Float32Array(l*p);for(let y=1;y<p-1;y++){const v=y*l;for(let a=1;a<l-1;a++){var u=v+a;if(!h||h[u]){const e=V[u]*T;u=f[u]*M;let g=-1;if(0!==e||0!==u)g=90-57.29578*Math.atan2(u,-e),0>g&&(g+=360),360===g?g=0:360<
g&&(g%=360);c[v+a]=g}}}J(c,l,p);return new m({width:l,height:p,pixels:[c],mask:h,pixelType:"f32",validPixelCount:L.validPixelCount,statistics:[{minValue:-1,maxValue:360}]})};d.calculateHillshadeParams=F;d.curvature=function(L,T){if(!z.isValidPixelBlock(L))return L;const {curvatures:M,outMask:V}=t(L,T),{width:f,height:h}=L;J(M,f,h);L=new m({width:f,height:h,pixels:[M],mask:V,pixelType:"f32",validPixelCount:L.validPixelCount});L.updateStatistics();return L};d.gcsFactor=Q;d.hillshade=function(L,T){if(!z.isValidPixelBlock(L))return L;
const {factor:M,sinZcosA:V,sinZsinA:f,cosZ:h,sinZcosAs:l,sinZsinAs:p,cosZs:c,weights:u}=F(T),[y,v]=M;T="traditional"===T.hillshadeType;const {width:a,height:e}=L,g=new Uint8Array(a*e),{dzxs:n,dzys:b,outMask:k}=t(L);for(let E=1;E<e-1;E++){const r=E*a;for(let A=1;A<a-1;A++){const w=r+A;if(!k||k[w]){var x=n[w]*y;const q=b[w]*v,G=Math.sqrt(1+x*x+q*q);let B=0;if(T)x=255*(h+f*q-V*x)/G,0>x&&(x=0),B=x;else{const K=p.length;for(let C=0;C<K;C++){let D=255*(c[C]+p[C]*q-l[C]*x)/G;0>D&&(D=0);B+=D*u[C]}}g[w]=B&
255}}}J(g,a,e);return new m({width:a,height:e,pixels:[g],mask:k,pixelType:"u8",validPixelCount:L.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};d.slope=function(L,T){if(!z.isValidPixelBlock(L))return L;var M=T.zFactor,V=T.pixelSizePower??1,f=T.pixelSizeFactor??1;const h=T.slopeType;var l=T.isGCS;const {x:p,y:c}=T.resolution;T=M/(8*p);let u=M/(8*c);l&&1E-4>Math.abs(M-1)&&(T/=Q,u/=Q);"adjusted"===h&&(T=(M+p**V*f)/(8*p),u=(M+c**V*f)/(8*c));const {dzxs:y,dzys:v,outMask:a}=t(L),{width:e,height:g}=
L;M=new Float32Array(e*g);for(V=1;V<g-1;V++)for(f=V*e,l=1;l<e-1;l++){var n=f+l;if(!a||a[n]){var b=y[n]*T;n=v[n]*u;b=Math.sqrt(b*b+n*n);M[f+l]="percent-rise"===h?100*b:57.2957795*Math.atan(b)}}J(M,e,g);L=new m({width:e,height:g,pixels:[M],mask:a,pixelType:"f32",validPixelCount:L.validPixelCount});L.updateStatistics();return L};d.tintHillshade=function(L,T,M,V){if(z.isValidPixelBlock(L)&&z.isValidPixelBlock(T)){var {min:f,max:h}=V;V=L.pixels[0];var {pixels:l,mask:p}=T;T=l[0];var c=255.00001/(h-f),u=
new Uint8ClampedArray(T.length),y=new Uint8ClampedArray(T.length),v=new Uint8ClampedArray(T.length),a=M.length-1;for(let n=0;n<T.length;n++){if(p&&0===p[n])continue;var e=Math.floor((T[n]-f)*c);const [b,k]=M[0>e?0:e>a?a:e];var g=V[n];e=g*k;const x=e*(1-Math.abs(b%2-1));g-=e;switch(Math.floor(b)){case 0:u[n]=e+g;y[n]=x+g;v[n]=g;break;case 1:u[n]=x+g;y[n]=e+g;v[n]=g;break;case 2:u[n]=g;y[n]=e+g;v[n]=x+g;break;case 3:u[n]=g;y[n]=x+g;v[n]=e+g;break;case 4:u[n]=x+g;y[n]=g;v[n]=e+g;break;case 5:case 6:u[n]=
e+g,y[n]=g,v[n]=x+g}}L.pixels=[u,y,v];L.updateStatistics()}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService":function(){define("exports ../geometry ../request ../geometry/support/normalizeUtils ../geometry/support/spatialReferenceUtils ./utils ./support/FindImagesResult ./support/ImageAngleResult ./support/ImageAreaResult ./support/ImageBoundaryResult ./support/ImageDistanceResult ./support/ImageGPSInfoResult ./support/ImageHeightResult ./support/ImageIdentifyResult ./support/ImagePixelLocationResult ./support/ImagePointResult ./support/ImageSampleResult ./support/ImageUrlResult ./support/MeasureAreaFromImageResult ./support/MeasureLengthFromImageResult ../geometry/SpatialReference ../geometry/support/jsonUtils".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l,p,c,u,y,v,a,e,g){function n(w){const q=w?.time;if(q&&(null!=q.start||null!=q.end)){const G=[];null!=q.start&&G.push(q.start);null==q.end||G.includes(q.end)||G.push(q.end);w.time=G.join(",")}}async function b(w,q,G){w=J.parseUrl(w);var B=await F.normalizeCentralMeridian(q.geometry?[q.geometry]:[]);q=q.toJSON();n(q);B=B?.[0];null!=B&&(q.geometry=E(B));w=J.encode({...w.query,f:"json",...q});return J.asValidOptions(w,G)}async function k(w,q,G,B){w=J.parseUrl(w);G=
await F.normalizeCentralMeridian(G);q=q.toJSON();null!=G[0]&&(q.fromGeometry=JSON.stringify(E(G[0])));null!=G[1]&&(q.toGeometry=JSON.stringify(E(G[1])));q=J.encode({...w.query,f:"json",...q});B=J.asValidOptions(q,B);({data:B}=await z(w.path+"/measure",B));return B}async function x(w,q,G){w=J.parseUrl(w);q=q.toJSON();q=J.encode({...w.query,f:"json",...q});G=J.asValidOptions(q,G);({data:G}=await z(w.path+"/measureFromImage",G));return G}function E(w){const q=w.toJSON();w.spatialReference?.imageCoordinateSystem&&
(q.spatialReference=r(w.spatialReference));return q}function r(w){const {imageCoordinateSystem:q}=w;if(q){const {id:G,referenceServiceName:B}=q;return null!=G?B?{icsid:G,icsns:B}:{icsid:G}:{ics:q}}return w.toJSON()}function A(w,q){if(!w.imageCoordinateSystem)return t.srToRESTValue(w);w=r(w);const {icsid:G,icsns:B}=w;return null==G||null!=B&&!q?.toLowerCase().includes("/"+B.toLowerCase()+"/")?JSON.stringify(w):`0:${G}`}d.computeAngles=async function(w,q,G){var B=q.toJSON();null!=B.angleName&&(B.angleName=
B.angleName.join(","));q?.point?.spatialReference?.imageCoordinateSystem&&(B.point.spatialReference=r(q.point.spatialReference));q?.spatialReference?.imageCoordinateSystem&&(B.spatialReference=A(q.spatialReference));w=J.parseUrl(w);B=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/computeAngles`,G));G.spatialReference=G.spatialReference?null!=G.spatialReference.geodataXform?new e({wkid:0,imageCoordinateSystem:G.spatialReference}):e.fromJSON(G.spatialReference):
null;"NaN"===G.north&&(G.north=null);"NaN"===G.up&&(G.up=null);return new L(G)};d.computeHistograms=async function(w,q,G){q=await b(w,q,G);w=J.parseUrl(w);({data:w}=await z(`${w.path}/computeHistograms`,q));return{histograms:w.histograms}};d.computePixelSpaceLocations=async function(w,q,G){var B=q.toJSON();({geometries:q}=q);if(q)for(let K=0;K<q.length;K++)q[K].spatialReference?.imageCoordinateSystem&&(B.geometries.geometries[K].spatialReference=r(q[K].spatialReference));w=J.parseUrl(w);B=J.encode({...w.query,
f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/computePixelLocation`,G));return p.fromJSON(G)};d.computeStatisticsHistograms=async function(w,q,G){q=await b(w,q,G);w=J.parseUrl(w);({data:w}=await z(`${w.path}/computeStatisticsHistograms`,q));({statistics:q}=w);q?.length&&q.forEach(B=>{B.avg=B.mean;B.stddev=B.standardDeviation});return{statistics:q,histograms:w.histograms}};d.findImages=async function(w,q,G){var B=q.toJSON();const K=await F.normalizeCentralMeridian([q.fromGeometry,
q.toGeometry]);null!=K[0]&&(B.fromGeometry=E(K[0]),K[0].spatialReference&&(B.inSR=A(K[0].spatialReference)));null!=K[1]&&(B.toGeometry=E(K[1]));q.objectIds?.length&&(B.objectIds=B.objectIds.join(","));w=J.parseUrl(w);B=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/find`,G));return Q.fromJSON(G)};d.getImageSpatialReferenceJSON=r;d.getImageSpatialReferenceQueryParameter=A;d.getImageUrl=async function(w,q,G){q=q.toJSON();w=J.parseUrl(w);q=J.encode({...w.query,
f:"json",...q});G=J.asValidOptions(q,G);({data:G}=await z(`${w.path}/getImageUrl`,G));return y.fromJSON(G)};d.getSamples=async function(w,q,G){var B=q.toJSON();n(B);B.outFields?.length&&(B.outFields=B.outFields.join(","));q=(await F.normalizeCentralMeridian(q.geometry))?.[0];null!=q&&(B.geometry=E(q));w=J.parseUrl(w);B=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/getSamples`,G));G=G?.samples?.map(K=>{const C="NaN"===K.value||""===K.value?null:K.value.split(" ").map(D=>
Number(D));return{...K,pixelValue:C}});return u.fromJSON({samples:G})};d.identify=async function(w,q,G){const B=J.parseUrl(w);return F.normalizeCentralMeridian(q.geometry?[q.geometry]:[]).then(K=>{var C=q.toJSON();K=K?.[0];null!=K&&(C.geometry=JSON.stringify(E(K)));C=J.encode({...B.query,f:"json",...C});C=J.asValidOptions(C,G);return z(B.path+"/identify",C)}).then(K=>l.fromJSON(K.data))};d.imageToMap=async function(w,q,G){var B=q.toJSON();q.geometry.spatialReference.imageCoordinateSystem&&(B.geometry=
E(q.geometry));q.depthOffset&&q.adjust||delete B.options;w=J.parseUrl(w);B=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/imageToMap`,G));return g.fromJSON(G)};d.imageToMapMultiray=async function(w,q,G){var B=q.toJSON();q.rasterIds?.length&&(B.rasterIds=q.rasterIds.join(","));w=J.parseUrl(w);B=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/imageToMapMultiray`,G));return g.fromJSON(G)};d.mapToImage=async function(w,
q,G){var B=q.toJSON();const K=(await F.normalizeCentralMeridian(q.geometry))?.[0];null!=K&&(B.geometry=E(K));q.visibleOnly||delete B.options;if(q=K?.spatialReference??q.geometry?.spatialReference)B.inSR=A(q);w=J.parseUrl(w);B=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/mapToImage`,G));return g.fromJSON(G)};d.measureAreaAndPerimeter=async function(w,q,G){w=await k(w,q,[q.geometry],G);return T.fromJSON(w)};d.measureAreaFromImage=async function(w,q,G){w=
await x(w,q,G);return v.fromJSON(w)};d.measureDistanceAndAngle=async function(w,q,G){w=await k(w,q,[q.fromGeometry,q.toGeometry],G);return V.fromJSON(w)};d.measureHeight=async function(w,q,G){w=await k(w,q,[q.fromGeometry,q.toGeometry],G);return h.fromJSON(w)};d.measureLengthFromImage=async function(w,q,G){w=await x(w,q,G);return a.fromJSON(w)};d.measurePointOrCentroid=async function(w,q,G){w=await k(w,q,[q.geometry],G);return c.fromJSON(w)};d.queryBoundary=async function(w,q,G){w=J.parseUrl(w);const B=
q.toJSON();q.outSpatialReference&&(B.outSR=A(q.outSpatialReference));q=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(q,G);({data:G}=await z(w.path+"/queryBoundary",G));return M.fromJSON(G)};d.queryGPSInfo=async function(w,q,G){var B=q.toJSON();n(B);B.objectIds?.length&&(B.objectIds=B.objectIds.join(","));B.geometry||B.objectIds||B.time||B.where||(B.where="1\x3d1");const K=(await F.normalizeCentralMeridian(q.geometry))?.[0];null!=K&&(B.geometry=E(K));if(q=K?.spatialReference??q.geometry?.spatialReference)B.inSR=
A(q);w=J.parseUrl(w);B=J.encode({...w.query,f:"json",...B});G=J.asValidOptions(B,G);({data:G}=await z(`${w.path}/queryGPSInfo`,G));return f.fromJSON(G)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FindImagesResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ImageInspectionInfo".split(" "),
function(d,m,z,F,t,J,Q,L){m=class extends m.JSONSupport{constructor(){super(...arguments);this.images=null}};d.__decorate([z.property({type:[L],json:{write:!0}})],m.prototype,"images",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.FindImagesResult")],m)})},"esri/rest/support/ImageInspectionInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ./CameraInfoMixin".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){m=class extends M.CameraInfoMixin(m.JSONSupport){constructor(){super(...arguments);this.orientation=this.perspectiveCenter=this.center=this.cameraID=this.acquisitionDate=this.referenceUri=this.id=null}writeAcquisitionDate(V,f){f.acquisitionDate=V?.getTime()}};d.__decorate([z.property({json:{write:!0}})],m.prototype,"id",void 0);d.__decorate([z.property({json:{name:"uri",write:!0}})],m.prototype,"referenceUri",void 0);d.__decorate([z.property({type:Date,json:{write:!0}})],
m.prototype,"acquisitionDate",void 0);d.__decorate([L.writer("acquisitionDate")],m.prototype,"writeAcquisitionDate",null);d.__decorate([z.property({json:{write:!0}})],m.prototype,"cameraID",void 0);d.__decorate([z.property({type:T,json:{write:!0}})],m.prototype,"center",void 0);d.__decorate([z.property({type:T,json:{write:!0}})],m.prototype,"perspectiveCenter",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"orientation",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImageInspectionInfo")],
m)})},"esri/rest/support/CameraInfoMixin":function(){define("exports ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(d,m,z,F,t,J,Q){d.CameraInfoMixin=L=>{L=class extends L{constructor(){super(...arguments);this.cols=this.rows=this.pixelSize=this.focalLength=this.model=this.make=null}};m.__decorate([z.property({json:{write:!0}})],L.prototype,"make",void 0);
m.__decorate([z.property({json:{write:!0}})],L.prototype,"model",void 0);m.__decorate([z.property({json:{write:!0}})],L.prototype,"focalLength",void 0);m.__decorate([z.property({json:{write:!0}})],L.prototype,"pixelSize",void 0);m.__decorate([z.property({json:{write:!0}})],L.prototype,"rows",void 0);m.__decorate([z.property({json:{write:!0}})],L.prototype,"cols",void 0);return L=m.__decorate([Q.subclass("esri.rest.support.CameraInfoMixin")],L)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/support/ImageAngleResult":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),function(d,m,z,F,t,J,Q,L,T){m=class extends z.JSONSupport{constructor(M){super(M);this.spatialReference=this.up=this.north=null}};d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,
"north",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"up",void 0);d.__decorate([F.property({type:T,json:{write:!0}})],m.prototype,"spatialReference",void 0);return m=d.__decorate([L.subclass("esri.rest.support.ImageAngleResult")],m)})},"esri/rest/support/ImageAreaResult":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(d,m,z,F,t,J,Q){z=class extends Q.BaseImageMeasureResult{constructor(){super(...arguments);this.perimeter=this.area=null}};d.__decorate([m.property({type:Q.ImageMeasureResultAreaValue,json:{read:!0,write:!0}})],z.prototype,"area",void 0);d.__decorate([m.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],z.prototype,"perimeter",void 0);return z=d.__decorate([J.subclass("esri.rest.support.ImageAreaResult")],z)})},"esri/rest/support/BaseImageMeasureResult":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,z,F,t,J,Q,L,T){J=class extends z.JSONSupport{constructor(){super(...arguments);this.uncertainty=this.displayValue=this.value=null}};m.__decorate([t.property({type:Number,json:{read:!0,write:!0}})],J.prototype,"value",void 0);m.__decorate([t.property({type:String,json:{read:!0,write:!0}})],J.prototype,"displayValue",void 0);m.__decorate([t.property({type:Number,json:{read:!0,write:!0}})],J.prototype,"uncertainty",void 0);J=m.__decorate([T.subclass("esri.rest.support.ImageMeasureResultValue")],
J);d.ImageMeasureResultLengthValue=class extends J{constructor(){super(...arguments);this.unit=null}};m.__decorate([t.property({type:String,json:{read:F.lengthUnitsJSONMap.read,write:F.lengthUnitsJSONMap.write}})],d.ImageMeasureResultLengthValue.prototype,"unit",void 0);d.ImageMeasureResultLengthValue=m.__decorate([T.subclass("esri.rest.support.ImageMeasureResultLengthValue")],d.ImageMeasureResultLengthValue);d.ImageMeasureResultAreaValue=class extends J{constructor(){super(...arguments);this.unit=
null}};m.__decorate([t.property({type:String,json:{read:F.areaUnitsJSONMap.read,write:F.areaUnitsJSONMap.write}})],d.ImageMeasureResultAreaValue.prototype,"unit",void 0);d.ImageMeasureResultAreaValue=m.__decorate([T.subclass("esri.rest.support.ImageMeasureResultAreaValue")],d.ImageMeasureResultAreaValue);d.ImageMeasureResultAngleValue=class extends J{constructor(){super(...arguments);this.unit=null}};m.__decorate([t.property({type:String,json:{read:F.angleUnitsJSONMap.read,write:F.angleUnitsJSONMap.write}})],
d.ImageMeasureResultAngleValue.prototype,"unit",void 0);d.ImageMeasureResultAngleValue=m.__decorate([T.subclass("esri.rest.support.ImageMeasureResultAngleValue")],d.ImageMeasureResultAngleValue);d.BaseImageMeasureResult=class extends z.JSONSupport{constructor(){super(...arguments);this.sensorName=this.name=null}};m.__decorate([t.property({type:String,json:{read:!0,write:!0}})],d.BaseImageMeasureResult.prototype,"name",void 0);m.__decorate([t.property({type:String,json:{read:!0,write:!0}})],d.BaseImageMeasureResult.prototype,
"sensorName",void 0);d.BaseImageMeasureResult=m.__decorate([T.subclass("esri.rest.support.BaseImageMeasureResult")],d.BaseImageMeasureResult);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageBoundaryResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){m=class extends m.JSONSupport{constructor(){super(...arguments);this.geometry=this.area=null}readGeometry(V,f){return null==V?null:V.rings?M.fromJSON(V):T.fromJSON(V)}};d.__decorate([z.property({type:Number,json:{write:!0}})],m.prototype,"area",void 0);d.__decorate([z.property({json:{name:"shape",write:!0}})],m.prototype,"geometry",void 0);d.__decorate([Q.reader("geometry")],m.prototype,"readGeometry",null);return m=d.__decorate([L.subclass("esri.rest.support.ImageBoundaryResult")],
m)})},"esri/rest/support/ImageDistanceResult":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),function(d,m,z,F,t,J,Q){z=class extends Q.BaseImageMeasureResult{constructor(){super(...arguments);this.elevationAngle=this.azimuthAngle=this.distance=null}};d.__decorate([m.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,
write:!0}})],z.prototype,"distance",void 0);d.__decorate([m.property({type:Q.ImageMeasureResultAngleValue,json:{read:!0,write:!0}})],z.prototype,"azimuthAngle",void 0);d.__decorate([m.property({type:Q.ImageMeasureResultAngleValue,json:{read:!0,write:!0}})],z.prototype,"elevationAngle",void 0);return z=d.__decorate([J.subclass("esri.rest.support.ImageDistanceResult")],z)})},"esri/rest/support/ImageGPSInfoResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./CameraInfo ./ImageGPSInfo".split(" "),
function(d,m,z,F,t,J,Q,L,T){m=class extends m.JSONSupport{constructor(){super(...arguments);this.cameras=this.images=null}};d.__decorate([z.property({type:[T],json:{write:!0}})],m.prototype,"images",void 0);d.__decorate([z.property({type:[L],json:{write:!0}})],m.prototype,"cameras",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImageGPSInfoResult")],m)})},"esri/rest/support/CameraInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./CameraInfoMixin".split(" "),
function(d,m,z,F,t,J,Q,L){m=class extends L.CameraInfoMixin(m.JSONSupport){constructor(){super(...arguments);this.id=null}};d.__decorate([z.property({json:{write:!0}})],m.prototype,"id",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.CameraInfo")],m)})},"esri/rest/support/ImageGPSInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T){m=class extends m.JSONSupport{constructor(){super(...arguments);this.orientation=this.gps=this.center=this.cameraID=this.acquisitionDate=this.name=this.id=null}writeAcquisitionDate(M,V){V.acquisitionDate=M?.getTime()}};d.__decorate([z.property({json:{write:!0}})],m.prototype,"id",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"name",void 0);d.__decorate([z.property({type:Date,json:{write:!0}})],m.prototype,"acquisitionDate",void 0);d.__decorate([L.writer("acquisitionDate")],
m.prototype,"writeAcquisitionDate",null);d.__decorate([z.property({json:{write:!0}})],m.prototype,"cameraID",void 0);d.__decorate([z.property({type:T,json:{write:!0}})],m.prototype,"center",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"gps",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"orientation",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImageGPSInfo")],m)})},"esri/rest/support/ImageHeightResult":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult".split(" "),
function(d,m,z,F,t,J,Q){z=class extends Q.BaseImageMeasureResult{constructor(){super(...arguments);this.height=null}};d.__decorate([m.property({type:Q.ImageMeasureResultLengthValue,json:{read:!0,write:!0}})],z.prototype,"height",void 0);return z=d.__decorate([J.subclass("esri.rest.support.ImageHeightResult")],z)})},"esri/rest/support/ImageIdentifyResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Point ./FeatureSet".split(" "),
function(d,m,z,F,t,J,Q,L,T){m=class extends m.JSONSupport{constructor(){super(...arguments);this.value=this.properties=this.processedValues=this.objectId=this.name=this.location=this.catalogItems=this.catalogItemVisibilities=null}};d.__decorate([z.property({json:{write:!0}})],m.prototype,"catalogItemVisibilities",void 0);d.__decorate([z.property({type:T,json:{write:!0}})],m.prototype,"catalogItems",void 0);d.__decorate([z.property({type:L,json:{write:!0}})],m.prototype,"location",void 0);d.__decorate([z.property({json:{write:!0}})],
m.prototype,"name",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"objectId",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"processedValues",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"properties",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"value",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImageIdentifyResult")],m)})},"esri/rest/support/ImagePixelLocationResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,z,F,t,J,Q){m=class extends m.JSONSupport{constructor(){super(...arguments);this.geometries=null}};d.__decorate([z.property({json:{write:!0}})],m.prototype,"geometries",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImagePixelLocationResult")],m)})},"esri/rest/support/ImagePointResult":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./BaseImageMeasureResult ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T){m=class extends L.BaseImageMeasureResult{constructor(){super(...arguments);this.point=null}};d.__decorate([z.property({type:T,json:{name:"point.value",read:!0,write:!0}})],m.prototype,"point",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImagePointResult")],m)})},"esri/rest/support/ImageSampleResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ImageSample".split(" "),
function(d,m,z,F,t,J,Q,L){m=class extends m.JSONSupport{constructor(){super(...arguments);this.samples=null}};d.__decorate([z.property({type:[L],json:{write:!0}})],m.prototype,"samples",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImageSampleResult")],m)})},"esri/rest/support/ImageSample":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L){m=class extends m.JSONSupport{constructor(){super(...arguments);this.pixelValue=this.resolution=this.rasterId=this.locationId=this.location=this.attributes=null}};d.__decorate([z.property({json:{write:!0}})],m.prototype,"attributes",void 0);d.__decorate([z.property({type:L,json:{write:!0}})],m.prototype,"location",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"locationId",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"rasterId",void 0);
d.__decorate([z.property({json:{write:!0}})],m.prototype,"resolution",void 0);d.__decorate([z.property({json:{write:!0}})],m.prototype,"pixelValue",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImageSample")],m)})},"esri/rest/support/ImageUrlResult":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(d,
m,z,F,t,J,Q){m=class extends m.JSONSupport{constructor(){super(...arguments);this.url=null}};d.__decorate([z.property({json:{name:"imageURL",write:!0}})],m.prototype,"url",void 0);return m=d.__decorate([Q.subclass("esri.rest.support.ImageUrlResult")],m)})},"esri/rest/support/MeasureAreaFromImageResult":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V){z=class extends z.JSONSupport{constructor(){super(...arguments);this.center=this.area=this.length=this.geometry=null}readCenter(f,h){f.spatialReference||(f={...f,spatialReference:h.Shape.spatialReference});return V.fromJSON(f)}};d.__decorate([F.property({types:m.geometryTypes,json:{name:"Shape",read:M.fromJSON,write:!0}})],z.prototype,"geometry",void 0);d.__decorate([F.property({json:{name:"Length",write:!0}})],z.prototype,"length",void 0);d.__decorate([F.property({json:{name:"Area",
write:!0}})],z.prototype,"area",void 0);d.__decorate([F.property({json:{name:"Center",write:!0}})],z.prototype,"center",void 0);d.__decorate([L.reader("center")],z.prototype,"readCenter",null);return z=d.__decorate([T.subclass("esri.rest.support.MeasureAreaFromImageResult")],z)})},"esri/rest/support/MeasureLengthFromImageResult":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils".split(" "),
function(d,m,z,F,t,J,Q,L,T){z=class extends z.JSONSupport{constructor(){super(...arguments);this.length=this.geometry=null}};d.__decorate([F.property({types:m.geometryTypes,json:{name:"Shape",read:T.fromJSON,write:!0}})],z.prototype,"geometry",void 0);d.__decorate([F.property({json:{name:"Length",write:!0}})],z.prototype,"length",void 0);return z=d.__decorate([L.subclass("esri.rest.support.MeasureLengthFromImageResult")],z)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/RandomLCG ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),
function(d,m,z,F,t,J,Q,L){var T;const M={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};m=T=class extends m.JSONSupport{constructor(V){super(V);this.url=this.size=this.parentObjectId=this.parentGlobalId=this.name=this.keywords=this.globalId=this.id=this.exifInfo=this.contentType=null}get orientationInfo(){var {exifInfo:V}=
this;V=L.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:V});return M[V]||null}clone(){return new T({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};d.__decorate([z.property({type:String})],m.prototype,"contentType",void 0);d.__decorate([z.property()],m.prototype,"exifInfo",void 0);d.__decorate([z.property({readOnly:!0})],
m.prototype,"orientationInfo",null);d.__decorate([z.property({type:F.Integer})],m.prototype,"id",void 0);d.__decorate([z.property({type:String})],m.prototype,"globalId",void 0);d.__decorate([z.property({type:String})],m.prototype,"keywords",void 0);d.__decorate([z.property({type:String})],m.prototype,"name",void 0);d.__decorate([z.property({json:{read:!1}})],m.prototype,"parentGlobalId",void 0);d.__decorate([z.property({json:{read:!1}})],m.prototype,"parentObjectId",void 0);d.__decorate([z.property({type:F.Integer})],
m.prototype,"size",void 0);d.__decorate([z.property({json:{read:!1}})],m.prototype,"url",void 0);return m=T=d.__decorate([Q.subclass("esri.layers.support.AttachmentInfo")],m)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(d){function m(z){const {tagName:F,tags:t}=z;return t&&F?t.find(J=>J.name===F)?.value||null:null}d.getExifValue=function(z){const {exifInfo:F,exifName:t,tagName:J}=z;return F&&t&&J?(z=F.find(Q=>Q.name===t))?m({tagName:J,tags:z.tags}):null:null};Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/fetchRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../geometry/SpatialReference ../../layers/support/RasterInfo ../utils ../support/FeatureSet".split(" "),function(d,m,z,F,t,J,Q,L){async function T(M,V,f){M=Q.parseUrl(M);const {rasterFunction:h,sourceJSON:l}=V||{};V=h?JSON.stringify(h.rasterFunctionDefinition||h):null;V=Q.encode({...M.query,renderingRule:V,f:"json"});V=Q.asValidOptions(V,
f);M=M.path;f=l||await m(M,V).then(k=>k.data);var p=f.hasRasterAttributeTable?m(`${M}/rasterAttributeTable`,V):null,c=f.hasColormap?m(`${M}/colormap`,V):null,u=f.hasHistograms?m(`${M}/histograms`,V):null,y=10.3<=f.currentVersion?m(`${M}/keyProperties`,V):null;M=f.hasMultidimensions?m(`${M}/multidimensionalInfo`,V):null;p=await Promise.allSettled([p,c,u,y,M]);M=null;if(f.minValues&&f.minValues.length===f.bandCount)for(M=[],V=0;V<f.minValues.length;V++)M.push({min:f.minValues[V],max:f.maxValues[V],
avg:f.meanValues[V],stddev:f.stdvValues[V]});c=z.fromJSON(f.extent);V=Math.ceil(c.width/f.pixelSizeX-.1);c=Math.ceil(c.height/f.pixelSizeY-.1);u=t.fromJSON(f.spatialReference||f.extent.spatialReference);y="fulfilled"===p[0].status?p[0].value?.data:null;y=y?.features?.length?L.fromJSON(y):null;var v="fulfilled"===p[1].status?p[1].value?.data.colormap:null;v=v?.length?v:null;var a="fulfilled"===p[2].status?p[2].value?.data.histograms:null;a=a?.[0]?.counts?.length?a:null;const e="fulfilled"===p[3].status?
p[3].value?.data??{}:{};p="fulfilled"===p[4].status?p[4].value?.data.multidimensionalInfo:null;(p=p?.variables?.length?p:null)&&p.variables.forEach(k=>{k.statistics?.length&&k.statistics.forEach(x=>{x.avg=x.mean;x.stddev=x.standardDeviation})});const {defaultVariable:g,serviceDataType:n}=f;g&&g!==e.DefaultVariable&&(e.DefaultVariable=g);n?.includes("esriImageServiceDataTypeVector")&&!n.includes(e.DataType)&&(e.DataType=n.replace("esriImageServiceDataType",""));let b=f.noDataValue;f.noDataValues?.length&&
f.noDataValues.some(k=>k!==b)&&(b=f.noDataValues);return new J({width:V,height:c,bandCount:f.bandCount,extent:z.fromJSON(f.extent),spatialReference:u,pixelSize:new F({x:f.pixelSizeX,y:f.pixelSizeY,spatialReference:u}),pixelType:f.pixelType.toLowerCase(),statistics:M,attributeTable:y,colormap:v,histograms:a,keyProperties:e,noDataValue:b,multidimensionalInfo:p})}d.fetchServiceRasterInfo=function(M,V,f){return T(M,{sourceJSON:V},f)};d.generateRasterInfo=function(M,V,f){return T(M,{rasterFunction:V},
f)};d.patchServiceInfo=function(M,V){M.attributeTable||(V.hasRasterAttributeTable=!1);M.histograms||(V.hasHistograms=!1);M.colormap||(V.hasColormap=!1);M.multidimensionalInfo||(V.hasMultidimensions=!1)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/imageService/getCatalogItemRasterInfo":function(){define("exports ../../request ../../geometry/Extent ../../geometry/Point ../../layers/support/RasterInfo ../../layers/support/RasterStorageInfo ../utils".split(" "),function(d,
m,z,F,t,J,Q){d.getCatalogItemRasterInfo=async function(L,T,M){L=Q.parseUrl(L);var V=Q.encode({...L?.query,f:"json"});M=Q.asValidOptions(V,M);L=`${L?.path}/${T}/info`;T=m(`${L}`,M);M=m(`${L}/keyProperties`,M);M=await Promise.allSettled([T,M]);T="fulfilled"===M[0].status?M[0].value.data:null;M="fulfilled"===M[1].status?M[1].value.data:null;L=null;T.statistics?.length&&(L=T.statistics.map(y=>({min:y[0],max:y[1],avg:y[2],stddev:y[3]})));V=z.fromJSON(T.extent);const f=Math.ceil(V.width/T.pixelSizeX-.1),
h=Math.ceil(V.height/T.pixelSizeY-.1),l=V.spatialReference,p=new F({x:T.pixelSizeX,y:T.pixelSizeY,spatialReference:l}),c=T.histograms?.length?T.histograms:null,u=new J({origin:T.origin,blockWidth:T.blockWidth,blockHeight:T.blockHeight,firstPyramidLevel:T.firstPyramidLevel,maximumPyramidLevel:T.maxPyramidLevel});return new t({width:f,height:h,bandCount:T.bandCount,extent:V,spatialReference:l,pixelSize:p,pixelType:T.pixelType.toLowerCase(),statistics:L,histograms:c,keyProperties:M,storageInfo:u})};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FindImagesParameters":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Point".split(" "),function(d,m,z,F,t,J,Q,L,T){m=class extends m.ClonableMixin(z.JSONSupport){constructor(){super(...arguments);this.maxCount=this.where=
this.objectIds=this.toGeometry=this.fromGeometry=null}};d.__decorate([F.property({type:T,json:{read:!0}})],m.prototype,"fromGeometry",void 0);d.__decorate([F.property({type:T,json:{read:!0,write:!0}})],m.prototype,"toGeometry",void 0);d.__decorate([F.property({json:{write:!0}})],m.prototype,"objectIds",void 0);d.__decorate([F.property({type:String,json:{write:!0}})],m.prototype,"where",void 0);d.__decorate([F.property({type:Number,json:{write:!0}})],m.prototype,"maxCount",void 0);return m=d.__decorate([L.subclass("esri.rest.support.FindImagesParameters")],
m)})},"esri/rest/support/ImageAngleParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../geometry/SpatialReference".split(" "),function(d,m,z,F,t,J,Q,L,T){var M;m=M=class extends z.JSONSupport{constructor(V){super(V);this.rasterId=this.spatialReference=this.point=this.angleNames=null}clone(){return new M(F.clone({angleNames:this.angleNames,
point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};d.__decorate([t.property({type:[String],json:{name:"angleName",write:!0}})],m.prototype,"angleNames",void 0);d.__decorate([t.property({type:L,json:{write:!0}})],m.prototype,"point",void 0);d.__decorate([t.property({type:T,json:{write:!0}})],m.prototype,"spatialReference",void 0);d.__decorate([t.property({type:J.Integer,json:{write:!0}})],m.prototype,"rasterId",void 0);return m=M=d.__decorate([Q.subclass("esri.rest.support.ImageAngleParameters")],
m)})},"esri/rest/support/ImageAreaParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),function(d,m,z,F,t,J,Q,L,T,M,V){var f;J=f=class extends V.BaseImageMeasureParameters{constructor(){super(...arguments);
this.type="area-perimeter";this.geometry=null;this.is3D=!1;this.linearUnit="meters";this.areaUnit="square-meters"}writeGeometry(h,l,p){null!=h&&(l.geometryType=M.getJsonType(h),l[p]=h.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new f(z.clone({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};d.__decorate([t.property({types:m.geometryTypes,
json:{name:"fromGeometry",read:!0,write:!0}})],J.prototype,"geometry",void 0);d.__decorate([T.writer("geometry")],J.prototype,"writeGeometry",null);d.__decorate([t.property({type:V.measureOperationJSONMap.apiValues,json:{write:V.measureOperationJSONMap.write}})],J.prototype,"measureOperation",null);d.__decorate([t.property({json:{read:!0}})],J.prototype,"is3D",void 0);d.__decorate([t.property({type:String,json:{read:F.lengthUnitsJSONMap.read,write:F.lengthUnitsJSONMap.write}})],J.prototype,"linearUnit",
void 0);d.__decorate([t.property({type:String,json:{read:F.areaUnitsJSONMap.read,write:F.areaUnitsJSONMap.write}})],J.prototype,"areaUnit",void 0);return J=f=d.__decorate([L.subclass("esri.rest.support.ImageAreaParameters")],J)})},"esri/rest/support/BaseImageMeasureParameters":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/MosaicRule ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){z=new F.JSONMap({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",
esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});d.BaseImageMeasureParameters=class extends t.JSONSupport{constructor(){super(...arguments);this.pixelSize=this.mosaicRule=this.measureOperation=this.type=null;this.raster=void 0}};m.__decorate([J.property()],d.BaseImageMeasureParameters.prototype,"type",void 0);m.__decorate([J.property({type:z.apiValues,json:{read:z.read,write:z.write}})],d.BaseImageMeasureParameters.prototype,"measureOperation",void 0);m.__decorate([J.property({type:V,json:{write:!0}})],
d.BaseImageMeasureParameters.prototype,"mosaicRule",void 0);m.__decorate([J.property({type:f,json:{write:!0}})],d.BaseImageMeasureParameters.prototype,"pixelSize",void 0);m.__decorate([J.property({json:{write:!0}})],d.BaseImageMeasureParameters.prototype,"raster",void 0);d.BaseImageMeasureParameters=m.__decorate([M.subclass("esri.rest.support.BaseImageMeasureParameters")],d.BaseImageMeasureParameters);d.measureOperationJSONMap=z;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ImageBoundaryParameters":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference".split(" "),
function(d,m,z,F,t,J,Q,L,T){m=class extends m.ClonableMixin(z.JSONSupport){constructor(){super(...arguments);this.outSpatialReference=null}};d.__decorate([F.property({type:T,json:{name:"outSR",write:!0}})],m.prototype,"outSpatialReference",void 0);return m=d.__decorate([L.subclass("esri.rest.support.ImageBoundaryParameters")],m)})},"esri/rest/support/ImageDistanceParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){var h;m=h=class extends V.BaseImageMeasureParameters{constructor(){super(...arguments);this.type="distance-angle";this.toGeometry=this.fromGeometry=null;this.is3D=!1;this.linearUnit="meters";this.angularUnit="degrees"}writeFromGeometry(l,p,c){null!=l&&(p.geometryType=M.getJsonType(l),p[c]=l.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new h(z.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,
is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};d.__decorate([t.property({type:f,json:{read:!0,write:!0}})],m.prototype,"fromGeometry",void 0);d.__decorate([T.writer("fromGeometry")],m.prototype,"writeFromGeometry",null);d.__decorate([t.property({type:f,json:{read:!0,write:!0}})],m.prototype,"toGeometry",void 0);d.__decorate([t.property({type:V.measureOperationJSONMap.apiValues,json:{write:V.measureOperationJSONMap.write}})],
m.prototype,"measureOperation",null);d.__decorate([t.property({json:{read:!0}})],m.prototype,"is3D",void 0);d.__decorate([t.property({type:String,json:{read:F.lengthUnitsJSONMap.read,write:F.lengthUnitsJSONMap.write}})],m.prototype,"linearUnit",void 0);d.__decorate([t.property({type:String,json:{read:F.angleUnitsJSONMap.read,write:F.angleUnitsJSONMap.write}})],m.prototype,"angularUnit",void 0);return m=h=d.__decorate([L.subclass("esri.rest.support.ImageDistanceParameters")],m)})},"esri/rest/support/ImageGPSInfoParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./spatialRelationships".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l){F=class extends F.ClonableMixin(t.JSONSupport){constructor(){super(...arguments);this.objectIds=this.geometry=null;this.spatialRelationship="intersects";this.where=this.timeExtent=null}writeGeometry(p,c,u){null!=p&&(c.geometryType=h.getJsonType(p),c[u]=JSON.stringify(p.toJSON()))}};d.__decorate([J.property({types:m.geometryTypes,json:{read:h.fromJSON,write:!0}})],F.prototype,"geometry",void 0);d.__decorate([f.writer("geometry")],F.prototype,"writeGeometry",null);
d.__decorate([J.property({json:{write:!0}})],F.prototype,"objectIds",void 0);d.__decorate([M.enumeration(l.spatialRelKebabDict,{ignoreUnknown:!1,name:"spatialRel"})],F.prototype,"spatialRelationship",void 0);d.__decorate([J.property({type:z,json:{name:"time",write:!0}})],F.prototype,"timeExtent",void 0);d.__decorate([J.property({type:String,json:{write:!0}})],F.prototype,"where",void 0);return F=d.__decorate([V.subclass("esri.rest.support.ImageGPSInfoParameters")],F)})},"esri/rest/support/ImageHeightParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){var h;m=h=class extends V.BaseImageMeasureParameters{constructor(){super(...arguments);this.type="height";this.toGeometry=this.fromGeometry=null;this.operationType="base-and-top";this.linearUnit="meters"}writeFromGeometry(l,p,c){null!=l&&(p.geometryType=M.getJsonType(l),p[c]=l.toJSON())}get measureOperation(){return this.operationType}clone(){return new h(z.clone({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,
mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};d.__decorate([t.property({type:f,json:{read:!0}})],m.prototype,"fromGeometry",void 0);d.__decorate([T.writer("fromGeometry")],m.prototype,"writeFromGeometry",null);d.__decorate([t.property({type:f,json:{read:!0,write:!0}})],m.prototype,"toGeometry",void 0);d.__decorate([t.property({type:V.measureOperationJSONMap.apiValues,json:{write:V.measureOperationJSONMap.write}})],m.prototype,"measureOperation",null);d.__decorate([t.property({json:{read:!0}})],
m.prototype,"operationType",void 0);d.__decorate([t.property({type:String,json:{read:F.lengthUnitsJSONMap.read,write:F.lengthUnitsJSONMap.write}})],m.prototype,"linearUnit",void 0);return m=h=d.__decorate([L.subclass("esri.rest.support.ImageHeightParameters")],m)})},"esri/rest/support/ImageHistogramParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/deprecate ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l,p){var c;t=c=class extends t.JSONSupport{constructor(){super(...arguments);this.pixelSize=this.rasterFunction=this.mosaicRule=this.geometry=null;this.raster=void 0;this.timeExtent=null}writeGeometry(u,y,v){null!=u&&(y.geometryType=f.getJsonType(u),y[v]=u.toJSON())}get renderingRule(){F.deprecatedProperty(Q.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this._get("rasterFunction")}set renderingRule(u){F.deprecatedProperty(Q.getLogger(this),
"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",u)}clone(){return new c(J.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};d.__decorate([L.property({types:m.geometryTypes,json:{read:f.fromJSON}})],t.prototype,"geometry",void 0);d.__decorate([V.writer("geometry")],t.prototype,"writeGeometry",null);d.__decorate([L.property({type:h,
json:{write:!0}})],t.prototype,"mosaicRule",void 0);d.__decorate([L.property({type:l})],t.prototype,"renderingRule",null);d.__decorate([L.property({type:l,json:{write:!0,name:"renderingRule"}})],t.prototype,"rasterFunction",void 0);d.__decorate([L.property({type:p,json:{write:!0}})],t.prototype,"pixelSize",void 0);d.__decorate([L.property({json:{write:!0}})],t.prototype,"raster",void 0);d.__decorate([L.property({type:z,json:{read:{source:"time"},write:{target:"time"}}})],t.prototype,"timeExtent",
void 0);return t=c=d.__decorate([M.subclass("esri.rest.support.ImageHistogramParameters")],t)})},"esri/rest/support/ImageIdentifyParameters":function(){define("../../chunks/tslib.es6 ../../TimeExtent ../../core/deprecate ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/RasterFunction".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f,h,l){var p;F=p=class extends F.JSONSupport{constructor(){super(...arguments);this.pixelSize=this.rasterFunctions=this.geometry=null;this.returnPixelValues=this.returnCatalogItems=this.returnGeometry=!0;this.timeExtent=this.maxItemCount=null;this.viewId=this.raster=void 0;this.processAsMultidimensional=!1}writeGeometry(c,u,y){null!=c&&(u.geometryType=f.getJsonType(c),u[y]=JSON.stringify(c.toJSON()))}set mosaicRule(c){c?.mosaicMethod&&(c=h.fromJSON({...c.toJSON(),mosaicMethod:c.mosaicMethod,
mosaicOperation:c.mosaicOperation}));this._set("mosaicRule",c)}writeMosaicRule(c,u,y){null!=c&&(u[y]=JSON.stringify(c.toJSON()))}get renderingRule(){z.deprecatedProperty(J.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});return this._get("rasterFunction")}set renderingRule(c){z.deprecatedProperty(J.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0});this._set("rasterFunction",c)}get renderingRules(){z.deprecatedProperty(J.getLogger(this),
"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0});return this._get("rasterFunctions")}set renderingRules(c){z.deprecatedProperty(J.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0});this._set("rasterFunctions",c)}set rasterFunction(c){c?.rasterFunction&&(c=l.fromJSON({...c.toJSON(),rasterFunction:c.rasterFunction,rasterFunctionArguments:c.rasterFunctionArguments}));this._set("rasterFunction",c)}writeRasterFunction(c,u,y){null!=c&&
(u[y]=JSON.stringify(c.toJSON()));c.rasterFunctionDefinition&&(u[y]=JSON.stringify(c.rasterFunctionDefinition))}writeRasterFunctions(c,u,y){null!=c&&(u[y]=JSON.stringify(c.map(v=>v.rasterFunctionDefinition||v.toJSON())))}writePixelSize(c,u,y){null!=c&&(u[y]=JSON.stringify(c))}writeTimeExtent(c,u,y){if(null!=c){const v=null!=c.start?c.start.getTime():null;c=null!=c.end?c.end.getTime():null;u[y]=null!=v?null!=c?`${v},${c}`:`${v}`:null}}clone(){return new p(t.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,
rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};d.__decorate([Q.property({json:{write:!0}})],F.prototype,"geometry",void 0);d.__decorate([M.writer("geometry")],F.prototype,"writeGeometry",
null);d.__decorate([Q.property({type:h,json:{write:!0}})],F.prototype,"mosaicRule",null);d.__decorate([M.writer("mosaicRule")],F.prototype,"writeMosaicRule",null);d.__decorate([Q.property({type:l})],F.prototype,"renderingRule",null);d.__decorate([Q.property({type:[l]})],F.prototype,"renderingRules",null);d.__decorate([Q.property({type:l,json:{write:!0,name:"renderingRule"}})],F.prototype,"rasterFunction",null);d.__decorate([M.writer("rasterFunction")],F.prototype,"writeRasterFunction",null);d.__decorate([Q.property({type:[l],
json:{write:!0,name:"renderingRules"}})],F.prototype,"rasterFunctions",void 0);d.__decorate([M.writer("rasterFunctions")],F.prototype,"writeRasterFunctions",null);d.__decorate([Q.property({type:V,json:{write:!0}})],F.prototype,"pixelSize",void 0);d.__decorate([M.writer("pixelSize")],F.prototype,"writePixelSize",null);d.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"returnGeometry",void 0);d.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"returnCatalogItems",
void 0);d.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"returnPixelValues",void 0);d.__decorate([Q.property({type:Number,json:{write:!0}})],F.prototype,"maxItemCount",void 0);d.__decorate([Q.property({type:m,json:{write:{target:"time"}}})],F.prototype,"timeExtent",void 0);d.__decorate([M.writer("timeExtent")],F.prototype,"writeTimeExtent",null);d.__decorate([Q.property({json:{write:!0}})],F.prototype,"raster",void 0);d.__decorate([Q.property({json:{write:!0}})],F.prototype,
"viewId",void 0);d.__decorate([Q.property({type:Boolean,json:{write:!0}})],F.prototype,"processAsMultidimensional",void 0);return F=p=d.__decorate([T.subclass("esri.rest.support.ImageIdentifyParameters")],F)})},"esri/rest/support/ImagePixelLocationParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){var V;m=V=class extends z.JSONSupport{constructor(){super(...arguments);this.rasterId=this.geometries=null}writeGeometry(f,h,l){h.geometries={geometryType:"esriGeometryPoint",geometries:f.map(p=>p.toJSON())}}clone(){return new V({geometries:this.geometries?.map(f=>f.clone())??[],rasterId:this.rasterId})}};d.__decorate([F.property({type:[M],json:{write:!0}})],m.prototype,"geometries",void 0);d.__decorate([T.writer("geometries")],m.prototype,"writeGeometry",null);d.__decorate([F.property({type:t.Integer,
json:{write:!0}})],m.prototype,"rasterId",void 0);return m=V=d.__decorate([L.subclass("esri.rest.support.ImagePixelLocationParameters")],m)})},"esri/rest/support/ImagePointParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ./BaseImageMeasureParameters".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){var V;t=V=class extends M.BaseImageMeasureParameters{constructor(){super(...arguments);this.type="point";this.geometry=null;this.is3D=!1}writeGeometry(f,h,l){null!=f&&(h.geometryType=T.getJsonType(f),h[l]=f.toJSON())}get measureOperation(){const {is3D:f,geometry:h}=this;return"point"===h.type?f?"point-3D":"point":f?"centroid-3D":"centroid"}clone(){return new V(z.clone({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};
d.__decorate([F.property({types:m.geometryTypes,json:{name:"fromGeometry",read:T.fromJSON}})],t.prototype,"geometry",void 0);d.__decorate([L.writer("geometry")],t.prototype,"writeGeometry",null);d.__decorate([F.property({type:M.measureOperationJSONMap.apiValues,json:{read:M.measureOperationJSONMap.read,write:M.measureOperationJSONMap.write}})],t.prototype,"measureOperation",null);d.__decorate([F.property({json:{read:!0}})],t.prototype,"is3D",void 0);return t=V=d.__decorate([Q.subclass("esri.rest.support.ImagePointParameters")],
t)})},"esri/rest/support/ImageSampleParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../layers/support/MosaicRule ../../layers/support/rasterEnums ../../geometry/Multipoint ../../geometry/Point".split(" "),function(d,
m,z,F,t,J,Q,L,T,M,V,f,h,l,p){var c;F=c=class extends F.JSONSupport{constructor(){super(...arguments);this.geometry=null;this.interpolation="nearest";this.pixelSize=this.outFields=this.mosaicRule=null;this.returnFirstValueOnly=!0;this.timeExtent=this.sliceId=this.sampleCount=this.sampleDistance=null}writeGeometry(u,y,v){null!=u&&(y.geometryType=V.getJsonType(u),y[v]=u.toJSON())}set locations(u){if(u?.length){const y=new l({spatialReference:u[0].spatialReference});y.points=u.map(v=>[v.x,v.y]);this._set("locations",
u);this.geometry=y}}clone(){return new c(t.clone({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};d.__decorate([J.property({types:m.geometryTypes,json:{read:V.fromJSON}})],F.prototype,"geometry",void 0);d.__decorate([M.writer("geometry")],
F.prototype,"writeGeometry",null);d.__decorate([J.property()],F.prototype,"locations",null);d.__decorate([J.property({type:String,json:{type:h.interpolationKebab.jsonValues,read:h.interpolationKebab.read,write:h.interpolationKebab.write}})],F.prototype,"interpolation",void 0);d.__decorate([J.property({type:f,json:{write:!0}})],F.prototype,"mosaicRule",void 0);d.__decorate([J.property({type:[String],json:{write:!0}})],F.prototype,"outFields",void 0);d.__decorate([J.property({type:p,json:{write:!0}})],
F.prototype,"pixelSize",void 0);d.__decorate([J.property({type:String,json:{write:!0}})],F.prototype,"raster",void 0);d.__decorate([J.property({type:Boolean,json:{write:!0}})],F.prototype,"returnFirstValueOnly",void 0);d.__decorate([J.property({type:Number,json:{write:!0}})],F.prototype,"sampleDistance",void 0);d.__decorate([J.property({type:Number,json:{write:!0}})],F.prototype,"sampleCount",void 0);d.__decorate([J.property({type:Number,json:{write:!0}})],F.prototype,"sliceId",void 0);d.__decorate([J.property({type:z,
json:{read:{source:"time"},write:{target:"time"}}})],F.prototype,"timeExtent",void 0);return F=c=d.__decorate([T.subclass("esri.rest.support.ImageSampleParameters")],F)})},"esri/rest/support/ImageToMapMultirayParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/SpatialReference ../../geometry/support/jsonUtils".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){z=class extends z.ClonableMixin(F.JSONSupport){constructor(){super(...arguments);this.geometries=[];this.outSpatialReference=this.rasterIds=null}writeGeometries(h,l,p){l.geometries=h?.length?{geometryType:f.getJsonType(h[0]),geometries:h.map(c=>({...c.toJSON(),spatialReference:void 0}))}:null}};d.__decorate([t.property({types:[m.geometryTypes]})],z.prototype,"geometries",void 0);d.__decorate([M.writer("geometries")],z.prototype,"writeGeometries",null);d.__decorate([t.property({type:[J.Integer],
json:{write:!0}})],z.prototype,"rasterIds",void 0);d.__decorate([t.property({type:V,json:{name:"outSR",write:!0}})],z.prototype,"outSpatialReference",void 0);return z=d.__decorate([T.subclass("esri.rest.support.ImageToMapMultirayParameters")],z)})},"esri/rest/support/ImageToMapParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils ../../geometry/SpatialReference".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V,f){z=class extends z.ClonableMixin(F.JSONSupport){constructor(){super(...arguments);this.outSpatialReference=this.rasterId=this.geometry=null;this.depthOffset=0;this.adjust=!1}writeGeometry(h,l,p){null!=h&&(l.geometryType=V.getJsonType(h),l[p]={...h.toJSON(),spatialReference:void 0})}};d.__decorate([t.property({types:m.geometryTypes,json:{read:V.fromJSON,write:!0}})],z.prototype,"geometry",void 0);d.__decorate([M.writer("geometry")],z.prototype,"writeGeometry",null);
d.__decorate([t.property({json:{write:!0}})],z.prototype,"rasterId",void 0);d.__decorate([t.property({type:f,json:{name:"outSR",write:!0}})],z.prototype,"outSpatialReference",void 0);d.__decorate([t.property({json:{name:"options.DOff",write:!0}})],z.prototype,"depthOffset",void 0);d.__decorate([t.property({json:{name:"options.Adjust",write:!0}})],z.prototype,"adjust",void 0);return z=d.__decorate([T.subclass("esri.rest.support.ImageToMapParameters")],z)})},"esri/rest/support/ImageUrlParameters":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,m,z,F,t,J,Q,L){m=class extends m.ClonableMixin(z.JSONSupport){constructor(){super(...arguments);this.referenceUri=null}};d.__decorate([F.property({type:String,json:{name:"uri",write:!0}})],m.prototype,"referenceUri",void 0);return m=d.__decorate([L.subclass("esri.rest.support.ImageUrlParameters")],m)})},"esri/rest/support/MapToImageParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils".split(" "),
function(d,m,z,F,t,J,Q,L,T,M,V){z=class extends z.ClonableMixin(F.JSONSupport){constructor(){super(...arguments);this.rasterId=this.geometry=null;this.visibleOnly=!1}writeGeometry(f,h,l){null!=f&&(h.geometryType=V.getJsonType(f),h[l]=JSON.stringify(f))}};d.__decorate([t.property({types:m.geometryTypes,json:{read:V.fromJSON,write:!0}})],z.prototype,"geometry",void 0);d.__decorate([M.writer("geometry")],z.prototype,"writeGeometry",null);d.__decorate([t.property({json:{write:!0}})],z.prototype,"rasterId",
void 0);d.__decorate([t.property({json:{name:"options.VisibleOnly",write:!0}})],z.prototype,"visibleOnly",void 0);return z=d.__decorate([T.subclass("esri.rest.support.MapToImageParameters")],z)})},"esri/rest/support/MeasureFromImageParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/support/jsonUtils".split(" "),
function(d,m,z,F,t,J,Q,L,T,M){var V;z=V=class extends z.JSONSupport{constructor(){super(...arguments);this.geometry=null;this.rasterId=void 0}writeGeometry(f,h,l){null!=f&&(h.geometryType=M.getJsonType(f),h[l]={...f.toJSON(),spatialReference:void 0})}clone(){const f=F.clone({geometry:this.geometry,rasterId:this.rasterId});return new V(f)}};d.__decorate([t.property({types:m.geometryTypes,json:{name:"fromGeometry",read:M.fromJSON,write:!0}})],z.prototype,"geometry",void 0);d.__decorate([T.writer("geometry")],
z.prototype,"writeGeometry",null);d.__decorate([t.property({json:{write:!0}})],z.prototype,"rasterId",void 0);return z=V=d.__decorate([L.subclass("esri.rest.support.MeasureFromImageParameters")],z)})},"esri/views/2d/engine/flow/dataUtils":function(){define("exports ../../../../geometry ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/promiseUtils ../../../../core/RandomLCG ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/Extent".split(" "),
function(d,m,z,F,t,J,Q,L,T){function M(a,e){const g=h(e.data,e.width,e.height,a.smoothing);return a.interpolate?(n,b)=>{const k=Math.floor(n),x=Math.floor(b);if(0>k||k>=e.width||0>x||x>=e.height)return[0,0];n-=k;b-=x;const E=k<e.width-1?k+1:k,r=x<e.height-1?x+1:x;return[(g[2*(x*e.width+k)]*(1-b)+g[2*(r*e.width+k)]*b)*(1-n)+(g[2*(x*e.width+E)]*(1-b)+g[2*(r*e.width+E)]*b)*n,(g[2*(x*e.width+k)+1]*(1-b)+g[2*(r*e.width+k)+1]*b)*(1-n)+(g[2*(x*e.width+E)+1]*(1-b)+g[2*(r*e.width+E)+1]*b)*n]}:(n,b)=>{n=Math.round(n);
b=Math.round(b);return 0>n||n>=e.width||0>b||b>=e.height?[0,0]:[g[2*(b*e.width+n)],g[2*(b*e.width+n)+1]]}}function V(a,e,g,n,b,k,x,E,r){const A=[];let w=0,[q,G]=e(g,n);q*=a.velocityScale;G*=a.velocityScale;A.push({x:g,y:n,t:w,speed:Math.sqrt(q*q+G*G)});for(let C=0;C<a.verticesPerLine;C++){let [D,N]=e(g,n);D*=a.velocityScale;N*=a.velocityScale;const R=Math.sqrt(D*D+N*N);if(R<a.minSpeedThreshold)break;const I=D/R,P=N/R;g+=I*a.segmentLength;n+=P*a.segmentLength;w+=a.segmentLength/R;if(Math.acos(I*B+
P*K)>a.maxTurnAngle)break;if(a.collisions){var B=Math.round(g*r);var K=Math.round(n*r);if(0>B||B>x-1||0>K||K>E-1)break;const O=k[K*x+B];if(-1!==O&&O!==b)break;k[K*x+B]=b}A.push({x:g,y:n,t:w,speed:R});B=I;K=P}return A}function f(a,e,g,n){const b=[],k=new Q,x=1/Math.max(a.lineCollisionWidth,1),E=Math.round(g*x),r=Math.round(n*x),A=new Int32Array(E*r);for(var w=0;w<A.length;w++)A[w]=-1;w=[];for(let q=0;q<n;q+=a.lineSpacing)for(let G=0;G<g;G+=a.lineSpacing)w.push({x:G,y:q,sort:k.getFloat()});w.sort((q,
G)=>q.sort-G.sort);for(const {x:q,y:G}of w)k.getFloat()<a.density&&(g=V(a,e,q,G,b.length,A,E,r,x),2>g.length||b.push(g));return b}function h(a,e,g,n){if(0===n)return a;const b=Math.round(3*n),k=Array(2*b+1);var x=0;for(var E=-b;E<=b;E++){var r=Math.exp(-E*E/(n*n));k[E+b]=r;x+=r}for(n=-b;n<=b;n++)k[n+b]/=x;x=new Float32Array(a.length);for(n=0;n<g;n++)for(E=0;E<e;E++){var A=r=0;for(var w=-b;w<=b;w++)if(!(0>E+w||E+w>=e)){var q=k[w+b];r+=q*a[2*(n*e+(E+w))];A+=q*a[2*(n*e+(E+w))+1]}x[2*(n*e+E)]=r;x[2*(n*
e+E)+1]=A}a=new Float32Array(a.length);for(n=0;n<e;n++)for(E=0;E<g;E++){A=r=0;for(w=-b;w<=b;w++)0>E+w||E+w>=g||(q=k[w+b],r+=q*x[2*((E+w)*e+n)],A+=q*x[2*((E+w)*e+n)+1]);a[2*(E*e+n)]=r;a[2*(E*e+n)+1]=A}return a}function l(a,e){const g=new Q;var n=a.reduce((E,r)=>E+r.length,0);n=new Float32Array(4*n);const b=Array(a.length);let k=0,x=0;for(const E of a){a=k;for(const r of E)n[4*k]=r.x,n[4*k+1]=r.y,n[4*k+2]=r.t,n[4*k+3]=r.speed,k++;b[x++]={startVertex:a,numberOfVertices:E.length,totalTime:E[E.length-
1].t,timeSeed:e?g.getFloat():0}}return{lineVertices:n,lineDescriptors:b}}function p(a,e){function g(B,K,C,D,N,R,I,P){const O=9*r;let S=0;E[O+S++]=B;E[O+S++]=K;E[O+S++]=1;E[O+S++]=C;E[O+S++]=R;E[O+S++]=I;E[O+S++]=D/2;E[O+S++]=N/2;E[O+S++]=P;r++;E[O+S++]=B;E[O+S++]=K;E[O+S++]=-1;E[O+S++]=C;E[O+S++]=R;E[O+S++]=I;E[O+S++]=-D/2;E[O+S++]=-N/2;E[O+S++]=P;r++}const {lineVertices:n,lineDescriptors:b}=a;var k=a=0;for(var x of b)a+=2*x.numberOfVertices,k+=6*(x.numberOfVertices-1);const E=new Float32Array(9*
a);x=new Uint32Array(k);let r=0;a=0;for(const B of b){const {totalTime:K,timeSeed:C}=B;let D=k=null,N=null;var A=null,w=null,q=null;for(let R=0;R<B.numberOfVertices;R++){A=n[4*(B.startVertex+R)];const I=n[4*(B.startVertex+R)+1],P=n[4*(B.startVertex+R)+2],O=n[4*(B.startVertex+R)+3];let S=null,W=null;var G=null;let X=null;0<R&&(S=A-k,W=I-D,G=Math.sqrt(S*S+W*W),S/=G,W/=G,1<R?(w=S+w,q=W+q,G=Math.sqrt(w*w+q*q),w/=G,q/=G,G=Math.min(1/(w*S+q*W),e),w*=G,q*=G,G=-q,X=w):(G=-W,X=S),null!==G&&null!==X&&(g(k,
D,N,G,X,K,C,O),x[a++]=r-2,x[a++]=r,x[a++]=r-1,x[a++]=r,x[a++]=r+1,x[a++]=r-1));k=A;D=I;N=P;w=S;q=W;A=O}g(k,D,N,-q,w,K,C,A)}return{vertexData:E,indexData:x}}function c(a){function e(Z,ca){var aa=P+S,ea=O+W,ha=Math.sqrt(aa*aa+ea*ea);aa/=ha;ea/=ha;var fa=P*aa+O*ea,ja=S+X,ia=W+ba;ha=Math.sqrt(ja*ja+ia*ia);ja/=ha;ia/=ha;var na=S*ja+W*ia;ha=G;var qa=B,ta=K,wa=C;ea=-(ea/fa);aa/=fa;fa=D;var ya=N,xa=R,Ba=I;ia=-(ia/na);ja/=na;na=16*w;let sa=0;for(const Ca of[1,2])for(const Ga of[1,2,3,4])r[na+sa++]=ha,r[na+
sa++]=qa,r[na+sa++]=ta,r[na+sa++]=wa,r[na+sa++]=fa,r[na+sa++]=ya,r[na+sa++]=xa,r[na+sa++]=Ba,r[na+sa++]=Ca,r[na+sa++]=Ga,r[na+sa++]=Z,r[na+sa++]=ca,r[na+sa++]=ea/2,r[na+sa++]=aa/2,r[na+sa++]=ia/2,r[na+sa++]=ja/2,w++;A[q++]=w-8;A[q++]=w-7;A[q++]=w-6;A[q++]=w-7;A[q++]=w-5;A[q++]=w-6;A[q++]=w-4;A[q++]=w-3;A[q++]=w-2;A[q++]=w-3;A[q++]=w-1;A[q++]=w-2}function g(Z,ca,aa,ea,ha,fa){P=S;O=W;S=X;W=ba;null==P&&null==O&&(P=S,O=W);if(null!=D&&null!=N){X=Z-D;ba=ca-N;const ja=Math.sqrt(X*X+ba*ba);X/=ja;ba/=ja}null!=
P&&null!=O&&e(ha,fa);G=D;B=N;K=R;C=I;D=Z;N=ca;R=aa;I=ea}function n(Z,ca){P=S;O=W;S=X;W=ba;null==P&&null==O&&(P=S,O=W);null!=P&&null!=O&&e(Z,ca)}const {lineVertices:b,lineDescriptors:k}=a;let x=a=0;for(var E of k){const Z=E.numberOfVertices-1;a+=8*Z;x+=12*Z}const r=new Float32Array(16*a),A=new Uint32Array(x);let w=0,q=0,G,B,K,C,D,N,R,I,P,O,S,W,X,ba;for(const Z of k){ba=X=W=S=O=P=I=R=N=D=C=K=B=G=null;const {totalTime:ca,timeSeed:aa}=Z;for(E=0;E<Z.numberOfVertices;E++)g(b[4*(Z.startVertex+E)],b[4*(Z.startVertex+
E)+1],b[4*(Z.startVertex+E)+2],b[4*(Z.startVertex+E)+3],ca,aa);n(ca,aa)}return{vertexData:r,indexData:A}}function u(a,e){const g=e.pixels,{width:n,height:b}=e,k=new Float32Array(n*b*2),x=e.mask||new Uint8Array(n*b*2);e.mask||x.fill(255);if("vector-uv"===a)for(a=0;a<n*b;a++)k[2*a]=g[0][a],k[2*a+1]=-g[1][a];else if("vector-magdir"===a)for(a=0;a<n*b;a++){e=g[0][a];const E=t.deg2rad(g[1][a]),r=Math.sin(E-Math.PI/2);k[2*a]=Math.cos(E-Math.PI/2)*e;k[2*a+1]=r*e}return{data:k,mask:x,width:n,height:b}}async function y(a,
e,g,n,b,k){const x={requestProjectedLocalDirections:!0,signal:k};null!=b&&(x.timeExtent=b);if("imagery"===a.type)return await a.load({signal:k}),b=a.rasterInfo.dataType,a=await a.fetchImage(e,g,n,x),null==a?.pixelData?.pixelBlock?{data:new Float32Array(g*n*2),mask:new Uint8Array(g*n),width:g,height:n}:u(b,a.pixelData.pixelBlock);await a.load({signal:k});b=a.serviceRasterInfo.dataType;a=await a.fetchPixels(e,g,n,x);return null==a?.pixelBlock?{data:new Float32Array(g*n*2),mask:new Uint8Array(g*n),width:g,
height:n}:u(b,a.pixelBlock)}const v=()=>F.getLogger("esri.views.2d.engine.flow.dataUtils");d.createAnimatedLinesData=l;d.createFlowMesh=async function(a,e,g,n){const b=performance.now();var k=M(e,g);const x=performance.now();g=f(e,k,g.width,g.height);e=performance.now();k=l(g,!0);g=performance.now();a="Streamlines"===a?p(k,10):c(k);k=performance.now();z("esri-2d-profiler")&&(v().info("I.1","_createFlowFieldFromData (ms)",Math.round(x-b)),v().info("I.2","_getStreamlines (ms)",Math.round(e-x)),v().info("I.3",
"createAnimatedLinesData (ms)",Math.round(g-e)),v().info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(k-g)),v().info("I.5","createFlowMesh (ms)",Math.round(k-b)),v().info("I.6","Mesh size (bytes)",a.vertexData.buffer.byteLength+a.indexData.buffer.byteLength));await Promise.resolve();J.throwIfAborted(n);return a};d.createParticlesMesh=c;d.createStreamlinesMesh=p;d.loadImagery=async function(a,e,g,n,b,k){const x=performance.now();var E=L.getInfo(e.spatialReference);if(!E)return g=await y(a,
e,g,n,b,k),z("esri-2d-profiler")&&v().info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-x)),z("esri-2d-profiler")&&v().info("I.9","Number of parts",1),g;const [r,A]=E.valid,w=Math.ceil(e.width/(A-r)),q=e.width/w,G=Math.round(g/w);let B=e.xmin;const K=[];E=performance.now();for(let C=0;C<w;C++){const D=new T({xmin:B,xmax:B+q,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference});K.push(y(a,D,G,n,b,k));B+=q}a=await Promise.all(K);z("esri-2d-profiler")&&v().info("I.8","All calls to _fetchPart (ms)",
Math.round(performance.now()-E));z("esri-2d-profiler")&&v().info("I.9","Number of parts",a.length);n={data:new Float32Array(g*n*2),mask:new Uint8Array(g*n),width:g,height:n};e=0;for(const C of a){for(a=0;a<C.height;a++)for(b=0;b<C.width;b++)e+b>=g||(n.data[2*(a*g+e+b)]=C.data[2*(a*C.width+b)],n.data[2*(a*g+e+b)+1]=C.data[2*(a*C.width+b)+1],n.mask[a*g+e+b]=C.mask[a*C.width+b]);e+=C.width}z("esri-2d-profiler")&&v().info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-x));return n};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ../chunks/tslib.es6 ../PopupTemplate ../core/Clonable ../core/Error ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ./Layer ./mixins/ArcGISImageService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/commonProperties ./support/versionUtils ../support/popupUtils ../webdoc/interfaces".split(" "),function(d,
m,z,F,t,J,Q,L,T,M,V,f,h,l,p,c,u,y,v,a,e,g,n,b,k,x,E){F=class extends u.BlendLayer(n.TemporalLayer(g.ScaleRangeLayer(v.OperationalLayer(a.PortalLayer(p.ArcGISImageService(e.RefreshableLayer(y.CustomParametersMixin(c.ArcGISService(J.MultiOriginJSONMixin(F.ClonableMixin(l))))))))))){constructor(...r){super(...r);this.isReference=null;this.operationalLayerType="ArcGISImageServiceLayer";this.popupEnabled=!0;this.popupTemplate=null;this.type="imagery";this._debouncedSaveOperations=Q.debounce(async(A,w,
q)=>{const {save:G,saveAs:B}=await new Promise((K,C)=>d(["./save/imageryUtils"],K,C));switch(A){case E.SaveOperationType.SAVE:return G(this,w);case E.SaveOperationType.SAVE_AS:return B(this,q,w)}})}normalizeCtorArgs(r,A){return"string"===typeof r?{url:r,...A}:r}load(r){const A=null!=r?r.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},r).catch(Q.throwIfAbortError).then(()=>this._fetchService(A)));return Promise.resolve(this)}get legendEnabled(){return this._isPreviewLayer?
!1:this._get("legendEnabled")??!0}set legendEnabled(r){this._set("legendEnabled",r)}get listMode(){return this._isPreviewLayer?"hide":this._get("listMode")}set listMode(r){this._set("listMode",r)}writeOperationalLayerType(r,A,w){A[w]="vector-field"===this.renderer?.type?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}get _isPreviewLayer(){return!(!this.raster||!this.url?.toLowerCase().includes("/rasterrendering/imageserver"))}createPopupTemplate(r){const A=
this.rasterFields,w=this.title,q=new Set;var G=!1;let B=!1;this.capabilities&&(G=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length,B="esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType);const K=new Set;G&&K.add("raster.itempixelvalue");for(const C of A)G=C.name.toLowerCase(),K.has(G)||G.includes("raster.servicepixelvalue.")||q.add(C.name);B&&q.add("raster.magnitude").add("raster.direction");r=x.createPopupTemplate({fields:A,
title:w},{...r,visibleFieldNames:q});r?.fieldInfos&&this.rasterInfo?.pixelType.startsWith("f")&&r.fieldInfos.forEach(({format:C,fieldName:D})=>{C&&/^raster\.(item|service)pixelvalue/i.test(D)&&(C.places=2)});return r}queryFeatures(r,A){return this.queryRasters(r,A).then(w=>{if(w?.features)for(const q of w.features)q.layer=q.sourceLayer=this;return w})}queryFeatureCount(r,A){return this.queryRasterCount(r,A)}redraw(){this.emit("redraw")}async save(r){return this._debouncedSaveOperations(E.SaveOperationType.SAVE,
r)}async saveAs(r,A){return this._debouncedSaveOperations(E.SaveOperationType.SAVE_AS,A,r)}serviceSupportsSpatialReference(r){return k.serviceSupportsSpatialReference(this,r)}write(r,A){if(!this._isPreviewLayer)return super.write(r,A);A?.messages&&A.messages.push(new t("layer:unsupported",`Imagery preview layer (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${A.origin}/${A.layerContainerType||"operational-layers"}`}'`,{layer:this}));return null}};
m.__decorate([L.property(b.legendEnabled)],F.prototype,"legendEnabled",null);m.__decorate([L.property({type:["show","hide"]})],F.prototype,"listMode",null);m.__decorate([L.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],F.prototype,"isReference",void 0);m.__decorate([L.property({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],
F.prototype,"operationalLayerType",void 0);m.__decorate([h.writer("web-map","operationalLayerType")],F.prototype,"writeOperationalLayerType",null);m.__decorate([L.property(b.popupEnabled)],F.prototype,"popupEnabled",void 0);m.__decorate([L.property({type:z,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],F.prototype,"popupTemplate",void 0);m.__decorate([L.property({readOnly:!0})],F.prototype,"defaultPopupTemplate",null);m.__decorate([L.property({readOnly:!0,json:{read:!1}})],F.prototype,
"type",void 0);m.__decorate([L.property({readOnly:!0})],F.prototype,"_isPreviewLayer",null);return F=m.__decorate([f.subclass("esri.layers.ImageryLayer")],F)});