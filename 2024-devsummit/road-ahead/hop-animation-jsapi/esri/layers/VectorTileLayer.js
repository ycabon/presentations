// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISCachedService":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../support/TileInfo ../support/TileInfoTilemapCache ../support/TilemapCache ../../geometry/SpatialReference".split(" "),function(d,a,m,c,g,e,f,l,q,k,v,D,G){d.ArcGISCachedService=B=>{B=class extends B{constructor(){super(...arguments);
this.copyright=null;this.maxScale=this.minScale=0;this.tilemapCache=this.tileInfo=this.spatialReference=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(u,w){return null!=w.minLOD&&null!=w.maxLOD?u:0}readMaxScale(u,w){return null!=w.minLOD&&null!=w.maxLOD?u:0}get supportsBlankTile(){return 10.2<=this.version}readTilemapCache(u,w,L){u=w.capabilities?.includes("Tilemap");let {minLOD:H,maxLOD:J,minScale:y,maxScale:z}=w;if(null==H&&null==J&&0!==y&&0!==z){y=y?Math.round(1E4*y)/1E4:Math.round(1E4*
w.tileInfo.lods[0].scale)/1E4;z=z?Math.round(1E4*z)/1E4:Math.round(1E4*w.tileInfo.lods[w.tileInfo.lods.length-1].scale)/1E4;for(var A of w.tileInfo.lods){const I=Math.round(1E4*A.scale)/1E4;H=I>=y?A.level:H;J=I>=z?A.level:J}}return u?new D.TilemapCache({layer:this,minLOD:H,maxLOD:J}):w.tileInfo?(A=new k,A.read(w.tileInfo,L),new v(A,H,J)):null}};a.__decorate([c.property({json:{read:{source:"copyrightText"}}})],B.prototype,"copyright",void 0);a.__decorate([c.property()],B.prototype,"minScale",void 0);
a.__decorate([l.reader("service","minScale")],B.prototype,"readMinScale",null);a.__decorate([c.property()],B.prototype,"maxScale",void 0);a.__decorate([l.reader("service","maxScale")],B.prototype,"readMaxScale",null);a.__decorate([c.property({type:G})],B.prototype,"spatialReference",void 0);a.__decorate([c.property({readOnly:!0})],B.prototype,"supportsBlankTile",null);a.__decorate([c.property({type:k})],B.prototype,"tileInfo",void 0);a.__decorate([c.property()],B.prototype,"tilemapCache",void 0);
a.__decorate([l.reader("service","tilemapCache",["capabilities","tileInfo"])],B.prototype,"readTilemapCache",null);a.__decorate([c.property()],B.prototype,"version",void 0);return B=a.__decorate([q.subclass("esri.layers.mixins.ArcGISCachedService")],B)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(d,a,m,c,g,e,f,l,q,k,v,D,G,B,u,w,L,H){var J;a=new a.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});m=J=class extends m.JSONSupport{static create(y={}){const {resolutionFactor:z=1,scales:A,size:I=256,spatialReference:n=G.WebMercator,numLODs:t=24}=y;if(!u.isValid(n)){y=[];if(A)for(var r=0;r<A.length;r++){var C=
A[r];y.push(new L({level:r,scale:C,resolution:C}))}else for(r=5E-4,C=t-1;0<=C;C--)y.unshift(new L({level:C,scale:r,resolution:r})),r*=2;return new J({dpi:96,lods:y,origin:new D(0,0,n),size:[I,I],spatialReference:n})}r=u.getInfo(n);y=y.origin?new D({x:y.origin.x,y:y.origin.y,spatialReference:n}):r?new D({x:r.origin[0],y:r.origin[1],spatialReference:n}):new D({x:0,y:0,spatialReference:n});r=1/(39.37*c.getMetersPerUnitForSR(n)*96);C=[];if(A)for(var E=0;E<A.length;E++){var M=A[E];C.push(new L({level:E,
scale:M,resolution:M*r}))}else{var O=u.isGeographic(n)?512/I*5.916575275917094E8:256/I*5.91657527591555E8;E=Math.ceil(t/z);C.push(new L({level:0,scale:O,resolution:O*r}));for(M=1;M<E;M++)O/=2**z,C.push(new L({level:M,scale:O,resolution:O*r}))}return new J({dpi:96,lods:C,origin:y,size:[I,I],spatialReference:n})}constructor(y){super(y);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:y,origin:z}=this;if(y&&z){const A=u.getInfo(y);return y.isWrappable&&
!!A&&Math.abs(A.origin[0]-z.x)<=A.dx}return!1}readOrigin(y,z){return D.fromJSON({spatialReference:z.spatialReference,...y})}set lods(y){const z=[],A=this._levelToLOD={};y&&y.forEach(I=>{z.push(I.scale);A[I.level]=I});this._set("scales",z);this._set("lods",y);this._initializeUpsampleLevels()}readSize(y,z){return[z.cols,z.rows]}writeSize(y,z){z.cols=y[0];z.rows=y[1]}zoomToScale(y){const z=this.scales;if(0>=y)return z[0];if(y>=z.length-1)return z[z.length-1];const A=Math.floor(y);return z[A]/(z[A]/z[A+
1])**(y-A)}scaleToZoom(y){const z=this.scales,A=z.length-1;let I=0;for(;I<A;I++){const n=z[I],t=z[I+1];if(n<=y)break;if(t===y)return I+1;if(n>y&&t<y)return I+Math.log(n/y)/Math.log(n/t)}return I}snapScale(y,z=.95){y=this.scaleToZoom(y);return y%Math.floor(y)>=z?this.zoomToScale(Math.ceil(y)):this.zoomToScale(Math.floor(y))}tileAt(y,z,A,I){var n=this.lodAt(y);if(!n)return null;let t;if("number"===typeof z)t=z,z=A;else{if(u.equals(z.spatialReference,this.spatialReference))t=z.x,z=z.y;else{I=w.project(z,
this.spatialReference);if(null==I)return null;t=I.x;z=I.y}I=A}A=n.resolution*this.size[0];n=n.resolution*this.size[1];I||=new H.TileKey(null,0,0,0,B.create());I.level=y;I.row=Math.floor((this.origin.y-z)/n+.001);I.col=Math.floor((t-this.origin.x)/A+.001);this.updateTileInfo(I);return I}updateTileInfo(y,z=J.ExtrapolateOptions.NONE){var A=this.lodAt(y.level);A||z!==J.ExtrapolateOptions.POWER_OF_TWO||(z=this.lods[this.lods.length-1],z.level<y.level&&(A=z));if(A){var I=y.level-A.level;z=A.resolution*
this.size[0]/2**I;A=A.resolution*this.size[1]/2**I;y.id=`${y.level}/${y.row}/${y.col}`;y.extent||(y.extent=B.create());y.extent[0]=this.origin.x+y.col*z;y.extent[1]=this.origin.y-(y.row+1)*A;y.extent[2]=y.extent[0]+z;y.extent[3]=y.extent[1]+A}}upsampleTile(y){const z=this._upsampleLevels[y.level];if(!z||-1===z.parentLevel)return!1;y.level=z.parentLevel;y.row=Math.floor(y.row/z.factor+.001);y.col=Math.floor(y.col/z.factor+.001);this.updateTileInfo(y);return!0}getTileBounds(y,z){var A=this.lodAt(z.level);
if(null==A)return null;var {resolution:I}=A;A=I*this.size[0];I*=this.size[1];y[0]=this.origin.x+z.col*A;y[1]=this.origin.y-(z.row+1)*I;y[2]=y[0]+A;y[3]=y[1]+I;return y}lodAt(y){return this._levelToLOD?.[y]??null}clone(){return J.fromJSON(this.write({}))}getOrCreateCompatible(y,z){if(256===this.size[0]&&256===this.size[1])return 256===y?this:null;const A=[],I=this.lods.length;for(let n=0;n<I;n++){const t=this.lods[n];A.push(new L({level:t.level,scale:t.scale,resolution:t.resolution*z}))}return new J({size:[y,
y],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:A})}_initializeUpsampleLevels(){const y=this.lods;this._upsampleLevels=[];let z=null;for(let A=0;A<y.length;A++){const I=y[A];this._upsampleLevels[I.level]={parentLevel:z?z.level:-1,factor:z?z.resolution/I.resolution:0};z=I}}};d.__decorate([g.property({type:Number,json:{write:!0}})],m.prototype,"compressionQuality",void 0);d.__decorate([g.property({type:Number,
json:{write:!0}})],m.prototype,"dpi",void 0);d.__decorate([g.property({type:String,json:{read:a.read,write:a.write,origins:{"web-scene":{read:!1,write:!1}}}})],m.prototype,"format",void 0);d.__decorate([g.property({readOnly:!0})],m.prototype,"isWrappable",null);d.__decorate([g.property({type:D,json:{write:!0}})],m.prototype,"origin",void 0);d.__decorate([q.reader("origin")],m.prototype,"readOrigin",null);d.__decorate([g.property({type:[L],value:null,json:{write:!0}})],m.prototype,"lods",null);d.__decorate([g.property({readOnly:!0})],
m.prototype,"scales",void 0);d.__decorate([g.property({cast:y=>Array.isArray(y)?y:"number"===typeof y?[y,y]:[256,256]})],m.prototype,"size",void 0);d.__decorate([q.reader("size",["rows","cols"])],m.prototype,"readSize",null);d.__decorate([v.writer("size",{cols:{type:e.Integer},rows:{type:e.Integer}})],m.prototype,"writeSize",null);d.__decorate([g.property({type:G,json:{write:!0}})],m.prototype,"spatialReference",void 0);m=J=d.__decorate([k.subclass("esri.layers.support.TileInfo")],m);(function(y){y=
y.ExtrapolateOptions||(y.ExtrapolateOptions={});y[y.NONE=0]="NONE";y[y.POWER_OF_TWO=1]="POWER_OF_TWO"})(m||={});return m})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(d,a,m,c,g,e,f){var l;a=l=class extends a.JSONSupport{constructor(q){super(q);this.cols=null;this.level=
0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new l({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};d.__decorate([m.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"cols",void 0);d.__decorate([m.property({type:c.Integer,json:{write:!0}})],a.prototype,"level",void 0);d.__decorate([m.property({type:String,json:{write:!0}})],
a.prototype,"levelValue",void 0);d.__decorate([m.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"origin",void 0);d.__decorate([m.property({type:Number,json:{write:!0}})],a.prototype,"resolution",void 0);d.__decorate([m.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"rows",void 0);d.__decorate([m.property({type:Number,json:{write:!0}})],a.prototype,"scale",void 0);
return a=l=d.__decorate([f.subclass("esri.layers.support.LOD")],a)})},"esri/layers/support/TileKey":function(){define(["exports"],function(d){class a{constructor(m,c,g,e,f){this.id=m;this.level=c;this.row=g;this.col=e;this.extent=f}}d.TileKey=a;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfoTilemapCache":function(){define(["../../core/Error","../../core/promiseUtils"],function(d,a){class m{constructor(c,g=0,e=c.lods[c.lods.length-1].level){this.tileInfo=
c;this.minLOD=g;this.maxLOD=e;c.lodAt(g)||(this.minLOD=c.lods[0].level);c.lodAt(e)||(this.maxLOD=c.lods[c.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(c,g,e){const f=this.tileInfo?.lodAt(c);return!f||c<this.minLOD||c>this.maxLOD?"unavailable":f.cols&&f.rows?e>=f.cols[0]&&e<=f.cols[1]&&g>=f.rows[0]&&g<=f.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(c,
g,e,f){await a.waitTick(f);f=this.getAvailability(c,g,e);if("unavailable"===f)throw new d("tile-map:tile-unavailable","Tile is not available",{level:c,row:g,col:e});return f}async fetchAvailabilityUpsample(c,g,e,f,l){await a.waitTick(l);f.level=c;f.row=g;f.col=e;const q=this.tileInfo;q.updateTileInfo(f);return this.fetchAvailability(c,g,e,l).catch(k=>{if(a.isAbortError(k))throw k;if(q.upsampleTile(f))return this.fetchAvailabilityUpsample(f.level,f.row,f.col,f,l);throw k;})}}return m})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/tslib.es6 ../../request ../../core/Accessor ../../core/ByteSizeUnit ../../core/Error ../../core/handleUtils ../../core/LRUCache ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./TileKey ./Tilemap".split(" "),
function(d,a,m,c,g,e,f,l,q,k,v,D,G,B,u,w,L,H,J,y){var z;d.TilemapCache=z=class extends c{constructor(A){super(A);this._pendingTilemapRequests={};this.request=m;this.size=32;this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new l.LRUCache(2*g.ByteSizeUnit.MEGABYTES);this.addHandles([v.watch(()=>{const {layer:A}=this;return[A?.parsedUrl,A?.tileServers,A?.apiKey,A?.customParameters]},()=>this._initializeTilemapDefinition(),v.initial)])}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??
this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}fetchTilemap(A,I,n,t){if(!this.layer.tileInfo.lodAt(A)||A<this.effectiveMinLOD||A>this.effectiveMaxLOD)return Promise.reject(new e("tilemap-cache:level-unavailable",`Level ${A} is unavailable in the service`));const r=this._tmpTilemapDefinition;if(A=this._tilemapFromCache(A,I,n,r))return Promise.resolve(A);const C=t?.signal;t={...t,signal:null};return new Promise((E,M)=>{k.onAbort(C,()=>M(k.createAbortError()));const O=y.tilemapDefinitionId(r);
let Q=this._pendingTilemapRequests[O];if(!Q){Q=y.Tilemap.fromDefinition(r,t).then(X=>{this._tilemapCache.put(O,X,X.byteSize);return X});const V=()=>{delete this._pendingTilemapRequests[O]};this._pendingTilemapRequests[O]=Q;Q.then(V,V)}Q.then(E,M)})}getAvailability(A,I,n){return!this.layer.tileInfo.lodAt(A)||A<this.effectiveMinLOD||A>this.effectiveMaxLOD?"unavailable":(A=this._tilemapFromCache(A,I,n,this._tmpTilemapDefinition))?A.getAvailability(I,n):"unknown"}fetchAvailability(A,I,n,t){return!this.layer.tileInfo.lodAt(A)||
A<this.effectiveMinLOD||A>this.effectiveMaxLOD?Promise.reject(new e("tile-map:tile-unavailable","Tile is not available",{level:A,row:I,col:n})):this.fetchTilemap(A,I,n,t).catch(r=>r).then(r=>{if(r instanceof y.Tilemap){r=r.getAvailability(I,n);if("unavailable"===r)throw new e("tile-map:tile-unavailable","Tile is not available",{level:A,row:I,col:n});return r}if(k.isAbortError(r))throw r;return"unknown"})}fetchAvailabilityUpsample(A,I,n,t,r){t.level=A;t.row=I;t.col=n;const C=this.layer.tileInfo;C.updateTileInfo(t);
const E=this.fetchAvailability(A,I,n,r).catch(M=>{if(k.isAbortError(M))throw M;if(C.upsampleTile(t))return this.fetchAvailabilityUpsample(t.level,t.row,t.col,t,r);throw M;});this._fetchAvailabilityUpsamplePrefetch(t.id,A,I,n,r,E);return E}async _fetchAvailabilityUpsamplePrefetch(A,I,n,t,r,C){if(this._prefetchingEnabled&&null!=A){var E=`prefetch-${A}`;if(!this.hasHandles(E)){var M=new AbortController;C.then(()=>M.abort(),()=>M.abort());var O=!1;C=f.makeHandle(()=>{O||(O=!0,M.abort())});this.addHandles(C,
E);await D.waitTicks(10,M.signal).catch(()=>{});O||(O=!0,this.removeHandles(E));if(!k.isAborted(M))for(A=new J.TileKey(A,I,n,t),r={...r,signal:M.signal},I=this.layer.tileInfo,n=0;z._prefetches.length<z._maxPrefetch&&I.upsampleTile(A);++n){const Q=this.fetchAvailability(A.level,A.row,A.col,r);z._prefetches.push(Q);t=()=>{z._prefetches.removeUnordered(Q)};Q.then(t,t)}}}}_initializeTilemapDefinition(){if(this.layer.parsedUrl){var {parsedUrl:A,apiKey:I,customParameters:n}=this.layer;this._tilemapCache.clear();
this._tmpTilemapDefinition={service:{url:A.path,query:G.objectToQuery({...A.query,...n,token:I??A.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}}_tilemapFromCache(A,I,n,t){t.level=A;t.row=I-I%this.size;t.col=n-n%this.size;A=y.tilemapDefinitionId(t);return this._tilemapCache.get(A)}get test(){const A=this;return{get prefetchingEnabled(){return A._prefetchingEnabled},set prefetchingEnabled(I){A._prefetchingEnabled=I},hasTilemap(I,
n,t){return!!A._tilemapFromCache(I,n,t,A._tmpTilemapDefinition)}}}};d.TilemapCache._maxPrefetch=4;d.TilemapCache._prefetches=new q({initialSize:z._maxPrefetch});a.__decorate([B.property({constructOnly:!0})],d.TilemapCache.prototype,"layer",void 0);a.__decorate([B.property({constructOnly:!0})],d.TilemapCache.prototype,"minLOD",void 0);a.__decorate([B.property({constructOnly:!0})],d.TilemapCache.prototype,"maxLOD",void 0);a.__decorate([B.property({constructOnly:!0})],d.TilemapCache.prototype,"request",
void 0);a.__decorate([B.property({constructOnly:!0})],d.TilemapCache.prototype,"size",void 0);d.TilemapCache=z=a.__decorate([H.subclass("esri.layers.support.TilemapCache")],d.TilemapCache);Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(d){d.ByteSizeUnit=void 0;var a=d.ByteSizeUnit||(d.ByteSizeUnit={});a[a.KILOBYTES=1024]="KILOBYTES";a[a.MEGABYTES=1048576]="MEGABYTES";a[a.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Tilemap":function(){define("exports ../../request ../../core/arrayUtils ../../core/Error ../../core/lang ../../core/typedArrayUtil ../../geometry/support/UintArray".split(" "),function(d,a,m,c,g,e,f){function l(k){if(k.service.tileServers?.length){var v=k.service.tileServers;v=`${v&&v.length?v[k.row%v.length]:k.service.url}/tilemap/${k.level}/${k.row}/${k.col}/${k.width}/${k.height}`}else v=`${k.service.url}/tilemap/${k.level}/${k.row}/${k.col}/${k.width}/${k.height}`;
(k=k.service.query)&&(v=`${v}?${k}`);return v}class q{constructor(k){this._validateJSON(k);const {location:v,data:D}=k;this.location=Object.freeze(g.clone(v));let G=k=!0;const B=f.newUintArray(Math.ceil(this.location.width*this.location.height/32));let u=0;for(let w=0;w<D.length;w++){const L=w%32;D[w]?(G=!1,B[u]|=1<<L):k=!1;31===L&&++u}G?(this._availability="unavailable",this.byteSize=40):k?(this._availability="available",this.byteSize=40):(this._availability=B,this.byteSize=40+e.estimateSize(B))}getAvailability(k,
v){if("unavailable"===this._availability||"available"===this._availability)return this._availability;k=(k-this.location.top)*this.location.width+(v-this.location.left);v=k>>5;const D=this._availability;return 0>v||v>D.length?"unknown":D[v]&1<<k%32?"available":"unavailable"}static fromDefinition(k,v){const D=k.service.request||a,{row:G,col:B,width:u,height:w}=k,L={query:{f:"json"}};v=v?{...L,...v}:L;return D(l(k),v).then(H=>H.data).catch(H=>{if(H&&H.details&&422===H.details.httpStatus)return{location:{top:G,
left:B,width:u,height:w},valid:!0,data:m.constant(u*w,0)};throw H;}).then(H=>{if(H.location&&(H.location.top!==G||H.location.left!==B||H.location.width!==u||H.location.height!==w))throw new c("tilemap:location-mismatch","Tilemap response for different location than requested",{response:H,definition:{top:G,left:B,width:u,height:w}});return q.fromJSON(H)})}static fromJSON(k){return Object.freeze(new q(k))}_validateJSON(k){if(!k?.location)throw new c("tilemap:missing-location","Location missing from tilemap response");
if(!1===k.valid)throw new c("tilemap:invalid","Tilemap response was marked as invalid");if(!k.data)throw new c("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(k.data))throw new c("tilemap:data-mismatch","Data must be an array of numbers");if(k.data.length!==k.location.width*k.location.height)throw new c("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");}}d.Tilemap=q;d.tilemapDefinitionId=function(k){return`${k.level}/${k.row}/${k.col}/${k.width}/${k.height}`};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/UintArray":function(){define(["exports","../../core/typedArrayUtil"],function(d,a){d.newUintArray=function(m,c=!1){return m<=a.nativeArrayMaxSize?c?Array(m).fill(0):Array(m):new Uint32Array(m)};d.uintArrayFrom=function(m){return(a.isArray(m)?m.length:m.byteLength/8)<=a.nativeArrayMaxSize?Array.from(m):new Uint32Array(m)};d.uintSubArray=function(m,c,g){return Array.isArray(m)?m.slice(c,c+g):m.subarray(c,c+g)};Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/imageUtils":function(){define(["exports"],function(d){let a=null;d.checkWebPSupport=function(m){if(a)return a;const c={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA\x3d\x3d",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA\x3d\x3d",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};
return a=new Promise(g=>{const e=new Image;e.onload=()=>{e.onload=e.onerror=null;g(0<e.width&&0<e.height)};e.onerror=()=>{e.onload=e.onerror=null;g(!1)};e.src="data:image/webp;base64,"+c[m]})};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/SpriteSource":function(){define(["../../request","../../core/Error","../../core/Logger","../../core/typedArrayUtil","../../core/urlUtils"],function(d,a,m,c,g){function e(l){var q=document.createElement("canvas");const k=q.getContext("2d");
q.width=l.width;q.height=l.height;k.drawImage(l,0,0,l.width,l.height);q=k.getImageData(0,0,l.width,l.height);return{width:l.width,height:l.height,data:new Uint8Array(q.data)}}class f{constructor(l,q){this._spriteSource=l;this._maxTextureSize=q;this.devicePixelRatio=1;this._spriteImageFormat="png";this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded";"url"===l.type&&l.spriteFormat&&(this._spriteImageFormat=l.spriteFormat);l.pixelRatio&&(this.devicePixelRatio=
l.pixelRatio);this.baseURL=l.spriteUrl}get spriteNames(){const l=[];for(const q in this._spritesData)l.push(q);l.sort();return l}getSpriteInfo(l){return this._spritesData?this._spritesData[l]:null}async load(l){if(this.baseURL){this.loadStatus="loading";try{await this._loadSprites(l),this.loadStatus="loaded"}catch{this.loadStatus="failed"}}else this.loadStatus="failed"}async _loadSprites(l){this._isRetina=1.15<this.devicePixelRatio;const {width:q,height:k,data:v,json:D}=await this._getSpriteData(this._spriteSource,
l);if((l=Object.keys(D))&&0!==l.length&&v){this._spritesData=D;this.width=q;this.height=k;l=Math.max(this._maxTextureSize,4096);if(q>l||k>l)throw l=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${l} pixels}`,m.getLogger("esri.layers.support.SpriteSource").error(l),new a("SpriteSource",l);for(let G=0;G<v.length;G+=4)l=v[G+3]/255,v[G]*=l,v[G+1]*=l,v[G+2]*=l;this.image=v}else this._spritesData=this.image=null,this.width=this.height=0}async _getSpriteData(l,q){if("image"===
l.type){if(1.15>this.devicePixelRatio){if(!l.spriteSource1x)throw new a("SpriteSource","no image data provided for low resolution sprites!");q=l.spriteSource1x.image;l=l.spriteSource1x.json}else{if(!l.spriteSource2x)throw new a("SpriteSource","no image data provided for high resolution sprites!");q=l.spriteSource2x.image;l=l.spriteSource2x.json}return"width"in q&&"height"in q&&"data"in q&&(c.isArrayBuffer(q.data)||c.isUint8ClampedArray(q.data))?{width:q.width,height:q.height,data:new Uint8Array(q.data),
json:l}:{...e(q),json:l}}l=g.urlToObject(this.baseURL);const k=l.query?"?"+g.objectToQuery(l.query):"",v=this._isRetina?"@2x":"",D=`${l.path}${v}.${this._spriteImageFormat}${k}`,[G,B]=await Promise.all([d(`${l.path}${v}.json${k}`,q),d(D,{responseType:"image",...q})]);return{...e(B.data),json:G.data}}}return f})},"esri/layers/support/vectorTileLayerLoader":function(){define("exports ../../request ../../core/lang ../../core/promiseUtils ../../core/urlUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../views/2d/engine/vectorTiles/style/VectorTileSource".split(" "),
function(d,a,m,c,g,e,f,l){function q(...B){let u=void 0;for(const w of B)null!=w&&(g.isProtocolRelative(w)?u&&=u.split("://")[0]+":"+w.trim():u=g.isAbsolute(w)?w:g.join(u,w));return u?g.removeTrailingSlash(u):void 0}async function k(B,u,w,L,H){c.throwIfAborted(H);let J,y;if("string"===typeof w){w=g.normalize(w);var z=await a(w,{...H,responseType:"json",query:{f:"json",...H?.query}});z.ssl&&(J&&=J.replace(/^http:/i,"https:"),y&&=y.replace(/^http:/i,"https:"));y=J=w}else null!=w&&(z={data:w},J=w.jsonUrl||
null,y=L);if((z=z?.data)&&"sources"in z&&z.sources)return B.styleUrl=J||null,D(B,z,y,H);if(!(z&&"sources"in z&&z.sources))return B.sourceUrl?G(B,z,y,!1,u,H):(B.sourceUrl=J||null,G(B,z,y,!0,u,H));throw Error("You must specify the URL or the JSON for a service or for a style.");}function v(B){return"object"===typeof B&&!!B&&"tilejson"in B&&null!=B.tilejson}async function D(B,u,w,L){w=w?g.removeFile(w):g.getAppBaseUrl();B.styleBase=w;B.style=u;u["sprite-format"]&&"webp"===u["sprite-format"].toLowerCase()&&
(B.spriteFormat="webp");const H=[];if(u.sources&&u.sources.esri){const J=u.sources.esri;J.url?await k(B,"esri",q(w,J.url),void 0,L):H.push(k(B,"esri",J,w,L))}for(const J of Object.keys(u.sources))"esri"!==J&&"vector"===u.sources[J].type&&(u.sources[J].url?H.push(k(B,J,q(w,u.sources[J].url),void 0,L)):u.sources[J].tiles&&H.push(k(B,J,u.sources[J],w,L)));await Promise.all(H)}async function G(B,u,w,L,H,J){w=w?g.removeTrailingSlash(w)+"/":g.getAppBaseUrl();if(u.hasOwnProperty("tileInfo"))var y=u;else{y=
{xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100,latestWkid:3857}};var z=null;if(v(u)){var {bounds:A}=u;A&&(z=f.geographicToWebMercator({x:A[0],y:A[1],spatialReference:m.clone(e.wgs84)}),A=f.geographicToWebMercator({x:A[2],y:A[3],spatialReference:m.clone(e.wgs84)}),z={xmin:z.x,ymin:z.y,xmax:A.x,ymax:A.y,spatialReference:m.clone(e.webMercator)})}null===z&&(z=y);A=78271.51696400007;var I=2.958287637957775E8,n=[],
t=u.hasOwnProperty("maxzoom")&&null!=u.maxzoom?+u.maxzoom:22;for(let r=0;r<=t;r++)n.push({level:r,scale:I,resolution:A}),A/=2,I/=2;y={capabilities:"TilesOnly",initialExtent:z,fullExtent:y,minScale:0,maxScale:0,tiles:u.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:n,spatialReference:m.clone(e.webMercator)}}}z=new l(H,g.addQueryParameters(w,J?.query??{}),y);if(!L&&B.primarySourceName in B.sourceNameToSource){A=B.sourceNameToSource[B.primarySourceName];
if(!A.isCompatibleWith(z))return;null!=z.fullExtent&&(null!=A.fullExtent?A.fullExtent.union(z.fullExtent):A.fullExtent=z.fullExtent.clone());A.tileInfo&&z.tileInfo&&A.tileInfo.lods.length<z.tileInfo.lods.length&&(A.tileInfo=z.tileInfo)}L&&(B.sourceBase=w,B.source=u,B.validatedSource=y,B.primarySourceName=H);B.sourceNameToSource[H]=z;if(!v(B)&&"defaultStyles"in u&&!B.style){if(null==u.defaultStyles)throw Error();return"string"===typeof u.defaultStyles?k(B,"",q(w,u.defaultStyles,"root.json"),void 0,
J):k(B,"",u.defaultStyles,q(w,"root.json"),J)}}d.loadMetadata=async function(B,u){const w={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[L,H]="string"===typeof B?[B,null]:[null,B.jsonUrl];await k(w,"esri",B,H,u);return{layerDefinition:w.validatedSource,url:L,serviceUrl:w.sourceUrl,style:w.style,styleUrl:w.styleUrl,spriteUrl:w.style.sprite&&q(w.styleBase,w.style.sprite),spriteFormat:w.spriteFormat,
glyphsUrl:w.style.glyphs&&q(w.styleBase,w.style.glyphs),sourceNameToSource:w.sourceNameToSource,primarySourceName:w.primarySourceName}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/VectorTileSource":function(){define("../../../../../core/lang ../../../../../core/urlUtils ../../../../../geometry/Extent ../../../../../layers/support/TileInfo ../../../../../layers/support/TilemapCache ../TilemapIndex ../TilemapRequest ./VectorTilesRequestManager".split(" "),
function(d,a,m,c,g,e,f,l){class q{constructor(k,v,D){this.initialExtent=this.fullExtent=this.capabilities=this.tileInfo=this.tilemap=null;this.name=k;this.sourceUrl=v;k=a.urlToObject(this.sourceUrl);v=d.clone(D);var G=v.tiles;if(k)for(var B=0;B<G.length;B++){var u=a.urlToObject(G[B]);u&&(a.isAbsolute(u.path)||(u.path=a.join(k.path,u.path)),G[B]=a.addQueryParameters(u.path,{...k.query,...u.query}))}this.tileServers=G;B=D.capabilities&&D.capabilities.split(",").map(w=>w.toLowerCase().trim());G=!0===
D?.exportTilesAllowed;B=!0===B?.includes("tilemap");u=G&&D.hasOwnProperty("maxExportTilesCount")?D.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:G,supportsTileMap:B},exportTiles:G?{maxExportTilesCount:+u}:null};this.tileInfo=c.fromJSON(v.tileInfo);G=D.tileMap?a.addQueryParameters(a.join(k.path,D.tileMap),k.query??{}):null;B?(this.type="vector-tile",this.tilemap=new f(new g.TilemapCache({layer:{parsedUrl:k,tileInfo:this.tileInfo},minLOD:v.minLOD??this.tileInfo.lods[0].level,
maxLOD:v.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}),G)):G&&(this.tilemap=new e(G));this.fullExtent=m.fromJSON(D.fullExtent);this.initialExtent=m.fromJSON(D.initialExtent)}destroy(){this.tilemap?.destroy()}async getRefKey(k,v){return await this.tilemap?.dataKey(k,v)??k}requestTile(k,v,D,G){return l.request(this.tileServers[v%this.tileServers.length],k,v,D,G)}isCompatibleWith(k){var v=this.tileInfo;k=k.tileInfo;if(!v.spatialReference.equals(k.spatialReference)||!v.origin.equals(k.origin)||
Math.round(v.dpi)!==Math.round(k.dpi))return!1;v=v.lods;k=k.lods;const D=Math.min(v.length,k.length);for(let G=0;G<D;G++){const B=v[G],u=k[G];if(B.level!==u.level||Math.round(B.scale)!==Math.round(u.scale))return!1}return!0}}return q})},"esri/views/2d/engine/vectorTiles/TilemapIndex":function(){define(["../../../../request","../../../../core/promiseUtils","../../tiling/TileKey"],function(d,a,m){class c{constructor(g){this.url=g}destroy(){this._tileIndexPromise=null}async fetchTileIndex(){this._tileIndexPromise||
(this._tileIndexPromise=d(this.url).then(g=>g.data.index));return this._tileIndexPromise}async dataKey(g,e){const f=await this.fetchTileIndex();a.throwIfAborted(e);return this._getIndexedDataKey(f,g)}_getIndexedDataKey(g,e){const f=[e];if(0>e.level||0>e.row||0>e.col||0<e.row>>e.level||0<e.col>>e.level)return null;for(;0!==e.level;)e=new m(e.level-1,e.row>>1,e.col>>1,e.world),f.push(e);e=f.pop();let l,q;if(1===g)return e;for(;f.length;)if(l=f.pop(),q=(l.col&1)+((l.row&1)<<1),g){if(0===g[q]){e=null;
break}if(1===g[q]){e=l;break}e=l;g=g[q]}return e}}return c})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],function(d){class a{static getId(m,c,g,e){return"object"===typeof m?`${m.level}/${m.row}/${m.col}/${m.world}`:`${m}/${c}/${g}/${e}`}constructor(m,c,g,e){this.set(m,c,g,e)}get key(){return this}get id(){return this.toString()}set id(m){this.set(m)}get hash(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}acquire(m,c,g,e){this.set(m,
c,g,e)}contains(m){const c=m.level-this.level;return 0<=c&&this.row===m.row>>c&&this.col===m.col>>c&&this.world===m.world}containsChild(m){const c=m.level-this.level;return 0<c&&this.row===m.row>>c&&this.col===m.col>>c&&this.world===m.world}equals(m){return this.level===m.level&&this.row===m.row&&this.col===m.col&&this.world===m.world}clone(){return new a(this)}release(){this.world=this.col=this.row=this.level=0}set(m,c,g,e){if(null==m)this.world=this.col=this.row=this.level=0;else if("object"===
typeof m)this.level=m.level||0,this.row=m.row||0,this.col=m.col||0,this.world=m.world||0;else if("string"===typeof m){const [f,l,q,k]=m.split("/");this.level=parseFloat(f);this.row=parseFloat(l);this.col=parseFloat(q);this.world=parseFloat(k)}else this.level=+m,this.row=+c,this.col=+g,this.world=+e||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?null:new a(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(m,c){return`${this.level}/${this.row+
c}/${this.col+m}/${this.world}`}getChildKeys(){const m=this.level+1,c=this.row<<1,g=this.col<<1,e=this.world;return[new a(m,c,g,e),new a(m,c,g+1,e),new a(m,c+1,g,e),new a(m,c+1,g+1,e)]}compareRowMajor(m){return this.row<m.row?-1:this.row>m.row?1:this.col<m.col?-1:this.col>m.col?1:0}}a.pool=new d(a,null,null,25,50);return a})},"esri/views/2d/engine/vectorTiles/TilemapRequest":function(){define(["../../../../request","../../../../core/maybe","../../../../core/promiseUtils","../../tiling/TileKey"],function(d,
a,m,c){class g{constructor(e,f){this._tilemap=e;this._tileIndexUrl=f}destroy(){this._tilemap=a.destroyMaybe(this._tilemap);this._tileIndexPromise=null}async fetchTileIndex(e){this._tileIndexPromise||(this._tileIndexPromise=d(this._tileIndexUrl,{query:{...e?.query}}).then(f=>f.data.index));return this._tileIndexPromise}dataKey(e,f){const {level:l,row:q,col:k}=e,v=new c(e);return this._tilemap.fetchAvailabilityUpsample(l,q,k,v,f).then(()=>{v.world=e.world;return v}).catch(D=>{if(m.isAbortError(D))throw D;
return null})}}return g})},"esri/views/2d/engine/vectorTiles/style/VectorTilesRequestManager":function(){define("exports ../../../../../request ../../../../../core/lang ../../../../../core/MapUtils ../../../../../core/promiseUtils ../../../../../core/urlUtils".split(" "),function(d,a,m,c,g,e){function f(k,v){return c.getOrCreateMapValue(q,k,()=>new l(k)).getData(v).finally(()=>q.delete(k))}class l{constructor(k){this._tileUrl=k;this._abortController=this._promise=null;this._abortOptions=[]}getData(k){if(null==
this._promise||g.isAborted(this._abortController?.signal))this._promise=this._makeRequest(this._tileUrl);const v=this._abortOptions;v.push(k);g.onAbort(k,()=>{v.every(D=>g.isAborted(D))&&this._abortController.abort()});return this._promise.then(D=>m.clone(D))}async _makeRequest(k){this._abortController=new AbortController;({data:k}=await a(k,{responseType:"array-buffer",signal:this._abortController.signal}));return k}}const q=new Map;d.request=function(k,v,D,G,B){k=e.urlToObject(k);const u=k.query;
if(u)for(const [w,L]of Object.entries(u))switch(L){case "{x}":u[w]=G.toString();break;case "{y}":u[w]=D.toString();break;case "{z}":u[w]=v.toString()}v=e.addQueryParameters(k.path.replaceAll(/\{z\}/gi,v.toString()).replaceAll(/\{y\}/gi,D.toString()).replaceAll(/\{x\}/gi,G.toString()),{...k.query});return f(v,B)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/jsonContext":function(){define(["exports","../../core/urlUtils","../Portal"],function(d,a,m){function c(g,
e){return{origin:e,url:a.urlToObject(g.itemUrl),portal:g.portal||m.getDefault(),portalItem:g}}d.createForItemRead=function(g,e){return{...c(g,e),readResourcePaths:[]}};d.createForItemWrite=function(g,e,f){const l=a.urlToObject(g.itemUrl);return{...c(g,e),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:l?{rootPath:l.path,writtenUrls:[]}:null,resources:f?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/engine/vectorTiles/tileInfoUtils":function(){define(["exports","../../../../geometry/Point","../../../../layers/support/LOD","../../../../layers/support/TileInfo"],function(d,a,m,c){d.areSchemasOverlapping=function(g,e){if(g===e)return!0;if(null==g&&null!=e||null!=g&&null==e||null==g||null==e||!g.spatialReference.equals(e.spatialReference)||g.dpi!==e.dpi)return!1;var f=g.origin;const l=e.origin;if(1E-6<=Math.abs(f.x-l.x)||1E-6<=Math.abs(f.y-l.y))return!1;g.lods[0].scale>e.lods[0].scale?
(f=g,g=e):f=e;for(e=f.lods[0].scale;e>=g.lods[g.lods.length-1].scale-1E-6;e/=2)if(1E-6>Math.abs(e-g.lods[0].scale))return!0;return!1};d.unionTileInfos=function(g,e){if(g===e)return g;if(null==g&&null!=e)return e;if(null!=g&&null==e)return g;if(null==g||null==e)return null;const f=g.size[0],l=g.format,q=g.dpi,k=new a({x:g.origin.x,y:g.origin.y}),v=g.spatialReference;var D=g.lods[0].scale>e.lods[0].scale?g.lods[0]:e.lods[0];g=(g.lods[g.lods.length-1].scale<=e.lods[e.lods.length-1].scale?g.lods[g.lods.length-
1]:e.lods[e.lods.length-1]).scale;e=[];let G=D.scale;D=D.resolution;let B=0;for(;G>g;)e.push(new m({level:B,resolution:D,scale:G})),B++,G/=2,D/=2;return new c({size:[f,f],dpi:q,format:l||"pbf",origin:k,lods:e,spatialReference:v})};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleDefinition","./StyleLayer"],function(d,a){class m{constructor(c){this._style=c;this.backgroundBucketIds=[];this._uidToLayer=
new Map;this._layerByName={};this._runningId=0;c.layers||(c.layers=[]);this.version=parseFloat(c.version);if(this.layers=c.layers.map((g,e,f)=>this._create(g,e,f)).filter(g=>!!g))for(c=0;c<this.layers.length;c++){const g=this.layers[c];this._layerByName[g.id]=g;this._uidToLayer.set(g.uid,g);g.type===d.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(g.id)}this._identifyRefLayers()}isPainterDataDriven(c){return(c=this._layerByName[c])?c.isPainterDataDriven():!1}getStyleLayerId(c){return c>=
this.layers.length?null:this.layers[c].id}getStyleLayerByUID(c){return this._uidToLayer.get(c)??null}getStyleLayerIndex(c){return(c=this._layerByName[c])?this.layers.indexOf(c):-1}setStyleLayer(c,g){if(c?.id){var e=this._style;null!=g&&g>=this.layers.length&&(g=this.layers.length-1);var f=!0,l;if(l=this._layerByName[c.id]){const q=this.layers.indexOf(l);g||=q;g===q?(f=!1,l=m._recreateLayer(c,l),this.layers[g]=l,e.layers[g]=c):(this.layers.splice(q,1),e.layers.splice(q,1),l=this._create(c,g,this.layers),
this.layers.splice(g,0,l),e.layers.splice(g,0,c))}else l=this._create(c,g,this.layers),!g||g>=this.layers.length?(this.layers.push(l),e.layers.push(c)):(this.layers.splice(g,0,l),e.layers.splice(g,0,c));this._layerByName[c.id]=l;this._uidToLayer.set(l.uid,l);f&&this._recomputeZValues();this._identifyRefLayers()}}getStyleLayer(c){return(c=this._layerByName[c])?{type:c.typeName,id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,maxzoom:c.maxzoom,filter:c.filter,layout:c.layout,paint:c.paint}:
null}deleteStyleLayer(c){const g=this._layerByName[c];g&&(delete this._layerByName[c],this._uidToLayer.delete(g.uid),c=this.layers.indexOf(g),this.layers.splice(c,1),this._style.layers.splice(c,1),this._recomputeZValues(),this._identifyRefLayers())}getLayerById(c){return this._layerByName[c]}getLayoutProperties(c){return(c=this._layerByName[c])?c.layout:null}getPaintProperties(c){return(c=this._layerByName[c])?c.paint:null}setPaintProperties(c,g){if(c=this._layerByName[c]){var e=m._recreateLayer({type:c.typeName,
id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,maxzoom:c.maxzoom,filter:c.filter,layout:c.layout,paint:g},c),f=this.layers.indexOf(c);this.layers[f]=e;this._style.layers[f].paint=g;this._layerByName[c.id]=e;this._uidToLayer.set(c.uid,e)}}setLayoutProperties(c,g){if(c=this._layerByName[c]){var e=m._recreateLayer({type:c.typeName,id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,maxzoom:c.maxzoom,filter:c.filter,layout:g,paint:c.paint},c),f=this.layers.indexOf(c);
this.layers[f]=e;this._style.layers[f].layout=g;this._layerByName[c.id]=e;this._uidToLayer.set(c.uid,e)}}setStyleLayerVisibility(c,g){if(c=this._layerByName[c]){var e=c.layout||{};e.visibility=g;g=m._recreateLayer({type:c.typeName,id:c.id,source:c.source,"source-layer":c.sourceLayer,minzoom:c.minzoom,maxzoom:c.maxzoom,filter:c.filter,layout:e,paint:c.paint},c);var f=this.layers.indexOf(c);this.layers[f]=g;this._style.layers[f].layout=e;this._layerByName[c.id]=g;this._uidToLayer.set(c.uid,g)}}getStyleLayerVisibility(c){return(c=
this._layerByName[c])?c.layout?.visibility??"visible":"none"}_recomputeZValues(){const c=this.layers,g=1/(c.length+1);for(let e=0;e<c.length;e++)c[e].z=1-(1+e)*g}_identifyRefLayers(){const c=[],g=[];let e=0;for(const q of this.layers){const k=q.layout;if(q.type===d.StyleLayerType.FILL){var f=q,l=q.source+"|"+q.sourceLayer;l+="|"+(k?.visibility??"");l+="|"+q.minzoom;l+="|"+q.maxzoom;l+="|"+JSON.stringify(q.filter);if(f.hasDataDrivenFill||f.hasDataDrivenOutline)l+="|"+e;c.push({key:l,layer:q})}else if(q.type===
d.StyleLayerType.LINE){f=q;l=q.paint;l=null!=l&&(null!=l["line-pattern"]||null!=l["line-dasharray"]);let v=q.source+"|"+q.sourceLayer;v+="|"+(k?.visibility??"");v+="|"+q.minzoom;v+="|"+q.maxzoom;v+="|"+JSON.stringify(q.filter);v+="|"+(void 0!==k?k["line-cap"]:"");v+="|"+(void 0!==k?k["line-join"]:"");if(f.hasDataDrivenLine||l)v+="|"+e;g.push({key:v,layer:q})}++e}this._assignRefLayers(c);this._assignRefLayers(g)}_assignRefLayers(c){c.sort((k,v)=>k.key<v.key?-1:k.key>v.key?1:0);let g,e;const f=c.length;
for(let k=0;k<f;k++){const v=c[k];if(v.key===g)v.layer.refLayerId=e;else if(g=v.key,e=v.layer.id,v.layer.type===d.StyleLayerType.FILL){if(!v.layer.getPaintProperty("fill-outline-color"))for(var l=k+1;l<f;l++){var q=c[l];if(q.key===g){if(q.layer.getPaintProperty("fill-outline-color")){c[k]=q;c[l]=v;e=q.layer.id;break}}else break}}else if(v.layer.type===d.StyleLayerType.LINE)for(l=v.layer,q=k+1;q<f;q++){const D=c[q];if(D.key!==g)break;const G=D.layer;if(l.canUseThinTessellation&&!G.canUseThinTessellation||
!l.canUseThinTessellation&&(G.getPaintProperty("line-pattern")||G.getPaintProperty("line-dasharray")))l=G,c[k]=D,c[q]=v,e=D.layer.id}}}_create(c,g,e){g=1-1/(e.length+1)*(1+g);e=this._runningId++;switch(c.type){case "background":return new a.BackgroundStyleLayer(d.StyleLayerType.BACKGROUND,c,g,e);case "fill":return new a.FillStyleLayer(d.StyleLayerType.FILL,c,g,e);case "line":return new a.LineStyleLayer(d.StyleLayerType.LINE,c,g,e);case "symbol":return new a.SymbolStyleLayer(d.StyleLayerType.SYMBOL,
c,g,e);case "raster":console.warn(`Unsupported vector tile raster layer ${c.id}`);break;case "circle":return new a.CircleStyleLayer(d.StyleLayerType.CIRCLE,c,g,e)}return null}static _recreateLayer(c,g){switch(c.type){case "background":return new a.BackgroundStyleLayer(d.StyleLayerType.BACKGROUND,c,g.z,g.uid);case "fill":return new a.FillStyleLayer(d.StyleLayerType.FILL,c,g.z,g.uid);case "line":return new a.LineStyleLayer(d.StyleLayerType.LINE,c,g.z,g.uid);case "symbol":return new a.SymbolStyleLayer(d.StyleLayerType.SYMBOL,
c,g.z,g.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${c.id}`);break;case "circle":return new a.CircleStyleLayer(d.StyleLayerType.CIRCLE,c,g.z,g.uid)}return null}}return m})},"esri/views/2d/engine/vectorTiles/style/StyleDefinition":function(){define(["exports","../../../../../symbols/cim/enums"],function(d,a){d.StyleLayerType=void 0;(function(c){c[c.BACKGROUND=0]="BACKGROUND";c[c.FILL=1]="FILL";c[c.LINE=2]="LINE";c[c.SYMBOL=3]="SYMBOL";c[c.CIRCLE=4]="CIRCLE"})(d.StyleLayerType||
(d.StyleLayerType={}));d.Visibility=void 0;(function(c){c[c.VISIBLE=0]="VISIBLE";c[c.NONE=1]="NONE"})(d.Visibility||(d.Visibility={}));d.SymbolPlacement=void 0;(function(c){c[c.POINT=0]="POINT";c[c.LINE=1]="LINE";c[c.LINE_CENTER=2]="LINE_CENTER"})(d.SymbolPlacement||(d.SymbolPlacement={}));d.RotationAlignment=void 0;(function(c){c[c.MAP=0]="MAP";c[c.VIEWPORT=1]="VIEWPORT";c[c.AUTO=2]="AUTO"})(d.RotationAlignment||(d.RotationAlignment={}));d.TextJustification=void 0;(function(c){c[c.AUTO=0]="AUTO";
c[c.LEFT=1]="LEFT";c[c.CENTER=2]="CENTER";c[c.RIGHT=3]="RIGHT"})(d.TextJustification||(d.TextJustification={}));d.SymbolAnchor=void 0;(function(c){c[c.CENTER=0]="CENTER";c[c.LEFT=1]="LEFT";c[c.RIGHT=2]="RIGHT";c[c.TOP=3]="TOP";c[c.BOTTOM=4]="BOTTOM";c[c.TOP_LEFT=5]="TOP_LEFT";c[c.TOP_RIGHT=6]="TOP_RIGHT";c[c.BOTTOM_LEFT=7]="BOTTOM_LEFT";c[c.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"})(d.SymbolAnchor||(d.SymbolAnchor={}));d.TextTransform=void 0;(function(c){c[c.NONE=0]="NONE";c[c.UPPERCASE=1]="UPPERCASE";c[c.LOWERCASE=
2]="LOWERCASE"})(d.TextTransform||(d.TextTransform={}));d.TranslateAnchor=void 0;(function(c){c[c.MAP=0]="MAP";c[c.VIEWPORT=1]="VIEWPORT"})(d.TranslateAnchor||(d.TranslateAnchor={}));d.TextWritingMode=void 0;(function(c){c[c.HORIZONTAL=0]="HORIZONTAL";c[c.VERTICAL=1]="VERTICAL"})(d.TextWritingMode||(d.TextWritingMode={}));class m{}m.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE}};m.fillLayoutDefinition={visibility:{type:"enum",values:["visible",
"none"],default:d.Visibility.VISIBLE}};m.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:a.CapType.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:a.JoinType.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};m.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE},
"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:d.SymbolPlacement.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:d.SymbolAnchor.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},
"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:d.RotationAlignment.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",
values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:d.SymbolAnchor.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:d.TextJustification.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},
"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:d.RotationAlignment.AUTO},"text-size":{type:"number",minimum:0,default:16},
"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:d.TextTransform.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[d.TextWritingMode.HORIZONTAL]}};m.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:d.Visibility.VISIBLE}};m.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}};
m.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:d.TranslateAnchor.MAP}};m.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",
default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:d.TranslateAnchor.MAP},"line-width":{type:"number",minimum:0,default:1}};m.symbolPaintDefinition={"icon-color":{type:"color",
default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:d.TranslateAnchor.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},
"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:d.TranslateAnchor.MAP}};m.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",
minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};m.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",
minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:d.TranslateAnchor.MAP}};d.StyleDefinition=m;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../geometry/support/aaBoundingRect ../enums ../GeometryUtils ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),
function(d,a,m,c,g,e,f,l,q,k,v,D,G){function B(n){n=n?.getGeometry();if(null==n)return null;let t=Infinity,r=Infinity,C=-Infinity,E=-Infinity;for(const M of n)if(M)for(const O of M)t=Math.min(t,O.x),r=Math.min(r,O.y),C=Math.max(C,O.x),E=Math.max(E,O.y);return a.fromValues(t,r,C,E)}d.CapType=void 0;(function(n){n[n.BUTT=0]="BUTT";n[n.ROUND=1]="ROUND";n[n.SQUARE=2]="SQUARE";n[n.UNKNOWN=4]="UNKNOWN"})(d.CapType||(d.CapType={}));class u{constructor(n,t,r,C,E,M){this.layer=n;this.feature=t;this.bounds=
r;this.normalizationRatio=C;this.normalizationOffsetX=E;this.normalizationOffsetY=M}}class w{constructor(n,t,r,C){this.type=n;this.typeName=t.type;this.id=t.id;this.source=t.source;this.sourceLayer=t["source-layer"];this.minzoom=t.minzoom;this.maxzoom=t.maxzoom;this.filter=t.filter;this.layout=t.layout;this.paint=t.paint;this.z=r;this.uid=C;switch(n){case v.StyleLayerType.BACKGROUND:this._layoutDefinition=v.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=v.StyleDefinition.backgroundPaintDefinition;
break;case v.StyleLayerType.FILL:this._layoutDefinition=v.StyleDefinition.fillLayoutDefinition;this._paintDefinition=v.StyleDefinition.fillPaintDefinition;break;case v.StyleLayerType.LINE:this._layoutDefinition=v.StyleDefinition.lineLayoutDefinition;this._paintDefinition=v.StyleDefinition.linePaintDefinition;break;case v.StyleLayerType.SYMBOL:this._layoutDefinition=v.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=v.StyleDefinition.symbolPaintDefinition;break;case v.StyleLayerType.CIRCLE:this._layoutDefinition=
v.StyleDefinition.circleLayoutDefinition,this._paintDefinition=v.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=k.createFilter(this.filter)}getLayoutProperty(n){return this._layoutProperties[n]}getPaintProperty(n){return this._paintProperties[n]}getLayoutValue(n,t,r){let C;const E=this._layoutProperties[n];E&&
(C=E.getValue(t,r));void 0===C&&(C=this._layoutDefinition[n]["default"]);return C}getPaintValue(n,t,r){let C;const E=this._paintProperties[n];E&&(C=E.getValue(t,r));void 0===C&&(C=this._paintDefinition[n]["default"]);return C}isPainterDataDriven(){const n=this._paintProperties;if(n)for(const t in n)if(n[t].isDataDriven)return!0;return!1}isIntersectingFeature(n,t,r,C,E,M,O){return!1}getFeatureInflatedBounds(n,t,r,C){return null}_parseLayout(n){const t={};for(const r in n){const C=this._layoutDefinition[r];
C&&(t[r]=new D(C,n[r]))}return t}_parsePaint(n){const t={};for(const r in n){const C=this._paintDefinition[r];C&&(t[r]=new D(C,n[r]))}return t}computeAttributesKey(n,t,r,C){let E=0,M=0;for(const O of t){t=3;if(!O||O!==C){const {isLayout:Q,isOptional:V}=r[O];t=Q?this.getLayoutProperty(O):this.getPaintProperty(O);t=t?.interpolator?2:t?.isDataDriven?1:V&&!t?3:0}M|=t<<E;E+=2}return M<<3|n}}class L extends w{constructor(n,t,r,C){super(n,t,r,C);this.backgroundMaterial=new g.VTLBackgroundMaterial(this.computeAttributesKey(m.ShaderProgramType.BACKGROUND,
g.VTLBackgroundMaterial.ATTRIBUTES,g.VTLBackgroundMaterial.ATTRIBUTES_INFO))}}class H extends w{constructor(n,t,r,C){super(n,t,r,C);n=this.getPaintProperty("fill-color");t=this.getPaintProperty("fill-opacity");r=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=n?.isDataDriven;this.hasDataDrivenOpacity=t?.isDataDriven;this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||r?.isDataDriven;t=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!t;this.hasDataDrivenOutlineColor=
t?.isDataDriven;this.hasDataDrivenOutline=t?t.isDataDriven:n?n.isDataDriven:!1;this.hasDataDrivenOutline=(t?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity;this.fillMaterial=new f.VTLFillMaterial(this.computeAttributesKey(m.ShaderProgramType.FILL,f.VTLFillMaterial.ATTRIBUTES,f.VTLFillMaterial.ATTRIBUTES_INFO));this.outlineMaterial=new f.VTLOutlineMaterial(this.computeAttributesKey(m.ShaderProgramType.OUTLINE,this.outlineUsesFillColor?f.VTLOutlineMaterial.ATTRIBUTES_FILL:
f.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?f.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:f.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}getFeatureInflatedBounds(n,t,r,C){r=B(n);if(!r)return null;n=this.getPaintValue("fill-translate",t,n);C*=Math.max(n[0],n[1]);r[0]-=C;r[2]-=C;r[1]+=C;r[3]+=C;return r}isIntersectingFeature(n,t,r,C,E,M,O){const Q=C.getGeometry();if(!Q)return!1;const V=8/O.normalizationRatio;n=n/O.normalizationRatio+O.normalizationOffsetX;
t=t/O.normalizationRatio+O.normalizationOffsetY;C=c.translateAnchor(this.getPaintValue("fill-translate",E,C),this.getPaintValue("fill-translate-anchor",E,C),M,8);n-=V*C.x;t-=V*C.y;return c.pointInPolygon(n,t,Q)?!0:c.distanceFromToPolylineWithinThreshold(n,t,Q,V*r)}}class J extends w{constructor(n,t,r,C){super(n,t,r,C);n=this.getPaintProperty("line-pattern");this.lineMaterial=new l.VTLLineMaterial(this.computeAttributesKey(m.ShaderProgramType.LINE,l.VTLLineMaterial.ATTRIBUTES,l.VTLLineMaterial.ATTRIBUTES_INFO,
n?"line-dasharray":""));this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||this.getPaintProperty("line-color")?.isDataDriven||this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven;
this.canUseThinTessellation=!1;!this.hasDataDrivenLine&&(n=this.getPaintProperty("line-width"),!n||"number"===typeof n&&.5*n<G.thinLineHalfWidthThreshold)&&(n=this.getPaintProperty("line-offset"),!n||"number"===typeof n&&0===n)&&(this.canUseThinTessellation=!0)}getDashKey(n,t){switch(t){case d.CapType.BUTT:t="Butt";break;case d.CapType.ROUND:t="Round";break;case d.CapType.SQUARE:t="Square";break;default:t="Butt"}return`dasharray-[${n.toString()}]-${t}`}getFeatureInflatedBounds(n,t,r,C){r=B(n);if(!r)return null;
var E=this.getPaintValue("line-translate",t,n);E=C*Math.max(E[0],E[1]);r[0]-=E;r[2]-=E;r[1]+=E;r[3]+=E;E=C*Math.abs(this.getPaintValue("line-offset",t,n)||0);n=this.getPaintValue("line-width",t,n);C*=n/2;r[0]-=E+C;r[1]-=E+C;r[2]+=E+C;r[3]+=E+C;return r}isIntersectingFeature(n,t,r,C,E,M,O){let Q=C.getGeometry();if(!Q)return!1;const V=8/O.normalizationRatio;n=n/O.normalizationRatio+O.normalizationOffsetX;t=t/O.normalizationRatio+O.normalizationOffsetY;M=c.translateAnchor(this.getPaintValue("line-translate",
E,C),this.getPaintValue("line-translate-anchor",E,C),M,8);n-=V*M.x;t-=V*M.y;M=V*this.getPaintValue("line-offset",E,C)||0;0!==M&&(Q=c.offsetLine(Q,-M));C=this.getPaintValue("line-width",E,C);return c.distanceFromToPolylineWithinThreshold(n,t,Q,V*(r+C/2))}}class y extends w{constructor(n,t,r,C){super(n,t,r,C);this.iconMaterial=new q.VTLIconMaterial(this.computeAttributesKey(m.ShaderProgramType.ICON,q.VTLIconMaterial.ATTRIBUTES,q.VTLIconMaterial.ATTRIBUTES_INFO));this.textMaterial=new q.VTLTextMaterial(this.computeAttributesKey(m.ShaderProgramType.TEXT,
q.VTLTextMaterial.ATTRIBUTES,q.VTLTextMaterial.ATTRIBUTES_INFO));this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven;this.hasDataDrivenText=this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||
this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class z extends w{constructor(n,t,r,C){super(n,t,r,C);this.circleMaterial=new e.VTLCircleMaterial(this.computeAttributesKey(m.ShaderProgramType.CIRCLE,e.VTLCircleMaterial.ATTRIBUTES,e.VTLCircleMaterial.ATTRIBUTES_INFO))}getFeatureInflatedBounds(n,t,r,C){r=B(n);if(!r)return null;var E=
this.getPaintValue("circle-translate",t,n);E=Math.max(E[0],E[1]);r[0]-=E;r[2]-=E;r[1]+=E;r[3]+=E;n=8*(this.getPaintValue("circle-radius",t,n)+this.getPaintValue("circle-stroke-width",t,n));C*=n/2;r[0]-=C;r[1]-=C;r[2]+=C;r[3]+=C;return r}isIntersectingFeature(n,t,r,C,E,M,O){var Q=C.getGeometry();if(!Q)return!1;const V=8/O.normalizationRatio;n=n/O.normalizationRatio+O.normalizationOffsetX;t=t/O.normalizationRatio+O.normalizationOffsetY;r*=V;M=c.translateAnchor(this.getPaintValue("circle-translate",
E,C),this.getPaintValue("circle-translate-anchor",E,C),M,V);C=V*(this.getPaintValue("circle-radius",E,C)+this.getPaintValue("circle-stroke-width",E,C));for(const X of Q)if(X)for(const Z of X)if(Q=Z.x+M.x,E=Z.y+M.y,Math.sqrt((n-Q)*(n-Q)+(t-E)*(t-E))-r<=C)return!0;return!1}}class A{constructor(n,t,r){this.allowOverlap=n.getLayoutValue("icon-allow-overlap",t);this.ignorePlacement=n.getLayoutValue("icon-ignore-placement",t);this.keepUpright=n.getLayoutValue("icon-keep-upright",t);this.optional=n.getLayoutValue("icon-optional",
t);this.rotationAlignment=n.getLayoutValue("icon-rotation-alignment",t);this.rotationAlignment===v.RotationAlignment.AUTO&&(this.rotationAlignment=r?v.RotationAlignment.MAP:v.RotationAlignment.VIEWPORT);r=n.getLayoutProperty("icon-anchor");r?.isDataDriven?this._anchorProp=r:this.anchor=n.getLayoutValue("icon-anchor",t);r=n.getLayoutProperty("icon-offset");r?.isDataDriven?this._offsetProp=r:this.offset=n.getLayoutValue("icon-offset",t);r=n.getLayoutProperty("icon-padding");r?.isDataDriven?this._paddingProp=
r:this.padding=n.getLayoutValue("icon-padding",t);r=n.getLayoutProperty("icon-rotate");r?.isDataDriven?this._rotateProp=r:this.rotate=n.getLayoutValue("icon-rotate",t);r=n.getLayoutProperty("icon-size");r?.isDataDriven?this._sizeProp=r:this.size=n.getLayoutValue("icon-size",t)}update(n,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(n,t));this._offsetProp&&(this.offset=this._offsetProp.getValue(n,t));this._paddingProp&&(this.padding=this._paddingProp.getValue(n,t));this._rotateProp&&(this.rotate=
this._rotateProp.getValue(n,t));this._sizeProp&&(this.size=this._sizeProp.getValue(n,t))}}class I{constructor(n,t,r){this.allowOverlap=n.getLayoutValue("text-allow-overlap",t);this.ignorePlacement=n.getLayoutValue("text-ignore-placement",t);this.keepUpright=n.getLayoutValue("text-keep-upright",t);this.optional=n.getLayoutValue("text-optional",t);this.rotationAlignment=n.getLayoutValue("text-rotation-alignment",t);this.rotationAlignment===v.RotationAlignment.AUTO&&(this.rotationAlignment=r?v.RotationAlignment.MAP:
v.RotationAlignment.VIEWPORT);r=n.getLayoutProperty("text-anchor");r?.isDataDriven?this._anchorProp=r:this.anchor=n.getLayoutValue("text-anchor",t);r=n.getLayoutProperty("text-justify");r?.isDataDriven?this._justifyProp=r:this.justify=n.getLayoutValue("text-justify",t);r=n.getLayoutProperty("text-letter-spacing");r?.isDataDriven?this._letterSpacingProp=r:this.letterSpacing=n.getLayoutValue("text-letter-spacing",t);r=n.getLayoutProperty("text-line-height");r?.isDataDriven?this._lineHeightProp=r:this.lineHeight=
n.getLayoutValue("text-line-height",t);r=n.getLayoutProperty("text-max-angle");r?.isDataDriven?this._maxAngleProp=r:this.maxAngle=n.getLayoutValue("text-max-angle",t);r=n.getLayoutProperty("text-max-width");r?.isDataDriven?this._maxWidthProp=r:this.maxWidth=n.getLayoutValue("text-max-width",t);r=n.getLayoutProperty("text-offset");r?.isDataDriven?this._offsetProp=r:this.offset=n.getLayoutValue("text-offset",t);r=n.getLayoutProperty("text-padding");r?.isDataDriven?this._paddingProp=r:this.padding=n.getLayoutValue("text-padding",
t);r=n.getLayoutProperty("text-rotate");r?.isDataDriven?this._rotateProp=r:this.rotate=n.getLayoutValue("text-rotate",t);r=n.getLayoutProperty("text-size");r?.isDataDriven?this._sizeProp=r:this.size=n.getLayoutValue("text-size",t);r=n.getLayoutProperty("text-writing-mode");r?.isDataDriven?this._writingModeProp=r:this.writingMode=n.getLayoutValue("text-writing-mode",t)}update(n,t){this._anchorProp&&(this.anchor=this._anchorProp.getValue(n,t));this._justifyProp&&(this.justify=this._justifyProp.getValue(n,
t));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(n,t));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(n,t));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(n,t));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(n,t));this._offsetProp&&(this.offset=this._offsetProp.getValue(n,t));this._paddingProp&&(this.padding=this._paddingProp.getValue(n,t));this._rotateProp&&(this.rotate=this._rotateProp.getValue(n,t));this._sizeProp&&
(this.size=this._sizeProp.getValue(n,t));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(n,t))}}d.BackgroundStyleLayer=L;d.CircleStyleLayer=z;d.FillStyleLayer=H;d.IconLayout=A;d.IndexItem=u;d.LineStyleLayer=J;d.StyleLayer=w;d.SymbolStyleLayer=y;d.TextLayout=I;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/enums":function(){define(["exports"],function(d){d.BucketType=void 0;(function(a){a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";
a[a.SYMBOL=3]="SYMBOL";a[a.CIRCLE=4]="CIRCLE"})(d.BucketType||(d.BucketType={}));d.ShaderProgramType=void 0;(function(a){a[a.BACKGROUND=0]="BACKGROUND";a[a.FILL=1]="FILL";a[a.OUTLINE=2]="OUTLINE";a[a.LINE=3]="LINE";a[a.ICON=4]="ICON";a[a.CIRCLE=5]="CIRCLE";a[a.TEXT=6]="TEXT";a[a.TILEINFO=7]="TILEINFO"})(d.ShaderProgramType||(d.ShaderProgramType={}));d.StyleUpdateType=void 0;(function(a){a[a.PAINTER_CHANGED=0]="PAINTER_CHANGED";a[a.LAYOUT_CHANGED=1]="LAYOUT_CHANGED";a[a.LAYER_CHANGED=2]="LAYER_CHANGED";
a[a.LAYER_REMOVED=3]="LAYER_REMOVED";a[a.SPRITES_CHANGED=4]="SPRITES_CHANGED"})(d.StyleUpdateType||(d.StyleUpdateType={}));Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(d,a,m,c){class g extends a.VTLMaterial{constructor(e){super(e)}geometryInfo(){return g.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}
g.ATTRIBUTES=[];g.GEOMETRY_LAYOUT=[new c.VertexElementDescriptor("a_pos",2,m.DataType.BYTE,0,2)];g.ATTRIBUTES_INFO={};d.VTLBackgroundMaterial=g;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define(["exports","../MemoryBuffer","./enums","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(d,a,m,c,g){class e{constructor(q){this._locations=new Map;this._key=q}get key(){return this._key}get type(){return this._key&
7}defines(){return[]}getStride(){this._layoutInfo||this._buildAttributesInfo();return this._stride}getAttributeLocations(){0===this._locations.size&&this._buildAttributesInfo();return this._locations}getLayoutInfo(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo}getEncodingInfos(){this._propertyEncodingInfo||this._buildAttributesInfo();return this._propertyEncodingInfo}getUniforms(){this._uniforms||this._buildAttributesInfo();return this._uniforms}getShaderHeader(){this._shaderHeader||
this._buildAttributesInfo();return this._shaderHeader}getShaderMain(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain}setDataUniforms(q,k,v,D,G){var B=this.getUniforms();for(const u of B){const {name:w,type:L,getValue:H}=u;B=H(v,k,D,G);if(null!==B)switch(L){case "float":q.setUniform1f(w,B);break;case "vec2":q.setUniform2fv(w,B);break;case "vec4":q.setUniform4fv(w,B)}}}encodeAttributes(q,k,v,D){const G=this.attributesInfo(),B=this.getEncodingInfos(),u=[];let w=0,L=0;for(const J of Object.keys(B)){var H=
B[J];const {type:y,precisionFactor:z,isLayout:A}=G[J],I=A?v.getLayoutProperty(J):v.getPaintProperty(J),n=I.interpolator?.getInterpolationRange(k);let t=0;for(const r of H){const {offset:C,bufferElementsToAdd:E}=r;if(0<E){for(H=0;H<E;H++)u.push(0);w+=L;L=r.bufferElementsToAdd}H=D??I.getValue(n?n[t]:k,q);switch(y){case m.EncodingType.R8_SIGNED:case m.EncodingType.R8_UNSIGNED:u[w]|=this._encodeByte(H*(z||1),8*C);break;case m.EncodingType.R16_SIGNED:case m.EncodingType.R16_UNSIGNED:u[w]|=this._encodeShort(H*
(z||1),8*C);break;case m.EncodingType.R8G8_SIGNED:case m.EncodingType.R8G8_UNSIGNED:u[w]|=this._encodeByte(H*(z||1),8*C);u[w]|=this._encodeByte(H*(z||1),8*C+8);break;case m.EncodingType.R16G16_SIGNED:case m.EncodingType.R16G16_UNSIGNED:u[w]|=this._encodeShort(H*(z||1),8*C);u[w]|=this._encodeShort(H*(z||1),8*C+16);break;case m.EncodingType.R8G8B8A8_SIGNED:case m.EncodingType.R8G8B8A8_UNSIGNED:u[w]|=this._encodeByte(H*(z||1),8*C);u[w]|=this._encodeByte(H*(z||1),8*C+8);u[w]|=this._encodeByte(H*(z||1),
8*C+16);u[w]|=this._encodeByte(H*(z||1),8*C+24);break;case m.EncodingType.R8G8B8A8_COLOR:u[w]=this._encodeColor(H);break;case m.EncodingType.R16G16B16A16_DASHARRAY:case m.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(w,u,H);break;default:throw Error("Unsupported encoding type");}t++}}return u}getAtributeState(q){const k=3+2*q;q=0|this._bit(k);return q|=this._bit(k+1)<<1}_buildAttributesInfo(){const q=[],k={};var v={},D=-1;const G=this.attributesInfo();var B=this.attributes();let u=-1;for(const J of B){u++;
B=this.getAtributeState(u);if(B===m.AttributeStatus.UNIFORM||B===m.AttributeStatus.UNUSED)continue;var w=G[J];const y=[];k[J]=y;w=w.type;for(let z=0;z<B;z++){const {dataType:A,bytesPerElement:I,count:n,normalized:t}=e._encodingInfo[w],r=I*n;var L=`${A}-${!0===t}`;let C=v[L],E=0;!C||4<C.count+n?(D++,C={dataIndex:D,count:0,offset:0},4!==n&&(v[L]=C),q.push({location:-1,name:"a_data_"+D,count:n,type:A,normalized:t}),E=Math.ceil(Math.max(r/4,1))):(L=q[C.dataIndex],L.count+=n,E=Math.ceil(Math.max(L.count*
I/4,1))-Math.ceil(Math.max(C.offset/4,1)));y.push({dataIndex:C.dataIndex,offset:C.offset,bufferElementsToAdd:E});C.offset+=r;C.count+=n}}for(const J of q)switch(J.type){case c.DataType.BYTE:case c.DataType.UNSIGNED_BYTE:J.count=4;break;case c.DataType.SHORT:case c.DataType.UNSIGNED_SHORT:J.count+=J.count%2}this._buildVertexBufferLayout(q);v=0;D=this._layoutInfo.geometry;for(var H of D)this._locations.set(H.name,v++);if(H=this._layoutInfo.opacity)for(const J of H)this._locations.set(J.name,v++);this._buildShaderInfo(q,
k);this._propertyEncodingInfo=k}_buildVertexBufferLayout(q){const k={},v=this.geometryInfo();let D=v[0].stride;if(0===q.length)k.geometry=v;else{const G=[];let B=D;for(const u of q)D+=f(u.type)*u.count;for(const u of v)G.push(new g.VertexElementDescriptor(u.name,u.count,u.type,u.offset,D,u.normalized));for(const u of q)G.push(new g.VertexElementDescriptor(u.name,u.count,u.type,B,D,u.normalized)),B+=f(u.type)*u.count;k.geometry=G}this.opacityInfo()&&(k.opacity=this.opacityInfo());this._layoutInfo=
k;this._stride=D}_buildShaderInfo(q,k){let v="\n",D="\n";const G=[];for(var B of q)v+=`attribute ${this._getType(B.count)} ${B.name};\n`;var u=this.attributes();q=this.attributesInfo();B=-1;for(const H of u){B++;const {name:J,type:y,precisionFactor:z,isLayout:A}=q[H];u=z&&1!==z?` * ${1/z}`:"";const {bytesPerElement:I,count:n}=e._encodingInfo[y];var w=t=>`a_data_${t.dataIndex}${l(n,t.offset,I)}`;switch(this.getAtributeState(B)){case m.AttributeStatus.UNIFORM:u=this._getType(n);var L=`u_${J}`;G.push({name:L,
type:u,getValue:(r,C,E,M)=>{E=A?r.getLayoutValue(H,C):r.getPaintValue(H,C);if(y===m.EncodingType.R16G16B16A16_DASHARRAY){r=r.getDashKey(E,r.getLayoutValue("line-cap",C));M=M.getMosaicItemPosition(r,!1);if(null==M)return null;const {tl:O,br:Q}=M;return[O[0],Q[1],Q[0],O[1]]}if(y===m.EncodingType.R16G16B16A16_PATTERN){M=M.getMosaicItemPosition(E,!H.includes("line-"));if(null==M)return null;const {tl:O,br:Q}=M;return[O[0],Q[1],Q[0],O[1]]}return y===m.EncodingType.R8G8B8A8_COLOR?(M=E[3],[M*E[0],M*E[1],
M*E[2],M]):E}});v+=`uniform ${u} ${L};\n`;D+=`${u} ${J} = ${L};\n`;break;case m.AttributeStatus.DATA_DRIVEN:L=w(k[H][0]);D+=`${this._getType(n)} ${J} = ${L}${u};\n`;break;case m.AttributeStatus.INTERPOLATED_DATA_DRIVEN:L=`u_t_${J}`;G.push({name:L,type:"float",getValue:(r,C,E,M)=>(A?r.getLayoutProperty(H):r.getPaintProperty(H)).interpolator.interpolationUniformValue(E,C)});v+=`uniform float ${L};\n`;const t=w(k[H][0]);w=w(k[H][1]);D+=`${this._getType(n)} ${J} = mix(${t}${u}, ${w}${u}, ${L});\n`}}this._shaderHeader=
v;this._shaderMain=D;this._uniforms=G}_bit(q){return(this._key&1<<q)>>q}_getType(q){switch(q){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");}_encodeColor(q){const k=255*q[3];return a.i8888to32(q[0]*k,q[1]*k,q[2]*k,k)}_encodePattern(q,k,v){if(v?.rect){var D=v.rect,G=v.width;v=v.height;k[q]=this._encodeShort(D.x+2,0);k[q]|=this._encodeShort(D.y+2+v,16);k[q+1]=this._encodeShort(D.x+2+G,0);k[q+1]|=this._encodeShort(D.y+2,16)}}_encodeByte(q,
k){return(q&255)<<k}_encodeShort(q,k){return(q&65535)<<k}}e._encodingInfo={[m.EncodingType.R8_SIGNED]:{dataType:c.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[m.EncodingType.R8_UNSIGNED]:{dataType:c.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[m.EncodingType.R16_SIGNED]:{dataType:c.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[m.EncodingType.R16_UNSIGNED]:{dataType:c.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[m.EncodingType.R8G8_SIGNED]:{dataType:c.DataType.BYTE,
bytesPerElement:1,count:2,normalized:!1},[m.EncodingType.R8G8_UNSIGNED]:{dataType:c.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[m.EncodingType.R16G16_SIGNED]:{dataType:c.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[m.EncodingType.R16G16_UNSIGNED]:{dataType:c.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[m.EncodingType.R8G8B8A8_SIGNED]:{dataType:c.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[m.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:c.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[m.EncodingType.R8G8B8A8_COLOR]:{dataType:c.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[m.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:c.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[m.EncodingType.R16G16B16A16_PATTERN]:{dataType:c.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const f=q=>{switch(q){case c.DataType.FLOAT:return 4;case c.DataType.INT:return 4;case c.DataType.UNSIGNED_INT:return 4;
case c.DataType.SHORT:return 2;case c.DataType.UNSIGNED_SHORT:return 2;case c.DataType.BYTE:return 1;case c.DataType.UNSIGNED_BYTE:return 1}},l=(q,k,v)=>{k/=v;if(1===q)switch(k){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===q)switch(k){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===q)switch(k){case 0:return".xyz";case 1:return".yzw"}return""};d.VTLMaterial=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(function(){class d{constructor(a){this._array=
[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return(new Uint32Array(this._array)).buffer}static i1616to32(a,m){return 65535&a|m<<16}static i8888to32(a,m,c,g){return a&255|(m&255)<<8|(c&255)<<16|g<<24}static i8816to32(a,m,c){return a&255|(m&255)<<8|c<<16}}return d})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],
function(d){d.EncodingType=void 0;(function(a){a[a.R8_SIGNED=0]="R8_SIGNED";a[a.R8_UNSIGNED=1]="R8_UNSIGNED";a[a.R16_SIGNED=2]="R16_SIGNED";a[a.R16_UNSIGNED=3]="R16_UNSIGNED";a[a.R8G8_SIGNED=4]="R8G8_SIGNED";a[a.R8G8_UNSIGNED=5]="R8G8_UNSIGNED";a[a.R16G16_SIGNED=6]="R16G16_SIGNED";a[a.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";a[a.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";a[a.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";a[a.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";a[a.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";
a[a.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(d.EncodingType||(d.EncodingType={}));d.AttributeStatus=void 0;(function(a){a[a.UNIFORM=0]="UNIFORM";a[a.DATA_DRIVEN=1]="DATA_DRIVEN";a[a.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";a[a.UNUSED=3]="UNUSED"})(d.AttributeStatus||(d.AttributeStatus={}));Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],function(d){d.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=
256]="DEPTH_BUFFER_BIT";a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(d.ClearBufferBit||(d.ClearBufferBit={}));d.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(d.PrimitiveType||(d.PrimitiveType={}));d.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";
a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=
32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(d.BlendFactor||(d.BlendFactor={}));d.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]="MIN";a[a.MAX=32776]="MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(d.BlendOperation||(d.BlendOperation={}));d.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";
a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER";a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(d.BufferType||(d.BufferType={}));d.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(d.Face||(d.Face={}));d.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(d.CullMode||
(d.CullMode={}));d.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(d.DataType||(d.DataType={}));d.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=
519]="ALWAYS"})(d.CompareFunction||(d.CompareFunction={}));d.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(d.StencilOperation||(d.StencilOperation={}));d.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";
a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(d.TextureSamplingMode||(d.TextureSamplingMode={}));d.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(d.TextureWrapMode||(d.TextureWrapMode={}));d.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=
34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]=
"TEXTURE_2D_ARRAY"})(d.TextureType||(d.TextureType={}));d.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";
a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(d.PixelFormat||(d.PixelFormat={}));d.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";
a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";
a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(d.SizedPixelFormat||(d.SizedPixelFormat={}));d.PixelType=
void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=
33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(d.PixelType||(d.PixelType={}));d.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";
a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(d.RenderbufferFormat||(d.RenderbufferFormat={}));d.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=
35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(d.Usage||(d.Usage={}));d.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(d.ShaderType||(d.ShaderType={}));d.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(d.FramebufferTarget||(d.FramebufferTarget={}));d.ResourceType=void 0;(function(a){a[a.Texture=
0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";a[a.TransformFeedback=7]="TransformFeedback";a[a.Sync=8]="Sync";a[a.UNCOUNTED=9]="UNCOUNTED";a[a.LinesOfCode=9]="LinesOfCode";a[a.Uniform=10]="Uniform";a[a.COUNT=11]="COUNT"})(d.ResourceType||(d.ResourceType={}));d.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]=
"COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";
a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(d.ColorAttachment||(d.ColorAttachment={}));d.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]="NONE";a[a.BACK=1029]="BACK"})(d.SpecialDrawBuffers||(d.SpecialDrawBuffers={}));d.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=
33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=
37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(d.CompressedTextureFormat||(d.CompressedTextureFormat={}));d.UniformType=void 0;
(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]=
"SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";
a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";
a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(d.UniformType||(d.UniformType={}));d.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(d.SyncParameter||(d.SyncParameter={}));d.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(d.SyncStatus||
(d.SyncStatus={}));d.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(d.ClientWaitSyncStatus||(d.ClientWaitSyncStatus={}));d.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(d.SyncCondition||(d.SyncCondition={}));d.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=
1]="SYNC_FLUSH_COMMANDS_BIT"})(d.SyncFlag||(d.SyncFlag={}));d.DepthStencilAttachment=33306;d.baseTextureUnit=33984;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/VertexElementDescriptor":function(){define(["exports"],function(d){class a{constructor(m,c,g,e,f,l=!1,q=0){this.name=m;this.count=c;this.type=g;this.offset=e;this.stride=f;this.normalized=l;this.divisor=q}}d.VertexElementDescriptor=a;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define(["exports",
"./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(d,a,m,c,g){class e extends m.VTLMaterial{constructor(f){super(f)}geometryInfo(){return e.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return e.ATTRIBUTES}attributesInfo(){return e.ATTRIBUTES_INFO}}e.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");e.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",
2,c.DataType.SHORT,0,4)];e.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:a.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:a.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:a.EncodingType.R8_UNSIGNED,
precisionFactor:100},"circle-blur":{name:"blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:32}};d.VTLCircleMaterial=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(d,a,m,c,g){class e extends m.VTLMaterial{constructor(l){super(l)}geometryInfo(){return e.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return e.ATTRIBUTES}attributesInfo(){return e.ATTRIBUTES_INFO}}
e.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];e.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",2,c.DataType.SHORT,0,4)];e.ATTRIBUTES_INFO={"fill-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:a.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};class f extends m.VTLMaterial{constructor(l,q){super(l);this._usefillColor=q}geometryInfo(){return f.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this._usefillColor?
f.ATTRIBUTES_FILL:f.ATTRIBUTES_OUTLINE}attributesInfo(){return this._usefillColor?f.ATTRIBUTES_INFO_FILL:f.ATTRIBUTES_INFO_OUTLINE}}f.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];f.ATTRIBUTES_FILL=["fill-color","fill-opacity"];f.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",2,c.DataType.SHORT,0,8),new g.VertexElementDescriptor("a_offset",2,c.DataType.BYTE,4,8),new g.VertexElementDescriptor("a_xnormal",2,c.DataType.BYTE,6,8)];f.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",
type:a.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100}};f.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100}};d.VTLFillMaterial=e;d.VTLOutlineMaterial=f;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define(["exports","./enums","./VTLMaterial",
"../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(d,a,m,c,g){class e extends m.VTLMaterial{constructor(f){super(f)}geometryInfo(){return e.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return e.ATTRIBUTES}attributesInfo(){return e.ATTRIBUTES_INFO}}e.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");e.GEOMETRY_LAYOUT=[new g.VertexElementDescriptor("a_pos",2,c.DataType.SHORT,0,16),new g.VertexElementDescriptor("a_extrude_offset",
4,c.DataType.BYTE,4,16),new g.VertexElementDescriptor("a_dir_normal",4,c.DataType.BYTE,8,16),new g.VertexElementDescriptor("a_accumulatedDistance",2,c.DataType.UNSIGNED_SHORT,12,16)];e.ATTRIBUTES_INFO={"line-width":{name:"width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:a.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},
"line-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:a.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:a.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};d.VTLLineMaterial=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define(["exports",
"./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(d,a,m,c,g){const e=[new g.VertexElementDescriptor("a_pos",2,c.DataType.SHORT,0,16),new g.VertexElementDescriptor("a_vertexOffset",2,c.DataType.SHORT,4,16),new g.VertexElementDescriptor("a_texAngleRange",4,c.DataType.UNSIGNED_BYTE,8,16),new g.VertexElementDescriptor("a_levelInfo",4,c.DataType.UNSIGNED_BYTE,12,16)],f=[new g.VertexElementDescriptor("a_opacityInfo",1,c.DataType.UNSIGNED_BYTE,0,1)];
class l extends m.VTLMaterial{constructor(k){super(k)}geometryInfo(){return e}opacityInfo(){return f}attributes(){return l.ATTRIBUTES}attributesInfo(){return l.ATTRIBUTES_INFO}}l.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");l.ATTRIBUTES_INFO={"icon-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:a.EncodingType.R8G8B8A8_COLOR},
"icon-halo-width":{name:"halo_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:a.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class q extends m.VTLMaterial{constructor(k){super(k)}geometryInfo(){return e}opacityInfo(){return f}attributes(){return q.ATTRIBUTES}attributesInfo(){return q.ATTRIBUTES_INFO}}q.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");
q.ATTRIBUTES_INFO={"text-color":{name:"color",type:a.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:a.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:a.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:a.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:a.EncodingType.R8_UNSIGNED,isLayout:!0}};d.VTLIconMaterial=
l;d.VTLTextMaterial=q;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression","../expression/types"],function(d,a){class m{constructor(c){this._expression=c}filter(c,g){if(!this._expression)return!0;try{return this._expression.evaluate(c,g)}catch(e){return console.log(e.message),!0}}static createFilter(c){if(!c)return null;this.isLegacyFilter(c)&&(c=this.convertLegacyFilter(c));try{const g=d.createExpression(c,
null,a.booleanType);return new m(g)}catch(g){return console.log(g.message),null}}static isLegacyFilter(c){if(!Array.isArray(c)||0===c.length)return!0;switch(c[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===c.length&&"string"===typeof c[1]&&!Array.isArray(c[2]);case "in":return 3<=c.length&&"string"===typeof c[1]&&!Array.isArray(c[2]);case "!in":return!0;case "any":case "all":for(let g=1;g<c.length;g++)if(this.isLegacyFilter(c[g]))return!0;return!1;
case "none":return!0;case "has":return 2===c.length&&("$id"===c[1]||"$type"===c[1]);case "!has":return!0;default:return!1}}static convertLegacyFilter(c){if(!Array.isArray(c)||0===c.length)return!0;const g=c[0];if(1===c.length)return"any"!==g;switch(g){case "\x3d\x3d":return m.convertComparison("\x3d\x3d",c[1],c[2]);case "!\x3d":return m.negate(m.convertComparison("\x3d\x3d",c[1],c[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return m.convertComparison(g,c[1],c[2]);case "in":return m.convertIn(c[1],
c.slice(2));case "!in":return m.negate(m.convertIn(c[1],c.slice(2)));case "any":case "all":case "none":return m.convertCombining(g,c.slice(1));case "has":return m.convertHas(c[1]);case "!has":return m.negate(m.convertHas(c[1]));default:throw Error("Unexpected legacy filter.");}}static convertComparison(c,g,e){switch(g){case "$type":return[c,["geometry-type"],e];case "$id":return[c,["id"],e];default:return[c,["get",g],e]}}static convertIn(c,g){switch(c){case "$type":return["in",["geometry-type"],["literal",
g]];case "$id":return["in",["id"],["literal",g]];default:return["in",["get",c],["literal",g]]}}static convertHas(c){switch(c){case "$type":return!0;case "$id":return["has-id"];default:return["has",c]}}static convertCombining(c,g){return[c].concat(g.map(this.convertLegacyFilter))}static negate(c){return["!",c]}}return m})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),
function(d,a,m,c,g,e,f){function l(b,h,p){var x=typeof b;if("string"===x||"boolean"===x||"number"===x||null===b){if(p)switch(p.kind){case "string":"string"!==x&&(b=Y.toString(b));break;case "number":"number"!==x&&(b=Y.toNumber(b));break;case "color":b=Y.toColor(b)}b=["literal",b]}if(!Array.isArray(b)||0===b.length)throw Error("Expression must be a non empty array");x=b[0];if("string"!==typeof x)throw Error("First element of expression must be a string");const K=oa[x];if(void 0===K)throw Error(`Invalid expression operator "${x}"`);
if(!K)throw Error(`Unimplemented expression operator "${x}"`);return K.parse(b,h,p)}class q{constructor(b){this._parent=b;this._vars={}}add(b,h){this._vars[b]=h}get(b){return this._vars[b]?this._vars[b]:this._parent?this._parent.get(b):null}}class k{constructor(){this.type=f.valueType}static parse(b){if(1<b.length)throw Error('"id" does not expect arguments');return new k}evaluate(b,h){return b?.id}}class v{constructor(){this.type=f.stringType}static parse(b){if(1<b.length)throw Error('"geometry-type" does not expect arguments');
return new v}evaluate(b,h){if(!b)return null;switch(b.type){case c.GeometryType.Point:return"Point";case c.GeometryType.LineString:return"LineString";case c.GeometryType.Polygon:return"Polygon";default:return null}}}class D{constructor(){this.type=f.objectType}static parse(b){if(1<b.length)throw Error('"properties" does not expect arguments');return new D}evaluate(b,h){return b?.values}}class G{constructor(){this.type=f.numberType}static parse(b){if(1<b.length)throw Error('"zoom" does not expect arguments');
return new G}evaluate(b,h){return h}}class B{constructor(b,h,p){this._lhs=b;this._rhs=h;this._compare=p;this.type=f.booleanType}static parse(b,h,p){if(3!==b.length&&4!==b.length)throw Error(`"${b[0]}" expects 2 or 3 arguments`);if(4===b.length)throw Error(`"${b[0]}" collator not supported`);return new B(l(b[1],h),l(b[2],h),p)}evaluate(b,h){return this._compare(this._lhs.evaluate(b,h),this._rhs.evaluate(b,h))}}class u extends B{static parse(b,h){return B.parse(b,h,(p,x)=>p===x)}}class w extends B{static parse(b,
h){return B.parse(b,h,(p,x)=>p!==x)}}class L extends B{static parse(b,h){return B.parse(b,h,(p,x)=>p<x)}}class H extends B{static parse(b,h){return B.parse(b,h,(p,x)=>p<=x)}}class J extends B{static parse(b,h){return B.parse(b,h,(p,x)=>p>x)}}class y extends B{static parse(b,h){return B.parse(b,h,(p,x)=>p>=x)}}class z{constructor(b){this._arg=b;this.type=f.booleanType}static parse(b,h){if(2!==b.length)throw Error('"!" expects 1 argument');return new z(l(b[1],h))}evaluate(b,h){return!this._arg.evaluate(b,
h)}}class A{constructor(b){this._args=b;this.type=f.booleanType}static parse(b,h){const p=[];for(let x=1;x<b.length;x++)p.push(l(b[x],h));return new A(p)}evaluate(b,h){for(const p of this._args)if(!p.evaluate(b,h))return!1;return!0}}class I{constructor(b){this._args=b;this.type=f.booleanType}static parse(b,h){const p=[];for(let x=1;x<b.length;x++)p.push(l(b[x],h));return new I(p)}evaluate(b,h){for(const p of this._args)if(p.evaluate(b,h))return!0;return!1}}class n{constructor(b){this._args=b;this.type=
f.booleanType}static parse(b,h){const p=[];for(let x=1;x<b.length;x++)p.push(l(b[x],h));return new n(p)}evaluate(b,h){for(const p of this._args)if(p.evaluate(b,h))return!1;return!0}}class t{constructor(b,h,p){this.type=b;this._args=h;this._fallback=p}static parse(b,h,p){if(4>b.length)throw Error('"case" expects at least 3 arguments');if(1===b.length%2)throw Error('"case" expects an odd number of arguments');let x;const K=[];for(let P=1;P<b.length-1;P+=2){const U=l(b[P],h),S=l(b[P+1],h,p);x||(x=S.type);
K.push({condition:U,output:S})}b=l(b[b.length-1],h,p);x||(x=b.type);return new t(x,K,b)}evaluate(b,h){for(const p of this._args)if(p.condition.evaluate(b,h))return p.output.evaluate(b,h);return this._fallback.evaluate(b,h)}}class r{constructor(b,h){this.type=b;this._args=h}static parse(b,h){if(2>b.length)throw Error('"coalesce" expects at least 1 argument');let p;const x=[];for(let K=1;K<b.length;K++){const P=l(b[K],h);p||(p=P.type);x.push(P)}return new r(p,x)}evaluate(b,h){for(const p of this._args){const x=
p.evaluate(b,h);if(null!==x)return x}return null}}class C{constructor(b,h,p,x,K){this.type=b;this._input=h;this._labels=p;this._outputs=x;this._fallback=K}static parse(b,h){if(3>b.length)throw Error('"match" expects at least 3 arguments');if(0===b.length%2)throw Error('"case" expects an even number of arguments');let p;const x=l(b[1],h),K=[],P={};let U;for(let aa=2;aa<b.length-1;aa+=2){var S=b[aa];Array.isArray(S)||(S=[S]);for(const fa of S){S=typeof fa;if("string"!==S&&"number"!==S)throw Error('"match" requires string or number literal as labels');
if(!U)U=S;else if(S!==U)throw Error('"match" requires labels to have the same type');P[fa]=K.length}S=l(b[aa+1],h);p||(p=S.type);K.push(S)}return new C(p,x,P,K,l(b[b.length-1],h))}evaluate(b,h){const p=this._input.evaluate(b,h);return(this._outputs[this._labels[p]]||this._fallback).evaluate(b,h)}}class E{constructor(b,h,p,x,K){this._operator=b;this.type=h;this.interpolation=p;this.input=x;this._stops=K}static parse(b,h,p){const x=b[0];if(5>b.length)throw Error(`"${x}" expects at least 4 arguments`);
const K=b[1];if(!Array.isArray(K)||0===K.length)throw Error(`"${K}" is not a valid interpolation`);switch(K[0]){case "linear":if(1!==K.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==K.length||"number"!==typeof K[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==K.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var P=1;5>P;P++){var U=
K[P];if("number"!==typeof U||0>U||1<U)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${b[0]}" unknown interpolation type "${K[0]}"`);}if(1!==b.length%2)throw Error(`"${x}" expects an even number of arguments`);P=l(b[2],h,f.numberType);let S;"interpolate-hcl"===x||"interpolate-lab"===x?S=f.colorType:p&&"value"!==p.kind&&(S=p);p=[];for(U=3;U<b.length;U+=2){const aa=b[U];if("number"!==typeof aa)throw Error(`"${x}" requires stop inputs as literal numbers`);
if(p.length&&p[p.length-1][0]>=aa)throw Error(`"${x}" requires strictly ascending stop inputs`);const fa=l(b[U+1],h,S);S||(S=fa.type);p.push([aa,fa])}if(S&&S!==f.colorType&&S!==f.numberType&&("array"!==S.kind||S.itemType!==f.numberType))throw Error(`"${x}" cannot interpolate type ${f.typeToString(S)}`);return new E(x,S,K,P,p)}evaluate(b,h){var p=this._stops;if(1===p.length)return p[0][1].evaluate(b,h);var x=this.input.evaluate(b,h);if(x<=p[0][0])return p[0][1].evaluate(b,h);if(x>=p[p.length-1][0])return p[p.length-
1][1].evaluate(b,h);let K=0;for(;++K<p.length&&!(x<p[K][0]););const P=E.interpolationRatio(this.interpolation,x,p[K-1][0],p[K][0]);x=p[K-1][1].evaluate(b,h);const U=p[K][1].evaluate(b,h);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(x)&&Array.isArray(U))return x.map((S,aa)=>e.interpolate(S,U[aa],P));if("color"===this.type.kind&&x instanceof a&&U instanceof a)return x=new a(x),b=new a(U),new a([e.interpolate(x.r,b.r,P),e.interpolate(x.g,b.g,P),e.interpolate(x.b,b.b,
P),e.interpolate(x.a,b.a,P)]);if("number"===this.type.kind&&"number"===typeof x&&"number"===typeof U)return e.interpolate(x,U,P);throw Error(`"${this._operator}" cannot interpolate type ${f.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return b=m.toLCH(x),h=m.toLCH(U),p=h.h-b.h,b=m.toRGB({h:b.h+P*(180<p||-180>p?p-360*Math.round(p/360):p),c:e.interpolate(b.c,h.c,P),l:e.interpolate(b.l,h.l,P)}),new a({a:e.interpolate(x.a,U.a,P),...b});if("interpolate-lab"===this._operator)return b=
m.toLAB(x),h=m.toLAB(U),b=m.toRGB({l:e.interpolate(b.l,h.l,P),a:e.interpolate(b.a,h.a,P),b:e.interpolate(b.b,h.b,P)}),new a({a:e.interpolate(x.a,U.a,P),...b});throw Error(`Unexpected operator "${this._operator}"`);}interpolationUniformValue(b,h){const p=this._stops;if(1===p.length||b>=p[p.length-1][0])return 0;let x=0;for(;++x<p.length&&!(b<p[x][0]););return E.interpolationRatio(this.interpolation,h,p[x-1][0],p[x][0])}getInterpolationRange(b){const h=this._stops;if(1===h.length)return b=h[0][0],[b,
b];var p=h[h.length-1][0];if(b>=p)return[p,p];for(p=0;++p<h.length&&!(b<h[p][0]););return[h[p-1][0],h[p][0]]}static interpolationRatio(b,h,p,x){let K=0;"linear"===b[0]?K=E._exponentialInterpolationRatio(h,1,p,x):"exponential"===b[0]?K=E._exponentialInterpolationRatio(h,b[1],p,x):"cubic-bezier"===b[0]&&(K=g.unitBezier(b[1],b[2],b[3],b[4])(E._exponentialInterpolationRatio(h,1,p,x),1E-5));0>K?K=0:1<K&&(K=1);return K}static _exponentialInterpolationRatio(b,h,p,x){x-=p;if(0===x)return 0;b-=p;return 1===
h?b/x:(h**b-1)/(h**x-1)}}class M{constructor(b,h,p){this.type=b;this._input=h;this._stops=p}static parse(b,h){if(5>b.length)throw Error('"step" expects at least 4 arguments');if(1!==b.length%2)throw Error('"step" expects an even number of arguments');const p=l(b[1],h,f.numberType);let x;const K=[];K.push([-Infinity,l(b[2],h)]);for(let P=3;P<b.length;P+=2){const U=b[P];if("number"!==typeof U)throw Error('"step" requires stop inputs as literal numbers');if(K.length&&K[K.length-1][0]>=U)throw Error('"step" requires strictly ascending stop inputs');
const S=l(b[P+1],h);x||(x=S.type);K.push([U,S])}return new M(x,p,K)}evaluate(b,h){const p=this._stops;if(1===p.length)return p[0][1].evaluate(b,h);const x=this._input.evaluate(b,h);let K=0;for(;++K<p.length&&!(x<p[K][0]););return this._stops[K-1][1].evaluate(b,h)}}class O{constructor(b,h){this.type=b;this._output=h}static parse(b,h,p){if(4>b.length)throw Error('"let" expects at least 3 arguments');if(1===b.length%2)throw Error('"let" expects an odd number of arguments');const x=new q(h);for(let K=
1;K<b.length-1;K+=2){const P=b[K];if("string"!==typeof P)throw Error(`"let" requires a string to define variable names - found ${P}`);x.add(P,l(b[K+1],h))}b=l(b[b.length-1],x,p);return new O(b.type,b)}evaluate(b,h){return this._output.evaluate(b,h)}}class Q{constructor(b,h){this.type=b;this.output=h}static parse(b,h,p){if(2!==b.length||"string"!==typeof b[1])throw Error('"var" requires just one literal string argument');h=h.get(b[1]);if(!h)throw Error(`${b[1]} must be defined before being used in a "var" expression`);
return new Q(p||f.valueType,h)}evaluate(b,h){return this.output.evaluate(b,h)}}class V{constructor(b,h,p){this.type=b;this._index=h;this._array=p}static parse(b,h){if(3!==b.length)throw Error('"at" expects 2 arguments');const p=l(b[1],h,f.numberType);b=l(b[2],h);return new V(b.type.itemType,p,b)}evaluate(b,h){const p=this._index.evaluate(b,h);b=this._array.evaluate(b,h);if(0>p||p>=b.length)throw Error('"at" index out of bounds');if(p!==Math.floor(p))throw Error('"at" index must be an integer');return b[p]}}
class X{constructor(b,h){this._key=b;this._obj=h;this.type=f.valueType}static parse(b,h){let p;switch(b.length){case 2:return p=l(b[1],h),new X(p);case 3:return p=l(b[1],h),b=l(b[2],h),new X(p,b);default:throw Error('"get" expects 1 or 2 arguments');}}evaluate(b,h){const p=this._key.evaluate(b,h);return this._obj?this._obj.evaluate(b,h)[p]:b?.values[p]}}class Z{constructor(b,h){this._key=b;this._obj=h;this.type=f.booleanType}static parse(b,h){let p;switch(b.length){case 2:return p=l(b[1],h),new Z(p);
case 3:return p=l(b[1],h),b=l(b[2],h),new Z(p,b);default:throw Error('"has" expects 1 or 2 arguments');}}evaluate(b,h){const p=this._key.evaluate(b,h);return this._obj?(b=this._obj.evaluate(b,h),p in b):!!b?.values[p]}}class ha{constructor(b,h){this._key=b;this._vals=h;this.type=f.booleanType}static parse(b,h){if(3!==b.length)throw Error('"in" expects 2 arguments');return new ha(l(b[1],h),l(b[2],h))}evaluate(b,h){const p=this._key.evaluate(b,h);return this._vals.evaluate(b,h).includes(p)}}class ba{constructor(b,
h,p){this._item=b;this._array=h;this._from=p;this.type=f.numberType}static parse(b,h){if(3>b.length||4<b.length)throw Error('"index-of" expects 3 or 4 arguments');const p=l(b[1],h),x=l(b[2],h);return 4===b.length?(b=l(b[3],h,f.numberType),new ba(p,x,b)):new ba(p,x)}evaluate(b,h){const p=this._item.evaluate(b,h),x=this._array.evaluate(b,h);if(this._from){b=this._from.evaluate(b,h);if(b!==Math.floor(b))throw Error('"index-of" index must be an integer');return x.indexOf(p,b)}return x.indexOf(p)}}class F{constructor(b){this._arg=
b;this.type=f.numberType}static parse(b,h){if(2!==b.length)throw Error('"length" expects 2 arguments');b=l(b[1],h);return new F(b)}evaluate(b,h){b=this._arg.evaluate(b,h);if("string"===typeof b||Array.isArray(b))return b.length;throw Error('"length" expects string or array');}}class N{constructor(b,h,p,x){this.type=b;this._array=h;this._from=p;this._to=x}static parse(b,h){if(3>b.length||4<b.length)throw Error('"slice" expects 2 or 3 arguments');const p=l(b[1],h),x=l(b[2],h,f.numberType);if(x.type!==
f.numberType)throw Error('"slice" index must return a number');if(4===b.length){b=l(b[3],h,f.numberType);if(b.type!==f.numberType)throw Error('"slice" index must return a number');return new N(p.type,p,x,b)}return new N(p.type,p,x)}evaluate(b,h){const p=this._array.evaluate(b,h);if(!Array.isArray(p)&&"string"!==typeof p)throw Error('"slice" input must be an array or a string');const x=this._from.evaluate(b,h);if(0>x||x>=p.length)throw Error('"slice" index out of bounds');if(x!==Math.floor(x))throw Error('"slice" index must be an integer');
if(this._to){b=this._to.evaluate(b,h);if(0>b||b>=p.length)throw Error('"slice" index out of bounds');if(b!==Math.floor(b))throw Error('"slice" index must be an integer');return p.slice(x,b)}return p.slice(x)}}class R{constructor(){this.type=f.booleanType}static parse(b){if(1!==b.length)throw Error('"has-id" expects no arguments');return new R}evaluate(b,h){return void 0!==b?.id}}class T{constructor(b,h){this._args=b;this._calculate=h;this.type=f.numberType}static parse(b,h,p){b=b.slice(1).map(x=>
l(x,h));return new T(b,p)}evaluate(b,h){let p;this._args&&(p=this._args.map(x=>x.evaluate(b,h)));return this._calculate(p)}}class da extends T{static parse(b,h){switch(b.length){case 2:return T.parse(b,h,p=>-p[0]);case 3:return T.parse(b,h,p=>p[0]-p[1]);default:throw Error('"-" expects 1 or 2 arguments');}}}class pa extends T{static parse(b,h){return T.parse(b,h,p=>{let x=1;for(const K of p)x*=K;return x})}}class qa extends T{static parse(b,h){if(3===b.length)return T.parse(b,h,p=>p[0]/p[1]);throw Error('"/" expects 2 arguments');
}}class ra extends T{static parse(b,h){if(3===b.length)return T.parse(b,h,p=>p[0]%p[1]);throw Error('"%" expects 2 arguments');}}class sa extends T{static parse(b,h){if(3===b.length)return T.parse(b,h,p=>p[0]**p[1]);throw Error('"^" expects 1 or 2 arguments');}}class ta extends T{static parse(b,h){return T.parse(b,h,p=>{let x=0;for(const K of p)x+=K;return x})}}class W{constructor(b,h){this._args=b;this._calculate=h;this.type=f.numberType}static parse(b,h){const p=b.slice(1).map(x=>l(x,h));return new W(p,
W.ops[b[0]])}evaluate(b,h){let p;this._args&&(p=this._args.map(x=>x.evaluate(b,h)));return this._calculate(p)}}W.ops={abs:b=>Math.abs(b[0]),acos:b=>Math.acos(b[0]),asin:b=>Math.asin(b[0]),atan:b=>Math.atan(b[0]),ceil:b=>Math.ceil(b[0]),cos:b=>Math.cos(b[0]),e:()=>Math.E,floor:b=>Math.floor(b[0]),ln:b=>Math.log(b[0]),ln2:()=>Math.LN2,log10:b=>Math.log(b[0])/Math.LN10,log2:b=>Math.log(b[0])/Math.LN2,max:b=>Math.max(...b),min:b=>Math.min(...b),pi:()=>Math.PI,round:b=>Math.round(b[0]),sin:b=>Math.sin(b[0]),
sqrt:b=>Math.sqrt(b[0]),tan:b=>Math.tan(b[0])};class ia{constructor(b){this._args=b;this.type=f.stringType}static parse(b,h){return new ia(b.slice(1).map(p=>l(p,h)))}evaluate(b,h){return this._args.map(p=>p.evaluate(b,h)).join("")}}class ea{constructor(b,h){this._arg=b;this._calculate=h;this.type=f.stringType}static parse(b,h){if(2!==b.length)throw Error(`${b[0]} expects 1 argument`);h=l(b[1],h);return new ea(h,ea.ops[b[0]])}evaluate(b,h){return this._calculate(this._arg.evaluate(b,h))}}ea.ops={downcase:b=>
b.toLowerCase(),upcase:b=>b.toUpperCase()};class ja{constructor(b){this._args=b;this.type=f.colorType}static parse(b,h){if(4!==b.length)throw Error('"rgb" expects 3 arguments');b=b.slice(1).map(p=>l(p,h));return new ja(b)}evaluate(b,h){const p=this._validate(this._args[0].evaluate(b,h)),x=this._validate(this._args[1].evaluate(b,h));b=this._validate(this._args[2].evaluate(b,h));return new a({r:p,g:x,b})}_validate(b){if("number"!==typeof b||0>b||255<b)throw Error(`${b}: invalid color component`);return Math.round(b)}}
class ka{constructor(b){this._args=b;this.type=f.colorType}static parse(b,h){if(5!==b.length)throw Error('"rgba" expects 4 arguments');b=b.slice(1).map(p=>l(p,h));return new ka(b)}evaluate(b,h){const p=this._validate(this._args[0].evaluate(b,h)),x=this._validate(this._args[1].evaluate(b,h)),K=this._validate(this._args[2].evaluate(b,h));b=this._validateAlpha(this._args[3].evaluate(b,h));return new a({r:p,g:x,b:K,a:b})}_validate(b){if("number"!==typeof b||0>b||255<b)throw Error(`${b}: invalid color component`);
return Math.round(b)}_validateAlpha(b){if("number"!==typeof b||0>b||1<b)throw Error(`${b}: invalid alpha color component`);return b}}class la{constructor(b){this._color=b;this.type=f.arrayType(f.numberType,4)}static parse(b,h){if(2!==b.length)throw Error('"to-rgba" expects 1 argument');b=l(b[1],h);return new la(b)}evaluate(b,h){return(new a(this._color.evaluate(b,h))).toRgba()}}class ca{constructor(b,h){this.type=b;this._args=h}static parse(b,h){var p=b[0];if(2>b.length)throw Error(`${p} expects at least one argument`);
let x=1,K;if("array"===p){if(2<b.length){switch(b[1]){case "string":K=f.stringType;break;case "number":K=f.numberType;break;case "boolean":K=f.booleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}x++}else K=f.valueType;if(3<b.length){var P=b[2];if(null!==P&&("number"!==typeof P||0>P||P!==Math.floor(P)))throw Error('"array" length argument must be a positive integer literal');x++}K=f.arrayType(K,P)}else switch(p){case "string":K=f.stringType;break;case "number":K=
f.numberType;break;case "boolean":K=f.booleanType;break;case "object":K=f.objectType}for(p=[];x<b.length;x++)P=l(b[x],h),p.push(P);return new ca(K,p)}evaluate(b,h){let p;for(const x of this._args){const K=x.evaluate(b,h);p=f.getType(K);if(f.matchType(p,this.type))return K}throw Error(`Expected ${f.typeToString(this.type)} but got ${f.typeToString(p)}`);}}class Y{constructor(b,h){this.type=b;this._args=h}static parse(b,h){var p=b[0];const x=Y.types[p];if(x===f.booleanType||x===f.stringType){if(2!==
b.length)throw Error(`${p} expects one argument`);}else if(2>b.length)throw Error(`${p} expects at least one argument`);p=[];for(let K=1;K<b.length;K++){const P=l(b[K],h);p.push(P)}return new Y(x,p)}evaluate(b,h){if(this.type===f.booleanType)return!!this._args[0].evaluate(b,h);if(this.type===f.stringType)return f.valueToString(this._args[0].evaluate(b,h));if(this.type===f.numberType){for(const x of this._args){var p=Number(x.evaluate(b,h));if(!isNaN(p))return p}return null}if(this.type===f.colorType){for(p of this._args)try{const x=
Y.toColor(p.evaluate(b,h));if(x instanceof a)return x}catch{}return null}}static toBoolean(b){return!!b}static toString(b){return f.valueToString(b)}static toNumber(b){const h=Number(b);if(isNaN(h))throw Error(`"${b}" is not a number`);return h}static toColor(b){if(b instanceof a)return b;if("string"===typeof b){const h=a.fromString(b);if(h)return h;throw Error(`"${b}" is not a color`);}if(Array.isArray(b))return a.fromArray(b);throw Error(`"${b}" is not a color`);}}Y.types={"to-boolean":f.booleanType,
"to-color":f.colorType,"to-number":f.numberType,"to-string":f.stringType};class ma{constructor(b){this._val=b;this.type=f.getType(b)}static parse(b){if(2!==b.length)throw Error('"literal" expects 1 argument');return new ma(b[1])}evaluate(b,h){return this._val}}class na{constructor(b){this._arg=b;this.type=f.stringType}static parse(b,h){if(2!==b.length)throw Error('"typeof" expects 1 argument');return new na(l(b[1],h))}evaluate(b,h){return f.typeToString(f.getType(this._arg.evaluate(b,h)))}}const oa=
{array:ca,boolean:ca,collator:null,format:null,image:null,literal:ma,number:ca,"number-format":null,object:ca,string:ca,"to-boolean":Y,"to-color":Y,"to-number":Y,"to-string":Y,typeof:na,accumulated:null,"feature-state":null,"geometry-type":v,id:k,"line-progress":null,properties:D,at:V,get:X,has:Z,in:ha,"index-of":ba,length:F,slice:N,"!":z,"!\x3d":w,"\x3c":L,"\x3c\x3d":H,"\x3d\x3d":u,"\x3e":J,"\x3e\x3d":y,all:A,any:I,case:t,coalesce:r,match:C,within:null,interpolate:E,"interpolate-hcl":E,"interpolate-lab":E,
step:M,let:O,var:Q,concat:ia,downcase:ea,"is-supported-script":null,"resolved-locale":null,upcase:ea,rgb:ja,rgba:ka,"to-rgba":la,"-":da,"*":pa,"/":qa,"%":ra,"^":sa,"+":ta,abs:W,acos:W,asin:W,atan:W,ceil:W,cos:W,e:W,floor:W,ln:W,ln2:W,log10:W,log2:W,max:W,min:W,pi:W,round:W,sin:W,sqrt:W,tan:W,zoom:G,"heatmap-density":null,"has-id":R,none:n};d.ALL=A;d.ANY=I;d.Add=ta;d.Assert=ca;d.At=V;d.Calculate=W;d.Case=t;d.Coalesce=r;d.Coerce=Y;d.Concat=ia;d.Div=qa;d.EQ=u;d.GE=y;d.GT=J;d.GeomType=v;d.Get=X;d.Has=
Z;d.HasID=R;d.ID=k;d.In=ha;d.IndexOf=ba;d.Interpolate=E;d.LE=H;d.LT=L;d.Length=F;d.Let=O;d.Literal=ma;d.Match=C;d.Mod=ra;d.Mul=pa;d.NE=w;d.NONE=n;d.NOT=z;d.Pow=sa;d.Properties=D;d.Rgb=ja;d.Rgba=ka;d.Slice=N;d.Step=M;d.String=ea;d.Sub=da;d.ToRgba=la;d.TypeOf=na;d.Var=Q;d.Zoom=G;d.createExpression=l;d.ops=oa;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(d){function a(g,e,f,l){function q(w,L){var H;let J,y;J=w;for(H=
0;8>H;H++){y=((D*J+v)*J+k)*J-w;if(Math.abs(y)<L)return J;var z=(3*D*J+2*v)*J+k;if(1E-6>Math.abs(z))break;J-=y/z}z=0;H=1;J=w;if(J<z)return z;if(J>H)return H;for(;z<H;){y=((D*J+v)*J+k)*J;if(Math.abs(y-w)<L)break;w>y?z=J:H=J;J=.5*(H-z)+z}return J}const k=3*g,v=3*(f-g)-k,D=1-k-v,G=3*e,B=3*(l-e)-G,u=1-G-B;return function(w,L=1E-6){w=q(w,L);return((u*w+B)*w+G)*w}}const m=/^cubic-bezier\((.*)\)/,c={};c.ease=a(.25,.1,.25,1);c.linear=a(0,0,1,1);c.easeIn=c["ease-in"]=a(.42,0,1,1);c.easeOut=c["ease-out"]=a(0,
0,.58,1);c.easeInOut=c["ease-in-out"]=a(.42,0,.58,1);d.easingFunctions=c;d.parse=function(g){let e=c[g]||null;!e&&(g=m.exec(g))&&(g=g[1].split(",").map(f=>parseFloat(f.trim())),4!==g.length||g.some(f=>isNaN(f))||(e=a.apply(a,g)));return e};d.unitBezier=a;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(d,a){function m(u,w){return{kind:"array",itemType:u,n:w}}function c(u){if("array"===
u.kind){const w=c(u.itemType);return"number"===typeof u.n?`array<${w}, ${u.n}>`:"value"===u.itemType.kind?"array":`array<${w}>`}return u.kind}function g(u){if(null===u)return f;if("string"===typeof u)return q;if("boolean"===typeof u)return k;if("number"===typeof u)return l;if(u instanceof a)return v;if(Array.isArray(u)){let w;for(const L of u){const H=g(L);if(!w)w=H;else if(w!==H){w=G;break}}return m(w||G,u.length)}return"object"===typeof u?D:G}function e(u,w){if("array"===w.kind)return"array"===
u.kind&&(0===u.n&&"value"===u.itemType.kind||e(u.itemType,w.itemType))&&("number"!==typeof w.n||w.n===u.n);if("value"===w.kind)for(const L of B)if(e(u,L))return!0;return w.kind===u.kind}const f={kind:"null"},l={kind:"number"},q={kind:"string"},k={kind:"boolean"},v={kind:"color"},D={kind:"object"},G={kind:"value"},B=[f,l,q,k,v,D,m(G)];d.arrayType=m;d.booleanType=k;d.colorType=v;d.getType=g;d.matchType=e;d.nullType=f;d.numberType=l;d.objectType=D;d.stringType=q;d.typeToString=c;d.valueToString=function(u){if(null===
u)return"";const w=typeof u;return"string"===w?u:"number"===w||"boolean"===w?String(u):u instanceof a?u.toString():JSON.stringify(u)};d.valueType=G;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(d,a,m,c){class g{constructor(e,f){this.isDataDriven=!1;this.interpolator=null;switch(e.type){case "number":var l=!0;
break;case "color":l=!0;break;case "array":l="number"===e.value;break;default:l=!1}null==f&&(f=e.default);if(Array.isArray(f)&&0<f.length&&m.ops[f[0]]){l={number:c.numberType,color:c.colorType,string:c.stringType,boolean:c.booleanType,enum:c.stringType};try{var q="array"===e.type?c.arrayType(l[e.value]||c.valueType,e.length):l[e.type];const k=m.createExpression(f,null,q);this.getValue=this._buildExpression(k,e);this.isDataDriven=!0;k instanceof m.Interpolate&&k.input instanceof m.Zoom&&(this.interpolator=
k)}catch(k){console.log(k.message),this.getValue=this._buildSimple(e.default)}}else{l&&"interval"===f.type&&(l=!1);if(q=f?.stops&&0<f.stops.length)for(const k of f.stops)k[1]=this._validate(k[1],e);if(this.isDataDriven=f?!!f.property:!1)if(void 0!==f.default&&(f.default=this._validate(f.default,e)),q)switch(f.type){case "identity":this.getValue=this._buildIdentity(f,e);break;case "categorical":this.getValue=this._buildCategorical(f,e);break;default:this.getValue=l?this._buildInterpolate(f,e):this._buildInterval(f,
e)}else this.getValue=this._buildIdentity(f,e);else q?this.getValue=l?this._buildZoomInterpolate(f):this._buildZoomInterval(f):(f=this._validate(f,e),this.getValue=this._buildSimple(f))}}_validate(e,f){if("number"===f.type){if(null!=f.minimum&&e<f.minimum)return f.minimum;if(null!=f.maximum&&e>f.maximum)return f.maximum}else"color"===f.type?e=g._parseColor(e):"enum"===f.type?"string"===typeof e&&(e=f.values.indexOf(e)):"array"===f.type&&"enum"===f.value?e=e.map(l=>"string"===typeof l?f.values.indexOf(l):
l):"string"===f.type&&(e=c.valueToString(e));return e}_buildSimple(e){return()=>e}_buildExpression(e,f){return(l,q)=>{try{const k=e.evaluate(q,l);return void 0===k?f.default:this._validate(k,f)}catch(k){return console.log(k.message),f.default}}}_buildIdentity(e,f){return(l,q)=>{let k;q&&(k=q.values[e.property]);void 0!==k&&(k=this._validate(k,f));return null!=k?k:void 0!==e.default?e.default:f.default}}_buildCategorical(e,f){return(l,q)=>{let k;q&&(k=q.values[e.property]);k=this._categorical(k,e.stops);
return void 0!==k?k:void 0!==e.default?e.default:f.default}}_buildInterval(e,f){return(l,q)=>{let k;q&&(k=q.values[e.property]);return"number"===typeof k?this._interval(k,e.stops):void 0!==e.default?e.default:f.default}}_buildInterpolate(e,f){return(l,q)=>{let k;q&&(k=q.values[e.property]);return"number"===typeof k?this._interpolate(k,e.stops,e.base||1):void 0!==e.default?e.default:f.default}}_buildZoomInterpolate(e){return f=>this._interpolate(f,e.stops,e.base||1)}_buildZoomInterval(e){return f=>
this._interval(f,e.stops)}_categorical(e,f){const l=f.length;for(let q=0;q<l;q++)if(f[q][0]===e)return f[q][1]}_interval(e,f){const l=f.length;let q=0;for(let k=0;k<l;k++)if(f[k][0]<=e)q=k;else break;return f[q][1]}_interpolate(e,f,l){const q=f.length;for(let D=0;D<q;D++){const G=f[D];if(G[0]<=e)var k=G;else{var v=G;break}}if(k&&v){f=v[0]-k[0];e-=k[0];l=1===l?e/f:(l**e-1)/(l**f-1);if(Array.isArray(k[1])){k=k[1];v=v[1];e=[];for(f=0;f<k.length;f++)e.push(a.interpolate(k[f],v[f],l));return e}return a.interpolate(k[1],
v[1],l)}if(k)return k[1];if(v)return v[1]}static _isEmpty(e){for(const f in e)if(e.hasOwnProperty(f))return!1;return!0}static _parseColor(e){if(Array.isArray(e))return e;"string"===typeof e&&(e=new d(e));if(e instanceof d&&!this._isEmpty(e))return d.toUnitRGBA(e)}}return g})},"esri/views/webgl/capabilities":function(){define(["exports","./contextUtils"],function(d,a){function m(e){if("undefined"===typeof WebGL2RenderingContext)return null;var f=document.createElement("canvas");if(!f)return null;let l=
a.createContext(f,{failIfMajorPerformanceCaveat:!0});null==l&&(l=a.createContext(f),null!=l&&(e.majorPerformanceCaveat=!0));if(null==l)return l;e.available=!0;e.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE);e.supportsVertexShaderSamplers=0<l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(f=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT))e.supportsHighPrecisionFragment=0<f.precision;return l}let c;class g{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=
0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}d.getWebGLCapabilities=function(){if(!c){{const e=new g,f=m(e);null!=f&&(e.supportsColorBufferFloat=null!==f.getExtension("EXT_color_buffer_float"),e.supportsColorBufferFloatBlend=null!==f.getExtension("EXT_float_blend"),e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||null!==f.getExtension("EXT_color_buffer_half_float"));
c=e}}return c};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports"],function(d){d.createContext=function(a,m={}){return(a=a.getContext("webgl2",m))?a:null};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../chunks/tslib.es6 ../request ../core/asyncUtils ../core/Error ../core/lang ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../geometry/Extent ../geometry/SpatialReference ./Layer ./mixins/APIKeyMixin ./mixins/ArcGISCachedService ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/CustomParametersMixin ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/imageUtils ./support/SpriteSource ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../portal/support/urlUtils ../chunks/persistableUrlUtils ../views/2d/engine/vectorTiles/tileInfoUtils ../views/2d/engine/vectorTiles/style/StyleRepository ../views/webgl/capabilities".split(" "),function(d,
a,m,c,g,e,f,l,q,k,v,D,G,B,u,w,L,H,J,y,z,A,I,n,t,r,C,E,M,O,Q,V,X,Z,ha,ba){e=class extends z.BlendLayer(t.ScaleRangeLayer(J.ArcGISCachedService(y.ArcGISService(I.OperationalLayer(n.PortalLayer(A.CustomParametersMixin(H.APIKeyMixin(e.MultiOriginJSONMixin(L))))))))){constructor(...F){super(...F);this._spriteSourceMap=new Map;this.isReference=this.currentStyleInfo=null;this.operationalLayerType="VectorTileLayer";this.tilemapCache=this.style=null;this.type="vector-tile";this.path=this.url=null}normalizeCtorArgs(F,
N){return"string"===typeof F?{url:F,...N}:F}destroy(){if(this.sourceNameToSource)for(const F of Object.values(this.sourceNameToSource))F?.destroy();this.primarySource?.destroy();this._spriteSourceMap.clear()}async prefetchResources(F){await this.loadSpriteSource(globalThis.devicePixelRatio||1,F)}load(F){const N=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},F).catch(f.throwIfAbortError).then(async()=>{if(this.portalItem?.id){var R=`${this.portalItem.itemCdnUrl}/resources/styles/root.json`;
(await a(R,{...F,query:{f:"json",...this.customParameters,token:this.apiKey}})).data&&this.read({url:R},Q.createForItemRead(this.portalItem,"portal-item"))}}).catch(f.throwIfAbortError).then(()=>this._loadStyle(F));this.addResolvingPromise(N);return Promise.resolve(this)}get attributionDataUrl(){var F=this.currentStyleInfo;F=F?.serviceUrl&&l.urlToObject(F.serviceUrl);return F?(F=this._getDefaultAttribution(F.path))?l.addQueryParameters(F,{...this.customParameters,token:this.apiKey}):null:null}get capabilities(){const F=
this.primarySource;return F?F.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get initialExtent(){return this.primarySource?.initialExtent||null}get parsedUrl(){return this.serviceUrl?l.urlToObject(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo?.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??null}get styleUrl(){return this.currentStyleInfo?.styleUrl||
null}writeStyleUrl(F,N){F&&l.isProtocolRelative(F)&&(F=`https:${F}`);const R=V.parseKnownArcGISOnlineDomain(F);N.styleUrl=X.ensureMainOnlineDomain(F,R)}get tileInfo(){const F=[];for(var N in this.sourceNameToSource)F.push(this.sourceNameToSource[N]);N=this.primarySource?.tileInfo||new E;if(1<F.length)for(let R=0;R<F.length;R++)Z.areSchemasOverlapping(N,F[R].tileInfo)&&(N=Z.unionTileInfos(N,F[R].tileInfo));return N}readTilemapCache(F,N){return N.capabilities?.includes("Tilemap")?new M.TilemapCache({layer:this}):
null}readVersion(F,N){return N.version?parseFloat(N.version):parseFloat(N.currentVersion)}async loadSpriteSource(F=1,N){if(!this._spriteSourceMap.has(F)){var R=ba.getWebGLCapabilities().maxTextureSize;const T=this.currentStyleInfo?.spriteUrl?l.addQueryParameters(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null;R=new C({type:"url",spriteUrl:T,pixelRatio:F,spriteFormat:this.currentStyleInfo?.spriteFormat},R);await R.load(N);this._spriteSourceMap.set(F,R)}return this._spriteSourceMap.get(F)}async setSpriteSource(F,
N){if(!F)return null;var R=ba.getWebGLCapabilities().maxTextureSize,T=F.spriteUrl;T=T?l.addQueryParameters(T,{...this.customParameters,token:this.apiKey}):null;if(!T&&"url"===F.type)return null;R=new C(F,R);try{await R.load(N);const da=F.pixelRatio||1;this._spriteSourceMap.clear();this._spriteSourceMap.set(da,R);T&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=T);this.emit("spriteSource-change",{spriteSource:R});return R}catch(da){f.throwIfAbortError(da)}return null}async loadStyle(F,N){const R=
F||this.style||this.url;if(this._loadingTask&&"string"===typeof R&&this.url===R)return this._loadingTask.promise;this._loadingTask?.abort();this._loadingTask=m.createTask(T=>{this._spriteSourceMap.clear();return this._getSourceAndStyle(R,{signal:T})},N);return this._loadingTask.promise}getStyleLayerId(F){return this.styleRepository.getStyleLayerId(F)}getStyleLayerIndex(F){return this.styleRepository.getStyleLayerIndex(F)}getPaintProperties(F){return g.clone(this.styleRepository?.getPaintProperties(F))}setPaintProperties(F,
N){const R=this.styleRepository.isPainterDataDriven(F);this.styleRepository.setPaintProperties(F,N);const T=this.styleRepository.isPainterDataDriven(F);this.emit("paint-change",{layer:F,paint:N,isDataDriven:R||T})}getStyleLayer(F){return g.clone(this.styleRepository.getStyleLayer(F))}setStyleLayer(F,N){this.styleRepository.setStyleLayer(F,N);this.emit("style-layer-change",{layer:F,index:N})}deleteStyleLayer(F){this.styleRepository.deleteStyleLayer(F);this.emit("delete-style-layer",{layer:F})}getLayoutProperties(F){return g.clone(this.styleRepository.getLayoutProperties(F))}setLayoutProperties(F,
N){this.styleRepository.setLayoutProperties(F,N);this.emit("layout-change",{layer:F,layout:N})}setStyleLayerVisibility(F,N){this.styleRepository.setStyleLayerVisibility(F,N);this.emit("style-layer-visibility-change",{layer:F,visibility:N})}getStyleLayerVisibility(F){return this.styleRepository.getStyleLayerVisibility(F)}write(F,N){return N?.origin&&!this.styleUrl?(N.messages&&N.messages.push(new c("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,
{layer:this})),null):super.write(F,N)}getTileUrl(F,N,R){return null}async _getSourceAndStyle(F,N){if(!F)throw Error("invalid style!");N=await O.loadMetadata(F,{...N,query:{...this.customParameters,token:this.apiKey}});"webp"!==N.spriteFormat||await r.checkWebPSupport("lossy")||(N.spriteFormat="png");this._set("currentStyleInfo",{...N});"string"===typeof F?(this.url=F,this.style=null):(this.url=null,this.style=F);this._set("sourceNameToSource",N.sourceNameToSource);this._set("primarySource",N.sourceNameToSource[N.primarySourceName]);
this._set("styleRepository",new ha(N.style));this.read(N.layerDefinition,{origin:"service"});this.emit("load-style")}_getDefaultAttribution(F){var N=F.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);F="OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" ");
if(N){var R=N[2]&&N[2].toLowerCase();if(R){N=N[1]||"";for(const T of F)if(T.toLowerCase().includes(R))return l.normalize(`//static.arcgis.com/attribution/Vector${N}/${T}`)}}}async _loadStyle(F){return this._loadingTask?.promise??this.loadStyle(null,F)}};d.__decorate([q.property({readOnly:!0})],e.prototype,"attributionDataUrl",null);d.__decorate([q.property({type:["show","hide"]})],e.prototype,"listMode",void 0);d.__decorate([q.property({json:{read:!0,write:!0}})],e.prototype,"blendMode",void 0);d.__decorate([q.property({readOnly:!0,
json:{read:!1}})],e.prototype,"capabilities",null);d.__decorate([q.property({readOnly:!0})],e.prototype,"currentStyleInfo",void 0);d.__decorate([q.property({json:{read:!1},readOnly:!0,type:u})],e.prototype,"fullExtent",null);d.__decorate([q.property({json:{read:!1},readOnly:!0,type:u})],e.prototype,"initialExtent",null);d.__decorate([q.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],e.prototype,"isReference",void 0);d.__decorate([q.property({type:["VectorTileLayer"]})],
e.prototype,"operationalLayerType",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"parsedUrl",null);d.__decorate([q.property()],e.prototype,"style",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"serviceUrl",null);d.__decorate([q.property({type:w,readOnly:!0})],e.prototype,"spatialReference",null);d.__decorate([q.property({readOnly:!0})],e.prototype,"styleRepository",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"sourceNameToSource",void 0);d.__decorate([q.property({readOnly:!0})],
e.prototype,"primarySource",void 0);d.__decorate([q.property({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],e.prototype,"styleUrl",null);d.__decorate([B.writer(["portal-item","web-document"],"styleUrl")],e.prototype,"writeStyleUrl",null);d.__decorate([q.property({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:E})],e.prototype,"tileInfo",null);d.__decorate([q.property()],e.prototype,"tilemapCache",void 0);d.__decorate([D.reader("service",
"tilemapCache",["capabilities","tileInfo"])],e.prototype,"readTilemapCache",null);d.__decorate([q.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],e.prototype,"type",void 0);d.__decorate([q.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],e.prototype,"url",void 0);d.__decorate([q.property({readOnly:!0})],e.prototype,"version",void 0);d.__decorate([D.reader("version",["version","currentVersion"])],e.prototype,"readVersion",
null);d.__decorate([q.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],e.prototype,"path",void 0);return e=d.__decorate([G.subclass("esri.layers.VectorTileLayer")],e)});