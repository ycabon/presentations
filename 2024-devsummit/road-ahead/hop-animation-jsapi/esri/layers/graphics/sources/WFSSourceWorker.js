// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(b,f,w,r,G,y,g,n,e,v){function x(A,J){return A?J?4:3:J?3:2}function u(A,J,M,W){if(A){if(M)return J&&W?E:Ta;if(J&&W)return h}else if(J&&W)return Ta;return La}function H({scale:A,
translate:J},M){return Math.round((M-J[0])/A[0])}function t({scale:A,translate:J},M){return Math.round((J[1]-M)/A[1])}function p({scale:A,translate:J},M,W){return M*A[W]+J[W]}function a(A){A=A.coords;return{x:A[0],y:A[1]}}function l(A,J){A.coords[0]=J.x;A.coords[1]=J.y;return A}function q(A){A=A.coords;return{x:A[0],y:A[1],z:A[2]}}function F(A,J){A.coords[0]=J.x;A.coords[1]=J.y;A.coords[2]=J.z;return A}function N(A){A=A.coords;return{x:A[0],y:A[1],m:A[2]}}function d(A,J){A.coords[0]=J.x;A.coords[1]=
J.y;A.coords[2]=J.m;return A}function I(A){A=A.coords;return{x:A[0],y:A[1],z:A[2],m:A[3]}}function R(A,J){A.coords[0]=J.x;A.coords[1]=J.y;A.coords[2]=J.z;A.coords[3]=J.m;return A}function L(A,J){return A&&J?R:A?F:J?d:l}function U(A,J,M,W,Z){M=L(M,W);for(const {geometry:ba,attributes:ea}of J)J=null!=ba?M(new v,ba):null,A.push(new n.OptimizedFeature(J,ea,null,Z?ea[Z]:void 0));return A}function S(A,J,M=L(null!=J.z,null!=J.m)){return M(A,J)}function Q(A,J,M,W){for(const {geometry:Z,attributes:ba}of J)A.push({attributes:ba,
geometry:null!=Z?m(Z,M,W):null});return A}function m(A,J,M){if(null==A)return null;const W=x(J,M),Z=[];for(let ba=0;ba<A.coords.length;ba+=W){const ea=[];for(let la=0;la<W;la++)ea.push(A.coords[ba+la]);Z.push(ea)}return J?M?{points:Z,hasZ:J,hasM:M}:{points:Z,hasZ:J}:M?{points:Z,hasM:M}:{points:Z}}function C(A,J,M,W,Z){M=x(M,W);for(const {geometry:ba,attributes:ea}of J)J=null!=ba?z(new v,ba,M):null,A.push(new n.OptimizedFeature(J,ea,null,Z?ea[Z]:void 0));return A}function z(A,J,M=x(J.hasZ,J.hasM)){A.lengths[0]=
J.points.length;const W=A.coords;let Z=0;for(const ba of J.points)for(J=0;J<M;J++)W[Z++]=ba[J];return A}function B(A,J,M){if(!A)return null;const W=x(J,M),{coords:Z,lengths:ba}=A;A=[];let ea=0;for(const la of ba){const na=[];for(let wa=0;wa<la;wa++){const ta=[];for(let va=0;va<W;va++)ta.push(Z[ea++]);na.push(ta)}A.push(na)}return J?M?{paths:A,hasZ:J,hasM:M}:{paths:A,hasZ:J}:M?{paths:A,hasM:M}:{paths:A}}function P(A,J,M,W,Z){M=x(M,W);for(const {geometry:ba,attributes:ea,centroid:la}of J)J=null!=ba?
K(new v,ba,M):null,W=null!=la?S(new v,la):null,A.push(new n.OptimizedFeature(J,ea,W,Z?ea[Z]:void 0));return A}function K(A,J,M=x(J.hasZ,J.hasM)){const {lengths:W,coords:Z}=A;let ba=0;for(const ea of J.paths){for(const la of ea)for(J=0;J<M;J++)Z[ba++]=la[J];W.push(ea.length)}return A}function T(A,J,M){if(!A)return null;const W=x(J,M),{coords:Z,lengths:ba}=A;A=[];let ea=0;for(const la of ba){const na=[];for(let wa=0;wa<la;wa++){const ta=[];for(let va=0;va<W;va++)ta.push(Z[ea++]);na.push(ta)}A.push(na)}return J?
M?{rings:A,hasZ:J,hasM:M}:{rings:A,hasZ:J}:M?{rings:A,hasM:M}:{rings:A}}function Y(A,J,M=J.hasZ,W=J.hasM){return fa(A,J.rings,M,W)}function fa(A,J,M,W){M=x(M,W);const {lengths:Z,coords:ba}=A;W=0;xa(A);for(const ea of J){for(const la of ea)for(J=0;J<M;J++)ba[W++]=la[J];Z.push(ea.length)}return A}function oa(A,J,M,W,Z,ba){ya(A);if(!M){for(const ea of J)A.push(new n.OptimizedFeature(null,ea.attributes,null,ba?ea.attributes[ba]:void 0));return A}switch(M){case "esriGeometryPoint":return U(A,J,W,Z,ba);
case "esriGeometryMultipoint":return C(A,J,W,Z,ba);case "esriGeometryPolyline":return P(A,J,W,Z,ba);case "esriGeometryPolygon":for(const {geometry:ea,centroid:la,attributes:na}of J)J=null!=ea?Y(new v,ea,W,Z):null,M=ba?na[ba]:void 0,null!=la?A.push(new n.OptimizedFeature(J,na,l(new v,la),M)):A.push(new n.OptimizedFeature(J,na,null,M));break;default:Ha().error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${M}'`)),ya(A)}return A}function sa(A,J,M,W){A=A&&("coords"in
A?A:A.geometry);if(null==A)return null;switch(J){case "esriGeometryPoint":return J=a,M&&W?J=I:M?J=q:W&&(J=N),J(A);case "esriGeometryMultipoint":return m(A,M,W);case "esriGeometryPolyline":return B(A,M,W);case "esriGeometryPolygon":return T(A,M,W);default:return Ha().error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${J}'`)),null}}function ca(A,J,M,W,Z){ya(A);if(null==M){for(const ea of J)A.push({attributes:ea.attributes});return A}switch(M){case "esriGeometryPoint":M=
a;W&&Z?M=I:W?M=q:Z&&(M=N);for(var ba of J){const {geometry:ea,attributes:la}=ba;W=null!=ea?M(ea):null;A.push({attributes:la,geometry:W})}break;case "esriGeometryMultipoint":return Q(A,J,W,Z);case "esriGeometryPolyline":for(const {geometry:ea,attributes:la}of J)A.push({attributes:la,geometry:null!=ea?B(ea,W,Z):null});break;case "esriGeometryPolygon":for(const {geometry:ea,attributes:la,centroid:na}of J)ba=null!=ea?T(ea,W,Z):null,null!=na?(J=a(na),A.push({attributes:la,centroid:J,geometry:ba})):A.push({attributes:la,
geometry:ba});break;default:Ha().error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${M}'`))}return A}function ka(A,J,M,W,Z,ba,ea=M,la=W){xa(A);if(!J?.coords.length)return null;Z=Fa[Z];const {coords:na,lengths:wa}=J;J=x(M,W);const ta=x(M&&ea,W&&la);M=u(M,W,ea,la);if(!wa.length)return M(A.coords,na,0,0,H(ba,na[0]),t(ba,na[1])),xa(A,J,0),A;let va,Ea=0,za,Da=0;for(const Ca of wa){if(Ca<Z)continue;let Aa=0;za=Da;la=W=H(ba,na[Ea]);va=ea=t(ba,na[Ea+1]);M(A.coords,
na,za,Ea,la,va);Aa++;Ea+=J;za+=ta;for(let Ka=1;Ka<Ca;Ka++,Ea+=J)if(la=H(ba,na[Ea]),va=t(ba,na[Ea+1]),la!==W||va!==ea)M(A.coords,na,za,Ea,la-W,va-ea),za+=ta,Aa++,W=la,ea=va;Aa>=Z&&(A.lengths.push(Aa),Da=za)}ya(A.coords,Da);return A.coords.length?A:null}function ia(A,J,M,W,Z,ba,ea){let la=W,na=0;for(let ta=ba+M;ta<ea;ta+=M){var wa=J[ta];const va=J[ta+1],Ea=J[ea],za=J[ea+1];let Da=J[ba],Ca=J[ba+1],Aa=Ea-Da,Ka=za-Ca;if(0!==Aa||0!==Ka){const Ra=((wa-Da)*Aa+(va-Ca)*Ka)/(Aa*Aa+Ka*Ka);1<Ra?(Da=Ea,Ca=za):
0<Ra&&(Da+=Aa*Ra,Ca+=Ka*Ra)}Aa=wa-Da;Ka=va-Ca;wa=Aa*Aa+Ka*Ka;wa>la&&(na=ta,la=wa)}la>W&&(na-ba>M&&ia(A,J,M,W,Z,ba,na),Z(A,J,A.length,na,J[na],J[na+1]),ea-na>M&&ia(A,J,M,W,Z,na,ea))}function qa(A,J,M,W,Z){const {coords:ba,lengths:ea}=J;M=x(M,W);if(!ba.length)return A!==J&&xa(A),A;r.assertIsSome(Z);const {originPosition:la,scale:na,translate:wa}=Z;Z=ja;Z.originPosition=la;W=Z.scale;W[0]=na[0]??1;W[1]=-(na[1]??1);W[2]=na[2]??1;W[3]=na[3]??1;var ta=Z.translate;ta[0]=wa[0]??0;ta[1]=wa[1]??0;ta[2]=wa[2]??
0;ta[3]=wa[3]??0;if(!ea.length){for(W=0;W<M;++W)A.coords[W]=p(Z,ba[W],W);A!==J&&xa(A,M,0);return A}ta=0;for(let Ea=0;Ea<ea.length;Ea++){const za=ea[Ea];A.lengths[Ea]=za;for(var va=0;va<M;++va)A.coords[ta+va]=p(Z,ba[ta+va],va);va=A.coords[ta];let Da=A.coords[ta+1];ta+=M;for(let Ca=1;Ca<za;Ca++,ta+=M){va+=ba[ta]*W[0];Da+=ba[ta+1]*W[1];A.coords[ta]=va;A.coords[ta+1]=Da;for(let Aa=2;Aa<M;++Aa)A.coords[ta+Aa]=p(Z,ba[ta+Aa],Aa)}}A!==J&&xa(A,ba.length,ea.length);return A}function ra(A,J,M,W){let Z=0,ba=
A[W*J],ea=A[W*(J+1)];for(let la=1;la<M;la++){const na=ba+A[W*(J+la)],wa=ea+A[W*(J+la)+1],ta=(na-ba)*(wa+ea);ba=na;ea=wa;Z+=ta}return.5*Z}function xa(A,J=0,M=0){ya(A.lengths,M);ya(A.coords,J)}function ya(A,J=0){A.length!==J&&(A.length=J)}const Ha=()=>w.getLogger("esri.layers.graphics.featureConversionUtils"),Fa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},La=(A,J,M,W,Z,ba)=>{A[M]=Z;A[M+1]=ba},Ta=(A,J,M,W,Z,ba)=>{A[M]=Z;A[M+1]=ba;
A[M+2]=J[W+2]},h=(A,J,M,W,Z,ba)=>{A[M]=Z;A[M+1]=ba;A[M+2]=J[W+3]},E=(A,J,M,W,Z,ba)=>{A[M]=Z;A[M+1]=ba;A[M+2]=J[W+2];A[M+3]=J[W+3]},X=[],aa=[],ja={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};b.convertFromFeature=function(A,J,M,W,Z){X[0]=A;[A]=oa(aa,X,J,M,W,Z);ya(X);ya(aa);return A};b.convertFromFeatureSet=function(A,J){const M=new e,{hasM:W,hasZ:Z,features:ba,objectIdFieldName:ea,spatialReference:la,geometryType:na,exceededTransferLimit:wa,transform:ta,fields:va}=A;va&&(M.fields=
va);M.geometryType=na??null;M.objectIdFieldName=ea??J??null;M.spatialReference=la??null;if(!M.objectIdFieldName)return Ha().error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),M;ba&&oa(M.features,ba,na,Z,W,M.objectIdFieldName);wa&&(M.exceededTransferLimit=wa);W&&(M.hasM=W);Z&&(M.hasZ=Z);ta&&(M.transform=ta);return M};b.convertFromFeatures=oa;b.convertFromGeometry=function(A,J,M){if(null==A)return null;const W=new v;"hasZ"in A&&null==J&&(J=A.hasZ);"hasM"in A&&
null==M&&(M=A.hasM);if(g.isPoint(A))return L(null!=J?J:null!=A.z,null!=M?M:null!=A.m)(W,A);if(g.isPolygon(A))return Y(W,A,J,M);if(g.isPolyline(A))return K(W,A,x(J,M));if(g.isMultipoint(A))return z(W,A,x(J,M));Ha().error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${A}'`))};b.convertFromMultipoint=z;b.convertFromMultipointFeatures=C;b.convertFromNestedArray=fa;b.convertFromPoint=S;b.convertFromPointFeatures=U;b.convertFromPolygon=Y;b.convertFromPolyline=K;b.convertFromPolylineFeatures=
P;b.convertToFeature=function(A,J,M,W){aa[0]=A;ca(X,aa,J,M,W);A=X[0];ya(X);ya(aa);return A};b.convertToFeatureSet=function(A){const {objectIdFieldName:J,spatialReference:M,transform:W,fields:Z,hasM:ba,hasZ:ea,features:la,geometryType:na,exceededTransferLimit:wa,uniqueIdField:ta,queryGeometry:va,queryGeometryType:Ea}=A;A=ca([],la,na,ea,ba);const za=sa(va,Ea,!1,!1);A={features:A,fields:Z,geometryType:na,objectIdFieldName:J,spatialReference:M,uniqueIdField:ta,queryGeometry:za};W&&(A.transform=W);wa&&
(A.exceededTransferLimit=wa);ba&&(A.hasM=ba);ea&&(A.hasZ=ea);return A};b.convertToFeatures=ca;b.convertToGeometry=sa;b.convertToMultipoint=m;b.convertToMultipointFeatures=Q;b.convertToPoint=function(A,J,M){return A?J?M?I(A):q(A):M?N(A):a(A):null};b.convertToPolygon=T;b.convertToPolyline=B;b.deltaDecodeGeometry=function(A,J){if(null==A)return null;const M=A.clone(),W=A.coords;A=A.lengths;let Z=0;for(let la=0;la<A.length;la++){const na=A[la];var ba=W[J*Z],ea=W[J*Z+1];for(let wa=1;wa<na;wa++)ba+=W[J*
(Z+wa)],ea+=W[J*(Z+wa)+1],M.coords[J*(Z+wa)]=ba,M.coords[J*(Z+wa)+1]=ea;Z+=na}return M};b.deltaEncodeGeometry=function(A,J){const M=A.clone(),W=A.coords;A=A.lengths;let Z=0;for(let ea=0;ea<A.length;ea++){const la=A[ea];let na=W[J*Z];var ba=W[J*Z+1];for(let wa=1;wa<la;wa++){const ta=W[J*(Z+wa)],va=W[J*(Z+wa)+1];ba=va-ba;M.coords[J*(Z+wa)]=ta-na;M.coords[J*(Z+wa)+1]=ba;na=ta;ba=va}Z+=la}return M};b.generalizeOptimizedGeometry=function(A,J,M,W,Z,ba,ea=M,la=W){xa(A);if(!J?.coords.length)return null;Z=
Fa[Z];const {coords:na,lengths:wa}=J;J=x(M,W);const ta=x(M&&ea,W&&la);M=u(M,W,ea,la);if(!wa.length)return M(A.coords,na,0,0,na[0],na[1]),xa(A,J,0),A;W=0;ba*=ba;for(const va of wa){if(va<Z){W+=va*J;continue}ea=A.coords.length/ta;la=W;const Ea=W+(va-1)*J;M(A.coords,na,A.coords.length,la,na[la],na[la+1]);ia(A.coords,na,J,ba,M,la,Ea);M(A.coords,na,A.coords.length,Ea,na[Ea],na[Ea+1]);la=A.coords.length/ta-ea;la>=Z?A.lengths.push(la):ya(A.coords,ea*ta);W+=va*J}return A.coords.length?A:null};b.getBoundsOptimizedGeometry=
function(A,J,M,W){if(!J?.coords?.length)return null;M=x(M,W);let Z=W=Number.POSITIVE_INFINITY,ba=Number.NEGATIVE_INFINITY,ea=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let la=0;la<J.length;la+=M){const na=J[la],wa=J[la+1];W=Math.min(W,na);ba=Math.max(ba,na);Z=Math.min(Z,wa);ea=Math.max(ea,wa)}}G.is(A)?G.fromRectValues(A,W,Z,ba,ea):y.fromValues(W,Z,ba,ea,A);return A};b.getQuantizedArea=function(A,J){const {coords:M,lengths:W}=A;let Z=A=0;for(let ba=0;ba<W.length;ba++){const ea=W[ba];Z+=
ra(M,A,ea,J);A+=ea}return Math.abs(Z)};b.getQuantizedBoundsOptimizedGeometry=function(A,J,M,W){M=x(M,W);const {lengths:Z,coords:ba}=J;W=J=Number.POSITIVE_INFINITY;let ea=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY,na=0;for(const wa of Z){let ta=ba[na],va=ba[na+1];J=Math.min(ta,J);W=Math.min(va,W);ea=Math.max(ta,ea);la=Math.max(va,la);na+=M;for(let Ea=1;Ea<wa;Ea++,na+=M){const za=ba[na],Da=ba[na+1];ta+=za;va+=Da;0>za&&(J=Math.min(J,ta));0<za&&(ea=Math.max(ea,ta));0>Da?W=Math.min(W,va):0<Da&&
(la=Math.max(la,va))}}A[0]=J;A[1]=W;A[2]=ea;A[3]=la;return A};b.getSignedQuantizedRingArea=ra;b.quantizeOptimizedFeatureSet=function(A,J){const {geometryType:M,features:W,hasM:Z,hasZ:ba}=J;if(!A)return J;for(let ea=0;ea<W.length;ea++){const la=W[ea],na=la.weakClone();na.geometry=new v;ka(na.geometry,la.geometry,Z,ba,M,A);la.centroid&&(na.centroid=new v,ka(na.centroid,la.centroid,Z,ba,"esriGeometryPoint",A));W[ea]=na}J.transform=A;return J};b.quantizeOptimizedGeometry=ka;b.quantizeX=H;b.quantizeY=
t;b.removeCollinearVertices=function(A,J,M,W,Z){if(!J?.coords?.length)return null;M=Fa[M];const {coords:ba,lengths:ea}=J;J=u(W,Z,W,Z);W=x(W,Z);let la=Z=0,na=0,wa=0;for(const Ea of ea){la=wa;J(A.coords,ba,la,Z,ba[Z],ba[Z+1]);Z+=W;var ta=ba[Z];let za=ba[Z+1],Da=ta,Ca=za;var va=za/ta;la+=W;J(A.coords,ba,la,Z,Da,Ca);Z+=W;for(let Aa=2;Aa<Ea;Aa++){ta=ba[Z];za=ba[Z+1];const Ka=za/ta,Ra=va===Ka||!isFinite(va)&&!isFinite(Ka);va=Ra&&isFinite(Ka)?0<=va&&0<=Ka||0>=va&&0>=Ka:0<=Ca&&0<=za||0>=Ca&&0>=za;Ra&&va?
(Da+=ta,Ca+=za):(Da=ta,Ca=za,la+=W);J(A.coords,ba,la,Z,Da,Ca);Z+=W;va=Ka}la+=W;ta=(la-wa)/W;ta>=M&&(A.lengths[na]=ta,wa=la,na++)}A.coords.length>wa&&(A.coords.length=wa);A.lengths.length>na&&(A.lengths.length=na);return A.coords.length&&A.lengths.length?A:null};b.removeZMValues=function(A,J,M,W,Z,ba){xa(A);A.lengths.push(...J.lengths);if(M===Z&&W===ba)for(var ea=0;ea<J.coords.length;ea++)A.coords.push(J.coords[ea]);else for(ea=x(M,W),M=u(M,W,Z,ba),J=J.coords,W=0;W<J.length;W+=ea)M(A.coords,J,A.coords.length,
W,J[W],J[W+1]);return A};b.unquantizeOptimizedFeatureSet=function(A){const {transform:J,features:M,hasM:W,hasZ:Z}=A;if(!J)return A;for(const ba of M)null!=ba.geometry&&qa(ba.geometry,ba.geometry,W,Z,J),null!=ba.centroid&&qa(ba.centroid,ba.centroid,W,Z,J);A.transform=null;return A};b.unquantizeOptimizedGeometry=qa;b.unquantizeValue=p;b.unquantizeX=function(A,J){return p(A,J,0)};b.unquantizeY=function(A,J){return p(A,-J,1)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../Extent","./aaBoundingRect"],function(b,f,w){function r(p=H){return[p[0],p[1],p[2],p[3],p[4],p[5]]}function G(p,a,l,q,F,N,d=r()){d[0]=p;d[1]=a;d[2]=l;d[3]=q;d[4]=F;d[5]=N;return d}function y(p){return p[0]>=p[3]?0:p[3]-p[0]}function g(p){return p[1]>=p[4]?0:p[4]-p[1]}function n(p){return p[2]>=p[5]?0:p[5]-p[2]}function e(p,a){return Math.max(a[0],p[0])<=Math.min(a[3],p[3])&&Math.max(a[1],p[1])<=Math.min(a[4],p[4])&&Math.max(a[2],p[2])<=Math.min(a[5],p[5])}function v(p,a){p[0]=a[0];p[1]=a[1];p[2]=
a[2];p[3]=a[3];p[4]=a[4];p[5]=a[5];return p}function x(p){return 6===p.length}const u=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],H=[0,0,0,0,0,0],t=r();b.allFinite=function(p){for(let a=0;6>a;a++)if(!isFinite(p[a]))return!1;return!0};b.center=function(p,a=[0,0,0]){a[0]=p[0]+y(p)/2;a[1]=p[1]+g(p)/2;a[2]=p[2]+n(p)/2;return a};b.contains=function(p,a){return a[0]>=p[0]&&a[1]>=p[1]&&a[2]>=p[2]&&a[3]<=p[3]&&a[4]<=p[4]&&a[5]<=p[5]};b.containsPoint=function(p,a){return a[0]>=p[0]&&a[1]>=p[1]&&
a[2]>=p[2]&&a[0]<=p[3]&&a[1]<=p[4]&&a[2]<=p[5]};b.containsPointWithMargin=function(p,a,l){return a[0]>=p[0]-l&&a[1]>=p[1]-l&&a[2]>=p[2]-l&&a[0]<=p[3]+l&&a[1]<=p[4]+l&&a[2]<=p[5]+l};b.create=r;b.depth=g;b.diameter=function(p){const a=y(p),l=n(p);p=g(p);return Math.sqrt(a*a+l*l+p*p)};b.empty=function(p){return p?v(p,u):r(u)};b.equals=function(p,a,l){if(null==p||null==a)return p===a;if(!x(p)||!x(a))return!1;if(l)for(let q=0;q<p.length;q++){if(!l(p[q],a[q]))return!1}else for(l=0;l<p.length;l++)if(p[l]!==
a[l])return!1;return!0};b.expandWithAABB=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[2]=Math.min(p[2],a[2]);p[3]=Math.max(p[3],a[3]);p[4]=Math.max(p[4],a[4]);p[5]=Math.max(p[5],a[5])};b.expandWithBuffer=function(p,a,l=0,q=a.length/3){let F=p[0],N=p[1],d=p[2],I=p[3],R=p[4],L=p[5];for(let U=0;U<q;U++)F=Math.min(F,a[l+3*U]),N=Math.min(N,a[l+3*U+1]),d=Math.min(d,a[l+3*U+2]),I=Math.max(I,a[l+3*U]),R=Math.max(R,a[l+3*U+1]),L=Math.max(L,a[l+3*U+2]);p[0]=F;p[1]=N;p[2]=d;p[3]=I;p[4]=
R;p[5]=L};b.expandWithNestedArray=function(p,a,l){const q=a.length;let F=p[0],N=p[1],d=p[2],I=p[3],R=p[4],L=p[5];if(l)for(l=0;l<q;l++){var U=a[l];F=Math.min(F,U[0]);N=Math.min(N,U[1]);d=Math.min(d,U[2]);I=Math.max(I,U[0]);R=Math.max(R,U[1]);L=Math.max(L,U[2])}else for(l=0;l<q;l++)U=a[l],F=Math.min(F,U[0]),N=Math.min(N,U[1]),I=Math.max(I,U[0]),R=Math.max(R,U[1]);p[0]=F;p[1]=N;p[2]=d;p[3]=I;p[4]=R;p[5]=L};b.expandWithOffset=function(p,a,l,q){p[0]=Math.min(p[0],p[0]+a);p[3]=Math.max(p[3],p[3]+a);p[1]=
Math.min(p[1],p[1]+l);p[4]=Math.max(p[4],p[4]+l);p[2]=Math.min(p[2],p[2]+q);p[5]=Math.max(p[5],p[5]+q)};b.expandWithRect=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[3]=Math.max(p[3],a[2]);p[4]=Math.max(p[4],a[3])};b.expandWithVec3=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[2]=Math.min(p[2],a[2]);p[3]=Math.max(p[3],a[0]);p[4]=Math.max(p[4],a[1]);p[5]=Math.max(p[5],a[2])};b.fromExtent=function(p,a=r()){a[0]=p.xmin;a[1]=p.ymin;a[2]=p.hasZ?p.zmin:-Infinity;
a[3]=p.xmax;a[4]=p.ymax;a[5]=p.hasZ?p.zmax:Infinity;return a};b.fromMinMax=function(p,a,l=r()){l[0]=p[0];l[1]=p[1];l[2]=p[2];l[3]=a[0];l[4]=a[1];l[5]=a[2];return l};b.fromRect=function(p,a){p[0]=a[0];p[1]=a[1];p[2]=Number.NEGATIVE_INFINITY;p[3]=a[2];p[4]=a[3];p[5]=Number.POSITIVE_INFINITY;return p};b.fromRectValues=function(p,a,l,q,F){p[0]=a;p[1]=l;p[2]=Number.NEGATIVE_INFINITY;p[3]=q;p[4]=F;p[5]=Number.POSITIVE_INFINITY;return p};b.fromValues=G;b.getMax=function(p,a){a[0]=p[3];a[1]=p[4];a[2]=p[5];
return a};b.getMin=function(p,a){a[0]=p[0];a[1]=p[1];a[2]=p[2];return a};b.height=n;b.intersects=e;b.intersectsClippingArea=function(p,a){return null==a?!0:e(p,a)};b.is=x;b.isPoint=function(p){return 0===y(p)&&0===g(p)&&0===n(p)};b.maximumDimension=function(p){return Math.max(y(p),n(p),g(p))};b.negativeInfinity=u;b.offset=function(p,a,l,q,F=p){F[0]=p[0]+a;F[1]=p[1]+l;F[2]=p[2]+q;F[3]=p[3]+a;F[4]=p[4]+l;F[5]=p[5]+q;return F};b.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];
b.scale=function(p,a,l=p){const q=p[0]+y(p)/2,F=p[1]+g(p)/2,N=p[2]+n(p)/2;l[0]=q+(p[0]-q)*a;l[1]=F+(p[1]-F)*a;l[2]=N+(p[2]-N)*a;l[3]=q+(p[3]-q)*a;l[4]=F+(p[4]-F)*a;l[5]=N+(p[5]-N)*a;return l};b.set=v;b.setMax=function(p,a,l=p){l[3]=a[0];l[4]=a[1];l[5]=a[2];l!==p&&(l[0]=p[0],l[1]=p[1],l[2]=p[2]);return p};b.setMin=function(p,a,l=p){l[0]=a[0];l[1]=a[1];l[2]=a[2];l!==p&&(l[3]=p[3],l[4]=p[4],l[5]=p[5]);return l};b.size=function(p,a=[0,0,0]){a[0]=y(p);a[1]=g(p);a[2]=n(p);return a};b.toExtent=function(p,
a){return isFinite(p[2])||isFinite(p[5])?new f({xmin:p[0],xmax:p[3],ymin:p[1],ymax:p[4],zmin:p[2],zmax:p[5],spatialReference:a}):new f({xmin:p[0],xmax:p[3],ymin:p[1],ymax:p[4],spatialReference:a})};b.toRect=function(p,a){a||=w.create();a[0]=p[0];a[1]=p[1];a[2]=p[3];a[3]=p[4];return a};b.width=y;b.wrap=function(p,a,l,q,F,N){return G(p,a,l,q,F,N,t)};b.zero=H;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports"],function(b){class f{constructor(r=
null,G={},y,g){this.geometry=r;this.attributes=G;this.centroid=y;this.objectId=g;this.geohashY=this.geohashX=this.displayId=0}weakClone(){const r=new f(this.geometry,this.attributes,this.centroid,this.objectId);r.displayId=this.displayId;r.geohashX=this.geohashX;r.geohashY=this.geohashY;return r}clone(){var r=this.geometry?.clone();r=new f(r,{...this.attributes},this.centroid?.clone(),this.objectId);r.displayId=this.displayId;r.geohashX=this.geohashX;r.geohashY=this.geohashY;return r}}class w extends f{}
b.OptimizedFeature=f;b.OptimizedFeatureWithGeometry=w;b.hasGeometry=function(r){return!!r.geometry?.coords?.length};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class b{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=
!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const f=new b;f.objectIdFieldName=this.objectIdFieldName;f.globalIdFieldName=this.globalIdFieldName;f.geohashFieldName=this.geohashFieldName;f.geometryProperties=this.geometryProperties;f.geometryType=this.geometryType;f.spatialReference=this.spatialReference;f.hasZ=this.hasZ;f.hasM=this.hasM;f.features=this.features;f.fields=this.fields;f.transform=this.transform;f.exceededTransferLimit=this.exceededTransferLimit;f.uniqueIdField=
this.uniqueIdField;f.queryGeometry=this.queryGeometry;f.queryGeometryType=this.queryGeometryType;return f}}return b})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class b{constructor(f=[],w=[],r=!1){this.lengths=f??[];this.coords=w??[];this.hasIndeterminateRingOrder=r}static fromRect(f){const [w,r,G,y]=f;f=G-w;const g=y-r;return new b([5],[w,r,f,0,0,g,-f,0,0,-g])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((f,
w)=>f+w)}forEachVertex(f){let w=0;this.lengths.length||f(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const G=this.lengths[r];for(let y=0;y<G;y++)f(this.coords[2*(y+w)],this.coords[2*(y+w)+1]);w+=G}}deltaDecode(){const f=this.clone(),{coords:w,lengths:r}=f;let G=0;for(const y of r){for(let g=1;g<y;g++)w[2*(G+g)]+=w[2*(G+g)-2],w[2*(G+g)+1]+=w[2*(G+g)-1];G+=y}return f}clone(f){if(0===this.lengths.length)return new b([],[this.coords[0],this.coords[1]]);var w=2*(0===this.lengths.length?
1:this.lengths.reduce((r,G)=>r+G));w=this.coords.slice(0,w);return f?(f.set(w),new b(this.lengths,f,this.hasIndeterminateRingOrder)):new b(Array.from(this.lengths),Array.from(w),this.hasIndeterminateRingOrder)}}return b})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),
function(b,f,w,r,G,y,g,n,e,v){const x=G.create();class u{constructor(H){this.geometryInfo=H;this._boundsStore=new n.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new w;this.featureAdapter=v.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let H=
0;this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(H+=t.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:H/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(H){if(null==this.fullBounds)return null;const [t,p,a,l]=this.fullBounds;return{xmin:t,ymin:p,xmax:a,ymax:l,spatialReference:e.cleanFromGeometryEngine(H)}}add(H){this._add(H);this._emitChanged()}addMany(H){for(const t of H)this._add(t);this._emitChanged()}upsertMany(H){H=H.map(t=>this._upsert(t));
this._emitChanged();return H.filter(b.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(H){H=this._featuresById.get(H);if(!H)return null;this._remove(H);this._emitChanged();return H}removeManyById(H){this._boundsStore.invalidateIndex();for(const t of H)(H=this._featuresById.get(t))&&this._remove(H);this._emitChanged()}forEachBounds(H,t){for(const p of H)(H=this._boundsStore.get(p.objectId))&&t(G.fromRect(x,H))}getFeature(H){return this._featuresById.get(H)}has(H){return this._featuresById.has(H)}forEach(H){this._featuresById.forEach(t=>
H(t))}forEachInBounds(H,t){this._boundsStore.forEachInBounds(H,p=>{t(this._featuresById.get(p))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let H=!1;this._featuresById.forEach((t,p)=>{this._markedIds.has(p)||(H=!0,this._remove(t))});this._markedIds.clear();H&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(H){if(H){var t=H.objectId;if(null==t)r.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature",
"feature id is missing",{feature:H}));else{var p=this._featuresById.get(t);this._markedIds.add(t);if(p){H.displayId=p.displayId;var a=this._boundsStore.get(t);this._boundsStore.delete(t)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(H);H.geometry?.coords?.length?(a=g.getBoundsOptimizedGeometry(null!=a?a:y.create(),H.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(t,a)):this._boundsStore.set(t,null);this._featuresById.set(t,H)}}}_upsert(H){const t=H?.objectId;
if(null==t)return r.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:H})),null;const p=this._featuresById.get(t);if(!p)return this._add(H),H;this._markedIds.add(t);const {geometry:a,attributes:l}=H;for(const q in l)p.attributes[q]=l[q];a&&(p.geometry=a,this._boundsStore.set(t,g.getBoundsOptimizedGeometry(y.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return p}_remove(H){if(null!=this.onFeatureRemove)this.onFeatureRemove(H);
const t=H.objectId;this._markedIds.delete(t);this._boundsStore.delete(t);this._featuresById.delete(t);return H}}return u})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(b,f,w,r){function G(n,e,v){y.minX=e[0];y.minY=e[1];y.maxX=e[2];y.maxY=e[3];n.search(y,v)}const y={minX:0,minY:0,maxX:0,maxY:0};class g{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=
new Map;this._idByBounds=new Map;this._index=new w.PooledRBush(9,f("esri-csp-restrictions")?n=>({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const n=Array(this._idByBounds.size);let e=0;this._idByBounds.forEach((v,x)=>{n[e++]=x});this._indexInvalid=!1;this._index.clear();this._index.load(n)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(n=>this._idByBounds.has(n))))),this._boundsToLoad.length=
0)}}get fullBounds(){if(!this._boundsById.size)return null;const n=r.empty();for(const e of this._boundsById.values())e&&(n[0]=Math.min(e[0],n[0]),n[1]=Math.min(e[1],n[1]),n[2]=Math.max(e[2],n[2]),n[3]=Math.max(e[3],n[3]));return n}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(n){const e=this._boundsById.get(n);this._boundsById.delete(n);e&&(this._idByBounds.delete(e),this._indexInvalid||
this._index.remove(e))}forEachInBounds(n,e){this._loadIndex();G(this._index,n,v=>e(this._idByBounds.get(v)))}get(n){return this._boundsById.get(n)}has(n){return this._boundsById.has(n)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(n,e){if(!this._indexInvalid){const v=this._boundsById.get(n);v&&(this._index.remove(v),this._idByBounds.delete(v))}this._boundsById.set(n,e);e&&(this._idByBounds.set(e,n),this._indexInvalid||(this._boundsToLoad.push(e),5E4<
this._boundsToLoad.length&&this._loadIndex()))}}b.BoundsStore=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../PooledArray","../../../chunks/quickselect"],function(b,f,w,r){function G(L,U){y(L,0,L.children.length,U,L)}function y(L,U,S,Q,m){m||=new I([]);m.minX=Infinity;m.minY=Infinity;m.maxX=-Infinity;m.maxY=-Infinity;for(let C=U,z;C<S;C++)z=L.children[C],g(m,L.leaf?Q(z):z);return m}function g(L,
U){L.minX=Math.min(L.minX,U.minX);L.minY=Math.min(L.minY,U.minY);L.maxX=Math.max(L.maxX,U.maxX);L.maxY=Math.max(L.maxY,U.maxY)}function n(L,U){return L.minX-U.minX}function e(L,U){return L.minY-U.minY}function v(L){return(L.maxX-L.minX)*(L.maxY-L.minY)}function x(L){return L.maxX-L.minX+(L.maxY-L.minY)}function u(L,U){return L.minX<=U.minX&&L.minY<=U.minY&&U.maxX<=L.maxX&&U.maxY<=L.maxY}function H(L,U){return U.minX<=L.maxX&&U.minY<=L.maxY&&U.maxX>=L.minX&&U.maxY>=L.minY}function t(L,U,S,Q,m){for(U=
[U,S];U.length;){S=U.pop();const C=U.pop();if(S-C<=Q)continue;const z=C+Math.ceil((S-C)/Q/2)*Q;r.quickselect(L,z,C,S,m);U.push(C,z,z,S)}}class p{constructor(L=9,U){this._compareMinX=n;this._compareMinY=e;this._toBBox=S=>S;this._maxEntries=Math.max(4,L||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));U&&("function"===typeof U?this._toBBox=U:this._initFormat(U));this.clear()}destroy(){this.clear();a.prune();l.prune();q.prune();F.prune()}all(L){this._all(this._data,L)}search(L,U){let S=
this._data;const Q=this._toBBox;if(H(L,S))for(a.clear();S;){for(let m=0,C=S.children.length;m<C;m++){const z=S.children[m],B=S.leaf?Q(z):z;H(L,B)&&(S.leaf?U(z):u(L,B)?this._all(z,U):a.push(z))}S=a.pop()}}collides(L){let U=this._data;const S=this._toBBox;if(!H(L,U))return!1;for(a.clear();U;){for(let Q=0,m=U.children.length;Q<m;Q++){const C=U.children[Q],z=U.leaf?S(C):C;if(H(L,z)){if(U.leaf||u(L,z))return!0;a.push(C)}}U=a.pop()}return!1}load(L){if(!L.length)return this;if(L.length<this._minEntries){for(let U=
0,S=L.length;U<S;U++)this.insert(L[U]);return this}L=this._build(L.slice(0,L.length),0,L.length-1,0);if(this._data.children.length)if(this._data.height===L.height)this._splitRoot(this._data,L);else{if(this._data.height<L.height){const U=this._data;this._data=L;L=U}this._insert(L,this._data.height-L.height-1,!0)}else this._data=L;return this}insert(L){L&&this._insert(L,this._data.height-1);return this}clear(){this._data=new I([]);return this}remove(L){if(!L)return this;let U=this._data,S=null,Q=0,
m=!1,C;const z=this._toBBox(L);q.clear();for(F.clear();U||0<q.length;){U||(U=q.pop(),S=q.data[q.length-1],Q=F.pop()??0,m=!0);if(U.leaf&&(C=f.indexOf(U.children,L,U.children.length,U.indexHint),-1!==C)){U.children.splice(C,1);q.push(U);this._condense(q);break}m||U.leaf||!u(U,z)?S?(Q++,U=S.children[Q],m=!1):U=null:(q.push(U),F.push(Q),Q=0,S=U,U=U.children[0])}return this}toJSON(){return this._data}fromJSON(L){this._data=L;return this}_all(L,U){for(l.clear();L;){if(!0===L.leaf)for(const S of L.children)U(S);
else l.pushArray(L.children);L=l.pop()??null}}_build(L,U,S,Q){var m=S-U+1,C=this._maxEntries;if(m<=C)return L=new I(L.slice(U,S+1)),G(L,this._toBBox),L;Q||(Q=Math.ceil(Math.log(m)/Math.log(C)),C=Math.ceil(m/C**(Q-1)));const z=new R([]);z.height=Q;m=Math.ceil(m/C);C=m*Math.ceil(Math.sqrt(C));for(t(L,U,S,C,this._compareMinX);U<=S;U+=C){const B=Math.min(U+C-1,S);t(L,U,B,m,this._compareMinY);for(let P=U;P<=B;P+=m)z.children.push(this._build(L,P,Math.min(P+m-1,B),Q-1))}G(z,this._toBBox);return z}_chooseSubtree(L,
U,S,Q){for(;;){Q.push(U);if(!0===U.leaf||Q.length-1===S)break;let m=Infinity,C=Infinity,z=void 0;for(let B=0,P=U.children.length;B<P;B++){const K=U.children[B],T=v(K),Y=(Math.max(K.maxX,L.maxX)-Math.min(K.minX,L.minX))*(Math.max(K.maxY,L.maxY)-Math.min(K.minY,L.minY))-T;Y<C?(C=Y,m=T<m?T:m,z=K):Y===C&&T<m&&(m=T,z=K)}U=z||U.children[0]}return U}_insert(L,U,S){var Q=this._toBBox;S=S?L:Q(L);q.clear();Q=this._chooseSubtree(S,this._data,U,q);Q.children.push(L);for(g(Q,S);0<=U;)if(q.data[U].children.length>
this._maxEntries)this._split(q,U),U--;else break;this._adjustParentBBoxes(S,q,U)}_split(L,U){const S=L.data[U];var Q=S.children.length;const m=this._minEntries;this._chooseSplitAxis(S,m,Q);(Q=this._chooseSplitIndex(S,m,Q))?(Q=S.children.splice(Q,S.children.length-Q),Q=S.leaf?new I(Q):new R(Q),Q.height=S.height,G(S,this._toBBox),G(Q,this._toBBox),U?L.data[U-1].children.push(Q):this._splitRoot(S,Q)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}_splitRoot(L,U){this._data=
new R([L,U]);this._data.height=L.height+1;G(this._data,this._toBBox)}_chooseSplitIndex(L,U,S){let Q,m,C=void 0;Q=m=Infinity;for(let B=U;B<=S-U;B++){var z=y(L,0,B,this._toBBox);const P=y(L,B,S,this._toBBox),K=Math.max(0,Math.min(z.maxX,P.maxX)-Math.max(z.minX,P.minX))*Math.max(0,Math.min(z.maxY,P.maxY)-Math.max(z.minY,P.minY));z=v(z)+v(P);K<Q?(Q=K,C=B,m=z<m?z:m):K===Q&&z<m&&(m=z,C=B)}return C}_chooseSplitAxis(L,U,S){const Q=L.leaf?this._compareMinX:n,m=L.leaf?this._compareMinY:e,C=this._allDistMargin(L,
U,S,Q);U=this._allDistMargin(L,U,S,m);C<U&&L.children.sort(Q)}_allDistMargin(L,U,S,Q){L.children.sort(Q);Q=this._toBBox;var m=y(L,0,U,Q);const C=y(L,S-U,S,Q);let z=x(m)+x(C);for(let B=U;B<S-U;B++){const P=L.children[B];g(m,L.leaf?Q(P):P);z+=x(m)}for(S=S-U-1;S>=U;S--)m=L.children[S],g(C,L.leaf?Q(m):m),z+=x(C);return z}_adjustParentBBoxes(L,U,S){for(;0<=S;S--)g(U.data[S],L)}_condense(L){for(let U=L.length-1;0<=U;U--){const S=L.data[U];if(0===S.children.length)if(0<U){const Q=L.data[U-1],m=Q.children;
m.splice(f.indexOf(m,S,m.length,Q.indexHint),1)}else this.clear();else G(S,this._toBBox)}}_initFormat(L){const U=["return a"," - b",";"];this._compareMinX=new Function("a","b",U.join(L[0]));this._compareMinY=new Function("a","b",U.join(L[1]));this._toBBox=new Function("a","return {minX: a"+L[0]+", minY: a"+L[1]+", maxX: a"+L[2]+", maxY: a"+L[3]+"};")}}const a=new w,l=new w,q=new w,F=new w({deallocator:void 0});class N{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class d extends N{constructor(){super(...arguments);
this.height=1;this.indexHint=new f.PositionHint}}class I extends d{constructor(L){super();this.children=L;this.leaf=!0}}class R extends d{constructor(L){super();this.children=L;this.leaf=!1}}b.BBox=N;b.PooledRBush=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(b,f){var w={exports:{}};(function(r){(function(G){G=G();void 0!==G&&(r.exports=G)})(function(){function G(n,e,v,x,u){for(;x>v;){if(600<
x-v){var H=x-v+1,t=e-v+1,p=Math.log(H),a=.5*Math.exp(2*p/3);p=.5*Math.sqrt(p*a*(H-a)/H)*(0>t-H/2?-1:1);G(n,e,Math.max(v,Math.floor(e-t*a/H+p)),Math.min(x,Math.floor(e+(H-t)*a/H+p)),u)}H=n[e];t=v;a=x;y(n,v,e);for(0<u(n[x],H)&&y(n,v,x);t<a;){y(n,t,a);t++;for(a--;0>u(n[t],H);)t++;for(;0<u(n[a],H);)a--}0===u(n[v],H)?y(n,v,a):(a++,y(n,a,x));a<=e&&(v=a+1);e<=a&&(x=a-1)}}function y(n,e,v){var x=n[e];n[e]=n[v];n[v]=x}function g(n,e){return n<e?-1:n>e?1:0}return function(n,e,v,x,u){G(n,e,v||0,x||n.length-
1,u||g)}})})(w);f=f.getDefaultExportFromCjs(w.exports);b.quickselect=f})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],function(b,f,w){const r=new w,G=new w,y=new w,g={esriGeometryPoint:f.convertToPoint,esriGeometryPolyline:f.convertToPolyline,esriGeometryPolygon:f.convertToPolygon,esriGeometryMultipoint:f.convertToMultipoint},n=(e,v)=>"_geVersion"!==e?v:void 0;b.cleanFromGeometryEngine=function(e){return e&&"_geVersion"in
e?JSON.parse(JSON.stringify(e,n)):e};b.getGeometry=function(e,v,x,u,H,t,p=v,a=x){const l=v&&p,q=x&&a;u=null!=u?"coords"in u?u:u.geometry:null;if(null==u)return null;if(H)return v=f.generalizeOptimizedGeometry(G,u,v,x,e,H,p,a),t&&(v=f.quantizeOptimizedGeometry(y,v,l,q,e,t)),g[e]?.(v,l,q)??null;if(t)return t=f.quantizeOptimizedGeometry(y,u,v,x,e,t,p,a),g[e]?.(t,l,q)??null;f.removeZMValues(r,u,v,x,p,a);return g[e]?.(r,l,q)??null};b.transformCentroid=function(e,v,x,u=e.hasZ,H=e.hasM){if(null==v)return null;
const t=e.hasZ&&u,p=e.hasM&&H;return x?(e=f.quantizeOptimizedGeometry(y,v,e.hasZ,e.hasM,"esriGeometryPoint",x,u,H),f.convertToPoint(e,t,p)):f.convertToPoint(v,t,p)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(b,f,w,r){b.optimizedFeatureQueryEngineAdapter={getObjectId(G){return G.objectId},getAttributes(G){return G.attributes},
getAttribute(G,y){return G.attributes[y]},cloneWithGeometry(G,y){return new w.OptimizedFeature(y,G.attributes,null,G.objectId)},getGeometry(G){return G.geometry},getCentroid(G,y){null==G.centroid&&(G.centroid=f.getCentroidOptimizedGeometry(new r,G.geometry,y.hasZ,y.hasM));return G.centroid}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(b){function f(r,G,y,g,n,e){e=n?e?4:3:e?3:2;let v=y,x=y+e,u=0,H=0,t=y=0,p=
0;for(let a=0,l=g-1;a<l;a++,v+=e,x+=e){g=G[v];const q=G[v+1],F=G[v+2],N=G[x],d=G[x+1],I=G[x+2];let R=g*d-N*q;t+=R;u+=(g+N)*R;H+=(q+d)*R;n&&(R=g*I-N*F,y+=(F+I)*R,p+=R);g<r[0]&&(r[0]=g);g>r[1]&&(r[1]=g);q<r[2]&&(r[2]=q);q>r[3]&&(r[3]=q);n&&(F<r[4]&&(r[4]=F),F>r[5]&&(r[5]=F))}0<t&&(t*=-1);0<p&&(p*=-1);if(!t)return null;r=[u,H,.5*t];n&&(r[3]=y,r[4]=.5*p);return r}function w(r,G,y,g,n){n=g?n?4:3:n?3:2;let e=G,v=G+n,x=0,u=0,H=0,t=0;for(let q=0,F=y-1;q<F;q++,e+=n,v+=n){var p=r[e];const N=r[e+1],d=r[e+2],
I=r[v],R=r[v+1],L=r[v+2];if(g){var a=I-p;var l=R-N;const U=L-d;a=Math.sqrt(a*a+l*l+U*U)}else a=I-p,l=R-N,a=Math.sqrt(a*a+l*l);a&&(x+=a,g?(p=[p+.5*(I-p),N+.5*(R-N),d+.5*(L-d)],u+=a*p[0],H+=a*p[1],t+=a*p[2]):(p=[p+.5*(I-p),N+.5*(R-N)],u+=a*p[0],H+=a*p[1]))}return 0<x?g?[u/x,H/x,t/x]:[u/x,H/x]:0<y?g?[r[G],r[G+1],r[G+2]]:[r[G],r[G+1]]:null}b.getCentroidOptimizedGeometry=function(r,G,y,g){if(!G?.lengths.length)return null;r.lengths.length&&(r.lengths.length=0);r.coords.length&&(r.coords.length=0);const n=
r.coords,e=[],v=y?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:x,coords:u}=G;var H=y?g?4:3:g?3:2;let t=0;for(const p of x){const a=f(v,u,t,p,y,g);a&&e.push(a);t+=p*H}e.sort((p,a)=>{let l=p[2]-a[2];0===l&&y&&(l=p[4]-a[4]);return l});e.length&&(H=6*e[0][2],n[0]=e[0][0]/H,n[1]=e[0][1]/
H,y&&(H=6*e[0][4],n[2]=0!==H?e[0][3]/H:0),n[0]<v[0]||n[0]>v[1]||n[1]<v[2]||n[1]>v[3]||y&&(n[2]<v[4]||n[2]>v[5]))&&(n.length=0);if(!n.length)if(G=G.lengths[0]?w(u,0,x[0],y,g):null)n[0]=G[0],n[1]=G[1],y&&2<G.length&&(n[2]=G[2]);else return null;return r};b.lineCentroid=w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(b,f,w,r,G,y,g){function n(a,l){if(!l)return null;if("x"in l){var q={x:0,y:0};[q.x,q.y]=a(l.x,l.y,x);null!=l.z&&(q.z=l.z);null!=l.m&&(q.m=l.m);return q}return"xmin"in l?(q={xmin:0,ymin:0,xmax:0,ymax:0},[q.xmin,q.ymin]=a(l.xmin,l.ymin,x),[q.xmax,q.ymax]=a(l.xmax,l.ymax,x),l.hasZ&&(q.zmin=l.zmin,q.zmax=l.zmax,q.hasZ=!0),l.hasM&&(q.mmin=l.mmin,q.mmax=l.mmax,q.hasM=!0),q):"rings"in l?{rings:e(l.rings,a),hasM:l.hasM,hasZ:l.hasZ}:"paths"in l?{paths:e(l.paths,a),hasM:l.hasM,hasZ:l.hasZ}:"points"in
l?{points:v(l.points,a),hasM:l.hasM,hasZ:l.hasZ}:null}function e(a,l){const q=[];for(const F of a)q.push(v(F,l));return q}function v(a,l){const q=[];for(const F of a)a=l(F[0],F[1],[0,0]),q.push(a),2<F.length&&a.push(F[2]),3<F.length&&a.push(F[3]);return q}const x=[0,0],u=n.bind(null,g.lngLatToXY),H=n.bind(null,g.xyToLngLat);class t{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,l,q,F){if(!a?.length||!l||!q||y.equals(l,q))return a;a={geometries:a,inSpatialReference:l,
outSpatialReference:q,geographicTransformation:F,resolve:w.createResolver()};this._jobs.push(a);this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:l,inSpatialReference:q,outSpatialReference:F,resolve:N,geographicTransformation:d}=a;g.canProject(q,F)?y.isWebMercator(F)?N(l.map(u)):N(l.map(H)):N(r.projectMany(G.jsonAdapter,l,q,F,d,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}}}const p=new t;b.checkProjectionSupport=async function(a,l){a&&l&&(a=Array.isArray(a)?a.map(q=>null!=q.geometry?q.geometry.spatialReference:null).filter(f.isSome):[a],await r.initializeProjection(a.map(q=>({source:q,dest:l}))))};b.project=function(a,l,q,F){if(!a)return a;q||(q=l,l=a.spatialReference);return y.isValid(l)&&y.isValid(q)&&!y.equals(l,q)?g.canProject(l,q)?(a=y.isWebMercator(q)?u(a):H(a),a.spatialReference=q,a):r.projectMany(G.jsonAdapter,[a],l,q,null,F)[0]:a};b.projectMany=function(a,
l,q,F){return p.push(a,l,q,F)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(b){class f{constructor(g,n,e){this.x=g;this.y=n;this.spatialReference=e;this.m=this.z=void 0}}class w{constructor(g,n,e,v){this.rings=g;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);v&&(this.hasM=v)}}class r{constructor(g,n,e,v){this.paths=g;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=
e);v&&(this.hasM=v)}}class G{constructor(g,n,e,v){this.points=g;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);v&&(this.hasM=v)}}class y{constructor(g,n,e,v,x){this.xmin=g;this.ymin=n;this.xmax=e;this.ymax=v;this.spatialReference=x;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}b.jsonAdapter={convertToGEGeometry:function(g,n){return null==n?null:g.convertJSONToGeometry(n)},exportPoint:function(g,n,e){e=new f(g.getPointX(n),g.getPointY(n),e);const v=g.hasZ(n),x=g.hasM(n);v&&(e.z=
g.getPointZ(n));x&&(e.m=g.getPointM(n));return e},exportPolygon:function(g,n,e){return new w(g.exportPaths(n),e,g.hasZ(n),g.hasM(n))},exportPolyline:function(g,n,e){return new r(g.exportPaths(n),e,g.hasZ(n),g.hasM(n))},exportMultipoint:function(g,n,e){return new G(g.exportPoints(n),e,g.hasZ(n),g.hasM(n))},exportExtent:function(g,n,e){var v=g.hasZ(n);const x=g.hasM(n);e=new y(g.getXMin(n),g.getYMin(n),g.getXMax(n),g.getYMax(n),e);v&&(v=g.getZExtent(n),e.zmin=v.vmin,e.zmax=v.vmax);x&&(g=g.getMExtent(n),
e.mmin=g.vmin,e.mmax=g.vmax);return e}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p,a,l,q,F,N,d,I,R,L,U,S,Q,m){class C{constructor(K,T=null,Y,fa,oa){this.attributes=K;this.geometry=Y;this.centroid=fa;this.filterFlags=oa;this.groupId=-1;this.displayId=T}}const z=new g.MemCacheStorage(2E6);let B=0;class P{constructor(K){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:d.queryCapabilities};this.geometryType=K.geometryType;this.hasM=!!K.hasM;this.hasZ=!!K.hasZ;this.objectIdField=K.objectIdField;this.spatialReference=K.spatialReference;
this.definitionExpression=K.definitionExpression;this.featureStore=K.featureStore;this.aggregateAdapter=K.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=K.timeInfo;K.cacheSpatialQueries&&(this._geometryQueryCache=new g.MemCache(B++ +"$$",z));this.fieldsIndex=r.isSerializable(K.fieldsIndex)?K.fieldsIndex:Q.fromJSON(K.fieldsIndex);this.availableFields=null==K.availableFields?new Set(this.fieldsIndex.fields.map(T=>T.name)):new Set(K.availableFields.map(T=>
this.fieldsIndex.get(T)?.name).filter(T=>null!=T));K.scheduler&&K.priority&&(this._frameTask=K.scheduler.registerTask(K.priority))}destroy(){this._frameTask=y.removeMaybe(this._frameTask);this.clearCache();y.destroyMaybe(this._geometryQueryCache);this._changeHandle=y.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(K,
T){T=n.signalFromSignalOrOptions(T);try{return(await this._executeQuery(K,{},T)).createQueryResponse()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return(new I.QueryEngineResult([],K,this)).createQueryResponse()}}async executeQueryForCount(K={},T){T=n.signalFromSignalOrOptions(T);try{return(await this._executeQuery(K,{returnGeometry:!1,returnCentroid:!1,outSR:null},T)).createQueryResponseForCount()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(K,T){T=
n.signalFromSignalOrOptions(T);const Y=K.outSR;try{const fa=await this._executeQuery(K,{returnGeometry:!0,returnCentroid:!1,outSR:null},T),oa=fa.size;if(!oa)return{count:0,extent:null};const sa=await this._getBounds(fa.items,fa.spatialReference,Y||this.spatialReference);return{count:oa,extent:sa}}catch(fa){if(fa===R.queryEngineEmptyResult)return{count:0,extent:null};throw fa;}}async executeQueryForIds(K,T){return this.executeQueryForIdSet(K,T).then(Y=>Array.from(Y))}async executeQueryForIdSet(K,T){T=
n.signalFromSignalOrOptions(T);try{const Y=await this._executeQuery(K,{returnGeometry:!0,returnCentroid:!1,outSR:null},T),fa=Y.items,oa=new Set;await this._reschedule(()=>{for(const sa of fa)oa.add(Y.featureAdapter.getObjectId(sa))},T);return oa}catch(Y){if(Y===R.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(K,T){const Y=n.signalFromSignalOrOptions(T),{point:fa,distance:oa,returnEdge:sa,vertexMode:ca}=K;if(!sa&&"none"===ca)return{candidates:[]};let ka=G.clone(K.query);
ka=await this._schedule(()=>R.normalizeQueryLike(ka,this.definitionExpression,this.spatialReference),Y);ka=await this._reschedule(()=>L.validateQuery(ka,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);(T=!a.equals(fa.spatialReference,this.spatialReference))&&await N.checkProjectionSupport(fa.spatialReference,this.spatialReference);var ia="number"===typeof oa?oa:oa.x,qa="number"===typeof oa?oa:oa.y;ia={xmin:fa.x-
ia,xmax:fa.x+ia,ymin:fa.y-qa,ymax:fa.y+qa,spatialReference:fa.spatialReference};ia=T?N.project(ia,this.spatialReference):ia;if(!ia)return{candidates:[]};qa=(await p.normalizeCentralMeridian(t.fromJSON(fa),null,{signal:Y}))[0];const ra=(await p.normalizeCentralMeridian(t.fromJSON(ia),null,{signal:Y}))[0];if(null==qa||null==ra)return{candidates:[]};const xa=new I.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ra.toJSON())),Y),ka,this);await this._reschedule(()=>
this._executeObjectIdsQuery(xa),Y);await this._reschedule(()=>this._executeTimeQuery(xa),Y);await this._reschedule(()=>this._executeAttributesQuery(xa),Y);await this._reschedule(()=>this._executeGeometryQueryForSnapping(xa,Y),Y);qa=qa.toJSON();qa=T?N.project(qa,this.spatialReference):qa;return xa.createSnappingResponse({...K,point:qa,distance:T?Math.max(ia.xmax-ia.xmin,ia.ymax-ia.ymin)/2:oa},fa.spatialReference)}async executeQueryForLatestObservations(K,T){T=n.signalFromSignalOrOptions(T);if(!this.timeInfo?.trackIdField)throw new w("unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:K,timeInfo:this.timeInfo});try{const Y=await this._executeQuery(K,{},T);await this._reschedule(()=>this._filterLatest(Y),T);return Y.createQueryResponse()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return(new I.QueryEngineResult([],K,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(K={},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:fa,normalizationField:oa,valueExpression:sa}=T;return(await this._executeQueryForStatistics(K,
{field:fa,normalizationField:oa,valueExpression:sa},Y)).createSummaryStatisticsResponse(T)}async executeQueryForUniqueValues(K={},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:fa,field2:oa,field3:sa,valueExpression:ca}=T;return(await this._executeQueryForStatistics(K,{field:fa,field2:oa,field3:sa,valueExpression:ca},Y)).createUniqueValuesResponse(T)}async executeQueryForClassBreaks(K={},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:fa,normalizationField:oa,valueExpression:sa}=T;return(await this._executeQueryForStatistics(K,
{field:fa,normalizationField:oa,valueExpression:sa},Y)).createClassBreaksResponse(T)}async executeQueryForHistogram(K={},T,Y){Y=n.signalFromSignalOrOptions(Y);const {field:fa,normalizationField:oa,valueExpression:sa}=T;return(await this._executeQueryForStatistics(K,{field:fa,normalizationField:oa,valueExpression:sa},Y)).createHistogramResponse(T)}async fetchRecomputedExtents(K){K=n.signalFromSignalOrOptions(K);this._timeExtentPromise||(this._timeExtentPromise=S.getTimeExtent(this.timeInfo,this.featureStore));
const [T,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);n.throwIfAborted(K);return{fullExtent:T,timeExtent:Y}}async _getBounds(K,T,Y){const fa=x.set(x.create(),x.negativeInfinity);await this.featureStore.forEachBounds(K,oa=>x.expandWithAABB(fa,oa));K={xmin:fa[0],ymin:fa[1],xmax:fa[3],ymax:fa[4],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(fa[2])&&isFinite(fa[5])&&(K.zmin=fa[2],K.zmax=fa[5]);T=N.project(K,T,Y);T.spatialReference=F.cleanFromGeometryEngine(Y);
0===T.xmax-T.xmin&&(Y=e.getMetersPerUnitForSR(T.spatialReference),T.xmin-=Y,T.xmax+=Y);0===T.ymax-T.ymin&&(Y=e.getMetersPerUnitForSR(T.spatialReference),T.ymin-=Y,T.ymax+=Y);this.hasZ&&null!=T.zmin&&null!=T.zmax&&0===T.zmax-T.zmin&&(Y=e.getMetersPerUnitForSR(T.spatialReference),T.zmin-=Y,T.zmax+=Y);return T}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):
this._getAllFeatures().then(K=>this._getBounds(K,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(K,T){return null!=this._frameTask?this._frameTask.schedule(K,T):K(m.noBudget)}async _reschedule(K,T){return null!=this._frameTask?this._frameTask.reschedule(K,T):K(m.noBudget)}async _getAllFeaturesQueryEngineResult(K){return new I.QueryEngineResult(await this._getAllFeatures(),K,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=
(async()=>{await this.featureStore.forEach(fa=>Y.push(fa))})().then(()=>Y)}const K=this._allFeaturesPromise,T=await K;return K===this._allFeaturesPromise?T.slice():this._getAllFeatures()}async _executeQuery(K,T,Y){K=G.clone(K);K=await this._schedule(()=>R.normalizeQuery(K,this.definitionExpression,this.spatialReference),Y);K=await this._reschedule(()=>L.validateQuery(K,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),
Y);K={...K,...T};const fa=await this._reschedule(()=>this._executeSceneFilterQuery(K,Y),Y),oa=await this._reschedule(()=>this._executeGeometryQuery(K,fa,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(oa),Y);await this._reschedule(()=>this._executeObjectIdsQuery(oa),Y);await this._reschedule(()=>this._executeTimeQuery(oa),Y);await this._reschedule(()=>this._executeAttributesQuery(oa),Y);return oa}async _executeSceneFilterQuery(K,T){if(null==K.sceneFilter)return null;const {outSR:Y,
returnGeometry:fa,returnCentroid:oa}=K;var sa=this.featureStore.featureSpatialReference,ca=K.sceneFilter.geometry;const ka=null==sa||a.equals(sa,ca.spatialReference)?ca:N.project(ca,sa);if(!ka)return null;sa=fa||oa;sa=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&sa?async xa=>this._project(xa,Y):xa=>xa;const ia=this.featureAdapter;ca=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ka)),T);if("disjoint"===K.sceneFilter.spatialRelationship){if(!ca.length)return null;const xa=
new Set;for(var qa of ca)xa.add(ia.getObjectId(qa));const ya=await this._reschedule(()=>this._getAllFeatures(),T);qa=await this._reschedule(async()=>{const Ha=await U.getSpatialQueryOperator("esriSpatialRelDisjoint",ka,this.geometryType,this.hasZ,this.hasM),Fa=await this._runSpatialFilter(ya,La=>!xa.has(ia.getObjectId(La))||Ha(ia.getGeometry(La)),T);return new I.QueryEngineResult(Fa,K,this)},T);return sa(qa)}if(!ca.length)return new I.QueryEngineResult([],K,this);if(this._canExecuteSinglePass(ka,
K))return sa(new I.QueryEngineResult(ca,K,this));const ra=await U.getSpatialQueryOperator("esriSpatialRelContains",ka,this.geometryType,this.hasZ,this.hasM);qa=await this._runSpatialFilter(ca,xa=>ra(ia.getGeometry(xa)),T);return sa(new I.QueryEngineResult(qa,K,this))}async _executeGeometryQuery(K,T,Y){if(null!=T&&0===T.items.length)return T;K=null!=T?T.query:K;const {geometry:fa,outSR:oa,spatialRel:sa,returnGeometry:ca,returnCentroid:ka}=K;var ia=this.featureStore.featureSpatialReference;const qa=
!fa||null==ia||a.equals(ia,fa.spatialReference)?fa:N.project(fa,ia),ra=ca||ka,xa=a.isValid(oa)&&!a.equals(this.spatialReference,oa),ya=this._geometryQueryCache&&null==T?xa&&ra?JSON.stringify({originalFilterGeometry:fa,spatialRelationship:sa,outSpatialReference:oa}):JSON.stringify({originalFilterGeometry:fa,spatialRelationship:sa}):null;ia=ya?this._geometryQueryCache.get(ya):null;if(null!=ia)return new I.QueryEngineResult(ia,K,this);ia=async h=>{xa&&ra&&await this._project(h,oa);ya&&this._geometryQueryCache.put(ya,
h.items,h.items.length+1);return h};if(!qa)return ia(null!=T?T:await this._getAllFeaturesQueryEngineResult(K));const Ha=this.featureAdapter;let Fa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(fa)),Y);if("esriSpatialRelDisjoint"===sa){if(!Fa.length)return ia(null!=T?T:await this._getAllFeaturesQueryEngineResult(K));const h=new Set;for(var La of Fa)h.add(Ha.getObjectId(La));const E=null!=T?T.items:await this._reschedule(()=>this._getAllFeatures(),Y);La=await this._reschedule(async()=>
{const X=await U.getSpatialQueryOperator(sa,qa,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(E,ja=>!h.has(Ha.getObjectId(ja))||X(Ha.getGeometry(ja)),Y);return new I.QueryEngineResult(aa,K,this)},Y);return ia(La)}if(null!=T){const h=new f.PositionHint;Fa=Fa.filter(E=>0<=f.indexOf(T.items,E,T.items.length,h))}if(!Fa.length)return ia=new I.QueryEngineResult([],K,this),ya&&this._geometryQueryCache.put(ya,ia.items,1),ia;if(this._canExecuteSinglePass(qa,K))return ia(new I.QueryEngineResult(Fa,
K,this));const Ta=await U.getSpatialQueryOperator(sa,qa,this.geometryType,this.hasZ,this.hasM);La=await this._runSpatialFilter(Fa,h=>Ta(Ha.getGeometry(h)),Y);return ia(new I.QueryEngineResult(La,K,this))}async _executeGeometryQueryForSnapping(K,T){const {query:Y}=K,{spatialRel:fa}=Y;if(K?.items?.length&&Y.geometry&&fa){var oa=await U.getSpatialQueryOperator(fa,Y.geometry,this.geometryType,this.hasZ,this.hasM);T=await this._runSpatialFilter(K.items,sa=>oa(sa.geometry),T);K.items=T}}_executeAggregateIdsQuery(K){if(0!==
K.items.length&&K.query.aggregateIds?.length&&null!=this.aggregateAdapter){var T=new Set;for(const fa of K.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(fa).forEach(oa=>T.add(oa));var Y=this.featureAdapter.getObjectId;K.items=K.items.filter(fa=>T.has(Y(fa)))}}_executeObjectIdsQuery(K){if(0!==K.items.length&&K.query.objectIds?.length){var T=new Set(K.query.objectIds),Y=this.featureAdapter.getObjectId;K.items=K.items.filter(fa=>T.has(Y(fa)))}}_executeTimeQuery(K){if(0!==K.items.length){var T=
S.getTimeOperator(this.timeInfo,K.query.timeExtent,this.featureAdapter);null!=T&&(K.items=K.items.filter(T))}}_executeAttributesQuery(K){if(0!==K.items.length){var T=q.getWhereClause(K.query.where,this.fieldsIndex);if(T){if(!T.isStandardized)throw new TypeError("Where clause is not standardized");K.items=K.items.filter(Y=>T.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(K,T,Y){if(!T)return K;if(null==this._frameTask)return K.filter(ca=>T(ca));let fa=0;const oa=[],sa=async ca=>{for(;fa<
K.length;){const ka=K[fa++];T(ka)&&(oa.push(ka),ca.madeProgress());ca.done&&await this._reschedule(ia=>sa(ia),Y)}};return this._reschedule(ca=>sa(ca),Y).then(()=>oa)}_filterLatest(K){const {trackIdField:T,startTimeField:Y,endTimeField:fa}=this.timeInfo,oa=fa||Y,sa=new Map,ca=this.featureAdapter.getAttribute;for(const ka of K.items){const ia=ca(ka,T),qa=ca(ka,oa),ra=sa.get(ia);(!ra||qa>ca(ra,oa))&&sa.set(ia,ka)}K.items=Array.from(sa.values())}_canExecuteSinglePass(K,T){({spatialRel:T}=T);return U.canQueryWithRBush(K)&&
("esriSpatialRelEnvelopeIntersects"===T||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===T||"esriSpatialRelContains"===T))}async _project(K,T){if(!T||a.equals(this.spatialReference,T))return K;const Y=this.featureAdapter;let fa=void 0;try{const oa=await this._getFullExtent();fa=v.getTransformation(this.spatialReference,T,oa)}catch{}T=await N.projectMany(K.items.map(oa=>F.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(oa))),this.spatialReference,T,fa);K.items=
T.map((oa,sa)=>Y.cloneWithGeometry(K.items[sa],l.convertFromGeometry(oa,this.hasZ,this.hasM)));return K}_getQueryBBoxes(K){if(U.canQueryWithRBush(K)){if(t.isExtent(K))return[u.fromValues(Math.min(K.xmin,K.xmax),Math.min(K.ymin,K.ymax),Math.max(K.xmin,K.xmax),Math.max(K.ymin,K.ymax))];if(t.isPolygon(K))return K.rings.map(T=>u.fromValues(Math.min(T[0][0],T[2][0]),Math.min(T[0][1],T[2][1]),Math.max(T[0][0],T[2][0]),Math.max(T[0][1],T[2][1])))}return[H.getBoundsXY(u.create(),K)]}async _searchFeatures(K){const T=
new Set;await Promise.all(K.map(Y=>this.featureStore.forEachInBounds(Y,fa=>T.add(fa))));K=Array.from(T.values());T.clear();return K}async _executeQueryForStatistics(K,T,Y){K=G.clone(K);try{K=await this._schedule(()=>R.normalizeQuery(K,this.definitionExpression,this.spatialReference),Y);K=await this._reschedule(()=>L.validateStatisticsQuery(K,T,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const fa=await this._reschedule(()=>
this._executeSceneFilterQuery(K,Y),Y),oa=await this._reschedule(()=>this._executeGeometryQuery(K,fa,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(oa),Y);await this._reschedule(()=>this._executeObjectIdsQuery(oa),Y);await this._reschedule(()=>this._executeTimeQuery(oa),Y);await this._reschedule(()=>this._executeAttributesQuery(oa),Y);return oa}catch(fa){if(fa!==R.queryEngineEmptyResult)throw fa;return new I.QueryEngineResult([],K,this)}}}b.Feature=C;b.QueryEngine=P;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(b,f){b.RemoveMode=void 0;(function(g){g[g.ALL=0]="ALL";g[g.SOME=1]="SOME"})(b.RemoveMode||(b.RemoveMode={}));class w{constructor(g,n,e){this.name=g;this._storage=n;this.id=`${G++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);e&&(this._storage.registerRemoveFunc(this.id,e),this._removeFunc=!0)}destroy(){this._storage.clear(this);
this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(g){return this._storage.getSize(this,g)}resetHitRate(){this._hit=this._miss=0}put(g,n,e,v=0){this._storage.put(this,g,n,e,v)}pop(g){g=this._storage.pop(this,g);void 0===g?++this._miss:++this._hit;return g}get(g){g=this._storage.get(this,g);void 0===g?++this._miss:++this._hit;return g}peek(g){return this._storage.peek(this,
g)}updateSize(g,n,e){this._storage.updateSize(this,g,n,e)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class r{get size(){return this._size}constructor(g=10485760){this._maxSize=g;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new f;this._users=new f}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(g){this._users.push(g)}deregister(g){this._users.removeUnordered(g)}registerRemoveFunc(g,
n){this._removeFuncs.push([g,n])}deregisterRemoveFunc(g){this._removeFuncs.filterInPlace(n=>n[0]!==g)}get maxSize(){return this._maxSize}set maxSize(g){this._maxSize=Math.max(g,-1);this._checkSize()}getSize(g,n){return this._db.get(g.id+n)?.size??0}put(g,n,e,v,x){n=g.id+n;const u=this._db.get(n);u&&(this._size-=u.size,g.size-=u.size,this._db.delete(n),u.entry!==e&&this._notifyRemove(n,u.entry,u.size,b.RemoveMode.ALL));v>this._maxSize?this._notifyRemove(n,e,v,b.RemoveMode.ALL):void 0===e?console.warn("Refusing to cache undefined entry "):
!v||0>v?(console.warn(`Refusing to cache entry with size ${v} for key ${n}`),this._notifyRemove(n,e,0,b.RemoveMode.ALL)):(this._db.set(n,new y(e,v,1+Math.max(x,-4)- -3)),this._size+=v,g.size+=v,this._checkSize())}updateSize(g,n,e,v){n=g.id+n;const x=this._db.get(n);if(x&&x.entry===e){this._size-=x.size;for(g.size-=x.size;v>this._maxSize;)if(v=this._notifyRemove(n,e,v,b.RemoveMode.SOME),!(null!=v&&0<v)){this._db.delete(n);return}x.size=v;this._size+=v;g.size+=v;this._checkSize()}}pop(g,n){n=g.id+n;
const e=this._db.get(n);if(e)return this._size-=e.size,g.size-=e.size,this._db.delete(n),++this._hit,e.entry;++this._miss}get(g,n){n=g.id+n;g=this._db.get(n);if(void 0===g)++this._miss;else return this._db.delete(n),g.lives=g.lifetime,this._db.set(n,g),++this._hit,g.entry}peek(g,n){(g=this._db.get(g.id+n))?++this._hit:++this._miss;return g?.entry}get performanceInfo(){const g={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},n={},e=[];this._db.forEach((u,H)=>{const t=u.lifetime;e[t]=(e[t]||0)+u.size;this._users.forAll(p=>{const {id:a,name:l}=p;H.startsWith(a)&&(n[l]=(n[l]||0)+u.size)})});const v={};this._users.forAll(u=>{const H=u.name;"hitRate"in u&&"number"===typeof u.hitRate&&!isNaN(u.hitRate)&&0<u.hitRate?(n[H]=n[H]||0,v[H]=Math.round(100*u.hitRate)+"%"):v[H]="0%"});var x=Object.keys(n);x.sort((u,H)=>n[H]-n[u]);x.forEach(u=>g[u]=Math.round(n[u]/2**20)+"MB / "+v[u]);for(x=e.length-
1;0<=x;--x){const u=e[x];u&&(g["Priority "+(x+-3-1)]=Math.round(u/this._size*100)+"%")}return g}resetStats(){this._hit=this._miss=0;this._users.forAll(g=>g.resetHitRate())}clear(g){const n=g.id;this._db.forEach((e,v)=>{v.startsWith(n)&&(this._size-=e.size,this._db.delete(v),this._notifyRemove(v,e.entry,e.size,b.RemoveMode.ALL))});g.size=0}clearAll(){this._db.forEach((g,n)=>this._notifyRemove(n,g.entry,g.size,b.RemoveMode.ALL));this._users.forAll(g=>g.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(g,n,e,v){let x;this._removeFuncs.some(u=>g.startsWith(u[0])?(u=u[1](n,v,e),"number"===typeof u&&(x=u),!0):!1);return x}_checkSize(){this._users.forAll(g=>this._checkSizeLimits(g));this._checkSizeLimits()}_checkSizeLimits(g){const n=g??this;if(!(0>n.maxSize||n.size<=n.maxSize)){for(var e=g?.id,v=!0;v;){v=!1;for(const [x,u]of this._db)if(0===u.lifetime&&(!e||x.startsWith(e))){this._purgeItem(x,u,g);if(n.size<=.9*n.maxSize)return;v||=this._db.has(x)}}for(const [x,
u]of this._db)if(!e||x.startsWith(e))if(this._purgeItem(x,u,g),n.size<=.9*n.maxSize)break}}_purgeItem(g,n,e=this._users.find(v=>g.startsWith(v.id))){this._db.delete(g);if(1>=n.lives){this._size-=n.size;e&&(e.size-=n.size);const v=this._notifyRemove(g,n.entry,n.size,b.RemoveMode.SOME);null!=v&&0<v&&(this._size+=v,e&&(e.size+=v),n.lives=n.lifetime,n.size=v,this._db.set(g,n))}else--n.lives,this._db.set(g,n)}}let G=0;class y{constructor(g,n,e){this.entry=g;this.size=n;this.lives=this.lifetime=e}}b.MemCache=
w;b.MemCacheStorage=r;b.MinPriority=-3;b.NoPriority=-4;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(b,f,w,r,G,y,g,n,e,v,x){function u(F){const N=[];let d=0,I=0;for(let R=0;R<F.length;R++){const L=
F[R];let U=null;for(let S=0;S<L.length;S++)U=L[S],N.push(U),0===S?I=d=U[0]:(d=Math.min(d,U[0]),I=Math.max(I,U[0]));U&&N.push([(d+I)/2,0])}return N}function H(F,N){if(!(F instanceof y||F instanceof G))throw q().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new w("straightLineDensify: the input geometry is neither polyline nor polygon");var d=g.getGeometryParts(F);const I=[];for(const L of d){d=[];I.push(d);d.push([L[0][0],L[0][1]]);for(let U=0;U<L.length-1;U++){const S=
L[U][0],Q=L[U][1],m=L[U+1][0],C=L[U+1][1];var R=Math.sqrt((m-S)*(m-S)+(C-Q)*(C-Q));const z=(C-Q)/R,B=(m-S)/R,P=R/N;if(1<P){for(let K=1;K<=P-1;K++){const T=K*N;d.push([B*T+S,z*T+Q])}R=(R+Math.floor(P-1)*N)/2;d.push([B*R+S,z*R+Q])}d.push([m,C])}}return"polygon"===F.type?new G({rings:I,spatialReference:F.spatialReference}):new y({paths:I,spatialReference:F.spatialReference})}function t(F,N,d){N&&(F=H(F,1E6),F=e.webMercatorToGeographic(F,!0));d&&(F=g.updatePolyGeometry(F,d));return F}function p(F,N,d){if(Array.isArray(F)){var I=
F[0];I>N?(d=g.offsetMagnitude(I,N),F[0]=I+-2*d*N):I<d&&(N=g.offsetMagnitude(I,d),F[0]=I+-2*N*d)}else I=F.x,I>N?(d=g.offsetMagnitude(I,N),F=F.clone().offset(-2*d*N,0)):I<d&&(N=g.offsetMagnitude(I,d),F=F.clone().offset(-2*N*d,0));return F}function a(F,N){let d=-1;for(let I=0;I<N.cutIndexes.length;I++){const R=N.cutIndexes[I],L=N.geometries[I],U=g.getGeometryParts(L);for(let S=0;S<U.length;S++){const Q=U[S];Q.some(m=>{if(180>m[0])return!0;m=0;for(var C=0;C<Q.length;C++){var z=Q[C][0];m=z>m?z:m}m=Number(m.toFixed(9));
m=-360*g.offsetMagnitude(m,180);for(C=0;C<Q.length;C++)z=L.getPoint(S,C),L.setPoint(S,C,z.clone().offset(m,0));return!0})}if(R===d)if("polygon"===F[0].type)for(const S of g.getGeometryParts(L))F[R]=F[R].addRing(S);else{if("polyline"===F[0].type)for(const S of g.getGeometryParts(L))F[R]=F[R].addPath(S)}else d=R,F[R]=L}return F}async function l(F,N,d){if(!Array.isArray(F))return l([F],N);N&&"string"!==typeof N&&q().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var I="string"===typeof N?N:N?.url??f.geometryServiceUrl;let R,L,U;let S=0;var Q=[];N=[];for(var m of F)if(null==m)N.push(m);else{if(!C){var C=m.spatialReference;var z=n.getInfo(C);var B=(R=C.isWebMercator)?102100:4326;L=g.cutParams[B].maxX;U=g.cutParams[B].minX;var P=g.cutParams[B].plus180Line;B=g.cutParams[B].minus180Line}if(z)if("mesh"===m.type)N.push(m);else if("point"===m.type)N.push(p(m.clone(),L,U));else if("multipoint"===m.type){var K=m.clone();K.points=K.points.map(T=>p(T,L,U));N.push(K)}else if("extent"===
m.type)K=m.clone()._normalize(!1,!1,z),N.push(K.rings?new G(K):K);else if(m.extent){K=m.extent;const T=2*g.offsetMagnitude(K.xmin,U)*L;let Y=0===T?m.clone():g.updatePolyGeometry(m.clone(),T);K.offset(T,0);K.intersects(P)&&K.xmax!==L?(S=K.xmax>S?K.xmax:S,Y=t(Y,R),Q.push(Y),N.push("cut")):K.intersects(B)&&K.xmin!==U?(S=2*K.xmax*L>S?2*K.xmax*L:S,Y=t(Y,R,360),Q.push(Y),N.push("cut")):N.push(Y)}else N.push(m.clone());else N.push(m)}C=g.offsetMagnitude(S,L);z=-90;P=C;for(m=new y;0<C;)B=-180+360*C,m.addPath([[B,
z],[B,-1*z]]),z*=-1,C--;if(0<Q.length&&0<P){C=await v.cut(I,Q,m,d);C=a(Q,C);z=[];Q=[];for(P=0;P<N.length;P++)m=N[P],"cut"!==m?Q.push(m):(m=C.shift(),B=F[P],null!=B&&"polygon"===B.type&&B.rings&&1<B.rings.length&&m.rings.length>=B.rings.length?(z.push(m),Q.push("simplify")):Q.push(R?e.geographicToWebMercator(m):m));if(!z.length)return Q;N=await x.simplify(I,z,d);F=[];for(d=0;d<Q.length;d++)I=Q[d],"simplify"!==I?F.push(I):F.push(R?e.geographicToWebMercator(N.shift()):N.shift());return F}F=[];for(d=
0;d<N.length;d++)I=N[d],"cut"!==I?F.push(I):(I=Q.shift(),F.push(!0===R?e.geographicToWebMercator(I):I));return F}const q=()=>r.getLogger("esri.geometry.support.normalizeUtils");b.getClosestDenormalizedXToReference=function(F,N,d){d=n.getInfo(d);if(null==d)return F;const [I,R]=d.valid;d=2*R;let L=0,U=0;N>R?L=Math.ceil(Math.abs(N-R)/d):N<I&&(L=-Math.ceil(Math.abs(N-I)/d));F>R?U=Math.ceil(Math.abs(F-R)/d):F<I&&(U=-Math.ceil(Math.abs(F-I)/d));F+=(L-U)*d;N=F-N;N>R?F-=d:N<I&&(F+=d);return F};b.getDenormalizedExtent=
function(F){if(!F)return null;const N=F.extent;if(!N)return null;var d=F.spatialReference&&n.getInfo(F.spatialReference);if(!d)return N;const [I,R]=d.valid;({width:d}=N);let {xmin:L,xmax:U}=N;[L,U]=[U,L];if("extent"===F.type||0===d||d<=R||d>2*R||L<I||U>R)return N;let S;switch(F.type){case "polygon":if(1<F.rings.length)S=u(F.rings);else return N;break;case "polyline":if(1<F.paths.length)S=u(F.paths);else return N;break;case "multipoint":S=F.points}F=N.clone();for(let Q=0;Q<S.length;Q++){let m=S[Q][0];
0>m?(m+=R,U=Math.max(m,U)):(m-=R,L=Math.min(m,L))}F.xmin=L;F.xmax=U;return F.width<d?(F.xmin-=R,F.xmax-=R,F):N};b.normalizeCentralMeridian=l;b.normalizeMapX=function(F,N){if(N=n.getInfo(N)){const [d,I]=N.valid;N=I-d;if(F<d)for(;F<d;)F+=N;if(F>I)for(;F>I;)F-=N}return F};b.straightLineDensify=H;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(b,f,w,r){function G(y){return r.isPolygon(y)?
y.rings:y.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:w.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:w.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:w.WGS84}),minus180Line:new f({paths:[[[-180,
-180],[-180,180]]],spatialReference:w.WGS84})}};b.cutParams=f;b.getGeometryParts=G;b.offsetMagnitude=function(y,g){return Math.ceil((y-g)/(2*g))};b.updatePolyGeometry=function(y,g){const n=G(y);for(const e of n)for(const v of e)v[0]+=g;return y};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),function(b,
f,w,r,G,y){b.cut=async function(g,n,e,v){g=y.parseUrl(g);const x=n[0].spatialReference;n={...v,responseType:"json",query:{...g.query,f:"json",sr:G.srToRESTValue(x),target:JSON.stringify({geometryType:r.getJsonType(n[0]),geometries:n}),cutter:JSON.stringify(e)}};n=await w(g.path+"/cut",n);const {cutIndexes:u,geometries:H=[]}=n.data;return{cutIndexes:u,geometries:H.map(t=>{t=r.fromJSON(t);t.spatialReference=x;return t})}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(b,f,w,r,G,y){function g(n,e,v){const x={};for(const H in n)if("declaredClass"!==H){var u=n[H];null!=u&&"function"!==typeof u&&(Array.isArray(u)?x[H]=u.map(t=>g({item:t},e,v).item):"object"===typeof u?u.toJSON?(u=u.toJSON(v?.[H]),x[H]=e?u:JSON.stringify(u)):x[H]=e?u:JSON.stringify(u):x[H]=u)}return x}b.asValidOptions=function(n,e){return e?{...e,query:{...(n??{}),...e.query}}:{query:n}};b.encode=g;b.getToken=function(n,e){return n?y.supportsApiKey(n)&&(e||f.apiKey)?e||f.apiKey:w.id?.findCredential(n)?.token:
null};b.parseUrl=function(n){return"string"===typeof n?G.urlToObject(n):r.clone(n)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(b,f,w,r,G,y){b.simplify=async function(g,n,e){const v="string"===typeof g?w.urlToObject(g):g;g=n[0].spatialReference;const x=r.getJsonType(n[0]);n={...e,
query:{...v.query,f:"json",sr:G.srToRESTValue(g),geometries:JSON.stringify(y.encodeGeometries(n))}};({data:n}=await f(v.path+"/simplify",n));return y.decodeGeometries(n.geometries,x,g)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(b,f){b.decodeGeometries=function(w,r,G){const y=f.getGeometryType(r);return w.map(g=>{g=y.fromJSON(g);g.spatialReference=G;return g})};b.encodeGeometries=
function(w){return{geometryType:f.getJsonType(w[0]),geometries:w.map(r=>r.toJSON())}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(b,f,w,r){function G(t,p,a={}){const l=y(p,t);if(!l)throw a=x.getError(p,t),new f("unsupported-query","invalid SQL expression",{expression:p,error:a});t=a.expressionName||"expression";
if(a.validateStandardized&&!l.isStandardized)throw new f("unsupported-query",`${t} is not standard`,{expression:p});if(a.validateAggregate&&!l.isAggregate)throw new f("unsupported-query",`${t} does not contain a valid aggregate function`,{expression:p});return l.fieldNames}function y(t,p){return t?x.get(t,p):null}function g(t){return/\((.*?)\)/.test(t)?t:t.split(" as ")[0]}function n(t,p,a,l={}){const q=new Map;e(q,t,p,l.allowedFieldTypes??H,a);if(q.size)throw new f("unsupported-query",`${l.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(q.values()),query:l.query});}function e(t,p,a,l,q){q=q.includes("*")?[...a,...q.filter(F=>"*"!==F)]:q;for(const F of q)if(p.get(F))v(t,p,a,l,F);else try{const N=g(F),d=G(p,N,{validateStandardized:!0});for(const I of d)v(t,p,a,l,I)}catch(N){t.set(F,{type:"expression-error",expression:F,error:N})}}function v(t,p,a,l,q){(p=p.get(q))?a.has(p.name)?"all"!==l&&!1===l?.has(p.type)&&t.set(q,{type:"invalid-type",fieldName:p.name,fieldType:r.kebabDict.fromJSON(p.type),
allowedFieldTypes:Array.from(l,F=>r.kebabDict.fromJSON(F))}):t.set(q,{type:"missing-field",fieldName:p.name}):t.set(q,{type:"invalid-field",fieldName:q})}const x=new w.WhereClauseCache(50,500);w=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const u=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),H=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...w,...u]);b.allDateAndTimeFieldTypes=u;b.getAliasFromFieldName=function(t){return t.split(" as ")[1]};b.getExpressionFromFieldName=g;b.getWhereClause=y;b.numericFieldTypes=w;b.validateFields=n;b.validateHaving=function(t,p,a,l,q){if(!a)return!0;const F=G(t,a,{validateAggregate:!0,expressionName:"having clause"});n(t,p,F,{expressionName:"having clause",query:q});if(!y(a,t)?.getExpressions().every(N=>{const {aggregateType:d,field:I}=N,R=t.get(I)?.name;return l.some(L=>
{const {onStatisticField:U,statisticType:S}=L;return t.get(U)?.name===R&&S.toLowerCase().trim()===d})}))throw new f("unsupported-query","expressions in having clause should also exist in outStatistics",{having:a});return!0};b.validateWhere=function(t,p,a,l){if(!a)return!0;a=G(t,a,{validateStandardized:!0,expressionName:"where clause"});n(t,p,a,{expressionName:"where clause",query:l});return!0};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(b,f,w){class r{constructor(G,y){this._cache=new f.LRUCache(G);this._invalidCache=new f.LRUCache(y)}get(G,y){const g=`${y.uid}:${G}`,n=this._cache.get(g);if(n)return n;if(null!=this._invalidCache.get(g))return null;try{const e=w.WhereClause.create(G,y);this._cache.put(g,e);return e}catch(e){return this._invalidCache.put(g,e),null}}getError(G,y){return this._invalidCache.get(`${y.uid}:${G}`)??null}}b.WhereClauseCache=r;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(b,f){class w{constructor(r,G){this._storage=new f.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=r;this._storage.register(this);G&&this._storage.registerRemoveFunc("",G)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(r,G,y=1){this._storage.put(this,r,G,y,1)}pop(r){return this._storage.pop(this,r)}get(r){return this._storage.get(this,r)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(r){this._storage.maxSize=
r}resetHitRate(){}}b.LRUCache=w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p){function a(m){return Array.isArray(m)?
m:[m]}function l(m){return null!==m?!0!==m:null}function q(m,C){return null!=m&&null!=C?!0===m&&!0===C:!1===m||!1===C?!1:null}function F(m,C){return null!=m&&null!=C?!0===m||!0===C:!0===m||!0===C?!0:null}function N(m,C){if(null==m)return null;let z=!1;for(const B of C)if(null==B)z=null;else if(m===B){z=!0;break}return z}function d(m,C,z){if(null==m)return null;let B="",P=S.Normal;for(let K=0;K<C.length;K++){const T=C.charAt(K);switch(P){case S.Normal:T===z?P=S.Escaped:B="-[]/{}()*+?.\\^$|".includes(T)?
B+("\\"+T):"%"===T?B+".*":"_"===T?B+".":B+T;break;case S.Escaped:B="-[]/{}()*+?.\\^$|".includes(T)?B+("\\"+T):B+T,P=S.Normal}}return(new RegExp("^"+B+"$","m")).test(m)}function I(m,C,z,B){m=B.getAttribute(m,C);C=z?.get(C);return null==m||"esriFieldTypeDate"!==C?.type&&"date"!==C?.type?null==m||"esriFieldTypeDateOnly"!==C?.type&&"date-only"!==C?.type?null==m||"esriFieldTypeTimeOnly"!==C?.type&&"time-only"!==C?.type?null==m||"esriFieldTypeTimestampOffset"!==C?.type&&"timestamp-offset"!==C?.type?m:new x.SqlTimeStampOffset(m):
H.TimeOnly.fromReader(m):y.DateOnly.fromReader(m):e.convertToExecutingTimeZone(new Date(m),z?.getLuxonTimeZone(C.name)??p.FixedOffsetZone.utcInstance)}const R=new Set(["current_timestamp","current_date","current_time"]);class L{static makeBool(m){return!0===m}static featureValue(m,C,z,B){return I(m,C,z,B)}static equalsNull(m){return null===m}static applyLike(m,C,z){return d(m,C,z)}static ensureArray(m){return a(m)}static applyIn(m,C){return N(m,C)}static currentDate(m){return y.DateOnly.fromNow(m)}static makeSqlInterval(m,
C,z){return v.SqlInterval.createFromValueAndQualifier(m,C,z)}static convertInterval(m){return m instanceof v.SqlInterval?m.valueInMilliseconds():m}static currentTimestamp(m){return e.convertToExecutingTimeZone(new Date,m)}static compare(m,C,z,B){return n.sqlCompare(C,z,m)}static calculate(m,C,z,B){return g.sqlCalculateFunction(m,C,z,B)}static evaluateTime(m){return e.parseTime(m)}static evaluateTimestamp(m,C,z){return e.parseTimestamp(m,C,z)}static evaluateDate(m,C){return e.parseDate(m,C)}static evaluateFunction(m,
C,z){return u.evaluateFunction(m,C,z)}static lookup(m,C){m=C[m];return void 0===m?null:m}static between(m,C,z){return null==m||null==C[0]||null==C[1]?null:n.sqlCompare(m,C[0],"\x3e\x3d")&&n.sqlCompare(m,C[1],"\x3c\x3d")}static notbetween(m,C,z){return null==m||null==C[0]||null==C[1]?null:n.sqlCompare(m,C[0],"\x3c")||n.sqlCompare(m,C[1],"\x3e")}static ternaryNot(m){return l(m)}static ternaryAnd(m,C){return q(m,C)}static ternaryOr(m,C){return F(m,C)}}class U{constructor(m,C,z="UTC"){this.fieldsIndex=
C;this.timeZone=z;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=t.WhereGrammar.parse(m);const {isStandardized:B,isAggregate:P,referencedFieldNames:K}=this._extractExpressionInfo(C);this._referencedFieldNames=K;this.isStandardized=B;this.isAggregate=P}static convertValueToStorageFormat(m,C=null){if(null===C)return e.isDate(m)?m.getTime():e.isDateTime(m)?m.toMillis():e.isTimestampOffset(m)?m.toStorageFormat():e.isTimeOnly(m)?m.toStorageString():e.isDateOnly(m)?m.toStorageFormat():
m;switch(C){case "date":if(e.isDate(m))return m.getTime();if(e.isDateTime(m))return m.toMillis();if(e.isTimestampOffset(m))return m.toMilliseconds();if(e.isDateOnly(m))return m.toNumber();break;case "date-only":if(e.isDate(m))return y.DateOnly.fromDateJS(m).toString();if(e.isTimestampOffset(m))return y.DateOnly.fromSqlTimeStampOffset(m).toString();if(e.isDateTime(m))return y.DateOnly.fromDateTime(m).toString();break;case "time-only":if(e.isDate(m))return H.TimeOnly.fromDateJS(m).toStorageString();
if(e.isDateTime(m))return H.TimeOnly.fromDateTime(m).toStorageString();if(e.isTimestampOffset(m))return H.TimeOnly.fromSqlTimeStampOffset(m).toStorageString();if(e.isTimeOnly(m))return m.toStorageString();break;case "timestamp-offset":if(e.isDate(m))return x.SqlTimeStampOffset.fromJSDate(m).toStorageFormat();if(e.isDateTime(m))return x.SqlTimeStampOffset.fromDateTime(m).toStorageFormat();if(e.isTimestampOffset(m))return m.toStorageFormat()}return m}static create(m,C,z="UTC"){return new U(m,C,z)}get fieldNames(){return this._referencedFieldNames}testSet(m,
C=Q){return!!this._evaluateNode(this.parseTree,null,C,m)}calculateValue(m,C=Q){m=this._evaluateNode(this.parseTree,m,C,null);return m instanceof v.SqlInterval?m.valueInMilliseconds()/864E5:m}calculateValueCompiled(m,C=Q){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(m,this.parameters,C,this.fieldsIndex,this.timeZone);if(r("esri-csp-restrictions"))return this.calculateValue(m,C);this._compileMe();return this.parseTree._compiledVersion(m,this.parameters,C,this.fieldsIndex,
this.timeZone)}testFeature(m,C=Q){return!!this._evaluateNode(this.parseTree,m,C,null)}testFeatureCompiled(m,C=Q){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(m,this.parameters,C,this.fieldsIndex,this.timeZone);if(r("esri-csp-restrictions"))return this.testFeature(m,C);this._compileMe();return!!this.parseTree._compiledVersion(m,this.parameters,C,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=
!1;this._visitAll(this.parseTree,m=>{"current-time"===m.type?this._hasDateFunctions=!0:"function"===m.type&&(this._hasDateFunctions=this._hasDateFunctions||R.has(m.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const m=new Set;this._visitAll(this.parseTree,C=>{"function"===C.type&&m.add(C.name.toLowerCase())});return Array.from(m)}getExpressions(){const m=new Map;this._visitAll(this.parseTree,C=>{if("function"===C.type){const z=C.name.toLowerCase();C=C.args.value[0];if("column-reference"===
C.type){C=C.column;const B=`${z}-${C}`;m.has(B)||m.set(B,{aggregateType:z,field:C})}}});return[...m.values()]}getVariables(){const m=new Set;this._visitAll(this.parseTree,C=>{"parameter"===C.type&&m.add(C.value.toLowerCase())});return Array.from(m)}_compileMe(){const m="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",m)).bind(L)}_extractExpressionInfo(m){const C=
[],z=new Set;let B=!0,P=!1;this._visitAll(this.parseTree,K=>{switch(K.type){case "column-reference":var T=m?.get(K.column);let Y;T?T=Y=T.name??"":(Y=K.column,T=Y.toLowerCase());z.has(T)||(z.add(T),C.push(Y));K.column=Y;break;case "function":const {name:fa,args:oa}=K;K=oa.value.length;B&&=u.isStandardized(fa,K);!1===P&&(P=G.isAggregate(fa,K))}});return{referencedFieldNames:Array.from(C),isStandardized:B,isAggregate:P}}_visitAll(m,C){if(null!=m)switch(C(m),m.type){case "when-clause":this._visitAll(m.operand,
C);this._visitAll(m.value,C);break;case "case-expression":for(const z of m.clauses)this._visitAll(z,C);"simple"===m.format&&this._visitAll(m.operand,C);null!==m.else&&this._visitAll(m.else,C);break;case "expression-list":for(const z of m.value)this._visitAll(z,C);break;case "unary-expression":this._visitAll(m.expr,C);break;case "binary-expression":this._visitAll(m.left,C);this._visitAll(m.right,C);break;case "function":this._visitAll(m.args,C)}}evaluateNodeToJavaScript(m){switch(m.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(m.value)+", "+JSON.stringify(m.qualifier)+","+JSON.stringify(m.op)+")";case "case-expression":var C="";if("simple"===m.format){var z=this.evaluateNodeToJavaScript(m.operand);C="( ";for(let B=0;B<m.clauses.length;B++)C+=" (this.compare('\x3d',"+z+","+this.evaluateNodeToJavaScript(m.clauses[B].operand)+") ? ("+this.evaluateNodeToJavaScript(m.clauses[B].value)+") : "}else for(C="( ",z=0;z<m.clauses.length;z++)C+=" this.makeBool("+this.evaluateNodeToJavaScript(m.clauses[z].operand)+
")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(m.clauses[z].value)+") : ";C=null!==m.else?C+this.evaluateNodeToJavaScript(m.else):C+"null";return C+" )";case "parameter":return"this.lookup("+JSON.stringify(m.value.toLowerCase())+",lookups)";case "expression-list":C="[";for(z of m.value)"["!==C&&(C+=","),C+=this.evaluateNodeToJavaScript(z);return C+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(m.expr)+")";case "binary-expression":switch(m.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "IS":if("null"!==m.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")";case "ISNOT":if("null"!==m.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+
")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(m.left)+
","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(m.operator)+
","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)"}throw new w.SqlError(w.SqlErrorCodes.UnsupportedOperator,{operator:m.operator});case "null":case "boolean":case "string":case "number":return JSON.stringify(m.value);case "time":return"this.evaluateTime(JSON.stringify(node.value))";
case "date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case "timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case "current-time":return"date"===m.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(m.column)+",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(m.name)+","+this.evaluateNodeToJavaScript(m.args)+", timeZone)"}throw new w.SqlError(w.SqlErrorCodes.UnsupportedSyntax,
{node:m.type});}_evaluateNode(m,C,z,B){switch(m.type){case "interval":return z=this._evaluateNode(m.value,C,z,B),v.SqlInterval.createFromValueAndQualifier(z,m.qualifier,m.op);case "case-expression":if("simple"===m.format){var P=this._evaluateNode(m.operand,C,z,B);for(var K=0;K<m.clauses.length;K++)if(n.sqlCompare(P,this._evaluateNode(m.clauses[K].operand,C,z,B),"\x3d",this.timeZone))return this._evaluateNode(m.clauses[K].value,C,z,B)}else for(P=0;P<m.clauses.length;P++)if(!0===this._evaluateNode(m.clauses[P].operand,
C,z,B))return this._evaluateNode(m.clauses[P].value,C,z,B);return null!==m.else?this._evaluateNode(m.else,C,z,B):null;case "parameter":return m=this.parameters[m.value.toLowerCase()],e.isDate(m)?p.DateTime.fromJSDate(m):m instanceof f.ArcadeDate?m.toDateTime():m;case "expression-list":P=[];for(var T of m.value)P.push(this._evaluateNode(T,C,z,B));return P;case "unary-expression":return l(this._evaluateNode(m.expr,C,z,B));case "binary-expression":switch(m.operator){case "AND":return q(this._evaluateNode(m.left,
C,z,B),this._evaluateNode(m.right,C,z,B));case "OR":return F(this._evaluateNode(m.left,C,z,B),this._evaluateNode(m.right,C,z,B));case "IS":if("null"!==m.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(m.left,C,z,B);case "ISNOT":if("null"!==m.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return null!==this._evaluateNode(m.left,C,z,B);case "IN":return P=a(this._evaluateNode(m.right,C,z,B)),N(this._evaluateNode(m.left,C,z,B),P);case "NOT IN":return P=
a(this._evaluateNode(m.right,C,z,B)),l(N(this._evaluateNode(m.left,C,z,B),P));case "BETWEEN":return P=this._evaluateNode(m.left,C,z,B),m=this._evaluateNode(m.right,C,z,B),null==P||null==m[0]||null==m[1]?null:n.sqlCompare(P,m[0],"\x3e\x3d",this.timeZone)&&n.sqlCompare(P,m[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return P=this._evaluateNode(m.left,C,z,B),m=this._evaluateNode(m.right,C,z,B),null==P||null==m[0]||null==m[1]?null:n.sqlCompare(P,m[0],"\x3c",this.timeZone)||n.sqlCompare(P,m[1],"\x3e",
this.timeZone);case "LIKE":return d(this._evaluateNode(m.left,C,z,B),this._evaluateNode(m.right,C,z,B),m.escape);case "NOT LIKE":return l(d(this._evaluateNode(m.left,C,z,B),this._evaluateNode(m.right,C,z,B),m.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return n.sqlCompare(this._evaluateNode(m.left,C,z,B),this._evaluateNode(m.right,C,z,B),m.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return g.sqlCalculateFunction(m.operator,
this._evaluateNode(m.left,C,z,B),this._evaluateNode(m.right,C,z,B),this.timeZone)}case "null":case "boolean":case "string":case "number":return m.value;case "date":return m.parsedValue??(m.parsedValue=e.parseDate(m.value,"unknown")),m.parsedValue;case "timestamp":return m.parsedValue??(m.parsedValue=e.parseTimestamp(m.value,"unknown")),m.parsedValue;case "time":return e.parseTime(m.value);case "current-time":return"date"===m.mode?y.DateOnly.fromNow(this.timeZone):e.convertToExecutingTimeZone(new Date,
this.timeZone);case "column-reference":return I(C,m.column,this.fieldsIndex,z);case "data-type":return m.value;case "function":if(this.isAggregate&&G.isAggregate(m.name,m.args.value.length)){C=[];for(P of m.args?.value||[]){T=[];for(K of B||[])T.push(this._evaluateNode(P,K,z,null));C.push(T)}return G.aggregateFunction(m.name,C)}z=this._evaluateNode(m.args,C,z,B);return u.evaluateFunction(m.name,z,this.timeZone)}throw new w.SqlError(w.SqlErrorCodes.UnsupportedSyntax,{node:m.type});}}var S;(function(m){m[m.Normal=
0]="Normal";m[m.Escaped=1]="Escaped"})(S||={});const Q={getAttribute(m,C){return(m&&"object"===typeof m.attributes?m.attributes:m)[C]}};b.WhereClause=U;b.defaultAttributeAdapter=Q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(b,f,w,r){function G(v,x,u){return v<x?v-x:v>u?v-u:0}function y(v,x=!0){if(v instanceof r.Zone)return v;if("system"===v.toLowerCase())return"system";
if("utc"===v.toLowerCase())return"UTC";if("unknown"===v.toLowerCase())return w.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(v)){const u=r.FixedOffsetZone.parseSpecifier("UTC"+(v.startsWith("+")||v.startsWith("-")?"":"+")+v);if(u)return u}v=r.IANAZone.create(v);if(!v.isValid){if(x)throw new n(b.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return v}b.ArcadeDateErrorCodes=void 0;(b.ArcadeDateErrorCodes||(b.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";
const g={[b.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class n extends Error{constructor(v,x){super(f.replace(g[v],x));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,n)}}class e{constructor(v){this._date=v;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(v=0,x=1,u=1,H=0,t=0,p=0,a=0,l){if(isNaN(v)||isNaN(x)||isNaN(u)||isNaN(H)||isNaN(t)||isNaN(p)||isNaN(a))return null;const q=
r.DateTime.local(v,x).daysInMonth;v=r.DateTime.fromObject({day:1>u?1:u>q?q:u,year:v,month:1>x?1:12<x?12:x,hour:0>H?0:23<H?23:H,minute:0>t?0:59<t?59:t,second:0>p?0:59<p?59:p,millisecond:0>a?0:999<a?999:a},{zone:y(l)});v=v.plus({months:G(x,1,12),days:G(u,1,q),hours:G(H,0,23),minutes:G(t,0,59),seconds:G(p,0,59),milliseconds:G(a,0,999)});return new e(v)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(v,x){x=
y(x);return v.isUnknownTimeZone||x===w.UnknownTimeZone.instance?e.fromParts(v.year,v.monthJS+1,v.day,v.hour,v.minute,v.second,v.millisecond,x):new e(v._date.setZone(x))}static dateJSToArcadeDate(v){return new e(r.DateTime.fromJSDate(v,{zone:"system"}))}static dateJSAndZoneToArcadeDate(v,x="system"){x=y(x);return new e(r.DateTime.fromJSDate(v,{zone:x}))}static unknownEpochToArcadeDate(v){return new e(r.DateTime.fromMillis(v,{zone:w.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(v){return new e(r.DateTime.fromMillis(v.getTime(),
{zone:w.UnknownTimeZone.instance}))}static epochToArcadeDate(v,x="system"){x=y(x);return new e(r.DateTime.fromMillis(v,{zone:x}))}static dateTimeToArcadeDate(v){return new e(v)}clone(){return new e(this._date)}changeTimeZone(v){v=y(v);return e.dateTimeToArcadeDate(this._date.setZone(v))}static dateTimeAndZoneToArcadeDate(v,x){x=y(x);return v.zone===w.UnknownTimeZone.instance||x===w.UnknownTimeZone.instance?e.fromParts(v.year,v.month,v.day,v.hour,v.minute,v.second,v.millisecond,x):new e(v.setZone(x))}static nowToArcadeDate(v){v=
y(v);return new e(r.DateTime.fromJSDate(new Date,{zone:v}))}static nowUTCToArcadeDate(){return new e(r.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===e.systemTimeZoneCanonicalName}equals(v){return this.isSystem&&v.isSystem?this.toNumber()===v.toNumber():this.isUnknownTimeZone!==v.isUnknownTimeZone?!1:this._date.equals(v._date)}get isUnknownTimeZone(){return this._date.zone===w.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let v=
this._date.weekday;6<v&&(v=0);return v}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const v=this.zone;return"fixed"===v.type?0===v.fixed?"UTC":v.formatOffset(0,"short"):v.name}stringify(){return JSON.stringify(this.toJSDate())}plus(v){return new e(this._date.plus(v))}diff(v,x="milliseconds"){return this._date.diff(v._date,x)[x]}toISODate(){return this._date.toISODate()}toISOString(v){return v?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(v,x){return this._date.toISOTime({suppressMilliseconds:v,
includeOffset:x&&!this.isUnknownTimeZone})}toFormat(v,x){this.isUnknownTimeZone&&(v=v.replaceAll("Z",""));return this._date.toFormat(v,x)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new e(this._date.toUTC())}toLocal(){return new e(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(v){if(!v)return null;
v=r.DateTime.fromISO(v,{setZone:!0});return new e(v)}}b.ArcadeDate=e;b.ArcadeDateError=n;b.arcadeDateErrorMessages=g;b.createDateTimeZone=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(b,f){function w(G){return G instanceof f.Zone?G===r.instance?!0:!1:"unknown"===G?.toString().toLowerCase()?!0:!1}class r{}r.instance=new f.IANAZone("Etc/UTC");b.UnknownTimeZone=r;b.adoptTimeZone=function(G,
y){return f.DateTime.fromObject({day:G.day,year:G.year,month:G.month,hour:G.hour,minute:G.minute,second:G.second,millisecond:G.millisecond},{zone:y})};b.isUnknownTimeZone=w;b.substituteUnknownTimezone=function(G){return w(G)?r.instance:G};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(b,f){b.SqlErrorCodes=void 0;(function(g){g.InvalidFunctionParameters="InvalidFunctionParameters";
g.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";g.UnsupportedSqlFunction="UnsupportedSqlFunction";g.UnsupportedOperator="UnsupportedOperator";g.UnsupportedSyntax="UnsupportedSyntax";g.UnsupportedIsRhs="UnsupportedIsRhs";g.UnsupportedIsLhs="UnsupportedIsLhs";g.InvalidDataType="InvalidDataType";g.CannotCastValue="CannotCastValue";g.FunctionNotRecognized="FunctionNotRecognized";g.InvalidTime="InvalidTime";g.InvalidParameterCount="InvalidParameterCount";g.InvalidTimeStamp="InvalidTimeStamp";
g.InvalidDate="InvalidDate";g.InvalidOperator="InvalidOperator";g.IllegalInterval="IllegalInterval";g.YearMonthIntervals="YearMonthIntervals";g.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";g.MissingStatisticParameters="MissingStatisticParameters"})(b.SqlErrorCodes||(b.SqlErrorCodes={}));const w={[b.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[b.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[b.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[b.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[b.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[b.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[b.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[b.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[b.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[b.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[b.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[b.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[b.SqlErrorCodes.IllegalInterval]:"Illegal interval",[b.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[b.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[b.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[b.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[b.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[b.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class r extends Error{constructor(g,n){super(f.replace(w[g],n));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,r)}}b.FeatureSetErrorCodes=void 0;(function(g){g.NeverReach="NeverReach";g.NotImplemented="NotImplemented";g.Cancelled="Cancelled";g.InvalidStatResponse="InvalidStatResponse";g.InvalidRequest="InvalidRequest";g.RequestFailed="RequestFailed";
g.MissingFeatures="MissingFeatures";g.AggregationFieldNotFound="AggregationFieldNotFound";g.DataElementsNotFound="DataElementsNotFound"})(b.FeatureSetErrorCodes||(b.FeatureSetErrorCodes={}));const G={[b.FeatureSetErrorCodes.Cancelled]:"Cancelled",[b.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[b.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[b.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[b.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[b.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[b.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[b.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[b.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class y extends Error{constructor(g,n){super(f.replace(G[g],n));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,y)}}b.FeatureSetError=
y;b.SqlError=r;b.featureSetErrorMessages=G;b.sqlErrorMessages=w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(b,f,w,r,G,y){function g(x){if(null===x)return null;let u=0,H=0;for(let t=0;t<x.length;t++){const p=x[t];if(null!==p){if("number"!==typeof p)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);
H++;u+=p}}return 0===H?null:u/x.length}function n(x,u){if(null===x)return null;let H=null,t=null;for(const p of x)x=p,x=p instanceof w.DateOnly?p.toNumber():p instanceof G.TimeOnly?p.toNumber():p instanceof y.DateTime?p.toMillis():p instanceof r.SqlTimeStampOffset?p.toMilliseconds():p,null===H?(H=p,t=x):"max"===u&&null!==t&&null!==x&&t<=x?(H=p,t=x):"min"===u&&null!==t&&null!==x&&t>=x&&(H=p,t=x);return H}function e(x){if(null===x)return null;x=x.filter(t=>null!==t);if(0===x.length)return null;const u=
g(x);if(null===u)return null;let H=0;for(const t of x){if("number"!==typeof t)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);H+=(u-t)**2}return H/(x.length-1)}const v={min:{minParams:1,maxParams:1,evaluate:x=>n(x[0],"min")},max:{minParams:1,maxParams:1,evaluate:x=>n(x[0],"max")},avg:{minParams:1,maxParams:1,evaluate:x=>g(x[0])},sum:{minParams:1,maxParams:1,evaluate:x=>{x=x[0];if(null===x)x=null;else{var u=0;for(let H=0;H<x.length;H++){const t=x[H];if(null!==t){if("number"!==
typeof t)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);u+=t}}x=u}return x}},stddev:{minParams:1,maxParams:1,evaluate:x=>{x=x[0];null===x?x=null:(x=e(x),x=null===x?null:Math.sqrt(x));return x}},count:{minParams:1,maxParams:1,evaluate:x=>null==x[0]?null:x[0].length},var:{minParams:1,maxParams:1,evaluate:x=>e(x[0])}};b.aggregateFunction=function(x,u){const H=v[x.toLowerCase()];if(null==H)throw new f.SqlError(f.SqlErrorCodes.FunctionNotRecognized);if(u.length<H.minParams||u.length>
H.maxParams)throw new f.SqlError(f.SqlErrorCodes.InvalidParameterCount,{name:x.toUpperCase()});return H.evaluate(u)};b.isAggregate=function(x,u){x=v[x.toLowerCase()];return null!=x&&u>=x.minParams&&u<=x.maxParams};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(b,f,w,r){function G(g){g=g.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let n="";const e=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const v of g.match(e)||[])switch(v){case "D":n+="d";break;case "DD":n+="dd";break;case "DDD":n+="o";break;case "d":n+="c";break;case "ddd":n+="ccc";break;case "dddd":n+="cccc";break;case "M":n+="L";break;case "MM":n+="LL";break;case "MMM":n+="LLL";break;case "MMMM":n+="LLLL";break;case "YY":n+="yy";
break;case "Y":case "YYYY":n+="yyyy";break;case "Q":n+="q";break;case "X":case "x":n+=v;break;default:n=2<=v.length&&"["===v.slice(0,1)&&"]"===v.slice(-1)?n+`'${v.slice(1,-1)}'`:n+`'${v}'`}return n}class y{constructor(g,n,e){this._year=g;this._month=n;this._day=e;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(g){return g instanceof
y&&g.day===this.day&&g.month===this.month&&g.year===this.year}clone(){return new y(this._year,this._month,this._day)}toDateTime(g){return r.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:f.createDateTimeZone(g)})}toDateTimeLuxon(g){return r.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:f.createDateTimeZone(g)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(g=
null){if(null===g||""===g)return this.toString();g=G(g);if(!g)return"";const n=this.toDateTime("unknown");return f.ArcadeDate.dateTimeToArcadeDate(n).toFormat(g,{locale:w.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const g=this.toDateTime("unknown");return f.ArcadeDate.dateTimeToArcadeDate(g)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(g,n){return y.fromDateTime(this.toUTCDateTime().plus({[g]:n}))}toUTCDateTime(){return r.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(g,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(g.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?this.toUTCDateTime().diff(g.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(g.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(g.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(g.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(g.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(g){g=r.DateTime.fromMillis(g,{zone:r.FixedOffsetZone.utcInstance});return g.isValid?y.fromParts(g.year,g.month,g.day):null}static fromSeconds(g){g=r.DateTime.fromSeconds(g,{zone:r.FixedOffsetZone.utcInstance});return g.isValid?y.fromParts(g.year,g.month,g.day):null}static fromReader(g){if(!g)return null;g=g.split("-");return 3!==g.length?null:new y(parseInt(g[0],10),parseInt(g[1],
10),parseInt(g[2],10))}static fromParts(g,n,e){g=new y(g,n,e);return!1===g.isValid?null:g}static fromDateJS(g){return y.fromParts(g.getFullYear(),g.getMonth()+1,g.getDay())}static fromDateTime(g){return y.fromParts(g.year,g.month,g.day)}static fromSqlTimeStampOffset(g){return this.fromDateTime(g.toDateTime())}static fromString(g,n=null){if(""===g||null===g)return null;var e=[];if(n)(n=G(n))&&e.push(n);else if(null===n||""===n)return g=r.DateTime.fromISO(g,{setZone:!0}),g.isValid?y.fromParts(g.year,
g.month,g.day):null;for(const v of e)if(e=r.DateTime.fromFormat(g,n??v),e.isValid)return new y(e.year,e.month,e.day);return null}static fromNow(g="system"){g=r.DateTime.fromJSDate(new Date).setZone(f.createDateTimeZone(g));return new y(g.year,g.month,g.day)}}b.DateOnly=y;b.standardizeDateOnlyFormat=G;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(b,f){function w(G){return Number.isNaN(G)||
0===G?G:Math.trunc(G)}class r{constructor(G){this._timeStampOffset=G;this._date=null}toDateTime(){this._date??(this._date=f.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return w(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return w(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return r.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(G){return new r(f.DateTime.fromJSDate(G).toISO({includeOffset:!0}))}static fromDateTime(G){return new r(G.toISO({includeOffset:!0}))}static fromParts(G,
y,g=0,n=0,e=0,v=0,x=0,u=!1,H=0,t=0){G=`${G.toString().padStart(4,"0")}-${y.toString().padStart(2,"0")}-${g.toString().padStart(2,"0")}`;y="";10>v&&(y="0");n=`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${y+v.toString()}`;0!==x&&(n+="."+x.toString().padStart(3,"0"));x=`${u?"-":"+"}${H.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return new r(G+"T"+n+x)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let G=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});G&&=G.replace(".000","");return G}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(G){G=this.toDateTime().plus(G);return r.fromDateTime(G)}}b.SqlTimeStampOffset=r;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(b,f,w,r){function G(g){if(!g)return"";const n=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let e="";for(const v of g.match(n)||
[])switch(v){case "SSS":e+=v;break;case "A":case "a":e+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":e+=v;break;default:e+=`'${v}'`}return e}class y{constructor(g,n,e,v){this._hour=g;this._minute=n;this._second=e;this._millisecond=v;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(g){return g instanceof y&&g.hour===
this.hour&&g.minute===this.minute&&g.second===this.second&&g.millisecond===this.millisecond}clone(){return new y(this.hour,this.minute,this.second,this.millisecond)}isValid(){return f.isInteger(this.hour)&&f.isInteger(this.minute)&&f.isInteger(this.second)&&f.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(g=null){return null===g||""===g?this.toString():(g=G(g))?r.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(g,{locale:w.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(g,n,e,v){g=new y(g,n,e,v);return g.isValid()?g:null}static fromReader(g){if(!g)return null;g=g.split(":");return 3!==g.length?null:new y(parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],
10),0)}static fromMilliseconds(g){return 864E5<g||0>g?null:new y(Math.floor(g/36E5%24),Math.floor(g/6E4%60),Math.floor(g/1E3%60),Math.floor(g%1E3))}static fromDateJS(g){return new y(g.getHours(),g.getMinutes(),g.getSeconds(),g.getMilliseconds())}static fromDateTime(g){return new y(g.hour,g.minute,g.second,g.millisecond)}static fromSqlTimeStampOffset(g){return this.fromDateTime(g.toDateTime())}static fromString(g,n=null){if(""===g||null===g)return null;const e=[];if(n)(n=G(n))&&e.push(n);else if(null===
n||""===n)e.push("HH:mm:ss"),e.push("HH:mm:ss.SSS"),e.push("hh:mm:ss a"),e.push("hh:mm:ss.SSS a"),e.push("HH:mm"),e.push("hh:mm a"),e.push("H:mm"),e.push("h:mm a"),e.push("H:mm:ss"),e.push("h:mm:ss a"),e.push("H:mm:ss.SSS"),e.push("h:mm:ss.SSS a");for(const v of e)if(n=r.DateTime.fromFormat(g,v),n.isValid)return new y(n.hour,n.minute,n.second,n.millisecond);return null}plus(g,n){switch(g){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return y.fromDateTime(this.toUTCDateTime().plus({[g]:n}))}return null}toUTCDateTime(){return r.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(g,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(g.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?this.toUTCDateTime().diff(g.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(g.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(g.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(g.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(g.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(g.toUTCDateTime(),"milliseconds").milliseconds}}}b.TimeOnly=y;b.standardizeTimeFormat=G;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(b,f){b.cloneGeometry=function(w){if(null==w)return null;const r=w.clone();void 0!==w.cache._geVersion&&(r.cache._geVersion=w.cache._geVersion);return r};b.convertLinearUnitsToCode=function(w){if(null==w)return null;if("number"===typeof w)return w;w=w.toLowerCase();w=w.replaceAll(/\s/g,"");w=w.replaceAll("-","");switch(w){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};b.convertSquareUnitsToCode=
function(w){if(null==w)return null;if("number"===typeof w)return w;w=w.toLowerCase();w=w.replaceAll(/\s/g,"");w=w.replaceAll("-","");switch(w){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};b.isInteger=function(w){return"number"===typeof w&&isFinite(w)&&Math.floor(w)===w};b.sameGeomType=function(w,r){return w===r||"point"===w&&"esriGeometryPoint"===r||"polyline"===w&&"esriGeometryPolyline"===
r||"polygon"===w&&"esriGeometryPolygon"===r||"extent"===w&&"esriGeometryEnvelope"===r||"multipoint"===w&&"esriGeometryMultipoint"===r||"point"===r&&"esriGeometryPoint"===w||"polyline"===r&&"esriGeometryPolyline"===w||"polygon"===r&&"esriGeometryPolygon"===w||"extent"===r&&"esriGeometryEnvelope"===w||"multipoint"===r&&"esriGeometryMultipoint"===w?!0:!1};b.shapeExtent=function(w){if(null==w)return null;switch(w.type){case "polygon":case "multipoint":case "polyline":return w.extent;case "point":return new f({xmin:w.x,
ymin:w.y,xmax:w.x,ymax:w.y,spatialReference:w.spatialReference});case "extent":return w}return null};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(b,f,w,r,G){function y(A,J,M){switch(M){case "+":return A+J;case "-":return A-J;case "*":return A*J;case "/":return A/J}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function g(A,J,M){switch(M){case "+":return J.plus({milliseconds:A.valueInMilliseconds()});case "-":return A.valueInMilliseconds()-J.toMillis()}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function n(A,J,M){switch(M){case "+":return J.plus("milliseconds",A.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function e(A,J,M){switch(M){case "+":return J.plus("milliseconds",A.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function v(A,
J,M){switch(M){case "+":return A.plus("milliseconds",J.valueInMilliseconds());case "-":return A.plus("milliseconds",-1*J.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function x(A,J,M){switch(M){case "+":return J.addMilliseconds(A.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function u(A,J,M){switch(M){case "+":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+J.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-
J.valueInMilliseconds());case "*":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()*J.valueInMilliseconds());case "/":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()/J.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function H(A,J,M){switch(M){case "+":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()+J);case "-":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()-J);case "*":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()*
J);case "/":return r.SqlInterval.createFromMilliseconds(A.valueInMilliseconds()/J)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function t(A,J,M){switch(M){case "+":return r.SqlInterval.createFromMilliseconds(A+J.valueInMilliseconds());case "-":return r.SqlInterval.createFromMilliseconds(A-J.valueInMilliseconds());case "*":return r.SqlInterval.createFromMilliseconds(A*J.valueInMilliseconds());case "/":return r.SqlInterval.createFromMilliseconds(A/J.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function p(A,J,M){switch(M){case "+":return A.plus("milliseconds",J.valueInMilliseconds());case "-":return A.plus("milliseconds",-1*J.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function a(A,J,M){switch(M){case "+":return A.plus({milliseconds:J.valueInMilliseconds()});case "-":return A.minus({milliseconds:J.valueInMilliseconds()})}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function l(A,J,M){switch(M){case "+":return A.addMilliseconds(J.valueInMilliseconds());
case "-":return A.addMilliseconds(-1*J.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function q(A,J,M){J*=864E5;switch(M){case "+":return A.plus({milliseconds:J});case "-":return A.minus({milliseconds:J})}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function F(A,J,M){J*=864E5;switch(M){case "+":return A.plus("milliseconds",J);case "-":return A.plus("milliseconds",-1*J)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function N(A,J,M){J*=864E5;switch(M){case "+":return A.plus("milliseconds",
J);case "-":return A.plus("milliseconds",-1*J)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function d(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function I(A,J,M){J*=864E5;switch(M){case "+":return A.addMilliseconds(J);case "-":return A.addMilliseconds(-1*J)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function R(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function L(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function U(A,
J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function S(A,J,M){J=parseFloat(J);if(isNaN(J))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);return y(A,J,M)}function Q(A,J,M){A=parseFloat(A);if(isNaN(A))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);return y(A,J,M)}function m(A,J,M){switch(M){case "+":return A+J}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function C(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function z(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function B(A,J,M){switch(M){case "-":return A.toDateTimeLuxon(J.zone).diff(J).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function P(A,J,M){switch(M){case "-":return A.toDateTimeLuxon(J.toDateTime().zone).diff(J.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function K(A,J,M){switch(M){case "-":return A.toDateTimeLuxon("UTC").diff(J.toDateTimeLuxon("UTC")).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function T(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function Y(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function fa(A,J,M){switch(M){case "-":return A.toDateTime().diff(J.toDateTimeLuxon(A.toDateTime().zone)).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function oa(A,J,M){switch(M){case "-":return A.toDateTime().diff(J).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function sa(A,J,M){switch(M){case "-":return A.toDateTime().diff(J.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function ca(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ka(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ia(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function qa(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ra(A,J,M){switch(M){case "-":return A.diff(J).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function xa(A,J,M){switch(M){case "-":return A.diff(J.toDateTimeLuxon(A.zone)).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function ya(A,J,M){switch(M){case "-":return A.diff(J.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Ha(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Fa(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function La(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Ta(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function h(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function E(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function X(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function aa(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ja(A,J,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}b.calculateDateOnlyAndDateOnly=K;b.calculateDateOnlyAndDateTime=B;b.calculateDateOnlyAndNumber=F;b.calculateDateOnlyAndSqlInterval=p;b.calculateDateOnlyAndString=Fa;b.calculateDateOnlyAndTimeOnly=T;b.calculateDateOnlyAndTimestamp=
P;b.calculateDateTimeAndDateOnly=xa;b.calculateDateTimeAndDateTime=ra;b.calculateDateTimeAndNumber=q;b.calculateDateTimeAndSqlInterval=a;b.calculateDateTimeAndString=Ta;b.calculateDateTimeAndTimeOnly=Ha;b.calculateDateTimeAndTimestamp=ya;b.calculateNumberAndDateOnly=U;b.calculateNumberAndDateTime=d;b.calculateNumberAndNumber=y;b.calculateNumberAndSqlInterval=t;b.calculateNumberAndString=S;b.calculateNumberAndTimeOnly=L;b.calculateNumberAndTimestamp=R;b.calculateSqlIntervalAndDateOnly=e;b.calculateSqlIntervalAndDateTime=
g;b.calculateSqlIntervalAndNumber=H;b.calculateSqlIntervalAndSqlInterval=u;b.calculateSqlIntervalAndString=C;b.calculateSqlIntervalAndTimeOnly=n;b.calculateSqlIntervalAndTimestamp=x;b.calculateStringAndDateOnly=X;b.calculateStringAndDateTime=aa;b.calculateStringAndNumber=Q;b.calculateStringAndSqlInterval=z;b.calculateStringAndString=m;b.calculateStringAndTimeOnly=E;b.calculateStringAndTimestamp=ja;b.calculateTimeOnlyAndDateOnly=ka;b.calculateTimeOnlyAndDateTime=ca;b.calculateTimeOnlyAndNumber=N;b.calculateTimeOnlyAndSqlInterval=
v;b.calculateTimeOnlyAndString=La;b.calculateTimeOnlyAndTimeOnly=qa;b.calculateTimeOnlyAndTimestamp=ia;b.calculateTimestampAndDateOnly=fa;b.calculateTimestampAndDateTime=oa;b.calculateTimestampAndNumber=I;b.calculateTimestampAndSqlInterval=l;b.calculateTimestampAndString=h;b.calculateTimestampAndTimeOnly=Y;b.calculateTimestampAndTimestamp=sa;b.sqlCalculateFunction=function(A,J,M,W){if("||"===A)return G.evaluateFunction("concat",[J,M],W);if(null===J||null===M)return null;if(w.isNumber(J)){if(w.isNumber(M))return y(J,
M,A);if(w.isSqlInterval(M))return t(J,M,A);if(w.isTimeOnly(M))return L();if(w.isDateOnly(M))return U();if(w.isTimestampOffset(M))return R();if(w.isDateTime(M))return d();if(w.isString(M))return S(J,M,A)}else if(w.isDateOnly(J)){if(w.isNumber(M))return F(J,M,A);if(w.isSqlInterval(M))return p(J,M,A);if(w.isTimeOnly(M))return T();if(w.isDateOnly(M))return K(J,M,A);if(w.isTimestampOffset(M))return P(J,M,A);if(w.isDateTime(M))return B(J,M,A);if(w.isString(M))return Fa()}else if(w.isTimeOnly(J)){if(w.isNumber(M))return N(J,
M,A);if(w.isSqlInterval(M))return v(J,M,A);if(w.isTimeOnly(M))return qa();if(w.isDateOnly(M))return ka();if(w.isTimestampOffset(M))return ia();if(w.isDateTime(M))return ca();if(w.isString(M))return La()}else if(w.isSqlInterval(J)){if(w.isNumber(M))return H(J,M,A);if(w.isSqlInterval(M))return u(J,M,A);if(w.isTimeOnly(M))return n(J,M,A);if(w.isDateOnly(M))return e(J,M,A);if(w.isTimestampOffset(M))return x(J,M,A);if(w.isDateTime(M))return g(J,M,A);if(w.isString(M))return C()}else if(w.isDateTime(J)){if(w.isNumber(M))return q(J,
M,A);if(w.isSqlInterval(M))return a(J,M,A);if(w.isTimeOnly(M))return Ha();if(w.isDateOnly(M))return xa(J,M,A);if(w.isTimestampOffset(M))return ya(J,M,A);if(w.isDateTime(M))return ra(J,M,A);if(w.isString(M))return Ta()}else if(w.isTimestampOffset(J)){if(w.isNumber(M))return I(J,M,A);if(w.isSqlInterval(M))return l(J,M,A);if(w.isTimeOnly(M))return Y();if(w.isDateOnly(M))return fa(J,M,A);if(w.isTimestampOffset(M))return sa(J,M,A);if(w.isDateTime(M))return oa(J,M,A);if(w.isString(M))return h()}else if(w.isString(J)){if(w.isNumber(M))return Q(J,
M,A);if(w.isSqlInterval(M))return z();if(w.isTimeOnly(M))return E();if(w.isDateOnly(M))return X();if(w.isTimestampOffset(M))return ja();if(w.isDateTime(M))return aa();if(w.isString(M))return m(J,M,A)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(b,f,w,r,G,y,g,n){function e(q,F,N){N=t.exec(q);if(null!==N){const [,d,I,R,L,U,S,Q]=N;q=n.DateTime.fromObject({year:parseInt(d,10),month:parseInt(I,10),day:parseInt(R,10),hour:parseInt(L,10),minute:parseInt(U,10),second:parseInt(S,10),millisecond:Q?parseInt(Q.replace(".",""),10):0},{zone:g.substituteUnknownTimezone(F)});if(!1===q.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return q}N=p.exec(q);if(null!==N){const [,d,I,R,L,U,S,Q,m,C,z]=N;q=G.SqlTimeStampOffset.fromParts(parseInt(d,
10),parseInt(I,10),parseInt(R,10),parseInt(L,10),parseInt(U,10),parseInt(S,10),Q?parseInt(Q.replace(".",""),10):0,"-"===m,parseInt(C,10),parseInt(z,10));if(!1===q.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return q}N=a.exec(q);if(null!==N){const [,d,I,R,L,U,S,Q,m]=N;q=G.SqlTimeStampOffset.fromParts(parseInt(d,10),parseInt(I,10),parseInt(R,10),parseInt(L,10),parseInt(U,10),0,0,"-"===S,parseInt(Q,10),parseInt(m,10));if(!1===q.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);
return q}N=l.exec(q);if(null!==N){const [,d,I,R,L,U]=N;q=n.DateTime.fromObject({year:parseInt(d,10),month:parseInt(I,10),day:parseInt(R,10),hour:parseInt(L,10),minute:parseInt(U,10),second:0},{zone:g.substituteUnknownTimezone(F)});if(!1===q.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return q}N=H.exec(q);if(null!==N){const [,d,I,R]=N;q=n.DateTime.fromObject({year:parseInt(d,10),month:parseInt(I,10),day:parseInt(R,10),hour:0,minute:0,second:0},{zone:g.substituteUnknownTimezone(F)});
if(!1===q.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return q}throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);}const v=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,x=/^(\d{1,2}):(\d{1,2})$/,u=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,
l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;b.convertToExecutingTimeZone=function(q,F){if(F instanceof n.Zone)return F===g.UnknownTimeZone.instance?n.DateTime.fromMillis(q.getTime(),{zone:g.UnknownTimeZone.instance}):n.DateTime.fromJSDate(q,{zone:F});switch(F){case "system":case "local":case null:return n.DateTime.fromJSDate(q);default:return"unknown"===F?.toLowerCase()?n.DateTime.fromMillis(q.getTime(),{zone:g.UnknownTimeZone.instance}):n.DateTime.fromJSDate(q,{zone:F})}};b.isDate=function(q){return q instanceof
Date};b.isDateOnly=function(q){return q instanceof w.DateOnly};b.isDateTime=function(q){return q instanceof n.DateTime};b.isNumber=function(q){return"number"===typeof q};b.isSqlInterval=function(q){return q instanceof r.SqlInterval};b.isString=function(q){return"string"===typeof q||q instanceof String};b.isTimeOnly=function(q){return q instanceof y.TimeOnly};b.isTimestampOffset=function(q){return q instanceof G.SqlTimeStampOffset};b.parseDate=function(q,F){const N=H.exec(q);if(null===N)try{return e(q,
F)}catch{throw new f.SqlError(f.SqlErrorCodes.InvalidDate);}const [,d,I,R]=N;q=w.DateOnly.fromParts(parseInt(d,10),parseInt(I,10),parseInt(R,10));if(null===q)throw new f.SqlError(f.SqlErrorCodes.InvalidDate);return q};b.parseTime=function(q){let F=v.exec(q);if(null!==F){const [,N,d,I]=F;q=y.TimeOnly.fromParts(parseInt(N,10),parseInt(d,10),parseInt(I,10),0);if(null!==q)return q;throw new f.SqlError(f.SqlErrorCodes.InvalidTime);}F=x.exec(q);if(null!==F){const [,N,d]=F;q=y.TimeOnly.fromParts(parseInt(N,
10),parseInt(d,10),0,0);if(null!==q)return q;throw new f.SqlError(f.SqlErrorCodes.InvalidTime);}F=u.exec(q);if(null!==F){const [,N,d,I,R]=F;q=y.TimeOnly.fromParts(parseInt(N,10),parseInt(d,10),parseInt(I,10),parseInt(R,10));if(null!==q)return q}throw new f.SqlError(f.SqlErrorCodes.InvalidTime);};b.parseTimestamp=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(b,f){class w{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(r){if(null!==r.precision||null!==r.secondary)throw new f.SqlError(f.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(r,G){G.includes(".")?(G=G.split("."),r.second=parseFloat(G[0]),r.millis=parseInt(G[1],10)):r.second=parseFloat(G)}static createFromMilliseconds(r){const G=new w;G.second=r/1E3;return G}static createFromValueAndQualifier(r,G,y){let g=null;const n=new w;n.op="-"===
y?"-":"+";if("interval-period"===G.type){w._fixDefaults(G);y=RegExp("^[0-9]{1,}$");if("year"===G.period||"month"===G.period)throw new f.SqlError(f.SqlErrorCodes.YearMonthIntervals);if("second"===G.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(r))w._parseSecondsComponent(n,r);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);else if(y.test(r))n[G.period]=parseFloat(r);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}else{w._fixDefaults(G.start);w._fixDefaults(G.end);if("year"===
G.start.period||"month"===G.start.period||"year"===G.end.period||"month"===G.end.period)throw new f.SqlError(f.SqlErrorCodes.YearMonthIntervals);switch(G.start.period){case "day":switch(G.end.period){case "hour":g=RegExp("^[0-9]{1,} [0-9]{1,}$");if(g.test(r))n[G.start.period]=parseFloat(r.split(" ")[0]),n[G.end.period]=parseFloat(r.split(" ")[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "minute":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(g.test(r))n[G.start.period]=
parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),n.hour=parseFloat(r[0]),n.minute=parseFloat(r[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "second":g=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(r))n[G.start.period]=parseFloat(r.split(" ")[0]),r=r.split(" ")[1].split(":"),n.hour=parseFloat(r[0]),n.minute=parseFloat(r[1]),w._parseSecondsComponent(n,r[2]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(G.end.period){case "minute":g=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(g.test(r))n.hour=parseFloat(r.split(":")[0]),n.minute=parseFloat(r.split(":")[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(r))r=r.split(":"),n.hour=parseFloat(r[0]),n.minute=parseFloat(r[1]),w._parseSecondsComponent(n,r[2]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(G.end.period){case "second":g=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(g.test(r))r=r.split(":"),n.minute=parseFloat(r[0]),w._parseSecondsComponent(n,r[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}}return n}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}b.SqlInterval=w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(b,f,w,r,G,y,g,n){function e(a){return"string"===typeof a||a instanceof String}function v(a){return y.isDate(a)||y.isDateOnly(a)||
y.isDateTime(a)||y.isTimeOnly(a)||y.isTimestampOffset(a)?!1:!0}function x(a){return y.isDateOnly(a)||y.isTimeOnly(a)?a.toString():y.isTimestampOffset(a)?a.toSQLValue():y.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):y.isDate(a)?x(n.DateTime.fromJSDate(a)):a.toString()}function u(a){if(y.isDate(a))return r.DateOnly.fromDateJS(a);if(y.isDateTime(a))return r.DateOnly.fromParts(a.year,a.month,a.day);if(y.isDateOnly(a))return a;if(y.isTimeOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
if(y.isTimestampOffset(a)&&null===r.DateOnly.fromParts(a.year,a.month,a.day))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(e(a)&&(a=r.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}function H(a,l,q){if(y.isDate(a))return y.convertToExecutingTimeZone(a,l);if(y.isDateTime(a))return a;if(y.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(y.isTimeOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(y.isTimestampOffset(a))return a;
if(e(a))return y.parseTimestamp(a,"unknown",q);throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}function t(a){if(y.isDate(a))return g.TimeOnly.fromDateJS(a);if(y.isDateTime(a))return g.TimeOnly.fromDateTime(a);if(y.isDateOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(y.isTimeOnly(a))return a;if(y.isTimestampOffset(a))return g.TimeOnly.fromSqlTimeStampOffset(a);if(e(a))return y.parseTime(a);throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}const p={extract:{minParams:2,
maxParams:2,evaluate:([a,l])=>{if(null==l)return null;if(y.isDate(l))switch(a.toUpperCase()){case "SECOND":return l.getSeconds();case "MINUTE":return l.getMinutes();case "HOUR":return l.getHours();case "DAY":return l.getDate();case "MONTH":return l.getMonth()+1;case "YEAR":return l.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(y.isDateTime(l))switch(a.toUpperCase()){case "SECOND":return l.second;case "MINUTE":return l.minute;case "HOUR":return l.hour;case "DAY":return l.day;
case "MONTH":return l.month;case "YEAR":return l.year}else if(y.isDateOnly(l))switch(a.toUpperCase()){case "DAY":return l.day;case "MONTH":return l.month;case "YEAR":return l.year}else if(y.isTimeOnly(l))switch(a.toUpperCase()){case "SECOND":return l.second;case "MINUTE":return l.minute;case "HOUR":return l.hour}else if(y.isTimestampOffset(l))switch(a.toUpperCase()){case "SECOND":return l.second;case "MINUTE":return l.minute;case "HOUR":return l.hour;case "DAY":return l.day;case "MONTH":return l.month;
case "YEAR":return l.year;case "TIMEZONE_HOUR":return l.timezoneOffsetHour;case "TIMEZONE_MINUTE":return l.timezoneOffsetMinutes}throw new f.SqlError(f.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [l,q]=a;return null==l||null==q?null:l.toString().substring(q-1)}if(3===a.length){const [l,q,F]=a;return null==l||null==q||null==F?null:0>=F?"":l.toString().substring(q-1,q+F-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,l])=>null==a||null==l?null:l.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var l=3===a.length,q=l?a[1]:" ";l=l?a[2]:a[1];if(null==q||null==l)return null;q=`(${w.escapeRegExpString(q)})`;switch(a[0]){case "BOTH":return l.replaceAll(new RegExp(`^${q}*|${q}*$`,"g"),"");case "LEADING":return l.replaceAll(new RegExp(`^${q}*`,"g"),"");case "TRAILING":return l.replaceAll(new RegExp(`${q}*$`,"g"),"")}throw new f.SqlError(f.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const l=a[0];a=2===a.length?10**a[1]:1;return null==l?null:Math.round(l*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>e(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let l="";for(let q=0;q<a.length;q++){if(null==a[q])return null;
l+=a[q].toString()}return l}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const l of a)if(null!==l)return l;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,l)=>G.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,l)=>{const q=a[0];a=a[1];if(null===q)return null;switch(a.type){case "integer":if(!v(q))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);l=parseInt(q,10);if(isNaN(l))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;case "smallint":if(!v(q))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);l=parseInt(q,10);if(isNaN(l))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
if(32767<l||-32767>l)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;case "float":case "real":if(!v(q))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);l=parseFloat(q);if(isNaN(l))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;case "time":return t(q);case "date":return u(q);case "timestamp":return H(q,l,!0===a.withtimezone);case "varchar":l=x(q);if(l.length>a.size)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;default:throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);
}}}};b.evaluateFunction=function(a,l,q){const F=p[a.toLowerCase()];if(null==F)throw new f.SqlError(f.SqlErrorCodes.FunctionNotRecognized);if(l.length<F.minParams||l.length>F.maxParams)throw new f.SqlError(f.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return F.evaluate(l,q)};b.isStandardized=function(a,l){a=p[a.toLowerCase()];return null!=a&&l>=a.minParams&&l<=a.maxParams};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(b,f,w,r,G,y){function g(a){return w.isDateTime(a)||w.isTimestampOffset(a)?!0:!1}function n(a){return w.isDateTime(a)||w.isDateOnly(a)||w.isTimestampOffset(a)||w.isTimeOnly(a)?!0:!1}function e(a){if(w.isDateTime(a))return a.toMillis();if(w.isDateOnly(a))return a.toNumber();if(w.isTimestampOffset(a))return a.toMilliseconds();throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);}function v(a,l,q){switch(q){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<
l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function x(a,l,q){const F=parseFloat(l);if(!isNaN(F))return v(a,F,q);a=a.toString();switch(q){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function u(a,l,q){const F=parseFloat(a);if(!isNaN(F))return v(F,l,q);l=l.toString();switch(q){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<
l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function H(a,l,q){switch(q){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function t(a,l,q){a instanceof r.SqlTimeStampOffset&&(a=a.toDateTime());l instanceof r.SqlTimeStampOffset&&(l=l.toDateTime());a=p(a);l=p(l);switch(q){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=
l;case "\x3c\x3d":return a<=l}}function p(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}b.dateValueInMilliseconds=e;b.isDateOrTimeValue=n;b.isDateTimeComparableValue=g;b.sqlCompare=function(a,l,q,F){if(null==a||null==l)return null;if(w.isNumber(a)){if(w.isNumber(l))return v(a,l,q);if(w.isString(l))return x(a,l,q);if(n(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}else if(w.isString(a)){if(w.isNumber(l))return u(a,l,q);if(w.isString(l))return H(a,l,q);if(w.isDateTime(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isTimestampOffset(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(w.isDateTime(a)){if(g(l)){if(a instanceof y.DateTime&&G.isUnknownTimeZone(a.zone)){if(l instanceof y.DateTime&&
!1===G.isUnknownTimeZone(l.zone)||l instanceof r.SqlTimeStampOffset)return t(a,l,q)}else if(l instanceof y.DateTime&&G.isUnknownTimeZone(l.zone)&&(a instanceof y.DateTime&&!1===G.isUnknownTimeZone(a.zone)||a instanceof r.SqlTimeStampOffset))return t(a,l,q);return v(e(a),e(l),q)}if(w.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(l))return l=l.toDateTimeLuxon(a.zone),a=a.startOf("day"),v(a.toMillis(),l.toMillis(),q);if(w.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
if(w.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(w.isDateOnly(a)){if(w.isTimestampOffset(l))return a=a.toDateTimeLuxon(l.toDateTime().zone),l=l.startOfDay(),v(a.toMillis(),l.toMilliseconds(),q);if(w.isDateTime(l))return a=a.toDateTimeLuxon(l.zone),l=l.startOf("day"),v(a.toMillis(),l.toMillis(),q);if(w.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(l))return v(a.toNumber(),l.toNumber(),q);if(w.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
if(w.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(w.isTimeOnly(a)){if(w.isTimeOnly(l))return v(a.toNumber(),l.toNumber(),q);if(w.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(g(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(w.isTimestampOffset(a)){if(g(l))return l instanceof y.DateTime&&
G.isUnknownTimeZone(l.zone)?t(a,l,q):v(e(a),e(l),q);if(w.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(l))return l=l.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),v(a.toMilliseconds(),l.toMillis(),q);if(w.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(w.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}switch(q){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=
l;case "\x3c\x3d":return a<=l}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(b,f){var w={exports:{}};(function(y){(function(g,n){y.exports&&(y.exports=n())})(f.commonjsGlobal,function(){function g(e,v,x,u){e=Error.call(this,e);Object.setPrototypeOf&&Object.setPrototypeOf(e,g.prototype);e.expected=v;e.found=x;e.location=u;e.name="SyntaxError";return e}function n(e,v,x){x=x||" ";if(e.length>
v)return e;v-=e.length;x+=x.repeat(v);return e+x.slice(0,v)}(function(e,v){function x(){this.constructor=e}x.prototype=v.prototype;e.prototype=new x})(g,Error);g.prototype.format=function(e){var v="Error: "+this.message;if(this.location){var x=null,u;for(u=0;u<e.length;u++)if(e[u].source===this.location.source){x=e[u].text.split(/\r\n|\n|\r/g);break}e=this.location.start;u=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(e):e;var H=this.location.source+
":"+u.line+":"+u.column;if(x){var t=this.location.end,p=n("",u.line.toString().length," ");x=x[e.line-1];t=(e.line===t.line?t.column:x.length+1)-e.column||1;v+="\n --\x3e "+H+"\n"+p+" |\n"+u.line+" | "+x+"\n"+p+" | "+n("",e.column-1," ")+n("",t,"^")}else v+="\n at "+H}return v};g.buildMessage=function(e,v){function x(a){return a.charCodeAt(0).toString(16).toUpperCase()}function u(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+x(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+x(l)})}function H(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+x(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+x(l)})}function t(a){return p[a.type](a)}var p={literal:function(a){return'"'+
u(a.text)+'"'},class:function(a){var l=a.parts.map(function(q){return Array.isArray(q)?H(q[0])+"-"+H(q[1]):H(q)});return"["+(a.inverted?"^":"")+l.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(t);var l,q;a.sort();if(0<a.length){for(q=l=1;l<a.length;l++)a[l-1]!==a[l]&&(a[q]=a[l],q++);a.length=q}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+(v?'"'+u(v)+'"':"end of input")+" found."};return{SyntaxError:g,parse:function(e,v){function x(D,O){O=void 0!==O?O:p(pa,k);throw new g(D,null,null,O);}function u(D,O){return{type:"literal",text:D,ignoreCase:O}}function H(D,O,V){return{type:"class",parts:D,inverted:O,ignoreCase:V}}function t(D){var O=Zb[D],V;if(!O){for(V=D-1;!Zb[V];)V--;O=Zb[V];for(O={line:O.line,column:O.column};V<D;)10===e.charCodeAt(V)?(O.line++,O.column=1):O.column++,V++;Zb[D]=
O}return O}function p(D,O,V){var da=t(D),ua=t(O);D={source:Mb,start:{offset:D,line:da.line,column:da.column},end:{offset:O,line:ua.line,column:ua.column}};V&&Mb&&"function"===typeof Mb.offset&&(D.start=Mb.offset(D.start),D.end=Mb.offset(D.end));return D}function a(D){k<eb||(k>eb&&(eb=k,zc=[]),zc.push(D))}function l(){var D=k;ma();var O=F();O!==c?(ma(),pa=D,D=O):(k=D,D=c);return D}function q(){var D=k;var O=F();if(O!==c){var V=[];var da=k;var ua=ma();var Ba=Wa();if(Ba!==c){var Ga=ma();var Ia=F();Ia!==
c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)}else k=da,da=c;for(;da!==c;)V.push(da),da=k,ua=ma(),Ba=Wa(),Ba!==c?(Ga=ma(),Ia=F(),Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)):(k=da,da=c);pa=D;D={type:"expression-list"};O=[O];for(da=0;da<V.length;da++)O.push(V[da][3]);D.value=O}else k=D,D=c;return D}function F(){var D=k;var O=N();if(O!==c){var V=[];var da=k;var ua=ma();var Ba=M();if(Ba!==c){var Ga=ma();var Ia=N();Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)}else k=da,da=c;for(;da!==c;)V.push(da),da=k,ua=ma(),Ba=M(),Ba!==
c?(Ga=ma(),Ia=N(),Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)):(k=da,da=c);pa=D;D=nb(O,V)}else k=D,D=c;return D}function N(){var D=k;var O=d();if(O!==c){var V=[];var da=k;var ua=ma();var Ba=J();if(Ba!==c){var Ga=ma();var Ia=d();Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)}else k=da,da=c;for(;da!==c;)V.push(da),da=k,ua=ma(),Ba=J(),Ba!==c?(Ga=ma(),Ia=d(),Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)):(k=da,da=c);pa=D;D=nb(O,V)}else k=D,D=c;return D}function d(){var D=k;var O=A();if(O===c){O=k;if(33===e.charCodeAt(k)){var V=
Nd;k++}else V=c,0===ha&&a(Od);if(V!==c){var da=k;ha++;if(61===e.charCodeAt(k)){var ua=Sc;k++}else ua=c,0===ha&&a(Tc);ha--;ua===c?da=void 0:(k=da,da=c);da!==c?O=V=[V,da]:(k=O,O=c)}else k=O,O=c}O!==c?(V=ma(),da=d(),da!==c?(pa=D,D={type:"unary-expression",operator:"NOT",expr:da}):(k=D,D=c)):(k=D,D=c);if(D===c){O=k;D=U();if(D!==c){ma();V=k;da=[];ua=k;var Ba=ma();var Ga=I();if(Ga!==c){var Ia=ma();var ob=U();ob!==c?ua=Ba=[Ba,Ga,Ia,ob]:(k=ua,ua=c)}else k=ua,ua=c;if(ua!==c)for(;ua!==c;)da.push(ua),ua=k,Ba=
ma(),Ga=I(),Ga!==c?(Ia=ma(),ob=U(),ob!==c?ua=Ba=[Ba,Ga,Ia,ob]:(k=ua,ua=c)):(k=ua,ua=c);else da=c;da!==c&&(pa=V,da={type:"arithmetic",tail:da});V=da;V===c&&(V=k,da=L(),da!==c?(ma(),ua=Ma(),ua!==c?(ma(),ua=q(),ua!==c?(ma(),Ba=Na(),Ba!==c?(pa=V,V={op:da,right:ua}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,da=L(),da!==c?(ma(),ua=Ma(),ua!==c?(ma(),ua=Na(),ua!==c?(pa=V,V={op:da,right:{type:"expression-list",value:[]}}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,da=L(),da!==c?(ma(),ua=fa(),
ua!==c?(pa=V,V={op:da,right:ua}):(k=V,V=c)):(k=V,V=c))),V===c&&(V=k,Ba=A(),Ba!==c?(ma(),da=W(),da!==c?(ma(),ua=U(),ua!==c?(ma(),Ga=J(),Ga!==c?(ma(),Ba=U(),Ba!==c?(pa=V,V={op:"NOT"+da,right:{type:"expression-list",value:[ua,Ba]}}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,Ba=W(),Ba!==c?(ma(),da=U(),da!==c?(ma(),ua=J(),ua!==c?(ma(),Ga=U(),Ga!==c?(pa=V,V={op:Ba,right:{type:"expression-list",value:[da,Ga]}}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)),V===c&&(V=k,da=aa(),da!==
c?(ma(),ua=A(),ua!==c?(ma(),ua=U(),ua!==c?(pa=V,V={op:da+"NOT",right:ua}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,da=aa(),da!==c?(ma(),ua=U(),ua!==c?(pa=V,V={op:da,right:ua}):(k=V,V=c)):(k=V,V=c)),V===c&&(V=k,da=R(),da!==c?(ma(),ua=qa(),ua!==c?(ma(),Ba=k,e.substr(k,6).toLowerCase()===Pd?(Ga=e.substr(k,6),k+=6):(Ga=c,0===ha&&a(Qd)),Ga!==c?(Ga=k,ha++,Ia=P(),ha--,Ia===c?Ga=void 0:(k=Ga,Ga=c),Ga!==c?(pa=Ba,Ba="ESCAPE"):(k=Ba,Ba=c)):(k=Ba,Ba=c),Ba!==c?(ma(),Ba=ra(),Ba!==c?(pa=V,V={op:da,right:ua,escape:Ba.value}):
(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,da=R(),da!==c?(ma(),ua=qa(),ua!==c?(pa=V,V={op:da,right:ua,escape:""}):(k=V,V=c)):(k=V,V=c))))));V===c&&(V=null);pa=O;O=V;""==O||void 0==O||null==O?O=D:(V=null,O=V="arithmetic"==O.type?nb(D,O.tail):Nb(O.op,D,O.right,O.escape))}else k=O,O=c;D=O}return D}function I(){if(e.substr(k,2)===Uc){var D=Uc;k+=2}else D=c,0===ha&&a(Rd);D===c&&(62===e.charCodeAt(k)?(D=Sd,k++):(D=c,0===ha&&a(Td)),D===c&&(e.substr(k,2)===Vc?(D=Vc,k+=2):(D=c,0===ha&&a(Ud)),D===
c&&(e.substr(k,2)===Wc?(D=Wc,k+=2):(D=c,0===ha&&a(Vd)),D===c&&(60===e.charCodeAt(k)?(D=Wd,k++):(D=c,0===ha&&a(Xd)),D===c&&(61===e.charCodeAt(k)?(D=Sc,k++):(D=c,0===ha&&a(Tc)),D===c&&(e.substr(k,2)===Xc?(D=Xc,k+=2):(D=c,0===ha&&a(Yd))))))));return D}function R(){var D;var O=D=k;var V=A();if(V!==c){var da=ma();var ua=ja();ua!==c?O=V=[V,da,ua]:(k=O,O=c)}else k=O,O=c;O!==c&&(pa=D,O=O[0]+" "+O[2]);D=O;D===c&&(D=ja());return D}function L(){var D;var O=D=k;var V=A();if(V!==c){var da=ma();var ua=X();ua!==
c?O=V=[V,da,ua]:(k=O,O=c)}else k=O,O=c;O!==c&&(pa=D,O=O[0]+" "+O[2]);D=O;D===c&&(D=X());return D}function U(){var D=k;var O=Q();if(O!==c){var V=[];var da=k;var ua=ma();var Ba=S();if(Ba!==c){var Ga=ma();var Ia=Q();Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)}else k=da,da=c;for(;da!==c;)V.push(da),da=k,ua=ma(),Ba=S(),Ba!==c?(Ga=ma(),Ia=Q(),Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)):(k=da,da=c);pa=D;D=nb(O,V)}else k=D,D=c;return D}function S(){if(43===e.charCodeAt(k)){var D=Ac;k++}else D=c,0===ha&&a(Bc);D===
c&&(45===e.charCodeAt(k)?(D=Cc,k++):(D=c,0===ha&&a(Dc)),D===c&&(e.substr(k,2)===Yc?(D=Yc,k+=2):(D=c,0===ha&&a(Zd))));return D}function Q(){var D=k;var O=C();if(O!==c){var V=[];var da=k;var ua=ma();var Ba=m();if(Ba!==c){var Ga=ma();var Ia=C();Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)}else k=da,da=c;for(;da!==c;)V.push(da),da=k,ua=ma(),Ba=m(),Ba!==c?(Ga=ma(),Ia=C(),Ia!==c?da=ua=[ua,Ba,Ga,Ia]:(k=da,da=c)):(k=da,da=c);pa=D;D=nb(O,V)}else k=D,D=c;return D}function m(){if(42===e.charCodeAt(k)){var D=$d;k++}else D=
c,0===ha&&a(ae);D===c&&(47===e.charCodeAt(k)?(D=be,k++):(D=c,0===ha&&a(ce)));return D}function C(){var D=ra();if(D===c){var O=k;var V=k;var da=Fa();if(da!==c){var ua=La();if(ua!==c){var Ba=Ta();Ba!==c?(pa=V,V=parseFloat(da+ua+Ba)):(k=V,V=c)}else k=V,V=c}else k=V,V=c;V===c&&(V=k,da=Fa(),da!==c?(ua=La(),ua!==c?(pa=V,V=parseFloat(da+ua)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,da=Fa(),da!==c?(ua=Ta(),ua!==c?(pa=V,V=parseFloat(da+ua)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,da=Fa(),da!==c&&(pa=V,da=parseFloat(da)),
V=da)));var Ga=V;if(Ga!==c){var Ia=k;ha++;var ob=B();ha--;ob===c?Ia=void 0:(k=Ia,Ia=c);Ia!==c?(pa=O,O={type:"number",value:Ga}):(k=O,O=c)}else k=O,O=c;D=O;if(D===c){var pb=k;var Jb=k;if(e.substr(k,4).toLowerCase()===de){var $b=e.substr(k,4);k+=4}else $b=c,0===ha&&a(ee);if($b!==c){var Ob=k;ha++;var fe=P();ha--;fe===c?Ob=void 0:(k=Ob,Ob=c);Ob!==c?Jb=$b=[$b,Ob]:(k=Jb,Jb=c)}else k=Jb,Jb=c;var qb=Jb;qb!==c&&(pa=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===c){pb=k;var Kb=k;if(e.substr(k,5).toLowerCase()===
ge){var ac=e.substr(k,5);k+=5}else ac=c,0===ha&&a(he);if(ac!==c){var Pb=k;ha++;var ie=P();ha--;ie===c?Pb=void 0:(k=Pb,Pb=c);Pb!==c?Kb=ac=[ac,Pb]:(k=Kb,Kb=c)}else k=Kb,Kb=c;qb=Kb;qb!==c&&(pa=pb,qb={type:"boolean",value:!1});pb=qb}D=pb;if(D===c){var je=k;var Lb=k;if(e.substr(k,4).toLowerCase()===ke){var bc=e.substr(k,4);k+=4}else bc=c,0===ha&&a(le);if(bc!==c){var Qb=k;ha++;var me=P();ha--;me===c?Qb=void 0:(k=Qb,Qb=c);Qb!==c?Lb=bc=[bc,Qb]:(k=Lb,Lb=c)}else k=Lb,Lb=c;var Ec=Lb;Ec!==c&&(pa=je,Ec={type:"null",
value:null});D=Ec;if(D===c){var rb=k;if(la()!==c){ma();var cc=qa();cc!==c?(pa=rb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&x("Date literal is invalid"),rb={type:"date",
value:cc.value}):(k=rb,rb=c)}else k=rb,rb=c;D=rb;if(D===c){var sb=k;if(ea()!==c){ma();var dc=qa();dc!==c?(pa=sb,"string"===dc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(dc.value)&&x("Timestamp literal is invalid"),
sb={type:"timestamp",value:dc.value}):(k=sb,sb=c)}else k=sb,sb=c;D=sb;if(D===c){var Ua=k;var Fc=wa();if(Fc!==c){ma();if(45===e.charCodeAt(k)){var hb=Cc;k++}else hb=c,0===ha&&a(Dc);hb===c&&(43===e.charCodeAt(k)?(hb=Ac,k++):(hb=c,0===ha&&a(Bc)));if(hb!==c){ma();var Rb=qa();if(Rb!==c){ma();var Zc=sa();Zc!==c?(pa=Ua,Ua={type:"interval",value:Rb,qualifier:Zc,op:hb}):(k=Ua,Ua=c)}else k=Ua,Ua=c}else k=Ua,Ua=c}else k=Ua,Ua=c;Ua===c&&(Ua=k,Fc=wa(),Fc!==c?(ma(),hb=qa(),hb!==c?(ma(),Rb=sa(),Rb!==c?(pa=Ua,Ua=
{type:"interval",value:hb,qualifier:Rb,op:""}):(k=Ua,Ua=c)):(k=Ua,Ua=c)):(k=Ua,Ua=c));D=Ua;if(D===c){var tb=k;if(na()!==c){ma();var ec=qa();ec!==c?(pa=tb,"string"===ec.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(ec.value)&&x("Time literal is invalid"),tb={type:"time",value:ec.value}):(k=tb,tb=c)}else k=tb,tb=c;D=tb}}}}}}}var Oa=D;if(Oa===c){var Za=k;var ub=k;if(e.substr(k,7).toLowerCase()===ne){var $c=e.substr(k,7);k+=7}else $c=
c,0===ha&&a(oe);if($c!==c){var fc=k;ha++;var pe=P();ha--;pe===c?fc=void 0:(k=fc,fc=c);fc!==c?(pa=ub,ub="EXTRACT"):(k=ub,ub=c)}else k=ub,ub=c;if(ub!==c){ma();var qe=Ma();if(qe!==c){ma();var $a=ta();if($a===c&&($a=va(),$a===c&&($a=Ea(),$a===c&&($a=za(),$a===c&&($a=Da(),$a===c&&($a=Ca(),$a===c)))))){var vb=k;if(e.substr(k,13).toLowerCase()===re){var ad=e.substr(k,13);k+=13}else ad=c,0===ha&&a(se);if(ad!==c){var gc=k;ha++;var te=P();ha--;te===c?gc=void 0:(k=gc,gc=c);gc!==c?(pa=vb,vb="TIMEZONE_HOUR"):
(k=vb,vb=c)}else k=vb,vb=c;$a=vb;if($a===c){var wb=k;if(e.substr(k,15).toLowerCase()===ue){var bd=e.substr(k,15);k+=15}else bd=c,0===ha&&a(ve);if(bd!==c){var hc=k;ha++;var we=P();ha--;we===c?hc=void 0:(k=hc,hc=c);hc!==c?(pa=wb,wb="TIMEZONE_MINUTE"):(k=wb,wb=c)}else k=wb,wb=c;$a=wb}}var cd=$a;if(cd!==c){ma();var xe=Z();if(xe!==c){ma();var dd=F();if(dd!==c){ma();var ye=Na();ye!==c?(pa=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:cd},dd]}}):(k=Za,Za=
c)}else k=Za,Za=c}else k=Za,Za=c}else k=Za,Za=c}else k=Za,Za=c}else k=Za,Za=c;Oa=Za;if(Oa===c){var ab=k;var xb=k;if(e.substr(k,9).toLowerCase()===ze){var ed=e.substr(k,9);k+=9}else ed=c,0===ha&&a(Ae);if(ed!==c){var ic=k;ha++;var Be=P();ha--;Be===c?ic=void 0:(k=ic,ic=c);ic!==c?(pa=xb,xb="SUBSTRING"):(k=xb,xb=c)}else k=xb,xb=c;if(xb!==c){ma();var Ce=Ma();if(Ce!==c){ma();var Gc=F();if(Gc!==c){ma();var De=Z();if(De!==c){ma();var Hc=F();if(Hc!==c){ma();var ib=k;var yb=k;if(e.substr(k,3).toLowerCase()===
Ee){var fd=e.substr(k,3);k+=3}else fd=c,0===ha&&a(Fe);if(fd!==c){var jc=k;ha++;var Ge=P();ha--;Ge===c?jc=void 0:(k=jc,jc=c);jc!==c?(pa=yb,yb="FOR"):(k=yb,yb=c)}else k=yb,yb=c;var Sb=yb;if(Sb!==c){var He=ma();var gd=F();if(gd!==c){var Ie=ma();ib=Sb=[Sb,He,gd,Ie]}else k=ib,ib=c}else k=ib,ib=c;ib===c&&(ib=null);Sb=Na();Sb!==c?(pa=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Gc,Hc,ib[2]]:[Gc,Hc]}}):(k=ab,ab=c)}else k=ab,ab=c}else k=ab,ab=c}else k=ab,ab=c}else k=ab,ab=
c}else k=ab,ab=c;Oa=ab;if(Oa===c){var Qa=k;var Ic=ba();if(Ic!==c){ma();var Jc=Ma();if(Jc!==c){ma();var jb=oa();jb===c&&(jb=null);ma();var Tb=F();if(Tb!==c){ma();var Kc=Z();if(Kc!==c){ma();var hd=F();if(hd!==c){ma();var Je=Na();Je!==c?(pa=Qa,Qa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb,hd]}}):(k=Qa,Qa=c)}else k=Qa,Qa=c}else k=Qa,Qa=c}else k=Qa,Qa=c}else k=Qa,Qa=c}else k=Qa,Qa=c;Qa===c&&(Qa=k,Ic=ba(),Ic!==c?(ma(),Jc=Ma(),Jc!==c?(ma(),
jb=oa(),jb===c&&(jb=null),ma(),Tb=F(),Tb!==c?(ma(),Kc=Na(),Kc!==c?(pa=Qa,Qa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb]}}):(k=Qa,Qa=c)):(k=Qa,Qa=c)):(k=Qa,Qa=c)):(k=Qa,Qa=c));Oa=Qa;if(Oa===c){var bb=k;var zb=k;if(e.substr(k,8).toLowerCase()===Ke){var id=e.substr(k,8);k+=8}else id=c,0===ha&&a(Le);if(id!==c){var kc=k;ha++;var Me=P();ha--;Me===c?kc=void 0:(k=kc,kc=c);kc!==c?(pa=zb,zb="POSITION"):(k=zb,zb=c)}else k=zb,zb=c;if(zb!==c){ma();
var Ne=Ma();if(Ne!==c){ma();var jd=F();if(jd!==c){ma();var Oe=X();if(Oe!==c){ma();var kd=F();if(kd!==c){ma();var Pe=Na();Pe!==c?(pa=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[jd,kd]}}):(k=bb,bb=c)}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c;Oa=bb;if(Oa===c){var cb=k;var Ab=k;if(e.substr(k,4).toLowerCase()===Qe){var ld=e.substr(k,4);k+=4}else ld=c,0===ha&&a(Re);if(ld!==c){var lc=k;ha++;var Se=P();ha--;Se===c?lc=void 0:(k=lc,lc=c);lc!==
c?(pa=Ab,Ab="CAST"):(k=Ab,Ab=c)}else k=Ab,Ab=c;if(Ab!==c){ma();var Te=Ma();if(Te!==c){ma();var md=F();if(md!==c){ma();var Bb=k;if(e.substr(k,2).toLowerCase()===Ue){var nd=e.substr(k,2);k+=2}else nd=c,0===ha&&a(Ve);if(nd!==c){var mc=k;ha++;var We=P();ha--;We===c?mc=void 0:(k=mc,mc=c);mc!==c?(pa=Bb,Bb="AS"):(k=Bb,Bb=c)}else k=Bb,Bb=c;var Xe=Bb;if(Xe!==c){ma();var Ja=k;var Cb=k;if(e.substr(k,7).toLowerCase()===Ye){var od=e.substr(k,7);k+=7}else od=c,0===ha&&a(Ze);if(od!==c){var nc=k;ha++;var $e=P();
ha--;$e===c?nc=void 0:(k=nc,nc=c);nc!==c?(pa=Cb,Cb="INTEGER"):(k=Cb,Cb=c)}else k=Cb,Cb=c;var Pa=Cb;Pa!==c&&(pa=Ja,Pa={type:"data-type",value:{type:"integer"}});Ja=Pa;if(Ja===c){Ja=k;var Db=k;if(e.substr(k,8).toLowerCase()===af){var pd=e.substr(k,8);k+=8}else pd=c,0===ha&&a(bf);if(pd!==c){var oc=k;ha++;var cf=P();ha--;cf===c?oc=void 0:(k=oc,oc=c);oc!==c?(pa=Db,Db="SMALLINT"):(k=Db,Db=c)}else k=Db,Db=c;Pa=Db;Pa!==c&&(pa=Ja,Pa={type:"data-type",value:{type:"smallint"}});Ja=Pa;if(Ja===c){Ja=k;var Eb=
k;if(e.substr(k,5).toLowerCase()===df){var qd=e.substr(k,5);k+=5}else qd=c,0===ha&&a(ef);if(qd!==c){var pc=k;ha++;var ff=P();ha--;ff===c?pc=void 0:(k=pc,pc=c);pc!==c?(pa=Eb,Eb="FLOAT"):(k=Eb,Eb=c)}else k=Eb,Eb=c;Pa=Eb;Pa!==c&&(pa=Ja,Pa={type:"data-type",value:{type:"float"}});Ja=Pa;if(Ja===c){Ja=k;var Fb=k;if(e.substr(k,4).toLowerCase()===gf){var rd=e.substr(k,4);k+=4}else rd=c,0===ha&&a(hf);if(rd!==c){var qc=k;ha++;var jf=P();ha--;jf===c?qc=void 0:(k=qc,qc=c);qc!==c?(pa=Fb,Fb="REAL"):(k=Fb,Fb=c)}else k=
Fb,Fb=c;Pa=Fb;Pa!==c&&(pa=Ja,Pa={type:"data-type",value:{type:"real"}});Ja=Pa;if(Ja===c&&(Ja=k,Pa=la(),Pa!==c&&(pa=Ja,Pa={type:"data-type",value:{type:"date"}}),Ja=Pa,Ja===c&&(Ja=k,Pa=ea(),Pa!==c&&(pa=Ja,Pa={type:"data-type",value:{type:"timestamp"}}),Ja=Pa,Ja===c&&(Ja=k,Pa=na(),Pa!==c&&(pa=Ja,Pa={type:"data-type",value:{type:"time"}}),Ja=Pa,Ja===c)))){Ja=k;var Gb=k;if(e.substr(k,7).toLowerCase()===kf){var sd=e.substr(k,7);k+=7}else sd=c,0===ha&&a(lf);if(sd!==c){var rc=k;ha++;var mf=P();ha--;mf===
c?rc=void 0:(k=rc,rc=c);rc!==c?(pa=Gb,Gb="VARCHAR"):(k=Gb,Gb=c)}else k=Gb,Gb=c;Pa=Gb;if(Pa!==c){ma();var nf=Ma();if(nf!==c){ma();var td=h();if(td!==c){ma();var of=Na();of!==c?(pa=Ja,Ja={type:"data-type",value:{type:"varchar",size:parseInt(td)}}):(k=Ja,Ja=c)}else k=Ja,Ja=c}else k=Ja,Ja=c}else k=Ja,Ja=c}}}}var ud=Ja;if(ud!==c){ma();var pf=Na();pf!==c?(pa=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[md,ud]}}):(k=cb,cb=c)}else k=cb,cb=c}else k=cb,cb=c}else k=cb,cb=c}else k=cb,
cb=c}else k=cb,cb=c;Oa=cb;if(Oa===c){var kb=k;var db=k;var Ub=z();Ub!==c&&(pa=db);db=Ub;if(db===c)if(db=k,96===e.charCodeAt(k)?(Ub=vd,k++):(Ub=c,0===ha&&a(wd)),Ub!==c){var sc=[];if(xd.test(e.charAt(k))){var lb=e.charAt(k);k++}else lb=c,0===ha&&a(yd);if(lb!==c)for(;lb!==c;)sc.push(lb),xd.test(e.charAt(k))?(lb=e.charAt(k),k++):(lb=c,0===ha&&a(yd));else sc=c;sc!==c?(96===e.charCodeAt(k)?(lb=vd,k++):(lb=c,0===ha&&a(wd)),lb!==c?(pa=db,db=sc.join("")):(k=db,db=c)):(k=db,db=c)}else k=db,db=c;var zd=db;if(zd!==
c){ma();var qf=Ma();if(qf!==c){ma();var tc=q();tc===c&&(tc=null);ma();var rf=Na();rf!==c?(pa=kb,kb={type:"function",name:zd,args:tc?tc:{type:"expression-list",value:[]}}):(k=kb,kb=c)}else k=kb,kb=c}else k=kb,kb=c;Oa=kb;if(Oa===c){var fb;var Va=k;var Lc=Aa();if(Lc!==c){ma();var Vb=F();if(Vb!==c){ma();var Wb=[];for(fb=ya();fb!==c;)Wb.push(fb),fb=ya();fb=ma();var uc=Ka();uc!==c?(pa=Va,Va={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:null}):(k=Va,Va=c)}else k=Va,Va=c}else k=Va,Va=
c;if(Va===c)if(Va=k,Lc=Aa(),Lc!==c)if(ma(),Vb=F(),Vb!==c){ma();Wb=[];for(fb=ya();fb!==c;)Wb.push(fb),fb=ya();fb=ma();uc=Ha();if(uc!==c){ma();var sf=Ka();sf!==c?(pa=Va,Va={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:uc.value}):(k=Va,Va=c)}else k=Va,Va=c}else k=Va,Va=c;else k=Va,Va=c;var Mc=Va;if(Mc===c){var gb;var Xa=k;var Nc=Aa();if(Nc!==c){ma();var Xb=[];for(gb=xa();gb!==c;)Xb.push(gb),gb=xa();gb=ma();var vc=Ka();vc!==c?(pa=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,
else:null}):(k=Xa,Xa=c)}else k=Xa,Xa=c;if(Xa===c)if(Xa=k,Nc=Aa(),Nc!==c){ma();Xb=[];for(gb=xa();gb!==c;)Xb.push(gb),gb=xa();gb=ma();vc=Ha();if(vc!==c){ma();var tf=Ka();tf!==c?(pa=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,else:vc.value}):(k=Xa,Xa=c)}else k=Xa,Xa=c}else k=Xa,Xa=c;Mc=Xa}Oa=Mc;if(Oa===c){var Hb=k;var uf=k;var wc;var Yb=k;var Ad=B();if(Ad!==c){var Bd=[];for(wc=K();wc!==c;)Bd.push(wc),wc=K();pa=Yb;Yb=Ad+Bd.join("")}else k=Yb,Yb=c;var Cd=Yb;Cd!==c&&(pa=uf);var mb=Cd;if(mb!==
c){pa=Hb;var Oc=mb;mb=/^CURRENT_DATE$/i.test(Oc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Oc}}Hb=mb;if(Hb===c){Hb=k;var Ib=k;if(Y()!==c){var xc;var vf=k;var Pc=[];for(xc=T();xc!==c;)Pc.push(xc),xc=T();pa=vf;var wf=Pc=Pc.join("");var xf=Y();xf!==c?(pa=Ib,Ib=wf):(k=Ib,Ib=c)}else k=Ib,Ib=c;mb=Ib;mb!==c&&(pa=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}Oa=Hb;if(Oa===c&&(Oa=
fa(),Oa===c)){Oa=k;var yf=Ma();if(yf!==c){ma();var Qc=F();if(Qc!==c){ma();var zf=Na();zf!==c?(pa=Oa,Qc.paren=!0,Oa=Qc):(k=Oa,Oa=c)}else k=Oa,Oa=c}else k=Oa,Oa=c}}}}}}}}}return Oa}function z(){var D;var O=k;var V=B();if(V!==c){var da=[];for(D=P();D!==c;)da.push(D),D=P();pa=O;O=V+da.join("")}else k=O,O=c;return O}function B(){if(Af.test(e.charAt(k))){var D=e.charAt(k);k++}else D=c,0===ha&&a(Bf);return D}function P(){if(Cf.test(e.charAt(k))){var D=e.charAt(k);k++}else D=c,0===ha&&a(Df);return D}function K(){if(Dd.test(e.charAt(k))){var D=
e.charAt(k);k++}else D=c,0===ha&&a(Ed);return D}function T(){if(Dd.test(e.charAt(k))){var D=e.charAt(k);k++}else D=c,0===ha&&a(Ed);if(D===c)if(D=k,Y()!==c){var O=Y();O!==c?(pa=D,D='"'):(k=D,D=c)}else k=D,D=c;return D}function Y(){if(Ef.test(e.charAt(k))){var D=e.charAt(k);k++}else D=c,0===ha&&a(Ff);return D}function fa(){var D;var O=D=k;if(64===e.charCodeAt(k)){var V=Gf;k++}else V=c,0===ha&&a(Hf);if(V!==c){var da=z();da!==c?O=V=[V,da]:(k=O,O=c)}else k=O,O=c;O!==c&&(pa=D,O={type:"parameter",value:O[1]});
return O}function oa(){var D=k;if(e.substr(k,7).toLowerCase()===If){var O=e.substr(k,7);k+=7}else O=c,0===ha&&a(Jf);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="LEADING"):(k=D,D=c)}else k=D,D=c;D===c&&(D=k,e.substr(k,8).toLowerCase()===Kf?(O=e.substr(k,8),k+=8):(O=c,0===ha&&a(Lf)),O!==c?(O=k,ha++,V=P(),ha--,V===c?O=void 0:(k=O,O=c),O!==c?(pa=D,D="TRAILING"):(k=D,D=c)):(k=D,D=c),D===c&&(D=k,e.substr(k,4).toLowerCase()===Mf?(O=e.substr(k,4),k+=4):(O=c,0===ha&&a(Nf)),O!==
c?(O=k,ha++,V=P(),ha--,V===c?O=void 0:(k=O,O=c),O!==c?(pa=D,D="BOTH"):(k=D,D=c)):(k=D,D=c)));return D}function sa(){var D=k;var O=k;var V=ca();if(V!==c){ma();var da=Ma();if(da!==c)if(ma(),da=ia(),da!==c){ma();var ua=Na();ua!==c?(pa=O,O={type:"interval-period",period:V.value,precision:da,secondary:null}):(k=O,O=c)}else k=O,O=c;else k=O,O=c}else k=O,O=c;O===c&&(O=k,V=ca(),V!==c&&(pa=O,V={type:"interval-period",period:V.value,precision:null,secondary:null}),O=V);if(O!==c)if(ma(),V=k,e.substr(k,2).toLowerCase()===
Of?(da=e.substr(k,2),k+=2):(da=c,0===ha&&a(Pf)),da!==c?(da=k,ha++,ua=P(),ha--,ua===c?da=void 0:(k=da,da=c),da!==c?(pa=V,V="TO"):(k=V,V=c)):(k=V,V=c),V!==c){ma();V=k;da=ca();da!==c&&(pa=V,da={type:"interval-period",period:da.value,precision:null,secondary:null});V=da;if(V===c){V=k;da=Ca();if(da!==c)if(ma(),da=Ma(),da!==c)if(ma(),da=ia(),da!==c)if(ma(),ua=Wa(),ua!==c)if(ma(),ua=ka(),ua!==c){ma();var Ba=Na();Ba!==c?(pa=V,V={type:"interval-period",period:"second",precision:da,secondary:ua}):(k=V,V=c)}else k=
V,V=c;else k=V,V=c;else k=V,V=c;else k=V,V=c;else k=V,V=c;V===c&&(V=k,da=Ca(),da!==c?(ma(),da=Ma(),da!==c?(ma(),da=ia(),da!==c?(ma(),ua=Na(),ua!==c?(pa=V,V={type:"interval-period",period:"second",precision:da,secondary:null}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,da=Ca(),da!==c&&(pa=V,da={type:"interval-period",period:"second",precision:null,secondary:null}),V=da))}V!==c?(pa=D,D={type:"interval-qualifier",start:O,end:V}):(k=D,D=c)}else k=D,D=c;else k=D,D=c;D===c&&(D=k,V=ca(),V!==
c?(ma(),O=Ma(),O!==c?(ma(),O=ka(),O!==c?(ma(),da=Na(),da!==c?(pa=D,D={type:"interval-period",period:V.value,precision:O,secondary:null}):(k=D,D=c)):(k=D,D=c)):(k=D,D=c)):(k=D,D=c),D===c&&(D=k,V=ca(),V!==c&&(pa=D,V={type:"interval-period",period:V.value,precision:null,secondary:null}),D=V,D===c&&(D=k,V=Ca(),V!==c?(ma(),O=Ma(),O!==c?(ma(),O=ia(),O!==c?(ma(),da=Wa(),da!==c?(ma(),V=ka(),V!==c?(ma(),da=Na(),da!==c?(pa=D,D={type:"interval-period",period:"second",precision:O,secondary:V}):(k=D,D=c)):(k=
D,D=c)):(k=D,D=c)):(k=D,D=c)):(k=D,D=c)):(k=D,D=c),D===c&&(D=k,V=Ca(),V!==c?(ma(),O=Ma(),O!==c?(ma(),O=ka(),O!==c?(ma(),da=Na(),da!==c?(pa=D,D={type:"interval-period",period:"second",precision:O,secondary:null}):(k=D,D=c)):(k=D,D=c)):(k=D,D=c)):(k=D,D=c),D===c&&(D=k,V=Ca(),V!==c&&(pa=D,V={type:"interval-period",period:"second",precision:null,secondary:null}),D=V)))));return D}function ca(){var D=k;var O=Ea();O!==c&&(pa=D,O={type:"string",value:"day"});D=O;D===c&&(D=k,O=za(),O!==c&&(pa=D,O={type:"string",
value:"hour"}),D=O,D===c&&(D=k,O=Da(),O!==c&&(pa=D,O={type:"string",value:"minute"}),D=O,D===c&&(D=k,O=va(),O!==c&&(pa=D,O={type:"string",value:"month"}),D=O,D===c&&(D=k,O=ta(),O!==c&&(pa=D,O={type:"string",value:"year"}),D=O))));return D}function ka(){var D=k;var O=h();O!==c&&(pa=D,O=parseFloat(O));return O}function ia(){var D=k;var O=h();O!==c&&(pa=D,O=parseFloat(O));return O}function qa(){var D=ra();D===c&&(D=fa());return D}function ra(){var D=k;if(39===e.charCodeAt(k)){var O=Fd;k++}else O=c,0===
ha&&a(Gd);O===c&&(e.substr(k,2)===Hd?(O=Hd,k+=2):(O=c,0===ha&&a(Qf)));if(O!==c){O=[];var V=k;if(e.substr(k,2)===yc){var da=yc;k+=2}else da=c,0===ha&&a(Id);da!==c&&(pa=V,da="'");V=da;V===c&&(Jd.test(e.charAt(k))?(V=e.charAt(k),k++):(V=c,0===ha&&a(Kd)));for(;V!==c;)O.push(V),V=k,e.substr(k,2)===yc?(da=yc,k+=2):(da=c,0===ha&&a(Id)),da!==c&&(pa=V,da="'"),V=da,V===c&&(Jd.test(e.charAt(k))?(V=e.charAt(k),k++):(V=c,0===ha&&a(Kd)));39===e.charCodeAt(k)?(V=Fd,k++):(V=c,0===ha&&a(Gd));V!==c?(pa=D,D={type:"string",
value:O.join("")}):(k=D,D=c)}else k=D,D=c;return D}function xa(){var D=k;if(Ra()!==c){ma();var O=F();if(O!==c){ma();var V=Ya();V!==c?(ma(),V=F(),V!==c?(pa=D,D={type:"when-clause",operand:O,value:V}):(k=D,D=c)):(k=D,D=c)}else k=D,D=c}else k=D,D=c;return D}function ya(){var D=k;if(Ra()!==c){ma();var O=F();if(O!==c){ma();var V=Ya();V!==c?(ma(),V=F(),V!==c?(pa=D,D={type:"when-clause",operand:O,value:V}):(k=D,D=c)):(k=D,D=c)}else k=D,D=c}else k=D,D=c;return D}function Ha(){var D=k;var O=k;if(e.substr(k,
4).toLowerCase()===Rf){var V=e.substr(k,4);k+=4}else V=c,0===ha&&a(Sf);if(V!==c){V=k;ha++;var da=P();ha--;da===c?V=void 0:(k=V,V=c);V!==c?(pa=O,O="ELSE"):(k=O,O=c)}else k=O,O=c;O!==c?(ma(),O=F(),O!==c?(pa=D,D={type:"else-clause",value:O}):(k=D,D=c)):(k=D,D=c);return D}function Fa(){var D=h();if(D===c){D=k;if(45===e.charCodeAt(k)){var O=Cc;k++}else O=c,0===ha&&a(Dc);O===c&&(43===e.charCodeAt(k)?(O=Ac,k++):(O=c,0===ha&&a(Bc)));if(O!==c){var V=h();V!==c?(pa=D,D=O[0]+V):(k=D,D=c)}else k=D,D=c}return D}
function La(){var D=k;if(46===e.charCodeAt(k)){var O=Tf;k++}else O=c,0===ha&&a(Uf);O!==c?(O=h(),O===c&&(O=null),pa=D,D="."+(null!=O?O:"")):(k=D,D=c);return D}function Ta(){var D;var O=D=k;if(Vf.test(e.charAt(k))){var V=e.charAt(k);k++}else V=c,0===ha&&a(Wf);V!==c?(Xf.test(e.charAt(k))?(V=e.charAt(k),k++):(V=c,0===ha&&a(Yf)),V===c&&(V=null),pa=O,O="e"+(null===V?"":V)):(k=O,O=c);O!==c?(V=h(),V!==c?(pa=D,D=O+V):(k=D,D=c)):(k=D,D=c);return D}function h(){var D=k;var O=[];var V=E();if(V!==c)for(;V!==c;)O.push(V),
V=E();else O=c;O!==c&&(pa=D,O=O.join(""));return O}function E(){if(Zf.test(e.charAt(k))){var D=e.charAt(k);k++}else D=c,0===ha&&a($f);return D}function X(){var D=k;if(e.substr(k,2).toLowerCase()===ag){var O=e.substr(k,2);k+=2}else O=c,0===ha&&a(bg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="IN"):(k=D,D=c)}else k=D,D=c;return D}function aa(){var D=k;if(e.substr(k,2).toLowerCase()===cg){var O=e.substr(k,2);k+=2}else O=c,0===ha&&a(dg);if(O!==c){O=k;ha++;var V=P();ha--;
V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="IS"):(k=D,D=c)}else k=D,D=c;return D}function ja(){var D=k;if(e.substr(k,4).toLowerCase()===eg){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(fg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="LIKE"):(k=D,D=c)}else k=D,D=c;return D}function A(){var D=k;if(e.substr(k,3).toLowerCase()===gg){var O=e.substr(k,3);k+=3}else O=c,0===ha&&a(hg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="NOT"):(k=D,D=c)}else k=D,
D=c;return D}function J(){var D=k;if(e.substr(k,3).toLowerCase()===ig){var O=e.substr(k,3);k+=3}else O=c,0===ha&&a(jg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="AND"):(k=D,D=c)}else k=D,D=c;return D}function M(){var D=k;if(e.substr(k,2).toLowerCase()===kg){var O=e.substr(k,2);k+=2}else O=c,0===ha&&a(lg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="OR"):(k=D,D=c)}else k=D,D=c;return D}function W(){var D=k;if(e.substr(k,7).toLowerCase()===
mg){var O=e.substr(k,7);k+=7}else O=c,0===ha&&a(ng);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="BETWEEN"):(k=D,D=c)}else k=D,D=c;return D}function Z(){var D=k;if(e.substr(k,4).toLowerCase()===og){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(pg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="FROM"):(k=D,D=c)}else k=D,D=c;return D}function ba(){var D=k;if(e.substr(k,4).toLowerCase()===qg){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(rg);if(O!==
c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="TRIM"):(k=D,D=c)}else k=D,D=c;return D}function ea(){var D=k;if(e.substr(k,9).toLowerCase()===sg){var O=e.substr(k,9);k+=9}else O=c,0===ha&&a(tg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="TIMESTAMP"):(k=D,D=c)}else k=D,D=c;return D}function la(){var D=k;if(e.substr(k,4).toLowerCase()===ug){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(vg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==
c?(pa=D,D="DATE"):(k=D,D=c)}else k=D,D=c;return D}function na(){var D=k;if(e.substr(k,4).toLowerCase()===wg){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(xg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="TIME"):(k=D,D=c)}else k=D,D=c;return D}function wa(){var D=k;if(e.substr(k,8).toLowerCase()===yg){var O=e.substr(k,8);k+=8}else O=c,0===ha&&a(zg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="INTERVAL"):(k=D,D=c)}else k=D,D=c;return D}function ta(){var D=
k;if(e.substr(k,4).toLowerCase()===Ag){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(Bg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="YEAR"):(k=D,D=c)}else k=D,D=c;return D}function va(){var D=k;if(e.substr(k,5).toLowerCase()===Cg){var O=e.substr(k,5);k+=5}else O=c,0===ha&&a(Dg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="MONTH"):(k=D,D=c)}else k=D,D=c;return D}function Ea(){var D=k;if(e.substr(k,3).toLowerCase()===Eg){var O=e.substr(k,3);k+=
3}else O=c,0===ha&&a(Fg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="DAY"):(k=D,D=c)}else k=D,D=c;return D}function za(){var D=k;if(e.substr(k,4).toLowerCase()===Gg){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(Hg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="HOUR"):(k=D,D=c)}else k=D,D=c;return D}function Da(){var D=k;if(e.substr(k,6).toLowerCase()===Ig){var O=e.substr(k,6);k+=6}else O=c,0===ha&&a(Jg);if(O!==c){O=k;ha++;var V=P();ha--;V===
c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="MINUTE"):(k=D,D=c)}else k=D,D=c;return D}function Ca(){var D=k;if(e.substr(k,6).toLowerCase()===Kg){var O=e.substr(k,6);k+=6}else O=c,0===ha&&a(Lg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="SECOND"):(k=D,D=c)}else k=D,D=c;return D}function Aa(){var D=k;if(e.substr(k,4).toLowerCase()===Mg){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(Ng);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="CASE"):(k=D,D=c)}else k=
D,D=c;return D}function Ka(){var D=k;if(e.substr(k,3).toLowerCase()===Og){var O=e.substr(k,3);k+=3}else O=c,0===ha&&a(Pg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="END"):(k=D,D=c)}else k=D,D=c;return D}function Ra(){var D=k;if(e.substr(k,4).toLowerCase()===Qg){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(Rg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="WHEN"):(k=D,D=c)}else k=D,D=c;return D}function Ya(){var D=k;if(e.substr(k,4).toLowerCase()===
Sg){var O=e.substr(k,4);k+=4}else O=c,0===ha&&a(Tg);if(O!==c){O=k;ha++;var V=P();ha--;V===c?O=void 0:(k=O,O=c);O!==c?(pa=D,D="THEN"):(k=D,D=c)}else k=D,D=c;return D}function Wa(){if(44===e.charCodeAt(k)){var D=Ug;k++}else D=c,0===ha&&a(Vg);return D}function Ma(){if(40===e.charCodeAt(k)){var D=Wg;k++}else D=c,0===ha&&a(Xg);return D}function Na(){if(41===e.charCodeAt(k)){var D=Yg;k++}else D=c,0===ha&&a(Zg);return D}function ma(){var D;var O=[];for(D=Sa();D!==c;)O.push(D),D=Sa();return O}function Sa(){if($g.test(e.charAt(k))){var D=
e.charAt(k);k++}else D=c,0===ha&&a(ah);return D}function Nb(D,O,V,da){D={type:"binary-expression",operator:D,left:O,right:V};void 0!==da&&(D.escape=da);return D}function nb(D,O){for(var V=0;V<O.length;V++)D=Nb(O[V][1],D,O[V][3]);return D}v=void 0!==v?v:{};var c={},Mb=v.grammarSource,Ld={start:l},Md=l,Nd="!",Sc="\x3d",Uc="\x3e\x3d",Sd="\x3e",Vc="\x3c\x3d",Wc="\x3c\x3e",Wd="\x3c",Xc="!\x3d",Ac="+",Cc="-",Yc="||",$d="*",be="/",Gf="@",Fd="'",Hd="N'",yc="''",Tf=".",ke="null",de="true",ge="false",ag="in",
cg="is",eg="like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",vd="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Dd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Jd=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,xd=/^[^`]/,Od=u("!",!1),Tc=u("\x3d",!1),Rd=u("\x3e\x3d",!1),Td=u("\x3e",!1),Ud=u("\x3c\x3d",!1),Vd=u("\x3c\x3e",!1),Xd=u("\x3c",!1),Yd=u("!\x3d",!1),Bc=u("+",!1),Dc=u("-",!1),Zd=u("||",!1),ae=u("*",!1),ce=u("/",!1),Bf=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ed=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=H(['"'],!1,!1),Hf=u("@",!1),Gd=u("'",!1),Qf=u("N'",!1),Id=u("''",!1),Kd=H(["'"],!0,!1),Uf=u(".",!1),$f=H([["0","9"]],!1,!1),Wf=H(["e","E"],!1,!1),Yf=H(["+","-"],!1,!1),le=u("NULL",!0),ee=u("TRUE",!0),he=u("FALSE",!0),bg=u("IN",!0),dg=u("IS",!0),fg=u("LIKE",!0),Qd=u("ESCAPE",!0),hg=u("NOT",!0),jg=u("AND",!0),lg=u("OR",!0),ng=u("BETWEEN",!0),pg=u("FROM",!0),Fe=u("FOR",!0),Ae=u("SUBSTRING",!0),oe=u("EXTRACT",!0),rg=u("TRIM",!0),Le=u("POSITION",!0),tg=u("TIMESTAMP",!0),vg=u("DATE",!0),xg=u("TIME",
!0),Jf=u("LEADING",!0),Lf=u("TRAILING",!0),Nf=u("BOTH",!0),Re=u("CAST",!0),Ve=u("AS",!0),Ze=u("INTEGER",!0),bf=u("SMALLINT",!0),ef=u("FLOAT",!0),hf=u("REAL",!0),lf=u("VARCHAR",!0),Pf=u("TO",!0),zg=u("INTERVAL",!0),Bg=u("YEAR",!0),se=u("TIMEZONE_HOUR",!0),ve=u("TIMEZONE_MINUTE",!0),Dg=u("MONTH",!0),Fg=u("DAY",!0),Hg=u("HOUR",!0),Jg=u("MINUTE",!0),Lg=u("SECOND",!0),Ng=u("CASE",!0),Pg=u("END",!0),Rg=u("WHEN",!0),Tg=u("THEN",!0),Sf=u("ELSE",!0),Vg=u(",",!1),Xg=u("(",!1),Zg=u(")",!1),ah=H([" ","\t","\n",
"\r"],!1,!1),wd=u("`",!1),yd=H(["`"],!0,!1),k=0,pa=0,Zb=[{line:1,column:1}],eb=0,zc=[],ha=0;if("startRule"in v){if(!(v.startRule in Ld))throw Error("Can't start parsing from rule \""+v.startRule+'".');Md=Ld[v.startRule]}var Rc=Md();if(Rc!==c&&k===e.length)return Rc;Rc!==c&&k<e.length&&a({type:"end"});throw function(D,O,V){return new g(g.buildMessage(D,O),D,O,V)}(zc,eb<e.length?e.charAt(eb):null,eb<e.length?p(eb,eb+1):p(eb,eb));}}})})(w);var r=w.exports;class G{static parse(y){return r.parse(y)}}b.WhereGrammar=
G;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(b,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});b.kebabDict=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(b){b.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H){function t(q,F,N,d){const I=d.x-N.x;d=d.y-N.y;F=Math.min(1,Math.max(0,((F.x-N.x)*I+(F.y-N.y)*d)/(I*I+d*d)));q.x=N.x+I*F;q.y=N.y+d*F}function p(q,F){return q?F?4:3:F?3:2}class a{constructor(q,F,N){this.items=q;this.query=F;this.geometryType=N.geometryType;this.hasM=N.hasM;this.hasZ=N.hasZ;this.fieldsIndex=N.fieldsIndex;this.objectIdField=N.objectIdField;this.spatialReference=N.spatialReference;this.featureAdapter=N.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const q=
new n(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return q.countDistinctValues(this.items);const {groupByFieldsForStatistics:F,having:N,outStatistics:d}=this.query;if(!F?.length)return 1;const I=new Map,R=new Map,L=new Set;for(const Q of d){var {statisticType:U}=Q;U="exceedslimit"!==U?Q.onStatisticField:void 0;if(!R.has(U)){var S=[];for(const m of F){const C=this._getAttributeValues(q,m,I);S.push(C)}R.set(U,this._calculateUniqueValues(S,q.returnDistinctValues))}U=
R.get(U);for(const m in U){const {data:C,items:z}=U[m];S=C.join(",");N&&!q.validateItems(z,N)||L.add(S)}}return L.size}async createQueryResponse(){let q;q=this.query.outStatistics?this.query.outStatistics.some(F=>"exceedslimit"===F.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const F=this.query.geometry;g.isValid(this.query.outSR)&&!g.equals(F.spatialReference,
this.query.outSR)?q.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...v.project(F,F.spatialReference,this.query.outSR)}):q.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...F})}return q}createSnappingResponse(q,F){const N=this.featureAdapter,d=p(this.hasZ,this.hasM),{point:I,mode:R}=q,L="number"===typeof q.distance?q.distance:q.distance.x,U="number"===typeof q.distance?q.distance:q.distance.y,S={candidates:[]},Q="esriGeometryPolygon"===this.geometryType;
F=this._getPointCreator(R,this.spatialReference,F);const m=new l(null,0),C=new l(null,0),z={x:0,y:0,z:0};for(const oa of this.items){var B=N.getGeometry(oa);if(null==B)continue;const {coords:sa,lengths:ca}=B;m.coords=sa;C.coords=sa;if(q.returnEdge){B=0;for(var P=0;P<ca.length;P++){var K=ca[P];for(var T=0;T<K;T++,B+=d){var Y=m;Y.coordsIndex=B;if(T!==K-1){const ka=C;ka.coordsIndex=B+d;const ia=z;t(z,I,Y,ka);var fa=(I.x-ia.x)/L;const qa=(I.y-ia.y)/U;fa=fa*fa+qa*qa;1>=fa&&S.candidates.push(x.makeEdgeCandidate(N.getObjectId(oa),
F(ia),Math.sqrt(fa),F(Y),F(ka)))}}}}if("none"!==q.vertexMode)if(B=Q?sa.length-d:sa.length,"all"===q.vertexMode)for(P=0;P<B;P+=d)K=m,K.coordsIndex=P,T=(I.x-K.x)/L,Y=(I.y-K.y)/U,T=T*T+Y*Y,1>=T&&S.candidates.push(x.makeVertexCandidate(N.getObjectId(oa),F(K),Math.sqrt(T)));else if("ends"===q.vertexMode){B=[0];Q||B.push(sa.length-d);for(const ka of B)B=m,B.coordsIndex=ka,P=(I.x-B.x)/L,K=(I.y-B.y)/U,P=P*P+K*K,1>=P&&S.candidates.push(x.makeVertexCandidate(N.getObjectId(oa),F(B),Math.sqrt(P)))}}S.candidates.sort((oa,
sa)=>oa.distance-sa.distance);return S}_getPointCreator(q,F,N){const d=null==N||g.equals(F,N)?R=>R:R=>v.project(R,F,N),{hasZ:I}=this;return"3d"===q?I?({x:R,y:L,z:U})=>d({x:R,y:L,z:U}):({x:R,y:L})=>d({x:R,y:L,z:0}):({x:R,y:L})=>d({x:R,y:L})}async createSummaryStatisticsResponse(q){const {field:F,valueExpression:N,normalizationField:d,normalizationType:I,normalizationTotal:R,minValue:L,maxValue:U,scale:S,timeZone:Q}=q;var m=this.fieldsIndex.get(F);q=u.isDateField(m)||u.isDateOnlyField(m)||u.isTimestampOffsetField(m);
const C=await this._getDataValues({field:F,valueExpression:N,normalizationField:d,normalizationType:I,normalizationTotal:R,scale:S,timeZone:Q}),z=H.isNullCountSupported({normalizationType:I,normalizationField:d,minValue:L,maxValue:U}),B={value:.5,fieldType:m?.type};m=u.isStringField(m)?H.calculateStringStatistics({values:C,supportsNullCount:z,percentileParams:B}):H.calculateStatistics({values:C,minValue:L,maxValue:U,useSampleStdDev:!I,supportsNullCount:z,percentileParams:B});return H.processSummaryStatisticsResult(m,
q)}async createUniqueValuesResponse(q){const {field:F,valueExpression:N,domains:d,returnAllCodedValues:I,scale:R,timeZone:L}=q;var U=await this._getDataValues({field:F,field2:q.field2,field3:q.field3,fieldDelimiter:q.fieldDelimiter,valueExpression:N,scale:R,timeZone:L},!1);U=H.calculateUniqueValuesCount(U);return H.createUVResult(U,d,I,q.fieldDelimiter)}async createClassBreaksResponse(q){const {field:F,valueExpression:N,normalizationField:d,normalizationType:I,normalizationTotal:R,classificationMethod:L,
standardDeviationInterval:U,minValue:S,maxValue:Q,numClasses:m,scale:C,timeZone:z}=q;q=await this._getDataValues({field:F,valueExpression:N,normalizationField:d,normalizationType:I,normalizationTotal:R,scale:C,timeZone:z});q=H.calculateClassBreaks(q,{field:F,normalizationField:d,normalizationType:I,normalizationTotal:R,classificationMethod:L,standardDeviationInterval:U,minValue:S,maxValue:Q,numClasses:m});return H.resolveCBResult(q,L)}async createHistogramResponse(q){const {field:F,valueExpression:N,
normalizationField:d,normalizationType:I,normalizationTotal:R,classificationMethod:L,standardDeviationInterval:U,minValue:S,maxValue:Q,numBins:m,scale:C,timeZone:z}=q;q=await this._getDataValues({field:F,valueExpression:N,normalizationField:d,normalizationType:I,normalizationTotal:R,scale:C,timeZone:z});return H.calculateHistogram(q,{field:F,normalizationField:d,normalizationType:I,normalizationTotal:R,classificationMethod:L,standardDeviationInterval:U,minValue:S,maxValue:Q,numBins:m})}_sortFeatures(q,
F,N){if(1<q.length&&F?.length)for(const d of F.reverse()){F=d.split(" ");const I=F[0],R=this.fieldsIndex.get(I);F=F[1]?"desc"===F[1].toLowerCase():!1;const L=H.getAttributeComparator(R?.type,F);q.sort((U,S)=>{U=N(U,I,R);S=N(S,I,R);return L(U,S)})}}_createFeatureQueryResponse(q){const F=this.items,{geometryType:N,hasM:d,hasZ:I,objectIdField:R,spatialReference:L}=this,{outFields:U,outSR:S,quantizationParameters:Q,resultRecordCount:m,resultOffset:C,returnZ:z,returnM:B}=q,P=null!=m?F.length>(C||0)+m:
!1,K=U&&(U.includes("*")?[...this.fieldsIndex.fields]:U.map(T=>this.fieldsIndex.get(T)));return{exceededTransferLimit:P,features:this._createFeatures(q,F),fields:K,geometryType:N,hasM:d&&B,hasZ:I&&z,objectIdFieldName:R,spatialReference:e.cleanFromGeometryEngine(S||L),transform:Q&&y.toQuantizationTransform(Q)||null}}_createFeatures(q,F){const N=new n(q,this.featureAdapter,this.fieldsIndex),{hasM:d,hasZ:I}=this,{orderByFields:R,quantizationParameters:L,returnGeometry:U,returnCentroid:S,maxAllowableOffset:Q,
resultOffset:m,resultRecordCount:C,returnZ:z=!1,returnM:B=!1}=q,P=I&&z,K=d&&B;q=[];var T=0;const Y=[...F];this._sortFeatures(Y,R,(ka,ia,qa)=>N.getFieldValue(ka,ia,qa));if(this.geometryType&&(U||S)){var fa=y.toQuantizationTransform(L)??void 0;F="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(U&&!S)for(var oa of Y){var sa=this.featureAdapter.getGeometry(oa),ca={attributes:N.getAttributes(oa),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,sa,Q,fa,
P,K)};F&&sa&&!ca.geometry&&(ca.centroid=e.transformCentroid(this,this.featureAdapter.getCentroid(oa,this),fa));q[T++]=ca}else if(!U&&S)for(sa of Y)q[T++]={attributes:N.getAttributes(sa),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(sa,this),fa)};else for(ca of Y)q[T++]={attributes:N.getAttributes(ca),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(ca,this),fa),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ca),Q,fa,
P,K)}}else for(fa of Y)(oa=N.getAttributes(fa))&&(q[T++]={attributes:oa});T=m||0;null!=C&&(q=q.slice(T,Math.min(q.length,T+C)));return q}_createExceedsLimitQueryResponse(q){var F=!1;let N=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY;F=Number.POSITIVE_INFINITY;for(const I of q.outStatistics??[])if("exceedslimit"===I.statisticType){N=null!=I.maxPointCount?I.maxPointCount:Number.POSITIVE_INFINITY;d=null!=I.maxRecordCount?I.maxRecordCount:Number.POSITIVE_INFINITY;F=null!=I.maxVertexCount?I.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)F=this.items.length>N;else if(this.items.length>d)F=!0;else{q=p(this.hasZ,this.hasM);const I=this.featureAdapter;F=this.items.reduce((R,L)=>{L=I.getGeometry(L);return R+(null!=L&&L.coords.length||0)},0)/q>F}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(F)}}]}}async _createStatisticsQueryResponse(q){var F=
{attributes:{}};const N=[],d=new Map,I=new Map,R=new Map,L=new Map,U=new n(q,this.featureAdapter,this.fieldsIndex);var S=q.outStatistics;const {groupByFieldsForStatistics:Q,having:m,orderByFields:C,resultRecordCount:z}=q;q=Q?.length;const B=!!q,P=B?Q[0]:null,K=B&&!this.fieldsIndex.get(P);for(const sa of S??[]){const {outStatisticFieldName:ca,statisticType:ka}=sa;S=sa;const ia="exceedslimit"!==ka?sa.onStatisticField:void 0,qa="percentile_disc"===ka||"percentile_cont"===ka;var T="EnvelopeAggregate"===
ka||"CentroidAggregate"===ka||"ConvexHullAggregate"===ka;const ra=B&&1===q&&(ia===P||K)&&"count"===ka;if(B){if(!R.has(ia)){var Y=[];for(const xa of Q){var fa=this._getAttributeValues(U,xa,d);Y.push(fa)}R.set(ia,this._calculateUniqueValues(Y,T?!1:U.returnDistinctValues))}Y=R.get(ia);if(!Y)continue;fa=Object.keys(Y);for(const xa of fa){const {count:ya,data:Ha,items:Fa,itemPositions:La}=Y[xa];fa=Ha.join(",");if(!m||U.validateItems(Fa,m)){const Ta=L.get(fa)||{attributes:{}};if(T){Ta.aggregateGeometries||
(Ta.aggregateGeometries={});const {aggregateGeometries:E,outStatisticFieldName:X}=await this._getAggregateGeometry(S,Fa);Ta.aggregateGeometries[X]=E}else{var oa=null;if(ra)oa=ya;else{const E=this._getAttributeValues(U,ia,d);oa=La.map(X=>E[X]);oa=qa&&"statisticParameters"in S?this._getPercentileValue(S,oa):this._getStatisticValue(S,oa,null,U.returnDistinctValues)}Ta.attributes[ca]=oa}let h=0;Q.forEach((E,X)=>Ta.attributes[this.fieldsIndex.get(E)?E:`EXPR_${++h}`]=Ha[X]);L.set(fa,Ta)}}}else if(T){F.aggregateGeometries||
(F.aggregateGeometries={});const {aggregateGeometries:xa,outStatisticFieldName:ya}=await this._getAggregateGeometry(S,this.items);F.aggregateGeometries[ya]=xa}else T=this._getAttributeValues(U,ia,d),F.attributes[ca]=qa&&"statisticParameters"in S?this._getPercentileValue(S,T):this._getStatisticValue(S,T,I,U.returnDistinctValues);S="min"!==ka&&"max"!==ka||!u.isStringField(this.fieldsIndex.get(ia))&&!this._isAnyDateField(ia)?null:this.fieldsIndex.get(ia)?.type;N.push({name:ca,alias:ca,type:S||"esriFieldTypeDouble"})}F=
B?Array.from(L.values()):[F];this._sortFeatures(F,C,(sa,ca)=>sa.attributes[ca]);z&&(F.length=Math.min(z,F.length));return{fields:N,features:F}}_isAnyDateField(q){q=this.fieldsIndex.get(q);return u.isDateField(q)||u.isDateOnlyField(q)||u.isTimestampOffsetField(q)||u.isTimeOnlyField(q)}async _getAggregateGeometry(q,F){const {convexHull:N,union:d}=await new Promise((z,B)=>b(["../../../geometry/geometryEngineJSON"],z,B)),{statisticType:I,outStatisticFieldName:R}=q,{featureAdapter:L,spatialReference:U,
geometryType:S,hasZ:Q,hasM:m}=this;F=F.map(z=>e.getGeometry(S,Q,m,L.getGeometry(z)));const C=N(U,F,!0)[0];q={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===I?(F=C?G.getPolygonExtent(C):G.getGeometryExtent(d(U,F)),q.aggregateGeometries={...F,spatialReference:U},q.outStatisticFieldName=R||"extent"):"CentroidAggregate"===I?(F=C?r.polygonCentroid(C):r.extentCentroid(G.getGeometryExtent(d(U,F))),q.aggregateGeometries={x:F[0],y:F[1],spatialReference:U},q.outStatisticFieldName=
R||"centroid"):"ConvexHullAggregate"===I&&(q.aggregateGeometries=C,q.outStatisticFieldName=R||"convexHull");return q}_getStatisticValue(q,F,N,d){const {onStatisticField:I,statisticType:R}=q;q=null;q=N?.has(I)?N.get(I):u.isStringField(this.fieldsIndex.get(I))||this._isAnyDateField(I)?H.calculateStringStatistics({values:F,returnDistinct:d}):H.calculateStatistics({values:d?[...(new Set(F))]:F,minValue:null,maxValue:null,useSampleStdDev:!0});N&&N.set(I,q);return q["var"===R?"variance":R]}_getPercentileValue(q,
F){const {onStatisticField:N,statisticParameters:d,statisticType:I}=q,{value:R,orderBy:L}=d;q=this.fieldsIndex.get(N);return H.calculatePercentile(F,{value:R,orderBy:L,fieldType:q?.type,isDiscrete:"percentile_disc"===I})}_getAttributeValues(q,F,N){if(N.has(F))return N.get(F);const d=this.fieldsIndex.get(F),I=this.items.map(R=>q.getFieldValue(R,F,d));N.set(F,I);return I}_calculateUniqueValues(q,F){const N={},d=this.items,I=d.length;for(let R=0;R<I;R++){const L=d[R],U=[];for(const Q of q)U.push(Q[R]);
const S=U.join(",");null==N[S]?N[S]={count:1,data:U,items:[L],itemPositions:[R]}:(F||N[S].count++,N[S].items.push(L),N[S].itemPositions.push(R))}return N}async _getDataValues(q,F=!0){const N=new n(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:d,scale:I,timeZone:R}=q;return d?N.getExpressionValues(this.items,d,{viewingMode:"map",scale:I,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},R):N.getDataValues(this.items,
w.clone(q),F)}}class l{constructor(q,F){this.coords=q;this.coordsIndex=F}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}f.QueryEngineResult=a;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(b,f){function w({scale:S,translate:Q},m){return Math.round((m-Q[0])/S[0])}function r({scale:S,translate:Q},
m){return Math.round((Q[1]-m)/S[1])}function G(S,Q,m){const C=[];let z,B,P,K;for(let T=0;T<m.length;T++){const Y=m[T];if(0<T){if(P=w(S,Y[0]),K=r(S,Y[1]),P!==z||K!==B)C.push(Q(Y,P-z,K-B)),z=P,B=K}else z=w(S,Y[0]),B=r(S,Y[1]),C.push(Q(Y,z,B))}return 0<C.length?C:null}function y(S,Q,m,C){return G(S,m?C?U:L:C?L:R,Q)}function g(S,Q,m,C){const z=[];m=m?C?U:L:C?L:R;for(C=0;C<Q.length;C++){const B=G(S,m,Q[C]);B&&3<=B.length&&z.push(B)}return z.length?z:null}function n(S,Q,m,C){const z=[];m=m?C?U:L:C?L:R;
for(C=0;C<Q.length;C++){const B=G(S,m,Q[C]);B&&2<=B.length&&z.push(B)}return z.length?z:null}function e({scale:S,translate:Q},m){return m*S[0]+Q[0]}function v({scale:S,translate:Q},m){return Q[1]-m*S[1]}function x(S,Q,m){const C=Array(m.length);if(!m.length)return C;const [z,B]=S.scale;let P=e(S,m[0][0]);S=v(S,m[0][1]);C[0]=Q(m[0],P,S);for(let K=1;K<m.length;K++){const T=m[K];P+=T[0]*z;S-=T[1]*B;C[K]=Q(T,P,S)}return C}function u(S,Q,m){const C=Array(m.length);for(let z=0;z<m.length;z++)C[z]=x(S,Q,
m[z]);return C}function H(S,Q,m,C){return x(S,m?C?U:L:C?L:R,Q)}function t(S,Q,m,C){return u(S,m?C?U:L:C?L:R,Q)}function p(S,Q,m,C){return u(S,m?C?U:L:C?L:R,Q)}function a(S,Q,m){let [C,z]=m[0],B=Math.min(C,Q[0]),P=Math.min(z,Q[1]),K=Math.max(C,Q[2]);Q=Math.max(z,Q[3]);for(let T=1;T<m.length;T++){const [Y,fa]=m[T];C+=Y;z+=fa;0>Y&&(B=Math.min(B,C));0<Y&&(K=Math.max(K,C));0>fa?P=Math.min(P,z):0<fa&&(Q=Math.max(Q,z))}S[0]=B;S[1]=P;S[2]=K;S[3]=Q;return S}function l(S,Q){if(!Q.length)return null;S[0]=S[1]=
Number.POSITIVE_INFINITY;S[2]=S[3]=Number.NEGATIVE_INFINITY;for(let m=0;m<Q.length;m++)a(S,S,Q[m]);return S}function q(S,Q,m,C,z){Q.xmin=w(S,m.xmin);Q.ymin=r(S,m.ymin);Q.xmax=w(S,m.xmax);Q.ymax=r(S,m.ymax);Q!==m&&(C&&(Q.zmin=m.zmin,Q.zmax=m.zmax),z&&(Q.mmin=m.mmin,Q.mmax=m.mmax));return Q}function F(S,Q,m,C,z){Q.points=y(S,m.points,C,z)??[];return Q}function N(S,Q,m,C,z){Q.x=w(S,m.x);Q.y=r(S,m.y);Q!==m&&(C&&(Q.z=m.z),z&&(Q.m=m.m));return Q}function d(S,Q,m,C,z){S=g(S,m.rings,C,z);if(!S)return null;
Q.rings=S;return Q}function I(S,Q,m,C,z){S=n(S,m.paths,C,z);if(!S)return null;Q.paths=S;return Q}const R=(S,Q,m)=>[Q,m],L=(S,Q,m)=>[Q,m,S[2]],U=(S,Q,m)=>[Q,m,S[2],S[3]];b.equals=function(S,Q){if(S===Q||null==S&&null==Q)return!0;if(null==S||null==Q)return!1;let m,C,z,B;S&&"upperLeft"===S.originPosition?(m=S.translate[0],C=S.translate[1],S=S.scale[0]):(m=null!=S.extent?S.extent.xmin:0,C=null!=S.extent?S.extent.ymax:0,S=S.tolerance);Q&&"upperLeft"===Q.originPosition?(z=Q.translate[0],B=Q.translate[1],
Q=Q.scale[0]):(z=null!=Q.extent?Q.extent.xmin:0,B=null!=Q.extent?Q.extent.ymax:0,Q=Q.tolerance);return m===z&&C===B&&S===Q};b.getQuantizedBoundsCoordsArray=a;b.getQuantizedBoundsCoordsArrayArray=l;b.getQuantizedBoundsPaths=function(S){return l([0,0,0,0],S)};b.getQuantizedBoundsPoints=function(S){const Q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(Q,Q,S)};b.getQuantizedBoundsRings=function(S){return l([0,0,0,0],S)};b.quantizeBounds=
function(S,Q,m){Q[0]=w(S,m[0]);Q[3]=r(S,m[1]);Q[2]=w(S,m[2]);Q[1]=r(S,m[3]);return Q};b.quantizeExtent=q;b.quantizeGeometry=function(S,Q){return S&&Q?f.isPoint(Q)?N(S,{},Q,!1,!1):f.isPolyline(Q)?I(S,{},Q,!1,!1):f.isPolygon(Q)?d(S,{},Q,!1,!1):f.isMultipoint(Q)?F(S,{},Q,!1,!1):f.isExtent(Q)?q(S,{},Q,!1,!1):null:null};b.quantizeMultipoint=F;b.quantizePaths=n;b.quantizePoint=N;b.quantizePoints=y;b.quantizePolygon=d;b.quantizePolyline=I;b.quantizeRings=g;b.quantizeX=w;b.quantizeY=r;b.toQuantizationTransform=
function(S){return S?{originPosition:"upper-left"===S.originPosition?"upperLeft":"lower-left"===S.originPosition?"lowerLeft":S.originPosition,scale:S.tolerance?[S.tolerance,S.tolerance]:[1,1],translate:null!=S.extent?[S.extent.xmin,S.extent.ymax]:[0,0]}:null};b.unquantizeBounds=function(S,Q,m){return m?(Q[0]=e(S,m[0]),Q[1]=v(S,m[3]),Q[2]=e(S,m[2]),Q[3]=v(S,m[1]),Q):[e(S,Q[0]),v(S,Q[3]),e(S,Q[2]),v(S,Q[1])]};b.unquantizeCoordsArray=x;b.unquantizeCoordsArrayArray=u;b.unquantizeExtent=function(S,Q,m,
C,z){Q.xmin=e(S,m.xmin);Q.ymin=v(S,m.ymin);Q.xmax=e(S,m.xmax);Q.ymax=v(S,m.ymax);Q!==m&&(C&&(Q.zmin=m.zmin,Q.zmax=m.zmax),z&&(Q.mmin=m.mmin,Q.mmax=m.mmax));return Q};b.unquantizeMultipoint=function(S,Q,m,C,z){null!=m&&(Q.points=H(S,m.points,C,z));return Q};b.unquantizePaths=t;b.unquantizePoint=function(S,Q,m,C,z){if(null==m)return Q;Q.x=e(S,m.x);Q.y=v(S,m.y);Q!==m&&(C&&(Q.z=m.z),z&&(Q.m=m.m));return Q};b.unquantizePoints=H;b.unquantizePolygon=function(S,Q,m,C,z){null!=m&&(Q.rings=p(S,m.rings,C,z));
return Q};b.unquantizePolyline=function(S,Q,m,C,z){null!=m&&(Q.paths=t(S,m.paths,C,z));return Q};b.unquantizeRings=p;b.unquantizeX=e;b.unquantizeY=v;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),function(b,f,w,r,G,y){class g{constructor(n,e,
v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=n.returnDistinctValues??!1;this.fieldsIndex=v;this.featureAdapter=e;if((e=n.outFields)&&!e.includes("*")){this.outFields=e;n=0;for(const u of e){var x=b.getExpressionFromFieldName(u);x=(e=this.fieldsIndex.get(x))?null:b.getWhereClause(x,v);e=e?e.name:b.getAliasFromFieldName(u)||`FIELD_EXP_${n++}`;this._fieldDataCache.set(u,{alias:e,clause:x})}}}countDistinctValues(n){if(!this.returnDistinctValues)return n.length;
n.forEach(e=>this.getAttributes(e));return this._returnDistinctMap.size}getAttributes(n){n=this._processAttributesForOutFields(n);return this._processAttributesForDistinctValues(n)}getFieldValue(n,e,v){const x=v?v.name:e;let u=null;this._fieldDataCache.has(x)?u=this._fieldDataCache.get(x)?.clause:v||(u=b.getWhereClause(e,this.fieldsIndex),this._fieldDataCache.set(x,{alias:x,clause:u}));return v?this.featureAdapter.getAttribute(n,x):u?.calculateValue(n,this.featureAdapter)}getDataValues(n,e,v=!0){const x=
e.normalizationType,u=e.normalizationTotal,H=this.fieldsIndex.get(e.field),t=w.isDateOnlyField(H)||w.isTimestampOffsetField(H),p=w.isTimeOnlyField(H);return n.map(a=>{let l=e.field&&this.getFieldValue(a,e.field,this.fieldsIndex.get(e.field));e.field2?(l=`${G.processNullValue(l)}${e.fieldDelimiter}${G.processNullValue(this.getFieldValue(a,e.field2,this.fieldsIndex.get(e.field2)))}`,e.field3&&(l=`${l}${e.fieldDelimiter}${G.processNullValue(this.getFieldValue(a,e.field3,this.fieldsIndex.get(e.field3)))}`)):
"string"===typeof l&&v&&(t?l=l?(new Date(l)).getTime():null:p&&(l=l?r.timeOnlyToMilliseconds(l):null));x&&Number.isFinite(l)&&(a="field"===x&&e.normalizationField?this.getFieldValue(a,e.normalizationField,this.fieldsIndex.get(e.normalizationField)):null,l=G.getNormalizedValue(l,x,a,u));return l})}async getExpressionValues(n,e,v,x,u){const {arcadeUtils:H}=await y.loadArcade(),t=H.hasGeometryOperations(e);t&&await H.enableGeometryOperations();const p=H.createFunction(e),a=H.getViewInfo(v),l={fields:this.fieldsIndex.fields};
return n.map(q=>{q={attributes:this.featureAdapter.getAttributes(q),layer:l,geometry:t?{...f.getGeometry(x.geometryType,x.hasZ,x.hasM,this.featureAdapter.getGeometry(q)),spatialReference:v?.spatialReference}:null};q=H.createExecContext(q,a,u);return H.executeFunction(p,q)})}validateItem(n,e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:b.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e)?.clause?.testFeature(n,this.featureAdapter)??!1}validateItems(n,
e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:b.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e)?.clause?.testSet(n,this.featureAdapter)??!1}_processAttributesForOutFields(n){const e=this.outFields;if(!e?.length)return this.featureAdapter.getAttributes(n);const v={};for(const x of e){const {alias:u,clause:H}=this._fieldDataCache.get(x);v[u]=H?H.calculateValue(n,this.featureAdapter):this.featureAdapter.getAttribute(n,u)}return v}_processAttributesForDistinctValues(n){if(null==
n||!this.returnDistinctValues)return n;var e=this.outFields,v=[];if(e)for(const u of e){var {alias:x}=this._fieldDataCache.get(u);v.push(n[x])}else for(x in n)v.push(n[x]);e=`${(e||["*"]).join(",")}=${v.join(",")}`;v=this._returnDistinctMap.get(e)||0;this._returnDistinctMap.set(e,++v);return 1<v?null:n}}return g})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H,t){function p(d){d=N.exec(d);if(!d)return null;const {hh:I,mm:R,ss:L,ms:U}=d.groups;return Number(I)*G.millisecondsPerTimeUnit.hours+Number(R)*G.millisecondsPerTimeUnit.minutes+Number(L)*G.millisecondsPerTimeUnit.seconds+Number(U||0)}function a(d,I){d=null!=d?d:"";null!=I&&I&&(d=d?"("+d+") AND ("+I+")":I);return d}function l(d){const I=d.layer;return d.fields.filter(R=>!I.getField(R))}function q(d){const I=d.layer;return d.fields.filter(R=>{R=I.getFieldUsageInfo(R);
return!R||!R.supportsStatistics})}let F=null;const N=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;b.calculateHeatmapStats=function(d,I=18,R,L,U){const S=new Float64Array(L*U);I=Math.round(r.pt2px(I));let Q=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;R=v.createValueFunction(R);for(const {geometry:B,attributes:P}of d){const {x:K,y:T}=B;d=Math.max(0,K-I);var C=Math.max(0,T-I);const Y=Math.min(U,T+I),fa=Math.min(L,K+I),oa=+R(P);for(;C<Y;C++)for(let sa=
d;sa<fa;sa++){var z=C*L+sa;const ca=v.evaluateDensityKernel(sa-K,C-T,I)*oa;z=S[z]+=ca;Q=Math.min(Q,z);m=Math.max(m,z)}}return{min:Q,max:m}};b.getDataValues=async function(d,I,R=!0){if(!I)return[];const {field:L,field2:U,field3:S,fieldDelimiter:Q,fieldInfos:m,timeZone:C}=d;var z=L&&m?.find(ia=>ia.name.toLowerCase()===L.toLowerCase());const B=z?e.isTimeOnlyField(z):!1,P=z?x.isAnyDateField(z):!1,K=d.valueExpression,T=d.normalizationType,Y=d.normalizationField,fa=d.normalizationTotal,oa=[];z=d.viewInfoParams;
let sa=null,ca=null;if(K){if(!F){const {arcadeUtils:ia}=await H.loadArcade();F=ia}F.hasGeometryOperations(K)&&await F.enableGeometryOperations();sa=F.createFunction(K);ca=z?F.getViewInfo({viewingMode:z.viewingMode,scale:z.scale,spatialReference:new y(z.spatialReference)}):null}d=d.fieldInfos;const ka=I[0]&&"declaredClass"in I[0]&&"esri.Graphic"===I[0].declaredClass||!d?null:{fields:d};I.forEach(ia=>{var qa=ia.attributes;if(K){var ra=F.createExecContext(ka?{...ia,layer:ka}:ia,ca,C);ra=F.executeFunction(sa,
ra)}else qa&&(ra=qa[L],U?(ra=`${u.processNullValue(ra)}${Q}${u.processNullValue(qa[U])}`,S&&(ra=`${ra}${Q}${u.processNullValue(qa[S])}`)):"string"===typeof ra&&R&&(P?ra=ra?(new Date(ra)).getTime():null:B&&(ra=ra?p(ra):null)));T&&"number"===typeof ra&&isFinite(ra)&&(qa=qa&&parseFloat(qa[Y]),ra=u.getNormalizedValue(ra,T,qa,fa));oa.push(ra)});return oa};b.getRangeExpr=function(d,I,R){I=null!=I?d+" \x3e\x3d "+I:"";d=null!=R?d+" \x3c\x3d "+R:"";R="";return(R=I&&d?a(I,d):I||d)?"("+R+")":""};b.getSQLFilterForNormalization=
function(d){const I=d.field,R=d.normalizationType;d=d.normalizationField;let L;if("field"===R)L="(NOT "+d+" \x3d 0)";else if("log"===R||"natural-log"===R||"square-root"===R)L=`(${I} > 0)`;return L};b.getSumOfAttributesExpr=function(d,I,R){const L=[],U=[],S=[],Q=[],m=[];d.forEach((B,P)=>{const K=B.field?"field":"expression",T=B.field||B.valueExpression;B.field?(m.push(T),U.push(`var ${K}${P} = Number($feature["${T}"]);`)):(L.push(`function getValueForExpr${P}() {\n  ${T} \n}`),U.push(`var ${K}${P} = Number(getValueForExpr${P}());`));
R||S.push(`${K}${P} = IIf(${K}${P} < 0, 0, ${K}${P});`);Q.push(`${K}${P}`)});d="return sum;";const C=L.length?null:m.reduce((B,P)=>`${B} + ${P}`);let z=null;I||R?I?R||(d="return IIf(sum \x3e\x3d 0, sum, null);",C&&(z=`(( ${C} ) >= 0)`)):(d="return IIf(sum !\x3d 0, sum, null);",C&&(z=`(( ${C} ) <> 0)`)):(d="return IIf(sum \x3e 0, sum, null);",C&&(z=`(( ${C} ) > 0)`));return{valueExpression:[L.length?L.join("\n"):"",U.join("\n"),S.join("\n"),`var sum = ${Q.join(" + ")};`,d].filter(Boolean).join("\n\n"),
sqlExpression:C,sqlWhere:z}};b.mergeWhereClauses=a;b.quantizeFeatures=function(d,I,R,L){const U=n.isWrappable(R)?n.getInfo(R):null,S=U?Math.round((U.valid[1]-U.valid[0])/I.scale[0]):null;return d.map(Q=>{const m=new t(Q.geometry);g.quantizePoint(I,m,m,m.hasZ,m.hasM);if(U){var C=S??0,z=L[0];0>m.x?m.x+=C:m.x>z&&(m.x-=C)}Q.geometry=m;return Q})};b.timeOnlyToMilliseconds=p;b.verifyBasicFieldValidity=function(d,I,R){const L=l({layer:d,fields:I});if(L.length)return new w(R,"Unknown fields: "+L.join(", ")+
". You can only use fields defined in the layer schema");d=q({layer:d,fields:I});if(d.length)return new w(R,"Unsupported fields: "+d.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};b.verifyFieldType=function(d,I,R,L){let U;I?I.name!==d.objectIdField&&L.includes(I.type)||(U=new w(R,"'field' should be one of these types: "+L.join(","))):U=new w(R,"'field' is not defined in the layer schema");return U};b.verifyFilterValidty=function(d,
I){if(d&&"intersects"!==d.spatialRelationship)return new w(I,"Only 'intersects' spatialRelationship is supported for featureFilter")};b.verifyNumericField=function(d,I,R){let L;I?I.name!==d.objectIdField&&e.isNumericField(I)||(L=new w(R,"'field' should be one of these numeric types: "+e.numericTypes.join(","))):L=new w(R,"'field' is not defined in the layer schema");return L};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(b){function f(r){return r?
72*r/96:0}const w=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;b.castRenderScreenPointArray=function(r){return r};b.castRenderScreenPointArray3=function(r){return r};b.castScreenPointArray=function(r){return r};b.createRenderScreenPoint=function(r=0,G=0){return{x:r,y:G}};b.createRenderScreenPointArray=function(r=0,G=0){return[r,G]};b.createRenderScreenPointArray3=function(r=0,G=0,y=0){return[r,G,y]};b.createScreenPoint=function(r=0,G=0){return{x:r,y:G}};b.createScreenPointArray=function(r=0,G=0){return[r,
G]};b.pt2px=function(r){return r?r/72*96:0};b.px2pt=f;b.screenPointArrayToObject=function(r,G){return G?(G.x=r[0],G.y=r[1],G):{x:r[0],y:r[1]}};b.screenPointObjectToArray=function(r,G){return G?(G[0]=r.x,G[1]=r.y,2<G.length&&(G[2]=0),G):[r.x,r.y]};b.toPt=function(r){if("string"===typeof r){var G=r.match(w);if(G){var y=Number(G[1]);G=G[3]&&G[3].toLowerCase();r="-"===r.charAt(0);y="px"===G?f(y):y;return r?-y:y}console.warn("screenUtils.toPt: input not recognized!");return null}return r};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(b,f,w,r){function G(n,e,v){return 0===n?0:n*g[e]/g[v]}function y(n){switch(n){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const g={milliseconds:1,seconds:1E3,
minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};b.convertTime=G;b.isValidDate=function(n){return n instanceof Date&&!isNaN(n.getTime())};b.makeUTCTime=function(n,e,v="milliseconds"){e=new Date(G(e,v,"milliseconds"));e.setUTCFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return e};b.mergeTimeExtents=function(n,e){return n&&e?n.intersection(e):n||e};b.millisecondsPerTimeUnit=g;b.offsetDate=function(n,e,v,x=w.system){x=new r.IANAZone(f.resolveTimeZone(x));
n=r.DateTime.fromJSDate(n,{zone:x});x="decades"===v||"centuries"===v?"year":y(v);"decades"===v&&(e*=10);"centuries"===v&&(e*=100);return n.plus({[x]:e}).toJSDate()};b.offsetDateUTC=function(n,e,v="milliseconds"){n=n.getTime();e=G(e,v,"milliseconds");return new Date(n+e)};b.resetUTCDate=function(n,e){n=new Date(n.getTime());n.setUTCFullYear(e.getFullYear(),e.getMonth(),e.getDate());return n};b.timeSinceUTCMidnight=function(n,e="milliseconds"){const v=G(n.getUTCHours(),"hours","milliseconds"),x=G(n.getUTCMinutes(),
"minutes","milliseconds"),u=G(n.getUTCSeconds(),"seconds","milliseconds");n=n.getUTCMilliseconds();return G(v+x+u+n,"milliseconds",e)};b.truncateDate=function(n,e,v=w.system){v=new r.IANAZone(f.resolveTimeZone(v));n=r.DateTime.fromJSDate(n,{zone:v});if("decades"===e||"centuries"===e)return n=n.startOf("year"),{year:v}=n,n.set({year:v-v%("decades"===e?10:100)}).toJSDate();e=y(e);return n.startOf(e).toJSDate()};b.truncateLocalTime=function(n){const e=new Date(0);e.setHours(0);e.setMinutes(0);e.setSeconds(0);
e.setMilliseconds(0);e.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return e};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(b,f,w,r,G){function y(g,n,e,v){let {color:x,ratio:u}=n,{color:H,ratio:t}=e;t===u&&(1===t?u-=1E-6:t+=1E-6);n=f.clamp((v-u)/(t-u),0,1);r.lerp(g,x.toArray(),
H.toArray(),n)}b.createValueFunction=function(g){return"function"===typeof g?g:g?n=>+n[g]:()=>1};b.evaluateDensityKernel=function(g,n,e){g=Math.sqrt(g**2+n**2)/e;return 1<g?0:3/(Math.PI*e**2)*(1-g**2)**2};b.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(g){return w.px2pt(2.4*g)};b.generateGradient=function(g){const n=new Uint8ClampedArray(2048);g=g.filter(({ratio:H})=>0<=H&&1>=H).sort((H,t)=>H.ratio-t.ratio).map(({color:H,ratio:t})=>({color:H,ratio:Math.max(t,.001)}));if(1>g.length)return n;
let e=g[0],v=g[0],x=1;const u=G.create();for(let H=0;512>H;H++){const t=(H+.5)/512;for(;t>v.ratio&&x<g.length;)e=v,v=g[x++];y(u,e,v,t);n.set(u,4*H)}return n};b.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(g){return w.pt2px(g)/2.4};b.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),
function(b,f,w,r,G,y){function g(t){return String(t).padStart(2,"0")}function n(t,p,a){if("date"===p||"number"===p){"number"===p&&(t=new Date(t));p=a?t.getFullYear():t.getUTCFullYear();const l=g((a?t.getMonth():t.getUTCMonth())+1),q=g(a?t.getDate():t.getUTCDate()),F=g(a?t.getHours():t.getUTCHours()),N=g(a?t.getMinutes():t.getUTCMinutes());t=g(a?t.getSeconds():t.getUTCSeconds());t=`TIMESTAMP'${p}-${l}-${q} ${F}:${N}:${t}'`}return t}function e(t,p){if(p instanceof Date)return"date";if("number"===typeof p)return"number";
if("string"===typeof p&&(t=t.getField(p),"\x3cnow\x3e"!==p.toLowerCase()&&w.isDateField(t)))return"field"}const v={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},x={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},u=new Set(["integer","small-integer"]);let H=null;b.castIntegerFieldToFloat=function(t){return`cast(${t} as float)`};b.dateTypes=
["date","date-only","timestamp-offset"];b.defaultBasemapGroups=v;b.fieldDelimiter=",";b.formatAnyDate=function(t,p){const {format:a,timeZoneOptions:l,fieldType:q}=p??{};let F;l&&({timeZone:N,timeZoneName:F}=y.getTimeZoneFormattingOptions(l.layerTimeZone,l.datesInUnknownTimezone,l.viewTimeZone,f.convertDateFormatToIntlOptions(a||"short-date-short-time"),q));if("string"===typeof t&&isNaN(Date.parse("time-only"===q?`1970-01-01T${t}Z`:t)))return t;switch(q){case "date-only":var N=f.convertDateFormatToIntlOptions(a||
"short-date");return"string"===typeof t?f.formatDateOnly(t,{...N}):f.formatDate(t,{...N,timeZone:y.utc});case "time-only":return N=f.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof t?f.formatTimeOnly(t,N):f.formatDate(t,{...N,timeZone:y.utc});case "timestamp-offset":if(!N&&"string"===typeof t&&(new Date(t)).toISOString()!==t)return t;N=(p=a||l?f.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...p,timeZone:N,timeZoneName:F}:void 0;return"string"===typeof t?f.formatTimestamp(t,
N):f.formatDate(t,N);default:return p=a||l?f.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,f.formatDate("string"===typeof t?new Date(t):t,p?{...p,timeZone:N,timeZoneName:F}:void 0)}};b.getBasemapGroup=function(t,p=v){for(const a in p)if(p[a].includes(t))return a};b.getBasemapId=function(t,p,a=!0){let l=null;t&&("string"===typeof t?p.includes(t)&&(l=t):l=G.getWellKnownBasemapId(t));return a?l||"gray":l};b.getDateDiffSQL=function(t,p,a,l){const {hasQueryEngine:q}=t;a=n(a,e(t,a),
q);t=n(p,e(t,p),q);t=`(${a} - ${t})`;l=x[l];p="/";1>l&&(l=1/l,p="*");return{sqlExpression:1===l?t:`(${t} ${p} ${l})`,sqlWhere:null}};b.getDateType=e;b.getFieldsList=async function(t){const {field:p,field2:a,field3:l,normalizationField:q,valueExpression:F}=t;t=[];F&&(H||({arcadeUtils:t}=await r.loadArcade(),H=t),t=H.extractFieldNames(F));p&&t.push(p);a&&t.push(a);l&&t.push(l);q&&t.push(q);return t};b.getNormalizationType=function(t){let p=t.normalizationType;p||(t.normalizationField?p="field":null!=
t.normalizationTotal&&(p="percent-of-total"));return p??void 0};b.isAnyDateField=function(t){return w.isDateField(t)||w.isDateOnlyField(t)||w.isTimestampOffsetField(t)};b.isIntegerField=function(t,p){t=p&&t.getField(p);return!!t&&u.has(t.type)};b.unitValueInDays=x;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(b,f,w,r,G,y,g,n,e,v){function x(C,z){let B;if("string"===typeof C){const P=C in v.esriBasemapDefinitions,K=!P&&C.includes("/");if(!P&&!K)return z=Object.entries(v.esriBasemapDefinitions).filter(([,T])=>w.apiKey&&!T.classic||!w.apiKey&&(T.classic||T.is3d)).map(([T])=>`"${T}"`).sort().join(", "),G.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${C}. Try one of these: ${z}`),null;z&&(B=z[C]);B||(B=P?f.fromId(C):new f({style:{id:C}}),z&&(z[C]=B))}else B=n.ensureType(f,
C);B?.destroyed&&(G.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:B}),B=null);return B}function u(C){if(Q)return Q(C);let z=null;C=a(C);const B=!C?.baseLayers.length;for(const K in v.esriBasemapDefinitions){var P=N(v.esriBasemapDefinitions[K]);P=I(C,P,{mustMatchReferences:B});if("equal"===P){z=K;break}"base-layers-equal"===P&&(z=K)}return z}function H(C,z){const B=new r;C.forEach(P=>{const K=z.find(T=>"scene"!==T.type&&L(q(P),q(T)))||P;B.includes(K)?
B.push(P):B.push(K)});return B}function t(C){if(p(C.url))return!0;if("vector-tile"===C.type)for(const z in C.sourceNameToSource)if(p(C.sourceNameToSource[z]?.sourceUrl))return!0;return!1}function p(C){if(!C)return!1;C=new g.Url(g.makeAbsolute(C));return!!C.authority&&m.test(C.authority)}function a(C){return C?!C.loaded&&C.resourceInfo?N(C.resourceInfo.data):{baseLayers:l(C.baseLayers),referenceLayers:l(C.referenceLayers)}:null}function l(C){return(r.isCollection(C)?C.toArray():C).map(q)}function q(C){return{type:C.type,
effect:"effect"in C?C.effect:void 0,url:U("urlTemplate"in C&&C.urlTemplate||C.url||"styleUrl"in C&&C.styleUrl||""),minScale:"minScale"in C&&null!=C.minScale?C.minScale:0,maxScale:"maxScale"in C&&null!=C.maxScale?C.maxScale:0,opacity:null!=C.opacity?C.opacity:1,visible:null!=C.visible?!!C.visible:!0,sublayers:"map-image"!==C.type&&"wms"!==C.type||null==C.sublayers?void 0:C.sublayers?.map(z=>({id:z.id,visible:z.visible})),activeLayerId:"wmts"===C.type?C.activeLayer?.id:void 0}}function F(C){return C.isReference||
"ArcGISSceneServiceLayer"===C.layerType}function N(C){return C?{baseLayers:d((C.baseMapLayers??[]).filter(z=>!F(z))),referenceLayers:d((C.baseMapLayers??[]).filter(z=>F(z)))}:null}function d(C){return C.map(z=>{let B;switch(z.layerType){case "VectorTileLayer":B="vector-tile";break;case "ArcGISTiledMapServiceLayer":B="tile";break;case "ArcGISSceneServiceLayer":B="scene";break;default:B="unknown"}return{type:B,effect:z.effect,url:U(z.templateUrl||z.urlTemplate||z.styleUrl||z.url),minScale:z.minScale??
0,maxScale:z.maxScale??0,opacity:z.opacity??1,visible:null!=z.visibility?!!z.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function I(C,z,B){return null!=C!==(null!=z)?"not-equal":C&&z?R(C.baseLayers,z.baseLayers)?R(C.referenceLayers,z.referenceLayers)?"equal":B.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function R(C,z){if(C.length!==z.length)return!1;for(let B=0;B<C.length;B++)if(!L(C[B],z[B]))return!1;return!0}function L(C,z){if(C.type!==z.type||C.url!==z.url||
C.minScale!==z.minScale||C.maxScale!==z.maxScale||C.visible!==z.visible||C.opacity!==z.opacity||!e.effectEquals(C.effect,z.effect))return!1;if(null!=C.activeLayerId||null!=z.activeLayerId)return C.activeLayerId===z.activeLayerId;if(null!=C.sublayers||null!=z.sublayers){if(null==C.sublayers||null==z.sublayers||C.sublayers.length!==z.sublayers.length)return!1;for(let B=0;B<C.sublayers.length;B++){const P=C.sublayers.at(B),K=z.sublayers.at(B);if(P?.id!==K?.id||P?.visible!==K?.visible)return!1}}return!0}
function U(C){return C?g.normalize(C).replace(/^\s*https?:/i,"").toLowerCase():""}function S(C){return"portalItem"in C?C.portalItem?.thumbnailUrl:void 0}let Q;const m=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;b.clonePreservingTiledLayers=function(C,z=null){C=x(C);if(!C)return null;C=C.clone();z&&(C.baseLayers=H(C.baseLayers,z.baseLayers),C.referenceLayers=H(C.referenceLayers,z.referenceLayers));return C};b.contentEquals=function(C,z){if(C===z||null!=C?.portalItem?.id&&C.portalItem.id===z?.portalItem?.id)return!0;
C=a(C);z=a(z);return"equal"===I(C,z,{mustMatchReferences:!0})};b.createCache=function(){return{}};b.destroyCache=function(C){for(const z in C)y.destroyMaybe(C[z]),delete C[z]};b.ensureType=x;b.findSpatialReference=function(C,z){if(null==z||null==C)return{spatialReference:null,updating:!1};if("not-loaded"===z.loadStatus)return z.load(),{spatialReference:null,updating:!0};if(z.spatialReference)return{spatialReference:z.spatialReference,updating:!1};if(0===z.baseLayers.length)return{spatialReference:null,
updating:!1};z=z.baseLayers.at(0);switch(z.loadStatus){case "not-loaded":z.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}z=(("supportedSpatialReferences"in z?z.supportedSpatialReferences:null)||["tileInfo"in z?z.tileInfo?.spatialReference:z.spatialReference]).filter(Boolean);const B=C.spatialReference;return B?{spatialReference:z.find(P=>B.equals(P))??z[0]??null,updating:!1}:{spatialReference:z[0],updating:!1}};b.getBasemapThumbnailUrl=
function(C){if(!C)return null;var {thumbnailUrl:z}=C;return z?z:(z=u(C))?v.esriBasemapDefinitions[z].thumbnailUrl:y.mappedFind(C.baseLayers,S)};b.getWellKnownBasemapId=u;b.hasDeveloperBasemapLayer=function(C){return!!C?.baseLayers.concat(C.referenceLayers).some(t)};b.isBasemap3D=function(C){return"Web Scene"===C.portalItem?.type||C.referenceLayers.some(z=>"scene"===z.type)};b.isBasemapInBeta=function(C){return!!C?.portalItem?.tags?.some(z=>"beta"===z.toLowerCase())};b.isBasemapLayer=function(C,z){return C.basemap?.referenceLayers?.some(B=>
B.uid===z)||C.basemap?.baseLayers?.some(B=>B.uid===z)};b.isDeveloperBasemapLayer=t;b.overrideGetWellKnownBasemapId=function(C){Q=C};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p,a,l,q,F,N,d,I,R){var L;let U=0;y=L=class extends y.JSONSupportMixin(n){constructor(m){super(m);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+U++;this.baseLayers=new r;this.referenceLayers=new r;const C=z=>{z.parent&&z.parent!==this&&"remove"in z.parent&&z.parent.remove(z);z.parent=this;"elevation"===z.type&&v.getLogger(this).error(`Layer '${z.title}, id:${z.id}' of type '${z.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",z=>C(z.item)),this.referenceLayers.on("after-add",z=>C(z.item)),this.baseLayers.on("after-remove",z=>{z.item.parent=null}),this.referenceLayers.on("after-remove",z=>{z.item.parent=null})])}initialize(){this.when().catch(m=>{v.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,m)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var m=this.baseLayers.toArray();for(const C of m)C.destroy();
m=this.referenceLayers.toArray();for(const C of m)C.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=x.destroyMaybe(this.portalItem)}normalizeCtorArgs(m){m&&"resourceInfo"in m&&(this._set("resourceInfo",m.resourceInfo),m={...m},delete m.resourceInfo);return m}set baseLayers(m){this._set("baseLayers",G.referenceSetter(m,this._get("baseLayers")))}_writeBaseLayers(m,C,z){const B=[];m&&(z={...z,layerContainerType:"basemap"},this.baseLayers.forEach(P=>{P=R.getLayerJSON(P,
z.webmap?z.webmap.getLayerJSONFromResourceInfo(P):null,z);null!=P&&B.push(P)}),this.referenceLayers.forEach(P=>{const K=R.getLayerJSON(P,z.webmap?z.webmap.getLayerJSONFromResourceInfo(P):null,z);null!=K&&("scene"!==P.type&&(K.isReference=!0),B.push(K))}));C.baseMapLayers=B}set referenceLayers(m){this._set("referenceLayers",G.referenceSetter(m,this._get("referenceLayers")))}writeTitle(m,C){C.title=m||"Basemap"}load(m){this.addResolvingPromise(this._loadFromSource(m));return Promise.resolve(this)}loadAll(){return e.loadAll(this,
m=>{m(this.baseLayers,this.referenceLayers)})}clone(){const m={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(C=>g.isClonable(C)?C.clone():C),referenceLayers:this.referenceLayers.map(C=>g.isClonable(C)?C.clone():C)};this.loaded&&(m.loadStatus="loaded");return(new L({resourceInfo:this.resourceInfo})).set(m)}read(m,C){this.resourceInfo||this._set("resourceInfo",{data:m,context:C});super.read(m,C)}write(m,C){m=m||{};C?.origin||(C={origin:"web-map",...C});super.write(m,
C);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(m.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(z=>{z=g.clone(z);z.url&&H.isProtocolRelative(z.url)&&(z.url=`https:${z.url}`);z.templateUrl&&H.isProtocolRelative(z.templateUrl)&&(z.templateUrl=`https:${z.templateUrl}`);return z}));return m}async _loadFromSource(m){const {resourceInfo:C,portalItem:z,style:B}=this;u.throwIfAborted(m);const P=[];C?(P.push(this._loadLayersFromJSON(C.data,C.context?C.context.url:null,m)),C.data.id&&!C.data.title&&
P.push(d.getBasemapTitle(C.data.id).then(K=>{K&&this.read({title:K},C.context)}))):z?P.push(this._loadFromItem(z,m)):B&&P.push(this._loadFromStylesService(B,m));await Promise.all(P)}async _loadLayersFromJSON(m,C,z){const B=this.resourceInfo?.context,P=this.portalItem?.portal||B?.portal||null,K=Q[B?.origin||""]??"web-map",{populateOperationalLayers:T}=await new Promise((fa,oa)=>b(["./layers/support/layersCreator"],fa,oa)),Y=[];u.throwIfAborted(z);if(m.baseMapLayers&&Array.isArray(m.baseMapLayers)){C=
{context:{...B,origin:K,url:C,portal:P,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const fa=oa=>"web-scene"===K&&"ArcGISSceneServiceLayer"===oa.layerType||oa.isReference;z=T(this.baseLayers,m.baseMapLayers.filter(oa=>!fa(oa)),C);Y.push(z);m=T(this.referenceLayers,m.baseMapLayers.filter(fa),C);Y.push(m)}await Promise.allSettled(Y)}async _loadFromItem(m,C){const z=await (await m.load(C)).fetchData("json",C),B=H.urlToObject(m.itemUrl??"");this._set("resourceInfo",{data:z.baseMap??
{},context:{origin:S[m.type||""]??"web-map",portal:m.portal||F.getDefault(),url:B}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:z.spatialReference},this.resourceInfo.context);this.read({title:m.title,thumbnailUrl:m.thumbnailUrl},{origin:"portal-item",portal:m.portal||F.getDefault(),url:B});return this._loadLayersFromJSON(this.resourceInfo.data,B,C)}async _loadFromStylesService(m,C){var z=`${m.serviceUrl}/${m.id}`;m=(await w(z,{query:{language:m.getLanguageParamValue(),
places:m.places,worldview:m.worldview},signal:C?.signal})).data;z=H.urlToObject(z);this._set("resourceInfo",{data:m.baseMap??{},context:{origin:"web-map",url:z}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:m.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,z,C)}static fromId(m){return(m=d.esriBasemapDefinitions[m])?m.itemId?new L({portalItem:{id:m.itemId,portal:{url:"https://www.arcgis.com"}}}):L.fromJSON(m,
{origin:m.is3d?"web-scene":"web-map"}):null}};f.__decorate([t.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(m,C,z,B){this._writeBaseLayers(m,C,B)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:r}},writer(m,C,z,B){this._writeBaseLayers(m,C,B)}}}}}})],y.prototype,"baseLayers",null);f.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],y.prototype,"id",void 0);f.__decorate([t.property({type:N})],y.prototype,"portalItem",void 0);
f.__decorate([t.property()],y.prototype,"referenceLayers",null);f.__decorate([t.property({readOnly:!0})],y.prototype,"resourceInfo",void 0);f.__decorate([t.property({type:q})],y.prototype,"spatialReference",void 0);f.__decorate([t.property({type:I})],y.prototype,"style",void 0);f.__decorate([t.property()],y.prototype,"thumbnailUrl",void 0);f.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],y.prototype,"title",void 0);f.__decorate([l.writer("title")],y.prototype,
"writeTitle",null);y=L=f.__decorate([a.subclass("esri.Basemap")],y);const S={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Q={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return y})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(b,f){b.castForReferenceSetter=function(w){return w};b.referenceSetter=function(w,r,G=f){r||=new G;if(r===w)return r;r.removeAll();w&&(Array.isArray(w)||"items"in w&&Array.isArray(w.items))?
r.addMany(w):w&&r.add(w);return r};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(b,f,w,r,G,y,g,n){const e=v=>{v=class extends v{constructor(...x){super(...x);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(u=>
{const H=this.load.bind(this);this.load=t=>{const p=new Promise((a,l)=>{const q=G.onAbortOrThrow(t,l);this.destroyed&&l(new f("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,l).finally(()=>{q&&q.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const a=this._loadController=new AbortController;H({signal:a.signal})}u();return p}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},u=>{this._set("loadStatus","failed");this._set("loadError",u);this._loadController=null})}destroy(){this._loadController&&(this._loadController=w.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new f("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};b.__decorate([g.property({readOnly:!0})],v.prototype,"loaded",null);b.__decorate([g.property({readOnly:!0})],v.prototype,"loadError",void 0);b.__decorate([g.property({clonable:!1})],v.prototype,"loadStatus",void 0);b.__decorate([g.property({type:[y],readOnly:!0})],v.prototype,"loadWarnings",null);return v=b.__decorate([n.subclass("esri.core.Loadable")],v)};r=class extends e(r.EsriPromise){};r=b.__decorate([n.subclass("esri.core.Loadable")],
r);(function(v){v.LoadableMixin=e;v.isLoadable=function(x){return!(!x||!x.load)}})(r||={});return r})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(b,f,w,r,G){var y;(function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"})(y||={});class g{constructor(){this._resolver=r.createResolver();this._status=y.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=y.RESOLVED;this._cleanUp()},()=>{this._status=y.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e);this._tryResolve()}isResolved(){return this._status===y.RESOLVED}isRejected(){return this._status===y.REJECTED}isFulfilled(){return this._status!==y.PENDING}abort(){this._resolver.reject(r.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var e=
r.createResolver(),v=[...this._resolvingPromises,e.promise],x=this._allPromise=Promise.all(v);x.then(()=>{this.isFulfilled()||this._allPromise!==x||this._resolver.resolve()},u=>{this.isFulfilled()||this._allPromise!==x||r.isAbortError(u)||this._resolver.reject(u)});e.resolve()}}}const n=e=>{e=class extends e{constructor(...v){super(...v);this._promiseProps=new g;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(v,
x){return this._promiseProps.promise.then(()=>this).then(v,x)}catch(v){return this.when(null,v)}addResolvingPromise(v){v&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in v?v.when():v)}};return e=f.__decorate([G.subclass("esri.core.Promise")],e)};b.EsriPromise=class extends n(w){};b.EsriPromise=f.__decorate([G.subclass("esri.core.Promise")],b.EsriPromise);b.EsriPromiseMixin=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(b,f,w,r){async function G(y,g){const n=[],e=(...x)=>{for(const u of x)null!=u&&(Array.isArray(u)?e(...u):w.isCollection(u)?u.forEach(H=>e(H)):r.isLoadable(u)&&n.push(u))};g(e);let v=null;await f.map(n,async x=>{x=await f.result("loadAll"in x&&"function"===typeof x.loadAll?x.loadAll():x.load());!1!==x.ok||v||(v=x)});if(v)throw v.error;return y}b.loadAll=async function(y,g){await y.load();return G(y,g)};b.loadAllChildren=G;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p,a,l,q,F,N,d,I,R,L){function U(B){const P=r.id;return()=>{const K=B.deref();K&&P.findCredential(K.restUrl)&&K.signIn().catch(()=>{})}}const S=B=>Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));var Q;let m;const C={PortalGroup:()=>Promise.resolve({default:N}),PortalItem:()=>new Promise((B,P)=>b(["./PortalItem"],K=>B(S(K)),P)),PortalUser:()=>Promise.resolve({default:R})};g=Q=class extends g.JSONSupportMixin(n){constructor(B){super(B);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=
this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=w.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(B){return"string"===typeof B?{url:B}:B}destroy(){z.unregister(this);
this.defaultBasemap=e.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=e.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=e.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=e.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(B){if(B)for(const P of B)w.request.trustedServers.includes(P)||w.request.trustedServers.push(P);return B}readDefaultBasemap(B){return this._readBasemap(B)}readDefaultDevBasemap(B){return this._readBasemap(B)}readDefaultVectorBasemap(B){return this._readBasemap(B)}get extraQuery(){const B=
!this.user?.orgId||this.canSearchPublic;return this.id&&!B?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let B=this.url;if(B){const P=B.indexOf("/sharing");B=0<P?B.substring(0,P):this.url.replace(/\/+$/,"");B+="/sharing/rest"}return B}get thumbnailUrl(){const B=this.restUrl,P=this.thumbnail;return B&&P?this._normalizeSSL(B+"/portals/self/resources/"+P):null}readUrlKey(B){return B?B.toLowerCase():
B}readUser(B){let P=null;B&&(P=R.fromJSON(B),P.portal=this);return P}load(B){const P=(new Promise((K,T)=>b(["../Basemap"],Y=>K(S(Y)),T))).then(({default:K})=>{v.throwIfAborted(B);m=K}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,B)).then(K=>{if(r.id){const T=r.id;this.credential=T.findCredential(this.restUrl);this.credential||this.authMode!==Q.AUTH_MODE_AUTO&&this.authMode!==Q.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
T.on("credential-create",U(new WeakRef(this))),z.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=K;this.read(K)});this.addResolvingPromise(P);return Promise.resolve(this)}async createElevationLayers(){await this.load();const B=this._getHelperService("defaultElevationLayers"),P=(await new Promise((K,T)=>b(["../layers/ElevationLayer"],Y=>K(S(Y)),T))).default;return B?B.map(K=>new P({id:K.id,url:K.url})):[]}async fetchBasemaps(B,P){const K=await this._fetchBasemaps(B,P);!0===
P?.include3d&&!1!==this.use3dBasemaps&&(B=await this._fetchBasemaps3D(B,P),K.unshift(...B));return K}fetchCategorySchema(B){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",B).then(P=>P.categorySchema):v.isAborted(B)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(B){const P=this.featuredGroups,K=new d;K.num=100;K.sortField="title";if(P&&P.length){const T=[];for(const Y of P)T.push(`(title:"${Y.title}" AND owner:${Y.owner})`);K.query=
T.join(" OR ");return this.queryGroups(K,B).then(Y=>Y.results)}return v.isAborted(B)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchRegions(B){const P=this.user?.culture||this.culture||q.getLocale();return this.request(this.restUrl+"/portals/regions",{...B,query:{culture:P}})}fetchSettings(B){const P=this.user?.culture||this.culture||q.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...B,query:{culture:P}})}static getDefault(){return F.ensureDefaultPortalInstance(()=>
new Q)}queryGroups(B,P){return this.queryPortal("/community/groups",B,"PortalGroup",P)}queryItems(B,P){return this.queryPortal("/search",B,"PortalItem",P)}queryUsers(B,P){B.sortField||(B.sortField="username");return this.queryPortal("/community/users",B,"PortalUser",P)}fetchSelf(B=this.authMode,P=!1,K){const T=this.restUrl+"/portals/self";B={authMode:B,query:{culture:q.getLocale().toLowerCase()},withCredentials:!0,...K};"auto"===B.authMode&&(B.authMode="no-prompt");P&&(B.query.default=!0);return this.request(T,
B)}queryPortal(B,P,K,T){const Y=u.ensureType(d,P),fa=oa=>this.request(this.restUrl+B,{...Y.toRequestOptions(this),...T}).then(sa=>{const ca=Y.clone();ca.start=sa.nextStart;return new I({nextQueryParams:ca,queryParams:Y,total:sa.total,results:Q._resultsToTypedArray(oa,{portal:this},sa,T)})}).then(sa=>Promise.all(sa.results.map(ca=>"function"===typeof ca.when?ca.when():sa)).then(()=>sa,ca=>{v.throwIfAbortError(ca);return sa}));return K&&C[K]?C[K]().then(({default:oa})=>{v.throwIfAborted(T);return fa(oa)}):
fa()}signIn(){if(this.authMode===Q.AUTH_MODE_ANONYMOUS||this.authMode===Q.AUTH_MODE_NO_PROMPT&&!r.id)return Promise.reject(new y("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const B=P=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return P||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
P;return this.fetchSelf("immediate")});if(this.user&&this.credential===P)return null;this.credential=P;return this.fetchSelf("immediate")}).then(K=>{K&&(this.sourceJSON=K,this.read(K))});return r.id?r.id.getCredential(this.restUrl,{prompt:this.authMode!==Q.AUTH_MODE_NO_PROMPT}).then(P=>B(P)):B(this.credential)}normalizeUrl(B){const P=this.credential?.token;return this._normalizeSSL(P?B+(B.includes("?")?"\x26":"?")+"token\x3d"+P:B)}requestToTypedArray(B,P,K){return this.request(B,P).then(T=>{const Y=
Q._resultsToTypedArray(K,{portal:this},T);return Promise.all(Y.map(fa=>"function"===typeof fa.when?fa.when():T)).then(()=>Y,()=>Y)})}request(B,P={}){var K={f:"json",...P.query};const {authMode:T=this.authMode===Q.AUTH_MODE_ANONYMOUS||this.authMode===Q.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:Y=null,cacheBust:fa=!1,method:oa="auto",responseType:sa="json",signal:ca}=P;K={authMode:T,body:Y,cacheBust:fa,method:oa,query:K,responseType:sa,timeout:0,signal:ca};P.withCredentials&&(K.withCredentials=
!0);return G(this._normalizeSSL(B),K).then(ka=>ka.data)}toJSON(){throw new y("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(B){if(!B)return null;if(B.declaredClass)throw Error("JSON object is already hydrated");return new Q({sourceJSON:B})}_getHelperService(B){const P=this.helperServices&&this.helperServices[B];if(!P)throw new y("portal:service-not-found",`The \`helperServices\` do not include an entry named "${B}"`);return P}async _fetchBasemaps(B,P){const K=
new d;K.query=B||(w.apiKey&&L.supportsApiKey(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);K.disableExtraQuery=!0;B=await this.queryGroups(K,P);if(!B.total)return[];B=B.results[0];K.num=100;K.query='type:"Web Map" -type:"Web Application"';K.sortField=B.sortField||"name";K.sortOrder=B.sortOrder||"desc";P=await B.queryItems(K,P);return P.total?P.results.filter(T=>"Web Map"===T.type).map(T=>new m({portalItem:T})):
[]}async _fetchBasemaps3D(B,P){B=B||this.basemapGalleryGroupQuery3D;if(!B)return[];B=new d({query:B,disableExtraQuery:!0});var K=await this.queryGroups(B,P);if(!K.total)return[];K=K.results[0];B.num=100;B.query='type:"Web Scene"';B.sortField=K.sortField||"name";B.sortOrder=K.sortOrder||"desc";P=await K.queryItems(B,P);return P.total?P.results.filter(T=>"Web Scene"===T.type).map(T=>new m({portalItem:T})):[]}_normalizeSSL(B){return B.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(B){return B?
(B=m.fromJSON(B),B.portalItem={portal:this},B):null}static _resultsToTypedArray(B,P,K,T){let Y=[];if(K){const fa=null!=T?T.signal:null;Y=K.listings||K.notifications||K.userInvitations||K.tags||K.items||K.groups||K.comments||K.provisions||K.results||K.relatedItems||K;if(B||P)Y=Y.map(oa=>{oa=Object.assign(B?B.fromJSON(oa):oa,P);"function"===typeof oa.load&&oa.load(fa);return oa})}else Y=[];return Y}};g.AUTH_MODE_ANONYMOUS="anonymous";g.AUTH_MODE_AUTO="auto";g.AUTH_MODE_IMMEDIATE="immediate";g.AUTH_MODE_NO_PROMPT=
"no-prompt";f.__decorate([x.property()],g.prototype,"access",void 0);f.__decorate([x.property()],g.prototype,"allSSL",void 0);f.__decorate([x.property()],g.prototype,"authMode",void 0);f.__decorate([x.property()],g.prototype,"authorizedCrossOriginDomains",void 0);f.__decorate([p.reader("authorizedCrossOriginDomains")],g.prototype,"readAuthorizedCrossOriginDomains",null);f.__decorate([x.property()],g.prototype,"basemapGalleryGroupQuery",void 0);f.__decorate([x.property({json:{name:"3DBasemapGalleryGroupQuery"}})],
g.prototype,"basemapGalleryGroupQuery3D",void 0);f.__decorate([x.property()],g.prototype,"bingKey",void 0);f.__decorate([x.property()],g.prototype,"canListApps",void 0);f.__decorate([x.property()],g.prototype,"canListData",void 0);f.__decorate([x.property()],g.prototype,"canListPreProvisionedItems",void 0);f.__decorate([x.property()],g.prototype,"canProvisionDirectPurchase",void 0);f.__decorate([x.property()],g.prototype,"canSearchPublic",void 0);f.__decorate([x.property()],g.prototype,"canShareBingPublic",
void 0);f.__decorate([x.property()],g.prototype,"canSharePublic",void 0);f.__decorate([x.property()],g.prototype,"canSignInArcGIS",void 0);f.__decorate([x.property()],g.prototype,"canSignInIDP",void 0);f.__decorate([x.property()],g.prototype,"colorSetsGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"commentsEnabled",void 0);f.__decorate([x.property({type:Date})],g.prototype,"created",void 0);f.__decorate([x.property()],g.prototype,"credential",void 0);f.__decorate([x.property()],g.prototype,
"culture",void 0);f.__decorate([x.property()],g.prototype,"currentVersion",void 0);f.__decorate([x.property()],g.prototype,"customBaseUrl",void 0);f.__decorate([x.property()],g.prototype,"defaultBasemap",void 0);f.__decorate([p.reader("defaultBasemap")],g.prototype,"readDefaultBasemap",null);f.__decorate([x.property()],g.prototype,"defaultDevBasemap",void 0);f.__decorate([p.reader("defaultDevBasemap")],g.prototype,"readDefaultDevBasemap",null);f.__decorate([x.property({type:l})],g.prototype,"defaultExtent",
void 0);f.__decorate([x.property()],g.prototype,"defaultVectorBasemap",void 0);f.__decorate([p.reader("defaultVectorBasemap")],g.prototype,"readDefaultVectorBasemap",null);f.__decorate([x.property()],g.prototype,"description",void 0);f.__decorate([x.property()],g.prototype,"devBasemapGalleryGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"eueiEnabled",void 0);f.__decorate([x.property({readOnly:!0})],g.prototype,"extraQuery",null);f.__decorate([x.property()],g.prototype,"featuredGroups",
void 0);f.__decorate([x.property()],g.prototype,"featuredItemsGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"galleryTemplatesGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"livingAtlasGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"hasCategorySchema",void 0);f.__decorate([x.property()],g.prototype,"helpBase",void 0);f.__decorate([x.property()],g.prototype,"helperServices",void 0);f.__decorate([x.property()],g.prototype,"helpMap",void 0);f.__decorate([x.property()],
g.prototype,"homePageFeaturedContent",void 0);f.__decorate([x.property()],g.prototype,"homePageFeaturedContentCount",void 0);f.__decorate([x.property()],g.prototype,"httpPort",void 0);f.__decorate([x.property()],g.prototype,"httpsPort",void 0);f.__decorate([x.property()],g.prototype,"id",void 0);f.__decorate([x.property()],g.prototype,"ipCntryCode",void 0);f.__decorate([x.property({readOnly:!0})],g.prototype,"isOrganization",null);f.__decorate([x.property()],g.prototype,"isPortal",void 0);f.__decorate([x.property()],
g.prototype,"isReadOnly",void 0);f.__decorate([x.property({readOnly:!0})],g.prototype,"itemPageUrl",null);f.__decorate([x.property()],g.prototype,"layerTemplatesGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"maxTokenExpirationMinutes",void 0);f.__decorate([x.property({type:Date})],g.prototype,"modified",void 0);f.__decorate([x.property()],g.prototype,"name",void 0);f.__decorate([x.property()],g.prototype,"portalHostname",void 0);f.__decorate([x.property()],g.prototype,"portalMode",void 0);
f.__decorate([x.property()],g.prototype,"portalProperties",void 0);f.__decorate([x.property()],g.prototype,"region",void 0);f.__decorate([x.property({readOnly:!0})],g.prototype,"restUrl",null);f.__decorate([x.property()],g.prototype,"rotatorPanels",void 0);f.__decorate([x.property()],g.prototype,"showHomePageDescription",void 0);f.__decorate([x.property()],g.prototype,"sourceJSON",void 0);f.__decorate([x.property()],g.prototype,"staticImagesUrl",void 0);f.__decorate([x.property({json:{name:"2DStylesGroupQuery"}})],
g.prototype,"stylesGroupQuery2d",void 0);f.__decorate([x.property({json:{name:"stylesGroupQuery"}})],g.prototype,"stylesGroupQuery3d",void 0);f.__decorate([x.property()],g.prototype,"supportsHostedServices",void 0);f.__decorate([x.property()],g.prototype,"symbolSetsGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"templatesGroupQuery",void 0);f.__decorate([x.property()],g.prototype,"thumbnail",void 0);f.__decorate([x.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);f.__decorate([x.property()],
g.prototype,"units",void 0);f.__decorate([x.property()],g.prototype,"url",void 0);f.__decorate([x.property()],g.prototype,"urlKey",void 0);f.__decorate([p.reader("urlKey")],g.prototype,"readUrlKey",null);f.__decorate([x.property()],g.prototype,"user",void 0);f.__decorate([p.reader("user")],g.prototype,"readUser",null);f.__decorate([x.property()],g.prototype,"use3dBasemaps",void 0);f.__decorate([x.property()],g.prototype,"useStandardizedQuery",void 0);f.__decorate([x.property()],g.prototype,"useVectorBasemaps",
void 0);f.__decorate([x.property()],g.prototype,"vectorBasemapGalleryGroupQuery",void 0);f=g=Q=f.__decorate([a.subclass("esri.portal.Portal")],g);const z=new FinalizationRegistry(B=>{B.remove()});return f})},"esri/portal/portalDefault":function(){define(["exports"],function(b){let f;b.clearDefaultPortalInstance=function(){f=void 0};b.ensureDefaultPortalInstance=function(w){if(!f||f.destroyed)f=w();return f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(b,f,w,r,G,y,g,n,e){var v;w=v=class extends w.JSONSupport{constructor(x){super(x);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const x=this.url,u=this.thumbnail;return x&&u&&this.portal?this.portal?.normalizeUrl(`${x}/info/${u}?f=json`):null}get url(){const x=this.portal?.restUrl;return x?x+"/community/groups/"+this.id:
null}fetchCategorySchema(x){return this.portal.request(this.url+"/categorySchema",x).then(u=>{u=u.categorySchema||[];return u.some(H=>"contentCategorySetsGroupQuery.LivingAtlas"===H.source)?this._fetchCategorySchemaSet("LivingAtlas",x):u})}fetchMembers(x){return this.portal.request(this.url+"/users",x)}getThumbnailUrl(x){let u=this.thumbnailUrl;u&&x&&(u+=`&w=${x}`);return u}toJSON(){throw new f("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(x){if(!x)return null;
if(x.declaredClass)throw Error("JSON object is already hydrated");const u=new v;u.sourceJSON=x;u.read(x);return u}queryItems(x,u){x=G.ensureType(e,x);const H=this.portal;if(5<parseFloat(H.currentVersion))return x=x||new e,H.queryPortal(`/content/groups/${this.id}/search`,x,"PortalItem",u);x=x?x.clone():new e;x.query="group:"+this.id+(x.query?" "+x.query:"");return H.queryItems(x,u)}_fetchCategorySchemaSet(x,u){const H=this.portal;return H.fetchSelf(H.authMode,!0,u).then(t=>{if(t=t.contentCategorySetsGroupQuery){const p=
new e;p.disableExtraQuery=!0;p.num=1;p.query=t;return H.queryGroups(p,u)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(t=>{if(t.total){t=t.results[0];const p=new e;p.num=1;p.query=`typekeywords:"${x}"`;return t.queryItems(p,u)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(t=>t.total?t.results[0].fetchData("json",u).then(p=>{p=p?.categorySchema;return p?.length?p:[]}):[])}};b.__decorate([r.property()],
w.prototype,"access",void 0);b.__decorate([r.property({type:Date})],w.prototype,"created",void 0);b.__decorate([r.property()],w.prototype,"description",void 0);b.__decorate([r.property()],w.prototype,"id",void 0);b.__decorate([r.property()],w.prototype,"isInvitationOnly",void 0);b.__decorate([r.property({type:Date})],w.prototype,"modified",void 0);b.__decorate([r.property()],w.prototype,"owner",void 0);b.__decorate([r.property()],w.prototype,"portal",void 0);b.__decorate([r.property()],w.prototype,
"snippet",void 0);b.__decorate([r.property()],w.prototype,"sortField",void 0);b.__decorate([r.property()],w.prototype,"sortOrder",void 0);b.__decorate([r.property()],w.prototype,"sourceJSON",void 0);b.__decorate([r.property()],w.prototype,"tags",void 0);b.__decorate([r.property()],w.prototype,"thumbnail",void 0);b.__decorate([r.property({readOnly:!0})],w.prototype,"thumbnailUrl",null);b.__decorate([r.property()],w.prototype,"title",void 0);b.__decorate([r.property({readOnly:!0})],w.prototype,"url",
null);return w=v=b.__decorate([n.subclass("esri.portal.PortalGroup")],w)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(b,f,w,r,G,y,g,n,e,v,x){var u;const H=new w.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});f=u=class extends f{constructor(t){super(t);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new u({categories:this.categories?r.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,p){let a=[];this.categories&&(a=this.categories.map(F=>Array.isArray(F)?JSON.stringify(F):F));let l="";if(this.extent){var q=x.project(this.extent,v.WGS84);null!=q&&(l=`${q.xmin},${q.ymin},${q.xmax},${q.ymax}`)}q=this.query;!this.disableExtraQuery&&t.extraQuery&&(q="("+q+")"+t.extraQuery);t={categories:a,bbox:l,q,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(t.sortField=this.sortField.split(",").map(F=>H.toJSON(F.trim())).join(","),t.sortOrder=this.sortOrder);return{query:{...p,...t}}}};b.__decorate([G.property()],f.prototype,"categories",void 0);b.__decorate([G.property()],f.prototype,"disableExtraQuery",void 0);b.__decorate([G.property({type:e})],f.prototype,"extent",void 0);b.__decorate([G.property()],f.prototype,"filter",void 0);b.__decorate([G.property()],f.prototype,"num",void 0);b.__decorate([G.property()],
f.prototype,"query",void 0);b.__decorate([G.property()],f.prototype,"sortField",void 0);b.__decorate([G.property()],f.prototype,"sortOrder",null);b.__decorate([G.property()],f.prototype,"start",void 0);return f=u=b.__decorate([n.subclass("esri.portal.PortalQueryParams")],f)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,w,r,G,y,g){f=class extends f{constructor(n){super(n);this.total=this.results=this.queryParams=this.nextQueryParams=null}};b.__decorate([w.property()],f.prototype,"nextQueryParams",void 0);b.__decorate([w.property()],f.prototype,"queryParams",void 0);b.__decorate([w.property()],f.prototype,"results",void 0);b.__decorate([w.property()],f.prototype,"total",void 0);return f=b.__decorate([g.subclass("esri.portal.PortalQueryResult")],f)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x){var u;r=u=class extends r.JSONSupport{constructor(...H){super(...H);this.userType=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const H=this.url,t=this.thumbnail;return H&&t?this.portal.normalizeUrl(`${H}/info/${t}?f=json`):null}get userContentUrl(){const H=this.portal?.restUrl;
return H?`${H}/content/users/${this.username}`:null}get url(){const H=this.portal?.restUrl;return H?`${H}/community/users/${this.username}`:null}addItem(H){const t=H&&H.item;var p=H?.data;H=H?.folder;const a={method:"post"};t&&(a.query=t.createPostQuery(),null!=p&&("string"===typeof p?a.query.text=p:"object"===typeof p&&(a.query.text=JSON.stringify(p))));p=this.userContentUrl;H&&(p+="/"+("string"===typeof H?H:H.id));return this.portal.request(p+"/addItem",a).then(l=>{t.id=l.id;t.portal=this.portal;
return t.loaded?t.reload():t.load()})}deleteItem(H){let t=this.userContentUrl;H.ownerFolder&&(t+="/"+H.ownerFolder);return this.portal.request(t+`/items/${H.id}/delete`,{method:"post"}).then(()=>{H.id=null;H.portal=null})}deleteItems(H){const t=this.userContentUrl+"/deleteItems";var p=H.map(a=>a.id);return p.length?(p={method:"post",query:{items:p.join(",")}},this.portal.request(t,p).then(()=>{H.forEach(a=>{a.id=null;a.portal=null})})):Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??
"",{query:{num:1}}).then(H=>H&&H.folders?H.folders.map(t=>{t=v.fromJSON(t);t.portal=this.portal;return t}):[])}fetchGroups(){return this.portal.request(this.url??"").then(H=>H&&H.groups?H.groups.map(t=>{t=x.fromJSON(t);t.portal=this.portal;return t}):[])}fetchItems(H){const t=H??{};let p=this.userContentUrl??"";t.folder&&(p+="/"+t.folder.id);let a;return(new Promise((l,q)=>b(["./PortalItem"],F=>l(Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}))),
q))).then(({default:l})=>{a=l;return this.portal.request(p,{query:{folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"}})}).then(l=>{let q;return l?.items?(q=l.items.map(F=>{F=a.fromJSON(F);F.portal=this.portal;return F}),Promise.all(q.map(F=>F.load())).catch(F=>F).then(()=>({items:q,nextStart:l.nextStart,total:l.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(H=>H.tags)}getThumbnailUrl(H){let t=
this.thumbnailUrl;t&&H&&(t+=`&w=${H}`);return t}queryFavorites(H){return this.favGroupId?(this._favGroup||(this._favGroup=new x({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(H)):Promise.reject(new w("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new w("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(H){if(!H)return null;if(H.declaredClass)throw Error("JSON object is already hydrated");
const t=new u;t.sourceJSON=H;t.read(H);return t}};f.__decorate([G.property()],r.prototype,"access",void 0);f.__decorate([G.property({type:Date})],r.prototype,"created",void 0);f.__decorate([G.property()],r.prototype,"culture",void 0);f.__decorate([G.property()],r.prototype,"description",void 0);f.__decorate([G.property()],r.prototype,"email",void 0);f.__decorate([G.property()],r.prototype,"favGroupId",void 0);f.__decorate([G.property()],r.prototype,"fullName",void 0);f.__decorate([G.property({type:Date})],
r.prototype,"modified",void 0);f.__decorate([G.property()],r.prototype,"orgId",void 0);f.__decorate([G.property()],r.prototype,"portal",void 0);f.__decorate([G.property()],r.prototype,"preferredView",void 0);f.__decorate([G.property()],r.prototype,"privileges",void 0);f.__decorate([G.property()],r.prototype,"region",void 0);f.__decorate([G.property()],r.prototype,"role",void 0);f.__decorate([G.property()],r.prototype,"roleId",void 0);f.__decorate([G.property()],r.prototype,"sourceJSON",void 0);f.__decorate([G.property()],
r.prototype,"thumbnail",void 0);f.__decorate([G.property({readOnly:!0})],r.prototype,"thumbnailUrl",null);f.__decorate([G.property()],r.prototype,"units",void 0);f.__decorate([G.property({readOnly:!0})],r.prototype,"userContentUrl",null);f.__decorate([G.property({readOnly:!0})],r.prototype,"url",null);f.__decorate([G.property()],r.prototype,"username",void 0);f.__decorate([G.property()],r.prototype,"userType",void 0);return r=u=f.__decorate([e.subclass("esri.portal.PortalUser")],r)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,w,r,G,y,g,n){w=class extends w.JSONSupport{constructor(e){super(e);this.username=this.title=this.portal=this.id=this.created=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new f("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};b.__decorate([r.property({type:Date})],w.prototype,"created",void 0);b.__decorate([r.property()],w.prototype,"id",void 0);b.__decorate([r.property()],w.prototype,
"portal",void 0);b.__decorate([r.property()],w.prototype,"title",void 0);b.__decorate([r.property({readOnly:!0})],w.prototype,"url",null);b.__decorate([r.property()],w.prototype,"username",void 0);return w=b.__decorate([n.subclass("esri.portal.PortalFolder")],w)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p,a,l){var q;const F=new Set("Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;GeoJson;CSV;KML;WFS;WMTS;WMS;Feed".split(";")),N=new Set(["KML","GeoJson","CSV"]);G=q=class extends G.JSONSupportMixin(g){static from(d){return v.ensureClass(q,d)}constructor(d){super(d);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=this.avgRating=this.applicationProxies=
this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const d=this.type,I=this.typeKeywords||[];let R=d;"Feature Service"===d||"Feature Collection"===
d?R=I.includes("Table")?"Table":I.includes("Route Layer")?"Route Layer":I.includes("Markup")?"Markup":"Feature Layer":"Image Service"===d?R=I.includes("Elevation 3D Layer")?"Elevation Layer":I.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===d?R="Scene Layer":"Video Service"===d?R="Video Layer":"Scene Package"===d?R="Scene Layer Package":"Stream Service"===d?R="Feature Layer":"Geoprocessing Service"===d?R=I.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===
d?R="GeoEnrichment Service":"Geocoding Service"===d?R="Locator":"Microsoft Powerpoint"===d?R="Microsoft PowerPoint":"GeoJson"===d?R="GeoJSON":"Globe Service"===d?R="Globe Layer":"Vector Tile Service"===d?R="Tile Layer":"netCDF"===d?R="NetCDF":"Map Service"===d?R=I.includes("Spatiotemporal")||!I.includes("Hosted Service")&&!I.includes("Tiled")||I.includes("Relational")?"Map Image Layer":"Tile Layer":d&&d.toLowerCase().includes("add in")?R=d.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===
d?R="Big Data File Share":"Compact Tile Package"===d?R="Tile Package (tpkx)":"Raster function template"===d?R="Raster Function Template":"OGCFeatureServer"===d?R="OGC Feature Layer":"web mapping application"===d&&I.includes("configurableApp")?R="Instant App":"Insights Page"===d?R="Insights Report":"Excalibur Imagery Project"===d&&(R="Excalibur Project");return R}readExtent(d){return d&&d.length?new H(d[0][0],d[0][1],d[1][0],d[1][1]):null}get iconUrl(){var d=this.type?.toLowerCase()||"";const I=this.typeKeywords||
[];var R=!1,L=!1;let U=!1,S=!1,Q=!1,m=!1;R=L=!1;0<d.indexOf("service")||"feature collection"===d||"kml"===d||"wms"===d||"wmts"===d||"wfs"===d?(R=I.includes("Hosted Service"),"feature service"===d||"feature collection"===d||"kml"===d||"wfs"===d?(L=I.includes("Table"),U=I.includes("Route Layer"),S=I.includes("Markup"),Q=I.includes("Spatiotemporal"),m=I.includes("UtilityNetwork"),d=Q&&L?"spatiotemporaltable":L?"table":U?"routelayer":S?"markup":Q?"spatiotemporal":m?"utilitynetwork":R?"featureshosted":
"features"):"map service"===d||"wms"===d||"wmts"===d?(Q=I.includes("Spatiotemporal"),L=I.includes("Relational"),d=Q||L?"mapimages":R||I.includes("Tiled")||"wmts"===d?"maptiles":"mapimages"):d="scene service"===d?I.includes("Line")?"sceneweblayerline":I.includes("3DObject")?"sceneweblayermultipatch":I.includes("Point")?"sceneweblayerpoint":I.includes("IntegratedMesh")?"sceneweblayermesh":I.includes("PointCloud")?"sceneweblayerpointcloud":I.includes("Polygon")?"sceneweblayerpolygon":I.includes("Building")?
"sceneweblayerbuilding":I.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===d?I.includes("Elevation 3D Layer")?"elevationlayer":I.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===d?"streamlayer":"vector tile service"===d?"vectortile":"datastore catalog service"===d?"datastorecollection":"geocoding service"===d?"geocodeservice":"video service"===d?I.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===d?I.includes("Web Tool")?
"tool":"layers":"geodata service"===d?"geodataservice":"3dtiles service"===d?I.includes("3DObject")?"3dobjecttileslayer":I.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):d="web map"===d||"cityengine web scene"===d?"maps":"web scene"===d?I.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===d&&I.includes("configurableApp")?"instantapps":"web mapping application"===d||"mobile application"===d||"application"===d||"operation view"===
d||"desktop application"===d?"apps":"map document"===d||"map package"===d||"published map"===d||"scene document"===d||"globe document"===d||"basemap package"===d||"mobile basemap package"===d||"mobile map package"===d||"project package"===d||"project template"===d||"pro map"===d||"layout"===d||"layer"===d&&I.includes("ArcGIS Pro")||"explorer map"===d&&I.indexOf("Explorer Document")?"mapsgray":"service definition"===d||"csv"===d||"shapefile"===d||"cad drawing"===d||"geojson"===d||"netcdf"===d||"administrative report"===
d?"datafiles":"360 vr experience"===d?"360vr":"explorer add in"===d||"desktop add in"===d||"windows viewer add in"===d||"windows viewer configuration"===d?"appsgray":"arcgis pro add in"===d||"arcgis pro configuration"===d?"addindesktop":"rule package"===d||"file geodatabase"===d||"sqlite geodatabase"===d||"csv collection"===d||"kml collection"===d||"windows mobile package"===d||"map template"===d||"desktop application template"===d||"gml"===d||"arcpad package"===d||"code sample"===d||"document link"===
d||"earth configuration"===d||"operations dashboard add in"===d||"rules package"===d||"image"===d||"workflow manager package"===d||"explorer map"===d&&I.includes("Explorer Mapping Application")||I.includes("Document")?"datafilesgray":"network analysis service"===d||"geoprocessing service"===d||"geodata service"===d||"geometry service"===d||"geoprocessing package"===d||"locator package"===d||"geoprocessing sample"===d||"workflow manager service"===d?"toolsgray":"layer"===d||"layer package"===d||"explorer layer"===
d?"layersgray":"scene package"===d?"scenepackage":"3dtiles package"===d?"3dtileslayerpackage":"3dtiles service"===d?"3dtileslayer":"mobile scene package"===d?"mobilescenepackage":"tile package"===d||"compact tile package"===d?"tilepackage":"task file"===d?"taskfile":"report template"===d?"report-template":"statistical data collection"===d?"statisticaldatacollection":"insights workbook"===d?"workbook":"insights model"===d?"insightsmodel":"insights page"===d?"insightspage":"insights theme"===d?"insightstheme":
"hub initiative"===d?"hubinitiative":"hub page"===d?"hubpage":"hub site application"===d?"hubsite":"hub event"===d?"hubevent":"hub project"===d?"hubproject":"relational database connection"===d?"relationaldatabaseconnection":"big data file share"===d?"datastorecollection":"image collection"===d?"imagecollection":"desktop style"===d?"desktopstyle":"style"===d?"style":"dashboard"===d?"dashboard":"raster function template"===d?"rasterprocessingtemplate":"vector tile package"===d?"vectortilepackage":
"ortho mapping project"===d?"orthomappingproject":"ortho mapping template"===d?"orthomappingtemplate":"solution"===d?"solutions":"geopackage"===d?"geopackage":"deep learning package"===d?"deeplearningpackage":"real time analytic"===d?"realtimeanalytics":"big data analytic"===d?"bigdataanalytics":"feed"===d?"feed":"excalibur imagery project"===d?"excaliburimageryproject":"notebook"===d?"notebook":"storymap"===d?"storymap":"survey123 add in"===d?"survey123addin":"mission"===d?"mission":"mission report"===
d?"missionreport":"mission template"===d?"missiontemplate":"quickcapture project"===d?"quickcaptureproject":"pro report"===d?"proreport":"pro report template"===d?"proreporttemplate":"urban model"===d?"urbanmodel":"web experience"===d?"experiencebuilder":"web experience template"===d?"webexperiencetemplate":"experience builder widget"===d?"experiencebuilderwidget":"experience builder widget package"===d?"experiencebuilderwidgetpackage":"workflow"===d?"workflow":"kernel gateway connection"===d?"kernelgatewayconnection":
"insights script"===d?"insightsscript":"hub initiative template"===d?"hubinitiativetemplate":"storymap theme"===d?"storymaptheme":"knowledge graph"===d?"knowledgegraph":"knowledge studio project"===d?"knowledgestudio":"native application"===d?"nativeapp":"native application installer"===d?"nativeappinstaller":"link chart"===d?"linkchart":"investigation"===d?"investigation":"ogcfeatureserver"===d?"features":"pro project"===d?"proproject":"insights workbook package"===d?"insightsworkbookpackage":"apache parquet"===
d?"apacheparquet":"notebook code snippets"===d||"notebook code snippet library"===d?"notebookcodesnippets":"suitability model"===d?"suitabilitymodel":"esri classifier definition"===d?"classifierdefinition":"esri classification schema"===d?"classificationschema":"insights data engineering workbook"===d?"dataengineeringworkbook":"insights data engineering model"===d?"dataengineeringmodel":"deep learning studio project"===d?"deeplearningproject":"discussion"===d?"discussion":"allsource project"===d?
"allsourceproject":"api key"===d?"apikey":"data pipeline"===d?"datapipelines":"group layer"===d?(R=I.includes("Map"))?"layergroup2d":"layergroup":"media layer"===d?"onlinemedialayer":"form"===d?I.includes("Survey123")?"survey":"datafilesgray":"maps";return d?w.getAssetUrl("esri/images/portal/"+d+"16.png"):null}get isLayer(){return null!=this.type&&F.has(this.type)}get itemCdnUrl(){return l.toCDNUrl(this.itemUrl)}get itemPageUrl(){const d=this.portal?.itemPageUrl;return d&&this.id?`${d}?id=${this.id}`:
null}get itemUrl(){const d=this.portal?.restUrl;return d&&this.id?`${d}/content/items/${this.id}`:null}get thumbnailUrl(){const d=this.itemUrl,I=this.thumbnail;return d&&I?this.portal?.normalizeUrl(`${d}/info/${I}?f=json`)??null:null}get userItemUrl(){const d=this.portal?.restUrl;if(!d)return null;const I=this.owner||this.portal?.user?.username;return I?`${d}/content/users/${this.ownerFolder?`${I}/${this.ownerFolder}`:I}/items/${this.id}`:null}load(d){const I=this.portal??(this.portal=t.getDefault()),
R=I.load(d).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?I.request(this.itemUrl,{signal:null!=d?d.signal:null,query:{token:this.apiKey}}):{}).then(L=>{this.sourceJSON=L;this.read(L)});this.addResolvingPromise(R);return Promise.resolve(this)}async addRating(d){const I={method:"post",query:{}};d instanceof a&&(d=d.rating);null==d||isNaN(d)||"number"!==typeof d||(I.query.rating=d);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",I);return new a({rating:d,
created:new Date})}clone(){var d={access:this.access,accessInformation:this.accessInformation,applicationProxies:y.clone(this.applicationProxies),avgRating:this.avgRating,categories:y.clone(this.categories),created:y.clone(this.created),culture:this.culture,description:this.description,extent:y.clone(this.extent),groupCategories:y.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:y.clone(this.modified),name:this.name,numComments:this.numComments,
numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:y.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:y.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:y.clone(this.typeKeywords),url:this.url};this.loaded&&(d.loadStatus="loaded");d=(new q({sourceJSON:this.sourceJSON})).set(d);d._set("isOrgItem",this.isOrgItem);
return d}createPostQuery(){const d=this.toJSON();for(var I of["tags","typeKeywords","categories"])d[I]=d[I]?.join(", ");({extent:I}=d);I&&(d.extent=JSON.stringify(I));return d}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(d="json",I){return this.portal.request(this.itemUrl+"/data",{responseType:d,...I,query:{token:this.apiKey}})}async fetchRating(d){d=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...d});return null!=
d.rating?(d.created=new Date(d.created),new a(d)):null}fetchRelatedItems(d,I){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...d,token:this.apiKey},...I},q)}getThumbnailUrl(d){let I=this.thumbnailUrl;I&&d&&(I+=`&w=${d}`);return I}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(d=>{this.sourceJSON=d;this.read(d);return this})}update(d){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const I=d?.data,
R={method:"post"};R.query=this.createPostQuery();for(const L in R.query)null===R.query[L]&&(R.query[L]="");R.query.clearEmptyFields=!0;null!=I&&("string"===typeof I?R.query.text=I:"object"===typeof I&&(R.query.text=JSON.stringify(I)));return this.portal.request(`${this.userItemUrl}/update`,R).then(()=>this.reload())}):Promise.reject(new r("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(d){if(!this.id)throw new r("portal:item-does-not-exist","The item does not exist yet");
await this.load();const {portal:I,itemUrl:R}=this;await I.signIn();const {copyResources:L,folder:U,tags:S,title:Q}=d||{};d={method:"post",query:{copyPrivateResources:"all"===L,folder:"string"===typeof U?U:U?.id,includeResources:!!L,tags:S?.join(","),title:Q}};({itemId:d}=await I.request(`${R}/copy`,d));return new q({id:d,portal:I})}updateThumbnail(d){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const I=d.thumbnail,R=d.filename,L={method:"post"};if("string"===typeof I)n.isDataProtocol(I)?
L.query={data:I}:L.query={url:n.makeAbsolute(I)},null!=R&&(L.query.filename=R);else{const U=new FormData;null!=R?U.append("file",I,R):U.append("file",I);L.body=U}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,L).then(()=>this.reload())}):Promise.reject(new r("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(d={},I){const {fetchResources:R}=await new Promise((L,U)=>b(["./support/resourceUtils"],L,U));return R(this,d,I)}async addResource(d,
I,R){const {addOrUpdateResources:L}=await new Promise((U,S)=>b(["./support/resourceUtils"],U,S));d.portalItem=this;await L(this,[{resource:d,content:I,compress:R?.compress,access:R?.access}],"add",R);return d}async removeResource(d,I){const {removeResource:R}=await new Promise((L,U)=>b(["./support/resourceUtils"],L,U));if(d.portalItem&&d.portalItem.itemUrl!==this.itemUrl)throw new r("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");
return R(this,d,I)}async removeAllResources(d){const {removeAllResources:I}=await new Promise((R,L)=>b(["./support/resourceUtils"],R,L));return I(this,d)}resourceFromPath(d){return new p({portalItem:this,path:d})}toJSON(){var d=this.extent;d={accessInformation:this.accessInformation,categories:y.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:d&&[[d.xmin,d.ymin],[d.xmax,d.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:y.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:y.clone(this.typeKeywords),url:this.url};return y.fixJson(d)}static fromJSON(d){if(!d)return null;if(d.declaredClass)throw Error("JSON object is already hydrated");return new q({sourceJSON:d})}_getPostQuery(){const d=this.toJSON();for(const I in d)"tags"===I&&null!==
d[I]&&(d[I]=d[I].join(", ")),"typeKeywords"===I&&null!==d[I]&&(d[I]=d[I].join(", ")),"extent"===I&&d[I]&&(d[I]=JSON.stringify(d[I]));return d}};f.__decorate([e.property({type:["private","shared","org","public"]})],G.prototype,"access",void 0);f.__decorate([e.property()],G.prototype,"accessInformation",void 0);f.__decorate([e.property({type:String})],G.prototype,"apiKey",void 0);f.__decorate([e.property({json:{read:{source:"appProxies"}}})],G.prototype,"applicationProxies",void 0);f.__decorate([e.property()],
G.prototype,"avgRating",void 0);f.__decorate([e.property()],G.prototype,"categories",void 0);f.__decorate([e.property({type:Date})],G.prototype,"created",void 0);f.__decorate([e.property()],G.prototype,"culture",void 0);f.__decorate([e.property()],G.prototype,"description",void 0);f.__decorate([e.property({readOnly:!0})],G.prototype,"displayName",null);f.__decorate([e.property({type:H})],G.prototype,"extent",void 0);f.__decorate([x.reader("extent")],G.prototype,"readExtent",null);f.__decorate([e.property()],
G.prototype,"groupCategories",void 0);f.__decorate([e.property({readOnly:!0})],G.prototype,"iconUrl",null);f.__decorate([e.property()],G.prototype,"id",void 0);f.__decorate([e.property({readOnly:!0})],G.prototype,"isLayer",null);f.__decorate([e.property({type:Boolean,readOnly:!0})],G.prototype,"isOrgItem",void 0);f.__decorate([e.property()],G.prototype,"itemControl",void 0);f.__decorate([e.property({readOnly:!0})],G.prototype,"itemPageUrl",null);f.__decorate([e.property({readOnly:!0})],G.prototype,
"itemUrl",null);f.__decorate([e.property()],G.prototype,"licenseInfo",void 0);f.__decorate([e.property({type:Date})],G.prototype,"modified",void 0);f.__decorate([e.property()],G.prototype,"name",void 0);f.__decorate([e.property()],G.prototype,"numComments",void 0);f.__decorate([e.property()],G.prototype,"numRatings",void 0);f.__decorate([e.property()],G.prototype,"numViews",void 0);f.__decorate([e.property()],G.prototype,"owner",void 0);f.__decorate([e.property()],G.prototype,"ownerFolder",void 0);
f.__decorate([e.property({type:t})],G.prototype,"portal",void 0);f.__decorate([e.property()],G.prototype,"screenshots",void 0);f.__decorate([e.property()],G.prototype,"size",void 0);f.__decorate([e.property()],G.prototype,"snippet",void 0);f.__decorate([e.property()],G.prototype,"sourceJSON",void 0);f.__decorate([e.property({type:String})],G.prototype,"sourceUrl",void 0);f.__decorate([e.property({type:String})],G.prototype,"spatialReference",void 0);f.__decorate([e.property()],G.prototype,"tags",
void 0);f.__decorate([e.property()],G.prototype,"thumbnail",void 0);f.__decorate([e.property({readOnly:!0})],G.prototype,"thumbnailUrl",null);f.__decorate([e.property()],G.prototype,"title",void 0);f.__decorate([e.property()],G.prototype,"type",void 0);f.__decorate([e.property()],G.prototype,"typeKeywords",void 0);f.__decorate([e.property({type:String,json:{read(d,I){N.has(I.type)&&(I=this.portal?.restUrl,d||=I&&this.id?`${I}/content/items/${this.id}/data`:null);return d}}})],G.prototype,"url",void 0);
f.__decorate([e.property({readOnly:!0})],G.prototype,"userItemUrl",null);return G=q=f.__decorate([u.subclass("esri.portal.PortalItem")],G)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(b,f,w,r,G,y,g,n,e,v,x){w=class extends w{constructor(u){super(u);
this.portalItem=null}normalizeCtorArgs(u){return u?.portalItem&&u.path?{...u,path:this._normalizePath(u.path,u.portalItem)}:u}set path(u){null!=u&&y.isAbsolute(u)?G.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",u)}_castPath(u){return this._normalizePath(u,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:
null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(u="json",H){const t=this.cdnUrl;if(null==t)throw new r("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(t,{responseType:u,query:{token:this.portalItem.apiKey},signal:H?.signal})}async update(u,H){const {addOrUpdateResources:t}=await new Promise((p,a)=>b(["./support/resourceUtils"],p,a));await t(this.portalItem,[{resource:this,
content:u,compress:H?.compress,access:H?.access}],"update",H);return this}hasPath(){return null!=this.path}_normalizePath(u,H){if(null==u)return u;u=u.replace(/^\/+/,"");null!=H&&y.isAbsolute(u)&&(u=y.makeRelative(u,H.itemUrl));return u?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};f.__decorate([g.property()],w.prototype,"portalItem",void 0);f.__decorate([g.property({type:String,value:null})],w.prototype,"path",null);f.__decorate([n.cast("path")],w.prototype,"_castPath",null);f.__decorate([g.property({type:String,
readOnly:!0})],w.prototype,"url",null);f.__decorate([g.property({type:String,readOnly:!0})],w.prototype,"cdnUrl",null);f.__decorate([g.property({type:String,readOnly:!0})],w.prototype,"itemRelativeUrl",null);return w=f.__decorate([x.subclass("esri.portal.PortalItemResource")],w)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,w,r,G,y,g){f=class extends f{constructor(n){super(n);this.rating=this.created=null}};b.__decorate([w.property()],f.prototype,"created",void 0);b.__decorate([w.property()],f.prototype,"rating",void 0);return f=b.__decorate([g.subclass("esri.portal.PortalRating")],f)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils"],function(b,f,w){function r(l,q){var F=q?.url?.path;l&&F&&(l=w.makeAbsolute(l,F,{preserveProtocolRelative:!0}),q.portalItem&&
q.readResourcePaths&&(F=w.makeRelative(l,q.portalItem.itemUrl),null!=F&&p.test(F)&&q.readResourcePaths.push(q.portalItem.resourceFromPath(F).path)));return(l=x(l,q?.portal))&&t.test(l)?u(l):l}function G(l,q,F=b.MarkKeep.YES){l=l&&t.test(l)?H(l):l;if(null==l)return l;!w.isAbsolute(l)&&q?.blockedRelativeUrls&&q.blockedRelativeUrls.push(l);let N=w.makeAbsolute(l);if(q){var d=q.verifyItemRelativeUrls?.rootPath||q.url?.path;if(d){d=x(d,q.portal);const I=x(N,q.portal);N=w.makeRelative(I,d,d);null!=N&&N!==
I&&N!==l&&q.verifyItemRelativeUrls&&q.verifyItemRelativeUrls.writtenUrls.push(N)}}N=v(N,q?.portal);w.isAbsolute(N)&&(N=w.normalize(N));q?.resources&&q?.portalItem&&!w.isAbsolute(N)&&!w.isDataProtocol(N)&&F===b.MarkKeep.YES&&q.resources.toKeep.push({resource:q.portalItem.resourceFromPath(N),compress:!1});return N}function y(l,q,F){return r(l,F)}function g(l,q,F,N){l=G(l,N);void 0!==l&&(q[F]=l)}function n(l){return(l?.match(t)??null)?.[1]??null}function e(l){l=l?.match(t)??null;if(null==l)return null;
l=l[2];const q=l.lastIndexOf("/");if(-1===q){const {path:d,extension:I}=w.splitPathExtension(l);return{prefix:null,filename:d,extension:I}}const {path:F,extension:N}=w.splitPathExtension(l.slice(q+1));return{prefix:l.slice(0,q),filename:F,extension:N}}function v(l,q){return q&&!q.isPortal&&q.urlKey&&q.customBaseUrl?w.changeDomain(l,`${q.urlKey}.${q.customBaseUrl}`,q.portalHostname):l}function x(l,q){if(!q||q.isPortal||!q.urlKey||!q.customBaseUrl)return l;const F=`${q.urlKey}.${q.customBaseUrl}`,N=
w.getAppUrl();return w.hasSameOrigin(N,`${N.scheme}://${F}`)?w.changeDomain(l,q.portalHostname,F):w.changeDomain(l,F,q.portalHostname)}function u(l){if(!l)return l||null;l&&f.id&&!f.id.findCredential(l)&&(l=f.id._normalizeAGOLorgDomain(l),l=l.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),l=l.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),l=l.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return l}function H(l){if(!l)return l||null;
l=l.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");l=l.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(l=l.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&f.id&&!f.id.findCredential(l)&&(l=f.id._normalizeAGOLorgDomain(l));return l}const t=/\/items\/([^\/]+)\/resources\/(.*)/,p=/^\.\/resources\//;b.MarkKeep=void 0;(function(l){l[l.YES=0]="YES";l[l.NO=1]="NO"})(b.MarkKeep||(b.MarkKeep={}));const a=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return b.MarkKeep},ensureMainOnlineDomain:v,fromCDNUrl:H,fromJSON:r,itemIdFromResourceUrl:n,prefixAndFilenameFromResourceUrl:e,read:y,toCDNUrl:u,toJSON:G,write:g},Symbol.toStringTag,{value:"Module"}));b.ensureMainOnlineDomain=v;b.fromCDNUrl=H;b.fromJSON=r;b.itemIdFromResourceUrl=n;b.persistableUrlUtils=a;b.prefixAndFilenameFromResourceUrl=e;b.read=y;b.toCDNUrl=u;b.toJSON=G;b.write=g})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(b,
f,w){b.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",
url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,
opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};b.getBasemapTitle=async function(r){if(r){var G=r.includes("-vector")?r.slice(0,r.indexOf("-vector")):
r.includes("-3d")?r.slice(0,r.indexOf("-3d")):r,y=await w.fetchMessageBundle("esri/t9n/basemaps");return y[r]||y[G]}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(b,f,w,r,G,y,g,n){const e=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
f=class extends f{constructor(v){super(v);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var v=n.getLocale().toLowerCase();switch(v){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}v=n.getLanguage(v);return"pt"===v?"pt-BR":v&&e.has(v)?v:"global"}};
b.__decorate([w.property()],f.prototype,"id",void 0);b.__decorate([w.property()],f.prototype,"language",void 0);b.__decorate([w.property()],f.prototype,"places",void 0);b.__decorate([w.property()],f.prototype,"serviceUrl",void 0);b.__decorate([w.property()],f.prototype,"worldview",void 0);return f=b.__decorate([g.subclass("esri.support.BasemapStyle")],f)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(b,f,w,r,G,y){function g(v,x){"maxScale"in v&&(x.maxScale=G.numberToJSON(v.maxScale)??void 0);"minScale"in v&&(x.minScale=G.numberToJSON(v.minScale)??void 0)}const n=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),e=new Set("csv feature geo-rss geojson group imagery imagery-tile kml map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
b.disableRestrictedWriting=function(v){n.add(v);e.add(v)};b.enableRestrictedWriting=function(v){n.delete(v);e.delete(v)};b.getLayerJSON=function(v,x,u){if(!v.persistenceEnabled)return null;if(!("write"in v&&v.write))return u?.messages&&u.messages.push(new f("layer:unsupported",`Layers (${v.title}, ${v.id}) of type '${v.declaredClass}' cannot be persisted`,{layer:v})),null;if(y.isFeatureCollectionLayer(v)&&!v.isTable)x=v.resourceInfo;else{if(u.restrictedWebMapWriting){var H="basemap"===u.layerContainerType?
n:"operational-layers"===u.layerContainerType?e:null;H=null!=H?H.has(v.type)&&!y.isFeatureCollectionLayer(v):!0}else H=!0;if(H)return x={},v.write(x,u)?x:null}if(null!=x){x=w.clone(x);if(u=x)y.isFeatureCollectionLayer(v)?(H=r.getDeepValue("featureCollection.layers",u)?.[0]?.layerDefinition)&&g(v,H):"group"!==v.type&&g(v,u);if(u&&(u.id=v.id,"blendMode"in v&&(u.blendMode=v.blendMode,"normal"===u.blendMode&&delete u.blendMode),u.opacity=G.numberToJSON(v.opacity)??void 0,u.title=v.title||"Layer",u.visibility=
v.visible,"legendEnabled"in v&&"wmts"!==v.type))if(y.isFeatureCollectionLayer(v)){if(u=u.featureCollection)u.showLegend=v.legendEnabled}else u.showLegend=v.legendEnabled}return x};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(b,f,w){function r(y){return"scene"===y?.type}function G(y){y=y?.type;return"imagery-tile"===y||"tile"===y||"open-street-map"===y||"vector-tile"===y||"web-tile"===
y||"wmts"===y}b.getEffectiveEditingEnabled=function(y){a:if("editingEnabled"in y)switch(y.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var g=!0;break a;default:g=!1}else g=!1;return g?"effectiveEditingEnabled"in y?y.effectiveEditingEnabled:y.editingEnabled:!1};b.getEffectiveLayerCapabilities=function(y){a:if("capabilities"in y)switch(y.type){case "catalog":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var g=
!0;break a;default:g=!1}else g=!1;return g?"effectiveCapabilities"in y?y.effectiveCapabilities:y.capabilities:null};b.getOwningPortalUrl=async function(y,g){var n=f.id?.findServerInfo(y);if(null!=n?.currentVersion)return n.owningSystemUrl||null;n=y.toLowerCase().indexOf("/rest/services");if(-1===n)return null;y=`${y.substring(0,n)}/rest/info`;({data:g}=await w(y,{query:{f:"json"},responseType:"json",signal:null!=g?g.signal:null}));return g?.owningSystemUrl||null};b.getTileMaxtrixSetFromActiveLayer=
function(y){if(y.activeLayer){const g=y.activeLayer.tileMatrixSet;if(g)return g;if(y=y.activeLayer.tileMatrixSets)return y}return null};b.isBaseLayer=function(y){return null!=y?.parent&&"declaredClass"in y.parent&&"esri.Basemap"===y.parent.declaredClass&&y.parent.baseLayers.includes(y)};b.isBasemap3DSupportedLayer=function(y){return G(y)||r(y)};b.isBasemapSupportedTiledLayer=G;b.isFeatureCollectionLayer=function(y){return"feature"===y?.type&&!y.url&&"memory"===y.source?.type};b.isFeatureLayer=function(y){return null!=
y&&"object"===typeof y&&"type"in y&&"feature"===y.type};b.isFeatureServiceLayer=function(y){return"feature"===y?.type&&"feature-layer"===y.source?.type};b.isGraphicsLayer=function(y){return null!=y&&"object"===typeof y&&"type"in y&&"graphics"===y.type};b.isGroupLayer=function(y){return null!=y&&"type"in y&&"group"===y.type};b.isImageryTileLayer=function(y){return"imagery-tile"===y?.type};b.isIntegratedMeshLayer=function(y){return"integrated-mesh"===y||"integrated-mesh-3dtiles"===y};b.isIntegratedMeshOperationalLayer=
function(y){return"IntegratedMeshLayer"===y||"IntegratedMesh3DTilesLayer"===y};b.isKnowledgeGraphLayer=function(y){return null!=y&&"object"===typeof y&&"type"in y&&"knowledge-graph"===y.type&&"layers"in y};b.isLayerWithFeatureLayerSource=function(y){return("feature"===y?.type||"subtype-group"===y?.type)&&"feature-layer"===y.source?.type};b.isLinkChartLayer=function(y){return null!=y&&"object"===typeof y&&"type"in y&&"link-chart"===y.type&&"layers"in y};b.isMapNotesLayer=function(y){return null!=y&&
"object"===typeof y&&"type"in y&&"map-notes"===y.type&&"sublayers"in y};b.isSceneLayer=r;b.isSceneServiceLayer=function(y){y=y?.type;return"building-scene"===y||"integrated-mesh"===y||"point-cloud"===y||"scene"===y};b.isSubtypeGroupLayer=function(y){return null!=y&&"object"===typeof y&&"type"in y&&"subtype-group"===y.type&&"sublayers"in y};b.isTable=function(y){return null!=y&&"object"===typeof y&&"isTable"in y&&!!y.isTable};b.isTiledLayer=function(y){y=y?.type;return"base-tile"===y||"tile"===y||
"elevation"===y||"imagery-tile"===y||"base-elevation"===y||"open-street-map"===y||"wcs"===y||"web-tile"===y||"wmts"===y||"vector-tile"===y};b.isVoxelLayer=function(y){return"voxel"===y?.type};b.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};b.serializeLayerDefinitions=function(y){const g=/[:;]/,n=[];let e=!1;if(y&&(y.forEach((v,x)=>{n.push([x,v]);!e&&g.test(v)&&(e=!0)}),0<
n.length)){if(e){const v={};n.forEach(x=>{v[x[0]]=x[1]});y=JSON.stringify(v)}else{const v=[];n.forEach(x=>{v.push(x[0]+":"+x[1])});y=v.join(";")}return y}return null};b.serializeTimeOptions=function(y){if(y){var g=[];y.forEach((n,e)=>{g.push('"'+e+'":'+JSON.stringify(n))});if(g.length)return"{"+g.join(",")+"}"}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(b,f){b.canInterpolateEffects=function(w,r){const G=
w.length>r.length?w:r;return(w.length>r.length?r:w).every((y,g)=>y.type===G[g].type)};b.effectEquals=function(w,r){w=JSON.stringify(w??null);r=JSON.stringify(r??null);return w===r};b.isEffectFunctions=function(w){return(w=w[0])?"type"in w:!1};b.normalizeEffects=function(w,r){const G=w.length>r.length?w:r;w=w.length>r.length?r:w;for(r=w.length;r<G.length;r++)w.push(f.createEffectWithInitialValues(G[r]))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports",
"../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(b,f,w,r,G){function y(t,p,a){return t+(p-t)*a}function g(t){return Math.round(1E3*w.px2pt(t))/1E3}class n{constructor(t,p,a){this.strength=t;this.radius=p;this.threshold=a;this.type="bloom"}interpolate(t,p,a){this.strength=y(t.strength,p.strength,a);this.radius=y(t.radius,p.radius,a);this.threshold=y(t.threshold,p.threshold,a)}clone(){return new n(this.strength,this.radius,
this.threshold)}toJSON(){return{type:"bloom",radius:g(this.radius),strength:this.strength,threshold:this.threshold}}}class e{constructor(t){this.radius=t;this.type="blur"}interpolate(t,p,a){this.radius=Math.round(y(t.radius,p.radius,a))}clone(){return new e(this.radius)}toJSON(){return{type:"blur",radius:g(this.radius)}}}class v{constructor(t,p){this.type=t;this.amount=p;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||
this._updateMatrix();return this._colorMatrix}interpolate(t,p,a){this.amount=y(t.amount,p.amount,a);this._updateMatrix()}clone(){return new v(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||r.create();switch(this.type){case "brightness":this._colorMatrix=G.brightness(t,this.amount);break;case "contrast":this._colorMatrix=G.contrast(t,this.amount);break;case "grayscale":this._colorMatrix=G.grayscale(t,this.amount);break;case "invert":this._colorMatrix=
G.invert(t,this.amount);break;case "saturate":this._colorMatrix=G.saturate(t,this.amount);break;case "sepia":this._colorMatrix=G.sepia(t,this.amount)}}}class x{constructor(t,p,a,l){this.offsetX=t;this.offsetY=p;this.blurRadius=a;this.color=l;this.type="drop-shadow"}interpolate(t,p,a){this.offsetX=y(t.offsetX,p.offsetX,a);this.offsetY=y(t.offsetY,p.offsetY,a);this.blurRadius=y(t.blurRadius,p.blurRadius,a);this.color[0]=Math.round(y(t.color[0],p.color[0],a));this.color[1]=Math.round(y(t.color[1],p.color[1],
a));this.color[2]=Math.round(y(t.color[2],p.color[2],a));this.color[3]=y(t.color[3],p.color[3],a)}clone(){return new x(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];t[3]*=255;return{type:"drop-shadow",xoffset:g(this.offsetX),yoffset:g(this.offsetY),blurRadius:g(this.blurRadius),color:t}}}class u{constructor(t){this.angle=t;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(t,p,a){this.angle=
y(t.angle,p.angle,a);this._updateMatrix()}clone(){return new u(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||r.create();this._colorMatrix=G.rotateHue(t,this.angle)}}class H{constructor(t){this.amount=t;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(t,p,a){this.amount=y(t.amount,p.amount,a)}clone(){return new H(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}b.BloomEffect=n;b.BlurEffect=e;b.ColorMatrixEffect=
v;b.DropShadowEffect=x;b.HueRotateEffect=u;b.OpacityEffect=H;b.createEffectWithInitialValues=function(t){switch(t.type){case "grayscale":case "sepia":case "invert":return new v(t.type,0);case "saturate":case "brightness":case "contrast":return new v(t.type,1);case "opacity":return new H(1);case "hue-rotate":return new u(0);case "blur":return new e(0);case "drop-shadow":return new x(0,0,0,[...f.getNamedColor("transparent")]);case "bloom":return new n(0,0,1)}};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(b){function f(){const n=new Float32Array(16);n[0]=1;n[5]=1;n[10]=1;n[15]=1;return n}function w(n){const e=new Float32Array(16);e[0]=n[0];e[1]=n[1];e[2]=n[2];e[3]=n[3];e[4]=n[4];e[5]=n[5];e[6]=n[6];e[7]=n[7];e[8]=n[8];e[9]=n[9];e[10]=n[10];e[11]=n[11];e[12]=n[12];e[13]=n[13];e[14]=n[14];e[15]=n[15];return e}function r(n,e,v,x,u,H,t,p,a,l,q,F,N,d,I,R){const L=new Float32Array(16);L[0]=n;L[1]=e;
L[2]=v;L[3]=x;L[4]=u;L[5]=H;L[6]=t;L[7]=p;L[8]=a;L[9]=l;L[10]=q;L[11]=F;L[12]=N;L[13]=d;L[14]=I;L[15]=R;return L}function G(n,e){return new Float32Array(n,e,16)}const y=f(),g=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:y,clone:w,create:f,createView:G,fromValues:r},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=y;b.clone=w;b.create=f;b.createView=G;b.fromValues=r;b.mat4f32=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports",
"../../core/libs/gl-matrix-2/math/mat4"],function(b,f){b.brightness=(w,r)=>{w=f.set(w,r,0,0,0,0,r,0,0,0,0,r,0,0,0,0,1);return f.transpose(w,w)};b.contrast=(w,r)=>{w=f.set(w,r,0,0,.5-.5*r,0,r,0,.5-.5*r,0,0,r,.5-.5*r,0,0,0,1);return f.transpose(w,w)};b.grayscale=(w,r)=>{r=1-r;w=f.set(w,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return f.transpose(w,w)};b.invert=(w,r)=>{const G=1-2*r;w=f.set(w,G,0,0,r,0,
G,0,r,0,0,G,r,0,0,0,1);return f.transpose(w,w)};b.rotateHue=(w,r)=>{const G=Math.sin(r*Math.PI/180);r=Math.cos(r*Math.PI/180);w=f.set(w,.213+.787*r-.213*G,.715-.715*r-.715*G,.072-.072*r+.928*G,0,.213-.213*r+.143*G,.715+.285*r+.14*G,.072-.072*r-.283*G,0,.213-.213*r-.787*G,.715-.715*r+.715*G,.072+.928*r+.072*G,0,0,0,0,1);return f.transpose(w,w)};b.saturate=(w,r)=>{w=f.set(w,.213+.787*r,.715-.715*r,.072-.072*r,0,.213-.213*r,.715+.285*r,.072-.072*r,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,1);return f.transpose(w,
w)};b.sepia=(w,r)=>{r=1-r;w=f.set(w,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return f.transpose(w,w)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(b,f,w){function r(h,E){h[0]=E[0];h[1]=E[1];h[2]=E[2];h[3]=E[3];h[4]=E[4];h[5]=E[5];h[6]=E[6];h[7]=E[7];h[8]=E[8];h[9]=E[9];h[10]=E[10];h[11]=
E[11];h[12]=E[12];h[13]=E[13];h[14]=E[14];h[15]=E[15];return h}function G(h,E,X,aa,ja,A,J,M,W,Z,ba,ea,la,na,wa,ta,va){h[0]=E;h[1]=X;h[2]=aa;h[3]=ja;h[4]=A;h[5]=J;h[6]=M;h[7]=W;h[8]=Z;h[9]=ba;h[10]=ea;h[11]=la;h[12]=na;h[13]=wa;h[14]=ta;h[15]=va;return h}function y(h){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function g(h,E){if(h===E){const X=E[1],aa=E[2],ja=E[3],A=E[6],J=E[7],M=E[11];h[1]=E[4];h[2]=E[8];h[3]=E[12];
h[4]=X;h[6]=E[9];h[7]=E[13];h[8]=aa;h[9]=A;h[11]=E[14];h[12]=ja;h[13]=J;h[14]=M}else h[0]=E[0],h[1]=E[4],h[2]=E[8],h[3]=E[12],h[4]=E[1],h[5]=E[5],h[6]=E[9],h[7]=E[13],h[8]=E[2],h[9]=E[6],h[10]=E[10],h[11]=E[14],h[12]=E[3],h[13]=E[7],h[14]=E[11],h[15]=E[15];return h}function n(h,E){e(h,E)||y(h);return h}function e(h,E){const X=E[0],aa=E[1],ja=E[2],A=E[3],J=E[4],M=E[5],W=E[6],Z=E[7],ba=E[8],ea=E[9],la=E[10],na=E[11],wa=E[12],ta=E[13],va=E[14];E=E[15];const Ea=X*M-aa*J,za=X*W-ja*J,Da=X*Z-A*J,Ca=aa*W-
ja*M,Aa=aa*Z-A*M,Ka=ja*Z-A*W,Ra=ba*ta-ea*wa,Ya=ba*va-la*wa,Wa=ba*E-na*wa,Ma=ea*va-la*ta,Na=ea*E-na*ta,ma=la*E-na*va;let Sa=Ea*ma-za*Na+Da*Ma+Ca*Wa-Aa*Ya+Ka*Ra;if(!Sa)return null;Sa=1/Sa;h[0]=(M*ma-W*Na+Z*Ma)*Sa;h[1]=(ja*Na-aa*ma-A*Ma)*Sa;h[2]=(ta*Ka-va*Aa+E*Ca)*Sa;h[3]=(la*Aa-ea*Ka-na*Ca)*Sa;h[4]=(W*Wa-J*ma-Z*Ya)*Sa;h[5]=(X*ma-ja*Wa+A*Ya)*Sa;h[6]=(va*Da-wa*Ka-E*za)*Sa;h[7]=(ba*Ka-la*Da+na*za)*Sa;h[8]=(J*Na-M*Wa+Z*Ra)*Sa;h[9]=(aa*Wa-X*Na-A*Ra)*Sa;h[10]=(wa*Aa-ta*Da+E*Ea)*Sa;h[11]=(ea*Da-ba*Aa-na*Ea)*
Sa;h[12]=(M*Ya-J*Ma-W*Ra)*Sa;h[13]=(X*Ma-aa*Ya+ja*Ra)*Sa;h[14]=(ta*za-wa*Ca-va*Ea)*Sa;h[15]=(ba*Ca-ea*za+la*Ea)*Sa;return h}function v(h,E){const X=E[0],aa=E[1],ja=E[2],A=E[3],J=E[4],M=E[5],W=E[6],Z=E[7],ba=E[8],ea=E[9],la=E[10],na=E[11],wa=E[12],ta=E[13],va=E[14];E=E[15];h[0]=M*(la*E-na*va)-ea*(W*E-Z*va)+ta*(W*na-Z*la);h[1]=-(aa*(la*E-na*va)-ea*(ja*E-A*va)+ta*(ja*na-A*la));h[2]=aa*(W*E-Z*va)-M*(ja*E-A*va)+ta*(ja*Z-A*W);h[3]=-(aa*(W*na-Z*la)-M*(ja*na-A*la)+ea*(ja*Z-A*W));h[4]=-(J*(la*E-na*va)-ba*
(W*E-Z*va)+wa*(W*na-Z*la));h[5]=X*(la*E-na*va)-ba*(ja*E-A*va)+wa*(ja*na-A*la);h[6]=-(X*(W*E-Z*va)-J*(ja*E-A*va)+wa*(ja*Z-A*W));h[7]=X*(W*na-Z*la)-J*(ja*na-A*la)+ba*(ja*Z-A*W);h[8]=J*(ea*E-na*ta)-ba*(M*E-Z*ta)+wa*(M*na-Z*ea);h[9]=-(X*(ea*E-na*ta)-ba*(aa*E-A*ta)+wa*(aa*na-A*ea));h[10]=X*(M*E-Z*ta)-J*(aa*E-A*ta)+wa*(aa*Z-A*M);h[11]=-(X*(M*na-Z*ea)-J*(aa*na-A*ea)+ba*(aa*Z-A*M));h[12]=-(J*(ea*va-la*ta)-ba*(M*va-W*ta)+wa*(M*la-W*ea));h[13]=X*(ea*va-la*ta)-ba*(aa*va-ja*ta)+wa*(aa*la-ja*ea);h[14]=-(X*(M*
va-W*ta)-J*(aa*va-ja*ta)+wa*(aa*W-ja*M));h[15]=X*(M*la-W*ea)-J*(aa*la-ja*ea)+ba*(aa*W-ja*M);return h}function x(h){const E=h[0],X=h[1],aa=h[2],ja=h[3],A=h[4],J=h[5],M=h[6],W=h[7],Z=h[8],ba=h[9],ea=h[10],la=h[11],na=h[12],wa=h[13],ta=h[14];h=h[15];return(E*J-X*A)*(ea*h-la*ta)-(E*M-aa*A)*(ba*h-la*wa)+(E*W-ja*A)*(ba*ta-ea*wa)+(X*M-aa*J)*(Z*h-la*na)-(X*W-ja*J)*(Z*ta-ea*na)+(aa*W-ja*M)*(Z*wa-ba*na)}function u(h,E,X){const aa=E[0],ja=E[1],A=E[2],J=E[3],M=E[4],W=E[5],Z=E[6],ba=E[7],ea=E[8],la=E[9],na=E[10],
wa=E[11],ta=E[12],va=E[13],Ea=E[14];E=E[15];let za=X[0],Da=X[1],Ca=X[2],Aa=X[3];h[0]=za*aa+Da*M+Ca*ea+Aa*ta;h[1]=za*ja+Da*W+Ca*la+Aa*va;h[2]=za*A+Da*Z+Ca*na+Aa*Ea;h[3]=za*J+Da*ba+Ca*wa+Aa*E;za=X[4];Da=X[5];Ca=X[6];Aa=X[7];h[4]=za*aa+Da*M+Ca*ea+Aa*ta;h[5]=za*ja+Da*W+Ca*la+Aa*va;h[6]=za*A+Da*Z+Ca*na+Aa*Ea;h[7]=za*J+Da*ba+Ca*wa+Aa*E;za=X[8];Da=X[9];Ca=X[10];Aa=X[11];h[8]=za*aa+Da*M+Ca*ea+Aa*ta;h[9]=za*ja+Da*W+Ca*la+Aa*va;h[10]=za*A+Da*Z+Ca*na+Aa*Ea;h[11]=za*J+Da*ba+Ca*wa+Aa*E;za=X[12];Da=X[13];Ca=X[14];
Aa=X[15];h[12]=za*aa+Da*M+Ca*ea+Aa*ta;h[13]=za*ja+Da*W+Ca*la+Aa*va;h[14]=za*A+Da*Z+Ca*na+Aa*Ea;h[15]=za*J+Da*ba+Ca*wa+Aa*E;return h}function H(h,E,X){const aa=X[0],ja=X[1];X=X[2];if(E===h)h[12]=E[0]*aa+E[4]*ja+E[8]*X+E[12],h[13]=E[1]*aa+E[5]*ja+E[9]*X+E[13],h[14]=E[2]*aa+E[6]*ja+E[10]*X+E[14],h[15]=E[3]*aa+E[7]*ja+E[11]*X+E[15];else{const A=E[0],J=E[1],M=E[2],W=E[3],Z=E[4],ba=E[5],ea=E[6],la=E[7],na=E[8],wa=E[9],ta=E[10],va=E[11];h[0]=A;h[1]=J;h[2]=M;h[3]=W;h[4]=Z;h[5]=ba;h[6]=ea;h[7]=la;h[8]=na;
h[9]=wa;h[10]=ta;h[11]=va;h[12]=A*aa+Z*ja+na*X+E[12];h[13]=J*aa+ba*ja+wa*X+E[13];h[14]=M*aa+ea*ja+ta*X+E[14];h[15]=W*aa+la*ja+va*X+E[15]}return h}function t(h,E,X){const aa=X[0],ja=X[1];X=X[2];h[0]=E[0]*aa;h[1]=E[1]*aa;h[2]=E[2]*aa;h[3]=E[3]*aa;h[4]=E[4]*ja;h[5]=E[5]*ja;h[6]=E[6]*ja;h[7]=E[7]*ja;h[8]=E[8]*X;h[9]=E[9]*X;h[10]=E[10]*X;h[11]=E[11]*X;h[12]=E[12];h[13]=E[13];h[14]=E[14];h[15]=E[15];return h}function p(h,E,X,aa){let ja=aa[0],A=aa[1];aa=aa[2];let J=Math.sqrt(ja*ja+A*A+aa*aa);var M=void 0,
W=void 0;let Z=void 0,ba=void 0,ea=void 0,la=void 0,na=void 0,wa=void 0,ta=void 0,va=void 0,Ea=void 0,za=void 0,Da=void 0,Ca=void 0,Aa=void 0,Ka=void 0,Ra=void 0,Ya=void 0,Wa=void 0,Ma=void 0,Na=void 0,ma=void 0;W=M=void 0;if(J<w.getEpsilon())return null;J=1/J;ja*=J;A*=J;aa*=J;M=Math.sin(X);W=Math.cos(X);Z=1-W;ba=E[0];ea=E[1];la=E[2];na=E[3];wa=E[4];ta=E[5];va=E[6];Ea=E[7];za=E[8];Da=E[9];Ca=E[10];Aa=E[11];Ka=ja*ja*Z+W;Ra=A*ja*Z+aa*M;Ya=aa*ja*Z-A*M;Wa=ja*A*Z-aa*M;Ma=A*A*Z+W;Na=aa*A*Z+ja*M;ma=ja*aa*
Z+A*M;M=A*aa*Z-ja*M;W=aa*aa*Z+W;h[0]=ba*Ka+wa*Ra+za*Ya;h[1]=ea*Ka+ta*Ra+Da*Ya;h[2]=la*Ka+va*Ra+Ca*Ya;h[3]=na*Ka+Ea*Ra+Aa*Ya;h[4]=ba*Wa+wa*Ma+za*Na;h[5]=ea*Wa+ta*Ma+Da*Na;h[6]=la*Wa+va*Ma+Ca*Na;h[7]=na*Wa+Ea*Ma+Aa*Na;h[8]=ba*ma+wa*M+za*W;h[9]=ea*ma+ta*M+Da*W;h[10]=la*ma+va*M+Ca*W;h[11]=na*ma+Ea*M+Aa*W;E!==h&&(h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);return h}function a(h,E,X){const aa=Math.sin(X);X=Math.cos(X);const ja=E[4],A=E[5],J=E[6],M=E[7],W=E[8],Z=E[9],ba=E[10],ea=E[11];E!==h&&(h[0]=
E[0],h[1]=E[1],h[2]=E[2],h[3]=E[3],h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);h[4]=ja*X+W*aa;h[5]=A*X+Z*aa;h[6]=J*X+ba*aa;h[7]=M*X+ea*aa;h[8]=W*X-ja*aa;h[9]=Z*X-A*aa;h[10]=ba*X-J*aa;h[11]=ea*X-M*aa;return h}function l(h,E,X){const aa=Math.sin(X);X=Math.cos(X);const ja=E[0],A=E[1],J=E[2],M=E[3],W=E[8],Z=E[9],ba=E[10],ea=E[11];E!==h&&(h[4]=E[4],h[5]=E[5],h[6]=E[6],h[7]=E[7],h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);h[0]=ja*X-W*aa;h[1]=A*X-Z*aa;h[2]=J*X-ba*aa;h[3]=M*X-ea*aa;h[8]=ja*aa+W*
X;h[9]=A*aa+Z*X;h[10]=J*aa+ba*X;h[11]=M*aa+ea*X;return h}function q(h,E,X){const aa=Math.sin(X);X=Math.cos(X);const ja=E[0],A=E[1],J=E[2],M=E[3],W=E[4],Z=E[5],ba=E[6],ea=E[7];E!==h&&(h[8]=E[8],h[9]=E[9],h[10]=E[10],h[11]=E[11],h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);h[0]=ja*X+W*aa;h[1]=A*X+Z*aa;h[2]=J*X+ba*aa;h[3]=M*X+ea*aa;h[4]=W*X-ja*aa;h[5]=Z*X-A*aa;h[6]=ba*X-J*aa;h[7]=ea*X-M*aa;return h}function F(h,E){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=
0;h[12]=E[0];h[13]=E[1];h[14]=E[2];h[15]=1;return h}function N(h,E){h[0]=E[0];h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=E[1];h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=E[2];h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function d(h,E,X){if(0===E)return y(h);let aa=X[0],ja=X[1];X=X[2];let A=Math.sqrt(aa*aa+ja*ja+X*X),J=void 0,M=void 0,W=void 0;if(A<w.getEpsilon())return null;A=1/A;aa*=A;ja*=A;X*=A;J=Math.sin(E);M=Math.cos(E);W=1-M;h[0]=aa*aa*W+M;h[1]=ja*aa*W+X*J;h[2]=X*aa*W-ja*J;h[3]=0;h[4]=aa*ja*W-X*J;h[5]=ja*ja*
W+M;h[6]=X*ja*W+aa*J;h[7]=0;h[8]=aa*X*W+ja*J;h[9]=ja*X*W-aa*J;h[10]=X*X*W+M;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function I(h,E){const X=Math.sin(E);E=Math.cos(E);h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=E;h[6]=X;h[7]=0;h[8]=0;h[9]=-X;h[10]=E;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function R(h,E){const X=Math.sin(E);E=Math.cos(E);h[0]=E;h[1]=0;h[2]=-X;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=X;h[9]=0;h[10]=E;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function L(h,E){const X=
Math.sin(E);E=Math.cos(E);h[0]=E;h[1]=X;h[2]=0;h[3]=0;h[4]=-X;h[5]=E;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function U(h,E,X){var aa=E[0],ja=E[1],A=E[2],J=E[3],M=aa+aa,W=ja+ja;const Z=A+A;E=aa*M;const ba=aa*W;aa*=Z;const ea=ja*W;ja*=Z;A*=Z;M*=J;W*=J;J*=Z;h[0]=1-(ea+A);h[1]=ba+J;h[2]=aa-W;h[3]=0;h[4]=ba-J;h[5]=1-(E+A);h[6]=ja+M;h[7]=0;h[8]=aa+W;h[9]=ja-M;h[10]=1-(E+ea);h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function S(h,E){const X=Ta,
aa=-E[0],ja=-E[1],A=-E[2],J=E[3],M=E[4],W=E[5],Z=E[6],ba=E[7],ea=aa*aa+ja*ja+A*A+J*J;0<ea?(X[0]=2*(M*J+ba*aa+W*A-Z*ja)/ea,X[1]=2*(W*J+ba*ja+Z*aa-M*A)/ea,X[2]=2*(Z*J+ba*A+M*ja-W*aa)/ea):(X[0]=2*(M*J+ba*aa+W*A-Z*ja),X[1]=2*(W*J+ba*ja+Z*aa-M*A),X[2]=2*(Z*J+ba*A+M*ja-W*aa));U(h,E,X);return h}function Q(h,E){h[0]=E[12];h[1]=E[13];h[2]=E[14];return h}function m(h,E){const X=E[0],aa=E[1],ja=E[2],A=E[4],J=E[5],M=E[6],W=E[8],Z=E[9];E=E[10];h[0]=Math.sqrt(X*X+aa*aa+ja*ja);h[1]=Math.sqrt(A*A+J*J+M*M);h[2]=Math.sqrt(W*
W+Z*Z+E*E);return h}function C(h,E){const X=E[0]+E[5]+E[10];let aa=0;0<X?(aa=2*Math.sqrt(X+1),h[3]=.25*aa,h[0]=(E[6]-E[9])/aa,h[1]=(E[8]-E[2])/aa,h[2]=(E[1]-E[4])/aa):E[0]>E[5]&&E[0]>E[10]?(aa=2*Math.sqrt(1+E[0]-E[5]-E[10]),h[3]=(E[6]-E[9])/aa,h[0]=.25*aa,h[1]=(E[1]+E[4])/aa,h[2]=(E[8]+E[2])/aa):E[5]>E[10]?(aa=2*Math.sqrt(1+E[5]-E[0]-E[10]),h[3]=(E[8]-E[2])/aa,h[0]=(E[1]+E[4])/aa,h[1]=.25*aa,h[2]=(E[6]+E[9])/aa):(aa=2*Math.sqrt(1+E[10]-E[0]-E[5]),h[3]=(E[1]-E[4])/aa,h[0]=(E[8]+E[2])/aa,h[1]=(E[6]+
E[9])/aa,h[2]=.25*aa);return h}function z(h,E,X,aa){var ja=E[0],A=E[1],J=E[2],M=E[3],W=ja+ja,Z=A+A,ba=J+J;E=ja*W;const ea=ja*Z;ja*=ba;const la=A*Z;A*=ba;J*=ba;W*=M;Z*=M;M*=ba;ba=aa[0];const na=aa[1];aa=aa[2];h[0]=(1-(la+J))*ba;h[1]=(ea+M)*ba;h[2]=(ja-Z)*ba;h[3]=0;h[4]=(ea-M)*na;h[5]=(1-(E+J))*na;h[6]=(A+W)*na;h[7]=0;h[8]=(ja+Z)*aa;h[9]=(A-W)*aa;h[10]=(1-(E+la))*aa;h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function B(h,E,X,aa,ja){var A=E[0],J=E[1],M=E[2],W=E[3],Z=A+A,ba=J+J,ea=M+M;
E=A*Z;var la=A*ba,na=A*ea;A=J*ba;J*=ea;var wa=M*ea;M=W*Z;ba*=W;const ta=W*ea;var va=aa[0],Ea=aa[1];ea=aa[2];aa=ja[0];W=ja[1];ja=ja[2];Z=(1-(A+wa))*va;const za=(la+ta)*va;va*=na-ba;la=(la-ta)*Ea;wa=(1-(E+wa))*Ea;Ea*=J+M;na=(na+ba)*ea;J=(J-M)*ea;E=(1-(E+A))*ea;h[0]=Z;h[1]=za;h[2]=va;h[3]=0;h[4]=la;h[5]=wa;h[6]=Ea;h[7]=0;h[8]=na;h[9]=J;h[10]=E;h[11]=0;h[12]=X[0]+aa-(Z*aa+la*W+na*ja);h[13]=X[1]+W-(za*aa+wa*W+J*ja);h[14]=X[2]+ja-(va*aa+Ea*W+E*ja);h[15]=1;return h}function P(h,E){var X=E[0],aa=E[1],ja=
E[2];E=E[3];var A=X+X,J=aa+aa;const M=ja+ja;X*=A;const W=aa*A;aa*=J;const Z=ja*A,ba=ja*J;ja*=M;A*=E;J*=E;E*=M;h[0]=1-aa-ja;h[1]=W+E;h[2]=Z-J;h[3]=0;h[4]=W-E;h[5]=1-X-ja;h[6]=ba+A;h[7]=0;h[8]=Z+J;h[9]=ba-A;h[10]=1-X-aa;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function K(h,E,X,aa,ja,A,J){const M=1/(X-E),W=1/(ja-aa),Z=1/(A-J);h[0]=2*A*M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*A*W;h[6]=0;h[7]=0;h[8]=(X+E)*M;h[9]=(ja+aa)*W;h[10]=(J+A)*Z;h[11]=-1;h[12]=0;h[13]=0;h[14]=J*A*2*Z;h[15]=0;return h}function T(h,
E,X,aa,ja){E=1/Math.tan(E/2);let A=void 0;h[0]=E/X;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=E;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[11]=-1;h[12]=0;h[13]=0;h[15]=0;null!=ja&&Infinity!==ja?(A=1/(aa-ja),h[10]=(ja+aa)*A,h[14]=2*ja*aa*A):(h[10]=-1,h[14]=-2*aa);return h}function Y(h,E,X,aa){const ja=Math.tan(E.upDegrees*Math.PI/180),A=Math.tan(E.downDegrees*Math.PI/180),J=Math.tan(E.leftDegrees*Math.PI/180);E=Math.tan(E.rightDegrees*Math.PI/180);const M=2/(J+E),W=2/(ja+A);h[0]=M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=W;h[6]=
0;h[7]=0;h[8]=-((J-E)*M*.5);h[9]=(ja-A)*W*.5;h[10]=aa/(X-aa);h[11]=-1;h[12]=0;h[13]=0;h[14]=aa*X/(X-aa);h[15]=0;return h}function fa(h,E,X,aa,ja,A,J){const M=1/(E-X),W=1/(aa-ja),Z=1/(A-J);h[0]=-2*M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*W;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*Z;h[11]=0;h[12]=(E+X)*M;h[13]=(ja+aa)*W;h[14]=(J+A)*Z;h[15]=1;return h}function oa(h,E,X,aa){const ja=E[0],A=E[1];E=E[2];let J=ja-X[0],M=A-X[1];X=E-X[2];var W=w.getEpsilon();if(Math.abs(J)<W&&Math.abs(M)<W&&Math.abs(X)<W)y(h);else{var Z=
1/Math.sqrt(J*J+M*M+X*X);J*=Z;M*=Z;X*=Z;Z=aa[0];var ba=aa[1];W=aa[2];aa=ba*X-W*M;W=W*J-Z*X;ba=Z*M-ba*J;(Z=Math.sqrt(aa*aa+W*W+ba*ba))?(Z=1/Z,aa*=Z,W*=Z,ba*=Z):ba=W=aa=0;var ea=M*ba-X*W,la=X*aa-J*ba,na=J*W-M*aa;(Z=Math.sqrt(ea*ea+la*la+na*na))?(Z=1/Z,ea*=Z,la*=Z,na*=Z):na=la=ea=0;h[0]=aa;h[1]=ea;h[2]=J;h[3]=0;h[4]=W;h[5]=la;h[6]=M;h[7]=0;h[8]=ba;h[9]=na;h[10]=X;h[11]=0;h[12]=-(aa*ja+W*A+ba*E);h[13]=-(ea*ja+la*A+na*E);h[14]=-(J*ja+M*A+X*E);h[15]=1}}function sa(h,E,X,aa){const ja=E[0],A=E[1];E=E[2];
var J=aa[0];const M=aa[1];var W=aa[2];aa=ja-X[0];let Z=A-X[1];X=E-X[2];let ba=aa*aa+Z*Z+X*X;0<ba&&(ba=1/Math.sqrt(ba),aa*=ba,Z*=ba,X*=ba);let ea=M*X-W*Z;W=W*aa-J*X;J=J*Z-M*aa;ba=ea*ea+W*W+J*J;0<ba&&(ba=1/Math.sqrt(ba),ea*=ba,W*=ba,J*=ba);h[0]=ea;h[1]=W;h[2]=J;h[3]=0;h[4]=Z*J-X*W;h[5]=X*ea-aa*J;h[6]=aa*W-Z*ea;h[7]=0;h[8]=aa;h[9]=Z;h[10]=X;h[11]=0;h[12]=ja;h[13]=A;h[14]=E;h[15]=1;return h}function ca(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+
", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function ka(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+h[6]**2+h[7]**2+h[8]**2+h[9]**2+h[10]**2+h[11]**2+h[12]**2+h[13]**2+h[14]**2+h[15]**2)}function ia(h,E,X){h[0]=E[0]+X[0];h[1]=E[1]+X[1];h[2]=E[2]+X[2];h[3]=E[3]+X[3];h[4]=E[4]+X[4];h[5]=E[5]+X[5];h[6]=E[6]+X[6];h[7]=E[7]+X[7];h[8]=E[8]+X[8];h[9]=E[9]+X[9];h[10]=E[10]+X[10];h[11]=E[11]+X[11];h[12]=E[12]+X[12];h[13]=E[13]+X[13];h[14]=E[14]+X[14];
h[15]=E[15]+X[15];return h}function qa(h,E,X){h[0]=E[0]-X[0];h[1]=E[1]-X[1];h[2]=E[2]-X[2];h[3]=E[3]-X[3];h[4]=E[4]-X[4];h[5]=E[5]-X[5];h[6]=E[6]-X[6];h[7]=E[7]-X[7];h[8]=E[8]-X[8];h[9]=E[9]-X[9];h[10]=E[10]-X[10];h[11]=E[11]-X[11];h[12]=E[12]-X[12];h[13]=E[13]-X[13];h[14]=E[14]-X[14];h[15]=E[15]-X[15];return h}function ra(h,E,X){h[0]=E[0]*X;h[1]=E[1]*X;h[2]=E[2]*X;h[3]=E[3]*X;h[4]=E[4]*X;h[5]=E[5]*X;h[6]=E[6]*X;h[7]=E[7]*X;h[8]=E[8]*X;h[9]=E[9]*X;h[10]=E[10]*X;h[11]=E[11]*X;h[12]=E[12]*X;h[13]=E[13]*
X;h[14]=E[14]*X;h[15]=E[15]*X;return h}function xa(h,E,X,aa){h[0]=E[0]+X[0]*aa;h[1]=E[1]+X[1]*aa;h[2]=E[2]+X[2]*aa;h[3]=E[3]+X[3]*aa;h[4]=E[4]+X[4]*aa;h[5]=E[5]+X[5]*aa;h[6]=E[6]+X[6]*aa;h[7]=E[7]+X[7]*aa;h[8]=E[8]+X[8]*aa;h[9]=E[9]+X[9]*aa;h[10]=E[10]+X[10]*aa;h[11]=E[11]+X[11]*aa;h[12]=E[12]+X[12]*aa;h[13]=E[13]+X[13]*aa;h[14]=E[14]+X[14]*aa;h[15]=E[15]+X[15]*aa;return h}function ya(h,E){return h[0]===E[0]&&h[1]===E[1]&&h[2]===E[2]&&h[3]===E[3]&&h[4]===E[4]&&h[5]===E[5]&&h[6]===E[6]&&h[7]===E[7]&&
h[8]===E[8]&&h[9]===E[9]&&h[10]===E[10]&&h[11]===E[11]&&h[12]===E[12]&&h[13]===E[13]&&h[14]===E[14]&&h[15]===E[15]}function Ha(h,E){if(h===E)return!0;const X=h[0],aa=h[1],ja=h[2],A=h[3],J=h[4],M=h[5],W=h[6],Z=h[7],ba=h[8],ea=h[9],la=h[10],na=h[11],wa=h[12],ta=h[13],va=h[14];h=h[15];const Ea=E[0],za=E[1],Da=E[2],Ca=E[3],Aa=E[4],Ka=E[5],Ra=E[6],Ya=E[7],Wa=E[8],Ma=E[9],Na=E[10],ma=E[11],Sa=E[12],Nb=E[13],nb=E[14];E=E[15];const c=w.getEpsilon();return Math.abs(X-Ea)<=c*Math.max(1,Math.abs(X),Math.abs(Ea))&&
Math.abs(aa-za)<=c*Math.max(1,Math.abs(aa),Math.abs(za))&&Math.abs(ja-Da)<=c*Math.max(1,Math.abs(ja),Math.abs(Da))&&Math.abs(A-Ca)<=c*Math.max(1,Math.abs(A),Math.abs(Ca))&&Math.abs(J-Aa)<=c*Math.max(1,Math.abs(J),Math.abs(Aa))&&Math.abs(M-Ka)<=c*Math.max(1,Math.abs(M),Math.abs(Ka))&&Math.abs(W-Ra)<=c*Math.max(1,Math.abs(W),Math.abs(Ra))&&Math.abs(Z-Ya)<=c*Math.max(1,Math.abs(Z),Math.abs(Ya))&&Math.abs(ba-Wa)<=c*Math.max(1,Math.abs(ba),Math.abs(Wa))&&Math.abs(ea-Ma)<=c*Math.max(1,Math.abs(ea),Math.abs(Ma))&&
Math.abs(la-Na)<=c*Math.max(1,Math.abs(la),Math.abs(Na))&&Math.abs(na-ma)<=c*Math.max(1,Math.abs(na),Math.abs(ma))&&Math.abs(wa-Sa)<=c*Math.max(1,Math.abs(wa),Math.abs(Sa))&&Math.abs(ta-Nb)<=c*Math.max(1,Math.abs(ta),Math.abs(Nb))&&Math.abs(va-nb)<=c*Math.max(1,Math.abs(va),Math.abs(nb))&&Math.abs(h-E)<=c*Math.max(1,Math.abs(h),Math.abs(E))}function Fa(h){const E=w.getEpsilon(),X=h[0],aa=h[1],ja=h[2],A=h[4],J=h[5],M=h[6],W=h[8],Z=h[9];h=h[10];return Math.abs(1-(X*X+A*A+W*W))<=E&&Math.abs(1-(aa*aa+
J*J+Z*Z))<=E&&Math.abs(1-(ja*ja+M*M+h*h))<=E}function La(h){return 1===h[0]&&0===h[1]&&0===h[2]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[8]&&0===h[9]&&1===h[10]}const Ta=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:ia,adjoint:v,copy:r,determinant:x,equals:Ha,exactEquals:ya,frob:ka,fromQuat:P,fromQuat2:S,fromRotation:d,fromRotationTranslation:U,fromRotationTranslationScale:z,fromRotationTranslationScaleOrigin:B,fromScaling:N,fromTranslation:F,fromXRotation:I,fromYRotation:R,fromZRotation:L,
frustum:K,getRotation:C,getScaling:m,getTranslation:Q,hasIdentityRotation:La,identity:y,invert:e,invertOrIdentity:n,isOrthoNormal:Fa,lookAt:oa,mul:u,multiply:u,multiplyScalar:ra,multiplyScalarAndAdd:xa,ortho:fa,perspective:T,perspectiveFromFieldOfView:Y,rotate:p,rotateX:a,rotateY:l,rotateZ:q,scale:t,set:G,str:ca,sub:qa,subtract:qa,targetTo:sa,translate:H,transpose:g},Symbol.toStringTag,{value:"Module"}));b.add=ia;b.adjoint=v;b.copy=r;b.determinant=x;b.equals=Ha;b.exactEquals=ya;b.frob=ka;b.fromQuat=
P;b.fromQuat2=S;b.fromRotation=d;b.fromRotationTranslation=U;b.fromRotationTranslationScale=z;b.fromRotationTranslationScaleOrigin=B;b.fromScaling=N;b.fromTranslation=F;b.fromXRotation=I;b.fromYRotation=R;b.fromZRotation=L;b.frustum=K;b.getRotation=C;b.getScaling=m;b.getTranslation=Q;b.hasIdentityRotation=La;b.identity=y;b.invert=e;b.invertOrIdentity=n;b.isOrthoNormal=Fa;b.lookAt=oa;b.mat4=f;b.mul=u;b.multiply=u;b.multiplyScalar=ra;b.multiplyScalarAndAdd=xa;b.ortho=fa;b.perspective=T;b.perspectiveFromFieldOfView=
Y;b.rotate=p;b.rotateX=a;b.rotateY=l;b.rotateZ=q;b.scale=t;b.set=G;b.str=ca;b.sub=qa;b.subtract=qa;b.targetTo=sa;b.translate=H;b.transpose=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(b,f,w){function r(z){return null==z||"string"===typeof z&&!z?"\x3cNull\x3e":z}function G(z){const B=null!=z.minValue||null!=z.maxValue,P=!!z.sqlExpression&&
z.supportsSQLExpression;return!(null!=z.normalizationField||null!=z.normalizationType)&&!B&&!P}function y(z){const {values:B,useSampleStdDev:P,supportsNullCount:K}=z;var T=Number.POSITIVE_INFINITY;let Y=Number.NEGATIVE_INFINITY,fa=null,oa=null;var sa=null;let ca=null,ka=0;const ia=null==z.minValue?-Infinity:z.minValue,qa=null==z.maxValue?Infinity:z.maxValue;for(const ra of B)Number.isFinite(ra)?ra>=ia&&ra<=qa&&(fa=null===fa?ra:fa+ra,T=Math.min(T,ra),Y=Math.max(Y,ra),ka++):"string"===typeof ra&&ka++;
if(ka&&null!=fa){oa=fa/ka;sa=0;for(const ra of B)Number.isFinite(ra)&&ra>=ia&&ra<=qa&&(sa+=(ra-oa)**2);ca=P?1<ka?sa/(ka-1):0:0<ka?sa/ka:0;sa=Math.sqrt(ca)}else Y=T=null;T={avg:oa,count:ka,max:Y,min:T,stddev:sa,sum:fa,variance:ca};K&&(T.nullcount=B.length-ka);z.percentileParams&&(T.median=g(B,z.percentileParams));return T}function g(z,B){const {fieldType:P,value:K,orderBy:T,isDiscrete:Y}=B,fa=n(P,"desc"===T);z=[...z].filter(ka=>null!=ka).sort((ka,ia)=>fa(ka,ia));if(0===z.length)return null;if(0>=K)return z[0];
if(1<=K)return z[z.length-1];var oa=(z.length-1)*K,sa=Math.floor(oa);B=sa+1;oa%=1;sa=z[sa];const ca=z[B];return B>=z.length||Y||"string"===typeof sa||"string"===typeof ca?sa:sa*(1-oa)+ca*oa}function n(z,B){if(z){if(F.has(z))return B?m:C;if(N.has(z))return e(B,!1);if("esriFieldTypeTimestampOffset"===z)return B?U:L;const Y=e(B,!0);if("esriFieldTypeString"===z)return Y;if("esriFieldTypeGUID"===z||"esriFieldTypeGlobalID"===z)return(fa,oa)=>Y(v(fa),v(oa))}const P=B?1:-1,K=B?m:C,T=e(B,!0);return(Y,fa)=>
"number"===typeof Y&&"number"===typeof fa?K(Y,fa):"string"===typeof Y&&"string"===typeof fa?T(Y,fa):P}function e(z,B){if(!B)return z?Q:S;const P=z?I:R;return z?(K,T)=>{const Y=P(K,T);if(null!=Y)return Y;K=K.toUpperCase();T=T.toUpperCase();return K>T?-1:K<T?1:0}:(K,T)=>{const Y=P(K,T);if(null!=Y)return Y;K=K.toUpperCase();T=T.toUpperCase();return K<T?-1:K>T?1:0}}function v(z){return z.substr(24,12)+z.substr(19,4)+z.substr(16,2)+z.substr(14,2)+z.substr(11,2)+z.substr(9,2)+z.substr(6,2)+z.substr(4,2)+
z.substr(2,2)+z.substr(0,2)}function x(z){return"coded-value"!==z?.type?[]:z.codedValues.map(B=>B.code)}function u(z,B){const P=t({field:B.field,normalizationType:B.normalizationType,normalizationField:B.normalizationField,classificationMethod:B.classificationMethod,standardDeviationInterval:B.standardDeviationInterval,breakCount:B.numClasses||5});z=H(z,B.minValue,B.maxValue);return w.createGenerateRendererClassBreaks({definition:P,values:z,normalizationTotal:B.normalizationTotal})}function H(z,B,
P){const K=null==B?-Infinity:B,T=null==P?Infinity:P;return z.filter(Y=>Number.isFinite(Y)&&Y>=K&&Y<=T)}function t(z){const {breakCount:B,field:P,normalizationField:K,normalizationType:T}=z,Y=z.classificationMethod||"equal-interval";return new f({breakCount:B,classificationField:P,classificationMethod:Y,normalizationField:"field"===T?K:void 0,normalizationType:T,standardDeviationInterval:"standard-deviation"===Y?z.standardDeviationInterval||1:void 0})}function p(z,B){const {field:P,classificationMethod:K,
standardDeviationInterval:T,normalizationType:Y,normalizationField:fa,normalizationTotal:oa,minValue:sa,maxValue:ca}=B,ka=B.numBins||10;let ia=B=null,qa=null;K&&"equal-interval"!==K||Y?({classBreaks:z}=u(z,{field:P,normalizationType:Y,normalizationField:fa,normalizationTotal:oa,classificationMethod:K,standardDeviationInterval:T,minValue:sa,maxValue:ca,numClasses:ka}),B=z[0].minValue,ia=z[z.length-1].maxValue,qa=z.map(ra=>[ra.minValue,ra.maxValue])):(null!=sa&&null!=ca?(B=sa,ia=ca):(z=y({values:z,
minValue:sa,maxValue:ca,useSampleStdDev:!Y,supportsNullCount:G({normalizationType:Y,normalizationField:fa,minValue:sa,maxValue:ca})}),B=z.min??null,ia=z.max??null),qa=l(B??0,ia??0,ka));return{min:B,max:ia,intervals:qa}}function a(z,B){let P=-1;for(let K=z.length-1;0<=K;K--)if(B>=z[K][0]){P=K;break}return P}function l(z,B,P){const K=(B-z)/P,T=[];let Y;for(let fa=1;fa<=P;fa++)Y=z+K,Y=Number(Y.toFixed(16)),T.push([z,fa===P?B:Y]),z=Y;return T}const q=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,F=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),
N=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),d="min max avg stddev count sum variance nullcount median".split(" "),I=(z,B)=>null==z?null==B?0:1:null==B?-1:null,R=(z,B)=>null==z?null==B?0:-1:null==B?1:null,L=(z,B)=>R(z,B)??(z===B?0:(new Date(z)).getTime()-(new Date(B)).getTime()),U=(z,B)=>I(z,B)??(z===B?0:(new Date(B)).getTime()-(new Date(z)).getTime()),S=(z,B)=>R(z,B)??(z===B?0:z<B?-1:1),Q=(z,B)=>I(z,B)??(z===B?0:z<B?1:-1),m=(z,B)=>I(z,B)??B-z,C=(z,B)=>R(z,B)??z-B;b.calculateClassBreaks=
u;b.calculateHistogram=function(z,B){var P=p(z,B);if(null==P.min&&null==P.max)return{bins:[],minValue:P.min,maxValue:P.max,normalizationTotal:B.normalizationTotal};const K=P.intervals,T=P.min??0;P=P.max??0;const Y=K.map((fa,oa)=>({minValue:K[oa][0],maxValue:K[oa][1],count:0}));for(const fa of z)null!=fa&&fa>=T&&fa<=P&&(z=a(K,fa),-1<z&&Y[z].count++);return{bins:Y,minValue:T,maxValue:P,normalizationTotal:B.normalizationTotal}};b.calculatePercentile=g;b.calculateStatistics=y;b.calculateStringStatistics=
function(z){const B=z.returnDistinct?[...(new Set(z.values))]:z.values;var P=B.filter(T=>null!=T).sort();const K=P.length;P={count:K,min:P[0],max:P[K-1]};z.supportsNullCount&&(P.nullcount=B.length-K);z.percentileParams&&(P.median=g(B,z.percentileParams));return P};b.calculateUniqueValuesCount=function(z){const B={};for(let P of z){if(null==P||"string"===typeof P&&""===P.trim())P=null;null==B[P]?B[P]={count:1,data:P}:B[P].count++}return{count:B}};b.createClassBreaksDefinition=t;b.createUVResult=function(z,
B,P,K){z=z.count;const T=[];if(P&&B){P=[];var Y=x(B[0]);for(const fa of Y)if(B[1]){Y=x(B[1]);for(const oa of Y)if(B[2]){Y=x(B[2]);for(const sa of Y)P.push(`${r(fa)}${K}${r(oa)}${K}${r(sa)}`)}else P.push(`${r(fa)}${K}${r(oa)}`)}else P.push(fa);for(const fa of P)z.hasOwnProperty(fa)||(z[fa]={data:fa,count:0})}for(const fa in z)B=z[fa],T.push({value:B.data,count:B.count,label:B.label});return{uniqueValueInfos:T}};b.getAttributeComparator=n;b.getEqualIntervalBins=l;b.getNormalizedValue=function(z,B,P,
K){let T=null;switch(B){case "log":0!==z&&(T=Math.log(z)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(K)&&0!==K&&(T=z/K*100);break;case "field":Number.isFinite(P)&&0!==P&&(T=z/P);break;case "natural-log":0<z&&(T=Math.log(z));break;case "square-root":0<z&&(T=z**.5)}return T};b.isNullCountSupported=G;b.processNullValue=r;b.processSummaryStatisticsResult=function(z,B){let P;for(P in z)d.includes(P)&&(Number.isFinite(z[P])||(z[P]=null));if(!B)return z;["avg","stddev","variance"].forEach(K=>
{null!=z[K]&&(z[K]=Math.ceil(z[K]??0))});return z};b.resolveCBResult=function(z,B){let P=z.classBreaks;const K=P[0]?.minValue,T=P[P.length-1]?.maxValue,Y="standard-deviation"===B;P=P.map(fa=>{const oa=fa.label;fa={minValue:fa.minValue,maxValue:fa.maxValue,label:oa};if(Y&&oa){const sa=oa.match(q)?.map(ca=>+ca.trim())??[];2===sa.length?(fa.minStdDev=sa[0],fa.maxStdDev=sa[1],0>sa[0]&&0<sa[1]&&(fa.hasAvg=!0)):1===sa.length&&(oa.includes("\x3c")?(fa.minStdDev=null,fa.maxStdDev=sa[0]):oa.includes("\x3e")&&
(fa.minStdDev=sa[0],fa.maxStdDev=null))}return fa});return{minValue:K,maxValue:T,classBreakInfos:P,normalizationTotal:z.normalizationTotal}};b.statisticTypes=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,w,r,G,y,g,n,e){G=new f.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});f=new f.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});w=class extends w.JSONSupport{constructor(v){super(v);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(v){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",v)}set definedInterval(v){"defined-interval"===this.classificationMethod&&this._set("definedInterval",v)}};b.__decorate([n.enumeration({classBreaksDef:"class-breaks-definition"})],w.prototype,"type",void 0);b.__decorate([r.property({json:{write:!0}})],w.prototype,
"breakCount",void 0);b.__decorate([r.property({json:{write:!0}})],w.prototype,"classificationField",void 0);b.__decorate([r.property({type:String,json:{read:G.read,write:G.write}})],w.prototype,"classificationMethod",void 0);b.__decorate([r.property({json:{write:!0}})],w.prototype,"normalizationField",void 0);b.__decorate([r.property({json:{read:f.read,write:f.write}})],w.prototype,"normalizationType",void 0);b.__decorate([r.property({value:null,json:{write:!0}})],w.prototype,"standardDeviationInterval",
null);b.__decorate([r.property({value:null,json:{write:!0}})],w.prototype,"definedInterval",null);return w=b.__decorate([e.subclass("esri.rest.support.ClassBreaksDefinition")],w)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(b,f,w){b.enumeration=function(r,G={}){r=r instanceof f.JSONMap?r:new f.JSONMap(r,G);r={type:G?.ignoreUnknown??!0?r.apiValues:String,json:{type:r.jsonValues,read:G?.readOnly?!1:{reader:r.read},write:{writer:r.write}}};
void 0!==G?.readOnly&&(r.readOnly=!!G.readOnly);void 0!==G?.default&&(r.json.default=G.default);void 0!==G?.name&&(r.json.name=G.name);void 0!==G?.nonNullable&&(r.nonNullable=G.nonNullable);return w.property(r)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(b,f){function w(u){var H=u.definition;const {classificationMethod:t,normalizationType:p,definedInterval:a}=H;H=H.breakCount??
1;const l=[];var q=u.values;if(0===q.length)return[];q=q.sort((L,U)=>L-U);var F=q[0],N=q[q.length-1];if("equal-interval"===t)if(q.length>=H){q=(N-F)/H;u=F;for(var d=1;d<H;d++){var I=Number((F+d*q).toFixed(6));l.push({minValue:u,maxValue:I,label:r(u,I,p)});u=I}l.push({minValue:u,maxValue:N,label:r(u,N,p)})}else q.forEach(L=>{l.push({minValue:L,maxValue:L,label:r(L,L,p)})});else if("natural-breaks"===t){q=G(q);u=y(q.uniqueValues,u.valueFrequency||q.valueFrequency,H);for(d=1;d<H;d++)q.uniqueValues.length>
d&&(I=Number(q.uniqueValues[u[d]].toFixed(6)),l.push({minValue:F,maxValue:I,label:r(F,I,p)}),F=I);l.push({minValue:F,maxValue:N,label:r(F,N,p)})}else if("quantile"===t)if(q.length>=H&&F!==N){u=Math.ceil(q.length/H);d=0;for(I=1;I<H;I++){var R=u+d-1;R>q.length&&(R=q.length-1);0>R&&(R=0);l.push({minValue:F,maxValue:q[R],label:r(F,q[R],p)});F=q[R];d+=u;u=Math.ceil((q.length-d)/(H-I))}l.push({minValue:F,maxValue:N,label:r(F,N,p)})}else for(H=-1,N=0;N<q.length;N++)F=q[N],F!==H&&(H=F,l.push({minValue:H,
maxValue:F,label:r(H,F,p)}),H=F);else if("standard-deviation"===t)if(u=e(q),d=v(q,u),0===d)l.push({minValue:q[0],maxValue:q[0],label:r(q[0],q[0],p)});else{q=n(F,N,H,u,d)*d;d=0;for(I=H;1<=I;I--)R=Number((u-(I-.5)*q).toFixed(6)),l.push({minValue:F,maxValue:R,label:r(F,R,p)}),F=R,d++;I=Number((u+.5*q).toFixed(6));l.push({minValue:F,maxValue:I,label:r(F,I,p)});F=I;d++;for(R=1;R<=H;R++)I=d===2*H?N:Number((u+(R+.5)*q).toFixed(6)),l.push({minValue:F,maxValue:I,label:r(F,I,p)}),F=I,d++}else if("defined-interval"===
t){if(!a)return l;H=q[0];N=q[q.length-1];q=Math.ceil((N-H)/a);F=H;for(u=1;u<q;u++)d=Number((H+u*a).toFixed(6)),l.push({minValue:F,maxValue:d,label:r(F,d,p)}),F=d;l.push({minValue:F,maxValue:N,label:r(F,N,p)})}return l}function r(u,H,t){let p=null;return p=u===H?t&&"percent-of-total"===t?u+"%":u.toString():t&&"percent-of-total"===t?u+"% - "+H+"%":u+" - "+H}function G(u){const H=[],t=[];let p=Number.MIN_VALUE,a=1,l=-1;for(let q=0;q<u.length;q++){const F=u[q];F===p?(a++,t[l]=a):null!==F&&(H.push(F),
p=F,a=1,t.push(a),l++)}return{uniqueValues:H,valueFrequency:t}}function y(u,H,t){var p=u.length;const a=[];t>p&&(t=p);for(var l=0;l<t;l++)a.push(Math.round(l*p/t-1));a.push(p-1);l=g(a,u,H,t);p=l.mean;l=l.sdcm;var q=t,F=0,N=0;let d=0,I=0,R=!0;for(let U=0;2>U&&R;U++){0===U&&(R=!1);for(var L=0;L<q-1;L++)for(;a[L+1]+1!==a[L+2];)if(a[L+1]+=1,F=x(L,a,u,H),d=F.sbMean,F=F.sbSdcm,N=x(L+1,a,u,H),I=N.sbMean,N=N.sbSdcm,F+N<l[L]+l[L+1])l[L]=F,l[L+1]=N,p[L]=d,p[L+1]=I,R=!0;else{--a[L+1];break}for(L=q-1;0<L;L--)for(;a[L]!==
a[L-1]+1;)if(--a[L],F=x(L-1,a,u,H),d=F.sbMean,F=F.sbSdcm,N=x(L,a,u,H),I=N.sbMean,N=N.sbSdcm,F+N<l[L-1]+l[L])l[L-1]=F,l[L]=N,p[L-1]=d,p[L]=I,R=!0;else{a[L]+=1;break}}R&&(l=g(a,u,H,t));return a}function g(u,H,t,p){let a=[];var l=[],q=[];let F=0;const N=[],d=[];for(var I=0;I<p;I++){var R=x(I,u,H,t);N.push(R.sbMean);d.push(R.sbSdcm);F+=d[I]}R=F;for(I=!0;I||F<R;){I=!1;a=[];for(l=0;l<p;l++)a.push(u[l]);for(q=0;q<p;q++)for(R=u[q]+1;R<=u[q+1];R++)if(l=H[R],0<q&&R!==u[q+1]&&Math.abs(l-N[q])>Math.abs(l-N[q-
1]))u[q]=R;else if(q<p-1&&u[q]!==R-1&&Math.abs(l-N[q])>Math.abs(l-N[q+1])){u[q+1]=R-1;break}R=F;F=0;l=[];q=[];for(let L=0;L<p;L++){l.push(N[L]);q.push(d[L]);const U=x(L,u,H,t);N[L]=U.sbMean;d[L]=U.sbSdcm;F+=d[L]}}if(F>R){for(H=0;H<p;H++)u[H]=a[H],N[H]=l[H],d[H]=q[H];F=R}return{mean:N,sdcm:d}}function n(u,H,t,p,a){u=Math.max(p-u,H-p)/a/t;return 1<=u?1:.5<=u?.5:.25}function e(u){let H=0;for(let t=0;t<u.length;t++)H+=u[t];return H/=u.length}function v(u,H){let t=0;for(let p=0;p<u.length;p++){const a=
u[p];t+=(a-H)*(a-H)}t/=u.length;return Math.sqrt(t)}function x(u,H,t,p){var a=0,l=0;for(var q=H[u]+1;q<=H[u+1];q++){const F=p[q];a+=t[q]*F;l+=F}0>=l&&f.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");a/=l;l=0;for(q=H[u]+1;q<=H[u+1];q++)l+=p[q]*(t[q]-a)**2;return{sbMean:a,sbSdcm:l}}b.createGenerateRendererClassBreaks=function(u){const {normalizationTotal:H}=u;return{classBreaks:w(u),normalizationTotal:H}};b.createGenerateRendererUniqueValues=function(u){u=
G(u);const H=[],t=u.uniqueValues.length;for(let p=0;p<t;p++){const a=u.uniqueValues[p];H.push({value:a,count:u.valueFrequency[p],label:a.toString()})}return{uniqueValues:H}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(b){b.makeEdgeCandidate=function(f,w,r,G,y,g=!1){return{objectId:f,target:w,distance:r,type:"edge",start:G,end:y,draped:g}};b.makeVertexCandidate=function(f,w,r){return{objectId:f,
target:w,distance:r,type:"vertex"}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(b,f,w,r,G,y,g,n,e,v){async function x(l,q,F){if(!l)return null;
var {where:N}=l;l.where=N=N?.trim();if(!N||/^1 *= *1$/.test(N)||q&&q===N)l.where=null;if(!l.geometry)return l;q=await H(l);l.distance=0;l.units=null;"esriSpatialRelEnvelopeIntersects"===l.spatialRel&&({spatialReference:N}=l.geometry,q=y.getGeometryExtent(q),q.spatialReference=N);if(q){await v.checkProjectionSupport(q.spatialReference,F);N=q.spatialReference;q=u(q,F)&&g.isExtent(q)?{spatialReference:N,rings:[[[q.xmin,q.ymin],[q.xmin,q.ymax],[q.xmax,q.ymax],[q.xmax,q.ymin],[q.xmin,q.ymin]]]}:q;N=(await n.normalizeCentralMeridian(g.fromJSON(q)))[0];
if(null==N)throw a;const d="quantizationParameters"in l&&l.quantizationParameters?.tolerance||"maxAllowableOffset"in l&&l.maxAllowableOffset||0;q=d&&u(q,F)?{densificationStep:8*d}:void 0;N=N.toJSON();q=v.project(N,N.spatialReference,F,q);if(!q)throw a;q.spatialReference=F;l.geometry=q}return l}function u(l,q){if(!l)return!1;const F=l.spatialReference;return(g.isExtent(l)||g.isPolygon(l)||g.isPolyline(l))&&!e.equals(F,q)&&!G.canProjectWithoutEngine(F,q)}async function H(l){const {distance:q,units:F}=
l,N=l.geometry;if(null==q||"vertexAttributes"in N)return N;var d=N.spatialReference;l=F?p.fromJSON(F):r.getUnitString(d);d=d&&(e.isGeographic(d)||e.isWebMercator(d))?N:await v.checkProjectionSupport(d,e.wgs84).then(()=>v.project(N,e.wgs84));return(await t())(d.spatialReference,d,q,l)}async function t(){return(await new Promise((l,q)=>b(["../../../geometry/geometryEngineJSON"],l,q))).geodesicBuffer}const p=new w.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});f.normalizeQuery=async function(l,q,F){const {outFields:N,orderByFields:d,groupByFieldsForStatistics:I,outStatistics:R}=l;if(N)for(var L=0;L<N.length;L++)N[L]=N[L].trim();if(d)for(L=0;L<d.length;L++)d[L]=d[L].trim();if(I)for(L=0;L<I.length;L++)I[L]=I[L].trim();if(R)for(L=0;L<R.length;L++)R[L].onStatisticField&&(R[L].onStatisticField=R[L].onStatisticField.trim());
l.geometry&&!l.outSR&&(l.outSR=l.geometry.spatialReference);return x(l,q,F)};f.normalizeQueryLike=x;f.queryEngineEmptyResult=a;f.unitsKebabDict=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(b,f,w,r,G,y){function g(u,H,t){const {outFields:p,orderByFields:a,returnDistinctValues:l,
outStatistics:q}=t,F=q?q.map(N=>N.outStatisticFieldName&&N.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const N=a.map(d=>{const I=d.toLowerCase();return I.includes(" asc")?I.split(" asc")[0]:I.includes(" desc")?I.split(" desc")[0]:d}).filter(d=>!F.includes(d));w.validateFields(u,H,N,{expressionName:"orderByFields",query:t})}if(p&&0<p.length)w.validateFields(u,H,p,{expressionName:"outFields",query:t,allowedFieldTypes:"all"});else if(l)throw new f("unsupported-query","outFields should be specified for returnDistinctValues",
{query:t});w.validateWhere(u,H,t.where,t)}function n(u,H,t){const {outStatistics:p,groupByFieldsForStatistics:a,having:l}=t;var q=a?.length,F=p?.length;if(l){if(!q||!F)throw new f("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});w.validateHaving(u,H,l,p,t)}if(F&&v(p)){F=p.map(N=>N.onStatisticField).filter(Boolean);w.validateFields(u,H,F,{expressionName:"onStatisticFields",query:t});q&&w.validateFields(u,H,a,{expressionName:"groupByFieldsForStatistics",
query:t});for(const N of p){const {onStatisticField:d,statisticType:I}=N;if(("percentile_disc"===I||"percentile_cont"===I)&&"statisticParameters"in N){if({statisticParameters:q}=N,!q)throw new f("unsupported-query","statisticParameters should be set for percentile type",{definition:N,query:t});}else u.get(d)&&"count"!==I&&"min"!==I&&"max"!==I&&w.validateFields(u,H,[d],{expressionName:`outStatistics with '${I}' statistic type`,allowedFieldTypes:x,query:t})}}}async function e(u,H,t,p){var a=[];t.valueExpression&&
({arcadeUtils:a}=await y.loadArcade(),a=a.extractFieldNames(t.valueExpression));t.field&&a.push(t.field);t.field2&&a.push(t.field2);t.field3&&a.push(t.field3);t.normalizationField&&a.push(t.normalizationField);if(!a.length&&!t.valueExpression)throw new f("unsupported-query","field or valueExpression is required",{params:t});w.validateFields(u,H,a,{expressionName:"statistics",query:p})}function v(u){return null!=u&&u.every(H=>"exceedslimit"!==H.statisticType)}const x=new Set([...w.numericFieldTypes,
...w.allDateAndTimeFieldTypes]);b.validateQuery=async function(u,{fieldsIndex:H,geometryType:t,spatialReference:p,availableFields:a}){if(0>(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption&&"xyFootprint"!==u.multipatchOption||u.pixelSize||u.relationParam||u.text)throw new f("unsupported-query","Unsupported query options",{query:u});g(H,a,u);n(H,a,u);return Promise.all([G.checkSpatialQuerySupport(u,t,p),r.checkProjectionSupport(p,u.outSR)]).then(()=>u)};b.validateStatisticsQuery=async function(u,
H,{fieldsIndex:t,geometryType:p,spatialReference:a,availableFields:l}){if(0>(u.distance??0)||null!=u.geometryPrecision||u.multipatchOption||u.pixelSize||u.relationParam||u.text||u.outStatistics||u.groupByFieldsForStatistics||u.having||u.orderByFields)throw new f("unsupported-query","Unsupported query options",{query:u});g(t,l,u);return Promise.all([e(t,l,H,u),G.checkSpatialQuerySupport(u,p,a),r.checkProjectionSupport(a,u.outSR)]).then(()=>u)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(b,f,w,r,G,y,g,n,e,v,x,u){function H(){return new Promise((q,F)=>b(["../../../geometry/geometryEngineJSON"],q,F))}const t={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var p={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},l={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=function(q){if(y.isExtent(q))return!0;if(y.isPolygon(q)){for(const F of q.rings)if(5!==F.length||F[0][0]!==F[1][0]||F[0][0]!==F[4][0]||F[2][0]!==F[3][0]||F[0][1]!==F[3][1]||F[0][1]!==
F[4][1]||F[1][1]!==F[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(q,F,N){const {spatialRel:d,geometry:I}=q;if(I){if(null==d||!0!==p[d])throw new w("unsupported-query","Unsupported query spatial relationship",{query:q});if(g.isValid(I.spatialReference)&&g.isValid(N)){if(null==I||!0!==a[y.getJsonType(I)])throw new w("unsupported-query","Unsupported query geometry type",{query:q});if(null==F||!0!==l[F])throw new w("unsupported-query","Unsupported layer geometry type",{query:q});
if(q.outSR)return u.checkProjectionSupport(q.geometry?.spatialReference,q.outSR)}}};f.getSpatialQueryOperator=function(q,F,N,d,I){if(y.isPolygon(F)&&"esriGeometryPoint"===N&&("esriSpatialRelIntersects"===q||"esriSpatialRelContains"===q)){const R=e.convertFromPolygon(new v,F,!1,!1);return Promise.resolve(L=>n.polygonContainsPoint(R,!1,!1,L))}if(y.isPolygon(F)&&"esriGeometryMultipoint"===N){const R=e.convertFromPolygon(new v,F,!1,!1);if("esriSpatialRelContains"===q)return Promise.resolve(L=>n.polygonContainsMultipoint(R,
!1,!1,L,d,I))}if(y.isExtent(F)&&"esriGeometryPoint"===N&&("esriSpatialRelIntersects"===q||"esriSpatialRelContains"===q))return Promise.resolve(R=>r.extentContainsPoint(F,x.getGeometry(N,d,I,R)));if(y.isExtent(F)&&"esriGeometryMultipoint"===N&&"esriSpatialRelContains"===q)return Promise.resolve(R=>r.extentContainsMultipoint(F,x.getGeometry(N,d,I,R)));if(y.isExtent(F)&&"esriSpatialRelIntersects"===q){const R=G.getExtentIntersector(N);return Promise.resolve(L=>R(F,x.getGeometry(N,d,I,L)))}return H().then(R=>
{const L=R[t[q]].bind(null,F.spatialReference,F);return U=>L(x.getGeometry(N,d,I,U))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(b,f){b.extentIntersectsExtent=f.extentIntersectsExtent;b.extentIntersectsMultipoint=f.extentIntersectsMultipoint;b.extentIntersectsPoint=f.extentIntersectsPoint;b.extentIntersectsPolygon=f.extentIntersectsPolygon;b.extentIntersectsPolyline=f.extentIntersectsPolyline;
b.extentIntersectsRings=f.extentIntersectsRings;b.getFeatureExtentIntersector=f.getFeatureExtentIntersector;b.isSelfIntersecting=f.isSelfIntersecting;b.segmentIntersects=f.segmentIntersects;b.getExtentIntersector=function(w){return"mesh"===w?f.extentIntersectsExtent:f.getFeatureExtentIntersector(w)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(b){function f(w,r,G,y,g){if(!w)return!1;r=r?G?4:3:G?3:2;const {coords:n,
lengths:e}=w;G=!1;w=0;for(const x of e){var v=w;for(let u=w,H=w+x*r;u<H;u+=r){v=u+r;v===H&&(v=w);const t=n[u],p=n[u+1],a=n[v];v=n[v+1];(p<g&&v>=g||v<g&&p>=g)&&t+(g-p)/(v-p)*(a-t)<y&&(G=!G)}w+=x*r}return G}b.polygonContainsCoords=f;b.polygonContainsMultipoint=function(w,r,G,y,g,n){g=g?n?4:3:n?3:2;const {coords:e,lengths:v}=y;if(!v)return!1;for(let x=0,u=0;x<v.length;x++,u+=g)if(!f(w,r,G,e[u],e[u+1]))return!1;return!0};b.polygonContainsPoint=function(w,r,G,y){return f(w,r,G,y.coords[0],y.coords[1])};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(b){function f(G,y,g,n,e){if(null!=n&&null!=e)return v=>{const x=G(v,y);v=G(v,g);return(null==x||x<=e)&&(null==v||v>=n)};if(null!=n)return v=>{v=G(v,g);return null==v||v>=n};if(null!=e)return v=>{v=G(v,y);return null==v||v<=e}}function w(G,y,g,n){if(null!=g&&null!=n&&g===n)return e=>G(e,y)===g;if(null!=g&&null!=n)return e=>{e=G(e,y);return null!=e&&e>=g&&e<=
n};if(null!=g)return e=>{e=G(e,y);return null!=e&&e>=g};if(null!=n)return e=>{e=G(e,y);return null!=e&&e<=n}}function r(){return()=>!1}b.getTimeExtent=async function(G,y){if(!G)return null;const g=y.featureAdapter,{startTimeField:n,endTimeField:e}=G;let v=Number.POSITIVE_INFINITY,x=Number.NEGATIVE_INFINITY;if(n&&e)await y.forEach(u=>{const H=g.getAttribute(u,n);u=g.getAttribute(u,e);null==H||isNaN(H)||(v=Math.min(v,H));null==u||isNaN(u)||(x=Math.max(x,u))});else{const u=n||e;await y.forEach(H=>{H=
g.getAttribute(H,u);null==H||isNaN(H)||(v=Math.min(v,H),x=Math.max(x,H))})}return{start:v,end:x}};b.getTimeOperator=function(G,y,g){if(!y||!G)return null;const {startTimeField:n,endTimeField:e}=G;if(!n&&!e)return null;const {start:v,end:x}=y;if(null===v&&null===x)return null;if(void 0===v&&void 0===x)return r();G=g.getAttributeAsTimestamp?.bind(g)??g.getAttribute.bind(g);return n&&e?f(G,n,e,v,x):w(G,n||e,v,x)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(b,f,w,r,G,y,g,n){function e(t){return t.trim().toLowerCase()}function v(t){const p=new Map;if(!t.fields)return p;const a=!0===t.datesInUnknownTimezone,{timeInfo:l,editFieldsInfo:q}=t;var F=(l?"startField"in l?l.startField:l.startTimeField:"")??"";const N=(l?"endField"in l?l.endField:l.endTimeField:"")??"",d="dateFieldsTimeZone"in t?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?g.fromTimeReference(t.dateFieldsTimeReference):null,I=q?"timeZone"in q?q.timeZone??d:q.dateFieldsTimeReference?
g.fromTimeReference(q.dateFieldsTimeReference):d??g.utc:null,R=l?"timeZone"in l?l.timeZone??d:l.timeReference?g.fromTimeReference(l.timeReference):d:null;F=new Map([[e(q?.creationDateField??""),I],[e(q?.editDateField??""),I],[e(F),R],[e(N),R]]);for(const {name:L,type:U}of t.fields)H.has(U)?p.set(L,g.unknown):"date"!==U&&"esriFieldTypeDate"!==U?p.set(L,null):a?p.set(L,g.unknown):(t=F.get(e(L??""))??d,p.set(L,t));return p}const x=new Map;class u{static fromJSON(t){return new u(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new u(t.fields??
[],v(t))}static fromLayerJSON(t){return new u(t.fields??[],v(t))}constructor(t=[],p){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=t||[];this._timeZoneByFieldName=p?new Map(p):null;t=[];for(const a of this.fields){p=a?.name;const l=y.normalizeFieldName(p)?.toLowerCase()??"";if(p&&l){const q=e(p);this._fieldsMap.set(p,a);this._fieldsMap.set(q,a);this._normalizedFieldsMap.set(l,
a);t.push(`${q}:${a.type}:${this._timeZoneByFieldName?.get(p)}`);y.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):y.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));y.isObjectIDField(a)||y.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}t.sort();this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)y.isObjectIDField(t)||y.isGlobalIDField(t)||
t.nullable||void 0!==y.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return null!=this.get(t)}get(t){if(t){var p=this._fieldsMap.get(t);if(p)return p;(p=this._fieldsMap.get(e(t))??this._normalizedFieldsMap.get(y.normalizeFieldName(t)?.toLowerCase()??""))&&this._fieldsMap.set(t,p);return p}}getTimeZone(t){t=this.get(t&&"string"!==typeof t?t.name:t);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):
"date"===t.type||"esriFieldTypeDate"===t.type?(w.getLogger("esri.layers.support.FieldsIndex").error(new b("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),g.utc):H.has(t.type)?g.unknown:null:null}getLuxonTimeZone(t){const p=this.getTimeZone(t);return p?p===g.unknown?G.UnknownTimeZone.instance:p===g.utc?n.FixedOffsetZone.utcInstance:r.getOrCreateMapValue(x,p,()=>n.IANAZone.create(p)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return y.isTimeOnlyField(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??
void 0}toJSON(){return{fields:this.fields.map(t=>f.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const H=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return u})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p){function a(Q){return l.has(Q)?l.get(Q):"number"===typeof Q?Q:1}b.TaskPriority=void 0;(function(Q){Q.RESOURCE_CONTROLLER_IMMEDIATE="immediate";Q.RESOURCE_CONTROLLER="schedule";Q.SLIDE="slide";Q.STREAM_DATA_LOADER="stream loader";Q.ELEVATION_QUERY="elevation query";Q.TERRAIN_SURFACE="terrain";Q.SURFACE_GEOMETRY_UPDATES="surface geometry updates";Q.LOD_RENDERER="LoD renderer";Q.GRAPHICS_CORE="Graphics3D";Q.I3S_CONTROLLER="I3S";Q.POINT_CLOUD_LAYER="point cloud";
Q.FEATURE_TILE_FETCHER="feature fetcher";Q.OVERLAY="overlay";Q.STAGE="stage";Q.GRAPHICS_DECONFLICTOR="graphics deconflictor";Q.FILTER_VISIBILITY="Graphics3D filter visibility";Q.SCALE_VISIBILITY="Graphics3D scale visibility";Q.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";Q.POINT_OF_INTEREST_FREQUENT="POI frequent";Q.POINT_OF_INTEREST_INFREQUENT="POI infrequent";Q.LABELER="labeler";Q.FEATURE_QUERY_ENGINE="feature query";Q.FEATURE_TILE_TREE="feature tile tree";Q.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
Q.ELEVATION_ALIGNMENT="elevation alignment";Q.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";Q.TEXT_TEXTURE_ATLAS="text texture atlas";Q.TEXTURE_UNLOAD="texture unload";Q.LINE_OF_SIGHT_TOOL="line of sight tool";Q.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";Q.ELEVATION_PROFILE="elevation profile";Q.SNAPPING="snapping";Q.SHADOW_ACCUMULATOR="shadow accumulator";Q.CLOUDS_GENERATOR="clouds generator";Q[Q.NONE=0]="NONE";Q[Q.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||(b.TaskPriority=
{}));const l=new Map([[b.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[b.TaskPriority.RESOURCE_CONTROLLER,4],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.LOD_RENDERER,2],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,
4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.CLOUDS_GENERATOR,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30]]),q=x.Milliseconds(6.5),F=x.Milliseconds(1),N=x.Milliseconds(30),d=x.Milliseconds(1E3/30),I=x.Milliseconds(100);var R;(function(Q){class m{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(B=>B.needsUpdate)}constructor(){this._updating=
v.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new y("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new z;this._state=t.RenderState.INTERACTING;this._tasks=new g;this._runQueue=new g;this._load=0;this._idleStateCallbacks=new g;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=e.watch(()=>H.SCHEDULER_LOG_SLOW_TASKS,P=>this._debug=P,e.initial);for(const P of Object.keys(b.TaskPriority))this.performanceInfo.tasks.set(b.TaskPriority[P],
new y(b.TaskPriority[P]));const B=this;this._test={FRAME_SAFETY_BUDGET:q,INTERACTING_BUDGET:d,IDLE_BUDGET:I,get availableBudget(){return B._budget.budget},usedBudget:0,getBudget:()=>B._budget,setBudget:P=>B._budget=P,updateTask:P=>this._updateTask(P),getState:P=>this._getState(P),getRuntime:P=>this._getRuntime(P),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(B=>B.remove());this._tasks.clear();
G.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(B){this._updatingChanged();B&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(B,P){P=new C(this,B,P);this._tasks.push(P);this._updatingChanged();this.performanceInfo.tasks.has(B)||this.performanceInfo.tasks.set(B,new y(B));return P}registerIdleStateCallbacks(B,
P){const K={idleBegin:B,idleEnd:P};this._idleStateCallbacks.push(K);this.state===t.RenderState.IDLE&&this._idleUpdatesStartFired&&K.idleBegin();const T=this;return{remove:()=>this._removeIdleStateCallbacks(K),set idleBegin(Y){T._idleUpdatesStartFired&&(K.idleEnd(),T._state===t.RenderState.IDLE&&Y());K.idleBegin=Y},set idleEnd(Y){K.idleEnd=Y}}}get load(){return this._load}set state(B){this._state!==B&&(this._state=B,this.state!==t.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(P=>P.idleEnd())))}get state(){return this._state}updateBudget(B){this._test.usedBudget=0;++this._frameNumber;let P=q,K=B.frameDuration,T=F;switch(this.state){case t.RenderState.IDLE:P=x.Milliseconds(0);K=x.Milliseconds(Math.max(I,B.frameDuration));T=N;break;case t.RenderState.INTERACTING:K=x.Milliseconds(Math.max(d,B.frameDuration))}K=x.Milliseconds(K-B.elapsedFrameTime-P);if(this.state!==t.RenderState.IDLE&&K<F&&!this._forceTask)return this._forceTask=!0,!1;K=x.Milliseconds(Math.max(K,
T));this._budget.reset(K,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case t.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(B=>B.idleBegin()));this._runIdle();break;case t.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(x.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(B){this._idleUpdatesStartFired&&
B.idleEnd();this._idleStateCallbacks.removeUnordered(B)}removeTask(B){this._tasks.removeUnordered(B);this._runQueue.removeUnordered(B);this._updatingChanged()}_updateTask(B){this._tasks.forAll(P=>{P.name===B&&P.setPriority(B)})}_getState(B){if(this._runQueue.some(K=>K.name===B))return b.TaskState.SCHEDULED;let P=b.TaskState.IDLE;this._tasks.forAll(K=>{K.name===B&&K.needsUpdate&&(1>=K.schedulePriority?P=b.TaskState.READY:P!==b.TaskState.READY&&(P=b.TaskState.WAITING))});return P}_getRuntime(B){let P=
0;this._tasks.forAll(K=>{K.name===B&&(P+=K.runtime)});return P}_resetRuntimes(){this._tasks.forAll(B=>B.runtime=0)}_getRunning(){const B=new Map;this._tasks.forAll(K=>{K.needsUpdate&&B.set(K.name,(B.get(K.name)||0)+1)});if(0===B.size)return null;let P="";B.forEach((K,T)=>{P=1<K?P+` ${K}x ${T}`:P+` ${T}`});return P}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const B=this._tasks.reduce((P,K)=>K.needsUpdate?++P:P,0);this._load=.9*this._load+B*(1-.9)}_schedule(){this._runQueue.filterInPlace(B=>
{if(B.needsUpdate)return!0;B.schedulePriority=B.basePriority;return!1});for(this._tasks.forAll(B=>{0===B.basePriority&&B.needsUpdate&&!this._runQueue.includes(B)&&B.blockFrame!==this._frameNumber&&this._runQueue.unshift(B)});0===this._runQueue.length;){let B=!1;this._tasks.forAll(P=>{if(P.needsUpdate&&0!==P.schedulePriority&&0!==P.basePriority&&P.blockFrame!==this._frameNumber)switch(B=!0,P.schedulePriority){case 1:P.schedulePriority=0;this._runQueue.push(P);break;default:--P.schedulePriority}});
if(!B)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const B=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var P=this._budget.now();const K=this._runQueue.pop();this._budget.resetProgress();try{K.task.runTask(this._budget)===p.Yield&&(K.blockFrame=this._frameNumber)}catch(T){r.getLogger("esri.views.support.Scheduler").error(`Exception in task "${K.name}"`,T),K.blockFrame=this._frameNumber}!this._budget.hasProgressed&&K.blockFrame!==this._frameNumber&&
K.needsUpdate&&(K.blockFrame=this._frameNumber);K.schedulePriority=K.basePriority;P=this._budget.now()-P;K.runtime+=P;this._frameTaskTimes.set(K.priority,this._frameTaskTimes.get(K.priority)+P);this._debug&&P>2*this._budget.budget&&console.log("Task",K.name,"used",P,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-B);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
B)}_startFrameTaskTimes(){for(const B of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[B],0)}_recordFrameTaskTimes(B){this._frameTaskTimes.forEach((P,K)=>this.performanceInfo.tasks.get(K).record(P));this.performanceInfo.total.record(B)}get test(){return this._test}}Q.Scheduler=m;class C{get task(){return this._task.value}get updating(){return this._queue.running}constructor(B,P,K){this._scheduler=B;this.name=P;this.runtime=this.blockFrame=0;this._queue=new u.PromiseQueue;this._handles=
new f;this.schedulePriority=this._basePriority=a(P);this._task=v.signal(null!=K?K:this._queue);this._handles.add(e.when(()=>this.task.running,T=>B.taskRunningChanged(T)))}remove(){this.processQueue(L);this._scheduler.removeTask(this);this.schedule=S.schedule;this.reschedule=S.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(B){if(this.name!==B){this.name=B;B=a(B);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=B;this._basePriority=
B}}get priority(){return this.name}set priority(B){this.setPriority(B)}get needsUpdate(){return this.updating||this.task.running}schedule(B,P,K){return this._queue.push(B,P,K)}reschedule(B,P,K){return this._queue.unshift(B,P,K)}processQueue(B){return this._queue.runTask(B)}}class z{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=t.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(B){if(this.done)return!1;!0===B()&&this.madeProgress();
return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(B){this._enabled=B}reset(B,P){this._begin=this.now();this._budget=B;this._state=P;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=
this._progressed=!1}get hasProgressed(){return this._progressed}}Q.Budget=z})(R||={});b.TaskState=void 0;(function(Q){Q.SCHEDULED="s";Q.READY="r";Q.WAITING="w";Q.IDLE="i"})(b.TaskState||(b.TaskState={}));const L=(()=>{const Q=new R.Budget;Q.enabled=!1;return Q})();class U{remove(){}processQueue(){}schedule(Q,m,C){try{if(n.isAborted(m)){const z=n.createAbortError();return C?Promise.resolve(C(z)):Promise.reject(z)}return n.when(Q(L))}catch(z){return Promise.reject(z)}}reschedule(Q,m,C){return this.schedule(Q,
m,C)}}const S=new U;b.ImmediateTask=S;b.getTaskPriority=a;b.newScheduler=function(){return new R.Scheduler};b.noBudget=L;b.taskPriorities=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(b,f,w,r){class G{constructor(y,g){this._observable=new r.SimpleObservable;this._value=y;this._equalityFunction=g}get value(){w.trackAccess(this._observable);
return this._value}set value(y){this._equalityFunction(y,this._value)||(this._value=y,this._observable.notify())}mutate(y){y(this._value);this._observable.notify()}}b.signal=function(y,g=f.equalsShallow){return new G(y,g)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(b,f,w,r){class G{constructor(){this._tasks=[];this._runningTasks=w.signal(0)}get length(){return this._tasks.length}get running(){return 0<
this._runningTasks.value}destroy(){this.cancelAll()}runTask(g){if(0===this.length)return r.Yield;for(;!g.done&&this._process(g);)g.madeProgress()}push(g,n,e){++this._runningTasks.value;return(new Promise((v,x)=>this._tasks.push(new y(v,x,g,n,e)))).finally(()=>--this._runningTasks.value)}unshift(g,n,e){++this._runningTasks.value;return(new Promise((v,x)=>this._tasks.unshift(new y(v,x,g,n,e)))).finally(()=>--this._runningTasks.value)}_process(g){if(0===this._tasks.length)return!1;const n=this._tasks.shift();
try{const e=f.isAborted(n.signal);if(e&&!n.abortCallback)n.reject(f.createAbortError());else{const v=e?n.abortCallback?.(f.createAbortError()):n.callback(g);f.isPromiseLike(v)?v.then(n.resolve,n.reject):n.resolve(v)}}catch(e){n.reject(e)}return!0}cancelAll(){const g=f.createAbortError();for(const n of this._tasks)if(n.abortCallback){const e=n.abortCallback(g);n.resolve(e)}else n.reject(g);this._tasks.length=0}}class y{constructor(g,n,e,v,x){this.resolve=g;this.reject=n;this.callback=e;this.signal=
v;this.abortCallback=x}}b.PromiseQueue=G;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],function(b){const f=Symbol("Yield");b.Yield=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,w,r,G,y,g){f=class extends f{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};b.__decorate([w.property()],f.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([w.property()],f.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);f=b.__decorate([g.subclass("esri.views.support.DebugFlags")],f);return new f})},"esri/views/support/RenderState":function(){define(["exports"],function(b){b.RenderState=
void 0;var f=b.RenderState||(b.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define("exports ../../../../core/date ../../../../core/Error ../../../../geometry/support/spatialReferenceUtils ../../OptimizedFeature ../../OptimizedGeometry ../../../support/fieldUtils".split(" "),function(b,f,w,r,G,y,g){function*n(d){switch(d.type){case "Feature":yield d;
break;case "FeatureCollection":for(const I of d.features)I&&(yield I)}}function*e(d){if(d)switch(d.type){case "Point":yield d.coordinates;break;case "LineString":case "MultiPoint":yield*d.coordinates;break;case "MultiLineString":case "Polygon":for(const I of d.coordinates)yield*I;break;case "MultiPolygon":for(const I of d.coordinates)for(const R of I)yield*R}}function*v(d,I={}){const {geometryType:R,objectIdField:L}=I;for(const U of d){const {geometry:S,properties:Q,id:m}=U;if(S&&N[S.type]!==R)continue;
d=Q||{};let C=void 0;L&&(C=d[L],null==m||C||(d[L]=C=m));yield new G.OptimizedFeature(S?t(new y,S,I):null,d,null,C??void 0)}}function x(d){for(const I of d)if(2<I.length)return!0;return!1}function u(d){let I=0;for(let R=0;R<d.length;R++){const L=d[R],U=d[(R+1)%d.length];I+=L[0]*U[1]-U[0]*L[1]}return 0>=I}function H(d){const I=d[0],R=d[d.length-1];I[0]===R[0]&&I[1]===R[1]&&I[2]===R[2]||d.push(I);return d}function t(d,I,R){switch(I.type){case "LineString":return l(d,I.coordinates,R),d;case "MultiLineString":for(const U of I.coordinates)l(d,
U,R);return d;case "MultiPoint":return l(d,I.coordinates,R),d;case "MultiPolygon":for(var L of I.coordinates)for(p(d,L[0],R),I=1;I<L.length;I++)a(d,L[I],R);return d;case "Point":return F(d,I.coordinates,R),d;case "Polygon":L=I.coordinates;p(d,L[0],R);for(I=1;I<L.length;I++)a(d,L[I],R);return d}}function p(d,I,R){I=H(I);u(I)?l(d,I,R):q(d,I,R)}function a(d,I,R){I=H(I);u(I)?q(d,I,R):l(d,I,R)}function l(d,I,R){for(const L of I)F(d,L,R);d.lengths.push(I.length)}function q(d,I,R){for(let L=I.length-1;0<=
L;L--)F(d,I[L],R);d.lengths.push(I.length)}function F(d,I,R){const [L,U,S]=I;d.coords.push(L,U);R.hasZ&&d.coords.push(S||0)}const N={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};b.createOptimizedFeatures=function(d,I){return Array.from(v(n(d),I))};b.getGeometryType=function(d){return N[d]};b.inferLayerProperties=function(d,I={}){const R=[];var L=
new Set;const U=new Set;var S=!1;let Q=null,m=!1,C=void 0;({geometryType:I=null}=I);var z=!1;for(const B of n(d)){const {geometry:P,properties:K,id:T}=B;if(P&&(I||=N[P.type],N[P.type]!==I))continue;S||(S=e(P),S=x(S));!m&&(m=null!=T)&&(C=typeof T,K&&(Q=Object.keys(K).filter(Y=>K[Y]===T)));K&&Q&&m&&null!=T&&(1<Q.length?Q=Q.filter(Y=>K[Y]===T):1===Q.length&&(Q=K[Q[0]]===T?Q:[]));if(!z&&K){d=!0;for(const Y in K){if(L.has(Y))continue;z=K[Y];if(null==z){d=!1;U.add(Y);continue}a:switch(typeof z){case "string":z=
f.isISO8601Date(z)?"esriFieldTypeDate":"esriFieldTypeString";break a;case "number":z="esriFieldTypeDouble";break a;default:z="unknown"}if("unknown"===z){U.add(Y);continue}U.delete(Y);L.add(Y);const fa=g.normalizeFieldName(Y);fa&&R.push({name:fa,alias:Y,type:z})}z=d}}if(L=g.normalizeFieldName(1===Q?.length&&Q[0]||null)??void 0)for(const B of R)if(B.name===L&&g.isNumericField(B)){B.type="esriFieldTypeOID";break}return{fields:R,geometryType:I,hasZ:S,objectIdFieldName:L,objectIdFieldType:C,unknownFields:Array.from(U)}};
b.validateGeoJSON=function(d,I=4326){if(!d)throw new w("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==d.type&&"FeatureCollection"!==d.type)throw new w("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:d});({crs:d}=d);if(d){var R="string"===typeof d?d:"name"===d.type?d.properties.name:"EPSG"===d.type?d.properties.code:null;I=r.isWGS84({wkid:I})?RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${I})$`,"i");if(!R||!I.test(R))throw new w("geojson:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:d});}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/date":function(){define(["exports"],function(b){function f(g){const n=new Date(g);if(Number.isNaN(n.getTime()))g=!1;else{var e=!0;if(y&&/\d+\W*$/.test(g)&&(g=g.match(/[a-zA-Z]{2,}/))){e=!1;let v=0;for(;!e&&v<=g.length;)e=!G.test(g[v]),v++;e=!e}g=e}return g?Number.isNaN(n.getTime())?null:n.getTime()-6E4*n.getTimezoneOffset():null}function w(g){g=r.exec(g);if(!g?.groups)return null;
g=g.groups;const n=+g.year,e=+g.month-1,v=+g.day,x=+(g.hours??0),u=+(g.minutes??0),H=+(g.seconds??0);if(23<x||59<u||59<H)return null;var t=g.ms??"0";t=t?+t.padEnd(3,"0").substring(0,3):0;g=g.isUTC||!g.offsetSign?Date.UTC(n,e,v,x,u,H,t):6E4*("+"===g.offsetSign?-1:1)*(60*+g.offsetHours+ +g.offsetMinutes)+Date.UTC(n,e,v,x,u,H,t);return Number.isNaN(g)?null:g}const r=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,
G=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,y=!Number.isNaN((new Date("technology 10")).getTime());b.isDateString=function(g){return null!=w(g)||null!=f(g)};b.isISO8601Date=function(g){return r.test(g)};b.parseDate=function(g){return w(g)??f(g)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require",
"exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(b,f,w,r,G){function y(H){return new e(H)}async function g(){null==u&&(u=await new Promise((H,t)=>b(["../../../../geometry/geometryEngineJSON"],H,t)));return u}class n{constructor(){this.description=this.code=null}}class e{constructor(H){this.error=new n;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=H}}class v{constructor(H){this.globalId=
null;this.success=!0;this.objectId=this.uniqueId=H}}const x=new Set;let u;f.createFeatureEditErrorResult=y;f.createFeatureEditSuccessResult=function(H){return new v(H)};f.loadGeometryEngineForSimplify=async function(H,t){!r.isValid(H)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await g()};f.mixAttributes=function(H,t,p,a=!1){x.clear();for(const F in p){const N=H.get(F);if(!N)continue;var l=N,q=p[F];let d=q;G.isNumericField(l)&&"string"===typeof q?d=parseFloat(q):G.isStringField(l)&&null!=
q&&"string"!==typeof q?d=String(q):G.isDateField(l)&&"string"===typeof q&&(d=w.parseDate(q));l=G.sanitizeNullFieldValue(d);x.add(N.name);if(N&&(a||N.editable)){if(q=G.validateFieldValue(N,l))return y(G.validationErrorToString(q,N,l));t[N.name]=l}}for(const F of H?.requiredFields??[])if(!x.has(F.name))return y(`missing required field "${F.name}"`);return null};f.parseStringDateFieldValues=function(H,t){if(H?.length)for(const {name:p}of H)"string"===typeof t[p]&&(t[p]=w.parseDate(t[p]))};f.simplify=
function(H,t){if(!H||!r.isValid(t))return H;if("rings"in H||"paths"in H){if(null==u)throw new TypeError("geometry engine not loaded");return u.simplify(t,H)}return H};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/wfsUtils":function(){define("exports ../../geometry ../../request ../../core/Error ../../core/iteratorUtils ../../core/urlUtils ../../geometry/projection ../../geometry/support/spatialReferenceUtils ../../geometry/support/typeUtils ../graphics/sources/geojson/geojson ./xmlUtils ../support/arcgisLayerUrl ../support/Field ../support/fieldUtils ../../geometry/SpatialReference ../../geometry/Extent".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p,a){function l(ca){ca=P(ca);T(ca);Y(ca);ca=ca.firstElementChild;const ka=G.cache(N(ca));return{operations:q(ca),get featureTypes(){return Array.from(ka())},readFeatureTypes:ka}}function q(ca){let ka=!1;const ia={GetCapabilities:{url:""},DescribeFeatureType:{url:""},GetFeature:{url:"",outputFormat:null,supportsPagination:!1}};let qa=null,ra=null;x.visitXML(ca,{OperationsMetadata:{Parameter:xa=>{if("outputFormat"===xa.getAttribute("name"))return{AllowedValues:{Value:ya=>
{(ya=ya.textContent)&&oa.has(ya.toLowerCase())&&(qa??=ya)}}}},Operation:xa=>{switch(xa.getAttribute("name")){case "GetCapabilities":return{DCP:{HTTP:{Get:ya=>{ia.GetCapabilities.url=ya.getAttribute("xlink:href")}}}};case "DescribeFeatureType":return{DCP:{HTTP:{Get:ya=>{ia.DescribeFeatureType.url=ya.getAttribute("xlink:href")}}}};case "GetFeature":return{DCP:{HTTP:{Get:ya=>{ia.GetFeature.url=ya.getAttribute("xlink:href")}}},Parameter:ya=>{if("outputFormat"===ya.getAttribute("name"))return{AllowedValues:{Value:Ha=>
{(Ha=Ha.textContent)&&oa.has(Ha.toLowerCase())&&(ra??=Ha)}}}}}}},Constraint:xa=>{switch(xa.getAttribute("name")){case "KVPEncoding":return{DefaultValue:ya=>{ka="true"===ya.textContent.toLowerCase()}};case "ImplementsResultPaging":return{DefaultValue:ya=>{ia.GetFeature.supportsPagination="true"===ya.textContent.toLowerCase()}}}}}});ia.GetFeature.outputFormat=ra??qa;if(!ka)throw new r("wfs-layer:kvp-encoding-not-supported","WFS service doesn't support key/value pair (KVP) encoding");if(null==ia.GetFeature.outputFormat)throw new r("wfs-layer:geojson-not-supported",
"WFS service doesn't support GeoJSON output format");return ia}function F(ca){ca=parseInt(ca.textContent?.match(/(?<wkid>\d+$)/i)?.groups?.wkid??"",10);if(!Number.isNaN(ca))return ca}function N(ca){return x.iterateXML(ca,{FeatureTypeList:{FeatureType:ka=>{const ia={typeName:"undefined:undefined",name:"",title:"",description:"",extent:null,namespacePrefix:"",namespaceUri:"",defaultSpatialReference:4326,supportedSpatialReferences:[]},qa=new Set;x.visitXML(ka,{Name:ra=>{const {name:xa,prefix:ya}=K(ra.textContent);
ia.typeName=`${ya}:${xa}`;ia.name=xa;ia.namespacePrefix=ya;ia.namespaceUri=ra.lookupNamespaceURI(ya)},Abstract:ra=>{ia.description=ra.textContent},Title:ra=>{ia.title=ra.textContent},WGS84BoundingBox:ra=>{ia.extent=d(ra)},DefaultCRS:ra=>{if(ra=F(ra))ia.defaultSpatialReference=ra,qa.add(ra)},OtherCRS:ra=>{(ra=F(ra))&&qa.add(ra)}});ia.title||(ia.title=ia.name);qa.add(4326);ia.supportedSpatialReferences.push(...qa);return ia}}})}function d(ca){let ka,ia,qa,ra;for(const xa of ca.children)switch(xa.localName){case "LowerCorner":[ka,
ia]=xa.textContent.split(" ").map(ya=>Number.parseFloat(ya));break;case "UpperCorner":[qa,ra]=xa.textContent.split(" ").map(ya=>Number.parseFloat(ya))}return{xmin:ka,ymin:ia,xmax:qa,ymax:ra,spatialReference:n.wgs84}}function I(ca,ka,ia){return G.find(ca,qa=>ia?qa.name===ka&&qa.namespaceUri===ia:qa.typeName===ka||qa.name===ka)}async function R(ca,ka,ia,qa={}){ca=ca.readFeatureTypes();ia=ka?I(ca,ka,ia):ca.next().value;({spatialReference:ca=new p({wkid:ia?.defaultSpatialReference})}=qa);if(null==ia){if(ka)throw new r("wfs-layer:feature-type-not-found",
`The type '${ka}' could not be found in the service`);throw new r("wfs-layer:empty-service","The service is empty");}ka=new a({...ia.extent,spatialReference:p.WGS84});if(!n.equals(ka.spatialReference,ca))try{await g.initializeProjection(ka.spatialReference,ca,void 0,qa),ka=g.project(ka,ca)}catch{throw new r("wfs-layer:unsupported-spatial-reference","Projection not supported");}return{extent:ka,spatialReference:ca,featureType:ia}}async function L(ca,ka,ia,qa={}){const {typeName:ra}=ka,[xa,ya]=await Promise.allSettled([Q(ca.operations.DescribeFeatureType.url,
ra,qa),S(ca,ra,ia,qa)]);ca=La=>new r("wfs-layer:getWFSLayerTypeInfo-error",`An error occurred while getting info about the feature type '${ra}'`,{error:La});if("rejected"===xa.status)throw ca(xa.reason);if("rejected"===ya.status)throw ca(ya.reason);const {fields:Ha,errors:Fa}=xa.value??{};ca=xa.value?.geometryType||ya.value?.geometryType;ka=ya.value?.swapXY??!1;if(null==ca)throw new r("wfs-layer:unknown-geometry-type",`The geometry type could not be determined for type '${ra}`,{typeName:ra,geometryType:ca,
fields:Ha,errors:Fa});return{...U(Ha??[]),geometryType:ca,swapXY:ka}}function U(ca){const ka=ca.find(qa=>"geometry"===qa.type);let ia=ca.find(qa=>"oid"===qa.type);ca=ca.filter(qa=>"geometry"!==qa.type);ia||(ia=new H({name:"__esri_wfs_id__",type:"oid",alias:"__esri_wfs_id__"}),ca.unshift(ia));return{geometryField:ka?.name??null,objectIdField:ia.name,fields:ca}}async function S(ca,ka,ia,qa={}){let ra,xa=!1;const [ya,Ha]=await Promise.all([z(ca.operations.GetFeature.url,ka,ia,ca.operations.GetFeature.outputFormat,
{...qa,count:1}),w(ca.operations.GetFeature.url,{responseType:"text",query:B(ka,ia,void 0,{...qa,count:1}),signal:qa?.signal})]);if(ca="FeatureCollection"===ya.type&&ya.features[0]?.geometry){ra=e.featureGeometryTypeKebabDictionary.fromJSON(v.getGeometryType(ca.type));switch(ca.type){case "Point":var Fa=ca.coordinates;break;case "LineString":case "MultiPoint":Fa=ca.coordinates[0];break;case "MultiLineString":case "Polygon":Fa=ca.coordinates[0][0];break;case "MultiPolygon":Fa=ca.coordinates[0][0][0]}if(ka=
/<[^>]*pos[^>]*> *(-?\d+(?:\.\d+)?) (-?\d+(?:\.\d+)?)/.exec(Ha.data))ca=Fa[0].toFixed(3),Fa=Fa[1].toFixed(3),ia=parseFloat(ka[1]).toFixed(3),ka=parseFloat(ka[2]).toFixed(3),ca===ka&&Fa===ia&&(xa=!0)}return{geometryType:ra,swapXY:xa}}async function Q(ca,ka,ia){ca=await w(ca,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"DescribeFeatureType",VERSION:"2.0.0",TYPENAME:ka,TYPENAMES:ka,...ia?.customParameters},signal:ia?.signal});return m(ka,ca.data)}function m(ca,ka){const {name:ia}=K(ca);ka=P(ka);
Y(ka);var qa=G.find(x.iterateXML(ka.firstElementChild,{element:ra=>ra}),ra=>ra.getAttribute("name")===ia);if(null!=qa){const ra=qa.getAttribute("type");if(qa=ra?G.find(x.iterateXML(ka.firstElementChild,{complexType:xa=>xa}),xa=>xa.getAttribute("name")===K(ra).name):G.find(x.iterateXML(qa,{complexType:xa=>xa}),()=>!0))return C(qa)}throw new r("wfs-layer:feature-type-not-found",`Type '${ca}' not found in document`,{document:(new XMLSerializer).serializeToString(ka)});}function C(ca){const ka=[],ia=
[];let qa=void 0;var ra=x.iterateXML(ca,{complexContent:{extension:{sequence:{element:xa=>xa}}}});for(const xa of ra){ra=xa.getAttribute("name");if(!ra)continue;let ya,Ha;xa.hasAttribute("type")?ya=K(xa.getAttribute("type")).name:x.visitXML(xa,{simpleType:{restriction:Ta=>{ya=K(Ta.getAttribute("base")).name;return{maxLength:h=>{Ha=+h.getAttribute("value")}}}}});if(!ya)continue;const Fa="true"===xa.getAttribute("nillable");let La=!1;switch(ya.toLowerCase()){case "integer":case "nonpositiveinteger":case "negativeinteger":case "long":case "int":case "short":case "byte":case "nonnegativeinteger":case "unsignedlong":case "unsignedint":case "unsignedshort":case "unsignedbyte":case "positiveinteger":ia.push(new H({name:ra,
alias:ra,type:"integer",nullable:Fa,length:t.getFieldDefaultLength("integer")}));break;case "float":case "double":case "decimal":ia.push(new H({name:ra,alias:ra,type:"double",nullable:Fa,length:t.getFieldDefaultLength("double")}));break;case "boolean":case "string":case "gyearmonth":case "gyear":case "gmonthday":case "gday":case "gmonth":case "anyuri":case "qname":case "notation":case "normalizedstring":case "token":case "language":case "idrefs":case "entities":case "nmtoken":case "nmtokens":case "name":case "ncname":case "id":case "idref":case "entity":case "duration":case "time":ia.push(new H({name:ra,
alias:ra,type:"string",nullable:Fa,length:Ha??t.getFieldDefaultLength("string")}));break;case "datetime":case "date":ia.push(new H({name:ra,alias:ra,type:"date",nullable:Fa,length:Ha??t.getFieldDefaultLength("date")}));break;case "pointpropertytype":qa="point";La=!0;break;case "multipointpropertytype":qa="multipoint";La=!0;break;case "curvepropertytype":case "multicurvepropertytype":case "multilinestringpropertytype":qa="polyline";La=!0;break;case "surfacepropertytype":case "multisurfacepropertytype":case "multipolygonpropertytype":qa=
"polygon";La=!0;break;case "geometrypropertytype":case "multigeometrypropertytype":La=!0;ka.push(new r("wfs-layer:unknown-geometry-type",`geometry type '${ya}' is not supported`,{type:(new XMLSerializer).serializeToString(ca)}));break;default:ka.push(new r("wfs-layer:unknown-field-type",`Unknown field type '${ya}'`,{type:(new XMLSerializer).serializeToString(ca)}))}La&&ia.push(new H({name:ra,alias:ra,type:"geometry",nullable:Fa}))}for(const xa of ia)if("integer"===xa.type&&!xa.nullable&&sa.has(xa.name.toLowerCase())){xa.type=
"oid";break}return{geometryType:qa,fields:ia,errors:ka}}async function z(ca,ka,ia,qa,ra){({data:ca}=await w(ca,{responseType:"text",query:B(ka,ia,qa,ra),signal:ra?.signal}));ca=ca.replaceAll(/": +(-?\d+),(\d+)(,)?/g,'": $1.$2$3');try{return JSON.parse(ca)}catch(xa){throw new r("wfs-layer:malformed-json","Error while parsing the\u00a0response",{response:ca,error:xa});}}function B(ca,ka,ia,qa){return{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:ca,OUTPUTFORMAT:ia,SRSNAME:"EPSG:"+("number"===
typeof ka?ka:ka.wkid),STARTINDEX:qa?.startIndex,COUNT:qa?.count,...qa?.customParameters}}function P(ca){return(new DOMParser).parseFromString(ca.trim(),"text/xml")}function K(ca){const [ka,ia]=ca.split(":");return{prefix:ia?ka:"",name:ia??ka}}function T(ca){if((ca=ca.firstElementChild?.getAttribute("version"))&&"2.0.0"!==ca)throw new r("wfs-layer:unsupported-wfs-version",`Unsupported WFS version ${ca}. Supported version: ${"2.0.0"}`);}function Y(ca){let ka="",ia="";x.visitXML(ca.firstElementChild,
{Exception:qa=>{ka=qa.getAttribute("exceptionCode");return{ExceptionText:ra=>{ia=ra.textContent}}}});if(ka)throw new r(`wfs-layer:${ka}`,ia);}function fa(ca,ka,ia){const qa={wkid:ka.defaultSpatialReference};ia=null!=ia?.wkid?{wkid:ia.wkid}:qa;ca=u.isArcGISUrl(ca)||ia.wkid&&ka.supportedSpatialReferences.includes(ia.wkid)?{wkid:ia.wkid}:{wkid:ka.defaultSpatialReference};return{spatialReference:ia,getFeatureSpatialReference:ca}}const oa=new Set(["application/geo+json","application/json","application/json; subtype\x3dgeojson",
"geojson","json"]),sa=new Set(["objectid","fid"]);b.describeFeatureType=Q;b.findFeatureType=I;b.getCapabilities=async function(ca,ka){ka=await w(ca,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetCapabilities",VERSION:"2.0.0",...ka?.customParameters},signal:ka?.signal});ka=l(ka.data);y.isHTTPSProtocol(ca)&&(y.hasSameOrigin(ca,ka.operations.DescribeFeatureType.url,!0)&&(ka.operations.DescribeFeatureType.url=y.toHTTPS(ka.operations.DescribeFeatureType.url)),y.hasSameOrigin(ca,ka.operations.GetFeature.url,
!0)&&(ka.operations.GetFeature.url=y.toHTTPS(ka.operations.GetFeature.url)));return ka};b.getFeature=z;b.getFeatureCount=async function(ca,ka,ia){ca=await w(ca,{responseType:"text",query:{SERVICE:"WFS",REQUEST:"GetFeature",VERSION:"2.0.0",TYPENAMES:ka,RESULTTYPE:"hits",...ia?.customParameters},signal:ia?.signal});ca=/numberMatched=["'](?<numberMatched>\d+)["']/gi.exec(ca.data);if(ca?.groups)return+ca.groups.numberMatched};b.getFeatureTypeInfo=R;b.getGetFeatureSpatialReference=fa;b.getWFSLayerInfo=
async function(ca,ka,ia,qa={}){const {featureType:ra,extent:xa}=await R(ca,ka,ia,qa);({spatialReference:ka}=fa(ca.operations.GetFeature.url,ra,qa.spatialReference));const {fields:ya,geometryType:Ha,swapXY:Fa,objectIdField:La,geometryField:Ta}=await L(ca,ra,ka,qa);return{url:ca.operations.GetCapabilities.url,name:ra.name,namespaceUri:ra.namespaceUri,fields:ya,geometryField:Ta,geometryType:Ha,objectIdField:La,spatialReference:qa.spatialReference??new p({wkid:ra.defaultSpatialReference}),extent:xa,swapXY:Fa,
wfsCapabilities:ca,customParameters:qa.customParameters}};b.parseDescribeFeatureTypeResponse=m;b.parseGetCapabilitiesResponse=l;b.prepareWFSLayerFields=U;b.wfsOidFieldName="__esri_wfs_id__";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/ogc/xmlUtils":function(){define(["exports"],function(b){function f(r,G){if(r&&G)for(const y of r.children)y.localName in G&&(r=G[y.localName],"function"===typeof r?(r=r(y))&&f(y,r):f(y,r))}function*w(r,G){for(const y of r.children)y.localName in
G&&(r=G[y.localName],"function"===typeof r?yield r(y):yield*w(y,r))}b.iterateXML=w;b.visitXML=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(b,f,w){function r(u){if(null==u)return null;u=f.urlToObject(u);u=u?.path.match(e)||u?.path.match(v);if(!u)return null;const [,H,t,p,a]=u;u=t.indexOf("/");return{title:y(-1!==u?t.slice(u+1):t),serverType:g[p.toLowerCase()],
sublayer:null!=a&&""!==a?parseInt(a,10):null,url:{path:H}}}function G(u){return(u=f.urlToObject(u).path.match(x))?{serviceUrl:u[1],sublayerId:Number(u[2])}:null}function y(u){u=u.replaceAll(/\s*[/_]+\s*/g," ");return u[0].toUpperCase()+u.slice(1)}const g={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer"},n=Object.values(g),e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,
"i"),v=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${n.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),x=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;b.cleanTitle=y;b.isArcGISUrl=function(u){return!!e.test(u)};b.isHostedAgolService=function(u){if(!u)return!1;u=u.toLowerCase();const H=u.includes(".arcgis.com/");u=u.includes("//services")||u.includes("//tiles")||u.includes("//features");return H&&u};b.isServerOrServicesAGOLUrl=function(u){if(!u)return!1;u=(new f.Url(f.makeAbsolute(u))).authority?.toLowerCase();
return"server.arcgisonline.com"===u||"services.arcgisonline.com"===u};b.isWmsServer=function(u){if(!u)return!1;var H=u.toLowerCase();u=H.includes("/services/");const t=H.includes("/mapserver/wmsserver"),p=H.includes("/imageserver/wmsserver");H=H.includes("/wmsserver");return u&&(t||p||H)};b.parse=r;b.parseNonStandardSublayerUrl=G;b.sanitizeUrl=function(u,H){return u?f.removeTrailingSlash(f.removeQueryParameters(u,H)):u};b.sanitizeUrlWithLayerId=function(u){let {url:H}=u;if(!H)return{url:H};H=f.removeQueryParameters(H,
u.logger);const t=f.urlToObject(H),p=r(t.path);let a=void 0;null!=p?(null!=p.sublayer&&null==u.layer.layerId&&(a=p.sublayer),H=p.url.path):u.nonStandardUrlAllowed&&(u=G(t.path),null!=u&&(H=u.serviceUrl,a=u.sublayerId));return{url:f.removeTrailingSlash(H),layerId:a}};b.serverTypes=n;b.titleFromUrlAndName=function(u,H){const t=[];u&&(u=r(u),null!=u&&u.title&&t.push(u.title));H&&(H=y(H),t.push(H));if(2===t.length){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")};
b.writeUrlWithLayerId=function(u,H,t,p,a){w.write(H,p,"url",a);p.url&&null!=u.layerId&&(p.url=f.join(p.url,t,u.layerId.toString()))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(b,f,w,r,G,y,g,n,e,v,x,u){var H;const t=new f.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});f=H=class extends w.JSONSupport{constructor(p){super(p);
this.alias=null;this.defaultValue=void 0;this.domain=this.description=null;this.editable=!0;this.length=void 0;this.name=null;this.nullable=!0;this.valueType=this.type=null;this.visible=!0}readDescription(p,{description:a}){p=null;try{p=a?JSON.parse(a):null}catch(l){}return p?.value??null}readValueType(p,{description:a}){p=null;try{p=a?JSON.parse(a):null}catch(l){}return p?t.fromJSON(p.fieldValueType):null}clone(){return new H({alias:this.alias,defaultValue:this.defaultValue,description:this.description,
domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};b.__decorate([r.property({type:String,json:{write:!0}})],f.prototype,"alias",void 0);b.__decorate([r.property({type:[String,Number],json:{write:{allowNull:!0}}})],f.prototype,"defaultValue",void 0);b.__decorate([r.property()],f.prototype,"description",void 0);b.__decorate([e.reader("description")],f.prototype,"readDescription",
null);b.__decorate([r.property({types:x.types,json:{read:{reader:x.fromJSON},write:!0}})],f.prototype,"domain",void 0);b.__decorate([r.property({type:Boolean,json:{write:!0}})],f.prototype,"editable",void 0);b.__decorate([r.property({type:G.Integer,json:{write:{overridePolicy(p){return{enabled:Number.isFinite(p)}}}}})],f.prototype,"length",void 0);b.__decorate([r.property({type:String,json:{write:!0}})],f.prototype,"name",void 0);b.__decorate([r.property({type:Boolean,json:{write:!0}})],f.prototype,
"nullable",void 0);b.__decorate([n.enumeration(u.kebabDict)],f.prototype,"type",void 0);b.__decorate([r.property()],f.prototype,"valueType",void 0);b.__decorate([e.reader("valueType",["description"])],f.prototype,"readValueType",null);b.__decorate([r.property({type:Boolean,json:{read:!1}})],f.prototype,"visible",void 0);return f=H=b.__decorate([v.subclass("esri.layers.support.Field")],f)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(b,f,w,r,G,y){f={key:"type",base:r,typeMap:{range:y,"coded-value":w,inherited:G}};b.CodedValueDomain=w;b.DomainBase=r;b.InheritedDomain=G;b.RangeDomain=y;b.fromJSON=function(g){if(!g?.type)return null;switch(g.type){case "range":return y.fromJSON(g);case "codedValue":return w.fromJSON(g);case "inherited":return G.fromJSON(g)}return null};b.types=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(b,f,w,r,G,y,g,n,e){var v;r=v=class extends e{constructor(x){super(x);this.codedValues=null;this.type="coded-value"}getName(x){let u=null;if(this.codedValues){const H=String(x);this.codedValues.some(t=>{String(t.code)===H&&(u=t.name);return!!u})}return u}clone(){return new v({codedValues:f.clone(this.codedValues),name:this.name})}};b.__decorate([w.property({type:[n.CodedValue],json:{write:!0}})],r.prototype,"codedValues",void 0);b.__decorate([y.enumeration({codedValue:"coded-value"})],r.prototype,
"type",void 0);return r=v=b.__decorate([g.subclass("esri.layers.support.CodedValueDomain")],r)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,f,w,r,G,y,g,n){var e;b.CodedValue=e=class extends w.JSONSupport{constructor(v){super(v);this.code=this.name=null}clone(){return new e({name:this.name,
code:this.code})}};f.__decorate([r.property({type:String,json:{write:!0}})],b.CodedValue.prototype,"name",void 0);f.__decorate([r.property({type:[String,Number],json:{write:!0}})],b.CodedValue.prototype,"code",void 0);b.CodedValue=e=f.__decorate([n.subclass("esri.layers.support.CodedValue")],b.CodedValue);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,f,w,r,G,y,g,n,e){f=new f.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});w=class extends w.JSONSupport{constructor(v){super(v);this.type=this.name=null}};b.__decorate([r.property({type:String,json:{write:!0}})],w.prototype,"name",void 0);b.__decorate([n.enumeration(f)],w.prototype,"type",void 0);return w=b.__decorate([e.subclass("esri.layers.support.Domain")],w)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,f,w,r,G,y,g,n){var e;f=e=class extends n{constructor(v){super(v);this.type="inherited"}clone(){return new e}};b.__decorate([y.enumeration({inherited:"inherited"})],f.prototype,"type",void 0);return f=e=b.__decorate([g.subclass("esri.layers.support.InheritedDomain")],f)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(b,f,w,r,G,y,g,n){var e;w=e=class extends n{constructor(v){super(v);this.minValue=this.maxValue=null;this.type="range"}clone(){return new e({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};b.__decorate([f.property({json:{type:[Number],read:{source:"range",reader(v,x){return x.range?.[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(v,x,u){x[u]=[this.minValue||0,v]}}}})],w.prototype,"maxValue",void 0);b.__decorate([f.property({json:{type:[Number],
read:{source:"range",reader(v,x){return x.range?.[0]}},write:{target:"range",writer(v,x,u){x[u]=[v,this.maxValue||0]}}}})],w.prototype,"minValue",void 0);b.__decorate([y.enumeration({range:"range"})],w.prototype,"type",void 0);return w=e=b.__decorate([g.subclass("esri.layers.support.RangeDomain")],w)})},"*noref":1}});
define("../../../core/asyncUtils ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../core/Warning ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../data/FeatureStore ../data/projectionSupport ../data/QueryEngine ./geojson/geojson ./support/sourceUtils ../../ogc/wfsUtils ../../support/FieldsIndex ../../../time/timeZoneUtils".split(" "),function(b,f,w,r,G,y,g,n,e,v,x,u,H,t,p){function*a(N,d,I){for(let R=0;R<d;R++)yield N._pageQuery(R,I)}async function l(N,
d,I){let R=N.next();for(;!R.done;){try{const L=await R.value;d.push(...L)}catch(L){r.isAbortError(L)||I.push(L)}R=N.next()}}function q(N){const d=[];null!=N.totalRecordCount&&(N.features.length<N.totalRecordCount&&d.push({name:"wfs-layer:maxRecordCount-too-low",message:`Could only fetch ${N.features.length} of ${N.totalRecordCount} in ${N.maxPageCount} queries. Try increasing the value of WFSLayer.maxRecordCount.`,details:{recordCount:N.features.length,totalRecordCount:N.totalRecordCount}}),N.totalRecordCount>
N.maxTotalRecordCount&&d.push({name:"wfs-layer:large-dataset",message:`The number of ${N.totalRecordCount} features exceeds the maximum allowed of ${N.maxTotalRecordCount}.`,details:{recordCount:N.features.length,totalRecordCount:N.totalRecordCount,maxTotalRecordCount:N.maxTotalRecordCount}}));return d}class F{constructor(){this._queryEngine=this._customParameters=null;this._supportsPagination=!0}destroy(){this._queryEngine?.destroy();this._queryEngine=null}async load(N,d={}){const {getFeatureUrl:I,
getFeatureOutputFormat:R,fields:L,geometryType:U,featureType:S,maxRecordCount:Q,maxTotalRecordCount:m,maxPageCount:C,objectIdField:z,customParameters:B}=N,{spatialReference:P,getFeatureSpatialReference:K}=H.getGetFeatureSpatialReference(I,S,N.spatialReference);try{await e.checkProjectionSupport(K,P)}catch{throw new f("unsupported-projection","Projection not supported",{inSpatialReference:K,outSpatialReference:P});}r.throwIfAborted(d);this._customParameters=B;this._featureType=S;this._fieldsIndex=
t.fromLayerJSON({fields:L,dateFieldsTimeReference:L.some(T=>"esriFieldTypeDate"===T.type)?{timeZoneIANA:p.utc}:null});this._geometryType=U;this._getFeatureUrl=I;this._getFeatureOutputFormat=R;this._getFeatureSpatialReference=K;this._maxRecordCount=Q;this._maxTotalRecordCount=m;this._maxPageCount=C;this._objectIdField=z;this._spatialReference=P;N=await this._snapshotFeatures(d);if(0<N.errors.length&&(this._supportsPagination=!1,N=await this._snapshotFeatures(d),0<N.errors.length))throw N.errors[0];
this._queryEngine=new v.QueryEngine({fieldsIndex:this._fieldsIndex,geometryType:U,hasM:!1,hasZ:!1,objectIdField:z,spatialReference:P,timeInfo:null,featureStore:new n({geometryType:U,hasM:!1,hasZ:!1})});this._queryEngine.featureStore.addMany(N.features);return{warnings:q(N),extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new f("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer");}async queryFeatures(N={},d={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQuery(N,d.signal)}async queryFeatureCount(N={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(N,d.signal)}async queryObjectIds(N={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(N,d.signal)}async queryExtent(N={},d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(N,d.signal)}async querySnapping(N,d={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(N,
d.signal)}async refresh(N){this._customParameters=N.customParameters;this._maxRecordCount=N.maxRecordCount;this._maxTotalRecordCount=N.maxTotalRecordCount;this._maxPageCount=N.maxPageCount;this._snapshotTask?.abort();this._snapshotTask=b.createTask(d=>this._snapshotFeatures({signal:d}));this._snapshotTask.promise.then(d=>{this._queryEngine.featureStore.clear();this._queryEngine.featureStore.addMany(d.features);for(const I of q(d))w.getLogger("esri.layers.WFSLayer").warn(new G("wfs-layer:refresh-warning",
I.message,I.details));d.errors?.length&&w.getLogger("esri.layers.WFSLayer").warn(new G("wfs-layer:refresh-error","Refresh completed with errors",{errors:d.errors}))},()=>{this._queryEngine.featureStore.clear()});await this._waitSnapshotComplete();return{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures(N){N=
N?.signal;const d=this._maxTotalRecordCount,I=this._maxPageCount,R=this._supportsPagination?await H.getFeatureCount(this._getFeatureUrl,this._featureType.typeName,{customParameters:this._customParameters,signal:N}):void 0;let L=[];const U=[];if(null==R)try{L=await this._singleQuery(N)}catch(S){r.isAbortError(S)||U.push(S)}else{const S=a(this,Math.max(1,Math.min(Math.ceil(Math.min(R,d)/this._maxRecordCount),I)),N);await Promise.allSettled(Array.from({length:10}).map(()=>l(S,L,U)))}r.throwIfAborted(N);
return{features:L,totalRecordCount:R,maxTotalRecordCount:d,maxPageCount:I,errors:U}}async _singleQuery(N){const d=await H.getFeature(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:N});return this._processGeoJSON(d,N)}async _pageQuery(N,d){N=await H.getFeature(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,
startIndex:N*this._maxRecordCount,count:this._maxRecordCount,signal:d});return this._processGeoJSON(N,d)}_processGeoJSON(N,d){x.validateGeoJSON(N,this._getFeatureSpatialReference.wkid);r.throwIfAborted(d);N=x.createOptimizedFeatures(N,{geometryType:this._geometryType,hasZ:!1,objectIdField:this._objectIdField});if(!y.equals(this._spatialReference,this._getFeatureSpatialReference))for(var I of N)null!=I.geometry&&(I.geometry=g.convertFromGeometry(e.project(g.convertToGeometry(I.geometry,this._geometryType,
!1,!1),this._getFeatureSpatialReference,this._spatialReference)));I=1;for(const R of N)d={},u.mixAttributes(this._fieldsIndex,d,R.attributes,!0),R.attributes=d,null==d[this._objectIdField]&&(R.objectId=d[this._objectIdField]=I++);return N}}return F});