// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(d,g,x,u,H,C,f,n,e,t){function B(y,J){return y?J?4:3:J?3:2}function z(y,J,N,W){if(y){if(N)return J&&W?F:Va;if(J&&W)return h}else if(J&&W)return Va;return Sa}function L({scale:y,
translate:J},N){return Math.round((N-J[0])/y[0])}function r({scale:y,translate:J},N){return Math.round((J[1]-N)/y[1])}function q({scale:y,translate:J},N,W){return N*y[W]+J[W]}function a(y){y=y.coords;return{x:y[0],y:y[1]}}function m(y,J){y.coords[0]=J.x;y.coords[1]=J.y;return y}function p(y){y=y.coords;return{x:y[0],y:y[1],z:y[2]}}function G(y,J){y.coords[0]=J.x;y.coords[1]=J.y;y.coords[2]=J.z;return y}function R(y){y=y.coords;return{x:y[0],y:y[1],m:y[2]}}function b(y,J){y.coords[0]=J.x;y.coords[1]=
J.y;y.coords[2]=J.m;return y}function D(y){y=y.coords;return{x:y[0],y:y[1],z:y[2],m:y[3]}}function Q(y,J){y.coords[0]=J.x;y.coords[1]=J.y;y.coords[2]=J.z;y.coords[3]=J.m;return y}function I(y,J){return y&&J?Q:y?G:J?b:m}function T(y,J,N,W,Z){N=I(N,W);for(const {geometry:ba,attributes:da}of J)J=null!=ba?N(new t,ba):null,y.push(new n.OptimizedFeature(J,da,null,Z?da[Z]:void 0));return y}function S(y,J,N=I(null!=J.z,null!=J.m)){return N(y,J)}function P(y,J,N,W){for(const {geometry:Z,attributes:ba}of J)y.push({attributes:ba,
geometry:null!=Z?l(Z,N,W):null});return y}function l(y,J,N){if(null==y)return null;const W=B(J,N),Z=[];for(let ba=0;ba<y.coords.length;ba+=W){const da=[];for(let ia=0;ia<W;ia++)da.push(y.coords[ba+ia]);Z.push(da)}return J?N?{points:Z,hasZ:J,hasM:N}:{points:Z,hasZ:J}:N?{points:Z,hasM:N}:{points:Z}}function A(y,J,N,W,Z){N=B(N,W);for(const {geometry:ba,attributes:da}of J)J=null!=ba?v(new t,ba,N):null,y.push(new n.OptimizedFeature(J,da,null,Z?da[Z]:void 0));return y}function v(y,J,N=B(J.hasZ,J.hasM)){y.lengths[0]=
J.points.length;const W=y.coords;let Z=0;for(const ba of J.points)for(J=0;J<N;J++)W[Z++]=ba[J];return y}function w(y,J,N){if(!y)return null;const W=B(J,N),{coords:Z,lengths:ba}=y;y=[];let da=0;for(const ia of ba){const ka=[];for(let ra=0;ra<ia;ra++){const oa=[];for(let qa=0;qa<W;qa++)oa.push(Z[da++]);ka.push(oa)}y.push(ka)}return J?N?{paths:y,hasZ:J,hasM:N}:{paths:y,hasZ:J}:N?{paths:y,hasM:N}:{paths:y}}function M(y,J,N,W,Z){N=B(N,W);for(const {geometry:ba,attributes:da,centroid:ia}of J)J=null!=ba?
K(new t,ba,N):null,W=null!=ia?S(new t,ia):null,y.push(new n.OptimizedFeature(J,da,W,Z?da[Z]:void 0));return y}function K(y,J,N=B(J.hasZ,J.hasM)){const {lengths:W,coords:Z}=y;let ba=0;for(const da of J.paths){for(const ia of da)for(J=0;J<N;J++)Z[ba++]=ia[J];W.push(da.length)}return y}function U(y,J,N){if(!y)return null;const W=B(J,N),{coords:Z,lengths:ba}=y;y=[];let da=0;for(const ia of ba){const ka=[];for(let ra=0;ra<ia;ra++){const oa=[];for(let qa=0;qa<W;qa++)oa.push(Z[da++]);ka.push(oa)}y.push(ka)}return J?
N?{rings:y,hasZ:J,hasM:N}:{rings:y,hasZ:J}:N?{rings:y,hasM:N}:{rings:y}}function Y(y,J,N=J.hasZ,W=J.hasM){return ea(y,J.rings,N,W)}function ea(y,J,N,W){N=B(N,W);const {lengths:Z,coords:ba}=y;W=0;Da(y);for(const da of J){for(const ia of da)for(J=0;J<N;J++)ba[W++]=ia[J];Z.push(da.length)}return y}function la(y,J,N,W,Z,ba){Ia(y);if(!N){for(const da of J)y.push(new n.OptimizedFeature(null,da.attributes,null,ba?da.attributes[ba]:void 0));return y}switch(N){case "esriGeometryPoint":return T(y,J,W,Z,ba);
case "esriGeometryMultipoint":return A(y,J,W,Z,ba);case "esriGeometryPolyline":return M(y,J,W,Z,ba);case "esriGeometryPolygon":for(const {geometry:da,centroid:ia,attributes:ka}of J)J=null!=da?Y(new t,da,W,Z):null,N=ba?ka[ba]:void 0,null!=ia?y.push(new n.OptimizedFeature(J,ka,m(new t,ia),N)):y.push(new n.OptimizedFeature(J,ka,null,N));break;default:Ra().error("convertToFeatureSet:unknown-geometry",new g(`Unable to parse unknown geometry type '${N}'`)),Ia(y)}return y}function na(y,J,N,W){y=y&&("coords"in
y?y:y.geometry);if(null==y)return null;switch(J){case "esriGeometryPoint":return J=a,N&&W?J=D:N?J=p:W&&(J=R),J(y);case "esriGeometryMultipoint":return l(y,N,W);case "esriGeometryPolyline":return w(y,N,W);case "esriGeometryPolygon":return U(y,N,W);default:return Ra().error("convertToGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${J}'`)),null}}function sa(y,J,N,W,Z){Ia(y);if(null==N){for(const da of J)y.push({attributes:da.attributes});return y}switch(N){case "esriGeometryPoint":N=
a;W&&Z?N=D:W?N=p:Z&&(N=R);for(var ba of J){const {geometry:da,attributes:ia}=ba;W=null!=da?N(da):null;y.push({attributes:ia,geometry:W})}break;case "esriGeometryMultipoint":return P(y,J,W,Z);case "esriGeometryPolyline":for(const {geometry:da,attributes:ia}of J)y.push({attributes:ia,geometry:null!=da?w(da,W,Z):null});break;case "esriGeometryPolygon":for(const {geometry:da,attributes:ia,centroid:ka}of J)ba=null!=da?U(da,W,Z):null,null!=ka?(J=a(ka),y.push({attributes:ia,centroid:J,geometry:ba})):y.push({attributes:ia,
geometry:ba});break;default:Ra().error("convertToFeatureSet:unknown-geometry",new g(`Unable to parse unknown geometry type '${N}'`))}return y}function ua(y,J,N,W,Z,ba,da=N,ia=W){Da(y);if(!J?.coords.length)return null;Z=Na[Z];const {coords:ka,lengths:ra}=J;J=B(N,W);const oa=B(N&&da,W&&ia);N=z(N,W,da,ia);if(!ra.length)return N(y.coords,ka,0,0,L(ba,ka[0]),r(ba,ka[1])),Da(y,J,0),y;let qa,Ca=0,va,Ba=0;for(const Aa of ra){if(Aa<Z)continue;let ya=0;va=Ba;ia=W=L(ba,ka[Ca]);qa=da=r(ba,ka[Ca+1]);N(y.coords,
ka,va,Ca,ia,qa);ya++;Ca+=J;va+=oa;for(let Ha=1;Ha<Aa;Ha++,Ca+=J)if(ia=L(ba,ka[Ca]),qa=r(ba,ka[Ca+1]),ia!==W||qa!==da)N(y.coords,ka,va,Ca,ia-W,qa-da),va+=oa,ya++,W=ia,da=qa;ya>=Z&&(y.lengths.push(ya),Ba=va)}Ia(y.coords,Ba);return y.coords.length?y:null}function ta(y,J,N,W,Z,ba,da){let ia=W,ka=0;for(let oa=ba+N;oa<da;oa+=N){var ra=J[oa];const qa=J[oa+1],Ca=J[da],va=J[da+1];let Ba=J[ba],Aa=J[ba+1],ya=Ca-Ba,Ha=va-Aa;if(0!==ya||0!==Ha){const Pa=((ra-Ba)*ya+(qa-Aa)*Ha)/(ya*ya+Ha*Ha);1<Pa?(Ba=Ca,Aa=va):
0<Pa&&(Ba+=ya*Pa,Aa+=Ha*Pa)}ya=ra-Ba;Ha=qa-Aa;ra=ya*ya+Ha*Ha;ra>ia&&(ka=oa,ia=ra)}ia>W&&(ka-ba>N&&ta(y,J,N,W,Z,ba,ka),Z(y,J,y.length,ka,J[ka],J[ka+1]),da-ka>N&&ta(y,J,N,W,Z,ka,da))}function wa(y,J,N,W,Z){const {coords:ba,lengths:da}=J;N=B(N,W);if(!ba.length)return y!==J&&Da(y),y;u.assertIsSome(Z);const {originPosition:ia,scale:ka,translate:ra}=Z;Z=ha;Z.originPosition=ia;W=Z.scale;W[0]=ka[0]??1;W[1]=-(ka[1]??1);W[2]=ka[2]??1;W[3]=ka[3]??1;var oa=Z.translate;oa[0]=ra[0]??0;oa[1]=ra[1]??0;oa[2]=ra[2]??
0;oa[3]=ra[3]??0;if(!da.length){for(W=0;W<N;++W)y.coords[W]=q(Z,ba[W],W);y!==J&&Da(y,N,0);return y}oa=0;for(let Ca=0;Ca<da.length;Ca++){const va=da[Ca];y.lengths[Ca]=va;for(var qa=0;qa<N;++qa)y.coords[oa+qa]=q(Z,ba[oa+qa],qa);qa=y.coords[oa];let Ba=y.coords[oa+1];oa+=N;for(let Aa=1;Aa<va;Aa++,oa+=N){qa+=ba[oa]*W[0];Ba+=ba[oa+1]*W[1];y.coords[oa]=qa;y.coords[oa+1]=Ba;for(let ya=2;ya<N;++ya)y.coords[oa+ya]=q(Z,ba[oa+ya],ya)}}y!==J&&Da(y,ba.length,da.length);return y}function xa(y,J,N,W){let Z=0,ba=
y[W*J],da=y[W*(J+1)];for(let ia=1;ia<N;ia++){const ka=ba+y[W*(J+ia)],ra=da+y[W*(J+ia)+1],oa=(ka-ba)*(ra+da);ba=ka;da=ra;Z+=oa}return.5*Z}function Da(y,J=0,N=0){Ia(y.lengths,N);Ia(y.coords,J)}function Ia(y,J=0){y.length!==J&&(y.length=J)}const Ra=()=>x.getLogger("esri.layers.graphics.featureConversionUtils"),Na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Sa=(y,J,N,W,Z,ba)=>{y[N]=Z;y[N+1]=ba},Va=(y,J,N,W,Z,ba)=>{y[N]=Z;y[N+1]=ba;
y[N+2]=J[W+2]},h=(y,J,N,W,Z,ba)=>{y[N]=Z;y[N+1]=ba;y[N+2]=J[W+3]},F=(y,J,N,W,Z,ba)=>{y[N]=Z;y[N+1]=ba;y[N+2]=J[W+2];y[N+3]=J[W+3]},X=[],aa=[],ha={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};d.convertFromFeature=function(y,J,N,W,Z){X[0]=y;[y]=la(aa,X,J,N,W,Z);Ia(X);Ia(aa);return y};d.convertFromFeatureSet=function(y,J){const N=new e,{hasM:W,hasZ:Z,features:ba,objectIdFieldName:da,spatialReference:ia,geometryType:ka,exceededTransferLimit:ra,transform:oa,fields:qa}=y;qa&&(N.fields=
qa);N.geometryType=ka??null;N.objectIdFieldName=da??J??null;N.spatialReference=ia??null;if(!N.objectIdFieldName)return Ra().error(new g("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),N;ba&&la(N.features,ba,ka,Z,W,N.objectIdFieldName);ra&&(N.exceededTransferLimit=ra);W&&(N.hasM=W);Z&&(N.hasZ=Z);oa&&(N.transform=oa);return N};d.convertFromFeatures=la;d.convertFromGeometry=function(y,J,N){if(null==y)return null;const W=new t;"hasZ"in y&&null==J&&(J=y.hasZ);"hasM"in y&&
null==N&&(N=y.hasM);if(f.isPoint(y))return I(null!=J?J:null!=y.z,null!=N?N:null!=y.m)(W,y);if(f.isPolygon(y))return Y(W,y,J,N);if(f.isPolyline(y))return K(W,y,B(J,N));if(f.isMultipoint(y))return v(W,y,B(J,N));Ra().error("convertFromGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${y}'`))};d.convertFromMultipoint=v;d.convertFromMultipointFeatures=A;d.convertFromNestedArray=ea;d.convertFromPoint=S;d.convertFromPointFeatures=T;d.convertFromPolygon=Y;d.convertFromPolyline=K;d.convertFromPolylineFeatures=
M;d.convertToFeature=function(y,J,N,W){aa[0]=y;sa(X,aa,J,N,W);y=X[0];Ia(X);Ia(aa);return y};d.convertToFeatureSet=function(y){const {objectIdFieldName:J,spatialReference:N,transform:W,fields:Z,hasM:ba,hasZ:da,features:ia,geometryType:ka,exceededTransferLimit:ra,uniqueIdField:oa,queryGeometry:qa,queryGeometryType:Ca}=y;y=sa([],ia,ka,da,ba);const va=na(qa,Ca,!1,!1);y={features:y,fields:Z,geometryType:ka,objectIdFieldName:J,spatialReference:N,uniqueIdField:oa,queryGeometry:va};W&&(y.transform=W);ra&&
(y.exceededTransferLimit=ra);ba&&(y.hasM=ba);da&&(y.hasZ=da);return y};d.convertToFeatures=sa;d.convertToGeometry=na;d.convertToMultipoint=l;d.convertToMultipointFeatures=P;d.convertToPoint=function(y,J,N){return y?J?N?D(y):p(y):N?R(y):a(y):null};d.convertToPolygon=U;d.convertToPolyline=w;d.deltaDecodeGeometry=function(y,J){if(null==y)return null;const N=y.clone(),W=y.coords;y=y.lengths;let Z=0;for(let ia=0;ia<y.length;ia++){const ka=y[ia];var ba=W[J*Z],da=W[J*Z+1];for(let ra=1;ra<ka;ra++)ba+=W[J*
(Z+ra)],da+=W[J*(Z+ra)+1],N.coords[J*(Z+ra)]=ba,N.coords[J*(Z+ra)+1]=da;Z+=ka}return N};d.deltaEncodeGeometry=function(y,J){const N=y.clone(),W=y.coords;y=y.lengths;let Z=0;for(let da=0;da<y.length;da++){const ia=y[da];let ka=W[J*Z];var ba=W[J*Z+1];for(let ra=1;ra<ia;ra++){const oa=W[J*(Z+ra)],qa=W[J*(Z+ra)+1];ba=qa-ba;N.coords[J*(Z+ra)]=oa-ka;N.coords[J*(Z+ra)+1]=ba;ka=oa;ba=qa}Z+=ia}return N};d.generalizeOptimizedGeometry=function(y,J,N,W,Z,ba,da=N,ia=W){Da(y);if(!J?.coords.length)return null;Z=
Na[Z];const {coords:ka,lengths:ra}=J;J=B(N,W);const oa=B(N&&da,W&&ia);N=z(N,W,da,ia);if(!ra.length)return N(y.coords,ka,0,0,ka[0],ka[1]),Da(y,J,0),y;W=0;ba*=ba;for(const qa of ra){if(qa<Z){W+=qa*J;continue}da=y.coords.length/oa;ia=W;const Ca=W+(qa-1)*J;N(y.coords,ka,y.coords.length,ia,ka[ia],ka[ia+1]);ta(y.coords,ka,J,ba,N,ia,Ca);N(y.coords,ka,y.coords.length,Ca,ka[Ca],ka[Ca+1]);ia=y.coords.length/oa-da;ia>=Z?y.lengths.push(ia):Ia(y.coords,da*oa);W+=qa*J}return y.coords.length?y:null};d.getBoundsOptimizedGeometry=
function(y,J,N,W){if(!J?.coords?.length)return null;N=B(N,W);let Z=W=Number.POSITIVE_INFINITY,ba=Number.NEGATIVE_INFINITY,da=Number.NEGATIVE_INFINITY;if(J&&J.coords){J=J.coords;for(let ia=0;ia<J.length;ia+=N){const ka=J[ia],ra=J[ia+1];W=Math.min(W,ka);ba=Math.max(ba,ka);Z=Math.min(Z,ra);da=Math.max(da,ra)}}H.is(y)?H.fromRectValues(y,W,Z,ba,da):C.fromValues(W,Z,ba,da,y);return y};d.getQuantizedArea=function(y,J){const {coords:N,lengths:W}=y;let Z=y=0;for(let ba=0;ba<W.length;ba++){const da=W[ba];Z+=
xa(N,y,da,J);y+=da}return Math.abs(Z)};d.getQuantizedBoundsOptimizedGeometry=function(y,J,N,W){N=B(N,W);const {lengths:Z,coords:ba}=J;W=J=Number.POSITIVE_INFINITY;let da=Number.NEGATIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,ka=0;for(const ra of Z){let oa=ba[ka],qa=ba[ka+1];J=Math.min(oa,J);W=Math.min(qa,W);da=Math.max(oa,da);ia=Math.max(qa,ia);ka+=N;for(let Ca=1;Ca<ra;Ca++,ka+=N){const va=ba[ka],Ba=ba[ka+1];oa+=va;qa+=Ba;0>va&&(J=Math.min(J,oa));0<va&&(da=Math.max(da,oa));0>Ba?W=Math.min(W,qa):0<Ba&&
(ia=Math.max(ia,qa))}}y[0]=J;y[1]=W;y[2]=da;y[3]=ia;return y};d.getSignedQuantizedRingArea=xa;d.quantizeOptimizedFeatureSet=function(y,J){const {geometryType:N,features:W,hasM:Z,hasZ:ba}=J;if(!y)return J;for(let da=0;da<W.length;da++){const ia=W[da],ka=ia.weakClone();ka.geometry=new t;ua(ka.geometry,ia.geometry,Z,ba,N,y);ia.centroid&&(ka.centroid=new t,ua(ka.centroid,ia.centroid,Z,ba,"esriGeometryPoint",y));W[da]=ka}J.transform=y;return J};d.quantizeOptimizedGeometry=ua;d.quantizeX=L;d.quantizeY=
r;d.removeCollinearVertices=function(y,J,N,W,Z){if(!J?.coords?.length)return null;N=Na[N];const {coords:ba,lengths:da}=J;J=z(W,Z,W,Z);W=B(W,Z);let ia=Z=0,ka=0,ra=0;for(const Ca of da){ia=ra;J(y.coords,ba,ia,Z,ba[Z],ba[Z+1]);Z+=W;var oa=ba[Z];let va=ba[Z+1],Ba=oa,Aa=va;var qa=va/oa;ia+=W;J(y.coords,ba,ia,Z,Ba,Aa);Z+=W;for(let ya=2;ya<Ca;ya++){oa=ba[Z];va=ba[Z+1];const Ha=va/oa,Pa=qa===Ha||!isFinite(qa)&&!isFinite(Ha);qa=Pa&&isFinite(Ha)?0<=qa&&0<=Ha||0>=qa&&0>=Ha:0<=Aa&&0<=va||0>=Aa&&0>=va;Pa&&qa?
(Ba+=oa,Aa+=va):(Ba=oa,Aa=va,ia+=W);J(y.coords,ba,ia,Z,Ba,Aa);Z+=W;qa=Ha}ia+=W;oa=(ia-ra)/W;oa>=N&&(y.lengths[ka]=oa,ra=ia,ka++)}y.coords.length>ra&&(y.coords.length=ra);y.lengths.length>ka&&(y.lengths.length=ka);return y.coords.length&&y.lengths.length?y:null};d.removeZMValues=function(y,J,N,W,Z,ba){Da(y);y.lengths.push(...J.lengths);if(N===Z&&W===ba)for(var da=0;da<J.coords.length;da++)y.coords.push(J.coords[da]);else for(da=B(N,W),N=z(N,W,Z,ba),J=J.coords,W=0;W<J.length;W+=da)N(y.coords,J,y.coords.length,
W,J[W],J[W+1]);return y};d.unquantizeOptimizedFeatureSet=function(y){const {transform:J,features:N,hasM:W,hasZ:Z}=y;if(!J)return y;for(const ba of N)null!=ba.geometry&&wa(ba.geometry,ba.geometry,W,Z,J),null!=ba.centroid&&wa(ba.centroid,ba.centroid,W,Z,J);y.transform=null;return y};d.unquantizeOptimizedGeometry=wa;d.unquantizeValue=q;d.unquantizeX=function(y,J){return q(y,J,0)};d.unquantizeY=function(y,J){return q(y,-J,1)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../Extent","./aaBoundingRect"],function(d,g,x){function u(q=L){return[q[0],q[1],q[2],q[3],q[4],q[5]]}function H(q,a,m,p,G,R,b=u()){b[0]=q;b[1]=a;b[2]=m;b[3]=p;b[4]=G;b[5]=R;return b}function C(q){return q[0]>=q[3]?0:q[3]-q[0]}function f(q){return q[1]>=q[4]?0:q[4]-q[1]}function n(q){return q[2]>=q[5]?0:q[5]-q[2]}function e(q,a){return Math.max(a[0],q[0])<=Math.min(a[3],q[3])&&Math.max(a[1],q[1])<=Math.min(a[4],q[4])&&Math.max(a[2],q[2])<=Math.min(a[5],q[5])}function t(q,a){q[0]=a[0];q[1]=a[1];q[2]=
a[2];q[3]=a[3];q[4]=a[4];q[5]=a[5];return q}function B(q){return 6===q.length}const z=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],L=[0,0,0,0,0,0],r=u();d.allFinite=function(q){for(let a=0;6>a;a++)if(!isFinite(q[a]))return!1;return!0};d.center=function(q,a=[0,0,0]){a[0]=q[0]+C(q)/2;a[1]=q[1]+f(q)/2;a[2]=q[2]+n(q)/2;return a};d.contains=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&a[2]>=q[2]&&a[3]<=q[3]&&a[4]<=q[4]&&a[5]<=q[5]};d.containsPoint=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&
a[2]>=q[2]&&a[0]<=q[3]&&a[1]<=q[4]&&a[2]<=q[5]};d.containsPointWithMargin=function(q,a,m){return a[0]>=q[0]-m&&a[1]>=q[1]-m&&a[2]>=q[2]-m&&a[0]<=q[3]+m&&a[1]<=q[4]+m&&a[2]<=q[5]+m};d.create=u;d.depth=f;d.diameter=function(q){const a=C(q),m=n(q);q=f(q);return Math.sqrt(a*a+m*m+q*q)};d.empty=function(q){return q?t(q,z):u(z)};d.equals=function(q,a,m){if(null==q||null==a)return q===a;if(!B(q)||!B(a))return!1;if(m)for(let p=0;p<q.length;p++){if(!m(q[p],a[p]))return!1}else for(m=0;m<q.length;m++)if(q[m]!==
a[m])return!1;return!0};d.expandWithAABB=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[3]);q[4]=Math.max(q[4],a[4]);q[5]=Math.max(q[5],a[5])};d.expandWithBuffer=function(q,a,m=0,p=a.length/3){let G=q[0],R=q[1],b=q[2],D=q[3],Q=q[4],I=q[5];for(let T=0;T<p;T++)G=Math.min(G,a[m+3*T]),R=Math.min(R,a[m+3*T+1]),b=Math.min(b,a[m+3*T+2]),D=Math.max(D,a[m+3*T]),Q=Math.max(Q,a[m+3*T+1]),I=Math.max(I,a[m+3*T+2]);q[0]=G;q[1]=R;q[2]=b;q[3]=D;q[4]=
Q;q[5]=I};d.expandWithNestedArray=function(q,a,m){const p=a.length;let G=q[0],R=q[1],b=q[2],D=q[3],Q=q[4],I=q[5];if(m)for(m=0;m<p;m++){var T=a[m];G=Math.min(G,T[0]);R=Math.min(R,T[1]);b=Math.min(b,T[2]);D=Math.max(D,T[0]);Q=Math.max(Q,T[1]);I=Math.max(I,T[2])}else for(m=0;m<p;m++)T=a[m],G=Math.min(G,T[0]),R=Math.min(R,T[1]),D=Math.max(D,T[0]),Q=Math.max(Q,T[1]);q[0]=G;q[1]=R;q[2]=b;q[3]=D;q[4]=Q;q[5]=I};d.expandWithOffset=function(q,a,m,p){q[0]=Math.min(q[0],q[0]+a);q[3]=Math.max(q[3],q[3]+a);q[1]=
Math.min(q[1],q[1]+m);q[4]=Math.max(q[4],q[4]+m);q[2]=Math.min(q[2],q[2]+p);q[5]=Math.max(q[5],q[5]+p)};d.expandWithRect=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[3]=Math.max(q[3],a[2]);q[4]=Math.max(q[4],a[3])};d.expandWithVec3=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[0]);q[4]=Math.max(q[4],a[1]);q[5]=Math.max(q[5],a[2])};d.fromExtent=function(q,a=u()){a[0]=q.xmin;a[1]=q.ymin;a[2]=q.hasZ?q.zmin:-Infinity;
a[3]=q.xmax;a[4]=q.ymax;a[5]=q.hasZ?q.zmax:Infinity;return a};d.fromMinMax=function(q,a,m=u()){m[0]=q[0];m[1]=q[1];m[2]=q[2];m[3]=a[0];m[4]=a[1];m[5]=a[2];return m};d.fromRect=function(q,a){q[0]=a[0];q[1]=a[1];q[2]=Number.NEGATIVE_INFINITY;q[3]=a[2];q[4]=a[3];q[5]=Number.POSITIVE_INFINITY;return q};d.fromRectValues=function(q,a,m,p,G){q[0]=a;q[1]=m;q[2]=Number.NEGATIVE_INFINITY;q[3]=p;q[4]=G;q[5]=Number.POSITIVE_INFINITY;return q};d.fromValues=H;d.getMax=function(q,a){a[0]=q[3];a[1]=q[4];a[2]=q[5];
return a};d.getMin=function(q,a){a[0]=q[0];a[1]=q[1];a[2]=q[2];return a};d.height=n;d.intersects=e;d.intersectsClippingArea=function(q,a){return null==a?!0:e(q,a)};d.is=B;d.isPoint=function(q){return 0===C(q)&&0===f(q)&&0===n(q)};d.maximumDimension=function(q){return Math.max(C(q),n(q),f(q))};d.negativeInfinity=z;d.offset=function(q,a,m,p,G=q){G[0]=q[0]+a;G[1]=q[1]+m;G[2]=q[2]+p;G[3]=q[3]+a;G[4]=q[4]+m;G[5]=q[5]+p;return G};d.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];
d.scale=function(q,a,m=q){const p=q[0]+C(q)/2,G=q[1]+f(q)/2,R=q[2]+n(q)/2;m[0]=p+(q[0]-p)*a;m[1]=G+(q[1]-G)*a;m[2]=R+(q[2]-R)*a;m[3]=p+(q[3]-p)*a;m[4]=G+(q[4]-G)*a;m[5]=R+(q[5]-R)*a;return m};d.set=t;d.setMax=function(q,a,m=q){m[3]=a[0];m[4]=a[1];m[5]=a[2];m!==q&&(m[0]=q[0],m[1]=q[1],m[2]=q[2]);return q};d.setMin=function(q,a,m=q){m[0]=a[0];m[1]=a[1];m[2]=a[2];m!==q&&(m[3]=q[3],m[4]=q[4],m[5]=q[5]);return m};d.size=function(q,a=[0,0,0]){a[0]=C(q);a[1]=f(q);a[2]=n(q);return a};d.toExtent=function(q,
a){return isFinite(q[2])||isFinite(q[5])?new g({xmin:q[0],xmax:q[3],ymin:q[1],ymax:q[4],zmin:q[2],zmax:q[5],spatialReference:a}):new g({xmin:q[0],xmax:q[3],ymin:q[1],ymax:q[4],spatialReference:a})};d.toRect=function(q,a){a||=x.create();a[0]=q[0];a[1]=q[1];a[2]=q[3];a[3]=q[4];return a};d.width=C;d.wrap=function(q,a,m,p,G,R){return H(q,a,m,p,G,R,r)};d.zero=L;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports"],function(d){class g{constructor(u=
null,H={},C,f){this.geometry=u;this.attributes=H;this.centroid=C;this.objectId=f;this.geohashY=this.geohashX=this.displayId=0}weakClone(){const u=new g(this.geometry,this.attributes,this.centroid,this.objectId);u.displayId=this.displayId;u.geohashX=this.geohashX;u.geohashY=this.geohashY;return u}clone(){var u=this.geometry?.clone();u=new g(u,{...this.attributes},this.centroid?.clone(),this.objectId);u.displayId=this.displayId;u.geohashX=this.geohashX;u.geohashY=this.geohashY;return u}}class x extends g{}
d.OptimizedFeature=g;d.OptimizedFeatureWithGeometry=x;d.hasGeometry=function(u){return!!u.geometry?.coords?.length};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class d{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=
!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const g=new d;g.objectIdFieldName=this.objectIdFieldName;g.globalIdFieldName=this.globalIdFieldName;g.geohashFieldName=this.geohashFieldName;g.geometryProperties=this.geometryProperties;g.geometryType=this.geometryType;g.spatialReference=this.spatialReference;g.hasZ=this.hasZ;g.hasM=this.hasM;g.features=this.features;g.fields=this.fields;g.transform=this.transform;g.exceededTransferLimit=this.exceededTransferLimit;g.uniqueIdField=
this.uniqueIdField;g.queryGeometry=this.queryGeometry;g.queryGeometryType=this.queryGeometryType;return g}}return d})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class d{constructor(g=[],x=[],u=!1){this.lengths=g??[];this.coords=x??[];this.hasIndeterminateRingOrder=u}static fromRect(g){const [x,u,H,C]=g;g=H-x;const f=C-u;return new d([5],[x,u,g,0,0,f,-g,0,0,-f])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((g,
x)=>g+x)}forEachVertex(g){let x=0;this.lengths.length||g(this.coords[0],this.coords[1]);for(let u=0;u<this.lengths.length;u++){const H=this.lengths[u];for(let C=0;C<H;C++)g(this.coords[2*(C+x)],this.coords[2*(C+x)+1]);x+=H}}deltaDecode(){const g=this.clone(),{coords:x,lengths:u}=g;let H=0;for(const C of u){for(let f=1;f<C;f++)x[2*(H+f)]+=x[2*(H+f)-2],x[2*(H+f)+1]+=x[2*(H+f)-1];H+=C}return g}clone(g){if(0===this.lengths.length)return new d([],[this.coords[0],this.coords[1]]);var x=2*(0===this.lengths.length?
1:this.lengths.reduce((u,H)=>u+H));x=this.coords.slice(0,x);return g?(g.set(x),new d(this.lengths,g,this.hasIndeterminateRingOrder)):new d(Array.from(this.lengths),Array.from(x),this.hasIndeterminateRingOrder)}}return d})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),
function(d,g,x,u,H,C,f,n,e,t){const B=H.create();class z{constructor(L){this.geometryInfo=L;this._boundsStore=new n.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new x;this.featureAdapter=t.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let L=
0;this._featuresById.forEach(r=>{null!=r.geometry&&r.geometry.coords&&(L+=r.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:L/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(L){if(null==this.fullBounds)return null;const [r,q,a,m]=this.fullBounds;return{xmin:r,ymin:q,xmax:a,ymax:m,spatialReference:e.cleanFromGeometryEngine(L)}}add(L){this._add(L);this._emitChanged()}addMany(L){for(const r of L)this._add(r);this._emitChanged()}upsertMany(L){L=L.map(r=>this._upsert(r));
this._emitChanged();return L.filter(d.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(L){L=this._featuresById.get(L);if(!L)return null;this._remove(L);this._emitChanged();return L}removeManyById(L){this._boundsStore.invalidateIndex();for(const r of L)(L=this._featuresById.get(r))&&this._remove(L);this._emitChanged()}forEachBounds(L,r){for(const q of L)(L=this._boundsStore.get(q.objectId))&&r(H.fromRect(B,L))}getFeature(L){return this._featuresById.get(L)}has(L){return this._featuresById.has(L)}forEach(L){this._featuresById.forEach(r=>
L(r))}forEachInBounds(L,r){this._boundsStore.forEachInBounds(L,q=>{r(this._featuresById.get(q))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let L=!1;this._featuresById.forEach((r,q)=>{this._markedIds.has(q)||(L=!0,this._remove(r))});this._markedIds.clear();L&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(L){if(L){var r=L.objectId;if(null==r)u.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature",
"feature id is missing",{feature:L}));else{var q=this._featuresById.get(r);this._markedIds.add(r);if(q){L.displayId=q.displayId;var a=this._boundsStore.get(r);this._boundsStore.delete(r)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(L);L.geometry?.coords?.length?(a=f.getBoundsOptimizedGeometry(null!=a?a:C.create(),L.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(r,a)):this._boundsStore.set(r,null);this._featuresById.set(r,L)}}}_upsert(L){const r=L?.objectId;
if(null==r)return u.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature","feature id is missing",{feature:L})),null;const q=this._featuresById.get(r);if(!q)return this._add(L),L;this._markedIds.add(r);const {geometry:a,attributes:m}=L;for(const p in m)q.attributes[p]=m[p];a&&(q.geometry=a,this._boundsStore.set(r,f.getBoundsOptimizedGeometry(C.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return q}_remove(L){if(null!=this.onFeatureRemove)this.onFeatureRemove(L);
const r=L.objectId;this._markedIds.delete(r);this._boundsStore.delete(r);this._featuresById.delete(r);return L}}return z})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(d,g,x,u){function H(n,e,t){C.minX=e[0];C.minY=e[1];C.maxX=e[2];C.maxY=e[3];n.search(C,t)}const C={minX:0,minY:0,maxX:0,maxY:0};class f{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=
new Map;this._idByBounds=new Map;this._index=new x.PooledRBush(9,g("esri-csp-restrictions")?n=>({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const n=Array(this._idByBounds.size);let e=0;this._idByBounds.forEach((t,B)=>{n[e++]=B});this._indexInvalid=!1;this._index.clear();this._index.load(n)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(n=>this._idByBounds.has(n))))),this._boundsToLoad.length=
0)}}get fullBounds(){if(!this._boundsById.size)return null;const n=u.empty();for(const e of this._boundsById.values())e&&(n[0]=Math.min(e[0],n[0]),n[1]=Math.min(e[1],n[1]),n[2]=Math.max(e[2],n[2]),n[3]=Math.max(e[3],n[3]));return n}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(n){const e=this._boundsById.get(n);this._boundsById.delete(n);e&&(this._idByBounds.delete(e),this._indexInvalid||
this._index.remove(e))}forEachInBounds(n,e){this._loadIndex();H(this._index,n,t=>e(this._idByBounds.get(t)))}get(n){return this._boundsById.get(n)}has(n){return this._boundsById.has(n)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(n,e){if(!this._indexInvalid){const t=this._boundsById.get(n);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(n,e);e&&(this._idByBounds.set(e,n),this._indexInvalid||(this._boundsToLoad.push(e),5E4<
this._boundsToLoad.length&&this._loadIndex()))}}d.BoundsStore=f;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../PooledArray","../../../chunks/quickselect"],function(d,g,x,u){function H(I,T){C(I,0,I.children.length,T,I)}function C(I,T,S,P,l){l||=new D([]);l.minX=Infinity;l.minY=Infinity;l.maxX=-Infinity;l.maxY=-Infinity;for(let A=T,v;A<S;A++)v=I.children[A],f(l,I.leaf?P(v):v);return l}function f(I,
T){I.minX=Math.min(I.minX,T.minX);I.minY=Math.min(I.minY,T.minY);I.maxX=Math.max(I.maxX,T.maxX);I.maxY=Math.max(I.maxY,T.maxY)}function n(I,T){return I.minX-T.minX}function e(I,T){return I.minY-T.minY}function t(I){return(I.maxX-I.minX)*(I.maxY-I.minY)}function B(I){return I.maxX-I.minX+(I.maxY-I.minY)}function z(I,T){return I.minX<=T.minX&&I.minY<=T.minY&&T.maxX<=I.maxX&&T.maxY<=I.maxY}function L(I,T){return T.minX<=I.maxX&&T.minY<=I.maxY&&T.maxX>=I.minX&&T.maxY>=I.minY}function r(I,T,S,P,l){for(T=
[T,S];T.length;){S=T.pop();const A=T.pop();if(S-A<=P)continue;const v=A+Math.ceil((S-A)/P/2)*P;u.quickselect(I,v,A,S,l);T.push(A,v,v,S)}}class q{constructor(I=9,T){this._compareMinX=n;this._compareMinY=e;this._toBBox=S=>S;this._maxEntries=Math.max(4,I||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));T&&("function"===typeof T?this._toBBox=T:this._initFormat(T));this.clear()}destroy(){this.clear();a.prune();m.prune();p.prune();G.prune()}all(I){this._all(this._data,I)}search(I,T){let S=
this._data;const P=this._toBBox;if(L(I,S))for(a.clear();S;){for(let l=0,A=S.children.length;l<A;l++){const v=S.children[l],w=S.leaf?P(v):v;L(I,w)&&(S.leaf?T(v):z(I,w)?this._all(v,T):a.push(v))}S=a.pop()}}collides(I){let T=this._data;const S=this._toBBox;if(!L(I,T))return!1;for(a.clear();T;){for(let P=0,l=T.children.length;P<l;P++){const A=T.children[P],v=T.leaf?S(A):A;if(L(I,v)){if(T.leaf||z(I,v))return!0;a.push(A)}}T=a.pop()}return!1}load(I){if(!I.length)return this;if(I.length<this._minEntries){for(let T=
0,S=I.length;T<S;T++)this.insert(I[T]);return this}I=this._build(I.slice(0,I.length),0,I.length-1,0);if(this._data.children.length)if(this._data.height===I.height)this._splitRoot(this._data,I);else{if(this._data.height<I.height){const T=this._data;this._data=I;I=T}this._insert(I,this._data.height-I.height-1,!0)}else this._data=I;return this}insert(I){I&&this._insert(I,this._data.height-1);return this}clear(){this._data=new D([]);return this}remove(I){if(!I)return this;let T=this._data,S=null,P=0,
l=!1,A;const v=this._toBBox(I);p.clear();for(G.clear();T||0<p.length;){T||(T=p.pop(),S=p.data[p.length-1],P=G.pop()??0,l=!0);if(T.leaf&&(A=g.indexOf(T.children,I,T.children.length,T.indexHint),-1!==A)){T.children.splice(A,1);p.push(T);this._condense(p);break}l||T.leaf||!z(T,v)?S?(P++,T=S.children[P],l=!1):T=null:(p.push(T),G.push(P),P=0,S=T,T=T.children[0])}return this}toJSON(){return this._data}fromJSON(I){this._data=I;return this}_all(I,T){for(m.clear();I;){if(!0===I.leaf)for(const S of I.children)T(S);
else m.pushArray(I.children);I=m.pop()??null}}_build(I,T,S,P){var l=S-T+1,A=this._maxEntries;if(l<=A)return I=new D(I.slice(T,S+1)),H(I,this._toBBox),I;P||(P=Math.ceil(Math.log(l)/Math.log(A)),A=Math.ceil(l/A**(P-1)));const v=new Q([]);v.height=P;l=Math.ceil(l/A);A=l*Math.ceil(Math.sqrt(A));for(r(I,T,S,A,this._compareMinX);T<=S;T+=A){const w=Math.min(T+A-1,S);r(I,T,w,l,this._compareMinY);for(let M=T;M<=w;M+=l)v.children.push(this._build(I,M,Math.min(M+l-1,w),P-1))}H(v,this._toBBox);return v}_chooseSubtree(I,
T,S,P){for(;;){P.push(T);if(!0===T.leaf||P.length-1===S)break;let l=Infinity,A=Infinity,v=void 0;for(let w=0,M=T.children.length;w<M;w++){const K=T.children[w],U=t(K),Y=(Math.max(K.maxX,I.maxX)-Math.min(K.minX,I.minX))*(Math.max(K.maxY,I.maxY)-Math.min(K.minY,I.minY))-U;Y<A?(A=Y,l=U<l?U:l,v=K):Y===A&&U<l&&(l=U,v=K)}T=v||T.children[0]}return T}_insert(I,T,S){var P=this._toBBox;S=S?I:P(I);p.clear();P=this._chooseSubtree(S,this._data,T,p);P.children.push(I);for(f(P,S);0<=T;)if(p.data[T].children.length>
this._maxEntries)this._split(p,T),T--;else break;this._adjustParentBBoxes(S,p,T)}_split(I,T){const S=I.data[T];var P=S.children.length;const l=this._minEntries;this._chooseSplitAxis(S,l,P);(P=this._chooseSplitIndex(S,l,P))?(P=S.children.splice(P,S.children.length-P),P=S.leaf?new D(P):new Q(P),P.height=S.height,H(S,this._toBBox),H(P,this._toBBox),T?I.data[T-1].children.push(P):this._splitRoot(S,P)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}_splitRoot(I,T){this._data=
new Q([I,T]);this._data.height=I.height+1;H(this._data,this._toBBox)}_chooseSplitIndex(I,T,S){let P,l,A=void 0;P=l=Infinity;for(let w=T;w<=S-T;w++){var v=C(I,0,w,this._toBBox);const M=C(I,w,S,this._toBBox),K=Math.max(0,Math.min(v.maxX,M.maxX)-Math.max(v.minX,M.minX))*Math.max(0,Math.min(v.maxY,M.maxY)-Math.max(v.minY,M.minY));v=t(v)+t(M);K<P?(P=K,A=w,l=v<l?v:l):K===P&&v<l&&(l=v,A=w)}return A}_chooseSplitAxis(I,T,S){const P=I.leaf?this._compareMinX:n,l=I.leaf?this._compareMinY:e,A=this._allDistMargin(I,
T,S,P);T=this._allDistMargin(I,T,S,l);A<T&&I.children.sort(P)}_allDistMargin(I,T,S,P){I.children.sort(P);P=this._toBBox;var l=C(I,0,T,P);const A=C(I,S-T,S,P);let v=B(l)+B(A);for(let w=T;w<S-T;w++){const M=I.children[w];f(l,I.leaf?P(M):M);v+=B(l)}for(S=S-T-1;S>=T;S--)l=I.children[S],f(A,I.leaf?P(l):l),v+=B(A);return v}_adjustParentBBoxes(I,T,S){for(;0<=S;S--)f(T.data[S],I)}_condense(I){for(let T=I.length-1;0<=T;T--){const S=I.data[T];if(0===S.children.length)if(0<T){const P=I.data[T-1],l=P.children;
l.splice(g.indexOf(l,S,l.length,P.indexHint),1)}else this.clear();else H(S,this._toBBox)}}_initFormat(I){const T=["return a"," - b",";"];this._compareMinX=new Function("a","b",T.join(I[0]));this._compareMinY=new Function("a","b",T.join(I[1]));this._toBBox=new Function("a","return {minX: a"+I[0]+", minY: a"+I[1]+", maxX: a"+I[2]+", maxY: a"+I[3]+"};")}}const a=new x,m=new x,p=new x,G=new x({deallocator:void 0});class R{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class b extends R{constructor(){super(...arguments);
this.height=1;this.indexHint=new g.PositionHint}}class D extends b{constructor(I){super();this.children=I;this.leaf=!0}}class Q extends b{constructor(I){super();this.children=I;this.leaf=!1}}d.BBox=R;d.PooledRBush=q;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(d,g){var x={exports:{}};(function(u){(function(H){H=H();void 0!==H&&(u.exports=H)})(function(){function H(n,e,t,B,z){for(;B>t;){if(600<
B-t){var L=B-t+1,r=e-t+1,q=Math.log(L),a=.5*Math.exp(2*q/3);q=.5*Math.sqrt(q*a*(L-a)/L)*(0>r-L/2?-1:1);H(n,e,Math.max(t,Math.floor(e-r*a/L+q)),Math.min(B,Math.floor(e+(L-r)*a/L+q)),z)}L=n[e];r=t;a=B;C(n,t,e);for(0<z(n[B],L)&&C(n,t,B);r<a;){C(n,r,a);r++;for(a--;0>z(n[r],L);)r++;for(;0<z(n[a],L);)a--}0===z(n[t],L)?C(n,t,a):(a++,C(n,a,B));a<=e&&(t=a+1);e<=a&&(B=a-1)}}function C(n,e,t){var B=n[e];n[e]=n[t];n[t]=B}function f(n,e){return n<e?-1:n>e?1:0}return function(n,e,t,B,z){H(n,e,t||0,B||n.length-
1,z||f)}})})(x);g=g.getDefaultExportFromCjs(x.exports);d.quickselect=g})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],function(d,g,x){const u=new x,H=new x,C=new x,f={esriGeometryPoint:g.convertToPoint,esriGeometryPolyline:g.convertToPolyline,esriGeometryPolygon:g.convertToPolygon,esriGeometryMultipoint:g.convertToMultipoint},n=(e,t)=>"_geVersion"!==e?t:void 0;d.cleanFromGeometryEngine=function(e){return e&&"_geVersion"in
e?JSON.parse(JSON.stringify(e,n)):e};d.getGeometry=function(e,t,B,z,L,r,q=t,a=B){const m=t&&q,p=B&&a;z=null!=z?"coords"in z?z:z.geometry:null;if(null==z)return null;if(L)return t=g.generalizeOptimizedGeometry(H,z,t,B,e,L,q,a),r&&(t=g.quantizeOptimizedGeometry(C,t,m,p,e,r)),f[e]?.(t,m,p)??null;if(r)return r=g.quantizeOptimizedGeometry(C,z,t,B,e,r,q,a),f[e]?.(r,m,p)??null;g.removeZMValues(u,z,t,B,q,a);return f[e]?.(u,m,p)??null};d.transformCentroid=function(e,t,B,z=e.hasZ,L=e.hasM){if(null==t)return null;
const r=e.hasZ&&z,q=e.hasM&&L;return B?(e=g.quantizeOptimizedGeometry(C,t,e.hasZ,e.hasM,"esriGeometryPoint",B,z,L),g.convertToPoint(e,r,q)):g.convertToPoint(t,r,q)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(d,g,x,u){d.optimizedFeatureQueryEngineAdapter={getObjectId(H){return H.objectId},getAttributes(H){return H.attributes},
getAttribute(H,C){return H.attributes[C]},cloneWithGeometry(H,C){return new x.OptimizedFeature(C,H.attributes,null,H.objectId)},getGeometry(H){return H.geometry},getCentroid(H,C){null==H.centroid&&(H.centroid=g.getCentroidOptimizedGeometry(new u,H.geometry,C.hasZ,C.hasM));return H.centroid}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(d){function g(u,H,C,f,n,e){e=n?e?4:3:e?3:2;let t=C,B=C+e,z=0,L=0,r=C=0,q=
0;for(let a=0,m=f-1;a<m;a++,t+=e,B+=e){f=H[t];const p=H[t+1],G=H[t+2],R=H[B],b=H[B+1],D=H[B+2];let Q=f*b-R*p;r+=Q;z+=(f+R)*Q;L+=(p+b)*Q;n&&(Q=f*D-R*G,C+=(G+D)*Q,q+=Q);f<u[0]&&(u[0]=f);f>u[1]&&(u[1]=f);p<u[2]&&(u[2]=p);p>u[3]&&(u[3]=p);n&&(G<u[4]&&(u[4]=G),G>u[5]&&(u[5]=G))}0<r&&(r*=-1);0<q&&(q*=-1);if(!r)return null;u=[z,L,.5*r];n&&(u[3]=C,u[4]=.5*q);return u}function x(u,H,C,f,n){n=f?n?4:3:n?3:2;let e=H,t=H+n,B=0,z=0,L=0,r=0;for(let p=0,G=C-1;p<G;p++,e+=n,t+=n){var q=u[e];const R=u[e+1],b=u[e+2],
D=u[t],Q=u[t+1],I=u[t+2];if(f){var a=D-q;var m=Q-R;const T=I-b;a=Math.sqrt(a*a+m*m+T*T)}else a=D-q,m=Q-R,a=Math.sqrt(a*a+m*m);a&&(B+=a,f?(q=[q+.5*(D-q),R+.5*(Q-R),b+.5*(I-b)],z+=a*q[0],L+=a*q[1],r+=a*q[2]):(q=[q+.5*(D-q),R+.5*(Q-R)],z+=a*q[0],L+=a*q[1]))}return 0<B?f?[z/B,L/B,r/B]:[z/B,L/B]:0<C?f?[u[H],u[H+1],u[H+2]]:[u[H],u[H+1]]:null}d.getCentroidOptimizedGeometry=function(u,H,C,f){if(!H?.lengths.length)return null;u.lengths.length&&(u.lengths.length=0);u.coords.length&&(u.coords.length=0);const n=
u.coords,e=[],t=C?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:B,coords:z}=H;var L=C?f?4:3:f?3:2;let r=0;for(const q of B){const a=g(t,z,r,q,C,f);a&&e.push(a);r+=q*L}e.sort((q,a)=>{let m=q[2]-a[2];0===m&&C&&(m=q[4]-a[4]);return m});e.length&&(L=6*e[0][2],n[0]=e[0][0]/L,n[1]=e[0][1]/
L,C&&(L=6*e[0][4],n[2]=0!==L?e[0][3]/L:0),n[0]<t[0]||n[0]>t[1]||n[1]<t[2]||n[1]>t[3]||C&&(n[2]<t[4]||n[2]>t[5]))&&(n.length=0);if(!n.length)if(H=H.lengths[0]?x(z,0,B[0],C,f):null)n[0]=H[0],n[1]=H[1],C&&2<H.length&&(n[2]=H[2]);else return null;return u};d.lineCentroid=x;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(d,g,x,u,H,C,f){function n(a,m){if(!m)return null;if("x"in m){var p={x:0,y:0};[p.x,p.y]=a(m.x,m.y,B);null!=m.z&&(p.z=m.z);null!=m.m&&(p.m=m.m);return p}return"xmin"in m?(p={xmin:0,ymin:0,xmax:0,ymax:0},[p.xmin,p.ymin]=a(m.xmin,m.ymin,B),[p.xmax,p.ymax]=a(m.xmax,m.ymax,B),m.hasZ&&(p.zmin=m.zmin,p.zmax=m.zmax,p.hasZ=!0),m.hasM&&(p.mmin=m.mmin,p.mmax=m.mmax,p.hasM=!0),p):"rings"in m?{rings:e(m.rings,a),hasM:m.hasM,hasZ:m.hasZ}:"paths"in m?{paths:e(m.paths,a),hasM:m.hasM,hasZ:m.hasZ}:"points"in
m?{points:t(m.points,a),hasM:m.hasM,hasZ:m.hasZ}:null}function e(a,m){const p=[];for(const G of a)p.push(t(G,m));return p}function t(a,m){const p=[];for(const G of a)a=m(G[0],G[1],[0,0]),p.push(a),2<G.length&&a.push(G[2]),3<G.length&&a.push(G[3]);return p}const B=[0,0],z=n.bind(null,f.lngLatToXY),L=n.bind(null,f.xyToLngLat);class r{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,m,p,G){if(!a?.length||!m||!p||C.equals(m,p))return a;a={geometries:a,inSpatialReference:m,
outSpatialReference:p,geographicTransformation:G,resolve:x.createResolver()};this._jobs.push(a);this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:m,inSpatialReference:p,outSpatialReference:G,resolve:R,geographicTransformation:b}=a;f.canProject(p,G)?C.isWebMercator(G)?R(m.map(z)):R(m.map(L)):R(u.projectMany(H.jsonAdapter,m,p,G,b,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}}}const q=new r;d.checkProjectionSupport=async function(a,m){a&&m&&(a=Array.isArray(a)?a.map(p=>null!=p.geometry?p.geometry.spatialReference:null).filter(g.isSome):[a],await u.initializeProjection(a.map(p=>({source:p,dest:m}))))};d.project=function(a,m,p,G){if(!a)return a;p||(p=m,m=a.spatialReference);return C.isValid(m)&&C.isValid(p)&&!C.equals(m,p)?f.canProject(m,p)?(a=C.isWebMercator(p)?z(a):L(a),a.spatialReference=p,a):u.projectMany(H.jsonAdapter,[a],m,p,null,G)[0]:a};d.projectMany=function(a,
m,p,G){return q.push(a,m,p,G)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(d){class g{constructor(f,n,e){this.x=f;this.y=n;this.spatialReference=e;this.m=this.z=void 0}}class x{constructor(f,n,e,t){this.rings=f;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);t&&(this.hasM=t)}}class u{constructor(f,n,e,t){this.paths=f;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=
e);t&&(this.hasM=t)}}class H{constructor(f,n,e,t){this.points=f;this.spatialReference=n;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);t&&(this.hasM=t)}}class C{constructor(f,n,e,t,B){this.xmin=f;this.ymin=n;this.xmax=e;this.ymax=t;this.spatialReference=B;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}d.jsonAdapter={convertToGEGeometry:function(f,n){return null==n?null:f.convertJSONToGeometry(n)},exportPoint:function(f,n,e){e=new g(f.getPointX(n),f.getPointY(n),e);const t=f.hasZ(n),B=f.hasM(n);t&&(e.z=
f.getPointZ(n));B&&(e.m=f.getPointM(n));return e},exportPolygon:function(f,n,e){return new x(f.exportPaths(n),e,f.hasZ(n),f.hasM(n))},exportPolyline:function(f,n,e){return new u(f.exportPaths(n),e,f.hasZ(n),f.hasM(n))},exportMultipoint:function(f,n,e){return new H(f.exportPoints(n),e,f.hasZ(n),f.hasM(n))},exportExtent:function(f,n,e){var t=f.hasZ(n);const B=f.hasM(n);e=new C(f.getXMin(n),f.getYMin(n),f.getXMax(n),f.getYMax(n),e);t&&(t=f.getZExtent(n),e.zmin=t.vmin,e.zmax=t.vmax);B&&(f=f.getMExtent(n),
e.mmin=f.vmin,e.mmax=f.vmax);return e}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B,z,L,r,q,a,m,p,G,R,b,D,Q,I,T,S,P,l){class A{constructor(K,U=null,Y,ea,la){this.attributes=K;this.geometry=Y;this.centroid=ea;this.filterFlags=la;this.groupId=-1;this.displayId=U}}const v=new f.MemCacheStorage(2E6);let w=0;class M{constructor(K){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:b.queryCapabilities};this.geometryType=K.geometryType;this.hasM=!!K.hasM;this.hasZ=!!K.hasZ;this.objectIdField=K.objectIdField;this.spatialReference=K.spatialReference;
this.definitionExpression=K.definitionExpression;this.featureStore=K.featureStore;this.aggregateAdapter=K.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=K.timeInfo;K.cacheSpatialQueries&&(this._geometryQueryCache=new f.MemCache(w++ +"$$",v));this.fieldsIndex=u.isSerializable(K.fieldsIndex)?K.fieldsIndex:P.fromJSON(K.fieldsIndex);this.availableFields=null==K.availableFields?new Set(this.fieldsIndex.fields.map(U=>U.name)):new Set(K.availableFields.map(U=>
this.fieldsIndex.get(U)?.name).filter(U=>null!=U));K.scheduler&&K.priority&&(this._frameTask=K.scheduler.registerTask(K.priority))}destroy(){this._frameTask=C.removeMaybe(this._frameTask);this.clearCache();C.destroyMaybe(this._geometryQueryCache);this._changeHandle=C.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(K,
U){U=n.signalFromSignalOrOptions(U);try{return(await this._executeQuery(K,{},U)).createQueryResponse()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return(new D.QueryEngineResult([],K,this)).createQueryResponse()}}async executeQueryForCount(K={},U){U=n.signalFromSignalOrOptions(U);try{return(await this._executeQuery(K,{returnGeometry:!1,returnCentroid:!1,outSR:null},U)).createQueryResponseForCount()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(K,U){U=
n.signalFromSignalOrOptions(U);const Y=K.outSR;try{const ea=await this._executeQuery(K,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),la=ea.size;if(!la)return{count:0,extent:null};const na=await this._getBounds(ea.items,ea.spatialReference,Y||this.spatialReference);return{count:la,extent:na}}catch(ea){if(ea===Q.queryEngineEmptyResult)return{count:0,extent:null};throw ea;}}async executeQueryForIds(K,U){return this.executeQueryForIdSet(K,U).then(Y=>Array.from(Y))}async executeQueryForIdSet(K,U){U=
n.signalFromSignalOrOptions(U);try{const Y=await this._executeQuery(K,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),ea=Y.items,la=new Set;await this._reschedule(()=>{for(const na of ea)la.add(Y.featureAdapter.getObjectId(na))},U);return la}catch(Y){if(Y===Q.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(K,U){const Y=n.signalFromSignalOrOptions(U),{point:ea,distance:la,returnEdge:na,vertexMode:sa}=K;if(!na&&"none"===sa)return{candidates:[]};let ua=H.clone(K.query);
ua=await this._schedule(()=>Q.normalizeQueryLike(ua,this.definitionExpression,this.spatialReference),Y);ua=await this._reschedule(()=>I.validateQuery(ua,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);(U=!a.equals(ea.spatialReference,this.spatialReference))&&await R.checkProjectionSupport(ea.spatialReference,this.spatialReference);var ta="number"===typeof la?la:la.x,wa="number"===typeof la?la:la.y;ta={xmin:ea.x-
ta,xmax:ea.x+ta,ymin:ea.y-wa,ymax:ea.y+wa,spatialReference:ea.spatialReference};ta=U?R.project(ta,this.spatialReference):ta;if(!ta)return{candidates:[]};wa=(await q.normalizeCentralMeridian(r.fromJSON(ea),null,{signal:Y}))[0];const xa=(await q.normalizeCentralMeridian(r.fromJSON(ta),null,{signal:Y}))[0];if(null==wa||null==xa)return{candidates:[]};const Da=new D.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(xa.toJSON())),Y),ua,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Da),Y);await this._reschedule(()=>this._executeTimeQuery(Da),Y);await this._reschedule(()=>this._executeAttributesQuery(Da),Y);await this._reschedule(()=>this._executeGeometryQueryForSnapping(Da,Y),Y);wa=wa.toJSON();wa=U?R.project(wa,this.spatialReference):wa;return Da.createSnappingResponse({...K,point:wa,distance:U?Math.max(ta.xmax-ta.xmin,ta.ymax-ta.ymin)/2:la},ea.spatialReference)}async executeQueryForLatestObservations(K,U){U=n.signalFromSignalOrOptions(U);if(!this.timeInfo?.trackIdField)throw new x("unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:K,timeInfo:this.timeInfo});try{const Y=await this._executeQuery(K,{},U);await this._reschedule(()=>this._filterLatest(Y),U);return Y.createQueryResponse()}catch(Y){if(Y!==Q.queryEngineEmptyResult)throw Y;return(new D.QueryEngineResult([],K,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(K={},U,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(K,
{field:ea,normalizationField:la,valueExpression:na},Y)).createSummaryStatisticsResponse(U)}async executeQueryForUniqueValues(K={},U,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,field2:la,field3:na,valueExpression:sa}=U;return(await this._executeQueryForStatistics(K,{field:ea,field2:la,field3:na,valueExpression:sa},Y)).createUniqueValuesResponse(U)}async executeQueryForClassBreaks(K={},U,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(K,
{field:ea,normalizationField:la,valueExpression:na},Y)).createClassBreaksResponse(U)}async executeQueryForHistogram(K={},U,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(K,{field:ea,normalizationField:la,valueExpression:na},Y)).createHistogramResponse(U)}async fetchRecomputedExtents(K){K=n.signalFromSignalOrOptions(K);this._timeExtentPromise||(this._timeExtentPromise=S.getTimeExtent(this.timeInfo,this.featureStore));
const [U,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);n.throwIfAborted(K);return{fullExtent:U,timeExtent:Y}}async _getBounds(K,U,Y){const ea=B.set(B.create(),B.negativeInfinity);await this.featureStore.forEachBounds(K,la=>B.expandWithAABB(ea,la));K={xmin:ea[0],ymin:ea[1],xmax:ea[3],ymax:ea[4],spatialReference:G.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ea[2])&&isFinite(ea[5])&&(K.zmin=ea[2],K.zmax=ea[5]);U=R.project(K,U,Y);U.spatialReference=G.cleanFromGeometryEngine(Y);
0===U.xmax-U.xmin&&(Y=e.getMetersPerUnitForSR(U.spatialReference),U.xmin-=Y,U.xmax+=Y);0===U.ymax-U.ymin&&(Y=e.getMetersPerUnitForSR(U.spatialReference),U.ymin-=Y,U.ymax+=Y);this.hasZ&&null!=U.zmin&&null!=U.zmax&&0===U.zmax-U.zmin&&(Y=e.getMetersPerUnitForSR(U.spatialReference),U.zmin-=Y,U.zmax+=Y);return U}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):
this._getAllFeatures().then(K=>this._getBounds(K,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(K,U){return null!=this._frameTask?this._frameTask.schedule(K,U):K(l.noBudget)}async _reschedule(K,U){return null!=this._frameTask?this._frameTask.reschedule(K,U):K(l.noBudget)}async _getAllFeaturesQueryEngineResult(K){return new D.QueryEngineResult(await this._getAllFeatures(),K,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=
(async()=>{await this.featureStore.forEach(ea=>Y.push(ea))})().then(()=>Y)}const K=this._allFeaturesPromise,U=await K;return K===this._allFeaturesPromise?U.slice():this._getAllFeatures()}async _executeQuery(K,U,Y){K=H.clone(K);K=await this._schedule(()=>Q.normalizeQuery(K,this.definitionExpression,this.spatialReference),Y);K=await this._reschedule(()=>I.validateQuery(K,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),
Y);K={...K,...U};const ea=await this._reschedule(()=>this._executeSceneFilterQuery(K,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(K,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}async _executeSceneFilterQuery(K,U){if(null==K.sceneFilter)return null;const {outSR:Y,
returnGeometry:ea,returnCentroid:la}=K;var na=this.featureStore.featureSpatialReference,sa=K.sceneFilter.geometry;const ua=null==na||a.equals(na,sa.spatialReference)?sa:R.project(sa,na);if(!ua)return null;na=ea||la;na=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&na?async Da=>this._project(Da,Y):Da=>Da;const ta=this.featureAdapter;sa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ua)),U);if("disjoint"===K.sceneFilter.spatialRelationship){if(!sa.length)return null;const Da=
new Set;for(var wa of sa)Da.add(ta.getObjectId(wa));const Ia=await this._reschedule(()=>this._getAllFeatures(),U);wa=await this._reschedule(async()=>{const Ra=await T.getSpatialQueryOperator("esriSpatialRelDisjoint",ua,this.geometryType,this.hasZ,this.hasM),Na=await this._runSpatialFilter(Ia,Sa=>!Da.has(ta.getObjectId(Sa))||Ra(ta.getGeometry(Sa)),U);return new D.QueryEngineResult(Na,K,this)},U);return na(wa)}if(!sa.length)return new D.QueryEngineResult([],K,this);if(this._canExecuteSinglePass(ua,
K))return na(new D.QueryEngineResult(sa,K,this));const xa=await T.getSpatialQueryOperator("esriSpatialRelContains",ua,this.geometryType,this.hasZ,this.hasM);wa=await this._runSpatialFilter(sa,Da=>xa(ta.getGeometry(Da)),U);return na(new D.QueryEngineResult(wa,K,this))}async _executeGeometryQuery(K,U,Y){if(null!=U&&0===U.items.length)return U;K=null!=U?U.query:K;const {geometry:ea,outSR:la,spatialRel:na,returnGeometry:sa,returnCentroid:ua}=K;var ta=this.featureStore.featureSpatialReference;const wa=
!ea||null==ta||a.equals(ta,ea.spatialReference)?ea:R.project(ea,ta),xa=sa||ua,Da=a.isValid(la)&&!a.equals(this.spatialReference,la),Ia=this._geometryQueryCache&&null==U?Da&&xa?JSON.stringify({originalFilterGeometry:ea,spatialRelationship:na,outSpatialReference:la}):JSON.stringify({originalFilterGeometry:ea,spatialRelationship:na}):null;ta=Ia?this._geometryQueryCache.get(Ia):null;if(null!=ta)return new D.QueryEngineResult(ta,K,this);ta=async h=>{Da&&xa&&await this._project(h,la);Ia&&this._geometryQueryCache.put(Ia,
h.items,h.items.length+1);return h};if(!wa)return ta(null!=U?U:await this._getAllFeaturesQueryEngineResult(K));const Ra=this.featureAdapter;let Na=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ea)),Y);if("esriSpatialRelDisjoint"===na){if(!Na.length)return ta(null!=U?U:await this._getAllFeaturesQueryEngineResult(K));const h=new Set;for(var Sa of Na)h.add(Ra.getObjectId(Sa));const F=null!=U?U.items:await this._reschedule(()=>this._getAllFeatures(),Y);Sa=await this._reschedule(async()=>
{const X=await T.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(F,ha=>!h.has(Ra.getObjectId(ha))||X(Ra.getGeometry(ha)),Y);return new D.QueryEngineResult(aa,K,this)},Y);return ta(Sa)}if(null!=U){const h=new g.PositionHint;Na=Na.filter(F=>0<=g.indexOf(U.items,F,U.items.length,h))}if(!Na.length)return ta=new D.QueryEngineResult([],K,this),Ia&&this._geometryQueryCache.put(Ia,ta.items,1),ta;if(this._canExecuteSinglePass(wa,K))return ta(new D.QueryEngineResult(Na,
K,this));const Va=await T.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM);Sa=await this._runSpatialFilter(Na,h=>Va(Ra.getGeometry(h)),Y);return ta(new D.QueryEngineResult(Sa,K,this))}async _executeGeometryQueryForSnapping(K,U){const {query:Y}=K,{spatialRel:ea}=Y;if(K?.items?.length&&Y.geometry&&ea){var la=await T.getSpatialQueryOperator(ea,Y.geometry,this.geometryType,this.hasZ,this.hasM);U=await this._runSpatialFilter(K.items,na=>la(na.geometry),U);K.items=U}}_executeAggregateIdsQuery(K){if(0!==
K.items.length&&K.query.aggregateIds?.length&&null!=this.aggregateAdapter){var U=new Set;for(const ea of K.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ea).forEach(la=>U.add(la));var Y=this.featureAdapter.getObjectId;K.items=K.items.filter(ea=>U.has(Y(ea)))}}_executeObjectIdsQuery(K){if(0!==K.items.length&&K.query.objectIds?.length){var U=new Set(K.query.objectIds),Y=this.featureAdapter.getObjectId;K.items=K.items.filter(ea=>U.has(Y(ea)))}}_executeTimeQuery(K){if(0!==K.items.length){var U=
S.getTimeOperator(this.timeInfo,K.query.timeExtent,this.featureAdapter);null!=U&&(K.items=K.items.filter(U))}}_executeAttributesQuery(K){if(0!==K.items.length){var U=p.getWhereClause(K.query.where,this.fieldsIndex);if(U){if(!U.isStandardized)throw new TypeError("Where clause is not standardized");K.items=K.items.filter(Y=>U.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(K,U,Y){if(!U)return K;if(null==this._frameTask)return K.filter(sa=>U(sa));let ea=0;const la=[],na=async sa=>{for(;ea<
K.length;){const ua=K[ea++];U(ua)&&(la.push(ua),sa.madeProgress());sa.done&&await this._reschedule(ta=>na(ta),Y)}};return this._reschedule(sa=>na(sa),Y).then(()=>la)}_filterLatest(K){const {trackIdField:U,startTimeField:Y,endTimeField:ea}=this.timeInfo,la=ea||Y,na=new Map,sa=this.featureAdapter.getAttribute;for(const ua of K.items){const ta=sa(ua,U),wa=sa(ua,la),xa=na.get(ta);(!xa||wa>sa(xa,la))&&na.set(ta,ua)}K.items=Array.from(na.values())}_canExecuteSinglePass(K,U){({spatialRel:U}=U);return T.canQueryWithRBush(K)&&
("esriSpatialRelEnvelopeIntersects"===U||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===U||"esriSpatialRelContains"===U))}async _project(K,U){if(!U||a.equals(this.spatialReference,U))return K;const Y=this.featureAdapter;let ea=void 0;try{const la=await this._getFullExtent();ea=t.getTransformation(this.spatialReference,U,la)}catch{}U=await R.projectMany(K.items.map(la=>G.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(la))),this.spatialReference,U,ea);K.items=
U.map((la,na)=>Y.cloneWithGeometry(K.items[na],m.convertFromGeometry(la,this.hasZ,this.hasM)));return K}_getQueryBBoxes(K){if(T.canQueryWithRBush(K)){if(r.isExtent(K))return[z.fromValues(Math.min(K.xmin,K.xmax),Math.min(K.ymin,K.ymax),Math.max(K.xmin,K.xmax),Math.max(K.ymin,K.ymax))];if(r.isPolygon(K))return K.rings.map(U=>z.fromValues(Math.min(U[0][0],U[2][0]),Math.min(U[0][1],U[2][1]),Math.max(U[0][0],U[2][0]),Math.max(U[0][1],U[2][1])))}return[L.getBoundsXY(z.create(),K)]}async _searchFeatures(K){const U=
new Set;await Promise.all(K.map(Y=>this.featureStore.forEachInBounds(Y,ea=>U.add(ea))));K=Array.from(U.values());U.clear();return K}async _executeQueryForStatistics(K,U,Y){K=H.clone(K);try{K=await this._schedule(()=>Q.normalizeQuery(K,this.definitionExpression,this.spatialReference),Y);K=await this._reschedule(()=>I.validateStatisticsQuery(K,U,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const ea=await this._reschedule(()=>
this._executeSceneFilterQuery(K,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(K,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}catch(ea){if(ea!==Q.queryEngineEmptyResult)throw ea;return new D.QueryEngineResult([],K,this)}}}d.Feature=A;d.QueryEngine=M;Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(d,g){d.RemoveMode=void 0;(function(f){f[f.ALL=0]="ALL";f[f.SOME=1]="SOME"})(d.RemoveMode||(d.RemoveMode={}));class x{constructor(f,n,e){this.name=f;this._storage=n;this.id=`${H++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);e&&(this._storage.registerRemoveFunc(this.id,e),this._removeFunc=!0)}destroy(){this._storage.clear(this);
this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(f){return this._storage.getSize(this,f)}resetHitRate(){this._hit=this._miss=0}put(f,n,e,t=0){this._storage.put(this,f,n,e,t)}pop(f){f=this._storage.pop(this,f);void 0===f?++this._miss:++this._hit;return f}get(f){f=this._storage.get(this,f);void 0===f?++this._miss:++this._hit;return f}peek(f){return this._storage.peek(this,
f)}updateSize(f,n,e){this._storage.updateSize(this,f,n,e)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class u{get size(){return this._size}constructor(f=10485760){this._maxSize=f;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new g;this._users=new g}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(f){this._users.push(f)}deregister(f){this._users.removeUnordered(f)}registerRemoveFunc(f,
n){this._removeFuncs.push([f,n])}deregisterRemoveFunc(f){this._removeFuncs.filterInPlace(n=>n[0]!==f)}get maxSize(){return this._maxSize}set maxSize(f){this._maxSize=Math.max(f,-1);this._checkSize()}getSize(f,n){return this._db.get(f.id+n)?.size??0}put(f,n,e,t,B){n=f.id+n;const z=this._db.get(n);z&&(this._size-=z.size,f.size-=z.size,this._db.delete(n),z.entry!==e&&this._notifyRemove(n,z.entry,z.size,d.RemoveMode.ALL));t>this._maxSize?this._notifyRemove(n,e,t,d.RemoveMode.ALL):void 0===e?console.warn("Refusing to cache undefined entry "):
!t||0>t?(console.warn(`Refusing to cache entry with size ${t} for key ${n}`),this._notifyRemove(n,e,0,d.RemoveMode.ALL)):(this._db.set(n,new C(e,t,1+Math.max(B,-4)- -3)),this._size+=t,f.size+=t,this._checkSize())}updateSize(f,n,e,t){n=f.id+n;const B=this._db.get(n);if(B&&B.entry===e){this._size-=B.size;for(f.size-=B.size;t>this._maxSize;)if(t=this._notifyRemove(n,e,t,d.RemoveMode.SOME),!(null!=t&&0<t)){this._db.delete(n);return}B.size=t;this._size+=t;f.size+=t;this._checkSize()}}pop(f,n){n=f.id+n;
const e=this._db.get(n);if(e)return this._size-=e.size,f.size-=e.size,this._db.delete(n),++this._hit,e.entry;++this._miss}get(f,n){n=f.id+n;f=this._db.get(n);if(void 0===f)++this._miss;else return this._db.delete(n),f.lives=f.lifetime,this._db.set(n,f),++this._hit,f.entry}peek(f,n){(f=this._db.get(f.id+n))?++this._hit:++this._miss;return f?.entry}get performanceInfo(){const f={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},n={},e=[];this._db.forEach((z,L)=>{const r=z.lifetime;e[r]=(e[r]||0)+z.size;this._users.forAll(q=>{const {id:a,name:m}=q;L.startsWith(a)&&(n[m]=(n[m]||0)+z.size)})});const t={};this._users.forAll(z=>{const L=z.name;"hitRate"in z&&"number"===typeof z.hitRate&&!isNaN(z.hitRate)&&0<z.hitRate?(n[L]=n[L]||0,t[L]=Math.round(100*z.hitRate)+"%"):t[L]="0%"});var B=Object.keys(n);B.sort((z,L)=>n[L]-n[z]);B.forEach(z=>f[z]=Math.round(n[z]/2**20)+"MB / "+t[z]);for(B=e.length-
1;0<=B;--B){const z=e[B];z&&(f["Priority "+(B+-3-1)]=Math.round(z/this._size*100)+"%")}return f}resetStats(){this._hit=this._miss=0;this._users.forAll(f=>f.resetHitRate())}clear(f){const n=f.id;this._db.forEach((e,t)=>{t.startsWith(n)&&(this._size-=e.size,this._db.delete(t),this._notifyRemove(t,e.entry,e.size,d.RemoveMode.ALL))});f.size=0}clearAll(){this._db.forEach((f,n)=>this._notifyRemove(n,f.entry,f.size,d.RemoveMode.ALL));this._users.forAll(f=>f.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(f,n,e,t){let B;this._removeFuncs.some(z=>f.startsWith(z[0])?(z=z[1](n,t,e),"number"===typeof z&&(B=z),!0):!1);return B}_checkSize(){this._users.forAll(f=>this._checkSizeLimits(f));this._checkSizeLimits()}_checkSizeLimits(f){const n=f??this;if(!(0>n.maxSize||n.size<=n.maxSize)){for(var e=f?.id,t=!0;t;){t=!1;for(const [B,z]of this._db)if(0===z.lifetime&&(!e||B.startsWith(e))){this._purgeItem(B,z,f);if(n.size<=.9*n.maxSize)return;t||=this._db.has(B)}}for(const [B,
z]of this._db)if(!e||B.startsWith(e))if(this._purgeItem(B,z,f),n.size<=.9*n.maxSize)break}}_purgeItem(f,n,e=this._users.find(t=>f.startsWith(t.id))){this._db.delete(f);if(1>=n.lives){this._size-=n.size;e&&(e.size-=n.size);const t=this._notifyRemove(f,n.entry,n.size,d.RemoveMode.SOME);null!=t&&0<t&&(this._size+=t,e&&(e.size+=t),n.lives=n.lifetime,n.size=t,this._db.set(f,n))}else--n.lives,this._db.set(f,n)}}let H=0;class C{constructor(f,n,e){this.entry=f;this.size=n;this.lives=this.lifetime=e}}d.MemCache=
x;d.MemCacheStorage=u;d.MinPriority=-3;d.NoPriority=-4;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(d,g,x,u,H,C,f,n,e,t,B){function z(G){const R=[];let b=0,D=0;for(let Q=0;Q<G.length;Q++){const I=
G[Q];let T=null;for(let S=0;S<I.length;S++)T=I[S],R.push(T),0===S?D=b=T[0]:(b=Math.min(b,T[0]),D=Math.max(D,T[0]));T&&R.push([(b+D)/2,0])}return R}function L(G,R){if(!(G instanceof C||G instanceof H))throw p().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new x("straightLineDensify: the input geometry is neither polyline nor polygon");var b=f.getGeometryParts(G);const D=[];for(const I of b){b=[];D.push(b);b.push([I[0][0],I[0][1]]);for(let T=0;T<I.length-1;T++){const S=
I[T][0],P=I[T][1],l=I[T+1][0],A=I[T+1][1];var Q=Math.sqrt((l-S)*(l-S)+(A-P)*(A-P));const v=(A-P)/Q,w=(l-S)/Q,M=Q/R;if(1<M){for(let K=1;K<=M-1;K++){const U=K*R;b.push([w*U+S,v*U+P])}Q=(Q+Math.floor(M-1)*R)/2;b.push([w*Q+S,v*Q+P])}b.push([l,A])}}return"polygon"===G.type?new H({rings:D,spatialReference:G.spatialReference}):new C({paths:D,spatialReference:G.spatialReference})}function r(G,R,b){R&&(G=L(G,1E6),G=e.webMercatorToGeographic(G,!0));b&&(G=f.updatePolyGeometry(G,b));return G}function q(G,R,b){if(Array.isArray(G)){var D=
G[0];D>R?(b=f.offsetMagnitude(D,R),G[0]=D+-2*b*R):D<b&&(R=f.offsetMagnitude(D,b),G[0]=D+-2*R*b)}else D=G.x,D>R?(b=f.offsetMagnitude(D,R),G=G.clone().offset(-2*b*R,0)):D<b&&(R=f.offsetMagnitude(D,b),G=G.clone().offset(-2*R*b,0));return G}function a(G,R){let b=-1;for(let D=0;D<R.cutIndexes.length;D++){const Q=R.cutIndexes[D],I=R.geometries[D],T=f.getGeometryParts(I);for(let S=0;S<T.length;S++){const P=T[S];P.some(l=>{if(180>l[0])return!0;l=0;for(var A=0;A<P.length;A++){var v=P[A][0];l=v>l?v:l}l=Number(l.toFixed(9));
l=-360*f.offsetMagnitude(l,180);for(A=0;A<P.length;A++)v=I.getPoint(S,A),I.setPoint(S,A,v.clone().offset(l,0));return!0})}if(Q===b)if("polygon"===G[0].type)for(const S of f.getGeometryParts(I))G[Q]=G[Q].addRing(S);else{if("polyline"===G[0].type)for(const S of f.getGeometryParts(I))G[Q]=G[Q].addPath(S)}else b=Q,G[Q]=I}return G}async function m(G,R,b){if(!Array.isArray(G))return m([G],R);R&&"string"!==typeof R&&p().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var D="string"===typeof R?R:R?.url??g.geometryServiceUrl;let Q,I,T;let S=0;var P=[];R=[];for(var l of G)if(null==l)R.push(l);else{if(!A){var A=l.spatialReference;var v=n.getInfo(A);var w=(Q=A.isWebMercator)?102100:4326;I=f.cutParams[w].maxX;T=f.cutParams[w].minX;var M=f.cutParams[w].plus180Line;w=f.cutParams[w].minus180Line}if(v)if("mesh"===l.type)R.push(l);else if("point"===l.type)R.push(q(l.clone(),I,T));else if("multipoint"===l.type){var K=l.clone();K.points=K.points.map(U=>q(U,I,T));R.push(K)}else if("extent"===
l.type)K=l.clone()._normalize(!1,!1,v),R.push(K.rings?new H(K):K);else if(l.extent){K=l.extent;const U=2*f.offsetMagnitude(K.xmin,T)*I;let Y=0===U?l.clone():f.updatePolyGeometry(l.clone(),U);K.offset(U,0);K.intersects(M)&&K.xmax!==I?(S=K.xmax>S?K.xmax:S,Y=r(Y,Q),P.push(Y),R.push("cut")):K.intersects(w)&&K.xmin!==T?(S=2*K.xmax*I>S?2*K.xmax*I:S,Y=r(Y,Q,360),P.push(Y),R.push("cut")):R.push(Y)}else R.push(l.clone());else R.push(l)}A=f.offsetMagnitude(S,I);v=-90;M=A;for(l=new C;0<A;)w=-180+360*A,l.addPath([[w,
v],[w,-1*v]]),v*=-1,A--;if(0<P.length&&0<M){A=await t.cut(D,P,l,b);A=a(P,A);v=[];P=[];for(M=0;M<R.length;M++)l=R[M],"cut"!==l?P.push(l):(l=A.shift(),w=G[M],null!=w&&"polygon"===w.type&&w.rings&&1<w.rings.length&&l.rings.length>=w.rings.length?(v.push(l),P.push("simplify")):P.push(Q?e.geographicToWebMercator(l):l));if(!v.length)return P;R=await B.simplify(D,v,b);G=[];for(b=0;b<P.length;b++)D=P[b],"simplify"!==D?G.push(D):G.push(Q?e.geographicToWebMercator(R.shift()):R.shift());return G}G=[];for(b=
0;b<R.length;b++)D=R[b],"cut"!==D?G.push(D):(D=P.shift(),G.push(!0===Q?e.geographicToWebMercator(D):D));return G}const p=()=>u.getLogger("esri.geometry.support.normalizeUtils");d.getClosestDenormalizedXToReference=function(G,R,b){b=n.getInfo(b);if(null==b)return G;const [D,Q]=b.valid;b=2*Q;let I=0,T=0;R>Q?I=Math.ceil(Math.abs(R-Q)/b):R<D&&(I=-Math.ceil(Math.abs(R-D)/b));G>Q?T=Math.ceil(Math.abs(G-Q)/b):G<D&&(T=-Math.ceil(Math.abs(G-D)/b));G+=(I-T)*b;R=G-R;R>Q?G-=b:R<D&&(G+=b);return G};d.getDenormalizedExtent=
function(G){if(!G)return null;const R=G.extent;if(!R)return null;var b=G.spatialReference&&n.getInfo(G.spatialReference);if(!b)return R;const [D,Q]=b.valid;({width:b}=R);let {xmin:I,xmax:T}=R;[I,T]=[T,I];if("extent"===G.type||0===b||b<=Q||b>2*Q||I<D||T>Q)return R;let S;switch(G.type){case "polygon":if(1<G.rings.length)S=z(G.rings);else return R;break;case "polyline":if(1<G.paths.length)S=z(G.paths);else return R;break;case "multipoint":S=G.points}G=R.clone();for(let P=0;P<S.length;P++){let l=S[P][0];
0>l?(l+=Q,T=Math.max(l,T)):(l-=Q,I=Math.min(l,I))}G.xmin=I;G.xmax=T;return G.width<b?(G.xmin-=Q,G.xmax-=Q,G):R};d.normalizeCentralMeridian=m;d.normalizeMapX=function(G,R){if(R=n.getInfo(R)){const [b,D]=R.valid;R=D-b;if(G<b)for(;G<b;)G+=R;if(G>D)for(;G>D;)G-=R}return G};d.straightLineDensify=L;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(d,g,x,u){function H(C){return u.isPolygon(C)?
C.rings:C.paths}g={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new g({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:x.WebMercator}),minus180Line:new g({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:x.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new g({paths:[[[180,-180],[180,180]]],spatialReference:x.WGS84}),minus180Line:new g({paths:[[[-180,
-180],[-180,180]]],spatialReference:x.WGS84})}};d.cutParams=g;d.getGeometryParts=H;d.offsetMagnitude=function(C,f){return Math.ceil((C-f)/(2*f))};d.updatePolyGeometry=function(C,f){const n=H(C);for(const e of n)for(const t of e)t[0]+=f;return C};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),function(d,
g,x,u,H,C){d.cut=async function(f,n,e,t){f=C.parseUrl(f);const B=n[0].spatialReference;n={...t,responseType:"json",query:{...f.query,f:"json",sr:H.srToRESTValue(B),target:JSON.stringify({geometryType:u.getJsonType(n[0]),geometries:n}),cutter:JSON.stringify(e)}};n=await x(f.path+"/cut",n);const {cutIndexes:z,geometries:L=[]}=n.data;return{cutIndexes:z,geometries:L.map(r=>{r=u.fromJSON(r);r.spatialReference=B;return r})}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(d,g,x,u,H,C){function f(n,e,t){const B={};for(const L in n)if("declaredClass"!==L){var z=n[L];null!=z&&"function"!==typeof z&&(Array.isArray(z)?B[L]=z.map(r=>f({item:r},e,t).item):"object"===typeof z?z.toJSON?(z=z.toJSON(t?.[L]),B[L]=e?z:JSON.stringify(z)):B[L]=e?z:JSON.stringify(z):B[L]=z)}return B}d.asValidOptions=function(n,e){return e?{...e,query:{...(n??{}),...e.query}}:{query:n}};d.encode=f;d.getToken=function(n,e){return n?C.supportsApiKey(n)&&(e||g.apiKey)?e||g.apiKey:x.id?.findCredential(n)?.token:
null};d.parseUrl=function(n){return"string"===typeof n?H.urlToObject(n):u.clone(n)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(d,g,x,u,H,C){d.simplify=async function(f,n,e){const t="string"===typeof f?x.urlToObject(f):f;f=n[0].spatialReference;const B=u.getJsonType(n[0]);n={...e,
query:{...t.query,f:"json",sr:H.srToRESTValue(f),geometries:JSON.stringify(C.encodeGeometries(n))}};({data:n}=await g(t.path+"/simplify",n));return C.decodeGeometries(n.geometries,B,f)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(d,g){d.decodeGeometries=function(x,u,H){const C=g.getGeometryType(u);return x.map(f=>{f=C.fromJSON(f);f.spatialReference=H;return f})};d.encodeGeometries=
function(x){return{geometryType:g.getJsonType(x[0]),geometries:x.map(u=>u.toJSON())}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(d,g,x,u){function H(r,q,a={}){const m=C(q,r);if(!m)throw a=B.getError(q,r),new g("unsupported-query","invalid SQL expression",{expression:q,error:a});r=a.expressionName||"expression";
if(a.validateStandardized&&!m.isStandardized)throw new g("unsupported-query",`${r} is not standard`,{expression:q});if(a.validateAggregate&&!m.isAggregate)throw new g("unsupported-query",`${r} does not contain a valid aggregate function`,{expression:q});return m.fieldNames}function C(r,q){return r?B.get(r,q):null}function f(r){return/\((.*?)\)/.test(r)?r:r.split(" as ")[0]}function n(r,q,a,m={}){const p=new Map;e(p,r,q,m.allowedFieldTypes??L,a);if(p.size)throw new g("unsupported-query",`${m.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(p.values()),query:m.query});}function e(r,q,a,m,p){p=p.includes("*")?[...a,...p.filter(G=>"*"!==G)]:p;for(const G of p)if(q.get(G))t(r,q,a,m,G);else try{const R=f(G),b=H(q,R,{validateStandardized:!0});for(const D of b)t(r,q,a,m,D)}catch(R){r.set(G,{type:"expression-error",expression:G,error:R})}}function t(r,q,a,m,p){(q=q.get(p))?a.has(q.name)?"all"!==m&&!1===m?.has(q.type)&&r.set(p,{type:"invalid-type",fieldName:q.name,fieldType:u.kebabDict.fromJSON(q.type),
allowedFieldTypes:Array.from(m,G=>u.kebabDict.fromJSON(G))}):r.set(p,{type:"missing-field",fieldName:q.name}):r.set(p,{type:"invalid-field",fieldName:p})}const B=new x.WhereClauseCache(50,500);x=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const z=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),L=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...x,...z]);d.allDateAndTimeFieldTypes=z;d.getAliasFromFieldName=function(r){return r.split(" as ")[1]};d.getExpressionFromFieldName=f;d.getWhereClause=C;d.numericFieldTypes=x;d.validateFields=n;d.validateHaving=function(r,q,a,m,p){if(!a)return!0;const G=H(r,a,{validateAggregate:!0,expressionName:"having clause"});n(r,q,G,{expressionName:"having clause",query:p});if(!C(a,r)?.getExpressions().every(R=>{const {aggregateType:b,field:D}=R,Q=r.get(D)?.name;return m.some(I=>
{const {onStatisticField:T,statisticType:S}=I;return r.get(T)?.name===Q&&S.toLowerCase().trim()===b})}))throw new g("unsupported-query","expressions in having clause should also exist in outStatistics",{having:a});return!0};d.validateWhere=function(r,q,a,m){if(!a)return!0;a=H(r,a,{validateStandardized:!0,expressionName:"where clause"});n(r,q,a,{expressionName:"where clause",query:m});return!0};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(d,g,x){class u{constructor(H,C){this._cache=new g.LRUCache(H);this._invalidCache=new g.LRUCache(C)}get(H,C){const f=`${C.uid}:${H}`,n=this._cache.get(f);if(n)return n;if(null!=this._invalidCache.get(f))return null;try{const e=x.WhereClause.create(H,C);this._cache.put(f,e);return e}catch(e){return this._invalidCache.put(f,e),null}}getError(H,C){return this._invalidCache.get(`${C.uid}:${H}`)??null}}d.WhereClauseCache=u;Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(d,g){class x{constructor(u,H){this._storage=new g.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=u;this._storage.register(this);H&&this._storage.registerRemoveFunc("",H)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(u,H,C=1){this._storage.put(this,u,H,C,1)}pop(u){return this._storage.pop(this,u)}get(u){return this._storage.get(this,u)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(u){this._storage.maxSize=
u}resetHitRate(){}}d.LRUCache=x;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(d,g,x,u,H,C,f,n,e,t,B,z,L,r,q){function a(l){return Array.isArray(l)?
l:[l]}function m(l){return null!==l?!0!==l:null}function p(l,A){return null!=l&&null!=A?!0===l&&!0===A:!1===l||!1===A?!1:null}function G(l,A){return null!=l&&null!=A?!0===l||!0===A:!0===l||!0===A?!0:null}function R(l,A){if(null==l)return null;let v=!1;for(const w of A)if(null==w)v=null;else if(l===w){v=!0;break}return v}function b(l,A,v){if(null==l)return null;let w="",M=S.Normal;for(let K=0;K<A.length;K++){const U=A.charAt(K);switch(M){case S.Normal:U===v?M=S.Escaped:w="-[]/{}()*+?.\\^$|".includes(U)?
w+("\\"+U):"%"===U?w+".*":"_"===U?w+".":w+U;break;case S.Escaped:w="-[]/{}()*+?.\\^$|".includes(U)?w+("\\"+U):w+U,M=S.Normal}}return(new RegExp("^"+w+"$","m")).test(l)}function D(l,A,v,w){l=w.getAttribute(l,A);A=v?.get(A);return null==l||"esriFieldTypeDate"!==A?.type&&"date"!==A?.type?null==l||"esriFieldTypeDateOnly"!==A?.type&&"date-only"!==A?.type?null==l||"esriFieldTypeTimeOnly"!==A?.type&&"time-only"!==A?.type?null==l||"esriFieldTypeTimestampOffset"!==A?.type&&"timestamp-offset"!==A?.type?l:new B.SqlTimeStampOffset(l):
L.TimeOnly.fromReader(l):C.DateOnly.fromReader(l):e.convertToExecutingTimeZone(new Date(l),v?.getLuxonTimeZone(A.name)??q.FixedOffsetZone.utcInstance)}const Q=new Set(["current_timestamp","current_date","current_time"]);class I{static makeBool(l){return!0===l}static featureValue(l,A,v,w){return D(l,A,v,w)}static equalsNull(l){return null===l}static applyLike(l,A,v){return b(l,A,v)}static ensureArray(l){return a(l)}static applyIn(l,A){return R(l,A)}static currentDate(l){return C.DateOnly.fromNow(l)}static makeSqlInterval(l,
A,v){return t.SqlInterval.createFromValueAndQualifier(l,A,v)}static convertInterval(l){return l instanceof t.SqlInterval?l.valueInMilliseconds():l}static currentTimestamp(l){return e.convertToExecutingTimeZone(new Date,l)}static compare(l,A,v,w){return n.sqlCompare(A,v,l)}static calculate(l,A,v,w){return f.sqlCalculateFunction(l,A,v,w)}static evaluateTime(l){return e.parseTime(l)}static evaluateTimestamp(l,A,v){return e.parseTimestamp(l,A,v)}static evaluateDate(l,A){return e.parseDate(l,A)}static evaluateFunction(l,
A,v){return z.evaluateFunction(l,A,v)}static lookup(l,A){l=A[l];return void 0===l?null:l}static between(l,A,v){return null==l||null==A[0]||null==A[1]?null:n.sqlCompare(l,A[0],"\x3e\x3d")&&n.sqlCompare(l,A[1],"\x3c\x3d")}static notbetween(l,A,v){return null==l||null==A[0]||null==A[1]?null:n.sqlCompare(l,A[0],"\x3c")||n.sqlCompare(l,A[1],"\x3e")}static ternaryNot(l){return m(l)}static ternaryAnd(l,A){return p(l,A)}static ternaryOr(l,A){return G(l,A)}}class T{constructor(l,A,v="UTC"){this.fieldsIndex=
A;this.timeZone=v;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(l);const {isStandardized:w,isAggregate:M,referencedFieldNames:K}=this._extractExpressionInfo(A);this._referencedFieldNames=K;this.isStandardized=w;this.isAggregate=M}static convertValueToStorageFormat(l,A=null){if(null===A)return e.isDate(l)?l.getTime():e.isDateTime(l)?l.toMillis():e.isTimestampOffset(l)?l.toStorageFormat():e.isTimeOnly(l)?l.toStorageString():e.isDateOnly(l)?l.toStorageFormat():
l;switch(A){case "date":if(e.isDate(l))return l.getTime();if(e.isDateTime(l))return l.toMillis();if(e.isTimestampOffset(l))return l.toMilliseconds();if(e.isDateOnly(l))return l.toNumber();break;case "date-only":if(e.isDate(l))return C.DateOnly.fromDateJS(l).toString();if(e.isTimestampOffset(l))return C.DateOnly.fromSqlTimeStampOffset(l).toString();if(e.isDateTime(l))return C.DateOnly.fromDateTime(l).toString();break;case "time-only":if(e.isDate(l))return L.TimeOnly.fromDateJS(l).toStorageString();
if(e.isDateTime(l))return L.TimeOnly.fromDateTime(l).toStorageString();if(e.isTimestampOffset(l))return L.TimeOnly.fromSqlTimeStampOffset(l).toStorageString();if(e.isTimeOnly(l))return l.toStorageString();break;case "timestamp-offset":if(e.isDate(l))return B.SqlTimeStampOffset.fromJSDate(l).toStorageFormat();if(e.isDateTime(l))return B.SqlTimeStampOffset.fromDateTime(l).toStorageFormat();if(e.isTimestampOffset(l))return l.toStorageFormat()}return l}static create(l,A,v="UTC"){return new T(l,A,v)}get fieldNames(){return this._referencedFieldNames}testSet(l,
A=P){return!!this._evaluateNode(this.parseTree,null,A,l)}calculateValue(l,A=P){l=this._evaluateNode(this.parseTree,l,A,null);return l instanceof t.SqlInterval?l.valueInMilliseconds()/864E5:l}calculateValueCompiled(l,A=P){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(l,this.parameters,A,this.fieldsIndex,this.timeZone);if(u("esri-csp-restrictions"))return this.calculateValue(l,A);this._compileMe();return this.parseTree._compiledVersion(l,this.parameters,A,this.fieldsIndex,
this.timeZone)}testFeature(l,A=P){return!!this._evaluateNode(this.parseTree,l,A,null)}testFeatureCompiled(l,A=P){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(l,this.parameters,A,this.fieldsIndex,this.timeZone);if(u("esri-csp-restrictions"))return this.testFeature(l,A);this._compileMe();return!!this.parseTree._compiledVersion(l,this.parameters,A,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=
!1;this._visitAll(this.parseTree,l=>{"current-time"===l.type?this._hasDateFunctions=!0:"function"===l.type&&(this._hasDateFunctions=this._hasDateFunctions||Q.has(l.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const l=new Set;this._visitAll(this.parseTree,A=>{"function"===A.type&&l.add(A.name.toLowerCase())});return Array.from(l)}getExpressions(){const l=new Map;this._visitAll(this.parseTree,A=>{if("function"===A.type){const v=A.name.toLowerCase();A=A.args.value[0];if("column-reference"===
A.type){A=A.column;const w=`${v}-${A}`;l.has(w)||l.set(w,{aggregateType:v,field:A})}}});return[...l.values()]}getVariables(){const l=new Set;this._visitAll(this.parseTree,A=>{"parameter"===A.type&&l.add(A.value.toLowerCase())});return Array.from(l)}_compileMe(){const l="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",l)).bind(I)}_extractExpressionInfo(l){const A=
[],v=new Set;let w=!0,M=!1;this._visitAll(this.parseTree,K=>{switch(K.type){case "column-reference":var U=l?.get(K.column);let Y;U?U=Y=U.name??"":(Y=K.column,U=Y.toLowerCase());v.has(U)||(v.add(U),A.push(Y));K.column=Y;break;case "function":const {name:ea,args:la}=K;K=la.value.length;w&&=z.isStandardized(ea,K);!1===M&&(M=H.isAggregate(ea,K))}});return{referencedFieldNames:Array.from(A),isStandardized:w,isAggregate:M}}_visitAll(l,A){if(null!=l)switch(A(l),l.type){case "when-clause":this._visitAll(l.operand,
A);this._visitAll(l.value,A);break;case "case-expression":for(const v of l.clauses)this._visitAll(v,A);"simple"===l.format&&this._visitAll(l.operand,A);null!==l.else&&this._visitAll(l.else,A);break;case "expression-list":for(const v of l.value)this._visitAll(v,A);break;case "unary-expression":this._visitAll(l.expr,A);break;case "binary-expression":this._visitAll(l.left,A);this._visitAll(l.right,A);break;case "function":this._visitAll(l.args,A)}}evaluateNodeToJavaScript(l){switch(l.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(l.value)+", "+JSON.stringify(l.qualifier)+","+JSON.stringify(l.op)+")";case "case-expression":var A="";if("simple"===l.format){var v=this.evaluateNodeToJavaScript(l.operand);A="( ";for(let w=0;w<l.clauses.length;w++)A+=" (this.compare('\x3d',"+v+","+this.evaluateNodeToJavaScript(l.clauses[w].operand)+") ? ("+this.evaluateNodeToJavaScript(l.clauses[w].value)+") : "}else for(A="( ",v=0;v<l.clauses.length;v++)A+=" this.makeBool("+this.evaluateNodeToJavaScript(l.clauses[v].operand)+
")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(l.clauses[v].value)+") : ";A=null!==l.else?A+this.evaluateNodeToJavaScript(l.else):A+"null";return A+" )";case "parameter":return"this.lookup("+JSON.stringify(l.value.toLowerCase())+",lookups)";case "expression-list":A="[";for(v of l.value)"["!==A&&(A+=","),A+=this.evaluateNodeToJavaScript(v);return A+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(l.expr)+")";case "binary-expression":switch(l.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "IS":if("null"!==l.right.type)throw new x.SqlError(x.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")";case "ISNOT":if("null"!==l.right.type)throw new x.SqlError(x.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+
")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(l.left)+
","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(l.operator)+
","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)"}throw new x.SqlError(x.SqlErrorCodes.UnsupportedOperator,{operator:l.operator});case "null":case "boolean":case "string":case "number":return JSON.stringify(l.value);case "time":return"this.evaluateTime(JSON.stringify(node.value))";
case "date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case "timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case "current-time":return"date"===l.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(l.column)+",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(l.name)+","+this.evaluateNodeToJavaScript(l.args)+", timeZone)"}throw new x.SqlError(x.SqlErrorCodes.UnsupportedSyntax,
{node:l.type});}_evaluateNode(l,A,v,w){switch(l.type){case "interval":return v=this._evaluateNode(l.value,A,v,w),t.SqlInterval.createFromValueAndQualifier(v,l.qualifier,l.op);case "case-expression":if("simple"===l.format){var M=this._evaluateNode(l.operand,A,v,w);for(var K=0;K<l.clauses.length;K++)if(n.sqlCompare(M,this._evaluateNode(l.clauses[K].operand,A,v,w),"\x3d",this.timeZone))return this._evaluateNode(l.clauses[K].value,A,v,w)}else for(M=0;M<l.clauses.length;M++)if(!0===this._evaluateNode(l.clauses[M].operand,
A,v,w))return this._evaluateNode(l.clauses[M].value,A,v,w);return null!==l.else?this._evaluateNode(l.else,A,v,w):null;case "parameter":return l=this.parameters[l.value.toLowerCase()],e.isDate(l)?q.DateTime.fromJSDate(l):l instanceof g.ArcadeDate?l.toDateTime():l;case "expression-list":M=[];for(var U of l.value)M.push(this._evaluateNode(U,A,v,w));return M;case "unary-expression":return m(this._evaluateNode(l.expr,A,v,w));case "binary-expression":switch(l.operator){case "AND":return p(this._evaluateNode(l.left,
A,v,w),this._evaluateNode(l.right,A,v,w));case "OR":return G(this._evaluateNode(l.left,A,v,w),this._evaluateNode(l.right,A,v,w));case "IS":if("null"!==l.right.type)throw new x.SqlError(x.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(l.left,A,v,w);case "ISNOT":if("null"!==l.right.type)throw new x.SqlError(x.SqlErrorCodes.UnsupportedIsRhs);return null!==this._evaluateNode(l.left,A,v,w);case "IN":return M=a(this._evaluateNode(l.right,A,v,w)),R(this._evaluateNode(l.left,A,v,w),M);case "NOT IN":return M=
a(this._evaluateNode(l.right,A,v,w)),m(R(this._evaluateNode(l.left,A,v,w),M));case "BETWEEN":return M=this._evaluateNode(l.left,A,v,w),l=this._evaluateNode(l.right,A,v,w),null==M||null==l[0]||null==l[1]?null:n.sqlCompare(M,l[0],"\x3e\x3d",this.timeZone)&&n.sqlCompare(M,l[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return M=this._evaluateNode(l.left,A,v,w),l=this._evaluateNode(l.right,A,v,w),null==M||null==l[0]||null==l[1]?null:n.sqlCompare(M,l[0],"\x3c",this.timeZone)||n.sqlCompare(M,l[1],"\x3e",
this.timeZone);case "LIKE":return b(this._evaluateNode(l.left,A,v,w),this._evaluateNode(l.right,A,v,w),l.escape);case "NOT LIKE":return m(b(this._evaluateNode(l.left,A,v,w),this._evaluateNode(l.right,A,v,w),l.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return n.sqlCompare(this._evaluateNode(l.left,A,v,w),this._evaluateNode(l.right,A,v,w),l.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return f.sqlCalculateFunction(l.operator,
this._evaluateNode(l.left,A,v,w),this._evaluateNode(l.right,A,v,w),this.timeZone)}case "null":case "boolean":case "string":case "number":return l.value;case "date":return l.parsedValue??(l.parsedValue=e.parseDate(l.value,"unknown")),l.parsedValue;case "timestamp":return l.parsedValue??(l.parsedValue=e.parseTimestamp(l.value,"unknown")),l.parsedValue;case "time":return e.parseTime(l.value);case "current-time":return"date"===l.mode?C.DateOnly.fromNow(this.timeZone):e.convertToExecutingTimeZone(new Date,
this.timeZone);case "column-reference":return D(A,l.column,this.fieldsIndex,v);case "data-type":return l.value;case "function":if(this.isAggregate&&H.isAggregate(l.name,l.args.value.length)){A=[];for(M of l.args?.value||[]){U=[];for(K of w||[])U.push(this._evaluateNode(M,K,v,null));A.push(U)}return H.aggregateFunction(l.name,A)}v=this._evaluateNode(l.args,A,v,w);return z.evaluateFunction(l.name,v,this.timeZone)}throw new x.SqlError(x.SqlErrorCodes.UnsupportedSyntax,{node:l.type});}}var S;(function(l){l[l.Normal=
0]="Normal";l[l.Escaped=1]="Escaped"})(S||={});const P={getAttribute(l,A){return(l&&"object"===typeof l.attributes?l.attributes:l)[A]}};d.WhereClause=T;d.defaultAttributeAdapter=P;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(d,g,x,u){function H(t,B,z){return t<B?t-B:t>z?t-z:0}function C(t,B=!0){if(t instanceof u.Zone)return t;if("system"===t.toLowerCase())return"system";
if("utc"===t.toLowerCase())return"UTC";if("unknown"===t.toLowerCase())return x.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const z=u.FixedOffsetZone.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(z)return z}t=u.IANAZone.create(t);if(!t.isValid){if(B)throw new n(d.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return t}d.ArcadeDateErrorCodes=void 0;(d.ArcadeDateErrorCodes||(d.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";
const f={[d.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class n extends Error{constructor(t,B){super(g.replace(f[t],B));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,n)}}class e{constructor(t){this._date=t;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(t=0,B=1,z=1,L=0,r=0,q=0,a=0,m){if(isNaN(t)||isNaN(B)||isNaN(z)||isNaN(L)||isNaN(r)||isNaN(q)||isNaN(a))return null;const p=
u.DateTime.local(t,B).daysInMonth;t=u.DateTime.fromObject({day:1>z?1:z>p?p:z,year:t,month:1>B?1:12<B?12:B,hour:0>L?0:23<L?23:L,minute:0>r?0:59<r?59:r,second:0>q?0:59<q?59:q,millisecond:0>a?0:999<a?999:a},{zone:C(m)});t=t.plus({months:H(B,1,12),days:H(z,1,p),hours:H(L,0,23),minutes:H(r,0,59),seconds:H(q,0,59),milliseconds:H(a,0,999)});return new e(t)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(t,B){B=
C(B);return t.isUnknownTimeZone||B===x.UnknownTimeZone.instance?e.fromParts(t.year,t.monthJS+1,t.day,t.hour,t.minute,t.second,t.millisecond,B):new e(t._date.setZone(B))}static dateJSToArcadeDate(t){return new e(u.DateTime.fromJSDate(t,{zone:"system"}))}static dateJSAndZoneToArcadeDate(t,B="system"){B=C(B);return new e(u.DateTime.fromJSDate(t,{zone:B}))}static unknownEpochToArcadeDate(t){return new e(u.DateTime.fromMillis(t,{zone:x.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(t){return new e(u.DateTime.fromMillis(t.getTime(),
{zone:x.UnknownTimeZone.instance}))}static epochToArcadeDate(t,B="system"){B=C(B);return new e(u.DateTime.fromMillis(t,{zone:B}))}static dateTimeToArcadeDate(t){return new e(t)}clone(){return new e(this._date)}changeTimeZone(t){t=C(t);return e.dateTimeToArcadeDate(this._date.setZone(t))}static dateTimeAndZoneToArcadeDate(t,B){B=C(B);return t.zone===x.UnknownTimeZone.instance||B===x.UnknownTimeZone.instance?e.fromParts(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond,B):new e(t.setZone(B))}static nowToArcadeDate(t){t=
C(t);return new e(u.DateTime.fromJSDate(new Date,{zone:t}))}static nowUTCToArcadeDate(){return new e(u.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===e.systemTimeZoneCanonicalName}equals(t){return this.isSystem&&t.isSystem?this.toNumber()===t.toNumber():this.isUnknownTimeZone!==t.isUnknownTimeZone?!1:this._date.equals(t._date)}get isUnknownTimeZone(){return this._date.zone===x.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let t=
this._date.weekday;6<t&&(t=0);return t}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const t=this.zone;return"fixed"===t.type?0===t.fixed?"UTC":t.formatOffset(0,"short"):t.name}stringify(){return JSON.stringify(this.toJSDate())}plus(t){return new e(this._date.plus(t))}diff(t,B="milliseconds"){return this._date.diff(t._date,B)[B]}toISODate(){return this._date.toISODate()}toISOString(t){return t?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(t,B){return this._date.toISOTime({suppressMilliseconds:t,
includeOffset:B&&!this.isUnknownTimeZone})}toFormat(t,B){this.isUnknownTimeZone&&(t=t.replaceAll("Z",""));return this._date.toFormat(t,B)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new e(this._date.toUTC())}toLocal(){return new e(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(t){if(!t)return null;
t=u.DateTime.fromISO(t,{setZone:!0});return new e(t)}}d.ArcadeDate=e;d.ArcadeDateError=n;d.arcadeDateErrorMessages=f;d.createDateTimeZone=C;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(d,g){function x(H){return H instanceof g.Zone?H===u.instance?!0:!1:"unknown"===H?.toString().toLowerCase()?!0:!1}class u{}u.instance=new g.IANAZone("Etc/UTC");d.UnknownTimeZone=u;d.adoptTimeZone=function(H,
C){return g.DateTime.fromObject({day:H.day,year:H.year,month:H.month,hour:H.hour,minute:H.minute,second:H.second,millisecond:H.millisecond},{zone:C})};d.isUnknownTimeZone=x;d.substituteUnknownTimezone=function(H){return x(H)?u.instance:H};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(d,g){d.SqlErrorCodes=void 0;(function(f){f.InvalidFunctionParameters="InvalidFunctionParameters";
f.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";f.UnsupportedSqlFunction="UnsupportedSqlFunction";f.UnsupportedOperator="UnsupportedOperator";f.UnsupportedSyntax="UnsupportedSyntax";f.UnsupportedIsRhs="UnsupportedIsRhs";f.UnsupportedIsLhs="UnsupportedIsLhs";f.InvalidDataType="InvalidDataType";f.CannotCastValue="CannotCastValue";f.FunctionNotRecognized="FunctionNotRecognized";f.InvalidTime="InvalidTime";f.InvalidParameterCount="InvalidParameterCount";f.InvalidTimeStamp="InvalidTimeStamp";
f.InvalidDate="InvalidDate";f.InvalidOperator="InvalidOperator";f.IllegalInterval="IllegalInterval";f.YearMonthIntervals="YearMonthIntervals";f.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";f.MissingStatisticParameters="MissingStatisticParameters"})(d.SqlErrorCodes||(d.SqlErrorCodes={}));const x={[d.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[d.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[d.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[d.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[d.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[d.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[d.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[d.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[d.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[d.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[d.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[d.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[d.SqlErrorCodes.IllegalInterval]:"Illegal interval",[d.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[d.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[d.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[d.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[d.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[d.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class u extends Error{constructor(f,n){super(g.replace(x[f],n));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,u)}}d.FeatureSetErrorCodes=void 0;(function(f){f.NeverReach="NeverReach";f.NotImplemented="NotImplemented";f.Cancelled="Cancelled";f.InvalidStatResponse="InvalidStatResponse";f.InvalidRequest="InvalidRequest";f.RequestFailed="RequestFailed";
f.MissingFeatures="MissingFeatures";f.AggregationFieldNotFound="AggregationFieldNotFound";f.DataElementsNotFound="DataElementsNotFound"})(d.FeatureSetErrorCodes||(d.FeatureSetErrorCodes={}));const H={[d.FeatureSetErrorCodes.Cancelled]:"Cancelled",[d.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[d.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[d.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[d.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[d.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[d.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[d.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[d.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class C extends Error{constructor(f,n){super(g.replace(H[f],n));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,C)}}d.FeatureSetError=
C;d.SqlError=u;d.featureSetErrorMessages=H;d.sqlErrorMessages=x;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(d,g,x,u,H,C){function f(B){if(null===B)return null;let z=0,L=0;for(let r=0;r<B.length;r++){const q=B[r];if(null!==q){if("number"!==typeof q)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);
L++;z+=q}}return 0===L?null:z/B.length}function n(B,z){if(null===B)return null;let L=null,r=null;for(const q of B)B=q,B=q instanceof x.DateOnly?q.toNumber():q instanceof H.TimeOnly?q.toNumber():q instanceof C.DateTime?q.toMillis():q instanceof u.SqlTimeStampOffset?q.toMilliseconds():q,null===L?(L=q,r=B):"max"===z&&null!==r&&null!==B&&r<=B?(L=q,r=B):"min"===z&&null!==r&&null!==B&&r>=B&&(L=q,r=B);return L}function e(B){if(null===B)return null;B=B.filter(r=>null!==r);if(0===B.length)return null;const z=
f(B);if(null===z)return null;let L=0;for(const r of B){if("number"!==typeof r)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);L+=(z-r)**2}return L/(B.length-1)}const t={min:{minParams:1,maxParams:1,evaluate:B=>n(B[0],"min")},max:{minParams:1,maxParams:1,evaluate:B=>n(B[0],"max")},avg:{minParams:1,maxParams:1,evaluate:B=>f(B[0])},sum:{minParams:1,maxParams:1,evaluate:B=>{B=B[0];if(null===B)B=null;else{var z=0;for(let L=0;L<B.length;L++){const r=B[L];if(null!==r){if("number"!==
typeof r)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);z+=r}}B=z}return B}},stddev:{minParams:1,maxParams:1,evaluate:B=>{B=B[0];null===B?B=null:(B=e(B),B=null===B?null:Math.sqrt(B));return B}},count:{minParams:1,maxParams:1,evaluate:B=>null==B[0]?null:B[0].length},var:{minParams:1,maxParams:1,evaluate:B=>e(B[0])}};d.aggregateFunction=function(B,z){const L=t[B.toLowerCase()];if(null==L)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(z.length<L.minParams||z.length>
L.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:B.toUpperCase()});return L.evaluate(z)};d.isAggregate=function(B,z){B=t[B.toLowerCase()];return null!=B&&z>=B.minParams&&z<=B.maxParams};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(d,g,x,u){function H(f){f=f.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let n="";const e=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const t of f.match(e)||[])switch(t){case "D":n+="d";break;case "DD":n+="dd";break;case "DDD":n+="o";break;case "d":n+="c";break;case "ddd":n+="ccc";break;case "dddd":n+="cccc";break;case "M":n+="L";break;case "MM":n+="LL";break;case "MMM":n+="LLL";break;case "MMMM":n+="LLLL";break;case "YY":n+="yy";
break;case "Y":case "YYYY":n+="yyyy";break;case "Q":n+="q";break;case "X":case "x":n+=t;break;default:n=2<=t.length&&"["===t.slice(0,1)&&"]"===t.slice(-1)?n+`'${t.slice(1,-1)}'`:n+`'${t}'`}return n}class C{constructor(f,n,e){this._year=f;this._month=n;this._day=e;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(f){return f instanceof
C&&f.day===this.day&&f.month===this.month&&f.year===this.year}clone(){return new C(this._year,this._month,this._day)}toDateTime(f){return u.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(f)})}toDateTimeLuxon(f){return u.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(f)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(f=
null){if(null===f||""===f)return this.toString();f=H(f);if(!f)return"";const n=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(n).toFormat(f,{locale:x.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const f=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(f)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(f,n){return C.fromDateTime(this.toUTCDateTime().plus({[f]:n}))}toUTCDateTime(){return u.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(f,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?this.toUTCDateTime().diff(f.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(f){f=u.DateTime.fromMillis(f,{zone:u.FixedOffsetZone.utcInstance});return f.isValid?C.fromParts(f.year,f.month,f.day):null}static fromSeconds(f){f=u.DateTime.fromSeconds(f,{zone:u.FixedOffsetZone.utcInstance});return f.isValid?C.fromParts(f.year,f.month,f.day):null}static fromReader(f){if(!f)return null;f=f.split("-");return 3!==f.length?null:new C(parseInt(f[0],10),parseInt(f[1],
10),parseInt(f[2],10))}static fromParts(f,n,e){f=new C(f,n,e);return!1===f.isValid?null:f}static fromDateJS(f){return C.fromParts(f.getFullYear(),f.getMonth()+1,f.getDay())}static fromDateTime(f){return C.fromParts(f.year,f.month,f.day)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,n=null){if(""===f||null===f)return null;var e=[];if(n)(n=H(n))&&e.push(n);else if(null===n||""===n)return f=u.DateTime.fromISO(f,{setZone:!0}),f.isValid?C.fromParts(f.year,
f.month,f.day):null;for(const t of e)if(e=u.DateTime.fromFormat(f,n??t),e.isValid)return new C(e.year,e.month,e.day);return null}static fromNow(f="system"){f=u.DateTime.fromJSDate(new Date).setZone(g.createDateTimeZone(f));return new C(f.year,f.month,f.day)}}d.DateOnly=C;d.standardizeDateOnlyFormat=H;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(d,g){function x(H){return Number.isNaN(H)||
0===H?H:Math.trunc(H)}class u{constructor(H){this._timeStampOffset=H;this._date=null}toDateTime(){this._date??(this._date=g.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return x(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return x(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return u.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(H){return new u(g.DateTime.fromJSDate(H).toISO({includeOffset:!0}))}static fromDateTime(H){return new u(H.toISO({includeOffset:!0}))}static fromParts(H,
C,f=0,n=0,e=0,t=0,B=0,z=!1,L=0,r=0){H=`${H.toString().padStart(4,"0")}-${C.toString().padStart(2,"0")}-${f.toString().padStart(2,"0")}`;C="";10>t&&(C="0");n=`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}:${C+t.toString()}`;0!==B&&(n+="."+B.toString().padStart(3,"0"));B=`${z?"-":"+"}${L.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;return new u(H+"T"+n+B)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let H=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});H&&=H.replace(".000","");return H}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(H){H=this.toDateTime().plus(H);return u.fromDateTime(H)}}d.SqlTimeStampOffset=u;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(d,g,x,u){function H(f){if(!f)return"";const n=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let e="";for(const t of f.match(n)||
[])switch(t){case "SSS":e+=t;break;case "A":case "a":e+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":e+=t;break;default:e+=`'${t}'`}return e}class C{constructor(f,n,e,t){this._hour=f;this._minute=n;this._second=e;this._millisecond=t;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(f){return f instanceof C&&f.hour===
this.hour&&f.minute===this.minute&&f.second===this.second&&f.millisecond===this.millisecond}clone(){return new C(this.hour,this.minute,this.second,this.millisecond)}isValid(){return g.isInteger(this.hour)&&g.isInteger(this.minute)&&g.isInteger(this.second)&&g.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(f=null){return null===f||""===f?this.toString():(f=H(f))?u.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(f,{locale:x.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(f,n,e,t){f=new C(f,n,e,t);return f.isValid()?f:null}static fromReader(f){if(!f)return null;f=f.split(":");return 3!==f.length?null:new C(parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],
10),0)}static fromMilliseconds(f){return 864E5<f||0>f?null:new C(Math.floor(f/36E5%24),Math.floor(f/6E4%60),Math.floor(f/1E3%60),Math.floor(f%1E3))}static fromDateJS(f){return new C(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds())}static fromDateTime(f){return new C(f.hour,f.minute,f.second,f.millisecond)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,n=null){if(""===f||null===f)return null;const e=[];if(n)(n=H(n))&&e.push(n);else if(null===
n||""===n)e.push("HH:mm:ss"),e.push("HH:mm:ss.SSS"),e.push("hh:mm:ss a"),e.push("hh:mm:ss.SSS a"),e.push("HH:mm"),e.push("hh:mm a"),e.push("H:mm"),e.push("h:mm a"),e.push("H:mm:ss"),e.push("h:mm:ss a"),e.push("H:mm:ss.SSS"),e.push("h:mm:ss.SSS a");for(const t of e)if(n=u.DateTime.fromFormat(f,t),n.isValid)return new C(n.hour,n.minute,n.second,n.millisecond);return null}plus(f,n){switch(f){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return C.fromDateTime(this.toUTCDateTime().plus({[f]:n}))}return null}toUTCDateTime(){return u.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(f,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}}d.TimeOnly=C;d.standardizeTimeFormat=H;Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(d,g){d.cloneGeometry=function(x){if(null==x)return null;const u=x.clone();void 0!==x.cache._geVersion&&(u.cache._geVersion=x.cache._geVersion);return u};d.convertLinearUnitsToCode=function(x){if(null==x)return null;if("number"===typeof x)return x;x=x.toLowerCase();x=x.replaceAll(/\s/g,"");x=x.replaceAll("-","");switch(x){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};d.convertSquareUnitsToCode=
function(x){if(null==x)return null;if("number"===typeof x)return x;x=x.toLowerCase();x=x.replaceAll(/\s/g,"");x=x.replaceAll("-","");switch(x){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};d.isInteger=function(x){return"number"===typeof x&&isFinite(x)&&Math.floor(x)===x};d.sameGeomType=function(x,u){return x===u||"point"===x&&"esriGeometryPoint"===u||"polyline"===x&&"esriGeometryPolyline"===
u||"polygon"===x&&"esriGeometryPolygon"===u||"extent"===x&&"esriGeometryEnvelope"===u||"multipoint"===x&&"esriGeometryMultipoint"===u||"point"===u&&"esriGeometryPoint"===x||"polyline"===u&&"esriGeometryPolyline"===x||"polygon"===u&&"esriGeometryPolygon"===x||"extent"===u&&"esriGeometryEnvelope"===x||"multipoint"===u&&"esriGeometryMultipoint"===x?!0:!1};d.shapeExtent=function(x){if(null==x)return null;switch(x.type){case "polygon":case "multipoint":case "polyline":return x.extent;case "point":return new g({xmin:x.x,
ymin:x.y,xmax:x.x,ymax:x.y,spatialReference:x.spatialReference});case "extent":return x}return null};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(d,g,x,u,H){function C(y,J,N){switch(N){case "+":return y+J;case "-":return y-J;case "*":return y*J;case "/":return y/J}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function f(y,J,N){switch(N){case "+":return J.plus({milliseconds:y.valueInMilliseconds()});case "-":return y.valueInMilliseconds()-J.toMillis()}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function n(y,J,N){switch(N){case "+":return J.plus("milliseconds",y.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function e(y,J,N){switch(N){case "+":return J.plus("milliseconds",y.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function t(y,
J,N){switch(N){case "+":return y.plus("milliseconds",J.valueInMilliseconds());case "-":return y.plus("milliseconds",-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function B(y,J,N){switch(N){case "+":return J.addMilliseconds(y.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function z(y,J,N){switch(N){case "+":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()+J.valueInMilliseconds());case "-":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()-
J.valueInMilliseconds());case "*":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()*J.valueInMilliseconds());case "/":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()/J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function L(y,J,N){switch(N){case "+":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()+J);case "-":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()-J);case "*":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()*
J);case "/":return u.SqlInterval.createFromMilliseconds(y.valueInMilliseconds()/J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function r(y,J,N){switch(N){case "+":return u.SqlInterval.createFromMilliseconds(y+J.valueInMilliseconds());case "-":return u.SqlInterval.createFromMilliseconds(y-J.valueInMilliseconds());case "*":return u.SqlInterval.createFromMilliseconds(y*J.valueInMilliseconds());case "/":return u.SqlInterval.createFromMilliseconds(y/J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function q(y,J,N){switch(N){case "+":return y.plus("milliseconds",J.valueInMilliseconds());case "-":return y.plus("milliseconds",-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function a(y,J,N){switch(N){case "+":return y.plus({milliseconds:J.valueInMilliseconds()});case "-":return y.minus({milliseconds:J.valueInMilliseconds()})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function m(y,J,N){switch(N){case "+":return y.addMilliseconds(J.valueInMilliseconds());
case "-":return y.addMilliseconds(-1*J.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function p(y,J,N){J*=864E5;switch(N){case "+":return y.plus({milliseconds:J});case "-":return y.minus({milliseconds:J})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function G(y,J,N){J*=864E5;switch(N){case "+":return y.plus("milliseconds",J);case "-":return y.plus("milliseconds",-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function R(y,J,N){J*=864E5;switch(N){case "+":return y.plus("milliseconds",
J);case "-":return y.plus("milliseconds",-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function b(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function D(y,J,N){J*=864E5;switch(N){case "+":return y.addMilliseconds(J);case "-":return y.addMilliseconds(-1*J)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Q(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function I(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function T(y,
J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function S(y,J,N){J=parseFloat(J);if(isNaN(J))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return C(y,J,N)}function P(y,J,N){y=parseFloat(y);if(isNaN(y))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return C(y,J,N)}function l(y,J,N){switch(N){case "+":return y+J}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function A(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function v(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function w(y,J,N){switch(N){case "-":return y.toDateTimeLuxon(J.zone).diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function M(y,J,N){switch(N){case "-":return y.toDateTimeLuxon(J.toDateTime().zone).diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function K(y,J,N){switch(N){case "-":return y.toDateTimeLuxon("UTC").diff(J.toDateTimeLuxon("UTC")).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function U(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function Y(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ea(y,J,N){switch(N){case "-":return y.toDateTime().diff(J.toDateTimeLuxon(y.toDateTime().zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function la(y,J,N){switch(N){case "-":return y.toDateTime().diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function na(y,J,N){switch(N){case "-":return y.toDateTime().diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function sa(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ua(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ta(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function wa(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function xa(y,J,N){switch(N){case "-":return y.diff(J).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Da(y,J,N){switch(N){case "-":return y.diff(J.toDateTimeLuxon(y.zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function Ia(y,J,N){switch(N){case "-":return y.diff(J.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Ra(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Na(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Sa(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Va(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function h(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function F(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function X(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function aa(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ha(y,J,N){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}d.calculateDateOnlyAndDateOnly=K;d.calculateDateOnlyAndDateTime=w;d.calculateDateOnlyAndNumber=G;d.calculateDateOnlyAndSqlInterval=q;d.calculateDateOnlyAndString=Na;d.calculateDateOnlyAndTimeOnly=U;d.calculateDateOnlyAndTimestamp=
M;d.calculateDateTimeAndDateOnly=Da;d.calculateDateTimeAndDateTime=xa;d.calculateDateTimeAndNumber=p;d.calculateDateTimeAndSqlInterval=a;d.calculateDateTimeAndString=Va;d.calculateDateTimeAndTimeOnly=Ra;d.calculateDateTimeAndTimestamp=Ia;d.calculateNumberAndDateOnly=T;d.calculateNumberAndDateTime=b;d.calculateNumberAndNumber=C;d.calculateNumberAndSqlInterval=r;d.calculateNumberAndString=S;d.calculateNumberAndTimeOnly=I;d.calculateNumberAndTimestamp=Q;d.calculateSqlIntervalAndDateOnly=e;d.calculateSqlIntervalAndDateTime=
f;d.calculateSqlIntervalAndNumber=L;d.calculateSqlIntervalAndSqlInterval=z;d.calculateSqlIntervalAndString=A;d.calculateSqlIntervalAndTimeOnly=n;d.calculateSqlIntervalAndTimestamp=B;d.calculateStringAndDateOnly=X;d.calculateStringAndDateTime=aa;d.calculateStringAndNumber=P;d.calculateStringAndSqlInterval=v;d.calculateStringAndString=l;d.calculateStringAndTimeOnly=F;d.calculateStringAndTimestamp=ha;d.calculateTimeOnlyAndDateOnly=ua;d.calculateTimeOnlyAndDateTime=sa;d.calculateTimeOnlyAndNumber=R;d.calculateTimeOnlyAndSqlInterval=
t;d.calculateTimeOnlyAndString=Sa;d.calculateTimeOnlyAndTimeOnly=wa;d.calculateTimeOnlyAndTimestamp=ta;d.calculateTimestampAndDateOnly=ea;d.calculateTimestampAndDateTime=la;d.calculateTimestampAndNumber=D;d.calculateTimestampAndSqlInterval=m;d.calculateTimestampAndString=h;d.calculateTimestampAndTimeOnly=Y;d.calculateTimestampAndTimestamp=na;d.sqlCalculateFunction=function(y,J,N,W){if("||"===y)return H.evaluateFunction("concat",[J,N],W);if(null===J||null===N)return null;if(x.isNumber(J)){if(x.isNumber(N))return C(J,
N,y);if(x.isSqlInterval(N))return r(J,N,y);if(x.isTimeOnly(N))return I();if(x.isDateOnly(N))return T();if(x.isTimestampOffset(N))return Q();if(x.isDateTime(N))return b();if(x.isString(N))return S(J,N,y)}else if(x.isDateOnly(J)){if(x.isNumber(N))return G(J,N,y);if(x.isSqlInterval(N))return q(J,N,y);if(x.isTimeOnly(N))return U();if(x.isDateOnly(N))return K(J,N,y);if(x.isTimestampOffset(N))return M(J,N,y);if(x.isDateTime(N))return w(J,N,y);if(x.isString(N))return Na()}else if(x.isTimeOnly(J)){if(x.isNumber(N))return R(J,
N,y);if(x.isSqlInterval(N))return t(J,N,y);if(x.isTimeOnly(N))return wa();if(x.isDateOnly(N))return ua();if(x.isTimestampOffset(N))return ta();if(x.isDateTime(N))return sa();if(x.isString(N))return Sa()}else if(x.isSqlInterval(J)){if(x.isNumber(N))return L(J,N,y);if(x.isSqlInterval(N))return z(J,N,y);if(x.isTimeOnly(N))return n(J,N,y);if(x.isDateOnly(N))return e(J,N,y);if(x.isTimestampOffset(N))return B(J,N,y);if(x.isDateTime(N))return f(J,N,y);if(x.isString(N))return A()}else if(x.isDateTime(J)){if(x.isNumber(N))return p(J,
N,y);if(x.isSqlInterval(N))return a(J,N,y);if(x.isTimeOnly(N))return Ra();if(x.isDateOnly(N))return Da(J,N,y);if(x.isTimestampOffset(N))return Ia(J,N,y);if(x.isDateTime(N))return xa(J,N,y);if(x.isString(N))return Va()}else if(x.isTimestampOffset(J)){if(x.isNumber(N))return D(J,N,y);if(x.isSqlInterval(N))return m(J,N,y);if(x.isTimeOnly(N))return Y();if(x.isDateOnly(N))return ea(J,N,y);if(x.isTimestampOffset(N))return na(J,N,y);if(x.isDateTime(N))return la(J,N,y);if(x.isString(N))return h()}else if(x.isString(J)){if(x.isNumber(N))return P(J,
N,y);if(x.isSqlInterval(N))return v();if(x.isTimeOnly(N))return F();if(x.isDateOnly(N))return X();if(x.isTimestampOffset(N))return ha();if(x.isDateTime(N))return aa();if(x.isString(N))return l(J,N,y)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(d,g,x,u,H,C,f,n){function e(p,G,R){R=r.exec(p);if(null!==R){const [,b,D,Q,I,T,S,P]=R;p=n.DateTime.fromObject({year:parseInt(b,10),month:parseInt(D,10),day:parseInt(Q,10),hour:parseInt(I,10),minute:parseInt(T,10),second:parseInt(S,10),millisecond:P?parseInt(P.replace(".",""),10):0},{zone:f.substituteUnknownTimezone(G)});if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}R=q.exec(p);if(null!==R){const [,b,D,Q,I,T,S,P,l,A,v]=R;p=H.SqlTimeStampOffset.fromParts(parseInt(b,
10),parseInt(D,10),parseInt(Q,10),parseInt(I,10),parseInt(T,10),parseInt(S,10),P?parseInt(P.replace(".",""),10):0,"-"===l,parseInt(A,10),parseInt(v,10));if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}R=a.exec(p);if(null!==R){const [,b,D,Q,I,T,S,P,l]=R;p=H.SqlTimeStampOffset.fromParts(parseInt(b,10),parseInt(D,10),parseInt(Q,10),parseInt(I,10),parseInt(T,10),0,0,"-"===S,parseInt(P,10),parseInt(l,10));if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);
return p}R=m.exec(p);if(null!==R){const [,b,D,Q,I,T]=R;p=n.DateTime.fromObject({year:parseInt(b,10),month:parseInt(D,10),day:parseInt(Q,10),hour:parseInt(I,10),minute:parseInt(T,10),second:0},{zone:f.substituteUnknownTimezone(G)});if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}R=L.exec(p);if(null!==R){const [,b,D,Q]=R;p=n.DateTime.fromObject({year:parseInt(b,10),month:parseInt(D,10),day:parseInt(Q,10),hour:0,minute:0,second:0},{zone:f.substituteUnknownTimezone(G)});
if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);}const t=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,B=/^(\d{1,2}):(\d{1,2})$/,z=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,L=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,
m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;d.convertToExecutingTimeZone=function(p,G){if(G instanceof n.Zone)return G===f.UnknownTimeZone.instance?n.DateTime.fromMillis(p.getTime(),{zone:f.UnknownTimeZone.instance}):n.DateTime.fromJSDate(p,{zone:G});switch(G){case "system":case "local":case null:return n.DateTime.fromJSDate(p);default:return"unknown"===G?.toLowerCase()?n.DateTime.fromMillis(p.getTime(),{zone:f.UnknownTimeZone.instance}):n.DateTime.fromJSDate(p,{zone:G})}};d.isDate=function(p){return p instanceof
Date};d.isDateOnly=function(p){return p instanceof x.DateOnly};d.isDateTime=function(p){return p instanceof n.DateTime};d.isNumber=function(p){return"number"===typeof p};d.isSqlInterval=function(p){return p instanceof u.SqlInterval};d.isString=function(p){return"string"===typeof p||p instanceof String};d.isTimeOnly=function(p){return p instanceof C.TimeOnly};d.isTimestampOffset=function(p){return p instanceof H.SqlTimeStampOffset};d.parseDate=function(p,G){const R=L.exec(p);if(null===R)try{return e(p,
G)}catch{throw new g.SqlError(g.SqlErrorCodes.InvalidDate);}const [,b,D,Q]=R;p=x.DateOnly.fromParts(parseInt(b,10),parseInt(D,10),parseInt(Q,10));if(null===p)throw new g.SqlError(g.SqlErrorCodes.InvalidDate);return p};d.parseTime=function(p){let G=t.exec(p);if(null!==G){const [,R,b,D]=G;p=C.TimeOnly.fromParts(parseInt(R,10),parseInt(b,10),parseInt(D,10),0);if(null!==p)return p;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}G=B.exec(p);if(null!==G){const [,R,b]=G;p=C.TimeOnly.fromParts(parseInt(R,
10),parseInt(b,10),0,0);if(null!==p)return p;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}G=z.exec(p);if(null!==G){const [,R,b,D,Q]=G;p=C.TimeOnly.fromParts(parseInt(R,10),parseInt(b,10),parseInt(D,10),parseInt(Q,10));if(null!==p)return p}throw new g.SqlError(g.SqlErrorCodes.InvalidTime);};d.parseTimestamp=e;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(d,g){class x{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(u){if(null!==u.precision||null!==u.secondary)throw new g.SqlError(g.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(u,H){H.includes(".")?(H=H.split("."),u.second=parseFloat(H[0]),u.millis=parseInt(H[1],10)):u.second=parseFloat(H)}static createFromMilliseconds(u){const H=new x;H.second=u/1E3;return H}static createFromValueAndQualifier(u,H,C){let f=null;const n=new x;n.op="-"===
C?"-":"+";if("interval-period"===H.type){x._fixDefaults(H);C=RegExp("^[0-9]{1,}$");if("year"===H.period||"month"===H.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);if("second"===H.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(u))x._parseSecondsComponent(n,u);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);else if(C.test(u))n[H.period]=parseFloat(u);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}else{x._fixDefaults(H.start);x._fixDefaults(H.end);if("year"===
H.start.period||"month"===H.start.period||"year"===H.end.period||"month"===H.end.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);switch(H.start.period){case "day":switch(H.end.period){case "hour":f=RegExp("^[0-9]{1,} [0-9]{1,}$");if(f.test(u))n[H.start.period]=parseFloat(u.split(" ")[0]),n[H.end.period]=parseFloat(u.split(" ")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "minute":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(f.test(u))n[H.start.period]=
parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),n.hour=parseFloat(u[0]),n.minute=parseFloat(u[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(u))n[H.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),n.hour=parseFloat(u[0]),n.minute=parseFloat(u[1]),x._parseSecondsComponent(n,u[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(H.end.period){case "minute":f=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(f.test(u))n.hour=parseFloat(u.split(":")[0]),n.minute=parseFloat(u.split(":")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(u))u=u.split(":"),n.hour=parseFloat(u[0]),n.minute=parseFloat(u[1]),x._parseSecondsComponent(n,u[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(H.end.period){case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(u))u=u.split(":"),n.minute=parseFloat(u[0]),x._parseSecondsComponent(n,u[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}}return n}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}d.SqlInterval=x;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(d,g,x,u,H,C,f,n){function e(a){return"string"===typeof a||a instanceof String}function t(a){return C.isDate(a)||C.isDateOnly(a)||
C.isDateTime(a)||C.isTimeOnly(a)||C.isTimestampOffset(a)?!1:!0}function B(a){return C.isDateOnly(a)||C.isTimeOnly(a)?a.toString():C.isTimestampOffset(a)?a.toSQLValue():C.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):C.isDate(a)?B(n.DateTime.fromJSDate(a)):a.toString()}function z(a){if(C.isDate(a))return u.DateOnly.fromDateJS(a);if(C.isDateTime(a))return u.DateOnly.fromParts(a.year,a.month,a.day);if(C.isDateOnly(a))return a;if(C.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(C.isTimestampOffset(a)&&null===u.DateOnly.fromParts(a.year,a.month,a.day))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(e(a)&&(a=u.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function L(a,m,p){if(C.isDate(a))return C.convertToExecutingTimeZone(a,m);if(C.isDateTime(a))return a;if(C.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(C.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(C.isTimestampOffset(a))return a;
if(e(a))return C.parseTimestamp(a,"unknown",p);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function r(a){if(C.isDate(a))return f.TimeOnly.fromDateJS(a);if(C.isDateTime(a))return f.TimeOnly.fromDateTime(a);if(C.isDateOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(C.isTimeOnly(a))return a;if(C.isTimestampOffset(a))return f.TimeOnly.fromSqlTimeStampOffset(a);if(e(a))return C.parseTime(a);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}const q={extract:{minParams:2,
maxParams:2,evaluate:([a,m])=>{if(null==m)return null;if(C.isDate(m))switch(a.toUpperCase()){case "SECOND":return m.getSeconds();case "MINUTE":return m.getMinutes();case "HOUR":return m.getHours();case "DAY":return m.getDate();case "MONTH":return m.getMonth()+1;case "YEAR":return m.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(C.isDateTime(m))switch(a.toUpperCase()){case "SECOND":return m.second;case "MINUTE":return m.minute;case "HOUR":return m.hour;case "DAY":return m.day;
case "MONTH":return m.month;case "YEAR":return m.year}else if(C.isDateOnly(m))switch(a.toUpperCase()){case "DAY":return m.day;case "MONTH":return m.month;case "YEAR":return m.year}else if(C.isTimeOnly(m))switch(a.toUpperCase()){case "SECOND":return m.second;case "MINUTE":return m.minute;case "HOUR":return m.hour}else if(C.isTimestampOffset(m))switch(a.toUpperCase()){case "SECOND":return m.second;case "MINUTE":return m.minute;case "HOUR":return m.hour;case "DAY":return m.day;case "MONTH":return m.month;
case "YEAR":return m.year;case "TIMEZONE_HOUR":return m.timezoneOffsetHour;case "TIMEZONE_MINUTE":return m.timezoneOffsetMinutes}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [m,p]=a;return null==m||null==p?null:m.toString().substring(p-1)}if(3===a.length){const [m,p,G]=a;return null==m||null==p||null==G?null:0>=G?"":m.toString().substring(p-1,p+G-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,m])=>null==a||null==m?null:m.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var m=3===a.length,p=m?a[1]:" ";m=m?a[2]:a[1];if(null==p||null==m)return null;p=`(${x.escapeRegExpString(p)})`;switch(a[0]){case "BOTH":return m.replaceAll(new RegExp(`^${p}*|${p}*$`,"g"),"");case "LEADING":return m.replaceAll(new RegExp(`^${p}*`,"g"),"");case "TRAILING":return m.replaceAll(new RegExp(`${p}*$`,"g"),"")}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const m=a[0];a=2===a.length?10**a[1]:1;return null==m?null:Math.round(m*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>e(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let m="";for(let p=0;p<a.length;p++){if(null==a[p])return null;
m+=a[p].toString()}return m}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const m of a)if(null!==m)return m;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,m)=>H.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,m)=>{const p=a[0];a=a[1];if(null===p)return null;switch(a.type){case "integer":if(!t(p))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);m=parseInt(p,10);if(isNaN(m))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;case "smallint":if(!t(p))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);m=parseInt(p,10);if(isNaN(m))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(32767<m||-32767>m)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;case "float":case "real":if(!t(p))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);m=parseFloat(p);if(isNaN(m))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;case "time":return r(p);case "date":return z(p);case "timestamp":return L(p,m,!0===a.withtimezone);case "varchar":m=B(p);if(m.length>a.size)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;default:throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);
}}}};d.evaluateFunction=function(a,m,p){const G=q[a.toLowerCase()];if(null==G)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(m.length<G.minParams||m.length>G.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return G.evaluate(m,p)};d.isStandardized=function(a,m){a=q[a.toLowerCase()];return null!=a&&m>=a.minParams&&m<=a.maxParams};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(d,g,x,u,H,C){function f(a){return x.isDateTime(a)||x.isTimestampOffset(a)?!0:!1}function n(a){return x.isDateTime(a)||x.isDateOnly(a)||x.isTimestampOffset(a)||x.isTimeOnly(a)?!0:!1}function e(a){if(x.isDateTime(a))return a.toMillis();if(x.isDateOnly(a))return a.toNumber();if(x.isTimestampOffset(a))return a.toMilliseconds();throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);}function t(a,m,p){switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<
m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function B(a,m,p){const G=parseFloat(m);if(!isNaN(G))return t(a,G,p);a=a.toString();switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function z(a,m,p){const G=parseFloat(a);if(!isNaN(G))return t(G,m,p);m=m.toString();switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<
m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function L(a,m,p){switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function r(a,m,p){a instanceof u.SqlTimeStampOffset&&(a=a.toDateTime());m instanceof u.SqlTimeStampOffset&&(m=m.toDateTime());a=q(a);m=q(m);switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=
m;case "\x3c\x3d":return a<=m}}function q(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}d.dateValueInMilliseconds=e;d.isDateOrTimeValue=n;d.isDateTimeComparableValue=f;d.sqlCompare=function(a,m,p,G){if(null==a||null==m)return null;if(x.isNumber(a)){if(x.isNumber(m))return t(a,m,p);if(x.isString(m))return B(a,m,p);if(n(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}else if(x.isString(a)){if(x.isNumber(m))return z(a,m,p);if(x.isString(m))return L(a,m,p);if(x.isDateTime(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isTimestampOffset(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(x.isDateTime(a)){if(f(m)){if(a instanceof C.DateTime&&H.isUnknownTimeZone(a.zone)){if(m instanceof C.DateTime&&
!1===H.isUnknownTimeZone(m.zone)||m instanceof u.SqlTimeStampOffset)return r(a,m,p)}else if(m instanceof C.DateTime&&H.isUnknownTimeZone(m.zone)&&(a instanceof C.DateTime&&!1===H.isUnknownTimeZone(a.zone)||a instanceof u.SqlTimeStampOffset))return r(a,m,p);return t(e(a),e(m),p)}if(x.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(m))return m=m.toDateTimeLuxon(a.zone),a=a.startOf("day"),t(a.toMillis(),m.toMillis(),p);if(x.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(x.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(x.isDateOnly(a)){if(x.isTimestampOffset(m))return a=a.toDateTimeLuxon(m.toDateTime().zone),m=m.startOfDay(),t(a.toMillis(),m.toMilliseconds(),p);if(x.isDateTime(m))return a=a.toDateTimeLuxon(m.zone),m=m.startOf("day"),t(a.toMillis(),m.toMillis(),p);if(x.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(m))return t(a.toNumber(),m.toNumber(),p);if(x.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(x.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(x.isTimeOnly(a)){if(x.isTimeOnly(m))return t(a.toNumber(),m.toNumber(),p);if(x.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(f(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(x.isTimestampOffset(a)){if(f(m))return m instanceof C.DateTime&&
H.isUnknownTimeZone(m.zone)?r(a,m,p):t(e(a),e(m),p);if(x.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isDateOnly(m))return m=m.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),t(a.toMilliseconds(),m.toMillis(),p);if(x.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(x.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=
m;case "\x3c\x3d":return a<=m}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(d,g){var x={exports:{}};(function(C){(function(f,n){C.exports&&(C.exports=n())})(g.commonjsGlobal,function(){function f(e,t,B,z){e=Error.call(this,e);Object.setPrototypeOf&&Object.setPrototypeOf(e,f.prototype);e.expected=t;e.found=B;e.location=z;e.name="SyntaxError";return e}function n(e,t,B){B=B||" ";if(e.length>
t)return e;t-=e.length;B+=B.repeat(t);return e+B.slice(0,t)}(function(e,t){function B(){this.constructor=e}B.prototype=t.prototype;e.prototype=new B})(f,Error);f.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var B=null,z;for(z=0;z<e.length;z++)if(e[z].source===this.location.source){B=e[z].text.split(/\r\n|\n|\r/g);break}e=this.location.start;z=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(e):e;var L=this.location.source+
":"+z.line+":"+z.column;if(B){var r=this.location.end,q=n("",z.line.toString().length," ");B=B[e.line-1];r=(e.line===r.line?r.column:B.length+1)-e.column||1;t+="\n --\x3e "+L+"\n"+q+" |\n"+z.line+" | "+B+"\n"+q+" | "+n("",e.column-1," ")+n("",r,"^")}else t+="\n at "+L}return t};f.buildMessage=function(e,t){function B(a){return a.charCodeAt(0).toString(16).toUpperCase()}function z(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+B(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+B(m)})}function L(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+B(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+B(m)})}function r(a){return q[a.type](a)}var q={literal:function(a){return'"'+
z(a.text)+'"'},class:function(a){var m=a.parts.map(function(p){return Array.isArray(p)?L(p[0])+"-"+L(p[1]):L(p)});return"["+(a.inverted?"^":"")+m.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(r);var m,p;a.sort();if(0<a.length){for(p=m=1;m<a.length;m++)a[m-1]!==a[m]&&(a[p]=a[m],p++);a.length=p}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(e)+" but "+(t?'"'+z(t)+'"':"end of input")+" found."};return{SyntaxError:f,parse:function(e,t){function B(E,O){O=void 0!==O?O:q(ma,k);throw new f(E,null,null,O);}function z(E,O){return{type:"literal",text:E,ignoreCase:O}}function L(E,O,V){return{type:"class",parts:E,inverted:O,ignoreCase:V}}function r(E){var O=Zb[E],V;if(!O){for(V=E-1;!Zb[V];)V--;O=Zb[V];for(O={line:O.line,column:O.column};V<E;)10===e.charCodeAt(V)?(O.line++,O.column=1):O.column++,V++;Zb[E]=
O}return O}function q(E,O,V){var ca=r(E),pa=r(O);E={source:Mb,start:{offset:E,line:ca.line,column:ca.column},end:{offset:O,line:pa.line,column:pa.column}};V&&Mb&&"function"===typeof Mb.offset&&(E.start=Mb.offset(E.start),E.end=Mb.offset(E.end));return E}function a(E){k<eb||(k>eb&&(eb=k,zc=[]),zc.push(E))}function m(){var E=k;ja();var O=G();O!==c?(ja(),ma=E,E=O):(k=E,E=c);return E}function p(){var E=k;var O=G();if(O!==c){var V=[];var ca=k;var pa=ja();var za=Wa();if(za!==c){var Ea=ja();var Fa=G();Fa!==
c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)}else k=ca,ca=c;for(;ca!==c;)V.push(ca),ca=k,pa=ja(),za=Wa(),za!==c?(Ea=ja(),Fa=G(),Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)):(k=ca,ca=c);ma=E;E={type:"expression-list"};O=[O];for(ca=0;ca<V.length;ca++)O.push(V[ca][3]);E.value=O}else k=E,E=c;return E}function G(){var E=k;var O=R();if(O!==c){var V=[];var ca=k;var pa=ja();var za=N();if(za!==c){var Ea=ja();var Fa=R();Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)}else k=ca,ca=c;for(;ca!==c;)V.push(ca),ca=k,pa=ja(),za=N(),za!==
c?(Ea=ja(),Fa=R(),Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)):(k=ca,ca=c);ma=E;E=nb(O,V)}else k=E,E=c;return E}function R(){var E=k;var O=b();if(O!==c){var V=[];var ca=k;var pa=ja();var za=J();if(za!==c){var Ea=ja();var Fa=b();Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)}else k=ca,ca=c;for(;ca!==c;)V.push(ca),ca=k,pa=ja(),za=J(),za!==c?(Ea=ja(),Fa=b(),Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)):(k=ca,ca=c);ma=E;E=nb(O,V)}else k=E,E=c;return E}function b(){var E=k;var O=y();if(O===c){O=k;if(33===e.charCodeAt(k)){var V=
Nd;k++}else V=c,0===fa&&a(Od);if(V!==c){var ca=k;fa++;if(61===e.charCodeAt(k)){var pa=Sc;k++}else pa=c,0===fa&&a(Tc);fa--;pa===c?ca=void 0:(k=ca,ca=c);ca!==c?O=V=[V,ca]:(k=O,O=c)}else k=O,O=c}O!==c?(V=ja(),ca=b(),ca!==c?(ma=E,E={type:"unary-expression",operator:"NOT",expr:ca}):(k=E,E=c)):(k=E,E=c);if(E===c){O=k;E=T();if(E!==c){ja();V=k;ca=[];pa=k;var za=ja();var Ea=D();if(Ea!==c){var Fa=ja();var ob=T();ob!==c?pa=za=[za,Ea,Fa,ob]:(k=pa,pa=c)}else k=pa,pa=c;if(pa!==c)for(;pa!==c;)ca.push(pa),pa=k,za=
ja(),Ea=D(),Ea!==c?(Fa=ja(),ob=T(),ob!==c?pa=za=[za,Ea,Fa,ob]:(k=pa,pa=c)):(k=pa,pa=c);else ca=c;ca!==c&&(ma=V,ca={type:"arithmetic",tail:ca});V=ca;V===c&&(V=k,ca=I(),ca!==c?(ja(),pa=Ja(),pa!==c?(ja(),pa=p(),pa!==c?(ja(),za=Ka(),za!==c?(ma=V,V={op:ca,right:pa}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,ca=I(),ca!==c?(ja(),pa=Ja(),pa!==c?(ja(),pa=Ka(),pa!==c?(ma=V,V={op:ca,right:{type:"expression-list",value:[]}}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,ca=I(),ca!==c?(ja(),pa=ea(),
pa!==c?(ma=V,V={op:ca,right:pa}):(k=V,V=c)):(k=V,V=c))),V===c&&(V=k,za=y(),za!==c?(ja(),ca=W(),ca!==c?(ja(),pa=T(),pa!==c?(ja(),Ea=J(),Ea!==c?(ja(),za=T(),za!==c?(ma=V,V={op:"NOT"+ca,right:{type:"expression-list",value:[pa,za]}}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,za=W(),za!==c?(ja(),ca=T(),ca!==c?(ja(),pa=J(),pa!==c?(ja(),Ea=T(),Ea!==c?(ma=V,V={op:za,right:{type:"expression-list",value:[ca,Ea]}}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)),V===c&&(V=k,ca=aa(),ca!==
c?(ja(),pa=y(),pa!==c?(ja(),pa=T(),pa!==c?(ma=V,V={op:ca+"NOT",right:pa}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,ca=aa(),ca!==c?(ja(),pa=T(),pa!==c?(ma=V,V={op:ca,right:pa}):(k=V,V=c)):(k=V,V=c)),V===c&&(V=k,ca=Q(),ca!==c?(ja(),pa=wa(),pa!==c?(ja(),za=k,e.substr(k,6).toLowerCase()===Pd?(Ea=e.substr(k,6),k+=6):(Ea=c,0===fa&&a(Qd)),Ea!==c?(Ea=k,fa++,Fa=M(),fa--,Fa===c?Ea=void 0:(k=Ea,Ea=c),Ea!==c?(ma=za,za="ESCAPE"):(k=za,za=c)):(k=za,za=c),za!==c?(ja(),za=xa(),za!==c?(ma=V,V={op:ca,right:pa,escape:za.value}):
(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,ca=Q(),ca!==c?(ja(),pa=wa(),pa!==c?(ma=V,V={op:ca,right:pa,escape:""}):(k=V,V=c)):(k=V,V=c))))));V===c&&(V=null);ma=O;O=V;""==O||void 0==O||null==O?O=E:(V=null,O=V="arithmetic"==O.type?nb(E,O.tail):Nb(O.op,E,O.right,O.escape))}else k=O,O=c;E=O}return E}function D(){if(e.substr(k,2)===Uc){var E=Uc;k+=2}else E=c,0===fa&&a(Rd);E===c&&(62===e.charCodeAt(k)?(E=Sd,k++):(E=c,0===fa&&a(Td)),E===c&&(e.substr(k,2)===Vc?(E=Vc,k+=2):(E=c,0===fa&&a(Ud)),E===
c&&(e.substr(k,2)===Wc?(E=Wc,k+=2):(E=c,0===fa&&a(Vd)),E===c&&(60===e.charCodeAt(k)?(E=Wd,k++):(E=c,0===fa&&a(Xd)),E===c&&(61===e.charCodeAt(k)?(E=Sc,k++):(E=c,0===fa&&a(Tc)),E===c&&(e.substr(k,2)===Xc?(E=Xc,k+=2):(E=c,0===fa&&a(Yd))))))));return E}function Q(){var E;var O=E=k;var V=y();if(V!==c){var ca=ja();var pa=ha();pa!==c?O=V=[V,ca,pa]:(k=O,O=c)}else k=O,O=c;O!==c&&(ma=E,O=O[0]+" "+O[2]);E=O;E===c&&(E=ha());return E}function I(){var E;var O=E=k;var V=y();if(V!==c){var ca=ja();var pa=X();pa!==
c?O=V=[V,ca,pa]:(k=O,O=c)}else k=O,O=c;O!==c&&(ma=E,O=O[0]+" "+O[2]);E=O;E===c&&(E=X());return E}function T(){var E=k;var O=P();if(O!==c){var V=[];var ca=k;var pa=ja();var za=S();if(za!==c){var Ea=ja();var Fa=P();Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)}else k=ca,ca=c;for(;ca!==c;)V.push(ca),ca=k,pa=ja(),za=S(),za!==c?(Ea=ja(),Fa=P(),Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)):(k=ca,ca=c);ma=E;E=nb(O,V)}else k=E,E=c;return E}function S(){if(43===e.charCodeAt(k)){var E=Ac;k++}else E=c,0===fa&&a(Bc);E===
c&&(45===e.charCodeAt(k)?(E=Cc,k++):(E=c,0===fa&&a(Dc)),E===c&&(e.substr(k,2)===Yc?(E=Yc,k+=2):(E=c,0===fa&&a(Zd))));return E}function P(){var E=k;var O=A();if(O!==c){var V=[];var ca=k;var pa=ja();var za=l();if(za!==c){var Ea=ja();var Fa=A();Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)}else k=ca,ca=c;for(;ca!==c;)V.push(ca),ca=k,pa=ja(),za=l(),za!==c?(Ea=ja(),Fa=A(),Fa!==c?ca=pa=[pa,za,Ea,Fa]:(k=ca,ca=c)):(k=ca,ca=c);ma=E;E=nb(O,V)}else k=E,E=c;return E}function l(){if(42===e.charCodeAt(k)){var E=$d;k++}else E=
c,0===fa&&a(ae);E===c&&(47===e.charCodeAt(k)?(E=be,k++):(E=c,0===fa&&a(ce)));return E}function A(){var E=xa();if(E===c){var O=k;var V=k;var ca=Na();if(ca!==c){var pa=Sa();if(pa!==c){var za=Va();za!==c?(ma=V,V=parseFloat(ca+pa+za)):(k=V,V=c)}else k=V,V=c}else k=V,V=c;V===c&&(V=k,ca=Na(),ca!==c?(pa=Sa(),pa!==c?(ma=V,V=parseFloat(ca+pa)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,ca=Na(),ca!==c?(pa=Va(),pa!==c?(ma=V,V=parseFloat(ca+pa)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,ca=Na(),ca!==c&&(ma=V,ca=parseFloat(ca)),
V=ca)));var Ea=V;if(Ea!==c){var Fa=k;fa++;var ob=w();fa--;ob===c?Fa=void 0:(k=Fa,Fa=c);Fa!==c?(ma=O,O={type:"number",value:Ea}):(k=O,O=c)}else k=O,O=c;E=O;if(E===c){var pb=k;var Jb=k;if(e.substr(k,4).toLowerCase()===de){var $b=e.substr(k,4);k+=4}else $b=c,0===fa&&a(ee);if($b!==c){var Ob=k;fa++;var fe=M();fa--;fe===c?Ob=void 0:(k=Ob,Ob=c);Ob!==c?Jb=$b=[$b,Ob]:(k=Jb,Jb=c)}else k=Jb,Jb=c;var qb=Jb;qb!==c&&(ma=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===c){pb=k;var Kb=k;if(e.substr(k,5).toLowerCase()===
ge){var ac=e.substr(k,5);k+=5}else ac=c,0===fa&&a(he);if(ac!==c){var Pb=k;fa++;var ie=M();fa--;ie===c?Pb=void 0:(k=Pb,Pb=c);Pb!==c?Kb=ac=[ac,Pb]:(k=Kb,Kb=c)}else k=Kb,Kb=c;qb=Kb;qb!==c&&(ma=pb,qb={type:"boolean",value:!1});pb=qb}E=pb;if(E===c){var je=k;var Lb=k;if(e.substr(k,4).toLowerCase()===ke){var bc=e.substr(k,4);k+=4}else bc=c,0===fa&&a(le);if(bc!==c){var Qb=k;fa++;var me=M();fa--;me===c?Qb=void 0:(k=Qb,Qb=c);Qb!==c?Lb=bc=[bc,Qb]:(k=Lb,Lb=c)}else k=Lb,Lb=c;var Ec=Lb;Ec!==c&&(ma=je,Ec={type:"null",
value:null});E=Ec;if(E===c){var rb=k;if(ia()!==c){ja();var cc=wa();cc!==c?(ma=rb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&B("Date literal is invalid"),rb={type:"date",
value:cc.value}):(k=rb,rb=c)}else k=rb,rb=c;E=rb;if(E===c){var sb=k;if(da()!==c){ja();var dc=wa();dc!==c?(ma=sb,"string"===dc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(dc.value)&&B("Timestamp literal is invalid"),
sb={type:"timestamp",value:dc.value}):(k=sb,sb=c)}else k=sb,sb=c;E=sb;if(E===c){var Ta=k;var Fc=ra();if(Fc!==c){ja();if(45===e.charCodeAt(k)){var hb=Cc;k++}else hb=c,0===fa&&a(Dc);hb===c&&(43===e.charCodeAt(k)?(hb=Ac,k++):(hb=c,0===fa&&a(Bc)));if(hb!==c){ja();var Rb=wa();if(Rb!==c){ja();var Zc=na();Zc!==c?(ma=Ta,Ta={type:"interval",value:Rb,qualifier:Zc,op:hb}):(k=Ta,Ta=c)}else k=Ta,Ta=c}else k=Ta,Ta=c}else k=Ta,Ta=c;Ta===c&&(Ta=k,Fc=ra(),Fc!==c?(ja(),hb=wa(),hb!==c?(ja(),Rb=na(),Rb!==c?(ma=Ta,Ta=
{type:"interval",value:hb,qualifier:Rb,op:""}):(k=Ta,Ta=c)):(k=Ta,Ta=c)):(k=Ta,Ta=c));E=Ta;if(E===c){var tb=k;if(ka()!==c){ja();var ec=wa();ec!==c?(ma=tb,"string"===ec.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(ec.value)&&B("Time literal is invalid"),tb={type:"time",value:ec.value}):(k=tb,tb=c)}else k=tb,tb=c;E=tb}}}}}}}var La=E;if(La===c){var Za=k;var ub=k;if(e.substr(k,7).toLowerCase()===ne){var $c=e.substr(k,7);k+=7}else $c=
c,0===fa&&a(oe);if($c!==c){var fc=k;fa++;var pe=M();fa--;pe===c?fc=void 0:(k=fc,fc=c);fc!==c?(ma=ub,ub="EXTRACT"):(k=ub,ub=c)}else k=ub,ub=c;if(ub!==c){ja();var qe=Ja();if(qe!==c){ja();var $a=oa();if($a===c&&($a=qa(),$a===c&&($a=Ca(),$a===c&&($a=va(),$a===c&&($a=Ba(),$a===c&&($a=Aa(),$a===c)))))){var vb=k;if(e.substr(k,13).toLowerCase()===re){var ad=e.substr(k,13);k+=13}else ad=c,0===fa&&a(se);if(ad!==c){var gc=k;fa++;var te=M();fa--;te===c?gc=void 0:(k=gc,gc=c);gc!==c?(ma=vb,vb="TIMEZONE_HOUR"):
(k=vb,vb=c)}else k=vb,vb=c;$a=vb;if($a===c){var wb=k;if(e.substr(k,15).toLowerCase()===ue){var bd=e.substr(k,15);k+=15}else bd=c,0===fa&&a(ve);if(bd!==c){var hc=k;fa++;var we=M();fa--;we===c?hc=void 0:(k=hc,hc=c);hc!==c?(ma=wb,wb="TIMEZONE_MINUTE"):(k=wb,wb=c)}else k=wb,wb=c;$a=wb}}var cd=$a;if(cd!==c){ja();var xe=Z();if(xe!==c){ja();var dd=G();if(dd!==c){ja();var ye=Ka();ye!==c?(ma=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:cd},dd]}}):(k=Za,Za=
c)}else k=Za,Za=c}else k=Za,Za=c}else k=Za,Za=c}else k=Za,Za=c}else k=Za,Za=c;La=Za;if(La===c){var ab=k;var xb=k;if(e.substr(k,9).toLowerCase()===ze){var ed=e.substr(k,9);k+=9}else ed=c,0===fa&&a(Ae);if(ed!==c){var ic=k;fa++;var Be=M();fa--;Be===c?ic=void 0:(k=ic,ic=c);ic!==c?(ma=xb,xb="SUBSTRING"):(k=xb,xb=c)}else k=xb,xb=c;if(xb!==c){ja();var Ce=Ja();if(Ce!==c){ja();var Gc=G();if(Gc!==c){ja();var De=Z();if(De!==c){ja();var Hc=G();if(Hc!==c){ja();var ib=k;var yb=k;if(e.substr(k,3).toLowerCase()===
Ee){var fd=e.substr(k,3);k+=3}else fd=c,0===fa&&a(Fe);if(fd!==c){var jc=k;fa++;var Ge=M();fa--;Ge===c?jc=void 0:(k=jc,jc=c);jc!==c?(ma=yb,yb="FOR"):(k=yb,yb=c)}else k=yb,yb=c;var Sb=yb;if(Sb!==c){var He=ja();var gd=G();if(gd!==c){var Ie=ja();ib=Sb=[Sb,He,gd,Ie]}else k=ib,ib=c}else k=ib,ib=c;ib===c&&(ib=null);Sb=Ka();Sb!==c?(ma=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Gc,Hc,ib[2]]:[Gc,Hc]}}):(k=ab,ab=c)}else k=ab,ab=c}else k=ab,ab=c}else k=ab,ab=c}else k=ab,ab=
c}else k=ab,ab=c;La=ab;if(La===c){var Oa=k;var Ic=ba();if(Ic!==c){ja();var Jc=Ja();if(Jc!==c){ja();var jb=la();jb===c&&(jb=null);ja();var Tb=G();if(Tb!==c){ja();var Kc=Z();if(Kc!==c){ja();var hd=G();if(hd!==c){ja();var Je=Ka();Je!==c?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb,hd]}}):(k=Oa,Oa=c)}else k=Oa,Oa=c}else k=Oa,Oa=c}else k=Oa,Oa=c}else k=Oa,Oa=c}else k=Oa,Oa=c;Oa===c&&(Oa=k,Ic=ba(),Ic!==c?(ja(),Jc=Ja(),Jc!==c?(ja(),
jb=la(),jb===c&&(jb=null),ja(),Tb=G(),Tb!==c?(ja(),Kc=Ka(),Kc!==c?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb]}}):(k=Oa,Oa=c)):(k=Oa,Oa=c)):(k=Oa,Oa=c)):(k=Oa,Oa=c));La=Oa;if(La===c){var bb=k;var zb=k;if(e.substr(k,8).toLowerCase()===Ke){var id=e.substr(k,8);k+=8}else id=c,0===fa&&a(Le);if(id!==c){var kc=k;fa++;var Me=M();fa--;Me===c?kc=void 0:(k=kc,kc=c);kc!==c?(ma=zb,zb="POSITION"):(k=zb,zb=c)}else k=zb,zb=c;if(zb!==c){ja();
var Ne=Ja();if(Ne!==c){ja();var jd=G();if(jd!==c){ja();var Oe=X();if(Oe!==c){ja();var kd=G();if(kd!==c){ja();var Pe=Ka();Pe!==c?(ma=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[jd,kd]}}):(k=bb,bb=c)}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c}else k=bb,bb=c;La=bb;if(La===c){var cb=k;var Ab=k;if(e.substr(k,4).toLowerCase()===Qe){var ld=e.substr(k,4);k+=4}else ld=c,0===fa&&a(Re);if(ld!==c){var lc=k;fa++;var Se=M();fa--;Se===c?lc=void 0:(k=lc,lc=c);lc!==
c?(ma=Ab,Ab="CAST"):(k=Ab,Ab=c)}else k=Ab,Ab=c;if(Ab!==c){ja();var Te=Ja();if(Te!==c){ja();var md=G();if(md!==c){ja();var Bb=k;if(e.substr(k,2).toLowerCase()===Ue){var nd=e.substr(k,2);k+=2}else nd=c,0===fa&&a(Ve);if(nd!==c){var mc=k;fa++;var We=M();fa--;We===c?mc=void 0:(k=mc,mc=c);mc!==c?(ma=Bb,Bb="AS"):(k=Bb,Bb=c)}else k=Bb,Bb=c;var Xe=Bb;if(Xe!==c){ja();var Ga=k;var Cb=k;if(e.substr(k,7).toLowerCase()===Ye){var od=e.substr(k,7);k+=7}else od=c,0===fa&&a(Ze);if(od!==c){var nc=k;fa++;var $e=M();
fa--;$e===c?nc=void 0:(k=nc,nc=c);nc!==c?(ma=Cb,Cb="INTEGER"):(k=Cb,Cb=c)}else k=Cb,Cb=c;var Ma=Cb;Ma!==c&&(ma=Ga,Ma={type:"data-type",value:{type:"integer"}});Ga=Ma;if(Ga===c){Ga=k;var Db=k;if(e.substr(k,8).toLowerCase()===af){var pd=e.substr(k,8);k+=8}else pd=c,0===fa&&a(bf);if(pd!==c){var oc=k;fa++;var cf=M();fa--;cf===c?oc=void 0:(k=oc,oc=c);oc!==c?(ma=Db,Db="SMALLINT"):(k=Db,Db=c)}else k=Db,Db=c;Ma=Db;Ma!==c&&(ma=Ga,Ma={type:"data-type",value:{type:"smallint"}});Ga=Ma;if(Ga===c){Ga=k;var Eb=
k;if(e.substr(k,5).toLowerCase()===df){var qd=e.substr(k,5);k+=5}else qd=c,0===fa&&a(ef);if(qd!==c){var pc=k;fa++;var ff=M();fa--;ff===c?pc=void 0:(k=pc,pc=c);pc!==c?(ma=Eb,Eb="FLOAT"):(k=Eb,Eb=c)}else k=Eb,Eb=c;Ma=Eb;Ma!==c&&(ma=Ga,Ma={type:"data-type",value:{type:"float"}});Ga=Ma;if(Ga===c){Ga=k;var Fb=k;if(e.substr(k,4).toLowerCase()===gf){var rd=e.substr(k,4);k+=4}else rd=c,0===fa&&a(hf);if(rd!==c){var qc=k;fa++;var jf=M();fa--;jf===c?qc=void 0:(k=qc,qc=c);qc!==c?(ma=Fb,Fb="REAL"):(k=Fb,Fb=c)}else k=
Fb,Fb=c;Ma=Fb;Ma!==c&&(ma=Ga,Ma={type:"data-type",value:{type:"real"}});Ga=Ma;if(Ga===c&&(Ga=k,Ma=ia(),Ma!==c&&(ma=Ga,Ma={type:"data-type",value:{type:"date"}}),Ga=Ma,Ga===c&&(Ga=k,Ma=da(),Ma!==c&&(ma=Ga,Ma={type:"data-type",value:{type:"timestamp"}}),Ga=Ma,Ga===c&&(Ga=k,Ma=ka(),Ma!==c&&(ma=Ga,Ma={type:"data-type",value:{type:"time"}}),Ga=Ma,Ga===c)))){Ga=k;var Gb=k;if(e.substr(k,7).toLowerCase()===kf){var sd=e.substr(k,7);k+=7}else sd=c,0===fa&&a(lf);if(sd!==c){var rc=k;fa++;var mf=M();fa--;mf===
c?rc=void 0:(k=rc,rc=c);rc!==c?(ma=Gb,Gb="VARCHAR"):(k=Gb,Gb=c)}else k=Gb,Gb=c;Ma=Gb;if(Ma!==c){ja();var nf=Ja();if(nf!==c){ja();var td=h();if(td!==c){ja();var of=Ka();of!==c?(ma=Ga,Ga={type:"data-type",value:{type:"varchar",size:parseInt(td)}}):(k=Ga,Ga=c)}else k=Ga,Ga=c}else k=Ga,Ga=c}else k=Ga,Ga=c}}}}var ud=Ga;if(ud!==c){ja();var pf=Ka();pf!==c?(ma=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[md,ud]}}):(k=cb,cb=c)}else k=cb,cb=c}else k=cb,cb=c}else k=cb,cb=c}else k=cb,
cb=c}else k=cb,cb=c;La=cb;if(La===c){var kb=k;var db=k;var Ub=v();Ub!==c&&(ma=db);db=Ub;if(db===c)if(db=k,96===e.charCodeAt(k)?(Ub=vd,k++):(Ub=c,0===fa&&a(wd)),Ub!==c){var sc=[];if(xd.test(e.charAt(k))){var lb=e.charAt(k);k++}else lb=c,0===fa&&a(yd);if(lb!==c)for(;lb!==c;)sc.push(lb),xd.test(e.charAt(k))?(lb=e.charAt(k),k++):(lb=c,0===fa&&a(yd));else sc=c;sc!==c?(96===e.charCodeAt(k)?(lb=vd,k++):(lb=c,0===fa&&a(wd)),lb!==c?(ma=db,db=sc.join("")):(k=db,db=c)):(k=db,db=c)}else k=db,db=c;var zd=db;if(zd!==
c){ja();var qf=Ja();if(qf!==c){ja();var tc=p();tc===c&&(tc=null);ja();var rf=Ka();rf!==c?(ma=kb,kb={type:"function",name:zd,args:tc?tc:{type:"expression-list",value:[]}}):(k=kb,kb=c)}else k=kb,kb=c}else k=kb,kb=c;La=kb;if(La===c){var fb;var Ua=k;var Lc=ya();if(Lc!==c){ja();var Vb=G();if(Vb!==c){ja();var Wb=[];for(fb=Ia();fb!==c;)Wb.push(fb),fb=Ia();fb=ja();var uc=Ha();uc!==c?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:null}):(k=Ua,Ua=c)}else k=Ua,Ua=c}else k=Ua,Ua=
c;if(Ua===c)if(Ua=k,Lc=ya(),Lc!==c)if(ja(),Vb=G(),Vb!==c){ja();Wb=[];for(fb=Ia();fb!==c;)Wb.push(fb),fb=Ia();fb=ja();uc=Ra();if(uc!==c){ja();var sf=Ha();sf!==c?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:uc.value}):(k=Ua,Ua=c)}else k=Ua,Ua=c}else k=Ua,Ua=c;else k=Ua,Ua=c;var Mc=Ua;if(Mc===c){var gb;var Xa=k;var Nc=ya();if(Nc!==c){ja();var Xb=[];for(gb=Da();gb!==c;)Xb.push(gb),gb=Da();gb=ja();var vc=Ha();vc!==c?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,
else:null}):(k=Xa,Xa=c)}else k=Xa,Xa=c;if(Xa===c)if(Xa=k,Nc=ya(),Nc!==c){ja();Xb=[];for(gb=Da();gb!==c;)Xb.push(gb),gb=Da();gb=ja();vc=Ra();if(vc!==c){ja();var tf=Ha();tf!==c?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,else:vc.value}):(k=Xa,Xa=c)}else k=Xa,Xa=c}else k=Xa,Xa=c;Mc=Xa}La=Mc;if(La===c){var Hb=k;var uf=k;var wc;var Yb=k;var Ad=w();if(Ad!==c){var Bd=[];for(wc=K();wc!==c;)Bd.push(wc),wc=K();ma=Yb;Yb=Ad+Bd.join("")}else k=Yb,Yb=c;var Cd=Yb;Cd!==c&&(ma=uf);var mb=Cd;if(mb!==
c){ma=Hb;var Oc=mb;mb=/^CURRENT_DATE$/i.test(Oc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Oc}}Hb=mb;if(Hb===c){Hb=k;var Ib=k;if(Y()!==c){var xc;var vf=k;var Pc=[];for(xc=U();xc!==c;)Pc.push(xc),xc=U();ma=vf;var wf=Pc=Pc.join("");var xf=Y();xf!==c?(ma=Ib,Ib=wf):(k=Ib,Ib=c)}else k=Ib,Ib=c;mb=Ib;mb!==c&&(ma=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}La=Hb;if(La===c&&(La=
ea(),La===c)){La=k;var yf=Ja();if(yf!==c){ja();var Qc=G();if(Qc!==c){ja();var zf=Ka();zf!==c?(ma=La,Qc.paren=!0,La=Qc):(k=La,La=c)}else k=La,La=c}else k=La,La=c}}}}}}}}}return La}function v(){var E;var O=k;var V=w();if(V!==c){var ca=[];for(E=M();E!==c;)ca.push(E),E=M();ma=O;O=V+ca.join("")}else k=O,O=c;return O}function w(){if(Af.test(e.charAt(k))){var E=e.charAt(k);k++}else E=c,0===fa&&a(Bf);return E}function M(){if(Cf.test(e.charAt(k))){var E=e.charAt(k);k++}else E=c,0===fa&&a(Df);return E}function K(){if(Dd.test(e.charAt(k))){var E=
e.charAt(k);k++}else E=c,0===fa&&a(Ed);return E}function U(){if(Dd.test(e.charAt(k))){var E=e.charAt(k);k++}else E=c,0===fa&&a(Ed);if(E===c)if(E=k,Y()!==c){var O=Y();O!==c?(ma=E,E='"'):(k=E,E=c)}else k=E,E=c;return E}function Y(){if(Ef.test(e.charAt(k))){var E=e.charAt(k);k++}else E=c,0===fa&&a(Ff);return E}function ea(){var E;var O=E=k;if(64===e.charCodeAt(k)){var V=Gf;k++}else V=c,0===fa&&a(Hf);if(V!==c){var ca=v();ca!==c?O=V=[V,ca]:(k=O,O=c)}else k=O,O=c;O!==c&&(ma=E,O={type:"parameter",value:O[1]});
return O}function la(){var E=k;if(e.substr(k,7).toLowerCase()===If){var O=e.substr(k,7);k+=7}else O=c,0===fa&&a(Jf);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="LEADING"):(k=E,E=c)}else k=E,E=c;E===c&&(E=k,e.substr(k,8).toLowerCase()===Kf?(O=e.substr(k,8),k+=8):(O=c,0===fa&&a(Lf)),O!==c?(O=k,fa++,V=M(),fa--,V===c?O=void 0:(k=O,O=c),O!==c?(ma=E,E="TRAILING"):(k=E,E=c)):(k=E,E=c),E===c&&(E=k,e.substr(k,4).toLowerCase()===Mf?(O=e.substr(k,4),k+=4):(O=c,0===fa&&a(Nf)),O!==
c?(O=k,fa++,V=M(),fa--,V===c?O=void 0:(k=O,O=c),O!==c?(ma=E,E="BOTH"):(k=E,E=c)):(k=E,E=c)));return E}function na(){var E=k;var O=k;var V=sa();if(V!==c){ja();var ca=Ja();if(ca!==c)if(ja(),ca=ta(),ca!==c){ja();var pa=Ka();pa!==c?(ma=O,O={type:"interval-period",period:V.value,precision:ca,secondary:null}):(k=O,O=c)}else k=O,O=c;else k=O,O=c}else k=O,O=c;O===c&&(O=k,V=sa(),V!==c&&(ma=O,V={type:"interval-period",period:V.value,precision:null,secondary:null}),O=V);if(O!==c)if(ja(),V=k,e.substr(k,2).toLowerCase()===
Of?(ca=e.substr(k,2),k+=2):(ca=c,0===fa&&a(Pf)),ca!==c?(ca=k,fa++,pa=M(),fa--,pa===c?ca=void 0:(k=ca,ca=c),ca!==c?(ma=V,V="TO"):(k=V,V=c)):(k=V,V=c),V!==c){ja();V=k;ca=sa();ca!==c&&(ma=V,ca={type:"interval-period",period:ca.value,precision:null,secondary:null});V=ca;if(V===c){V=k;ca=Aa();if(ca!==c)if(ja(),ca=Ja(),ca!==c)if(ja(),ca=ta(),ca!==c)if(ja(),pa=Wa(),pa!==c)if(ja(),pa=ua(),pa!==c){ja();var za=Ka();za!==c?(ma=V,V={type:"interval-period",period:"second",precision:ca,secondary:pa}):(k=V,V=c)}else k=
V,V=c;else k=V,V=c;else k=V,V=c;else k=V,V=c;else k=V,V=c;V===c&&(V=k,ca=Aa(),ca!==c?(ja(),ca=Ja(),ca!==c?(ja(),ca=ta(),ca!==c?(ja(),pa=Ka(),pa!==c?(ma=V,V={type:"interval-period",period:"second",precision:ca,secondary:null}):(k=V,V=c)):(k=V,V=c)):(k=V,V=c)):(k=V,V=c),V===c&&(V=k,ca=Aa(),ca!==c&&(ma=V,ca={type:"interval-period",period:"second",precision:null,secondary:null}),V=ca))}V!==c?(ma=E,E={type:"interval-qualifier",start:O,end:V}):(k=E,E=c)}else k=E,E=c;else k=E,E=c;E===c&&(E=k,V=sa(),V!==
c?(ja(),O=Ja(),O!==c?(ja(),O=ua(),O!==c?(ja(),ca=Ka(),ca!==c?(ma=E,E={type:"interval-period",period:V.value,precision:O,secondary:null}):(k=E,E=c)):(k=E,E=c)):(k=E,E=c)):(k=E,E=c),E===c&&(E=k,V=sa(),V!==c&&(ma=E,V={type:"interval-period",period:V.value,precision:null,secondary:null}),E=V,E===c&&(E=k,V=Aa(),V!==c?(ja(),O=Ja(),O!==c?(ja(),O=ta(),O!==c?(ja(),ca=Wa(),ca!==c?(ja(),V=ua(),V!==c?(ja(),ca=Ka(),ca!==c?(ma=E,E={type:"interval-period",period:"second",precision:O,secondary:V}):(k=E,E=c)):(k=
E,E=c)):(k=E,E=c)):(k=E,E=c)):(k=E,E=c)):(k=E,E=c),E===c&&(E=k,V=Aa(),V!==c?(ja(),O=Ja(),O!==c?(ja(),O=ua(),O!==c?(ja(),ca=Ka(),ca!==c?(ma=E,E={type:"interval-period",period:"second",precision:O,secondary:null}):(k=E,E=c)):(k=E,E=c)):(k=E,E=c)):(k=E,E=c),E===c&&(E=k,V=Aa(),V!==c&&(ma=E,V={type:"interval-period",period:"second",precision:null,secondary:null}),E=V)))));return E}function sa(){var E=k;var O=Ca();O!==c&&(ma=E,O={type:"string",value:"day"});E=O;E===c&&(E=k,O=va(),O!==c&&(ma=E,O={type:"string",
value:"hour"}),E=O,E===c&&(E=k,O=Ba(),O!==c&&(ma=E,O={type:"string",value:"minute"}),E=O,E===c&&(E=k,O=qa(),O!==c&&(ma=E,O={type:"string",value:"month"}),E=O,E===c&&(E=k,O=oa(),O!==c&&(ma=E,O={type:"string",value:"year"}),E=O))));return E}function ua(){var E=k;var O=h();O!==c&&(ma=E,O=parseFloat(O));return O}function ta(){var E=k;var O=h();O!==c&&(ma=E,O=parseFloat(O));return O}function wa(){var E=xa();E===c&&(E=ea());return E}function xa(){var E=k;if(39===e.charCodeAt(k)){var O=Fd;k++}else O=c,0===
fa&&a(Gd);O===c&&(e.substr(k,2)===Hd?(O=Hd,k+=2):(O=c,0===fa&&a(Qf)));if(O!==c){O=[];var V=k;if(e.substr(k,2)===yc){var ca=yc;k+=2}else ca=c,0===fa&&a(Id);ca!==c&&(ma=V,ca="'");V=ca;V===c&&(Jd.test(e.charAt(k))?(V=e.charAt(k),k++):(V=c,0===fa&&a(Kd)));for(;V!==c;)O.push(V),V=k,e.substr(k,2)===yc?(ca=yc,k+=2):(ca=c,0===fa&&a(Id)),ca!==c&&(ma=V,ca="'"),V=ca,V===c&&(Jd.test(e.charAt(k))?(V=e.charAt(k),k++):(V=c,0===fa&&a(Kd)));39===e.charCodeAt(k)?(V=Fd,k++):(V=c,0===fa&&a(Gd));V!==c?(ma=E,E={type:"string",
value:O.join("")}):(k=E,E=c)}else k=E,E=c;return E}function Da(){var E=k;if(Pa()!==c){ja();var O=G();if(O!==c){ja();var V=Ya();V!==c?(ja(),V=G(),V!==c?(ma=E,E={type:"when-clause",operand:O,value:V}):(k=E,E=c)):(k=E,E=c)}else k=E,E=c}else k=E,E=c;return E}function Ia(){var E=k;if(Pa()!==c){ja();var O=G();if(O!==c){ja();var V=Ya();V!==c?(ja(),V=G(),V!==c?(ma=E,E={type:"when-clause",operand:O,value:V}):(k=E,E=c)):(k=E,E=c)}else k=E,E=c}else k=E,E=c;return E}function Ra(){var E=k;var O=k;if(e.substr(k,
4).toLowerCase()===Rf){var V=e.substr(k,4);k+=4}else V=c,0===fa&&a(Sf);if(V!==c){V=k;fa++;var ca=M();fa--;ca===c?V=void 0:(k=V,V=c);V!==c?(ma=O,O="ELSE"):(k=O,O=c)}else k=O,O=c;O!==c?(ja(),O=G(),O!==c?(ma=E,E={type:"else-clause",value:O}):(k=E,E=c)):(k=E,E=c);return E}function Na(){var E=h();if(E===c){E=k;if(45===e.charCodeAt(k)){var O=Cc;k++}else O=c,0===fa&&a(Dc);O===c&&(43===e.charCodeAt(k)?(O=Ac,k++):(O=c,0===fa&&a(Bc)));if(O!==c){var V=h();V!==c?(ma=E,E=O[0]+V):(k=E,E=c)}else k=E,E=c}return E}
function Sa(){var E=k;if(46===e.charCodeAt(k)){var O=Tf;k++}else O=c,0===fa&&a(Uf);O!==c?(O=h(),O===c&&(O=null),ma=E,E="."+(null!=O?O:"")):(k=E,E=c);return E}function Va(){var E;var O=E=k;if(Vf.test(e.charAt(k))){var V=e.charAt(k);k++}else V=c,0===fa&&a(Wf);V!==c?(Xf.test(e.charAt(k))?(V=e.charAt(k),k++):(V=c,0===fa&&a(Yf)),V===c&&(V=null),ma=O,O="e"+(null===V?"":V)):(k=O,O=c);O!==c?(V=h(),V!==c?(ma=E,E=O+V):(k=E,E=c)):(k=E,E=c);return E}function h(){var E=k;var O=[];var V=F();if(V!==c)for(;V!==c;)O.push(V),
V=F();else O=c;O!==c&&(ma=E,O=O.join(""));return O}function F(){if(Zf.test(e.charAt(k))){var E=e.charAt(k);k++}else E=c,0===fa&&a($f);return E}function X(){var E=k;if(e.substr(k,2).toLowerCase()===ag){var O=e.substr(k,2);k+=2}else O=c,0===fa&&a(bg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="IN"):(k=E,E=c)}else k=E,E=c;return E}function aa(){var E=k;if(e.substr(k,2).toLowerCase()===cg){var O=e.substr(k,2);k+=2}else O=c,0===fa&&a(dg);if(O!==c){O=k;fa++;var V=M();fa--;
V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="IS"):(k=E,E=c)}else k=E,E=c;return E}function ha(){var E=k;if(e.substr(k,4).toLowerCase()===eg){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(fg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="LIKE"):(k=E,E=c)}else k=E,E=c;return E}function y(){var E=k;if(e.substr(k,3).toLowerCase()===gg){var O=e.substr(k,3);k+=3}else O=c,0===fa&&a(hg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="NOT"):(k=E,E=c)}else k=E,
E=c;return E}function J(){var E=k;if(e.substr(k,3).toLowerCase()===ig){var O=e.substr(k,3);k+=3}else O=c,0===fa&&a(jg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="AND"):(k=E,E=c)}else k=E,E=c;return E}function N(){var E=k;if(e.substr(k,2).toLowerCase()===kg){var O=e.substr(k,2);k+=2}else O=c,0===fa&&a(lg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="OR"):(k=E,E=c)}else k=E,E=c;return E}function W(){var E=k;if(e.substr(k,7).toLowerCase()===
mg){var O=e.substr(k,7);k+=7}else O=c,0===fa&&a(ng);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="BETWEEN"):(k=E,E=c)}else k=E,E=c;return E}function Z(){var E=k;if(e.substr(k,4).toLowerCase()===og){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(pg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="FROM"):(k=E,E=c)}else k=E,E=c;return E}function ba(){var E=k;if(e.substr(k,4).toLowerCase()===qg){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(rg);if(O!==
c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="TRIM"):(k=E,E=c)}else k=E,E=c;return E}function da(){var E=k;if(e.substr(k,9).toLowerCase()===sg){var O=e.substr(k,9);k+=9}else O=c,0===fa&&a(tg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="TIMESTAMP"):(k=E,E=c)}else k=E,E=c;return E}function ia(){var E=k;if(e.substr(k,4).toLowerCase()===ug){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(vg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==
c?(ma=E,E="DATE"):(k=E,E=c)}else k=E,E=c;return E}function ka(){var E=k;if(e.substr(k,4).toLowerCase()===wg){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(xg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="TIME"):(k=E,E=c)}else k=E,E=c;return E}function ra(){var E=k;if(e.substr(k,8).toLowerCase()===yg){var O=e.substr(k,8);k+=8}else O=c,0===fa&&a(zg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="INTERVAL"):(k=E,E=c)}else k=E,E=c;return E}function oa(){var E=
k;if(e.substr(k,4).toLowerCase()===Ag){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(Bg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="YEAR"):(k=E,E=c)}else k=E,E=c;return E}function qa(){var E=k;if(e.substr(k,5).toLowerCase()===Cg){var O=e.substr(k,5);k+=5}else O=c,0===fa&&a(Dg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="MONTH"):(k=E,E=c)}else k=E,E=c;return E}function Ca(){var E=k;if(e.substr(k,3).toLowerCase()===Eg){var O=e.substr(k,3);k+=
3}else O=c,0===fa&&a(Fg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="DAY"):(k=E,E=c)}else k=E,E=c;return E}function va(){var E=k;if(e.substr(k,4).toLowerCase()===Gg){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(Hg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="HOUR"):(k=E,E=c)}else k=E,E=c;return E}function Ba(){var E=k;if(e.substr(k,6).toLowerCase()===Ig){var O=e.substr(k,6);k+=6}else O=c,0===fa&&a(Jg);if(O!==c){O=k;fa++;var V=M();fa--;V===
c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="MINUTE"):(k=E,E=c)}else k=E,E=c;return E}function Aa(){var E=k;if(e.substr(k,6).toLowerCase()===Kg){var O=e.substr(k,6);k+=6}else O=c,0===fa&&a(Lg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="SECOND"):(k=E,E=c)}else k=E,E=c;return E}function ya(){var E=k;if(e.substr(k,4).toLowerCase()===Mg){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(Ng);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="CASE"):(k=E,E=c)}else k=
E,E=c;return E}function Ha(){var E=k;if(e.substr(k,3).toLowerCase()===Og){var O=e.substr(k,3);k+=3}else O=c,0===fa&&a(Pg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="END"):(k=E,E=c)}else k=E,E=c;return E}function Pa(){var E=k;if(e.substr(k,4).toLowerCase()===Qg){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(Rg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="WHEN"):(k=E,E=c)}else k=E,E=c;return E}function Ya(){var E=k;if(e.substr(k,4).toLowerCase()===
Sg){var O=e.substr(k,4);k+=4}else O=c,0===fa&&a(Tg);if(O!==c){O=k;fa++;var V=M();fa--;V===c?O=void 0:(k=O,O=c);O!==c?(ma=E,E="THEN"):(k=E,E=c)}else k=E,E=c;return E}function Wa(){if(44===e.charCodeAt(k)){var E=Ug;k++}else E=c,0===fa&&a(Vg);return E}function Ja(){if(40===e.charCodeAt(k)){var E=Wg;k++}else E=c,0===fa&&a(Xg);return E}function Ka(){if(41===e.charCodeAt(k)){var E=Yg;k++}else E=c,0===fa&&a(Zg);return E}function ja(){var E;var O=[];for(E=Qa();E!==c;)O.push(E),E=Qa();return O}function Qa(){if($g.test(e.charAt(k))){var E=
e.charAt(k);k++}else E=c,0===fa&&a(ah);return E}function Nb(E,O,V,ca){E={type:"binary-expression",operator:E,left:O,right:V};void 0!==ca&&(E.escape=ca);return E}function nb(E,O){for(var V=0;V<O.length;V++)E=Nb(O[V][1],E,O[V][3]);return E}t=void 0!==t?t:{};var c={},Mb=t.grammarSource,Ld={start:m},Md=m,Nd="!",Sc="\x3d",Uc="\x3e\x3d",Sd="\x3e",Vc="\x3c\x3d",Wc="\x3c\x3e",Wd="\x3c",Xc="!\x3d",Ac="+",Cc="-",Yc="||",$d="*",be="/",Gf="@",Fd="'",Hd="N'",yc="''",Tf=".",ke="null",de="true",ge="false",ag="in",
cg="is",eg="like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",vd="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Dd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Jd=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,xd=/^[^`]/,Od=z("!",!1),Tc=z("\x3d",!1),Rd=z("\x3e\x3d",!1),Td=z("\x3e",!1),Ud=z("\x3c\x3d",!1),Vd=z("\x3c\x3e",!1),Xd=z("\x3c",!1),Yd=z("!\x3d",!1),Bc=z("+",!1),Dc=z("-",!1),Zd=z("||",!1),ae=z("*",!1),ce=z("/",!1),Bf=L([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=L([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ed=L([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=L(['"'],!1,!1),Hf=z("@",!1),Gd=z("'",!1),Qf=z("N'",!1),Id=z("''",!1),Kd=L(["'"],!0,!1),Uf=z(".",!1),$f=L([["0","9"]],!1,!1),Wf=L(["e","E"],!1,!1),Yf=L(["+","-"],!1,!1),le=z("NULL",!0),ee=z("TRUE",!0),he=z("FALSE",!0),bg=z("IN",!0),dg=z("IS",!0),fg=z("LIKE",!0),Qd=z("ESCAPE",!0),hg=z("NOT",!0),jg=z("AND",!0),lg=z("OR",!0),ng=z("BETWEEN",!0),pg=z("FROM",!0),Fe=z("FOR",!0),Ae=z("SUBSTRING",!0),oe=z("EXTRACT",!0),rg=z("TRIM",!0),Le=z("POSITION",!0),tg=z("TIMESTAMP",!0),vg=z("DATE",!0),xg=z("TIME",
!0),Jf=z("LEADING",!0),Lf=z("TRAILING",!0),Nf=z("BOTH",!0),Re=z("CAST",!0),Ve=z("AS",!0),Ze=z("INTEGER",!0),bf=z("SMALLINT",!0),ef=z("FLOAT",!0),hf=z("REAL",!0),lf=z("VARCHAR",!0),Pf=z("TO",!0),zg=z("INTERVAL",!0),Bg=z("YEAR",!0),se=z("TIMEZONE_HOUR",!0),ve=z("TIMEZONE_MINUTE",!0),Dg=z("MONTH",!0),Fg=z("DAY",!0),Hg=z("HOUR",!0),Jg=z("MINUTE",!0),Lg=z("SECOND",!0),Ng=z("CASE",!0),Pg=z("END",!0),Rg=z("WHEN",!0),Tg=z("THEN",!0),Sf=z("ELSE",!0),Vg=z(",",!1),Xg=z("(",!1),Zg=z(")",!1),ah=L([" ","\t","\n",
"\r"],!1,!1),wd=z("`",!1),yd=L(["`"],!0,!1),k=0,ma=0,Zb=[{line:1,column:1}],eb=0,zc=[],fa=0;if("startRule"in t){if(!(t.startRule in Ld))throw Error("Can't start parsing from rule \""+t.startRule+'".');Md=Ld[t.startRule]}var Rc=Md();if(Rc!==c&&k===e.length)return Rc;Rc!==c&&k<e.length&&a({type:"end"});throw function(E,O,V){return new f(f.buildMessage(E,O),E,O,V)}(zc,eb<e.length?e.charAt(eb):null,eb<e.length?q(eb,eb+1):q(eb,eb));}}})})(x);var u=x.exports;class H{static parse(C){return u.parse(C)}}d.WhereGrammar=
H;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(d,g){g=new g.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});d.kebabDict=g;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(d){d.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B,z,L){function r(p,G,R,b){const D=b.x-R.x;b=b.y-R.y;G=Math.min(1,Math.max(0,((G.x-R.x)*D+(G.y-R.y)*b)/(D*D+b*b)));p.x=R.x+D*G;p.y=R.y+b*G}function q(p,G){return p?G?4:3:G?3:2}class a{constructor(p,G,R){this.items=p;this.query=G;this.geometryType=R.geometryType;this.hasM=R.hasM;this.hasZ=R.hasZ;this.fieldsIndex=R.fieldsIndex;this.objectIdField=R.objectIdField;this.spatialReference=R.spatialReference;this.featureAdapter=R.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const p=
new n(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return p.countDistinctValues(this.items);const {groupByFieldsForStatistics:G,having:R,outStatistics:b}=this.query;if(!G?.length)return 1;const D=new Map,Q=new Map,I=new Set;for(const P of b){var {statisticType:T}=P;T="exceedslimit"!==T?P.onStatisticField:void 0;if(!Q.has(T)){var S=[];for(const l of G){const A=this._getAttributeValues(p,l,D);S.push(A)}Q.set(T,this._calculateUniqueValues(S,p.returnDistinctValues))}T=
Q.get(T);for(const l in T){const {data:A,items:v}=T[l];S=A.join(",");R&&!p.validateItems(v,R)||I.add(S)}}return I.size}async createQueryResponse(){let p;p=this.query.outStatistics?this.query.outStatistics.some(G=>"exceedslimit"===G.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const G=this.query.geometry;f.isValid(this.query.outSR)&&!f.equals(G.spatialReference,
this.query.outSR)?p.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...t.project(G,G.spatialReference,this.query.outSR)}):p.queryGeometry=e.cleanFromGeometryEngine({spatialReference:this.query.outSR,...G})}return p}createSnappingResponse(p,G){const R=this.featureAdapter,b=q(this.hasZ,this.hasM),{point:D,mode:Q}=p,I="number"===typeof p.distance?p.distance:p.distance.x,T="number"===typeof p.distance?p.distance:p.distance.y,S={candidates:[]},P="esriGeometryPolygon"===this.geometryType;
G=this._getPointCreator(Q,this.spatialReference,G);const l=new m(null,0),A=new m(null,0),v={x:0,y:0,z:0};for(const la of this.items){var w=R.getGeometry(la);if(null==w)continue;const {coords:na,lengths:sa}=w;l.coords=na;A.coords=na;if(p.returnEdge){w=0;for(var M=0;M<sa.length;M++){var K=sa[M];for(var U=0;U<K;U++,w+=b){var Y=l;Y.coordsIndex=w;if(U!==K-1){const ua=A;ua.coordsIndex=w+b;const ta=v;r(v,D,Y,ua);var ea=(D.x-ta.x)/I;const wa=(D.y-ta.y)/T;ea=ea*ea+wa*wa;1>=ea&&S.candidates.push(B.makeEdgeCandidate(R.getObjectId(la),
G(ta),Math.sqrt(ea),G(Y),G(ua)))}}}}if("none"!==p.vertexMode)if(w=P?na.length-b:na.length,"all"===p.vertexMode)for(M=0;M<w;M+=b)K=l,K.coordsIndex=M,U=(D.x-K.x)/I,Y=(D.y-K.y)/T,U=U*U+Y*Y,1>=U&&S.candidates.push(B.makeVertexCandidate(R.getObjectId(la),G(K),Math.sqrt(U)));else if("ends"===p.vertexMode){w=[0];P||w.push(na.length-b);for(const ua of w)w=l,w.coordsIndex=ua,M=(D.x-w.x)/I,K=(D.y-w.y)/T,M=M*M+K*K,1>=M&&S.candidates.push(B.makeVertexCandidate(R.getObjectId(la),G(w),Math.sqrt(M)))}}S.candidates.sort((la,
na)=>la.distance-na.distance);return S}_getPointCreator(p,G,R){const b=null==R||f.equals(G,R)?Q=>Q:Q=>t.project(Q,G,R),{hasZ:D}=this;return"3d"===p?D?({x:Q,y:I,z:T})=>b({x:Q,y:I,z:T}):({x:Q,y:I})=>b({x:Q,y:I,z:0}):({x:Q,y:I})=>b({x:Q,y:I})}async createSummaryStatisticsResponse(p){const {field:G,valueExpression:R,normalizationField:b,normalizationType:D,normalizationTotal:Q,minValue:I,maxValue:T,scale:S,timeZone:P}=p;var l=this.fieldsIndex.get(G);p=z.isDateField(l)||z.isDateOnlyField(l)||z.isTimestampOffsetField(l);
const A=await this._getDataValues({field:G,valueExpression:R,normalizationField:b,normalizationType:D,normalizationTotal:Q,scale:S,timeZone:P}),v=L.isNullCountSupported({normalizationType:D,normalizationField:b,minValue:I,maxValue:T}),w={value:.5,fieldType:l?.type};l=z.isStringField(l)?L.calculateStringStatistics({values:A,supportsNullCount:v,percentileParams:w}):L.calculateStatistics({values:A,minValue:I,maxValue:T,useSampleStdDev:!D,supportsNullCount:v,percentileParams:w});return L.processSummaryStatisticsResult(l,
p)}async createUniqueValuesResponse(p){const {field:G,valueExpression:R,domains:b,returnAllCodedValues:D,scale:Q,timeZone:I}=p;var T=await this._getDataValues({field:G,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,valueExpression:R,scale:Q,timeZone:I},!1);T=L.calculateUniqueValuesCount(T);return L.createUVResult(T,b,D,p.fieldDelimiter)}async createClassBreaksResponse(p){const {field:G,valueExpression:R,normalizationField:b,normalizationType:D,normalizationTotal:Q,classificationMethod:I,
standardDeviationInterval:T,minValue:S,maxValue:P,numClasses:l,scale:A,timeZone:v}=p;p=await this._getDataValues({field:G,valueExpression:R,normalizationField:b,normalizationType:D,normalizationTotal:Q,scale:A,timeZone:v});p=L.calculateClassBreaks(p,{field:G,normalizationField:b,normalizationType:D,normalizationTotal:Q,classificationMethod:I,standardDeviationInterval:T,minValue:S,maxValue:P,numClasses:l});return L.resolveCBResult(p,I)}async createHistogramResponse(p){const {field:G,valueExpression:R,
normalizationField:b,normalizationType:D,normalizationTotal:Q,classificationMethod:I,standardDeviationInterval:T,minValue:S,maxValue:P,numBins:l,scale:A,timeZone:v}=p;p=await this._getDataValues({field:G,valueExpression:R,normalizationField:b,normalizationType:D,normalizationTotal:Q,scale:A,timeZone:v});return L.calculateHistogram(p,{field:G,normalizationField:b,normalizationType:D,normalizationTotal:Q,classificationMethod:I,standardDeviationInterval:T,minValue:S,maxValue:P,numBins:l})}_sortFeatures(p,
G,R){if(1<p.length&&G?.length)for(const b of G.reverse()){G=b.split(" ");const D=G[0],Q=this.fieldsIndex.get(D);G=G[1]?"desc"===G[1].toLowerCase():!1;const I=L.getAttributeComparator(Q?.type,G);p.sort((T,S)=>{T=R(T,D,Q);S=R(S,D,Q);return I(T,S)})}}_createFeatureQueryResponse(p){const G=this.items,{geometryType:R,hasM:b,hasZ:D,objectIdField:Q,spatialReference:I}=this,{outFields:T,outSR:S,quantizationParameters:P,resultRecordCount:l,resultOffset:A,returnZ:v,returnM:w}=p,M=null!=l?G.length>(A||0)+l:
!1,K=T&&(T.includes("*")?[...this.fieldsIndex.fields]:T.map(U=>this.fieldsIndex.get(U)));return{exceededTransferLimit:M,features:this._createFeatures(p,G),fields:K,geometryType:R,hasM:b&&w,hasZ:D&&v,objectIdFieldName:Q,spatialReference:e.cleanFromGeometryEngine(S||I),transform:P&&C.toQuantizationTransform(P)||null}}_createFeatures(p,G){const R=new n(p,this.featureAdapter,this.fieldsIndex),{hasM:b,hasZ:D}=this,{orderByFields:Q,quantizationParameters:I,returnGeometry:T,returnCentroid:S,maxAllowableOffset:P,
resultOffset:l,resultRecordCount:A,returnZ:v=!1,returnM:w=!1}=p,M=D&&v,K=b&&w;p=[];var U=0;const Y=[...G];this._sortFeatures(Y,Q,(ua,ta,wa)=>R.getFieldValue(ua,ta,wa));if(this.geometryType&&(T||S)){var ea=C.toQuantizationTransform(I)??void 0;G="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(T&&!S)for(var la of Y){var na=this.featureAdapter.getGeometry(la),sa={attributes:R.getAttributes(la),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,na,P,ea,
M,K)};G&&na&&!sa.geometry&&(sa.centroid=e.transformCentroid(this,this.featureAdapter.getCentroid(la,this),ea));p[U++]=sa}else if(!T&&S)for(na of Y)p[U++]={attributes:R.getAttributes(na),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(na,this),ea)};else for(sa of Y)p[U++]={attributes:R.getAttributes(sa),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(sa,this),ea),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(sa),P,ea,
M,K)}}else for(ea of Y)(la=R.getAttributes(ea))&&(p[U++]={attributes:la});U=l||0;null!=A&&(p=p.slice(U,Math.min(p.length,U+A)));return p}_createExceedsLimitQueryResponse(p){var G=!1;let R=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY;G=Number.POSITIVE_INFINITY;for(const D of p.outStatistics??[])if("exceedslimit"===D.statisticType){R=null!=D.maxPointCount?D.maxPointCount:Number.POSITIVE_INFINITY;b=null!=D.maxRecordCount?D.maxRecordCount:Number.POSITIVE_INFINITY;G=null!=D.maxVertexCount?D.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)G=this.items.length>R;else if(this.items.length>b)G=!0;else{p=q(this.hasZ,this.hasM);const D=this.featureAdapter;G=this.items.reduce((Q,I)=>{I=D.getGeometry(I);return Q+(null!=I&&I.coords.length||0)},0)/p>G}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(G)}}]}}async _createStatisticsQueryResponse(p){var G=
{attributes:{}};const R=[],b=new Map,D=new Map,Q=new Map,I=new Map,T=new n(p,this.featureAdapter,this.fieldsIndex);var S=p.outStatistics;const {groupByFieldsForStatistics:P,having:l,orderByFields:A,resultRecordCount:v}=p;p=P?.length;const w=!!p,M=w?P[0]:null,K=w&&!this.fieldsIndex.get(M);for(const na of S??[]){const {outStatisticFieldName:sa,statisticType:ua}=na;S=na;const ta="exceedslimit"!==ua?na.onStatisticField:void 0,wa="percentile_disc"===ua||"percentile_cont"===ua;var U="EnvelopeAggregate"===
ua||"CentroidAggregate"===ua||"ConvexHullAggregate"===ua;const xa=w&&1===p&&(ta===M||K)&&"count"===ua;if(w){if(!Q.has(ta)){var Y=[];for(const Da of P){var ea=this._getAttributeValues(T,Da,b);Y.push(ea)}Q.set(ta,this._calculateUniqueValues(Y,U?!1:T.returnDistinctValues))}Y=Q.get(ta);if(!Y)continue;ea=Object.keys(Y);for(const Da of ea){const {count:Ia,data:Ra,items:Na,itemPositions:Sa}=Y[Da];ea=Ra.join(",");if(!l||T.validateItems(Na,l)){const Va=I.get(ea)||{attributes:{}};if(U){Va.aggregateGeometries||
(Va.aggregateGeometries={});const {aggregateGeometries:F,outStatisticFieldName:X}=await this._getAggregateGeometry(S,Na);Va.aggregateGeometries[X]=F}else{var la=null;if(xa)la=Ia;else{const F=this._getAttributeValues(T,ta,b);la=Sa.map(X=>F[X]);la=wa&&"statisticParameters"in S?this._getPercentileValue(S,la):this._getStatisticValue(S,la,null,T.returnDistinctValues)}Va.attributes[sa]=la}let h=0;P.forEach((F,X)=>Va.attributes[this.fieldsIndex.get(F)?F:`EXPR_${++h}`]=Ra[X]);I.set(ea,Va)}}}else if(U){G.aggregateGeometries||
(G.aggregateGeometries={});const {aggregateGeometries:Da,outStatisticFieldName:Ia}=await this._getAggregateGeometry(S,this.items);G.aggregateGeometries[Ia]=Da}else U=this._getAttributeValues(T,ta,b),G.attributes[sa]=wa&&"statisticParameters"in S?this._getPercentileValue(S,U):this._getStatisticValue(S,U,D,T.returnDistinctValues);S="min"!==ua&&"max"!==ua||!z.isStringField(this.fieldsIndex.get(ta))&&!this._isAnyDateField(ta)?null:this.fieldsIndex.get(ta)?.type;R.push({name:sa,alias:sa,type:S||"esriFieldTypeDouble"})}G=
w?Array.from(I.values()):[G];this._sortFeatures(G,A,(na,sa)=>na.attributes[sa]);v&&(G.length=Math.min(v,G.length));return{fields:R,features:G}}_isAnyDateField(p){p=this.fieldsIndex.get(p);return z.isDateField(p)||z.isDateOnlyField(p)||z.isTimestampOffsetField(p)||z.isTimeOnlyField(p)}async _getAggregateGeometry(p,G){const {convexHull:R,union:b}=await new Promise((v,w)=>d(["../../../geometry/geometryEngineJSON"],v,w)),{statisticType:D,outStatisticFieldName:Q}=p,{featureAdapter:I,spatialReference:T,
geometryType:S,hasZ:P,hasM:l}=this;G=G.map(v=>e.getGeometry(S,P,l,I.getGeometry(v)));const A=R(T,G,!0)[0];p={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===D?(G=A?H.getPolygonExtent(A):H.getGeometryExtent(b(T,G)),p.aggregateGeometries={...G,spatialReference:T},p.outStatisticFieldName=Q||"extent"):"CentroidAggregate"===D?(G=A?u.polygonCentroid(A):u.extentCentroid(H.getGeometryExtent(b(T,G))),p.aggregateGeometries={x:G[0],y:G[1],spatialReference:T},p.outStatisticFieldName=
Q||"centroid"):"ConvexHullAggregate"===D&&(p.aggregateGeometries=A,p.outStatisticFieldName=Q||"convexHull");return p}_getStatisticValue(p,G,R,b){const {onStatisticField:D,statisticType:Q}=p;p=null;p=R?.has(D)?R.get(D):z.isStringField(this.fieldsIndex.get(D))||this._isAnyDateField(D)?L.calculateStringStatistics({values:G,returnDistinct:b}):L.calculateStatistics({values:b?[...(new Set(G))]:G,minValue:null,maxValue:null,useSampleStdDev:!0});R&&R.set(D,p);return p["var"===Q?"variance":Q]}_getPercentileValue(p,
G){const {onStatisticField:R,statisticParameters:b,statisticType:D}=p,{value:Q,orderBy:I}=b;p=this.fieldsIndex.get(R);return L.calculatePercentile(G,{value:Q,orderBy:I,fieldType:p?.type,isDiscrete:"percentile_disc"===D})}_getAttributeValues(p,G,R){if(R.has(G))return R.get(G);const b=this.fieldsIndex.get(G),D=this.items.map(Q=>p.getFieldValue(Q,G,b));R.set(G,D);return D}_calculateUniqueValues(p,G){const R={},b=this.items,D=b.length;for(let Q=0;Q<D;Q++){const I=b[Q],T=[];for(const P of p)T.push(P[Q]);
const S=T.join(",");null==R[S]?R[S]={count:1,data:T,items:[I],itemPositions:[Q]}:(G||R[S].count++,R[S].items.push(I),R[S].itemPositions.push(Q))}return R}async _getDataValues(p,G=!0){const R=new n(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:b,scale:D,timeZone:Q}=p;return b?R.getExpressionValues(this.items,b,{viewingMode:"map",scale:D,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},Q):R.getDataValues(this.items,
x.clone(p),G)}}class m{constructor(p,G){this.coords=p;this.coordsIndex=G}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}g.QueryEngineResult=a;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(d,g){function x({scale:S,translate:P},l){return Math.round((l-P[0])/S[0])}function u({scale:S,translate:P},
l){return Math.round((P[1]-l)/S[1])}function H(S,P,l){const A=[];let v,w,M,K;for(let U=0;U<l.length;U++){const Y=l[U];if(0<U){if(M=x(S,Y[0]),K=u(S,Y[1]),M!==v||K!==w)A.push(P(Y,M-v,K-w)),v=M,w=K}else v=x(S,Y[0]),w=u(S,Y[1]),A.push(P(Y,v,w))}return 0<A.length?A:null}function C(S,P,l,A){return H(S,l?A?T:I:A?I:Q,P)}function f(S,P,l,A){const v=[];l=l?A?T:I:A?I:Q;for(A=0;A<P.length;A++){const w=H(S,l,P[A]);w&&3<=w.length&&v.push(w)}return v.length?v:null}function n(S,P,l,A){const v=[];l=l?A?T:I:A?I:Q;
for(A=0;A<P.length;A++){const w=H(S,l,P[A]);w&&2<=w.length&&v.push(w)}return v.length?v:null}function e({scale:S,translate:P},l){return l*S[0]+P[0]}function t({scale:S,translate:P},l){return P[1]-l*S[1]}function B(S,P,l){const A=Array(l.length);if(!l.length)return A;const [v,w]=S.scale;let M=e(S,l[0][0]);S=t(S,l[0][1]);A[0]=P(l[0],M,S);for(let K=1;K<l.length;K++){const U=l[K];M+=U[0]*v;S-=U[1]*w;A[K]=P(U,M,S)}return A}function z(S,P,l){const A=Array(l.length);for(let v=0;v<l.length;v++)A[v]=B(S,P,
l[v]);return A}function L(S,P,l,A){return B(S,l?A?T:I:A?I:Q,P)}function r(S,P,l,A){return z(S,l?A?T:I:A?I:Q,P)}function q(S,P,l,A){return z(S,l?A?T:I:A?I:Q,P)}function a(S,P,l){let [A,v]=l[0],w=Math.min(A,P[0]),M=Math.min(v,P[1]),K=Math.max(A,P[2]);P=Math.max(v,P[3]);for(let U=1;U<l.length;U++){const [Y,ea]=l[U];A+=Y;v+=ea;0>Y&&(w=Math.min(w,A));0<Y&&(K=Math.max(K,A));0>ea?M=Math.min(M,v):0<ea&&(P=Math.max(P,v))}S[0]=w;S[1]=M;S[2]=K;S[3]=P;return S}function m(S,P){if(!P.length)return null;S[0]=S[1]=
Number.POSITIVE_INFINITY;S[2]=S[3]=Number.NEGATIVE_INFINITY;for(let l=0;l<P.length;l++)a(S,S,P[l]);return S}function p(S,P,l,A,v){P.xmin=x(S,l.xmin);P.ymin=u(S,l.ymin);P.xmax=x(S,l.xmax);P.ymax=u(S,l.ymax);P!==l&&(A&&(P.zmin=l.zmin,P.zmax=l.zmax),v&&(P.mmin=l.mmin,P.mmax=l.mmax));return P}function G(S,P,l,A,v){P.points=C(S,l.points,A,v)??[];return P}function R(S,P,l,A,v){P.x=x(S,l.x);P.y=u(S,l.y);P!==l&&(A&&(P.z=l.z),v&&(P.m=l.m));return P}function b(S,P,l,A,v){S=f(S,l.rings,A,v);if(!S)return null;
P.rings=S;return P}function D(S,P,l,A,v){S=n(S,l.paths,A,v);if(!S)return null;P.paths=S;return P}const Q=(S,P,l)=>[P,l],I=(S,P,l)=>[P,l,S[2]],T=(S,P,l)=>[P,l,S[2],S[3]];d.equals=function(S,P){if(S===P||null==S&&null==P)return!0;if(null==S||null==P)return!1;let l,A,v,w;S&&"upperLeft"===S.originPosition?(l=S.translate[0],A=S.translate[1],S=S.scale[0]):(l=null!=S.extent?S.extent.xmin:0,A=null!=S.extent?S.extent.ymax:0,S=S.tolerance);P&&"upperLeft"===P.originPosition?(v=P.translate[0],w=P.translate[1],
P=P.scale[0]):(v=null!=P.extent?P.extent.xmin:0,w=null!=P.extent?P.extent.ymax:0,P=P.tolerance);return l===v&&A===w&&S===P};d.getQuantizedBoundsCoordsArray=a;d.getQuantizedBoundsCoordsArrayArray=m;d.getQuantizedBoundsPaths=function(S){return m([0,0,0,0],S)};d.getQuantizedBoundsPoints=function(S){const P=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(P,P,S)};d.getQuantizedBoundsRings=function(S){return m([0,0,0,0],S)};d.quantizeBounds=
function(S,P,l){P[0]=x(S,l[0]);P[3]=u(S,l[1]);P[2]=x(S,l[2]);P[1]=u(S,l[3]);return P};d.quantizeExtent=p;d.quantizeGeometry=function(S,P){return S&&P?g.isPoint(P)?R(S,{},P,!1,!1):g.isPolyline(P)?D(S,{},P,!1,!1):g.isPolygon(P)?b(S,{},P,!1,!1):g.isMultipoint(P)?G(S,{},P,!1,!1):g.isExtent(P)?p(S,{},P,!1,!1):null:null};d.quantizeMultipoint=G;d.quantizePaths=n;d.quantizePoint=R;d.quantizePoints=C;d.quantizePolygon=b;d.quantizePolyline=D;d.quantizeRings=f;d.quantizeX=x;d.quantizeY=u;d.toQuantizationTransform=
function(S){return S?{originPosition:"upper-left"===S.originPosition?"upperLeft":"lower-left"===S.originPosition?"lowerLeft":S.originPosition,scale:S.tolerance?[S.tolerance,S.tolerance]:[1,1],translate:null!=S.extent?[S.extent.xmin,S.extent.ymax]:[0,0]}:null};d.unquantizeBounds=function(S,P,l){return l?(P[0]=e(S,l[0]),P[1]=t(S,l[3]),P[2]=e(S,l[2]),P[3]=t(S,l[1]),P):[e(S,P[0]),t(S,P[3]),e(S,P[2]),t(S,P[1])]};d.unquantizeCoordsArray=B;d.unquantizeCoordsArrayArray=z;d.unquantizeExtent=function(S,P,l,
A,v){P.xmin=e(S,l.xmin);P.ymin=t(S,l.ymin);P.xmax=e(S,l.xmax);P.ymax=t(S,l.ymax);P!==l&&(A&&(P.zmin=l.zmin,P.zmax=l.zmax),v&&(P.mmin=l.mmin,P.mmax=l.mmax));return P};d.unquantizeMultipoint=function(S,P,l,A,v){null!=l&&(P.points=L(S,l.points,A,v));return P};d.unquantizePaths=r;d.unquantizePoint=function(S,P,l,A,v){if(null==l)return P;P.x=e(S,l.x);P.y=t(S,l.y);P!==l&&(A&&(P.z=l.z),v&&(P.m=l.m));return P};d.unquantizePoints=L;d.unquantizePolygon=function(S,P,l,A,v){null!=l&&(P.rings=q(S,l.rings,A,v));
return P};d.unquantizePolyline=function(S,P,l,A,v){null!=l&&(P.paths=r(S,l.paths,A,v));return P};d.unquantizeRings=q;d.unquantizeX=e;d.unquantizeY=t;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),function(d,g,x,u,H,C){class f{constructor(n,e,
t){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=n.returnDistinctValues??!1;this.fieldsIndex=t;this.featureAdapter=e;if((e=n.outFields)&&!e.includes("*")){this.outFields=e;n=0;for(const z of e){var B=d.getExpressionFromFieldName(z);B=(e=this.fieldsIndex.get(B))?null:d.getWhereClause(B,t);e=e?e.name:d.getAliasFromFieldName(z)||`FIELD_EXP_${n++}`;this._fieldDataCache.set(z,{alias:e,clause:B})}}}countDistinctValues(n){if(!this.returnDistinctValues)return n.length;
n.forEach(e=>this.getAttributes(e));return this._returnDistinctMap.size}getAttributes(n){n=this._processAttributesForOutFields(n);return this._processAttributesForDistinctValues(n)}getFieldValue(n,e,t){const B=t?t.name:e;let z=null;this._fieldDataCache.has(B)?z=this._fieldDataCache.get(B)?.clause:t||(z=d.getWhereClause(e,this.fieldsIndex),this._fieldDataCache.set(B,{alias:B,clause:z}));return t?this.featureAdapter.getAttribute(n,B):z?.calculateValue(n,this.featureAdapter)}getDataValues(n,e,t=!0){const B=
e.normalizationType,z=e.normalizationTotal,L=this.fieldsIndex.get(e.field),r=x.isDateOnlyField(L)||x.isTimestampOffsetField(L),q=x.isTimeOnlyField(L);return n.map(a=>{let m=e.field&&this.getFieldValue(a,e.field,this.fieldsIndex.get(e.field));e.field2?(m=`${H.processNullValue(m)}${e.fieldDelimiter}${H.processNullValue(this.getFieldValue(a,e.field2,this.fieldsIndex.get(e.field2)))}`,e.field3&&(m=`${m}${e.fieldDelimiter}${H.processNullValue(this.getFieldValue(a,e.field3,this.fieldsIndex.get(e.field3)))}`)):
"string"===typeof m&&t&&(r?m=m?(new Date(m)).getTime():null:q&&(m=m?u.timeOnlyToMilliseconds(m):null));B&&Number.isFinite(m)&&(a="field"===B&&e.normalizationField?this.getFieldValue(a,e.normalizationField,this.fieldsIndex.get(e.normalizationField)):null,m=H.getNormalizedValue(m,B,a,z));return m})}async getExpressionValues(n,e,t,B,z){const {arcadeUtils:L}=await C.loadArcade(),r=L.hasGeometryOperations(e);r&&await L.enableGeometryOperations();const q=L.createFunction(e),a=L.getViewInfo(t),m={fields:this.fieldsIndex.fields};
return n.map(p=>{p={attributes:this.featureAdapter.getAttributes(p),layer:m,geometry:r?{...g.getGeometry(B.geometryType,B.hasZ,B.hasM,this.featureAdapter.getGeometry(p)),spatialReference:t?.spatialReference}:null};p=L.createExecContext(p,a,z);return L.executeFunction(q,p)})}validateItem(n,e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:d.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e)?.clause?.testFeature(n,this.featureAdapter)??!1}validateItems(n,
e){this._fieldDataCache.has(e)||this._fieldDataCache.set(e,{alias:e,clause:d.getWhereClause(e,this.fieldsIndex)});return this._fieldDataCache.get(e)?.clause?.testSet(n,this.featureAdapter)??!1}_processAttributesForOutFields(n){const e=this.outFields;if(!e?.length)return this.featureAdapter.getAttributes(n);const t={};for(const B of e){const {alias:z,clause:L}=this._fieldDataCache.get(B);t[z]=L?L.calculateValue(n,this.featureAdapter):this.featureAdapter.getAttribute(n,z)}return t}_processAttributesForDistinctValues(n){if(null==
n||!this.returnDistinctValues)return n;var e=this.outFields,t=[];if(e)for(const z of e){var {alias:B}=this._fieldDataCache.get(z);t.push(n[B])}else for(B in n)t.push(n[B]);e=`${(e||["*"]).join(",")}=${t.join(",")}`;t=this._returnDistinctMap.get(e)||0;this._returnDistinctMap.set(e,++t);return 1<t?null:n}}return f})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B,z,L,r){function q(b){b=R.exec(b);if(!b)return null;const {hh:D,mm:Q,ss:I,ms:T}=b.groups;return Number(D)*H.millisecondsPerTimeUnit.hours+Number(Q)*H.millisecondsPerTimeUnit.minutes+Number(I)*H.millisecondsPerTimeUnit.seconds+Number(T||0)}function a(b,D){b=null!=b?b:"";null!=D&&D&&(b=b?"("+b+") AND ("+D+")":D);return b}function m(b){const D=b.layer;return b.fields.filter(Q=>!D.getField(Q))}function p(b){const D=b.layer;return b.fields.filter(Q=>{Q=D.getFieldUsageInfo(Q);
return!Q||!Q.supportsStatistics})}let G=null;const R=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;d.calculateHeatmapStats=function(b,D=18,Q,I,T){const S=new Float64Array(I*T);D=Math.round(u.pt2px(D));let P=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;Q=t.createValueFunction(Q);for(const {geometry:w,attributes:M}of b){const {x:K,y:U}=w;b=Math.max(0,K-D);var A=Math.max(0,U-D);const Y=Math.min(T,U+D),ea=Math.min(I,K+D),la=+Q(M);for(;A<Y;A++)for(let na=
b;na<ea;na++){var v=A*I+na;const sa=t.evaluateDensityKernel(na-K,A-U,D)*la;v=S[v]+=sa;P=Math.min(P,v);l=Math.max(l,v)}}return{min:P,max:l}};d.getDataValues=async function(b,D,Q=!0){if(!D)return[];const {field:I,field2:T,field3:S,fieldDelimiter:P,fieldInfos:l,timeZone:A}=b;var v=I&&l?.find(ta=>ta.name.toLowerCase()===I.toLowerCase());const w=v?e.isTimeOnlyField(v):!1,M=v?B.isAnyDateField(v):!1,K=b.valueExpression,U=b.normalizationType,Y=b.normalizationField,ea=b.normalizationTotal,la=[];v=b.viewInfoParams;
let na=null,sa=null;if(K){if(!G){const {arcadeUtils:ta}=await L.loadArcade();G=ta}G.hasGeometryOperations(K)&&await G.enableGeometryOperations();na=G.createFunction(K);sa=v?G.getViewInfo({viewingMode:v.viewingMode,scale:v.scale,spatialReference:new C(v.spatialReference)}):null}b=b.fieldInfos;const ua=D[0]&&"declaredClass"in D[0]&&"esri.Graphic"===D[0].declaredClass||!b?null:{fields:b};D.forEach(ta=>{var wa=ta.attributes;if(K){var xa=G.createExecContext(ua?{...ta,layer:ua}:ta,sa,A);xa=G.executeFunction(na,
xa)}else wa&&(xa=wa[I],T?(xa=`${z.processNullValue(xa)}${P}${z.processNullValue(wa[T])}`,S&&(xa=`${xa}${P}${z.processNullValue(wa[S])}`)):"string"===typeof xa&&Q&&(M?xa=xa?(new Date(xa)).getTime():null:w&&(xa=xa?q(xa):null)));U&&"number"===typeof xa&&isFinite(xa)&&(wa=wa&&parseFloat(wa[Y]),xa=z.getNormalizedValue(xa,U,wa,ea));la.push(xa)});return la};d.getRangeExpr=function(b,D,Q){D=null!=D?b+" \x3e\x3d "+D:"";b=null!=Q?b+" \x3c\x3d "+Q:"";Q="";return(Q=D&&b?a(D,b):D||b)?"("+Q+")":""};d.getSQLFilterForNormalization=
function(b){const D=b.field,Q=b.normalizationType;b=b.normalizationField;let I;if("field"===Q)I="(NOT "+b+" \x3d 0)";else if("log"===Q||"natural-log"===Q||"square-root"===Q)I=`(${D} > 0)`;return I};d.getSumOfAttributesExpr=function(b,D,Q){const I=[],T=[],S=[],P=[],l=[];b.forEach((w,M)=>{const K=w.field?"field":"expression",U=w.field||w.valueExpression;w.field?(l.push(U),T.push(`var ${K}${M} = Number($feature["${U}"]);`)):(I.push(`function getValueForExpr${M}() {\n  ${U} \n}`),T.push(`var ${K}${M} = Number(getValueForExpr${M}());`));
Q||S.push(`${K}${M} = IIf(${K}${M} < 0, 0, ${K}${M});`);P.push(`${K}${M}`)});b="return sum;";const A=I.length?null:l.reduce((w,M)=>`${w} + ${M}`);let v=null;D||Q?D?Q||(b="return IIf(sum \x3e\x3d 0, sum, null);",A&&(v=`(( ${A} ) >= 0)`)):(b="return IIf(sum !\x3d 0, sum, null);",A&&(v=`(( ${A} ) <> 0)`)):(b="return IIf(sum \x3e 0, sum, null);",A&&(v=`(( ${A} ) > 0)`));return{valueExpression:[I.length?I.join("\n"):"",T.join("\n"),S.join("\n"),`var sum = ${P.join(" + ")};`,b].filter(Boolean).join("\n\n"),
sqlExpression:A,sqlWhere:v}};d.mergeWhereClauses=a;d.quantizeFeatures=function(b,D,Q,I){const T=n.isWrappable(Q)?n.getInfo(Q):null,S=T?Math.round((T.valid[1]-T.valid[0])/D.scale[0]):null;return b.map(P=>{const l=new r(P.geometry);f.quantizePoint(D,l,l,l.hasZ,l.hasM);if(T){var A=S??0,v=I[0];0>l.x?l.x+=A:l.x>v&&(l.x-=A)}P.geometry=l;return P})};d.timeOnlyToMilliseconds=q;d.verifyBasicFieldValidity=function(b,D,Q){const I=m({layer:b,fields:D});if(I.length)return new x(Q,"Unknown fields: "+I.join(", ")+
". You can only use fields defined in the layer schema");b=p({layer:b,fields:D});if(b.length)return new x(Q,"Unsupported fields: "+b.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};d.verifyFieldType=function(b,D,Q,I){let T;D?D.name!==b.objectIdField&&I.includes(D.type)||(T=new x(Q,"'field' should be one of these types: "+I.join(","))):T=new x(Q,"'field' is not defined in the layer schema");return T};d.verifyFilterValidty=function(b,
D){if(b&&"intersects"!==b.spatialRelationship)return new x(D,"Only 'intersects' spatialRelationship is supported for featureFilter")};d.verifyNumericField=function(b,D,Q){let I;D?D.name!==b.objectIdField&&e.isNumericField(D)||(I=new x(Q,"'field' should be one of these numeric types: "+e.numericTypes.join(","))):I=new x(Q,"'field' is not defined in the layer schema");return I};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(d){function g(u){return u?
72*u/96:0}const x=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;d.castRenderScreenPointArray=function(u){return u};d.castRenderScreenPointArray3=function(u){return u};d.castScreenPointArray=function(u){return u};d.createRenderScreenPoint=function(u=0,H=0){return{x:u,y:H}};d.createRenderScreenPointArray=function(u=0,H=0){return[u,H]};d.createRenderScreenPointArray3=function(u=0,H=0,C=0){return[u,H,C]};d.createScreenPoint=function(u=0,H=0){return{x:u,y:H}};d.createScreenPointArray=function(u=0,H=0){return[u,
H]};d.pt2px=function(u){return u?u/72*96:0};d.px2pt=g;d.screenPointArrayToObject=function(u,H){return H?(H.x=u[0],H.y=u[1],H):{x:u[0],y:u[1]}};d.screenPointObjectToArray=function(u,H){return H?(H[0]=u.x,H[1]=u.y,2<H.length&&(H[2]=0),H):[u.x,u.y]};d.toPt=function(u){if("string"===typeof u){var H=u.match(x);if(H){var C=Number(H[1]);H=H[3]&&H[3].toLowerCase();u="-"===u.charAt(0);C="px"===H?g(C):C;return u?-C:C}console.warn("screenUtils.toPt: input not recognized!");return null}return u};Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(d,g,x,u){function H(n,e,t){return 0===n?0:n*f[e]/f[t]}function C(n){switch(n){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const f={milliseconds:1,seconds:1E3,
minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};d.convertTime=H;d.isValidDate=function(n){return n instanceof Date&&!isNaN(n.getTime())};d.makeUTCTime=function(n,e,t="milliseconds"){e=new Date(H(e,t,"milliseconds"));e.setUTCFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return e};d.mergeTimeExtents=function(n,e){return n&&e?n.intersection(e):n||e};d.millisecondsPerTimeUnit=f;d.offsetDate=function(n,e,t,B=x.system){B=new u.IANAZone(g.resolveTimeZone(B));
n=u.DateTime.fromJSDate(n,{zone:B});B="decades"===t||"centuries"===t?"year":C(t);"decades"===t&&(e*=10);"centuries"===t&&(e*=100);return n.plus({[B]:e}).toJSDate()};d.offsetDateUTC=function(n,e,t="milliseconds"){n=n.getTime();e=H(e,t,"milliseconds");return new Date(n+e)};d.resetUTCDate=function(n,e){n=new Date(n.getTime());n.setUTCFullYear(e.getFullYear(),e.getMonth(),e.getDate());return n};d.timeSinceUTCMidnight=function(n,e="milliseconds"){const t=H(n.getUTCHours(),"hours","milliseconds"),B=H(n.getUTCMinutes(),
"minutes","milliseconds"),z=H(n.getUTCSeconds(),"seconds","milliseconds");n=n.getUTCMilliseconds();return H(t+B+z+n,"milliseconds",e)};d.truncateDate=function(n,e,t=x.system){t=new u.IANAZone(g.resolveTimeZone(t));n=u.DateTime.fromJSDate(n,{zone:t});if("decades"===e||"centuries"===e)return n=n.startOf("year"),{year:t}=n,n.set({year:t-t%("decades"===e?10:100)}).toJSDate();e=C(e);return n.startOf(e).toJSDate()};d.truncateLocalTime=function(n){const e=new Date(0);e.setHours(0);e.setMinutes(0);e.setSeconds(0);
e.setMilliseconds(0);e.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return e};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(d,g,x,u,H){function C(f,n,e,t){let {color:B,ratio:z}=n,{color:L,ratio:r}=e;r===z&&(1===r?z-=1E-6:r+=1E-6);n=g.clamp((t-z)/(r-z),0,1);u.lerp(f,B.toArray(),
L.toArray(),n)}d.createValueFunction=function(f){return"function"===typeof f?f:f?n=>+n[f]:()=>1};d.evaluateDensityKernel=function(f,n,e){f=Math.sqrt(f**2+n**2)/e;return 1<f?0:3/(Math.PI*e**2)*(1-f**2)**2};d.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(f){return x.px2pt(2.4*f)};d.generateGradient=function(f){const n=new Uint8ClampedArray(2048);f=f.filter(({ratio:L})=>0<=L&&1>=L).sort((L,r)=>L.ratio-r.ratio).map(({color:L,ratio:r})=>({color:L,ratio:Math.max(r,.001)}));if(1>f.length)return n;
let e=f[0],t=f[0],B=1;const z=H.create();for(let L=0;512>L;L++){const r=(L+.5)/512;for(;r>t.ratio&&B<f.length;)e=t,t=f[B++];C(z,e,t,r);n.set(z,4*L)}return n};d.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(f){return x.pt2px(f)/2.4};d.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),
function(d,g,x,u,H,C){function f(r){return String(r).padStart(2,"0")}function n(r,q,a){if("date"===q||"number"===q){"number"===q&&(r=new Date(r));q=a?r.getFullYear():r.getUTCFullYear();const m=f((a?r.getMonth():r.getUTCMonth())+1),p=f(a?r.getDate():r.getUTCDate()),G=f(a?r.getHours():r.getUTCHours()),R=f(a?r.getMinutes():r.getUTCMinutes());r=f(a?r.getSeconds():r.getUTCSeconds());r=`TIMESTAMP'${q}-${m}-${p} ${G}:${R}:${r}'`}return r}function e(r,q){if(q instanceof Date)return"date";if("number"===typeof q)return"number";
if("string"===typeof q&&(r=r.getField(q),"\x3cnow\x3e"!==q.toLowerCase()&&x.isDateField(r)))return"field"}const t={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},B={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},z=new Set(["integer","small-integer"]);let L=null;d.castIntegerFieldToFloat=function(r){return`cast(${r} as float)`};d.dateTypes=
["date","date-only","timestamp-offset"];d.defaultBasemapGroups=t;d.fieldDelimiter=",";d.formatAnyDate=function(r,q){const {format:a,timeZoneOptions:m,fieldType:p}=q??{};let G;m&&({timeZone:R,timeZoneName:G}=C.getTimeZoneFormattingOptions(m.layerTimeZone,m.datesInUnknownTimezone,m.viewTimeZone,g.convertDateFormatToIntlOptions(a||"short-date-short-time"),p));if("string"===typeof r&&isNaN(Date.parse("time-only"===p?`1970-01-01T${r}Z`:r)))return r;switch(p){case "date-only":var R=g.convertDateFormatToIntlOptions(a||
"short-date");return"string"===typeof r?g.formatDateOnly(r,{...R}):g.formatDate(r,{...R,timeZone:C.utc});case "time-only":return R=g.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof r?g.formatTimeOnly(r,R):g.formatDate(r,{...R,timeZone:C.utc});case "timestamp-offset":if(!R&&"string"===typeof r&&(new Date(r)).toISOString()!==r)return r;R=(q=a||m?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...q,timeZone:R,timeZoneName:G}:void 0;return"string"===typeof r?g.formatTimestamp(r,
R):g.formatDate(r,R);default:return q=a||m?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,g.formatDate("string"===typeof r?new Date(r):r,q?{...q,timeZone:R,timeZoneName:G}:void 0)}};d.getBasemapGroup=function(r,q=t){for(const a in q)if(q[a].includes(r))return a};d.getBasemapId=function(r,q,a=!0){let m=null;r&&("string"===typeof r?q.includes(r)&&(m=r):m=H.getWellKnownBasemapId(r));return a?m||"gray":m};d.getDateDiffSQL=function(r,q,a,m){const {hasQueryEngine:p}=r;a=n(a,e(r,a),
p);r=n(q,e(r,q),p);r=`(${a} - ${r})`;m=B[m];q="/";1>m&&(m=1/m,q="*");return{sqlExpression:1===m?r:`(${r} ${q} ${m})`,sqlWhere:null}};d.getDateType=e;d.getFieldsList=async function(r){const {field:q,field2:a,field3:m,normalizationField:p,valueExpression:G}=r;r=[];G&&(L||({arcadeUtils:r}=await u.loadArcade(),L=r),r=L.extractFieldNames(G));q&&r.push(q);a&&r.push(a);m&&r.push(m);p&&r.push(p);return r};d.getNormalizationType=function(r){let q=r.normalizationType;q||(r.normalizationField?q="field":null!=
r.normalizationTotal&&(q="percent-of-total"));return q??void 0};d.isAnyDateField=function(r){return x.isDateField(r)||x.isDateOnlyField(r)||x.isTimestampOffsetField(r)};d.isIntegerField=function(r,q){r=q&&r.getField(q);return!!r&&z.has(r.type)};d.unitValueInDays=B;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(d,g,x,u,H,C,f,n,e,t){function B(A,v){let w;if("string"===typeof A){const M=A in t.esriBasemapDefinitions,K=!M&&A.includes("/");if(!M&&!K)return v=Object.entries(t.esriBasemapDefinitions).filter(([,U])=>x.apiKey&&!U.classic||!x.apiKey&&(U.classic||U.is3d)).map(([U])=>`"${U}"`).sort().join(", "),H.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${A}. Try one of these: ${v}`),null;v&&(w=v[A]);w||(w=M?g.fromId(A):new g({style:{id:A}}),v&&(v[A]=w))}else w=n.ensureType(g,
A);w?.destroyed&&(H.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:w}),w=null);return w}function z(A){if(P)return P(A);let v=null;A=a(A);const w=!A?.baseLayers.length;for(const K in t.esriBasemapDefinitions){var M=R(t.esriBasemapDefinitions[K]);M=D(A,M,{mustMatchReferences:w});if("equal"===M){v=K;break}"base-layers-equal"===M&&(v=K)}return v}function L(A,v){const w=new u;A.forEach(M=>{const K=v.find(U=>"scene"!==U.type&&I(p(M),p(U)))||M;w.includes(K)?
w.push(M):w.push(K)});return w}function r(A){if(q(A.url))return!0;if("vector-tile"===A.type)for(const v in A.sourceNameToSource)if(q(A.sourceNameToSource[v]?.sourceUrl))return!0;return!1}function q(A){if(!A)return!1;A=new f.Url(f.makeAbsolute(A));return!!A.authority&&l.test(A.authority)}function a(A){return A?!A.loaded&&A.resourceInfo?R(A.resourceInfo.data):{baseLayers:m(A.baseLayers),referenceLayers:m(A.referenceLayers)}:null}function m(A){return(u.isCollection(A)?A.toArray():A).map(p)}function p(A){return{type:A.type,
effect:"effect"in A?A.effect:void 0,url:T("urlTemplate"in A&&A.urlTemplate||A.url||"styleUrl"in A&&A.styleUrl||""),minScale:"minScale"in A&&null!=A.minScale?A.minScale:0,maxScale:"maxScale"in A&&null!=A.maxScale?A.maxScale:0,opacity:null!=A.opacity?A.opacity:1,visible:null!=A.visible?!!A.visible:!0,sublayers:"map-image"!==A.type&&"wms"!==A.type||null==A.sublayers?void 0:A.sublayers?.map(v=>({id:v.id,visible:v.visible})),activeLayerId:"wmts"===A.type?A.activeLayer?.id:void 0}}function G(A){return A.isReference||
"ArcGISSceneServiceLayer"===A.layerType}function R(A){return A?{baseLayers:b((A.baseMapLayers??[]).filter(v=>!G(v))),referenceLayers:b((A.baseMapLayers??[]).filter(v=>G(v)))}:null}function b(A){return A.map(v=>{let w;switch(v.layerType){case "VectorTileLayer":w="vector-tile";break;case "ArcGISTiledMapServiceLayer":w="tile";break;case "ArcGISSceneServiceLayer":w="scene";break;default:w="unknown"}return{type:w,effect:v.effect,url:T(v.templateUrl||v.urlTemplate||v.styleUrl||v.url),minScale:v.minScale??
0,maxScale:v.maxScale??0,opacity:v.opacity??1,visible:null!=v.visibility?!!v.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function D(A,v,w){return null!=A!==(null!=v)?"not-equal":A&&v?Q(A.baseLayers,v.baseLayers)?Q(A.referenceLayers,v.referenceLayers)?"equal":w.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function Q(A,v){if(A.length!==v.length)return!1;for(let w=0;w<A.length;w++)if(!I(A[w],v[w]))return!1;return!0}function I(A,v){if(A.type!==v.type||A.url!==v.url||
A.minScale!==v.minScale||A.maxScale!==v.maxScale||A.visible!==v.visible||A.opacity!==v.opacity||!e.effectEquals(A.effect,v.effect))return!1;if(null!=A.activeLayerId||null!=v.activeLayerId)return A.activeLayerId===v.activeLayerId;if(null!=A.sublayers||null!=v.sublayers){if(null==A.sublayers||null==v.sublayers||A.sublayers.length!==v.sublayers.length)return!1;for(let w=0;w<A.sublayers.length;w++){const M=A.sublayers.at(w),K=v.sublayers.at(w);if(M?.id!==K?.id||M?.visible!==K?.visible)return!1}}return!0}
function T(A){return A?f.normalize(A).replace(/^\s*https?:/i,"").toLowerCase():""}function S(A){return"portalItem"in A?A.portalItem?.thumbnailUrl:void 0}let P;const l=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;d.clonePreservingTiledLayers=function(A,v=null){A=B(A);if(!A)return null;A=A.clone();v&&(A.baseLayers=L(A.baseLayers,v.baseLayers),A.referenceLayers=L(A.referenceLayers,v.referenceLayers));return A};d.contentEquals=function(A,v){if(A===v||null!=A?.portalItem?.id&&A.portalItem.id===v?.portalItem?.id)return!0;
A=a(A);v=a(v);return"equal"===D(A,v,{mustMatchReferences:!0})};d.createCache=function(){return{}};d.destroyCache=function(A){for(const v in A)C.destroyMaybe(A[v]),delete A[v]};d.ensureType=B;d.findSpatialReference=function(A,v){if(null==v||null==A)return{spatialReference:null,updating:!1};if("not-loaded"===v.loadStatus)return v.load(),{spatialReference:null,updating:!0};if(v.spatialReference)return{spatialReference:v.spatialReference,updating:!1};if(0===v.baseLayers.length)return{spatialReference:null,
updating:!1};v=v.baseLayers.at(0);switch(v.loadStatus){case "not-loaded":v.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}v=(("supportedSpatialReferences"in v?v.supportedSpatialReferences:null)||["tileInfo"in v?v.tileInfo?.spatialReference:v.spatialReference]).filter(Boolean);const w=A.spatialReference;return w?{spatialReference:v.find(M=>w.equals(M))??v[0]??null,updating:!1}:{spatialReference:v[0],updating:!1}};d.getBasemapThumbnailUrl=
function(A){if(!A)return null;var {thumbnailUrl:v}=A;return v?v:(v=z(A))?t.esriBasemapDefinitions[v].thumbnailUrl:C.mappedFind(A.baseLayers,S)};d.getWellKnownBasemapId=z;d.hasDeveloperBasemapLayer=function(A){return!!A?.baseLayers.concat(A.referenceLayers).some(r)};d.isBasemap3D=function(A){return"Web Scene"===A.portalItem?.type||A.referenceLayers.some(v=>"scene"===v.type)};d.isBasemapInBeta=function(A){return!!A?.portalItem?.tags?.some(v=>"beta"===v.toLowerCase())};d.isBasemapLayer=function(A,v){return A.basemap?.referenceLayers?.some(w=>
w.uid===v)||A.basemap?.baseLayers?.some(w=>w.uid===v)};d.isDeveloperBasemapLayer=r;d.overrideGetWellKnownBasemapId=function(A){P=A};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B,z,L,r,q,a,m,p,G,R,b,D,Q){var I;let T=0;C=I=class extends C.JSONSupportMixin(n){constructor(l){super(l);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+T++;this.baseLayers=new u;this.referenceLayers=new u;const A=v=>{v.parent&&v.parent!==this&&"remove"in v.parent&&v.parent.remove(v);v.parent=this;"elevation"===v.type&&t.getLogger(this).error(`Layer '${v.title}, id:${v.id}' of type '${v.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",v=>A(v.item)),this.referenceLayers.on("after-add",v=>A(v.item)),this.baseLayers.on("after-remove",v=>{v.item.parent=null}),this.referenceLayers.on("after-remove",v=>{v.item.parent=null})])}initialize(){this.when().catch(l=>{t.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,l)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var l=this.baseLayers.toArray();for(const A of l)A.destroy();
l=this.referenceLayers.toArray();for(const A of l)A.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=B.destroyMaybe(this.portalItem)}normalizeCtorArgs(l){l&&"resourceInfo"in l&&(this._set("resourceInfo",l.resourceInfo),l={...l},delete l.resourceInfo);return l}set baseLayers(l){this._set("baseLayers",H.referenceSetter(l,this._get("baseLayers")))}_writeBaseLayers(l,A,v){const w=[];l&&(v={...v,layerContainerType:"basemap"},this.baseLayers.forEach(M=>{M=Q.getLayerJSON(M,
v.webmap?v.webmap.getLayerJSONFromResourceInfo(M):null,v);null!=M&&w.push(M)}),this.referenceLayers.forEach(M=>{const K=Q.getLayerJSON(M,v.webmap?v.webmap.getLayerJSONFromResourceInfo(M):null,v);null!=K&&("scene"!==M.type&&(K.isReference=!0),w.push(K))}));A.baseMapLayers=w}set referenceLayers(l){this._set("referenceLayers",H.referenceSetter(l,this._get("referenceLayers")))}writeTitle(l,A){A.title=l||"Basemap"}load(l){this.addResolvingPromise(this._loadFromSource(l));return Promise.resolve(this)}loadAll(){return e.loadAll(this,
l=>{l(this.baseLayers,this.referenceLayers)})}clone(){const l={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(A=>f.isClonable(A)?A.clone():A),referenceLayers:this.referenceLayers.map(A=>f.isClonable(A)?A.clone():A)};this.loaded&&(l.loadStatus="loaded");return(new I({resourceInfo:this.resourceInfo})).set(l)}read(l,A){this.resourceInfo||this._set("resourceInfo",{data:l,context:A});super.read(l,A)}write(l,A){l=l||{};A?.origin||(A={origin:"web-map",...A});super.write(l,
A);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(l.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(v=>{v=f.clone(v);v.url&&L.isProtocolRelative(v.url)&&(v.url=`https:${v.url}`);v.templateUrl&&L.isProtocolRelative(v.templateUrl)&&(v.templateUrl=`https:${v.templateUrl}`);return v}));return l}async _loadFromSource(l){const {resourceInfo:A,portalItem:v,style:w}=this;z.throwIfAborted(l);const M=[];A?(M.push(this._loadLayersFromJSON(A.data,A.context?A.context.url:null,l)),A.data.id&&!A.data.title&&
M.push(b.getBasemapTitle(A.data.id).then(K=>{K&&this.read({title:K},A.context)}))):v?M.push(this._loadFromItem(v,l)):w&&M.push(this._loadFromStylesService(w,l));await Promise.all(M)}async _loadLayersFromJSON(l,A,v){const w=this.resourceInfo?.context,M=this.portalItem?.portal||w?.portal||null,K=P[w?.origin||""]??"web-map",{populateOperationalLayers:U}=await new Promise((ea,la)=>d(["./layers/support/layersCreator"],ea,la)),Y=[];z.throwIfAborted(v);if(l.baseMapLayers&&Array.isArray(l.baseMapLayers)){A=
{context:{...w,origin:K,url:A,portal:M,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const ea=la=>"web-scene"===K&&"ArcGISSceneServiceLayer"===la.layerType||la.isReference;v=U(this.baseLayers,l.baseMapLayers.filter(la=>!ea(la)),A);Y.push(v);l=U(this.referenceLayers,l.baseMapLayers.filter(ea),A);Y.push(l)}await Promise.allSettled(Y)}async _loadFromItem(l,A){const v=await (await l.load(A)).fetchData("json",A),w=L.urlToObject(l.itemUrl??"");this._set("resourceInfo",{data:v.baseMap??
{},context:{origin:S[l.type||""]??"web-map",portal:l.portal||G.getDefault(),url:w}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:v.spatialReference},this.resourceInfo.context);this.read({title:l.title,thumbnailUrl:l.thumbnailUrl},{origin:"portal-item",portal:l.portal||G.getDefault(),url:w});return this._loadLayersFromJSON(this.resourceInfo.data,w,A)}async _loadFromStylesService(l,A){var v=`${l.serviceUrl}/${l.id}`;l=(await x(v,{query:{language:l.getLanguageParamValue(),
places:l.places,worldview:l.worldview},signal:A?.signal})).data;v=L.urlToObject(v);this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:v}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:l.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,v,A)}static fromId(l){return(l=b.esriBasemapDefinitions[l])?l.itemId?new I({portalItem:{id:l.itemId,portal:{url:"https://www.arcgis.com"}}}):I.fromJSON(l,
{origin:l.is3d?"web-scene":"web-map"}):null}};g.__decorate([r.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(l,A,v,w){this._writeBaseLayers(l,A,w)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:u}},writer(l,A,v,w){this._writeBaseLayers(l,A,w)}}}}}})],C.prototype,"baseLayers",null);g.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],C.prototype,"id",void 0);g.__decorate([r.property({type:R})],C.prototype,"portalItem",void 0);
g.__decorate([r.property()],C.prototype,"referenceLayers",null);g.__decorate([r.property({readOnly:!0})],C.prototype,"resourceInfo",void 0);g.__decorate([r.property({type:p})],C.prototype,"spatialReference",void 0);g.__decorate([r.property({type:D})],C.prototype,"style",void 0);g.__decorate([r.property()],C.prototype,"thumbnailUrl",void 0);g.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],C.prototype,"title",void 0);g.__decorate([m.writer("title")],C.prototype,
"writeTitle",null);C=I=g.__decorate([a.subclass("esri.Basemap")],C);const S={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},P={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return C})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(d,g){d.castForReferenceSetter=function(x){return x};d.referenceSetter=function(x,u,H=g){u||=new H;if(u===x)return u;u.removeAll();x&&(Array.isArray(x)||"items"in x&&Array.isArray(x.items))?
u.addMany(x):x&&u.add(x);return u};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(d,g,x,u,H,C,f,n){const e=t=>{t=class extends t{constructor(...B){super(...B);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(z=>
{const L=this.load.bind(this);this.load=r=>{const q=new Promise((a,m)=>{const p=H.onAbortOrThrow(r,m);this.destroyed&&m(new g("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,m).finally(()=>{p&&p.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const a=this._loadController=new AbortController;L({signal:a.signal})}z();return q}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},z=>{this._set("loadStatus","failed");this._set("loadError",z);this._loadController=null})}destroy(){this._loadController&&(this._loadController=x.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new g("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};d.__decorate([f.property({readOnly:!0})],t.prototype,"loaded",null);d.__decorate([f.property({readOnly:!0})],t.prototype,"loadError",void 0);d.__decorate([f.property({clonable:!1})],t.prototype,"loadStatus",void 0);d.__decorate([f.property({type:[C],readOnly:!0})],t.prototype,"loadWarnings",null);return t=d.__decorate([n.subclass("esri.core.Loadable")],t)};u=class extends e(u.EsriPromise){};u=d.__decorate([n.subclass("esri.core.Loadable")],
u);(function(t){t.LoadableMixin=e;t.isLoadable=function(B){return!(!B||!B.load)}})(u||={});return u})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(d,g,x,u,H){var C;(function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"})(C||={});class f{constructor(){this._resolver=u.createResolver();this._status=C.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=C.RESOLVED;this._cleanUp()},()=>{this._status=C.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e);this._tryResolve()}isResolved(){return this._status===C.RESOLVED}isRejected(){return this._status===C.REJECTED}isFulfilled(){return this._status!==C.PENDING}abort(){this._resolver.reject(u.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var e=
u.createResolver(),t=[...this._resolvingPromises,e.promise],B=this._allPromise=Promise.all(t);B.then(()=>{this.isFulfilled()||this._allPromise!==B||this._resolver.resolve()},z=>{this.isFulfilled()||this._allPromise!==B||u.isAbortError(z)||this._resolver.reject(z)});e.resolve()}}}const n=e=>{e=class extends e{constructor(...t){super(...t);this._promiseProps=new f;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(t,
B){return this._promiseProps.promise.then(()=>this).then(t,B)}catch(t){return this.when(null,t)}addResolvingPromise(t){t&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in t?t.when():t)}};return e=g.__decorate([H.subclass("esri.core.Promise")],e)};d.EsriPromise=class extends n(x){};d.EsriPromise=g.__decorate([H.subclass("esri.core.Promise")],d.EsriPromise);d.EsriPromiseMixin=n;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(d,g,x,u){async function H(C,f){const n=[],e=(...B)=>{for(const z of B)null!=z&&(Array.isArray(z)?e(...z):x.isCollection(z)?z.forEach(L=>e(L)):u.isLoadable(z)&&n.push(z))};f(e);let t=null;await g.map(n,async B=>{B=await g.result("loadAll"in B&&"function"===typeof B.loadAll?B.loadAll():B.load());!1!==B.ok||t||(t=B)});if(t)throw t.error;return C}d.loadAll=async function(C,f){await C.load();return H(C,f)};d.loadAllChildren=H;Object.defineProperty(d,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B,z,L,r,q,a,m,p,G,R,b,D,Q,I){function T(w){const M=u.id;return()=>{const K=w.deref();K&&M.findCredential(K.restUrl)&&K.signIn().catch(()=>{})}}const S=w=>Object.freeze(Object.defineProperty({__proto__:null,default:w},Symbol.toStringTag,{value:"Module"}));var P;let l;const A={PortalGroup:()=>Promise.resolve({default:R}),PortalItem:()=>new Promise((w,M)=>d(["./PortalItem"],K=>w(S(K)),M)),PortalUser:()=>Promise.resolve({default:Q})};f=P=class extends f.JSONSupportMixin(n){constructor(w){super(w);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=
this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=x.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(w){return"string"===typeof w?{url:w}:w}destroy(){v.unregister(this);
this.defaultBasemap=e.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=e.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=e.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=e.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(w){if(w)for(const M of w)x.request.trustedServers.includes(M)||x.request.trustedServers.push(M);return w}readDefaultBasemap(w){return this._readBasemap(w)}readDefaultDevBasemap(w){return this._readBasemap(w)}readDefaultVectorBasemap(w){return this._readBasemap(w)}get extraQuery(){const w=
!this.user?.orgId||this.canSearchPublic;return this.id&&!w?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let w=this.url;if(w){const M=w.indexOf("/sharing");w=0<M?w.substring(0,M):this.url.replace(/\/+$/,"");w+="/sharing/rest"}return w}get thumbnailUrl(){const w=this.restUrl,M=this.thumbnail;return w&&M?this._normalizeSSL(w+"/portals/self/resources/"+M):null}readUrlKey(w){return w?w.toLowerCase():
w}readUser(w){let M=null;w&&(M=Q.fromJSON(w),M.portal=this);return M}load(w){const M=(new Promise((K,U)=>d(["../Basemap"],Y=>K(S(Y)),U))).then(({default:K})=>{t.throwIfAborted(w);l=K}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,w)).then(K=>{if(u.id){const U=u.id;this.credential=U.findCredential(this.restUrl);this.credential||this.authMode!==P.AUTH_MODE_AUTO&&this.authMode!==P.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
U.on("credential-create",T(new WeakRef(this))),v.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=K;this.read(K)});this.addResolvingPromise(M);return Promise.resolve(this)}async createElevationLayers(){await this.load();const w=this._getHelperService("defaultElevationLayers"),M=(await new Promise((K,U)=>d(["../layers/ElevationLayer"],Y=>K(S(Y)),U))).default;return w?w.map(K=>new M({id:K.id,url:K.url})):[]}async fetchBasemaps(w,M){const K=await this._fetchBasemaps(w,M);!0===
M?.include3d&&!1!==this.use3dBasemaps&&(w=await this._fetchBasemaps3D(w,M),K.unshift(...w));return K}fetchCategorySchema(w){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",w).then(M=>M.categorySchema):t.isAborted(w)?Promise.reject(t.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(w){const M=this.featuredGroups,K=new b;K.num=100;K.sortField="title";if(M&&M.length){const U=[];for(const Y of M)U.push(`(title:"${Y.title}" AND owner:${Y.owner})`);K.query=
U.join(" OR ");return this.queryGroups(K,w).then(Y=>Y.results)}return t.isAborted(w)?Promise.reject(t.createAbortError()):Promise.resolve([])}fetchRegions(w){const M=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/regions",{...w,query:{culture:M}})}fetchSettings(w){const M=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...w,query:{culture:M}})}static getDefault(){return G.ensureDefaultPortalInstance(()=>
new P)}queryGroups(w,M){return this.queryPortal("/community/groups",w,"PortalGroup",M)}queryItems(w,M){return this.queryPortal("/search",w,"PortalItem",M)}queryUsers(w,M){w.sortField||(w.sortField="username");return this.queryPortal("/community/users",w,"PortalUser",M)}fetchSelf(w=this.authMode,M=!1,K){const U=this.restUrl+"/portals/self";w={authMode:w,query:{culture:p.getLocale().toLowerCase()},withCredentials:!0,...K};"auto"===w.authMode&&(w.authMode="no-prompt");M&&(w.query.default=!0);return this.request(U,
w)}queryPortal(w,M,K,U){const Y=z.ensureType(b,M),ea=la=>this.request(this.restUrl+w,{...Y.toRequestOptions(this),...U}).then(na=>{const sa=Y.clone();sa.start=na.nextStart;return new D({nextQueryParams:sa,queryParams:Y,total:na.total,results:P._resultsToTypedArray(la,{portal:this},na,U)})}).then(na=>Promise.all(na.results.map(sa=>"function"===typeof sa.when?sa.when():na)).then(()=>na,sa=>{t.throwIfAbortError(sa);return na}));return K&&A[K]?A[K]().then(({default:la})=>{t.throwIfAborted(U);return ea(la)}):
ea()}signIn(){if(this.authMode===P.AUTH_MODE_ANONYMOUS||this.authMode===P.AUTH_MODE_NO_PROMPT&&!u.id)return Promise.reject(new C("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const w=M=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return M||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
M;return this.fetchSelf("immediate")});if(this.user&&this.credential===M)return null;this.credential=M;return this.fetchSelf("immediate")}).then(K=>{K&&(this.sourceJSON=K,this.read(K))});return u.id?u.id.getCredential(this.restUrl,{prompt:this.authMode!==P.AUTH_MODE_NO_PROMPT}).then(M=>w(M)):w(this.credential)}normalizeUrl(w){const M=this.credential?.token;return this._normalizeSSL(M?w+(w.includes("?")?"\x26":"?")+"token\x3d"+M:w)}requestToTypedArray(w,M,K){return this.request(w,M).then(U=>{const Y=
P._resultsToTypedArray(K,{portal:this},U);return Promise.all(Y.map(ea=>"function"===typeof ea.when?ea.when():U)).then(()=>Y,()=>Y)})}request(w,M={}){var K={f:"json",...M.query};const {authMode:U=this.authMode===P.AUTH_MODE_ANONYMOUS||this.authMode===P.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:Y=null,cacheBust:ea=!1,method:la="auto",responseType:na="json",signal:sa}=M;K={authMode:U,body:Y,cacheBust:ea,method:la,query:K,responseType:na,timeout:0,signal:sa};M.withCredentials&&(K.withCredentials=
!0);return H(this._normalizeSSL(w),K).then(ua=>ua.data)}toJSON(){throw new C("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(w){if(!w)return null;if(w.declaredClass)throw Error("JSON object is already hydrated");return new P({sourceJSON:w})}_getHelperService(w){const M=this.helperServices&&this.helperServices[w];if(!M)throw new C("portal:service-not-found",`The \`helperServices\` do not include an entry named "${w}"`);return M}async _fetchBasemaps(w,M){const K=
new b;K.query=w||(x.apiKey&&I.supportsApiKey(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);K.disableExtraQuery=!0;w=await this.queryGroups(K,M);if(!w.total)return[];w=w.results[0];K.num=100;K.query='type:"Web Map" -type:"Web Application"';K.sortField=w.sortField||"name";K.sortOrder=w.sortOrder||"desc";M=await w.queryItems(K,M);return M.total?M.results.filter(U=>"Web Map"===U.type).map(U=>new l({portalItem:U})):
[]}async _fetchBasemaps3D(w,M){w=w||this.basemapGalleryGroupQuery3D;if(!w)return[];w=new b({query:w,disableExtraQuery:!0});var K=await this.queryGroups(w,M);if(!K.total)return[];K=K.results[0];w.num=100;w.query='type:"Web Scene"';w.sortField=K.sortField||"name";w.sortOrder=K.sortOrder||"desc";M=await K.queryItems(w,M);return M.total?M.results.filter(U=>"Web Scene"===U.type).map(U=>new l({portalItem:U})):[]}_normalizeSSL(w){return w.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(w){return w?
(w=l.fromJSON(w),w.portalItem={portal:this},w):null}static _resultsToTypedArray(w,M,K,U){let Y=[];if(K){const ea=null!=U?U.signal:null;Y=K.listings||K.notifications||K.userInvitations||K.tags||K.items||K.groups||K.comments||K.provisions||K.results||K.relatedItems||K;if(w||M)Y=Y.map(la=>{la=Object.assign(w?w.fromJSON(la):la,M);"function"===typeof la.load&&la.load(ea);return la})}else Y=[];return Y}};f.AUTH_MODE_ANONYMOUS="anonymous";f.AUTH_MODE_AUTO="auto";f.AUTH_MODE_IMMEDIATE="immediate";f.AUTH_MODE_NO_PROMPT=
"no-prompt";g.__decorate([B.property()],f.prototype,"access",void 0);g.__decorate([B.property()],f.prototype,"allSSL",void 0);g.__decorate([B.property()],f.prototype,"authMode",void 0);g.__decorate([B.property()],f.prototype,"authorizedCrossOriginDomains",void 0);g.__decorate([q.reader("authorizedCrossOriginDomains")],f.prototype,"readAuthorizedCrossOriginDomains",null);g.__decorate([B.property()],f.prototype,"basemapGalleryGroupQuery",void 0);g.__decorate([B.property({json:{name:"3DBasemapGalleryGroupQuery"}})],
f.prototype,"basemapGalleryGroupQuery3D",void 0);g.__decorate([B.property()],f.prototype,"bingKey",void 0);g.__decorate([B.property()],f.prototype,"canListApps",void 0);g.__decorate([B.property()],f.prototype,"canListData",void 0);g.__decorate([B.property()],f.prototype,"canListPreProvisionedItems",void 0);g.__decorate([B.property()],f.prototype,"canProvisionDirectPurchase",void 0);g.__decorate([B.property()],f.prototype,"canSearchPublic",void 0);g.__decorate([B.property()],f.prototype,"canShareBingPublic",
void 0);g.__decorate([B.property()],f.prototype,"canSharePublic",void 0);g.__decorate([B.property()],f.prototype,"canSignInArcGIS",void 0);g.__decorate([B.property()],f.prototype,"canSignInIDP",void 0);g.__decorate([B.property()],f.prototype,"colorSetsGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"commentsEnabled",void 0);g.__decorate([B.property({type:Date})],f.prototype,"created",void 0);g.__decorate([B.property()],f.prototype,"credential",void 0);g.__decorate([B.property()],f.prototype,
"culture",void 0);g.__decorate([B.property()],f.prototype,"currentVersion",void 0);g.__decorate([B.property()],f.prototype,"customBaseUrl",void 0);g.__decorate([B.property()],f.prototype,"defaultBasemap",void 0);g.__decorate([q.reader("defaultBasemap")],f.prototype,"readDefaultBasemap",null);g.__decorate([B.property()],f.prototype,"defaultDevBasemap",void 0);g.__decorate([q.reader("defaultDevBasemap")],f.prototype,"readDefaultDevBasemap",null);g.__decorate([B.property({type:m})],f.prototype,"defaultExtent",
void 0);g.__decorate([B.property()],f.prototype,"defaultVectorBasemap",void 0);g.__decorate([q.reader("defaultVectorBasemap")],f.prototype,"readDefaultVectorBasemap",null);g.__decorate([B.property()],f.prototype,"description",void 0);g.__decorate([B.property()],f.prototype,"devBasemapGalleryGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"eueiEnabled",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"extraQuery",null);g.__decorate([B.property()],f.prototype,"featuredGroups",
void 0);g.__decorate([B.property()],f.prototype,"featuredItemsGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"galleryTemplatesGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"livingAtlasGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"hasCategorySchema",void 0);g.__decorate([B.property()],f.prototype,"helpBase",void 0);g.__decorate([B.property()],f.prototype,"helperServices",void 0);g.__decorate([B.property()],f.prototype,"helpMap",void 0);g.__decorate([B.property()],
f.prototype,"homePageFeaturedContent",void 0);g.__decorate([B.property()],f.prototype,"homePageFeaturedContentCount",void 0);g.__decorate([B.property()],f.prototype,"httpPort",void 0);g.__decorate([B.property()],f.prototype,"httpsPort",void 0);g.__decorate([B.property()],f.prototype,"id",void 0);g.__decorate([B.property()],f.prototype,"ipCntryCode",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"isOrganization",null);g.__decorate([B.property()],f.prototype,"isPortal",void 0);g.__decorate([B.property()],
f.prototype,"isReadOnly",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"itemPageUrl",null);g.__decorate([B.property()],f.prototype,"layerTemplatesGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"maxTokenExpirationMinutes",void 0);g.__decorate([B.property({type:Date})],f.prototype,"modified",void 0);g.__decorate([B.property()],f.prototype,"name",void 0);g.__decorate([B.property()],f.prototype,"portalHostname",void 0);g.__decorate([B.property()],f.prototype,"portalMode",void 0);
g.__decorate([B.property()],f.prototype,"portalProperties",void 0);g.__decorate([B.property()],f.prototype,"region",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"restUrl",null);g.__decorate([B.property()],f.prototype,"rotatorPanels",void 0);g.__decorate([B.property()],f.prototype,"showHomePageDescription",void 0);g.__decorate([B.property()],f.prototype,"sourceJSON",void 0);g.__decorate([B.property()],f.prototype,"staticImagesUrl",void 0);g.__decorate([B.property({json:{name:"2DStylesGroupQuery"}})],
f.prototype,"stylesGroupQuery2d",void 0);g.__decorate([B.property({json:{name:"stylesGroupQuery"}})],f.prototype,"stylesGroupQuery3d",void 0);g.__decorate([B.property()],f.prototype,"supportsHostedServices",void 0);g.__decorate([B.property()],f.prototype,"symbolSetsGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"templatesGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"thumbnail",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"thumbnailUrl",null);g.__decorate([B.property()],
f.prototype,"units",void 0);g.__decorate([B.property()],f.prototype,"url",void 0);g.__decorate([B.property()],f.prototype,"urlKey",void 0);g.__decorate([q.reader("urlKey")],f.prototype,"readUrlKey",null);g.__decorate([B.property()],f.prototype,"user",void 0);g.__decorate([q.reader("user")],f.prototype,"readUser",null);g.__decorate([B.property()],f.prototype,"use3dBasemaps",void 0);g.__decorate([B.property()],f.prototype,"useStandardizedQuery",void 0);g.__decorate([B.property()],f.prototype,"useVectorBasemaps",
void 0);g.__decorate([B.property()],f.prototype,"vectorBasemapGalleryGroupQuery",void 0);g=f=P=g.__decorate([a.subclass("esri.portal.Portal")],f);const v=new FinalizationRegistry(w=>{w.remove()});return g})},"esri/portal/portalDefault":function(){define(["exports"],function(d){let g;d.clearDefaultPortalInstance=function(){g=void 0};d.ensureDefaultPortalInstance=function(x){if(!g||g.destroyed)g=x();return g};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(d,g,x,u,H,C,f,n,e){var t;x=t=class extends x.JSONSupport{constructor(B){super(B);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const B=this.url,z=this.thumbnail;return B&&z&&this.portal?this.portal?.normalizeUrl(`${B}/info/${z}?f=json`):null}get url(){const B=this.portal?.restUrl;return B?B+"/community/groups/"+this.id:
null}fetchCategorySchema(B){return this.portal.request(this.url+"/categorySchema",B).then(z=>{z=z.categorySchema||[];return z.some(L=>"contentCategorySetsGroupQuery.LivingAtlas"===L.source)?this._fetchCategorySchemaSet("LivingAtlas",B):z})}fetchMembers(B){return this.portal.request(this.url+"/users",B)}getThumbnailUrl(B){let z=this.thumbnailUrl;z&&B&&(z+=`&w=${B}`);return z}toJSON(){throw new g("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(B){if(!B)return null;
if(B.declaredClass)throw Error("JSON object is already hydrated");const z=new t;z.sourceJSON=B;z.read(B);return z}queryItems(B,z){B=H.ensureType(e,B);const L=this.portal;if(5<parseFloat(L.currentVersion))return B=B||new e,L.queryPortal(`/content/groups/${this.id}/search`,B,"PortalItem",z);B=B?B.clone():new e;B.query="group:"+this.id+(B.query?" "+B.query:"");return L.queryItems(B,z)}_fetchCategorySchemaSet(B,z){const L=this.portal;return L.fetchSelf(L.authMode,!0,z).then(r=>{if(r=r.contentCategorySetsGroupQuery){const q=
new e;q.disableExtraQuery=!0;q.num=1;q.query=r;return L.queryGroups(q,z)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(r=>{if(r.total){r=r.results[0];const q=new e;q.num=1;q.query=`typekeywords:"${B}"`;return r.queryItems(q,z)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(r=>r.total?r.results[0].fetchData("json",z).then(q=>{q=q?.categorySchema;return q?.length?q:[]}):[])}};d.__decorate([u.property()],
x.prototype,"access",void 0);d.__decorate([u.property({type:Date})],x.prototype,"created",void 0);d.__decorate([u.property()],x.prototype,"description",void 0);d.__decorate([u.property()],x.prototype,"id",void 0);d.__decorate([u.property()],x.prototype,"isInvitationOnly",void 0);d.__decorate([u.property({type:Date})],x.prototype,"modified",void 0);d.__decorate([u.property()],x.prototype,"owner",void 0);d.__decorate([u.property()],x.prototype,"portal",void 0);d.__decorate([u.property()],x.prototype,
"snippet",void 0);d.__decorate([u.property()],x.prototype,"sortField",void 0);d.__decorate([u.property()],x.prototype,"sortOrder",void 0);d.__decorate([u.property()],x.prototype,"sourceJSON",void 0);d.__decorate([u.property()],x.prototype,"tags",void 0);d.__decorate([u.property()],x.prototype,"thumbnail",void 0);d.__decorate([u.property({readOnly:!0})],x.prototype,"thumbnailUrl",null);d.__decorate([u.property()],x.prototype,"title",void 0);d.__decorate([u.property({readOnly:!0})],x.prototype,"url",
null);return x=t=d.__decorate([n.subclass("esri.portal.PortalGroup")],x)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(d,g,x,u,H,C,f,n,e,t,B){var z;const L=new x.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});g=z=class extends g{constructor(r){super(r);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(r){"asc"!==r&&"desc"!==r||this._set("sortOrder",r)}clone(){return new z({categories:this.categories?u.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(r,q){let a=[];this.categories&&(a=this.categories.map(G=>Array.isArray(G)?JSON.stringify(G):G));let m="";if(this.extent){var p=B.project(this.extent,t.WGS84);null!=p&&(m=`${p.xmin},${p.ymin},${p.xmax},${p.ymax}`)}p=this.query;!this.disableExtraQuery&&r.extraQuery&&(p="("+p+")"+r.extraQuery);r={categories:a,bbox:m,q:p,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(r.sortField=this.sortField.split(",").map(G=>L.toJSON(G.trim())).join(","),r.sortOrder=this.sortOrder);return{query:{...q,...r}}}};d.__decorate([H.property()],g.prototype,"categories",void 0);d.__decorate([H.property()],g.prototype,"disableExtraQuery",void 0);d.__decorate([H.property({type:e})],g.prototype,"extent",void 0);d.__decorate([H.property()],g.prototype,"filter",void 0);d.__decorate([H.property()],g.prototype,"num",void 0);d.__decorate([H.property()],
g.prototype,"query",void 0);d.__decorate([H.property()],g.prototype,"sortField",void 0);d.__decorate([H.property()],g.prototype,"sortOrder",null);d.__decorate([H.property()],g.prototype,"start",void 0);return g=z=d.__decorate([n.subclass("esri.portal.PortalQueryParams")],g)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(d,g,x,u,H,C,f){g=class extends g{constructor(n){super(n);this.total=this.results=this.queryParams=this.nextQueryParams=null}};d.__decorate([x.property()],g.prototype,"nextQueryParams",void 0);d.__decorate([x.property()],g.prototype,"queryParams",void 0);d.__decorate([x.property()],g.prototype,"results",void 0);d.__decorate([x.property()],g.prototype,"total",void 0);return g=d.__decorate([f.subclass("esri.portal.PortalQueryResult")],g)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B){var z;u=z=class extends u.JSONSupport{constructor(...L){super(...L);this.userType=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const L=this.url,r=this.thumbnail;return L&&r?this.portal.normalizeUrl(`${L}/info/${r}?f=json`):null}get userContentUrl(){const L=this.portal?.restUrl;
return L?`${L}/content/users/${this.username}`:null}get url(){const L=this.portal?.restUrl;return L?`${L}/community/users/${this.username}`:null}addItem(L){const r=L&&L.item;var q=L?.data;L=L?.folder;const a={method:"post"};r&&(a.query=r.createPostQuery(),null!=q&&("string"===typeof q?a.query.text=q:"object"===typeof q&&(a.query.text=JSON.stringify(q))));q=this.userContentUrl;L&&(q+="/"+("string"===typeof L?L:L.id));return this.portal.request(q+"/addItem",a).then(m=>{r.id=m.id;r.portal=this.portal;
return r.loaded?r.reload():r.load()})}deleteItem(L){let r=this.userContentUrl;L.ownerFolder&&(r+="/"+L.ownerFolder);return this.portal.request(r+`/items/${L.id}/delete`,{method:"post"}).then(()=>{L.id=null;L.portal=null})}deleteItems(L){const r=this.userContentUrl+"/deleteItems";var q=L.map(a=>a.id);return q.length?(q={method:"post",query:{items:q.join(",")}},this.portal.request(r,q).then(()=>{L.forEach(a=>{a.id=null;a.portal=null})})):Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??
"",{query:{num:1}}).then(L=>L&&L.folders?L.folders.map(r=>{r=t.fromJSON(r);r.portal=this.portal;return r}):[])}fetchGroups(){return this.portal.request(this.url??"").then(L=>L&&L.groups?L.groups.map(r=>{r=B.fromJSON(r);r.portal=this.portal;return r}):[])}fetchItems(L){const r=L??{};let q=this.userContentUrl??"";r.folder&&(q+="/"+r.folder.id);let a;return(new Promise((m,p)=>d(["./PortalItem"],G=>m(Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}))),
p))).then(({default:m})=>{a=m;return this.portal.request(q,{query:{folders:!1,num:r.num||10,start:r.start||1,sortField:r.sortField||"created",sortOrder:r.sortOrder||"asc"}})}).then(m=>{let p;return m?.items?(p=m.items.map(G=>{G=a.fromJSON(G);G.portal=this.portal;return G}),Promise.all(p.map(G=>G.load())).catch(G=>G).then(()=>({items:p,nextStart:m.nextStart,total:m.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(L=>L.tags)}getThumbnailUrl(L){let r=
this.thumbnailUrl;r&&L&&(r+=`&w=${L}`);return r}queryFavorites(L){return this.favGroupId?(this._favGroup||(this._favGroup=new B({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(L)):Promise.reject(new x("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new x("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(L){if(!L)return null;if(L.declaredClass)throw Error("JSON object is already hydrated");
const r=new z;r.sourceJSON=L;r.read(L);return r}};g.__decorate([H.property()],u.prototype,"access",void 0);g.__decorate([H.property({type:Date})],u.prototype,"created",void 0);g.__decorate([H.property()],u.prototype,"culture",void 0);g.__decorate([H.property()],u.prototype,"description",void 0);g.__decorate([H.property()],u.prototype,"email",void 0);g.__decorate([H.property()],u.prototype,"favGroupId",void 0);g.__decorate([H.property()],u.prototype,"fullName",void 0);g.__decorate([H.property({type:Date})],
u.prototype,"modified",void 0);g.__decorate([H.property()],u.prototype,"orgId",void 0);g.__decorate([H.property()],u.prototype,"portal",void 0);g.__decorate([H.property()],u.prototype,"preferredView",void 0);g.__decorate([H.property()],u.prototype,"privileges",void 0);g.__decorate([H.property()],u.prototype,"region",void 0);g.__decorate([H.property()],u.prototype,"role",void 0);g.__decorate([H.property()],u.prototype,"roleId",void 0);g.__decorate([H.property()],u.prototype,"sourceJSON",void 0);g.__decorate([H.property()],
u.prototype,"thumbnail",void 0);g.__decorate([H.property({readOnly:!0})],u.prototype,"thumbnailUrl",null);g.__decorate([H.property()],u.prototype,"units",void 0);g.__decorate([H.property({readOnly:!0})],u.prototype,"userContentUrl",null);g.__decorate([H.property({readOnly:!0})],u.prototype,"url",null);g.__decorate([H.property()],u.prototype,"username",void 0);g.__decorate([H.property()],u.prototype,"userType",void 0);return u=z=g.__decorate([e.subclass("esri.portal.PortalUser")],u)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(d,g,x,u,H,C,f,n){x=class extends x.JSONSupport{constructor(e){super(e);this.username=this.title=this.portal=this.id=this.created=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new g("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};d.__decorate([u.property({type:Date})],x.prototype,"created",void 0);d.__decorate([u.property()],x.prototype,"id",void 0);d.__decorate([u.property()],x.prototype,
"portal",void 0);d.__decorate([u.property()],x.prototype,"title",void 0);d.__decorate([u.property({readOnly:!0})],x.prototype,"url",null);d.__decorate([u.property()],x.prototype,"username",void 0);return x=d.__decorate([n.subclass("esri.portal.PortalFolder")],x)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B,z,L,r,q,a,m){var p;const G=new Set("Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;GeoJson;CSV;KML;WFS;WMTS;WMS;Feed".split(";")),R=new Set(["KML","GeoJson","CSV"]);H=p=class extends H.JSONSupportMixin(f){static from(b){return t.ensureClass(p,b)}constructor(b){super(b);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=this.avgRating=this.applicationProxies=
this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const b=this.type,D=this.typeKeywords||[];let Q=b;"Feature Service"===b||"Feature Collection"===
b?Q=D.includes("Table")?"Table":D.includes("Route Layer")?"Route Layer":D.includes("Markup")?"Markup":"Feature Layer":"Image Service"===b?Q=D.includes("Elevation 3D Layer")?"Elevation Layer":D.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===b?Q="Scene Layer":"Video Service"===b?Q="Video Layer":"Scene Package"===b?Q="Scene Layer Package":"Stream Service"===b?Q="Feature Layer":"Geoprocessing Service"===b?Q=D.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===
b?Q="GeoEnrichment Service":"Geocoding Service"===b?Q="Locator":"Microsoft Powerpoint"===b?Q="Microsoft PowerPoint":"GeoJson"===b?Q="GeoJSON":"Globe Service"===b?Q="Globe Layer":"Vector Tile Service"===b?Q="Tile Layer":"netCDF"===b?Q="NetCDF":"Map Service"===b?Q=D.includes("Spatiotemporal")||!D.includes("Hosted Service")&&!D.includes("Tiled")||D.includes("Relational")?"Map Image Layer":"Tile Layer":b&&b.toLowerCase().includes("add in")?Q=b.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===
b?Q="Big Data File Share":"Compact Tile Package"===b?Q="Tile Package (tpkx)":"Raster function template"===b?Q="Raster Function Template":"OGCFeatureServer"===b?Q="OGC Feature Layer":"web mapping application"===b&&D.includes("configurableApp")?Q="Instant App":"Insights Page"===b?Q="Insights Report":"Excalibur Imagery Project"===b&&(Q="Excalibur Project");return Q}readExtent(b){return b&&b.length?new L(b[0][0],b[0][1],b[1][0],b[1][1]):null}get iconUrl(){var b=this.type?.toLowerCase()||"";const D=this.typeKeywords||
[];var Q=!1,I=!1;let T=!1,S=!1,P=!1,l=!1;Q=I=!1;0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(Q=D.includes("Hosted Service"),"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(I=D.includes("Table"),T=D.includes("Route Layer"),S=D.includes("Markup"),P=D.includes("Spatiotemporal"),l=D.includes("UtilityNetwork"),b=P&&I?"spatiotemporaltable":I?"table":T?"routelayer":S?"markup":P?"spatiotemporal":l?"utilitynetwork":Q?"featureshosted":
"features"):"map service"===b||"wms"===b||"wmts"===b?(P=D.includes("Spatiotemporal"),I=D.includes("Relational"),b=P||I?"mapimages":Q||D.includes("Tiled")||"wmts"===b?"maptiles":"mapimages"):b="scene service"===b?D.includes("Line")?"sceneweblayerline":D.includes("3DObject")?"sceneweblayermultipatch":D.includes("Point")?"sceneweblayerpoint":D.includes("IntegratedMesh")?"sceneweblayermesh":D.includes("PointCloud")?"sceneweblayerpointcloud":D.includes("Polygon")?"sceneweblayerpolygon":D.includes("Building")?
"sceneweblayerbuilding":D.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===b?D.includes("Elevation 3D Layer")?"elevationlayer":D.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"video service"===b?D.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===b?D.includes("Web Tool")?
"tool":"layers":"geodata service"===b?"geodataservice":"3dtiles service"===b?D.includes("3DObject")?"3dobjecttileslayer":D.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):b="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?D.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===b&&D.includes("configurableApp")?"instantapps":"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===
b||"desktop application"===b?"apps":"map document"===b||"map package"===b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&D.includes("ArcGIS Pro")||"explorer map"===b&&D.indexOf("Explorer Document")?"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"netcdf"===b||"administrative report"===
b?"datafiles":"360 vr experience"===b?"360vr":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"sqlite geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===b||"gml"===b||"arcpad package"===b||"code sample"===b||"document link"===
b||"earth configuration"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"explorer map"===b&&D.includes("Explorer Mapping Application")||D.includes("Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===
b?"layersgray":"scene package"===b?"scenepackage":"3dtiles package"===b?"3dtileslayerpackage":"3dtiles service"===b?"3dtileslayer":"mobile scene package"===b?"mobilescenepackage":"tile package"===b||"compact tile package"===b?"tilepackage":"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"insights theme"===b?"insightstheme":
"hub initiative"===b?"hubinitiative":"hub page"===b?"hubpage":"hub site application"===b?"hubsite":"hub event"===b?"hubevent":"hub project"===b?"hubproject":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"desktop style"===b?"desktopstyle":"style"===b?"style":"dashboard"===b?"dashboard":"raster function template"===b?"rasterprocessingtemplate":"vector tile package"===b?"vectortilepackage":
"ortho mapping project"===b?"orthomappingproject":"ortho mapping template"===b?"orthomappingtemplate":"solution"===b?"solutions":"geopackage"===b?"geopackage":"deep learning package"===b?"deeplearningpackage":"real time analytic"===b?"realtimeanalytics":"big data analytic"===b?"bigdataanalytics":"feed"===b?"feed":"excalibur imagery project"===b?"excaliburimageryproject":"notebook"===b?"notebook":"storymap"===b?"storymap":"survey123 add in"===b?"survey123addin":"mission"===b?"mission":"mission report"===
b?"missionreport":"mission template"===b?"missiontemplate":"quickcapture project"===b?"quickcaptureproject":"pro report"===b?"proreport":"pro report template"===b?"proreporttemplate":"urban model"===b?"urbanmodel":"web experience"===b?"experiencebuilder":"web experience template"===b?"webexperiencetemplate":"experience builder widget"===b?"experiencebuilderwidget":"experience builder widget package"===b?"experiencebuilderwidgetpackage":"workflow"===b?"workflow":"kernel gateway connection"===b?"kernelgatewayconnection":
"insights script"===b?"insightsscript":"hub initiative template"===b?"hubinitiativetemplate":"storymap theme"===b?"storymaptheme":"knowledge graph"===b?"knowledgegraph":"knowledge studio project"===b?"knowledgestudio":"native application"===b?"nativeapp":"native application installer"===b?"nativeappinstaller":"link chart"===b?"linkchart":"investigation"===b?"investigation":"ogcfeatureserver"===b?"features":"pro project"===b?"proproject":"insights workbook package"===b?"insightsworkbookpackage":"apache parquet"===
b?"apacheparquet":"notebook code snippets"===b||"notebook code snippet library"===b?"notebookcodesnippets":"suitability model"===b?"suitabilitymodel":"esri classifier definition"===b?"classifierdefinition":"esri classification schema"===b?"classificationschema":"insights data engineering workbook"===b?"dataengineeringworkbook":"insights data engineering model"===b?"dataengineeringmodel":"deep learning studio project"===b?"deeplearningproject":"discussion"===b?"discussion":"allsource project"===b?
"allsourceproject":"api key"===b?"apikey":"data pipeline"===b?"datapipelines":"group layer"===b?(Q=D.includes("Map"))?"layergroup2d":"layergroup":"media layer"===b?"onlinemedialayer":"form"===b?D.includes("Survey123")?"survey":"datafilesgray":"maps";return b?x.getAssetUrl("esri/images/portal/"+b+"16.png"):null}get isLayer(){return null!=this.type&&G.has(this.type)}get itemCdnUrl(){return m.toCDNUrl(this.itemUrl)}get itemPageUrl(){const b=this.portal?.itemPageUrl;return b&&this.id?`${b}?id=${this.id}`:
null}get itemUrl(){const b=this.portal?.restUrl;return b&&this.id?`${b}/content/items/${this.id}`:null}get thumbnailUrl(){const b=this.itemUrl,D=this.thumbnail;return b&&D?this.portal?.normalizeUrl(`${b}/info/${D}?f=json`)??null:null}get userItemUrl(){const b=this.portal?.restUrl;if(!b)return null;const D=this.owner||this.portal?.user?.username;return D?`${b}/content/users/${this.ownerFolder?`${D}/${this.ownerFolder}`:D}/items/${this.id}`:null}load(b){const D=this.portal??(this.portal=r.getDefault()),
Q=D.load(b).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?D.request(this.itemUrl,{signal:null!=b?b.signal:null,query:{token:this.apiKey}}):{}).then(I=>{this.sourceJSON=I;this.read(I)});this.addResolvingPromise(Q);return Promise.resolve(this)}async addRating(b){const D={method:"post",query:{}};b instanceof a&&(b=b.rating);null==b||isNaN(b)||"number"!==typeof b||(D.query.rating=b);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",D);return new a({rating:b,
created:new Date})}clone(){var b={access:this.access,accessInformation:this.accessInformation,applicationProxies:C.clone(this.applicationProxies),avgRating:this.avgRating,categories:C.clone(this.categories),created:C.clone(this.created),culture:this.culture,description:this.description,extent:C.clone(this.extent),groupCategories:C.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C.clone(this.modified),name:this.name,numComments:this.numComments,
numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};this.loaded&&(b.loadStatus="loaded");b=(new p({sourceJSON:this.sourceJSON})).set(b);b._set("isOrgItem",this.isOrgItem);
return b}createPostQuery(){const b=this.toJSON();for(var D of["tags","typeKeywords","categories"])b[D]=b[D]?.join(", ");({extent:D}=b);D&&(b.extent=JSON.stringify(D));return b}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(b="json",D){return this.portal.request(this.itemUrl+"/data",{responseType:b,...D,query:{token:this.apiKey}})}async fetchRating(b){b=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...b});return null!=
b.rating?(b.created=new Date(b.created),new a(b)):null}fetchRelatedItems(b,D){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...b,token:this.apiKey},...D},p)}getThumbnailUrl(b){let D=this.thumbnailUrl;D&&b&&(D+=`&w=${b}`);return D}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(b=>{this.sourceJSON=b;this.read(b);return this})}update(b){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const D=b?.data,
Q={method:"post"};Q.query=this.createPostQuery();for(const I in Q.query)null===Q.query[I]&&(Q.query[I]="");Q.query.clearEmptyFields=!0;null!=D&&("string"===typeof D?Q.query.text=D:"object"===typeof D&&(Q.query.text=JSON.stringify(D)));return this.portal.request(`${this.userItemUrl}/update`,Q).then(()=>this.reload())}):Promise.reject(new u("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(b){if(!this.id)throw new u("portal:item-does-not-exist","The item does not exist yet");
await this.load();const {portal:D,itemUrl:Q}=this;await D.signIn();const {copyResources:I,folder:T,tags:S,title:P}=b||{};b={method:"post",query:{copyPrivateResources:"all"===I,folder:"string"===typeof T?T:T?.id,includeResources:!!I,tags:S?.join(","),title:P}};({itemId:b}=await D.request(`${Q}/copy`,b));return new p({id:b,portal:D})}updateThumbnail(b){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const D=b.thumbnail,Q=b.filename,I={method:"post"};if("string"===typeof D)n.isDataProtocol(D)?
I.query={data:D}:I.query={url:n.makeAbsolute(D)},null!=Q&&(I.query.filename=Q);else{const T=new FormData;null!=Q?T.append("file",D,Q):T.append("file",D);I.body=T}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,I).then(()=>this.reload())}):Promise.reject(new u("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(b={},D){const {fetchResources:Q}=await new Promise((I,T)=>d(["./support/resourceUtils"],I,T));return Q(this,b,D)}async addResource(b,
D,Q){const {addOrUpdateResources:I}=await new Promise((T,S)=>d(["./support/resourceUtils"],T,S));b.portalItem=this;await I(this,[{resource:b,content:D,compress:Q?.compress,access:Q?.access}],"add",Q);return b}async removeResource(b,D){const {removeResource:Q}=await new Promise((I,T)=>d(["./support/resourceUtils"],I,T));if(b.portalItem&&b.portalItem.itemUrl!==this.itemUrl)throw new u("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");
return Q(this,b,D)}async removeAllResources(b){const {removeAllResources:D}=await new Promise((Q,I)=>d(["./support/resourceUtils"],Q,I));return D(this,b)}resourceFromPath(b){return new q({portalItem:this,path:b})}toJSON(){var b=this.extent;b={accessInformation:this.accessInformation,categories:C.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:b&&[[b.xmin,b.ymin],[b.xmax,b.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};return C.fixJson(b)}static fromJSON(b){if(!b)return null;if(b.declaredClass)throw Error("JSON object is already hydrated");return new p({sourceJSON:b})}_getPostQuery(){const b=this.toJSON();for(const D in b)"tags"===D&&null!==
b[D]&&(b[D]=b[D].join(", ")),"typeKeywords"===D&&null!==b[D]&&(b[D]=b[D].join(", ")),"extent"===D&&b[D]&&(b[D]=JSON.stringify(b[D]));return b}};g.__decorate([e.property({type:["private","shared","org","public"]})],H.prototype,"access",void 0);g.__decorate([e.property()],H.prototype,"accessInformation",void 0);g.__decorate([e.property({type:String})],H.prototype,"apiKey",void 0);g.__decorate([e.property({json:{read:{source:"appProxies"}}})],H.prototype,"applicationProxies",void 0);g.__decorate([e.property()],
H.prototype,"avgRating",void 0);g.__decorate([e.property()],H.prototype,"categories",void 0);g.__decorate([e.property({type:Date})],H.prototype,"created",void 0);g.__decorate([e.property()],H.prototype,"culture",void 0);g.__decorate([e.property()],H.prototype,"description",void 0);g.__decorate([e.property({readOnly:!0})],H.prototype,"displayName",null);g.__decorate([e.property({type:L})],H.prototype,"extent",void 0);g.__decorate([B.reader("extent")],H.prototype,"readExtent",null);g.__decorate([e.property()],
H.prototype,"groupCategories",void 0);g.__decorate([e.property({readOnly:!0})],H.prototype,"iconUrl",null);g.__decorate([e.property()],H.prototype,"id",void 0);g.__decorate([e.property({readOnly:!0})],H.prototype,"isLayer",null);g.__decorate([e.property({type:Boolean,readOnly:!0})],H.prototype,"isOrgItem",void 0);g.__decorate([e.property()],H.prototype,"itemControl",void 0);g.__decorate([e.property({readOnly:!0})],H.prototype,"itemPageUrl",null);g.__decorate([e.property({readOnly:!0})],H.prototype,
"itemUrl",null);g.__decorate([e.property()],H.prototype,"licenseInfo",void 0);g.__decorate([e.property({type:Date})],H.prototype,"modified",void 0);g.__decorate([e.property()],H.prototype,"name",void 0);g.__decorate([e.property()],H.prototype,"numComments",void 0);g.__decorate([e.property()],H.prototype,"numRatings",void 0);g.__decorate([e.property()],H.prototype,"numViews",void 0);g.__decorate([e.property()],H.prototype,"owner",void 0);g.__decorate([e.property()],H.prototype,"ownerFolder",void 0);
g.__decorate([e.property({type:r})],H.prototype,"portal",void 0);g.__decorate([e.property()],H.prototype,"screenshots",void 0);g.__decorate([e.property()],H.prototype,"size",void 0);g.__decorate([e.property()],H.prototype,"snippet",void 0);g.__decorate([e.property()],H.prototype,"sourceJSON",void 0);g.__decorate([e.property({type:String})],H.prototype,"sourceUrl",void 0);g.__decorate([e.property({type:String})],H.prototype,"spatialReference",void 0);g.__decorate([e.property()],H.prototype,"tags",
void 0);g.__decorate([e.property()],H.prototype,"thumbnail",void 0);g.__decorate([e.property({readOnly:!0})],H.prototype,"thumbnailUrl",null);g.__decorate([e.property()],H.prototype,"title",void 0);g.__decorate([e.property()],H.prototype,"type",void 0);g.__decorate([e.property()],H.prototype,"typeKeywords",void 0);g.__decorate([e.property({type:String,json:{read(b,D){R.has(D.type)&&(D=this.portal?.restUrl,b||=D&&this.id?`${D}/content/items/${this.id}/data`:null);return b}}})],H.prototype,"url",void 0);
g.__decorate([e.property({readOnly:!0})],H.prototype,"userItemUrl",null);return H=p=g.__decorate([z.subclass("esri.portal.PortalItem")],H)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(d,g,x,u,H,C,f,n,e,t,B){x=class extends x{constructor(z){super(z);
this.portalItem=null}normalizeCtorArgs(z){return z?.portalItem&&z.path?{...z,path:this._normalizePath(z.path,z.portalItem)}:z}set path(z){null!=z&&C.isAbsolute(z)?H.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",z)}_castPath(z){return this._normalizePath(z,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:
null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(z="json",L){const r=this.cdnUrl;if(null==r)throw new u("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:z,query:{token:this.portalItem.apiKey},signal:L?.signal})}async update(z,L){const {addOrUpdateResources:r}=await new Promise((q,a)=>d(["./support/resourceUtils"],q,a));await r(this.portalItem,[{resource:this,
content:z,compress:L?.compress,access:L?.access}],"update",L);return this}hasPath(){return null!=this.path}_normalizePath(z,L){if(null==z)return z;z=z.replace(/^\/+/,"");null!=L&&C.isAbsolute(z)&&(z=C.makeRelative(z,L.itemUrl));return z?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};g.__decorate([f.property()],x.prototype,"portalItem",void 0);g.__decorate([f.property({type:String,value:null})],x.prototype,"path",null);g.__decorate([n.cast("path")],x.prototype,"_castPath",null);g.__decorate([f.property({type:String,
readOnly:!0})],x.prototype,"url",null);g.__decorate([f.property({type:String,readOnly:!0})],x.prototype,"cdnUrl",null);g.__decorate([f.property({type:String,readOnly:!0})],x.prototype,"itemRelativeUrl",null);return x=g.__decorate([B.subclass("esri.portal.PortalItemResource")],x)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(d,g,x,u,H,C,f){g=class extends g{constructor(n){super(n);this.rating=this.created=null}};d.__decorate([x.property()],g.prototype,"created",void 0);d.__decorate([x.property()],g.prototype,"rating",void 0);return g=d.__decorate([f.subclass("esri.portal.PortalRating")],g)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils"],function(d,g,x){function u(m,p){var G=p?.url?.path;m&&G&&(m=x.makeAbsolute(m,G,{preserveProtocolRelative:!0}),p.portalItem&&
p.readResourcePaths&&(G=x.makeRelative(m,p.portalItem.itemUrl),null!=G&&q.test(G)&&p.readResourcePaths.push(p.portalItem.resourceFromPath(G).path)));return(m=B(m,p?.portal))&&r.test(m)?z(m):m}function H(m,p,G=d.MarkKeep.YES){m=m&&r.test(m)?L(m):m;if(null==m)return m;!x.isAbsolute(m)&&p?.blockedRelativeUrls&&p.blockedRelativeUrls.push(m);let R=x.makeAbsolute(m);if(p){var b=p.verifyItemRelativeUrls?.rootPath||p.url?.path;if(b){b=B(b,p.portal);const D=B(R,p.portal);R=x.makeRelative(D,b,b);null!=R&&R!==
D&&R!==m&&p.verifyItemRelativeUrls&&p.verifyItemRelativeUrls.writtenUrls.push(R)}}R=t(R,p?.portal);x.isAbsolute(R)&&(R=x.normalize(R));p?.resources&&p?.portalItem&&!x.isAbsolute(R)&&!x.isDataProtocol(R)&&G===d.MarkKeep.YES&&p.resources.toKeep.push({resource:p.portalItem.resourceFromPath(R),compress:!1});return R}function C(m,p,G){return u(m,G)}function f(m,p,G,R){m=H(m,R);void 0!==m&&(p[G]=m)}function n(m){return(m?.match(r)??null)?.[1]??null}function e(m){m=m?.match(r)??null;if(null==m)return null;
m=m[2];const p=m.lastIndexOf("/");if(-1===p){const {path:b,extension:D}=x.splitPathExtension(m);return{prefix:null,filename:b,extension:D}}const {path:G,extension:R}=x.splitPathExtension(m.slice(p+1));return{prefix:m.slice(0,p),filename:G,extension:R}}function t(m,p){return p&&!p.isPortal&&p.urlKey&&p.customBaseUrl?x.changeDomain(m,`${p.urlKey}.${p.customBaseUrl}`,p.portalHostname):m}function B(m,p){if(!p||p.isPortal||!p.urlKey||!p.customBaseUrl)return m;const G=`${p.urlKey}.${p.customBaseUrl}`,R=
x.getAppUrl();return x.hasSameOrigin(R,`${R.scheme}://${G}`)?x.changeDomain(m,p.portalHostname,G):x.changeDomain(m,G,p.portalHostname)}function z(m){if(!m)return m||null;m&&g.id&&!g.id.findCredential(m)&&(m=g.id._normalizeAGOLorgDomain(m),m=m.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),m=m.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),m=m.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return m}function L(m){if(!m)return m||null;
m=m.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");m=m.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(m=m.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&g.id&&!g.id.findCredential(m)&&(m=g.id._normalizeAGOLorgDomain(m));return m}const r=/\/items\/([^\/]+)\/resources\/(.*)/,q=/^\.\/resources\//;d.MarkKeep=void 0;(function(m){m[m.YES=0]="YES";m[m.NO=1]="NO"})(d.MarkKeep||(d.MarkKeep={}));const a=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return d.MarkKeep},ensureMainOnlineDomain:t,fromCDNUrl:L,fromJSON:u,itemIdFromResourceUrl:n,prefixAndFilenameFromResourceUrl:e,read:C,toCDNUrl:z,toJSON:H,write:f},Symbol.toStringTag,{value:"Module"}));d.ensureMainOnlineDomain=t;d.fromCDNUrl=L;d.fromJSON=u;d.itemIdFromResourceUrl=n;d.persistableUrlUtils=a;d.prefixAndFilenameFromResourceUrl=e;d.read=C;d.toCDNUrl=z;d.toJSON=H;d.write=f})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(d,
g,x){d.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",
url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,
opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};d.getBasemapTitle=async function(u){if(u){var H=u.includes("-vector")?u.slice(0,u.indexOf("-vector")):
u.includes("-3d")?u.slice(0,u.indexOf("-3d")):u,C=await x.fetchMessageBundle("esri/t9n/basemaps");return C[u]||C[H]}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(d,g,x,u,H,C,f,n){const e=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
g=class extends g{constructor(t){super(t);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var t=n.getLocale().toLowerCase();switch(t){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}t=n.getLanguage(t);return"pt"===t?"pt-BR":t&&e.has(t)?t:"global"}};
d.__decorate([x.property()],g.prototype,"id",void 0);d.__decorate([x.property()],g.prototype,"language",void 0);d.__decorate([x.property()],g.prototype,"places",void 0);d.__decorate([x.property()],g.prototype,"serviceUrl",void 0);d.__decorate([x.property()],g.prototype,"worldview",void 0);return g=d.__decorate([f.subclass("esri.support.BasemapStyle")],g)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(d,g,x,u,H,C){function f(t,B){"maxScale"in t&&(B.maxScale=H.numberToJSON(t.maxScale)??void 0);"minScale"in t&&(B.minScale=H.numberToJSON(t.minScale)??void 0)}const n=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),e=new Set("csv feature geo-rss geojson group imagery imagery-tile kml map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
d.disableRestrictedWriting=function(t){n.add(t);e.add(t)};d.enableRestrictedWriting=function(t){n.delete(t);e.delete(t)};d.getLayerJSON=function(t,B,z){if(!t.persistenceEnabled)return null;if(!("write"in t&&t.write))return z?.messages&&z.messages.push(new g("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(C.isFeatureCollectionLayer(t)&&!t.isTable)B=t.resourceInfo;else{if(z.restrictedWebMapWriting){var L="basemap"===z.layerContainerType?
n:"operational-layers"===z.layerContainerType?e:null;L=null!=L?L.has(t.type)&&!C.isFeatureCollectionLayer(t):!0}else L=!0;if(L)return B={},t.write(B,z)?B:null}if(null!=B){B=x.clone(B);if(z=B)C.isFeatureCollectionLayer(t)?(L=u.getDeepValue("featureCollection.layers",z)?.[0]?.layerDefinition)&&f(t,L):"group"!==t.type&&f(t,z);if(z&&(z.id=t.id,"blendMode"in t&&(z.blendMode=t.blendMode,"normal"===z.blendMode&&delete z.blendMode),z.opacity=H.numberToJSON(t.opacity)??void 0,z.title=t.title||"Layer",z.visibility=
t.visible,"legendEnabled"in t&&"wmts"!==t.type))if(C.isFeatureCollectionLayer(t)){if(z=z.featureCollection)z.showLegend=t.legendEnabled}else z.showLegend=t.legendEnabled}return B};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(d,g,x){function u(C){return"scene"===C?.type}function H(C){C=C?.type;return"imagery-tile"===C||"tile"===C||"open-street-map"===C||"vector-tile"===C||"web-tile"===
C||"wmts"===C}d.getEffectiveEditingEnabled=function(C){a:if("editingEnabled"in C)switch(C.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var f=!0;break a;default:f=!1}else f=!1;return f?"effectiveEditingEnabled"in C?C.effectiveEditingEnabled:C.editingEnabled:!1};d.getEffectiveLayerCapabilities=function(C){a:if("capabilities"in C)switch(C.type){case "catalog":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var f=
!0;break a;default:f=!1}else f=!1;return f?"effectiveCapabilities"in C?C.effectiveCapabilities:C.capabilities:null};d.getOwningPortalUrl=async function(C,f){var n=g.id?.findServerInfo(C);if(null!=n?.currentVersion)return n.owningSystemUrl||null;n=C.toLowerCase().indexOf("/rest/services");if(-1===n)return null;C=`${C.substring(0,n)}/rest/info`;({data:f}=await x(C,{query:{f:"json"},responseType:"json",signal:null!=f?f.signal:null}));return f?.owningSystemUrl||null};d.getTileMaxtrixSetFromActiveLayer=
function(C){if(C.activeLayer){const f=C.activeLayer.tileMatrixSet;if(f)return f;if(C=C.activeLayer.tileMatrixSets)return C}return null};d.isBaseLayer=function(C){return null!=C?.parent&&"declaredClass"in C.parent&&"esri.Basemap"===C.parent.declaredClass&&C.parent.baseLayers.includes(C)};d.isBasemap3DSupportedLayer=function(C){return H(C)||u(C)};d.isBasemapSupportedTiledLayer=H;d.isFeatureCollectionLayer=function(C){return"feature"===C?.type&&!C.url&&"memory"===C.source?.type};d.isFeatureLayer=function(C){return null!=
C&&"object"===typeof C&&"type"in C&&"feature"===C.type};d.isFeatureServiceLayer=function(C){return"feature"===C?.type&&"feature-layer"===C.source?.type};d.isGraphicsLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"graphics"===C.type};d.isGroupLayer=function(C){return null!=C&&"type"in C&&"group"===C.type};d.isImageryTileLayer=function(C){return"imagery-tile"===C?.type};d.isIntegratedMeshLayer=function(C){return"integrated-mesh"===C||"integrated-mesh-3dtiles"===C};d.isIntegratedMeshOperationalLayer=
function(C){return"IntegratedMeshLayer"===C||"IntegratedMesh3DTilesLayer"===C};d.isKnowledgeGraphLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"knowledge-graph"===C.type&&"layers"in C};d.isLayerWithFeatureLayerSource=function(C){return("feature"===C?.type||"subtype-group"===C?.type)&&"feature-layer"===C.source?.type};d.isLinkChartLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"link-chart"===C.type&&"layers"in C};d.isMapNotesLayer=function(C){return null!=C&&
"object"===typeof C&&"type"in C&&"map-notes"===C.type&&"sublayers"in C};d.isSceneLayer=u;d.isSceneServiceLayer=function(C){C=C?.type;return"building-scene"===C||"integrated-mesh"===C||"point-cloud"===C||"scene"===C};d.isSubtypeGroupLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"subtype-group"===C.type&&"sublayers"in C};d.isTable=function(C){return null!=C&&"object"===typeof C&&"isTable"in C&&!!C.isTable};d.isTiledLayer=function(C){C=C?.type;return"base-tile"===C||"tile"===C||
"elevation"===C||"imagery-tile"===C||"base-elevation"===C||"open-street-map"===C||"wcs"===C||"web-tile"===C||"wmts"===C||"vector-tile"===C};d.isVoxelLayer=function(C){return"voxel"===C?.type};d.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};d.serializeLayerDefinitions=function(C){const f=/[:;]/,n=[];let e=!1;if(C&&(C.forEach((t,B)=>{n.push([B,t]);!e&&f.test(t)&&(e=!0)}),0<
n.length)){if(e){const t={};n.forEach(B=>{t[B[0]]=B[1]});C=JSON.stringify(t)}else{const t=[];n.forEach(B=>{t.push(B[0]+":"+B[1])});C=t.join(";")}return C}return null};d.serializeTimeOptions=function(C){if(C){var f=[];C.forEach((n,e)=>{f.push('"'+e+'":'+JSON.stringify(n))});if(f.length)return"{"+f.join(",")+"}"}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(d,g){d.canInterpolateEffects=function(x,u){const H=
x.length>u.length?x:u;return(x.length>u.length?u:x).every((C,f)=>C.type===H[f].type)};d.effectEquals=function(x,u){x=JSON.stringify(x??null);u=JSON.stringify(u??null);return x===u};d.isEffectFunctions=function(x){return(x=x[0])?"type"in x:!1};d.normalizeEffects=function(x,u){const H=x.length>u.length?x:u;x=x.length>u.length?u:x;for(u=x.length;u<H.length;u++)x.push(g.createEffectWithInitialValues(H[u]))};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports",
"../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(d,g,x,u,H){function C(r,q,a){return r+(q-r)*a}function f(r){return Math.round(1E3*x.px2pt(r))/1E3}class n{constructor(r,q,a){this.strength=r;this.radius=q;this.threshold=a;this.type="bloom"}interpolate(r,q,a){this.strength=C(r.strength,q.strength,a);this.radius=C(r.radius,q.radius,a);this.threshold=C(r.threshold,q.threshold,a)}clone(){return new n(this.strength,this.radius,
this.threshold)}toJSON(){return{type:"bloom",radius:f(this.radius),strength:this.strength,threshold:this.threshold}}}class e{constructor(r){this.radius=r;this.type="blur"}interpolate(r,q,a){this.radius=Math.round(C(r.radius,q.radius,a))}clone(){return new e(this.radius)}toJSON(){return{type:"blur",radius:f(this.radius)}}}class t{constructor(r,q){this.type=r;this.amount=q;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||
this._updateMatrix();return this._colorMatrix}interpolate(r,q,a){this.amount=C(r.amount,q.amount,a);this._updateMatrix()}clone(){return new t(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const r=this._colorMatrix||u.create();switch(this.type){case "brightness":this._colorMatrix=H.brightness(r,this.amount);break;case "contrast":this._colorMatrix=H.contrast(r,this.amount);break;case "grayscale":this._colorMatrix=H.grayscale(r,this.amount);break;case "invert":this._colorMatrix=
H.invert(r,this.amount);break;case "saturate":this._colorMatrix=H.saturate(r,this.amount);break;case "sepia":this._colorMatrix=H.sepia(r,this.amount)}}}class B{constructor(r,q,a,m){this.offsetX=r;this.offsetY=q;this.blurRadius=a;this.color=m;this.type="drop-shadow"}interpolate(r,q,a){this.offsetX=C(r.offsetX,q.offsetX,a);this.offsetY=C(r.offsetY,q.offsetY,a);this.blurRadius=C(r.blurRadius,q.blurRadius,a);this.color[0]=Math.round(C(r.color[0],q.color[0],a));this.color[1]=Math.round(C(r.color[1],q.color[1],
a));this.color[2]=Math.round(C(r.color[2],q.color[2],a));this.color[3]=C(r.color[3],q.color[3],a)}clone(){return new B(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const r=[...this.color];r[3]*=255;return{type:"drop-shadow",xoffset:f(this.offsetX),yoffset:f(this.offsetY),blurRadius:f(this.blurRadius),color:r}}}class z{constructor(r){this.angle=r;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(r,q,a){this.angle=
C(r.angle,q.angle,a);this._updateMatrix()}clone(){return new z(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const r=this._colorMatrix||u.create();this._colorMatrix=H.rotateHue(r,this.angle)}}class L{constructor(r){this.amount=r;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(r,q,a){this.amount=C(r.amount,q.amount,a)}clone(){return new L(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}d.BloomEffect=n;d.BlurEffect=e;d.ColorMatrixEffect=
t;d.DropShadowEffect=B;d.HueRotateEffect=z;d.OpacityEffect=L;d.createEffectWithInitialValues=function(r){switch(r.type){case "grayscale":case "sepia":case "invert":return new t(r.type,0);case "saturate":case "brightness":case "contrast":return new t(r.type,1);case "opacity":return new L(1);case "hue-rotate":return new z(0);case "blur":return new e(0);case "drop-shadow":return new B(0,0,0,[...g.getNamedColor("transparent")]);case "bloom":return new n(0,0,1)}};Object.defineProperty(d,Symbol.toStringTag,
{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(d){function g(){const n=new Float32Array(16);n[0]=1;n[5]=1;n[10]=1;n[15]=1;return n}function x(n){const e=new Float32Array(16);e[0]=n[0];e[1]=n[1];e[2]=n[2];e[3]=n[3];e[4]=n[4];e[5]=n[5];e[6]=n[6];e[7]=n[7];e[8]=n[8];e[9]=n[9];e[10]=n[10];e[11]=n[11];e[12]=n[12];e[13]=n[13];e[14]=n[14];e[15]=n[15];return e}function u(n,e,t,B,z,L,r,q,a,m,p,G,R,b,D,Q){const I=new Float32Array(16);I[0]=n;I[1]=e;
I[2]=t;I[3]=B;I[4]=z;I[5]=L;I[6]=r;I[7]=q;I[8]=a;I[9]=m;I[10]=p;I[11]=G;I[12]=R;I[13]=b;I[14]=D;I[15]=Q;return I}function H(n,e){return new Float32Array(n,e,16)}const C=g(),f=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:C,clone:x,create:g,createView:H,fromValues:u},Symbol.toStringTag,{value:"Module"}));d.IDENTITY=C;d.clone=x;d.create=g;d.createView=H;d.fromValues=u;d.mat4f32=f;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports",
"../../core/libs/gl-matrix-2/math/mat4"],function(d,g){d.brightness=(x,u)=>{x=g.set(x,u,0,0,0,0,u,0,0,0,0,u,0,0,0,0,1);return g.transpose(x,x)};d.contrast=(x,u)=>{x=g.set(x,u,0,0,.5-.5*u,0,u,0,.5-.5*u,0,0,u,.5-.5*u,0,0,0,1);return g.transpose(x,x)};d.grayscale=(x,u)=>{u=1-u;x=g.set(x,.2126+.7874*u,.7152-.7152*u,.0722-.0722*u,0,.2126-.2126*u,.7152+.2848*u,.0722-.0722*u,0,.2126-.2126*u,.7152-.7152*u,.0722+.9278*u,0,0,0,0,1);return g.transpose(x,x)};d.invert=(x,u)=>{const H=1-2*u;x=g.set(x,H,0,0,u,0,
H,0,u,0,0,H,u,0,0,0,1);return g.transpose(x,x)};d.rotateHue=(x,u)=>{const H=Math.sin(u*Math.PI/180);u=Math.cos(u*Math.PI/180);x=g.set(x,.213+.787*u-.213*H,.715-.715*u-.715*H,.072-.072*u+.928*H,0,.213-.213*u+.143*H,.715+.285*u+.14*H,.072-.072*u-.283*H,0,.213-.213*u-.787*H,.715-.715*u+.715*H,.072+.928*u+.072*H,0,0,0,0,1);return g.transpose(x,x)};d.saturate=(x,u)=>{x=g.set(x,.213+.787*u,.715-.715*u,.072-.072*u,0,.213-.213*u,.715+.285*u,.072-.072*u,0,.213-.213*u,.715-.715*u,.072+.928*u,0,0,0,0,1);return g.transpose(x,
x)};d.sepia=(x,u)=>{u=1-u;x=g.set(x,.393+.607*u,.769-.769*u,.189-.189*u,0,.349-.349*u,.686+.314*u,.168-.168*u,0,.272-.272*u,.534-.534*u,.131+.869*u,0,0,0,0,1);return g.transpose(x,x)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(d,g,x){function u(h,F){h[0]=F[0];h[1]=F[1];h[2]=F[2];h[3]=F[3];h[4]=F[4];h[5]=F[5];h[6]=F[6];h[7]=F[7];h[8]=F[8];h[9]=F[9];h[10]=F[10];h[11]=
F[11];h[12]=F[12];h[13]=F[13];h[14]=F[14];h[15]=F[15];return h}function H(h,F,X,aa,ha,y,J,N,W,Z,ba,da,ia,ka,ra,oa,qa){h[0]=F;h[1]=X;h[2]=aa;h[3]=ha;h[4]=y;h[5]=J;h[6]=N;h[7]=W;h[8]=Z;h[9]=ba;h[10]=da;h[11]=ia;h[12]=ka;h[13]=ra;h[14]=oa;h[15]=qa;return h}function C(h){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function f(h,F){if(h===F){const X=F[1],aa=F[2],ha=F[3],y=F[6],J=F[7],N=F[11];h[1]=F[4];h[2]=F[8];h[3]=F[12];
h[4]=X;h[6]=F[9];h[7]=F[13];h[8]=aa;h[9]=y;h[11]=F[14];h[12]=ha;h[13]=J;h[14]=N}else h[0]=F[0],h[1]=F[4],h[2]=F[8],h[3]=F[12],h[4]=F[1],h[5]=F[5],h[6]=F[9],h[7]=F[13],h[8]=F[2],h[9]=F[6],h[10]=F[10],h[11]=F[14],h[12]=F[3],h[13]=F[7],h[14]=F[11],h[15]=F[15];return h}function n(h,F){e(h,F)||C(h);return h}function e(h,F){const X=F[0],aa=F[1],ha=F[2],y=F[3],J=F[4],N=F[5],W=F[6],Z=F[7],ba=F[8],da=F[9],ia=F[10],ka=F[11],ra=F[12],oa=F[13],qa=F[14];F=F[15];const Ca=X*N-aa*J,va=X*W-ha*J,Ba=X*Z-y*J,Aa=aa*W-
ha*N,ya=aa*Z-y*N,Ha=ha*Z-y*W,Pa=ba*oa-da*ra,Ya=ba*qa-ia*ra,Wa=ba*F-ka*ra,Ja=da*qa-ia*oa,Ka=da*F-ka*oa,ja=ia*F-ka*qa;let Qa=Ca*ja-va*Ka+Ba*Ja+Aa*Wa-ya*Ya+Ha*Pa;if(!Qa)return null;Qa=1/Qa;h[0]=(N*ja-W*Ka+Z*Ja)*Qa;h[1]=(ha*Ka-aa*ja-y*Ja)*Qa;h[2]=(oa*Ha-qa*ya+F*Aa)*Qa;h[3]=(ia*ya-da*Ha-ka*Aa)*Qa;h[4]=(W*Wa-J*ja-Z*Ya)*Qa;h[5]=(X*ja-ha*Wa+y*Ya)*Qa;h[6]=(qa*Ba-ra*Ha-F*va)*Qa;h[7]=(ba*Ha-ia*Ba+ka*va)*Qa;h[8]=(J*Ka-N*Wa+Z*Pa)*Qa;h[9]=(aa*Wa-X*Ka-y*Pa)*Qa;h[10]=(ra*ya-oa*Ba+F*Ca)*Qa;h[11]=(da*Ba-ba*ya-ka*Ca)*
Qa;h[12]=(N*Ya-J*Ja-W*Pa)*Qa;h[13]=(X*Ja-aa*Ya+ha*Pa)*Qa;h[14]=(oa*va-ra*Aa-qa*Ca)*Qa;h[15]=(ba*Aa-da*va+ia*Ca)*Qa;return h}function t(h,F){const X=F[0],aa=F[1],ha=F[2],y=F[3],J=F[4],N=F[5],W=F[6],Z=F[7],ba=F[8],da=F[9],ia=F[10],ka=F[11],ra=F[12],oa=F[13],qa=F[14];F=F[15];h[0]=N*(ia*F-ka*qa)-da*(W*F-Z*qa)+oa*(W*ka-Z*ia);h[1]=-(aa*(ia*F-ka*qa)-da*(ha*F-y*qa)+oa*(ha*ka-y*ia));h[2]=aa*(W*F-Z*qa)-N*(ha*F-y*qa)+oa*(ha*Z-y*W);h[3]=-(aa*(W*ka-Z*ia)-N*(ha*ka-y*ia)+da*(ha*Z-y*W));h[4]=-(J*(ia*F-ka*qa)-ba*
(W*F-Z*qa)+ra*(W*ka-Z*ia));h[5]=X*(ia*F-ka*qa)-ba*(ha*F-y*qa)+ra*(ha*ka-y*ia);h[6]=-(X*(W*F-Z*qa)-J*(ha*F-y*qa)+ra*(ha*Z-y*W));h[7]=X*(W*ka-Z*ia)-J*(ha*ka-y*ia)+ba*(ha*Z-y*W);h[8]=J*(da*F-ka*oa)-ba*(N*F-Z*oa)+ra*(N*ka-Z*da);h[9]=-(X*(da*F-ka*oa)-ba*(aa*F-y*oa)+ra*(aa*ka-y*da));h[10]=X*(N*F-Z*oa)-J*(aa*F-y*oa)+ra*(aa*Z-y*N);h[11]=-(X*(N*ka-Z*da)-J*(aa*ka-y*da)+ba*(aa*Z-y*N));h[12]=-(J*(da*qa-ia*oa)-ba*(N*qa-W*oa)+ra*(N*ia-W*da));h[13]=X*(da*qa-ia*oa)-ba*(aa*qa-ha*oa)+ra*(aa*ia-ha*da);h[14]=-(X*(N*
qa-W*oa)-J*(aa*qa-ha*oa)+ra*(aa*W-ha*N));h[15]=X*(N*ia-W*da)-J*(aa*ia-ha*da)+ba*(aa*W-ha*N);return h}function B(h){const F=h[0],X=h[1],aa=h[2],ha=h[3],y=h[4],J=h[5],N=h[6],W=h[7],Z=h[8],ba=h[9],da=h[10],ia=h[11],ka=h[12],ra=h[13],oa=h[14];h=h[15];return(F*J-X*y)*(da*h-ia*oa)-(F*N-aa*y)*(ba*h-ia*ra)+(F*W-ha*y)*(ba*oa-da*ra)+(X*N-aa*J)*(Z*h-ia*ka)-(X*W-ha*J)*(Z*oa-da*ka)+(aa*W-ha*N)*(Z*ra-ba*ka)}function z(h,F,X){const aa=F[0],ha=F[1],y=F[2],J=F[3],N=F[4],W=F[5],Z=F[6],ba=F[7],da=F[8],ia=F[9],ka=F[10],
ra=F[11],oa=F[12],qa=F[13],Ca=F[14];F=F[15];let va=X[0],Ba=X[1],Aa=X[2],ya=X[3];h[0]=va*aa+Ba*N+Aa*da+ya*oa;h[1]=va*ha+Ba*W+Aa*ia+ya*qa;h[2]=va*y+Ba*Z+Aa*ka+ya*Ca;h[3]=va*J+Ba*ba+Aa*ra+ya*F;va=X[4];Ba=X[5];Aa=X[6];ya=X[7];h[4]=va*aa+Ba*N+Aa*da+ya*oa;h[5]=va*ha+Ba*W+Aa*ia+ya*qa;h[6]=va*y+Ba*Z+Aa*ka+ya*Ca;h[7]=va*J+Ba*ba+Aa*ra+ya*F;va=X[8];Ba=X[9];Aa=X[10];ya=X[11];h[8]=va*aa+Ba*N+Aa*da+ya*oa;h[9]=va*ha+Ba*W+Aa*ia+ya*qa;h[10]=va*y+Ba*Z+Aa*ka+ya*Ca;h[11]=va*J+Ba*ba+Aa*ra+ya*F;va=X[12];Ba=X[13];Aa=X[14];
ya=X[15];h[12]=va*aa+Ba*N+Aa*da+ya*oa;h[13]=va*ha+Ba*W+Aa*ia+ya*qa;h[14]=va*y+Ba*Z+Aa*ka+ya*Ca;h[15]=va*J+Ba*ba+Aa*ra+ya*F;return h}function L(h,F,X){const aa=X[0],ha=X[1];X=X[2];if(F===h)h[12]=F[0]*aa+F[4]*ha+F[8]*X+F[12],h[13]=F[1]*aa+F[5]*ha+F[9]*X+F[13],h[14]=F[2]*aa+F[6]*ha+F[10]*X+F[14],h[15]=F[3]*aa+F[7]*ha+F[11]*X+F[15];else{const y=F[0],J=F[1],N=F[2],W=F[3],Z=F[4],ba=F[5],da=F[6],ia=F[7],ka=F[8],ra=F[9],oa=F[10],qa=F[11];h[0]=y;h[1]=J;h[2]=N;h[3]=W;h[4]=Z;h[5]=ba;h[6]=da;h[7]=ia;h[8]=ka;
h[9]=ra;h[10]=oa;h[11]=qa;h[12]=y*aa+Z*ha+ka*X+F[12];h[13]=J*aa+ba*ha+ra*X+F[13];h[14]=N*aa+da*ha+oa*X+F[14];h[15]=W*aa+ia*ha+qa*X+F[15]}return h}function r(h,F,X){const aa=X[0],ha=X[1];X=X[2];h[0]=F[0]*aa;h[1]=F[1]*aa;h[2]=F[2]*aa;h[3]=F[3]*aa;h[4]=F[4]*ha;h[5]=F[5]*ha;h[6]=F[6]*ha;h[7]=F[7]*ha;h[8]=F[8]*X;h[9]=F[9]*X;h[10]=F[10]*X;h[11]=F[11]*X;h[12]=F[12];h[13]=F[13];h[14]=F[14];h[15]=F[15];return h}function q(h,F,X,aa){let ha=aa[0],y=aa[1];aa=aa[2];let J=Math.sqrt(ha*ha+y*y+aa*aa);var N=void 0,
W=void 0;let Z=void 0,ba=void 0,da=void 0,ia=void 0,ka=void 0,ra=void 0,oa=void 0,qa=void 0,Ca=void 0,va=void 0,Ba=void 0,Aa=void 0,ya=void 0,Ha=void 0,Pa=void 0,Ya=void 0,Wa=void 0,Ja=void 0,Ka=void 0,ja=void 0;W=N=void 0;if(J<x.getEpsilon())return null;J=1/J;ha*=J;y*=J;aa*=J;N=Math.sin(X);W=Math.cos(X);Z=1-W;ba=F[0];da=F[1];ia=F[2];ka=F[3];ra=F[4];oa=F[5];qa=F[6];Ca=F[7];va=F[8];Ba=F[9];Aa=F[10];ya=F[11];Ha=ha*ha*Z+W;Pa=y*ha*Z+aa*N;Ya=aa*ha*Z-y*N;Wa=ha*y*Z-aa*N;Ja=y*y*Z+W;Ka=aa*y*Z+ha*N;ja=ha*aa*
Z+y*N;N=y*aa*Z-ha*N;W=aa*aa*Z+W;h[0]=ba*Ha+ra*Pa+va*Ya;h[1]=da*Ha+oa*Pa+Ba*Ya;h[2]=ia*Ha+qa*Pa+Aa*Ya;h[3]=ka*Ha+Ca*Pa+ya*Ya;h[4]=ba*Wa+ra*Ja+va*Ka;h[5]=da*Wa+oa*Ja+Ba*Ka;h[6]=ia*Wa+qa*Ja+Aa*Ka;h[7]=ka*Wa+Ca*Ja+ya*Ka;h[8]=ba*ja+ra*N+va*W;h[9]=da*ja+oa*N+Ba*W;h[10]=ia*ja+qa*N+Aa*W;h[11]=ka*ja+Ca*N+ya*W;F!==h&&(h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);return h}function a(h,F,X){const aa=Math.sin(X);X=Math.cos(X);const ha=F[4],y=F[5],J=F[6],N=F[7],W=F[8],Z=F[9],ba=F[10],da=F[11];F!==h&&(h[0]=
F[0],h[1]=F[1],h[2]=F[2],h[3]=F[3],h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);h[4]=ha*X+W*aa;h[5]=y*X+Z*aa;h[6]=J*X+ba*aa;h[7]=N*X+da*aa;h[8]=W*X-ha*aa;h[9]=Z*X-y*aa;h[10]=ba*X-J*aa;h[11]=da*X-N*aa;return h}function m(h,F,X){const aa=Math.sin(X);X=Math.cos(X);const ha=F[0],y=F[1],J=F[2],N=F[3],W=F[8],Z=F[9],ba=F[10],da=F[11];F!==h&&(h[4]=F[4],h[5]=F[5],h[6]=F[6],h[7]=F[7],h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);h[0]=ha*X-W*aa;h[1]=y*X-Z*aa;h[2]=J*X-ba*aa;h[3]=N*X-da*aa;h[8]=ha*aa+W*
X;h[9]=y*aa+Z*X;h[10]=J*aa+ba*X;h[11]=N*aa+da*X;return h}function p(h,F,X){const aa=Math.sin(X);X=Math.cos(X);const ha=F[0],y=F[1],J=F[2],N=F[3],W=F[4],Z=F[5],ba=F[6],da=F[7];F!==h&&(h[8]=F[8],h[9]=F[9],h[10]=F[10],h[11]=F[11],h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);h[0]=ha*X+W*aa;h[1]=y*X+Z*aa;h[2]=J*X+ba*aa;h[3]=N*X+da*aa;h[4]=W*X-ha*aa;h[5]=Z*X-y*aa;h[6]=ba*X-J*aa;h[7]=da*X-N*aa;return h}function G(h,F){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=
0;h[12]=F[0];h[13]=F[1];h[14]=F[2];h[15]=1;return h}function R(h,F){h[0]=F[0];h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=F[1];h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=F[2];h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function b(h,F,X){if(0===F)return C(h);let aa=X[0],ha=X[1];X=X[2];let y=Math.sqrt(aa*aa+ha*ha+X*X),J=void 0,N=void 0,W=void 0;if(y<x.getEpsilon())return null;y=1/y;aa*=y;ha*=y;X*=y;J=Math.sin(F);N=Math.cos(F);W=1-N;h[0]=aa*aa*W+N;h[1]=ha*aa*W+X*J;h[2]=X*aa*W-ha*J;h[3]=0;h[4]=aa*ha*W-X*J;h[5]=ha*ha*
W+N;h[6]=X*ha*W+aa*J;h[7]=0;h[8]=aa*X*W+ha*J;h[9]=ha*X*W-aa*J;h[10]=X*X*W+N;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function D(h,F){const X=Math.sin(F);F=Math.cos(F);h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=F;h[6]=X;h[7]=0;h[8]=0;h[9]=-X;h[10]=F;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function Q(h,F){const X=Math.sin(F);F=Math.cos(F);h[0]=F;h[1]=0;h[2]=-X;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=X;h[9]=0;h[10]=F;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function I(h,F){const X=
Math.sin(F);F=Math.cos(F);h[0]=F;h[1]=X;h[2]=0;h[3]=0;h[4]=-X;h[5]=F;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function T(h,F,X){var aa=F[0],ha=F[1],y=F[2],J=F[3],N=aa+aa,W=ha+ha;const Z=y+y;F=aa*N;const ba=aa*W;aa*=Z;const da=ha*W;ha*=Z;y*=Z;N*=J;W*=J;J*=Z;h[0]=1-(da+y);h[1]=ba+J;h[2]=aa-W;h[3]=0;h[4]=ba-J;h[5]=1-(F+y);h[6]=ha+N;h[7]=0;h[8]=aa+W;h[9]=ha-N;h[10]=1-(F+da);h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function S(h,F){const X=Va,
aa=-F[0],ha=-F[1],y=-F[2],J=F[3],N=F[4],W=F[5],Z=F[6],ba=F[7],da=aa*aa+ha*ha+y*y+J*J;0<da?(X[0]=2*(N*J+ba*aa+W*y-Z*ha)/da,X[1]=2*(W*J+ba*ha+Z*aa-N*y)/da,X[2]=2*(Z*J+ba*y+N*ha-W*aa)/da):(X[0]=2*(N*J+ba*aa+W*y-Z*ha),X[1]=2*(W*J+ba*ha+Z*aa-N*y),X[2]=2*(Z*J+ba*y+N*ha-W*aa));T(h,F,X);return h}function P(h,F){h[0]=F[12];h[1]=F[13];h[2]=F[14];return h}function l(h,F){const X=F[0],aa=F[1],ha=F[2],y=F[4],J=F[5],N=F[6],W=F[8],Z=F[9];F=F[10];h[0]=Math.sqrt(X*X+aa*aa+ha*ha);h[1]=Math.sqrt(y*y+J*J+N*N);h[2]=Math.sqrt(W*
W+Z*Z+F*F);return h}function A(h,F){const X=F[0]+F[5]+F[10];let aa=0;0<X?(aa=2*Math.sqrt(X+1),h[3]=.25*aa,h[0]=(F[6]-F[9])/aa,h[1]=(F[8]-F[2])/aa,h[2]=(F[1]-F[4])/aa):F[0]>F[5]&&F[0]>F[10]?(aa=2*Math.sqrt(1+F[0]-F[5]-F[10]),h[3]=(F[6]-F[9])/aa,h[0]=.25*aa,h[1]=(F[1]+F[4])/aa,h[2]=(F[8]+F[2])/aa):F[5]>F[10]?(aa=2*Math.sqrt(1+F[5]-F[0]-F[10]),h[3]=(F[8]-F[2])/aa,h[0]=(F[1]+F[4])/aa,h[1]=.25*aa,h[2]=(F[6]+F[9])/aa):(aa=2*Math.sqrt(1+F[10]-F[0]-F[5]),h[3]=(F[1]-F[4])/aa,h[0]=(F[8]+F[2])/aa,h[1]=(F[6]+
F[9])/aa,h[2]=.25*aa);return h}function v(h,F,X,aa){var ha=F[0],y=F[1],J=F[2],N=F[3],W=ha+ha,Z=y+y,ba=J+J;F=ha*W;const da=ha*Z;ha*=ba;const ia=y*Z;y*=ba;J*=ba;W*=N;Z*=N;N*=ba;ba=aa[0];const ka=aa[1];aa=aa[2];h[0]=(1-(ia+J))*ba;h[1]=(da+N)*ba;h[2]=(ha-Z)*ba;h[3]=0;h[4]=(da-N)*ka;h[5]=(1-(F+J))*ka;h[6]=(y+W)*ka;h[7]=0;h[8]=(ha+Z)*aa;h[9]=(y-W)*aa;h[10]=(1-(F+ia))*aa;h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function w(h,F,X,aa,ha){var y=F[0],J=F[1],N=F[2],W=F[3],Z=y+y,ba=J+J,da=N+N;
F=y*Z;var ia=y*ba,ka=y*da;y=J*ba;J*=da;var ra=N*da;N=W*Z;ba*=W;const oa=W*da;var qa=aa[0],Ca=aa[1];da=aa[2];aa=ha[0];W=ha[1];ha=ha[2];Z=(1-(y+ra))*qa;const va=(ia+oa)*qa;qa*=ka-ba;ia=(ia-oa)*Ca;ra=(1-(F+ra))*Ca;Ca*=J+N;ka=(ka+ba)*da;J=(J-N)*da;F=(1-(F+y))*da;h[0]=Z;h[1]=va;h[2]=qa;h[3]=0;h[4]=ia;h[5]=ra;h[6]=Ca;h[7]=0;h[8]=ka;h[9]=J;h[10]=F;h[11]=0;h[12]=X[0]+aa-(Z*aa+ia*W+ka*ha);h[13]=X[1]+W-(va*aa+ra*W+J*ha);h[14]=X[2]+ha-(qa*aa+Ca*W+F*ha);h[15]=1;return h}function M(h,F){var X=F[0],aa=F[1],ha=
F[2];F=F[3];var y=X+X,J=aa+aa;const N=ha+ha;X*=y;const W=aa*y;aa*=J;const Z=ha*y,ba=ha*J;ha*=N;y*=F;J*=F;F*=N;h[0]=1-aa-ha;h[1]=W+F;h[2]=Z-J;h[3]=0;h[4]=W-F;h[5]=1-X-ha;h[6]=ba+y;h[7]=0;h[8]=Z+J;h[9]=ba-y;h[10]=1-X-aa;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function K(h,F,X,aa,ha,y,J){const N=1/(X-F),W=1/(ha-aa),Z=1/(y-J);h[0]=2*y*N;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*y*W;h[6]=0;h[7]=0;h[8]=(X+F)*N;h[9]=(ha+aa)*W;h[10]=(J+y)*Z;h[11]=-1;h[12]=0;h[13]=0;h[14]=J*y*2*Z;h[15]=0;return h}function U(h,
F,X,aa,ha){F=1/Math.tan(F/2);let y=void 0;h[0]=F/X;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=F;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[11]=-1;h[12]=0;h[13]=0;h[15]=0;null!=ha&&Infinity!==ha?(y=1/(aa-ha),h[10]=(ha+aa)*y,h[14]=2*ha*aa*y):(h[10]=-1,h[14]=-2*aa);return h}function Y(h,F,X,aa){const ha=Math.tan(F.upDegrees*Math.PI/180),y=Math.tan(F.downDegrees*Math.PI/180),J=Math.tan(F.leftDegrees*Math.PI/180);F=Math.tan(F.rightDegrees*Math.PI/180);const N=2/(J+F),W=2/(ha+y);h[0]=N;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=W;h[6]=
0;h[7]=0;h[8]=-((J-F)*N*.5);h[9]=(ha-y)*W*.5;h[10]=aa/(X-aa);h[11]=-1;h[12]=0;h[13]=0;h[14]=aa*X/(X-aa);h[15]=0;return h}function ea(h,F,X,aa,ha,y,J){const N=1/(F-X),W=1/(aa-ha),Z=1/(y-J);h[0]=-2*N;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*W;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*Z;h[11]=0;h[12]=(F+X)*N;h[13]=(ha+aa)*W;h[14]=(J+y)*Z;h[15]=1;return h}function la(h,F,X,aa){const ha=F[0],y=F[1];F=F[2];let J=ha-X[0],N=y-X[1];X=F-X[2];var W=x.getEpsilon();if(Math.abs(J)<W&&Math.abs(N)<W&&Math.abs(X)<W)C(h);else{var Z=
1/Math.sqrt(J*J+N*N+X*X);J*=Z;N*=Z;X*=Z;Z=aa[0];var ba=aa[1];W=aa[2];aa=ba*X-W*N;W=W*J-Z*X;ba=Z*N-ba*J;(Z=Math.sqrt(aa*aa+W*W+ba*ba))?(Z=1/Z,aa*=Z,W*=Z,ba*=Z):ba=W=aa=0;var da=N*ba-X*W,ia=X*aa-J*ba,ka=J*W-N*aa;(Z=Math.sqrt(da*da+ia*ia+ka*ka))?(Z=1/Z,da*=Z,ia*=Z,ka*=Z):ka=ia=da=0;h[0]=aa;h[1]=da;h[2]=J;h[3]=0;h[4]=W;h[5]=ia;h[6]=N;h[7]=0;h[8]=ba;h[9]=ka;h[10]=X;h[11]=0;h[12]=-(aa*ha+W*y+ba*F);h[13]=-(da*ha+ia*y+ka*F);h[14]=-(J*ha+N*y+X*F);h[15]=1}}function na(h,F,X,aa){const ha=F[0],y=F[1];F=F[2];
var J=aa[0];const N=aa[1];var W=aa[2];aa=ha-X[0];let Z=y-X[1];X=F-X[2];let ba=aa*aa+Z*Z+X*X;0<ba&&(ba=1/Math.sqrt(ba),aa*=ba,Z*=ba,X*=ba);let da=N*X-W*Z;W=W*aa-J*X;J=J*Z-N*aa;ba=da*da+W*W+J*J;0<ba&&(ba=1/Math.sqrt(ba),da*=ba,W*=ba,J*=ba);h[0]=da;h[1]=W;h[2]=J;h[3]=0;h[4]=Z*J-X*W;h[5]=X*da-aa*J;h[6]=aa*W-Z*da;h[7]=0;h[8]=aa;h[9]=Z;h[10]=X;h[11]=0;h[12]=ha;h[13]=y;h[14]=F;h[15]=1;return h}function sa(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+
", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function ua(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+h[6]**2+h[7]**2+h[8]**2+h[9]**2+h[10]**2+h[11]**2+h[12]**2+h[13]**2+h[14]**2+h[15]**2)}function ta(h,F,X){h[0]=F[0]+X[0];h[1]=F[1]+X[1];h[2]=F[2]+X[2];h[3]=F[3]+X[3];h[4]=F[4]+X[4];h[5]=F[5]+X[5];h[6]=F[6]+X[6];h[7]=F[7]+X[7];h[8]=F[8]+X[8];h[9]=F[9]+X[9];h[10]=F[10]+X[10];h[11]=F[11]+X[11];h[12]=F[12]+X[12];h[13]=F[13]+X[13];h[14]=F[14]+X[14];
h[15]=F[15]+X[15];return h}function wa(h,F,X){h[0]=F[0]-X[0];h[1]=F[1]-X[1];h[2]=F[2]-X[2];h[3]=F[3]-X[3];h[4]=F[4]-X[4];h[5]=F[5]-X[5];h[6]=F[6]-X[6];h[7]=F[7]-X[7];h[8]=F[8]-X[8];h[9]=F[9]-X[9];h[10]=F[10]-X[10];h[11]=F[11]-X[11];h[12]=F[12]-X[12];h[13]=F[13]-X[13];h[14]=F[14]-X[14];h[15]=F[15]-X[15];return h}function xa(h,F,X){h[0]=F[0]*X;h[1]=F[1]*X;h[2]=F[2]*X;h[3]=F[3]*X;h[4]=F[4]*X;h[5]=F[5]*X;h[6]=F[6]*X;h[7]=F[7]*X;h[8]=F[8]*X;h[9]=F[9]*X;h[10]=F[10]*X;h[11]=F[11]*X;h[12]=F[12]*X;h[13]=F[13]*
X;h[14]=F[14]*X;h[15]=F[15]*X;return h}function Da(h,F,X,aa){h[0]=F[0]+X[0]*aa;h[1]=F[1]+X[1]*aa;h[2]=F[2]+X[2]*aa;h[3]=F[3]+X[3]*aa;h[4]=F[4]+X[4]*aa;h[5]=F[5]+X[5]*aa;h[6]=F[6]+X[6]*aa;h[7]=F[7]+X[7]*aa;h[8]=F[8]+X[8]*aa;h[9]=F[9]+X[9]*aa;h[10]=F[10]+X[10]*aa;h[11]=F[11]+X[11]*aa;h[12]=F[12]+X[12]*aa;h[13]=F[13]+X[13]*aa;h[14]=F[14]+X[14]*aa;h[15]=F[15]+X[15]*aa;return h}function Ia(h,F){return h[0]===F[0]&&h[1]===F[1]&&h[2]===F[2]&&h[3]===F[3]&&h[4]===F[4]&&h[5]===F[5]&&h[6]===F[6]&&h[7]===F[7]&&
h[8]===F[8]&&h[9]===F[9]&&h[10]===F[10]&&h[11]===F[11]&&h[12]===F[12]&&h[13]===F[13]&&h[14]===F[14]&&h[15]===F[15]}function Ra(h,F){if(h===F)return!0;const X=h[0],aa=h[1],ha=h[2],y=h[3],J=h[4],N=h[5],W=h[6],Z=h[7],ba=h[8],da=h[9],ia=h[10],ka=h[11],ra=h[12],oa=h[13],qa=h[14];h=h[15];const Ca=F[0],va=F[1],Ba=F[2],Aa=F[3],ya=F[4],Ha=F[5],Pa=F[6],Ya=F[7],Wa=F[8],Ja=F[9],Ka=F[10],ja=F[11],Qa=F[12],Nb=F[13],nb=F[14];F=F[15];const c=x.getEpsilon();return Math.abs(X-Ca)<=c*Math.max(1,Math.abs(X),Math.abs(Ca))&&
Math.abs(aa-va)<=c*Math.max(1,Math.abs(aa),Math.abs(va))&&Math.abs(ha-Ba)<=c*Math.max(1,Math.abs(ha),Math.abs(Ba))&&Math.abs(y-Aa)<=c*Math.max(1,Math.abs(y),Math.abs(Aa))&&Math.abs(J-ya)<=c*Math.max(1,Math.abs(J),Math.abs(ya))&&Math.abs(N-Ha)<=c*Math.max(1,Math.abs(N),Math.abs(Ha))&&Math.abs(W-Pa)<=c*Math.max(1,Math.abs(W),Math.abs(Pa))&&Math.abs(Z-Ya)<=c*Math.max(1,Math.abs(Z),Math.abs(Ya))&&Math.abs(ba-Wa)<=c*Math.max(1,Math.abs(ba),Math.abs(Wa))&&Math.abs(da-Ja)<=c*Math.max(1,Math.abs(da),Math.abs(Ja))&&
Math.abs(ia-Ka)<=c*Math.max(1,Math.abs(ia),Math.abs(Ka))&&Math.abs(ka-ja)<=c*Math.max(1,Math.abs(ka),Math.abs(ja))&&Math.abs(ra-Qa)<=c*Math.max(1,Math.abs(ra),Math.abs(Qa))&&Math.abs(oa-Nb)<=c*Math.max(1,Math.abs(oa),Math.abs(Nb))&&Math.abs(qa-nb)<=c*Math.max(1,Math.abs(qa),Math.abs(nb))&&Math.abs(h-F)<=c*Math.max(1,Math.abs(h),Math.abs(F))}function Na(h){const F=x.getEpsilon(),X=h[0],aa=h[1],ha=h[2],y=h[4],J=h[5],N=h[6],W=h[8],Z=h[9];h=h[10];return Math.abs(1-(X*X+y*y+W*W))<=F&&Math.abs(1-(aa*aa+
J*J+Z*Z))<=F&&Math.abs(1-(ha*ha+N*N+h*h))<=F}function Sa(h){return 1===h[0]&&0===h[1]&&0===h[2]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[8]&&0===h[9]&&1===h[10]}const Va=g.create();g=Object.freeze(Object.defineProperty({__proto__:null,add:ta,adjoint:t,copy:u,determinant:B,equals:Ra,exactEquals:Ia,frob:ua,fromQuat:M,fromQuat2:S,fromRotation:b,fromRotationTranslation:T,fromRotationTranslationScale:v,fromRotationTranslationScaleOrigin:w,fromScaling:R,fromTranslation:G,fromXRotation:D,fromYRotation:Q,fromZRotation:I,
frustum:K,getRotation:A,getScaling:l,getTranslation:P,hasIdentityRotation:Sa,identity:C,invert:e,invertOrIdentity:n,isOrthoNormal:Na,lookAt:la,mul:z,multiply:z,multiplyScalar:xa,multiplyScalarAndAdd:Da,ortho:ea,perspective:U,perspectiveFromFieldOfView:Y,rotate:q,rotateX:a,rotateY:m,rotateZ:p,scale:r,set:H,str:sa,sub:wa,subtract:wa,targetTo:na,translate:L,transpose:f},Symbol.toStringTag,{value:"Module"}));d.add=ta;d.adjoint=t;d.copy=u;d.determinant=B;d.equals=Ra;d.exactEquals=Ia;d.frob=ua;d.fromQuat=
M;d.fromQuat2=S;d.fromRotation=b;d.fromRotationTranslation=T;d.fromRotationTranslationScale=v;d.fromRotationTranslationScaleOrigin=w;d.fromScaling=R;d.fromTranslation=G;d.fromXRotation=D;d.fromYRotation=Q;d.fromZRotation=I;d.frustum=K;d.getRotation=A;d.getScaling=l;d.getTranslation=P;d.hasIdentityRotation=Sa;d.identity=C;d.invert=e;d.invertOrIdentity=n;d.isOrthoNormal=Na;d.lookAt=la;d.mat4=g;d.mul=z;d.multiply=z;d.multiplyScalar=xa;d.multiplyScalarAndAdd=Da;d.ortho=ea;d.perspective=U;d.perspectiveFromFieldOfView=
Y;d.rotate=q;d.rotateX=a;d.rotateY=m;d.rotateZ=p;d.scale=r;d.set=H;d.str=sa;d.sub=wa;d.subtract=wa;d.targetTo=na;d.translate=L;d.transpose=f;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(d,g,x){function u(v){return null==v||"string"===typeof v&&!v?"\x3cNull\x3e":v}function H(v){const w=null!=v.minValue||null!=v.maxValue,M=!!v.sqlExpression&&
v.supportsSQLExpression;return!(null!=v.normalizationField||null!=v.normalizationType)&&!w&&!M}function C(v){const {values:w,useSampleStdDev:M,supportsNullCount:K}=v;var U=Number.POSITIVE_INFINITY;let Y=Number.NEGATIVE_INFINITY,ea=null,la=null;var na=null;let sa=null,ua=0;const ta=null==v.minValue?-Infinity:v.minValue,wa=null==v.maxValue?Infinity:v.maxValue;for(const xa of w)Number.isFinite(xa)?xa>=ta&&xa<=wa&&(ea=null===ea?xa:ea+xa,U=Math.min(U,xa),Y=Math.max(Y,xa),ua++):"string"===typeof xa&&ua++;
if(ua&&null!=ea){la=ea/ua;na=0;for(const xa of w)Number.isFinite(xa)&&xa>=ta&&xa<=wa&&(na+=(xa-la)**2);sa=M?1<ua?na/(ua-1):0:0<ua?na/ua:0;na=Math.sqrt(sa)}else Y=U=null;U={avg:la,count:ua,max:Y,min:U,stddev:na,sum:ea,variance:sa};K&&(U.nullcount=w.length-ua);v.percentileParams&&(U.median=f(w,v.percentileParams));return U}function f(v,w){const {fieldType:M,value:K,orderBy:U,isDiscrete:Y}=w,ea=n(M,"desc"===U);v=[...v].filter(ua=>null!=ua).sort((ua,ta)=>ea(ua,ta));if(0===v.length)return null;if(0>=K)return v[0];
if(1<=K)return v[v.length-1];var la=(v.length-1)*K,na=Math.floor(la);w=na+1;la%=1;na=v[na];const sa=v[w];return w>=v.length||Y||"string"===typeof na||"string"===typeof sa?na:na*(1-la)+sa*la}function n(v,w){if(v){if(G.has(v))return w?l:A;if(R.has(v))return e(w,!1);if("esriFieldTypeTimestampOffset"===v)return w?T:I;const Y=e(w,!0);if("esriFieldTypeString"===v)return Y;if("esriFieldTypeGUID"===v||"esriFieldTypeGlobalID"===v)return(ea,la)=>Y(t(ea),t(la))}const M=w?1:-1,K=w?l:A,U=e(w,!0);return(Y,ea)=>
"number"===typeof Y&&"number"===typeof ea?K(Y,ea):"string"===typeof Y&&"string"===typeof ea?U(Y,ea):M}function e(v,w){if(!w)return v?P:S;const M=v?D:Q;return v?(K,U)=>{const Y=M(K,U);if(null!=Y)return Y;K=K.toUpperCase();U=U.toUpperCase();return K>U?-1:K<U?1:0}:(K,U)=>{const Y=M(K,U);if(null!=Y)return Y;K=K.toUpperCase();U=U.toUpperCase();return K<U?-1:K>U?1:0}}function t(v){return v.substr(24,12)+v.substr(19,4)+v.substr(16,2)+v.substr(14,2)+v.substr(11,2)+v.substr(9,2)+v.substr(6,2)+v.substr(4,2)+
v.substr(2,2)+v.substr(0,2)}function B(v){return"coded-value"!==v?.type?[]:v.codedValues.map(w=>w.code)}function z(v,w){const M=r({field:w.field,normalizationType:w.normalizationType,normalizationField:w.normalizationField,classificationMethod:w.classificationMethod,standardDeviationInterval:w.standardDeviationInterval,breakCount:w.numClasses||5});v=L(v,w.minValue,w.maxValue);return x.createGenerateRendererClassBreaks({definition:M,values:v,normalizationTotal:w.normalizationTotal})}function L(v,w,
M){const K=null==w?-Infinity:w,U=null==M?Infinity:M;return v.filter(Y=>Number.isFinite(Y)&&Y>=K&&Y<=U)}function r(v){const {breakCount:w,field:M,normalizationField:K,normalizationType:U}=v,Y=v.classificationMethod||"equal-interval";return new g({breakCount:w,classificationField:M,classificationMethod:Y,normalizationField:"field"===U?K:void 0,normalizationType:U,standardDeviationInterval:"standard-deviation"===Y?v.standardDeviationInterval||1:void 0})}function q(v,w){const {field:M,classificationMethod:K,
standardDeviationInterval:U,normalizationType:Y,normalizationField:ea,normalizationTotal:la,minValue:na,maxValue:sa}=w,ua=w.numBins||10;let ta=w=null,wa=null;K&&"equal-interval"!==K||Y?({classBreaks:v}=z(v,{field:M,normalizationType:Y,normalizationField:ea,normalizationTotal:la,classificationMethod:K,standardDeviationInterval:U,minValue:na,maxValue:sa,numClasses:ua}),w=v[0].minValue,ta=v[v.length-1].maxValue,wa=v.map(xa=>[xa.minValue,xa.maxValue])):(null!=na&&null!=sa?(w=na,ta=sa):(v=C({values:v,
minValue:na,maxValue:sa,useSampleStdDev:!Y,supportsNullCount:H({normalizationType:Y,normalizationField:ea,minValue:na,maxValue:sa})}),w=v.min??null,ta=v.max??null),wa=m(w??0,ta??0,ua));return{min:w,max:ta,intervals:wa}}function a(v,w){let M=-1;for(let K=v.length-1;0<=K;K--)if(w>=v[K][0]){M=K;break}return M}function m(v,w,M){const K=(w-v)/M,U=[];let Y;for(let ea=1;ea<=M;ea++)Y=v+K,Y=Number(Y.toFixed(16)),U.push([v,ea===M?w:Y]),v=Y;return U}const p=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,G=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),
R=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),b="min max avg stddev count sum variance nullcount median".split(" "),D=(v,w)=>null==v?null==w?0:1:null==w?-1:null,Q=(v,w)=>null==v?null==w?0:-1:null==w?1:null,I=(v,w)=>Q(v,w)??(v===w?0:(new Date(v)).getTime()-(new Date(w)).getTime()),T=(v,w)=>D(v,w)??(v===w?0:(new Date(w)).getTime()-(new Date(v)).getTime()),S=(v,w)=>Q(v,w)??(v===w?0:v<w?-1:1),P=(v,w)=>D(v,w)??(v===w?0:v<w?1:-1),l=(v,w)=>D(v,w)??w-v,A=(v,w)=>Q(v,w)??v-w;d.calculateClassBreaks=
z;d.calculateHistogram=function(v,w){var M=q(v,w);if(null==M.min&&null==M.max)return{bins:[],minValue:M.min,maxValue:M.max,normalizationTotal:w.normalizationTotal};const K=M.intervals,U=M.min??0;M=M.max??0;const Y=K.map((ea,la)=>({minValue:K[la][0],maxValue:K[la][1],count:0}));for(const ea of v)null!=ea&&ea>=U&&ea<=M&&(v=a(K,ea),-1<v&&Y[v].count++);return{bins:Y,minValue:U,maxValue:M,normalizationTotal:w.normalizationTotal}};d.calculatePercentile=f;d.calculateStatistics=C;d.calculateStringStatistics=
function(v){const w=v.returnDistinct?[...(new Set(v.values))]:v.values;var M=w.filter(U=>null!=U).sort();const K=M.length;M={count:K,min:M[0],max:M[K-1]};v.supportsNullCount&&(M.nullcount=w.length-K);v.percentileParams&&(M.median=f(w,v.percentileParams));return M};d.calculateUniqueValuesCount=function(v){const w={};for(let M of v){if(null==M||"string"===typeof M&&""===M.trim())M=null;null==w[M]?w[M]={count:1,data:M}:w[M].count++}return{count:w}};d.createClassBreaksDefinition=r;d.createUVResult=function(v,
w,M,K){v=v.count;const U=[];if(M&&w){M=[];var Y=B(w[0]);for(const ea of Y)if(w[1]){Y=B(w[1]);for(const la of Y)if(w[2]){Y=B(w[2]);for(const na of Y)M.push(`${u(ea)}${K}${u(la)}${K}${u(na)}`)}else M.push(`${u(ea)}${K}${u(la)}`)}else M.push(ea);for(const ea of M)v.hasOwnProperty(ea)||(v[ea]={data:ea,count:0})}for(const ea in v)w=v[ea],U.push({value:w.data,count:w.count,label:w.label});return{uniqueValueInfos:U}};d.getAttributeComparator=n;d.getEqualIntervalBins=m;d.getNormalizedValue=function(v,w,M,
K){let U=null;switch(w){case "log":0!==v&&(U=Math.log(v)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(K)&&0!==K&&(U=v/K*100);break;case "field":Number.isFinite(M)&&0!==M&&(U=v/M);break;case "natural-log":0<v&&(U=Math.log(v));break;case "square-root":0<v&&(U=v**.5)}return U};d.isNullCountSupported=H;d.processNullValue=u;d.processSummaryStatisticsResult=function(v,w){let M;for(M in v)b.includes(M)&&(Number.isFinite(v[M])||(v[M]=null));if(!w)return v;["avg","stddev","variance"].forEach(K=>
{null!=v[K]&&(v[K]=Math.ceil(v[K]??0))});return v};d.resolveCBResult=function(v,w){let M=v.classBreaks;const K=M[0]?.minValue,U=M[M.length-1]?.maxValue,Y="standard-deviation"===w;M=M.map(ea=>{const la=ea.label;ea={minValue:ea.minValue,maxValue:ea.maxValue,label:la};if(Y&&la){const na=la.match(p)?.map(sa=>+sa.trim())??[];2===na.length?(ea.minStdDev=na[0],ea.maxStdDev=na[1],0>na[0]&&0<na[1]&&(ea.hasAvg=!0)):1===na.length&&(la.includes("\x3c")?(ea.minStdDev=null,ea.maxStdDev=na[0]):la.includes("\x3e")&&
(ea.minStdDev=na[0],ea.maxStdDev=null))}return ea});return{minValue:K,maxValue:U,classBreakInfos:M,normalizationTotal:v.normalizationTotal}};d.statisticTypes=b;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,g,x,u,H,C,f,n,e){H=new g.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});g=new g.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});x=class extends x.JSONSupport{constructor(t){super(t);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(t){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",t)}set definedInterval(t){"defined-interval"===this.classificationMethod&&this._set("definedInterval",t)}};d.__decorate([n.enumeration({classBreaksDef:"class-breaks-definition"})],x.prototype,"type",void 0);d.__decorate([u.property({json:{write:!0}})],x.prototype,
"breakCount",void 0);d.__decorate([u.property({json:{write:!0}})],x.prototype,"classificationField",void 0);d.__decorate([u.property({type:String,json:{read:H.read,write:H.write}})],x.prototype,"classificationMethod",void 0);d.__decorate([u.property({json:{write:!0}})],x.prototype,"normalizationField",void 0);d.__decorate([u.property({json:{read:g.read,write:g.write}})],x.prototype,"normalizationType",void 0);d.__decorate([u.property({value:null,json:{write:!0}})],x.prototype,"standardDeviationInterval",
null);d.__decorate([u.property({value:null,json:{write:!0}})],x.prototype,"definedInterval",null);return x=d.__decorate([e.subclass("esri.rest.support.ClassBreaksDefinition")],x)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(d,g,x){d.enumeration=function(u,H={}){u=u instanceof g.JSONMap?u:new g.JSONMap(u,H);u={type:H?.ignoreUnknown??!0?u.apiValues:String,json:{type:u.jsonValues,read:H?.readOnly?!1:{reader:u.read},write:{writer:u.write}}};
void 0!==H?.readOnly&&(u.readOnly=!!H.readOnly);void 0!==H?.default&&(u.json.default=H.default);void 0!==H?.name&&(u.json.name=H.name);void 0!==H?.nonNullable&&(u.nonNullable=H.nonNullable);return x.property(u)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(d,g){function x(z){var L=z.definition;const {classificationMethod:r,normalizationType:q,definedInterval:a}=L;L=L.breakCount??
1;const m=[];var p=z.values;if(0===p.length)return[];p=p.sort((I,T)=>I-T);var G=p[0],R=p[p.length-1];if("equal-interval"===r)if(p.length>=L){p=(R-G)/L;z=G;for(var b=1;b<L;b++){var D=Number((G+b*p).toFixed(6));m.push({minValue:z,maxValue:D,label:u(z,D,q)});z=D}m.push({minValue:z,maxValue:R,label:u(z,R,q)})}else p.forEach(I=>{m.push({minValue:I,maxValue:I,label:u(I,I,q)})});else if("natural-breaks"===r){p=H(p);z=C(p.uniqueValues,z.valueFrequency||p.valueFrequency,L);for(b=1;b<L;b++)p.uniqueValues.length>
b&&(D=Number(p.uniqueValues[z[b]].toFixed(6)),m.push({minValue:G,maxValue:D,label:u(G,D,q)}),G=D);m.push({minValue:G,maxValue:R,label:u(G,R,q)})}else if("quantile"===r)if(p.length>=L&&G!==R){z=Math.ceil(p.length/L);b=0;for(D=1;D<L;D++){var Q=z+b-1;Q>p.length&&(Q=p.length-1);0>Q&&(Q=0);m.push({minValue:G,maxValue:p[Q],label:u(G,p[Q],q)});G=p[Q];b+=z;z=Math.ceil((p.length-b)/(L-D))}m.push({minValue:G,maxValue:R,label:u(G,R,q)})}else for(L=-1,R=0;R<p.length;R++)G=p[R],G!==L&&(L=G,m.push({minValue:L,
maxValue:G,label:u(L,G,q)}),L=G);else if("standard-deviation"===r)if(z=e(p),b=t(p,z),0===b)m.push({minValue:p[0],maxValue:p[0],label:u(p[0],p[0],q)});else{p=n(G,R,L,z,b)*b;b=0;for(D=L;1<=D;D--)Q=Number((z-(D-.5)*p).toFixed(6)),m.push({minValue:G,maxValue:Q,label:u(G,Q,q)}),G=Q,b++;D=Number((z+.5*p).toFixed(6));m.push({minValue:G,maxValue:D,label:u(G,D,q)});G=D;b++;for(Q=1;Q<=L;Q++)D=b===2*L?R:Number((z+(Q+.5)*p).toFixed(6)),m.push({minValue:G,maxValue:D,label:u(G,D,q)}),G=D,b++}else if("defined-interval"===
r){if(!a)return m;L=p[0];R=p[p.length-1];p=Math.ceil((R-L)/a);G=L;for(z=1;z<p;z++)b=Number((L+z*a).toFixed(6)),m.push({minValue:G,maxValue:b,label:u(G,b,q)}),G=b;m.push({minValue:G,maxValue:R,label:u(G,R,q)})}return m}function u(z,L,r){let q=null;return q=z===L?r&&"percent-of-total"===r?z+"%":z.toString():r&&"percent-of-total"===r?z+"% - "+L+"%":z+" - "+L}function H(z){const L=[],r=[];let q=Number.MIN_VALUE,a=1,m=-1;for(let p=0;p<z.length;p++){const G=z[p];G===q?(a++,r[m]=a):null!==G&&(L.push(G),
q=G,a=1,r.push(a),m++)}return{uniqueValues:L,valueFrequency:r}}function C(z,L,r){var q=z.length;const a=[];r>q&&(r=q);for(var m=0;m<r;m++)a.push(Math.round(m*q/r-1));a.push(q-1);m=f(a,z,L,r);q=m.mean;m=m.sdcm;var p=r,G=0,R=0;let b=0,D=0,Q=!0;for(let T=0;2>T&&Q;T++){0===T&&(Q=!1);for(var I=0;I<p-1;I++)for(;a[I+1]+1!==a[I+2];)if(a[I+1]+=1,G=B(I,a,z,L),b=G.sbMean,G=G.sbSdcm,R=B(I+1,a,z,L),D=R.sbMean,R=R.sbSdcm,G+R<m[I]+m[I+1])m[I]=G,m[I+1]=R,q[I]=b,q[I+1]=D,Q=!0;else{--a[I+1];break}for(I=p-1;0<I;I--)for(;a[I]!==
a[I-1]+1;)if(--a[I],G=B(I-1,a,z,L),b=G.sbMean,G=G.sbSdcm,R=B(I,a,z,L),D=R.sbMean,R=R.sbSdcm,G+R<m[I-1]+m[I])m[I-1]=G,m[I]=R,q[I-1]=b,q[I]=D,Q=!0;else{a[I]+=1;break}}Q&&(m=f(a,z,L,r));return a}function f(z,L,r,q){let a=[];var m=[],p=[];let G=0;const R=[],b=[];for(var D=0;D<q;D++){var Q=B(D,z,L,r);R.push(Q.sbMean);b.push(Q.sbSdcm);G+=b[D]}Q=G;for(D=!0;D||G<Q;){D=!1;a=[];for(m=0;m<q;m++)a.push(z[m]);for(p=0;p<q;p++)for(Q=z[p]+1;Q<=z[p+1];Q++)if(m=L[Q],0<p&&Q!==z[p+1]&&Math.abs(m-R[p])>Math.abs(m-R[p-
1]))z[p]=Q;else if(p<q-1&&z[p]!==Q-1&&Math.abs(m-R[p])>Math.abs(m-R[p+1])){z[p+1]=Q-1;break}Q=G;G=0;m=[];p=[];for(let I=0;I<q;I++){m.push(R[I]);p.push(b[I]);const T=B(I,z,L,r);R[I]=T.sbMean;b[I]=T.sbSdcm;G+=b[I]}}if(G>Q){for(L=0;L<q;L++)z[L]=a[L],R[L]=m[L],b[L]=p[L];G=Q}return{mean:R,sdcm:b}}function n(z,L,r,q,a){z=Math.max(q-z,L-q)/a/r;return 1<=z?1:.5<=z?.5:.25}function e(z){let L=0;for(let r=0;r<z.length;r++)L+=z[r];return L/=z.length}function t(z,L){let r=0;for(let q=0;q<z.length;q++){const a=
z[q];r+=(a-L)*(a-L)}r/=z.length;return Math.sqrt(r)}function B(z,L,r,q){var a=0,m=0;for(var p=L[z]+1;p<=L[z+1];p++){const G=q[p];a+=r[p]*G;m+=G}0>=m&&g.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");a/=m;m=0;for(p=L[z]+1;p<=L[z+1];p++)m+=q[p]*(r[p]-a)**2;return{sbMean:a,sbSdcm:m}}d.createGenerateRendererClassBreaks=function(z){const {normalizationTotal:L}=z;return{classBreaks:x(z),normalizationTotal:L}};d.createGenerateRendererUniqueValues=function(z){z=
H(z);const L=[],r=z.uniqueValues.length;for(let q=0;q<r;q++){const a=z.uniqueValues[q];L.push({value:a,count:z.valueFrequency[q],label:a.toString()})}return{uniqueValues:L}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(d){d.makeEdgeCandidate=function(g,x,u,H,C,f=!1){return{objectId:g,target:x,distance:u,type:"edge",start:H,end:C,draped:f}};d.makeVertexCandidate=function(g,x,u){return{objectId:g,
target:x,distance:u,type:"vertex"}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(d,g,x,u,H,C,f,n,e,t){async function B(m,p,G){if(!m)return null;
var {where:R}=m;m.where=R=R?.trim();if(!R||/^1 *= *1$/.test(R)||p&&p===R)m.where=null;if(!m.geometry)return m;p=await L(m);m.distance=0;m.units=null;"esriSpatialRelEnvelopeIntersects"===m.spatialRel&&({spatialReference:R}=m.geometry,p=C.getGeometryExtent(p),p.spatialReference=R);if(p){await t.checkProjectionSupport(p.spatialReference,G);R=p.spatialReference;p=z(p,G)&&f.isExtent(p)?{spatialReference:R,rings:[[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]]]}:p;R=(await n.normalizeCentralMeridian(f.fromJSON(p)))[0];
if(null==R)throw a;const b="quantizationParameters"in m&&m.quantizationParameters?.tolerance||"maxAllowableOffset"in m&&m.maxAllowableOffset||0;p=b&&z(p,G)?{densificationStep:8*b}:void 0;R=R.toJSON();p=t.project(R,R.spatialReference,G,p);if(!p)throw a;p.spatialReference=G;m.geometry=p}return m}function z(m,p){if(!m)return!1;const G=m.spatialReference;return(f.isExtent(m)||f.isPolygon(m)||f.isPolyline(m))&&!e.equals(G,p)&&!H.canProjectWithoutEngine(G,p)}async function L(m){const {distance:p,units:G}=
m,R=m.geometry;if(null==p||"vertexAttributes"in R)return R;var b=R.spatialReference;m=G?q.fromJSON(G):u.getUnitString(b);b=b&&(e.isGeographic(b)||e.isWebMercator(b))?R:await t.checkProjectionSupport(b,e.wgs84).then(()=>t.project(R,e.wgs84));return(await r())(b.spatialReference,b,p,m)}async function r(){return(await new Promise((m,p)=>d(["../../../geometry/geometryEngineJSON"],m,p))).geodesicBuffer}const q=new x.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});g.normalizeQuery=async function(m,p,G){const {outFields:R,orderByFields:b,groupByFieldsForStatistics:D,outStatistics:Q}=m;if(R)for(var I=0;I<R.length;I++)R[I]=R[I].trim();if(b)for(I=0;I<b.length;I++)b[I]=b[I].trim();if(D)for(I=0;I<D.length;I++)D[I]=D[I].trim();if(Q)for(I=0;I<Q.length;I++)Q[I].onStatisticField&&(Q[I].onStatisticField=Q[I].onStatisticField.trim());
m.geometry&&!m.outSR&&(m.outSR=m.geometry.spatialReference);return B(m,p,G)};g.normalizeQueryLike=B;g.queryEngineEmptyResult=a;g.unitsKebabDict=q;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(d,g,x,u,H,C){function f(z,L,r){const {outFields:q,orderByFields:a,returnDistinctValues:m,
outStatistics:p}=r,G=p?p.map(R=>R.outStatisticFieldName&&R.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const R=a.map(b=>{const D=b.toLowerCase();return D.includes(" asc")?D.split(" asc")[0]:D.includes(" desc")?D.split(" desc")[0]:b}).filter(b=>!G.includes(b));x.validateFields(z,L,R,{expressionName:"orderByFields",query:r})}if(q&&0<q.length)x.validateFields(z,L,q,{expressionName:"outFields",query:r,allowedFieldTypes:"all"});else if(m)throw new g("unsupported-query","outFields should be specified for returnDistinctValues",
{query:r});x.validateWhere(z,L,r.where,r)}function n(z,L,r){const {outStatistics:q,groupByFieldsForStatistics:a,having:m}=r;var p=a?.length,G=q?.length;if(m){if(!p||!G)throw new g("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:r});x.validateHaving(z,L,m,q,r)}if(G&&t(q)){G=q.map(R=>R.onStatisticField).filter(Boolean);x.validateFields(z,L,G,{expressionName:"onStatisticFields",query:r});p&&x.validateFields(z,L,a,{expressionName:"groupByFieldsForStatistics",
query:r});for(const R of q){const {onStatisticField:b,statisticType:D}=R;if(("percentile_disc"===D||"percentile_cont"===D)&&"statisticParameters"in R){if({statisticParameters:p}=R,!p)throw new g("unsupported-query","statisticParameters should be set for percentile type",{definition:R,query:r});}else z.get(b)&&"count"!==D&&"min"!==D&&"max"!==D&&x.validateFields(z,L,[b],{expressionName:`outStatistics with '${D}' statistic type`,allowedFieldTypes:B,query:r})}}}async function e(z,L,r,q){var a=[];r.valueExpression&&
({arcadeUtils:a}=await C.loadArcade(),a=a.extractFieldNames(r.valueExpression));r.field&&a.push(r.field);r.field2&&a.push(r.field2);r.field3&&a.push(r.field3);r.normalizationField&&a.push(r.normalizationField);if(!a.length&&!r.valueExpression)throw new g("unsupported-query","field or valueExpression is required",{params:r});x.validateFields(z,L,a,{expressionName:"statistics",query:q})}function t(z){return null!=z&&z.every(L=>"exceedslimit"!==L.statisticType)}const B=new Set([...x.numericFieldTypes,
...x.allDateAndTimeFieldTypes]);d.validateQuery=async function(z,{fieldsIndex:L,geometryType:r,spatialReference:q,availableFields:a}){if(0>(z.distance??0)||null!=z.geometryPrecision||z.multipatchOption&&"xyFootprint"!==z.multipatchOption||z.pixelSize||z.relationParam||z.text)throw new g("unsupported-query","Unsupported query options",{query:z});f(L,a,z);n(L,a,z);return Promise.all([H.checkSpatialQuerySupport(z,r,q),u.checkProjectionSupport(q,z.outSR)]).then(()=>z)};d.validateStatisticsQuery=async function(z,
L,{fieldsIndex:r,geometryType:q,spatialReference:a,availableFields:m}){if(0>(z.distance??0)||null!=z.geometryPrecision||z.multipatchOption||z.pixelSize||z.relationParam||z.text||z.outStatistics||z.groupByFieldsForStatistics||z.having||z.orderByFields)throw new g("unsupported-query","Unsupported query options",{query:z});f(r,m,z);return Promise.all([e(r,m,L,z),H.checkSpatialQuerySupport(z,q,a),u.checkProjectionSupport(a,z.outSR)]).then(()=>z)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(d,g,x,u,H,C,f,n,e,t,B,z){function L(){return new Promise((p,G)=>d(["../../../geometry/geometryEngineJSON"],p,G))}const r={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var q={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},m={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};g.canQueryWithRBush=function(p){if(C.isExtent(p))return!0;if(C.isPolygon(p)){for(const G of p.rings)if(5!==G.length||G[0][0]!==G[1][0]||G[0][0]!==G[4][0]||G[2][0]!==G[3][0]||G[0][1]!==G[3][1]||G[0][1]!==
G[4][1]||G[1][1]!==G[2][1])return!1;return!0}return!1};g.checkSpatialQuerySupport=async function(p,G,R){const {spatialRel:b,geometry:D}=p;if(D){if(null==b||!0!==q[b])throw new x("unsupported-query","Unsupported query spatial relationship",{query:p});if(f.isValid(D.spatialReference)&&f.isValid(R)){if(null==D||!0!==a[C.getJsonType(D)])throw new x("unsupported-query","Unsupported query geometry type",{query:p});if(null==G||!0!==m[G])throw new x("unsupported-query","Unsupported layer geometry type",{query:p});
if(p.outSR)return z.checkProjectionSupport(p.geometry?.spatialReference,p.outSR)}}};g.getSpatialQueryOperator=function(p,G,R,b,D){if(C.isPolygon(G)&&"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===p||"esriSpatialRelContains"===p)){const Q=e.convertFromPolygon(new t,G,!1,!1);return Promise.resolve(I=>n.polygonContainsPoint(Q,!1,!1,I))}if(C.isPolygon(G)&&"esriGeometryMultipoint"===R){const Q=e.convertFromPolygon(new t,G,!1,!1);if("esriSpatialRelContains"===p)return Promise.resolve(I=>n.polygonContainsMultipoint(Q,
!1,!1,I,b,D))}if(C.isExtent(G)&&"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===p||"esriSpatialRelContains"===p))return Promise.resolve(Q=>u.extentContainsPoint(G,B.getGeometry(R,b,D,Q)));if(C.isExtent(G)&&"esriGeometryMultipoint"===R&&"esriSpatialRelContains"===p)return Promise.resolve(Q=>u.extentContainsMultipoint(G,B.getGeometry(R,b,D,Q)));if(C.isExtent(G)&&"esriSpatialRelIntersects"===p){const Q=H.getExtentIntersector(R);return Promise.resolve(I=>Q(G,B.getGeometry(R,b,D,I)))}return L().then(Q=>
{const I=Q[r[p]].bind(null,G.spatialReference,G);return T=>I(B.getGeometry(R,b,D,T))})};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(d,g){d.extentIntersectsExtent=g.extentIntersectsExtent;d.extentIntersectsMultipoint=g.extentIntersectsMultipoint;d.extentIntersectsPoint=g.extentIntersectsPoint;d.extentIntersectsPolygon=g.extentIntersectsPolygon;d.extentIntersectsPolyline=g.extentIntersectsPolyline;
d.extentIntersectsRings=g.extentIntersectsRings;d.getFeatureExtentIntersector=g.getFeatureExtentIntersector;d.isSelfIntersecting=g.isSelfIntersecting;d.segmentIntersects=g.segmentIntersects;d.getExtentIntersector=function(x){return"mesh"===x?g.extentIntersectsExtent:g.getFeatureExtentIntersector(x)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(d){function g(x,u,H,C,f){if(!x)return!1;u=u?H?4:3:H?3:2;const {coords:n,
lengths:e}=x;H=!1;x=0;for(const B of e){var t=x;for(let z=x,L=x+B*u;z<L;z+=u){t=z+u;t===L&&(t=x);const r=n[z],q=n[z+1],a=n[t];t=n[t+1];(q<f&&t>=f||t<f&&q>=f)&&r+(f-q)/(t-q)*(a-r)<C&&(H=!H)}x+=B*u}return H}d.polygonContainsCoords=g;d.polygonContainsMultipoint=function(x,u,H,C,f,n){f=f?n?4:3:n?3:2;const {coords:e,lengths:t}=C;if(!t)return!1;for(let B=0,z=0;B<t.length;B++,z+=f)if(!g(x,u,H,e[z],e[z+1]))return!1;return!0};d.polygonContainsPoint=function(x,u,H,C){return g(x,u,H,C.coords[0],C.coords[1])};
Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(d){function g(H,C,f,n,e){if(null!=n&&null!=e)return t=>{const B=H(t,C);t=H(t,f);return(null==B||B<=e)&&(null==t||t>=n)};if(null!=n)return t=>{t=H(t,f);return null==t||t>=n};if(null!=e)return t=>{t=H(t,C);return null==t||t<=e}}function x(H,C,f,n){if(null!=f&&null!=n&&f===n)return e=>H(e,C)===f;if(null!=f&&null!=n)return e=>{e=H(e,C);return null!=e&&e>=f&&e<=
n};if(null!=f)return e=>{e=H(e,C);return null!=e&&e>=f};if(null!=n)return e=>{e=H(e,C);return null!=e&&e<=n}}function u(){return()=>!1}d.getTimeExtent=async function(H,C){if(!H)return null;const f=C.featureAdapter,{startTimeField:n,endTimeField:e}=H;let t=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY;if(n&&e)await C.forEach(z=>{const L=f.getAttribute(z,n);z=f.getAttribute(z,e);null==L||isNaN(L)||(t=Math.min(t,L));null==z||isNaN(z)||(B=Math.max(B,z))});else{const z=n||e;await C.forEach(L=>{L=
f.getAttribute(L,z);null==L||isNaN(L)||(t=Math.min(t,L),B=Math.max(B,L))})}return{start:t,end:B}};d.getTimeOperator=function(H,C,f){if(!C||!H)return null;const {startTimeField:n,endTimeField:e}=H;if(!n&&!e)return null;const {start:t,end:B}=C;if(null===t&&null===B)return null;if(void 0===t&&void 0===B)return u();H=f.getAttributeAsTimestamp?.bind(f)??f.getAttribute.bind(f);return n&&e?g(H,n,e,t,B):x(H,n||e,t,B)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(d,g,x,u,H,C,f,n){function e(r){return r.trim().toLowerCase()}function t(r){const q=new Map;if(!r.fields)return q;const a=!0===r.datesInUnknownTimezone,{timeInfo:m,editFieldsInfo:p}=r;var G=(m?"startField"in m?m.startField:m.startTimeField:"")??"";const R=(m?"endField"in m?m.endField:m.endTimeField:"")??"",b="dateFieldsTimeZone"in r?r.dateFieldsTimeZone??null:r.dateFieldsTimeReference?f.fromTimeReference(r.dateFieldsTimeReference):null,D=p?"timeZone"in p?p.timeZone??b:p.dateFieldsTimeReference?
f.fromTimeReference(p.dateFieldsTimeReference):b??f.utc:null,Q=m?"timeZone"in m?m.timeZone??b:m.timeReference?f.fromTimeReference(m.timeReference):b:null;G=new Map([[e(p?.creationDateField??""),D],[e(p?.editDateField??""),D],[e(G),Q],[e(R),Q]]);for(const {name:I,type:T}of r.fields)L.has(T)?q.set(I,f.unknown):"date"!==T&&"esriFieldTypeDate"!==T?q.set(I,null):a?q.set(I,f.unknown):(r=G.get(e(I??""))??b,q.set(I,r));return q}const B=new Map;class z{static fromJSON(r){return new z(r.fields,r.timeZoneByFieldName)}static fromLayer(r){return new z(r.fields??
[],t(r))}static fromLayerJSON(r){return new z(r.fields??[],t(r))}constructor(r=[],q){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=r||[];this._timeZoneByFieldName=q?new Map(q):null;r=[];for(const a of this.fields){q=a?.name;const m=C.normalizeFieldName(q)?.toLowerCase()??"";if(q&&m){const p=e(q);this._fieldsMap.set(q,a);this._fieldsMap.set(p,a);this._normalizedFieldsMap.set(m,
a);r.push(`${p}:${a.type}:${this._timeZoneByFieldName?.get(q)}`);C.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):C.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));C.isObjectIDField(a)||C.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}r.sort();this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const r of this.fields)C.isObjectIDField(r)||C.isGlobalIDField(r)||
r.nullable||void 0!==C.getFieldDefaultValue(r)||this._requiredFields.push(r)}return this._requiredFields}equals(r){return this.uid===r?.uid}has(r){return null!=this.get(r)}get(r){if(r){var q=this._fieldsMap.get(r);if(q)return q;(q=this._fieldsMap.get(e(r))??this._normalizedFieldsMap.get(C.normalizeFieldName(r)?.toLowerCase()??""))&&this._fieldsMap.set(r,q);return q}}getTimeZone(r){r=this.get(r&&"string"!==typeof r?r.name:r);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):
"date"===r.type||"esriFieldTypeDate"===r.type?(x.getLogger("esri.layers.support.FieldsIndex").error(new d("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),f.utc):L.has(r.type)?f.unknown:null:null}getLuxonTimeZone(r){const q=this.getTimeZone(r);return q?q===f.unknown?H.UnknownTimeZone.instance:q===f.utc?n.FixedOffsetZone.utcInstance:u.getOrCreateMapValue(B,q,()=>n.IANAZone.create(q)):null}isDateField(r){return this._dateFieldsSet.has(this.get(r))}isTimeOnlyField(r){return C.isTimeOnlyField(this.get(r))}isNumericField(r){return this._numericFieldsSet.has(this.get(r))}normalizeFieldName(r){return this.get(r)?.name??
void 0}toJSON(){return{fields:this.fields.map(r=>g.isSerializable(r)?r.toJSON():r),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const L=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return z})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(d,g,x,u,H,C,f,n,e,t,B,z,L,r,q){function a(P){return m.has(P)?m.get(P):"number"===typeof P?P:1}d.TaskPriority=void 0;(function(P){P.RESOURCE_CONTROLLER_IMMEDIATE="immediate";P.RESOURCE_CONTROLLER="schedule";P.SLIDE="slide";P.STREAM_DATA_LOADER="stream loader";P.ELEVATION_QUERY="elevation query";P.TERRAIN_SURFACE="terrain";P.SURFACE_GEOMETRY_UPDATES="surface geometry updates";P.LOD_RENDERER="LoD renderer";P.GRAPHICS_CORE="Graphics3D";P.I3S_CONTROLLER="I3S";P.POINT_CLOUD_LAYER="point cloud";
P.FEATURE_TILE_FETCHER="feature fetcher";P.OVERLAY="overlay";P.STAGE="stage";P.GRAPHICS_DECONFLICTOR="graphics deconflictor";P.FILTER_VISIBILITY="Graphics3D filter visibility";P.SCALE_VISIBILITY="Graphics3D scale visibility";P.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";P.POINT_OF_INTEREST_FREQUENT="POI frequent";P.POINT_OF_INTEREST_INFREQUENT="POI infrequent";P.LABELER="labeler";P.FEATURE_QUERY_ENGINE="feature query";P.FEATURE_TILE_TREE="feature tile tree";P.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
P.ELEVATION_ALIGNMENT="elevation alignment";P.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";P.TEXT_TEXTURE_ATLAS="text texture atlas";P.TEXTURE_UNLOAD="texture unload";P.LINE_OF_SIGHT_TOOL="line of sight tool";P.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";P.ELEVATION_PROFILE="elevation profile";P.SNAPPING="snapping";P.SHADOW_ACCUMULATOR="shadow accumulator";P.CLOUDS_GENERATOR="clouds generator";P[P.NONE=0]="NONE";P[P.TEST_PRIO=1]="TEST_PRIO"})(d.TaskPriority||(d.TaskPriority=
{}));const m=new Map([[d.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[d.TaskPriority.RESOURCE_CONTROLLER,4],[d.TaskPriority.SLIDE,0],[d.TaskPriority.STREAM_DATA_LOADER,0],[d.TaskPriority.ELEVATION_QUERY,0],[d.TaskPriority.TERRAIN_SURFACE,1],[d.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[d.TaskPriority.LOD_RENDERER,2],[d.TaskPriority.GRAPHICS_CORE,2],[d.TaskPriority.I3S_CONTROLLER,2],[d.TaskPriority.POINT_CLOUD_LAYER,2],[d.TaskPriority.FEATURE_TILE_FETCHER,2],[d.TaskPriority.OVERLAY,4],[d.TaskPriority.STAGE,
4],[d.TaskPriority.GRAPHICS_DECONFLICTOR,4],[d.TaskPriority.FILTER_VISIBILITY,4],[d.TaskPriority.SCALE_VISIBILITY,4],[d.TaskPriority.FRUSTUM_VISIBILITY,4],[d.TaskPriority.CLOUDS_GENERATOR,4],[d.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[d.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[d.TaskPriority.LABELER,8],[d.TaskPriority.FEATURE_QUERY_ENGINE,8],[d.TaskPriority.FEATURE_TILE_TREE,16],[d.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[d.TaskPriority.ELEVATION_ALIGNMENT,12],[d.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[d.TaskPriority.TEXT_TEXTURE_ATLAS,12],[d.TaskPriority.TEXTURE_UNLOAD,12],[d.TaskPriority.LINE_OF_SIGHT_TOOL,16],[d.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[d.TaskPriority.SNAPPING,0],[d.TaskPriority.SHADOW_ACCUMULATOR,30]]),p=B.Milliseconds(6.5),G=B.Milliseconds(1),R=B.Milliseconds(30),b=B.Milliseconds(1E3/30),D=B.Milliseconds(100);var Q;(function(P){class l{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(w=>w.needsUpdate)}constructor(){this._updating=
t.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new C("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new v;this._state=r.RenderState.INTERACTING;this._tasks=new f;this._runQueue=new f;this._load=0;this._idleStateCallbacks=new f;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=e.watch(()=>L.SCHEDULER_LOG_SLOW_TASKS,M=>this._debug=M,e.initial);for(const M of Object.keys(d.TaskPriority))this.performanceInfo.tasks.set(d.TaskPriority[M],
new C(d.TaskPriority[M]));const w=this;this._test={FRAME_SAFETY_BUDGET:p,INTERACTING_BUDGET:b,IDLE_BUDGET:D,get availableBudget(){return w._budget.budget},usedBudget:0,getBudget:()=>w._budget,setBudget:M=>w._budget=M,updateTask:M=>this._updateTask(M),getState:M=>this._getState(M),getRuntime:M=>this._getRuntime(M),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(w=>w.remove());this._tasks.clear();
H.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(w){this._updatingChanged();w&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(w,M){M=new A(this,w,M);this._tasks.push(M);this._updatingChanged();this.performanceInfo.tasks.has(w)||this.performanceInfo.tasks.set(w,new C(w));return M}registerIdleStateCallbacks(w,
M){const K={idleBegin:w,idleEnd:M};this._idleStateCallbacks.push(K);this.state===r.RenderState.IDLE&&this._idleUpdatesStartFired&&K.idleBegin();const U=this;return{remove:()=>this._removeIdleStateCallbacks(K),set idleBegin(Y){U._idleUpdatesStartFired&&(K.idleEnd(),U._state===r.RenderState.IDLE&&Y());K.idleBegin=Y},set idleEnd(Y){K.idleEnd=Y}}}get load(){return this._load}set state(w){this._state!==w&&(this._state=w,this.state!==r.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(M=>M.idleEnd())))}get state(){return this._state}updateBudget(w){this._test.usedBudget=0;++this._frameNumber;let M=p,K=w.frameDuration,U=G;switch(this.state){case r.RenderState.IDLE:M=B.Milliseconds(0);K=B.Milliseconds(Math.max(D,w.frameDuration));U=R;break;case r.RenderState.INTERACTING:K=B.Milliseconds(Math.max(b,w.frameDuration))}K=B.Milliseconds(K-w.elapsedFrameTime-M);if(this.state!==r.RenderState.IDLE&&K<G&&!this._forceTask)return this._forceTask=!0,!1;K=B.Milliseconds(Math.max(K,
U));this._budget.reset(K,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case r.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(w=>w.idleBegin()));this._runIdle();break;case r.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(B.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(w){this._idleUpdatesStartFired&&
w.idleEnd();this._idleStateCallbacks.removeUnordered(w)}removeTask(w){this._tasks.removeUnordered(w);this._runQueue.removeUnordered(w);this._updatingChanged()}_updateTask(w){this._tasks.forAll(M=>{M.name===w&&M.setPriority(w)})}_getState(w){if(this._runQueue.some(K=>K.name===w))return d.TaskState.SCHEDULED;let M=d.TaskState.IDLE;this._tasks.forAll(K=>{K.name===w&&K.needsUpdate&&(1>=K.schedulePriority?M=d.TaskState.READY:M!==d.TaskState.READY&&(M=d.TaskState.WAITING))});return M}_getRuntime(w){let M=
0;this._tasks.forAll(K=>{K.name===w&&(M+=K.runtime)});return M}_resetRuntimes(){this._tasks.forAll(w=>w.runtime=0)}_getRunning(){const w=new Map;this._tasks.forAll(K=>{K.needsUpdate&&w.set(K.name,(w.get(K.name)||0)+1)});if(0===w.size)return null;let M="";w.forEach((K,U)=>{M=1<K?M+` ${K}x ${U}`:M+` ${U}`});return M}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const w=this._tasks.reduce((M,K)=>K.needsUpdate?++M:M,0);this._load=.9*this._load+w*(1-.9)}_schedule(){this._runQueue.filterInPlace(w=>
{if(w.needsUpdate)return!0;w.schedulePriority=w.basePriority;return!1});for(this._tasks.forAll(w=>{0===w.basePriority&&w.needsUpdate&&!this._runQueue.includes(w)&&w.blockFrame!==this._frameNumber&&this._runQueue.unshift(w)});0===this._runQueue.length;){let w=!1;this._tasks.forAll(M=>{if(M.needsUpdate&&0!==M.schedulePriority&&0!==M.basePriority&&M.blockFrame!==this._frameNumber)switch(w=!0,M.schedulePriority){case 1:M.schedulePriority=0;this._runQueue.push(M);break;default:--M.schedulePriority}});
if(!w)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const w=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var M=this._budget.now();const K=this._runQueue.pop();this._budget.resetProgress();try{K.task.runTask(this._budget)===q.Yield&&(K.blockFrame=this._frameNumber)}catch(U){u.getLogger("esri.views.support.Scheduler").error(`Exception in task "${K.name}"`,U),K.blockFrame=this._frameNumber}!this._budget.hasProgressed&&K.blockFrame!==this._frameNumber&&
K.needsUpdate&&(K.blockFrame=this._frameNumber);K.schedulePriority=K.basePriority;M=this._budget.now()-M;K.runtime+=M;this._frameTaskTimes.set(K.priority,this._frameTaskTimes.get(K.priority)+M);this._debug&&M>2*this._budget.budget&&console.log("Task",K.name,"used",M,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-w);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
w)}_startFrameTaskTimes(){for(const w of Object.keys(d.TaskPriority))this._frameTaskTimes.set(d.TaskPriority[w],0)}_recordFrameTaskTimes(w){this._frameTaskTimes.forEach((M,K)=>this.performanceInfo.tasks.get(K).record(M));this.performanceInfo.total.record(w)}get test(){return this._test}}P.Scheduler=l;class A{get task(){return this._task.value}get updating(){return this._queue.running}constructor(w,M,K){this._scheduler=w;this.name=M;this.runtime=this.blockFrame=0;this._queue=new z.PromiseQueue;this._handles=
new g;this.schedulePriority=this._basePriority=a(M);this._task=t.signal(null!=K?K:this._queue);this._handles.add(e.when(()=>this.task.running,U=>w.taskRunningChanged(U)))}remove(){this.processQueue(I);this._scheduler.removeTask(this);this.schedule=S.schedule;this.reschedule=S.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(w){if(this.name!==w){this.name=w;w=a(w);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=w;this._basePriority=
w}}get priority(){return this.name}set priority(w){this.setPriority(w)}get needsUpdate(){return this.updating||this.task.running}schedule(w,M,K){return this._queue.push(w,M,K)}reschedule(w,M,K){return this._queue.unshift(w,M,K)}processQueue(w){return this._queue.runTask(w)}}class v{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=r.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(w){if(this.done)return!1;!0===w()&&this.madeProgress();
return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(w){this._enabled=w}reset(w,M){this._begin=this.now();this._budget=w;this._state=M;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=
this._progressed=!1}get hasProgressed(){return this._progressed}}P.Budget=v})(Q||={});d.TaskState=void 0;(function(P){P.SCHEDULED="s";P.READY="r";P.WAITING="w";P.IDLE="i"})(d.TaskState||(d.TaskState={}));const I=(()=>{const P=new Q.Budget;P.enabled=!1;return P})();class T{remove(){}processQueue(){}schedule(P,l,A){try{if(n.isAborted(l)){const v=n.createAbortError();return A?Promise.resolve(A(v)):Promise.reject(v)}return n.when(P(I))}catch(v){return Promise.reject(v)}}reschedule(P,l,A){return this.schedule(P,
l,A)}}const S=new T;d.ImmediateTask=S;d.getTaskPriority=a;d.newScheduler=function(){return new Q.Scheduler};d.noBudget=I;d.taskPriorities=m;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(d,g,x,u){class H{constructor(C,f){this._observable=new u.SimpleObservable;this._value=C;this._equalityFunction=f}get value(){x.trackAccess(this._observable);
return this._value}set value(C){this._equalityFunction(C,this._value)||(this._value=C,this._observable.notify())}mutate(C){C(this._value);this._observable.notify()}}d.signal=function(C,f=g.equalsShallow){return new H(C,f)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(d,g,x,u){class H{constructor(){this._tasks=[];this._runningTasks=x.signal(0)}get length(){return this._tasks.length}get running(){return 0<
this._runningTasks.value}destroy(){this.cancelAll()}runTask(f){if(0===this.length)return u.Yield;for(;!f.done&&this._process(f);)f.madeProgress()}push(f,n,e){++this._runningTasks.value;return(new Promise((t,B)=>this._tasks.push(new C(t,B,f,n,e)))).finally(()=>--this._runningTasks.value)}unshift(f,n,e){++this._runningTasks.value;return(new Promise((t,B)=>this._tasks.unshift(new C(t,B,f,n,e)))).finally(()=>--this._runningTasks.value)}_process(f){if(0===this._tasks.length)return!1;const n=this._tasks.shift();
try{const e=g.isAborted(n.signal);if(e&&!n.abortCallback)n.reject(g.createAbortError());else{const t=e?n.abortCallback?.(g.createAbortError()):n.callback(f);g.isPromiseLike(t)?t.then(n.resolve,n.reject):n.resolve(t)}}catch(e){n.reject(e)}return!0}cancelAll(){const f=g.createAbortError();for(const n of this._tasks)if(n.abortCallback){const e=n.abortCallback(f);n.resolve(e)}else n.reject(f);this._tasks.length=0}}class C{constructor(f,n,e,t,B){this.resolve=f;this.reject=n;this.callback=e;this.signal=
t;this.abortCallback=B}}d.PromiseQueue=H;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],function(d){const g=Symbol("Yield");d.Yield=g;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(d,g,x,u,H,C,f){g=class extends g{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};d.__decorate([x.property()],g.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);d.__decorate([x.property()],g.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);g=d.__decorate([f.subclass("esri.views.support.DebugFlags")],g);return new g})},"esri/views/support/RenderState":function(){define(["exports"],function(d){d.RenderState=
void 0;var g=d.RenderState||(d.RenderState={});g[g.ANIMATING=0]="ANIMATING";g[g.INTERACTING=1]="INTERACTING";g[g.IDLE=2]="IDLE";Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/geojson/geojson":function(){define("exports ../../../../core/date ../../../../core/Error ../../../../geometry/support/spatialReferenceUtils ../../OptimizedFeature ../../OptimizedGeometry ../../../support/fieldUtils".split(" "),function(d,g,x,u,H,C,f){function*n(b){switch(b.type){case "Feature":yield b;
break;case "FeatureCollection":for(const D of b.features)D&&(yield D)}}function*e(b){if(b)switch(b.type){case "Point":yield b.coordinates;break;case "LineString":case "MultiPoint":yield*b.coordinates;break;case "MultiLineString":case "Polygon":for(const D of b.coordinates)yield*D;break;case "MultiPolygon":for(const D of b.coordinates)for(const Q of D)yield*Q}}function*t(b,D={}){const {geometryType:Q,objectIdField:I}=D;for(const T of b){const {geometry:S,properties:P,id:l}=T;if(S&&R[S.type]!==Q)continue;
b=P||{};let A=void 0;I&&(A=b[I],null==l||A||(b[I]=A=l));yield new H.OptimizedFeature(S?r(new C,S,D):null,b,null,A??void 0)}}function B(b){for(const D of b)if(2<D.length)return!0;return!1}function z(b){let D=0;for(let Q=0;Q<b.length;Q++){const I=b[Q],T=b[(Q+1)%b.length];D+=I[0]*T[1]-T[0]*I[1]}return 0>=D}function L(b){const D=b[0],Q=b[b.length-1];D[0]===Q[0]&&D[1]===Q[1]&&D[2]===Q[2]||b.push(D);return b}function r(b,D,Q){switch(D.type){case "LineString":return m(b,D.coordinates,Q),b;case "MultiLineString":for(const T of D.coordinates)m(b,
T,Q);return b;case "MultiPoint":return m(b,D.coordinates,Q),b;case "MultiPolygon":for(var I of D.coordinates)for(q(b,I[0],Q),D=1;D<I.length;D++)a(b,I[D],Q);return b;case "Point":return G(b,D.coordinates,Q),b;case "Polygon":I=D.coordinates;q(b,I[0],Q);for(D=1;D<I.length;D++)a(b,I[D],Q);return b}}function q(b,D,Q){D=L(D);z(D)?m(b,D,Q):p(b,D,Q)}function a(b,D,Q){D=L(D);z(D)?p(b,D,Q):m(b,D,Q)}function m(b,D,Q){for(const I of D)G(b,I,Q);b.lengths.push(D.length)}function p(b,D,Q){for(let I=D.length-1;0<=
I;I--)G(b,D[I],Q);b.lengths.push(D.length)}function G(b,D,Q){const [I,T,S]=D;b.coords.push(I,T);Q.hasZ&&b.coords.push(S||0)}const R={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};d.createOptimizedFeatures=function(b,D){return Array.from(t(n(b),D))};d.getGeometryType=function(b){return R[b]};d.inferLayerProperties=function(b,D={}){const Q=[];var I=
new Set;const T=new Set;var S=!1;let P=null,l=!1,A=void 0;({geometryType:D=null}=D);var v=!1;for(const w of n(b)){const {geometry:M,properties:K,id:U}=w;if(M&&(D||=R[M.type],R[M.type]!==D))continue;S||(S=e(M),S=B(S));!l&&(l=null!=U)&&(A=typeof U,K&&(P=Object.keys(K).filter(Y=>K[Y]===U)));K&&P&&l&&null!=U&&(1<P.length?P=P.filter(Y=>K[Y]===U):1===P.length&&(P=K[P[0]]===U?P:[]));if(!v&&K){b=!0;for(const Y in K){if(I.has(Y))continue;v=K[Y];if(null==v){b=!1;T.add(Y);continue}a:switch(typeof v){case "string":v=
g.isISO8601Date(v)?"esriFieldTypeDate":"esriFieldTypeString";break a;case "number":v="esriFieldTypeDouble";break a;default:v="unknown"}if("unknown"===v){T.add(Y);continue}T.delete(Y);I.add(Y);const ea=f.normalizeFieldName(Y);ea&&Q.push({name:ea,alias:Y,type:v})}v=b}}if(I=f.normalizeFieldName(1===P?.length&&P[0]||null)??void 0)for(const w of Q)if(w.name===I&&f.isNumericField(w)){w.type="esriFieldTypeOID";break}return{fields:Q,geometryType:D,hasZ:S,objectIdFieldName:I,objectIdFieldType:A,unknownFields:Array.from(T)}};
d.validateGeoJSON=function(b,D=4326){if(!b)throw new x("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==b.type&&"FeatureCollection"!==b.type)throw new x("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:b});({crs:b}=b);if(b){var Q="string"===typeof b?b:"name"===b.type?b.properties.name:"EPSG"===b.type?b.properties.code:null;D=u.isWGS84({wkid:D})?RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${D})$`,"i");if(!Q||!D.test(Q))throw new x("geojson:unsupported-crs",
"unsupported GeoJSON 'crs' member",{crs:b});}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/core/date":function(){define(["exports"],function(d){function g(f){const n=new Date(f);if(Number.isNaN(n.getTime()))f=!1;else{var e=!0;if(C&&/\d+\W*$/.test(f)&&(f=f.match(/[a-zA-Z]{2,}/))){e=!1;let t=0;for(;!e&&t<=f.length;)e=!H.test(f[t]),t++;e=!e}f=e}return f?Number.isNaN(n.getTime())?null:n.getTime()-6E4*n.getTimezoneOffset():null}function x(f){f=u.exec(f);if(!f?.groups)return null;
f=f.groups;const n=+f.year,e=+f.month-1,t=+f.day,B=+(f.hours??0),z=+(f.minutes??0),L=+(f.seconds??0);if(23<B||59<z||59<L)return null;var r=f.ms??"0";r=r?+r.padEnd(3,"0").substring(0,3):0;f=f.isUTC||!f.offsetSign?Date.UTC(n,e,t,B,z,L,r):6E4*("+"===f.offsetSign?-1:1)*(60*+f.offsetHours+ +f.offsetMinutes)+Date.UTC(n,e,t,B,z,L,r);return Number.isNaN(f)?null:f}const u=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,
H=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,C=!Number.isNaN((new Date("technology 10")).getTime());d.isDateString=function(f){return null!=x(f)||null!=g(f)};d.isISO8601Date=function(f){return u.test(f)};d.parseDate=function(f){return x(f)??g(f)};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports",
"../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(d,g,x,u,H){const C=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let f=1;d.createCapabilities=function(n,e){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:n},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:e,supportsDelete:e,
supportsEditing:e,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:e,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:u.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:e,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,
supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}};d.createDefaultAttributesFunction=function(n,e){if(g("esri-csp-restrictions"))return()=>({[e]:null,...n});try{let t=`this.${e} = null;`;for(const z in n){const L=C.test(z)?`.${z}`:`["${z}"]`;t+=`this${L} = ${JSON.stringify(n[z])};`}const B=(new Function(`\n      return class AttributesClass$${f++} {\n        constructor() {\n          ${t};\n        }\n      }\n    `))();
return()=>new B}catch(t){return()=>({[e]:null,...n})}};d.createDefaultTemplate=function(n={}){return[{name:"New Feature",description:"",prototype:{attributes:x.clone(n)}}]};d.createDrawingInfo=function(n){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===n||"esriGeometryMultipoint"===n?H.defaultPointSymbolJSON:"esriGeometryPolyline"===n?H.defaultPolylineSymbolJSON:H.defaultPolygonSymbolJSON}}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(d){const g=[252,146,31,255],x={type:"esriSMS",style:"esriSMSCircle",size:6,color:g,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},u={type:"esriSLS",style:"esriSLSSolid",width:.75,color:g};d.defaultColor=g;d.defaultOutlineColor=[153,153,153,255];d.defaultPointSymbolJSON=x;d.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};d.defaultPolylineSymbolJSON=
u;d.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};d.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};d.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};d.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(d,g,x,u,H){function C(L){return new e(L)}async function f(){null==z&&(z=await new Promise((L,r)=>d(["../../../../geometry/geometryEngineJSON"],L,r)));return z}class n{constructor(){this.description=this.code=
null}}class e{constructor(L){this.error=new n;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=L}}class t{constructor(L){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=L}}const B=new Set;let z;g.createFeatureEditErrorResult=C;g.createFeatureEditSuccessResult=function(L){return new t(L)};g.loadGeometryEngineForSimplify=async function(L,r){!u.isValid(L)||"esriGeometryPolygon"!==r&&"esriGeometryPolyline"!==r||await f()};g.mixAttributes=function(L,
r,q,a=!1){B.clear();for(const G in q){const R=L.get(G);if(!R)continue;var m=R,p=q[G];let b=p;H.isNumericField(m)&&"string"===typeof p?b=parseFloat(p):H.isStringField(m)&&null!=p&&"string"!==typeof p?b=String(p):H.isDateField(m)&&"string"===typeof p&&(b=x.parseDate(p));m=H.sanitizeNullFieldValue(b);B.add(R.name);if(R&&(a||R.editable)){if(p=H.validateFieldValue(R,m))return C(H.validationErrorToString(p,R,m));r[R.name]=m}}for(const G of L?.requiredFields??[])if(!B.has(G.name))return C(`missing required field "${G.name}"`);
return null};g.parseStringDateFieldValues=function(L,r){if(L?.length)for(const {name:q}of L)"string"===typeof r[q]&&(r[q]=x.parseDate(r[q]))};g.simplify=function(L,r){if(!L||!u.isValid(r))return L;if("rings"in L||"paths"in L){if(null==z)throw new TypeError("geometry engine not loaded");return z.simplify(r,L)}return L};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../request ../../../../core/asyncUtils ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./geojson ../support/clientSideDefaults ../support/sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils ../../../../time/timeZoneUtils".split(" "),function(d,
g,x,u,H,C,f,n,e,t,B,z,L,r,q,a,m,p){const G={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,
supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class R{constructor(){this._queryEngine=null;this._snapshotFeatures=async b=>{b=await this._fetch(b);return this._createFeatures(b)}}destroy(){this._queryEngine?.destroy();this._queryEngine=this._createDefaultAttributes=null}async load(b,D={}){this._loadOptions={url:b.url,customParameters:b.customParameters};var Q=[];[D]=await Promise.all([b.url?this._fetch(D?.signal):null,
this._checkProjection(b.spatialReference)]);var I=z.inferLayerProperties(D,{geometryType:b.geometryType}),T=b.fields||I.fields||[];const S=null!=b.hasZ?b.hasZ:I.hasZ,P=I.geometryType;let l=b.objectIdField||I.objectIdFieldName||"__OBJECTID";const A=b.spatialReference||f.wgs84;b=b.timeInfo;T===I.fields&&0<I.unknownFields.length&&Q.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:I.unknownFields}});
var v=new q(T);let w=v.get(l);w?("esriFieldTypeString"!==w.type&&(w.type="esriFieldTypeOID"),w.editable=!1,w.nullable=!1,l=w.name):(w={alias:l,name:l,type:"string"===I.objectIdFieldType?"esriFieldTypeString":"esriFieldTypeOID",editable:!1,nullable:!1},T.unshift(w));I={};for(var M of T){null==M.name&&(M.name=M.alias);null==M.alias&&(M.alias=M.name);if(!M.name)throw new x("geojson-layer:invalid-field-name","field name is missing",{field:M});if(!a.kebabDict.jsonValues.includes(M.type))throw new x("geojson-layer:invalid-field-type",
`invalid type for field "${M.name}"`,{field:M});if(M.name!==w.name){const Y=m.getFieldDefaultValue(M);void 0!==Y&&(I[M.name]=Y)}null==M.length&&(M.length=m.getFieldDefaultLength(M))}b&&(b.startTimeField&&((M=v.get(b.startTimeField))?(b.startTimeField=M.name,M.type="esriFieldTypeDate"):b.startTimeField=null),b.endTimeField&&((M=v.get(b.endTimeField))?(b.endTimeField=M.name,M.type="esriFieldTypeDate"):b.endTimeField=null),b.trackIdField&&((M=v.get(b.trackIdField))?b.trackIdField=M.name:(b.trackIdField=
null,Q.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:b}}))),b.startTimeField||b.endTimeField||(Q.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:b}}),b=null));M=P?L.createDrawingInfo(P):void 0;v=v.dateFields.length?{timeZoneIANA:p.utc}:null;Q={warnings:Q,featureErrors:[],layerDefinition:{...G,drawingInfo:M??void 0,templates:L.createDefaultTemplate(I),extent:void 0,geometryType:P,
objectIdField:l,fields:T,hasZ:!!S,timeInfo:b,dateFieldsTimeReference:v}};this._queryEngine=new B.QueryEngine({fieldsIndex:q.fromLayerJSON({fields:T,timeInfo:b,dateFieldsTimeReference:v}),geometryType:P,hasM:!1,hasZ:S,objectIdField:l,spatialReference:A,timeInfo:b,featureStore:new e({geometryType:P,hasM:!1,hasZ:S}),cacheSpatialQueries:!0});T=this._queryEngine.fieldsIndex.requiredFields.indexOf(w);-1<T&&this._queryEngine.fieldsIndex.requiredFields.splice(T,1);this._createDefaultAttributes=L.createDefaultAttributesFunction(I,
l);D=await this._createFeatures(D);this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,D);D=this._normalizeFeatures(D,Q.featureErrors);this._queryEngine.featureStore.addMany(D);const {fullExtent:K,timeExtent:U}=await this._queryEngine.fetchRecomputedExtents();Q.layerDefinition.extent=K;if(U){const {start:Y,end:ea}=U;Q.layerDefinition.timeInfo.timeExtent=[Y,ea]}return Q}async applyEdits(b){const {spatialReference:D,geometryType:Q}=this._queryEngine;await Promise.all([r.loadGeometryEngineForSimplify(D,
Q),t.checkProjectionSupport(b.adds,D),t.checkProjectionSupport(b.updates,D)]);await this._waitSnapshotComplete();return this._applyEdits(b)}async queryFeatures(b={},D={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(b,D.signal)}async queryFeatureCount(b={},D={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(b,D.signal)}async queryObjectIds(b={},D={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(b,D.signal)}async queryExtent(b=
{},D={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(b,D.signal)}async querySnapping(b,D={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForSnapping(b,D.signal)}async refresh(b){this._loadOptions.customParameters=b;this._snapshotTask?.abort();this._snapshotTask=g.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(I=>{this._queryEngine.featureStore.clear();this._objectIdGenerator=this._createObjectIdGenerator(this._queryEngine,
I);(I=this._normalizeFeatures(I))&&this._queryEngine.featureStore.addMany(I)},I=>{this._queryEngine.featureStore.clear();H.isAbortError(I)||u.getLogger("esri.layers.GeoJSONLayer").error(new x("geojson-layer:refresh","An error occurred during refresh",{error:I}))});await this._waitSnapshotComplete();const {fullExtent:D,timeExtent:Q}=await this._queryEngine.fetchRecomputedExtents();return{extent:D,timeExtent:Q}}async _createFeatures(b){if(null==b)return[];const {geometryType:D,hasZ:Q,objectIdField:I}=
this._queryEngine;b=z.createOptimizedFeatures(b,{geometryType:D,hasZ:Q,objectIdField:I});if(!f.equals(this._queryEngine.spatialReference,f.wgs84))for(const T of b)null!=T.geometry&&(T.geometry=n.convertFromGeometry(t.project(n.convertToGeometry(T.geometry,this._queryEngine.geometryType,this._queryEngine.hasZ,!1),f.wgs84,this._queryEngine.spatialReference)));return b}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(b){const {url:D,
customParameters:Q}=this._loadOptions;b=(await d(D,{responseType:"json",query:{...Q},signal:b})).data;z.validateGeoJSON(b);return b}_normalizeFeatures(b,D){const {objectIdField:Q,fieldsIndex:I}=this._queryEngine,T=[];for(const S of b){b=this._createDefaultAttributes();const P=r.mixAttributes(I,b,S.attributes,!0);P?D?.push(P):(this._assignObjectId(b,S.attributes,!0),S.attributes=b,S.objectId=b[Q],T.push(S))}return T}async _applyEdits(b){const {adds:D,updates:Q,deletes:I}=b;b={addResults:[],deleteResults:[],
updateResults:[],uidToObjectId:{}};D?.length&&this._applyAddEdits(b,D);Q?.length&&this._applyUpdateEdits(b,Q);if(I?.length){for(const P of I)b.deleteResults.push(r.createFeatureEditSuccessResult(P));this._queryEngine.featureStore.removeManyById(I)}const {fullExtent:T,timeExtent:S}=await this._queryEngine.fetchRecomputedExtents();return{extent:T,timeExtent:S,featureEditResults:b}}_applyAddEdits(b,D){const {addResults:Q}=b,{geometryType:I,hasM:T,hasZ:S,objectIdField:P,spatialReference:l,featureStore:A,
fieldsIndex:v}=this._queryEngine,w=[];for(const M of D){if(M.geometry&&I!==C.getJsonType(M.geometry)){Q.push(r.createFeatureEditErrorResult("Incorrect geometry type."));continue}D=this._createDefaultAttributes();const K=r.mixAttributes(v,D,M.attributes);K?Q.push(K):(this._assignObjectId(D,M.attributes),M.attributes=D,null!=M.uid&&(b.uidToObjectId[M.uid]=M.attributes[P]),null!=M.geometry&&(D=M.geometry.spatialReference??l,M.geometry=t.project(r.simplify(M.geometry,D),D,l)),w.push(M),Q.push(r.createFeatureEditSuccessResult(M.attributes[P])))}A.addMany(n.convertFromFeatures([],
w,I,S,T,P))}_applyUpdateEdits({updateResults:b},D){const {geometryType:Q,hasM:I,hasZ:T,objectIdField:S,spatialReference:P,featureStore:l,fieldsIndex:A}=this._queryEngine;for(const w of D){const {attributes:M,geometry:K}=w;D=M?.[S];if(null==D){b.push(r.createFeatureEditErrorResult(`Identifier field ${S} missing`));continue}if(!l.has(D)){b.push(r.createFeatureEditErrorResult(`Feature with object id ${D} missing`));continue}const U=n.convertToFeature(l.getFeature(D),Q,T,I);if(null!=K){if(Q!==C.getJsonType(K)){b.push(r.createFeatureEditErrorResult("Incorrect geometry type."));
continue}var v=K.spatialReference??P;U.geometry=t.project(r.simplify(K,v),v,P)}if(M&&(v=r.mixAttributes(A,U.attributes,M))){b.push(v);continue}l.add(n.convertFromFeature(U,Q,T,I,S));b.push(r.createFeatureEditSuccessResult(D))}}_createObjectIdGenerator(b,D){const Q=b.fieldsIndex.get(b.objectIdField);if("esriFieldTypeString"===Q.type)return()=>Q.name+"-"+Date.now().toString(16);let I=Number.NEGATIVE_INFINITY;for(const T of D)T.objectId&&(I=Math.max(I,T.objectId));I=Math.max(0,I)+1;return()=>I++}_assignObjectId(b,
D,Q=!1){const I=this._queryEngine.objectIdField;b[I]=Q&&I in D?D[I]:this._objectIdGenerator()}async _checkProjection(b){try{await t.checkProjectionSupport(f.wgs84,b)}catch{throw new x("geojson-layer","Projection not supported");}}}return R});