// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/date":function(){define(["exports"],function(c){function f(e){const q=new Date(e);if(Number.isNaN(q.getTime()))e=!1;else{var d=!0;if(C&&/\d+\W*$/.test(e)&&(e=e.match(/[a-zA-Z]{2,}/))){d=!1;let v=0;for(;!d&&v<=e.length;)d=!G.test(e[v]),v++;d=!d}e=d}return e?Number.isNaN(q.getTime())?null:q.getTime()-6E4*q.getTimezoneOffset():null}function A(e){e=y.exec(e);if(!e?.groups)return null;e=e.groups;const q=+e.year,d=+e.month-1,v=+e.day,t=+(e.hours??0),w=+(e.minutes??0),J=+(e.seconds??
0);if(23<t||59<w||59<J)return null;var r=e.ms??"0";r=r?+r.padEnd(3,"0").substring(0,3):0;e=e.isUTC||!e.offsetSign?Date.UTC(q,d,v,t,w,J,r):6E4*("+"===e.offsetSign?-1:1)*(60*+e.offsetHours+ +e.offsetMinutes)+Date.UTC(q,d,v,t,w,J,r);return Number.isNaN(e)?null:e}const y=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,G=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
C=!Number.isNaN((new Date("technology 10")).getTime());c.isDateString=function(e){return null!=A(e)||null!=f(e)};c.isISO8601Date=function(e){return y.test(e)};c.parseDate=function(e){return A(e)??f(e)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){class f{constructor(e,q,d){this.x=e;this.y=q;this.spatialReference=d;this.m=this.z=void 0}}class A{constructor(e,q,d,v){this.rings=e;this.spatialReference=
q;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);v&&(this.hasM=v)}}class y{constructor(e,q,d,v){this.paths=e;this.spatialReference=q;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);v&&(this.hasM=v)}}class G{constructor(e,q,d,v){this.points=e;this.spatialReference=q;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);v&&(this.hasM=v)}}class C{constructor(e,q,d,v,t){this.xmin=e;this.ymin=q;this.xmax=d;this.ymax=v;this.spatialReference=t;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}c.jsonAdapter={convertToGEGeometry:function(e,
q){return null==q?null:e.convertJSONToGeometry(q)},exportPoint:function(e,q,d){d=new f(e.getPointX(q),e.getPointY(q),d);const v=e.hasZ(q),t=e.hasM(q);v&&(d.z=e.getPointZ(q));t&&(d.m=e.getPointM(q));return d},exportPolygon:function(e,q,d){return new A(e.exportPaths(q),d,e.hasZ(q),e.hasM(q))},exportPolyline:function(e,q,d){return new y(e.exportPaths(q),d,e.hasZ(q),e.hasM(q))},exportMultipoint:function(e,q,d){return new G(e.exportPoints(q),d,e.hasZ(q),e.hasM(q))},exportExtent:function(e,q,d){var v=e.hasZ(q);
const t=e.hasM(q);d=new C(e.getXMin(q),e.getYMin(q),e.getXMax(q),e.getYMax(q),d);v&&(v=e.getZExtent(q),d.zmin=v.vmin,d.zmax=v.vmax);t&&(e=e.getMExtent(q),d.mmin=e.vmin,d.mmax=e.vmax);return d}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports"],function(c){class f{constructor(y=null,G={},C,e){this.geometry=y;this.attributes=G;this.centroid=C;this.objectId=e;this.geohashY=this.geohashX=this.displayId=0}weakClone(){const y=
new f(this.geometry,this.attributes,this.centroid,this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y}clone(){var y=this.geometry?.clone();y=new f(y,{...this.attributes},this.centroid?.clone(),this.objectId);y.displayId=this.displayId;y.geohashX=this.geohashX;y.geohashY=this.geohashY;return y}}class A extends f{}c.OptimizedFeature=f;c.OptimizedFeatureWithGeometry=A;c.hasGeometry=function(y){return!!y.geometry?.coords?.length};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class c{constructor(f=[],A=[],y=!1){this.lengths=f??[];this.coords=A??[];this.hasIndeterminateRingOrder=y}static fromRect(f){const [A,y,G,C]=f;f=G-A;const e=C-y;return new c([5],[A,y,f,0,0,e,-f,0,0,-e])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((f,A)=>f+A)}forEachVertex(f){let A=0;this.lengths.length||
f(this.coords[0],this.coords[1]);for(let y=0;y<this.lengths.length;y++){const G=this.lengths[y];for(let C=0;C<G;C++)f(this.coords[2*(C+A)],this.coords[2*(C+A)+1]);A+=G}}deltaDecode(){const f=this.clone(),{coords:A,lengths:y}=f;let G=0;for(const C of y){for(let e=1;e<C;e++)A[2*(G+e)]+=A[2*(G+e)-2],A[2*(G+e)+1]+=A[2*(G+e)-1];G+=C}return f}clone(f){if(0===this.lengths.length)return new c([],[this.coords[0],this.coords[1]]);var A=2*(0===this.lengths.length?1:this.lengths.reduce((y,G)=>y+G));A=this.coords.slice(0,
A);return f?(f.set(A),new c(this.lengths,f,this.hasIndeterminateRingOrder)):new c(Array.from(this.lengths),Array.from(A),this.hasIndeterminateRingOrder)}}return c})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),function(c,
f,A,y,G,C,e,q,d,v){const t=G.create();class w{constructor(J){this.geometryInfo=J;this._boundsStore=new q.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new A;this.featureAdapter=v.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let J=
0;this._featuresById.forEach(r=>{null!=r.geometry&&r.geometry.coords&&(J+=r.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:J/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(J){if(null==this.fullBounds)return null;const [r,p,a,l]=this.fullBounds;return{xmin:r,ymin:p,xmax:a,ymax:l,spatialReference:d.cleanFromGeometryEngine(J)}}add(J){this._add(J);this._emitChanged()}addMany(J){for(const r of J)this._add(r);this._emitChanged()}upsertMany(J){J=J.map(r=>this._upsert(r));
this._emitChanged();return J.filter(c.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(J){J=this._featuresById.get(J);if(!J)return null;this._remove(J);this._emitChanged();return J}removeManyById(J){this._boundsStore.invalidateIndex();for(const r of J)(J=this._featuresById.get(r))&&this._remove(J);this._emitChanged()}forEachBounds(J,r){for(const p of J)(J=this._boundsStore.get(p.objectId))&&r(G.fromRect(t,J))}getFeature(J){return this._featuresById.get(J)}has(J){return this._featuresById.has(J)}forEach(J){this._featuresById.forEach(r=>
J(r))}forEachInBounds(J,r){this._boundsStore.forEachInBounds(J,p=>{r(this._featuresById.get(p))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let J=!1;this._featuresById.forEach((r,p)=>{this._markedIds.has(p)||(J=!0,this._remove(r))});this._markedIds.clear();J&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(J){if(J){var r=J.objectId;if(null==r)y.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature",
"feature id is missing",{feature:J}));else{var p=this._featuresById.get(r);this._markedIds.add(r);if(p){J.displayId=p.displayId;var a=this._boundsStore.get(r);this._boundsStore.delete(r)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(J);J.geometry?.coords?.length?(a=e.getBoundsOptimizedGeometry(null!=a?a:C.create(),J.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(r,a)):this._boundsStore.set(r,null);this._featuresById.set(r,J)}}}_upsert(J){const r=J?.objectId;
if(null==r)return y.getLogger("esri.layers.graphics.data.FeatureStore").error(new f("featurestore:invalid-feature","feature id is missing",{feature:J})),null;const p=this._featuresById.get(r);if(!p)return this._add(J),J;this._markedIds.add(r);const {geometry:a,attributes:l}=J;for(const n in l)p.attributes[n]=l[n];a&&(p.geometry=a,this._boundsStore.set(r,e.getBoundsOptimizedGeometry(C.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return p}_remove(J){if(null!=this.onFeatureRemove)this.onFeatureRemove(J);
const r=J.objectId;this._markedIds.delete(r);this._boundsStore.delete(r);this._featuresById.delete(r);return J}}return w})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(c,f,A){function y(p=J){return[p[0],p[1],p[2],p[3],p[4],p[5]]}function G(p,a,l,n,D,N,g=y()){g[0]=p;g[1]=a;g[2]=l;g[3]=n;g[4]=D;g[5]=N;return g}function C(p){return p[0]>=p[3]?0:p[3]-p[0]}function e(p){return p[1]>=p[4]?0:p[4]-p[1]}function q(p){return p[2]>=p[5]?0:p[5]-
p[2]}function d(p,a){return Math.max(a[0],p[0])<=Math.min(a[3],p[3])&&Math.max(a[1],p[1])<=Math.min(a[4],p[4])&&Math.max(a[2],p[2])<=Math.min(a[5],p[5])}function v(p,a){p[0]=a[0];p[1]=a[1];p[2]=a[2];p[3]=a[3];p[4]=a[4];p[5]=a[5];return p}function t(p){return 6===p.length}const w=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],J=[0,0,0,0,0,0],r=y();c.allFinite=function(p){for(let a=0;6>a;a++)if(!isFinite(p[a]))return!1;return!0};c.center=function(p,a=[0,0,0]){a[0]=p[0]+C(p)/2;a[1]=p[1]+
e(p)/2;a[2]=p[2]+q(p)/2;return a};c.contains=function(p,a){return a[0]>=p[0]&&a[1]>=p[1]&&a[2]>=p[2]&&a[3]<=p[3]&&a[4]<=p[4]&&a[5]<=p[5]};c.containsPoint=function(p,a){return a[0]>=p[0]&&a[1]>=p[1]&&a[2]>=p[2]&&a[0]<=p[3]&&a[1]<=p[4]&&a[2]<=p[5]};c.containsPointWithMargin=function(p,a,l){return a[0]>=p[0]-l&&a[1]>=p[1]-l&&a[2]>=p[2]-l&&a[0]<=p[3]+l&&a[1]<=p[4]+l&&a[2]<=p[5]+l};c.create=y;c.depth=e;c.diameter=function(p){const a=C(p),l=q(p);p=e(p);return Math.sqrt(a*a+l*l+p*p)};c.empty=function(p){return p?
v(p,w):y(w)};c.equals=function(p,a,l){if(null==p||null==a)return p===a;if(!t(p)||!t(a))return!1;if(l)for(let n=0;n<p.length;n++){if(!l(p[n],a[n]))return!1}else for(l=0;l<p.length;l++)if(p[l]!==a[l])return!1;return!0};c.expandWithAABB=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[2]=Math.min(p[2],a[2]);p[3]=Math.max(p[3],a[3]);p[4]=Math.max(p[4],a[4]);p[5]=Math.max(p[5],a[5])};c.expandWithBuffer=function(p,a,l=0,n=a.length/3){let D=p[0],N=p[1],g=p[2],K=p[3],R=p[4],L=p[5];for(let S=
0;S<n;S++)D=Math.min(D,a[l+3*S]),N=Math.min(N,a[l+3*S+1]),g=Math.min(g,a[l+3*S+2]),K=Math.max(K,a[l+3*S]),R=Math.max(R,a[l+3*S+1]),L=Math.max(L,a[l+3*S+2]);p[0]=D;p[1]=N;p[2]=g;p[3]=K;p[4]=R;p[5]=L};c.expandWithNestedArray=function(p,a,l){const n=a.length;let D=p[0],N=p[1],g=p[2],K=p[3],R=p[4],L=p[5];if(l)for(l=0;l<n;l++){var S=a[l];D=Math.min(D,S[0]);N=Math.min(N,S[1]);g=Math.min(g,S[2]);K=Math.max(K,S[0]);R=Math.max(R,S[1]);L=Math.max(L,S[2])}else for(l=0;l<n;l++)S=a[l],D=Math.min(D,S[0]),N=Math.min(N,
S[1]),K=Math.max(K,S[0]),R=Math.max(R,S[1]);p[0]=D;p[1]=N;p[2]=g;p[3]=K;p[4]=R;p[5]=L};c.expandWithOffset=function(p,a,l,n){p[0]=Math.min(p[0],p[0]+a);p[3]=Math.max(p[3],p[3]+a);p[1]=Math.min(p[1],p[1]+l);p[4]=Math.max(p[4],p[4]+l);p[2]=Math.min(p[2],p[2]+n);p[5]=Math.max(p[5],p[5]+n)};c.expandWithRect=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[3]=Math.max(p[3],a[2]);p[4]=Math.max(p[4],a[3])};c.expandWithVec3=function(p,a){p[0]=Math.min(p[0],a[0]);p[1]=Math.min(p[1],a[1]);p[2]=
Math.min(p[2],a[2]);p[3]=Math.max(p[3],a[0]);p[4]=Math.max(p[4],a[1]);p[5]=Math.max(p[5],a[2])};c.fromExtent=function(p,a=y()){a[0]=p.xmin;a[1]=p.ymin;a[2]=p.hasZ?p.zmin:-Infinity;a[3]=p.xmax;a[4]=p.ymax;a[5]=p.hasZ?p.zmax:Infinity;return a};c.fromMinMax=function(p,a,l=y()){l[0]=p[0];l[1]=p[1];l[2]=p[2];l[3]=a[0];l[4]=a[1];l[5]=a[2];return l};c.fromRect=function(p,a){p[0]=a[0];p[1]=a[1];p[2]=Number.NEGATIVE_INFINITY;p[3]=a[2];p[4]=a[3];p[5]=Number.POSITIVE_INFINITY;return p};c.fromRectValues=function(p,
a,l,n,D){p[0]=a;p[1]=l;p[2]=Number.NEGATIVE_INFINITY;p[3]=n;p[4]=D;p[5]=Number.POSITIVE_INFINITY;return p};c.fromValues=G;c.getMax=function(p,a){a[0]=p[3];a[1]=p[4];a[2]=p[5];return a};c.getMin=function(p,a){a[0]=p[0];a[1]=p[1];a[2]=p[2];return a};c.height=q;c.intersects=d;c.intersectsClippingArea=function(p,a){return null==a?!0:d(p,a)};c.is=t;c.isPoint=function(p){return 0===C(p)&&0===e(p)&&0===q(p)};c.maximumDimension=function(p){return Math.max(C(p),q(p),e(p))};c.negativeInfinity=w;c.offset=function(p,
a,l,n,D=p){D[0]=p[0]+a;D[1]=p[1]+l;D[2]=p[2]+n;D[3]=p[3]+a;D[4]=p[4]+l;D[5]=p[5]+n;return D};c.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];c.scale=function(p,a,l=p){const n=p[0]+C(p)/2,D=p[1]+e(p)/2,N=p[2]+q(p)/2;l[0]=n+(p[0]-n)*a;l[1]=D+(p[1]-D)*a;l[2]=N+(p[2]-N)*a;l[3]=n+(p[3]-n)*a;l[4]=D+(p[4]-D)*a;l[5]=N+(p[5]-N)*a;return l};c.set=v;c.setMax=function(p,a,l=p){l[3]=a[0];l[4]=a[1];l[5]=a[2];l!==p&&(l[0]=p[0],l[1]=p[1],l[2]=p[2]);return p};c.setMin=function(p,a,l=
p){l[0]=a[0];l[1]=a[1];l[2]=a[2];l!==p&&(l[3]=p[3],l[4]=p[4],l[5]=p[5]);return l};c.size=function(p,a=[0,0,0]){a[0]=C(p);a[1]=e(p);a[2]=q(p);return a};c.toExtent=function(p,a){return isFinite(p[2])||isFinite(p[5])?new f({xmin:p[0],xmax:p[3],ymin:p[1],ymax:p[4],zmin:p[2],zmax:p[5],spatialReference:a}):new f({xmin:p[0],xmax:p[3],ymin:p[1],ymax:p[4],spatialReference:a})};c.toRect=function(p,a){a||=A.create();a[0]=p[0];a[1]=p[1];a[2]=p[3];a[3]=p[4];return a};c.width=C;c.wrap=function(p,a,l,n,D,N){return G(p,
a,l,n,D,N,r)};c.zero=J;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(c,f,A,y,G,C,e,q,d,v){function t(z,I){return z?I?4:3:I?3:2}function w(z,I,M,W){if(z){if(M)return I&&
W?F:Va;if(I&&W)return h}else if(I&&W)return Va;return Sa}function J({scale:z,translate:I},M){return Math.round((M-I[0])/z[0])}function r({scale:z,translate:I},M){return Math.round((I[1]-M)/z[1])}function p({scale:z,translate:I},M,W){return M*z[W]+I[W]}function a(z){z=z.coords;return{x:z[0],y:z[1]}}function l(z,I){z.coords[0]=I.x;z.coords[1]=I.y;return z}function n(z){z=z.coords;return{x:z[0],y:z[1],z:z[2]}}function D(z,I){z.coords[0]=I.x;z.coords[1]=I.y;z.coords[2]=I.z;return z}function N(z){z=z.coords;
return{x:z[0],y:z[1],m:z[2]}}function g(z,I){z.coords[0]=I.x;z.coords[1]=I.y;z.coords[2]=I.m;return z}function K(z){z=z.coords;return{x:z[0],y:z[1],z:z[2],m:z[3]}}function R(z,I){z.coords[0]=I.x;z.coords[1]=I.y;z.coords[2]=I.z;z.coords[3]=I.m;return z}function L(z,I){return z&&I?R:z?D:I?g:l}function S(z,I,M,W,Z){M=L(M,W);for(const {geometry:ba,attributes:ea}of I)I=null!=ba?M(new v,ba):null,z.push(new q.OptimizedFeature(I,ea,null,Z?ea[Z]:void 0));return z}function T(z,I,M=L(null!=I.z,null!=I.m)){return M(z,
I)}function Q(z,I,M,W){for(const {geometry:Z,attributes:ba}of I)z.push({attributes:ba,geometry:null!=Z?m(Z,M,W):null});return z}function m(z,I,M){if(null==z)return null;const W=t(I,M),Z=[];for(let ba=0;ba<z.coords.length;ba+=W){const ea=[];for(let ia=0;ia<W;ia++)ea.push(z.coords[ba+ia]);Z.push(ea)}return I?M?{points:Z,hasZ:I,hasM:M}:{points:Z,hasZ:I}:M?{points:Z,hasM:M}:{points:Z}}function B(z,I,M,W,Z){M=t(M,W);for(const {geometry:ba,attributes:ea}of I)I=null!=ba?u(new v,ba,M):null,z.push(new q.OptimizedFeature(I,
ea,null,Z?ea[Z]:void 0));return z}function u(z,I,M=t(I.hasZ,I.hasM)){z.lengths[0]=I.points.length;const W=z.coords;let Z=0;for(const ba of I.points)for(I=0;I<M;I++)W[Z++]=ba[I];return z}function x(z,I,M){if(!z)return null;const W=t(I,M),{coords:Z,lengths:ba}=z;z=[];let ea=0;for(const ia of ba){const ka=[];for(let sa=0;sa<ia;sa++){const oa=[];for(let ra=0;ra<W;ra++)oa.push(Z[ea++]);ka.push(oa)}z.push(ka)}return I?M?{paths:z,hasZ:I,hasM:M}:{paths:z,hasZ:I}:M?{paths:z,hasM:M}:{paths:z}}function O(z,
I,M,W,Z){M=t(M,W);for(const {geometry:ba,attributes:ea,centroid:ia}of I)I=null!=ba?H(new v,ba,M):null,W=null!=ia?T(new v,ia):null,z.push(new q.OptimizedFeature(I,ea,W,Z?ea[Z]:void 0));return z}function H(z,I,M=t(I.hasZ,I.hasM)){const {lengths:W,coords:Z}=z;let ba=0;for(const ea of I.paths){for(const ia of ea)for(I=0;I<M;I++)Z[ba++]=ia[I];W.push(ea.length)}return z}function U(z,I,M){if(!z)return null;const W=t(I,M),{coords:Z,lengths:ba}=z;z=[];let ea=0;for(const ia of ba){const ka=[];for(let sa=0;sa<
ia;sa++){const oa=[];for(let ra=0;ra<W;ra++)oa.push(Z[ea++]);ka.push(oa)}z.push(ka)}return I?M?{rings:z,hasZ:I,hasM:M}:{rings:z,hasZ:I}:M?{rings:z,hasM:M}:{rings:z}}function Y(z,I,M=I.hasZ,W=I.hasM){return da(z,I.rings,M,W)}function da(z,I,M,W){M=t(M,W);const {lengths:Z,coords:ba}=z;W=0;Da(z);for(const ea of I){for(const ia of ea)for(I=0;I<M;I++)ba[W++]=ia[I];Z.push(ea.length)}return z}function la(z,I,M,W,Z,ba){Ia(z);if(!M){for(const ea of I)z.push(new q.OptimizedFeature(null,ea.attributes,null,ba?
ea.attributes[ba]:void 0));return z}switch(M){case "esriGeometryPoint":return S(z,I,W,Z,ba);case "esriGeometryMultipoint":return B(z,I,W,Z,ba);case "esriGeometryPolyline":return O(z,I,W,Z,ba);case "esriGeometryPolygon":for(const {geometry:ea,centroid:ia,attributes:ka}of I)I=null!=ea?Y(new v,ea,W,Z):null,M=ba?ka[ba]:void 0,null!=ia?z.push(new q.OptimizedFeature(I,ka,l(new v,ia),M)):z.push(new q.OptimizedFeature(I,ka,null,M));break;default:Ra().error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${M}'`)),
Ia(z)}return z}function na(z,I,M,W){z=z&&("coords"in z?z:z.geometry);if(null==z)return null;switch(I){case "esriGeometryPoint":return I=a,M&&W?I=K:M?I=n:W&&(I=N),I(z);case "esriGeometryMultipoint":return m(z,M,W);case "esriGeometryPolyline":return x(z,M,W);case "esriGeometryPolygon":return U(z,M,W);default:return Ra().error("convertToGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${I}'`)),null}}function ua(z,I,M,W,Z){Ia(z);if(null==M){for(const ea of I)z.push({attributes:ea.attributes});
return z}switch(M){case "esriGeometryPoint":M=a;W&&Z?M=K:W?M=n:Z&&(M=N);for(var ba of I){const {geometry:ea,attributes:ia}=ba;W=null!=ea?M(ea):null;z.push({attributes:ia,geometry:W})}break;case "esriGeometryMultipoint":return Q(z,I,W,Z);case "esriGeometryPolyline":for(const {geometry:ea,attributes:ia}of I)z.push({attributes:ia,geometry:null!=ea?x(ea,W,Z):null});break;case "esriGeometryPolygon":for(const {geometry:ea,attributes:ia,centroid:ka}of I)ba=null!=ea?U(ea,W,Z):null,null!=ka?(I=a(ka),z.push({attributes:ia,
centroid:I,geometry:ba})):z.push({attributes:ia,geometry:ba});break;default:Ra().error("convertToFeatureSet:unknown-geometry",new f(`Unable to parse unknown geometry type '${M}'`))}return z}function ta(z,I,M,W,Z,ba,ea=M,ia=W){Da(z);if(!I?.coords.length)return null;Z=Na[Z];const {coords:ka,lengths:sa}=I;I=t(M,W);const oa=t(M&&ea,W&&ia);M=w(M,W,ea,ia);if(!sa.length)return M(z.coords,ka,0,0,J(ba,ka[0]),r(ba,ka[1])),Da(z,I,0),z;let ra,Ca=0,xa,Ba=0;for(const Aa of sa){if(Aa<Z)continue;let ya=0;xa=Ba;ia=
W=J(ba,ka[Ca]);ra=ea=r(ba,ka[Ca+1]);M(z.coords,ka,xa,Ca,ia,ra);ya++;Ca+=I;xa+=oa;for(let Ha=1;Ha<Aa;Ha++,Ca+=I)if(ia=J(ba,ka[Ca]),ra=r(ba,ka[Ca+1]),ia!==W||ra!==ea)M(z.coords,ka,xa,Ca,ia-W,ra-ea),xa+=oa,ya++,W=ia,ea=ra;ya>=Z&&(z.lengths.push(ya),Ba=xa)}Ia(z.coords,Ba);return z.coords.length?z:null}function pa(z,I,M,W,Z,ba,ea){let ia=W,ka=0;for(let oa=ba+M;oa<ea;oa+=M){var sa=I[oa];const ra=I[oa+1],Ca=I[ea],xa=I[ea+1];let Ba=I[ba],Aa=I[ba+1],ya=Ca-Ba,Ha=xa-Aa;if(0!==ya||0!==Ha){const Pa=((sa-Ba)*ya+
(ra-Aa)*Ha)/(ya*ya+Ha*Ha);1<Pa?(Ba=Ca,Aa=xa):0<Pa&&(Ba+=ya*Pa,Aa+=Ha*Pa)}ya=sa-Ba;Ha=ra-Aa;sa=ya*ya+Ha*Ha;sa>ia&&(ka=oa,ia=sa)}ia>W&&(ka-ba>M&&pa(z,I,M,W,Z,ba,ka),Z(z,I,z.length,ka,I[ka],I[ka+1]),ea-ka>M&&pa(z,I,M,W,Z,ka,ea))}function va(z,I,M,W,Z){const {coords:ba,lengths:ea}=I;M=t(M,W);if(!ba.length)return z!==I&&Da(z),z;y.assertIsSome(Z);const {originPosition:ia,scale:ka,translate:sa}=Z;Z=ha;Z.originPosition=ia;W=Z.scale;W[0]=ka[0]??1;W[1]=-(ka[1]??1);W[2]=ka[2]??1;W[3]=ka[3]??1;var oa=Z.translate;
oa[0]=sa[0]??0;oa[1]=sa[1]??0;oa[2]=sa[2]??0;oa[3]=sa[3]??0;if(!ea.length){for(W=0;W<M;++W)z.coords[W]=p(Z,ba[W],W);z!==I&&Da(z,M,0);return z}oa=0;for(let Ca=0;Ca<ea.length;Ca++){const xa=ea[Ca];z.lengths[Ca]=xa;for(var ra=0;ra<M;++ra)z.coords[oa+ra]=p(Z,ba[oa+ra],ra);ra=z.coords[oa];let Ba=z.coords[oa+1];oa+=M;for(let Aa=1;Aa<xa;Aa++,oa+=M){ra+=ba[oa]*W[0];Ba+=ba[oa+1]*W[1];z.coords[oa]=ra;z.coords[oa+1]=Ba;for(let ya=2;ya<M;++ya)z.coords[oa+ya]=p(Z,ba[oa+ya],ya)}}z!==I&&Da(z,ba.length,ea.length);
return z}function wa(z,I,M,W){let Z=0,ba=z[W*I],ea=z[W*(I+1)];for(let ia=1;ia<M;ia++){const ka=ba+z[W*(I+ia)],sa=ea+z[W*(I+ia)+1],oa=(ka-ba)*(sa+ea);ba=ka;ea=sa;Z+=oa}return.5*Z}function Da(z,I=0,M=0){Ia(z.lengths,M);Ia(z.coords,I)}function Ia(z,I=0){z.length!==I&&(z.length=I)}const Ra=()=>A.getLogger("esri.layers.graphics.featureConversionUtils"),Na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Sa=(z,I,M,W,Z,ba)=>{z[M]=Z;z[M+1]=
ba},Va=(z,I,M,W,Z,ba)=>{z[M]=Z;z[M+1]=ba;z[M+2]=I[W+2]},h=(z,I,M,W,Z,ba)=>{z[M]=Z;z[M+1]=ba;z[M+2]=I[W+3]},F=(z,I,M,W,Z,ba)=>{z[M]=Z;z[M+1]=ba;z[M+2]=I[W+2];z[M+3]=I[W+3]},X=[],aa=[],ha={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(z,I,M,W,Z){X[0]=z;[z]=la(aa,X,I,M,W,Z);Ia(X);Ia(aa);return z};c.convertFromFeatureSet=function(z,I){const M=new d,{hasM:W,hasZ:Z,features:ba,objectIdFieldName:ea,spatialReference:ia,geometryType:ka,exceededTransferLimit:sa,
transform:oa,fields:ra}=z;ra&&(M.fields=ra);M.geometryType=ka??null;M.objectIdFieldName=ea??I??null;M.spatialReference=ia??null;if(!M.objectIdFieldName)return Ra().error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),M;ba&&la(M.features,ba,ka,Z,W,M.objectIdFieldName);sa&&(M.exceededTransferLimit=sa);W&&(M.hasM=W);Z&&(M.hasZ=Z);oa&&(M.transform=oa);return M};c.convertFromFeatures=la;c.convertFromGeometry=function(z,I,M){if(null==z)return null;const W=new v;"hasZ"in
z&&null==I&&(I=z.hasZ);"hasM"in z&&null==M&&(M=z.hasM);if(e.isPoint(z))return L(null!=I?I:null!=z.z,null!=M?M:null!=z.m)(W,z);if(e.isPolygon(z))return Y(W,z,I,M);if(e.isPolyline(z))return H(W,z,t(I,M));if(e.isMultipoint(z))return u(W,z,t(I,M));Ra().error("convertFromGeometry:unknown-geometry",new f(`Unable to parse unknown geometry type '${z}'`))};c.convertFromMultipoint=u;c.convertFromMultipointFeatures=B;c.convertFromNestedArray=da;c.convertFromPoint=T;c.convertFromPointFeatures=S;c.convertFromPolygon=
Y;c.convertFromPolyline=H;c.convertFromPolylineFeatures=O;c.convertToFeature=function(z,I,M,W){aa[0]=z;ua(X,aa,I,M,W);z=X[0];Ia(X);Ia(aa);return z};c.convertToFeatureSet=function(z){const {objectIdFieldName:I,spatialReference:M,transform:W,fields:Z,hasM:ba,hasZ:ea,features:ia,geometryType:ka,exceededTransferLimit:sa,uniqueIdField:oa,queryGeometry:ra,queryGeometryType:Ca}=z;z=ua([],ia,ka,ea,ba);const xa=na(ra,Ca,!1,!1);z={features:z,fields:Z,geometryType:ka,objectIdFieldName:I,spatialReference:M,uniqueIdField:oa,
queryGeometry:xa};W&&(z.transform=W);sa&&(z.exceededTransferLimit=sa);ba&&(z.hasM=ba);ea&&(z.hasZ=ea);return z};c.convertToFeatures=ua;c.convertToGeometry=na;c.convertToMultipoint=m;c.convertToMultipointFeatures=Q;c.convertToPoint=function(z,I,M){return z?I?M?K(z):n(z):M?N(z):a(z):null};c.convertToPolygon=U;c.convertToPolyline=x;c.deltaDecodeGeometry=function(z,I){if(null==z)return null;const M=z.clone(),W=z.coords;z=z.lengths;let Z=0;for(let ia=0;ia<z.length;ia++){const ka=z[ia];var ba=W[I*Z],ea=
W[I*Z+1];for(let sa=1;sa<ka;sa++)ba+=W[I*(Z+sa)],ea+=W[I*(Z+sa)+1],M.coords[I*(Z+sa)]=ba,M.coords[I*(Z+sa)+1]=ea;Z+=ka}return M};c.deltaEncodeGeometry=function(z,I){const M=z.clone(),W=z.coords;z=z.lengths;let Z=0;for(let ea=0;ea<z.length;ea++){const ia=z[ea];let ka=W[I*Z];var ba=W[I*Z+1];for(let sa=1;sa<ia;sa++){const oa=W[I*(Z+sa)],ra=W[I*(Z+sa)+1];ba=ra-ba;M.coords[I*(Z+sa)]=oa-ka;M.coords[I*(Z+sa)+1]=ba;ka=oa;ba=ra}Z+=ia}return M};c.generalizeOptimizedGeometry=function(z,I,M,W,Z,ba,ea=M,ia=W){Da(z);
if(!I?.coords.length)return null;Z=Na[Z];const {coords:ka,lengths:sa}=I;I=t(M,W);const oa=t(M&&ea,W&&ia);M=w(M,W,ea,ia);if(!sa.length)return M(z.coords,ka,0,0,ka[0],ka[1]),Da(z,I,0),z;W=0;ba*=ba;for(const ra of sa){if(ra<Z){W+=ra*I;continue}ea=z.coords.length/oa;ia=W;const Ca=W+(ra-1)*I;M(z.coords,ka,z.coords.length,ia,ka[ia],ka[ia+1]);pa(z.coords,ka,I,ba,M,ia,Ca);M(z.coords,ka,z.coords.length,Ca,ka[Ca],ka[Ca+1]);ia=z.coords.length/oa-ea;ia>=Z?z.lengths.push(ia):Ia(z.coords,ea*oa);W+=ra*I}return z.coords.length?
z:null};c.getBoundsOptimizedGeometry=function(z,I,M,W){if(!I?.coords?.length)return null;M=t(M,W);let Z=W=Number.POSITIVE_INFINITY,ba=Number.NEGATIVE_INFINITY,ea=Number.NEGATIVE_INFINITY;if(I&&I.coords){I=I.coords;for(let ia=0;ia<I.length;ia+=M){const ka=I[ia],sa=I[ia+1];W=Math.min(W,ka);ba=Math.max(ba,ka);Z=Math.min(Z,sa);ea=Math.max(ea,sa)}}G.is(z)?G.fromRectValues(z,W,Z,ba,ea):C.fromValues(W,Z,ba,ea,z);return z};c.getQuantizedArea=function(z,I){const {coords:M,lengths:W}=z;let Z=z=0;for(let ba=
0;ba<W.length;ba++){const ea=W[ba];Z+=wa(M,z,ea,I);z+=ea}return Math.abs(Z)};c.getQuantizedBoundsOptimizedGeometry=function(z,I,M,W){M=t(M,W);const {lengths:Z,coords:ba}=I;W=I=Number.POSITIVE_INFINITY;let ea=Number.NEGATIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,ka=0;for(const sa of Z){let oa=ba[ka],ra=ba[ka+1];I=Math.min(oa,I);W=Math.min(ra,W);ea=Math.max(oa,ea);ia=Math.max(ra,ia);ka+=M;for(let Ca=1;Ca<sa;Ca++,ka+=M){const xa=ba[ka],Ba=ba[ka+1];oa+=xa;ra+=Ba;0>xa&&(I=Math.min(I,oa));0<xa&&(ea=Math.max(ea,
oa));0>Ba?W=Math.min(W,ra):0<Ba&&(ia=Math.max(ia,ra))}}z[0]=I;z[1]=W;z[2]=ea;z[3]=ia;return z};c.getSignedQuantizedRingArea=wa;c.quantizeOptimizedFeatureSet=function(z,I){const {geometryType:M,features:W,hasM:Z,hasZ:ba}=I;if(!z)return I;for(let ea=0;ea<W.length;ea++){const ia=W[ea],ka=ia.weakClone();ka.geometry=new v;ta(ka.geometry,ia.geometry,Z,ba,M,z);ia.centroid&&(ka.centroid=new v,ta(ka.centroid,ia.centroid,Z,ba,"esriGeometryPoint",z));W[ea]=ka}I.transform=z;return I};c.quantizeOptimizedGeometry=
ta;c.quantizeX=J;c.quantizeY=r;c.removeCollinearVertices=function(z,I,M,W,Z){if(!I?.coords?.length)return null;M=Na[M];const {coords:ba,lengths:ea}=I;I=w(W,Z,W,Z);W=t(W,Z);let ia=Z=0,ka=0,sa=0;for(const Ca of ea){ia=sa;I(z.coords,ba,ia,Z,ba[Z],ba[Z+1]);Z+=W;var oa=ba[Z];let xa=ba[Z+1],Ba=oa,Aa=xa;var ra=xa/oa;ia+=W;I(z.coords,ba,ia,Z,Ba,Aa);Z+=W;for(let ya=2;ya<Ca;ya++){oa=ba[Z];xa=ba[Z+1];const Ha=xa/oa,Pa=ra===Ha||!isFinite(ra)&&!isFinite(Ha);ra=Pa&&isFinite(Ha)?0<=ra&&0<=Ha||0>=ra&&0>=Ha:0<=Aa&&
0<=xa||0>=Aa&&0>=xa;Pa&&ra?(Ba+=oa,Aa+=xa):(Ba=oa,Aa=xa,ia+=W);I(z.coords,ba,ia,Z,Ba,Aa);Z+=W;ra=Ha}ia+=W;oa=(ia-sa)/W;oa>=M&&(z.lengths[ka]=oa,sa=ia,ka++)}z.coords.length>sa&&(z.coords.length=sa);z.lengths.length>ka&&(z.lengths.length=ka);return z.coords.length&&z.lengths.length?z:null};c.removeZMValues=function(z,I,M,W,Z,ba){Da(z);z.lengths.push(...I.lengths);if(M===Z&&W===ba)for(var ea=0;ea<I.coords.length;ea++)z.coords.push(I.coords[ea]);else for(ea=t(M,W),M=w(M,W,Z,ba),I=I.coords,W=0;W<I.length;W+=
ea)M(z.coords,I,z.coords.length,W,I[W],I[W+1]);return z};c.unquantizeOptimizedFeatureSet=function(z){const {transform:I,features:M,hasM:W,hasZ:Z}=z;if(!I)return z;for(const ba of M)null!=ba.geometry&&va(ba.geometry,ba.geometry,W,Z,I),null!=ba.centroid&&va(ba.centroid,ba.centroid,W,Z,I);z.transform=null;return z};c.unquantizeOptimizedGeometry=va;c.unquantizeValue=p;c.unquantizeX=function(z,I){return p(z,I,0)};c.unquantizeY=function(z,I){return p(z,-I,1)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class c{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const f=new c;f.objectIdFieldName=this.objectIdFieldName;f.globalIdFieldName=
this.globalIdFieldName;f.geohashFieldName=this.geohashFieldName;f.geometryProperties=this.geometryProperties;f.geometryType=this.geometryType;f.spatialReference=this.spatialReference;f.hasZ=this.hasZ;f.hasM=this.hasM;f.features=this.features;f.fields=this.fields;f.transform=this.transform;f.exceededTransferLimit=this.exceededTransferLimit;f.uniqueIdField=this.uniqueIdField;f.queryGeometry=this.queryGeometry;f.queryGeometryType=this.queryGeometryType;return f}}return c})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports",
"../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,f,A,y){function G(q,d,v){C.minX=d[0];C.minY=d[1];C.maxX=d[2];C.maxY=d[3];q.search(C,v)}const C={minX:0,minY:0,maxX:0,maxY:0};class e{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new A.PooledRBush(9,f("esri-csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=
()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let d=0;this._idByBounds.forEach((v,t)=>{q[d++]=t});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(q=>this._idByBounds.has(q))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const q=y.empty();for(const d of this._boundsById.values())d&&(q[0]=Math.min(d[0],q[0]),q[1]=Math.min(d[1],q[1]),
q[2]=Math.max(d[2],q[2]),q[3]=Math.max(d[3],q[3]));return q}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(q){const d=this._boundsById.get(q);this._boundsById.delete(q);d&&(this._idByBounds.delete(d),this._indexInvalid||this._index.remove(d))}forEachInBounds(q,d){this._loadIndex();G(this._index,q,v=>d(this._idByBounds.get(v)))}get(q){return this._boundsById.get(q)}has(q){return this._boundsById.has(q)}invalidateIndex(){this._indexInvalid||
(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(q,d){if(!this._indexInvalid){const v=this._boundsById.get(q);v&&(this._index.remove(v),this._idByBounds.delete(v))}this._boundsById.set(q,d);d&&(this._idByBounds.set(d,q),this._indexInvalid||(this._boundsToLoad.push(d),5E4<this._boundsToLoad.length&&this._loadIndex()))}}c.BoundsStore=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../PooledArray",
"../../../chunks/quickselect"],function(c,f,A,y){function G(L,S){C(L,0,L.children.length,S,L)}function C(L,S,T,Q,m){m||=new K([]);m.minX=Infinity;m.minY=Infinity;m.maxX=-Infinity;m.maxY=-Infinity;for(let B=S,u;B<T;B++)u=L.children[B],e(m,L.leaf?Q(u):u);return m}function e(L,S){L.minX=Math.min(L.minX,S.minX);L.minY=Math.min(L.minY,S.minY);L.maxX=Math.max(L.maxX,S.maxX);L.maxY=Math.max(L.maxY,S.maxY)}function q(L,S){return L.minX-S.minX}function d(L,S){return L.minY-S.minY}function v(L){return(L.maxX-
L.minX)*(L.maxY-L.minY)}function t(L){return L.maxX-L.minX+(L.maxY-L.minY)}function w(L,S){return L.minX<=S.minX&&L.minY<=S.minY&&S.maxX<=L.maxX&&S.maxY<=L.maxY}function J(L,S){return S.minX<=L.maxX&&S.minY<=L.maxY&&S.maxX>=L.minX&&S.maxY>=L.minY}function r(L,S,T,Q,m){for(S=[S,T];S.length;){T=S.pop();const B=S.pop();if(T-B<=Q)continue;const u=B+Math.ceil((T-B)/Q/2)*Q;y.quickselect(L,u,B,T,m);S.push(B,u,u,T)}}class p{constructor(L=9,S){this._compareMinX=q;this._compareMinY=d;this._toBBox=T=>T;this._maxEntries=
Math.max(4,L||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));S&&("function"===typeof S?this._toBBox=S:this._initFormat(S));this.clear()}destroy(){this.clear();a.prune();l.prune();n.prune();D.prune()}all(L){this._all(this._data,L)}search(L,S){let T=this._data;const Q=this._toBBox;if(J(L,T))for(a.clear();T;){for(let m=0,B=T.children.length;m<B;m++){const u=T.children[m],x=T.leaf?Q(u):u;J(L,x)&&(T.leaf?S(u):w(L,x)?this._all(u,S):a.push(u))}T=a.pop()}}collides(L){let S=this._data;const T=
this._toBBox;if(!J(L,S))return!1;for(a.clear();S;){for(let Q=0,m=S.children.length;Q<m;Q++){const B=S.children[Q],u=S.leaf?T(B):B;if(J(L,u)){if(S.leaf||w(L,u))return!0;a.push(B)}}S=a.pop()}return!1}load(L){if(!L.length)return this;if(L.length<this._minEntries){for(let S=0,T=L.length;S<T;S++)this.insert(L[S]);return this}L=this._build(L.slice(0,L.length),0,L.length-1,0);if(this._data.children.length)if(this._data.height===L.height)this._splitRoot(this._data,L);else{if(this._data.height<L.height){const S=
this._data;this._data=L;L=S}this._insert(L,this._data.height-L.height-1,!0)}else this._data=L;return this}insert(L){L&&this._insert(L,this._data.height-1);return this}clear(){this._data=new K([]);return this}remove(L){if(!L)return this;let S=this._data,T=null,Q=0,m=!1,B;const u=this._toBBox(L);n.clear();for(D.clear();S||0<n.length;){S||(S=n.pop(),T=n.data[n.length-1],Q=D.pop()??0,m=!0);if(S.leaf&&(B=f.indexOf(S.children,L,S.children.length,S.indexHint),-1!==B)){S.children.splice(B,1);n.push(S);this._condense(n);
break}m||S.leaf||!w(S,u)?T?(Q++,S=T.children[Q],m=!1):S=null:(n.push(S),D.push(Q),Q=0,T=S,S=S.children[0])}return this}toJSON(){return this._data}fromJSON(L){this._data=L;return this}_all(L,S){for(l.clear();L;){if(!0===L.leaf)for(const T of L.children)S(T);else l.pushArray(L.children);L=l.pop()??null}}_build(L,S,T,Q){var m=T-S+1,B=this._maxEntries;if(m<=B)return L=new K(L.slice(S,T+1)),G(L,this._toBBox),L;Q||(Q=Math.ceil(Math.log(m)/Math.log(B)),B=Math.ceil(m/B**(Q-1)));const u=new R([]);u.height=
Q;m=Math.ceil(m/B);B=m*Math.ceil(Math.sqrt(B));for(r(L,S,T,B,this._compareMinX);S<=T;S+=B){const x=Math.min(S+B-1,T);r(L,S,x,m,this._compareMinY);for(let O=S;O<=x;O+=m)u.children.push(this._build(L,O,Math.min(O+m-1,x),Q-1))}G(u,this._toBBox);return u}_chooseSubtree(L,S,T,Q){for(;;){Q.push(S);if(!0===S.leaf||Q.length-1===T)break;let m=Infinity,B=Infinity,u=void 0;for(let x=0,O=S.children.length;x<O;x++){const H=S.children[x],U=v(H),Y=(Math.max(H.maxX,L.maxX)-Math.min(H.minX,L.minX))*(Math.max(H.maxY,
L.maxY)-Math.min(H.minY,L.minY))-U;Y<B?(B=Y,m=U<m?U:m,u=H):Y===B&&U<m&&(m=U,u=H)}S=u||S.children[0]}return S}_insert(L,S,T){var Q=this._toBBox;T=T?L:Q(L);n.clear();Q=this._chooseSubtree(T,this._data,S,n);Q.children.push(L);for(e(Q,T);0<=S;)if(n.data[S].children.length>this._maxEntries)this._split(n,S),S--;else break;this._adjustParentBBoxes(T,n,S)}_split(L,S){const T=L.data[S];var Q=T.children.length;const m=this._minEntries;this._chooseSplitAxis(T,m,Q);(Q=this._chooseSplitIndex(T,m,Q))?(Q=T.children.splice(Q,
T.children.length-Q),Q=T.leaf?new K(Q):new R(Q),Q.height=T.height,G(T,this._toBBox),G(Q,this._toBBox),S?L.data[S-1].children.push(Q):this._splitRoot(T,Q)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}_splitRoot(L,S){this._data=new R([L,S]);this._data.height=L.height+1;G(this._data,this._toBBox)}_chooseSplitIndex(L,S,T){let Q,m,B=void 0;Q=m=Infinity;for(let x=S;x<=T-S;x++){var u=C(L,0,x,this._toBBox);const O=C(L,x,T,this._toBBox),H=Math.max(0,Math.min(u.maxX,
O.maxX)-Math.max(u.minX,O.minX))*Math.max(0,Math.min(u.maxY,O.maxY)-Math.max(u.minY,O.minY));u=v(u)+v(O);H<Q?(Q=H,B=x,m=u<m?u:m):H===Q&&u<m&&(m=u,B=x)}return B}_chooseSplitAxis(L,S,T){const Q=L.leaf?this._compareMinX:q,m=L.leaf?this._compareMinY:d,B=this._allDistMargin(L,S,T,Q);S=this._allDistMargin(L,S,T,m);B<S&&L.children.sort(Q)}_allDistMargin(L,S,T,Q){L.children.sort(Q);Q=this._toBBox;var m=C(L,0,S,Q);const B=C(L,T-S,T,Q);let u=t(m)+t(B);for(let x=S;x<T-S;x++){const O=L.children[x];e(m,L.leaf?
Q(O):O);u+=t(m)}for(T=T-S-1;T>=S;T--)m=L.children[T],e(B,L.leaf?Q(m):m),u+=t(B);return u}_adjustParentBBoxes(L,S,T){for(;0<=T;T--)e(S.data[T],L)}_condense(L){for(let S=L.length-1;0<=S;S--){const T=L.data[S];if(0===T.children.length)if(0<S){const Q=L.data[S-1],m=Q.children;m.splice(f.indexOf(m,T,m.length,Q.indexHint),1)}else this.clear();else G(T,this._toBBox)}}_initFormat(L){const S=["return a"," - b",";"];this._compareMinX=new Function("a","b",S.join(L[0]));this._compareMinY=new Function("a","b",
S.join(L[1]));this._toBBox=new Function("a","return {minX: a"+L[0]+", minY: a"+L[1]+", maxX: a"+L[2]+", maxY: a"+L[3]+"};")}}const a=new A,l=new A,n=new A,D=new A({deallocator:void 0});class N{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class g extends N{constructor(){super(...arguments);this.height=1;this.indexHint=new f.PositionHint}}class K extends g{constructor(L){super();this.children=L;this.leaf=!0}}class R extends g{constructor(L){super();this.children=L;this.leaf=
!1}}c.BBox=N;c.PooledRBush=p;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(c,f){var A={exports:{}};(function(y){(function(G){G=G();void 0!==G&&(y.exports=G)})(function(){function G(q,d,v,t,w){for(;t>v;){if(600<t-v){var J=t-v+1,r=d-v+1,p=Math.log(J),a=.5*Math.exp(2*p/3);p=.5*Math.sqrt(p*a*(J-a)/J)*(0>r-J/2?-1:1);G(q,d,Math.max(v,Math.floor(d-r*a/J+p)),Math.min(t,Math.floor(d+(J-r)*a/J+p)),w)}J=q[d];
r=v;a=t;C(q,v,d);for(0<w(q[t],J)&&C(q,v,t);r<a;){C(q,r,a);r++;for(a--;0>w(q[r],J);)r++;for(;0<w(q[a],J);)a--}0===w(q[v],J)?C(q,v,a):(a++,C(q,a,t));a<=d&&(v=a+1);d<=a&&(t=a-1)}}function C(q,d,v){var t=q[d];q[d]=q[v];q[v]=t}function e(q,d){return q<d?-1:q>d?1:0}return function(q,d,v,t,w){G(q,d,v||0,t||q.length-1,w||e)}})})(A);f=f.getDefaultExportFromCjs(A.exports);c.quickselect=f})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],
function(c,f,A){const y=new A,G=new A,C=new A,e={esriGeometryPoint:f.convertToPoint,esriGeometryPolyline:f.convertToPolyline,esriGeometryPolygon:f.convertToPolygon,esriGeometryMultipoint:f.convertToMultipoint},q=(d,v)=>"_geVersion"!==d?v:void 0;c.cleanFromGeometryEngine=function(d){return d&&"_geVersion"in d?JSON.parse(JSON.stringify(d,q)):d};c.getGeometry=function(d,v,t,w,J,r,p=v,a=t){const l=v&&p,n=t&&a;w=null!=w?"coords"in w?w:w.geometry:null;if(null==w)return null;if(J)return v=f.generalizeOptimizedGeometry(G,
w,v,t,d,J,p,a),r&&(v=f.quantizeOptimizedGeometry(C,v,l,n,d,r)),e[d]?.(v,l,n)??null;if(r)return r=f.quantizeOptimizedGeometry(C,w,v,t,d,r,p,a),e[d]?.(r,l,n)??null;f.removeZMValues(y,w,v,t,p,a);return e[d]?.(y,l,n)??null};c.transformCentroid=function(d,v,t,w=d.hasZ,J=d.hasM){if(null==v)return null;const r=d.hasZ&&w,p=d.hasM&&J;return t?(d=f.quantizeOptimizedGeometry(C,v,d.hasZ,d.hasM,"esriGeometryPoint",t,w,J),f.convertToPoint(d,r,p)):f.convertToPoint(v,r,p)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,f,A,y){c.optimizedFeatureQueryEngineAdapter={getObjectId(G){return G.objectId},getAttributes(G){return G.attributes},getAttribute(G,C){return G.attributes[C]},cloneWithGeometry(G,C){return new A.OptimizedFeature(C,G.attributes,null,G.objectId)},getGeometry(G){return G.geometry},getCentroid(G,C){null==G.centroid&&(G.centroid=
f.getCentroidOptimizedGeometry(new y,G.geometry,C.hasZ,C.hasM));return G.centroid}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(c){function f(y,G,C,e,q,d){d=q?d?4:3:d?3:2;let v=C,t=C+d,w=0,J=0,r=C=0,p=0;for(let a=0,l=e-1;a<l;a++,v+=d,t+=d){e=G[v];const n=G[v+1],D=G[v+2],N=G[t],g=G[t+1],K=G[t+2];let R=e*g-N*n;r+=R;w+=(e+N)*R;J+=(n+g)*R;q&&(R=e*K-N*D,C+=(D+K)*R,p+=R);e<y[0]&&(y[0]=e);e>y[1]&&(y[1]=e);n<y[2]&&
(y[2]=n);n>y[3]&&(y[3]=n);q&&(D<y[4]&&(y[4]=D),D>y[5]&&(y[5]=D))}0<r&&(r*=-1);0<p&&(p*=-1);if(!r)return null;y=[w,J,.5*r];q&&(y[3]=C,y[4]=.5*p);return y}function A(y,G,C,e,q){q=e?q?4:3:q?3:2;let d=G,v=G+q,t=0,w=0,J=0,r=0;for(let n=0,D=C-1;n<D;n++,d+=q,v+=q){var p=y[d];const N=y[d+1],g=y[d+2],K=y[v],R=y[v+1],L=y[v+2];if(e){var a=K-p;var l=R-N;const S=L-g;a=Math.sqrt(a*a+l*l+S*S)}else a=K-p,l=R-N,a=Math.sqrt(a*a+l*l);a&&(t+=a,e?(p=[p+.5*(K-p),N+.5*(R-N),g+.5*(L-g)],w+=a*p[0],J+=a*p[1],r+=a*p[2]):(p=
[p+.5*(K-p),N+.5*(R-N)],w+=a*p[0],J+=a*p[1]))}return 0<t?e?[w/t,J/t,r/t]:[w/t,J/t]:0<C?e?[y[G],y[G+1],y[G+2]]:[y[G],y[G+1]]:null}c.getCentroidOptimizedGeometry=function(y,G,C,e){if(!G?.lengths.length)return null;y.lengths.length&&(y.lengths.length=0);y.coords.length&&(y.coords.length=0);const q=y.coords,d=[],v=C?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:t,coords:w}=G;var J=C?e?4:3:e?3:2;let r=0;for(const p of t){const a=f(v,w,r,p,C,e);a&&d.push(a);r+=p*J}d.sort((p,a)=>{let l=p[2]-a[2];0===l&&C&&(l=p[4]-a[4]);return l});d.length&&(J=6*d[0][2],q[0]=d[0][0]/J,q[1]=d[0][1]/J,C&&(J=6*d[0][4],q[2]=0!==J?d[0][3]/J:0),q[0]<v[0]||q[0]>v[1]||q[1]<v[2]||q[1]>v[3]||C&&(q[2]<v[4]||q[2]>v[5]))&&(q.length=0);if(!q.length)if(G=G.lengths[0]?A(w,0,t[0],C,e):null)q[0]=G[0],q[1]=G[1],C&&2<G.length&&(q[2]=G[2]);
else return null;return y};c.lineCentroid=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(c,f,A,y,G,C,e){function q(a,l){if(!l)return null;if("x"in l){var n={x:0,y:0};[n.x,n.y]=
a(l.x,l.y,t);null!=l.z&&(n.z=l.z);null!=l.m&&(n.m=l.m);return n}return"xmin"in l?(n={xmin:0,ymin:0,xmax:0,ymax:0},[n.xmin,n.ymin]=a(l.xmin,l.ymin,t),[n.xmax,n.ymax]=a(l.xmax,l.ymax,t),l.hasZ&&(n.zmin=l.zmin,n.zmax=l.zmax,n.hasZ=!0),l.hasM&&(n.mmin=l.mmin,n.mmax=l.mmax,n.hasM=!0),n):"rings"in l?{rings:d(l.rings,a),hasM:l.hasM,hasZ:l.hasZ}:"paths"in l?{paths:d(l.paths,a),hasM:l.hasM,hasZ:l.hasZ}:"points"in l?{points:v(l.points,a),hasM:l.hasM,hasZ:l.hasZ}:null}function d(a,l){const n=[];for(const D of a)n.push(v(D,
l));return n}function v(a,l){const n=[];for(const D of a)a=l(D[0],D[1],[0,0]),n.push(a),2<D.length&&a.push(D[2]),3<D.length&&a.push(D[3]);return n}const t=[0,0],w=q.bind(null,e.lngLatToXY),J=q.bind(null,e.xyToLngLat);class r{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,l,n,D){if(!a?.length||!l||!n||C.equals(l,n))return a;a={geometries:a,inSpatialReference:l,outSpatialReference:n,geographicTransformation:D,resolve:A.createResolver()};this._jobs.push(a);
this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:l,inSpatialReference:n,outSpatialReference:D,resolve:N,geographicTransformation:g}=a;e.canProject(n,D)?C.isWebMercator(D)?N(l.map(w)):N(l.map(J)):N(y.projectMany(G.jsonAdapter,l,n,D,g,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}}}const p=new r;c.checkProjectionSupport=async function(a,l){a&&l&&(a=Array.isArray(a)?a.map(n=>
null!=n.geometry?n.geometry.spatialReference:null).filter(f.isSome):[a],await y.initializeProjection(a.map(n=>({source:n,dest:l}))))};c.project=function(a,l,n,D){if(!a)return a;n||(n=l,l=a.spatialReference);return C.isValid(l)&&C.isValid(n)&&!C.equals(l,n)?e.canProject(l,n)?(a=C.isWebMercator(n)?w(a):J(a),a.spatialReference=n,a):y.projectMany(G.jsonAdapter,[a],l,n,null,D)[0]:a};c.projectMany=function(a,l,n,D){return p.push(a,l,n,D)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t,w,J,r,p,a,l,n,D,N,g,K,R,L,S,T,Q,m){class B{constructor(H,U=null,Y,da,la){this.attributes=H;this.geometry=Y;this.centroid=da;this.filterFlags=la;this.groupId=-1;this.displayId=U}}const u=new e.MemCacheStorage(2E6);let x=0;class O{constructor(H){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:g.queryCapabilities};this.geometryType=H.geometryType;this.hasM=!!H.hasM;this.hasZ=!!H.hasZ;this.objectIdField=H.objectIdField;this.spatialReference=H.spatialReference;
this.definitionExpression=H.definitionExpression;this.featureStore=H.featureStore;this.aggregateAdapter=H.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=H.timeInfo;H.cacheSpatialQueries&&(this._geometryQueryCache=new e.MemCache(x++ +"$$",u));this.fieldsIndex=y.isSerializable(H.fieldsIndex)?H.fieldsIndex:Q.fromJSON(H.fieldsIndex);this.availableFields=null==H.availableFields?new Set(this.fieldsIndex.fields.map(U=>U.name)):new Set(H.availableFields.map(U=>
this.fieldsIndex.get(U)?.name).filter(U=>null!=U));H.scheduler&&H.priority&&(this._frameTask=H.scheduler.registerTask(H.priority))}destroy(){this._frameTask=C.removeMaybe(this._frameTask);this.clearCache();C.destroyMaybe(this._geometryQueryCache);this._changeHandle=C.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(H,
U){U=q.signalFromSignalOrOptions(U);try{return(await this._executeQuery(H,{},U)).createQueryResponse()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return(new K.QueryEngineResult([],H,this)).createQueryResponse()}}async executeQueryForCount(H={},U){U=q.signalFromSignalOrOptions(U);try{return(await this._executeQuery(H,{returnGeometry:!1,returnCentroid:!1,outSR:null},U)).createQueryResponseForCount()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(H,U){U=
q.signalFromSignalOrOptions(U);const Y=H.outSR;try{const da=await this._executeQuery(H,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),la=da.size;if(!la)return{count:0,extent:null};const na=await this._getBounds(da.items,da.spatialReference,Y||this.spatialReference);return{count:la,extent:na}}catch(da){if(da===R.queryEngineEmptyResult)return{count:0,extent:null};throw da;}}async executeQueryForIds(H,U){return this.executeQueryForIdSet(H,U).then(Y=>Array.from(Y))}async executeQueryForIdSet(H,U){U=
q.signalFromSignalOrOptions(U);try{const Y=await this._executeQuery(H,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),da=Y.items,la=new Set;await this._reschedule(()=>{for(const na of da)la.add(Y.featureAdapter.getObjectId(na))},U);return la}catch(Y){if(Y===R.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(H,U){const Y=q.signalFromSignalOrOptions(U),{point:da,distance:la,returnEdge:na,vertexMode:ua}=H;if(!na&&"none"===ua)return{candidates:[]};let ta=G.clone(H.query);
ta=await this._schedule(()=>R.normalizeQueryLike(ta,this.definitionExpression,this.spatialReference),Y);ta=await this._reschedule(()=>L.validateQuery(ta,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);(U=!a.equals(da.spatialReference,this.spatialReference))&&await N.checkProjectionSupport(da.spatialReference,this.spatialReference);var pa="number"===typeof la?la:la.x,va="number"===typeof la?la:la.y;pa={xmin:da.x-
pa,xmax:da.x+pa,ymin:da.y-va,ymax:da.y+va,spatialReference:da.spatialReference};pa=U?N.project(pa,this.spatialReference):pa;if(!pa)return{candidates:[]};va=(await p.normalizeCentralMeridian(r.fromJSON(da),null,{signal:Y}))[0];const wa=(await p.normalizeCentralMeridian(r.fromJSON(pa),null,{signal:Y}))[0];if(null==va||null==wa)return{candidates:[]};const Da=new K.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(wa.toJSON())),Y),ta,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Da),Y);await this._reschedule(()=>this._executeTimeQuery(Da),Y);await this._reschedule(()=>this._executeAttributesQuery(Da),Y);await this._reschedule(()=>this._executeGeometryQueryForSnapping(Da,Y),Y);va=va.toJSON();va=U?N.project(va,this.spatialReference):va;return Da.createSnappingResponse({...H,point:va,distance:U?Math.max(pa.xmax-pa.xmin,pa.ymax-pa.ymin)/2:la},da.spatialReference)}async executeQueryForLatestObservations(H,U){U=q.signalFromSignalOrOptions(U);if(!this.timeInfo?.trackIdField)throw new A("unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:H,timeInfo:this.timeInfo});try{const Y=await this._executeQuery(H,{},U);await this._reschedule(()=>this._filterLatest(Y),U);return Y.createQueryResponse()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return(new K.QueryEngineResult([],H,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(H={},U,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(H,
{field:da,normalizationField:la,valueExpression:na},Y)).createSummaryStatisticsResponse(U)}async executeQueryForUniqueValues(H={},U,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,field2:la,field3:na,valueExpression:ua}=U;return(await this._executeQueryForStatistics(H,{field:da,field2:la,field3:na,valueExpression:ua},Y)).createUniqueValuesResponse(U)}async executeQueryForClassBreaks(H={},U,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(H,
{field:da,normalizationField:la,valueExpression:na},Y)).createClassBreaksResponse(U)}async executeQueryForHistogram(H={},U,Y){Y=q.signalFromSignalOrOptions(Y);const {field:da,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(H,{field:da,normalizationField:la,valueExpression:na},Y)).createHistogramResponse(U)}async fetchRecomputedExtents(H){H=q.signalFromSignalOrOptions(H);this._timeExtentPromise||(this._timeExtentPromise=T.getTimeExtent(this.timeInfo,this.featureStore));
const [U,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);q.throwIfAborted(H);return{fullExtent:U,timeExtent:Y}}async _getBounds(H,U,Y){const da=t.set(t.create(),t.negativeInfinity);await this.featureStore.forEachBounds(H,la=>t.expandWithAABB(da,la));H={xmin:da[0],ymin:da[1],xmax:da[3],ymax:da[4],spatialReference:D.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(da[2])&&isFinite(da[5])&&(H.zmin=da[2],H.zmax=da[5]);U=N.project(H,U,Y);U.spatialReference=D.cleanFromGeometryEngine(Y);
0===U.xmax-U.xmin&&(Y=d.getMetersPerUnitForSR(U.spatialReference),U.xmin-=Y,U.xmax+=Y);0===U.ymax-U.ymin&&(Y=d.getMetersPerUnitForSR(U.spatialReference),U.ymin-=Y,U.ymax+=Y);this.hasZ&&null!=U.zmin&&null!=U.zmax&&0===U.zmax-U.zmin&&(Y=d.getMetersPerUnitForSR(U.spatialReference),U.zmin-=Y,U.zmax+=Y);return U}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):
this._getAllFeatures().then(H=>this._getBounds(H,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(H,U){return null!=this._frameTask?this._frameTask.schedule(H,U):H(m.noBudget)}async _reschedule(H,U){return null!=this._frameTask?this._frameTask.reschedule(H,U):H(m.noBudget)}async _getAllFeaturesQueryEngineResult(H){return new K.QueryEngineResult(await this._getAllFeatures(),H,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=
(async()=>{await this.featureStore.forEach(da=>Y.push(da))})().then(()=>Y)}const H=this._allFeaturesPromise,U=await H;return H===this._allFeaturesPromise?U.slice():this._getAllFeatures()}async _executeQuery(H,U,Y){H=G.clone(H);H=await this._schedule(()=>R.normalizeQuery(H,this.definitionExpression,this.spatialReference),Y);H=await this._reschedule(()=>L.validateQuery(H,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),
Y);H={...H,...U};const da=await this._reschedule(()=>this._executeSceneFilterQuery(H,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(H,da,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}async _executeSceneFilterQuery(H,U){if(null==H.sceneFilter)return null;const {outSR:Y,
returnGeometry:da,returnCentroid:la}=H;var na=this.featureStore.featureSpatialReference,ua=H.sceneFilter.geometry;const ta=null==na||a.equals(na,ua.spatialReference)?ua:N.project(ua,na);if(!ta)return null;na=da||la;na=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&na?async Da=>this._project(Da,Y):Da=>Da;const pa=this.featureAdapter;ua=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ta)),U);if("disjoint"===H.sceneFilter.spatialRelationship){if(!ua.length)return null;const Da=
new Set;for(var va of ua)Da.add(pa.getObjectId(va));const Ia=await this._reschedule(()=>this._getAllFeatures(),U);va=await this._reschedule(async()=>{const Ra=await S.getSpatialQueryOperator("esriSpatialRelDisjoint",ta,this.geometryType,this.hasZ,this.hasM),Na=await this._runSpatialFilter(Ia,Sa=>!Da.has(pa.getObjectId(Sa))||Ra(pa.getGeometry(Sa)),U);return new K.QueryEngineResult(Na,H,this)},U);return na(va)}if(!ua.length)return new K.QueryEngineResult([],H,this);if(this._canExecuteSinglePass(ta,
H))return na(new K.QueryEngineResult(ua,H,this));const wa=await S.getSpatialQueryOperator("esriSpatialRelContains",ta,this.geometryType,this.hasZ,this.hasM);va=await this._runSpatialFilter(ua,Da=>wa(pa.getGeometry(Da)),U);return na(new K.QueryEngineResult(va,H,this))}async _executeGeometryQuery(H,U,Y){if(null!=U&&0===U.items.length)return U;H=null!=U?U.query:H;const {geometry:da,outSR:la,spatialRel:na,returnGeometry:ua,returnCentroid:ta}=H;var pa=this.featureStore.featureSpatialReference;const va=
!da||null==pa||a.equals(pa,da.spatialReference)?da:N.project(da,pa),wa=ua||ta,Da=a.isValid(la)&&!a.equals(this.spatialReference,la),Ia=this._geometryQueryCache&&null==U?Da&&wa?JSON.stringify({originalFilterGeometry:da,spatialRelationship:na,outSpatialReference:la}):JSON.stringify({originalFilterGeometry:da,spatialRelationship:na}):null;pa=Ia?this._geometryQueryCache.get(Ia):null;if(null!=pa)return new K.QueryEngineResult(pa,H,this);pa=async h=>{Da&&wa&&await this._project(h,la);Ia&&this._geometryQueryCache.put(Ia,
h.items,h.items.length+1);return h};if(!va)return pa(null!=U?U:await this._getAllFeaturesQueryEngineResult(H));const Ra=this.featureAdapter;let Na=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(da)),Y);if("esriSpatialRelDisjoint"===na){if(!Na.length)return pa(null!=U?U:await this._getAllFeaturesQueryEngineResult(H));const h=new Set;for(var Sa of Na)h.add(Ra.getObjectId(Sa));const F=null!=U?U.items:await this._reschedule(()=>this._getAllFeatures(),Y);Sa=await this._reschedule(async()=>
{const X=await S.getSpatialQueryOperator(na,va,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(F,ha=>!h.has(Ra.getObjectId(ha))||X(Ra.getGeometry(ha)),Y);return new K.QueryEngineResult(aa,H,this)},Y);return pa(Sa)}if(null!=U){const h=new f.PositionHint;Na=Na.filter(F=>0<=f.indexOf(U.items,F,U.items.length,h))}if(!Na.length)return pa=new K.QueryEngineResult([],H,this),Ia&&this._geometryQueryCache.put(Ia,pa.items,1),pa;if(this._canExecuteSinglePass(va,H))return pa(new K.QueryEngineResult(Na,
H,this));const Va=await S.getSpatialQueryOperator(na,va,this.geometryType,this.hasZ,this.hasM);Sa=await this._runSpatialFilter(Na,h=>Va(Ra.getGeometry(h)),Y);return pa(new K.QueryEngineResult(Sa,H,this))}async _executeGeometryQueryForSnapping(H,U){const {query:Y}=H,{spatialRel:da}=Y;if(H?.items?.length&&Y.geometry&&da){var la=await S.getSpatialQueryOperator(da,Y.geometry,this.geometryType,this.hasZ,this.hasM);U=await this._runSpatialFilter(H.items,na=>la(na.geometry),U);H.items=U}}_executeAggregateIdsQuery(H){if(0!==
H.items.length&&H.query.aggregateIds?.length&&null!=this.aggregateAdapter){var U=new Set;for(const da of H.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(da).forEach(la=>U.add(la));var Y=this.featureAdapter.getObjectId;H.items=H.items.filter(da=>U.has(Y(da)))}}_executeObjectIdsQuery(H){if(0!==H.items.length&&H.query.objectIds?.length){var U=new Set(H.query.objectIds),Y=this.featureAdapter.getObjectId;H.items=H.items.filter(da=>U.has(Y(da)))}}_executeTimeQuery(H){if(0!==H.items.length){var U=
T.getTimeOperator(this.timeInfo,H.query.timeExtent,this.featureAdapter);null!=U&&(H.items=H.items.filter(U))}}_executeAttributesQuery(H){if(0!==H.items.length){var U=n.getWhereClause(H.query.where,this.fieldsIndex);if(U){if(!U.isStandardized)throw new TypeError("Where clause is not standardized");H.items=H.items.filter(Y=>U.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(H,U,Y){if(!U)return H;if(null==this._frameTask)return H.filter(ua=>U(ua));let da=0;const la=[],na=async ua=>{for(;da<
H.length;){const ta=H[da++];U(ta)&&(la.push(ta),ua.madeProgress());ua.done&&await this._reschedule(pa=>na(pa),Y)}};return this._reschedule(ua=>na(ua),Y).then(()=>la)}_filterLatest(H){const {trackIdField:U,startTimeField:Y,endTimeField:da}=this.timeInfo,la=da||Y,na=new Map,ua=this.featureAdapter.getAttribute;for(const ta of H.items){const pa=ua(ta,U),va=ua(ta,la),wa=na.get(pa);(!wa||va>ua(wa,la))&&na.set(pa,ta)}H.items=Array.from(na.values())}_canExecuteSinglePass(H,U){({spatialRel:U}=U);return S.canQueryWithRBush(H)&&
("esriSpatialRelEnvelopeIntersects"===U||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===U||"esriSpatialRelContains"===U))}async _project(H,U){if(!U||a.equals(this.spatialReference,U))return H;const Y=this.featureAdapter;let da=void 0;try{const la=await this._getFullExtent();da=v.getTransformation(this.spatialReference,U,la)}catch{}U=await N.projectMany(H.items.map(la=>D.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(la))),this.spatialReference,U,da);H.items=
U.map((la,na)=>Y.cloneWithGeometry(H.items[na],l.convertFromGeometry(la,this.hasZ,this.hasM)));return H}_getQueryBBoxes(H){if(S.canQueryWithRBush(H)){if(r.isExtent(H))return[w.fromValues(Math.min(H.xmin,H.xmax),Math.min(H.ymin,H.ymax),Math.max(H.xmin,H.xmax),Math.max(H.ymin,H.ymax))];if(r.isPolygon(H))return H.rings.map(U=>w.fromValues(Math.min(U[0][0],U[2][0]),Math.min(U[0][1],U[2][1]),Math.max(U[0][0],U[2][0]),Math.max(U[0][1],U[2][1])))}return[J.getBoundsXY(w.create(),H)]}async _searchFeatures(H){const U=
new Set;await Promise.all(H.map(Y=>this.featureStore.forEachInBounds(Y,da=>U.add(da))));H=Array.from(U.values());U.clear();return H}async _executeQueryForStatistics(H,U,Y){H=G.clone(H);try{H=await this._schedule(()=>R.normalizeQuery(H,this.definitionExpression,this.spatialReference),Y);H=await this._reschedule(()=>L.validateStatisticsQuery(H,U,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const da=await this._reschedule(()=>
this._executeSceneFilterQuery(H,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(H,da,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}catch(da){if(da!==R.queryEngineEmptyResult)throw da;return new K.QueryEngineResult([],H,this)}}}c.Feature=B;c.QueryEngine=O;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(c,f){c.RemoveMode=void 0;(function(e){e[e.ALL=0]="ALL";e[e.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));class A{constructor(e,q,d){this.name=e;this._storage=q;this.id=`${G++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);d&&(this._storage.registerRemoveFunc(this.id,d),this._removeFunc=!0)}destroy(){this._storage.clear(this);
this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(e){return this._storage.getSize(this,e)}resetHitRate(){this._hit=this._miss=0}put(e,q,d,v=0){this._storage.put(this,e,q,d,v)}pop(e){e=this._storage.pop(this,e);void 0===e?++this._miss:++this._hit;return e}get(e){e=this._storage.get(this,e);void 0===e?++this._miss:++this._hit;return e}peek(e){return this._storage.peek(this,
e)}updateSize(e,q,d){this._storage.updateSize(this,e,q,d)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class y{get size(){return this._size}constructor(e=10485760){this._maxSize=e;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new f;this._users=new f}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,
q){this._removeFuncs.push([e,q])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(q=>q[0]!==e)}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1);this._checkSize()}getSize(e,q){return this._db.get(e.id+q)?.size??0}put(e,q,d,v,t){q=e.id+q;const w=this._db.get(q);w&&(this._size-=w.size,e.size-=w.size,this._db.delete(q),w.entry!==d&&this._notifyRemove(q,w.entry,w.size,c.RemoveMode.ALL));v>this._maxSize?this._notifyRemove(q,d,v,c.RemoveMode.ALL):void 0===d?console.warn("Refusing to cache undefined entry "):
!v||0>v?(console.warn(`Refusing to cache entry with size ${v} for key ${q}`),this._notifyRemove(q,d,0,c.RemoveMode.ALL)):(this._db.set(q,new C(d,v,1+Math.max(t,-4)- -3)),this._size+=v,e.size+=v,this._checkSize())}updateSize(e,q,d,v){q=e.id+q;const t=this._db.get(q);if(t&&t.entry===d){this._size-=t.size;for(e.size-=t.size;v>this._maxSize;)if(v=this._notifyRemove(q,d,v,c.RemoveMode.SOME),!(null!=v&&0<v)){this._db.delete(q);return}t.size=v;this._size+=v;e.size+=v;this._checkSize()}}pop(e,q){q=e.id+q;
const d=this._db.get(q);if(d)return this._size-=d.size,e.size-=d.size,this._db.delete(q),++this._hit,d.entry;++this._miss}get(e,q){q=e.id+q;e=this._db.get(q);if(void 0===e)++this._miss;else return this._db.delete(q),e.lives=e.lifetime,this._db.set(q,e),++this._hit,e.entry}peek(e,q){(e=this._db.get(e.id+q))?++this._hit:++this._miss;return e?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},q={},d=[];this._db.forEach((w,J)=>{const r=w.lifetime;d[r]=(d[r]||0)+w.size;this._users.forAll(p=>{const {id:a,name:l}=p;J.startsWith(a)&&(q[l]=(q[l]||0)+w.size)})});const v={};this._users.forAll(w=>{const J=w.name;"hitRate"in w&&"number"===typeof w.hitRate&&!isNaN(w.hitRate)&&0<w.hitRate?(q[J]=q[J]||0,v[J]=Math.round(100*w.hitRate)+"%"):v[J]="0%"});var t=Object.keys(q);t.sort((w,J)=>q[J]-q[w]);t.forEach(w=>e[w]=Math.round(q[w]/2**20)+"MB / "+v[w]);for(t=d.length-
1;0<=t;--t){const w=d[t];w&&(e["Priority "+(t+-3-1)]=Math.round(w/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0;this._users.forAll(e=>e.resetHitRate())}clear(e){const q=e.id;this._db.forEach((d,v)=>{v.startsWith(q)&&(this._size-=d.size,this._db.delete(v),this._notifyRemove(v,d.entry,d.size,c.RemoveMode.ALL))});e.size=0}clearAll(){this._db.forEach((e,q)=>this._notifyRemove(q,e.entry,e.size,c.RemoveMode.ALL));this._users.forAll(e=>e.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(e,q,d,v){let t;this._removeFuncs.some(w=>e.startsWith(w[0])?(w=w[1](q,v,d),"number"===typeof w&&(t=w),!0):!1);return t}_checkSize(){this._users.forAll(e=>this._checkSizeLimits(e));this._checkSizeLimits()}_checkSizeLimits(e){const q=e??this;if(!(0>q.maxSize||q.size<=q.maxSize)){for(var d=e?.id,v=!0;v;){v=!1;for(const [t,w]of this._db)if(0===w.lifetime&&(!d||t.startsWith(d))){this._purgeItem(t,w,e);if(q.size<=.9*q.maxSize)return;v||=this._db.has(t)}}for(const [t,
w]of this._db)if(!d||t.startsWith(d))if(this._purgeItem(t,w,e),q.size<=.9*q.maxSize)break}}_purgeItem(e,q,d=this._users.find(v=>e.startsWith(v.id))){this._db.delete(e);if(1>=q.lives){this._size-=q.size;d&&(d.size-=q.size);const v=this._notifyRemove(e,q.entry,q.size,c.RemoveMode.SOME);null!=v&&0<v&&(this._size+=v,d&&(d.size+=v),q.lives=q.lifetime,q.size=v,this._db.set(e,q))}else--q.lives,this._db.set(e,q)}}let G=0;class C{constructor(e,q,d){this.entry=e;this.size=q;this.lives=this.lifetime=d}}c.MemCache=
A;c.MemCacheStorage=y;c.MinPriority=-3;c.NoPriority=-4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(c,f,A,y,G,C,e,q,d,v,t){function w(D){const N=[];let g=0,K=0;for(let R=0;R<D.length;R++){const L=
D[R];let S=null;for(let T=0;T<L.length;T++)S=L[T],N.push(S),0===T?K=g=S[0]:(g=Math.min(g,S[0]),K=Math.max(K,S[0]));S&&N.push([(g+K)/2,0])}return N}function J(D,N){if(!(D instanceof C||D instanceof G))throw n().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new A("straightLineDensify: the input geometry is neither polyline nor polygon");var g=e.getGeometryParts(D);const K=[];for(const L of g){g=[];K.push(g);g.push([L[0][0],L[0][1]]);for(let S=0;S<L.length-1;S++){const T=
L[S][0],Q=L[S][1],m=L[S+1][0],B=L[S+1][1];var R=Math.sqrt((m-T)*(m-T)+(B-Q)*(B-Q));const u=(B-Q)/R,x=(m-T)/R,O=R/N;if(1<O){for(let H=1;H<=O-1;H++){const U=H*N;g.push([x*U+T,u*U+Q])}R=(R+Math.floor(O-1)*N)/2;g.push([x*R+T,u*R+Q])}g.push([m,B])}}return"polygon"===D.type?new G({rings:K,spatialReference:D.spatialReference}):new C({paths:K,spatialReference:D.spatialReference})}function r(D,N,g){N&&(D=J(D,1E6),D=d.webMercatorToGeographic(D,!0));g&&(D=e.updatePolyGeometry(D,g));return D}function p(D,N,g){if(Array.isArray(D)){var K=
D[0];K>N?(g=e.offsetMagnitude(K,N),D[0]=K+-2*g*N):K<g&&(N=e.offsetMagnitude(K,g),D[0]=K+-2*N*g)}else K=D.x,K>N?(g=e.offsetMagnitude(K,N),D=D.clone().offset(-2*g*N,0)):K<g&&(N=e.offsetMagnitude(K,g),D=D.clone().offset(-2*N*g,0));return D}function a(D,N){let g=-1;for(let K=0;K<N.cutIndexes.length;K++){const R=N.cutIndexes[K],L=N.geometries[K],S=e.getGeometryParts(L);for(let T=0;T<S.length;T++){const Q=S[T];Q.some(m=>{if(180>m[0])return!0;m=0;for(var B=0;B<Q.length;B++){var u=Q[B][0];m=u>m?u:m}m=Number(m.toFixed(9));
m=-360*e.offsetMagnitude(m,180);for(B=0;B<Q.length;B++)u=L.getPoint(T,B),L.setPoint(T,B,u.clone().offset(m,0));return!0})}if(R===g)if("polygon"===D[0].type)for(const T of e.getGeometryParts(L))D[R]=D[R].addRing(T);else{if("polyline"===D[0].type)for(const T of e.getGeometryParts(L))D[R]=D[R].addPath(T)}else g=R,D[R]=L}return D}async function l(D,N,g){if(!Array.isArray(D))return l([D],N);N&&"string"!==typeof N&&n().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var K="string"===typeof N?N:N?.url??f.geometryServiceUrl;let R,L,S;let T=0;var Q=[];N=[];for(var m of D)if(null==m)N.push(m);else{if(!B){var B=m.spatialReference;var u=q.getInfo(B);var x=(R=B.isWebMercator)?102100:4326;L=e.cutParams[x].maxX;S=e.cutParams[x].minX;var O=e.cutParams[x].plus180Line;x=e.cutParams[x].minus180Line}if(u)if("mesh"===m.type)N.push(m);else if("point"===m.type)N.push(p(m.clone(),L,S));else if("multipoint"===m.type){var H=m.clone();H.points=H.points.map(U=>p(U,L,S));N.push(H)}else if("extent"===
m.type)H=m.clone()._normalize(!1,!1,u),N.push(H.rings?new G(H):H);else if(m.extent){H=m.extent;const U=2*e.offsetMagnitude(H.xmin,S)*L;let Y=0===U?m.clone():e.updatePolyGeometry(m.clone(),U);H.offset(U,0);H.intersects(O)&&H.xmax!==L?(T=H.xmax>T?H.xmax:T,Y=r(Y,R),Q.push(Y),N.push("cut")):H.intersects(x)&&H.xmin!==S?(T=2*H.xmax*L>T?2*H.xmax*L:T,Y=r(Y,R,360),Q.push(Y),N.push("cut")):N.push(Y)}else N.push(m.clone());else N.push(m)}B=e.offsetMagnitude(T,L);u=-90;O=B;for(m=new C;0<B;)x=-180+360*B,m.addPath([[x,
u],[x,-1*u]]),u*=-1,B--;if(0<Q.length&&0<O){B=await v.cut(K,Q,m,g);B=a(Q,B);u=[];Q=[];for(O=0;O<N.length;O++)m=N[O],"cut"!==m?Q.push(m):(m=B.shift(),x=D[O],null!=x&&"polygon"===x.type&&x.rings&&1<x.rings.length&&m.rings.length>=x.rings.length?(u.push(m),Q.push("simplify")):Q.push(R?d.geographicToWebMercator(m):m));if(!u.length)return Q;N=await t.simplify(K,u,g);D=[];for(g=0;g<Q.length;g++)K=Q[g],"simplify"!==K?D.push(K):D.push(R?d.geographicToWebMercator(N.shift()):N.shift());return D}D=[];for(g=
0;g<N.length;g++)K=N[g],"cut"!==K?D.push(K):(K=Q.shift(),D.push(!0===R?d.geographicToWebMercator(K):K));return D}const n=()=>y.getLogger("esri.geometry.support.normalizeUtils");c.getClosestDenormalizedXToReference=function(D,N,g){g=q.getInfo(g);if(null==g)return D;const [K,R]=g.valid;g=2*R;let L=0,S=0;N>R?L=Math.ceil(Math.abs(N-R)/g):N<K&&(L=-Math.ceil(Math.abs(N-K)/g));D>R?S=Math.ceil(Math.abs(D-R)/g):D<K&&(S=-Math.ceil(Math.abs(D-K)/g));D+=(L-S)*g;N=D-N;N>R?D-=g:N<K&&(D+=g);return D};c.getDenormalizedExtent=
function(D){if(!D)return null;const N=D.extent;if(!N)return null;var g=D.spatialReference&&q.getInfo(D.spatialReference);if(!g)return N;const [K,R]=g.valid;({width:g}=N);let {xmin:L,xmax:S}=N;[L,S]=[S,L];if("extent"===D.type||0===g||g<=R||g>2*R||L<K||S>R)return N;let T;switch(D.type){case "polygon":if(1<D.rings.length)T=w(D.rings);else return N;break;case "polyline":if(1<D.paths.length)T=w(D.paths);else return N;break;case "multipoint":T=D.points}D=N.clone();for(let Q=0;Q<T.length;Q++){let m=T[Q][0];
0>m?(m+=R,S=Math.max(m,S)):(m-=R,L=Math.min(m,L))}D.xmin=L;D.xmax=S;return D.width<g?(D.xmin-=R,D.xmax-=R,D):N};c.normalizeCentralMeridian=l;c.normalizeMapX=function(D,N){if(N=q.getInfo(N)){const [g,K]=N.valid;N=K-g;if(D<g)for(;D<g;)D+=N;if(D>K)for(;D>K;)D-=N}return D};c.straightLineDensify=J;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(c,f,A,y){function G(C){return y.isPolygon(C)?
C.rings:C.paths}f={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new f({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator}),minus180Line:new f({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:A.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new f({paths:[[[180,-180],[180,180]]],spatialReference:A.WGS84}),minus180Line:new f({paths:[[[-180,
-180],[-180,180]]],spatialReference:A.WGS84})}};c.cutParams=f;c.getGeometryParts=G;c.offsetMagnitude=function(C,e){return Math.ceil((C-e)/(2*e))};c.updatePolyGeometry=function(C,e){const q=G(C);for(const d of q)for(const v of d)v[0]+=e;return C};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),function(c,
f,A,y,G,C){c.cut=async function(e,q,d,v){e=C.parseUrl(e);const t=q[0].spatialReference;q={...v,responseType:"json",query:{...e.query,f:"json",sr:G.srToRESTValue(t),target:JSON.stringify({geometryType:y.getJsonType(q[0]),geometries:q}),cutter:JSON.stringify(d)}};q=await A(e.path+"/cut",q);const {cutIndexes:w,geometries:J=[]}=q.data;return{cutIndexes:w,geometries:J.map(r=>{r=y.fromJSON(r);r.spatialReference=t;return r})}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(c,f,A,y,G,C){function e(q,d,v){const t={};for(const J in q)if("declaredClass"!==J){var w=q[J];null!=w&&"function"!==typeof w&&(Array.isArray(w)?t[J]=w.map(r=>e({item:r},d,v).item):"object"===typeof w?w.toJSON?(w=w.toJSON(v?.[J]),t[J]=d?w:JSON.stringify(w)):t[J]=d?w:JSON.stringify(w):t[J]=w)}return t}c.asValidOptions=function(q,d){return d?{...d,query:{...(q??{}),...d.query}}:{query:q}};c.encode=e;c.getToken=function(q,d){return q?C.supportsApiKey(q)&&(d||f.apiKey)?d||f.apiKey:A.id?.findCredential(q)?.token:
null};c.parseUrl=function(q){return"string"===typeof q?G.urlToObject(q):y.clone(q)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(c,f,A,y,G,C){c.simplify=async function(e,q,d){const v="string"===typeof e?A.urlToObject(e):e;e=q[0].spatialReference;const t=y.getJsonType(q[0]);q={...d,
query:{...v.query,f:"json",sr:G.srToRESTValue(e),geometries:JSON.stringify(C.encodeGeometries(q))}};({data:q}=await f(v.path+"/simplify",q));return C.decodeGeometries(q.geometries,t,e)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,f){c.decodeGeometries=function(A,y,G){const C=f.getGeometryType(y);return A.map(e=>{e=C.fromJSON(e);e.spatialReference=G;return e})};c.encodeGeometries=
function(A){return{geometryType:f.getJsonType(A[0]),geometries:A.map(y=>y.toJSON())}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(c,f,A,y){function G(r,p,a={}){const l=C(p,r);if(!l)throw a=t.getError(p,r),new f("unsupported-query","invalid SQL expression",{expression:p,error:a});r=a.expressionName||"expression";
if(a.validateStandardized&&!l.isStandardized)throw new f("unsupported-query",`${r} is not standard`,{expression:p});if(a.validateAggregate&&!l.isAggregate)throw new f("unsupported-query",`${r} does not contain a valid aggregate function`,{expression:p});return l.fieldNames}function C(r,p){return r?t.get(r,p):null}function e(r){return/\((.*?)\)/.test(r)?r:r.split(" as ")[0]}function q(r,p,a,l={}){const n=new Map;d(n,r,p,l.allowedFieldTypes??J,a);if(n.size)throw new f("unsupported-query",`${l.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(n.values()),query:l.query});}function d(r,p,a,l,n){n=n.includes("*")?[...a,...n.filter(D=>"*"!==D)]:n;for(const D of n)if(p.get(D))v(r,p,a,l,D);else try{const N=e(D),g=G(p,N,{validateStandardized:!0});for(const K of g)v(r,p,a,l,K)}catch(N){r.set(D,{type:"expression-error",expression:D,error:N})}}function v(r,p,a,l,n){(p=p.get(n))?a.has(p.name)?"all"!==l&&!1===l?.has(p.type)&&r.set(n,{type:"invalid-type",fieldName:p.name,fieldType:y.kebabDict.fromJSON(p.type),
allowedFieldTypes:Array.from(l,D=>y.kebabDict.fromJSON(D))}):r.set(n,{type:"missing-field",fieldName:p.name}):r.set(n,{type:"invalid-field",fieldName:n})}const t=new A.WhereClauseCache(50,500);A=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const w=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),J=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...A,...w]);c.allDateAndTimeFieldTypes=w;c.getAliasFromFieldName=function(r){return r.split(" as ")[1]};c.getExpressionFromFieldName=e;c.getWhereClause=C;c.numericFieldTypes=A;c.validateFields=q;c.validateHaving=function(r,p,a,l,n){if(!a)return!0;const D=G(r,a,{validateAggregate:!0,expressionName:"having clause"});q(r,p,D,{expressionName:"having clause",query:n});if(!C(a,r)?.getExpressions().every(N=>{const {aggregateType:g,field:K}=N,R=r.get(K)?.name;return l.some(L=>
{const {onStatisticField:S,statisticType:T}=L;return r.get(S)?.name===R&&T.toLowerCase().trim()===g})}))throw new f("unsupported-query","expressions in having clause should also exist in outStatistics",{having:a});return!0};c.validateWhere=function(r,p,a,l){if(!a)return!0;a=G(r,a,{validateStandardized:!0,expressionName:"where clause"});q(r,p,a,{expressionName:"where clause",query:l});return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(c,f,A){class y{constructor(G,C){this._cache=new f.LRUCache(G);this._invalidCache=new f.LRUCache(C)}get(G,C){const e=`${C.uid}:${G}`,q=this._cache.get(e);if(q)return q;if(null!=this._invalidCache.get(e))return null;try{const d=A.WhereClause.create(G,C);this._cache.put(e,d);return d}catch(d){return this._invalidCache.put(e,d),null}}getError(G,C){return this._invalidCache.get(`${C.uid}:${G}`)??null}}c.WhereClauseCache=y;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(c,f){class A{constructor(y,G){this._storage=new f.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=y;this._storage.register(this);G&&this._storage.registerRemoveFunc("",G)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(y,G,C=1){this._storage.put(this,y,G,C,1)}pop(y){return this._storage.pop(this,y)}get(y){return this._storage.get(this,y)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(y){this._storage.maxSize=
y}resetHitRate(){}}c.LRUCache=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(c,f,A,y,G,C,e,q,d,v,t,w,J,r,p){function a(m){return Array.isArray(m)?
m:[m]}function l(m){return null!==m?!0!==m:null}function n(m,B){return null!=m&&null!=B?!0===m&&!0===B:!1===m||!1===B?!1:null}function D(m,B){return null!=m&&null!=B?!0===m||!0===B:!0===m||!0===B?!0:null}function N(m,B){if(null==m)return null;let u=!1;for(const x of B)if(null==x)u=null;else if(m===x){u=!0;break}return u}function g(m,B,u){if(null==m)return null;let x="",O=T.Normal;for(let H=0;H<B.length;H++){const U=B.charAt(H);switch(O){case T.Normal:U===u?O=T.Escaped:x="-[]/{}()*+?.\\^$|".includes(U)?
x+("\\"+U):"%"===U?x+".*":"_"===U?x+".":x+U;break;case T.Escaped:x="-[]/{}()*+?.\\^$|".includes(U)?x+("\\"+U):x+U,O=T.Normal}}return(new RegExp("^"+x+"$","m")).test(m)}function K(m,B,u,x){m=x.getAttribute(m,B);B=u?.get(B);return null==m||"esriFieldTypeDate"!==B?.type&&"date"!==B?.type?null==m||"esriFieldTypeDateOnly"!==B?.type&&"date-only"!==B?.type?null==m||"esriFieldTypeTimeOnly"!==B?.type&&"time-only"!==B?.type?null==m||"esriFieldTypeTimestampOffset"!==B?.type&&"timestamp-offset"!==B?.type?m:new t.SqlTimeStampOffset(m):
J.TimeOnly.fromReader(m):C.DateOnly.fromReader(m):d.convertToExecutingTimeZone(new Date(m),u?.getLuxonTimeZone(B.name)??p.FixedOffsetZone.utcInstance)}const R=new Set(["current_timestamp","current_date","current_time"]);class L{static makeBool(m){return!0===m}static featureValue(m,B,u,x){return K(m,B,u,x)}static equalsNull(m){return null===m}static applyLike(m,B,u){return g(m,B,u)}static ensureArray(m){return a(m)}static applyIn(m,B){return N(m,B)}static currentDate(m){return C.DateOnly.fromNow(m)}static makeSqlInterval(m,
B,u){return v.SqlInterval.createFromValueAndQualifier(m,B,u)}static convertInterval(m){return m instanceof v.SqlInterval?m.valueInMilliseconds():m}static currentTimestamp(m){return d.convertToExecutingTimeZone(new Date,m)}static compare(m,B,u,x){return q.sqlCompare(B,u,m)}static calculate(m,B,u,x){return e.sqlCalculateFunction(m,B,u,x)}static evaluateTime(m){return d.parseTime(m)}static evaluateTimestamp(m,B,u){return d.parseTimestamp(m,B,u)}static evaluateDate(m,B){return d.parseDate(m,B)}static evaluateFunction(m,
B,u){return w.evaluateFunction(m,B,u)}static lookup(m,B){m=B[m];return void 0===m?null:m}static between(m,B,u){return null==m||null==B[0]||null==B[1]?null:q.sqlCompare(m,B[0],"\x3e\x3d")&&q.sqlCompare(m,B[1],"\x3c\x3d")}static notbetween(m,B,u){return null==m||null==B[0]||null==B[1]?null:q.sqlCompare(m,B[0],"\x3c")||q.sqlCompare(m,B[1],"\x3e")}static ternaryNot(m){return l(m)}static ternaryAnd(m,B){return n(m,B)}static ternaryOr(m,B){return D(m,B)}}class S{constructor(m,B,u="UTC"){this.fieldsIndex=
B;this.timeZone=u;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=r.WhereGrammar.parse(m);const {isStandardized:x,isAggregate:O,referencedFieldNames:H}=this._extractExpressionInfo(B);this._referencedFieldNames=H;this.isStandardized=x;this.isAggregate=O}static convertValueToStorageFormat(m,B=null){if(null===B)return d.isDate(m)?m.getTime():d.isDateTime(m)?m.toMillis():d.isTimestampOffset(m)?m.toStorageFormat():d.isTimeOnly(m)?m.toStorageString():d.isDateOnly(m)?m.toStorageFormat():
m;switch(B){case "date":if(d.isDate(m))return m.getTime();if(d.isDateTime(m))return m.toMillis();if(d.isTimestampOffset(m))return m.toMilliseconds();if(d.isDateOnly(m))return m.toNumber();break;case "date-only":if(d.isDate(m))return C.DateOnly.fromDateJS(m).toString();if(d.isTimestampOffset(m))return C.DateOnly.fromSqlTimeStampOffset(m).toString();if(d.isDateTime(m))return C.DateOnly.fromDateTime(m).toString();break;case "time-only":if(d.isDate(m))return J.TimeOnly.fromDateJS(m).toStorageString();
if(d.isDateTime(m))return J.TimeOnly.fromDateTime(m).toStorageString();if(d.isTimestampOffset(m))return J.TimeOnly.fromSqlTimeStampOffset(m).toStorageString();if(d.isTimeOnly(m))return m.toStorageString();break;case "timestamp-offset":if(d.isDate(m))return t.SqlTimeStampOffset.fromJSDate(m).toStorageFormat();if(d.isDateTime(m))return t.SqlTimeStampOffset.fromDateTime(m).toStorageFormat();if(d.isTimestampOffset(m))return m.toStorageFormat()}return m}static create(m,B,u="UTC"){return new S(m,B,u)}get fieldNames(){return this._referencedFieldNames}testSet(m,
B=Q){return!!this._evaluateNode(this.parseTree,null,B,m)}calculateValue(m,B=Q){m=this._evaluateNode(this.parseTree,m,B,null);return m instanceof v.SqlInterval?m.valueInMilliseconds()/864E5:m}calculateValueCompiled(m,B=Q){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(m,this.parameters,B,this.fieldsIndex,this.timeZone);if(y("esri-csp-restrictions"))return this.calculateValue(m,B);this._compileMe();return this.parseTree._compiledVersion(m,this.parameters,B,this.fieldsIndex,
this.timeZone)}testFeature(m,B=Q){return!!this._evaluateNode(this.parseTree,m,B,null)}testFeatureCompiled(m,B=Q){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(m,this.parameters,B,this.fieldsIndex,this.timeZone);if(y("esri-csp-restrictions"))return this.testFeature(m,B);this._compileMe();return!!this.parseTree._compiledVersion(m,this.parameters,B,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=
!1;this._visitAll(this.parseTree,m=>{"current-time"===m.type?this._hasDateFunctions=!0:"function"===m.type&&(this._hasDateFunctions=this._hasDateFunctions||R.has(m.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const m=new Set;this._visitAll(this.parseTree,B=>{"function"===B.type&&m.add(B.name.toLowerCase())});return Array.from(m)}getExpressions(){const m=new Map;this._visitAll(this.parseTree,B=>{if("function"===B.type){const u=B.name.toLowerCase();B=B.args.value[0];if("column-reference"===
B.type){B=B.column;const x=`${u}-${B}`;m.has(x)||m.set(x,{aggregateType:u,field:B})}}});return[...m.values()]}getVariables(){const m=new Set;this._visitAll(this.parseTree,B=>{"parameter"===B.type&&m.add(B.value.toLowerCase())});return Array.from(m)}_compileMe(){const m="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",m)).bind(L)}_extractExpressionInfo(m){const B=
[],u=new Set;let x=!0,O=!1;this._visitAll(this.parseTree,H=>{switch(H.type){case "column-reference":var U=m?.get(H.column);let Y;U?U=Y=U.name??"":(Y=H.column,U=Y.toLowerCase());u.has(U)||(u.add(U),B.push(Y));H.column=Y;break;case "function":const {name:da,args:la}=H;H=la.value.length;x&&=w.isStandardized(da,H);!1===O&&(O=G.isAggregate(da,H))}});return{referencedFieldNames:Array.from(B),isStandardized:x,isAggregate:O}}_visitAll(m,B){if(null!=m)switch(B(m),m.type){case "when-clause":this._visitAll(m.operand,
B);this._visitAll(m.value,B);break;case "case-expression":for(const u of m.clauses)this._visitAll(u,B);"simple"===m.format&&this._visitAll(m.operand,B);null!==m.else&&this._visitAll(m.else,B);break;case "expression-list":for(const u of m.value)this._visitAll(u,B);break;case "unary-expression":this._visitAll(m.expr,B);break;case "binary-expression":this._visitAll(m.left,B);this._visitAll(m.right,B);break;case "function":this._visitAll(m.args,B)}}evaluateNodeToJavaScript(m){switch(m.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(m.value)+", "+JSON.stringify(m.qualifier)+","+JSON.stringify(m.op)+")";case "case-expression":var B="";if("simple"===m.format){var u=this.evaluateNodeToJavaScript(m.operand);B="( ";for(let x=0;x<m.clauses.length;x++)B+=" (this.compare('\x3d',"+u+","+this.evaluateNodeToJavaScript(m.clauses[x].operand)+") ? ("+this.evaluateNodeToJavaScript(m.clauses[x].value)+") : "}else for(B="( ",u=0;u<m.clauses.length;u++)B+=" this.makeBool("+this.evaluateNodeToJavaScript(m.clauses[u].operand)+
")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(m.clauses[u].value)+") : ";B=null!==m.else?B+this.evaluateNodeToJavaScript(m.else):B+"null";return B+" )";case "parameter":return"this.lookup("+JSON.stringify(m.value.toLowerCase())+",lookups)";case "expression-list":B="[";for(u of m.value)"["!==B&&(B+=","),B+=this.evaluateNodeToJavaScript(u);return B+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(m.expr)+")";case "binary-expression":switch(m.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+" )";case "IS":if("null"!==m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+")";case "ISNOT":if("null"!==m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(m.left)+
")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(m.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(m.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(m.left)+
","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+","+JSON.stringify(m.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(m.operator)+
","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(m.operator)+","+this.evaluateNodeToJavaScript(m.left)+","+this.evaluateNodeToJavaScript(m.right)+", timeZone)"}throw new A.SqlError(A.SqlErrorCodes.UnsupportedOperator,{operator:m.operator});case "null":case "boolean":case "string":case "number":return JSON.stringify(m.value);case "time":return"this.evaluateTime(JSON.stringify(node.value))";
case "date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case "timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case "current-time":return"date"===m.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(m.column)+",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(m.name)+","+this.evaluateNodeToJavaScript(m.args)+", timeZone)"}throw new A.SqlError(A.SqlErrorCodes.UnsupportedSyntax,
{node:m.type});}_evaluateNode(m,B,u,x){switch(m.type){case "interval":return u=this._evaluateNode(m.value,B,u,x),v.SqlInterval.createFromValueAndQualifier(u,m.qualifier,m.op);case "case-expression":if("simple"===m.format){var O=this._evaluateNode(m.operand,B,u,x);for(var H=0;H<m.clauses.length;H++)if(q.sqlCompare(O,this._evaluateNode(m.clauses[H].operand,B,u,x),"\x3d",this.timeZone))return this._evaluateNode(m.clauses[H].value,B,u,x)}else for(O=0;O<m.clauses.length;O++)if(!0===this._evaluateNode(m.clauses[O].operand,
B,u,x))return this._evaluateNode(m.clauses[O].value,B,u,x);return null!==m.else?this._evaluateNode(m.else,B,u,x):null;case "parameter":return m=this.parameters[m.value.toLowerCase()],d.isDate(m)?p.DateTime.fromJSDate(m):m instanceof f.ArcadeDate?m.toDateTime():m;case "expression-list":O=[];for(var U of m.value)O.push(this._evaluateNode(U,B,u,x));return O;case "unary-expression":return l(this._evaluateNode(m.expr,B,u,x));case "binary-expression":switch(m.operator){case "AND":return n(this._evaluateNode(m.left,
B,u,x),this._evaluateNode(m.right,B,u,x));case "OR":return D(this._evaluateNode(m.left,B,u,x),this._evaluateNode(m.right,B,u,x));case "IS":if("null"!==m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(m.left,B,u,x);case "ISNOT":if("null"!==m.right.type)throw new A.SqlError(A.SqlErrorCodes.UnsupportedIsRhs);return null!==this._evaluateNode(m.left,B,u,x);case "IN":return O=a(this._evaluateNode(m.right,B,u,x)),N(this._evaluateNode(m.left,B,u,x),O);case "NOT IN":return O=
a(this._evaluateNode(m.right,B,u,x)),l(N(this._evaluateNode(m.left,B,u,x),O));case "BETWEEN":return O=this._evaluateNode(m.left,B,u,x),m=this._evaluateNode(m.right,B,u,x),null==O||null==m[0]||null==m[1]?null:q.sqlCompare(O,m[0],"\x3e\x3d",this.timeZone)&&q.sqlCompare(O,m[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return O=this._evaluateNode(m.left,B,u,x),m=this._evaluateNode(m.right,B,u,x),null==O||null==m[0]||null==m[1]?null:q.sqlCompare(O,m[0],"\x3c",this.timeZone)||q.sqlCompare(O,m[1],"\x3e",
this.timeZone);case "LIKE":return g(this._evaluateNode(m.left,B,u,x),this._evaluateNode(m.right,B,u,x),m.escape);case "NOT LIKE":return l(g(this._evaluateNode(m.left,B,u,x),this._evaluateNode(m.right,B,u,x),m.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return q.sqlCompare(this._evaluateNode(m.left,B,u,x),this._evaluateNode(m.right,B,u,x),m.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return e.sqlCalculateFunction(m.operator,
this._evaluateNode(m.left,B,u,x),this._evaluateNode(m.right,B,u,x),this.timeZone)}case "null":case "boolean":case "string":case "number":return m.value;case "date":return m.parsedValue??(m.parsedValue=d.parseDate(m.value,"unknown")),m.parsedValue;case "timestamp":return m.parsedValue??(m.parsedValue=d.parseTimestamp(m.value,"unknown")),m.parsedValue;case "time":return d.parseTime(m.value);case "current-time":return"date"===m.mode?C.DateOnly.fromNow(this.timeZone):d.convertToExecutingTimeZone(new Date,
this.timeZone);case "column-reference":return K(B,m.column,this.fieldsIndex,u);case "data-type":return m.value;case "function":if(this.isAggregate&&G.isAggregate(m.name,m.args.value.length)){B=[];for(O of m.args?.value||[]){U=[];for(H of x||[])U.push(this._evaluateNode(O,H,u,null));B.push(U)}return G.aggregateFunction(m.name,B)}u=this._evaluateNode(m.args,B,u,x);return w.evaluateFunction(m.name,u,this.timeZone)}throw new A.SqlError(A.SqlErrorCodes.UnsupportedSyntax,{node:m.type});}}var T;(function(m){m[m.Normal=
0]="Normal";m[m.Escaped=1]="Escaped"})(T||={});const Q={getAttribute(m,B){return(m&&"object"===typeof m.attributes?m.attributes:m)[B]}};c.WhereClause=S;c.defaultAttributeAdapter=Q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(c,f,A,y){function G(v,t,w){return v<t?v-t:v>w?v-w:0}function C(v,t=!0){if(v instanceof y.Zone)return v;if("system"===v.toLowerCase())return"system";
if("utc"===v.toLowerCase())return"UTC";if("unknown"===v.toLowerCase())return A.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(v)){const w=y.FixedOffsetZone.parseSpecifier("UTC"+(v.startsWith("+")||v.startsWith("-")?"":"+")+v);if(w)return w}v=y.IANAZone.create(v);if(!v.isValid){if(t)throw new q(c.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return v}c.ArcadeDateErrorCodes=void 0;(c.ArcadeDateErrorCodes||(c.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";
const e={[c.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class q extends Error{constructor(v,t){super(f.replace(e[v],t));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,q)}}class d{constructor(v){this._date=v;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(v=0,t=1,w=1,J=0,r=0,p=0,a=0,l){if(isNaN(v)||isNaN(t)||isNaN(w)||isNaN(J)||isNaN(r)||isNaN(p)||isNaN(a))return null;const n=
y.DateTime.local(v,t).daysInMonth;v=y.DateTime.fromObject({day:1>w?1:w>n?n:w,year:v,month:1>t?1:12<t?12:t,hour:0>J?0:23<J?23:J,minute:0>r?0:59<r?59:r,second:0>p?0:59<p?59:p,millisecond:0>a?0:999<a?999:a},{zone:C(l)});v=v.plus({months:G(t,1,12),days:G(w,1,n),hours:G(J,0,23),minutes:G(r,0,59),seconds:G(p,0,59),milliseconds:G(a,0,999)});return new d(v)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(v,t){t=
C(t);return v.isUnknownTimeZone||t===A.UnknownTimeZone.instance?d.fromParts(v.year,v.monthJS+1,v.day,v.hour,v.minute,v.second,v.millisecond,t):new d(v._date.setZone(t))}static dateJSToArcadeDate(v){return new d(y.DateTime.fromJSDate(v,{zone:"system"}))}static dateJSAndZoneToArcadeDate(v,t="system"){t=C(t);return new d(y.DateTime.fromJSDate(v,{zone:t}))}static unknownEpochToArcadeDate(v){return new d(y.DateTime.fromMillis(v,{zone:A.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(v){return new d(y.DateTime.fromMillis(v.getTime(),
{zone:A.UnknownTimeZone.instance}))}static epochToArcadeDate(v,t="system"){t=C(t);return new d(y.DateTime.fromMillis(v,{zone:t}))}static dateTimeToArcadeDate(v){return new d(v)}clone(){return new d(this._date)}changeTimeZone(v){v=C(v);return d.dateTimeToArcadeDate(this._date.setZone(v))}static dateTimeAndZoneToArcadeDate(v,t){t=C(t);return v.zone===A.UnknownTimeZone.instance||t===A.UnknownTimeZone.instance?d.fromParts(v.year,v.month,v.day,v.hour,v.minute,v.second,v.millisecond,t):new d(v.setZone(t))}static nowToArcadeDate(v){v=
C(v);return new d(y.DateTime.fromJSDate(new Date,{zone:v}))}static nowUTCToArcadeDate(){return new d(y.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===d.systemTimeZoneCanonicalName}equals(v){return this.isSystem&&v.isSystem?this.toNumber()===v.toNumber():this.isUnknownTimeZone!==v.isUnknownTimeZone?!1:this._date.equals(v._date)}get isUnknownTimeZone(){return this._date.zone===A.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let v=
this._date.weekday;6<v&&(v=0);return v}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const v=this.zone;return"fixed"===v.type?0===v.fixed?"UTC":v.formatOffset(0,"short"):v.name}stringify(){return JSON.stringify(this.toJSDate())}plus(v){return new d(this._date.plus(v))}diff(v,t="milliseconds"){return this._date.diff(v._date,t)[t]}toISODate(){return this._date.toISODate()}toISOString(v){return v?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(v,t){return this._date.toISOTime({suppressMilliseconds:v,
includeOffset:t&&!this.isUnknownTimeZone})}toFormat(v,t){this.isUnknownTimeZone&&(v=v.replaceAll("Z",""));return this._date.toFormat(v,t)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new d(this._date.toUTC())}toLocal(){return new d(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(v){if(!v)return null;
v=y.DateTime.fromISO(v,{setZone:!0});return new d(v)}}c.ArcadeDate=d;c.ArcadeDateError=q;c.arcadeDateErrorMessages=e;c.createDateTimeZone=C;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(c,f){function A(G){return G instanceof f.Zone?G===y.instance?!0:!1:"unknown"===G?.toString().toLowerCase()?!0:!1}class y{}y.instance=new f.IANAZone("Etc/UTC");c.UnknownTimeZone=y;c.adoptTimeZone=function(G,
C){return f.DateTime.fromObject({day:G.day,year:G.year,month:G.month,hour:G.hour,minute:G.minute,second:G.second,millisecond:G.millisecond},{zone:C})};c.isUnknownTimeZone=A;c.substituteUnknownTimezone=function(G){return A(G)?y.instance:G};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(c,f){c.SqlErrorCodes=void 0;(function(e){e.InvalidFunctionParameters="InvalidFunctionParameters";
e.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";e.UnsupportedSqlFunction="UnsupportedSqlFunction";e.UnsupportedOperator="UnsupportedOperator";e.UnsupportedSyntax="UnsupportedSyntax";e.UnsupportedIsRhs="UnsupportedIsRhs";e.UnsupportedIsLhs="UnsupportedIsLhs";e.InvalidDataType="InvalidDataType";e.CannotCastValue="CannotCastValue";e.FunctionNotRecognized="FunctionNotRecognized";e.InvalidTime="InvalidTime";e.InvalidParameterCount="InvalidParameterCount";e.InvalidTimeStamp="InvalidTimeStamp";
e.InvalidDate="InvalidDate";e.InvalidOperator="InvalidOperator";e.IllegalInterval="IllegalInterval";e.YearMonthIntervals="YearMonthIntervals";e.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";e.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||(c.SqlErrorCodes={}));const A={[c.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[c.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[c.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[c.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[c.SqlErrorCodes.IllegalInterval]:"Illegal interval",[c.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[c.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[c.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[c.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[c.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class y extends Error{constructor(e,q){super(f.replace(A[e],q));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,y)}}c.FeatureSetErrorCodes=void 0;(function(e){e.NeverReach="NeverReach";e.NotImplemented="NotImplemented";e.Cancelled="Cancelled";e.InvalidStatResponse="InvalidStatResponse";e.InvalidRequest="InvalidRequest";e.RequestFailed="RequestFailed";
e.MissingFeatures="MissingFeatures";e.AggregationFieldNotFound="AggregationFieldNotFound";e.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const G={[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class C extends Error{constructor(e,q){super(f.replace(G[e],q));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,C)}}c.FeatureSetError=
C;c.SqlError=y;c.featureSetErrorMessages=G;c.sqlErrorMessages=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(c,f,A,y,G,C){function e(t){if(null===t)return null;let w=0,J=0;for(let r=0;r<t.length;r++){const p=t[r];if(null!==p){if("number"!==typeof p)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);
J++;w+=p}}return 0===J?null:w/t.length}function q(t,w){if(null===t)return null;let J=null,r=null;for(const p of t)t=p,t=p instanceof A.DateOnly?p.toNumber():p instanceof G.TimeOnly?p.toNumber():p instanceof C.DateTime?p.toMillis():p instanceof y.SqlTimeStampOffset?p.toMilliseconds():p,null===J?(J=p,r=t):"max"===w&&null!==r&&null!==t&&r<=t?(J=p,r=t):"min"===w&&null!==r&&null!==t&&r>=t&&(J=p,r=t);return J}function d(t){if(null===t)return null;t=t.filter(r=>null!==r);if(0===t.length)return null;const w=
e(t);if(null===w)return null;let J=0;for(const r of t){if("number"!==typeof r)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);J+=(w-r)**2}return J/(t.length-1)}const v={min:{minParams:1,maxParams:1,evaluate:t=>q(t[0],"min")},max:{minParams:1,maxParams:1,evaluate:t=>q(t[0],"max")},avg:{minParams:1,maxParams:1,evaluate:t=>e(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>{t=t[0];if(null===t)t=null;else{var w=0;for(let J=0;J<t.length;J++){const r=t[J];if(null!==r){if("number"!==
typeof r)throw new f.SqlError(f.SqlErrorCodes.InvalidValueForAggregateFunction);w+=r}}t=w}return t}},stddev:{minParams:1,maxParams:1,evaluate:t=>{t=t[0];null===t?t=null:(t=d(t),t=null===t?null:Math.sqrt(t));return t}},count:{minParams:1,maxParams:1,evaluate:t=>null==t[0]?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>d(t[0])}};c.aggregateFunction=function(t,w){const J=v[t.toLowerCase()];if(null==J)throw new f.SqlError(f.SqlErrorCodes.FunctionNotRecognized);if(w.length<J.minParams||w.length>
J.maxParams)throw new f.SqlError(f.SqlErrorCodes.InvalidParameterCount,{name:t.toUpperCase()});return J.evaluate(w)};c.isAggregate=function(t,w){t=v[t.toLowerCase()];return null!=t&&w>=t.minParams&&w<=t.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(c,f,A,y){function G(e){e=e.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let q="";const d=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const v of e.match(d)||[])switch(v){case "D":q+="d";break;case "DD":q+="dd";break;case "DDD":q+="o";break;case "d":q+="c";break;case "ddd":q+="ccc";break;case "dddd":q+="cccc";break;case "M":q+="L";break;case "MM":q+="LL";break;case "MMM":q+="LLL";break;case "MMMM":q+="LLLL";break;case "YY":q+="yy";
break;case "Y":case "YYYY":q+="yyyy";break;case "Q":q+="q";break;case "X":case "x":q+=v;break;default:q=2<=v.length&&"["===v.slice(0,1)&&"]"===v.slice(-1)?q+`'${v.slice(1,-1)}'`:q+`'${v}'`}return q}class C{constructor(e,q,d){this._year=e;this._month=q;this._day=d;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(e){return e instanceof
C&&e.day===this.day&&e.month===this.month&&e.year===this.year}clone(){return new C(this._year,this._month,this._day)}toDateTime(e){return y.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:f.createDateTimeZone(e)})}toDateTimeLuxon(e){return y.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:f.createDateTimeZone(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(e=
null){if(null===e||""===e)return this.toString();e=G(e);if(!e)return"";const q=this.toDateTime("unknown");return f.ArcadeDate.dateTimeToArcadeDate(q).toFormat(e,{locale:A.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const e=this.toDateTime("unknown");return f.ArcadeDate.dateTimeToArcadeDate(e)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(e,q){return C.fromDateTime(this.toUTCDateTime().plus({[e]:q}))}toUTCDateTime(){return y.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(e,q){switch(q.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===q?this.toUTCDateTime().diff(e.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(e.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(e.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(e){e=y.DateTime.fromMillis(e,{zone:y.FixedOffsetZone.utcInstance});return e.isValid?C.fromParts(e.year,e.month,e.day):null}static fromSeconds(e){e=y.DateTime.fromSeconds(e,{zone:y.FixedOffsetZone.utcInstance});return e.isValid?C.fromParts(e.year,e.month,e.day):null}static fromReader(e){if(!e)return null;e=e.split("-");return 3!==e.length?null:new C(parseInt(e[0],10),parseInt(e[1],
10),parseInt(e[2],10))}static fromParts(e,q,d){e=new C(e,q,d);return!1===e.isValid?null:e}static fromDateJS(e){return C.fromParts(e.getFullYear(),e.getMonth()+1,e.getDay())}static fromDateTime(e){return C.fromParts(e.year,e.month,e.day)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,q=null){if(""===e||null===e)return null;var d=[];if(q)(q=G(q))&&d.push(q);else if(null===q||""===q)return e=y.DateTime.fromISO(e,{setZone:!0}),e.isValid?C.fromParts(e.year,
e.month,e.day):null;for(const v of d)if(d=y.DateTime.fromFormat(e,q??v),d.isValid)return new C(d.year,d.month,d.day);return null}static fromNow(e="system"){e=y.DateTime.fromJSDate(new Date).setZone(f.createDateTimeZone(e));return new C(e.year,e.month,e.day)}}c.DateOnly=C;c.standardizeDateOnlyFormat=G;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(c,f){function A(G){return Number.isNaN(G)||
0===G?G:Math.trunc(G)}class y{constructor(G){this._timeStampOffset=G;this._date=null}toDateTime(){this._date??(this._date=f.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return A(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return A(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return y.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(G){return new y(f.DateTime.fromJSDate(G).toISO({includeOffset:!0}))}static fromDateTime(G){return new y(G.toISO({includeOffset:!0}))}static fromParts(G,
C,e=0,q=0,d=0,v=0,t=0,w=!1,J=0,r=0){G=`${G.toString().padStart(4,"0")}-${C.toString().padStart(2,"0")}-${e.toString().padStart(2,"0")}`;C="";10>v&&(C="0");q=`${q.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${C+v.toString()}`;0!==t&&(q+="."+t.toString().padStart(3,"0"));t=`${w?"-":"+"}${J.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;return new y(G+"T"+q+t)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let G=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});G&&=G.replace(".000","");return G}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(G){G=this.toDateTime().plus(G);return y.fromDateTime(G)}}c.SqlTimeStampOffset=y;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(c,f,A,y){function G(e){if(!e)return"";const q=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let d="";for(const v of e.match(q)||
[])switch(v){case "SSS":d+=v;break;case "A":case "a":d+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":d+=v;break;default:d+=`'${v}'`}return d}class C{constructor(e,q,d,v){this._hour=e;this._minute=q;this._second=d;this._millisecond=v;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(e){return e instanceof C&&e.hour===
this.hour&&e.minute===this.minute&&e.second===this.second&&e.millisecond===this.millisecond}clone(){return new C(this.hour,this.minute,this.second,this.millisecond)}isValid(){return f.isInteger(this.hour)&&f.isInteger(this.minute)&&f.isInteger(this.second)&&f.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(e=null){return null===e||""===e?this.toString():(e=G(e))?y.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(e,{locale:A.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(e,q,d,v){e=new C(e,q,d,v);return e.isValid()?e:null}static fromReader(e){if(!e)return null;e=e.split(":");return 3!==e.length?null:new C(parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],
10),0)}static fromMilliseconds(e){return 864E5<e||0>e?null:new C(Math.floor(e/36E5%24),Math.floor(e/6E4%60),Math.floor(e/1E3%60),Math.floor(e%1E3))}static fromDateJS(e){return new C(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}static fromDateTime(e){return new C(e.hour,e.minute,e.second,e.millisecond)}static fromSqlTimeStampOffset(e){return this.fromDateTime(e.toDateTime())}static fromString(e,q=null){if(""===e||null===e)return null;const d=[];if(q)(q=G(q))&&d.push(q);else if(null===
q||""===q)d.push("HH:mm:ss"),d.push("HH:mm:ss.SSS"),d.push("hh:mm:ss a"),d.push("hh:mm:ss.SSS a"),d.push("HH:mm"),d.push("hh:mm a"),d.push("H:mm"),d.push("h:mm a"),d.push("H:mm:ss"),d.push("h:mm:ss a"),d.push("H:mm:ss.SSS"),d.push("h:mm:ss.SSS a");for(const v of d)if(q=y.DateTime.fromFormat(e,v),q.isValid)return new C(q.hour,q.minute,q.second,q.millisecond);return null}plus(e,q){switch(e){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return C.fromDateTime(this.toUTCDateTime().plus({[e]:q}))}return null}toUTCDateTime(){return y.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(e,q){switch(q.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(e.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===q?this.toUTCDateTime().diff(e.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(e.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(e.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(e.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(e.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(e.toUTCDateTime(),"milliseconds").milliseconds}}}c.TimeOnly=C;c.standardizeTimeFormat=G;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(c,f){c.cloneGeometry=function(A){if(null==A)return null;const y=A.clone();void 0!==A.cache._geVersion&&(y.cache._geVersion=A.cache._geVersion);return y};c.convertLinearUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};c.convertSquareUnitsToCode=
function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};c.isInteger=function(A){return"number"===typeof A&&isFinite(A)&&Math.floor(A)===A};c.sameGeomType=function(A,y){return A===y||"point"===A&&"esriGeometryPoint"===y||"polyline"===A&&"esriGeometryPolyline"===
y||"polygon"===A&&"esriGeometryPolygon"===y||"extent"===A&&"esriGeometryEnvelope"===y||"multipoint"===A&&"esriGeometryMultipoint"===y||"point"===y&&"esriGeometryPoint"===A||"polyline"===y&&"esriGeometryPolyline"===A||"polygon"===y&&"esriGeometryPolygon"===A||"extent"===y&&"esriGeometryEnvelope"===A||"multipoint"===y&&"esriGeometryMultipoint"===A?!0:!1};c.shapeExtent=function(A){if(null==A)return null;switch(A.type){case "polygon":case "multipoint":case "polyline":return A.extent;case "point":return new f({xmin:A.x,
ymin:A.y,xmax:A.x,ymax:A.y,spatialReference:A.spatialReference});case "extent":return A}return null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(c,f,A,y,G){function C(z,I,M){switch(M){case "+":return z+I;case "-":return z-I;case "*":return z*I;case "/":return z/I}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function e(z,I,M){switch(M){case "+":return I.plus({milliseconds:z.valueInMilliseconds()});case "-":return z.valueInMilliseconds()-I.toMillis()}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function q(z,I,M){switch(M){case "+":return I.plus("milliseconds",z.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function d(z,I,M){switch(M){case "+":return I.plus("milliseconds",z.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function v(z,
I,M){switch(M){case "+":return z.plus("milliseconds",I.valueInMilliseconds());case "-":return z.plus("milliseconds",-1*I.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function t(z,I,M){switch(M){case "+":return I.addMilliseconds(z.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function w(z,I,M){switch(M){case "+":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()+I.valueInMilliseconds());case "-":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()-
I.valueInMilliseconds());case "*":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()*I.valueInMilliseconds());case "/":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()/I.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function J(z,I,M){switch(M){case "+":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()+I);case "-":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()-I);case "*":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()*
I);case "/":return y.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()/I)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function r(z,I,M){switch(M){case "+":return y.SqlInterval.createFromMilliseconds(z+I.valueInMilliseconds());case "-":return y.SqlInterval.createFromMilliseconds(z-I.valueInMilliseconds());case "*":return y.SqlInterval.createFromMilliseconds(z*I.valueInMilliseconds());case "/":return y.SqlInterval.createFromMilliseconds(z/I.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function p(z,I,M){switch(M){case "+":return z.plus("milliseconds",I.valueInMilliseconds());case "-":return z.plus("milliseconds",-1*I.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function a(z,I,M){switch(M){case "+":return z.plus({milliseconds:I.valueInMilliseconds()});case "-":return z.minus({milliseconds:I.valueInMilliseconds()})}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function l(z,I,M){switch(M){case "+":return z.addMilliseconds(I.valueInMilliseconds());
case "-":return z.addMilliseconds(-1*I.valueInMilliseconds())}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function n(z,I,M){I*=864E5;switch(M){case "+":return z.plus({milliseconds:I});case "-":return z.minus({milliseconds:I})}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function D(z,I,M){I*=864E5;switch(M){case "+":return z.plus("milliseconds",I);case "-":return z.plus("milliseconds",-1*I)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function N(z,I,M){I*=864E5;switch(M){case "+":return z.plus("milliseconds",
I);case "-":return z.plus("milliseconds",-1*I)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function g(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function K(z,I,M){I*=864E5;switch(M){case "+":return z.addMilliseconds(I);case "-":return z.addMilliseconds(-1*I)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function R(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function L(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function S(z,
I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function T(z,I,M){I=parseFloat(I);if(isNaN(I))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);return C(z,I,M)}function Q(z,I,M){z=parseFloat(z);if(isNaN(z))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);return C(z,I,M)}function m(z,I,M){switch(M){case "+":return z+I}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function B(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function u(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function x(z,I,M){switch(M){case "-":return z.toDateTimeLuxon(I.zone).diff(I).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function O(z,I,M){switch(M){case "-":return z.toDateTimeLuxon(I.toDateTime().zone).diff(I.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function H(z,I,M){switch(M){case "-":return z.toDateTimeLuxon("UTC").diff(I.toDateTimeLuxon("UTC")).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function U(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function Y(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function da(z,I,M){switch(M){case "-":return z.toDateTime().diff(I.toDateTimeLuxon(z.toDateTime().zone)).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function la(z,I,M){switch(M){case "-":return z.toDateTime().diff(I).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function na(z,I,M){switch(M){case "-":return z.toDateTime().diff(I.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function ua(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ta(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function pa(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function va(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function wa(z,I,M){switch(M){case "-":return z.diff(I).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Da(z,I,M){switch(M){case "-":return z.diff(I.toDateTimeLuxon(z.zone)).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function Ia(z,I,M){switch(M){case "-":return z.diff(I.toDateTime()).as("days")}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Ra(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Na(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Sa(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function Va(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function h(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}function F(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function X(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function aa(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}function ha(z,I,M){throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}c.calculateDateOnlyAndDateOnly=H;c.calculateDateOnlyAndDateTime=x;c.calculateDateOnlyAndNumber=D;c.calculateDateOnlyAndSqlInterval=p;c.calculateDateOnlyAndString=Na;c.calculateDateOnlyAndTimeOnly=U;c.calculateDateOnlyAndTimestamp=
O;c.calculateDateTimeAndDateOnly=Da;c.calculateDateTimeAndDateTime=wa;c.calculateDateTimeAndNumber=n;c.calculateDateTimeAndSqlInterval=a;c.calculateDateTimeAndString=Va;c.calculateDateTimeAndTimeOnly=Ra;c.calculateDateTimeAndTimestamp=Ia;c.calculateNumberAndDateOnly=S;c.calculateNumberAndDateTime=g;c.calculateNumberAndNumber=C;c.calculateNumberAndSqlInterval=r;c.calculateNumberAndString=T;c.calculateNumberAndTimeOnly=L;c.calculateNumberAndTimestamp=R;c.calculateSqlIntervalAndDateOnly=d;c.calculateSqlIntervalAndDateTime=
e;c.calculateSqlIntervalAndNumber=J;c.calculateSqlIntervalAndSqlInterval=w;c.calculateSqlIntervalAndString=B;c.calculateSqlIntervalAndTimeOnly=q;c.calculateSqlIntervalAndTimestamp=t;c.calculateStringAndDateOnly=X;c.calculateStringAndDateTime=aa;c.calculateStringAndNumber=Q;c.calculateStringAndSqlInterval=u;c.calculateStringAndString=m;c.calculateStringAndTimeOnly=F;c.calculateStringAndTimestamp=ha;c.calculateTimeOnlyAndDateOnly=ta;c.calculateTimeOnlyAndDateTime=ua;c.calculateTimeOnlyAndNumber=N;c.calculateTimeOnlyAndSqlInterval=
v;c.calculateTimeOnlyAndString=Sa;c.calculateTimeOnlyAndTimeOnly=va;c.calculateTimeOnlyAndTimestamp=pa;c.calculateTimestampAndDateOnly=da;c.calculateTimestampAndDateTime=la;c.calculateTimestampAndNumber=K;c.calculateTimestampAndSqlInterval=l;c.calculateTimestampAndString=h;c.calculateTimestampAndTimeOnly=Y;c.calculateTimestampAndTimestamp=na;c.sqlCalculateFunction=function(z,I,M,W){if("||"===z)return G.evaluateFunction("concat",[I,M],W);if(null===I||null===M)return null;if(A.isNumber(I)){if(A.isNumber(M))return C(I,
M,z);if(A.isSqlInterval(M))return r(I,M,z);if(A.isTimeOnly(M))return L();if(A.isDateOnly(M))return S();if(A.isTimestampOffset(M))return R();if(A.isDateTime(M))return g();if(A.isString(M))return T(I,M,z)}else if(A.isDateOnly(I)){if(A.isNumber(M))return D(I,M,z);if(A.isSqlInterval(M))return p(I,M,z);if(A.isTimeOnly(M))return U();if(A.isDateOnly(M))return H(I,M,z);if(A.isTimestampOffset(M))return O(I,M,z);if(A.isDateTime(M))return x(I,M,z);if(A.isString(M))return Na()}else if(A.isTimeOnly(I)){if(A.isNumber(M))return N(I,
M,z);if(A.isSqlInterval(M))return v(I,M,z);if(A.isTimeOnly(M))return va();if(A.isDateOnly(M))return ta();if(A.isTimestampOffset(M))return pa();if(A.isDateTime(M))return ua();if(A.isString(M))return Sa()}else if(A.isSqlInterval(I)){if(A.isNumber(M))return J(I,M,z);if(A.isSqlInterval(M))return w(I,M,z);if(A.isTimeOnly(M))return q(I,M,z);if(A.isDateOnly(M))return d(I,M,z);if(A.isTimestampOffset(M))return t(I,M,z);if(A.isDateTime(M))return e(I,M,z);if(A.isString(M))return B()}else if(A.isDateTime(I)){if(A.isNumber(M))return n(I,
M,z);if(A.isSqlInterval(M))return a(I,M,z);if(A.isTimeOnly(M))return Ra();if(A.isDateOnly(M))return Da(I,M,z);if(A.isTimestampOffset(M))return Ia(I,M,z);if(A.isDateTime(M))return wa(I,M,z);if(A.isString(M))return Va()}else if(A.isTimestampOffset(I)){if(A.isNumber(M))return K(I,M,z);if(A.isSqlInterval(M))return l(I,M,z);if(A.isTimeOnly(M))return Y();if(A.isDateOnly(M))return da(I,M,z);if(A.isTimestampOffset(M))return na(I,M,z);if(A.isDateTime(M))return la(I,M,z);if(A.isString(M))return h()}else if(A.isString(I)){if(A.isNumber(M))return Q(I,
M,z);if(A.isSqlInterval(M))return u();if(A.isTimeOnly(M))return F();if(A.isDateOnly(M))return X();if(A.isTimestampOffset(M))return ha();if(A.isDateTime(M))return aa();if(A.isString(M))return m(I,M,z)}throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,f,A,y,G,C,e,q){function d(n,D,N){N=r.exec(n);if(null!==N){const [,g,K,R,L,S,T,Q]=N;n=q.DateTime.fromObject({year:parseInt(g,10),month:parseInt(K,10),day:parseInt(R,10),hour:parseInt(L,10),minute:parseInt(S,10),second:parseInt(T,10),millisecond:Q?parseInt(Q.replace(".",""),10):0},{zone:e.substituteUnknownTimezone(D)});if(!1===n.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return n}N=p.exec(n);if(null!==N){const [,g,K,R,L,S,T,Q,m,B,u]=N;n=G.SqlTimeStampOffset.fromParts(parseInt(g,
10),parseInt(K,10),parseInt(R,10),parseInt(L,10),parseInt(S,10),parseInt(T,10),Q?parseInt(Q.replace(".",""),10):0,"-"===m,parseInt(B,10),parseInt(u,10));if(!1===n.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return n}N=a.exec(n);if(null!==N){const [,g,K,R,L,S,T,Q,m]=N;n=G.SqlTimeStampOffset.fromParts(parseInt(g,10),parseInt(K,10),parseInt(R,10),parseInt(L,10),parseInt(S,10),0,0,"-"===T,parseInt(Q,10),parseInt(m,10));if(!1===n.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);
return n}N=l.exec(n);if(null!==N){const [,g,K,R,L,S]=N;n=q.DateTime.fromObject({year:parseInt(g,10),month:parseInt(K,10),day:parseInt(R,10),hour:parseInt(L,10),minute:parseInt(S,10),second:0},{zone:e.substituteUnknownTimezone(D)});if(!1===n.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return n}N=J.exec(n);if(null!==N){const [,g,K,R]=N;n=q.DateTime.fromObject({year:parseInt(g,10),month:parseInt(K,10),day:parseInt(R,10),hour:0,minute:0,second:0},{zone:e.substituteUnknownTimezone(D)});
if(!1===n.isValid)throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);return n}throw new f.SqlError(f.SqlErrorCodes.InvalidTimeStamp);}const v=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,t=/^(\d{1,2}):(\d{1,2})$/,w=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,J=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,r=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,
l=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;c.convertToExecutingTimeZone=function(n,D){if(D instanceof q.Zone)return D===e.UnknownTimeZone.instance?q.DateTime.fromMillis(n.getTime(),{zone:e.UnknownTimeZone.instance}):q.DateTime.fromJSDate(n,{zone:D});switch(D){case "system":case "local":case null:return q.DateTime.fromJSDate(n);default:return"unknown"===D?.toLowerCase()?q.DateTime.fromMillis(n.getTime(),{zone:e.UnknownTimeZone.instance}):q.DateTime.fromJSDate(n,{zone:D})}};c.isDate=function(n){return n instanceof
Date};c.isDateOnly=function(n){return n instanceof A.DateOnly};c.isDateTime=function(n){return n instanceof q.DateTime};c.isNumber=function(n){return"number"===typeof n};c.isSqlInterval=function(n){return n instanceof y.SqlInterval};c.isString=function(n){return"string"===typeof n||n instanceof String};c.isTimeOnly=function(n){return n instanceof C.TimeOnly};c.isTimestampOffset=function(n){return n instanceof G.SqlTimeStampOffset};c.parseDate=function(n,D){const N=J.exec(n);if(null===N)try{return d(n,
D)}catch{throw new f.SqlError(f.SqlErrorCodes.InvalidDate);}const [,g,K,R]=N;n=A.DateOnly.fromParts(parseInt(g,10),parseInt(K,10),parseInt(R,10));if(null===n)throw new f.SqlError(f.SqlErrorCodes.InvalidDate);return n};c.parseTime=function(n){let D=v.exec(n);if(null!==D){const [,N,g,K]=D;n=C.TimeOnly.fromParts(parseInt(N,10),parseInt(g,10),parseInt(K,10),0);if(null!==n)return n;throw new f.SqlError(f.SqlErrorCodes.InvalidTime);}D=t.exec(n);if(null!==D){const [,N,g]=D;n=C.TimeOnly.fromParts(parseInt(N,
10),parseInt(g,10),0,0);if(null!==n)return n;throw new f.SqlError(f.SqlErrorCodes.InvalidTime);}D=w.exec(n);if(null!==D){const [,N,g,K,R]=D;n=C.TimeOnly.fromParts(parseInt(N,10),parseInt(g,10),parseInt(K,10),parseInt(R,10));if(null!==n)return n}throw new f.SqlError(f.SqlErrorCodes.InvalidTime);};c.parseTimestamp=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(c,f){class A{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(y){if(null!==y.precision||null!==y.secondary)throw new f.SqlError(f.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(y,G){G.includes(".")?(G=G.split("."),y.second=parseFloat(G[0]),y.millis=parseInt(G[1],10)):y.second=parseFloat(G)}static createFromMilliseconds(y){const G=new A;G.second=y/1E3;return G}static createFromValueAndQualifier(y,G,C){let e=null;const q=new A;q.op="-"===
C?"-":"+";if("interval-period"===G.type){A._fixDefaults(G);C=RegExp("^[0-9]{1,}$");if("year"===G.period||"month"===G.period)throw new f.SqlError(f.SqlErrorCodes.YearMonthIntervals);if("second"===G.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(y))A._parseSecondsComponent(q,y);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);else if(C.test(y))q[G.period]=parseFloat(y);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}else{A._fixDefaults(G.start);A._fixDefaults(G.end);if("year"===
G.start.period||"month"===G.start.period||"year"===G.end.period||"month"===G.end.period)throw new f.SqlError(f.SqlErrorCodes.YearMonthIntervals);switch(G.start.period){case "day":switch(G.end.period){case "hour":e=RegExp("^[0-9]{1,} [0-9]{1,}$");if(e.test(y))q[G.start.period]=parseFloat(y.split(" ")[0]),q[G.end.period]=parseFloat(y.split(" ")[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "minute":e=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(e.test(y))q[G.start.period]=
parseFloat(y.split(" ")[0]),y=y.split(" ")[1].split(":"),q.hour=parseFloat(y[0]),q.minute=parseFloat(y[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "second":e=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(y))q[G.start.period]=parseFloat(y.split(" ")[0]),y=y.split(" ")[1].split(":"),q.hour=parseFloat(y[0]),q.minute=parseFloat(y[1]),A._parseSecondsComponent(q,y[2]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(G.end.period){case "minute":e=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(e.test(y))q.hour=parseFloat(y.split(":")[0]),q.minute=parseFloat(y.split(":")[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;case "second":e=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(y))y=y.split(":"),q.hour=parseFloat(y[0]),q.minute=parseFloat(y[1]),A._parseSecondsComponent(q,y[2]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(G.end.period){case "second":e=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(e.test(y))y=y.split(":"),q.minute=parseFloat(y[0]),A._parseSecondsComponent(q,y[1]);else throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}break;default:throw new f.SqlError(f.SqlErrorCodes.IllegalInterval);}}return q}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}c.SqlInterval=A;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(c,f,A,y,G,C,e,q){function d(a){return"string"===typeof a||a instanceof String}function v(a){return C.isDate(a)||C.isDateOnly(a)||
C.isDateTime(a)||C.isTimeOnly(a)||C.isTimestampOffset(a)?!1:!0}function t(a){return C.isDateOnly(a)||C.isTimeOnly(a)?a.toString():C.isTimestampOffset(a)?a.toSQLValue():C.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):C.isDate(a)?t(q.DateTime.fromJSDate(a)):a.toString()}function w(a){if(C.isDate(a))return y.DateOnly.fromDateJS(a);if(C.isDateTime(a))return y.DateOnly.fromParts(a.year,a.month,a.day);if(C.isDateOnly(a))return a;if(C.isTimeOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
if(C.isTimestampOffset(a)&&null===y.DateOnly.fromParts(a.year,a.month,a.day))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(d(a)&&(a=y.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}function J(a,l,n){if(C.isDate(a))return C.convertToExecutingTimeZone(a,l);if(C.isDateTime(a))return a;if(C.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(C.isTimeOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(C.isTimestampOffset(a))return a;
if(d(a))return C.parseTimestamp(a,"unknown",n);throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}function r(a){if(C.isDate(a))return e.TimeOnly.fromDateJS(a);if(C.isDateTime(a))return e.TimeOnly.fromDateTime(a);if(C.isDateOnly(a))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);if(C.isTimeOnly(a))return a;if(C.isTimestampOffset(a))return e.TimeOnly.fromSqlTimeStampOffset(a);if(d(a))return C.parseTime(a);throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);}const p={extract:{minParams:2,
maxParams:2,evaluate:([a,l])=>{if(null==l)return null;if(C.isDate(l))switch(a.toUpperCase()){case "SECOND":return l.getSeconds();case "MINUTE":return l.getMinutes();case "HOUR":return l.getHours();case "DAY":return l.getDate();case "MONTH":return l.getMonth()+1;case "YEAR":return l.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(C.isDateTime(l))switch(a.toUpperCase()){case "SECOND":return l.second;case "MINUTE":return l.minute;case "HOUR":return l.hour;case "DAY":return l.day;
case "MONTH":return l.month;case "YEAR":return l.year}else if(C.isDateOnly(l))switch(a.toUpperCase()){case "DAY":return l.day;case "MONTH":return l.month;case "YEAR":return l.year}else if(C.isTimeOnly(l))switch(a.toUpperCase()){case "SECOND":return l.second;case "MINUTE":return l.minute;case "HOUR":return l.hour}else if(C.isTimestampOffset(l))switch(a.toUpperCase()){case "SECOND":return l.second;case "MINUTE":return l.minute;case "HOUR":return l.hour;case "DAY":return l.day;case "MONTH":return l.month;
case "YEAR":return l.year;case "TIMEZONE_HOUR":return l.timezoneOffsetHour;case "TIMEZONE_MINUTE":return l.timezoneOffsetMinutes}throw new f.SqlError(f.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [l,n]=a;return null==l||null==n?null:l.toString().substring(n-1)}if(3===a.length){const [l,n,D]=a;return null==l||null==n||null==D?null:0>=D?"":l.toString().substring(n-1,n+D-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,l])=>null==a||null==l?null:l.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var l=3===a.length,n=l?a[1]:" ";l=l?a[2]:a[1];if(null==n||null==l)return null;n=`(${A.escapeRegExpString(n)})`;switch(a[0]){case "BOTH":return l.replaceAll(new RegExp(`^${n}*|${n}*$`,"g"),"");case "LEADING":return l.replaceAll(new RegExp(`^${n}*`,"g"),"");case "TRAILING":return l.replaceAll(new RegExp(`${n}*$`,"g"),"")}throw new f.SqlError(f.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const l=a[0];a=2===a.length?10**a[1]:1;return null==l?null:Math.round(l*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>d(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let l="";for(let n=0;n<a.length;n++){if(null==a[n])return null;
l+=a[n].toString()}return l}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const l of a)if(null!==l)return l;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,l)=>G.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,l)=>{const n=a[0];a=a[1];if(null===n)return null;switch(a.type){case "integer":if(!v(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);l=parseInt(n,10);if(isNaN(l))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;case "smallint":if(!v(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);l=parseInt(n,10);if(isNaN(l))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);
if(32767<l||-32767>l)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;case "float":case "real":if(!v(n))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);l=parseFloat(n);if(isNaN(l))throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;case "time":return r(n);case "date":return w(n);case "timestamp":return J(n,l,!0===a.withtimezone);case "varchar":l=t(n);if(l.length>a.size)throw new f.SqlError(f.SqlErrorCodes.CannotCastValue);return l;default:throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);
}}}};c.evaluateFunction=function(a,l,n){const D=p[a.toLowerCase()];if(null==D)throw new f.SqlError(f.SqlErrorCodes.FunctionNotRecognized);if(l.length<D.minParams||l.length>D.maxParams)throw new f.SqlError(f.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return D.evaluate(l,n)};c.isStandardized=function(a,l){a=p[a.toLowerCase()];return null!=a&&l>=a.minParams&&l<=a.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,f,A,y,G,C){function e(a){return A.isDateTime(a)||A.isTimestampOffset(a)?!0:!1}function q(a){return A.isDateTime(a)||A.isDateOnly(a)||A.isTimestampOffset(a)||A.isTimeOnly(a)?!0:!1}function d(a){if(A.isDateTime(a))return a.toMillis();if(A.isDateOnly(a))return a.toNumber();if(A.isTimestampOffset(a))return a.toMilliseconds();throw new f.SqlError(f.SqlErrorCodes.InvalidDataType);}function v(a,l,n){switch(n){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<
l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function t(a,l,n){const D=parseFloat(l);if(!isNaN(D))return v(a,D,n);a=a.toString();switch(n){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function w(a,l,n){const D=parseFloat(a);if(!isNaN(D))return v(D,l,n);l=l.toString();switch(n){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<
l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function J(a,l,n){switch(n){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=l;case "\x3c\x3d":return a<=l}}function r(a,l,n){a instanceof y.SqlTimeStampOffset&&(a=a.toDateTime());l instanceof y.SqlTimeStampOffset&&(l=l.toDateTime());a=p(a);l=p(l);switch(n){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=
l;case "\x3c\x3d":return a<=l}}function p(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}c.dateValueInMilliseconds=d;c.isDateOrTimeValue=q;c.isDateTimeComparableValue=e;c.sqlCompare=function(a,l,n,D){if(null==a||null==l)return null;if(A.isNumber(a)){if(A.isNumber(l))return v(a,l,n);if(A.isString(l))return t(a,l,n);if(q(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
}else if(A.isString(a)){if(A.isNumber(l))return w(a,l,n);if(A.isString(l))return J(a,l,n);if(A.isDateTime(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isTimestampOffset(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(A.isDateTime(a)){if(e(l)){if(a instanceof C.DateTime&&G.isUnknownTimeZone(a.zone)){if(l instanceof C.DateTime&&
!1===G.isUnknownTimeZone(l.zone)||l instanceof y.SqlTimeStampOffset)return r(a,l,n)}else if(l instanceof C.DateTime&&G.isUnknownTimeZone(l.zone)&&(a instanceof C.DateTime&&!1===G.isUnknownTimeZone(a.zone)||a instanceof y.SqlTimeStampOffset))return r(a,l,n);return v(d(a),d(l),n)}if(A.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(l))return l=l.toDateTimeLuxon(a.zone),a=a.startOf("day"),v(a.toMillis(),l.toMillis(),n);if(A.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
if(A.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(A.isDateOnly(a)){if(A.isTimestampOffset(l))return a=a.toDateTimeLuxon(l.toDateTime().zone),l=l.startOfDay(),v(a.toMillis(),l.toMilliseconds(),n);if(A.isDateTime(l))return a=a.toDateTimeLuxon(l.zone),l=l.startOf("day"),v(a.toMillis(),l.toMillis(),n);if(A.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(l))return v(a.toNumber(),l.toNumber(),n);if(A.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);
if(A.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(A.isTimeOnly(a)){if(A.isTimeOnly(l))return v(a.toNumber(),l.toNumber(),n);if(A.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(e(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}else if(A.isTimestampOffset(a)){if(e(l))return l instanceof C.DateTime&&
G.isUnknownTimeZone(l.zone)?r(a,l,n):v(d(a),d(l),n);if(A.isString(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isDateOnly(l))return l=l.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),v(a.toMilliseconds(),l.toMillis(),n);if(A.isTimeOnly(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);if(A.isNumber(l))throw new f.SqlError(f.SqlErrorCodes.InvalidOperator);}switch(n){case "\x3c\x3e":return a!==l;case "\x3d":return a===l;case "\x3e":return a>l;case "\x3c":return a<l;case "\x3e\x3d":return a>=
l;case "\x3c\x3d":return a<=l}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,f){var A={exports:{}};(function(C){(function(e,q){C.exports&&(C.exports=q())})(f.commonjsGlobal,function(){function e(d,v,t,w){d=Error.call(this,d);Object.setPrototypeOf&&Object.setPrototypeOf(d,e.prototype);d.expected=v;d.found=t;d.location=w;d.name="SyntaxError";return d}function q(d,v,t){t=t||" ";if(d.length>
v)return d;v-=d.length;t+=t.repeat(v);return d+t.slice(0,v)}(function(d,v){function t(){this.constructor=d}t.prototype=v.prototype;d.prototype=new t})(e,Error);e.prototype.format=function(d){var v="Error: "+this.message;if(this.location){var t=null,w;for(w=0;w<d.length;w++)if(d[w].source===this.location.source){t=d[w].text.split(/\r\n|\n|\r/g);break}d=this.location.start;w=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(d):d;var J=this.location.source+
":"+w.line+":"+w.column;if(t){var r=this.location.end,p=q("",w.line.toString().length," ");t=t[d.line-1];r=(d.line===r.line?r.column:t.length+1)-d.column||1;v+="\n --\x3e "+J+"\n"+p+" |\n"+w.line+" | "+t+"\n"+p+" | "+q("",d.column-1," ")+q("",r,"^")}else v+="\n at "+J}return v};e.buildMessage=function(d,v){function t(a){return a.charCodeAt(0).toString(16).toUpperCase()}function w(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+t(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+t(l)})}function J(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(l){return"\\x0"+t(l)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(l){return"\\x"+t(l)})}function r(a){return p[a.type](a)}var p={literal:function(a){return'"'+
w(a.text)+'"'},class:function(a){var l=a.parts.map(function(n){return Array.isArray(n)?J(n[0])+"-"+J(n[1]):J(n)});return"["+(a.inverted?"^":"")+l.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(r);var l,n;a.sort();if(0<a.length){for(n=l=1;l<a.length;l++)a[l-1]!==a[l]&&(a[n]=a[l],n++);a.length=n}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(d)+" but "+(v?'"'+w(v)+'"':"end of input")+" found."};return{SyntaxError:e,parse:function(d,v){function t(E,P){P=void 0!==P?P:p(ma,k);throw new e(E,null,null,P);}function w(E,P){return{type:"literal",text:E,ignoreCase:P}}function J(E,P,V){return{type:"class",parts:E,inverted:P,ignoreCase:V}}function r(E){var P=Zb[E],V;if(!P){for(V=E-1;!Zb[V];)V--;P=Zb[V];for(P={line:P.line,column:P.column};V<E;)10===d.charCodeAt(V)?(P.line++,P.column=1):P.column++,V++;Zb[E]=
P}return P}function p(E,P,V){var ca=r(E),qa=r(P);E={source:Mb,start:{offset:E,line:ca.line,column:ca.column},end:{offset:P,line:qa.line,column:qa.column}};V&&Mb&&"function"===typeof Mb.offset&&(E.start=Mb.offset(E.start),E.end=Mb.offset(E.end));return E}function a(E){k<eb||(k>eb&&(eb=k,zc=[]),zc.push(E))}function l(){var E=k;ja();var P=D();P!==b?(ja(),ma=E,E=P):(k=E,E=b);return E}function n(){var E=k;var P=D();if(P!==b){var V=[];var ca=k;var qa=ja();var za=Wa();if(za!==b){var Ea=ja();var Fa=D();Fa!==
b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)}else k=ca,ca=b;for(;ca!==b;)V.push(ca),ca=k,qa=ja(),za=Wa(),za!==b?(Ea=ja(),Fa=D(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)):(k=ca,ca=b);ma=E;E={type:"expression-list"};P=[P];for(ca=0;ca<V.length;ca++)P.push(V[ca][3]);E.value=P}else k=E,E=b;return E}function D(){var E=k;var P=N();if(P!==b){var V=[];var ca=k;var qa=ja();var za=M();if(za!==b){var Ea=ja();var Fa=N();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)}else k=ca,ca=b;for(;ca!==b;)V.push(ca),ca=k,qa=ja(),za=M(),za!==
b?(Ea=ja(),Fa=N(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)):(k=ca,ca=b);ma=E;E=nb(P,V)}else k=E,E=b;return E}function N(){var E=k;var P=g();if(P!==b){var V=[];var ca=k;var qa=ja();var za=I();if(za!==b){var Ea=ja();var Fa=g();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)}else k=ca,ca=b;for(;ca!==b;)V.push(ca),ca=k,qa=ja(),za=I(),za!==b?(Ea=ja(),Fa=g(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)):(k=ca,ca=b);ma=E;E=nb(P,V)}else k=E,E=b;return E}function g(){var E=k;var P=z();if(P===b){P=k;if(33===d.charCodeAt(k)){var V=
Nd;k++}else V=b,0===fa&&a(Od);if(V!==b){var ca=k;fa++;if(61===d.charCodeAt(k)){var qa=Sc;k++}else qa=b,0===fa&&a(Tc);fa--;qa===b?ca=void 0:(k=ca,ca=b);ca!==b?P=V=[V,ca]:(k=P,P=b)}else k=P,P=b}P!==b?(V=ja(),ca=g(),ca!==b?(ma=E,E={type:"unary-expression",operator:"NOT",expr:ca}):(k=E,E=b)):(k=E,E=b);if(E===b){P=k;E=S();if(E!==b){ja();V=k;ca=[];qa=k;var za=ja();var Ea=K();if(Ea!==b){var Fa=ja();var ob=S();ob!==b?qa=za=[za,Ea,Fa,ob]:(k=qa,qa=b)}else k=qa,qa=b;if(qa!==b)for(;qa!==b;)ca.push(qa),qa=k,za=
ja(),Ea=K(),Ea!==b?(Fa=ja(),ob=S(),ob!==b?qa=za=[za,Ea,Fa,ob]:(k=qa,qa=b)):(k=qa,qa=b);else ca=b;ca!==b&&(ma=V,ca={type:"arithmetic",tail:ca});V=ca;V===b&&(V=k,ca=L(),ca!==b?(ja(),qa=Ja(),qa!==b?(ja(),qa=n(),qa!==b?(ja(),za=Ka(),za!==b?(ma=V,V={op:ca,right:qa}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,ca=L(),ca!==b?(ja(),qa=Ja(),qa!==b?(ja(),qa=Ka(),qa!==b?(ma=V,V={op:ca,right:{type:"expression-list",value:[]}}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,ca=L(),ca!==b?(ja(),qa=da(),
qa!==b?(ma=V,V={op:ca,right:qa}):(k=V,V=b)):(k=V,V=b))),V===b&&(V=k,za=z(),za!==b?(ja(),ca=W(),ca!==b?(ja(),qa=S(),qa!==b?(ja(),Ea=I(),Ea!==b?(ja(),za=S(),za!==b?(ma=V,V={op:"NOT"+ca,right:{type:"expression-list",value:[qa,za]}}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,za=W(),za!==b?(ja(),ca=S(),ca!==b?(ja(),qa=I(),qa!==b?(ja(),Ea=S(),Ea!==b?(ma=V,V={op:za,right:{type:"expression-list",value:[ca,Ea]}}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)),V===b&&(V=k,ca=aa(),ca!==
b?(ja(),qa=z(),qa!==b?(ja(),qa=S(),qa!==b?(ma=V,V={op:ca+"NOT",right:qa}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,ca=aa(),ca!==b?(ja(),qa=S(),qa!==b?(ma=V,V={op:ca,right:qa}):(k=V,V=b)):(k=V,V=b)),V===b&&(V=k,ca=R(),ca!==b?(ja(),qa=va(),qa!==b?(ja(),za=k,d.substr(k,6).toLowerCase()===Pd?(Ea=d.substr(k,6),k+=6):(Ea=b,0===fa&&a(Qd)),Ea!==b?(Ea=k,fa++,Fa=O(),fa--,Fa===b?Ea=void 0:(k=Ea,Ea=b),Ea!==b?(ma=za,za="ESCAPE"):(k=za,za=b)):(k=za,za=b),za!==b?(ja(),za=wa(),za!==b?(ma=V,V={op:ca,right:qa,escape:za.value}):
(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,ca=R(),ca!==b?(ja(),qa=va(),qa!==b?(ma=V,V={op:ca,right:qa,escape:""}):(k=V,V=b)):(k=V,V=b))))));V===b&&(V=null);ma=P;P=V;""==P||void 0==P||null==P?P=E:(V=null,P=V="arithmetic"==P.type?nb(E,P.tail):Nb(P.op,E,P.right,P.escape))}else k=P,P=b;E=P}return E}function K(){if(d.substr(k,2)===Uc){var E=Uc;k+=2}else E=b,0===fa&&a(Rd);E===b&&(62===d.charCodeAt(k)?(E=Sd,k++):(E=b,0===fa&&a(Td)),E===b&&(d.substr(k,2)===Vc?(E=Vc,k+=2):(E=b,0===fa&&a(Ud)),E===
b&&(d.substr(k,2)===Wc?(E=Wc,k+=2):(E=b,0===fa&&a(Vd)),E===b&&(60===d.charCodeAt(k)?(E=Wd,k++):(E=b,0===fa&&a(Xd)),E===b&&(61===d.charCodeAt(k)?(E=Sc,k++):(E=b,0===fa&&a(Tc)),E===b&&(d.substr(k,2)===Xc?(E=Xc,k+=2):(E=b,0===fa&&a(Yd))))))));return E}function R(){var E;var P=E=k;var V=z();if(V!==b){var ca=ja();var qa=ha();qa!==b?P=V=[V,ca,qa]:(k=P,P=b)}else k=P,P=b;P!==b&&(ma=E,P=P[0]+" "+P[2]);E=P;E===b&&(E=ha());return E}function L(){var E;var P=E=k;var V=z();if(V!==b){var ca=ja();var qa=X();qa!==
b?P=V=[V,ca,qa]:(k=P,P=b)}else k=P,P=b;P!==b&&(ma=E,P=P[0]+" "+P[2]);E=P;E===b&&(E=X());return E}function S(){var E=k;var P=Q();if(P!==b){var V=[];var ca=k;var qa=ja();var za=T();if(za!==b){var Ea=ja();var Fa=Q();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)}else k=ca,ca=b;for(;ca!==b;)V.push(ca),ca=k,qa=ja(),za=T(),za!==b?(Ea=ja(),Fa=Q(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)):(k=ca,ca=b);ma=E;E=nb(P,V)}else k=E,E=b;return E}function T(){if(43===d.charCodeAt(k)){var E=Ac;k++}else E=b,0===fa&&a(Bc);E===
b&&(45===d.charCodeAt(k)?(E=Cc,k++):(E=b,0===fa&&a(Dc)),E===b&&(d.substr(k,2)===Yc?(E=Yc,k+=2):(E=b,0===fa&&a(Zd))));return E}function Q(){var E=k;var P=B();if(P!==b){var V=[];var ca=k;var qa=ja();var za=m();if(za!==b){var Ea=ja();var Fa=B();Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)}else k=ca,ca=b;for(;ca!==b;)V.push(ca),ca=k,qa=ja(),za=m(),za!==b?(Ea=ja(),Fa=B(),Fa!==b?ca=qa=[qa,za,Ea,Fa]:(k=ca,ca=b)):(k=ca,ca=b);ma=E;E=nb(P,V)}else k=E,E=b;return E}function m(){if(42===d.charCodeAt(k)){var E=$d;k++}else E=
b,0===fa&&a(ae);E===b&&(47===d.charCodeAt(k)?(E=be,k++):(E=b,0===fa&&a(ce)));return E}function B(){var E=wa();if(E===b){var P=k;var V=k;var ca=Na();if(ca!==b){var qa=Sa();if(qa!==b){var za=Va();za!==b?(ma=V,V=parseFloat(ca+qa+za)):(k=V,V=b)}else k=V,V=b}else k=V,V=b;V===b&&(V=k,ca=Na(),ca!==b?(qa=Sa(),qa!==b?(ma=V,V=parseFloat(ca+qa)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,ca=Na(),ca!==b?(qa=Va(),qa!==b?(ma=V,V=parseFloat(ca+qa)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,ca=Na(),ca!==b&&(ma=V,ca=parseFloat(ca)),
V=ca)));var Ea=V;if(Ea!==b){var Fa=k;fa++;var ob=x();fa--;ob===b?Fa=void 0:(k=Fa,Fa=b);Fa!==b?(ma=P,P={type:"number",value:Ea}):(k=P,P=b)}else k=P,P=b;E=P;if(E===b){var pb=k;var Jb=k;if(d.substr(k,4).toLowerCase()===de){var $b=d.substr(k,4);k+=4}else $b=b,0===fa&&a(ee);if($b!==b){var Ob=k;fa++;var fe=O();fa--;fe===b?Ob=void 0:(k=Ob,Ob=b);Ob!==b?Jb=$b=[$b,Ob]:(k=Jb,Jb=b)}else k=Jb,Jb=b;var qb=Jb;qb!==b&&(ma=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===b){pb=k;var Kb=k;if(d.substr(k,5).toLowerCase()===
ge){var ac=d.substr(k,5);k+=5}else ac=b,0===fa&&a(he);if(ac!==b){var Pb=k;fa++;var ie=O();fa--;ie===b?Pb=void 0:(k=Pb,Pb=b);Pb!==b?Kb=ac=[ac,Pb]:(k=Kb,Kb=b)}else k=Kb,Kb=b;qb=Kb;qb!==b&&(ma=pb,qb={type:"boolean",value:!1});pb=qb}E=pb;if(E===b){var je=k;var Lb=k;if(d.substr(k,4).toLowerCase()===ke){var bc=d.substr(k,4);k+=4}else bc=b,0===fa&&a(le);if(bc!==b){var Qb=k;fa++;var me=O();fa--;me===b?Qb=void 0:(k=Qb,Qb=b);Qb!==b?Lb=bc=[bc,Qb]:(k=Lb,Lb=b)}else k=Lb,Lb=b;var Ec=Lb;Ec!==b&&(ma=je,Ec={type:"null",
value:null});E=Ec;if(E===b){var rb=k;if(ia()!==b){ja();var cc=va();cc!==b?(ma=rb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&t("Date literal is invalid"),rb={type:"date",
value:cc.value}):(k=rb,rb=b)}else k=rb,rb=b;E=rb;if(E===b){var sb=k;if(ea()!==b){ja();var dc=va();dc!==b?(ma=sb,"string"===dc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(dc.value)&&t("Timestamp literal is invalid"),
sb={type:"timestamp",value:dc.value}):(k=sb,sb=b)}else k=sb,sb=b;E=sb;if(E===b){var Ta=k;var Fc=sa();if(Fc!==b){ja();if(45===d.charCodeAt(k)){var hb=Cc;k++}else hb=b,0===fa&&a(Dc);hb===b&&(43===d.charCodeAt(k)?(hb=Ac,k++):(hb=b,0===fa&&a(Bc)));if(hb!==b){ja();var Rb=va();if(Rb!==b){ja();var Zc=na();Zc!==b?(ma=Ta,Ta={type:"interval",value:Rb,qualifier:Zc,op:hb}):(k=Ta,Ta=b)}else k=Ta,Ta=b}else k=Ta,Ta=b}else k=Ta,Ta=b;Ta===b&&(Ta=k,Fc=sa(),Fc!==b?(ja(),hb=va(),hb!==b?(ja(),Rb=na(),Rb!==b?(ma=Ta,Ta=
{type:"interval",value:hb,qualifier:Rb,op:""}):(k=Ta,Ta=b)):(k=Ta,Ta=b)):(k=Ta,Ta=b));E=Ta;if(E===b){var tb=k;if(ka()!==b){ja();var ec=va();ec!==b?(ma=tb,"string"===ec.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(ec.value)&&t("Time literal is invalid"),tb={type:"time",value:ec.value}):(k=tb,tb=b)}else k=tb,tb=b;E=tb}}}}}}}var La=E;if(La===b){var Za=k;var ub=k;if(d.substr(k,7).toLowerCase()===ne){var $c=d.substr(k,7);k+=7}else $c=
b,0===fa&&a(oe);if($c!==b){var fc=k;fa++;var pe=O();fa--;pe===b?fc=void 0:(k=fc,fc=b);fc!==b?(ma=ub,ub="EXTRACT"):(k=ub,ub=b)}else k=ub,ub=b;if(ub!==b){ja();var qe=Ja();if(qe!==b){ja();var $a=oa();if($a===b&&($a=ra(),$a===b&&($a=Ca(),$a===b&&($a=xa(),$a===b&&($a=Ba(),$a===b&&($a=Aa(),$a===b)))))){var vb=k;if(d.substr(k,13).toLowerCase()===re){var ad=d.substr(k,13);k+=13}else ad=b,0===fa&&a(se);if(ad!==b){var gc=k;fa++;var te=O();fa--;te===b?gc=void 0:(k=gc,gc=b);gc!==b?(ma=vb,vb="TIMEZONE_HOUR"):
(k=vb,vb=b)}else k=vb,vb=b;$a=vb;if($a===b){var wb=k;if(d.substr(k,15).toLowerCase()===ue){var bd=d.substr(k,15);k+=15}else bd=b,0===fa&&a(ve);if(bd!==b){var hc=k;fa++;var we=O();fa--;we===b?hc=void 0:(k=hc,hc=b);hc!==b?(ma=wb,wb="TIMEZONE_MINUTE"):(k=wb,wb=b)}else k=wb,wb=b;$a=wb}}var cd=$a;if(cd!==b){ja();var xe=Z();if(xe!==b){ja();var dd=D();if(dd!==b){ja();var ye=Ka();ye!==b?(ma=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:cd},dd]}}):(k=Za,Za=
b)}else k=Za,Za=b}else k=Za,Za=b}else k=Za,Za=b}else k=Za,Za=b}else k=Za,Za=b;La=Za;if(La===b){var ab=k;var xb=k;if(d.substr(k,9).toLowerCase()===ze){var ed=d.substr(k,9);k+=9}else ed=b,0===fa&&a(Ae);if(ed!==b){var ic=k;fa++;var Be=O();fa--;Be===b?ic=void 0:(k=ic,ic=b);ic!==b?(ma=xb,xb="SUBSTRING"):(k=xb,xb=b)}else k=xb,xb=b;if(xb!==b){ja();var Ce=Ja();if(Ce!==b){ja();var Gc=D();if(Gc!==b){ja();var De=Z();if(De!==b){ja();var Hc=D();if(Hc!==b){ja();var ib=k;var yb=k;if(d.substr(k,3).toLowerCase()===
Ee){var fd=d.substr(k,3);k+=3}else fd=b,0===fa&&a(Fe);if(fd!==b){var jc=k;fa++;var Ge=O();fa--;Ge===b?jc=void 0:(k=jc,jc=b);jc!==b?(ma=yb,yb="FOR"):(k=yb,yb=b)}else k=yb,yb=b;var Sb=yb;if(Sb!==b){var He=ja();var gd=D();if(gd!==b){var Ie=ja();ib=Sb=[Sb,He,gd,Ie]}else k=ib,ib=b}else k=ib,ib=b;ib===b&&(ib=null);Sb=Ka();Sb!==b?(ma=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Gc,Hc,ib[2]]:[Gc,Hc]}}):(k=ab,ab=b)}else k=ab,ab=b}else k=ab,ab=b}else k=ab,ab=b}else k=ab,ab=
b}else k=ab,ab=b;La=ab;if(La===b){var Oa=k;var Ic=ba();if(Ic!==b){ja();var Jc=Ja();if(Jc!==b){ja();var jb=la();jb===b&&(jb=null);ja();var Tb=D();if(Tb!==b){ja();var Kc=Z();if(Kc!==b){ja();var hd=D();if(hd!==b){ja();var Je=Ka();Je!==b?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb,hd]}}):(k=Oa,Oa=b)}else k=Oa,Oa=b}else k=Oa,Oa=b}else k=Oa,Oa=b}else k=Oa,Oa=b}else k=Oa,Oa=b;Oa===b&&(Oa=k,Ic=ba(),Ic!==b?(ja(),Jc=Ja(),Jc!==b?(ja(),
jb=la(),jb===b&&(jb=null),ja(),Tb=D(),Tb!==b?(ja(),Kc=Ka(),Kc!==b?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb]}}):(k=Oa,Oa=b)):(k=Oa,Oa=b)):(k=Oa,Oa=b)):(k=Oa,Oa=b));La=Oa;if(La===b){var bb=k;var zb=k;if(d.substr(k,8).toLowerCase()===Ke){var id=d.substr(k,8);k+=8}else id=b,0===fa&&a(Le);if(id!==b){var kc=k;fa++;var Me=O();fa--;Me===b?kc=void 0:(k=kc,kc=b);kc!==b?(ma=zb,zb="POSITION"):(k=zb,zb=b)}else k=zb,zb=b;if(zb!==b){ja();
var Ne=Ja();if(Ne!==b){ja();var jd=D();if(jd!==b){ja();var Oe=X();if(Oe!==b){ja();var kd=D();if(kd!==b){ja();var Pe=Ka();Pe!==b?(ma=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[jd,kd]}}):(k=bb,bb=b)}else k=bb,bb=b}else k=bb,bb=b}else k=bb,bb=b}else k=bb,bb=b}else k=bb,bb=b;La=bb;if(La===b){var cb=k;var Ab=k;if(d.substr(k,4).toLowerCase()===Qe){var ld=d.substr(k,4);k+=4}else ld=b,0===fa&&a(Re);if(ld!==b){var lc=k;fa++;var Se=O();fa--;Se===b?lc=void 0:(k=lc,lc=b);lc!==
b?(ma=Ab,Ab="CAST"):(k=Ab,Ab=b)}else k=Ab,Ab=b;if(Ab!==b){ja();var Te=Ja();if(Te!==b){ja();var md=D();if(md!==b){ja();var Bb=k;if(d.substr(k,2).toLowerCase()===Ue){var nd=d.substr(k,2);k+=2}else nd=b,0===fa&&a(Ve);if(nd!==b){var mc=k;fa++;var We=O();fa--;We===b?mc=void 0:(k=mc,mc=b);mc!==b?(ma=Bb,Bb="AS"):(k=Bb,Bb=b)}else k=Bb,Bb=b;var Xe=Bb;if(Xe!==b){ja();var Ga=k;var Cb=k;if(d.substr(k,7).toLowerCase()===Ye){var od=d.substr(k,7);k+=7}else od=b,0===fa&&a(Ze);if(od!==b){var nc=k;fa++;var $e=O();
fa--;$e===b?nc=void 0:(k=nc,nc=b);nc!==b?(ma=Cb,Cb="INTEGER"):(k=Cb,Cb=b)}else k=Cb,Cb=b;var Ma=Cb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"integer"}});Ga=Ma;if(Ga===b){Ga=k;var Db=k;if(d.substr(k,8).toLowerCase()===af){var pd=d.substr(k,8);k+=8}else pd=b,0===fa&&a(bf);if(pd!==b){var oc=k;fa++;var cf=O();fa--;cf===b?oc=void 0:(k=oc,oc=b);oc!==b?(ma=Db,Db="SMALLINT"):(k=Db,Db=b)}else k=Db,Db=b;Ma=Db;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"smallint"}});Ga=Ma;if(Ga===b){Ga=k;var Eb=
k;if(d.substr(k,5).toLowerCase()===df){var qd=d.substr(k,5);k+=5}else qd=b,0===fa&&a(ef);if(qd!==b){var pc=k;fa++;var ff=O();fa--;ff===b?pc=void 0:(k=pc,pc=b);pc!==b?(ma=Eb,Eb="FLOAT"):(k=Eb,Eb=b)}else k=Eb,Eb=b;Ma=Eb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"float"}});Ga=Ma;if(Ga===b){Ga=k;var Fb=k;if(d.substr(k,4).toLowerCase()===gf){var rd=d.substr(k,4);k+=4}else rd=b,0===fa&&a(hf);if(rd!==b){var qc=k;fa++;var jf=O();fa--;jf===b?qc=void 0:(k=qc,qc=b);qc!==b?(ma=Fb,Fb="REAL"):(k=Fb,Fb=b)}else k=
Fb,Fb=b;Ma=Fb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"real"}});Ga=Ma;if(Ga===b&&(Ga=k,Ma=ia(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"date"}}),Ga=Ma,Ga===b&&(Ga=k,Ma=ea(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"timestamp"}}),Ga=Ma,Ga===b&&(Ga=k,Ma=ka(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"time"}}),Ga=Ma,Ga===b)))){Ga=k;var Gb=k;if(d.substr(k,7).toLowerCase()===kf){var sd=d.substr(k,7);k+=7}else sd=b,0===fa&&a(lf);if(sd!==b){var rc=k;fa++;var mf=O();fa--;mf===
b?rc=void 0:(k=rc,rc=b);rc!==b?(ma=Gb,Gb="VARCHAR"):(k=Gb,Gb=b)}else k=Gb,Gb=b;Ma=Gb;if(Ma!==b){ja();var nf=Ja();if(nf!==b){ja();var td=h();if(td!==b){ja();var of=Ka();of!==b?(ma=Ga,Ga={type:"data-type",value:{type:"varchar",size:parseInt(td)}}):(k=Ga,Ga=b)}else k=Ga,Ga=b}else k=Ga,Ga=b}else k=Ga,Ga=b}}}}var ud=Ga;if(ud!==b){ja();var pf=Ka();pf!==b?(ma=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[md,ud]}}):(k=cb,cb=b)}else k=cb,cb=b}else k=cb,cb=b}else k=cb,cb=b}else k=cb,
cb=b}else k=cb,cb=b;La=cb;if(La===b){var kb=k;var db=k;var Ub=u();Ub!==b&&(ma=db);db=Ub;if(db===b)if(db=k,96===d.charCodeAt(k)?(Ub=vd,k++):(Ub=b,0===fa&&a(wd)),Ub!==b){var sc=[];if(xd.test(d.charAt(k))){var lb=d.charAt(k);k++}else lb=b,0===fa&&a(yd);if(lb!==b)for(;lb!==b;)sc.push(lb),xd.test(d.charAt(k))?(lb=d.charAt(k),k++):(lb=b,0===fa&&a(yd));else sc=b;sc!==b?(96===d.charCodeAt(k)?(lb=vd,k++):(lb=b,0===fa&&a(wd)),lb!==b?(ma=db,db=sc.join("")):(k=db,db=b)):(k=db,db=b)}else k=db,db=b;var zd=db;if(zd!==
b){ja();var qf=Ja();if(qf!==b){ja();var tc=n();tc===b&&(tc=null);ja();var rf=Ka();rf!==b?(ma=kb,kb={type:"function",name:zd,args:tc?tc:{type:"expression-list",value:[]}}):(k=kb,kb=b)}else k=kb,kb=b}else k=kb,kb=b;La=kb;if(La===b){var fb;var Ua=k;var Lc=ya();if(Lc!==b){ja();var Vb=D();if(Vb!==b){ja();var Wb=[];for(fb=Ia();fb!==b;)Wb.push(fb),fb=Ia();fb=ja();var uc=Ha();uc!==b?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:null}):(k=Ua,Ua=b)}else k=Ua,Ua=b}else k=Ua,Ua=
b;if(Ua===b)if(Ua=k,Lc=ya(),Lc!==b)if(ja(),Vb=D(),Vb!==b){ja();Wb=[];for(fb=Ia();fb!==b;)Wb.push(fb),fb=Ia();fb=ja();uc=Ra();if(uc!==b){ja();var sf=Ha();sf!==b?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:uc.value}):(k=Ua,Ua=b)}else k=Ua,Ua=b}else k=Ua,Ua=b;else k=Ua,Ua=b;var Mc=Ua;if(Mc===b){var gb;var Xa=k;var Nc=ya();if(Nc!==b){ja();var Xb=[];for(gb=Da();gb!==b;)Xb.push(gb),gb=Da();gb=ja();var vc=Ha();vc!==b?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,
else:null}):(k=Xa,Xa=b)}else k=Xa,Xa=b;if(Xa===b)if(Xa=k,Nc=ya(),Nc!==b){ja();Xb=[];for(gb=Da();gb!==b;)Xb.push(gb),gb=Da();gb=ja();vc=Ra();if(vc!==b){ja();var tf=Ha();tf!==b?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,else:vc.value}):(k=Xa,Xa=b)}else k=Xa,Xa=b}else k=Xa,Xa=b;Mc=Xa}La=Mc;if(La===b){var Hb=k;var uf=k;var wc;var Yb=k;var Ad=x();if(Ad!==b){var Bd=[];for(wc=H();wc!==b;)Bd.push(wc),wc=H();ma=Yb;Yb=Ad+Bd.join("")}else k=Yb,Yb=b;var Cd=Yb;Cd!==b&&(ma=uf);var mb=Cd;if(mb!==
b){ma=Hb;var Oc=mb;mb=/^CURRENT_DATE$/i.test(Oc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Oc}}Hb=mb;if(Hb===b){Hb=k;var Ib=k;if(Y()!==b){var xc;var vf=k;var Pc=[];for(xc=U();xc!==b;)Pc.push(xc),xc=U();ma=vf;var wf=Pc=Pc.join("");var xf=Y();xf!==b?(ma=Ib,Ib=wf):(k=Ib,Ib=b)}else k=Ib,Ib=b;mb=Ib;mb!==b&&(ma=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}La=Hb;if(La===b&&(La=
da(),La===b)){La=k;var yf=Ja();if(yf!==b){ja();var Qc=D();if(Qc!==b){ja();var zf=Ka();zf!==b?(ma=La,Qc.paren=!0,La=Qc):(k=La,La=b)}else k=La,La=b}else k=La,La=b}}}}}}}}}return La}function u(){var E;var P=k;var V=x();if(V!==b){var ca=[];for(E=O();E!==b;)ca.push(E),E=O();ma=P;P=V+ca.join("")}else k=P,P=b;return P}function x(){if(Af.test(d.charAt(k))){var E=d.charAt(k);k++}else E=b,0===fa&&a(Bf);return E}function O(){if(Cf.test(d.charAt(k))){var E=d.charAt(k);k++}else E=b,0===fa&&a(Df);return E}function H(){if(Dd.test(d.charAt(k))){var E=
d.charAt(k);k++}else E=b,0===fa&&a(Ed);return E}function U(){if(Dd.test(d.charAt(k))){var E=d.charAt(k);k++}else E=b,0===fa&&a(Ed);if(E===b)if(E=k,Y()!==b){var P=Y();P!==b?(ma=E,E='"'):(k=E,E=b)}else k=E,E=b;return E}function Y(){if(Ef.test(d.charAt(k))){var E=d.charAt(k);k++}else E=b,0===fa&&a(Ff);return E}function da(){var E;var P=E=k;if(64===d.charCodeAt(k)){var V=Gf;k++}else V=b,0===fa&&a(Hf);if(V!==b){var ca=u();ca!==b?P=V=[V,ca]:(k=P,P=b)}else k=P,P=b;P!==b&&(ma=E,P={type:"parameter",value:P[1]});
return P}function la(){var E=k;if(d.substr(k,7).toLowerCase()===If){var P=d.substr(k,7);k+=7}else P=b,0===fa&&a(Jf);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="LEADING"):(k=E,E=b)}else k=E,E=b;E===b&&(E=k,d.substr(k,8).toLowerCase()===Kf?(P=d.substr(k,8),k+=8):(P=b,0===fa&&a(Lf)),P!==b?(P=k,fa++,V=O(),fa--,V===b?P=void 0:(k=P,P=b),P!==b?(ma=E,E="TRAILING"):(k=E,E=b)):(k=E,E=b),E===b&&(E=k,d.substr(k,4).toLowerCase()===Mf?(P=d.substr(k,4),k+=4):(P=b,0===fa&&a(Nf)),P!==
b?(P=k,fa++,V=O(),fa--,V===b?P=void 0:(k=P,P=b),P!==b?(ma=E,E="BOTH"):(k=E,E=b)):(k=E,E=b)));return E}function na(){var E=k;var P=k;var V=ua();if(V!==b){ja();var ca=Ja();if(ca!==b)if(ja(),ca=pa(),ca!==b){ja();var qa=Ka();qa!==b?(ma=P,P={type:"interval-period",period:V.value,precision:ca,secondary:null}):(k=P,P=b)}else k=P,P=b;else k=P,P=b}else k=P,P=b;P===b&&(P=k,V=ua(),V!==b&&(ma=P,V={type:"interval-period",period:V.value,precision:null,secondary:null}),P=V);if(P!==b)if(ja(),V=k,d.substr(k,2).toLowerCase()===
Of?(ca=d.substr(k,2),k+=2):(ca=b,0===fa&&a(Pf)),ca!==b?(ca=k,fa++,qa=O(),fa--,qa===b?ca=void 0:(k=ca,ca=b),ca!==b?(ma=V,V="TO"):(k=V,V=b)):(k=V,V=b),V!==b){ja();V=k;ca=ua();ca!==b&&(ma=V,ca={type:"interval-period",period:ca.value,precision:null,secondary:null});V=ca;if(V===b){V=k;ca=Aa();if(ca!==b)if(ja(),ca=Ja(),ca!==b)if(ja(),ca=pa(),ca!==b)if(ja(),qa=Wa(),qa!==b)if(ja(),qa=ta(),qa!==b){ja();var za=Ka();za!==b?(ma=V,V={type:"interval-period",period:"second",precision:ca,secondary:qa}):(k=V,V=b)}else k=
V,V=b;else k=V,V=b;else k=V,V=b;else k=V,V=b;else k=V,V=b;V===b&&(V=k,ca=Aa(),ca!==b?(ja(),ca=Ja(),ca!==b?(ja(),ca=pa(),ca!==b?(ja(),qa=Ka(),qa!==b?(ma=V,V={type:"interval-period",period:"second",precision:ca,secondary:null}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,ca=Aa(),ca!==b&&(ma=V,ca={type:"interval-period",period:"second",precision:null,secondary:null}),V=ca))}V!==b?(ma=E,E={type:"interval-qualifier",start:P,end:V}):(k=E,E=b)}else k=E,E=b;else k=E,E=b;E===b&&(E=k,V=ua(),V!==
b?(ja(),P=Ja(),P!==b?(ja(),P=ta(),P!==b?(ja(),ca=Ka(),ca!==b?(ma=E,E={type:"interval-period",period:V.value,precision:P,secondary:null}):(k=E,E=b)):(k=E,E=b)):(k=E,E=b)):(k=E,E=b),E===b&&(E=k,V=ua(),V!==b&&(ma=E,V={type:"interval-period",period:V.value,precision:null,secondary:null}),E=V,E===b&&(E=k,V=Aa(),V!==b?(ja(),P=Ja(),P!==b?(ja(),P=pa(),P!==b?(ja(),ca=Wa(),ca!==b?(ja(),V=ta(),V!==b?(ja(),ca=Ka(),ca!==b?(ma=E,E={type:"interval-period",period:"second",precision:P,secondary:V}):(k=E,E=b)):(k=
E,E=b)):(k=E,E=b)):(k=E,E=b)):(k=E,E=b)):(k=E,E=b),E===b&&(E=k,V=Aa(),V!==b?(ja(),P=Ja(),P!==b?(ja(),P=ta(),P!==b?(ja(),ca=Ka(),ca!==b?(ma=E,E={type:"interval-period",period:"second",precision:P,secondary:null}):(k=E,E=b)):(k=E,E=b)):(k=E,E=b)):(k=E,E=b),E===b&&(E=k,V=Aa(),V!==b&&(ma=E,V={type:"interval-period",period:"second",precision:null,secondary:null}),E=V)))));return E}function ua(){var E=k;var P=Ca();P!==b&&(ma=E,P={type:"string",value:"day"});E=P;E===b&&(E=k,P=xa(),P!==b&&(ma=E,P={type:"string",
value:"hour"}),E=P,E===b&&(E=k,P=Ba(),P!==b&&(ma=E,P={type:"string",value:"minute"}),E=P,E===b&&(E=k,P=ra(),P!==b&&(ma=E,P={type:"string",value:"month"}),E=P,E===b&&(E=k,P=oa(),P!==b&&(ma=E,P={type:"string",value:"year"}),E=P))));return E}function ta(){var E=k;var P=h();P!==b&&(ma=E,P=parseFloat(P));return P}function pa(){var E=k;var P=h();P!==b&&(ma=E,P=parseFloat(P));return P}function va(){var E=wa();E===b&&(E=da());return E}function wa(){var E=k;if(39===d.charCodeAt(k)){var P=Fd;k++}else P=b,0===
fa&&a(Gd);P===b&&(d.substr(k,2)===Hd?(P=Hd,k+=2):(P=b,0===fa&&a(Qf)));if(P!==b){P=[];var V=k;if(d.substr(k,2)===yc){var ca=yc;k+=2}else ca=b,0===fa&&a(Id);ca!==b&&(ma=V,ca="'");V=ca;V===b&&(Jd.test(d.charAt(k))?(V=d.charAt(k),k++):(V=b,0===fa&&a(Kd)));for(;V!==b;)P.push(V),V=k,d.substr(k,2)===yc?(ca=yc,k+=2):(ca=b,0===fa&&a(Id)),ca!==b&&(ma=V,ca="'"),V=ca,V===b&&(Jd.test(d.charAt(k))?(V=d.charAt(k),k++):(V=b,0===fa&&a(Kd)));39===d.charCodeAt(k)?(V=Fd,k++):(V=b,0===fa&&a(Gd));V!==b?(ma=E,E={type:"string",
value:P.join("")}):(k=E,E=b)}else k=E,E=b;return E}function Da(){var E=k;if(Pa()!==b){ja();var P=D();if(P!==b){ja();var V=Ya();V!==b?(ja(),V=D(),V!==b?(ma=E,E={type:"when-clause",operand:P,value:V}):(k=E,E=b)):(k=E,E=b)}else k=E,E=b}else k=E,E=b;return E}function Ia(){var E=k;if(Pa()!==b){ja();var P=D();if(P!==b){ja();var V=Ya();V!==b?(ja(),V=D(),V!==b?(ma=E,E={type:"when-clause",operand:P,value:V}):(k=E,E=b)):(k=E,E=b)}else k=E,E=b}else k=E,E=b;return E}function Ra(){var E=k;var P=k;if(d.substr(k,
4).toLowerCase()===Rf){var V=d.substr(k,4);k+=4}else V=b,0===fa&&a(Sf);if(V!==b){V=k;fa++;var ca=O();fa--;ca===b?V=void 0:(k=V,V=b);V!==b?(ma=P,P="ELSE"):(k=P,P=b)}else k=P,P=b;P!==b?(ja(),P=D(),P!==b?(ma=E,E={type:"else-clause",value:P}):(k=E,E=b)):(k=E,E=b);return E}function Na(){var E=h();if(E===b){E=k;if(45===d.charCodeAt(k)){var P=Cc;k++}else P=b,0===fa&&a(Dc);P===b&&(43===d.charCodeAt(k)?(P=Ac,k++):(P=b,0===fa&&a(Bc)));if(P!==b){var V=h();V!==b?(ma=E,E=P[0]+V):(k=E,E=b)}else k=E,E=b}return E}
function Sa(){var E=k;if(46===d.charCodeAt(k)){var P=Tf;k++}else P=b,0===fa&&a(Uf);P!==b?(P=h(),P===b&&(P=null),ma=E,E="."+(null!=P?P:"")):(k=E,E=b);return E}function Va(){var E;var P=E=k;if(Vf.test(d.charAt(k))){var V=d.charAt(k);k++}else V=b,0===fa&&a(Wf);V!==b?(Xf.test(d.charAt(k))?(V=d.charAt(k),k++):(V=b,0===fa&&a(Yf)),V===b&&(V=null),ma=P,P="e"+(null===V?"":V)):(k=P,P=b);P!==b?(V=h(),V!==b?(ma=E,E=P+V):(k=E,E=b)):(k=E,E=b);return E}function h(){var E=k;var P=[];var V=F();if(V!==b)for(;V!==b;)P.push(V),
V=F();else P=b;P!==b&&(ma=E,P=P.join(""));return P}function F(){if(Zf.test(d.charAt(k))){var E=d.charAt(k);k++}else E=b,0===fa&&a($f);return E}function X(){var E=k;if(d.substr(k,2).toLowerCase()===ag){var P=d.substr(k,2);k+=2}else P=b,0===fa&&a(bg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="IN"):(k=E,E=b)}else k=E,E=b;return E}function aa(){var E=k;if(d.substr(k,2).toLowerCase()===cg){var P=d.substr(k,2);k+=2}else P=b,0===fa&&a(dg);if(P!==b){P=k;fa++;var V=O();fa--;
V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="IS"):(k=E,E=b)}else k=E,E=b;return E}function ha(){var E=k;if(d.substr(k,4).toLowerCase()===eg){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(fg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="LIKE"):(k=E,E=b)}else k=E,E=b;return E}function z(){var E=k;if(d.substr(k,3).toLowerCase()===gg){var P=d.substr(k,3);k+=3}else P=b,0===fa&&a(hg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="NOT"):(k=E,E=b)}else k=E,
E=b;return E}function I(){var E=k;if(d.substr(k,3).toLowerCase()===ig){var P=d.substr(k,3);k+=3}else P=b,0===fa&&a(jg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="AND"):(k=E,E=b)}else k=E,E=b;return E}function M(){var E=k;if(d.substr(k,2).toLowerCase()===kg){var P=d.substr(k,2);k+=2}else P=b,0===fa&&a(lg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="OR"):(k=E,E=b)}else k=E,E=b;return E}function W(){var E=k;if(d.substr(k,7).toLowerCase()===
mg){var P=d.substr(k,7);k+=7}else P=b,0===fa&&a(ng);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="BETWEEN"):(k=E,E=b)}else k=E,E=b;return E}function Z(){var E=k;if(d.substr(k,4).toLowerCase()===og){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(pg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="FROM"):(k=E,E=b)}else k=E,E=b;return E}function ba(){var E=k;if(d.substr(k,4).toLowerCase()===qg){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(rg);if(P!==
b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="TRIM"):(k=E,E=b)}else k=E,E=b;return E}function ea(){var E=k;if(d.substr(k,9).toLowerCase()===sg){var P=d.substr(k,9);k+=9}else P=b,0===fa&&a(tg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="TIMESTAMP"):(k=E,E=b)}else k=E,E=b;return E}function ia(){var E=k;if(d.substr(k,4).toLowerCase()===ug){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(vg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==
b?(ma=E,E="DATE"):(k=E,E=b)}else k=E,E=b;return E}function ka(){var E=k;if(d.substr(k,4).toLowerCase()===wg){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(xg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="TIME"):(k=E,E=b)}else k=E,E=b;return E}function sa(){var E=k;if(d.substr(k,8).toLowerCase()===yg){var P=d.substr(k,8);k+=8}else P=b,0===fa&&a(zg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="INTERVAL"):(k=E,E=b)}else k=E,E=b;return E}function oa(){var E=
k;if(d.substr(k,4).toLowerCase()===Ag){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(Bg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="YEAR"):(k=E,E=b)}else k=E,E=b;return E}function ra(){var E=k;if(d.substr(k,5).toLowerCase()===Cg){var P=d.substr(k,5);k+=5}else P=b,0===fa&&a(Dg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="MONTH"):(k=E,E=b)}else k=E,E=b;return E}function Ca(){var E=k;if(d.substr(k,3).toLowerCase()===Eg){var P=d.substr(k,3);k+=
3}else P=b,0===fa&&a(Fg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="DAY"):(k=E,E=b)}else k=E,E=b;return E}function xa(){var E=k;if(d.substr(k,4).toLowerCase()===Gg){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(Hg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="HOUR"):(k=E,E=b)}else k=E,E=b;return E}function Ba(){var E=k;if(d.substr(k,6).toLowerCase()===Ig){var P=d.substr(k,6);k+=6}else P=b,0===fa&&a(Jg);if(P!==b){P=k;fa++;var V=O();fa--;V===
b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="MINUTE"):(k=E,E=b)}else k=E,E=b;return E}function Aa(){var E=k;if(d.substr(k,6).toLowerCase()===Kg){var P=d.substr(k,6);k+=6}else P=b,0===fa&&a(Lg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="SECOND"):(k=E,E=b)}else k=E,E=b;return E}function ya(){var E=k;if(d.substr(k,4).toLowerCase()===Mg){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(Ng);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="CASE"):(k=E,E=b)}else k=
E,E=b;return E}function Ha(){var E=k;if(d.substr(k,3).toLowerCase()===Og){var P=d.substr(k,3);k+=3}else P=b,0===fa&&a(Pg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="END"):(k=E,E=b)}else k=E,E=b;return E}function Pa(){var E=k;if(d.substr(k,4).toLowerCase()===Qg){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(Rg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="WHEN"):(k=E,E=b)}else k=E,E=b;return E}function Ya(){var E=k;if(d.substr(k,4).toLowerCase()===
Sg){var P=d.substr(k,4);k+=4}else P=b,0===fa&&a(Tg);if(P!==b){P=k;fa++;var V=O();fa--;V===b?P=void 0:(k=P,P=b);P!==b?(ma=E,E="THEN"):(k=E,E=b)}else k=E,E=b;return E}function Wa(){if(44===d.charCodeAt(k)){var E=Ug;k++}else E=b,0===fa&&a(Vg);return E}function Ja(){if(40===d.charCodeAt(k)){var E=Wg;k++}else E=b,0===fa&&a(Xg);return E}function Ka(){if(41===d.charCodeAt(k)){var E=Yg;k++}else E=b,0===fa&&a(Zg);return E}function ja(){var E;var P=[];for(E=Qa();E!==b;)P.push(E),E=Qa();return P}function Qa(){if($g.test(d.charAt(k))){var E=
d.charAt(k);k++}else E=b,0===fa&&a(ah);return E}function Nb(E,P,V,ca){E={type:"binary-expression",operator:E,left:P,right:V};void 0!==ca&&(E.escape=ca);return E}function nb(E,P){for(var V=0;V<P.length;V++)E=Nb(P[V][1],E,P[V][3]);return E}v=void 0!==v?v:{};var b={},Mb=v.grammarSource,Ld={start:l},Md=l,Nd="!",Sc="\x3d",Uc="\x3e\x3d",Sd="\x3e",Vc="\x3c\x3d",Wc="\x3c\x3e",Wd="\x3c",Xc="!\x3d",Ac="+",Cc="-",Yc="||",$d="*",be="/",Gf="@",Fd="'",Hd="N'",yc="''",Tf=".",ke="null",de="true",ge="false",ag="in",
cg="is",eg="like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",vd="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Dd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Jd=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,xd=/^[^`]/,Od=w("!",!1),Tc=w("\x3d",!1),Rd=w("\x3e\x3d",!1),Td=w("\x3e",!1),Ud=w("\x3c\x3d",!1),Vd=w("\x3c\x3e",!1),Xd=w("\x3c",!1),Yd=w("!\x3d",!1),Bc=w("+",!1),Dc=w("-",!1),Zd=w("||",!1),ae=w("*",!1),ce=w("/",!1),Bf=J([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=J([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ed=J([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=J(['"'],!1,!1),Hf=w("@",!1),Gd=w("'",!1),Qf=w("N'",!1),Id=w("''",!1),Kd=J(["'"],!0,!1),Uf=w(".",!1),$f=J([["0","9"]],!1,!1),Wf=J(["e","E"],!1,!1),Yf=J(["+","-"],!1,!1),le=w("NULL",!0),ee=w("TRUE",!0),he=w("FALSE",!0),bg=w("IN",!0),dg=w("IS",!0),fg=w("LIKE",!0),Qd=w("ESCAPE",!0),hg=w("NOT",!0),jg=w("AND",!0),lg=w("OR",!0),ng=w("BETWEEN",!0),pg=w("FROM",!0),Fe=w("FOR",!0),Ae=w("SUBSTRING",!0),oe=w("EXTRACT",!0),rg=w("TRIM",!0),Le=w("POSITION",!0),tg=w("TIMESTAMP",!0),vg=w("DATE",!0),xg=w("TIME",
!0),Jf=w("LEADING",!0),Lf=w("TRAILING",!0),Nf=w("BOTH",!0),Re=w("CAST",!0),Ve=w("AS",!0),Ze=w("INTEGER",!0),bf=w("SMALLINT",!0),ef=w("FLOAT",!0),hf=w("REAL",!0),lf=w("VARCHAR",!0),Pf=w("TO",!0),zg=w("INTERVAL",!0),Bg=w("YEAR",!0),se=w("TIMEZONE_HOUR",!0),ve=w("TIMEZONE_MINUTE",!0),Dg=w("MONTH",!0),Fg=w("DAY",!0),Hg=w("HOUR",!0),Jg=w("MINUTE",!0),Lg=w("SECOND",!0),Ng=w("CASE",!0),Pg=w("END",!0),Rg=w("WHEN",!0),Tg=w("THEN",!0),Sf=w("ELSE",!0),Vg=w(",",!1),Xg=w("(",!1),Zg=w(")",!1),ah=J([" ","\t","\n",
"\r"],!1,!1),wd=w("`",!1),yd=J(["`"],!0,!1),k=0,ma=0,Zb=[{line:1,column:1}],eb=0,zc=[],fa=0;if("startRule"in v){if(!(v.startRule in Ld))throw Error("Can't start parsing from rule \""+v.startRule+'".');Md=Ld[v.startRule]}var Rc=Md();if(Rc!==b&&k===d.length)return Rc;Rc!==b&&k<d.length&&a({type:"end"});throw function(E,P,V){return new e(e.buildMessage(E,P),E,P,V)}(zc,eb<d.length?d.charAt(eb):null,eb<d.length?p(eb,eb+1):p(eb,eb));}}})})(A);var y=A.exports;class G{static parse(C){return y.parse(C)}}c.WhereGrammar=
G;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(c,f){f=new f.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});c.kebabDict=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t,w,J){function r(n,D,N,g){const K=g.x-N.x;g=g.y-N.y;D=Math.min(1,Math.max(0,((D.x-N.x)*K+(D.y-N.y)*g)/(K*K+g*g)));n.x=N.x+K*D;n.y=N.y+g*D}function p(n,D){return n?D?4:3:D?3:2}class a{constructor(n,D,N){this.items=n;this.query=D;this.geometryType=N.geometryType;this.hasM=N.hasM;this.hasZ=N.hasZ;this.fieldsIndex=N.fieldsIndex;this.objectIdField=N.objectIdField;this.spatialReference=N.spatialReference;this.featureAdapter=N.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const n=
new q(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return n.countDistinctValues(this.items);const {groupByFieldsForStatistics:D,having:N,outStatistics:g}=this.query;if(!D?.length)return 1;const K=new Map,R=new Map,L=new Set;for(const Q of g){var {statisticType:S}=Q;S="exceedslimit"!==S?Q.onStatisticField:void 0;if(!R.has(S)){var T=[];for(const m of D){const B=this._getAttributeValues(n,m,K);T.push(B)}R.set(S,this._calculateUniqueValues(T,n.returnDistinctValues))}S=
R.get(S);for(const m in S){const {data:B,items:u}=S[m];T=B.join(",");N&&!n.validateItems(u,N)||L.add(T)}}return L.size}async createQueryResponse(){let n;n=this.query.outStatistics?this.query.outStatistics.some(D=>"exceedslimit"===D.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const D=this.query.geometry;e.isValid(this.query.outSR)&&!e.equals(D.spatialReference,
this.query.outSR)?n.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...v.project(D,D.spatialReference,this.query.outSR)}):n.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...D})}return n}createSnappingResponse(n,D){const N=this.featureAdapter,g=p(this.hasZ,this.hasM),{point:K,mode:R}=n,L="number"===typeof n.distance?n.distance:n.distance.x,S="number"===typeof n.distance?n.distance:n.distance.y,T={candidates:[]},Q="esriGeometryPolygon"===this.geometryType;
D=this._getPointCreator(R,this.spatialReference,D);const m=new l(null,0),B=new l(null,0),u={x:0,y:0,z:0};for(const la of this.items){var x=N.getGeometry(la);if(null==x)continue;const {coords:na,lengths:ua}=x;m.coords=na;B.coords=na;if(n.returnEdge){x=0;for(var O=0;O<ua.length;O++){var H=ua[O];for(var U=0;U<H;U++,x+=g){var Y=m;Y.coordsIndex=x;if(U!==H-1){const ta=B;ta.coordsIndex=x+g;const pa=u;r(u,K,Y,ta);var da=(K.x-pa.x)/L;const va=(K.y-pa.y)/S;da=da*da+va*va;1>=da&&T.candidates.push(t.makeEdgeCandidate(N.getObjectId(la),
D(pa),Math.sqrt(da),D(Y),D(ta)))}}}}if("none"!==n.vertexMode)if(x=Q?na.length-g:na.length,"all"===n.vertexMode)for(O=0;O<x;O+=g)H=m,H.coordsIndex=O,U=(K.x-H.x)/L,Y=(K.y-H.y)/S,U=U*U+Y*Y,1>=U&&T.candidates.push(t.makeVertexCandidate(N.getObjectId(la),D(H),Math.sqrt(U)));else if("ends"===n.vertexMode){x=[0];Q||x.push(na.length-g);for(const ta of x)x=m,x.coordsIndex=ta,O=(K.x-x.x)/L,H=(K.y-x.y)/S,O=O*O+H*H,1>=O&&T.candidates.push(t.makeVertexCandidate(N.getObjectId(la),D(x),Math.sqrt(O)))}}T.candidates.sort((la,
na)=>la.distance-na.distance);return T}_getPointCreator(n,D,N){const g=null==N||e.equals(D,N)?R=>R:R=>v.project(R,D,N),{hasZ:K}=this;return"3d"===n?K?({x:R,y:L,z:S})=>g({x:R,y:L,z:S}):({x:R,y:L})=>g({x:R,y:L,z:0}):({x:R,y:L})=>g({x:R,y:L})}async createSummaryStatisticsResponse(n){const {field:D,valueExpression:N,normalizationField:g,normalizationType:K,normalizationTotal:R,minValue:L,maxValue:S,scale:T,timeZone:Q}=n;var m=this.fieldsIndex.get(D);n=w.isDateField(m)||w.isDateOnlyField(m)||w.isTimestampOffsetField(m);
const B=await this._getDataValues({field:D,valueExpression:N,normalizationField:g,normalizationType:K,normalizationTotal:R,scale:T,timeZone:Q}),u=J.isNullCountSupported({normalizationType:K,normalizationField:g,minValue:L,maxValue:S}),x={value:.5,fieldType:m?.type};m=w.isStringField(m)?J.calculateStringStatistics({values:B,supportsNullCount:u,percentileParams:x}):J.calculateStatistics({values:B,minValue:L,maxValue:S,useSampleStdDev:!K,supportsNullCount:u,percentileParams:x});return J.processSummaryStatisticsResult(m,
n)}async createUniqueValuesResponse(n){const {field:D,valueExpression:N,domains:g,returnAllCodedValues:K,scale:R,timeZone:L}=n;var S=await this._getDataValues({field:D,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,valueExpression:N,scale:R,timeZone:L},!1);S=J.calculateUniqueValuesCount(S);return J.createUVResult(S,g,K,n.fieldDelimiter)}async createClassBreaksResponse(n){const {field:D,valueExpression:N,normalizationField:g,normalizationType:K,normalizationTotal:R,classificationMethod:L,
standardDeviationInterval:S,minValue:T,maxValue:Q,numClasses:m,scale:B,timeZone:u}=n;n=await this._getDataValues({field:D,valueExpression:N,normalizationField:g,normalizationType:K,normalizationTotal:R,scale:B,timeZone:u});n=J.calculateClassBreaks(n,{field:D,normalizationField:g,normalizationType:K,normalizationTotal:R,classificationMethod:L,standardDeviationInterval:S,minValue:T,maxValue:Q,numClasses:m});return J.resolveCBResult(n,L)}async createHistogramResponse(n){const {field:D,valueExpression:N,
normalizationField:g,normalizationType:K,normalizationTotal:R,classificationMethod:L,standardDeviationInterval:S,minValue:T,maxValue:Q,numBins:m,scale:B,timeZone:u}=n;n=await this._getDataValues({field:D,valueExpression:N,normalizationField:g,normalizationType:K,normalizationTotal:R,scale:B,timeZone:u});return J.calculateHistogram(n,{field:D,normalizationField:g,normalizationType:K,normalizationTotal:R,classificationMethod:L,standardDeviationInterval:S,minValue:T,maxValue:Q,numBins:m})}_sortFeatures(n,
D,N){if(1<n.length&&D?.length)for(const g of D.reverse()){D=g.split(" ");const K=D[0],R=this.fieldsIndex.get(K);D=D[1]?"desc"===D[1].toLowerCase():!1;const L=J.getAttributeComparator(R?.type,D);n.sort((S,T)=>{S=N(S,K,R);T=N(T,K,R);return L(S,T)})}}_createFeatureQueryResponse(n){const D=this.items,{geometryType:N,hasM:g,hasZ:K,objectIdField:R,spatialReference:L}=this,{outFields:S,outSR:T,quantizationParameters:Q,resultRecordCount:m,resultOffset:B,returnZ:u,returnM:x}=n,O=null!=m?D.length>(B||0)+m:
!1,H=S&&(S.includes("*")?[...this.fieldsIndex.fields]:S.map(U=>this.fieldsIndex.get(U)));return{exceededTransferLimit:O,features:this._createFeatures(n,D),fields:H,geometryType:N,hasM:g&&x,hasZ:K&&u,objectIdFieldName:R,spatialReference:d.cleanFromGeometryEngine(T||L),transform:Q&&C.toQuantizationTransform(Q)||null}}_createFeatures(n,D){const N=new q(n,this.featureAdapter,this.fieldsIndex),{hasM:g,hasZ:K}=this,{orderByFields:R,quantizationParameters:L,returnGeometry:S,returnCentroid:T,maxAllowableOffset:Q,
resultOffset:m,resultRecordCount:B,returnZ:u=!1,returnM:x=!1}=n,O=K&&u,H=g&&x;n=[];var U=0;const Y=[...D];this._sortFeatures(Y,R,(ta,pa,va)=>N.getFieldValue(ta,pa,va));if(this.geometryType&&(S||T)){var da=C.toQuantizationTransform(L)??void 0;D="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(S&&!T)for(var la of Y){var na=this.featureAdapter.getGeometry(la),ua={attributes:N.getAttributes(la),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,na,Q,da,
O,H)};D&&na&&!ua.geometry&&(ua.centroid=d.transformCentroid(this,this.featureAdapter.getCentroid(la,this),da));n[U++]=ua}else if(!S&&T)for(na of Y)n[U++]={attributes:N.getAttributes(na),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(na,this),da)};else for(ua of Y)n[U++]={attributes:N.getAttributes(ua),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(ua,this),da),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ua),Q,da,
O,H)}}else for(da of Y)(la=N.getAttributes(da))&&(n[U++]={attributes:la});U=m||0;null!=B&&(n=n.slice(U,Math.min(n.length,U+B)));return n}_createExceedsLimitQueryResponse(n){var D=!1;let N=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY;D=Number.POSITIVE_INFINITY;for(const K of n.outStatistics??[])if("exceedslimit"===K.statisticType){N=null!=K.maxPointCount?K.maxPointCount:Number.POSITIVE_INFINITY;g=null!=K.maxRecordCount?K.maxRecordCount:Number.POSITIVE_INFINITY;D=null!=K.maxVertexCount?K.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)D=this.items.length>N;else if(this.items.length>g)D=!0;else{n=p(this.hasZ,this.hasM);const K=this.featureAdapter;D=this.items.reduce((R,L)=>{L=K.getGeometry(L);return R+(null!=L&&L.coords.length||0)},0)/n>D}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(D)}}]}}async _createStatisticsQueryResponse(n){var D=
{attributes:{}};const N=[],g=new Map,K=new Map,R=new Map,L=new Map,S=new q(n,this.featureAdapter,this.fieldsIndex);var T=n.outStatistics;const {groupByFieldsForStatistics:Q,having:m,orderByFields:B,resultRecordCount:u}=n;n=Q?.length;const x=!!n,O=x?Q[0]:null,H=x&&!this.fieldsIndex.get(O);for(const na of T??[]){const {outStatisticFieldName:ua,statisticType:ta}=na;T=na;const pa="exceedslimit"!==ta?na.onStatisticField:void 0,va="percentile_disc"===ta||"percentile_cont"===ta;var U="EnvelopeAggregate"===
ta||"CentroidAggregate"===ta||"ConvexHullAggregate"===ta;const wa=x&&1===n&&(pa===O||H)&&"count"===ta;if(x){if(!R.has(pa)){var Y=[];for(const Da of Q){var da=this._getAttributeValues(S,Da,g);Y.push(da)}R.set(pa,this._calculateUniqueValues(Y,U?!1:S.returnDistinctValues))}Y=R.get(pa);if(!Y)continue;da=Object.keys(Y);for(const Da of da){const {count:Ia,data:Ra,items:Na,itemPositions:Sa}=Y[Da];da=Ra.join(",");if(!m||S.validateItems(Na,m)){const Va=L.get(da)||{attributes:{}};if(U){Va.aggregateGeometries||
(Va.aggregateGeometries={});const {aggregateGeometries:F,outStatisticFieldName:X}=await this._getAggregateGeometry(T,Na);Va.aggregateGeometries[X]=F}else{var la=null;if(wa)la=Ia;else{const F=this._getAttributeValues(S,pa,g);la=Sa.map(X=>F[X]);la=va&&"statisticParameters"in T?this._getPercentileValue(T,la):this._getStatisticValue(T,la,null,S.returnDistinctValues)}Va.attributes[ua]=la}let h=0;Q.forEach((F,X)=>Va.attributes[this.fieldsIndex.get(F)?F:`EXPR_${++h}`]=Ra[X]);L.set(da,Va)}}}else if(U){D.aggregateGeometries||
(D.aggregateGeometries={});const {aggregateGeometries:Da,outStatisticFieldName:Ia}=await this._getAggregateGeometry(T,this.items);D.aggregateGeometries[Ia]=Da}else U=this._getAttributeValues(S,pa,g),D.attributes[ua]=va&&"statisticParameters"in T?this._getPercentileValue(T,U):this._getStatisticValue(T,U,K,S.returnDistinctValues);T="min"!==ta&&"max"!==ta||!w.isStringField(this.fieldsIndex.get(pa))&&!this._isAnyDateField(pa)?null:this.fieldsIndex.get(pa)?.type;N.push({name:ua,alias:ua,type:T||"esriFieldTypeDouble"})}D=
x?Array.from(L.values()):[D];this._sortFeatures(D,B,(na,ua)=>na.attributes[ua]);u&&(D.length=Math.min(u,D.length));return{fields:N,features:D}}_isAnyDateField(n){n=this.fieldsIndex.get(n);return w.isDateField(n)||w.isDateOnlyField(n)||w.isTimestampOffsetField(n)||w.isTimeOnlyField(n)}async _getAggregateGeometry(n,D){const {convexHull:N,union:g}=await new Promise((u,x)=>c(["../../../geometry/geometryEngineJSON"],u,x)),{statisticType:K,outStatisticFieldName:R}=n,{featureAdapter:L,spatialReference:S,
geometryType:T,hasZ:Q,hasM:m}=this;D=D.map(u=>d.getGeometry(T,Q,m,L.getGeometry(u)));const B=N(S,D,!0)[0];n={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===K?(D=B?G.getPolygonExtent(B):G.getGeometryExtent(g(S,D)),n.aggregateGeometries={...D,spatialReference:S},n.outStatisticFieldName=R||"extent"):"CentroidAggregate"===K?(D=B?y.polygonCentroid(B):y.extentCentroid(G.getGeometryExtent(g(S,D))),n.aggregateGeometries={x:D[0],y:D[1],spatialReference:S},n.outStatisticFieldName=
R||"centroid"):"ConvexHullAggregate"===K&&(n.aggregateGeometries=B,n.outStatisticFieldName=R||"convexHull");return n}_getStatisticValue(n,D,N,g){const {onStatisticField:K,statisticType:R}=n;n=null;n=N?.has(K)?N.get(K):w.isStringField(this.fieldsIndex.get(K))||this._isAnyDateField(K)?J.calculateStringStatistics({values:D,returnDistinct:g}):J.calculateStatistics({values:g?[...(new Set(D))]:D,minValue:null,maxValue:null,useSampleStdDev:!0});N&&N.set(K,n);return n["var"===R?"variance":R]}_getPercentileValue(n,
D){const {onStatisticField:N,statisticParameters:g,statisticType:K}=n,{value:R,orderBy:L}=g;n=this.fieldsIndex.get(N);return J.calculatePercentile(D,{value:R,orderBy:L,fieldType:n?.type,isDiscrete:"percentile_disc"===K})}_getAttributeValues(n,D,N){if(N.has(D))return N.get(D);const g=this.fieldsIndex.get(D),K=this.items.map(R=>n.getFieldValue(R,D,g));N.set(D,K);return K}_calculateUniqueValues(n,D){const N={},g=this.items,K=g.length;for(let R=0;R<K;R++){const L=g[R],S=[];for(const Q of n)S.push(Q[R]);
const T=S.join(",");null==N[T]?N[T]={count:1,data:S,items:[L],itemPositions:[R]}:(D||N[T].count++,N[T].items.push(L),N[T].itemPositions.push(R))}return N}async _getDataValues(n,D=!0){const N=new q(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:g,scale:K,timeZone:R}=n;return g?N.getExpressionValues(this.items,g,{viewingMode:"map",scale:K,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},R):N.getDataValues(this.items,
A.clone(n),D)}}class l{constructor(n,D){this.coords=n;this.coordsIndex=D}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}f.QueryEngineResult=a;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(c,f){function A({scale:T,translate:Q},m){return Math.round((m-Q[0])/T[0])}function y({scale:T,translate:Q},
m){return Math.round((Q[1]-m)/T[1])}function G(T,Q,m){const B=[];let u,x,O,H;for(let U=0;U<m.length;U++){const Y=m[U];if(0<U){if(O=A(T,Y[0]),H=y(T,Y[1]),O!==u||H!==x)B.push(Q(Y,O-u,H-x)),u=O,x=H}else u=A(T,Y[0]),x=y(T,Y[1]),B.push(Q(Y,u,x))}return 0<B.length?B:null}function C(T,Q,m,B){return G(T,m?B?S:L:B?L:R,Q)}function e(T,Q,m,B){const u=[];m=m?B?S:L:B?L:R;for(B=0;B<Q.length;B++){const x=G(T,m,Q[B]);x&&3<=x.length&&u.push(x)}return u.length?u:null}function q(T,Q,m,B){const u=[];m=m?B?S:L:B?L:R;
for(B=0;B<Q.length;B++){const x=G(T,m,Q[B]);x&&2<=x.length&&u.push(x)}return u.length?u:null}function d({scale:T,translate:Q},m){return m*T[0]+Q[0]}function v({scale:T,translate:Q},m){return Q[1]-m*T[1]}function t(T,Q,m){const B=Array(m.length);if(!m.length)return B;const [u,x]=T.scale;let O=d(T,m[0][0]);T=v(T,m[0][1]);B[0]=Q(m[0],O,T);for(let H=1;H<m.length;H++){const U=m[H];O+=U[0]*u;T-=U[1]*x;B[H]=Q(U,O,T)}return B}function w(T,Q,m){const B=Array(m.length);for(let u=0;u<m.length;u++)B[u]=t(T,Q,
m[u]);return B}function J(T,Q,m,B){return t(T,m?B?S:L:B?L:R,Q)}function r(T,Q,m,B){return w(T,m?B?S:L:B?L:R,Q)}function p(T,Q,m,B){return w(T,m?B?S:L:B?L:R,Q)}function a(T,Q,m){let [B,u]=m[0],x=Math.min(B,Q[0]),O=Math.min(u,Q[1]),H=Math.max(B,Q[2]);Q=Math.max(u,Q[3]);for(let U=1;U<m.length;U++){const [Y,da]=m[U];B+=Y;u+=da;0>Y&&(x=Math.min(x,B));0<Y&&(H=Math.max(H,B));0>da?O=Math.min(O,u):0<da&&(Q=Math.max(Q,u))}T[0]=x;T[1]=O;T[2]=H;T[3]=Q;return T}function l(T,Q){if(!Q.length)return null;T[0]=T[1]=
Number.POSITIVE_INFINITY;T[2]=T[3]=Number.NEGATIVE_INFINITY;for(let m=0;m<Q.length;m++)a(T,T,Q[m]);return T}function n(T,Q,m,B,u){Q.xmin=A(T,m.xmin);Q.ymin=y(T,m.ymin);Q.xmax=A(T,m.xmax);Q.ymax=y(T,m.ymax);Q!==m&&(B&&(Q.zmin=m.zmin,Q.zmax=m.zmax),u&&(Q.mmin=m.mmin,Q.mmax=m.mmax));return Q}function D(T,Q,m,B,u){Q.points=C(T,m.points,B,u)??[];return Q}function N(T,Q,m,B,u){Q.x=A(T,m.x);Q.y=y(T,m.y);Q!==m&&(B&&(Q.z=m.z),u&&(Q.m=m.m));return Q}function g(T,Q,m,B,u){T=e(T,m.rings,B,u);if(!T)return null;
Q.rings=T;return Q}function K(T,Q,m,B,u){T=q(T,m.paths,B,u);if(!T)return null;Q.paths=T;return Q}const R=(T,Q,m)=>[Q,m],L=(T,Q,m)=>[Q,m,T[2]],S=(T,Q,m)=>[Q,m,T[2],T[3]];c.equals=function(T,Q){if(T===Q||null==T&&null==Q)return!0;if(null==T||null==Q)return!1;let m,B,u,x;T&&"upperLeft"===T.originPosition?(m=T.translate[0],B=T.translate[1],T=T.scale[0]):(m=null!=T.extent?T.extent.xmin:0,B=null!=T.extent?T.extent.ymax:0,T=T.tolerance);Q&&"upperLeft"===Q.originPosition?(u=Q.translate[0],x=Q.translate[1],
Q=Q.scale[0]):(u=null!=Q.extent?Q.extent.xmin:0,x=null!=Q.extent?Q.extent.ymax:0,Q=Q.tolerance);return m===u&&B===x&&T===Q};c.getQuantizedBoundsCoordsArray=a;c.getQuantizedBoundsCoordsArrayArray=l;c.getQuantizedBoundsPaths=function(T){return l([0,0,0,0],T)};c.getQuantizedBoundsPoints=function(T){const Q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(Q,Q,T)};c.getQuantizedBoundsRings=function(T){return l([0,0,0,0],T)};c.quantizeBounds=
function(T,Q,m){Q[0]=A(T,m[0]);Q[3]=y(T,m[1]);Q[2]=A(T,m[2]);Q[1]=y(T,m[3]);return Q};c.quantizeExtent=n;c.quantizeGeometry=function(T,Q){return T&&Q?f.isPoint(Q)?N(T,{},Q,!1,!1):f.isPolyline(Q)?K(T,{},Q,!1,!1):f.isPolygon(Q)?g(T,{},Q,!1,!1):f.isMultipoint(Q)?D(T,{},Q,!1,!1):f.isExtent(Q)?n(T,{},Q,!1,!1):null:null};c.quantizeMultipoint=D;c.quantizePaths=q;c.quantizePoint=N;c.quantizePoints=C;c.quantizePolygon=g;c.quantizePolyline=K;c.quantizeRings=e;c.quantizeX=A;c.quantizeY=y;c.toQuantizationTransform=
function(T){return T?{originPosition:"upper-left"===T.originPosition?"upperLeft":"lower-left"===T.originPosition?"lowerLeft":T.originPosition,scale:T.tolerance?[T.tolerance,T.tolerance]:[1,1],translate:null!=T.extent?[T.extent.xmin,T.extent.ymax]:[0,0]}:null};c.unquantizeBounds=function(T,Q,m){return m?(Q[0]=d(T,m[0]),Q[1]=v(T,m[3]),Q[2]=d(T,m[2]),Q[3]=v(T,m[1]),Q):[d(T,Q[0]),v(T,Q[3]),d(T,Q[2]),v(T,Q[1])]};c.unquantizeCoordsArray=t;c.unquantizeCoordsArrayArray=w;c.unquantizeExtent=function(T,Q,m,
B,u){Q.xmin=d(T,m.xmin);Q.ymin=v(T,m.ymin);Q.xmax=d(T,m.xmax);Q.ymax=v(T,m.ymax);Q!==m&&(B&&(Q.zmin=m.zmin,Q.zmax=m.zmax),u&&(Q.mmin=m.mmin,Q.mmax=m.mmax));return Q};c.unquantizeMultipoint=function(T,Q,m,B,u){null!=m&&(Q.points=J(T,m.points,B,u));return Q};c.unquantizePaths=r;c.unquantizePoint=function(T,Q,m,B,u){if(null==m)return Q;Q.x=d(T,m.x);Q.y=v(T,m.y);Q!==m&&(B&&(Q.z=m.z),u&&(Q.m=m.m));return Q};c.unquantizePoints=J;c.unquantizePolygon=function(T,Q,m,B,u){null!=m&&(Q.rings=p(T,m.rings,B,u));
return Q};c.unquantizePolyline=function(T,Q,m,B,u){null!=m&&(Q.paths=r(T,m.paths,B,u));return Q};c.unquantizeRings=p;c.unquantizeX=d;c.unquantizeY=v;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),function(c,f,A,y,G,C){class e{constructor(q,d,
v){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=q.returnDistinctValues??!1;this.fieldsIndex=v;this.featureAdapter=d;if((d=q.outFields)&&!d.includes("*")){this.outFields=d;q=0;for(const w of d){var t=c.getExpressionFromFieldName(w);t=(d=this.fieldsIndex.get(t))?null:c.getWhereClause(t,v);d=d?d.name:c.getAliasFromFieldName(w)||`FIELD_EXP_${q++}`;this._fieldDataCache.set(w,{alias:d,clause:t})}}}countDistinctValues(q){if(!this.returnDistinctValues)return q.length;
q.forEach(d=>this.getAttributes(d));return this._returnDistinctMap.size}getAttributes(q){q=this._processAttributesForOutFields(q);return this._processAttributesForDistinctValues(q)}getFieldValue(q,d,v){const t=v?v.name:d;let w=null;this._fieldDataCache.has(t)?w=this._fieldDataCache.get(t)?.clause:v||(w=c.getWhereClause(d,this.fieldsIndex),this._fieldDataCache.set(t,{alias:t,clause:w}));return v?this.featureAdapter.getAttribute(q,t):w?.calculateValue(q,this.featureAdapter)}getDataValues(q,d,v=!0){const t=
d.normalizationType,w=d.normalizationTotal,J=this.fieldsIndex.get(d.field),r=A.isDateOnlyField(J)||A.isTimestampOffsetField(J),p=A.isTimeOnlyField(J);return q.map(a=>{let l=d.field&&this.getFieldValue(a,d.field,this.fieldsIndex.get(d.field));d.field2?(l=`${G.processNullValue(l)}${d.fieldDelimiter}${G.processNullValue(this.getFieldValue(a,d.field2,this.fieldsIndex.get(d.field2)))}`,d.field3&&(l=`${l}${d.fieldDelimiter}${G.processNullValue(this.getFieldValue(a,d.field3,this.fieldsIndex.get(d.field3)))}`)):
"string"===typeof l&&v&&(r?l=l?(new Date(l)).getTime():null:p&&(l=l?y.timeOnlyToMilliseconds(l):null));t&&Number.isFinite(l)&&(a="field"===t&&d.normalizationField?this.getFieldValue(a,d.normalizationField,this.fieldsIndex.get(d.normalizationField)):null,l=G.getNormalizedValue(l,t,a,w));return l})}async getExpressionValues(q,d,v,t,w){const {arcadeUtils:J}=await C.loadArcade(),r=J.hasGeometryOperations(d);r&&await J.enableGeometryOperations();const p=J.createFunction(d),a=J.getViewInfo(v),l={fields:this.fieldsIndex.fields};
return q.map(n=>{n={attributes:this.featureAdapter.getAttributes(n),layer:l,geometry:r?{...f.getGeometry(t.geometryType,t.hasZ,t.hasM,this.featureAdapter.getGeometry(n)),spatialReference:v?.spatialReference}:null};n=J.createExecContext(n,a,w);return J.executeFunction(p,n)})}validateItem(q,d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testFeature(q,this.featureAdapter)??!1}validateItems(q,
d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testSet(q,this.featureAdapter)??!1}_processAttributesForOutFields(q){const d=this.outFields;if(!d?.length)return this.featureAdapter.getAttributes(q);const v={};for(const t of d){const {alias:w,clause:J}=this._fieldDataCache.get(t);v[w]=J?J.calculateValue(q,this.featureAdapter):this.featureAdapter.getAttribute(q,w)}return v}_processAttributesForDistinctValues(q){if(null==
q||!this.returnDistinctValues)return q;var d=this.outFields,v=[];if(d)for(const w of d){var {alias:t}=this._fieldDataCache.get(w);v.push(q[t])}else for(t in q)v.push(q[t]);d=`${(d||["*"]).join(",")}=${v.join(",")}`;v=this._returnDistinctMap.get(d)||0;this._returnDistinctMap.set(d,++v);return 1<v?null:q}}return e})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t,w,J,r){function p(g){g=N.exec(g);if(!g)return null;const {hh:K,mm:R,ss:L,ms:S}=g.groups;return Number(K)*G.millisecondsPerTimeUnit.hours+Number(R)*G.millisecondsPerTimeUnit.minutes+Number(L)*G.millisecondsPerTimeUnit.seconds+Number(S||0)}function a(g,K){g=null!=g?g:"";null!=K&&K&&(g=g?"("+g+") AND ("+K+")":K);return g}function l(g){const K=g.layer;return g.fields.filter(R=>!K.getField(R))}function n(g){const K=g.layer;return g.fields.filter(R=>{R=K.getFieldUsageInfo(R);
return!R||!R.supportsStatistics})}let D=null;const N=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;c.calculateHeatmapStats=function(g,K=18,R,L,S){const T=new Float64Array(L*S);K=Math.round(y.pt2px(K));let Q=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY;R=v.createValueFunction(R);for(const {geometry:x,attributes:O}of g){const {x:H,y:U}=x;g=Math.max(0,H-K);var B=Math.max(0,U-K);const Y=Math.min(S,U+K),da=Math.min(L,H+K),la=+R(O);for(;B<Y;B++)for(let na=
g;na<da;na++){var u=B*L+na;const ua=v.evaluateDensityKernel(na-H,B-U,K)*la;u=T[u]+=ua;Q=Math.min(Q,u);m=Math.max(m,u)}}return{min:Q,max:m}};c.getDataValues=async function(g,K,R=!0){if(!K)return[];const {field:L,field2:S,field3:T,fieldDelimiter:Q,fieldInfos:m,timeZone:B}=g;var u=L&&m?.find(pa=>pa.name.toLowerCase()===L.toLowerCase());const x=u?d.isTimeOnlyField(u):!1,O=u?t.isAnyDateField(u):!1,H=g.valueExpression,U=g.normalizationType,Y=g.normalizationField,da=g.normalizationTotal,la=[];u=g.viewInfoParams;
let na=null,ua=null;if(H){if(!D){const {arcadeUtils:pa}=await J.loadArcade();D=pa}D.hasGeometryOperations(H)&&await D.enableGeometryOperations();na=D.createFunction(H);ua=u?D.getViewInfo({viewingMode:u.viewingMode,scale:u.scale,spatialReference:new C(u.spatialReference)}):null}g=g.fieldInfos;const ta=K[0]&&"declaredClass"in K[0]&&"esri.Graphic"===K[0].declaredClass||!g?null:{fields:g};K.forEach(pa=>{var va=pa.attributes;if(H){var wa=D.createExecContext(ta?{...pa,layer:ta}:pa,ua,B);wa=D.executeFunction(na,
wa)}else va&&(wa=va[L],S?(wa=`${w.processNullValue(wa)}${Q}${w.processNullValue(va[S])}`,T&&(wa=`${wa}${Q}${w.processNullValue(va[T])}`)):"string"===typeof wa&&R&&(O?wa=wa?(new Date(wa)).getTime():null:x&&(wa=wa?p(wa):null)));U&&"number"===typeof wa&&isFinite(wa)&&(va=va&&parseFloat(va[Y]),wa=w.getNormalizedValue(wa,U,va,da));la.push(wa)});return la};c.getRangeExpr=function(g,K,R){K=null!=K?g+" \x3e\x3d "+K:"";g=null!=R?g+" \x3c\x3d "+R:"";R="";return(R=K&&g?a(K,g):K||g)?"("+R+")":""};c.getSQLFilterForNormalization=
function(g){const K=g.field,R=g.normalizationType;g=g.normalizationField;let L;if("field"===R)L="(NOT "+g+" \x3d 0)";else if("log"===R||"natural-log"===R||"square-root"===R)L=`(${K} > 0)`;return L};c.getSumOfAttributesExpr=function(g,K,R){const L=[],S=[],T=[],Q=[],m=[];g.forEach((x,O)=>{const H=x.field?"field":"expression",U=x.field||x.valueExpression;x.field?(m.push(U),S.push(`var ${H}${O} = Number($feature["${U}"]);`)):(L.push(`function getValueForExpr${O}() {\n  ${U} \n}`),S.push(`var ${H}${O} = Number(getValueForExpr${O}());`));
R||T.push(`${H}${O} = IIf(${H}${O} < 0, 0, ${H}${O});`);Q.push(`${H}${O}`)});g="return sum;";const B=L.length?null:m.reduce((x,O)=>`${x} + ${O}`);let u=null;K||R?K?R||(g="return IIf(sum \x3e\x3d 0, sum, null);",B&&(u=`(( ${B} ) >= 0)`)):(g="return IIf(sum !\x3d 0, sum, null);",B&&(u=`(( ${B} ) <> 0)`)):(g="return IIf(sum \x3e 0, sum, null);",B&&(u=`(( ${B} ) > 0)`));return{valueExpression:[L.length?L.join("\n"):"",S.join("\n"),T.join("\n"),`var sum = ${Q.join(" + ")};`,g].filter(Boolean).join("\n\n"),
sqlExpression:B,sqlWhere:u}};c.mergeWhereClauses=a;c.quantizeFeatures=function(g,K,R,L){const S=q.isWrappable(R)?q.getInfo(R):null,T=S?Math.round((S.valid[1]-S.valid[0])/K.scale[0]):null;return g.map(Q=>{const m=new r(Q.geometry);e.quantizePoint(K,m,m,m.hasZ,m.hasM);if(S){var B=T??0,u=L[0];0>m.x?m.x+=B:m.x>u&&(m.x-=B)}Q.geometry=m;return Q})};c.timeOnlyToMilliseconds=p;c.verifyBasicFieldValidity=function(g,K,R){const L=l({layer:g,fields:K});if(L.length)return new A(R,"Unknown fields: "+L.join(", ")+
". You can only use fields defined in the layer schema");g=n({layer:g,fields:K});if(g.length)return new A(R,"Unsupported fields: "+g.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};c.verifyFieldType=function(g,K,R,L){let S;K?K.name!==g.objectIdField&&L.includes(K.type)||(S=new A(R,"'field' should be one of these types: "+L.join(","))):S=new A(R,"'field' is not defined in the layer schema");return S};c.verifyFilterValidty=function(g,
K){if(g&&"intersects"!==g.spatialRelationship)return new A(K,"Only 'intersects' spatialRelationship is supported for featureFilter")};c.verifyNumericField=function(g,K,R){let L;K?K.name!==g.objectIdField&&d.isNumericField(K)||(L=new A(R,"'field' should be one of these numeric types: "+d.numericTypes.join(","))):L=new A(R,"'field' is not defined in the layer schema");return L};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(c){function f(y){return y?
72*y/96:0}const A=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;c.castRenderScreenPointArray=function(y){return y};c.castRenderScreenPointArray3=function(y){return y};c.castScreenPointArray=function(y){return y};c.createRenderScreenPoint=function(y=0,G=0){return{x:y,y:G}};c.createRenderScreenPointArray=function(y=0,G=0){return[y,G]};c.createRenderScreenPointArray3=function(y=0,G=0,C=0){return[y,G,C]};c.createScreenPoint=function(y=0,G=0){return{x:y,y:G}};c.createScreenPointArray=function(y=0,G=0){return[y,
G]};c.pt2px=function(y){return y?y/72*96:0};c.px2pt=f;c.screenPointArrayToObject=function(y,G){return G?(G.x=y[0],G.y=y[1],G):{x:y[0],y:y[1]}};c.screenPointObjectToArray=function(y,G){return G?(G[0]=y.x,G[1]=y.y,2<G.length&&(G[2]=0),G):[y.x,y.y]};c.toPt=function(y){if("string"===typeof y){var G=y.match(A);if(G){var C=Number(G[1]);G=G[3]&&G[3].toLowerCase();y="-"===y.charAt(0);C="px"===G?f(C):C;return y?-C:C}console.warn("screenUtils.toPt: input not recognized!");return null}return y};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(c,f,A,y){function G(q,d,v){return 0===q?0:q*e[d]/e[v]}function C(q){switch(q){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const e={milliseconds:1,seconds:1E3,
minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};c.convertTime=G;c.isValidDate=function(q){return q instanceof Date&&!isNaN(q.getTime())};c.makeUTCTime=function(q,d,v="milliseconds"){d=new Date(G(d,v,"milliseconds"));d.setUTCFullYear(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate());return d};c.mergeTimeExtents=function(q,d){return q&&d?q.intersection(d):q||d};c.millisecondsPerTimeUnit=e;c.offsetDate=function(q,d,v,t=A.system){t=new y.IANAZone(f.resolveTimeZone(t));
q=y.DateTime.fromJSDate(q,{zone:t});t="decades"===v||"centuries"===v?"year":C(v);"decades"===v&&(d*=10);"centuries"===v&&(d*=100);return q.plus({[t]:d}).toJSDate()};c.offsetDateUTC=function(q,d,v="milliseconds"){q=q.getTime();d=G(d,v,"milliseconds");return new Date(q+d)};c.resetUTCDate=function(q,d){q=new Date(q.getTime());q.setUTCFullYear(d.getFullYear(),d.getMonth(),d.getDate());return q};c.timeSinceUTCMidnight=function(q,d="milliseconds"){const v=G(q.getUTCHours(),"hours","milliseconds"),t=G(q.getUTCMinutes(),
"minutes","milliseconds"),w=G(q.getUTCSeconds(),"seconds","milliseconds");q=q.getUTCMilliseconds();return G(v+t+w+q,"milliseconds",d)};c.truncateDate=function(q,d,v=A.system){v=new y.IANAZone(f.resolveTimeZone(v));q=y.DateTime.fromJSDate(q,{zone:v});if("decades"===d||"centuries"===d)return q=q.startOf("year"),{year:v}=q,q.set({year:v-v%("decades"===d?10:100)}).toJSDate();d=C(d);return q.startOf(d).toJSDate()};c.truncateLocalTime=function(q){const d=new Date(0);d.setHours(0);d.setMinutes(0);d.setSeconds(0);
d.setMilliseconds(0);d.setFullYear(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate());return d};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(c,f,A,y,G){function C(e,q,d,v){let {color:t,ratio:w}=q,{color:J,ratio:r}=d;r===w&&(1===r?w-=1E-6:r+=1E-6);q=f.clamp((v-w)/(r-w),0,1);y.lerp(e,t.toArray(),
J.toArray(),q)}c.createValueFunction=function(e){return"function"===typeof e?e:e?q=>+q[e]:()=>1};c.evaluateDensityKernel=function(e,q,d){e=Math.sqrt(e**2+q**2)/d;return 1<e?0:3/(Math.PI*d**2)*(1-e**2)**2};c.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(e){return A.px2pt(2.4*e)};c.generateGradient=function(e){const q=new Uint8ClampedArray(2048);e=e.filter(({ratio:J})=>0<=J&&1>=J).sort((J,r)=>J.ratio-r.ratio).map(({color:J,ratio:r})=>({color:J,ratio:Math.max(r,.001)}));if(1>e.length)return q;
let d=e[0],v=e[0],t=1;const w=G.create();for(let J=0;512>J;J++){const r=(J+.5)/512;for(;r>v.ratio&&t<e.length;)d=v,v=e[t++];C(w,d,v,r);q.set(w,4*J)}return q};c.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(e){return A.pt2px(e)/2.4};c.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),
function(c,f,A,y,G,C){function e(r){return String(r).padStart(2,"0")}function q(r,p,a){if("date"===p||"number"===p){"number"===p&&(r=new Date(r));p=a?r.getFullYear():r.getUTCFullYear();const l=e((a?r.getMonth():r.getUTCMonth())+1),n=e(a?r.getDate():r.getUTCDate()),D=e(a?r.getHours():r.getUTCHours()),N=e(a?r.getMinutes():r.getUTCMinutes());r=e(a?r.getSeconds():r.getUTCSeconds());r=`TIMESTAMP'${p}-${l}-${n} ${D}:${N}:${r}'`}return r}function d(r,p){if(p instanceof Date)return"date";if("number"===typeof p)return"number";
if("string"===typeof p&&(r=r.getField(p),"\x3cnow\x3e"!==p.toLowerCase()&&A.isDateField(r)))return"field"}const v={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},t={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},w=new Set(["integer","small-integer"]);let J=null;c.castIntegerFieldToFloat=function(r){return`cast(${r} as float)`};c.dateTypes=
["date","date-only","timestamp-offset"];c.defaultBasemapGroups=v;c.fieldDelimiter=",";c.formatAnyDate=function(r,p){const {format:a,timeZoneOptions:l,fieldType:n}=p??{};let D;l&&({timeZone:N,timeZoneName:D}=C.getTimeZoneFormattingOptions(l.layerTimeZone,l.datesInUnknownTimezone,l.viewTimeZone,f.convertDateFormatToIntlOptions(a||"short-date-short-time"),n));if("string"===typeof r&&isNaN(Date.parse("time-only"===n?`1970-01-01T${r}Z`:r)))return r;switch(n){case "date-only":var N=f.convertDateFormatToIntlOptions(a||
"short-date");return"string"===typeof r?f.formatDateOnly(r,{...N}):f.formatDate(r,{...N,timeZone:C.utc});case "time-only":return N=f.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof r?f.formatTimeOnly(r,N):f.formatDate(r,{...N,timeZone:C.utc});case "timestamp-offset":if(!N&&"string"===typeof r&&(new Date(r)).toISOString()!==r)return r;N=(p=a||l?f.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...p,timeZone:N,timeZoneName:D}:void 0;return"string"===typeof r?f.formatTimestamp(r,
N):f.formatDate(r,N);default:return p=a||l?f.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,f.formatDate("string"===typeof r?new Date(r):r,p?{...p,timeZone:N,timeZoneName:D}:void 0)}};c.getBasemapGroup=function(r,p=v){for(const a in p)if(p[a].includes(r))return a};c.getBasemapId=function(r,p,a=!0){let l=null;r&&("string"===typeof r?p.includes(r)&&(l=r):l=G.getWellKnownBasemapId(r));return a?l||"gray":l};c.getDateDiffSQL=function(r,p,a,l){const {hasQueryEngine:n}=r;a=q(a,d(r,a),
n);r=q(p,d(r,p),n);r=`(${a} - ${r})`;l=t[l];p="/";1>l&&(l=1/l,p="*");return{sqlExpression:1===l?r:`(${r} ${p} ${l})`,sqlWhere:null}};c.getDateType=d;c.getFieldsList=async function(r){const {field:p,field2:a,field3:l,normalizationField:n,valueExpression:D}=r;r=[];D&&(J||({arcadeUtils:r}=await y.loadArcade(),J=r),r=J.extractFieldNames(D));p&&r.push(p);a&&r.push(a);l&&r.push(l);n&&r.push(n);return r};c.getNormalizationType=function(r){let p=r.normalizationType;p||(r.normalizationField?p="field":null!=
r.normalizationTotal&&(p="percent-of-total"));return p??void 0};c.isAnyDateField=function(r){return A.isDateField(r)||A.isDateOnlyField(r)||A.isTimestampOffsetField(r)};c.isIntegerField=function(r,p){r=p&&r.getField(p);return!!r&&w.has(r.type)};c.unitValueInDays=t;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(c,f,A,y,G,C,e,q,d,v){function t(B,u){let x;if("string"===typeof B){const O=B in v.esriBasemapDefinitions,H=!O&&B.includes("/");if(!O&&!H)return u=Object.entries(v.esriBasemapDefinitions).filter(([,U])=>A.apiKey&&!U.classic||!A.apiKey&&(U.classic||U.is3d)).map(([U])=>`"${U}"`).sort().join(", "),G.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${B}. Try one of these: ${u}`),null;u&&(x=u[B]);x||(x=O?f.fromId(B):new f({style:{id:B}}),u&&(u[B]=x))}else x=q.ensureType(f,
B);x?.destroyed&&(G.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:x}),x=null);return x}function w(B){if(Q)return Q(B);let u=null;B=a(B);const x=!B?.baseLayers.length;for(const H in v.esriBasemapDefinitions){var O=N(v.esriBasemapDefinitions[H]);O=K(B,O,{mustMatchReferences:x});if("equal"===O){u=H;break}"base-layers-equal"===O&&(u=H)}return u}function J(B,u){const x=new y;B.forEach(O=>{const H=u.find(U=>"scene"!==U.type&&L(n(O),n(U)))||O;x.includes(H)?
x.push(O):x.push(H)});return x}function r(B){if(p(B.url))return!0;if("vector-tile"===B.type)for(const u in B.sourceNameToSource)if(p(B.sourceNameToSource[u]?.sourceUrl))return!0;return!1}function p(B){if(!B)return!1;B=new e.Url(e.makeAbsolute(B));return!!B.authority&&m.test(B.authority)}function a(B){return B?!B.loaded&&B.resourceInfo?N(B.resourceInfo.data):{baseLayers:l(B.baseLayers),referenceLayers:l(B.referenceLayers)}:null}function l(B){return(y.isCollection(B)?B.toArray():B).map(n)}function n(B){return{type:B.type,
effect:"effect"in B?B.effect:void 0,url:S("urlTemplate"in B&&B.urlTemplate||B.url||"styleUrl"in B&&B.styleUrl||""),minScale:"minScale"in B&&null!=B.minScale?B.minScale:0,maxScale:"maxScale"in B&&null!=B.maxScale?B.maxScale:0,opacity:null!=B.opacity?B.opacity:1,visible:null!=B.visible?!!B.visible:!0,sublayers:"map-image"!==B.type&&"wms"!==B.type||null==B.sublayers?void 0:B.sublayers?.map(u=>({id:u.id,visible:u.visible})),activeLayerId:"wmts"===B.type?B.activeLayer?.id:void 0}}function D(B){return B.isReference||
"ArcGISSceneServiceLayer"===B.layerType}function N(B){return B?{baseLayers:g((B.baseMapLayers??[]).filter(u=>!D(u))),referenceLayers:g((B.baseMapLayers??[]).filter(u=>D(u)))}:null}function g(B){return B.map(u=>{let x;switch(u.layerType){case "VectorTileLayer":x="vector-tile";break;case "ArcGISTiledMapServiceLayer":x="tile";break;case "ArcGISSceneServiceLayer":x="scene";break;default:x="unknown"}return{type:x,effect:u.effect,url:S(u.templateUrl||u.urlTemplate||u.styleUrl||u.url),minScale:u.minScale??
0,maxScale:u.maxScale??0,opacity:u.opacity??1,visible:null!=u.visibility?!!u.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function K(B,u,x){return null!=B!==(null!=u)?"not-equal":B&&u?R(B.baseLayers,u.baseLayers)?R(B.referenceLayers,u.referenceLayers)?"equal":x.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function R(B,u){if(B.length!==u.length)return!1;for(let x=0;x<B.length;x++)if(!L(B[x],u[x]))return!1;return!0}function L(B,u){if(B.type!==u.type||B.url!==u.url||
B.minScale!==u.minScale||B.maxScale!==u.maxScale||B.visible!==u.visible||B.opacity!==u.opacity||!d.effectEquals(B.effect,u.effect))return!1;if(null!=B.activeLayerId||null!=u.activeLayerId)return B.activeLayerId===u.activeLayerId;if(null!=B.sublayers||null!=u.sublayers){if(null==B.sublayers||null==u.sublayers||B.sublayers.length!==u.sublayers.length)return!1;for(let x=0;x<B.sublayers.length;x++){const O=B.sublayers.at(x),H=u.sublayers.at(x);if(O?.id!==H?.id||O?.visible!==H?.visible)return!1}}return!0}
function S(B){return B?e.normalize(B).replace(/^\s*https?:/i,"").toLowerCase():""}function T(B){return"portalItem"in B?B.portalItem?.thumbnailUrl:void 0}let Q;const m=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;c.clonePreservingTiledLayers=function(B,u=null){B=t(B);if(!B)return null;B=B.clone();u&&(B.baseLayers=J(B.baseLayers,u.baseLayers),B.referenceLayers=J(B.referenceLayers,u.referenceLayers));return B};c.contentEquals=function(B,u){if(B===u||null!=B?.portalItem?.id&&B.portalItem.id===u?.portalItem?.id)return!0;
B=a(B);u=a(u);return"equal"===K(B,u,{mustMatchReferences:!0})};c.createCache=function(){return{}};c.destroyCache=function(B){for(const u in B)C.destroyMaybe(B[u]),delete B[u]};c.ensureType=t;c.findSpatialReference=function(B,u){if(null==u||null==B)return{spatialReference:null,updating:!1};if("not-loaded"===u.loadStatus)return u.load(),{spatialReference:null,updating:!0};if(u.spatialReference)return{spatialReference:u.spatialReference,updating:!1};if(0===u.baseLayers.length)return{spatialReference:null,
updating:!1};u=u.baseLayers.at(0);switch(u.loadStatus){case "not-loaded":u.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}u=(("supportedSpatialReferences"in u?u.supportedSpatialReferences:null)||["tileInfo"in u?u.tileInfo?.spatialReference:u.spatialReference]).filter(Boolean);const x=B.spatialReference;return x?{spatialReference:u.find(O=>x.equals(O))??u[0]??null,updating:!1}:{spatialReference:u[0],updating:!1}};c.getBasemapThumbnailUrl=
function(B){if(!B)return null;var {thumbnailUrl:u}=B;return u?u:(u=w(B))?v.esriBasemapDefinitions[u].thumbnailUrl:C.mappedFind(B.baseLayers,T)};c.getWellKnownBasemapId=w;c.hasDeveloperBasemapLayer=function(B){return!!B?.baseLayers.concat(B.referenceLayers).some(r)};c.isBasemap3D=function(B){return"Web Scene"===B.portalItem?.type||B.referenceLayers.some(u=>"scene"===u.type)};c.isBasemapInBeta=function(B){return!!B?.portalItem?.tags?.some(u=>"beta"===u.toLowerCase())};c.isBasemapLayer=function(B,u){return B.basemap?.referenceLayers?.some(x=>
x.uid===u)||B.basemap?.baseLayers?.some(x=>x.uid===u)};c.isDeveloperBasemapLayer=r;c.overrideGetWellKnownBasemapId=function(B){Q=B};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t,w,J,r,p,a,l,n,D,N,g,K,R){var L;let S=0;C=L=class extends C.JSONSupportMixin(q){constructor(m){super(m);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+S++;this.baseLayers=new y;this.referenceLayers=new y;const B=u=>{u.parent&&u.parent!==this&&"remove"in u.parent&&u.parent.remove(u);u.parent=this;"elevation"===u.type&&v.getLogger(this).error(`Layer '${u.title}, id:${u.id}' of type '${u.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",u=>B(u.item)),this.referenceLayers.on("after-add",u=>B(u.item)),this.baseLayers.on("after-remove",u=>{u.item.parent=null}),this.referenceLayers.on("after-remove",u=>{u.item.parent=null})])}initialize(){this.when().catch(m=>{v.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,m)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var m=this.baseLayers.toArray();for(const B of m)B.destroy();
m=this.referenceLayers.toArray();for(const B of m)B.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=t.destroyMaybe(this.portalItem)}normalizeCtorArgs(m){m&&"resourceInfo"in m&&(this._set("resourceInfo",m.resourceInfo),m={...m},delete m.resourceInfo);return m}set baseLayers(m){this._set("baseLayers",G.referenceSetter(m,this._get("baseLayers")))}_writeBaseLayers(m,B,u){const x=[];m&&(u={...u,layerContainerType:"basemap"},this.baseLayers.forEach(O=>{O=R.getLayerJSON(O,
u.webmap?u.webmap.getLayerJSONFromResourceInfo(O):null,u);null!=O&&x.push(O)}),this.referenceLayers.forEach(O=>{const H=R.getLayerJSON(O,u.webmap?u.webmap.getLayerJSONFromResourceInfo(O):null,u);null!=H&&("scene"!==O.type&&(H.isReference=!0),x.push(H))}));B.baseMapLayers=x}set referenceLayers(m){this._set("referenceLayers",G.referenceSetter(m,this._get("referenceLayers")))}writeTitle(m,B){B.title=m||"Basemap"}load(m){this.addResolvingPromise(this._loadFromSource(m));return Promise.resolve(this)}loadAll(){return d.loadAll(this,
m=>{m(this.baseLayers,this.referenceLayers)})}clone(){const m={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(B=>e.isClonable(B)?B.clone():B),referenceLayers:this.referenceLayers.map(B=>e.isClonable(B)?B.clone():B)};this.loaded&&(m.loadStatus="loaded");return(new L({resourceInfo:this.resourceInfo})).set(m)}read(m,B){this.resourceInfo||this._set("resourceInfo",{data:m,context:B});super.read(m,B)}write(m,B){m=m||{};B?.origin||(B={origin:"web-map",...B});super.write(m,
B);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(m.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(u=>{u=e.clone(u);u.url&&J.isProtocolRelative(u.url)&&(u.url=`https:${u.url}`);u.templateUrl&&J.isProtocolRelative(u.templateUrl)&&(u.templateUrl=`https:${u.templateUrl}`);return u}));return m}async _loadFromSource(m){const {resourceInfo:B,portalItem:u,style:x}=this;w.throwIfAborted(m);const O=[];B?(O.push(this._loadLayersFromJSON(B.data,B.context?B.context.url:null,m)),B.data.id&&!B.data.title&&
O.push(g.getBasemapTitle(B.data.id).then(H=>{H&&this.read({title:H},B.context)}))):u?O.push(this._loadFromItem(u,m)):x&&O.push(this._loadFromStylesService(x,m));await Promise.all(O)}async _loadLayersFromJSON(m,B,u){const x=this.resourceInfo?.context,O=this.portalItem?.portal||x?.portal||null,H=Q[x?.origin||""]??"web-map",{populateOperationalLayers:U}=await new Promise((da,la)=>c(["./layers/support/layersCreator"],da,la)),Y=[];w.throwIfAborted(u);if(m.baseMapLayers&&Array.isArray(m.baseMapLayers)){B=
{context:{...x,origin:H,url:B,portal:O,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const da=la=>"web-scene"===H&&"ArcGISSceneServiceLayer"===la.layerType||la.isReference;u=U(this.baseLayers,m.baseMapLayers.filter(la=>!da(la)),B);Y.push(u);m=U(this.referenceLayers,m.baseMapLayers.filter(da),B);Y.push(m)}await Promise.allSettled(Y)}async _loadFromItem(m,B){const u=await (await m.load(B)).fetchData("json",B),x=J.urlToObject(m.itemUrl??"");this._set("resourceInfo",{data:u.baseMap??
{},context:{origin:T[m.type||""]??"web-map",portal:m.portal||D.getDefault(),url:x}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:u.spatialReference},this.resourceInfo.context);this.read({title:m.title,thumbnailUrl:m.thumbnailUrl},{origin:"portal-item",portal:m.portal||D.getDefault(),url:x});return this._loadLayersFromJSON(this.resourceInfo.data,x,B)}async _loadFromStylesService(m,B){var u=`${m.serviceUrl}/${m.id}`;m=(await A(u,{query:{language:m.getLanguageParamValue(),
places:m.places,worldview:m.worldview},signal:B?.signal})).data;u=J.urlToObject(u);this._set("resourceInfo",{data:m.baseMap??{},context:{origin:"web-map",url:u}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:m.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,u,B)}static fromId(m){return(m=g.esriBasemapDefinitions[m])?m.itemId?new L({portalItem:{id:m.itemId,portal:{url:"https://www.arcgis.com"}}}):L.fromJSON(m,
{origin:m.is3d?"web-scene":"web-map"}):null}};f.__decorate([r.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(m,B,u,x){this._writeBaseLayers(m,B,x)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:y}},writer(m,B,u,x){this._writeBaseLayers(m,B,x)}}}}}})],C.prototype,"baseLayers",null);f.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],C.prototype,"id",void 0);f.__decorate([r.property({type:N})],C.prototype,"portalItem",void 0);
f.__decorate([r.property()],C.prototype,"referenceLayers",null);f.__decorate([r.property({readOnly:!0})],C.prototype,"resourceInfo",void 0);f.__decorate([r.property({type:n})],C.prototype,"spatialReference",void 0);f.__decorate([r.property({type:K})],C.prototype,"style",void 0);f.__decorate([r.property()],C.prototype,"thumbnailUrl",void 0);f.__decorate([r.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],C.prototype,"title",void 0);f.__decorate([l.writer("title")],C.prototype,
"writeTitle",null);C=L=f.__decorate([a.subclass("esri.Basemap")],C);const T={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Q={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return C})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(c,f){c.castForReferenceSetter=function(A){return A};c.referenceSetter=function(A,y,G=f){y||=new G;if(y===A)return y;y.removeAll();A&&(Array.isArray(A)||"items"in A&&Array.isArray(A.items))?
y.addMany(A):A&&y.add(A);return y};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,f,A,y,G,C,e,q){const d=v=>{v=class extends v{constructor(...t){super(...t);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(w=>
{const J=this.load.bind(this);this.load=r=>{const p=new Promise((a,l)=>{const n=G.onAbortOrThrow(r,l);this.destroyed&&l(new f("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,l).finally(()=>{n&&n.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const a=this._loadController=new AbortController;J({signal:a.signal})}w();return p}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},w=>{this._set("loadStatus","failed");this._set("loadError",w);this._loadController=null})}destroy(){this._loadController&&(this._loadController=A.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new f("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};c.__decorate([e.property({readOnly:!0})],v.prototype,"loaded",null);c.__decorate([e.property({readOnly:!0})],v.prototype,"loadError",void 0);c.__decorate([e.property({clonable:!1})],v.prototype,"loadStatus",void 0);c.__decorate([e.property({type:[C],readOnly:!0})],v.prototype,"loadWarnings",null);return v=c.__decorate([q.subclass("esri.core.Loadable")],v)};y=class extends d(y.EsriPromise){};y=c.__decorate([q.subclass("esri.core.Loadable")],
y);(function(v){v.LoadableMixin=d;v.isLoadable=function(t){return!(!t||!t.load)}})(y||={});return y})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(c,f,A,y,G){var C;(function(d){d[d.PENDING=0]="PENDING";d[d.RESOLVED=1]="RESOLVED";d[d.REJECTED=2]="REJECTED"})(C||={});class e{constructor(){this._resolver=y.createResolver();this._status=C.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=C.RESOLVED;this._cleanUp()},()=>{this._status=C.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(d){this._resolvingPromises.push(d);this._tryResolve()}isResolved(){return this._status===C.RESOLVED}isRejected(){return this._status===C.REJECTED}isFulfilled(){return this._status!==C.PENDING}abort(){this._resolver.reject(y.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var d=
y.createResolver(),v=[...this._resolvingPromises,d.promise],t=this._allPromise=Promise.all(v);t.then(()=>{this.isFulfilled()||this._allPromise!==t||this._resolver.resolve()},w=>{this.isFulfilled()||this._allPromise!==t||y.isAbortError(w)||this._resolver.reject(w)});d.resolve()}}}const q=d=>{d=class extends d{constructor(...v){super(...v);this._promiseProps=new e;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(v,
t){return this._promiseProps.promise.then(()=>this).then(v,t)}catch(v){return this.when(null,v)}addResolvingPromise(v){v&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in v?v.when():v)}};return d=f.__decorate([G.subclass("esri.core.Promise")],d)};c.EsriPromise=class extends q(A){};c.EsriPromise=f.__decorate([G.subclass("esri.core.Promise")],c.EsriPromise);c.EsriPromiseMixin=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(c,f,A,y){async function G(C,e){const q=[],d=(...t)=>{for(const w of t)null!=w&&(Array.isArray(w)?d(...w):A.isCollection(w)?w.forEach(J=>d(J)):y.isLoadable(w)&&q.push(w))};e(d);let v=null;await f.map(q,async t=>{t=await f.result("loadAll"in t&&"function"===typeof t.loadAll?t.loadAll():t.load());!1!==t.ok||v||(v=t)});if(v)throw v.error;return C}c.loadAll=async function(C,e){await C.load();return G(C,e)};c.loadAllChildren=G;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t,w,J,r,p,a,l,n,D,N,g,K,R,L){function S(x){const O=y.id;return()=>{const H=x.deref();H&&O.findCredential(H.restUrl)&&H.signIn().catch(()=>{})}}const T=x=>Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));var Q;let m;const B={PortalGroup:()=>Promise.resolve({default:N}),PortalItem:()=>new Promise((x,O)=>c(["./PortalItem"],H=>x(T(H)),O)),PortalUser:()=>Promise.resolve({default:R})};e=Q=class extends e.JSONSupportMixin(q){constructor(x){super(x);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=
this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=A.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(x){return"string"===typeof x?{url:x}:x}destroy(){u.unregister(this);
this.defaultBasemap=d.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=d.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=d.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=d.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(x){if(x)for(const O of x)A.request.trustedServers.includes(O)||A.request.trustedServers.push(O);return x}readDefaultBasemap(x){return this._readBasemap(x)}readDefaultDevBasemap(x){return this._readBasemap(x)}readDefaultVectorBasemap(x){return this._readBasemap(x)}get extraQuery(){const x=
!this.user?.orgId||this.canSearchPublic;return this.id&&!x?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let x=this.url;if(x){const O=x.indexOf("/sharing");x=0<O?x.substring(0,O):this.url.replace(/\/+$/,"");x+="/sharing/rest"}return x}get thumbnailUrl(){const x=this.restUrl,O=this.thumbnail;return x&&O?this._normalizeSSL(x+"/portals/self/resources/"+O):null}readUrlKey(x){return x?x.toLowerCase():
x}readUser(x){let O=null;x&&(O=R.fromJSON(x),O.portal=this);return O}load(x){const O=(new Promise((H,U)=>c(["../Basemap"],Y=>H(T(Y)),U))).then(({default:H})=>{v.throwIfAborted(x);m=H}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,x)).then(H=>{if(y.id){const U=y.id;this.credential=U.findCredential(this.restUrl);this.credential||this.authMode!==Q.AUTH_MODE_AUTO&&this.authMode!==Q.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
U.on("credential-create",S(new WeakRef(this))),u.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=H;this.read(H)});this.addResolvingPromise(O);return Promise.resolve(this)}async createElevationLayers(){await this.load();const x=this._getHelperService("defaultElevationLayers"),O=(await new Promise((H,U)=>c(["../layers/ElevationLayer"],Y=>H(T(Y)),U))).default;return x?x.map(H=>new O({id:H.id,url:H.url})):[]}async fetchBasemaps(x,O){const H=await this._fetchBasemaps(x,O);!0===
O?.include3d&&!1!==this.use3dBasemaps&&(x=await this._fetchBasemaps3D(x,O),H.unshift(...x));return H}fetchCategorySchema(x){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",x).then(O=>O.categorySchema):v.isAborted(x)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(x){const O=this.featuredGroups,H=new g;H.num=100;H.sortField="title";if(O&&O.length){const U=[];for(const Y of O)U.push(`(title:"${Y.title}" AND owner:${Y.owner})`);H.query=
U.join(" OR ");return this.queryGroups(H,x).then(Y=>Y.results)}return v.isAborted(x)?Promise.reject(v.createAbortError()):Promise.resolve([])}fetchRegions(x){const O=this.user?.culture||this.culture||n.getLocale();return this.request(this.restUrl+"/portals/regions",{...x,query:{culture:O}})}fetchSettings(x){const O=this.user?.culture||this.culture||n.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...x,query:{culture:O}})}static getDefault(){return D.ensureDefaultPortalInstance(()=>
new Q)}queryGroups(x,O){return this.queryPortal("/community/groups",x,"PortalGroup",O)}queryItems(x,O){return this.queryPortal("/search",x,"PortalItem",O)}queryUsers(x,O){x.sortField||(x.sortField="username");return this.queryPortal("/community/users",x,"PortalUser",O)}fetchSelf(x=this.authMode,O=!1,H){const U=this.restUrl+"/portals/self";x={authMode:x,query:{culture:n.getLocale().toLowerCase()},withCredentials:!0,...H};"auto"===x.authMode&&(x.authMode="no-prompt");O&&(x.query.default=!0);return this.request(U,
x)}queryPortal(x,O,H,U){const Y=w.ensureType(g,O),da=la=>this.request(this.restUrl+x,{...Y.toRequestOptions(this),...U}).then(na=>{const ua=Y.clone();ua.start=na.nextStart;return new K({nextQueryParams:ua,queryParams:Y,total:na.total,results:Q._resultsToTypedArray(la,{portal:this},na,U)})}).then(na=>Promise.all(na.results.map(ua=>"function"===typeof ua.when?ua.when():na)).then(()=>na,ua=>{v.throwIfAbortError(ua);return na}));return H&&B[H]?B[H]().then(({default:la})=>{v.throwIfAborted(U);return da(la)}):
da()}signIn(){if(this.authMode===Q.AUTH_MODE_ANONYMOUS||this.authMode===Q.AUTH_MODE_NO_PROMPT&&!y.id)return Promise.reject(new C("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const x=O=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return O||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
O;return this.fetchSelf("immediate")});if(this.user&&this.credential===O)return null;this.credential=O;return this.fetchSelf("immediate")}).then(H=>{H&&(this.sourceJSON=H,this.read(H))});return y.id?y.id.getCredential(this.restUrl,{prompt:this.authMode!==Q.AUTH_MODE_NO_PROMPT}).then(O=>x(O)):x(this.credential)}normalizeUrl(x){const O=this.credential?.token;return this._normalizeSSL(O?x+(x.includes("?")?"\x26":"?")+"token\x3d"+O:x)}requestToTypedArray(x,O,H){return this.request(x,O).then(U=>{const Y=
Q._resultsToTypedArray(H,{portal:this},U);return Promise.all(Y.map(da=>"function"===typeof da.when?da.when():U)).then(()=>Y,()=>Y)})}request(x,O={}){var H={f:"json",...O.query};const {authMode:U=this.authMode===Q.AUTH_MODE_ANONYMOUS||this.authMode===Q.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:Y=null,cacheBust:da=!1,method:la="auto",responseType:na="json",signal:ua}=O;H={authMode:U,body:Y,cacheBust:da,method:la,query:H,responseType:na,timeout:0,signal:ua};O.withCredentials&&(H.withCredentials=
!0);return G(this._normalizeSSL(x),H).then(ta=>ta.data)}toJSON(){throw new C("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(x){if(!x)return null;if(x.declaredClass)throw Error("JSON object is already hydrated");return new Q({sourceJSON:x})}_getHelperService(x){const O=this.helperServices&&this.helperServices[x];if(!O)throw new C("portal:service-not-found",`The \`helperServices\` do not include an entry named "${x}"`);return O}async _fetchBasemaps(x,O){const H=
new g;H.query=x||(A.apiKey&&L.supportsApiKey(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);H.disableExtraQuery=!0;x=await this.queryGroups(H,O);if(!x.total)return[];x=x.results[0];H.num=100;H.query='type:"Web Map" -type:"Web Application"';H.sortField=x.sortField||"name";H.sortOrder=x.sortOrder||"desc";O=await x.queryItems(H,O);return O.total?O.results.filter(U=>"Web Map"===U.type).map(U=>new m({portalItem:U})):
[]}async _fetchBasemaps3D(x,O){x=x||this.basemapGalleryGroupQuery3D;if(!x)return[];x=new g({query:x,disableExtraQuery:!0});var H=await this.queryGroups(x,O);if(!H.total)return[];H=H.results[0];x.num=100;x.query='type:"Web Scene"';x.sortField=H.sortField||"name";x.sortOrder=H.sortOrder||"desc";O=await H.queryItems(x,O);return O.total?O.results.filter(U=>"Web Scene"===U.type).map(U=>new m({portalItem:U})):[]}_normalizeSSL(x){return x.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(x){return x?
(x=m.fromJSON(x),x.portalItem={portal:this},x):null}static _resultsToTypedArray(x,O,H,U){let Y=[];if(H){const da=null!=U?U.signal:null;Y=H.listings||H.notifications||H.userInvitations||H.tags||H.items||H.groups||H.comments||H.provisions||H.results||H.relatedItems||H;if(x||O)Y=Y.map(la=>{la=Object.assign(x?x.fromJSON(la):la,O);"function"===typeof la.load&&la.load(da);return la})}else Y=[];return Y}};e.AUTH_MODE_ANONYMOUS="anonymous";e.AUTH_MODE_AUTO="auto";e.AUTH_MODE_IMMEDIATE="immediate";e.AUTH_MODE_NO_PROMPT=
"no-prompt";f.__decorate([t.property()],e.prototype,"access",void 0);f.__decorate([t.property()],e.prototype,"allSSL",void 0);f.__decorate([t.property()],e.prototype,"authMode",void 0);f.__decorate([t.property()],e.prototype,"authorizedCrossOriginDomains",void 0);f.__decorate([p.reader("authorizedCrossOriginDomains")],e.prototype,"readAuthorizedCrossOriginDomains",null);f.__decorate([t.property()],e.prototype,"basemapGalleryGroupQuery",void 0);f.__decorate([t.property({json:{name:"3DBasemapGalleryGroupQuery"}})],
e.prototype,"basemapGalleryGroupQuery3D",void 0);f.__decorate([t.property()],e.prototype,"bingKey",void 0);f.__decorate([t.property()],e.prototype,"canListApps",void 0);f.__decorate([t.property()],e.prototype,"canListData",void 0);f.__decorate([t.property()],e.prototype,"canListPreProvisionedItems",void 0);f.__decorate([t.property()],e.prototype,"canProvisionDirectPurchase",void 0);f.__decorate([t.property()],e.prototype,"canSearchPublic",void 0);f.__decorate([t.property()],e.prototype,"canShareBingPublic",
void 0);f.__decorate([t.property()],e.prototype,"canSharePublic",void 0);f.__decorate([t.property()],e.prototype,"canSignInArcGIS",void 0);f.__decorate([t.property()],e.prototype,"canSignInIDP",void 0);f.__decorate([t.property()],e.prototype,"colorSetsGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"commentsEnabled",void 0);f.__decorate([t.property({type:Date})],e.prototype,"created",void 0);f.__decorate([t.property()],e.prototype,"credential",void 0);f.__decorate([t.property()],e.prototype,
"culture",void 0);f.__decorate([t.property()],e.prototype,"currentVersion",void 0);f.__decorate([t.property()],e.prototype,"customBaseUrl",void 0);f.__decorate([t.property()],e.prototype,"defaultBasemap",void 0);f.__decorate([p.reader("defaultBasemap")],e.prototype,"readDefaultBasemap",null);f.__decorate([t.property()],e.prototype,"defaultDevBasemap",void 0);f.__decorate([p.reader("defaultDevBasemap")],e.prototype,"readDefaultDevBasemap",null);f.__decorate([t.property({type:l})],e.prototype,"defaultExtent",
void 0);f.__decorate([t.property()],e.prototype,"defaultVectorBasemap",void 0);f.__decorate([p.reader("defaultVectorBasemap")],e.prototype,"readDefaultVectorBasemap",null);f.__decorate([t.property()],e.prototype,"description",void 0);f.__decorate([t.property()],e.prototype,"devBasemapGalleryGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"eueiEnabled",void 0);f.__decorate([t.property({readOnly:!0})],e.prototype,"extraQuery",null);f.__decorate([t.property()],e.prototype,"featuredGroups",
void 0);f.__decorate([t.property()],e.prototype,"featuredItemsGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"galleryTemplatesGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"livingAtlasGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"hasCategorySchema",void 0);f.__decorate([t.property()],e.prototype,"helpBase",void 0);f.__decorate([t.property()],e.prototype,"helperServices",void 0);f.__decorate([t.property()],e.prototype,"helpMap",void 0);f.__decorate([t.property()],
e.prototype,"homePageFeaturedContent",void 0);f.__decorate([t.property()],e.prototype,"homePageFeaturedContentCount",void 0);f.__decorate([t.property()],e.prototype,"httpPort",void 0);f.__decorate([t.property()],e.prototype,"httpsPort",void 0);f.__decorate([t.property()],e.prototype,"id",void 0);f.__decorate([t.property()],e.prototype,"ipCntryCode",void 0);f.__decorate([t.property({readOnly:!0})],e.prototype,"isOrganization",null);f.__decorate([t.property()],e.prototype,"isPortal",void 0);f.__decorate([t.property()],
e.prototype,"isReadOnly",void 0);f.__decorate([t.property({readOnly:!0})],e.prototype,"itemPageUrl",null);f.__decorate([t.property()],e.prototype,"layerTemplatesGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"maxTokenExpirationMinutes",void 0);f.__decorate([t.property({type:Date})],e.prototype,"modified",void 0);f.__decorate([t.property()],e.prototype,"name",void 0);f.__decorate([t.property()],e.prototype,"portalHostname",void 0);f.__decorate([t.property()],e.prototype,"portalMode",void 0);
f.__decorate([t.property()],e.prototype,"portalProperties",void 0);f.__decorate([t.property()],e.prototype,"region",void 0);f.__decorate([t.property({readOnly:!0})],e.prototype,"restUrl",null);f.__decorate([t.property()],e.prototype,"rotatorPanels",void 0);f.__decorate([t.property()],e.prototype,"showHomePageDescription",void 0);f.__decorate([t.property()],e.prototype,"sourceJSON",void 0);f.__decorate([t.property()],e.prototype,"staticImagesUrl",void 0);f.__decorate([t.property({json:{name:"2DStylesGroupQuery"}})],
e.prototype,"stylesGroupQuery2d",void 0);f.__decorate([t.property({json:{name:"stylesGroupQuery"}})],e.prototype,"stylesGroupQuery3d",void 0);f.__decorate([t.property()],e.prototype,"supportsHostedServices",void 0);f.__decorate([t.property()],e.prototype,"symbolSetsGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"templatesGroupQuery",void 0);f.__decorate([t.property()],e.prototype,"thumbnail",void 0);f.__decorate([t.property({readOnly:!0})],e.prototype,"thumbnailUrl",null);f.__decorate([t.property()],
e.prototype,"units",void 0);f.__decorate([t.property()],e.prototype,"url",void 0);f.__decorate([t.property()],e.prototype,"urlKey",void 0);f.__decorate([p.reader("urlKey")],e.prototype,"readUrlKey",null);f.__decorate([t.property()],e.prototype,"user",void 0);f.__decorate([p.reader("user")],e.prototype,"readUser",null);f.__decorate([t.property()],e.prototype,"use3dBasemaps",void 0);f.__decorate([t.property()],e.prototype,"useStandardizedQuery",void 0);f.__decorate([t.property()],e.prototype,"useVectorBasemaps",
void 0);f.__decorate([t.property()],e.prototype,"vectorBasemapGalleryGroupQuery",void 0);f=e=Q=f.__decorate([a.subclass("esri.portal.Portal")],e);const u=new FinalizationRegistry(x=>{x.remove()});return f})},"esri/portal/portalDefault":function(){define(["exports"],function(c){let f;c.clearDefaultPortalInstance=function(){f=void 0};c.ensureDefaultPortalInstance=function(A){if(!f||f.destroyed)f=A();return f};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(c,f,A,y,G,C,e,q,d){var v;A=v=class extends A.JSONSupport{constructor(t){super(t);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const t=this.url,w=this.thumbnail;return t&&w&&this.portal?this.portal?.normalizeUrl(`${t}/info/${w}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:
null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(w=>{w=w.categorySchema||[];return w.some(J=>"contentCategorySetsGroupQuery.LivingAtlas"===J.source)?this._fetchCategorySchemaSet("LivingAtlas",t):w})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let w=this.thumbnailUrl;w&&t&&(w+=`&w=${t}`);return w}toJSON(){throw new f("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(t){if(!t)return null;
if(t.declaredClass)throw Error("JSON object is already hydrated");const w=new v;w.sourceJSON=t;w.read(t);return w}queryItems(t,w){t=G.ensureType(d,t);const J=this.portal;if(5<parseFloat(J.currentVersion))return t=t||new d,J.queryPortal(`/content/groups/${this.id}/search`,t,"PortalItem",w);t=t?t.clone():new d;t.query="group:"+this.id+(t.query?" "+t.query:"");return J.queryItems(t,w)}_fetchCategorySchemaSet(t,w){const J=this.portal;return J.fetchSelf(J.authMode,!0,w).then(r=>{if(r=r.contentCategorySetsGroupQuery){const p=
new d;p.disableExtraQuery=!0;p.num=1;p.query=r;return J.queryGroups(p,w)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(r=>{if(r.total){r=r.results[0];const p=new d;p.num=1;p.query=`typekeywords:"${t}"`;return r.queryItems(p,w)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(r=>r.total?r.results[0].fetchData("json",w).then(p=>{p=p?.categorySchema;return p?.length?p:[]}):[])}};c.__decorate([y.property()],
A.prototype,"access",void 0);c.__decorate([y.property({type:Date})],A.prototype,"created",void 0);c.__decorate([y.property()],A.prototype,"description",void 0);c.__decorate([y.property()],A.prototype,"id",void 0);c.__decorate([y.property()],A.prototype,"isInvitationOnly",void 0);c.__decorate([y.property({type:Date})],A.prototype,"modified",void 0);c.__decorate([y.property()],A.prototype,"owner",void 0);c.__decorate([y.property()],A.prototype,"portal",void 0);c.__decorate([y.property()],A.prototype,
"snippet",void 0);c.__decorate([y.property()],A.prototype,"sortField",void 0);c.__decorate([y.property()],A.prototype,"sortOrder",void 0);c.__decorate([y.property()],A.prototype,"sourceJSON",void 0);c.__decorate([y.property()],A.prototype,"tags",void 0);c.__decorate([y.property()],A.prototype,"thumbnail",void 0);c.__decorate([y.property({readOnly:!0})],A.prototype,"thumbnailUrl",null);c.__decorate([y.property()],A.prototype,"title",void 0);c.__decorate([y.property({readOnly:!0})],A.prototype,"url",
null);return A=v=c.__decorate([q.subclass("esri.portal.PortalGroup")],A)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(c,f,A,y,G,C,e,q,d,v,t){var w;const J=new A.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});f=w=class extends f{constructor(r){super(r);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(r){"asc"!==r&&"desc"!==r||this._set("sortOrder",r)}clone(){return new w({categories:this.categories?y.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(r,p){let a=[];this.categories&&(a=this.categories.map(D=>Array.isArray(D)?JSON.stringify(D):D));let l="";if(this.extent){var n=t.project(this.extent,v.WGS84);null!=n&&(l=`${n.xmin},${n.ymin},${n.xmax},${n.ymax}`)}n=this.query;!this.disableExtraQuery&&r.extraQuery&&(n="("+n+")"+r.extraQuery);r={categories:a,bbox:l,q:n,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(r.sortField=this.sortField.split(",").map(D=>J.toJSON(D.trim())).join(","),r.sortOrder=this.sortOrder);return{query:{...p,...r}}}};c.__decorate([G.property()],f.prototype,"categories",void 0);c.__decorate([G.property()],f.prototype,"disableExtraQuery",void 0);c.__decorate([G.property({type:d})],f.prototype,"extent",void 0);c.__decorate([G.property()],f.prototype,"filter",void 0);c.__decorate([G.property()],f.prototype,"num",void 0);c.__decorate([G.property()],
f.prototype,"query",void 0);c.__decorate([G.property()],f.prototype,"sortField",void 0);c.__decorate([G.property()],f.prototype,"sortOrder",null);c.__decorate([G.property()],f.prototype,"start",void 0);return f=w=c.__decorate([q.subclass("esri.portal.PortalQueryParams")],f)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,f,A,y,G,C,e){f=class extends f{constructor(q){super(q);this.total=this.results=this.queryParams=this.nextQueryParams=null}};c.__decorate([A.property()],f.prototype,"nextQueryParams",void 0);c.__decorate([A.property()],f.prototype,"queryParams",void 0);c.__decorate([A.property()],f.prototype,"results",void 0);c.__decorate([A.property()],f.prototype,"total",void 0);return f=c.__decorate([e.subclass("esri.portal.PortalQueryResult")],f)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t){var w;y=w=class extends y.JSONSupport{constructor(...J){super(...J);this.userType=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const J=this.url,r=this.thumbnail;return J&&r?this.portal.normalizeUrl(`${J}/info/${r}?f=json`):null}get userContentUrl(){const J=this.portal?.restUrl;
return J?`${J}/content/users/${this.username}`:null}get url(){const J=this.portal?.restUrl;return J?`${J}/community/users/${this.username}`:null}addItem(J){const r=J&&J.item;var p=J?.data;J=J?.folder;const a={method:"post"};r&&(a.query=r.createPostQuery(),null!=p&&("string"===typeof p?a.query.text=p:"object"===typeof p&&(a.query.text=JSON.stringify(p))));p=this.userContentUrl;J&&(p+="/"+("string"===typeof J?J:J.id));return this.portal.request(p+"/addItem",a).then(l=>{r.id=l.id;r.portal=this.portal;
return r.loaded?r.reload():r.load()})}deleteItem(J){let r=this.userContentUrl;J.ownerFolder&&(r+="/"+J.ownerFolder);return this.portal.request(r+`/items/${J.id}/delete`,{method:"post"}).then(()=>{J.id=null;J.portal=null})}deleteItems(J){const r=this.userContentUrl+"/deleteItems";var p=J.map(a=>a.id);return p.length?(p={method:"post",query:{items:p.join(",")}},this.portal.request(r,p).then(()=>{J.forEach(a=>{a.id=null;a.portal=null})})):Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??
"",{query:{num:1}}).then(J=>J&&J.folders?J.folders.map(r=>{r=v.fromJSON(r);r.portal=this.portal;return r}):[])}fetchGroups(){return this.portal.request(this.url??"").then(J=>J&&J.groups?J.groups.map(r=>{r=t.fromJSON(r);r.portal=this.portal;return r}):[])}fetchItems(J){const r=J??{};let p=this.userContentUrl??"";r.folder&&(p+="/"+r.folder.id);let a;return(new Promise((l,n)=>c(["./PortalItem"],D=>l(Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}))),
n))).then(({default:l})=>{a=l;return this.portal.request(p,{query:{folders:!1,num:r.num||10,start:r.start||1,sortField:r.sortField||"created",sortOrder:r.sortOrder||"asc"}})}).then(l=>{let n;return l?.items?(n=l.items.map(D=>{D=a.fromJSON(D);D.portal=this.portal;return D}),Promise.all(n.map(D=>D.load())).catch(D=>D).then(()=>({items:n,nextStart:l.nextStart,total:l.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(J=>J.tags)}getThumbnailUrl(J){let r=
this.thumbnailUrl;r&&J&&(r+=`&w=${J}`);return r}queryFavorites(J){return this.favGroupId?(this._favGroup||(this._favGroup=new t({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(J)):Promise.reject(new A("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new A("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(J){if(!J)return null;if(J.declaredClass)throw Error("JSON object is already hydrated");
const r=new w;r.sourceJSON=J;r.read(J);return r}};f.__decorate([G.property()],y.prototype,"access",void 0);f.__decorate([G.property({type:Date})],y.prototype,"created",void 0);f.__decorate([G.property()],y.prototype,"culture",void 0);f.__decorate([G.property()],y.prototype,"description",void 0);f.__decorate([G.property()],y.prototype,"email",void 0);f.__decorate([G.property()],y.prototype,"favGroupId",void 0);f.__decorate([G.property()],y.prototype,"fullName",void 0);f.__decorate([G.property({type:Date})],
y.prototype,"modified",void 0);f.__decorate([G.property()],y.prototype,"orgId",void 0);f.__decorate([G.property()],y.prototype,"portal",void 0);f.__decorate([G.property()],y.prototype,"preferredView",void 0);f.__decorate([G.property()],y.prototype,"privileges",void 0);f.__decorate([G.property()],y.prototype,"region",void 0);f.__decorate([G.property()],y.prototype,"role",void 0);f.__decorate([G.property()],y.prototype,"roleId",void 0);f.__decorate([G.property()],y.prototype,"sourceJSON",void 0);f.__decorate([G.property()],
y.prototype,"thumbnail",void 0);f.__decorate([G.property({readOnly:!0})],y.prototype,"thumbnailUrl",null);f.__decorate([G.property()],y.prototype,"units",void 0);f.__decorate([G.property({readOnly:!0})],y.prototype,"userContentUrl",null);f.__decorate([G.property({readOnly:!0})],y.prototype,"url",null);f.__decorate([G.property()],y.prototype,"username",void 0);f.__decorate([G.property()],y.prototype,"userType",void 0);return y=w=f.__decorate([d.subclass("esri.portal.PortalUser")],y)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,f,A,y,G,C,e,q){A=class extends A.JSONSupport{constructor(d){super(d);this.username=this.title=this.portal=this.id=this.created=null}get url(){const d=this.portal?.restUrl;return d?`${d}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new f("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};c.__decorate([y.property({type:Date})],A.prototype,"created",void 0);c.__decorate([y.property()],A.prototype,"id",void 0);c.__decorate([y.property()],A.prototype,
"portal",void 0);c.__decorate([y.property()],A.prototype,"title",void 0);c.__decorate([y.property({readOnly:!0})],A.prototype,"url",null);c.__decorate([y.property()],A.prototype,"username",void 0);return A=c.__decorate([q.subclass("esri.portal.PortalFolder")],A)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t,w,J,r,p,a,l){var n;const D=new Set("Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;GeoJson;CSV;KML;WFS;WMTS;WMS;Feed".split(";")),N=new Set(["KML","GeoJson","CSV"]);G=n=class extends G.JSONSupportMixin(e){static from(g){return v.ensureClass(n,g)}constructor(g){super(g);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=this.avgRating=this.applicationProxies=
this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const g=this.type,K=this.typeKeywords||[];let R=g;"Feature Service"===g||"Feature Collection"===
g?R=K.includes("Table")?"Table":K.includes("Route Layer")?"Route Layer":K.includes("Markup")?"Markup":"Feature Layer":"Image Service"===g?R=K.includes("Elevation 3D Layer")?"Elevation Layer":K.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===g?R="Scene Layer":"Video Service"===g?R="Video Layer":"Scene Package"===g?R="Scene Layer Package":"Stream Service"===g?R="Feature Layer":"Geoprocessing Service"===g?R=K.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===
g?R="GeoEnrichment Service":"Geocoding Service"===g?R="Locator":"Microsoft Powerpoint"===g?R="Microsoft PowerPoint":"GeoJson"===g?R="GeoJSON":"Globe Service"===g?R="Globe Layer":"Vector Tile Service"===g?R="Tile Layer":"netCDF"===g?R="NetCDF":"Map Service"===g?R=K.includes("Spatiotemporal")||!K.includes("Hosted Service")&&!K.includes("Tiled")||K.includes("Relational")?"Map Image Layer":"Tile Layer":g&&g.toLowerCase().includes("add in")?R=g.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===
g?R="Big Data File Share":"Compact Tile Package"===g?R="Tile Package (tpkx)":"Raster function template"===g?R="Raster Function Template":"OGCFeatureServer"===g?R="OGC Feature Layer":"web mapping application"===g&&K.includes("configurableApp")?R="Instant App":"Insights Page"===g?R="Insights Report":"Excalibur Imagery Project"===g&&(R="Excalibur Project");return R}readExtent(g){return g&&g.length?new J(g[0][0],g[0][1],g[1][0],g[1][1]):null}get iconUrl(){var g=this.type?.toLowerCase()||"";const K=this.typeKeywords||
[];var R=!1,L=!1;let S=!1,T=!1,Q=!1,m=!1;R=L=!1;0<g.indexOf("service")||"feature collection"===g||"kml"===g||"wms"===g||"wmts"===g||"wfs"===g?(R=K.includes("Hosted Service"),"feature service"===g||"feature collection"===g||"kml"===g||"wfs"===g?(L=K.includes("Table"),S=K.includes("Route Layer"),T=K.includes("Markup"),Q=K.includes("Spatiotemporal"),m=K.includes("UtilityNetwork"),g=Q&&L?"spatiotemporaltable":L?"table":S?"routelayer":T?"markup":Q?"spatiotemporal":m?"utilitynetwork":R?"featureshosted":
"features"):"map service"===g||"wms"===g||"wmts"===g?(Q=K.includes("Spatiotemporal"),L=K.includes("Relational"),g=Q||L?"mapimages":R||K.includes("Tiled")||"wmts"===g?"maptiles":"mapimages"):g="scene service"===g?K.includes("Line")?"sceneweblayerline":K.includes("3DObject")?"sceneweblayermultipatch":K.includes("Point")?"sceneweblayerpoint":K.includes("IntegratedMesh")?"sceneweblayermesh":K.includes("PointCloud")?"sceneweblayerpointcloud":K.includes("Polygon")?"sceneweblayerpolygon":K.includes("Building")?
"sceneweblayerbuilding":K.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===g?K.includes("Elevation 3D Layer")?"elevationlayer":K.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===g?"streamlayer":"vector tile service"===g?"vectortile":"datastore catalog service"===g?"datastorecollection":"geocoding service"===g?"geocodeservice":"video service"===g?K.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===g?K.includes("Web Tool")?
"tool":"layers":"geodata service"===g?"geodataservice":"3dtiles service"===g?K.includes("3DObject")?"3dobjecttileslayer":K.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):g="web map"===g||"cityengine web scene"===g?"maps":"web scene"===g?K.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===g&&K.includes("configurableApp")?"instantapps":"web mapping application"===g||"mobile application"===g||"application"===g||"operation view"===
g||"desktop application"===g?"apps":"map document"===g||"map package"===g||"published map"===g||"scene document"===g||"globe document"===g||"basemap package"===g||"mobile basemap package"===g||"mobile map package"===g||"project package"===g||"project template"===g||"pro map"===g||"layout"===g||"layer"===g&&K.includes("ArcGIS Pro")||"explorer map"===g&&K.indexOf("Explorer Document")?"mapsgray":"service definition"===g||"csv"===g||"shapefile"===g||"cad drawing"===g||"geojson"===g||"netcdf"===g||"administrative report"===
g?"datafiles":"360 vr experience"===g?"360vr":"explorer add in"===g||"desktop add in"===g||"windows viewer add in"===g||"windows viewer configuration"===g?"appsgray":"arcgis pro add in"===g||"arcgis pro configuration"===g?"addindesktop":"rule package"===g||"file geodatabase"===g||"sqlite geodatabase"===g||"csv collection"===g||"kml collection"===g||"windows mobile package"===g||"map template"===g||"desktop application template"===g||"gml"===g||"arcpad package"===g||"code sample"===g||"document link"===
g||"earth configuration"===g||"operations dashboard add in"===g||"rules package"===g||"image"===g||"workflow manager package"===g||"explorer map"===g&&K.includes("Explorer Mapping Application")||K.includes("Document")?"datafilesgray":"network analysis service"===g||"geoprocessing service"===g||"geodata service"===g||"geometry service"===g||"geoprocessing package"===g||"locator package"===g||"geoprocessing sample"===g||"workflow manager service"===g?"toolsgray":"layer"===g||"layer package"===g||"explorer layer"===
g?"layersgray":"scene package"===g?"scenepackage":"3dtiles package"===g?"3dtileslayerpackage":"3dtiles service"===g?"3dtileslayer":"mobile scene package"===g?"mobilescenepackage":"tile package"===g||"compact tile package"===g?"tilepackage":"task file"===g?"taskfile":"report template"===g?"report-template":"statistical data collection"===g?"statisticaldatacollection":"insights workbook"===g?"workbook":"insights model"===g?"insightsmodel":"insights page"===g?"insightspage":"insights theme"===g?"insightstheme":
"hub initiative"===g?"hubinitiative":"hub page"===g?"hubpage":"hub site application"===g?"hubsite":"hub event"===g?"hubevent":"hub project"===g?"hubproject":"relational database connection"===g?"relationaldatabaseconnection":"big data file share"===g?"datastorecollection":"image collection"===g?"imagecollection":"desktop style"===g?"desktopstyle":"style"===g?"style":"dashboard"===g?"dashboard":"raster function template"===g?"rasterprocessingtemplate":"vector tile package"===g?"vectortilepackage":
"ortho mapping project"===g?"orthomappingproject":"ortho mapping template"===g?"orthomappingtemplate":"solution"===g?"solutions":"geopackage"===g?"geopackage":"deep learning package"===g?"deeplearningpackage":"real time analytic"===g?"realtimeanalytics":"big data analytic"===g?"bigdataanalytics":"feed"===g?"feed":"excalibur imagery project"===g?"excaliburimageryproject":"notebook"===g?"notebook":"storymap"===g?"storymap":"survey123 add in"===g?"survey123addin":"mission"===g?"mission":"mission report"===
g?"missionreport":"mission template"===g?"missiontemplate":"quickcapture project"===g?"quickcaptureproject":"pro report"===g?"proreport":"pro report template"===g?"proreporttemplate":"urban model"===g?"urbanmodel":"web experience"===g?"experiencebuilder":"web experience template"===g?"webexperiencetemplate":"experience builder widget"===g?"experiencebuilderwidget":"experience builder widget package"===g?"experiencebuilderwidgetpackage":"workflow"===g?"workflow":"kernel gateway connection"===g?"kernelgatewayconnection":
"insights script"===g?"insightsscript":"hub initiative template"===g?"hubinitiativetemplate":"storymap theme"===g?"storymaptheme":"knowledge graph"===g?"knowledgegraph":"knowledge studio project"===g?"knowledgestudio":"native application"===g?"nativeapp":"native application installer"===g?"nativeappinstaller":"link chart"===g?"linkchart":"investigation"===g?"investigation":"ogcfeatureserver"===g?"features":"pro project"===g?"proproject":"insights workbook package"===g?"insightsworkbookpackage":"apache parquet"===
g?"apacheparquet":"notebook code snippets"===g||"notebook code snippet library"===g?"notebookcodesnippets":"suitability model"===g?"suitabilitymodel":"esri classifier definition"===g?"classifierdefinition":"esri classification schema"===g?"classificationschema":"insights data engineering workbook"===g?"dataengineeringworkbook":"insights data engineering model"===g?"dataengineeringmodel":"deep learning studio project"===g?"deeplearningproject":"discussion"===g?"discussion":"allsource project"===g?
"allsourceproject":"api key"===g?"apikey":"data pipeline"===g?"datapipelines":"group layer"===g?(R=K.includes("Map"))?"layergroup2d":"layergroup":"media layer"===g?"onlinemedialayer":"form"===g?K.includes("Survey123")?"survey":"datafilesgray":"maps";return g?A.getAssetUrl("esri/images/portal/"+g+"16.png"):null}get isLayer(){return null!=this.type&&D.has(this.type)}get itemCdnUrl(){return l.toCDNUrl(this.itemUrl)}get itemPageUrl(){const g=this.portal?.itemPageUrl;return g&&this.id?`${g}?id=${this.id}`:
null}get itemUrl(){const g=this.portal?.restUrl;return g&&this.id?`${g}/content/items/${this.id}`:null}get thumbnailUrl(){const g=this.itemUrl,K=this.thumbnail;return g&&K?this.portal?.normalizeUrl(`${g}/info/${K}?f=json`)??null:null}get userItemUrl(){const g=this.portal?.restUrl;if(!g)return null;const K=this.owner||this.portal?.user?.username;return K?`${g}/content/users/${this.ownerFolder?`${K}/${this.ownerFolder}`:K}/items/${this.id}`:null}load(g){const K=this.portal??(this.portal=r.getDefault()),
R=K.load(g).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?K.request(this.itemUrl,{signal:null!=g?g.signal:null,query:{token:this.apiKey}}):{}).then(L=>{this.sourceJSON=L;this.read(L)});this.addResolvingPromise(R);return Promise.resolve(this)}async addRating(g){const K={method:"post",query:{}};g instanceof a&&(g=g.rating);null==g||isNaN(g)||"number"!==typeof g||(K.query.rating=g);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",K);return new a({rating:g,
created:new Date})}clone(){var g={access:this.access,accessInformation:this.accessInformation,applicationProxies:C.clone(this.applicationProxies),avgRating:this.avgRating,categories:C.clone(this.categories),created:C.clone(this.created),culture:this.culture,description:this.description,extent:C.clone(this.extent),groupCategories:C.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C.clone(this.modified),name:this.name,numComments:this.numComments,
numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};this.loaded&&(g.loadStatus="loaded");g=(new n({sourceJSON:this.sourceJSON})).set(g);g._set("isOrgItem",this.isOrgItem);
return g}createPostQuery(){const g=this.toJSON();for(var K of["tags","typeKeywords","categories"])g[K]=g[K]?.join(", ");({extent:K}=g);K&&(g.extent=JSON.stringify(K));return g}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(g="json",K){return this.portal.request(this.itemUrl+"/data",{responseType:g,...K,query:{token:this.apiKey}})}async fetchRating(g){g=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...g});return null!=
g.rating?(g.created=new Date(g.created),new a(g)):null}fetchRelatedItems(g,K){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...g,token:this.apiKey},...K},n)}getThumbnailUrl(g){let K=this.thumbnailUrl;K&&g&&(K+=`&w=${g}`);return K}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(g=>{this.sourceJSON=g;this.read(g);return this})}update(g){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const K=g?.data,
R={method:"post"};R.query=this.createPostQuery();for(const L in R.query)null===R.query[L]&&(R.query[L]="");R.query.clearEmptyFields=!0;null!=K&&("string"===typeof K?R.query.text=K:"object"===typeof K&&(R.query.text=JSON.stringify(K)));return this.portal.request(`${this.userItemUrl}/update`,R).then(()=>this.reload())}):Promise.reject(new y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(g){if(!this.id)throw new y("portal:item-does-not-exist","The item does not exist yet");
await this.load();const {portal:K,itemUrl:R}=this;await K.signIn();const {copyResources:L,folder:S,tags:T,title:Q}=g||{};g={method:"post",query:{copyPrivateResources:"all"===L,folder:"string"===typeof S?S:S?.id,includeResources:!!L,tags:T?.join(","),title:Q}};({itemId:g}=await K.request(`${R}/copy`,g));return new n({id:g,portal:K})}updateThumbnail(g){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const K=g.thumbnail,R=g.filename,L={method:"post"};if("string"===typeof K)q.isDataProtocol(K)?
L.query={data:K}:L.query={url:q.makeAbsolute(K)},null!=R&&(L.query.filename=R);else{const S=new FormData;null!=R?S.append("file",K,R):S.append("file",K);L.body=S}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,L).then(()=>this.reload())}):Promise.reject(new y("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(g={},K){const {fetchResources:R}=await new Promise((L,S)=>c(["./support/resourceUtils"],L,S));return R(this,g,K)}async addResource(g,
K,R){const {addOrUpdateResources:L}=await new Promise((S,T)=>c(["./support/resourceUtils"],S,T));g.portalItem=this;await L(this,[{resource:g,content:K,compress:R?.compress,access:R?.access}],"add",R);return g}async removeResource(g,K){const {removeResource:R}=await new Promise((L,S)=>c(["./support/resourceUtils"],L,S));if(g.portalItem&&g.portalItem.itemUrl!==this.itemUrl)throw new y("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");
return R(this,g,K)}async removeAllResources(g){const {removeAllResources:K}=await new Promise((R,L)=>c(["./support/resourceUtils"],R,L));return K(this,g)}resourceFromPath(g){return new p({portalItem:this,path:g})}toJSON(){var g=this.extent;g={accessInformation:this.accessInformation,categories:C.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:g&&[[g.xmin,g.ymin],[g.xmax,g.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};return C.fixJson(g)}static fromJSON(g){if(!g)return null;if(g.declaredClass)throw Error("JSON object is already hydrated");return new n({sourceJSON:g})}_getPostQuery(){const g=this.toJSON();for(const K in g)"tags"===K&&null!==
g[K]&&(g[K]=g[K].join(", ")),"typeKeywords"===K&&null!==g[K]&&(g[K]=g[K].join(", ")),"extent"===K&&g[K]&&(g[K]=JSON.stringify(g[K]));return g}};f.__decorate([d.property({type:["private","shared","org","public"]})],G.prototype,"access",void 0);f.__decorate([d.property()],G.prototype,"accessInformation",void 0);f.__decorate([d.property({type:String})],G.prototype,"apiKey",void 0);f.__decorate([d.property({json:{read:{source:"appProxies"}}})],G.prototype,"applicationProxies",void 0);f.__decorate([d.property()],
G.prototype,"avgRating",void 0);f.__decorate([d.property()],G.prototype,"categories",void 0);f.__decorate([d.property({type:Date})],G.prototype,"created",void 0);f.__decorate([d.property()],G.prototype,"culture",void 0);f.__decorate([d.property()],G.prototype,"description",void 0);f.__decorate([d.property({readOnly:!0})],G.prototype,"displayName",null);f.__decorate([d.property({type:J})],G.prototype,"extent",void 0);f.__decorate([t.reader("extent")],G.prototype,"readExtent",null);f.__decorate([d.property()],
G.prototype,"groupCategories",void 0);f.__decorate([d.property({readOnly:!0})],G.prototype,"iconUrl",null);f.__decorate([d.property()],G.prototype,"id",void 0);f.__decorate([d.property({readOnly:!0})],G.prototype,"isLayer",null);f.__decorate([d.property({type:Boolean,readOnly:!0})],G.prototype,"isOrgItem",void 0);f.__decorate([d.property()],G.prototype,"itemControl",void 0);f.__decorate([d.property({readOnly:!0})],G.prototype,"itemPageUrl",null);f.__decorate([d.property({readOnly:!0})],G.prototype,
"itemUrl",null);f.__decorate([d.property()],G.prototype,"licenseInfo",void 0);f.__decorate([d.property({type:Date})],G.prototype,"modified",void 0);f.__decorate([d.property()],G.prototype,"name",void 0);f.__decorate([d.property()],G.prototype,"numComments",void 0);f.__decorate([d.property()],G.prototype,"numRatings",void 0);f.__decorate([d.property()],G.prototype,"numViews",void 0);f.__decorate([d.property()],G.prototype,"owner",void 0);f.__decorate([d.property()],G.prototype,"ownerFolder",void 0);
f.__decorate([d.property({type:r})],G.prototype,"portal",void 0);f.__decorate([d.property()],G.prototype,"screenshots",void 0);f.__decorate([d.property()],G.prototype,"size",void 0);f.__decorate([d.property()],G.prototype,"snippet",void 0);f.__decorate([d.property()],G.prototype,"sourceJSON",void 0);f.__decorate([d.property({type:String})],G.prototype,"sourceUrl",void 0);f.__decorate([d.property({type:String})],G.prototype,"spatialReference",void 0);f.__decorate([d.property()],G.prototype,"tags",
void 0);f.__decorate([d.property()],G.prototype,"thumbnail",void 0);f.__decorate([d.property({readOnly:!0})],G.prototype,"thumbnailUrl",null);f.__decorate([d.property()],G.prototype,"title",void 0);f.__decorate([d.property()],G.prototype,"type",void 0);f.__decorate([d.property()],G.prototype,"typeKeywords",void 0);f.__decorate([d.property({type:String,json:{read(g,K){N.has(K.type)&&(K=this.portal?.restUrl,g||=K&&this.id?`${K}/content/items/${this.id}/data`:null);return g}}})],G.prototype,"url",void 0);
f.__decorate([d.property({readOnly:!0})],G.prototype,"userItemUrl",null);return G=n=f.__decorate([w.subclass("esri.portal.PortalItem")],G)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(c,f,A,y,G,C,e,q,d,v,t){A=class extends A{constructor(w){super(w);
this.portalItem=null}normalizeCtorArgs(w){return w?.portalItem&&w.path?{...w,path:this._normalizePath(w.path,w.portalItem)}:w}set path(w){null!=w&&C.isAbsolute(w)?G.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",w)}_castPath(w){return this._normalizePath(w,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:
null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(w="json",J){const r=this.cdnUrl;if(null==r)throw new y("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:w,query:{token:this.portalItem.apiKey},signal:J?.signal})}async update(w,J){const {addOrUpdateResources:r}=await new Promise((p,a)=>c(["./support/resourceUtils"],p,a));await r(this.portalItem,[{resource:this,
content:w,compress:J?.compress,access:J?.access}],"update",J);return this}hasPath(){return null!=this.path}_normalizePath(w,J){if(null==w)return w;w=w.replace(/^\/+/,"");null!=J&&C.isAbsolute(w)&&(w=C.makeRelative(w,J.itemUrl));return w?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};f.__decorate([e.property()],A.prototype,"portalItem",void 0);f.__decorate([e.property({type:String,value:null})],A.prototype,"path",null);f.__decorate([q.cast("path")],A.prototype,"_castPath",null);f.__decorate([e.property({type:String,
readOnly:!0})],A.prototype,"url",null);f.__decorate([e.property({type:String,readOnly:!0})],A.prototype,"cdnUrl",null);f.__decorate([e.property({type:String,readOnly:!0})],A.prototype,"itemRelativeUrl",null);return A=f.__decorate([t.subclass("esri.portal.PortalItemResource")],A)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,f,A,y,G,C,e){f=class extends f{constructor(q){super(q);this.rating=this.created=null}};c.__decorate([A.property()],f.prototype,"created",void 0);c.__decorate([A.property()],f.prototype,"rating",void 0);return f=c.__decorate([e.subclass("esri.portal.PortalRating")],f)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils"],function(c,f,A){function y(l,n){var D=n?.url?.path;l&&D&&(l=A.makeAbsolute(l,D,{preserveProtocolRelative:!0}),n.portalItem&&
n.readResourcePaths&&(D=A.makeRelative(l,n.portalItem.itemUrl),null!=D&&p.test(D)&&n.readResourcePaths.push(n.portalItem.resourceFromPath(D).path)));return(l=t(l,n?.portal))&&r.test(l)?w(l):l}function G(l,n,D=c.MarkKeep.YES){l=l&&r.test(l)?J(l):l;if(null==l)return l;!A.isAbsolute(l)&&n?.blockedRelativeUrls&&n.blockedRelativeUrls.push(l);let N=A.makeAbsolute(l);if(n){var g=n.verifyItemRelativeUrls?.rootPath||n.url?.path;if(g){g=t(g,n.portal);const K=t(N,n.portal);N=A.makeRelative(K,g,g);null!=N&&N!==
K&&N!==l&&n.verifyItemRelativeUrls&&n.verifyItemRelativeUrls.writtenUrls.push(N)}}N=v(N,n?.portal);A.isAbsolute(N)&&(N=A.normalize(N));n?.resources&&n?.portalItem&&!A.isAbsolute(N)&&!A.isDataProtocol(N)&&D===c.MarkKeep.YES&&n.resources.toKeep.push({resource:n.portalItem.resourceFromPath(N),compress:!1});return N}function C(l,n,D){return y(l,D)}function e(l,n,D,N){l=G(l,N);void 0!==l&&(n[D]=l)}function q(l){return(l?.match(r)??null)?.[1]??null}function d(l){l=l?.match(r)??null;if(null==l)return null;
l=l[2];const n=l.lastIndexOf("/");if(-1===n){const {path:g,extension:K}=A.splitPathExtension(l);return{prefix:null,filename:g,extension:K}}const {path:D,extension:N}=A.splitPathExtension(l.slice(n+1));return{prefix:l.slice(0,n),filename:D,extension:N}}function v(l,n){return n&&!n.isPortal&&n.urlKey&&n.customBaseUrl?A.changeDomain(l,`${n.urlKey}.${n.customBaseUrl}`,n.portalHostname):l}function t(l,n){if(!n||n.isPortal||!n.urlKey||!n.customBaseUrl)return l;const D=`${n.urlKey}.${n.customBaseUrl}`,N=
A.getAppUrl();return A.hasSameOrigin(N,`${N.scheme}://${D}`)?A.changeDomain(l,n.portalHostname,D):A.changeDomain(l,D,n.portalHostname)}function w(l){if(!l)return l||null;l&&f.id&&!f.id.findCredential(l)&&(l=f.id._normalizeAGOLorgDomain(l),l=l.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),l=l.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),l=l.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return l}function J(l){if(!l)return l||null;
l=l.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");l=l.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(l=l.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&f.id&&!f.id.findCredential(l)&&(l=f.id._normalizeAGOLorgDomain(l));return l}const r=/\/items\/([^\/]+)\/resources\/(.*)/,p=/^\.\/resources\//;c.MarkKeep=void 0;(function(l){l[l.YES=0]="YES";l[l.NO=1]="NO"})(c.MarkKeep||(c.MarkKeep={}));const a=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return c.MarkKeep},ensureMainOnlineDomain:v,fromCDNUrl:J,fromJSON:y,itemIdFromResourceUrl:q,prefixAndFilenameFromResourceUrl:d,read:C,toCDNUrl:w,toJSON:G,write:e},Symbol.toStringTag,{value:"Module"}));c.ensureMainOnlineDomain=v;c.fromCDNUrl=J;c.fromJSON=y;c.itemIdFromResourceUrl=q;c.persistableUrlUtils=a;c.prefixAndFilenameFromResourceUrl=d;c.read=C;c.toCDNUrl=w;c.toJSON=G;c.write=e})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(c,
f,A){c.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",
url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,
opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};c.getBasemapTitle=async function(y){if(y){var G=y.includes("-vector")?y.slice(0,y.indexOf("-vector")):
y.includes("-3d")?y.slice(0,y.indexOf("-3d")):y,C=await A.fetchMessageBundle("esri/t9n/basemaps");return C[y]||C[G]}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(c,f,A,y,G,C,e,q){const d=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
f=class extends f{constructor(v){super(v);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var v=q.getLocale().toLowerCase();switch(v){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}v=q.getLanguage(v);return"pt"===v?"pt-BR":v&&d.has(v)?v:"global"}};
c.__decorate([A.property()],f.prototype,"id",void 0);c.__decorate([A.property()],f.prototype,"language",void 0);c.__decorate([A.property()],f.prototype,"places",void 0);c.__decorate([A.property()],f.prototype,"serviceUrl",void 0);c.__decorate([A.property()],f.prototype,"worldview",void 0);return f=c.__decorate([e.subclass("esri.support.BasemapStyle")],f)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(c,f,A,y,G,C){function e(v,t){"maxScale"in v&&(t.maxScale=G.numberToJSON(v.maxScale)??void 0);"minScale"in v&&(t.minScale=G.numberToJSON(v.minScale)??void 0)}const q=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),d=new Set("csv feature geo-rss geojson group imagery imagery-tile kml map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
c.disableRestrictedWriting=function(v){q.add(v);d.add(v)};c.enableRestrictedWriting=function(v){q.delete(v);d.delete(v)};c.getLayerJSON=function(v,t,w){if(!v.persistenceEnabled)return null;if(!("write"in v&&v.write))return w?.messages&&w.messages.push(new f("layer:unsupported",`Layers (${v.title}, ${v.id}) of type '${v.declaredClass}' cannot be persisted`,{layer:v})),null;if(C.isFeatureCollectionLayer(v)&&!v.isTable)t=v.resourceInfo;else{if(w.restrictedWebMapWriting){var J="basemap"===w.layerContainerType?
q:"operational-layers"===w.layerContainerType?d:null;J=null!=J?J.has(v.type)&&!C.isFeatureCollectionLayer(v):!0}else J=!0;if(J)return t={},v.write(t,w)?t:null}if(null!=t){t=A.clone(t);if(w=t)C.isFeatureCollectionLayer(v)?(J=y.getDeepValue("featureCollection.layers",w)?.[0]?.layerDefinition)&&e(v,J):"group"!==v.type&&e(v,w);if(w&&(w.id=v.id,"blendMode"in v&&(w.blendMode=v.blendMode,"normal"===w.blendMode&&delete w.blendMode),w.opacity=G.numberToJSON(v.opacity)??void 0,w.title=v.title||"Layer",w.visibility=
v.visible,"legendEnabled"in v&&"wmts"!==v.type))if(C.isFeatureCollectionLayer(v)){if(w=w.featureCollection)w.showLegend=v.legendEnabled}else w.showLegend=v.legendEnabled}return t};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(c,f,A){function y(C){return"scene"===C?.type}function G(C){C=C?.type;return"imagery-tile"===C||"tile"===C||"open-street-map"===C||"vector-tile"===C||"web-tile"===
C||"wmts"===C}c.getEffectiveEditingEnabled=function(C){a:if("editingEnabled"in C)switch(C.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var e=!0;break a;default:e=!1}else e=!1;return e?"effectiveEditingEnabled"in C?C.effectiveEditingEnabled:C.editingEnabled:!1};c.getEffectiveLayerCapabilities=function(C){a:if("capabilities"in C)switch(C.type){case "catalog":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var e=
!0;break a;default:e=!1}else e=!1;return e?"effectiveCapabilities"in C?C.effectiveCapabilities:C.capabilities:null};c.getOwningPortalUrl=async function(C,e){var q=f.id?.findServerInfo(C);if(null!=q?.currentVersion)return q.owningSystemUrl||null;q=C.toLowerCase().indexOf("/rest/services");if(-1===q)return null;C=`${C.substring(0,q)}/rest/info`;({data:e}=await A(C,{query:{f:"json"},responseType:"json",signal:null!=e?e.signal:null}));return e?.owningSystemUrl||null};c.getTileMaxtrixSetFromActiveLayer=
function(C){if(C.activeLayer){const e=C.activeLayer.tileMatrixSet;if(e)return e;if(C=C.activeLayer.tileMatrixSets)return C}return null};c.isBaseLayer=function(C){return null!=C?.parent&&"declaredClass"in C.parent&&"esri.Basemap"===C.parent.declaredClass&&C.parent.baseLayers.includes(C)};c.isBasemap3DSupportedLayer=function(C){return G(C)||y(C)};c.isBasemapSupportedTiledLayer=G;c.isFeatureCollectionLayer=function(C){return"feature"===C?.type&&!C.url&&"memory"===C.source?.type};c.isFeatureLayer=function(C){return null!=
C&&"object"===typeof C&&"type"in C&&"feature"===C.type};c.isFeatureServiceLayer=function(C){return"feature"===C?.type&&"feature-layer"===C.source?.type};c.isGraphicsLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"graphics"===C.type};c.isGroupLayer=function(C){return null!=C&&"type"in C&&"group"===C.type};c.isImageryTileLayer=function(C){return"imagery-tile"===C?.type};c.isIntegratedMeshLayer=function(C){return"integrated-mesh"===C||"integrated-mesh-3dtiles"===C};c.isIntegratedMeshOperationalLayer=
function(C){return"IntegratedMeshLayer"===C||"IntegratedMesh3DTilesLayer"===C};c.isKnowledgeGraphLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"knowledge-graph"===C.type&&"layers"in C};c.isLayerWithFeatureLayerSource=function(C){return("feature"===C?.type||"subtype-group"===C?.type)&&"feature-layer"===C.source?.type};c.isLinkChartLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"link-chart"===C.type&&"layers"in C};c.isMapNotesLayer=function(C){return null!=C&&
"object"===typeof C&&"type"in C&&"map-notes"===C.type&&"sublayers"in C};c.isSceneLayer=y;c.isSceneServiceLayer=function(C){C=C?.type;return"building-scene"===C||"integrated-mesh"===C||"point-cloud"===C||"scene"===C};c.isSubtypeGroupLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"subtype-group"===C.type&&"sublayers"in C};c.isTable=function(C){return null!=C&&"object"===typeof C&&"isTable"in C&&!!C.isTable};c.isTiledLayer=function(C){C=C?.type;return"base-tile"===C||"tile"===C||
"elevation"===C||"imagery-tile"===C||"base-elevation"===C||"open-street-map"===C||"wcs"===C||"web-tile"===C||"wmts"===C||"vector-tile"===C};c.isVoxelLayer=function(C){return"voxel"===C?.type};c.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};c.serializeLayerDefinitions=function(C){const e=/[:;]/,q=[];let d=!1;if(C&&(C.forEach((v,t)=>{q.push([t,v]);!d&&e.test(v)&&(d=!0)}),0<
q.length)){if(d){const v={};q.forEach(t=>{v[t[0]]=t[1]});C=JSON.stringify(v)}else{const v=[];q.forEach(t=>{v.push(t[0]+":"+t[1])});C=v.join(";")}return C}return null};c.serializeTimeOptions=function(C){if(C){var e=[];C.forEach((q,d)=>{e.push('"'+d+'":'+JSON.stringify(q))});if(e.length)return"{"+e.join(",")+"}"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(c,f){c.canInterpolateEffects=function(A,y){const G=
A.length>y.length?A:y;return(A.length>y.length?y:A).every((C,e)=>C.type===G[e].type)};c.effectEquals=function(A,y){A=JSON.stringify(A??null);y=JSON.stringify(y??null);return A===y};c.isEffectFunctions=function(A){return(A=A[0])?"type"in A:!1};c.normalizeEffects=function(A,y){const G=A.length>y.length?A:y;A=A.length>y.length?y:A;for(y=A.length;y<G.length;y++)A.push(f.createEffectWithInitialValues(G[y]))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports",
"../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(c,f,A,y,G){function C(r,p,a){return r+(p-r)*a}function e(r){return Math.round(1E3*A.px2pt(r))/1E3}class q{constructor(r,p,a){this.strength=r;this.radius=p;this.threshold=a;this.type="bloom"}interpolate(r,p,a){this.strength=C(r.strength,p.strength,a);this.radius=C(r.radius,p.radius,a);this.threshold=C(r.threshold,p.threshold,a)}clone(){return new q(this.strength,this.radius,
this.threshold)}toJSON(){return{type:"bloom",radius:e(this.radius),strength:this.strength,threshold:this.threshold}}}class d{constructor(r){this.radius=r;this.type="blur"}interpolate(r,p,a){this.radius=Math.round(C(r.radius,p.radius,a))}clone(){return new d(this.radius)}toJSON(){return{type:"blur",radius:e(this.radius)}}}class v{constructor(r,p){this.type=r;this.amount=p;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||
this._updateMatrix();return this._colorMatrix}interpolate(r,p,a){this.amount=C(r.amount,p.amount,a);this._updateMatrix()}clone(){return new v(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const r=this._colorMatrix||y.create();switch(this.type){case "brightness":this._colorMatrix=G.brightness(r,this.amount);break;case "contrast":this._colorMatrix=G.contrast(r,this.amount);break;case "grayscale":this._colorMatrix=G.grayscale(r,this.amount);break;case "invert":this._colorMatrix=
G.invert(r,this.amount);break;case "saturate":this._colorMatrix=G.saturate(r,this.amount);break;case "sepia":this._colorMatrix=G.sepia(r,this.amount)}}}class t{constructor(r,p,a,l){this.offsetX=r;this.offsetY=p;this.blurRadius=a;this.color=l;this.type="drop-shadow"}interpolate(r,p,a){this.offsetX=C(r.offsetX,p.offsetX,a);this.offsetY=C(r.offsetY,p.offsetY,a);this.blurRadius=C(r.blurRadius,p.blurRadius,a);this.color[0]=Math.round(C(r.color[0],p.color[0],a));this.color[1]=Math.round(C(r.color[1],p.color[1],
a));this.color[2]=Math.round(C(r.color[2],p.color[2],a));this.color[3]=C(r.color[3],p.color[3],a)}clone(){return new t(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const r=[...this.color];r[3]*=255;return{type:"drop-shadow",xoffset:e(this.offsetX),yoffset:e(this.offsetY),blurRadius:e(this.blurRadius),color:r}}}class w{constructor(r){this.angle=r;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(r,p,a){this.angle=
C(r.angle,p.angle,a);this._updateMatrix()}clone(){return new w(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const r=this._colorMatrix||y.create();this._colorMatrix=G.rotateHue(r,this.angle)}}class J{constructor(r){this.amount=r;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(r,p,a){this.amount=C(r.amount,p.amount,a)}clone(){return new J(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}c.BloomEffect=q;c.BlurEffect=d;c.ColorMatrixEffect=
v;c.DropShadowEffect=t;c.HueRotateEffect=w;c.OpacityEffect=J;c.createEffectWithInitialValues=function(r){switch(r.type){case "grayscale":case "sepia":case "invert":return new v(r.type,0);case "saturate":case "brightness":case "contrast":return new v(r.type,1);case "opacity":return new J(1);case "hue-rotate":return new w(0);case "blur":return new d(0);case "drop-shadow":return new t(0,0,0,[...f.getNamedColor("transparent")]);case "bloom":return new q(0,0,1)}};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(c){function f(){const q=new Float32Array(16);q[0]=1;q[5]=1;q[10]=1;q[15]=1;return q}function A(q){const d=new Float32Array(16);d[0]=q[0];d[1]=q[1];d[2]=q[2];d[3]=q[3];d[4]=q[4];d[5]=q[5];d[6]=q[6];d[7]=q[7];d[8]=q[8];d[9]=q[9];d[10]=q[10];d[11]=q[11];d[12]=q[12];d[13]=q[13];d[14]=q[14];d[15]=q[15];return d}function y(q,d,v,t,w,J,r,p,a,l,n,D,N,g,K,R){const L=new Float32Array(16);L[0]=q;L[1]=d;
L[2]=v;L[3]=t;L[4]=w;L[5]=J;L[6]=r;L[7]=p;L[8]=a;L[9]=l;L[10]=n;L[11]=D;L[12]=N;L[13]=g;L[14]=K;L[15]=R;return L}function G(q,d){return new Float32Array(q,d,16)}const C=f(),e=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:C,clone:A,create:f,createView:G,fromValues:y},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=C;c.clone=A;c.create=f;c.createView=G;c.fromValues=y;c.mat4f32=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports",
"../../core/libs/gl-matrix-2/math/mat4"],function(c,f){c.brightness=(A,y)=>{A=f.set(A,y,0,0,0,0,y,0,0,0,0,y,0,0,0,0,1);return f.transpose(A,A)};c.contrast=(A,y)=>{A=f.set(A,y,0,0,.5-.5*y,0,y,0,.5-.5*y,0,0,y,.5-.5*y,0,0,0,1);return f.transpose(A,A)};c.grayscale=(A,y)=>{y=1-y;A=f.set(A,.2126+.7874*y,.7152-.7152*y,.0722-.0722*y,0,.2126-.2126*y,.7152+.2848*y,.0722-.0722*y,0,.2126-.2126*y,.7152-.7152*y,.0722+.9278*y,0,0,0,0,1);return f.transpose(A,A)};c.invert=(A,y)=>{const G=1-2*y;A=f.set(A,G,0,0,y,0,
G,0,y,0,0,G,y,0,0,0,1);return f.transpose(A,A)};c.rotateHue=(A,y)=>{const G=Math.sin(y*Math.PI/180);y=Math.cos(y*Math.PI/180);A=f.set(A,.213+.787*y-.213*G,.715-.715*y-.715*G,.072-.072*y+.928*G,0,.213-.213*y+.143*G,.715+.285*y+.14*G,.072-.072*y-.283*G,0,.213-.213*y-.787*G,.715-.715*y+.715*G,.072+.928*y+.072*G,0,0,0,0,1);return f.transpose(A,A)};c.saturate=(A,y)=>{A=f.set(A,.213+.787*y,.715-.715*y,.072-.072*y,0,.213-.213*y,.715+.285*y,.072-.072*y,0,.213-.213*y,.715-.715*y,.072+.928*y,0,0,0,0,1);return f.transpose(A,
A)};c.sepia=(A,y)=>{y=1-y;A=f.set(A,.393+.607*y,.769-.769*y,.189-.189*y,0,.349-.349*y,.686+.314*y,.168-.168*y,0,.272-.272*y,.534-.534*y,.131+.869*y,0,0,0,0,1);return f.transpose(A,A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(c,f,A){function y(h,F){h[0]=F[0];h[1]=F[1];h[2]=F[2];h[3]=F[3];h[4]=F[4];h[5]=F[5];h[6]=F[6];h[7]=F[7];h[8]=F[8];h[9]=F[9];h[10]=F[10];h[11]=
F[11];h[12]=F[12];h[13]=F[13];h[14]=F[14];h[15]=F[15];return h}function G(h,F,X,aa,ha,z,I,M,W,Z,ba,ea,ia,ka,sa,oa,ra){h[0]=F;h[1]=X;h[2]=aa;h[3]=ha;h[4]=z;h[5]=I;h[6]=M;h[7]=W;h[8]=Z;h[9]=ba;h[10]=ea;h[11]=ia;h[12]=ka;h[13]=sa;h[14]=oa;h[15]=ra;return h}function C(h){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function e(h,F){if(h===F){const X=F[1],aa=F[2],ha=F[3],z=F[6],I=F[7],M=F[11];h[1]=F[4];h[2]=F[8];h[3]=F[12];
h[4]=X;h[6]=F[9];h[7]=F[13];h[8]=aa;h[9]=z;h[11]=F[14];h[12]=ha;h[13]=I;h[14]=M}else h[0]=F[0],h[1]=F[4],h[2]=F[8],h[3]=F[12],h[4]=F[1],h[5]=F[5],h[6]=F[9],h[7]=F[13],h[8]=F[2],h[9]=F[6],h[10]=F[10],h[11]=F[14],h[12]=F[3],h[13]=F[7],h[14]=F[11],h[15]=F[15];return h}function q(h,F){d(h,F)||C(h);return h}function d(h,F){const X=F[0],aa=F[1],ha=F[2],z=F[3],I=F[4],M=F[5],W=F[6],Z=F[7],ba=F[8],ea=F[9],ia=F[10],ka=F[11],sa=F[12],oa=F[13],ra=F[14];F=F[15];const Ca=X*M-aa*I,xa=X*W-ha*I,Ba=X*Z-z*I,Aa=aa*W-
ha*M,ya=aa*Z-z*M,Ha=ha*Z-z*W,Pa=ba*oa-ea*sa,Ya=ba*ra-ia*sa,Wa=ba*F-ka*sa,Ja=ea*ra-ia*oa,Ka=ea*F-ka*oa,ja=ia*F-ka*ra;let Qa=Ca*ja-xa*Ka+Ba*Ja+Aa*Wa-ya*Ya+Ha*Pa;if(!Qa)return null;Qa=1/Qa;h[0]=(M*ja-W*Ka+Z*Ja)*Qa;h[1]=(ha*Ka-aa*ja-z*Ja)*Qa;h[2]=(oa*Ha-ra*ya+F*Aa)*Qa;h[3]=(ia*ya-ea*Ha-ka*Aa)*Qa;h[4]=(W*Wa-I*ja-Z*Ya)*Qa;h[5]=(X*ja-ha*Wa+z*Ya)*Qa;h[6]=(ra*Ba-sa*Ha-F*xa)*Qa;h[7]=(ba*Ha-ia*Ba+ka*xa)*Qa;h[8]=(I*Ka-M*Wa+Z*Pa)*Qa;h[9]=(aa*Wa-X*Ka-z*Pa)*Qa;h[10]=(sa*ya-oa*Ba+F*Ca)*Qa;h[11]=(ea*Ba-ba*ya-ka*Ca)*
Qa;h[12]=(M*Ya-I*Ja-W*Pa)*Qa;h[13]=(X*Ja-aa*Ya+ha*Pa)*Qa;h[14]=(oa*xa-sa*Aa-ra*Ca)*Qa;h[15]=(ba*Aa-ea*xa+ia*Ca)*Qa;return h}function v(h,F){const X=F[0],aa=F[1],ha=F[2],z=F[3],I=F[4],M=F[5],W=F[6],Z=F[7],ba=F[8],ea=F[9],ia=F[10],ka=F[11],sa=F[12],oa=F[13],ra=F[14];F=F[15];h[0]=M*(ia*F-ka*ra)-ea*(W*F-Z*ra)+oa*(W*ka-Z*ia);h[1]=-(aa*(ia*F-ka*ra)-ea*(ha*F-z*ra)+oa*(ha*ka-z*ia));h[2]=aa*(W*F-Z*ra)-M*(ha*F-z*ra)+oa*(ha*Z-z*W);h[3]=-(aa*(W*ka-Z*ia)-M*(ha*ka-z*ia)+ea*(ha*Z-z*W));h[4]=-(I*(ia*F-ka*ra)-ba*
(W*F-Z*ra)+sa*(W*ka-Z*ia));h[5]=X*(ia*F-ka*ra)-ba*(ha*F-z*ra)+sa*(ha*ka-z*ia);h[6]=-(X*(W*F-Z*ra)-I*(ha*F-z*ra)+sa*(ha*Z-z*W));h[7]=X*(W*ka-Z*ia)-I*(ha*ka-z*ia)+ba*(ha*Z-z*W);h[8]=I*(ea*F-ka*oa)-ba*(M*F-Z*oa)+sa*(M*ka-Z*ea);h[9]=-(X*(ea*F-ka*oa)-ba*(aa*F-z*oa)+sa*(aa*ka-z*ea));h[10]=X*(M*F-Z*oa)-I*(aa*F-z*oa)+sa*(aa*Z-z*M);h[11]=-(X*(M*ka-Z*ea)-I*(aa*ka-z*ea)+ba*(aa*Z-z*M));h[12]=-(I*(ea*ra-ia*oa)-ba*(M*ra-W*oa)+sa*(M*ia-W*ea));h[13]=X*(ea*ra-ia*oa)-ba*(aa*ra-ha*oa)+sa*(aa*ia-ha*ea);h[14]=-(X*(M*
ra-W*oa)-I*(aa*ra-ha*oa)+sa*(aa*W-ha*M));h[15]=X*(M*ia-W*ea)-I*(aa*ia-ha*ea)+ba*(aa*W-ha*M);return h}function t(h){const F=h[0],X=h[1],aa=h[2],ha=h[3],z=h[4],I=h[5],M=h[6],W=h[7],Z=h[8],ba=h[9],ea=h[10],ia=h[11],ka=h[12],sa=h[13],oa=h[14];h=h[15];return(F*I-X*z)*(ea*h-ia*oa)-(F*M-aa*z)*(ba*h-ia*sa)+(F*W-ha*z)*(ba*oa-ea*sa)+(X*M-aa*I)*(Z*h-ia*ka)-(X*W-ha*I)*(Z*oa-ea*ka)+(aa*W-ha*M)*(Z*sa-ba*ka)}function w(h,F,X){const aa=F[0],ha=F[1],z=F[2],I=F[3],M=F[4],W=F[5],Z=F[6],ba=F[7],ea=F[8],ia=F[9],ka=F[10],
sa=F[11],oa=F[12],ra=F[13],Ca=F[14];F=F[15];let xa=X[0],Ba=X[1],Aa=X[2],ya=X[3];h[0]=xa*aa+Ba*M+Aa*ea+ya*oa;h[1]=xa*ha+Ba*W+Aa*ia+ya*ra;h[2]=xa*z+Ba*Z+Aa*ka+ya*Ca;h[3]=xa*I+Ba*ba+Aa*sa+ya*F;xa=X[4];Ba=X[5];Aa=X[6];ya=X[7];h[4]=xa*aa+Ba*M+Aa*ea+ya*oa;h[5]=xa*ha+Ba*W+Aa*ia+ya*ra;h[6]=xa*z+Ba*Z+Aa*ka+ya*Ca;h[7]=xa*I+Ba*ba+Aa*sa+ya*F;xa=X[8];Ba=X[9];Aa=X[10];ya=X[11];h[8]=xa*aa+Ba*M+Aa*ea+ya*oa;h[9]=xa*ha+Ba*W+Aa*ia+ya*ra;h[10]=xa*z+Ba*Z+Aa*ka+ya*Ca;h[11]=xa*I+Ba*ba+Aa*sa+ya*F;xa=X[12];Ba=X[13];Aa=X[14];
ya=X[15];h[12]=xa*aa+Ba*M+Aa*ea+ya*oa;h[13]=xa*ha+Ba*W+Aa*ia+ya*ra;h[14]=xa*z+Ba*Z+Aa*ka+ya*Ca;h[15]=xa*I+Ba*ba+Aa*sa+ya*F;return h}function J(h,F,X){const aa=X[0],ha=X[1];X=X[2];if(F===h)h[12]=F[0]*aa+F[4]*ha+F[8]*X+F[12],h[13]=F[1]*aa+F[5]*ha+F[9]*X+F[13],h[14]=F[2]*aa+F[6]*ha+F[10]*X+F[14],h[15]=F[3]*aa+F[7]*ha+F[11]*X+F[15];else{const z=F[0],I=F[1],M=F[2],W=F[3],Z=F[4],ba=F[5],ea=F[6],ia=F[7],ka=F[8],sa=F[9],oa=F[10],ra=F[11];h[0]=z;h[1]=I;h[2]=M;h[3]=W;h[4]=Z;h[5]=ba;h[6]=ea;h[7]=ia;h[8]=ka;
h[9]=sa;h[10]=oa;h[11]=ra;h[12]=z*aa+Z*ha+ka*X+F[12];h[13]=I*aa+ba*ha+sa*X+F[13];h[14]=M*aa+ea*ha+oa*X+F[14];h[15]=W*aa+ia*ha+ra*X+F[15]}return h}function r(h,F,X){const aa=X[0],ha=X[1];X=X[2];h[0]=F[0]*aa;h[1]=F[1]*aa;h[2]=F[2]*aa;h[3]=F[3]*aa;h[4]=F[4]*ha;h[5]=F[5]*ha;h[6]=F[6]*ha;h[7]=F[7]*ha;h[8]=F[8]*X;h[9]=F[9]*X;h[10]=F[10]*X;h[11]=F[11]*X;h[12]=F[12];h[13]=F[13];h[14]=F[14];h[15]=F[15];return h}function p(h,F,X,aa){let ha=aa[0],z=aa[1];aa=aa[2];let I=Math.sqrt(ha*ha+z*z+aa*aa);var M=void 0,
W=void 0;let Z=void 0,ba=void 0,ea=void 0,ia=void 0,ka=void 0,sa=void 0,oa=void 0,ra=void 0,Ca=void 0,xa=void 0,Ba=void 0,Aa=void 0,ya=void 0,Ha=void 0,Pa=void 0,Ya=void 0,Wa=void 0,Ja=void 0,Ka=void 0,ja=void 0;W=M=void 0;if(I<A.getEpsilon())return null;I=1/I;ha*=I;z*=I;aa*=I;M=Math.sin(X);W=Math.cos(X);Z=1-W;ba=F[0];ea=F[1];ia=F[2];ka=F[3];sa=F[4];oa=F[5];ra=F[6];Ca=F[7];xa=F[8];Ba=F[9];Aa=F[10];ya=F[11];Ha=ha*ha*Z+W;Pa=z*ha*Z+aa*M;Ya=aa*ha*Z-z*M;Wa=ha*z*Z-aa*M;Ja=z*z*Z+W;Ka=aa*z*Z+ha*M;ja=ha*aa*
Z+z*M;M=z*aa*Z-ha*M;W=aa*aa*Z+W;h[0]=ba*Ha+sa*Pa+xa*Ya;h[1]=ea*Ha+oa*Pa+Ba*Ya;h[2]=ia*Ha+ra*Pa+Aa*Ya;h[3]=ka*Ha+Ca*Pa+ya*Ya;h[4]=ba*Wa+sa*Ja+xa*Ka;h[5]=ea*Wa+oa*Ja+Ba*Ka;h[6]=ia*Wa+ra*Ja+Aa*Ka;h[7]=ka*Wa+Ca*Ja+ya*Ka;h[8]=ba*ja+sa*M+xa*W;h[9]=ea*ja+oa*M+Ba*W;h[10]=ia*ja+ra*M+Aa*W;h[11]=ka*ja+Ca*M+ya*W;F!==h&&(h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);return h}function a(h,F,X){const aa=Math.sin(X);X=Math.cos(X);const ha=F[4],z=F[5],I=F[6],M=F[7],W=F[8],Z=F[9],ba=F[10],ea=F[11];F!==h&&(h[0]=
F[0],h[1]=F[1],h[2]=F[2],h[3]=F[3],h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);h[4]=ha*X+W*aa;h[5]=z*X+Z*aa;h[6]=I*X+ba*aa;h[7]=M*X+ea*aa;h[8]=W*X-ha*aa;h[9]=Z*X-z*aa;h[10]=ba*X-I*aa;h[11]=ea*X-M*aa;return h}function l(h,F,X){const aa=Math.sin(X);X=Math.cos(X);const ha=F[0],z=F[1],I=F[2],M=F[3],W=F[8],Z=F[9],ba=F[10],ea=F[11];F!==h&&(h[4]=F[4],h[5]=F[5],h[6]=F[6],h[7]=F[7],h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);h[0]=ha*X-W*aa;h[1]=z*X-Z*aa;h[2]=I*X-ba*aa;h[3]=M*X-ea*aa;h[8]=ha*aa+W*
X;h[9]=z*aa+Z*X;h[10]=I*aa+ba*X;h[11]=M*aa+ea*X;return h}function n(h,F,X){const aa=Math.sin(X);X=Math.cos(X);const ha=F[0],z=F[1],I=F[2],M=F[3],W=F[4],Z=F[5],ba=F[6],ea=F[7];F!==h&&(h[8]=F[8],h[9]=F[9],h[10]=F[10],h[11]=F[11],h[12]=F[12],h[13]=F[13],h[14]=F[14],h[15]=F[15]);h[0]=ha*X+W*aa;h[1]=z*X+Z*aa;h[2]=I*X+ba*aa;h[3]=M*X+ea*aa;h[4]=W*X-ha*aa;h[5]=Z*X-z*aa;h[6]=ba*X-I*aa;h[7]=ea*X-M*aa;return h}function D(h,F){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=
0;h[12]=F[0];h[13]=F[1];h[14]=F[2];h[15]=1;return h}function N(h,F){h[0]=F[0];h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=F[1];h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=F[2];h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function g(h,F,X){if(0===F)return C(h);let aa=X[0],ha=X[1];X=X[2];let z=Math.sqrt(aa*aa+ha*ha+X*X),I=void 0,M=void 0,W=void 0;if(z<A.getEpsilon())return null;z=1/z;aa*=z;ha*=z;X*=z;I=Math.sin(F);M=Math.cos(F);W=1-M;h[0]=aa*aa*W+M;h[1]=ha*aa*W+X*I;h[2]=X*aa*W-ha*I;h[3]=0;h[4]=aa*ha*W-X*I;h[5]=ha*ha*
W+M;h[6]=X*ha*W+aa*I;h[7]=0;h[8]=aa*X*W+ha*I;h[9]=ha*X*W-aa*I;h[10]=X*X*W+M;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function K(h,F){const X=Math.sin(F);F=Math.cos(F);h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=F;h[6]=X;h[7]=0;h[8]=0;h[9]=-X;h[10]=F;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function R(h,F){const X=Math.sin(F);F=Math.cos(F);h[0]=F;h[1]=0;h[2]=-X;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=X;h[9]=0;h[10]=F;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function L(h,F){const X=
Math.sin(F);F=Math.cos(F);h[0]=F;h[1]=X;h[2]=0;h[3]=0;h[4]=-X;h[5]=F;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function S(h,F,X){var aa=F[0],ha=F[1],z=F[2],I=F[3],M=aa+aa,W=ha+ha;const Z=z+z;F=aa*M;const ba=aa*W;aa*=Z;const ea=ha*W;ha*=Z;z*=Z;M*=I;W*=I;I*=Z;h[0]=1-(ea+z);h[1]=ba+I;h[2]=aa-W;h[3]=0;h[4]=ba-I;h[5]=1-(F+z);h[6]=ha+M;h[7]=0;h[8]=aa+W;h[9]=ha-M;h[10]=1-(F+ea);h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function T(h,F){const X=Va,
aa=-F[0],ha=-F[1],z=-F[2],I=F[3],M=F[4],W=F[5],Z=F[6],ba=F[7],ea=aa*aa+ha*ha+z*z+I*I;0<ea?(X[0]=2*(M*I+ba*aa+W*z-Z*ha)/ea,X[1]=2*(W*I+ba*ha+Z*aa-M*z)/ea,X[2]=2*(Z*I+ba*z+M*ha-W*aa)/ea):(X[0]=2*(M*I+ba*aa+W*z-Z*ha),X[1]=2*(W*I+ba*ha+Z*aa-M*z),X[2]=2*(Z*I+ba*z+M*ha-W*aa));S(h,F,X);return h}function Q(h,F){h[0]=F[12];h[1]=F[13];h[2]=F[14];return h}function m(h,F){const X=F[0],aa=F[1],ha=F[2],z=F[4],I=F[5],M=F[6],W=F[8],Z=F[9];F=F[10];h[0]=Math.sqrt(X*X+aa*aa+ha*ha);h[1]=Math.sqrt(z*z+I*I+M*M);h[2]=Math.sqrt(W*
W+Z*Z+F*F);return h}function B(h,F){const X=F[0]+F[5]+F[10];let aa=0;0<X?(aa=2*Math.sqrt(X+1),h[3]=.25*aa,h[0]=(F[6]-F[9])/aa,h[1]=(F[8]-F[2])/aa,h[2]=(F[1]-F[4])/aa):F[0]>F[5]&&F[0]>F[10]?(aa=2*Math.sqrt(1+F[0]-F[5]-F[10]),h[3]=(F[6]-F[9])/aa,h[0]=.25*aa,h[1]=(F[1]+F[4])/aa,h[2]=(F[8]+F[2])/aa):F[5]>F[10]?(aa=2*Math.sqrt(1+F[5]-F[0]-F[10]),h[3]=(F[8]-F[2])/aa,h[0]=(F[1]+F[4])/aa,h[1]=.25*aa,h[2]=(F[6]+F[9])/aa):(aa=2*Math.sqrt(1+F[10]-F[0]-F[5]),h[3]=(F[1]-F[4])/aa,h[0]=(F[8]+F[2])/aa,h[1]=(F[6]+
F[9])/aa,h[2]=.25*aa);return h}function u(h,F,X,aa){var ha=F[0],z=F[1],I=F[2],M=F[3],W=ha+ha,Z=z+z,ba=I+I;F=ha*W;const ea=ha*Z;ha*=ba;const ia=z*Z;z*=ba;I*=ba;W*=M;Z*=M;M*=ba;ba=aa[0];const ka=aa[1];aa=aa[2];h[0]=(1-(ia+I))*ba;h[1]=(ea+M)*ba;h[2]=(ha-Z)*ba;h[3]=0;h[4]=(ea-M)*ka;h[5]=(1-(F+I))*ka;h[6]=(z+W)*ka;h[7]=0;h[8]=(ha+Z)*aa;h[9]=(z-W)*aa;h[10]=(1-(F+ia))*aa;h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function x(h,F,X,aa,ha){var z=F[0],I=F[1],M=F[2],W=F[3],Z=z+z,ba=I+I,ea=M+M;
F=z*Z;var ia=z*ba,ka=z*ea;z=I*ba;I*=ea;var sa=M*ea;M=W*Z;ba*=W;const oa=W*ea;var ra=aa[0],Ca=aa[1];ea=aa[2];aa=ha[0];W=ha[1];ha=ha[2];Z=(1-(z+sa))*ra;const xa=(ia+oa)*ra;ra*=ka-ba;ia=(ia-oa)*Ca;sa=(1-(F+sa))*Ca;Ca*=I+M;ka=(ka+ba)*ea;I=(I-M)*ea;F=(1-(F+z))*ea;h[0]=Z;h[1]=xa;h[2]=ra;h[3]=0;h[4]=ia;h[5]=sa;h[6]=Ca;h[7]=0;h[8]=ka;h[9]=I;h[10]=F;h[11]=0;h[12]=X[0]+aa-(Z*aa+ia*W+ka*ha);h[13]=X[1]+W-(xa*aa+sa*W+I*ha);h[14]=X[2]+ha-(ra*aa+Ca*W+F*ha);h[15]=1;return h}function O(h,F){var X=F[0],aa=F[1],ha=
F[2];F=F[3];var z=X+X,I=aa+aa;const M=ha+ha;X*=z;const W=aa*z;aa*=I;const Z=ha*z,ba=ha*I;ha*=M;z*=F;I*=F;F*=M;h[0]=1-aa-ha;h[1]=W+F;h[2]=Z-I;h[3]=0;h[4]=W-F;h[5]=1-X-ha;h[6]=ba+z;h[7]=0;h[8]=Z+I;h[9]=ba-z;h[10]=1-X-aa;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function H(h,F,X,aa,ha,z,I){const M=1/(X-F),W=1/(ha-aa),Z=1/(z-I);h[0]=2*z*M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*z*W;h[6]=0;h[7]=0;h[8]=(X+F)*M;h[9]=(ha+aa)*W;h[10]=(I+z)*Z;h[11]=-1;h[12]=0;h[13]=0;h[14]=I*z*2*Z;h[15]=0;return h}function U(h,
F,X,aa,ha){F=1/Math.tan(F/2);let z=void 0;h[0]=F/X;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=F;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[11]=-1;h[12]=0;h[13]=0;h[15]=0;null!=ha&&Infinity!==ha?(z=1/(aa-ha),h[10]=(ha+aa)*z,h[14]=2*ha*aa*z):(h[10]=-1,h[14]=-2*aa);return h}function Y(h,F,X,aa){const ha=Math.tan(F.upDegrees*Math.PI/180),z=Math.tan(F.downDegrees*Math.PI/180),I=Math.tan(F.leftDegrees*Math.PI/180);F=Math.tan(F.rightDegrees*Math.PI/180);const M=2/(I+F),W=2/(ha+z);h[0]=M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=W;h[6]=
0;h[7]=0;h[8]=-((I-F)*M*.5);h[9]=(ha-z)*W*.5;h[10]=aa/(X-aa);h[11]=-1;h[12]=0;h[13]=0;h[14]=aa*X/(X-aa);h[15]=0;return h}function da(h,F,X,aa,ha,z,I){const M=1/(F-X),W=1/(aa-ha),Z=1/(z-I);h[0]=-2*M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*W;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*Z;h[11]=0;h[12]=(F+X)*M;h[13]=(ha+aa)*W;h[14]=(I+z)*Z;h[15]=1;return h}function la(h,F,X,aa){const ha=F[0],z=F[1];F=F[2];let I=ha-X[0],M=z-X[1];X=F-X[2];var W=A.getEpsilon();if(Math.abs(I)<W&&Math.abs(M)<W&&Math.abs(X)<W)C(h);else{var Z=
1/Math.sqrt(I*I+M*M+X*X);I*=Z;M*=Z;X*=Z;Z=aa[0];var ba=aa[1];W=aa[2];aa=ba*X-W*M;W=W*I-Z*X;ba=Z*M-ba*I;(Z=Math.sqrt(aa*aa+W*W+ba*ba))?(Z=1/Z,aa*=Z,W*=Z,ba*=Z):ba=W=aa=0;var ea=M*ba-X*W,ia=X*aa-I*ba,ka=I*W-M*aa;(Z=Math.sqrt(ea*ea+ia*ia+ka*ka))?(Z=1/Z,ea*=Z,ia*=Z,ka*=Z):ka=ia=ea=0;h[0]=aa;h[1]=ea;h[2]=I;h[3]=0;h[4]=W;h[5]=ia;h[6]=M;h[7]=0;h[8]=ba;h[9]=ka;h[10]=X;h[11]=0;h[12]=-(aa*ha+W*z+ba*F);h[13]=-(ea*ha+ia*z+ka*F);h[14]=-(I*ha+M*z+X*F);h[15]=1}}function na(h,F,X,aa){const ha=F[0],z=F[1];F=F[2];
var I=aa[0];const M=aa[1];var W=aa[2];aa=ha-X[0];let Z=z-X[1];X=F-X[2];let ba=aa*aa+Z*Z+X*X;0<ba&&(ba=1/Math.sqrt(ba),aa*=ba,Z*=ba,X*=ba);let ea=M*X-W*Z;W=W*aa-I*X;I=I*Z-M*aa;ba=ea*ea+W*W+I*I;0<ba&&(ba=1/Math.sqrt(ba),ea*=ba,W*=ba,I*=ba);h[0]=ea;h[1]=W;h[2]=I;h[3]=0;h[4]=Z*I-X*W;h[5]=X*ea-aa*I;h[6]=aa*W-Z*ea;h[7]=0;h[8]=aa;h[9]=Z;h[10]=X;h[11]=0;h[12]=ha;h[13]=z;h[14]=F;h[15]=1;return h}function ua(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+
", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function ta(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+h[6]**2+h[7]**2+h[8]**2+h[9]**2+h[10]**2+h[11]**2+h[12]**2+h[13]**2+h[14]**2+h[15]**2)}function pa(h,F,X){h[0]=F[0]+X[0];h[1]=F[1]+X[1];h[2]=F[2]+X[2];h[3]=F[3]+X[3];h[4]=F[4]+X[4];h[5]=F[5]+X[5];h[6]=F[6]+X[6];h[7]=F[7]+X[7];h[8]=F[8]+X[8];h[9]=F[9]+X[9];h[10]=F[10]+X[10];h[11]=F[11]+X[11];h[12]=F[12]+X[12];h[13]=F[13]+X[13];h[14]=F[14]+X[14];
h[15]=F[15]+X[15];return h}function va(h,F,X){h[0]=F[0]-X[0];h[1]=F[1]-X[1];h[2]=F[2]-X[2];h[3]=F[3]-X[3];h[4]=F[4]-X[4];h[5]=F[5]-X[5];h[6]=F[6]-X[6];h[7]=F[7]-X[7];h[8]=F[8]-X[8];h[9]=F[9]-X[9];h[10]=F[10]-X[10];h[11]=F[11]-X[11];h[12]=F[12]-X[12];h[13]=F[13]-X[13];h[14]=F[14]-X[14];h[15]=F[15]-X[15];return h}function wa(h,F,X){h[0]=F[0]*X;h[1]=F[1]*X;h[2]=F[2]*X;h[3]=F[3]*X;h[4]=F[4]*X;h[5]=F[5]*X;h[6]=F[6]*X;h[7]=F[7]*X;h[8]=F[8]*X;h[9]=F[9]*X;h[10]=F[10]*X;h[11]=F[11]*X;h[12]=F[12]*X;h[13]=F[13]*
X;h[14]=F[14]*X;h[15]=F[15]*X;return h}function Da(h,F,X,aa){h[0]=F[0]+X[0]*aa;h[1]=F[1]+X[1]*aa;h[2]=F[2]+X[2]*aa;h[3]=F[3]+X[3]*aa;h[4]=F[4]+X[4]*aa;h[5]=F[5]+X[5]*aa;h[6]=F[6]+X[6]*aa;h[7]=F[7]+X[7]*aa;h[8]=F[8]+X[8]*aa;h[9]=F[9]+X[9]*aa;h[10]=F[10]+X[10]*aa;h[11]=F[11]+X[11]*aa;h[12]=F[12]+X[12]*aa;h[13]=F[13]+X[13]*aa;h[14]=F[14]+X[14]*aa;h[15]=F[15]+X[15]*aa;return h}function Ia(h,F){return h[0]===F[0]&&h[1]===F[1]&&h[2]===F[2]&&h[3]===F[3]&&h[4]===F[4]&&h[5]===F[5]&&h[6]===F[6]&&h[7]===F[7]&&
h[8]===F[8]&&h[9]===F[9]&&h[10]===F[10]&&h[11]===F[11]&&h[12]===F[12]&&h[13]===F[13]&&h[14]===F[14]&&h[15]===F[15]}function Ra(h,F){if(h===F)return!0;const X=h[0],aa=h[1],ha=h[2],z=h[3],I=h[4],M=h[5],W=h[6],Z=h[7],ba=h[8],ea=h[9],ia=h[10],ka=h[11],sa=h[12],oa=h[13],ra=h[14];h=h[15];const Ca=F[0],xa=F[1],Ba=F[2],Aa=F[3],ya=F[4],Ha=F[5],Pa=F[6],Ya=F[7],Wa=F[8],Ja=F[9],Ka=F[10],ja=F[11],Qa=F[12],Nb=F[13],nb=F[14];F=F[15];const b=A.getEpsilon();return Math.abs(X-Ca)<=b*Math.max(1,Math.abs(X),Math.abs(Ca))&&
Math.abs(aa-xa)<=b*Math.max(1,Math.abs(aa),Math.abs(xa))&&Math.abs(ha-Ba)<=b*Math.max(1,Math.abs(ha),Math.abs(Ba))&&Math.abs(z-Aa)<=b*Math.max(1,Math.abs(z),Math.abs(Aa))&&Math.abs(I-ya)<=b*Math.max(1,Math.abs(I),Math.abs(ya))&&Math.abs(M-Ha)<=b*Math.max(1,Math.abs(M),Math.abs(Ha))&&Math.abs(W-Pa)<=b*Math.max(1,Math.abs(W),Math.abs(Pa))&&Math.abs(Z-Ya)<=b*Math.max(1,Math.abs(Z),Math.abs(Ya))&&Math.abs(ba-Wa)<=b*Math.max(1,Math.abs(ba),Math.abs(Wa))&&Math.abs(ea-Ja)<=b*Math.max(1,Math.abs(ea),Math.abs(Ja))&&
Math.abs(ia-Ka)<=b*Math.max(1,Math.abs(ia),Math.abs(Ka))&&Math.abs(ka-ja)<=b*Math.max(1,Math.abs(ka),Math.abs(ja))&&Math.abs(sa-Qa)<=b*Math.max(1,Math.abs(sa),Math.abs(Qa))&&Math.abs(oa-Nb)<=b*Math.max(1,Math.abs(oa),Math.abs(Nb))&&Math.abs(ra-nb)<=b*Math.max(1,Math.abs(ra),Math.abs(nb))&&Math.abs(h-F)<=b*Math.max(1,Math.abs(h),Math.abs(F))}function Na(h){const F=A.getEpsilon(),X=h[0],aa=h[1],ha=h[2],z=h[4],I=h[5],M=h[6],W=h[8],Z=h[9];h=h[10];return Math.abs(1-(X*X+z*z+W*W))<=F&&Math.abs(1-(aa*aa+
I*I+Z*Z))<=F&&Math.abs(1-(ha*ha+M*M+h*h))<=F}function Sa(h){return 1===h[0]&&0===h[1]&&0===h[2]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[8]&&0===h[9]&&1===h[10]}const Va=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:pa,adjoint:v,copy:y,determinant:t,equals:Ra,exactEquals:Ia,frob:ta,fromQuat:O,fromQuat2:T,fromRotation:g,fromRotationTranslation:S,fromRotationTranslationScale:u,fromRotationTranslationScaleOrigin:x,fromScaling:N,fromTranslation:D,fromXRotation:K,fromYRotation:R,fromZRotation:L,
frustum:H,getRotation:B,getScaling:m,getTranslation:Q,hasIdentityRotation:Sa,identity:C,invert:d,invertOrIdentity:q,isOrthoNormal:Na,lookAt:la,mul:w,multiply:w,multiplyScalar:wa,multiplyScalarAndAdd:Da,ortho:da,perspective:U,perspectiveFromFieldOfView:Y,rotate:p,rotateX:a,rotateY:l,rotateZ:n,scale:r,set:G,str:ua,sub:va,subtract:va,targetTo:na,translate:J,transpose:e},Symbol.toStringTag,{value:"Module"}));c.add=pa;c.adjoint=v;c.copy=y;c.determinant=t;c.equals=Ra;c.exactEquals=Ia;c.frob=ta;c.fromQuat=
O;c.fromQuat2=T;c.fromRotation=g;c.fromRotationTranslation=S;c.fromRotationTranslationScale=u;c.fromRotationTranslationScaleOrigin=x;c.fromScaling=N;c.fromTranslation=D;c.fromXRotation=K;c.fromYRotation=R;c.fromZRotation=L;c.frustum=H;c.getRotation=B;c.getScaling=m;c.getTranslation=Q;c.hasIdentityRotation=Sa;c.identity=C;c.invert=d;c.invertOrIdentity=q;c.isOrthoNormal=Na;c.lookAt=la;c.mat4=f;c.mul=w;c.multiply=w;c.multiplyScalar=wa;c.multiplyScalarAndAdd=Da;c.ortho=da;c.perspective=U;c.perspectiveFromFieldOfView=
Y;c.rotate=p;c.rotateX=a;c.rotateY=l;c.rotateZ=n;c.scale=r;c.set=G;c.str=ua;c.sub=va;c.subtract=va;c.targetTo=na;c.translate=J;c.transpose=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,f,A){function y(u){return null==u||"string"===typeof u&&!u?"\x3cNull\x3e":u}function G(u){const x=null!=u.minValue||null!=u.maxValue,O=!!u.sqlExpression&&
u.supportsSQLExpression;return!(null!=u.normalizationField||null!=u.normalizationType)&&!x&&!O}function C(u){const {values:x,useSampleStdDev:O,supportsNullCount:H}=u;var U=Number.POSITIVE_INFINITY;let Y=Number.NEGATIVE_INFINITY,da=null,la=null;var na=null;let ua=null,ta=0;const pa=null==u.minValue?-Infinity:u.minValue,va=null==u.maxValue?Infinity:u.maxValue;for(const wa of x)Number.isFinite(wa)?wa>=pa&&wa<=va&&(da=null===da?wa:da+wa,U=Math.min(U,wa),Y=Math.max(Y,wa),ta++):"string"===typeof wa&&ta++;
if(ta&&null!=da){la=da/ta;na=0;for(const wa of x)Number.isFinite(wa)&&wa>=pa&&wa<=va&&(na+=(wa-la)**2);ua=O?1<ta?na/(ta-1):0:0<ta?na/ta:0;na=Math.sqrt(ua)}else Y=U=null;U={avg:la,count:ta,max:Y,min:U,stddev:na,sum:da,variance:ua};H&&(U.nullcount=x.length-ta);u.percentileParams&&(U.median=e(x,u.percentileParams));return U}function e(u,x){const {fieldType:O,value:H,orderBy:U,isDiscrete:Y}=x,da=q(O,"desc"===U);u=[...u].filter(ta=>null!=ta).sort((ta,pa)=>da(ta,pa));if(0===u.length)return null;if(0>=H)return u[0];
if(1<=H)return u[u.length-1];var la=(u.length-1)*H,na=Math.floor(la);x=na+1;la%=1;na=u[na];const ua=u[x];return x>=u.length||Y||"string"===typeof na||"string"===typeof ua?na:na*(1-la)+ua*la}function q(u,x){if(u){if(D.has(u))return x?m:B;if(N.has(u))return d(x,!1);if("esriFieldTypeTimestampOffset"===u)return x?S:L;const Y=d(x,!0);if("esriFieldTypeString"===u)return Y;if("esriFieldTypeGUID"===u||"esriFieldTypeGlobalID"===u)return(da,la)=>Y(v(da),v(la))}const O=x?1:-1,H=x?m:B,U=d(x,!0);return(Y,da)=>
"number"===typeof Y&&"number"===typeof da?H(Y,da):"string"===typeof Y&&"string"===typeof da?U(Y,da):O}function d(u,x){if(!x)return u?Q:T;const O=u?K:R;return u?(H,U)=>{const Y=O(H,U);if(null!=Y)return Y;H=H.toUpperCase();U=U.toUpperCase();return H>U?-1:H<U?1:0}:(H,U)=>{const Y=O(H,U);if(null!=Y)return Y;H=H.toUpperCase();U=U.toUpperCase();return H<U?-1:H>U?1:0}}function v(u){return u.substr(24,12)+u.substr(19,4)+u.substr(16,2)+u.substr(14,2)+u.substr(11,2)+u.substr(9,2)+u.substr(6,2)+u.substr(4,2)+
u.substr(2,2)+u.substr(0,2)}function t(u){return"coded-value"!==u?.type?[]:u.codedValues.map(x=>x.code)}function w(u,x){const O=r({field:x.field,normalizationType:x.normalizationType,normalizationField:x.normalizationField,classificationMethod:x.classificationMethod,standardDeviationInterval:x.standardDeviationInterval,breakCount:x.numClasses||5});u=J(u,x.minValue,x.maxValue);return A.createGenerateRendererClassBreaks({definition:O,values:u,normalizationTotal:x.normalizationTotal})}function J(u,x,
O){const H=null==x?-Infinity:x,U=null==O?Infinity:O;return u.filter(Y=>Number.isFinite(Y)&&Y>=H&&Y<=U)}function r(u){const {breakCount:x,field:O,normalizationField:H,normalizationType:U}=u,Y=u.classificationMethod||"equal-interval";return new f({breakCount:x,classificationField:O,classificationMethod:Y,normalizationField:"field"===U?H:void 0,normalizationType:U,standardDeviationInterval:"standard-deviation"===Y?u.standardDeviationInterval||1:void 0})}function p(u,x){const {field:O,classificationMethod:H,
standardDeviationInterval:U,normalizationType:Y,normalizationField:da,normalizationTotal:la,minValue:na,maxValue:ua}=x,ta=x.numBins||10;let pa=x=null,va=null;H&&"equal-interval"!==H||Y?({classBreaks:u}=w(u,{field:O,normalizationType:Y,normalizationField:da,normalizationTotal:la,classificationMethod:H,standardDeviationInterval:U,minValue:na,maxValue:ua,numClasses:ta}),x=u[0].minValue,pa=u[u.length-1].maxValue,va=u.map(wa=>[wa.minValue,wa.maxValue])):(null!=na&&null!=ua?(x=na,pa=ua):(u=C({values:u,
minValue:na,maxValue:ua,useSampleStdDev:!Y,supportsNullCount:G({normalizationType:Y,normalizationField:da,minValue:na,maxValue:ua})}),x=u.min??null,pa=u.max??null),va=l(x??0,pa??0,ta));return{min:x,max:pa,intervals:va}}function a(u,x){let O=-1;for(let H=u.length-1;0<=H;H--)if(x>=u[H][0]){O=H;break}return O}function l(u,x,O){const H=(x-u)/O,U=[];let Y;for(let da=1;da<=O;da++)Y=u+H,Y=Number(Y.toFixed(16)),U.push([u,da===O?x:Y]),u=Y;return U}const n=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,D=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),
N=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),g="min max avg stddev count sum variance nullcount median".split(" "),K=(u,x)=>null==u?null==x?0:1:null==x?-1:null,R=(u,x)=>null==u?null==x?0:-1:null==x?1:null,L=(u,x)=>R(u,x)??(u===x?0:(new Date(u)).getTime()-(new Date(x)).getTime()),S=(u,x)=>K(u,x)??(u===x?0:(new Date(x)).getTime()-(new Date(u)).getTime()),T=(u,x)=>R(u,x)??(u===x?0:u<x?-1:1),Q=(u,x)=>K(u,x)??(u===x?0:u<x?1:-1),m=(u,x)=>K(u,x)??x-u,B=(u,x)=>R(u,x)??u-x;c.calculateClassBreaks=
w;c.calculateHistogram=function(u,x){var O=p(u,x);if(null==O.min&&null==O.max)return{bins:[],minValue:O.min,maxValue:O.max,normalizationTotal:x.normalizationTotal};const H=O.intervals,U=O.min??0;O=O.max??0;const Y=H.map((da,la)=>({minValue:H[la][0],maxValue:H[la][1],count:0}));for(const da of u)null!=da&&da>=U&&da<=O&&(u=a(H,da),-1<u&&Y[u].count++);return{bins:Y,minValue:U,maxValue:O,normalizationTotal:x.normalizationTotal}};c.calculatePercentile=e;c.calculateStatistics=C;c.calculateStringStatistics=
function(u){const x=u.returnDistinct?[...(new Set(u.values))]:u.values;var O=x.filter(U=>null!=U).sort();const H=O.length;O={count:H,min:O[0],max:O[H-1]};u.supportsNullCount&&(O.nullcount=x.length-H);u.percentileParams&&(O.median=e(x,u.percentileParams));return O};c.calculateUniqueValuesCount=function(u){const x={};for(let O of u){if(null==O||"string"===typeof O&&""===O.trim())O=null;null==x[O]?x[O]={count:1,data:O}:x[O].count++}return{count:x}};c.createClassBreaksDefinition=r;c.createUVResult=function(u,
x,O,H){u=u.count;const U=[];if(O&&x){O=[];var Y=t(x[0]);for(const da of Y)if(x[1]){Y=t(x[1]);for(const la of Y)if(x[2]){Y=t(x[2]);for(const na of Y)O.push(`${y(da)}${H}${y(la)}${H}${y(na)}`)}else O.push(`${y(da)}${H}${y(la)}`)}else O.push(da);for(const da of O)u.hasOwnProperty(da)||(u[da]={data:da,count:0})}for(const da in u)x=u[da],U.push({value:x.data,count:x.count,label:x.label});return{uniqueValueInfos:U}};c.getAttributeComparator=q;c.getEqualIntervalBins=l;c.getNormalizedValue=function(u,x,O,
H){let U=null;switch(x){case "log":0!==u&&(U=Math.log(u)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(H)&&0!==H&&(U=u/H*100);break;case "field":Number.isFinite(O)&&0!==O&&(U=u/O);break;case "natural-log":0<u&&(U=Math.log(u));break;case "square-root":0<u&&(U=u**.5)}return U};c.isNullCountSupported=G;c.processNullValue=y;c.processSummaryStatisticsResult=function(u,x){let O;for(O in u)g.includes(O)&&(Number.isFinite(u[O])||(u[O]=null));if(!x)return u;["avg","stddev","variance"].forEach(H=>
{null!=u[H]&&(u[H]=Math.ceil(u[H]??0))});return u};c.resolveCBResult=function(u,x){let O=u.classBreaks;const H=O[0]?.minValue,U=O[O.length-1]?.maxValue,Y="standard-deviation"===x;O=O.map(da=>{const la=da.label;da={minValue:da.minValue,maxValue:da.maxValue,label:la};if(Y&&la){const na=la.match(n)?.map(ua=>+ua.trim())??[];2===na.length?(da.minStdDev=na[0],da.maxStdDev=na[1],0>na[0]&&0<na[1]&&(da.hasAvg=!0)):1===na.length&&(la.includes("\x3c")?(da.minStdDev=null,da.maxStdDev=na[0]):la.includes("\x3e")&&
(da.minStdDev=na[0],da.maxStdDev=null))}return da});return{minValue:H,maxValue:U,classBreakInfos:O,normalizationTotal:u.normalizationTotal}};c.statisticTypes=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,f,A,y,G,C,e,q,d){G=new f.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});f=new f.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});A=class extends A.JSONSupport{constructor(v){super(v);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(v){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",v)}set definedInterval(v){"defined-interval"===this.classificationMethod&&this._set("definedInterval",v)}};c.__decorate([q.enumeration({classBreaksDef:"class-breaks-definition"})],A.prototype,"type",void 0);c.__decorate([y.property({json:{write:!0}})],A.prototype,
"breakCount",void 0);c.__decorate([y.property({json:{write:!0}})],A.prototype,"classificationField",void 0);c.__decorate([y.property({type:String,json:{read:G.read,write:G.write}})],A.prototype,"classificationMethod",void 0);c.__decorate([y.property({json:{write:!0}})],A.prototype,"normalizationField",void 0);c.__decorate([y.property({json:{read:f.read,write:f.write}})],A.prototype,"normalizationType",void 0);c.__decorate([y.property({value:null,json:{write:!0}})],A.prototype,"standardDeviationInterval",
null);c.__decorate([y.property({value:null,json:{write:!0}})],A.prototype,"definedInterval",null);return A=c.__decorate([d.subclass("esri.rest.support.ClassBreaksDefinition")],A)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,f,A){c.enumeration=function(y,G={}){y=y instanceof f.JSONMap?y:new f.JSONMap(y,G);y={type:G?.ignoreUnknown??!0?y.apiValues:String,json:{type:y.jsonValues,read:G?.readOnly?!1:{reader:y.read},write:{writer:y.write}}};
void 0!==G?.readOnly&&(y.readOnly=!!G.readOnly);void 0!==G?.default&&(y.json.default=G.default);void 0!==G?.name&&(y.json.name=G.name);void 0!==G?.nonNullable&&(y.nonNullable=G.nonNullable);return A.property(y)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,f){function A(w){var J=w.definition;const {classificationMethod:r,normalizationType:p,definedInterval:a}=J;J=J.breakCount??
1;const l=[];var n=w.values;if(0===n.length)return[];n=n.sort((L,S)=>L-S);var D=n[0],N=n[n.length-1];if("equal-interval"===r)if(n.length>=J){n=(N-D)/J;w=D;for(var g=1;g<J;g++){var K=Number((D+g*n).toFixed(6));l.push({minValue:w,maxValue:K,label:y(w,K,p)});w=K}l.push({minValue:w,maxValue:N,label:y(w,N,p)})}else n.forEach(L=>{l.push({minValue:L,maxValue:L,label:y(L,L,p)})});else if("natural-breaks"===r){n=G(n);w=C(n.uniqueValues,w.valueFrequency||n.valueFrequency,J);for(g=1;g<J;g++)n.uniqueValues.length>
g&&(K=Number(n.uniqueValues[w[g]].toFixed(6)),l.push({minValue:D,maxValue:K,label:y(D,K,p)}),D=K);l.push({minValue:D,maxValue:N,label:y(D,N,p)})}else if("quantile"===r)if(n.length>=J&&D!==N){w=Math.ceil(n.length/J);g=0;for(K=1;K<J;K++){var R=w+g-1;R>n.length&&(R=n.length-1);0>R&&(R=0);l.push({minValue:D,maxValue:n[R],label:y(D,n[R],p)});D=n[R];g+=w;w=Math.ceil((n.length-g)/(J-K))}l.push({minValue:D,maxValue:N,label:y(D,N,p)})}else for(J=-1,N=0;N<n.length;N++)D=n[N],D!==J&&(J=D,l.push({minValue:J,
maxValue:D,label:y(J,D,p)}),J=D);else if("standard-deviation"===r)if(w=d(n),g=v(n,w),0===g)l.push({minValue:n[0],maxValue:n[0],label:y(n[0],n[0],p)});else{n=q(D,N,J,w,g)*g;g=0;for(K=J;1<=K;K--)R=Number((w-(K-.5)*n).toFixed(6)),l.push({minValue:D,maxValue:R,label:y(D,R,p)}),D=R,g++;K=Number((w+.5*n).toFixed(6));l.push({minValue:D,maxValue:K,label:y(D,K,p)});D=K;g++;for(R=1;R<=J;R++)K=g===2*J?N:Number((w+(R+.5)*n).toFixed(6)),l.push({minValue:D,maxValue:K,label:y(D,K,p)}),D=K,g++}else if("defined-interval"===
r){if(!a)return l;J=n[0];N=n[n.length-1];n=Math.ceil((N-J)/a);D=J;for(w=1;w<n;w++)g=Number((J+w*a).toFixed(6)),l.push({minValue:D,maxValue:g,label:y(D,g,p)}),D=g;l.push({minValue:D,maxValue:N,label:y(D,N,p)})}return l}function y(w,J,r){let p=null;return p=w===J?r&&"percent-of-total"===r?w+"%":w.toString():r&&"percent-of-total"===r?w+"% - "+J+"%":w+" - "+J}function G(w){const J=[],r=[];let p=Number.MIN_VALUE,a=1,l=-1;for(let n=0;n<w.length;n++){const D=w[n];D===p?(a++,r[l]=a):null!==D&&(J.push(D),
p=D,a=1,r.push(a),l++)}return{uniqueValues:J,valueFrequency:r}}function C(w,J,r){var p=w.length;const a=[];r>p&&(r=p);for(var l=0;l<r;l++)a.push(Math.round(l*p/r-1));a.push(p-1);l=e(a,w,J,r);p=l.mean;l=l.sdcm;var n=r,D=0,N=0;let g=0,K=0,R=!0;for(let S=0;2>S&&R;S++){0===S&&(R=!1);for(var L=0;L<n-1;L++)for(;a[L+1]+1!==a[L+2];)if(a[L+1]+=1,D=t(L,a,w,J),g=D.sbMean,D=D.sbSdcm,N=t(L+1,a,w,J),K=N.sbMean,N=N.sbSdcm,D+N<l[L]+l[L+1])l[L]=D,l[L+1]=N,p[L]=g,p[L+1]=K,R=!0;else{--a[L+1];break}for(L=n-1;0<L;L--)for(;a[L]!==
a[L-1]+1;)if(--a[L],D=t(L-1,a,w,J),g=D.sbMean,D=D.sbSdcm,N=t(L,a,w,J),K=N.sbMean,N=N.sbSdcm,D+N<l[L-1]+l[L])l[L-1]=D,l[L]=N,p[L-1]=g,p[L]=K,R=!0;else{a[L]+=1;break}}R&&(l=e(a,w,J,r));return a}function e(w,J,r,p){let a=[];var l=[],n=[];let D=0;const N=[],g=[];for(var K=0;K<p;K++){var R=t(K,w,J,r);N.push(R.sbMean);g.push(R.sbSdcm);D+=g[K]}R=D;for(K=!0;K||D<R;){K=!1;a=[];for(l=0;l<p;l++)a.push(w[l]);for(n=0;n<p;n++)for(R=w[n]+1;R<=w[n+1];R++)if(l=J[R],0<n&&R!==w[n+1]&&Math.abs(l-N[n])>Math.abs(l-N[n-
1]))w[n]=R;else if(n<p-1&&w[n]!==R-1&&Math.abs(l-N[n])>Math.abs(l-N[n+1])){w[n+1]=R-1;break}R=D;D=0;l=[];n=[];for(let L=0;L<p;L++){l.push(N[L]);n.push(g[L]);const S=t(L,w,J,r);N[L]=S.sbMean;g[L]=S.sbSdcm;D+=g[L]}}if(D>R){for(J=0;J<p;J++)w[J]=a[J],N[J]=l[J],g[J]=n[J];D=R}return{mean:N,sdcm:g}}function q(w,J,r,p,a){w=Math.max(p-w,J-p)/a/r;return 1<=w?1:.5<=w?.5:.25}function d(w){let J=0;for(let r=0;r<w.length;r++)J+=w[r];return J/=w.length}function v(w,J){let r=0;for(let p=0;p<w.length;p++){const a=
w[p];r+=(a-J)*(a-J)}r/=w.length;return Math.sqrt(r)}function t(w,J,r,p){var a=0,l=0;for(var n=J[w]+1;n<=J[w+1];n++){const D=p[n];a+=r[n]*D;l+=D}0>=l&&f.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");a/=l;l=0;for(n=J[w]+1;n<=J[w+1];n++)l+=p[n]*(r[n]-a)**2;return{sbMean:a,sbSdcm:l}}c.createGenerateRendererClassBreaks=function(w){const {normalizationTotal:J}=w;return{classBreaks:A(w),normalizationTotal:J}};c.createGenerateRendererUniqueValues=function(w){w=
G(w);const J=[],r=w.uniqueValues.length;for(let p=0;p<r;p++){const a=w.uniqueValues[p];J.push({value:a,count:w.valueFrequency[p],label:a.toString()})}return{uniqueValues:J}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(f,A,y,G,C,e=!1){return{objectId:f,target:A,distance:y,type:"edge",start:G,end:C,draped:e}};c.makeVertexCandidate=function(f,A,y){return{objectId:f,
target:A,distance:y,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(c,f,A,y,G,C,e,q,d,v){async function t(l,n,D){if(!l)return null;
var {where:N}=l;l.where=N=N?.trim();if(!N||/^1 *= *1$/.test(N)||n&&n===N)l.where=null;if(!l.geometry)return l;n=await J(l);l.distance=0;l.units=null;"esriSpatialRelEnvelopeIntersects"===l.spatialRel&&({spatialReference:N}=l.geometry,n=C.getGeometryExtent(n),n.spatialReference=N);if(n){await v.checkProjectionSupport(n.spatialReference,D);N=n.spatialReference;n=w(n,D)&&e.isExtent(n)?{spatialReference:N,rings:[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]}:n;N=(await q.normalizeCentralMeridian(e.fromJSON(n)))[0];
if(null==N)throw a;const g="quantizationParameters"in l&&l.quantizationParameters?.tolerance||"maxAllowableOffset"in l&&l.maxAllowableOffset||0;n=g&&w(n,D)?{densificationStep:8*g}:void 0;N=N.toJSON();n=v.project(N,N.spatialReference,D,n);if(!n)throw a;n.spatialReference=D;l.geometry=n}return l}function w(l,n){if(!l)return!1;const D=l.spatialReference;return(e.isExtent(l)||e.isPolygon(l)||e.isPolyline(l))&&!d.equals(D,n)&&!G.canProjectWithoutEngine(D,n)}async function J(l){const {distance:n,units:D}=
l,N=l.geometry;if(null==n||"vertexAttributes"in N)return N;var g=N.spatialReference;l=D?p.fromJSON(D):y.getUnitString(g);g=g&&(d.isGeographic(g)||d.isWebMercator(g))?N:await v.checkProjectionSupport(g,d.wgs84).then(()=>v.project(N,d.wgs84));return(await r())(g.spatialReference,g,n,l)}async function r(){return(await new Promise((l,n)=>c(["../../../geometry/geometryEngineJSON"],l,n))).geodesicBuffer}const p=new A.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});f.normalizeQuery=async function(l,n,D){const {outFields:N,orderByFields:g,groupByFieldsForStatistics:K,outStatistics:R}=l;if(N)for(var L=0;L<N.length;L++)N[L]=N[L].trim();if(g)for(L=0;L<g.length;L++)g[L]=g[L].trim();if(K)for(L=0;L<K.length;L++)K[L]=K[L].trim();if(R)for(L=0;L<R.length;L++)R[L].onStatisticField&&(R[L].onStatisticField=R[L].onStatisticField.trim());
l.geometry&&!l.outSR&&(l.outSR=l.geometry.spatialReference);return t(l,n,D)};f.normalizeQueryLike=t;f.queryEngineEmptyResult=a;f.unitsKebabDict=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(c,f,A,y,G,C){function e(w,J,r){const {outFields:p,orderByFields:a,returnDistinctValues:l,
outStatistics:n}=r,D=n?n.map(N=>N.outStatisticFieldName&&N.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const N=a.map(g=>{const K=g.toLowerCase();return K.includes(" asc")?K.split(" asc")[0]:K.includes(" desc")?K.split(" desc")[0]:g}).filter(g=>!D.includes(g));A.validateFields(w,J,N,{expressionName:"orderByFields",query:r})}if(p&&0<p.length)A.validateFields(w,J,p,{expressionName:"outFields",query:r,allowedFieldTypes:"all"});else if(l)throw new f("unsupported-query","outFields should be specified for returnDistinctValues",
{query:r});A.validateWhere(w,J,r.where,r)}function q(w,J,r){const {outStatistics:p,groupByFieldsForStatistics:a,having:l}=r;var n=a?.length,D=p?.length;if(l){if(!n||!D)throw new f("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:r});A.validateHaving(w,J,l,p,r)}if(D&&v(p)){D=p.map(N=>N.onStatisticField).filter(Boolean);A.validateFields(w,J,D,{expressionName:"onStatisticFields",query:r});n&&A.validateFields(w,J,a,{expressionName:"groupByFieldsForStatistics",
query:r});for(const N of p){const {onStatisticField:g,statisticType:K}=N;if(("percentile_disc"===K||"percentile_cont"===K)&&"statisticParameters"in N){if({statisticParameters:n}=N,!n)throw new f("unsupported-query","statisticParameters should be set for percentile type",{definition:N,query:r});}else w.get(g)&&"count"!==K&&"min"!==K&&"max"!==K&&A.validateFields(w,J,[g],{expressionName:`outStatistics with '${K}' statistic type`,allowedFieldTypes:t,query:r})}}}async function d(w,J,r,p){var a=[];r.valueExpression&&
({arcadeUtils:a}=await C.loadArcade(),a=a.extractFieldNames(r.valueExpression));r.field&&a.push(r.field);r.field2&&a.push(r.field2);r.field3&&a.push(r.field3);r.normalizationField&&a.push(r.normalizationField);if(!a.length&&!r.valueExpression)throw new f("unsupported-query","field or valueExpression is required",{params:r});A.validateFields(w,J,a,{expressionName:"statistics",query:p})}function v(w){return null!=w&&w.every(J=>"exceedslimit"!==J.statisticType)}const t=new Set([...A.numericFieldTypes,
...A.allDateAndTimeFieldTypes]);c.validateQuery=async function(w,{fieldsIndex:J,geometryType:r,spatialReference:p,availableFields:a}){if(0>(w.distance??0)||null!=w.geometryPrecision||w.multipatchOption&&"xyFootprint"!==w.multipatchOption||w.pixelSize||w.relationParam||w.text)throw new f("unsupported-query","Unsupported query options",{query:w});e(J,a,w);q(J,a,w);return Promise.all([G.checkSpatialQuerySupport(w,r,p),y.checkProjectionSupport(p,w.outSR)]).then(()=>w)};c.validateStatisticsQuery=async function(w,
J,{fieldsIndex:r,geometryType:p,spatialReference:a,availableFields:l}){if(0>(w.distance??0)||null!=w.geometryPrecision||w.multipatchOption||w.pixelSize||w.relationParam||w.text||w.outStatistics||w.groupByFieldsForStatistics||w.having||w.orderByFields)throw new f("unsupported-query","Unsupported query options",{query:w});e(r,l,w);return Promise.all([d(r,l,J,w),G.checkSpatialQuerySupport(w,p,a),y.checkProjectionSupport(a,w.outSR)]).then(()=>w)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(c,f,A,y,G,C,e,q,d,v,t,w){function J(){return new Promise((n,D)=>c(["../../../geometry/geometryEngineJSON"],n,D))}const r={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var p={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},l={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};f.canQueryWithRBush=function(n){if(C.isExtent(n))return!0;if(C.isPolygon(n)){for(const D of n.rings)if(5!==D.length||D[0][0]!==D[1][0]||D[0][0]!==D[4][0]||D[2][0]!==D[3][0]||D[0][1]!==D[3][1]||D[0][1]!==
D[4][1]||D[1][1]!==D[2][1])return!1;return!0}return!1};f.checkSpatialQuerySupport=async function(n,D,N){const {spatialRel:g,geometry:K}=n;if(K){if(null==g||!0!==p[g])throw new A("unsupported-query","Unsupported query spatial relationship",{query:n});if(e.isValid(K.spatialReference)&&e.isValid(N)){if(null==K||!0!==a[C.getJsonType(K)])throw new A("unsupported-query","Unsupported query geometry type",{query:n});if(null==D||!0!==l[D])throw new A("unsupported-query","Unsupported layer geometry type",{query:n});
if(n.outSR)return w.checkProjectionSupport(n.geometry?.spatialReference,n.outSR)}}};f.getSpatialQueryOperator=function(n,D,N,g,K){if(C.isPolygon(D)&&"esriGeometryPoint"===N&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n)){const R=d.convertFromPolygon(new v,D,!1,!1);return Promise.resolve(L=>q.polygonContainsPoint(R,!1,!1,L))}if(C.isPolygon(D)&&"esriGeometryMultipoint"===N){const R=d.convertFromPolygon(new v,D,!1,!1);if("esriSpatialRelContains"===n)return Promise.resolve(L=>q.polygonContainsMultipoint(R,
!1,!1,L,g,K))}if(C.isExtent(D)&&"esriGeometryPoint"===N&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n))return Promise.resolve(R=>y.extentContainsPoint(D,t.getGeometry(N,g,K,R)));if(C.isExtent(D)&&"esriGeometryMultipoint"===N&&"esriSpatialRelContains"===n)return Promise.resolve(R=>y.extentContainsMultipoint(D,t.getGeometry(N,g,K,R)));if(C.isExtent(D)&&"esriSpatialRelIntersects"===n){const R=G.getExtentIntersector(N);return Promise.resolve(L=>R(D,t.getGeometry(N,g,K,L)))}return J().then(R=>
{const L=R[r[n]].bind(null,D.spatialReference,D);return S=>L(t.getGeometry(N,g,K,S))})};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,f){c.extentIntersectsExtent=f.extentIntersectsExtent;c.extentIntersectsMultipoint=f.extentIntersectsMultipoint;c.extentIntersectsPoint=f.extentIntersectsPoint;c.extentIntersectsPolygon=f.extentIntersectsPolygon;c.extentIntersectsPolyline=f.extentIntersectsPolyline;
c.extentIntersectsRings=f.extentIntersectsRings;c.getFeatureExtentIntersector=f.getFeatureExtentIntersector;c.isSelfIntersecting=f.isSelfIntersecting;c.segmentIntersects=f.segmentIntersects;c.getExtentIntersector=function(A){return"mesh"===A?f.extentIntersectsExtent:f.getFeatureExtentIntersector(A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function f(A,y,G,C,e){if(!A)return!1;y=y?G?4:3:G?3:2;const {coords:q,
lengths:d}=A;G=!1;A=0;for(const t of d){var v=A;for(let w=A,J=A+t*y;w<J;w+=y){v=w+y;v===J&&(v=A);const r=q[w],p=q[w+1],a=q[v];v=q[v+1];(p<e&&v>=e||v<e&&p>=e)&&r+(e-p)/(v-p)*(a-r)<C&&(G=!G)}A+=t*y}return G}c.polygonContainsCoords=f;c.polygonContainsMultipoint=function(A,y,G,C,e,q){e=e?q?4:3:q?3:2;const {coords:d,lengths:v}=C;if(!v)return!1;for(let t=0,w=0;t<v.length;t++,w+=e)if(!f(A,y,G,d[w],d[w+1]))return!1;return!0};c.polygonContainsPoint=function(A,y,G,C){return f(A,y,G,C.coords[0],C.coords[1])};
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function f(G,C,e,q,d){if(null!=q&&null!=d)return v=>{const t=G(v,C);v=G(v,e);return(null==t||t<=d)&&(null==v||v>=q)};if(null!=q)return v=>{v=G(v,e);return null==v||v>=q};if(null!=d)return v=>{v=G(v,C);return null==v||v<=d}}function A(G,C,e,q){if(null!=e&&null!=q&&e===q)return d=>G(d,C)===e;if(null!=e&&null!=q)return d=>{d=G(d,C);return null!=d&&d>=e&&d<=
q};if(null!=e)return d=>{d=G(d,C);return null!=d&&d>=e};if(null!=q)return d=>{d=G(d,C);return null!=d&&d<=q}}function y(){return()=>!1}c.getTimeExtent=async function(G,C){if(!G)return null;const e=C.featureAdapter,{startTimeField:q,endTimeField:d}=G;let v=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;if(q&&d)await C.forEach(w=>{const J=e.getAttribute(w,q);w=e.getAttribute(w,d);null==J||isNaN(J)||(v=Math.min(v,J));null==w||isNaN(w)||(t=Math.max(t,w))});else{const w=q||d;await C.forEach(J=>{J=
e.getAttribute(J,w);null==J||isNaN(J)||(v=Math.min(v,J),t=Math.max(t,J))})}return{start:v,end:t}};c.getTimeOperator=function(G,C,e){if(!C||!G)return null;const {startTimeField:q,endTimeField:d}=G;if(!q&&!d)return null;const {start:v,end:t}=C;if(null===v&&null===t)return null;if(void 0===v&&void 0===t)return y();G=e.getAttributeAsTimestamp?.bind(e)??e.getAttribute.bind(e);return q&&d?f(G,q,d,v,t):A(G,q||d,v,t)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(c,f,A,y,G,C,e,q){function d(r){return r.trim().toLowerCase()}function v(r){const p=new Map;if(!r.fields)return p;const a=!0===r.datesInUnknownTimezone,{timeInfo:l,editFieldsInfo:n}=r;var D=(l?"startField"in l?l.startField:l.startTimeField:"")??"";const N=(l?"endField"in l?l.endField:l.endTimeField:"")??"",g="dateFieldsTimeZone"in r?r.dateFieldsTimeZone??null:r.dateFieldsTimeReference?e.fromTimeReference(r.dateFieldsTimeReference):null,K=n?"timeZone"in n?n.timeZone??g:n.dateFieldsTimeReference?
e.fromTimeReference(n.dateFieldsTimeReference):g??e.utc:null,R=l?"timeZone"in l?l.timeZone??g:l.timeReference?e.fromTimeReference(l.timeReference):g:null;D=new Map([[d(n?.creationDateField??""),K],[d(n?.editDateField??""),K],[d(D),R],[d(N),R]]);for(const {name:L,type:S}of r.fields)J.has(S)?p.set(L,e.unknown):"date"!==S&&"esriFieldTypeDate"!==S?p.set(L,null):a?p.set(L,e.unknown):(r=D.get(d(L??""))??g,p.set(L,r));return p}const t=new Map;class w{static fromJSON(r){return new w(r.fields,r.timeZoneByFieldName)}static fromLayer(r){return new w(r.fields??
[],v(r))}static fromLayerJSON(r){return new w(r.fields??[],v(r))}constructor(r=[],p){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=r||[];this._timeZoneByFieldName=p?new Map(p):null;r=[];for(const a of this.fields){p=a?.name;const l=C.normalizeFieldName(p)?.toLowerCase()??"";if(p&&l){const n=d(p);this._fieldsMap.set(p,a);this._fieldsMap.set(n,a);this._normalizedFieldsMap.set(l,
a);r.push(`${n}:${a.type}:${this._timeZoneByFieldName?.get(p)}`);C.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):C.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));C.isObjectIDField(a)||C.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}r.sort();this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const r of this.fields)C.isObjectIDField(r)||C.isGlobalIDField(r)||
r.nullable||void 0!==C.getFieldDefaultValue(r)||this._requiredFields.push(r)}return this._requiredFields}equals(r){return this.uid===r?.uid}has(r){return null!=this.get(r)}get(r){if(r){var p=this._fieldsMap.get(r);if(p)return p;(p=this._fieldsMap.get(d(r))??this._normalizedFieldsMap.get(C.normalizeFieldName(r)?.toLowerCase()??""))&&this._fieldsMap.set(r,p);return p}}getTimeZone(r){r=this.get(r&&"string"!==typeof r?r.name:r);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):
"date"===r.type||"esriFieldTypeDate"===r.type?(A.getLogger("esri.layers.support.FieldsIndex").error(new c("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),e.utc):J.has(r.type)?e.unknown:null:null}getLuxonTimeZone(r){const p=this.getTimeZone(r);return p?p===e.unknown?G.UnknownTimeZone.instance:p===e.utc?q.FixedOffsetZone.utcInstance:y.getOrCreateMapValue(t,p,()=>q.IANAZone.create(p)):null}isDateField(r){return this._dateFieldsSet.has(this.get(r))}isTimeOnlyField(r){return C.isTimeOnlyField(this.get(r))}isNumericField(r){return this._numericFieldsSet.has(this.get(r))}normalizeFieldName(r){return this.get(r)?.name??
void 0}toJSON(){return{fields:this.fields.map(r=>f.isSerializable(r)?r.toJSON():r),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const J=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return w})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(c,f,A,y,G,C,e,q,d,v,t,w,J,r,p){function a(Q){return l.has(Q)?l.get(Q):"number"===typeof Q?Q:1}c.TaskPriority=void 0;(function(Q){Q.RESOURCE_CONTROLLER_IMMEDIATE="immediate";Q.RESOURCE_CONTROLLER="schedule";Q.SLIDE="slide";Q.STREAM_DATA_LOADER="stream loader";Q.ELEVATION_QUERY="elevation query";Q.TERRAIN_SURFACE="terrain";Q.SURFACE_GEOMETRY_UPDATES="surface geometry updates";Q.LOD_RENDERER="LoD renderer";Q.GRAPHICS_CORE="Graphics3D";Q.I3S_CONTROLLER="I3S";Q.POINT_CLOUD_LAYER="point cloud";
Q.FEATURE_TILE_FETCHER="feature fetcher";Q.OVERLAY="overlay";Q.STAGE="stage";Q.GRAPHICS_DECONFLICTOR="graphics deconflictor";Q.FILTER_VISIBILITY="Graphics3D filter visibility";Q.SCALE_VISIBILITY="Graphics3D scale visibility";Q.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";Q.POINT_OF_INTEREST_FREQUENT="POI frequent";Q.POINT_OF_INTEREST_INFREQUENT="POI infrequent";Q.LABELER="labeler";Q.FEATURE_QUERY_ENGINE="feature query";Q.FEATURE_TILE_TREE="feature tile tree";Q.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
Q.ELEVATION_ALIGNMENT="elevation alignment";Q.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";Q.TEXT_TEXTURE_ATLAS="text texture atlas";Q.TEXTURE_UNLOAD="texture unload";Q.LINE_OF_SIGHT_TOOL="line of sight tool";Q.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";Q.ELEVATION_PROFILE="elevation profile";Q.SNAPPING="snapping";Q.SHADOW_ACCUMULATOR="shadow accumulator";Q.CLOUDS_GENERATOR="clouds generator";Q[Q.NONE=0]="NONE";Q[Q.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority=
{}));const l=new Map([[c.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[c.TaskPriority.RESOURCE_CONTROLLER,4],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.LOD_RENDERER,2],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,
4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[c.TaskPriority.TEXT_TEXTURE_ATLAS,12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),n=t.Milliseconds(6.5),D=t.Milliseconds(1),N=t.Milliseconds(30),g=t.Milliseconds(1E3/30),K=t.Milliseconds(100);var R;(function(Q){class m{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(x=>x.needsUpdate)}constructor(){this._updating=
v.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new C("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new u;this._state=r.RenderState.INTERACTING;this._tasks=new e;this._runQueue=new e;this._load=0;this._idleStateCallbacks=new e;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=d.watch(()=>J.SCHEDULER_LOG_SLOW_TASKS,O=>this._debug=O,d.initial);for(const O of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[O],
new C(c.TaskPriority[O]));const x=this;this._test={FRAME_SAFETY_BUDGET:n,INTERACTING_BUDGET:g,IDLE_BUDGET:K,get availableBudget(){return x._budget.budget},usedBudget:0,getBudget:()=>x._budget,setBudget:O=>x._budget=O,updateTask:O=>this._updateTask(O),getState:O=>this._getState(O),getRuntime:O=>this._getRuntime(O),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(x=>x.remove());this._tasks.clear();
G.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(x){this._updatingChanged();x&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(x,O){O=new B(this,x,O);this._tasks.push(O);this._updatingChanged();this.performanceInfo.tasks.has(x)||this.performanceInfo.tasks.set(x,new C(x));return O}registerIdleStateCallbacks(x,
O){const H={idleBegin:x,idleEnd:O};this._idleStateCallbacks.push(H);this.state===r.RenderState.IDLE&&this._idleUpdatesStartFired&&H.idleBegin();const U=this;return{remove:()=>this._removeIdleStateCallbacks(H),set idleBegin(Y){U._idleUpdatesStartFired&&(H.idleEnd(),U._state===r.RenderState.IDLE&&Y());H.idleBegin=Y},set idleEnd(Y){H.idleEnd=Y}}}get load(){return this._load}set state(x){this._state!==x&&(this._state=x,this.state!==r.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(O=>O.idleEnd())))}get state(){return this._state}updateBudget(x){this._test.usedBudget=0;++this._frameNumber;let O=n,H=x.frameDuration,U=D;switch(this.state){case r.RenderState.IDLE:O=t.Milliseconds(0);H=t.Milliseconds(Math.max(K,x.frameDuration));U=N;break;case r.RenderState.INTERACTING:H=t.Milliseconds(Math.max(g,x.frameDuration))}H=t.Milliseconds(H-x.elapsedFrameTime-O);if(this.state!==r.RenderState.IDLE&&H<D&&!this._forceTask)return this._forceTask=!0,!1;H=t.Milliseconds(Math.max(H,
U));this._budget.reset(H,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case r.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(x=>x.idleBegin()));this._runIdle();break;case r.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(t.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(x){this._idleUpdatesStartFired&&
x.idleEnd();this._idleStateCallbacks.removeUnordered(x)}removeTask(x){this._tasks.removeUnordered(x);this._runQueue.removeUnordered(x);this._updatingChanged()}_updateTask(x){this._tasks.forAll(O=>{O.name===x&&O.setPriority(x)})}_getState(x){if(this._runQueue.some(H=>H.name===x))return c.TaskState.SCHEDULED;let O=c.TaskState.IDLE;this._tasks.forAll(H=>{H.name===x&&H.needsUpdate&&(1>=H.schedulePriority?O=c.TaskState.READY:O!==c.TaskState.READY&&(O=c.TaskState.WAITING))});return O}_getRuntime(x){let O=
0;this._tasks.forAll(H=>{H.name===x&&(O+=H.runtime)});return O}_resetRuntimes(){this._tasks.forAll(x=>x.runtime=0)}_getRunning(){const x=new Map;this._tasks.forAll(H=>{H.needsUpdate&&x.set(H.name,(x.get(H.name)||0)+1)});if(0===x.size)return null;let O="";x.forEach((H,U)=>{O=1<H?O+` ${H}x ${U}`:O+` ${U}`});return O}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const x=this._tasks.reduce((O,H)=>H.needsUpdate?++O:O,0);this._load=.9*this._load+x*(1-.9)}_schedule(){this._runQueue.filterInPlace(x=>
{if(x.needsUpdate)return!0;x.schedulePriority=x.basePriority;return!1});for(this._tasks.forAll(x=>{0===x.basePriority&&x.needsUpdate&&!this._runQueue.includes(x)&&x.blockFrame!==this._frameNumber&&this._runQueue.unshift(x)});0===this._runQueue.length;){let x=!1;this._tasks.forAll(O=>{if(O.needsUpdate&&0!==O.schedulePriority&&0!==O.basePriority&&O.blockFrame!==this._frameNumber)switch(x=!0,O.schedulePriority){case 1:O.schedulePriority=0;this._runQueue.push(O);break;default:--O.schedulePriority}});
if(!x)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const x=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var O=this._budget.now();const H=this._runQueue.pop();this._budget.resetProgress();try{H.task.runTask(this._budget)===p.Yield&&(H.blockFrame=this._frameNumber)}catch(U){y.getLogger("esri.views.support.Scheduler").error(`Exception in task "${H.name}"`,U),H.blockFrame=this._frameNumber}!this._budget.hasProgressed&&H.blockFrame!==this._frameNumber&&
H.needsUpdate&&(H.blockFrame=this._frameNumber);H.schedulePriority=H.basePriority;O=this._budget.now()-O;H.runtime+=O;this._frameTaskTimes.set(H.priority,this._frameTaskTimes.get(H.priority)+O);this._debug&&O>2*this._budget.budget&&console.log("Task",H.name,"used",O,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-x);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
x)}_startFrameTaskTimes(){for(const x of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[x],0)}_recordFrameTaskTimes(x){this._frameTaskTimes.forEach((O,H)=>this.performanceInfo.tasks.get(H).record(O));this.performanceInfo.total.record(x)}get test(){return this._test}}Q.Scheduler=m;class B{get task(){return this._task.value}get updating(){return this._queue.running}constructor(x,O,H){this._scheduler=x;this.name=O;this.runtime=this.blockFrame=0;this._queue=new w.PromiseQueue;this._handles=
new f;this.schedulePriority=this._basePriority=a(O);this._task=v.signal(null!=H?H:this._queue);this._handles.add(d.when(()=>this.task.running,U=>x.taskRunningChanged(U)))}remove(){this.processQueue(L);this._scheduler.removeTask(this);this.schedule=T.schedule;this.reschedule=T.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(x){if(this.name!==x){this.name=x;x=a(x);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=x;this._basePriority=
x}}get priority(){return this.name}set priority(x){this.setPriority(x)}get needsUpdate(){return this.updating||this.task.running}schedule(x,O,H){return this._queue.push(x,O,H)}reschedule(x,O,H){return this._queue.unshift(x,O,H)}processQueue(x){return this._queue.runTask(x)}}class u{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=r.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(x){if(this.done)return!1;!0===x()&&this.madeProgress();
return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(x){this._enabled=x}reset(x,O){this._begin=this.now();this._budget=x;this._state=O;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=
this._progressed=!1}get hasProgressed(){return this._progressed}}Q.Budget=u})(R||={});c.TaskState=void 0;(function(Q){Q.SCHEDULED="s";Q.READY="r";Q.WAITING="w";Q.IDLE="i"})(c.TaskState||(c.TaskState={}));const L=(()=>{const Q=new R.Budget;Q.enabled=!1;return Q})();class S{remove(){}processQueue(){}schedule(Q,m,B){try{if(q.isAborted(m)){const u=q.createAbortError();return B?Promise.resolve(B(u)):Promise.reject(u)}return q.when(Q(L))}catch(u){return Promise.reject(u)}}reschedule(Q,m,B){return this.schedule(Q,
m,B)}}const T=new S;c.ImmediateTask=T;c.getTaskPriority=a;c.newScheduler=function(){return new R.Scheduler};c.noBudget=L;c.taskPriorities=l;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(c,f,A,y){class G{constructor(C,e){this._observable=new y.SimpleObservable;this._value=C;this._equalityFunction=e}get value(){A.trackAccess(this._observable);
return this._value}set value(C){this._equalityFunction(C,this._value)||(this._value=C,this._observable.notify())}mutate(C){C(this._value);this._observable.notify()}}c.signal=function(C,e=f.equalsShallow){return new G(C,e)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(c,f,A,y){class G{constructor(){this._tasks=[];this._runningTasks=A.signal(0)}get length(){return this._tasks.length}get running(){return 0<
this._runningTasks.value}destroy(){this.cancelAll()}runTask(e){if(0===this.length)return y.Yield;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,q,d){++this._runningTasks.value;return(new Promise((v,t)=>this._tasks.push(new C(v,t,e,q,d)))).finally(()=>--this._runningTasks.value)}unshift(e,q,d){++this._runningTasks.value;return(new Promise((v,t)=>this._tasks.unshift(new C(v,t,e,q,d)))).finally(()=>--this._runningTasks.value)}_process(e){if(0===this._tasks.length)return!1;const q=this._tasks.shift();
try{const d=f.isAborted(q.signal);if(d&&!q.abortCallback)q.reject(f.createAbortError());else{const v=d?q.abortCallback?.(f.createAbortError()):q.callback(e);f.isPromiseLike(v)?v.then(q.resolve,q.reject):q.resolve(v)}}catch(d){q.reject(d)}return!0}cancelAll(){const e=f.createAbortError();for(const q of this._tasks)if(q.abortCallback){const d=q.abortCallback(e);q.resolve(d)}else q.reject(e);this._tasks.length=0}}class C{constructor(e,q,d,v,t){this.resolve=e;this.reject=q;this.callback=d;this.signal=
v;this.abortCallback=t}}c.PromiseQueue=G;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],function(c){const f=Symbol("Yield");c.Yield=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,f,A,y,G,C,e){f=class extends f{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};c.__decorate([A.property()],f.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([A.property()],f.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);f=c.__decorate([e.subclass("esri.views.support.DebugFlags")],f);return new f})},"esri/views/support/RenderState":function(){define(["exports"],function(c){c.RenderState=
void 0;var f=c.RenderState||(c.RenderState={});f[f.ANIMATING=0]="ANIMATING";f[f.INTERACTING=1]="INTERACTING";f[f.IDLE=2]="IDLE";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports","../../../../core/date","../../../../core/number","../../../support/fieldUtils"],function(c,f,A,y){function*G(N,g,K){let R=0;for(;R<=N.length;){var L=N.indexOf(g,R);L=N.substring(R,-1<L?L:void 0);R+=L.length+g.length;if(!K||L.trim())yield L}}
function C(N){const g=N.includes("\r\n")?"\r\n":"\n";return G(N,g,!0)}function e(N,g){return G(N,g,!1)}function*q(N,g,K,R=()=>Object.create(null)){var L=C(N);L.next();var S="";N="";let T=0,Q=R(),m=0;a:for(const B of L){L=e(B,K);for(const u of L)if(S+=N+u,N="",T+=t(u),0===T%2){if(0<T)if(S=r.exec(S))Q[g[m]]=S[1].replaceAll(p,'"'),m++;else{Q=R();m=0;S="";T=0;continue a}else Q[g[m]]=S,m++;S="";T=0}else N=K;0===T?(yield Q,Q=R(),m=0):N="\n"}}function d(N,g){N=v(N,g).filter(K=>null!=K);g=N.map(K=>y.normalizeFieldName(K));
for(let K=g.length-1;0<=K;K--)g[K]||(g.splice(K,1),N.splice(K,1));return{names:g,aliases:N}}function v(N,g){if(!N?.length)return[];const K=[];var R="";let L="",S=0;N=e(N,g);for(const T of N)R+=L+T,L="",S+=t(T),0===S%2?(0<S?(R=r.exec(R))&&K.push(R[1].replaceAll(p,'"')):K.push(R),R="",S=0):L=g;return K}function t(N){let g=0,K;for(K=N.indexOf('"',0);0<=K;)g++,K=N.indexOf('"',K+1);return g}function w(N,g,K){g=y.normalizeFieldName(g)?.toLowerCase();K=y.normalizeFieldName(K)?.toLowerCase();const R=N.map(L=>
L.toLowerCase());g=g?N[R.indexOf(g)]:null;K=K?N[R.indexOf(K)]:null;return{longitudeFieldName:g||N[R.indexOf(D.find(L=>R.includes(L)))],latitudeFieldName:K||N[R.indexOf(n.find(L=>R.includes(L)))]}}function J(N){if(!N.length)return"string";const g=/[^+\-.,0-9]/;return N.map(K=>{if(""!==K){if(!g.test(K)){let R=l(K);if(!isNaN(R))return/[.,]/.test(K)||!Number.isInteger(R)||214783647<R||-214783648>R?"double":"integer";if(K.includes("E"))if(R=Number(K),Number.isNaN(R)){if(K.includes(",")&&(K=K.replace(",",
"."),R=Number(K),!Number.isNaN(R)))return"double"}else return"double"}return f.isDateString(K)?"date":"string"}}).reduce((K,R)=>{if(void 0===K)return R;if(void 0===R)return K;if(K===R)return R;if("string"===K||"string"===R)return"string";if("double"===K||"double"===R)return"double"})}const r=/^\s*"([\S\s]*)"\s*$/,p=/""/g,a=[","," ",";","|","\t"],l=function(){const N=A._parseInfo(),g=new RegExp("^"+N.regexp+"$"),K=new RegExp("["+N.group+"\\s\\xa0]","g"),R=N.factor;return L=>{L=g.exec(L);N.factor=R;
if(!L)return NaN;let S=L[1];if(!L[1]){if(!L[2])return NaN;S=L[2];N.factor*=-1}S=S.replace(K,"").replace(N.decimal,".");return+S*N.factor}}(),n="lat latitude latitude83 latdecdeg lat_dd y ycenter point_y".split(" "),D="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point_x".split(" ");c.extractFieldNamesAndAliasesFromRow=d;c.inferDelimiterAndLocationInfo=function(N,g,K){N=N.trim();g=g?.trim();var R=[],L=Array.from(new Set([K?.delimiter,...a])).filter(S=>null!=S);for(const S of L){L=
v(N,S).length;const T=v(g,S).length??L;1<L&&R.push({weight:Math.min(L,T),delimiter:S})}g=R.sort(({weight:S},{weight:T})=>T-S).map(({delimiter:S})=>S);for(const S of g)if(R=d(N,S).names,R=w(R,K?.longitudeField,K?.latitudeField),R.longitudeFieldName&&R.latitudeFieldName)return{delimiter:S,locationInfo:R};return{delimiter:g[0],locationInfo:null}};c.inferFieldType=J;c.inferFields=function(N,g,K,R,L){const S=[];g=q(N,K,g);N=[];for(var T of g){if(10===N.length)break;N.push(T)}for(T=0;T<K.length;T++){const m=
K[T];g=R[T];if(m===L.longitudeFieldName||m===L.latitudeFieldName)S.push({name:m,type:"esriFieldTypeDouble",alias:g});else{var Q=N.map(B=>B[m]);switch(J(Q)){case "integer":Q="esriFieldTypeInteger";break;case "double":Q="esriFieldTypeDouble";break;case "date":Q="esriFieldTypeDate";break;default:Q="esriFieldTypeString"}S.push({name:m,type:Q,alias:g,length:y.getFieldDefaultLength(Q)})}}return S};c.parseNumber=l;c.parseRows=q;c.readRowParts=e;c.readRows=C;c.splitSingleRow=v;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(c,f,A){function y(t=A.getLocale()){t=t.toLowerCase();let w=t in q;if(!w){const a=t.split("-");1<a.length&&a[0]in q&&(t=a[0],w=!0);w||(t="en")}const [J,r,p="#,##0.###"]=q[t];return{decimal:J,group:r,pattern:p}}function G(t){t=t||{};var w=y(t.locale);const J=t.pattern||w.pattern,r=w.group,p=w.decimal;let a=1;if(J.includes("%"))a/=100;else if(J.includes("\u2030"))a/=1E3;else if(J.includes("\u00a4"))throw Error("currency notation not supported");
w=J.split(";");1===w.length&&w.push("-"+w[0]);return{regexp:v(w,l=>{l="(?:"+f.escapeRegExpString(l,".")+")";return l.replace(d,n=>{const D={signed:!1,separator:t.strict?r:[r,""],fractional:t.fractional,decimal:p,exponent:!1};n=n.split(".");let N=t.places;1===n.length&&1!==a&&(n[1]="###");1===n.length||0===N?D.fractional=!1:(void 0===N&&(N=t.pattern?n[1].lastIndexOf("0")+1:Infinity),N&&null==t.fractional&&(D.fractional=!0),!t.places&&+N<n[1].length&&(N+=","+n[1].length),D.places=N);n=n[0].split(",");
1<n.length&&(D.groupSize=n.pop().length,1<n.length&&(D.groupSize2=n.pop().length));return"("+C(D)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:r,decimal:p,factor:a}}function C(t){t=t||{};"places"in t||(t.places=Infinity);"string"!==typeof t.decimal&&(t.decimal=".");"fractional"in t&&!String(t.places).startsWith("0")||(t.fractional=[!0,!1]);"exponent"in t||(t.exponent=[!0,!1]);"eSigned"in t||(t.eSigned=[!0,!1]);var w=e(t);const J=v(t.fractional,p=>{let a="";p&&0!==t.places&&(a="\\"+t.decimal,
a=Infinity===t.places?"(?:"+a+"\\d+)?":a+("\\d{"+t.places+"}"));return a},!0),r=v(t.exponent,p=>p?"([eE]"+e({signed:t.eSigned})+")":"");w+=J;J&&(w="(?:(?:"+w+")|(?:"+J+"))");return w+r}function e(t){t=t||{};"signed"in t||(t.signed=[!0,!1]);"separator"in t?"groupSize"in t||(t.groupSize=3):t.separator="";const w=v(t.signed,r=>r?"[-+]":"",!0),J=v(t.separator,r=>{if(!r)return"(?:\\d+)";r=f.escapeRegExpString(r);" "===r?r="\\s":"\u00a0"===r&&(r="\\s\\xa0");const p=t.groupSize,a=t.groupSize2;return a?(r=
"(?:0|[1-9]\\d{0,"+(a-1)+"}(?:["+r+"]\\d{"+a+"})*["+r+"]\\d{"+p+"})",0<p-a?"(?:"+r+"|(?:0|[1-9]\\d{0,"+(p-1)+"}))":r):"(?:0|[1-9]\\d{0,"+(p-1)+"}(?:["+r+"]\\d{"+p+"})*)"},!0);return w+J}const q={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],
hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},d=/[#0,]*[#0](?:\.0*#*)?/,v=(t,w,J)=>{if(!(t instanceof Array))return w(t);const r=[];for(let p=0;p<
t.length;p++)r.push(w(t[p]));t=r.join("|");return"("+(J?"?:":"")+t+")"};c._parseInfo=G;c.format=function(t,w){w={...w};var J=y(w.locale);w.customs=J;J=w.pattern||J.pattern;if(isNaN(t)||Infinity===Math.abs(t))return null;var r=t;var p=w||{};var a=p.customs.group,l=p.customs.decimal;J=J.split(";");t=J[0];w=J[0>r?1:0]||"-"+t;if(w.includes("%"))r*=100;else if(w.includes("\u2030"))r*=1E3;else{if(w.includes("\u00a4"))throw Error("currency notation not supported");if(w.includes("E"))throw Error("exponential notation not supported");
}J=d;var n=t.match(J);if(!n)throw Error("unable to find a number expression in pattern: "+w);!1===p.fractional&&(p.places=0);t=w.replace;n=n[0];p=p={decimal:l,group:a,places:p.places,round:p.round};!0===p.places&&(p.places=0);Infinity===p.places&&(p.places=6);l=n.split(".");var D="string"===typeof p.places&&p.places.indexOf(",");n=p.places;D?n=p.places.substring(D+1):0<=+n||(n=(l[1]||[]).length);0>p.round||(r=Number(r.toFixed(Number(n))));a=String(Math.abs(r)).split(".");r=a[1]||"";l[1]||p.places?
(D&&(p.places=p.places.substring(0,D)),D=void 0!==p.places?p.places:l[1]&&l[1].lastIndexOf("0")+1,+D>r.length&&(a[1]=r.padEnd(Number(D),"0")),+n<r.length&&(a[1]=r.substr(0,Number(n)))):a[1]&&a.pop();r=l[0].replace(",","");n=r.indexOf("0");-1!==n&&(n=r.length-n,n>a[0].length&&(a[0]=a[0].padStart(n,"0")),r.includes("#")||(a[0]=a[0].substr(a[0].length-n)));r=l[0].lastIndexOf(",");let N;if(-1!==r){var g=l[0].length-r-1;l=l[0].substr(0,r);r=l.lastIndexOf(",");-1!==r&&(N=l.length-r-1)}l=[];for(r=a[0];r;)n=
r.length-g,l.push(0<n?r.substr(n):r),r=0<n?r.slice(0,n):"",N&&(g=N,N=void 0);a[0]=l.reverse().join(p.group||",");g=a.join(p.decimal||".");return t.call(w,J,g)};c.getCustoms=y;c.parse=function(t,w){w=G(w);t=(new RegExp("^"+w.regexp+"$")).exec(t);if(!t)return NaN;let J=t[1];if(!t[1]){if(!t[2])return NaN;J=t[2];w.factor*=-1}J=J.replaceAll(new RegExp("["+w.group+"\\s\\xa0]","g"),"").replace(w.decimal,".");return Number(J)*w.factor};c.regexp=function(t){return G(t).regexp};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(c,f,A,y,G){const C=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let e=1;c.createCapabilities=function(q,d){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:q},metadata:{supportsAdvancedFieldProperties:!1},
operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:d,supportsDelete:d,supportsEditing:d,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:d,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:y.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},
editing:{supportsGeometryUpdate:d,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}};c.createDefaultAttributesFunction=function(q,d){if(f("esri-csp-restrictions"))return()=>({[d]:null,...q});try{let v=`this.${d} = null;`;for(const w in q){const J=
C.test(w)?`.${w}`:`["${w}"]`;v+=`this${J} = ${JSON.stringify(q[w])};`}const t=(new Function(`\n      return class AttributesClass$${e++} {\n        constructor() {\n          ${v};\n        }\n      }\n    `))();return()=>new t}catch(v){return()=>({[d]:null,...q})}};c.createDefaultTemplate=function(q={}){return[{name:"New Feature",description:"",prototype:{attributes:A.clone(q)}}]};c.createDrawingInfo=function(q){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===q||"esriGeometryMultipoint"===
q?G.defaultPointSymbolJSON:"esriGeometryPolyline"===q?G.defaultPolylineSymbolJSON:G.defaultPolygonSymbolJSON}}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(c){const f=[252,146,31,255],A={type:"esriSMS",style:"esriSMSCircle",size:6,color:f,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},y={type:"esriSLS",style:"esriSLSSolid",width:.75,color:f};c.defaultColor=f;c.defaultOutlineColor=
[153,153,153,255];c.defaultPointSymbolJSON=A;c.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};c.defaultPolylineSymbolJSON=y;c.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};c.errorPointSymbolJSON=
{type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};c.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};c.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../geometry ../../../../request ../../../../core/asyncUtils ../../../../core/date ../../../../core/Error ../../../../core/Logger ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../geometry/projection ../../../../geometry/geometryAdapters/json ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/webMercatorUtils ../../OptimizedFeature ../../OptimizedGeometry ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ../csv/csv ./clientSideDefaults ../../../support/FieldsIndex ../../../support/fieldUtils ../../../../time/timeZoneUtils ../../../../geometry/SpatialReference".split(" "),function(c,
f,A,y,G,C,e,q,d,v,t,w,J,r,p,a,l,n,D,N,g,K,R){function L(u,x){var O=x.parsingOptions||{};const H={delimiter:O.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:O.latitudeField,longitudeFieldName:O.longitudeField}},U=H.layerDefinition={name:q.getFilename(x.url,T)||"csv",dateFieldsTimeReference:{timeZoneIANA:K.utc},drawingInfo:S,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:O.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,
ymax:Number.NEGATIVE_INFINITY,spatialReference:O.spatialReference||{wkid:4326}}};var Y=n.readRows(u);x=Y.next().value?.trim();Y=Y.next().value?.trim();if(!x)throw new G("csv-layer:empty-csv","CSV is empty",{csv:u});const {delimiter:da,locationInfo:la}=n.inferDelimiterAndLocationInfo(x,Y,O);if(!da)throw new G("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV",{firstLine:x,secondLine:Y,parsingOptions:O});if(!la)throw new G("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file",
{firstLine:x,secondLine:Y,parsingOptions:O});H.locationInfo=la;H.delimiter=da;const {names:na,aliases:ua}=n.extractFieldNamesAndAliasesFromRow(x,da);u=n.inferFields(u,H.delimiter,na,ua,H.locationInfo);if(O.fields?.length){O=new N(O.fields);for(var ta of u)(x=O.get(ta.name))&&Object.assign(ta,x)}u.some(pa=>"esriFieldTypeOID"===pa.type?(U.objectIdField=pa.name,!0):!1)||(ta={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},U.objectIdField=ta.name,u.unshift(ta));U.fields=
u;O=new N(U.fields);H.locationInfo&&(H.locationInfo.latitudeFieldName=O.get(H.locationInfo.latitudeFieldName).name,H.locationInfo.longitudeFieldName=O.get(H.locationInfo.longitudeFieldName).name);U.timeInfo&&(ta=U.timeInfo,ta.startTimeField&&((u=O.get(ta.startTimeField))?(ta.startTimeField=u.name,u.type="esriFieldTypeDate"):ta.startTimeField=null),ta.endTimeField&&((u=O.get(ta.endTimeField))?(ta.endTimeField=u.name,u.type="esriFieldTypeDate"):ta.endTimeField=null),ta.trackIdField&&(O=O.get(ta.trackIdField),
ta.trackIdField=O?O.name:null),ta.startTimeField||ta.endTimeField||(U.timeInfo=null));return H}const S=D.createDrawingInfo("esriGeometryPoint"),T=["csv"],Q=[0,0];class m{constructor(u,x){this.x=u;this.y=x}}class B{constructor(){this._queryEngine=null;this._snapshotFeatures=async u=>{u=await this._fetch(u);return this._createFeatures(u)}}destroy(){this._queryEngine?.destroy();this._queryEngine=null}async load(u,x={}){this._loadOptions=u;[x]=await Promise.all([this._fetch(x.signal),this._checkProjection(u?.parsingOptions?.spatialReference)]);
u=L(x,u);this._locationInfo=u.locationInfo;this._delimiter=u.delimiter;this._queryEngine=this._createQueryEngine(u);x=await this._createFeatures(x);this._queryEngine.featureStore.addMany(x);const {fullExtent:O,timeExtent:H}=await this._queryEngine.fetchRecomputedExtents();u.layerDefinition.extent=O;if(H){const {start:U,end:Y}=H;u.layerDefinition.timeInfo.timeExtent=[U,Y]}return u}async applyEdits(){throw new G("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer");}async queryFeatures(u=
{},x={}){await this._waitSnapshotComplete();return this._queryEngine.executeQuery(u,x.signal)}async queryFeatureCount(u={},x={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForCount(u,x.signal)}async queryObjectIds(u={},x={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForIds(u,x.signal)}async queryExtent(u={},x={}){await this._waitSnapshotComplete();return this._queryEngine.executeQueryForExtent(u,x.signal)}async querySnapping(u,x={}){await this._waitSnapshotComplete();
return this._queryEngine.executeQueryForSnapping(u,x.signal)}async refresh(u){this._loadOptions.customParameters=u;this._snapshotTask?.abort();this._snapshotTask=A.createTask(this._snapshotFeatures);this._snapshotTask.promise.then(H=>{this._queryEngine.featureStore.clear();H&&this._queryEngine.featureStore.addMany(H)},H=>{this._queryEngine.featureStore.clear();e.isAbortError(H)||C.getLogger("esri.layers.CSVLayer").error(new G("csv-layer:refresh","An error occurred during refresh",{error:H}))});await this._waitSnapshotComplete();
const {fullExtent:x,timeExtent:O}=await this._queryEngine.fetchRecomputedExtents();return{extent:x,timeExtent:O}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(u){const {url:x,customParameters:O}=this._loadOptions;if(!x)throw new G("csv-layer:invalid-source","url not defined");const H=q.urlToObject(x);return(await f(H.path,{query:{...H.query,...O},responseType:"text",signal:u})).data}_createQueryEngine(u){const {objectIdField:x,
fields:O,extent:H,timeInfo:U}=u.layerDefinition;u=new p({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new l.QueryEngine({fieldsIndex:N.fromLayerJSON({fields:O,dateFieldsTimeReference:{timeZoneIANA:K.utc}}),geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:U,objectIdField:x,spatialReference:H.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:u})}async _createFeatures(u){const {latitudeFieldName:x,longitudeFieldName:O}=this._locationInfo,{objectIdField:H,fieldsIndex:U,
spatialReference:Y}=this._queryEngine;let da=[];const la=[];var na=U.fields.filter(wa=>wa.name!==H).map(wa=>wa.name),ua=0,ta={};for(const wa of U.fields)if("esriFieldTypeOID"!==wa.type&&"esriFieldTypeGlobalID"!==wa.type){const Da=g.getFieldDefaultValue(wa);void 0!==Da&&(ta[wa.name]=Da)}u=n.parseRows(u,na,this._delimiter,D.createDefaultAttributesFunction(ta,H));for(var pa of u)if(u=this._parseCoordinateValue(pa[x]),na=this._parseCoordinateValue(pa[O]),null!=na&&null!=u&&!isNaN(u)&&!isNaN(na)){pa[x]=
u;pa[O]=na;for(var va in pa)va!==x&&va!==O&&(U.isDateField(va)?pa[va]=y.parseDate(pa[va]):U.isNumericField(va)&&(ta=n.parseNumber(pa[va]),isNaN(ta)?pa[va]=null:pa[va]=ta));pa[H]=ua;ua++;da.push(new m(na,u));la.push(pa)}if(!t.equals({wkid:4326},Y))if(t.isWebMercator(Y))for(const wa of da)[wa.x,wa.y]=w.lngLatToXY(wa.x,wa.y,Q);else da=d.projectMany(v.jsonAdapter,da,R.WGS84,Y,null,null);ua=[];for(pa=0;pa<da.length;pa++){const {x:wa,y:Da}=da[pa];va=la[pa];va[H]=pa+1;ua.push(new J.OptimizedFeature(new r([],
[wa,Da]),va,null,va[H]))}return ua}_parseCoordinateValue(u){if(null==u||""===u)return null;let x=n.parseNumber(u);if(isNaN(x)||181<Math.abs(x))x=parseFloat(u);return x}async _checkProjection(u){try{await a.checkProjectionSupport(t.wgs84,u)}catch{throw new G("csv-layer:projection-not-supported","Projection not supported");}}}return B});