// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(c,g,w,u,H,C,f,n,d,r){function B(x,I){return x?I?4:3:I?3:2}function A(x,I,M,W){if(x){if(M)return I&&W?E:Va;if(I&&W)return h}else if(I&&W)return Va;return Sa}function K({scale:x,
translate:I},M){return Math.round((M-I[0])/x[0])}function t({scale:x,translate:I},M){return Math.round((I[1]-M)/x[1])}function q({scale:x,translate:I},M,W){return M*x[W]+I[W]}function a(x){x=x.coords;return{x:x[0],y:x[1]}}function m(x,I){x.coords[0]=I.x;x.coords[1]=I.y;return x}function p(x){x=x.coords;return{x:x[0],y:x[1],z:x[2]}}function F(x,I){x.coords[0]=I.x;x.coords[1]=I.y;x.coords[2]=I.z;return x}function Q(x){x=x.coords;return{x:x[0],y:x[1],m:x[2]}}function e(x,I){x.coords[0]=I.x;x.coords[1]=
I.y;x.coords[2]=I.m;return x}function J(x){x=x.coords;return{x:x[0],y:x[1],z:x[2],m:x[3]}}function T(x,I){x.coords[0]=I.x;x.coords[1]=I.y;x.coords[2]=I.z;x.coords[3]=I.m;return x}function L(x,I){return x&&I?T:x?F:I?e:m}function U(x,I,M,W,Z){M=L(M,W);for(const {geometry:ba,attributes:ea}of I)I=null!=ba?M(new r,ba):null,x.push(new n.OptimizedFeature(I,ea,null,Z?ea[Z]:void 0));return x}function S(x,I,M=L(null!=I.z,null!=I.m)){return M(x,I)}function P(x,I,M,W){for(const {geometry:Z,attributes:ba}of I)x.push({attributes:ba,
geometry:null!=Z?l(Z,M,W):null});return x}function l(x,I,M){if(null==x)return null;const W=B(I,M),Z=[];for(let ba=0;ba<x.coords.length;ba+=W){const ea=[];for(let ia=0;ia<W;ia++)ea.push(x.coords[ba+ia]);Z.push(ea)}return I?M?{points:Z,hasZ:I,hasM:M}:{points:Z,hasZ:I}:M?{points:Z,hasM:M}:{points:Z}}function z(x,I,M,W,Z){M=B(M,W);for(const {geometry:ba,attributes:ea}of I)I=null!=ba?y(new r,ba,M):null,x.push(new n.OptimizedFeature(I,ea,null,Z?ea[Z]:void 0));return x}function y(x,I,M=B(I.hasZ,I.hasM)){x.lengths[0]=
I.points.length;const W=x.coords;let Z=0;for(const ba of I.points)for(I=0;I<M;I++)W[Z++]=ba[I];return x}function v(x,I,M){if(!x)return null;const W=B(I,M),{coords:Z,lengths:ba}=x;x=[];let ea=0;for(const ia of ba){const la=[];for(let ra=0;ra<ia;ra++){const oa=[];for(let qa=0;qa<W;qa++)oa.push(Z[ea++]);la.push(oa)}x.push(la)}return I?M?{paths:x,hasZ:I,hasM:M}:{paths:x,hasZ:I}:M?{paths:x,hasM:M}:{paths:x}}function N(x,I,M,W,Z){M=B(M,W);for(const {geometry:ba,attributes:ea,centroid:ia}of I)I=null!=ba?
G(new r,ba,M):null,W=null!=ia?S(new r,ia):null,x.push(new n.OptimizedFeature(I,ea,W,Z?ea[Z]:void 0));return x}function G(x,I,M=B(I.hasZ,I.hasM)){const {lengths:W,coords:Z}=x;let ba=0;for(const ea of I.paths){for(const ia of ea)for(I=0;I<M;I++)Z[ba++]=ia[I];W.push(ea.length)}return x}function R(x,I,M){if(!x)return null;const W=B(I,M),{coords:Z,lengths:ba}=x;x=[];let ea=0;for(const ia of ba){const la=[];for(let ra=0;ra<ia;ra++){const oa=[];for(let qa=0;qa<W;qa++)oa.push(Z[ea++]);la.push(oa)}x.push(la)}return I?
M?{rings:x,hasZ:I,hasM:M}:{rings:x,hasZ:I}:M?{rings:x,hasM:M}:{rings:x}}function Y(x,I,M=I.hasZ,W=I.hasM){return ca(x,I.rings,M,W)}function ca(x,I,M,W){M=B(M,W);const {lengths:Z,coords:ba}=x;W=0;Da(x);for(const ea of I){for(const ia of ea)for(I=0;I<M;I++)ba[W++]=ia[I];Z.push(ea.length)}return x}function ja(x,I,M,W,Z,ba){Ia(x);if(!M){for(const ea of I)x.push(new n.OptimizedFeature(null,ea.attributes,null,ba?ea.attributes[ba]:void 0));return x}switch(M){case "esriGeometryPoint":return U(x,I,W,Z,ba);
case "esriGeometryMultipoint":return z(x,I,W,Z,ba);case "esriGeometryPolyline":return N(x,I,W,Z,ba);case "esriGeometryPolygon":for(const {geometry:ea,centroid:ia,attributes:la}of I)I=null!=ea?Y(new r,ea,W,Z):null,M=ba?la[ba]:void 0,null!=ia?x.push(new n.OptimizedFeature(I,la,m(new r,ia),M)):x.push(new n.OptimizedFeature(I,la,null,M));break;default:Ra().error("convertToFeatureSet:unknown-geometry",new g(`Unable to parse unknown geometry type '${M}'`)),Ia(x)}return x}function na(x,I,M,W){x=x&&("coords"in
x?x:x.geometry);if(null==x)return null;switch(I){case "esriGeometryPoint":return I=a,M&&W?I=J:M?I=p:W&&(I=Q),I(x);case "esriGeometryMultipoint":return l(x,M,W);case "esriGeometryPolyline":return v(x,M,W);case "esriGeometryPolygon":return R(x,M,W);default:return Ra().error("convertToGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${I}'`)),null}}function sa(x,I,M,W,Z){Ia(x);if(null==M){for(const ea of I)x.push({attributes:ea.attributes});return x}switch(M){case "esriGeometryPoint":M=
a;W&&Z?M=J:W?M=p:Z&&(M=Q);for(var ba of I){const {geometry:ea,attributes:ia}=ba;W=null!=ea?M(ea):null;x.push({attributes:ia,geometry:W})}break;case "esriGeometryMultipoint":return P(x,I,W,Z);case "esriGeometryPolyline":for(const {geometry:ea,attributes:ia}of I)x.push({attributes:ia,geometry:null!=ea?v(ea,W,Z):null});break;case "esriGeometryPolygon":for(const {geometry:ea,attributes:ia,centroid:la}of I)ba=null!=ea?R(ea,W,Z):null,null!=la?(I=a(la),x.push({attributes:ia,centroid:I,geometry:ba})):x.push({attributes:ia,
geometry:ba});break;default:Ra().error("convertToFeatureSet:unknown-geometry",new g(`Unable to parse unknown geometry type '${M}'`))}return x}function ua(x,I,M,W,Z,ba,ea=M,ia=W){Da(x);if(!I?.coords.length)return null;Z=Na[Z];const {coords:la,lengths:ra}=I;I=B(M,W);const oa=B(M&&ea,W&&ia);M=A(M,W,ea,ia);if(!ra.length)return M(x.coords,la,0,0,K(ba,la[0]),t(ba,la[1])),Da(x,I,0),x;let qa,Ca=0,va,Ba=0;for(const Aa of ra){if(Aa<Z)continue;let ya=0;va=Ba;ia=W=K(ba,la[Ca]);qa=ea=t(ba,la[Ca+1]);M(x.coords,
la,va,Ca,ia,qa);ya++;Ca+=I;va+=oa;for(let Ha=1;Ha<Aa;Ha++,Ca+=I)if(ia=K(ba,la[Ca]),qa=t(ba,la[Ca+1]),ia!==W||qa!==ea)M(x.coords,la,va,Ca,ia-W,qa-ea),va+=oa,ya++,W=ia,ea=qa;ya>=Z&&(x.lengths.push(ya),Ba=va)}Ia(x.coords,Ba);return x.coords.length?x:null}function ta(x,I,M,W,Z,ba,ea){let ia=W,la=0;for(let oa=ba+M;oa<ea;oa+=M){var ra=I[oa];const qa=I[oa+1],Ca=I[ea],va=I[ea+1];let Ba=I[ba],Aa=I[ba+1],ya=Ca-Ba,Ha=va-Aa;if(0!==ya||0!==Ha){const Pa=((ra-Ba)*ya+(qa-Aa)*Ha)/(ya*ya+Ha*Ha);1<Pa?(Ba=Ca,Aa=va):
0<Pa&&(Ba+=ya*Pa,Aa+=Ha*Pa)}ya=ra-Ba;Ha=qa-Aa;ra=ya*ya+Ha*Ha;ra>ia&&(la=oa,ia=ra)}ia>W&&(la-ba>M&&ta(x,I,M,W,Z,ba,la),Z(x,I,x.length,la,I[la],I[la+1]),ea-la>M&&ta(x,I,M,W,Z,la,ea))}function wa(x,I,M,W,Z){const {coords:ba,lengths:ea}=I;M=B(M,W);if(!ba.length)return x!==I&&Da(x),x;u.assertIsSome(Z);const {originPosition:ia,scale:la,translate:ra}=Z;Z=ha;Z.originPosition=ia;W=Z.scale;W[0]=la[0]??1;W[1]=-(la[1]??1);W[2]=la[2]??1;W[3]=la[3]??1;var oa=Z.translate;oa[0]=ra[0]??0;oa[1]=ra[1]??0;oa[2]=ra[2]??
0;oa[3]=ra[3]??0;if(!ea.length){for(W=0;W<M;++W)x.coords[W]=q(Z,ba[W],W);x!==I&&Da(x,M,0);return x}oa=0;for(let Ca=0;Ca<ea.length;Ca++){const va=ea[Ca];x.lengths[Ca]=va;for(var qa=0;qa<M;++qa)x.coords[oa+qa]=q(Z,ba[oa+qa],qa);qa=x.coords[oa];let Ba=x.coords[oa+1];oa+=M;for(let Aa=1;Aa<va;Aa++,oa+=M){qa+=ba[oa]*W[0];Ba+=ba[oa+1]*W[1];x.coords[oa]=qa;x.coords[oa+1]=Ba;for(let ya=2;ya<M;++ya)x.coords[oa+ya]=q(Z,ba[oa+ya],ya)}}x!==I&&Da(x,ba.length,ea.length);return x}function xa(x,I,M,W){let Z=0,ba=
x[W*I],ea=x[W*(I+1)];for(let ia=1;ia<M;ia++){const la=ba+x[W*(I+ia)],ra=ea+x[W*(I+ia)+1],oa=(la-ba)*(ra+ea);ba=la;ea=ra;Z+=oa}return.5*Z}function Da(x,I=0,M=0){Ia(x.lengths,M);Ia(x.coords,I)}function Ia(x,I=0){x.length!==I&&(x.length=I)}const Ra=()=>w.getLogger("esri.layers.graphics.featureConversionUtils"),Na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Sa=(x,I,M,W,Z,ba)=>{x[M]=Z;x[M+1]=ba},Va=(x,I,M,W,Z,ba)=>{x[M]=Z;x[M+1]=ba;
x[M+2]=I[W+2]},h=(x,I,M,W,Z,ba)=>{x[M]=Z;x[M+1]=ba;x[M+2]=I[W+3]},E=(x,I,M,W,Z,ba)=>{x[M]=Z;x[M+1]=ba;x[M+2]=I[W+2];x[M+3]=I[W+3]},X=[],aa=[],ha={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};c.convertFromFeature=function(x,I,M,W,Z){X[0]=x;[x]=ja(aa,X,I,M,W,Z);Ia(X);Ia(aa);return x};c.convertFromFeatureSet=function(x,I){const M=new d,{hasM:W,hasZ:Z,features:ba,objectIdFieldName:ea,spatialReference:ia,geometryType:la,exceededTransferLimit:ra,transform:oa,fields:qa}=x;qa&&(M.fields=
qa);M.geometryType=la??null;M.objectIdFieldName=ea??I??null;M.spatialReference=ia??null;if(!M.objectIdFieldName)return Ra().error(new g("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),M;ba&&ja(M.features,ba,la,Z,W,M.objectIdFieldName);ra&&(M.exceededTransferLimit=ra);W&&(M.hasM=W);Z&&(M.hasZ=Z);oa&&(M.transform=oa);return M};c.convertFromFeatures=ja;c.convertFromGeometry=function(x,I,M){if(null==x)return null;const W=new r;"hasZ"in x&&null==I&&(I=x.hasZ);"hasM"in x&&
null==M&&(M=x.hasM);if(f.isPoint(x))return L(null!=I?I:null!=x.z,null!=M?M:null!=x.m)(W,x);if(f.isPolygon(x))return Y(W,x,I,M);if(f.isPolyline(x))return G(W,x,B(I,M));if(f.isMultipoint(x))return y(W,x,B(I,M));Ra().error("convertFromGeometry:unknown-geometry",new g(`Unable to parse unknown geometry type '${x}'`))};c.convertFromMultipoint=y;c.convertFromMultipointFeatures=z;c.convertFromNestedArray=ca;c.convertFromPoint=S;c.convertFromPointFeatures=U;c.convertFromPolygon=Y;c.convertFromPolyline=G;c.convertFromPolylineFeatures=
N;c.convertToFeature=function(x,I,M,W){aa[0]=x;sa(X,aa,I,M,W);x=X[0];Ia(X);Ia(aa);return x};c.convertToFeatureSet=function(x){const {objectIdFieldName:I,spatialReference:M,transform:W,fields:Z,hasM:ba,hasZ:ea,features:ia,geometryType:la,exceededTransferLimit:ra,uniqueIdField:oa,queryGeometry:qa,queryGeometryType:Ca}=x;x=sa([],ia,la,ea,ba);const va=na(qa,Ca,!1,!1);x={features:x,fields:Z,geometryType:la,objectIdFieldName:I,spatialReference:M,uniqueIdField:oa,queryGeometry:va};W&&(x.transform=W);ra&&
(x.exceededTransferLimit=ra);ba&&(x.hasM=ba);ea&&(x.hasZ=ea);return x};c.convertToFeatures=sa;c.convertToGeometry=na;c.convertToMultipoint=l;c.convertToMultipointFeatures=P;c.convertToPoint=function(x,I,M){return x?I?M?J(x):p(x):M?Q(x):a(x):null};c.convertToPolygon=R;c.convertToPolyline=v;c.deltaDecodeGeometry=function(x,I){if(null==x)return null;const M=x.clone(),W=x.coords;x=x.lengths;let Z=0;for(let ia=0;ia<x.length;ia++){const la=x[ia];var ba=W[I*Z],ea=W[I*Z+1];for(let ra=1;ra<la;ra++)ba+=W[I*
(Z+ra)],ea+=W[I*(Z+ra)+1],M.coords[I*(Z+ra)]=ba,M.coords[I*(Z+ra)+1]=ea;Z+=la}return M};c.deltaEncodeGeometry=function(x,I){const M=x.clone(),W=x.coords;x=x.lengths;let Z=0;for(let ea=0;ea<x.length;ea++){const ia=x[ea];let la=W[I*Z];var ba=W[I*Z+1];for(let ra=1;ra<ia;ra++){const oa=W[I*(Z+ra)],qa=W[I*(Z+ra)+1];ba=qa-ba;M.coords[I*(Z+ra)]=oa-la;M.coords[I*(Z+ra)+1]=ba;la=oa;ba=qa}Z+=ia}return M};c.generalizeOptimizedGeometry=function(x,I,M,W,Z,ba,ea=M,ia=W){Da(x);if(!I?.coords.length)return null;Z=
Na[Z];const {coords:la,lengths:ra}=I;I=B(M,W);const oa=B(M&&ea,W&&ia);M=A(M,W,ea,ia);if(!ra.length)return M(x.coords,la,0,0,la[0],la[1]),Da(x,I,0),x;W=0;ba*=ba;for(const qa of ra){if(qa<Z){W+=qa*I;continue}ea=x.coords.length/oa;ia=W;const Ca=W+(qa-1)*I;M(x.coords,la,x.coords.length,ia,la[ia],la[ia+1]);ta(x.coords,la,I,ba,M,ia,Ca);M(x.coords,la,x.coords.length,Ca,la[Ca],la[Ca+1]);ia=x.coords.length/oa-ea;ia>=Z?x.lengths.push(ia):Ia(x.coords,ea*oa);W+=qa*I}return x.coords.length?x:null};c.getBoundsOptimizedGeometry=
function(x,I,M,W){if(!I?.coords?.length)return null;M=B(M,W);let Z=W=Number.POSITIVE_INFINITY,ba=Number.NEGATIVE_INFINITY,ea=Number.NEGATIVE_INFINITY;if(I&&I.coords){I=I.coords;for(let ia=0;ia<I.length;ia+=M){const la=I[ia],ra=I[ia+1];W=Math.min(W,la);ba=Math.max(ba,la);Z=Math.min(Z,ra);ea=Math.max(ea,ra)}}H.is(x)?H.fromRectValues(x,W,Z,ba,ea):C.fromValues(W,Z,ba,ea,x);return x};c.getQuantizedArea=function(x,I){const {coords:M,lengths:W}=x;let Z=x=0;for(let ba=0;ba<W.length;ba++){const ea=W[ba];Z+=
xa(M,x,ea,I);x+=ea}return Math.abs(Z)};c.getQuantizedBoundsOptimizedGeometry=function(x,I,M,W){M=B(M,W);const {lengths:Z,coords:ba}=I;W=I=Number.POSITIVE_INFINITY;let ea=Number.NEGATIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,la=0;for(const ra of Z){let oa=ba[la],qa=ba[la+1];I=Math.min(oa,I);W=Math.min(qa,W);ea=Math.max(oa,ea);ia=Math.max(qa,ia);la+=M;for(let Ca=1;Ca<ra;Ca++,la+=M){const va=ba[la],Ba=ba[la+1];oa+=va;qa+=Ba;0>va&&(I=Math.min(I,oa));0<va&&(ea=Math.max(ea,oa));0>Ba?W=Math.min(W,qa):0<Ba&&
(ia=Math.max(ia,qa))}}x[0]=I;x[1]=W;x[2]=ea;x[3]=ia;return x};c.getSignedQuantizedRingArea=xa;c.quantizeOptimizedFeatureSet=function(x,I){const {geometryType:M,features:W,hasM:Z,hasZ:ba}=I;if(!x)return I;for(let ea=0;ea<W.length;ea++){const ia=W[ea],la=ia.weakClone();la.geometry=new r;ua(la.geometry,ia.geometry,Z,ba,M,x);ia.centroid&&(la.centroid=new r,ua(la.centroid,ia.centroid,Z,ba,"esriGeometryPoint",x));W[ea]=la}I.transform=x;return I};c.quantizeOptimizedGeometry=ua;c.quantizeX=K;c.quantizeY=
t;c.removeCollinearVertices=function(x,I,M,W,Z){if(!I?.coords?.length)return null;M=Na[M];const {coords:ba,lengths:ea}=I;I=A(W,Z,W,Z);W=B(W,Z);let ia=Z=0,la=0,ra=0;for(const Ca of ea){ia=ra;I(x.coords,ba,ia,Z,ba[Z],ba[Z+1]);Z+=W;var oa=ba[Z];let va=ba[Z+1],Ba=oa,Aa=va;var qa=va/oa;ia+=W;I(x.coords,ba,ia,Z,Ba,Aa);Z+=W;for(let ya=2;ya<Ca;ya++){oa=ba[Z];va=ba[Z+1];const Ha=va/oa,Pa=qa===Ha||!isFinite(qa)&&!isFinite(Ha);qa=Pa&&isFinite(Ha)?0<=qa&&0<=Ha||0>=qa&&0>=Ha:0<=Aa&&0<=va||0>=Aa&&0>=va;Pa&&qa?
(Ba+=oa,Aa+=va):(Ba=oa,Aa=va,ia+=W);I(x.coords,ba,ia,Z,Ba,Aa);Z+=W;qa=Ha}ia+=W;oa=(ia-ra)/W;oa>=M&&(x.lengths[la]=oa,ra=ia,la++)}x.coords.length>ra&&(x.coords.length=ra);x.lengths.length>la&&(x.lengths.length=la);return x.coords.length&&x.lengths.length?x:null};c.removeZMValues=function(x,I,M,W,Z,ba){Da(x);x.lengths.push(...I.lengths);if(M===Z&&W===ba)for(var ea=0;ea<I.coords.length;ea++)x.coords.push(I.coords[ea]);else for(ea=B(M,W),M=A(M,W,Z,ba),I=I.coords,W=0;W<I.length;W+=ea)M(x.coords,I,x.coords.length,
W,I[W],I[W+1]);return x};c.unquantizeOptimizedFeatureSet=function(x){const {transform:I,features:M,hasM:W,hasZ:Z}=x;if(!I)return x;for(const ba of M)null!=ba.geometry&&wa(ba.geometry,ba.geometry,W,Z,I),null!=ba.centroid&&wa(ba.centroid,ba.centroid,W,Z,I);x.transform=null;return x};c.unquantizeOptimizedGeometry=wa;c.unquantizeValue=q;c.unquantizeX=function(x,I){return q(x,I,0)};c.unquantizeY=function(x,I){return q(x,-I,1)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports",
"../Extent","./aaBoundingRect"],function(c,g,w){function u(q=K){return[q[0],q[1],q[2],q[3],q[4],q[5]]}function H(q,a,m,p,F,Q,e=u()){e[0]=q;e[1]=a;e[2]=m;e[3]=p;e[4]=F;e[5]=Q;return e}function C(q){return q[0]>=q[3]?0:q[3]-q[0]}function f(q){return q[1]>=q[4]?0:q[4]-q[1]}function n(q){return q[2]>=q[5]?0:q[5]-q[2]}function d(q,a){return Math.max(a[0],q[0])<=Math.min(a[3],q[3])&&Math.max(a[1],q[1])<=Math.min(a[4],q[4])&&Math.max(a[2],q[2])<=Math.min(a[5],q[5])}function r(q,a){q[0]=a[0];q[1]=a[1];q[2]=
a[2];q[3]=a[3];q[4]=a[4];q[5]=a[5];return q}function B(q){return 6===q.length}const A=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],K=[0,0,0,0,0,0],t=u();c.allFinite=function(q){for(let a=0;6>a;a++)if(!isFinite(q[a]))return!1;return!0};c.center=function(q,a=[0,0,0]){a[0]=q[0]+C(q)/2;a[1]=q[1]+f(q)/2;a[2]=q[2]+n(q)/2;return a};c.contains=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&a[2]>=q[2]&&a[3]<=q[3]&&a[4]<=q[4]&&a[5]<=q[5]};c.containsPoint=function(q,a){return a[0]>=q[0]&&a[1]>=q[1]&&
a[2]>=q[2]&&a[0]<=q[3]&&a[1]<=q[4]&&a[2]<=q[5]};c.containsPointWithMargin=function(q,a,m){return a[0]>=q[0]-m&&a[1]>=q[1]-m&&a[2]>=q[2]-m&&a[0]<=q[3]+m&&a[1]<=q[4]+m&&a[2]<=q[5]+m};c.create=u;c.depth=f;c.diameter=function(q){const a=C(q),m=n(q);q=f(q);return Math.sqrt(a*a+m*m+q*q)};c.empty=function(q){return q?r(q,A):u(A)};c.equals=function(q,a,m){if(null==q||null==a)return q===a;if(!B(q)||!B(a))return!1;if(m)for(let p=0;p<q.length;p++){if(!m(q[p],a[p]))return!1}else for(m=0;m<q.length;m++)if(q[m]!==
a[m])return!1;return!0};c.expandWithAABB=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[3]);q[4]=Math.max(q[4],a[4]);q[5]=Math.max(q[5],a[5])};c.expandWithBuffer=function(q,a,m=0,p=a.length/3){let F=q[0],Q=q[1],e=q[2],J=q[3],T=q[4],L=q[5];for(let U=0;U<p;U++)F=Math.min(F,a[m+3*U]),Q=Math.min(Q,a[m+3*U+1]),e=Math.min(e,a[m+3*U+2]),J=Math.max(J,a[m+3*U]),T=Math.max(T,a[m+3*U+1]),L=Math.max(L,a[m+3*U+2]);q[0]=F;q[1]=Q;q[2]=e;q[3]=J;q[4]=
T;q[5]=L};c.expandWithNestedArray=function(q,a,m){const p=a.length;let F=q[0],Q=q[1],e=q[2],J=q[3],T=q[4],L=q[5];if(m)for(m=0;m<p;m++){var U=a[m];F=Math.min(F,U[0]);Q=Math.min(Q,U[1]);e=Math.min(e,U[2]);J=Math.max(J,U[0]);T=Math.max(T,U[1]);L=Math.max(L,U[2])}else for(m=0;m<p;m++)U=a[m],F=Math.min(F,U[0]),Q=Math.min(Q,U[1]),J=Math.max(J,U[0]),T=Math.max(T,U[1]);q[0]=F;q[1]=Q;q[2]=e;q[3]=J;q[4]=T;q[5]=L};c.expandWithOffset=function(q,a,m,p){q[0]=Math.min(q[0],q[0]+a);q[3]=Math.max(q[3],q[3]+a);q[1]=
Math.min(q[1],q[1]+m);q[4]=Math.max(q[4],q[4]+m);q[2]=Math.min(q[2],q[2]+p);q[5]=Math.max(q[5],q[5]+p)};c.expandWithRect=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[3]=Math.max(q[3],a[2]);q[4]=Math.max(q[4],a[3])};c.expandWithVec3=function(q,a){q[0]=Math.min(q[0],a[0]);q[1]=Math.min(q[1],a[1]);q[2]=Math.min(q[2],a[2]);q[3]=Math.max(q[3],a[0]);q[4]=Math.max(q[4],a[1]);q[5]=Math.max(q[5],a[2])};c.fromExtent=function(q,a=u()){a[0]=q.xmin;a[1]=q.ymin;a[2]=q.hasZ?q.zmin:-Infinity;
a[3]=q.xmax;a[4]=q.ymax;a[5]=q.hasZ?q.zmax:Infinity;return a};c.fromMinMax=function(q,a,m=u()){m[0]=q[0];m[1]=q[1];m[2]=q[2];m[3]=a[0];m[4]=a[1];m[5]=a[2];return m};c.fromRect=function(q,a){q[0]=a[0];q[1]=a[1];q[2]=Number.NEGATIVE_INFINITY;q[3]=a[2];q[4]=a[3];q[5]=Number.POSITIVE_INFINITY;return q};c.fromRectValues=function(q,a,m,p,F){q[0]=a;q[1]=m;q[2]=Number.NEGATIVE_INFINITY;q[3]=p;q[4]=F;q[5]=Number.POSITIVE_INFINITY;return q};c.fromValues=H;c.getMax=function(q,a){a[0]=q[3];a[1]=q[4];a[2]=q[5];
return a};c.getMin=function(q,a){a[0]=q[0];a[1]=q[1];a[2]=q[2];return a};c.height=n;c.intersects=d;c.intersectsClippingArea=function(q,a){return null==a?!0:d(q,a)};c.is=B;c.isPoint=function(q){return 0===C(q)&&0===f(q)&&0===n(q)};c.maximumDimension=function(q){return Math.max(C(q),n(q),f(q))};c.negativeInfinity=A;c.offset=function(q,a,m,p,F=q){F[0]=q[0]+a;F[1]=q[1]+m;F[2]=q[2]+p;F[3]=q[3]+a;F[4]=q[4]+m;F[5]=q[5]+p;return F};c.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];
c.scale=function(q,a,m=q){const p=q[0]+C(q)/2,F=q[1]+f(q)/2,Q=q[2]+n(q)/2;m[0]=p+(q[0]-p)*a;m[1]=F+(q[1]-F)*a;m[2]=Q+(q[2]-Q)*a;m[3]=p+(q[3]-p)*a;m[4]=F+(q[4]-F)*a;m[5]=Q+(q[5]-Q)*a;return m};c.set=r;c.setMax=function(q,a,m=q){m[3]=a[0];m[4]=a[1];m[5]=a[2];m!==q&&(m[0]=q[0],m[1]=q[1],m[2]=q[2]);return q};c.setMin=function(q,a,m=q){m[0]=a[0];m[1]=a[1];m[2]=a[2];m!==q&&(m[3]=q[3],m[4]=q[4],m[5]=q[5]);return m};c.size=function(q,a=[0,0,0]){a[0]=C(q);a[1]=f(q);a[2]=n(q);return a};c.toExtent=function(q,
a){return isFinite(q[2])||isFinite(q[5])?new g({xmin:q[0],xmax:q[3],ymin:q[1],ymax:q[4],zmin:q[2],zmax:q[5],spatialReference:a}):new g({xmin:q[0],xmax:q[3],ymin:q[1],ymax:q[4],spatialReference:a})};c.toRect=function(q,a){a||=w.create();a[0]=q[0];a[1]=q[1];a[2]=q[3];a[3]=q[4];return a};c.width=C;c.wrap=function(q,a,m,p,F,Q){return H(q,a,m,p,F,Q,t)};c.zero=K;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports"],function(c){class g{constructor(u=
null,H={},C,f){this.geometry=u;this.attributes=H;this.centroid=C;this.objectId=f;this.geohashY=this.geohashX=this.displayId=0}weakClone(){const u=new g(this.geometry,this.attributes,this.centroid,this.objectId);u.displayId=this.displayId;u.geohashX=this.geohashX;u.geohashY=this.geohashY;return u}clone(){var u=this.geometry?.clone();u=new g(u,{...this.attributes},this.centroid?.clone(),this.objectId);u.displayId=this.displayId;u.geohashX=this.geohashX;u.geohashY=this.geohashY;return u}}class w extends g{}
c.OptimizedFeature=g;c.OptimizedFeatureWithGeometry=w;c.hasGeometry=function(u){return!!u.geometry?.coords?.length};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class c{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=
!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const g=new c;g.objectIdFieldName=this.objectIdFieldName;g.globalIdFieldName=this.globalIdFieldName;g.geohashFieldName=this.geohashFieldName;g.geometryProperties=this.geometryProperties;g.geometryType=this.geometryType;g.spatialReference=this.spatialReference;g.hasZ=this.hasZ;g.hasM=this.hasM;g.features=this.features;g.fields=this.fields;g.transform=this.transform;g.exceededTransferLimit=this.exceededTransferLimit;g.uniqueIdField=
this.uniqueIdField;g.queryGeometry=this.queryGeometry;g.queryGeometryType=this.queryGeometryType;return g}}return c})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class c{constructor(g=[],w=[],u=!1){this.lengths=g??[];this.coords=w??[];this.hasIndeterminateRingOrder=u}static fromRect(g){const [w,u,H,C]=g;g=H-w;const f=C-u;return new c([5],[w,u,g,0,0,f,-g,0,0,-f])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((g,
w)=>g+w)}forEachVertex(g){let w=0;this.lengths.length||g(this.coords[0],this.coords[1]);for(let u=0;u<this.lengths.length;u++){const H=this.lengths[u];for(let C=0;C<H;C++)g(this.coords[2*(C+w)],this.coords[2*(C+w)+1]);w+=H}}deltaDecode(){const g=this.clone(),{coords:w,lengths:u}=g;let H=0;for(const C of u){for(let f=1;f<C;f++)w[2*(H+f)]+=w[2*(H+f)-2],w[2*(H+f)+1]+=w[2*(H+f)-1];H+=C}return g}clone(g){if(0===this.lengths.length)return new c([],[this.coords[0],this.coords[1]]);var w=2*(0===this.lengths.length?
1:this.lengths.reduce((u,H)=>u+H));w=this.coords.slice(0,w);return g?(g.set(w),new c(this.lengths,g,this.hasIndeterminateRingOrder)):new c(Array.from(this.lengths),Array.from(w),this.hasIndeterminateRingOrder)}}return c})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(c){c.findLastObjectIdFromFeatures=function(g,w){let u=0;for(const H of w)w=H.attributes?.[g],"number"===typeof w&&isFinite(w)&&(u=Math.max(u,w));return u};c.initialObjectId=1;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),function(c,g,w,u,H,C,f,n,d,r){const B=H.create();class A{constructor(K){this.geometryInfo=K;this._boundsStore=new n.BoundsStore;this._featuresById=
new Map;this._markedIds=new Set;this.events=new w;this.featureAdapter=r.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let K=0;this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(K+=t.geometry.coords.length)});return{featureCount:this._featuresById.size,
vertexCount:K/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(K){if(null==this.fullBounds)return null;const [t,q,a,m]=this.fullBounds;return{xmin:t,ymin:q,xmax:a,ymax:m,spatialReference:d.cleanFromGeometryEngine(K)}}add(K){this._add(K);this._emitChanged()}addMany(K){for(const t of K)this._add(t);this._emitChanged()}upsertMany(K){K=K.map(t=>this._upsert(t));this._emitChanged();return K.filter(c.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(K){K=
this._featuresById.get(K);if(!K)return null;this._remove(K);this._emitChanged();return K}removeManyById(K){this._boundsStore.invalidateIndex();for(const t of K)(K=this._featuresById.get(t))&&this._remove(K);this._emitChanged()}forEachBounds(K,t){for(const q of K)(K=this._boundsStore.get(q.objectId))&&t(H.fromRect(B,K))}getFeature(K){return this._featuresById.get(K)}has(K){return this._featuresById.has(K)}forEach(K){this._featuresById.forEach(t=>K(t))}forEachInBounds(K,t){this._boundsStore.forEachInBounds(K,
q=>{t(this._featuresById.get(q))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let K=!1;this._featuresById.forEach((t,q)=>{this._markedIds.has(q)||(K=!0,this._remove(t))});this._markedIds.clear();K&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(K){if(K){var t=K.objectId;if(null==t)u.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature","feature id is missing",{feature:K}));else{var q=
this._featuresById.get(t);this._markedIds.add(t);if(q){K.displayId=q.displayId;var a=this._boundsStore.get(t);this._boundsStore.delete(t)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(K);K.geometry?.coords?.length?(a=f.getBoundsOptimizedGeometry(null!=a?a:C.create(),K.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=a&&this._boundsStore.set(t,a)):this._boundsStore.set(t,null);this._featuresById.set(t,K)}}}_upsert(K){const t=K?.objectId;if(null==t)return u.getLogger("esri.layers.graphics.data.FeatureStore").error(new g("featurestore:invalid-feature",
"feature id is missing",{feature:K})),null;const q=this._featuresById.get(t);if(!q)return this._add(K),K;this._markedIds.add(t);const {geometry:a,attributes:m}=K;for(const p in m)q.attributes[p]=m[p];a&&(q.geometry=a,this._boundsStore.set(t,f.getBoundsOptimizedGeometry(C.create(),a,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return q}_remove(K){if(null!=this.onFeatureRemove)this.onFeatureRemove(K);const t=K.objectId;this._markedIds.delete(t);this._boundsStore.delete(t);this._featuresById.delete(t);
return K}}return A})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush","../../../geometry/support/aaBoundingRect"],function(c,g,w,u){function H(n,d,r){C.minX=d[0];C.minY=d[1];C.maxX=d[2];C.maxY=d[3];n.search(C,r)}const C={minX:0,minY:0,maxX:0,maxY:0};class f{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new w.PooledRBush(9,g("esri-csp-restrictions")?
n=>({minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const n=Array(this._idByBounds.size);let d=0;this._idByBounds.forEach((r,B)=>{n[d++]=B});this._indexInvalid=!1;this._index.clear();this._index.load(n)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(n=>this._idByBounds.has(n))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const n=u.empty();for(const d of this._boundsById.values())d&&
(n[0]=Math.min(d[0],n[0]),n[1]=Math.min(d[1],n[1]),n[2]=Math.max(d[2],n[2]),n[3]=Math.max(d[3],n[3]));return n}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(n){const d=this._boundsById.get(n);this._boundsById.delete(n);d&&(this._idByBounds.delete(d),this._indexInvalid||this._index.remove(d))}forEachInBounds(n,d){this._loadIndex();H(this._index,n,r=>d(this._idByBounds.get(r)))}get(n){return this._boundsById.get(n)}has(n){return this._boundsById.has(n)}invalidateIndex(){this._indexInvalid||
(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(n,d){if(!this._indexInvalid){const r=this._boundsById.get(n);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(n,d);d&&(this._idByBounds.set(d,n),this._indexInvalid||(this._boundsToLoad.push(d),5E4<this._boundsToLoad.length&&this._loadIndex()))}}c.BoundsStore=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../PooledArray",
"../../../chunks/quickselect"],function(c,g,w,u){function H(L,U){C(L,0,L.children.length,U,L)}function C(L,U,S,P,l){l||=new J([]);l.minX=Infinity;l.minY=Infinity;l.maxX=-Infinity;l.maxY=-Infinity;for(let z=U,y;z<S;z++)y=L.children[z],f(l,L.leaf?P(y):y);return l}function f(L,U){L.minX=Math.min(L.minX,U.minX);L.minY=Math.min(L.minY,U.minY);L.maxX=Math.max(L.maxX,U.maxX);L.maxY=Math.max(L.maxY,U.maxY)}function n(L,U){return L.minX-U.minX}function d(L,U){return L.minY-U.minY}function r(L){return(L.maxX-
L.minX)*(L.maxY-L.minY)}function B(L){return L.maxX-L.minX+(L.maxY-L.minY)}function A(L,U){return L.minX<=U.minX&&L.minY<=U.minY&&U.maxX<=L.maxX&&U.maxY<=L.maxY}function K(L,U){return U.minX<=L.maxX&&U.minY<=L.maxY&&U.maxX>=L.minX&&U.maxY>=L.minY}function t(L,U,S,P,l){for(U=[U,S];U.length;){S=U.pop();const z=U.pop();if(S-z<=P)continue;const y=z+Math.ceil((S-z)/P/2)*P;u.quickselect(L,y,z,S,l);U.push(z,y,y,S)}}class q{constructor(L=9,U){this._compareMinX=n;this._compareMinY=d;this._toBBox=S=>S;this._maxEntries=
Math.max(4,L||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));U&&("function"===typeof U?this._toBBox=U:this._initFormat(U));this.clear()}destroy(){this.clear();a.prune();m.prune();p.prune();F.prune()}all(L){this._all(this._data,L)}search(L,U){let S=this._data;const P=this._toBBox;if(K(L,S))for(a.clear();S;){for(let l=0,z=S.children.length;l<z;l++){const y=S.children[l],v=S.leaf?P(y):y;K(L,v)&&(S.leaf?U(y):A(L,v)?this._all(y,U):a.push(y))}S=a.pop()}}collides(L){let U=this._data;const S=
this._toBBox;if(!K(L,U))return!1;for(a.clear();U;){for(let P=0,l=U.children.length;P<l;P++){const z=U.children[P],y=U.leaf?S(z):z;if(K(L,y)){if(U.leaf||A(L,y))return!0;a.push(z)}}U=a.pop()}return!1}load(L){if(!L.length)return this;if(L.length<this._minEntries){for(let U=0,S=L.length;U<S;U++)this.insert(L[U]);return this}L=this._build(L.slice(0,L.length),0,L.length-1,0);if(this._data.children.length)if(this._data.height===L.height)this._splitRoot(this._data,L);else{if(this._data.height<L.height){const U=
this._data;this._data=L;L=U}this._insert(L,this._data.height-L.height-1,!0)}else this._data=L;return this}insert(L){L&&this._insert(L,this._data.height-1);return this}clear(){this._data=new J([]);return this}remove(L){if(!L)return this;let U=this._data,S=null,P=0,l=!1,z;const y=this._toBBox(L);p.clear();for(F.clear();U||0<p.length;){U||(U=p.pop(),S=p.data[p.length-1],P=F.pop()??0,l=!0);if(U.leaf&&(z=g.indexOf(U.children,L,U.children.length,U.indexHint),-1!==z)){U.children.splice(z,1);p.push(U);this._condense(p);
break}l||U.leaf||!A(U,y)?S?(P++,U=S.children[P],l=!1):U=null:(p.push(U),F.push(P),P=0,S=U,U=U.children[0])}return this}toJSON(){return this._data}fromJSON(L){this._data=L;return this}_all(L,U){for(m.clear();L;){if(!0===L.leaf)for(const S of L.children)U(S);else m.pushArray(L.children);L=m.pop()??null}}_build(L,U,S,P){var l=S-U+1,z=this._maxEntries;if(l<=z)return L=new J(L.slice(U,S+1)),H(L,this._toBBox),L;P||(P=Math.ceil(Math.log(l)/Math.log(z)),z=Math.ceil(l/z**(P-1)));const y=new T([]);y.height=
P;l=Math.ceil(l/z);z=l*Math.ceil(Math.sqrt(z));for(t(L,U,S,z,this._compareMinX);U<=S;U+=z){const v=Math.min(U+z-1,S);t(L,U,v,l,this._compareMinY);for(let N=U;N<=v;N+=l)y.children.push(this._build(L,N,Math.min(N+l-1,v),P-1))}H(y,this._toBBox);return y}_chooseSubtree(L,U,S,P){for(;;){P.push(U);if(!0===U.leaf||P.length-1===S)break;let l=Infinity,z=Infinity,y=void 0;for(let v=0,N=U.children.length;v<N;v++){const G=U.children[v],R=r(G),Y=(Math.max(G.maxX,L.maxX)-Math.min(G.minX,L.minX))*(Math.max(G.maxY,
L.maxY)-Math.min(G.minY,L.minY))-R;Y<z?(z=Y,l=R<l?R:l,y=G):Y===z&&R<l&&(l=R,y=G)}U=y||U.children[0]}return U}_insert(L,U,S){var P=this._toBBox;S=S?L:P(L);p.clear();P=this._chooseSubtree(S,this._data,U,p);P.children.push(L);for(f(P,S);0<=U;)if(p.data[U].children.length>this._maxEntries)this._split(p,U),U--;else break;this._adjustParentBBoxes(S,p,U)}_split(L,U){const S=L.data[U];var P=S.children.length;const l=this._minEntries;this._chooseSplitAxis(S,l,P);(P=this._chooseSplitIndex(S,l,P))?(P=S.children.splice(P,
S.children.length-P),P=S.leaf?new J(P):new T(P),P.height=S.height,H(S,this._toBBox),H(P,this._toBBox),U?L.data[U-1].children.push(P):this._splitRoot(S,P)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}_splitRoot(L,U){this._data=new T([L,U]);this._data.height=L.height+1;H(this._data,this._toBBox)}_chooseSplitIndex(L,U,S){let P,l,z=void 0;P=l=Infinity;for(let v=U;v<=S-U;v++){var y=C(L,0,v,this._toBBox);const N=C(L,v,S,this._toBBox),G=Math.max(0,Math.min(y.maxX,
N.maxX)-Math.max(y.minX,N.minX))*Math.max(0,Math.min(y.maxY,N.maxY)-Math.max(y.minY,N.minY));y=r(y)+r(N);G<P?(P=G,z=v,l=y<l?y:l):G===P&&y<l&&(l=y,z=v)}return z}_chooseSplitAxis(L,U,S){const P=L.leaf?this._compareMinX:n,l=L.leaf?this._compareMinY:d,z=this._allDistMargin(L,U,S,P);U=this._allDistMargin(L,U,S,l);z<U&&L.children.sort(P)}_allDistMargin(L,U,S,P){L.children.sort(P);P=this._toBBox;var l=C(L,0,U,P);const z=C(L,S-U,S,P);let y=B(l)+B(z);for(let v=U;v<S-U;v++){const N=L.children[v];f(l,L.leaf?
P(N):N);y+=B(l)}for(S=S-U-1;S>=U;S--)l=L.children[S],f(z,L.leaf?P(l):l),y+=B(z);return y}_adjustParentBBoxes(L,U,S){for(;0<=S;S--)f(U.data[S],L)}_condense(L){for(let U=L.length-1;0<=U;U--){const S=L.data[U];if(0===S.children.length)if(0<U){const P=L.data[U-1],l=P.children;l.splice(g.indexOf(l,S,l.length,P.indexHint),1)}else this.clear();else H(S,this._toBBox)}}_initFormat(L){const U=["return a"," - b",";"];this._compareMinX=new Function("a","b",U.join(L[0]));this._compareMinY=new Function("a","b",
U.join(L[1]));this._toBBox=new Function("a","return {minX: a"+L[0]+", minY: a"+L[1]+", maxX: a"+L[2]+", maxY: a"+L[3]+"};")}}const a=new w,m=new w,p=new w,F=new w({deallocator:void 0});class Q{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class e extends Q{constructor(){super(...arguments);this.height=1;this.indexHint=new g.PositionHint}}class J extends e{constructor(L){super();this.children=L;this.leaf=!0}}class T extends e{constructor(L){super();this.children=L;this.leaf=
!1}}c.BBox=Q;c.PooledRBush=q;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(c,g){var w={exports:{}};(function(u){(function(H){H=H();void 0!==H&&(u.exports=H)})(function(){function H(n,d,r,B,A){for(;B>r;){if(600<B-r){var K=B-r+1,t=d-r+1,q=Math.log(K),a=.5*Math.exp(2*q/3);q=.5*Math.sqrt(q*a*(K-a)/K)*(0>t-K/2?-1:1);H(n,d,Math.max(r,Math.floor(d-t*a/K+q)),Math.min(B,Math.floor(d+(K-t)*a/K+q)),A)}K=n[d];
t=r;a=B;C(n,r,d);for(0<A(n[B],K)&&C(n,r,B);t<a;){C(n,t,a);t++;for(a--;0>A(n[t],K);)t++;for(;0<A(n[a],K);)a--}0===A(n[r],K)?C(n,r,a):(a++,C(n,a,B));a<=d&&(r=a+1);d<=a&&(B=a-1)}}function C(n,d,r){var B=n[d];n[d]=n[r];n[r]=B}function f(n,d){return n<d?-1:n>d?1:0}return function(n,d,r,B,A){H(n,d,r||0,B||n.length-1,A||f)}})})(w);g=g.getDefaultExportFromCjs(w.exports);c.quickselect=g})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],
function(c,g,w){const u=new w,H=new w,C=new w,f={esriGeometryPoint:g.convertToPoint,esriGeometryPolyline:g.convertToPolyline,esriGeometryPolygon:g.convertToPolygon,esriGeometryMultipoint:g.convertToMultipoint},n=(d,r)=>"_geVersion"!==d?r:void 0;c.cleanFromGeometryEngine=function(d){return d&&"_geVersion"in d?JSON.parse(JSON.stringify(d,n)):d};c.getGeometry=function(d,r,B,A,K,t,q=r,a=B){const m=r&&q,p=B&&a;A=null!=A?"coords"in A?A:A.geometry:null;if(null==A)return null;if(K)return r=g.generalizeOptimizedGeometry(H,
A,r,B,d,K,q,a),t&&(r=g.quantizeOptimizedGeometry(C,r,m,p,d,t)),f[d]?.(r,m,p)??null;if(t)return t=g.quantizeOptimizedGeometry(C,A,r,B,d,t,q,a),f[d]?.(t,m,p)??null;g.removeZMValues(u,A,r,B,q,a);return f[d]?.(u,m,p)??null};c.transformCentroid=function(d,r,B,A=d.hasZ,K=d.hasM){if(null==r)return null;const t=d.hasZ&&A,q=d.hasM&&K;return B?(d=g.quantizeOptimizedGeometry(C,r,d.hasZ,d.hasM,"esriGeometryPoint",B,A,K),g.convertToPoint(d,t,q)):g.convertToPoint(r,t,q)};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../centroid","../OptimizedFeature","../OptimizedGeometry"],function(c,g,w,u){c.optimizedFeatureQueryEngineAdapter={getObjectId(H){return H.objectId},getAttributes(H){return H.attributes},getAttribute(H,C){return H.attributes[C]},cloneWithGeometry(H,C){return new w.OptimizedFeature(C,H.attributes,null,H.objectId)},getGeometry(H){return H.geometry},getCentroid(H,C){null==H.centroid&&(H.centroid=
g.getCentroidOptimizedGeometry(new u,H.geometry,C.hasZ,C.hasM));return H.centroid}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(c){function g(u,H,C,f,n,d){d=n?d?4:3:d?3:2;let r=C,B=C+d,A=0,K=0,t=C=0,q=0;for(let a=0,m=f-1;a<m;a++,r+=d,B+=d){f=H[r];const p=H[r+1],F=H[r+2],Q=H[B],e=H[B+1],J=H[B+2];let T=f*e-Q*p;t+=T;A+=(f+Q)*T;K+=(p+e)*T;n&&(T=f*J-Q*F,C+=(F+J)*T,q+=T);f<u[0]&&(u[0]=f);f>u[1]&&(u[1]=f);p<u[2]&&
(u[2]=p);p>u[3]&&(u[3]=p);n&&(F<u[4]&&(u[4]=F),F>u[5]&&(u[5]=F))}0<t&&(t*=-1);0<q&&(q*=-1);if(!t)return null;u=[A,K,.5*t];n&&(u[3]=C,u[4]=.5*q);return u}function w(u,H,C,f,n){n=f?n?4:3:n?3:2;let d=H,r=H+n,B=0,A=0,K=0,t=0;for(let p=0,F=C-1;p<F;p++,d+=n,r+=n){var q=u[d];const Q=u[d+1],e=u[d+2],J=u[r],T=u[r+1],L=u[r+2];if(f){var a=J-q;var m=T-Q;const U=L-e;a=Math.sqrt(a*a+m*m+U*U)}else a=J-q,m=T-Q,a=Math.sqrt(a*a+m*m);a&&(B+=a,f?(q=[q+.5*(J-q),Q+.5*(T-Q),e+.5*(L-e)],A+=a*q[0],K+=a*q[1],t+=a*q[2]):(q=
[q+.5*(J-q),Q+.5*(T-Q)],A+=a*q[0],K+=a*q[1]))}return 0<B?f?[A/B,K/B,t/B]:[A/B,K/B]:0<C?f?[u[H],u[H+1],u[H+2]]:[u[H],u[H+1]]:null}c.getCentroidOptimizedGeometry=function(u,H,C,f){if(!H?.lengths.length)return null;u.lengths.length&&(u.lengths.length=0);u.coords.length&&(u.coords.length=0);const n=u.coords,d=[],r=C?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,
Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:B,coords:A}=H;var K=C?f?4:3:f?3:2;let t=0;for(const q of B){const a=g(r,A,t,q,C,f);a&&d.push(a);t+=q*K}d.sort((q,a)=>{let m=q[2]-a[2];0===m&&C&&(m=q[4]-a[4]);return m});d.length&&(K=6*d[0][2],n[0]=d[0][0]/K,n[1]=d[0][1]/K,C&&(K=6*d[0][4],n[2]=0!==K?d[0][3]/K:0),n[0]<r[0]||n[0]>r[1]||n[1]<r[2]||n[1]>r[3]||C&&(n[2]<r[4]||n[2]>r[5]))&&(n.length=0);if(!n.length)if(H=H.lengths[0]?w(A,0,B[0],C,f):null)n[0]=H[0],n[1]=H[1],C&&2<H.length&&(n[2]=H[2]);
else return null;return u};c.lineCentroid=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),function(c,g,w,u,H,C,f){function n(a,m){if(!m)return null;if("x"in m){var p={x:0,y:0};[p.x,p.y]=
a(m.x,m.y,B);null!=m.z&&(p.z=m.z);null!=m.m&&(p.m=m.m);return p}return"xmin"in m?(p={xmin:0,ymin:0,xmax:0,ymax:0},[p.xmin,p.ymin]=a(m.xmin,m.ymin,B),[p.xmax,p.ymax]=a(m.xmax,m.ymax,B),m.hasZ&&(p.zmin=m.zmin,p.zmax=m.zmax,p.hasZ=!0),m.hasM&&(p.mmin=m.mmin,p.mmax=m.mmax,p.hasM=!0),p):"rings"in m?{rings:d(m.rings,a),hasM:m.hasM,hasZ:m.hasZ}:"paths"in m?{paths:d(m.paths,a),hasM:m.hasM,hasZ:m.hasZ}:"points"in m?{points:r(m.points,a),hasM:m.hasM,hasZ:m.hasZ}:null}function d(a,m){const p=[];for(const F of a)p.push(r(F,
m));return p}function r(a,m){const p=[];for(const F of a)a=m(F[0],F[1],[0,0]),p.push(a),2<F.length&&a.push(F[2]),3<F.length&&a.push(F[3]);return p}const B=[0,0],A=n.bind(null,f.lngLatToXY),K=n.bind(null,f.xyToLngLat);class t{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(a,m,p,F){if(!a?.length||!m||!p||C.equals(m,p))return a;a={geometries:a,inSpatialReference:m,outSpatialReference:p,geographicTransformation:F,resolve:w.createResolver()};this._jobs.push(a);
this._timer??(this._timer=setTimeout(this._process,10));return a.resolve.promise}_process(){this._timer=null;const a=this._jobs.shift();if(a){var {geometries:m,inSpatialReference:p,outSpatialReference:F,resolve:Q,geographicTransformation:e}=a;f.canProject(p,F)?C.isWebMercator(F)?Q(m.map(A)):Q(m.map(K)):Q(u.projectMany(H.jsonAdapter,m,p,F,e,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}}}const q=new t;c.checkProjectionSupport=async function(a,m){a&&m&&(a=Array.isArray(a)?a.map(p=>
null!=p.geometry?p.geometry.spatialReference:null).filter(g.isSome):[a],await u.initializeProjection(a.map(p=>({source:p,dest:m}))))};c.project=function(a,m,p,F){if(!a)return a;p||(p=m,m=a.spatialReference);return C.isValid(m)&&C.isValid(p)&&!C.equals(m,p)?f.canProject(m,p)?(a=C.isWebMercator(p)?A(a):K(a),a.spatialReference=p,a):u.projectMany(H.jsonAdapter,[a],m,p,null,F)[0]:a};c.projectMany=function(a,m,p,F){return q.push(a,m,p,F)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(c){class g{constructor(f,n,d){this.x=f;this.y=n;this.spatialReference=d;this.m=this.z=void 0}}class w{constructor(f,n,d,r){this.rings=f;this.spatialReference=n;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);r&&(this.hasM=r)}}class u{constructor(f,n,d,r){this.paths=f;this.spatialReference=n;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);r&&(this.hasM=r)}}class H{constructor(f,n,d,r){this.points=f;this.spatialReference=n;this.hasM=
this.hasZ=void 0;d&&(this.hasZ=d);r&&(this.hasM=r)}}class C{constructor(f,n,d,r,B){this.xmin=f;this.ymin=n;this.xmax=d;this.ymax=r;this.spatialReference=B;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}c.jsonAdapter={convertToGEGeometry:function(f,n){return null==n?null:f.convertJSONToGeometry(n)},exportPoint:function(f,n,d){d=new g(f.getPointX(n),f.getPointY(n),d);const r=f.hasZ(n),B=f.hasM(n);r&&(d.z=f.getPointZ(n));B&&(d.m=f.getPointM(n));return d},exportPolygon:function(f,n,d){return new w(f.exportPaths(n),
d,f.hasZ(n),f.hasM(n))},exportPolyline:function(f,n,d){return new u(f.exportPaths(n),d,f.hasZ(n),f.hasM(n))},exportMultipoint:function(f,n,d){return new H(f.exportPoints(n),d,f.hasZ(n),f.hasM(n))},exportExtent:function(f,n,d){var r=f.hasZ(n);const B=f.hasM(n);d=new C(f.getXMin(n),f.getYMin(n),f.getXMax(n),f.getYMax(n),d);r&&(r=f.getZExtent(n),d.zmin=r.vmin,d.zmax=r.vmax);B&&(f=f.getMExtent(n),d.mmin=f.vmin,d.mmax=f.vmax);return d}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B,A,K,t,q,a,m,p,F,Q,e,J,T,L,U,S,P,l){class z{constructor(G,R=null,Y,ca,ja){this.attributes=G;this.geometry=Y;this.centroid=ca;this.filterFlags=ja;this.groupId=-1;this.displayId=R}}const y=new f.MemCacheStorage(2E6);let v=0;class N{constructor(G){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:e.queryCapabilities};this.geometryType=G.geometryType;this.hasM=!!G.hasM;this.hasZ=!!G.hasZ;this.objectIdField=G.objectIdField;this.spatialReference=G.spatialReference;
this.definitionExpression=G.definitionExpression;this.featureStore=G.featureStore;this.aggregateAdapter=G.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=G.timeInfo;G.cacheSpatialQueries&&(this._geometryQueryCache=new f.MemCache(v++ +"$$",y));this.fieldsIndex=u.isSerializable(G.fieldsIndex)?G.fieldsIndex:P.fromJSON(G.fieldsIndex);this.availableFields=null==G.availableFields?new Set(this.fieldsIndex.fields.map(R=>R.name)):new Set(G.availableFields.map(R=>
this.fieldsIndex.get(R)?.name).filter(R=>null!=R));G.scheduler&&G.priority&&(this._frameTask=G.scheduler.registerTask(G.priority))}destroy(){this._frameTask=C.removeMaybe(this._frameTask);this.clearCache();C.destroyMaybe(this._geometryQueryCache);this._changeHandle=C.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(G,
R){R=n.signalFromSignalOrOptions(R);try{return(await this._executeQuery(G,{},R)).createQueryResponse()}catch(Y){if(Y!==T.queryEngineEmptyResult)throw Y;return(new J.QueryEngineResult([],G,this)).createQueryResponse()}}async executeQueryForCount(G={},R){R=n.signalFromSignalOrOptions(R);try{return(await this._executeQuery(G,{returnGeometry:!1,returnCentroid:!1,outSR:null},R)).createQueryResponseForCount()}catch(Y){if(Y!==T.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(G,R){R=
n.signalFromSignalOrOptions(R);const Y=G.outSR;try{const ca=await this._executeQuery(G,{returnGeometry:!0,returnCentroid:!1,outSR:null},R),ja=ca.size;if(!ja)return{count:0,extent:null};const na=await this._getBounds(ca.items,ca.spatialReference,Y||this.spatialReference);return{count:ja,extent:na}}catch(ca){if(ca===T.queryEngineEmptyResult)return{count:0,extent:null};throw ca;}}async executeQueryForIds(G,R){return this.executeQueryForIdSet(G,R).then(Y=>Array.from(Y))}async executeQueryForIdSet(G,R){R=
n.signalFromSignalOrOptions(R);try{const Y=await this._executeQuery(G,{returnGeometry:!0,returnCentroid:!1,outSR:null},R),ca=Y.items,ja=new Set;await this._reschedule(()=>{for(const na of ca)ja.add(Y.featureAdapter.getObjectId(na))},R);return ja}catch(Y){if(Y===T.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(G,R){const Y=n.signalFromSignalOrOptions(R),{point:ca,distance:ja,returnEdge:na,vertexMode:sa}=G;if(!na&&"none"===sa)return{candidates:[]};let ua=H.clone(G.query);
ua=await this._schedule(()=>T.normalizeQueryLike(ua,this.definitionExpression,this.spatialReference),Y);ua=await this._reschedule(()=>L.validateQuery(ua,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);(R=!a.equals(ca.spatialReference,this.spatialReference))&&await Q.checkProjectionSupport(ca.spatialReference,this.spatialReference);var ta="number"===typeof ja?ja:ja.x,wa="number"===typeof ja?ja:ja.y;ta={xmin:ca.x-
ta,xmax:ca.x+ta,ymin:ca.y-wa,ymax:ca.y+wa,spatialReference:ca.spatialReference};ta=R?Q.project(ta,this.spatialReference):ta;if(!ta)return{candidates:[]};wa=(await q.normalizeCentralMeridian(t.fromJSON(ca),null,{signal:Y}))[0];const xa=(await q.normalizeCentralMeridian(t.fromJSON(ta),null,{signal:Y}))[0];if(null==wa||null==xa)return{candidates:[]};const Da=new J.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(xa.toJSON())),Y),ua,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Da),Y);await this._reschedule(()=>this._executeTimeQuery(Da),Y);await this._reschedule(()=>this._executeAttributesQuery(Da),Y);await this._reschedule(()=>this._executeGeometryQueryForSnapping(Da,Y),Y);wa=wa.toJSON();wa=R?Q.project(wa,this.spatialReference):wa;return Da.createSnappingResponse({...G,point:wa,distance:R?Math.max(ta.xmax-ta.xmin,ta.ymax-ta.ymin)/2:ja},ca.spatialReference)}async executeQueryForLatestObservations(G,R){R=n.signalFromSignalOrOptions(R);if(!this.timeInfo?.trackIdField)throw new w("unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:G,timeInfo:this.timeInfo});try{const Y=await this._executeQuery(G,{},R);await this._reschedule(()=>this._filterLatest(Y),R);return Y.createQueryResponse()}catch(Y){if(Y!==T.queryEngineEmptyResult)throw Y;return(new J.QueryEngineResult([],G,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(G={},R,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ca,normalizationField:ja,valueExpression:na}=R;return(await this._executeQueryForStatistics(G,
{field:ca,normalizationField:ja,valueExpression:na},Y)).createSummaryStatisticsResponse(R)}async executeQueryForUniqueValues(G={},R,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ca,field2:ja,field3:na,valueExpression:sa}=R;return(await this._executeQueryForStatistics(G,{field:ca,field2:ja,field3:na,valueExpression:sa},Y)).createUniqueValuesResponse(R)}async executeQueryForClassBreaks(G={},R,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ca,normalizationField:ja,valueExpression:na}=R;return(await this._executeQueryForStatistics(G,
{field:ca,normalizationField:ja,valueExpression:na},Y)).createClassBreaksResponse(R)}async executeQueryForHistogram(G={},R,Y){Y=n.signalFromSignalOrOptions(Y);const {field:ca,normalizationField:ja,valueExpression:na}=R;return(await this._executeQueryForStatistics(G,{field:ca,normalizationField:ja,valueExpression:na},Y)).createHistogramResponse(R)}async fetchRecomputedExtents(G){G=n.signalFromSignalOrOptions(G);this._timeExtentPromise||(this._timeExtentPromise=S.getTimeExtent(this.timeInfo,this.featureStore));
const [R,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);n.throwIfAborted(G);return{fullExtent:R,timeExtent:Y}}async _getBounds(G,R,Y){const ca=B.set(B.create(),B.negativeInfinity);await this.featureStore.forEachBounds(G,ja=>B.expandWithAABB(ca,ja));G={xmin:ca[0],ymin:ca[1],xmax:ca[3],ymax:ca[4],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ca[2])&&isFinite(ca[5])&&(G.zmin=ca[2],G.zmax=ca[5]);R=Q.project(G,R,Y);R.spatialReference=F.cleanFromGeometryEngine(Y);
0===R.xmax-R.xmin&&(Y=d.getMetersPerUnitForSR(R.spatialReference),R.xmin-=Y,R.xmax+=Y);0===R.ymax-R.ymin&&(Y=d.getMetersPerUnitForSR(R.spatialReference),R.ymin-=Y,R.ymax+=Y);this.hasZ&&null!=R.zmin&&null!=R.zmax&&0===R.zmax-R.zmin&&(Y=d.getMetersPerUnitForSR(R.spatialReference),R.zmin-=Y,R.zmax+=Y);return R}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):
this._getAllFeatures().then(G=>this._getBounds(G,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(G,R){return null!=this._frameTask?this._frameTask.schedule(G,R):G(l.noBudget)}async _reschedule(G,R){return null!=this._frameTask?this._frameTask.reschedule(G,R):G(l.noBudget)}async _getAllFeaturesQueryEngineResult(G){return new J.QueryEngineResult(await this._getAllFeatures(),G,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=
(async()=>{await this.featureStore.forEach(ca=>Y.push(ca))})().then(()=>Y)}const G=this._allFeaturesPromise,R=await G;return G===this._allFeaturesPromise?R.slice():this._getAllFeatures()}async _executeQuery(G,R,Y){G=H.clone(G);G=await this._schedule(()=>T.normalizeQuery(G,this.definitionExpression,this.spatialReference),Y);G=await this._reschedule(()=>L.validateQuery(G,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),
Y);G={...G,...R};const ca=await this._reschedule(()=>this._executeSceneFilterQuery(G,Y),Y),ja=await this._reschedule(()=>this._executeGeometryQuery(G,ca,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(ja),Y);await this._reschedule(()=>this._executeObjectIdsQuery(ja),Y);await this._reschedule(()=>this._executeTimeQuery(ja),Y);await this._reschedule(()=>this._executeAttributesQuery(ja),Y);return ja}async _executeSceneFilterQuery(G,R){if(null==G.sceneFilter)return null;const {outSR:Y,
returnGeometry:ca,returnCentroid:ja}=G;var na=this.featureStore.featureSpatialReference,sa=G.sceneFilter.geometry;const ua=null==na||a.equals(na,sa.spatialReference)?sa:Q.project(sa,na);if(!ua)return null;na=ca||ja;na=a.isValid(Y)&&!a.equals(this.spatialReference,Y)&&na?async Da=>this._project(Da,Y):Da=>Da;const ta=this.featureAdapter;sa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ua)),R);if("disjoint"===G.sceneFilter.spatialRelationship){if(!sa.length)return null;const Da=
new Set;for(var wa of sa)Da.add(ta.getObjectId(wa));const Ia=await this._reschedule(()=>this._getAllFeatures(),R);wa=await this._reschedule(async()=>{const Ra=await U.getSpatialQueryOperator("esriSpatialRelDisjoint",ua,this.geometryType,this.hasZ,this.hasM),Na=await this._runSpatialFilter(Ia,Sa=>!Da.has(ta.getObjectId(Sa))||Ra(ta.getGeometry(Sa)),R);return new J.QueryEngineResult(Na,G,this)},R);return na(wa)}if(!sa.length)return new J.QueryEngineResult([],G,this);if(this._canExecuteSinglePass(ua,
G))return na(new J.QueryEngineResult(sa,G,this));const xa=await U.getSpatialQueryOperator("esriSpatialRelContains",ua,this.geometryType,this.hasZ,this.hasM);wa=await this._runSpatialFilter(sa,Da=>xa(ta.getGeometry(Da)),R);return na(new J.QueryEngineResult(wa,G,this))}async _executeGeometryQuery(G,R,Y){if(null!=R&&0===R.items.length)return R;G=null!=R?R.query:G;const {geometry:ca,outSR:ja,spatialRel:na,returnGeometry:sa,returnCentroid:ua}=G;var ta=this.featureStore.featureSpatialReference;const wa=
!ca||null==ta||a.equals(ta,ca.spatialReference)?ca:Q.project(ca,ta),xa=sa||ua,Da=a.isValid(ja)&&!a.equals(this.spatialReference,ja),Ia=this._geometryQueryCache&&null==R?Da&&xa?JSON.stringify({originalFilterGeometry:ca,spatialRelationship:na,outSpatialReference:ja}):JSON.stringify({originalFilterGeometry:ca,spatialRelationship:na}):null;ta=Ia?this._geometryQueryCache.get(Ia):null;if(null!=ta)return new J.QueryEngineResult(ta,G,this);ta=async h=>{Da&&xa&&await this._project(h,ja);Ia&&this._geometryQueryCache.put(Ia,
h.items,h.items.length+1);return h};if(!wa)return ta(null!=R?R:await this._getAllFeaturesQueryEngineResult(G));const Ra=this.featureAdapter;let Na=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ca)),Y);if("esriSpatialRelDisjoint"===na){if(!Na.length)return ta(null!=R?R:await this._getAllFeaturesQueryEngineResult(G));const h=new Set;for(var Sa of Na)h.add(Ra.getObjectId(Sa));const E=null!=R?R.items:await this._reschedule(()=>this._getAllFeatures(),Y);Sa=await this._reschedule(async()=>
{const X=await U.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(E,ha=>!h.has(Ra.getObjectId(ha))||X(Ra.getGeometry(ha)),Y);return new J.QueryEngineResult(aa,G,this)},Y);return ta(Sa)}if(null!=R){const h=new g.PositionHint;Na=Na.filter(E=>0<=g.indexOf(R.items,E,R.items.length,h))}if(!Na.length)return ta=new J.QueryEngineResult([],G,this),Ia&&this._geometryQueryCache.put(Ia,ta.items,1),ta;if(this._canExecuteSinglePass(wa,G))return ta(new J.QueryEngineResult(Na,
G,this));const Va=await U.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM);Sa=await this._runSpatialFilter(Na,h=>Va(Ra.getGeometry(h)),Y);return ta(new J.QueryEngineResult(Sa,G,this))}async _executeGeometryQueryForSnapping(G,R){const {query:Y}=G,{spatialRel:ca}=Y;if(G?.items?.length&&Y.geometry&&ca){var ja=await U.getSpatialQueryOperator(ca,Y.geometry,this.geometryType,this.hasZ,this.hasM);R=await this._runSpatialFilter(G.items,na=>ja(na.geometry),R);G.items=R}}_executeAggregateIdsQuery(G){if(0!==
G.items.length&&G.query.aggregateIds?.length&&null!=this.aggregateAdapter){var R=new Set;for(const ca of G.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ca).forEach(ja=>R.add(ja));var Y=this.featureAdapter.getObjectId;G.items=G.items.filter(ca=>R.has(Y(ca)))}}_executeObjectIdsQuery(G){if(0!==G.items.length&&G.query.objectIds?.length){var R=new Set(G.query.objectIds),Y=this.featureAdapter.getObjectId;G.items=G.items.filter(ca=>R.has(Y(ca)))}}_executeTimeQuery(G){if(0!==G.items.length){var R=
S.getTimeOperator(this.timeInfo,G.query.timeExtent,this.featureAdapter);null!=R&&(G.items=G.items.filter(R))}}_executeAttributesQuery(G){if(0!==G.items.length){var R=p.getWhereClause(G.query.where,this.fieldsIndex);if(R){if(!R.isStandardized)throw new TypeError("Where clause is not standardized");G.items=G.items.filter(Y=>R.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(G,R,Y){if(!R)return G;if(null==this._frameTask)return G.filter(sa=>R(sa));let ca=0;const ja=[],na=async sa=>{for(;ca<
G.length;){const ua=G[ca++];R(ua)&&(ja.push(ua),sa.madeProgress());sa.done&&await this._reschedule(ta=>na(ta),Y)}};return this._reschedule(sa=>na(sa),Y).then(()=>ja)}_filterLatest(G){const {trackIdField:R,startTimeField:Y,endTimeField:ca}=this.timeInfo,ja=ca||Y,na=new Map,sa=this.featureAdapter.getAttribute;for(const ua of G.items){const ta=sa(ua,R),wa=sa(ua,ja),xa=na.get(ta);(!xa||wa>sa(xa,ja))&&na.set(ta,ua)}G.items=Array.from(na.values())}_canExecuteSinglePass(G,R){({spatialRel:R}=R);return U.canQueryWithRBush(G)&&
("esriSpatialRelEnvelopeIntersects"===R||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===R||"esriSpatialRelContains"===R))}async _project(G,R){if(!R||a.equals(this.spatialReference,R))return G;const Y=this.featureAdapter;let ca=void 0;try{const ja=await this._getFullExtent();ca=r.getTransformation(this.spatialReference,R,ja)}catch{}R=await Q.projectMany(G.items.map(ja=>F.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(ja))),this.spatialReference,R,ca);G.items=
R.map((ja,na)=>Y.cloneWithGeometry(G.items[na],m.convertFromGeometry(ja,this.hasZ,this.hasM)));return G}_getQueryBBoxes(G){if(U.canQueryWithRBush(G)){if(t.isExtent(G))return[A.fromValues(Math.min(G.xmin,G.xmax),Math.min(G.ymin,G.ymax),Math.max(G.xmin,G.xmax),Math.max(G.ymin,G.ymax))];if(t.isPolygon(G))return G.rings.map(R=>A.fromValues(Math.min(R[0][0],R[2][0]),Math.min(R[0][1],R[2][1]),Math.max(R[0][0],R[2][0]),Math.max(R[0][1],R[2][1])))}return[K.getBoundsXY(A.create(),G)]}async _searchFeatures(G){const R=
new Set;await Promise.all(G.map(Y=>this.featureStore.forEachInBounds(Y,ca=>R.add(ca))));G=Array.from(R.values());R.clear();return G}async _executeQueryForStatistics(G,R,Y){G=H.clone(G);try{G=await this._schedule(()=>T.normalizeQuery(G,this.definitionExpression,this.spatialReference),Y);G=await this._reschedule(()=>L.validateStatisticsQuery(G,R,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const ca=await this._reschedule(()=>
this._executeSceneFilterQuery(G,Y),Y),ja=await this._reschedule(()=>this._executeGeometryQuery(G,ca,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(ja),Y);await this._reschedule(()=>this._executeObjectIdsQuery(ja),Y);await this._reschedule(()=>this._executeTimeQuery(ja),Y);await this._reschedule(()=>this._executeAttributesQuery(ja),Y);return ja}catch(ca){if(ca!==T.queryEngineEmptyResult)throw ca;return new J.QueryEngineResult([],G,this)}}}c.Feature=z;c.QueryEngine=N;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(c,g){c.RemoveMode=void 0;(function(f){f[f.ALL=0]="ALL";f[f.SOME=1]="SOME"})(c.RemoveMode||(c.RemoveMode={}));class w{constructor(f,n,d){this.name=f;this._storage=n;this.id=`${H++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);d&&(this._storage.registerRemoveFunc(this.id,d),this._removeFunc=!0)}destroy(){this._storage.clear(this);
this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(f){return this._storage.getSize(this,f)}resetHitRate(){this._hit=this._miss=0}put(f,n,d,r=0){this._storage.put(this,f,n,d,r)}pop(f){f=this._storage.pop(this,f);void 0===f?++this._miss:++this._hit;return f}get(f){f=this._storage.get(this,f);void 0===f?++this._miss:++this._hit;return f}peek(f){return this._storage.peek(this,
f)}updateSize(f,n,d){this._storage.updateSize(this,f,n,d)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class u{get size(){return this._size}constructor(f=10485760){this._maxSize=f;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new g;this._users=new g}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(f){this._users.push(f)}deregister(f){this._users.removeUnordered(f)}registerRemoveFunc(f,
n){this._removeFuncs.push([f,n])}deregisterRemoveFunc(f){this._removeFuncs.filterInPlace(n=>n[0]!==f)}get maxSize(){return this._maxSize}set maxSize(f){this._maxSize=Math.max(f,-1);this._checkSize()}getSize(f,n){return this._db.get(f.id+n)?.size??0}put(f,n,d,r,B){n=f.id+n;const A=this._db.get(n);A&&(this._size-=A.size,f.size-=A.size,this._db.delete(n),A.entry!==d&&this._notifyRemove(n,A.entry,A.size,c.RemoveMode.ALL));r>this._maxSize?this._notifyRemove(n,d,r,c.RemoveMode.ALL):void 0===d?console.warn("Refusing to cache undefined entry "):
!r||0>r?(console.warn(`Refusing to cache entry with size ${r} for key ${n}`),this._notifyRemove(n,d,0,c.RemoveMode.ALL)):(this._db.set(n,new C(d,r,1+Math.max(B,-4)- -3)),this._size+=r,f.size+=r,this._checkSize())}updateSize(f,n,d,r){n=f.id+n;const B=this._db.get(n);if(B&&B.entry===d){this._size-=B.size;for(f.size-=B.size;r>this._maxSize;)if(r=this._notifyRemove(n,d,r,c.RemoveMode.SOME),!(null!=r&&0<r)){this._db.delete(n);return}B.size=r;this._size+=r;f.size+=r;this._checkSize()}}pop(f,n){n=f.id+n;
const d=this._db.get(n);if(d)return this._size-=d.size,f.size-=d.size,this._db.delete(n),++this._hit,d.entry;++this._miss}get(f,n){n=f.id+n;f=this._db.get(n);if(void 0===f)++this._miss;else return this._db.delete(n),f.lives=f.lifetime,this._db.set(n,f),++this._hit,f.entry}peek(f,n){(f=this._db.get(f.id+n))?++this._hit:++this._miss;return f?.entry}get performanceInfo(){const f={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},n={},d=[];this._db.forEach((A,K)=>{const t=A.lifetime;d[t]=(d[t]||0)+A.size;this._users.forAll(q=>{const {id:a,name:m}=q;K.startsWith(a)&&(n[m]=(n[m]||0)+A.size)})});const r={};this._users.forAll(A=>{const K=A.name;"hitRate"in A&&"number"===typeof A.hitRate&&!isNaN(A.hitRate)&&0<A.hitRate?(n[K]=n[K]||0,r[K]=Math.round(100*A.hitRate)+"%"):r[K]="0%"});var B=Object.keys(n);B.sort((A,K)=>n[K]-n[A]);B.forEach(A=>f[A]=Math.round(n[A]/2**20)+"MB / "+r[A]);for(B=d.length-
1;0<=B;--B){const A=d[B];A&&(f["Priority "+(B+-3-1)]=Math.round(A/this._size*100)+"%")}return f}resetStats(){this._hit=this._miss=0;this._users.forAll(f=>f.resetHitRate())}clear(f){const n=f.id;this._db.forEach((d,r)=>{r.startsWith(n)&&(this._size-=d.size,this._db.delete(r),this._notifyRemove(r,d.entry,d.size,c.RemoveMode.ALL))});f.size=0}clearAll(){this._db.forEach((f,n)=>this._notifyRemove(n,f.entry,f.size,c.RemoveMode.ALL));this._users.forAll(f=>f.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(f,n,d,r){let B;this._removeFuncs.some(A=>f.startsWith(A[0])?(A=A[1](n,r,d),"number"===typeof A&&(B=A),!0):!1);return B}_checkSize(){this._users.forAll(f=>this._checkSizeLimits(f));this._checkSizeLimits()}_checkSizeLimits(f){const n=f??this;if(!(0>n.maxSize||n.size<=n.maxSize)){for(var d=f?.id,r=!0;r;){r=!1;for(const [B,A]of this._db)if(0===A.lifetime&&(!d||B.startsWith(d))){this._purgeItem(B,A,f);if(n.size<=.9*n.maxSize)return;r||=this._db.has(B)}}for(const [B,
A]of this._db)if(!d||B.startsWith(d))if(this._purgeItem(B,A,f),n.size<=.9*n.maxSize)break}}_purgeItem(f,n,d=this._users.find(r=>f.startsWith(r.id))){this._db.delete(f);if(1>=n.lives){this._size-=n.size;d&&(d.size-=n.size);const r=this._notifyRemove(f,n.entry,n.size,c.RemoveMode.SOME);null!=r&&0<r&&(this._size+=r,d&&(d.size+=r),n.lives=n.lifetime,n.size=r,this._db.set(f,n))}else--n.lives,this._db.set(f,n)}}let H=0;class C{constructor(f,n,d){this.entry=f;this.size=n;this.lives=this.lifetime=d}}c.MemCache=
w;c.MemCacheStorage=u;c.MinPriority=-3;c.NoPriority=-4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(c,g,w,u,H,C,f,n,d,r,B){function A(F){const Q=[];let e=0,J=0;for(let T=0;T<F.length;T++){const L=
F[T];let U=null;for(let S=0;S<L.length;S++)U=L[S],Q.push(U),0===S?J=e=U[0]:(e=Math.min(e,U[0]),J=Math.max(J,U[0]));U&&Q.push([(e+J)/2,0])}return Q}function K(F,Q){if(!(F instanceof C||F instanceof H))throw p().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new w("straightLineDensify: the input geometry is neither polyline nor polygon");var e=f.getGeometryParts(F);const J=[];for(const L of e){e=[];J.push(e);e.push([L[0][0],L[0][1]]);for(let U=0;U<L.length-1;U++){const S=
L[U][0],P=L[U][1],l=L[U+1][0],z=L[U+1][1];var T=Math.sqrt((l-S)*(l-S)+(z-P)*(z-P));const y=(z-P)/T,v=(l-S)/T,N=T/Q;if(1<N){for(let G=1;G<=N-1;G++){const R=G*Q;e.push([v*R+S,y*R+P])}T=(T+Math.floor(N-1)*Q)/2;e.push([v*T+S,y*T+P])}e.push([l,z])}}return"polygon"===F.type?new H({rings:J,spatialReference:F.spatialReference}):new C({paths:J,spatialReference:F.spatialReference})}function t(F,Q,e){Q&&(F=K(F,1E6),F=d.webMercatorToGeographic(F,!0));e&&(F=f.updatePolyGeometry(F,e));return F}function q(F,Q,e){if(Array.isArray(F)){var J=
F[0];J>Q?(e=f.offsetMagnitude(J,Q),F[0]=J+-2*e*Q):J<e&&(Q=f.offsetMagnitude(J,e),F[0]=J+-2*Q*e)}else J=F.x,J>Q?(e=f.offsetMagnitude(J,Q),F=F.clone().offset(-2*e*Q,0)):J<e&&(Q=f.offsetMagnitude(J,e),F=F.clone().offset(-2*Q*e,0));return F}function a(F,Q){let e=-1;for(let J=0;J<Q.cutIndexes.length;J++){const T=Q.cutIndexes[J],L=Q.geometries[J],U=f.getGeometryParts(L);for(let S=0;S<U.length;S++){const P=U[S];P.some(l=>{if(180>l[0])return!0;l=0;for(var z=0;z<P.length;z++){var y=P[z][0];l=y>l?y:l}l=Number(l.toFixed(9));
l=-360*f.offsetMagnitude(l,180);for(z=0;z<P.length;z++)y=L.getPoint(S,z),L.setPoint(S,z,y.clone().offset(l,0));return!0})}if(T===e)if("polygon"===F[0].type)for(const S of f.getGeometryParts(L))F[T]=F[T].addRing(S);else{if("polyline"===F[0].type)for(const S of f.getGeometryParts(L))F[T]=F[T].addPath(S)}else e=T,F[T]=L}return F}async function m(F,Q,e){if(!Array.isArray(F))return m([F],Q);Q&&"string"!==typeof Q&&p().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var J="string"===typeof Q?Q:Q?.url??g.geometryServiceUrl;let T,L,U;let S=0;var P=[];Q=[];for(var l of F)if(null==l)Q.push(l);else{if(!z){var z=l.spatialReference;var y=n.getInfo(z);var v=(T=z.isWebMercator)?102100:4326;L=f.cutParams[v].maxX;U=f.cutParams[v].minX;var N=f.cutParams[v].plus180Line;v=f.cutParams[v].minus180Line}if(y)if("mesh"===l.type)Q.push(l);else if("point"===l.type)Q.push(q(l.clone(),L,U));else if("multipoint"===l.type){var G=l.clone();G.points=G.points.map(R=>q(R,L,U));Q.push(G)}else if("extent"===
l.type)G=l.clone()._normalize(!1,!1,y),Q.push(G.rings?new H(G):G);else if(l.extent){G=l.extent;const R=2*f.offsetMagnitude(G.xmin,U)*L;let Y=0===R?l.clone():f.updatePolyGeometry(l.clone(),R);G.offset(R,0);G.intersects(N)&&G.xmax!==L?(S=G.xmax>S?G.xmax:S,Y=t(Y,T),P.push(Y),Q.push("cut")):G.intersects(v)&&G.xmin!==U?(S=2*G.xmax*L>S?2*G.xmax*L:S,Y=t(Y,T,360),P.push(Y),Q.push("cut")):Q.push(Y)}else Q.push(l.clone());else Q.push(l)}z=f.offsetMagnitude(S,L);y=-90;N=z;for(l=new C;0<z;)v=-180+360*z,l.addPath([[v,
y],[v,-1*y]]),y*=-1,z--;if(0<P.length&&0<N){z=await r.cut(J,P,l,e);z=a(P,z);y=[];P=[];for(N=0;N<Q.length;N++)l=Q[N],"cut"!==l?P.push(l):(l=z.shift(),v=F[N],null!=v&&"polygon"===v.type&&v.rings&&1<v.rings.length&&l.rings.length>=v.rings.length?(y.push(l),P.push("simplify")):P.push(T?d.geographicToWebMercator(l):l));if(!y.length)return P;Q=await B.simplify(J,y,e);F=[];for(e=0;e<P.length;e++)J=P[e],"simplify"!==J?F.push(J):F.push(T?d.geographicToWebMercator(Q.shift()):Q.shift());return F}F=[];for(e=
0;e<Q.length;e++)J=Q[e],"cut"!==J?F.push(J):(J=P.shift(),F.push(!0===T?d.geographicToWebMercator(J):J));return F}const p=()=>u.getLogger("esri.geometry.support.normalizeUtils");c.getClosestDenormalizedXToReference=function(F,Q,e){e=n.getInfo(e);if(null==e)return F;const [J,T]=e.valid;e=2*T;let L=0,U=0;Q>T?L=Math.ceil(Math.abs(Q-T)/e):Q<J&&(L=-Math.ceil(Math.abs(Q-J)/e));F>T?U=Math.ceil(Math.abs(F-T)/e):F<J&&(U=-Math.ceil(Math.abs(F-J)/e));F+=(L-U)*e;Q=F-Q;Q>T?F-=e:Q<J&&(F+=e);return F};c.getDenormalizedExtent=
function(F){if(!F)return null;const Q=F.extent;if(!Q)return null;var e=F.spatialReference&&n.getInfo(F.spatialReference);if(!e)return Q;const [J,T]=e.valid;({width:e}=Q);let {xmin:L,xmax:U}=Q;[L,U]=[U,L];if("extent"===F.type||0===e||e<=T||e>2*T||L<J||U>T)return Q;let S;switch(F.type){case "polygon":if(1<F.rings.length)S=A(F.rings);else return Q;break;case "polyline":if(1<F.paths.length)S=A(F.paths);else return Q;break;case "multipoint":S=F.points}F=Q.clone();for(let P=0;P<S.length;P++){let l=S[P][0];
0>l?(l+=T,U=Math.max(l,U)):(l-=T,L=Math.min(l,L))}F.xmin=L;F.xmax=U;return F.width<e?(F.xmin-=T,F.xmax-=T,F):Q};c.normalizeCentralMeridian=m;c.normalizeMapX=function(F,Q){if(Q=n.getInfo(Q)){const [e,J]=Q.valid;Q=J-e;if(F<e)for(;F<e;)F+=Q;if(F>J)for(;F>J;)F-=Q}return F};c.straightLineDensify=K;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(c,g,w,u){function H(C){return u.isPolygon(C)?
C.rings:C.paths}g={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new g({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:w.WebMercator}),minus180Line:new g({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:w.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new g({paths:[[[180,-180],[180,180]]],spatialReference:w.WGS84}),minus180Line:new g({paths:[[[-180,
-180],[-180,180]]],spatialReference:w.WGS84})}};c.cutParams=g;c.getGeometryParts=H;c.offsetMagnitude=function(C,f){return Math.ceil((C-f)/(2*f))};c.updatePolyGeometry=function(C,f){const n=H(C);for(const d of n)for(const r of d)r[0]+=f;return C};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),function(c,
g,w,u,H,C){c.cut=async function(f,n,d,r){f=C.parseUrl(f);const B=n[0].spatialReference;n={...r,responseType:"json",query:{...f.query,f:"json",sr:H.srToRESTValue(B),target:JSON.stringify({geometryType:u.getJsonType(n[0]),geometries:n}),cutter:JSON.stringify(d)}};n=await w(f.path+"/cut",n);const {cutIndexes:A,geometries:K=[]}=n.data;return{cutIndexes:A,geometries:K.map(t=>{t=u.fromJSON(t);t.spatialReference=B;return t})}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(c,g,w,u,H,C){function f(n,d,r){const B={};for(const K in n)if("declaredClass"!==K){var A=n[K];null!=A&&"function"!==typeof A&&(Array.isArray(A)?B[K]=A.map(t=>f({item:t},d,r).item):"object"===typeof A?A.toJSON?(A=A.toJSON(r?.[K]),B[K]=d?A:JSON.stringify(A)):B[K]=d?A:JSON.stringify(A):B[K]=A)}return B}c.asValidOptions=function(n,d){return d?{...d,query:{...(n??{}),...d.query}}:{query:n}};c.encode=f;c.getToken=function(n,d){return n?C.supportsApiKey(n)&&(d||g.apiKey)?d||g.apiKey:w.id?.findCredential(n)?.token:
null};c.parseUrl=function(n){return"string"===typeof n?H.urlToObject(n):u.clone(n)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(c,g,w,u,H,C){c.simplify=async function(f,n,d){const r="string"===typeof f?w.urlToObject(f):f;f=n[0].spatialReference;const B=u.getJsonType(n[0]);n={...d,
query:{...r.query,f:"json",sr:H.srToRESTValue(f),geometries:JSON.stringify(C.encodeGeometries(n))}};({data:n}=await g(r.path+"/simplify",n));return C.decodeGeometries(n.geometries,B,f)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(c,g){c.decodeGeometries=function(w,u,H){const C=g.getGeometryType(u);return w.map(f=>{f=C.fromJSON(f);f.spatialReference=H;return f})};c.encodeGeometries=
function(w){return{geometryType:g.getJsonType(w[0]),geometries:w.map(u=>u.toJSON())}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(c,g,w,u){function H(t,q,a={}){const m=C(q,t);if(!m)throw a=B.getError(q,t),new g("unsupported-query","invalid SQL expression",{expression:q,error:a});t=a.expressionName||"expression";
if(a.validateStandardized&&!m.isStandardized)throw new g("unsupported-query",`${t} is not standard`,{expression:q});if(a.validateAggregate&&!m.isAggregate)throw new g("unsupported-query",`${t} does not contain a valid aggregate function`,{expression:q});return m.fieldNames}function C(t,q){return t?B.get(t,q):null}function f(t){return/\((.*?)\)/.test(t)?t:t.split(" as ")[0]}function n(t,q,a,m={}){const p=new Map;d(p,t,q,m.allowedFieldTypes??K,a);if(p.size)throw new g("unsupported-query",`${m.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(p.values()),query:m.query});}function d(t,q,a,m,p){p=p.includes("*")?[...a,...p.filter(F=>"*"!==F)]:p;for(const F of p)if(q.get(F))r(t,q,a,m,F);else try{const Q=f(F),e=H(q,Q,{validateStandardized:!0});for(const J of e)r(t,q,a,m,J)}catch(Q){t.set(F,{type:"expression-error",expression:F,error:Q})}}function r(t,q,a,m,p){(q=q.get(p))?a.has(q.name)?"all"!==m&&!1===m?.has(q.type)&&t.set(p,{type:"invalid-type",fieldName:q.name,fieldType:u.kebabDict.fromJSON(q.type),
allowedFieldTypes:Array.from(m,F=>u.kebabDict.fromJSON(F))}):t.set(p,{type:"missing-field",fieldName:q.name}):t.set(p,{type:"invalid-field",fieldName:p})}const B=new w.WhereClauseCache(50,500);w=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const A=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),K=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...w,...A]);c.allDateAndTimeFieldTypes=A;c.getAliasFromFieldName=function(t){return t.split(" as ")[1]};c.getExpressionFromFieldName=f;c.getWhereClause=C;c.numericFieldTypes=w;c.validateFields=n;c.validateHaving=function(t,q,a,m,p){if(!a)return!0;const F=H(t,a,{validateAggregate:!0,expressionName:"having clause"});n(t,q,F,{expressionName:"having clause",query:p});if(!C(a,t)?.getExpressions().every(Q=>{const {aggregateType:e,field:J}=Q,T=t.get(J)?.name;return m.some(L=>
{const {onStatisticField:U,statisticType:S}=L;return t.get(U)?.name===T&&S.toLowerCase().trim()===e})}))throw new g("unsupported-query","expressions in having clause should also exist in outStatistics",{having:a});return!0};c.validateWhere=function(t,q,a,m){if(!a)return!0;a=H(t,a,{validateStandardized:!0,expressionName:"where clause"});n(t,q,a,{expressionName:"where clause",query:m});return!0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(c,g,w){class u{constructor(H,C){this._cache=new g.LRUCache(H);this._invalidCache=new g.LRUCache(C)}get(H,C){const f=`${C.uid}:${H}`,n=this._cache.get(f);if(n)return n;if(null!=this._invalidCache.get(f))return null;try{const d=w.WhereClause.create(H,C);this._cache.put(f,d);return d}catch(d){return this._invalidCache.put(f,d),null}}getError(H,C){return this._invalidCache.get(`${C.uid}:${H}`)??null}}c.WhereClauseCache=u;Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(c,g){class w{constructor(u,H){this._storage=new g.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=u;this._storage.register(this);H&&this._storage.registerRemoveFunc("",H)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(u,H,C=1){this._storage.put(this,u,H,C,1)}pop(u){return this._storage.pop(this,u)}get(u){return this._storage.get(this,u)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(u){this._storage.maxSize=
u}resetHitRate(){}}c.LRUCache=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(c,g,w,u,H,C,f,n,d,r,B,A,K,t,q){function a(l){return Array.isArray(l)?
l:[l]}function m(l){return null!==l?!0!==l:null}function p(l,z){return null!=l&&null!=z?!0===l&&!0===z:!1===l||!1===z?!1:null}function F(l,z){return null!=l&&null!=z?!0===l||!0===z:!0===l||!0===z?!0:null}function Q(l,z){if(null==l)return null;let y=!1;for(const v of z)if(null==v)y=null;else if(l===v){y=!0;break}return y}function e(l,z,y){if(null==l)return null;let v="",N=S.Normal;for(let G=0;G<z.length;G++){const R=z.charAt(G);switch(N){case S.Normal:R===y?N=S.Escaped:v="-[]/{}()*+?.\\^$|".includes(R)?
v+("\\"+R):"%"===R?v+".*":"_"===R?v+".":v+R;break;case S.Escaped:v="-[]/{}()*+?.\\^$|".includes(R)?v+("\\"+R):v+R,N=S.Normal}}return(new RegExp("^"+v+"$","m")).test(l)}function J(l,z,y,v){l=v.getAttribute(l,z);z=y?.get(z);return null==l||"esriFieldTypeDate"!==z?.type&&"date"!==z?.type?null==l||"esriFieldTypeDateOnly"!==z?.type&&"date-only"!==z?.type?null==l||"esriFieldTypeTimeOnly"!==z?.type&&"time-only"!==z?.type?null==l||"esriFieldTypeTimestampOffset"!==z?.type&&"timestamp-offset"!==z?.type?l:new B.SqlTimeStampOffset(l):
K.TimeOnly.fromReader(l):C.DateOnly.fromReader(l):d.convertToExecutingTimeZone(new Date(l),y?.getLuxonTimeZone(z.name)??q.FixedOffsetZone.utcInstance)}const T=new Set(["current_timestamp","current_date","current_time"]);class L{static makeBool(l){return!0===l}static featureValue(l,z,y,v){return J(l,z,y,v)}static equalsNull(l){return null===l}static applyLike(l,z,y){return e(l,z,y)}static ensureArray(l){return a(l)}static applyIn(l,z){return Q(l,z)}static currentDate(l){return C.DateOnly.fromNow(l)}static makeSqlInterval(l,
z,y){return r.SqlInterval.createFromValueAndQualifier(l,z,y)}static convertInterval(l){return l instanceof r.SqlInterval?l.valueInMilliseconds():l}static currentTimestamp(l){return d.convertToExecutingTimeZone(new Date,l)}static compare(l,z,y,v){return n.sqlCompare(z,y,l)}static calculate(l,z,y,v){return f.sqlCalculateFunction(l,z,y,v)}static evaluateTime(l){return d.parseTime(l)}static evaluateTimestamp(l,z,y){return d.parseTimestamp(l,z,y)}static evaluateDate(l,z){return d.parseDate(l,z)}static evaluateFunction(l,
z,y){return A.evaluateFunction(l,z,y)}static lookup(l,z){l=z[l];return void 0===l?null:l}static between(l,z,y){return null==l||null==z[0]||null==z[1]?null:n.sqlCompare(l,z[0],"\x3e\x3d")&&n.sqlCompare(l,z[1],"\x3c\x3d")}static notbetween(l,z,y){return null==l||null==z[0]||null==z[1]?null:n.sqlCompare(l,z[0],"\x3c")||n.sqlCompare(l,z[1],"\x3e")}static ternaryNot(l){return m(l)}static ternaryAnd(l,z){return p(l,z)}static ternaryOr(l,z){return F(l,z)}}class U{constructor(l,z,y="UTC"){this.fieldsIndex=
z;this.timeZone=y;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=t.WhereGrammar.parse(l);const {isStandardized:v,isAggregate:N,referencedFieldNames:G}=this._extractExpressionInfo(z);this._referencedFieldNames=G;this.isStandardized=v;this.isAggregate=N}static convertValueToStorageFormat(l,z=null){if(null===z)return d.isDate(l)?l.getTime():d.isDateTime(l)?l.toMillis():d.isTimestampOffset(l)?l.toStorageFormat():d.isTimeOnly(l)?l.toStorageString():d.isDateOnly(l)?l.toStorageFormat():
l;switch(z){case "date":if(d.isDate(l))return l.getTime();if(d.isDateTime(l))return l.toMillis();if(d.isTimestampOffset(l))return l.toMilliseconds();if(d.isDateOnly(l))return l.toNumber();break;case "date-only":if(d.isDate(l))return C.DateOnly.fromDateJS(l).toString();if(d.isTimestampOffset(l))return C.DateOnly.fromSqlTimeStampOffset(l).toString();if(d.isDateTime(l))return C.DateOnly.fromDateTime(l).toString();break;case "time-only":if(d.isDate(l))return K.TimeOnly.fromDateJS(l).toStorageString();
if(d.isDateTime(l))return K.TimeOnly.fromDateTime(l).toStorageString();if(d.isTimestampOffset(l))return K.TimeOnly.fromSqlTimeStampOffset(l).toStorageString();if(d.isTimeOnly(l))return l.toStorageString();break;case "timestamp-offset":if(d.isDate(l))return B.SqlTimeStampOffset.fromJSDate(l).toStorageFormat();if(d.isDateTime(l))return B.SqlTimeStampOffset.fromDateTime(l).toStorageFormat();if(d.isTimestampOffset(l))return l.toStorageFormat()}return l}static create(l,z,y="UTC"){return new U(l,z,y)}get fieldNames(){return this._referencedFieldNames}testSet(l,
z=P){return!!this._evaluateNode(this.parseTree,null,z,l)}calculateValue(l,z=P){l=this._evaluateNode(this.parseTree,l,z,null);return l instanceof r.SqlInterval?l.valueInMilliseconds()/864E5:l}calculateValueCompiled(l,z=P){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(l,this.parameters,z,this.fieldsIndex,this.timeZone);if(u("esri-csp-restrictions"))return this.calculateValue(l,z);this._compileMe();return this.parseTree._compiledVersion(l,this.parameters,z,this.fieldsIndex,
this.timeZone)}testFeature(l,z=P){return!!this._evaluateNode(this.parseTree,l,z,null)}testFeatureCompiled(l,z=P){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(l,this.parameters,z,this.fieldsIndex,this.timeZone);if(u("esri-csp-restrictions"))return this.testFeature(l,z);this._compileMe();return!!this.parseTree._compiledVersion(l,this.parameters,z,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=
!1;this._visitAll(this.parseTree,l=>{"current-time"===l.type?this._hasDateFunctions=!0:"function"===l.type&&(this._hasDateFunctions=this._hasDateFunctions||T.has(l.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const l=new Set;this._visitAll(this.parseTree,z=>{"function"===z.type&&l.add(z.name.toLowerCase())});return Array.from(l)}getExpressions(){const l=new Map;this._visitAll(this.parseTree,z=>{if("function"===z.type){const y=z.name.toLowerCase();z=z.args.value[0];if("column-reference"===
z.type){z=z.column;const v=`${y}-${z}`;l.has(v)||l.set(v,{aggregateType:y,field:z})}}});return[...l.values()]}getVariables(){const l=new Set;this._visitAll(this.parseTree,z=>{"parameter"===z.type&&l.add(z.value.toLowerCase())});return Array.from(l)}_compileMe(){const l="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",l)).bind(L)}_extractExpressionInfo(l){const z=
[],y=new Set;let v=!0,N=!1;this._visitAll(this.parseTree,G=>{switch(G.type){case "column-reference":var R=l?.get(G.column);let Y;R?R=Y=R.name??"":(Y=G.column,R=Y.toLowerCase());y.has(R)||(y.add(R),z.push(Y));G.column=Y;break;case "function":const {name:ca,args:ja}=G;G=ja.value.length;v&&=A.isStandardized(ca,G);!1===N&&(N=H.isAggregate(ca,G))}});return{referencedFieldNames:Array.from(z),isStandardized:v,isAggregate:N}}_visitAll(l,z){if(null!=l)switch(z(l),l.type){case "when-clause":this._visitAll(l.operand,
z);this._visitAll(l.value,z);break;case "case-expression":for(const y of l.clauses)this._visitAll(y,z);"simple"===l.format&&this._visitAll(l.operand,z);null!==l.else&&this._visitAll(l.else,z);break;case "expression-list":for(const y of l.value)this._visitAll(y,z);break;case "unary-expression":this._visitAll(l.expr,z);break;case "binary-expression":this._visitAll(l.left,z);this._visitAll(l.right,z);break;case "function":this._visitAll(l.args,z)}}evaluateNodeToJavaScript(l){switch(l.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(l.value)+", "+JSON.stringify(l.qualifier)+","+JSON.stringify(l.op)+")";case "case-expression":var z="";if("simple"===l.format){var y=this.evaluateNodeToJavaScript(l.operand);z="( ";for(let v=0;v<l.clauses.length;v++)z+=" (this.compare('\x3d',"+y+","+this.evaluateNodeToJavaScript(l.clauses[v].operand)+") ? ("+this.evaluateNodeToJavaScript(l.clauses[v].value)+") : "}else for(z="( ",y=0;y<l.clauses.length;y++)z+=" this.makeBool("+this.evaluateNodeToJavaScript(l.clauses[y].operand)+
")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(l.clauses[y].value)+") : ";z=null!==l.else?z+this.evaluateNodeToJavaScript(l.else):z+"null";return z+" )";case "parameter":return"this.lookup("+JSON.stringify(l.value.toLowerCase())+",lookups)";case "expression-list":z="[";for(y of l.value)"["!==z&&(z+=","),z+=this.evaluateNodeToJavaScript(y);return z+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(l.expr)+")";case "binary-expression":switch(l.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "IS":if("null"!==l.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")";case "ISNOT":if("null"!==l.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+
")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(l.left)+
","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(l.operator)+
","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)"}throw new w.SqlError(w.SqlErrorCodes.UnsupportedOperator,{operator:l.operator});case "null":case "boolean":case "string":case "number":return JSON.stringify(l.value);case "time":return"this.evaluateTime(JSON.stringify(node.value))";
case "date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case "timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case "current-time":return"date"===l.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(l.column)+",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(l.name)+","+this.evaluateNodeToJavaScript(l.args)+", timeZone)"}throw new w.SqlError(w.SqlErrorCodes.UnsupportedSyntax,
{node:l.type});}_evaluateNode(l,z,y,v){switch(l.type){case "interval":return y=this._evaluateNode(l.value,z,y,v),r.SqlInterval.createFromValueAndQualifier(y,l.qualifier,l.op);case "case-expression":if("simple"===l.format){var N=this._evaluateNode(l.operand,z,y,v);for(var G=0;G<l.clauses.length;G++)if(n.sqlCompare(N,this._evaluateNode(l.clauses[G].operand,z,y,v),"\x3d",this.timeZone))return this._evaluateNode(l.clauses[G].value,z,y,v)}else for(N=0;N<l.clauses.length;N++)if(!0===this._evaluateNode(l.clauses[N].operand,
z,y,v))return this._evaluateNode(l.clauses[N].value,z,y,v);return null!==l.else?this._evaluateNode(l.else,z,y,v):null;case "parameter":return l=this.parameters[l.value.toLowerCase()],d.isDate(l)?q.DateTime.fromJSDate(l):l instanceof g.ArcadeDate?l.toDateTime():l;case "expression-list":N=[];for(var R of l.value)N.push(this._evaluateNode(R,z,y,v));return N;case "unary-expression":return m(this._evaluateNode(l.expr,z,y,v));case "binary-expression":switch(l.operator){case "AND":return p(this._evaluateNode(l.left,
z,y,v),this._evaluateNode(l.right,z,y,v));case "OR":return F(this._evaluateNode(l.left,z,y,v),this._evaluateNode(l.right,z,y,v));case "IS":if("null"!==l.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(l.left,z,y,v);case "ISNOT":if("null"!==l.right.type)throw new w.SqlError(w.SqlErrorCodes.UnsupportedIsRhs);return null!==this._evaluateNode(l.left,z,y,v);case "IN":return N=a(this._evaluateNode(l.right,z,y,v)),Q(this._evaluateNode(l.left,z,y,v),N);case "NOT IN":return N=
a(this._evaluateNode(l.right,z,y,v)),m(Q(this._evaluateNode(l.left,z,y,v),N));case "BETWEEN":return N=this._evaluateNode(l.left,z,y,v),l=this._evaluateNode(l.right,z,y,v),null==N||null==l[0]||null==l[1]?null:n.sqlCompare(N,l[0],"\x3e\x3d",this.timeZone)&&n.sqlCompare(N,l[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return N=this._evaluateNode(l.left,z,y,v),l=this._evaluateNode(l.right,z,y,v),null==N||null==l[0]||null==l[1]?null:n.sqlCompare(N,l[0],"\x3c",this.timeZone)||n.sqlCompare(N,l[1],"\x3e",
this.timeZone);case "LIKE":return e(this._evaluateNode(l.left,z,y,v),this._evaluateNode(l.right,z,y,v),l.escape);case "NOT LIKE":return m(e(this._evaluateNode(l.left,z,y,v),this._evaluateNode(l.right,z,y,v),l.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return n.sqlCompare(this._evaluateNode(l.left,z,y,v),this._evaluateNode(l.right,z,y,v),l.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return f.sqlCalculateFunction(l.operator,
this._evaluateNode(l.left,z,y,v),this._evaluateNode(l.right,z,y,v),this.timeZone)}case "null":case "boolean":case "string":case "number":return l.value;case "date":return l.parsedValue??(l.parsedValue=d.parseDate(l.value,"unknown")),l.parsedValue;case "timestamp":return l.parsedValue??(l.parsedValue=d.parseTimestamp(l.value,"unknown")),l.parsedValue;case "time":return d.parseTime(l.value);case "current-time":return"date"===l.mode?C.DateOnly.fromNow(this.timeZone):d.convertToExecutingTimeZone(new Date,
this.timeZone);case "column-reference":return J(z,l.column,this.fieldsIndex,y);case "data-type":return l.value;case "function":if(this.isAggregate&&H.isAggregate(l.name,l.args.value.length)){z=[];for(N of l.args?.value||[]){R=[];for(G of v||[])R.push(this._evaluateNode(N,G,y,null));z.push(R)}return H.aggregateFunction(l.name,z)}y=this._evaluateNode(l.args,z,y,v);return A.evaluateFunction(l.name,y,this.timeZone)}throw new w.SqlError(w.SqlErrorCodes.UnsupportedSyntax,{node:l.type});}}var S;(function(l){l[l.Normal=
0]="Normal";l[l.Escaped=1]="Escaped"})(S||={});const P={getAttribute(l,z){return(l&&"object"===typeof l.attributes?l.attributes:l)[z]}};c.WhereClause=U;c.defaultAttributeAdapter=P;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(c,g,w,u){function H(r,B,A){return r<B?r-B:r>A?r-A:0}function C(r,B=!0){if(r instanceof u.Zone)return r;if("system"===r.toLowerCase())return"system";
if("utc"===r.toLowerCase())return"UTC";if("unknown"===r.toLowerCase())return w.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(r)){const A=u.FixedOffsetZone.parseSpecifier("UTC"+(r.startsWith("+")||r.startsWith("-")?"":"+")+r);if(A)return A}r=u.IANAZone.create(r);if(!r.isValid){if(B)throw new n(c.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return r}c.ArcadeDateErrorCodes=void 0;(c.ArcadeDateErrorCodes||(c.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";
const f={[c.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class n extends Error{constructor(r,B){super(g.replace(f[r],B));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,n)}}class d{constructor(r){this._date=r;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(r=0,B=1,A=1,K=0,t=0,q=0,a=0,m){if(isNaN(r)||isNaN(B)||isNaN(A)||isNaN(K)||isNaN(t)||isNaN(q)||isNaN(a))return null;const p=
u.DateTime.local(r,B).daysInMonth;r=u.DateTime.fromObject({day:1>A?1:A>p?p:A,year:r,month:1>B?1:12<B?12:B,hour:0>K?0:23<K?23:K,minute:0>t?0:59<t?59:t,second:0>q?0:59<q?59:q,millisecond:0>a?0:999<a?999:a},{zone:C(m)});r=r.plus({months:H(B,1,12),days:H(A,1,p),hours:H(K,0,23),minutes:H(t,0,59),seconds:H(q,0,59),milliseconds:H(a,0,999)});return new d(r)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(r,B){B=
C(B);return r.isUnknownTimeZone||B===w.UnknownTimeZone.instance?d.fromParts(r.year,r.monthJS+1,r.day,r.hour,r.minute,r.second,r.millisecond,B):new d(r._date.setZone(B))}static dateJSToArcadeDate(r){return new d(u.DateTime.fromJSDate(r,{zone:"system"}))}static dateJSAndZoneToArcadeDate(r,B="system"){B=C(B);return new d(u.DateTime.fromJSDate(r,{zone:B}))}static unknownEpochToArcadeDate(r){return new d(u.DateTime.fromMillis(r,{zone:w.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(r){return new d(u.DateTime.fromMillis(r.getTime(),
{zone:w.UnknownTimeZone.instance}))}static epochToArcadeDate(r,B="system"){B=C(B);return new d(u.DateTime.fromMillis(r,{zone:B}))}static dateTimeToArcadeDate(r){return new d(r)}clone(){return new d(this._date)}changeTimeZone(r){r=C(r);return d.dateTimeToArcadeDate(this._date.setZone(r))}static dateTimeAndZoneToArcadeDate(r,B){B=C(B);return r.zone===w.UnknownTimeZone.instance||B===w.UnknownTimeZone.instance?d.fromParts(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond,B):new d(r.setZone(B))}static nowToArcadeDate(r){r=
C(r);return new d(u.DateTime.fromJSDate(new Date,{zone:r}))}static nowUTCToArcadeDate(){return new d(u.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===d.systemTimeZoneCanonicalName}equals(r){return this.isSystem&&r.isSystem?this.toNumber()===r.toNumber():this.isUnknownTimeZone!==r.isUnknownTimeZone?!1:this._date.equals(r._date)}get isUnknownTimeZone(){return this._date.zone===w.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let r=
this._date.weekday;6<r&&(r=0);return r}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const r=this.zone;return"fixed"===r.type?0===r.fixed?"UTC":r.formatOffset(0,"short"):r.name}stringify(){return JSON.stringify(this.toJSDate())}plus(r){return new d(this._date.plus(r))}diff(r,B="milliseconds"){return this._date.diff(r._date,B)[B]}toISODate(){return this._date.toISODate()}toISOString(r){return r?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(r,B){return this._date.toISOTime({suppressMilliseconds:r,
includeOffset:B&&!this.isUnknownTimeZone})}toFormat(r,B){this.isUnknownTimeZone&&(r=r.replaceAll("Z",""));return this._date.toFormat(r,B)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new d(this._date.toUTC())}toLocal(){return new d(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(r){if(!r)return null;
r=u.DateTime.fromISO(r,{setZone:!0});return new d(r)}}c.ArcadeDate=d;c.ArcadeDateError=n;c.arcadeDateErrorMessages=f;c.createDateTimeZone=C;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(c,g){function w(H){return H instanceof g.Zone?H===u.instance?!0:!1:"unknown"===H?.toString().toLowerCase()?!0:!1}class u{}u.instance=new g.IANAZone("Etc/UTC");c.UnknownTimeZone=u;c.adoptTimeZone=function(H,
C){return g.DateTime.fromObject({day:H.day,year:H.year,month:H.month,hour:H.hour,minute:H.minute,second:H.second,millisecond:H.millisecond},{zone:C})};c.isUnknownTimeZone=w;c.substituteUnknownTimezone=function(H){return w(H)?u.instance:H};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(c,g){c.SqlErrorCodes=void 0;(function(f){f.InvalidFunctionParameters="InvalidFunctionParameters";
f.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";f.UnsupportedSqlFunction="UnsupportedSqlFunction";f.UnsupportedOperator="UnsupportedOperator";f.UnsupportedSyntax="UnsupportedSyntax";f.UnsupportedIsRhs="UnsupportedIsRhs";f.UnsupportedIsLhs="UnsupportedIsLhs";f.InvalidDataType="InvalidDataType";f.CannotCastValue="CannotCastValue";f.FunctionNotRecognized="FunctionNotRecognized";f.InvalidTime="InvalidTime";f.InvalidParameterCount="InvalidParameterCount";f.InvalidTimeStamp="InvalidTimeStamp";
f.InvalidDate="InvalidDate";f.InvalidOperator="InvalidOperator";f.IllegalInterval="IllegalInterval";f.YearMonthIntervals="YearMonthIntervals";f.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";f.MissingStatisticParameters="MissingStatisticParameters"})(c.SqlErrorCodes||(c.SqlErrorCodes={}));const w={[c.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[c.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[c.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[c.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[c.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[c.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[c.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[c.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[c.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[c.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[c.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[c.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[c.SqlErrorCodes.IllegalInterval]:"Illegal interval",[c.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[c.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[c.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[c.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[c.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[c.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class u extends Error{constructor(f,n){super(g.replace(w[f],n));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,u)}}c.FeatureSetErrorCodes=void 0;(function(f){f.NeverReach="NeverReach";f.NotImplemented="NotImplemented";f.Cancelled="Cancelled";f.InvalidStatResponse="InvalidStatResponse";f.InvalidRequest="InvalidRequest";f.RequestFailed="RequestFailed";
f.MissingFeatures="MissingFeatures";f.AggregationFieldNotFound="AggregationFieldNotFound";f.DataElementsNotFound="DataElementsNotFound"})(c.FeatureSetErrorCodes||(c.FeatureSetErrorCodes={}));const H={[c.FeatureSetErrorCodes.Cancelled]:"Cancelled",[c.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[c.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[c.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[c.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[c.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[c.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[c.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[c.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class C extends Error{constructor(f,n){super(g.replace(H[f],n));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,C)}}c.FeatureSetError=
C;c.SqlError=u;c.featureSetErrorMessages=H;c.sqlErrorMessages=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(c,g,w,u,H,C){function f(B){if(null===B)return null;let A=0,K=0;for(let t=0;t<B.length;t++){const q=B[t];if(null!==q){if("number"!==typeof q)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);
K++;A+=q}}return 0===K?null:A/B.length}function n(B,A){if(null===B)return null;let K=null,t=null;for(const q of B)B=q,B=q instanceof w.DateOnly?q.toNumber():q instanceof H.TimeOnly?q.toNumber():q instanceof C.DateTime?q.toMillis():q instanceof u.SqlTimeStampOffset?q.toMilliseconds():q,null===K?(K=q,t=B):"max"===A&&null!==t&&null!==B&&t<=B?(K=q,t=B):"min"===A&&null!==t&&null!==B&&t>=B&&(K=q,t=B);return K}function d(B){if(null===B)return null;B=B.filter(t=>null!==t);if(0===B.length)return null;const A=
f(B);if(null===A)return null;let K=0;for(const t of B){if("number"!==typeof t)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);K+=(A-t)**2}return K/(B.length-1)}const r={min:{minParams:1,maxParams:1,evaluate:B=>n(B[0],"min")},max:{minParams:1,maxParams:1,evaluate:B=>n(B[0],"max")},avg:{minParams:1,maxParams:1,evaluate:B=>f(B[0])},sum:{minParams:1,maxParams:1,evaluate:B=>{B=B[0];if(null===B)B=null;else{var A=0;for(let K=0;K<B.length;K++){const t=B[K];if(null!==t){if("number"!==
typeof t)throw new g.SqlError(g.SqlErrorCodes.InvalidValueForAggregateFunction);A+=t}}B=A}return B}},stddev:{minParams:1,maxParams:1,evaluate:B=>{B=B[0];null===B?B=null:(B=d(B),B=null===B?null:Math.sqrt(B));return B}},count:{minParams:1,maxParams:1,evaluate:B=>null==B[0]?null:B[0].length},var:{minParams:1,maxParams:1,evaluate:B=>d(B[0])}};c.aggregateFunction=function(B,A){const K=r[B.toLowerCase()];if(null==K)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(A.length<K.minParams||A.length>
K.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:B.toUpperCase()});return K.evaluate(A)};c.isAggregate=function(B,A){B=r[B.toLowerCase()];return null!=B&&A>=B.minParams&&A<=B.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(c,g,w,u){function H(f){f=f.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let n="";const d=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of f.match(d)||[])switch(r){case "D":n+="d";break;case "DD":n+="dd";break;case "DDD":n+="o";break;case "d":n+="c";break;case "ddd":n+="ccc";break;case "dddd":n+="cccc";break;case "M":n+="L";break;case "MM":n+="LL";break;case "MMM":n+="LLL";break;case "MMMM":n+="LLLL";break;case "YY":n+="yy";
break;case "Y":case "YYYY":n+="yyyy";break;case "Q":n+="q";break;case "X":case "x":n+=r;break;default:n=2<=r.length&&"["===r.slice(0,1)&&"]"===r.slice(-1)?n+`'${r.slice(1,-1)}'`:n+`'${r}'`}return n}class C{constructor(f,n,d){this._year=f;this._month=n;this._day=d;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(f){return f instanceof
C&&f.day===this.day&&f.month===this.month&&f.year===this.year}clone(){return new C(this._year,this._month,this._day)}toDateTime(f){return u.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(f)})}toDateTimeLuxon(f){return u.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:g.createDateTimeZone(f)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(f=
null){if(null===f||""===f)return this.toString();f=H(f);if(!f)return"";const n=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(n).toFormat(f,{locale:w.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const f=this.toDateTime("unknown");return g.ArcadeDate.dateTimeToArcadeDate(f)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(f,n){return C.fromDateTime(this.toUTCDateTime().plus({[f]:n}))}toUTCDateTime(){return u.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(f,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?this.toUTCDateTime().diff(f.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(f){f=u.DateTime.fromMillis(f,{zone:u.FixedOffsetZone.utcInstance});return f.isValid?C.fromParts(f.year,f.month,f.day):null}static fromSeconds(f){f=u.DateTime.fromSeconds(f,{zone:u.FixedOffsetZone.utcInstance});return f.isValid?C.fromParts(f.year,f.month,f.day):null}static fromReader(f){if(!f)return null;f=f.split("-");return 3!==f.length?null:new C(parseInt(f[0],10),parseInt(f[1],
10),parseInt(f[2],10))}static fromParts(f,n,d){f=new C(f,n,d);return!1===f.isValid?null:f}static fromDateJS(f){return C.fromParts(f.getFullYear(),f.getMonth()+1,f.getDay())}static fromDateTime(f){return C.fromParts(f.year,f.month,f.day)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,n=null){if(""===f||null===f)return null;var d=[];if(n)(n=H(n))&&d.push(n);else if(null===n||""===n)return f=u.DateTime.fromISO(f,{setZone:!0}),f.isValid?C.fromParts(f.year,
f.month,f.day):null;for(const r of d)if(d=u.DateTime.fromFormat(f,n??r),d.isValid)return new C(d.year,d.month,d.day);return null}static fromNow(f="system"){f=u.DateTime.fromJSDate(new Date).setZone(g.createDateTimeZone(f));return new C(f.year,f.month,f.day)}}c.DateOnly=C;c.standardizeDateOnlyFormat=H;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(c,g){function w(H){return Number.isNaN(H)||
0===H?H:Math.trunc(H)}class u{constructor(H){this._timeStampOffset=H;this._date=null}toDateTime(){this._date??(this._date=g.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return w(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return w(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return u.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(H){return new u(g.DateTime.fromJSDate(H).toISO({includeOffset:!0}))}static fromDateTime(H){return new u(H.toISO({includeOffset:!0}))}static fromParts(H,
C,f=0,n=0,d=0,r=0,B=0,A=!1,K=0,t=0){H=`${H.toString().padStart(4,"0")}-${C.toString().padStart(2,"0")}-${f.toString().padStart(2,"0")}`;C="";10>r&&(C="0");n=`${n.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${C+r.toString()}`;0!==B&&(n+="."+B.toString().padStart(3,"0"));B=`${A?"-":"+"}${K.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;return new u(H+"T"+n+B)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let H=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});H&&=H.replace(".000","");return H}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(H){H=this.toDateTime().plus(H);return u.fromDateTime(H)}}c.SqlTimeStampOffset=u;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(c,g,w,u){function H(f){if(!f)return"";const n=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let d="";for(const r of f.match(n)||
[])switch(r){case "SSS":d+=r;break;case "A":case "a":d+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":d+=r;break;default:d+=`'${r}'`}return d}class C{constructor(f,n,d,r){this._hour=f;this._minute=n;this._second=d;this._millisecond=r;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(f){return f instanceof C&&f.hour===
this.hour&&f.minute===this.minute&&f.second===this.second&&f.millisecond===this.millisecond}clone(){return new C(this.hour,this.minute,this.second,this.millisecond)}isValid(){return g.isInteger(this.hour)&&g.isInteger(this.minute)&&g.isInteger(this.second)&&g.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(f=null){return null===f||""===f?this.toString():(f=H(f))?u.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(f,{locale:w.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(f,n,d,r){f=new C(f,n,d,r);return f.isValid()?f:null}static fromReader(f){if(!f)return null;f=f.split(":");return 3!==f.length?null:new C(parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],
10),0)}static fromMilliseconds(f){return 864E5<f||0>f?null:new C(Math.floor(f/36E5%24),Math.floor(f/6E4%60),Math.floor(f/1E3%60),Math.floor(f%1E3))}static fromDateJS(f){return new C(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds())}static fromDateTime(f){return new C(f.hour,f.minute,f.second,f.millisecond)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,n=null){if(""===f||null===f)return null;const d=[];if(n)(n=H(n))&&d.push(n);else if(null===
n||""===n)d.push("HH:mm:ss"),d.push("HH:mm:ss.SSS"),d.push("hh:mm:ss a"),d.push("hh:mm:ss.SSS a"),d.push("HH:mm"),d.push("hh:mm a"),d.push("H:mm"),d.push("h:mm a"),d.push("H:mm:ss"),d.push("h:mm:ss a"),d.push("H:mm:ss.SSS"),d.push("h:mm:ss.SSS a");for(const r of d)if(n=u.DateTime.fromFormat(f,r),n.isValid)return new C(n.hour,n.minute,n.second,n.millisecond);return null}plus(f,n){switch(f){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return C.fromDateTime(this.toUTCDateTime().plus({[f]:n}))}return null}toUTCDateTime(){return u.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(f,n){switch(n.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===n?this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}}c.TimeOnly=C;c.standardizeTimeFormat=H;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(c,g){c.cloneGeometry=function(w){if(null==w)return null;const u=w.clone();void 0!==w.cache._geVersion&&(u.cache._geVersion=w.cache._geVersion);return u};c.convertLinearUnitsToCode=function(w){if(null==w)return null;if("number"===typeof w)return w;w=w.toLowerCase();w=w.replaceAll(/\s/g,"");w=w.replaceAll("-","");switch(w){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};c.convertSquareUnitsToCode=
function(w){if(null==w)return null;if("number"===typeof w)return w;w=w.toLowerCase();w=w.replaceAll(/\s/g,"");w=w.replaceAll("-","");switch(w){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};c.isInteger=function(w){return"number"===typeof w&&isFinite(w)&&Math.floor(w)===w};c.sameGeomType=function(w,u){return w===u||"point"===w&&"esriGeometryPoint"===u||"polyline"===w&&"esriGeometryPolyline"===
u||"polygon"===w&&"esriGeometryPolygon"===u||"extent"===w&&"esriGeometryEnvelope"===u||"multipoint"===w&&"esriGeometryMultipoint"===u||"point"===u&&"esriGeometryPoint"===w||"polyline"===u&&"esriGeometryPolyline"===w||"polygon"===u&&"esriGeometryPolygon"===w||"extent"===u&&"esriGeometryEnvelope"===w||"multipoint"===u&&"esriGeometryMultipoint"===w?!0:!1};c.shapeExtent=function(w){if(null==w)return null;switch(w.type){case "polygon":case "multipoint":case "polyline":return w.extent;case "point":return new g({xmin:w.x,
ymin:w.y,xmax:w.x,ymax:w.y,spatialReference:w.spatialReference});case "extent":return w}return null};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(c,g,w,u,H){function C(x,I,M){switch(M){case "+":return x+I;case "-":return x-I;case "*":return x*I;case "/":return x/I}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function f(x,I,M){switch(M){case "+":return I.plus({milliseconds:x.valueInMilliseconds()});case "-":return x.valueInMilliseconds()-I.toMillis()}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function n(x,I,M){switch(M){case "+":return I.plus("milliseconds",x.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function d(x,I,M){switch(M){case "+":return I.plus("milliseconds",x.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function r(x,
I,M){switch(M){case "+":return x.plus("milliseconds",I.valueInMilliseconds());case "-":return x.plus("milliseconds",-1*I.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function B(x,I,M){switch(M){case "+":return I.addMilliseconds(x.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function A(x,I,M){switch(M){case "+":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()+I.valueInMilliseconds());case "-":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()-
I.valueInMilliseconds());case "*":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()*I.valueInMilliseconds());case "/":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()/I.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function K(x,I,M){switch(M){case "+":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()+I);case "-":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()-I);case "*":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()*
I);case "/":return u.SqlInterval.createFromMilliseconds(x.valueInMilliseconds()/I)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function t(x,I,M){switch(M){case "+":return u.SqlInterval.createFromMilliseconds(x+I.valueInMilliseconds());case "-":return u.SqlInterval.createFromMilliseconds(x-I.valueInMilliseconds());case "*":return u.SqlInterval.createFromMilliseconds(x*I.valueInMilliseconds());case "/":return u.SqlInterval.createFromMilliseconds(x/I.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function q(x,I,M){switch(M){case "+":return x.plus("milliseconds",I.valueInMilliseconds());case "-":return x.plus("milliseconds",-1*I.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function a(x,I,M){switch(M){case "+":return x.plus({milliseconds:I.valueInMilliseconds()});case "-":return x.minus({milliseconds:I.valueInMilliseconds()})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function m(x,I,M){switch(M){case "+":return x.addMilliseconds(I.valueInMilliseconds());
case "-":return x.addMilliseconds(-1*I.valueInMilliseconds())}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function p(x,I,M){I*=864E5;switch(M){case "+":return x.plus({milliseconds:I});case "-":return x.minus({milliseconds:I})}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function F(x,I,M){I*=864E5;switch(M){case "+":return x.plus("milliseconds",I);case "-":return x.plus("milliseconds",-1*I)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Q(x,I,M){I*=864E5;switch(M){case "+":return x.plus("milliseconds",
I);case "-":return x.plus("milliseconds",-1*I)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function e(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function J(x,I,M){I*=864E5;switch(M){case "+":return x.addMilliseconds(I);case "-":return x.addMilliseconds(-1*I)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function T(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function L(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function U(x,
I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function S(x,I,M){I=parseFloat(I);if(isNaN(I))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return C(x,I,M)}function P(x,I,M){x=parseFloat(x);if(isNaN(x))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);return C(x,I,M)}function l(x,I,M){switch(M){case "+":return x+I}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function z(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function y(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function v(x,I,M){switch(M){case "-":return x.toDateTimeLuxon(I.zone).diff(I).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function N(x,I,M){switch(M){case "-":return x.toDateTimeLuxon(I.toDateTime().zone).diff(I.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function G(x,I,M){switch(M){case "-":return x.toDateTimeLuxon("UTC").diff(I.toDateTimeLuxon("UTC")).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function R(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function Y(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ca(x,I,M){switch(M){case "-":return x.toDateTime().diff(I.toDateTimeLuxon(x.toDateTime().zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ja(x,I,M){switch(M){case "-":return x.toDateTime().diff(I).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function na(x,I,M){switch(M){case "-":return x.toDateTime().diff(I.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function sa(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ua(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ta(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function wa(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function xa(x,I,M){switch(M){case "-":return x.diff(I).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Da(x,I,M){switch(M){case "-":return x.diff(I.toDateTimeLuxon(x.zone)).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function Ia(x,I,M){switch(M){case "-":return x.diff(I.toDateTime()).as("days")}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Ra(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Na(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Sa(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function Va(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function h(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}function E(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function X(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function aa(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}function ha(x,I,M){throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}c.calculateDateOnlyAndDateOnly=G;c.calculateDateOnlyAndDateTime=v;c.calculateDateOnlyAndNumber=F;c.calculateDateOnlyAndSqlInterval=q;c.calculateDateOnlyAndString=Na;c.calculateDateOnlyAndTimeOnly=R;c.calculateDateOnlyAndTimestamp=
N;c.calculateDateTimeAndDateOnly=Da;c.calculateDateTimeAndDateTime=xa;c.calculateDateTimeAndNumber=p;c.calculateDateTimeAndSqlInterval=a;c.calculateDateTimeAndString=Va;c.calculateDateTimeAndTimeOnly=Ra;c.calculateDateTimeAndTimestamp=Ia;c.calculateNumberAndDateOnly=U;c.calculateNumberAndDateTime=e;c.calculateNumberAndNumber=C;c.calculateNumberAndSqlInterval=t;c.calculateNumberAndString=S;c.calculateNumberAndTimeOnly=L;c.calculateNumberAndTimestamp=T;c.calculateSqlIntervalAndDateOnly=d;c.calculateSqlIntervalAndDateTime=
f;c.calculateSqlIntervalAndNumber=K;c.calculateSqlIntervalAndSqlInterval=A;c.calculateSqlIntervalAndString=z;c.calculateSqlIntervalAndTimeOnly=n;c.calculateSqlIntervalAndTimestamp=B;c.calculateStringAndDateOnly=X;c.calculateStringAndDateTime=aa;c.calculateStringAndNumber=P;c.calculateStringAndSqlInterval=y;c.calculateStringAndString=l;c.calculateStringAndTimeOnly=E;c.calculateStringAndTimestamp=ha;c.calculateTimeOnlyAndDateOnly=ua;c.calculateTimeOnlyAndDateTime=sa;c.calculateTimeOnlyAndNumber=Q;c.calculateTimeOnlyAndSqlInterval=
r;c.calculateTimeOnlyAndString=Sa;c.calculateTimeOnlyAndTimeOnly=wa;c.calculateTimeOnlyAndTimestamp=ta;c.calculateTimestampAndDateOnly=ca;c.calculateTimestampAndDateTime=ja;c.calculateTimestampAndNumber=J;c.calculateTimestampAndSqlInterval=m;c.calculateTimestampAndString=h;c.calculateTimestampAndTimeOnly=Y;c.calculateTimestampAndTimestamp=na;c.sqlCalculateFunction=function(x,I,M,W){if("||"===x)return H.evaluateFunction("concat",[I,M],W);if(null===I||null===M)return null;if(w.isNumber(I)){if(w.isNumber(M))return C(I,
M,x);if(w.isSqlInterval(M))return t(I,M,x);if(w.isTimeOnly(M))return L();if(w.isDateOnly(M))return U();if(w.isTimestampOffset(M))return T();if(w.isDateTime(M))return e();if(w.isString(M))return S(I,M,x)}else if(w.isDateOnly(I)){if(w.isNumber(M))return F(I,M,x);if(w.isSqlInterval(M))return q(I,M,x);if(w.isTimeOnly(M))return R();if(w.isDateOnly(M))return G(I,M,x);if(w.isTimestampOffset(M))return N(I,M,x);if(w.isDateTime(M))return v(I,M,x);if(w.isString(M))return Na()}else if(w.isTimeOnly(I)){if(w.isNumber(M))return Q(I,
M,x);if(w.isSqlInterval(M))return r(I,M,x);if(w.isTimeOnly(M))return wa();if(w.isDateOnly(M))return ua();if(w.isTimestampOffset(M))return ta();if(w.isDateTime(M))return sa();if(w.isString(M))return Sa()}else if(w.isSqlInterval(I)){if(w.isNumber(M))return K(I,M,x);if(w.isSqlInterval(M))return A(I,M,x);if(w.isTimeOnly(M))return n(I,M,x);if(w.isDateOnly(M))return d(I,M,x);if(w.isTimestampOffset(M))return B(I,M,x);if(w.isDateTime(M))return f(I,M,x);if(w.isString(M))return z()}else if(w.isDateTime(I)){if(w.isNumber(M))return p(I,
M,x);if(w.isSqlInterval(M))return a(I,M,x);if(w.isTimeOnly(M))return Ra();if(w.isDateOnly(M))return Da(I,M,x);if(w.isTimestampOffset(M))return Ia(I,M,x);if(w.isDateTime(M))return xa(I,M,x);if(w.isString(M))return Va()}else if(w.isTimestampOffset(I)){if(w.isNumber(M))return J(I,M,x);if(w.isSqlInterval(M))return m(I,M,x);if(w.isTimeOnly(M))return Y();if(w.isDateOnly(M))return ca(I,M,x);if(w.isTimestampOffset(M))return na(I,M,x);if(w.isDateTime(M))return ja(I,M,x);if(w.isString(M))return h()}else if(w.isString(I)){if(w.isNumber(M))return P(I,
M,x);if(w.isSqlInterval(M))return y();if(w.isTimeOnly(M))return E();if(w.isDateOnly(M))return X();if(w.isTimestampOffset(M))return ha();if(w.isDateTime(M))return aa();if(w.isString(M))return l(I,M,x)}throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,g,w,u,H,C,f,n){function d(p,F,Q){Q=t.exec(p);if(null!==Q){const [,e,J,T,L,U,S,P]=Q;p=n.DateTime.fromObject({year:parseInt(e,10),month:parseInt(J,10),day:parseInt(T,10),hour:parseInt(L,10),minute:parseInt(U,10),second:parseInt(S,10),millisecond:P?parseInt(P.replace(".",""),10):0},{zone:f.substituteUnknownTimezone(F)});if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}Q=q.exec(p);if(null!==Q){const [,e,J,T,L,U,S,P,l,z,y]=Q;p=H.SqlTimeStampOffset.fromParts(parseInt(e,
10),parseInt(J,10),parseInt(T,10),parseInt(L,10),parseInt(U,10),parseInt(S,10),P?parseInt(P.replace(".",""),10):0,"-"===l,parseInt(z,10),parseInt(y,10));if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}Q=a.exec(p);if(null!==Q){const [,e,J,T,L,U,S,P,l]=Q;p=H.SqlTimeStampOffset.fromParts(parseInt(e,10),parseInt(J,10),parseInt(T,10),parseInt(L,10),parseInt(U,10),0,0,"-"===S,parseInt(P,10),parseInt(l,10));if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);
return p}Q=m.exec(p);if(null!==Q){const [,e,J,T,L,U]=Q;p=n.DateTime.fromObject({year:parseInt(e,10),month:parseInt(J,10),day:parseInt(T,10),hour:parseInt(L,10),minute:parseInt(U,10),second:0},{zone:f.substituteUnknownTimezone(F)});if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}Q=K.exec(p);if(null!==Q){const [,e,J,T]=Q;p=n.DateTime.fromObject({year:parseInt(e,10),month:parseInt(J,10),day:parseInt(T,10),hour:0,minute:0,second:0},{zone:f.substituteUnknownTimezone(F)});
if(!1===p.isValid)throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);return p}throw new g.SqlError(g.SqlErrorCodes.InvalidTimeStamp);}const r=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,B=/^(\d{1,2}):(\d{1,2})$/,A=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,K=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,t=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,q=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,
m=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;c.convertToExecutingTimeZone=function(p,F){if(F instanceof n.Zone)return F===f.UnknownTimeZone.instance?n.DateTime.fromMillis(p.getTime(),{zone:f.UnknownTimeZone.instance}):n.DateTime.fromJSDate(p,{zone:F});switch(F){case "system":case "local":case null:return n.DateTime.fromJSDate(p);default:return"unknown"===F?.toLowerCase()?n.DateTime.fromMillis(p.getTime(),{zone:f.UnknownTimeZone.instance}):n.DateTime.fromJSDate(p,{zone:F})}};c.isDate=function(p){return p instanceof
Date};c.isDateOnly=function(p){return p instanceof w.DateOnly};c.isDateTime=function(p){return p instanceof n.DateTime};c.isNumber=function(p){return"number"===typeof p};c.isSqlInterval=function(p){return p instanceof u.SqlInterval};c.isString=function(p){return"string"===typeof p||p instanceof String};c.isTimeOnly=function(p){return p instanceof C.TimeOnly};c.isTimestampOffset=function(p){return p instanceof H.SqlTimeStampOffset};c.parseDate=function(p,F){const Q=K.exec(p);if(null===Q)try{return d(p,
F)}catch{throw new g.SqlError(g.SqlErrorCodes.InvalidDate);}const [,e,J,T]=Q;p=w.DateOnly.fromParts(parseInt(e,10),parseInt(J,10),parseInt(T,10));if(null===p)throw new g.SqlError(g.SqlErrorCodes.InvalidDate);return p};c.parseTime=function(p){let F=r.exec(p);if(null!==F){const [,Q,e,J]=F;p=C.TimeOnly.fromParts(parseInt(Q,10),parseInt(e,10),parseInt(J,10),0);if(null!==p)return p;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}F=B.exec(p);if(null!==F){const [,Q,e]=F;p=C.TimeOnly.fromParts(parseInt(Q,
10),parseInt(e,10),0,0);if(null!==p)return p;throw new g.SqlError(g.SqlErrorCodes.InvalidTime);}F=A.exec(p);if(null!==F){const [,Q,e,J,T]=F;p=C.TimeOnly.fromParts(parseInt(Q,10),parseInt(e,10),parseInt(J,10),parseInt(T,10));if(null!==p)return p}throw new g.SqlError(g.SqlErrorCodes.InvalidTime);};c.parseTimestamp=d;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(c,g){class w{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(u){if(null!==u.precision||null!==u.secondary)throw new g.SqlError(g.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(u,H){H.includes(".")?(H=H.split("."),u.second=parseFloat(H[0]),u.millis=parseInt(H[1],10)):u.second=parseFloat(H)}static createFromMilliseconds(u){const H=new w;H.second=u/1E3;return H}static createFromValueAndQualifier(u,H,C){let f=null;const n=new w;n.op="-"===
C?"-":"+";if("interval-period"===H.type){w._fixDefaults(H);C=RegExp("^[0-9]{1,}$");if("year"===H.period||"month"===H.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);if("second"===H.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(u))w._parseSecondsComponent(n,u);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);else if(C.test(u))n[H.period]=parseFloat(u);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}else{w._fixDefaults(H.start);w._fixDefaults(H.end);if("year"===
H.start.period||"month"===H.start.period||"year"===H.end.period||"month"===H.end.period)throw new g.SqlError(g.SqlErrorCodes.YearMonthIntervals);switch(H.start.period){case "day":switch(H.end.period){case "hour":f=RegExp("^[0-9]{1,} [0-9]{1,}$");if(f.test(u))n[H.start.period]=parseFloat(u.split(" ")[0]),n[H.end.period]=parseFloat(u.split(" ")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "minute":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(f.test(u))n[H.start.period]=
parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),n.hour=parseFloat(u[0]),n.minute=parseFloat(u[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(u))n[H.start.period]=parseFloat(u.split(" ")[0]),u=u.split(" ")[1].split(":"),n.hour=parseFloat(u[0]),n.minute=parseFloat(u[1]),w._parseSecondsComponent(n,u[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(H.end.period){case "minute":f=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(f.test(u))n.hour=parseFloat(u.split(":")[0]),n.minute=parseFloat(u.split(":")[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(u))u=u.split(":"),n.hour=parseFloat(u[0]),n.minute=parseFloat(u[1]),w._parseSecondsComponent(n,u[2]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(H.end.period){case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(u))u=u.split(":"),n.minute=parseFloat(u[0]),w._parseSecondsComponent(n,u[1]);else throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}break;default:throw new g.SqlError(g.SqlErrorCodes.IllegalInterval);}}return n}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}c.SqlInterval=w;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(c,g,w,u,H,C,f,n){function d(a){return"string"===typeof a||a instanceof String}function r(a){return C.isDate(a)||C.isDateOnly(a)||
C.isDateTime(a)||C.isTimeOnly(a)||C.isTimestampOffset(a)?!1:!0}function B(a){return C.isDateOnly(a)||C.isTimeOnly(a)?a.toString():C.isTimestampOffset(a)?a.toSQLValue():C.isDateTime(a)?0===a.millisecond?a.toFormat("yyyy-LL-dd HH:mm:ss"):a.toSQL({includeOffset:!1}):C.isDate(a)?B(n.DateTime.fromJSDate(a)):a.toString()}function A(a){if(C.isDate(a))return u.DateOnly.fromDateJS(a);if(C.isDateTime(a))return u.DateOnly.fromParts(a.year,a.month,a.day);if(C.isDateOnly(a))return a;if(C.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(C.isTimestampOffset(a)&&null===u.DateOnly.fromParts(a.year,a.month,a.day))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(d(a)&&(a=u.DateOnly.fromReader(a),null!==a&&a.isValid))return a;throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function K(a,m,p){if(C.isDate(a))return C.convertToExecutingTimeZone(a,m);if(C.isDateTime(a))return a;if(C.isDateOnly(a))return a.toDateTimeLuxon("unknown");if(C.isTimeOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(C.isTimestampOffset(a))return a;
if(d(a))return C.parseTimestamp(a,"unknown",p);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}function t(a){if(C.isDate(a))return f.TimeOnly.fromDateJS(a);if(C.isDateTime(a))return f.TimeOnly.fromDateTime(a);if(C.isDateOnly(a))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);if(C.isTimeOnly(a))return a;if(C.isTimestampOffset(a))return f.TimeOnly.fromSqlTimeStampOffset(a);if(d(a))return C.parseTime(a);throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);}const q={extract:{minParams:2,
maxParams:2,evaluate:([a,m])=>{if(null==m)return null;if(C.isDate(m))switch(a.toUpperCase()){case "SECOND":return m.getSeconds();case "MINUTE":return m.getMinutes();case "HOUR":return m.getHours();case "DAY":return m.getDate();case "MONTH":return m.getMonth()+1;case "YEAR":return m.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(C.isDateTime(m))switch(a.toUpperCase()){case "SECOND":return m.second;case "MINUTE":return m.minute;case "HOUR":return m.hour;case "DAY":return m.day;
case "MONTH":return m.month;case "YEAR":return m.year}else if(C.isDateOnly(m))switch(a.toUpperCase()){case "DAY":return m.day;case "MONTH":return m.month;case "YEAR":return m.year}else if(C.isTimeOnly(m))switch(a.toUpperCase()){case "SECOND":return m.second;case "MINUTE":return m.minute;case "HOUR":return m.hour}else if(C.isTimestampOffset(m))switch(a.toUpperCase()){case "SECOND":return m.second;case "MINUTE":return m.minute;case "HOUR":return m.hour;case "DAY":return m.day;case "MONTH":return m.month;
case "YEAR":return m.year;case "TIMEZONE_HOUR":return m.timezoneOffsetHour;case "TIMEZONE_MINUTE":return m.timezoneOffsetMinutes}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:a=>{if(2===a.length){const [m,p]=a;return null==m||null==p?null:m.toString().substring(p-1)}if(3===a.length){const [m,p,F]=a;return null==m||null==p||null==F?null:0>=F?"":m.toString().substring(p-1,p+F-1)}}},position:{minParams:2,maxParams:2,
evaluate:([a,m])=>null==a||null==m?null:m.indexOf(a)+1},trim:{minParams:2,maxParams:3,evaluate:a=>{var m=3===a.length,p=m?a[1]:" ";m=m?a[2]:a[1];if(null==p||null==m)return null;p=`(${w.escapeRegExpString(p)})`;switch(a[0]){case "BOTH":return m.replaceAll(new RegExp(`^${p}*|${p}*$`,"g"),"");case "LEADING":return m.replaceAll(new RegExp(`^${p}*`,"g"),"");case "TRAILING":return m.replaceAll(new RegExp(`${p}*$`,"g"),"")}throw new g.SqlError(g.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.abs(a[0])},ceiling:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.ceil(a[0])},floor:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.floor(a[0])},log:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])},log10:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.log(a[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sin(a[0])},cos:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.cos(a[0])},tan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.tan(a[0])},asin:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.asin(a[0])},acos:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.acos(a[0])},atan:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.atan(a[0])},sign:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:0<a[0]?1:0>a[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]**a[1]},mod:{minParams:2,
maxParams:2,evaluate:a=>null==a[0]||null==a[1]?null:a[0]%a[1]},round:{minParams:1,maxParams:2,evaluate:a=>{const m=a[0];a=2===a.length?10**a[1]:1;return null==m?null:Math.round(m*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:a=>null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))},char_length:{minParams:1,maxParams:1,evaluate:a=>d(a[0])?a[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:a=>{let m="";for(let p=0;p<a.length;p++){if(null==a[p])return null;
m+=a[p].toString()}return m}},lower:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:a[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:a=>{for(const m of a)if(null!==m)return m;return null}},cosh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.cosh(a[0])},sinh:{minParams:1,maxParams:1,evaluate:a=>null==a[0]?null:Math.sinh(a[0])},tanh:{minParams:1,maxParams:1,evaluate:a=>
null==a[0]?null:Math.tanh(a[0])},nullif:{minParams:2,maxParams:2,evaluate:(a,m)=>H.sqlCompare(a[0],a[1],"\x3d")?null:a[0]},cast:{minParams:2,maxParams:2,evaluate:(a,m)=>{const p=a[0];a=a[1];if(null===p)return null;switch(a.type){case "integer":if(!r(p))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);m=parseInt(p,10);if(isNaN(m))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;case "smallint":if(!r(p))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);m=parseInt(p,10);if(isNaN(m))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);
if(32767<m||-32767>m)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;case "float":case "real":if(!r(p))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);m=parseFloat(p);if(isNaN(m))throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;case "time":return t(p);case "date":return A(p);case "timestamp":return K(p,m,!0===a.withtimezone);case "varchar":m=B(p);if(m.length>a.size)throw new g.SqlError(g.SqlErrorCodes.CannotCastValue);return m;default:throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);
}}}};c.evaluateFunction=function(a,m,p){const F=q[a.toLowerCase()];if(null==F)throw new g.SqlError(g.SqlErrorCodes.FunctionNotRecognized);if(m.length<F.minParams||m.length>F.maxParams)throw new g.SqlError(g.SqlErrorCodes.InvalidParameterCount,{name:a.toUpperCase()});return F.evaluate(m,p)};c.isStandardized=function(a,m){a=q[a.toLowerCase()];return null!=a&&m>=a.minParams&&m<=a.maxParams};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(c,g,w,u,H,C){function f(a){return w.isDateTime(a)||w.isTimestampOffset(a)?!0:!1}function n(a){return w.isDateTime(a)||w.isDateOnly(a)||w.isTimestampOffset(a)||w.isTimeOnly(a)?!0:!1}function d(a){if(w.isDateTime(a))return a.toMillis();if(w.isDateOnly(a))return a.toNumber();if(w.isTimestampOffset(a))return a.toMilliseconds();throw new g.SqlError(g.SqlErrorCodes.InvalidDataType);}function r(a,m,p){switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<
m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function B(a,m,p){const F=parseFloat(m);if(!isNaN(F))return r(a,F,p);a=a.toString();switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function A(a,m,p){const F=parseFloat(a);if(!isNaN(F))return r(F,m,p);m=m.toString();switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<
m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function K(a,m,p){switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=m;case "\x3c\x3d":return a<=m}}function t(a,m,p){a instanceof u.SqlTimeStampOffset&&(a=a.toDateTime());m instanceof u.SqlTimeStampOffset&&(m=m.toDateTime());a=q(a);m=q(m);switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=
m;case "\x3c\x3d":return a<=m}}function q(a){return 321408E5*a.year+26784E5*a.month+864E5*a.day+36E5*a.hour+6E4*a.minute+1E3*a.second+a.millisecond}c.dateValueInMilliseconds=d;c.isDateOrTimeValue=n;c.isDateTimeComparableValue=f;c.sqlCompare=function(a,m,p,F){if(null==a||null==m)return null;if(w.isNumber(a)){if(w.isNumber(m))return r(a,m,p);if(w.isString(m))return B(a,m,p);if(n(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
}else if(w.isString(a)){if(w.isNumber(m))return A(a,m,p);if(w.isString(m))return K(a,m,p);if(w.isDateTime(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isTimestampOffset(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(w.isDateTime(a)){if(f(m)){if(a instanceof C.DateTime&&H.isUnknownTimeZone(a.zone)){if(m instanceof C.DateTime&&
!1===H.isUnknownTimeZone(m.zone)||m instanceof u.SqlTimeStampOffset)return t(a,m,p)}else if(m instanceof C.DateTime&&H.isUnknownTimeZone(m.zone)&&(a instanceof C.DateTime&&!1===H.isUnknownTimeZone(a.zone)||a instanceof u.SqlTimeStampOffset))return t(a,m,p);return r(d(a),d(m),p)}if(w.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(m))return m=m.toDateTimeLuxon(a.zone),a=a.startOf("day"),r(a.toMillis(),m.toMillis(),p);if(w.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(w.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(w.isDateOnly(a)){if(w.isTimestampOffset(m))return a=a.toDateTimeLuxon(m.toDateTime().zone),m=m.startOfDay(),r(a.toMillis(),m.toMilliseconds(),p);if(w.isDateTime(m))return a=a.toDateTimeLuxon(m.zone),m=m.startOf("day"),r(a.toMillis(),m.toMillis(),p);if(w.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(m))return r(a.toNumber(),m.toNumber(),p);if(w.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);
if(w.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(w.isTimeOnly(a)){if(w.isTimeOnly(m))return r(a.toNumber(),m.toNumber(),p);if(w.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(f(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}else if(w.isTimestampOffset(a)){if(f(m))return m instanceof C.DateTime&&
H.isUnknownTimeZone(m.zone)?t(a,m,p):r(d(a),d(m),p);if(w.isString(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isDateOnly(m))return m=m.toDateTimeLuxon(a.toDateTime().zone),a=a.startOfDay(),r(a.toMilliseconds(),m.toMillis(),p);if(w.isTimeOnly(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);if(w.isNumber(m))throw new g.SqlError(g.SqlErrorCodes.InvalidOperator);}switch(p){case "\x3c\x3e":return a!==m;case "\x3d":return a===m;case "\x3e":return a>m;case "\x3c":return a<m;case "\x3e\x3d":return a>=
m;case "\x3c\x3d":return a<=m}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(c,g){var w={exports:{}};(function(C){(function(f,n){C.exports&&(C.exports=n())})(g.commonjsGlobal,function(){function f(d,r,B,A){d=Error.call(this,d);Object.setPrototypeOf&&Object.setPrototypeOf(d,f.prototype);d.expected=r;d.found=B;d.location=A;d.name="SyntaxError";return d}function n(d,r,B){B=B||" ";if(d.length>
r)return d;r-=d.length;B+=B.repeat(r);return d+B.slice(0,r)}(function(d,r){function B(){this.constructor=d}B.prototype=r.prototype;d.prototype=new B})(f,Error);f.prototype.format=function(d){var r="Error: "+this.message;if(this.location){var B=null,A;for(A=0;A<d.length;A++)if(d[A].source===this.location.source){B=d[A].text.split(/\r\n|\n|\r/g);break}d=this.location.start;A=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(d):d;var K=this.location.source+
":"+A.line+":"+A.column;if(B){var t=this.location.end,q=n("",A.line.toString().length," ");B=B[d.line-1];t=(d.line===t.line?t.column:B.length+1)-d.column||1;r+="\n --\x3e "+K+"\n"+q+" |\n"+A.line+" | "+B+"\n"+q+" | "+n("",d.column-1," ")+n("",t,"^")}else r+="\n at "+K}return r};f.buildMessage=function(d,r){function B(a){return a.charCodeAt(0).toString(16).toUpperCase()}function A(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+B(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+B(m)})}function K(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(m){return"\\x0"+B(m)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(m){return"\\x"+B(m)})}function t(a){return q[a.type](a)}var q={literal:function(a){return'"'+
A(a.text)+'"'},class:function(a){var m=a.parts.map(function(p){return Array.isArray(p)?K(p[0])+"-"+K(p[1]):K(p)});return"["+(a.inverted?"^":"")+m.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){a=a.map(t);var m,p;a.sort();if(0<a.length){for(p=m=1;m<a.length;m++)a[m-1]!==a[m]&&(a[p]=a[m],p++);a.length=p}switch(a.length){case 1:return a[0];case 2:return a[0]+" or "+a[1];default:return a.slice(0,
-1).join(", ")+", or "+a[a.length-1]}}(d)+" but "+(r?'"'+A(r)+'"':"end of input")+" found."};return{SyntaxError:f,parse:function(d,r){function B(D,O){O=void 0!==O?O:q(ma,k);throw new f(D,null,null,O);}function A(D,O){return{type:"literal",text:D,ignoreCase:O}}function K(D,O,V){return{type:"class",parts:D,inverted:O,ignoreCase:V}}function t(D){var O=Zb[D],V;if(!O){for(V=D-1;!Zb[V];)V--;O=Zb[V];for(O={line:O.line,column:O.column};V<D;)10===d.charCodeAt(V)?(O.line++,O.column=1):O.column++,V++;Zb[D]=
O}return O}function q(D,O,V){var da=t(D),pa=t(O);D={source:Mb,start:{offset:D,line:da.line,column:da.column},end:{offset:O,line:pa.line,column:pa.column}};V&&Mb&&"function"===typeof Mb.offset&&(D.start=Mb.offset(D.start),D.end=Mb.offset(D.end));return D}function a(D){k<eb||(k>eb&&(eb=k,zc=[]),zc.push(D))}function m(){var D=k;ka();var O=F();O!==b?(ka(),ma=D,D=O):(k=D,D=b);return D}function p(){var D=k;var O=F();if(O!==b){var V=[];var da=k;var pa=ka();var za=Wa();if(za!==b){var Ea=ka();var Fa=F();Fa!==
b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)}else k=da,da=b;for(;da!==b;)V.push(da),da=k,pa=ka(),za=Wa(),za!==b?(Ea=ka(),Fa=F(),Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)):(k=da,da=b);ma=D;D={type:"expression-list"};O=[O];for(da=0;da<V.length;da++)O.push(V[da][3]);D.value=O}else k=D,D=b;return D}function F(){var D=k;var O=Q();if(O!==b){var V=[];var da=k;var pa=ka();var za=M();if(za!==b){var Ea=ka();var Fa=Q();Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)}else k=da,da=b;for(;da!==b;)V.push(da),da=k,pa=ka(),za=M(),za!==
b?(Ea=ka(),Fa=Q(),Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)):(k=da,da=b);ma=D;D=nb(O,V)}else k=D,D=b;return D}function Q(){var D=k;var O=e();if(O!==b){var V=[];var da=k;var pa=ka();var za=I();if(za!==b){var Ea=ka();var Fa=e();Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)}else k=da,da=b;for(;da!==b;)V.push(da),da=k,pa=ka(),za=I(),za!==b?(Ea=ka(),Fa=e(),Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)):(k=da,da=b);ma=D;D=nb(O,V)}else k=D,D=b;return D}function e(){var D=k;var O=x();if(O===b){O=k;if(33===d.charCodeAt(k)){var V=
Nd;k++}else V=b,0===fa&&a(Od);if(V!==b){var da=k;fa++;if(61===d.charCodeAt(k)){var pa=Sc;k++}else pa=b,0===fa&&a(Tc);fa--;pa===b?da=void 0:(k=da,da=b);da!==b?O=V=[V,da]:(k=O,O=b)}else k=O,O=b}O!==b?(V=ka(),da=e(),da!==b?(ma=D,D={type:"unary-expression",operator:"NOT",expr:da}):(k=D,D=b)):(k=D,D=b);if(D===b){O=k;D=U();if(D!==b){ka();V=k;da=[];pa=k;var za=ka();var Ea=J();if(Ea!==b){var Fa=ka();var ob=U();ob!==b?pa=za=[za,Ea,Fa,ob]:(k=pa,pa=b)}else k=pa,pa=b;if(pa!==b)for(;pa!==b;)da.push(pa),pa=k,za=
ka(),Ea=J(),Ea!==b?(Fa=ka(),ob=U(),ob!==b?pa=za=[za,Ea,Fa,ob]:(k=pa,pa=b)):(k=pa,pa=b);else da=b;da!==b&&(ma=V,da={type:"arithmetic",tail:da});V=da;V===b&&(V=k,da=L(),da!==b?(ka(),pa=Ja(),pa!==b?(ka(),pa=p(),pa!==b?(ka(),za=Ka(),za!==b?(ma=V,V={op:da,right:pa}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,da=L(),da!==b?(ka(),pa=Ja(),pa!==b?(ka(),pa=Ka(),pa!==b?(ma=V,V={op:da,right:{type:"expression-list",value:[]}}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,da=L(),da!==b?(ka(),pa=ca(),
pa!==b?(ma=V,V={op:da,right:pa}):(k=V,V=b)):(k=V,V=b))),V===b&&(V=k,za=x(),za!==b?(ka(),da=W(),da!==b?(ka(),pa=U(),pa!==b?(ka(),Ea=I(),Ea!==b?(ka(),za=U(),za!==b?(ma=V,V={op:"NOT"+da,right:{type:"expression-list",value:[pa,za]}}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,za=W(),za!==b?(ka(),da=U(),da!==b?(ka(),pa=I(),pa!==b?(ka(),Ea=U(),Ea!==b?(ma=V,V={op:za,right:{type:"expression-list",value:[da,Ea]}}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)),V===b&&(V=k,da=aa(),da!==
b?(ka(),pa=x(),pa!==b?(ka(),pa=U(),pa!==b?(ma=V,V={op:da+"NOT",right:pa}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,da=aa(),da!==b?(ka(),pa=U(),pa!==b?(ma=V,V={op:da,right:pa}):(k=V,V=b)):(k=V,V=b)),V===b&&(V=k,da=T(),da!==b?(ka(),pa=wa(),pa!==b?(ka(),za=k,d.substr(k,6).toLowerCase()===Pd?(Ea=d.substr(k,6),k+=6):(Ea=b,0===fa&&a(Qd)),Ea!==b?(Ea=k,fa++,Fa=N(),fa--,Fa===b?Ea=void 0:(k=Ea,Ea=b),Ea!==b?(ma=za,za="ESCAPE"):(k=za,za=b)):(k=za,za=b),za!==b?(ka(),za=xa(),za!==b?(ma=V,V={op:da,right:pa,escape:za.value}):
(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,da=T(),da!==b?(ka(),pa=wa(),pa!==b?(ma=V,V={op:da,right:pa,escape:""}):(k=V,V=b)):(k=V,V=b))))));V===b&&(V=null);ma=O;O=V;""==O||void 0==O||null==O?O=D:(V=null,O=V="arithmetic"==O.type?nb(D,O.tail):Nb(O.op,D,O.right,O.escape))}else k=O,O=b;D=O}return D}function J(){if(d.substr(k,2)===Uc){var D=Uc;k+=2}else D=b,0===fa&&a(Rd);D===b&&(62===d.charCodeAt(k)?(D=Sd,k++):(D=b,0===fa&&a(Td)),D===b&&(d.substr(k,2)===Vc?(D=Vc,k+=2):(D=b,0===fa&&a(Ud)),D===
b&&(d.substr(k,2)===Wc?(D=Wc,k+=2):(D=b,0===fa&&a(Vd)),D===b&&(60===d.charCodeAt(k)?(D=Wd,k++):(D=b,0===fa&&a(Xd)),D===b&&(61===d.charCodeAt(k)?(D=Sc,k++):(D=b,0===fa&&a(Tc)),D===b&&(d.substr(k,2)===Xc?(D=Xc,k+=2):(D=b,0===fa&&a(Yd))))))));return D}function T(){var D;var O=D=k;var V=x();if(V!==b){var da=ka();var pa=ha();pa!==b?O=V=[V,da,pa]:(k=O,O=b)}else k=O,O=b;O!==b&&(ma=D,O=O[0]+" "+O[2]);D=O;D===b&&(D=ha());return D}function L(){var D;var O=D=k;var V=x();if(V!==b){var da=ka();var pa=X();pa!==
b?O=V=[V,da,pa]:(k=O,O=b)}else k=O,O=b;O!==b&&(ma=D,O=O[0]+" "+O[2]);D=O;D===b&&(D=X());return D}function U(){var D=k;var O=P();if(O!==b){var V=[];var da=k;var pa=ka();var za=S();if(za!==b){var Ea=ka();var Fa=P();Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)}else k=da,da=b;for(;da!==b;)V.push(da),da=k,pa=ka(),za=S(),za!==b?(Ea=ka(),Fa=P(),Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)):(k=da,da=b);ma=D;D=nb(O,V)}else k=D,D=b;return D}function S(){if(43===d.charCodeAt(k)){var D=Ac;k++}else D=b,0===fa&&a(Bc);D===
b&&(45===d.charCodeAt(k)?(D=Cc,k++):(D=b,0===fa&&a(Dc)),D===b&&(d.substr(k,2)===Yc?(D=Yc,k+=2):(D=b,0===fa&&a(Zd))));return D}function P(){var D=k;var O=z();if(O!==b){var V=[];var da=k;var pa=ka();var za=l();if(za!==b){var Ea=ka();var Fa=z();Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)}else k=da,da=b;for(;da!==b;)V.push(da),da=k,pa=ka(),za=l(),za!==b?(Ea=ka(),Fa=z(),Fa!==b?da=pa=[pa,za,Ea,Fa]:(k=da,da=b)):(k=da,da=b);ma=D;D=nb(O,V)}else k=D,D=b;return D}function l(){if(42===d.charCodeAt(k)){var D=$d;k++}else D=
b,0===fa&&a(ae);D===b&&(47===d.charCodeAt(k)?(D=be,k++):(D=b,0===fa&&a(ce)));return D}function z(){var D=xa();if(D===b){var O=k;var V=k;var da=Na();if(da!==b){var pa=Sa();if(pa!==b){var za=Va();za!==b?(ma=V,V=parseFloat(da+pa+za)):(k=V,V=b)}else k=V,V=b}else k=V,V=b;V===b&&(V=k,da=Na(),da!==b?(pa=Sa(),pa!==b?(ma=V,V=parseFloat(da+pa)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,da=Na(),da!==b?(pa=Va(),pa!==b?(ma=V,V=parseFloat(da+pa)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,da=Na(),da!==b&&(ma=V,da=parseFloat(da)),
V=da)));var Ea=V;if(Ea!==b){var Fa=k;fa++;var ob=v();fa--;ob===b?Fa=void 0:(k=Fa,Fa=b);Fa!==b?(ma=O,O={type:"number",value:Ea}):(k=O,O=b)}else k=O,O=b;D=O;if(D===b){var pb=k;var Jb=k;if(d.substr(k,4).toLowerCase()===de){var $b=d.substr(k,4);k+=4}else $b=b,0===fa&&a(ee);if($b!==b){var Ob=k;fa++;var fe=N();fa--;fe===b?Ob=void 0:(k=Ob,Ob=b);Ob!==b?Jb=$b=[$b,Ob]:(k=Jb,Jb=b)}else k=Jb,Jb=b;var qb=Jb;qb!==b&&(ma=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===b){pb=k;var Kb=k;if(d.substr(k,5).toLowerCase()===
ge){var ac=d.substr(k,5);k+=5}else ac=b,0===fa&&a(he);if(ac!==b){var Pb=k;fa++;var ie=N();fa--;ie===b?Pb=void 0:(k=Pb,Pb=b);Pb!==b?Kb=ac=[ac,Pb]:(k=Kb,Kb=b)}else k=Kb,Kb=b;qb=Kb;qb!==b&&(ma=pb,qb={type:"boolean",value:!1});pb=qb}D=pb;if(D===b){var je=k;var Lb=k;if(d.substr(k,4).toLowerCase()===ke){var bc=d.substr(k,4);k+=4}else bc=b,0===fa&&a(le);if(bc!==b){var Qb=k;fa++;var me=N();fa--;me===b?Qb=void 0:(k=Qb,Qb=b);Qb!==b?Lb=bc=[bc,Qb]:(k=Lb,Lb=b)}else k=Lb,Lb=b;var Ec=Lb;Ec!==b&&(ma=je,Ec={type:"null",
value:null});D=Ec;if(D===b){var rb=k;if(ia()!==b){ka();var cc=wa();cc!==b?(ma=rb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&B("Date literal is invalid"),rb={type:"date",
value:cc.value}):(k=rb,rb=b)}else k=rb,rb=b;D=rb;if(D===b){var sb=k;if(ea()!==b){ka();var dc=wa();dc!==b?(ma=sb,"string"===dc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(dc.value)&&B("Timestamp literal is invalid"),
sb={type:"timestamp",value:dc.value}):(k=sb,sb=b)}else k=sb,sb=b;D=sb;if(D===b){var Ta=k;var Fc=ra();if(Fc!==b){ka();if(45===d.charCodeAt(k)){var hb=Cc;k++}else hb=b,0===fa&&a(Dc);hb===b&&(43===d.charCodeAt(k)?(hb=Ac,k++):(hb=b,0===fa&&a(Bc)));if(hb!==b){ka();var Rb=wa();if(Rb!==b){ka();var Zc=na();Zc!==b?(ma=Ta,Ta={type:"interval",value:Rb,qualifier:Zc,op:hb}):(k=Ta,Ta=b)}else k=Ta,Ta=b}else k=Ta,Ta=b}else k=Ta,Ta=b;Ta===b&&(Ta=k,Fc=ra(),Fc!==b?(ka(),hb=wa(),hb!==b?(ka(),Rb=na(),Rb!==b?(ma=Ta,Ta=
{type:"interval",value:hb,qualifier:Rb,op:""}):(k=Ta,Ta=b)):(k=Ta,Ta=b)):(k=Ta,Ta=b));D=Ta;if(D===b){var tb=k;if(la()!==b){ka();var ec=wa();ec!==b?(ma=tb,"string"===ec.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(ec.value)&&B("Time literal is invalid"),tb={type:"time",value:ec.value}):(k=tb,tb=b)}else k=tb,tb=b;D=tb}}}}}}}var La=D;if(La===b){var Za=k;var ub=k;if(d.substr(k,7).toLowerCase()===ne){var $c=d.substr(k,7);k+=7}else $c=
b,0===fa&&a(oe);if($c!==b){var fc=k;fa++;var pe=N();fa--;pe===b?fc=void 0:(k=fc,fc=b);fc!==b?(ma=ub,ub="EXTRACT"):(k=ub,ub=b)}else k=ub,ub=b;if(ub!==b){ka();var qe=Ja();if(qe!==b){ka();var $a=oa();if($a===b&&($a=qa(),$a===b&&($a=Ca(),$a===b&&($a=va(),$a===b&&($a=Ba(),$a===b&&($a=Aa(),$a===b)))))){var vb=k;if(d.substr(k,13).toLowerCase()===re){var ad=d.substr(k,13);k+=13}else ad=b,0===fa&&a(se);if(ad!==b){var gc=k;fa++;var te=N();fa--;te===b?gc=void 0:(k=gc,gc=b);gc!==b?(ma=vb,vb="TIMEZONE_HOUR"):
(k=vb,vb=b)}else k=vb,vb=b;$a=vb;if($a===b){var wb=k;if(d.substr(k,15).toLowerCase()===ue){var bd=d.substr(k,15);k+=15}else bd=b,0===fa&&a(ve);if(bd!==b){var hc=k;fa++;var we=N();fa--;we===b?hc=void 0:(k=hc,hc=b);hc!==b?(ma=wb,wb="TIMEZONE_MINUTE"):(k=wb,wb=b)}else k=wb,wb=b;$a=wb}}var cd=$a;if(cd!==b){ka();var xe=Z();if(xe!==b){ka();var dd=F();if(dd!==b){ka();var ye=Ka();ye!==b?(ma=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:cd},dd]}}):(k=Za,Za=
b)}else k=Za,Za=b}else k=Za,Za=b}else k=Za,Za=b}else k=Za,Za=b}else k=Za,Za=b;La=Za;if(La===b){var ab=k;var xb=k;if(d.substr(k,9).toLowerCase()===ze){var ed=d.substr(k,9);k+=9}else ed=b,0===fa&&a(Ae);if(ed!==b){var ic=k;fa++;var Be=N();fa--;Be===b?ic=void 0:(k=ic,ic=b);ic!==b?(ma=xb,xb="SUBSTRING"):(k=xb,xb=b)}else k=xb,xb=b;if(xb!==b){ka();var Ce=Ja();if(Ce!==b){ka();var Gc=F();if(Gc!==b){ka();var De=Z();if(De!==b){ka();var Hc=F();if(Hc!==b){ka();var ib=k;var yb=k;if(d.substr(k,3).toLowerCase()===
Ee){var fd=d.substr(k,3);k+=3}else fd=b,0===fa&&a(Fe);if(fd!==b){var jc=k;fa++;var Ge=N();fa--;Ge===b?jc=void 0:(k=jc,jc=b);jc!==b?(ma=yb,yb="FOR"):(k=yb,yb=b)}else k=yb,yb=b;var Sb=yb;if(Sb!==b){var He=ka();var gd=F();if(gd!==b){var Ie=ka();ib=Sb=[Sb,He,gd,Ie]}else k=ib,ib=b}else k=ib,ib=b;ib===b&&(ib=null);Sb=Ka();Sb!==b?(ma=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Gc,Hc,ib[2]]:[Gc,Hc]}}):(k=ab,ab=b)}else k=ab,ab=b}else k=ab,ab=b}else k=ab,ab=b}else k=ab,ab=
b}else k=ab,ab=b;La=ab;if(La===b){var Oa=k;var Ic=ba();if(Ic!==b){ka();var Jc=Ja();if(Jc!==b){ka();var jb=ja();jb===b&&(jb=null);ka();var Tb=F();if(Tb!==b){ka();var Kc=Z();if(Kc!==b){ka();var hd=F();if(hd!==b){ka();var Je=Ka();Je!==b?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb,hd]}}):(k=Oa,Oa=b)}else k=Oa,Oa=b}else k=Oa,Oa=b}else k=Oa,Oa=b}else k=Oa,Oa=b}else k=Oa,Oa=b;Oa===b&&(Oa=k,Ic=ba(),Ic!==b?(ka(),Jc=Ja(),Jc!==b?(ka(),
jb=ja(),jb===b&&(jb=null),ka(),Tb=F(),Tb!==b?(ka(),Kc=Ka(),Kc!==b?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb]}}):(k=Oa,Oa=b)):(k=Oa,Oa=b)):(k=Oa,Oa=b)):(k=Oa,Oa=b));La=Oa;if(La===b){var bb=k;var zb=k;if(d.substr(k,8).toLowerCase()===Ke){var id=d.substr(k,8);k+=8}else id=b,0===fa&&a(Le);if(id!==b){var kc=k;fa++;var Me=N();fa--;Me===b?kc=void 0:(k=kc,kc=b);kc!==b?(ma=zb,zb="POSITION"):(k=zb,zb=b)}else k=zb,zb=b;if(zb!==b){ka();
var Ne=Ja();if(Ne!==b){ka();var jd=F();if(jd!==b){ka();var Oe=X();if(Oe!==b){ka();var kd=F();if(kd!==b){ka();var Pe=Ka();Pe!==b?(ma=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[jd,kd]}}):(k=bb,bb=b)}else k=bb,bb=b}else k=bb,bb=b}else k=bb,bb=b}else k=bb,bb=b}else k=bb,bb=b;La=bb;if(La===b){var cb=k;var Ab=k;if(d.substr(k,4).toLowerCase()===Qe){var ld=d.substr(k,4);k+=4}else ld=b,0===fa&&a(Re);if(ld!==b){var lc=k;fa++;var Se=N();fa--;Se===b?lc=void 0:(k=lc,lc=b);lc!==
b?(ma=Ab,Ab="CAST"):(k=Ab,Ab=b)}else k=Ab,Ab=b;if(Ab!==b){ka();var Te=Ja();if(Te!==b){ka();var md=F();if(md!==b){ka();var Bb=k;if(d.substr(k,2).toLowerCase()===Ue){var nd=d.substr(k,2);k+=2}else nd=b,0===fa&&a(Ve);if(nd!==b){var mc=k;fa++;var We=N();fa--;We===b?mc=void 0:(k=mc,mc=b);mc!==b?(ma=Bb,Bb="AS"):(k=Bb,Bb=b)}else k=Bb,Bb=b;var Xe=Bb;if(Xe!==b){ka();var Ga=k;var Cb=k;if(d.substr(k,7).toLowerCase()===Ye){var od=d.substr(k,7);k+=7}else od=b,0===fa&&a(Ze);if(od!==b){var nc=k;fa++;var $e=N();
fa--;$e===b?nc=void 0:(k=nc,nc=b);nc!==b?(ma=Cb,Cb="INTEGER"):(k=Cb,Cb=b)}else k=Cb,Cb=b;var Ma=Cb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"integer"}});Ga=Ma;if(Ga===b){Ga=k;var Db=k;if(d.substr(k,8).toLowerCase()===af){var pd=d.substr(k,8);k+=8}else pd=b,0===fa&&a(bf);if(pd!==b){var oc=k;fa++;var cf=N();fa--;cf===b?oc=void 0:(k=oc,oc=b);oc!==b?(ma=Db,Db="SMALLINT"):(k=Db,Db=b)}else k=Db,Db=b;Ma=Db;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"smallint"}});Ga=Ma;if(Ga===b){Ga=k;var Eb=
k;if(d.substr(k,5).toLowerCase()===df){var qd=d.substr(k,5);k+=5}else qd=b,0===fa&&a(ef);if(qd!==b){var pc=k;fa++;var ff=N();fa--;ff===b?pc=void 0:(k=pc,pc=b);pc!==b?(ma=Eb,Eb="FLOAT"):(k=Eb,Eb=b)}else k=Eb,Eb=b;Ma=Eb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"float"}});Ga=Ma;if(Ga===b){Ga=k;var Fb=k;if(d.substr(k,4).toLowerCase()===gf){var rd=d.substr(k,4);k+=4}else rd=b,0===fa&&a(hf);if(rd!==b){var qc=k;fa++;var jf=N();fa--;jf===b?qc=void 0:(k=qc,qc=b);qc!==b?(ma=Fb,Fb="REAL"):(k=Fb,Fb=b)}else k=
Fb,Fb=b;Ma=Fb;Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"real"}});Ga=Ma;if(Ga===b&&(Ga=k,Ma=ia(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"date"}}),Ga=Ma,Ga===b&&(Ga=k,Ma=ea(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"timestamp"}}),Ga=Ma,Ga===b&&(Ga=k,Ma=la(),Ma!==b&&(ma=Ga,Ma={type:"data-type",value:{type:"time"}}),Ga=Ma,Ga===b)))){Ga=k;var Gb=k;if(d.substr(k,7).toLowerCase()===kf){var sd=d.substr(k,7);k+=7}else sd=b,0===fa&&a(lf);if(sd!==b){var rc=k;fa++;var mf=N();fa--;mf===
b?rc=void 0:(k=rc,rc=b);rc!==b?(ma=Gb,Gb="VARCHAR"):(k=Gb,Gb=b)}else k=Gb,Gb=b;Ma=Gb;if(Ma!==b){ka();var nf=Ja();if(nf!==b){ka();var td=h();if(td!==b){ka();var of=Ka();of!==b?(ma=Ga,Ga={type:"data-type",value:{type:"varchar",size:parseInt(td)}}):(k=Ga,Ga=b)}else k=Ga,Ga=b}else k=Ga,Ga=b}else k=Ga,Ga=b}}}}var ud=Ga;if(ud!==b){ka();var pf=Ka();pf!==b?(ma=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[md,ud]}}):(k=cb,cb=b)}else k=cb,cb=b}else k=cb,cb=b}else k=cb,cb=b}else k=cb,
cb=b}else k=cb,cb=b;La=cb;if(La===b){var kb=k;var db=k;var Ub=y();Ub!==b&&(ma=db);db=Ub;if(db===b)if(db=k,96===d.charCodeAt(k)?(Ub=vd,k++):(Ub=b,0===fa&&a(wd)),Ub!==b){var sc=[];if(xd.test(d.charAt(k))){var lb=d.charAt(k);k++}else lb=b,0===fa&&a(yd);if(lb!==b)for(;lb!==b;)sc.push(lb),xd.test(d.charAt(k))?(lb=d.charAt(k),k++):(lb=b,0===fa&&a(yd));else sc=b;sc!==b?(96===d.charCodeAt(k)?(lb=vd,k++):(lb=b,0===fa&&a(wd)),lb!==b?(ma=db,db=sc.join("")):(k=db,db=b)):(k=db,db=b)}else k=db,db=b;var zd=db;if(zd!==
b){ka();var qf=Ja();if(qf!==b){ka();var tc=p();tc===b&&(tc=null);ka();var rf=Ka();rf!==b?(ma=kb,kb={type:"function",name:zd,args:tc?tc:{type:"expression-list",value:[]}}):(k=kb,kb=b)}else k=kb,kb=b}else k=kb,kb=b;La=kb;if(La===b){var fb;var Ua=k;var Lc=ya();if(Lc!==b){ka();var Vb=F();if(Vb!==b){ka();var Wb=[];for(fb=Ia();fb!==b;)Wb.push(fb),fb=Ia();fb=ka();var uc=Ha();uc!==b?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:null}):(k=Ua,Ua=b)}else k=Ua,Ua=b}else k=Ua,Ua=
b;if(Ua===b)if(Ua=k,Lc=ya(),Lc!==b)if(ka(),Vb=F(),Vb!==b){ka();Wb=[];for(fb=Ia();fb!==b;)Wb.push(fb),fb=Ia();fb=ka();uc=Ra();if(uc!==b){ka();var sf=Ha();sf!==b?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:uc.value}):(k=Ua,Ua=b)}else k=Ua,Ua=b}else k=Ua,Ua=b;else k=Ua,Ua=b;var Mc=Ua;if(Mc===b){var gb;var Xa=k;var Nc=ya();if(Nc!==b){ka();var Xb=[];for(gb=Da();gb!==b;)Xb.push(gb),gb=Da();gb=ka();var vc=Ha();vc!==b?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,
else:null}):(k=Xa,Xa=b)}else k=Xa,Xa=b;if(Xa===b)if(Xa=k,Nc=ya(),Nc!==b){ka();Xb=[];for(gb=Da();gb!==b;)Xb.push(gb),gb=Da();gb=ka();vc=Ra();if(vc!==b){ka();var tf=Ha();tf!==b?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,else:vc.value}):(k=Xa,Xa=b)}else k=Xa,Xa=b}else k=Xa,Xa=b;Mc=Xa}La=Mc;if(La===b){var Hb=k;var uf=k;var wc;var Yb=k;var Ad=v();if(Ad!==b){var Bd=[];for(wc=G();wc!==b;)Bd.push(wc),wc=G();ma=Yb;Yb=Ad+Bd.join("")}else k=Yb,Yb=b;var Cd=Yb;Cd!==b&&(ma=uf);var mb=Cd;if(mb!==
b){ma=Hb;var Oc=mb;mb=/^CURRENT_DATE$/i.test(Oc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Oc}}Hb=mb;if(Hb===b){Hb=k;var Ib=k;if(Y()!==b){var xc;var vf=k;var Pc=[];for(xc=R();xc!==b;)Pc.push(xc),xc=R();ma=vf;var wf=Pc=Pc.join("");var xf=Y();xf!==b?(ma=Ib,Ib=wf):(k=Ib,Ib=b)}else k=Ib,Ib=b;mb=Ib;mb!==b&&(ma=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}La=Hb;if(La===b&&(La=
ca(),La===b)){La=k;var yf=Ja();if(yf!==b){ka();var Qc=F();if(Qc!==b){ka();var zf=Ka();zf!==b?(ma=La,Qc.paren=!0,La=Qc):(k=La,La=b)}else k=La,La=b}else k=La,La=b}}}}}}}}}return La}function y(){var D;var O=k;var V=v();if(V!==b){var da=[];for(D=N();D!==b;)da.push(D),D=N();ma=O;O=V+da.join("")}else k=O,O=b;return O}function v(){if(Af.test(d.charAt(k))){var D=d.charAt(k);k++}else D=b,0===fa&&a(Bf);return D}function N(){if(Cf.test(d.charAt(k))){var D=d.charAt(k);k++}else D=b,0===fa&&a(Df);return D}function G(){if(Dd.test(d.charAt(k))){var D=
d.charAt(k);k++}else D=b,0===fa&&a(Ed);return D}function R(){if(Dd.test(d.charAt(k))){var D=d.charAt(k);k++}else D=b,0===fa&&a(Ed);if(D===b)if(D=k,Y()!==b){var O=Y();O!==b?(ma=D,D='"'):(k=D,D=b)}else k=D,D=b;return D}function Y(){if(Ef.test(d.charAt(k))){var D=d.charAt(k);k++}else D=b,0===fa&&a(Ff);return D}function ca(){var D;var O=D=k;if(64===d.charCodeAt(k)){var V=Gf;k++}else V=b,0===fa&&a(Hf);if(V!==b){var da=y();da!==b?O=V=[V,da]:(k=O,O=b)}else k=O,O=b;O!==b&&(ma=D,O={type:"parameter",value:O[1]});
return O}function ja(){var D=k;if(d.substr(k,7).toLowerCase()===If){var O=d.substr(k,7);k+=7}else O=b,0===fa&&a(Jf);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="LEADING"):(k=D,D=b)}else k=D,D=b;D===b&&(D=k,d.substr(k,8).toLowerCase()===Kf?(O=d.substr(k,8),k+=8):(O=b,0===fa&&a(Lf)),O!==b?(O=k,fa++,V=N(),fa--,V===b?O=void 0:(k=O,O=b),O!==b?(ma=D,D="TRAILING"):(k=D,D=b)):(k=D,D=b),D===b&&(D=k,d.substr(k,4).toLowerCase()===Mf?(O=d.substr(k,4),k+=4):(O=b,0===fa&&a(Nf)),O!==
b?(O=k,fa++,V=N(),fa--,V===b?O=void 0:(k=O,O=b),O!==b?(ma=D,D="BOTH"):(k=D,D=b)):(k=D,D=b)));return D}function na(){var D=k;var O=k;var V=sa();if(V!==b){ka();var da=Ja();if(da!==b)if(ka(),da=ta(),da!==b){ka();var pa=Ka();pa!==b?(ma=O,O={type:"interval-period",period:V.value,precision:da,secondary:null}):(k=O,O=b)}else k=O,O=b;else k=O,O=b}else k=O,O=b;O===b&&(O=k,V=sa(),V!==b&&(ma=O,V={type:"interval-period",period:V.value,precision:null,secondary:null}),O=V);if(O!==b)if(ka(),V=k,d.substr(k,2).toLowerCase()===
Of?(da=d.substr(k,2),k+=2):(da=b,0===fa&&a(Pf)),da!==b?(da=k,fa++,pa=N(),fa--,pa===b?da=void 0:(k=da,da=b),da!==b?(ma=V,V="TO"):(k=V,V=b)):(k=V,V=b),V!==b){ka();V=k;da=sa();da!==b&&(ma=V,da={type:"interval-period",period:da.value,precision:null,secondary:null});V=da;if(V===b){V=k;da=Aa();if(da!==b)if(ka(),da=Ja(),da!==b)if(ka(),da=ta(),da!==b)if(ka(),pa=Wa(),pa!==b)if(ka(),pa=ua(),pa!==b){ka();var za=Ka();za!==b?(ma=V,V={type:"interval-period",period:"second",precision:da,secondary:pa}):(k=V,V=b)}else k=
V,V=b;else k=V,V=b;else k=V,V=b;else k=V,V=b;else k=V,V=b;V===b&&(V=k,da=Aa(),da!==b?(ka(),da=Ja(),da!==b?(ka(),da=ta(),da!==b?(ka(),pa=Ka(),pa!==b?(ma=V,V={type:"interval-period",period:"second",precision:da,secondary:null}):(k=V,V=b)):(k=V,V=b)):(k=V,V=b)):(k=V,V=b),V===b&&(V=k,da=Aa(),da!==b&&(ma=V,da={type:"interval-period",period:"second",precision:null,secondary:null}),V=da))}V!==b?(ma=D,D={type:"interval-qualifier",start:O,end:V}):(k=D,D=b)}else k=D,D=b;else k=D,D=b;D===b&&(D=k,V=sa(),V!==
b?(ka(),O=Ja(),O!==b?(ka(),O=ua(),O!==b?(ka(),da=Ka(),da!==b?(ma=D,D={type:"interval-period",period:V.value,precision:O,secondary:null}):(k=D,D=b)):(k=D,D=b)):(k=D,D=b)):(k=D,D=b),D===b&&(D=k,V=sa(),V!==b&&(ma=D,V={type:"interval-period",period:V.value,precision:null,secondary:null}),D=V,D===b&&(D=k,V=Aa(),V!==b?(ka(),O=Ja(),O!==b?(ka(),O=ta(),O!==b?(ka(),da=Wa(),da!==b?(ka(),V=ua(),V!==b?(ka(),da=Ka(),da!==b?(ma=D,D={type:"interval-period",period:"second",precision:O,secondary:V}):(k=D,D=b)):(k=
D,D=b)):(k=D,D=b)):(k=D,D=b)):(k=D,D=b)):(k=D,D=b),D===b&&(D=k,V=Aa(),V!==b?(ka(),O=Ja(),O!==b?(ka(),O=ua(),O!==b?(ka(),da=Ka(),da!==b?(ma=D,D={type:"interval-period",period:"second",precision:O,secondary:null}):(k=D,D=b)):(k=D,D=b)):(k=D,D=b)):(k=D,D=b),D===b&&(D=k,V=Aa(),V!==b&&(ma=D,V={type:"interval-period",period:"second",precision:null,secondary:null}),D=V)))));return D}function sa(){var D=k;var O=Ca();O!==b&&(ma=D,O={type:"string",value:"day"});D=O;D===b&&(D=k,O=va(),O!==b&&(ma=D,O={type:"string",
value:"hour"}),D=O,D===b&&(D=k,O=Ba(),O!==b&&(ma=D,O={type:"string",value:"minute"}),D=O,D===b&&(D=k,O=qa(),O!==b&&(ma=D,O={type:"string",value:"month"}),D=O,D===b&&(D=k,O=oa(),O!==b&&(ma=D,O={type:"string",value:"year"}),D=O))));return D}function ua(){var D=k;var O=h();O!==b&&(ma=D,O=parseFloat(O));return O}function ta(){var D=k;var O=h();O!==b&&(ma=D,O=parseFloat(O));return O}function wa(){var D=xa();D===b&&(D=ca());return D}function xa(){var D=k;if(39===d.charCodeAt(k)){var O=Fd;k++}else O=b,0===
fa&&a(Gd);O===b&&(d.substr(k,2)===Hd?(O=Hd,k+=2):(O=b,0===fa&&a(Qf)));if(O!==b){O=[];var V=k;if(d.substr(k,2)===yc){var da=yc;k+=2}else da=b,0===fa&&a(Id);da!==b&&(ma=V,da="'");V=da;V===b&&(Jd.test(d.charAt(k))?(V=d.charAt(k),k++):(V=b,0===fa&&a(Kd)));for(;V!==b;)O.push(V),V=k,d.substr(k,2)===yc?(da=yc,k+=2):(da=b,0===fa&&a(Id)),da!==b&&(ma=V,da="'"),V=da,V===b&&(Jd.test(d.charAt(k))?(V=d.charAt(k),k++):(V=b,0===fa&&a(Kd)));39===d.charCodeAt(k)?(V=Fd,k++):(V=b,0===fa&&a(Gd));V!==b?(ma=D,D={type:"string",
value:O.join("")}):(k=D,D=b)}else k=D,D=b;return D}function Da(){var D=k;if(Pa()!==b){ka();var O=F();if(O!==b){ka();var V=Ya();V!==b?(ka(),V=F(),V!==b?(ma=D,D={type:"when-clause",operand:O,value:V}):(k=D,D=b)):(k=D,D=b)}else k=D,D=b}else k=D,D=b;return D}function Ia(){var D=k;if(Pa()!==b){ka();var O=F();if(O!==b){ka();var V=Ya();V!==b?(ka(),V=F(),V!==b?(ma=D,D={type:"when-clause",operand:O,value:V}):(k=D,D=b)):(k=D,D=b)}else k=D,D=b}else k=D,D=b;return D}function Ra(){var D=k;var O=k;if(d.substr(k,
4).toLowerCase()===Rf){var V=d.substr(k,4);k+=4}else V=b,0===fa&&a(Sf);if(V!==b){V=k;fa++;var da=N();fa--;da===b?V=void 0:(k=V,V=b);V!==b?(ma=O,O="ELSE"):(k=O,O=b)}else k=O,O=b;O!==b?(ka(),O=F(),O!==b?(ma=D,D={type:"else-clause",value:O}):(k=D,D=b)):(k=D,D=b);return D}function Na(){var D=h();if(D===b){D=k;if(45===d.charCodeAt(k)){var O=Cc;k++}else O=b,0===fa&&a(Dc);O===b&&(43===d.charCodeAt(k)?(O=Ac,k++):(O=b,0===fa&&a(Bc)));if(O!==b){var V=h();V!==b?(ma=D,D=O[0]+V):(k=D,D=b)}else k=D,D=b}return D}
function Sa(){var D=k;if(46===d.charCodeAt(k)){var O=Tf;k++}else O=b,0===fa&&a(Uf);O!==b?(O=h(),O===b&&(O=null),ma=D,D="."+(null!=O?O:"")):(k=D,D=b);return D}function Va(){var D;var O=D=k;if(Vf.test(d.charAt(k))){var V=d.charAt(k);k++}else V=b,0===fa&&a(Wf);V!==b?(Xf.test(d.charAt(k))?(V=d.charAt(k),k++):(V=b,0===fa&&a(Yf)),V===b&&(V=null),ma=O,O="e"+(null===V?"":V)):(k=O,O=b);O!==b?(V=h(),V!==b?(ma=D,D=O+V):(k=D,D=b)):(k=D,D=b);return D}function h(){var D=k;var O=[];var V=E();if(V!==b)for(;V!==b;)O.push(V),
V=E();else O=b;O!==b&&(ma=D,O=O.join(""));return O}function E(){if(Zf.test(d.charAt(k))){var D=d.charAt(k);k++}else D=b,0===fa&&a($f);return D}function X(){var D=k;if(d.substr(k,2).toLowerCase()===ag){var O=d.substr(k,2);k+=2}else O=b,0===fa&&a(bg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="IN"):(k=D,D=b)}else k=D,D=b;return D}function aa(){var D=k;if(d.substr(k,2).toLowerCase()===cg){var O=d.substr(k,2);k+=2}else O=b,0===fa&&a(dg);if(O!==b){O=k;fa++;var V=N();fa--;
V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="IS"):(k=D,D=b)}else k=D,D=b;return D}function ha(){var D=k;if(d.substr(k,4).toLowerCase()===eg){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(fg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="LIKE"):(k=D,D=b)}else k=D,D=b;return D}function x(){var D=k;if(d.substr(k,3).toLowerCase()===gg){var O=d.substr(k,3);k+=3}else O=b,0===fa&&a(hg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="NOT"):(k=D,D=b)}else k=D,
D=b;return D}function I(){var D=k;if(d.substr(k,3).toLowerCase()===ig){var O=d.substr(k,3);k+=3}else O=b,0===fa&&a(jg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="AND"):(k=D,D=b)}else k=D,D=b;return D}function M(){var D=k;if(d.substr(k,2).toLowerCase()===kg){var O=d.substr(k,2);k+=2}else O=b,0===fa&&a(lg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="OR"):(k=D,D=b)}else k=D,D=b;return D}function W(){var D=k;if(d.substr(k,7).toLowerCase()===
mg){var O=d.substr(k,7);k+=7}else O=b,0===fa&&a(ng);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="BETWEEN"):(k=D,D=b)}else k=D,D=b;return D}function Z(){var D=k;if(d.substr(k,4).toLowerCase()===og){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(pg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="FROM"):(k=D,D=b)}else k=D,D=b;return D}function ba(){var D=k;if(d.substr(k,4).toLowerCase()===qg){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(rg);if(O!==
b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="TRIM"):(k=D,D=b)}else k=D,D=b;return D}function ea(){var D=k;if(d.substr(k,9).toLowerCase()===sg){var O=d.substr(k,9);k+=9}else O=b,0===fa&&a(tg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="TIMESTAMP"):(k=D,D=b)}else k=D,D=b;return D}function ia(){var D=k;if(d.substr(k,4).toLowerCase()===ug){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(vg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==
b?(ma=D,D="DATE"):(k=D,D=b)}else k=D,D=b;return D}function la(){var D=k;if(d.substr(k,4).toLowerCase()===wg){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(xg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="TIME"):(k=D,D=b)}else k=D,D=b;return D}function ra(){var D=k;if(d.substr(k,8).toLowerCase()===yg){var O=d.substr(k,8);k+=8}else O=b,0===fa&&a(zg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="INTERVAL"):(k=D,D=b)}else k=D,D=b;return D}function oa(){var D=
k;if(d.substr(k,4).toLowerCase()===Ag){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(Bg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="YEAR"):(k=D,D=b)}else k=D,D=b;return D}function qa(){var D=k;if(d.substr(k,5).toLowerCase()===Cg){var O=d.substr(k,5);k+=5}else O=b,0===fa&&a(Dg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="MONTH"):(k=D,D=b)}else k=D,D=b;return D}function Ca(){var D=k;if(d.substr(k,3).toLowerCase()===Eg){var O=d.substr(k,3);k+=
3}else O=b,0===fa&&a(Fg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="DAY"):(k=D,D=b)}else k=D,D=b;return D}function va(){var D=k;if(d.substr(k,4).toLowerCase()===Gg){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(Hg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="HOUR"):(k=D,D=b)}else k=D,D=b;return D}function Ba(){var D=k;if(d.substr(k,6).toLowerCase()===Ig){var O=d.substr(k,6);k+=6}else O=b,0===fa&&a(Jg);if(O!==b){O=k;fa++;var V=N();fa--;V===
b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="MINUTE"):(k=D,D=b)}else k=D,D=b;return D}function Aa(){var D=k;if(d.substr(k,6).toLowerCase()===Kg){var O=d.substr(k,6);k+=6}else O=b,0===fa&&a(Lg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="SECOND"):(k=D,D=b)}else k=D,D=b;return D}function ya(){var D=k;if(d.substr(k,4).toLowerCase()===Mg){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(Ng);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="CASE"):(k=D,D=b)}else k=
D,D=b;return D}function Ha(){var D=k;if(d.substr(k,3).toLowerCase()===Og){var O=d.substr(k,3);k+=3}else O=b,0===fa&&a(Pg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="END"):(k=D,D=b)}else k=D,D=b;return D}function Pa(){var D=k;if(d.substr(k,4).toLowerCase()===Qg){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(Rg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="WHEN"):(k=D,D=b)}else k=D,D=b;return D}function Ya(){var D=k;if(d.substr(k,4).toLowerCase()===
Sg){var O=d.substr(k,4);k+=4}else O=b,0===fa&&a(Tg);if(O!==b){O=k;fa++;var V=N();fa--;V===b?O=void 0:(k=O,O=b);O!==b?(ma=D,D="THEN"):(k=D,D=b)}else k=D,D=b;return D}function Wa(){if(44===d.charCodeAt(k)){var D=Ug;k++}else D=b,0===fa&&a(Vg);return D}function Ja(){if(40===d.charCodeAt(k)){var D=Wg;k++}else D=b,0===fa&&a(Xg);return D}function Ka(){if(41===d.charCodeAt(k)){var D=Yg;k++}else D=b,0===fa&&a(Zg);return D}function ka(){var D;var O=[];for(D=Qa();D!==b;)O.push(D),D=Qa();return O}function Qa(){if($g.test(d.charAt(k))){var D=
d.charAt(k);k++}else D=b,0===fa&&a(ah);return D}function Nb(D,O,V,da){D={type:"binary-expression",operator:D,left:O,right:V};void 0!==da&&(D.escape=da);return D}function nb(D,O){for(var V=0;V<O.length;V++)D=Nb(O[V][1],D,O[V][3]);return D}r=void 0!==r?r:{};var b={},Mb=r.grammarSource,Ld={start:m},Md=m,Nd="!",Sc="\x3d",Uc="\x3e\x3d",Sd="\x3e",Vc="\x3c\x3d",Wc="\x3c\x3e",Wd="\x3c",Xc="!\x3d",Ac="+",Cc="-",Yc="||",$d="*",be="/",Gf="@",Fd="'",Hd="N'",yc="''",Tf=".",ke="null",de="true",ge="false",ag="in",
cg="is",eg="like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",vd="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Dd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Jd=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,xd=/^[^`]/,Od=A("!",!1),Tc=A("\x3d",!1),Rd=A("\x3e\x3d",!1),Td=A("\x3e",!1),Ud=A("\x3c\x3d",!1),Vd=A("\x3c\x3e",!1),Xd=A("\x3c",!1),Yd=A("!\x3d",!1),Bc=A("+",!1),Dc=A("-",!1),Zd=A("||",!1),ae=A("*",!1),ce=A("/",!1),Bf=K([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=K([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ed=K([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=K(['"'],!1,!1),Hf=A("@",!1),Gd=A("'",!1),Qf=A("N'",!1),Id=A("''",!1),Kd=K(["'"],!0,!1),Uf=A(".",!1),$f=K([["0","9"]],!1,!1),Wf=K(["e","E"],!1,!1),Yf=K(["+","-"],!1,!1),le=A("NULL",!0),ee=A("TRUE",!0),he=A("FALSE",!0),bg=A("IN",!0),dg=A("IS",!0),fg=A("LIKE",!0),Qd=A("ESCAPE",!0),hg=A("NOT",!0),jg=A("AND",!0),lg=A("OR",!0),ng=A("BETWEEN",!0),pg=A("FROM",!0),Fe=A("FOR",!0),Ae=A("SUBSTRING",!0),oe=A("EXTRACT",!0),rg=A("TRIM",!0),Le=A("POSITION",!0),tg=A("TIMESTAMP",!0),vg=A("DATE",!0),xg=A("TIME",
!0),Jf=A("LEADING",!0),Lf=A("TRAILING",!0),Nf=A("BOTH",!0),Re=A("CAST",!0),Ve=A("AS",!0),Ze=A("INTEGER",!0),bf=A("SMALLINT",!0),ef=A("FLOAT",!0),hf=A("REAL",!0),lf=A("VARCHAR",!0),Pf=A("TO",!0),zg=A("INTERVAL",!0),Bg=A("YEAR",!0),se=A("TIMEZONE_HOUR",!0),ve=A("TIMEZONE_MINUTE",!0),Dg=A("MONTH",!0),Fg=A("DAY",!0),Hg=A("HOUR",!0),Jg=A("MINUTE",!0),Lg=A("SECOND",!0),Ng=A("CASE",!0),Pg=A("END",!0),Rg=A("WHEN",!0),Tg=A("THEN",!0),Sf=A("ELSE",!0),Vg=A(",",!1),Xg=A("(",!1),Zg=A(")",!1),ah=K([" ","\t","\n",
"\r"],!1,!1),wd=A("`",!1),yd=K(["`"],!0,!1),k=0,ma=0,Zb=[{line:1,column:1}],eb=0,zc=[],fa=0;if("startRule"in r){if(!(r.startRule in Ld))throw Error("Can't start parsing from rule \""+r.startRule+'".');Md=Ld[r.startRule]}var Rc=Md();if(Rc!==b&&k===d.length)return Rc;Rc!==b&&k<d.length&&a({type:"end"});throw function(D,O,V){return new f(f.buildMessage(D,O),D,O,V)}(zc,eb<d.length?d.charAt(eb):null,eb<d.length?q(eb,eb+1):q(eb,eb));}}})})(w);var u=w.exports;class H{static parse(C){return u.parse(C)}}c.WhereGrammar=
H;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(c,g){g=new g.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});c.kebabDict=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(c){c.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,
centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,
supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B,A,K){function t(p,F,Q,e){const J=e.x-Q.x;e=e.y-Q.y;F=Math.min(1,Math.max(0,((F.x-Q.x)*J+(F.y-Q.y)*e)/(J*J+e*e)));p.x=Q.x+J*F;p.y=Q.y+e*F}function q(p,F){return p?F?4:3:F?3:2}class a{constructor(p,F,Q){this.items=p;this.query=F;this.geometryType=Q.geometryType;this.hasM=Q.hasM;this.hasZ=Q.hasZ;this.fieldsIndex=Q.fieldsIndex;this.objectIdField=Q.objectIdField;this.spatialReference=Q.spatialReference;this.featureAdapter=Q.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const p=
new n(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return p.countDistinctValues(this.items);const {groupByFieldsForStatistics:F,having:Q,outStatistics:e}=this.query;if(!F?.length)return 1;const J=new Map,T=new Map,L=new Set;for(const P of e){var {statisticType:U}=P;U="exceedslimit"!==U?P.onStatisticField:void 0;if(!T.has(U)){var S=[];for(const l of F){const z=this._getAttributeValues(p,l,J);S.push(z)}T.set(U,this._calculateUniqueValues(S,p.returnDistinctValues))}U=
T.get(U);for(const l in U){const {data:z,items:y}=U[l];S=z.join(",");Q&&!p.validateItems(y,Q)||L.add(S)}}return L.size}async createQueryResponse(){let p;p=this.query.outStatistics?this.query.outStatistics.some(F=>"exceedslimit"===F.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const F=this.query.geometry;f.isValid(this.query.outSR)&&!f.equals(F.spatialReference,
this.query.outSR)?p.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...r.project(F,F.spatialReference,this.query.outSR)}):p.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...F})}return p}createSnappingResponse(p,F){const Q=this.featureAdapter,e=q(this.hasZ,this.hasM),{point:J,mode:T}=p,L="number"===typeof p.distance?p.distance:p.distance.x,U="number"===typeof p.distance?p.distance:p.distance.y,S={candidates:[]},P="esriGeometryPolygon"===this.geometryType;
F=this._getPointCreator(T,this.spatialReference,F);const l=new m(null,0),z=new m(null,0),y={x:0,y:0,z:0};for(const ja of this.items){var v=Q.getGeometry(ja);if(null==v)continue;const {coords:na,lengths:sa}=v;l.coords=na;z.coords=na;if(p.returnEdge){v=0;for(var N=0;N<sa.length;N++){var G=sa[N];for(var R=0;R<G;R++,v+=e){var Y=l;Y.coordsIndex=v;if(R!==G-1){const ua=z;ua.coordsIndex=v+e;const ta=y;t(y,J,Y,ua);var ca=(J.x-ta.x)/L;const wa=(J.y-ta.y)/U;ca=ca*ca+wa*wa;1>=ca&&S.candidates.push(B.makeEdgeCandidate(Q.getObjectId(ja),
F(ta),Math.sqrt(ca),F(Y),F(ua)))}}}}if("none"!==p.vertexMode)if(v=P?na.length-e:na.length,"all"===p.vertexMode)for(N=0;N<v;N+=e)G=l,G.coordsIndex=N,R=(J.x-G.x)/L,Y=(J.y-G.y)/U,R=R*R+Y*Y,1>=R&&S.candidates.push(B.makeVertexCandidate(Q.getObjectId(ja),F(G),Math.sqrt(R)));else if("ends"===p.vertexMode){v=[0];P||v.push(na.length-e);for(const ua of v)v=l,v.coordsIndex=ua,N=(J.x-v.x)/L,G=(J.y-v.y)/U,N=N*N+G*G,1>=N&&S.candidates.push(B.makeVertexCandidate(Q.getObjectId(ja),F(v),Math.sqrt(N)))}}S.candidates.sort((ja,
na)=>ja.distance-na.distance);return S}_getPointCreator(p,F,Q){const e=null==Q||f.equals(F,Q)?T=>T:T=>r.project(T,F,Q),{hasZ:J}=this;return"3d"===p?J?({x:T,y:L,z:U})=>e({x:T,y:L,z:U}):({x:T,y:L})=>e({x:T,y:L,z:0}):({x:T,y:L})=>e({x:T,y:L})}async createSummaryStatisticsResponse(p){const {field:F,valueExpression:Q,normalizationField:e,normalizationType:J,normalizationTotal:T,minValue:L,maxValue:U,scale:S,timeZone:P}=p;var l=this.fieldsIndex.get(F);p=A.isDateField(l)||A.isDateOnlyField(l)||A.isTimestampOffsetField(l);
const z=await this._getDataValues({field:F,valueExpression:Q,normalizationField:e,normalizationType:J,normalizationTotal:T,scale:S,timeZone:P}),y=K.isNullCountSupported({normalizationType:J,normalizationField:e,minValue:L,maxValue:U}),v={value:.5,fieldType:l?.type};l=A.isStringField(l)?K.calculateStringStatistics({values:z,supportsNullCount:y,percentileParams:v}):K.calculateStatistics({values:z,minValue:L,maxValue:U,useSampleStdDev:!J,supportsNullCount:y,percentileParams:v});return K.processSummaryStatisticsResult(l,
p)}async createUniqueValuesResponse(p){const {field:F,valueExpression:Q,domains:e,returnAllCodedValues:J,scale:T,timeZone:L}=p;var U=await this._getDataValues({field:F,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,valueExpression:Q,scale:T,timeZone:L},!1);U=K.calculateUniqueValuesCount(U);return K.createUVResult(U,e,J,p.fieldDelimiter)}async createClassBreaksResponse(p){const {field:F,valueExpression:Q,normalizationField:e,normalizationType:J,normalizationTotal:T,classificationMethod:L,
standardDeviationInterval:U,minValue:S,maxValue:P,numClasses:l,scale:z,timeZone:y}=p;p=await this._getDataValues({field:F,valueExpression:Q,normalizationField:e,normalizationType:J,normalizationTotal:T,scale:z,timeZone:y});p=K.calculateClassBreaks(p,{field:F,normalizationField:e,normalizationType:J,normalizationTotal:T,classificationMethod:L,standardDeviationInterval:U,minValue:S,maxValue:P,numClasses:l});return K.resolveCBResult(p,L)}async createHistogramResponse(p){const {field:F,valueExpression:Q,
normalizationField:e,normalizationType:J,normalizationTotal:T,classificationMethod:L,standardDeviationInterval:U,minValue:S,maxValue:P,numBins:l,scale:z,timeZone:y}=p;p=await this._getDataValues({field:F,valueExpression:Q,normalizationField:e,normalizationType:J,normalizationTotal:T,scale:z,timeZone:y});return K.calculateHistogram(p,{field:F,normalizationField:e,normalizationType:J,normalizationTotal:T,classificationMethod:L,standardDeviationInterval:U,minValue:S,maxValue:P,numBins:l})}_sortFeatures(p,
F,Q){if(1<p.length&&F?.length)for(const e of F.reverse()){F=e.split(" ");const J=F[0],T=this.fieldsIndex.get(J);F=F[1]?"desc"===F[1].toLowerCase():!1;const L=K.getAttributeComparator(T?.type,F);p.sort((U,S)=>{U=Q(U,J,T);S=Q(S,J,T);return L(U,S)})}}_createFeatureQueryResponse(p){const F=this.items,{geometryType:Q,hasM:e,hasZ:J,objectIdField:T,spatialReference:L}=this,{outFields:U,outSR:S,quantizationParameters:P,resultRecordCount:l,resultOffset:z,returnZ:y,returnM:v}=p,N=null!=l?F.length>(z||0)+l:
!1,G=U&&(U.includes("*")?[...this.fieldsIndex.fields]:U.map(R=>this.fieldsIndex.get(R)));return{exceededTransferLimit:N,features:this._createFeatures(p,F),fields:G,geometryType:Q,hasM:e&&v,hasZ:J&&y,objectIdFieldName:T,spatialReference:d.cleanFromGeometryEngine(S||L),transform:P&&C.toQuantizationTransform(P)||null}}_createFeatures(p,F){const Q=new n(p,this.featureAdapter,this.fieldsIndex),{hasM:e,hasZ:J}=this,{orderByFields:T,quantizationParameters:L,returnGeometry:U,returnCentroid:S,maxAllowableOffset:P,
resultOffset:l,resultRecordCount:z,returnZ:y=!1,returnM:v=!1}=p,N=J&&y,G=e&&v;p=[];var R=0;const Y=[...F];this._sortFeatures(Y,T,(ua,ta,wa)=>Q.getFieldValue(ua,ta,wa));if(this.geometryType&&(U||S)){var ca=C.toQuantizationTransform(L)??void 0;F="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(U&&!S)for(var ja of Y){var na=this.featureAdapter.getGeometry(ja),sa={attributes:Q.getAttributes(ja),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,na,P,ca,
N,G)};F&&na&&!sa.geometry&&(sa.centroid=d.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),ca));p[R++]=sa}else if(!U&&S)for(na of Y)p[R++]={attributes:Q.getAttributes(na),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(na,this),ca)};else for(sa of Y)p[R++]={attributes:Q.getAttributes(sa),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(sa,this),ca),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(sa),P,ca,
N,G)}}else for(ca of Y)(ja=Q.getAttributes(ca))&&(p[R++]={attributes:ja});R=l||0;null!=z&&(p=p.slice(R,Math.min(p.length,R+z)));return p}_createExceedsLimitQueryResponse(p){var F=!1;let Q=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;F=Number.POSITIVE_INFINITY;for(const J of p.outStatistics??[])if("exceedslimit"===J.statisticType){Q=null!=J.maxPointCount?J.maxPointCount:Number.POSITIVE_INFINITY;e=null!=J.maxRecordCount?J.maxRecordCount:Number.POSITIVE_INFINITY;F=null!=J.maxVertexCount?J.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)F=this.items.length>Q;else if(this.items.length>e)F=!0;else{p=q(this.hasZ,this.hasM);const J=this.featureAdapter;F=this.items.reduce((T,L)=>{L=J.getGeometry(L);return T+(null!=L&&L.coords.length||0)},0)/p>F}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(F)}}]}}async _createStatisticsQueryResponse(p){var F=
{attributes:{}};const Q=[],e=new Map,J=new Map,T=new Map,L=new Map,U=new n(p,this.featureAdapter,this.fieldsIndex);var S=p.outStatistics;const {groupByFieldsForStatistics:P,having:l,orderByFields:z,resultRecordCount:y}=p;p=P?.length;const v=!!p,N=v?P[0]:null,G=v&&!this.fieldsIndex.get(N);for(const na of S??[]){const {outStatisticFieldName:sa,statisticType:ua}=na;S=na;const ta="exceedslimit"!==ua?na.onStatisticField:void 0,wa="percentile_disc"===ua||"percentile_cont"===ua;var R="EnvelopeAggregate"===
ua||"CentroidAggregate"===ua||"ConvexHullAggregate"===ua;const xa=v&&1===p&&(ta===N||G)&&"count"===ua;if(v){if(!T.has(ta)){var Y=[];for(const Da of P){var ca=this._getAttributeValues(U,Da,e);Y.push(ca)}T.set(ta,this._calculateUniqueValues(Y,R?!1:U.returnDistinctValues))}Y=T.get(ta);if(!Y)continue;ca=Object.keys(Y);for(const Da of ca){const {count:Ia,data:Ra,items:Na,itemPositions:Sa}=Y[Da];ca=Ra.join(",");if(!l||U.validateItems(Na,l)){const Va=L.get(ca)||{attributes:{}};if(R){Va.aggregateGeometries||
(Va.aggregateGeometries={});const {aggregateGeometries:E,outStatisticFieldName:X}=await this._getAggregateGeometry(S,Na);Va.aggregateGeometries[X]=E}else{var ja=null;if(xa)ja=Ia;else{const E=this._getAttributeValues(U,ta,e);ja=Sa.map(X=>E[X]);ja=wa&&"statisticParameters"in S?this._getPercentileValue(S,ja):this._getStatisticValue(S,ja,null,U.returnDistinctValues)}Va.attributes[sa]=ja}let h=0;P.forEach((E,X)=>Va.attributes[this.fieldsIndex.get(E)?E:`EXPR_${++h}`]=Ra[X]);L.set(ca,Va)}}}else if(R){F.aggregateGeometries||
(F.aggregateGeometries={});const {aggregateGeometries:Da,outStatisticFieldName:Ia}=await this._getAggregateGeometry(S,this.items);F.aggregateGeometries[Ia]=Da}else R=this._getAttributeValues(U,ta,e),F.attributes[sa]=wa&&"statisticParameters"in S?this._getPercentileValue(S,R):this._getStatisticValue(S,R,J,U.returnDistinctValues);S="min"!==ua&&"max"!==ua||!A.isStringField(this.fieldsIndex.get(ta))&&!this._isAnyDateField(ta)?null:this.fieldsIndex.get(ta)?.type;Q.push({name:sa,alias:sa,type:S||"esriFieldTypeDouble"})}F=
v?Array.from(L.values()):[F];this._sortFeatures(F,z,(na,sa)=>na.attributes[sa]);y&&(F.length=Math.min(y,F.length));return{fields:Q,features:F}}_isAnyDateField(p){p=this.fieldsIndex.get(p);return A.isDateField(p)||A.isDateOnlyField(p)||A.isTimestampOffsetField(p)||A.isTimeOnlyField(p)}async _getAggregateGeometry(p,F){const {convexHull:Q,union:e}=await new Promise((y,v)=>c(["../../../geometry/geometryEngineJSON"],y,v)),{statisticType:J,outStatisticFieldName:T}=p,{featureAdapter:L,spatialReference:U,
geometryType:S,hasZ:P,hasM:l}=this;F=F.map(y=>d.getGeometry(S,P,l,L.getGeometry(y)));const z=Q(U,F,!0)[0];p={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===J?(F=z?H.getPolygonExtent(z):H.getGeometryExtent(e(U,F)),p.aggregateGeometries={...F,spatialReference:U},p.outStatisticFieldName=T||"extent"):"CentroidAggregate"===J?(F=z?u.polygonCentroid(z):u.extentCentroid(H.getGeometryExtent(e(U,F))),p.aggregateGeometries={x:F[0],y:F[1],spatialReference:U},p.outStatisticFieldName=
T||"centroid"):"ConvexHullAggregate"===J&&(p.aggregateGeometries=z,p.outStatisticFieldName=T||"convexHull");return p}_getStatisticValue(p,F,Q,e){const {onStatisticField:J,statisticType:T}=p;p=null;p=Q?.has(J)?Q.get(J):A.isStringField(this.fieldsIndex.get(J))||this._isAnyDateField(J)?K.calculateStringStatistics({values:F,returnDistinct:e}):K.calculateStatistics({values:e?[...(new Set(F))]:F,minValue:null,maxValue:null,useSampleStdDev:!0});Q&&Q.set(J,p);return p["var"===T?"variance":T]}_getPercentileValue(p,
F){const {onStatisticField:Q,statisticParameters:e,statisticType:J}=p,{value:T,orderBy:L}=e;p=this.fieldsIndex.get(Q);return K.calculatePercentile(F,{value:T,orderBy:L,fieldType:p?.type,isDiscrete:"percentile_disc"===J})}_getAttributeValues(p,F,Q){if(Q.has(F))return Q.get(F);const e=this.fieldsIndex.get(F),J=this.items.map(T=>p.getFieldValue(T,F,e));Q.set(F,J);return J}_calculateUniqueValues(p,F){const Q={},e=this.items,J=e.length;for(let T=0;T<J;T++){const L=e[T],U=[];for(const P of p)U.push(P[T]);
const S=U.join(",");null==Q[S]?Q[S]={count:1,data:U,items:[L],itemPositions:[T]}:(F||Q[S].count++,Q[S].items.push(L),Q[S].itemPositions.push(T))}return Q}async _getDataValues(p,F=!0){const Q=new n(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:e,scale:J,timeZone:T}=p;return e?Q.getExpressionValues(this.items,e,{viewingMode:"map",scale:J,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},T):Q.getDataValues(this.items,
w.clone(p),F)}}class m{constructor(p,F){this.coords=p;this.coordsIndex=F}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}g.QueryEngineResult=a;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(c,g){function w({scale:S,translate:P},l){return Math.round((l-P[0])/S[0])}function u({scale:S,translate:P},
l){return Math.round((P[1]-l)/S[1])}function H(S,P,l){const z=[];let y,v,N,G;for(let R=0;R<l.length;R++){const Y=l[R];if(0<R){if(N=w(S,Y[0]),G=u(S,Y[1]),N!==y||G!==v)z.push(P(Y,N-y,G-v)),y=N,v=G}else y=w(S,Y[0]),v=u(S,Y[1]),z.push(P(Y,y,v))}return 0<z.length?z:null}function C(S,P,l,z){return H(S,l?z?U:L:z?L:T,P)}function f(S,P,l,z){const y=[];l=l?z?U:L:z?L:T;for(z=0;z<P.length;z++){const v=H(S,l,P[z]);v&&3<=v.length&&y.push(v)}return y.length?y:null}function n(S,P,l,z){const y=[];l=l?z?U:L:z?L:T;
for(z=0;z<P.length;z++){const v=H(S,l,P[z]);v&&2<=v.length&&y.push(v)}return y.length?y:null}function d({scale:S,translate:P},l){return l*S[0]+P[0]}function r({scale:S,translate:P},l){return P[1]-l*S[1]}function B(S,P,l){const z=Array(l.length);if(!l.length)return z;const [y,v]=S.scale;let N=d(S,l[0][0]);S=r(S,l[0][1]);z[0]=P(l[0],N,S);for(let G=1;G<l.length;G++){const R=l[G];N+=R[0]*y;S-=R[1]*v;z[G]=P(R,N,S)}return z}function A(S,P,l){const z=Array(l.length);for(let y=0;y<l.length;y++)z[y]=B(S,P,
l[y]);return z}function K(S,P,l,z){return B(S,l?z?U:L:z?L:T,P)}function t(S,P,l,z){return A(S,l?z?U:L:z?L:T,P)}function q(S,P,l,z){return A(S,l?z?U:L:z?L:T,P)}function a(S,P,l){let [z,y]=l[0],v=Math.min(z,P[0]),N=Math.min(y,P[1]),G=Math.max(z,P[2]);P=Math.max(y,P[3]);for(let R=1;R<l.length;R++){const [Y,ca]=l[R];z+=Y;y+=ca;0>Y&&(v=Math.min(v,z));0<Y&&(G=Math.max(G,z));0>ca?N=Math.min(N,y):0<ca&&(P=Math.max(P,y))}S[0]=v;S[1]=N;S[2]=G;S[3]=P;return S}function m(S,P){if(!P.length)return null;S[0]=S[1]=
Number.POSITIVE_INFINITY;S[2]=S[3]=Number.NEGATIVE_INFINITY;for(let l=0;l<P.length;l++)a(S,S,P[l]);return S}function p(S,P,l,z,y){P.xmin=w(S,l.xmin);P.ymin=u(S,l.ymin);P.xmax=w(S,l.xmax);P.ymax=u(S,l.ymax);P!==l&&(z&&(P.zmin=l.zmin,P.zmax=l.zmax),y&&(P.mmin=l.mmin,P.mmax=l.mmax));return P}function F(S,P,l,z,y){P.points=C(S,l.points,z,y)??[];return P}function Q(S,P,l,z,y){P.x=w(S,l.x);P.y=u(S,l.y);P!==l&&(z&&(P.z=l.z),y&&(P.m=l.m));return P}function e(S,P,l,z,y){S=f(S,l.rings,z,y);if(!S)return null;
P.rings=S;return P}function J(S,P,l,z,y){S=n(S,l.paths,z,y);if(!S)return null;P.paths=S;return P}const T=(S,P,l)=>[P,l],L=(S,P,l)=>[P,l,S[2]],U=(S,P,l)=>[P,l,S[2],S[3]];c.equals=function(S,P){if(S===P||null==S&&null==P)return!0;if(null==S||null==P)return!1;let l,z,y,v;S&&"upperLeft"===S.originPosition?(l=S.translate[0],z=S.translate[1],S=S.scale[0]):(l=null!=S.extent?S.extent.xmin:0,z=null!=S.extent?S.extent.ymax:0,S=S.tolerance);P&&"upperLeft"===P.originPosition?(y=P.translate[0],v=P.translate[1],
P=P.scale[0]):(y=null!=P.extent?P.extent.xmin:0,v=null!=P.extent?P.extent.ymax:0,P=P.tolerance);return l===y&&z===v&&S===P};c.getQuantizedBoundsCoordsArray=a;c.getQuantizedBoundsCoordsArrayArray=m;c.getQuantizedBoundsPaths=function(S){return m([0,0,0,0],S)};c.getQuantizedBoundsPoints=function(S){const P=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(P,P,S)};c.getQuantizedBoundsRings=function(S){return m([0,0,0,0],S)};c.quantizeBounds=
function(S,P,l){P[0]=w(S,l[0]);P[3]=u(S,l[1]);P[2]=w(S,l[2]);P[1]=u(S,l[3]);return P};c.quantizeExtent=p;c.quantizeGeometry=function(S,P){return S&&P?g.isPoint(P)?Q(S,{},P,!1,!1):g.isPolyline(P)?J(S,{},P,!1,!1):g.isPolygon(P)?e(S,{},P,!1,!1):g.isMultipoint(P)?F(S,{},P,!1,!1):g.isExtent(P)?p(S,{},P,!1,!1):null:null};c.quantizeMultipoint=F;c.quantizePaths=n;c.quantizePoint=Q;c.quantizePoints=C;c.quantizePolygon=e;c.quantizePolyline=J;c.quantizeRings=f;c.quantizeX=w;c.quantizeY=u;c.toQuantizationTransform=
function(S){return S?{originPosition:"upper-left"===S.originPosition?"upperLeft":"lower-left"===S.originPosition?"lowerLeft":S.originPosition,scale:S.tolerance?[S.tolerance,S.tolerance]:[1,1],translate:null!=S.extent?[S.extent.xmin,S.extent.ymax]:[0,0]}:null};c.unquantizeBounds=function(S,P,l){return l?(P[0]=d(S,l[0]),P[1]=r(S,l[3]),P[2]=d(S,l[2]),P[3]=r(S,l[1]),P):[d(S,P[0]),r(S,P[3]),d(S,P[2]),r(S,P[1])]};c.unquantizeCoordsArray=B;c.unquantizeCoordsArrayArray=A;c.unquantizeExtent=function(S,P,l,
z,y){P.xmin=d(S,l.xmin);P.ymin=r(S,l.ymin);P.xmax=d(S,l.xmax);P.ymax=r(S,l.ymax);P!==l&&(z&&(P.zmin=l.zmin,P.zmax=l.zmax),y&&(P.mmin=l.mmin,P.mmax=l.mmax));return P};c.unquantizeMultipoint=function(S,P,l,z,y){null!=l&&(P.points=K(S,l.points,z,y));return P};c.unquantizePaths=t;c.unquantizePoint=function(S,P,l,z,y){if(null==l)return P;P.x=d(S,l.x);P.y=r(S,l.y);P!==l&&(z&&(P.z=l.z),y&&(P.m=l.m));return P};c.unquantizePoints=K;c.unquantizePolygon=function(S,P,l,z,y){null!=l&&(P.rings=q(S,l.rings,z,y));
return P};c.unquantizePolyline=function(S,P,l,z,y){null!=l&&(P.paths=t(S,l.paths,z,y));return P};c.unquantizeRings=q;c.unquantizeX=d;c.unquantizeY=r;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),function(c,g,w,u,H,C){class f{constructor(n,d,
r){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=n.returnDistinctValues??!1;this.fieldsIndex=r;this.featureAdapter=d;if((d=n.outFields)&&!d.includes("*")){this.outFields=d;n=0;for(const A of d){var B=c.getExpressionFromFieldName(A);B=(d=this.fieldsIndex.get(B))?null:c.getWhereClause(B,r);d=d?d.name:c.getAliasFromFieldName(A)||`FIELD_EXP_${n++}`;this._fieldDataCache.set(A,{alias:d,clause:B})}}}countDistinctValues(n){if(!this.returnDistinctValues)return n.length;
n.forEach(d=>this.getAttributes(d));return this._returnDistinctMap.size}getAttributes(n){n=this._processAttributesForOutFields(n);return this._processAttributesForDistinctValues(n)}getFieldValue(n,d,r){const B=r?r.name:d;let A=null;this._fieldDataCache.has(B)?A=this._fieldDataCache.get(B)?.clause:r||(A=c.getWhereClause(d,this.fieldsIndex),this._fieldDataCache.set(B,{alias:B,clause:A}));return r?this.featureAdapter.getAttribute(n,B):A?.calculateValue(n,this.featureAdapter)}getDataValues(n,d,r=!0){const B=
d.normalizationType,A=d.normalizationTotal,K=this.fieldsIndex.get(d.field),t=w.isDateOnlyField(K)||w.isTimestampOffsetField(K),q=w.isTimeOnlyField(K);return n.map(a=>{let m=d.field&&this.getFieldValue(a,d.field,this.fieldsIndex.get(d.field));d.field2?(m=`${H.processNullValue(m)}${d.fieldDelimiter}${H.processNullValue(this.getFieldValue(a,d.field2,this.fieldsIndex.get(d.field2)))}`,d.field3&&(m=`${m}${d.fieldDelimiter}${H.processNullValue(this.getFieldValue(a,d.field3,this.fieldsIndex.get(d.field3)))}`)):
"string"===typeof m&&r&&(t?m=m?(new Date(m)).getTime():null:q&&(m=m?u.timeOnlyToMilliseconds(m):null));B&&Number.isFinite(m)&&(a="field"===B&&d.normalizationField?this.getFieldValue(a,d.normalizationField,this.fieldsIndex.get(d.normalizationField)):null,m=H.getNormalizedValue(m,B,a,A));return m})}async getExpressionValues(n,d,r,B,A){const {arcadeUtils:K}=await C.loadArcade(),t=K.hasGeometryOperations(d);t&&await K.enableGeometryOperations();const q=K.createFunction(d),a=K.getViewInfo(r),m={fields:this.fieldsIndex.fields};
return n.map(p=>{p={attributes:this.featureAdapter.getAttributes(p),layer:m,geometry:t?{...g.getGeometry(B.geometryType,B.hasZ,B.hasM,this.featureAdapter.getGeometry(p)),spatialReference:r?.spatialReference}:null};p=K.createExecContext(p,a,A);return K.executeFunction(q,p)})}validateItem(n,d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testFeature(n,this.featureAdapter)??!1}validateItems(n,
d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:c.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testSet(n,this.featureAdapter)??!1}_processAttributesForOutFields(n){const d=this.outFields;if(!d?.length)return this.featureAdapter.getAttributes(n);const r={};for(const B of d){const {alias:A,clause:K}=this._fieldDataCache.get(B);r[A]=K?K.calculateValue(n,this.featureAdapter):this.featureAdapter.getAttribute(n,A)}return r}_processAttributesForDistinctValues(n){if(null==
n||!this.returnDistinctValues)return n;var d=this.outFields,r=[];if(d)for(const A of d){var {alias:B}=this._fieldDataCache.get(A);r.push(n[B])}else for(B in n)r.push(n[B]);d=`${(d||["*"]).join(",")}=${r.join(",")}`;r=this._returnDistinctMap.get(d)||0;this._returnDistinctMap.set(d,++r);return 1<r?null:n}}return f})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B,A,K,t){function q(e){e=Q.exec(e);if(!e)return null;const {hh:J,mm:T,ss:L,ms:U}=e.groups;return Number(J)*H.millisecondsPerTimeUnit.hours+Number(T)*H.millisecondsPerTimeUnit.minutes+Number(L)*H.millisecondsPerTimeUnit.seconds+Number(U||0)}function a(e,J){e=null!=e?e:"";null!=J&&J&&(e=e?"("+e+") AND ("+J+")":J);return e}function m(e){const J=e.layer;return e.fields.filter(T=>!J.getField(T))}function p(e){const J=e.layer;return e.fields.filter(T=>{T=J.getFieldUsageInfo(T);
return!T||!T.supportsStatistics})}let F=null;const Q=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;c.calculateHeatmapStats=function(e,J=18,T,L,U){const S=new Float64Array(L*U);J=Math.round(u.pt2px(J));let P=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;T=r.createValueFunction(T);for(const {geometry:v,attributes:N}of e){const {x:G,y:R}=v;e=Math.max(0,G-J);var z=Math.max(0,R-J);const Y=Math.min(U,R+J),ca=Math.min(L,G+J),ja=+T(N);for(;z<Y;z++)for(let na=
e;na<ca;na++){var y=z*L+na;const sa=r.evaluateDensityKernel(na-G,z-R,J)*ja;y=S[y]+=sa;P=Math.min(P,y);l=Math.max(l,y)}}return{min:P,max:l}};c.getDataValues=async function(e,J,T=!0){if(!J)return[];const {field:L,field2:U,field3:S,fieldDelimiter:P,fieldInfos:l,timeZone:z}=e;var y=L&&l?.find(ta=>ta.name.toLowerCase()===L.toLowerCase());const v=y?d.isTimeOnlyField(y):!1,N=y?B.isAnyDateField(y):!1,G=e.valueExpression,R=e.normalizationType,Y=e.normalizationField,ca=e.normalizationTotal,ja=[];y=e.viewInfoParams;
let na=null,sa=null;if(G){if(!F){const {arcadeUtils:ta}=await K.loadArcade();F=ta}F.hasGeometryOperations(G)&&await F.enableGeometryOperations();na=F.createFunction(G);sa=y?F.getViewInfo({viewingMode:y.viewingMode,scale:y.scale,spatialReference:new C(y.spatialReference)}):null}e=e.fieldInfos;const ua=J[0]&&"declaredClass"in J[0]&&"esri.Graphic"===J[0].declaredClass||!e?null:{fields:e};J.forEach(ta=>{var wa=ta.attributes;if(G){var xa=F.createExecContext(ua?{...ta,layer:ua}:ta,sa,z);xa=F.executeFunction(na,
xa)}else wa&&(xa=wa[L],U?(xa=`${A.processNullValue(xa)}${P}${A.processNullValue(wa[U])}`,S&&(xa=`${xa}${P}${A.processNullValue(wa[S])}`)):"string"===typeof xa&&T&&(N?xa=xa?(new Date(xa)).getTime():null:v&&(xa=xa?q(xa):null)));R&&"number"===typeof xa&&isFinite(xa)&&(wa=wa&&parseFloat(wa[Y]),xa=A.getNormalizedValue(xa,R,wa,ca));ja.push(xa)});return ja};c.getRangeExpr=function(e,J,T){J=null!=J?e+" \x3e\x3d "+J:"";e=null!=T?e+" \x3c\x3d "+T:"";T="";return(T=J&&e?a(J,e):J||e)?"("+T+")":""};c.getSQLFilterForNormalization=
function(e){const J=e.field,T=e.normalizationType;e=e.normalizationField;let L;if("field"===T)L="(NOT "+e+" \x3d 0)";else if("log"===T||"natural-log"===T||"square-root"===T)L=`(${J} > 0)`;return L};c.getSumOfAttributesExpr=function(e,J,T){const L=[],U=[],S=[],P=[],l=[];e.forEach((v,N)=>{const G=v.field?"field":"expression",R=v.field||v.valueExpression;v.field?(l.push(R),U.push(`var ${G}${N} = Number($feature["${R}"]);`)):(L.push(`function getValueForExpr${N}() {\n  ${R} \n}`),U.push(`var ${G}${N} = Number(getValueForExpr${N}());`));
T||S.push(`${G}${N} = IIf(${G}${N} < 0, 0, ${G}${N});`);P.push(`${G}${N}`)});e="return sum;";const z=L.length?null:l.reduce((v,N)=>`${v} + ${N}`);let y=null;J||T?J?T||(e="return IIf(sum \x3e\x3d 0, sum, null);",z&&(y=`(( ${z} ) >= 0)`)):(e="return IIf(sum !\x3d 0, sum, null);",z&&(y=`(( ${z} ) <> 0)`)):(e="return IIf(sum \x3e 0, sum, null);",z&&(y=`(( ${z} ) > 0)`));return{valueExpression:[L.length?L.join("\n"):"",U.join("\n"),S.join("\n"),`var sum = ${P.join(" + ")};`,e].filter(Boolean).join("\n\n"),
sqlExpression:z,sqlWhere:y}};c.mergeWhereClauses=a;c.quantizeFeatures=function(e,J,T,L){const U=n.isWrappable(T)?n.getInfo(T):null,S=U?Math.round((U.valid[1]-U.valid[0])/J.scale[0]):null;return e.map(P=>{const l=new t(P.geometry);f.quantizePoint(J,l,l,l.hasZ,l.hasM);if(U){var z=S??0,y=L[0];0>l.x?l.x+=z:l.x>y&&(l.x-=z)}P.geometry=l;return P})};c.timeOnlyToMilliseconds=q;c.verifyBasicFieldValidity=function(e,J,T){const L=m({layer:e,fields:J});if(L.length)return new w(T,"Unknown fields: "+L.join(", ")+
". You can only use fields defined in the layer schema");e=p({layer:e,fields:J});if(e.length)return new w(T,"Unsupported fields: "+e.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};c.verifyFieldType=function(e,J,T,L){let U;J?J.name!==e.objectIdField&&L.includes(J.type)||(U=new w(T,"'field' should be one of these types: "+L.join(","))):U=new w(T,"'field' is not defined in the layer schema");return U};c.verifyFilterValidty=function(e,
J){if(e&&"intersects"!==e.spatialRelationship)return new w(J,"Only 'intersects' spatialRelationship is supported for featureFilter")};c.verifyNumericField=function(e,J,T){let L;J?J.name!==e.objectIdField&&d.isNumericField(J)||(L=new w(T,"'field' should be one of these numeric types: "+d.numericTypes.join(","))):L=new w(T,"'field' is not defined in the layer schema");return L};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(c){function g(u){return u?
72*u/96:0}const w=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;c.castRenderScreenPointArray=function(u){return u};c.castRenderScreenPointArray3=function(u){return u};c.castScreenPointArray=function(u){return u};c.createRenderScreenPoint=function(u=0,H=0){return{x:u,y:H}};c.createRenderScreenPointArray=function(u=0,H=0){return[u,H]};c.createRenderScreenPointArray3=function(u=0,H=0,C=0){return[u,H,C]};c.createScreenPoint=function(u=0,H=0){return{x:u,y:H}};c.createScreenPointArray=function(u=0,H=0){return[u,
H]};c.pt2px=function(u){return u?u/72*96:0};c.px2pt=g;c.screenPointArrayToObject=function(u,H){return H?(H.x=u[0],H.y=u[1],H):{x:u[0],y:u[1]}};c.screenPointObjectToArray=function(u,H){return H?(H[0]=u.x,H[1]=u.y,2<H.length&&(H[2]=0),H):[u.x,u.y]};c.toPt=function(u){if("string"===typeof u){var H=u.match(w);if(H){var C=Number(H[1]);H=H[3]&&H[3].toLowerCase();u="-"===u.charAt(0);C="px"===H?g(C):C;return u?-C:C}console.warn("screenUtils.toPt: input not recognized!");return null}return u};Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(c,g,w,u){function H(n,d,r){return 0===n?0:n*f[d]/f[r]}function C(n){switch(n){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const f={milliseconds:1,seconds:1E3,
minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};c.convertTime=H;c.isValidDate=function(n){return n instanceof Date&&!isNaN(n.getTime())};c.makeUTCTime=function(n,d,r="milliseconds"){d=new Date(H(d,r,"milliseconds"));d.setUTCFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return d};c.mergeTimeExtents=function(n,d){return n&&d?n.intersection(d):n||d};c.millisecondsPerTimeUnit=f;c.offsetDate=function(n,d,r,B=w.system){B=new u.IANAZone(g.resolveTimeZone(B));
n=u.DateTime.fromJSDate(n,{zone:B});B="decades"===r||"centuries"===r?"year":C(r);"decades"===r&&(d*=10);"centuries"===r&&(d*=100);return n.plus({[B]:d}).toJSDate()};c.offsetDateUTC=function(n,d,r="milliseconds"){n=n.getTime();d=H(d,r,"milliseconds");return new Date(n+d)};c.resetUTCDate=function(n,d){n=new Date(n.getTime());n.setUTCFullYear(d.getFullYear(),d.getMonth(),d.getDate());return n};c.timeSinceUTCMidnight=function(n,d="milliseconds"){const r=H(n.getUTCHours(),"hours","milliseconds"),B=H(n.getUTCMinutes(),
"minutes","milliseconds"),A=H(n.getUTCSeconds(),"seconds","milliseconds");n=n.getUTCMilliseconds();return H(r+B+A+n,"milliseconds",d)};c.truncateDate=function(n,d,r=w.system){r=new u.IANAZone(g.resolveTimeZone(r));n=u.DateTime.fromJSDate(n,{zone:r});if("decades"===d||"centuries"===d)return n=n.startOf("year"),{year:r}=n,n.set({year:r-r%("decades"===d?10:100)}).toJSDate();d=C(d);return n.startOf(d).toJSDate()};c.truncateLocalTime=function(n){const d=new Date(0);d.setHours(0);d.setMinutes(0);d.setSeconds(0);
d.setMilliseconds(0);d.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate());return d};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(c,g,w,u,H){function C(f,n,d,r){let {color:B,ratio:A}=n,{color:K,ratio:t}=d;t===A&&(1===t?A-=1E-6:t+=1E-6);n=g.clamp((r-A)/(t-A),0,1);u.lerp(f,B.toArray(),
K.toArray(),n)}c.createValueFunction=function(f){return"function"===typeof f?f:f?n=>+n[f]:()=>1};c.evaluateDensityKernel=function(f,n,d){f=Math.sqrt(f**2+n**2)/d;return 1<f?0:3/(Math.PI*d**2)*(1-f**2)**2};c.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(f){return w.px2pt(2.4*f)};c.generateGradient=function(f){const n=new Uint8ClampedArray(2048);f=f.filter(({ratio:K})=>0<=K&&1>=K).sort((K,t)=>K.ratio-t.ratio).map(({color:K,ratio:t})=>({color:K,ratio:Math.max(t,.001)}));if(1>f.length)return n;
let d=f[0],r=f[0],B=1;const A=H.create();for(let K=0;512>K;K++){const t=(K+.5)/512;for(;t>r.ratio&&B<f.length;)d=r,r=f[B++];C(A,d,r,t);n.set(A,4*K)}return n};c.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(f){return w.pt2px(f)/2.4};c.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),
function(c,g,w,u,H,C){function f(t){return String(t).padStart(2,"0")}function n(t,q,a){if("date"===q||"number"===q){"number"===q&&(t=new Date(t));q=a?t.getFullYear():t.getUTCFullYear();const m=f((a?t.getMonth():t.getUTCMonth())+1),p=f(a?t.getDate():t.getUTCDate()),F=f(a?t.getHours():t.getUTCHours()),Q=f(a?t.getMinutes():t.getUTCMinutes());t=f(a?t.getSeconds():t.getUTCSeconds());t=`TIMESTAMP'${q}-${m}-${p} ${F}:${Q}:${t}'`}return t}function d(t,q){if(q instanceof Date)return"date";if("number"===typeof q)return"number";
if("string"===typeof q&&(t=t.getField(q),"\x3cnow\x3e"!==q.toLowerCase()&&w.isDateField(t)))return"field"}const r={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},B={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},A=new Set(["integer","small-integer"]);let K=null;c.castIntegerFieldToFloat=function(t){return`cast(${t} as float)`};c.dateTypes=
["date","date-only","timestamp-offset"];c.defaultBasemapGroups=r;c.fieldDelimiter=",";c.formatAnyDate=function(t,q){const {format:a,timeZoneOptions:m,fieldType:p}=q??{};let F;m&&({timeZone:Q,timeZoneName:F}=C.getTimeZoneFormattingOptions(m.layerTimeZone,m.datesInUnknownTimezone,m.viewTimeZone,g.convertDateFormatToIntlOptions(a||"short-date-short-time"),p));if("string"===typeof t&&isNaN(Date.parse("time-only"===p?`1970-01-01T${t}Z`:t)))return t;switch(p){case "date-only":var Q=g.convertDateFormatToIntlOptions(a||
"short-date");return"string"===typeof t?g.formatDateOnly(t,{...Q}):g.formatDate(t,{...Q,timeZone:C.utc});case "time-only":return Q=g.convertDateFormatToIntlOptions(a||"short-time"),"string"===typeof t?g.formatTimeOnly(t,Q):g.formatDate(t,{...Q,timeZone:C.utc});case "timestamp-offset":if(!Q&&"string"===typeof t&&(new Date(t)).toISOString()!==t)return t;Q=(q=a||m?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0)?{...q,timeZone:Q,timeZoneName:F}:void 0;return"string"===typeof t?g.formatTimestamp(t,
Q):g.formatDate(t,Q);default:return q=a||m?g.convertDateFormatToIntlOptions(a||"short-date-short-time"):void 0,g.formatDate("string"===typeof t?new Date(t):t,q?{...q,timeZone:Q,timeZoneName:F}:void 0)}};c.getBasemapGroup=function(t,q=r){for(const a in q)if(q[a].includes(t))return a};c.getBasemapId=function(t,q,a=!0){let m=null;t&&("string"===typeof t?q.includes(t)&&(m=t):m=H.getWellKnownBasemapId(t));return a?m||"gray":m};c.getDateDiffSQL=function(t,q,a,m){const {hasQueryEngine:p}=t;a=n(a,d(t,a),
p);t=n(q,d(t,q),p);t=`(${a} - ${t})`;m=B[m];q="/";1>m&&(m=1/m,q="*");return{sqlExpression:1===m?t:`(${t} ${q} ${m})`,sqlWhere:null}};c.getDateType=d;c.getFieldsList=async function(t){const {field:q,field2:a,field3:m,normalizationField:p,valueExpression:F}=t;t=[];F&&(K||({arcadeUtils:t}=await u.loadArcade(),K=t),t=K.extractFieldNames(F));q&&t.push(q);a&&t.push(a);m&&t.push(m);p&&t.push(p);return t};c.getNormalizationType=function(t){let q=t.normalizationType;q||(t.normalizationField?q="field":null!=
t.normalizationTotal&&(q="percent-of-total"));return q??void 0};c.isAnyDateField=function(t){return w.isDateField(t)||w.isDateOnlyField(t)||w.isTimestampOffsetField(t)};c.isIntegerField=function(t,q){t=q&&t.getField(q);return!!t&&A.has(t.type)};c.unitValueInDays=B;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(c,g,w,u,H,C,f,n,d,r){function B(z,y){let v;if("string"===typeof z){const N=z in r.esriBasemapDefinitions,G=!N&&z.includes("/");if(!N&&!G)return y=Object.entries(r.esriBasemapDefinitions).filter(([,R])=>w.apiKey&&!R.classic||!w.apiKey&&(R.classic||R.is3d)).map(([R])=>`"${R}"`).sort().join(", "),H.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${z}. Try one of these: ${y}`),null;y&&(v=y[z]);v||(v=N?g.fromId(z):new g({style:{id:z}}),y&&(y[z]=v))}else v=n.ensureType(g,
z);v?.destroyed&&(H.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:v}),v=null);return v}function A(z){if(P)return P(z);let y=null;z=a(z);const v=!z?.baseLayers.length;for(const G in r.esriBasemapDefinitions){var N=Q(r.esriBasemapDefinitions[G]);N=J(z,N,{mustMatchReferences:v});if("equal"===N){y=G;break}"base-layers-equal"===N&&(y=G)}return y}function K(z,y){const v=new u;z.forEach(N=>{const G=y.find(R=>"scene"!==R.type&&L(p(N),p(R)))||N;v.includes(G)?
v.push(N):v.push(G)});return v}function t(z){if(q(z.url))return!0;if("vector-tile"===z.type)for(const y in z.sourceNameToSource)if(q(z.sourceNameToSource[y]?.sourceUrl))return!0;return!1}function q(z){if(!z)return!1;z=new f.Url(f.makeAbsolute(z));return!!z.authority&&l.test(z.authority)}function a(z){return z?!z.loaded&&z.resourceInfo?Q(z.resourceInfo.data):{baseLayers:m(z.baseLayers),referenceLayers:m(z.referenceLayers)}:null}function m(z){return(u.isCollection(z)?z.toArray():z).map(p)}function p(z){return{type:z.type,
effect:"effect"in z?z.effect:void 0,url:U("urlTemplate"in z&&z.urlTemplate||z.url||"styleUrl"in z&&z.styleUrl||""),minScale:"minScale"in z&&null!=z.minScale?z.minScale:0,maxScale:"maxScale"in z&&null!=z.maxScale?z.maxScale:0,opacity:null!=z.opacity?z.opacity:1,visible:null!=z.visible?!!z.visible:!0,sublayers:"map-image"!==z.type&&"wms"!==z.type||null==z.sublayers?void 0:z.sublayers?.map(y=>({id:y.id,visible:y.visible})),activeLayerId:"wmts"===z.type?z.activeLayer?.id:void 0}}function F(z){return z.isReference||
"ArcGISSceneServiceLayer"===z.layerType}function Q(z){return z?{baseLayers:e((z.baseMapLayers??[]).filter(y=>!F(y))),referenceLayers:e((z.baseMapLayers??[]).filter(y=>F(y)))}:null}function e(z){return z.map(y=>{let v;switch(y.layerType){case "VectorTileLayer":v="vector-tile";break;case "ArcGISTiledMapServiceLayer":v="tile";break;case "ArcGISSceneServiceLayer":v="scene";break;default:v="unknown"}return{type:v,effect:y.effect,url:U(y.templateUrl||y.urlTemplate||y.styleUrl||y.url),minScale:y.minScale??
0,maxScale:y.maxScale??0,opacity:y.opacity??1,visible:null!=y.visibility?!!y.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function J(z,y,v){return null!=z!==(null!=y)?"not-equal":z&&y?T(z.baseLayers,y.baseLayers)?T(z.referenceLayers,y.referenceLayers)?"equal":v.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function T(z,y){if(z.length!==y.length)return!1;for(let v=0;v<z.length;v++)if(!L(z[v],y[v]))return!1;return!0}function L(z,y){if(z.type!==y.type||z.url!==y.url||
z.minScale!==y.minScale||z.maxScale!==y.maxScale||z.visible!==y.visible||z.opacity!==y.opacity||!d.effectEquals(z.effect,y.effect))return!1;if(null!=z.activeLayerId||null!=y.activeLayerId)return z.activeLayerId===y.activeLayerId;if(null!=z.sublayers||null!=y.sublayers){if(null==z.sublayers||null==y.sublayers||z.sublayers.length!==y.sublayers.length)return!1;for(let v=0;v<z.sublayers.length;v++){const N=z.sublayers.at(v),G=y.sublayers.at(v);if(N?.id!==G?.id||N?.visible!==G?.visible)return!1}}return!0}
function U(z){return z?f.normalize(z).replace(/^\s*https?:/i,"").toLowerCase():""}function S(z){return"portalItem"in z?z.portalItem?.thumbnailUrl:void 0}let P;const l=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;c.clonePreservingTiledLayers=function(z,y=null){z=B(z);if(!z)return null;z=z.clone();y&&(z.baseLayers=K(z.baseLayers,y.baseLayers),z.referenceLayers=K(z.referenceLayers,y.referenceLayers));return z};c.contentEquals=function(z,y){if(z===y||null!=z?.portalItem?.id&&z.portalItem.id===y?.portalItem?.id)return!0;
z=a(z);y=a(y);return"equal"===J(z,y,{mustMatchReferences:!0})};c.createCache=function(){return{}};c.destroyCache=function(z){for(const y in z)C.destroyMaybe(z[y]),delete z[y]};c.ensureType=B;c.findSpatialReference=function(z,y){if(null==y||null==z)return{spatialReference:null,updating:!1};if("not-loaded"===y.loadStatus)return y.load(),{spatialReference:null,updating:!0};if(y.spatialReference)return{spatialReference:y.spatialReference,updating:!1};if(0===y.baseLayers.length)return{spatialReference:null,
updating:!1};y=y.baseLayers.at(0);switch(y.loadStatus){case "not-loaded":y.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}y=(("supportedSpatialReferences"in y?y.supportedSpatialReferences:null)||["tileInfo"in y?y.tileInfo?.spatialReference:y.spatialReference]).filter(Boolean);const v=z.spatialReference;return v?{spatialReference:y.find(N=>v.equals(N))??y[0]??null,updating:!1}:{spatialReference:y[0],updating:!1}};c.getBasemapThumbnailUrl=
function(z){if(!z)return null;var {thumbnailUrl:y}=z;return y?y:(y=A(z))?r.esriBasemapDefinitions[y].thumbnailUrl:C.mappedFind(z.baseLayers,S)};c.getWellKnownBasemapId=A;c.hasDeveloperBasemapLayer=function(z){return!!z?.baseLayers.concat(z.referenceLayers).some(t)};c.isBasemap3D=function(z){return"Web Scene"===z.portalItem?.type||z.referenceLayers.some(y=>"scene"===y.type)};c.isBasemapInBeta=function(z){return!!z?.portalItem?.tags?.some(y=>"beta"===y.toLowerCase())};c.isBasemapLayer=function(z,y){return z.basemap?.referenceLayers?.some(v=>
v.uid===y)||z.basemap?.baseLayers?.some(v=>v.uid===y)};c.isDeveloperBasemapLayer=t;c.overrideGetWellKnownBasemapId=function(z){P=z};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B,A,K,t,q,a,m,p,F,Q,e,J,T){var L;let U=0;C=L=class extends C.JSONSupportMixin(n){constructor(l){super(l);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+U++;this.baseLayers=new u;this.referenceLayers=new u;const z=y=>{y.parent&&y.parent!==this&&"remove"in y.parent&&y.parent.remove(y);y.parent=this;"elevation"===y.type&&r.getLogger(this).error(`Layer '${y.title}, id:${y.id}' of type '${y.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",y=>z(y.item)),this.referenceLayers.on("after-add",y=>z(y.item)),this.baseLayers.on("after-remove",y=>{y.item.parent=null}),this.referenceLayers.on("after-remove",y=>{y.item.parent=null})])}initialize(){this.when().catch(l=>{r.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,l)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var l=this.baseLayers.toArray();for(const z of l)z.destroy();
l=this.referenceLayers.toArray();for(const z of l)z.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=B.destroyMaybe(this.portalItem)}normalizeCtorArgs(l){l&&"resourceInfo"in l&&(this._set("resourceInfo",l.resourceInfo),l={...l},delete l.resourceInfo);return l}set baseLayers(l){this._set("baseLayers",H.referenceSetter(l,this._get("baseLayers")))}_writeBaseLayers(l,z,y){const v=[];l&&(y={...y,layerContainerType:"basemap"},this.baseLayers.forEach(N=>{N=T.getLayerJSON(N,
y.webmap?y.webmap.getLayerJSONFromResourceInfo(N):null,y);null!=N&&v.push(N)}),this.referenceLayers.forEach(N=>{const G=T.getLayerJSON(N,y.webmap?y.webmap.getLayerJSONFromResourceInfo(N):null,y);null!=G&&("scene"!==N.type&&(G.isReference=!0),v.push(G))}));z.baseMapLayers=v}set referenceLayers(l){this._set("referenceLayers",H.referenceSetter(l,this._get("referenceLayers")))}writeTitle(l,z){z.title=l||"Basemap"}load(l){this.addResolvingPromise(this._loadFromSource(l));return Promise.resolve(this)}loadAll(){return d.loadAll(this,
l=>{l(this.baseLayers,this.referenceLayers)})}clone(){const l={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(z=>f.isClonable(z)?z.clone():z),referenceLayers:this.referenceLayers.map(z=>f.isClonable(z)?z.clone():z)};this.loaded&&(l.loadStatus="loaded");return(new L({resourceInfo:this.resourceInfo})).set(l)}read(l,z){this.resourceInfo||this._set("resourceInfo",{data:l,context:z});super.read(l,z)}write(l,z){l=l||{};z?.origin||(z={origin:"web-map",...z});super.write(l,
z);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(l.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(y=>{y=f.clone(y);y.url&&K.isProtocolRelative(y.url)&&(y.url=`https:${y.url}`);y.templateUrl&&K.isProtocolRelative(y.templateUrl)&&(y.templateUrl=`https:${y.templateUrl}`);return y}));return l}async _loadFromSource(l){const {resourceInfo:z,portalItem:y,style:v}=this;A.throwIfAborted(l);const N=[];z?(N.push(this._loadLayersFromJSON(z.data,z.context?z.context.url:null,l)),z.data.id&&!z.data.title&&
N.push(e.getBasemapTitle(z.data.id).then(G=>{G&&this.read({title:G},z.context)}))):y?N.push(this._loadFromItem(y,l)):v&&N.push(this._loadFromStylesService(v,l));await Promise.all(N)}async _loadLayersFromJSON(l,z,y){const v=this.resourceInfo?.context,N=this.portalItem?.portal||v?.portal||null,G=P[v?.origin||""]??"web-map",{populateOperationalLayers:R}=await new Promise((ca,ja)=>c(["./layers/support/layersCreator"],ca,ja)),Y=[];A.throwIfAborted(y);if(l.baseMapLayers&&Array.isArray(l.baseMapLayers)){z=
{context:{...v,origin:G,url:z,portal:N,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const ca=ja=>"web-scene"===G&&"ArcGISSceneServiceLayer"===ja.layerType||ja.isReference;y=R(this.baseLayers,l.baseMapLayers.filter(ja=>!ca(ja)),z);Y.push(y);l=R(this.referenceLayers,l.baseMapLayers.filter(ca),z);Y.push(l)}await Promise.allSettled(Y)}async _loadFromItem(l,z){const y=await (await l.load(z)).fetchData("json",z),v=K.urlToObject(l.itemUrl??"");this._set("resourceInfo",{data:y.baseMap??
{},context:{origin:S[l.type||""]??"web-map",portal:l.portal||F.getDefault(),url:v}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:y.spatialReference},this.resourceInfo.context);this.read({title:l.title,thumbnailUrl:l.thumbnailUrl},{origin:"portal-item",portal:l.portal||F.getDefault(),url:v});return this._loadLayersFromJSON(this.resourceInfo.data,v,z)}async _loadFromStylesService(l,z){var y=`${l.serviceUrl}/${l.id}`;l=(await w(y,{query:{language:l.getLanguageParamValue(),
places:l.places,worldview:l.worldview},signal:z?.signal})).data;y=K.urlToObject(y);this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:y}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:l.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,y,z)}static fromId(l){return(l=e.esriBasemapDefinitions[l])?l.itemId?new L({portalItem:{id:l.itemId,portal:{url:"https://www.arcgis.com"}}}):L.fromJSON(l,
{origin:l.is3d?"web-scene":"web-map"}):null}};g.__decorate([t.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(l,z,y,v){this._writeBaseLayers(l,z,v)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:u}},writer(l,z,y,v){this._writeBaseLayers(l,z,v)}}}}}})],C.prototype,"baseLayers",null);g.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],C.prototype,"id",void 0);g.__decorate([t.property({type:Q})],C.prototype,"portalItem",void 0);
g.__decorate([t.property()],C.prototype,"referenceLayers",null);g.__decorate([t.property({readOnly:!0})],C.prototype,"resourceInfo",void 0);g.__decorate([t.property({type:p})],C.prototype,"spatialReference",void 0);g.__decorate([t.property({type:J})],C.prototype,"style",void 0);g.__decorate([t.property()],C.prototype,"thumbnailUrl",void 0);g.__decorate([t.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],C.prototype,"title",void 0);g.__decorate([m.writer("title")],C.prototype,
"writeTitle",null);C=L=g.__decorate([a.subclass("esri.Basemap")],C);const S={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},P={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return C})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(c,g){c.castForReferenceSetter=function(w){return w};c.referenceSetter=function(w,u,H=g){u||=new H;if(u===w)return u;u.removeAll();w&&(Array.isArray(w)||"items"in w&&Array.isArray(w.items))?
u.addMany(w):w&&u.add(w);return u};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(c,g,w,u,H,C,f,n){const d=r=>{r=class extends r{constructor(...B){super(...B);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(A=>
{const K=this.load.bind(this);this.load=t=>{const q=new Promise((a,m)=>{const p=H.onAbortOrThrow(t,m);this.destroyed&&m(new g("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(a,m).finally(()=>{p&&p.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const a=this._loadController=new AbortController;K({signal:a.signal})}A();return q}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},A=>{this._set("loadStatus","failed");this._set("loadError",A);this._loadController=null})}destroy(){this._loadController&&(this._loadController=w.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new g("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};c.__decorate([f.property({readOnly:!0})],r.prototype,"loaded",null);c.__decorate([f.property({readOnly:!0})],r.prototype,"loadError",void 0);c.__decorate([f.property({clonable:!1})],r.prototype,"loadStatus",void 0);c.__decorate([f.property({type:[C],readOnly:!0})],r.prototype,"loadWarnings",null);return r=c.__decorate([n.subclass("esri.core.Loadable")],r)};u=class extends d(u.EsriPromise){};u=c.__decorate([n.subclass("esri.core.Loadable")],
u);(function(r){r.LoadableMixin=d;r.isLoadable=function(B){return!(!B||!B.load)}})(u||={});return u})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(c,g,w,u,H){var C;(function(d){d[d.PENDING=0]="PENDING";d[d.RESOLVED=1]="RESOLVED";d[d.REJECTED=2]="REJECTED"})(C||={});class f{constructor(){this._resolver=u.createResolver();this._status=C.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=C.RESOLVED;this._cleanUp()},()=>{this._status=C.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(d){this._resolvingPromises.push(d);this._tryResolve()}isResolved(){return this._status===C.RESOLVED}isRejected(){return this._status===C.REJECTED}isFulfilled(){return this._status!==C.PENDING}abort(){this._resolver.reject(u.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var d=
u.createResolver(),r=[...this._resolvingPromises,d.promise],B=this._allPromise=Promise.all(r);B.then(()=>{this.isFulfilled()||this._allPromise!==B||this._resolver.resolve()},A=>{this.isFulfilled()||this._allPromise!==B||u.isAbortError(A)||this._resolver.reject(A)});d.resolve()}}}const n=d=>{d=class extends d{constructor(...r){super(...r);this._promiseProps=new f;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,
B){return this._promiseProps.promise.then(()=>this).then(r,B)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return d=g.__decorate([H.subclass("esri.core.Promise")],d)};c.EsriPromise=class extends n(w){};c.EsriPromise=g.__decorate([H.subclass("esri.core.Promise")],c.EsriPromise);c.EsriPromiseMixin=n;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(c,g,w,u){async function H(C,f){const n=[],d=(...B)=>{for(const A of B)null!=A&&(Array.isArray(A)?d(...A):w.isCollection(A)?A.forEach(K=>d(K)):u.isLoadable(A)&&n.push(A))};f(d);let r=null;await g.map(n,async B=>{B=await g.result("loadAll"in B&&"function"===typeof B.loadAll?B.loadAll():B.load());!1!==B.ok||r||(r=B)});if(r)throw r.error;return C}c.loadAll=async function(C,f){await C.load();return H(C,f)};c.loadAllChildren=H;Object.defineProperty(c,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B,A,K,t,q,a,m,p,F,Q,e,J,T,L){function U(v){const N=u.id;return()=>{const G=v.deref();G&&N.findCredential(G.restUrl)&&G.signIn().catch(()=>{})}}const S=v=>Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));var P;let l;const z={PortalGroup:()=>Promise.resolve({default:Q}),PortalItem:()=>new Promise((v,N)=>c(["./PortalItem"],G=>v(S(G)),N)),PortalUser:()=>Promise.resolve({default:T})};f=P=class extends f.JSONSupportMixin(n){constructor(v){super(v);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=
this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=w.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(v){return"string"===typeof v?{url:v}:v}destroy(){y.unregister(this);
this.defaultBasemap=d.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=d.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=d.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=d.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(v){if(v)for(const N of v)w.request.trustedServers.includes(N)||w.request.trustedServers.push(N);return v}readDefaultBasemap(v){return this._readBasemap(v)}readDefaultDevBasemap(v){return this._readBasemap(v)}readDefaultVectorBasemap(v){return this._readBasemap(v)}get extraQuery(){const v=
!this.user?.orgId||this.canSearchPublic;return this.id&&!v?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let v=this.url;if(v){const N=v.indexOf("/sharing");v=0<N?v.substring(0,N):this.url.replace(/\/+$/,"");v+="/sharing/rest"}return v}get thumbnailUrl(){const v=this.restUrl,N=this.thumbnail;return v&&N?this._normalizeSSL(v+"/portals/self/resources/"+N):null}readUrlKey(v){return v?v.toLowerCase():
v}readUser(v){let N=null;v&&(N=T.fromJSON(v),N.portal=this);return N}load(v){const N=(new Promise((G,R)=>c(["../Basemap"],Y=>G(S(Y)),R))).then(({default:G})=>{r.throwIfAborted(v);l=G}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,v)).then(G=>{if(u.id){const R=u.id;this.credential=R.findCredential(this.restUrl);this.credential||this.authMode!==P.AUTH_MODE_AUTO&&this.authMode!==P.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
R.on("credential-create",U(new WeakRef(this))),y.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=G;this.read(G)});this.addResolvingPromise(N);return Promise.resolve(this)}async createElevationLayers(){await this.load();const v=this._getHelperService("defaultElevationLayers"),N=(await new Promise((G,R)=>c(["../layers/ElevationLayer"],Y=>G(S(Y)),R))).default;return v?v.map(G=>new N({id:G.id,url:G.url})):[]}async fetchBasemaps(v,N){const G=await this._fetchBasemaps(v,N);!0===
N?.include3d&&!1!==this.use3dBasemaps&&(v=await this._fetchBasemaps3D(v,N),G.unshift(...v));return G}fetchCategorySchema(v){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",v).then(N=>N.categorySchema):r.isAborted(v)?Promise.reject(r.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(v){const N=this.featuredGroups,G=new e;G.num=100;G.sortField="title";if(N&&N.length){const R=[];for(const Y of N)R.push(`(title:"${Y.title}" AND owner:${Y.owner})`);G.query=
R.join(" OR ");return this.queryGroups(G,v).then(Y=>Y.results)}return r.isAborted(v)?Promise.reject(r.createAbortError()):Promise.resolve([])}fetchRegions(v){const N=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/regions",{...v,query:{culture:N}})}fetchSettings(v){const N=this.user?.culture||this.culture||p.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...v,query:{culture:N}})}static getDefault(){return F.ensureDefaultPortalInstance(()=>
new P)}queryGroups(v,N){return this.queryPortal("/community/groups",v,"PortalGroup",N)}queryItems(v,N){return this.queryPortal("/search",v,"PortalItem",N)}queryUsers(v,N){v.sortField||(v.sortField="username");return this.queryPortal("/community/users",v,"PortalUser",N)}fetchSelf(v=this.authMode,N=!1,G){const R=this.restUrl+"/portals/self";v={authMode:v,query:{culture:p.getLocale().toLowerCase()},withCredentials:!0,...G};"auto"===v.authMode&&(v.authMode="no-prompt");N&&(v.query.default=!0);return this.request(R,
v)}queryPortal(v,N,G,R){const Y=A.ensureType(e,N),ca=ja=>this.request(this.restUrl+v,{...Y.toRequestOptions(this),...R}).then(na=>{const sa=Y.clone();sa.start=na.nextStart;return new J({nextQueryParams:sa,queryParams:Y,total:na.total,results:P._resultsToTypedArray(ja,{portal:this},na,R)})}).then(na=>Promise.all(na.results.map(sa=>"function"===typeof sa.when?sa.when():na)).then(()=>na,sa=>{r.throwIfAbortError(sa);return na}));return G&&z[G]?z[G]().then(({default:ja})=>{r.throwIfAborted(R);return ca(ja)}):
ca()}signIn(){if(this.authMode===P.AUTH_MODE_ANONYMOUS||this.authMode===P.AUTH_MODE_NO_PROMPT&&!u.id)return Promise.reject(new C("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const v=N=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return N||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
N;return this.fetchSelf("immediate")});if(this.user&&this.credential===N)return null;this.credential=N;return this.fetchSelf("immediate")}).then(G=>{G&&(this.sourceJSON=G,this.read(G))});return u.id?u.id.getCredential(this.restUrl,{prompt:this.authMode!==P.AUTH_MODE_NO_PROMPT}).then(N=>v(N)):v(this.credential)}normalizeUrl(v){const N=this.credential?.token;return this._normalizeSSL(N?v+(v.includes("?")?"\x26":"?")+"token\x3d"+N:v)}requestToTypedArray(v,N,G){return this.request(v,N).then(R=>{const Y=
P._resultsToTypedArray(G,{portal:this},R);return Promise.all(Y.map(ca=>"function"===typeof ca.when?ca.when():R)).then(()=>Y,()=>Y)})}request(v,N={}){var G={f:"json",...N.query};const {authMode:R=this.authMode===P.AUTH_MODE_ANONYMOUS||this.authMode===P.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:Y=null,cacheBust:ca=!1,method:ja="auto",responseType:na="json",signal:sa}=N;G={authMode:R,body:Y,cacheBust:ca,method:ja,query:G,responseType:na,timeout:0,signal:sa};N.withCredentials&&(G.withCredentials=
!0);return H(this._normalizeSSL(v),G).then(ua=>ua.data)}toJSON(){throw new C("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(v){if(!v)return null;if(v.declaredClass)throw Error("JSON object is already hydrated");return new P({sourceJSON:v})}_getHelperService(v){const N=this.helperServices&&this.helperServices[v];if(!N)throw new C("portal:service-not-found",`The \`helperServices\` do not include an entry named "${v}"`);return N}async _fetchBasemaps(v,N){const G=
new e;G.query=v||(w.apiKey&&L.supportsApiKey(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);G.disableExtraQuery=!0;v=await this.queryGroups(G,N);if(!v.total)return[];v=v.results[0];G.num=100;G.query='type:"Web Map" -type:"Web Application"';G.sortField=v.sortField||"name";G.sortOrder=v.sortOrder||"desc";N=await v.queryItems(G,N);return N.total?N.results.filter(R=>"Web Map"===R.type).map(R=>new l({portalItem:R})):
[]}async _fetchBasemaps3D(v,N){v=v||this.basemapGalleryGroupQuery3D;if(!v)return[];v=new e({query:v,disableExtraQuery:!0});var G=await this.queryGroups(v,N);if(!G.total)return[];G=G.results[0];v.num=100;v.query='type:"Web Scene"';v.sortField=G.sortField||"name";v.sortOrder=G.sortOrder||"desc";N=await G.queryItems(v,N);return N.total?N.results.filter(R=>"Web Scene"===R.type).map(R=>new l({portalItem:R})):[]}_normalizeSSL(v){return v.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(v){return v?
(v=l.fromJSON(v),v.portalItem={portal:this},v):null}static _resultsToTypedArray(v,N,G,R){let Y=[];if(G){const ca=null!=R?R.signal:null;Y=G.listings||G.notifications||G.userInvitations||G.tags||G.items||G.groups||G.comments||G.provisions||G.results||G.relatedItems||G;if(v||N)Y=Y.map(ja=>{ja=Object.assign(v?v.fromJSON(ja):ja,N);"function"===typeof ja.load&&ja.load(ca);return ja})}else Y=[];return Y}};f.AUTH_MODE_ANONYMOUS="anonymous";f.AUTH_MODE_AUTO="auto";f.AUTH_MODE_IMMEDIATE="immediate";f.AUTH_MODE_NO_PROMPT=
"no-prompt";g.__decorate([B.property()],f.prototype,"access",void 0);g.__decorate([B.property()],f.prototype,"allSSL",void 0);g.__decorate([B.property()],f.prototype,"authMode",void 0);g.__decorate([B.property()],f.prototype,"authorizedCrossOriginDomains",void 0);g.__decorate([q.reader("authorizedCrossOriginDomains")],f.prototype,"readAuthorizedCrossOriginDomains",null);g.__decorate([B.property()],f.prototype,"basemapGalleryGroupQuery",void 0);g.__decorate([B.property({json:{name:"3DBasemapGalleryGroupQuery"}})],
f.prototype,"basemapGalleryGroupQuery3D",void 0);g.__decorate([B.property()],f.prototype,"bingKey",void 0);g.__decorate([B.property()],f.prototype,"canListApps",void 0);g.__decorate([B.property()],f.prototype,"canListData",void 0);g.__decorate([B.property()],f.prototype,"canListPreProvisionedItems",void 0);g.__decorate([B.property()],f.prototype,"canProvisionDirectPurchase",void 0);g.__decorate([B.property()],f.prototype,"canSearchPublic",void 0);g.__decorate([B.property()],f.prototype,"canShareBingPublic",
void 0);g.__decorate([B.property()],f.prototype,"canSharePublic",void 0);g.__decorate([B.property()],f.prototype,"canSignInArcGIS",void 0);g.__decorate([B.property()],f.prototype,"canSignInIDP",void 0);g.__decorate([B.property()],f.prototype,"colorSetsGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"commentsEnabled",void 0);g.__decorate([B.property({type:Date})],f.prototype,"created",void 0);g.__decorate([B.property()],f.prototype,"credential",void 0);g.__decorate([B.property()],f.prototype,
"culture",void 0);g.__decorate([B.property()],f.prototype,"currentVersion",void 0);g.__decorate([B.property()],f.prototype,"customBaseUrl",void 0);g.__decorate([B.property()],f.prototype,"defaultBasemap",void 0);g.__decorate([q.reader("defaultBasemap")],f.prototype,"readDefaultBasemap",null);g.__decorate([B.property()],f.prototype,"defaultDevBasemap",void 0);g.__decorate([q.reader("defaultDevBasemap")],f.prototype,"readDefaultDevBasemap",null);g.__decorate([B.property({type:m})],f.prototype,"defaultExtent",
void 0);g.__decorate([B.property()],f.prototype,"defaultVectorBasemap",void 0);g.__decorate([q.reader("defaultVectorBasemap")],f.prototype,"readDefaultVectorBasemap",null);g.__decorate([B.property()],f.prototype,"description",void 0);g.__decorate([B.property()],f.prototype,"devBasemapGalleryGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"eueiEnabled",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"extraQuery",null);g.__decorate([B.property()],f.prototype,"featuredGroups",
void 0);g.__decorate([B.property()],f.prototype,"featuredItemsGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"galleryTemplatesGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"livingAtlasGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"hasCategorySchema",void 0);g.__decorate([B.property()],f.prototype,"helpBase",void 0);g.__decorate([B.property()],f.prototype,"helperServices",void 0);g.__decorate([B.property()],f.prototype,"helpMap",void 0);g.__decorate([B.property()],
f.prototype,"homePageFeaturedContent",void 0);g.__decorate([B.property()],f.prototype,"homePageFeaturedContentCount",void 0);g.__decorate([B.property()],f.prototype,"httpPort",void 0);g.__decorate([B.property()],f.prototype,"httpsPort",void 0);g.__decorate([B.property()],f.prototype,"id",void 0);g.__decorate([B.property()],f.prototype,"ipCntryCode",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"isOrganization",null);g.__decorate([B.property()],f.prototype,"isPortal",void 0);g.__decorate([B.property()],
f.prototype,"isReadOnly",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"itemPageUrl",null);g.__decorate([B.property()],f.prototype,"layerTemplatesGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"maxTokenExpirationMinutes",void 0);g.__decorate([B.property({type:Date})],f.prototype,"modified",void 0);g.__decorate([B.property()],f.prototype,"name",void 0);g.__decorate([B.property()],f.prototype,"portalHostname",void 0);g.__decorate([B.property()],f.prototype,"portalMode",void 0);
g.__decorate([B.property()],f.prototype,"portalProperties",void 0);g.__decorate([B.property()],f.prototype,"region",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"restUrl",null);g.__decorate([B.property()],f.prototype,"rotatorPanels",void 0);g.__decorate([B.property()],f.prototype,"showHomePageDescription",void 0);g.__decorate([B.property()],f.prototype,"sourceJSON",void 0);g.__decorate([B.property()],f.prototype,"staticImagesUrl",void 0);g.__decorate([B.property({json:{name:"2DStylesGroupQuery"}})],
f.prototype,"stylesGroupQuery2d",void 0);g.__decorate([B.property({json:{name:"stylesGroupQuery"}})],f.prototype,"stylesGroupQuery3d",void 0);g.__decorate([B.property()],f.prototype,"supportsHostedServices",void 0);g.__decorate([B.property()],f.prototype,"symbolSetsGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"templatesGroupQuery",void 0);g.__decorate([B.property()],f.prototype,"thumbnail",void 0);g.__decorate([B.property({readOnly:!0})],f.prototype,"thumbnailUrl",null);g.__decorate([B.property()],
f.prototype,"units",void 0);g.__decorate([B.property()],f.prototype,"url",void 0);g.__decorate([B.property()],f.prototype,"urlKey",void 0);g.__decorate([q.reader("urlKey")],f.prototype,"readUrlKey",null);g.__decorate([B.property()],f.prototype,"user",void 0);g.__decorate([q.reader("user")],f.prototype,"readUser",null);g.__decorate([B.property()],f.prototype,"use3dBasemaps",void 0);g.__decorate([B.property()],f.prototype,"useStandardizedQuery",void 0);g.__decorate([B.property()],f.prototype,"useVectorBasemaps",
void 0);g.__decorate([B.property()],f.prototype,"vectorBasemapGalleryGroupQuery",void 0);g=f=P=g.__decorate([a.subclass("esri.portal.Portal")],f);const y=new FinalizationRegistry(v=>{v.remove()});return g})},"esri/portal/portalDefault":function(){define(["exports"],function(c){let g;c.clearDefaultPortalInstance=function(){g=void 0};c.ensureDefaultPortalInstance=function(w){if(!g||g.destroyed)g=w();return g};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(c,g,w,u,H,C,f,n,d){var r;w=r=class extends w.JSONSupport{constructor(B){super(B);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const B=this.url,A=this.thumbnail;return B&&A&&this.portal?this.portal?.normalizeUrl(`${B}/info/${A}?f=json`):null}get url(){const B=this.portal?.restUrl;return B?B+"/community/groups/"+this.id:
null}fetchCategorySchema(B){return this.portal.request(this.url+"/categorySchema",B).then(A=>{A=A.categorySchema||[];return A.some(K=>"contentCategorySetsGroupQuery.LivingAtlas"===K.source)?this._fetchCategorySchemaSet("LivingAtlas",B):A})}fetchMembers(B){return this.portal.request(this.url+"/users",B)}getThumbnailUrl(B){let A=this.thumbnailUrl;A&&B&&(A+=`&w=${B}`);return A}toJSON(){throw new g("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(B){if(!B)return null;
if(B.declaredClass)throw Error("JSON object is already hydrated");const A=new r;A.sourceJSON=B;A.read(B);return A}queryItems(B,A){B=H.ensureType(d,B);const K=this.portal;if(5<parseFloat(K.currentVersion))return B=B||new d,K.queryPortal(`/content/groups/${this.id}/search`,B,"PortalItem",A);B=B?B.clone():new d;B.query="group:"+this.id+(B.query?" "+B.query:"");return K.queryItems(B,A)}_fetchCategorySchemaSet(B,A){const K=this.portal;return K.fetchSelf(K.authMode,!0,A).then(t=>{if(t=t.contentCategorySetsGroupQuery){const q=
new d;q.disableExtraQuery=!0;q.num=1;q.query=t;return K.queryGroups(q,A)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(t=>{if(t.total){t=t.results[0];const q=new d;q.num=1;q.query=`typekeywords:"${B}"`;return t.queryItems(q,A)}throw new g("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(t=>t.total?t.results[0].fetchData("json",A).then(q=>{q=q?.categorySchema;return q?.length?q:[]}):[])}};c.__decorate([u.property()],
w.prototype,"access",void 0);c.__decorate([u.property({type:Date})],w.prototype,"created",void 0);c.__decorate([u.property()],w.prototype,"description",void 0);c.__decorate([u.property()],w.prototype,"id",void 0);c.__decorate([u.property()],w.prototype,"isInvitationOnly",void 0);c.__decorate([u.property({type:Date})],w.prototype,"modified",void 0);c.__decorate([u.property()],w.prototype,"owner",void 0);c.__decorate([u.property()],w.prototype,"portal",void 0);c.__decorate([u.property()],w.prototype,
"snippet",void 0);c.__decorate([u.property()],w.prototype,"sortField",void 0);c.__decorate([u.property()],w.prototype,"sortOrder",void 0);c.__decorate([u.property()],w.prototype,"sourceJSON",void 0);c.__decorate([u.property()],w.prototype,"tags",void 0);c.__decorate([u.property()],w.prototype,"thumbnail",void 0);c.__decorate([u.property({readOnly:!0})],w.prototype,"thumbnailUrl",null);c.__decorate([u.property()],w.prototype,"title",void 0);c.__decorate([u.property({readOnly:!0})],w.prototype,"url",
null);return w=r=c.__decorate([n.subclass("esri.portal.PortalGroup")],w)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(c,g,w,u,H,C,f,n,d,r,B){var A;const K=new w.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});g=A=class extends g{constructor(t){super(t);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){"asc"!==t&&"desc"!==t||this._set("sortOrder",t)}clone(){return new A({categories:this.categories?u.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,q){let a=[];this.categories&&(a=this.categories.map(F=>Array.isArray(F)?JSON.stringify(F):F));let m="";if(this.extent){var p=B.project(this.extent,r.WGS84);null!=p&&(m=`${p.xmin},${p.ymin},${p.xmax},${p.ymax}`)}p=this.query;!this.disableExtraQuery&&t.extraQuery&&(p="("+p+")"+t.extraQuery);t={categories:a,bbox:m,q:p,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(t.sortField=this.sortField.split(",").map(F=>K.toJSON(F.trim())).join(","),t.sortOrder=this.sortOrder);return{query:{...q,...t}}}};c.__decorate([H.property()],g.prototype,"categories",void 0);c.__decorate([H.property()],g.prototype,"disableExtraQuery",void 0);c.__decorate([H.property({type:d})],g.prototype,"extent",void 0);c.__decorate([H.property()],g.prototype,"filter",void 0);c.__decorate([H.property()],g.prototype,"num",void 0);c.__decorate([H.property()],
g.prototype,"query",void 0);c.__decorate([H.property()],g.prototype,"sortField",void 0);c.__decorate([H.property()],g.prototype,"sortOrder",null);c.__decorate([H.property()],g.prototype,"start",void 0);return g=A=c.__decorate([n.subclass("esri.portal.PortalQueryParams")],g)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,w,u,H,C,f){g=class extends g{constructor(n){super(n);this.total=this.results=this.queryParams=this.nextQueryParams=null}};c.__decorate([w.property()],g.prototype,"nextQueryParams",void 0);c.__decorate([w.property()],g.prototype,"queryParams",void 0);c.__decorate([w.property()],g.prototype,"results",void 0);c.__decorate([w.property()],g.prototype,"total",void 0);return g=c.__decorate([f.subclass("esri.portal.PortalQueryResult")],g)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B){var A;u=A=class extends u.JSONSupport{constructor(...K){super(...K);this.userType=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const K=this.url,t=this.thumbnail;return K&&t?this.portal.normalizeUrl(`${K}/info/${t}?f=json`):null}get userContentUrl(){const K=this.portal?.restUrl;
return K?`${K}/content/users/${this.username}`:null}get url(){const K=this.portal?.restUrl;return K?`${K}/community/users/${this.username}`:null}addItem(K){const t=K&&K.item;var q=K?.data;K=K?.folder;const a={method:"post"};t&&(a.query=t.createPostQuery(),null!=q&&("string"===typeof q?a.query.text=q:"object"===typeof q&&(a.query.text=JSON.stringify(q))));q=this.userContentUrl;K&&(q+="/"+("string"===typeof K?K:K.id));return this.portal.request(q+"/addItem",a).then(m=>{t.id=m.id;t.portal=this.portal;
return t.loaded?t.reload():t.load()})}deleteItem(K){let t=this.userContentUrl;K.ownerFolder&&(t+="/"+K.ownerFolder);return this.portal.request(t+`/items/${K.id}/delete`,{method:"post"}).then(()=>{K.id=null;K.portal=null})}deleteItems(K){const t=this.userContentUrl+"/deleteItems";var q=K.map(a=>a.id);return q.length?(q={method:"post",query:{items:q.join(",")}},this.portal.request(t,q).then(()=>{K.forEach(a=>{a.id=null;a.portal=null})})):Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??
"",{query:{num:1}}).then(K=>K&&K.folders?K.folders.map(t=>{t=r.fromJSON(t);t.portal=this.portal;return t}):[])}fetchGroups(){return this.portal.request(this.url??"").then(K=>K&&K.groups?K.groups.map(t=>{t=B.fromJSON(t);t.portal=this.portal;return t}):[])}fetchItems(K){const t=K??{};let q=this.userContentUrl??"";t.folder&&(q+="/"+t.folder.id);let a;return(new Promise((m,p)=>c(["./PortalItem"],F=>m(Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}))),
p))).then(({default:m})=>{a=m;return this.portal.request(q,{query:{folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"}})}).then(m=>{let p;return m?.items?(p=m.items.map(F=>{F=a.fromJSON(F);F.portal=this.portal;return F}),Promise.all(p.map(F=>F.load())).catch(F=>F).then(()=>({items:p,nextStart:m.nextStart,total:m.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(K=>K.tags)}getThumbnailUrl(K){let t=
this.thumbnailUrl;t&&K&&(t+=`&w=${K}`);return t}queryFavorites(K){return this.favGroupId?(this._favGroup||(this._favGroup=new B({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(K)):Promise.reject(new w("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new w("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(K){if(!K)return null;if(K.declaredClass)throw Error("JSON object is already hydrated");
const t=new A;t.sourceJSON=K;t.read(K);return t}};g.__decorate([H.property()],u.prototype,"access",void 0);g.__decorate([H.property({type:Date})],u.prototype,"created",void 0);g.__decorate([H.property()],u.prototype,"culture",void 0);g.__decorate([H.property()],u.prototype,"description",void 0);g.__decorate([H.property()],u.prototype,"email",void 0);g.__decorate([H.property()],u.prototype,"favGroupId",void 0);g.__decorate([H.property()],u.prototype,"fullName",void 0);g.__decorate([H.property({type:Date})],
u.prototype,"modified",void 0);g.__decorate([H.property()],u.prototype,"orgId",void 0);g.__decorate([H.property()],u.prototype,"portal",void 0);g.__decorate([H.property()],u.prototype,"preferredView",void 0);g.__decorate([H.property()],u.prototype,"privileges",void 0);g.__decorate([H.property()],u.prototype,"region",void 0);g.__decorate([H.property()],u.prototype,"role",void 0);g.__decorate([H.property()],u.prototype,"roleId",void 0);g.__decorate([H.property()],u.prototype,"sourceJSON",void 0);g.__decorate([H.property()],
u.prototype,"thumbnail",void 0);g.__decorate([H.property({readOnly:!0})],u.prototype,"thumbnailUrl",null);g.__decorate([H.property()],u.prototype,"units",void 0);g.__decorate([H.property({readOnly:!0})],u.prototype,"userContentUrl",null);g.__decorate([H.property({readOnly:!0})],u.prototype,"url",null);g.__decorate([H.property()],u.prototype,"username",void 0);g.__decorate([H.property()],u.prototype,"userType",void 0);return u=A=g.__decorate([d.subclass("esri.portal.PortalUser")],u)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,w,u,H,C,f,n){w=class extends w.JSONSupport{constructor(d){super(d);this.username=this.title=this.portal=this.id=this.created=null}get url(){const d=this.portal?.restUrl;return d?`${d}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new g("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};c.__decorate([u.property({type:Date})],w.prototype,"created",void 0);c.__decorate([u.property()],w.prototype,"id",void 0);c.__decorate([u.property()],w.prototype,
"portal",void 0);c.__decorate([u.property()],w.prototype,"title",void 0);c.__decorate([u.property({readOnly:!0})],w.prototype,"url",null);c.__decorate([u.property()],w.prototype,"username",void 0);return w=c.__decorate([n.subclass("esri.portal.PortalFolder")],w)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B,A,K,t,q,a,m){var p;const F=new Set("Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;GeoJson;CSV;KML;WFS;WMTS;WMS;Feed".split(";")),Q=new Set(["KML","GeoJson","CSV"]);H=p=class extends H.JSONSupportMixin(f){static from(e){return r.ensureClass(p,e)}constructor(e){super(e);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=this.avgRating=this.applicationProxies=
this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const e=this.type,J=this.typeKeywords||[];let T=e;"Feature Service"===e||"Feature Collection"===
e?T=J.includes("Table")?"Table":J.includes("Route Layer")?"Route Layer":J.includes("Markup")?"Markup":"Feature Layer":"Image Service"===e?T=J.includes("Elevation 3D Layer")?"Elevation Layer":J.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===e?T="Scene Layer":"Video Service"===e?T="Video Layer":"Scene Package"===e?T="Scene Layer Package":"Stream Service"===e?T="Feature Layer":"Geoprocessing Service"===e?T=J.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===
e?T="GeoEnrichment Service":"Geocoding Service"===e?T="Locator":"Microsoft Powerpoint"===e?T="Microsoft PowerPoint":"GeoJson"===e?T="GeoJSON":"Globe Service"===e?T="Globe Layer":"Vector Tile Service"===e?T="Tile Layer":"netCDF"===e?T="NetCDF":"Map Service"===e?T=J.includes("Spatiotemporal")||!J.includes("Hosted Service")&&!J.includes("Tiled")||J.includes("Relational")?"Map Image Layer":"Tile Layer":e&&e.toLowerCase().includes("add in")?T=e.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===
e?T="Big Data File Share":"Compact Tile Package"===e?T="Tile Package (tpkx)":"Raster function template"===e?T="Raster Function Template":"OGCFeatureServer"===e?T="OGC Feature Layer":"web mapping application"===e&&J.includes("configurableApp")?T="Instant App":"Insights Page"===e?T="Insights Report":"Excalibur Imagery Project"===e&&(T="Excalibur Project");return T}readExtent(e){return e&&e.length?new K(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){var e=this.type?.toLowerCase()||"";const J=this.typeKeywords||
[];var T=!1,L=!1;let U=!1,S=!1,P=!1,l=!1;T=L=!1;0<e.indexOf("service")||"feature collection"===e||"kml"===e||"wms"===e||"wmts"===e||"wfs"===e?(T=J.includes("Hosted Service"),"feature service"===e||"feature collection"===e||"kml"===e||"wfs"===e?(L=J.includes("Table"),U=J.includes("Route Layer"),S=J.includes("Markup"),P=J.includes("Spatiotemporal"),l=J.includes("UtilityNetwork"),e=P&&L?"spatiotemporaltable":L?"table":U?"routelayer":S?"markup":P?"spatiotemporal":l?"utilitynetwork":T?"featureshosted":
"features"):"map service"===e||"wms"===e||"wmts"===e?(P=J.includes("Spatiotemporal"),L=J.includes("Relational"),e=P||L?"mapimages":T||J.includes("Tiled")||"wmts"===e?"maptiles":"mapimages"):e="scene service"===e?J.includes("Line")?"sceneweblayerline":J.includes("3DObject")?"sceneweblayermultipatch":J.includes("Point")?"sceneweblayerpoint":J.includes("IntegratedMesh")?"sceneweblayermesh":J.includes("PointCloud")?"sceneweblayerpointcloud":J.includes("Polygon")?"sceneweblayerpolygon":J.includes("Building")?
"sceneweblayerbuilding":J.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===e?J.includes("Elevation 3D Layer")?"elevationlayer":J.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===e?"streamlayer":"vector tile service"===e?"vectortile":"datastore catalog service"===e?"datastorecollection":"geocoding service"===e?"geocodeservice":"video service"===e?J.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===e?J.includes("Web Tool")?
"tool":"layers":"geodata service"===e?"geodataservice":"3dtiles service"===e?J.includes("3DObject")?"3dobjecttileslayer":J.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e="web map"===e||"cityengine web scene"===e?"maps":"web scene"===e?J.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===e&&J.includes("configurableApp")?"instantapps":"web mapping application"===e||"mobile application"===e||"application"===e||"operation view"===
e||"desktop application"===e?"apps":"map document"===e||"map package"===e||"published map"===e||"scene document"===e||"globe document"===e||"basemap package"===e||"mobile basemap package"===e||"mobile map package"===e||"project package"===e||"project template"===e||"pro map"===e||"layout"===e||"layer"===e&&J.includes("ArcGIS Pro")||"explorer map"===e&&J.indexOf("Explorer Document")?"mapsgray":"service definition"===e||"csv"===e||"shapefile"===e||"cad drawing"===e||"geojson"===e||"netcdf"===e||"administrative report"===
e?"datafiles":"360 vr experience"===e?"360vr":"explorer add in"===e||"desktop add in"===e||"windows viewer add in"===e||"windows viewer configuration"===e?"appsgray":"arcgis pro add in"===e||"arcgis pro configuration"===e?"addindesktop":"rule package"===e||"file geodatabase"===e||"sqlite geodatabase"===e||"csv collection"===e||"kml collection"===e||"windows mobile package"===e||"map template"===e||"desktop application template"===e||"gml"===e||"arcpad package"===e||"code sample"===e||"document link"===
e||"earth configuration"===e||"operations dashboard add in"===e||"rules package"===e||"image"===e||"workflow manager package"===e||"explorer map"===e&&J.includes("Explorer Mapping Application")||J.includes("Document")?"datafilesgray":"network analysis service"===e||"geoprocessing service"===e||"geodata service"===e||"geometry service"===e||"geoprocessing package"===e||"locator package"===e||"geoprocessing sample"===e||"workflow manager service"===e?"toolsgray":"layer"===e||"layer package"===e||"explorer layer"===
e?"layersgray":"scene package"===e?"scenepackage":"3dtiles package"===e?"3dtileslayerpackage":"3dtiles service"===e?"3dtileslayer":"mobile scene package"===e?"mobilescenepackage":"tile package"===e||"compact tile package"===e?"tilepackage":"task file"===e?"taskfile":"report template"===e?"report-template":"statistical data collection"===e?"statisticaldatacollection":"insights workbook"===e?"workbook":"insights model"===e?"insightsmodel":"insights page"===e?"insightspage":"insights theme"===e?"insightstheme":
"hub initiative"===e?"hubinitiative":"hub page"===e?"hubpage":"hub site application"===e?"hubsite":"hub event"===e?"hubevent":"hub project"===e?"hubproject":"relational database connection"===e?"relationaldatabaseconnection":"big data file share"===e?"datastorecollection":"image collection"===e?"imagecollection":"desktop style"===e?"desktopstyle":"style"===e?"style":"dashboard"===e?"dashboard":"raster function template"===e?"rasterprocessingtemplate":"vector tile package"===e?"vectortilepackage":
"ortho mapping project"===e?"orthomappingproject":"ortho mapping template"===e?"orthomappingtemplate":"solution"===e?"solutions":"geopackage"===e?"geopackage":"deep learning package"===e?"deeplearningpackage":"real time analytic"===e?"realtimeanalytics":"big data analytic"===e?"bigdataanalytics":"feed"===e?"feed":"excalibur imagery project"===e?"excaliburimageryproject":"notebook"===e?"notebook":"storymap"===e?"storymap":"survey123 add in"===e?"survey123addin":"mission"===e?"mission":"mission report"===
e?"missionreport":"mission template"===e?"missiontemplate":"quickcapture project"===e?"quickcaptureproject":"pro report"===e?"proreport":"pro report template"===e?"proreporttemplate":"urban model"===e?"urbanmodel":"web experience"===e?"experiencebuilder":"web experience template"===e?"webexperiencetemplate":"experience builder widget"===e?"experiencebuilderwidget":"experience builder widget package"===e?"experiencebuilderwidgetpackage":"workflow"===e?"workflow":"kernel gateway connection"===e?"kernelgatewayconnection":
"insights script"===e?"insightsscript":"hub initiative template"===e?"hubinitiativetemplate":"storymap theme"===e?"storymaptheme":"knowledge graph"===e?"knowledgegraph":"knowledge studio project"===e?"knowledgestudio":"native application"===e?"nativeapp":"native application installer"===e?"nativeappinstaller":"link chart"===e?"linkchart":"investigation"===e?"investigation":"ogcfeatureserver"===e?"features":"pro project"===e?"proproject":"insights workbook package"===e?"insightsworkbookpackage":"apache parquet"===
e?"apacheparquet":"notebook code snippets"===e||"notebook code snippet library"===e?"notebookcodesnippets":"suitability model"===e?"suitabilitymodel":"esri classifier definition"===e?"classifierdefinition":"esri classification schema"===e?"classificationschema":"insights data engineering workbook"===e?"dataengineeringworkbook":"insights data engineering model"===e?"dataengineeringmodel":"deep learning studio project"===e?"deeplearningproject":"discussion"===e?"discussion":"allsource project"===e?
"allsourceproject":"api key"===e?"apikey":"data pipeline"===e?"datapipelines":"group layer"===e?(T=J.includes("Map"))?"layergroup2d":"layergroup":"media layer"===e?"onlinemedialayer":"form"===e?J.includes("Survey123")?"survey":"datafilesgray":"maps";return e?w.getAssetUrl("esri/images/portal/"+e+"16.png"):null}get isLayer(){return null!=this.type&&F.has(this.type)}get itemCdnUrl(){return m.toCDNUrl(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:
null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,J=this.thumbnail;return e&&J?this.portal?.normalizeUrl(`${e}/info/${J}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const J=this.owner||this.portal?.user?.username;return J?`${e}/content/users/${this.ownerFolder?`${J}/${this.ownerFolder}`:J}/items/${this.id}`:null}load(e){const J=this.portal??(this.portal=t.getDefault()),
T=J.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?J.request(this.itemUrl,{signal:null!=e?e.signal:null,query:{token:this.apiKey}}):{}).then(L=>{this.sourceJSON=L;this.read(L)});this.addResolvingPromise(T);return Promise.resolve(this)}async addRating(e){const J={method:"post",query:{}};e instanceof a&&(e=e.rating);null==e||isNaN(e)||"number"!==typeof e||(J.query.rating=e);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",J);return new a({rating:e,
created:new Date})}clone(){var e={access:this.access,accessInformation:this.accessInformation,applicationProxies:C.clone(this.applicationProxies),avgRating:this.avgRating,categories:C.clone(this.categories),created:C.clone(this.created),culture:this.culture,description:this.description,extent:C.clone(this.extent),groupCategories:C.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:C.clone(this.modified),name:this.name,numComments:this.numComments,
numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:C.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");e=(new p({sourceJSON:this.sourceJSON})).set(e);e._set("isOrgItem",this.isOrgItem);
return e}createPostQuery(){const e=this.toJSON();for(var J of["tags","typeKeywords","categories"])e[J]=e[J]?.join(", ");({extent:J}=e);J&&(e.extent=JSON.stringify(J));return e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",J){return this.portal.request(this.itemUrl+"/data",{responseType:e,...J,query:{token:this.apiKey}})}async fetchRating(e){e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return null!=
e.rating?(e.created=new Date(e.created),new a(e)):null}fetchRelatedItems(e,J){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...J},p)}getThumbnailUrl(e){let J=this.thumbnailUrl;J&&e&&(J+=`&w=${e}`);return J}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>{this.sourceJSON=e;this.read(e);return this})}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const J=e?.data,
T={method:"post"};T.query=this.createPostQuery();for(const L in T.query)null===T.query[L]&&(T.query[L]="");T.query.clearEmptyFields=!0;null!=J&&("string"===typeof J?T.query.text=J:"object"===typeof J&&(T.query.text=JSON.stringify(J)));return this.portal.request(`${this.userItemUrl}/update`,T).then(()=>this.reload())}):Promise.reject(new u("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new u("portal:item-does-not-exist","The item does not exist yet");
await this.load();const {portal:J,itemUrl:T}=this;await J.signIn();const {copyResources:L,folder:U,tags:S,title:P}=e||{};e={method:"post",query:{copyPrivateResources:"all"===L,folder:"string"===typeof U?U:U?.id,includeResources:!!L,tags:S?.join(","),title:P}};({itemId:e}=await J.request(`${T}/copy`,e));return new p({id:e,portal:J})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const J=e.thumbnail,T=e.filename,L={method:"post"};if("string"===typeof J)n.isDataProtocol(J)?
L.query={data:J}:L.query={url:n.makeAbsolute(J)},null!=T&&(L.query.filename=T);else{const U=new FormData;null!=T?U.append("file",J,T):U.append("file",J);L.body=U}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,L).then(()=>this.reload())}):Promise.reject(new u("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},J){const {fetchResources:T}=await new Promise((L,U)=>c(["./support/resourceUtils"],L,U));return T(this,e,J)}async addResource(e,
J,T){const {addOrUpdateResources:L}=await new Promise((U,S)=>c(["./support/resourceUtils"],U,S));e.portalItem=this;await L(this,[{resource:e,content:J,compress:T?.compress,access:T?.access}],"add",T);return e}async removeResource(e,J){const {removeResource:T}=await new Promise((L,U)=>c(["./support/resourceUtils"],L,U));if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new u("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");
return T(this,e,J)}async removeAllResources(e){const {removeAllResources:J}=await new Promise((T,L)=>c(["./support/resourceUtils"],T,L));return J(this,e)}resourceFromPath(e){return new q({portalItem:this,path:e})}toJSON(){var e=this.extent;e={accessInformation:this.accessInformation,categories:C.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:C.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:C.clone(this.typeKeywords),url:this.url};return C.fixJson(e)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw Error("JSON object is already hydrated");return new p({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const J in e)"tags"===J&&null!==
e[J]&&(e[J]=e[J].join(", ")),"typeKeywords"===J&&null!==e[J]&&(e[J]=e[J].join(", ")),"extent"===J&&e[J]&&(e[J]=JSON.stringify(e[J]));return e}};g.__decorate([d.property({type:["private","shared","org","public"]})],H.prototype,"access",void 0);g.__decorate([d.property()],H.prototype,"accessInformation",void 0);g.__decorate([d.property({type:String})],H.prototype,"apiKey",void 0);g.__decorate([d.property({json:{read:{source:"appProxies"}}})],H.prototype,"applicationProxies",void 0);g.__decorate([d.property()],
H.prototype,"avgRating",void 0);g.__decorate([d.property()],H.prototype,"categories",void 0);g.__decorate([d.property({type:Date})],H.prototype,"created",void 0);g.__decorate([d.property()],H.prototype,"culture",void 0);g.__decorate([d.property()],H.prototype,"description",void 0);g.__decorate([d.property({readOnly:!0})],H.prototype,"displayName",null);g.__decorate([d.property({type:K})],H.prototype,"extent",void 0);g.__decorate([B.reader("extent")],H.prototype,"readExtent",null);g.__decorate([d.property()],
H.prototype,"groupCategories",void 0);g.__decorate([d.property({readOnly:!0})],H.prototype,"iconUrl",null);g.__decorate([d.property()],H.prototype,"id",void 0);g.__decorate([d.property({readOnly:!0})],H.prototype,"isLayer",null);g.__decorate([d.property({type:Boolean,readOnly:!0})],H.prototype,"isOrgItem",void 0);g.__decorate([d.property()],H.prototype,"itemControl",void 0);g.__decorate([d.property({readOnly:!0})],H.prototype,"itemPageUrl",null);g.__decorate([d.property({readOnly:!0})],H.prototype,
"itemUrl",null);g.__decorate([d.property()],H.prototype,"licenseInfo",void 0);g.__decorate([d.property({type:Date})],H.prototype,"modified",void 0);g.__decorate([d.property()],H.prototype,"name",void 0);g.__decorate([d.property()],H.prototype,"numComments",void 0);g.__decorate([d.property()],H.prototype,"numRatings",void 0);g.__decorate([d.property()],H.prototype,"numViews",void 0);g.__decorate([d.property()],H.prototype,"owner",void 0);g.__decorate([d.property()],H.prototype,"ownerFolder",void 0);
g.__decorate([d.property({type:t})],H.prototype,"portal",void 0);g.__decorate([d.property()],H.prototype,"screenshots",void 0);g.__decorate([d.property()],H.prototype,"size",void 0);g.__decorate([d.property()],H.prototype,"snippet",void 0);g.__decorate([d.property()],H.prototype,"sourceJSON",void 0);g.__decorate([d.property({type:String})],H.prototype,"sourceUrl",void 0);g.__decorate([d.property({type:String})],H.prototype,"spatialReference",void 0);g.__decorate([d.property()],H.prototype,"tags",
void 0);g.__decorate([d.property()],H.prototype,"thumbnail",void 0);g.__decorate([d.property({readOnly:!0})],H.prototype,"thumbnailUrl",null);g.__decorate([d.property()],H.prototype,"title",void 0);g.__decorate([d.property()],H.prototype,"type",void 0);g.__decorate([d.property()],H.prototype,"typeKeywords",void 0);g.__decorate([d.property({type:String,json:{read(e,J){Q.has(J.type)&&(J=this.portal?.restUrl,e||=J&&this.id?`${J}/content/items/${this.id}/data`:null);return e}}})],H.prototype,"url",void 0);
g.__decorate([d.property({readOnly:!0})],H.prototype,"userItemUrl",null);return H=p=g.__decorate([A.subclass("esri.portal.PortalItem")],H)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(c,g,w,u,H,C,f,n,d,r,B){w=class extends w{constructor(A){super(A);
this.portalItem=null}normalizeCtorArgs(A){return A?.portalItem&&A.path?{...A,path:this._normalizePath(A.path,A.portalItem)}:A}set path(A){null!=A&&C.isAbsolute(A)?H.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",A)}_castPath(A){return this._normalizePath(A,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:
null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(A="json",K){const t=this.cdnUrl;if(null==t)throw new u("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(t,{responseType:A,query:{token:this.portalItem.apiKey},signal:K?.signal})}async update(A,K){const {addOrUpdateResources:t}=await new Promise((q,a)=>c(["./support/resourceUtils"],q,a));await t(this.portalItem,[{resource:this,
content:A,compress:K?.compress,access:K?.access}],"update",K);return this}hasPath(){return null!=this.path}_normalizePath(A,K){if(null==A)return A;A=A.replace(/^\/+/,"");null!=K&&C.isAbsolute(A)&&(A=C.makeRelative(A,K.itemUrl));return A?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};g.__decorate([f.property()],w.prototype,"portalItem",void 0);g.__decorate([f.property({type:String,value:null})],w.prototype,"path",null);g.__decorate([n.cast("path")],w.prototype,"_castPath",null);g.__decorate([f.property({type:String,
readOnly:!0})],w.prototype,"url",null);g.__decorate([f.property({type:String,readOnly:!0})],w.prototype,"cdnUrl",null);g.__decorate([f.property({type:String,readOnly:!0})],w.prototype,"itemRelativeUrl",null);return w=g.__decorate([B.subclass("esri.portal.PortalItemResource")],w)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,w,u,H,C,f){g=class extends g{constructor(n){super(n);this.rating=this.created=null}};c.__decorate([w.property()],g.prototype,"created",void 0);c.__decorate([w.property()],g.prototype,"rating",void 0);return g=c.__decorate([f.subclass("esri.portal.PortalRating")],g)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils"],function(c,g,w){function u(m,p){var F=p?.url?.path;m&&F&&(m=w.makeAbsolute(m,F,{preserveProtocolRelative:!0}),p.portalItem&&
p.readResourcePaths&&(F=w.makeRelative(m,p.portalItem.itemUrl),null!=F&&q.test(F)&&p.readResourcePaths.push(p.portalItem.resourceFromPath(F).path)));return(m=B(m,p?.portal))&&t.test(m)?A(m):m}function H(m,p,F=c.MarkKeep.YES){m=m&&t.test(m)?K(m):m;if(null==m)return m;!w.isAbsolute(m)&&p?.blockedRelativeUrls&&p.blockedRelativeUrls.push(m);let Q=w.makeAbsolute(m);if(p){var e=p.verifyItemRelativeUrls?.rootPath||p.url?.path;if(e){e=B(e,p.portal);const J=B(Q,p.portal);Q=w.makeRelative(J,e,e);null!=Q&&Q!==
J&&Q!==m&&p.verifyItemRelativeUrls&&p.verifyItemRelativeUrls.writtenUrls.push(Q)}}Q=r(Q,p?.portal);w.isAbsolute(Q)&&(Q=w.normalize(Q));p?.resources&&p?.portalItem&&!w.isAbsolute(Q)&&!w.isDataProtocol(Q)&&F===c.MarkKeep.YES&&p.resources.toKeep.push({resource:p.portalItem.resourceFromPath(Q),compress:!1});return Q}function C(m,p,F){return u(m,F)}function f(m,p,F,Q){m=H(m,Q);void 0!==m&&(p[F]=m)}function n(m){return(m?.match(t)??null)?.[1]??null}function d(m){m=m?.match(t)??null;if(null==m)return null;
m=m[2];const p=m.lastIndexOf("/");if(-1===p){const {path:e,extension:J}=w.splitPathExtension(m);return{prefix:null,filename:e,extension:J}}const {path:F,extension:Q}=w.splitPathExtension(m.slice(p+1));return{prefix:m.slice(0,p),filename:F,extension:Q}}function r(m,p){return p&&!p.isPortal&&p.urlKey&&p.customBaseUrl?w.changeDomain(m,`${p.urlKey}.${p.customBaseUrl}`,p.portalHostname):m}function B(m,p){if(!p||p.isPortal||!p.urlKey||!p.customBaseUrl)return m;const F=`${p.urlKey}.${p.customBaseUrl}`,Q=
w.getAppUrl();return w.hasSameOrigin(Q,`${Q.scheme}://${F}`)?w.changeDomain(m,p.portalHostname,F):w.changeDomain(m,F,p.portalHostname)}function A(m){if(!m)return m||null;m&&g.id&&!g.id.findCredential(m)&&(m=g.id._normalizeAGOLorgDomain(m),m=m.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),m=m.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),m=m.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return m}function K(m){if(!m)return m||null;
m=m.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");m=m.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(m=m.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&g.id&&!g.id.findCredential(m)&&(m=g.id._normalizeAGOLorgDomain(m));return m}const t=/\/items\/([^\/]+)\/resources\/(.*)/,q=/^\.\/resources\//;c.MarkKeep=void 0;(function(m){m[m.YES=0]="YES";m[m.NO=1]="NO"})(c.MarkKeep||(c.MarkKeep={}));const a=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return c.MarkKeep},ensureMainOnlineDomain:r,fromCDNUrl:K,fromJSON:u,itemIdFromResourceUrl:n,prefixAndFilenameFromResourceUrl:d,read:C,toCDNUrl:A,toJSON:H,write:f},Symbol.toStringTag,{value:"Module"}));c.ensureMainOnlineDomain=r;c.fromCDNUrl=K;c.fromJSON=u;c.itemIdFromResourceUrl=n;c.persistableUrlUtils=a;c.prefixAndFilenameFromResourceUrl=d;c.read=C;c.toCDNUrl=A;c.toJSON=H;c.write=f})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(c,
g,w){c.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",
url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,
opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return g.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};c.getBasemapTitle=async function(u){if(u){var H=u.includes("-vector")?u.slice(0,u.indexOf("-vector")):
u.includes("-3d")?u.slice(0,u.indexOf("-3d")):u,C=await w.fetchMessageBundle("esri/t9n/basemaps");return C[u]||C[H]}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(c,g,w,u,H,C,f,n){const d=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
g=class extends g{constructor(r){super(r);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var r=n.getLocale().toLowerCase();switch(r){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}r=n.getLanguage(r);return"pt"===r?"pt-BR":r&&d.has(r)?r:"global"}};
c.__decorate([w.property()],g.prototype,"id",void 0);c.__decorate([w.property()],g.prototype,"language",void 0);c.__decorate([w.property()],g.prototype,"places",void 0);c.__decorate([w.property()],g.prototype,"serviceUrl",void 0);c.__decorate([w.property()],g.prototype,"worldview",void 0);return g=c.__decorate([f.subclass("esri.support.BasemapStyle")],g)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(c,g,w,u,H,C){function f(r,B){"maxScale"in r&&(B.maxScale=H.numberToJSON(r.maxScale)??void 0);"minScale"in r&&(B.minScale=H.numberToJSON(r.minScale)??void 0)}const n=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),d=new Set("csv feature geo-rss geojson group imagery imagery-tile kml map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
c.disableRestrictedWriting=function(r){n.add(r);d.add(r)};c.enableRestrictedWriting=function(r){n.delete(r);d.delete(r)};c.getLayerJSON=function(r,B,A){if(!r.persistenceEnabled)return null;if(!("write"in r&&r.write))return A?.messages&&A.messages.push(new g("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted`,{layer:r})),null;if(C.isFeatureCollectionLayer(r)&&!r.isTable)B=r.resourceInfo;else{if(A.restrictedWebMapWriting){var K="basemap"===A.layerContainerType?
n:"operational-layers"===A.layerContainerType?d:null;K=null!=K?K.has(r.type)&&!C.isFeatureCollectionLayer(r):!0}else K=!0;if(K)return B={},r.write(B,A)?B:null}if(null!=B){B=w.clone(B);if(A=B)C.isFeatureCollectionLayer(r)?(K=u.getDeepValue("featureCollection.layers",A)?.[0]?.layerDefinition)&&f(r,K):"group"!==r.type&&f(r,A);if(A&&(A.id=r.id,"blendMode"in r&&(A.blendMode=r.blendMode,"normal"===A.blendMode&&delete A.blendMode),A.opacity=H.numberToJSON(r.opacity)??void 0,A.title=r.title||"Layer",A.visibility=
r.visible,"legendEnabled"in r&&"wmts"!==r.type))if(C.isFeatureCollectionLayer(r)){if(A=A.featureCollection)A.showLegend=r.legendEnabled}else A.showLegend=r.legendEnabled}return B};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(c,g,w){function u(C){return"scene"===C?.type}function H(C){C=C?.type;return"imagery-tile"===C||"tile"===C||"open-street-map"===C||"vector-tile"===C||"web-tile"===
C||"wmts"===C}c.getEffectiveEditingEnabled=function(C){a:if("editingEnabled"in C)switch(C.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var f=!0;break a;default:f=!1}else f=!1;return f?"effectiveEditingEnabled"in C?C.effectiveEditingEnabled:C.editingEnabled:!1};c.getEffectiveLayerCapabilities=function(C){a:if("capabilities"in C)switch(C.type){case "catalog":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var f=
!0;break a;default:f=!1}else f=!1;return f?"effectiveCapabilities"in C?C.effectiveCapabilities:C.capabilities:null};c.getOwningPortalUrl=async function(C,f){var n=g.id?.findServerInfo(C);if(null!=n?.currentVersion)return n.owningSystemUrl||null;n=C.toLowerCase().indexOf("/rest/services");if(-1===n)return null;C=`${C.substring(0,n)}/rest/info`;({data:f}=await w(C,{query:{f:"json"},responseType:"json",signal:null!=f?f.signal:null}));return f?.owningSystemUrl||null};c.getTileMaxtrixSetFromActiveLayer=
function(C){if(C.activeLayer){const f=C.activeLayer.tileMatrixSet;if(f)return f;if(C=C.activeLayer.tileMatrixSets)return C}return null};c.isBaseLayer=function(C){return null!=C?.parent&&"declaredClass"in C.parent&&"esri.Basemap"===C.parent.declaredClass&&C.parent.baseLayers.includes(C)};c.isBasemap3DSupportedLayer=function(C){return H(C)||u(C)};c.isBasemapSupportedTiledLayer=H;c.isFeatureCollectionLayer=function(C){return"feature"===C?.type&&!C.url&&"memory"===C.source?.type};c.isFeatureLayer=function(C){return null!=
C&&"object"===typeof C&&"type"in C&&"feature"===C.type};c.isFeatureServiceLayer=function(C){return"feature"===C?.type&&"feature-layer"===C.source?.type};c.isGraphicsLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"graphics"===C.type};c.isGroupLayer=function(C){return null!=C&&"type"in C&&"group"===C.type};c.isImageryTileLayer=function(C){return"imagery-tile"===C?.type};c.isIntegratedMeshLayer=function(C){return"integrated-mesh"===C||"integrated-mesh-3dtiles"===C};c.isIntegratedMeshOperationalLayer=
function(C){return"IntegratedMeshLayer"===C||"IntegratedMesh3DTilesLayer"===C};c.isKnowledgeGraphLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"knowledge-graph"===C.type&&"layers"in C};c.isLayerWithFeatureLayerSource=function(C){return("feature"===C?.type||"subtype-group"===C?.type)&&"feature-layer"===C.source?.type};c.isLinkChartLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"link-chart"===C.type&&"layers"in C};c.isMapNotesLayer=function(C){return null!=C&&
"object"===typeof C&&"type"in C&&"map-notes"===C.type&&"sublayers"in C};c.isSceneLayer=u;c.isSceneServiceLayer=function(C){C=C?.type;return"building-scene"===C||"integrated-mesh"===C||"point-cloud"===C||"scene"===C};c.isSubtypeGroupLayer=function(C){return null!=C&&"object"===typeof C&&"type"in C&&"subtype-group"===C.type&&"sublayers"in C};c.isTable=function(C){return null!=C&&"object"===typeof C&&"isTable"in C&&!!C.isTable};c.isTiledLayer=function(C){C=C?.type;return"base-tile"===C||"tile"===C||
"elevation"===C||"imagery-tile"===C||"base-elevation"===C||"open-street-map"===C||"wcs"===C||"web-tile"===C||"wmts"===C||"vector-tile"===C};c.isVoxelLayer=function(C){return"voxel"===C?.type};c.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};c.serializeLayerDefinitions=function(C){const f=/[:;]/,n=[];let d=!1;if(C&&(C.forEach((r,B)=>{n.push([B,r]);!d&&f.test(r)&&(d=!0)}),0<
n.length)){if(d){const r={};n.forEach(B=>{r[B[0]]=B[1]});C=JSON.stringify(r)}else{const r=[];n.forEach(B=>{r.push(B[0]+":"+B[1])});C=r.join(";")}return C}return null};c.serializeTimeOptions=function(C){if(C){var f=[];C.forEach((n,d)=>{f.push('"'+d+'":'+JSON.stringify(n))});if(f.length)return"{"+f.join(",")+"}"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(c,g){c.canInterpolateEffects=function(w,u){const H=
w.length>u.length?w:u;return(w.length>u.length?u:w).every((C,f)=>C.type===H[f].type)};c.effectEquals=function(w,u){w=JSON.stringify(w??null);u=JSON.stringify(u??null);return w===u};c.isEffectFunctions=function(w){return(w=w[0])?"type"in w:!1};c.normalizeEffects=function(w,u){const H=w.length>u.length?w:u;w=w.length>u.length?u:w;for(u=w.length;u<H.length;u++)w.push(g.createEffectWithInitialValues(H[u]))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports",
"../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(c,g,w,u,H){function C(t,q,a){return t+(q-t)*a}function f(t){return Math.round(1E3*w.px2pt(t))/1E3}class n{constructor(t,q,a){this.strength=t;this.radius=q;this.threshold=a;this.type="bloom"}interpolate(t,q,a){this.strength=C(t.strength,q.strength,a);this.radius=C(t.radius,q.radius,a);this.threshold=C(t.threshold,q.threshold,a)}clone(){return new n(this.strength,this.radius,
this.threshold)}toJSON(){return{type:"bloom",radius:f(this.radius),strength:this.strength,threshold:this.threshold}}}class d{constructor(t){this.radius=t;this.type="blur"}interpolate(t,q,a){this.radius=Math.round(C(t.radius,q.radius,a))}clone(){return new d(this.radius)}toJSON(){return{type:"blur",radius:f(this.radius)}}}class r{constructor(t,q){this.type=t;this.amount=q;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||
this._updateMatrix();return this._colorMatrix}interpolate(t,q,a){this.amount=C(t.amount,q.amount,a);this._updateMatrix()}clone(){return new r(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||u.create();switch(this.type){case "brightness":this._colorMatrix=H.brightness(t,this.amount);break;case "contrast":this._colorMatrix=H.contrast(t,this.amount);break;case "grayscale":this._colorMatrix=H.grayscale(t,this.amount);break;case "invert":this._colorMatrix=
H.invert(t,this.amount);break;case "saturate":this._colorMatrix=H.saturate(t,this.amount);break;case "sepia":this._colorMatrix=H.sepia(t,this.amount)}}}class B{constructor(t,q,a,m){this.offsetX=t;this.offsetY=q;this.blurRadius=a;this.color=m;this.type="drop-shadow"}interpolate(t,q,a){this.offsetX=C(t.offsetX,q.offsetX,a);this.offsetY=C(t.offsetY,q.offsetY,a);this.blurRadius=C(t.blurRadius,q.blurRadius,a);this.color[0]=Math.round(C(t.color[0],q.color[0],a));this.color[1]=Math.round(C(t.color[1],q.color[1],
a));this.color[2]=Math.round(C(t.color[2],q.color[2],a));this.color[3]=C(t.color[3],q.color[3],a)}clone(){return new B(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];t[3]*=255;return{type:"drop-shadow",xoffset:f(this.offsetX),yoffset:f(this.offsetY),blurRadius:f(this.blurRadius),color:t}}}class A{constructor(t){this.angle=t;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(t,q,a){this.angle=
C(t.angle,q.angle,a);this._updateMatrix()}clone(){return new A(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||u.create();this._colorMatrix=H.rotateHue(t,this.angle)}}class K{constructor(t){this.amount=t;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(t,q,a){this.amount=C(t.amount,q.amount,a)}clone(){return new K(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}c.BloomEffect=n;c.BlurEffect=d;c.ColorMatrixEffect=
r;c.DropShadowEffect=B;c.HueRotateEffect=A;c.OpacityEffect=K;c.createEffectWithInitialValues=function(t){switch(t.type){case "grayscale":case "sepia":case "invert":return new r(t.type,0);case "saturate":case "brightness":case "contrast":return new r(t.type,1);case "opacity":return new K(1);case "hue-rotate":return new A(0);case "blur":return new d(0);case "drop-shadow":return new B(0,0,0,[...g.getNamedColor("transparent")]);case "bloom":return new n(0,0,1)}};Object.defineProperty(c,Symbol.toStringTag,
{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(c){function g(){const n=new Float32Array(16);n[0]=1;n[5]=1;n[10]=1;n[15]=1;return n}function w(n){const d=new Float32Array(16);d[0]=n[0];d[1]=n[1];d[2]=n[2];d[3]=n[3];d[4]=n[4];d[5]=n[5];d[6]=n[6];d[7]=n[7];d[8]=n[8];d[9]=n[9];d[10]=n[10];d[11]=n[11];d[12]=n[12];d[13]=n[13];d[14]=n[14];d[15]=n[15];return d}function u(n,d,r,B,A,K,t,q,a,m,p,F,Q,e,J,T){const L=new Float32Array(16);L[0]=n;L[1]=d;
L[2]=r;L[3]=B;L[4]=A;L[5]=K;L[6]=t;L[7]=q;L[8]=a;L[9]=m;L[10]=p;L[11]=F;L[12]=Q;L[13]=e;L[14]=J;L[15]=T;return L}function H(n,d){return new Float32Array(n,d,16)}const C=g(),f=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:C,clone:w,create:g,createView:H,fromValues:u},Symbol.toStringTag,{value:"Module"}));c.IDENTITY=C;c.clone=w;c.create=g;c.createView=H;c.fromValues=u;c.mat4f32=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports",
"../../core/libs/gl-matrix-2/math/mat4"],function(c,g){c.brightness=(w,u)=>{w=g.set(w,u,0,0,0,0,u,0,0,0,0,u,0,0,0,0,1);return g.transpose(w,w)};c.contrast=(w,u)=>{w=g.set(w,u,0,0,.5-.5*u,0,u,0,.5-.5*u,0,0,u,.5-.5*u,0,0,0,1);return g.transpose(w,w)};c.grayscale=(w,u)=>{u=1-u;w=g.set(w,.2126+.7874*u,.7152-.7152*u,.0722-.0722*u,0,.2126-.2126*u,.7152+.2848*u,.0722-.0722*u,0,.2126-.2126*u,.7152-.7152*u,.0722+.9278*u,0,0,0,0,1);return g.transpose(w,w)};c.invert=(w,u)=>{const H=1-2*u;w=g.set(w,H,0,0,u,0,
H,0,u,0,0,H,u,0,0,0,1);return g.transpose(w,w)};c.rotateHue=(w,u)=>{const H=Math.sin(u*Math.PI/180);u=Math.cos(u*Math.PI/180);w=g.set(w,.213+.787*u-.213*H,.715-.715*u-.715*H,.072-.072*u+.928*H,0,.213-.213*u+.143*H,.715+.285*u+.14*H,.072-.072*u-.283*H,0,.213-.213*u-.787*H,.715-.715*u+.715*H,.072+.928*u+.072*H,0,0,0,0,1);return g.transpose(w,w)};c.saturate=(w,u)=>{w=g.set(w,.213+.787*u,.715-.715*u,.072-.072*u,0,.213-.213*u,.715+.285*u,.072-.072*u,0,.213-.213*u,.715-.715*u,.072+.928*u,0,0,0,0,1);return g.transpose(w,
w)};c.sepia=(w,u)=>{u=1-u;w=g.set(w,.393+.607*u,.769-.769*u,.189-.189*u,0,.349-.349*u,.686+.314*u,.168-.168*u,0,.272-.272*u,.534-.534*u,.131+.869*u,0,0,0,0,1);return g.transpose(w,w)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(c,g,w){function u(h,E){h[0]=E[0];h[1]=E[1];h[2]=E[2];h[3]=E[3];h[4]=E[4];h[5]=E[5];h[6]=E[6];h[7]=E[7];h[8]=E[8];h[9]=E[9];h[10]=E[10];h[11]=
E[11];h[12]=E[12];h[13]=E[13];h[14]=E[14];h[15]=E[15];return h}function H(h,E,X,aa,ha,x,I,M,W,Z,ba,ea,ia,la,ra,oa,qa){h[0]=E;h[1]=X;h[2]=aa;h[3]=ha;h[4]=x;h[5]=I;h[6]=M;h[7]=W;h[8]=Z;h[9]=ba;h[10]=ea;h[11]=ia;h[12]=la;h[13]=ra;h[14]=oa;h[15]=qa;return h}function C(h){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function f(h,E){if(h===E){const X=E[1],aa=E[2],ha=E[3],x=E[6],I=E[7],M=E[11];h[1]=E[4];h[2]=E[8];h[3]=E[12];
h[4]=X;h[6]=E[9];h[7]=E[13];h[8]=aa;h[9]=x;h[11]=E[14];h[12]=ha;h[13]=I;h[14]=M}else h[0]=E[0],h[1]=E[4],h[2]=E[8],h[3]=E[12],h[4]=E[1],h[5]=E[5],h[6]=E[9],h[7]=E[13],h[8]=E[2],h[9]=E[6],h[10]=E[10],h[11]=E[14],h[12]=E[3],h[13]=E[7],h[14]=E[11],h[15]=E[15];return h}function n(h,E){d(h,E)||C(h);return h}function d(h,E){const X=E[0],aa=E[1],ha=E[2],x=E[3],I=E[4],M=E[5],W=E[6],Z=E[7],ba=E[8],ea=E[9],ia=E[10],la=E[11],ra=E[12],oa=E[13],qa=E[14];E=E[15];const Ca=X*M-aa*I,va=X*W-ha*I,Ba=X*Z-x*I,Aa=aa*W-
ha*M,ya=aa*Z-x*M,Ha=ha*Z-x*W,Pa=ba*oa-ea*ra,Ya=ba*qa-ia*ra,Wa=ba*E-la*ra,Ja=ea*qa-ia*oa,Ka=ea*E-la*oa,ka=ia*E-la*qa;let Qa=Ca*ka-va*Ka+Ba*Ja+Aa*Wa-ya*Ya+Ha*Pa;if(!Qa)return null;Qa=1/Qa;h[0]=(M*ka-W*Ka+Z*Ja)*Qa;h[1]=(ha*Ka-aa*ka-x*Ja)*Qa;h[2]=(oa*Ha-qa*ya+E*Aa)*Qa;h[3]=(ia*ya-ea*Ha-la*Aa)*Qa;h[4]=(W*Wa-I*ka-Z*Ya)*Qa;h[5]=(X*ka-ha*Wa+x*Ya)*Qa;h[6]=(qa*Ba-ra*Ha-E*va)*Qa;h[7]=(ba*Ha-ia*Ba+la*va)*Qa;h[8]=(I*Ka-M*Wa+Z*Pa)*Qa;h[9]=(aa*Wa-X*Ka-x*Pa)*Qa;h[10]=(ra*ya-oa*Ba+E*Ca)*Qa;h[11]=(ea*Ba-ba*ya-la*Ca)*
Qa;h[12]=(M*Ya-I*Ja-W*Pa)*Qa;h[13]=(X*Ja-aa*Ya+ha*Pa)*Qa;h[14]=(oa*va-ra*Aa-qa*Ca)*Qa;h[15]=(ba*Aa-ea*va+ia*Ca)*Qa;return h}function r(h,E){const X=E[0],aa=E[1],ha=E[2],x=E[3],I=E[4],M=E[5],W=E[6],Z=E[7],ba=E[8],ea=E[9],ia=E[10],la=E[11],ra=E[12],oa=E[13],qa=E[14];E=E[15];h[0]=M*(ia*E-la*qa)-ea*(W*E-Z*qa)+oa*(W*la-Z*ia);h[1]=-(aa*(ia*E-la*qa)-ea*(ha*E-x*qa)+oa*(ha*la-x*ia));h[2]=aa*(W*E-Z*qa)-M*(ha*E-x*qa)+oa*(ha*Z-x*W);h[3]=-(aa*(W*la-Z*ia)-M*(ha*la-x*ia)+ea*(ha*Z-x*W));h[4]=-(I*(ia*E-la*qa)-ba*
(W*E-Z*qa)+ra*(W*la-Z*ia));h[5]=X*(ia*E-la*qa)-ba*(ha*E-x*qa)+ra*(ha*la-x*ia);h[6]=-(X*(W*E-Z*qa)-I*(ha*E-x*qa)+ra*(ha*Z-x*W));h[7]=X*(W*la-Z*ia)-I*(ha*la-x*ia)+ba*(ha*Z-x*W);h[8]=I*(ea*E-la*oa)-ba*(M*E-Z*oa)+ra*(M*la-Z*ea);h[9]=-(X*(ea*E-la*oa)-ba*(aa*E-x*oa)+ra*(aa*la-x*ea));h[10]=X*(M*E-Z*oa)-I*(aa*E-x*oa)+ra*(aa*Z-x*M);h[11]=-(X*(M*la-Z*ea)-I*(aa*la-x*ea)+ba*(aa*Z-x*M));h[12]=-(I*(ea*qa-ia*oa)-ba*(M*qa-W*oa)+ra*(M*ia-W*ea));h[13]=X*(ea*qa-ia*oa)-ba*(aa*qa-ha*oa)+ra*(aa*ia-ha*ea);h[14]=-(X*(M*
qa-W*oa)-I*(aa*qa-ha*oa)+ra*(aa*W-ha*M));h[15]=X*(M*ia-W*ea)-I*(aa*ia-ha*ea)+ba*(aa*W-ha*M);return h}function B(h){const E=h[0],X=h[1],aa=h[2],ha=h[3],x=h[4],I=h[5],M=h[6],W=h[7],Z=h[8],ba=h[9],ea=h[10],ia=h[11],la=h[12],ra=h[13],oa=h[14];h=h[15];return(E*I-X*x)*(ea*h-ia*oa)-(E*M-aa*x)*(ba*h-ia*ra)+(E*W-ha*x)*(ba*oa-ea*ra)+(X*M-aa*I)*(Z*h-ia*la)-(X*W-ha*I)*(Z*oa-ea*la)+(aa*W-ha*M)*(Z*ra-ba*la)}function A(h,E,X){const aa=E[0],ha=E[1],x=E[2],I=E[3],M=E[4],W=E[5],Z=E[6],ba=E[7],ea=E[8],ia=E[9],la=E[10],
ra=E[11],oa=E[12],qa=E[13],Ca=E[14];E=E[15];let va=X[0],Ba=X[1],Aa=X[2],ya=X[3];h[0]=va*aa+Ba*M+Aa*ea+ya*oa;h[1]=va*ha+Ba*W+Aa*ia+ya*qa;h[2]=va*x+Ba*Z+Aa*la+ya*Ca;h[3]=va*I+Ba*ba+Aa*ra+ya*E;va=X[4];Ba=X[5];Aa=X[6];ya=X[7];h[4]=va*aa+Ba*M+Aa*ea+ya*oa;h[5]=va*ha+Ba*W+Aa*ia+ya*qa;h[6]=va*x+Ba*Z+Aa*la+ya*Ca;h[7]=va*I+Ba*ba+Aa*ra+ya*E;va=X[8];Ba=X[9];Aa=X[10];ya=X[11];h[8]=va*aa+Ba*M+Aa*ea+ya*oa;h[9]=va*ha+Ba*W+Aa*ia+ya*qa;h[10]=va*x+Ba*Z+Aa*la+ya*Ca;h[11]=va*I+Ba*ba+Aa*ra+ya*E;va=X[12];Ba=X[13];Aa=X[14];
ya=X[15];h[12]=va*aa+Ba*M+Aa*ea+ya*oa;h[13]=va*ha+Ba*W+Aa*ia+ya*qa;h[14]=va*x+Ba*Z+Aa*la+ya*Ca;h[15]=va*I+Ba*ba+Aa*ra+ya*E;return h}function K(h,E,X){const aa=X[0],ha=X[1];X=X[2];if(E===h)h[12]=E[0]*aa+E[4]*ha+E[8]*X+E[12],h[13]=E[1]*aa+E[5]*ha+E[9]*X+E[13],h[14]=E[2]*aa+E[6]*ha+E[10]*X+E[14],h[15]=E[3]*aa+E[7]*ha+E[11]*X+E[15];else{const x=E[0],I=E[1],M=E[2],W=E[3],Z=E[4],ba=E[5],ea=E[6],ia=E[7],la=E[8],ra=E[9],oa=E[10],qa=E[11];h[0]=x;h[1]=I;h[2]=M;h[3]=W;h[4]=Z;h[5]=ba;h[6]=ea;h[7]=ia;h[8]=la;
h[9]=ra;h[10]=oa;h[11]=qa;h[12]=x*aa+Z*ha+la*X+E[12];h[13]=I*aa+ba*ha+ra*X+E[13];h[14]=M*aa+ea*ha+oa*X+E[14];h[15]=W*aa+ia*ha+qa*X+E[15]}return h}function t(h,E,X){const aa=X[0],ha=X[1];X=X[2];h[0]=E[0]*aa;h[1]=E[1]*aa;h[2]=E[2]*aa;h[3]=E[3]*aa;h[4]=E[4]*ha;h[5]=E[5]*ha;h[6]=E[6]*ha;h[7]=E[7]*ha;h[8]=E[8]*X;h[9]=E[9]*X;h[10]=E[10]*X;h[11]=E[11]*X;h[12]=E[12];h[13]=E[13];h[14]=E[14];h[15]=E[15];return h}function q(h,E,X,aa){let ha=aa[0],x=aa[1];aa=aa[2];let I=Math.sqrt(ha*ha+x*x+aa*aa);var M=void 0,
W=void 0;let Z=void 0,ba=void 0,ea=void 0,ia=void 0,la=void 0,ra=void 0,oa=void 0,qa=void 0,Ca=void 0,va=void 0,Ba=void 0,Aa=void 0,ya=void 0,Ha=void 0,Pa=void 0,Ya=void 0,Wa=void 0,Ja=void 0,Ka=void 0,ka=void 0;W=M=void 0;if(I<w.getEpsilon())return null;I=1/I;ha*=I;x*=I;aa*=I;M=Math.sin(X);W=Math.cos(X);Z=1-W;ba=E[0];ea=E[1];ia=E[2];la=E[3];ra=E[4];oa=E[5];qa=E[6];Ca=E[7];va=E[8];Ba=E[9];Aa=E[10];ya=E[11];Ha=ha*ha*Z+W;Pa=x*ha*Z+aa*M;Ya=aa*ha*Z-x*M;Wa=ha*x*Z-aa*M;Ja=x*x*Z+W;Ka=aa*x*Z+ha*M;ka=ha*aa*
Z+x*M;M=x*aa*Z-ha*M;W=aa*aa*Z+W;h[0]=ba*Ha+ra*Pa+va*Ya;h[1]=ea*Ha+oa*Pa+Ba*Ya;h[2]=ia*Ha+qa*Pa+Aa*Ya;h[3]=la*Ha+Ca*Pa+ya*Ya;h[4]=ba*Wa+ra*Ja+va*Ka;h[5]=ea*Wa+oa*Ja+Ba*Ka;h[6]=ia*Wa+qa*Ja+Aa*Ka;h[7]=la*Wa+Ca*Ja+ya*Ka;h[8]=ba*ka+ra*M+va*W;h[9]=ea*ka+oa*M+Ba*W;h[10]=ia*ka+qa*M+Aa*W;h[11]=la*ka+Ca*M+ya*W;E!==h&&(h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);return h}function a(h,E,X){const aa=Math.sin(X);X=Math.cos(X);const ha=E[4],x=E[5],I=E[6],M=E[7],W=E[8],Z=E[9],ba=E[10],ea=E[11];E!==h&&(h[0]=
E[0],h[1]=E[1],h[2]=E[2],h[3]=E[3],h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);h[4]=ha*X+W*aa;h[5]=x*X+Z*aa;h[6]=I*X+ba*aa;h[7]=M*X+ea*aa;h[8]=W*X-ha*aa;h[9]=Z*X-x*aa;h[10]=ba*X-I*aa;h[11]=ea*X-M*aa;return h}function m(h,E,X){const aa=Math.sin(X);X=Math.cos(X);const ha=E[0],x=E[1],I=E[2],M=E[3],W=E[8],Z=E[9],ba=E[10],ea=E[11];E!==h&&(h[4]=E[4],h[5]=E[5],h[6]=E[6],h[7]=E[7],h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);h[0]=ha*X-W*aa;h[1]=x*X-Z*aa;h[2]=I*X-ba*aa;h[3]=M*X-ea*aa;h[8]=ha*aa+W*
X;h[9]=x*aa+Z*X;h[10]=I*aa+ba*X;h[11]=M*aa+ea*X;return h}function p(h,E,X){const aa=Math.sin(X);X=Math.cos(X);const ha=E[0],x=E[1],I=E[2],M=E[3],W=E[4],Z=E[5],ba=E[6],ea=E[7];E!==h&&(h[8]=E[8],h[9]=E[9],h[10]=E[10],h[11]=E[11],h[12]=E[12],h[13]=E[13],h[14]=E[14],h[15]=E[15]);h[0]=ha*X+W*aa;h[1]=x*X+Z*aa;h[2]=I*X+ba*aa;h[3]=M*X+ea*aa;h[4]=W*X-ha*aa;h[5]=Z*X-x*aa;h[6]=ba*X-I*aa;h[7]=ea*X-M*aa;return h}function F(h,E){h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=
0;h[12]=E[0];h[13]=E[1];h[14]=E[2];h[15]=1;return h}function Q(h,E){h[0]=E[0];h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=E[1];h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=E[2];h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function e(h,E,X){if(0===E)return C(h);let aa=X[0],ha=X[1];X=X[2];let x=Math.sqrt(aa*aa+ha*ha+X*X),I=void 0,M=void 0,W=void 0;if(x<w.getEpsilon())return null;x=1/x;aa*=x;ha*=x;X*=x;I=Math.sin(E);M=Math.cos(E);W=1-M;h[0]=aa*aa*W+M;h[1]=ha*aa*W+X*I;h[2]=X*aa*W-ha*I;h[3]=0;h[4]=aa*ha*W-X*I;h[5]=ha*ha*
W+M;h[6]=X*ha*W+aa*I;h[7]=0;h[8]=aa*X*W+ha*I;h[9]=ha*X*W-aa*I;h[10]=X*X*W+M;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function J(h,E){const X=Math.sin(E);E=Math.cos(E);h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=E;h[6]=X;h[7]=0;h[8]=0;h[9]=-X;h[10]=E;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function T(h,E){const X=Math.sin(E);E=Math.cos(E);h[0]=E;h[1]=0;h[2]=-X;h[3]=0;h[4]=0;h[5]=1;h[6]=0;h[7]=0;h[8]=X;h[9]=0;h[10]=E;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function L(h,E){const X=
Math.sin(E);E=Math.cos(E);h[0]=E;h[1]=X;h[2]=0;h[3]=0;h[4]=-X;h[5]=E;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=1;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function U(h,E,X){var aa=E[0],ha=E[1],x=E[2],I=E[3],M=aa+aa,W=ha+ha;const Z=x+x;E=aa*M;const ba=aa*W;aa*=Z;const ea=ha*W;ha*=Z;x*=Z;M*=I;W*=I;I*=Z;h[0]=1-(ea+x);h[1]=ba+I;h[2]=aa-W;h[3]=0;h[4]=ba-I;h[5]=1-(E+x);h[6]=ha+M;h[7]=0;h[8]=aa+W;h[9]=ha-M;h[10]=1-(E+ea);h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function S(h,E){const X=Va,
aa=-E[0],ha=-E[1],x=-E[2],I=E[3],M=E[4],W=E[5],Z=E[6],ba=E[7],ea=aa*aa+ha*ha+x*x+I*I;0<ea?(X[0]=2*(M*I+ba*aa+W*x-Z*ha)/ea,X[1]=2*(W*I+ba*ha+Z*aa-M*x)/ea,X[2]=2*(Z*I+ba*x+M*ha-W*aa)/ea):(X[0]=2*(M*I+ba*aa+W*x-Z*ha),X[1]=2*(W*I+ba*ha+Z*aa-M*x),X[2]=2*(Z*I+ba*x+M*ha-W*aa));U(h,E,X);return h}function P(h,E){h[0]=E[12];h[1]=E[13];h[2]=E[14];return h}function l(h,E){const X=E[0],aa=E[1],ha=E[2],x=E[4],I=E[5],M=E[6],W=E[8],Z=E[9];E=E[10];h[0]=Math.sqrt(X*X+aa*aa+ha*ha);h[1]=Math.sqrt(x*x+I*I+M*M);h[2]=Math.sqrt(W*
W+Z*Z+E*E);return h}function z(h,E){const X=E[0]+E[5]+E[10];let aa=0;0<X?(aa=2*Math.sqrt(X+1),h[3]=.25*aa,h[0]=(E[6]-E[9])/aa,h[1]=(E[8]-E[2])/aa,h[2]=(E[1]-E[4])/aa):E[0]>E[5]&&E[0]>E[10]?(aa=2*Math.sqrt(1+E[0]-E[5]-E[10]),h[3]=(E[6]-E[9])/aa,h[0]=.25*aa,h[1]=(E[1]+E[4])/aa,h[2]=(E[8]+E[2])/aa):E[5]>E[10]?(aa=2*Math.sqrt(1+E[5]-E[0]-E[10]),h[3]=(E[8]-E[2])/aa,h[0]=(E[1]+E[4])/aa,h[1]=.25*aa,h[2]=(E[6]+E[9])/aa):(aa=2*Math.sqrt(1+E[10]-E[0]-E[5]),h[3]=(E[1]-E[4])/aa,h[0]=(E[8]+E[2])/aa,h[1]=(E[6]+
E[9])/aa,h[2]=.25*aa);return h}function y(h,E,X,aa){var ha=E[0],x=E[1],I=E[2],M=E[3],W=ha+ha,Z=x+x,ba=I+I;E=ha*W;const ea=ha*Z;ha*=ba;const ia=x*Z;x*=ba;I*=ba;W*=M;Z*=M;M*=ba;ba=aa[0];const la=aa[1];aa=aa[2];h[0]=(1-(ia+I))*ba;h[1]=(ea+M)*ba;h[2]=(ha-Z)*ba;h[3]=0;h[4]=(ea-M)*la;h[5]=(1-(E+I))*la;h[6]=(x+W)*la;h[7]=0;h[8]=(ha+Z)*aa;h[9]=(x-W)*aa;h[10]=(1-(E+ia))*aa;h[11]=0;h[12]=X[0];h[13]=X[1];h[14]=X[2];h[15]=1;return h}function v(h,E,X,aa,ha){var x=E[0],I=E[1],M=E[2],W=E[3],Z=x+x,ba=I+I,ea=M+M;
E=x*Z;var ia=x*ba,la=x*ea;x=I*ba;I*=ea;var ra=M*ea;M=W*Z;ba*=W;const oa=W*ea;var qa=aa[0],Ca=aa[1];ea=aa[2];aa=ha[0];W=ha[1];ha=ha[2];Z=(1-(x+ra))*qa;const va=(ia+oa)*qa;qa*=la-ba;ia=(ia-oa)*Ca;ra=(1-(E+ra))*Ca;Ca*=I+M;la=(la+ba)*ea;I=(I-M)*ea;E=(1-(E+x))*ea;h[0]=Z;h[1]=va;h[2]=qa;h[3]=0;h[4]=ia;h[5]=ra;h[6]=Ca;h[7]=0;h[8]=la;h[9]=I;h[10]=E;h[11]=0;h[12]=X[0]+aa-(Z*aa+ia*W+la*ha);h[13]=X[1]+W-(va*aa+ra*W+I*ha);h[14]=X[2]+ha-(qa*aa+Ca*W+E*ha);h[15]=1;return h}function N(h,E){var X=E[0],aa=E[1],ha=
E[2];E=E[3];var x=X+X,I=aa+aa;const M=ha+ha;X*=x;const W=aa*x;aa*=I;const Z=ha*x,ba=ha*I;ha*=M;x*=E;I*=E;E*=M;h[0]=1-aa-ha;h[1]=W+E;h[2]=Z-I;h[3]=0;h[4]=W-E;h[5]=1-X-ha;h[6]=ba+x;h[7]=0;h[8]=Z+I;h[9]=ba-x;h[10]=1-X-aa;h[11]=0;h[12]=0;h[13]=0;h[14]=0;h[15]=1;return h}function G(h,E,X,aa,ha,x,I){const M=1/(X-E),W=1/(ha-aa),Z=1/(x-I);h[0]=2*x*M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*x*W;h[6]=0;h[7]=0;h[8]=(X+E)*M;h[9]=(ha+aa)*W;h[10]=(I+x)*Z;h[11]=-1;h[12]=0;h[13]=0;h[14]=I*x*2*Z;h[15]=0;return h}function R(h,
E,X,aa,ha){E=1/Math.tan(E/2);let x=void 0;h[0]=E/X;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=E;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[11]=-1;h[12]=0;h[13]=0;h[15]=0;null!=ha&&Infinity!==ha?(x=1/(aa-ha),h[10]=(ha+aa)*x,h[14]=2*ha*aa*x):(h[10]=-1,h[14]=-2*aa);return h}function Y(h,E,X,aa){const ha=Math.tan(E.upDegrees*Math.PI/180),x=Math.tan(E.downDegrees*Math.PI/180),I=Math.tan(E.leftDegrees*Math.PI/180);E=Math.tan(E.rightDegrees*Math.PI/180);const M=2/(I+E),W=2/(ha+x);h[0]=M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=W;h[6]=
0;h[7]=0;h[8]=-((I-E)*M*.5);h[9]=(ha-x)*W*.5;h[10]=aa/(X-aa);h[11]=-1;h[12]=0;h[13]=0;h[14]=aa*X/(X-aa);h[15]=0;return h}function ca(h,E,X,aa,ha,x,I){const M=1/(E-X),W=1/(aa-ha),Z=1/(x-I);h[0]=-2*M;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=-2*W;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=2*Z;h[11]=0;h[12]=(E+X)*M;h[13]=(ha+aa)*W;h[14]=(I+x)*Z;h[15]=1;return h}function ja(h,E,X,aa){const ha=E[0],x=E[1];E=E[2];let I=ha-X[0],M=x-X[1];X=E-X[2];var W=w.getEpsilon();if(Math.abs(I)<W&&Math.abs(M)<W&&Math.abs(X)<W)C(h);else{var Z=
1/Math.sqrt(I*I+M*M+X*X);I*=Z;M*=Z;X*=Z;Z=aa[0];var ba=aa[1];W=aa[2];aa=ba*X-W*M;W=W*I-Z*X;ba=Z*M-ba*I;(Z=Math.sqrt(aa*aa+W*W+ba*ba))?(Z=1/Z,aa*=Z,W*=Z,ba*=Z):ba=W=aa=0;var ea=M*ba-X*W,ia=X*aa-I*ba,la=I*W-M*aa;(Z=Math.sqrt(ea*ea+ia*ia+la*la))?(Z=1/Z,ea*=Z,ia*=Z,la*=Z):la=ia=ea=0;h[0]=aa;h[1]=ea;h[2]=I;h[3]=0;h[4]=W;h[5]=ia;h[6]=M;h[7]=0;h[8]=ba;h[9]=la;h[10]=X;h[11]=0;h[12]=-(aa*ha+W*x+ba*E);h[13]=-(ea*ha+ia*x+la*E);h[14]=-(I*ha+M*x+X*E);h[15]=1}}function na(h,E,X,aa){const ha=E[0],x=E[1];E=E[2];
var I=aa[0];const M=aa[1];var W=aa[2];aa=ha-X[0];let Z=x-X[1];X=E-X[2];let ba=aa*aa+Z*Z+X*X;0<ba&&(ba=1/Math.sqrt(ba),aa*=ba,Z*=ba,X*=ba);let ea=M*X-W*Z;W=W*aa-I*X;I=I*Z-M*aa;ba=ea*ea+W*W+I*I;0<ba&&(ba=1/Math.sqrt(ba),ea*=ba,W*=ba,I*=ba);h[0]=ea;h[1]=W;h[2]=I;h[3]=0;h[4]=Z*I-X*W;h[5]=X*ea-aa*I;h[6]=aa*W-Z*ea;h[7]=0;h[8]=aa;h[9]=Z;h[10]=X;h[11]=0;h[12]=ha;h[13]=x;h[14]=E;h[15]=1;return h}function sa(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+
", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function ua(h){return Math.sqrt(h[0]**2+h[1]**2+h[2]**2+h[3]**2+h[4]**2+h[5]**2+h[6]**2+h[7]**2+h[8]**2+h[9]**2+h[10]**2+h[11]**2+h[12]**2+h[13]**2+h[14]**2+h[15]**2)}function ta(h,E,X){h[0]=E[0]+X[0];h[1]=E[1]+X[1];h[2]=E[2]+X[2];h[3]=E[3]+X[3];h[4]=E[4]+X[4];h[5]=E[5]+X[5];h[6]=E[6]+X[6];h[7]=E[7]+X[7];h[8]=E[8]+X[8];h[9]=E[9]+X[9];h[10]=E[10]+X[10];h[11]=E[11]+X[11];h[12]=E[12]+X[12];h[13]=E[13]+X[13];h[14]=E[14]+X[14];
h[15]=E[15]+X[15];return h}function wa(h,E,X){h[0]=E[0]-X[0];h[1]=E[1]-X[1];h[2]=E[2]-X[2];h[3]=E[3]-X[3];h[4]=E[4]-X[4];h[5]=E[5]-X[5];h[6]=E[6]-X[6];h[7]=E[7]-X[7];h[8]=E[8]-X[8];h[9]=E[9]-X[9];h[10]=E[10]-X[10];h[11]=E[11]-X[11];h[12]=E[12]-X[12];h[13]=E[13]-X[13];h[14]=E[14]-X[14];h[15]=E[15]-X[15];return h}function xa(h,E,X){h[0]=E[0]*X;h[1]=E[1]*X;h[2]=E[2]*X;h[3]=E[3]*X;h[4]=E[4]*X;h[5]=E[5]*X;h[6]=E[6]*X;h[7]=E[7]*X;h[8]=E[8]*X;h[9]=E[9]*X;h[10]=E[10]*X;h[11]=E[11]*X;h[12]=E[12]*X;h[13]=E[13]*
X;h[14]=E[14]*X;h[15]=E[15]*X;return h}function Da(h,E,X,aa){h[0]=E[0]+X[0]*aa;h[1]=E[1]+X[1]*aa;h[2]=E[2]+X[2]*aa;h[3]=E[3]+X[3]*aa;h[4]=E[4]+X[4]*aa;h[5]=E[5]+X[5]*aa;h[6]=E[6]+X[6]*aa;h[7]=E[7]+X[7]*aa;h[8]=E[8]+X[8]*aa;h[9]=E[9]+X[9]*aa;h[10]=E[10]+X[10]*aa;h[11]=E[11]+X[11]*aa;h[12]=E[12]+X[12]*aa;h[13]=E[13]+X[13]*aa;h[14]=E[14]+X[14]*aa;h[15]=E[15]+X[15]*aa;return h}function Ia(h,E){return h[0]===E[0]&&h[1]===E[1]&&h[2]===E[2]&&h[3]===E[3]&&h[4]===E[4]&&h[5]===E[5]&&h[6]===E[6]&&h[7]===E[7]&&
h[8]===E[8]&&h[9]===E[9]&&h[10]===E[10]&&h[11]===E[11]&&h[12]===E[12]&&h[13]===E[13]&&h[14]===E[14]&&h[15]===E[15]}function Ra(h,E){if(h===E)return!0;const X=h[0],aa=h[1],ha=h[2],x=h[3],I=h[4],M=h[5],W=h[6],Z=h[7],ba=h[8],ea=h[9],ia=h[10],la=h[11],ra=h[12],oa=h[13],qa=h[14];h=h[15];const Ca=E[0],va=E[1],Ba=E[2],Aa=E[3],ya=E[4],Ha=E[5],Pa=E[6],Ya=E[7],Wa=E[8],Ja=E[9],Ka=E[10],ka=E[11],Qa=E[12],Nb=E[13],nb=E[14];E=E[15];const b=w.getEpsilon();return Math.abs(X-Ca)<=b*Math.max(1,Math.abs(X),Math.abs(Ca))&&
Math.abs(aa-va)<=b*Math.max(1,Math.abs(aa),Math.abs(va))&&Math.abs(ha-Ba)<=b*Math.max(1,Math.abs(ha),Math.abs(Ba))&&Math.abs(x-Aa)<=b*Math.max(1,Math.abs(x),Math.abs(Aa))&&Math.abs(I-ya)<=b*Math.max(1,Math.abs(I),Math.abs(ya))&&Math.abs(M-Ha)<=b*Math.max(1,Math.abs(M),Math.abs(Ha))&&Math.abs(W-Pa)<=b*Math.max(1,Math.abs(W),Math.abs(Pa))&&Math.abs(Z-Ya)<=b*Math.max(1,Math.abs(Z),Math.abs(Ya))&&Math.abs(ba-Wa)<=b*Math.max(1,Math.abs(ba),Math.abs(Wa))&&Math.abs(ea-Ja)<=b*Math.max(1,Math.abs(ea),Math.abs(Ja))&&
Math.abs(ia-Ka)<=b*Math.max(1,Math.abs(ia),Math.abs(Ka))&&Math.abs(la-ka)<=b*Math.max(1,Math.abs(la),Math.abs(ka))&&Math.abs(ra-Qa)<=b*Math.max(1,Math.abs(ra),Math.abs(Qa))&&Math.abs(oa-Nb)<=b*Math.max(1,Math.abs(oa),Math.abs(Nb))&&Math.abs(qa-nb)<=b*Math.max(1,Math.abs(qa),Math.abs(nb))&&Math.abs(h-E)<=b*Math.max(1,Math.abs(h),Math.abs(E))}function Na(h){const E=w.getEpsilon(),X=h[0],aa=h[1],ha=h[2],x=h[4],I=h[5],M=h[6],W=h[8],Z=h[9];h=h[10];return Math.abs(1-(X*X+x*x+W*W))<=E&&Math.abs(1-(aa*aa+
I*I+Z*Z))<=E&&Math.abs(1-(ha*ha+M*M+h*h))<=E}function Sa(h){return 1===h[0]&&0===h[1]&&0===h[2]&&0===h[4]&&1===h[5]&&0===h[6]&&0===h[8]&&0===h[9]&&1===h[10]}const Va=g.create();g=Object.freeze(Object.defineProperty({__proto__:null,add:ta,adjoint:r,copy:u,determinant:B,equals:Ra,exactEquals:Ia,frob:ua,fromQuat:N,fromQuat2:S,fromRotation:e,fromRotationTranslation:U,fromRotationTranslationScale:y,fromRotationTranslationScaleOrigin:v,fromScaling:Q,fromTranslation:F,fromXRotation:J,fromYRotation:T,fromZRotation:L,
frustum:G,getRotation:z,getScaling:l,getTranslation:P,hasIdentityRotation:Sa,identity:C,invert:d,invertOrIdentity:n,isOrthoNormal:Na,lookAt:ja,mul:A,multiply:A,multiplyScalar:xa,multiplyScalarAndAdd:Da,ortho:ca,perspective:R,perspectiveFromFieldOfView:Y,rotate:q,rotateX:a,rotateY:m,rotateZ:p,scale:t,set:H,str:sa,sub:wa,subtract:wa,targetTo:na,translate:K,transpose:f},Symbol.toStringTag,{value:"Module"}));c.add=ta;c.adjoint=r;c.copy=u;c.determinant=B;c.equals=Ra;c.exactEquals=Ia;c.frob=ua;c.fromQuat=
N;c.fromQuat2=S;c.fromRotation=e;c.fromRotationTranslation=U;c.fromRotationTranslationScale=y;c.fromRotationTranslationScaleOrigin=v;c.fromScaling=Q;c.fromTranslation=F;c.fromXRotation=J;c.fromYRotation=T;c.fromZRotation=L;c.frustum=G;c.getRotation=z;c.getScaling=l;c.getTranslation=P;c.hasIdentityRotation=Sa;c.identity=C;c.invert=d;c.invertOrIdentity=n;c.isOrthoNormal=Na;c.lookAt=ja;c.mat4=g;c.mul=A;c.multiply=A;c.multiplyScalar=xa;c.multiplyScalarAndAdd=Da;c.ortho=ca;c.perspective=R;c.perspectiveFromFieldOfView=
Y;c.rotate=q;c.rotateX=a;c.rotateY=m;c.rotateZ=p;c.scale=t;c.set=H;c.str=sa;c.sub=wa;c.subtract=wa;c.targetTo=na;c.translate=K;c.transpose=f;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(c,g,w){function u(y){return null==y||"string"===typeof y&&!y?"\x3cNull\x3e":y}function H(y){const v=null!=y.minValue||null!=y.maxValue,N=!!y.sqlExpression&&
y.supportsSQLExpression;return!(null!=y.normalizationField||null!=y.normalizationType)&&!v&&!N}function C(y){const {values:v,useSampleStdDev:N,supportsNullCount:G}=y;var R=Number.POSITIVE_INFINITY;let Y=Number.NEGATIVE_INFINITY,ca=null,ja=null;var na=null;let sa=null,ua=0;const ta=null==y.minValue?-Infinity:y.minValue,wa=null==y.maxValue?Infinity:y.maxValue;for(const xa of v)Number.isFinite(xa)?xa>=ta&&xa<=wa&&(ca=null===ca?xa:ca+xa,R=Math.min(R,xa),Y=Math.max(Y,xa),ua++):"string"===typeof xa&&ua++;
if(ua&&null!=ca){ja=ca/ua;na=0;for(const xa of v)Number.isFinite(xa)&&xa>=ta&&xa<=wa&&(na+=(xa-ja)**2);sa=N?1<ua?na/(ua-1):0:0<ua?na/ua:0;na=Math.sqrt(sa)}else Y=R=null;R={avg:ja,count:ua,max:Y,min:R,stddev:na,sum:ca,variance:sa};G&&(R.nullcount=v.length-ua);y.percentileParams&&(R.median=f(v,y.percentileParams));return R}function f(y,v){const {fieldType:N,value:G,orderBy:R,isDiscrete:Y}=v,ca=n(N,"desc"===R);y=[...y].filter(ua=>null!=ua).sort((ua,ta)=>ca(ua,ta));if(0===y.length)return null;if(0>=G)return y[0];
if(1<=G)return y[y.length-1];var ja=(y.length-1)*G,na=Math.floor(ja);v=na+1;ja%=1;na=y[na];const sa=y[v];return v>=y.length||Y||"string"===typeof na||"string"===typeof sa?na:na*(1-ja)+sa*ja}function n(y,v){if(y){if(F.has(y))return v?l:z;if(Q.has(y))return d(v,!1);if("esriFieldTypeTimestampOffset"===y)return v?U:L;const Y=d(v,!0);if("esriFieldTypeString"===y)return Y;if("esriFieldTypeGUID"===y||"esriFieldTypeGlobalID"===y)return(ca,ja)=>Y(r(ca),r(ja))}const N=v?1:-1,G=v?l:z,R=d(v,!0);return(Y,ca)=>
"number"===typeof Y&&"number"===typeof ca?G(Y,ca):"string"===typeof Y&&"string"===typeof ca?R(Y,ca):N}function d(y,v){if(!v)return y?P:S;const N=y?J:T;return y?(G,R)=>{const Y=N(G,R);if(null!=Y)return Y;G=G.toUpperCase();R=R.toUpperCase();return G>R?-1:G<R?1:0}:(G,R)=>{const Y=N(G,R);if(null!=Y)return Y;G=G.toUpperCase();R=R.toUpperCase();return G<R?-1:G>R?1:0}}function r(y){return y.substr(24,12)+y.substr(19,4)+y.substr(16,2)+y.substr(14,2)+y.substr(11,2)+y.substr(9,2)+y.substr(6,2)+y.substr(4,2)+
y.substr(2,2)+y.substr(0,2)}function B(y){return"coded-value"!==y?.type?[]:y.codedValues.map(v=>v.code)}function A(y,v){const N=t({field:v.field,normalizationType:v.normalizationType,normalizationField:v.normalizationField,classificationMethod:v.classificationMethod,standardDeviationInterval:v.standardDeviationInterval,breakCount:v.numClasses||5});y=K(y,v.minValue,v.maxValue);return w.createGenerateRendererClassBreaks({definition:N,values:y,normalizationTotal:v.normalizationTotal})}function K(y,v,
N){const G=null==v?-Infinity:v,R=null==N?Infinity:N;return y.filter(Y=>Number.isFinite(Y)&&Y>=G&&Y<=R)}function t(y){const {breakCount:v,field:N,normalizationField:G,normalizationType:R}=y,Y=y.classificationMethod||"equal-interval";return new g({breakCount:v,classificationField:N,classificationMethod:Y,normalizationField:"field"===R?G:void 0,normalizationType:R,standardDeviationInterval:"standard-deviation"===Y?y.standardDeviationInterval||1:void 0})}function q(y,v){const {field:N,classificationMethod:G,
standardDeviationInterval:R,normalizationType:Y,normalizationField:ca,normalizationTotal:ja,minValue:na,maxValue:sa}=v,ua=v.numBins||10;let ta=v=null,wa=null;G&&"equal-interval"!==G||Y?({classBreaks:y}=A(y,{field:N,normalizationType:Y,normalizationField:ca,normalizationTotal:ja,classificationMethod:G,standardDeviationInterval:R,minValue:na,maxValue:sa,numClasses:ua}),v=y[0].minValue,ta=y[y.length-1].maxValue,wa=y.map(xa=>[xa.minValue,xa.maxValue])):(null!=na&&null!=sa?(v=na,ta=sa):(y=C({values:y,
minValue:na,maxValue:sa,useSampleStdDev:!Y,supportsNullCount:H({normalizationType:Y,normalizationField:ca,minValue:na,maxValue:sa})}),v=y.min??null,ta=y.max??null),wa=m(v??0,ta??0,ua));return{min:v,max:ta,intervals:wa}}function a(y,v){let N=-1;for(let G=y.length-1;0<=G;G--)if(v>=y[G][0]){N=G;break}return N}function m(y,v,N){const G=(v-y)/N,R=[];let Y;for(let ca=1;ca<=N;ca++)Y=y+G,Y=Number(Y.toFixed(16)),R.push([y,ca===N?v:Y]),y=Y;return R}const p=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,F=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),
Q=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),e="min max avg stddev count sum variance nullcount median".split(" "),J=(y,v)=>null==y?null==v?0:1:null==v?-1:null,T=(y,v)=>null==y?null==v?0:-1:null==v?1:null,L=(y,v)=>T(y,v)??(y===v?0:(new Date(y)).getTime()-(new Date(v)).getTime()),U=(y,v)=>J(y,v)??(y===v?0:(new Date(v)).getTime()-(new Date(y)).getTime()),S=(y,v)=>T(y,v)??(y===v?0:y<v?-1:1),P=(y,v)=>J(y,v)??(y===v?0:y<v?1:-1),l=(y,v)=>J(y,v)??v-y,z=(y,v)=>T(y,v)??y-v;c.calculateClassBreaks=
A;c.calculateHistogram=function(y,v){var N=q(y,v);if(null==N.min&&null==N.max)return{bins:[],minValue:N.min,maxValue:N.max,normalizationTotal:v.normalizationTotal};const G=N.intervals,R=N.min??0;N=N.max??0;const Y=G.map((ca,ja)=>({minValue:G[ja][0],maxValue:G[ja][1],count:0}));for(const ca of y)null!=ca&&ca>=R&&ca<=N&&(y=a(G,ca),-1<y&&Y[y].count++);return{bins:Y,minValue:R,maxValue:N,normalizationTotal:v.normalizationTotal}};c.calculatePercentile=f;c.calculateStatistics=C;c.calculateStringStatistics=
function(y){const v=y.returnDistinct?[...(new Set(y.values))]:y.values;var N=v.filter(R=>null!=R).sort();const G=N.length;N={count:G,min:N[0],max:N[G-1]};y.supportsNullCount&&(N.nullcount=v.length-G);y.percentileParams&&(N.median=f(v,y.percentileParams));return N};c.calculateUniqueValuesCount=function(y){const v={};for(let N of y){if(null==N||"string"===typeof N&&""===N.trim())N=null;null==v[N]?v[N]={count:1,data:N}:v[N].count++}return{count:v}};c.createClassBreaksDefinition=t;c.createUVResult=function(y,
v,N,G){y=y.count;const R=[];if(N&&v){N=[];var Y=B(v[0]);for(const ca of Y)if(v[1]){Y=B(v[1]);for(const ja of Y)if(v[2]){Y=B(v[2]);for(const na of Y)N.push(`${u(ca)}${G}${u(ja)}${G}${u(na)}`)}else N.push(`${u(ca)}${G}${u(ja)}`)}else N.push(ca);for(const ca of N)y.hasOwnProperty(ca)||(y[ca]={data:ca,count:0})}for(const ca in y)v=y[ca],R.push({value:v.data,count:v.count,label:v.label});return{uniqueValueInfos:R}};c.getAttributeComparator=n;c.getEqualIntervalBins=m;c.getNormalizedValue=function(y,v,N,
G){let R=null;switch(v){case "log":0!==y&&(R=Math.log(y)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(G)&&0!==G&&(R=y/G*100);break;case "field":Number.isFinite(N)&&0!==N&&(R=y/N);break;case "natural-log":0<y&&(R=Math.log(y));break;case "square-root":0<y&&(R=y**.5)}return R};c.isNullCountSupported=H;c.processNullValue=u;c.processSummaryStatisticsResult=function(y,v){let N;for(N in y)e.includes(N)&&(Number.isFinite(y[N])||(y[N]=null));if(!v)return y;["avg","stddev","variance"].forEach(G=>
{null!=y[G]&&(y[G]=Math.ceil(y[G]??0))});return y};c.resolveCBResult=function(y,v){let N=y.classBreaks;const G=N[0]?.minValue,R=N[N.length-1]?.maxValue,Y="standard-deviation"===v;N=N.map(ca=>{const ja=ca.label;ca={minValue:ca.minValue,maxValue:ca.maxValue,label:ja};if(Y&&ja){const na=ja.match(p)?.map(sa=>+sa.trim())??[];2===na.length?(ca.minStdDev=na[0],ca.maxStdDev=na[1],0>na[0]&&0<na[1]&&(ca.hasAvg=!0)):1===na.length&&(ja.includes("\x3c")?(ca.minStdDev=null,ca.maxStdDev=na[0]):ja.includes("\x3e")&&
(ca.minStdDev=na[0],ca.maxStdDev=null))}return ca});return{minValue:G,maxValue:R,classBreakInfos:N,normalizationTotal:y.normalizationTotal}};c.statisticTypes=e;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,w,u,H,C,f,n,d){H=new g.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});g=new g.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});w=class extends w.JSONSupport{constructor(r){super(r);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(r){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",r)}set definedInterval(r){"defined-interval"===this.classificationMethod&&this._set("definedInterval",r)}};c.__decorate([n.enumeration({classBreaksDef:"class-breaks-definition"})],w.prototype,"type",void 0);c.__decorate([u.property({json:{write:!0}})],w.prototype,
"breakCount",void 0);c.__decorate([u.property({json:{write:!0}})],w.prototype,"classificationField",void 0);c.__decorate([u.property({type:String,json:{read:H.read,write:H.write}})],w.prototype,"classificationMethod",void 0);c.__decorate([u.property({json:{write:!0}})],w.prototype,"normalizationField",void 0);c.__decorate([u.property({json:{read:g.read,write:g.write}})],w.prototype,"normalizationType",void 0);c.__decorate([u.property({value:null,json:{write:!0}})],w.prototype,"standardDeviationInterval",
null);c.__decorate([u.property({value:null,json:{write:!0}})],w.prototype,"definedInterval",null);return w=c.__decorate([d.subclass("esri.rest.support.ClassBreaksDefinition")],w)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(c,g,w){c.enumeration=function(u,H={}){u=u instanceof g.JSONMap?u:new g.JSONMap(u,H);u={type:H?.ignoreUnknown??!0?u.apiValues:String,json:{type:u.jsonValues,read:H?.readOnly?!1:{reader:u.read},write:{writer:u.write}}};
void 0!==H?.readOnly&&(u.readOnly=!!H.readOnly);void 0!==H?.default&&(u.json.default=H.default);void 0!==H?.name&&(u.json.name=H.name);void 0!==H?.nonNullable&&(u.nonNullable=H.nonNullable);return w.property(u)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(c,g){function w(A){var K=A.definition;const {classificationMethod:t,normalizationType:q,definedInterval:a}=K;K=K.breakCount??
1;const m=[];var p=A.values;if(0===p.length)return[];p=p.sort((L,U)=>L-U);var F=p[0],Q=p[p.length-1];if("equal-interval"===t)if(p.length>=K){p=(Q-F)/K;A=F;for(var e=1;e<K;e++){var J=Number((F+e*p).toFixed(6));m.push({minValue:A,maxValue:J,label:u(A,J,q)});A=J}m.push({minValue:A,maxValue:Q,label:u(A,Q,q)})}else p.forEach(L=>{m.push({minValue:L,maxValue:L,label:u(L,L,q)})});else if("natural-breaks"===t){p=H(p);A=C(p.uniqueValues,A.valueFrequency||p.valueFrequency,K);for(e=1;e<K;e++)p.uniqueValues.length>
e&&(J=Number(p.uniqueValues[A[e]].toFixed(6)),m.push({minValue:F,maxValue:J,label:u(F,J,q)}),F=J);m.push({minValue:F,maxValue:Q,label:u(F,Q,q)})}else if("quantile"===t)if(p.length>=K&&F!==Q){A=Math.ceil(p.length/K);e=0;for(J=1;J<K;J++){var T=A+e-1;T>p.length&&(T=p.length-1);0>T&&(T=0);m.push({minValue:F,maxValue:p[T],label:u(F,p[T],q)});F=p[T];e+=A;A=Math.ceil((p.length-e)/(K-J))}m.push({minValue:F,maxValue:Q,label:u(F,Q,q)})}else for(K=-1,Q=0;Q<p.length;Q++)F=p[Q],F!==K&&(K=F,m.push({minValue:K,
maxValue:F,label:u(K,F,q)}),K=F);else if("standard-deviation"===t)if(A=d(p),e=r(p,A),0===e)m.push({minValue:p[0],maxValue:p[0],label:u(p[0],p[0],q)});else{p=n(F,Q,K,A,e)*e;e=0;for(J=K;1<=J;J--)T=Number((A-(J-.5)*p).toFixed(6)),m.push({minValue:F,maxValue:T,label:u(F,T,q)}),F=T,e++;J=Number((A+.5*p).toFixed(6));m.push({minValue:F,maxValue:J,label:u(F,J,q)});F=J;e++;for(T=1;T<=K;T++)J=e===2*K?Q:Number((A+(T+.5)*p).toFixed(6)),m.push({minValue:F,maxValue:J,label:u(F,J,q)}),F=J,e++}else if("defined-interval"===
t){if(!a)return m;K=p[0];Q=p[p.length-1];p=Math.ceil((Q-K)/a);F=K;for(A=1;A<p;A++)e=Number((K+A*a).toFixed(6)),m.push({minValue:F,maxValue:e,label:u(F,e,q)}),F=e;m.push({minValue:F,maxValue:Q,label:u(F,Q,q)})}return m}function u(A,K,t){let q=null;return q=A===K?t&&"percent-of-total"===t?A+"%":A.toString():t&&"percent-of-total"===t?A+"% - "+K+"%":A+" - "+K}function H(A){const K=[],t=[];let q=Number.MIN_VALUE,a=1,m=-1;for(let p=0;p<A.length;p++){const F=A[p];F===q?(a++,t[m]=a):null!==F&&(K.push(F),
q=F,a=1,t.push(a),m++)}return{uniqueValues:K,valueFrequency:t}}function C(A,K,t){var q=A.length;const a=[];t>q&&(t=q);for(var m=0;m<t;m++)a.push(Math.round(m*q/t-1));a.push(q-1);m=f(a,A,K,t);q=m.mean;m=m.sdcm;var p=t,F=0,Q=0;let e=0,J=0,T=!0;for(let U=0;2>U&&T;U++){0===U&&(T=!1);for(var L=0;L<p-1;L++)for(;a[L+1]+1!==a[L+2];)if(a[L+1]+=1,F=B(L,a,A,K),e=F.sbMean,F=F.sbSdcm,Q=B(L+1,a,A,K),J=Q.sbMean,Q=Q.sbSdcm,F+Q<m[L]+m[L+1])m[L]=F,m[L+1]=Q,q[L]=e,q[L+1]=J,T=!0;else{--a[L+1];break}for(L=p-1;0<L;L--)for(;a[L]!==
a[L-1]+1;)if(--a[L],F=B(L-1,a,A,K),e=F.sbMean,F=F.sbSdcm,Q=B(L,a,A,K),J=Q.sbMean,Q=Q.sbSdcm,F+Q<m[L-1]+m[L])m[L-1]=F,m[L]=Q,q[L-1]=e,q[L]=J,T=!0;else{a[L]+=1;break}}T&&(m=f(a,A,K,t));return a}function f(A,K,t,q){let a=[];var m=[],p=[];let F=0;const Q=[],e=[];for(var J=0;J<q;J++){var T=B(J,A,K,t);Q.push(T.sbMean);e.push(T.sbSdcm);F+=e[J]}T=F;for(J=!0;J||F<T;){J=!1;a=[];for(m=0;m<q;m++)a.push(A[m]);for(p=0;p<q;p++)for(T=A[p]+1;T<=A[p+1];T++)if(m=K[T],0<p&&T!==A[p+1]&&Math.abs(m-Q[p])>Math.abs(m-Q[p-
1]))A[p]=T;else if(p<q-1&&A[p]!==T-1&&Math.abs(m-Q[p])>Math.abs(m-Q[p+1])){A[p+1]=T-1;break}T=F;F=0;m=[];p=[];for(let L=0;L<q;L++){m.push(Q[L]);p.push(e[L]);const U=B(L,A,K,t);Q[L]=U.sbMean;e[L]=U.sbSdcm;F+=e[L]}}if(F>T){for(K=0;K<q;K++)A[K]=a[K],Q[K]=m[K],e[K]=p[K];F=T}return{mean:Q,sdcm:e}}function n(A,K,t,q,a){A=Math.max(q-A,K-q)/a/t;return 1<=A?1:.5<=A?.5:.25}function d(A){let K=0;for(let t=0;t<A.length;t++)K+=A[t];return K/=A.length}function r(A,K){let t=0;for(let q=0;q<A.length;q++){const a=
A[q];t+=(a-K)*(a-K)}t/=A.length;return Math.sqrt(t)}function B(A,K,t,q){var a=0,m=0;for(var p=K[A]+1;p<=K[A+1];p++){const F=q[p];a+=t[p]*F;m+=F}0>=m&&g.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");a/=m;m=0;for(p=K[A]+1;p<=K[A+1];p++)m+=q[p]*(t[p]-a)**2;return{sbMean:a,sbSdcm:m}}c.createGenerateRendererClassBreaks=function(A){const {normalizationTotal:K}=A;return{classBreaks:w(A),normalizationTotal:K}};c.createGenerateRendererUniqueValues=function(A){A=
H(A);const K=[],t=A.uniqueValues.length;for(let q=0;q<t;q++){const a=A.uniqueValues[q];K.push({value:a,count:A.valueFrequency[q],label:a.toString()})}return{uniqueValues:K}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(c){c.makeEdgeCandidate=function(g,w,u,H,C,f=!1){return{objectId:g,target:w,distance:u,type:"edge",start:H,end:C,draped:f}};c.makeVertexCandidate=function(g,w,u){return{objectId:g,
target:w,distance:u,type:"vertex"}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(c,g,w,u,H,C,f,n,d,r){async function B(m,p,F){if(!m)return null;
var {where:Q}=m;m.where=Q=Q?.trim();if(!Q||/^1 *= *1$/.test(Q)||p&&p===Q)m.where=null;if(!m.geometry)return m;p=await K(m);m.distance=0;m.units=null;"esriSpatialRelEnvelopeIntersects"===m.spatialRel&&({spatialReference:Q}=m.geometry,p=C.getGeometryExtent(p),p.spatialReference=Q);if(p){await r.checkProjectionSupport(p.spatialReference,F);Q=p.spatialReference;p=A(p,F)&&f.isExtent(p)?{spatialReference:Q,rings:[[[p.xmin,p.ymin],[p.xmin,p.ymax],[p.xmax,p.ymax],[p.xmax,p.ymin],[p.xmin,p.ymin]]]}:p;Q=(await n.normalizeCentralMeridian(f.fromJSON(p)))[0];
if(null==Q)throw a;const e="quantizationParameters"in m&&m.quantizationParameters?.tolerance||"maxAllowableOffset"in m&&m.maxAllowableOffset||0;p=e&&A(p,F)?{densificationStep:8*e}:void 0;Q=Q.toJSON();p=r.project(Q,Q.spatialReference,F,p);if(!p)throw a;p.spatialReference=F;m.geometry=p}return m}function A(m,p){if(!m)return!1;const F=m.spatialReference;return(f.isExtent(m)||f.isPolygon(m)||f.isPolyline(m))&&!d.equals(F,p)&&!H.canProjectWithoutEngine(F,p)}async function K(m){const {distance:p,units:F}=
m,Q=m.geometry;if(null==p||"vertexAttributes"in Q)return Q;var e=Q.spatialReference;m=F?q.fromJSON(F):u.getUnitString(e);e=e&&(d.isGeographic(e)||d.isWebMercator(e))?Q:await r.checkProjectionSupport(e,d.wgs84).then(()=>r.project(Q,d.wgs84));return(await t())(e.spatialReference,e,p,m)}async function t(){return(await new Promise((m,p)=>c(["../../../geometry/geometryEngineJSON"],m,p))).geodesicBuffer}const q=new w.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),a=Object.freeze({});g.normalizeQuery=async function(m,p,F){const {outFields:Q,orderByFields:e,groupByFieldsForStatistics:J,outStatistics:T}=m;if(Q)for(var L=0;L<Q.length;L++)Q[L]=Q[L].trim();if(e)for(L=0;L<e.length;L++)e[L]=e[L].trim();if(J)for(L=0;L<J.length;L++)J[L]=J[L].trim();if(T)for(L=0;L<T.length;L++)T[L].onStatisticField&&(T[L].onStatisticField=T[L].onStatisticField.trim());
m.geometry&&!m.outSR&&(m.outSR=m.geometry.spatialReference);return B(m,p,F)};g.normalizeQueryLike=B;g.queryEngineEmptyResult=a;g.unitsKebabDict=q;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(c,g,w,u,H,C){function f(A,K,t){const {outFields:q,orderByFields:a,returnDistinctValues:m,
outStatistics:p}=t,F=p?p.map(Q=>Q.outStatisticFieldName&&Q.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(a&&0<a.length){const Q=a.map(e=>{const J=e.toLowerCase();return J.includes(" asc")?J.split(" asc")[0]:J.includes(" desc")?J.split(" desc")[0]:e}).filter(e=>!F.includes(e));w.validateFields(A,K,Q,{expressionName:"orderByFields",query:t})}if(q&&0<q.length)w.validateFields(A,K,q,{expressionName:"outFields",query:t,allowedFieldTypes:"all"});else if(m)throw new g("unsupported-query","outFields should be specified for returnDistinctValues",
{query:t});w.validateWhere(A,K,t.where,t)}function n(A,K,t){const {outStatistics:q,groupByFieldsForStatistics:a,having:m}=t;var p=a?.length,F=q?.length;if(m){if(!p||!F)throw new g("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:t});w.validateHaving(A,K,m,q,t)}if(F&&r(q)){F=q.map(Q=>Q.onStatisticField).filter(Boolean);w.validateFields(A,K,F,{expressionName:"onStatisticFields",query:t});p&&w.validateFields(A,K,a,{expressionName:"groupByFieldsForStatistics",
query:t});for(const Q of q){const {onStatisticField:e,statisticType:J}=Q;if(("percentile_disc"===J||"percentile_cont"===J)&&"statisticParameters"in Q){if({statisticParameters:p}=Q,!p)throw new g("unsupported-query","statisticParameters should be set for percentile type",{definition:Q,query:t});}else A.get(e)&&"count"!==J&&"min"!==J&&"max"!==J&&w.validateFields(A,K,[e],{expressionName:`outStatistics with '${J}' statistic type`,allowedFieldTypes:B,query:t})}}}async function d(A,K,t,q){var a=[];t.valueExpression&&
({arcadeUtils:a}=await C.loadArcade(),a=a.extractFieldNames(t.valueExpression));t.field&&a.push(t.field);t.field2&&a.push(t.field2);t.field3&&a.push(t.field3);t.normalizationField&&a.push(t.normalizationField);if(!a.length&&!t.valueExpression)throw new g("unsupported-query","field or valueExpression is required",{params:t});w.validateFields(A,K,a,{expressionName:"statistics",query:q})}function r(A){return null!=A&&A.every(K=>"exceedslimit"!==K.statisticType)}const B=new Set([...w.numericFieldTypes,
...w.allDateAndTimeFieldTypes]);c.validateQuery=async function(A,{fieldsIndex:K,geometryType:t,spatialReference:q,availableFields:a}){if(0>(A.distance??0)||null!=A.geometryPrecision||A.multipatchOption&&"xyFootprint"!==A.multipatchOption||A.pixelSize||A.relationParam||A.text)throw new g("unsupported-query","Unsupported query options",{query:A});f(K,a,A);n(K,a,A);return Promise.all([H.checkSpatialQuerySupport(A,t,q),u.checkProjectionSupport(q,A.outSR)]).then(()=>A)};c.validateStatisticsQuery=async function(A,
K,{fieldsIndex:t,geometryType:q,spatialReference:a,availableFields:m}){if(0>(A.distance??0)||null!=A.geometryPrecision||A.multipatchOption||A.pixelSize||A.relationParam||A.text||A.outStatistics||A.groupByFieldsForStatistics||A.having||A.orderByFields)throw new g("unsupported-query","Unsupported query options",{query:A});f(t,m,A);return Promise.all([d(t,m,K,A),H.checkSpatialQuerySupport(A,q,a),u.checkProjectionSupport(a,A.outSR)]).then(()=>A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(c,g,w,u,H,C,f,n,d,r,B,A){function K(){return new Promise((p,F)=>c(["../../../geometry/geometryEngineJSON"],p,F))}const t={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var q={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},m={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};g.canQueryWithRBush=function(p){if(C.isExtent(p))return!0;if(C.isPolygon(p)){for(const F of p.rings)if(5!==F.length||F[0][0]!==F[1][0]||F[0][0]!==F[4][0]||F[2][0]!==F[3][0]||F[0][1]!==F[3][1]||F[0][1]!==
F[4][1]||F[1][1]!==F[2][1])return!1;return!0}return!1};g.checkSpatialQuerySupport=async function(p,F,Q){const {spatialRel:e,geometry:J}=p;if(J){if(null==e||!0!==q[e])throw new w("unsupported-query","Unsupported query spatial relationship",{query:p});if(f.isValid(J.spatialReference)&&f.isValid(Q)){if(null==J||!0!==a[C.getJsonType(J)])throw new w("unsupported-query","Unsupported query geometry type",{query:p});if(null==F||!0!==m[F])throw new w("unsupported-query","Unsupported layer geometry type",{query:p});
if(p.outSR)return A.checkProjectionSupport(p.geometry?.spatialReference,p.outSR)}}};g.getSpatialQueryOperator=function(p,F,Q,e,J){if(C.isPolygon(F)&&"esriGeometryPoint"===Q&&("esriSpatialRelIntersects"===p||"esriSpatialRelContains"===p)){const T=d.convertFromPolygon(new r,F,!1,!1);return Promise.resolve(L=>n.polygonContainsPoint(T,!1,!1,L))}if(C.isPolygon(F)&&"esriGeometryMultipoint"===Q){const T=d.convertFromPolygon(new r,F,!1,!1);if("esriSpatialRelContains"===p)return Promise.resolve(L=>n.polygonContainsMultipoint(T,
!1,!1,L,e,J))}if(C.isExtent(F)&&"esriGeometryPoint"===Q&&("esriSpatialRelIntersects"===p||"esriSpatialRelContains"===p))return Promise.resolve(T=>u.extentContainsPoint(F,B.getGeometry(Q,e,J,T)));if(C.isExtent(F)&&"esriGeometryMultipoint"===Q&&"esriSpatialRelContains"===p)return Promise.resolve(T=>u.extentContainsMultipoint(F,B.getGeometry(Q,e,J,T)));if(C.isExtent(F)&&"esriSpatialRelIntersects"===p){const T=H.getExtentIntersector(Q);return Promise.resolve(L=>T(F,B.getGeometry(Q,e,J,L)))}return K().then(T=>
{const L=T[t[p]].bind(null,F.spatialReference,F);return U=>L(B.getGeometry(Q,e,J,U))})};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(c,g){c.extentIntersectsExtent=g.extentIntersectsExtent;c.extentIntersectsMultipoint=g.extentIntersectsMultipoint;c.extentIntersectsPoint=g.extentIntersectsPoint;c.extentIntersectsPolygon=g.extentIntersectsPolygon;c.extentIntersectsPolyline=g.extentIntersectsPolyline;
c.extentIntersectsRings=g.extentIntersectsRings;c.getFeatureExtentIntersector=g.getFeatureExtentIntersector;c.isSelfIntersecting=g.isSelfIntersecting;c.segmentIntersects=g.segmentIntersects;c.getExtentIntersector=function(w){return"mesh"===w?g.extentIntersectsExtent:g.getFeatureExtentIntersector(w)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(c){function g(w,u,H,C,f){if(!w)return!1;u=u?H?4:3:H?3:2;const {coords:n,
lengths:d}=w;H=!1;w=0;for(const B of d){var r=w;for(let A=w,K=w+B*u;A<K;A+=u){r=A+u;r===K&&(r=w);const t=n[A],q=n[A+1],a=n[r];r=n[r+1];(q<f&&r>=f||r<f&&q>=f)&&t+(f-q)/(r-q)*(a-t)<C&&(H=!H)}w+=B*u}return H}c.polygonContainsCoords=g;c.polygonContainsMultipoint=function(w,u,H,C,f,n){f=f?n?4:3:n?3:2;const {coords:d,lengths:r}=C;if(!r)return!1;for(let B=0,A=0;B<r.length;B++,A+=f)if(!g(w,u,H,d[A],d[A+1]))return!1;return!0};c.polygonContainsPoint=function(w,u,H,C){return g(w,u,H,C.coords[0],C.coords[1])};
Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(c){function g(H,C,f,n,d){if(null!=n&&null!=d)return r=>{const B=H(r,C);r=H(r,f);return(null==B||B<=d)&&(null==r||r>=n)};if(null!=n)return r=>{r=H(r,f);return null==r||r>=n};if(null!=d)return r=>{r=H(r,C);return null==r||r<=d}}function w(H,C,f,n){if(null!=f&&null!=n&&f===n)return d=>H(d,C)===f;if(null!=f&&null!=n)return d=>{d=H(d,C);return null!=d&&d>=f&&d<=
n};if(null!=f)return d=>{d=H(d,C);return null!=d&&d>=f};if(null!=n)return d=>{d=H(d,C);return null!=d&&d<=n}}function u(){return()=>!1}c.getTimeExtent=async function(H,C){if(!H)return null;const f=C.featureAdapter,{startTimeField:n,endTimeField:d}=H;let r=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY;if(n&&d)await C.forEach(A=>{const K=f.getAttribute(A,n);A=f.getAttribute(A,d);null==K||isNaN(K)||(r=Math.min(r,K));null==A||isNaN(A)||(B=Math.max(B,A))});else{const A=n||d;await C.forEach(K=>{K=
f.getAttribute(K,A);null==K||isNaN(K)||(r=Math.min(r,K),B=Math.max(B,K))})}return{start:r,end:B}};c.getTimeOperator=function(H,C,f){if(!C||!H)return null;const {startTimeField:n,endTimeField:d}=H;if(!n&&!d)return null;const {start:r,end:B}=C;if(null===r&&null===B)return null;if(void 0===r&&void 0===B)return u();H=f.getAttributeAsTimestamp?.bind(f)??f.getAttribute.bind(f);return n&&d?g(H,n,d,r,B):w(H,n||d,r,B)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(c,g,w,u,H,C,f,n){function d(t){return t.trim().toLowerCase()}function r(t){const q=new Map;if(!t.fields)return q;const a=!0===t.datesInUnknownTimezone,{timeInfo:m,editFieldsInfo:p}=t;var F=(m?"startField"in m?m.startField:m.startTimeField:"")??"";const Q=(m?"endField"in m?m.endField:m.endTimeField:"")??"",e="dateFieldsTimeZone"in t?t.dateFieldsTimeZone??null:t.dateFieldsTimeReference?f.fromTimeReference(t.dateFieldsTimeReference):null,J=p?"timeZone"in p?p.timeZone??e:p.dateFieldsTimeReference?
f.fromTimeReference(p.dateFieldsTimeReference):e??f.utc:null,T=m?"timeZone"in m?m.timeZone??e:m.timeReference?f.fromTimeReference(m.timeReference):e:null;F=new Map([[d(p?.creationDateField??""),J],[d(p?.editDateField??""),J],[d(F),T],[d(Q),T]]);for(const {name:L,type:U}of t.fields)K.has(U)?q.set(L,f.unknown):"date"!==U&&"esriFieldTypeDate"!==U?q.set(L,null):a?q.set(L,f.unknown):(t=F.get(d(L??""))??e,q.set(L,t));return q}const B=new Map;class A{static fromJSON(t){return new A(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new A(t.fields??
[],r(t))}static fromLayerJSON(t){return new A(t.fields??[],r(t))}constructor(t=[],q){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=t||[];this._timeZoneByFieldName=q?new Map(q):null;t=[];for(const a of this.fields){q=a?.name;const m=C.normalizeFieldName(q)?.toLowerCase()??"";if(q&&m){const p=d(q);this._fieldsMap.set(q,a);this._fieldsMap.set(p,a);this._normalizedFieldsMap.set(m,
a);t.push(`${p}:${a.type}:${this._timeZoneByFieldName?.get(q)}`);C.isDateField(a)?(this.dateFields.push(a),this._dateFieldsSet.add(a)):C.isNumericField(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a));C.isObjectIDField(a)||C.isGlobalIDField(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}t.sort();this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)C.isObjectIDField(t)||C.isGlobalIDField(t)||
t.nullable||void 0!==C.getFieldDefaultValue(t)||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return null!=this.get(t)}get(t){if(t){var q=this._fieldsMap.get(t);if(q)return q;(q=this._fieldsMap.get(d(t))??this._normalizedFieldsMap.get(C.normalizeFieldName(t)?.toLowerCase()??""))&&this._fieldsMap.set(t,q);return q}}getTimeZone(t){t=this.get(t&&"string"!==typeof t?t.name:t);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):
"date"===t.type||"esriFieldTypeDate"===t.type?(w.getLogger("esri.layers.support.FieldsIndex").error(new c("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),f.utc):K.has(t.type)?f.unknown:null:null}getLuxonTimeZone(t){const q=this.getTimeZone(t);return q?q===f.unknown?H.UnknownTimeZone.instance:q===f.utc?n.FixedOffsetZone.utcInstance:u.getOrCreateMapValue(B,q,()=>n.IANAZone.create(q)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return C.isTimeOnlyField(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??
void 0}toJSON(){return{fields:this.fields.map(t=>g.isSerializable(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const K=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return A})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(c,g,w,u,H,C,f,n,d,r,B,A,K,t,q){function a(P){return m.has(P)?m.get(P):"number"===typeof P?P:1}c.TaskPriority=void 0;(function(P){P.RESOURCE_CONTROLLER_IMMEDIATE="immediate";P.RESOURCE_CONTROLLER="schedule";P.SLIDE="slide";P.STREAM_DATA_LOADER="stream loader";P.ELEVATION_QUERY="elevation query";P.TERRAIN_SURFACE="terrain";P.SURFACE_GEOMETRY_UPDATES="surface geometry updates";P.LOD_RENDERER="LoD renderer";P.GRAPHICS_CORE="Graphics3D";P.I3S_CONTROLLER="I3S";P.POINT_CLOUD_LAYER="point cloud";
P.FEATURE_TILE_FETCHER="feature fetcher";P.OVERLAY="overlay";P.STAGE="stage";P.GRAPHICS_DECONFLICTOR="graphics deconflictor";P.FILTER_VISIBILITY="Graphics3D filter visibility";P.SCALE_VISIBILITY="Graphics3D scale visibility";P.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";P.POINT_OF_INTEREST_FREQUENT="POI frequent";P.POINT_OF_INTEREST_INFREQUENT="POI infrequent";P.LABELER="labeler";P.FEATURE_QUERY_ENGINE="feature query";P.FEATURE_TILE_TREE="feature tile tree";P.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
P.ELEVATION_ALIGNMENT="elevation alignment";P.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";P.TEXT_TEXTURE_ATLAS="text texture atlas";P.TEXTURE_UNLOAD="texture unload";P.LINE_OF_SIGHT_TOOL="line of sight tool";P.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";P.ELEVATION_PROFILE="elevation profile";P.SNAPPING="snapping";P.SHADOW_ACCUMULATOR="shadow accumulator";P.CLOUDS_GENERATOR="clouds generator";P[P.NONE=0]="NONE";P[P.TEST_PRIO=1]="TEST_PRIO"})(c.TaskPriority||(c.TaskPriority=
{}));const m=new Map([[c.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[c.TaskPriority.RESOURCE_CONTROLLER,4],[c.TaskPriority.SLIDE,0],[c.TaskPriority.STREAM_DATA_LOADER,0],[c.TaskPriority.ELEVATION_QUERY,0],[c.TaskPriority.TERRAIN_SURFACE,1],[c.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[c.TaskPriority.LOD_RENDERER,2],[c.TaskPriority.GRAPHICS_CORE,2],[c.TaskPriority.I3S_CONTROLLER,2],[c.TaskPriority.POINT_CLOUD_LAYER,2],[c.TaskPriority.FEATURE_TILE_FETCHER,2],[c.TaskPriority.OVERLAY,4],[c.TaskPriority.STAGE,
4],[c.TaskPriority.GRAPHICS_DECONFLICTOR,4],[c.TaskPriority.FILTER_VISIBILITY,4],[c.TaskPriority.SCALE_VISIBILITY,4],[c.TaskPriority.FRUSTUM_VISIBILITY,4],[c.TaskPriority.CLOUDS_GENERATOR,4],[c.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[c.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[c.TaskPriority.LABELER,8],[c.TaskPriority.FEATURE_QUERY_ENGINE,8],[c.TaskPriority.FEATURE_TILE_TREE,16],[c.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[c.TaskPriority.ELEVATION_ALIGNMENT,12],[c.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[c.TaskPriority.TEXT_TEXTURE_ATLAS,12],[c.TaskPriority.TEXTURE_UNLOAD,12],[c.TaskPriority.LINE_OF_SIGHT_TOOL,16],[c.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[c.TaskPriority.SNAPPING,0],[c.TaskPriority.SHADOW_ACCUMULATOR,30]]),p=B.Milliseconds(6.5),F=B.Milliseconds(1),Q=B.Milliseconds(30),e=B.Milliseconds(1E3/30),J=B.Milliseconds(100);var T;(function(P){class l{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(v=>v.needsUpdate)}constructor(){this._updating=
r.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new C("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new y;this._state=t.RenderState.INTERACTING;this._tasks=new f;this._runQueue=new f;this._load=0;this._idleStateCallbacks=new f;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=d.watch(()=>K.SCHEDULER_LOG_SLOW_TASKS,N=>this._debug=N,d.initial);for(const N of Object.keys(c.TaskPriority))this.performanceInfo.tasks.set(c.TaskPriority[N],
new C(c.TaskPriority[N]));const v=this;this._test={FRAME_SAFETY_BUDGET:p,INTERACTING_BUDGET:e,IDLE_BUDGET:J,get availableBudget(){return v._budget.budget},usedBudget:0,getBudget:()=>v._budget,setBudget:N=>v._budget=N,updateTask:N=>this._updateTask(N),getState:N=>this._getState(N),getRuntime:N=>this._getRuntime(N),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(v=>v.remove());this._tasks.clear();
H.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(v){this._updatingChanged();v&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(v,N){N=new z(this,v,N);this._tasks.push(N);this._updatingChanged();this.performanceInfo.tasks.has(v)||this.performanceInfo.tasks.set(v,new C(v));return N}registerIdleStateCallbacks(v,
N){const G={idleBegin:v,idleEnd:N};this._idleStateCallbacks.push(G);this.state===t.RenderState.IDLE&&this._idleUpdatesStartFired&&G.idleBegin();const R=this;return{remove:()=>this._removeIdleStateCallbacks(G),set idleBegin(Y){R._idleUpdatesStartFired&&(G.idleEnd(),R._state===t.RenderState.IDLE&&Y());G.idleBegin=Y},set idleEnd(Y){G.idleEnd=Y}}}get load(){return this._load}set state(v){this._state!==v&&(this._state=v,this.state!==t.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(N=>N.idleEnd())))}get state(){return this._state}updateBudget(v){this._test.usedBudget=0;++this._frameNumber;let N=p,G=v.frameDuration,R=F;switch(this.state){case t.RenderState.IDLE:N=B.Milliseconds(0);G=B.Milliseconds(Math.max(J,v.frameDuration));R=Q;break;case t.RenderState.INTERACTING:G=B.Milliseconds(Math.max(e,v.frameDuration))}G=B.Milliseconds(G-v.elapsedFrameTime-N);if(this.state!==t.RenderState.IDLE&&G<F&&!this._forceTask)return this._forceTask=!0,!1;G=B.Milliseconds(Math.max(G,
R));this._budget.reset(G,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case t.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(v=>v.idleBegin()));this._runIdle();break;case t.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(B.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(v){this._idleUpdatesStartFired&&
v.idleEnd();this._idleStateCallbacks.removeUnordered(v)}removeTask(v){this._tasks.removeUnordered(v);this._runQueue.removeUnordered(v);this._updatingChanged()}_updateTask(v){this._tasks.forAll(N=>{N.name===v&&N.setPriority(v)})}_getState(v){if(this._runQueue.some(G=>G.name===v))return c.TaskState.SCHEDULED;let N=c.TaskState.IDLE;this._tasks.forAll(G=>{G.name===v&&G.needsUpdate&&(1>=G.schedulePriority?N=c.TaskState.READY:N!==c.TaskState.READY&&(N=c.TaskState.WAITING))});return N}_getRuntime(v){let N=
0;this._tasks.forAll(G=>{G.name===v&&(N+=G.runtime)});return N}_resetRuntimes(){this._tasks.forAll(v=>v.runtime=0)}_getRunning(){const v=new Map;this._tasks.forAll(G=>{G.needsUpdate&&v.set(G.name,(v.get(G.name)||0)+1)});if(0===v.size)return null;let N="";v.forEach((G,R)=>{N=1<G?N+` ${G}x ${R}`:N+` ${R}`});return N}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const v=this._tasks.reduce((N,G)=>G.needsUpdate?++N:N,0);this._load=.9*this._load+v*(1-.9)}_schedule(){this._runQueue.filterInPlace(v=>
{if(v.needsUpdate)return!0;v.schedulePriority=v.basePriority;return!1});for(this._tasks.forAll(v=>{0===v.basePriority&&v.needsUpdate&&!this._runQueue.includes(v)&&v.blockFrame!==this._frameNumber&&this._runQueue.unshift(v)});0===this._runQueue.length;){let v=!1;this._tasks.forAll(N=>{if(N.needsUpdate&&0!==N.schedulePriority&&0!==N.basePriority&&N.blockFrame!==this._frameNumber)switch(v=!0,N.schedulePriority){case 1:N.schedulePriority=0;this._runQueue.push(N);break;default:--N.schedulePriority}});
if(!v)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const v=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var N=this._budget.now();const G=this._runQueue.pop();this._budget.resetProgress();try{G.task.runTask(this._budget)===q.Yield&&(G.blockFrame=this._frameNumber)}catch(R){u.getLogger("esri.views.support.Scheduler").error(`Exception in task "${G.name}"`,R),G.blockFrame=this._frameNumber}!this._budget.hasProgressed&&G.blockFrame!==this._frameNumber&&
G.needsUpdate&&(G.blockFrame=this._frameNumber);G.schedulePriority=G.basePriority;N=this._budget.now()-N;G.runtime+=N;this._frameTaskTimes.set(G.priority,this._frameTaskTimes.get(G.priority)+N);this._debug&&N>2*this._budget.budget&&console.log("Task",G.name,"used",N,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-v);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
v)}_startFrameTaskTimes(){for(const v of Object.keys(c.TaskPriority))this._frameTaskTimes.set(c.TaskPriority[v],0)}_recordFrameTaskTimes(v){this._frameTaskTimes.forEach((N,G)=>this.performanceInfo.tasks.get(G).record(N));this.performanceInfo.total.record(v)}get test(){return this._test}}P.Scheduler=l;class z{get task(){return this._task.value}get updating(){return this._queue.running}constructor(v,N,G){this._scheduler=v;this.name=N;this.runtime=this.blockFrame=0;this._queue=new A.PromiseQueue;this._handles=
new g;this.schedulePriority=this._basePriority=a(N);this._task=r.signal(null!=G?G:this._queue);this._handles.add(d.when(()=>this.task.running,R=>v.taskRunningChanged(R)))}remove(){this.processQueue(L);this._scheduler.removeTask(this);this.schedule=S.schedule;this.reschedule=S.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(v){if(this.name!==v){this.name=v;v=a(v);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=v;this._basePriority=
v}}get priority(){return this.name}set priority(v){this.setPriority(v)}get needsUpdate(){return this.updating||this.task.running}schedule(v,N,G){return this._queue.push(v,N,G)}reschedule(v,N,G){return this._queue.unshift(v,N,G)}processQueue(v){return this._queue.runTask(v)}}class y{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=t.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(v){if(this.done)return!1;!0===v()&&this.madeProgress();
return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(v){this._enabled=v}reset(v,N){this._begin=this.now();this._budget=v;this._state=N;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=
this._progressed=!1}get hasProgressed(){return this._progressed}}P.Budget=y})(T||={});c.TaskState=void 0;(function(P){P.SCHEDULED="s";P.READY="r";P.WAITING="w";P.IDLE="i"})(c.TaskState||(c.TaskState={}));const L=(()=>{const P=new T.Budget;P.enabled=!1;return P})();class U{remove(){}processQueue(){}schedule(P,l,z){try{if(n.isAborted(l)){const y=n.createAbortError();return z?Promise.resolve(z(y)):Promise.reject(y)}return n.when(P(L))}catch(y){return Promise.reject(y)}}reschedule(P,l,z){return this.schedule(P,
l,z)}}const S=new U;c.ImmediateTask=S;c.getTaskPriority=a;c.newScheduler=function(){return new T.Scheduler};c.noBudget=L;c.taskPriorities=m;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(c,g,w,u){class H{constructor(C,f){this._observable=new u.SimpleObservable;this._value=C;this._equalityFunction=f}get value(){w.trackAccess(this._observable);
return this._value}set value(C){this._equalityFunction(C,this._value)||(this._value=C,this._observable.notify())}mutate(C){C(this._value);this._observable.notify()}}c.signal=function(C,f=g.equalsShallow){return new H(C,f)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(c,g,w,u){class H{constructor(){this._tasks=[];this._runningTasks=w.signal(0)}get length(){return this._tasks.length}get running(){return 0<
this._runningTasks.value}destroy(){this.cancelAll()}runTask(f){if(0===this.length)return u.Yield;for(;!f.done&&this._process(f);)f.madeProgress()}push(f,n,d){++this._runningTasks.value;return(new Promise((r,B)=>this._tasks.push(new C(r,B,f,n,d)))).finally(()=>--this._runningTasks.value)}unshift(f,n,d){++this._runningTasks.value;return(new Promise((r,B)=>this._tasks.unshift(new C(r,B,f,n,d)))).finally(()=>--this._runningTasks.value)}_process(f){if(0===this._tasks.length)return!1;const n=this._tasks.shift();
try{const d=g.isAborted(n.signal);if(d&&!n.abortCallback)n.reject(g.createAbortError());else{const r=d?n.abortCallback?.(g.createAbortError()):n.callback(f);g.isPromiseLike(r)?r.then(n.resolve,n.reject):n.resolve(r)}}catch(d){n.reject(d)}return!0}cancelAll(){const f=g.createAbortError();for(const n of this._tasks)if(n.abortCallback){const d=n.abortCallback(f);n.resolve(d)}else n.reject(f);this._tasks.length=0}}class C{constructor(f,n,d,r,B){this.resolve=f;this.reject=n;this.callback=d;this.signal=
r;this.abortCallback=B}}c.PromiseQueue=H;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],function(c){const g=Symbol("Yield");c.Yield=g;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(c,g,w,u,H,C,f){g=class extends g{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};c.__decorate([w.property()],g.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);c.__decorate([w.property()],g.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);g=c.__decorate([f.subclass("esri.views.support.DebugFlags")],g);return new g})},"esri/views/support/RenderState":function(){define(["exports"],function(c){c.RenderState=
void 0;var g=c.RenderState||(c.RenderState={});g[g.ANIMATING=0]="ANIMATING";g[g.INTERACTING=1]="INTERACTING";g[g.IDLE=2]="IDLE";Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../data/QueryEngineCapabilities","../../../../symbols/support/defaultsJSON"],function(c,g,w,u,H){const C=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let f=1;c.createCapabilities=function(n,
d){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:n},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:d,supportsDelete:d,supportsEditing:d,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:d,supportsExceedsLimitStatistics:!0,
supportsAsyncConvert3D:!1},query:u.queryCapabilities,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsGeometryUpdate:d,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,
zDefault:void 0}}};c.createDefaultAttributesFunction=function(n,d){if(g("esri-csp-restrictions"))return()=>({[d]:null,...n});try{let r=`this.${d} = null;`;for(const A in n){const K=C.test(A)?`.${A}`:`["${A}"]`;r+=`this${K} = ${JSON.stringify(n[A])};`}const B=(new Function(`\n      return class AttributesClass$${f++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `))();return()=>new B}catch(r){return()=>({[d]:null,...n})}};c.createDefaultTemplate=function(n={}){return[{name:"New Feature",
description:"",prototype:{attributes:w.clone(n)}}]};c.createDrawingInfo=function(n){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===n||"esriGeometryMultipoint"===n?H.defaultPointSymbolJSON:"esriGeometryPolyline"===n?H.defaultPolylineSymbolJSON:H.defaultPolygonSymbolJSON}}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(c){const g=[252,146,31,255],w={type:"esriSMS",style:"esriSMSCircle",size:6,color:g,
outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},u={type:"esriSLS",style:"esriSLSSolid",width:.75,color:g};c.defaultColor=g;c.defaultOutlineColor=[153,153,153,255];c.defaultPointSymbolJSON=w;c.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};c.defaultPolylineSymbolJSON=u;c.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",
size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};c.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};c.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};c.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require",
"exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(c,g,w,u,H){function C(K){return new d(K)}async function f(){null==A&&(A=await new Promise((K,t)=>c(["../../../../geometry/geometryEngineJSON"],K,t)));return A}class n{constructor(){this.description=this.code=null}}class d{constructor(K){this.error=new n;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=K}}class r{constructor(K){this.globalId=
null;this.success=!0;this.objectId=this.uniqueId=K}}const B=new Set;let A;g.createFeatureEditErrorResult=C;g.createFeatureEditSuccessResult=function(K){return new r(K)};g.loadGeometryEngineForSimplify=async function(K,t){!u.isValid(K)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await f()};g.mixAttributes=function(K,t,q,a=!1){B.clear();for(const F in q){const Q=K.get(F);if(!Q)continue;var m=Q,p=q[F];let e=p;H.isNumericField(m)&&"string"===typeof p?e=parseFloat(p):H.isStringField(m)&&null!=
p&&"string"!==typeof p?e=String(p):H.isDateField(m)&&"string"===typeof p&&(e=w.parseDate(p));m=H.sanitizeNullFieldValue(e);B.add(Q.name);if(Q&&(a||Q.editable)){if(p=H.validateFieldValue(Q,m))return C(H.validationErrorToString(p,Q,m));t[Q.name]=m}}for(const F of K?.requiredFields??[])if(!B.has(F.name))return C(`missing required field "${F.name}"`);return null};g.parseStringDateFieldValues=function(K,t){if(K?.length)for(const {name:q}of K)"string"===typeof t[q]&&(t[q]=w.parseDate(t[q]))};g.simplify=
function(K,t){if(!K||!u.isValid(t))return K;if("rings"in K||"paths"in K){if(null==A)throw new TypeError("geometry engine not loaded");return A.simplify(t,K)}return K};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})})},"esri/core/date":function(){define(["exports"],function(c){function g(f){const n=new Date(f);if(Number.isNaN(n.getTime()))f=!1;else{var d=!0;if(C&&/\d+\W*$/.test(f)&&(f=f.match(/[a-zA-Z]{2,}/))){d=!1;let r=0;for(;!d&&r<=f.length;)d=!H.test(f[r]),r++;d=!d}f=d}return f?Number.isNaN(n.getTime())?
null:n.getTime()-6E4*n.getTimezoneOffset():null}function w(f){f=u.exec(f);if(!f?.groups)return null;f=f.groups;const n=+f.year,d=+f.month-1,r=+f.day,B=+(f.hours??0),A=+(f.minutes??0),K=+(f.seconds??0);if(23<B||59<A||59<K)return null;var t=f.ms??"0";t=t?+t.padEnd(3,"0").substring(0,3):0;f=f.isUTC||!f.offsetSign?Date.UTC(n,d,r,B,A,K,t):6E4*("+"===f.offsetSign?-1:1)*(60*+f.offsetHours+ +f.offsetMinutes)+Date.UTC(n,d,r,B,A,K,t);return Number.isNaN(f)?null:f}const u=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/,
H=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,C=!Number.isNaN((new Date("technology 10")).getTime());c.isDateString=function(f){return null!=w(f)||null!=g(f)};c.isISO8601Date=function(f){return u.test(f)};c.parseDate=function(f){return w(f)??g(f)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../core/Error ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../featureConversionUtils ../../objectIdUtils ../../data/FeatureStore ../../data/projectionSupport ../../data/QueryEngine ./clientSideDefaults ./sourceUtils ../../../support/FieldsIndex ../../../support/fieldType ../../../support/fieldUtils ../../../../time/timeZoneUtils".split(" "),function(c,g,w,u,H,C,f,n,d,r,B,A,K,t){function q(e){return g.isPoint(e)?null!=e.z:!!e.hasZ}function a(e){return g.isPoint(e)?
null!=e.m:!!e.hasM}const m=w.wgs84,p={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:w.wgs84},F={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};class Q{constructor(){this._nextObjectId=this._queryEngine=null}destroy(){this._queryEngine?.destroy();this._queryEngine=this._createDefaultAttributes=null}async load(e){var J=[];const {features:T}=e;var L=this._inferLayerProperties(T,e.fields);const U=e.fields||[],S=null!=e.hasM?e.hasM:!!L.hasM,P=null!=e.hasZ?e.hasZ:!!L.hasZ,l=!e.spatialReference&&
!L.spatialReference,z=l?m:e.spatialReference||L.spatialReference,y=l?p:null,v=e.geometryType||L.geometryType,N=!v;let G=e.objectIdField||L.objectIdField,R=e.timeInfo;const Y=new B(U);if(!N&&(l&&J.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!v))throw new c("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!G)throw new c("feature-layer:missing-property",
"objectIdField not set and couldn't be found in the provided fields");L.objectIdField&&G!==L.objectIdField&&(J.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${G}" doesn't match the field name "${L.objectIdField}", found in the provided fields`}),G=L.objectIdField);G&&!L.objectIdField&&((L=Y.get(G))?(G=L.name,L.type="esriFieldTypeOID",L.editable=!1,L.nullable=!1):U.unshift({alias:G,name:G,type:"esriFieldTypeOID",editable:!1,nullable:!1}));for(var ca of U){null==ca.name&&
(ca.name=ca.alias);null==ca.alias&&(ca.alias=ca.name);if(!ca.name)throw new c("feature-layer:invalid-field-name","field name is missing",{field:ca});ca.name===G&&(ca.type="esriFieldTypeOID");if(!A.kebabDict.jsonValues.includes(ca.type))throw new c("feature-layer:invalid-field-type",`invalid type for field "${ca.name}"`,{field:ca});null==ca.length&&(ca.length=K.getFieldDefaultLength(ca))}ca={};for(var ja of U)"esriFieldTypeOID"!==ja.type&&"esriFieldTypeGlobalID"!==ja.type&&(L=K.getFieldDefaultValue(ja),
void 0!==L&&(ca[ja.name]=L));R&&(R.startTimeField&&((ja=Y.get(R.startTimeField))?(R.startTimeField=ja.name,ja.type="esriFieldTypeDate"):R.startTimeField=null),R.endTimeField&&((ja=Y.get(R.endTimeField))?(R.endTimeField=ja.name,ja.type="esriFieldTypeDate"):R.endTimeField=null),R.trackIdField&&((ja=Y.get(R.trackIdField))?R.trackIdField=ja.name:(R.trackIdField=null,J.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:R}}))),R.startTimeField||
R.endTimeField||(J.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:R}}),R=null));e=Y.dateFields.length?{timeZoneIANA:e.dateFieldsTimeZone??t.utc}:null;this._createDefaultAttributes=d.createDefaultAttributesFunction(ca,G);J={warnings:J,featureErrors:[],layerDefinition:{...F,drawingInfo:d.createDrawingInfo(v),templates:d.createDefaultTemplate(ca),extent:y,geometryType:v,objectIdField:G,fields:U,hasZ:P,hasM:S,timeInfo:R,dateFieldsTimeReference:e},
assignedObjectIds:{}};this._queryEngine=new n.QueryEngine({fieldsIndex:B.fromLayerJSON({fields:U,timeInfo:R,dateFieldsTimeReference:e}),geometryType:v,hasM:S,hasZ:P,objectIdField:G,spatialReference:z,featureStore:new C({geometryType:v,hasM:S,hasZ:P}),timeInfo:R,cacheSpatialQueries:!0});if(!T?.length)return this._nextObjectId=H.initialObjectId,J;this._nextObjectId=H.findLastObjectIdFromFeatures(G,T)+1;await f.checkProjectionSupport(T,z);return this._loadInitialFeatures(J,T)}async applyEdits(e){const {spatialReference:J,
geometryType:T}=this._queryEngine;await Promise.all([r.loadGeometryEngineForSimplify(J,T),f.checkProjectionSupport(e.adds,J),f.checkProjectionSupport(e.updates,J)]);return this._applyEdits(e)}queryFeatures(e,J={}){return this._queryEngine.executeQuery(e,J.signal)}queryFeatureCount(e,J={}){return this._queryEngine.executeQueryForCount(e,J.signal)}queryObjectIds(e,J={}){return this._queryEngine.executeQueryForIds(e,J.signal)}queryExtent(e,J={}){return this._queryEngine.executeQueryForExtent(e,J.signal)}querySnapping(e,
J={}){return this._queryEngine.executeQueryForSnapping(e,J.signal)}_inferLayerProperties(e,J){let T=void 0,L=void 0,U=null,S=null,P=null;for(const l of e)if(e=l.geometry,null!=e&&(U||=g.getJsonType(e),S||(S=e.spatialReference),null==T&&(T=q(e)),null==L&&(L=a(e)),U&&S&&null!=T&&null!=L))break;if(J&&J.length){let l=null;J.some(z=>{const y="esriFieldTypeOID"===z.type,v=!z.type&&z.name&&"objectid"===z.name.toLowerCase();l=z;return y||v})&&(P=l.name)}return{geometryType:U,spatialReference:S,objectIdField:P,
hasM:L,hasZ:T}}async _loadInitialFeatures(e,J){const {geometryType:T,hasM:L,hasZ:U,objectIdField:S,spatialReference:P,featureStore:l,fieldsIndex:z}=this._queryEngine,y=[];for(const G of J){null!=G.uid&&(e.assignedObjectIds[G.uid]=-1);if(G.geometry&&T!==g.getJsonType(G.geometry)){e.featureErrors.push(r.createFeatureEditErrorResult("Incorrect geometry type."));continue}J=this._createDefaultAttributes();const R=r.mixAttributes(z,J,G.attributes,!0);R?e.featureErrors.push(R):(this._assignObjectId(J,G.attributes,
!0),G.attributes=J,null!=G.uid&&(e.assignedObjectIds[G.uid]=G.attributes[S]),null!=G.geometry&&(G.geometry=f.project(G.geometry,G.geometry.spatialReference,P)),y.push(G))}l.addMany(u.convertFromFeatures([],y,T,U,L,S));const {fullExtent:v,timeExtent:N}=await this._queryEngine.fetchRecomputedExtents();e.layerDefinition.extent=v;if(N){const {start:G,end:R}=N;e.layerDefinition.timeInfo.timeExtent=[G,R]}return e}async _applyEdits(e){const {adds:J,updates:T,deletes:L}=e;e={addResults:[],deleteResults:[],
updateResults:[],uidToObjectId:{}};J?.length&&this._applyAddEdits(e,J);T?.length&&this._applyUpdateEdits(e,T);if(L?.length){for(const P of L)e.deleteResults.push(r.createFeatureEditSuccessResult(P));this._queryEngine.featureStore.removeManyById(L)}const {fullExtent:U,timeExtent:S}=await this._queryEngine.fetchRecomputedExtents();return{extent:U,timeExtent:S,featureEditResults:e}}_applyAddEdits(e,J){const {addResults:T}=e,{geometryType:L,hasM:U,hasZ:S,objectIdField:P,spatialReference:l,featureStore:z,
fieldsIndex:y}=this._queryEngine,v=[];for(const N of J){if(N.geometry&&L!==g.getJsonType(N.geometry)){T.push(r.createFeatureEditErrorResult("Incorrect geometry type."));continue}J=this._createDefaultAttributes();const G=r.mixAttributes(y,J,N.attributes);G?T.push(G):(this._assignObjectId(J,N.attributes),N.attributes=J,null!=N.uid&&(e.uidToObjectId[N.uid]=N.attributes[P]),null!=N.geometry&&(J=N.geometry.spatialReference??l,N.geometry=f.project(r.simplify(N.geometry,J),J,l)),v.push(N),T.push(r.createFeatureEditSuccessResult(N.attributes[P])))}z.addMany(u.convertFromFeatures([],
v,L,S,U,P))}_applyUpdateEdits({updateResults:e},J){const {geometryType:T,hasM:L,hasZ:U,objectIdField:S,spatialReference:P,featureStore:l,fieldsIndex:z}=this._queryEngine;for(const v of J){const {attributes:N,geometry:G}=v;J=N?.[S];if(null==J){e.push(r.createFeatureEditErrorResult(`Identifier field ${S} missing`));continue}if(!l.has(J)){e.push(r.createFeatureEditErrorResult(`Feature with object id ${J} missing`));continue}const R=u.convertToFeature(l.getFeature(J),T,U,L);if(null!=G){if(T!==g.getJsonType(G)){e.push(r.createFeatureEditErrorResult("Incorrect geometry type."));
continue}var y=G.spatialReference??P;R.geometry=f.project(r.simplify(G,y),y,P)}if(N&&(y=r.mixAttributes(z,R.attributes,N))){e.push(y);continue}l.add(u.convertFromFeature(R,T,U,L,S));e.push(r.createFeatureEditSuccessResult(J))}}_assignObjectId(e,J,T=!1){const L=this._queryEngine.objectIdField;T?J&&isFinite(J[L])?e[L]=J[L]:e[L]=this._nextObjectId++:e[L]=this._nextObjectId++}}return Q});