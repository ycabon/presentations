// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../support/AggregateField ../support/featureReductionUtils ../../views/2d/layers/support/clusterUtils".split(" "),function(f,g,h,k,r,t,u,l,m,n,p){f.FeatureReductionLayer=c=>{c=class extends c{constructor(...a){super(...a);this.addHandles(h.watch(()=>this.renderer,()=>{if(this.featureReduction){const b=
this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",b)}},h.sync))}set featureReduction(a){a=this._normalizeFeatureReduction(a);this._set("featureReduction",a)}set renderer(a){}_normalizeFeatureReduction(a){if("cluster"!==a?.type)return a;const b=a.clone(),d=[new m({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],e=(b.fields??[]).filter(q=>!q.isAutoGenerated);if(a.renderer&&!a.renderer.authoringInfo?.isAutoGenerated)return b.fields=[...d,...e],b;if(a.symbol)return b.fields=
[...d,...e],b.renderer=null,b;if(!this.renderer)return a;a=p.createInferredClusterRenderer(d,this.renderer);b.fields=[...d,...e];b.renderer=a;return b}};g.__decorate([k.property(n.featureReductionProperty)],c.prototype,"featureReduction",null);return c=g.__decorate([l.subclass("esri.layers.mixins.FeatureReductionLayer")],c)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});