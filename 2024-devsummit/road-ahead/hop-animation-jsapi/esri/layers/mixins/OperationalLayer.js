// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/tslib.es6 ../../core/Error ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/layerContainerType ../../core/accessorSupport/read ../../core/accessorSupport/write ./operationalLayers ../support/commonProperties".split(" "),function(k,e,l,p,
g,w,x,y,q,r,h,m,t,u,v,n){k.OperationalLayer=c=>{c=class extends c{constructor(){super(...arguments);this.persistenceEnabled=!0;this.title=null}readId(b,a,d){return"Group Layer"===d?.portalItem?.type?void 0:b}writeListMode(b,a,d,f){f&&"ground"===f.layerContainerType?a[d]=b:b&&u.willPropertyWrite(this,d,{},f)&&(a[d]=b)}writeOperationalLayerType(b,a,d,f){b&&"tables"!==f?.layerContainerType&&(a.layerType=b)}writeTitle(b,a){a.title=b??"Layer"}read(b,a){a&&(a.layer=this);t.readLoadable(this,b,d=>super.read(b,
d),a)}write(b,a){if(!this.persistenceEnabled)return null;if(a?.origin){var d=`${a.origin}/${a.layerContainerType||"operational-layers"}`;let f=!!v.supportedTypes[d]?.[this.operationalLayerType];"ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===d&&(f=!1);"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===d&&(f=!1);if(!f)return a.messages?.push(new l("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${d}'`,
{layer:this})),null}b=super.write(b,{...a,layer:this});d=!!a&&!!a.messages&&!!a.messages.filter(f=>f instanceof l&&"web-document-write:property-required"===f.name).length;return p.isBlobProtocol(b?.url)?(a?.messages?.push(new l("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&d?null:b}beforeSave(){}};e.__decorate([g.property({type:String,json:{write:{ignoreOrigin:!0},
origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],c.prototype,"id",void 0);e.__decorate([q.reader("id",["id"])],c.prototype,"readId",null);e.__decorate([g.property(n.listMode)],c.prototype,"listMode",void 0);e.__decorate([h.writer("listMode")],c.prototype,"writeListMode",null);e.__decorate([g.property({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,
ignoreOrigin:!0,layerContainerTypes:m.excludeTables}}}}})],c.prototype,"operationalLayerType",void 0);e.__decorate([h.writer("operationalLayerType")],c.prototype,"writeOperationalLayerType",null);e.__decorate([g.property(n.opacity)],c.prototype,"opacity",void 0);e.__decorate([g.property({type:Boolean,readOnly:!1})],c.prototype,"persistenceEnabled",void 0);e.__decorate([g.property({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,
writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],c.prototype,"title",void 0);e.__decorate([h.writer("title"),h.writer(["web-scene"],"title")],c.prototype,"writeTitle",null);e.__decorate([g.property({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:m.excludeTables}}},name:"visibility",write:!0}})],c.prototype,"visible",void 0);return c=e.__decorate([r.subclass("esri.layers.mixins.OperationalLayer")],c)};k.isOperationalLayer=function(c){return"operationalLayerType"in
c};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});