// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../geometry ../../geometry/support/webMercatorUtils ../OrientedImageryLayer ./core/ExposurePoint ../../rest/support/Query ../../geometry/Extent".split(" "),function(k,u,n,p,q,r,t){function l(a){return d=>{const {features:f,spatialReference:c}=d;f.forEach(e=>{e.geometry&&(e.geometry.spatialReference=c);const b=q.fromJSON({...e.toJSON(),layer:a});b&&(e.attributes=b);e.layer=a;e.spatialReference=c});return d}}function m(a,d){return new t({xmin:a.x-d,xmax:a.x+d,ymin:a.y-d,ymax:a.y+
d,spatialReference:a.spatialReference})}const g={};k.createExtentFromPointAtDistance=m;k.searchImages=async function(a,d){const {point:f,queryParams:c,queryFeatures:e}=a;if(null==f)return null;var b={};a=a.layerInstanceOrURL;var h=f.spatialReference.isGeographic?n.geographicToWebMercator(f.clone()):f.clone();b.outSpatialReference=h.spatialReference;c&&(b.maxRecordCountFactor=c.maxRecordCountFactor??5,b.outFields=c.outFields??["*"],b.where=c.where??"1\x3d1",b.returnGeometry=c.returnGeometry??!0,b.outSpatialReference=
c.outSpatialReference);"string"===typeof a&&(g.layer&&g.layer.url===a?a=g.layer:(g.layer?.destroy(),a=g.layer=new p({url:a}),await a.load()));if(a){if(e&&"esri.layers.OrientedImageryLayer"===a?.declaredClass)return l(a)(e);h=m(h,c?.maximumDistance??a.maximumDistance??1E3);b=new r({geometry:h,...b});return a.queryFeatures(b,d).then(l(a))}return null};Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});