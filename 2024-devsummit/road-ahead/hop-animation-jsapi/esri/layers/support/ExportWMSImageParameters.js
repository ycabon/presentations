// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,d,n,e,u,v,w,p){const q={visible:"visibleSublayers"};b.ExportWMSImageParameters=class extends n{constructor(a){super(a);this.scale=0}set layer(a){this._get("layer")!==a&&(this._set("layer",a),this.removeHandles("layer"),a&&this.addHandles([a.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),
a.on("wms-sublayer-update",c=>this.notifyChange(q[c.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:a})=>a).map(({name:a})=>a).join()}get version(){this.commitProperty("layers");const a=this.layer;a&&a.commitProperty("imageTransparency");return(this._get("version")||0)+1}get visibleSublayers(){const {layer:a,scale:c}=this,f=[],h=g=>{const {minScale:k,maxScale:l,sublayers:m,visible:r}=g,t=0===c||(0===k||c<=k)&&(0===l||c>=l);r&&t&&(m?m.forEach(h):f.push(g))};a?.sublayers?.forEach(h);
return f}toJSON(){const {layer:a,layers:c}=this,{imageFormat:f,imageTransparency:h,version:g}=a;return{format:f,request:"GetMap",service:"WMS",styles:"",transparent:h?"TRUE":"FALSE",version:g,layers:c}}};d.__decorate([e.property()],b.ExportWMSImageParameters.prototype,"layer",null);d.__decorate([e.property({readOnly:!0})],b.ExportWMSImageParameters.prototype,"layers",null);d.__decorate([e.property({type:Number})],b.ExportWMSImageParameters.prototype,"scale",void 0);d.__decorate([e.property({readOnly:!0})],
b.ExportWMSImageParameters.prototype,"version",null);d.__decorate([e.property({readOnly:!0})],b.ExportWMSImageParameters.prototype,"visibleSublayers",null);b.ExportWMSImageParameters=d.__decorate([p.subclass("esri.layers.support.ExportWMSImageParameters")],b.ExportWMSImageParameters);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});