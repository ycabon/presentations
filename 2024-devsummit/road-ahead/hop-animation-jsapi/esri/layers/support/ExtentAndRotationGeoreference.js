// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/mathUtils ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/common ../../geometry/Extent ../../geometry/Polygon ../../geometry/projection ./GeoreferenceBase".split(" "),function(m,n,u,p,l,C,D,v,w,t,x,y,z){function q(a,d,b){b=w.toRadian(b);const e=Math.cos(b),f=Math.sin(b);return(c,h)=>[e*(c-a)+f*(h-d)+a,
e*(h-d)-f*(c-a)+d]}l=class extends z{constructor(a){super(a);this.extent=null;this.rotation=0;this.type="extent-and-rotation"}get coords(){if(null==this.extent)return null;const {xmin:a,ymin:d,xmax:b,ymax:e,spatialReference:f}=this.extent;if(this.rotation){const {x:h,y:k}=this.extent.center;var c=q(h,k,this.rotation);c=[c(a,d),c(a,e),c(b,e),c(b,d)];c.push(c[0])}else c=[[a,d],[a,e],[b,e],[b,d],[a,d]];return new x({rings:[c],spatialReference:f})}set coords(a){if(null!=a&&null!=this.extent){var d=this.extent.spatialReference;
a=this.projectOrWarn(a,d);if(null!=a?.extent){var {rings:[[b,e,f]],extent:{center:{x:c,y:h}}}=a;a=n.rad2deg(Math.PI/2-Math.atan2(e[1]-b[1],e[0]-b[0]));var k=q(c,h,-a),[r,g]=k(b[0],b[1]),[A,B]=k(f[0],f[1]);this.extent=new t({xmin:r,ymin:g,xmax:A,ymax:B,spatialReference:d});this.rotation=a}}}toSourceNormalized(a){const {extent:d,rotation:b}=this;if(null==a||null==d)return null;const {xmin:e,ymin:f,xmax:c,ymax:h,center:k,spatialReference:r}=d;a=a.normalize();var g=y.projectOrLoad(a,r).geometry;if(null==
g)return null;a=g.x;g=g.y;b&&([a,g]=q(k.x,k.y,-b)(a,g));return u.createScreenPoint(n.scale(a,e,c,0,1),n.scale(g,h,f,0,1))}};m.__decorate([p.property()],l.prototype,"coords",null);m.__decorate([p.property({type:t})],l.prototype,"extent",void 0);m.__decorate([p.property({type:Number})],l.prototype,"rotation",void 0);return l=m.__decorate([v.subclass("esri.layers.support.ExtentAndRotationGeoreference")],l)});