// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../PopupTemplate ../../renderers/ClassBreaksRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/PieChartRenderer ../../renderers/Renderer ../../renderers/SimpleRenderer ../../renderers/UniqueValueRenderer ../../renderers/support/jsonUtils ../../renderers/support/types ../../symbols ../../core/JSONSupport ../../core/lang ../../core/object ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./AggregateField ./commonProperties ./featureLayerUtils ./LabelClass ../../renderers/visualVariables/SizeVariable ../../renderers/visualVariables/support/SizeStop".split(" "),
function(c,v,b,E,F,G,H,I,p,J,q,w,x,y,k,z,h,e,K,L,l,A,r,t,u,B,C,D,m){var n;b=n=class extends y.JSONSupport{constructor(a){super(a);this.type="cluster";this.clusterRadius=h.toPt("80px");this.clusterMinSize=h.toPt("12px");this.clusterMaxSize=h.toPt("50px");this.maxScale=0;this.popupEnabled=!0;this.labelingInfo=this.symbol=this.renderer=this.popupTemplate=null;this.labelsVisible=!0;this.fields=[]}readRenderer(a,d,f){a=d.drawingInfo?.renderer;return a?.authoringInfo?.isAutoGenerated?null:a?"simple"!==
a.type||a.visualVariables?.length?q.read(a,d,f)??void 0:null:B.createDefaultRenderer(d,f)}readSymbol(a,d,f){a=d.drawingInfo?.renderer;return a?.authoringInfo?.isAutoGenerated?null:a&&"simple"===a.type&&!a.visualVariables?.length?q.read(a,d,f)?.symbol:null}writeSymbol(a,d,f,g){f=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||f)a=new p({symbol:a}),d.drawingInfo={renderer:a.write({},g)}}writeFields(a,d,f){a=a.filter(g=>"avg_angle"!==g.statisticType).map(g=>g.toJSON());z.setDeepValue(f,
a,d)}readFields(a,d,f){return a.filter(g=>!g.isAutoGenerated).map(g=>t.fromJSON(g))}getEffectiveRenderer(){if(!this.renderer&&!this.symbol)return null;const a=this.renderer?this.renderer.clone():new p({symbol:this.symbol});"visualVariables"in a&&(a.visualVariables||(a.visualVariables=[]),a.visualVariables.some(d=>"size"===d.type)||a.visualVariables.push(new D({field:"cluster_count",stops:[new m({value:1}),new m({useMinValue:!0,size:this.clusterMinSize}),new m({useMaxValue:!0,size:this.clusterMaxSize})]})));
return a}clone(){return new n({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:k.clone(this.labelingInfo),labelsVisible:this.labelsVisible,fields:k.clone(this.fields),maxScale:this.maxScale,renderer:k.clone(this.renderer),symbol:k.clone(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:k.clone(this.popupTemplate)})}};c.__decorate([e.property({type:["cluster"],readOnly:!0,json:{write:!0}})],b.prototype,"type",void 0);c.__decorate([e.property({type:Number,
cast:a=>"auto"===a?a:h.toPt(a),json:{write:!0}})],b.prototype,"clusterRadius",void 0);c.__decorate([e.property({type:Number,cast:h.toPt,json:{write:!0}})],b.prototype,"clusterMinSize",void 0);c.__decorate([e.property({type:Number,cast:h.toPt,json:{write:!0}})],b.prototype,"clusterMaxSize",void 0);c.__decorate([e.property({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],b.prototype,"maxScale",void 0);c.__decorate([e.property(u.popupEnabled)],b.prototype,"popupEnabled",void 0);c.__decorate([e.property({type:v,
json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],b.prototype,"popupTemplate",void 0);c.__decorate([e.property({types:w.rendererTypes,json:{write:{target:"drawingInfo.renderer"}}})],b.prototype,"renderer",void 0);c.__decorate([l.reader("renderer",["drawingInfo.renderer"])],b.prototype,"readRenderer",null);c.__decorate([e.property({types:x.symbolTypesCluster})],b.prototype,"symbol",void 0);c.__decorate([l.reader("symbol",["drawingInfo.renderer"])],b.prototype,"readSymbol",null);c.__decorate([r.writer("symbol")],
b.prototype,"writeSymbol",null);c.__decorate([e.property({type:[C],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],b.prototype,"labelingInfo",void 0);c.__decorate([e.property(u.labelsVisible)],b.prototype,"labelsVisible",void 0);c.__decorate([e.property({type:[t],json:{write:!0}})],b.prototype,"fields",void 0);c.__decorate([r.writer("fields")],b.prototype,"writeFields",null);c.__decorate([l.reader("fields")],b.prototype,"readFields",null);return b=n=c.__decorate([A.subclass("esri.layers.support.FeatureReductionCluster")],
b)});