// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./LabelExpressionInfo ./labelUtils ./layerUtils ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),function(d,r,k,c,t,z,g,E,F,A,B,m,u,
l,C,D,v){function n(a,e,f){return{enabled:!C.isSceneServiceLayer(f?.layer)}}function w(a){return a?"service"===a.origin?!1:"map-image"!==a.layer?.type:!0}function x(a){return"map-image"===a?.type?!!a.capabilities?.exportMap?.supportsArcadeExpressionForLabeling:!1}var q;k=new k.JSONMap({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",
esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",
esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},
{ignoreUnknown:!0});c=q=class extends c.JSONSupport{static evaluateWhere(a,e){const f=(b,p,h)=>{switch(p){case "\x3d":return b==h;case "\x3c\x3e":return b!=h;case "\x3e":return b>h;case "\x3e\x3d":return b>=h;case "\x3c":return b<h;case "\x3c\x3d":return b<=h}return!1};try{if(null==a)return!0;const b=a.split(" ");if(3===b.length)return f(e[b[0]],b[1],b[2]);if(7===b.length){const p=f(e[b[0]],b[1],b[2]),h=b[3],y=f(e[b[4]],b[5],b[6]);switch(h){case "AND":return p&&y;case "OR":return p||y}}return!1}catch(b){console.log("Error.: can't parse \x3d "+
a)}}constructor(a){super(a);this.type="label";this.name=null;this.allowOverrun=!1;this.deconflictionStrategy="static";this.labelPlacement=this.labelExpressionInfo=this.labelExpression=null;this.labelPosition="curved";this.minScale=this.maxScale=0;this.repeatLabel=!0;this.repeatLabelDistance=null;this.symbol=D.defaultTextSymbol2D;this.useCodedValues=void 0;this.where=null}readLabelExpression(a,e){e=e.labelExpressionInfo;if(!e||!e.value&&!e.expression)return a}writeLabelExpression(a,e,f){if(this.labelExpressionInfo)if(null!=
this.labelExpressionInfo.value)a=l.templateStringToSql(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const b=l.getSingleFieldArcadeExpression(this.labelExpressionInfo.expression);b&&(a="["+b+"]")}null!=a&&(e[f]=a)}writeLabelExpressionInfo(a,e,f,b){if(null==a&&null!=this.labelExpression&&w(b))a=new u({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(b);a.expression&&(e[f]=a)}writeMaxScale(a,e){if(a||this.minScale)e.maxScale=a}writeMinScale(a,
e){if(a||this.maxScale)e.minScale=a}getLabelExpression(){return l.getLabelExpression(this)}getLabelExpressionArcade(){return l.getLabelExpressionArcade(this)}getLabelExpressionSingleField(){return l.getLabelExpressionSingleField(this)}hash(){return JSON.stringify(this)}clone(){return new q({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:t.clone(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,
maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:t.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};d.__decorate([g.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);d.__decorate([g.property({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:n}}}}})],c.prototype,"allowOverrun",void 0);d.__decorate([g.property({type:String,
json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:n}}}}})],c.prototype,"deconflictionStrategy",void 0);d.__decorate([g.property({type:String,json:{write:{overridePolicy(a,e,f){return this.labelExpressionInfo&&"service"===f?.origin&&x(f.layer)?{enabled:!1}:{allowNull:!0}}}}})],c.prototype,"labelExpression",void 0);d.__decorate([A.reader("labelExpression")],c.prototype,"readLabelExpression",null);d.__decorate([m.writer("labelExpression")],
c.prototype,"writeLabelExpression",null);d.__decorate([g.property({type:u,json:{write:{overridePolicy(a,e,f){return w(f)||x(f?.layer)?{allowNull:!0}:{enabled:!1}}}}})],c.prototype,"labelExpressionInfo",void 0);d.__decorate([m.writer("labelExpressionInfo")],c.prototype,"writeLabelExpressionInfo",null);d.__decorate([g.property({type:k.apiValues,json:{type:k.jsonValues,read:k.read,write:k.write}})],c.prototype,"labelPlacement",void 0);d.__decorate([g.property({type:["curved","parallel"],json:{write:!0,
origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],c.prototype,"labelPosition",void 0);d.__decorate([g.property({type:Number})],c.prototype,"maxScale",void 0);d.__decorate([m.writer("maxScale")],c.prototype,"writeMaxScale",null);d.__decorate([g.property({type:Number})],c.prototype,"minScale",void 0);d.__decorate([m.writer("minScale")],c.prototype,"writeMinScale",null);d.__decorate([g.property({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:n}}}}})],
c.prototype,"repeatLabel",void 0);d.__decorate([g.property({type:Number,cast:z.toPt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:n}}}}})],c.prototype,"repeatLabelDistance",void 0);d.__decorate([g.property({types:r.symbolTypesLabel,json:{origins:{"web-scene":{types:r.symbolTypesLabel3D,write:v.writeLabelSymbol,default:null}},write:v.writeLabelSymbol,default:null}})],c.prototype,"symbol",void 0);d.__decorate([g.property({type:Boolean,json:{write:!0}})],c.prototype,
"useCodedValues",void 0);d.__decorate([g.property({type:String,json:{write:!0}})],c.prototype,"where",void 0);return c=q=d.__decorate([B.subclass("esri.layers.support.LabelClass")],c)});