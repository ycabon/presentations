// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../core/Logger","../../geometry/support/spatialReferenceUtils","./infoFor3D","./layerUtils"],function(e,d,f,g,h){function m(a){var {associatedLayer:c}=a,b=c?.infoFor3D;if(!b)return!0;const {supportedFormats:k,queryFormats:n}=b;b=g.getMimeTypeFormatId("model/gltf-binary",k)??g.getFilenameFormatId("glb",k);if(null==b||!n.includes(b))return d.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) is not editable because it does not support GLB queries.`),
!1;const l=a.spatialReference;b=c.spatialReference;if(!f.equals(l,b))return d.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) is not editable because its spatial reference (wkid:${l.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${b.wkid}).`),!1;c=c.sourceJSON.sourceSpatialReference;return null==c||f.equals(c,b)?!0:(d.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${a.title??"Untitled layer"}, ${a.id}) is not editable because the spatial reference of its associated FeatureLayer's service (wkid:${b.wkid}) is different from its source spatial reference (wkid:${c.wkid}).`),
!1)}e.isEditableLayer=function(a){return!(!(a&&"object"===typeof a&&"loaded"in a&&a.loaded&&h.getEffectiveLayerCapabilities(a)?.operations?.supportsEditing&&"type"in a)||"editingEnabled"in a&&!h.getEffectiveEditingEnabled(a)||"scene"===a.type&&!m(a)||"oriented-imagery"===a.type)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});