// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../kernel","../../request"],function(b,l,m){function h(a){return"scene"===a?.type}function k(a){a=a?.type;return"imagery-tile"===a||"tile"===a||"open-street-map"===a||"vector-tile"===a||"web-tile"===a||"wmts"===a}b.getEffectiveEditingEnabled=function(a){a:if("editingEnabled"in a)switch(a.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var c=!0;break a;default:c=!1}else c=!1;return c?"effectiveEditingEnabled"in
a?a.effectiveEditingEnabled:a.editingEnabled:!1};b.getEffectiveLayerCapabilities=function(a){a:if("capabilities"in a)switch(a.type){case "catalog":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var c=!0;break a;default:c=!1}else c=!1;return c?"effectiveCapabilities"in a?a.effectiveCapabilities:a.capabilities:null};b.getOwningPortalUrl=async function(a,
c){var d=l.id?.findServerInfo(a);if(null!=d?.currentVersion)return d.owningSystemUrl||null;d=a.toLowerCase().indexOf("/rest/services");if(-1===d)return null;a=`${a.substring(0,d)}/rest/info`;({data:c}=await m(a,{query:{f:"json"},responseType:"json",signal:null!=c?c.signal:null}));return c?.owningSystemUrl||null};b.getTileMaxtrixSetFromActiveLayer=function(a){if(a.activeLayer){const c=a.activeLayer.tileMatrixSet;if(c)return c;if(a=a.activeLayer.tileMatrixSets)return a}return null};b.isBaseLayer=function(a){return null!=
a?.parent&&"declaredClass"in a.parent&&"esri.Basemap"===a.parent.declaredClass&&a.parent.baseLayers.includes(a)};b.isBasemap3DSupportedLayer=function(a){return k(a)||h(a)};b.isBasemapSupportedTiledLayer=k;b.isFeatureCollectionLayer=function(a){return"feature"===a?.type&&!a.url&&"memory"===a.source?.type};b.isFeatureLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"feature"===a.type};b.isFeatureServiceLayer=function(a){return"feature"===a?.type&&"feature-layer"===a.source?.type};
b.isGraphicsLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"graphics"===a.type};b.isGroupLayer=function(a){return null!=a&&"type"in a&&"group"===a.type};b.isImageryTileLayer=function(a){return"imagery-tile"===a?.type};b.isIntegratedMeshLayer=function(a){return"integrated-mesh"===a||"integrated-mesh-3dtiles"===a};b.isIntegratedMeshOperationalLayer=function(a){return"IntegratedMeshLayer"===a||"IntegratedMesh3DTilesLayer"===a};b.isKnowledgeGraphLayer=function(a){return null!=a&&"object"===
typeof a&&"type"in a&&"knowledge-graph"===a.type&&"layers"in a};b.isLayerWithFeatureLayerSource=function(a){return("feature"===a?.type||"subtype-group"===a?.type)&&"feature-layer"===a.source?.type};b.isLinkChartLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"link-chart"===a.type&&"layers"in a};b.isMapNotesLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"map-notes"===a.type&&"sublayers"in a};b.isSceneLayer=h;b.isSceneServiceLayer=function(a){a=a?.type;return"building-scene"===
a||"integrated-mesh"===a||"point-cloud"===a||"scene"===a};b.isSubtypeGroupLayer=function(a){return null!=a&&"object"===typeof a&&"type"in a&&"subtype-group"===a.type&&"sublayers"in a};b.isTable=function(a){return null!=a&&"object"===typeof a&&"isTable"in a&&!!a.isTable};b.isTiledLayer=function(a){a=a?.type;return"base-tile"===a||"tile"===a||"elevation"===a||"imagery-tile"===a||"base-elevation"===a||"open-street-map"===a||"wcs"===a||"web-tile"===a||"wmts"===a||"vector-tile"===a};b.isVoxelLayer=function(a){return"voxel"===
a?.type};b.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};b.serializeLayerDefinitions=function(a){const c=/[:;]/,d=[];let g=!1;if(a&&(a.forEach((e,f)=>{d.push([f,e]);!g&&c.test(e)&&(g=!0)}),0<d.length)){if(g){const e={};d.forEach(f=>{e[f[0]]=f[1]});a=JSON.stringify(e)}else{const e=[];d.forEach(f=>{e.push(f[0]+":"+f[1])});a=e.join(";")}return a}return null};b.serializeTimeOptions=
function(a){if(a){var c=[];a.forEach((d,g)=>{c.push('"'+g+'":'+JSON.stringify(d))});if(c.length)return"{"+c.join(",")+"}"}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});