// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../rasterDatasets/byteStreamUtils ../../../chunks/Jpg ./Lerc ./Lzw ./pixelRangeUtils ./TiffTags ./utils ../../../chunks/Zlib".split(" "),function(H,ia,ja,W,X,Y,J,Z,ka){function O(b,a){let d="unknown";3===b?d=64===a?"f64":"f32":1===b?1===a?d="u1":2===a?d="u2":4===a?d="u4":8>=a?d="u8":16>=a?d="u16":32>=a&&(d="u32"):2===b&&(8>=a?d="s8":16>=a?d="s16":32>=a&&(d="s32"));return d}function L(b){let a=null;switch(b?b.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":a=Uint8Array;
break;case "u16":a=Uint16Array;break;case "u32":a=Uint32Array;break;case "s8":a=Int8Array;break;case "s16":a=Int16Array;break;case "s32":a=Int32Array;break;case "f64":a=Float64Array;break;default:a=Float32Array}return a}function la(b,a){return{x:a[0]*b.x+a[1]*b.y+a[2],y:a[3]*b.x+a[4]*b.y+a[5]}}function u(b,a){return b.get(a)?.values?.[0]}function P(b,a,d,h=0,l=J.tiffTags,g=4){var c=8===g;const e=c?Q(new DataView(b,d,8),0,a):(new DataView(b,d,2)).getUint16(0,a),f=4+2*g;var p=c?8:2;c=p+e*f;if(d+c>b.byteLength)return{success:!1,
ifd:null,nextIFD:null,requiredBufferSize:c};const n=d+c+4<=b.byteLength?M(new DataView(b,d+c,8===g?8:4),0,a,8===g):null;d+=p;p=new Map;let k,v,m,w=0,x=0;for(let r=0;r<e;r++){var t=new DataView(b,d+f*r,f);k=t.getUint16(0,a);m=t.getUint16(2,a);v=J.getTagName(k,l);const q=[];2===g?(w=t.getUint16(4,a),x=t.getUint16(6,a)):4===g?(w=t.getUint32(4,a),x=t.getUint32(8,a)):8===g&&(w=M(t,4,a,!0),x=M(t,12,a,!0),q.push(t.getUint32(12,a)),q.push(t.getUint32(16,a)));t={id:k,type:m,valueCount:w,valueOffset:x,valueOffsets:q,
values:null};aa(b,a,t,h,!1,g);p.set(v,t)}return{success:!0,ifd:p,nextIFD:n,requiredBufferSize:c}}function ba(b,a){if(1!==a&&2!==a&&4!==a)return b;const d=new Uint8Array(b),h=8/a;b=new Uint8Array(b.byteLength*h);let l=0;const g=2**a-1;for(let c=0;c<d.length;c++){const e=d[c];for(let f=0;f<h;f++)b[l++]=e<<a*f>>>8-a&g}return b.buffer}function R(b,a,d){const h=new ja.JpegImage;h.parse(b);h.colorTransform=6===d?-1:0;b=h.getData(h.width,h.height,1!==a&&4!==a);return new Uint8Array(b.buffer)}function S(b){b=
(new ka.Zlib(b)).getBytes();var a=new ArrayBuffer(b.length);a=new Uint8Array(a);a.set(b);return a}async function T(b,a,d,h,l){var g=Z.isPlatformLittleEndian===a,c=u(d,"BITSPERSAMPLE"),e=u(d,"SAMPLESPERPIXEL")??1,f=u(d,"PHOTOMETRICINTERPRETATION"),p=u(d,"SAMPLEFORMAT")??1,n=O(p,c),k=u(d,"COMPRESSION")??1,v=L(n);if(34887===k)return await W.load(),W.decode(b,{inputOffset:h}).pixels[0];if(1===k)f=b.slice(h,h+l),a=new Uint8Array(f);else if(8===k||32946===k)a=new Uint8Array(b,h,l),a=S(a),f=a.buffer;else if(6===
k)a=new Uint8Array(b,h,l),a=R(a,e,f),f=a.buffer;else if(7===k){const m=d.get("JPEGTABLES").values,w=m.length-2;a=new Uint8Array(w+l-2);for(let x=0;x<w;x++)a[x]=m[x];b=new Uint8Array(b,h+2,l-2);for(h=0;h<b.length;h++)a[w+h]=b[h];a=R(a,e,f);f=a.buffer}else if(5===k)a=X.decode(b,h,l,a),f=a.buffer;else throw Error("tiff-decode: unsupport compression "+k);f=ba(f,c);if("u8"!==n&&"s8"!==n&&!g)switch(f=new ArrayBuffer(a.length),g=new Uint8Array(f),n){case "u16":case "s16":for(n=0;n<a.length;n+=2)g[n]=a[n+
1],g[n+1]=a[n];break;case "u32":case "s32":case "f32":for(n=0;n<a.length;n+=4)g[n]=a[n+3],g[n+1]=a[n+2],g[n+2]=a[n+1],g[n+3]=a[n]}c=new v(f);g=u(d,"PREDICTOR")??1;n=u(d,"TILEWIDTH");a=u(d,"TILELENGTH");if(1<g&&(5===k||8===k||32946===k)&&n&&a){k=K(d);v=new v(c.length);v.set(c);d=3===p&&3===g;k=k?1:e;e=d?4:1;p=n*e*k;d&&(v=new Uint8Array(v.buffer));for(g=0;g<a;g++)for(c=g*p,f=k;f<p;f++)v[c+f]+=v[c+f-k];if(d){d=new Uint8Array(v.length);k*=n;for(n=0;n<a;n++)for(g=n*p,c=0;c<k;c++)for(f=0;f<e;f++)d[g+c*
e+f]=v[g+c+(e-f-1)*k];c=new Float32Array(d.buffer)}else c=v}return c}async function ma(b,a,d){const h=d.get("TILEOFFSETS")?.values;if(void 0===h)return null;const l=d.get("TILEBYTECOUNTS")?.values,{width:g,height:c,pixelType:e,tileWidth:f,tileHeight:p}=N([d]);var n=K(d,a);const k=u(d,"SAMPLESPERPIXEL")||a.planes;var v=g*c,m=u(d,"BITSPERSAMPLE"),w=34887===(u(d,"COMPRESSION")??1),x=L(e);const t=[];for(var r=0;r<k;r++)t.push(new x(v));let q,E,y,B,z,D,A,I,C;x=Math.ceil(g/f);v=(new Uint8Array(v)).fill(255);
r=!1;if(0===m%8)if(w&&n&&1<k)for(n=Math.round(h.length/k),m=0;m<n;m++){var F=Math.floor(m/x)*p;y=m%x*f;B=F*g+y;for(w=0;w<k;w++){var G=m*k+w;0===l[G]?(G=null,r=!0):G=await T(b,a.littleEndian,d,h[G],l[G]);D=0;z=B;I=Math.min(f,g-y);A=Math.min(p,c-F);C=t[w];for(q=0;q<A;q++)for(z=B+q*g,D=q*f,E=0;E<I;E++,z++,D++)G?C[z]=G[D]:v[z]=0}}else for(m=0;m<h.length;m++)for(F=Math.floor(m/x)*p,y=m%x*f,B=F*g+y,0===l[m]?(G=null,r=!0):G=await T(b,a.littleEndian,d,h[m],l[m]),D=0,z=B,I=Math.min(f,g-y),A=Math.min(p,c-F),
F=0;F<k;F++)if(C=t[F],n||w)for(q=0;q<A;q++)for(z=B+q*g,D=f*p*F+q*f,E=0;E<I;E++,z++,D++)G?C[z]=G[D]:v[z]=0;else for(q=0;q<A;q++)for(z=B+q*g,D=q*f*k+F,E=0;E<I;E++,z++,D+=k)G?C[z]=G[D]:v[z]=0;return{width:g,height:c,pixelType:e,pixels:t,mask:r?v:void 0}}function aa(b,a,d,h=0,l=!1,g=4){if(d.values)return!0;var c=d.type,e=d.valueCount,f=d.valueOffset;let p=[];var n=ca[c],k=8*n,v=e*n,m=e*ca[c]*8,w=8===g?64:32;g=d.valueOffsets;if(m>w&&v>(l?b.byteLength:b?b.byteLength-f+h:0))return d.offlineOffsetSize=[f,
v],d.values=null,!1;if(m<=w)if(a||(32>=w?f>>>=32-m:(b=g?.length?g[0]:f>>>0,a=g?.length?g[1]:Math.round((f-b)/4294967296),32>=m?(f=b>>>32-m,g[0]=f):(f=b*2**(32-m)+(a>>>32-m),g[0]=b,g[1]=a>>>32-m))),1===e&&k===w)p=[f];else if(64===w)for(b=g?.length?g[0]:f>>>0,f=g?.length?g[1]:Math.round((f-b)/4294967296),a=b,n=32,b=1;b<=e;b++)v=32-k*b%32,n<k?(v=a<<v>>>32-n,m=f<<32-n>>>32-n,a=f,p.push(v+m*2**(k-n)),n-=32-(k-n)):(p.push(a<<v>>>32-k),n-=k),0===n&&(n=32,a=f);else for(b=1;b<=e;b++)p.push(f<<32-k*b>>>32-
k);else for(f-=h,l&&(f=0),e=f;e<f+v;e+=n){switch(c){case 1:k=(new DataView(b,e,1)).getUint8(0);break;case 2:k=(new DataView(b,e,1)).getUint8(0);break;case 3:k=(new DataView(b,e,2)).getUint16(0,a);break;case 4:case 13:k=(new DataView(b,e,4)).getUint32(0,a);break;case 5:k=(new DataView(b,e,4)).getUint32(0,a)/(new DataView(b,e+4,4)).getUint32(0,a);break;case 6:k=(new DataView(b,e,1)).getInt8(0);break;case 7:k=(new DataView(b,e,1)).getUint8(0);break;case 8:k=(new DataView(b,e,2)).getInt16(0,a);break;
case 9:k=(new DataView(b,e,4)).getInt32(0,a);break;case 10:k=(new DataView(b,e,4)).getInt32(0,a)/(new DataView(b,e+4,4)).getInt32(0,a);break;case 11:k=(new DataView(b,e,4)).getFloat32(0,a);break;case 12:k=(new DataView(b,e,8)).getFloat64(0,a);break;case 16:case 18:k=Q(new DataView(b,e,8),0,a);break;case 17:g=new DataView(b,e,8);m=(k=a)?g.getInt32(0,k):g.getUint32(0,k);g=k?g.getUint32(4,k):g.getInt32(4,k);w=0<=(k?m:g)?1:-1;k?m*=w:g*=w;k=w*(k?4294967296*g+m:4294967296*m+g);break;default:k=null}p.push(k)}if(2===
c){c="";f=p;p=[];for(b=0;b<f.length;b++)0===f[b]&&""!==c?(p.push(c),c=""):c+=String.fromCharCode(f[b]);""===c&&0!==p.length||p.push(c)}d.values=p;return!0}function N(b){var a=b[0];const d=u(a,"TILEWIDTH"),h=u(a,"TILELENGTH"),l=u(a,"IMAGEWIDTH"),g=u(a,"IMAGELENGTH");var c=u(a,"BITSPERSAMPLE");const e=u(a,"SAMPLESPERPIXEL");var f=u(a,"SAMPLEFORMAT")??1;const p=O(f,c),n=K(a);var k=a.get("GDAL_NODATA")?.values;let v=null;k?.length&&(v=k.map(C=>parseFloat(C)),v.some(C=>isNaN(C))&&(v=null));var m=u(a,"COMPRESSION")??
1;switch(m){case 1:k="NONE";break;case 2:case 3:case 4:case 32771:k="CCITT";break;case 5:k="LZW";break;case 6:case 7:k="JPEG";break;case 32773:k="PACKBITS";break;case 8:case 32946:k="DEFLATE";break;case 34712:k="JPEG2000";break;case 34887:k="LERC";break;default:k=String(m)}let w=!0,x="";na.has(m)||(w=!1,x+="unsupported tag compression "+m);3<f&&(w=!1,x+="unsupported tag sampleFormat "+f);1!==c&&2!==c&&4!==c&&0!==c%8&&(w=!1,x+="unsupported tag bitsPerSample "+c);c=a.get("GEOASCIIPARAMS")?.values?.[0];
if(c){var t=(t=c.split("|").find(C=>C.includes("ESRI PE String \x3d ")))?t.replace("ESRI PE String \x3d ",""):"";t=t.startsWith("COMPD_CS")||t.startsWith("PROJCS")||t.startsWith("GEOGCS")?{wkid:null,wkt:t}:null}f=a.get("GEOTIEPOINTS")?.values;c=a.get("GEOPIXELSCALE")?.values;m=a.get("GEOTRANSMATRIX")?.values;var r=a.has("GEOKEYDIRECTORY")?a.get("GEOKEYDIRECTORY").data:null,q=!1;a=!1;if(r){q=2===u(r,"GTRasterTypeGeoKey");var E=u(r,"GTModelTypeGeoKey");2===E?(r=u(r,"GeographicTypeGeoKey"),1024<=r&&
32766>=r&&(t={wkid:r}),t||32767!==r||(a=!0,t={wkid:4326})):1===E&&(r=u(r,"ProjectedCSTypeGeoKey"),1024<=r&&32766>=r&&(t={wkid:r}))}let y;c&&f&&6<=f.length?(y=[c[0],0,f[3]-f[0]*c[0],0,-Math.abs(c[1]),f[4]-f[1]*c[1]],q&&(y[2]-=.5*y[0]+.5*y[1],y[5]-=.5*y[3]+.5*y[4])):m&&16===m.length&&(y=q?[m[0],m[1],m[3]-.5*m[0],m[4],m[5],m[7]-.5*m[5]]:[m[0],m[1],m[3],m[4],m[5],m[7]]);if(y){f=[{x:0,y:g},{x:0,y:0},{x:l,y:g},{x:l,y:0}];r=q=Number.POSITIVE_INFINITY;let C=E=Number.NEGATIVE_INFINITY;for(let F=0;F<f.length;F++)m=
la(f[F],y),q=m.x>q?q:m.x,E=m.x<E?E:m.x,r=m.y>r?r:m.y,C=m.y<C?C:m.y;f={xmin:q,xmax:E,ymin:r,ymax:C,spatialReference:t}}else f={xmin:-.5,ymin:.5-g,xmax:l-.5,ymax:.5,spatialReference:t};a&&(400<f.xmax-f.xmin||361<Math.max(Math.abs(f.xmin),Math.abs(f.xmax)))&&(t=null,f.spatialReference=null);t=U(b);let B;let z,D;if(0<t.length){z=Math.round(Math.log(l/u(t[0],"IMAGEWIDTH"))/Math.LN2);var A=t[t.length-1];D=Math.round(Math.log(l/u(A,"IMAGEWIDTH"))/Math.LN2);B=u(A,"TILEWIDTH");A=u(A,"TILELENGTH")}B=null!=
D&&0<D?B||d:null;A=null!=D&&0<D?A||h:null;let I;d&&(I=[{maxCol:Math.ceil(l/d)-1,maxRow:Math.ceil(g/h)-1,minRow:0,minCol:0}],t.forEach(C=>{I.push({maxCol:Math.ceil(u(C,"IMAGEWIDTH")/u(C,"TILEWIDTH"))-1,maxRow:Math.ceil(u(C,"IMAGELENGTH")/u(C,"TILELENGTH"))-1,minRow:0,minCol:0})}));m=b[0].get("GDAL_METADATA")?.values?.[0];m=oa(m);x+=" "+da({width:l,height:g,tileWidth:d,tileHeight:h,planes:e,ifds:b});b=V(b).length===t.length+1;return{width:l,height:g,tileWidth:d,tileHeight:h,planes:e,isBSQ:n,pixelType:p,
compression:k,noData:v,hasMaskBand:b,isSupported:w,message:x,extent:f,isPseudoGeographic:a,affine:c?null:y,firstPyramidLevel:z,maximumPyramidLevel:D,pyramidBlockWidth:B,pyramidBlockHeight:A,tileBoundary:I,metadata:m}}function K(b,a){return(b=b.get("PLANARCONFIGURATION")?.values)?2===b[0]:a?a.isBSQ:!1}function U(b){return b.filter(a=>1===u(a,"NEWSUBFILETYPE"))}function V(b){return b.filter(a=>{const d=4===((u(a,"NEWSUBFILETYPE")??0)&4);a=4===u(a,"PHOTOMETRICINTERPRETATION");return d&&a})}function ea(b){const {littleEndian:a,
isBigTiff:d,firstIFDPos:h}=fa(b);var l=h;const g=[];do if(l=ha(b,a,l,0,J.tiffTags,d?8:4),l.success)g.push(l.ifd),l=l.nextIFD;else break;while(0<l);b=N(g);l=U(g);const c=V(g);return{...b,littleEndian:a,isBigTiff:d,ifds:g,pyramidIFDs:l,maskIFDs:c}}function Q(b,a,d){const h=b.getUint32(a,d);b=b.getUint32(a+4,d);return d?4294967296*b+h:4294967296*h+b}function M(b,a,d,h){return h?Q(b,a,d):b.getUint32(a,d)}function fa(b){var a=new DataView(b,0,16),d=a.getUint16(0,!1);b=null;if(18761===d)b=!0;else if(19789===
d)b=!1;else throw Error("unexpected endianess byte");var h=a.getUint16(2,b);if(42!==h&&43!==h)throw Error("unexpected tiff identifier");d=4;if(h=43===h){const l=a.getUint16(d,b);d+=2;if(8!==l)throw Error("unsupported bigtiff version");if(0!==a.getUint16(d,b))throw Error("unsupported bigtiff version");d+=2}a=M(a,d,b,h);return{littleEndian:b,isBigTiff:h,firstIFDPos:a}}function ha(b,a,d,h=0,l=J.tiffTags,g=4){d=P(b,a,d,h,l,g);let c;const e=d.ifd;e&&(J.ifdTags.forEach((f,p)=>{e.has(p)&&(c=e.get(p),c.data=
P(b,a,c.valueOffset-h,h,f).ifd)}),e.has("GEOKEYDIRECTORY")&&(c=e.get("GEOKEYDIRECTORY"),(l=c.values)&&4<l.length&&(l=l[0]+"."+l[1]+"."+l[2],c.data=P(b,a,c.valueOffset+6-h,h,J.geoKeys,2).ifd,c.data&&c.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[l]}))),e.has("XMP")&&(c=e.get("XMP"),l=c.values,"number"===typeof l[0]&&7===c.type&&(c.values=[ia.bytesToUTF8(new Uint8Array(l))])));return d}function da(b){const {width:a,height:d,tileHeight:h,tileWidth:l}=b,g=b.planes,c=l?
l*h:a*d;b=u(b.ifds[0],"BITSPERSAMPLE");let e="";c*g>2**30/(8<b?b/8:1)&&(e=l?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");return e}const ca=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],na=new Set([1,5,6,7,8,34712,34887]),pa=(b,a,d)=>{if(!(b&&0<b.length&&a&&d))return null;let h,l,g;const c=b[0].length,e=b.length,f=new Uint8Array(c);for(let n=0;n<e;n++)if(h=b[n],l=a[n],g=d[n],0===n)for(var p=0;p<c;p++)f[p]=h[p]<l||h[p]>g?0:1;else for(p=
0;p<c;p++)f[p]&&(f[p]=h[p]<l||h[p]>g?0:1);return f},oa=b=>{if(!b)return null;var a=b.match(/<Item(.*?)Item>/gi);if(!a||0===a.length)return null;b=new Map;var d;for(var h=0;h<a.length;h++){var l=a[h];var g=l.slice(6,l.indexOf("\x3e"));var c=l.indexOf("sample\x3d");-1<c&&(d=l.slice(c+8,l.indexOf('"',c+8)));c=l.indexOf("name\x3d");-1<c&&(g=l.slice(c+6,l.indexOf('"',c+6)));g&&(l=l.slice(l.indexOf("\x3e")+1,l.indexOf("\x3c/Item\x3e")).trim(),null!=d?b.has(g)?b.get(g)[d]=l:b.set(g,[l]):b.set(g,l));d=null}a=
b.get("STATISTICS_MINIMUM");g=b.get("STATISTICS_MAXIMUM");h=b.get("STATISTICS_MEAN");l=b.get("STATISTICS_STDDEV");d=null;if(a&&g)for(d=[],c=0;c<a.length;c++)d.push({min:parseFloat(a[c]),max:parseFloat(g[c]),avg:h&&parseFloat(h[c]),stddev:l&&parseFloat(l[c])});g=b.get("BandName");h=b.get("WavelengthMin");l=b.get("WavelengthMax");a=null;if(g)for(a=[],c=0;c<g.length;c++)a.push({BandName:g[c],WavelengthMin:h&&parseFloat(h[c]),WavelengthMax:l&&parseFloat(l[c])});g=b.get("DataType");return{statistics:d,
bandProperties:a,dataType:g,rawMetadata:b}};H.decode=async function(b,a={}){var d=a.pyramidLevel||0,h=a.headerInfo||ea(b);const {ifds:l,noData:g}=h;if(0===l.length)throw Error("no valid image file directory");var c=da(h);if(c)throw c;c=null;var e=-1===d?l[l.length-1]:l[d];a=g??a.noDataValue;if(h.tileWidth)c=await ma(b,h,e);else{{const D=Z.isPlatformLittleEndian===h.littleEndian,A=e.get("STRIPOFFSETS")?.values;if(void 0===A)c=null;else{var {width:f,height:p,pixelType:n}=N([e]);d=u(e,"SAMPLESPERPIXEL")||
h.planes;var k=u(e,"PHOTOMETRICINTERPRETATION");c=f*p;var v=u(e,"BITSPERSAMPLE"),m=L(n),w=new m(c*d),x=e.get("STRIPBYTECOUNTS")?.values,t=u(e,"ROWSPERSTRIP"),r=u(e,"COMPRESSION")??1;var q=t;if(0===v%8)for(e=0;e<A.length;e++){var E=e*t*f*d;q=(e+1)*t>p?p-e*t:t;if("u8"===n||"s8"===n||D)if(8===r||32946===r){var y=new Uint8Array(b,A[e],x[e]);y=S(y);var B=y.buffer}else 6===r?(y=new Uint8Array(b,A[e],x[e]),y=R(y,d,k),B=y.buffer):5===r?(y=X.decode(b,A[e],x[e],h.littleEndian),B=y.buffer):(x[e]!==q*f*d*v/8&&
console.log("strip byte counts is different than expected"),B=b.slice(A[e],A[e]+x[e]));else{if(6===r||8===r||32946===r){y=new Uint8Array(b,A[e],x[e]);var z=S(y);B=z.buffer}else x[e]!==q*f*d*v/8&&console.log("strip byte counts is different than expected"),B=new ArrayBuffer(x[e]),y=new Uint8Array(b,A[e],x[e]),z=new Uint8Array(B);switch(n){case "u16":case "s16":for(q=0;q<y.length;q+=2)z[q]=y[q+1],z[q+1]=y[q];break;case "u32":case "s32":case "f32":for(q=0;q<y.length;q+=4)z[q]=y[q+3],z[q+1]=y[q+2],z[q+
2]=y[q+1],z[q+3]=y[q]}}B=ba(B,v);q=new m(B);w.set(q,E)}k=[];if(1===d)k.push(w);else for(e=0;e<d;e++){h=new m(c);for(b=0;b<c;b++)h[b]=w[b*d+e];k.push(h)}c={width:f,height:p,pixelType:n,pixels:k}}}}if(!c)return c;null!=a&&Y.convertNoDataToMask(c,a);return c};H.decodeTileOrStrip=async function(b,a){const {headerInfo:d,ifd:h,offsets:l,sizes:g}=a;var c=[];for(var e=0;e<l.length;e++){0===g[e]?1:0;var f=await T(b,d.littleEndian,h,l[e],g[e]||b.byteLength);c.push(f)}var p=K(h,d);b=u(h,"BITSPERSAMPLE");e=u(h,
"SAMPLEFORMAT")??1;e=O(e,b);var n=u(h,"SAMPLESPERPIXEL")||d.planes;const k=L(e);f=u(h,"TILEWIDTH");const v=u(h,"TILELENGTH");var m=u(h,"COMPRESSION")??1;const w=f*v;b=[];let x=c[0];const t=34887===m;for(let r=0;r<n;r++){m=new k(w);if(c.length===n)x=c[r],x.length===w&&(m=x);else if(x.length)if(p||t)m=x.length===w?x:x.slice(w*r,w*(r+1));else for(let q=0;q<w;q++)m[q]=x[q*n+r];b.push(m)}c=d.noData?d.noData[0]:a.noDataValue;p=(n=d.metadata?d.metadata.statistics:null)?n.map(r=>r.min):null;n=n?n.map(r=>
r.max):null;e={pixelType:e,width:f,height:v,pixels:b,noDataValue:c};null!=c?Y.convertNoDataToMask(e,c):p&&n&&a.applyMinMaxConstraint&&(e.mask=pa(b,p,n));return e};H.getImageInfo=N;H.getMaskIFDs=V;H.getPyramidIFDs=U;H.isBSQConfig=K;H.parseFieldValues=aa;H.parseHeader=ea;H.parseIFD=ha;H.parseSignature=fa;Object.defineProperty(H,Symbol.toStringTag,{value:"Module"})});