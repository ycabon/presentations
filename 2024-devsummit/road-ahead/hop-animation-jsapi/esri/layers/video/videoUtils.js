// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../support/TelemetryData ../support/VideoTimeExtent".split(" "),function(f,m,p,t,q,u){function r(a){var c=a&&a.has(b.EsriFrameCenterLatitude)&&a.has(b.EsriFrameCenterLongitude)?new m({x:a.get(b.EsriFrameCenterLongitude).value,y:a.get(b.EsriFrameCenterLatitude).value,z:a.get(b.FrameCenterElevation).value}):null;a=null!=c?c:a&&a.has(b.FrameCenterLatitude)&&a.has(b.FrameCenterLongitude)?new m({x:a.get(b.FrameCenterLongitude)?.value,
y:a.get(b.FrameCenterLatitude)?.value,z:a.get(b.FrameCenterElevation)?.value}):null;return a}const b={UASDatalinkLocalSet:1E4,PrecisionTimeStamp:10002,MissionId:10003,PlatformTailNumber:10004,PlatformHeadingAngle:10005,PlatformPitchAngle:10006,PlatformRollAngle:10007,PlatformTrueAirspeed:10008,PlatformIndicatedAirspeed:10009,PlatformDesignation:10010,ImageSourceSensor:10011,ImageCoordinateSystem:10012,SensorLatitude:10013,SensorLongitude:10014,SensorTrueAltitude:10015,SensorHorizontalFOV:10016,SensorVerticalFOV:10017,
SensorAzimuthAngle:10018,SensorElevationAngle:10019,SensorRollAngle:10020,PlatformSlantRange:10021,TargetWidth:10022,FrameCenterLatitude:10023,FrameCenterLongitude:10024,FrameCenterElevation:10025,OffsetCorner1Latitude:10026,OffsetCorner1Longitude:10027,OffsetCorner2Latitude:10028,OffsetCorner2Longitude:10029,OffsetCorner3Latitude:10030,OffsetCorner3Longitude:10031,OffsetCorner4Latitude:10032,OffsetCorner4Longitude:10033,TargetLocationLatitude:10040,TargetLocationLongitude:10041,TargetLocationElevation:10042,
TargetTrackGateWidth:10043,TargetTrackGateHeight:10044,TargetErrorEstimateHorizontal:10045,TargetErrorEstimateLateral:10046,GenericFlagData:10047,PlatformGroundSpeed:10056,PlatformGroundRange:10057,PlatformRemainingFuel:10058,PlatformCallSign:10059,SensorFOVName:10063,PlatformMagneticHeading:10064,LDSVersionNumber:10065,AlternatePlatformName:10070,EventStartTimeUTC:10072,VMTIDataSet:10074,SensorEllipsoidHeight:10075,OperationalMode:10077,CornerLatitudePoint1:10082,CornerLongitudePoint1:10083,CornerLatitudePoint2:10084,
CornerLongitudePoint2:10085,CornerLatitudePoint3:10086,CornerLongitudePoint3:10087,CornerLatitudePoint4:10088,CornerLongitudePoint4:10089,SARMotionImageryMetadata:10095,SecurityClassification:20001,SecurityClassifyingAuthority:20002,SecurityClassifyingCountry:20003,SecuritySCI:20004,SecurityCaveats:20005,SecurityReleaseInstructions:20006,SecurityLDSVersion:20022,EsriVideoWidth:90001,EsriVideoHeight:90002,EsriFrameCenterLatitude:90050,EsriFrameCenterLongitude:90051,EsriCornerLatitudePt1:90052,EsriCornerLongitudePt1:90053,
EsriCornerLatitudePt2:90054,EsriCornerLongitudePt2:90055,EsriCornerLatitudePt3:90056,EsriCornerLongitudePt3:90057,EsriCornerLatitudePt4:90058,EsriCornerLongitudePt4:90059,EsriFrameOutline:90060,EsriSensorPosition:90061,EsriHorizonPixelPack:90063};f.convertScreenXYToVideoXY=function(a){const {screenX:c,screenY:e,videoFrameHeight:d,videoFrameWidth:g,videoPlayerHeight:h,videoPlayerWidth:k}=a;return{x:g/k*c,y:d/h*-e}};f.getFrameCenter=r;f.getSensorTrailPoints=function(a,c){c=[...c];const e=c.findIndex(d=>
d.equals(a));-1<e&&c.splice(e);c.push(a);return c};f.getTelemetryData=function(a){if(!a?.size)return new q;var c;a:if(a?.size){if(a.has(b.EsriSensorPosition)&&(c=a.get(b.EsriSensorPosition)?.value)){c=m.fromJSON(c.geometry);break a}c=a.has(b.SensorLongitude)&&a.has(b.SensorLatitude)&&a.has(b.SensorTrueAltitude)?new m({x:a.get(b.SensorLongitude)?.value,y:a.get(b.SensorLatitude)?.value,z:a.get(b.SensorTrueAltitude)?.value}):null}else c=null;const e=r(a);if(a){var d=a.get(b.EsriFrameOutline)?.value;
if(d)a=p.fromJSON(d.geometry);else{if(a.has(b.EsriCornerLatitudePt1)&&a.has(b.EsriCornerLongitudePt1)&&a.has(b.EsriCornerLatitudePt2)&&a.has(b.EsriCornerLongitudePt2)&&a.has(b.EsriCornerLatitudePt3)&&a.has(b.EsriCornerLongitudePt3)&&a.has(b.EsriCornerLatitudePt4)&&a.has(b.EsriCornerLongitudePt4)){d=[a.get(b.EsriCornerLongitudePt1)?.value,a.get(b.EsriCornerLatitudePt1)?.value];var g=[a.get(b.EsriCornerLongitudePt2)?.value,a.get(b.EsriCornerLatitudePt2)?.value],h=[a.get(b.EsriCornerLongitudePt3)?.value,
a.get(b.EsriCornerLatitudePt3)?.value],k=[a.get(b.EsriCornerLongitudePt4)?.value,a.get(b.EsriCornerLatitudePt4)?.value];d=new p({rings:[[d,g,h,k]]})}else d=null;if(null!=d)a=d;else if(a.has(b.OffsetCorner1Latitude)&&a.has(b.OffsetCorner1Longitude)&&a.has(b.OffsetCorner2Latitude)&&a.has(b.OffsetCorner2Longitude)&&a.has(b.OffsetCorner3Latitude)&&a.has(b.OffsetCorner3Longitude)&&a.has(b.OffsetCorner4Latitude)&&a.has(b.OffsetCorner4Longitude)&&a.has(b.FrameCenterLatitude)&&a.has(b.FrameCenterLongitude)){var l=
a.get(b.FrameCenterLatitude)?.value,n=a.get(b.FrameCenterLongitude)?.value;d=l+a.get(b.OffsetCorner1Latitude)?.value;g=n+a.get(b.OffsetCorner1Longitude)?.value;h=l+a.get(b.OffsetCorner2Latitude)?.value;k=n+a.get(b.OffsetCorner2Longitude)?.value;var v=l+a.get(b.OffsetCorner3Latitude)?.value,w=n+a.get(b.OffsetCorner3Longitude)?.value;l+=a.get(b.OffsetCorner4Latitude)?.value;a=n+a.get(b.OffsetCorner4Longitude)?.value;a=new p({rings:[[[g,d],[k,h],[w,v],[a,l]]]})}else a=null}}else a=null;d=c&&e?new t({paths:[[[c.x,
c.y,c.z],[e.x,e.y,e.z]]]}):null;return new q({frameCenter:e,frameOutline:a,lineOfSight:d,sensorLocation:c})};f.readVideoTimeExtent=function(a){const {duration:c,end:e,start:d,timezone:g="UTC"}=a||{};return"number"!==typeof c?null:new u({duration:c||null,end:"number"===typeof e?new Date(e):null,start:"number"===typeof d?new Date(d):null,timezone:g})};f.videoMetadataEntryId=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});