// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../widgets/support/widgetUtils"],function(x,H){function z(a){if(!(a instanceof Element&&a.tagName.includes("-")))return!1;const b=window.customElements.get(a.tagName.toLowerCase());return!!b&&a instanceof b}let I=[],A=(a,b)=>{let g={};Object.keys(a).forEach(c=>{g[c]=a[c]});b&&Object.keys(b).forEach(c=>{g[c]=b[c]});return g},B=(a,b)=>a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&
!b.properties,J=a=>{if("string"!==typeof a)throw Error("Style values must be strings");},C=(a,b,g,c)=>{let l=a[b];if(""!==l.vnodeSelector){var f=l.properties;if(!(f&&(void 0===f.key?f.bind:f.key)))for(f=0;f<a.length;f++)if(f!==b&&B(a[f],l))throw Error(`${g.vnodeSelector} had a ${l.vnodeSelector} child ${"added"===c?c:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`);}},D=[],E=!1,K=a=>{(a.children||[]).forEach(K);a.properties&&a.properties.afterRemoved&&
a.properties.afterRemoved.apply(a.properties.bind||a.properties,[a.domNode])},L=()=>{E=!1;D.forEach(K);D.length=0},M=a=>{D.push(a);E||(E=!0,"undefined"!==typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(L,{timeout:16}):setTimeout(L,16))},N=a=>{let b=a.domNode;if(a.properties){let g=a.properties.exitAnimation;if(g){b.style.pointerEvents="none";g(b,()=>{b.parentNode&&(b.parentNode.removeChild(b),M(a))},a.properties);return}}b.parentNode&&(b.parentNode.removeChild(b),M(a))},Q=
(a,b,g)=>{if(b){var c=g.eventHandlerInterceptor,l=Object.keys(b),f=l.length;for(let h=0;h<f;h++){var e=l[h];let m=b[e];if("className"===e)throw Error('Property "className" is not supported, use "class".');if("class"===e)F(a,m,!0);else if("classes"===e){e=Object.keys(m);var p=e.length;for(var n=0;n<p;n++){var q=e[n];m[q]&&a.classList.add(q)}}else if("styles"===e)for(e=Object.keys(m),p=e.length,n=0;n<p;n++){q=e[n];let r=m[q];r&&(J(r),g.styleApplyer(a,q,r))}else"key"!==e&&null!==m&&void 0!==m&&(p=typeof m,
"function"===p?(0===e.lastIndexOf("on",0)&&(c&&(m=c(e,m,a,b)),"oninput"===e&&function(){let r=m;m=function(d){r.apply(this,[d]);d.target["oninput-value"]=d.target.value}}()),a[e]=m):"http://www.w3.org/2000/svg"===g.namespace?"href"===e?a.setAttributeNS("http://www.w3.org/1999/xlink",e,m):a.setAttribute(e,m):"string"===p&&"value"!==e?"innerHTML"===e?a[e]=H.renderingSanitizer.sanitize(m):z(a)&&e in a?a[e]=m:a.setAttribute(e,m):a[e]=m)}}},O=(a,b,g)=>{var c=b.children;if(c)for(let l of c)G(l,a,void 0,
g);b.text&&(a.textContent=b.text);Q(a,b.properties,g);b.properties&&b.properties.afterCreate&&b.properties.afterCreate.apply(b.properties.bind||b.properties,[a,g,b.vnodeSelector,b.properties,b.children])},G=(a,b,g,c)=>{let l;var f=0;let e=a.vnodeSelector,p=b.ownerDocument;if(""===e)l=a.domNode=p.createTextNode(a.text),void 0!==g?b.insertBefore(l,g):b.appendChild(l);else{for(let q=0;q<=e.length;++q){var n=e.charAt(q);if(q===e.length||"."===n||"#"===n)n=e.charAt(f-1),f=e.slice(f,q),"."===n?l.classList.add(f):
"#"===n?l.id=f:("svg"===f&&(c=A(c,{namespace:"http://www.w3.org/2000/svg"})),void 0!==c.namespace?l=a.domNode=p.createElementNS(c.namespace,f):(l=a.domNode=a.domNode||p.createElement(f),"input"===f&&a.properties&&void 0!==a.properties.type&&l.setAttribute("type",a.properties.type)),void 0!==g?b.insertBefore(l,g):l.parentNode!==b&&b.appendChild(l)),f=q+1}O(l,a,c)}},y,F=(a,b,g)=>{b&&b.split(" ").forEach(c=>{c&&a.classList.toggle(c,g)})};y=(a,b,g)=>{let c=a.domNode;if(a===b)return!1;let l=!1;if(""===
b.vnodeSelector){if(b.text!==a.text)return a=c.ownerDocument.createTextNode(b.text),c.parentNode.replaceChild(a,c),b.domNode=a,!0;b.domNode=c}else{0===b.vnodeSelector.lastIndexOf("svg",0)&&(g=A(g,{namespace:"http://www.w3.org/2000/svg"}));a.text!==b.text&&(l=!0,void 0===b.text?c.removeChild(c.firstChild):c.textContent=b.text);b.domNode=c;var f=a.children;var e=b.children,p=g;if(f===e)f=!1;else{f=f||I;e=e||I;for(var n=f.length,q=e.length,h=0,m=0,r=!1;m<q;){var d=h<n?f[h]:void 0,k=e[m];if(void 0!==
d&&B(d,k))r=y(d,k,p)||r,h++;else{b:{d=f;var t=k,u=h+1;if(""!==t.vnodeSelector)for(;u<d.length;u++)if(B(d[u],t)){d=u;break b}d=-1}if(0<=d){for(;h<d;h++)N(f[h]),C(f,h,b,"removed");r=y(f[d],k,p)||r;h=d+1}else G(k,c,h<n?f[h].domNode:void 0,p),k.properties&&(d=k.properties.enterAnimation)&&d(k.domNode,k.properties),C(e,m,b,"added")}m++}if(n>h)for(;h<n;h++)N(f[h]),C(f,h,b,"removed");f=r}l=f||l;f=a.properties;e=b.properties;p=g;if(e){n=!1;q=Object.keys(e);m=q.length;for(r=0;r<m;r++)if(d=q[r],k=e[d],h=f[d],
"class"===d)h!==k&&(F(c,h,!1),F(c,k,!0));else if("classes"===d){d=c.classList;t=Object.keys(k);u=t.length;for(var w=0;w<u;w++){var v=t[w];let P=!!k[v];P!==!!h[v]&&(n=!0,P?d.add(v):d.remove(v))}}else if("styles"===d)for(d=Object.keys(k),t=d.length,u=0;u<t;u++)w=d[u],v=k[w],v!==h[w]&&(n=!0,v?(J(v),p.styleApplyer(c,w,v)):p.styleApplyer(c,w,""));else(k||"string"!==typeof h||(k=""),"value"!==d||z(c))?k!==h&&(h=typeof k,"function"===h&&p.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===p.namespace?
"href"===d?c.setAttributeNS("http://www.w3.org/1999/xlink",d,k):c.setAttribute(d,k):"string"===h?"innerHTML"===d?c[d]=H.renderingSanitizer.sanitize(k):"role"===d&&""===k?c.removeAttribute(d):z(c)&&d in c?c[d]=k:c.setAttribute(d,k):c[d]!==k&&(c[d]=k),n=!0)):(t=c[d],t!==k&&(c["oninput-value"]?t===c["oninput-value"]:k!==h)&&(c[d]=k,c["oninput-value"]=void 0),k!==h&&(n=!0));f=n}else f=void 0;l=f||l;b.properties&&b.properties.afterUpdate&&b.properties.afterUpdate.apply(b.properties.bind||b.properties,
[c,g,b.vnodeSelector,b.properties,b.children])}l&&b.properties&&b.properties.updateAnimation&&b.properties.updateAnimation(c,b.properties,a.properties);return!1};x.createDom=G;x.createProjection=(a,b)=>({getLastRender:()=>a,update:g=>{if(a.vnodeSelector!==g.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let c=a;a=g;y(c,g,b)},domNode:a.domNode});x.extend=A;x.initPropertiesAndChildren=O;Object.defineProperty(x,
Symbol.toStringTag,{value:"Module"})});