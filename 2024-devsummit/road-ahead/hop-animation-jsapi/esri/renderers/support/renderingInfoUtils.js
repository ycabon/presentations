// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../Color","../visualVariables/support/visualVariableUtils"],function(g,m,k){function h(a,b){if(!a||a.symbol)return null;b=b?.renderer;return a&&null!=b&&b.getObservationRenderer?b.getObservationRenderer(a):b}async function l(a,b){if(null!=a.symbol)return a.symbol;const d=h(a,b);return null!=d?d.getSymbolAsync(a,b):null}g.getDriverAxisSizeValue=function(a,b=0){a=a[b];return"number"===typeof a&&isFinite(a)?a:null};g.getDriverAxisSizeValueAny=function(a){for(let b=0;3>b;b++){const d=
a[b];if("number"===typeof d)return isFinite(d)?d:0}return 0};g.getRenderer=h;g.getRenderingInfo=function(a,b){const d=h(a,b);if(null!=a.symbol)var c=a.symbol;else c=h(a,b),c=null!=c&&"dot-density"!==c.type?c.getSymbol(a,b):null;if(null==c)return null;c={renderer:d,symbol:c};if(!(null!=d&&"visualVariables"in d&&d.visualVariables))return c;b=k.getVisualVariableValues(d,a,b)??[];a=["proportional","proportional","proportional"];for(const {variable:e,value:f}of b)switch(e.type){case "color":c.color=f.toRgba();
break;case "size":if("outline"===e.target)c.outlineSize=f;else switch(b=e.useSymbolValue?"symbol-value":f,e.axis){case "width":a[0]=b;break;case "depth":a[1]=b;break;case "height":a[2]=b;break;case "width-and-depth":a[0]=a[1]=b;break;default:a[0]=a[1]=a[2]=b}break;case "opacity":c.opacity=f;break;case "rotation":switch(e.axis){case "tilt":c.tilt=f;break;case "roll":c.roll=f;break;default:c.heading=f}}if("proportional"!==a[0]||"proportional"!==a[1]||"proportional"!==a[2])c.size=a;return c};g.getRenderingInfoAsync=
async function(a,b){var d=h(a,b),c=await l(a,b);if(!c)return null;c={renderer:d,symbol:c};if(!(d&&"visualVariables"in d&&d.visualVariables))return c;b=k.getVisualVariableValues(d,a,b)??[];a=["proportional","proportional","proportional"];for(const {variable:e,value:f}of b)"color"===e.type?c.color=m.toUnitRGBA(f):"size"===e.type?"outline"===e.target?c.outlineSize=f:(b=e.axis,d=e.useSymbolValue?"symbol-value":f,"width"===b?a[0]=d:"depth"===b?a[1]=d:"height"===b?a[2]=d:a[0]="width-and-depth"===b?a[1]=
d:a[1]=a[2]=d):"opacity"===e.type?c.opacity=f:"rotation"===e.type&&"tilt"===e.axis?c.tilt=f:"rotation"===e.type&&"roll"===e.axis?c.roll=f:"rotation"===e.type&&(c.heading=f);if(isFinite(a[0])||isFinite(a[1])||isFinite(a[2]))c.size=a;return c};g.getSymbolAsync=l;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});