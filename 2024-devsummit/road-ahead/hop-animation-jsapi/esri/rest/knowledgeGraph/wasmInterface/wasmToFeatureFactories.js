// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../ProtoFeatureCollection","./WasmDataModelWrapperInterfaces","./WasmSerializedLayerData"],function(l,m,q,w){function r(a){const e=new m.CompressedGeometry;e.geometryType=q.EsriGeometryTypes[a.geometry_type.value];const c=[],d=[];for(var b=0;b<a.lengths.length;b++)c.push(a.lengths[b]);for(b=0;b<a.coords.length;b++)d.push(a.coords[b]);e.lengths=c;e.coords=d;return e}function t(a){const e=new m.Field;e.name=a.name;e.alias=a.alias;e.fieldType=q.EsriFieldTypes[a.field_type.value];e.sqlType=
w.SqlTypeCode[a.sql_type.value];e.domain=a.domain;e.defaultValue=a.default_value;return e}function x(a){const e=t(a);e.geometryType=q.EsriGeometryTypes[a.geometry_type.value];return e}function y(a){const e=new m.Transform;e.quantizeOriginPosition=w.WasmQuantizeOriginPositionTypeCode[a.quantizeOriginPosition.value];var c=e.scale;const d=a.scale;c.xScale=d.xScale;c.yScale=d.yScale;c.mScale=d.mScale;c.zScale=d.zScale;c=e.translate;a=a.translate;c.xTranslate=a.xTranslate;c.yTranslate=a.yTranslate;c.mTranslate=
a.mTranslate;c.zTranslate=a.zTranslate;return e}l.wasmToCompressedGeometry=r;l.wasmToField=t;l.wasmToGeometryField=x;l.wasmToProtoFeatureCollection=function(a){const e=new m.ProtoFeatureCollection;e.version=a.version;a=a.get_query_result();if(0!==a.results_type.value)throw Error("Got a non-feature collection type");a=a.get_feature_result();var c=e.queryResult.featureResult;c.objectIdFieldName=a.objectid_field_name;c.exceededTransferLimit=a.exceeded_transfer_limit;c.hasM=a.has_m;c.hasZ=a.has_z;c.geometryType=
q.EsriGeometryTypes[a.geometry_type.value];c.globalIdFieldName=a.globalid_field_name;c.geohashFieldName=a.geohash_field_name;var d=c.uniqueIdField,b=a.unique_id_field;d.name=b.name;d.isSystemMaintained=b.isSystemMaintained;d=c.geometryProperties;b=a.geometry_properties;d.shapeAreaFieldName=b.shapeAreaFieldName;d.shapeLengthFieldName=b.shapeLengthFieldName;d.units=b.units;d=c.spatialReference;b=a.spatial_reference;d.wkid=b.wkid;d.latestWkid=b.latestWkid;d.vcsWkid=b.vcsWkid;d.latestVcsWkid=b.latestVcsWkid;
d.wkt=b.wkt;c.transform=y(a.transform);d=c.fields;b=a.fields;var f=b.size();for(var g=0;g<f;g++){var h=b.get(g),k=t(h);d.push(k);h.delete()}b.delete();d=c.values;b=a.values_count();for(f=0;f<b;f++)d.push(a.get_value_at(f));d=c.features;b=a.features;f=b.size();for(g=0;g<f;g++){h=new m.Feature;k=b.get(g);var u=h.attributes,n=k.attributes_count();for(var p=0;p<n;p++)u.push(k.get_attribute_at(p));h.compressedGeometry=r(k.get_compressed_geometry());h.centroid=r(k.get_centroid());u=h.aggregateGeometries;
n=k.aggregate_geometries;p=n.size();for(let v=0;v<p;v++){const z=n.get(v),A=r(z);u.push(A);z.delete()}n.delete();d.push(h);k.delete()}b.delete();c=c.geometryFields;a=a.geometry_fields;d=a.size();for(b=0;b<d;b++)f=a.get(b),g=x(f),c.push(g),f.delete();a.delete();return e};l.wasmToTransform=y;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});