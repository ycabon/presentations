// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../PopupTemplate ../../core/Error ../../intl/messages ./support/clusterUtils ../../views/2d/layers/support/clusterUtils".split(" "),function(f,g,l,m,h,n){async function p(a){const {layer:c,renderer:d}=a;await c.load();a=d||c.renderer;if(!n.isClusterCompatibleRenderer(a))throw new l("clusters-popup:invalid-parameters","'renderer' is not valid");return{layer:c,renderer:a}}f.getTemplates=async function(a){const [{renderer:c,layer:d},e]=await Promise.all([p(a),m.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]);
a=await h.getContentAndInfos(d,c,e);if(null==a)return null;a={name:"clusters",title:e.clusters.templateTitle,value:new g({fieldInfos:a.fieldInfos,expressionInfos:a.expressionInfos,content:a.content,title:e.clusters.clusterPopupTitle})};const k=[];var b=d.featureReduction;b=b&&"renderer"in b?b.renderer:null;"pie-chart"===b?.type&&(b=await h.getContentAndInfosForPieChart(d,b,e),null!=b&&k.push({name:"clusters-pie-chart",title:"clusters-pie-chart",value:new g({fieldInfos:b.fieldInfos,expressionInfos:b.expressionInfos,
content:b.content,title:e.clusters.clusterPopupTitle})}));return{primaryTemplate:a,secondaryTemplates:k}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});