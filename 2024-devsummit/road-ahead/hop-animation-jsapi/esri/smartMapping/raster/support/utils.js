// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","./adapters/ImageryLayerAdapter","./adapters/ImageryTileLayerAdapter"],function(d,k,f,m,l){function e(a){if("raster-layer-adapter"===a.type)return a;const b=g[a.type]?.adapter;return null==b?null:new b({layer:a})}async function h(a){var {layer:b}=a;if(!b)throw new k("raster-renderer-creator:missing-parameters","'layer' parameter is required");b=e(b);if(null==b)throw new k("raster-renderer-creator:invalid-parameters",
"'layer' must be one of these types: "+n.join(", "));await b.load();const c=a.rasterFunction??a.renderingRule;await b.updateRasterInfo({rasterFunction:c,signal:a.signal});return{...a,layer:b,rasterFunction:c}}const g={imagery:{adapter:m,label:"ImageryLayer"},"imagery-tile":{adapter:l,label:"ImageryTileLayer"},wcs:{adapter:l,label:"WCSLayer"}},p={"raster-stretch":"raster-stretch","unique-value":"raster-unique-value","raster-rgb":"raster-rgb","class-breaks":"raster-class-breaks","raster-colormap":"raster-colormap",
"raster-shaded-relief":"raster-shaded-relief","vector-field":"raster-vector-field",flow:"raster-flow"},n=Object.keys(g).map(a=>g[a].label);d.createRasterLayerAdapter=e;d.getDefaultBandCombination=async function(a){a=await h(a);a=await e(a.layer).generateRasterInfo(a);return f.getDefaultBandCombination(a)};d.getSupportedRendererInfo=async function(a){a=await h(a);const b=e(a.layer);var c=await b.generateRasterInfo(a);a=f.getSupportedRendererTypes(c,!0).map(q=>p[q]);const r=f.createDefaultRenderer(c);
({bandCount:c}=c);1<c&&a.push("raster-rgb");!a.includes("raster-class-breaks")&&1===c&&10.3<=+b.layer?.version&&a.push("raster-class-breaks");return{supportedTypes:a,defaultRenderer:r}};d.processRasterRendererParameters=h;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});