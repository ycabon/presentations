// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../Color ../../../symbols ../../../core/Collection ../../../core/has ../../../core/Error ../../../intl/date ../../../renderers/support/numberUtils ../../../renderers/support/pointCloud/PointSizeSplatAlgorithm ../../heuristics/outline ../../statistics/classBreaks ../../statistics/summaryStatistics ../../support/utils ../../../symbols/edges/SketchEdges3D ../../../symbols/edges/SolidEdges3D ../../../time/timeZoneUtils ../../../views/support/colorUtils ../../../symbols/MeshSymbol3D ../../../symbols/FillSymbol3DLayer ../../../symbols/SimpleFillSymbol ../../../symbols/PolygonSymbol3D ../../../symbols/ExtrudeSymbol3DLayer ../../../symbols/SimpleLineSymbol ../../../symbols/LineSymbol3D ../../../symbols/LineSymbol3DLayer ../../../symbols/PathSymbol3DLayer ../../../symbols/SimpleMarkerSymbol ../../../symbols/PointSymbol3D ../../../symbols/IconSymbol3DLayer ../../../symbols/ObjectSymbol3DLayer".split(" "),
function(h,J,da,l,ea,x,t,m,K,L,y,M,n,N,O,z,P,Q,A,R,B,S,T,C,U,V,W,D,X,Y){function p(a,b,c){return 0<a+b&&0>a-b&&0>c?0:a}function q(a,b,c){var d;let e,f;(b=(d={statistics:a,isDate:b},d.statistics))||(b={});let g;if(null==b.min)if(d.isDate){var k=E();g=k[0];k=k[1]}else g=0,k=100;else b.min===b.max&&(d.isDate?(k=E(b.min),g=k[0],k=k[1]):0>b.min?(g=2*b.min,k=0):0<b.min?(g=0,k=2*b.min):(g=0,k=100));d=null!=g?g:b.min;b=null!=k?k:b.max;null!=g||null!=k?(e=d,f=b):!c||null!=a.avg&&a.stddev||(e=a.min,f=a.max);
return null!=e&&null!=f?[e,f]:null}function E(a){var b=("number"===typeof a?new Date(a):new Date).getUTCFullYear();let c=Date.UTC(b,0,1,12,0,0,0);b=Date.UTC(b,11,31,12,0,0,0);"number"===typeof a&&(a<c&&(c=a),a>b&&(b=a));return[c,b]}function u(a,b,c){const d=(b-a)/(c-1),e=[a];for(let f=1;f<=c-2;f++)e.push(a+f*d);e.push(b);return m.round(e,{strictBounds:!0})}function F({min:a,max:b,avg:c,stddev:d},e=!0){if(null==a||null==b||null==c||null==d)return[];let f=c-d;d=c+d;f<a&&(f=a);d>b&&(d=b);e&&(c=f+(d-
f)/2);a=m.round([f,d],{strictBounds:!0});f=a[0];d=a[1];a=[f,f+(c-f)/2,c,c+(d-c)/2,d];return m.round(a,{strictBounds:!0})}function Z(a){const b=a.layer;return a.fields.filter(c=>!b.getField(c))}function aa(a){const b=a.layer;return a.fields.filter(c=>{c=b.getFieldUsageInfo(c);return!c||!c.supportsRenderer})}function v(a){const b=a.name?.toLowerCase();if(!b||b?.includes(":insufficient-info")||b?.includes(":insufficient-data"))return null;throw a;}const G=/^(\d+(\.\d+)?)\s*(%)$/i,H=[0,0,0,.4],ba=new Set(["hours",
"minutes","seconds"]),ca=[...n.defaultBasemapGroups.light,...n.defaultBasemapGroups.dark];h.clampAboveAndBelowStopValues=function(a,b){const {min:c,max:d}=b,[e,f,g,k,r]=a;b=null!=c?e<c:!1;const w=null!=d?r>d:!1;if(null==c||null==d||!b&&!w)return a;a=b?c:e;const I=w?d:r;return m.round([a,b?a+(g-a)/2:f,g,w?g+(I-g)/2:k,I],{strictBounds:!0})};h.createColors=function(a,b){const c=[],d=a.length;for(let e=0;e<b;e++)c.push(new J(a[e%d]));return c};h.createDataValues=function({minDataValue:a,maxDataValue:b,
defaultValuesUsed:c},d,e,f=!0){return c||"above"===e||"below"===e||"90-10"===e?u(a,b,5):F(d,f)};h.createDefaultStopValues=u;h.createStopValues=F;h.createStopValuesForAboveBelow=function(a,b){const {avg:c,stddev:d}=a;var e=a.min;const f=a.max;if(null==c||null==d){const [g,k]=q(a,b,!0);return u(g,k,5)}a=p(c,d,e);e=Math.max(f-a,a-e);return m.round([a-e,a-e/2,a,e/2+a,a+e],{strictBounds:!0})};h.createSymbol=function(a,b){const {type:c,size:d,color:e,outline:f}=b;switch(a){case "point":case "multipoint":if("2d"===
c)var g=new W({color:e,size:d,outline:{color:f.color,width:f.width}});else"3d-flat"===c?g=new D({symbolLayers:new l([new X({size:d,resource:{primitive:"circle"},material:{color:e},outline:{color:f.color,size:f.width}})])}):c?.includes("3d-volumetric")&&(a="3d-volumetric-uniform"===c,g=new Y({height:d,resource:{primitive:a?"sphere":"cylinder"},material:{color:e}}),a||(g.width=b.widthAndDepth,g.depth=b.widthAndDepth),g=new D({symbolLayers:new l([g])}));break;case "polyline":"2d"===c?g=new T({color:e,
width:d}):"3d-flat"===c?g=new C({symbolLayers:new l([new U({size:d,material:{color:e}})])}):"3d-volumetric"===c&&(g=new C({symbolLayers:new l([new V({width:"number"===typeof d?d:parseFloat(d),height:"number"===typeof d?d:parseFloat(d),material:{color:e}})])}));break;case "polygon":"2d"===c?g=new R({color:e,outline:{color:f.color,width:f.width}}):"3d-flat"===c?g=new B({symbolLayers:new l([new A({material:{color:e},outline:{color:f.color,size:f.width}})])}):"3d-volumetric"===c&&(g=new B({symbolLayers:new l([new S({size:d,
material:{color:e}})])}));break;case "mesh":a=b.meshInfo?.edgesType,g=new Q({symbolLayers:new l([new A({material:{color:e,colorMixMode:b.meshInfo?.colorMixMode||null},edges:"solid"===a?new O({color:H}):"sketch"===a?new N({color:H}):null})])})}return g};h.errorCallback=v;h.formatDate=function(a,b,c,d){if("string"===typeof a){if((d=c.getField(a))&&n.isAnyDateField(d))return d.alias||d.name}else if("number"===typeof a||a instanceof Date){const e=null!=b&&ba.has(b);b=t.convertDateFormatToIntlOptions(e?
"short-date-short-time":"short-date");return d&&e?(c=c.layer,{timeZone:d}=z.getTimeZoneFormattingOptions("preferredTimeZone"in c?c.preferredTimeZone:null,"datesInUnknownTimezone"in c&&c.datesInUnknownTimezone,d.timeZone,b,"date"),t.formatDate(a,{...b,timeZone:d,timeZoneName:z.shortTimeZoneName})):t.formatDate(a,b)}return a};h.getBaseValueForAboveBelow=p;h.getBasemapInfo=async function(a,b){let c=null,d=null;if(!a&&!b)return{basemapId:c,basemapTheme:d};b&&(d=await P.getBackgroundColorTheme(b),a||=
b.map?.basemap);a&&(c=n.getBasemapId(a,ca,!1))&&!d&&(a=n.getBasemapGroup(c),null!=a&&(d=a));!c&&d&&(c="dark"===d?"dark-gray":"gray");return{basemapId:c,basemapTheme:d}};h.getClassBreaks=async function(a,b){const c={layer:a.layer,view:a.view,signal:a.signal},[d,e]=await Promise.all([y(a).catch(v),b?L(c).catch(v):null]);b=q({min:d?.minValue,max:d?.maxValue,avg:null,stddev:null},!1,!1);return{result:b?await y({...a,classificationMethod:"equal-interval",numClasses:1,analyzeData:!1,minValue:b[0],maxValue:b[1],
normalizationTotal:b[0]+b[1]}):d,defaultValuesUsed:!!b,outlineResult:e}};h.getDataRange=function(a,b,c,d,e){a="90-10"===c&&b?{min:b.classBreakInfos[0].maxValue,max:b.classBreakInfos[b.classBreakInfos.length-1].minValue,avg:null,stddev:null}:a;const {avg:f,stddev:g,min:k,max:r}=a;e=(d=q(a,!!d,e??!0))?d[0]:k;a=d?d[1]:r;if(d)return{minDataValue:e,maxDataValue:a,defaultValuesUsed:!0};"above"===c?e=p(f,g,k):"below"===c&&(a=p(f,g,k));return{minDataValue:e,maxDataValue:a,defaultValuesUsed:!1}};h.getDefaultDataRange=
q;h.getPointSizeAlgorithm=function(a){if(null!=a){a=a.match(G);var b=Number(a[1]);if("%"===a[3])return new K({scaleFactor:b/100})}};h.getSizeRangeForAxis=function(a,b){let {minSize:c,maxSize:d}=a;"height"===b&&(c=((d-c)/2+c)/4.6,d*=2);return{minSize:c,maxSize:d}};h.getSummaryStatistics=function(a){return M(a)};h.getSymbolOutlineFromScheme=function(a,b,c){switch(b){case "point":case "multipoint":case "polygon":if(!("outline"in a))return null;a={color:a.outline.color,width:a.outline.width};null!=c&&
a.color&&(b=a.color.clone(),b.a=c,a.color=b);return a}};h.getSymbolSizeFromScheme=function(a,b,c){switch(b){case "point":case "multipoint":return c?"noDataSize"in a?a.noDataSize:null:"size"in a?a.size:null;case "polyline":return c?"noDataWidth"in a?a.noDataWidth:null:"width"in a?a.width:null;case "polygon":return"size"in a?a.size:null}};h.isValidPointSize=function(a){return G.test(a)};h.updateAgeRendererAuthoringInfoVV=function(a,b,c,d){a.startTime=b instanceof Date?b.getTime():b;a.endTime=c instanceof
Date?c.getTime():c;a.units=d;a.field="string"===typeof b?b:"string"===typeof c?c:null};h.verifyBasicFieldValidity=function(a,b,c){const d=Z({layer:a,fields:b});if(d.length)return new x(c,"Unknown fields: "+d.join(", ")+". You can only use fields defined in the layer schema");a=aa({layer:a,fields:b});if(a.length)return new x(c,"Unsupported fields: "+a.join(", ")+". You can only use fields that are accessible to the renderer i.e. FieldUsageInfo.supportsRenderer must be true")};Object.defineProperty(h,
Symbol.toStringTag,{value:"Module"})});