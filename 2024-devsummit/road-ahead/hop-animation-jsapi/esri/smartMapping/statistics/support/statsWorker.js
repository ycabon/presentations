// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),function(e,
f,q,g,p,m,v,H,z,D,x,u,A,k){function E(b){b=V.exec(b);if(!b)return null;const {hh:w,mm:J,ss:L,ms:Z}=b.groups;return Number(w)*p.millisecondsPerTimeUnit.hours+Number(J)*p.millisecondsPerTimeUnit.minutes+Number(L)*p.millisecondsPerTimeUnit.seconds+Number(Z||0)}function M(b,w){b=null!=b?b:"";null!=w&&w&&(b=b?"("+b+") AND ("+w+")":w);return b}function B(b){const w=b.layer;return b.fields.filter(J=>!w.getField(J))}function F(b){const w=b.layer;return b.fields.filter(J=>{J=w.getFieldUsageInfo(J);return!J||
!J.supportsStatistics})}let P=null;const V=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;e.calculateHeatmapStats=function(b,w=18,J,L,Z){const I=new Float64Array(L*Z);w=Math.round(g.pt2px(w));let C=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;J=D.createValueFunction(J);for(const {geometry:h,attributes:y}of b){const {x:G,y:T}=h;b=Math.max(0,G-w);var l=Math.max(0,T-w);const W=Math.min(Z,T+w),Y=Math.min(L,G+w),ca=+J(y);for(;l<W;l++)for(let da=b;da<Y;da++){var d=
l*L+da;const na=D.evaluateDensityKernel(da-G,l-T,w)*ca;d=I[d]+=na;C=Math.min(C,d);t=Math.max(t,d)}}return{min:C,max:t}};e.getDataValues=async function(b,w,J=!0){if(!w)return[];const {field:L,field2:Z,field3:I,fieldDelimiter:C,fieldInfos:t,timeZone:l}=b;var d=L&&t?.find(ra=>ra.name.toLowerCase()===L.toLowerCase());const h=d?z.isTimeOnlyField(d):!1,y=d?x.isAnyDateField(d):!1,G=b.valueExpression,T=b.normalizationType,W=b.normalizationField,Y=b.normalizationTotal,ca=[];d=b.viewInfoParams;let da=null,
na=null;if(G){if(!P){const {arcadeUtils:ra}=await A.loadArcade();P=ra}P.hasGeometryOperations(G)&&await P.enableGeometryOperations();da=P.createFunction(G);na=d?P.getViewInfo({viewingMode:d.viewingMode,scale:d.scale,spatialReference:new m(d.spatialReference)}):null}b=b.fieldInfos;const oa=w[0]&&"declaredClass"in w[0]&&"esri.Graphic"===w[0].declaredClass||!b?null:{fields:b};w.forEach(ra=>{var sa=ra.attributes;if(G){var ia=P.createExecContext(oa?{...ra,layer:oa}:ra,na,l);ia=P.executeFunction(da,ia)}else sa&&
(ia=sa[L],Z?(ia=`${u.processNullValue(ia)}${C}${u.processNullValue(sa[Z])}`,I&&(ia=`${ia}${C}${u.processNullValue(sa[I])}`)):"string"===typeof ia&&J&&(y?ia=ia?(new Date(ia)).getTime():null:h&&(ia=ia?E(ia):null)));T&&"number"===typeof ia&&isFinite(ia)&&(sa=sa&&parseFloat(sa[W]),ia=u.getNormalizedValue(ia,T,sa,Y));ca.push(ia)});return ca};e.getRangeExpr=function(b,w,J){w=null!=w?b+" \x3e\x3d "+w:"";b=null!=J?b+" \x3c\x3d "+J:"";J="";return(J=w&&b?M(w,b):w||b)?"("+J+")":""};e.getSQLFilterForNormalization=
function(b){const w=b.field,J=b.normalizationType;b=b.normalizationField;let L;if("field"===J)L="(NOT "+b+" \x3d 0)";else if("log"===J||"natural-log"===J||"square-root"===J)L=`(${w} > 0)`;return L};e.getSumOfAttributesExpr=function(b,w,J){const L=[],Z=[],I=[],C=[],t=[];b.forEach((h,y)=>{const G=h.field?"field":"expression",T=h.field||h.valueExpression;h.field?(t.push(T),Z.push(`var ${G}${y} = Number($feature["${T}"]);`)):(L.push(`function getValueForExpr${y}() {\n  ${T} \n}`),Z.push(`var ${G}${y} = Number(getValueForExpr${y}());`));
J||I.push(`${G}${y} = IIf(${G}${y} < 0, 0, ${G}${y});`);C.push(`${G}${y}`)});b="return sum;";const l=L.length?null:t.reduce((h,y)=>`${h} + ${y}`);let d=null;w||J?w?J||(b="return IIf(sum \x3e\x3d 0, sum, null);",l&&(d=`(( ${l} ) >= 0)`)):(b="return IIf(sum !\x3d 0, sum, null);",l&&(d=`(( ${l} ) <> 0)`)):(b="return IIf(sum \x3e 0, sum, null);",l&&(d=`(( ${l} ) > 0)`));return{valueExpression:[L.length?L.join("\n"):"",Z.join("\n"),I.join("\n"),`var sum = ${C.join(" + ")};`,b].filter(Boolean).join("\n\n"),
sqlExpression:l,sqlWhere:d}};e.mergeWhereClauses=M;e.quantizeFeatures=function(b,w,J,L){const Z=H.isWrappable(J)?H.getInfo(J):null,I=Z?Math.round((Z.valid[1]-Z.valid[0])/w.scale[0]):null;return b.map(C=>{const t=new k(C.geometry);v.quantizePoint(w,t,t,t.hasZ,t.hasM);if(Z){var l=I??0,d=L[0];0>t.x?t.x+=l:t.x>d&&(t.x-=l)}C.geometry=t;return C})};e.timeOnlyToMilliseconds=E;e.verifyBasicFieldValidity=function(b,w,J){const L=B({layer:b,fields:w});if(L.length)return new q(J,"Unknown fields: "+L.join(", ")+
". You can only use fields defined in the layer schema");b=F({layer:b,fields:w});if(b.length)return new q(J,"Unsupported fields: "+b.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};e.verifyFieldType=function(b,w,J,L){let Z;w?w.name!==b.objectIdField&&L.includes(w.type)||(Z=new q(J,"'field' should be one of these types: "+L.join(","))):Z=new q(J,"'field' is not defined in the layer schema");return Z};e.verifyFilterValidty=function(b,
w){if(b&&"intersects"!==b.spatialRelationship)return new q(w,"Only 'intersects' spatialRelationship is supported for featureFilter")};e.verifyNumericField=function(b,w,J){let L;w?w.name!==b.objectIdField&&z.isNumericField(w)||(L=new q(J,"'field' should be one of these numeric types: "+z.numericTypes.join(","))):L=new q(J,"'field' is not defined in the layer schema");return L};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(e){function f(g){return g?
72*g/96:0}const q=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;e.castRenderScreenPointArray=function(g){return g};e.castRenderScreenPointArray3=function(g){return g};e.castScreenPointArray=function(g){return g};e.createRenderScreenPoint=function(g=0,p=0){return{x:g,y:p}};e.createRenderScreenPointArray=function(g=0,p=0){return[g,p]};e.createRenderScreenPointArray3=function(g=0,p=0,m=0){return[g,p,m]};e.createScreenPoint=function(g=0,p=0){return{x:g,y:p}};e.createScreenPointArray=function(g=0,p=0){return[g,
p]};e.pt2px=function(g){return g?g/72*96:0};e.px2pt=f;e.screenPointArrayToObject=function(g,p){return p?(p.x=g[0],p.y=g[1],p):{x:g[0],y:g[1]}};e.screenPointObjectToArray=function(g,p){return p?(p[0]=g.x,p[1]=g.y,2<p.length&&(p[2]=0),p):[g.x,g.y]};e.toPt=function(g){if("string"===typeof g){var p=g.match(q);if(p){var m=Number(p[1]);p=p[3]&&p[3].toLowerCase();g="-"===g.charAt(0);m="px"===p?f(m):m;return g?-m:m}console.warn("screenUtils.toPt: input not recognized!");return null}return g};Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(e,f,q,g){function p(H,z,D){return 0===H?0:H*v[z]/v[D]}function m(H){switch(H){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const v={milliseconds:1,seconds:1E3,
minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};e.convertTime=p;e.isValidDate=function(H){return H instanceof Date&&!isNaN(H.getTime())};e.makeUTCTime=function(H,z,D="milliseconds"){z=new Date(p(z,D,"milliseconds"));z.setUTCFullYear(H.getUTCFullYear(),H.getUTCMonth(),H.getUTCDate());return z};e.mergeTimeExtents=function(H,z){return H&&z?H.intersection(z):H||z};e.millisecondsPerTimeUnit=v;e.offsetDate=function(H,z,D,x=q.system){x=new g.IANAZone(f.resolveTimeZone(x));
H=g.DateTime.fromJSDate(H,{zone:x});x="decades"===D||"centuries"===D?"year":m(D);"decades"===D&&(z*=10);"centuries"===D&&(z*=100);return H.plus({[x]:z}).toJSDate()};e.offsetDateUTC=function(H,z,D="milliseconds"){H=H.getTime();z=p(z,D,"milliseconds");return new Date(H+z)};e.resetUTCDate=function(H,z){H=new Date(H.getTime());H.setUTCFullYear(z.getFullYear(),z.getMonth(),z.getDate());return H};e.timeSinceUTCMidnight=function(H,z="milliseconds"){const D=p(H.getUTCHours(),"hours","milliseconds"),x=p(H.getUTCMinutes(),
"minutes","milliseconds"),u=p(H.getUTCSeconds(),"seconds","milliseconds");H=H.getUTCMilliseconds();return p(D+x+u+H,"milliseconds",z)};e.truncateDate=function(H,z,D=q.system){D=new g.IANAZone(f.resolveTimeZone(D));H=g.DateTime.fromJSDate(H,{zone:D});if("decades"===z||"centuries"===z)return H=H.startOf("year"),{year:D}=H,H.set({year:D-D%("decades"===z?10:100)}).toJSDate();z=m(z);return H.startOf(z).toJSDate()};e.truncateLocalTime=function(H){const z=new Date(0);z.setHours(0);z.setMinutes(0);z.setSeconds(0);
z.setMilliseconds(0);z.setFullYear(H.getUTCFullYear(),H.getUTCMonth(),H.getUTCDate());return z};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(e,f){function q({scale:I,translate:C},t){return Math.round((t-C[0])/I[0])}function g({scale:I,translate:C},t){return Math.round((C[1]-t)/I[1])}function p(I,C,t){const l=[];let d,h,y,G;for(let T=0;T<t.length;T++){const W=t[T];if(0<T){if(y=q(I,W[0]),
G=g(I,W[1]),y!==d||G!==h)l.push(C(W,y-d,G-h)),d=y,h=G}else d=q(I,W[0]),h=g(I,W[1]),l.push(C(W,d,h))}return 0<l.length?l:null}function m(I,C,t,l){return p(I,t?l?Z:L:l?L:J,C)}function v(I,C,t,l){const d=[];t=t?l?Z:L:l?L:J;for(l=0;l<C.length;l++){const h=p(I,t,C[l]);h&&3<=h.length&&d.push(h)}return d.length?d:null}function H(I,C,t,l){const d=[];t=t?l?Z:L:l?L:J;for(l=0;l<C.length;l++){const h=p(I,t,C[l]);h&&2<=h.length&&d.push(h)}return d.length?d:null}function z({scale:I,translate:C},t){return t*I[0]+
C[0]}function D({scale:I,translate:C},t){return C[1]-t*I[1]}function x(I,C,t){const l=Array(t.length);if(!t.length)return l;const [d,h]=I.scale;let y=z(I,t[0][0]);I=D(I,t[0][1]);l[0]=C(t[0],y,I);for(let G=1;G<t.length;G++){const T=t[G];y+=T[0]*d;I-=T[1]*h;l[G]=C(T,y,I)}return l}function u(I,C,t){const l=Array(t.length);for(let d=0;d<t.length;d++)l[d]=x(I,C,t[d]);return l}function A(I,C,t,l){return x(I,t?l?Z:L:l?L:J,C)}function k(I,C,t,l){return u(I,t?l?Z:L:l?L:J,C)}function E(I,C,t,l){return u(I,
t?l?Z:L:l?L:J,C)}function M(I,C,t){let [l,d]=t[0],h=Math.min(l,C[0]),y=Math.min(d,C[1]),G=Math.max(l,C[2]);C=Math.max(d,C[3]);for(let T=1;T<t.length;T++){const [W,Y]=t[T];l+=W;d+=Y;0>W&&(h=Math.min(h,l));0<W&&(G=Math.max(G,l));0>Y?y=Math.min(y,d):0<Y&&(C=Math.max(C,d))}I[0]=h;I[1]=y;I[2]=G;I[3]=C;return I}function B(I,C){if(!C.length)return null;I[0]=I[1]=Number.POSITIVE_INFINITY;I[2]=I[3]=Number.NEGATIVE_INFINITY;for(let t=0;t<C.length;t++)M(I,I,C[t]);return I}function F(I,C,t,l,d){C.xmin=q(I,t.xmin);
C.ymin=g(I,t.ymin);C.xmax=q(I,t.xmax);C.ymax=g(I,t.ymax);C!==t&&(l&&(C.zmin=t.zmin,C.zmax=t.zmax),d&&(C.mmin=t.mmin,C.mmax=t.mmax));return C}function P(I,C,t,l,d){C.points=m(I,t.points,l,d)??[];return C}function V(I,C,t,l,d){C.x=q(I,t.x);C.y=g(I,t.y);C!==t&&(l&&(C.z=t.z),d&&(C.m=t.m));return C}function b(I,C,t,l,d){I=v(I,t.rings,l,d);if(!I)return null;C.rings=I;return C}function w(I,C,t,l,d){I=H(I,t.paths,l,d);if(!I)return null;C.paths=I;return C}const J=(I,C,t)=>[C,t],L=(I,C,t)=>[C,t,I[2]],Z=(I,
C,t)=>[C,t,I[2],I[3]];e.equals=function(I,C){if(I===C||null==I&&null==C)return!0;if(null==I||null==C)return!1;let t,l,d,h;I&&"upperLeft"===I.originPosition?(t=I.translate[0],l=I.translate[1],I=I.scale[0]):(t=null!=I.extent?I.extent.xmin:0,l=null!=I.extent?I.extent.ymax:0,I=I.tolerance);C&&"upperLeft"===C.originPosition?(d=C.translate[0],h=C.translate[1],C=C.scale[0]):(d=null!=C.extent?C.extent.xmin:0,h=null!=C.extent?C.extent.ymax:0,C=C.tolerance);return t===d&&l===h&&I===C};e.getQuantizedBoundsCoordsArray=
M;e.getQuantizedBoundsCoordsArrayArray=B;e.getQuantizedBoundsPaths=function(I){return B([0,0,0,0],I)};e.getQuantizedBoundsPoints=function(I){const C=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return M(C,C,I)};e.getQuantizedBoundsRings=function(I){return B([0,0,0,0],I)};e.quantizeBounds=function(I,C,t){C[0]=q(I,t[0]);C[3]=g(I,t[1]);C[2]=q(I,t[2]);C[1]=g(I,t[3]);return C};e.quantizeExtent=F;e.quantizeGeometry=function(I,C){return I&&C?f.isPoint(C)?
V(I,{},C,!1,!1):f.isPolyline(C)?w(I,{},C,!1,!1):f.isPolygon(C)?b(I,{},C,!1,!1):f.isMultipoint(C)?P(I,{},C,!1,!1):f.isExtent(C)?F(I,{},C,!1,!1):null:null};e.quantizeMultipoint=P;e.quantizePaths=H;e.quantizePoint=V;e.quantizePoints=m;e.quantizePolygon=b;e.quantizePolyline=w;e.quantizeRings=v;e.quantizeX=q;e.quantizeY=g;e.toQuantizationTransform=function(I){return I?{originPosition:"upper-left"===I.originPosition?"upperLeft":"lower-left"===I.originPosition?"lowerLeft":I.originPosition,scale:I.tolerance?
[I.tolerance,I.tolerance]:[1,1],translate:null!=I.extent?[I.extent.xmin,I.extent.ymax]:[0,0]}:null};e.unquantizeBounds=function(I,C,t){return t?(C[0]=z(I,t[0]),C[1]=D(I,t[3]),C[2]=z(I,t[2]),C[3]=D(I,t[1]),C):[z(I,C[0]),D(I,C[3]),z(I,C[2]),D(I,C[1])]};e.unquantizeCoordsArray=x;e.unquantizeCoordsArrayArray=u;e.unquantizeExtent=function(I,C,t,l,d){C.xmin=z(I,t.xmin);C.ymin=D(I,t.ymin);C.xmax=z(I,t.xmax);C.ymax=D(I,t.ymax);C!==t&&(l&&(C.zmin=t.zmin,C.zmax=t.zmax),d&&(C.mmin=t.mmin,C.mmax=t.mmax));return C};
e.unquantizeMultipoint=function(I,C,t,l,d){null!=t&&(C.points=A(I,t.points,l,d));return C};e.unquantizePaths=k;e.unquantizePoint=function(I,C,t,l,d){if(null==t)return C;C.x=z(I,t.x);C.y=D(I,t.y);C!==t&&(l&&(C.z=t.z),d&&(C.m=t.m));return C};e.unquantizePoints=A;e.unquantizePolygon=function(I,C,t,l,d){null!=t&&(C.rings=E(I,t.rings,l,d));return C};e.unquantizePolyline=function(I,C,t,l,d){null!=t&&(C.paths=k(I,t.paths,l,d));return C};e.unquantizeRings=E;e.unquantizeX=z;e.unquantizeY=D;Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(e,f,q,g,p){function m(v,H,z,D){let {color:x,ratio:u}=H,{color:A,ratio:k}=z;k===u&&(1===k?u-=1E-6:k+=1E-6);H=f.clamp((D-u)/(k-u),0,1);g.lerp(v,x.toArray(),A.toArray(),H)}e.createValueFunction=function(v){return"function"===typeof v?v:v?H=>+H[v]:()=>1};e.evaluateDensityKernel=
function(v,H,z){v=Math.sqrt(v**2+H**2)/z;return 1<v?0:3/(Math.PI*z**2)*(1-v**2)**2};e.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(v){return q.px2pt(2.4*v)};e.generateGradient=function(v){const H=new Uint8ClampedArray(2048);v=v.filter(({ratio:A})=>0<=A&&1>=A).sort((A,k)=>A.ratio-k.ratio).map(({color:A,ratio:k})=>({color:A,ratio:Math.max(k,.001)}));if(1>v.length)return H;let z=v[0],D=v[0],x=1;const u=p.create();for(let A=0;512>A;A++){const k=(A+.5)/512;for(;k>D.ratio&&x<v.length;)z=D,D=v[x++];
m(u,z,D,k);H.set(u,4*A)}return H};e.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(v){return q.pt2px(v)/2.4};e.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),function(e,f,q,g,p,m){function v(k){return String(k).padStart(2,"0")}function H(k,
E,M){if("date"===E||"number"===E){"number"===E&&(k=new Date(k));E=M?k.getFullYear():k.getUTCFullYear();const B=v((M?k.getMonth():k.getUTCMonth())+1),F=v(M?k.getDate():k.getUTCDate()),P=v(M?k.getHours():k.getUTCHours()),V=v(M?k.getMinutes():k.getUTCMinutes());k=v(M?k.getSeconds():k.getUTCSeconds());k=`TIMESTAMP'${E}-${B}-${F} ${P}:${V}:${k}'`}return k}function z(k,E){if(E instanceof Date)return"date";if("number"===typeof E)return"number";if("string"===typeof E&&(k=k.getField(E),"\x3cnow\x3e"!==E.toLowerCase()&&
q.isDateField(k)))return"field"}const D={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},x={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},u=new Set(["integer","small-integer"]);let A=null;e.castIntegerFieldToFloat=function(k){return`cast(${k} as float)`};e.dateTypes=
["date","date-only","timestamp-offset"];e.defaultBasemapGroups=D;e.fieldDelimiter=",";e.formatAnyDate=function(k,E){const {format:M,timeZoneOptions:B,fieldType:F}=E??{};let P;B&&({timeZone:V,timeZoneName:P}=m.getTimeZoneFormattingOptions(B.layerTimeZone,B.datesInUnknownTimezone,B.viewTimeZone,f.convertDateFormatToIntlOptions(M||"short-date-short-time"),F));if("string"===typeof k&&isNaN(Date.parse("time-only"===F?`1970-01-01T${k}Z`:k)))return k;switch(F){case "date-only":var V=f.convertDateFormatToIntlOptions(M||
"short-date");return"string"===typeof k?f.formatDateOnly(k,{...V}):f.formatDate(k,{...V,timeZone:m.utc});case "time-only":return V=f.convertDateFormatToIntlOptions(M||"short-time"),"string"===typeof k?f.formatTimeOnly(k,V):f.formatDate(k,{...V,timeZone:m.utc});case "timestamp-offset":if(!V&&"string"===typeof k&&(new Date(k)).toISOString()!==k)return k;V=(E=M||B?f.convertDateFormatToIntlOptions(M||"short-date-short-time"):void 0)?{...E,timeZone:V,timeZoneName:P}:void 0;return"string"===typeof k?f.formatTimestamp(k,
V):f.formatDate(k,V);default:return E=M||B?f.convertDateFormatToIntlOptions(M||"short-date-short-time"):void 0,f.formatDate("string"===typeof k?new Date(k):k,E?{...E,timeZone:V,timeZoneName:P}:void 0)}};e.getBasemapGroup=function(k,E=D){for(const M in E)if(E[M].includes(k))return M};e.getBasemapId=function(k,E,M=!0){let B=null;k&&("string"===typeof k?E.includes(k)&&(B=k):B=p.getWellKnownBasemapId(k));return M?B||"gray":B};e.getDateDiffSQL=function(k,E,M,B){const {hasQueryEngine:F}=k;M=H(M,z(k,M),
F);k=H(E,z(k,E),F);k=`(${M} - ${k})`;B=x[B];E="/";1>B&&(B=1/B,E="*");return{sqlExpression:1===B?k:`(${k} ${E} ${B})`,sqlWhere:null}};e.getDateType=z;e.getFieldsList=async function(k){const {field:E,field2:M,field3:B,normalizationField:F,valueExpression:P}=k;k=[];P&&(A||({arcadeUtils:k}=await g.loadArcade(),A=k),k=A.extractFieldNames(P));E&&k.push(E);M&&k.push(M);B&&k.push(B);F&&k.push(F);return k};e.getNormalizationType=function(k){let E=k.normalizationType;E||(k.normalizationField?E="field":null!=
k.normalizationTotal&&(E="percent-of-total"));return E??void 0};e.isAnyDateField=function(k){return q.isDateField(k)||q.isDateOnlyField(k)||q.isTimestampOffsetField(k)};e.isIntegerField=function(k,E){k=E&&k.getField(E);return!!k&&u.has(k.type)};e.unitValueInDays=x;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(e,f,q,g,p,m,v,H,z,D){function x(l,d){let h;if("string"===typeof l){const y=l in D.esriBasemapDefinitions,G=!y&&l.includes("/");if(!y&&!G)return d=Object.entries(D.esriBasemapDefinitions).filter(([,T])=>q.apiKey&&!T.classic||!q.apiKey&&(T.classic||T.is3d)).map(([T])=>`"${T}"`).sort().join(", "),p.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${l}. Try one of these: ${d}`),null;d&&(h=d[l]);h||(h=y?f.fromId(l):new f({style:{id:l}}),d&&(d[l]=h))}else h=H.ensureType(f,
l);h?.destroyed&&(p.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:h}),h=null);return h}function u(l){if(C)return C(l);let d=null;l=M(l);const h=!l?.baseLayers.length;for(const G in D.esriBasemapDefinitions){var y=V(D.esriBasemapDefinitions[G]);y=w(l,y,{mustMatchReferences:h});if("equal"===y){d=G;break}"base-layers-equal"===y&&(d=G)}return d}function A(l,d){const h=new g;l.forEach(y=>{const G=d.find(T=>"scene"!==T.type&&L(F(y),F(T)))||y;h.includes(G)?
h.push(y):h.push(G)});return h}function k(l){if(E(l.url))return!0;if("vector-tile"===l.type)for(const d in l.sourceNameToSource)if(E(l.sourceNameToSource[d]?.sourceUrl))return!0;return!1}function E(l){if(!l)return!1;l=new v.Url(v.makeAbsolute(l));return!!l.authority&&t.test(l.authority)}function M(l){return l?!l.loaded&&l.resourceInfo?V(l.resourceInfo.data):{baseLayers:B(l.baseLayers),referenceLayers:B(l.referenceLayers)}:null}function B(l){return(g.isCollection(l)?l.toArray():l).map(F)}function F(l){return{type:l.type,
effect:"effect"in l?l.effect:void 0,url:Z("urlTemplate"in l&&l.urlTemplate||l.url||"styleUrl"in l&&l.styleUrl||""),minScale:"minScale"in l&&null!=l.minScale?l.minScale:0,maxScale:"maxScale"in l&&null!=l.maxScale?l.maxScale:0,opacity:null!=l.opacity?l.opacity:1,visible:null!=l.visible?!!l.visible:!0,sublayers:"map-image"!==l.type&&"wms"!==l.type||null==l.sublayers?void 0:l.sublayers?.map(d=>({id:d.id,visible:d.visible})),activeLayerId:"wmts"===l.type?l.activeLayer?.id:void 0}}function P(l){return l.isReference||
"ArcGISSceneServiceLayer"===l.layerType}function V(l){return l?{baseLayers:b((l.baseMapLayers??[]).filter(d=>!P(d))),referenceLayers:b((l.baseMapLayers??[]).filter(d=>P(d)))}:null}function b(l){return l.map(d=>{let h;switch(d.layerType){case "VectorTileLayer":h="vector-tile";break;case "ArcGISTiledMapServiceLayer":h="tile";break;case "ArcGISSceneServiceLayer":h="scene";break;default:h="unknown"}return{type:h,effect:d.effect,url:Z(d.templateUrl||d.urlTemplate||d.styleUrl||d.url),minScale:d.minScale??
0,maxScale:d.maxScale??0,opacity:d.opacity??1,visible:null!=d.visibility?!!d.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function w(l,d,h){return null!=l!==(null!=d)?"not-equal":l&&d?J(l.baseLayers,d.baseLayers)?J(l.referenceLayers,d.referenceLayers)?"equal":h.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function J(l,d){if(l.length!==d.length)return!1;for(let h=0;h<l.length;h++)if(!L(l[h],d[h]))return!1;return!0}function L(l,d){if(l.type!==d.type||l.url!==d.url||
l.minScale!==d.minScale||l.maxScale!==d.maxScale||l.visible!==d.visible||l.opacity!==d.opacity||!z.effectEquals(l.effect,d.effect))return!1;if(null!=l.activeLayerId||null!=d.activeLayerId)return l.activeLayerId===d.activeLayerId;if(null!=l.sublayers||null!=d.sublayers){if(null==l.sublayers||null==d.sublayers||l.sublayers.length!==d.sublayers.length)return!1;for(let h=0;h<l.sublayers.length;h++){const y=l.sublayers.at(h),G=d.sublayers.at(h);if(y?.id!==G?.id||y?.visible!==G?.visible)return!1}}return!0}
function Z(l){return l?v.normalize(l).replace(/^\s*https?:/i,"").toLowerCase():""}function I(l){return"portalItem"in l?l.portalItem?.thumbnailUrl:void 0}let C;const t=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;e.clonePreservingTiledLayers=function(l,d=null){l=x(l);if(!l)return null;l=l.clone();d&&(l.baseLayers=A(l.baseLayers,d.baseLayers),l.referenceLayers=A(l.referenceLayers,d.referenceLayers));return l};e.contentEquals=function(l,d){if(l===d||null!=l?.portalItem?.id&&l.portalItem.id===d?.portalItem?.id)return!0;
l=M(l);d=M(d);return"equal"===w(l,d,{mustMatchReferences:!0})};e.createCache=function(){return{}};e.destroyCache=function(l){for(const d in l)m.destroyMaybe(l[d]),delete l[d]};e.ensureType=x;e.findSpatialReference=function(l,d){if(null==d||null==l)return{spatialReference:null,updating:!1};if("not-loaded"===d.loadStatus)return d.load(),{spatialReference:null,updating:!0};if(d.spatialReference)return{spatialReference:d.spatialReference,updating:!1};if(0===d.baseLayers.length)return{spatialReference:null,
updating:!1};d=d.baseLayers.at(0);switch(d.loadStatus){case "not-loaded":d.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}d=(("supportedSpatialReferences"in d?d.supportedSpatialReferences:null)||["tileInfo"in d?d.tileInfo?.spatialReference:d.spatialReference]).filter(Boolean);const h=l.spatialReference;return h?{spatialReference:d.find(y=>h.equals(y))??d[0]??null,updating:!1}:{spatialReference:d[0],updating:!1}};e.getBasemapThumbnailUrl=
function(l){if(!l)return null;var {thumbnailUrl:d}=l;return d?d:(d=u(l))?D.esriBasemapDefinitions[d].thumbnailUrl:m.mappedFind(l.baseLayers,I)};e.getWellKnownBasemapId=u;e.hasDeveloperBasemapLayer=function(l){return!!l?.baseLayers.concat(l.referenceLayers).some(k)};e.isBasemap3D=function(l){return"Web Scene"===l.portalItem?.type||l.referenceLayers.some(d=>"scene"===d.type)};e.isBasemapInBeta=function(l){return!!l?.portalItem?.tags?.some(d=>"beta"===d.toLowerCase())};e.isBasemapLayer=function(l,d){return l.basemap?.referenceLayers?.some(h=>
h.uid===d)||l.basemap?.baseLayers?.some(h=>h.uid===d)};e.isDeveloperBasemapLayer=k;e.overrideGetWellKnownBasemapId=function(l){C=l};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(e,f,q,g,p,m,v,H,z,D,x,u,A,k,E,M,B,F,P,V,b,w,J){var L;let Z=0;m=L=class extends m.JSONSupportMixin(H){constructor(t){super(t);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+Z++;this.baseLayers=new g;this.referenceLayers=new g;const l=d=>{d.parent&&d.parent!==this&&"remove"in d.parent&&d.parent.remove(d);d.parent=this;"elevation"===d.type&&D.getLogger(this).error(`Layer '${d.title}, id:${d.id}' of type '${d.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",d=>l(d.item)),this.referenceLayers.on("after-add",d=>l(d.item)),this.baseLayers.on("after-remove",d=>{d.item.parent=null}),this.referenceLayers.on("after-remove",d=>{d.item.parent=null})])}initialize(){this.when().catch(t=>{D.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var t=this.baseLayers.toArray();for(const l of t)l.destroy();
t=this.referenceLayers.toArray();for(const l of t)l.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=x.destroyMaybe(this.portalItem)}normalizeCtorArgs(t){t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),t={...t},delete t.resourceInfo);return t}set baseLayers(t){this._set("baseLayers",p.referenceSetter(t,this._get("baseLayers")))}_writeBaseLayers(t,l,d){const h=[];t&&(d={...d,layerContainerType:"basemap"},this.baseLayers.forEach(y=>{y=J.getLayerJSON(y,
d.webmap?d.webmap.getLayerJSONFromResourceInfo(y):null,d);null!=y&&h.push(y)}),this.referenceLayers.forEach(y=>{const G=J.getLayerJSON(y,d.webmap?d.webmap.getLayerJSONFromResourceInfo(y):null,d);null!=G&&("scene"!==y.type&&(G.isReference=!0),h.push(G))}));l.baseMapLayers=h}set referenceLayers(t){this._set("referenceLayers",p.referenceSetter(t,this._get("referenceLayers")))}writeTitle(t,l){l.title=t||"Basemap"}load(t){this.addResolvingPromise(this._loadFromSource(t));return Promise.resolve(this)}loadAll(){return z.loadAll(this,
t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(l=>v.isClonable(l)?l.clone():l),referenceLayers:this.referenceLayers.map(l=>v.isClonable(l)?l.clone():l)};this.loaded&&(t.loadStatus="loaded");return(new L({resourceInfo:this.resourceInfo})).set(t)}read(t,l){this.resourceInfo||this._set("resourceInfo",{data:t,context:l});super.read(t,l)}write(t,l){t=t||{};l?.origin||(l={origin:"web-map",...l});super.write(t,
l);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(d=>{d=v.clone(d);d.url&&A.isProtocolRelative(d.url)&&(d.url=`https:${d.url}`);d.templateUrl&&A.isProtocolRelative(d.templateUrl)&&(d.templateUrl=`https:${d.templateUrl}`);return d}));return t}async _loadFromSource(t){const {resourceInfo:l,portalItem:d,style:h}=this;u.throwIfAborted(t);const y=[];l?(y.push(this._loadLayersFromJSON(l.data,l.context?l.context.url:null,t)),l.data.id&&!l.data.title&&
y.push(b.getBasemapTitle(l.data.id).then(G=>{G&&this.read({title:G},l.context)}))):d?y.push(this._loadFromItem(d,t)):h&&y.push(this._loadFromStylesService(h,t));await Promise.all(y)}async _loadLayersFromJSON(t,l,d){const h=this.resourceInfo?.context,y=this.portalItem?.portal||h?.portal||null,G=C[h?.origin||""]??"web-map",{populateOperationalLayers:T}=await new Promise((Y,ca)=>e(["./layers/support/layersCreator"],Y,ca)),W=[];u.throwIfAborted(d);if(t.baseMapLayers&&Array.isArray(t.baseMapLayers)){l=
{context:{...h,origin:G,url:l,portal:y,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const Y=ca=>"web-scene"===G&&"ArcGISSceneServiceLayer"===ca.layerType||ca.isReference;d=T(this.baseLayers,t.baseMapLayers.filter(ca=>!Y(ca)),l);W.push(d);t=T(this.referenceLayers,t.baseMapLayers.filter(Y),l);W.push(t)}await Promise.allSettled(W)}async _loadFromItem(t,l){const d=await (await t.load(l)).fetchData("json",l),h=A.urlToObject(t.itemUrl??"");this._set("resourceInfo",{data:d.baseMap??
{},context:{origin:I[t.type||""]??"web-map",portal:t.portal||P.getDefault(),url:h}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:d.spatialReference},this.resourceInfo.context);this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||P.getDefault(),url:h});return this._loadLayersFromJSON(this.resourceInfo.data,h,l)}async _loadFromStylesService(t,l){var d=`${t.serviceUrl}/${t.id}`;t=(await q(d,{query:{language:t.getLanguageParamValue(),
places:t.places,worldview:t.worldview},signal:l?.signal})).data;d=A.urlToObject(d);this._set("resourceInfo",{data:t.baseMap??{},context:{origin:"web-map",url:d}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:t.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,d,l)}static fromId(t){return(t=b.esriBasemapDefinitions[t])?t.itemId?new L({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):L.fromJSON(t,
{origin:t.is3d?"web-scene":"web-map"}):null}};f.__decorate([k.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,l,d,h){this._writeBaseLayers(t,l,h)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:g}},writer(t,l,d,h){this._writeBaseLayers(t,l,h)}}}}}})],m.prototype,"baseLayers",null);f.__decorate([k.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],m.prototype,"id",void 0);f.__decorate([k.property({type:V})],m.prototype,"portalItem",void 0);
f.__decorate([k.property()],m.prototype,"referenceLayers",null);f.__decorate([k.property({readOnly:!0})],m.prototype,"resourceInfo",void 0);f.__decorate([k.property({type:F})],m.prototype,"spatialReference",void 0);f.__decorate([k.property({type:w})],m.prototype,"style",void 0);f.__decorate([k.property()],m.prototype,"thumbnailUrl",void 0);f.__decorate([k.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],m.prototype,"title",void 0);f.__decorate([B.writer("title")],m.prototype,
"writeTitle",null);m=L=f.__decorate([M.subclass("esri.Basemap")],m);const I={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},C={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return m})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(e,f){e.castForReferenceSetter=function(q){return q};e.referenceSetter=function(q,g,p=f){g||=new p;if(g===q)return g;g.removeAll();q&&(Array.isArray(q)||"items"in q&&Array.isArray(q.items))?
g.addMany(q):q&&g.add(q);return g};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(e,f,q,g,p,m,v,H){const z=D=>{D=class extends D{constructor(...x){super(...x);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(u=>
{const A=this.load.bind(this);this.load=k=>{const E=new Promise((M,B)=>{const F=p.onAbortOrThrow(k,B);this.destroyed&&B(new f("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(M,B).finally(()=>{F&&F.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const M=this._loadController=new AbortController;A({signal:M.signal})}u();return E}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},u=>{this._set("loadStatus","failed");this._set("loadError",u);this._loadController=null})}destroy(){this._loadController&&(this._loadController=q.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new f("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};e.__decorate([v.property({readOnly:!0})],D.prototype,"loaded",null);e.__decorate([v.property({readOnly:!0})],D.prototype,"loadError",void 0);e.__decorate([v.property({clonable:!1})],D.prototype,"loadStatus",void 0);e.__decorate([v.property({type:[m],readOnly:!0})],D.prototype,"loadWarnings",null);return D=e.__decorate([H.subclass("esri.core.Loadable")],D)};g=class extends z(g.EsriPromise){};g=e.__decorate([H.subclass("esri.core.Loadable")],
g);(function(D){D.LoadableMixin=z;D.isLoadable=function(x){return!(!x||!x.load)}})(g||={});return g})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(e,f,q,g,p){var m;(function(z){z[z.PENDING=0]="PENDING";z[z.RESOLVED=1]="RESOLVED";z[z.REJECTED=2]="REJECTED"})(m||={});class v{constructor(){this._resolver=g.createResolver();this._status=m.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=m.RESOLVED;this._cleanUp()},()=>{this._status=m.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(z){this._resolvingPromises.push(z);this._tryResolve()}isResolved(){return this._status===m.RESOLVED}isRejected(){return this._status===m.REJECTED}isFulfilled(){return this._status!==m.PENDING}abort(){this._resolver.reject(g.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var z=
g.createResolver(),D=[...this._resolvingPromises,z.promise],x=this._allPromise=Promise.all(D);x.then(()=>{this.isFulfilled()||this._allPromise!==x||this._resolver.resolve()},u=>{this.isFulfilled()||this._allPromise!==x||g.isAbortError(u)||this._resolver.reject(u)});z.resolve()}}}const H=z=>{z=class extends z{constructor(...D){super(...D);this._promiseProps=new v;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(D,
x){return this._promiseProps.promise.then(()=>this).then(D,x)}catch(D){return this.when(null,D)}addResolvingPromise(D){D&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in D?D.when():D)}};return z=f.__decorate([p.subclass("esri.core.Promise")],z)};e.EsriPromise=class extends H(q){};e.EsriPromise=f.__decorate([p.subclass("esri.core.Promise")],e.EsriPromise);e.EsriPromiseMixin=H;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(e,f,q,g){async function p(m,v){const H=[],z=(...x)=>{for(const u of x)null!=u&&(Array.isArray(u)?z(...u):q.isCollection(u)?u.forEach(A=>z(A)):g.isLoadable(u)&&H.push(u))};v(z);let D=null;await f.map(H,async x=>{x=await f.result("loadAll"in x&&"function"===typeof x.loadAll?x.loadAll():x.load());!1!==x.ok||D||(D=x)});if(D)throw D.error;return m}e.loadAll=async function(m,v){await m.load();return p(m,v)};e.loadAllChildren=p;Object.defineProperty(e,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(e,f,q,g,p,m,v,H,z,D,x,u,A,k,E,M,B,F,P,V,b,w,J,L){function Z(h){const y=g.id;return()=>{const G=h.deref();G&&y.findCredential(G.restUrl)&&G.signIn().catch(()=>{})}}const I=h=>Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"}));var C;let t;const l={PortalGroup:()=>Promise.resolve({default:V}),PortalItem:()=>new Promise((h,y)=>e(["./PortalItem"],G=>h(I(G)),y)),PortalUser:()=>Promise.resolve({default:J})};v=C=class extends v.JSONSupportMixin(H){constructor(h){super(h);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=
this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=q.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(h){return"string"===typeof h?{url:h}:h}destroy(){d.unregister(this);
this.defaultBasemap=z.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=z.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=z.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=z.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(h){if(h)for(const y of h)q.request.trustedServers.includes(y)||q.request.trustedServers.push(y);return h}readDefaultBasemap(h){return this._readBasemap(h)}readDefaultDevBasemap(h){return this._readBasemap(h)}readDefaultVectorBasemap(h){return this._readBasemap(h)}get extraQuery(){const h=
!this.user?.orgId||this.canSearchPublic;return this.id&&!h?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let h=this.url;if(h){const y=h.indexOf("/sharing");h=0<y?h.substring(0,y):this.url.replace(/\/+$/,"");h+="/sharing/rest"}return h}get thumbnailUrl(){const h=this.restUrl,y=this.thumbnail;return h&&y?this._normalizeSSL(h+"/portals/self/resources/"+y):null}readUrlKey(h){return h?h.toLowerCase():
h}readUser(h){let y=null;h&&(y=J.fromJSON(h),y.portal=this);return y}load(h){const y=(new Promise((G,T)=>e(["../Basemap"],W=>G(I(W)),T))).then(({default:G})=>{D.throwIfAborted(h);t=G}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,h)).then(G=>{if(g.id){const T=g.id;this.credential=T.findCredential(this.restUrl);this.credential||this.authMode!==C.AUTH_MODE_AUTO&&this.authMode!==C.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
T.on("credential-create",Z(new WeakRef(this))),d.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=G;this.read(G)});this.addResolvingPromise(y);return Promise.resolve(this)}async createElevationLayers(){await this.load();const h=this._getHelperService("defaultElevationLayers"),y=(await new Promise((G,T)=>e(["../layers/ElevationLayer"],W=>G(I(W)),T))).default;return h?h.map(G=>new y({id:G.id,url:G.url})):[]}async fetchBasemaps(h,y){const G=await this._fetchBasemaps(h,y);!0===
y?.include3d&&!1!==this.use3dBasemaps&&(h=await this._fetchBasemaps3D(h,y),G.unshift(...h));return G}fetchCategorySchema(h){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",h).then(y=>y.categorySchema):D.isAborted(h)?Promise.reject(D.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(h){const y=this.featuredGroups,G=new b;G.num=100;G.sortField="title";if(y&&y.length){const T=[];for(const W of y)T.push(`(title:"${W.title}" AND owner:${W.owner})`);G.query=
T.join(" OR ");return this.queryGroups(G,h).then(W=>W.results)}return D.isAborted(h)?Promise.reject(D.createAbortError()):Promise.resolve([])}fetchRegions(h){const y=this.user?.culture||this.culture||F.getLocale();return this.request(this.restUrl+"/portals/regions",{...h,query:{culture:y}})}fetchSettings(h){const y=this.user?.culture||this.culture||F.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...h,query:{culture:y}})}static getDefault(){return P.ensureDefaultPortalInstance(()=>
new C)}queryGroups(h,y){return this.queryPortal("/community/groups",h,"PortalGroup",y)}queryItems(h,y){return this.queryPortal("/search",h,"PortalItem",y)}queryUsers(h,y){h.sortField||(h.sortField="username");return this.queryPortal("/community/users",h,"PortalUser",y)}fetchSelf(h=this.authMode,y=!1,G){const T=this.restUrl+"/portals/self";h={authMode:h,query:{culture:F.getLocale().toLowerCase()},withCredentials:!0,...G};"auto"===h.authMode&&(h.authMode="no-prompt");y&&(h.query.default=!0);return this.request(T,
h)}queryPortal(h,y,G,T){const W=u.ensureType(b,y),Y=ca=>this.request(this.restUrl+h,{...W.toRequestOptions(this),...T}).then(da=>{const na=W.clone();na.start=da.nextStart;return new w({nextQueryParams:na,queryParams:W,total:da.total,results:C._resultsToTypedArray(ca,{portal:this},da,T)})}).then(da=>Promise.all(da.results.map(na=>"function"===typeof na.when?na.when():da)).then(()=>da,na=>{D.throwIfAbortError(na);return da}));return G&&l[G]?l[G]().then(({default:ca})=>{D.throwIfAborted(T);return Y(ca)}):
Y()}signIn(){if(this.authMode===C.AUTH_MODE_ANONYMOUS||this.authMode===C.AUTH_MODE_NO_PROMPT&&!g.id)return Promise.reject(new m("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const h=y=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return y||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
y;return this.fetchSelf("immediate")});if(this.user&&this.credential===y)return null;this.credential=y;return this.fetchSelf("immediate")}).then(G=>{G&&(this.sourceJSON=G,this.read(G))});return g.id?g.id.getCredential(this.restUrl,{prompt:this.authMode!==C.AUTH_MODE_NO_PROMPT}).then(y=>h(y)):h(this.credential)}normalizeUrl(h){const y=this.credential?.token;return this._normalizeSSL(y?h+(h.includes("?")?"\x26":"?")+"token\x3d"+y:h)}requestToTypedArray(h,y,G){return this.request(h,y).then(T=>{const W=
C._resultsToTypedArray(G,{portal:this},T);return Promise.all(W.map(Y=>"function"===typeof Y.when?Y.when():T)).then(()=>W,()=>W)})}request(h,y={}){var G={f:"json",...y.query};const {authMode:T=this.authMode===C.AUTH_MODE_ANONYMOUS||this.authMode===C.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:W=null,cacheBust:Y=!1,method:ca="auto",responseType:da="json",signal:na}=y;G={authMode:T,body:W,cacheBust:Y,method:ca,query:G,responseType:da,timeout:0,signal:na};y.withCredentials&&(G.withCredentials=!0);return p(this._normalizeSSL(h),
G).then(oa=>oa.data)}toJSON(){throw new m("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(h){if(!h)return null;if(h.declaredClass)throw Error("JSON object is already hydrated");return new C({sourceJSON:h})}_getHelperService(h){const y=this.helperServices&&this.helperServices[h];if(!y)throw new m("portal:service-not-found",`The \`helperServices\` do not include an entry named "${h}"`);return y}async _fetchBasemaps(h,y){const G=new b;G.query=h||(q.apiKey&&L.supportsApiKey(this.url)?
this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);G.disableExtraQuery=!0;h=await this.queryGroups(G,y);if(!h.total)return[];h=h.results[0];G.num=100;G.query='type:"Web Map" -type:"Web Application"';G.sortField=h.sortField||"name";G.sortOrder=h.sortOrder||"desc";y=await h.queryItems(G,y);return y.total?y.results.filter(T=>"Web Map"===T.type).map(T=>new t({portalItem:T})):[]}async _fetchBasemaps3D(h,y){h=h||this.basemapGalleryGroupQuery3D;
if(!h)return[];h=new b({query:h,disableExtraQuery:!0});var G=await this.queryGroups(h,y);if(!G.total)return[];G=G.results[0];h.num=100;h.query='type:"Web Scene"';h.sortField=G.sortField||"name";h.sortOrder=G.sortOrder||"desc";y=await G.queryItems(h,y);return y.total?y.results.filter(T=>"Web Scene"===T.type).map(T=>new t({portalItem:T})):[]}_normalizeSSL(h){return h.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(h){return h?(h=t.fromJSON(h),h.portalItem={portal:this},h):null}static _resultsToTypedArray(h,
y,G,T){let W=[];if(G){const Y=null!=T?T.signal:null;W=G.listings||G.notifications||G.userInvitations||G.tags||G.items||G.groups||G.comments||G.provisions||G.results||G.relatedItems||G;if(h||y)W=W.map(ca=>{ca=Object.assign(h?h.fromJSON(ca):ca,y);"function"===typeof ca.load&&ca.load(Y);return ca})}else W=[];return W}};v.AUTH_MODE_ANONYMOUS="anonymous";v.AUTH_MODE_AUTO="auto";v.AUTH_MODE_IMMEDIATE="immediate";v.AUTH_MODE_NO_PROMPT="no-prompt";f.__decorate([x.property()],v.prototype,"access",void 0);
f.__decorate([x.property()],v.prototype,"allSSL",void 0);f.__decorate([x.property()],v.prototype,"authMode",void 0);f.__decorate([x.property()],v.prototype,"authorizedCrossOriginDomains",void 0);f.__decorate([E.reader("authorizedCrossOriginDomains")],v.prototype,"readAuthorizedCrossOriginDomains",null);f.__decorate([x.property()],v.prototype,"basemapGalleryGroupQuery",void 0);f.__decorate([x.property({json:{name:"3DBasemapGalleryGroupQuery"}})],v.prototype,"basemapGalleryGroupQuery3D",void 0);f.__decorate([x.property()],
v.prototype,"bingKey",void 0);f.__decorate([x.property()],v.prototype,"canListApps",void 0);f.__decorate([x.property()],v.prototype,"canListData",void 0);f.__decorate([x.property()],v.prototype,"canListPreProvisionedItems",void 0);f.__decorate([x.property()],v.prototype,"canProvisionDirectPurchase",void 0);f.__decorate([x.property()],v.prototype,"canSearchPublic",void 0);f.__decorate([x.property()],v.prototype,"canShareBingPublic",void 0);f.__decorate([x.property()],v.prototype,"canSharePublic",void 0);
f.__decorate([x.property()],v.prototype,"canSignInArcGIS",void 0);f.__decorate([x.property()],v.prototype,"canSignInIDP",void 0);f.__decorate([x.property()],v.prototype,"colorSetsGroupQuery",void 0);f.__decorate([x.property()],v.prototype,"commentsEnabled",void 0);f.__decorate([x.property({type:Date})],v.prototype,"created",void 0);f.__decorate([x.property()],v.prototype,"credential",void 0);f.__decorate([x.property()],v.prototype,"culture",void 0);f.__decorate([x.property()],v.prototype,"currentVersion",
void 0);f.__decorate([x.property()],v.prototype,"customBaseUrl",void 0);f.__decorate([x.property()],v.prototype,"defaultBasemap",void 0);f.__decorate([E.reader("defaultBasemap")],v.prototype,"readDefaultBasemap",null);f.__decorate([x.property()],v.prototype,"defaultDevBasemap",void 0);f.__decorate([E.reader("defaultDevBasemap")],v.prototype,"readDefaultDevBasemap",null);f.__decorate([x.property({type:B})],v.prototype,"defaultExtent",void 0);f.__decorate([x.property()],v.prototype,"defaultVectorBasemap",
void 0);f.__decorate([E.reader("defaultVectorBasemap")],v.prototype,"readDefaultVectorBasemap",null);f.__decorate([x.property()],v.prototype,"description",void 0);f.__decorate([x.property()],v.prototype,"devBasemapGalleryGroupQuery",void 0);f.__decorate([x.property()],v.prototype,"eueiEnabled",void 0);f.__decorate([x.property({readOnly:!0})],v.prototype,"extraQuery",null);f.__decorate([x.property()],v.prototype,"featuredGroups",void 0);f.__decorate([x.property()],v.prototype,"featuredItemsGroupQuery",
void 0);f.__decorate([x.property()],v.prototype,"galleryTemplatesGroupQuery",void 0);f.__decorate([x.property()],v.prototype,"livingAtlasGroupQuery",void 0);f.__decorate([x.property()],v.prototype,"hasCategorySchema",void 0);f.__decorate([x.property()],v.prototype,"helpBase",void 0);f.__decorate([x.property()],v.prototype,"helperServices",void 0);f.__decorate([x.property()],v.prototype,"helpMap",void 0);f.__decorate([x.property()],v.prototype,"homePageFeaturedContent",void 0);f.__decorate([x.property()],
v.prototype,"homePageFeaturedContentCount",void 0);f.__decorate([x.property()],v.prototype,"httpPort",void 0);f.__decorate([x.property()],v.prototype,"httpsPort",void 0);f.__decorate([x.property()],v.prototype,"id",void 0);f.__decorate([x.property()],v.prototype,"ipCntryCode",void 0);f.__decorate([x.property({readOnly:!0})],v.prototype,"isOrganization",null);f.__decorate([x.property()],v.prototype,"isPortal",void 0);f.__decorate([x.property()],v.prototype,"isReadOnly",void 0);f.__decorate([x.property({readOnly:!0})],
v.prototype,"itemPageUrl",null);f.__decorate([x.property()],v.prototype,"layerTemplatesGroupQuery",void 0);f.__decorate([x.property()],v.prototype,"maxTokenExpirationMinutes",void 0);f.__decorate([x.property({type:Date})],v.prototype,"modified",void 0);f.__decorate([x.property()],v.prototype,"name",void 0);f.__decorate([x.property()],v.prototype,"portalHostname",void 0);f.__decorate([x.property()],v.prototype,"portalMode",void 0);f.__decorate([x.property()],v.prototype,"portalProperties",void 0);
f.__decorate([x.property()],v.prototype,"region",void 0);f.__decorate([x.property({readOnly:!0})],v.prototype,"restUrl",null);f.__decorate([x.property()],v.prototype,"rotatorPanels",void 0);f.__decorate([x.property()],v.prototype,"showHomePageDescription",void 0);f.__decorate([x.property()],v.prototype,"sourceJSON",void 0);f.__decorate([x.property()],v.prototype,"staticImagesUrl",void 0);f.__decorate([x.property({json:{name:"2DStylesGroupQuery"}})],v.prototype,"stylesGroupQuery2d",void 0);f.__decorate([x.property({json:{name:"stylesGroupQuery"}})],
v.prototype,"stylesGroupQuery3d",void 0);f.__decorate([x.property()],v.prototype,"supportsHostedServices",void 0);f.__decorate([x.property()],v.prototype,"symbolSetsGroupQuery",void 0);f.__decorate([x.property()],v.prototype,"templatesGroupQuery",void 0);f.__decorate([x.property()],v.prototype,"thumbnail",void 0);f.__decorate([x.property({readOnly:!0})],v.prototype,"thumbnailUrl",null);f.__decorate([x.property()],v.prototype,"units",void 0);f.__decorate([x.property()],v.prototype,"url",void 0);f.__decorate([x.property()],
v.prototype,"urlKey",void 0);f.__decorate([E.reader("urlKey")],v.prototype,"readUrlKey",null);f.__decorate([x.property()],v.prototype,"user",void 0);f.__decorate([E.reader("user")],v.prototype,"readUser",null);f.__decorate([x.property()],v.prototype,"use3dBasemaps",void 0);f.__decorate([x.property()],v.prototype,"useStandardizedQuery",void 0);f.__decorate([x.property()],v.prototype,"useVectorBasemaps",void 0);f.__decorate([x.property()],v.prototype,"vectorBasemapGalleryGroupQuery",void 0);f=v=C=f.__decorate([M.subclass("esri.portal.Portal")],
v);const d=new FinalizationRegistry(h=>{h.remove()});return f})},"esri/portal/portalDefault":function(){define(["exports"],function(e){let f;e.clearDefaultPortalInstance=function(){f=void 0};e.ensureDefaultPortalInstance=function(q){if(!f||f.destroyed)f=q();return f};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(e,f,q,g,p,m,v,H,z){var D;q=D=class extends q.JSONSupport{constructor(x){super(x);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const x=this.url,u=this.thumbnail;return x&&u&&this.portal?this.portal?.normalizeUrl(`${x}/info/${u}?f=json`):null}get url(){const x=this.portal?.restUrl;return x?x+"/community/groups/"+this.id:
null}fetchCategorySchema(x){return this.portal.request(this.url+"/categorySchema",x).then(u=>{u=u.categorySchema||[];return u.some(A=>"contentCategorySetsGroupQuery.LivingAtlas"===A.source)?this._fetchCategorySchemaSet("LivingAtlas",x):u})}fetchMembers(x){return this.portal.request(this.url+"/users",x)}getThumbnailUrl(x){let u=this.thumbnailUrl;u&&x&&(u+=`&w=${x}`);return u}toJSON(){throw new f("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(x){if(!x)return null;
if(x.declaredClass)throw Error("JSON object is already hydrated");const u=new D;u.sourceJSON=x;u.read(x);return u}queryItems(x,u){x=p.ensureType(z,x);const A=this.portal;if(5<parseFloat(A.currentVersion))return x=x||new z,A.queryPortal(`/content/groups/${this.id}/search`,x,"PortalItem",u);x=x?x.clone():new z;x.query="group:"+this.id+(x.query?" "+x.query:"");return A.queryItems(x,u)}_fetchCategorySchemaSet(x,u){const A=this.portal;return A.fetchSelf(A.authMode,!0,u).then(k=>{if(k=k.contentCategorySetsGroupQuery){const E=
new z;E.disableExtraQuery=!0;E.num=1;E.query=k;return A.queryGroups(E,u)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(k=>{if(k.total){k=k.results[0];const E=new z;E.num=1;E.query=`typekeywords:"${x}"`;return k.queryItems(E,u)}throw new f("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(k=>k.total?k.results[0].fetchData("json",u).then(E=>{E=E?.categorySchema;return E?.length?E:[]}):[])}};e.__decorate([g.property()],
q.prototype,"access",void 0);e.__decorate([g.property({type:Date})],q.prototype,"created",void 0);e.__decorate([g.property()],q.prototype,"description",void 0);e.__decorate([g.property()],q.prototype,"id",void 0);e.__decorate([g.property()],q.prototype,"isInvitationOnly",void 0);e.__decorate([g.property({type:Date})],q.prototype,"modified",void 0);e.__decorate([g.property()],q.prototype,"owner",void 0);e.__decorate([g.property()],q.prototype,"portal",void 0);e.__decorate([g.property()],q.prototype,
"snippet",void 0);e.__decorate([g.property()],q.prototype,"sortField",void 0);e.__decorate([g.property()],q.prototype,"sortOrder",void 0);e.__decorate([g.property()],q.prototype,"sourceJSON",void 0);e.__decorate([g.property()],q.prototype,"tags",void 0);e.__decorate([g.property()],q.prototype,"thumbnail",void 0);e.__decorate([g.property({readOnly:!0})],q.prototype,"thumbnailUrl",null);e.__decorate([g.property()],q.prototype,"title",void 0);e.__decorate([g.property({readOnly:!0})],q.prototype,"url",
null);return q=D=e.__decorate([H.subclass("esri.portal.PortalGroup")],q)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(e,f,q,g,p,m,v,H,z,D,x){var u;const A=new q.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});f=u=class extends f{constructor(k){super(k);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(k){"asc"!==k&&"desc"!==k||this._set("sortOrder",k)}clone(){return new u({categories:this.categories?g.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(k,E){let M=[];this.categories&&(M=this.categories.map(P=>Array.isArray(P)?JSON.stringify(P):P));let B="";if(this.extent){var F=x.project(this.extent,D.WGS84);null!=F&&(B=`${F.xmin},${F.ymin},${F.xmax},${F.ymax}`)}F=this.query;!this.disableExtraQuery&&k.extraQuery&&(F="("+F+")"+k.extraQuery);k={categories:M,bbox:B,q:F,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(k.sortField=this.sortField.split(",").map(P=>A.toJSON(P.trim())).join(","),k.sortOrder=this.sortOrder);return{query:{...E,...k}}}};e.__decorate([p.property()],f.prototype,"categories",void 0);e.__decorate([p.property()],f.prototype,"disableExtraQuery",void 0);e.__decorate([p.property({type:z})],f.prototype,"extent",void 0);e.__decorate([p.property()],f.prototype,"filter",void 0);e.__decorate([p.property()],f.prototype,"num",void 0);e.__decorate([p.property()],
f.prototype,"query",void 0);e.__decorate([p.property()],f.prototype,"sortField",void 0);e.__decorate([p.property()],f.prototype,"sortOrder",null);e.__decorate([p.property()],f.prototype,"start",void 0);return f=u=e.__decorate([H.subclass("esri.portal.PortalQueryParams")],f)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(e,f,q,g,p,m,v){f=class extends f{constructor(H){super(H);this.total=this.results=this.queryParams=this.nextQueryParams=null}};e.__decorate([q.property()],f.prototype,"nextQueryParams",void 0);e.__decorate([q.property()],f.prototype,"queryParams",void 0);e.__decorate([q.property()],f.prototype,"results",void 0);e.__decorate([q.property()],f.prototype,"total",void 0);return f=e.__decorate([v.subclass("esri.portal.PortalQueryResult")],f)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(e,f,q,g,p,m,v,H,z,D,x){var u;g=u=class extends g.JSONSupport{constructor(...A){super(...A);this.userType=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const A=this.url,k=this.thumbnail;return A&&k?this.portal.normalizeUrl(`${A}/info/${k}?f=json`):null}get userContentUrl(){const A=this.portal?.restUrl;
return A?`${A}/content/users/${this.username}`:null}get url(){const A=this.portal?.restUrl;return A?`${A}/community/users/${this.username}`:null}addItem(A){const k=A&&A.item;var E=A?.data;A=A?.folder;const M={method:"post"};k&&(M.query=k.createPostQuery(),null!=E&&("string"===typeof E?M.query.text=E:"object"===typeof E&&(M.query.text=JSON.stringify(E))));E=this.userContentUrl;A&&(E+="/"+("string"===typeof A?A:A.id));return this.portal.request(E+"/addItem",M).then(B=>{k.id=B.id;k.portal=this.portal;
return k.loaded?k.reload():k.load()})}deleteItem(A){let k=this.userContentUrl;A.ownerFolder&&(k+="/"+A.ownerFolder);return this.portal.request(k+`/items/${A.id}/delete`,{method:"post"}).then(()=>{A.id=null;A.portal=null})}deleteItems(A){const k=this.userContentUrl+"/deleteItems";var E=A.map(M=>M.id);return E.length?(E={method:"post",query:{items:E.join(",")}},this.portal.request(k,E).then(()=>{A.forEach(M=>{M.id=null;M.portal=null})})):Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??
"",{query:{num:1}}).then(A=>A&&A.folders?A.folders.map(k=>{k=D.fromJSON(k);k.portal=this.portal;return k}):[])}fetchGroups(){return this.portal.request(this.url??"").then(A=>A&&A.groups?A.groups.map(k=>{k=x.fromJSON(k);k.portal=this.portal;return k}):[])}fetchItems(A){const k=A??{};let E=this.userContentUrl??"";k.folder&&(E+="/"+k.folder.id);let M;return(new Promise((B,F)=>e(["./PortalItem"],P=>B(Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}))),
F))).then(({default:B})=>{M=B;return this.portal.request(E,{query:{folders:!1,num:k.num||10,start:k.start||1,sortField:k.sortField||"created",sortOrder:k.sortOrder||"asc"}})}).then(B=>{let F;return B?.items?(F=B.items.map(P=>{P=M.fromJSON(P);P.portal=this.portal;return P}),Promise.all(F.map(P=>P.load())).catch(P=>P).then(()=>({items:F,nextStart:B.nextStart,total:B.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(A=>A.tags)}getThumbnailUrl(A){let k=
this.thumbnailUrl;k&&A&&(k+=`&w=${A}`);return k}queryFavorites(A){return this.favGroupId?(this._favGroup||(this._favGroup=new x({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(A)):Promise.reject(new q("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new q("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(A){if(!A)return null;if(A.declaredClass)throw Error("JSON object is already hydrated");
const k=new u;k.sourceJSON=A;k.read(A);return k}};f.__decorate([p.property()],g.prototype,"access",void 0);f.__decorate([p.property({type:Date})],g.prototype,"created",void 0);f.__decorate([p.property()],g.prototype,"culture",void 0);f.__decorate([p.property()],g.prototype,"description",void 0);f.__decorate([p.property()],g.prototype,"email",void 0);f.__decorate([p.property()],g.prototype,"favGroupId",void 0);f.__decorate([p.property()],g.prototype,"fullName",void 0);f.__decorate([p.property({type:Date})],
g.prototype,"modified",void 0);f.__decorate([p.property()],g.prototype,"orgId",void 0);f.__decorate([p.property()],g.prototype,"portal",void 0);f.__decorate([p.property()],g.prototype,"preferredView",void 0);f.__decorate([p.property()],g.prototype,"privileges",void 0);f.__decorate([p.property()],g.prototype,"region",void 0);f.__decorate([p.property()],g.prototype,"role",void 0);f.__decorate([p.property()],g.prototype,"roleId",void 0);f.__decorate([p.property()],g.prototype,"sourceJSON",void 0);f.__decorate([p.property()],
g.prototype,"thumbnail",void 0);f.__decorate([p.property({readOnly:!0})],g.prototype,"thumbnailUrl",null);f.__decorate([p.property()],g.prototype,"units",void 0);f.__decorate([p.property({readOnly:!0})],g.prototype,"userContentUrl",null);f.__decorate([p.property({readOnly:!0})],g.prototype,"url",null);f.__decorate([p.property()],g.prototype,"username",void 0);f.__decorate([p.property()],g.prototype,"userType",void 0);return g=u=f.__decorate([z.subclass("esri.portal.PortalUser")],g)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(e,f,q,g,p,m,v,H){q=class extends q.JSONSupport{constructor(z){super(z);this.username=this.title=this.portal=this.id=this.created=null}get url(){const z=this.portal?.restUrl;return z?`${z}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new f("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};e.__decorate([g.property({type:Date})],q.prototype,"created",void 0);e.__decorate([g.property()],q.prototype,"id",void 0);e.__decorate([g.property()],q.prototype,
"portal",void 0);e.__decorate([g.property()],q.prototype,"title",void 0);e.__decorate([g.property({readOnly:!0})],q.prototype,"url",null);e.__decorate([g.property()],q.prototype,"username",void 0);return q=e.__decorate([H.subclass("esri.portal.PortalFolder")],q)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(e,f,q,g,p,m,v,H,z,D,x,u,A,k,E,M,B){var F;const P=new Set("Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;GeoJson;CSV;KML;WFS;WMTS;WMS;Feed".split(";")),V=new Set(["KML","GeoJson","CSV"]);p=F=class extends p.JSONSupportMixin(v){static from(b){return D.ensureClass(F,b)}constructor(b){super(b);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=this.avgRating=this.applicationProxies=
this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const b=this.type,w=this.typeKeywords||[];let J=b;"Feature Service"===b||"Feature Collection"===
b?J=w.includes("Table")?"Table":w.includes("Route Layer")?"Route Layer":w.includes("Markup")?"Markup":"Feature Layer":"Image Service"===b?J=w.includes("Elevation 3D Layer")?"Elevation Layer":w.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===b?J="Scene Layer":"Video Service"===b?J="Video Layer":"Scene Package"===b?J="Scene Layer Package":"Stream Service"===b?J="Feature Layer":"Geoprocessing Service"===b?J=w.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===
b?J="GeoEnrichment Service":"Geocoding Service"===b?J="Locator":"Microsoft Powerpoint"===b?J="Microsoft PowerPoint":"GeoJson"===b?J="GeoJSON":"Globe Service"===b?J="Globe Layer":"Vector Tile Service"===b?J="Tile Layer":"netCDF"===b?J="NetCDF":"Map Service"===b?J=w.includes("Spatiotemporal")||!w.includes("Hosted Service")&&!w.includes("Tiled")||w.includes("Relational")?"Map Image Layer":"Tile Layer":b&&b.toLowerCase().includes("add in")?J=b.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===
b?J="Big Data File Share":"Compact Tile Package"===b?J="Tile Package (tpkx)":"Raster function template"===b?J="Raster Function Template":"OGCFeatureServer"===b?J="OGC Feature Layer":"web mapping application"===b&&w.includes("configurableApp")?J="Instant App":"Insights Page"===b?J="Insights Report":"Excalibur Imagery Project"===b&&(J="Excalibur Project");return J}readExtent(b){return b&&b.length?new A(b[0][0],b[0][1],b[1][0],b[1][1]):null}get iconUrl(){var b=this.type?.toLowerCase()||"";const w=this.typeKeywords||
[];var J=!1,L=!1;let Z=!1,I=!1,C=!1,t=!1;J=L=!1;0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(J=w.includes("Hosted Service"),"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(L=w.includes("Table"),Z=w.includes("Route Layer"),I=w.includes("Markup"),C=w.includes("Spatiotemporal"),t=w.includes("UtilityNetwork"),b=C&&L?"spatiotemporaltable":L?"table":Z?"routelayer":I?"markup":C?"spatiotemporal":t?"utilitynetwork":J?"featureshosted":
"features"):"map service"===b||"wms"===b||"wmts"===b?(C=w.includes("Spatiotemporal"),L=w.includes("Relational"),b=C||L?"mapimages":J||w.includes("Tiled")||"wmts"===b?"maptiles":"mapimages"):b="scene service"===b?w.includes("Line")?"sceneweblayerline":w.includes("3DObject")?"sceneweblayermultipatch":w.includes("Point")?"sceneweblayerpoint":w.includes("IntegratedMesh")?"sceneweblayermesh":w.includes("PointCloud")?"sceneweblayerpointcloud":w.includes("Polygon")?"sceneweblayerpolygon":w.includes("Building")?
"sceneweblayerbuilding":w.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===b?w.includes("Elevation 3D Layer")?"elevationlayer":w.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"geocoding service"===b?"geocodeservice":"video service"===b?w.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===b?w.includes("Web Tool")?
"tool":"layers":"geodata service"===b?"geodataservice":"3dtiles service"===b?w.includes("3DObject")?"3dobjecttileslayer":w.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):b="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?w.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===b&&w.includes("configurableApp")?"instantapps":"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===
b||"desktop application"===b?"apps":"map document"===b||"map package"===b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&w.includes("ArcGIS Pro")||"explorer map"===b&&w.indexOf("Explorer Document")?"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"netcdf"===b||"administrative report"===
b?"datafiles":"360 vr experience"===b?"360vr":"explorer add in"===b||"desktop add in"===b||"windows viewer add in"===b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b||"arcgis pro configuration"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"sqlite geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===b||"gml"===b||"arcpad package"===b||"code sample"===b||"document link"===
b||"earth configuration"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"explorer map"===b&&w.includes("Explorer Mapping Application")||w.includes("Document")?"datafilesgray":"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===
b?"layersgray":"scene package"===b?"scenepackage":"3dtiles package"===b?"3dtileslayerpackage":"3dtiles service"===b?"3dtileslayer":"mobile scene package"===b?"mobilescenepackage":"tile package"===b||"compact tile package"===b?"tilepackage":"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"insights theme"===b?"insightstheme":
"hub initiative"===b?"hubinitiative":"hub page"===b?"hubpage":"hub site application"===b?"hubsite":"hub event"===b?"hubevent":"hub project"===b?"hubproject":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"desktop style"===b?"desktopstyle":"style"===b?"style":"dashboard"===b?"dashboard":"raster function template"===b?"rasterprocessingtemplate":"vector tile package"===b?"vectortilepackage":
"ortho mapping project"===b?"orthomappingproject":"ortho mapping template"===b?"orthomappingtemplate":"solution"===b?"solutions":"geopackage"===b?"geopackage":"deep learning package"===b?"deeplearningpackage":"real time analytic"===b?"realtimeanalytics":"big data analytic"===b?"bigdataanalytics":"feed"===b?"feed":"excalibur imagery project"===b?"excaliburimageryproject":"notebook"===b?"notebook":"storymap"===b?"storymap":"survey123 add in"===b?"survey123addin":"mission"===b?"mission":"mission report"===
b?"missionreport":"mission template"===b?"missiontemplate":"quickcapture project"===b?"quickcaptureproject":"pro report"===b?"proreport":"pro report template"===b?"proreporttemplate":"urban model"===b?"urbanmodel":"web experience"===b?"experiencebuilder":"web experience template"===b?"webexperiencetemplate":"experience builder widget"===b?"experiencebuilderwidget":"experience builder widget package"===b?"experiencebuilderwidgetpackage":"workflow"===b?"workflow":"kernel gateway connection"===b?"kernelgatewayconnection":
"insights script"===b?"insightsscript":"hub initiative template"===b?"hubinitiativetemplate":"storymap theme"===b?"storymaptheme":"knowledge graph"===b?"knowledgegraph":"knowledge studio project"===b?"knowledgestudio":"native application"===b?"nativeapp":"native application installer"===b?"nativeappinstaller":"link chart"===b?"linkchart":"investigation"===b?"investigation":"ogcfeatureserver"===b?"features":"pro project"===b?"proproject":"insights workbook package"===b?"insightsworkbookpackage":"apache parquet"===
b?"apacheparquet":"notebook code snippets"===b||"notebook code snippet library"===b?"notebookcodesnippets":"suitability model"===b?"suitabilitymodel":"esri classifier definition"===b?"classifierdefinition":"esri classification schema"===b?"classificationschema":"insights data engineering workbook"===b?"dataengineeringworkbook":"insights data engineering model"===b?"dataengineeringmodel":"deep learning studio project"===b?"deeplearningproject":"discussion"===b?"discussion":"allsource project"===b?
"allsourceproject":"api key"===b?"apikey":"data pipeline"===b?"datapipelines":"group layer"===b?(J=w.includes("Map"))?"layergroup2d":"layergroup":"media layer"===b?"onlinemedialayer":"form"===b?w.includes("Survey123")?"survey":"datafilesgray":"maps";return b?q.getAssetUrl("esri/images/portal/"+b+"16.png"):null}get isLayer(){return null!=this.type&&P.has(this.type)}get itemCdnUrl(){return B.toCDNUrl(this.itemUrl)}get itemPageUrl(){const b=this.portal?.itemPageUrl;return b&&this.id?`${b}?id=${this.id}`:
null}get itemUrl(){const b=this.portal?.restUrl;return b&&this.id?`${b}/content/items/${this.id}`:null}get thumbnailUrl(){const b=this.itemUrl,w=this.thumbnail;return b&&w?this.portal?.normalizeUrl(`${b}/info/${w}?f=json`)??null:null}get userItemUrl(){const b=this.portal?.restUrl;if(!b)return null;const w=this.owner||this.portal?.user?.username;return w?`${b}/content/users/${this.ownerFolder?`${w}/${this.ownerFolder}`:w}/items/${this.id}`:null}load(b){const w=this.portal??(this.portal=k.getDefault()),
J=w.load(b).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?w.request(this.itemUrl,{signal:null!=b?b.signal:null,query:{token:this.apiKey}}):{}).then(L=>{this.sourceJSON=L;this.read(L)});this.addResolvingPromise(J);return Promise.resolve(this)}async addRating(b){const w={method:"post",query:{}};b instanceof M&&(b=b.rating);null==b||isNaN(b)||"number"!==typeof b||(w.query.rating=b);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",w);return new M({rating:b,
created:new Date})}clone(){var b={access:this.access,accessInformation:this.accessInformation,applicationProxies:m.clone(this.applicationProxies),avgRating:this.avgRating,categories:m.clone(this.categories),created:m.clone(this.created),culture:this.culture,description:this.description,extent:m.clone(this.extent),groupCategories:m.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:m.clone(this.modified),name:this.name,numComments:this.numComments,
numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:m.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:m.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:m.clone(this.typeKeywords),url:this.url};this.loaded&&(b.loadStatus="loaded");b=(new F({sourceJSON:this.sourceJSON})).set(b);b._set("isOrgItem",this.isOrgItem);
return b}createPostQuery(){const b=this.toJSON();for(var w of["tags","typeKeywords","categories"])b[w]=b[w]?.join(", ");({extent:w}=b);w&&(b.extent=JSON.stringify(w));return b}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(b="json",w){return this.portal.request(this.itemUrl+"/data",{responseType:b,...w,query:{token:this.apiKey}})}async fetchRating(b){b=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...b});return null!=
b.rating?(b.created=new Date(b.created),new M(b)):null}fetchRelatedItems(b,w){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...b,token:this.apiKey},...w},F)}getThumbnailUrl(b){let w=this.thumbnailUrl;w&&b&&(w+=`&w=${b}`);return w}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(b=>{this.sourceJSON=b;this.read(b);return this})}update(b){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const w=b?.data,
J={method:"post"};J.query=this.createPostQuery();for(const L in J.query)null===J.query[L]&&(J.query[L]="");J.query.clearEmptyFields=!0;null!=w&&("string"===typeof w?J.query.text=w:"object"===typeof w&&(J.query.text=JSON.stringify(w)));return this.portal.request(`${this.userItemUrl}/update`,J).then(()=>this.reload())}):Promise.reject(new g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(b){if(!this.id)throw new g("portal:item-does-not-exist","The item does not exist yet");
await this.load();const {portal:w,itemUrl:J}=this;await w.signIn();const {copyResources:L,folder:Z,tags:I,title:C}=b||{};b={method:"post",query:{copyPrivateResources:"all"===L,folder:"string"===typeof Z?Z:Z?.id,includeResources:!!L,tags:I?.join(","),title:C}};({itemId:b}=await w.request(`${J}/copy`,b));return new F({id:b,portal:w})}updateThumbnail(b){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const w=b.thumbnail,J=b.filename,L={method:"post"};if("string"===typeof w)H.isDataProtocol(w)?
L.query={data:w}:L.query={url:H.makeAbsolute(w)},null!=J&&(L.query.filename=J);else{const Z=new FormData;null!=J?Z.append("file",w,J):Z.append("file",w);L.body=Z}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,L).then(()=>this.reload())}):Promise.reject(new g("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(b={},w){const {fetchResources:J}=await new Promise((L,Z)=>e(["./support/resourceUtils"],L,Z));return J(this,b,w)}async addResource(b,
w,J){const {addOrUpdateResources:L}=await new Promise((Z,I)=>e(["./support/resourceUtils"],Z,I));b.portalItem=this;await L(this,[{resource:b,content:w,compress:J?.compress,access:J?.access}],"add",J);return b}async removeResource(b,w){const {removeResource:J}=await new Promise((L,Z)=>e(["./support/resourceUtils"],L,Z));if(b.portalItem&&b.portalItem.itemUrl!==this.itemUrl)throw new g("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");
return J(this,b,w)}async removeAllResources(b){const {removeAllResources:w}=await new Promise((J,L)=>e(["./support/resourceUtils"],J,L));return w(this,b)}resourceFromPath(b){return new E({portalItem:this,path:b})}toJSON(){var b=this.extent;b={accessInformation:this.accessInformation,categories:m.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:b&&[[b.xmin,b.ymin],[b.xmax,b.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:m.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:m.clone(this.typeKeywords),url:this.url};return m.fixJson(b)}static fromJSON(b){if(!b)return null;if(b.declaredClass)throw Error("JSON object is already hydrated");return new F({sourceJSON:b})}_getPostQuery(){const b=this.toJSON();for(const w in b)"tags"===w&&null!==
b[w]&&(b[w]=b[w].join(", ")),"typeKeywords"===w&&null!==b[w]&&(b[w]=b[w].join(", ")),"extent"===w&&b[w]&&(b[w]=JSON.stringify(b[w]));return b}};f.__decorate([z.property({type:["private","shared","org","public"]})],p.prototype,"access",void 0);f.__decorate([z.property()],p.prototype,"accessInformation",void 0);f.__decorate([z.property({type:String})],p.prototype,"apiKey",void 0);f.__decorate([z.property({json:{read:{source:"appProxies"}}})],p.prototype,"applicationProxies",void 0);f.__decorate([z.property()],
p.prototype,"avgRating",void 0);f.__decorate([z.property()],p.prototype,"categories",void 0);f.__decorate([z.property({type:Date})],p.prototype,"created",void 0);f.__decorate([z.property()],p.prototype,"culture",void 0);f.__decorate([z.property()],p.prototype,"description",void 0);f.__decorate([z.property({readOnly:!0})],p.prototype,"displayName",null);f.__decorate([z.property({type:A})],p.prototype,"extent",void 0);f.__decorate([x.reader("extent")],p.prototype,"readExtent",null);f.__decorate([z.property()],
p.prototype,"groupCategories",void 0);f.__decorate([z.property({readOnly:!0})],p.prototype,"iconUrl",null);f.__decorate([z.property()],p.prototype,"id",void 0);f.__decorate([z.property({readOnly:!0})],p.prototype,"isLayer",null);f.__decorate([z.property({type:Boolean,readOnly:!0})],p.prototype,"isOrgItem",void 0);f.__decorate([z.property()],p.prototype,"itemControl",void 0);f.__decorate([z.property({readOnly:!0})],p.prototype,"itemPageUrl",null);f.__decorate([z.property({readOnly:!0})],p.prototype,
"itemUrl",null);f.__decorate([z.property()],p.prototype,"licenseInfo",void 0);f.__decorate([z.property({type:Date})],p.prototype,"modified",void 0);f.__decorate([z.property()],p.prototype,"name",void 0);f.__decorate([z.property()],p.prototype,"numComments",void 0);f.__decorate([z.property()],p.prototype,"numRatings",void 0);f.__decorate([z.property()],p.prototype,"numViews",void 0);f.__decorate([z.property()],p.prototype,"owner",void 0);f.__decorate([z.property()],p.prototype,"ownerFolder",void 0);
f.__decorate([z.property({type:k})],p.prototype,"portal",void 0);f.__decorate([z.property()],p.prototype,"screenshots",void 0);f.__decorate([z.property()],p.prototype,"size",void 0);f.__decorate([z.property()],p.prototype,"snippet",void 0);f.__decorate([z.property()],p.prototype,"sourceJSON",void 0);f.__decorate([z.property({type:String})],p.prototype,"sourceUrl",void 0);f.__decorate([z.property({type:String})],p.prototype,"spatialReference",void 0);f.__decorate([z.property()],p.prototype,"tags",
void 0);f.__decorate([z.property()],p.prototype,"thumbnail",void 0);f.__decorate([z.property({readOnly:!0})],p.prototype,"thumbnailUrl",null);f.__decorate([z.property()],p.prototype,"title",void 0);f.__decorate([z.property()],p.prototype,"type",void 0);f.__decorate([z.property()],p.prototype,"typeKeywords",void 0);f.__decorate([z.property({type:String,json:{read(b,w){V.has(w.type)&&(w=this.portal?.restUrl,b||=w&&this.id?`${w}/content/items/${this.id}/data`:null);return b}}})],p.prototype,"url",void 0);
f.__decorate([z.property({readOnly:!0})],p.prototype,"userItemUrl",null);return p=F=f.__decorate([u.subclass("esri.portal.PortalItem")],p)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(e,f,q,g,p,m,v,H,z,D,x){q=class extends q{constructor(u){super(u);
this.portalItem=null}normalizeCtorArgs(u){return u?.portalItem&&u.path?{...u,path:this._normalizePath(u.path,u.portalItem)}:u}set path(u){null!=u&&m.isAbsolute(u)?p.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",u)}_castPath(u){return this._normalizePath(u,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:
null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(u="json",A){const k=this.cdnUrl;if(null==k)throw new g("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(k,{responseType:u,query:{token:this.portalItem.apiKey},signal:A?.signal})}async update(u,A){const {addOrUpdateResources:k}=await new Promise((E,M)=>e(["./support/resourceUtils"],E,M));await k(this.portalItem,[{resource:this,
content:u,compress:A?.compress,access:A?.access}],"update",A);return this}hasPath(){return null!=this.path}_normalizePath(u,A){if(null==u)return u;u=u.replace(/^\/+/,"");null!=A&&m.isAbsolute(u)&&(u=m.makeRelative(u,A.itemUrl));return u?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};f.__decorate([v.property()],q.prototype,"portalItem",void 0);f.__decorate([v.property({type:String,value:null})],q.prototype,"path",null);f.__decorate([H.cast("path")],q.prototype,"_castPath",null);f.__decorate([v.property({type:String,
readOnly:!0})],q.prototype,"url",null);f.__decorate([v.property({type:String,readOnly:!0})],q.prototype,"cdnUrl",null);f.__decorate([v.property({type:String,readOnly:!0})],q.prototype,"itemRelativeUrl",null);return q=f.__decorate([x.subclass("esri.portal.PortalItemResource")],q)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(e,f,q,g,p,m,v){f=class extends f{constructor(H){super(H);this.rating=this.created=null}};e.__decorate([q.property()],f.prototype,"created",void 0);e.__decorate([q.property()],f.prototype,"rating",void 0);return f=e.__decorate([v.subclass("esri.portal.PortalRating")],f)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils"],function(e,f,q){function g(B,F){var P=F?.url?.path;B&&P&&(B=q.makeAbsolute(B,P,{preserveProtocolRelative:!0}),F.portalItem&&
F.readResourcePaths&&(P=q.makeRelative(B,F.portalItem.itemUrl),null!=P&&E.test(P)&&F.readResourcePaths.push(F.portalItem.resourceFromPath(P).path)));return(B=x(B,F?.portal))&&k.test(B)?u(B):B}function p(B,F,P=e.MarkKeep.YES){B=B&&k.test(B)?A(B):B;if(null==B)return B;!q.isAbsolute(B)&&F?.blockedRelativeUrls&&F.blockedRelativeUrls.push(B);let V=q.makeAbsolute(B);if(F){var b=F.verifyItemRelativeUrls?.rootPath||F.url?.path;if(b){b=x(b,F.portal);const w=x(V,F.portal);V=q.makeRelative(w,b,b);null!=V&&V!==
w&&V!==B&&F.verifyItemRelativeUrls&&F.verifyItemRelativeUrls.writtenUrls.push(V)}}V=D(V,F?.portal);q.isAbsolute(V)&&(V=q.normalize(V));F?.resources&&F?.portalItem&&!q.isAbsolute(V)&&!q.isDataProtocol(V)&&P===e.MarkKeep.YES&&F.resources.toKeep.push({resource:F.portalItem.resourceFromPath(V),compress:!1});return V}function m(B,F,P){return g(B,P)}function v(B,F,P,V){B=p(B,V);void 0!==B&&(F[P]=B)}function H(B){return(B?.match(k)??null)?.[1]??null}function z(B){B=B?.match(k)??null;if(null==B)return null;
B=B[2];const F=B.lastIndexOf("/");if(-1===F){const {path:b,extension:w}=q.splitPathExtension(B);return{prefix:null,filename:b,extension:w}}const {path:P,extension:V}=q.splitPathExtension(B.slice(F+1));return{prefix:B.slice(0,F),filename:P,extension:V}}function D(B,F){return F&&!F.isPortal&&F.urlKey&&F.customBaseUrl?q.changeDomain(B,`${F.urlKey}.${F.customBaseUrl}`,F.portalHostname):B}function x(B,F){if(!F||F.isPortal||!F.urlKey||!F.customBaseUrl)return B;const P=`${F.urlKey}.${F.customBaseUrl}`,V=
q.getAppUrl();return q.hasSameOrigin(V,`${V.scheme}://${P}`)?q.changeDomain(B,F.portalHostname,P):q.changeDomain(B,P,F.portalHostname)}function u(B){if(!B)return B||null;B&&f.id&&!f.id.findCredential(B)&&(B=f.id._normalizeAGOLorgDomain(B),B=B.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),B=B.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),B=B.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return B}function A(B){if(!B)return B||null;
B=B.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");B=B.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(B=B.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&f.id&&!f.id.findCredential(B)&&(B=f.id._normalizeAGOLorgDomain(B));return B}const k=/\/items\/([^\/]+)\/resources\/(.*)/,E=/^\.\/resources\//;e.MarkKeep=void 0;(function(B){B[B.YES=0]="YES";B[B.NO=1]="NO"})(e.MarkKeep||(e.MarkKeep={}));const M=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return e.MarkKeep},ensureMainOnlineDomain:D,fromCDNUrl:A,fromJSON:g,itemIdFromResourceUrl:H,prefixAndFilenameFromResourceUrl:z,read:m,toCDNUrl:u,toJSON:p,write:v},Symbol.toStringTag,{value:"Module"}));e.ensureMainOnlineDomain=D;e.fromCDNUrl=A;e.fromJSON=g;e.itemIdFromResourceUrl=H;e.persistableUrlUtils=M;e.prefixAndFilenameFromResourceUrl=z;e.read=m;e.toCDNUrl=u;e.toJSON=p;e.write=v})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(e,
f,q){e.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",
url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,
opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return f.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};e.getBasemapTitle=async function(g){if(g){var p=g.includes("-vector")?g.slice(0,g.indexOf("-vector")):
g.includes("-3d")?g.slice(0,g.indexOf("-3d")):g,m=await q.fetchMessageBundle("esri/t9n/basemaps");return m[g]||m[p]}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(e,f,q,g,p,m,v,H){const z=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
f=class extends f{constructor(D){super(D);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var D=H.getLocale().toLowerCase();switch(D){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}D=H.getLanguage(D);return"pt"===D?"pt-BR":D&&z.has(D)?D:"global"}};
e.__decorate([q.property()],f.prototype,"id",void 0);e.__decorate([q.property()],f.prototype,"language",void 0);e.__decorate([q.property()],f.prototype,"places",void 0);e.__decorate([q.property()],f.prototype,"serviceUrl",void 0);e.__decorate([q.property()],f.prototype,"worldview",void 0);return f=e.__decorate([v.subclass("esri.support.BasemapStyle")],f)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(e,f,q,g,p,m){function v(D,x){"maxScale"in D&&(x.maxScale=p.numberToJSON(D.maxScale)??void 0);"minScale"in D&&(x.minScale=p.numberToJSON(D.minScale)??void 0)}const H=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),z=new Set("csv feature geo-rss geojson group imagery imagery-tile kml map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
e.disableRestrictedWriting=function(D){H.add(D);z.add(D)};e.enableRestrictedWriting=function(D){H.delete(D);z.delete(D)};e.getLayerJSON=function(D,x,u){if(!D.persistenceEnabled)return null;if(!("write"in D&&D.write))return u?.messages&&u.messages.push(new f("layer:unsupported",`Layers (${D.title}, ${D.id}) of type '${D.declaredClass}' cannot be persisted`,{layer:D})),null;if(m.isFeatureCollectionLayer(D)&&!D.isTable)x=D.resourceInfo;else{if(u.restrictedWebMapWriting){var A="basemap"===u.layerContainerType?
H:"operational-layers"===u.layerContainerType?z:null;A=null!=A?A.has(D.type)&&!m.isFeatureCollectionLayer(D):!0}else A=!0;if(A)return x={},D.write(x,u)?x:null}if(null!=x){x=q.clone(x);if(u=x)m.isFeatureCollectionLayer(D)?(A=g.getDeepValue("featureCollection.layers",u)?.[0]?.layerDefinition)&&v(D,A):"group"!==D.type&&v(D,u);if(u&&(u.id=D.id,"blendMode"in D&&(u.blendMode=D.blendMode,"normal"===u.blendMode&&delete u.blendMode),u.opacity=p.numberToJSON(D.opacity)??void 0,u.title=D.title||"Layer",u.visibility=
D.visible,"legendEnabled"in D&&"wmts"!==D.type))if(m.isFeatureCollectionLayer(D)){if(u=u.featureCollection)u.showLegend=D.legendEnabled}else u.showLegend=D.legendEnabled}return x};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(e,f,q){function g(m){return"scene"===m?.type}function p(m){m=m?.type;return"imagery-tile"===m||"tile"===m||"open-street-map"===m||"vector-tile"===m||"web-tile"===
m||"wmts"===m}e.getEffectiveEditingEnabled=function(m){a:if("editingEnabled"in m)switch(m.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var v=!0;break a;default:v=!1}else v=!1;return v?"effectiveEditingEnabled"in m?m.effectiveEditingEnabled:m.editingEnabled:!1};e.getEffectiveLayerCapabilities=function(m){a:if("capabilities"in m)switch(m.type){case "catalog":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var v=
!0;break a;default:v=!1}else v=!1;return v?"effectiveCapabilities"in m?m.effectiveCapabilities:m.capabilities:null};e.getOwningPortalUrl=async function(m,v){var H=f.id?.findServerInfo(m);if(null!=H?.currentVersion)return H.owningSystemUrl||null;H=m.toLowerCase().indexOf("/rest/services");if(-1===H)return null;m=`${m.substring(0,H)}/rest/info`;({data:v}=await q(m,{query:{f:"json"},responseType:"json",signal:null!=v?v.signal:null}));return v?.owningSystemUrl||null};e.getTileMaxtrixSetFromActiveLayer=
function(m){if(m.activeLayer){const v=m.activeLayer.tileMatrixSet;if(v)return v;if(m=m.activeLayer.tileMatrixSets)return m}return null};e.isBaseLayer=function(m){return null!=m?.parent&&"declaredClass"in m.parent&&"esri.Basemap"===m.parent.declaredClass&&m.parent.baseLayers.includes(m)};e.isBasemap3DSupportedLayer=function(m){return p(m)||g(m)};e.isBasemapSupportedTiledLayer=p;e.isFeatureCollectionLayer=function(m){return"feature"===m?.type&&!m.url&&"memory"===m.source?.type};e.isFeatureLayer=function(m){return null!=
m&&"object"===typeof m&&"type"in m&&"feature"===m.type};e.isFeatureServiceLayer=function(m){return"feature"===m?.type&&"feature-layer"===m.source?.type};e.isGraphicsLayer=function(m){return null!=m&&"object"===typeof m&&"type"in m&&"graphics"===m.type};e.isGroupLayer=function(m){return null!=m&&"type"in m&&"group"===m.type};e.isImageryTileLayer=function(m){return"imagery-tile"===m?.type};e.isIntegratedMeshLayer=function(m){return"integrated-mesh"===m||"integrated-mesh-3dtiles"===m};e.isIntegratedMeshOperationalLayer=
function(m){return"IntegratedMeshLayer"===m||"IntegratedMesh3DTilesLayer"===m};e.isKnowledgeGraphLayer=function(m){return null!=m&&"object"===typeof m&&"type"in m&&"knowledge-graph"===m.type&&"layers"in m};e.isLayerWithFeatureLayerSource=function(m){return("feature"===m?.type||"subtype-group"===m?.type)&&"feature-layer"===m.source?.type};e.isLinkChartLayer=function(m){return null!=m&&"object"===typeof m&&"type"in m&&"link-chart"===m.type&&"layers"in m};e.isMapNotesLayer=function(m){return null!=m&&
"object"===typeof m&&"type"in m&&"map-notes"===m.type&&"sublayers"in m};e.isSceneLayer=g;e.isSceneServiceLayer=function(m){m=m?.type;return"building-scene"===m||"integrated-mesh"===m||"point-cloud"===m||"scene"===m};e.isSubtypeGroupLayer=function(m){return null!=m&&"object"===typeof m&&"type"in m&&"subtype-group"===m.type&&"sublayers"in m};e.isTable=function(m){return null!=m&&"object"===typeof m&&"isTable"in m&&!!m.isTable};e.isTiledLayer=function(m){m=m?.type;return"base-tile"===m||"tile"===m||
"elevation"===m||"imagery-tile"===m||"base-elevation"===m||"open-street-map"===m||"wcs"===m||"web-tile"===m||"wmts"===m||"vector-tile"===m};e.isVoxelLayer=function(m){return"voxel"===m?.type};e.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};e.serializeLayerDefinitions=function(m){const v=/[:;]/,H=[];let z=!1;if(m&&(m.forEach((D,x)=>{H.push([x,D]);!z&&v.test(D)&&(z=!0)}),0<
H.length)){if(z){const D={};H.forEach(x=>{D[x[0]]=x[1]});m=JSON.stringify(D)}else{const D=[];H.forEach(x=>{D.push(x[0]+":"+x[1])});m=D.join(";")}return m}return null};e.serializeTimeOptions=function(m){if(m){var v=[];m.forEach((H,z)=>{v.push('"'+z+'":'+JSON.stringify(H))});if(v.length)return"{"+v.join(",")+"}"}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(e,f){e.canInterpolateEffects=function(q,g){const p=
q.length>g.length?q:g;return(q.length>g.length?g:q).every((m,v)=>m.type===p[v].type)};e.effectEquals=function(q,g){q=JSON.stringify(q??null);g=JSON.stringify(g??null);return q===g};e.isEffectFunctions=function(q){return(q=q[0])?"type"in q:!1};e.normalizeEffects=function(q,g){const p=q.length>g.length?q:g;q=q.length>g.length?g:q;for(g=q.length;g<p.length;g++)q.push(f.createEffectWithInitialValues(p[g]))};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports",
"../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(e,f,q,g,p){function m(k,E,M){return k+(E-k)*M}function v(k){return Math.round(1E3*q.px2pt(k))/1E3}class H{constructor(k,E,M){this.strength=k;this.radius=E;this.threshold=M;this.type="bloom"}interpolate(k,E,M){this.strength=m(k.strength,E.strength,M);this.radius=m(k.radius,E.radius,M);this.threshold=m(k.threshold,E.threshold,M)}clone(){return new H(this.strength,this.radius,
this.threshold)}toJSON(){return{type:"bloom",radius:v(this.radius),strength:this.strength,threshold:this.threshold}}}class z{constructor(k){this.radius=k;this.type="blur"}interpolate(k,E,M){this.radius=Math.round(m(k.radius,E.radius,M))}clone(){return new z(this.radius)}toJSON(){return{type:"blur",radius:v(this.radius)}}}class D{constructor(k,E){this.type=k;this.amount=E;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||
this._updateMatrix();return this._colorMatrix}interpolate(k,E,M){this.amount=m(k.amount,E.amount,M);this._updateMatrix()}clone(){return new D(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const k=this._colorMatrix||g.create();switch(this.type){case "brightness":this._colorMatrix=p.brightness(k,this.amount);break;case "contrast":this._colorMatrix=p.contrast(k,this.amount);break;case "grayscale":this._colorMatrix=p.grayscale(k,this.amount);break;case "invert":this._colorMatrix=
p.invert(k,this.amount);break;case "saturate":this._colorMatrix=p.saturate(k,this.amount);break;case "sepia":this._colorMatrix=p.sepia(k,this.amount)}}}class x{constructor(k,E,M,B){this.offsetX=k;this.offsetY=E;this.blurRadius=M;this.color=B;this.type="drop-shadow"}interpolate(k,E,M){this.offsetX=m(k.offsetX,E.offsetX,M);this.offsetY=m(k.offsetY,E.offsetY,M);this.blurRadius=m(k.blurRadius,E.blurRadius,M);this.color[0]=Math.round(m(k.color[0],E.color[0],M));this.color[1]=Math.round(m(k.color[1],E.color[1],
M));this.color[2]=Math.round(m(k.color[2],E.color[2],M));this.color[3]=m(k.color[3],E.color[3],M)}clone(){return new x(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const k=[...this.color];k[3]*=255;return{type:"drop-shadow",xoffset:v(this.offsetX),yoffset:v(this.offsetY),blurRadius:v(this.blurRadius),color:k}}}class u{constructor(k){this.angle=k;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(k,E,M){this.angle=
m(k.angle,E.angle,M);this._updateMatrix()}clone(){return new u(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const k=this._colorMatrix||g.create();this._colorMatrix=p.rotateHue(k,this.angle)}}class A{constructor(k){this.amount=k;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(k,E,M){this.amount=m(k.amount,E.amount,M)}clone(){return new A(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}e.BloomEffect=H;e.BlurEffect=z;e.ColorMatrixEffect=
D;e.DropShadowEffect=x;e.HueRotateEffect=u;e.OpacityEffect=A;e.createEffectWithInitialValues=function(k){switch(k.type){case "grayscale":case "sepia":case "invert":return new D(k.type,0);case "saturate":case "brightness":case "contrast":return new D(k.type,1);case "opacity":return new A(1);case "hue-rotate":return new u(0);case "blur":return new z(0);case "drop-shadow":return new x(0,0,0,[...f.getNamedColor("transparent")]);case "bloom":return new H(0,0,1)}};Object.defineProperty(e,Symbol.toStringTag,
{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(e){function f(){const H=new Float32Array(16);H[0]=1;H[5]=1;H[10]=1;H[15]=1;return H}function q(H){const z=new Float32Array(16);z[0]=H[0];z[1]=H[1];z[2]=H[2];z[3]=H[3];z[4]=H[4];z[5]=H[5];z[6]=H[6];z[7]=H[7];z[8]=H[8];z[9]=H[9];z[10]=H[10];z[11]=H[11];z[12]=H[12];z[13]=H[13];z[14]=H[14];z[15]=H[15];return z}function g(H,z,D,x,u,A,k,E,M,B,F,P,V,b,w,J){const L=new Float32Array(16);L[0]=H;L[1]=z;
L[2]=D;L[3]=x;L[4]=u;L[5]=A;L[6]=k;L[7]=E;L[8]=M;L[9]=B;L[10]=F;L[11]=P;L[12]=V;L[13]=b;L[14]=w;L[15]=J;return L}function p(H,z){return new Float32Array(H,z,16)}const m=f(),v=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:m,clone:q,create:f,createView:p,fromValues:g},Symbol.toStringTag,{value:"Module"}));e.IDENTITY=m;e.clone=q;e.create=f;e.createView=p;e.fromValues=g;e.mat4f32=v;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports",
"../../core/libs/gl-matrix-2/math/mat4"],function(e,f){e.brightness=(q,g)=>{q=f.set(q,g,0,0,0,0,g,0,0,0,0,g,0,0,0,0,1);return f.transpose(q,q)};e.contrast=(q,g)=>{q=f.set(q,g,0,0,.5-.5*g,0,g,0,.5-.5*g,0,0,g,.5-.5*g,0,0,0,1);return f.transpose(q,q)};e.grayscale=(q,g)=>{g=1-g;q=f.set(q,.2126+.7874*g,.7152-.7152*g,.0722-.0722*g,0,.2126-.2126*g,.7152+.2848*g,.0722-.0722*g,0,.2126-.2126*g,.7152-.7152*g,.0722+.9278*g,0,0,0,0,1);return f.transpose(q,q)};e.invert=(q,g)=>{const p=1-2*g;q=f.set(q,p,0,0,g,0,
p,0,g,0,0,p,g,0,0,0,1);return f.transpose(q,q)};e.rotateHue=(q,g)=>{const p=Math.sin(g*Math.PI/180);g=Math.cos(g*Math.PI/180);q=f.set(q,.213+.787*g-.213*p,.715-.715*g-.715*p,.072-.072*g+.928*p,0,.213-.213*g+.143*p,.715+.285*g+.14*p,.072-.072*g-.283*p,0,.213-.213*g-.787*p,.715-.715*g+.715*p,.072+.928*g+.072*p,0,0,0,0,1);return f.transpose(q,q)};e.saturate=(q,g)=>{q=f.set(q,.213+.787*g,.715-.715*g,.072-.072*g,0,.213-.213*g,.715+.285*g,.072-.072*g,0,.213-.213*g,.715-.715*g,.072+.928*g,0,0,0,0,1);return f.transpose(q,
q)};e.sepia=(q,g)=>{g=1-g;q=f.set(q,.393+.607*g,.769-.769*g,.189-.189*g,0,.349-.349*g,.686+.314*g,.168-.168*g,0,.272-.272*g,.534-.534*g,.131+.869*g,0,0,0,0,1);return f.transpose(q,q)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(e,f,q){function g(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=
c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}function p(a,c,n,r,K,O,Q,S,N,R,U,X,ba,aa,ha,fa,ea){a[0]=c;a[1]=n;a[2]=r;a[3]=K;a[4]=O;a[5]=Q;a[6]=S;a[7]=N;a[8]=R;a[9]=U;a[10]=X;a[11]=ba;a[12]=aa;a[13]=ha;a[14]=fa;a[15]=ea;return a}function m(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function v(a,c){if(a===c){const n=c[1],r=c[2],K=c[3],O=c[6],Q=c[7],S=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=n;a[6]=
c[9];a[7]=c[13];a[8]=r;a[9]=O;a[11]=c[14];a[12]=K;a[13]=Q;a[14]=S}else a[0]=c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a}function H(a,c){z(a,c)||m(a);return a}function z(a,c){const n=c[0],r=c[1],K=c[2],O=c[3],Q=c[4],S=c[5],N=c[6],R=c[7],U=c[8],X=c[9],ba=c[10],aa=c[11],ha=c[12],fa=c[13],ea=c[14];c=c[15];const pa=n*S-r*Q,ja=n*N-K*Q,ka=n*R-O*Q,la=r*N-K*S,ma=r*R-O*S,ua=K*
R-O*N,va=U*fa-X*ha,wa=U*ea-ba*ha,xa=U*c-aa*ha,ya=X*ea-ba*fa,za=X*c-aa*fa,Aa=ba*c-aa*ea;let qa=pa*Aa-ja*za+ka*ya+la*xa-ma*wa+ua*va;if(!qa)return null;qa=1/qa;a[0]=(S*Aa-N*za+R*ya)*qa;a[1]=(K*za-r*Aa-O*ya)*qa;a[2]=(fa*ua-ea*ma+c*la)*qa;a[3]=(ba*ma-X*ua-aa*la)*qa;a[4]=(N*xa-Q*Aa-R*wa)*qa;a[5]=(n*Aa-K*xa+O*wa)*qa;a[6]=(ea*ka-ha*ua-c*ja)*qa;a[7]=(U*ua-ba*ka+aa*ja)*qa;a[8]=(Q*za-S*xa+R*va)*qa;a[9]=(r*xa-n*za-O*va)*qa;a[10]=(ha*ma-fa*ka+c*pa)*qa;a[11]=(X*ka-U*ma-aa*pa)*qa;a[12]=(S*wa-Q*ya-N*va)*qa;a[13]=
(n*ya-r*wa+K*va)*qa;a[14]=(fa*ja-ha*la-ea*pa)*qa;a[15]=(U*la-X*ja+ba*pa)*qa;return a}function D(a,c){const n=c[0],r=c[1],K=c[2],O=c[3],Q=c[4],S=c[5],N=c[6],R=c[7],U=c[8],X=c[9],ba=c[10],aa=c[11],ha=c[12],fa=c[13],ea=c[14];c=c[15];a[0]=S*(ba*c-aa*ea)-X*(N*c-R*ea)+fa*(N*aa-R*ba);a[1]=-(r*(ba*c-aa*ea)-X*(K*c-O*ea)+fa*(K*aa-O*ba));a[2]=r*(N*c-R*ea)-S*(K*c-O*ea)+fa*(K*R-O*N);a[3]=-(r*(N*aa-R*ba)-S*(K*aa-O*ba)+X*(K*R-O*N));a[4]=-(Q*(ba*c-aa*ea)-U*(N*c-R*ea)+ha*(N*aa-R*ba));a[5]=n*(ba*c-aa*ea)-U*(K*c-O*
ea)+ha*(K*aa-O*ba);a[6]=-(n*(N*c-R*ea)-Q*(K*c-O*ea)+ha*(K*R-O*N));a[7]=n*(N*aa-R*ba)-Q*(K*aa-O*ba)+U*(K*R-O*N);a[8]=Q*(X*c-aa*fa)-U*(S*c-R*fa)+ha*(S*aa-R*X);a[9]=-(n*(X*c-aa*fa)-U*(r*c-O*fa)+ha*(r*aa-O*X));a[10]=n*(S*c-R*fa)-Q*(r*c-O*fa)+ha*(r*R-O*S);a[11]=-(n*(S*aa-R*X)-Q*(r*aa-O*X)+U*(r*R-O*S));a[12]=-(Q*(X*ea-ba*fa)-U*(S*ea-N*fa)+ha*(S*ba-N*X));a[13]=n*(X*ea-ba*fa)-U*(r*ea-K*fa)+ha*(r*ba-K*X);a[14]=-(n*(S*ea-N*fa)-Q*(r*ea-K*fa)+ha*(r*N-K*S));a[15]=n*(S*ba-N*X)-Q*(r*ba-K*X)+U*(r*N-K*S);return a}
function x(a){const c=a[0],n=a[1],r=a[2],K=a[3],O=a[4],Q=a[5],S=a[6],N=a[7],R=a[8],U=a[9],X=a[10],ba=a[11],aa=a[12],ha=a[13],fa=a[14];a=a[15];return(c*Q-n*O)*(X*a-ba*fa)-(c*S-r*O)*(U*a-ba*ha)+(c*N-K*O)*(U*fa-X*ha)+(n*S-r*Q)*(R*a-ba*aa)-(n*N-K*Q)*(R*fa-X*aa)+(r*N-K*S)*(R*ha-U*aa)}function u(a,c,n){const r=c[0],K=c[1],O=c[2],Q=c[3],S=c[4],N=c[5],R=c[6],U=c[7],X=c[8],ba=c[9],aa=c[10],ha=c[11],fa=c[12],ea=c[13],pa=c[14];c=c[15];let ja=n[0],ka=n[1],la=n[2],ma=n[3];a[0]=ja*r+ka*S+la*X+ma*fa;a[1]=ja*K+ka*
N+la*ba+ma*ea;a[2]=ja*O+ka*R+la*aa+ma*pa;a[3]=ja*Q+ka*U+la*ha+ma*c;ja=n[4];ka=n[5];la=n[6];ma=n[7];a[4]=ja*r+ka*S+la*X+ma*fa;a[5]=ja*K+ka*N+la*ba+ma*ea;a[6]=ja*O+ka*R+la*aa+ma*pa;a[7]=ja*Q+ka*U+la*ha+ma*c;ja=n[8];ka=n[9];la=n[10];ma=n[11];a[8]=ja*r+ka*S+la*X+ma*fa;a[9]=ja*K+ka*N+la*ba+ma*ea;a[10]=ja*O+ka*R+la*aa+ma*pa;a[11]=ja*Q+ka*U+la*ha+ma*c;ja=n[12];ka=n[13];la=n[14];ma=n[15];a[12]=ja*r+ka*S+la*X+ma*fa;a[13]=ja*K+ka*N+la*ba+ma*ea;a[14]=ja*O+ka*R+la*aa+ma*pa;a[15]=ja*Q+ka*U+la*ha+ma*c;return a}
function A(a,c,n){const r=n[0],K=n[1];n=n[2];if(c===a)a[12]=c[0]*r+c[4]*K+c[8]*n+c[12],a[13]=c[1]*r+c[5]*K+c[9]*n+c[13],a[14]=c[2]*r+c[6]*K+c[10]*n+c[14],a[15]=c[3]*r+c[7]*K+c[11]*n+c[15];else{const O=c[0],Q=c[1],S=c[2],N=c[3],R=c[4],U=c[5],X=c[6],ba=c[7],aa=c[8],ha=c[9],fa=c[10],ea=c[11];a[0]=O;a[1]=Q;a[2]=S;a[3]=N;a[4]=R;a[5]=U;a[6]=X;a[7]=ba;a[8]=aa;a[9]=ha;a[10]=fa;a[11]=ea;a[12]=O*r+R*K+aa*n+c[12];a[13]=Q*r+U*K+ha*n+c[13];a[14]=S*r+X*K+fa*n+c[14];a[15]=N*r+ba*K+ea*n+c[15]}return a}function k(a,
c,n){const r=n[0],K=n[1];n=n[2];a[0]=c[0]*r;a[1]=c[1]*r;a[2]=c[2]*r;a[3]=c[3]*r;a[4]=c[4]*K;a[5]=c[5]*K;a[6]=c[6]*K;a[7]=c[7]*K;a[8]=c[8]*n;a[9]=c[9]*n;a[10]=c[10]*n;a[11]=c[11]*n;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a}function E(a,c,n,r){let K=r[0],O=r[1];r=r[2];let Q=Math.sqrt(K*K+O*O+r*r);var S=void 0,N=void 0;let R=void 0,U=void 0,X=void 0,ba=void 0,aa=void 0,ha=void 0,fa=void 0,ea=void 0,pa=void 0,ja=void 0,ka=void 0,la=void 0,ma=void 0,ua=void 0,va=void 0,wa=void 0,xa=void 0,
ya=void 0,za=void 0,Aa=void 0;N=S=void 0;if(Q<q.getEpsilon())return null;Q=1/Q;K*=Q;O*=Q;r*=Q;S=Math.sin(n);N=Math.cos(n);R=1-N;U=c[0];X=c[1];ba=c[2];aa=c[3];ha=c[4];fa=c[5];ea=c[6];pa=c[7];ja=c[8];ka=c[9];la=c[10];ma=c[11];ua=K*K*R+N;va=O*K*R+r*S;wa=r*K*R-O*S;xa=K*O*R-r*S;ya=O*O*R+N;za=r*O*R+K*S;Aa=K*r*R+O*S;S=O*r*R-K*S;N=r*r*R+N;a[0]=U*ua+ha*va+ja*wa;a[1]=X*ua+fa*va+ka*wa;a[2]=ba*ua+ea*va+la*wa;a[3]=aa*ua+pa*va+ma*wa;a[4]=U*xa+ha*ya+ja*za;a[5]=X*xa+fa*ya+ka*za;a[6]=ba*xa+ea*ya+la*za;a[7]=aa*xa+
pa*ya+ma*za;a[8]=U*Aa+ha*S+ja*N;a[9]=X*Aa+fa*S+ka*N;a[10]=ba*Aa+ea*S+la*N;a[11]=aa*Aa+pa*S+ma*N;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a}function M(a,c,n){const r=Math.sin(n);n=Math.cos(n);const K=c[4],O=c[5],Q=c[6],S=c[7],N=c[8],R=c[9],U=c[10],X=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=K*n+N*r;a[5]=O*n+R*r;a[6]=Q*n+U*r;a[7]=S*n+X*r;a[8]=N*n-K*r;a[9]=R*n-O*r;a[10]=U*n-Q*r;a[11]=X*n-S*r;return a}function B(a,
c,n){const r=Math.sin(n);n=Math.cos(n);const K=c[0],O=c[1],Q=c[2],S=c[3],N=c[8],R=c[9],U=c[10],X=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=K*n-N*r;a[1]=O*n-R*r;a[2]=Q*n-U*r;a[3]=S*n-X*r;a[8]=K*r+N*n;a[9]=O*r+R*n;a[10]=Q*r+U*n;a[11]=S*r+X*n;return a}function F(a,c,n){const r=Math.sin(n);n=Math.cos(n);const K=c[0],O=c[1],Q=c[2],S=c[3],N=c[4],R=c[5],U=c[6],X=c[7];c!==a&&(a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],
a[14]=c[14],a[15]=c[15]);a[0]=K*n+N*r;a[1]=O*n+R*r;a[2]=Q*n+U*r;a[3]=S*n+X*r;a[4]=N*n-K*r;a[5]=R*n-O*r;a[6]=U*n-Q*r;a[7]=X*n-S*r;return a}function P(a,c){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a}function V(a,c){a[0]=c[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=c[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function b(a,c,n){if(0===c)return m(a);let r=n[0],K=n[1];n=
n[2];let O=Math.sqrt(r*r+K*K+n*n),Q=void 0,S=void 0,N=void 0;if(O<q.getEpsilon())return null;O=1/O;r*=O;K*=O;n*=O;Q=Math.sin(c);S=Math.cos(c);N=1-S;a[0]=r*r*N+S;a[1]=K*r*N+n*Q;a[2]=n*r*N-K*Q;a[3]=0;a[4]=r*K*N-n*Q;a[5]=K*K*N+S;a[6]=n*K*N+r*Q;a[7]=0;a[8]=r*n*N+K*Q;a[9]=K*n*N-r*Q;a[10]=n*n*N+S;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function w(a,c){const n=Math.sin(c);c=Math.cos(c);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=n;a[7]=0;a[8]=0;a[9]=-n;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;
a[15]=1;return a}function J(a,c){const n=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=0;a[2]=-n;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=n;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function L(a,c){const n=Math.sin(c);c=Math.cos(c);a[0]=c;a[1]=n;a[2]=0;a[3]=0;a[4]=-n;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function Z(a,c,n){var r=c[0],K=c[1],O=c[2],Q=c[3],S=r+r,N=K+K;const R=O+O;c=r*S;const U=r*N;r*=R;const X=K*N;K*=R;O*=R;S*=Q;N*=Q;
Q*=R;a[0]=1-(X+O);a[1]=U+Q;a[2]=r-N;a[3]=0;a[4]=U-Q;a[5]=1-(c+O);a[6]=K+S;a[7]=0;a[8]=r+N;a[9]=K-S;a[10]=1-(c+X);a[11]=0;a[12]=n[0];a[13]=n[1];a[14]=n[2];a[15]=1;return a}function I(a,c){const n=Ia,r=-c[0],K=-c[1],O=-c[2],Q=c[3],S=c[4],N=c[5],R=c[6],U=c[7],X=r*r+K*K+O*O+Q*Q;0<X?(n[0]=2*(S*Q+U*r+N*O-R*K)/X,n[1]=2*(N*Q+U*K+R*r-S*O)/X,n[2]=2*(R*Q+U*O+S*K-N*r)/X):(n[0]=2*(S*Q+U*r+N*O-R*K),n[1]=2*(N*Q+U*K+R*r-S*O),n[2]=2*(R*Q+U*O+S*K-N*r));Z(a,c,n);return a}function C(a,c){a[0]=c[12];a[1]=c[13];a[2]=c[14];
return a}function t(a,c){const n=c[0],r=c[1],K=c[2],O=c[4],Q=c[5],S=c[6],N=c[8],R=c[9];c=c[10];a[0]=Math.sqrt(n*n+r*r+K*K);a[1]=Math.sqrt(O*O+Q*Q+S*S);a[2]=Math.sqrt(N*N+R*R+c*c);return a}function l(a,c){const n=c[0]+c[5]+c[10];let r=0;0<n?(r=2*Math.sqrt(n+1),a[3]=.25*r,a[0]=(c[6]-c[9])/r,a[1]=(c[8]-c[2])/r,a[2]=(c[1]-c[4])/r):c[0]>c[5]&&c[0]>c[10]?(r=2*Math.sqrt(1+c[0]-c[5]-c[10]),a[3]=(c[6]-c[9])/r,a[0]=.25*r,a[1]=(c[1]+c[4])/r,a[2]=(c[8]+c[2])/r):c[5]>c[10]?(r=2*Math.sqrt(1+c[5]-c[0]-c[10]),a[3]=
(c[8]-c[2])/r,a[0]=(c[1]+c[4])/r,a[1]=.25*r,a[2]=(c[6]+c[9])/r):(r=2*Math.sqrt(1+c[10]-c[0]-c[5]),a[3]=(c[1]-c[4])/r,a[0]=(c[8]+c[2])/r,a[1]=(c[6]+c[9])/r,a[2]=.25*r);return a}function d(a,c,n,r){var K=c[0],O=c[1],Q=c[2],S=c[3],N=K+K,R=O+O,U=Q+Q;c=K*N;const X=K*R;K*=U;const ba=O*R;O*=U;Q*=U;N*=S;R*=S;S*=U;U=r[0];const aa=r[1];r=r[2];a[0]=(1-(ba+Q))*U;a[1]=(X+S)*U;a[2]=(K-R)*U;a[3]=0;a[4]=(X-S)*aa;a[5]=(1-(c+Q))*aa;a[6]=(O+N)*aa;a[7]=0;a[8]=(K+R)*r;a[9]=(O-N)*r;a[10]=(1-(c+ba))*r;a[11]=0;a[12]=n[0];
a[13]=n[1];a[14]=n[2];a[15]=1;return a}function h(a,c,n,r,K){var O=c[0],Q=c[1],S=c[2],N=c[3],R=O+O,U=Q+Q,X=S+S;c=O*R;var ba=O*U,aa=O*X;O=Q*U;Q*=X;var ha=S*X;S=N*R;U*=N;const fa=N*X;var ea=r[0],pa=r[1];X=r[2];r=K[0];N=K[1];K=K[2];R=(1-(O+ha))*ea;const ja=(ba+fa)*ea;ea*=aa-U;ba=(ba-fa)*pa;ha=(1-(c+ha))*pa;pa*=Q+S;aa=(aa+U)*X;Q=(Q-S)*X;c=(1-(c+O))*X;a[0]=R;a[1]=ja;a[2]=ea;a[3]=0;a[4]=ba;a[5]=ha;a[6]=pa;a[7]=0;a[8]=aa;a[9]=Q;a[10]=c;a[11]=0;a[12]=n[0]+r-(R*r+ba*N+aa*K);a[13]=n[1]+N-(ja*r+ha*N+Q*K);a[14]=
n[2]+K-(ea*r+pa*N+c*K);a[15]=1;return a}function y(a,c){var n=c[0],r=c[1],K=c[2];c=c[3];var O=n+n,Q=r+r;const S=K+K;n*=O;const N=r*O;r*=Q;const R=K*O,U=K*Q;K*=S;O*=c;Q*=c;c*=S;a[0]=1-r-K;a[1]=N+c;a[2]=R-Q;a[3]=0;a[4]=N-c;a[5]=1-n-K;a[6]=U+O;a[7]=0;a[8]=R+Q;a[9]=U-O;a[10]=1-n-r;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function G(a,c,n,r,K,O,Q){const S=1/(n-c),N=1/(K-r),R=1/(O-Q);a[0]=2*O*S;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*O*N;a[6]=0;a[7]=0;a[8]=(n+c)*S;a[9]=(K+r)*N;a[10]=(Q+O)*R;a[11]=-1;
a[12]=0;a[13]=0;a[14]=Q*O*2*R;a[15]=0;return a}function T(a,c,n,r,K){c=1/Math.tan(c/2);let O=void 0;a[0]=c/n;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=K&&Infinity!==K?(O=1/(r-K),a[10]=(K+r)*O,a[14]=2*K*r*O):(a[10]=-1,a[14]=-2*r);return a}function W(a,c,n,r){const K=Math.tan(c.upDegrees*Math.PI/180),O=Math.tan(c.downDegrees*Math.PI/180),Q=Math.tan(c.leftDegrees*Math.PI/180);c=Math.tan(c.rightDegrees*Math.PI/180);const S=2/(Q+c),N=2/(K+O);
a[0]=S;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=N;a[6]=0;a[7]=0;a[8]=-((Q-c)*S*.5);a[9]=(K-O)*N*.5;a[10]=r/(n-r);a[11]=-1;a[12]=0;a[13]=0;a[14]=r*n/(n-r);a[15]=0;return a}function Y(a,c,n,r,K,O,Q){const S=1/(c-n),N=1/(r-K),R=1/(O-Q);a[0]=-2*S;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*N;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*R;a[11]=0;a[12]=(c+n)*S;a[13]=(K+r)*N;a[14]=(Q+O)*R;a[15]=1;return a}function ca(a,c,n,r){const K=c[0],O=c[1];c=c[2];let Q=K-n[0],S=O-n[1];n=c-n[2];var N=q.getEpsilon();if(Math.abs(Q)<N&&Math.abs(S)<
N&&Math.abs(n)<N)m(a);else{var R=1/Math.sqrt(Q*Q+S*S+n*n);Q*=R;S*=R;n*=R;R=r[0];var U=r[1];N=r[2];r=U*n-N*S;N=N*Q-R*n;U=R*S-U*Q;(R=Math.sqrt(r*r+N*N+U*U))?(R=1/R,r*=R,N*=R,U*=R):U=N=r=0;var X=S*U-n*N,ba=n*r-Q*U,aa=Q*N-S*r;(R=Math.sqrt(X*X+ba*ba+aa*aa))?(R=1/R,X*=R,ba*=R,aa*=R):aa=ba=X=0;a[0]=r;a[1]=X;a[2]=Q;a[3]=0;a[4]=N;a[5]=ba;a[6]=S;a[7]=0;a[8]=U;a[9]=aa;a[10]=n;a[11]=0;a[12]=-(r*K+N*O+U*c);a[13]=-(X*K+ba*O+aa*c);a[14]=-(Q*K+S*O+n*c);a[15]=1}}function da(a,c,n,r){const K=c[0],O=c[1];c=c[2];var Q=
r[0];const S=r[1];var N=r[2];r=K-n[0];let R=O-n[1];n=c-n[2];let U=r*r+R*R+n*n;0<U&&(U=1/Math.sqrt(U),r*=U,R*=U,n*=U);let X=S*n-N*R;N=N*r-Q*n;Q=Q*R-S*r;U=X*X+N*N+Q*Q;0<U&&(U=1/Math.sqrt(U),X*=U,N*=U,Q*=U);a[0]=X;a[1]=N;a[2]=Q;a[3]=0;a[4]=R*Q-n*N;a[5]=n*X-r*Q;a[6]=r*N-R*X;a[7]=0;a[8]=r;a[9]=R;a[10]=n;a[11]=0;a[12]=K;a[13]=O;a[14]=c;a[15]=1;return a}function na(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+
", "+a[13]+", "+a[14]+", "+a[15]+")"}function oa(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function ra(a,c,n){a[0]=c[0]+n[0];a[1]=c[1]+n[1];a[2]=c[2]+n[2];a[3]=c[3]+n[3];a[4]=c[4]+n[4];a[5]=c[5]+n[5];a[6]=c[6]+n[6];a[7]=c[7]+n[7];a[8]=c[8]+n[8];a[9]=c[9]+n[9];a[10]=c[10]+n[10];a[11]=c[11]+n[11];a[12]=c[12]+n[12];a[13]=c[13]+n[13];a[14]=c[14]+n[14];a[15]=c[15]+n[15];return a}function sa(a,
c,n){a[0]=c[0]-n[0];a[1]=c[1]-n[1];a[2]=c[2]-n[2];a[3]=c[3]-n[3];a[4]=c[4]-n[4];a[5]=c[5]-n[5];a[6]=c[6]-n[6];a[7]=c[7]-n[7];a[8]=c[8]-n[8];a[9]=c[9]-n[9];a[10]=c[10]-n[10];a[11]=c[11]-n[11];a[12]=c[12]-n[12];a[13]=c[13]-n[13];a[14]=c[14]-n[14];a[15]=c[15]-n[15];return a}function ia(a,c,n){a[0]=c[0]*n;a[1]=c[1]*n;a[2]=c[2]*n;a[3]=c[3]*n;a[4]=c[4]*n;a[5]=c[5]*n;a[6]=c[6]*n;a[7]=c[7]*n;a[8]=c[8]*n;a[9]=c[9]*n;a[10]=c[10]*n;a[11]=c[11]*n;a[12]=c[12]*n;a[13]=c[13]*n;a[14]=c[14]*n;a[15]=c[15]*n;return a}
function Ba(a,c,n,r){a[0]=c[0]+n[0]*r;a[1]=c[1]+n[1]*r;a[2]=c[2]+n[2]*r;a[3]=c[3]+n[3]*r;a[4]=c[4]+n[4]*r;a[5]=c[5]+n[5]*r;a[6]=c[6]+n[6]*r;a[7]=c[7]+n[7]*r;a[8]=c[8]+n[8]*r;a[9]=c[9]+n[9]*r;a[10]=c[10]+n[10]*r;a[11]=c[11]+n[11]*r;a[12]=c[12]+n[12]*r;a[13]=c[13]+n[13]*r;a[14]=c[14]+n[14]*r;a[15]=c[15]+n[15]*r;return a}function Ca(a,c){return a[0]===c[0]&&a[1]===c[1]&&a[2]===c[2]&&a[3]===c[3]&&a[4]===c[4]&&a[5]===c[5]&&a[6]===c[6]&&a[7]===c[7]&&a[8]===c[8]&&a[9]===c[9]&&a[10]===c[10]&&a[11]===c[11]&&
a[12]===c[12]&&a[13]===c[13]&&a[14]===c[14]&&a[15]===c[15]}function Da(a,c){if(a===c)return!0;const n=a[0],r=a[1],K=a[2],O=a[3],Q=a[4],S=a[5],N=a[6],R=a[7],U=a[8],X=a[9],ba=a[10],aa=a[11],ha=a[12],fa=a[13],ea=a[14];a=a[15];const pa=c[0],ja=c[1],ka=c[2],la=c[3],ma=c[4],ua=c[5],va=c[6],wa=c[7],xa=c[8],ya=c[9],za=c[10],Aa=c[11],qa=c[12],Ea=c[13],Fa=c[14];c=c[15];const ta=q.getEpsilon();return Math.abs(n-pa)<=ta*Math.max(1,Math.abs(n),Math.abs(pa))&&Math.abs(r-ja)<=ta*Math.max(1,Math.abs(r),Math.abs(ja))&&
Math.abs(K-ka)<=ta*Math.max(1,Math.abs(K),Math.abs(ka))&&Math.abs(O-la)<=ta*Math.max(1,Math.abs(O),Math.abs(la))&&Math.abs(Q-ma)<=ta*Math.max(1,Math.abs(Q),Math.abs(ma))&&Math.abs(S-ua)<=ta*Math.max(1,Math.abs(S),Math.abs(ua))&&Math.abs(N-va)<=ta*Math.max(1,Math.abs(N),Math.abs(va))&&Math.abs(R-wa)<=ta*Math.max(1,Math.abs(R),Math.abs(wa))&&Math.abs(U-xa)<=ta*Math.max(1,Math.abs(U),Math.abs(xa))&&Math.abs(X-ya)<=ta*Math.max(1,Math.abs(X),Math.abs(ya))&&Math.abs(ba-za)<=ta*Math.max(1,Math.abs(ba),Math.abs(za))&&
Math.abs(aa-Aa)<=ta*Math.max(1,Math.abs(aa),Math.abs(Aa))&&Math.abs(ha-qa)<=ta*Math.max(1,Math.abs(ha),Math.abs(qa))&&Math.abs(fa-Ea)<=ta*Math.max(1,Math.abs(fa),Math.abs(Ea))&&Math.abs(ea-Fa)<=ta*Math.max(1,Math.abs(ea),Math.abs(Fa))&&Math.abs(a-c)<=ta*Math.max(1,Math.abs(a),Math.abs(c))}function Ga(a){const c=q.getEpsilon(),n=a[0],r=a[1],K=a[2],O=a[4],Q=a[5],S=a[6],N=a[8],R=a[9];a=a[10];return Math.abs(1-(n*n+O*O+N*N))<=c&&Math.abs(1-(r*r+Q*Q+R*R))<=c&&Math.abs(1-(K*K+S*S+a*a))<=c}function Ha(a){return 1===
a[0]&&0===a[1]&&0===a[2]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[8]&&0===a[9]&&1===a[10]}const Ia=f.create();f=Object.freeze(Object.defineProperty({__proto__:null,add:ra,adjoint:D,copy:g,determinant:x,equals:Da,exactEquals:Ca,frob:oa,fromQuat:y,fromQuat2:I,fromRotation:b,fromRotationTranslation:Z,fromRotationTranslationScale:d,fromRotationTranslationScaleOrigin:h,fromScaling:V,fromTranslation:P,fromXRotation:w,fromYRotation:J,fromZRotation:L,frustum:G,getRotation:l,getScaling:t,getTranslation:C,hasIdentityRotation:Ha,
identity:m,invert:z,invertOrIdentity:H,isOrthoNormal:Ga,lookAt:ca,mul:u,multiply:u,multiplyScalar:ia,multiplyScalarAndAdd:Ba,ortho:Y,perspective:T,perspectiveFromFieldOfView:W,rotate:E,rotateX:M,rotateY:B,rotateZ:F,scale:k,set:p,str:na,sub:sa,subtract:sa,targetTo:da,translate:A,transpose:v},Symbol.toStringTag,{value:"Module"}));e.add=ra;e.adjoint=D;e.copy=g;e.determinant=x;e.equals=Da;e.exactEquals=Ca;e.frob=oa;e.fromQuat=y;e.fromQuat2=I;e.fromRotation=b;e.fromRotationTranslation=Z;e.fromRotationTranslationScale=
d;e.fromRotationTranslationScaleOrigin=h;e.fromScaling=V;e.fromTranslation=P;e.fromXRotation=w;e.fromYRotation=J;e.fromZRotation=L;e.frustum=G;e.getRotation=l;e.getScaling=t;e.getTranslation=C;e.hasIdentityRotation=Ha;e.identity=m;e.invert=z;e.invertOrIdentity=H;e.isOrthoNormal=Ga;e.lookAt=ca;e.mat4=f;e.mul=u;e.multiply=u;e.multiplyScalar=ia;e.multiplyScalarAndAdd=Ba;e.ortho=Y;e.perspective=T;e.perspectiveFromFieldOfView=W;e.rotate=E;e.rotateX=M;e.rotateY=B;e.rotateZ=F;e.scale=k;e.set=p;e.str=na;
e.sub=sa;e.subtract=sa;e.targetTo=da;e.translate=A;e.transpose=v;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(e,f,q){function g(d){return null==d||"string"===typeof d&&!d?"\x3cNull\x3e":d}function p(d){const h=null!=d.minValue||null!=d.maxValue,y=!!d.sqlExpression&&d.supportsSQLExpression;return!(null!=d.normalizationField||null!=d.normalizationType)&&
!h&&!y}function m(d){const {values:h,useSampleStdDev:y,supportsNullCount:G}=d;var T=Number.POSITIVE_INFINITY;let W=Number.NEGATIVE_INFINITY,Y=null,ca=null;var da=null;let na=null,oa=0;const ra=null==d.minValue?-Infinity:d.minValue,sa=null==d.maxValue?Infinity:d.maxValue;for(const ia of h)Number.isFinite(ia)?ia>=ra&&ia<=sa&&(Y=null===Y?ia:Y+ia,T=Math.min(T,ia),W=Math.max(W,ia),oa++):"string"===typeof ia&&oa++;if(oa&&null!=Y){ca=Y/oa;da=0;for(const ia of h)Number.isFinite(ia)&&ia>=ra&&ia<=sa&&(da+=
(ia-ca)**2);na=y?1<oa?da/(oa-1):0:0<oa?da/oa:0;da=Math.sqrt(na)}else W=T=null;T={avg:ca,count:oa,max:W,min:T,stddev:da,sum:Y,variance:na};G&&(T.nullcount=h.length-oa);d.percentileParams&&(T.median=v(h,d.percentileParams));return T}function v(d,h){const {fieldType:y,value:G,orderBy:T,isDiscrete:W}=h,Y=H(y,"desc"===T);d=[...d].filter(oa=>null!=oa).sort((oa,ra)=>Y(oa,ra));if(0===d.length)return null;if(0>=G)return d[0];if(1<=G)return d[d.length-1];var ca=(d.length-1)*G,da=Math.floor(ca);h=da+1;ca%=1;
da=d[da];const na=d[h];return h>=d.length||W||"string"===typeof da||"string"===typeof na?da:da*(1-ca)+na*ca}function H(d,h){if(d){if(P.has(d))return h?t:l;if(V.has(d))return z(h,!1);if("esriFieldTypeTimestampOffset"===d)return h?Z:L;const W=z(h,!0);if("esriFieldTypeString"===d)return W;if("esriFieldTypeGUID"===d||"esriFieldTypeGlobalID"===d)return(Y,ca)=>W(D(Y),D(ca))}const y=h?1:-1,G=h?t:l,T=z(h,!0);return(W,Y)=>"number"===typeof W&&"number"===typeof Y?G(W,Y):"string"===typeof W&&"string"===typeof Y?
T(W,Y):y}function z(d,h){if(!h)return d?C:I;const y=d?w:J;return d?(G,T)=>{const W=y(G,T);if(null!=W)return W;G=G.toUpperCase();T=T.toUpperCase();return G>T?-1:G<T?1:0}:(G,T)=>{const W=y(G,T);if(null!=W)return W;G=G.toUpperCase();T=T.toUpperCase();return G<T?-1:G>T?1:0}}function D(d){return d.substr(24,12)+d.substr(19,4)+d.substr(16,2)+d.substr(14,2)+d.substr(11,2)+d.substr(9,2)+d.substr(6,2)+d.substr(4,2)+d.substr(2,2)+d.substr(0,2)}function x(d){return"coded-value"!==d?.type?[]:d.codedValues.map(h=>
h.code)}function u(d,h){const y=k({field:h.field,normalizationType:h.normalizationType,normalizationField:h.normalizationField,classificationMethod:h.classificationMethod,standardDeviationInterval:h.standardDeviationInterval,breakCount:h.numClasses||5});d=A(d,h.minValue,h.maxValue);return q.createGenerateRendererClassBreaks({definition:y,values:d,normalizationTotal:h.normalizationTotal})}function A(d,h,y){const G=null==h?-Infinity:h,T=null==y?Infinity:y;return d.filter(W=>Number.isFinite(W)&&W>=G&&
W<=T)}function k(d){const {breakCount:h,field:y,normalizationField:G,normalizationType:T}=d,W=d.classificationMethod||"equal-interval";return new f({breakCount:h,classificationField:y,classificationMethod:W,normalizationField:"field"===T?G:void 0,normalizationType:T,standardDeviationInterval:"standard-deviation"===W?d.standardDeviationInterval||1:void 0})}function E(d,h){const {field:y,classificationMethod:G,standardDeviationInterval:T,normalizationType:W,normalizationField:Y,normalizationTotal:ca,
minValue:da,maxValue:na}=h,oa=h.numBins||10;let ra=h=null,sa=null;G&&"equal-interval"!==G||W?({classBreaks:d}=u(d,{field:y,normalizationType:W,normalizationField:Y,normalizationTotal:ca,classificationMethod:G,standardDeviationInterval:T,minValue:da,maxValue:na,numClasses:oa}),h=d[0].minValue,ra=d[d.length-1].maxValue,sa=d.map(ia=>[ia.minValue,ia.maxValue])):(null!=da&&null!=na?(h=da,ra=na):(d=m({values:d,minValue:da,maxValue:na,useSampleStdDev:!W,supportsNullCount:p({normalizationType:W,normalizationField:Y,
minValue:da,maxValue:na})}),h=d.min??null,ra=d.max??null),sa=B(h??0,ra??0,oa));return{min:h,max:ra,intervals:sa}}function M(d,h){let y=-1;for(let G=d.length-1;0<=G;G--)if(h>=d[G][0]){y=G;break}return y}function B(d,h,y){const G=(h-d)/y,T=[];let W;for(let Y=1;Y<=y;Y++)W=d+G,W=Number(W.toFixed(16)),T.push([d,Y===y?h:W]),d=W;return T}const F=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,P=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),
V=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),b="min max avg stddev count sum variance nullcount median".split(" "),w=(d,h)=>null==d?null==h?0:1:null==h?-1:null,J=(d,h)=>null==d?null==h?0:-1:null==h?1:null,L=(d,h)=>J(d,h)??(d===h?0:(new Date(d)).getTime()-(new Date(h)).getTime()),Z=(d,h)=>w(d,h)??(d===h?0:(new Date(h)).getTime()-(new Date(d)).getTime()),I=(d,h)=>J(d,h)??(d===h?0:d<h?-1:1),C=(d,h)=>w(d,h)??(d===h?0:d<h?1:-1),t=(d,h)=>w(d,h)??h-d,l=(d,h)=>J(d,h)??d-h;e.calculateClassBreaks=
u;e.calculateHistogram=function(d,h){var y=E(d,h);if(null==y.min&&null==y.max)return{bins:[],minValue:y.min,maxValue:y.max,normalizationTotal:h.normalizationTotal};const G=y.intervals,T=y.min??0;y=y.max??0;const W=G.map((Y,ca)=>({minValue:G[ca][0],maxValue:G[ca][1],count:0}));for(const Y of d)null!=Y&&Y>=T&&Y<=y&&(d=M(G,Y),-1<d&&W[d].count++);return{bins:W,minValue:T,maxValue:y,normalizationTotal:h.normalizationTotal}};e.calculatePercentile=v;e.calculateStatistics=m;e.calculateStringStatistics=function(d){const h=
d.returnDistinct?[...(new Set(d.values))]:d.values;var y=h.filter(T=>null!=T).sort();const G=y.length;y={count:G,min:y[0],max:y[G-1]};d.supportsNullCount&&(y.nullcount=h.length-G);d.percentileParams&&(y.median=v(h,d.percentileParams));return y};e.calculateUniqueValuesCount=function(d){const h={};for(let y of d){if(null==y||"string"===typeof y&&""===y.trim())y=null;null==h[y]?h[y]={count:1,data:y}:h[y].count++}return{count:h}};e.createClassBreaksDefinition=k;e.createUVResult=function(d,h,y,G){d=d.count;
const T=[];if(y&&h){y=[];var W=x(h[0]);for(const Y of W)if(h[1]){W=x(h[1]);for(const ca of W)if(h[2]){W=x(h[2]);for(const da of W)y.push(`${g(Y)}${G}${g(ca)}${G}${g(da)}`)}else y.push(`${g(Y)}${G}${g(ca)}`)}else y.push(Y);for(const Y of y)d.hasOwnProperty(Y)||(d[Y]={data:Y,count:0})}for(const Y in d)h=d[Y],T.push({value:h.data,count:h.count,label:h.label});return{uniqueValueInfos:T}};e.getAttributeComparator=H;e.getEqualIntervalBins=B;e.getNormalizedValue=function(d,h,y,G){let T=null;switch(h){case "log":0!==
d&&(T=Math.log(d)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(G)&&0!==G&&(T=d/G*100);break;case "field":Number.isFinite(y)&&0!==y&&(T=d/y);break;case "natural-log":0<d&&(T=Math.log(d));break;case "square-root":0<d&&(T=d**.5)}return T};e.isNullCountSupported=p;e.processNullValue=g;e.processSummaryStatisticsResult=function(d,h){let y;for(y in d)b.includes(y)&&(Number.isFinite(d[y])||(d[y]=null));if(!h)return d;["avg","stddev","variance"].forEach(G=>{null!=d[G]&&(d[G]=Math.ceil(d[G]??
0))});return d};e.resolveCBResult=function(d,h){let y=d.classBreaks;const G=y[0]?.minValue,T=y[y.length-1]?.maxValue,W="standard-deviation"===h;y=y.map(Y=>{const ca=Y.label;Y={minValue:Y.minValue,maxValue:Y.maxValue,label:ca};if(W&&ca){const da=ca.match(F)?.map(na=>+na.trim())??[];2===da.length?(Y.minStdDev=da[0],Y.maxStdDev=da[1],0>da[0]&&0<da[1]&&(Y.hasAvg=!0)):1===da.length&&(ca.includes("\x3c")?(Y.minStdDev=null,Y.maxStdDev=da[0]):ca.includes("\x3e")&&(Y.minStdDev=da[0],Y.maxStdDev=null))}return Y});
return{minValue:G,maxValue:T,classBreakInfos:y,normalizationTotal:d.normalizationTotal}};e.statisticTypes=b;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(e,f,q,g,p,m,v,H,z){p=new f.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});f=new f.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});q=class extends q.JSONSupport{constructor(D){super(D);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(D){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",D)}set definedInterval(D){"defined-interval"===this.classificationMethod&&this._set("definedInterval",D)}};e.__decorate([H.enumeration({classBreaksDef:"class-breaks-definition"})],q.prototype,"type",void 0);e.__decorate([g.property({json:{write:!0}})],q.prototype,
"breakCount",void 0);e.__decorate([g.property({json:{write:!0}})],q.prototype,"classificationField",void 0);e.__decorate([g.property({type:String,json:{read:p.read,write:p.write}})],q.prototype,"classificationMethod",void 0);e.__decorate([g.property({json:{write:!0}})],q.prototype,"normalizationField",void 0);e.__decorate([g.property({json:{read:f.read,write:f.write}})],q.prototype,"normalizationType",void 0);e.__decorate([g.property({value:null,json:{write:!0}})],q.prototype,"standardDeviationInterval",
null);e.__decorate([g.property({value:null,json:{write:!0}})],q.prototype,"definedInterval",null);return q=e.__decorate([z.subclass("esri.rest.support.ClassBreaksDefinition")],q)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(e,f,q){e.enumeration=function(g,p={}){g=g instanceof f.JSONMap?g:new f.JSONMap(g,p);g={type:p?.ignoreUnknown??!0?g.apiValues:String,json:{type:g.jsonValues,read:p?.readOnly?!1:{reader:g.read},write:{writer:g.write}}};
void 0!==p?.readOnly&&(g.readOnly=!!p.readOnly);void 0!==p?.default&&(g.json.default=p.default);void 0!==p?.name&&(g.json.name=p.name);void 0!==p?.nonNullable&&(g.nonNullable=p.nonNullable);return q.property(g)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(e,f){function q(u){var A=u.definition;const {classificationMethod:k,normalizationType:E,definedInterval:M}=A;A=A.breakCount??
1;const B=[];var F=u.values;if(0===F.length)return[];F=F.sort((L,Z)=>L-Z);var P=F[0],V=F[F.length-1];if("equal-interval"===k)if(F.length>=A){F=(V-P)/A;u=P;for(var b=1;b<A;b++){var w=Number((P+b*F).toFixed(6));B.push({minValue:u,maxValue:w,label:g(u,w,E)});u=w}B.push({minValue:u,maxValue:V,label:g(u,V,E)})}else F.forEach(L=>{B.push({minValue:L,maxValue:L,label:g(L,L,E)})});else if("natural-breaks"===k){F=p(F);u=m(F.uniqueValues,u.valueFrequency||F.valueFrequency,A);for(b=1;b<A;b++)F.uniqueValues.length>
b&&(w=Number(F.uniqueValues[u[b]].toFixed(6)),B.push({minValue:P,maxValue:w,label:g(P,w,E)}),P=w);B.push({minValue:P,maxValue:V,label:g(P,V,E)})}else if("quantile"===k)if(F.length>=A&&P!==V){u=Math.ceil(F.length/A);b=0;for(w=1;w<A;w++){var J=u+b-1;J>F.length&&(J=F.length-1);0>J&&(J=0);B.push({minValue:P,maxValue:F[J],label:g(P,F[J],E)});P=F[J];b+=u;u=Math.ceil((F.length-b)/(A-w))}B.push({minValue:P,maxValue:V,label:g(P,V,E)})}else for(A=-1,V=0;V<F.length;V++)P=F[V],P!==A&&(A=P,B.push({minValue:A,
maxValue:P,label:g(A,P,E)}),A=P);else if("standard-deviation"===k)if(u=z(F),b=D(F,u),0===b)B.push({minValue:F[0],maxValue:F[0],label:g(F[0],F[0],E)});else{F=H(P,V,A,u,b)*b;b=0;for(w=A;1<=w;w--)J=Number((u-(w-.5)*F).toFixed(6)),B.push({minValue:P,maxValue:J,label:g(P,J,E)}),P=J,b++;w=Number((u+.5*F).toFixed(6));B.push({minValue:P,maxValue:w,label:g(P,w,E)});P=w;b++;for(J=1;J<=A;J++)w=b===2*A?V:Number((u+(J+.5)*F).toFixed(6)),B.push({minValue:P,maxValue:w,label:g(P,w,E)}),P=w,b++}else if("defined-interval"===
k){if(!M)return B;A=F[0];V=F[F.length-1];F=Math.ceil((V-A)/M);P=A;for(u=1;u<F;u++)b=Number((A+u*M).toFixed(6)),B.push({minValue:P,maxValue:b,label:g(P,b,E)}),P=b;B.push({minValue:P,maxValue:V,label:g(P,V,E)})}return B}function g(u,A,k){let E=null;return E=u===A?k&&"percent-of-total"===k?u+"%":u.toString():k&&"percent-of-total"===k?u+"% - "+A+"%":u+" - "+A}function p(u){const A=[],k=[];let E=Number.MIN_VALUE,M=1,B=-1;for(let F=0;F<u.length;F++){const P=u[F];P===E?(M++,k[B]=M):null!==P&&(A.push(P),
E=P,M=1,k.push(M),B++)}return{uniqueValues:A,valueFrequency:k}}function m(u,A,k){var E=u.length;const M=[];k>E&&(k=E);for(var B=0;B<k;B++)M.push(Math.round(B*E/k-1));M.push(E-1);B=v(M,u,A,k);E=B.mean;B=B.sdcm;var F=k,P=0,V=0;let b=0,w=0,J=!0;for(let Z=0;2>Z&&J;Z++){0===Z&&(J=!1);for(var L=0;L<F-1;L++)for(;M[L+1]+1!==M[L+2];)if(M[L+1]+=1,P=x(L,M,u,A),b=P.sbMean,P=P.sbSdcm,V=x(L+1,M,u,A),w=V.sbMean,V=V.sbSdcm,P+V<B[L]+B[L+1])B[L]=P,B[L+1]=V,E[L]=b,E[L+1]=w,J=!0;else{--M[L+1];break}for(L=F-1;0<L;L--)for(;M[L]!==
M[L-1]+1;)if(--M[L],P=x(L-1,M,u,A),b=P.sbMean,P=P.sbSdcm,V=x(L,M,u,A),w=V.sbMean,V=V.sbSdcm,P+V<B[L-1]+B[L])B[L-1]=P,B[L]=V,E[L-1]=b,E[L]=w,J=!0;else{M[L]+=1;break}}J&&(B=v(M,u,A,k));return M}function v(u,A,k,E){let M=[];var B=[],F=[];let P=0;const V=[],b=[];for(var w=0;w<E;w++){var J=x(w,u,A,k);V.push(J.sbMean);b.push(J.sbSdcm);P+=b[w]}J=P;for(w=!0;w||P<J;){w=!1;M=[];for(B=0;B<E;B++)M.push(u[B]);for(F=0;F<E;F++)for(J=u[F]+1;J<=u[F+1];J++)if(B=A[J],0<F&&J!==u[F+1]&&Math.abs(B-V[F])>Math.abs(B-V[F-
1]))u[F]=J;else if(F<E-1&&u[F]!==J-1&&Math.abs(B-V[F])>Math.abs(B-V[F+1])){u[F+1]=J-1;break}J=P;P=0;B=[];F=[];for(let L=0;L<E;L++){B.push(V[L]);F.push(b[L]);const Z=x(L,u,A,k);V[L]=Z.sbMean;b[L]=Z.sbSdcm;P+=b[L]}}if(P>J){for(A=0;A<E;A++)u[A]=M[A],V[A]=B[A],b[A]=F[A];P=J}return{mean:V,sdcm:b}}function H(u,A,k,E,M){u=Math.max(E-u,A-E)/M/k;return 1<=u?1:.5<=u?.5:.25}function z(u){let A=0;for(let k=0;k<u.length;k++)A+=u[k];return A/=u.length}function D(u,A){let k=0;for(let E=0;E<u.length;E++){const M=
u[E];k+=(M-A)*(M-A)}k/=u.length;return Math.sqrt(k)}function x(u,A,k,E){var M=0,B=0;for(var F=A[u]+1;F<=A[u+1];F++){const P=E[F];M+=k[F]*P;B+=P}0>=B&&f.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");M/=B;B=0;for(F=A[u]+1;F<=A[u+1];F++)B+=E[F]*(k[F]-M)**2;return{sbMean:M,sbSdcm:B}}e.createGenerateRendererClassBreaks=function(u){const {normalizationTotal:A}=u;return{classBreaks:q(u),normalizationTotal:A}};e.createGenerateRendererUniqueValues=function(u){u=
p(u);const A=[],k=u.uniqueValues.length;for(let E=0;E<k;E++){const M=u.uniqueValues[E];A.push({value:M,count:u.valueFrequency[E],label:M.toString()})}return{uniqueValues:A}};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define(["exports","./utils","../../../statistics/utils"],function(e,f,q){e.classBreaks=async function(g){const {attribute:p,features:m}=g,{field:v,normalizationType:H,normalizationField:z,normalizationTotal:D,classificationMethod:x}=p;g=await f.getDataValues({field:v,valueExpression:p.valueExpression,normalizationType:H,normalizationField:z,normalizationTotal:D,viewInfoParams:p.viewInfoParams,timeZone:p.timeZone,fieldInfos:p.fieldInfos},m);g=q.calculateClassBreaks(g,{field:v,normalizationType:H,normalizationField:z,
normalizationTotal:D,classificationMethod:x,standardDeviationInterval:p.standardDeviationInterval,numClasses:p.numClasses,minValue:p.minValue,maxValue:p.maxValue});return q.resolveCBResult(g,x)};e.heatmapStatistics=async function(g){const {attribute:p,features:m}=g,{field:v,radius:H,transform:z,spatialReference:D}=p;g=p.size??[0,0];const x=f.quantizeFeatures(m??[],z,D,g);return f.calculateHeatmapStats(x,H??void 0,v,g[0],g[1])};e.histogram=async function(g){const {attribute:p,features:m}=g,{field:v,
normalizationType:H,normalizationField:z,normalizationTotal:D,classificationMethod:x}=p;g=await f.getDataValues({field:v,valueExpression:p.valueExpression,normalizationType:H,normalizationField:z,normalizationTotal:D,viewInfoParams:p.viewInfoParams,timeZone:p.timeZone,fieldInfos:p.fieldInfos},m);return q.calculateHistogram(g,{field:v,normalizationType:H,normalizationField:z,normalizationTotal:D,classificationMethod:x,standardDeviationInterval:p.standardDeviationInterval,numBins:p.numBins,minValue:p.minValue,
maxValue:p.maxValue})};e.summaryStatistics=async function(g){const {attribute:p,features:m}=g,{normalizationType:v,normalizationField:H,minValue:z,maxValue:D,fieldType:x}=p;g=await f.getDataValues({field:p.field,valueExpression:p.valueExpression,normalizationType:v,normalizationField:H,normalizationTotal:p.normalizationTotal,viewInfoParams:p.viewInfoParams,timeZone:p.timeZone,fieldInfos:p.fieldInfos},m);const u=q.isNullCountSupported({normalizationType:v,normalizationField:H,minValue:z,maxValue:D}),
A={value:.5,fieldType:x};g="esriFieldTypeString"===x?q.calculateStringStatistics({values:g,supportsNullCount:u,percentileParams:A}):q.calculateStatistics({values:g,minValue:z,maxValue:D,useSampleStdDev:!v,supportsNullCount:u,percentileParams:A});return q.processSummaryStatisticsResult(g,"esriFieldTypeDate"===x)};e.uniqueValues=async function(g){const {attribute:p,features:m}=g;g=await f.getDataValues({field:p.field,field2:p.field2,field3:p.field3,fieldDelimiter:p.fieldDelimiter,valueExpression:p.valueExpression,
viewInfoParams:p.viewInfoParams,timeZone:p.timeZone,fieldInfos:p.fieldInfos},m,!1);g=q.calculateUniqueValuesCount(g);return q.createUVResult(g,p.domains,p.returnAllCodedValues,p.fieldDelimiter)};Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});