// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/chunks/arcade":function(){define("require exports ../arcade/arcadeCompiler ../arcade/ArcadeModuleResolver ../arcade/arcadeRuntime ../arcade/executionError ../arcade/parser ../arcade/treeAnalysis ../arcade/functions/geomsync ../core/has ../core/maybe".split(" "),function(t,L,A,c,b,d,m,k,n,y,I){function p(H,N){if(!0===N.useAsync||!0===H.isAsync)return C(H,N);if(y("esri-csp-restrictions"))return function(S){return b.executeScript(H,S)};try{return A.compileScript(H,N)}catch(S){if("esri.arcade.arcadeuncompilableerror"===
S.declaredRootClass)return function(fa){return b.executeScript(H,fa)};throw S;}}function C(H,N){if(null===O)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AsyncNotEnabled,null);if(y("esri-csp-restrictions"))return function(S){return O.executeScript(H,S)};try{return A.compileScript(H,N,!0)}catch(S){if("esri.arcade.arcadeuncompilableerror"===S.declaredRootClass)return function(fa){return O.executeScript(H,fa)};throw S;}}function z(H){b.extend(H);A.extend(H,"sync");null===O?R.push(H):(A.extend(H,
"async"),O.extend(H))}function e(H,N=[]){return m.parseScript(H,N)}function h(H,N,S=[]){H=m.parseScript(H,S);return B(H,N)}function B(H,N){if(!0===N.useAsync||!0===H.isAsync){if(null===O)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AsyncNotEnabled,null);return O.executeScript(H,N)}return b.executeScript(H,N)}function q(H,N){return k.referencesMember(H,N)}function v(H,N){return k.referencesFunction(H,N)}function f(H,N=!1){void 0===N&&(N=!1);return k.findFieldLiterals(H)}function D(H){return k.findExpectedFieldLiterals(H)}
function l(H,N=[]){void 0===H.usesGeometry&&k.findScriptDependencies(H,N);return!0===H.usesGeometry}function w(){return T?T:T=r()}async function r(){const H=await new Promise((N,S)=>t(["../geometry/geometryEngine"],N,S));E=!0;n.setGeometryEngine(H);return!0}function M(){return null!==la?la:la=a()}async function a(){await A.enableAsyncSupport();O=await new Promise((H,N)=>t(["../arcade/arcadeAsyncRuntime"],H,N));for(const H of R)O.extend(H),A.extend(H,"async");R=null;return!0}function Q(){return K}
function aa(){return O?!0:!1}function ba(){return E}function ra(){return qa?qa:qa=ya()}async function ya(){await M();const [H,N,S,fa,V]=await Promise.all([new Promise((ea,ia)=>t(["../arcade/featureSetUtils"],ea,ia)),new Promise((ea,ia)=>t(["../arcade/functions/featuresetbase"],ea,ia)),new Promise((ea,ia)=>t(["../arcade/functions/featuresetgeom"],ea,ia)),new Promise((ea,ia)=>t(["../arcade/functions/featuresetstats"],ea,ia)),new Promise((ea,ia)=>t(["../arcade/functions/featuresetstring"],ea,ia))]);
g=H;O.extend([N,S,fa,V]);A.extend([N,S,fa,V],"async");return K=!0}function oa(H,N=[]){void 0===H.usesFeatureSet&&k.findScriptDependencies(H,N);return!0===H.usesFeatureSet}function ca(H,N=[]){void 0===H.isAsync&&k.findScriptDependencies(H,N);return!0===H.isAsync}async function U(H,N,S=[],fa=!1,V=null){return ja(new Set,H,N,S,fa,V)}async function ja(H,N,S,fa=[],V=!1,ea=null){N="string"===typeof N?e(N):N;const ia=[];if(N&&(!1===E&&(l(N)||V)&&ia.push(w()),!1===aa()&&(!0===N.isAsync||S)&&ia.push(M()),
!1===K)){var X;if(!(X=oa(N)))a:{if(fa)for(const da of fa)if(q(N,da)){X=!0;break a}X=!1}X&&ia.push(ra())}ia.length&&await Promise.all(ia);await ka(H,N,ea,S,V);return!0}function wa(H,N=[]){void 0===H.usesModules&&k.findScriptDependencies(H,N);return!0===H.usesModules}async function ka(H,N,S=null,fa=!1,V=!1){var ea=k.findModuleImports(N);null===S&&0<ea.length&&(S=c.ArcadeModuleResolver.getDefault());N.loadedModules={};for(const ia of ea){I.assertIsSome(S);ea=S.normalizeModuleUri(ia.source);if(H.has(ea.uri))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.CircularModules,null);H.add(ea.uri);const X=await S.fetchModule(ea);await ja(H,X,fa,[],V,S);H.delete(ea.uri);X.isAsync&&(N.isAsync=!0);X.usesFeatureSet&&(N.usesFeatureSet=!0);X.usesGeometry&&(N.usesGeometry=!0);N.loadedModules[ia.libname]={uri:ea.uri,script:X}}}function xa(H){if(l(H))return!0;H=k.findFunctionCalls(H);let N=!1;for(let S=0;S<H.length;S++)if(F.has(H[S])){N=!0;break}return N}function G(){return g}const F=new Set("feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "));
let K=!1,E=!1,O=null,R=[],T=null,la=null,qa=null,g=null;const u=Object.freeze(Object.defineProperty({__proto__:null,_loadScriptDependenciesImpl:ja,compileScript:p,enableAsyncSupport:M,enableAsyncSupportImpl:a,enableFeatureSetSupport:ra,enableFeatureSetSupportImpl:ya,enableGeometrySupport:w,enableGeometrySupportImpl:r,executeScript:B,extend:z,extractExpectedFieldLiterals:D,extractFieldLiterals:f,featureSetUtils:G,isAsyncEnabled:aa,isFeatureSetSupportEnabled:Q,isGeometryEnabled:ba,loadDependentModules:ka,
loadScriptDependencies:U,parseAndExecuteScript:h,parseScript:e,referencesFunction:v,referencesMember:q,scriptIsAsync:ca,scriptTouchesGeometry:xa,scriptUsesFeatureSet:oa,scriptUsesGeometryEngine:l,scriptUsesModules:wa},Symbol.toStringTag,{value:"Module"}));L._loadScriptDependenciesImpl=ja;L.arcade=u;L.compileScript=p;L.enableAsyncSupport=M;L.enableAsyncSupportImpl=a;L.enableFeatureSetSupport=ra;L.enableFeatureSetSupportImpl=ya;L.enableGeometrySupport=w;L.enableGeometrySupportImpl=r;L.executeScript=
B;L.extend=z;L.extractExpectedFieldLiterals=D;L.extractFieldLiterals=f;L.featureSetUtils=G;L.isAsyncEnabled=aa;L.isFeatureSetSupportEnabled=Q;L.isGeometryEnabled=ba;L.loadDependentModules=ka;L.loadScriptDependencies=U;L.parseAndExecuteScript=h;L.parseScript=e;L.referencesFunction=v;L.referencesMember=q;L.scriptIsAsync=ca;L.scriptTouchesGeometry=xa;L.scriptUsesFeatureSet=oa;L.scriptUsesGeometryEngine=l;L.scriptUsesModules=wa})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../core/promiseUtils ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(t,L,A,c,b,d,m,k,n,y,I,p,C,z,e,h,B,q,v,f){function D(g,u,H){try{return H(g,null,u.arguments)}catch(N){throw N;}}function l(g,u){try{switch(u.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ba(g,u);case "VariableDeclaration":var H=[];for(var N=0;N<u.declarations.length;N++)H.push(l(g,u.declarations[N]));return H.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":case "Program":return Q(g,u);case "FunctionDeclaration":{const ha=
u.id.name.toLowerCase();aa(ha);var S="",fa=!1;void 0!==g.globalScope[ha]?S=ha:void 0!==g.globalScope._SymbolsMap[ha]?S=g.globalScope._SymbolsMap[ha]:g.undeclaredGlobalsInFunctions.has(ha)?(S=g.undeclaredGlobalsInFunctions.get(ha).manglename,g.globalScope._SymbolsMap[ha]=S,g.mangleMap[ha]=S,g.undeclaredGlobalsInFunctions.delete(ha),fa=!0):(S=oa(g),g.globalScope._SymbolsMap[ha]=S,g.mangleMap[ha]=S);N={isAsync:g.isAsync,console:g.console,exports:g.exports,undeclaredGlobalsInFunctions:g.undeclaredGlobalsInFunctions,
customfunctions:g.customfunctions,moduleFactory:g.moduleFactory,moduleFactoryMap:g.moduleFactoryMap,libraryResolver:g.libraryResolver,lrucache:g.lrucache,interceptor:g.interceptor,services:g.services,symbols:g.symbols,mangleMap:g.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:g.depthCounter,globalScope:g.globalScope};var V="new lang.UserDefinedCompiledFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(var ea=0;ea<u.params.length;ea++){const Ca=u.params[ea].name.toLowerCase();aa(Ca);const Da=oa(g);N.localScope._SymbolsMap[Ca]=Da;N.mangleMap[Ca]=Da;V+="lscope['"+Da+"']\x3darguments["+ea.toString()+"];\n"}!0===g.isAsync?(V=V+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(Q(N,u.body)+"\n return lastStatement; "),V=V+"});  }, runtimeCtx),"+(u.params.length+")")):V+=Q(N,u.body)+"\n return lastStatement; }, runtimeCtx),"+u.params.length+")";V+="\n lastStatement \x3d lc.voidOperation; \n";
H=fa?"gscope[lang.setAssig('"+S+"', runtimeCtx)]\x3d"+V:"gscope['"+S+"']\x3d"+V}return H;case "ImportDeclaration":{const ha=u.specifiers[0].local.name.toLowerCase();aa(ha);const Ca=g.libraryResolver?.loadLibrary(ha),Da=oa(g);void 0===g.moduleFactory[Ca.uri]&&(g.moduleFactory[Ca.uri]=G(Ca.syntax,{interceptor:g.interceptor,services:g.services,moduleFactory:g.moduleFactory,lrucache:g.lrucache,timeZone:g.timeZone??null,libraryResolver:g.libraryResolver,customfunctions:g.customfunctions,vars:{}},g.isAsync));
g.moduleFactoryMap[Da]=Ca.uri;u="";u=g.isAsync?"(yield lang.loadModule('"+Da+"', runtimeCtx) ); ":"lang.loadModule('"+Da+"', runtimeCtx); ";void 0!==g.globalScope[ha]?S="gscope['"+ha+"']\x3d"+u:void 0!==g.globalScope._SymbolsMap[ha]?S="gscope['"+g.globalScope._SymbolsMap[ha]+"']\x3d"+u:(H="",g.undeclaredGlobalsInFunctions.has(ha)?(H=g.undeclaredGlobalsInFunctions.get(ha).manglename,g.undeclaredGlobalsInFunctions.delete(ha)):H=oa(g),g.globalScope._SymbolsMap[ha]=H,g.mangleMap[ha]=H,S="gscope[lang.setAssig('"+
H+"', runtimeCtx)]\x3d"+u)}return S;case "ExportNamedDeclaration":const Ea=l(g,u.declaration);if("FunctionDeclaration"===u.declaration.type)g.exports[u.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===u.declaration.type)for(const ha of u.declaration.declarations)g.exports[ha.id.name.toLowerCase()]="variable";return Ea;case "ReturnStatement":var ia=null===u.argument?"return lc.voidOperation":"return "+l(g,u.argument);return ia;case "IfStatement":return a(g,u);case "ExpressionStatement":var X=
"AssignmentExpression"===u.expression.type?"lastStatement \x3d lc.voidOperation; "+l(g,u.expression)+"; \n ":"lastStatement \x3d "+l(g,u.expression)+"; ";return X;case "AssignmentExpression":return r(g,u);case "UpdateExpression":return w(g,u);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{H=[];N=0;for(const ha of u.quasis)H.push(ha.value?JSON.stringify(ha.value.cooked):JSON.stringify("")),!1===ha.tail&&(H.push(u.expressions[N]?"lang.castString(lang.aCheck("+
l(g,u.expressions[N])+", 'TemplateLiteral'))":""),N++);fa="(["+H.join(",")+"]).join('')"}catch(ha){throw ha;}return fa;case "TemplateElement":return JSON.stringify(u.value?u.value.cooked:"");case "ForStatement":H="lastStatement \x3d lc.voidOperation; \n";null!==u.init&&(H+=l(g,u.init)+"; ");const Ha=ca(g),Ga=ca(g);H+="var "+Ha+" \x3d true; \n do { ";null!==u.update&&(H+=" if ("+Ha+"\x3d\x3d\x3dfalse) {\n "+l(g,u.update)+"  \n}\n "+Ha+"\x3dfalse; \n");null!==u.test&&(H+="var "+Ga+" \x3d "+l(g,u.test)+
"; ",H+="if ("+Ga+"\x3d\x3d\x3dfalse) { break; } else if ("+Ga+"!\x3d\x3dtrue) { lang.error('"+d.ExecutionErrorCodes.BooleanConditionRequired+"');   }\n");H+=l(g,u.body);null!==u.update&&(H+="\n "+l(g,u.update));return H+("\n"+Ha+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":ea=ca(g);const Aa=ca(g),W=ca(g);let ma="var "+ea+" \x3d "+l(g,u.right)+";\n";"VariableDeclaration"===u.left.type&&(ma+=l(g,u.left));let ta="VariableDeclaration"===u.left.type?u.left.declarations[0].id.name:
u.left.name;ta=ta.toLowerCase();aa(ta);H="";null!==g.localScope&&(void 0!==g.localScope[ta]?H="lscope['"+ta+"']":void 0!==g.localScope._SymbolsMap[ta]&&(H="lscope['"+g.localScope._SymbolsMap[ta]+"']"));N="";if(""===H)if(void 0!==g.globalScope[ta])H="gscope['"+ta+"']";else if(void 0!==g.globalScope._SymbolsMap[ta])H="gscope['"+g.globalScope._SymbolsMap[ta]+"']";else if(null!==g.localScope)if(g.undeclaredGlobalsInFunctions.has(ta))H="gscope['"+g.undeclaredGlobalsInFunctions.get(ta).manglename+"']",
N=g.undeclaredGlobalsInFunctions.get(ta).manglename;else{const ha={manglename:oa(g),node:u.left};g.undeclaredGlobalsInFunctions.set(ta,ha);H="gscope['"+ha.manglename+"']";N=ha.manglename}N&&(ma+="lang.chkAssig('"+N+"',runtimeCtx); \n");ma=ma+("if ("+ea+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+(ea+") || lc.isString("+ea+")) {var ")+(Aa+"\x3d"+ea+".length; \nfor(var ")+(W+"\x3d0; "+W+"\x3c"+Aa+"; "+W+"++) {\n");ma+=H+"\x3d"+W+";\n";ma+=l(g,u.body);ma+="\n}\n";
ma+=" lastStatement \x3d lc.voidOperation; \n";ma+=" \n}\n";ma+="else if (lc.isImmutableArray("+ea+")) {";ma=ma+("var "+Aa+"\x3d"+ea+".length(); \nfor(var ")+(W+"\x3d0; "+W+"\x3c"+Aa+"; "+W+"++) {\n");ma+=H+"\x3d"+W+";\n";ma+=l(g,u.body);ma+="\n}\n";ma+=" lastStatement \x3d lc.voidOperation; \n";ma+=" \n}\n";ma+="else if (( "+ea+" instanceof lang.Dictionary) || ( "+ea+" instanceof lang.Feature)) {";ma=ma+("var "+Aa+"\x3d"+ea+".keys(); \nfor(var ")+(W+"\x3d0; "+W+"\x3c"+Aa+".length; "+W+"++) {\n");
ma+=H+"\x3d"+Aa+"["+W+"];\n";ma+=l(g,u.body);ma+="\n}\n";ma+=" lastStatement \x3d lc.voidOperation; \n";ma+=" \n}\n";g.isAsync&&(ma+="else if (lc.isFeatureSet("+ea+")) {",ma=ma+("var "+Aa+"\x3d"+ea+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(W+"\x3dlang. graphicToFeature( yield "+Aa+".next(),"+ea+", runtimeCtx); "+W+"!\x3dnull; "+W+"\x3dlang. graphicToFeature( yield "+Aa+".next(),"+ea+", runtimeCtx)) {\n")+(H+"\x3d"+W+";\n"),ma+=l(g,u.body),ma+="\n}\n",ma+=" lastStatement \x3d lc.voidOperation; \n",
ma+=" \n}\n");return ma+"else { lastStatement \x3d lc.voidOperation; } \n";case "WhileStatement":H="lastStatement \x3d lc.voidOperation; \n";const Fa=ca(g);return H+=`\n  var ${Fa} = true;\n    do {\n      ${Fa} = ${l(g,u.test)};\n      if (${Fa}==false) {\n        break;\n      }\n      if (${Fa}!==true) {\n        lang.error('${d.ExecutionErrorCodes.BooleanConditionRequired}');\n      }\n      ${l(g,u.body)}\n    }\n    while (${Fa} !== false);\n    lastStatement = lc.voidOperation;\n  `;case "Identifier":return ra(g,
u);case "MemberExpression":try{let ha;!0===u.computed?ha=l(g,u.property):(ha="'"+u.property.name+"'",aa(u.property.name));var da="lang.member("+l(g,u.object)+","+ha+")"}catch(ha){throw ha;}return da;case "Literal":return null===u.value||void 0===u.value?"null":JSON.stringify(u.value);case "CallExpression":return ya(g,u);case "UnaryExpression":try{var ua="lang.unary("+l(g,u.argument)+",'"+u.operator+"')"}catch(ha){throw ha;}return ua;case "BinaryExpression":try{var Ba="lang.binary("+l(g,u.left)+","+
l(g,u.right)+",'"+u.operator+"')"}catch(ha){throw ha;}return Ba;case "LogicalExpression":try{if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,u);if("AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,u);if("\x26\x26"===u.operator||"||"===u.operator)var pa="(lang.logicalCheck("+l(g,
u.left)+") "+u.operator+" lang.logicalCheck("+l(g,u.right)+"))";else throw new d.ArcadeCompilationError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,null);}catch(ha){throw ha;}return pa;case "ArrayExpression":try{H=[];for(N=0;N<u.elements.length;N++)"Literal"===u.elements[N].type?H.push(l(g,u.elements[N])):H.push("lang.aCheck("+l(g,u.elements[N])+",'ArrayExpression')");V="["+H.join(",")+"]"}catch(ha){throw ha;}return V;case "ObjectExpression":H="lang.dictionary([";for(N=0;N<u.properties.length;N++){const ha=
u.properties[N];aa(ha.key.name);const Ca="Identifier"===ha.key.type?"'"+ha.key.name+"'":l(g,ha.key),Da=l(g,ha.value);0<N&&(H+=",");H+="lang.strCheck("+Ca+",'ObjectExpression'),lang.aCheck("+Da+", 'ObjectExpression')"}return H+"])";case "Property":throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.NeverReach,u);case "Array":throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.NeverReach,u);default:throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.Unrecognized,u);}}catch(Ea){throw Ea;
}}function w(g,u){let H=null;var N="";if("MemberExpression"===u.argument.type)return H=l(g,u.argument.object),!0===u.argument.computed?N=l(g,u.argument.property):(N="'"+u.argument.property.name+"'",aa(u.argument.property.name)),"lang.memberupdate("+H+","+N+",'"+u.operator+"',"+u.prefix+")";H=u.argument.name.toLowerCase();aa(H);if(null!==g.localScope){if(void 0!==g.localScope[H])return"lang.update(lscope, '"+H+"','"+u.operator+"',"+u.prefix+")";if(void 0!==g.localScope._SymbolsMap[H])return"lang.update(lscope, '"+
g.localScope._SymbolsMap[H]+"','"+u.operator+"',"+u.prefix+")"}if(void 0!==g.globalScope[H])return"lang.update(gscope, '"+H+"','"+u.operator+"',"+u.prefix+")";if(void 0!==g.globalScope._SymbolsMap[H])return"lang.update(gscope, '"+g.globalScope._SymbolsMap[H]+"','"+u.operator+"',"+u.prefix+")";if(null!==g.localScope){if(g.undeclaredGlobalsInFunctions.has(H))return"lang.update(gscope,lang.chkAssig( '"+g.undeclaredGlobalsInFunctions.get(H).manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")";N=
{manglename:oa(g),node:u.argument};g.undeclaredGlobalsInFunctions.set(H,N);return"lang.update(gscope, lang.chkAssig('"+N.manglename+"',runtimeCtx),'"+u.operator+"',"+u.prefix+")"}throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.InvalidIdentifier,u);}function r(g,u){const H=l(g,u.right);let N=null;var S="";if("MemberExpression"===u.left.type)return N=l(g,u.left.object),!0===u.left.computed?S=l(g,u.left.property):(S="'"+u.left.property.name+"'",aa(u.left.property.name)),"lang.assignmember("+
N+","+S+",'"+u.operator+"',"+H+")";N=u.left.name.toLowerCase();aa(N);if(null!==g.localScope){if(void 0!==g.localScope[N])return"lscope['"+N+"']\x3dlang.assign("+H+",'"+u.operator+"', lscope['"+N+"'])";if(void 0!==g.localScope._SymbolsMap[N])return"lscope['"+g.localScope._SymbolsMap[N]+"']\x3dlang.assign("+H+",'"+u.operator+"', lscope['"+g.localScope._SymbolsMap[N]+"'])"}if(void 0!==g.globalScope[N])return"gscope['"+N+"']\x3dlang.assign("+H+",'"+u.operator+"', gscope['"+N+"'])";if(void 0!==g.globalScope._SymbolsMap[N])return"gscope['"+
g.globalScope._SymbolsMap[N]+"']\x3dlang.assign("+H+",'"+u.operator+"', gscope['"+g.globalScope._SymbolsMap[N]+"'])";if(null!==g.localScope){if(g.undeclaredGlobalsInFunctions.has(N))return"gscope[lang.chkAssig('"+g.undeclaredGlobalsInFunctions.get(N).manglename+"',runtimeCtx)]\x3dlang.assign("+H+",'"+u.operator+"', gscope['"+g.undeclaredGlobalsInFunctions.get(N).manglename+"'])";S={manglename:oa(g),node:u.argument};g.undeclaredGlobalsInFunctions.set(N,S);return"gscope[lang.chkAssig('"+S.manglename+
"',runtimeCtx)]\x3dlang.assign("+H+",'"+u.operator+"', gscope['"+S.manglename+"'])"}throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.InvalidIdentifier,u);}function M(g,u){return"BlockStatement"===u.type?l(g,u):"ReturnStatement"===u.type||"BreakStatement"===u.type||"ContinueStatement"===u.type?l(g,u)+"; ":"UpdateExpression"===u.type?"lastStatement \x3d "+l(g,u)+"; ":"ExpressionStatement"===u.type?l(g,u):"ObjectExpression"===u.type?"lastStatement \x3d "+l(g,u)+"; ":l(g,u)+"; "}function a(g,
u){if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.BooleanConditionRequired,u);return`if (lang.mustBoolean(${l(g,u.test)}, runtimeCtx) === true) {\n    ${M(g,u.consequent)}\n  } `+(null!==u.alternate?"IfStatement"===u.alternate.type?" else "+a(g,u.alternate):` else {\n      ${M(g,u.alternate)}\n    }\n`:" else {\n      lastStatement \x3d lc.voidOperation;\n    }\n")}function Q(g,u){let H="";for(let N=0;N<u.body.length;N++)"EmptyStatement"!==
u.body[N].type&&(H="ReturnStatement"===u.body[N].type?H+(l(g,u.body[N])+"; \n"):"BreakStatement"===u.body[N].type?H+(l(g,u.body[N])+"; \n"):"ContinueStatement"===u.body[N].type?H+(l(g,u.body[N])+"; \n"):"UpdateExpression"===u.body[N].type?H+("lastStatement \x3d "+l(g,u.body[N])+"; \n"):"ObjectExpression"===u.body[N].type?H+("lastStatement \x3d "+l(g,u.body[N])+"; \n"):H+(l(g,u.body[N])+" \n"));return H}function aa(g){if("iif"===g)throw new d.ArcadeUncompilableError;if("decode"===g)throw new d.ArcadeUncompilableError;
if("when"===g)throw new d.ArcadeUncompilableError;if("defaultvalue"===g)throw new d.ArcadeUncompilableError;}function ba(g,u){let H=null===u.init?null:l(g,u.init);H===n.voidOperation&&(H=null);u=u.id.name.toLowerCase();aa(u);if(null!==g.localScope){if(void 0!==g.localScope[u])return"lscope['"+u+"']\x3d"+H+"; ";if(void 0!==g.localScope._SymbolsMap[u])return"lscope['"+g.localScope._SymbolsMap[u]+"']\x3d"+H+"; ";var N=oa(g);g.localScope._SymbolsMap[u]=N;g.mangleMap[u]=N;return"lscope['"+N+"']\x3d"+H+
"; "}if(void 0!==g.globalScope[u])return"gscope['"+u+"']\x3d"+H+"; ";if(void 0!==g.globalScope._SymbolsMap[u])return"gscope['"+g.globalScope._SymbolsMap[u]+"']\x3d"+H+"; ";if(g.undeclaredGlobalsInFunctions.has(u))return N=g.undeclaredGlobalsInFunctions.get(u).manglename,g.globalScope._SymbolsMap[u]=N,g.mangleMap[u]=N,g.undeclaredGlobalsInFunctions.delete(u),"gscope[lang.setAssig('"+N+"', runtimeCtx)]\x3d"+H+"; ";N=oa(g);g.globalScope._SymbolsMap[u]=N;g.mangleMap[u]=N;return"gscope['"+N+"']\x3d"+H+
"; "}function ra(g,u){try{const H=u.name.toLowerCase();aa(H);if(null!==g.localScope){if(void 0!==g.localScope[H])return"lscope['"+H+"']";if(void 0!==g.localScope._SymbolsMap[H])return"lscope['"+g.localScope._SymbolsMap[H]+"']"}if(void 0!==g.globalScope[H])return"gscope['"+H+"']";if(void 0!==g.globalScope._SymbolsMap[H])return"gscope['"+g.globalScope._SymbolsMap[H]+"']";if(null!==g.localScope){if(g.undeclaredGlobalsInFunctions.has(H))return"gscope[lang.chkAssig('"+g.undeclaredGlobalsInFunctions.get(H).manglename+
"',runtimeCtx)]";const N={manglename:oa(g),node:u.argument};g.undeclaredGlobalsInFunctions.set(H,N);return"gscope[lang.chkAssig('"+N.manglename+"',runtimeCtx)]"}throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.InvalidIdentifier,u);}catch(H){throw H;}}function ya(g,u){try{if("MemberExpression"===u.callee.type){if(!0===u.callee.computed)var H=l(g,u.callee.property);else H="'"+u.callee.property.name+"'",aa(u.callee.property.name);var N="[";for(var S=0;S<u.arguments.length;S++)0<S&&(N+=", "),
N+=l(g,u.arguments[S]);N+="]";return g.isAsync?"(yield lang.callModuleFunction("+l(g,u.callee.object)+","+N+","+H+",runtimeCtx))":"lang.callModuleFunction("+l(g,u.callee.object)+","+N+","+H+",runtimeCtx)"}if("Identifier"!==u.callee.type)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.FunctionNotFound,u);const X=u.callee.name.toLowerCase();if("iif"===X){try{if(3!==u.arguments.length)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.WrongNumberOfParameters,u);const da=ca(g);var fa=
`${g.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${da} = ${l(g,u.arguments[0])};\n\n        if (${da} === true) {\n          return  ${l(g,u.arguments[1])};\n        }\n        else if (${da} === false) {\n          return ${l(g,u.arguments[2])};\n        }\n        else {\n          lang.error('ExecutionErrorCodes.BooleanConditionRequired');\n        }\n      ${g.isAsync?"})}()))":"}()"}`}catch(da){throw da;}return fa}if("when"===
X){try{if(3>u.arguments.length)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.WrongNumberOfParameters,u);if(0===u.arguments.length%2)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.WrongNumberOfParameters,u);const da=ca(g);S="var ";for(var V=0;V<u.arguments.length-1;V+=2)S+=`${da} = lang.mustBoolean(${l(g,u.arguments[V])}, runtimeCtx);\n      if (${da} === true ) {\n        return ${l(g,u.arguments[V+1])}\n      }\n`;N=`${g.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        ${S}\n        return ${l(g,u.arguments[u.arguments.length-1])}\n        ${g.isAsync?"})}()))":"}()"}`}catch(da){throw da;}return N}if("defaultvalue"===X){try{if(2>u.arguments.length||3<u.arguments.length)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.WrongNumberOfParameters,u);const da=ca(g),ua=ca(g),Ba=ca(g),pa=ca(g);var ea=3===u.arguments.length?`${g.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n      var ${da} = ${l(g,
u.arguments[0])};\n      var ${ua} = ${l(g,u.arguments[1])};\n      var ${Ba} = [];\n      if (lang.isImmutableArray(${ua})) {\n        ${Ba} = ${ua}.toArray();\n      } else if (lang.isArray(${ua})) {\n        ${Ba} = ${ua};\n      } else {\n        lang.error('${d.ExecutionErrorCodes.InvalidParameter}');\n      }\n      if (${da} === null) {\n        return ${l(g,u.arguments[2])};\n      }\n      for (var ${pa} of ${Ba}) {\n        if (lang.isFeature(${da})) {\n          if (lang.isString(${pa}) === false) {\n            return ${l(g,
u.arguments[2])};\n          }\n          if (!${da}.hasField(${pa})) {\n            return ${l(g,u.arguments[2])};\n          }\n          ${da} = ${da}.field(${pa});\n        } else if (lang.isDictionary(${da})) {\n          if (lang.isString(${pa}) === false) {\n            return  ${l(g,u.arguments[2])};\n          }\n          if (!${da}.hasField(${pa})) {\n            return  ${l(g,u.arguments[2])};\n          }\n          ${da} = ${da}.field(${pa});\n        } else if (lang.isGeometry(${da})) {\n          if (lang.isString(${pa}) === false) {\n            return ${l(g,
u.arguments[2])};\n          }\n          ${da} = lang.geometryMember(${da}, ${pa}, null, null, 2);\n          if (${da} === null) {\n            return  ${l(g,u.arguments[2])};\n          }\n          if (${da} && ${da}.keystate === "notfound") {\n            return  ${l(g,u.arguments[2])};\n          }\n        } else if (lang.isArray(${da})) {\n          if (lang.isNumber(${pa}) === false) {\n            return  ${l(g,u.arguments[2])};\n          }\n          ${da} = ${da}[${pa}];\n          if (${da} === null || ${da} === undefined) {\n            return ${l(g,
u.arguments[2])};\n          }\n        } else if (lang.isImmutableArray(${da})) {\n          if (lang.isNumber(${pa}) === false) {\n            return  ${l(g,u.arguments[2])};\n          }\n          ${da} = ${da}.get(${pa});\n          if (${da} === null || ${da} === undefined) {\n            return  ${l(g,u.arguments[2])};\n          }\n        } else {\n          return  ${l(g,u.arguments[2])};\n        }\n      }\n      return ${da};\n      ${g.isAsync?"})}()))":"}()"}`:`${g.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":
"function() {"}\n        var ${da} = ${l(g,u.arguments[0])};\n        if (${da} === null) {\n          return  ${l(g,u.arguments[1])};\n        }\n        if (${da} === "") {\n          return  ${l(g,u.arguments[1])};\n        }\n        if (${da} === undefined) {\n          return  ${l(g,u.arguments[1])};\n        }\n        return ${da};\n      ${g.isAsync?"})}()))":"}()"}`}catch(da){throw da;}return ea}if("decode"===X){try{if(2>u.arguments.length)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.WrongNumberOfParameters,
u);if(2===u.arguments.length)S=`(${l(g,u.arguments[1])})`;else{if(0===(u.arguments.length-1)%2)throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.WrongNumberOfParameters,u);V=ca(g);var ia=ca(g);N="var ";for(H=1;H<u.arguments.length-1;H+=2)N+=`${ia} = ${l(g,u.arguments[H])};\n      if (lang.binary(${ia}, ${V}, "==") === true ) {\n        return ${l(g,u.arguments[H+1])}\n      }\n`;S=`${g.isAsync?"(yield (function() { \n return lang.__awaiter(this, void 0, void 0, function* () {":"function() {"}\n        var ${V} = ${l(g,
u.arguments[0])};\n        ${N}\n        return ${l(g,u.arguments[u.arguments.length-1])}\n        ${g.isAsync?"})}()))":"}()"}`}}catch(da){throw da;}return S}N="";null!==g.localScope&&(void 0!==g.localScope[X]?N="lscope['"+X+"']":void 0!==g.localScope._SymbolsMap[X]&&(N="lscope['"+g.localScope._SymbolsMap[X]+"']"));if(""===N)if(void 0!==g.globalScope[X])N="gscope['"+X+"']";else if(void 0!==g.globalScope._SymbolsMap[X])N="gscope['"+g.globalScope._SymbolsMap[X]+"']";else if(null!==g.localScope)if(g.undeclaredGlobalsInFunctions.has(X))N=
"gscope[lang.chkAssig('"+g.undeclaredGlobalsInFunctions.get(X).manglename+"',runtimeCtx)]";else{const da={manglename:oa(g),node:u.argument};g.undeclaredGlobalsInFunctions.set(X,da);N="gscope[lang.chkAssig('"+da.manglename+"',runtimeCtx)]"}if(""!==N){S="[";for(V=0;V<u.arguments.length;V++)0<V&&(S+=", "),S+=l(g,u.arguments[V]);S+="]";return g.isAsync?"(yield lang.callfunc("+N+","+S+",runtimeCtx) )":"lang.callfunc("+N+","+S+",runtimeCtx)"}throw new d.ArcadeCompilationError(g,d.ExecutionErrorCodes.FunctionNotFound,
u);}catch(X){throw X;}}function oa(g){g.symbols.symbolCounter++;return"_T"+g.symbols.symbolCounter.toString()}function ca(g){g.symbols.symbolCounter++;return"_Tvar"+g.symbols.symbolCounter.toString()}function U(g,u,H){const N={};g||={};H||={};N._SymbolsMap={};N.textformatting=1;N.infinity=1;N.pi=1;for(const S in u)N[S]=1;for(const S in H)N[S]=1;for(const S in g)N[S]=1;return N}function ja(g,u,H,N){H=H?new R:new O;g||={};u||={};const S=new b({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",
backwardslash:"\\"});S.immutable=!1;H._SymbolsMap={textformatting:1,infinity:1,pi:1};H.textformatting=S;H.infinity=Number.POSITIVE_INFINITY;H.pi=Math.PI;for(const fa in u)H[fa]=u[fa],H._SymbolsMap[fa]=1;for(const fa in g)H._SymbolsMap[fa]=1,H[fa]=g[fa]&&"esri.Graphic"===g[fa].declaredClass?m.createFromGraphic(g[fa],N??null):g[fa];return H}function wa(g,u){const H={mode:u,compiled:!0,functions:{},signatures:[],standardFunction:D,standardFunctionAsync:D,evaluateIdentifier:ka};for(let N=0;N<g.length;N++)g[N].registerFunctions(H);
if("sync"===u){for(const N in H.functions)K[N]=new k.NativeFunction(H.functions[N]),O.prototype[N]=K[N];for(g=0;g<H.signatures.length;g++)y.addFunctionDeclaration(H.signatures[g],"sync")}else{for(const N in H.functions)E[N]=new k.NativeFunction(H.functions[N]),R.prototype[N]=E[N];for(g=0;g<H.signatures.length;g++)y.addFunctionDeclaration(H.signatures[g],"async")}}function ka(g,u){u=u.name;if("_SymbolsMap"===u)throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.InvalidIdentifier,null);if(0<g.localStack.length){if("_t"!==
u.substr(0,2).toLowerCase()&&void 0!==g.localStack[g.localStack.length-1][u])return g.localStack[g.localStack.length-1][u];const H=g.mangleMap[u];if(void 0!==H&&void 0!==g.localStack[g.localStack.length-1][H])return g.localStack[g.localStack.length-1][H]}if("_t"!==u.substr(0,2).toLowerCase()&&void 0!==g.globalScope[u]||1===g.globalScope._SymbolsMap[u])return g.globalScope[u];u=g.mangleMap[u];if(void 0!==u)return g.globalScope[u]}function xa(g){console.log(g)}function G(g,u,H=!1){u={isAsync:H,moduleFactory:u.moduleFactory,
moduleFactoryMap:{},libraryResolver:new c.ArcadeModuleLoader(null,g.loadedModules),globalScope:U(u.vars,H?E:K,u.customfunctions),customfunctions:u.customfunctions,localScope:null,mangleMap:{},undeclaredGlobalsInFunctions:new Map,depthCounter:{depth:1},exports:{},console:xa,lrucache:u.lrucache,timeZone:u.timeZone??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};g=l(u,g);""===g&&(g="lc.voidOperation; ");const N=u.moduleFactory,S=u.moduleFactoryMap,fa=u.exports,V={};for(var ea in fa)V[ea]=
void 0!==u.mangleMap[ea]?u.mangleMap[ea]:ea;ea={lc:n.lc,lang:la,mangles:u.mangleMap,prepareModule(ia){return new qa(ia)},prepare(ia,X){let da=ia.spatialReference;if(null===da||void 0===da)da=new f({wkid:102100});const ua=ja(ia.vars,ia.customfunctions,X,ia.timeZone);return{localStack:[],isAsync:X,exports:fa,exportmangle:V,gdefs:{},moduleFactory:N,moduleFactoryMap:S,moduleSingletons:ia.moduleSingletons,mangleMap:this.mangles,spatialReference:da,globalScope:ua,abortSignal:void 0===ia.abortSignal||null===
ia.abortSignal?{aborted:!1}:ia.abortSignal,localScope:null,services:ia.services,console:ia.console??xa,lrucache:ia.lrucache,timeZone:ia.timeZone??null,interceptor:ia.interceptor,symbols:{symbolCounter:0},depthCounter:ia.depthCounter}}};return(new Function("context","spatialReference",H?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
g+"\n return lastStatement; }); } \n yield mainBody(); \n return this.prepareModule(runtimeCtx); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+g+"\n return lastStatement; } \n mainBody(); \n return this.prepareModule(runtimeCtx); ")).bind(ea)}class F extends k.ArcadeFunction{constructor(g,u){super();this.paramCount=u;this.fn=g}createFunction(g){return(...u)=>
{if(u.length!==this.paramCount)throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.WrongNumberOfParameters,null);return this.fn(...u)}}call(g,u){return this.fn(...u.arguments)}marshalledCall(g,u,H,N){return N(g,u,(S,fa,V)=>{V=V.map(ea=>!n.isFunctionParameter(ea)||ea instanceof k.ScopeMarshalledFunction?ea:k.wrapModuleScopedResponse(ea,g,N));S=this.call(H,{arguments:V});return q.isPromiseLike(S)?S.then(ea=>k.wrapModuleScopedResponse(ea,H,N)):S})}}const K={};p.registerFunctions(K,D);B.registerFunctions(K,
D);e.registerFunctions(K,D);C.registerFunctions(K,D);h.registerFunctions(K,D);K.iif=function(g,u){try{return D(g,u,(H,N,S)=>{throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.Unrecognized,u);})}catch(H){throw H;}};K.decode=function(g,u){try{return D(g,u,(H,N,S)=>{throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.Unrecognized,u);})}catch(H){throw H;}};K.when=function(g,u){try{return D(g,u,(H,N,S)=>{throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.Unrecognized,u);})}catch(H){throw H;
}};K.defaultvalue=function(g,u){try{return D(g,u,(H,N,S)=>{throw new d.ArcadeExecutionError(g,d.ExecutionErrorCodes.Unrecognized,u);})}catch(H){throw H;}};const E={};for(const g in K)E[g]=new k.NativeFunction(K[g]);z.registerFunctions(K,D);for(const g in K)K[g]=new k.NativeFunction(K[g]);const O=function(){};O.prototype=K;const R=function(){};R.prototype=E;p={fixSpatialReference:n.fixSpatialReference,parseArguments:function(g,u){const H=[];for(let N=0;N<u.arguments.length;N++)H.push(l(g,u.arguments[N]));
return H},standardFunction:D};wa([I.ArrayFunctions],"sync");wa([I.ArrayFunctions],"async");let T=0;const la={isNumber(g){return n.isNumber(g)},isArray(g){return n.isArray(g)},isImmutableArray(g){return n.isImmutableArray(g)},isFeature(g){return n.isFeature(g)},isString(g){return n.isString(g)},isDictionary(g){return n.isDictionary(g)},isGeometry(g){return n.isGeometry(g)},geometryMember(g,u,H,N,S=1){return C.geometryMember(g,u,H,N,S)},error(g){throw new d.ArcadeExecutionError(null,g,null);},__awaiter(g,
u,H,N){return new Promise((S,fa)=>{function V(X){try{ia(N.next(X))}catch(da){fa(da)}}function ea(X){try{ia(N["throw"](X))}catch(da){fa(da)}}function ia(X){X.done?S(X.value):X.value?.then?X.value.then(V,ea):(T++,0===T%100?setTimeout(()=>{T=0;V(X.value)},0):V(X.value))}ia((N=N.apply(g,u||[])).next())})},functionDepthchecker(g,u){return function(){u.depthCounter.depth++;u.localStack.push([]);if(64<u.depthCounter.depth)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.MaximumCallDepth,null);
const H=g.apply(this,arguments);if(q.isPromiseLike(H))return H.then(N=>{u.depthCounter.depth--;--u.localStack.length;return N});u.depthCounter.depth--;--u.localStack.length;return H}},chkAssig(g,u){if(void 0===u.gdefs[g])throw new d.ArcadeExecutionError(u,d.ExecutionErrorCodes.InvalidIdentifier,null);return g},mustBoolean(g,u){if(!0===g||!1===g)return g;throw new d.ArcadeExecutionError(u,d.ExecutionErrorCodes.BooleanConditionRequired,null);},setAssig(g,u){u.gdefs[g]=1;return g},castString(g){return n.toString(g)},
aCheck(g,u){if(n.isFunctionParameter(g)){if("ArrayExpression"===u)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInArray,null);if("ObjectExpression"===u)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInDictionary,null);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInTemplateLiteral,null);}return g===n.voidOperation?null:g},Dictionary:b,Feature:m,UserDefinedCompiledFunction:F,dictionary(g){const u={},H=new Map;for(let N=0;N<g.length;N+=
2){if(n.isFunctionParameter(g[N+1]))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.NoFunctionInDictionary,null);if(!1===n.isString(g[N]))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyMustBeString,null);let S=g[N].toString();const fa=S.toLowerCase();H.has(fa)?S=H.get(fa):H.set(fa,S);u[S]=g[N+1]===n.voidOperation?null:g[N+1]}g=new b(u);g.immutable=!1;return g},strCheck(g){if(!1===n.isString(g))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyMustBeString,
null);return g},unary(g,u){if(n.isBoolean(g)){if("!"===u)return!g;if("-"===u)return-1*n.toNumber(g);if("+"===u)return 1*n.toNumber(g);if("~"===u)return~n.toNumber(g);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedUnaryOperator,null);}if("-"===u)return-1*n.toNumber(g);if("+"===u)return 1*n.toNumber(g);if("~"===u)return~n.toNumber(g);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedUnaryOperator,null);},logicalCheck(g){if(!1===n.isBoolean(g))throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.LogicExpressionOrAnd,null);return g},logical(g,u,H){if(n.isBoolean(g)&&n.isBoolean(u))switch(H){case "||":return g||u;case "\x26\x26":return g&&u}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.LogicExpressionOrAnd,null);},binary(g,u,H){switch(H){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return n.binaryOperator(n.toNumber(g),n.toNumber(u),H);case "\x3d\x3d":return n.equalityTest(g,u);case "\x3d":return n.equalityTest(g,u);case "!\x3d":return!n.equalityTest(g,
u);case "\x3c":return n.greaterThanLessThan(g,u,H);case "\x3e":return n.greaterThanLessThan(g,u,H);case "\x3c\x3d":return n.greaterThanLessThan(g,u,H);case "\x3e\x3d":return n.greaterThanLessThan(g,u,H);case "+":return n.isString(g)||n.isString(u)?n.toString(g)+n.toString(u):n.toNumber(g)+n.toNumber(u);case "-":return n.toNumber(g)-n.toNumber(u);case "*":return n.toNumber(g)*n.toNumber(u);case "/":return n.toNumber(g)/n.toNumber(u);case "%":return n.toNumber(g)%n.toNumber(u);default:throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.UnsupportedOperator,null);}},assign(g,u,H){switch(u){case "\x3d":return g===n.voidOperation?null:g;case "/\x3d":return n.toNumber(H)/n.toNumber(g);case "*\x3d":return n.toNumber(H)*n.toNumber(g);case "-\x3d":return n.toNumber(H)-n.toNumber(g);case "+\x3d":return n.isString(H)||n.isString(g)?n.toString(H)+n.toString(g):n.toNumber(H)+n.toNumber(g);case "%\x3d":return n.toNumber(H)%n.toNumber(g);default:throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.UnsupportedOperator,
null);}},update(g,u,H,N){const S=n.toNumber(g[u]);g[u]="++"===H?S+1:S-1;return!1===N?S:"++"===H?S+1:S-1},graphicToFeature(g,u,H){return null===g?null:m.createFromGraphicLikeObject(g.geometry,g.attributes,u,H.timeZone)},memberupdate(g,u,H,N){let S;if(n.isArray(g))if(n.isNumber(u)){0>u&&(u=g.length+u);if(0>u||u>=g.length)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);S=n.toNumber(g[u]);g[u]="++"===H?S+1:S-1}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(g instanceof b){if(!1===n.isString(u))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===g.hasField(u))S=n.toNumber(g.field(u)),g.setField(u,"++"===H?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null,{key:u});}else if(n.isFeature(g)){if(!1===n.isString(u))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===g.hasField(u))S=n.toNumber(g.field(u)),g.setField(u,
"++"===H?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);}else{if(n.isImmutableArray(g))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.Immutable,null);if(g instanceof qa){if(!1===n.isString(u))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(!0===g.hasGlobal(u))S=n.toNumber(g.global(u)),g.setGlobal(u,"++"===H?S+1:S-1);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleExportNotFound,
null);}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);}return!1===N?S:"++"===H?S+1:S-1},assignmember(g,u,H,N){if(n.isArray(g))if(n.isNumber(u)){0>u&&(u=g.length+u);if(0>u||u>g.length)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);if(u===g.length&&"\x3d"!==H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);g[u]=this.assign(N,H,g[u])}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ArrayAccessorMustBeNumber,
null);else if(g instanceof b){if(!1===n.isString(u))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===g.hasField(u))g.setField(u,this.assign(N,H,g.field(u)));else{if("\x3d"!==H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);g.setField(u,this.assign(N,H,null))}}else if(n.isFeature(g)){if(!1===n.isString(u))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.KeyAccessorMustBeString,null);if(!0===g.hasField(u))g.setField(u,
this.assign(N,H,g.field(u)));else{if("\x3d"!==H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FieldNotFound,null);g.setField(u,this.assign(N,H,null))}}else{if(n.isImmutableArray(g))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.Immutable,null);if(g instanceof qa){if(!1===n.isString(u))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.ModuleAccessorMustBeString,null);if(g.hasGlobal(u))g.setGlobal(u,this.assign(N,H,g.global(u)));else throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.ModuleExportNotFound,null);}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);}},member(g,u){if(null===g)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.MemberOfNull,null);if(g instanceof b||n.isFeature(g)){if(n.isString(u))return g.field(u);throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g instanceof v){if(n.isString(u))return C.geometryMember(g,u,null,null);throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isArray(g)){if(n.isNumber(u)&&isFinite(u)&&Math.floor(u)===u){0>u&&(u=g.length+u);if(u>=g.length||0>u)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);return g[u]}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isString(g)){if(n.isNumber(u)&&isFinite(u)&&Math.floor(u)===u){0>u&&(u=g.length+u);if(u>=g.length||0>u)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,
null);return g[u]}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(n.isImmutableArray(g)){if(n.isNumber(u)&&isFinite(u)&&Math.floor(u)===u){0>u&&(u=g.length()+u);if(u>=g.length()||0>u)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.OutOfBounds,null);return g.get(u)}throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidMemberAccessKey,null);}if(g instanceof qa&&n.isString(u))return g.global(u);throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.InvalidMemberAccessKey,null);},callfunc(g,u,H){return g.call(H,{arguments:u,preparsed:!0})},loadModule(g,u){g=u.moduleFactoryMap[g];if(u.moduleSingletons[g])return u.moduleSingletons[g];const H=u.moduleFactory[g]({vars:{},moduleSingletons:u.moduleSingletons,depthCounter:u.depthCounter,console:u.console,abortSignal:u.abortSignal,isAsync:u.isAsync,services:u.services,lrucache:u.lrucache,timeZone:u.timeZone??null,interceptor:u.interceptor},u.spatialReference);return u.moduleSingletons[g]=
H},callModuleFunction(g,u,H,N){if(!(g instanceof qa))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.FunctionNotFound,null);g=g.global(H);if(!1===n.isFunctionParameter(g))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CallNonFunction,null);return g.call(N,{preparsed:!0,arguments:u})}};class qa extends A.ArcadeModule{constructor(g){super(null);this.moduleContext=g}hasGlobal(g){void 0===this.moduleContext.exports[g]&&(g=g.toLowerCase());return void 0!==this.moduleContext.exports[g]?
!0:!1}setGlobal(g,u){const H=this.moduleContext.globalScope;g=g.toLowerCase();if(n.isFunctionParameter(u))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.AssignModuleFunction,null);H[this.moduleContext.exportmangle[g]]=u}global(g){const u=this.moduleContext.globalScope;g=g.toLowerCase();const H=u[this.moduleContext.exportmangle[g]];if(void 0===H)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidIdentifier,null);if(n.isFunctionParameter(H)&&!(H instanceof k.ScopeMarshalledFunction)){const N=
new k.ScopeMarshalledFunction;N.fn=H;N.parameterEvaluator=D;N.context=this.moduleContext;return u[this.moduleContext.exportmangle[g]]=N}return H}}L.UserDefinedCompiledFunction=F;L.compileScript=function(g,u,H=!1){null===u&&(u={vars:{},customfunctions:{}});var N=null;g.usesModules&&(N=new c.ArcadeModuleLoader(null,g.loadedModules));N={isAsync:H,globalScope:U(u.vars,H?E:K,u.customfunctions),moduleFactory:{},moduleFactoryMap:{},undeclaredGlobalsInFunctions:new Map,customfunctions:u.customfunctions,libraryResolver:N,
localScope:null,mangleMap:{},depthCounter:{depth:1},exports:{},console:xa,lrucache:u.lrucache,timeZone:u.timeZone??null,interceptor:u.interceptor,services:u.services,symbols:{symbolCounter:0}};g=l(N,g);""===g&&(g="lc.voidOperation; ");0<N.undeclaredGlobalsInFunctions.size&&N.undeclaredGlobalsInFunctions.forEach(X=>{throw new d.ArcadeCompilationError(u,d.ExecutionErrorCodes.InvalidIdentifier,X.node);});const S=N.moduleFactory,fa=N.moduleFactoryMap,V=N.exports,ea={};for(var ia in V)ea[ia]=void 0!==
N.mangleMap[ia]?N.mangleMap[ia]:ia;ia={lc:n.lc,lang:la,mangles:N.mangleMap,postProcess(X){X instanceof n.returnResult&&(X=X.value);X instanceof n.implicitResult&&(X=X.value);X===n.voidOperation&&(X=null);if(X===n.breakResult)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.IllegalResult,null);if(X===n.continueResult)throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.IllegalResult,null);if(n.isFunctionParameter(X))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.IllegalResult,
null);return X},prepare(X,da){let ua=X.spatialReference;if(null===ua||void 0===ua)ua=f.WebMercator;const Ba=ja(X.vars,X.customfunctions,da,X.timeZone);return{localStack:[],isAsync:da,moduleFactory:S,moduleFactoryMap:fa,mangleMap:this.mangles,moduleSingletons:{},exports:V,gdefs:{},exportmangle:ea,spatialReference:ua,globalScope:Ba,abortSignal:void 0===X.abortSignal||null===X.abortSignal?{aborted:!1}:X.abortSignal,localScope:null,services:X.services,console:X.console??xa,lrucache:X.lrucache,timeZone:X.timeZone??
null,interceptor:X.interceptor,symbols:{symbolCounter:0},depthCounter:{depth:1}}}};return(new Function("context","spatialReference",H?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+g+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":
"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+g+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(ia)};L.enableAsyncSupport=async function(){const g=await new Promise((u,H)=>t(["./functions/geomasync"],u,H));wa([g],"async");return!0};L.executeScript=function(g,u){return g(u)};L.extend=wa;L.functionHelper=p;Object.defineProperty(L,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModule":function(){define(["exports"],function(t){class L{constructor(A){this.source=A}}t.ArcadeModule=L;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleLoader":function(){define(["exports"],function(t){class L{constructor(A,c){this._moduleSingletons=A;this._syntaxModules=c}loadLibrary(A){return null==this._syntaxModules?null:(A=this._syntaxModules[A.toLowerCase()])?{syntax:A.script,uri:A.uri}:null}}
t.ArcadeModuleLoader=L;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Dictionary":function(){define("./ArcadeDate ./deepClone ./executionError ./ImmutableArray ../chunks/languageUtils ../geometry/Geometry".split(" "),function(t,L,A,c,b,d){function m(n,y,I=!1,p=!1){if(null===n||void 0===n)return null;if(b.isNumber(n))return b.toNumber(n);if(b.isBoolean(n))return b.toBoolean(n);if(b.isString(n))return b.toString(n);if(b.isDate(n))return b.toDate(n,y);if(b.isDateOnly(n)||
b.isTime(n))return n;if(b.isArray(n)){var C=[];for(var z of n)C.push(m(z,y,I,p));return C}if(p&&b.isGeometry(n))return n;z=new k;z.immutable=!1;for(C of Object.keys(n)){const e=n[C];void 0!==e&&z.setField(C,m(e,y,I,p))}z.immutable=I;return z}class k{constructor(n){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=n instanceof k?n.attributes:void 0===n?{}:null===n?{}:n}field(n){const y=n.toLowerCase(),I=this.attributes[n];if(void 0!==I)return I;
for(const p in this.attributes)if(p.toLowerCase()===y)return this.attributes[p];throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.FieldNotFound,null,{key:n});}setField(n,y){if(this.immutable)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.Immutable,null);if(b.isFunctionParameter(y))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.NoFunctionInDictionary,null);const I=n.toLowerCase();y instanceof Date&&(y=t.ArcadeDate.dateJSToArcadeDate(y));if(void 0===this.attributes[n])for(const p in this.attributes)if(p.toLowerCase()===
I){this.attributes[p]=y;return}this.attributes[n]=y}hasField(n){const y=n.toLowerCase();if(void 0!==this.attributes[n])return!0;for(const I in this.attributes)if(I.toLowerCase()===y)return!0;return!1}keys(){let n=[];for(const y in this.attributes)n.push(y);return n=n.sort()}castToText(n=!1){let y="";for(const I in this.attributes){""!==y&&(y+=",");const p=this.attributes[I];null==p?y+=JSON.stringify(I)+":null":b.isBoolean(p)||b.isNumber(p)||b.isString(p)?y+=JSON.stringify(I)+":"+JSON.stringify(p):
p instanceof d?y+=JSON.stringify(I)+":"+b.toStringExplicit(p):p instanceof c?y+=JSON.stringify(I)+":"+b.toStringExplicit(p,null,n):p instanceof Array?y+=JSON.stringify(I)+":"+b.toStringExplicit(p,null,n):p instanceof t.ArcadeDate?y=n?y+(JSON.stringify(I)+":"+JSON.stringify(p.getTime())):y+(JSON.stringify(I)+":"+p.stringify()):null!==p&&"object"===typeof p&&void 0!==p.castToText&&(y+=JSON.stringify(I)+":"+p.castToText(n))}return"{"+y+"}"}static convertObjectToArcadeDictionary(n,y,I=!0,p=!1){const C=
new k;C.immutable=!1;for(const z in n){const e=n[z];void 0!==e&&C.setField(z.toString(),m(e,y,I,p))}C.immutable=I;return C}static convertJsonToArcade(n,y,I=!1){return m(n,y,I)}castAsJson(n=null){const y={};for(let I in this.attributes){const p=this.attributes[I];void 0!==p&&(n?.keyTranslate&&(I=n.keyTranslate(I)),y[I]=b.castAsJson(p,n))}return y}async castDictionaryValueAsJsonAsync(n,y,I,p=null,C){I=await b.castAsJsonAsync(I,p,C);return n[y]=I}async castAsJsonAsync(n=null,y=null){const I={},p=[];
for(let C in this.attributes){const z=this.attributes[C];y?.keyTranslate&&(C=y.keyTranslate(C));void 0!==z&&(b.isSimpleType(z)||z instanceof d||z instanceof t.ArcadeDate?I[C]=b.castAsJson(z,y):p.push(this.castDictionaryValueAsJsonAsync(I,C,z,n,y)))}0<p.length&&await Promise.all(p);return I}deepClone(){const n=new k;n.immutable=!1;for(const y of this.keys())n.setField(y,L.deepClone(this.field(y)));return n}}return k})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone",
"../chunks/datetime"],function(t,L,A,c){function b(y,I,p){return y<I?y-I:y>p?y-p:0}function d(y,I=!0){if(y instanceof c.Zone)return y;if("system"===y.toLowerCase())return"system";if("utc"===y.toLowerCase())return"UTC";if("unknown"===y.toLowerCase())return A.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(y)){const p=c.FixedOffsetZone.parseSpecifier("UTC"+(y.startsWith("+")||y.startsWith("-")?"":"+")+y);if(p)return p}y=c.IANAZone.create(y);if(!y.isValid){if(I)throw new k(t.ArcadeDateErrorCodes.TimeZoneNotRecognized);
return null}return y}t.ArcadeDateErrorCodes=void 0;(t.ArcadeDateErrorCodes||(t.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const m={[t.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class k extends Error{constructor(y,I){super(L.replace(m[y],I));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,k)}}class n{constructor(y){this._date=y;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(y=
0,I=1,p=1,C=0,z=0,e=0,h=0,B){if(isNaN(y)||isNaN(I)||isNaN(p)||isNaN(C)||isNaN(z)||isNaN(e)||isNaN(h))return null;const q=c.DateTime.local(y,I).daysInMonth;y=c.DateTime.fromObject({day:1>p?1:p>q?q:p,year:y,month:1>I?1:12<I?12:I,hour:0>C?0:23<C?23:C,minute:0>z?0:59<z?59:z,second:0>e?0:59<e?59:e,millisecond:0>h?0:999<h?999:h},{zone:d(B)});y=y.plus({months:b(I,1,12),days:b(p,1,q),hours:b(C,0,23),minutes:b(z,0,59),seconds:b(e,0,59),milliseconds:b(h,0,999)});return new n(y)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(y,I){I=d(I);return y.isUnknownTimeZone||I===A.UnknownTimeZone.instance?n.fromParts(y.year,y.monthJS+1,y.day,y.hour,y.minute,y.second,y.millisecond,I):new n(y._date.setZone(I))}static dateJSToArcadeDate(y){return new n(c.DateTime.fromJSDate(y,{zone:"system"}))}static dateJSAndZoneToArcadeDate(y,I="system"){I=d(I);return new n(c.DateTime.fromJSDate(y,{zone:I}))}static unknownEpochToArcadeDate(y){return new n(c.DateTime.fromMillis(y,{zone:A.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(y){return new n(c.DateTime.fromMillis(y.getTime(),
{zone:A.UnknownTimeZone.instance}))}static epochToArcadeDate(y,I="system"){I=d(I);return new n(c.DateTime.fromMillis(y,{zone:I}))}static dateTimeToArcadeDate(y){return new n(y)}clone(){return new n(this._date)}changeTimeZone(y){y=d(y);return n.dateTimeToArcadeDate(this._date.setZone(y))}static dateTimeAndZoneToArcadeDate(y,I){I=d(I);return y.zone===A.UnknownTimeZone.instance||I===A.UnknownTimeZone.instance?n.fromParts(y.year,y.month,y.day,y.hour,y.minute,y.second,y.millisecond,I):new n(y.setZone(I))}static nowToArcadeDate(y){y=
d(y);return new n(c.DateTime.fromJSDate(new Date,{zone:y}))}static nowUTCToArcadeDate(){return new n(c.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===n.systemTimeZoneCanonicalName}equals(y){return this.isSystem&&y.isSystem?this.toNumber()===y.toNumber():this.isUnknownTimeZone!==y.isUnknownTimeZone?!1:this._date.equals(y._date)}get isUnknownTimeZone(){return this._date.zone===A.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let y=
this._date.weekday;6<y&&(y=0);return y}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const y=this.zone;return"fixed"===y.type?0===y.fixed?"UTC":y.formatOffset(0,"short"):y.name}stringify(){return JSON.stringify(this.toJSDate())}plus(y){return new n(this._date.plus(y))}diff(y,I="milliseconds"){return this._date.diff(y._date,I)[I]}toISODate(){return this._date.toISODate()}toISOString(y){return y?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(y,I){return this._date.toISOTime({suppressMilliseconds:y,
includeOffset:I&&!this.isUnknownTimeZone})}toFormat(y,I){this.isUnknownTimeZone&&(y=y.replaceAll("Z",""));return this._date.toFormat(y,I)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new n(this._date.toUTC())}toLocal(){return new n(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(y){if(!y)return null;
y=c.DateTime.fromISO(y,{setZone:!0});return new n(y)}}t.ArcadeDate=n;t.ArcadeDateError=k;t.arcadeDateErrorMessages=m;t.createDateTimeZone=d;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/deepClone":function(){define(["exports","./ArcadeModule","../chunks/languageUtils"],function(t,L,A){function c(d){if(null===d)return null;if(A.isDate(d))return d.clone();if(A.isSimpleType(d))return d;if(A.isGeometry(d))return d.clone();if(A.isImmutableArray(d))return d.toArray().map(m=>
c(m));if(A.isArray(d))return d.map(m=>c(m));if(A.isFeature(d))return b.createFromArcadeFeature(d);if(A.isFeatureSetCollection(d)||A.isFeatureSet(d))return d;if(A.isDictionary(d)||"esri.arcade.Attachment"===d?.declaredClass)return d.deepClone();if("esri.arcade.Portal"===d?.declaredClass||d instanceof L.ArcadeModule)return d;A.isFunctionParameter(d);return d}let b;t.configureDeepClone=function(d){b=d};t.deepClone=c;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/languageUtils":function(){define("exports ../config ../kernel ../arcade/ArcadeDate ../arcade/ArcadeModule ../arcade/executionError ../arcade/FunctionWrapper ../arcade/ImmutableArray ../arcade/ImmutablePathArray ../arcade/ImmutablePointArray ../arcade/featureset/support/shared ../core/number ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference ../geometry/support/coordsUtils ../geometry/support/jsonUtils ../intl/locale ./datetime".split(" "),
function(t,L,A,c,b,d,m,k,n,y,I,p,C,z,e,h,B,q,v,f,D,l,w,r,M){function a(x,J,P){return""===J||null===J||void 0===J||J===P||J===P?x:x=x.split(J).join(P)}function Q(x){return x instanceof m.ArcadeFunction}function aa(x){return x instanceof b.ArcadeModule}function ba(x){return oa(x)||U(x)||O(x)||R(x)||T(x)||ca(x)||null===x||x===za||"number"===typeof x?!0:!1}function ra(x,J){return void 0===x?J:x}function ya(x){return null==x?"":ka(x)||E(x)?"Array":O(x)?"Date":T(x)?"Time":R(x)?"DateOnly":oa(x)?"String":
ca(x)?"Boolean":U(x)?"Number":"esri.arcade.Attachment"===x?.declaredClass?"Attachment":"esri.arcade.Portal"===x?.declaredClass?"Portal":"esri.arcade.Dictionary"===x?.declaredClass?"Dictionary":x instanceof b.ArcadeModule?"Module":xa(x)?"Feature":x instanceof q?"Point":x instanceof v?"Polygon":x instanceof f?"Polyline":x instanceof B?"Multipoint":x instanceof e?"Extent":Q(x)?"Function":G(x)?"FeatureSet":K(x)?"FeatureSetCollection":x===za?"":"number"===typeof x&&isNaN(x)?"Number":"Unrecognized Type"}
function oa(x){return"string"===typeof x||x instanceof String}function ca(x){return"boolean"===typeof x}function U(x){return"number"===typeof x}function ja(x){return"number"===typeof x&&isFinite(x)&&Math.floor(x)===x}function wa(x){return x instanceof h}function ka(x){return x instanceof Array}function xa(x){return"esri.arcade.Feature"===x?.arcadeDeclaredClass?!0:!1}function G(x){return"esri.arcade.featureset.support.FeatureSet"===x?.declaredRootClass}function F(x){return"esri.arcade.Dictionary"===
x?.declaredClass}function K(x){return"esri.arcade.featureSetCollection"===x?.declaredRootClass}function E(x){return x instanceof k}function O(x){return x instanceof c.ArcadeDate}function R(x){return x instanceof C.DateOnly}function T(x){return x instanceof z.TimeOnly}function la(x){return null!=x&&"object"===typeof x}function qa(x){return x instanceof Date}function g(x,J,P,Z,Y){if(x.length<J||x.length>P)throw new d.ArcadeExecutionError(Z,d.ExecutionErrorCodes.WrongNumberOfParameters,Y);}function u(x){return 0>
x?-Math.round(-x):Math.round(x)}function H(){let x=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,J=>{const P=(x+16*Math.random())%16|0;x=Math.floor(x/16);return("x"===J?P:P&3|8).toString(16)})}function N(x,J){if(!isNaN(x)){if(void 0===J||null===J||""===J)return x.toString();J=a(J,"\u2030","");J=a(J,"\u00a4","");return p.format(x,{pattern:J})}return x.toString()}function S(x,J){return void 0===J||null===J||""===J?x.toISOString(!0):x.toFormat(fa(J),{locale:r.getLocale(),
numberingSystem:"latn"})}function fa(x,J=!1){x=x.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let P="";const Z=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const Y of x.match(Z)||[])switch(Y){case "D":P+="d";break;case "DD":P+="dd";break;case "DDD":P+="o";break;case "d":P+="c";break;case "ddd":P+="ccc";break;case "dddd":P+="cccc";break;
case "M":P+="L";break;case "MM":P+="LL";break;case "MMM":P+="LLL";break;case "MMMM":P+="LLLL";break;case "YY":P+="yy";break;case "Y":case "YYYY":P+="yyyy";break;case "Q":P+="q";break;case "Z":P+="Z";break;case "ZZ":P+="ZZ";break;case "ZZZ":P+="ZZZ";break;case "ZZZZ":P=J?P+"[ZZZZ]":P+"ZZZZ";break;case "ZZZZZ":P=J?P+"[ZZZZZ]":P+"ZZZZZ";break;case "S":P+="'S'";break;case "SS":P+="'SS'";break;case "SSS":P+="u";break;case "A":case "a":P+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":P+=
Y;break;default:P=2<=Y.length&&"["===Y.slice(0,1)&&"]"===Y.slice(-1)?P+`'${Y.slice(1,-1)}'`:P+`'${Y}'`}return P}function V(x,J,P){switch(P){case "\x3e":return x>J;case "\x3c":return x<J;case "\x3e\x3d":return x>=J;case "\x3c\x3d":return x<=J}return!1}function ea(x,J,P){if(null===x){if(null===J||J===za)return V(null,null,P);if(U(J))return V(0,J,P);if(oa(J)||ca(J))return V(0,pa(J),P);if(O(J))return V(0,J.toNumber(),P);if(T(J)||R(J))return V(x,J.toNumber(),P)}if(x===za){if(null===J||J===za)return V(null,
null,P);if(U(J))return V(0,J,P);if(oa(J)||ca(J))return V(0,pa(J),P);if(O(J))return V(0,J.toNumber(),P);if(T(J)||R(J))return V(x,J.toNumber(),P)}else if(U(x)){if(U(J))return V(x,J,P);if(ca(J))return V(x,pa(J),P);if(null===J||J===za)return V(x,0,P);if(oa(J))return V(x,pa(J),P);if(O(J)||T(J)||R(J))return V(x,J.toNumber(),P)}else if(oa(x)){if(oa(J))return V(X(x),X(J),P);if(O(J)||T(J)||R(J))return V(pa(x),J.toNumber(),P);if(U(J))return V(pa(x),J,P);if(null===J||J===za)return V(pa(x),0,P);if(ca(J))return V(pa(x),
pa(J),P)}else if(O(x)){if(O(J))return x.timeZone!==J.timeZone&&(x.isUnknownTimeZone?x=c.ArcadeDate.arcadeDateAndZoneToArcadeDate(x,J.timeZone):J.isUnknownTimeZone&&(J=c.ArcadeDate.arcadeDateAndZoneToArcadeDate(J,x.timeZone))),V(x.toNumber(),J.toNumber(),P);if(null===J||J===za)return V(x.toNumber(),0,P);if(U(J))return V(x.toNumber(),J,P);if(ca(J)||oa(J))return V(x.toNumber(),pa(J),P);if(T(J))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(R(J))return V(x.toNumber(),
J.toNumber(),P)}else if(ca(x)){if(ca(J))return V(x,J,P);if(U(J))return V(pa(x),pa(J),P);if(O(J)||T(J)||R(J))return V(pa(x),J.toNumber(),P);if(null===J||J===za)return V(pa(x),0,P);if(oa(J))return V(pa(x),pa(J),P)}else if(R(x)){if(O(J))return V(x.toNumber(),J.toNumber(),P);if(null===J||J===za)return V(x.toNumber(),0,P);if(U(J))return V(x.toNumber(),J,P);if(ca(J)||oa(J))return V(x.toNumber(),pa(J),P);if(T(J))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(R(J))return V(x.toNumber(),
J.toNumber(),P)}else if(T(x)){if(O(J))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CannotCompareDateAndTime,null);if(null===J||J===za)return V(x.toNumber(),0,P);if(U(J))return V(x.toNumber(),J,P);if(ca(J)||oa(J))return V(x.toNumber(),pa(J),P);if(T(J))return V(x.toNumber(),J.toNumber(),P);if(R(J))throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.CannotCompareDateAndTime,null);}return!ia(x,J)||"\x3c\x3d"!==P&&"\x3e\x3d"!==P?!1:!0}function ia(x,J){if(x===J||null===x&&J===za||
null===J&&x===za)return!0;if(O(x)&&O(J)||T(x)&&T(J)||R(x)&&R(J))return x.equals(J);if(x instanceof n||x instanceof y)return x.equalityTest(J);if(x instanceof q&&J instanceof q){const P=x.cache._arcadeCacheId,Z=J.cache._arcadeCacheId;if(void 0!==P&&null!==P)return P===Z}return la(x)&&la(J)&&(x._arcadeCacheId===J._arcadeCacheId&&void 0!==x._arcadeCacheId&&null!==x._arcadeCacheId||x._underlyingGraphic===J._underlyingGraphic&&void 0!==x._underlyingGraphic&&null!==x._underlyingGraphic)?!0:!1}function X(x,
J){if(oa(x))return x;if(null===x)return"";if(U(x))return N(x,J);if(ca(x))return x.toString();if(O(x))return S(x,J);if(T(x)||R(x))return x.toFormat(J);if(x instanceof h)return JSON.stringify(x.toJSON());if(ka(x)){J=[];for(var P=0;P<x.length;P++)J[P]=Ba(x[P]);return"["+J.join(",")+"]"}if(x instanceof k){J=[];for(P=0;P<x.length();P++)J[P]=Ba(x.get(P));return"["+J.join(",")+"]"}return null!==x&&"object"===typeof x&&void 0!==x.castToText?x.castToText():Q(x)?"object, Function":x===za?"":aa(x)?"object, Module":
""}function da(x){const J=[];if(!ka(x))return null;if(x instanceof k){for(var P=0;P<x.length();P++)J[P]=pa(x.get(P));return J}for(P=0;P<x.length;P++)J[P]=pa(x[P]);return J}function ua(x,J,P=!1){if(oa(x))return x;if(null===x)return"";if(U(x))return N(x,J);if(ca(x))return x.toString();if(O(x))return S(x,J);if(T(x)||R(x))return x.toFormat(J);if(x instanceof h)return x instanceof e?'{"xmin":'+x.xmin.toString()+',"ymin":'+x.ymin.toString()+","+(x.hasZ?'"zmin":'+x.zmin.toString()+",":"")+(x.hasM?'"mmin":'+
x.mmin.toString()+",":"")+'"xmax":'+x.xmax.toString()+',"ymax":'+x.ymax.toString()+","+(x.hasZ?'"zmax":'+x.zmax.toString()+",":"")+(x.hasM?'"mmax":'+x.mmax.toString()+",":"")+'"spatialReference":'+Ca(x.spatialReference)+"}":Ca(x.toJSON(),(Y,na)=>Y.key===na.key?0:"spatialReference"===Y.key?1:"spatialReference"===na.key||Y.key<na.key?-1:Y.key>na.key?1:0);if(ka(x)){J=[];for(var Z=0;Z<x.length;Z++)J[Z]=Ba(x[Z],P);return"["+J.join(",")+"]"}if(x instanceof k){J=[];for(Z=0;Z<x.length();Z++)J[Z]=Ba(x.get(Z),
P);return"["+J.join(",")+"]"}return null!==x&&"object"===typeof x&&void 0!==x.castToText?x.castToText(P):Q(x)?"object, Function":x===za?"":aa(x)?"object, Module":""}function Ba(x,J=!1){return null===x?"null":ca(x)||U(x)||oa(x)?JSON.stringify(x):x instanceof h||x instanceof k||x instanceof Array?ua(x,null,J):O(x)?J?JSON.stringify(x.getTime()):JSON.stringify(S(x,"")):T(x)||R(x)?JSON.stringify(x.toString()):null!==x&&"object"===typeof x&&void 0!==x.castToText?x.castToText(J):"null"}function pa(x,J){return U(x)?
x:null===x||""===x?0:O(x)||R(x)||T(x)?NaN:ca(x)?x?1:0:ka(x)||""===x||void 0===x?NaN:void 0!==J&&oa(x)?(J=a(J,"\u2030",""),J=a(J,"\u00a4",""),p.parse(x,{pattern:J})):x===za?0:Number(x)}function Ea(x,J){if(O(x))return x;if(oa(x)){a:{const Z=/ (\d\d)/;var P=c.createDateTimeZone(J);P=M.DateTime.fromISO(x,{zone:P});if(P.isValid)J=P;else{if(Z.test(x)&&(x=x.replace(Z,"T$1"),P=M.DateTime.fromISO(x,{zone:J}),P.isValid)){J=P;break a}J=null}}if(J)return c.ArcadeDate.dateTimeToArcadeDate(J)}return null}function Ha(x){return ca(x)?
x:oa(x)?(x=x.toLowerCase(),"true"===x?!0:!1):U(x)?0===x||isNaN(x)?!1:!0:!1}function Ga(x,J){(x=JSON.parse(x))&&!x.spatialReference&&(x.spatialReference=J);return w.fromJSON(x)}function Aa(x,J){if(null==x)return null;if(null===x.spatialReference||void 0===x.spatialReference)x.spatialReference=J;return x}function W(x){if(null===x)return null;if(x instanceof q)return"NaN"===x.x||null===x.x||isNaN(x.x)?null:x;if(x instanceof v){if(0===x.rings.length)return null;for(const J of x.rings)if(0<J.length)return x;
return null}if(x instanceof f){if(0===x.paths.length)return null;for(const J of x.paths)if(0<J.length)return x;return null}return x instanceof B?0===x.points.length?null:x:x instanceof e?"NaN"===x.xmin||null===x.xmin||isNaN(x.xmin)?null:x:null}function ma(x,J){if(!x||!x.domain)return J;let P=null,Z=null;if("string"===x.field.type||"esriFieldTypeString"===x.field.type)P=X(J);else{if(null===J||void 0===J)return null;if(""===J)return J;P=pa(J)}for(let Y=0;Y<x.domain.codedValues.length;Y++){const na=
x.domain.codedValues[Y];na.code===P&&(Z=na)}return null===Z?X(J):Z.name}function ta(x,J){if(!x||!x.domain)return J;let P=null;const Z=X(J);for(let Y=0;Y<x.domain.codedValues.length;Y++){const na=x.domain.codedValues[Y];na.name===Z&&(P=na)}return null===P?J:P.code}function Fa(x,J,P=null,Z=null){if(!J||!J.fields)return null;let Y=null;for(var na=0;na<J.fields.length;na++){const va=J.fields[na];va.name.toLowerCase()===x.toString().toLowerCase()&&(Y=va)}if(null===Y)throw new d.ArcadeExecutionError(null,
d.ExecutionErrorCodes.FieldNotFound,null,{key:x});let sa,Ia;if(null===Z&&P&&J.typeIdField)Z=P.hasField(J.typeIdField)?P.field(J.typeIdField):null;else if(J.typeIdField&&null!==Z){na=!1;for(const va of J.types||[])if(Z===va.id){na=!0;break}if(!na)for(const va of J.types||[])if(Z===va.name){Z=va.id;na=!0;break}na||(Z=null,P&&J.typeIdField&&(Z=P.hasField(J.typeIdField)?P.field(J.typeIdField):null))}null!==Z&&void 0!==Z&&J.types.some(va=>va.id===Z?((sa=va.domains?.[Y.name])&&"inherited"===sa.type&&(sa=
ha(Y.name,J),Ia=!0),!0):!1);Ia||sa||(sa=ha(x,J));return{field:Y,domain:sa}}function ha(x,J){let P;J.fields.some(Z=>{Z.name.toLowerCase()===x.toLowerCase()&&(P=Z.domain);return!!P});return P}function Ca(x,J){J||={};"function"===typeof J&&(J={cmp:J});const P="boolean"===typeof J.cycles?J.cycles:!1,Z=J.cmp&&function(na){return function(sa){return function(Ia,va){return na({key:Ia,value:sa[Ia]},{key:va,value:sa[va]})}}}(J.cmp),Y=[];return function Ia(sa){sa?.toJSON&&"function"===typeof sa.toJSON&&(sa=
sa.toJSON());if(void 0!==sa){if("number"===typeof sa)return isFinite(sa)?""+sa:"null";if("object"!==typeof sa)return JSON.stringify(sa);var va;if(Array.isArray(sa)){var Ja="[";for(va=0;va<sa.length;va++)va&&(Ja+=","),Ja+=Ia(sa[va])||"null";return Ja+"]"}if(null===sa)return"null";if(Y.includes(sa)){if(P)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var mb=Y.push(sa)-1,Sa=Object.keys(sa).sort(Z?.(sa));Ja="";for(va=0;va<Sa.length;va++){const Ta=Sa[va],
Ua=Ia(sa[Ta]);Ua&&(Ja&&(Ja+=","),Ja+=JSON.stringify(Ta)+":"+Ua)}Y.splice(mb,1);return"{"+Ja+"}"}}(x)}function Da(x){if(null===x)return null;const J=[];for(const P of x)P?.arcadeDeclaredClass&&"esri.arcade.Feature"===P.arcadeDeclaredClass?J.push(P.geometry()):J.push(P);return J}function Ka(x,J){if(J instanceof q)x.push(J.hasZ?J.hasM?[J.x,J.y,J.z,J.m]:[J.x,J.y,J.z]:[J.x,J.y]);else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);}function Va(x,J){if(ka(x)||E(x)){let P=
!1,Z=!1,Y=[];if(ka(x)){for(const na of x)Ka(Y,na);0<Y.length&&(J=x[0].spatialReference,P=x[0].hasZ,Z=x[0].hasM)}else if(x instanceof y)Y=x._elements,0<Y.length&&(P=x._hasZ,Z=x._hasM,J=x.get(0).spatialReference);else if(E(x)){for(const na of x.toArray())Ka(Y,na);0<Y.length&&(J=x.get(0).spatialReference,P=!0===x.get(0).hasZ,Z=!0===x.get(0).hasM)}else throw new d.ArcadeExecutionError(null,d.ExecutionErrorCodes.InvalidParameter,null);if(0===Y.length)return null;l.isClockwise(Y)||(Y=Y.slice(0).reverse());
return new v({rings:[Y],spatialReference:J,hasZ:P,hasM:Z})}return x}function Wa(x,J){if(ka(x)||E(x)){let P=!1,Z=!1,Y=[];if(ka(x)){for(const na of x)Ka(Y,na);0<Y.length&&(J=x[0].spatialReference,P=!0===x[0].hasZ,Z=!0===x[0].hasM)}else if(x instanceof y)Y=x._elements,0<Y.length&&(P=x._hasZ,Z=x._hasM,J=x.get(0).spatialReference);else if(E(x)){for(const na of x.toArray())Ka(Y,na);0<Y.length&&(J=x.get(0).spatialReference,P=!0===x.get(0).hasZ,Z=!0===x.get(0).hasM)}return 0===Y.length?null:new f({paths:[Y],
spatialReference:J,hasZ:P,hasM:Z})}return x}function Xa(x,J){if(ka(x)||E(x)){let P=!1,Z=!1,Y=[];if(ka(x)){for(const na of x)Ka(Y,na);0<Y.length&&(J=x[0].spatialReference,P=!0===x[0].hasZ,Z=!0===x[0].hasM)}else if(x instanceof y)Y=x._elements,0<Y.length&&(P=x._hasZ,Z=x._hasM,J=x.get(0).spatialReference);else if(E(x)){for(const na of x.toArray())Ka(Y,na);0<Y.length&&(J=x.get(0).spatialReference,P=!0===x.get(0).hasZ,Z=!0===x.get(0).hasM)}return 0===Y.length?null:new B({points:Y,spatialReference:J,hasZ:P,
hasM:Z})}return x}function Ya(x,J=!1){const P=[];if(null===x)return P;if(!0===ka(x)){for(var Z=0;Z<x.length;Z++){var Y=X(x[Z]);""===Y&&!0!==J||P.push(Y)}return P}if(x instanceof k){for(Z=0;Z<x.length();Z++)Y=X(x.get(Z)),""===Y&&!0!==J||P.push(Y);return P}return ba(x)?(x=X(x),""===x&&!0!==J||P.push(x),P):[]}function Za(x){Na++;return 0===Na%100?(Na=0,new Promise(J=>{setTimeout(()=>{J(x)},0)})):x}function $a(x,J,P){switch(P){case "\x26":return x&J;case "|":return x|J;case "^":return x^J;case "\x3c\x3c":return x<<
J;case "\x3e\x3e":return x>>J;case "\x3e\x3e\x3e":return x>>>J}}function La(x,J=null){if(null!=x){if(ca(x)||U(x)||oa(x))return x;if(x instanceof h)return!0===J?.keepGeometryType?x:x.toJSON();if(x instanceof k)return x.toArray().map(P=>La(P,J));if(x instanceof Array)return x.map(P=>La(P,J));if(qa(x))return x;if(O(x))return x.toJSDate();if(T(x))return x.toString();if(R(x))return x.toJSDate();if(null!==x&&"object"===typeof x&&void 0!==x.castAsJson)return x.castAsJson(J)}return null}async function nb(x,
J,P,Z,Y){x=await Oa(x,J,P);Y[Z]=x}async function Oa(x,J=null,P=null){x instanceof k&&(x=x.toArray());if(null!=x){if(ba(x)||x instanceof h||qa(x)||O(x))return La(x,P);if(x instanceof Array){const Z=[],Y=[];for(const na of x)null===na||ba(na)||na instanceof h||qa(na)||O(na)?Y.push(La(na,P)):(Y.push(null),Z.push(nb(na,J,P,Y.length-1,Y)));0<Z.length&&await Promise.all(Z);return Y}if(null!==x&&"object"===typeof x&&void 0!==x.castAsJsonAsync)return x.castAsJsonAsync(J,P)}return null}function Ma(x){return Pa(x)?
x.parent:x}function Pa(x){return x&&"declaredClass"in x&&"esri.layers.support.SubtypeSublayer"===x.declaredClass}function ab(x){return x&&"declaredClass"in x&&"esri.layers.SubtypeGroupLayer"===x.declaredClass}function bb(x,J,P){const Z=Ma(x.fullSchema());return null!==Z&&Z.fields?Fa(J,Z,x,P):null}function cb(x){x=Ma(x.fullSchema());return null!==x&&x.fields?x.typeIdField?{subtypeField:x.typeIdField,subtypes:x.types?x.types.map(J=>({name:J.name,code:J.id})):[]}:null:null}function db(x,J,P,Z){const Y=
Ma(x.fullSchema());if(null===Y||!Y.fields)return null;Z=Fa(J,Y,x,Z);if(void 0===P)try{P=x.field(J)}catch(na){return null}return ma(Z,P)}function eb(x,J,P,Z){const Y=Ma(x.fullSchema());if(null===Y||!Y.fields)return null;if(void 0===P){try{P=x.field(J)}catch(na){return null}return P}x=Fa(J,Y,x,Z);return ta(x,P)}function fb(x){return x?.timeZone??"system"}function gb(x){x=Ma(x.fullSchema());if(null===x||!x.fields)return null;const J=[];for(const P of x.fields)J.push(I.esriFieldToJson(P));return{objectIdField:x.objectIdField,
globalIdField:x.globalIdField??"",geometryType:void 0===I.layerGeometryEsriRestConstants[x.geometryType]?"":I.layerGeometryEsriRestConstants[x.geometryType],fields:J}}function hb(x,J){"system"===x&&(x=c.ArcadeDate.systemTimeZoneCanonicalName);return{version:"1.24",engineVersion:A.version,timeZone:x,spatialReference:J instanceof D?J.toJSON():J,application:L.applicationName??"",engine:"web",locale:r.getLocale()}}class Qa{constructor(x){this.value=x}}class Ra{constructor(x){this.value=x}}const ib=Ra,
jb=Qa,za={type:"VOID"},kb={type:"BREAK"},lb={type:"CONTINUE"};let Na=0;const ob=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResultE:Ra,ReturnResultE:Qa,absRound:u,arcadeVersion:"1.24",autoCastArrayOfPointsToMultiPoint:Xa,autoCastArrayOfPointsToPolygon:Va,autoCastArrayOfPointsToPolyline:Wa,autoCastFeatureToGeometry:Da,binaryOperator:$a,breakResult:kb,castAsJson:La,castAsJsonAsync:Oa,continueResult:lb,defaultExecutingContext:hb,defaultTimeZone:fb,defaultUndefined:ra,equalityTest:ia,
featureDomainCodeLookup:eb,featureDomainValueLookup:db,featureFullDomain:bb,featureSchema:gb,featureSubtypes:cb,fixNullGeometry:W,fixSpatialReference:Aa,formatDate:S,formatNumber:N,generateUUID:H,getDomain:Fa,getDomainCode:ta,getDomainValue:ma,getType:ya,greaterThanLessThan:ea,implicitResult:ib,isArray:ka,isBoolean:ca,isDate:O,isDateOnly:R,isDictionary:F,isFeature:xa,isFeatureSet:G,isFeatureSetCollection:K,isFunctionParameter:Q,isGeometry:wa,isImmutableArray:E,isInteger:ja,isJsDate:qa,isModule:aa,
isNumber:U,isObject:la,isSimpleType:ba,isString:oa,isSubtypeGrouplayer:ab,isSubtypeSublayer:Pa,isTime:T,multiReplace:a,parseGeometryFromJson:Ga,pcCheck:g,returnResult:jb,stableStringify:Ca,standardiseDateFormat:fa,tick:Za,toBoolean:Ha,toDate:Ea,toNumber:pa,toNumberArray:da,toString:X,toStringArray:Ya,toStringExplicit:ua,voidOperation:za},Symbol.toStringTag,{value:"Module"}));t.ImplicitResultE=Ra;t.ReturnResultE=Qa;t.absRound=u;t.arcadeVersion="1.24";t.autoCastArrayOfPointsToMultiPoint=Xa;t.autoCastArrayOfPointsToPolygon=
Va;t.autoCastArrayOfPointsToPolyline=Wa;t.autoCastFeatureToGeometry=Da;t.binaryOperator=$a;t.breakResult=kb;t.castAsJson=La;t.castAsJsonAsync=Oa;t.continueResult=lb;t.defaultExecutingContext=hb;t.defaultTimeZone=fb;t.defaultUndefined=ra;t.equalityTest=ia;t.featureDomainCodeLookup=eb;t.featureDomainValueLookup=db;t.featureFullDomain=bb;t.featureSchema=gb;t.featureSubtypes=cb;t.fixNullGeometry=W;t.fixSpatialReference=Aa;t.formatDate=S;t.formatNumber=N;t.generateUUID=H;t.getDomain=Fa;t.getDomainCode=
ta;t.getDomainValue=ma;t.getType=ya;t.greaterThanLessThan=ea;t.implicitResult=ib;t.isArray=ka;t.isBoolean=ca;t.isDate=O;t.isDateOnly=R;t.isDictionary=F;t.isFeature=xa;t.isFeatureSet=G;t.isFeatureSetCollection=K;t.isFunctionParameter=Q;t.isGeometry=wa;t.isImmutableArray=E;t.isInteger=ja;t.isJsDate=qa;t.isModule=aa;t.isNumber=U;t.isObject=la;t.isSimpleType=ba;t.isString=oa;t.isSubtypeGrouplayer=ab;t.isSubtypeSublayer=Pa;t.isTime=T;t.lc=ob;t.multiReplace=a;t.parseGeometryFromJson=Ga;t.pcCheck=g;t.returnResult=
jb;t.stableStringify=Ca;t.standardiseDateFormat=fa;t.tick=Za;t.toBoolean=Ha;t.toDate=Ea;t.toNumber=pa;t.toNumberArray=da;t.toString=X;t.toStringArray=Ya;t.toStringExplicit=ua;t.voidOperation=za})},"esri/arcade/executionError":function(){define(["exports","../core/string"],function(t,L){function A(p){return p&&p.loc?`Line : ${p.loc.start?.line}, ${p.loc.start?.column}: `:""}t.ExecutionErrorCodes=void 0;(function(p){p.AsyncNotEnabled="AsyncNotEnabled";p.ModulesNotSupported="ModulesNotSupported";p.CircularModules=
"CircularModules";p.CannotCompareDateAndTime="CannotCompareDateAndTime";p.NeverReach="NeverReach";p.UnsupportedHashType="UnsupportedHashType";p.InvalidParameter="InvalidParameter";p.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes";p.UnexpectedToken="UnexpectedToken";p.Unrecognized="Unrecognized";p.UnrecognizedType="UnrecognizedType";p.MaximumCallDepth="MaximumCallDepth";p.BooleanConditionRequired="BooleanConditionRequired";p.TypeNotAllowedInFeature="TypeNotAllowedInFeature";p.KeyMustBeString=
"KeyMustBeString";p.WrongNumberOfParameters="WrongNumberOfParameters";p.CallNonFunction="CallNonFunction";p.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";p.NoFunctionInDictionary="NoFunctionInDictionary";p.NoFunctionInArray="NoFunctionInArray";p.AssignModuleFunction="AssignModuleFunction";p.LogicExpressionOrAnd="LogicExpressionOrAnd";p.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";p.FunctionNotFound="FunctionNotFound";p.InvalidMemberAccessKey="InvalidMemberAccessKey";p.UnsupportedUnaryOperator=
"UnsupportUnaryOperator";p.InvalidIdentifier="InvalidIdentifier";p.MemberOfNull="MemberOfNull";p.UnsupportedOperator="UnsupportedOperator";p.Cancelled="Cancelled";p.ModuleAccessorMustBeString="ModuleAccessorMustBeString";p.ModuleExportNotFound="ModuleExportNotFound";p.Immutable="Immutable";p.OutOfBounds="OutOfBounds";p.IllegalResult="IllegalResult";p.FieldNotFound="FieldNotFound";p.PortalRequired="PortalRequired";p.LogicError="LogicError";p.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";p.KeyAccessorMustBeString=
"KeyAccessorMustBeString";p.WrongSpatialReference="WrongSpatialReference";p.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime";p.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(t.ExecutionErrorCodes||(t.ExecutionErrorCodes={}));const c={[t.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[t.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[t.ExecutionErrorCodes.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",
[t.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[t.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[t.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[t.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",[t.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[t.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",
[t.ExecutionErrorCodes.FunctionNotFound]:"Function not found",[t.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[t.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[t.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[t.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",[t.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[t.ExecutionErrorCodes.PortalRequired]:"Portal is required",[t.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",
[t.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[t.ExecutionErrorCodes.Unrecognized]:"Unrecognized code structure",[t.ExecutionErrorCodes.UnrecognizedType]:"Unrecognized type",[t.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[t.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[t.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",
[t.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[t.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[t.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[t.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[t.ExecutionErrorCodes.Immutable]:"Object is immutable",[t.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[t.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",
[t.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[t.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[t.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognized",[t.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",[t.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[t.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[t.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",
[t.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[t.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[t.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26",[t.ExecutionErrorCodes.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[t.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[t.ExecutionErrorCodes.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"};
class b extends Error{constructor(...p){super(...p)}}class d extends b{constructor(p,C){super(A(C)+p.message,{cause:p});this.loc=null;Error.captureStackTrace&&Error.captureStackTrace(this,d);C?.loc&&(this.loc=C.loc)}}class m extends Error{constructor(p,C,z,e){super("Execution error - "+A(z)+L.replace(c[C],e));this.loc=null;this.declaredRootClass="esri.arcade.arcadeexecutionerror";Error.captureStackTrace&&Error.captureStackTrace(this,m);z?.loc&&(this.loc=z.loc)}}class k extends Error{constructor(p,
C,z,e){super("Compilation error - "+A(z)+L.replace(c[C],e));this.loc=null;this.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(this,k);z?.loc&&(this.loc=z.loc)}}class n extends Error{constructor(){super("Uncompilable code structures");this.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(this,n)}}t.ModuleErrorCodes=void 0;(function(p){p.UnrecognizedUri="UnrecognizedUri";p.UnsupportedUriProtocol=
"UnsupportedUriProtocol"})(t.ModuleErrorCodes||(t.ModuleErrorCodes={}));const y={[t.ModuleErrorCodes.UnrecognizedUri]:"Unrecognized uri - {uri}",[t.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognized uri protocol"};class I extends Error{constructor(p,C){super(L.replace(y[p],C));this.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(this,I)}}t.ArcadeCompilationError=k;t.ArcadeExecutionError=m;t.ArcadeUncompilableError=n;t.ErrorWithCause=b;t.LocatableArcadeExecutionError=
d;t.ModuleError=I;t.ensureArcadeExecutionError=function(p,C,z){return"esri.arcade.arcadeexecutionerror"===z.declaredRootClass||"esri.arcade.arcadecompilationerror"===z.declaredRootClass?null===z.loc&&C?.loc?new d(z,{cause:z}):z:C?.loc?new d(z,{cause:z}):z};t.executionErrorMessages=c;t.moduleErrorMessages=y;t.parsingValidationMessage=function(p,C,z){return"Parsing error - "+A(p)+L.replace(c[C],z)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/FunctionWrapper":function(){define(["exports",
"../core/promiseUtils"],function(t,L){function A(m,k,n){if(m instanceof c&&!(m instanceof d)){const y=new d;y.fn=m;y.parameterEvaluator=n;y.context=k;return y}return m}class c{constructor(){}}class b extends c{constructor(m){super();this.fn=m}createFunction(m){return(...k)=>this.fn(m,{preparsed:!0,arguments:k})}call(m,k){return this.fn(m,k)}marshalledCall(m,k,n,y){return y(m,k,(I,p,C)=>{C=C.map(z=>z instanceof c&&!(z instanceof d)?A(z,m,y):z);I=this.call(n,{args:C});return L.isPromiseLike(I)?I.then(z=>
A(z,n,y)):I})}}class d extends c{constructor(){super(...arguments);this.context=this.fn=null}createFunction(m){return this.fn.createFunction(this.context)}call(m,k){return this.fn.marshalledCall(m,k,this.context,this.parameterEvaluator)}marshalledCall(m,k,n){return this.fn.marshalledCall(m,k,this.context,this.parameterEvaluator)}}t.ArcadeFunction=c;t.NativeFunction=b;t.ScopeMarshalledFunction=d;t.wrapModuleScopedResponse=A;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(function(){class t{constructor(L=
[]){this._elements=L}length(){return this._elements.length}get(L){return this._elements[L]}toArray(){const L=[];for(let A=0;A<this.length();A++)L.push(this.get(A));return L}}return t})},"esri/arcade/ImmutablePathArray":function(){define(["./ImmutableArray","./ImmutablePointArray"],function(t,L){class A extends t{constructor(c,b,d,m,k){super(c);this._lazyPath=[];this._hasM=this._hasZ=!1;this._hasZ=d;this._hasM=m;this._spRef=b;this._cacheId=k}get(c){if(void 0===this._lazyPath[c]){const b=this._elements[c];
if(void 0===b)return;this._lazyPath[c]=new L(b,this._spRef,this._hasZ,this._hasM,this._cacheId,c)}return this._lazyPath[c]}equalityTest(c){return c===this?!0:null===c||!1===c instanceof A?!1:c.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}return A})},"esri/arcade/ImmutablePointArray":function(){define(["./ImmutableArray","../geometry/Point"],function(t,L){class A extends t{constructor(c,b,d,m,k,n){super(c);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=
b;this._hasZ=d;this._hasM=m;this._cacheId=k;this._partId=n}get(c){if(void 0===this._lazyPt[c]){const b=this._elements[c];if(void 0===b)return;const d=this._hasZ,m=this._hasM;let k=null;k=d&&!m?new L(b[0],b[1],b[2],void 0,this._spRef):m&&!d?new L(b[0],b[1],void 0,b[2],this._spRef):d&&m?new L(b[0],b[1],b[2],b[3],this._spRef):new L(b[0],b[1],this._spRef);k.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+c.toString();this._lazyPt[c]=k}return this._lazyPt[c]}equalityTest(c){return c===
this?!0:null===c||!1===c instanceof A?!1:c.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}return A})},"esri/arcade/featureset/support/shared":function(){define("exports ../../ArcadeDate ../../../core/sql/DateOnly ../../../core/sql/TimeOnly ../../../geometry/Extent ../../../layers/support/Field ../../../chunks/datetime".split(" "),function(t,L,A,c,b,d,m){function k(y){return y instanceof Date}function n(y){return y instanceof L.ArcadeDate}
t.FeatureServiceDatabaseType=void 0;(function(y){y[y.Standardised=0]="Standardised";y[y.StandardisedNoInterval=1]="StandardisedNoInterval";y[y.SqlServer=2]="SqlServer";y[y.Oracle=3]="Oracle";y[y.Postgres=4]="Postgres";y[y.PGDB=5]="PGDB";y[y.FILEGDB=6]="FILEGDB";y[y.NotEvaluated=7]="NotEvaluated"})(t.FeatureServiceDatabaseType||(t.FeatureServiceDatabaseType={}));t.IdState=void 0;(function(y){y[y.InFeatureSet=0]="InFeatureSet";y[y.NotInFeatureSet=1]="NotInFeatureSet";y[y.Unknown=2]="Unknown"})(t.IdState||
(t.IdState={}));t.callback=function(y,I){return function(){try{y.apply(null,arguments)}catch(p){I.reject(p)}}};t.cloneAttributes=function(y){const I={};for(const p in y)I[p]=y[p];return I};t.cloneField=function(y){return d.fromJSON(y.toJSON())};t.convertLinearUnitsToCode=function(y){if(null==y)return null;if("number"===typeof y||"number"===typeof y)return y;switch(y.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9093;case "kilometers":case "kilometer":case "km":return 9036}return null};
t.convertSquareUnitsToCode=function(y){if(null==y)return null;if("number"===typeof y)return y;switch(y.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109439;case "kilometers":case "kilometer":case "km":return 109414}return null};t.defaultMaxRecords=1E3;t.equalityTest=function(y,I){return y===I?!0:(k(y)||n(y))&&(k(I)||n(I))?y.getTime()===I.getTime():!1};t.errback=function(y){return function(I){y.reject(I)}};t.esriFieldToJson=function(y){return y.toJSON?y.toJSON():
y};t.extractServiceUrl=function(y){if(void 0===y)return"";y=y.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");y=y.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return y=y.split("?")[0]};t.isArcadeDate=n;t.isArcadeDateOnly=function(y){return y instanceof A.DateOnly};t.isArcadeTime=function(y){return y instanceof c.TimeOnly};t.isArray=function(y){return y instanceof Array};t.isBoolean=function(y){return"boolean"===typeof y};t.isDate=k;t.isLuxonDate=function(y){return y instanceof m.DateTime};t.isNumber=
function(y){return"number"===typeof y};t.isString=function(y){return"string"===typeof y||y instanceof String};t.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",
esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};t.layerGeometryEsriConstants={point:"point",polygon:"polygon",
polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};t.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",
esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};t.sameGeomType=function(y,I){return y===I||"point"===y&&"esriGeometryPoint"===I||"polyline"===y&&"esriGeometryPolyline"===I||"polygon"===y&&"esriGeometryPolygon"===I||"extent"===y&&"esriGeometryEnvelope"===I||"multipoint"===y&&"esriGeometryMultipoint"===I||"point"===I&&"esriGeometryPoint"===y||"polyline"===I&&"esriGeometryPolyline"===
y||"polygon"===I&&"esriGeometryPolygon"===y||"extent"===I&&"esriGeometryEnvelope"===y||"multipoint"===I&&"esriGeometryMultipoint"===y?!0:!1};t.shapeExtent=function(y){if(null==y)return null;switch(y.type){case "polygon":case "multipoint":case "polyline":return y.extent;case "point":return new b({xmin:y.x,ymin:y.y,xmax:y.x,ymax:y.y,spatialReference:y.spatialReference});case "extent":return y}return null};t.stableStringify=function(y,I){I||={};"function"===typeof I&&(I={cmp:I});const p="boolean"===
typeof I.cycles?I.cycles:!1,C=I.cmp&&function(e){return function(h){return function(B,q){return e({key:B,value:h[B]},{key:q,value:h[q]})}}}(I.cmp),z=[];return function B(h){h?.toJSON&&"function"===typeof h.toJSON&&(h=h.toJSON());if(void 0!==h){if("number"===typeof h)return isFinite(h)?""+h:"null";if("object"!==typeof h)return JSON.stringify(h);var q;if(Array.isArray(h)){var v="[";for(q=0;q<h.length;q++)q&&(v+=","),v+=B(h[q])||"null";return v+"]"}if(null===h)return"null";if(z.includes(h)){if(p)return JSON.stringify("__cycle__");
throw new TypeError("Converting circular structure to JSON");}var f=z.push(h)-1,D=Object.keys(h).sort(C?.(h));v="";for(q=0;q<D.length;q++){const l=D[q],w=B(h[l]);w&&(v&&(v+=","),v+=JSON.stringify(l)+":"+w)}z.splice(f,1);return"{"+v+"}"}}(y)};t.toEsriGeometryType=function(y){switch(y){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};Object.defineProperty(t,
Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(t,L,A,c){function b(m){m=m.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let k="";const n=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const y of m.match(n)||[])switch(y){case "D":k+=
"d";break;case "DD":k+="dd";break;case "DDD":k+="o";break;case "d":k+="c";break;case "ddd":k+="ccc";break;case "dddd":k+="cccc";break;case "M":k+="L";break;case "MM":k+="LL";break;case "MMM":k+="LLL";break;case "MMMM":k+="LLLL";break;case "YY":k+="yy";break;case "Y":case "YYYY":k+="yyyy";break;case "Q":k+="q";break;case "X":case "x":k+=y;break;default:k=2<=y.length&&"["===y.slice(0,1)&&"]"===y.slice(-1)?k+`'${y.slice(1,-1)}'`:k+`'${y}'`}return k}class d{constructor(m,k,n){this._year=m;this._month=
k;this._day=n;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(m){return m instanceof d&&m.day===this.day&&m.month===this.month&&m.year===this.year}clone(){return new d(this._year,this._month,this._day)}toDateTime(m){return c.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:L.createDateTimeZone(m)})}toDateTimeLuxon(m){return c.DateTime.fromObject({day:this.day,
month:this.month,year:this.year},{zone:L.createDateTimeZone(m)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(m=null){if(null===m||""===m)return this.toString();m=b(m);if(!m)return"";const k=this.toDateTime("unknown");return L.ArcadeDate.dateTimeToArcadeDate(k).toFormat(m,{locale:A.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const m=this.toDateTime("unknown");return L.ArcadeDate.dateTimeToArcadeDate(m)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(m,k){return d.fromDateTime(this.toUTCDateTime().plus({[m]:k}))}toUTCDateTime(){return c.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(m,k){switch(k.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(m.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(m.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===k?this.toUTCDateTime().diff(m.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(m.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(m.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(m.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(m.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(m){m=c.DateTime.fromMillis(m,{zone:c.FixedOffsetZone.utcInstance});return m.isValid?d.fromParts(m.year,m.month,m.day):null}static fromSeconds(m){m=c.DateTime.fromSeconds(m,{zone:c.FixedOffsetZone.utcInstance});return m.isValid?d.fromParts(m.year,m.month,m.day):null}static fromReader(m){if(!m)return null;m=m.split("-");return 3!==m.length?null:new d(parseInt(m[0],10),parseInt(m[1],
10),parseInt(m[2],10))}static fromParts(m,k,n){m=new d(m,k,n);return!1===m.isValid?null:m}static fromDateJS(m){return d.fromParts(m.getFullYear(),m.getMonth()+1,m.getDay())}static fromDateTime(m){return d.fromParts(m.year,m.month,m.day)}static fromSqlTimeStampOffset(m){return this.fromDateTime(m.toDateTime())}static fromString(m,k=null){if(""===m||null===m)return null;var n=[];if(k)(k=b(k))&&n.push(k);else if(null===k||""===k)return m=c.DateTime.fromISO(m,{setZone:!0}),m.isValid?d.fromParts(m.year,
m.month,m.day):null;for(const y of n)if(n=c.DateTime.fromFormat(m,k??y),n.isValid)return new d(n.year,n.month,n.day);return null}static fromNow(m="system"){m=c.DateTime.fromJSDate(new Date).setZone(L.createDateTimeZone(m));return new d(m.year,m.month,m.day)}}t.DateOnly=d;t.standardizeDateOnlyFormat=b;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(t,L,A,
c){function b(m){if(!m)return"";const k=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let n="";for(const y of m.match(k)||[])switch(y){case "SSS":n+=y;break;case "A":case "a":n+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":n+=y;break;default:n+=`'${y}'`}return n}class d{constructor(m,k,n,y){this._hour=m;this._minute=k;this._second=n;this._millisecond=y;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(m){return m instanceof
d&&m.hour===this.hour&&m.minute===this.minute&&m.second===this.second&&m.millisecond===this.millisecond}clone(){return new d(this.hour,this.minute,this.second,this.millisecond)}isValid(){return L.isInteger(this.hour)&&L.isInteger(this.minute)&&L.isInteger(this.second)&&L.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(m=null){return null===m||""===m?this.toString():(m=b(m))?c.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(m,{locale:A.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(m,k,n,y){m=new d(m,k,n,y);return m.isValid()?m:null}static fromReader(m){if(!m)return null;m=m.split(":");return 3!==m.length?null:new d(parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],
10),0)}static fromMilliseconds(m){return 864E5<m||0>m?null:new d(Math.floor(m/36E5%24),Math.floor(m/6E4%60),Math.floor(m/1E3%60),Math.floor(m%1E3))}static fromDateJS(m){return new d(m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds())}static fromDateTime(m){return new d(m.hour,m.minute,m.second,m.millisecond)}static fromSqlTimeStampOffset(m){return this.fromDateTime(m.toDateTime())}static fromString(m,k=null){if(""===m||null===m)return null;const n=[];if(k)(k=b(k))&&n.push(k);else if(null===
k||""===k)n.push("HH:mm:ss"),n.push("HH:mm:ss.SSS"),n.push("hh:mm:ss a"),n.push("hh:mm:ss.SSS a"),n.push("HH:mm"),n.push("hh:mm a"),n.push("H:mm"),n.push("h:mm a"),n.push("H:mm:ss"),n.push("h:mm:ss a"),n.push("H:mm:ss.SSS"),n.push("h:mm:ss.SSS a");for(const y of n)if(k=c.DateTime.fromFormat(m,y),k.isValid)return new d(k.hour,k.minute,k.second,k.millisecond);return null}plus(m,k){switch(m){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return d.fromDateTime(this.toUTCDateTime().plus({[m]:k}))}return null}toUTCDateTime(){return c.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(m,k){switch(k.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(m.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(m.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===k?this.toUTCDateTime().diff(m.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(m.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(m.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(m.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(m.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(m.toUTCDateTime(),"milliseconds").milliseconds}}}t.TimeOnly=d;t.standardizeTimeFormat=b;Object.defineProperty(t,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(t,L){t.cloneGeometry=function(A){if(null==A)return null;const c=A.clone();void 0!==A.cache._geVersion&&(c.cache._geVersion=A.cache._geVersion);return c};t.convertLinearUnitsToCode=function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};t.convertSquareUnitsToCode=
function(A){if(null==A)return null;if("number"===typeof A)return A;A=A.toLowerCase();A=A.replaceAll(/\s/g,"");A=A.replaceAll("-","");switch(A){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};t.isInteger=function(A){return"number"===typeof A&&isFinite(A)&&Math.floor(A)===A};t.sameGeomType=function(A,c){return A===c||"point"===A&&"esriGeometryPoint"===c||"polyline"===A&&"esriGeometryPolyline"===
c||"polygon"===A&&"esriGeometryPolygon"===c||"extent"===A&&"esriGeometryEnvelope"===c||"multipoint"===A&&"esriGeometryMultipoint"===c||"point"===c&&"esriGeometryPoint"===A||"polyline"===c&&"esriGeometryPolyline"===A||"polygon"===c&&"esriGeometryPolygon"===A||"extent"===c&&"esriGeometryEnvelope"===A||"multipoint"===c&&"esriGeometryMultipoint"===A?!0:!1};t.shapeExtent=function(A){if(null==A)return null;switch(A.type){case "polygon":case "multipoint":case "polyline":return A.extent;case "point":return new L({xmin:A.x,
ymin:A.y,xmax:A.x,ymax:A.y,spatialReference:A.spatialReference});case "extent":return A}return null};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(t,L,A){function c(I=A.getLocale()){I=I.toLowerCase();let p=I in k;if(!p){const h=I.split("-");1<h.length&&h[0]in k&&(I=h[0],p=!0);p||(I="en")}const [C,z,e="#,##0.###"]=k[I];return{decimal:C,group:z,pattern:e}}function b(I){I=I||{};var p=c(I.locale);const C=
I.pattern||p.pattern,z=p.group,e=p.decimal;let h=1;if(C.includes("%"))h/=100;else if(C.includes("\u2030"))h/=1E3;else if(C.includes("\u00a4"))throw Error("currency notation not supported");p=C.split(";");1===p.length&&p.push("-"+p[0]);return{regexp:y(p,B=>{B="(?:"+L.escapeRegExpString(B,".")+")";return B.replace(n,q=>{const v={signed:!1,separator:I.strict?z:[z,""],fractional:I.fractional,decimal:e,exponent:!1};q=q.split(".");let f=I.places;1===q.length&&1!==h&&(q[1]="###");1===q.length||0===f?v.fractional=
!1:(void 0===f&&(f=I.pattern?q[1].lastIndexOf("0")+1:Infinity),f&&null==I.fractional&&(v.fractional=!0),!I.places&&+f<q[1].length&&(f+=","+q[1].length),v.places=f);q=q[0].split(",");1<q.length&&(v.groupSize=q.pop().length,1<q.length&&(v.groupSize2=q.pop().length));return"("+d(v)+")"})},!0).replaceAll(/[\xa0 ]/g,"[\\s\\xa0]"),group:z,decimal:e,factor:h}}function d(I){I=I||{};"places"in I||(I.places=Infinity);"string"!==typeof I.decimal&&(I.decimal=".");"fractional"in I&&!String(I.places).startsWith("0")||
(I.fractional=[!0,!1]);"exponent"in I||(I.exponent=[!0,!1]);"eSigned"in I||(I.eSigned=[!0,!1]);var p=m(I);const C=y(I.fractional,e=>{let h="";e&&0!==I.places&&(h="\\"+I.decimal,h=Infinity===I.places?"(?:"+h+"\\d+)?":h+("\\d{"+I.places+"}"));return h},!0),z=y(I.exponent,e=>e?"([eE]"+m({signed:I.eSigned})+")":"");p+=C;C&&(p="(?:(?:"+p+")|(?:"+C+"))");return p+z}function m(I){I=I||{};"signed"in I||(I.signed=[!0,!1]);"separator"in I?"groupSize"in I||(I.groupSize=3):I.separator="";const p=y(I.signed,z=>
z?"[-+]":"",!0),C=y(I.separator,z=>{if(!z)return"(?:\\d+)";z=L.escapeRegExpString(z);" "===z?z="\\s":"\u00a0"===z&&(z="\\s\\xa0");const e=I.groupSize,h=I.groupSize2;return h?(z="(?:0|[1-9]\\d{0,"+(h-1)+"}(?:["+z+"]\\d{"+h+"})*["+z+"]\\d{"+e+"})",0<e-h?"(?:"+z+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":z):"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+z+"]\\d{"+e+"})*)"},!0);return p+C}const k={ar:[".",","],bg:[",","\u00a0"],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",",
"."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",",
"\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},n=/[#0,]*[#0](?:\.0*#*)?/,y=(I,p,C)=>{if(!(I instanceof Array))return p(I);const z=[];for(let e=0;e<I.length;e++)z.push(p(I[e]));I=z.join("|");return"("+(C?"?:":"")+I+")"};t._parseInfo=b;t.format=function(I,p){p={...p};var C=c(p.locale);p.customs=C;C=p.pattern||C.pattern;if(isNaN(I)||Infinity===Math.abs(I))return null;var z=I;var e=p||{};var h=e.customs.group,B=e.customs.decimal;C=C.split(";");I=C[0];p=C[0>z?1:0]||"-"+
I;if(p.includes("%"))z*=100;else if(p.includes("\u2030"))z*=1E3;else{if(p.includes("\u00a4"))throw Error("currency notation not supported");if(p.includes("E"))throw Error("exponential notation not supported");}C=n;var q=I.match(C);if(!q)throw Error("unable to find a number expression in pattern: "+p);!1===e.fractional&&(e.places=0);I=p.replace;q=q[0];e=e={decimal:B,group:h,places:e.places,round:e.round};!0===e.places&&(e.places=0);Infinity===e.places&&(e.places=6);B=q.split(".");var v="string"===
typeof e.places&&e.places.indexOf(",");q=e.places;v?q=e.places.substring(v+1):0<=+q||(q=(B[1]||[]).length);0>e.round||(z=Number(z.toFixed(Number(q))));h=String(Math.abs(z)).split(".");z=h[1]||"";B[1]||e.places?(v&&(e.places=e.places.substring(0,v)),v=void 0!==e.places?e.places:B[1]&&B[1].lastIndexOf("0")+1,+v>z.length&&(h[1]=z.padEnd(Number(v),"0")),+q<z.length&&(h[1]=z.substr(0,Number(q)))):h[1]&&h.pop();z=B[0].replace(",","");q=z.indexOf("0");-1!==q&&(q=z.length-q,q>h[0].length&&(h[0]=h[0].padStart(q,
"0")),z.includes("#")||(h[0]=h[0].substr(h[0].length-q)));z=B[0].lastIndexOf(",");let f;if(-1!==z){var D=B[0].length-z-1;B=B[0].substr(0,z);z=B.lastIndexOf(",");-1!==z&&(f=B.length-z-1)}B=[];for(z=h[0];z;)q=z.length-D,B.push(0<q?z.substr(q):z),z=0<q?z.slice(0,q):"",f&&(D=f,f=void 0);h[0]=B.reverse().join(e.group||",");D=h.join(e.decimal||".");return I.call(p,C,D)};t.getCustoms=c;t.parse=function(I,p){p=b(p);I=(new RegExp("^"+p.regexp+"$")).exec(I);if(!I)return NaN;let C=I[1];if(!I[1]){if(!I[2])return NaN;
C=I[2];p.factor*=-1}C=C.replaceAll(new RegExp("["+p.group+"\\s\\xa0]","g"),"").replace(p.decimal,".");return Number(C)*p.factor};t.regexp=function(I){return b(I).regexp};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/Feature":function(){define("./ArcadeDate ./deepClone ./Dictionary ./executionError ./ImmutableArray ../chunks/languageUtils ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils ../layers/graphics/featureConversionUtils ../layers/support/FieldsIndex".split(" "),
function(t,L,A,c,b,d,m,k,n,y,I,p,C){class z{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._optimizedGeomDefinition=null;this._fieldTypesFixed=!0;this.contextTimeZone=this.fieldsIndex=null;this.immutable=!0;this._fieldsToFixDataTypes=null;this.immutable=!0}static createFromGraphic(e,h){const B=new z;B.contextTimeZone=h??null;B._geometry=null!=e.geometry?e.geometry:null;B.attributes=void 0===e.attributes?{}:null===e.attributes?{}:e.attributes;
e._sourceLayer?(B._layer=e._sourceLayer,B._fieldTypesFixed=!1):e._layer?(B._layer=e._layer,B._fieldTypesFixed=!1):e.layer&&"fields"in e.layer?(B._layer=e.layer,B._fieldTypesFixed=!1):e.sourceLayer&&"fields"in e.sourceLayer&&(B._layer=e.sourceLayer,B._fieldTypesFixed=!1);B._layer&&!B._fieldTypesFixed&&(B.fieldsIndex=this.hydrateFieldsIndex(B._layer));return B}static createFromArcadeFeature(e){if(e instanceof z){var h=new z;h._fieldTypesFixed=e._fieldTypesFixed;h.attributes=e.attributes;h._geometry=
e._geometry;h._optimizedGeomDefinition=e._optimizedGeomDefinition;e._layer&&(h._layer=e._layer);h.fieldsIndex=e.fieldsIndex;h.contextTimeZone=e.contextTimeZone;return h}h={};for(const B of e.keys())h[B]=e.field(B);return z.createFromGraphicLikeObject(e.geometry(),h,e.fullSchema(),e.contextTimeZone)}static createFromOptimisedFeature(e,h,B){const q=new z;q._geometry=e.geometry?{geometry:e.geometry}:null;q._optimizedGeomDefinition=B;q.attributes=e.attributes||{};q._layer=h;q._fieldTypesFixed=!1;return q}static createFromArcadeDictionary(e,
h){const B=new z;B.attributes=e.field("attributes");null!==B.attributes?B.attributes instanceof A?(B.attributes=B.attributes.attributes,null===B.attributes&&(B.attributes={})):B.attributes={}:B.attributes={};B._geometry=e.field("geometry");null!==B._geometry&&(B._geometry instanceof A?B._geometry=z.parseGeometryFromDictionary(B._geometry,h):B._geometry instanceof n||(B._geometry=null));return B}static createFromGraphicLikeObject(e,h,B=null,q){const v=new z;v.contextTimeZone=q??null;null===h&&(h={});
v.attributes=h;v._geometry=null!=e?e:null;v._layer=B;v._layer&&(v._fieldTypesFixed=!1,v.fieldsIndex=this.hydrateFieldsIndex(v._layer));return v}static hydrateFieldsIndex(e){return null===e?null:d.isFeatureSet(e)?e.getFieldsIndex():e.fieldsIndex?e.fieldsIndex:C.fromLayerJSON({datesInUnknownTimezone:e.datesInUnknownTimezone,fields:e.fields,timeInfo:e.timeInfo,editFieldsInfo:e.editFieldsInfo,dateFieldsTimeReference:e.dateFieldsTimeReference??{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(e,
h,B=null){null===h&&(h={});this.attributes=h;this._geometry=e??null;this._fieldTypesFixed=(this._layer=B)?!1:!0}castToText(e=!1){let h="";!1===this._fieldTypesFixed&&this._fixFieldTypes();for(const B in this.attributes){""!==h&&(h+=",");const q=this.attributes[B];null==q?h+=JSON.stringify(B)+":null":d.isBoolean(q)||d.isNumber(q)||d.isString(q)?h+=JSON.stringify(B)+":"+JSON.stringify(q):q instanceof n?h+=JSON.stringify(B)+":"+d.toStringExplicit(q):q instanceof k.TimeOnly||q instanceof m.DateOnly?h+=
`${JSON.stringify(B)}:${JSON.stringify(q.toString())}`:q instanceof b?h+=JSON.stringify(B)+":"+d.toStringExplicit(q,null,e):q instanceof Array?h+=JSON.stringify(B)+":"+d.toStringExplicit(q,null,e):q instanceof t.ArcadeDate?h=e?h+(JSON.stringify(B)+":"+JSON.stringify(q.getTime())):h+(JSON.stringify(B)+":"+q.stringify()):null!==q&&"object"===typeof q&&void 0!==q.castToText&&(h+=JSON.stringify(B)+":"+q.castToText(e))}return'{"geometry":'+(null===this.geometry()?"null":d.toStringExplicit(this.geometry()))+
',"attributes":{'+h+"}}"}_fixFieldTypes(){if(this._fieldsToFixDataTypes&&0<this._fieldsToFixDataTypes?.length)this._fixAllFields(this._fieldsToFixDataTypes);else{var e=[],h=this._layer.fields;for(let B=0;B<h.length;B++){const {name:q,type:v}=h[B];switch(v){case "date":case "esriFieldTypeDate":e.push({field:q,dataType:"date"});break;case "date-only":case "esriFieldTypeDateOnly":e.push({field:q,dataType:"date-only"});break;case "time-only":case "esriFieldTypeTimeOnly":e.push({field:q,dataType:"time-only"});
break;case "timestamp-offset":case "esriFieldTypeTimestampOffset":e.push({field:q,dataType:"timestamp-offset"})}}this._fieldsToFixDataTypes=e;0<e.length&&this._fixAllFields(e)}this._fieldTypesFixed=!0}isUnknownDateTimeField(e){return"unknown"===this.fieldsIndex?.getTimeZone(e)}_fixAllFields(e){this.attributes={...this.attributes};const h=this.contextTimeZone??"system";for(let v=0;v<e.length;v++){var B=e[v].field,q=e[v].dataType;let f=this.attributes[B];if(void 0===f)for(const D in this.attributes){if(D.toLowerCase()===
B.toLowerCase()){f=this.attributes[D];if(null!==f){if("time-only"===q){d.isTime(f)||(this.attributes[D]=k.TimeOnly.fromReader(f.toString()));break}if("date-only"===q){d.isDateOnly(f)||(this.attributes[D]=m.DateOnly.fromReader(f.toString()));break}if("timestamp-offset"===q){d.isDate(f)||(this.attributes[D]=t.ArcadeDate.fromReaderAsTimeStampOffset(f.toString()));break}B=this.isUnknownDateTimeField(D);f instanceof Date?this.attributes[D]=B?t.ArcadeDate.unknownDateJSToArcadeDate(f):t.ArcadeDate.dateJSAndZoneToArcadeDate(f,
h):d.isDate(f)||(this.attributes[D]=B?t.ArcadeDate.unknownEpochToArcadeDate(f):t.ArcadeDate.epochToArcadeDate(f,h))}break}}else null!==f&&("time-only"===q?d.isTime(f)?this.attributes[B]=f:this.attributes[B]=k.TimeOnly.fromReader(f.toString()):"date-only"===q?d.isDateOnly(f)?this.attributes[B]=f:this.attributes[B]=m.DateOnly.fromReader(f.toString()):"timestamp-offset"===q?d.isDate(f)?this.attributes[B]=f:this.attributes[B]=t.ArcadeDate.fromReaderAsTimeStampOffset(f.toString()):(q=this.isUnknownDateTimeField(B),
d.isDate(f)?this.attributes[B]=f:this.attributes[B]=f instanceof Date?q?t.ArcadeDate.unknownDateJSToArcadeDate(f):t.ArcadeDate.dateJSAndZoneToArcadeDate(f,h):q?t.ArcadeDate.unknownEpochToArcadeDate(f):t.ArcadeDate.epochToArcadeDate(f,h)))}}geometry(){if(null===this._geometry||this._geometry instanceof n)return this._geometry;this._optimizedGeomDefinition?(this._geometry=I.fromJSON(p.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),
this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=I.fromJSON(this._geometry);return this._geometry}field(e){this._fieldTypesFixed||this._fixFieldTypes();var h=this.attributes[e];if(void 0!==h)return h;h=e.toLowerCase();for(const B in this.attributes)if(B.toLowerCase()===h)return this.attributes[B];if(this._hasFieldDefinition(h))return null;throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.FieldNotFound,null,{key:e});}_hasFieldDefinition(e){if(null===
this._layer)return!1;for(let h=0;h<this._layer.fields.length;h++)if(this._layer.fields[h].name.toLowerCase()===e)return!0;return!1}setField(e,h){if(this.immutable)throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.Immutable,null);h instanceof Date&&(h=this.isUnknownDateTimeField(e)?t.ArcadeDate.unknownDateJSToArcadeDate(h):t.ArcadeDate.dateJSToArcadeDate(h));if(!1===d.isSimpleType(h))throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.TypeNotAllowedInFeature,null);const B=e.toLowerCase();
if(void 0===this.attributes[e])for(const q in this.attributes)if(q.toLowerCase()===B){this.attributes[q]=h;return}this.attributes[e]=h}hasField(e){const h=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(const B in this.attributes)if(B.toLowerCase()===h)return!0;return this._hasFieldDefinition(h)?!0:!1}keys(){let e=[];const h={};for(var B in this.attributes)e.push(B),h[B.toLowerCase()]=1;if(null!==this._layer)for(B=0;B<this._layer.fields.length;B++){const q=this._layer.fields[B];1!==h[q.name.toLowerCase()]&&
e.push(q.name)}return e=e.sort()}static parseGeometryFromDictionary(e,h){e=z._convertDictionaryToJson(e,!0);void 0!==e.hasm&&(e.hasM=e.hasm,delete e.hasm);void 0!==e.hasz&&(e.hasZ=e.hasz,delete e.hasz);void 0!==e.spatialreference&&(e.spatialReference=e.spatialreference,delete e.spatialreference);e.spatialReference||(e.spatialReference=h);void 0!==e.rings&&(e.rings=this._fixPathArrays(e.rings,!0===e.hasZ,!0===e.hasZ));void 0!==e.paths&&(e.paths=this._fixPathArrays(e.paths,!0===e.hasZ,!0===e.hasM));
void 0!==e.points&&(e.points=this._fixPointArrays(e.points,!0===e.hasZ,!0===e.hasM));return I.fromJSON(e)}static _fixPathArrays(e,h,B){const q=[];if(e instanceof Array)for(var v=0;v<e.length;v++)q.push(this._fixPointArrays(e[v],h,B));else if(e instanceof b)for(v=0;v<e.length();v++)q.push(this._fixPointArrays(e.get(v),h,B));return q}static _fixPointArrays(e,h,B){const q=[];if(e instanceof Array)for(var v=0;v<e.length;v++){var f=e[v];f instanceof y?h&&B?q.push([f.x,f.y,f.z,f.m]):h?q.push([f.x,f.y,f.z]):
B?q.push([f.x,f.y,f.m]):q.push([f.x,f.y]):f instanceof b?q.push(f.toArray()):q.push(f)}else if(e instanceof b)for(v=0;v<e.length();v++)f=e.get(v),f instanceof y?h&&B?q.push([f.x,f.y,f.z,f.m]):h?q.push([f.x,f.y,f.z]):B?q.push([f.x,f.y,f.m]):q.push([f.x,f.y]):f instanceof b?q.push(f.toArray()):q.push(f);return q}static _convertDictionaryToJson(e,h=!1){const B={};for(const q in e.attributes){let v=e.attributes[q];v instanceof A&&(v=z._convertDictionaryToJson(v));h?B[q.toLowerCase()]=v:B[q]=v}return B}static parseAttributesFromDictionary(e){const h=
{};for(const B in e.attributes){const q=e.attributes[B];if(d.isSimpleType(q))h[B]=q;else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidParameter,null);}return h}static fromJson(e,h){let B=null;null!==e.geometry&&void 0!==e.geometry&&(B=I.fromJSON(e.geometry));const q={};if(null!==e.attributes&&void 0!==e.attributes)for(const v in e.attributes){const f=e.attributes[v];if(null===f)q[v]=f;else if(d.isString(f)||d.isNumber(f)||d.isBoolean(f)||d.isDate(f)||d.isTime(f)||d.isDateOnly(f))q[v]=
f;else throw new c.ArcadeExecutionError(null,c.ExecutionErrorCodes.InvalidParameter,null);}return z.createFromGraphicLikeObject(B,q,null,h??null)}fullSchema(){return this._layer}gdbVersion(){if(null===this._layer)return"";const e=this._layer.gdbVersion;return void 0===e?"":""===e&&this._layer.capabilities?.isVersioned?"SDE.DEFAULT":e}castAsJson(e){const h={attributes:{},geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null};for(const B in this.attributes){const q=this.attributes[B];
void 0!==q&&(h.attributes[B]=d.castAsJson(q,e))}return h}async castAsJsonAsync(e,h){return this.castAsJson(h)}}L.configureDeepClone(z);return z})},"esri/arcade/treeAnalysis":function(){define(["exports"],function(t){function L(z){return"string"===typeof z||z instanceof String}function A(z,e){if(z)for(const h of z)c(h,e)}function c(z,e){if(z&&!1!==e(z))switch(z.type){case "ImportDeclaration":A(z.specifiers,e);c(z.source,e);break;case "ExportNamedDeclaration":c(z.declaration,e);break;case "ArrayExpression":A(z.elements,
e);break;case "AssignmentExpression":case "BinaryExpression":c(z.left,e);c(z.right,e);break;case "BlockStatement":A(z.body,e);break;case "Program":A(z.body,e);break;case "CallExpression":c(z.callee,e);A(z.arguments,e);break;case "ExpressionStatement":c(z.expression,e);break;case "ForInStatement":c(z.left,e);c(z.right,e);c(z.body,e);break;case "ForStatement":c(z.init,e);c(z.test,e);c(z.update,e);c(z.body,e);break;case "WhileStatement":c(z.test,e);c(z.body,e);break;case "FunctionDeclaration":c(z.id,
e);A(z.params,e);c(z.body,e);break;case "IfStatement":c(z.test,e);c(z.consequent,e);c(z.alternate,e);break;case "LogicalExpression":c(z.left,e);c(z.right,e);break;case "MemberExpression":c(z.object,e);c(z.property,e);break;case "ObjectExpression":A(z.properties,e);break;case "Property":c(z.key,e);c(z.value,e);break;case "ReturnStatement":c(z.argument,e);break;case "UnaryExpression":c(z.argument,e);break;case "UpdateExpression":c(z.argument,e);break;case "VariableDeclaration":A(z.declarations,e);break;
case "VariableDeclarator":c(z.id,e);c(z.init,e);break;case "TemplateLiteral":A(z.expressions,e),A(z.quasis,e)}}function b(z,e){let h=!1;const B=e.toLowerCase();c(z,q=>{if(h)return!1;"Identifier"===q.type&&q.name&&q.name.toLowerCase()===B&&(h=!0);return!0});return h}function d(z){const e=[];c(z,h=>{"ImportDeclaration"===h.type&&h.source&&h.source.value&&e.push({libname:h.specifiers[0].local.name.toLowerCase(),source:h.source.value});return!0});return e}function m(z){const e=[];c(z,h=>{"CallExpression"===
h.type&&"Identifier"===h.callee.type&&e.push(h.callee.name.toLowerCase());return!0});return e}const k={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,
max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,
max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,
max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,
max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},
distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,
max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,
max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1}},n={functionDefinitions:new Map,constantDefinitions:new Map},y={functionDefinitions:new Map,constantDefinitions:new Map};
for(var I of["pi","infinity"])y.constantDefinitions.set(I,{type:"constant"}),n.constantDefinitions.set(I,{type:"constant"});y.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]});n.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",
members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(const z in k)I=k[z],y.functionDefinitions.set(z,{overloads:[{type:"function",parametersInfo:{min:I.min,max:I.max}}]}),n.functionDefinitions.set(z,{overloads:[{type:"function",parametersInfo:{min:I.min,max:I.max}}]});const p=new Set("featureset featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset getuser attachments featuresetbyportalitem getfeaturesetinfo filterbysubtypecode".split(" ")),
C=new Set("disjoint intersects touches crosses within contains overlaps equals relate intersection nearestvertex nearestcoordinate union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple convexhull simplify multiparttosinglepart".split(" "));t.addFunctionDeclaration=function(z,e){e="sync"===e?n:y;e.functionDefinitions.has(z.name.toLowerCase())?e.functionDefinitions.get(z.name.toLowerCase())?.overloads.push({type:"function",
parametersInfo:{min:z.min,max:z.max}}):e.functionDefinitions.set(z.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:z.min,max:z.max}}]})};t.extractFunctionDeclaration=function(z,e){const h=[];if(void 0!==e.params&&null!==e.params)for(let B=0;B<e.params.length;B++)h.push("any");return{name:z,return:"any",params:h}};t.findExpectedFieldLiterals=function(z){const e=[];c(z,h=>{if("CallExpression"===h.type){if("Identifier"===h.callee.type&&"expects"===h.callee.name.toLowerCase()){var B=
"";for(let q=0;q<(h.arguments||[]).length;q++)0===q?"Identifier"===h.arguments[q].type&&(B=h.arguments[q].name.toLowerCase()):B&&"Literal"===h.arguments[q].type&&L(h.arguments[q].value)&&e.push(B+"."+h.arguments[q].value.toLowerCase());return!1}if("Identifier"===h.callee.type&&["domainname","domaincode","domain","haskey"].includes(h.callee.name.toLowerCase())&&2<=h.arguments.length)return B="","Identifier"===h.arguments[0].type&&(B=h.arguments[0].name.toLowerCase()),B&&"Literal"===h.arguments[1].type&&
L(h.arguments[1].value)&&e.push(B+"."+h.arguments[1].value.toLowerCase()),!1}if("MemberExpression"!==h.type||"Identifier"!==h.object.type)return!0;!1===h.computed&&h.object&&h.object.name&&h.property&&"Identifier"===h.property.type&&h.property.name?e.push(h.object.name.toLowerCase()+"."+h.property.name.toLowerCase()):h.object&&h.object.name&&h.property&&"Literal"===h.property.type&&"string"===typeof h.property.value&&e.push(h.object.name.toLowerCase()+"."+h.property.value?.toString().toLowerCase());
return!1});return e};t.findFieldLiterals=function(z){const e=[];c(z,h=>{if("MemberExpression"!==h.type||"Identifier"!==h.object.type)return!0;!1===h.computed&&h.object&&h.object.name&&h.property&&"Identifier"===h.property.type&&h.property.name?e.push(h.object.name.toLowerCase()+"."+h.property.name.toLowerCase()):h.object&&h.object.name&&h.property&&"Literal"===h.property.type&&"string"===typeof h.property.value&&e.push(h.object.name.toLowerCase()+"."+h.property.value?.toString().toLowerCase());return!1});
return e};t.findFunctionCalls=m;t.findModuleImports=d;t.findScriptDependencies=function(z,e=[]){let h=null;if(void 0===z.usesFeatureSet){null===h&&(h=m(z));z.usesFeatureSet=!1;for(let B=0;B<h.length;B++)p.has(h[B])&&(z.usesFeatureSet=!0,z.isAsync=!0);if(!1===z.usesFeatureSet&&e&&0<e.length)for(const B of e)if(b(z,B)){z.usesFeatureSet=!0;z.isAsync=!0;break}}void 0===z.usesModules&&(z.usesModules=!1,0<d(z).length&&(z.usesModules=!0));if(void 0===z.usesGeometry)for(z.usesGeometry=!1,null===h&&(h=m(z)),
e=0;e<h.length;e++)C.has(h[e])&&(z.usesGeometry=!0)};t.fullArcadeApiAsync=y;t.fullArcadeApiSync=n;t.referencesFunction=function(z,e){let h=!1;const B=e.toLowerCase();c(z,q=>h?!1:"CallExpression"===q.type&&"Identifier"===q.callee.type&&q.callee.name&&q.callee.name.toLowerCase()===B?(h=!0,!1):!0);return h};t.referencesMember=b;t.scriptUsesFeatureSet=function(z){z=m(z);for(let e=0;e<z.length;e++)if(p.has(z[e]))return!0;return!1};t.walk=c;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},
"esri/chunks/array":function(){define("exports ../arcade/deepClone ../arcade/executionError ../arcade/ImmutableArray ./languageUtils ../core/promiseUtils".split(" "),function(t,L,A,c,b,d){function m(n){function y(e,h,B){if(e instanceof c)return e.toArray();if(b.isArray(e))return e;throw new A.ArcadeExecutionError(h,A.ExecutionErrorCodes.InvalidParameter,B);}function I(e,h){var B=e.length,q=Math.floor(B/2);if(0===B)return[];if(1===B)return[e[0]];var v=I(e.slice(0,q),h);e=I(e.slice(q,B),h);for(B=[];0<
v.length||0<e.length;)0<v.length&&0<e.length?(q=h(v[0],e[0]),isNaN(q)&&(q=0),0>=q?(B.push(v[0]),v=v.slice(1)):(B.push(e[0]),e=e.slice(1))):0<v.length?(B.push(v[0]),v=v.slice(1)):0<e.length&&(B.push(e[0]),e=e.slice(1));return B}async function p(e,h){const B=e.length,q=Math.floor(B/2);if(0===B)return[];if(1===B)return[e[0]];e=[await p(e.slice(0,q),h),await p(e.slice(q,B),h)];return C(e[0],e[1],h,[])}async function C(e,h,B,q){if(0<e.length||0<h.length){if(0<e.length&&0<h.length){let v=await B(e[0],h[0]);
isNaN(v)&&(v=1);0>=v?(q.push(e[0]),e=e.slice(1)):(q.push(h[0]),h=h.slice(1));return C(e,h,B,q)}if(0<e.length)return q.push(e[0]),e=e.slice(1),C(e,h,B,q);if(0<h.length)return q.push(h[0]),h=h.slice(1),C(e,h,B,q)}else return q}function z(e,h,B,q){b.pcCheck(B,1,2,e,h);let v=B[0];b.isImmutableArray(v)&&(v=v.toArray());if(!1===b.isArray(v))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);if(1<B.length){if(!1===b.isFunctionParameter(B[1]))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,
h);var f=v;const D=B[1].createFunction(e);return q?p(f,D):f=I(f,(l,w)=>D(l,w))}e=v;if(0===e.length)return[];B={};for(q=0;q<e.length;q++)h=b.getType(e[q]),""!==h&&(B[h]=!0);if(!0===B.Array||!0===B.Dictionary||!0===B.Feature||!0===B.Point||!0===B.Polygon||!0===B.Polyline||!0===B.Multipoint||!0===B.Extent||!0===B.Function)return e.slice(0);q=0;h="";for(f in B)q++,h=f;return e=1<q||"String"===h?I(e,(D,l)=>{if(null===D||void 0===D||D===b.voidOperation)return null===l||void 0===l||l===b.voidOperation?0:
1;if(null===l||void 0===l||l===b.voidOperation)return-1;D=b.toString(D);l=b.toString(l);return D<l?-1:D===l?0:1}):"Number"===h?I(e,(D,l)=>D-l):"Boolean"===h?I(e,(D,l)=>D===l?0:l?-1:1):"Date"===h?I(e,(D,l)=>l-D):e.slice(0)}n.functions.array=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,0,2,e,h);if(0===v.length||1===v.length&&null===v[0])return[];if(b.isArray(v[0])){if(2===v.length&&!1===b.isBoolean(v[1]))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,
h);return!0===b.defaultUndefined(v[1],!1)?L.deepClone(v[0]):v[0].slice(0)}if(b.isImmutableArray(v[0])){if(2===v.length&&!1===b.isBoolean(v[1]))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);return!0===b.defaultUndefined(v[1],!1)?L.deepClone(v[0]):v[0].toArray().slice(0)}B=b.toNumber(v[0]);if(isNaN(B)||!1===b.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);v=b.defaultUndefined(v[1],null);B=Array(B);B.fill(v);return B})};n.functions.front=
function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,1,1,e,h);if(b.isImmutableArray(v[0])){if(0>=v[0].length())throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);return v[0].get(0)}if(b.isArray(v[0])){if(0>=v[0].length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);return v[0][0]}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.back=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,
1,1,e,h);if(b.isImmutableArray(v[0])){if(0>=v[0].length())throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);return v[0].get(v[0].length()-1)}if(b.isArray(v[0])){if(0>=v[0].length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);return v[0][v[0].length-1]}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.push=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,1,2,e,h);if(b.isArray(v[0]))return v[0][v[0].length]=
v[1],v[0].length;throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.pop=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,1,1,e,h);if(b.isArray(v[0])){if(0>=v[0].length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);B=v[0][v[0].length-1];--v[0].length;return B}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.erase=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,
2,2,e,h);if(b.isArray(v[0])){B=b.toNumber(v[1]);if(isNaN(B)||!1===b.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);v=v[0];if(0>=v.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);0>B&&(B=v.length+B);if(0>B)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);if(B>=v.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);v.splice(B,1);return b.voidOperation}throw new A.ArcadeExecutionError(e,
A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.insert=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,3,3,e,h);if(b.isArray(v[0])){B=b.toNumber(v[1]);if(isNaN(B)||!1===b.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);q=v[2];v=v[0];if(B>v.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);if(0>B&&B<-1*v.length)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.OutOfBounds,h);if(B===v.length)return v[B]=
q,b.voidOperation;v.splice(B,0,q);return b.voidOperation}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.resize=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,3,e,h);if(b.isArray(v[0])){q=b.toNumber(v[1]);if(isNaN(q)||!1===b.isInteger(q))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);if(0>q)throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);B=b.defaultUndefined(v[2],null);v=v[0];
if(v.length>=q)return v.length=q,b.voidOperation;const f=v.length;v.length=q;for(q=f;q<v.length;q++)v[q]=B;return b.voidOperation}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.includes=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,2,e,h);if(b.isArray(v[0])){const f=v[1];return-1<v[0].findIndex(D=>b.equalityTest(D,f))?!0:!1}if(b.isImmutableArray(v[0])){const f=v[1];return-1<v[0].toArray().findIndex(D=>b.equalityTest(D,f))?!0:!1}throw new A.ArcadeExecutionError(e,
A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.slice=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,1,3,e,h);if(b.isArray(v[0])){B=b.toNumber(b.defaultUndefined(v[1],0));q=b.toNumber(b.defaultUndefined(v[2],v[0].length));if(isNaN(B)||!1===b.isInteger(B))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);if(isNaN(q)||!1===b.isInteger(q))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);return v[0].slice(B,q)}if(b.isImmutableArray(v[0])){B=
v[0];q=b.toNumber(b.defaultUndefined(v[1],0));v=b.toNumber(b.defaultUndefined(v[2],B.length()));if(isNaN(q)||!1===b.isInteger(q))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);if(isNaN(v)||!1===b.isInteger(v))throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);return B.toArray().slice(q,v)}throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,h);})};n.functions.splice=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{B=
[];for(q=0;q<v.length;q++)b.isArray(v[q])?B.push(...v[q]):b.isImmutableArray(v[q])?B.push(...v[q].toArray()):B.push(v[q]);return B})};n.functions.top=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,2,e,h);if(b.isArray(v[0]))return b.toNumber(v[1])>=v[0].length?v[0].slice(0):v[0].slice(0,b.toNumber(v[1]));if(b.isImmutableArray(v[0]))return b.toNumber(v[1])>=v[0].length()?v[0].slice(0):v[0].slice(0,b.toNumber(v[1]));throw new A.ArcadeExecutionError(e,A.ExecutionErrorCodes.InvalidParameter,
h);})};n.functions.first=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,1,1,e,h);return b.isArray(v[0])?0===v[0].length?null:v[0][0]:b.isImmutableArray(v[0])?0===v[0].length()?null:v[0].get(0):null})};"sync"===n.mode&&(n.functions.sort=function(e,h){return n.standardFunction(e,h,(B,q,v)=>z(e,h,v,!1))},n.functions.any=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);v=y(v[0],e,h);for(const f of v)if(v=B(f),b.isBoolean(v)&&!0===v)return!0;
return!1})},n.functions.all=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);v=y(v[0],e,h);for(const f of v)if(!0!==B(f))return!1;return!0})},n.functions.none=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);v=y(v[0],e,h);for(const f of v)if(!0===B(f))return!1;return!0})},n.functions.reduce=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,3,e,h);const f=v[1].createFunction(e);B=
y(v[0],e,h);return 2===v.length?0===B.length?null:B.reduce((D,l)=>{D=f(D,l);return D=void 0!==D&&D!==b.voidOperation?D:null}):B.reduce((D,l)=>{D=f(D,l);return D=void 0!==D&&D!==b.voidOperation?D:null},v[2])})},n.functions.map=function(e,h){return n.standardFunction(e,h,(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);q=y(v[0],e,h);v=[];for(const f of q)q=B(f),void 0!==q&&q!==b.voidOperation?v.push(q):v.push(null);return v})},n.functions.filter=function(e,h){return n.standardFunction(e,h,(B,
q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);v=y(v[0],e,h);q=[];for(const f of v)!0===B(f)&&q.push(f);return q})});"async"===n.mode&&(n.functions.sort=function(e,h){return n.standardFunctionAsync(e,h,(B,q,v)=>z(e,h,v,!0))},n.functions.any=function(e,h){return n.standardFunctionAsync(e,h,async(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);v=y(v[0],e,h);for(const f of v)if(v=await B(f),q=null,q=d.isPromiseLike(q)?await v:v,b.isBoolean(q)&&!0===q)return!0;return!1})},n.functions.all=
function(e,h){return n.standardFunctionAsync(e,h,async(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);v=y(v[0],e,h);for(const f of v)if(v=await B(f),q=null,q=d.isPromiseLike(q)?await v:v,!0!==q)return!1;return!0})},n.functions.none=function(e,h){return n.standardFunctionAsync(e,h,async(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);v=y(v[0],e,h);for(const f of v)if(v=await B(f),q=null,q=d.isPromiseLike(q)?await v:v,!0===q)return!1;return!0})},n.functions.filter=function(e,h){return n.standardFunctionAsync(e,
h,async(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);q=y(v[0],e,h);v=[];for(const f of q){q=await B(f);let D=null;D=d.isPromiseLike(D)?await q:q;!0===D&&v.push(f)}return v})},n.functions.reduce=function(e,h){return n.standardFunctionAsync(e,h,(B,q,v)=>{b.pcCheck(v,2,3,e,h);const f=v[1].createFunction(e);B=y(v[0],e,h);q=null;if(2<v.length)v=b.defaultUndefined(v[2],null),q=B.reduce(async(D,l)=>{D=await D;if(void 0===D||D===b.voidOperation)D=null;return f(D,l)},Promise.resolve(v));else{if(0===
B.length)return null;q=B.reduce(async(D,l,w)=>{if(1>=w)return f(D,l);D=await D;if(void 0===D||D===b.voidOperation)D=null;return f(D,l)})}return q.then(D=>void 0!==D&&D!==b.voidOperation?D:null)})},n.functions.map=function(e,h){return n.standardFunctionAsync(e,h,async(B,q,v)=>{b.pcCheck(v,2,2,e,h);B=v[1].createFunction(e);q=y(v[0],e,h);v=[];for(const f of q){q=await B(f);let D=null;D=d.isPromiseLike(D)?await q:q;void 0!==D&&D!==b.voidOperation?v.push(D):v.push(null)}return v})})}const k=Object.freeze(Object.defineProperty({__proto__:null,
registerFunctions:m},Symbol.toStringTag,{value:"Module"}));t.ArrayFunctions=k;t.registerFunctions=m})},"esri/arcade/functions/date":function(){define("exports ../ArcadeDate ../executionError ../../chunks/languageUtils ../../core/sql/DateOnly ../../core/sql/TimeOnly ../../intl/locale ../../chunks/datetime".split(" "),function(t,L,A,c,b,d,m,k){function n(z){return null===z?z:!1===z.isValid?null:z}function y(z,e){return""===z||"default"===z.toLowerCase().trim()?c.defaultTimeZone(e):"z"===z||"Z"===z?
"UTC":z}function I(z,e){return c.isDateOnly(z)?z.toArcadeDate():c.toDate(z,c.defaultTimeZone(e))}const p=[0,31,59,90,120,151,181,212,243,273,304,334],C=[0,31,60,91,121,152,182,213,244,274,305,335];t.registerFunctions=function(z,e){z.today=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,0,0,h,B);q=new Date;q.setHours(0,0,0,0);return L.ArcadeDate.dateJSAndZoneToArcadeDate(q,c.defaultTimeZone(h))})};z.time=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,0,4,h,B);switch(f.length){case 0:return q=L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(h)),
new d.TimeOnly(q.hour,q.minute,q.second,q.millisecond);case 1:if(c.isTime(f[0]))return f[0].clone();if(c.isDate(f[0]))return new d.TimeOnly(f[0].hour,f[0].minute,f[0].second,f[0].millisecond);if(c.isDateOnly(f[0]))return new d.TimeOnly(0,0,0,0);if(c.isString(f[0]))return d.TimeOnly.fromString(f[0]);q=c.toNumber(f[0]);return!1===isNaN(q)?d.TimeOnly.fromMilliseconds(q):null;case 2:return c.isString(f[0])&&c.isString(f[1])?d.TimeOnly.fromString(f[0],f[1]):d.TimeOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1]),
0,0);case 3:return d.TimeOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1]),c.toNumber(f[2]),0);case 4:return d.TimeOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1]),c.toNumber(f[2]),c.toNumber(f[3]))}throw new A.ArcadeExecutionError(h,A.ExecutionErrorCodes.InvalidParameter,B);})};z.dateonly=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,0,3,h,B);if(3===f.length)return b.DateOnly.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]));if(2===f.length)return q=c.toString(f[1]),""===q?null:"X"===
q?b.DateOnly.fromSeconds(c.toNumber(f[0])):"x"===q?b.DateOnly.fromMilliseconds(c.toNumber(f[0])):b.DateOnly.fromString(c.toString(f[0]),q);if(1===f.length){if(c.isString(f[0])){if(""===f[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(f[0]))return b.DateOnly.fromString(f[0]+"-01-01")}if(c.isDateOnly(f[0]))return f[0].clone();if(c.isDate(f[0]))return b.DateOnly.fromParts(f[0].year,f[0].monthJS+1,f[0].day);q=c.toNumber(f[0]);return!1===isNaN(q)?
b.DateOnly.fromMilliseconds(q):c.isString(f[0])?b.DateOnly.fromString(f[0]):null}return 0===f.length?(f=L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(h)),!1===f.isValid?null:b.DateOnly.fromParts(f.year,f.monthJS+1,f.day)):null})};z.changetimezone=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,2,2,h,B);if(null===f[0])return null;if(c.isDateOnly(f[0]))throw new A.ArcadeExecutionError(h,A.ExecutionErrorCodes.CannotChangeTimeZoneDateOnly,B);if(c.isDateOnly(f[0]))throw new A.ArcadeExecutionError(h,
A.ExecutionErrorCodes.CannotChangeTimeZoneTime,B);q=c.toDate(f[0],c.defaultTimeZone(h));if(null===q)throw new A.ArcadeExecutionError(h,A.ExecutionErrorCodes.InvalidParameter,B);f=L.createDateTimeZone(y(c.toString(f[1]),h),!1);if(null===f)return null;f=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,f);return!1===f.isValid?null:f})};z.timezone=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,2,h,B);if(c.isTime(f[0])||c.isDateOnly(f[0]))return"Unknown";q=c.toDate(f[0],c.defaultTimeZone(h));if(null===
q)return null;q=q.timeZone;return"system"===q?L.ArcadeDate.systemTimeZoneCanonicalName:"utc"===q.toLowerCase()?"UTC":"unknown"===q.toLowerCase()?"Unknown":q})};z.timezoneoffset=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=c.toDate(f[0],c.defaultTimeZone(h));return null===q?null:6E4*q.timeZoneOffset})};z.now=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,0,0,h,B);q=L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(h));return!1===q.isValid?null:q})};z.timestamp=function(h,B){return e(h,
B,(q,v,f)=>{c.pcCheck(f,0,0,h,B);q=L.ArcadeDate.nowUTCToArcadeDate();return!1===q.isValid?null:q})};z.toutc=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=c.toDate(f[0],c.defaultTimeZone(h));return null===q?null:q.toUTC()})};z.tolocal=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=c.toDate(f[0],c.defaultTimeZone(h));return null===q?null:q.toLocal()})};z.day=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.day})};
z.month=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.monthJS})};z.year=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.year})};z.hour=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);if(c.isTime(f[0]))return f[0].hour;q=c.toDate(f[0],c.defaultTimeZone(h));return null===q?NaN:q.hour})};z.second=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);if(c.isTime(f[0]))return f[0].second;
q=c.toDate(f[0],c.defaultTimeZone(h));return null===q?NaN:q.second})};z.millisecond=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);if(c.isTime(f[0]))return f[0].millisecond;q=c.toDate(f[0],c.defaultTimeZone(h));return null===q?NaN:q.millisecond})};z.minute=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);if(c.isTime(f[0]))return f[0].minute;q=c.toDate(f[0],c.defaultTimeZone(h));return null===q?NaN:q.minute})};z.week=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,2,h,B);v=I(f[0],
c.defaultTimeZone(h));if(null===v)return NaN;f=c.toNumber(c.defaultUndefined(f[1],0));if(0>f||6<f)throw new A.ArcadeExecutionError(h,A.ExecutionErrorCodes.InvalidParameter,B);q=v.dayOfWeekJS;var D=v.year;v=v.day+(0!==D%4||0===D%100&&0!==D%400?p:C)[v.monthJS]-1;D=Math.floor(v/7);return q-f+(0>q-f?7:0)<v-7*D?D+1:D})};z.weekday=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.dayOfWeekJS})};z.isoweekday=function(h,B){return e(h,B,(q,v,f)=>
{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.dayOfWeekISO})};z.isomonth=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.monthISO})};z.isoweek=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.weekISO})};z.isoyear=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,1,1,h,B);q=I(f[0],c.defaultTimeZone(h));return null===q?NaN:q.yearISO})};z.date=function(h,
B){return e(h,B,(q,v,f)=>{c.pcCheck(f,0,8,h,B);if(3===f.length)return c.isDateOnly(f[0])&&c.isTime(f[1])&&c.isString(f[2])?(q=L.createDateTimeZone(y(c.toString(f[2])??"unknown",h),!1),null===q?null:n(L.ArcadeDate.fromParts(f[0].year,f[0].month,f[0].day,f[1].hour,f[1].minute,f[1].second,f[1].millisecond,q))):n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),0,0,0,0,c.defaultTimeZone(h)));if(4===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,
c.toNumber(f[2]),c.toNumber(f[3]),0,0,0,c.defaultTimeZone(h)));if(5===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),c.toNumber(f[3]),c.toNumber(f[4]),0,0,c.defaultTimeZone(h)));if(6===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),c.toNumber(f[3]),c.toNumber(f[4]),c.toNumber(f[5]),0,c.defaultTimeZone(h)));if(7===f.length)return n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),
c.toNumber(f[3]),c.toNumber(f[4]),c.toNumber(f[5]),c.toNumber(f[6]),c.defaultTimeZone(h)));if(8===f.length)return q=L.createDateTimeZone(y(c.toString(f[7])??"unknown",h),!1),null===q?null:n(L.ArcadeDate.fromParts(c.toNumber(f[0]),c.toNumber(f[1])+1,c.toNumber(f[2]),c.toNumber(f[3]),c.toNumber(f[4]),c.toNumber(f[5]),c.toNumber(f[6]),q));if(2===f.length){if(c.isDateOnly(f[0])&&c.isString(f[1]))return q=L.createDateTimeZone(y(c.toString(f[1])??"unknown",h),!1),null===q?null:n(L.ArcadeDate.fromParts(f[0].year,
f[0].month,f[0].day,0,0,0,0,q));if(c.isDateOnly(f[0])&&c.isTime(f[1]))return n(L.ArcadeDate.fromParts(f[0].year,f[0].month,f[0].day,f[1].hour,f[1].minute,f[1].second,f[1].millisecond,"unknown"));q=c.toString(f[1]);if(""===q)return null;q=c.standardiseDateFormat(q,!0);f="X"===q?k.DateTime.fromSeconds(c.toNumber(f[0])):"x"===q?k.DateTime.fromMillis(c.toNumber(f[0])):k.DateTime.fromFormat(c.toString(f[0]),q,{locale:m.getLocale(),numberingSystem:"latn"});return f.isValid?L.ArcadeDate.dateTimeToArcadeDate(f):
null}if(1===f.length){if(c.isDateOnly(f[0]))return n(L.ArcadeDate.fromParts(f[0].year,f[0].month,f[0].day,0,0,0,0,"unknown"));if(c.isString(f[0])){if(""===f[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(f[0]))return c.toDate(f[0]+"-01-01",c.defaultTimeZone(h))}q=c.toNumber(f[0]);return!1===isNaN(q)?(f=k.DateTime.fromMillis(q),f.isValid?L.ArcadeDate.dateTimeAndZoneToArcadeDate(f,c.defaultTimeZone(h)):null):c.toDate(f[0],c.defaultTimeZone(h))}return 0===
f.length?L.ArcadeDate.nowToArcadeDate(c.defaultTimeZone(h)):null})};z.datediff=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,2,4,h,B);if(c.isTime(f[0]))return c.isTime(f[1])?f[0].difference(f[1],c.toString(f[2])):NaN;if(c.isTime(f[1]))return NaN;if(c.isDateOnly(f[0]))return c.isDateOnly(f[1])?f[0].difference(f[1],c.toString(f[2])):NaN;if(c.isDateOnly(f[1]))return NaN;q=c.toDate(f[0],c.defaultTimeZone(h));v=c.toDate(f[1],c.defaultTimeZone(h));if(null===q||null===v)return NaN;let D=c.defaultUndefined(f[3],
"");""!==D&&null!==D?(D=y(c.toString(D),h),q=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,D),v=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(v,D)):q.timeZone!==v.timeZone&&(q.isUnknownTimeZone?q=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(q,v.timeZone):v=L.ArcadeDate.arcadeDateAndZoneToArcadeDate(v,q.timeZone));switch(c.toString(f[2]).toLowerCase()){case "days":case "day":case "d":return q.diff(v,"days");case "months":case "month":return q.diff(v,"months");case "minutes":case "minute":case "m":return"M"===
f[2]?q.diff(v,"months"):q.diff(v,"minutes");case "seconds":case "second":case "s":return q.diff(v,"seconds");case "milliseconds":case "millisecond":case "ms":return q.diff(v);case "hours":case "hour":case "h":return q.diff(v,"hours");case "years":case "year":case "y":return q.diff(v,"years");default:return q.diff(v)}})};z.dateadd=function(h,B){return e(h,B,(q,v,f)=>{c.pcCheck(f,2,3,h,B);q=c.toNumber(f[1]);if(isNaN(q)||Infinity===q||-Infinity===q)return c.isTime(f[0])||c.isDateOnly(f[0])?f[0].clone():
c.toDate(f[0],c.defaultTimeZone(h));v="milliseconds";switch(c.toString(f[2]).toLowerCase()){case "days":case "day":case "d":v="days";q=c.isDateOnly(f[0])?q:c.absRound(q);break;case "months":case "month":v="months";q=c.isDateOnly(f[0])?q:c.absRound(q);break;case "minutes":case "minute":case "m":v="M"===f[2]?"months":"minutes";break;case "seconds":case "second":case "s":v="seconds";break;case "milliseconds":case "millisecond":case "ms":v="milliseconds";break;case "hours":case "hour":case "h":v="hours";
break;case "years":case "year":case "y":v="years"}if(c.isTime(f[0])||c.isDateOnly(f[0]))return f[0].plus(v,q);f=c.toDate(f[0],c.defaultTimeZone(h));return null===f?null:f.plus({[v]:q})})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geometry":function(){define("exports ../Dictionary ../executionError ../Feature ../ImmutablePathArray ../ImmutablePointArray ../../chunks/languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/coordsUtils ../../geometry/support/jsonUtils".split(" "),
function(t,L,A,c,b,d,m,k,n,y,I,p,C,z,e,h){function B(f){return f&&"esri.arcade.Feature"===f.arcadeDeclaredClass}function q(f,D,l,w,r=1){D=D.toLowerCase();switch(D){case "hasz":return f=f.hasZ,void 0===f?!1:f;case "hasm":return f=f.hasM,void 0===f?!1:f;case "spatialreference":return D=f.spatialReference._arcadeCacheId,void 0===D&&(l=!0,Object.freeze&&Object.isFrozen(f.spatialReference)&&(l=!1),l&&(v++,D=f.spatialReference._arcadeCacheId=v)),f=new L({wkt:f.spatialReference.wkt,wkid:f.spatialReference.wkid}),
void 0!==D&&(f._arcadeCacheId="SPREF"+D.toString()),f}switch(f.type){case "extent":switch(D){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return f=f[D],void 0!==f?f:null;case "type":return"Extent"}break;case "polygon":switch(D){case "rings":return D=f.cache._arcadeCacheId,void 0===D&&(v++,D=v,f.cache._arcadeCacheId=D),new b(f.rings,f.spatialReference,!0===f.hasZ,!0===f.hasM,D);case "type":return"Polygon"}break;case "point":switch(D){case "x":case "y":case "z":case "m":return void 0!==
f[D]?f[D]:null;case "type":return"Point"}break;case "polyline":switch(D){case "paths":return D=f.cache._arcadeCacheId,void 0===D&&(v++,D=v,f.cache._arcadeCacheId=D),new b(f.paths,f.spatialReference,!0===f.hasZ,!0===f.hasM,D);case "type":return"Polyline"}break;case "multipoint":switch(D){case "points":return D=f.cache._arcadeCacheId,void 0===D&&(v++,D=v,f.cache._arcadeCacheId=D),new d(f.points,f.spatialReference,!0===f.hasZ,!0===f.hasM,D,1);case "type":return"Multipoint"}}if(1===r)throw new A.ArcadeExecutionError(l,
A.ExecutionErrorCodes.InvalidIdentifier,w);return 2===r?{keystate:"notfound"}:null}let v=0;t.geometryMember=q;t.registerFunctions=function(f,D){f.ringisclockwise=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,1,1,l,w);r=[];if(null===a[0])return!1;if(m.isArray(a[0]))for(const Q of a[0])if(Q instanceof p)r.push(Q.hasZ?Q.hasM?[Q.x,Q.y,Q.z,Q.m]:[Q.x,Q.y,Q.z]:[Q.x,Q.y]);else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);else if(a[0]instanceof d)r=a[0]._elements;else if(m.isImmutableArray(a[0]))for(const Q of a[0].toArray())if(Q instanceof
p)r.push(Q.hasZ?Q.hasM?[Q.x,Q.y,Q.z,Q.m]:[Q.x,Q.y,Q.z]:[Q.x,Q.y]);else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);return 3>r.length?!1:e.isClockwise(r)})};f.polygon=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,1,1,l,w);r=null;if(a[0]instanceof L){if(r=m.fixSpatialReference(c.parseGeometryFromDictionary(a[0],l.spatialReference),l.spatialReference),!1===r instanceof C)throw new A.ArcadeExecutionError(l,
A.ExecutionErrorCodes.InvalidParameter,w);}else a[0]instanceof C?r=h.fromJSON(a[0].toJSON()):((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=l.spatialReference),r=m.fixSpatialReference(new C(a),l.spatialReference));if(null!==r&&!1===r.spatialReference.equals(l.spatialReference))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongSpatialReference,w);return m.fixNullGeometry(r)})};f.polyline=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,1,1,l,w);r=null;if(a[0]instanceof
L){if(r=m.fixSpatialReference(c.parseGeometryFromDictionary(a[0],l.spatialReference),l.spatialReference),!1===r instanceof z)throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}else a[0]instanceof z?r=h.fromJSON(a[0].toJSON()):((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=l.spatialReference),r=m.fixSpatialReference(new z(a),l.spatialReference));if(null!==r&&!1===r.spatialReference.equals(l.spatialReference))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongSpatialReference,
w);return m.fixNullGeometry(r)})};f.point=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,1,1,l,w);r=null;if(a[0]instanceof L){if(r=m.fixSpatialReference(c.parseGeometryFromDictionary(a[0],l.spatialReference),l.spatialReference),!1===r instanceof p)throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}else a[0]instanceof p?r=h.fromJSON(a[0].toJSON()):((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=l.spatialReference),r=m.fixSpatialReference(new p(a),l.spatialReference));
if(null!==r&&!1===r.spatialReference.equals(l.spatialReference))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongSpatialReference,w);return m.fixNullGeometry(r)})};f.multipoint=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,1,1,l,w);r=null;if(a[0]instanceof L){if(r=m.fixSpatialReference(c.parseGeometryFromDictionary(a[0],l.spatialReference),l.spatialReference),!1===r instanceof I)throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}else a[0]instanceof I?r=h.fromJSON(a[0].toJSON()):
((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=l.spatialReference),r=m.fixSpatialReference(new I(a),l.spatialReference));if(null!==r&&!1===r.spatialReference.equals(l.spatialReference))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongSpatialReference,w);return m.fixNullGeometry(r)})};f.extent=function(l,w){return D(l,w,(r,M,a)=>{a=m.autoCastFeatureToGeometry(a);m.pcCheck(a,1,1,l,w);r=null;a[0]instanceof L?r=m.fixSpatialReference(c.parseGeometryFromDictionary(a[0],l.spatialReference),
l.spatialReference):a[0]instanceof p?(r={xmin:a[0].x,ymin:a[0].y,xmax:a[0].x,ymax:a[0].y,spatialReference:a[0].spatialReference.toJSON()},a=a[0],a.hasZ?(r.zmin=a.z,r.zmax=a.z):a.hasM&&(r.mmin=a.m,r.mmax=a.m),r=h.fromJSON(r)):a[0]instanceof C?r=h.fromJSON(a[0].extent?.toJSON()):a[0]instanceof z?r=h.fromJSON(a[0].extent?.toJSON()):a[0]instanceof I?r=h.fromJSON(a[0].extent?.toJSON()):a[0]instanceof n?r=h.fromJSON(a[0].toJSON()):((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=l.spatialReference),
r=m.fixSpatialReference(new n(a),l.spatialReference));if(null!==r&&!1===r.spatialReference.equals(l.spatialReference))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongSpatialReference,w);return m.fixNullGeometry(r)})};f.geometry=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,1,1,l,w);r=null;if(null===a[0])return null;B(a[0])?r=m.fixSpatialReference(a[0].geometry(),l.spatialReference):a[0]instanceof L?r=m.fixSpatialReference(c.parseGeometryFromDictionary(a[0],l.spatialReference),l.spatialReference):
((a=JSON.parse(a[0]))&&!a.spatialReference&&(a.spatialReference=l.spatialReference),r=m.fixSpatialReference(h.fromJSON(a),l.spatialReference));if(null!==r&&!1===r.spatialReference.equals(l.spatialReference))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongSpatialReference,w);return m.fixNullGeometry(r)})};f.setgeometry=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,2,2,l,w);if(B(a[0])){if(!0===a[0].immutable)throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.Immutable,w);if(a[1]instanceof
y||null===a[1])a[0]._geometry=a[1];else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);return m.voidOperation})};f.feature=function(l,w){return D(l,w,(r,M,a)=>{if(0===a.length)throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongNumberOfParameters,w);r=null;if(1===a.length)if(m.isString(a[0]))r=c.fromJson(JSON.parse(a[0]),l.timeZone);else if(B(a[0]))r=c.createFromArcadeFeature(a[0]);
else if(a[0]instanceof y)r=c.createFromGraphicLikeObject(a[0],null,null,l.timeZone);else if(a[0]instanceof L)r=a[0].hasField("geometry")?a[0].field("geometry"):null,a=a[0].hasField("attributes")?a[0].field("attributes"):null,null!==r&&r instanceof L&&(r=c.parseGeometryFromDictionary(r,l.spatialReference)),null!==a&&(a=c.parseAttributesFromDictionary(a)),r=c.createFromGraphicLikeObject(r,a,null,l.timeZone);else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);else if(2===
a.length){M=r=null;if(null!==a[0])if(a[0]instanceof y)r=a[0];else if(r instanceof L)r=c.parseGeometryFromDictionary(a[0],l.spatialReference);else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);if(null!==a[1])if(a[1]instanceof L)M=c.parseAttributesFromDictionary(a[1]);else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);r=c.createFromGraphicLikeObject(r,M,null,l.timeZone)}else{r=null;M={};if(null!==a[0])if(a[0]instanceof y)r=a[0];else if(r instanceof
L)r=c.parseGeometryFromDictionary(a[0],l.spatialReference);else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);for(let Q=1;Q<a.length;Q+=2){const aa=m.toString(a[Q]),ba=a[Q+1];if(null===ba||void 0===ba||m.isString(ba)||isNaN(ba)||m.isDate(ba)||m.isNumber(ba)||m.isTime(ba)||m.isDateOnly(ba)||m.isBoolean(ba)){if(m.isFunctionParameter(ba)||!1===m.isSimpleType(ba))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);M[aa]=ba===m.voidOperation?null:
ba}else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}r=c.createFromGraphicLikeObject(r,M,null,l.timeZone)}r._geometry=m.fixSpatialReference(r.geometry(),l.spatialReference);r.immutable=!1;return r})};f.dictionary=function(l,w){return D(l,w,(r,M,a)=>{if(0===a.length||1===a.length&&null===a[0])return a=new L,a.immutable=!1,a;if(1===a.length&&m.isString(a[0]))try{var Q=JSON.parse(a[0]),aa=L.convertObjectToArcadeDictionary(Q,m.defaultTimeZone(l),!1);aa.immutable=!1;return aa}catch(ba){throw new A.ArcadeExecutionError(l,
A.ExecutionErrorCodes.InvalidParameter,w);}if(1===a.length&&a[0]instanceof y)try{const ba=a[0].toJSON();ba.hasZ=!0===a[0].hasZ;ba.hasM=!0===a[0].hasM;const ra=L.convertObjectToArcadeDictionary(ba,m.defaultTimeZone(l),!1);ra.immutable=!1;return ra}catch(ba){throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}if(1===a.length&&m.isFeature(a[0]))try{const ba=new L;ba.immutable=!1;ba.setField("geometry",a[0].geometry());const ra=new L;ra.immutable=!1;ba.setField("attributes",
ra);for(const ya of a[0].keys())ra.setField(ya,a[0].field(ya));return ba}catch(ba){throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}if(1===a.length&&a[0]instanceof L)try{const ba=new L;ba.immutable=!1;for(const ra of a[0].keys())ba.setField(ra,a[0].field(ra));return ba}catch(ba){throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}if(2===a.length&&a[0]instanceof L&&m.isBoolean(a[1]))try{if(!0!==a[1]){const ba=new L;ba.immutable=!1;for(const ra of a[0].keys())ba.setField(ra,
a[0].field(ra));return ba}return a[0].deepClone()}catch(ba){throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);}if(0!==a.length%2)throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.WrongNumberOfParameters,w);r={};for(M=0;M<a.length;M+=2)if(Q=m.toString(a[M]),aa=a[M+1],null===aa||void 0===aa||m.isString(aa)||isNaN(aa)||m.isDate(aa)||m.isNumber(aa)||m.isBoolean(aa)||m.isDateOnly(aa)||m.isTime(aa)||m.isArray(aa)||m.isImmutableArray(aa)){if(m.isFunctionParameter(aa))throw new A.ArcadeExecutionError(l,
A.ExecutionErrorCodes.InvalidParameter,w);r[Q]=aa===m.voidOperation?null:aa}else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);a=new L(r);a.immutable=!1;return a})};f.haskey=function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,2,2,l,w);r=m.toString(a[1]);if(B(a[0])||a[0]instanceof L)return a[0].hasField(r);if(a[0]instanceof y)return(a=q(a[0],r,null,null,2))&&"notfound"===a.keystate?!1:!0;throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);})};f.hasvalue=
function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,2,2,l,w);if(m.isArray(a[1])||m.isImmutableArray(a[1])){M=a[1];r=[];if(m.isImmutableArray(M))r=M.toArray();else if(m.isArray(M))r=M;else throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);a=a[0];if(null===a)return!1;for(var Q of r)if(m.isFeature(a)){if(!1===m.isString(Q)||!a.hasField(Q))return!1;a=a.field(Q);if(null===a)return!1}else if(a instanceof L){if(!1===m.isString(Q)||!a.hasField(Q))return!1;a=a.field(Q);if(null===a)return!1}else if(a instanceof
y){if(!1===m.isString(Q))return!1;a=q(a,Q,null,null,0);if(null===a)return!1}else if(m.isArray(a)){if(!1===m.isNumber(Q))return!1;a=a[Q];if(null===a||void 0===a)return!1}else if(m.isImmutableArray(a)){if(!1===m.isNumber(Q))return!1;a=a.get(Q);if(null===a||void 0===a)return!1}else return!1;return!0}if(null===a[0]||null===a[1])return!1;Q=m.toString(a[1]);return m.isFeature(a[0])||a[0]instanceof L?a[0].hasField(Q)&&null!==a[0].field(Q)?!0:!1:a[0]instanceof y?null===q(a[0],Q,null,null,0)?!1:!0:!1})};f.indexof=
function(l,w){return D(l,w,(r,M,a)=>{m.pcCheck(a,2,2,l,w);r=a[1];if(m.isArray(a[0])){for(M=0;M<a[0].length;M++)if(m.equalityTest(r,a[0][M]))return M;return-1}if(m.isImmutableArray(a[0])){M=a[0].length();for(let Q=0;Q<M;Q++)if(m.equalityTest(r,a[0].get(Q)))return Q;return-1}throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);})};f.angle=function(l,w){return D(l,w,(r,M,a)=>{a=m.autoCastFeatureToGeometry(a);m.pcCheck(a,2,3,l,w);if(!(a[0]instanceof p))throw new A.ArcadeExecutionError(l,
A.ExecutionErrorCodes.InvalidParameter,w);if(!(a[1]instanceof p))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);if(2<a.length&&!(a[2]instanceof p))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);return 2===a.length?k.angle2D(a[0],a[1]):k.angleBetween2D(a[0],a[1],a[2])})};f.bearing=function(l,w){return D(l,w,(r,M,a)=>{a=m.autoCastFeatureToGeometry(a);m.pcCheck(a,2,3,l,w);if(!(a[0]instanceof p))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,
w);if(!(a[1]instanceof p))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);if(2<a.length&&!(a[2]instanceof p))throw new A.ArcadeExecutionError(l,A.ExecutionErrorCodes.InvalidParameter,w);return 2===a.length?k.bearing2D(a[0],a[1]):k.bearingBetween2D(a[0],a[1],a[2])})};f.isselfintersecting=function(l,w){return D(l,w,(r,M,a)=>{a=m.autoCastFeatureToGeometry(a);m.pcCheck(a,1,1,l,w);r=a[0];if(r instanceof C)return r.isSelfIntersecting;if(r instanceof z)return r=r.paths,k.pathsSelfIntersecting(r);
if(r instanceof I)for(M=r.points,a=0;a<M.length;a++)for(let Q=0;Q<M.length;Q++)if(Q!==a){let aa=!0;for(let ba=0;ba<M[a].length;ba++)if(M[a][ba]!==M[Q][ba]){aa=!1;break}if(!0===aa)return!0}return m.isArray(r)||m.isImmutableArray(r)?(r=m.autoCastArrayOfPointsToPolyline(r,l.spatialReference),null!==r&&(r=r.paths),k.pathsSelfIntersecting(r)):!1})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/centroid":function(){define(["exports","../../core/mathUtils","../../geometry/Point",
"../../geometry/support/intersectsBase"],function(t,L,A,c){function b(C,z,e){const h={x:0,y:0};z&&(h.z=0);e&&(h.m=0);let B=0;var q=C[0];for(let w=0;w<C.length;w++){const r=C[w];a:if(r.length!==q.length)var v=!1;else{for(v=0;v<r.length;v++)if(r[v]!==q[v]){v=!1;break a}v=!0}if(!1===v){v=d(q,r,z);var f=r,D=z,l=e;const M={x:(q[0]+f[0])/2,y:(q[1]+f[1])/2};D&&(M.z=(q[2]+f[2])/2);D&&l?M.m=(q[3]+f[3])/2:l&&(M.m=(q[2]+f[2])/2);q=M;q.x*=v;q.y*=v;h.x+=q.x;h.y+=q.y;z&&(q.z*=v,h.z+=q.z);e&&(q.m*=v,h.m+=q.m);B+=
v;q=r}}0<B?(h.x/=B,h.y/=B,z&&(h.z/=B),e&&(h.m/=B)):(h.x=C[0][0],h.y=C[0][1],z&&(h.z=C[0][2]),e&&z?h.m=C[0][3]:e&&(h.m=C[0][2]));return h}function d(C,z,e){const h=z[0]-C[0];C=z[1]-C[1];return e?(z=z[2]-z[2],Math.sqrt(h*h+C*C+z*z)):Math.sqrt(h*h+C*C)}function m(C,z,e=0){for(;C<e;)C+=z;for(e+=z;C>=e;)C-=z;return C}function k(C,z){return Math.atan2(z.y-C.y,z.x-C.x)}function n(C,z,e){var h=C.x-z.x;C=C.y-z.y;var B=e.x-z.x;z=e.y-z.y;return Math.atan2(h*z-B*C,h*B+C*z)}const y=[];for(const C of[[9002,56146130,
6131,6132,8050,8051,8228],[9003,5702,6358,6359,6360,8052,8053],[9095,5754]]){const z=C[0];for(let e=1;e<C.length;e++)y[C[e]]=z}const I=[];I[9002]=.3048;I[9003]=.3048006096012192;I[9095]=.3048007491;const p=[0,0];t.angle2D=function(C,z){return m(k(C,z),2*Math.PI)*(180/Math.PI)};t.angleBetween2D=function(C,z,e){return L.rad2deg(m(n(C,z,e),2*Math.PI))};t.angleBetweenRad=n;t.angleRad=k;t.bearing2D=function(C,z){return m(Math.PI/2-k(C,z),2*Math.PI)*(180/Math.PI)};t.bearingBetween2D=function(C,z,e){return L.rad2deg(m(-1*
n(C,z,e),2*Math.PI))};t.centroidMultiPoint=function(C){if(0===C.points.length)return null;var z=0;let e=0,h=0,B=0;for(let q=0;q<C.points.length;q++){const v=C.getPoint(q);!0===v.hasZ&&(h+=v.z);!0===v.hasM&&(B+=v.m);z+=v.x;e+=v.y;B+=v.m}z={x:z/C.points.length,y:e/C.points.length,spatialReference:null};z.spatialReference=C.spatialReference.toJSON();!0===C.hasZ&&(z.z=h/C.points.length);!0===C.hasM&&(z.m=B/C.points.length);return new A(z)};t.centroidPolyline=function(C){const z={x:0,y:0,spatialReference:C.spatialReference.toJSON()},
e={x:0,y:0,spatialReference:C.spatialReference.toJSON()};let h=0,B=0;for(let f=0;f<C.paths.length;f++)if(0!==C.paths[f].length){a:{var q=C.paths[f];var v=!0===C.hasZ;if(1>=q.length){q=0;break a}let D=0;for(let l=1;l<q.length;l++)D+=d(q[l-1],q[l],v);q=D}0===q?(q=b(C.paths[f],!0===C.hasZ,!0===C.hasM),z.x+=q.x,z.y+=q.y,!0===C.hasZ&&(z.z+=q.z),!0===C.hasM&&(z.m+=q.m),++h):(v=b(C.paths[f],!0===C.hasZ,!0===C.hasM),e.x+=v.x*q,e.y+=v.y*q,!0===C.hasZ&&(e.z+=v.z*q),!0===C.hasM&&(e.m+=v.m*q),B+=q)}return 0<
B?(e.x/=B,e.y/=B,!0===C.hasZ&&(e.z/=B),!0===C.hasM&&(e.m/=B),new A(e)):0<h?(z.x/=h,z.y/=h,!0===C.hasZ&&(e.z/=h),!0===C.hasM&&(z.m/=h),new A(z)):null};t.getMetersPerVerticalUnitForSR=function(C){return C.vcsWkid&&void 0!==y[C.vcsWkid]?I[y[C.vcsWkid]]:C.latestVcsWkid&&void 0!==y[C.latestVcsWkid]?I[y[C.latestVcsWkid]]:1};t.pathsSelfIntersecting=function(C){for(let D=0;D<C.length;D++){const l=C[D];for(var z=0;z<l.length-1;z++){var e=l[z],h=l[z+1];for(var B=D+1;B<C.length;B++)for(var q=0;q<C[B].length-
1;q++){var v=C[B][q],f=C[B][q+1];if(c.segmentIntersects(e,h,v,f,p)&&!(p[0]===e[0]&&p[1]===e[1]||p[0]===v[0]&&p[1]===v[1]||p[0]===h[0]&&p[1]===h[1]||p[0]===f[0]&&p[1]===f[1]))return!0}}z=l.length;if(!(3>z))for(e=0;e<=z-2;e++)for(h=l[e],B=l[e+1],q=e+2;q<=z-2;q++)if(v=l[q],f=l[q+1],c.segmentIntersects(h,B,v,f,p)&&!(p[0]===h[0]&&p[1]===h[1]||p[0]===v[0]&&p[1]===v[1]||p[0]===B[0]&&p[1]===B[1]||p[0]===f[0]&&p[1]===f[1]))return!0}return!1};t.segmentLength3d=function(C,z,e){return Math.sqrt((C[0]-z[0])**
2+(C[1]-z[1])**2+(void 0!==C[2]&&void 0!==z[2]?(C[2]*e-z[2]*e)**2:0))};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/geomsync":function(){define("exports ../../kernel ../Dictionary ../executionError ../kernel ../../chunks/languageUtils ./centroid ../../core/unitUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),function(t,
L,A,c,b,d,m,k,n,y,I,p,C,z,e){function h(v){return 0===L.version.indexOf("4.")?C.fromExtent(v):new C({spatialReference:v.spatialReference,rings:[[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]]})}function B(v,f){if("polygon"!==v.type&&"polyline"!==v.type&&"extent"!==v.type)return 0;var D=1;if(v.spatialReference.vcsWkid||v.spatialReference.latestVcsWkid){D=m.getMetersPerVerticalUnitForSR(v.spatialReference);var l=k.getMetersPerUnitForSR(v.spatialReference);D/=l}l=0;
if("polyline"===v.type)for(var w of v.paths)for(var r=1;r<w.length;r++)l+=m.segmentLength3d(w[r],w[r-1],D);else if("polygon"===v.type)for(r of v.rings){for(w=1;w<r.length;w++)l+=m.segmentLength3d(r[w],r[w-1],D);if(r[0][0]!==r[r.length-1][0]||r[0][1]!==r[r.length-1][1]||void 0!==r[0][2]&&r[0][2]!==r[r.length-1][2])l+=m.segmentLength3d(r[0],r[r.length-1],D)}else"extent"===v.type&&(l+=2*m.segmentLength3d([v.xmin,v.ymin,0],[v.xmax,v.ymin,0],D),l+=2*m.segmentLength3d([v.xmin,v.ymin,0],[v.xmin,v.ymax,0],
D),l=2*l+4*Math.abs(d.defaultUndefined(v.zmax,0)*D-d.defaultUndefined(v.zmin,0)*D));v=new z({hasZ:!1,hasM:!1,spatialReference:v.spatialReference,paths:[[0,0],[0,l]]});return q.planarLength(v,f)}let q=null;t.registerFunctions=function(v,f){function D(l,w,r){d.pcCheck(r,2,2,l,w);if(!(r[0]instanceof y&&r[1]instanceof y||r[0]instanceof y&&null===r[1]||r[1]instanceof y&&null===r[0]||null===r[0]&&null===r[1]))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);}v.disjoint=function(l,
w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]||null===a[1]?!0:q.disjoint(a[0],a[1])})};v.intersects=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]||null===a[1]?!1:q.intersects(a[0],a[1])})};v.touches=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]||null===a[1]?!1:q.touches(a[0],a[1])})};v.crosses=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);
D(l,w,a);return null===a[0]||null===a[1]?!1:q.crosses(a[0],a[1])})};v.within=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]||null===a[1]?!1:q.within(a[0],a[1])})};v.contains=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]||null===a[1]?!1:q.contains(a[0],a[1])})};v.overlaps=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]||null===a[1]?!1:q.overlaps(a[0],
a[1])})};v.equals=function(l,w){return f(l,w,(r,M,a)=>{d.pcCheck(a,2,2,l,w);return a[0]===a[1]?!0:a[0]instanceof y&&a[1]instanceof y?q.equals(a[0],a[1]):d.isDate(a[0])&&d.isDate(a[1])||d.isTime(a[0])&&d.isTime(a[1])||d.isDateOnly(a[0])&&d.isDateOnly(a[1])?a[0].equals(a[1]):!1})};v.relate=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,3,3,l,w);if(a[0]instanceof y&&a[1]instanceof y)return q.relate(a[0],a[1],d.toString(a[2]));if(a[0]instanceof y&&null===a[1]||a[1]instanceof
y&&null===a[0]||null===a[0]&&null===a[1])return!1;throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);})};v.intersection=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]||null===a[1]?null:q.intersect(a[0],a[1])})};v.union=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);r=[];if(0===a.length)throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.WrongNumberOfParameters,w);if(1===a.length)if(d.isArray(a[0]))for(a=
d.autoCastFeatureToGeometry(a[0]),M=0;M<a.length;M++){if(null!==a[M]){if(!(a[M]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);r.push(a[M])}}else if(d.isImmutableArray(a[0]))for(a=d.autoCastFeatureToGeometry(a[0].toArray()),M=0;M<a.length;M++){if(null!==a[M]){if(!(a[M]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);r.push(a[M])}}else{if(a[0]instanceof y)return d.fixSpatialReference(b.cloneGeometry(a[0]),l.spatialReference);
if(null===a[0])return null;throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);}else for(M=0;M<a.length;M++)if(null!==a[M]){if(!(a[M]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);r.push(a[M])}return 0===r.length?null:q.union(r)})};v.difference=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null!==a[0]&&null===a[1]?b.cloneGeometry(a[0]):null===a[0]?null:q.difference(a[0],a[1])})};v.symmetricdifference=
function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);D(l,w,a);return null===a[0]&&null===a[1]?null:null===a[0]?b.cloneGeometry(a[1]):null===a[1]?b.cloneGeometry(a[0]):q.symmetricDifference(a[0],a[1])})};v.clip=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,2,l,w);if(!(a[1]instanceof n)&&null!==a[1])throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,
c.ExecutionErrorCodes.InvalidParameter,w);return null===a[1]?null:q.clip(a[0],a[1])})};v.cut=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,2,l,w);if(!(a[1]instanceof z)&&null!==a[1])throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(null===a[0])return[];if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return null===a[1]?[b.cloneGeometry(a[0])]:q.cut(a[0],a[1])})};v.area=function(l,
w){return f(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);a=d.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(d.isArray(a[0])||d.isImmutableArray(a[0]))return r=d.autoCastArrayOfPointsToPolygon(a[0],l.spatialReference),null===r?0:q.planarArea(r,b.convertSquareUnitsToCode(d.defaultUndefined(a[1],-1)));if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.planarArea(a[0],b.convertSquareUnitsToCode(d.defaultUndefined(a[1],-1)))})};v.areageodetic=function(l,
w){return f(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);a=d.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(d.isArray(a[0])||d.isImmutableArray(a[0]))return r=d.autoCastArrayOfPointsToPolygon(a[0],l.spatialReference),null===r?0:q.geodesicArea(r,b.convertSquareUnitsToCode(d.defaultUndefined(a[1],-1)));if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.geodesicArea(a[0],b.convertSquareUnitsToCode(d.defaultUndefined(a[1],-1)))})};v.length=function(l,
w){return f(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);a=d.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(d.isArray(a[0])||d.isImmutableArray(a[0]))return r=d.autoCastArrayOfPointsToPolyline(a[0],l.spatialReference),null===r?0:q.planarLength(r,b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1)));if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.planarLength(a[0],b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1)))})};v.length3d=function(l,
w){return f(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);a=d.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(d.isArray(a[0])||d.isImmutableArray(a[0]))return r=d.autoCastArrayOfPointsToPolyline(a[0],l.spatialReference),null===r?0:!0===r.hasZ?B(r,b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1))):q.planarLength(r,b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1)));if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return!0===a[0].hasZ?B(a[0],
b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1))):q.planarLength(a[0],b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1)))})};v.lengthgeodetic=function(l,w){return f(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);a=d.autoCastFeatureToGeometry(a);if(null===a[0])return 0;if(d.isArray(a[0])||d.isImmutableArray(a[0]))return r=d.autoCastArrayOfPointsToPolyline(a[0],l.spatialReference),null===r?0:q.geodesicLength(r,b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1)));if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,
c.ExecutionErrorCodes.InvalidParameter,w);return q.geodesicLength(a[0],b.convertLinearUnitsToCode(d.defaultUndefined(a[1],-1)))})};v.distance=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3,l,w);r=a[0];if(d.isArray(a[0])||d.isImmutableArray(a[0]))r=d.autoCastArrayOfPointsToMultiPoint(a[0],l.spatialReference);M=a[1];if(d.isArray(a[1])||d.isImmutableArray(a[1]))M=d.autoCastArrayOfPointsToMultiPoint(a[1],l.spatialReference);if(!(r instanceof y))throw new c.ArcadeExecutionError(l,
c.ExecutionErrorCodes.InvalidParameter,w);if(!(M instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.distance(r,M,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1)))})};v.distancegeodetic=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3,l,w);r=a[0];M=a[1];if(!(r instanceof p))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(!(M instanceof p))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,
w);const Q=new z({paths:[],spatialReference:r.spatialReference});Q.addPath([r,M]);return q.geodesicLength(Q,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1)))})};v.densify=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3,l,w);if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);r=d.toNumber(a[1]);if(isNaN(r))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,
w);if(0>=r)throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return a[0]instanceof C||a[0]instanceof z?q.densify(a[0],r,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1))):a[0]instanceof n?q.densify(h(a[0]),r,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1))):a[0]})};v.densifygeodetic=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3,l,w);if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,
w);r=d.toNumber(a[1]);if(isNaN(r))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(0>=r)throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return a[0]instanceof C||a[0]instanceof z?q.geodesicDensify(a[0],r,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1))):a[0]instanceof n?q.geodesicDensify(h(a[0]),r,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1))):a[0]})};v.generalize=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);
d.pcCheck(a,2,4,l,w);if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);r=d.toNumber(a[1]);if(isNaN(r))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.generalize(a[0],r,d.toBoolean(d.defaultUndefined(a[2],!0)),b.convertLinearUnitsToCode(d.defaultUndefined(a[3],-1)))})};v.buffer=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3,l,w);if(null===a[0])return null;
if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);r=d.toNumber(a[1]);if(isNaN(r))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return 0===r?b.cloneGeometry(a[0]):q.buffer(a[0],r,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1)))})};v.buffergeodetic=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3,l,w);if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,
c.ExecutionErrorCodes.InvalidParameter,w);r=d.toNumber(a[1]);if(isNaN(r))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return 0===r?b.cloneGeometry(a[0]):q.geodesicBuffer(a[0],r,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1)))})};v.offset=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,6,l,w);if(null===a[0])return null;if(!(a[0]instanceof C||a[0]instanceof z))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,
w);r=d.toNumber(a[1]);if(isNaN(r))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);M=d.toNumber(d.defaultUndefined(a[4],10));if(isNaN(M))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);const Q=d.toNumber(d.defaultUndefined(a[5],0));if(isNaN(Q))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.offset(a[0],r,b.convertLinearUnitsToCode(d.defaultUndefined(a[2],-1)),d.toString(d.defaultUndefined(a[3],"round")).toLowerCase(),
M,Q)})};v.rotate=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,3,l,w);r=a[0];if(null===r)return null;if(!(r instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);r instanceof n&&(r=C.fromExtent(r));M=d.toNumber(a[1]);if(isNaN(M))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);a=d.defaultUndefined(a[2],null);if(null===a)return q.rotate(r,M);if(a instanceof p)return q.rotate(r,M,a);throw new c.ArcadeExecutionError(l,
c.ExecutionErrorCodes.InvalidParameter,w);})};v.centroid=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,1,1,l,w);if(null===a[0])return null;r=a[0];if(d.isArray(a[0])||d.isImmutableArray(a[0]))r=d.autoCastArrayOfPointsToMultiPoint(a[0],l.spatialReference);if(null===r)return null;if(!(r instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return r instanceof p?d.fixSpatialReference(b.cloneGeometry(a[0]),l.spatialReference):r instanceof
C?r.centroid:r instanceof z?m.centroidPolyline(r):r instanceof I?m.centroidMultiPoint(r):r instanceof n?r.center:null})};v.multiparttosinglepart=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,1,1,l,w);M=[];if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(a[0]instanceof p||a[0]instanceof n)return[d.fixSpatialReference(b.cloneGeometry(a[0]),l.spatialReference)];r=q.simplify(a[0]);if(r instanceof
C){a=[];M=[];for(var Q=0;Q<r.rings.length;Q++)if(r.isClockwise(r.rings[Q])){const aa=e.fromJSON({rings:[r.rings[Q]],hasZ:!0===r.hasZ,hasM:!0===r.hasM,spatialReference:r.spatialReference.toJSON()});a.push(aa)}else M.push({ring:r.rings[Q],pt:r.getPoint(Q,0)});for(r=0;r<M.length;r++)for(Q=0;Q<a.length;Q++)if(a[Q].contains(M[r].pt)){a[Q].addRing(M[r].ring);break}return a}if(r instanceof z){a=[];for(M=0;M<r.paths.length;M++)Q=e.fromJSON({paths:[r.paths[M]],hasZ:!0===r.hasZ,hasM:!0===r.hasM,spatialReference:r.spatialReference.toJSON()}),
a.push(Q);return a}if(a[0]instanceof I){r=d.fixSpatialReference(b.cloneGeometry(a[0]),l.spatialReference);for(a=0;a<r.points.length;a++)M.push(r.getPoint(a));return M}return null})};v.issimple=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,1,1,l,w);if(null===a[0])return!0;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.isSimple(a[0])})};v.simplify=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);
d.pcCheck(a,1,1,l,w);if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.simplify(a[0])})};v.convexhull=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,1,1,l,w);if(null===a[0])return null;if(!(a[0]instanceof y))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);return q.convexHull(a[0])})};v.nearestcoordinate=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);
d.pcCheck(a,2,2,l,w);if(!(a[0]instanceof y||null===a[0]))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(!(a[1]instanceof p||null===a[1]))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(null===a[0]||null===a[1])return null;r=q.nearestCoordinate(a[0],a[1]);return null===r||r.isEmpty?null:A.convertObjectToArcadeDictionary({coordinate:r.coordinate,distance:r.distance,sideOfLine:0===r.distance?"straddle":r.isRightSide?"right":"left"},d.defaultTimeZone(l),
!1,!0)})};v.nearestvertex=function(l,w){return f(l,w,(r,M,a)=>{a=d.autoCastFeatureToGeometry(a);d.pcCheck(a,2,2,l,w);if(!(a[0]instanceof y||null===a[0]))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(!(a[1]instanceof p||null===a[1]))throw new c.ArcadeExecutionError(l,c.ExecutionErrorCodes.InvalidParameter,w);if(null===a[0]||null===a[1])return null;r=q.nearestVertex(a[0],a[1]);return null===r||r.isEmpty?null:A.convertObjectToArcadeDictionary({coordinate:r.coordinate,
distance:r.distance,sideOfLine:0===r.distance?"straddle":r.isRightSide?"right":"left"},d.defaultTimeZone(l),!1,!0)})}};t.setGeometryEngine=function(v){q=v};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/maths":function(){define(["exports","../../chunks/languageUtils","../../core/number"],function(t,L,A){function c(b,d,m){if(void 0===m||0===+m)return Math[b](d);d=+d;m=+m;if(isNaN(d)||"number"!==typeof m||0!==m%1)return NaN;d=d.toString().split("e");d=Math[b](+(d[0]+
"e"+(d[1]?+d[1]-m:-m)));d=d.toString().split("e");return+(d[0]+"e"+(d[1]?+d[1]+m:m))}t.registerFunctions=function(b,d){function m(k,n,y){k=L.toNumber(k);return isNaN(k)?k:isNaN(n)||isNaN(y)||n>y?NaN:k<n?n:k>y?y:k}b.number=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,2,k,n);y=p[0];return L.isNumber(y)?y:null===y?0:L.isDate(y)||L.isTime(y)||L.isDateOnly(y)?y.toNumber():L.isBoolean(y)?Number(y):L.isArray(y)?NaN:""===y||void 0===y?Number(y):L.isString(y)?void 0!==p[1]?(p=L.multiReplace(p[1],"\u2030",
""),p=L.multiReplace(p,"\u00a4",""),A.parse(y,{pattern:p})):Number(y.trim()):Number(y)})};b.abs=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.abs(L.toNumber(p[0]))})};b.acos=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.acos(L.toNumber(p[0]))})};b.asin=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.asin(L.toNumber(p[0]))})};b.atan=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.atan(L.toNumber(p[0]))})};b.atan2=
function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,2,2,k,n);return Math.atan2(L.toNumber(p[0]),L.toNumber(p[1]))})};b.ceil=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,2,k,n);return 2===p.length?(y=L.toNumber(p[1]),isNaN(y)&&(y=0),c("ceil",L.toNumber(p[0]),-1*y)):Math.ceil(L.toNumber(p[0]))})};b.round=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,2,k,n);return 2===p.length?(y=L.toNumber(p[1]),isNaN(y)&&(y=0),c("round",L.toNumber(p[0]),-1*y)):Math.round(L.toNumber(p[0]))})};b.floor=function(k,
n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,2,k,n);return 2===p.length?(y=L.toNumber(p[1]),isNaN(y)&&(y=0),c("floor",L.toNumber(p[0]),-1*y)):Math.floor(L.toNumber(p[0]))})};b.cos=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.cos(L.toNumber(p[0]))})};b.isnan=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return"number"===typeof p[0]&&isNaN(p[0])})};b.exp=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.exp(L.toNumber(p[0]))})};b.log=function(k,n){return d(k,
n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.log(L.toNumber(p[0]))})};b.pow=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,2,2,k,n);return L.toNumber(p[0])**L.toNumber(p[1])})};b.random=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,0,0,k,n);return Math.random()})};b.sin=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.sin(L.toNumber(p[0]))})};b.sqrt=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.sqrt(L.toNumber(p[0]))})};b.tan=function(k,n){return d(k,
n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return Math.tan(L.toNumber(p[0]))})};b.isempty=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return null===p[0]||""===p[0]||void 0===p[0]||p[0]===L.voidOperation?!0:!1})};b["boolean"]=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,1,1,k,n);return L.toBoolean(p[0])})};b.constrain=function(k,n){return d(k,n,(y,I,p)=>{L.pcCheck(p,3,3,k,n);y=L.toNumber(p[1]);I=L.toNumber(p[2]);if(L.isArray(p[0])){var C=[];for(var z of p[0])C.push(m(z,y,I));return C}if(L.isImmutableArray(p[0])){z=
[];for(C=0;C<p[0].length();C++)z.push(m(p[0].get(C),y,I));return z}return m(p[0],y,I)})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/stats":function(){define(["exports","../executionError","../../chunks/languageUtils","./fieldStats"],function(t,L,A,c){function b(d,m,k,n){if(1===n.length){if(A.isArray(n[0]))return c.calculateStat(d,n[0],-1);if(A.isImmutableArray(n[0]))return c.calculateStat(d,n[0].toArray(),-1)}return c.calculateStat(d,n,-1)}t.registerFunctions=
function(d,m){d.stdev=function(k,n){return m(k,n,(y,I,p)=>b("stdev",y,I,p))};d.variance=function(k,n){return m(k,n,(y,I,p)=>b("variance",y,I,p))};d.average=function(k,n){return m(k,n,(y,I,p)=>b("mean",y,I,p))};d.mean=function(k,n){return m(k,n,(y,I,p)=>b("mean",y,I,p))};d.sum=function(k,n){return m(k,n,(y,I,p)=>b("sum",y,I,p))};d.min=function(k,n){return m(k,n,(y,I,p)=>b("min",y,I,p))};d.max=function(k,n){return m(k,n,(y,I,p)=>b("max",y,I,p))};d.distinct=function(k,n){return m(k,n,(y,I,p)=>b("distinct",
y,I,p))};d.count=function(k,n){return m(k,n,(y,I,p)=>{A.pcCheck(p,1,1,k,n);if(A.isArray(p[0])||A.isString(p[0]))return p[0].length;if(A.isImmutableArray(p[0]))return p[0].length();throw new L.ArcadeExecutionError(k,L.ExecutionErrorCodes.InvalidParameter,n);})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/fieldStats":function(){define(["exports","../../chunks/languageUtils"],function(t,L){function A(b){let d=0;for(let m=0;m<b.length;m++)d+=b[m];return d/b.length}
function c(b){const d=A(b);let m=0;for(let k=0;k<b.length;k++)m+=(d-b[k])**2;return m/b.length}t.calculateStat=function(b,d,m=1E3){switch(b.toLowerCase()){case "distinct":a:{b=[];const k={},n=[];for(let y=0;y<d.length;y++){if(void 0!==d[y]&&null!==d[y]&&d[y]!==L.voidOperation){const I=d[y];if(L.isNumber(I)||L.isString(I))void 0===k[I]&&(b.push(I),k[I]=1);else{let p=!1;for(let C=0;C<n.length;C++)!0===L.equalityTest(n[C],I)&&(p=!0);!1===p&&(n.push(I),b.push(I))}}if(b.length>=m&&-1!==m){d=b;break a}}d=
b}return d;case "avg":case "mean":return A(L.toNumberArray(d));case "min":return Math.min.apply(Math,L.toNumberArray(d));case "sum":d=L.toNumberArray(d);m=0;for(b=0;b<d.length;b++)m+=d[b];return m;case "max":return Math.max.apply(Math,L.toNumberArray(d));case "stdev":case "stddev":return Math.sqrt(c(L.toNumberArray(d)));case "var":case "variance":return c(L.toNumberArray(d));case "count":return d.length}return 0};t.decodeStatType=function(b){switch(b.toLowerCase()){case "distinct":return"distinct";
case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/string":function(){define("exports ../ArcadePortal ../Attachment ../Dictionary ../executionError ../../chunks/languageUtils ../featureset/support/shared ./convertdirection ./hash ../../core/urlUtils ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/SpatialReference ../../portal/Portal".split(" "),
function(t,L,A,c,b,d,m,k,n,y,I,p,C,z,e,h,B){function q(f,D){if(!f||!D)return f===D;if(f.x===D.x&&f.y===D.y){if(f.hasZ){if(f.z!==D.z)return!1}else if(D.hasZ)return!1;if(f.hasM){if(f.m!==D.m)return!1}else if(D.hasM)return!1;return!0}return!1}function v(f,D,l){if(null===f)D.updateUint8Array([0,139]);else if(d.isArray(f)){D.updateUint8Array([61]);if(l.map.has(f))f=l.map.get(f),D.updateIntArray([f^61237541]);else{l.map.set(f,l.currentLength++);for(var w of f)v(w,D,l);l.map.delete(f);l.currentLength--}D.updateUint8Array([199])}else if(d.isImmutableArray(f)){D.updateUint8Array([61]);
if(l.map.has(f))f=l.map.get(f),D.updateIntArray([f^61237541]);else{l.map.set(f,l.currentLength++);for(var r of f.toArray())v(r,D,l);l.map.delete(f);l.currentLength--}D.updateUint8Array([199])}else if(d.isDate(f))D.updateIntArray([f.toNumber()]),D.updateUint8Array([241]);else if(d.isDateOnly(f))D.updateIntArray([f.toNumber()]),D.updateIntArray([257]);else if(d.isTime(f))D.updateIntArray([f.toNumber()]),D.updateIntArray([263]);else if(d.isString(f))D.updateIntArray([f.length]),D.updateWithString(f),
D.updateUint8Array([41]);else if(d.isBoolean(f))D.updateUint8Array([!0===f?1:0,113]);else if(d.isNumber(f))D.updateFloatArray([f]),D.updateUint8Array([173]);else{if(f instanceof A)throw new b.ArcadeExecutionError(l.context,b.ExecutionErrorCodes.UnsupportedHashType,l.node);if(f instanceof L)throw new b.ArcadeExecutionError(l.context,b.ExecutionErrorCodes.UnsupportedHashType,l.node);if(f instanceof c){D.updateUint8Array([223]);if(l.map.has(f))f=l.map.get(f),D.updateIntArray([f^61237541]);else{l.map.set(f,
l.currentLength++);for(var M of f.keys())D.updateIntArray([M.length]),D.updateWithString(M),D.updateUint8Array([251]),w=f.field(M),v(w,D,l),D.updateUint8Array([239]);l.map.delete(f);l.currentLength--}D.updateUint8Array([73])}else{if(d.isFeature(f))throw new b.ArcadeExecutionError(l.context,b.ExecutionErrorCodes.UnsupportedHashType,l.node);if(f instanceof C)D.updateIntArray([3833836621]),D.updateIntArray([0]),D.updateFloatArray([f.x]),D.updateIntArray([1]),D.updateFloatArray([f.y]),f.hasZ&&(D.updateIntArray([2]),
D.updateFloatArray([f.z])),f.hasM&&(D.updateIntArray([3]),D.updateFloatArray([f.m])),D.updateIntArray([3765347959]),v(f.spatialReference.wkid,D,l);else if(f instanceof z){D.updateIntArray([1266616829]);for(M=0;M<f.rings.length;M++){r=f.rings[M];w=[];var a=null;let Q=null;for(let aa=0;aa<r.length;aa++){const ba=f.getPoint(M,aa);if(0===aa)a=ba;else if(q(Q,ba))continue;Q=ba;aa===r.length-1&&q(a,ba)||w.push(ba)}D.updateIntArray([1397116793,w.length]);for(r=0;r<w.length;r++)a=w[r],D.updateIntArray([3962308117,
r]),v(a,D,l),D.updateIntArray([2716288009]);D.updateIntArray([2278822459])}D.updateIntArray([3878477243]);v(f.spatialReference.wkid,D,l)}else if(f instanceof e){D.updateIntArray([4106883559]);for(M=0;M<f.paths.length;M++){w=f.paths[M];D.updateIntArray([1397116793,w.length]);for(r=0;r<w.length;r++)D.updateIntArray([3962308117,r]),v(f.getPoint(M,r),D,l),D.updateIntArray([2716288009]);D.updateIntArray([2278822459])}D.updateIntArray([2568784753]);v(f.spatialReference.wkid,D,l)}else if(f instanceof p){D.updateIntArray([588535921,
f.points.length]);for(M=0;M<f.points.length;M++)w=f.getPoint(M),D.updateIntArray([M]),v(w,D,l);D.updateIntArray([1700171621]);v(f.spatialReference.wkid,D,l)}else if(f instanceof I)D.updateIntArray([3483648373]),D.updateIntArray([0]),D.updateFloatArray([f.xmax]),D.updateIntArray([1]),D.updateFloatArray([f.xmin]),D.updateIntArray([2]),D.updateFloatArray([f.ymax]),D.updateIntArray([3]),D.updateFloatArray([f.ymin]),f.hasZ&&(D.updateIntArray([4]),D.updateFloatArray([f.zmax]),D.updateIntArray([5]),D.updateFloatArray([f.zmin])),
f.hasM&&(D.updateIntArray([6]),D.updateFloatArray([f.mmax]),D.updateIntArray([7]),D.updateFloatArray([f.mmin])),D.updateIntArray([3622027469]),v(f.spatialReference.wkid,D,l);else if(f instanceof h)D.updateIntArray([14]),void 0!==f.wkid&&null!==f.wkid&&D.updateIntArray([f.wkid]),f.wkt&&D.updateWithString(f.wkt),f.wkt2&&D.updateWithString(f.wkt2);else{if(d.isFunctionParameter(f))throw new b.ArcadeExecutionError(l.context,b.ExecutionErrorCodes.UnsupportedHashType,l.node);if(d.isFeatureSet(f))throw new b.ArcadeExecutionError(l.context,
b.ExecutionErrorCodes.UnsupportedHashType,l.node);d.isFeatureSetCollection(f);throw new b.ArcadeExecutionError(l.context,b.ExecutionErrorCodes.UnsupportedHashType,l.node);}}}}t.registerFunctions=function(f,D){f.portal=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);return new L(d.toString(a[0]))})};f.typeof=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);r=d.getType(a[0]);if("Unrecognized Type"===r)throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.UnrecognizedType,w);return r})};
f.trim=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);return d.toString(a[0]).trim()})};f.tohex=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);r=d.toNumber(a[0]);return isNaN(r)?r:r.toString(16)})};f.upper=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);return d.toString(a[0]).toUpperCase()})};f.proper=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);r=1;2===a.length&&"firstword"===d.toString(a[1]).toLowerCase()&&(r=2);M=/\s/;a=d.toString(a[0]);let Q="",aa=
!0;for(let ba=0;ba<a.length;ba++){let ra=a[ba];M.test(ra)?1===r&&(aa=!0):ra.toUpperCase()!==ra.toLowerCase()&&(aa?(ra=ra.toUpperCase(),aa=!1):ra=ra.toLowerCase());Q+=ra}return Q})};f.lower=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);return d.toString(a[0]).toLowerCase()})};f.guid=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,0,1,l,w);if(0<a.length)switch(d.toString(a[0]).toLowerCase()){case "digits":return d.generateUUID().replace("-","").replace("-","").replace("-","").replace("-",
"");case "digits-hyphen":return d.generateUUID();case "digits-hyphen-parentheses":return"("+d.generateUUID()+")"}return"{"+d.generateUUID()+"}"})};f.standardizeguid=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,2,l,w);r=d.toString(a[0]);if(""===r||null===r)return"";r=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(r);if(!r)return"";r=r.groups;r=r.partA+"-"+r.partB+"-"+r.partC+"-"+r.partD+
"-"+r.partE;switch(d.toString(a[1]).toLowerCase()){case "digits":return r.replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return r;case "digits-hyphen-parentheses":return"("+r+")"}return"{"+r+"}"})};f.console=function(l,w){return D(l,w,(r,M,a)=>{0!==a.length&&(1===a.length?l.console(d.toString(a[0])):l.console(d.toString(a)));return d.voidOperation})};f.mid=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,3,l,w);r=d.toNumber(a[1]);if(isNaN(r))return"";0>r&&(r=
0);if(2===a.length)return d.toString(a[0]).substr(r);M=d.toNumber(a[2]);if(isNaN(M))return"";0>M&&(M=0);return d.toString(a[0]).substr(r,M)})};f.find=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,3,l,w);r=0;if(2<a.length){r=d.toNumber(d.defaultUndefined(a[2],0));if(isNaN(r))return-1;0>r&&(r=0)}return d.toString(a[1]).indexOf(d.toString(a[0]),r)})};f.left=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,2,l,w);r=d.toNumber(a[1]);if(isNaN(r))return"";0>r&&(r=0);return d.toString(a[0]).substr(0,
r)})};f.right=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,2,l,w);r=d.toNumber(a[1]);if(isNaN(r))return"";0>r&&(r=0);return d.toString(a[0]).substr(-1*r,r)})};f.split=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,4,l,w);r=d.toNumber(d.defaultUndefined(a[2],-1));M=d.toBoolean(d.defaultUndefined(a[3],!1));-1===r||null===r||!0===M?a=d.toString(a[0]).split(d.toString(a[1])):(isNaN(r)&&(r=-1),-1>r&&(r=-1),a=d.toString(a[0]).split(d.toString(a[1]),r));if(!1===M)return a;M=[];for(let Q=0;Q<a.length&&
!(-1!==r&&M.length>=r);Q++)""!==a[Q]&&void 0!==a[Q]&&M.push(a[Q]);return M})};f.text=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);return d.toStringExplicit(a[0],a[1])})};f.concatenate=function(l,w){return D(l,w,(r,M,a)=>{r=[];if(1>a.length)return"";if(d.isArray(a[0])){M=d.defaultUndefined(a[2],"");for(var Q=0;Q<a[0].length;Q++)r[Q]=d.toStringExplicit(a[0][Q],M);return 1<a.length?r.join(a[1]):r.join("")}if(d.isImmutableArray(a[0])){M=d.defaultUndefined(a[2],"");for(Q=0;Q<a[0].length();Q++)r[Q]=
d.toStringExplicit(a[0].get(Q),M);return 1<a.length?r.join(a[1]):r.join("")}for(M=0;M<a.length;M++)r[M]=d.toStringExplicit(a[M]);return r.join("")})};f.reverse=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);if(d.isArray(a[0]))return r=a[0].slice(0),r.reverse(),r;if(d.isImmutableArray(a[0]))return r=a[0].toArray().slice(0),r.reverse(),r;throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.replace=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,3,4,l,w);r=d.toString(a[0]);
M=d.toString(a[1]);const Q=d.toString(a[2]);return(4===a.length?d.toBoolean(a[3]):1)?d.multiReplace(r,M,Q):r.replace(M,Q)})};f.schema=function(l,w){return D(l,w,(r,M,a)=>{if(d.isFeature(a[0]))return(r=d.featureSchema(a[0]))?c.convertObjectToArcadeDictionary(r,d.defaultTimeZone(l)):null;throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.subtypes=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);if(d.isFeature(a[0]))return(r=d.featureSubtypes(a[0]))?c.convertObjectToArcadeDictionary(r,
d.defaultTimeZone(l)):null;throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.subtypecode=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);if(d.isFeature(a[0])){r=d.featureSubtypes(a[0]);if(!r)return null;if(r.subtypeField&&a[0].hasField(r.subtypeField)){a=a[0].field(r.subtypeField);for(const Q of r.subtypes)if(Q.code===a)return Q.code}return null}throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.subtypename=function(l,w){return D(l,
w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);if(d.isFeature(a[0])){r=d.featureSubtypes(a[0]);if(!r)return"";if(r.subtypeField&&a[0].hasField(r.subtypeField)){a=a[0].field(r.subtypeField);for(const Q of r.subtypes)if(Q.code===a)return Q.name}return""}throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.gdbversion=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);if(d.isFeature(a[0]))return a[0].gdbVersion();throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,
w);})};f.domain=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,3,l,w);if(d.isFeature(a[0]))return(r=d.featureFullDomain(a[0],d.toString(a[1]),void 0===a[2]?void 0:a[2]))&&r.domain?"coded-value"===r.domain.type||"codedValue"===r.domain.type?c.convertObjectToArcadeDictionary({type:"codedValue",name:r.domain.name,dataType:m.layerFieldEsriConstants[r.field.type],codedValues:r.domain.codedValues.map(Q=>({name:Q.name,code:Q.code}))},d.defaultTimeZone(l)):c.convertObjectToArcadeDictionary({type:"range",
name:r.domain.name,dataType:m.layerFieldEsriConstants[r.field.type],min:r.domain.min,max:r.domain.max},d.defaultTimeZone(l)):null;throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.domainname=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,2,4,l,w);if(d.isFeature(a[0]))return d.featureDomainValueLookup(a[0],d.toString(a[1]),a[2],void 0===a[3]?void 0:a[3]);throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.domaincode=function(l,w){return D(l,
w,(r,M,a)=>{d.pcCheck(a,2,4,l,w);if(d.isFeature(a[0]))return d.featureDomainCodeLookup(a[0],d.toString(a[1]),a[2],void 0===a[3]?void 0:a[3]);throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.urlencode=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);if(null===a[0])return"";if(a[0]instanceof c){r="";for(const Q of a[0].keys())M=a[0].field(Q),""!==r&&(r+="\x26"),r=null===M?r+(encodeURIComponent(Q)+"\x3d"):r+(encodeURIComponent(Q)+"\x3d"+encodeURIComponent(M));
return r}return encodeURIComponent(d.toString(a[0]))})};f.hash=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);r=new n.XXH(0);v(a[0],r,{context:l,node:w,map:new Map,currentLength:0});return r.digest()})};f.convertdirection=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,3,3,l,w);return k.convertDirection(a[0],a[1],a[2])})};f.fromjson=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,1,l,w);if(!1===d.isString(a[0]))throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,
w);return c.convertJsonToArcade(JSON.parse(d.toString(a[0])),d.defaultTimeZone(l))})};f.expects=function(l,w){return D(l,w,(r,M,a)=>{if(1>a.length)throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.WrongNumberOfParameters,w);return d.voidOperation})};f.tocharcode=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);r=d.toNumber(d.defaultUndefined(a[1],0));M=d.toString(a[0]);if(0===M.length&&1===a.length)return null;if(M.length<=r||0>r)throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.OutOfBounds,
w);return M.charCodeAt(r)})};f.tocodepoint=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,1,2,l,w);r=d.toNumber(d.defaultUndefined(a[1],0));M=d.toString(a[0]);if(0===M.length&&1===a.length)return null;if(M.length<=r||0>r)throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.OutOfBounds,w);return M.codePointAt(r)})};f.fromcharcode=function(l,w){return D(l,w,(r,M,a)=>{if(1>a.length)throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.WrongNumberOfParameters,w);r=a.map(Q=>Math.trunc(d.toNumber(Q))).filter(Q=>
0<=Q&&65535>=Q);return 0===r.length?null:String.fromCharCode.apply(null,r)})};f.fromcodepoint=function(l,w){return D(l,w,(r,M,a)=>{if(1>a.length)throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.WrongNumberOfParameters,w);let Q;try{Q=a.map(aa=>Math.trunc(d.toNumber(aa))).filter(aa=>1114111>=aa&&aa>>>0===aa)}catch(aa){return null}return 0===Q.length?null:String.fromCodePoint.apply(null,Q)})};f.getuser=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,0,2,l,w);r=d.defaultUndefined(a[1],"");r=
!0===r||!1===r?"":d.toString(r);if(null!==r&&""!==r)return null;if(0===a.length||a[0]instanceof L){M=null;M=l.services?.portal?l.services.portal:B.getDefault();if(0<a.length&&(a=a[0].field("url"),a=a?y.hasSamePortal(a,M?.restUrl||""):!1,!a)||!M)return null;if(""===r&&(a="loaded"===M.loadStatus&&M.user?.sourceJSON?M.user.sourceJSON:null,a)){a=JSON.parse(JSON.stringify(a));for(const Q of["lastLogin","created","modified"])void 0!==a[Q]&&null!==a[Q]&&(a[Q]=new Date(a[Q]));return c.convertObjectToArcadeDictionary(a,
d.defaultTimeZone(l))}return null}throw new b.ArcadeExecutionError(l,b.ExecutionErrorCodes.InvalidParameter,w);})};f.getenvironment=function(l,w){return D(l,w,(r,M,a)=>{d.pcCheck(a,0,0,l,w);return c.convertObjectToArcadeDictionary(d.defaultExecutingContext(d.defaultTimeZone(l),l.spatialReference),d.defaultTimeZone(l),!0)})}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadePortal":function(){define(["./Dictionary"],function(t){class L extends t{constructor(A){super();
this.declaredClass="esri.arcade.Portal";this.immutable=!1;this.setField("url",A);this.immutable=!0}}return L})},"esri/arcade/Attachment":function(){define(["./Dictionary"],function(t){class L extends t{constructor(A,c,b,d,m,k,n){super();this.attachmentUrl=m;this.declaredClass="esri.arcade.Attachment";this.immutable=!1;this.setField("id",A);this.setField("name",c);this.setField("contenttype",b);this.setField("size",d);this.setField("exifinfo",k);this.setField("keywords",n);this.immutable=!0}deepClone(){return new L(this.field("id"),
this.field("name"),this.field("contenttype"),this.field("size"),this.attachmentUrl,this.field("exifinfo")?.deepClone()??null,this.field("keywords"))}}return L})},"esri/arcade/functions/convertdirection":function(){define(["exports","../Dictionary","../executionError","../../chunks/languageUtils","../../core/maybe"],function(t,L,A,c,b){function d(E){if(!1===c.isString(E))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,null);return E}function m(E,O){O=10**O;return Math.round(E*
O)/O}function k(E){const O=parseFloat(E.toString().replace(Math.trunc(E).toString(),"0"))*Math.sign(E);return 0>E?{fraction:O,integer:Math.ceil(E)}:{fraction:O,integer:Math.floor(E)}}function n(E,O){switch(E){case ca.north:return"SHORT"===O?"N":"North";case ca.east:return"SHORT"===O?"E":"East";case ca.south:return"SHORT"===O?"S":"South";case ca.west:return"SHORT"===O?"W":"West"}}function y(E,O){return E-Math.floor(E/O)*O}function I(E){switch(E){case U.truncated_degrees:case U.decimal_degrees:return 360;
case U.radians:return ra;case U.gradians:return 400;case U.seconds:return 1296E3;case U.fractional_degree_minutes:return 60;case U.fractional_minute_seconds:return 60;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unsupported evaluations"});}}function p(E){switch(E.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return ja.north_azimuth;case "POLAR":return ja.polar;case "QUADRANT":return ja.quadrant;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return ja.south_azimuth}throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unsupported directionType"});}function C(E){switch(E.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return U.decimal_degrees;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return U.degrees_minutes_seconds;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return U.radians;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return U.gradians}throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unsupported units"});}function z(E,O,R){let T=null;switch(O){case U.decimal_degrees:T=aa(E,3600);break;case U.seconds:T=E;break;case U.gradians:T=aa(E,3240);break;case U.radians:T=aa(E,ya);break;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}switch(R){case U.decimal_degrees:return ba(T,3600);case U.seconds:return T;case U.gradians:return ba(T,3240);case U.radians:return T/ya;default:throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}function e(E){b.assertIsSome(E);switch(E){case U.decimal_degrees:case U.truncated_degrees:case U.degrees_minutes_seconds:return U.decimal_degrees;case U.gradians:return U.gradians;case U.fractional_degree_minutes:return U.fractional_degree_minutes;case U.radians:return U.radians;case U.seconds:case U.fractional_minute_seconds:return U.seconds}}function h(E){switch(c.toNumber(E)){case 1:return{first:ca.north,second:ca.east};
case 2:return{first:ca.south,second:ca.east};case 3:return{first:ca.south,second:ca.west};case 4:return{first:ca.north,second:ca.west}}return null}function B(E){switch(E.toUpperCase().trim()){case "N":case "NORTH":return ca.north;case "E":case "EAST":return ca.east;case "S":case "SOUTH":return ca.south;case "W":case "WEST":return ca.west}return null}function q(E){E=parseFloat(E);if(c.isNumber(E)){if(isNaN(E))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});
return E}throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function v(E,O,R){const T=R===ja.quadrant;let la=null;var qa=null;let g=0;var u=0;u=0;if(T){if(2>E.length)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});u=1;(qa=h(c.toString(E[E.length-1])))?(la=qa.first,qa=qa.second):(g=1,la=B(c.toString(E[0])),qa=B(c.toString(E[E.length-1])));if(null===la||null===qa)throw new A.ArcadeExecutionError(null,
A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}switch(O){case U.decimal_degrees:case U.radians:case U.gradians:if(0===E.length)break;return T?G.createFromAngleMeridianAndDirection(F.createFromAngleAndUnits(q(E[g]),e(O)),la,qa):G.createFromAngleAndDirection(F.createFromAngleAndUnits(q(E[g]),e(O)),R);case U.degrees_minutes_seconds:u=E.length-u-g;if(3===u)return E=F.createFromDegreesMinutesSeconds(q(E[g]),q(E[g+1]),q(E[g+2])),T?G.createFromAngleMeridianAndDirection(E,la,qa):G.createFromAngleAndDirection(E,
R);if(1===u)return E=q(E[g]),E=ka.numberToDms(E),E=F.createFromDegreesMinutesSeconds(E.m_degrees,E.m_minutes,E.m_seconds),T?G.createFromAngleMeridianAndDirection(E,la,qa):G.createFromAngleAndDirection(E,R)}throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid conversion"});}function f(E){const O=new Set([" ","-","/","'",'"',"\\","^","\u00b0",oa,"\t","\r","\n","*"]);let R="";for(let T=0;T<E.length;T++){const la=E.charAt(T);R=O.has(la)?R+"RRSPLITRRSPLITRR":R+la}return R.split("RRSPLITRRSPLITRR").filter(T=>
""!==T)}function D(E,O,R){const T={padding:0,rounding:0,newpos:O};let la=!1;for(;O<E.length;){const qa=E[O];if(qa===R)la?T.rounding++:T.padding++,O++;else if("."===qa)la=!0,O++;else break}T.newpos=O-1;return T}const l=E=>(O,R,T)=>{T=T||14;return+E(O,R).toFixed(T)},w=(E,O)=>E+O,r=(E,O)=>E-O,M=(E,O)=>E*O,a=(E,O)=>E/O,Q=(E,O,R)=>l(w)(E,O,R),aa=(E,O,R)=>l(M)(E,O,R),ba=(E,O,R)=>l(a)(E,O,R),ra=2*Math.PI,ya=648E3/Math.PI,oa=String.fromCharCode(7501);var ca;(function(E){E[E.north=0]="north";E[E.east=1]="east";
E[E.south=2]="south";E[E.west=3]="west"})(ca||={});var U;(function(E){E[E.decimal_degrees=1]="decimal_degrees";E[E.seconds=2]="seconds";E[E.degrees_minutes_seconds=3]="degrees_minutes_seconds";E[E.radians=4]="radians";E[E.gradians=5]="gradians";E[E.truncated_degrees=6]="truncated_degrees";E[E.fractional_degree_minutes=7]="fractional_degree_minutes";E[E.fractional_minute_seconds=8]="fractional_minute_seconds"})(U||={});var ja;(function(E){E[E.north_azimuth=1]="north_azimuth";E[E.polar=2]="polar";E[E.quadrant=
3]="quadrant";E[E.south_azimuth=4]="south_azimuth"})(ja||={});var wa;(function(E){E[E.meridian=0]="meridian";E[E.direction=1]="direction"})(wa||={});class ka{constructor(E,O,R){this.m_degrees=E;this.m_minutes=O;this.m_seconds=R}getField(E){switch(E){case U.decimal_degrees:case U.truncated_degrees:return this.m_degrees;case U.fractional_degree_minutes:return this.m_minutes;case U.seconds:case U.fractional_minute_seconds:return this.m_seconds;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,
null,{reason:"unexpected evaluation"});}}static secondsToDMS(E){const O=k(E).fraction;E=k(E).integer;const R=Math.floor(E/3600);E-=3600*R;const T=Math.floor(E/60);return new ka(R,T,E-60*T+O)}static numberToDms(E){var O=k(E).fraction;E=k(E).integer;const R=aa(k(100*O).fraction,100);O=k(100*O).integer;return new ka(E,O,R)}format(E,O){O=m(this.m_seconds,O);let R=this.m_minutes,T=this.m_degrees;if(E===U.seconds||E===U.fractional_minute_seconds)60<=O&&(O-=60,++R),60<=R&&(R=0,++T),360<=T&&(T=0);else if(E===
U.fractional_degree_minutes)O=0,R=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,T=this.m_degrees,60<=R&&(R=0,++T),360<=T&&(T=0);else if(E===U.decimal_degrees||E===U.truncated_degrees)E=ba(this.m_seconds,3600),O=ba(this.m_minutes,60),T=Math.round(this.m_degrees+O+E),O=R=0;return new ka(T,R,O)}static dmsToSeconds(E,O,R){return 3600*E+60*O+R}}class xa{constructor(E,O,R){this.meridian=E;this.angle=O;this.direction=R}fetchAzimuth(E){return E===wa.meridian?this.meridian:this.direction}}class G{constructor(E){this._angle=
E}static createFromAngleAndDirection(E,O){return new G(new F(G._convertDirectionFormat(E.extractAngularUnits(U.seconds),O,ja.north_azimuth)))}getAngle(E){const O=this._angle.extractAngularUnits(U.seconds);switch(E){case ja.north_azimuth:case ja.south_azimuth:case ja.polar:return new F(G._convertDirectionFormat(O,ja.north_azimuth,E));case ja.quadrant:return E=G.secondsNorthAzimuthToQuadrant(O),new F(E.angle)}}getMeridian(E){const O=this._angle.extractAngularUnits(U.seconds);switch(E){case ja.north_azimuth:return ca.north;
case ja.south_azimuth:return ca.south;case ja.polar:return ca.east;case ja.quadrant:return G.secondsNorthAzimuthToQuadrant(O).meridian}}getDirection(E){const O=this._angle.extractAngularUnits(U.seconds);switch(E){case ja.north_azimuth:return ca.east;case ja.south_azimuth:return ca.west;case ja.polar:return ca.north;case ja.quadrant:return G.secondsNorthAzimuthToQuadrant(O).direction}}static secondsNorthAzimuthToQuadrant(E){const O=324E3>=E||972E3<=E?ca.north:ca.south;return new xa(O,O===ca.north?
Math.min(1296E3-E,E):Math.abs(E-648E3),648E3<E?ca.west:ca.east)}static createFromAngleMeridianAndDirection(E,O,R){return new G(new F(G.secondsQuadrantToNorthAzimuth(E.extractAngularUnits(U.seconds),O,R)))}static secondsQuadrantToNorthAzimuth(E,O,R){return O===ca.north?R===ca.east?E:1296E3-E:R===ca.east?648E3-E:648E3+E}static _convertDirectionFormat(E,O,R){let T=0;switch(O){case ja.north_azimuth:T=E;break;case ja.polar:T=324E3-E;break;case ja.quadrant:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,
null,{reason:"unexpected evaluation"});case ja.south_azimuth:T=E+648E3}E=0;switch(R){case ja.north_azimuth:E=T;break;case ja.polar:E=324E3-T;break;case ja.quadrant:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});case ja.south_azimuth:E=T-648E3}E%=1296E3;return 0>E?1296E3+E:E}}class F{constructor(E){this._seconds=E}static createFromAngleAndUnits(E,O){return new F(z(E,O,U.seconds))}extractAngularUnits(E){return z(this._seconds,U.seconds,
e(E))}static createFromDegreesMinutesSeconds(E,O,R){return new F(Q(Q(aa(E,3600),aa(O,60)),R))}}class K{constructor(E,O,R,T){this.view=E;this.angle=O;this.merdian=R;this.direction=T;this._formattedDms=this._dms=null}static createFromStringAndBearing(E,O,R){return new K(E,O.getAngle(R),O.getMeridian(R),O.getDirection(R))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){null===this._dms&&this._calculateDms();
return this._dms}fetchFormattedDms(){null===this._formattedDms&&this._calculateDms();return this._formattedDms}_calculateDms(){var E=null;let O=U.truncated_degrees,R=0;for(E=0;E<this.view.length;E++){const T=this.view[E];switch(T){case "m":E=D(this.view,E,T);O=O===U.truncated_degrees?U.fractional_degree_minutes:O;E=E.newpos;continue;case "s":E=D(this.view,E,T),O=U.fractional_minute_seconds,R=R<E.rounding?E.rounding:R,E=E.newpos}}this._dms=ka.secondsToDMS(this.angle.extractAngularUnits(U.seconds));
this._formattedDms=ka.secondsToDMS(this.angle.extractAngularUnits(U.seconds)).format(O,R)}}t.convertDirection=function(E,O,R){if(!(O instanceof L))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,null);if(!1===O.hasField("directionType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===O.hasField("angleType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"missing angleType"});
var T=p(d(O.field("directiontype")));O=C(d(O.field("angletype")));if(c.isNumber(E)){E=c.toNumber(E);if(T===ja.quadrant)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});O===U.degrees_minutes_seconds?(E=ka.numberToDms(E),T=G.createFromAngleAndDirection(F.createFromDegreesMinutesSeconds(E.m_degrees,E.m_minutes,E.m_seconds),T)):T=G.createFromAngleAndDirection(F.createFromAngleAndUnits(E,e(O)),T)}else if(c.isString(E))T=v(f(E),O,T);else if(c.isArray(E))T=
v(E,O,T);else if(c.isImmutableArray(E))T=v(E.toArray(),O,T);else throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(R instanceof L))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,null);if(!1===R.hasField("directionType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"missing directionType"});if(!1===R.hasField("outputType"))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,
null,{reason:"missing angleType"});E=p(d(R.field("directiontype")));O=R.hasField("angleType")?C(d(R.field("angletype"))):null;var la=d(R.field("outputType")).toUpperCase().trim();if(!E||!la)throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});if(!(O||"TEXT"===la&&R.hasField("format")))throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"invalid unit"});switch(la){case "VALUE":if(E===ja.quadrant||O===U.degrees_minutes_seconds)return R=
T.getAngle(E),E===ja.quadrant&&O===U.degrees_minutes_seconds?(R=ka.secondsToDMS(R.extractAngularUnits(U.seconds)),T=[n(T.getMeridian(E),"SHORT"),R.m_degrees,R.m_minutes,R.m_seconds,n(T.getDirection(E),"SHORT")]):O===U.degrees_minutes_seconds?(T=ka.secondsToDMS(R.extractAngularUnits(U.seconds)),T=[T.m_degrees,T.m_minutes,T.m_seconds]):T=E===ja.quadrant?[n(T.getMeridian(E),"SHORT"),R.extractAngularUnits(O),n(T.getDirection(E),"SHORT")]:[R.extractAngularUnits(O)],T;if((R=e(O))&&O!==U.degrees_minutes_seconds)T=
T.getAngle(E).extractAngularUnits(R);else throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});return T;case "TEXT":la="";R.hasField("format")&&(la=c.toString(R.field("format")));if(null===la||""===la){R="";switch(O){case U.decimal_degrees:R=E===ja.quadrant?"DD.DD\u00b0":"DDD.DD\u00b0";break;case U.degrees_minutes_seconds:R=E===ja.quadrant?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case U.radians:R="R.RR";break;case U.gradians:R="GGG.GG"+
oa;break;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"conversion error"});}E===ja.quadrant&&(R="p "+R+" b");la=R}R=la;var qa="",g=null,u=null;O=K.createFromStringAndBearing(R,T,E);la={D:U.decimal_degrees,d:U.truncated_degrees,m:U.fractional_degree_minutes,s:U.fractional_minute_seconds,R:U.radians,G:U.gradians};for(u=0;u<R.length;u++){var H=R[u];switch(H){case "[":g=R;H={escaped:"",newpos:u};for(u++;u<g.length;){var N=g[u];u++;if("]"===N)break;H.escaped+=
N}H.newpos=u-1;g=H;qa+=g.escaped;u=g.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":g=D(R,u,H);u=T.getAngle(E);a:{H=la[H];N=g.padding;var S=g.rounding,fa=O;let V=null;switch(H){case U.decimal_degrees:case U.radians:case U.gradians:V=y(m(u.extractAngularUnits(H),S),I(H));u=V.toFixed(S).padStart(N+S+(0<S?1:0),"0");break a;case U.truncated_degrees:case U.fractional_degree_minutes:V=y(fa.fetchFormattedDms().getField(H),I(H));u=V.toFixed(S).padStart(N+S+(0<S?1:0),"0");break a;case U.fractional_minute_seconds:V=
y(m(fa.fetchDms().getField(H),S),I(H));u=V.toFixed(S).padStart(N+S+(0<S?1:0),"0");break a;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.LogicError,null,{reason:"unexpected evaluation"});}}qa+=u;u=g.newpos;continue;case "P":case "p":qa+=n(O.fetchMeridian(),"p"===H?"SHORT":"LONG");continue;case "B":case "b":qa+=n(O.fetchDirection(),"b"===H?"SHORT":"LONG");continue;default:qa+=H}}return qa;default:throw new A.ArcadeExecutionError(null,A.ExecutionErrorCodes.InvalidParameter,null);
}};t.preciseAdd=Q;t.preciseDivide=ba;t.preciseMinus=(E,O,R)=>l(r)(E,O,R);t.preciseMultiply=aa;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/functions/hash":function(){define(["exports"],function(t){function L(c){const b=[];for(let d=0,m=c.length;d<m;d++){let k=c.charCodeAt(d);128>k?b.push(k):2048>k?b.push(192|k>>6,128|k&63):55296>k||57344<=k?b.push(224|k>>12,128|k>>6&63,128|k&63):(d++,k=65536+((k&1023)<<10|c.charCodeAt(d)&1023),b.push(240|k>>18,128|k>>12&63,128|k>>6&
63,128|k&63))}return new Uint8Array(b)}class A{constructor(c){this._seed=c;this._totallen=0;this._bufs=[];this.init()}init(){this._bufs=[];this._totallen=0;return this}updateFloatArray(c){const b=[];for(const d of c)isNaN(d)?b.push("NaN"):Infinity===d?b.push("Infinity"):-Infinity===d?b.push("-Infinity"):0===d?b.push("0"):b.push(d.toString(16));this.update(L(b.join("")))}updateIntArray(c){c=Int32Array.from(c);this.update(new Uint8Array(c.buffer))}updateUint8Array(c){this.update(Uint8Array.from(c))}updateWithString(c){return this.update(L(c))}update(c){this._bufs.push(c);
this._totallen+=c.length;return this}digest(){const c=new Uint8Array(this._totallen);let b=0;for(const d of this._bufs)c.set(d,b),b+=d.length;this.init();return this._xxHash32(c,this._seed)}_xxHash32(c,b=0){var d=b+374761393&4294967295;let m=0;if(16<=c.length){d=[b+2654435761+2246822519&4294967295,b+2246822519&4294967295,b+0&4294967295,b-2654435761&4294967295];b=c.length-16;var k=0;for(m=0;(m&4294967280)<=b;m+=4){var n=m;n=d[k]+(2246822519*(c[n]+(c[n+1]<<8))+(2246822519*(c[n+2]+(c[n+3]<<8))<<16))&
4294967295;n=n<<13|n>>>19;d[k]=2654435761*(n&65535)+(2654435761*(n>>>16)<<16)&4294967295;k=k+1&3}d=(d[0]<<1|d[0]>>>31)+(d[1]<<7|d[1]>>>25)+(d[2]<<12|d[2]>>>20)+(d[3]<<18|d[3]>>>14)&4294967295}d=d+c.length&4294967295;for(b=c.length-4;m<=b;m+=4)k=m,d=d+(3266489917*(c[k]+(c[k+1]<<8))+(3266489917*(c[k+2]+(c[k+3]<<8))<<16))&4294967295,d=d<<17|d>>>15,d=668265263*(d&65535)+(668265263*(d>>>16)<<16)&4294967295;for(;m<c.length;++m)d+=374761393*c[m],d=d<<11|d>>>21,d=2654435761*(d&65535)+(2654435761*(d>>>16)<<
16)&4294967295;d^=d>>>15;d=(2246822519*(d&65535)&4294967295)+(2246822519*(d>>>16)<<16);d^=d>>>13;d=(3266489917*(d&65535)&4294967295)+(3266489917*(d>>>16)<<16);d^=d>>>16;return 0>d?d+4294967296:d}}t.XXH=A;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeModuleResolver":function(){define("exports ../request ./executionError ./parser ./featureset/support/RecentlyUsedCache ../portal/Portal".split(" "),function(t,L,A,c,b,d){class m{constructor(k){this.portalUri=k}normalizeModuleUri(k){const n=
/^[a-z0-9A-Z]+(@[0-9]+\.[0-9]+\.[0-9]+)?([\?|\/].*)?$/gi;var y=/(?<portalurl>.+)\/home\/item\.html\?id=(?<itemid>.+)$/gi;const I=/(?<portalurl>.+)\/sharing\/rest\/content\/users\/[a-zA-Z0-9]+\/items\/(?<itemid>.+)$/gi,p=/(?<portalurl>.+)\/sharing\/rest\/content\/items\/(?<itemid>.+)$/gi;var C=/(?<itemid>.*)@(?<versionstring>[0-9]+\.[0-9]+\.[0-9]+)([\?|\/].*)?$/gi;if(k.startsWith("portal+")){let h=k.substring(7);var z="",e=h;let B=!1;for(const q of[y,p,I])if(y=q.exec(h),null!==y){z=y.groups;e=z.itemid;
z=z.portalurl;B=!0;break}if(!1===B)if(n.test(h))e=h,z=this.portalUri;else throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol,{uri:k});e.includes("/")&&(e=e.split("/")[0]);e.includes("?")&&(e=e.split("?")[0]);k="current";C=C.exec(e);null!==C&&(k=C.groups,e=k.itemid,k=k.versionstring);h=(new d({url:z})).restUrl+"/content/items/"+e+"/resources/"+k+".arc";return{url:h,scheme:"portal",uri:"PO:"+h}}if(k.startsWith("mock")){if("mock"===k)return{url:"",scheme:"mock",data:'\n      export var hello \x3d 1;\n      export function helloWorld() {\n          return "Hello World " + hello;\n      }\n  ',
uri:"mock"};e=k.replace("mock:","");if(void 0!==m.mocks[e])return{url:"",scheme:"mock",data:m.mocks[e],uri:k}}throw new A.ModuleError(A.ModuleErrorCodes.UnrecognizedUri,{uri:k});}async fetchModule(k){var n=m.cachedModules.getFromCache(k.uri);if(n)return n;n=this.fetchSource(k);m.cachedModules.addToCache(k.uri,n);let y=null;try{y=await n}catch(I){throw m.cachedModules.removeFromCache(k.uri),I;}return y}async fetchSource(k){if("portal"===k.scheme){const n=await L(k.url,{responseType:"text",query:{}});
if(n.data)return c.parseScript(n.data,[])}if("mock"===k.scheme)return c.parseScript(k.data??"",[]);throw new A.ModuleError(A.ModuleErrorCodes.UnsupportedUriProtocol);}static create(k){return new m(k)}static getDefault(){return this._default??(m._default=m._moduleResolverFactory())}static set moduleResolverClass(k){this._moduleResolverFactory=k;this._default=null}}m.mocks={};m.cachedModules=new b(30);m._default=null;m._moduleResolverFactory=()=>{const k=d.getDefault();return new m(k.url)};t.ArcadeModuleResolver=
m;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/parser":function(){define(["exports","./treeAnalysis","./lib/arcade-parser","./lib/types"],function(t,L,A,c){t.parseScript=function(b,d=[]){b=A.parse(b);if(null===b.body||void 0===b.body)throw new c.ParsingError({index:0,line:0,column:0,data:null,description:"",code:c.ParsingErrorCodes.InvalidExpression});b.loadedModules={};L.findScriptDependencies(b,d);return b};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/lib/arcade-parser":function(){define(["exports","./parser","./tokenizer","./types"],function(t,L,A,c){Object.defineProperty(t,"Keywords",{enumerable:!0,get:()=>c.Keywords});t.ParsingError=c.ParsingError;Object.defineProperty(t,"ParsingErrorCodes",{enumerable:!0,get:()=>c.ParsingErrorCodes});Object.defineProperty(t,"Syntax",{enumerable:!0,get:()=>c.Syntax});Object.defineProperty(t,"TokenType",{enumerable:!0,get:()=>c.TokenType});t.assignmentOperators=c.assignmentOperators;t.binaryOperators=
c.binaryOperators;t.isArrayExpression=c.isArrayExpression;t.isAssignmentExpression=c.isAssignmentExpression;t.isBinaryExpression=c.isBinaryExpression;t.isBlockComment=c.isBlockComment;t.isBlockStatement=c.isBlockStatement;t.isBreakStatement=c.isBreakStatement;t.isCallExpression=c.isCallExpression;t.isContinueStatement=c.isContinueStatement;t.isEmptyStatement=c.isEmptyStatement;t.isExpression=c.isExpression;t.isExpressionStatement=c.isExpressionStatement;t.isForInStatement=c.isForInStatement;t.isForStatement=
c.isForStatement;t.isFunctionDeclaration=c.isFunctionDeclaration;t.isIdentifier=c.isIdentifier;t.isIfStatement=c.isIfStatement;t.isLiteral=c.isLiteral;t.isLogicalExpression=c.isLogicalExpression;t.isMemberExpression=c.isMemberExpression;t.isObjectExpression=c.isObjectExpression;t.isProgram=c.isProgram;t.isProperty=c.isProperty;t.isReturnStatement=c.isReturnStatement;t.isStatement=c.isStatement;t.isTemplateElement=c.isTemplateElement;t.isTemplateLiteral=c.isTemplateLiteral;t.isUnaryExpression=c.isUnaryExpression;
t.isUpdateExpression=c.isUpdateExpression;t.isVariableDeclaration=c.isVariableDeclaration;t.isVariableDeclarator=c.isVariableDeclarator;t.logicalOperators=c.logicalOperators;t.operatorPrecedence=c.operatorPrecedence;t.parsingErrorMessages=c.parsingErrorMessages;t.rokenNames=c.rokenNames;t.unaryOperators=c.unaryOperators;t.updateOperators=c.updateOperators;t.parse=function(b,d,m){return(new L.Parser(b,d,m)).parseScript()};t.tokenize=function(b,d,m){b=new A.Tokenizer(b,d);d=[];let k=void 0;try{let n;
for(;n=b.getNextToken();)m&&(n=m(n)),d.push(n)}catch(n){b.errorHandler.tolerate(n)}b.errorHandler.tolerant&&(k=b.errors());return{tokens:d,errors:k}};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/parser":function(){define(["exports","./comment-handler","./error-handler","./scanner","./types"],function(t,L,A,c,b){function d(p,C=0){let z=p.start-p.lineStart,e=p.lineNumber;0>z&&(z+=C,e--);return{index:p.start,line:e,column:z}}function m(p){return[{index:p.range[0],
...p.loc.start},{index:p.range[1],...p.loc.end}]}function k(p){return b.operatorPrecedence[p]??0}var n;(function(p){p[p.None=0]="None";p[p.Function=1]="Function";p[p.IfClause=2]="IfClause";p[p.ForLoop=4]="ForLoop";p[p.WhileLoop=8]="WhileLoop"})(n||={});var y;(function(p){p[p.AsObject=0]="AsObject";p[p.Automatic=1]="Automatic"})(y||={});class I{constructor(p,C={},z){this.delegate=z;this.hasLineTerminator=!1;this.options={tokens:"boolean"===typeof C.tokens&&C.tokens,comments:"boolean"===typeof C.comments&&
C.comments,tolerant:"boolean"===typeof C.tolerant&&C.tolerant};this.options.comments&&(this.commentHandler=new L.CommentHandler);this.errorHandler=new A.ErrorHandler(this.options.tolerant);this.scanner=new c.Scanner(p,this.errorHandler);this.context={isAssignmentTarget:!1,blockContext:n.None,curlyParsingType:y.AsObject};this.rawToken={type:b.TokenType.EOF,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};
this.endMarker={index:0,line:this.scanner.lineNumber,column:0};this.readNextRawToken();this.endMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}throwIfInvalidType(p,C,{validTypes:z,invalidTypes:e}){z?.some(h=>p.type===h)||e?.some(h=>p.type===h)&&this.throwError(b.ParsingErrorCodes.InvalidExpression,C)}throwError(p,C,z=this.endMarker){const {index:e,line:h,column:B}=C;this.errorHandler.throwError({code:p,index:e,line:h,column:B+1,len:z.index-
e-1})}tolerateError(p,C){throw Error("######################################### !!!");}unexpectedTokenError(p={}){const {rawToken:C}=p;let {code:z,data:e}=p;if(C){if(!z)switch(C.type){case b.TokenType.EOF:z=b.ParsingErrorCodes.UnexpectedEndOfScript;break;case b.TokenType.Identifier:z=b.ParsingErrorCodes.UnexpectedIdentifier;break;case b.TokenType.NumericLiteral:z=b.ParsingErrorCodes.UnexpectedNumber;break;case b.TokenType.StringLiteral:z=b.ParsingErrorCodes.UnexpectedString;break;case b.TokenType.Template:z=
b.ParsingErrorCodes.UnexpectedTemplate}p=C.value.toString()}else p="ILLEGAL";z=z??b.ParsingErrorCodes.UnexpectedToken;e||={value:p};p=A.formatErrorDescription(z,e);if(C)return new b.ParsingError({code:z,index:C.start,line:C.lineNumber,column:C.start-C.lineStart+1,len:C.end-C.start-1,data:e,description:p});const {index:h,line:B}=this.endMarker;return new b.ParsingError({code:z,index:h,line:B,column:this.endMarker.column+1,data:e,description:p})}throwUnexpectedToken(p={}){p.rawToken=p.rawToken??this.rawToken;
throw this.unexpectedTokenError(p);}collectComments(p){const {commentHandler:C}=this;C&&p.length&&p.forEach(z=>{z={type:z.multiLine?b.Syntax.BlockComment:b.Syntax.LineComment,value:this.getSourceValue(z),range:z.range,loc:z.loc};C.collectComment(z)})}peekAhead(p){const C=this.scanner.saveState();p=p.call(this,()=>{this.scanner.scanComments();return this.scanner.lex()});this.scanner.restoreState(C);return p}getSourceValue(p){return this.scanner.source.slice(p.start,p.end)}convertToToken(p){return{type:b.rokenNames[p.type],
value:this.getSourceValue(p),range:[p.start,p.end],loc:{start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}}}readNextRawToken(){this.endMarker.index=this.scanner.index;this.endMarker.line=this.scanner.lineNumber;this.endMarker.column=this.scanner.index-this.scanner.lineStart;const p=this.rawToken;this.collectComments(this.scanner.scanComments());this.scanner.index!==this.startMarker.index&&(this.startMarker.index=
this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);this.rawToken=this.scanner.lex();this.hasLineTerminator=p.lineNumber!==this.rawToken.lineNumber;this.options.tokens&&this.rawToken.type!==b.TokenType.EOF&&this.tokens.push(this.convertToToken(this.rawToken))}captureStartMarker(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}}getItemLocation(p){return{range:[p.index,this.endMarker.index],
loc:{start:{line:p.line,column:p.column},end:{line:this.endMarker.line,column:this.endMarker.column}}}}finalize(p){if(this.delegate||this.commentHandler)this.commentHandler?.attachComments(p),this.delegate?.(p);return p}expectPunctuator(p){const C=this.rawToken;this.matchPunctuator(p)?this.readNextRawToken():this.throwUnexpectedToken({rawToken:C,code:b.ParsingErrorCodes.PunctuatorExpected,data:{value:p}})}expectKeyword(p){this.rawToken.type===b.TokenType.Keyword&&this.rawToken.value.toLowerCase()===
p?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}expectContextualKeyword(p){this.rawToken.type===b.TokenType.Identifier&&this.rawToken.value.toLowerCase()===p?this.readNextRawToken():this.throwUnexpectedToken({rawToken:this.rawToken})}matchKeyword(p){return this.rawToken.type===b.TokenType.Keyword&&this.rawToken.value.toLowerCase()===p}matchContextualKeyword(p){return this.rawToken.type===b.TokenType.Identifier&&this.rawToken.value===p}matchPunctuator(p){return this.rawToken.type===
b.TokenType.Punctuator&&this.rawToken.value===p}getMatchingPunctuator(p){"string"===typeof p&&(p=p.split(""));if(this.rawToken.type===b.TokenType.Punctuator&&p?.length)return p.find(this.matchPunctuator,this)}isolateCoverGrammar(p){const C=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;p=p.call(this);this.context.isAssignmentTarget=C;return p}inheritCoverGrammar(p){const C=this.context.isAssignmentTarget;this.context.isAssignmentTarget=!0;p=p.call(this);this.context.isAssignmentTarget=
this.context.isAssignmentTarget&&C;return p}withBlockContext(p,C){const z=this.context.blockContext;this.context.blockContext|=p;p=this.context.curlyParsingType;this.context.curlyParsingType=y.Automatic;C=C.call(this);this.context.blockContext=z;this.context.curlyParsingType=p;return C}consumeSemicolon(){this.matchPunctuator(";")?this.readNextRawToken():this.hasLineTerminator||(this.rawToken.type===b.TokenType.EOF||this.matchPunctuator("}")?(this.endMarker.index=this.startMarker.index,this.endMarker.line=
this.startMarker.line,this.endMarker.column=this.startMarker.column):this.throwUnexpectedToken({rawToken:this.rawToken}))}parsePrimaryExpression(){const p=this.captureStartMarker(),C=this.rawToken;switch(C.type){case b.TokenType.Identifier:return this.readNextRawToken(),this.finalize({type:b.Syntax.Identifier,name:C.value,...this.getItemLocation(p)});case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,
value:C.value,raw:this.getSourceValue(C),isString:"string"===typeof C.value,...this.getItemLocation(p)});case b.TokenType.BooleanLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:C.value.toLowerCase()===b.Keywords.True,raw:this.getSourceValue(C),isString:!1,...this.getItemLocation(p)});case b.TokenType.NullLiteral:return this.context.isAssignmentTarget=!1,this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:null,raw:this.getSourceValue(C),
isString:!1,...this.getItemLocation(p)});case b.TokenType.Template:return this.parseTemplateLiteral();case b.TokenType.Punctuator:switch(C.value){case "(":return this.inheritCoverGrammar(this.parseGroupExpression);case "[":return this.inheritCoverGrammar(this.parseArrayInitializer);case "{":return this.inheritCoverGrammar(this.parseObjectExpression);default:return this.throwUnexpectedToken({rawToken:this.rawToken})}case b.TokenType.Keyword:return this.context.isAssignmentTarget=!1,this.throwUnexpectedToken({rawToken:this.rawToken});
default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseArrayInitializer(){const p=this.captureStartMarker();this.expectPunctuator("[");const C=[];for(;!this.matchPunctuator("]");){const z=this.captureStartMarker();this.matchPunctuator(",")?(this.readNextRawToken(),this.throwError(b.ParsingErrorCodes.InvalidExpression,z)):(C.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.matchPunctuator("]")||this.expectPunctuator(","))}this.expectPunctuator("]");return this.finalize({type:b.Syntax.ArrayExpression,
elements:C,...this.getItemLocation(p)})}parseObjectPropertyKey(){const p=this.captureStartMarker(),C=this.rawToken;switch(C.type){case b.TokenType.StringLiteral:return this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:C.value,raw:this.getSourceValue(C),isString:!0,...this.getItemLocation(p)});case b.TokenType.Identifier:case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.Keyword:return this.readNextRawToken(),this.finalize({type:b.Syntax.Identifier,name:C.value,
...this.getItemLocation(p)});default:this.throwError(b.ParsingErrorCodes.KeyMustBeString,p)}}parseObjectProperty(){const p=this.rawToken,C=this.captureStartMarker(),z=this.parseObjectPropertyKey();let e=!1,h=null;this.matchPunctuator(":")?(this.readNextRawToken(),h=this.inheritCoverGrammar(this.parseAssignmentExpression)):p.type===b.TokenType.Identifier?(e=!0,h=this.finalize({type:b.Syntax.Identifier,name:p.value,...this.getItemLocation(C)})):this.throwUnexpectedToken({rawToken:this.rawToken});return this.finalize({type:b.Syntax.Property,
kind:"init",key:z,value:h,shorthand:e,...this.getItemLocation(C)})}parseObjectExpression(){const p=this.captureStartMarker();this.expectPunctuator("{");const C=[];for(;!this.matchPunctuator("}");)C.push(this.parseObjectProperty()),this.matchPunctuator("}")||this.expectPunctuator(",");this.expectPunctuator("}");return this.finalize({type:b.Syntax.ObjectExpression,properties:C,...this.getItemLocation(p)})}parseTemplateElement(p=!1){var C=this.rawToken;C.type!==b.TokenType.Template&&this.throwUnexpectedToken({rawToken:C});
p&&!C.head&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidTemplateHead,rawToken:C});p=this.captureStartMarker();this.readNextRawToken();const {value:z,cooked:e,tail:h}=C;C=this.finalize({type:b.Syntax.TemplateElement,value:{raw:z,cooked:e},tail:h,...this.getItemLocation(p)});C.loc.start.column++;C.loc.end.column-=h?1:2;return C}parseTemplateLiteral(){const p=this.captureStartMarker(),C=[],z=[];let e=this.parseTemplateElement(!0);for(z.push(e);!e.tail;)C.push(this.parseExpression()),e=
this.parseTemplateElement(),z.push(e);return this.finalize({type:b.Syntax.TemplateLiteral,quasis:z,expressions:C,...this.getItemLocation(p)})}parseGroupExpression(){this.expectPunctuator("(");const p=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expectPunctuator(")");return p}parseArguments(){this.expectPunctuator("(");const p=[];if(!this.matchPunctuator(")"))for(;;){const C=this.isolateCoverGrammar(this.parseAssignmentExpression);p.push(C);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");
if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return p}parseMemberName(){const p=this.rawToken,C=this.captureStartMarker();this.readNextRawToken();p.type!==b.TokenType.NullLiteral&&p.type!==b.TokenType.Identifier&&p.type!==b.TokenType.Keyword&&p.type!==b.TokenType.BooleanLiteral&&this.throwUnexpectedToken({rawToken:p});return this.finalize({type:b.Syntax.Identifier,name:p.value,...this.getItemLocation(C)})}parseLeftHandSideExpression(){const p=this.captureStartMarker();let C=this.inheritCoverGrammar(this.parsePrimaryExpression);
const z=this.captureStartMarker();for(var e;e=this.getMatchingPunctuator("([.");)switch(e){case "(":this.context.isAssignmentTarget=!1;C.type!==b.Syntax.Identifier&&C.type!==b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.IdentiferExpected,p,z);e=this.parseArguments();C=this.finalize({type:b.Syntax.CallExpression,callee:C,arguments:e,...this.getItemLocation(p)});continue;case "[":this.context.isAssignmentTarget=!0;this.expectPunctuator("[");e=this.isolateCoverGrammar(this.parseExpression);
this.expectPunctuator("]");C=this.finalize({type:b.Syntax.MemberExpression,computed:!0,object:C,property:e,...this.getItemLocation(p)});continue;case ".":this.context.isAssignmentTarget=!0,this.expectPunctuator("."),e=this.parseMemberName(),C=this.finalize({type:b.Syntax.MemberExpression,computed:!1,object:C,property:e,...this.getItemLocation(p)})}return C}parseUpdateExpression(){const p=this.captureStartMarker();let C=this.getMatchingPunctuator(b.updateOperators);if(C){this.readNextRawToken();var z=
this.captureStartMarker(),e=this.inheritCoverGrammar(this.parseUnaryExpression);e.type!==b.Syntax.Identifier&&e.type!==b.Syntax.MemberExpression&&e.type!==b.Syntax.CallExpression&&this.throwError(b.ParsingErrorCodes.InvalidExpression,z);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,p);this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UpdateExpression,operator:C,argument:e,prefix:!0,...this.getItemLocation(p)})}z=this.captureStartMarker();
e=this.inheritCoverGrammar(this.parseLeftHandSideExpression);const h=this.captureStartMarker();if(this.hasLineTerminator)return e;C=this.getMatchingPunctuator(b.updateOperators);if(!C)return e;e.type!==b.Syntax.Identifier&&e.type!==b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.InvalidExpression,z,h);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,p);this.readNextRawToken();this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UpdateExpression,
operator:C,argument:e,prefix:!1,...this.getItemLocation(p)})}parseUnaryExpression(){const p=this.getMatchingPunctuator(b.unaryOperators);if(p){const C=this.captureStartMarker();this.readNextRawToken();const z=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget=!1;return this.finalize({type:b.Syntax.UnaryExpression,operator:p,argument:z,prefix:!0,...this.getItemLocation(C)})}return this.parseUpdateExpression()}parseBinaryExpression(){var p=this.rawToken,C=this.inheritCoverGrammar(this.parseUnaryExpression);
if(this.rawToken.type!==b.TokenType.Punctuator)return C;var z=this.rawToken.value,e=k(z);if(0===e)return C;this.readNextRawToken();this.context.isAssignmentTarget=!1;p=[p,this.rawToken];var h=this.inheritCoverGrammar(this.parseUnaryExpression);z=[C,z,h];for(var B=[e];this.rawToken.type===b.TokenType.Punctuator&&0<(e=k(this.rawToken.value));){for(;2<z.length&&e<=B[B.length-1];){h=z.pop();const v=z.pop();B.pop();C=z.pop();p.pop();var q=p[p.length-1];q=d(q,q.lineStart);z.push(this.finalize(this.createBinaryOrLogicalExpression(q,
v,C,h)))}z.push(this.rawToken.value);B.push(e);p.push(this.rawToken);this.readNextRawToken();z.push(this.inheritCoverGrammar(this.parseUnaryExpression))}e=z.length-1;C=z[e];for(B=p.pop();1<e;){h=p.pop();if(!h)break;B=d(h,B?.lineStart);C=this.finalize(this.createBinaryOrLogicalExpression(B,z[e-1],z[e-2],C));e-=2;B=h}return C}createBinaryOrLogicalExpression(p,C,z,e){const h=b.logicalOperators.includes(C)?b.Syntax.LogicalExpression:b.Syntax.BinaryExpression;if(h===b.Syntax.BinaryExpression)return{type:h,
operator:C,left:z,right:e,...this.getItemLocation(p)};z.type!==b.Syntax.AssignmentExpression&&z.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,...m(z));e.type!==b.Syntax.AssignmentExpression&&e.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,...m(z));return{type:h,operator:C,left:z,right:e,...this.getItemLocation(p)}}parseAssignmentExpression(){const p=this.captureStartMarker(),C=this.inheritCoverGrammar(this.parseBinaryExpression);
var z=this.captureStartMarker();const e=this.getMatchingPunctuator(b.assignmentOperators);if(!e)return C;C.type!==b.Syntax.Identifier&&C.type!==b.Syntax.MemberExpression&&this.throwError(b.ParsingErrorCodes.InvalidExpression,p,z);this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInAssignment,p);this.matchPunctuator("\x3d")||(this.context.isAssignmentTarget=!1);this.readNextRawToken();z=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize({type:b.Syntax.AssignmentExpression,
left:C,operator:e,right:z,...this.getItemLocation(p)})}parseExpression(){return this.isolateCoverGrammar(this.parseAssignmentExpression)}parseStatements(p){const C=[];for(;this.rawToken.type!==b.TokenType.EOF&&!this.matchPunctuator(p);){const z=this.parseStatementListItem();b.isEmptyStatement(z)||C.push(z)}return C}parseStatementListItem(){this.context.isAssignmentTarget=!0;return this.matchKeyword(b.Keywords.Function)?this.parseFunctionDeclaration():this.matchKeyword(b.Keywords.Export)?this.parseExportDeclaration():
this.matchKeyword(b.Keywords.Import)?this.parseImportDeclaration():this.parseStatement()}parseBlock(){const p=this.captureStartMarker();this.expectPunctuator("{");const C=this.parseStatements("}");this.expectPunctuator("}");return this.finalize({type:b.Syntax.BlockStatement,body:C,...this.getItemLocation(p)})}parseObjectStatement(){const p=this.captureStartMarker(),C=this.parseObjectExpression();return this.finalize({type:b.Syntax.ExpressionStatement,expression:C,...this.getItemLocation(p)})}parseBlockOrObjectStatement(){return this.context.curlyParsingType===
y.AsObject||this.peekAhead(p=>{let C=p();if(C.type!==b.TokenType.Identifier&&C.type!==b.TokenType.StringLiteral)return!1;C=p();return C.type!==b.TokenType.Punctuator||":"!==C.value?!1:!0})?this.parseObjectStatement():this.parseBlock()}parseIdentifier(){const p=this.rawToken;if(p.type!==b.TokenType.Identifier)return null;const C=this.captureStartMarker();this.readNextRawToken();return this.finalize({type:b.Syntax.Identifier,name:p.value,...this.getItemLocation(C)})}parseVariableDeclarator(){const p=
this.captureStartMarker(),C=this.parseIdentifier();C||this.throwUnexpectedToken({code:b.ParsingErrorCodes.IdentiferExpected});let z=null;if(this.matchPunctuator("\x3d")){this.readNextRawToken();const e=this.rawToken;try{z=this.isolateCoverGrammar(this.parseAssignmentExpression)}catch(h){this.throwUnexpectedToken({rawToken:e,code:b.ParsingErrorCodes.InvalidVariableAssignment})}}return this.finalize({type:b.Syntax.VariableDeclarator,id:C,init:z,...this.getItemLocation(p)})}parseVariableDeclarationList(){const p=
[this.parseVariableDeclarator()];for(;this.matchPunctuator(",");)this.readNextRawToken(),p.push(this.parseVariableDeclarator());return p}parseVariableDeclaration(){const p=this.captureStartMarker();this.expectKeyword(b.Keywords.Var);const C=this.parseVariableDeclarationList();this.consumeSemicolon();return this.finalize({type:b.Syntax.VariableDeclaration,declarations:C,kind:"var",...this.getItemLocation(p)})}parseEmptyStatement(){const p=this.captureStartMarker();this.expectPunctuator(";");return this.finalize({type:b.Syntax.EmptyStatement,
...this.getItemLocation(p)})}parseExpressionStatement(){const p=this.captureStartMarker(),C=this.parseExpression();this.consumeSemicolon();return this.finalize({type:b.Syntax.ExpressionStatement,expression:C,...this.getItemLocation(p)})}parseIfClause(){return this.withBlockContext(n.IfClause,this.parseStatement)}parseIfStatement(){const p=this.captureStartMarker();this.expectKeyword(b.Keywords.If);this.expectPunctuator("(");var C=this.captureStartMarker();const z=this.parseExpression();var e=this.captureStartMarker();
this.expectPunctuator(")");z.type!==b.Syntax.AssignmentExpression&&z.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,C,e);C=this.parseIfClause();e=null;this.matchKeyword(b.Keywords.Else)&&(this.readNextRawToken(),e=this.parseIfClause());return this.finalize({type:b.Syntax.IfStatement,test:z,consequent:C,alternate:e,...this.getItemLocation(p)})}parseWhileStatement(){const p=this.captureStartMarker();this.expectKeyword(b.Keywords.While);this.expectPunctuator("(");
var C=this.captureStartMarker();const z=this.parseExpression(),e=this.captureStartMarker();this.expectPunctuator(")");z.type!==b.Syntax.AssignmentExpression&&z.type!==b.Syntax.UpdateExpression||this.throwError(b.ParsingErrorCodes.InvalidExpression,C,e);C=this.withBlockContext(n.WhileLoop,this.parseStatement);return this.finalize({type:b.Syntax.WhileStatement,test:z,body:C,...this.getItemLocation(p)})}parseForStatement(){let p=null,C=null,z=null,e=null,h=null;const B=this.captureStartMarker();this.expectKeyword(b.Keywords.For);
this.expectPunctuator("(");if(this.matchPunctuator(";"))this.readNextRawToken();else if(this.matchKeyword(b.Keywords.Var)){var q=this.captureStartMarker();this.readNextRawToken();var v=this.parseVariableDeclarationList();1===v.length&&this.matchKeyword(b.Keywords.In)?(v[0].init&&this.throwError(b.ParsingErrorCodes.ForInOfLoopInitializer,q),e=this.finalize({type:b.Syntax.VariableDeclaration,declarations:v,kind:"var",...this.getItemLocation(q)}),this.readNextRawToken(),h=this.parseExpression()):(this.matchKeyword(b.Keywords.In)&&
this.throwError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,q),p=this.finalize({type:b.Syntax.VariableDeclaration,declarations:v,kind:"var",...this.getItemLocation(q)}),this.expectPunctuator(";"))}else q=this.context.isAssignmentTarget,v=this.captureStartMarker(),p=this.inheritCoverGrammar(this.parseAssignmentExpression),this.matchKeyword(b.Keywords.In)?(this.context.isAssignmentTarget||this.tolerateError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,v),p.type!==b.Syntax.Identifier&&this.throwError(b.ParsingErrorCodes.InvalidLeftHandSideInForIn,
v),this.readNextRawToken(),e=p,h=this.parseExpression(),p=null):(this.context.isAssignmentTarget=q,this.expectPunctuator(";"));e||(this.matchPunctuator(";")||(C=this.isolateCoverGrammar(this.parseExpression)),this.expectPunctuator(";"),this.matchPunctuator(")")||(z=this.isolateCoverGrammar(this.parseExpression)));this.expectPunctuator(")");q=this.withBlockContext(n.ForLoop,()=>this.isolateCoverGrammar(this.parseStatement));return e&&h?this.finalize({type:b.Syntax.ForInStatement,left:e,right:h,body:q,
...this.getItemLocation(B)}):this.finalize({type:b.Syntax.ForStatement,init:p,test:C,update:z,body:q,...this.getItemLocation(B)})}parseContinueStatement(){const p=this.captureStartMarker();this.expectKeyword(b.Keywords.Continue);this.consumeSemicolon();return this.finalize({type:b.Syntax.ContinueStatement,...this.getItemLocation(p)})}parseBreakStatement(){const p=this.captureStartMarker();this.expectKeyword(b.Keywords.Break);this.consumeSemicolon();return this.finalize({type:b.Syntax.BreakStatement,
...this.getItemLocation(p)})}parseReturnStatement(){const p=this.captureStartMarker();this.expectKeyword(b.Keywords.Return);const C=(this.matchPunctuator(";")||this.matchPunctuator("}")||this.hasLineTerminator||this.rawToken.type===b.TokenType.EOF)&&this.rawToken.type!==b.TokenType.StringLiteral&&this.rawToken.type!==b.TokenType.Template?null:this.parseExpression();this.consumeSemicolon();return this.finalize({type:b.Syntax.ReturnStatement,argument:C,...this.getItemLocation(p)})}parseStatement(){switch(this.rawToken.type){case b.TokenType.BooleanLiteral:case b.TokenType.NullLiteral:case b.TokenType.NumericLiteral:case b.TokenType.StringLiteral:case b.TokenType.Template:case b.TokenType.Identifier:return this.parseExpressionStatement();
case b.TokenType.Punctuator:return"{"===this.rawToken.value?this.parseBlockOrObjectStatement():"("===this.rawToken.value?this.parseExpressionStatement():";"===this.rawToken.value?this.parseEmptyStatement():this.parseExpressionStatement();case b.TokenType.Keyword:switch(this.rawToken.value.toLowerCase()){case b.Keywords.Break:return this.parseBreakStatement();case b.Keywords.Continue:return this.parseContinueStatement();case b.Keywords.For:return this.parseForStatement();case b.Keywords.Function:return this.parseFunctionDeclaration();
case b.Keywords.If:return this.parseIfStatement();case b.Keywords.Return:return this.parseReturnStatement();case b.Keywords.Var:return this.parseVariableDeclaration();case b.Keywords.While:return this.parseWhileStatement();default:return this.parseExpressionStatement()}default:return this.throwUnexpectedToken({rawToken:this.rawToken})}}parseFormalParameters(){const p=[];this.expectPunctuator("(");if(!this.matchPunctuator(")"))for(;this.rawToken.type!==b.TokenType.EOF;){const C=this.parseIdentifier();
C||this.throwUnexpectedToken({rawToken:this.rawToken,code:b.ParsingErrorCodes.IdentiferExpected});p.push(C);if(this.matchPunctuator(")"))break;this.expectPunctuator(",");if(this.matchPunctuator(")"))break}this.expectPunctuator(")");return p}parseFunctionDeclaration(){(this.context.blockContext&n.Function)===n.Function&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.NoFunctionInsideFunction});(this.context.blockContext&n.WhileLoop)!==n.WhileLoop&&(this.context.blockContext&n.IfClause)!==n.IfClause||
this.throwUnexpectedToken({code:b.ParsingErrorCodes.NoFunctionInsideBlock});const p=this.captureStartMarker();this.expectKeyword(b.Keywords.Function);const C=this.parseIdentifier();C||this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidFunctionIdentifier});const z=this.parseFormalParameters(),e=this.context.blockContext;this.context.blockContext|=n.Function;const h=this.parseBlock();this.context.blockContext=e;return this.finalize({type:b.Syntax.FunctionDeclaration,id:C,params:z,body:h,...this.getItemLocation(p)})}parseScript(){var p=
this.captureStartMarker();const C=this.parseStatements();p=this.finalize({type:b.Syntax.Program,body:C,...this.getItemLocation(p)});this.options.tokens&&(p.tokens=this.tokens);this.options.tolerant&&(p.errors=this.errorHandler.errors);return p}parseExportDeclaration(){this.context.blockContext!==n.None&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.ModuleExportRootOnly});let p=null;const C=this.captureStartMarker();this.expectKeyword(b.Keywords.Export);this.matchKeyword(b.Keywords.Var)?p=this.parseVariableDeclaration():
this.matchKeyword("function")?p=this.parseFunctionDeclaration():this.throwUnexpectedToken({code:b.ParsingErrorCodes.InvalidExpression});return this.finalize({type:b.Syntax.ExportNamedDeclaration,declaration:p,specifiers:[],source:null,...this.getItemLocation(C)})}parseModuleSpecifier(){const p=this.captureStartMarker(),C=this.rawToken;if(C.type===b.TokenType.StringLiteral)return this.readNextRawToken(),this.finalize({type:b.Syntax.Literal,value:C.value,raw:this.getSourceValue(C),isString:!0,...this.getItemLocation(p)});
this.throwError(b.ParsingErrorCodes.InvalidModuleUri,p)}parseDefaultSpecifier(){const p=this.captureStartMarker(),C=this.parseIdentifier();C||this.throwUnexpectedToken({code:b.ParsingErrorCodes.IdentiferExpected});return this.finalize({type:b.Syntax.ImportDefaultSpecifier,local:C,...this.getItemLocation(p)})}parseImportDeclaration(){this.context.blockContext!==n.None&&this.throwUnexpectedToken({code:b.ParsingErrorCodes.ModuleImportRootOnly});const p=this.captureStartMarker();this.expectKeyword(b.Keywords.Import);
const C=this.parseDefaultSpecifier();this.expectContextualKeyword(b.Keywords.From);const z=this.parseModuleSpecifier();return this.finalize({type:b.Syntax.ImportDeclaration,specifiers:[C],source:z,...this.getItemLocation(p)})}}t.Parser=I;t.binaryOperatorPrecedence=k;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/comment-handler":function(){define(["exports","./types"],function(t,L){function A(b,d){return d?d.loc.end.line===b.loc.start.line&&d.loc.end.column<=b.loc.start.column:
!1}class c{constructor(){this.comments=[];this._nodeStack=[];this._newComments=[]}insertInnerComments(b){if(L.isBlockStatement(b)&&0===b.body.length){var d=[];for(let m=this._newComments.length-1;0<=m;--m){const k=this._newComments[m];b.range[1]>=k.range[0]&&(d.unshift(k),this._newComments.splice(m,1))}d.length&&(b.innerComments=d)}}attachTrailingComments(b){if(b){var d=this._nodeStack[this._nodeStack.length-1];if(L.isBlockStatement(b)&&d.range[0]>=b.range[0]&&d.range[1]<=b.range[1])for(var m=this._newComments.length-
1;0<=m;--m){var k=this._newComments[m];k.range[0]>=b.range[0]&&k.range[1]<=b.range[1]&&(d.trailingComments=[...(d.trailingComments??[]),k],this._newComments.splice(m,1))}m=[];if(0<this._newComments.length)for(k=this._newComments.length-1;0<=k;--k){const n=this._newComments[k];A(n,d)?(d.trailingComments=[...(d.trailingComments??[]),n],this._newComments.splice(k,1)):A(n,b)&&(m.unshift(n),this._newComments.splice(k,1))}d?.trailingComments&&A(d.trailingComments[0],b)&&(m=[...m,...d.trailingComments],
delete d.trailingComments);0<m.length&&(b.trailingComments=m)}}attachLeadingComments(b){if(b){for(var d;0<this._nodeStack.length;){var m=this._nodeStack[this._nodeStack.length-1];if(b.range[0]<=m.range[0])d=m,this._nodeStack.pop();else break}m=[];var k=[];if(d){var n=d.leadingComments?.length??0;for(--n;0<=n;--n){const y=d.leadingComments[n];b.range[0]>=y.range[1]?(m.unshift(y),d.leadingComments.splice(n,1)):L.isVariableDeclarator(b)&&!L.isBlockComment(y)&&(k.unshift(y),d.leadingComments.splice(n,
1))}0===d.leadingComments?.length&&delete d.leadingComments;m.length&&(b.leadingComments=m);k.length&&(b.trailingComments=[...k,...(b.trailingComments??[])])}else{for(d=this._newComments.length-1;0<=d;--d)k=this._newComments[d],b.range[0]>=k.range[0]&&(m.unshift(k),this._newComments.splice(d,1));m.length&&(b.leadingComments=m)}}}attachComments(b){if(L.isProgram(b)&&0<b.body.length){const d=this._nodeStack[this._nodeStack.length-1];d?(d.trailingComments=[...(d.trailingComments??[]),...this._newComments],
this._newComments.length=0,this._nodeStack.pop()):(b.trailingComments=[...this._newComments],this._newComments.length=0)}else this.attachTrailingComments(b),this.attachLeadingComments(b),this.insertInnerComments(b),this._nodeStack.push(b)}collectComment(b){this.comments.push(b);this._newComments.push(b)}}t.CommentHandler=c;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/types":function(){define(["exports"],function(t){t.Keywords=void 0;(function(c){c.Break="break";
c.Continue="continue";c.Else="else";c.False="false";c.For="for";c.From="from";c.Function="function";c.If="if";c.Import="import";c.Export="export";c.In="in";c.Null="null";c.Return="return";c.True="true";c.Var="var";c.While="while"})(t.Keywords||(t.Keywords={}));t.Syntax=void 0;(function(c){c.AssignmentExpression="AssignmentExpression";c.ArrayExpression="ArrayExpression";c.BlockComment="BlockComment";c.BlockStatement="BlockStatement";c.BinaryExpression="BinaryExpression";c.BreakStatement="BreakStatement";
c.CallExpression="CallExpression";c.ContinueStatement="ContinueStatement";c.EmptyStatement="EmptyStatement";c.ExpressionStatement="ExpressionStatement";c.ExportNamedDeclaration="ExportNamedDeclaration";c.ExportSpecifier="ExportSpecifier";c.ForStatement="ForStatement";c.ForInStatement="ForInStatement";c.FunctionDeclaration="FunctionDeclaration";c.Identifier="Identifier";c.IfStatement="IfStatement";c.ImportDeclaration="ImportDeclaration";c.ImportDefaultSpecifier="ImportDefaultSpecifier";c.LineComment=
"LineComment";c.Literal="Literal";c.LogicalExpression="LogicalExpression";c.MemberExpression="MemberExpression";c.ObjectExpression="ObjectExpression";c.Program="Program";c.Property="Property";c.ReturnStatement="ReturnStatement";c.TemplateElement="TemplateElement";c.TemplateLiteral="TemplateLiteral";c.UnaryExpression="UnaryExpression";c.UpdateExpression="UpdateExpression";c.VariableDeclaration="VariableDeclaration";c.VariableDeclarator="VariableDeclarator";c.WhileStatement="WhileStatement"})(t.Syntax||
(t.Syntax={}));t.TokenType=void 0;(function(c){c[c.Unknown=0]="Unknown";c[c.BooleanLiteral=1]="BooleanLiteral";c[c.EOF=2]="EOF";c[c.Identifier=3]="Identifier";c[c.Keyword=4]="Keyword";c[c.NullLiteral=5]="NullLiteral";c[c.NumericLiteral=6]="NumericLiteral";c[c.Punctuator=7]="Punctuator";c[c.StringLiteral=8]="StringLiteral";c[c.Template=10]="Template"})(t.TokenType||(t.TokenType={}));t.ParsingErrorCodes=void 0;(function(c){c.InvalidModuleUri="InvalidModuleUri";c.ForInOfLoopInitializer="ForInOfLoopInitializer";
c.IdentiferExpected="IdentiferExpected";c.InvalidEscapedReservedWord="InvalidEscapedReservedWord";c.InvalidExpression="InvalidExpression";c.InvalidFunctionIdentifier="InvalidFunctionIdentifier";c.InvalidHexEscapeSequence="InvalidHexEscapeSequence";c.InvalidLeftHandSideInAssignment="InvalidLeftHandSideInAssignment";c.InvalidLeftHandSideInForIn="InvalidLeftHandSideInForIn";c.InvalidTemplateHead="InvalidTemplateHead";c.InvalidVariableAssignment="InvalidVariableAssignment";c.KeyMustBeString="KeyMustBeString";
c.NoFunctionInsideBlock="NoFunctionInsideBlock";c.NoFunctionInsideFunction="NoFunctionInsideFunction";c.ModuleExportRootOnly="ModuleExportRootOnly";c.ModuleImportRootOnly="ModuleImportRootOnly";c.PunctuatorExpected="PunctuatorExpected";c.TemplateOctalLiteral="TemplateOctalLiteral";c.UnexpectedBoolean="UnexpectedBoolean";c.UnexpectedEndOfScript="UnexpectedEndOfScript";c.UnexpectedIdentifier="UnexpectedIdentifier";c.UnexpectedKeyword="UnexpectedKeyword";c.UnexpectedNull="UnexpectedNull";c.UnexpectedNumber=
"UnexpectedNumber";c.UnexpectedPunctuator="UnexpectedPunctuator";c.UnexpectedString="UnexpectedString";c.UnexpectedTemplate="UnexpectedTemplate";c.UnexpectedToken="UnexpectedToken"})(t.ParsingErrorCodes||(t.ParsingErrorCodes={}));const L={[t.ParsingErrorCodes.InvalidModuleUri]:"Module uri must be a text literal.",[t.ParsingErrorCodes.ForInOfLoopInitializer]:"for-in loop variable declaration may not have an initializer.",[t.ParsingErrorCodes.IdentiferExpected]:"'${value}' is an invalid identifier.",
[t.ParsingErrorCodes.InvalidEscapedReservedWord]:"Keyword cannot contain escaped characters.",[t.ParsingErrorCodes.InvalidExpression]:"Invalid expression.",[t.ParsingErrorCodes.InvalidFunctionIdentifier]:"'${value}' is an invalid function identifier.",[t.ParsingErrorCodes.InvalidHexEscapeSequence]:"Invalid hexadecimal escape sequence.",[t.ParsingErrorCodes.InvalidLeftHandSideInAssignment]:"Invalid left-hand side in assignment.",[t.ParsingErrorCodes.InvalidLeftHandSideInForIn]:"Invalid left-hand side in for-in.",
[t.ParsingErrorCodes.InvalidTemplateHead]:"Invalid template structure.",[t.ParsingErrorCodes.InvalidVariableAssignment]:"Invalid variable assignment.",[t.ParsingErrorCodes.KeyMustBeString]:"Object property keys must be a word starting with a letter.",[t.ParsingErrorCodes.NoFunctionInsideBlock]:"Functions cannot be declared inside of code blocks.",[t.ParsingErrorCodes.NoFunctionInsideFunction]:"Functions cannot be declared inside another function.",[t.ParsingErrorCodes.ModuleExportRootOnly]:"Module exports cannot be declared inside of code blocks.",
[t.ParsingErrorCodes.ModuleImportRootOnly]:"Module import cannot be declared inside of code blocks.",[t.ParsingErrorCodes.PunctuatorExpected]:"'${value}' expected.",[t.ParsingErrorCodes.TemplateOctalLiteral]:"Octal literals are not allowed in template literals.",[t.ParsingErrorCodes.UnexpectedBoolean]:"Unexpected boolean literal.",[t.ParsingErrorCodes.UnexpectedEndOfScript]:"Unexpected end of Arcade expression.",[t.ParsingErrorCodes.UnexpectedIdentifier]:"Unexpected identifier.",[t.ParsingErrorCodes.UnexpectedKeyword]:"Unexpected keyword.",
[t.ParsingErrorCodes.UnexpectedNull]:"Unexpected null literal.",[t.ParsingErrorCodes.UnexpectedNumber]:"Unexpected number.",[t.ParsingErrorCodes.UnexpectedPunctuator]:"Unexpected ponctuator.",[t.ParsingErrorCodes.UnexpectedString]:"Unexpected text literal.",[t.ParsingErrorCodes.UnexpectedTemplate]:"Unexpected quasi '${value}'.",[t.ParsingErrorCodes.UnexpectedToken]:"Unexpected token '${value}'."};class A extends Error{constructor({code:c,index:b,line:d,column:m,len:k=0,description:n,data:y}){super(`${n??
c}`);this.declaredRootClass="esri.arcade.lib.parsingerror";this.name="ParsingError";this.code=c;this.index=b;this.line=d;this.column=m;this.len=k;this.data=y;this.description=n;this.range={start:{line:d,column:m-1},end:{line:d,column:m+k}};Error.captureStackTrace?.(this,A)}}t.ParsingError=A;t.assignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");t.binaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");t.isArrayExpression=
function(c){return c?.type===t.Syntax.ArrayExpression};t.isAssignmentExpression=function(c){return c?.type===t.Syntax.AssignmentExpression};t.isBinaryExpression=function(c){return c?.type===t.Syntax.BinaryExpression};t.isBlockComment=function(c){return c?.type===t.Syntax.BlockComment};t.isBlockStatement=function(c){return c?.type===t.Syntax.BlockStatement};t.isBreakStatement=function(c){return c?.type===t.Syntax.BreakStatement};t.isCallExpression=function(c){return c?.type===t.Syntax.CallExpression};
t.isContinueStatement=function(c){return c?.type===t.Syntax.ContinueStatement};t.isEmptyStatement=function(c){return c?.type===t.Syntax.EmptyStatement};t.isExpression=function(c){switch(c?.type){case t.Syntax.ArrayExpression:case t.Syntax.AssignmentExpression:case t.Syntax.BinaryExpression:case t.Syntax.CallExpression:case t.Syntax.Identifier:case t.Syntax.Literal:case t.Syntax.LogicalExpression:case t.Syntax.MemberExpression:case t.Syntax.ObjectExpression:case t.Syntax.TemplateLiteral:case t.Syntax.UpdateExpression:case t.Syntax.UnaryExpression:return!0;
default:return!1}};t.isExpressionStatement=function(c){return c?.type===t.Syntax.ExpressionStatement};t.isForInStatement=function(c){return c?.type===t.Syntax.ForInStatement};t.isForStatement=function(c){return c?.type===t.Syntax.ForStatement};t.isFunctionDeclaration=function(c){return c?.type===t.Syntax.FunctionDeclaration};t.isIdentifier=function(c){return c?.type===t.Syntax.Identifier};t.isIfStatement=function(c){return c?.type===t.Syntax.IfStatement};t.isLiteral=function(c){return c?.type===t.Syntax.Literal};
t.isLogicalExpression=function(c){return c?.type===t.Syntax.LogicalExpression};t.isMemberExpression=function(c){return c?.type===t.Syntax.MemberExpression};t.isObjectExpression=function(c){return c?.type===t.Syntax.ObjectExpression};t.isProgram=function(c){return c?.type===t.Syntax.Program};t.isProperty=function(c){return c?.type===t.Syntax.Property};t.isReturnStatement=function(c){return c?.type===t.Syntax.ReturnStatement};t.isStatement=function(c){switch(c?.type){case t.Syntax.BlockStatement:case t.Syntax.BreakStatement:case t.Syntax.ContinueStatement:case t.Syntax.EmptyStatement:case t.Syntax.ExpressionStatement:case t.Syntax.ForInStatement:case t.Syntax.ForStatement:case t.Syntax.FunctionDeclaration:case t.Syntax.IfStatement:case t.Syntax.ReturnStatement:case t.Syntax.VariableDeclaration:return!0;
default:return!1}};t.isTemplateElement=function(c){return c?.type===t.Syntax.TemplateElement};t.isTemplateLiteral=function(c){return c?.type===t.Syntax.TemplateLiteral};t.isUnaryExpression=function(c){return c?.type===t.Syntax.UnaryExpression};t.isUpdateExpression=function(c){return c?.type===t.Syntax.UpdateExpression};t.isVariableDeclaration=function(c){return c?.type===t.Syntax.VariableDeclaration};t.isVariableDeclarator=function(c){return c?.type===t.Syntax.VariableDeclarator};t.logicalOperators=
["||","\x26\x26"];t.operatorPrecedence={"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":10,"/":10,"%":10};t.parsingErrorMessages=L;t.rokenNames="Unknown Boolean \x3cend\x3e Identifier Keyword Null Numeric Punctuator String RegularExpression Template".split(" ");t.unaryOperators=["-","+","!","~"];t.updateOperators=["++","--"];Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/lib/error-handler":function(){define(["exports","./types"],function(t,L){function A(b,d){b=L.parsingErrorMessages[b];return d?b.replaceAll(/\${(.*?)}/g,(m,k)=>d[k]?.toString()??""):b}class c{constructor(b=!1){this.tolerant=b;this.errors=[]}recordError(b){this.errors.push(b)}tolerate(b){if(this.tolerant)this.recordError(b);else throw b;}throwError(b){b.description=b.description??A(b.code,b.data);throw new L.ParsingError(b);}tolerateError(b){b.description=b.description??A(b.code,b.data);
b=new L.ParsingError(b);if(this.tolerant)this.recordError(b);else throw b;}}t.ErrorHandler=c;t.formatErrorDescription=A;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/scanner":function(){define(["exports","./assert","./character","./types"],function(t,L,A,c){const b=[[],[],[]];c.updateOperators.forEach(m=>b[m.length-1].push(m));c.unaryOperators.forEach(m=>b[m.length-1].push(m));c.logicalOperators.forEach(m=>b[m.length-1].push(m));c.assignmentOperators.forEach(m=>
b[m.length-1].push(m));c.binaryOperators.forEach(m=>b[m.length-1].push(m));class d{constructor(m,k){this.source=m;this.errorHandler=k;this._length=m.length;this.index=0;this.lineNumber=1;this.lineStart=0;this.curlyStack=[]}saveState(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}}restoreState(m){this.index=m.index;this.lineNumber=m.lineNumber;this.lineStart=m.lineStart;this.curlyStack=m.curlyStack}eof(){return this.index>=this._length}throwUnexpectedToken(m=
c.ParsingErrorCodes.UnexpectedToken){this.errorHandler.throwError({code:m,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}tolerateUnexpectedToken(m=c.ParsingErrorCodes.UnexpectedToken){this.errorHandler.tolerateError({code:m,index:this.index,line:this.lineNumber,column:this.index-this.lineStart+1})}skipSingleLineComment(m){const k=[],n=this.index-m,y={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{line:0,column:0}};for(;!this.eof();){const I=this.source.charCodeAt(this.index);
++this.index;if(A.Character.isLineTerminator(I))return y&&(y.end={line:this.lineNumber,column:this.index-this.lineStart-1},k.push({multiLine:!1,start:n+m,end:this.index-1,range:[n,this.index-1],loc:y})),13===I&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,k}y&&(y.end={line:this.lineNumber,column:this.index-this.lineStart},k.push({multiLine:!1,start:n+m,end:this.index,range:[n,this.index],loc:y}));return k}skipMultiLineComment(){const m=[],k=this.index-
2,n={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}};for(;!this.eof();){const y=this.source.charCodeAt(this.index);if(A.Character.isLineTerminator(y))13===y&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===y&&47===this.source.charCodeAt(this.index+1))return this.index+=2,n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},m.push({multiLine:!0,start:k+2,end:this.index-
2,range:[k,this.index],loc:n})),m;++this.index}}n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},m.push({multiLine:!0,start:k+2,end:this.index,range:[k,this.index],loc:n}));this.tolerateUnexpectedToken();return m}scanComments(){let m=[];for(;!this.eof();){var k=this.source.charCodeAt(this.index);if(A.Character.isWhiteSpace(k))++this.index;else if(A.Character.isLineTerminator(k))++this.index,13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=
this.index;else if(47===k)if(k=this.source.charCodeAt(this.index+1),47===k)this.index+=2,k=this.skipSingleLineComment(2),m=[...m,...k];else if(42===k)this.index+=2,k=this.skipMultiLineComment(),m=[...m,...k];else break;else break}return m}isKeyword(m){m=m.toLowerCase();switch(m.length){case 2:return m===c.Keywords.If||m===c.Keywords.In;case 3:return m===c.Keywords.Var||m===c.Keywords.For;case 4:return m===c.Keywords.Else;case 5:return m===c.Keywords.Break||m===c.Keywords.While;case 6:return m===c.Keywords.Return||
m===c.Keywords.Import||m===c.Keywords.Export;case 8:return m===c.Keywords.Function||m===c.Keywords.Continue;default:return!1}}codePointAt(m){let k=this.source.charCodeAt(m);55296<=k&&56319>=k&&(m=this.source.charCodeAt(m+1),56320<=m&&57343>=m&&(k=1024*(k-55296)+m-56320+65536));return k}scanHexEscape(m){m="u"===m?4:2;let k=0;for(let n=0;n<m;++n)if(!this.eof()&&A.Character.isHexDigit(this.source.charCodeAt(this.index)))k=16*k+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;
return String.fromCharCode(k)}scanUnicodeCodePointEscape(){let m=this.source[this.index],k=0;for("}"===m&&this.throwUnexpectedToken();!this.eof();){m=this.source[this.index++];if(!A.Character.isHexDigit(m.charCodeAt(0)))break;k=16*k+"0123456789abcdef".indexOf(m.toLowerCase())}(1114111<k||"}"!==m)&&this.throwUnexpectedToken();return A.Character.fromCodePoint(k)}getIdentifier(){const m=this.index++;for(;!this.eof();){const k=this.source.charCodeAt(this.index);if(92===k||55296<=k&&57343>k)return this.index=
m,this.getComplexIdentifier();if(A.Character.isIdentifierPart(k))++this.index;else break}return this.source.slice(m,this.index)}getComplexIdentifier(){let m=this.codePointAt(this.index),k=A.Character.fromCodePoint(m);this.index+=k.length;let n;92===m&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&A.Character.isIdentifierStart(n.charCodeAt(0))||
this.throwUnexpectedToken()),k=n);for(;!this.eof();){m=this.codePointAt(this.index);if(!A.Character.isIdentifierPart(m))break;n=A.Character.fromCodePoint(m);k+=n;this.index+=n.length;92===m&&(k=k.substring(0,k.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&A.Character.isIdentifierPart(n.charCodeAt(0))||this.throwUnexpectedToken()),
k+=n)}return k}octalToDecimal(m){let k="0"!==m,n="01234567".indexOf(m);!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(k=!0,n=8*n+"01234567".indexOf(this.source[this.index++]),"0123".includes(m)&&!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+"01234567".indexOf(this.source[this.index++])));return{code:n,octal:k}}scanIdentifier(){let m;const k=this.index,n=92===this.source.charCodeAt(k)?this.getComplexIdentifier():this.getIdentifier();
m=1===n.length?c.TokenType.Identifier:this.isKeyword(n)?c.TokenType.Keyword:n.toLowerCase()===c.Keywords.Null?c.TokenType.NullLiteral:n.toLowerCase()===c.Keywords.True||n.toLowerCase()===c.Keywords.False?c.TokenType.BooleanLiteral:c.TokenType.Identifier;if(m!==c.TokenType.Identifier&&k+n.length!==this.index){const y=this.index;this.index=k;this.tolerateUnexpectedToken(c.ParsingErrorCodes.InvalidEscapedReservedWord);this.index=y}return{type:m,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,
start:k,end:this.index}}scanPunctuator(){const m=this.index;let k=this.source[this.index];switch(k){case "(":case "{":"{"===k&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;break;default:for(let n=b.length;0<n;n--)if(k=this.source.substring(this.index,this.index+n),b[n-1].includes(k)){this.index+=n;break}}this.index===m&&this.throwUnexpectedToken();
return{type:c.TokenType.Punctuator,value:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}scanHexLiteral(m){let k="";for(;!this.eof()&&A.Character.isHexDigit(this.source.charCodeAt(this.index));)k+=this.source[this.index++];0===k.length&&this.throwUnexpectedToken();A.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:c.TokenType.NumericLiteral,value:parseInt("0x"+k,16),lineNumber:this.lineNumber,lineStart:this.lineStart,
start:m,end:this.index}}scanBinaryLiteral(m){let k="";for(;!this.eof();){var n=this.source[this.index];if("0"!==n&&"1"!==n)break;k+=this.source[this.index++]}0===k.length&&this.throwUnexpectedToken();this.eof()||(n=this.source.charCodeAt(this.index),(A.Character.isIdentifierStart(n)||A.Character.isDecimalDigit(n))&&this.throwUnexpectedToken());return{type:c.TokenType.NumericLiteral,value:parseInt(k,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}scanOctalLiteral(m,k){let n=
"",y=!1;A.Character.isOctalDigit(m.charCodeAt(0))?(y=!0,n="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&A.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];y||0!==n.length||this.throwUnexpectedToken();(A.Character.isIdentifierStart(this.source.charCodeAt(this.index))||A.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken();return{type:c.TokenType.NumericLiteral,value:parseInt(n,8),lineNumber:this.lineNumber,
lineStart:this.lineStart,start:k,end:this.index}}scanNumericLiteral(){const m=this.index;let k=this.source[m];L.assert(A.Character.isDecimalDigit(k.charCodeAt(0))||"."===k,"Numeric literal must start with a decimal digit or a decimal point");let n="";if("."!==k){n=this.source[this.index++];k=this.source[this.index];if("0"===n){if("x"===k||"X"===k)return++this.index,this.scanHexLiteral(m);if("b"===k||"B"===k)return++this.index,this.scanBinaryLiteral(m);if("o"===k||"O"===k)return this.scanOctalLiteral(k,
m)}for(;A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];k=this.source[this.index]}if("."===k){for(n+=this.source[this.index++];A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];k=this.source[this.index]}if("e"===k||"E"===k){n+=this.source[this.index++];k=this.source[this.index];if("+"===k||"-"===k)n+=this.source[this.index++];if(A.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;A.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=
this.source[this.index++];else this.throwUnexpectedToken()}A.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:c.TokenType.NumericLiteral,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}}scanStringLiteral(){const m=this.index;let k=this.source[m];L.assert("'"===k||'"'===k,"String literal must starts with a quote");++this.index;let n="";for(;!this.eof();){var y=this.source[this.index++];if(y===k){k=
"";break}if("\\"===y)if((y=this.source[this.index++])&&A.Character.isLineTerminator(y.charCodeAt(0)))++this.lineNumber,"\r"===y&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(y){case "u":"{"===this.source[this.index]?(++this.index,n+=this.scanUnicodeCodePointEscape()):(y=this.scanHexEscape(y),null===y&&this.throwUnexpectedToken(),n+=y);break;case "x":y=this.scanHexEscape(y);null===y&&this.throwUnexpectedToken(c.ParsingErrorCodes.InvalidHexEscapeSequence);n+=y;
break;case "n":n+="\n";break;case "r":n+="\r";break;case "t":n+="\t";break;case "b":n+="\b";break;case "f":n+="\f";break;case "v":n+="\v";break;case "8":case "9":n+=y;this.tolerateUnexpectedToken();break;default:y&&A.Character.isOctalDigit(y.charCodeAt(0))?(y=this.octalToDecimal(y),n+=String.fromCharCode(y.code)):n+=y}else if(A.Character.isLineTerminator(y.charCodeAt(0)))break;else n+=y}""!==k&&(this.index=m,this.throwUnexpectedToken());return{type:c.TokenType.StringLiteral,value:n,lineNumber:this.lineNumber,
lineStart:this.lineStart,start:m,end:this.index}}scanTemplate(){let m="",k=!1;const n=this.index,y="`"===this.source[n];let I=!1,p=2;for(++this.index;!this.eof();){var C=this.source[this.index++];if("`"===C){p=1;k=I=!0;break}if("$"===C){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;k=!0;break}m+=C}else if("\\"===C)if(C=this.source[this.index++],A.Character.isLineTerminator(C.charCodeAt(0)))++this.lineNumber,"\r"===C&&"\n"===this.source[this.index]&&++this.index,this.lineStart=
this.index;else switch(C){case "n":m+="\n";break;case "r":m+="\r";break;case "t":m+="\t";break;case "u":if("{"===this.source[this.index])++this.index,m+=this.scanUnicodeCodePointEscape();else{const z=this.index,e=this.scanHexEscape(C);null!==e?m+=e:(this.index=z,m+=C)}break;case "x":C=this.scanHexEscape(C);null===C&&this.throwUnexpectedToken(c.ParsingErrorCodes.InvalidHexEscapeSequence);m+=C;break;case "b":m+="\b";break;case "f":m+="\f";break;case "v":m+="\v";break;default:"0"===C?(A.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken(c.ParsingErrorCodes.TemplateOctalLiteral),m+="\x00"):A.Character.isOctalDigit(C.charCodeAt(0))?this.throwUnexpectedToken(c.ParsingErrorCodes.TemplateOctalLiteral):m+=C}else A.Character.isLineTerminator(C.charCodeAt(0))?(++this.lineNumber,"\r"===C&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,m+="\n"):m+=C}k||this.throwUnexpectedToken();y||this.curlyStack.pop();return{type:c.TokenType.Template,value:this.source.slice(n+1,this.index-p),cooked:m,head:y,
tail:I,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}}lex(){if(this.eof())return{type:c.TokenType.EOF,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};const m=this.source.charCodeAt(this.index);return A.Character.isIdentifierStart(m)?this.scanIdentifier():40===m||41===m||59===m?this.scanPunctuator():39===m||34===m?this.scanStringLiteral():46===m?A.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():
this.scanPunctuator():A.Character.isDecimalDigit(m)?this.scanNumericLiteral():96===m||125===m&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():55296<=m&&57343>m&&A.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()}}t.Scanner=d;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/assert":function(){define(["exports"],function(t){t.assert=function(L,A){if(!L)throw Error("ASSERT: "+A);};Object.defineProperty(t,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/character":function(){define(["exports"],function(t){var L=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
A=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
const c={fromCodePoint(b){return 65536>b?String.fromCharCode(b):String.fromCharCode(55296+(b-65536>>10))+String.fromCharCode(56320+(b-65536&1023))},isWhiteSpace(b){return 32===b||9===b||11===b||12===b||160===b||5760<=b&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(b)},isLineTerminator(b){return 10===b||13===b||8232===b||8233===b},isIdentifierStart(b){return 36===b||95===b||65<=b&&90>=b||97<=b&&122>=b||92===b||128<=b&&L.test(c.fromCodePoint(b))},isIdentifierPart(b){return 36===
b||95===b||65<=b&&90>=b||97<=b&&122>=b||48<=b&&57>=b||92===b||128<=b&&A.test(c.fromCodePoint(b))},isDecimalDigit(b){return 48<=b&&57>=b},isHexDigit(b){return 48<=b&&57>=b||65<=b&&70>=b||97<=b&&102>=b},isOctalDigit(b){return 48<=b&&55>=b}};t.Character=c;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/lib/tokenizer":function(){define(["exports","./error-handler","./scanner","./types"],function(t,L,A,c){class b{constructor(d,m){this.errorHandler=new L.ErrorHandler;this.errorHandler.tolerant=
m?"boolean"===typeof m.tolerant&&m.tolerant:!1;this.scanner=new A.Scanner(d,this.errorHandler);this.trackComments=m?"boolean"===typeof m.comment&&m.comment:!1;this.buffer=[]}errors(){return this.errorHandler.errors}getNextToken(){if(0===this.buffer.length){var d=this.scanner.scanComments();this.trackComments&&d&&d.forEach(m=>{const k=this.scanner.source.slice(m.start,m.end);this.buffer.push({type:m.multiLine?c.Syntax.BlockComment:c.Syntax.LineComment,value:k,range:m.range,loc:m.loc})});if(!this.scanner.eof()){d=
{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};const m=this.scanner.lex(),k={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart};d={type:c.rokenNames[m.type],value:this.scanner.source.slice(m.start,m.end),range:[m.start,m.end],loc:{start:d,end:k}};this.buffer.push(d)}}return this.buffer.shift()}}t.Tokenizer=b;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/RecentlyUsedCache":function(){define(function(){class t{constructor(c){const b=
this;b._keys=[];b._values=[];b.length=0;c&&c.forEach(d=>{b.set(d[0],d[1])})}entries(){return[].slice.call(this.keys().map((c,b)=>[c,this._values[b]]))}keys(){return[].slice.call(this._keys)}values(){return[].slice.call(this._values)}has(c){return this._keys.includes(c)}get(c){c=this._keys.indexOf(c);return-1<c?this._values[c]:null}deepGet(c){if(!c?.length)return null;const b=(d,m)=>null==d?null:m.length?b(d instanceof t?d.get(m[0]):d[m[0]],m.slice(1)):d;return b(this.get(c[0]),c.slice(1))}set(c,b){const d=
this._keys.indexOf(c);-1<d?this._values[d]=b:(this._keys.push(c),this._values.push(b),this.length=this._values.length);return this}sortedSet(c,b,d,m){var k=this._keys.length;d=d||0;m=void 0!==m?m:k-1;if(0===k)return this._keys.push(c),this._values.push(b),this;if(c===this._keys[d])return this._values.splice(d,0,b),this;if(c===this._keys[m])return this._values.splice(m,0,b),this;if(c>this._keys[m])return this._keys.splice(m+1,0,c),this._values.splice(m+1,0,b),this;if(c<this._keys[d])return this._values.splice(d,
0,b),this._keys.splice(d,0,c),this;if(d>=m)return this;k=d+Math.floor((m-d)/2);return c<this._keys[k]?this.sortedSet(c,b,d,k-1):c>this._keys[k]?this.sortedSet(c,b,k+1,m):this}size(){return this.length}clear(){this._keys.length=this.length=this._values.length=0;return this}delete(c){c=this._keys.indexOf(c);return-1<c?(this._keys.splice(c,1),this._values.splice(c,1),this.length=this._keys.length,!0):!1}forEach(c){this._keys.forEach((b,d)=>{c(this._values[d],b,d)})}map(c){return this.keys().map((b,d)=>
c(this._values[d],b,d))}filter(c){const b=this;b._keys.forEach((d,m)=>{!1===c(b._values[m],d,m)&&b.delete(d)});return this}clone(){return new t(this.entries())}}class L{constructor(c=20){this._maxEntries=c;this._values=new t}delete(c){this._values.has(c)&&this._values.delete(c)}get(c){let b=null;this._values.has(c)&&(b=this._values.get(c),this._values.delete(c),this._values.set(c,b));return b}put(c,b){if(this._values.size()>=this._maxEntries){const d=this._values.keys()[0];this._values.delete(d)}this._values.set(c,
b)}}class A{constructor(c=20){this._maxEntries=c;this._cache=new L(this._maxEntries)}clear(){this._cache=new L(this._maxEntries)}addToCache(c,b){this._cache.put(c,b)}removeFromCache(c){this._cache.delete(c)}getFromCache(c){return this._cache.get(c)}}return A})},"esri/arcade/arcadeRuntime":function(){define("exports ./ArcadeModule ./ArcadeModuleLoader ./Dictionary ./executionError ./Feature ./FunctionWrapper ../chunks/languageUtils ./treeAnalysis ../chunks/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Geometry ../geometry/SpatialReference".split(" "),
function(t,L,A,c,b,d,m,k,n,y,I,p,C,z,e,h,B,q){function v(G,F){const K=[];for(let E=0;E<F.arguments.length;E++)K.push(D(G,F.arguments[E]));return K}function f(G,F,K){try{return!0===F.preparsed?K(G,null,F.arguments):K(G,F,v(G,F))}catch(E){throw E;}}function D(G,F){try{switch(F?.type){case "EmptyStatement":return k.voidOperation;case "VariableDeclarator":let ua=null===F.init?null:D(G,F.init);ua===k.voidOperation&&(ua=null);if("Identifier"!==F.id.type)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,
F);const Ba=F.id.name.toLowerCase();null!=G.localScope?G.localScope[Ba]={value:ua,valueset:!0,node:F.init}:G.globalScope[Ba]={value:ua,valueset:!0,node:F.init};return k.voidOperation;case "VariableDeclaration":for(var K=0;K<F.declarations.length;K++)D(G,F.declarations[K]);return k.voidOperation;case "ImportDeclaration":const pa=F.specifiers[0].local.name.toLowerCase(),Ea=G.libraryResolver.loadLibrary(pa);K=null;G.libraryResolver._moduleSingletons?.has(Ea.uri)?K=G.libraryResolver._moduleSingletons.get(Ea.uri):
(K=new wa(Ea),K.loadModule(G),G.libraryResolver._moduleSingletons?.set(Ea.uri,K));G.globalScope[pa]={value:K,valueset:!0,node:F};return k.voidOperation;case "ExportNamedDeclaration":D(G,F.declaration);if("FunctionDeclaration"===F.declaration.type)G.exports[F.declaration.id.name.toLowerCase()]="function";else if("VariableDeclaration"===F.declaration.type)for(const W of F.declaration.declarations)G.exports[W.id.name.toLowerCase()]="variable";return k.voidOperation;case "BlockStatement":case "Program":a:{let W=
k.voidOperation;for(K=0;K<F.body.length;K++)if(W=D(G,F.body[K]),W instanceof k.returnResult||W===k.breakResult||W===k.continueResult){var E=W;break a}E=W}return E;case "FunctionDeclaration":const Ha=F.id.name.toLowerCase();G.globalScope[Ha]={valueset:!0,node:null,value:new ja(F,G)};return k.voidOperation;case "ReturnStatement":if(null===F.argument)var O=new k.returnResult(k.voidOperation);else{var R=D(G,F.argument);O=new k.returnResult(R)}return O;case "IfStatement":{const W=D(G,F.test);if(!0===W)var T=
D(G,F.consequent);else if(!1===W)T=null!==F.alternate?D(G,F.alternate):k.voidOperation;else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.BooleanConditionRequired,F);}return T;case "ExpressionStatement":if("AssignmentExpression"===F.expression.type||"UpdateExpression"===F.expression.type)var la=D(G,F.expression);else if("CallExpression"===F.expression.type){const W=D(G,F.expression);la=W===k.voidOperation?k.voidOperation:new k.implicitResult(W)}else{var qa=D(G,F.expression);la=qa===k.voidOperation?
k.voidOperation:new k.implicitResult(qa)}return la;case "AssignmentExpression":K=null;var g="";if("MemberExpression"===F.left.type){K=D(G,F.left.object);if(!0===F.left.computed)g=D(G,F.left.property);else if("Identifier"===F.left.property.type)g=F.left.property.name;else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,F);const W=D(G,F.right);if(k.isArray(K))if(k.isNumber(g)){0>g&&(g=K.length+g);if(0>g||g>K.length)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.OutOfBounds,
F);if(g===K.length&&"\x3d"!==F.operator)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.OutOfBounds,F);K[g]=w(W,F.operator,K[g],F,G)}else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.ArrayAccessorMustBeNumber,F);else if(K instanceof c){if(!1===k.isString(g))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===K.hasField(g))K.setField(g,w(W,F.operator,K.field(g),F,G));else{if("\x3d"!==F.operator)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FieldNotFound,
F,{key:g});K.setField(g,w(W,F.operator,null,F,G))}}else if(k.isFeature(K)){if(!1===k.isString(g))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===K.hasField(g))K.setField(g,w(W,F.operator,K.field(g),F,G));else{if("\x3d"!==F.operator)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FieldNotFound,F,{key:g});K.setField(g,w(W,F.operator,null,F,G))}}else{if(k.isImmutableArray(K))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.Immutable,F);if(K instanceof
wa){if(!1===k.isString(g))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.ModuleAccessorMustBeString,F);if(!0===K.hasGlobal(g))K.setGlobal(g,w(W,F.operator,K.global(g),F,G));else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.ModuleExportNotFound,F);}else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,F);}var u=k.voidOperation}else{K=F.left.name.toLowerCase();var H=D(G,F.right);if(null!=G.localScope&&void 0!==G.localScope[K])G.localScope[K]={value:w(H,
F.operator,G.localScope[K].value,F,G),valueset:!0,node:F.right},u=k.voidOperation;else if(void 0!==G.globalScope[K])G.globalScope[K]={value:w(H,F.operator,G.globalScope[K].value,F,G),valueset:!0,node:F.right},u=k.voidOperation;else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,F);}return u;case "UpdateExpression":{let W;K=null;g="";if("MemberExpression"===F.argument.type){K=D(G,F.argument.object);!0===F.argument.computed?g=D(G,F.argument.property):"Identifier"===F.argument.property.type&&
(g=F.argument.property.name);if(k.isArray(K))if(k.isNumber(g)){0>g&&(g=K.length+g);if(0>g||g>=K.length)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.OutOfBounds,F);W=k.toNumber(K[g]);K[g]="++"===F.operator?W+1:W-1}else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.ArrayAccessorMustBeNumber,F);else if(K instanceof c){if(!1===k.isString(g))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===K.hasField(g))W=k.toNumber(K.field(g)),K.setField(g,
"++"===F.operator?W+1:W-1);else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FieldNotFound,F);}else if(k.isFeature(K)){if(!1===k.isString(g))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.KeyAccessorMustBeString,F);if(!0===K.hasField(g))W=k.toNumber(K.field(g)),K.setField(g,"++"===F.operator?W+1:W-1);else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FieldNotFound,F);}else{if(k.isImmutableArray(K))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.Immutable,
F);if(K instanceof wa){if(!1===k.isString(g))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.ModuleAccessorMustBeString,F);if(!0===K.hasGlobal(g))W=k.toNumber(K.global(g)),K.setGlobal(g,"++"===F.operator?W+1:W-1);else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.ModuleExportNotFound,F);}else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidParameter,F);}var N=!1===F.prefix?W:"++"===F.operator?W+1:W-1}else{K="Identifier"===F.argument.type?F.argument.name.toLowerCase():
"";if(!K)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,F);if(null!=G.localScope&&void 0!==G.localScope[K])W=k.toNumber(G.localScope[K].value),G.localScope[K]={value:"++"===F.operator?W+1:W-1,valueset:!0,node:F},N=!1===F.prefix?W:"++"===F.operator?W+1:W-1;else if(void 0!==G.globalScope[K])W=k.toNumber(G.globalScope[K].value),G.globalScope[K]={value:"++"===F.operator?W+1:W-1,valueset:!0,node:F},N=!1===F.prefix?W:"++"===F.operator?W+1:W-1;else throw new b.ArcadeExecutionError(G,
b.ExecutionErrorCodes.InvalidIdentifier,F);}}return N;case "BreakStatement":return k.breakResult;case "ContinueStatement":return k.continueResult;case "TemplateElement":return F.value?F.value.cooked:"";case "TemplateLiteral":H="";N=0;for(const W of F.quasis)if(H+=W.value?W.value.cooked:"",!1===W.tail){if(F.expressions[N]){var S=k;g=S.toString;var fa=D(G,F.expressions[N]),V=G;u=F;if(k.isFunctionParameter(fa))throw new b.ArcadeExecutionError(V,b.ExecutionErrorCodes.NoFunctionInTemplateLiteral,u);K=
g.call(S,fa)}else K="";H+=K;N++}return H;case "ForStatement":null!==F.init&&D(G,F.init);V={testResult:!0,lastAction:k.voidOperation};do b:{K=G;g=F;fa=V;if(null!==g.test){fa.testResult=D(K,g.test);if(!1===fa.testResult)break b;if(!0!==fa.testResult)throw new b.ArcadeExecutionError(K,b.ExecutionErrorCodes.BooleanConditionRequired,g);}fa.lastAction=D(K,g.body);fa.lastAction===k.breakResult?fa.testResult=!1:fa.lastAction instanceof k.returnResult?fa.testResult=!1:null!==g.update&&D(K,g.update)}while(!0===
V.testResult);S=V.lastAction instanceof k.returnResult?V.lastAction:k.voidOperation;return S;case "ForInStatement":return l(G,F);case "WhileStatement":K=!0;var ea=k.voidOperation;K=D(G,F.test);if(!1===K)var ia=k.voidOperation;else{if(!0!==K)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.BooleanConditionRequired,F);for(;!0===K;){ea=D(G,F.body);if(ea===k.breakResult)break;if(ea instanceof k.returnResult)break;K=D(G,F.test);if(!0!==K&&!1!==K)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.BooleanConditionRequired,
F);}ia=ea instanceof k.returnResult?ea:k.voidOperation}return ia;case "Identifier":return aa(G,F);case "MemberExpression":return r(G,F);case "Literal":return F.value;case "CallExpression":a:try{if("MemberExpression"===F.callee.type){const W=D(G,F.callee.object);if(!(W instanceof wa))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FunctionNotFound,F);const ma=!1===F.callee.computed?F.callee.property.name:D(G,F.callee.property);if(!W.hasGlobal(ma))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FunctionNotFound,
F);const ta=W.global(ma);if(!k.isFunctionParameter(ta))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.CallNonFunction,F);var X=ta.call(G,F)}else{if("Identifier"!==F.callee.type)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FunctionNotFound,F);if(null!=G.localScope&&void 0!==G.localScope[F.callee.name.toLowerCase()]){const W=G.localScope[F.callee.name.toLowerCase()];if(k.isFunctionParameter(W.value)){X=W.value.call(G,F);break a}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.CallNonFunction,
F);}if(void 0!==G.globalScope[F.callee.name.toLowerCase()]){const W=G.globalScope[F.callee.name.toLowerCase()];if(k.isFunctionParameter(W.value)){X=W.value.call(G,F);break a}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.CallNonFunction,F);}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.FunctionNotFound,F);}}catch(W){throw W;}return X;case "UnaryExpression":return M(G,F);case "BinaryExpression":return a(G,F);case "LogicalExpression":return Q(G,F);case "ArrayExpression":try{K=[];
for(g=0;g<F.elements.length;g++){const W=D(G,F.elements[g]);if(k.isFunctionParameter(W))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.NoFunctionInArray,F);W===k.voidOperation?K.push(null):K.push(W)}var da=K}catch(W){throw W;}return da;case "ObjectExpression":K={};const Ga=new Map;for(g=0;g<F.properties.length;g++){const W=D(G,F.properties[g]);if(k.isFunctionParameter(W.value))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.NoFunctionInDictionary,F);if(!1===k.isString(W.key))throw new b.ArcadeExecutionError(G,
b.ExecutionErrorCodes.KeyMustBeString,F);let ma=W.key.toString();const ta=ma.toLowerCase();Ga.has(ta)?ma=Ga.get(ta):Ga.set(ta,ma);K[ma]=W.value===k.voidOperation?null:W.value}const Aa=new c(K);Aa.immutable=!1;return Aa;case "Property":return{key:"Identifier"===F.key.type?F.key.name:D(G,F.key),value:D(G,F.value)};default:throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.Unrecognized,F);}}catch(ua){throw b.ensureArcadeExecutionError(G,F,ua);}}function l(G,F){var K=D(G,F.right);"VariableDeclaration"===
F.left.type&&D(G,F.left);let E=null;var O="";if("VariableDeclaration"===F.left.type){var R=F.left.declarations[0].id;"Identifier"===R.type&&(O=R.name)}else"Identifier"===F.left.type&&(O=F.left.name);if(!O)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,F);O=O.toLowerCase();null!=G.localScope&&void 0!==G.localScope[O]&&(E=G.localScope[O]);null===E&&void 0!==G.globalScope[O]&&(E=G.globalScope[O]);if(null===E)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,
F);if(k.isArray(K)||k.isString(K)){K=K.length;for(O=0;O<K;O++){E.value=O;R=D(G,F.body);if(R===k.breakResult)break;if(R instanceof k.returnResult)return R}return k.voidOperation}if(k.isImmutableArray(K)){for(O=0;O<K.length();O++){E.value=O;R=D(G,F.body);if(R===k.breakResult)break;if(R instanceof k.returnResult)return R}return k.voidOperation}if(K instanceof c||k.isFeature(K))for(K=K.keys(),O=0;O<K.length;O++){E.value=K[O];R=D(G,F.body);if(R===k.breakResult)break;if(R instanceof k.returnResult)return R}else return k.voidOperation}
function w(G,F,K,E,O){switch(F){case "\x3d":return G===k.voidOperation?null:G;case "/\x3d":return k.toNumber(K)/k.toNumber(G);case "*\x3d":return k.toNumber(K)*k.toNumber(G);case "-\x3d":return k.toNumber(K)-k.toNumber(G);case "+\x3d":return k.isString(K)||k.isString(G)?k.toString(K)+k.toString(G):k.toNumber(K)+k.toNumber(G);case "%\x3d":return k.toNumber(K)%k.toNumber(G);default:throw new b.ArcadeExecutionError(O,b.ExecutionErrorCodes.UnsupportedOperator,E);}}function r(G,F){try{const K=D(G,F.object);
if(null===K)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.MemberOfNull,F);if(!1===F.computed){if("Identifier"===F.property.type){if(K instanceof c||k.isFeature(K))return K.field(F.property.name);if(K instanceof B)return p.geometryMember(K,F.property.name,F,G);if(K instanceof wa){if(!K.hasGlobal(F.property.name))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,F);return K.global(F.property.name)}}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidMemberAccessKey,
F);}let E=D(G,F.property);if(K instanceof c||k.isFeature(K)){if(k.isString(E))return K.field(E);throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(K instanceof wa){if(k.isString(E))return K.global(E);throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(K instanceof B){if(k.isString(E))return p.geometryMember(K,E,F,G);throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(k.isArray(K)){if(k.isNumber(E)&&
isFinite(E)&&Math.floor(E)===E){0>E&&(E=K.length+E);if(E>=K.length||0>E)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.OutOfBounds,F);return K[E]}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidMemberAccessKey,F);}if(k.isString(K)){if(k.isNumber(E)&&isFinite(E)&&Math.floor(E)===E){0>E&&(E=K.length+E);if(E>=K.length||0>E)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.OutOfBounds,F);return K[E]}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidMemberAccessKey,
F);}if(k.isImmutableArray(K)&&k.isNumber(E)&&isFinite(E)&&Math.floor(E)===E){0>E&&(E=K.length()+E);if(E>=K.length()||0>E)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.OutOfBounds,F);return K.get(E)}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidMemberAccessKey,F);}catch(K){throw K;}}function M(G,F){try{const K=D(G,F.argument);if(k.isBoolean(K)){if("!"===F.operator)return!K;if("-"===F.operator)return-1*k.toNumber(K);if("+"===F.operator)return 1*k.toNumber(K);if("~"===F.operator)return~k.toNumber(K);
throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.UnsupportedUnaryOperator,F);}if("~"===F.operator)return~k.toNumber(K);if("-"===F.operator)return-1*k.toNumber(K);if("+"===F.operator)return 1*k.toNumber(K);throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.UnsupportedUnaryOperator,F);}catch(K){throw K;}}function a(G,F){try{const K=[D(G,F.left),D(G,F.right)],E=K[0],O=K[1];switch(F.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return k.binaryOperator(k.toNumber(E),
k.toNumber(O),F.operator);case "\x3d\x3d":return k.equalityTest(E,O);case "!\x3d":return!k.equalityTest(E,O);case "\x3c":return k.greaterThanLessThan(E,O,F.operator);case "\x3e":return k.greaterThanLessThan(E,O,F.operator);case "\x3c\x3d":return k.greaterThanLessThan(E,O,F.operator);case "\x3e\x3d":return k.greaterThanLessThan(E,O,F.operator);case "+":return k.isString(E)||k.isString(O)?k.toString(E)+k.toString(O):k.toNumber(E)+k.toNumber(O);case "-":return k.toNumber(E)-k.toNumber(O);case "*":return k.toNumber(E)*
k.toNumber(O);case "/":return k.toNumber(E)/k.toNumber(O);case "%":return k.toNumber(E)%k.toNumber(O);default:throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.UnsupportedOperator,F);}}catch(K){throw K;}}function Q(G,F){try{const K=D(G,F.left);if(k.isBoolean(K))switch(F.operator){case "||":if(!0===K)return K;const E=D(G,F.right);if(k.isBoolean(E))return E;throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.LogicExpressionOrAnd,F);case "\x26\x26":if(!1===K)return K;const O=D(G,F.right);
if(k.isBoolean(O))return O;throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.LogicExpressionOrAnd,F);default:throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.LogicExpressionOrAnd,F);}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.LogicalExpressionOnlyBoolean,F);}catch(K){throw K;}}function aa(G,F){let K;try{const E=F.name.toLowerCase();if(null!=G.localScope&&void 0!==G.localScope[E]){K=G.localScope[E];if(!0===K.valueset)return K.value;K.value=D(G,K.node);K.valueset=!0;return K.value}if(void 0!==
G.globalScope[E]){K=G.globalScope[E];if(!0===K.valueset)return K.value;K.value=D(G,K.node);K.valueset=!0;return K.value}throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidIdentifier,F);}catch(E){throw E;}}function ba(G,F,K,E){try{const O=F.arguments,R=D(G,O[K]);if(k.equalityTest(R,E))return D(G,O[K+1]);const T=O.length-K;return 1===T?D(G,O[K]):2===T?null:3===T?D(G,O[K+2]):ba(G,F,K+2,E)}catch(O){throw O;}}function ra(G,F,K,E){try{const O=F.arguments;if(!0===E)return D(G,O[K+1]);if(3===
O.length-K)return D(G,O[K+2]);const R=D(G,O[K+2]);if(!1===k.isBoolean(R))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.BooleanConditionRequired,O[K+2]);return ra(G,F,K+2,R)}catch(O){throw O;}}function ya(G,F,K,E){try{const O=G.body;if(K.length!==G.params.length)throw new b.ArcadeExecutionError(F,b.ExecutionErrorCodes.WrongNumberOfParameters,E);if(null!=F.localScope)for(let T=0;T<K.length;T++)F.localScope[G.params[T].name.toLowerCase()]={value:K[T],valueset:!0,node:null};const R=D(F,O);
if(R instanceof k.returnResult)return R.value;if(R===k.breakResult)throw new b.ArcadeExecutionError(F,b.ExecutionErrorCodes.UnexpectedToken,E);if(R===k.continueResult)throw new b.ArcadeExecutionError(F,b.ExecutionErrorCodes.UnexpectedToken,E);return R instanceof k.implicitResult?R.value:R}catch(O){throw O;}}function oa(G,F,K){const E=new xa;G||={};F||={};const O=new c({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});O.immutable=!1;E.textformatting={value:O,
valueset:!0,node:null};for(const R in F)E[R]={value:new m.NativeFunction(F[R]),native:!0,valueset:!0,node:null};for(const R in G)E[R]=G[R]&&"esri.Graphic"===G[R].declaredClass?{value:d.createFromGraphic(G[R],K),valueset:!0,node:null}:{value:G[R],valueset:!0,node:null};return E}function ca(G){console.log(G)}function U(G){const F={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:f,evaluateIdentifier:aa};for(let K=0;K<G.length;K++)G[K].registerFunctions(F);for(const K in F.functions)ka[K]=
{value:new m.NativeFunction(F.functions[K]),valueset:!0,node:null},xa.prototype[K]=ka[K];for(G=0;G<F.signatures.length;G++)n.addFunctionDeclaration(F.signatures[G],"sync")}class ja extends m.ArcadeFunction{constructor(G,F){super();this.context=this.definition=null;this.definition=G;this.context=F}createFunction(G){return(...F)=>{const K={spatialReference:this.context.spatialReference,console:this.context.console,services:this.context.services,timeZone:this.context.timeZone??null,lrucache:this.context.lrucache,
exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:G.depthCounter.depth+1},globalScope:this.context.globalScope};if(64<K.depthCounter.depth)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.MaximumCallDepth,null);return ya(this.definition,K,F,null)}}call(G,F){return f(G,F,(K,E,O)=>{K={spatialReference:G.spatialReference,services:G.services,globalScope:G.globalScope,depthCounter:{depth:G.depthCounter.depth+
1},libraryResolver:G.libraryResolver,exports:G.exports,timeZone:G.timeZone??null,console:G.console,lrucache:G.lrucache,interceptor:G.interceptor,localScope:{}};if(64<K.depthCounter.depth)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.MaximumCallDepth,F);return ya(this.definition,K,O,F)})}marshalledCall(G,F,K,E){return E(G,F,(O,R,T)=>{O={spatialReference:G.spatialReference,globalScope:K.globalScope,services:G.services,depthCounter:{depth:G.depthCounter.depth+1},libraryResolver:G.libraryResolver,
exports:G.exports,console:G.console,timeZone:G.timeZone??null,lrucache:G.lrucache,interceptor:G.interceptor,localScope:{}};T=T.map(la=>!k.isFunctionParameter(la)||la instanceof m.ScopeMarshalledFunction?la:m.wrapModuleScopedResponse(la,G,E));return m.wrapModuleScopedResponse(ya(this.definition,O,T,F),K,E)})}}class wa extends L.ArcadeModule{constructor(G){super(G)}global(G){G=this.executingContext.globalScope[G.toLowerCase()];G.valueset||(G.value=D(this.executingContext,G.node),G.valueset=!0);if(k.isFunctionParameter(G.value)&&
!(G.value instanceof m.ScopeMarshalledFunction)){const F=new m.ScopeMarshalledFunction;F.fn=G.value;F.parameterEvaluator=f;F.context=this.executingContext;G.value=F}return G.value}setGlobal(G,F){if(k.isFunctionParameter(F))throw new b.ArcadeExecutionError(null,b.ExecutionErrorCodes.AssignModuleFunction,null);this.executingContext.globalScope[G.toLowerCase()]={value:F,valueset:!0,node:null}}hasGlobal(G){void 0===this.executingContext.exports[G]&&(G=G.toLowerCase());return void 0!==this.executingContext.exports[G]?
!0:!1}loadModule(G){let F=G.spatialReference;if(null===F||void 0===F)F=new q({wkid:102100});this.moduleScope=oa({},G.customfunctions,G.timeZone);this.executingContext={spatialReference:F,globalScope:this.moduleScope,localScope:null,libraryResolver:new A.ArcadeModuleLoader(G.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},services:G.services,console:G.console??ca,timeZone:G.timeZone??null,lrucache:G.lrucache,interceptor:G.interceptor,depthCounter:{depth:1}};D(this.executingContext,
this.source.syntax)}}const ka={};I.registerFunctions(ka,f);h.registerFunctions(ka,f);z.registerFunctions(ka,f);p.registerFunctions(ka,f);e.registerFunctions(ka,f);C.registerFunctions(ka,f);ka.iif=function(G,F){try{const K=F.arguments;k.pcCheck(null===K?[]:K,3,3,G,F);const E=D(G,K[0]);if(!1===k.isBoolean(E))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.BooleanConditionRequired,F);return!0===E?D(G,K[1]):D(G,K[2])}catch(K){throw K;}};ka.defaultvalue=function(G,F){try{const K=F.arguments;k.pcCheck(null===
K?[]:K,2,3,G,F);const E=D(G,K[0]);if(3===K.length){const O=D(G,K[1]);let R=[];if(k.isImmutableArray(O))R=O.toArray();else if(k.isArray(O))R=O;else throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.InvalidParameter,F);F=E;if(null===F)return D(G,K[2]);for(const T of R)if(k.isFeature(F)){if(!1===k.isString(T)||!F.hasField(T))return D(G,K[2]);F=F.field(T)}else if(F instanceof c){if(!1===k.isString(T)||!F.hasField(T))return D(G,K[2]);F=F.field(T)}else if(F instanceof B){if(!1===k.isString(T))return D(G,
K[2]);F=p.geometryMember(F,T,null,null,2);if(null===F||"notfound"===F?.keystate)return D(G,K[2])}else if(k.isArray(F)){if(!1===k.isNumber(T))return D(G,K[2]);F=F[T];if(null===F||void 0===F)return D(G,K[2])}else if(k.isImmutableArray(F)){if(!1===k.isNumber(T))return D(G,K[2]);F=F.get(T);if(null===F||void 0===F)return D(G,K[2])}else return D(G,K[2]);return F}return null===E||""===E||void 0===E?D(G,K[1]):E}catch(K){throw K;}};ka.decode=function(G,F){try{const K=F.arguments;if(2>K.length)throw new b.ArcadeExecutionError(G,
b.ExecutionErrorCodes.WrongNumberOfParameters,F);if(2===K.length)return D(G,K[1]);if(0===(K.length-1)%2)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.WrongNumberOfParameters,F);const E=D(G,K[0]);return ba(G,F,1,E)}catch(K){throw K;}};ka.when=function(G,F){try{const K=F.arguments;if(3>K.length)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.WrongNumberOfParameters,F);if(0===K.length%2)throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.WrongNumberOfParameters,F);const E=D(G,
K[0]);if(!1===k.isBoolean(E))throw new b.ArcadeExecutionError(G,b.ExecutionErrorCodes.BooleanConditionRequired,K[0]);return ra(G,F,0,E)}catch(K){throw K;}};for(const G in ka)ka[G]={value:new m.NativeFunction(ka[G]),valueset:!0,node:null};const xa=function(){};xa.prototype=ka;xa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};xa.prototype.pi={value:Math.PI,valueset:!0,node:null};L={fixSpatialReference:k.fixSpatialReference,parseArguments:v,standardFunction:f};U([y.ArrayFunctions]);
t.executeScript=function(G,F){let K=F.spatialReference;if(null===K||void 0===K)K=new q({wkid:102100});let E=null;G.usesModules&&(E=new A.ArcadeModuleLoader(new Map,G.loadedModules));const O=oa(F.vars,F.customfunctions,F.timeZone);F={spatialReference:K,globalScope:O,localScope:null,services:F.services??null,exports:{},libraryResolver:E,console:F.console??ca,timeZone:F.timeZone??null,lrucache:F.lrucache,interceptor:F.interceptor,depthCounter:{depth:1}};G=D(F,G);G instanceof k.returnResult&&(G=G.value);
G instanceof k.implicitResult&&(G=G.value);G===k.voidOperation&&(G=null);if(G===k.breakResult)throw new b.ArcadeExecutionError(F,b.ExecutionErrorCodes.IllegalResult,null);if(G===k.continueResult)throw new b.ArcadeExecutionError(F,b.ExecutionErrorCodes.IllegalResult,null);if(k.isFunctionParameter(G))throw new b.ArcadeExecutionError(F,b.ExecutionErrorCodes.IllegalResult,null);return G};t.extend=U;t.functionHelper=L;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("exports ../geometry ../chunks/arcade ../arcade/Dictionary ../arcade/Feature ../chunks/languageUtils ../core/lang ../core/sql/DateOnly ../core/sql/TimeOnly ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/Multipoint ../geometry/Extent".split(" "),function(t,L,A,c,b,d,m,k,n,y,I,p,C,z){function e(w){return w.replaceAll(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}function h(w){if(!w)return null;try{return A.parseScript(w)}catch(r){}return null}function B(w,r){if(!w)return!1;if("string"===
typeof w)return r(w);if("simple"===w.type||"class-breaks"===w.type||"unique-value"===w.type||"dot-density"===w.type||"dictionary"===w.type||"pie-chart"===w.type){if("dot-density"===w.type){var M=w.attributes?.some(a=>r(a.valueExpression));if(M)return M}M=w.visualVariables;M=!!M&&M.some(a=>{let Q=r(a.valueExpression);"size"===a.type&&(f(a.minSize)&&(Q=Q||r(a.minSize.valueExpression)),f(a.maxSize)&&(Q=Q||r(a.maxSize.valueExpression)));return Q});return"valueExpression"in w&&r(w.valueExpression)?!0:
M}return"esri.layers.support.LabelClass"===w.declaredClass?(w=w.labelExpressionInfo?.expression,!(!w||!r(w))||!1):"esri.PopupTemplate"===w.declaredClass?!!w.expressionInfos&&w.expressionInfos.some(a=>r(a.expression))||Array.isArray(w.content)&&w.content.some(a=>"expression"===a.type&&r(a.expressionInfo?.expression)):!1}function q(w){w=h(w);return!!w&&A.scriptTouchesGeometry(w)}function v(w){w=h(w);return!!w&&A.scriptUsesGeometryEngine(w)}function f(w){return w&&"esri.renderers.visualVariables.SizeVariable"===
w.declaredClass}const D=/^\$(feature|aggregatedFeatures)\./i,l={vars:{$feature:"any",$view:"any"},spatialReference:null};t.arcade=A.arcade;t.Dictionary=c;t.arcadeFeature=b;t.convertFeatureLayerToFeatureSet=function({layer:w,spatialReference:r,outFields:M,returnGeometry:a,lrucache:Q,interceptor:aa}){if(null===w)return null;const ba=A.featureSetUtils();return ba?ba.constructFeatureSet(w,r,M,a??!0,Q,aa):null};t.convertJsonToArcade=function(w,r){return c.convertJsonToArcade(w,r)};t.convertMapToFeatureSetCollection=
function(w){if(null===w?.map)return null;const r=A.featureSetUtils();return r?r.createFeatureSetCollectionFromMap(w.map,w.spatialReference,w.lrucache,w.interceptor):null};t.convertServiceUrlToWorkspace=function({url:w,spatialReference:r,lrucache:M,interceptor:a}){const Q=A.featureSetUtils();return Q?Q.createFeatureSetCollectionFromService(w,r,M,a):null};t.createExecContext=function(w,r,M){return{vars:{$feature:null==w?new b:b.createFromGraphic(w,M),$view:r?.view},spatialReference:r?.sr,timeZone:M??
null}};t.createFeature=function(w,r,M){return b.createFromGraphicLikeObject(r,w,M,null)};t.createFunction=function(w,r){w="string"===typeof w?h(w):w;if(!w)return null;try{return r=r||m.clone(l),A.compileScript(w,r)}catch(M){}return null};t.createSyntaxTree=h;t.dependsOnView=function(w){return A.referencesMember(w,"$view")};t.enableFeatureSetOperations=function(){return A.enableFeatureSetSupport()};t.enableGeometryOperations=function(){return A.enableGeometrySupport()};t.evalSyntaxTree=function(w,
r){let M;try{M=A.executeScript(w,r)}catch(a){M=null}return M};t.executeAsyncFunction=function(w,r){try{return w?w(r):Promise.resolve(null)}catch(M){return Promise.resolve(null)}};t.executeFunction=function(w,r){let M;try{M=w?w(r):null}catch(a){M=null}return M};t.extractFieldNames=function(w,r){if(!w)return[];w="string"===typeof w?h(w):w;if(!w)return[];let M=[];A.extractExpectedFieldLiterals(w).forEach(Q=>{D.test(Q)&&(Q=Q.replace(D,""),M.push(Q))});const a=M.filter(Q=>Q.includes("*"));M=M.filter(Q=>
!a.includes(Q));r&&a.forEach(Q=>{const aa=new RegExp(`^${Q.split(/\*+/).map(e).join(".*")}$`,"i");r.forEach(ba=>aa.test(ba)?M.push(ba):null)});return[...(new Set(M.sort()))]};t.getArcadeType=function(w){return null==w?null:d.isArray(w)||d.isImmutableArray(w)?"array":d.isDate(w)?"date":d.isString(w)?"text":d.isBoolean(w)?"boolean":d.isNumber(w)?"number":w instanceof c?"dictionary":d.isFeature(w)?"feature":w instanceof y?"point":w instanceof I?"polygon":w instanceof p?"polyline":w instanceof C?"multipoint":
w instanceof z?"extent":w instanceof k.DateOnly?"dateOnly":w instanceof n.TimeOnly?"time":d.isFeatureSet(w)?"featureSet":d.isFeatureSetCollection(w)?"featureSetCollection":null};t.getViewInfo=function(w){if(w&&(null!=w.spatialReference||null!=w.scale&&null!=w.viewingMode))return{view:w.viewingMode&&null!=w.scale?new c({viewingMode:w.viewingMode,scale:w.scale}):null,sr:w.spatialReference}};t.hasGeometryFunctions=function(w){return B(w,q)};t.hasGeometryOperations=function(w){return B(w,v)};t.hasVariable=
function(w,r){return w?A.referencesMember(w,r):!1};t.loadScriptDependencies=function(w,r,M=[]){return A.loadScriptDependencies(w,r,M)};t.updateExecContext=function(w,r){null!=w.vars&&(w.vars.$feature=r)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});