// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["require","exports","../../core/uuid"],function(l,b,e){const m=e.generateLowercaseBracedUUID();e=new Map;const f=new Map,p=new Map;b.currentSessionId=m;b.defaultVersionNameLookup=e;b.isSafeToEditVersion=async function(a,c,d=!1){if(!a||!c)return!0;a=a.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");const n=f.get(a)?.entries();if(n)for(const [q,g]of n)if(g.name===c){c=!g.stack?.hasForwardEdits();if(!c&&d){const [{deleteForwardEdits:r},{default:t}]=await Promise.all([new Promise((h,
k)=>l(["../../rest/versionManagement/gdbVersion/deleteForwardEdits"],h,k)),new Promise((h,k)=>l(["../../rest/versionManagement/gdbVersion/support/DeleteForwardEditsParameters"],u=>h(Object.freeze(Object.defineProperty({__proto__:null,default:u},Symbol.toStringTag,{value:"Module"}))),k))]);return r(a,q,new t({sessionId:m,moment:g.moment}))}return c}return!0};b.isVersionInEditSession=function(a,c){if(!a)return!1;a=a.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");if(a=f.get(a)?.entries())for(const [,
d]of a)if(d.name===c)return"edit"===d.lockType;return!1};b.versionCollection=f;b.versionCollectionCount=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});