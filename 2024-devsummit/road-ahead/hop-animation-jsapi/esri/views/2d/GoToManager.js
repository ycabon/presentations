// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./viewpointUtils".split(" "),function(f,h,l,k,m,g,n,p,A,B,q,r,t){f.GoToManager=class extends l{constructor(a){super(a);this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(a,c){if(a){var d=new r;this.view.animation=
d;await n.whenOnce(()=>this.view.ready,c);var b={animate:!0,...c},{extent:e,spatialReference:u,size:v,viewpoint:w,constraints:x,padding:y,allLayerViews:z}=this.view;a=t.create(a,{extent:e,spatialReference:u,size:v,viewpoint:w,constraints:x,padding:y,allLayerViews:z,pickClosestTarget:c?.pickClosestTarget??!0});d?.update(a);this._gotoTask={};return b.animate?this._gotoAnimated(a,b):this._gotoImmediate(a,b)}m.getLogger(this).error("#goTo()","target cannot be null or undefined")}_gotoImmediate(a,c){const d=
this._gotoTask,b=this.view.animation;a=a.then(e=>{g.throwIfAborted(c);if(d!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=b.target=e;b.finish()});return this._cancellableGoTo(d,b,a,c)}_gotoAnimated(a,c){const d=this._gotoTask,b=this.view.animation;if(!b)return Promise.resolve();a=a.then(e=>{g.throwIfAborted(c);if(d!==this._gotoTask)throw new k("view:goto-interrupted","Goto was interrupted");b.update(e);this.view.animationManager.animate(b,this.view.viewpoint,
c);return b.when().then(()=>{},()=>{})});return this._cancellableGoTo(d,b,a,c)}_cancellableGoTo(a,c,d,b){const e=()=>a===this._gotoTask;return g.whenOrAbort(d,b).finally(()=>{e()&&(c.done||c.stop())})}};h.__decorate([p.property({constructOnly:!0})],f.GoToManager.prototype,"view",void 0);f.GoToManager=h.__decorate([q.subclass("esri.views.2d.GoToManager")],f.GoToManager);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});