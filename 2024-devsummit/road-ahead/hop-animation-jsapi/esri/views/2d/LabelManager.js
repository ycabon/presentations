// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./engine/webgl/collisions/CollisionEngine".split(" "),function(b,d,g,n,h,p,e,q,k,l){b.LabelManager=class extends g{constructor(a){super(a);this._lastUpdate=0;this.collisionEngine=new l.CollisionEngine;this.lastUpdateId=-1;this.updateRequested=!1;this.view=null}get updating(){h("esri-2d-log-updating")&&
console.log(`Updating LabelManager ${this.updateRequested}:\n-> updateRequested: ${this.updateRequested}`);return this.updateRequested}update(a){const c=performance.now();32<=c-this._lastUpdate?(this._lastUpdate=c,this.doUpdate(a)):this.requestUpdate()}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view?.requestUpdate())}processUpdate(a){this.updateRequested&&(this.updateRequested=!1,this.update(a))}doUpdate(a){const c=this.view;if(c)try{const f=
a.state.scale,m=c.featuresTilingScheme.getClosestInfoForScale(f).level;this.collisionEngine.run(c.allLayerViews.items,a,f,m)}catch(f){}}};d.__decorate([e.property()],b.LabelManager.prototype,"updateRequested",void 0);d.__decorate([e.property()],b.LabelManager.prototype,"updating",null);d.__decorate([e.property()],b.LabelManager.prototype,"view",void 0);b.LabelManager=d.__decorate([k.subclass("esri.views.2d.LabelManager")],b.LabelManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});