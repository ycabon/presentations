// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["../enums","./BaseBucket"],function(m,n){class p extends n{constructor(a,c,b,d,h){super(a,c,b);this.type=m.BucketType.CIRCLE;this._circleVertexBuffer=d;this._circleIndexBuffer=h}get circleIndexStart(){return this._circleIndexStart}get circleIndexCount(){return this._circleIndexCount}processFeatures(a){const c=this._circleVertexBuffer,b=this._circleIndexBuffer;this._circleIndexStart=3*b.index;this._circleIndexCount=0;const d=this.layer,h=this.zoom;a&&a.setExtent(this.layerExtent);for(const k of this._features){var e=
k.getGeometry(a);if(!e)continue;const g=d.circleMaterial.encodeAttributes(k,h,d);for(const l of e)if(l)for(const f of l)e=c.index,c.add(f.x,f.y,0,0,g),c.add(f.x,f.y,0,1,g),c.add(f.x,f.y,1,0,g),c.add(f.x,f.y,1,1,g),b.add(e,e+1,e+2),b.add(e+1,e+2,e+3),this._circleIndexCount+=6}}serialize(){var a=6+this.layerUIDs.length;a+=this._circleVertexBuffer.array.length;a+=this._circleIndexBuffer.array.length;a=new Uint32Array(a);var c=new Int32Array(a.buffer);let b=0;a[b++]=this.type;a[b++]=this.layerUIDs.length;
for(var d=0;d<this.layerUIDs.length;d++)a[b++]=this.layerUIDs[d];a[b++]=this._circleIndexStart;a[b++]=this._circleIndexCount;a[b++]=this._circleVertexBuffer.array.length;for(d=0;d<this._circleVertexBuffer.array.length;d++)c[b++]=this._circleVertexBuffer.array[d];a[b++]=this._circleIndexBuffer.array.length;for(c=0;c<this._circleIndexBuffer.array.length;c++)a[b++]=this._circleIndexBuffer.array[c];return a.buffer}}return p});