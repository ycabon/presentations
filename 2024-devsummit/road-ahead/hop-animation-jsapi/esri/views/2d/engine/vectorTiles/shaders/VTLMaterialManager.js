// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["../enums","./Programs"],function(a,d){class h{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach(c=>c.dispose());this._programByKey.clear()}getMaterialProgram(c,b,e){const g=b.key<<3|this._getMaterialOptionsValue(b.type,e);if(this._programByKey.has(g))return this._programByKey.get(g);var f=this._getProgramTemplate(b.type);({shaders:f}=f);const {vertexShader:k,fragmentShader:l}=f(e);e=b.getShaderHeader();f=b.getShaderMain();e=k.replace("#pragma header",e).replace("#pragma main",
f);c=c.programCache.acquire(e,l,b.getAttributeLocations());this._programByKey.set(g,c);return c}_getMaterialOptionsValue(c,b){switch(c){case a.ShaderProgramType.BACKGROUND:return(b.pattern?1:0)<<1;case a.ShaderProgramType.FILL:return(b.pattern?1:0)<<1;case a.ShaderProgramType.OUTLINE:return 0;case a.ShaderProgramType.LINE:return(b.sdf?1:0)<<2|(b.pattern?1:0)<<1;case a.ShaderProgramType.ICON:return(b.sdf?1:0)<<1;case a.ShaderProgramType.CIRCLE:return 0;case a.ShaderProgramType.TEXT:return 0;default:return 0}}_getProgramTemplate(c){switch(c){case a.ShaderProgramType.BACKGROUND:return d.background;
case a.ShaderProgramType.CIRCLE:return d.circle;case a.ShaderProgramType.FILL:return d.fill;case a.ShaderProgramType.ICON:return d.icon;case a.ShaderProgramType.LINE:return d.line;case a.ShaderProgramType.OUTLINE:return d.outline;case a.ShaderProgramType.TEXT:return d.text;default:return null}}}return h});