// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../../../../core/libs/gl-matrix-2/factories/vec4f32 ../DefaultVertexAttributeLayouts ./WGLBrush ../shaders/BackgroundPrograms ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/ProgramTemplate ../../../../webgl/VertexArrayObject".split(" "),function(g,h,k,e,l,c,m,n){class p extends k{constructor(){super(...arguments);this._color=g.fromValues(1,0,0,1);this._initialized=!1}dispose(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&
(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)}prepareState({context:a}){a.setDepthWriteEnabled(!1);a.setDepthTestEnabled(!1);a.setStencilTestEnabled(!0);a.setBlendingEnabled(!1);a.setColorMask(!1,!1,!1,!1);a.setStencilOp(c.StencilOperation.KEEP,c.StencilOperation.KEEP,c.StencilOperation.REPLACE);a.setStencilWriteMask(255)}draw(a,d){const {context:b,requestRender:f,allowDelayedRender:q}=a;this._initialized||this._initialize(b);q&&null!=f&&!this._solidProgram.compiled?f():
(b.setStencilFunctionSeparate(c.Face.FRONT_AND_BACK,c.CompareFunction.GREATER,d.stencilRef,255),b.bindVAO(this._solidVertexArrayObject),b.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",d.transforms.displayViewScreenMat3),this._solidProgram.setUniform2fv("u_coord_range",[d.rangeX,d.rangeY]),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),b.drawArrays(c.PrimitiveType.TRIANGLE_STRIP,0,4),b.bindVAO())}_initialize(a){if(this._initialized)return!0;
const d=m.createProgram(a,e.background);if(!d)return!1;var b=new Int8Array([0,0,1,0,0,1,1,1]);b=l.BufferObject.createVertex(a,c.Usage.STATIC_DRAW,b);a=new n.VertexArrayObject(a,e.background.attributes,h.Pos2b,{geometry:b});this._solidProgram=d;this._solidVertexArrayObject=a;return this._initialized=!0}}return p});