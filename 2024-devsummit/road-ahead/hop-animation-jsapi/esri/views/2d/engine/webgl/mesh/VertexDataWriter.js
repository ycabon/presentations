// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../util/Writer"],function(f,e){class k{constructor(a,d,b,c=0){const l=6*c*Uint32Array.BYTES_PER_ELEMENT;c=4*c*b;b/=4;const h=d.attributes.find(g=>"pos"===g.name||"position"===g.name);if(!h)throw Error("InternalError: Unable to find position attribute");this.layout={...d,position:h};this._indices=new e(Uint32Array,l);this._vertices=new e(Uint32Array,c);this._metrics=new e(Uint32Array,0);this._metricCountOffset=this._metrics.push(0);this._strideInt=b;this._instanceId=a}serialize(a){const d=
this._indices.buffer(),b=this._vertices.buffer(),c=this._metrics.length?this._metrics.buffer():null;a.push(d,b);return{instanceId:this._instanceId,layout:this.layout,indices:d,vertices:b,metrics:c}}get strideInt(){return this._strideInt}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(a){this._vertices.ensureSize(a)}indexEnsureSize(a){this._indices.ensureSize(a)}writeIndex(a){this._indices.push(a)}writeVertex(a){this._vertices.push(a)}writeVertexRegion(a){this._vertices.writeRegion(a)}writeVertexF32(a){this._vertices.writeF32(a)}writeMetric(a){this._metrics.incr(this._metricCountOffset);
a.serialize(this._metrics)}}f.VertexDataWriter=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});