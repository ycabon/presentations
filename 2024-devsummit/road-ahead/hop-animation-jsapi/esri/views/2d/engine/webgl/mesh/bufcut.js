// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports"],function(K){function L(a,e,b,c,d,f,m){let g;b=0;for(let l=c,n=d-f;l<d;l+=f)b+=(a[n+e*f]-a[l+e*f])*(a[l+1+e*f]+a[n+1+e*f]),n=l;if(m===0<b)for(;c<d;c+=f)g=M(c+e*f,a[c+e*f],a[c+1+e*f],g);else for(d-=f;d>=c;d-=f)g=M(d+e*f,a[d+e*f],a[d+1+e*f],g);g&&w(g,g.next)&&(A(g),g=g.next);return g}function B(a,e=a){if(!a)return a;let b;do if(b=!1,a.steiner||!w(a,a.next)&&0!==p(a.prev,a,a.next))a=a.next;else{A(a);a=e=a.prev;if(a===a.next)break;b=!0}while(b||a!==e);return e}function C(a,e,b,c,d,f,
m,g){if(a){!g&&f&&(a=N(a,c,d,f));for(var l=a;a.prev!==a.next;){var n=a.prev,k=a.next;if(f)var h=R(a,c,d,f);else a:{h=a;var q=h.prev,t=h;const u=h.next;if(0<=p(q,t,u)){h=!1;break a}let r=h.next.next;const D=r;let v=0;for(;r!==h.prev&&(0===v||r!==D);){v++;if(y(q.x,q.y,t.x,t.y,u.x,u.y,r.x,r.y)&&0<=p(r.prev,r,r.next)){h=!1;break a}r=r.next}h=!0}if(h)e.push(n.index/b+m),e.push(a.index/b+m),e.push(k.index/b+m),A(a),l=a=k.next;else if(a=k,a===l){if(!g)C(B(a),e,b,c,d,f,m,1);else if(1===g){g=e;l=b;n=m;k=a;
do h=k.prev,q=k.next.next,!w(h,q)&&O(h,k,k.next,q)&&E(h,q)&&E(q,h)&&(g.push(h.index/l+n),g.push(k.index/l+n),g.push(q.index/l+n),A(k),A(k.next),k=a=q),k=k.next;while(k!==a);a=k;C(a,e,b,c,d,f,m,2)}else if(2===g)a:{g=a;do{for(l=g.next.next;l!==g.prev;){if(n=g.index!==l.index){h=h=h=void 0;n=g;k=l;if(h=n.next.index!==k.index&&n.prev.index!==k.index){b:{h=n;do{if(h.index!==n.index&&h.next.index!==n.index&&h.index!==k.index&&h.next.index!==k.index&&O(h,h.next,n,k)){h=!0;break b}h=h.next}while(h!==n);h=
!1}h=!h}if(h=h&&E(n,k)&&E(k,n)){h=n;q=!1;t=(n.x+k.x)/2;k=(n.y+k.y)/2;do h.y>k!==h.next.y>k&&h.next.y!==h.y&&t<(h.next.x-h.x)*(k-h.y)/(h.next.y-h.y)+h.x&&(q=!q),h=h.next;while(h!==n);h=q}n=h}if(n){a=P(g,l);g=B(g,g.next);a=B(a,a.next);C(g,e,b,c,d,f,m,0);C(a,e,b,c,d,f,m,0);break a}l=l.next}g=g.next}while(g!==a)}break}}}}function R(a,e,b,c){const d=a.prev,f=a.next;if(0<=p(d,a,f))return!1;const m=d.x>a.x?d.x>f.x?d.x:f.x:a.x>f.x?a.x:f.x,g=d.y>a.y?d.y>f.y?d.y:f.y:a.y>f.y?a.y:f.y,l=H(d.x<a.x?d.x<f.x?d.x:
f.x:a.x<f.x?a.x:f.x,d.y<a.y?d.y<f.y?d.y:f.y:a.y<f.y?a.y:f.y,e,b,c);e=H(m,g,e,b,c);b=a.prevZ;for(c=a.nextZ;b&&b.z>=l&&c&&c.z<=e;){if(b!==a.prev&&b!==a.next&&y(d.x,d.y,a.x,a.y,f.x,f.y,b.x,b.y)&&0<=p(b.prev,b,b.next))return!1;b=b.prevZ;if(c!==a.prev&&c!==a.next&&y(d.x,d.y,a.x,a.y,f.x,f.y,c.x,c.y)&&0<=p(c.prev,c,c.next))return!1;c=c.nextZ}for(;b&&b.z>=l;){if(b!==a.prev&&b!==a.next&&y(d.x,d.y,a.x,a.y,f.x,f.y,b.x,b.y)&&0<=p(b.prev,b,b.next))return!1;b=b.prevZ}for(;c&&c.z<=e;){if(c!==a.prev&&c!==a.next&&
y(d.x,d.y,a.x,a.y,f.x,f.y,c.x,c.y)&&0<=p(c.prev,c,c.next))return!1;c=c.nextZ}return!0}function M(a,e,b,c){a=F.create(a,e,b);c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a);return a}function A(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function S(a,e){let b=e;const c=a.x,d=a.y;let f=-Infinity,m;do{if(d<=b.y&&d>=b.next.y&&b.next.y!==b.y){var g=b.x+(d-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(g<=c&&g>f){f=g;if(g===c){if(d===
b.y)return b;if(d===b.next.y)return b.next}m=b.x<b.next.x?b:b.next}}b=b.next}while(b!==e);if(!m)return null;if(c===f)return m.prev;e=m;g=m.x;const l=m.y;let n=Infinity,k;for(b=m.next;b!==e;)c>=b.x&&b.x>=g&&c!==b.x&&y(d<l?c:f,d,g,l,d<l?f:c,d,b.x,b.y)&&(k=Math.abs(d-b.y)/(c-b.x),(k<n||k===n&&b.x>m.x)&&E(b,a)&&(m=b,n=k)),b=b.next;return m}function N(a,e,b,c){for(var d;d!==a;d=d.next){d=d||a;null===d.z&&(d.z=H(d.x,d.y,e,b,c));if(d.prev.next!==d||d.next.prev!==d)return d.prev.next=d,d.next.prev=d,N(a,
e,b,c);d.prevZ=d.prev;d.nextZ=d.next}a.prevZ.nextZ=null;a.prevZ=null;a:for(b=1;;){c=a;e=a=null;let f=0;for(;c;){f++;d=c;let m=0;for(;m<b&&d;m++)d=d.nextZ;let g=b;for(;0<m||0<g&&d;){let l;0===m?(l=d,d=d.nextZ,g--):0!==g&&d?c.z<=d.z?(l=c,c=c.nextZ,m--):(l=d,d=d.nextZ,g--):(l=c,c=c.nextZ,m--);e?e.nextZ=l:a=l;l.prevZ=e;e=l}c=d}e.nextZ=null;b*=2;if(2>f)break a}return a}function p(a,e,b){return(e.y-a.y)*(b.x-e.x)-(e.x-a.x)*(b.y-e.y)}function O(a,e,b,c){return w(a,e)&&w(b,c)||w(a,c)&&w(b,e)?!0:0<p(a,e,b)!==
0<p(a,e,c)&&0<p(b,c,a)!==0<p(b,c,e)}function y(a,e,b,c,d,f,m,g){return 0<=(d-m)*(e-g)-(a-m)*(f-g)&&0<=(a-m)*(c-g)-(b-m)*(e-g)&&0<=(b-m)*(f-g)-(d-m)*(c-g)}function E(a,e){return 0>p(a.prev,a,a.next)?0<=p(a,e,a.next)&&0<=p(a,a.prev,e):0>p(a,e,a.prev)||0>p(a,a.next,e)}function H(a,e,b,c,d){a=32767*(a-b)*d;e=32767*(e-c)*d;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;e=(e|e<<8)&16711935;e=(e|e<<4)&252645135;e=(e|e<<2)&858993459;return(a|a<<1)&1431655765|((e|e<<1)&1431655765)<<1}function w(a,
e){return a.x===e.x&&a.y===e.y}function T(a,e){return a.x-e.x}function P(a,e){const b=F.create(a.index,a.x,a.y),c=F.create(e.index,e.x,e.y),d=a.next,f=e.prev;a.next=e;e.prev=a;b.next=d;d.prev=b;c.next=b;b.prev=c;f.next=c;c.prev=f;return c}class F{constructor(){this.y=this.x=this.index=0;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}static create(a,e,b){const c=I<J.length?J[I++]:new F;c.index=a;c.x=e;c.y=b;c.prev=null;c.next=null;c.z=null;c.prevZ=null;c.nextZ=null;c.steiner=
!1;return c}}const J=[];let I=0;for(let a=0;8096>a;a++)J.push(new F);K.bufcut=function(a,e,b,c,d,f,m){I=0;var g=(c-b)*f,l=d&&d.length;const n=l?(d[0]-b)*f:g;var k=L(e,b,c,0,n,f,!0);if(k&&k.next!==k.prev){var h;if(l){const D=[];for(let v=0,Q=d.length;v<Q;v++){const z=L(e,b,c,d[v]*f,v<Q-1?d[v+1]*f:c*f,f,!1);z===z.next&&(z.steiner=!0);l=D;var q=l.push;let x=z,G=z;do{if(x.x<G.x||x.x===G.x&&x.y<G.y)G=x;x=x.next}while(x!==z);q.call(l,G)}D.sort(T);for(var t of D)if(c=t,d=S(c,k))c=P(d,c),B(c,c.next),k=B(d,
d.next)}if(g>80*f){var u=g=e[b*f];var r=h=e[1+b*f];for(t=f;t<n;t+=f)c=e[t+b*f],d=e[t+1+b*f],u=Math.min(u,c),r=Math.min(r,d),g=Math.max(g,c),h=Math.max(h,d);h=Math.max(g-u,h-r);h=0!==h?1/h:0}C(k,a,f,u,r,h,m,0)}};Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})});