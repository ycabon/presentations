// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../chunks/earcut ../../../../../../geometry/libtess ../../../../../../geometry/support/TileClipper ../../../../../../layers/graphics/OptimizedGeometry ../../definitions ../bufcut".split(" "),function(n,w,x,r,y,t,z){function u(b,a,c){let h=0;for(let d=1;d<c;d++)h+=(b[2*(a+d)]-b[2*(a+d-1)])*(b[2*(a+d)+1]+b[2*(a+d-1)+1]);return h}function v(b,a,c,h,d){let k=0;for(;c<h;c+=3){const e=2*(b[c]-d),f=2*(b[c+1]-d),g=2*(b[c+2]-d);k+=Math.abs((a[e]-a[g])*(a[f+1]-a[e+1])-(a[e]-a[f])*
(a[g+1]-a[e+1]))}return k}const p=new r.TileClipper(0,0,0,1,0),q=new r.TileClipper(0,0,0,1,0);p.setExtent(t.tileSize);q.setExtent(t.tileSize);n.area=u;n.clipLinesMarshall=function(b,a){q.setPixelMargin(a);const c=-a;a=t.tileSize+a;let h=[];var d=!1;if(!b.nextPath())return null;let k=!0;for(;k;){b.seekPathStart();const e=[];if(!b.pathSize)return null;q.reset(r.GeometryType.LineString);b.nextPoint();let f=b.x,g=b.y;if(d)q.moveTo(f,g);else{if(f<c||f>a||g<c||g>a){d=!0;continue}e.push({x:f,y:g})}let l=
!1;for(;b.nextPoint();)if(f=b.x,g=b.y,d)q.lineTo(f,g);else{if(f<c||f>a||g<c||g>a){l=!0;break}e.push({x:f,y:g})}if(l)d=!0;else{if(d){if(d=q.resultWithStarts())for(const m of d)h.push(m)}else h.push({line:e,start:0});k=b.nextPath();d=!1}}h=h.filter(e=>1<e.line.length);return 0===h.length?null:h};n.clipMarshall=function(b,a){if(null==b)return null;a:{var c=t.tileSize+128;var h=0;for(var d=0;d<b.lengths.length;d++){var k=b.lengths[d];for(var e=0;e<k;e++){const f=b.coords[2*(e+h)],g=b.coords[2*(e+h)+1];
if(-128>f||f>c||-128>g||g>c){c=!0;break a}}h+=k}c=!1}if(!c)return b;p.setPixelMargin(a);p.reset(r.GeometryType.Polygon);a=0;for(c=0;c<b.lengths.length;c++){h=b.lengths[c];d=b.coords[2*(0+a)];k=b.coords[2*(0+a)+1];p.moveTo(d,k);for(e=1;e<h;e++)d=b.coords[2*(e+a)],k=b.coords[2*(e+a)+1],p.lineTo(d,k);p.close();a+=h}c=p.result(!1);if(!c)return null;b=[];a=[];for(const f of c){c=0;for(const g of f)a.push(g.x),a.push(g.y),c++;b.push(c)}return new y(b,a)};n.triangleAreaArray=v;n.triangulate=function(b,a){const {coords:c,
lengths:h,hasIndeterminateRingOrder:d}=a;if(d)return!1;a=0;for(var k=0;k<h.length;){let g=k,l=h[k];k=u(c,a,l);for(var e=[];++g<h.length;){var f=h[g];const m=u(c,a+l,f);if(!(0<m))break;k+=m;e.push(a+l);l+=f}f=b.length;z.bufcut(b,c,a,a+l,e,2,0);e=v(b,c,f,b.length,0);k=Math.abs(k);if(1E-5<Math.abs((e-k)/Math.max(1E-7,k)))return b.length=0,!1;k=g;a+=l}return!0};n.triangulateEarcut=function(b,a,c){const {coords:h,lengths:d,hasIndeterminateRingOrder:k}=a;if(k)return!1;let e=0;for(var f=0;f<d.length;){let l=
f,m=d[f];for(f=[];++l<d.length;){var g=d[l];if(!(0<u(h,e+m,g)))break;f.push(e+m-e);m+=g}g=a.coords.slice(2*e,2*(e+m));f=w.earcut(g,f,2);for(const A of f)b.push(A+c+e);f=l;e+=m}return!0};n.triangulateLibtess=function(b){const {coords:a,lengths:c}=b;({buffer:b}=x.triangulate(a,c));return b};Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});