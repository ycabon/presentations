// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ./definitions ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject ../../../../webgl/VertexElementDescriptor".split(" "),function(n,v,p,h,w,x){class y{constructor(b,a){this._boundPart=null;const g=[];for(var e of a.vertex){var c=p.BufferObject.createVertex(b,h.Usage.STATIC_DRAW,e);g.push(c)}e=[];for(var d of a.index||[])c=p.BufferObject.createIndex(b,h.Usage.STATIC_DRAW,d),e.push(c);this.groups=[];for(const f of a.groups){let k;if(null!=f.index){if(!a.index)throw Error("No index data.");
({BYTES_PER_ELEMENT:d}=a.index[f.index]);2===d?k=h.DataType.UNSIGNED_SHORT:4===d&&(k=h.DataType.UNSIGNED_INT)}var l=null!=f.index?e[f.index]:null;d=new Map;c={};const q={};for(const z of f.attributes){const {name:r,count:A,type:B,offset:C,normalized:D,divisor:E,stride:F,vertex:t,location:G}=z,m=`vertex-buffer-${t}`;let u=c[m];u||=c[m]=[];const H=new x.VertexElementDescriptor(r,A,B,C,F,D,E);u.push(H);d.set(r,G);q[m]=g[t]}l=new w.VertexArrayObject(b,d,c,q,l);this.groups.push({...f,vertexArray:l,locations:d,
layout:c,indexing:k})}this.parts=a.parts}bind(b,a){this._boundPart=a;({group:a}=this.parts[this._boundPart]);({vertexArray:a}=this.groups[a]);b.bindVAO(a)}draw(b){if(null==this._boundPart)throw Error("Mesh.bind() has not been called.");const {start:a,count:g}=this.parts[this._boundPart],{group:e}=this.parts[this._boundPart],{indexing:c,primitive:d}=this.groups[e];c?b.drawElements(d,g,c,a*v.dataSizeInBytes[c]):b.drawArrays(d,a,g)}unbind(b){this._boundPart=null;b.bindVAO(null)}destroy(){for(const {vertexArray:b}of this.groups)b.dispose()}}
n.Mesh=y;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});