// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports"],function(d){function q(a){return a.split(" ").map((b,c)=>0<c?b.charAt(0).toUpperCase()+b.slice(1):b).join("")}function f(a){return"object"===typeof a?a.clone():a}class e{constructor(){this.uid=e.NodeCount++;this._debugName=null;this.isImplicit=this._isMutable=!1}get isMutable(){return this._isMutable}setMutable(){this._isMutable=!0;return this}setDebugName(a){this._debugName=a=q(a);this.isImplicit&&this.children[0]instanceof e&&this.children[0].setDebugName(a);return this}get debugInfo(){return{name:this._debugName??
""}}cloneInto(a){a._debugName=this._debugName;a._isMutable=this._isMutable;a.isImplicit=this.isImplicit;a.uid=this.uid}}e.NodeCount=0;class r extends e{constructor(){super(...arguments);this.shaderType="primitive-node"}}class h extends e{constructor(a){super();this.child=a;this.shaderType="scope-node"}get children(){return[this.child]}clone(){const a=new h(f(this.child));this.cloneInto(a);return a}}class k extends e{constructor(a){super();this.text=a;this.shaderType="text-node"}get children(){return[]}clone(){const a=
new k(this.text);this.cloneInto(a);return a}}class l extends e{constructor(a,b,c){super();this.property=a;this.target=b;this.returnType=c;this.shaderType="property-access-node"}get children(){const a=[this.target];"string"!==typeof this.property&&a.push(this.property);return a}clone(){const a=new l(this.property,f(this.target),this.returnType);this.cloneInto(a);return a}}class m extends e{constructor(a,b,c){super();this.condition=a;this.ifTrue=b;this.ifFalse=c;this.shaderType="condition-node"}get children(){return[this.condition,
this.ifTrue,this.ifFalse]}clone(){var a=f(this.ifTrue);const b=this.ifFalse?f(this.ifFalse):null;a=new m(this.condition,a,b);this.cloneInto(a);return a}}class n extends e{constructor(a,b,c,g){super();this.captureList=a;this.returnType=b;this.generator=g;this.shaderType="block-node";c&&(this.subgraph=new h(c))}get children(){return Object.keys(this.captureList).map(a=>this.captureList[a]).concat(this.subgraph??[])}clone(){var a={};for(const b in this.captureList)a[b]=f(this.captureList[b]);a=new n(a,
this.returnType,this.subgraph?f(this.subgraph.child):this.subgraph,this.generator);this.cloneInto(a);return a}}class p extends e{constructor(a,b,c,g,t,u=!1){super();this.token=a;this._children=b;this.isInfix=c;this.isPropertyAccess=g;this.returnType=t;this.isTernary=u;this.shaderType="function-node"}get children(){return this._children}clone(){const a=new p(this.token,this._children.map(f),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);this.cloneInto(a);return a}}d.ShaderBlockNode=
n;d.ShaderConditionNode=m;d.ShaderFunctionNode=p;d.ShaderNode=e;d.ShaderPrimitiveNode=r;d.ShaderPropertyAccessNode=l;d.ShaderScopeNode=h;d.ShaderTextNode=k;d.cloneShaderNode=f;d.setReachableUids=function(a,b){const c=[];for(c.push(b);c.length;)if(b=c.pop(),"object"===typeof b&&!a.has(b.uid)){a.add(b.uid);for(const g of b.children)c.push(g)}};Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});