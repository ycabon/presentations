// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../enums ../featureTechniqueUtils ../Technique ../mesh/MeshWriterRegistry ../text/TextShader ../../../../../../webgl/enums".split(" "),function(l,g,d,m,n,p,e){class q extends m.Technique{constructor(){super(...arguments);this.meshWriter=n.meshWriterRegistry.LabelMeshWriter;this.shaders={geometry:new p.TextShader};this.drawPhase=g.WGLDrawPhase.LABEL|g.WGLDrawPhase.LABEL_ALPHA;this.symbologyPlane=g.FeatureSymbologyDrawOrder.TEXT}render(b,c){const {context:f,painter:a}=b,h=d.getSelectionDefines(b),
k={...d.getFeaturePipelineState(b),stencil:{write:!1,test:{compare:e.CompareFunction.EQUAL,mask:255,ref:0,op:{fail:e.StencilOperation.KEEP,zFail:e.StencilOperation.KEEP,zPass:e.StencilOperation.REPLACE}}}};b={shader:this.shaders.geometry,uniforms:{...d.resolveDynamicUniforms(b,c.target,c.instance.getInput().geometry),...d.getFeatureUniforms(b,c.target),mosaicInfo:a.textureManager.getMosaicInfo(f,c.textureKey)},defines:{...h,isHaloPass:!1,isBackgroundPass:!0,isLabel:!0},optionalAttributes:c.instance.optionalAttributes,
useComputeBuffer:!1};a.setShader(b);a.setPipelineState(k);a.submitDraw(f,c);a.setShader({...b,defines:{...h,isHaloPass:!0,isBackgroundPass:!1,isLabel:!0}});a.setPipelineState(k);a.submitDraw(f,c);a.setShader({...b,defines:{...h,isHaloPass:!1,isBackgroundPass:!1,isLabel:!0}});a.setPipelineState(k);a.submitDraw(f,c)}}l.LabelTechnique=q;Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});