// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../../chunks/tslib.es6 ../../GraphShaderModule ../../graph/glsl ./AFeatureShader ./heatmapUtils ./hittestUtils".split(" "),function(g,d,e,a,n,r,t){class p extends n.FeatureVertexInput{}d.__decorate([e.location(5,a.Vec2)],p.prototype,"offset",void 0);class q extends n.FeatureFragmentInput{}class m extends e.UniformGroup{}d.__decorate([e.uniform(a.Float)],m.prototype,"radius",void 0);d.__decorate([e.uniform(a.Float)],m.prototype,"isFieldActive",void 0);class h extends n.AFeatureShader{constructor(){super(...arguments);
this.usesHalfFloatPrecision=!1}vertex(b){const {radius:k,isFieldActive:f}=this.kernelControls,c=b.offset,l=f.multiply(this.storage.getVVData(b.id).x).add((new a.Float(1)).subtract(f)),u=this.view.displayViewScreenMat3.multiply(new a.Vec3(b.pos,1)).add(this.view.displayViewMat3.multiply(new a.Vec3(c,0)).multiply(k)),v=this.clip(b.id);return{glPosition:new a.Vec4(u.xy,v,1),offset:c,fieldValue:l,color:new a.Vec4(0),...this.maybeRunHittest(b,{},null)}}fragment(b){const {offset:k,fieldValue:f}=b;var c=
a.length(k),l=a.step(c,new a.Float(1));c=(new a.Float(1)).subtract(c.multiply(c));c=c.multiply(c);l=l.multiply(c).multiply(f).multiply(new a.Float(r.getHeatmapCompressionFactor(this.usesHalfFloatPrecision)));return this.getFragmentOutput(new a.Vec4(l),b)}hittest(b){const {viewMat3:k,tileMat3:f}=this.view;b=k.multiply(f).multiply(new a.Vec3(b.pos,1));return t.hittestMarker(b.xy,this.kernelControls.radius,this.hittestRequest.position)}}d.__decorate([e.define],h.prototype,"usesHalfFloatPrecision",void 0);
d.__decorate([e.uniform(m)],h.prototype,"kernelControls",void 0);d.__decorate([d.__param(0,e.input(p))],h.prototype,"vertex",null);d.__decorate([d.__param(0,e.input(q))],h.prototype,"fragment",null);g.HeatmapAccumulateFragmentInput=q;g.HeatmapAccumulateShader=h;g.HeatmapAccumulateVertexInput=p;g.KernelControls=m;Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});