// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ./Manipulation ../../../../interactive/dragEventPipeline ../../../../interactive/GraphicManipulator ../../../../interactive/editGeometry/interfaces ../../../../interactive/support/utils".split(" "),function(n,p,q,y,r,z){class A extends p.Manipulation{constructor(b){super();this._view=b.view;this._tool=b.tool;this._graphic=b.graphic;this._manipulator=this._createManipulator();this.forEachManipulator(k=>this._tool.manipulators.add(k))}destroy(){this.forEachManipulator(b=>{this._tool.manipulators.remove(b);
b.destroy()});this._graphic=this._manipulator=this._view=this._tool=null}forEachManipulator(b){b(this._manipulator,p.ManipulatorType.TRANSLATE_XY)}createDragPipeline(b,k){let l=null,d=null,e=0,f=0,g=0;const {offsetX:t,offsetY:u,size:v}=z.getSymbolInfo(this._graphic.symbol);return q.createManipulatorDragEventPipeline(this._manipulator,(F,B)=>{B.next(a=>{if("start"===a.action){const c=b();l=c.editGeometryOperations;d=c.constraints}return a}).next(q.screenToMap(this._view)).next(a=>{const {x:c,y:h,z:w}=
a.mapEnd;if(d&&(c+t<d.xmin||h+u-v<d.ymin||c+t>d.xmax||h+u-v>d.ymax))return a;if("start"===a.action||0===e&&0===f&&0===g)e=a.mapStart.x,f=a.mapStart.y,g=a.mapStart.z;var m=c-e;const C=h-f,D=w-g;e=c;f=h;g=w;const x=[];for(const E of l.data.components)x.push(...E.vertices);m=l.moveVertices(x,m,C,D,"start"===a.action?r.AccumulationBehavior.NEW_STEP:r.AccumulationBehavior.ACCUMULATE_STEPS);k(a,m);return a})})}_createManipulator(){return new y.GraphicManipulator({view:this._view,graphic:this._graphic,selectable:!0,
cursor:"move"})}}n.DragManipulation=A;Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})});