// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../../../chunks/tslib.es6 ../../../../../../core/Accessor ../../../../../../core/reactiveUtils ../../../../../../core/accessorSupport/decorators/property ../../../../../../core/has ../../../../../../core/Logger ../../../../../../core/RandomLCG ../../../../../../core/accessorSupport/decorators/subclass ../../../../../../layers/support/TileKey ../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils ../../../../../support/layerViewUtils".split(" "),
function(a,b,n,l,c,w,x,y,p,q,m,r){a.FeatureServiceTiles2D=class extends n{get tiles(){const d=this.tilesCoveringView,e=null!=this.pointOfInterest?this.pointOfInterest:this.view.center;d.sort((h,f)=>m.distanceToTile(e,h)-m.distanceToTile(e,f));return d}_scaleEnabled(){return r.scaleBoundsPredicate(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!(this.view.ready&&this.view.featuresTilingScheme&&this.view.state&&null!=this.tileInfo&&this._scaleEnabled))return[];
const {spans:d,lodInfo:e}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:h}=e,f=[];for(const {row:t,colFrom:u,colTo:v}of d)for(let k=u;k<=v;k++){var g=e.normalizeCol(k);g=new q.TileKey(null,h,t,g);this.tileInfo.updateTileInfo(g);f.push(g)}return f}get tileInfo(){return this.view.featuresTilingScheme?.tileInfo??null}get tileSize(){return null!=this.tileInfo?this.tileInfo.size[0]:256}constructor(d){super(d);this.pointOfInterest=null}initialize(){this.addHandles(l.watch(()=>
this.view?.state?.viewpoint,()=>this.notifyChange("tilesCoveringView"),l.sync))}};b.__decorate([c.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"tiles",null);b.__decorate([c.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"_scaleEnabled",null);b.__decorate([c.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"tilesCoveringView",null);b.__decorate([c.property({readOnly:!0})],a.FeatureServiceTiles2D.prototype,"tileInfo",null);b.__decorate([c.property({readOnly:!0})],
a.FeatureServiceTiles2D.prototype,"tileSize",null);b.__decorate([c.property({constructOnly:!0})],a.FeatureServiceTiles2D.prototype,"view",void 0);b.__decorate([c.property({constructOnly:!0})],a.FeatureServiceTiles2D.prototype,"layer",void 0);b.__decorate([c.property()],a.FeatureServiceTiles2D.prototype,"pointOfInterest",void 0);a.FeatureServiceTiles2D=b.__decorate([p.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D")],a.FeatureServiceTiles2D);Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})});