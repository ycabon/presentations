// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/support/aaBoundingRect ../../../geometry/support/spatialReferenceUtils ../tiling/TileInfoView ../tiling/TileKey ../tiling/TileQueue ../tiling/TileStrategy ./LayerView2D ./support/Display ../../layers/LayerView ../../layers/RefreshableLayerView".split(" "),function(m,r,f,D,E,u,v,w,x,F,G,
H,y,z,A,B){const n=new Set,g=[],h=[];class C{constructor(a,b,e,c,k,d,l,p=[0,0],q=v.create()){this.id=a;this.level=b;this.row=e;this.col=c;this.world=k;this.resolution=d;this.scale=l;this.coords=p;this.bounds=q}}f=class extends B(y.LayerView2DMixin(A)){constructor(a){super(a);this._tileMap=new Map;this.layer=null;this.tiles=[]}initialize(){this.display=new z.Display(this);this.container.addChild(this.display)}get _tileInfoView(){const a=this.layer?.tileInfo;return a?new x(a):null}attach(){}detach(){}requestRender(){this.display.requestRender()}tilesChanged(a,
b){}supportsSpatialReference(a){const b=this.layer?.tileInfo;return b?w.equals(b.spatialReference,a):!0}async doRefresh(){}isUpdating(){return!1}update(a){var b=this._tileInfoView;const e=this.tiles;if(b){a=b.getTileCoverage(a.state,0);const {spans:k,lodInfo:d}=a??{};if(k?.length&&d)for(const {row:l,colFrom:p,colTo:q}of k)for(a=p;a<=q;a++){var c=d.normalizeCol(a);const t=d.getWorldForColumn(a);b=`${d.level}/${l}/${c}/${t}`;this._tileMap.has(b)||(c=new C(b,d.level,l,c,t,d.resolution,d.scale),d.getTileCoords(c.coords,
c,!1),d.getTileBounds(c.bounds,c,!0),this._tileMap.set(b,c),e.push(c),g.push(c));n.add(b)}}for(a=e.length-1;0<=a;a--)b=e[a],n.has(b.id)||(e.splice(a,1),h.push(b),this._tileMap.delete(b.id));if(g.length||h.length)this.tilesChanged(g,h),g.length=h.length=0;n.clear();this.requestRender()}moveStart(){}viewChange(){this.requestUpdate()}moveEnd(){}};m.__decorate([r.property()],f.prototype,"_tileInfoView",null);m.__decorate([r.property()],f.prototype,"layer",void 0);return f=m.__decorate([u.subclass("esri.views.2d.layers.BaseLayerView2D")],
f)});