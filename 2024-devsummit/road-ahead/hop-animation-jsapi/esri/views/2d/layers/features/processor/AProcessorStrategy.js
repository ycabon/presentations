// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../core/Evented","../../../../../geometry/support/aaBoundingBox","../../../../../layers/graphics/featureConversionUtils","../../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter"],function(e,f,g,h,k){class l{constructor(a){this.subscription=a;this.handledChunks=new Set}destroy(){}*features(){}}class m{constructor(a,b){this._source=a;this._attributeStore=b;this._sendStates=new Map;this.events=new f;this.featureAdapter=k.optimizedFeatureQueryEngineAdapter}destroy(){}onSubscribe(a){const b=
this.createState(a);this._sendStates.set(a.key.id,b);this.updateChunks()}onUnsubscribe(a){this._sendStates.get(a.key.id)?.destroy();this._sendStates.delete(a.key.id)}invalidate(){const a=Array.from(this._sendStates.values());this._sendStates.clear();for(const b of a)b.destroy(),this.onSubscribe(b.subscription)}invalidateAttributeData(){}getDisplayIds(a){a=new Set(a);const b=[];for(const c of this._sendStates.values())for(const d of c.features())a.has(d.objectId)&&(b.push(d.displayId),a.delete(d.objectId));
return b}getFeatureObjectIdsForAggregate(a){throw Error("InternalError: AggregateId lookup not supported");}forEach(a){for(const b of this._sendStates.values())for(const c of b.features())a(c)}forEachInBounds(a,b){}forEachBounds(a,b){const c=g.create();for(const d of a)(a=h.getBoundsOptimizedGeometry(c,d.geometry,!1,!1))&&b(a)}}e.AProcessorStrategy=m;e.ASendState=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});