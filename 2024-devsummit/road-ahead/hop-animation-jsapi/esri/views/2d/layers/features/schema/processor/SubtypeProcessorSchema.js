// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ./LabelMatcherSchema ./MatcherSchema ./StorageSchema ./VisualVariablesSchema ../../../../../webgl/capabilities".split(" "),function(h,k,l,m,n,p){async function q(c,{subtypeField:d,sublayers:b}){const e=await Promise.all(b.map(({renderer:a})=>l.createMatcherSchema(c,a)));return{type:"subtype",subtypeField:d,renderers:b.reduce((a,{subtypeCode:f},g)=>({...a,[f]:e[g]}),{})}}function r(c,d){const b=p.getWebGLCapabilities();return{type:"subtype",filters:c.filters,capabilities:{maxTextureSize:b.maxTextureSize},
subtypeField:d.subtypeField,target:"feature",bindings:d.sublayers.reduce((e,{renderer:a,subtypeCode:f})=>{a=m.createVVBindings(a);return{...e,[f]:a}},{})}}async function t(c,{subtypeField:d,sublayers:b}){const e=await Promise.all(b.map(a=>{const f=n.createVisualVariableUniforms(a.renderer);return k.createLabelMatcherSchema(c,{...a,geometryType:a.geometryType??null},f)}));return{type:"subtype",subtypeField:d,renderers:b.reduce((a,{subtypeCode:f},g)=>({...a,[f]:e[g]}),{})}}h.createSubtypeProcessorSchema=
async function(c,d,b,e){return{storage:r(d,b),mesh:{displayRefreshVersion:e,strategy:{type:"feature"},factory:{symbology:await q(c,b),labels:await t(c,b)},sortKey:null}}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});