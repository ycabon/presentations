// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../Color ../../../../core/colorUtils ../../../../core/reactiveUtils ./sliceToolUtils ../../interactive/Manipulator3D ../../interactive/manipulatorUtils ../../interactive/RenderObject ../../webgl-engine/lib/Attribute ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/lib/VertexAttribute ../../webgl-engine/materials/ImageMaterial ../../webgl-engine/materials/RibbonLineMaterial ../../../interactive/interfaces".split(" "),
function(p,z,q,r,A,B,t,k,u,C,v,w,x,D,E,l){function F({imageMaterial:f,calloutMaterial:e}){const {focusMultiplier:g,calloutLength:a,discRadius:b}=t.rotateManipulatorDefaults,d=b*g,m=(c,G)=>{const y=[0,1,2,2,3,0];return new C.Geometry(G,[[x.VertexAttribute.POSITION,new u.Attribute([a-c,-c,0,a+c,-c,0,a+c,c,0,a-c,c,0],y,3,!0)],[x.VertexAttribute.UV0,new u.Attribute([0,0,1,0,1,1,0,1],y,2,!0)]])},n=v.createPolylineGeometry(e,[[0,0,0],[a-b,0,0]]);e=v.createPolylineGeometry(e,[[0,0,0],[a-d,0,0]]);const h=
A.DidPointerMoveRecentlyFlag;return{autoScaleRenderObjects:!1,collisionPriority:1,collisionType:{type:"disc",direction:[0,0,1],offset:[a,0,0]},focusMultiplier:g,radius:b,renderObjects:[new k.RenderObject(m(b,f),l.ManipulatorStateFlags.Unfocused|h),new k.RenderObject(n,l.ManipulatorStateFlags.Unfocused|h),new k.RenderObject(m(d,f),l.ManipulatorStateFlags.Focused|h),new k.RenderObject(e,l.ManipulatorStateFlags.Focused|h)],state:h}}class H extends B.Manipulator3D{constructor(f,e){const g=new D.ImageMaterial({transparent:!0,
writeDepth:!1,renderOccluded:w.RenderOccludedFlag.Opaque,isDecoration:!0}),a=new E.RibbonLineMaterial({width:t.rotateManipulatorDefaults.calloutWidth,renderOccluded:w.RenderOccludedFlag.OccludeAndTransparent,isDecoration:!0});super({view:f,...F({imageMaterial:g,calloutMaterial:a})});this._currentTexture=null;this._themeHandle=r.watch(()=>f.effectiveTheme.accentColor,b=>{var d=q.multiplyOpacity(b,.5);const m=q.getContrast(b),n=this._currentTexture;d=e(d,m);g.setParameters({textureId:d.texture.id});
a.setParameters({color:z.toUnitRGBA(b)});this._currentTexture=d;n?.release()},r.initial)}destroy(){this._themeHandle.remove();this._currentTexture?.release();super.destroy()}}p.RotateManipulator=H;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});