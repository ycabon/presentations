// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/maybe ../../../../core/reactiveUtils ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/Logger ../../../../core/RandomLCG ../../../../core/accessorSupport/decorators/subclass ../../../../core/libs/gl-matrix-2/math/mat4 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../../geometry/support/vectorStacks ./settings ./sliceToolConfig ./sliceToolUtils ../../webgl-engine/materials/lineStippleUtils".split(" "),
function(c,d,w,t,f,e,B,C,D,x,u,h,y,k,l,v,m,z){c.SliceVisualization=class extends w{constructor(a){super(a);this._outlineVisualElement=this._gridVisualElement=null;this.showGrid=!1;this.preview=!0}initialize(){const a=this.analysisViewData;if(null==a)throw Error("expected internal object to be valid");this._gridVisualElement=m.createGridVisualElement(this.view);this._outlineVisualElement=m.createOutlineVisualElement(this.view);this.addHandles([f.watch(()=>{const b=null!=a.plane&&this.analysisViewData.visible,
{active:n}=this.analysisViewData,{preview:p,showGrid:q,view:r}=this;var {effectiveTheme:g}=r;const A=l.getGridColor(g);g=l.getOutlineColor(g);return{visible:b,active:n,preview:p,showGrid:q,gridColor:A,outlineColor:g}},b=>this._updateMaterials(b),f.syncAndInitial),f.watch(()=>a.plane,b=>this._updatePlane(b),f.syncAndInitial)],"internal")}destroy(){this._gridVisualElement=t.destroyMaybe(this._gridVisualElement);this._outlineVisualElement=t.destroyMaybe(this._outlineVisualElement);this.set("view",null)}_updatePlane(a){if(null!=
a){this._gridVisualElement.attached=!0;this._outlineVisualElement.attached=!0;var b=h.set(k.sv3d.get(),h.length(a.basis1),h.length(a.basis2),1);b=u.fromScaling(k.sm4d.get(),b);a=m.calculateBoundedPlaneTranslateRotate(a,k.sm4d.get());a=u.multiply(b,a,b);this._outlineVisualElement.transform=a;this._gridVisualElement.transform=a}}_updateMaterials({visible:a,active:b,preview:n,showGrid:p,gridColor:q,outlineColor:r}){this._outlineVisualElement.color=r;this._outlineVisualElement.width=n?v.planePreviewOutlineWidth:
v.planeOutlineWidth;this._outlineVisualElement.stipplePattern=b?null:z.createStipplePatternSimple(5);this._gridVisualElement.backgroundColor=l.planeColor;this._gridVisualElement.gridColor=p?q:y.ZEROS;this._gridVisualElement.visible=a;this._outlineVisualElement.visible=a}};d.__decorate([e.property()],c.SliceVisualization.prototype,"view",void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,"analysis",void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,"analysisViewData",
void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,"showGrid",void 0);d.__decorate([e.property()],c.SliceVisualization.prototype,"preview",void 0);c.SliceVisualization=d.__decorate([x.subclass("esri.views.3d.analysis.Slice.SliceVisualization")],c.SliceVisualization);Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});