// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/support/ray ../../../../chunks/sphere ./common ./InteractionType".split(" "),function(m,f,g,w,u,h,n){function p(a,b,e=h.defaultConstraintOptions){if(!a.state.isLocal)return 0;var d=a.state.constraints.distance;if(!a.pointsOfInterest.surfaceOrigin.renderLocation||Infinity===d)return 0;k.min=0;k.max=d;d=k;var c=e.interactionType;if(c!==n.InteractionType.NONE){var {min:q,max:x}=d,{interactionStartCamera:r,
interactionFactor:y}=e;if(r){e=c===n.InteractionType.ZOOM||c===n.InteractionType.PAN;c=p(a,r);var v=0===c?0:t(a,r);d.min=q;d.max=x;h.adjustRangeForInteraction(c,v,e,y,.05*v,d)}}a=t(a,b);a=k.max-a;return-1E-6<=a?0:a}function t(a,b){a=a.pointsOfInterest.surfaceOrigin;return a.renderLocation?f.distance(b.eye,a.renderLocation):0}const k={min:0,max:0},z=g.create(),A=g.create(),B=g.create(),C=g.create(),l=g.create();m.applyDistanceConstraint=function(a,b,e=h.defaultConstraintOptions){var d=p(a,b,e);if(0===
d)return!1;var c=a.pointsOfInterest.surfaceOrigin;if(!c.renderLocation)return!1;d=t(a,b)+d;const q=f.copy(z,b.eye);e=h.interactionDirectionTowardsConstraintMinimization(b,e.interactionDirection,f.direction(C,b.eye,c.renderLocation),B);if(!u.intersectRay(u.fromCenterAndRadius(c.renderLocation,d),w.wrap(b.eye,e),l))return!1;b.eye=l;c=f.subtract(A,b.eye,q);b.center=f.add(l,b.center,c);c=a.renderCoordsHelper.getAltitude(b.center);a=a.renderCoordsHelper.intersectInfiniteManifold(b.ray,c,l);null!=a&&(b.center=
a);return!0};m.getDistanceConstraintError=p;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})});