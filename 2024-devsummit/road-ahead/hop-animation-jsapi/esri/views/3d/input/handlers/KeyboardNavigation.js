// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../ViewingMode","../../state/controllers/GamepadKeyboardController","../../../input/InputHandler","../../../input/VisibilityChange"],function(e,f,g,h,k){var c;(function(a){a[a.LEFT=0]="LEFT";a[a.RIGHT=1]="RIGHT";a[a.FORWARD=2]="FORWARD";a[a.BACKWARD=3]="BACKWARD";a[a.UP=4]="UP";a[a.DOWN=5]="DOWN";a[a.HEADINGLEFT=6]="HEADINGLEFT";a[a.HEADINGRIGHT=7]="HEADINGRIGHT";a[a.TILTUP=8]="TILTUP";a[a.TILTDOWN=9]="TILTDOWN";a[a.ZOOMIN=10]="ZOOMIN";a[a.ZOOMOUT=11]="ZOOMOUT"})(c||={});
class l extends h.InputHandler{constructor(a,b){super(!0);this._view=a;this._disableMovements={pan:!0,zoom:!1,ascend:!0,rotate:!1,mode:f.ViewingMode.Local};this._keyToNumber={[b.left]:c.LEFT,[b.right]:c.RIGHT,[b.forward]:c.FORWARD,[b.backward]:c.BACKWARD,[b.up]:c.UP,[b.down]:c.DOWN,[b.headingLeft]:c.HEADINGLEFT,[b.headingRight]:c.HEADINGRIGHT,[b.tiltUp]:c.TILTUP,[b.tiltDown]:c.TILTDOWN,[b.zoomIn]:c.ZOOMIN,[b.zoomOut]:c.ZOOMOUT};this.registerIncoming("key-down",null,d=>this._handleKeyDown(d));this.registerIncoming("key-up",
null,d=>this._handleKeyUp(d));this.registerIncoming("blur",null,()=>this._handleStop());this._visibilityHandle=k.onVisibilityChange(d=>d?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove();this._handleStop()}_handleKeyDown(a){if(!a.data.native.ctrlKey&&!a.data.native.metaKey){var b=this._keyToNumber[a.data.key];null!=b&&(this._cameraControllerKeyboard&&this._cameraControllerKeyboard.active||(this._cameraControllerKeyboard=new g.GamepadKeyboardController({view:this._view,disableMovements:this._disableMovements}),
this._view.state.switchCameraController(this._cameraControllerKeyboard)),this._cameraControllerKeyboard.active&&(this._cameraControllerKeyboard.activateDirection(b),a.stopPropagation()))}}_handleStop(){this._cameraControllerKeyboard?.active&&(this._cameraControllerKeyboard.finishController(),this._cameraControllerKeyboard=null)}_handleKeyUp(a){if(!a.data.native.ctrlKey&&!a.data.native.metaKey){var b=this._keyToNumber[a.data.key];null!=b&&this._cameraControllerKeyboard&&this._cameraControllerKeyboard.active&&
(this._cameraControllerKeyboard.deactivateDirection(b),a.stopPropagation())}}}e.KeyboardNavigation=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});