// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../support/elevationInfoUtils","../../../../interactive/dragEventPipeline"],function(d,f,g){class h{constructor(){this._next=this._lastDragEvent=this._elevationInfo=this._view=null;this._enabled=!1}get enabled(){return this._enabled}set enabled(b){if(this._enabled!==b&&null!=this._lastDragEvent&&null!=this._next){const c=this._lastDragEvent.mapEnd,a=this._snap(this._lastDragEvent.screenEnd);null!=a&&this._next.execute({action:"update",mapStart:this._lastDragEvent.mapStart,
mapEnd:!0===b?a:c,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd})}this._enabled=b}_snap(b){b=null!=this._view?this._view.toMap(b,{exclude:[]}):null;null!=b&&null!=this._view&&(b.z=f.getZForElevationMode(b,this._view,this._elevationInfo));return b}createDragEventPipelineStep(b,c){this._view=b;this._elevationInfo=c;this._lastDragEvent=null;this._next=b=new g.EventPipeline;return[a=>{this._lastDragEvent="end"!==a.action?{...a}:null;if(this._enabled){const e=this._snap(a.screenEnd);
return null!=e?{action:a.action,mapStart:a.mapStart,mapEnd:e,screenStart:a.screenStart,screenEnd:a.screenEnd}:null}return{action:a.action,mapStart:a.mapStart,mapEnd:a.mapEnd,screenStart:a.screenStart,screenEnd:a.screenEnd}},b]}}d.SnapToScene=h;Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});