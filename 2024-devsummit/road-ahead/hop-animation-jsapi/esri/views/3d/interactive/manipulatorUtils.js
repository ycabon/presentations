// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../core/colorUtils ../../../core/libs/gl-matrix-2/math/mat4 ../../../chunks/vec32 ../../../geometry/support/vectorStacks ../../../layers/graphics/hydratedFeatures ./Manipulator3D ./RenderObject ../layers/graphics/graphicUtils ../webgl-engine/lib/basicInterfaces ../webgl-engine/lib/GeometryUtil ../webgl-engine/lib/Material ../webgl-engine/materials/ColorMaterial ../webgl-engine/materials/ShadedColorMaterial ../../interactive/interfaces".split(" "),function(e,l,t,g,f,u,v,w,x,h,
y,m,n,z,A){function p(a,c=m.RenderOccludedFlag.OccludeAndTransparent,b=!0){const d=l.colorVectorToColorAndOpacity(a);a=!(1>a[3]);return b?new z.ShadedColorMaterial({color:d,writeDepth:a,cullFace:h.CullFaceOptions.Back,renderOccluded:c,isDecoration:!0}):new n.ColorMaterial({color:d,writeDepth:a,cullFace:h.CullFaceOptions.Back,renderOccluded:c,isDecoration:!0})}function q(a,c,b,d){a=g.normalize(f.sv3d.get(),a);c=g.normalize(f.sv3d.get(),c);const k=g.cross(f.sv3d.get(),a,c);d[0]=a[0];d[1]=a[1];d[2]=
a[2];d[3]=0;d[4]=c[0];d[5]=c[1];d[6]=c[2];d[7]=0;d[8]=k[0];d[9]=k[1];d[10]=k[2];d[11]=0;d[12]=b[0];d[13]=b[1];d[14]=b[2];d[15]=1;return d}function r(a,c){const b=a.getViewForGraphic(c);return null!=b&&"computeAttachmentOrigin"in b?b.computeAttachmentOrigin(c,a.spatialReference):null}const B=Object.freeze({calloutLength:40,calloutWidth:1,discRadius:27,focusMultiplier:1.1}),C=Object.freeze({autoScaleRenderObjects:!1,worldSized:!0});e.calculateInputRotationTransform=function(a,c,b,d){a=g.subtract(f.sv3d.get(),
a,b);d=g.cross(f.sv3d.get(),d,a);b=q(a,d,b,f.sm4d.get());t.invert(b,b);c=g.transformMat4(f.sv3d.get(),c,b);return Math.atan2(c[1],c[0])};e.calculateTranslateRotateFromBases=q;e.createManipulatorMaterial=p;e.createManipulatorOutlineMaterial=function(a,c=m.RenderOccludedFlag.OccludeAndTransparent){a=l.colorVectorToColorAndOpacity(a);return new n.ColorMaterial({color:a,writeDepth:!0,cullFace:h.CullFaceOptions.Front,renderOccluded:c,isDecoration:!0})};e.createSphereManipulator=function(a,c,b=A.ManipulatorStateCustomFlags.None){c=
p(c);b=[new w.RenderObject(y.createSphereGeometry(c,1,32,32),b)];return new v.Manipulator3D({view:a,renderObjects:b})};e.getGraphicAttachmentOrigin=r;e.placeAtGraphic=function(a,c,b){a=r(a,b);null!=a?c.elevationAlignedLocation=a:(b=b.geometry,null!=b&&(b="mesh"===b.type?b.anchor:x.computeCentroid(b),null!=b&&(c.location=u.hydrateGeometry(b))))};e.rotateManipulatorDefaults=B;e.worldScaledManipulatorSettings=C;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});