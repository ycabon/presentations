// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../chunks/vec42 ../../../../core/libs/gl-matrix-2/factories/vec4f64 ./Object3DVisualElement ../../layers/graphics/ElevationContext ../../support/renderInfoUtils/point ../../webgl-engine/lib/basicInterfaces ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/lib/Material ../../webgl-engine/materials/ShadedColorMaterial".split(" "),function(g,n,p,e,h,q,r,t,k,l,u,m){class v extends q.Object3DVisualElement{constructor(a){super(a);
this.view=null;this._renderOccluded=u.RenderOccludedFlag.OccludeAndTransparent;this._spatialReference=this._vertices=null;this._color=h.fromArray([1,127/255,0,1]);this._size=11;this._outlineColor=h.fromArray([0,0,0,.5]);this._outlineSize=1;this._elevationInfo=null;this.applyProperties(a)}get renderOccluded(){return this._renderOccluded}set renderOccluded(a){a!==this._renderOccluded&&(this._renderOccluded=a,this._updateMaterial(),this._updateOutlineMaterial())}get vertices(){return this._vertices}set vertices(a){this._vertices=
a;this.recreateGeometry()}get spatialReference(){return this._spatialReference}set spatialReference(a){this._spatialReference=a;this.recreateGeometry()}get color(){return this._color}set color(a){e.exactEquals(a,this._color)||(e.copy(this._color,a),this._updateMaterial())}get size(){return this._size}set size(a){a!==this._size&&(this._size=a,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(a){e.exactEquals(a,this._outlineColor)||(e.copy(this._outlineColor,a),this._updateOutlineMaterial())}get outlineSize(){return this._outlineSize}set outlineSize(a){a!==
this._outlineSize&&(this._outlineSize=a,this._updateOutlineMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(a){this._elevationInfo=a;this.recreateGeometry()}get _vertexMaterialParameters(){return{color:this._color,screenSizeScale:this.size,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}get _vertexOutlineMaterialParameters(){return{color:this._outlineColor,screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateMaterial(){this.attached&&
this._vertexMaterial.setParameters(this._vertexMaterialParameters)}_updateOutlineMaterial(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)}_createRenderGeometries(){var a=this.vertices;if(null==a||0===a.length)return[];var b=t.geometryToRenderInfo(a,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,r.ElevationContext.fromElevationInfo(this.elevationInfo));a=[];const f=b.numVertices;b=b.position;for(let d=0;d<f;++d){var c=
n.set(w,b[3*d],b[3*d+1],b[3*d+2]);const x=l.createSphereGeometry(this._vertexMaterial,.5,16,16,{offset:c});c=l.createSphereGeometry(this._vertexOutlineMaterial,.5,16,16,{offset:c});a.push({vertexGeometry:x,vertexOutlineGeometry:c})}return a}createGeometries(a){const b=this._createRenderGeometries();for(const {vertexGeometry:f,vertexOutlineGeometry:c}of b)a.addGeometry(f),a.addGeometry(c)}createExternalResources(){this._vertexMaterial=new m.ShadedColorMaterial({...this._vertexMaterialParameters,writeDepth:!0,
cullFace:k.CullFaceOptions.Back,screenSizeEnabled:!0});this._vertexOutlineMaterial=new m.ShadedColorMaterial({...this._vertexOutlineMaterialParameters,forceTransparentMode:!0,writeDepth:!0,cullFace:k.CullFaceOptions.Front,screenSizeEnabled:!0,shadingEnabled:!1})}destroyExternalResources(){this._vertexOutlineMaterial=this._vertexMaterial=null}forEachExternalMaterial(a){a(this._vertexMaterial);a(this._vertexOutlineMaterial)}}const w=p.create();g.VerticesVisualElement=v;Object.defineProperty(g,Symbol.toStringTag,
{value:"Module"})});