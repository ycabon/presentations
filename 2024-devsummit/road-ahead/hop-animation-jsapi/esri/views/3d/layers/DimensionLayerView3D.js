// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("require ../../../chunks/tslib.es6 ../../../core/asyncUtils ../../../core/Error ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ./LayerView3D ../../layers/DimensionLayerView ../../layers/LayerView".split(" "),function(l,e,m,n,g,h,k,f,p,b,q,r){b=class extends b.LayerView3D(q(r)){constructor(a){super(a);this.type="dimension-3d";this._analysisModule=null}initialize(){this.addHandles(k.watch(()=>
this.layer.source,a=>{this._destroyAnalysisView();null!=a&&this._createAnalysisView(a)},k.syncAndInitial),"analysis-view-handles")}destroy(){this.removeHandles("analysis-view-handles");this._destroyAnalysisView()}isUpdating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}async whenAnalysisView(){if(null!=this.analysisView)return this.analysisView;if(null!=this._createAnalysisViewTask)return this._createAnalysisViewTask.promise;throw new n("layerview:no-analysisview-for-analysis",
"The analysis has not been set on the DimensionLayer of this layer view");}_createAnalysisView(a){const d=m.createTask(async c=>{this.analysisView=await this._createAnalysisViewPromise(a,c);this._createAnalysisViewTask===d&&(this._createAnalysisViewTask=null);return this.analysisView});this.addResolvingPromise(d.promise);this._createAnalysisViewTask=d}_destroyAnalysisView(){this.analysisView=g.destroyMaybe(this.analysisView);this._createAnalysisViewTask=g.abortMaybe(this._createAnalysisViewTask)}async _createAnalysisViewPromise(a,
d){var c=this._analysisModule;null==c&&(this._analysisModule=c=await this._loadAnalysisModule());a=new c.default({analysis:a,view:this.view,parent:this});await a.when();if(h.isAborted(d))throw a.destroy(),h.createAbortError();return a}_loadAnalysisModule(){return new Promise((a,d)=>l(["../analysis/DimensionAnalysisView3D"],c=>a(Object.freeze(Object.defineProperty({__proto__:null,default:c},Symbol.toStringTag,{value:"Module"}))),d))}};e.__decorate([f.property()],b.prototype,"type",void 0);e.__decorate([f.property()],
b.prototype,"analysisView",void 0);e.__decorate([f.property()],b.prototype,"_createAnalysisViewTask",void 0);return b=e.__decorate([p.subclass("esri.views.3d.layers.DimensionLayerView3D")],b)});