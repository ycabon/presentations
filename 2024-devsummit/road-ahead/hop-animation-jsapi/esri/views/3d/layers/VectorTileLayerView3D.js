// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/engine/vectorTiles/SchemaHelper":function(){define(["exports"],function(m){class w{constructor(r,b,e){this._scale=r;this._shift=b;this._levelShift=e}getLevelRowColumn(r){const b=this.getLevelShift(r[0]),e=this._shift+b;return e?[r[0]-b,r[1]>>e,r[2]>>e]:r}getLevelShift(r){return Math.min(r,this._levelShift)}getOffset(r,b){let e=0;var f=0;const d=this._shift+this.getLevelShift(r[0]);d&&(f=(1<<d)-1,b/=this._scale*(1<<d-1),e=(r[2]&f)*b,f=(r[1]&f)*b);return[e,f]}getScale(r){return this._scale*
(1<<this._shift+this.getLevelShift(r))}}m.SchemaHelper=w;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/TileHandler3D":function(){define("../../../../core/MemCache ../../../../core/promiseUtils ../../../../core/libs/gl-matrix-2/factories/mat3f32 ../../../../geometry/support/aaBoundingRect ./TileHandler ./VectorTile ./decluttering/jobsUtil ../../tiling/TileInfoViewPOT ../../tiling/TileKey".split(" "),function(m,w,r,b,e,f,d,c,g){class h extends e.TileHandler{constructor(k,
l,q,v){super(k,l,q,k.tileInfo.lods.length-1);this._memCache=v;this._ongoingTileRequests=new Map;this._ongoingRequestToController=new Map;this._tileInfoView=new c(k.tileInfo,k.fullExtent)}destroy(){super.destroy();this._ongoingRequestToController.forEach(k=>k.abort());this._ongoingRequestToController.clear();this._ongoingTileRequests.clear()}async getVectorTile(k,l,q,v){l=new g(k,l,q,0);let p=this._memCache.get(l.id);if(null!=p)return p.retain(),p;q=await this._getVectorTileData(l);w.throwIfAborted(v);
if(!this._layer)return null;p=this._memCache.get(l.id);if(null!=p)return p.retain(),p;v=this._layer.tileInfo.getTileBounds(b.create(),l);k=this._tileInfoView.getTileResolution(k);p=new f.VectorTile(l,k,v[0],v[3],512,512,this._styleRepository,this._memCache);q?(p.setData(q),p.retain(),this._memCache.put(l.id,p,p.usedMemory,m.MinPriority)):p.setData(null);p.neededForCoverage=!0;p.transforms.tileUnitsToPixels=r.fromValues(.125,0,0,0,.125,0,0,0,1);d.declutterSingleTile(p);return p}_getVectorTileData(k){const l=
k.id;if(this._ongoingTileRequests.has(l))return this._ongoingTileRequests.get(l);const q=new AbortController;k=this._getParsedVectorTileData(k,{signal:q.signal}).then(v=>{this._ongoingTileRequests.delete(l);this._ongoingRequestToController.delete(l);return v}).catch(()=>{this._ongoingTileRequests.delete(l);this._ongoingRequestToController.delete(l);return null});this._ongoingTileRequests.set(l,k);this._ongoingRequestToController.set(l,q);return k}_getParsedVectorTileData(k,l){return this.fetchTileData(k,
l).then(q=>this.parseTileData({key:k,data:q},l))}}return h})},"esri/views/2d/engine/vectorTiles/TileHandler":function(){define("exports ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/urlUtils ../../../../core/workers/workers ./GlyphMosaic ./GlyphSource ./SpriteMosaic ../../tiling/TileKey".split(" "),function(m,w,r,b,e,f,d,c,g){function h(l){return()=>l.abort()}class k{constructor(l,q,v,p){this._layer=l;this._styleRepository=q;this.devicePixelRatio=v;this._sourceDataMaxLOD=p;
this._inputSignalEventListener=this._startOptionsInputSignal=this._spriteSourceAbortController=this._connection=this._glyphMosaic=this._spriteMosaic=null}destroy(){this._connection?.close();this._layer=this._styleRepository=this._connection=null;this._spriteMosaic?.destroy();this._glyphMosaic=this._spriteMosaic=null;this._spriteSourceAbortController=w.abortMaybe(this._spriteSourceAbortController);this._spriteSourcePromise=null;this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",
this._inputSignalEventListener);this._inputSignalEventListener=this._startOptionsInputSignal=null}get spriteMosaic(){return this._spriteSourcePromise.then(()=>this._spriteMosaic)}get glyphMosaic(){return this._glyphMosaic}async start(l){this._requestSprite(l);var q=this._layer.currentStyleInfo.glyphsUrl;q=new d(q?b.addQueryParameters(q,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new f(1024,1024,q);this._broadcastPromise=e.open("WorkerTileHandler",{client:this,
schedule:l.schedule,signal:l.signal}).then(v=>{this._layer&&(this._connection?.close(),this._connection=v,this._layer&&!this._connection.closed&&(v=v.broadcast("setStyle",{style:this._layer.currentStyleInfo.style,sourceDataMaxLOD:this._sourceDataMaxLOD},l),Promise.all(v).catch(p=>r.throwIfNotAbortError(p))))})}_requestSprite(l){this._spriteSourceAbortController?.abort();const q=new AbortController;this._spriteSourceAbortController=q;const v=l?.signal;this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",
this._inputSignalEventListener);this._startOptionsInputSignal=null;v&&(this._inputSignalEventListener=h(q),v.addEventListener("abort",this._inputSignalEventListener,{once:!0}));const {signal:p}=q;this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,{...l,signal:p});this._spriteSourcePromise.then(z=>{r.throwIfAbortError(p);this._spriteMosaic=new c(1024,1024,250);this._spriteMosaic.setSpriteSource(z)})}async updateStyle(l){await this._broadcastPromise;return this._broadcastPromise=
Promise.all(this._connection.broadcast("updateStyle",l))}setSpriteSource(l){const q=new c(1024,1024,250);q.setSpriteSource(l);this._spriteMosaic=q;this._spriteSourcePromise=Promise.resolve(l);this._spriteSourceAbortController=null;return q}async setStyle(l,q,v){await this._broadcastPromise;this._styleRepository=l;this._sourceDataMaxLOD=v;this._requestSprite();l=new d(this._layer.currentStyleInfo.glyphsUrl?b.addQueryParameters(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,
token:this._layer.apiKey}):null);this._glyphMosaic=new f(1024,1024,l);return this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",{style:q,sourceDataMaxLOD:this._sourceDataMaxLOD}))}async fetchTileData(l,q){l=await this._getRefKeys(l,q);return this._getSourcesData(Object.keys(this._layer.sourceNameToSource),l,q)}async fetchTilePBFs(l){const q=Object.keys(this._layer.sourceNameToSource),v={};l=await this._getRefKeys(l,v);const p=[],z=[];for(let F=0;F<l.length;F++)if(null==l[F].value||
null==q[F])z.push(null);else{const B=l[F].value,D=this._getTilePayload(B,q[F],v);D.then(G=>{p.push({...G,key:B})});z.push(D)}return Promise.all(z).then(()=>p)}async parseTileData(l,q){const v=l&&l.data;if(!v)return null;const {sourceName2DataAndRefKey:p,transferList:z}=v;return 0===Object.keys(p).length?null:this._broadcastPromise.then(()=>this._connection.invoke("createTileAndParse",{key:l.key.id,sourceName2DataAndRefKey:p,styleLayerUIDs:l.styleLayerUIDs},{...q,transferList:z}))}async getSprites(l){await this._spriteSourcePromise;
return this._spriteMosaic.getSpriteItems(l)}getGlyphs(l){return this._glyphMosaic.getGlyphItems(l.font,l.codePoints)}async _getTilePayload(l,q,v){l=g.pool.acquire(l.id);const p=this._layer.sourceNameToSource[q],{level:z,row:F,col:B}=l;g.pool.release(l);try{return{protobuff:await p.requestTile(z,F,B,v),sourceName:q}}catch(D){if(r.isAbortError(D))throw D;return{protobuff:null,sourceName:q}}}async _getRefKeys(l,q){const v=this._layer.sourceNameToSource,p=[];for(const z in v){const F=v[z].getRefKey(l,
q);p.push(F)}return r.eachAlways(p)}_getSourcesData(l,q,v){const p=[];for(let z=0;z<q.length;z++)if(null==q[z].value||null==l[z])p.push(null);else{const F=this._getTilePayload(q[z].value,l[z],v);p.push(F)}return r.eachAlways(p).then(z=>{const F={},B=[];for(let D=0;D<z.length;D++){const G=z[D].value;G&&G.protobuff&&0<G.protobuff.byteLength&&(F[G.sourceName]={refKey:q[D].value.id,protobuff:G.protobuff},B.push(G.protobuff))}return{sourceName2DataAndRefKey:F,transferList:B}})}}m.TileHandler=k;Object.defineProperty(m,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/GlyphMosaic":function(){define(["./RectangleBinPack","../webgl/Rect","../../../webgl/enums","../../../webgl/Texture","../../../webgl/TextureDescriptor"],function(m,w,r,b,e){class f{constructor(d,c,g){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=d;this.height=c;this._glyphSource=g;this._binPack=new m(d-4,c-4);this._glyphData.push(new Uint8Array(d*
c));this._dirties.push(!0);this._textures.push(void 0)}getGlyphItems(d,c){const g=[],h=this._glyphSource,k=new Set,l=1/256;for(const v of c)k.add(Math.floor(v*l));const q=[];k.forEach(v=>{const p=d+v;this._rangePromises.has(p)?q.push(this._rangePromises.get(p)):(v=h.getRange(d,v).then(()=>{this._rangePromises["delete"](p)},()=>{this._rangePromises["delete"](p)}),this._rangePromises.set(p,v),q.push(v))});return Promise.all(q).then(()=>{let v=this._glyphIndex[d];v||(v={},this._glyphIndex[d]=v);for(const D of c){var p=
v[D];if(p){g[D]={sdf:!0,rect:p.rect,metrics:p.metrics,page:p.page,code:D};continue}var z=h.getGlyph(d,D);if(!z?.metrics)continue;p=z.metrics;let G;if(0===p.width)G=new w(0,0,0,0);else{const H=p.width+6,M=p.height+6;var F=H%4?4-H%4:4,B=M%4?4-M%4:4;1===F&&(F=5);1===B&&(B=5);G=this._binPack.allocate(H+F,M+B);G.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),
this._textures.push(void 0),this._binPack=new m(this.width-4,this.height-4),G=this._binPack.allocate(H+F,M+B));F=this._glyphData[this._currentPage];z=z.bitmap;let N;if(z)for(let u=0;u<M;u++){B=H*u;N=this.width*(G.y+u+1)+G.x;for(let y=0;y<H;y++)F[N+y+1]=z.at(B+y)}}v[D]={rect:G,metrics:p,tileIDs:null,page:this._currentPage};g[D]={sdf:!0,rect:G,metrics:p,page:this._currentPage,code:D};this._dirties[this._currentPage]=!0}return g})}removeGlyphs(d){for(const c in this._glyphIndex){const g=this._glyphIndex[c];
if(!g)continue;let h;for(const k in g)if(h=g[k],h.tileIDs["delete"](d),0===h.tileIDs.size){const l=this._glyphData[h.page],q=h.rect;let v,p;for(let z=0;z<q.height;z++)for(v=this.width*(q.y+z)+q.x,p=0;p<q.width;p++)l[v+p]=0;delete g[k];this._dirties[h.page]=!0}}}bind(d,c,g,h=0){if(!this._textures[g]){var k=new e.TextureDescriptor;k.pixelFormat=r.PixelFormat.ALPHA;k.wrapMode=r.TextureWrapMode.CLAMP_TO_EDGE;k.width=this.width;k.height=this.height;this._textures[g]=new b.Texture(d,k,new Uint8Array(this.width*
this.height))}k=this._textures[g];k.setSamplingMode(c);this._dirties[g]&&k.setData(this._glyphData[g]);d.bindTexture(k,h);this._dirties[g]=!1}destroy(){this.dispose()}dispose(){this._glyphData.length=0;this._binPack=null;for(const d of this._textures)d&&d.dispose();this._textures.length=0}}return f})},"esri/views/2d/engine/vectorTiles/RectangleBinPack":function(){define(["../webgl/Rect"],function(m){class w{constructor(r,b){this._height=this._width=0;this._free=[];this._width=r;this._height=b;this._free.push(new m(0,
0,r,b))}get width(){return this._width}get height(){return this._height}allocate(r,b){if(r>this._width||b>this._height)return new m;let e=null,f=-1;for(let d=0;d<this._free.length;++d){const c=this._free[d];r<=c.width&&b<=c.height&&(null===e||c.y<=e.y&&c.x<=e.x)&&(e=c,f=d)}if(null===e)return new m;this._free.splice(f,1);e.width<e.height?(e.width>r&&this._free.push(new m(e.x+r,e.y,e.width-r,b)),e.height>b&&this._free.push(new m(e.x,e.y+b,e.width,e.height-b))):(e.width>r&&this._free.push(new m(e.x+
r,e.y,e.width-r,e.height)),e.height>b&&this._free.push(new m(e.x,e.y+b,r,e.height-b)));return new m(e.x,e.y,r,b)}release(r){for(let b=0;b<this._free.length;++b){const e=this._free[b];if(e.y===r.y&&e.height===r.height&&e.x+e.width===r.x)e.width+=r.width;else if(e.x===r.x&&e.width===r.width&&e.y+e.height===r.y)e.height+=r.height;else if(r.y===e.y&&r.height===e.height&&r.x+r.width===e.x)e.x=r.x,e.width+=r.width;else if(r.x===e.x&&r.width===e.width&&r.y+r.height===e.y)e.y=r.y,e.height+=r.height;else continue;
this._free.splice(b,1);this.release(r)}this._free.push(r)}}return w})},"esri/views/2d/engine/vectorTiles/GlyphSource":function(){define(["../../../../request","../../../../core/pbf"],function(m,w){class r{constructor(d){this._metrics=[];if(d){for(var c=new Map,g=0;d.next();)switch(d.tag()){case 1:const k=d.getMessage();for(;k.next();)switch(k.tag()){case 3:var h=k.getMessage();let l,q,v,p,z,F,B;for(;h.next();)switch(h.tag()){case 1:l=h.getUInt32();break;case 2:q=h.getBytes();break;case 3:v=h.getUInt32();
break;case 4:p=h.getUInt32();break;case 5:z=h.getSInt32();break;case 6:F=h.getSInt32();break;case 7:B=h.getUInt32();break;default:h.skip()}h.release();l&&(h=q?.length??0,this._metrics[l]={width:v,height:p,left:z,top:F,advance:B,startOffset:g,length:h},c.set(l,q),g+=h);break;default:k.skip()}k.release();break;default:d.skip()}d=new Uint8Array(g);g=this._metrics;for(const [k,l]of c){const {startOffset:q,length:v}=g[k];if(l)for(c=0;c<v;++c)d[q+c]=l[c]}this._allBitmaps=d}else this._allBitmaps=null}getMetrics(d){return this._metrics[d]}getBitmap(d){if(this._allBitmaps&&
(d=this._metrics[d],void 0!==d)){var {startOffset:c,length:g}=d;if(0!==g)return new f(this._allBitmaps,c,g)}}}class b{constructor(){this._ranges=[]}get ranges(){return this._ranges}getRange(d){return this._ranges[d]}addRange(d,c){this._ranges[d]=c}}class e{constructor(d){this._glyphInfo={};this._baseURL=d}getRange(d,c){const g=this._getFontStack(d);if(g.getRange(c))return Promise.resolve();const h=256*c,k=h+255;if(this._baseURL)return d=this._baseURL.replace("{fontstack}",d).replace("{range}",h+"-"+
k),m(d,{responseType:"array-buffer"}).then(l=>{g.addRange(c,new r(new w(new Uint8Array(l.data),new DataView(l.data))))}).catch(()=>{g.addRange(c,new r)});g.addRange(c,new r);return Promise.resolve()}getGlyph(d,c){if(d=this._getFontStack(d))if(d=d.getRange(Math.floor(c/256)))return{metrics:d.getMetrics(c),bitmap:d.getBitmap(c)}}_getFontStack(d){let c=this._glyphInfo[d];c||=this._glyphInfo[d]=new b;return c}}class f{constructor(d,c,g){this._array=d;this._start=c;this.length=g}at(d){return 0<=d&&d<this.length?
this._array[this._start+d]:void 0}}return e})},"esri/views/2d/engine/vectorTiles/SpriteMosaic":function(){define("../../../../symbols/cim/rasterizingUtils ./RectangleBinPack ../webgl/Rect ../../../webgl/enums ../../../webgl/Texture ../../../webgl/TextureDescriptor".split(" "),function(m,w,r,b,e,f){class d{constructor(c,g,h=0){this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=
1;(0>=c||0>=g)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!");this._pageWidth=c;this._pageHeight=g;0<h&&(this._maxItemSize=h);this._binPack=new w(c-4,g-4)}destroy(){this.dispose()}dispose(){this._binPack=null;this._mosaicsData.length=0;this._mosaicRects={};for(const c of this._textures)c&&c.dispose();this._textures.length=0}getWidth(c){return c>=this._size.length?-1:this._size[c][0]}getHeight(c){return c>=this._size.length?-1:this._size[c][1]}getPageSize(c){return c>=
this._size.length?null:this._size[c]}setSpriteSource(c){this.dispose();this.pixelRatio=c.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new w(this._pageWidth-4,this._pageHeight-4);const g=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=g;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=c}getSpriteItem(c,g=!1){var h=this._mosaicRects[c];if(h)return h;if(!this._sprites||
"loaded"!==this._sprites.loadStatus)return null;let k;c&&c.startsWith("dasharray-")?([h,k]=this._rasterizeDash(c),g=!0):h=this._sprites.getSpriteInfo(c);if(!h?.width||!h.height||0>h.width||0>h.height)return null;const l=h.width,q=h.height,[v,p,z]=this._allocateImage(l,q);if(0>=v.width)return null;this._copy(v,h,p,z,g,k);h={type:"sprite",rect:v,width:l,height:q,sdf:h.sdf,simplePattern:!1,rasterizationScale:h.pixelRatio,page:p};return this._mosaicRects[c]=h}getSpriteItems(c){const g={};for(const h of c)g[h.name]=
this.getSpriteItem(h.name,h.repeat);return g}getMosaicItemPosition(c,g){g=(c=this.getSpriteItem(c,g))&&c.rect;if(!g)return null;g.width=c.width;g.height=c.height;return{tl:[g.x+2,g.y+2],br:[g.x+2+c.width,g.y+2+c.height],page:c.page}}bind(c,g,h=0,k=0){if(!(h>=this._size.length||h>=this._mosaicsData.length)){if(!this._textures[h]){var l=new f.TextureDescriptor;l.wrapMode=b.TextureWrapMode.CLAMP_TO_EDGE;l.width=this._size[h][0];l.height=this._size[h][1];this._textures[h]=new e.Texture(c,l,new Uint8Array(this._mosaicsData[h].buffer))}l=
this._textures[h];l.setSamplingMode(g);this._dirties[h]&&l.setData(new Uint8Array(this._mosaicsData[h].buffer));c.bindTexture(l,k);this._dirties[h]=!1}}static _copyBits(c,g,h,k,l,q,v,p,z,F,B){let D=k*g+h;v=p*q+v;if(B)for(v-=q,B=-1;B<=F;B++,D=((B+F)%F+k)*g+h,v+=q)for(p=-1;p<=z;p++)l[v+p]=c[D+(p+z)%z];else for(h=0;h<F;h++){for(k=0;k<z;k++)l[v+k]=c[D+k];D+=g;v+=q}}_copy(c,g,h,k,l,q){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(h>=this._mosaicsData.length)){var v=new Uint32Array(q?q.buffer:
this._sprites.image.buffer),p=this._mosaicsData[h];p&&v||console.error("Source or target images are uninitialized!");d._copyBits(v,q?g.width:this._sprites.width,g.x,g.y,p,k[0],c.x+2,c.y+2,g.width,g.height,l);this._dirties[h]=!0}}_allocateImage(c,g){c+=2;g+=2;var h=Math.max(c,g);if(this._maxItemSize&&this._maxItemSize<h)return h=new r(0,0,c,g),this._mosaicsData.push(new Uint32Array(c*g)),this._dirties.push(!0),this._size.push([c,g]),this._textures.push(void 0),[h,this._mosaicsData.length-1,[c,g]];
h=c%4?4-c%4:4;let k=g%4?4-g%4:4;1===h&&(h=5);1===k&&(k=5);h=this._binPack.allocate(c+h,g+k);return 0>=h.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new w(this._pageWidth-4,this._pageHeight-4),this._allocateImage(c,g)):[h,this._currentPage,
[this._pageWidth,this._pageHeight]]}_rasterizeDash(c){var g=c.match(/\[(.*?)\]/);if(!g)return null;g=g[1].split(",").map(Number);c=c.slice(c.lastIndexOf("-")+1);const [h,k,l]=m.rasterizeDash(g,c);c=new Uint8Array(h.buffer);return[{x:0,y:0,width:k,height:l,sdf:!0,pixelRatio:1},c]}}return d})},"esri/symbols/cim/rasterizingUtils":function(){define(["exports","../../core/floatRGBA","../../core/mathUtils","./constants"],function(m,w,r,b){m.rasterizeDash=function(e,f){var d="Butt"===f,c="Square"===f;f=
!d&&!c;1===e.length%2&&(e=[...e,...e]);const g=b.dashRadius,h=2*g;var k=0;for(var l of e)k+=l;l=Math.round(k*g);k=new Float32Array(l*h);const q=.5*g;let v=0,p=0,z=.5,F=!0;for(var B of e){v=p;for(p+=B*g;z<=p;){for(e=.5;e<h;){const D=f?(e-g)*(e-g):Math.abs(e-g);k[(e-.5)*l+z-.5]=F?d?Math.max(Math.max(v+q-z,D),Math.max(z-p+q,D)):D:f?Math.min((z-v)*(z-v)+D,(z-p)*(z-p)+D):c?Math.min(Math.max(z-v,D),Math.max(p-z,D)):Math.min(Math.max(z-v+q,D),Math.max(p+q-z,D));e++}z++}F=!F}d=k.length;B=new Uint8Array(4*
d);for(c=0;c<d;++c)w.packFloatRGBA((f?Math.sqrt(k[c]):k[c])/g,B,4*c);return[B,l,h]};m.rasterizeFillStyle=function(e,f,d){f=f.style;d=r.nextPowerOfTwo(Math.ceil(d));var c="vertical"===f||"horizontal"===f||"cross"===f||"esriSFSCross"===f||"esriSFSVertical"===f||"esriSFSHorizontal"===f?8*d:16*d,g=2*d;e.width=c;e.height=c;const h=e.getContext("2d");h.strokeStyle="#FFFFFF";h.lineWidth=d;h.beginPath();if("vertical"===f||"cross"===f||"esriSFSCross"===f||"esriSFSVertical"===f)h.moveTo(c/2,-g),h.lineTo(c/
2,c+g);if("horizontal"===f||"cross"===f||"esriSFSCross"===f||"esriSFSHorizontal"===f)h.moveTo(-g,c/2),h.lineTo(c+g,c/2);if("backward-diagonal"===f||"diagonal-cross"===f||"esriSFSDiagonalCross"===f||"esriSFSBackwardDiagonal"===f)h.moveTo(-g,-g),h.lineTo(c+g,c+g),h.moveTo(c-g,-g),h.lineTo(c+g,g),h.moveTo(-g,c-g),h.lineTo(g,c+g);if("forward-diagonal"===f||"diagonal-cross"===f||"esriSFSForwardDiagonal"===f||"esriSFSDiagonalCross"===f)h.moveTo(c+g,-g),h.lineTo(-g,c+g),h.moveTo(g,-g),h.lineTo(-g,g),h.moveTo(c+
g,c-g),h.lineTo(c-g,c+g);h.stroke();f=h.getImageData(0,0,e.width,e.height);f=new Uint8Array(f.data);for(g=0;g<f.length;g+=4)c=f[g+3]/255,f[g]*=c,f[g+1]*=c,f[g+2]*=c;return[f,e.width,e.height,d]};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/cim/constants":function(){define(["exports"],function(m){m.dashRadius=15.5;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobsUtil":function(){define("exports ./core ./jobs ./SymbolDeclutterer ./SymbolRepository ./util ../style/StyleDefinition".split(" "),
function(m,w,r,b,e,f,d){m.declutterSingleTile=function(c){const g=[],h=new e.SymbolRepository(4096,g,()=>{const l=new w.VTLUniqueSymbol;l.show=!1;l.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});l.parts.push({startTime:0,startOpacity:0,targetOpacity:0,show:!1});return l}),k=new b.SymbolDeclutterer(g,h,(l,q,v)=>new r.CollisionJob(l,q,v,c.styleRepository,c.key.level,0),(l,q)=>{f.writeOpacityToBuffers(l,q,!1)},()=>0,l=>(l=c.styleRepository.getStyleLayerByUID(l).getLayoutProperty("visibility"))&&
l.getValue()===d.Visibility.NONE?!1:!0);g.push(c);h.add(c);k.setScreenSize(512,512);k.continue(Infinity)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/jobs":function(){define(["exports","../../../../../core/libs/gl-matrix-2/factories/mat3f32","./config","./util","../style/StyleDefinition"],function(m,w,r,b,e){class f{constructor(d,c,g,h,k,l){this._symbols=d;this._styleRepository=h;this._zoom=k;this._currentSymbolCursor=this._currentLayerCursor=
0;this._styleProps=new Map;this._allNeededMatrices=new Map;this._gridIndex=new b.GridIndex(c,g,r.collisionGridCellSize);this._si=Math.sin(Math.PI*l/180);this._co=Math.cos(Math.PI*l/180);for(const q of d)for(const v of q.symbols)this._allNeededMatrices.has(v.tile)||this._allNeededMatrices.set(v.tile,w.clone(v.tile.transforms.tileUnitsToPixels))}work(d){const c=this._gridIndex,g=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=
0){const G=this._symbols[this._currentLayerCursor],H=this._getProperties(G.styleLayerUID);for(;this._currentSymbolCursor<G.symbols.length;this._currentSymbolCursor++){if(99===this._currentSymbolCursor%100&&performance.now()-g>d)return!1;var h=G.symbols[this._currentSymbolCursor];if(!h.unique.show)continue;var k=h,l=this._si,q=this._co,v=this._allNeededMatrices.get(h.tile),p=this._zoom;const {iconRotationAlignment:M,textRotationAlignment:N,iconTranslate:u,iconTranslateAnchor:y,textTranslate:x,textTranslateAnchor:C}=
H;var z=0;for(const K of k.colliders){const [Q,T]=0===K.partIndex?u:x;var F=0===K.partIndex?y:C,B=K.minLod<=p&&p<=K.maxLod;z+=B?0:1;K.enabled=B;K.xScreen=K.xTile*v[0]+K.yTile*v[3]+v[6];K.yScreen=K.xTile*v[1]+K.yTile*v[4]+v[7];F===e.TranslateAnchor.MAP?(K.xScreen+=q*Q-l*T,K.yScreen+=l*Q+q*T):(K.xScreen+=Q,K.yScreen+=T);e.RotationAlignment.VIEWPORT===(0===K.partIndex?M:N)?(K.dxScreen=K.dxPixels,K.dyScreen=K.dyPixels):(K.dxScreen=q*(K.dxPixels+K.width/2)-l*(K.dyPixels+K.height/2)-K.width/2,K.dyScreen=
l*(K.dxPixels+K.width/2)+q*(K.dyPixels+K.height/2)-K.height/2)}0<k.colliders.length&&z===k.colliders.length&&(k.unique.show=!1);k=h.unique;if(!k.show)continue;const {iconAllowOverlap:E,iconIgnorePlacement:I,textAllowOverlap:L,textIgnorePlacement:P}=H;for(const K of h.colliders)if(K.enabled&&(l=k.parts[K.partIndex],l.show)){if(q=!(K.partIndex?L:E))a:{q=K.xScreen+K.dxScreen;v=K.yScreen+K.dyScreen;p=q+K.width;z=v+K.height;const [Q,T,aa,X]=c.getCellSpan(q,v,p,z);for(F=T;F<=X;F++)for(B=Q;B<=aa;B++){var D=
c.cells[F][B];for(const Y of D){D=Y.xScreen+Y.dxScreen;const ba=Y.yScreen+Y.dyScreen,ea=D+Y.width,V=ba+Y.height;if(!(p<D||q>ea||z<ba||v>V)){q=!0;break a}}}q=!1}q&&(K.hard?k.show=!1:l.show=!1)}if(k.show)for(const K of h.colliders){if(!K.enabled)continue;if(K.partIndex?P:I)continue;if(!k.parts[K.partIndex].show)continue;h=K.xScreen+K.dxScreen;l=K.yScreen+K.dyScreen;const [Q,T,aa,X]=this._gridIndex.getCellSpan(h,l,h+K.width,l+K.height);for(h=T;h<=X;h++)for(l=Q;l<=aa;l++)this._gridIndex.cells[h][l].push(K)}}}return!0}_getProperties(d){var c=
this._styleProps.get(d);if(c)return c;c=this._zoom;const g=this._styleRepository.getStyleLayerByUID(d);var h=g.getLayoutValue("symbol-placement",c)!==e.SymbolPlacement.POINT;let k=g.getLayoutValue("icon-rotation-alignment",c);k===e.RotationAlignment.AUTO&&(k=h?e.RotationAlignment.MAP:e.RotationAlignment.VIEWPORT);let l=g.getLayoutValue("text-rotation-alignment",c);l===e.RotationAlignment.AUTO&&(l=h?e.RotationAlignment.MAP:e.RotationAlignment.VIEWPORT);h=g.getPaintValue("icon-translate",c);const q=
g.getPaintValue("icon-translate-anchor",c),v=g.getPaintValue("text-translate",c),p=g.getPaintValue("text-translate-anchor",c);c={iconAllowOverlap:g.getLayoutValue("icon-allow-overlap",c),iconIgnorePlacement:g.getLayoutValue("icon-ignore-placement",c),textAllowOverlap:g.getLayoutValue("text-allow-overlap",c),textIgnorePlacement:g.getLayoutValue("text-ignore-placement",c),iconRotationAlignment:k,textRotationAlignment:l,iconTranslateAnchor:q,iconTranslate:h,textTranslateAnchor:p,textTranslate:v};this._styleProps.set(d,
c);return c}}m.CollisionJob=f;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer":function(){define(["exports","./config"],function(m,w){function r(e,f){if(e.priority-f.priority)return e.priority-f.priority;const d=e.tile.key,c=f.tile.key;return d.world-c.world?d.world-c.world:d.level-c.level?d.level-c.level:d.row-c.row?d.row-c.row:d.col-c.col?d.col-c.col:e.xTile-f.xTile?e.xTile-f.xTile:e.yTile-f.yTile}class b{get running(){return this._running}constructor(e,
f,d,c,g,h){this._visibleTiles=e;this._symbolRepository=f;this._createCollisionJob=d;this._assignTileSymbolsOpacity=c;this._symbolLayerSorter=g;this._isLayerVisible=h;this._selectionJob=null;this._selectionJobCompleted=!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}setScreenSize(e,f){this._screenWidth===e&&this._screenHeight===f||this.restart();this._screenWidth=e;this._screenHeight=f}restart(){this._selectionJob=null;this._selectionJobCompleted=
!1;this._collisionJob=null;this._collisionJobCompleted=!1;this._opacityJob=null;this._opacityJobCompleted=!1;this._running=!0}continue(e){this._selectionJob||(this._selectionJob=this._createSelectionJob());if(!this._selectionJobCompleted){var f=performance.now();if(!this._selectionJob.work(e))return!1;this._selectionJobCompleted=!0;e=Math.max(0,e-(performance.now()-f));if(0===e)return!1}this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,
this._screenHeight));if(!this._collisionJobCompleted){f=performance.now();if(!this._collisionJob.work(e))return!1;this._collisionJobCompleted=!0;e=Math.max(0,e-(performance.now()-f));if(0===e)return!1}this._opacityJob||(this._opacityJob=this._createOpacityJob());if(!this._opacityJobCompleted){f=performance.now();if(!this._opacityJob.work(e))return!1;this._opacityJobCompleted=!0;e=Math.max(0,e-(performance.now()-f));if(0===e)return!1}this._running=!1;return!0}_createSelectionJob(){const e=this._symbolRepository.uniqueSymbols;
for(let k=0;k<e.length;k++){const l=e[k];for(let q=0;q<l.uniqueSymbols.length;q++){const v=l.uniqueSymbols[q];for(const p of v.tileSymbols)p.selectedForRendering=!1}}const f=[];let d=0,c=0;const g=this._isLayerVisible,h=this._symbolLayerSorter;return{work:function(k){const l=performance.now();for(;c<e.length;c++,d=0){const v=e[c];var q=v.styleLayerUID;if(!g(q)){f[c]||(f[c]={styleLayerUID:q,symbols:[]});continue}f[c]=f[c]||{styleLayerUID:q,symbols:[]};const p=f[c];for(;d<v.uniqueSymbols.length;d++){q=
v.uniqueSymbols[d];if(99===d%100&&performance.now()-l>k)return!1;let z=null,F=!1,B=!1;for(const D of q.tileSymbols)if(!B||!F){const G=D.tile;if(!z||G.isCoverage||G.neededForCoverage&&!F){z=D;if(G.neededForCoverage||G.isCoverage)B=!0;G.isCoverage&&(F=!0)}}z.selectedForRendering=!0;if(B){p.symbols.push(z);q.show=!0;for(const D of q.parts)D.show=!0}else q.show=!1}}for(const v of f)v.symbols.sort(r);return!0},get sortedSymbols(){return f.sort(h)}}}_createOpacityJob(){function e(g,h){var k=g.symbols;for(const [,
q]of k){var l=q;k=h;for(const v of l){l=v.unique;for(const p of l.parts)p.startOpacity+=(k-p.startTime)/w.fadeDuration*(.5<p.targetOpacity?1:-1),p.startOpacity=Math.min(Math.max(p.startOpacity,0),1),p.startTime=k,p.targetOpacity=l.show&&p.show?1:0}}f(g,h);for(const q of g.childrenTiles)e(q,h)}const f=this._assignTileSymbolsOpacity,d=this._visibleTiles;let c=0;return{work(g){const h=performance.now();for(;c<d.length;c++){if(performance.now()-h>g)return!1;const k=d[c];if(null!=k.parentTile)continue;
const l=performance.now();e(k,l)}return!0}}}}m.SymbolDeclutterer=b;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/decluttering/SymbolRepository":function(){define(["exports","./util"],function(m,w){class r{constructor(b,e,f){this.tileCoordRange=b;this._visibleTiles=e;this._createUnique=f;this._tiles=new Map;this._uniqueSymbolsReferences=new Map}get uniqueSymbols(){null==this._uniqueSymbolLayerArray&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray());
return this._uniqueSymbolLayerArray}get uniqueSymbolsReferences(){return this._uniqueSymbolsReferences}add(b,e){this._uniqueSymbolLayerArray=null;let f=this._tiles.get(b.id);f||(f={symbols:new Map},this._tiles.set(b.id,f));var d=new Map;if(e)for(var c of e)f.symbols.has(c)&&(d.set(c,f.symbols.get(c)),f.symbols.delete(c));else for(var [g]of b.layerData)f.symbols.has(g)&&(d.set(g,f.symbols.get(g)),f.symbols.delete(g));this._removeSymbols(d);e=b.symbols;d=new Map;for(const [h,k]of e)if(c=k.length,32<=
c){g=this.tileCoordRange;do g/=2,c/=4;while(8<c&&64<g);c=new w.GridIndex(this.tileCoordRange,this.tileCoordRange,g);d.set(h,{flat:k,index:c});f.symbols.set(h,{flat:k,index:c});for(const l of k)c.getCell(l.xTile,l.yTile).push(l)}else d.set(h,{flat:k}),f.symbols.set(h,{flat:k});this._addSymbols(b.key,e)}deleteStyleLayers(b){this._uniqueSymbolLayerArray=null;for(const [e,f]of this._tiles){const d=new Map;for(const c of b)f.symbols.has(c)&&(d.set(c,f.symbols.get(c)),f.symbols.delete(c));this._removeSymbols(d);
0===f.symbols.size&&this._tiles.delete(e)}}removeTile(b){this._uniqueSymbolLayerArray=null;const e=this._tiles.get(b.id);if(e){var f=new Map;for(const [d]of b.symbols)e.symbols.has(d)&&(f.set(d,e.symbols.get(d)),e.symbols.delete(d));this._removeSymbols(f);0===e.symbols.size&&this._tiles.delete(b.id)}}querySymbols(b,e,f,d){d=[];var c=this.uniqueSymbols;for(const h of c){c=h.styleLayerUID;var g=h.uniqueSymbols;for(const k of g)(g=k.tileSymbols.find(l=>l.selectedForRendering))&&w.isSearchCircleOverlapingSymbol(g,
b,e*(window.devicePixelRatio||1),f)&&d.push({vtlSymbol:g,styleLayerUID:c,tileKey:g.tile.key})}return d}_removeSymbols(b){for(const [f,{flat:d}]of b)for(const c of d){b=c.unique;var e=b.tileSymbols;const g=e.length-1;for(let h=0;h<g;h++)if(e[h]===c){e[h]=e[g];break}e.length=g;0===g&&(e=this._uniqueSymbolsReferences.get(f),e.delete(b),0===e.size&&this._uniqueSymbolsReferences.delete(f));c.unique=null}}_addSymbols(b,e){if(0!==e.size){var f=this._visibleTiles;for(const d of f)d.parentTile||d.key.world!==
b.world||d.key.level===b.level&&!d.key.equals(b)||this._matchSymbols(d,b,e);for(const [d,c]of e)for(const g of c)null==g.unique&&(b=this._createUnique(),g.unique=b,b.tileSymbols.push(g),e=this._uniqueSymbolsReferences.get(d),e||(e=new Set,this._uniqueSymbolsReferences.set(d,e)),e.add(b))}}_matchSymbols(b,e,f){if(b.key.level>e.level){var d=b.key.level-e.level;if(b.key.row>>d!==e.row||b.key.col>>d!==e.col)return}if(e.level>b.key.level&&(d=e.level-b.key.level,e.row>>d!==b.key.row||e.col>>d!==b.key.col))return;
if(e.equals(b.key))for(var c of b.childrenTiles)this._matchSymbols(c,e,f);else{c=new Map;for(const [k,l]of f){var g=[];for(const v of l)f=w.tileCoordChange(this.tileCoordRange,v.xTile,e.level,e.col,b.key.level,b.key.col),d=w.tileCoordChange(this.tileCoordRange,v.yTile,e.level,e.row,b.key.level,b.key.row),0<=f&&f<this.tileCoordRange&&0<=d&&d<this.tileCoordRange&&g.push({symbol:v,xTransformed:f,yTransformed:d});f=[];d=b.key.level<e.level?1:1<<b.key.level-e.level;const q=this._tiles.get(b.id).symbols.get(k);
if(q){const v=q.flat;for(const p of g){var h=!1;let z;const F=p.xTransformed,B=p.yTransformed;z=null!=q.index?q.index.getCell(F,B):v;g=p.symbol;const D=g.hash;for(const G of z)if(D===G.hash&&Math.abs(F-G.xTile)<=d&&Math.abs(B-G.yTile)<=d){h=G.unique;g.unique=h;h.tileSymbols.push(g);h=!0;break}h||f.push(g)}}0<f.length&&c.set(k,f)}for(const k of b.childrenTiles)this._matchSymbols(k,e,c)}}_createUniqueSymbolLayerArray(){var b=this._uniqueSymbolsReferences;const e=Array(b.size);let f=0;for(const [d,c]of b){const g=
Array(c.size);b=0;for(const h of c)g[b++]=h;e[f]={styleLayerUID:d,uniqueSymbols:g};f++}return e}}m.SymbolRepository=r;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoViewPOT":function(){define(["../../../layers/support/TileInfo","./TileInfoView","./TileKey"],function(m,w,r){class b extends w{constructor(){super(...arguments);this._fullCacheLodInfos=null;this._levelByScale={}}getTileParentId(e){e=r.pool.acquire(e);const f=0===e.level?null:r.getId(e.level-
1,e.row>>1,e.col>>1,e.world);r.pool.release(e);return f}getTileCoverage(e,f,d=!0,c){e=super.getTileCoverage(e,f,d,c);if(!e)return e;const g=1<<e.lodInfo.level;e.spans=e.spans.filter(h=>0<=h.row&&h.row<g);return e}scaleToLevel(e){this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos);if(this._levelByScale[e])return this._levelByScale[e];var f=this._fullCacheLodInfos;if(e>f[0].scale)return f[0].level;let d;for(let c=0;c<f.length-1;c++)if(d=f[c+1],e>d.scale)return f=f[c],f.level+(f.scale-
e)/(f.scale-d.scale);return f[f.length-1].level}_initializeFullCacheLODs(e){e=0===e[0].level?e.map(f=>({level:f.level,resolution:f.resolution,scale:f.scale})):m.create({size:this.tileInfo.size[0],spatialReference:this.tileInfo.spatialReference}).lods.map(f=>({level:f.level,resolution:f.resolution,scale:f.scale}));for(let f=0;f<e.length;f++)this._levelByScale[e[f].scale]=e[f].level;this._fullCacheLodInfos=e}}return b})},"esri/views/2d/engine/vectorTiles/VTLPainter3D":function(){define(["../../../../core/maybe",
"../vtlBrushes","./shaders/VTLMaterialManager","./style/StyleDefinition","../../../webgl/enums"],function(m,w,r,b,e){class f{constructor(d,c){this.spriteMosaic=d;this.glyphMosaic=c;this._brushCache=new Map;this._vtlMaterialManager=new r}dispose(){this._brushCache&&(this._brushCache.forEach(d=>d.dispose()),this._brushCache=null);this._vtlMaterialManager=m.disposeMaybe(this._vtlMaterialManager);this.spriteMosaic.dispose();this.glyphMosaic.dispose()}get vectorTilesMaterialManager(){return this._vtlMaterialManager}drawSymbols(d,
c,g){g=g.layers;d.renderPass="translucent";for(let k=0;k<g.length;k++){const l=g[k];if(l.type===b.StyleLayerType.SYMBOL){var h=l.getLayoutProperty("visibility");h&&h.getValue()===b.Visibility.NONE||(h=d.displayLevel,void 0!==l.minzoom&&l.minzoom>h+1E-6||void 0!==l.maxzoom&&l.maxzoom<=h-1E-6||(d.styleLayerUID=l.uid,d.styleLayer=l,this._drawWithBrush(d,c,"vtlSymbol")))}}}drawBackground(d,c,g){if(0!==g.backgroundBucketIds.length){var {context:h,displayLevel:k,requiredLevel:l}=d;c.key.level=l;h.setBlendingEnabled(!0);
h.setDepthTestEnabled(!1);h.setStencilTestEnabled(!1);d.renderPass="background";g.backgroundBucketIds.forEach(q=>{q=g.getLayerById(q);if(q.type===b.StyleLayerType.BACKGROUND){var v=q.getLayoutProperty("visibility");v&&v.getValue()===b.Visibility.NONE||void 0!==q.minzoom&&q.minzoom>k+1E-6||void 0!==q.maxzoom&&q.maxzoom<=k-1E-6||(d.styleLayerUID=q.uid,d.styleLayer=q,this._drawWithBrush(d,c,"vtlBackground"))}})}}drawTile(d,c,g,h){const {context:k}=d;g=g.layers;k.setBlendingEnabled(!1);k.setDepthTestEnabled(!0);
k.setDepthWriteEnabled(!0);k.setDepthFunction(e.CompareFunction.LEQUAL);d.renderPass="opaque";for(var l=g.length-1;0<=l;l--){var q=g[l];null!=h&&h!==q.type||this._renderStyleLayer(q,d,c,!1)}k.setDepthWriteEnabled(!1);k.setBlendingEnabled(!0);k.setBlendFunctionSeparate(e.BlendFactor.ONE,e.BlendFactor.ONE_MINUS_SRC_ALPHA,e.BlendFactor.ONE,e.BlendFactor.ONE_MINUS_SRC_ALPHA);d.renderPass="translucent";for(l=0;l<g.length;l++)q=g[l],null!=h&&h!==q.type||this._renderStyleLayer(q,d,c,!1);k.setDepthTestEnabled(!1);
k.bindVAO()}_renderStyleLayer(d,c,g,h){if(h||d&&g.layerData.has(d.uid))if(h=d.getLayoutProperty("visibility"),!h||h.getValue()!==b.Visibility.NONE){({renderPass:h}=c);switch(d.type){case b.StyleLayerType.BACKGROUND:if("background"!==h)return;var k="vtlBackground";break;case b.StyleLayerType.FILL:if("opaque"!==h&&"translucent"!==c.renderPass)return;k="vtlFill";break;case b.StyleLayerType.LINE:if("translucent"!==h)return;k="vtlLine";break;case b.StyleLayerType.CIRCLE:if("translucent"!==h)return;k="vtlCircle";
break;case b.StyleLayerType.SYMBOL:if("translucent"!==h)return;k="vtlSymbol"}h=c.displayLevel;void 0!==d.minzoom&&d.minzoom>h+1E-6||void 0!==d.maxzoom&&d.maxzoom<=h-1E-6||({context:h}=c,h.setStencilTestEnabled(!1),h.setStencilWriteMask(0),c.styleLayerUID=d.uid,c.styleLayer=d,this._drawWithBrush(c,g,k))}}_drawWithBrush(d,c,g){this._brushCache.has(g)||this._brushCache.set(g,new w.vtlBrushes[g]);this._brushCache.get(g).drawMany(d,[c])}}return f})},"esri/views/2d/engine/vtlBrushes":function(){define("exports ./webgl/brushes/WGLBrushVTLBackground ./webgl/brushes/WGLBrushVTLCircle ./webgl/brushes/WGLBrushVTLFill ./webgl/brushes/WGLBrushVTLLine ./webgl/brushes/WGLBrushVTLSymbol".split(" "),
function(m,w,r,b,e,f){m.vtlBrushes={vtlBackground:w.WGLBrushVTLBackground,vtlFill:b.WGLBrushVTLFill,vtlLine:e.WGLBrushVTLLine,vtlCircle:r.WGLBrushVTLCircle,vtlSymbol:f.WGLBrushVTLSymbol};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLBackground":function(){define("exports ../../../../../core/mathUtils ../../../../../core/libs/gl-matrix-2/factories/mat3f32 ../../../../../core/libs/gl-matrix-2/factories/vec4f32 ../definitions ./WGLBrush ../../../../webgl/BufferObject ../../../../webgl/enums ../../../../webgl/VertexArrayObject".split(" "),
function(m,w,r,b,e,f,d,c,g){class h extends f{constructor(){super(...arguments);this._color=b.fromValues(1,0,0,1);this._patternMatrix=r.create();this._programOptions={id:!1,pattern:!1}}dispose(){this._vao&&(this._vao.dispose(),this._vao=null)}drawMany(k,l){const {context:q,painter:v,requestRender:p,allowDelayedRender:z}=k;this._loadWGLResources(k);const F=k.displayLevel;var B=k.styleLayer,D=B.backgroundMaterial;const G=v.vectorTilesMaterialManager;var H=B.getPaintValue("background-color",F),M=B.getPaintValue("background-opacity",
F);const N=B.getPaintValue("background-pattern",F),u=void 0!==N,y=k.spriteMosaic;let x,C;k=(window.devicePixelRatio|1)>e.vtlHighResCutoff?2:1;const E=this._programOptions;E.pattern=u;D=G.getMaterialProgram(q,D,E);if(z&&null!=p&&!D.compiled)p();else{q.bindVAO(this._vao);q.useProgram(D);if(u){H=y.getMosaicItemPosition(N,!0);if(null!=H){const {tl:I,br:L,page:P}=H;x=L[0]-I[0];C=L[1]-I[1];H=y.getPageSize(P);null!=H&&(y.bind(q,c.TextureSamplingMode.LINEAR,P,e.vtlTextureBindingUnitSprites),D.setUniform4f("u_tlbr",
I[0],I[1],L[0],L[1]),D.setUniform2fv("u_mosaicSize",H),D.setUniform1i("u_texture",e.vtlTextureBindingUnitSprites))}D.setUniform1f("u_opacity",M)}else M*=H[3],this._color[0]=M*H[0],this._color[1]=M*H[1],this._color[2]=M*H[2],this._color[3]=M,D.setUniform4fv("u_color",this._color);D.setUniform1f("u_depth",B.z||0);for(const I of l)D.setUniform1f("u_coord_range",I.rangeX),D.setUniformMatrix3fv("u_dvsMat3",I.transforms.displayViewScreenMat3),u&&(B=k*I.width*Math.max(2**(Math.round(F)-I.key.level),1),l=
B/w.nextPowerOfTwo(x),B/=w.nextPowerOfTwo(C),this._patternMatrix[0]=l,this._patternMatrix[4]=B,D.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)),q.setStencilFunction(c.CompareFunction.EQUAL,0,255),q.drawArrays(c.PrimitiveType.TRIANGLE_STRIP,0,4)}}_loadWGLResources(k){if(!this._vao){var {context:l,styleLayer:q}=k;k=q.backgroundMaterial;var v=new Int8Array([0,0,1,0,0,1,1,1]);v=d.BufferObject.createVertex(l,c.Usage.STATIC_DRAW,v);this._vao=new g.VertexArrayObject(l,k.getAttributeLocations(),
k.getLayoutInfo(),{geometry:v})}}}m.WGLBrushVTLBackground=h;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["exports"],function(m){function w(){return new Float32Array(4)}function r(D){const G=new Float32Array(4);G[0]=D[0];G[1]=D[1];G[2]=D[2];G[3]=D[3];return G}function b(D,G,H,M){const N=new Float32Array(4);N[0]=D;N[1]=G;N[2]=H;N[3]=M;return N}function e(D,G){return new Float32Array(D,G,4)}function f(){return w()}function d(){return b(1,
1,1,1)}function c(){return b(1,0,0,0)}function g(){return b(0,1,0,0)}function h(){return b(0,0,1,0)}function k(){return b(0,0,0,1)}const l=w(),q=d(),v=c(),p=g(),z=h(),F=k(),B=Object.freeze(Object.defineProperty({__proto__:null,ONES:q,UNIT_W:F,UNIT_X:v,UNIT_Y:p,UNIT_Z:z,ZEROS:l,clone:r,create:w,createView:e,fromValues:b,ones:d,unitW:k,unitX:c,unitY:g,unitZ:h,zeros:f},Symbol.toStringTag,{value:"Module"}));m.ONES=q;m.UNIT_W=F;m.UNIT_X=v;m.UNIT_Y=p;m.UNIT_Z=z;m.ZEROS=l;m.clone=r;m.create=w;m.createView=
e;m.fromValues=b;m.ones=d;m.unitW=k;m.unitX=c;m.unitY=g;m.unitZ=h;m.vec4f32=B;m.zeros=f;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrush":function(){define(function(){class m{constructor(){this.name=this.constructor.name||"UnnamedBrush";this.brushEffect=null}prepareState(w,r){}draw(w,r,b){}drawMany(w,r,b){for(const e of r)e.visible&&this.draw(w,e,b)}}return m})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLCircle":function(){define(["exports",
"../../vectorTiles/style/StyleDefinition","./WGLBrush","../../../../webgl/enums"],function(m,w,r,b){class e extends r{constructor(){super(...arguments);this._programOptions={id:!1}}dispose(){}drawMany(f,d){const {context:c,displayLevel:g,requiredLevel:h,state:k,painter:l,spriteMosaic:q,styleLayerUID:v,requestRender:p,allowDelayedRender:z}=f;if(d.some(H=>H.layerData.get(v)?.circleIndexCount??!1)){f=f.styleLayer;var F=f.circleMaterial,B=l.vectorTilesMaterialManager,D=f.getPaintValue("circle-translate",
g),G=f.getPaintValue("circle-translate-anchor",g);B=B.getMaterialProgram(c,F,this._programOptions);if(z&&null!=p&&!B.compiled)p();else{c.useProgram(B);B.setUniformMatrix3fv("u_displayMat3",G===w.TranslateAnchor.VIEWPORT?k.displayMat3:k.displayViewMat3);B.setUniform2fv("u_circleTranslation",D);B.setUniform1f("u_depth",f.z);B.setUniform1f("u_antialiasingWidth",1.2);D=-1;for(const H of d)H.layerData.has(v)&&(H.key.level!==D&&(D=H.key.level,F.setDataUniforms(B,g,f,D,q)),d=H.layerData.get(v),d.circleIndexCount&&
(d.prepareForRendering(c),G=d.vao,null!=G&&(c.bindVAO(G),B.setUniformMatrix3fv("u_dvsMat3",H.transforms.displayViewScreenMat3),h!==H.key.level?c.setStencilFunction(b.CompareFunction.EQUAL,H.stencilRef,255):c.setStencilFunction(b.CompareFunction.GREATER,255,255),c.drawElements(b.PrimitiveType.TRIANGLES,d.circleIndexCount,b.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*d.circleIndexStart),H.triangleCount+=d.circleIndexCount/3)))}}}}m.WGLBrushVTLCircle=e;Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLFill":function(){define(["exports","../../vectorTiles/style/StyleDefinition","../definitions","./WGLBrush","../../../../webgl/enums"],function(m,w,r,b,e){const f=1/65536;class d extends b{constructor(){super(...arguments);this._fillProgramOptions={id:!1,pattern:!1};this._outlineProgramOptions={id:!1}}dispose(){}drawMany(c,g){const {displayLevel:h,renderPass:k,spriteMosaic:l,styleLayerUID:q}=c;var v=!1;for(var p of g)if(p.layerData.has(q)){var z=
p.layerData.get(q);if(0<z.fillIndexCount||0<z.outlineIndexCount){v=!0;break}}if(v){v=c.styleLayer;var F=v.getPaintProperty("fill-pattern");z=(p=void 0!==F)&&F.isDataDriven;if(p&&!z){var B=F.getValue(h);B=l.getMosaicItemPosition(B,!0)}F=!p&&v.getPaintValue("fill-antialias",h);var D=!0,G=1;if(!p){var H=v.getPaintProperty("fill-color"),M=v.getPaintProperty("fill-opacity");H?.isDataDriven||M?.isDataDriven||(G=v.getPaintValue("fill-color",h),G=v.getPaintValue("fill-opacity",h)*G[3],1<=G&&(D=!1))}D&&"opaque"===
k||(H=v.getPaintValue("fill-translate",h),M=v.getPaintValue("fill-translate-anchor",h),(D||"translucent"!==k)&&this._drawFill(c,q,v,g,H,M,p,B,z),B=!v.hasDataDrivenOutlineColor&&v.outlineUsesFillColor&&1>G,F&&"opaque"!==k&&!B&&this._drawOutline(c,q,v,g,H,M))}}_drawFill(c,g,h,k,l,q,v,p,z){if(!v||z||null!=p){var {context:F,displayLevel:B,state:D,painter:G,pixelRatio:H,spriteMosaic:M,requestRender:N,allowDelayedRender:u}=c;c=h.fillMaterial;var y=G.vectorTilesMaterialManager,x=H>r.vtlHighResCutoff?2:1,
C=this._fillProgramOptions;C.pattern=v;y=y.getMaterialProgram(F,c,C);if(u&&null!=N&&!y.compiled)N();else{F.useProgram(y);null!=p&&({page:p}=p,C=M.getPageSize(p),null!=C&&(M.bind(F,e.TextureSamplingMode.LINEAR,p,r.vtlTextureBindingUnitSprites),y.setUniform2fv("u_mosaicSize",C),y.setUniform1i("u_texture",r.vtlTextureBindingUnitSprites)));y.setUniformMatrix3fv("u_displayMat3",q===w.TranslateAnchor.VIEWPORT?D.displayMat3:D.displayViewMat3);y.setUniform2fv("u_fillTranslation",l);y.setUniform1f("u_depth",
h.z+f);l=-1;for(const E of k)if(E.layerData.has(g)&&(E.key.level!==l&&(l=E.key.level,c.setDataUniforms(y,B,h,l,M)),k=E.layerData.get(g),k.fillIndexCount&&(k.prepareForRendering(F),q=k.fillVAO,null!=q))){F.bindVAO(q);y.setUniformMatrix3fv("u_dvsMat3",E.transforms.displayViewScreenMat3);F.setStencilFunction(e.CompareFunction.EQUAL,E.stencilRef,255);v&&y.setUniform1f("u_patternFactor",E.rangeX/(x*E.width*Math.max(2**(Math.round(B)-E.key.level),1)));if(z){q=k.patternMap;if(!q)continue;for(const [I,L]of q)q=
M.getPageSize(I),null!=q&&(M.bind(F,e.TextureSamplingMode.LINEAR,I,r.vtlTextureBindingUnitSprites),y.setUniform2fv("u_mosaicSize",q),y.setUniform1i("u_texture",r.vtlTextureBindingUnitSprites),F.drawElements(e.PrimitiveType.TRIANGLES,L[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*L[0]))}else F.drawElements(e.PrimitiveType.TRIANGLES,k.fillIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*k.fillIndexStart);E.triangleCount+=k.fillIndexCount/3}}}}_drawOutline(c,g,h,k,l,q){const {context:v,
displayLevel:p,state:z,painter:F,pixelRatio:B,spriteMosaic:D,requestRender:G,allowDelayedRender:H}=c;c=h.outlineMaterial;const M=.75/B,N=F.vectorTilesMaterialManager.getMaterialProgram(v,c,this._outlineProgramOptions);if(H&&null!=G&&!N.compiled)G();else{v.useProgram(N);N.setUniformMatrix3fv("u_displayMat3",q===w.TranslateAnchor.VIEWPORT?z.displayMat3:z.displayViewMat3);N.setUniform2fv("u_fillTranslation",l);N.setUniform1f("u_depth",h.z+f);N.setUniform1f("u_outline_width",M);l=-1;for(const u of k)u.layerData.has(g)&&
(u.key.level!==l&&(l=u.key.level,c.setDataUniforms(N,p,h,l,D)),k=u.layerData.get(g),k.prepareForRendering(v),k.outlineIndexCount&&(q=k.outlineVAO,null!=q&&(v.bindVAO(q),N.setUniformMatrix3fv("u_dvsMat3",u.transforms.displayViewScreenMat3),v.setStencilFunction(e.CompareFunction.EQUAL,u.stencilRef,255),v.drawElements(e.PrimitiveType.TRIANGLES,k.outlineIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*k.outlineIndexStart),u.triangleCount+=k.outlineIndexCount/3)))}}}m.WGLBrushVTLFill=d;
Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLLine":function(){define(["exports","../../vectorTiles/style/StyleDefinition","../definitions","./WGLBrush","../../../../webgl/enums"],function(m,w,r,b,e){class f extends b{constructor(){super(...arguments);this._programOptions={id:!1,pattern:!1,sdf:!1}}dispose(){}drawMany(d,c){const {context:g,displayLevel:h,state:k,painter:l,pixelRatio:q,spriteMosaic:v,styleLayerUID:p,requestRender:z,allowDelayedRender:F}=
d;if(c.some(I=>I.layerData.get(p)?.lineIndexCount??!1)){d=d.styleLayer;var B=d.lineMaterial,D=l.vectorTilesMaterialManager,G=d.getPaintValue("line-translate",h),H=d.getPaintValue("line-translate-anchor",h),M=d.getPaintProperty("line-pattern"),N=void 0!==M,u=N&&M.isDataDriven;if(N&&!u){M=M.getValue(h);var y=v.getMosaicItemPosition(M)}var x;M=!1;if(!N){var C=d.getPaintProperty("line-dasharray");M=(x=void 0!==C)&&C.isDataDriven;x&&!M&&(y=C.getValue(h),y=d.getDashKey(y,d.getLayoutValue("line-cap",h)),
y=v.getMosaicItemPosition(y))}C=1/q;var E=this._programOptions;E.pattern=N;E.sdf=x;x=D.getMaterialProgram(g,B,E);if(F&&null!=z&&!x.compiled)z();else{g.useProgram(x);x.setUniformMatrix3fv("u_displayViewMat3",k.displayViewMat3);x.setUniformMatrix3fv("u_displayMat3",H===w.TranslateAnchor.VIEWPORT?k.displayMat3:k.displayViewMat3);x.setUniform2fv("u_lineTranslation",G);x.setUniform1f("u_depth",d.z);x.setUniform1f("u_antialiasing",C);y&&null!=y&&({page:G}=y,H=v.getPageSize(G),null!=H&&(v.bind(g,e.TextureSamplingMode.LINEAR,
G,r.vtlTextureBindingUnitSprites),x.setUniform2fv("u_mosaicSize",H),x.setUniform1i("u_texture",r.vtlTextureBindingUnitSprites)));G=-1;for(const I of c)if(I.layerData.has(p)&&(I.key.level!==G&&(G=I.key.level,B.setDataUniforms(x,h,d,G,v)),x.setUniform1f("u_zoomFactor",2**(h-G)/q),c=I.layerData.get(p),c.lineIndexCount&&(c.prepareForRendering(g),H=c.vao,null!=H))){g.bindVAO(H);x.setUniformMatrix3fv("u_dvsMat3",I.transforms.displayViewScreenMat3);g.setStencilFunction(e.CompareFunction.EQUAL,I.stencilRef,
255);if(u||M){H=c.patternMap;if(!H)continue;for(const [L,P]of H)H=v.getPageSize(L),null!=H&&(v.bind(g,e.TextureSamplingMode.LINEAR,L,r.vtlTextureBindingUnitSprites),x.setUniform2fv("u_mosaicSize",H),x.setUniform1i("u_texture",r.vtlTextureBindingUnitSprites),g.drawElements(e.PrimitiveType.TRIANGLES,P[1],e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*P[0]))}else g.drawElements(e.PrimitiveType.TRIANGLES,c.lineIndexCount,e.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*c.lineIndexStart);I.triangleCount+=
c.lineIndexCount/3}}}}}m.WGLBrushVTLLine=f;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol":function(){define("exports ../../../../../core/libs/gl-matrix-2/factories/vec2f32 ../../vectorTiles/decluttering/config ../../vectorTiles/style/StyleDefinition ../definitions ../GeometryUtils ./WGLBrush ../../../../webgl/enums".split(" "),function(m,w,r,b,e,f,d,c){const g=1/65536;class h extends d{constructor(){super(...arguments);this._iconProgramOptions=
{id:!1,sdf:!1};this._sdfProgramOptions={id:!1};this._spritesTextureSize=w.create()}dispose(){}drawMany(k,l){const q=k.styleLayer;this._drawIcons(k,q,l);this._drawText(k,q,l)}_drawIcons(k,l,q){const {context:v,displayLevel:p,painter:z,spriteMosaic:F,state:B,styleLayerUID:D,requestRender:G,allowDelayedRender:H}=k,M=l.iconMaterial;var N=z.vectorTilesMaterialManager;let u;var y=!1;for(var x of q)if(x.layerData.has(D)&&(u=x.layerData.get(D),0<u.iconPerPageElementsMap.size)){y=!0;break}if(y){y=l.getPaintValue("icon-translate",
p);x=l.getPaintValue("icon-translate-anchor",p);var C=l.getLayoutValue("icon-rotation-alignment",p);C===b.RotationAlignment.AUTO&&(C=l.getLayoutValue("symbol-placement",p)===b.SymbolPlacement.POINT?b.RotationAlignment.VIEWPORT:b.RotationAlignment.MAP);var E=C===b.RotationAlignment.MAP;E=l.getLayoutValue("icon-keep-upright",p)&&E;var I=this._iconProgramOptions;I.sdf=u.isIconSDF;N=N.getMaterialProgram(v,M,I);if(H&&null!=G&&!N.compiled)G();else{v.useProgram(N);N.setUniformMatrix3fv("u_displayViewMat3",
C===b.RotationAlignment.MAP?B.displayViewMat3:B.displayMat3);N.setUniformMatrix3fv("u_displayMat3",x===b.TranslateAnchor.VIEWPORT?B.displayMat3:B.displayViewMat3);N.setUniform2fv("u_iconTranslation",y);N.setUniform1f("u_depth",l.z);N.setUniform1f("u_mapRotation",f.degToByte(B.rotation));N.setUniform1f("u_keepUpright",E?1:0);N.setUniform1f("u_level",10*p);N.setUniform1i("u_texture",e.vtlTextureBindingUnitSprites);N.setUniform1f("u_fadeDuration",r.fadeDuration/1E3);y=-1;for(const L of q)if(L.layerData.has(D)&&
(L.key.level!==y&&(y=L.key.level,M.setDataUniforms(N,p,l,y,F)),u=L.layerData.get(D),0!==u.iconPerPageElementsMap.size&&(u.prepareForRendering(v),u.updateOpacityInfo(),q=u.iconVAO,null!=q))){v.bindVAO(q);N.setUniformMatrix3fv("u_dvsMat3",L.transforms.displayViewScreenMat3);N.setUniform1f("u_time",(performance.now()-u.lastOpacityUpdate)/1E3);for(const [P,K]of u.iconPerPageElementsMap)this._renderIconRange(k,N,K,P,L)}}}}_renderIconRange(k,l,q,v,p){const {context:z,spriteMosaic:F}=k;this._spritesTextureSize[0]=
F.getWidth(v)/4;this._spritesTextureSize[1]=F.getHeight(v)/4;l.setUniform2fv("u_mosaicSize",this._spritesTextureSize);F.bind(z,c.TextureSamplingMode.LINEAR,v,e.vtlTextureBindingUnitSprites);this._setStencilState(k,p);z.drawElements(c.PrimitiveType.TRIANGLES,q[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*q[0]);p.triangleCount+=q[1]/3}_drawText(k,l,q){const {context:v,displayLevel:p,glyphMosaic:z,painter:F,pixelRatio:B,spriteMosaic:D,state:G,styleLayerUID:H,requestRender:M,allowDelayedRender:N}=
k,u=l.textMaterial;var y=F.vectorTilesMaterialManager,x=!1;for(var C of q)if(C.layerData.has(H)){var E=C.layerData.get(H);if(0<E.glyphPerPageElementsMap.size){x=!0;break}}if(x&&(E=l.getPaintProperty("text-opacity"),!E||E.isDataDriven||0!==E.getValue(p))){E=l.getPaintProperty("text-color");var I=!E||E.isDataDriven||0<E.getValue(p)[3];E=l.getPaintProperty("text-halo-width");x=l.getPaintProperty("text-halo-color");var L=(!E||E.isDataDriven||0<E.getValue(p))&&(!x||x.isDataDriven||0<x.getValue(p)[3]);
if(I||L){E=l.getLayoutValue("text-rotation-alignment",p);E===b.RotationAlignment.AUTO&&(E=l.getLayoutValue("symbol-placement",p)===b.SymbolPlacement.POINT?b.RotationAlignment.VIEWPORT:b.RotationAlignment.MAP);x=E===b.RotationAlignment.MAP;x=l.getLayoutValue("text-keep-upright",p)&&x;C=.8*3/B;this._glyphTextureSize||(this._glyphTextureSize=w.fromValues(z.width/4,z.height/4));var P=l.getPaintValue("text-translate",p),K=l.getPaintValue("text-translate-anchor",p),Q=y.getMaterialProgram(v,u,this._sdfProgramOptions);
if(N&&null!=M&&!Q.compiled)M();else{v.useProgram(Q);Q.setUniformMatrix3fv("u_displayViewMat3",E===b.RotationAlignment.MAP?G.displayViewMat3:G.displayMat3);Q.setUniformMatrix3fv("u_displayMat3",K===b.TranslateAnchor.VIEWPORT?G.displayMat3:G.displayViewMat3);Q.setUniform2fv("u_textTranslation",P);Q.setUniform1f("u_depth",l.z+g);Q.setUniform2fv("u_mosaicSize",this._glyphTextureSize);Q.setUniform1f("u_mapRotation",f.degToByte(G.rotation));Q.setUniform1f("u_keepUpright",x?1:0);Q.setUniform1f("u_level",
10*p);Q.setUniform1i("u_texture",e.vtlTextureBindingUnitGlyphs);Q.setUniform1f("u_antialiasingWidth",C);Q.setUniform1f("u_fadeDuration",r.fadeDuration/1E3);y=-1;for(const T of q)T.layerData.has(H)&&(T.key.level!==y&&(y=T.key.level,u.setDataUniforms(Q,p,l,y,D)),E=T.layerData.get(H),0!==E.glyphPerPageElementsMap.size&&(E.prepareForRendering(v),E.updateOpacityInfo(),q=E.textVAO,null!=q&&(v.bindVAO(q),Q.setUniformMatrix3fv("u_dvsMat3",T.transforms.displayViewScreenMat3),this._setStencilState(k,T),q=(performance.now()-
E.lastOpacityUpdate)/1E3,Q.setUniform1f("u_time",q),E.glyphPerPageElementsMap.forEach((aa,X)=>{this._renderGlyphRange(v,aa,X,z,Q,L,I,T)}))))}}}}_renderGlyphRange(k,l,q,v,p,z,F,B){v.bind(k,c.TextureSamplingMode.LINEAR,q,e.vtlTextureBindingUnitGlyphs);z&&(p.setUniform1f("u_halo",1),k.drawElements(c.PrimitiveType.TRIANGLES,l[1],c.DataType.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*l[0]),B.triangleCount+=l[1]/3);F&&(p.setUniform1f("u_halo",0),k.drawElements(c.PrimitiveType.TRIANGLES,l[1],c.DataType.UNSIGNED_INT,
Uint32Array.BYTES_PER_ELEMENT*l[0]),B.triangleCount+=l[1]/3)}_setStencilState(k,l){const {context:q,is3D:v,stencilSymbols:p}=k;q.setStencilTestEnabled(!0);p?(q.setStencilWriteMask(255),q.setStencilFunction(c.CompareFunction.ALWAYS,l.stencilRef,255)):(q.setStencilWriteMask(0),v?q.setStencilFunction(c.CompareFunction.EQUAL,l.stencilRef,255):q.setStencilFunction(c.CompareFunction.GREATER,255,255))}}m.WGLBrushVTLSymbol=h;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["exports"],
function(m){function w(f,d){f%=d;return 0<=f?f:f+d}const r=128/Math.PI,b=256/360,e=1/Math.LN2;m.between=function(f,d,c){return f>=d&&f<=c||f>=c&&f<=d};m.degToByte=function(f){return w(f*b,256)};m.interpolate=function(f,d,c){return f*(1-c)+d*c};m.log2=function(f){return Math.log(f)*e};m.positiveMod=w;m.radToByte=function(f){return w(f*r,256)};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterialManager":function(){define(["../enums","./Programs"],
function(m,w){class r{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach(b=>b.dispose());this._programByKey.clear()}getMaterialProgram(b,e,f){const d=e.key<<3|this._getMaterialOptionsValue(e.type,f);if(this._programByKey.has(d))return this._programByKey.get(d);var c=this._getProgramTemplate(e.type);({shaders:c}=c);const {vertexShader:g,fragmentShader:h}=c(f);f=e.getShaderHeader();c=e.getShaderMain();f=g.replace("#pragma header",f).replace("#pragma main",c);b=b.programCache.acquire(f,
h,e.getAttributeLocations());this._programByKey.set(d,b);return b}_getMaterialOptionsValue(b,e){switch(b){case m.ShaderProgramType.BACKGROUND:return(e.pattern?1:0)<<1;case m.ShaderProgramType.FILL:return(e.pattern?1:0)<<1;case m.ShaderProgramType.OUTLINE:return 0;case m.ShaderProgramType.LINE:return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1;case m.ShaderProgramType.ICON:return(e.sdf?1:0)<<1;case m.ShaderProgramType.CIRCLE:return 0;case m.ShaderProgramType.TEXT:return 0;default:return 0}}_getProgramTemplate(b){switch(b){case m.ShaderProgramType.BACKGROUND:return w.background;
case m.ShaderProgramType.CIRCLE:return w.circle;case m.ShaderProgramType.FILL:return w.fill;case m.ShaderProgramType.ICON:return w.icon;case m.ShaderProgramType.LINE:return w.line;case m.ShaderProgramType.OUTLINE:return w.outline;case m.ShaderProgramType.TEXT:return w.text;default:return null}}}return r})},"esri/views/2d/engine/vectorTiles/shaders/Programs":function(){define(["exports","./sources/resolver","../../../../webgl/programUtils"],function(m,w,r){m.background={shaders:b=>({vertexShader:r.glslifyDefineMap({PATTERN:b.pattern})+
w.resolveIncludes("background/background.vert"),fragmentShader:r.glslifyDefineMap({PATTERN:b.pattern})+w.resolveIncludes("background/background.frag")})};m.circle={shaders:b=>({vertexShader:w.resolveIncludes("circle/circle.vert"),fragmentShader:w.resolveIncludes("circle/circle.frag")})};m.fill={shaders:b=>({vertexShader:r.glslifyDefineMap({PATTERN:b.pattern})+w.resolveIncludes("fill/fill.vert"),fragmentShader:r.glslifyDefineMap({PATTERN:b.pattern})+w.resolveIncludes("fill/fill.frag")})};m.icon={shaders:b=>
({vertexShader:r.glslifyDefineMap({SDF:b.sdf})+w.resolveIncludes("icon/icon.vert"),fragmentShader:r.glslifyDefineMap({SDF:b.sdf})+w.resolveIncludes("icon/icon.frag")})};m.line={shaders:b=>({vertexShader:r.glslifyDefineMap({PATTERN:b.pattern,SDF:b.sdf})+w.resolveIncludes("line/line.vert"),fragmentShader:r.glslifyDefineMap({PATTERN:b.pattern,SDF:b.sdf})+w.resolveIncludes("line/line.frag")})};m.outline={shaders:b=>({vertexShader:w.resolveIncludes("outline/outline.vert"),fragmentShader:w.resolveIncludes("outline/outline.frag")})};
m.text={shaders:b=>({vertexShader:w.resolveIncludes("text/text.vert"),fragmentShader:w.resolveIncludes("text/text.frag")})};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/resolver":function(){define(["exports","./shaderRepository","../../../../../webgl/ShaderCompiler"],function(m,w,r){const b=new r.ShaderCompiler(function(e){let f=w;e.split("/").forEach(d=>{f&&=f[d]});return f});m.resolveIncludes=function(e){return b.resolveIncludes(e)};
Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/sources/shaderRepository":function(){define(function(){return{background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d u_opacity * color;\n#else\ngl_FragColor \x3d u_color;\n#endif\n}",
"background.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position \x3d vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d u_tlbr / u_mosaicSize.xyxy;\n#endif\n}"},
circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\nvoid main()\n{\nmediump float dist \x3d length(v_offset);\nmediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n}",
"circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_stroke_color \x3d stroke_color * stroke_opacity;\nv_stroke_width \x3d stroke_width;\nv_radius \x3d radius;\nv_blur \x3d max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset \x3d offset;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord \x3d fract(v_tileTextureCoord);\nmediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color \x3d texture2D(u_texture, samplePos);\ngl_FragColor \x3d v_color[3] * color;\n#else\ngl_FragColor \x3d v_color;\n#endif\n}",
"fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include \x3cutil/util.glsl\x3e\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\n#ifdef PATTERN\nfloat patternWidth \x3d nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight \x3d nextPOT(tlbr.w - tlbr.y);\nfloat scaleX \x3d 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY \x3d 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat \x3d mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord \x3d (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             \x3d tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#include \x3cutil/encoding.glsl\x3e\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor \x3d v_color;\nfloat d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio \x3d 0.248062016;\nfloat size \x3d max(v_size.x, v_size.y);\nfloat dist \x3d d * softEdgeRatio * size;\nfillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width \x3e 0.25) {\nlowp vec4 outlinePixelColor \x3d u_outlineColor;\nconst float outlineLimitRatio \x3d (16.0 / 86.0);\nfloat clampedOutlineSize \x3d softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor \x3d v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor \x3d v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor \x3d texture2D(u_texture, v_tex);\ngl_FragColor \x3d v_opacity * texColor;\n#endif\n}",
"icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\nconst float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\nconst float tileCoordRatio \x3d 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color \x3d color;\nv_opacity \x3d opacity;\n#ifdef SDF\nv_halo_width \x3d halo_width;\n#endif\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *\x3d interpolatedOpacity;\nmediump float a_angle         \x3d a_levelInfo[1];\nmediump float a_minLevel      \x3d a_levelInfo[2];\nmediump float a_maxLevel      \x3d a_levelInfo[3];\nmediump vec2 a_tex            \x3d a_texAngleRange.xy;\nmediump float delta_z \x3d 0.0;\nmediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_opacity, 0.0);\nvec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\nv_size \x3d abs(offset);\n#ifdef SDF\noffset \x3d (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\nv_tex \x3d a_tex.xy / u_mosaicSize;\n}"},
line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include \x3cutil/encoding.glsl\x3e\n#endif\nvoid main()\n{\nmediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\nlowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX \x3d fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color \x3d texture2D(u_texture, texCoord);\ngl_FragColor \x3d alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX \x3d fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY \x3d  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist \x3d d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor \x3d alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor \x3d alpha * v_color;\n#endif\n}",
"line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale \x3d 1.0 / 31.0;\nconst mediump float tileCoordRatio \x3d 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth \x3d 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_blur \x3d blur + u_antialiasing;\nv_normal \x3d a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          \x3d tlbr / u_mosaicSize.xyxy;\nv_patternSize   \x3d vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio \x3d width / v_patternSize.y;\n#else\nv_widthRatio \x3d width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth \x3d (width + u_antialiasing) * 0.5;\nmediump vec2 dir \x3d a_dir_normal.xy * scale;\nmediump vec2 offset_ \x3d a_extrude_offset.zw * scale * offset;\nmediump vec2 dist \x3d v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance \x3d a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n}"},
outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\nvoid main()\n{\nlowp float dist \x3d abs(v_normal.y);\nlowp float alpha \x3d smoothstep(1.0, 0.0, dist);\ngl_FragColor \x3d alpha * v_color;\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale \x3d 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color \x3d color * opacity;\nv_normal \x3d a_xnormal;\nmediump vec2 dist \x3d u_outline_width * scale * a_offset;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth, 1.0);\n}"},
text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\nvoid main()\n{\nlowp float dist \x3d texture2D(u_texture, v_tex).a;\nmediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor \x3d alpha * v_color;\n}","text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision \x3d 1.0 / 8.0;\nconst mediump float edgePos \x3d 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale \x3d 1.0 / 24.0;\nconst float sdfPixel \x3d 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo \x3e 0.5)\n{\nv_color \x3d halo_color * opacity;\nhalo_width *\x3d sdfPixel;\nhalo_blur *\x3d sdfPixel;\n}\nelse\n{\nv_color \x3d color * opacity;\nhalo_width \x3d 0.0;\nhalo_blur \x3d 0.0;\n}\nfloat modded \x3d mod(a_opacityInfo, 128.0);\nfloat targetOpacity \x3d (a_opacityInfo - modded) / 128.0;\nfloat startOpacity \x3d modded / 127.0;\nfloat interpolatedOpacity \x3d clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *\x3d interpolatedOpacity;\nmediump float a_angle       \x3d a_levelInfo[1];\nmediump float a_minLevel    \x3d a_levelInfo[2];\nmediump float a_maxLevel    \x3d a_levelInfo[3];\nmediump vec2 a_tex          \x3d a_texAngleRange.xy;\nmediump float a_visMinAngle    \x3d a_texAngleRange.z;\nmediump float a_visMaxAngle    \x3d a_texAngleRange.w;\nmediump float delta_z \x3d 0.0;\nmediump float angle \x3d mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle \x3c a_visMaxAngle)\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z +\x3d 1.0 - step(a_minLevel, u_level);\ndelta_z +\x3d step(a_maxLevel, u_level);\ndelta_z +\x3d step(v_color[3], 0.0);\nv_tex \x3d a_tex.xy / u_mosaicSize;\nv_edgeDistance \x3d edgePos - halo_width / size;\nv_edgeWidth \x3d (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos \x3d u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position \x3d vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},
util:{"encoding.glsl":"const vec4 rgba2float_factors \x3d vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}}})},"esri/views/webgl/ShaderCompiler":function(){define(["exports"],function(m){class w{constructor(r){this._readFile=r}resolveIncludes(r){return this._resolve(r)}_resolve(r,
b=new Map){if(b.has(r))return b.get(r);const e=this._read(r);if(!e)throw Error(`cannot find shader file ${r}`);const f=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let d=f.exec(e);const c=[];for(;null!=d;)c.push({path:d[1],start:d.index,length:d[0].length}),d=f.exec(e);let g=0,h="";c.forEach(k=>{h+=e.slice(g,k.start);h+=b.has(k.path)?"":this._resolve(k.path,b);g=k.start+k.length});h+=e.slice(g);b.set(r,h);return h}_read(r){return this._readFile(r)}}m.ShaderCompiler=w;Object.defineProperty(m,Symbol.toStringTag,
{value:"Module"})})},"esri/views/webgl/programUtils":function(){define(["exports"],function(m){m.glslifyDefineMap=function(w){let r="";for(const e in w){var b=w[e];if("boolean"===typeof b)b&&(r+=`#define ${e}\n`);else if("number"===typeof b)r+=`#define ${e} ${b.toFixed()}\n`;else if("object"===typeof b){const {options:f,value:d}=b;if("number"===typeof f[d]){const {value:c,options:g,namespace:h}=b;b=h?`${h}_`:"";for(const k in g)r+=`#define ${b}${k} ${g[k].toFixed()}\n`;r+=`#define ${e} ${b}${c}\n`}else{const c=
b.options;let g=0;for(const h in c)r+=`#define ${c[h]} ${(g++).toFixed()}\n`;r+=`#define ${e} ${c[b.value]}\n`}}}return r};Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleRepository":function(){define(["./StyleDefinition","./StyleLayer"],function(m,w){class r{constructor(b){this._style=b;this.backgroundBucketIds=[];this._uidToLayer=new Map;this._layerByName={};this._runningId=0;b.layers||(b.layers=[]);this.version=parseFloat(b.version);
if(this.layers=b.layers.map((e,f,d)=>this._create(e,f,d)).filter(e=>!!e))for(b=0;b<this.layers.length;b++){const e=this.layers[b];this._layerByName[e.id]=e;this._uidToLayer.set(e.uid,e);e.type===m.StyleLayerType.BACKGROUND&&this.backgroundBucketIds.push(e.id)}this._identifyRefLayers()}isPainterDataDriven(b){return(b=this._layerByName[b])?b.isPainterDataDriven():!1}getStyleLayerId(b){return b>=this.layers.length?null:this.layers[b].id}getStyleLayerByUID(b){return this._uidToLayer.get(b)??null}getStyleLayerIndex(b){return(b=
this._layerByName[b])?this.layers.indexOf(b):-1}setStyleLayer(b,e){if(b?.id){var f=this._style;null!=e&&e>=this.layers.length&&(e=this.layers.length-1);var d=!0,c;if(c=this._layerByName[b.id]){const g=this.layers.indexOf(c);e||=g;e===g?(d=!1,c=r._recreateLayer(b,c),this.layers[e]=c,f.layers[e]=b):(this.layers.splice(g,1),f.layers.splice(g,1),c=this._create(b,e,this.layers),this.layers.splice(e,0,c),f.layers.splice(e,0,b))}else c=this._create(b,e,this.layers),!e||e>=this.layers.length?(this.layers.push(c),
f.layers.push(b)):(this.layers.splice(e,0,c),f.layers.splice(e,0,b));this._layerByName[b.id]=c;this._uidToLayer.set(c.uid,c);d&&this._recomputeZValues();this._identifyRefLayers()}}getStyleLayer(b){return(b=this._layerByName[b])?{type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:b.layout,paint:b.paint}:null}deleteStyleLayer(b){const e=this._layerByName[b];e&&(delete this._layerByName[b],this._uidToLayer.delete(e.uid),b=this.layers.indexOf(e),
this.layers.splice(b,1),this._style.layers.splice(b,1),this._recomputeZValues(),this._identifyRefLayers())}getLayerById(b){return this._layerByName[b]}getLayoutProperties(b){return(b=this._layerByName[b])?b.layout:null}getPaintProperties(b){return(b=this._layerByName[b])?b.paint:null}setPaintProperties(b,e){if(b=this._layerByName[b]){var f=r._recreateLayer({type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:b.layout,paint:e},
b),d=this.layers.indexOf(b);this.layers[d]=f;this._style.layers[d].paint=e;this._layerByName[b.id]=f;this._uidToLayer.set(b.uid,f)}}setLayoutProperties(b,e){if(b=this._layerByName[b]){var f=r._recreateLayer({type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:e,paint:b.paint},b),d=this.layers.indexOf(b);this.layers[d]=f;this._style.layers[d].layout=e;this._layerByName[b.id]=f;this._uidToLayer.set(b.uid,f)}}setStyleLayerVisibility(b,
e){if(b=this._layerByName[b]){var f=b.layout||{};f.visibility=e;e=r._recreateLayer({type:b.typeName,id:b.id,source:b.source,"source-layer":b.sourceLayer,minzoom:b.minzoom,maxzoom:b.maxzoom,filter:b.filter,layout:f,paint:b.paint},b);var d=this.layers.indexOf(b);this.layers[d]=e;this._style.layers[d].layout=f;this._layerByName[b.id]=e;this._uidToLayer.set(b.uid,e)}}getStyleLayerVisibility(b){return(b=this._layerByName[b])?b.layout?.visibility??"visible":"none"}_recomputeZValues(){const b=this.layers,
e=1/(b.length+1);for(let f=0;f<b.length;f++)b[f].z=1-(1+f)*e}_identifyRefLayers(){const b=[],e=[];let f=0;for(const g of this.layers){const h=g.layout;if(g.type===m.StyleLayerType.FILL){var d=g,c=g.source+"|"+g.sourceLayer;c+="|"+(h?.visibility??"");c+="|"+g.minzoom;c+="|"+g.maxzoom;c+="|"+JSON.stringify(g.filter);if(d.hasDataDrivenFill||d.hasDataDrivenOutline)c+="|"+f;b.push({key:c,layer:g})}else if(g.type===m.StyleLayerType.LINE){d=g;c=g.paint;c=null!=c&&(null!=c["line-pattern"]||null!=c["line-dasharray"]);
let k=g.source+"|"+g.sourceLayer;k+="|"+(h?.visibility??"");k+="|"+g.minzoom;k+="|"+g.maxzoom;k+="|"+JSON.stringify(g.filter);k+="|"+(void 0!==h?h["line-cap"]:"");k+="|"+(void 0!==h?h["line-join"]:"");if(d.hasDataDrivenLine||c)k+="|"+f;e.push({key:k,layer:g})}++f}this._assignRefLayers(b);this._assignRefLayers(e)}_assignRefLayers(b){b.sort((h,k)=>h.key<k.key?-1:h.key>k.key?1:0);let e,f;const d=b.length;for(let h=0;h<d;h++){const k=b[h];if(k.key===e)k.layer.refLayerId=f;else if(e=k.key,f=k.layer.id,
k.layer.type===m.StyleLayerType.FILL){if(!k.layer.getPaintProperty("fill-outline-color"))for(var c=h+1;c<d;c++){var g=b[c];if(g.key===e){if(g.layer.getPaintProperty("fill-outline-color")){b[h]=g;b[c]=k;f=g.layer.id;break}}else break}}else if(k.layer.type===m.StyleLayerType.LINE)for(c=k.layer,g=h+1;g<d;g++){const l=b[g];if(l.key!==e)break;const q=l.layer;if(c.canUseThinTessellation&&!q.canUseThinTessellation||!c.canUseThinTessellation&&(q.getPaintProperty("line-pattern")||q.getPaintProperty("line-dasharray")))c=
q,b[h]=l,b[g]=k,f=l.layer.id}}}_create(b,e,f){e=1-1/(f.length+1)*(1+e);f=this._runningId++;switch(b.type){case "background":return new w.BackgroundStyleLayer(m.StyleLayerType.BACKGROUND,b,e,f);case "fill":return new w.FillStyleLayer(m.StyleLayerType.FILL,b,e,f);case "line":return new w.LineStyleLayer(m.StyleLayerType.LINE,b,e,f);case "symbol":return new w.SymbolStyleLayer(m.StyleLayerType.SYMBOL,b,e,f);case "raster":console.warn(`Unsupported vector tile raster layer ${b.id}`);break;case "circle":return new w.CircleStyleLayer(m.StyleLayerType.CIRCLE,
b,e,f)}return null}static _recreateLayer(b,e){switch(b.type){case "background":return new w.BackgroundStyleLayer(m.StyleLayerType.BACKGROUND,b,e.z,e.uid);case "fill":return new w.FillStyleLayer(m.StyleLayerType.FILL,b,e.z,e.uid);case "line":return new w.LineStyleLayer(m.StyleLayerType.LINE,b,e.z,e.uid);case "symbol":return new w.SymbolStyleLayer(m.StyleLayerType.SYMBOL,b,e.z,e.uid);case "raster":console.warn(`Unsupported vector tile raster layer ${b.id}`);break;case "circle":return new w.CircleStyleLayer(m.StyleLayerType.CIRCLE,
b,e.z,e.uid)}return null}}return r})},"esri/views/2d/engine/vectorTiles/style/StyleLayer":function(){define("exports ../../../../../geometry/support/aaBoundingRect ../enums ../GeometryUtils ../shaders/VTLBackgroundMaterial ../shaders/VTLCircleMaterial ../shaders/VTLFillMaterial ../shaders/VTLLineMaterial ../shaders/VTLSymbolMaterial ./Filter ./StyleDefinition ./StyleProperty ../../webgl/definitions".split(" "),function(m,w,r,b,e,f,d,c,g,h,k,l,q){function v(u){u=u?.getGeometry();if(null==u)return null;
let y=Infinity,x=Infinity,C=-Infinity,E=-Infinity;for(const I of u)if(I)for(const L of I)y=Math.min(y,L.x),x=Math.min(x,L.y),C=Math.max(C,L.x),E=Math.max(E,L.y);return w.fromValues(y,x,C,E)}m.CapType=void 0;(function(u){u[u.BUTT=0]="BUTT";u[u.ROUND=1]="ROUND";u[u.SQUARE=2]="SQUARE";u[u.UNKNOWN=4]="UNKNOWN"})(m.CapType||(m.CapType={}));class p{constructor(u,y,x,C,E,I){this.layer=u;this.feature=y;this.bounds=x;this.normalizationRatio=C;this.normalizationOffsetX=E;this.normalizationOffsetY=I}}class z{constructor(u,
y,x,C){this.type=u;this.typeName=y.type;this.id=y.id;this.source=y.source;this.sourceLayer=y["source-layer"];this.minzoom=y.minzoom;this.maxzoom=y.maxzoom;this.filter=y.filter;this.layout=y.layout;this.paint=y.paint;this.z=x;this.uid=C;switch(u){case k.StyleLayerType.BACKGROUND:this._layoutDefinition=k.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=k.StyleDefinition.backgroundPaintDefinition;break;case k.StyleLayerType.FILL:this._layoutDefinition=k.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=k.StyleDefinition.fillPaintDefinition;break;case k.StyleLayerType.LINE:this._layoutDefinition=k.StyleDefinition.lineLayoutDefinition;this._paintDefinition=k.StyleDefinition.linePaintDefinition;break;case k.StyleLayerType.SYMBOL:this._layoutDefinition=k.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=k.StyleDefinition.symbolPaintDefinition;break;case k.StyleLayerType.CIRCLE:this._layoutDefinition=k.StyleDefinition.circleLayoutDefinition,this._paintDefinition=k.StyleDefinition.circlePaintDefinition}this._layoutProperties=
this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=h.createFilter(this.filter)}getLayoutProperty(u){return this._layoutProperties[u]}getPaintProperty(u){return this._paintProperties[u]}getLayoutValue(u,y,x){let C;const E=this._layoutProperties[u];E&&(C=E.getValue(y,x));void 0===C&&(C=this._layoutDefinition[u]["default"]);return C}getPaintValue(u,y,x){let C;const E=this._paintProperties[u];
E&&(C=E.getValue(y,x));void 0===C&&(C=this._paintDefinition[u]["default"]);return C}isPainterDataDriven(){const u=this._paintProperties;if(u)for(const y in u)if(u[y].isDataDriven)return!0;return!1}isIntersectingFeature(u,y,x,C,E,I,L){return!1}getFeatureInflatedBounds(u,y,x,C){return null}_parseLayout(u){const y={};for(const x in u){const C=this._layoutDefinition[x];C&&(y[x]=new l(C,u[x]))}return y}_parsePaint(u){const y={};for(const x in u){const C=this._paintDefinition[x];C&&(y[x]=new l(C,u[x]))}return y}computeAttributesKey(u,
y,x,C){let E=0,I=0;for(const L of y){y=3;if(!L||L!==C){const {isLayout:P,isOptional:K}=x[L];y=P?this.getLayoutProperty(L):this.getPaintProperty(L);y=y?.interpolator?2:y?.isDataDriven?1:K&&!y?3:0}I|=y<<E;E+=2}return I<<3|u}}class F extends z{constructor(u,y,x,C){super(u,y,x,C);this.backgroundMaterial=new e.VTLBackgroundMaterial(this.computeAttributesKey(r.ShaderProgramType.BACKGROUND,e.VTLBackgroundMaterial.ATTRIBUTES,e.VTLBackgroundMaterial.ATTRIBUTES_INFO))}}class B extends z{constructor(u,y,x,C){super(u,
y,x,C);u=this.getPaintProperty("fill-color");y=this.getPaintProperty("fill-opacity");x=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=u?.isDataDriven;this.hasDataDrivenOpacity=y?.isDataDriven;this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||x?.isDataDriven;y=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!y;this.hasDataDrivenOutlineColor=y?.isDataDriven;this.hasDataDrivenOutline=y?y.isDataDriven:u?u.isDataDriven:!1;this.hasDataDrivenOutline=
(y?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity;this.fillMaterial=new d.VTLFillMaterial(this.computeAttributesKey(r.ShaderProgramType.FILL,d.VTLFillMaterial.ATTRIBUTES,d.VTLFillMaterial.ATTRIBUTES_INFO));this.outlineMaterial=new d.VTLOutlineMaterial(this.computeAttributesKey(r.ShaderProgramType.OUTLINE,this.outlineUsesFillColor?d.VTLOutlineMaterial.ATTRIBUTES_FILL:d.VTLOutlineMaterial.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?d.VTLOutlineMaterial.ATTRIBUTES_INFO_FILL:
d.VTLOutlineMaterial.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}getFeatureInflatedBounds(u,y,x,C){x=v(u);if(!x)return null;u=this.getPaintValue("fill-translate",y,u);C*=Math.max(u[0],u[1]);x[0]-=C;x[2]-=C;x[1]+=C;x[3]+=C;return x}isIntersectingFeature(u,y,x,C,E,I,L){const P=C.getGeometry();if(!P)return!1;const K=8/L.normalizationRatio;u=u/L.normalizationRatio+L.normalizationOffsetX;y=y/L.normalizationRatio+L.normalizationOffsetY;C=b.translateAnchor(this.getPaintValue("fill-translate",E,C),
this.getPaintValue("fill-translate-anchor",E,C),I,8);u-=K*C.x;y-=K*C.y;return b.pointInPolygon(u,y,P)?!0:b.distanceFromToPolylineWithinThreshold(u,y,P,K*x)}}class D extends z{constructor(u,y,x,C){super(u,y,x,C);u=this.getPaintProperty("line-pattern");this.lineMaterial=new c.VTLLineMaterial(this.computeAttributesKey(r.ShaderProgramType.LINE,c.VTLLineMaterial.ATTRIBUTES,c.VTLLineMaterial.ATTRIBUTES_INFO,u?"line-dasharray":""));this.hasDataDrivenLine=this.getPaintProperty("line-blur")?.isDataDriven||
this.getPaintProperty("line-color")?.isDataDriven||this.getPaintProperty("line-gap-width")?.isDataDriven||this.getPaintProperty("line-offset")?.isDataDriven||this.getPaintProperty("line-opacity")?.isDataDriven||this.getPaintProperty("line-pattern")?.isDataDriven||this.getPaintProperty("line-dasharray")?.isDataDriven||this.getLayoutProperty("line-cap")?.isDataDriven||this.getPaintProperty("line-width")?.isDataDriven;this.canUseThinTessellation=!1;!this.hasDataDrivenLine&&(u=this.getPaintProperty("line-width"),
!u||"number"===typeof u&&.5*u<q.thinLineHalfWidthThreshold)&&(u=this.getPaintProperty("line-offset"),!u||"number"===typeof u&&0===u)&&(this.canUseThinTessellation=!0)}getDashKey(u,y){switch(y){case m.CapType.BUTT:y="Butt";break;case m.CapType.ROUND:y="Round";break;case m.CapType.SQUARE:y="Square";break;default:y="Butt"}return`dasharray-[${u.toString()}]-${y}`}getFeatureInflatedBounds(u,y,x,C){x=v(u);if(!x)return null;var E=this.getPaintValue("line-translate",y,u);E=C*Math.max(E[0],E[1]);x[0]-=E;x[2]-=
E;x[1]+=E;x[3]+=E;E=C*Math.abs(this.getPaintValue("line-offset",y,u)||0);u=this.getPaintValue("line-width",y,u);C*=u/2;x[0]-=E+C;x[1]-=E+C;x[2]+=E+C;x[3]+=E+C;return x}isIntersectingFeature(u,y,x,C,E,I,L){let P=C.getGeometry();if(!P)return!1;const K=8/L.normalizationRatio;u=u/L.normalizationRatio+L.normalizationOffsetX;y=y/L.normalizationRatio+L.normalizationOffsetY;I=b.translateAnchor(this.getPaintValue("line-translate",E,C),this.getPaintValue("line-translate-anchor",E,C),I,8);u-=K*I.x;y-=K*I.y;
I=K*this.getPaintValue("line-offset",E,C)||0;0!==I&&(P=b.offsetLine(P,-I));C=this.getPaintValue("line-width",E,C);return b.distanceFromToPolylineWithinThreshold(u,y,P,K*(x+C/2))}}class G extends z{constructor(u,y,x,C){super(u,y,x,C);this.iconMaterial=new g.VTLIconMaterial(this.computeAttributesKey(r.ShaderProgramType.ICON,g.VTLIconMaterial.ATTRIBUTES,g.VTLIconMaterial.ATTRIBUTES_INFO));this.textMaterial=new g.VTLTextMaterial(this.computeAttributesKey(r.ShaderProgramType.TEXT,g.VTLTextMaterial.ATTRIBUTES,
g.VTLTextMaterial.ATTRIBUTES_INFO));this.hasDataDrivenIcon=this.getPaintProperty("icon-color")?.isDataDriven||this.getPaintProperty("icon-halo-blur")?.isDataDriven||this.getPaintProperty("icon-halo-color")?.isDataDriven||this.getPaintProperty("icon-halo-width")?.isDataDriven||this.getPaintProperty("icon-opacity")?.isDataDriven||this.getLayoutProperty("icon-size")?.isDataDriven;this.hasDataDrivenText=this.getPaintProperty("text-color")?.isDataDriven||this.getPaintProperty("text-halo-blur")?.isDataDriven||
this.getPaintProperty("text-halo-color")?.isDataDriven||this.getPaintProperty("text-halo-width")?.isDataDriven||this.getPaintProperty("text-opacity")?.isDataDriven||this.getLayoutProperty("text-size")?.isDataDriven}}class H extends z{constructor(u,y,x,C){super(u,y,x,C);this.circleMaterial=new f.VTLCircleMaterial(this.computeAttributesKey(r.ShaderProgramType.CIRCLE,f.VTLCircleMaterial.ATTRIBUTES,f.VTLCircleMaterial.ATTRIBUTES_INFO))}getFeatureInflatedBounds(u,y,x,C){x=v(u);if(!x)return null;var E=
this.getPaintValue("circle-translate",y,u);E=Math.max(E[0],E[1]);x[0]-=E;x[2]-=E;x[1]+=E;x[3]+=E;u=8*(this.getPaintValue("circle-radius",y,u)+this.getPaintValue("circle-stroke-width",y,u));C*=u/2;x[0]-=C;x[1]-=C;x[2]+=C;x[3]+=C;return x}isIntersectingFeature(u,y,x,C,E,I,L){var P=C.getGeometry();if(!P)return!1;const K=8/L.normalizationRatio;u=u/L.normalizationRatio+L.normalizationOffsetX;y=y/L.normalizationRatio+L.normalizationOffsetY;x*=K;I=b.translateAnchor(this.getPaintValue("circle-translate",
E,C),this.getPaintValue("circle-translate-anchor",E,C),I,K);C=K*(this.getPaintValue("circle-radius",E,C)+this.getPaintValue("circle-stroke-width",E,C));for(const Q of P)if(Q)for(const T of Q)if(P=T.x+I.x,E=T.y+I.y,Math.sqrt((u-P)*(u-P)+(y-E)*(y-E))-x<=C)return!0;return!1}}class M{constructor(u,y,x){this.allowOverlap=u.getLayoutValue("icon-allow-overlap",y);this.ignorePlacement=u.getLayoutValue("icon-ignore-placement",y);this.keepUpright=u.getLayoutValue("icon-keep-upright",y);this.optional=u.getLayoutValue("icon-optional",
y);this.rotationAlignment=u.getLayoutValue("icon-rotation-alignment",y);this.rotationAlignment===k.RotationAlignment.AUTO&&(this.rotationAlignment=x?k.RotationAlignment.MAP:k.RotationAlignment.VIEWPORT);x=u.getLayoutProperty("icon-anchor");x?.isDataDriven?this._anchorProp=x:this.anchor=u.getLayoutValue("icon-anchor",y);x=u.getLayoutProperty("icon-offset");x?.isDataDriven?this._offsetProp=x:this.offset=u.getLayoutValue("icon-offset",y);x=u.getLayoutProperty("icon-padding");x?.isDataDriven?this._paddingProp=
x:this.padding=u.getLayoutValue("icon-padding",y);x=u.getLayoutProperty("icon-rotate");x?.isDataDriven?this._rotateProp=x:this.rotate=u.getLayoutValue("icon-rotate",y);x=u.getLayoutProperty("icon-size");x?.isDataDriven?this._sizeProp=x:this.size=u.getLayoutValue("icon-size",y)}update(u,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(u,y));this._offsetProp&&(this.offset=this._offsetProp.getValue(u,y));this._paddingProp&&(this.padding=this._paddingProp.getValue(u,y));this._rotateProp&&(this.rotate=
this._rotateProp.getValue(u,y));this._sizeProp&&(this.size=this._sizeProp.getValue(u,y))}}class N{constructor(u,y,x){this.allowOverlap=u.getLayoutValue("text-allow-overlap",y);this.ignorePlacement=u.getLayoutValue("text-ignore-placement",y);this.keepUpright=u.getLayoutValue("text-keep-upright",y);this.optional=u.getLayoutValue("text-optional",y);this.rotationAlignment=u.getLayoutValue("text-rotation-alignment",y);this.rotationAlignment===k.RotationAlignment.AUTO&&(this.rotationAlignment=x?k.RotationAlignment.MAP:
k.RotationAlignment.VIEWPORT);x=u.getLayoutProperty("text-anchor");x?.isDataDriven?this._anchorProp=x:this.anchor=u.getLayoutValue("text-anchor",y);x=u.getLayoutProperty("text-justify");x?.isDataDriven?this._justifyProp=x:this.justify=u.getLayoutValue("text-justify",y);x=u.getLayoutProperty("text-letter-spacing");x?.isDataDriven?this._letterSpacingProp=x:this.letterSpacing=u.getLayoutValue("text-letter-spacing",y);x=u.getLayoutProperty("text-line-height");x?.isDataDriven?this._lineHeightProp=x:this.lineHeight=
u.getLayoutValue("text-line-height",y);x=u.getLayoutProperty("text-max-angle");x?.isDataDriven?this._maxAngleProp=x:this.maxAngle=u.getLayoutValue("text-max-angle",y);x=u.getLayoutProperty("text-max-width");x?.isDataDriven?this._maxWidthProp=x:this.maxWidth=u.getLayoutValue("text-max-width",y);x=u.getLayoutProperty("text-offset");x?.isDataDriven?this._offsetProp=x:this.offset=u.getLayoutValue("text-offset",y);x=u.getLayoutProperty("text-padding");x?.isDataDriven?this._paddingProp=x:this.padding=u.getLayoutValue("text-padding",
y);x=u.getLayoutProperty("text-rotate");x?.isDataDriven?this._rotateProp=x:this.rotate=u.getLayoutValue("text-rotate",y);x=u.getLayoutProperty("text-size");x?.isDataDriven?this._sizeProp=x:this.size=u.getLayoutValue("text-size",y);x=u.getLayoutProperty("text-writing-mode");x?.isDataDriven?this._writingModeProp=x:this.writingMode=u.getLayoutValue("text-writing-mode",y)}update(u,y){this._anchorProp&&(this.anchor=this._anchorProp.getValue(u,y));this._justifyProp&&(this.justify=this._justifyProp.getValue(u,
y));this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(u,y));this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(u,y));this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(u,y));this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(u,y));this._offsetProp&&(this.offset=this._offsetProp.getValue(u,y));this._paddingProp&&(this.padding=this._paddingProp.getValue(u,y));this._rotateProp&&(this.rotate=this._rotateProp.getValue(u,y));this._sizeProp&&
(this.size=this._sizeProp.getValue(u,y));this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(u,y))}}m.BackgroundStyleLayer=F;m.CircleStyleLayer=H;m.FillStyleLayer=B;m.IconLayout=M;m.IndexItem=p;m.LineStyleLayer=D;m.StyleLayer=z;m.SymbolStyleLayer=G;m.TextLayout=N;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLBackgroundMaterial":function(){define(["exports","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],
function(m,w,r,b){class e extends w.VTLMaterial{constructor(f){super(f)}geometryInfo(){return e.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return e.ATTRIBUTES}attributesInfo(){return e.ATTRIBUTES_INFO}}e.ATTRIBUTES=[];e.GEOMETRY_LAYOUT=[new b.VertexElementDescriptor("a_pos",2,r.DataType.BYTE,0,2)];e.ATTRIBUTES_INFO={};m.VTLBackgroundMaterial=e;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLMaterial":function(){define(["exports",
"../MemoryBuffer","./enums","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(m,w,r,b,e){class f{constructor(g){this._locations=new Map;this._key=g}get key(){return this._key}get type(){return this._key&7}defines(){return[]}getStride(){this._layoutInfo||this._buildAttributesInfo();return this._stride}getAttributeLocations(){0===this._locations.size&&this._buildAttributesInfo();return this._locations}getLayoutInfo(){this._layoutInfo||this._buildAttributesInfo();return this._layoutInfo}getEncodingInfos(){this._propertyEncodingInfo||
this._buildAttributesInfo();return this._propertyEncodingInfo}getUniforms(){this._uniforms||this._buildAttributesInfo();return this._uniforms}getShaderHeader(){this._shaderHeader||this._buildAttributesInfo();return this._shaderHeader}getShaderMain(){this._shaderMain||this._buildAttributesInfo();return this._shaderMain}setDataUniforms(g,h,k,l,q){var v=this.getUniforms();for(const p of v){const {name:z,type:F,getValue:B}=p;v=B(k,h,l,q);if(null!==v)switch(F){case "float":g.setUniform1f(z,v);break;case "vec2":g.setUniform2fv(z,
v);break;case "vec4":g.setUniform4fv(z,v)}}}encodeAttributes(g,h,k,l){const q=this.attributesInfo(),v=this.getEncodingInfos(),p=[];let z=0,F=0;for(const D of Object.keys(v)){var B=v[D];const {type:G,precisionFactor:H,isLayout:M}=q[D],N=M?k.getLayoutProperty(D):k.getPaintProperty(D),u=N.interpolator?.getInterpolationRange(h);let y=0;for(const x of B){const {offset:C,bufferElementsToAdd:E}=x;if(0<E){for(B=0;B<E;B++)p.push(0);z+=F;F=x.bufferElementsToAdd}B=l??N.getValue(u?u[y]:h,g);switch(G){case r.EncodingType.R8_SIGNED:case r.EncodingType.R8_UNSIGNED:p[z]|=
this._encodeByte(B*(H||1),8*C);break;case r.EncodingType.R16_SIGNED:case r.EncodingType.R16_UNSIGNED:p[z]|=this._encodeShort(B*(H||1),8*C);break;case r.EncodingType.R8G8_SIGNED:case r.EncodingType.R8G8_UNSIGNED:p[z]|=this._encodeByte(B*(H||1),8*C);p[z]|=this._encodeByte(B*(H||1),8*C+8);break;case r.EncodingType.R16G16_SIGNED:case r.EncodingType.R16G16_UNSIGNED:p[z]|=this._encodeShort(B*(H||1),8*C);p[z]|=this._encodeShort(B*(H||1),8*C+16);break;case r.EncodingType.R8G8B8A8_SIGNED:case r.EncodingType.R8G8B8A8_UNSIGNED:p[z]|=
this._encodeByte(B*(H||1),8*C);p[z]|=this._encodeByte(B*(H||1),8*C+8);p[z]|=this._encodeByte(B*(H||1),8*C+16);p[z]|=this._encodeByte(B*(H||1),8*C+24);break;case r.EncodingType.R8G8B8A8_COLOR:p[z]=this._encodeColor(B);break;case r.EncodingType.R16G16B16A16_DASHARRAY:case r.EncodingType.R16G16B16A16_PATTERN:this._encodePattern(z,p,B);break;default:throw Error("Unsupported encoding type");}y++}}return p}getAtributeState(g){const h=3+2*g;g=0|this._bit(h);return g|=this._bit(h+1)<<1}_buildAttributesInfo(){const g=
[],h={};var k={},l=-1;const q=this.attributesInfo();var v=this.attributes();let p=-1;for(const D of v){p++;v=this.getAtributeState(p);if(v===r.AttributeStatus.UNIFORM||v===r.AttributeStatus.UNUSED)continue;var z=q[D];const G=[];h[D]=G;z=z.type;for(let H=0;H<v;H++){const {dataType:M,bytesPerElement:N,count:u,normalized:y}=f._encodingInfo[z],x=N*u;var F=`${M}-${!0===y}`;let C=k[F],E=0;!C||4<C.count+u?(l++,C={dataIndex:l,count:0,offset:0},4!==u&&(k[F]=C),g.push({location:-1,name:"a_data_"+l,count:u,
type:M,normalized:y}),E=Math.ceil(Math.max(x/4,1))):(F=g[C.dataIndex],F.count+=u,E=Math.ceil(Math.max(F.count*N/4,1))-Math.ceil(Math.max(C.offset/4,1)));G.push({dataIndex:C.dataIndex,offset:C.offset,bufferElementsToAdd:E});C.offset+=x;C.count+=u}}for(const D of g)switch(D.type){case b.DataType.BYTE:case b.DataType.UNSIGNED_BYTE:D.count=4;break;case b.DataType.SHORT:case b.DataType.UNSIGNED_SHORT:D.count+=D.count%2}this._buildVertexBufferLayout(g);k=0;l=this._layoutInfo.geometry;for(var B of l)this._locations.set(B.name,
k++);if(B=this._layoutInfo.opacity)for(const D of B)this._locations.set(D.name,k++);this._buildShaderInfo(g,h);this._propertyEncodingInfo=h}_buildVertexBufferLayout(g){const h={},k=this.geometryInfo();let l=k[0].stride;if(0===g.length)h.geometry=k;else{const q=[];let v=l;for(const p of g)l+=d(p.type)*p.count;for(const p of k)q.push(new e.VertexElementDescriptor(p.name,p.count,p.type,p.offset,l,p.normalized));for(const p of g)q.push(new e.VertexElementDescriptor(p.name,p.count,p.type,v,l,p.normalized)),
v+=d(p.type)*p.count;h.geometry=q}this.opacityInfo()&&(h.opacity=this.opacityInfo());this._layoutInfo=h;this._stride=l}_buildShaderInfo(g,h){let k="\n",l="\n";const q=[];for(var v of g)k+=`attribute ${this._getType(v.count)} ${v.name};\n`;var p=this.attributes();g=this.attributesInfo();v=-1;for(const B of p){v++;const {name:D,type:G,precisionFactor:H,isLayout:M}=g[B];p=H&&1!==H?` * ${1/H}`:"";const {bytesPerElement:N,count:u}=f._encodingInfo[G];var z=y=>`a_data_${y.dataIndex}${c(u,y.offset,N)}`;switch(this.getAtributeState(v)){case r.AttributeStatus.UNIFORM:p=
this._getType(u);var F=`u_${D}`;q.push({name:F,type:p,getValue:(x,C,E,I)=>{E=M?x.getLayoutValue(B,C):x.getPaintValue(B,C);if(G===r.EncodingType.R16G16B16A16_DASHARRAY){x=x.getDashKey(E,x.getLayoutValue("line-cap",C));I=I.getMosaicItemPosition(x,!1);if(null==I)return null;const {tl:L,br:P}=I;return[L[0],P[1],P[0],L[1]]}if(G===r.EncodingType.R16G16B16A16_PATTERN){I=I.getMosaicItemPosition(E,!B.includes("line-"));if(null==I)return null;const {tl:L,br:P}=I;return[L[0],P[1],P[0],L[1]]}return G===r.EncodingType.R8G8B8A8_COLOR?
(I=E[3],[I*E[0],I*E[1],I*E[2],I]):E}});k+=`uniform ${p} ${F};\n`;l+=`${p} ${D} = ${F};\n`;break;case r.AttributeStatus.DATA_DRIVEN:F=z(h[B][0]);l+=`${this._getType(u)} ${D} = ${F}${p};\n`;break;case r.AttributeStatus.INTERPOLATED_DATA_DRIVEN:F=`u_t_${D}`;q.push({name:F,type:"float",getValue:(x,C,E,I)=>(M?x.getLayoutProperty(B):x.getPaintProperty(B)).interpolator.interpolationUniformValue(E,C)});k+=`uniform float ${F};\n`;const y=z(h[B][0]);z=z(h[B][1]);l+=`${this._getType(u)} ${D} = mix(${y}${p}, ${z}${p}, ${F});\n`}}this._shaderHeader=
k;this._shaderMain=l;this._uniforms=q}_bit(g){return(this._key&1<<g)>>g}_getType(g){switch(g){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw Error("Invalid count");}_encodeColor(g){const h=255*g[3];return w.i8888to32(g[0]*h,g[1]*h,g[2]*h,h)}_encodePattern(g,h,k){if(k?.rect){var l=k.rect,q=k.width;k=k.height;h[g]=this._encodeShort(l.x+2,0);h[g]|=this._encodeShort(l.y+2+k,16);h[g+1]=this._encodeShort(l.x+2+q,0);h[g+1]|=this._encodeShort(l.y+2,16)}}_encodeByte(g,
h){return(g&255)<<h}_encodeShort(g,h){return(g&65535)<<h}}f._encodingInfo={[r.EncodingType.R8_SIGNED]:{dataType:b.DataType.BYTE,bytesPerElement:1,count:1,normalized:!1},[r.EncodingType.R8_UNSIGNED]:{dataType:b.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[r.EncodingType.R16_SIGNED]:{dataType:b.DataType.SHORT,bytesPerElement:2,count:1,normalized:!1},[r.EncodingType.R16_UNSIGNED]:{dataType:b.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[r.EncodingType.R8G8_SIGNED]:{dataType:b.DataType.BYTE,
bytesPerElement:1,count:2,normalized:!1},[r.EncodingType.R8G8_UNSIGNED]:{dataType:b.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[r.EncodingType.R16G16_SIGNED]:{dataType:b.DataType.SHORT,bytesPerElement:2,count:2,normalized:!1},[r.EncodingType.R16G16_UNSIGNED]:{dataType:b.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[r.EncodingType.R8G8B8A8_SIGNED]:{dataType:b.DataType.BYTE,bytesPerElement:1,count:4,normalized:!1},[r.EncodingType.R8G8B8A8_UNSIGNED]:{dataType:b.DataType.UNSIGNED_BYTE,
bytesPerElement:1,count:4,normalized:!1},[r.EncodingType.R8G8B8A8_COLOR]:{dataType:b.DataType.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[r.EncodingType.R16G16B16A16_DASHARRAY]:{dataType:b.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[r.EncodingType.R16G16B16A16_PATTERN]:{dataType:b.DataType.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const d=g=>{switch(g){case b.DataType.FLOAT:return 4;case b.DataType.INT:return 4;case b.DataType.UNSIGNED_INT:return 4;
case b.DataType.SHORT:return 2;case b.DataType.UNSIGNED_SHORT:return 2;case b.DataType.BYTE:return 1;case b.DataType.UNSIGNED_BYTE:return 1}},c=(g,h,k)=>{h/=k;if(1===g)switch(h){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===g)switch(h){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===g)switch(h){case 0:return".xyz";case 1:return".yzw"}return""};m.VTLMaterial=f;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/MemoryBuffer":function(){define(function(){class m{constructor(w){this._array=
[];0>=w&&console.error("strideInBytes must be positive!");this._stride=w}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return(new Uint32Array(this._array)).buffer}static i1616to32(w,r){return 65535&w|r<<16}static i8888to32(w,r,b,e){return w&255|(r&255)<<8|(b&255)<<16|e<<24}static i8816to32(w,r,b){return w&255|(r&255)<<8|b<<16}}return m})},"esri/views/2d/engine/vectorTiles/shaders/enums":function(){define(["exports"],
function(m){m.EncodingType=void 0;(function(w){w[w.R8_SIGNED=0]="R8_SIGNED";w[w.R8_UNSIGNED=1]="R8_UNSIGNED";w[w.R16_SIGNED=2]="R16_SIGNED";w[w.R16_UNSIGNED=3]="R16_UNSIGNED";w[w.R8G8_SIGNED=4]="R8G8_SIGNED";w[w.R8G8_UNSIGNED=5]="R8G8_UNSIGNED";w[w.R16G16_SIGNED=6]="R16G16_SIGNED";w[w.R16G16_UNSIGNED=7]="R16G16_UNSIGNED";w[w.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED";w[w.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED";w[w.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR";w[w.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY";
w[w.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN"})(m.EncodingType||(m.EncodingType={}));m.AttributeStatus=void 0;(function(w){w[w.UNIFORM=0]="UNIFORM";w[w.DATA_DRIVEN=1]="DATA_DRIVEN";w[w.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN";w[w.UNUSED=3]="UNUSED"})(m.AttributeStatus||(m.AttributeStatus={}));Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLCircleMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums",
"../../../../webgl/VertexElementDescriptor"],function(m,w,r,b,e){class f extends r.VTLMaterial{constructor(d){super(d)}geometryInfo(){return f.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return f.ATTRIBUTES}attributesInfo(){return f.ATTRIBUTES_INFO}}f.ATTRIBUTES="circle-radius circle-color circle-opacity circle-stroke-width circle-stroke-color circle-stroke-opacity circle-blur".split(" ");f.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,b.DataType.SHORT,0,4)];f.ATTRIBUTES_INFO=
{"circle-radius":{name:"radius",type:w.EncodingType.R8_UNSIGNED},"circle-color":{name:"color",type:w.EncodingType.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:w.EncodingType.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:w.EncodingType.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",
type:w.EncodingType.R8_UNSIGNED,precisionFactor:32}};m.VTLCircleMaterial=f;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLFillMaterial":function(){define(["exports","./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(m,w,r,b,e){class f extends r.VTLMaterial{constructor(c){super(c)}geometryInfo(){return f.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return f.ATTRIBUTES}attributesInfo(){return f.ATTRIBUTES_INFO}}
f.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"];f.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,b.DataType.SHORT,0,4)];f.ATTRIBUTES_INFO={"fill-color":{name:"color",type:w.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:w.EncodingType.R16G16B16A16_PATTERN,isOptional:!0}};class d extends r.VTLMaterial{constructor(c,g){super(c);this._usefillColor=g}geometryInfo(){return d.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this._usefillColor?
d.ATTRIBUTES_FILL:d.ATTRIBUTES_OUTLINE}attributesInfo(){return this._usefillColor?d.ATTRIBUTES_INFO_FILL:d.ATTRIBUTES_INFO_OUTLINE}}d.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"];d.ATTRIBUTES_FILL=["fill-color","fill-opacity"];d.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,b.DataType.SHORT,0,8),new e.VertexElementDescriptor("a_offset",2,b.DataType.BYTE,4,8),new e.VertexElementDescriptor("a_xnormal",2,b.DataType.BYTE,6,8)];d.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",
type:w.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100}};d.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:w.EncodingType.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100}};m.VTLFillMaterial=f;m.VTLOutlineMaterial=d;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLLineMaterial":function(){define(["exports","./enums","./VTLMaterial",
"../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(m,w,r,b,e){class f extends r.VTLMaterial{constructor(d){super(d)}geometryInfo(){return f.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return f.ATTRIBUTES}attributesInfo(){return f.ATTRIBUTES_INFO}}f.ATTRIBUTES="line-blur line-color line-gap-width line-offset line-opacity line-width line-pattern line-dasharray".split(" ");f.GEOMETRY_LAYOUT=[new e.VertexElementDescriptor("a_pos",2,b.DataType.SHORT,0,16),new e.VertexElementDescriptor("a_extrude_offset",
4,b.DataType.BYTE,4,16),new e.VertexElementDescriptor("a_dir_normal",4,b.DataType.BYTE,8,16),new e.VertexElementDescriptor("a_accumulatedDistance",2,b.DataType.UNSIGNED_SHORT,12,16)];f.ATTRIBUTES_INFO={"line-width":{name:"width",type:w.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:w.EncodingType.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:w.EncodingType.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:w.EncodingType.R8G8B8A8_COLOR},
"line-opacity":{name:"opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:w.EncodingType.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:w.EncodingType.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:w.EncodingType.R16G16B16A16_DASHARRAY,isOptional:!0}};m.VTLLineMaterial=f;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/shaders/VTLSymbolMaterial":function(){define(["exports",
"./enums","./VTLMaterial","../../../../webgl/enums","../../../../webgl/VertexElementDescriptor"],function(m,w,r,b,e){const f=[new e.VertexElementDescriptor("a_pos",2,b.DataType.SHORT,0,16),new e.VertexElementDescriptor("a_vertexOffset",2,b.DataType.SHORT,4,16),new e.VertexElementDescriptor("a_texAngleRange",4,b.DataType.UNSIGNED_BYTE,8,16),new e.VertexElementDescriptor("a_levelInfo",4,b.DataType.UNSIGNED_BYTE,12,16)],d=[new e.VertexElementDescriptor("a_opacityInfo",1,b.DataType.UNSIGNED_BYTE,0,1)];
class c extends r.VTLMaterial{constructor(h){super(h)}geometryInfo(){return f}opacityInfo(){return d}attributes(){return c.ATTRIBUTES}attributesInfo(){return c.ATTRIBUTES_INFO}}c.ATTRIBUTES="icon-color icon-opacity icon-halo-blur icon-halo-color icon-halo-width icon-size".split(" ");c.ATTRIBUTES_INFO={"icon-color":{name:"color",type:w.EncodingType.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:w.EncodingType.R8G8B8A8_COLOR},
"icon-halo-width":{name:"halo_width",type:w.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:w.EncodingType.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:w.EncodingType.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class g extends r.VTLMaterial{constructor(h){super(h)}geometryInfo(){return f}opacityInfo(){return d}attributes(){return g.ATTRIBUTES}attributesInfo(){return g.ATTRIBUTES_INFO}}g.ATTRIBUTES="text-color text-opacity text-halo-blur text-halo-color text-halo-width text-size".split(" ");
g.ATTRIBUTES_INFO={"text-color":{name:"color",type:w.EncodingType.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:w.EncodingType.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:w.EncodingType.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:w.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:w.EncodingType.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:w.EncodingType.R8_UNSIGNED,isLayout:!0}};m.VTLIconMaterial=
c;m.VTLTextMaterial=g;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/Filter":function(){define(["../expression/expression","../expression/types"],function(m,w){class r{constructor(b){this._expression=b}filter(b,e){if(!this._expression)return!0;try{return this._expression.evaluate(b,e)}catch(f){return console.log(f.message),!0}}static createFilter(b){if(!b)return null;this.isLegacyFilter(b)&&(b=this.convertLegacyFilter(b));try{const e=m.createExpression(b,
null,w.booleanType);return new r(e)}catch(e){return console.log(e.message),null}}static isLegacyFilter(b){if(!Array.isArray(b)||0===b.length)return!0;switch(b[0]){case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return 3===b.length&&"string"===typeof b[1]&&!Array.isArray(b[2]);case "in":return 3<=b.length&&"string"===typeof b[1]&&!Array.isArray(b[2]);case "!in":return!0;case "any":case "all":for(let e=1;e<b.length;e++)if(this.isLegacyFilter(b[e]))return!0;return!1;
case "none":return!0;case "has":return 2===b.length&&("$id"===b[1]||"$type"===b[1]);case "!has":return!0;default:return!1}}static convertLegacyFilter(b){if(!Array.isArray(b)||0===b.length)return!0;const e=b[0];if(1===b.length)return"any"!==e;switch(e){case "\x3d\x3d":return r.convertComparison("\x3d\x3d",b[1],b[2]);case "!\x3d":return r.negate(r.convertComparison("\x3d\x3d",b[1],b[2]));case "\x3e":case "\x3c":case "\x3e\x3d":case "\x3c\x3d":return r.convertComparison(e,b[1],b[2]);case "in":return r.convertIn(b[1],
b.slice(2));case "!in":return r.negate(r.convertIn(b[1],b.slice(2)));case "any":case "all":case "none":return r.convertCombining(e,b.slice(1));case "has":return r.convertHas(b[1]);case "!has":return r.negate(r.convertHas(b[1]));default:throw Error("Unexpected legacy filter.");}}static convertComparison(b,e,f){switch(e){case "$type":return[b,["geometry-type"],f];case "$id":return[b,["id"],f];default:return[b,["get",e],f]}}static convertIn(b,e){switch(b){case "$type":return["in",["geometry-type"],["literal",
e]];case "$id":return["in",["id"],["literal",e]];default:return["in",["get",b],["literal",e]]}}static convertHas(b){switch(b){case "$type":return!0;case "$id":return["has-id"];default:return["has",b]}}static convertCombining(b,e){return[b].concat(e.map(this.convertLegacyFilter))}static negate(b){return["!",b]}}return r})},"esri/views/2d/engine/vectorTiles/expression/expression":function(){define("exports ../../../../../Color ../../../../../core/colorUtils ../../../../../geometry/support/TileClipper ../../../unitBezier ../GeometryUtils ./types".split(" "),
function(m,w,r,b,e,f,d){function c(a,n,t){var A=typeof a;if("string"===A||"boolean"===A||"number"===A||null===a){if(t)switch(t.kind){case "string":"string"!==A&&(a=W.toString(a));break;case "number":"number"!==A&&(a=W.toNumber(a));break;case "color":a=W.toColor(a)}a=["literal",a]}if(!Array.isArray(a)||0===a.length)throw Error("Expression must be a non empty array");A=a[0];if("string"!==typeof A)throw Error("First element of expression must be a string");const J=na[A];if(void 0===J)throw Error(`Invalid expression operator "${A}"`);
if(!J)throw Error(`Unimplemented expression operator "${A}"`);return J.parse(a,n,t)}class g{constructor(a){this._parent=a;this._vars={}}add(a,n){this._vars[a]=n}get(a){return this._vars[a]?this._vars[a]:this._parent?this._parent.get(a):null}}class h{constructor(){this.type=d.valueType}static parse(a){if(1<a.length)throw Error('"id" does not expect arguments');return new h}evaluate(a,n){return a?.id}}class k{constructor(){this.type=d.stringType}static parse(a){if(1<a.length)throw Error('"geometry-type" does not expect arguments');
return new k}evaluate(a,n){if(!a)return null;switch(a.type){case b.GeometryType.Point:return"Point";case b.GeometryType.LineString:return"LineString";case b.GeometryType.Polygon:return"Polygon";default:return null}}}class l{constructor(){this.type=d.objectType}static parse(a){if(1<a.length)throw Error('"properties" does not expect arguments');return new l}evaluate(a,n){return a?.values}}class q{constructor(){this.type=d.numberType}static parse(a){if(1<a.length)throw Error('"zoom" does not expect arguments');
return new q}evaluate(a,n){return n}}class v{constructor(a,n,t){this._lhs=a;this._rhs=n;this._compare=t;this.type=d.booleanType}static parse(a,n,t){if(3!==a.length&&4!==a.length)throw Error(`"${a[0]}" expects 2 or 3 arguments`);if(4===a.length)throw Error(`"${a[0]}" collator not supported`);return new v(c(a[1],n),c(a[2],n),t)}evaluate(a,n){return this._compare(this._lhs.evaluate(a,n),this._rhs.evaluate(a,n))}}class p extends v{static parse(a,n){return v.parse(a,n,(t,A)=>t===A)}}class z extends v{static parse(a,
n){return v.parse(a,n,(t,A)=>t!==A)}}class F extends v{static parse(a,n){return v.parse(a,n,(t,A)=>t<A)}}class B extends v{static parse(a,n){return v.parse(a,n,(t,A)=>t<=A)}}class D extends v{static parse(a,n){return v.parse(a,n,(t,A)=>t>A)}}class G extends v{static parse(a,n){return v.parse(a,n,(t,A)=>t>=A)}}class H{constructor(a){this._arg=a;this.type=d.booleanType}static parse(a,n){if(2!==a.length)throw Error('"!" expects 1 argument');return new H(c(a[1],n))}evaluate(a,n){return!this._arg.evaluate(a,
n)}}class M{constructor(a){this._args=a;this.type=d.booleanType}static parse(a,n){const t=[];for(let A=1;A<a.length;A++)t.push(c(a[A],n));return new M(t)}evaluate(a,n){for(const t of this._args)if(!t.evaluate(a,n))return!1;return!0}}class N{constructor(a){this._args=a;this.type=d.booleanType}static parse(a,n){const t=[];for(let A=1;A<a.length;A++)t.push(c(a[A],n));return new N(t)}evaluate(a,n){for(const t of this._args)if(t.evaluate(a,n))return!0;return!1}}class u{constructor(a){this._args=a;this.type=
d.booleanType}static parse(a,n){const t=[];for(let A=1;A<a.length;A++)t.push(c(a[A],n));return new u(t)}evaluate(a,n){for(const t of this._args)if(t.evaluate(a,n))return!1;return!0}}class y{constructor(a,n,t){this.type=a;this._args=n;this._fallback=t}static parse(a,n,t){if(4>a.length)throw Error('"case" expects at least 3 arguments');if(1===a.length%2)throw Error('"case" expects an odd number of arguments');let A;const J=[];for(let O=1;O<a.length-1;O+=2){const S=c(a[O],n),R=c(a[O+1],n,t);A||(A=R.type);
J.push({condition:S,output:R})}a=c(a[a.length-1],n,t);A||(A=a.type);return new y(A,J,a)}evaluate(a,n){for(const t of this._args)if(t.condition.evaluate(a,n))return t.output.evaluate(a,n);return this._fallback.evaluate(a,n)}}class x{constructor(a,n){this.type=a;this._args=n}static parse(a,n){if(2>a.length)throw Error('"coalesce" expects at least 1 argument');let t;const A=[];for(let J=1;J<a.length;J++){const O=c(a[J],n);t||(t=O.type);A.push(O)}return new x(t,A)}evaluate(a,n){for(const t of this._args){const A=
t.evaluate(a,n);if(null!==A)return A}return null}}class C{constructor(a,n,t,A,J){this.type=a;this._input=n;this._labels=t;this._outputs=A;this._fallback=J}static parse(a,n){if(3>a.length)throw Error('"match" expects at least 3 arguments');if(0===a.length%2)throw Error('"case" expects an even number of arguments');let t;const A=c(a[1],n),J=[],O={};let S;for(let Z=2;Z<a.length-1;Z+=2){var R=a[Z];Array.isArray(R)||(R=[R]);for(const fa of R){R=typeof fa;if("string"!==R&&"number"!==R)throw Error('"match" requires string or number literal as labels');
if(!S)S=R;else if(R!==S)throw Error('"match" requires labels to have the same type');O[fa]=J.length}R=c(a[Z+1],n);t||(t=R.type);J.push(R)}return new C(t,A,O,J,c(a[a.length-1],n))}evaluate(a,n){const t=this._input.evaluate(a,n);return(this._outputs[this._labels[t]]||this._fallback).evaluate(a,n)}}class E{constructor(a,n,t,A,J){this._operator=a;this.type=n;this.interpolation=t;this.input=A;this._stops=J}static parse(a,n,t){const A=a[0];if(5>a.length)throw Error(`"${A}" expects at least 4 arguments`);
const J=a[1];if(!Array.isArray(J)||0===J.length)throw Error(`"${J}" is not a valid interpolation`);switch(J[0]){case "linear":if(1!==J.length)throw Error("Linear interpolation cannot have parameters");break;case "exponential":if(2!==J.length||"number"!==typeof J[1])throw Error("Exponential interpolation requires one numeric argument");break;case "cubic-bezier":if(5!==J.length)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(var O=1;5>O;O++){var S=
J[O];if("number"!==typeof S||0>S||1<S)throw Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");}break;default:throw Error(`"${a[0]}" unknown interpolation type "${J[0]}"`);}if(1!==a.length%2)throw Error(`"${A}" expects an even number of arguments`);O=c(a[2],n,d.numberType);let R;"interpolate-hcl"===A||"interpolate-lab"===A?R=d.colorType:t&&"value"!==t.kind&&(R=t);t=[];for(S=3;S<a.length;S+=2){const Z=a[S];if("number"!==typeof Z)throw Error(`"${A}" requires stop inputs as literal numbers`);
if(t.length&&t[t.length-1][0]>=Z)throw Error(`"${A}" requires strictly ascending stop inputs`);const fa=c(a[S+1],n,R);R||(R=fa.type);t.push([Z,fa])}if(R&&R!==d.colorType&&R!==d.numberType&&("array"!==R.kind||R.itemType!==d.numberType))throw Error(`"${A}" cannot interpolate type ${d.typeToString(R)}`);return new E(A,R,J,O,t)}evaluate(a,n){var t=this._stops;if(1===t.length)return t[0][1].evaluate(a,n);var A=this.input.evaluate(a,n);if(A<=t[0][0])return t[0][1].evaluate(a,n);if(A>=t[t.length-1][0])return t[t.length-
1][1].evaluate(a,n);let J=0;for(;++J<t.length&&!(A<t[J][0]););const O=E.interpolationRatio(this.interpolation,A,t[J-1][0],t[J][0]);A=t[J-1][1].evaluate(a,n);const S=t[J][1].evaluate(a,n);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(A)&&Array.isArray(S))return A.map((R,Z)=>f.interpolate(R,S[Z],O));if("color"===this.type.kind&&A instanceof w&&S instanceof w)return A=new w(A),a=new w(S),new w([f.interpolate(A.r,a.r,O),f.interpolate(A.g,a.g,O),f.interpolate(A.b,a.b,O),
f.interpolate(A.a,a.a,O)]);if("number"===this.type.kind&&"number"===typeof A&&"number"===typeof S)return f.interpolate(A,S,O);throw Error(`"${this._operator}" cannot interpolate type ${d.typeToString(this.type)}`);}if("interpolate-hcl"===this._operator)return a=r.toLCH(A),n=r.toLCH(S),t=n.h-a.h,a=r.toRGB({h:a.h+O*(180<t||-180>t?t-360*Math.round(t/360):t),c:f.interpolate(a.c,n.c,O),l:f.interpolate(a.l,n.l,O)}),new w({a:f.interpolate(A.a,S.a,O),...a});if("interpolate-lab"===this._operator)return a=
r.toLAB(A),n=r.toLAB(S),a=r.toRGB({l:f.interpolate(a.l,n.l,O),a:f.interpolate(a.a,n.a,O),b:f.interpolate(a.b,n.b,O)}),new w({a:f.interpolate(A.a,S.a,O),...a});throw Error(`Unexpected operator "${this._operator}"`);}interpolationUniformValue(a,n){const t=this._stops;if(1===t.length||a>=t[t.length-1][0])return 0;let A=0;for(;++A<t.length&&!(a<t[A][0]););return E.interpolationRatio(this.interpolation,n,t[A-1][0],t[A][0])}getInterpolationRange(a){const n=this._stops;if(1===n.length)return a=n[0][0],[a,
a];var t=n[n.length-1][0];if(a>=t)return[t,t];for(t=0;++t<n.length&&!(a<n[t][0]););return[n[t-1][0],n[t][0]]}static interpolationRatio(a,n,t,A){let J=0;"linear"===a[0]?J=E._exponentialInterpolationRatio(n,1,t,A):"exponential"===a[0]?J=E._exponentialInterpolationRatio(n,a[1],t,A):"cubic-bezier"===a[0]&&(J=e.unitBezier(a[1],a[2],a[3],a[4])(E._exponentialInterpolationRatio(n,1,t,A),1E-5));0>J?J=0:1<J&&(J=1);return J}static _exponentialInterpolationRatio(a,n,t,A){A-=t;if(0===A)return 0;a-=t;return 1===
n?a/A:(n**a-1)/(n**A-1)}}class I{constructor(a,n,t){this.type=a;this._input=n;this._stops=t}static parse(a,n){if(5>a.length)throw Error('"step" expects at least 4 arguments');if(1!==a.length%2)throw Error('"step" expects an even number of arguments');const t=c(a[1],n,d.numberType);let A;const J=[];J.push([-Infinity,c(a[2],n)]);for(let O=3;O<a.length;O+=2){const S=a[O];if("number"!==typeof S)throw Error('"step" requires stop inputs as literal numbers');if(J.length&&J[J.length-1][0]>=S)throw Error('"step" requires strictly ascending stop inputs');
const R=c(a[O+1],n);A||(A=R.type);J.push([S,R])}return new I(A,t,J)}evaluate(a,n){const t=this._stops;if(1===t.length)return t[0][1].evaluate(a,n);const A=this._input.evaluate(a,n);let J=0;for(;++J<t.length&&!(A<t[J][0]););return this._stops[J-1][1].evaluate(a,n)}}class L{constructor(a,n){this.type=a;this._output=n}static parse(a,n,t){if(4>a.length)throw Error('"let" expects at least 3 arguments');if(1===a.length%2)throw Error('"let" expects an odd number of arguments');const A=new g(n);for(let J=
1;J<a.length-1;J+=2){const O=a[J];if("string"!==typeof O)throw Error(`"let" requires a string to define variable names - found ${O}`);A.add(O,c(a[J+1],n))}a=c(a[a.length-1],A,t);return new L(a.type,a)}evaluate(a,n){return this._output.evaluate(a,n)}}class P{constructor(a,n){this.type=a;this.output=n}static parse(a,n,t){if(2!==a.length||"string"!==typeof a[1])throw Error('"var" requires just one literal string argument');n=n.get(a[1]);if(!n)throw Error(`${a[1]} must be defined before being used in a "var" expression`);
return new P(t||d.valueType,n)}evaluate(a,n){return this.output.evaluate(a,n)}}class K{constructor(a,n,t){this.type=a;this._index=n;this._array=t}static parse(a,n){if(3!==a.length)throw Error('"at" expects 2 arguments');const t=c(a[1],n,d.numberType);a=c(a[2],n);return new K(a.type.itemType,t,a)}evaluate(a,n){const t=this._index.evaluate(a,n);a=this._array.evaluate(a,n);if(0>t||t>=a.length)throw Error('"at" index out of bounds');if(t!==Math.floor(t))throw Error('"at" index must be an integer');return a[t]}}
class Q{constructor(a,n){this._key=a;this._obj=n;this.type=d.valueType}static parse(a,n){let t;switch(a.length){case 2:return t=c(a[1],n),new Q(t);case 3:return t=c(a[1],n),a=c(a[2],n),new Q(t,a);default:throw Error('"get" expects 1 or 2 arguments');}}evaluate(a,n){const t=this._key.evaluate(a,n);return this._obj?this._obj.evaluate(a,n)[t]:a?.values[t]}}class T{constructor(a,n){this._key=a;this._obj=n;this.type=d.booleanType}static parse(a,n){let t;switch(a.length){case 2:return t=c(a[1],n),new T(t);
case 3:return t=c(a[1],n),a=c(a[2],n),new T(t,a);default:throw Error('"has" expects 1 or 2 arguments');}}evaluate(a,n){const t=this._key.evaluate(a,n);return this._obj?(a=this._obj.evaluate(a,n),t in a):!!a?.values[t]}}class aa{constructor(a,n){this._key=a;this._vals=n;this.type=d.booleanType}static parse(a,n){if(3!==a.length)throw Error('"in" expects 2 arguments');return new aa(c(a[1],n),c(a[2],n))}evaluate(a,n){const t=this._key.evaluate(a,n);return this._vals.evaluate(a,n).includes(t)}}class X{constructor(a,
n,t){this._item=a;this._array=n;this._from=t;this.type=d.numberType}static parse(a,n){if(3>a.length||4<a.length)throw Error('"index-of" expects 3 or 4 arguments');const t=c(a[1],n),A=c(a[2],n);return 4===a.length?(a=c(a[3],n,d.numberType),new X(t,A,a)):new X(t,A)}evaluate(a,n){const t=this._item.evaluate(a,n),A=this._array.evaluate(a,n);if(this._from){a=this._from.evaluate(a,n);if(a!==Math.floor(a))throw Error('"index-of" index must be an integer');return A.indexOf(t,a)}return A.indexOf(t)}}class Y{constructor(a){this._arg=
a;this.type=d.numberType}static parse(a,n){if(2!==a.length)throw Error('"length" expects 2 arguments');a=c(a[1],n);return new Y(a)}evaluate(a,n){a=this._arg.evaluate(a,n);if("string"===typeof a||Array.isArray(a))return a.length;throw Error('"length" expects string or array');}}class ba{constructor(a,n,t,A){this.type=a;this._array=n;this._from=t;this._to=A}static parse(a,n){if(3>a.length||4<a.length)throw Error('"slice" expects 2 or 3 arguments');const t=c(a[1],n),A=c(a[2],n,d.numberType);if(A.type!==
d.numberType)throw Error('"slice" index must return a number');if(4===a.length){a=c(a[3],n,d.numberType);if(a.type!==d.numberType)throw Error('"slice" index must return a number');return new ba(t.type,t,A,a)}return new ba(t.type,t,A)}evaluate(a,n){const t=this._array.evaluate(a,n);if(!Array.isArray(t)&&"string"!==typeof t)throw Error('"slice" input must be an array or a string');const A=this._from.evaluate(a,n);if(0>A||A>=t.length)throw Error('"slice" index out of bounds');if(A!==Math.floor(A))throw Error('"slice" index must be an integer');
if(this._to){a=this._to.evaluate(a,n);if(0>a||a>=t.length)throw Error('"slice" index out of bounds');if(a!==Math.floor(a))throw Error('"slice" index must be an integer');return t.slice(A,a)}return t.slice(A)}}class ea{constructor(){this.type=d.booleanType}static parse(a){if(1!==a.length)throw Error('"has-id" expects no arguments');return new ea}evaluate(a,n){return void 0!==a?.id}}class V{constructor(a,n){this._args=a;this._calculate=n;this.type=d.numberType}static parse(a,n,t){a=a.slice(1).map(A=>
c(A,n));return new V(a,t)}evaluate(a,n){let t;this._args&&(t=this._args.map(A=>A.evaluate(a,n)));return this._calculate(t)}}class oa extends V{static parse(a,n){switch(a.length){case 2:return V.parse(a,n,t=>-t[0]);case 3:return V.parse(a,n,t=>t[0]-t[1]);default:throw Error('"-" expects 1 or 2 arguments');}}}class pa extends V{static parse(a,n){return V.parse(a,n,t=>{let A=1;for(const J of t)A*=J;return A})}}class qa extends V{static parse(a,n){if(3===a.length)return V.parse(a,n,t=>t[0]/t[1]);throw Error('"/" expects 2 arguments');
}}class ra extends V{static parse(a,n){if(3===a.length)return V.parse(a,n,t=>t[0]%t[1]);throw Error('"%" expects 2 arguments');}}class sa extends V{static parse(a,n){if(3===a.length)return V.parse(a,n,t=>t[0]**t[1]);throw Error('"^" expects 1 or 2 arguments');}}class ta extends V{static parse(a,n){return V.parse(a,n,t=>{let A=0;for(const J of t)A+=J;return A})}}class U{constructor(a,n){this._args=a;this._calculate=n;this.type=d.numberType}static parse(a,n){const t=a.slice(1).map(A=>c(A,n));return new U(t,
U.ops[a[0]])}evaluate(a,n){let t;this._args&&(t=this._args.map(A=>A.evaluate(a,n)));return this._calculate(t)}}U.ops={abs:a=>Math.abs(a[0]),acos:a=>Math.acos(a[0]),asin:a=>Math.asin(a[0]),atan:a=>Math.atan(a[0]),ceil:a=>Math.ceil(a[0]),cos:a=>Math.cos(a[0]),e:()=>Math.E,floor:a=>Math.floor(a[0]),ln:a=>Math.log(a[0]),ln2:()=>Math.LN2,log10:a=>Math.log(a[0])/Math.LN10,log2:a=>Math.log(a[0])/Math.LN2,max:a=>Math.max(...a),min:a=>Math.min(...a),pi:()=>Math.PI,round:a=>Math.round(a[0]),sin:a=>Math.sin(a[0]),
sqrt:a=>Math.sqrt(a[0]),tan:a=>Math.tan(a[0])};class ha{constructor(a){this._args=a;this.type=d.stringType}static parse(a,n){return new ha(a.slice(1).map(t=>c(t,n)))}evaluate(a,n){return this._args.map(t=>t.evaluate(a,n)).join("")}}class da{constructor(a,n){this._arg=a;this._calculate=n;this.type=d.stringType}static parse(a,n){if(2!==a.length)throw Error(`${a[0]} expects 1 argument`);n=c(a[1],n);return new da(n,da.ops[a[0]])}evaluate(a,n){return this._calculate(this._arg.evaluate(a,n))}}da.ops={downcase:a=>
a.toLowerCase(),upcase:a=>a.toUpperCase()};class ia{constructor(a){this._args=a;this.type=d.colorType}static parse(a,n){if(4!==a.length)throw Error('"rgb" expects 3 arguments');a=a.slice(1).map(t=>c(t,n));return new ia(a)}evaluate(a,n){const t=this._validate(this._args[0].evaluate(a,n)),A=this._validate(this._args[1].evaluate(a,n));a=this._validate(this._args[2].evaluate(a,n));return new w({r:t,g:A,b:a})}_validate(a){if("number"!==typeof a||0>a||255<a)throw Error(`${a}: invalid color component`);
return Math.round(a)}}class ja{constructor(a){this._args=a;this.type=d.colorType}static parse(a,n){if(5!==a.length)throw Error('"rgba" expects 4 arguments');a=a.slice(1).map(t=>c(t,n));return new ja(a)}evaluate(a,n){const t=this._validate(this._args[0].evaluate(a,n)),A=this._validate(this._args[1].evaluate(a,n)),J=this._validate(this._args[2].evaluate(a,n));a=this._validateAlpha(this._args[3].evaluate(a,n));return new w({r:t,g:A,b:J,a})}_validate(a){if("number"!==typeof a||0>a||255<a)throw Error(`${a}: invalid color component`);
return Math.round(a)}_validateAlpha(a){if("number"!==typeof a||0>a||1<a)throw Error(`${a}: invalid alpha color component`);return a}}class ka{constructor(a){this._color=a;this.type=d.arrayType(d.numberType,4)}static parse(a,n){if(2!==a.length)throw Error('"to-rgba" expects 1 argument');a=c(a[1],n);return new ka(a)}evaluate(a,n){return(new w(this._color.evaluate(a,n))).toRgba()}}class ca{constructor(a,n){this.type=a;this._args=n}static parse(a,n){var t=a[0];if(2>a.length)throw Error(`${t} expects at least one argument`);
let A=1,J;if("array"===t){if(2<a.length){switch(a[1]){case "string":J=d.stringType;break;case "number":J=d.numberType;break;case "boolean":J=d.booleanType;break;default:throw Error('"array" type argument must be string, number or boolean');}A++}else J=d.valueType;if(3<a.length){var O=a[2];if(null!==O&&("number"!==typeof O||0>O||O!==Math.floor(O)))throw Error('"array" length argument must be a positive integer literal');A++}J=d.arrayType(J,O)}else switch(t){case "string":J=d.stringType;break;case "number":J=
d.numberType;break;case "boolean":J=d.booleanType;break;case "object":J=d.objectType}for(t=[];A<a.length;A++)O=c(a[A],n),t.push(O);return new ca(J,t)}evaluate(a,n){let t;for(const A of this._args){const J=A.evaluate(a,n);t=d.getType(J);if(d.matchType(t,this.type))return J}throw Error(`Expected ${d.typeToString(this.type)} but got ${d.typeToString(t)}`);}}class W{constructor(a,n){this.type=a;this._args=n}static parse(a,n){var t=a[0];const A=W.types[t];if(A===d.booleanType||A===d.stringType){if(2!==
a.length)throw Error(`${t} expects one argument`);}else if(2>a.length)throw Error(`${t} expects at least one argument`);t=[];for(let J=1;J<a.length;J++){const O=c(a[J],n);t.push(O)}return new W(A,t)}evaluate(a,n){if(this.type===d.booleanType)return!!this._args[0].evaluate(a,n);if(this.type===d.stringType)return d.valueToString(this._args[0].evaluate(a,n));if(this.type===d.numberType){for(const A of this._args){var t=Number(A.evaluate(a,n));if(!isNaN(t))return t}return null}if(this.type===d.colorType){for(t of this._args)try{const A=
W.toColor(t.evaluate(a,n));if(A instanceof w)return A}catch{}return null}}static toBoolean(a){return!!a}static toString(a){return d.valueToString(a)}static toNumber(a){const n=Number(a);if(isNaN(n))throw Error(`"${a}" is not a number`);return n}static toColor(a){if(a instanceof w)return a;if("string"===typeof a){const n=w.fromString(a);if(n)return n;throw Error(`"${a}" is not a color`);}if(Array.isArray(a))return w.fromArray(a);throw Error(`"${a}" is not a color`);}}W.types={"to-boolean":d.booleanType,
"to-color":d.colorType,"to-number":d.numberType,"to-string":d.stringType};class la{constructor(a){this._val=a;this.type=d.getType(a)}static parse(a){if(2!==a.length)throw Error('"literal" expects 1 argument');return new la(a[1])}evaluate(a,n){return this._val}}class ma{constructor(a){this._arg=a;this.type=d.stringType}static parse(a,n){if(2!==a.length)throw Error('"typeof" expects 1 argument');return new ma(c(a[1],n))}evaluate(a,n){return d.typeToString(d.getType(this._arg.evaluate(a,n)))}}const na=
{array:ca,boolean:ca,collator:null,format:null,image:null,literal:la,number:ca,"number-format":null,object:ca,string:ca,"to-boolean":W,"to-color":W,"to-number":W,"to-string":W,typeof:ma,accumulated:null,"feature-state":null,"geometry-type":k,id:h,"line-progress":null,properties:l,at:K,get:Q,has:T,in:aa,"index-of":X,length:Y,slice:ba,"!":H,"!\x3d":z,"\x3c":F,"\x3c\x3d":B,"\x3d\x3d":p,"\x3e":D,"\x3e\x3d":G,all:M,any:N,case:y,coalesce:x,match:C,within:null,interpolate:E,"interpolate-hcl":E,"interpolate-lab":E,
step:I,let:L,var:P,concat:ha,downcase:da,"is-supported-script":null,"resolved-locale":null,upcase:da,rgb:ia,rgba:ja,"to-rgba":ka,"-":oa,"*":pa,"/":qa,"%":ra,"^":sa,"+":ta,abs:U,acos:U,asin:U,atan:U,ceil:U,cos:U,e:U,floor:U,ln:U,ln2:U,log10:U,log2:U,max:U,min:U,pi:U,round:U,sin:U,sqrt:U,tan:U,zoom:q,"heatmap-density":null,"has-id":ea,none:u};m.ALL=M;m.ANY=N;m.Add=ta;m.Assert=ca;m.At=K;m.Calculate=U;m.Case=y;m.Coalesce=x;m.Coerce=W;m.Concat=ha;m.Div=qa;m.EQ=p;m.GE=G;m.GT=D;m.GeomType=k;m.Get=Q;m.Has=
T;m.HasID=ea;m.ID=h;m.In=aa;m.IndexOf=X;m.Interpolate=E;m.LE=B;m.LT=F;m.Length=Y;m.Let=L;m.Literal=la;m.Match=C;m.Mod=ra;m.Mul=pa;m.NE=z;m.NONE=u;m.NOT=H;m.Pow=sa;m.Properties=l;m.Rgb=ia;m.Rgba=ja;m.Slice=ba;m.Step=I;m.String=da;m.Sub=oa;m.ToRgba=ka;m.TypeOf=ma;m.Var=P;m.Zoom=q;m.createExpression=c;m.ops=na;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(m){function w(e,f,d,c){function g(z,F){var B;let D,G;D=z;for(B=
0;8>B;B++){G=((l*D+k)*D+h)*D-z;if(Math.abs(G)<F)return D;var H=(3*l*D+2*k)*D+h;if(1E-6>Math.abs(H))break;D-=G/H}H=0;B=1;D=z;if(D<H)return H;if(D>B)return B;for(;H<B;){G=((l*D+k)*D+h)*D;if(Math.abs(G-z)<F)break;z>G?H=D:B=D;D=.5*(B-H)+H}return D}const h=3*e,k=3*(d-e)-h,l=1-h-k,q=3*f,v=3*(c-f)-q,p=1-q-v;return function(z,F=1E-6){z=g(z,F);return((p*z+v)*z+q)*z}}const r=/^cubic-bezier\((.*)\)/,b={};b.ease=w(.25,.1,.25,1);b.linear=w(0,0,1,1);b.easeIn=b["ease-in"]=w(.42,0,1,1);b.easeOut=b["ease-out"]=w(0,
0,.58,1);b.easeInOut=b["ease-in-out"]=w(.42,0,.58,1);m.easingFunctions=b;m.parse=function(e){let f=b[e]||null;!f&&(e=r.exec(e))&&(e=e[1].split(",").map(d=>parseFloat(d.trim())),4!==e.length||e.some(d=>isNaN(d))||(f=w.apply(w,e)));return f};m.unitBezier=w;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/expression/types":function(){define(["exports","../../../../../Color"],function(m,w){function r(p,z){return{kind:"array",itemType:p,n:z}}function b(p){if("array"===
p.kind){const z=b(p.itemType);return"number"===typeof p.n?`array<${z}, ${p.n}>`:"value"===p.itemType.kind?"array":`array<${z}>`}return p.kind}function e(p){if(null===p)return d;if("string"===typeof p)return g;if("boolean"===typeof p)return h;if("number"===typeof p)return c;if(p instanceof w)return k;if(Array.isArray(p)){let z;for(const F of p){const B=e(F);if(!z)z=B;else if(z!==B){z=q;break}}return r(z||q,p.length)}return"object"===typeof p?l:q}function f(p,z){if("array"===z.kind)return"array"===
p.kind&&(0===p.n&&"value"===p.itemType.kind||f(p.itemType,z.itemType))&&("number"!==typeof z.n||z.n===p.n);if("value"===z.kind)for(const F of v)if(f(p,F))return!0;return z.kind===p.kind}const d={kind:"null"},c={kind:"number"},g={kind:"string"},h={kind:"boolean"},k={kind:"color"},l={kind:"object"},q={kind:"value"},v=[d,c,g,h,k,l,r(q)];m.arrayType=r;m.booleanType=h;m.colorType=k;m.getType=e;m.matchType=f;m.nullType=d;m.numberType=c;m.objectType=l;m.stringType=g;m.typeToString=b;m.valueToString=function(p){if(null===
p)return"";const z=typeof p;return"string"===z?p:"number"===z||"boolean"===z?String(p):p instanceof w?p.toString():JSON.stringify(p)};m.valueType=q;Object.defineProperty(m,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/vectorTiles/style/StyleProperty":function(){define(["../../../../../Color","../GeometryUtils","../expression/expression","../expression/types"],function(m,w,r,b){class e{constructor(f,d){this.isDataDriven=!1;this.interpolator=null;switch(f.type){case "number":var c=!0;
break;case "color":c=!0;break;case "array":c="number"===f.value;break;default:c=!1}null==d&&(d=f.default);if(Array.isArray(d)&&0<d.length&&r.ops[d[0]]){c={number:b.numberType,color:b.colorType,string:b.stringType,boolean:b.booleanType,enum:b.stringType};try{var g="array"===f.type?b.arrayType(c[f.value]||b.valueType,f.length):c[f.type];const h=r.createExpression(d,null,g);this.getValue=this._buildExpression(h,f);this.isDataDriven=!0;h instanceof r.Interpolate&&h.input instanceof r.Zoom&&(this.interpolator=
h)}catch(h){console.log(h.message),this.getValue=this._buildSimple(f.default)}}else{c&&"interval"===d.type&&(c=!1);if(g=d?.stops&&0<d.stops.length)for(const h of d.stops)h[1]=this._validate(h[1],f);if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d.default&&(d.default=this._validate(d.default,f)),g)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,f);break;case "categorical":this.getValue=this._buildCategorical(d,f);break;default:this.getValue=c?this._buildInterpolate(d,f):this._buildInterval(d,
f)}else this.getValue=this._buildIdentity(d,f);else g?this.getValue=c?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,f),this.getValue=this._buildSimple(d))}}_validate(f,d){if("number"===d.type){if(null!=d.minimum&&f<d.minimum)return d.minimum;if(null!=d.maximum&&f>d.maximum)return d.maximum}else"color"===d.type?f=e._parseColor(f):"enum"===d.type?"string"===typeof f&&(f=d.values.indexOf(f)):"array"===d.type&&"enum"===d.value?f=f.map(c=>"string"===typeof c?d.values.indexOf(c):
c):"string"===d.type&&(f=b.valueToString(f));return f}_buildSimple(f){return()=>f}_buildExpression(f,d){return(c,g)=>{try{const h=f.evaluate(g,c);return void 0===h?d.default:this._validate(h,d)}catch(h){return console.log(h.message),d.default}}}_buildIdentity(f,d){return(c,g)=>{let h;g&&(h=g.values[f.property]);void 0!==h&&(h=this._validate(h,d));return null!=h?h:void 0!==f.default?f.default:d.default}}_buildCategorical(f,d){return(c,g)=>{let h;g&&(h=g.values[f.property]);h=this._categorical(h,f.stops);
return void 0!==h?h:void 0!==f.default?f.default:d.default}}_buildInterval(f,d){return(c,g)=>{let h;g&&(h=g.values[f.property]);return"number"===typeof h?this._interval(h,f.stops):void 0!==f.default?f.default:d.default}}_buildInterpolate(f,d){return(c,g)=>{let h;g&&(h=g.values[f.property]);return"number"===typeof h?this._interpolate(h,f.stops,f.base||1):void 0!==f.default?f.default:d.default}}_buildZoomInterpolate(f){return d=>this._interpolate(d,f.stops,f.base||1)}_buildZoomInterval(f){return d=>
this._interval(d,f.stops)}_categorical(f,d){const c=d.length;for(let g=0;g<c;g++)if(d[g][0]===f)return d[g][1]}_interval(f,d){const c=d.length;let g=0;for(let h=0;h<c;h++)if(d[h][0]<=f)g=h;else break;return d[g][1]}_interpolate(f,d,c){const g=d.length;for(let l=0;l<g;l++){const q=d[l];if(q[0]<=f)var h=q;else{var k=q;break}}if(h&&k){d=k[0]-h[0];f-=h[0];c=1===c?f/d:(c**f-1)/(c**d-1);if(Array.isArray(h[1])){h=h[1];k=k[1];f=[];for(d=0;d<h.length;d++)f.push(w.interpolate(h[d],k[d],c));return f}return w.interpolate(h[1],
k[1],c)}if(h)return h[1];if(k)return k[1]}static _isEmpty(f){for(const d in f)if(f.hasOwnProperty(d))return!1;return!0}static _parseColor(f){if(Array.isArray(f))return f;"string"===typeof f&&(f=new m(f));if(f instanceof m&&!this._isEmpty(f))return m.toUnitRGBA(f)}}return e})},"*noref":1}});
define("../../../chunks/tslib.es6 ../../../core/Error ../../../core/has ../../../core/maybe ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../2d/engine/vectorTiles/SchemaHelper ../../2d/engine/vectorTiles/TileHandler3D ../../2d/engine/vectorTiles/VTLPainter3D ../../2d/engine/vectorTiles/style/StyleRepository ./LayerView3D ./TiledLayerView3D ../terrain/terrainUtils ../../layers/LayerView".split(" "),function(m,
w,r,b,e,f,d,c,g,h,k,l,q,v,p,z,F,B){function D(G){return H=>G.immediate.schedule(H)}c=class extends z.TiledLayerView3D(p.LayerView3D(B)){constructor(){super(...arguments);this._tileHandlerController=null;this.type="vector-tile-3d";this.levelShift=r("disable-feature:vtl-level-shift")?0:1}initialize(){if(null==this.layer.fullExtent)this.addResolvingPromise(Promise.reject(new w("vectortilelayerview:full-extent-undefined","This layer view's layer does not define a fullExtent.")));else{var {basemapTerrain:G,
spatialReference:H,state:M,viewingMode:N}=this.view,u="local"===N&&!F.vtlAssumes256PixelSizeAsDefault(H)||F.test.force512VTL,y=this.layer.tileInfo.spatialReference.isGeographic;u=u?this.layer.tileInfo:this.layer.tileInfo.getOrCreateCompatible(256,y?1:2);u=this._getTileInfoSupportError(u,this.layer.fullExtent);if(null!=u)return this.addResolvingPromise(Promise.reject(u));u=f.whenOnce(()=>this.view?.basemapTerrain?.tilingSchemeLocked).then(()=>{var I=G.tilingScheme,L=I.pixelSize;this.schemaHelper=new k.SchemaHelper(256===
L?1:2,G.spatialReference?.isGeographic&&256===L?1:0,this.levelShift+(G.spatialReference?.isGeographic||256!==L?0:1));L=256===L?this.layer.tileInfo.getOrCreateCompatible(256,this.layer.tileInfo.spatialReference.isGeographic?1:2):this.view.spatialReference?.isGeographic?this.layer.tileInfo.getOrCreateCompatible(512,.5):this.layer.tileInfo;if(I=this._getTileInfoCompatibilityError(L,I))throw I;this.tileInfo=L});this._tileHandlerController=new AbortController;y=this.view.resourceController;this._memCache=
y.memoryController.newCache(`vtl-${this.layer.uid}`,I=>{I.release()});this.addHandles(f.watch(()=>this.view.qualitySettings.memoryLimit,I=>this._memCache.maxSize=Math.ceil(I/10*1048576),f.syncAndInitial));var x=new v(this.layer.currentStyleInfo.style);this._tileHandler=new l(this.layer,x,M.contentPixelRatio,this._memCache);var C=this._tileHandlerController.signal,E=D(y);y=this._tileHandler.start({signal:C,schedule:E});x=this._tileHandler.spriteMosaic;x.then(I=>{!e.isAborted(C)&&this._tileHandler&&
(this.painter=new q(I,this._tileHandler.glyphMosaic))});y.then(()=>this._tileHandlerController=null);this._updatingHandles.add(()=>({style:this.layer.currentStyleInfo.style,pixelRatio:this.view.state?.contentPixelRatio}),({style:I,pixelRatio:L})=>{this._tileHandlerController&&this._tileHandlerController.abort();this._tileHandlerController=new AbortController;this._memCache.clear();I=new v(I);const P=new l(this.layer,I,L,this._memCache);L=P.start({signal:this._tileHandlerController.signal,schedule:E});
I=P.spriteMosaic;L.then(()=>this._tileHandlerController=null);this._updatingHandles.addPromise(Promise.all([L,I]).then(([,K])=>{const Q=this._tileHandler,T=this.painter;this.painter=new q(K,P.glyphMosaic);this._tileHandler=P;this.emit("data-changed");Q.destroy();T&&T.dispose()}))});u=Promise.all([u,y,x]);this.addResolvingPromise(u)}}destroy(){this.painter=b.disposeMaybe(this.painter);this._tileHandlerController=b.abortMaybe(this._tileHandlerController);this._tileHandler=b.destroyMaybe(this._tileHandler);
this._memCache=b.destroyMaybe(this._memCache)}get contentZoom(){return r("disable-feature:vtl-level-shift")?1:this.view.qualitySettings.tiledSurface.vtlContentZoom}get displayLevelRange(){var G=this.tileInfo.lods;G=this.levelRangeFromScaleRange(this.layer.minScale||G[0].scale,this.layer.maxScale||G[G.length-1].scale);this.layer.maxScale?G.maxLevel++:G.maxLevel+=this.levelShift;return G}get dataScaleRange(){const G=this.tileInfo.lods;return{minScale:G[0].scale,maxScale:G[G.length-1].scale}}get dataLevelRange(){const {minScale:G,
maxScale:H}=this.dataScaleRange,M=this.levelRangeFromScaleRange(G,H);1===M.minLevel&&256===this.tileInfo.size[0]&&(M.minLevel=0);M.maxLevel+=this.levelShift;return M}async fetchTile(G,H,M,N){return this._tileHandler.getVectorTile(G,H,M,N)}};m.__decorate([d.property()],c.prototype,"layer",void 0);m.__decorate([d.property()],c.prototype,"levelShift",void 0);m.__decorate([d.property()],c.prototype,"contentZoom",null);m.__decorate([d.property()],c.prototype,"displayLevelRange",null);m.__decorate([d.property()],
c.prototype,"tileInfo",void 0);m.__decorate([d.property()],c.prototype,"dataScaleRange",null);m.__decorate([d.property()],c.prototype,"dataLevelRange",null);m.__decorate([d.property()],c.prototype,"updatingProgressValue",void 0);return c=m.__decorate([h.subclass("esri.views.3d.layers.VectorTileLayerView3D")],c)});