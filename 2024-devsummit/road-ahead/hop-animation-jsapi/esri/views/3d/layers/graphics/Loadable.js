// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../../core/maybe","../../../../core/promiseUtils"],function(a,e,f){class g{constructor(b){this.schedule=b;this._abortController=null;this._loadStatus=a.LoadStatus.LOADING;this.logger=this._loader=this._loadError=null}destroy(){this.abortLoad()}get loadStatus(){return this._loadStatus}load(b,d){if(this._loadStatus===a.LoadStatus.LOADED)return b&&b(),this._loader??Promise.resolve();if(this._loadStatus===a.LoadStatus.FAILED)return d&&d(this._loadError),this._loader??Promise.resolve();
null==this._loader&&(this._abortController=new AbortController,this._loader=this.doLoad(this._abortController.signal).then(()=>{this._abortController=null;this._loadStatus=a.LoadStatus.LOADED},c=>{this._loadError=c;this._abortController=null;this._loadStatus=a.LoadStatus.FAILED;!f.isAbortError(c)&&this.logger&&c.message&&this.logger.warn(c.message);throw c;}));this._loader.then(b,d).catch(()=>{});return this._loader}abortLoad(){null!=this._abortController?this._abortController=e.abortMaybe(this._abortController):
this._loadStatus===a.LoadStatus.LOADING&&(this._loadStatus=a.LoadStatus.FAILED);this._loader=null}}a.LoadStatus=void 0;(function(b){b[b.LOADING=0]="LOADING";b[b.LOADED=1]="LOADED";b[b.FAILED=2]="FAILED"})(a.LoadStatus||(a.LoadStatus={}));a.Loadable=g;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})});