// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/tslib.es6 ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/Logger ../../../../core/RandomLCG ../../../../core/accessorSupport/decorators/subclass ../../../../layers/graphics/data/timeSupport ../../../../layers/support/commonProperties ../../../../layers/support/FeatureFilter ../i3s/I3SUtil".split(" "),function(l,h,m,y,z,A,p,q,r,t,n){class u{constructor(a){this.attributeData=a}getAttribute(a,d){return n.getCachedAttributeValue(this.attributeData[d],
a)}getAttributeAsTimestamp(a,d){a=this.getAttribute(a,d);return"string"===typeof a?(new Date(a)).getTime():"number"===typeof a||null==a?a:null}}l.TemporalSceneLayerView=a=>{a=class extends a{constructor(){super(...arguments);this.timeExtent=null}get mergedFilter(){const {filter:d,timeExtent:c}=this;if(null==c)return d;const b=d?.clone()??new t;null!=c&&(b.timeExtent=b.timeExtent?.intersection(c)??c);return b}getTimeFilterDependencies(){const {timeInfo:d}=this.i3slayer;if(null==d)return[];const {startField:c,
endField:b}=d;return[c,b]}addTimeFilter(d,c){if(null!=c){var {timeInfo:b}=this.i3slayer;if(null!=b){var {startField:k,endField:e,useTime:f}=b;if(f&&(null!=k||null!=e)){var g=b.toJSON(),v=c.toJSON();d.push((w,x)=>this._timeFilter(w,x,g,v))}}}}_timeFilter(d,c,b,k){const e=c.attributeInfo?.attributeData;if(null!=e){var {startTimeField:f,endTimeField:g}=b;null!=f&&null==e[f]||null!=g&&null==e[g]||(b=q.getTimeOperator(b,k,new u(e)),null!=b&&({featureIds:c}=c,n.filterInPlace(d,c,b)))}}};h.__decorate([m.property(r.combinedViewLayerTimeExtentProperty)],
a.prototype,"timeExtent",void 0);h.__decorate([m.property()],a.prototype,"mergedFilter",null);return a=h.__decorate([p.subclass("esri.views.3d.layers.support.TemporalSceneLayerView")],a)};Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});