// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../../Graphic","../i3s/Intersector","../../webgl-engine/lib/Intersector","../../webgl-engine/lib/IntersectorInterfaces"],function(h,n,p,q,k){class r{constructor(a){this.layerUid=[];this.type=k.IntersectorType.TILES3D;this.slicePlaneEnabled=!1;this.isGround=!0;this.layerView=a;this.layerUid.push(a.layer.uid)}intersect(a,e,l,m){const b=a.results,t=a.options.store===k.StoreResults.ALL;if(!a.options.filteredLayerUids.includes(this.layerView.layer.uid)){var u=this.layerView.view._stage.renderView.componentObjectCollection;
this.layerView.objects.forEach(f=>{f.visible&&f.intersectionGeometry&&u.intersect(f,l,m,a.tolerance,null,(d,c,v,g)=>{0<=c&&(null==e||e(l,m,c))&&(d=w=>{const x=new p.Tiles3DTarget(this.layerView.layer.uid,()=>this._createTiles3DGraphic(this.layerView.layer,{}));w.set(this.type,x,c,v)},this.isGround&&(null==b.ground.dist||c<b.ground.dist)&&d(b.ground),a.options.isFiltered||((null==b.min.dist||c<b.min.dist)&&d(b.min),(null==b.max.dist||c>b.max.dist)&&d(b.max),t&&(g=q.newIntersectorResult(a.ray),d(g),
a.results.all.push(g))))})})}}_createTiles3DGraphic(a,e){return new n({layer:a,sourceLayer:a,attributes:e})}}h.Tiles3DIntersectionHandler=r;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});