// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../core/libs/gl-matrix-2/math/vec2 ../../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/ellipsoidUtils ../../../../geometry/projection/projectors ../../../../geometry/support/DoubleArray ../../../../geometry/support/plane ../../../ViewingMode".split(" "),function(C,K,D,I,b,n,L,M,N,E,O){function F(p,g,c,a,h,e,d){b.set(p,g*h[0]+
c*e[0]+a*d[0],g*h[1]+c*e[1]+a*d[1],g*h[2]+c*e[2]+a*d[2])}const G=n.create(),x=n.create(),J=E.create(),l=n.create(),k=n.create(),y=n.create(),f=I.create(),u=I.create(),r=n.create(),v=n.create(),w=n.create(),q=K.create(),A=n.create(),B=n.create(),H=n.create(),t=n.create();C.createMapSpaceUVCoords=function(p,g,c,a,h=1){b.set(l,1,0,0);b.set(k,0,1,0);b.set(y,0,0,1);b.set(t,0,0,0);for(var e=0;e<c.length-3;e+=3)t[0]+=c[e],t[1]+=c[e+1],t[2]+=c[e+2];b.scale(G,t,1/(c.length/3-1));if(E.fromArray(J,c)){null!=
a?(a.basisMatrixAtPosition(G,q),b.set(A,q[0],q[1],q[2]),b.set(B,q[4],q[5],q[6]),b.set(H,q[8],q[9],q[10])):(b.set(A,1,0,0),b.set(B,0,1,0),b.set(H,0,0,1));a=E.getNormal(J);0>b.dot(a,H)&&b.scale(a,a,-1);b.copy(y,a);e=b.dot(a,B);var d=b.dot(a,A);Math.abs(e)>Math.abs(d)?(b.scaleAndAdd(l,A,a,-d),b.normalize(l,l),b.cross(k,l,a),b.normalize(k,k),b.scale(k,k,-1)):(b.scaleAndAdd(k,B,a,-e),b.normalize(k,k),b.cross(l,k,a),b.normalize(l,l))}D.set(f,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);D.set(u,Number.NEGATIVE_INFINITY,
Number.NEGATIVE_INFINITY);for(a=0;a<c.length;a+=3)b.set(x,c[a],c[a+1],c[a+2]),e=b.dot(l,x),d=b.dot(k,x),f[0]=Math.min(f[0],e),f[1]=Math.min(f[1],d),u[0]=Math.max(u[0],e),u[1]=Math.max(u[1],d);a=b.dot(y,G);F(r,f[0],f[1],a,l,k,y);F(v,u[0],f[1],a,l,k,y);F(w,f[0],u[1],a,l,k,y);b.subtract(v,v,r);b.scale(v,v,.5);b.subtract(w,w,r);b.scale(w,w,.5);b.add(r,r,v);b.add(r,r,w);a=f[0]-f[0]%h;e=f[1]-f[1]%h;for(d=0;d<c.length;d+=3){b.set(x,c[d],c[d+1],c[d+2]);var z=d/3,m=4*z;p[m]=(b.dot(l,x)-a)/h;p[m+1]=(b.dot(k,
x)-e)/h;p[m+2]=a/h;p[m+3]=e/h;z*=9;for(m=0;3>m;m++)g[z+m]=r[m],g[z+m+3]=v[m],g[z+m+6]=w[m]}};C.createMapSpaceUVCoordsDraped=function(p,g,c,a,h=1){if(c.isGeographic&&a===O.ViewingMode.Global){a=N.newDoubleArray(g.length);var e=g.length;c=L.getReferenceEllipsoid(c);for(var d=0;d<e;d+=3)M.lonLatToWebMercatorComparable(g,d,a,d,c);g=a}D.set(f,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);for(a=0;a<g.length;a+=3)f[0]=Math.min(f[0],g[a]),f[1]=Math.min(f[1],g[a+1]);a=f[0]-f[0]%h;e=f[1]-f[1]%h;for(c=
0;c<g.length;c+=3)d=c/3*4,p[d]=(g[c]-a)/h,p[d+1]=(g[c+1]-e)/h,p[d+2]=a/h,p[d+3]=e/h};Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})});