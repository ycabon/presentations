// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64"],function(g,y,d,m){const r=m.create(),t=m.create(),z=m.create(),n=m.create(),p=m.create();g.angle=function(a,b,c){a=d.normalize(n,a);b=d.normalize(p,b);const e=y.acosClamped(d.dot(a,b));return c&&(a=d.cross(z,a,b),0>d.dot(a,c))?-e:e};g.bilerp=function(a,b,c,e,f,h){a+=(b-a)*f;return a+(c+(e-c)*f-a)*h};g.cosCapped=function(a,b){return a>b?Math.cos(b):Math.cos(a)};g.fovx2fovy=function(a,
b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};g.fovy2fovx=function(a,b,c){return 2*Math.atan(b*Math.tan(.5*a)/c)};g.makeOrthonormal=function(a,b,c){c=c||a;const e=d.dot(a,b);d.set(c,a[0]-e*b[0],a[1]-e*b[1],a[2]-e*b[2]);d.normalize(c,c)};g.makePiecewiseLinearFunction=function(a){const b=a.length;return c=>{if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];let e=1;for(;c>a[e][0];)e++;const f=a[e][0];c=(f-c)/(f-a[e-1][0]);return c*a[e-1][1]+(1-c)*a[e][1]}};g.maxScale=function(a){return Math.sqrt(Math.max(a[0]*
a[0]+a[4]*a[4]+a[8]*a[8],a[1]*a[1]+a[5]*a[5]+a[9]*a[9],a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))};g.midpoint3d=function(a,b){d.set(b,0,0,0);if(0<a.length){for(let c=0;c<a.length;++c)d.add(b,b,a[c]);d.scale(b,b,1/a.length)}};g.planeFromPoints=function(a,b,c,e){d.subtract(r,b,a);d.subtract(t,c,a);d.cross(e,r,t);d.normalize(e,e);e[3]=-d.dot(a,e)};g.scaleFromMatrix=function(a,b){d.set(a,Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9]),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]));
return a};g.slerp=function(a,b,c,e=m.create()){const f=d.length(a);var h=d.length(b),k=d.dot(a,b)/(f*h);if(.9999999999999999>k){k=Math.acos(k);const l=((1-c)*f+c*h)/Math.sin(k);h=l/h*Math.sin(c*k);d.scale(n,a,l/f*Math.sin((1-c)*k));d.scale(p,b,h);return d.add(e,n,p)}return d.lerp(e,a,b,c)};g.slerpTangent=function(a,b,c,e=m.create(),f=m.create()){const h=d.length(a),k=d.length(b);var l=d.dot(a,b)/(h*k);if(.9999999999999999>l){l=Math.acos(l);const u=Math.sin(l),v=Math.sin(c*l),w=Math.sin((1-c)*l),q=
(1-c)*h+c*k,x=q/u,A=x/k*v;d.scale(n,a,x/h*w);d.scale(p,b,A);d.add(e,n,p);d.scale(n,a,1/h*(-Math.cos((1-c)*l)*l*q+w*(-h+k)));d.scale(p,b,1/k*(Math.cos(c*l)*l*q+v*(-h+k)));d.add(f,n,p);d.scale(f,f,1/u);return f}d.lerp(e,a,b,c);d.subtract(f,b,a);d.normalize(f,f);return f};g.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?d.set(b,0,1,0):d.set(b,1,0,0);d.cross(c,a,b);d.cross(b,c,a);d.normalize(c,c);d.normalize(b,b)};Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});