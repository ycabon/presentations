// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../geometry/projection/projectBuffer ../../../../geometry/support/DoubleArray ../../../../geometry/support/triangulationUtils ../../layers/graphics/elevationAlignmentUtils ../../terrain/OverlayRenderer".split(" "),function(h,x,g,l,y,z){function n(a,d,b=null){return a.filter(({count:f})=>1<f).map(({index:f,count:c})=>{const e=3*f,k=3*c;return null!=b?new p(f,c,g.doubleSubArray(d,e,k),g.doubleSubArray(b,e,k)):new m(f,c,g.doubleSubArray(d,e,k))})}function q(a,d,b=null){const f=
[];for(const {index:c,count:e,holeIndices:k,pathLengths:r}of a){if(1>=e)continue;a=3*c;const A=3*e,t=k.map(B=>B-c);a=null!=b?new u(c,e,g.doubleSubArray(d,3*c,3*e),g.doubleSubArray(b,a,A),t,r):new v(c,e,g.doubleSubArray(d,3*c,3*e),t,r);f.push(a)}return f}class m{constructor(a,d,b){this.index=a;this.count=d;this.position=b}}class p extends m{constructor(a,d,b,f){super(a,d,b);this.mapPositions=f}}class u extends p{constructor(a,d,b,f,c,e){super(a,d,b,f);this.holeIndices=c;this.pathLengths=e}}class v extends m{constructor(a,
d,b,f,c){super(a,d,b);this.holeIndices=f;this.pathLengths=c}}class w{constructor(a,d,b,f,c,e){this.position=a;this.mapPositions=d;this.polygons=b;this.outlines=f;this.projectionSuccess=c;this.sampledElevation=e}}h.PolygonRenderInfo=w;h.PolygonVertexData=u;h.PolygonVertexDataDraped=v;h.geometryToRenderInfo=function(a,d,b,f){const c=l.pathsToTriangulationInfo(a.rings,!!a.hasZ,l.CounterClockwiseMode.CCW_IS_HOLE,a.spatialReference),e=g.newDoubleArray(c.position.length);a=y.applyPerVertexElevationAlignment(c.position,
a.spatialReference,0,e,0,c.position,0,c.position.length/3,d,b,f);d=null!=a;return new w(c.position,e,q(c.polygons,c.position,e),n(c.outlines,c.position,e),d,a)};h.geometryToRenderInfoDraped=function(a,d){const b=l.pathsToTriangulationInfo(a.rings,!1,l.CounterClockwiseMode.CCW_IS_HOLE);a=x.projectBuffer(b.position,a.spatialReference,0,b.position,d,0,b.position.length/3);for(d=2;d<b.position.length;d+=3)b.position[d]=z.drapedZ;return{position:b.position,polygons:q(b.polygons,b.position),outlines:n(b.outlines,
b.position),projectionSuccess:a}};Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});