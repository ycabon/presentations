// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/ObjectPool ../../../core/PooledArray ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../chunks/vec42 ../../../core/libs/gl-matrix-2/factories/vec4f64".split(" "),function(e,g,k,l,h,m,t,u,v,n,p,q){class r{constructor(){this.extent=q.create();this.maxLevel=this.minLevel=0;this.callback=null}}e.ScaleRangeQueries=
class extends k{constructor(){super(...arguments);this._queries=new h({initialSize:10});this._queriesInvPtr=0;this._queryQueue=new h({initialSize:30});this._queryPool=new l(r)}queryVisibleLevelRange(a,c,d,f){const b=this._queryPool.acquire();p.copy(b.extent,a);b.minLevel=null==c?-Number.MAX_VALUE:c;b.maxLevel=null==d?Number.MAX_VALUE:d;b.callback=f;this._queryQueue.push(b);this.notifyChange("updating")}get updating(){return 0!==this._queryQueue.length}prepare(){for(;this._queries.length<this._queries.data.length&&
0<this._queryQueue.length;){const a=this._queryQueue.pop();this._queries.push(a)}this._queriesInvPtr=this._queries.length}process(){for(let a=0;a<this._queries.length;a++){const c=this._queries.data[a];this._queryPool.release(c);c.callback(a>=this._queriesInvPtr);c.callback=null}this._queries.clear();this.notifyChange("updating")}queriesForTile(a){const c=a.level;let d=0;for(;d<this._queriesInvPtr;){const f=this._queries.data[d],b=f.extent;c>=f.minLevel&&c<=f.maxLevel&&b[0]<=a.extent[2]&&b[2]>=a.extent[0]&&
b[1]<=a.extent[3]&&b[3]>=a.extent[1]?(this._queries.swapElements(d,this._queriesInvPtr-1),this._queriesInvPtr--):d++}}};g.__decorate([m.property()],e.ScaleRangeQueries.prototype,"updating",null);e.ScaleRangeQueries=g.__decorate([n.subclass("esri.views.3d.terrain.ScaleRangeQueries")],e.ScaleRangeQueries);Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});