// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../../../geometry/support/buffer/BufferView","../../../../webgl/enums","../../../../webgl/Texture","../../../../webgl/TextureDescriptor"],function(e,f,g,h,k){class l{constructor(a,b=1){this._rctx=a;this._fieldCount=b;this.textureWidth=4096;this._dirty=!0;a=new k.TextureDescriptor(this.textureWidth,1);a.samplingMode=g.TextureSamplingMode.NEAREST;a.wrapMode=g.TextureWrapMode.CLAMP_TO_EDGE;this._texture=new h.Texture(this._rctx,a);this._data=new f.BufferViewVec4u8(new ArrayBuffer(4*
this.textureWidth))}dispose(){this._texture.dispose();this._data=this._texture=void 0}setData(a,b,c,d,m,n){a=a*this._fieldCount+b;this._dirty=!0;this._data.set(a,0,c);this._data.set(a,1,d);this._data.set(a,2,m);this._data.set(a,3,n)}setDataElement(a,b,c,d){a=a*this._fieldCount+b;this._dirty=!0;this._data.set(a,c,d)}getDataElement(a,b,c){a=a*this._fieldCount+b;this._dirty=!0;return this._data.get(a,c)}resizeToFit(a){a=(a+1)*this._fieldCount;a>this._data.count&&(a=new f.BufferViewVec4u8(new ArrayBuffer(Math.ceil(a/
this.textureWidth)*this.textureWidth*4)),a.typedBuffer.set(this._data.typedBuffer),this._data=a)}updateTexture(){if(this._dirty){var a=this._texture.descriptor.width;this._data.count>a*this._texture.descriptor.height&&this._texture.resize(a,this._data.count/a);this._texture.setData(this._data.typedBuffer);this._dirty=!1}}get texture(){return this._texture}}e.TextureBackedBuffer=l;Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});