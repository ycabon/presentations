// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../support/buffer/glUtil ../DefaultVertexAttributeLocations ../GLMaterials ../Intersector ../IntersectorInterfaces ../VertexArrayObject ./Intersector ../../../../webgl/BufferObject ../../../../webgl/enums".split(" "),function(p,q,r,t,u,d,v,w,x,y){class z{constructor(a,b){const k=a.renderContext.rctx;b=b.geometry;this._materialRepository=a.materialRepository;b.material.setParameters({instancedDoublePrecision:!0});a=b.material.createBufferWriter();const e=a.vertexBufferLayout,
l=a.elementCount(b),f=e.createBuffer(l);a.write(null,null,b,f,0);this.geometry=b;this.material=b.material;this.glMaterials=new t.GLMaterials(b.material,this._materialRepository);this.vertexBufferLayout=e;this.vbo=x.BufferObject.createVertex(k,y.Usage.STATIC_DRAW,f.buffer);this.vao=new v.VertexArrayObject(k,r.Default3D,{geometry:q.glLayout(e)},{geometry:this.vbo});this.vertexCount=l}destroy(){this.glMaterials.dispose();this.vbo.dispose();this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/
3}intersect(a,b,k,e,l,f,A,B){const C=this.geometry.id;this.material.intersect(this.geometry,a.transform.transform,a,k,e,(c,m,g,n,h)=>{0<=c&&(null==b||b(a.rayBegin,a.rayEnd,c))&&(g=new w.LodTarget(f.layerUid,f.graphicUid(l),C,g,A,B),(null==a.results.min.drapedLayerOrder||h>=a.results.min.drapedLayerOrder)&&(null==a.results.min.dist||c<a.results.min.dist)&&a.results.min.set(d.IntersectorType.LOD,g,c,m,a.transform.transform,h),a.options.store!==d.StoreResults.MIN&&(null==a.results.max.drapedLayerOrder||
h>=a.results.max.drapedLayerOrder)&&(null==a.results.max.dist||c>a.results.max.dist)&&a.results.max.set(d.IntersectorType.LOD,g,c,m,a.transform.transform,h),a.options.store===d.StoreResults.ALL&&(n=u.newIntersectorResult(a.results.min.ray),n.set(d.IntersectorType.LOD,g,c,m,a.transform.transform,h),a.results.all.push(n)))})}}p.LodComponentData=z;Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});