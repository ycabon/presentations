// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../../core/arrayUtils ../../../../../core/promiseUtils ../../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../../geometry/support/aaBoundingBox ./LodComponentData".split(" "),function(h,m,k,n,d,p){class l{static async create(a,b,e){const f=await Promise.allSettled(b.components.map(c=>a.controller.schedule(()=>new p.LodComponentData(a,c),e))),g=f.map(c=>"fulfilled"===c.status?c.value:null).filter(m.isSome);if(k.isAborted(e)||g.length!==f.length){g.forEach(c=>c.destroy());
k.throwIfAborted(e);for(const c of f)if("rejected"===c.status)throw c.reason;}return new l(b.minScreenSpaceRadius,g)}constructor(a,b){this.minScreenSpaceRadius=a;this.components=b}destroy(){this.components.forEach(a=>a.destroy())}intersect(a,b,e,f,g,c,q){this.components.forEach(r=>r.intersect(a,b,e,f,g,c,this.boundingSphere,q))}get boundingBox(){if(null==this._boundingBox){const a=d.empty();this.components.forEach(b=>{null!=b.boundingInfo&&(d.expandWithVec3(a,b.boundingInfo.bbMin),d.expandWithVec3(a,
b.boundingInfo.bbMax))});this._boundingBox=a}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const a=this.boundingBox,b=n.create();d.center(a,b);this._boundingSphere={center:b,radius:.5*d.diameter(a)}}return this._boundingSphere}get triangleCount(){return this.components.reduce((a,b)=>a+b.triangleCount,0)}}h.LodLevel=l;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});