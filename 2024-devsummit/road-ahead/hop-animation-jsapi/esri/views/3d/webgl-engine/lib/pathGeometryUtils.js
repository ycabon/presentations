// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/libs/gl-matrix-2/math/vec2 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../../geometry/support/plane ../../../../geometry/support/ray ./GeometryUtil".split(" "),function(p,x,c,m,t,y,v){const z=m.create();p.computeMinimumRotationTangentFrame=function(f,a){let b=null;const A=f.vertices.length,q=m.create(),h=m.create(),n=m.create(),k=m.create(),d=m.create(),r=m.create(),w=t.create();let e=f.vertices[0];c.copy(h,a);c.set(q,0,1,0);
v.makeOrthoBasisDirUpFallback(e.vRight,h,q,q,n,h,.99619469809);c.copy(e.frame.up,h);c.copy(e.frame.right,n);a=f.positions;let g=f.offset;b=e;for(let u=1;u<A;++u){e=f.vertices[u];c.add(d,e.vLeft,e.vRight);var l=c.length(d);0<l?(l=1/Math.sqrt(l),d[0]*=l,d[1]*=l,d[2]*=l):(d[0]=e.vRight[0],d[1]=e.vRight[1],d[2]=e.vRight[2]);r[0]=a[g]+b.frame.up[0];r[1]=a[g+1]+b.frame.up[1];r[2]=a[g+2]+b.frame.up[2];g+=3;l=c.set(z,a[g],a[g+1],a[g+2]);t.fromPositionAndNormal(l,d,w);t.intersectRay(w,y.wrap(r,e.vLeft),k)?
(k[0]-=a[g],k[1]-=a[g+1],k[2]-=a[g+2],c.normalize(h,k),c.cross(n,d,h),c.normalize(n,n)):v.makeOrthoBasisDirUpFallback(d,b.frame.up,b.frame.right,q,n,h,.99619469809);c.copy(e.frame.up,h);c.copy(e.frame.right,n);b=e}};p.profileSpaceToVertexSpace=function(f,a,b){f[0]=b[0]*a.right[0]+b[1]*a.up[0];f[1]=b[0]*a.right[1]+b[1]*a.up[1];f[2]=b[0]*a.right[2]+b[1]*a.up[2]};p.vertexSpaceToProfileSpace=function(f,a,b){x.set(f,c.dot(b,a.right),c.dot(b,a.up))};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});