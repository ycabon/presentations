// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/mathUtils ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ./Lightsources ./SphericalHarmonics".split(" "),function(h,f,d,g,l,p){class m{constructor(){this.color=g.create();this.intensity=1}}class n{constructor(){this.direction=g.create();this.ambient=new m;this.diffuse=new m}}class q{constructor(){this._shOrder=2;this._legacy=new n;this.noonFactor=this.globalFactor=.5;this._sphericalHarmonics=new l.SphericalHarmonicsAmbientLight;this._mainLight=
new l.MainLight(g.create(),g.fromValues(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(a){p.combineLights(a,this._shOrder,this._mainLight,this._sphericalHarmonics);d.copy(this._legacy.direction,this._mainLight.direction);a=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*a;this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*a;this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*
a;d.scale(this._legacy.diffuse.color,this._mainLight.intensity,a);d.copy(k,this._legacy.diffuse.color);d.scale(k,k,.4*this.globalFactor);d.add(this._legacy.ambient.color,this._legacy.ambient.color,k)}copyFrom(a){this._sphericalHarmonics.r=Array.from(a.sh.r);this._sphericalHarmonics.g=Array.from(a.sh.g);this._sphericalHarmonics.b=Array.from(a.sh.b);d.copy(this._mainLight.direction,a.mainLight.direction);d.copy(this._mainLight.intensity,a.mainLight.intensity);this._mainLight.castShadows=a.mainLight.castShadows;
this._mainLight.specularStrength=a.mainLight.specularStrength;this._mainLight.environmentStrength=a.mainLight.environmentStrength;this.globalFactor=a.globalFactor;this.noonFactor=a.noonFactor}lerpLighting(a,b,e){d.lerp(this._mainLight.intensity,a.mainLight.intensity,b.mainLight.intensity,e);this._mainLight.environmentStrength=f.lerp(a.mainLight.environmentStrength,b.mainLight.environmentStrength,e);this._mainLight.specularStrength=f.lerp(a.mainLight.specularStrength,b.mainLight.specularStrength,e);
d.copy(this._mainLight.direction,b.mainLight.direction);this._mainLight.castShadows=b.mainLight.castShadows;this.globalFactor=f.lerp(a.globalFactor,b.globalFactor,e);this.noonFactor=f.lerp(a.noonFactor,b.noonFactor,e);if(a.sh.r.length===b.sh.r.length)for(let c=0;c<b.sh.r.length;c++)this._sphericalHarmonics.r[c]=f.lerp(a.sh.r[c],b.sh.r[c],e),this._sphericalHarmonics.g[c]=f.lerp(a.sh.g[c],b.sh.g[c],e),this._sphericalHarmonics.b[c]=f.lerp(a.sh.b[c],b.sh.b[c],e);else for(a=0;a<b.sh.r.length;a++)this._sphericalHarmonics.r[a]=
b.sh.r[a],this._sphericalHarmonics.g[a]=b.sh.g[a],this._sphericalHarmonics.b[a]=b.sh.b[a]}}const k=g.create();h.SceneLighting=q;h.SunLight=n;h.ambientBoost=.4;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});