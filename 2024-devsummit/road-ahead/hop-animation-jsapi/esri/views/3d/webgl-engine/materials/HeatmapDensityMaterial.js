// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../core/libs/gl-matrix-2/math/vec2 ../../../../core/libs/gl-matrix-2/factories/vec2f64 ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/VertexAttribute ./internal/bufferWriterUtils ../shaders/HeatmapDensityTechnique".split(" "),function(k,n,t,u,v,w,x,y,d,p,l){class q extends l.HeatmapDensityPassParameters{constructor(){super(...arguments);this.usesHalfFloats=this.isAttributeDriven=!1}}class z extends x.Material{constructor(a){super(a,
new q);this.produces=new Map([[y.RenderSlot.DRAPED_MATERIAL,b=>b===v.ShaderOutput.Color]]);this._configuration=new l.HeatmapDensityTechniqueConfiguration}getConfiguration(){this._configuration.isAttributeDriven=this.parameters.isAttributeDriven;this._configuration.usesHalfFloat=this.parameters.usesHalfFloats;return this._configuration}createGLMaterial(a){return new A(a)}intersect(){}intersectDraped(a,b,c,f,h,e){b=a.attributes.get(d.VertexAttribute.POSITION);({parameters:c}=this);({searchRadius:c}=
c);({screenToWorldRatio:a}=a);a=c*a+2*a;a*=a;c=b.data.length/b.size;for(let m=0;m<c;m++){var g=m*b.size;g=n.set(B,b.data[g],b.data[g+1]);n.squaredDistance(g,f)<a&&h(e.dist,e.normal,-1,!1)}}createBufferWriter(){return new C(this.parameters.isAttributeDriven?D:r)}}class A extends w{beginSlot(a){return this.ensureTechnique(l.HeatmapDensityTechnique,a)}}class C{constructor(a){this.vertexBufferLayout=a}elementCount(a){return 6*a.attributes.get(d.VertexAttribute.POSITION).indices.length}write(a,b,c,f,h){p.writePosition(c.attributes.get(d.VertexAttribute.POSITION),
a,f.position,h,6);a=c.attributes.get(d.VertexAttribute.POSITION).indices.length;b=f.uv0;let e=h;for(let g=0;g<a;++g)b.setValues(e++,-1,-1),b.setValues(e++,1,-1),b.setValues(e++,1,1),b.setValues(e++,1,1),b.setValues(e++,-1,1),b.setValues(e++,-1,-1);(f=d.VertexAttribute.FEATUREATTRIBUTE in f?f.featureAttribute:null)&&p.writeBufferFloat(c.attributes.get(d.VertexAttribute.FEATUREATTRIBUTE),f,h,6)}}const r=u.newLayout().vec3f(d.VertexAttribute.POSITION).vec2f(d.VertexAttribute.UV0),D=r.clone().f32(d.VertexAttribute.FEATUREATTRIBUTE),
B=t.create();k.HeatmapDensityMaterial=z;k.HeatmapDensityMaterialParameters=q;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});