// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/Logger ../../../../core/RandomLCG ../../../../core/accessorSupport/decorators/subclass ../../../../core/libs/gl-matrix-2/factories/mat4f64 ../../../../chunks/sphere ../lib/ContentObjectType ../lib/GridLocalOriginFactory ../lib/ModelDirtySet ../lib/RenderGeometry ../lib/Util ../lib/WebGLLayer".split(" "),function(d,f,l,m,w,x,y,n,p,g,q,r,t,
u,e,h){d.Model=class extends l{constructor(){super(...arguments);this.dirtySet=new t({model:this});this._content=new Map;this._originFactory=new r.GridLocalOriginFactory(null)}getObject(a){return this._content.get(a)}add(a){const b=a.id;e.assert(!this._content.has(b),"Model/Stage already contains object to be added");this._content.set(b,a);h.isWebGLLayer(a)&&this.dirtySet.layerAdded(a)}remove(a){if(!this._content.has(a.id))return!1;this._content.delete(a.id);h.isWebGLLayer(a)&&this.dirtySet.layerRemoved(a);
return!0}addMany(a){for(const b of a)b&&(e.assert(!this._content.has(b.id),"Model/Stage already contains object to be added"),this._content.set(b.id,b))}removeMany(a){for(const b of a)b&&(e.assert(this._content.has(b.id),"Model/Stage doesn't contain object to be removed"),this._content.delete(b.id))}has(a){return this._content.has(a.id)}forEachOfType(a,b){this._content.forEach(c=>{c.type===a&&b(c)})}getRenderGeometry(a,b){const c=new u.RenderGeometry(b,{castShadow:a.castShadow,objectShaderTransformation:a.shaderTransformation});
c.transformation=a.getCombinedStaticTransformation(b,k);({localOrigin:a}=b);c.localOrigin=null!=a?a:this._originFactory.getOrigin(g.getCenter(c.boundingSphere));return c}updateRenderGeometryTransformation(a,b,c){if(null==a)return!1;c.transformation=a.getCombinedStaticTransformation(b,k);a=this._originFactory.getOrigin(g.getCenter(c.boundingSphere));return c.localOrigin!==a}getStats(){const a={},b=Array.from(this._content.values());for(let c=0;c<q.ContentObjectType.COUNT;++c)a[c]=b.filter(v=>v.type===
c).length;return{contentTypes:a,dirtySet:this.dirtySet.formatDebugInfo()}}get test(){return{content:Array.from(this._content.values())}}};f.__decorate([m.property({constructOnly:!0})],d.Model.prototype,"dirtySet",void 0);d.Model=f.__decorate([n.subclass("esri.views.3d.webgl-engine.parts.Model")],d.Model);const k=p.create();Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})});