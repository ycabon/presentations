// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),function(c,b,g,f,d,h){b=class extends b{constructor(a){super(a);this.view=null;this.consumes={required:[]};this.produces="composite-color";this._context=null}initialize(){this.addHandles([f.watch(()=>this.view.ready,a=>{a&&this.view._stage.renderer.addRenderNode(this)},f.initial)])}destroy(){this.view._stage?.renderer?.removeRenderNode(this)}render(){throw new g("RenderNode:render-function-not-implemented",
"render() is not implemented.");}get camera(){return this.view.state.camera.clone()}get sunLight(){return this.bindParameters.lighting.legacy}get renderingContext(){return this.view._stage.renderView.renderingContext}get gl(){return this.view._stage.renderView.renderingContext.gl}acquireOutputFramebuffer(){const a=this._frameBuffer?.getTexture()?.descriptor;return this.view._stage.renderer.fboCache.acquire(a?.width??640,a?.height??480,this.produces)}get fboCache(){return this.view._stage.renderer.fboCache}get bindParameters(){return this._context.bindParameters}requestRender(){this.view._stage.renderView.requestRender()}bindTexture(a,
e){this.renderingContext.bindTexture(a,e)}resetWebGLState(){this.renderingContext.resetState();this.renderingContext.bindFramebuffer(this._frameBuffer?.fbo)}bindRenderTarget(){this._frameBuffer?.fbo.initializeAndBind()}doRender(a,e){this._context=e;this._frameBuffer=a.find(({name:k})=>k===this.consumes.required[0]);a=this.render(a);this.renderingContext.enforceState();this._frameBuffer=null;return a}};c.__decorate([d.property({constructOnly:!0})],b.prototype,"view",void 0);c.__decorate([d.property({constructOnly:!0})],
b.prototype,"consumes",void 0);c.__decorate([d.property()],b.prototype,"produces",void 0);return b=c.__decorate([h.subclass("esri.views.3d.webgl.RenderNode")],b)});