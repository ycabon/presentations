// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r,g,w,B){var A;c=new c.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});h=A=class extends h.JSONSupport{static create(d={}){const {resolutionFactor:x=1,scales:q,size:z=256,spatialReference:E=t.WebMercator,numLODs:G=24}=d;if(!r.isValid(E)){d=[];if(q)for(var M=0;M<q.length;M++){var L=
q[M];d.push(new w({level:M,scale:L,resolution:L}))}else for(M=5E-4,L=G-1;0<=L;L--)d.unshift(new w({level:L,scale:M,resolution:M})),M*=2;return new A({dpi:96,lods:d,origin:new n(0,0,E),size:[z,z],spatialReference:E})}M=r.getInfo(E);d=d.origin?new n({x:d.origin.x,y:d.origin.y,spatialReference:E}):M?new n({x:M.origin[0],y:M.origin[1],spatialReference:E}):new n({x:0,y:0,spatialReference:E});M=1/(39.37*b.getMetersPerUnitForSR(E)*96);L=[];if(q)for(var P=0;P<q.length;P++){var ba=q[P];L.push(new w({level:P,
scale:ba,resolution:ba*M}))}else{var Z=r.isGeographic(E)?512/z*5.916575275917094E8:256/z*5.91657527591555E8;P=Math.ceil(G/x);L.push(new w({level:0,scale:Z,resolution:Z*M}));for(ba=1;ba<P;ba++)Z/=2**x,L.push(new w({level:ba,scale:Z,resolution:Z*M}))}return new A({dpi:96,lods:L,origin:d,size:[z,z],spatialReference:E})}constructor(d){super(d);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:d,origin:x}=this;if(d&&x){const q=r.getInfo(d);
return d.isWrappable&&!!q&&Math.abs(q.origin[0]-x.x)<=q.dx}return!1}readOrigin(d,x){return n.fromJSON({spatialReference:x.spatialReference,...d})}set lods(d){const x=[],q=this._levelToLOD={};d&&d.forEach(z=>{x.push(z.scale);q[z.level]=z});this._set("scales",x);this._set("lods",d);this._initializeUpsampleLevels()}readSize(d,x){return[x.cols,x.rows]}writeSize(d,x){x.cols=d[0];x.rows=d[1]}zoomToScale(d){const x=this.scales;if(0>=d)return x[0];if(d>=x.length-1)return x[x.length-1];const q=Math.floor(d);
return x[q]/(x[q]/x[q+1])**(d-q)}scaleToZoom(d){const x=this.scales,q=x.length-1;let z=0;for(;z<q;z++){const E=x[z],G=x[z+1];if(E<=d)break;if(G===d)return z+1;if(E>d&&G<d)return z+Math.log(E/d)/Math.log(E/G)}return z}snapScale(d,x=.95){d=this.scaleToZoom(d);return d%Math.floor(d)>=x?this.zoomToScale(Math.ceil(d)):this.zoomToScale(Math.floor(d))}tileAt(d,x,q,z){var E=this.lodAt(d);if(!E)return null;let G;if("number"===typeof x)G=x,x=q;else{if(r.equals(x.spatialReference,this.spatialReference))G=x.x,
x=x.y;else{z=g.project(x,this.spatialReference);if(null==z)return null;G=z.x;x=z.y}z=q}q=E.resolution*this.size[0];E=E.resolution*this.size[1];z||=new B.TileKey(null,0,0,0,v.create());z.level=d;z.row=Math.floor((this.origin.y-x)/E+.001);z.col=Math.floor((G-this.origin.x)/q+.001);this.updateTileInfo(z);return z}updateTileInfo(d,x=A.ExtrapolateOptions.NONE){var q=this.lodAt(d.level);q||x!==A.ExtrapolateOptions.POWER_OF_TWO||(x=this.lods[this.lods.length-1],x.level<d.level&&(q=x));if(q){var z=d.level-
q.level;x=q.resolution*this.size[0]/2**z;q=q.resolution*this.size[1]/2**z;d.id=`${d.level}/${d.row}/${d.col}`;d.extent||(d.extent=v.create());d.extent[0]=this.origin.x+d.col*x;d.extent[1]=this.origin.y-(d.row+1)*q;d.extent[2]=d.extent[0]+x;d.extent[3]=d.extent[1]+q}}upsampleTile(d){const x=this._upsampleLevels[d.level];if(!x||-1===x.parentLevel)return!1;d.level=x.parentLevel;d.row=Math.floor(d.row/x.factor+.001);d.col=Math.floor(d.col/x.factor+.001);this.updateTileInfo(d);return!0}getTileBounds(d,
x){var q=this.lodAt(x.level);if(null==q)return null;var {resolution:z}=q;q=z*this.size[0];z*=this.size[1];d[0]=this.origin.x+x.col*q;d[1]=this.origin.y-(x.row+1)*z;d[2]=d[0]+q;d[3]=d[1]+z;return d}lodAt(d){return this._levelToLOD?.[d]??null}clone(){return A.fromJSON(this.write({}))}getOrCreateCompatible(d,x){if(256===this.size[0]&&256===this.size[1])return 256===d?this:null;const q=[],z=this.lods.length;for(let E=0;E<z;E++){const G=this.lods[E];q.push(new w({level:G.level,scale:G.scale,resolution:G.resolution*
x}))}return new A({size:[d,d],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:q})}_initializeUpsampleLevels(){const d=this.lods;this._upsampleLevels=[];let x=null;for(let q=0;q<d.length;q++){const z=d[q];this._upsampleLevels[z.level]={parentLevel:x?x.level:-1,factor:x?x.resolution/z.resolution:0};x=z}}};f.__decorate([u.property({type:Number,json:{write:!0}})],h.prototype,"compressionQuality",void 0);f.__decorate([u.property({type:Number,
json:{write:!0}})],h.prototype,"dpi",void 0);f.__decorate([u.property({type:String,json:{read:c.read,write:c.write,origins:{"web-scene":{read:!1,write:!1}}}})],h.prototype,"format",void 0);f.__decorate([u.property({readOnly:!0})],h.prototype,"isWrappable",null);f.__decorate([u.property({type:n,json:{write:!0}})],h.prototype,"origin",void 0);f.__decorate([m.reader("origin")],h.prototype,"readOrigin",null);f.__decorate([u.property({type:[w],value:null,json:{write:!0}})],h.prototype,"lods",null);f.__decorate([u.property({readOnly:!0})],
h.prototype,"scales",void 0);f.__decorate([u.property({cast:d=>Array.isArray(d)?d:"number"===typeof d?[d,d]:[256,256]})],h.prototype,"size",void 0);f.__decorate([m.reader("size",["rows","cols"])],h.prototype,"readSize",null);f.__decorate([e.writer("size",{cols:{type:k.Integer},rows:{type:k.Integer}})],h.prototype,"writeSize",null);f.__decorate([u.property({type:t,json:{write:!0}})],h.prototype,"spatialReference",void 0);h=A=f.__decorate([a.subclass("esri.layers.support.TileInfo")],h);(function(d){d=
d.ExtrapolateOptions||(d.ExtrapolateOptions={});d[d.NONE=0]="NONE";d[d.POWER_OF_TWO=1]="POWER_OF_TWO"})(h||={});return h})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,h,b,u,k,p){var l;c=l=class extends c.JSONSupport{constructor(m){super(m);this.cols=null;this.level=
0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new l({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};f.__decorate([h.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"cols",void 0);f.__decorate([h.property({type:b.Integer,json:{write:!0}})],c.prototype,"level",void 0);f.__decorate([h.property({type:String,json:{write:!0}})],
c.prototype,"levelValue",void 0);f.__decorate([h.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"origin",void 0);f.__decorate([h.property({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0);f.__decorate([h.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"rows",void 0);f.__decorate([h.property({type:Number,json:{write:!0}})],c.prototype,"scale",void 0);
return c=l=f.__decorate([p.subclass("esri.layers.support.LOD")],c)})},"esri/layers/support/TileKey":function(){define(["exports"],function(f){class c{constructor(h,b,u,k,p){this.id=h;this.level=b;this.row=u;this.col=k;this.extent=p}}f.TileKey=c;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/tslib.es6 ../core/ArrayPool ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,h,b,u,k,p,l,m){function a(t,v){return v?e[t].valueToClassName[v].split(" "):[]}const e={widthBreakpoint:{getValue(t){const v=t.viewSize[0];t=t.breakpoints;const r=this.values;return v<=t.xsmall?r.xsmall:v<=t.small?r.small:v<=t.medium?r.medium:v<=t.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const v=t.viewSize[1];t=t.breakpoints;const r=this.values;return v<=t.xsmall?r.xsmall:v<=t.small?r.small:v<=t.medium?r.medium:v<=t.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){t=t.viewSize;const v=this.values;return t[1]>=t[0]?v.portrait:v.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},n={xsmall:544,small:768,medium:992,large:1200};f.BreakpointsOwner=
t=>{t=class extends t{constructor(...v){super(...v);this.heightBreakpoint=this.widthBreakpoint=this.orientation=null;this.breakpoints=n}initialize(){this.addHandles(b.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),b.initial))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(v){var r=this._get("breakpoints");if(v!==r){r=(r=v)&&r.xsmall<r.small&&r.small<r.medium&&r.medium<r.large;if(!r){const g=JSON.stringify(n,null,2);console.warn("provided breakpoints are not valid, using defaults:"+
g)}v=r?v:n;this._set("breakpoints",{...v})}}_updateClassNames(){if(this.container){var v=h.acquire(),r=h.acquire(),g=!1,w;for(w in e){const B=this[w],A=e[w].getValue({viewSize:this.size,breakpoints:this.breakpoints});B!==A&&(g=!0,this[w]=A,a(w,B).forEach(d=>r.push(d)),a(w,A).forEach(d=>v.push(d)))}g&&(this._applyClassNameChanges(v,r),h.release(v),h.release(r))}}_applyClassNameChanges(v,r){const g=this.container;g&&(r.forEach(w=>g.classList.remove(w)),v.forEach(w=>g.classList.add(w)))}_removeActiveClassNames(){const v=
this.container;if(v)for(var r in e)a(r,this[r]).forEach(g=>v.classList.remove(g))}};c.__decorate([u.property()],t.prototype,"breakpoints",null);c.__decorate([u.property()],t.prototype,"orientation",void 0);c.__decorate([u.property()],t.prototype,"widthBreakpoint",void 0);c.__decorate([u.property()],t.prototype,"heightBreakpoint",void 0);return t=c.__decorate([m.subclass("esri.views.BreakpointsOwner")],t)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/tslib.es6 ../intl ../core/domUtils ../core/events ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay ../intl/locale ../intl/messages".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r,g){function w(A){A&&(b.empty(A),A.parentNode&&A.parentNode.removeChild(A))}const B=[0,0];f.DOMContainer=A=>{A=class extends A{constructor(...d){super(...d);this._freqInfo={freq:16,time:750};this._overlayRenderTaskHandle=null;this.height=0;this.position=this.overlay=this.messagesCommon=null;this.resizing=!1;this.surface=this.root=null;this.suspended=!0;this.userContent=this.ui=null;this.width=0;this.widthBreakpoint=null;this.addHandles([m.watch(()=>this.cursor,
x=>{const {surface:q}=this;q&&q.setAttribute("data-cursor",x)}),m.watch(()=>this.navigating,x=>{const {surface:q}=this;q&&q.setAttribute("data-navigating",x.toString())})])}initialize(){const d=k("mac"),x=async()=>{d&&(await m.whenOnce(()=>this.ready),this.messagesCommon=await g.fetchMessageBundle("esri/t9n/common").catch(()=>{}))};x();this.addHandles([m.watch(()=>this.ui,(q,z)=>this._handleUIChange(q,z),m.initial),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),
r.onLocaleChange(x),m.watch(()=>[this.surface,this.messagesCommon],()=>{d&&this.surface?.setAttribute("aria-label",this.messagesCommon?.ariaLabels?.navigationMacVoiceOver??"")})])}destroy(){this.destroyed||(this.ui=l.destroyMaybe(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(d){var x=this._get("container");const q=b.byId(d);q||"string"!==typeof d||p.getLogger(this).error("#container",`element with id '${d}' not found`);if(x!==q)if(this._stopMeasuring(),
x&&(x.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(w(this.root),this._set("root",null)),this.userContent&&(b.reparent(this.userContent,x),w(this.userContent),this._set("userContent",null))),q){q.classList.add("esri-view");d=document.createElement("div");d.className="esri-view-user-storage";b.reparent(q,d);q.appendChild(d);this._set("userContent",
d);d=document.createElement("div");d.className="esri-view-root";q.insertBefore(d,q.firstChild);this._set("root",d);x=document.createElement("div");x.className="esri-view-surface";x.setAttribute("role","application");x.tabIndex=0;d.appendChild(x);this._set("surface",x);var z=new v;d.appendChild(z.surface);this._set("overlay",z);this.addHandles(m.watch(()=>z.needsRender,E=>{this._overlayRenderTaskHandle=E&&!this._overlayRenderTaskHandle?a.addFrameTask({render:()=>this.overlay?.render()}):l.removeMaybe(this._overlayRenderTaskHandle)}));
this.forceDOMReadyCycle();this._set("container",q);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const d=document.activeElement===this.surface;return document.hasFocus()&&d}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(d,x,q){const z=this.position;d-=z?z[0]:0;x-=z?z[1]:0;q?(q[0]=d,q[1]=
x):q=[d,x];return q}containerToPage(d,x,q){const z=this.position;d+=z?z[0]:0;x+=z?z[1]:0;q?(q[0]=d,q[1]=x):q=[d,x];return q}_handleUIChange(d,x){this.removeHandles("ui");x&&x!==d&&x.destroy();d&&(d.view=this,this.addHandles(m.watch(()=>this.root,q=>{if(q){const z=document.createElement("div");q.appendChild(z);q=z}else q=null;d.container=q},m.initial),"ui"));this._set("ui",d)}_stopMeasuring(){this.removeHandles("measuring");this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const d=
this._freqInfo;d.freq=16;d.time=750;this.addHandles([u.on(window,"resize",()=>{d.freq=16;d.time=750}),a.addFrameTask({prepare:x=>{const q=this._measure(),z=this._freqInfo;z.time+=x.deltaTime;q&&(z.freq=16,this._get("resizing")||this._set("resizing",!0));z.time<z.freq||(z.time=0,this._position()||q?z.freq=16:z.freq=Math.min(750,2*z.freq),!q&&512<=z.freq&&this._get("resizing")&&this._set("resizing",!1))}})],"measuring");this._measure();this._position()}_measure(){var d=this.container;const x=d?d.clientWidth:
0;d=d?d.clientHeight:0;if(0===x||0===d)return this.suspended||this._set("suspended",!0),!1;const q=this.width,z=this.height;if(x===q&&d===z)return this.suspended&&this._set("suspended",!1),!1;this._set("width",x);this._set("height",d);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:q,oldHeight:z,width:x,height:d});return!0}_position(){var d=this.container;const x=this.position;var q;if(q=d)q=(d.ownerDocument||window.document).defaultView,d=d.getBoundingClientRect(),B[0]=d.left+
(q?.pageXOffset??0),B[1]=d.top+(q?.pageYOffset??0),q=B;d=q;return d?x&&d[0]===x[0]&&d[1]===x[1]?!1:(this._set("position",[d[0],d[1]]),!0):!1}forceDOMReadyCycle(){}};c.__decorate([e.property()],A.prototype,"container",null);c.__decorate([e.property({readOnly:!0})],A.prototype,"focused",null);c.__decorate([e.property({readOnly:!0})],A.prototype,"height",void 0);c.__decorate([e.property()],A.prototype,"messagesCommon",void 0);c.__decorate([e.property({type:v})],A.prototype,"overlay",void 0);c.__decorate([e.property({readOnly:!0})],
A.prototype,"position",void 0);c.__decorate([e.property({readOnly:!0})],A.prototype,"resizing",void 0);c.__decorate([e.property({readOnly:!0})],A.prototype,"root",void 0);c.__decorate([e.property({value:null,readOnly:!0})],A.prototype,"size",null);c.__decorate([e.property({readOnly:!0})],A.prototype,"surface",void 0);c.__decorate([e.property({readOnly:!0})],A.prototype,"suspended",void 0);c.__decorate([e.property()],A.prototype,"ui",void 0);c.__decorate([e.property({readOnly:!0})],A.prototype,"userContent",
void 0);c.__decorate([e.property({readOnly:!0})],A.prototype,"width",void 0);c.__decorate([e.property()],A.prototype,"widthBreakpoint",void 0);return A=c.__decorate([t.subclass("esri.views.DOMContainer")],A)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e){c=class extends c{constructor(){super(...arguments);this.items=new h;this._watchUpdatingTracking=new m.UpdatingHandles;this._callbacks=new Map;this._projector=e.createProjector();this._hiddenProjector=e.createProjector()}get needsRender(){return 0<this.items.length}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const n=document.createElement("div");n.className="esri-overlay-surface";this._set("surface",n);this._hiddenSurface=document.createElement("div");
this._hiddenSurface.setAttribute("style","visibility: hidden;");n.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(const v of t.added){const r=()=>v.render();this._callbacks.set(v,r);this._projector.append(this.surface,r)}for(const v of t.removed)t=this._projector.detach(this._callbacks.get(v)),this.surface.removeChild(t.domNode),this._callbacks.delete(v)})}addItem(n){this.items.add(n)}removeItem(n){this.items.remove(n)}destroy(){this.items.removeAll();
this._callbacks.forEach(n=>this._projector.detach(n));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(n){const t=this._hiddenSurface,v=this._hiddenProjector;let r;const g=()=>r=n.render();v.append(t,g);v.renderNow();const w={left:0,top:0,right:0,bottom:0};if(r?.domNode){const B=r.domNode.getBoundingClientRect();w.left=B.left;w.top=B.top;w.right=B.right;w.bottom=B.bottom}for(v.detach(g);t.firstChild;)t.removeChild(t.firstChild);
return w}overlaps(n,t){n=this.computeBoundingRect(n);t=this.computeBoundingRect(t);return Math.max(n.left,t.left)<=Math.min(n.right,t.right)&&Math.max(n.top,t.top)<=Math.min(n.bottom,t.bottom)}get hasVisibleItems(){return this.items.some(n=>n.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(n,t){const v=!!t?.disableDecorations;if(this.items.some(g=>g.visible&&!(v&&g.isDecoration))){var r=n.getContext("2d");r.save();r.font=this._fontString();this.items.forEach(g=>
{v&&g.isDecoration||(r.save(),g.renderCanvas(r),r.restore())});r.restore()}}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};f.__decorate([b.property({readOnly:!0})],c.prototype,"surface",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,"items",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,"needsRender",null);f.__decorate([b.property({readOnly:!0})],c.prototype,"_watchUpdatingTracking",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,
"updating",null);return c=f.__decorate([l.subclass("esri.views.overlay.ViewOverlay")],c)})},"esri/views/PopupView":function(){define("require exports ../chunks/tslib.es6 ../core/asyncUtils ../core/deprecate ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./input/InputManager".split(" "),function(f,c,h,b,u,k,p,l,m,a,e,n,t,v){function r(A){return null!=A&&"open"in
A&&"declaredClass"in A}function g(A){return null!=A&&"declaredClass"in A&&"dockOptions"in A}const w=A=>Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));class B{constructor(A){this.layerView=A;this._resolver=m.createResolver();this.graphics=[]}get promise(){return this._resolver.promise}resolve(A){const {layerView:d,graphics:x,_resolver:q}=this;if(!d)return q.resolve(x),q.promise;let z;d.fetchPopupFeaturesFromGraphics(x,A).catch(E=>{z=E;return null}).then(E=>
{E?q.resolve(E):q.reject(z)});return q.promise}}c.PopupView=A=>{A=class extends A{constructor(){super(...arguments);this._popupSetupTask=null;this.popup={};this.popupEnabled=!0}initialize(){this.addHandles([a.watch(()=>[this.ui,this.popup],([d,x],q)=>{if(q){const [z,E]=q;z&&r(E)&&(E.view=null,g(E)&&z.remove(E,"popup"))}d&&r(x)&&(x.view=this,g(x)&&d.add(x,{key:"popup",position:"manual",internal:!0}))},a.initial),this.on("click",d=>{this.popup&&this.popupEnabled&&("mouse"!==d.pointerType||0===d.button)&&
(!r(this.popup)&&"autoOpenEnabled"in this.popup&&!1===this.popup.autoOpenEnabled||(r(this.popup)?this.popup.viewModel.handleViewClick(d):d.async(async()=>{await this.setupPopup();r(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(d)})))},v.ViewEventPriorities.WIDGET)]);a.whenOnce(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{new Promise((d,x)=>f(["../widgets/Popup"],q=>d(w(q)),x))})}destroy(){this.destroyed||this.closePopup()}async openPopup(d){if(r(this.popup))return this.popup.open(d);
try{await this.setupPopup(),this.popup?this.popup.open(d):l.getLogger(this).error(new k("view:null-popup","Popup is null and can't be opened"))}catch{}}closePopup(){this._popupSetupTask?.abort();r(this.popup)&&this.popup.close()}async fetchPopupFeatures(d,x){await this.when();return this._popupHitsToFeatures(await this._getPopupHits(d,x),x)}async setupPopup(){this._popupSetupTask?.abort();if(this.popup&&!r(this.popup))return this._popupSetupTask=b.createTask(async d=>{const {default:x}=await new Promise((q,
z)=>f(["../widgets/Popup"],E=>q(w(E)),z));m.throwIfAborted(d);this.popup&&!r(this.popup)&&(d=this.popup,delete d.open,delete d.close,this.popup=new x(d))}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:d,hits:x},q){const z=[],E=[];let G=!1;const M=m.wrapAbortWithTimeout(q,p("popup-view-fetch-timeout")??5E3);q=L=>{const P=E.at(-1);P&&P.layerView===L&&!G?L=P:(L=new B(L),E.push(L),z.push(L.promise));return L};for(const L of x)"graphic"in L?(q(L.layerView).graphics.push(L.graphic),
G=!1):(z.push(L.layerView.fetchPopupFeaturesAtLocation(L.mapPoint,M)),G=!0);E.map(L=>L.resolve(M));x=m.allSettledValues(z).then(L=>L.filter(P=>!!P).flat());return{pendingFeatures:z,allGraphicsPromise:x,location:d}}async _getPopupHits(d,x){const {hits:q,location:z}=await this.popupHitTest(d);m.throwIfAborted(x);d=[];for(const E of q)if("graphic"in E){if(this._isValidPopupGraphic(E.graphic,x)){const G=this._isValidPopupGraphicsLayerView(E.layerView)?E.layerView:void 0;d.push({graphic:E.graphic,layerView:G})}}else this._isValidPopupLocationLayerView(E.layerView)&&
d.push({mapPoint:E.mapPoint,layerView:E.layerView});return{hits:d,location:z}}_isValidPopupGraphic(d,x){return d&&!!d.getEffectivePopupTemplate(null!=x&&x.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(d){return!d||(!("layer"in d)||!d.suspended)&&"fetchPopupFeaturesFromGraphics"in d}_isValidPopupLocationLayerView(d){return(!("layer"in d)||!d.suspended)&&"fetchPopupFeaturesAtLocation"in d}};h.__decorate([e.property({cast(d){if(!d||r(d))return d;"object"===typeof d&&(d.open=x=>{u.deprecated(l.getLogger(this),
"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"});return this.openPopup(x)},d.close=()=>{u.deprecated(l.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"});return this.closePopup()});return d}})],A.prototype,"popup",void 0);h.__decorate([e.property()],
A.prototype,"popupEnabled",void 0);return A=h.__decorate([t.subclass("esri.views.PopupView")],A)};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/maybe ../../core/scheduling ../../core/time ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./unitBezier ./viewpointUtils ./pointToPoint/Camera ../animation/pointToPoint/Animation ../../geometry/Point".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r,g,w,B){class A{constructor(d){this._view=d;this._animation=new w.Animation(()=>new g.Camera(this._view));this._current=new g.Camera(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}update(d,x,q={}){r.copy(this._current.viewpoint,d);r.copy(this._source.viewpoint,d);r.copy(this._target.viewpoint,x);this._animation.update(this._source,this._target,
q)}applyRatio(d,x){this._animation.cameraAt(x,this._current);r.copy(d,this._current.viewpoint)}}c=class extends b{constructor(d){super(d);this.updateFunction=this._animation=null;this.duration=200;this.easing=v.easingFunctions.ease;this.viewpoint=new h({targetGeometry:new B,scale:0,rotation:0});this._updateTask=k.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause();this._transition=new A(d.view)}destroy(){this._updateTask=u.removeMaybe(this._updateTask)}get animation(){return this._animation}set animation(d){this._animation=
d;this.view.animation=d}animate(d,x,q){this.stop();r.copy(this.viewpoint,x);const z=("string"===typeof q?.easing?v.parse(q.easing):q?.easing)||this.easing;this._transition.update(this.viewpoint,d.target,{apex:q?.enableHop?{maximumDistance:this.view.constraints.effectiveMinScale,desiredSlope:5E-8}:void 0,minDuration:p.Milliseconds(0),maxDuration:q?.enableHop?q?.duration??q?.maxDuration:p.Milliseconds(Infinity),speedFactor:q?.enableHop?q?.speedFactor:1,duration:q?.enableHop?q?.duration:q?.duration??
p.Milliseconds(this.duration),easing:"function"===typeof z?E=>z(E):void 0});x=()=>{this.animation===d&&this._updateTask&&("finished"===d.state&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};d.when(x,x);this._startTime=performance.now();this._updateTask.resume();return this.animation=d}animateContinous(d,x){this.stop();this.updateFunction=x;this.viewpoint=d;const q=new t({target:d.clone()});
d=()=>{this.animation===q&&this._updateTask&&(this.updateFunction=this.animation=null)};q.when(d,d);this._startTime=performance.now();this._updateTask.resume();return this.animation=q}stop(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)}_postRender(d){var x=this.animation;x&&x.state!==t.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,d.deltaTime):(d=(performance.now()-this._startTime)/this._transition.duration,x=1<=d,this._transition.applyRatio(this.viewpoint,
d),x&&this.animation?.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}};f.__decorate([l.property()],c.prototype,"duration",void 0);f.__decorate([l.property()],c.prototype,"easing",void 0);f.__decorate([l.property()],c.prototype,"view",void 0);f.__decorate([l.property()],c.prototype,"viewpoint",void 0);return c=f.__decorate([n.subclass("esri.views.2d.AnimationManager")],c)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(f){function c(u,
k,p,l){function m(g,w){var B;let A,d;A=g;for(B=0;8>B;B++){d=((n*A+e)*A+a)*A-g;if(Math.abs(d)<w)return A;var x=(3*n*A+2*e)*A+a;if(1E-6>Math.abs(x))break;A-=d/x}x=0;B=1;A=g;if(A<x)return x;if(A>B)return B;for(;x<B;){d=((n*A+e)*A+a)*A;if(Math.abs(d-g)<w)break;g>d?x=A:B=A;A=.5*(B-x)+x}return A}const a=3*u,e=3*(p-u)-a,n=1-a-e,t=3*k,v=3*(l-k)-t,r=1-t-v;return function(g,w=1E-6){g=m(g,w);return((r*g+v)*g+t)*g}}const h=/^cubic-bezier\((.*)\)/,b={};b.ease=c(.25,.1,.25,1);b.linear=c(0,0,1,1);b.easeIn=b["ease-in"]=
c(.42,0,1,1);b.easeOut=b["ease-out"]=c(0,0,.58,1);b.easeInOut=b["ease-in-out"]=c(.42,0,.58,1);f.easingFunctions=b;f.parse=function(u){let k=b[u]||null;!k&&(u=h.exec(u))&&(u=u[1].split(",").map(p=>parseFloat(p.trim())),4!==u.length||u.some(p=>isNaN(p))||(k=c.apply(c,u)));return k};f.unitBezier=c;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../Viewpoint ../../core/Collection ../../core/unitUtils ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/normalizeUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r,g){function w(D,F){return F.type?l.set(D,F.x,F.y):l.copy(D,F)}function B(D,F){return Math.max(D.width/Math.max(1,F[0]),D.height/Math.max(1,F[1]))*M(D.spatialReference)}async function A(D,F,H,N){if(!D||Array.isArray(D)&&!D.length)return null;h.isCollection(D)&&(D=D.toArray());if(Array.isArray(D)&&D.length&&"object"===typeof D[0]){var Q=D.every(U=>"attributes"in U);var T=D.some(U=>!U.geometry),ea=D;if(Q&&T&&F&&F.allLayerViews){Q=new Map;for(var ia of D)D=ia.layer,
T=Q.get(D)||[],ea=ia.attributes[D.objectIdField],null!=ea&&T.push(ea),Q.set(D,T);const U=[];Q.forEach((ca,ma)=>{const la=F.allLayerViews.find(ja=>ja.layer.id===ma.id);if(la&&"queryFeatures"in la){const ja=ma.createQuery();ja.objectIds=ca;ja.returnGeometry=!0;U.push(la.queryFeatures(ja))}});ia=await Promise.all(U);D=[];for(var I of ia)if(I&&I.features&&I.features.length)for(var O of I.features)null!=O.geometry&&D.push(O.geometry);ea=D}for(const U of ea)N=await A(U,F,H,N);return N}if(Array.isArray(D)&&
2===D.length&&"number"===typeof D[0]&&"number"===typeof D[1])Q=new n(D);else if(D instanceof e)Q=D;else if("geometry"in D)if(D.geometry)Q=D.geometry;else if(D.layer){const U=D.layer;(I=F.allLayerViews.find(ca=>ca.layer.id===U.id))&&"queryFeatures"in I&&(O=U.createQuery(),O.objectIds=[D.attributes[U.objectIdField]],O.returnGeometry=!0,Q=(await I.queryFeatures(O))?.features?.[0]?.geometry)}if(null==Q)return null;switch(Q.type){case "point":I=new a({xmin:Q.x,ymin:Q.y,xmax:Q.x,ymax:Q.y,spatialReference:Q.spatialReference});
break;case "extent":case "multipoint":case "polygon":case "polyline":I=r.getDenormalizedExtent(Q);break;default:I=Q.extent}if(!I)return null;t.isLoaded()||t.canProjectWithoutEngine(I.spatialReference,H)||await t.load();H=t.project(I,H);return H?N=N?N.union(H):H:null}function d(D){if(D&&(!Array.isArray(D)||"number"!==typeof D[0])&&("object"===typeof D||Array.isArray(D)&&"object"===typeof D[0])){if("layer"in D&&null!=D.layer?.minScale&&null!=D.layer.maxScale){var F=D.layer;return{min:F.minScale,max:F.maxScale}}if(Array.isArray(D)&&
D.length&&D.every(H=>"layer"in H)){let H=F=0;for(const N of D)D=N.layer,D?.minScale&&D.maxScale&&(F=D.minScale<F?D.minScale:F,H=D.maxScale>H?D.maxScale:H);return F&&H?{min:F,max:H}:null}}}function x(D,F){return g.equals(D.wkid?D:D.spatialReference||v.WGS84,F)?D:t.project(D,F)}function q(D,F){const H=D.targetGeometry,N=F.targetGeometry;H.x=N.x;H.y=N.y;H.spatialReference=N.spatialReference;D.scale=F.scale;D.rotation=F.rotation;return D}function z(D,F,H){return H?l.set(D,.5*(F[0]-H.right+H.left),.5*
(F[1]-H.bottom+H.top)):l.scale(D,F,.5)}function E(D){return D.scale*G(D.targetGeometry?.spatialReference)}function G(D){return null!=D&&g.isValid(D)?1/(39.37*b.getMetersPerUnitForSR(D)*96):1}function M(D){return g.isValid(D)?39.37*b.getMetersPerUnitForSR(D)*96:1}function L(D){return(D=g.getInfo(D))?D.valid[1]-D.valid[0]:0}const P=180/Math.PI,ba=function(){const D=m.create();return function(F,H,N){const Q=H.targetGeometry;w(D,Q);H=.5*E(H);F.xmin=D[0]-H*N[0];F.ymin=D[1]-H*N[1];F.xmax=D[0]+H*N[0];F.ymax=
D[1]+H*N[1];F.spatialReference=Q.spatialReference;return F}}(),Z=function(){const D=m.create();return function(F,H,N){return l.sub(F,l.scale(F,H,.5),z(D,H,N))}}(),W=function(){const D=p.create(),F=m.create();return function(H,N,Q,T){const ea=E(N);N=u.toRadian(N.rotation)||0;l.set(F,ea,ea);k.fromScaling(D,F);k.rotate(D,D,N);k.translate(D,D,Z(F,Q,T));k.translate(D,D,[0,T.top-T.bottom]);return l.set(H,D[4],D[5])}}(),fa=function(){const D=m.create(),F=m.create(),H=m.create();return function(N,Q,T,ea,
ia,I){l.negate(D,Q);l.scale(F,T,.5*I);l.set(H,1/ea*I,-1/ea*I);k.fromTranslation(N,F);ia&&k.rotate(N,N,ia);k.scale(N,N,H);k.translate(N,N,D);return N}}(),ha=function(){const D=m.create();return function(F,H,N,Q){const T=E(H),ea=u.toRadian(H.rotation)||0;w(D,H.targetGeometry);return fa(F,D,N,T,ea,Q)}}(),y=function(){const D=m.create();return function(F,H,N,Q){const T=E(H);w(D,H.targetGeometry);return fa(F,D,N,T,0,Q)}}(),C=function(){const D=m.create(),F=m.create(),H=[0,0,0];return function(N,Q,T){l.subtract(D,
N,Q);l.normalize(D,D);l.subtract(F,N,T);l.normalize(F,F);l.cross(H,D,F);N=Math.acos(l.dot(D,F)/(l.length(D)*l.length(F)))*P;0>H[2]&&(N=-N);isNaN(N)&&(N=0);return N}}(),J=function(){const D=m.create();return function(F,H,N,Q){const T=F.targetGeometry;q(F,H);W(D,H,N,Q);T.x+=D[0];T.y+=D[1];return F}}(),R=function(){return function(D,F,H){q(D,F);F=D.targetGeometry;F.x=H.x;F.y=H.y;F.spatialReference=H.spatialReference;return D}}(),K=function(){const D=m.create();return function(F,H,N,Q,T){T||="center";
l.sub(D,N,Q);l.scale(D,D,.5);N=D[0];Q=D[1];switch(T){case "center":l.set(D,0,0);break;case "left":l.set(D,-N,0);break;case "top":l.set(D,0,Q);break;case "right":l.set(D,N,0);break;case "bottom":l.set(D,0,-Q);break;case "top-left":l.set(D,-N,Q);break;case "bottom-left":l.set(D,-N,-Q);break;case "top-right":l.set(D,N,Q);break;case "bottom-right":l.set(D,N,-Q)}da(F,H,D);return F}}(),S=function(){const D=m.create();return function(F,H,N,Q,T){q(F,H);isNaN(N)||0===N||(Y(D,Q,H,T),F.scale=H.scale*N,aa(D,
D,F,T),da(F,F,l.set(D,D[0]-Q[0],Q[1]-D[1])));return F}}(),V=function(){const D=m.create();return function(F,H,N,Q,T,ea){q(F,H);isNaN(N)||0===N||(Y(D,T,H,ea),F.scale=H.scale*N,F.rotation+=Q,aa(D,D,F,ea),da(F,F,l.set(D,D[0]-T[0],T[1]-D[1])));return F}}(),X=function(){const D=m.create(),F=m.create();return function(H,N,Q,T,ea,ia,I){Z(F,ia,I);l.add(D,ea,F);return T?V(H,N,Q,T,D,ia):S(H,N,Q,D,ia)}}(),Y=function(){const D=p.create();return function(F,H,N,Q){var T=l.transformMat2d;ha(D,N,Q,1);N=k.invert(D,
D);return T.call(l,F,H,N)}}(),aa=function(){const D=p.create();return function(F,H,N,Q){return l.transformMat2d(F,H,ha(D,N,Q,1))}}(),da=function(){const D=m.create(),F=p.create();return function(H,N,Q){q(H,N);const T=E(N),ea=H.targetGeometry;k.fromRotation(F,u.toRadian(N.rotation)||0);k.scale(F,F,m.fromValues(T,T));l.transformMat2d(D,Q,F);ea.x+=D[0];ea.y+=D[1];return H}}();f.addPadding=J;f.angleBetween=C;f.centerAt=R;f.copy=q;f.create=async function(D,F){if(!D||!F)return new c({targetGeometry:new n,
scale:0,rotation:0});let H=F.spatialReference;const {constraints:N,padding:Q,viewpoint:T,size:ea}=F,ia=[Q?ea[0]-Q.left-Q.right:ea[0],Q?ea[1]-Q.top-Q.bottom:ea[1]];let I=null;D instanceof c?I=D:D.viewpoint?I=D.viewpoint:D.target&&"esri.Viewpoint"===D.target.declaredClass&&(I=D.target);let O=null;if(I?.targetGeometry)O=I.targetGeometry;else if(D instanceof a)O=D;else if(D||D&&("center"in D||"extent"in D||"target"in D))O=await A(D.center,F,H)||await A(D.extent,F,H)||await A(D.target,F,H)||await A(D,
F,H);!O&&T?.targetGeometry?O=T.targetGeometry:!O&&F.extent&&(O=F.extent);if(!H){var U=F.spatialReference||F.extent||O;H=U.wkid?U:U.spatialReference||v.WGS84}t.isLoaded()||g.equals(O.spatialReference,H)||t.canProjectWithoutEngine(O.spatialReference,H)||await t.load();U=x("center"in O?O.center:O,H);!1!==F.pickClosestTarget&&"point"===U.type&&"point"===T.targetGeometry?.type&&(U.x=r.getClosestDenormalizedXToReference(U.x,T.targetGeometry.x,U.spatialReference));var ca=0;null!=I?.targetGeometry&&"point"===
I.targetGeometry.type?ca=I.scale:"scale"in D&&D.scale?ca=D.scale:"zoom"in D&&-1!==D.zoom&&N&&N.effectiveLODs?ca=N.zoomToScale(D.zoom):Array.isArray(O)||"point"===O.type||"extent"===O.type&&0===O.width&&0===O.height?(ca=x(F.extent,H),ca=null!=ca?B(ca,ia):F.extent?B(F.extent,ia):T.scale):ca=B(x(O.extent,H),ia);if(F=d(D.target??D))F.min&&F.min<ca?ca=F.min:F.max&&F.max>ca&&(ca=F.max);F=0;I?F=I.rotation:D.hasOwnProperty("rotation")?F=D.rotation:T&&(F=T.rotation);D=new c({targetGeometry:U,scale:ca,rotation:F});
N&&(D=N.fit(D),N.constrainByGeometry(D),N.rotationEnabled||(D.rotation=T.rotation));return D};f.extentToScale=B;f.getAnchor=z;f.getExtent=ba;f.getMatrix=fa;f.getPaddingMapTranslation=W;f.getPaddingScreenTranslation=Z;f.getResolution=E;f.getResolutionToScaleFactor=M;f.getScaleToResolutionFactor=G;f.getTransform=ha;f.getTransformNoRotation=y;f.getWorldScreenWidth=function(D,F){return Math.round(L(D)/F)};f.getWorldWidth=L;f.padAndScaleAndRotateBy=X;f.resize=K;f.rotateBy=function(D,F,H){q(D,F);D.rotation+=
H;return D};f.rotateTo=function(D,F,H){q(D,F);D.rotation=H;return D};f.scaleAndRotateBy=V;f.scaleTo=function(D,F,H){q(D,F);D.scale=H;return D};f.setExtent=function(D,F,H,N,Q){R(D,F,H.center);D.scale=B(H,N);Q?.constraints?.constrain(D);return D};f.toMap=Y;f.toScreen=aa;f.translateBy=da;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["exports"],function(f){function c(){return[1,0,0,1,0,0]}function h(l){return[l[0],l[1],
l[2],l[3],l[4],l[5]]}function b(l,m,a,e,n,t){return[l,m,a,e,n,t]}function u(l,m){return new Float64Array(l,m,6)}const k=c(),p=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:k,clone:h,create:c,createView:u,fromValues:b},Symbol.toStringTag,{value:"Module"}));f.IDENTITY=k;f.clone=h;f.create=c;f.createView=u;f.fromValues=b;f.mat2df64=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(f){function c(){return[0,
0]}function h(g){return[g[0],g[1]]}function b(g,w){return[g,w]}function u(g,w=[0,0]){const B=Math.min(2,g.length);for(let A=0;A<B;++A)w[A]=g[A];return w}function k(g,w){return new Float64Array(g,w,2)}function p(){return[0,0]}function l(){return[1,1]}function m(){return[1,0]}function a(){return[0,1]}const e=[0,0],n=[1,1],t=[1,0],v=[0,1],r=Object.freeze(Object.defineProperty({__proto__:null,ONES:n,UNIT_X:t,UNIT_Y:v,ZEROS:e,clone:h,create:c,createView:k,fromArray:u,fromValues:b,ones:l,unitX:m,unitY:a,
zeros:p},Symbol.toStringTag,{value:"Module"}));f.ONES=n;f.UNIT_X=t;f.UNIT_Y=v;f.ZEROS=e;f.clone=h;f.create=c;f.createView=k;f.fromArray=u;f.fromValues=b;f.ones=l;f.unitX=m;f.unitY=a;f.vec2f64=r;f.zeros=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/pointToPoint/Camera":function(){define("exports ../../../geometry ../../../Viewpoint ../../../core/mathUtils ../../../geometry/support/pointUtils ../viewpointUtils ../../../geometry/Point".split(" "),function(f,c,h,b,u,
k,p){class l{constructor(m){this._view=m;this.viewpoint=new h({targetGeometry:new p,scale:0,rotation:0})}get view(){return this._view}get size(){const [m,a]=this._view.size;return Math.sqrt(m*m+a*a)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return k.getScaleToResolutionFactor(this.center.spatialReference)}pixelsPerPanAtZoom(m){return 1/(m*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(m){return 1/
(m*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(m){return this.size/2}compareTo(m,a){a??={pan:0,rotate:0,sourceZoom:0,targetZoom:0};a.pan=u.distance(this.center,m.center);const e=Math.abs(m.rotation-this.rotation);a.rotate=180<=e?360-e:e;a.sourceZoom=this.scale;a.targetZoom=m.scale;return a}interpolate(m,a,e){const {pan:n,zoom:t,rotate:v}=e;({center:e}=this);e.spatialReference=m.center.spatialReference;e.x=b.lerp(m.center.x,a.center.x,n);e.y=b.lerp(m.center.y,a.center.y,n);this.viewpoint.scale=
a.scale*t;m=m.rotation;a=a.rotation;180<=Math.abs(a-m)&&(m+=360*(m<a?1:-1));this.viewpoint.rotation=b.lerp(m,a,v)}copyFrom(m){k.copy(this.viewpoint,m.viewpoint);this._view=m.view}}f.Camera=l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Animation":function(){define("exports ../../../core/time ../easing ./Definition ./Settings ./apex/Path".split(" "),function(f,c,h,b,u,k){const p={zoom:0,pan:0,rotate:0};f.Animation=class{get time(){return this._time}constructor(l){this._createCamera=
l;this._time=c.Milliseconds(0);this.definition=new b.Definition(l);this.path=new k.Path}update(l,m,a){this.definition.update(l,m,a);this.path.update(this.definition,a);this._time=this._applyTimeSettings(c.millisecondsFromSeconds(isFinite(this.path.time)?this.path.time:c.Seconds(0)),a);this._easing=a.easing??(1E3<=this._time?h.inOutCoastQuad:h.outExpo)}cameraAt(l,m){m=m||this._createCamera();l=Math.min(Math.max(0,l),1);l=this._normalizedEasing(l);l=this.path.interpolateComponentsAt(l,p);m.interpolate(this.definition.source,
this.definition.target,l);return m}_normalizedEasing(l){const m=this._easing(0,this._time),a=this._easing(1,this._time);return(this._easing(l,this._time)-m)/(a-m)}_applyTimeSettings(l,m){const a=null!=m.speedFactor?m.speedFactor:1;null!=m.duration?l=m.duration:null!=m.speedFactor&&(l=c.Milliseconds(l/a));return c.Milliseconds(Math.min(Math.max(null!=m.minDuration?m.minDuration:u.defaultSettings.minDuration/a,l),null!=m.maxDuration?m.maxDuration:u.defaultSettings.maxDuration/a))}};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/easing":function(){define(["exports"],function(f){function c(K){const S=2*(K-Math.sqrt((K-1)*K)),V=S/2/K;return X=>X<V?K*X*X:S*X-S+1}function h(K,S){return(V,X)=>V<S?S*K(V/S,X):1-K((1-V)/(1-S),X)*(1-S)}const b=K=>K,u=K=>K*K,k=K=>1-u(1-K),p=K=>.5>K?u(2*K)/2:(1-u(1-2*(K-.5))+1)/2,l=K=>K*K*K,m=K=>1-l(1-K),a=K=>.5>K?l(2*K)/2:(1-l(1-2*(K-.5))+1)/2,e=K=>K*K*K*K,n=K=>1-e(1-K),t=K=>.5>K?e(2*K)/2:(1-e(1-2*(K-.5))+1)/2,v=K=>K*K*K*K*K,r=K=>1-v(1-
K),g=K=>.5>K?v(2*K)/2:(1-v(1-2*(K-.5))+1)/2,w=K=>-Math.cos(K*Math.PI/2)+1,B=K=>1-w(1-K),A=K=>.5>K?w(2*K)/2:(1-w(1-2*(K-.5))+1)/2,d=K=>2**(10*(K-1)),x=K=>1-2**(10*(1-K-1)),q=K=>.5>K?2**(10*(2*K-1))/2:(1-2**(10*(1-2*(K-.5)-1))+1)/2,z=K=>-(Math.sqrt(1-K*K)-1),E=K=>1-z(1-K),G=K=>.5>K?z(2*K)/2:(1-z(1-2*(K-.5))+1)/2,M=h(c(1),1),L=h(c(1),0),P=h(c(1),.5),ba=h(c(2),1),Z=h(c(2),0),W=h(c(2),.5),fa=h(c(3),1),ha=h(c(3),0),y=h(c(3),.5),C=h(c(4),1),J=h(c(4),0),R=h(c(4),.5);f.EasingFunctions={linear:b,"in-quad":u,
"out-quad":k,"in-out-quad":p,"in-coast-quad":M,"out-coast-quad":L,"in-out-coast-quad":P,"in-cubic":l,"out-cubic":m,"in-out-cubic":a,"in-coast-cubic":ba,"out-coast-cubic":Z,"in-out-coast-cubic":W,"in-quart":e,"out-quart":n,"in-out-quart":t,"in-coast-quart":fa,"out-coast-quart":ha,"in-out-coast-quart":y,"in-quint":v,"out-quint":r,"in-out-quint":g,"in-coast-quint":C,"out-coast-quint":J,"in-out-coast-quint":R,"in-sine":w,"out-sine":B,"in-out-sine":A,"in-expo":d,"out-expo":x,"in-out-expo":q,"in-circ":z,
"out-circ":E,"in-out-circ":G};f.inCirc=z;f.inCoastCubic=ba;f.inCoastQuad=M;f.inCoastQuart=fa;f.inCoastQuint=C;f.inCubic=l;f.inExpo=d;f.inOutCirc=G;f.inOutCoastCubic=W;f.inOutCoastQuad=P;f.inOutCoastQuart=y;f.inOutCoastQuint=R;f.inOutCubic=a;f.inOutExpo=q;f.inOutQuad=p;f.inOutQuart=t;f.inOutQuint=g;f.inOutSine=A;f.inQuad=u;f.inQuart=e;f.inQuint=v;f.inSine=w;f.linear=b;f.outCirc=E;f.outCoastCubic=Z;f.outCoastQuad=L;f.outCoastQuart=ha;f.outCoastQuint=J;f.outCubic=m;f.outExpo=x;f.outQuad=k;f.outQuart=
n;f.outQuint=r;f.outSine=B;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Definition":function(){define(["exports","./Settings"],function(f,c){class h{constructor(b){this._createCamera=b;this.compared={sourceZoom:0,targetZoom:0,pan:0,rotate:0};this.settings={desiredScreenFlow:c.defaultSettings.desiredScreenFlow};this.source=b();this.target=b()}clone(){const b=new h(this._createCamera);b.copyFrom(this);return b}copyFrom(b){this.update(b.source,b.target,
b.settings)}update(b,u,k){this.source!==b&&this.source.copyFrom(b);this.target!==u&&this.target.copyFrom(u);this.compared=this.source.compareTo(this.target,this.compared);this.settings.desiredScreenFlow=null!=k.desiredScreenFlow?k.desiredScreenFlow:c.defaultSettings.desiredScreenFlow;this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size;this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(b){b=this.target.pixelsPerPanAtZoom(b);return this.halfWindowSize/b}get hasZoom(){return 1E-5<
Math.abs(this.compared.sourceZoom-this.compared.targetZoom)}get hasPan(){return 1E-9<this.compared.pan}get hasRotate(){return 1E-9<this.compared.rotate}}f.Definition=h;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Settings":function(){define(["exports","../../../core/time"],function(f,c){c={desiredScreenFlow:2,minDuration:c.Milliseconds(500),maxDuration:c.Milliseconds(8E3)};f.defaultSettings=c;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},
"esri/views/animation/pointToPoint/apex/Path":function(){define(["exports","../../easing","../Path","../Segment","./planning"],function(f,c,h,b,u){class k extends h.Path{constructor(p,l){super();this._preallocSegments=[new b.Segment,new b.Segment,new b.Segment];this._descensionSegment=this._ascensionSegment=null;this.update(p,l)}update(p,l){if(p){this.definition?this.definition.copyFrom(p):this.definition=p.clone();var m=null;l?.apex&&(m=u.optimalDistance(p,l.apex));this.segments.length=0;this._descensionSegment=
this._ascensionSegment=null;null==m?this._updateWithoutApex():this._updateWithApex(m,l?.apex)}}segmentInterpolateComponentsAt(p,l,m){m=p.interpolateComponentsAt(l,m);p===this._ascensionSegment?m.zoom=c.outQuad(m.zoom):p===this._descensionSegment&&(m.zoom=c.inQuad(m.zoom));return m}_updateWithApex(p,l){const [m,a,e]=this._preallocSegments,n=l?.ascensionFactor??.5;l=Math.min(1-n,null!=l?.ascensionFactor&&null!=l.descensionFactor?l.descensionFactor:.5);const t=1-n-l;m.definition?m.definition.copyFrom(this.definition):
m.definition=this.definition.clone();m.definition.compared.targetZoom=p;m.definition.compared.pan=this.definition.compared.pan*n;m.definition.compared.rotate=this.definition.compared.rotate*n;m.update();this._ascensionSegment=m;this.segments.push(m);0<t&&(a.definition?a.definition.copyFrom(this.definition):a.definition=this.definition.clone(),a.definition.copyFrom(this.definition),a.definition.compared.sourceZoom=p,a.definition.compared.targetZoom=p,a.definition.compared.pan=this.definition.compared.pan*
t,a.definition.compared.rotate=this.definition.compared.rotate*t,a.update(),this.segments.push(a));e.definition?e.definition.copyFrom(this.definition):e.definition=this.definition.clone();e.definition.compared.sourceZoom=p;e.definition.compared.pan=this.definition.compared.pan*l;e.definition.compared.rotate=this.definition.compared.rotate*l;e.update();this._descensionSegment=e;this.segments.push(e)}_updateWithoutApex(){const [p]=this._preallocSegments;p.update(this.definition);this.segments.push(p)}}
f.Path=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Path":function(){define(["exports","../../../core/time"],function(f,c){f.Path=class{constructor(){this.segments=[]}get time(){return this.segments.reduce((h,b)=>c.Seconds(h+b.time),c.Seconds(0))}interpolateComponentsAt(h,b){h=Math.min(Math.max(h,0),1);h*=this.time;let u=0,k=0;const p=this.definition,l=this.segments.reduce((m,a)=>m||a.definition.hasZoom,!1);for(let m=0;m<this.segments.length;m++){const a=
this.segments[m],e=a.definition;if(h<=a.time||m===this.segments.length-1){b=this.segmentInterpolateComponentsAt(a,0===a.time?0:h/a.time,b);p.hasPan&&!isNaN(b.pan)&&isFinite(p.compared.pan)?b.pan=(u+e.compared.pan*b.pan)/p.compared.pan:b.pan=1;p.hasRotate&&!isNaN(b.rotate)&&isFinite(p.compared.rotate)?b.rotate=(k+e.compared.rotate*b.rotate)/p.compared.rotate:b.rotate=1;if(l&&!isNaN(b.zoom)&&isFinite(e.compared.targetZoom)){const {sourceZoom:n,targetZoom:t}=e.compared;b.zoom=(b.zoom*(t-n)+n)/this.segments[this.segments.length-
1].definition.compared.targetZoom}else b.zoom=1;return b}h-=a.time;u+=e.compared.pan;k+=e.compared.rotate}}segmentInterpolateComponentsAt(h,b,u){return h.interpolateComponentsAt(b,u)}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Segment":function(){define(["exports","../../../core/time"],function(f,c){class h{get time(){return this._time}constructor(b){b&&this.update(b)}update(b){b&&(this.definition?this.definition.copyFrom(b):this.definition=
b.clone());this._updatePrecomputedVariables();this._updatePixelFlow()}_updatePrecomputedVariables(){var b=this.definition;const u=b.compared,k=u.sourceZoom,p=u.targetZoom;this._zoomSign=k>p?1:-1;this._panPixelsAtSource=u.pan*b.source.pixelsPerPanAtZoom(k);b=(b.source.pixelsPerRotateAtZoom(k)+b.target.pixelsPerRotateAtZoom(p))/2;this._rotatePixels=u.rotate*b}_updatePixelFlow(){var b=this.definition.compared.sourceZoom,u=this.definition.compared.targetZoom;const {hasZoom:k,hasPan:p,hasRotate:l}=this.definition;
var m=0,a=0;k&&(p&&(m=(u/b-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),l&&(a=Math.log(b/u)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/this._rotatePixels));this._rotatePixelFlow=this._panPixelFlow=this._zoomPixelFlow=0;b=this.definition.desiredPixelFlow;k&&p&&l?(u=m+a+m*a,this._zoomPixelFlow=m*a/u*b,this._panPixelFlow=a/u*b,this._rotatePixelFlow=m/u*b):k&&p?(a=1+m,this._zoomPixelFlow=m/a*b,this._panPixelFlow=1/a*b):k&&l?(m=1+a,this._zoomPixelFlow=
a/m*b,this._rotatePixelFlow=1/m*b):p&&l?(m=this._panPixelsAtSource/this._rotatePixels,a=1+m,this._panPixelFlow=m/a*b,this._rotatePixelFlow=1/a*b):p?this._panPixelFlow=b:k?this._zoomPixelFlow=b:l&&(this._rotatePixelFlow=b);this._time=l?this.rotateTime:k?this.zoomTime:p?this.panTime:c.Seconds(0)}get rotateTime(){return this.definition.hasRotate?c.Seconds(this._rotatePixels/this._rotatePixelFlow):c.Seconds(0)}get zoomTime(){return this.definition.hasZoom?c.Seconds(Math.log(this.definition.compared.sourceZoom/
this.definition.compared.targetZoom)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/this._zoomPixelFlow):c.Seconds(0)}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const b=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2;return c.Seconds(Math.log(this._zoomPixelFlow/this._panPixelFlow*this._panPixelsAtSource*b+1)/(b*this._zoomPixelFlow))}return c.Seconds(this._panPixelsAtSource/this._panPixelFlow)}return c.Seconds(0)}_interpolateComponentsZoom(b){if(0===b||
1===b)return b;if(this.definition.hasZoom){const u=this.definition.compared.sourceZoom,k=this.definition.compared.targetZoom;return(u*(u/k)**-b-u)/(k-u)}return b}_interpolateComponentsPan(b){if(0===b||1===b)return b;if(this.definition.hasPan&&this.definition.hasZoom){const u=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*this._panPixelFlow*(2**(u*b*this._time)-1)/(u*Math.LN2)}return b}_interpolateComponentsRotate(b){return b}interpolateComponentsAt(b,
u){b=Math.min(Math.max(b,0),1);const k=this._interpolateComponentsZoom(b),p=this._interpolateComponentsPan(b);b=this._interpolateComponentsRotate(b);u?(u.zoom=k,u.pan=p,u.rotate=b):u={zoom:k,pan:p,rotate:b};return u}}f.Segment=h;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/apex/planning":function(){define(["exports","./functions"],function(f,c){function h(b,u){const k=Math.max(b.compared.sourceZoom,b.compared.targetZoom);b=b.source.zoomAtPixelsPerPan(b.desiredPixelFlow/
b.compared.pan)/2;return b<k?null!=u.maximumDistance?k+(u.maximumDistance-k)/2:1.5*k:u.maximumDistance?Math.min(u.maximumDistance,b):b}f.optimalDistance=function(b,u){let k=h(b,u);const p={ascensionFactor:null!=u.ascensionFactor?u.ascensionFactor:.5,descensionFactor:null!=u.descensionFactor?u.descensionFactor:.5};var l=0===p.ascensionFactor,m=0===p.descensionFactor;const a=l?c.tAscensionZoomOnly:c.tAscensionZoomPan,e=l?c.dtAscensionZoomOnly:c.dtAscensionZoomPan,n=l?c.ddtAscensionZoomOnly:c.ddtAscensionZoomPan,
t=m?c.tDescensionZoomOnly:c.tDescensionZoomPan,v=m?c.dtDescensionZoomOnly:c.dtDescensionZoomPan,r=m?c.ddtDescensionZoomOnly:c.ddtDescensionZoomPan;l=z=>a(b,z,p)+c.tPanion(b,z,p)+t(b,z,p);m=z=>e(b,z,p)+c.dtPanion(b,z,p)+v(b,z,p);const g=z=>n(b,z,p)+c.ddtPanion(b,z,p)+r(b,z,p);let w=l(k);const B=c.tBaseLine(b);let A;const d=u.maximumIterations||20,x=null!=u.maximumDistance?u.maximumDistance:Infinity;for(A=0;A<d;A++){var q=u.desiredSlope??1E-6;let z=m(k);Math.abs(z)>q&&(z+=q);q=z/g(k);if(isNaN(q)||k>=
x&&0>q){if(!isFinite(x))return null;k=x;w=l(k);break}k-=q;if(k<b.compared.sourceZoom||k<b.compared.targetZoom)return null;q=l(k);if(.005>=Math.abs(q-w)/w)break;w=q}return w>.7*B||k<b.compared.sourceZoom||k<b.compared.targetZoom?null:k};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/apex/functions":function(){define(["exports"],function(f){f.ddtAscensionZoomOnly=function(c,h){return-c.halfWindowSize/(h*h*c.desiredPixelFlow*Math.LN2)};f.ddtAscensionZoomPan=
function(c,h,b){const u=h-c.compared.sourceZoom,k=1/u,p=1/h,l=Math.log(c.compared.sourceZoom*p);b=(b.ascensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(u))/c.halfWindowPanAtZoom(1);return c.halfWindowSize*k*(-2*k*p*b+2*k*l+2*p-2*l*b/(u*u)-b/(h*h))/(c.desiredPixelFlow*Math.LN2)};f.ddtDescensionZoomOnly=function(c,h){return-c.halfWindowSize/(h*h*c.desiredPixelFlow*Math.LN2)};f.ddtDescensionZoomPan=function(c,h,b){const u=h-c.compared.targetZoom,k=1/u,p=1/h,l=Math.log(h/c.compared.targetZoom);
b=(c.halfWindowPanAtZoom(h)+b.descensionFactor*Math.LN2*c.compared.pan-c.halfWindowPanAtZoom(c.compared.targetZoom))/c.halfWindowPanAtZoom(1);return c.halfWindowSize*k*(-2*k*p*b-2*k*l+2*p+2*l*b/(u*u)-b/(h*h))/(c.desiredPixelFlow*Math.LN2)};f.ddtPanion=function(c,h,b){return-2*c.compared.pan*c.halfWindowSize*(b.ascensionFactor+b.descensionFactor-1)/(c.desiredPixelFlow*c.halfWindowPanAtZoom(h*h*h))};f.dtAscensionZoomOnly=function(c,h){return c.halfWindowSize/(h*c.desiredPixelFlow*Math.LN2)};f.dtAscensionZoomPan=
function(c,h,b){const u=1/h,k=Math.log(c.compared.sourceZoom*u),p=1/c.desiredPixelFlow,l=1/Math.LN2;h-=c.compared.sourceZoom;const m=1/h;b=(b.ascensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(h))/c.halfWindowPanAtZoom(1);return c.halfWindowSize*u*p*l*m*b-c.halfWindowSize*k*p*l*m+c.halfWindowSize*k*p*l*b/(h*h)};f.dtDescensionZoomOnly=function(c,h){return c.halfWindowSize/(h*c.desiredPixelFlow*Math.LN2)};f.dtDescensionZoomPan=function(c,h,b){const u=Math.log(h/c.compared.targetZoom),k=1/
c.desiredPixelFlow,p=1/Math.LN2,l=-h+c.compared.targetZoom,m=1/l;b=(-c.halfWindowPanAtZoom(h)-b.descensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(c.compared.targetZoom))/c.halfWindowPanAtZoom(1);return-c.halfWindowSize*u*k*p*m+c.halfWindowSize*u*k*p*b/(l*l)+c.halfWindowSize*k*p*m*b/h};f.dtPanion=function(c,h,b){return c.compared.pan*c.halfWindowSize*(b.ascensionFactor+b.descensionFactor-1)/(c.desiredPixelFlow*c.halfWindowPanAtZoom(h*h))};f.tAscensionZoomOnly=function(c,h){return-c.halfWindowSize*
Math.log(c.compared.sourceZoom/h)/(c.desiredPixelFlow*Math.LN2)};f.tAscensionZoomPan=function(c,h,b){const u=c.halfWindowPanAtZoom(h-c.compared.sourceZoom);return-c.halfWindowSize*(b.ascensionFactor*Math.LN2*c.compared.pan+u)*Math.log(c.compared.sourceZoom/h)/(c.desiredPixelFlow*Math.LN2*u)};f.tBaseLine=function(c){var h=c.compared.sourceZoom-c.compared.targetZoom;if(0===h)return c.compared.pan*c.halfWindowSize/(c.desiredPixelFlow*c.halfWindowPanAtZoom(c.compared.sourceZoom));const b=Math.LN2*c.compared.pan;
h=c.halfWindowPanAtZoom(h);const u=c.halfWindowSize*Math.log(c.compared.sourceZoom/c.compared.targetZoom)/(c.desiredPixelFlow*Math.LN2*h);return c.compared.sourceZoom<=c.compared.targetZoom?u*(b-h):u*(b+h)};f.tDescensionZoomOnly=function(c,h){return c.halfWindowSize*Math.log(h/c.compared.targetZoom)/(c.desiredPixelFlow*Math.LN2)};f.tDescensionZoomPan=function(c,h,b){return c.halfWindowSize*(-c.halfWindowPanAtZoom(h)-b.descensionFactor*Math.LN2*c.compared.pan+c.halfWindowPanAtZoom(c.compared.targetZoom))*
Math.log(h/c.compared.targetZoom)/(c.desiredPixelFlow*Math.LN2*c.halfWindowPanAtZoom(-h+c.compared.targetZoom))};f.tPanion=function(c,h,b){return-c.compared.pan*c.halfWindowSize*(b.ascensionFactor+b.descensionFactor-1)/(c.desiredPixelFlow*c.halfWindowPanAtZoom(h))};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/FrameTask":function(){define(["../../core/reactiveUtils","../../core/scheduling"],function(f,c){class h{constructor(b){this.view=b;this._updateParameters=this._frameTaskHandle=
this._stationaryHandle=null;this._updateRequested=!1;this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)};this.update=()=>{this._updateRequested=!1;if(!this.view?.destroyed){var {allLayerViews:u,graphicsView:k,labelManager:p,state:{id:l}}=
this.view;u.forEach(this._updateLayerView,this);null!=p&&(p.lastUpdateId!==l&&(p.viewChange(),p.lastUpdateId=l),p.updateRequested&&p.processUpdate(this._updateParameters));null!=k&&(k.lastUpdateId!==l&&(k.viewChange(),k.lastUpdateId=l),k.updateRequested&&k.processUpdate(this._updateParameters));this.view.graphicsTileStore.setViewState(this._updateParameters.state);this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}}destroy(){this.stop()}start(){if(!this._frameTaskHandle){var b=
this.view;this.stationary=b.stationary;this._updateParameters={state:b.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:b.renderingOptions};this._stationaryHandle=f.watch(()=>b.stationary,u=>{this.stationary=u;this.requestFrame()});this._frameTaskHandle=c.addFrameTask(this);this.requestUpdate()}}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=
null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(b){if(b.attached){var u=this.view.state,k=b.lastUpdateId;if(null==k||!this.stationary&&!b.moving)b.moving=!0,b.moveStart();k!==u.id&&b.viewChange();this.stationary&&b.moving&&(b.moving=!1,b.moveEnd());b.lastUpdateId=u.id;b.updateRequested&&b.processUpdate(this._updateParameters);
"layerViews"in b&&b.layerViews?.forEach(this._updateLayerView,this)}else this.requestUpdate()}}return h})},"esri/views/2d/GoToManager":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./viewpointUtils".split(" "),function(f,c,h,b,u,k,p,l,m,a,e,n,t){f.GoToManager=
class extends h{constructor(v){super(v);this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(v,r){if(v){var g=new n;this.view.animation=g;await p.whenOnce(()=>this.view.ready,r);var w={animate:!0,...r},{extent:B,spatialReference:A,size:d,viewpoint:x,constraints:q,padding:z,allLayerViews:E}=this.view;v=t.create(v,{extent:B,spatialReference:A,size:d,viewpoint:x,constraints:q,padding:z,allLayerViews:E,pickClosestTarget:r?.pickClosestTarget??!0});g?.update(v);this._gotoTask={};return w.animate?
this._gotoAnimated(v,w):this._gotoImmediate(v,w)}u.getLogger(this).error("#goTo()","target cannot be null or undefined")}_gotoImmediate(v,r){const g=this._gotoTask,w=this.view.animation;v=v.then(B=>{k.throwIfAborted(r);if(g!==this._gotoTask)throw new b("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=w.target=B;w.finish()});return this._cancellableGoTo(g,w,v,r)}_gotoAnimated(v,r){const g=this._gotoTask,w=this.view.animation;if(!w)return Promise.resolve();v=v.then(B=>{k.throwIfAborted(r);
if(g!==this._gotoTask)throw new b("view:goto-interrupted","Goto was interrupted");w.update(B);this.view.animationManager.animate(w,this.view.viewpoint,r);return w.when().then(()=>{},()=>{})});return this._cancellableGoTo(g,w,v,r)}_cancellableGoTo(v,r,g,w){const B=()=>v===this._gotoTask;return k.whenOrAbort(g,w).finally(()=>{B()&&(r.done||r.stop())})}};c.__decorate([l.property({constructOnly:!0})],f.GoToManager.prototype,"view",void 0);f.GoToManager=c.__decorate([e.subclass("esri.views.2d.GoToManager")],
f.GoToManager);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error"],function(f,c,h){function b(){return Promise.all([new Promise((m,a)=>f(["./webglDeps"],m,a)),new Promise((m,a)=>f(["./mapViewDeps"],m,a))])}const u=m=>Object.freeze(Object.defineProperty({__proto__:null,default:m},Symbol.toStringTag,{value:"Module"})),k=()=>b().then(()=>new Promise((m,a)=>f(["./layers/TileLayerView2D"],
e=>m(u(e)),a))),p=()=>b().then(()=>new Promise((m,a)=>f(["./layers/FeatureLayerView2D"],e=>m(u(e)),a))),l={"base-dynamic":()=>b().then(()=>new Promise((m,a)=>f(["./layers/BaseDynamicLayerView2D"],e=>m(u(e)),a))),"base-tile":k,"bing-maps":k,catalog:()=>b().then(()=>new Promise((m,a)=>f(["./layers/CatalogLayerView2D"],e=>m(u(e)),a))),"catalog-dynamic-group":()=>b().then(()=>new Promise((m,a)=>f(["./layers/CatalogDynamicGroupLayerView2D"],e=>m(u(e)),a))),"catalog-footprint":()=>b().then(()=>new Promise((m,
a)=>f(["./layers/CatalogFootprintLayerView2D"],e=>m(u(e)),a))),csv:p,"geo-rss":()=>b().then(()=>new Promise((m,a)=>f(["./layers/GeoRSSLayerView2D"],e=>m(u(e)),a))),feature:p,geojson:p,graphics:()=>b().then(()=>new Promise((m,a)=>f(["./layers/GraphicsLayerView2D"],e=>m(u(e)),a))),group:()=>b().then(()=>new Promise((m,a)=>f(["./layers/GroupLayerView2D"],e=>m(u(e)),a))),imagery:()=>b().then(()=>new Promise((m,a)=>f(["./layers/ImageryLayerView2D"],e=>m(u(e)),a))),"imagery-tile":()=>b().then(()=>new Promise((m,
a)=>f(["./layers/ImageryTileLayerView2D"],e=>m(u(e)),a))),kml:()=>b().then(()=>new Promise((m,a)=>f(["./layers/KMLLayerView2D"],e=>m(u(e)),a))),"knowledge-graph":()=>b().then(()=>new Promise((m,a)=>f(["./layers/KnowledgeGraphLayerView2D"],e=>m(u(e)),a))),"link-chart":()=>b().then(()=>new Promise((m,a)=>f(["./layers/KnowledgeGraphLayerView2D"],e=>m(u(e)),a))),"knowledge-graph-sublayer":p,"map-image":()=>b().then(()=>new Promise((m,a)=>f(["./layers/MapImageLayerView2D"],e=>m(u(e)),a))),"map-notes":()=>
b().then(()=>new Promise((m,a)=>f(["./layers/MapNotesLayerView2D"],e=>m(u(e)),a))),media:()=>b().then(()=>new Promise((m,a)=>f(["./layers/MediaLayerView2D"],e=>m(u(e)),a))),"ogc-feature":()=>b().then(()=>new Promise((m,a)=>f(["./layers/OGCFeatureLayerView2D"],e=>m(u(e)),a))),"open-street-map":k,"oriented-imagery":p,route:()=>b().then(()=>new Promise((m,a)=>f(["./layers/RouteLayerView2D"],e=>m(u(e)),a))),stream:()=>b().then(()=>new Promise((m,a)=>f(["./layers/StreamLayerView2D"],e=>m(u(e)),a))),"subtype-group":()=>
b().then(()=>new Promise((m,a)=>f(["./layers/SubtypeGroupLayerView2D"],e=>m(u(e)),a))),tile:k,"vector-tile":()=>b().then(()=>new Promise((m,a)=>f(["./layers/VectorTileLayerView2D"],e=>m(u(e)),a))),video:()=>b().then(()=>new Promise((m,a)=>f(["./layers/VideoLayerView2D"],e=>m(u(e)),a))),wcs:()=>b().then(()=>new Promise((m,a)=>f(["./layers/ImageryTileLayerView2D"],e=>m(u(e)),a))),"web-tile":k,wfs:p,wms:()=>b().then(()=>new Promise((m,a)=>f(["./layers/WMSLayerView2D"],e=>m(u(e)),a))),wmts:()=>b().then(()=>
new Promise((m,a)=>f(["./layers/WMTSLayerView2D"],e=>m(u(e)),a))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null,"integrated-mesh-3dtiles":null};c.layerView2DImporter={hasLayerViewModule:m=>null!=l[m.type],importLayerView:m=>{var a=l[m.type];if(null==a)throw m=m.declaredClass?m.declaredClass.slice(m.declaredClass.lastIndexOf(".")+1):"Unknown",a=m.replaceAll(/([a-z])([A-Z])/g,
"$1-$2").toLowerCase(),new h(`${a}:view-not-supported`,`${m} is not supported in 2D`);return a(m)}};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint ../../geometry/Extent ../../geometry/Polygon".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r){c={base:null,key:"type",typeMap:{extent:v,polygon:r}};h=class extends h{constructor(g){super(g);this.lods=null;this.maxScale=this.minScale=0;this.maxZoom=this.minZoom=-1;this.snapToZoom=this.rotationEnabled=!0;this.customConstraints=new b}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(g){g?
this._set("geometry",g):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const g=this._get("_geometry");return g&&this.geometry===g.geometry&&this.view?.constraintsInfo.spatialReference===g.spatialReference?g:new e.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new n({rotationEnabled:this.rotationEnabled})}get _zoom(){const g=this._get("_zoom"),
w=this.lods||this.view?.constraintsInfo.lods,B=this.minZoom,A=this.maxZoom,d=this.minScale,x=this.maxScale,q=this.snapToZoom;return g&&g.lods===w&&g.minZoom===B&&g.maxZoom===A&&g.minScale===d&&g.maxScale===x&&g.snapToZoom===q?g:new t({lods:w,minZoom:B,maxZoom:A,minScale:d,maxScale:x,snapToZoom:q})}canZoomInTo(g){const w=this.effectiveMaxScale;return 0===w||g>=w}canZoomOutTo(g){const w=this.effectiveMinScale;return 0===w||g<=w}constrain(g,w){this._zoom.constrain(g,w);this._rotation.constrain(g,w);
this._geometry.constrain(g,w);this.customConstraints.forEach(B=>B.constrain(g,w));return g}constrainByGeometry(g){this._geometry.constrain(g);this.customConstraints.forEach(w=>w.applyPanConstraint?.(g));return g}fit(g){return this._zoom.fit(g)}zoomToScale(g){return this._zoom.zoomToScale(g)}scaleToZoom(g){return this._zoom.scaleToZoom(g)}snapScale(g){return this._zoom.snapToClosestScale(g)}snapToNextScale(g){return this._zoom.snapToNextScale(g)}snapToPreviousScale(g){return this._zoom.snapToPreviousScale(g)}};
f.__decorate([u.property({readOnly:!0})],h.prototype,"effectiveLODs",null);f.__decorate([u.property({readOnly:!0})],h.prototype,"effectiveMinScale",null);f.__decorate([u.property({readOnly:!0})],h.prototype,"effectiveMaxScale",null);f.__decorate([u.property({readOnly:!0})],h.prototype,"effectiveMinZoom",null);f.__decorate([u.property({readOnly:!0})],h.prototype,"effectiveMaxZoom",null);f.__decorate([u.property({types:c,value:null})],h.prototype,"geometry",null);f.__decorate([u.property({type:[a]})],
h.prototype,"lods",void 0);f.__decorate([u.property()],h.prototype,"minScale",void 0);f.__decorate([u.property()],h.prototype,"maxScale",void 0);f.__decorate([u.property()],h.prototype,"minZoom",void 0);f.__decorate([u.property()],h.prototype,"maxZoom",void 0);f.__decorate([u.property()],h.prototype,"rotationEnabled",void 0);f.__decorate([u.property()],h.prototype,"snapToZoom",void 0);f.__decorate([u.property({type:b})],h.prototype,"customConstraints",void 0);f.__decorate([u.property()],h.prototype,
"view",void 0);f.__decorate([u.property({readOnly:!0})],h.prototype,"version",null);f.__decorate([u.property({type:e.GeometryConstraint,readOnly:!0})],h.prototype,"_geometry",null);f.__decorate([u.property({type:n})],h.prototype,"_rotation",null);f.__decorate([u.property({readOnly:!0,type:t})],h.prototype,"_zoom",null);return h=f.__decorate([m.subclass("esri.views.2d.MapViewConstraints")],h)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n){var t;f.GeometryConstraint=t=class extends b.NumericIdentifiableMixin(h){constructor(v){super(v);this.spatialReference=this.geometry=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return a.project(this.geometry,this.spatialReference)}catch(v){return u.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:v}),null}return this.geometry}constrain(v,r){if(null==this.normalizedGeometry)return v;r=v.targetGeometry;if("extent"===this.normalizedGeometry.type?e.extentContainsPoint(this.normalizedGeometry,r):e.polygonContainsPoint(this.normalizedGeometry,r))return v;({coordinate:r}=n.nearestCoordinate(this.normalizedGeometry,r));if(!r)return v;v.targetGeometry=r;return v}clone(){return new t({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};
c.__decorate([k.property({constructOnly:!0})],f.GeometryConstraint.prototype,"geometry",void 0);c.__decorate([k.property({readOnly:!0})],f.GeometryConstraint.prototype,"normalizedGeometry",null);c.__decorate([k.property({constructOnly:!0})],f.GeometryConstraint.prototype,"spatialReference",void 0);f.GeometryConstraint=t=c.__decorate([m.subclass("esri.views.2d.constraints.GeometryConstraint")],f.GeometryConstraint);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports",
"../../geometry","../../core/libs/gl-matrix-2/math/vec2","./coordsUtils","../Point"],function(f,c,h,b,u){f.nearestCoordinate=function(k,p){const {spatialReference:l}=p;p=[p.x,p.y];let m=Number.POSITIVE_INFINITY,a=0,e=0;const n=[0,0];k="extent"===k.type?[[[k.xmin,k.ymin],[k.xmin,k.ymax],[k.xmax,k.ymax],[k.xmax,k.ymin],[k.xmin,k.ymin]]]:k.rings;for(const t of k)for(k=0;k<t.length-1;k++){b.projectPointOnLine(n,p,t,k);const v=h.distance(p,n);v<m&&(m=v,a=n[0],e=n[1])}return{coordinate:new u({x:a,y:e,spatialReference:l}),
distance:m}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,h,b,u,k,p,l){var m;c=m=class extends h.NumericIdentifiableMixin(c){constructor(){super(...arguments);
this.rotationEnabled=this.enabled=!0}constrain(a,e){if(!this.enabled||!e)return a;this.rotationEnabled||(a.rotation=e.rotation);return a}clone(){return new m({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};f.__decorate([b.property()],c.prototype,"enabled",void 0);f.__decorate([b.property()],c.prototype,"rotationEnabled",void 0);return c=m=f.__decorate([l.subclass("esri.views.2d.constraints.RotationConstraint")],c)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,h,b,u,k,p,l){var m;c=m=class extends h.NumericIdentifiableMixin(c){constructor(a){super(a);this._lodByScale={};this._scales=[];this.effectiveLODs=null;this.effectiveMaxZoom=this.effectiveMinZoom=-1;this.effectiveMaxScale=this.effectiveMinScale=0;this.lods=null;this.maxZoom=this.minZoom=-1;this.maxScale=this.minScale=0;this.snapToZoom=!0}initialize(){let {lods:a,minScale:e,maxScale:n,minZoom:t,maxZoom:v}=this,r=-1,g=-1,w=!1,B=!1;0!==e&&0!==n&&e<n&&([e,n]=[n,e]);if(a?.length){a=a.map(d=>
d.clone());a.sort((d,x)=>x.scale-d.scale);a.forEach((d,x)=>d.level=x);for(const d of a){!w&&0<e&&e>=d.scale&&(r=d.level,w=!0);!B&&0<n&&n>=d.scale&&(g=A?A.level:-1,B=!0);var A=d}-1===t&&(t=0===e?0:r);-1===v&&(v=0===n?a.length-1:g);t=Math.max(t,0);t=Math.min(t,a.length-1);v=Math.max(v,0);v=Math.min(v,a.length-1);t>v&&([t,v]=[v,t]);e=a[t].scale;n=a[v].scale;a.splice(0,t);a.splice(v-t+1,a.length);a.forEach((d,x)=>{this._lodByScale[d.scale]=d;this._scales[x]=d.scale});this._set("effectiveLODs",a);this._set("effectiveMinZoom",
t);this._set("effectiveMaxZoom",v)}this._set("effectiveMinScale",e);this._set("effectiveMaxScale",n)}constrain(a,e){if(e&&a.scale===e.scale)return a;var n=this.effectiveMinScale;const t=this.effectiveMaxScale,v=a.targetGeometry,r=e&&e.targetGeometry,g=0!==n&&a.scale>n;if(0!==t&&a.scale<t||g)n=g?n:t,e&&r&&(e=(n-e.scale)/(a.scale-e.scale),v.x=r.x+(v.x-r.x)*e,v.y=r.y+(v.y-r.y)*e),a.scale=n;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a}fit(a){if(!this.effectiveLODs||
!this.snapToZoom)return this.constrain(a,null);const e=this.scaleToZoom(a.scale);a.scale=this.zoomToScale(.99<Math.abs(e-Math.floor(e))?Math.round(e):Math.floor(e));return a}zoomToScale(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);const e=this._scales;if(0>=a)return e[0];if(a>=e.length)return e[e.length-1];const n=Math.round(a);return e[n]+(n-a)*(e[Math.round(a-.5)]-e[n])}scaleToZoom(a){if(!this.effectiveLODs)return-1;const e=this._scales;let n,t;if(a>=e[0])return this.effectiveMinZoom;
if(a<=e[e.length-1])return this.effectiveMaxZoom;for(let v=0;v<e.length-1;v++){n=e[v];t=e[v+1];if(t===a)return v+this.effectiveMinZoom+1;if(n>a&&t<a)return v+this.effectiveMinZoom+1-(a-t)/(n-t)}return-1}snapToClosestScale(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))}snapToNextScale(a,e=.5){if(!this.effectiveLODs)return a*e;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)}snapToPreviousScale(a,e=2){if(!this.effectiveLODs)return a*e;a=
Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)}clone(){return new m({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce((e,n)=>Math.abs(n-a)<=Math.abs(e-a)?n:e,this._scales[0]);return this._lodByScale[a].scale}};f.__decorate([b.property({readOnly:!0})],c.prototype,"effectiveLODs",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,
"effectiveMinZoom",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,"effectiveMaxZoom",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,"effectiveMinScale",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,"effectiveMaxScale",void 0);f.__decorate([b.property()],c.prototype,"lods",void 0);f.__decorate([b.property()],c.prototype,"minZoom",void 0);f.__decorate([b.property()],c.prototype,"maxZoom",void 0);f.__decorate([b.property()],c.prototype,"minScale",void 0);f.__decorate([b.property()],
c.prototype,"maxScale",void 0);f.__decorate([b.property()],c.prototype,"snapToZoom",void 0);return c=m=f.__decorate([l.subclass("esri.views.2d.constraints.ZoomConstraint")],c)})},"esri/views/2d/tiling/TileInfoView":function(){define(["../../../geometry/support/spatialReferenceUtils","./LODInfo","./TileCoverage","./TileKey","./TileSpan"],function(f,c,h,b,u){const k=new b("0/0/0/0");class p{static create(a,e){a[1]>e[1]&&([a,e]=[e,a]);const [n,t]=a,[v,r]=e;a=v-n;e=r-t;e=0!==e?a/e:0;const g=(Math.ceil(t)-
t)*e,w=(Math.floor(t)-t)*e;return new p(n,Math.floor(t),Math.ceil(r),e,0>a?g:w,0>a?w:g,0>a?v:n,0>a?n:v)}constructor(a,e,n,t,v,r,g,w){this.x=a;this.ymin=e;this.ymax=n;this.invM=t;this.leftAdjust=v;this.rightAdjust=r;this.leftBound=g;this.rightBound=w}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const l=[[0,0],[0,0],[0,0],[0,0]];class m{constructor(a,e=null,n=a.lods[0].level,t=
a.lods[a.lods.length-1].level){this.tileInfo=a;this.fullExtent=e;this.scales=[];this._infoByScale={};this._infoByLevel={};const v=a.lods.filter(g=>g.level>=n&&g.level<=t);this.minScale=v[0].scale;this.maxScale=v[v.length-1].scale;const r=this._lodInfos=v.map(g=>c.create(a,g,e));v.forEach((g,w)=>{this._infoByLevel[g.level]=r[w];this._infoByScale[g.scale]=r[w];this.scales[w]=g.scale},this);this._wrap=a.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(a){return this._infoByLevel["number"===
typeof a?a:a.level]}getTileBounds(a,e,n=!1){k.set(e);return(e=this._infoByLevel[k.level])?e.getTileBounds(a,k,n):a}getTileCoords(a,e,n=!1){k.set(e);return(e=this._infoByLevel[k.level])?e.getTileCoords(a,k,n):a}getTileCoverage(a,e=192,n=!0,t="closest"){if(!n&&(a.scale>this.minScale||a.scale<this.maxScale))return null;n="closest"===t?this.getClosestInfoForScale(a.scale):this.getSmallestInfoForScale(a.scale);t=h.pool.acquire(n);const v=this._wrap;var r=Infinity;let g=-Infinity;const w=t.spans;l[0][0]=
l[0][1]=l[1][1]=l[3][0]=-e;l[1][0]=l[2][0]=a.size[0]+e;l[2][1]=l[3][1]=a.size[1]+e;for(B of l)a.toMap(B,B),B[0]=n.getColumnForX(B[0]),B[1]=n.getRowForY(B[1]);a=[];var B=3;for(e=0;4>e;e++)l[e][1]===l[B][1]?B=e:(B=p.create(l[e],l[B]),r=Math.min(B.ymin,r),g=Math.max(B.ymax,g),void 0===a[B.ymin]&&(a[B.ymin]=[]),a[B.ymin].push(B),B=e);if(null==r||null==g||100<g-r)return null;for(e=[];r<g;){null!=a[r]&&(e=e.concat(a[r]));B=Infinity;var A=-Infinity;for(var d=e.length-1;0<=d;d--){var x=e[d];B=Math.min(B,
x.getLeftCol());A=Math.max(A,x.getRightCol())}B=Math.floor(B);A=Math.floor(A);if(r>=n.first[1]&&r<=n.last[1])if(v)if(n.size[0]<n.worldSize[0])for(d=Math.floor(A/n.worldSize[0]),x=Math.floor(B/n.worldSize[0]);x<=d;x++)w.push(new u(r,Math.max(n.getFirstColumnForWorld(x),B),Math.min(n.getLastColumnForWorld(x),A)));else w.push(new u(r,B,A));else B>n.last[0]||A<n.first[0]||(B=Math.max(B,n.first[0]),A=Math.min(A,n.last[0]),w.push(new u(r,B,A)));r+=1;for(B=e.length-1;0<=B;B--)A=e[B],A.ymax>=r?A.incrRow():
e.splice(B,1)}return t}getTileParentId(a){k.set(a);a=this._lodInfos.indexOf(this._infoByLevel[k.level])-1;if(0>a)return null;this._getTileIdAtLOD(k,this._lodInfos[a],k);return k.id}getTileResolution(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1}getTileScale(a){return(a=this._infoByLevel[a.level])?a.scale:-1}intersects(a,e){k.set(e);e=this._infoByLevel[k.level];const n=a.lodInfo;if(n.resolution>e.resolution){this._getTileIdAtLOD(k,n,k);var t=n.denormalizeCol(k.col,k.world);
for(var v of a.spans)if(v.row===k.row&&v.colFrom<=t&&v.colTo>=t)return!0}if(n.resolution<e.resolution){const [g,w,B,A]=a.spans.reduce((d,x)=>{d[0]=Math.min(d[0],x.row);d[1]=Math.max(d[1],x.row);d[2]=Math.min(d[2],x.colFrom);d[3]=Math.max(d[3],x.colTo);return d},[Infinity,-Infinity,Infinity,-Infinity]);t=e.denormalizeCol(k.col,k.world);a=n.getColumnForX(e.getXForColumn(t));v=n.getRowForY(e.getYForRow(k.row));t=n.getColumnForX(e.getXForColumn(t+1))-1;e=n.getRowForY(e.getYForRow(k.row+1))-1;return!(a>
A||t<B||v>w||e<g)}const r=n.denormalizeCol(k.col,k.world);return a.spans.some(g=>g.row===k.row&&g.colFrom<=r&&g.colTo>=r)}normalizeBounds(a,e,n){a[0]=e[0];a[1]=e[1];a[2]=e[2];a[3]=e[3];this._wrap&&(e=f.getInfo(this.tileInfo.spatialReference),n=-n*(e.valid[1]-e.valid[0]),a[0]+=n,a[2]+=n);return a}getSmallestInfoForScale(a){const e=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>e[0])return this._infoByScale[e[0]];for(let n=1;n<e.length-1;n++)if(a>e[n]+1E-6)return this._infoByScale[e[n-
1]];return this._infoByScale[e[e.length-1]]}getClosestInfoForScale(a){const e=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=e.reduce((n,t)=>Math.abs(t-a)<Math.abs(n-a)?t:n,e[0]);return this._infoByScale[a]}scaleToLevel(a){const e=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(let n=e.length-1;0<=n;n--)if(a<e[n])return n===e.length-1?this._infoByScale[e[e.length-1]].level:this._infoByScale[e[n]].level+(e[n]-a)/(e[n]-e[n+1]);return this._infoByScale[e[0]].level}scaleToZoom(a){return this.tileInfo.scaleToZoom(a)}_getTileIdAtLOD(a,
e,n){const t=this._infoByLevel[n.level];a.set(n);if(e.resolution<t.resolution)return null;if(e.resolution===t.resolution)return a;a.level=e.level;a.col=Math.floor(n.col*t.resolution/e.resolution+.01);a.row=Math.floor(n.row*t.resolution/e.resolution+.01);return a}}return m})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(f,c){function h(k,p,l){k[0]=p;k[1]=l;return k}const b=new c("0/0/0/0");class u{static create(k,p,l=null){var m=
f.getInfo(k.spatialReference);const a=p.origin||[k.origin.x,k.origin.y],e=[k.size[0]*p.resolution,k.size[1]*p.resolution],n=[-Infinity,-Infinity],t=[Infinity,Infinity],v=[Infinity,Infinity];null!=l&&(h(n,Math.max(0,Math.floor((l.xmin-a[0])/e[0])),Math.max(0,Math.floor((a[1]-l.ymax)/e[1]))),h(t,Math.max(0,Math.floor((l.xmax-a[0])/e[0])),Math.max(0,Math.floor((a[1]-l.ymin)/e[1]))),h(v,t[0]-n[0]+1,t[1]-n[1]+1));const {cols:r,rows:g}=p;!l&&r&&g&&(h(n,r[0],g[0]),h(t,r[1],g[1]),h(v,r[1]-r[0]+1,g[1]-g[0]+
1));let w;k.isWrappable?(k=[Math.ceil(Math.round((m.valid[1]-m.valid[0])/p.resolution)/k.size[0]),v[1]],m=[Math.floor((m.origin[0]-a[0])/e[0]),n[1]],l=[k[0]+m[0]-1,t[1]],w=!0):(m=n,l=t,k=v,w=!1);return new u(p.level,p.resolution,p.scale,a,n,t,v,e,m,l,k,w)}constructor(k,p,l,m,a,e,n,t,v,r,g,w){this.level=k;this.resolution=p;this.scale=l;this.origin=m;this.first=a;this.last=e;this.size=n;this.norm=t;this.worldStart=v;this.worldEnd=r;this.worldSize=g;this.wrap=w}normalizeCol(k){if(!this.wrap)return k;
const p=this.worldSize[0];return 0>k?p-1-Math.abs((k+1)%p):k%p}denormalizeCol(k,p){return this.wrap?this.worldSize[0]*p+k:k}getWorldForColumn(k){return this.wrap?Math.floor(k/this.worldSize[0]):0}getFirstColumnForWorld(k){return k*this.worldSize[0]+this.first[0]}getLastColumnForWorld(k){return k*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(k){return(k-this.origin[0])/this.norm[0]}getXForColumn(k){return this.origin[0]+k*this.norm[0]}getRowForY(k){return(this.origin[1]-k)/this.norm[1]}getYForRow(k){return this.origin[1]-
k*this.norm[1]}getTileBounds(k,p,l=!1){b.set(p);var m=l?b.col:this.denormalizeCol(b.col,b.world),a=b.row;p=this.getXForColumn(m);l=this.getYForRow(a+1);m=this.getXForColumn(m+1);a=this.getYForRow(a);k[0]=p;k[1]=l;k[2]=m;k[3]=a;return k}getTileCoords(k,p,l=!1){b.set(p);p=l?b.col:this.denormalizeCol(b.col,b.world);Array.isArray(k)?h(k,this.getXForColumn(p),this.getYForRow(b.row)):(k.x=this.getXForColumn(p),k.y=this.getYForRow(b.row));return k}}return u})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],
function(f){class c{static getId(h,b,u,k){return"object"===typeof h?`${h.level}/${h.row}/${h.col}/${h.world}`:`${h}/${b}/${u}/${k}`}constructor(h,b,u,k){this.set(h,b,u,k)}get key(){return this}get id(){return this.toString()}set id(h){this.set(h)}get hash(){return(this.world&3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}acquire(h,b,u,k){this.set(h,b,u,k)}contains(h){const b=h.level-this.level;return 0<=b&&this.row===h.row>>b&&this.col===h.col>>b&&this.world===h.world}containsChild(h){const b=
h.level-this.level;return 0<b&&this.row===h.row>>b&&this.col===h.col>>b&&this.world===h.world}equals(h){return this.level===h.level&&this.row===h.row&&this.col===h.col&&this.world===h.world}clone(){return new c(this)}release(){this.world=this.col=this.row=this.level=0}set(h,b,u,k){if(null==h)this.world=this.col=this.row=this.level=0;else if("object"===typeof h)this.level=h.level||0,this.row=h.row||0,this.col=h.col||0,this.world=h.world||0;else if("string"===typeof h){const [p,l,m,a]=h.split("/");
this.level=parseFloat(p);this.row=parseFloat(l);this.col=parseFloat(m);this.world=parseFloat(a)}else this.level=+h,this.row=+b,this.col=+u,this.world=+k||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?null:new c(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(h,b){return`${this.level}/${this.row+b}/${this.col+h}/${this.world}`}getChildKeys(){const h=this.level+1,b=this.row<<1,u=this.col<<1,k=this.world;return[new c(h,
b,u,k),new c(h,b,u+1,k),new c(h,b+1,u,k),new c(h,b+1,u+1,k)]}compareRowMajor(h){return this.row<h.row?-1:this.row>h.row?1:this.col<h.col?-1:this.col>h.col?1:0}}c.pool=new f(c,null,null,25,50);return c})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool","./TileKey"],function(f,c){class h{constructor(){this.spans=[]}acquire(b){this.lodInfo=b}release(){this.lodInfo=null;this.spans.length=0}*keys(){const b=this.lodInfo;for(const {row:u,colFrom:k,colTo:p}of this.spans)for(let l=
k;l<=p;l++){const m=b.getWorldForColumn(l);yield new c(b.level,u,b.normalizeCol(l),m)}}forEach(b,u){const {spans:k,lodInfo:p}=this,{level:l}=p;if(0!==k.length)for(const {row:m,colFrom:a,colTo:e}of k)for(let n=a;n<=e;n++)b.call(u,l,m,p.normalizeCol(n),p.getWorldForColumn(n))}}h.pool=new f(h);return h})},"esri/views/2d/tiling/TileSpan":function(){define(function(){class f{constructor(c,h,b){this.row=c;this.colFrom=h;this.colTo=b}}return f})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/math/vec2 ../../support/QueueProcessor".split(" "),
function(f,c,h,b,u,k,p,l,m,a){function e(g,w){g.length=0;w.forEach(B=>g.push(B));return g}const n=new Set,t=[],v=new Map,r=[0,0];c=class extends c{constructor(g){super(g);this._keyToItem=new Map;this.concurrency=6;this.strategy="scale-first";this.tileInfoView=null}initialize(){const {concurrency:g,process:w,strategy:B}=this;this._queue=new a.QueueProcessor({concurrency:g,process:(A,d)=>{A=this._keyToItem.get(A);return w(A,{signal:d})},peeker:"scale-first"===B?A=>this._peekByScaleFirst(A):A=>this._peekByCenterFirst(A)})}destroy(){this.clear();
this._queue=h.destroyMaybe(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(g){this._queue.abort("string"===typeof g?g:g.id)}clear(){this._queue.clear();this._keyToItem.clear()}has(g){return"string"===typeof g?this._keyToItem.has(g):this._keyToItem.has(g.id)}isOngoing(g){g="string"===typeof g?g:g.id;return this.has(g)&&this._queue.isOngoing(g)}pause(){this._queue.pause()}push(g){const w=g.key.id;if(this._queue.has(w))return this._queue.get(w);
const B=this._queue.push(w),A=()=>{this._keyToItem.delete(w)};this._keyToItem.set(w,g);B.then(A,A);return B}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(g){if(!this.state)return g.values().next().value;const w=this.tileInfoView;let B=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;g.forEach(E=>{E=this._keyToItem.get(E);const G=this.tileInfoView.getTileScale(E.key);v.has(G)||(v.set(G,[]),B=Math.max(G,B),A=Math.min(G,A));v.get(G).push(E.key);n.add(G)});let d=this.state.scale;
v.has(d)||(e(t,n),t.sort((E,G)=>E-G),d=t.reduce((E,G)=>Math.abs(G-d)<Math.abs(E-d)?G:E,t[0]));d=Math.min(d,B);d=Math.max(d,A);g=v.get(d);const x=w.getClosestInfoForScale(d),q=x.getColumnForX(this.state.center[0]),z=x.getRowForY(this.state.center[1]);g.sort((E,G)=>{const M=x.denormalizeCol(E.col,E.world),L=x.denormalizeCol(G.col,G.world);return Math.sqrt((q-M)*(q-M)+(z-E.row)*(z-E.row))-Math.sqrt((q-L)*(q-L)+(z-G.row)*(z-G.row))});n.clear();v.clear();return g[0].id}_peekByCenterFirst(g){if(!this.state)return g.values().next().value;
const w=this.tileInfoView,B=this.state.center;let A=Number.POSITIVE_INFINITY,d;g.forEach(x=>{x=this._keyToItem.get(x);w.getTileCoords(r,x.key);const q=m.distance(r,B);q<A&&(A=q,d=x.key)});return d.id}};f.__decorate([b.property({constructOnly:!0})],c.prototype,"concurrency",void 0);f.__decorate([b.property({constructOnly:!0})],c.prototype,"process",void 0);f.__decorate([b.property()],c.prototype,"state",void 0);f.__decorate([b.property({constructOnly:!0})],c.prototype,"strategy",void 0);f.__decorate([b.property({constructOnly:!0})],
c.prototype,"tileInfoView",void 0);return c=f.__decorate([l.subclass("esri.views.2d.tiling.TileQueue")],c)})},"esri/views/support/QueueProcessor":function(){define("exports ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/ReactiveMap ../../core/scheduling ../../core/signal".split(" "),function(f,c,h,b,u,k,p){class l{constructor(a,e){this.item=a;this.controller=e;this.promise=null}}class m{constructor(a){this._task=this._schedule=null;this._deferreds=new u;this._controllers=new u;
this._processingItems=new u;this._pausedSignal=p.signal(!1);this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new b(a.peeker);this.process=a.process;const e=a.scheduler;a.priority&&e&&(this._task=e.registerTask(a.priority,this))}destroy(){this.clear();this._schedule=c.removeMaybe(this._schedule);this._task=c.removeMaybe(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(a){(a=this._controllers.get(a))&&
a.abort()}clear(){this._queue.clear();const a=[];this._controllers.forEach(e=>a.push(e));this._controllers.clear();a.forEach(e=>e.abort());this._processingItems.clear();this._cancelNext()}forEach(a){this._deferreds.forEach((e,n)=>a(n))}get(a){return(a=this._deferreds.get(a))?a.promise:void 0}isOngoing(a){return this._processingItems.has(a)}has(a){return this._deferreds.has(a)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(a,e){const n=this.get(a);if(n)return n;
const t=new AbortController;let v=null;e&&(v=h.onAbort(e,()=>t.abort()));const r=()=>{g.remove();null!=v&&v.remove();this._removeItem(a);this._queue.remove(a);this._scheduleNext()},g=h.onAbortOrThrow(t.signal,()=>{const B=this._processingItems.get(a);B&&B.controller.abort();r();w.reject(h.createAbortError())}),w=h.createResolver();this._deferreds.set(a,w);this._controllers.set(a,t);w.promise.then(r,r);this._queue.push(a);this._scheduleNext();return w.promise}last(){return this._queue.last()}lastPromise(){const a=
this.last();return a?this.get(a):null}peek(){return this._queue.peek()}popLast(){const a=this._queue.popLast();a&&this._removeItem(a);return a}reset(){const a=[];this._processingItems.forEach(e=>a.push(e));this._processingItems.clear();for(const e of a)this._queue.push(e.item),e.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const a=[];for(;this._queue.length;)a.push(this._queue.pop());this.clear();return a}get running(){return!this._pausedSignal.value&&
0<this._queue.length&&this._processingItems.size<this.concurrency}runTask(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()}_removeItem(a){this._deferreds.delete(a);this._controllers.delete(a);this._processingItems.delete(a)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=k.schedule(()=>{this._schedule=null;this._next()}))}_next(){for(;0<this._queue.length&&this._processingItems.size<
this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(a,e){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(e))}_processError(a,e){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(e))}_canProcessFulfillment(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1}_process(a){if(null!=a){var e=new AbortController,
n=new l(a,e);this._processingItems.set(a,n);try{var t=this.process(a,e.signal)}catch(v){this._processError(n,v)}h.isPromiseLike(t)?(n.promise=t,t.then(v=>this._processResult(n,v),v=>this._processError(n,v))):this._processResult(n,t)}}get test(){return{update:a=>this.runTask(a)}}}f.QueueProcessor=m;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache","./TileCoverage","./TileKey"],
function(f,c,h,b){const u=new b(0,0,0,0),k=new Map,p=[],l=[];class m{constructor(a){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;null!=a.resampling&&(this.resampling=a.resampling);a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);
null!=a.buffer&&(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new c(a.cacheSize,this.tileInfoView,e=>{this.releaseTile(e)}))}destroy(){this.tileIndex.clear()}update(a){const {resampling:e,tileIndex:n}=this,{scale:t,center:v,resolution:r}=a.state,{minScale:g,maxScale:w}=this.tileInfoView,B=!a.stationary&&t>this._previousScale;this._previousScale=t;if(!e&&(t>g||t<w))this.tiles.length=0,this.clear();else if(a=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.resampling,this.coveragePolicy)){var {spans:A,
lodInfo:d}=a,{level:x}=d;this.tiles.length=0;n.forEach(G=>G.visible=!0);var q=0,z=0;if(0<A.length)for(const {row:G,colFrom:M,colTo:L}of A)for(var E=M;E<=L;E++){q++;const P=u.set(x,G,d.normalizeCol(E),d.getWorldForColumn(E)).id;let ba=n.get(P);if(ba)ba.isReady?(k.set(P,ba),z++):B||this._addParentTile(P,k);else{if(this._tileCache?.has(P)){if(ba=this._tileCache.pop(P),this.tileIndex.set(P,ba),ba.isReady){k.set(P,ba);z++;continue}}else ba=this.acquireTile(u),this.tileIndex.set(P,ba);B||this._addParentTile(P,
k)}}q=z===q;for(const [G,M]of n)k.has(G)||(u.set(G),z=this.tileInfoView.intersects(a,u),E="purge"===this.cachePolicy?u.level!==x:u.level>x,!z||!B&&q?!E&&z||p.push(M):M.isReady?E&&"purge"===this.cachePolicy&&this._hasReadyAncestor(u,x)?p.push(M):l.push(M):E&&p.push(M));for(const G of l)G.isReady&&k.set(G.key.id,G);for(const G of p)this._tileCache?this._tileCache.add(G):this.releaseTile(G),n.delete(G.key.id);for(const G of k.values())this.tiles.push(G);for(const G of n.values())k.has(G.key.id)||(G.visible=
!1);this._tileCache?.prune(x,v,r);h.pool.release(a);l.length=0;p.length=0;k.clear()}else this.tiles.length=0,this.clear()}clear(){const {tileIndex:a}=this;for(const e of a.values())this.releaseTile(e);a.clear()}refresh(a){for(const e of this.tileIndex.values())this.tiles.includes(e)?a(e):p.push(e);for(const e of p)this.releaseTile(e),this.tileIndex.delete(e.key.id);this._tileCache?.clear()}updateCacheSize(a){this._tileCache&&(this._tileCache.maxSize=a)}_addParentTile(a,e){let n=null;for(;;){a=this.tileInfoView.getTileParentId(a);
if(!a)break;if(this.tileIndex.has(a)){if(n=this.tileIndex.get(a),n?.isReady){e.has(n.key.id)||e.set(n.key.id,n);break}}else if(this._tileCache?.has(a)&&(n=this._tileCache.pop(a),this.tileIndex.set(a,n),n?.isReady)){e.has(n.key.id)||e.set(n.key.id,n);break}}}_hasReadyAncestor(a,e){const n=f.create();this.tileInfoView.getTileBounds(n,a,!0);for(const t of this.tileIndex.values())if(t.isReady&&t.key.level>=e&&t.key.level<a.level){const v=f.create();this.tileInfoView.getTileBounds(v,t.key,!0);if(f.contains(v,
n))return!0}return!1}}return m})},"esri/views/2d/tiling/TileCache":function(){define(["../../../core/libs/gl-matrix-2/math/vec2"],function(f){class c{constructor(h,b,u){this.maxSize=h;this._tileInfoView=b;this._removedFunc=u;this._tilePerId=new Map;this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear();this._tileKeysPerLevel=[]}has(h){return this._tilePerId.has(h)}get(h){return this._tilePerId.get(h)}pop(h){const b=this._tilePerId.get(h);if(b){var u=this._tileKeysPerLevel[b.key.level];this._tilePerId["delete"](h);
for(let k=0;k<u.length;k++)if(u[k].id===h){u.splice(k,1);break}b.visible=!0;return b}}add(h){h.visible=!1;const b=h.key,u=b.id;this._tilePerId.has(u)||(this._tilePerId.set(u,h),h=b.level,this._tileKeysPerLevel[h]||(this._tileKeysPerLevel[h]=[]),this._tileKeysPerLevel[h].push(b))}prune(h,b,u){let k=this._tilePerId.size;if(!(k<=this.maxSize)){for(var p=this._tileKeysPerLevel.length-1;k>this.maxSize&&0<=p;)p!==h&&(k=this._pruneAroundCenterTile(k,b,u,p)),p--;k>this.maxSize&&(k=this._pruneAroundCenterTile(k,
b,u,h))}}_pruneAroundCenterTile(h,b,u,k){k=this._tileKeysPerLevel[k];if(!k||0===k.length)return h;const {size:p,origin:l}=this._tileInfoView.tileInfo,m=u*p[0],a=u*p[1],e=[0,0],n=[0,0];for(k.sort((t,v)=>{e[0]=l.x+m*(t.col+.5);e[1]=l.y-a*(t.row+.5);n[0]=l.x+m*(v.col+.5);n[1]=l.y-a*(v.row+.5);return f.squaredDistance(e,b)-f.squaredDistance(n,b)});0<k.length&&(u=k.pop(),this._removeTile(u.id),h--,h!==this.maxSize););return h}_removeTile(h){const b=this._tilePerId.get(h);this._removedFunc&&b&&this._removedFunc(b);
this._tilePerId["delete"](h)}}return c})},"esri/views/2d/ViewStateManager":function(){define("exports ../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/screenUtils ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../chunks/pe ../../geometry/Point ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./PaddedViewState ./viewpointUtils ../../geometry/Extent".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r,g,w,B,A,d,x){f.ViewStateManager=class extends u{constructor(q){super(q);this.constraints=null;this.ready=!1;this.resizeAlign="center";this.addHandles([m.watch(()=>this.constraints?.version,z=>{this.constraints&&z&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},m.sync)])}get center(){if(!this.ready)return this._get("center");const {center:q,spatialReference:z}=this.state.paddedViewState;this.state.commitProperty("id");
return new g({x:q[0],y:q[1],spatialReference:z})}set center(q){if(null!=q)if(this.ready){try{var z=this._project(q,this.state.spatialReference)}catch(E){l.getLogger(this).error(new k("mapview:invalid-center","could not project the value in the view's spatial reference",{input:q,error:E}));return}q=this.viewpoint;d.centerAt(q,q,z);this.viewpoint=q}else this._set("center",q)}get extent(){if(!this.ready)return this._get("extent");this.state.commitProperty("id");return this.state.paddedViewState.extent.clone()}set extent(q){if(null!=
q)if(q.width&&q.height)if(this.ready){try{var z=this._project(q,this.state.spatialReference)}catch(E){l.getLogger(this).error(new k("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:E}));return}q=this.viewpoint;d.setExtent(q,q,z,this.state.size,{constraints:this.constraints});this.viewpoint=q}else this._set("extent",q),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),this._set("zoom",void 0);else l.getLogger(this).error(new k("mapview:invalid-extent",
"invalid extent size"))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(q){this.ready?(this.state.padding=q,this._set("padding",this.state.padding)):this._set("padding",q)}get resolution(){if(!this.ready)return 0;this.state.commitProperty("id");return this.state.resolution}get rotation(){if(!this.ready)return this._get("rotation");this.state.commitProperty("id");return this.state.rotation}set rotation(q){if(!isNaN(q))if(this.ready){var z=this.viewpoint;d.rotateTo(z,
z,q);this.viewpoint=z}else this._set("rotation",q)}get scale(){if(!this.ready)return this._get("scale");this.state.commitProperty("id");return this.state.scale}set scale(q){if(q&&!isNaN(q))if(this.ready){var z=this.viewpoint;d.scaleTo(z,z,q);this.viewpoint=z}else if(this._set("scale",q),this._set("zoom",void 0),q=this._get("extent"))this._set("extent",void 0),this._set("center",q.center)}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(q){if(null!=
q)if(this.ready){var z;try{var E=this._project(q,this.state.spatialReference);!q.scale||isNaN(q.scale)?z=new k("mapview:invalid-viewpoint",`invalid scale value of ${q.scale}`):null==q.targetGeometry&&(z=new k("mapview:invalid-viewpoint","geometry not defined"))}catch(G){z=new k("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:G})}z?l.getLogger(this).error(z):(this._scaleBeforeChangingSpatialReference=null,q=new b({targetGeometry:new g,scale:0,rotation:0}),
d.copy(q,E),this.constraints?.constrain(q,this.state.paddedViewState.viewpoint),this.state.viewpoint=q,this._set("viewpoint",q))}else this._set("viewpoint",q),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),this._set("scale",void 0)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(q){if(0<=q)if(this.ready)if(q=this.constraints?.zoomToScale(q)??0){var z=this.viewpoint;d.scaleTo(z,z,q);this.viewpoint=z;this._set("zoom",
this.constraints?.scaleToZoom(this.scale)??-1)}else this._set("zoom",-1);else if(this._set("zoom",q),this._set("scale",void 0),q=this._get("extent"))this._set("extent",void 0),this._set("center",q.center)}getUserStartupOptions(q){if(!q[0]&&!q[1])return{center:void 0,rotation:void 0,scale:void 0};const {padding:z,constraints:E}=this;var G=this._get("center"),M=this._get("extent");const L=this._get("scale");var P=this._get("rotation");const ba=this._get("viewpoint");var Z=this._get("zoom");Z=null!=
Z&&null!=E?E.zoomToScale(Z)||void 0:void 0;let W=void 0,fa=void 0,ha=void 0;const y=ba?.targetGeometry;"extent"===y?.type?W=y:"point"===y?.type&&(fa=y,ha=ba?.scale);M=M??W;G=G??fa??M?.center;P=P??ba?.rotation;q=(L??Z??ha??(M&&d.extentToScale(M,[q[0]-z.left-z.right,q[1]-z.top-z.bottom])))||void 0;return{center:G,rotation:P,scale:q}}startup(q,z,E,G){const M=q.targetGeometry;try{this._project(q,E)}catch(L){l.getLogger(this).warn(new e("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",
{center:M.toJSON(),spatialReference:E,error:L})),q.targetGeometry=G||new g({x:0,y:0,spatialReference:E})}this.constraints?.fit(q);this._set("state",new A({padding:this.padding,size:z,viewpoint:q}));this._set("ready",!0)}teardown(){this._set("ready",!1);const {center:[q,z],spatialReference:E,rotation:G,scale:M}=this.state.paddedViewState,L=new g({x:q,y:z,spatialReference:E});this._set("viewpoint",null);this._set("extent",null);this._set("center",L);this._set("zoom",-1);this._set("rotation",G);this._set("scale",
M);this._set("state",null)}changeSpatialReference(q){const z=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=z.scale;else{var E=z.viewpoint.clone();E.scale=this._scaleBeforeChangingSpatialReference;z.viewpoint=E}E=z.clone();const [G,M]=z.center;var L=null;try{L=this._project(new g({x:G,y:M,spatialReference:z.spatialReference}),q)}catch(P){r.isLoaded()||l.getLogger(this).warn(new e("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",
{center:L?.toJSON(),spatialReference:q,error:P}))}L||=new g({x:0,y:0,spatialReference:q});L=d.centerAt(new b({targetGeometry:new g,scale:0,rotation:0}),z.viewpoint,L);E.viewpoint=L;try{const P=[z.size[0]/2,z.size[1]/2],ba=[P[0]+20,P[1]],Z=z.toMap([0,0],ba),{x:W,y:fa}=this._project(new g({x:Z[0],y:Z[1],spatialReference:z.spatialReference}),q);Z[0]=W;Z[1]=fa;E.toScreen(Z,Z);const ha=d.angleBetween(P,Z,ba),y=Math.hypot(Z[0]-P[0],Z[1]-P[1])/20;!Number.isFinite(y)||4<Math.abs(y)?(L.rotation=0,L.targetGeometry=
new g({x:0,y:0,spatialReference:q})):(L.scale*=y,L.scale>p("mapview-srswitch-adjust-rotation-scale-threshold")?L.rotation=0:L.rotation+=Number.isFinite(ha)?ha:0)}catch{}this._get("constraints")?.constrain(L,void 0);this._get("state").viewpoint=L}resize(q,z){if(this.ready){var E=this.state,G=this.state.paddedViewState.viewpoint,M=this.state.paddedViewState.size.concat();E.size=[q,z];d.resize(G,G,M,this.state.paddedViewState.size,this.resizeAlign);G=this.constraints?.constrain(G,void 0)??G;this.state.viewpoint=
G}}toMap(q){if(!this.ready)return null;const [z,E]=this.state.toMap([0,0],[q.x,q.y]);return new g({x:z,y:E,spatialReference:this.state.spatialReference})}toScreen(q,z){if(!this.ready)return null;q=this._project(q,this.state.spatialReference);q=[q.x,q.y];!1===z?.pickClosestTarget?this.state.toScreen(q,q):this.state.toScreenClosest(q,q);return a.createScreenPoint(q[0],q[1])}_project(q,z){const E=q?.targetGeometry||q;if(!z)return q;if(!E)return null;if(z.imageCoordinateSystem||E.spatialReference?.imageCoordinateSystem||
B.equals(z,E.spatialReference))return q;const G=w.project(E,z);if(!G)throw new k("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:E,spatialReference:z});return"esri.Viewpoint"===q?.declaredClass?(q.targetGeometry=G,q):G}};c.__decorate([n.property({type:g})],f.ViewStateManager.prototype,"center",null);c.__decorate([n.property()],f.ViewStateManager.prototype,"constraints",void 0);c.__decorate([n.property({type:x})],f.ViewStateManager.prototype,
"extent",null);c.__decorate([n.property({value:{top:0,right:0,bottom:0,left:0},cast:q=>({top:0,right:0,bottom:0,left:0,...q})})],f.ViewStateManager.prototype,"padding",null);c.__decorate([n.property()],f.ViewStateManager.prototype,"ready",void 0);c.__decorate([n.property()],f.ViewStateManager.prototype,"resizeAlign",void 0);c.__decorate([n.property({readOnly:!0})],f.ViewStateManager.prototype,"resolution",null);c.__decorate([n.property({type:Number})],f.ViewStateManager.prototype,"rotation",null);
c.__decorate([n.property({type:Number})],f.ViewStateManager.prototype,"scale",null);c.__decorate([n.property({readOnly:!0})],f.ViewStateManager.prototype,"state",void 0);c.__decorate([n.property({type:b})],f.ViewStateManager.prototype,"viewpoint",null);c.__decorate([n.property()],f.ViewStateManager.prototype,"zoom",null);f.ViewStateManager=c.__decorate([v.subclass("esri.views.2d.ViewStateManager")],f.ViewStateManager);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n){var t,v;let r=t=class extends c{constructor(){super(...arguments);this.bottom=this.right=this.top=this.left=0}clone(){return new t({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};f.__decorate([b.property()],r.prototype,"left",void 0);f.__decorate([b.property()],r.prototype,"top",void 0);f.__decorate([b.property()],r.prototype,"right",void 0);f.__decorate([b.property()],r.prototype,"bottom",void 0);r=t=f.__decorate([l.subclass("esri.views.2d.PaddedViewState.Padding")],
r);c=v=class extends n{constructor(...g){super(...g);this.paddedViewState=new n;this._updateContent=(()=>{const w=a.create();return()=>{var B=this._get("size");const A=this._get("padding");if(B&&A){var d=this.paddedViewState;m.set(w,A.left+A.right,A.top+A.bottom);m.subtract(w,B,w);m.copy(d.size,w);if(B=d.viewpoint)this.viewpoint=B}}})();this.addHandles(h.watch(()=>[this.size,this.padding],()=>this._updateContent(),h.sync));this.padding=new r;this.size=[0,0]}set padding(g){this._set("padding",g||new r)}set viewpoint(g){if(g){const w=
g.clone();this.paddedViewState.viewpoint=g;e.addPadding(w,g,this._get("size"),this._get("padding"));g=this._viewpoint2D;const B=w.targetGeometry;g.center[0]=B.x;g.center[1]=B.y;g.rotation=w.rotation;g.scale=w.scale;g.spatialReference=B.spatialReference;this._update()}}clone(){return new v({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};f.__decorate([b.property()],c.prototype,"paddedViewState",void 0);f.__decorate([b.property({type:r})],
c.prototype,"padding",null);f.__decorate([b.property()],c.prototype,"viewpoint",null);return c=v=f.__decorate([l.subclass("esri.views.2d.PaddedViewState")],c)})},"esri/views/2d/ViewState":function(){define("../../chunks/tslib.es6 ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df32 ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/mat3 ../../core/libs/gl-matrix-2/factories/mat3f32 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f32 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ../../geometry/support/normalizeUtils ./viewpointUtils ../../geometry/Extent ../../geometry/Point".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r,g,w,B,A,d,x,q,z){var E;const G=[0,0];c=E=class extends b.JSONSupport{constructor(M){super(M);this._viewpoint2D={center:B.create(),rotation:0,scale:0,spatialReference:void 0};this.center=[0,0];this.extent=new q;this.id=0;this.inverseTransform=t.create();this.scale=this.rotation=this.resolution=0;this.transform=t.create();this.transformNoRotation=t.create();this.displayMat3=r.create();this.displayViewMat3=r.create();this.viewMat3=r.create();this.viewMat2d=n.create();
this.worldScreenWidth=0;this.size=[0,0]}set pixelRatio(M){this._set("pixelRatio",M);this._update()}set size(M){this._set("size",M);this._update()}set viewpoint(M){if(M){const L=this._viewpoint2D,P=M.targetGeometry;L.center[0]=P.x;L.center[1]=P.y;L.rotation=M.rotation;L.scale=M.scale;L.spatialReference=P.spatialReference}this._update()}copy(M){const L=this.size,P=this.viewpoint;P&&L?(this.viewpoint=x.copy(P,M.viewpoint),this._set("size",g.copy(L,M.size))):(this.viewpoint=M.viewpoint.clone(),this._set("size",
[M.size[0],M.size[1]]));this._set("pixelRatio",M.pixelRatio);return this}clone(){return new E({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(M,L,P){if(A.isVec2(L))return g.transformMat2d(M,L,this.inverseTransform);G[0]=L;G[1]=P;return g.transformMat2d(M,G,this.inverseTransform)}toScreen(M,L,P){if(A.isVec2(L))return g.transformMat2d(M,L,this.transform);G[0]=L;G[1]=P;return g.transformMat2d(M,G,this.transform)}toScreenNoRotation(M,L,P){if(A.isVec2(L))return g.transformMat2d(M,
L,this.transformNoRotation);G[0]=L;G[1]=P;return g.transformMat2d(M,G,this.transformNoRotation)}toScreenClosest(M,L,P){A.isVec2(L)?(G[0]=L[0],G[1]=L[1]):(G[0]=L,G[1]=P);[L]=G;const {center:ba,extent:Z,spatialReference:W,transform:fa}=this;if(L<Z.xmin||L>Z.xmax)G[0]=d.getClosestDenormalizedXToReference(L,ba[0],W);return g.transformMat2d(M,G,fa)}getScreenTransform(M,L){const {center:P}=this._viewpoint2D,ba=this._get("pixelRatio")||1,Z=this._get("size");x.getMatrix(M,P,Z,L,0,ba);return M}_update(){const {center:M,
spatialReference:L,scale:P,rotation:ba}=this._viewpoint2D,Z=this._get("pixelRatio")||1,W=this._get("size"),fa=new h({targetGeometry:new z(M[0],M[1],L),scale:P,rotation:ba});this._set("viewpoint",fa);if(W&&L&&P){this.resolution=x.getResolution(fa);this.rotation=ba;this.scale=P;this.spatialReference=L;g.copy(this.center,M);v.set(this.displayMat3,0!==W[0]?2/W[0]:0,0,0,0,0!==W[1]?-2/W[1]:0,0,-1,1,1);var ha=v.identity(this.viewMat3),y=w.fromValues(W[0]/2,W[1]/2),C=w.fromValues(-W[0]/2,-W[1]/2),J=a.toRadian(ba);
v.translate(ha,ha,y);v.rotate(ha,ha,J);v.translate(ha,ha,C);v.multiply(this.displayViewMat3,this.displayMat3,ha);ha=e.fromTranslation(this.viewMat2d,y);e.rotate(ha,ha,J);e.translate(ha,ha,C);x.getExtent(this.extent,fa,W);x.getTransform(this.transform,fa,W,Z);e.invert(this.inverseTransform,this.transform);x.getTransformNoRotation(this.transformNoRotation,fa,W,Z);this.worldScreenWidth=x.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",this.id+1);return this}}};f.__decorate([u.property({readOnly:!0})],
c.prototype,"id",void 0);f.__decorate([u.property({value:1,json:{write:!0}})],c.prototype,"pixelRatio",null);f.__decorate([u.property({json:{write:!0}})],c.prototype,"size",null);f.__decorate([u.property()],c.prototype,"spatialReference",void 0);f.__decorate([u.property({type:h,json:{write:!0}})],c.prototype,"viewpoint",null);return c=E=f.__decorate([m.subclass("esri.views.2d.ViewState")],c)})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],function(f,c){function h(y,
C){y[0]=C[0];y[1]=C[1];y[2]=C[2];y[3]=C[4];y[4]=C[5];y[5]=C[6];y[6]=C[8];y[7]=C[9];y[8]=C[10];return y}function b(y,C){y[0]=C[0];y[1]=C[1];y[2]=C[2];y[3]=C[3];y[4]=C[4];y[5]=C[5];y[6]=C[6];y[7]=C[7];y[8]=C[8];return y}function u(y,C,J,R,K,S,V,X,Y,aa){y[0]=C;y[1]=J;y[2]=R;y[3]=K;y[4]=S;y[5]=V;y[6]=X;y[7]=Y;y[8]=aa;return y}function k(y){y[0]=1;y[1]=0;y[2]=0;y[3]=0;y[4]=1;y[5]=0;y[6]=0;y[7]=0;y[8]=1;return y}function p(y,C){if(y===C){const J=C[1],R=C[2],K=C[5];y[1]=C[3];y[2]=C[6];y[3]=J;y[5]=C[7];y[6]=
R;y[7]=K}else y[0]=C[0],y[1]=C[3],y[2]=C[6],y[3]=C[1],y[4]=C[4],y[5]=C[7],y[6]=C[2],y[7]=C[5],y[8]=C[8];return y}function l(y,C){const J=C[0],R=C[1],K=C[2],S=C[3],V=C[4],X=C[5],Y=C[6],aa=C[7];C=C[8];const da=C*V-X*aa,D=-C*S+X*Y,F=aa*S-V*Y;let H=J*da+R*D+K*F;if(!H)return null;H=1/H;y[0]=da*H;y[1]=(-C*R+K*aa)*H;y[2]=(X*R-K*V)*H;y[3]=D*H;y[4]=(C*J-K*Y)*H;y[5]=(-X*J+K*S)*H;y[6]=F*H;y[7]=(-aa*J+R*Y)*H;y[8]=(V*J-R*S)*H;return y}function m(y,C){const J=C[0],R=C[1],K=C[2],S=C[3],V=C[4],X=C[5],Y=C[6],aa=C[7];
C=C[8];y[0]=V*C-X*aa;y[1]=K*aa-R*C;y[2]=R*X-K*V;y[3]=X*Y-S*C;y[4]=J*C-K*Y;y[5]=K*S-J*X;y[6]=S*aa-V*Y;y[7]=R*Y-J*aa;y[8]=J*V-R*S;return y}function a(y){const C=y[3],J=y[4],R=y[5],K=y[6],S=y[7],V=y[8];return y[0]*(V*J-R*S)+y[1]*(-V*C+R*K)+y[2]*(S*C-J*K)}function e(y,C,J){const R=C[0],K=C[1],S=C[2],V=C[3],X=C[4],Y=C[5],aa=C[6],da=C[7];C=C[8];const D=J[0],F=J[1],H=J[2],N=J[3],Q=J[4],T=J[5],ea=J[6],ia=J[7];J=J[8];y[0]=D*R+F*V+H*aa;y[1]=D*K+F*X+H*da;y[2]=D*S+F*Y+H*C;y[3]=N*R+Q*V+T*aa;y[4]=N*K+Q*X+T*da;
y[5]=N*S+Q*Y+T*C;y[6]=ea*R+ia*V+J*aa;y[7]=ea*K+ia*X+J*da;y[8]=ea*S+ia*Y+J*C;return y}function n(y,C,J){const R=C[0],K=C[1],S=C[2],V=C[3],X=C[4],Y=C[5],aa=C[6],da=C[7];C=C[8];const D=J[0];J=J[1];y[0]=R;y[1]=K;y[2]=S;y[3]=V;y[4]=X;y[5]=Y;y[6]=D*R+J*V+aa;y[7]=D*K+J*X+da;y[8]=D*S+J*Y+C;return y}function t(y,C,J){const R=C[0],K=C[1],S=C[2],V=C[3],X=C[4],Y=C[5],aa=C[6],da=C[7];C=C[8];const D=Math.sin(J);J=Math.cos(J);y[0]=J*R+D*V;y[1]=J*K+D*X;y[2]=J*S+D*Y;y[3]=J*V-D*R;y[4]=J*X-D*K;y[5]=J*Y-D*S;y[6]=aa;
y[7]=da;y[8]=C;return y}function v(y,C,J){const R=J[0],K=J[1];J=J[2];y[0]=R*C[0];y[1]=R*C[1];y[2]=R*C[2];y[3]=K*C[3];y[4]=K*C[4];y[5]=K*C[5];y[6]=J*C[6];y[7]=J*C[7];y[8]=J*C[8];return y}function r(y,C,J){const R=J[0];J=J[1];y[0]=R*C[0];y[1]=R*C[1];y[2]=R*C[2];y[3]=J*C[3];y[4]=J*C[4];y[5]=J*C[5];return y}function g(y,C){y[0]=1;y[1]=0;y[2]=0;y[3]=0;y[4]=1;y[5]=0;y[6]=C[0];y[7]=C[1];y[8]=1;return y}function w(y,C){const J=Math.sin(C);C=Math.cos(C);y[0]=C;y[1]=J;y[2]=0;y[3]=-J;y[4]=C;y[5]=0;y[6]=0;y[7]=
0;y[8]=1;return y}function B(y,C){y[0]=C[0];y[1]=0;y[2]=0;y[3]=0;y[4]=C[1];y[5]=0;y[6]=0;y[7]=0;y[8]=1;return y}function A(y,C){y[0]=C[0];y[1]=C[1];y[2]=0;y[3]=C[2];y[4]=C[3];y[5]=0;y[6]=C[4];y[7]=C[5];y[8]=1;return y}function d(y,C){var J=C[0],R=C[1],K=C[2];C=C[3];var S=J+J,V=R+R;const X=K+K;J*=S;const Y=R*S;R*=V;const aa=K*S,da=K*V;K*=X;S*=C;V*=C;C*=X;y[0]=1-R-K;y[3]=Y-C;y[6]=aa+V;y[1]=Y+C;y[4]=1-J-K;y[7]=da-S;y[2]=aa-V;y[5]=da+S;y[8]=1-J-R;return y}function x(y,C){const J=C[0],R=C[1],K=C[2],S=
C[4],V=C[5],X=C[6],Y=C[8],aa=C[9];C=C[10];const da=C*V-X*aa,D=-C*S+X*Y,F=aa*S-V*Y;var H=J*da+R*D+K*F;if(!H)return null;H=1/H;y[0]=da*H;y[1]=(-C*R+K*aa)*H;y[2]=(X*R-K*V)*H;y[3]=D*H;y[4]=(C*J-K*Y)*H;y[5]=(-X*J+K*S)*H;y[6]=F*H;y[7]=(-aa*J+R*Y)*H;y[8]=(V*J-R*S)*H;return y}function q(y,C){const J=C[0],R=C[1],K=C[2],S=C[3],V=C[4],X=C[5],Y=C[6],aa=C[7];var da=C[8],D=C[9],F=C[10],H=C[11];const N=C[12],Q=C[13],T=C[14];C=C[15];const ea=J*X-R*V,ia=J*Y-K*V,I=J*aa-S*V,O=R*Y-K*X,U=R*aa-S*X,ca=K*aa-S*Y,ma=da*Q-
D*N,la=da*T-F*N;da=da*C-H*N;const ja=D*T-F*Q;D=D*C-H*Q;F=F*C-H*T;H=ea*F-ia*D+I*ja+O*da-U*la+ca*ma;if(!H)return null;H=1/H;y[0]=(X*F-Y*D+aa*ja)*H;y[1]=(Y*da-V*F-aa*la)*H;y[2]=(V*D-X*da+aa*ma)*H;y[3]=(K*D-R*F-S*ja)*H;y[4]=(J*F-K*da+S*la)*H;y[5]=(R*da-J*D-S*ma)*H;y[6]=(Q*ca-T*U+C*O)*H;y[7]=(T*I-N*ca-C*ia)*H;y[8]=(N*U-Q*I+C*ea)*H;return y}function z(y,C,J){y[0]=2/C;y[1]=0;y[2]=0;y[3]=0;y[4]=-2/J;y[5]=0;y[6]=-1;y[7]=1;y[8]=1;return y}function E(y){return"mat3("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+
y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+")"}function G(y){return Math.sqrt(y[0]**2+y[1]**2+y[2]**2+y[3]**2+y[4]**2+y[5]**2+y[6]**2+y[7]**2+y[8]**2)}function M(y,C,J){y[0]=C[0]+J[0];y[1]=C[1]+J[1];y[2]=C[2]+J[2];y[3]=C[3]+J[3];y[4]=C[4]+J[4];y[5]=C[5]+J[5];y[6]=C[6]+J[6];y[7]=C[7]+J[7];y[8]=C[8]+J[8];return y}function L(y,C,J){y[0]=C[0]-J[0];y[1]=C[1]-J[1];y[2]=C[2]-J[2];y[3]=C[3]-J[3];y[4]=C[4]-J[4];y[5]=C[5]-J[5];y[6]=C[6]-J[6];y[7]=C[7]-J[7];y[8]=C[8]-J[8];return y}function P(y,C,J){y[0]=C[0]*
J;y[1]=C[1]*J;y[2]=C[2]*J;y[3]=C[3]*J;y[4]=C[4]*J;y[5]=C[5]*J;y[6]=C[6]*J;y[7]=C[7]*J;y[8]=C[8]*J;return y}function ba(y,C,J,R){y[0]=C[0]+J[0]*R;y[1]=C[1]+J[1]*R;y[2]=C[2]+J[2]*R;y[3]=C[3]+J[3]*R;y[4]=C[4]+J[4]*R;y[5]=C[5]+J[5]*R;y[6]=C[6]+J[6]*R;y[7]=C[7]+J[7]*R;y[8]=C[8]+J[8]*R;return y}function Z(y,C){return y[0]===C[0]&&y[1]===C[1]&&y[2]===C[2]&&y[3]===C[3]&&y[4]===C[4]&&y[5]===C[5]&&y[6]===C[6]&&y[7]===C[7]&&y[8]===C[8]}function W(y,C){const J=y[0],R=y[1],K=y[2],S=y[3],V=y[4],X=y[5],Y=y[6],aa=
y[7];y=y[8];const da=C[0],D=C[1],F=C[2],H=C[3],N=C[4],Q=C[5],T=C[6],ea=C[7];C=C[8];const ia=c.getEpsilon();return Math.abs(J-da)<=ia*Math.max(1,Math.abs(J),Math.abs(da))&&Math.abs(R-D)<=ia*Math.max(1,Math.abs(R),Math.abs(D))&&Math.abs(K-F)<=ia*Math.max(1,Math.abs(K),Math.abs(F))&&Math.abs(S-H)<=ia*Math.max(1,Math.abs(S),Math.abs(H))&&Math.abs(V-N)<=ia*Math.max(1,Math.abs(V),Math.abs(N))&&Math.abs(X-Q)<=ia*Math.max(1,Math.abs(X),Math.abs(Q))&&Math.abs(Y-T)<=ia*Math.max(1,Math.abs(Y),Math.abs(T))&&
Math.abs(aa-ea)<=ia*Math.max(1,Math.abs(aa),Math.abs(ea))&&Math.abs(y-C)<=ia*Math.max(1,Math.abs(y),Math.abs(C))}function fa(y){const C=c.getEpsilon(),J=y[0],R=y[1],K=y[2],S=y[3],V=y[4],X=y[5],Y=y[6],aa=y[7];y=y[8];return Math.abs(1-(J*J+S*S+Y*Y))<=C&&Math.abs(1-(R*R+V*V+aa*aa))<=C&&Math.abs(1-(K*K+X*X+y*y))<=C}const ha=Object.freeze(Object.defineProperty({__proto__:null,add:M,adjoint:m,copy:b,determinant:a,equals:W,exactEquals:Z,frob:G,fromMat2d:A,fromMat4:h,fromQuat:d,fromRotation:w,fromScaling:B,
fromTranslation:g,identity:k,invert:l,isOrthoNormal:fa,mul:e,multiply:e,multiplyScalar:P,multiplyScalarAndAdd:ba,normalFromMat4:q,normalFromMat4Legacy:x,projection:z,rotate:t,scale:v,scaleByVec2:r,set:u,str:E,sub:L,subtract:L,translate:n,transpose:p},Symbol.toStringTag,{value:"Module"}));f.add=M;f.adjoint=m;f.copy=b;f.determinant=a;f.equals=W;f.exactEquals=Z;f.frob=G;f.fromMat2d=A;f.fromMat4=h;f.fromQuat=d;f.fromRotation=w;f.fromScaling=B;f.fromTranslation=g;f.identity=k;f.invert=l;f.isOrthoNormal=
fa;f.mat3=ha;f.mul=e;f.multiply=e;f.multiplyScalar=P;f.multiplyScalarAndAdd=ba;f.normalFromMat4=q;f.normalFromMat4Legacy=x;f.projection=z;f.rotate=t;f.scale=v;f.scaleByVec2=r;f.set=u;f.str=E;f.sub=L;f.subtract=L;f.translate=n;f.transpose=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["exports"],function(f){function c(){const p=new Float32Array(9);p[0]=1;p[4]=1;p[8]=1;return p}function h(p){const l=new Float32Array(9);
l[0]=p[0];l[1]=p[1];l[2]=p[2];l[3]=p[3];l[4]=p[4];l[5]=p[5];l[6]=p[6];l[7]=p[7];l[8]=p[8];return l}function b(p,l,m,a,e,n,t,v,r){const g=new Float32Array(9);g[0]=p;g[1]=l;g[2]=m;g[3]=a;g[4]=e;g[5]=n;g[6]=t;g[7]=v;g[8]=r;return g}function u(p,l){return new Float32Array(p,l,9)}const k=Object.freeze(Object.defineProperty({__proto__:null,clone:h,create:c,createView:u,fromValues:b},Symbol.toStringTag,{value:"Module"}));f.clone=h;f.create=c;f.createView=u;f.fromValues=b;f.mat3f32=k;Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(f){function c(b){return b instanceof Float32Array&&2<=b.length}function h(b){return Array.isArray(b)&&2<=b.length}f.isVec2=function(b){return c(b)||h(b)};f.isVec2f32=c;f.isVec2f64=h;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r,g,w,B,A,d,x,q,z,E,G,M,L){var P={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},ba={zoomIn:["\x3d","+"],zoomOut:["-","_"]},Z={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};c=class extends c{initialize(){const W=()=>this.view?.ready;this.addHandles([b.when(()=>!W(),()=>this._disconnect()),b.when(W,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??
!1}isModifierKeyDown(W){return this._inputManager?.isModifierKeyDown(W)??!1}_disconnect(){this.view.viewEvents.disconnect();this._inputManager=h.destroyMaybe(this._inputManager)}_connect(){const W=new d.BrowserEventSource(this.view.surface,this.view.input);var fa=[new G.ImmediateDoubleClick,new M.PointerClickHoldAndDrag,new L.SingleAndDoubleClick,new E.Drag(this.view.navigation),new z.DoubleTapDrag];fa=new x.InputManager({eventSource:W,recognizers:fa});fa.installHandlers("prevent-context-menu",[new q.PreventContextMenu],
x.ViewEventPriorities.INTERNAL);fa.installHandlers("navigation",[new A.PinchRotateAndZoom(this.view),new v.GamepadNavigation(this.view),new B.MouseWheelZoom(this.view),new a.DoubleClickZoom(this.view),new a.DoubleClickZoom(this.view,["Ctrl"]),new n.DragPan(this.view,"primary"),new r.KeyPan(this.view,P),new w.KeyZoom(this.view,ba),new g.KeyRotate(this.view,Z),new t.DragRotate(this.view,"secondary"),new e.DoubleTapDragZoom(this.view,"touch")],x.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(fa);
this._source=W;this._inputManager=fa;b.watch(()=>this.view?.navigation?.browserTouchPanEnabled,ha=>{this._source&&(this._source.browserTouchPanningEnabled=!ha)},b.initial)}get test(){return{inputManager:this._inputManager}}};f.__decorate([u.property()],c.prototype,"view",void 0);f.__decorate([u.property()],c.prototype,"latestPointerType",null);f.__decorate([u.property()],c.prototype,"latestPointerLocation",null);f.__decorate([u.property()],c.prototype,"multiTouchActive",null);return c=f.__decorate([m.subclass("esri.views.2d.input.MapViewInputManager")],
c)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../input/InputHandler","../../../input/handlers/support"],function(f,c,h){class b extends c.InputHandler{constructor(u,k){super(!0);this._view=u;this.registerIncoming("double-click",k,p=>this._handleDoubleClick(p,k))}_handleDoubleClick(u,k){h.eventMatchesPointerAction(u.data,"primary")&&(u.stopPropagation(),k?this._view.mapViewNavigation.zoomOut([u.data.x,u.data.y]):this._view.mapViewNavigation.zoomIn([u.data.x,
u.data.y]))}}f.DoubleClickZoom=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/support":function(){define(["exports"],function(f){f.eventMatchesMousePointerAction=function(c,h){if("touch"===c.pointerType)return!1;switch(h){case "primary":return 0===c.button;case "secondary":return 2===c.button;case "tertiary":return 1===c.button}};f.eventMatchesPointerAction=function(c,h){switch(h){case "primary":return"touch"===c.pointerType||0===c.button;case "secondary":return"touch"!==
c.pointerType&&2===c.button;case "tertiary":return"touch"!==c.pointerType&&1===c.button}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(f,c,h){class b extends h.InputHandler{constructor(u,k,p){super(!0);this.view=u;this.pointerType=k;this.registerIncoming("double-tap-drag",p,l=>this._handleDoubleTapDrag(l))}_handleDoubleTapDrag(u){var {data:k}=
u,{pointerType:p}=k;if(p===this.pointerType){u.stopPropagation();var {action:l,delta:m}=k;({view:k}=this);({mapViewNavigation:u}=k);switch(l){case "begin":({scale:k}=k);this._currentScale=this._startScale=k;this._previousDelta=m;u.begin();break;case "update":if(this._previousDelta.y===m.y)break;this._previousDelta=m;k=this._startScale*1.015**m.y;u.setViewpointImmediate(k/this._currentScale);this._currentScale=k;break;case "end":({constraints:p}=k);const {effectiveLODs:a,snapToZoom:e}=p;e&&a?(k=p.snapScale(this._currentScale),
k=(0<m.y?Math.max(k,p.snapToPreviousScale(this._startScale)):Math.min(k,p.snapToNextScale(this._startScale)))/this._currentScale,u.zoom(k)):u.end()}}}}f.DoubleTapDragZoom=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(f,c,h,b){class u extends h.InputHandler{constructor(k,p,l){super(!0);this.view=k;this.pointerAction=
p;this.registerIncoming("drag",l,m=>this._handleDrag(m));this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(k){super.onInstall(k);this._dragEventSeparator=new c.DragEventSeparator({start:(p,l)=>{this.view.mapViewNavigation.pan.begin(this.view,l.data);l.stopPropagation()},update:(p,l)=>{this.view.mapViewNavigation.pan.update(this.view,l.data);l.stopPropagation()},end:(p,l)=>{this.view.mapViewNavigation.pan.end(this.view,l.data);l.stopPropagation()},condition:(p,l)=>1===
p&&b.eventMatchesPointerAction(l.data,this.pointerAction)})}_handleDrag(k){const p=this.view.mapViewNavigation;p.pinch.zoomMomentum||p.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(k)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}f.DragPan=u;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(f){class c{constructor(h){this._callbacks=h;
this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(h){const b=h.data,u=b.pointers.size;switch(b.action){case "start":this._currentCount=u;this._emitStart(h);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=u;this._emitStart(h);break;case "update":this._emitUpdate(h);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=u;this._emitStart(h);break;case "end":this._emitEnd(h),this._currentCount=0}this._previousEvent=
h}_emitStart(h){this._startEvent=h;this._callbacks.condition?.(this._currentCount,h)&&this._callbacks.start(this._currentCount,h,this._startEvent)}_emitUpdate(h){this._callbacks.condition?.(this._currentCount,h)&&this._callbacks.update(this._currentCount,h,this._startEvent)}_emitEnd(h){this._callbacks.condition?.(this._currentCount,h)&&this._callbacks.end(this._currentCount,h,this._startEvent);this._startEvent=null}}f.DragEventSeparator=c;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(f,c,h,b){class u extends h.InputHandler{constructor(k,p,l){super(!0);this._view=k;this.pointerAction=p;const m=this._view.mapViewNavigation;this._dragEventSeparator=new c.DragEventSeparator({start:(a,e)=>{m.rotate.begin(this._view,e.data);e.stopPropagation()},update:(a,e)=>{m.rotate.update(this._view,e.data);e.stopPropagation()},
end:(a,e)=>{m.rotate.end();e.stopPropagation()},condition:(a,e)=>1===a&&b.eventMatchesPointerAction(e.data,this.pointerAction)});this.registerIncoming("drag",l,a=>this._dragEventSeparator.handle(a))}}f.DragRotate=u;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(f,c,h,b,u,k,p){class l extends k.InputHandler{constructor(m){super(!0);this._view=m;this._frameTask=null;this._watchHandles=new c;this._currentDevice=null;this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};this._handle=this.registerIncoming("gamepad",a=>this._handleGamePadEvent(a));this._handle.pause()}onInstall(m){super.onInstall(m);this._watchHandles.add([h.watch(()=>this._view.navigation.gamepad?.enabled,a=>{a?(this._handle.resume(),this._frameTask||(this._frameTask=b.addFrameTask({update:e=>
this._frameUpdate(e.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},h.initial)])}onUninstall(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);super.onUninstall()}_handleGamePadEvent(m){const a=this._view.navigation.gamepad.device;a&&m.data.device!==a||this._currentDevice&&this._currentDevice!==m.data.device||("end"===m.data.action?(this._currentDevice=null,p.resetTransformation(this._transformation)):
(this._currentDevice=m.data.device,p.extractTransformation(m.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(m){const a=this._transformation;if(!p.isZeroTransformation(a)){var e=this._view.viewpoint.clone(),n=.7*this._view.navigation.gamepad.velocityFactor*m;u.translateBy(e,e,[a.translation[0]*n,-a.translation[1]*n]);n=this._view.size;u.scaleAndRotateBy(e,e,1+6E-4*a.translation[2]*m,this._view.constraints.rotationEnabled?.06*-a.heading*m:0,[n[0]/2,n[1]],n);m=this._view.constraints.constrain(e,
this._view.viewpoint);this._view.viewpoint=m}}}f.GamepadNavigation=l;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec32"],function(f,c){function h(b){let u=b*b;0>b&&(u*=-1);return u}f.extractTransformation=function(b,u,k){const p=b.state;b=b.device;u="forward-down"===u.tiltDirection?1:-1;"standard"===b.deviceType?(k.translation[0]=h(p.axes[0]),k.translation[1]=h(p.axes[1]),k.translation[2]=
h(p.buttons[7])-h(p.buttons[6]),k.heading=h(p.axes[2]),k.tilt=h(p.axes[3])):"spacemouse"===b.deviceType&&(k.translation[0]=1.2*h(p.axes[0]),k.translation[1]=1.2*h(p.axes[1]),k.translation[2]=2*-h(p.axes[2]),k.heading=1.2*h(p.axes[5]),k.tilt=1.2*h(p.axes[3]));k.tilt*=u;c.scale(k.translation,k.translation,1);return k};f.extractTransformationKeyboard=function(b,u){u.translation[0]=b[1]-b[0];u.translation[1]=b[3]-b[2];u.translation[2]=b[4]-b[5];u.heading=b[7]-b[6];u.tilt=b[8]-b[9];u.zoom=b[10]-b[11];
return u};f.isZeroTransformation=function(b){return 0===b.translation[0]&&0===b.translation[1]&&0===b.translation[2]&&0===b.heading&&0===b.tilt&&0===b.zoom};f.resetTransformation=function(b){b.translation[0]=0;b.translation[1]=0;b.translation[2]=0;b.heading=0;b.tilt=0;return b};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(f,c,h){class b extends c.InputHandler{constructor(u,
k,p){super(!0);this.view=u;this.keys=k;this._isSticky=!1;this._pressedKeys=new Set;this._currentDirection=this._timeout=void 0;this._stickyKeyDuration=200;this._handleKey=l=>{var m=this._keyMap[l.data.key];l.modifiers.has("Meta")||l.modifiers.has("Ctrl")?this._stopMovement():null!=m&&(l.stopPropagation(),l.preventDefault(),l="key-down"===l.type,this._pressedKeys[l?"add":"delete"](m),l?this._direction!==m&&(this._direction=m,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})):
(m=0<this._pressedKeys.size,void 0===this._timeout||m?this._handlePopKey():this._isSticky=!0))};this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop();null==this._direction&&this._stopMovement()};this._stopMovement=()=>{this._isSticky=!1;this._direction=void 0;this._pressedKeys.clear();this._setTimeout(void 0)};this._keyMap={[k.left]:"left",[k.right]:"right",[k.up]:"up",[k.down]:"down"};this.registerIncoming("key-down",p,this._handleKey);this.registerIncoming("key-up",p,this._handleKey);
this.registerIncoming("blur",p,this._stopMovement);this._visibilityHandle=h.onVisibilityChange(l=>l?null:this._stopMovement())}onUninstall(){this._stopMovement();this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(u){const k=null!=this._currentDirection;if(null!=u){if(k||this.view.mapViewNavigation.begin(),this._currentDirection!==u)switch(u){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();
break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}}else k&&this.view.mapViewNavigation.stop();this._currentDirection=u}_setTimeout(u){clearTimeout(this._timeout);this._timeout=void 0===u?void 0:setTimeout(()=>{this._timeout=void 0;u()},this._stickyKeyDuration)}}f.KeyPan=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/VisibilityChange":function(){define(["exports"],function(f){f.onVisibilityChange=
function(c){const h=()=>c("visible"===document.visibilityState);document.addEventListener("visibilitychange",h);return{remove:()=>document.addEventListener("visibilitychange",h)}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(f,c,h){class b extends c.InputHandler{constructor(u,k,p){super(!0);this.view=u;this.keys=k;this._pressed=!1;this._keyToDirection=
{[k.clockwiseOption1]:"clockwise",[k.clockwiseOption2]:"clockwise",[k.counterClockwiseOption1]:"counterClockwise",[k.counterClockwiseOption2]:"counterClockwise",[k.resetOption1]:"reset",[k.resetOption2]:"reset"};this.registerIncoming("key-down",p,l=>this._handleKeyDown(l));this.registerIncoming("key-up",p,l=>this._handleKeyUp(l));this.registerIncoming("blur",p,()=>this._handleStop());this._visibilityHandle=h.onVisibilityChange(l=>l?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove();
this._handleStop()}_handleKeyDown(u){u.data.repeat||this._handleKey(u,!0)}_handleKeyUp(u){this._handleKey(u,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(u,k){var p=u.modifiers;if(!(0<p.size&&!p.has("Shift")||!this.view.constraints.rotationEnabled)&&(p=this._keyToDirection[u.data.key],this._pressed=null!=p)){u.preventDefault();if(k)switch(this.view.mapViewNavigation.begin(),p){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();
break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();u.stopPropagation()}}}f.KeyRotate=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(f,c,h){var b;(function(k){k[k.IN=0]="IN";k[k.OUT=1]="OUT"})(b||=
{});class u extends h.InputHandler{constructor(k,p,l){super(!0);this.view=k;this.keys=p;this._keysToZoomAction={};this.registerIncoming("key-down",l,m=>this._handleKeyDown(m));p.zoomIn.forEach(m=>this._keysToZoomAction[m]=b.IN);p.zoomOut.forEach(m=>this._keysToZoomAction[m]=b.OUT)}_handleKeyDown(k){this._handleKey(k)}_handleKey(k){var p=k.modifiers;if(!(0<p.size)||p.has("Shift"))if({key:p}=k.data,p in this._keysToZoomAction){p=this._keysToZoomAction[p];var {mapViewNavigation:l}=this.view,m=null;switch(p){case b.IN:m=
l.zoomIn();break;case b.OUT:m=l.zoomOut();break;default:return}l.begin();m.then(()=>l.end());k.stopPropagation()}}}f.KeyZoom=u;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../input/InputHandler"],function(f,c){class h extends c.InputHandler{constructor(b,u){super(!0);this._view=b;this._canZoom=!0;this.registerIncoming("mouse-wheel",u,k=>this._handleMouseWheel(k))}_handleMouseWheel(b){if(this._view.navigation.mouseWheelZoomEnabled&&
(b.preventDefault(),b.stopPropagation(),this._canZoom)){var u=this._view.mapViewNavigation,{x:k,y:p,deltaY:l}=b.data;if(b=u.zoom(1/.6**(1/60*l),[k,p]))this._canZoom=!1,b.catch(()=>{}).then(()=>{this._canZoom=!0;u.end()})}}}f.MouseWheelZoom=h;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler"],function(f,c,h){class b extends h.InputHandler{constructor(u){super(!0);
this.view=u;this.registerIncoming("drag",p=>this._handleDrag(p));this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const k=this.view.mapViewNavigation;this._dragEventSeparator=new c.DragEventSeparator({start:(p,l)=>{k.pinch.begin(this.view,l.data);l.stopPropagation()},update:(p,l)=>{k.pinch.update(this.view,l.data);l.stopPropagation()},end:(p,l)=>{k.pinch.end(this.view);l.stopPropagation()},condition:p=>2<=p})}_handleDrag(u){this._dragEventSeparator.handle(u)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}
f.PinchRotateAndZoom=b;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define(["exports","../../core/has","../../core/maybe","./gamepad/GamepadSource","../support/screenUtils"],function(f,c,h,b,u){const k=c("edge"),p=c("chrome"),l=c("ff"),m=c("safari");class a{constructor(n,t){this._input=t;this._active={};this._callback=()=>{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=n;n.getAttribute("tabindex")||n.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new b.GamepadSource(n,this._input);this._gamepadSource.onEvent=v=>this._callback("gamepad",v)}destroy(){this._callback=()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(n=>{this._releasePointerCaptureSafe(n)});this._gamepadSource=h.destroyMaybe(this._gamepadSource);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(n){this._browserTouchPanningEnabled=
n;this._updateTouchAction();this._updateTouchEventHandling()}set onEventReceived(n){this._callback=n}set activeEvents(n){for(const t in this._active)n&&n.has(t)||(this._element.removeEventListener(e[t],this._active[t]),delete this._active[t]);n&&n.forEach(t=>{if(!this._active[t]&&e[t]){const v=(this._eventHandlers[t]||this._handleDefault).bind(this,t);this._element.addEventListener(e[t],v);this._active[t]=v}});this._gamepadSource.hasEventListeners=n?.has("gamepad")??!1}setPointerCapture(n,t){t?this._setPointerCatpureSafe(n.pointerId):
(this._releasePointerCaptureSafe(n.pointerId),this._activePointerCaptures.delete(n.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(n){try{this._element.setPointerCapture(n),this._activePointerCaptures.add(n)}catch{}}_releasePointerCaptureSafe(n){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(n)||
this._element.releasePointerCapture(n)}catch(t){}}_updateNormalizedPointerLikeEvent(n,t){n=u.createScreenPointFromNativeEvent(this._element,n);a.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y));t.x=n.x;t.y=n.y;return t}_handleKey(n,t){const {key:v}=t;v&&"key-up"===n&&this._keyDownState.delete(v);t={native:t,key:v,repeat:!!v&&this._keyDownState.has(v)};v&&"key-down"===n&&this._keyDownState.add(t.key);this._callback(n,t)}_handlePointer(n,t){t=this._updateNormalizedPointerLikeEvent(t,
{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});this._callback(n,t)}_handlePointerPreventDefault(n,t){const v=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,pointerType:t.pointerType,button:t.button,buttons:t.buttons,eventId:this._eventId++});t.preventDefault();this._callback(n,v)}_handleMouseWheel(n,t){let v=t.deltaY;switch(t.deltaMode){case 0:k&&(v=v/document.documentElement.clientHeight*600);break;case 1:v*=30;break;case 2:v*=
900}k?v*=.7:p||m?v*=.6:l&&(v*=1.375);const r=Math.abs(v);100<r&&(v=v/r*200/(1+Math.exp(-.02*(r-100))));t=this._updateNormalizedPointerLikeEvent(t,{native:t,x:0,y:0,deltaY:v});this._callback(n,t)}_handlePointerCaptureLost(n,t){this._activePointerCaptures.delete(t.pointerId);this._handleDefault(n,t)}_handleDefault(n,t){const v={native:t};t.preventDefault();this._callback(n,v)}_preventAltKeyDefault(n){"Alt"===n.key&&n.preventDefault()}_preventMultiTouchPanning(n){1<n.touches.length&&n.preventDefault()}}
a.test={disableSubpixelCoordinates:!1};const e={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};f.BrowserEventSource=a;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},
"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(f,c,h,b){class u{constructor(k,p){this._element=k;this._input=p;this._hasEventListeners=!1;this._onConnectGamepad=l=>{this._connectGamepad(l.gamepad)};this._onDisconnectGamepad=l=>{l=l.gamepad;const m=l.index,a=this._inputDevices[m];a&&(this._emitGamepadEvent(l,b.extractState(a),!1),this._inputDevices.splice(m,1),this._latestUpdate.splice(m,1),this._input.gamepad.devices.remove(a),
this.ensurePollingState())};this._frameTask=null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;k=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&k)this._forEachGamepad(l=>this._connectGamepad(l)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}destroy(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",
this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(k){this._hasEventListeners!==k&&(this._hasEventListeners=k,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}set onEvent(k){this._callback=k}_connectGamepad(k){const p=new h(k);"unknown"!==p.deviceType&&(this._inputDevices[k.index]=p,this._input.gamepad.devices.add(p));this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?
this._startPolling():this._stopPolling()}_startPolling(){null==this._frameTask&&(this._frameTask=c.addFrameTask({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])}_readGamepadState(){const k=document.hasFocus(),p=this._element.contains(document.activeElement),l="document"===this._input.gamepad.enabledFocusMode&&!k||"view"===this._input.gamepad.enabledFocusMode&&!p;this._forEachGamepad(m=>{var a=this._inputDevices[m.index];
if(a){var e=this._latestUpdate[m.index];a=b.extractState(a);var n=l||b.stateIdle(a);e&&(e.timestamp===m.timestamp||!e.active&&n||b.stateEqual(e.state,a))||this._emitGamepadEvent(m,a,!n)}})}_forEachGamepad(k){const p=window.navigator.getGamepads();for(let l=0;l<p.length;l++){const m=p[l];this._validate(m)&&k(m)}}_emitGamepadEvent(k,p,l){var m=this._latestUpdate[k.index];if((m=m&&m.active)||l)this._latestUpdate[k.index]={timestamp:k.timestamp,state:p,active:l},this._callback&&this._callback({device:this._inputDevices[k.index],
state:p,action:!m&&l?"start":m&&l?"update":"end"})}_validate(k){if(!k||!k.connected)return!1;for(let p=0;p<k.axes.length;p++)if(isNaN(k.axes[p]))return!1;return!0}}f.GamepadSource=u;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],function(f){f.extractState=function(c){const h=c.native;return h?{buttons:h.buttons.map(b=>b.pressed?b.value||1:0),axes:h.axes.map(b=>{{var u=c.axisThreshold;const k=Math.abs(b);b=k<u?0:
Math.sign(b)*(k-u)/(1-u)}return b})}:{buttons:[],axes:[]}};f.stateEqual=function(c,h){if(c.axes.length!==h.axes.length||c.buttons.length!==h.buttons.length)return!1;for(var b=0;b<c.axes.length;b++)if(c.axes[b]!==h.axes[b])return!1;for(b=0;b<c.buttons.length;b++)if(c.buttons[b]!==h.buttons[b])return!1;return!0};f.stateIdle=function(c){for(var h=0;h<c.axes.length;h++)if(0!==c.axes[h])return!1;for(h=0;h<c.buttons.length;h++)if(0!==c.buttons[h])return!1;return!0};Object.defineProperty(f,Symbol.toStringTag,
{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../InputHandler"],function(f,c){class h extends c.InputHandler{constructor(){super(!0);this.registerIncoming("context-menu",b=>{b.data.native.preventDefault()})}}f.PreventContextMenu=h;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./support".split(" "),
function(f,c,h,b,u,k,p,l){class m extends p.InputHandler{constructor(a=l.DefaultParameters.maximumDoubleClickDelay,e=l.DefaultParameters.maximumDoubleClickDistance,n=l.DefaultParameters.maximumDoubleTouchDelay,t=l.DefaultParameters.maximumDoubleTouchDistance,v=c.clock){super(!1);this._maximumDoubleClickDelay=a;this._maximumDoubleClickDistance=e;this._maximumDoubleTouchDelay=n;this._maximumDoubleTouchDistance=t;this._clock=v;this._doubleTapDragActive=this._doubleTapDragReady=!1;this._dragStartCenter=
u.createScreenPoint(0,0);this._pointerState=new Map;this._doubleTapDrag=this.registerOutgoing("double-tap-drag");this._dragEventSeparator=new k.DragEventSeparator({start:(r,g)=>this._dragStart(r,g),update:(r,g)=>this._dragUpdate(g),end:(r,g)=>this._dragEnd(g)});this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r));this.registerIncoming("pointer-down",r=>this._handlePointerDown(r));this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(a=>
{a.doubleTapTimeout=b.removeMaybe(a.doubleTapTimeout)})}get hasPendingInputs(){return h.someMap(this._pointerState,a=>null!=a.doubleTapTimeout)}_clearPointerDown(a){const e=this._pointerState.get(a);e&&(e.doubleTapTimeout=b.removeMaybe(e.doubleTapTimeout),this._pointerState.delete(a),this.refreshHasPendingInputs())}_createDoubleTapDragData(a,e,n){const {button:t,buttons:v,pointer:r,pointers:g,pointerType:w,timestamp:B}=n;return{action:a,delta:e,button:t,buttons:v,pointer:r,pointers:g,pointerType:w,
timestamp:B}}_dragStart(a,e){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:n,modifiers:t}=e;({center:a}=n);this._dragStartCenter=a;a=this._createDoubleTapDragData("begin",u.createScreenPoint(0,0),n);this._doubleTapDrag.emit(a,void 0,t);e.stopPropagation()}}_dragUpdate(a){if(this._doubleTapDragActive){var {data:e,modifiers:n}=a,{center:t}=e;t=u.createScreenPoint(t.x-this._dragStartCenter.x,t.y-this._dragStartCenter.y);t=this._createDoubleTapDragData("update",
t,e);this._doubleTapDrag.emit(t,void 0,n);a.stopPropagation()}}_dragEnd(a){if(this._doubleTapDragActive){var {data:e,modifiers:n}=a,{center:t}=e;t=u.createScreenPoint(t.x-this._dragStartCenter.x,t.y-this._dragStartCenter.y);t=this._createDoubleTapDragData("end",t,e);this._doubleTapDrag.emit(t,void 0,n);this._doubleTapDragActive=!1;a.stopPropagation()}}_handlePointerDown(a){const {data:e}=a,n=l.getPointerId(e),t=this._pointerState.get(n);var {pointerType:v}=e.native;t?(v="touch"===v?this._maximumDoubleTouchDistance:
this._maximumDoubleClickDistance,this._clearPointerDown(n),l.manhattanDistance(t.event.data,e)>v?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(a){var {data:e}=a;const {pointerType:n}=e.native,t=l.getPointerId(e);e=this._clock.setTimeout(()=>this._clearPointerDown(t),"touch"===n?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(t,{event:a,doubleTapTimeout:e});this.refreshHasPendingInputs()}}
f.DoubleTapDrag=m;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(f,c){f.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};f.euclideanDistance=function(h,b){const u=b.x-h.x;h=b.y-h.y;
return Math.sqrt(u*u+h*h)};f.fitCircleLSQ=function(h,b){b?(b.radius=0,b.center.x=0,b.center.y=0):b={radius:0,center:c.createScreenPoint()};if(0===h.length)return b;if(1===h.length)return b.center.x=h[0].x,b.center.y=h[0].y,b;if(2===h.length){const [g,w]=h,[B,A]=[w.x-g.x,w.y-g.y];b.radius=Math.sqrt(B*B+A*A)/2;b.center.x=(g.x+w.x)/2;b.center.y=(g.y+w.y)/2;return b}let u=0,k=0;for(b=0;b<h.length;b++)u+=h[b].x,k+=h[b].y;u/=h.length;k/=h.length;var p=h.map(g=>g.x-u),l=h.map(g=>g.y-k);let m=b=0;var a=0,
e=0,n=0,t=0,v=0;for(var r=0;r<p.length;r++){const g=p[r],w=l[r],B=g*g,A=w*w;b+=B;m+=A;a+=g*w;e+=B*g;n+=A*w;t+=g*A;v+=w*B}p=b;l=a;r=m;e=.5*(e+t);n=.5*(n+v);v=p*r-a*l;t=(e*r-n*l)/v;n=(p*n-a*e)/v;v=c.createScreenPoint(t+u,n+k);return{radius:Math.sqrt(t*t+n*n+(b+m)/h.length),center:v}};f.getPointerId=function(h){({native:h}=h);const {pointerId:b,button:u,pointerType:k}=h;return"mouse"===k?`${b}:${u}`:`${k}`};f.manhattanDistance=function(h,b){return Math.abs(b.x-h.x)+Math.abs(b.y-h.y)};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define(["exports","../../../core/screenUtils","../../../core/time","../InputHandler","./support"],function(f,c,h,b,u){function k(e){const n=[];e.forEach(t=>{n.push(c.createScreenPoint(t.event.x,t.event.y))});return u.fitCircleLSQ(n)}function p(e){const n=k(e);let t=0;e.forEach(v=>{var r=m(v,n);for(r-=v.lastAngle;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;r=v.lastAngle+r;v.lastAngle=r;t+=r-v.initialAngle});
t/=e.size||1;return{angle:t,radius:n.radius,center:n.center}}function l(e){const n=new Map;e.forEach((t,v)=>n.set(v,t.event));return n}function m(e,n){e=e.event;return Math.atan2(e.y-n.center.y,e.x-n.center.x)}class a extends b.InputHandler{constructor(e){super(!1);this._navigationTouch=e;this._startStateModifiers=new Set;this._activePointerMap=new Map;this._isCurrentDragSuppressed=this._isDragging=!1;this._drag=this.registerOutgoing("drag");this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this));
this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,n,t,v){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:v,pointers:l(this._activePointerMap),pointer:n,angle:t.angle,radius:t.radius,center:t.center}}_addPointer(e){var n=
e.native.pointerId;const t=p(this._activePointerMap).angle;e={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,e);n=m(e,k(this._activePointerMap));e.initialAngle=n;e.lastAngle=n;this._updatePointerAngles(t)}_updatePointer(e){if(!e||null!=e.x||null!=e.y){var n=this._activePointerMap.get(e.native.pointerId);n?n.event=e:this._addPointer(e)}}_removePointer(e){const n=p(this._activePointerMap).angle;this._activePointerMap.delete(e);this._updatePointerAngles(n)}_updatePointerAngles(e){const n=
p(this._activePointerMap);this._activePointerMap.forEach(t=>{t.initialAngle=m(t,n)-e;t.lastAngle=m(t,n)-e})}_emitEvent(e,n,t){const v=p(this._activePointerMap);this._drag.emit(this._createPayload(e,n,v,t),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const n=e.data.native.pointerId,t=h.Milliseconds(e.timestamp);this._activePointerMap.get(n)&&(1===this._activePointerMap.size?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,t),this._isCurrentDragSuppressed=
this._isDragging=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",e.data,h.Milliseconds(e.timestamp))))}_handlePointerDrag(e){const n=e.data,t=n.currentEvent,v=h.Milliseconds(e.timestamp);switch(n.action){case "start":case "update":this._isDragging?this._activePointerMap.has(t.native.pointerId)?(this._updatePointer(t),!this._isCurrentDragSuppressed&&this._emitEvent("update",t,v)):(this._addPointer(t),this._emitEvent("added",t,v),this._isCurrentDragSuppressed=this._isSuppressed):
(this._updatePointer(t),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",t,v))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&"touch"===this._pointerType&&1===this._activePointerMap.size}}f.Button=void 0;(function(e){e[e.Left=0]="Left";e[e.Middle=
1]="Middle";e[e.Right=2]="Right";e[e.Back=3]="Back";e[e.Forward=4]="Forward";e[e.Undefined=-1]="Undefined"})(f.Button||(f.Button={}));f.Drag=a;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define(["exports","../../../core/clock","../InputHandler","./support"],function(f,c,h,b){class u extends h.InputHandler{constructor(k=b.DefaultParameters.maximumDoubleClickDelay,p=b.DefaultParameters.maximumDoubleClickDistance,l=b.DefaultParameters.maximumDoubleTouchDelay,
m=b.DefaultParameters.maximumDoubleTouchDistance,a=c.clock){super(!1);this._maximumDoubleClickDelay=k;this._maximumDoubleClickDistance=p;this._maximumDoubleTouchDelay=l;this._maximumDoubleTouchDistance=m;this._clock=a;this._pointerState=new Map;this._immediateDoubleClick=this.registerOutgoing("immediate-double-click");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(k=>
{k.immediateDoubleClick&&k.immediateDoubleClick.timeoutHandle.remove()});super.onUninstall()}_handlePointerDown(k){k=k.data;const p=b.getPointerId(k);this._pointerState.has(p)||(this._pointerState.set(p,{downButton:k.native.button,x:k.x,y:k.y,immediateDoubleClick:null}),this.startCapturingPointer(k.native))}_handlePointerUp(k){const p=k.data;var l=b.getPointerId(p);if((l=this._pointerState.get(l))&&l.downButton===p.native.button){const m=l.immediateDoubleClick,a="touch"===k.data.native.pointerType?
this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;m?(m.timeoutHandle.remove(),b.manhattanDistance(m,k.data)>a?this._startImmediateDoubleClick(k,l):(this._immediateDoubleClick.emit(k.data,void 0,m.modifiers),this._removeState(p))):b.manhattanDistance(l,k.data)>a?this._removeState(p):this._startImmediateDoubleClick(k,l)}}_startImmediateDoubleClick(k,p){p.immediateDoubleClick={x:k.data.x,y:k.data.y,modifiers:k.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(k.data),
"touch"===k.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}}_removeState(k){const p=b.getPointerId(k);this._pointerState.delete(p);this.stopCapturingPointer(k.native);this.refreshHasPendingInputs()}}f.ImmediateDoubleClick=u;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../core/clock","../../../core/maybe","../InputHandler","./support"],function(f,c,h,b,
u){class k extends b.InputHandler{constructor(p=u.DefaultParameters.maximumClickDelay,l=u.DefaultParameters.movementUntilMouseDrag,m=u.DefaultParameters.movementUntilPenDrag,a=u.DefaultParameters.movementUntilTouchDrag,e=u.DefaultParameters.holdDelay,n=c.clock){super(!1);this._maximumClickDelay=p;this._movementUntilMouseDrag=l;this._movementUntilPenDrag=m;this._movementUntilTouchDrag=a;this._holdDelay=e;this._clock=n;this._pointerState=new Map;this._pointerDrag=this.registerOutgoing("pointer-drag");
this._immediateClick=this.registerOutgoing("immediate-click");this._pointerHold=this.registerOutgoing("hold");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));this.registerIncoming("pointer-up",t=>{this._handlePointerLoss(t,"pointer-up")});this.registerIncoming("pointer-capture-lost",t=>{this._handlePointerLoss(t,"pointer-capture-lost")});this.registerIncoming("pointer-cancel",t=>{this._handlePointerLoss(t,"pointer-cancel")});this._moveHandle=this.registerIncoming("pointer-move",
this._handlePointerMove.bind(this));this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(p=>{p.holdTimeout=h.removeMaybe(p.holdTimeout)});super.onUninstall()}_handlePointerDown(p){const l=p.data,m=l.native.pointerId;var a=null;0===this._pointerState.size&&(a=this._clock.setTimeout(()=>{const e=this._pointerState.get(m);e&&(e.isDragging||(this._pointerHold.emit(e.previousEvent,void 0,p.modifiers),e.holdEmitted=!0),e.holdTimeout=null)},this._holdDelay));a={startEvent:l,previousEvent:l,
startTimestamp:p.timestamp,isDragging:!1,downButton:l.native.button,holdTimeout:a,modifiers:new Set};this._pointerState.set(m,a);this.startCapturingPointer(l.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(p)}_createPointerDragData(p,l,m){return{action:p,startEvent:l.startEvent,previousEvent:l.previousEvent,currentEvent:m}}_handlePointerMove(p){const l=p.data,m=this._pointerState.get(l.native.pointerId);if(m){if(m.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",
m,l),void 0,m.modifiers);else{const a=u.euclideanDistance(l,m.startEvent),e=this._getDragThreshold(l.native.pointerType);a>e&&this._startDragging(p)}m.previousEvent=l}}_getDragThreshold(p){switch(p){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(p){const l=p.data,m=l.native.pointerId;this._pointerState.forEach(a=>{null!=a.holdTimeout&&(a.holdTimeout.remove(),a.holdTimeout=null);a.isDragging||
(a.modifiers=p.modifiers,a.isDragging=!0,m===a.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",a,l)):this._pointerDrag.emit(this._createPointerDragData("start",a,a.previousEvent),p.timestamp))})}_handlePointerLoss(p,l){const m=p.data,a=m.native.pointerId,e=this._pointerState.get(a);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===l?m:e.previousEvent),void 0,
e.modifiers):"pointer-up"===l&&e.downButton===m.native.button&&p.timestamp-e.startTimestamp<=this._maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(m),this._pointerState.delete(a),this.stopCapturingPointer(m.native),0===this._pointerState.size&&this._moveHandle.pause())}}f.PointerClickHoldAndDrag=k;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../core/clock ../../../core/MapUtils ../../../core/maybe ../InputHandler ./support".split(" "),
function(f,c,h,b,u,k){class p extends u.InputHandler{constructor(l=k.DefaultParameters.maximumDoubleClickDelay,m=k.DefaultParameters.maximumDoubleClickDistance,a=k.DefaultParameters.maximumDoubleTouchDelay,e=k.DefaultParameters.maximumDoubleTouchDistance,n=c.clock){super(!1);this._maximumDoubleClickDelay=l;this._maximumDoubleClickDistance=m;this._maximumDoubleTouchDelay=a;this._maximumDoubleTouchDistance=e;this._clock=n;this._pointerState=new Map;this._click=this.registerOutgoing("click");this._doubleClick=
this.registerOutgoing("double-click");this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this));this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(l=>l.doubleClickTimer=b.removeMaybe(l.doubleClickTimer))}get hasPendingInputs(){return h.someMap(this._pointerState,l=>null!=l.doubleClickTimer)}_clearDoubleClickTimer(l,m){const a=this._pointerState.get(l);a&&(a.doubleClickTimer=b.removeMaybe(a.doubleClickTimer),m&&this._click.emit(a.event.data,
void 0,a.event.modifiers),this._pointerState.delete(l),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(l){const m=this._pointerState.get(l);1===m.pointerDownCount&&this._click.emit(m.event.data,void 0,m.event.modifiers);m.doubleClickTimer=null;this._pointerState.delete(l);this.refreshHasPendingInputs()}_getPointerId(l){const {pointerId:m,pointerType:a,button:e}=l.native;return"mouse"===a?`${m}:${e}`:`${a}`}_handleImmediateClick(l){const m=l.data;var {pointerType:a}=m.native;const e=this._getPointerId(m);
if(this._pointerState.has(e)){var n=this._pointerState.get(e),{data:t,modifiers:v}=n.event;a="touch"===a?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;k.manhattanDistance(t,m)>a?(this._clearDoubleClickTimer(e,!0),this._startClick(l)):(this._clearDoubleClickTimer(e,!1),2===n.pointerDownCount&&this._doubleClick.emit(t,void 0,v))}else this._startClick(l)}_handlePointerDown(l){l=k.getPointerId(l.data);if(l=this._pointerState.get(l))l.pointerDownCount+=1}_startClick(l){var {data:m}=
l;const {native:{pointerType:a}}=m,e=k.getPointerId(m);m=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(e),"touch"===a?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(e,{event:l,doubleClickTimer:m,pointerDownCount:1});this.refreshHasPendingInputs()}}f.SingleAndDoubleClick=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ../../../../../geometry/support/aaBoundingRect ../../../../../geometry/support/spatialReferenceUtils ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(f,c,h,b,u,k,p,l){const m={added:[],removed:[]},a=new Set,e=new l(0,0,0,0);class n extends f{constructor(t){super();this._tiles=new Map;this._index=h.rbush(9,c("esri-csp-restrictions")?v=>({minX:v.bounds[0],minY:v.bounds[1],maxX:v.bounds[2],maxY:v.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this.tiles=[];this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0;this._tiles.clear();this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||
0===b.width(t)||0===b.height(t))return[];var v;if(v=u.getInfo(this.tileScheme.spatialReference)){var [r,g]=v.valid;v=t[2]>g?[b.create([t[0],t[1],g,t[3]]),b.create([r,t[1],r+t[2]-g,t[3]])]:t[0]<r?[b.create([r,t[1],t[2],t[3]]),b.create([g-(r-t[0]),t[1],g,t[3]])]:null}else v=null;return null!=v?[...(new Set([...this.boundsIntersections(v[0]),...this.boundsIntersections(v[1])]))]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const v=
{added:[],removed:[]};for(const r of t.added)if(!this.has(r)){const g=new k.Tile(this.tileScheme,r);this._tiles.set(r,g);this._index.insert(g);v.added.push(g)}for(const r of t.removed)this.has(r)&&(t=this.get(r),this._tiles.delete(r),this._index.remove(t),v.removed.push(t));this.tiles.length=0;this._tiles.forEach(r=>this.tiles.push(r));(v.added.length||v.removed.length)&&this.emit("update",v)}setViewState(t){if(t=this.tileScheme.getTileCoverage(t,0)){var {spans:v,lodInfo:r}=t,{level:g}=r;if(0<v.length)for(const {row:B,
colFrom:A,colTo:d}of v)for(var w=A;w<=d;w++){const x=e.set(g,B,r.normalizeCol(w),r.getWorldForColumn(w)).id;a.add(x);if(!this.has(x)){const q=new k.Tile(this.tileScheme,x);this._tiles.set(x,q);this._index.insert(q);this.tiles.push(q);m.added.push(q)}}for(g=this.tiles.length-1;0<=g;g--)w=this.tiles[g],a.has(w.id)||(this._tiles.delete(w.id),this.tiles.splice(g,1),this._index.remove(w),m.removed.push(w));(m.added.length||m.removed.length)&&this.emit("update",m);p.pool.release(t);a.clear();m.added.length=
0;m.removed.length=0}}}return n})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(f,c){function h(r,g){if(!(this instanceof h))return new h(r,g);this._maxEntries=Math.max(4,r||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));g&&("function"===typeof g?this.toBBox=g:this._initFormat(g));this.clear()}function b(r,g){u(r,0,r.children.length,g,r)}function u(r,g,w,B,A){A||=t(null);A.minX=Infinity;A.minY=Infinity;A.maxX=-Infinity;A.maxY=-Infinity;for(var d;g<w;g++)d=
r.children[g],k(A,r.leaf?B(d):d);return A}function k(r,g){r.minX=Math.min(r.minX,g.minX);r.minY=Math.min(r.minY,g.minY);r.maxX=Math.max(r.maxX,g.maxX);r.maxY=Math.max(r.maxY,g.maxY);return r}function p(r,g){return r.minX-g.minX}function l(r,g){return r.minY-g.minY}function m(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function a(r){return r.maxX-r.minX+(r.maxY-r.minY)}function e(r,g){return r.minX<=g.minX&&r.minY<=g.minY&&g.maxX<=r.maxX&&g.maxY<=r.maxY}function n(r,g){return g.minX<=r.maxX&&g.minY<=
r.maxY&&g.maxX>=r.minX&&g.maxY>=r.minY}function t(r){return{children:r,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function v(r,g,w,B,A){for(var d=[g,w],x;d.length;)w=d.pop(),g=d.pop(),w-g<=B||(x=g+Math.ceil((w-g)/B/2)*B,c.quickselect(r,x,g,w,A),d.push(g,x,x,w))}h.prototype={all:function(){return this._all(this.data,[])},search:function(r){var g=this.data,w=[],B=this.toBBox;if(!n(r,g))return w;for(var A=[],d,x,q,z;g;){d=0;for(x=g.children.length;d<x;d++)q=g.children[d],
z=g.leaf?B(q):q,n(r,z)&&(g.leaf?w.push(q):e(r,z)?this._all(q,w):A.push(q));g=A.pop()}return w},collides:function(r){var g=this.data,w=this.toBBox;if(!n(r,g))return!1;for(var B=[],A,d,x,q;g;){A=0;for(d=g.children.length;A<d;A++)if(x=g.children[A],q=g.leaf?w(x):x,n(r,q)){if(g.leaf||e(r,q))return!0;B.push(x)}g=B.pop()}return!1},load:function(r){if(!r||!r.length)return this;if(r.length<this._minEntries){for(var g=0,w=r.length;g<w;g++)this.insert(r[g]);return this}r=this._build(r.slice(),0,r.length-1,
0);this.data.children.length?this.data.height===r.height?this._splitRoot(this.data,r):(this.data.height<r.height&&(g=this.data,this.data=r,r=g),this._insert(r,this.data.height-r.height-1,!0)):this.data=r;return this},insert:function(r){null!=r&&this._insert(r,this.data.height-1);return this},clear:function(){this.data=t([]);return this},remove:function(r,g){if(null==r)return this;for(var w=this.data,B=this.toBBox(r),A=[],d=[],x,q,z,E;w||A.length;){w||(w=A.pop(),q=A[A.length-1],x=d.pop(),E=!0);if(w.leaf){a:{z=
r;var G=w.children,M=g;if(M){for(var L=0;L<G.length;L++)if(M(z,G[L])){z=L;break a}z=-1}else z=G.indexOf(z)}if(-1!==z){w.children.splice(z,1);A.push(w);this._condense(A);break}}E||w.leaf||!e(w,B)?q?(x++,w=q.children[x],E=!1):w=null:(A.push(w),d.push(x),x=0,q=w,w=w.children[0])}return this},toBBox:function(r){return r},compareMinX:p,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(r){this.data=r;return this},_all:function(r,g){for(var w=[];r;)r.leaf?g.push.apply(g,r.children):w.push.apply(w,
r.children),r=w.pop();return g},_build:function(r,g,w,B){var A=w-g+1,d=this._maxEntries;if(A<=d){var x=t(r.slice(g,w+1));b(x,this.toBBox);return x}B||(B=Math.ceil(Math.log(A)/Math.log(d)),d=Math.ceil(A/Math.pow(d,B-1)));x=t([]);x.leaf=!1;x.height=B;A=Math.ceil(A/d);d=A*Math.ceil(Math.sqrt(d));var q;for(v(r,g,w,d,this.compareMinX);g<=w;g+=d){var z=Math.min(g+d-1,w);v(r,g,z,A,this.compareMinY);for(q=g;q<=z;q+=A){var E=Math.min(q+A-1,z);x.children.push(this._build(r,q,E,B-1))}}b(x,this.toBBox);return x},
_chooseSubtree:function(r,g,w,B){for(var A,d,x,q,z,E,G,M;;){B.push(g);if(g.leaf||B.length-1===w)break;G=M=Infinity;A=0;for(d=g.children.length;A<d;A++)x=g.children[A],z=m(x),E=(Math.max(x.maxX,r.maxX)-Math.min(x.minX,r.minX))*(Math.max(x.maxY,r.maxY)-Math.min(x.minY,r.minY))-z,E<M?(M=E,G=z<G?z:G,q=x):E===M&&z<G&&(G=z,q=x);g=q||g.children[0]}return g},_insert:function(r,g,w){var B=this.toBBox;w=w?r:B(r);B=[];var A=this._chooseSubtree(w,this.data,g,B);A.children.push(r);for(k(A,w);0<=g;)if(B[g].children.length>
this._maxEntries)this._split(B,g),g--;else break;this._adjustParentBBoxes(w,B,g)},_split:function(r,g){var w=r[g],B=w.children.length,A=this._minEntries;this._chooseSplitAxis(w,A,B);B=this._chooseSplitIndex(w,A,B);B=t(w.children.splice(B,w.children.length-B));B.height=w.height;B.leaf=w.leaf;b(w,this.toBBox);b(B,this.toBBox);g?r[g-1].children.push(B):this._splitRoot(w,B)},_splitRoot:function(r,g){this.data=t([r,g]);this.data.height=r.height+1;this.data.leaf=!1;b(this.data,this.toBBox)},_chooseSplitIndex:function(r,
g,w){var B,A;var d=A=Infinity;for(B=g;B<=w-g;B++){var x=u(r,0,B,this.toBBox);var q=u(r,B,w,this.toBBox);var z=Math.max(0,Math.min(x.maxX,q.maxX)-Math.max(x.minX,q.minX))*Math.max(0,Math.min(x.maxY,q.maxY)-Math.max(x.minY,q.minY));x=m(x)+m(q);if(z<d){d=z;var E=B;A=x<A?x:A}else z===d&&x<A&&(A=x,E=B)}return E},_chooseSplitAxis:function(r,g,w){var B=r.leaf?this.compareMinX:p,A=r.leaf?this.compareMinY:l,d=this._allDistMargin(r,g,w,B);g=this._allDistMargin(r,g,w,A);d<g&&r.children.sort(B)},_allDistMargin:function(r,
g,w,B){r.children.sort(B);B=this.toBBox;var A=u(r,0,g,B),d=u(r,w-g,w,B),x=a(A)+a(d),q;for(q=g;q<w-g;q++){var z=r.children[q];k(A,r.leaf?B(z):z);x+=a(A)}for(q=w-g-1;q>=g;q--)z=r.children[q],k(d,r.leaf?B(z):z),x+=a(d);return x},_adjustParentBBoxes:function(r,g,w){for(;0<=w;w--)k(g[w],r)},_condense:function(r){for(var g=r.length-1,w;0<=g;g--)0===r[g].children.length?0<g?(w=r[g-1].children,w.splice(w.indexOf(r[g]),1)):this.clear():b(r[g],this.toBBox)},_initFormat:function(r){var g=["return a"," - b",
";"];this.compareMinX=new Function("a","b",g.join(r[0]));this.compareMinY=new Function("a","b",g.join(r[1]));this.toBBox=new Function("a","return {minX: a"+r[0]+", minY: a"+r[1]+", maxX: a"+r[2]+", maxY: a"+r[3]+"};")}};f.rbush=h})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(f,c){var h={exports:{}};(function(b){(function(u){u=u();void 0!==u&&(b.exports=u)})(function(){function u(l,m,a,e,n){for(;e>a;){if(600<e-a){var t=e-a+1,v=m-a+1,r=Math.log(t),g=.5*Math.exp(2*
r/3);r=.5*Math.sqrt(r*g*(t-g)/t)*(0>v-t/2?-1:1);u(l,m,Math.max(a,Math.floor(m-v*g/t+r)),Math.min(e,Math.floor(m+(t-v)*g/t+r)),n)}t=l[m];v=a;g=e;k(l,a,m);for(0<n(l[e],t)&&k(l,a,e);v<g;){k(l,v,g);v++;for(g--;0>n(l[v],t);)v++;for(;0<n(l[g],t);)g--}0===n(l[a],t)?k(l,a,g):(g++,k(l,g,e));g<=m&&(a=g+1);m<=g&&(e=g-1)}}function k(l,m,a){var e=l[m];l[m]=l[a];l[a]=e}function p(l,m){return l<m?-1:l>m?1:0}return function(l,m,a,e,n){u(l,m,a||0,e||l.length-1,n||p)}})})(h);c=c.getDefaultExportFromCjs(h.exports);
f.quickselect=c})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ../../../tiling/TileKey".split(" "),function(f,c,h,b,u,k){class p{constructor(l,m){this.key=new k(0,0,0,0);this.bounds=b.create();this.objectIds=new Set;this.key.set(m);m=l.getLODInfoAt(this.key);this.tileInfoView=l;this.tileInfoView.getTileBounds(this.bounds,
this.key,!0);this.resolution=m.resolution;this.scale=m.scale;this.level=m.level}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return h.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}get arcadeEvaluationOptions(){return{$view:{scale:this.scale}}}createChildTiles(){const l=this.key.getChildKeys(),
m=c.acquire();for(let a=0;a<l.length;a++)m[a]=new p(this.tileInfoView,l[a]);return m}getQuantizationParameters(){return u.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}f.Tile=p;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/hitTestUtils":function(){define(["exports","../../../Graphic",
"../../../core/arrayUtils","../../../core/iteratorUtils","../../support/screenUtils"],function(f,c,h,b,u){function k(a,e,n,t,v,r){return g=>{if(g instanceof c){if(g.layer===a)r?.();else{var w=a.allLayerViews.find(B=>B.layer===g.layer);w&&v?.(w)}t(l(g))}else"subtype-sublayer"===g.type?(w=a.allLayerViews.find(B=>B.layer===g.parent))&&n(g,w):(w=a.allLayerViews.find(B=>B.layer===g))&&e(w)}}function p(a,e){if(a)if(b.isIterable(a))for(const n of a)if(b.isIterable(n))for(const t of n)e(t);else e(n);else e(a)}
function l(a){const e=a.getObjectId();return e?`${a.layer?.uid??a.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${a.uid}`}function m({layer:a},e){"subtype-group"===a.type&&a.sublayers.forEach(n=>{e(n)})}f.hitTest=async function(a,e,n){const t=u.isSupportedScreenPointEvent(e)?u.createScreenPointFromSupportedEvent(a,e):e;if(!a.ready||isNaN(t.x)||isNaN(t.y))return{screenPoint:t,results:[]};let v=new Set;const r=new Set;let g=!1,w=null,B=null;n?.include?p(n.include,k(a,d=>{v.add(d);m(d,x=>r.add(x))},(d,
x)=>{r.add(d);v.add(x)},d=>{w||=new Set;w.add(d)},d=>v.add(d),()=>g=!0)):(g=!0,v=new Set(a.allLayerViews),v.forEach(d=>{m(d,x=>r.add(x))}));n?.exclude&&p(n.exclude,k(a,d=>{v.delete(d);m(d,x=>r.delete(x))},d=>r.delete(d),d=>{B||=new Set;B.add(d)}));e=a.allLayerViews.filter(d=>!d.suspended&&v.has(d)).reverse();const A=a.toMap(t);a=g?a.graphicsView.hitTest(A).map(d=>({type:"graphic",graphic:d,layer:null,mapPoint:A})):[];e=await Promise.all(e.map(d=>d.hitTest(A,t)).toArray());a=[...a,...e].filter(h.isSome).flat().filter(h.isSome);
a=a.filter(d=>"graphic"===d.type&&"subtype-group"===d.layer?.type?r.has(d.graphic.layer):!0);w&&(a=a.filter(d=>!("graphic"in d)||!d.graphic||w?.has(l(d.graphic))));B&&(a=a.filter(d=>!("graphic"in d)||!d.graphic||!B?.has(l(d.graphic))));return{screenPoint:t,results:a}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/screenshotUtils":function(){define(["exports","../../support/screenshotUtils"],function(f,c){function h(p,l){const m=u(l||{},Math.min(4,c.getMaximumResolutionScale(p.size,
Math.min(4096,p.stage.context.parameters.maxTextureSize))),p.size,p.padding),a=b(l,p.allLayerViews);return p.stage.takeScreenshot(m,a,p.backgroundColor,l?.rotation)}function b(p={},l){if(p.layers){var m=[];p.layers.forEach(a=>{const e=l.find(n=>n.layer.id===a.id);e?.container&&m.push(e.container)});return m}}function u(p,l,m,a){p.ignorePadding&&(a={left:0,right:0,top:0,bottom:0});var e=null;null!=p.width&&null!=p.height?e=[p.width,p.height]:null==p.width&&null!=p.height?e=[p.height,p.height]:null!=
p.width&&null==p.height?e=[p.width,p.width]:null==p.width&&null==p.height&&(e=null);var n=m[0]-(a.left+a.right);m=m[1]-(a.top+a.bottom);p=p.area||{x:0,y:0,width:n,height:m};if(e){const t=e[0]/e[1];t>n/m?(n=p.width/t,p={x:p.x,y:Math.round(p.y+(p.height-n)/2),width:p.width,height:Math.round(n)}):(n=p.height*t,p={x:Math.round(p.x+(p.width-n)/2),y:p.y,width:Math.round(n),height:p.height})}else e=[p.width,p.height];e[0]>p.width?(l=Math.min(e[0]/p.width,l),e=e[0]/p.width/l):(l=1,e=e[0]/p.width);return{cropArea:{x:Math.round((p.x+
a.left)*l),y:Math.round((p.y+a.top)*l),width:Math.round(p.width*l),height:Math.round(p.height*l)},outputScale:e,resolutionScale:l}}const k={flipY:!0,premultipliedAlpha:!0};f.createScreenshotRegion=u;f.takeRawScreenshot=async function(p,l){p=await h(p,l);return c.encodeData(p,k)};f.takeScreenshot=async function(p,l){p=await h(p,l);const {format:m,quality:a}=c.getFormatAndQuality(l?.format,l?.quality);return c.encode(p,{format:m,quality:a,rotation:0,disableDecorations:!1},k)};Object.defineProperty(f,
Symbol.toStringTag,{value:"Module"})})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils","../../core/imageUtils"],function(f,c,h,b){function u(g,w){const {format:B,quality:A,rotation:d,disableDecorations:x}=g||{};var q=a(g,w.padding);var z=w.width-q.left-q.right;w=w.height-q.top-q.bottom;q={x:0,y:0,width:z,height:w};if(g?.area){null!=g.area.x&&(q.x=Math.floor(g.area.x));null!=g.area.y&&(q.y=Math.floor(g.area.y));var E=null!=g.area.width?Math.floor(g.area.width):
null,G=null!=g.area.height?Math.floor(g.area.height):null;q.width=z-q.x;q.height=w-q.y;null!=E&&null!=G?(q.width=Math.min(q.width,E),q.height=Math.min(q.height,G)):null==E&&null!=G?(E=Math.min(q.width,E),q.height*=E/q.width,q.width=E):null!=E&&null==G&&(E=Math.min(q.height,G),q.width*=E/q.height,q.height=E)}q=m(q,g);E=Math.floor(Math.max(q.x,0));G=Math.floor(Math.max(q.y,0));z={x:E,y:G,width:Math.floor(Math.min(q.width,z-E)),height:Math.floor(Math.min(q.height,w-G))};w=z.width/z.height;q=q.width/
q.height;q!==w&&(q>w?(w=Math.floor(z.width/q),z={x:z.x,y:Math.floor(z.y+(z.height-w)/2),width:z.width,height:w}):(w=Math.floor(z.height*q),z={x:Math.floor(z.x+(z.width-w)/2),y:z.y,width:w,height:z.height}));const {width:M,height:L}=l(g,z);w=e(B);q=v[w];q=h.clamp(null!=A?A:q,0,100);return{format:w,quality:q,area:z,width:M,height:L,rotation:d,disableDecorations:!!x,ignoreBackground:!!g?.ignoreBackground,ignorePadding:!!g?.ignorePadding}}function k(g,w){null==n&&(n=document.createElement("canvas"));
var B=n;if(w.premultipliedAlpha){var A=g.data;const x=A.length;for(let q=0;q<x;q+=4){var d=A[q+3];255!==d&&0<d&&(d=255/d,A[q]*=d,A[q+1]*=d,A[q+2]*=d)}}B.width=g.width;B.height=g.height;A=B.getContext("2d",{willReadFrequently:!0});A.putImageData(g,0,0);w.flipY&&(A.save(),A.globalCompositeOperation="copy",A.scale(1,-1),A.translate(0,-A.canvas.height),A.drawImage(A.canvas,0,0),A.restore());return{ctx:A,canvas:B}}function p(g,w){return g.toDataURL(t[w.format],w.quality/100)}function l(g,w){if(!g)return w;
const B=g.width;g=g.height;if(null!=B&&null!=g)return{width:Math.floor(B),height:Math.floor(g)};if(null==B&&null==g)return w;w=w.width/w.height;return null==g?{width:Math.floor(B),height:Math.floor(B/w)}:{width:Math.floor(g*w),height:Math.floor(g)}}function m(g,w){if(null==w?.width||null==w.height)return g;w=w.width/w.height;const B=g.width/g.height;if(B===w)return g;if(B<w)return w=Math.floor(g.height*w),g.x-=(w-g.width)/2,g.width=w,g;w=Math.floor(g.width/w);g.y-=(w-g.height)/2;g.height=w;return g}
function a(g,w){return!w||g&&g.ignorePadding?r:w}function e(g){switch(g){case "png":case "jpg":case "jpeg":return g;case null:case void 0:return"png";default:return"png"}}let n=null;const t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},v={png:100,jpg:98,jpeg:98},r={top:0,right:0,bottom:0,left:0};f.createEmptyImageData=b.createEmptyImageData;f.completeUserSettings=u;f.encode=function(g,w,B){const {ctx:A,canvas:d}=k(g,B);g=A.getImageData(0,0,g.width,g.height);w=p(d,w);d.width=0;d.height=0;return{dataUrl:w,
data:g}};f.encodeData=function(g,w){const {ctx:B,canvas:A}=k(g,w);g=B.getImageData(0,0,g.width,g.height);A.width=0;A.height=0;return g};f.getFormatAndQuality=function(g,w){g=e(g);const B=v[g];w=h.clamp(null!=w?w:B,0,100);return{format:g,quality:w}};f.getMaximumResolutionScale=function(g,w){return w/Math.max(g[0],g[1])};f.resampleHermite=function(g,w,B,A=0,d=0,x=g.width-A,q=g.height-d,z=!1){const {data:E}=g,{width:G,height:M,data:L}=w;x/=G;q/=M;const P=Math.ceil(x/2),ba=Math.ceil(q/2);g=g.width;for(let fa=
0;fa<M;fa++)for(let ha=0;ha<G;ha++){const y=4*(ha+(z?M-fa-1:fa)*G);let C=0,J=0,R=0,K=0,S=0,V=0;const X=(fa+.5)*q;for(let Y=Math.floor(fa*q);Y<(fa+1)*q;Y++){var Z=Math.abs(X-(Y+.5))/ba;const aa=(ha+.5)*x;Z*=Z;for(let da=Math.floor(ha*x);da<(ha+1)*x;da++){var W=Math.abs(aa-(da+.5))/P;W=Math.sqrt(Z+W*W);if(1<=W)continue;W=2*W*W*W-3*W*W+1;const D=4*(A+da+(d+Y)*g);V+=W*E[D+3];J+=W;!B&&255>E[D+3]&&(W=W*E[D+3]/255);R+=W*E[D];K+=W*E[D+1];S+=W*E[D+2];C+=W}}L[y]=R/C;L[y+1]=K/C;L[y+2]=S/C;L[y+3]=V/J}return w};
f.screenshotSuperSampleSettings=function(g,w,B){if(!w)return g;const {framebufferWidth:A,framebufferHeight:d,pixelRatio:x,region:q}=g;w=a(g,B);B=w.left+w.right;const z=w.top+w.bottom,E=A-B,G=d-z,M=Math.min(8,Math.min((2048-B)/E,(2048-z)/G));return 1.5>M?g:{...g,framebufferWidth:Math.round(E*M)+B,framebufferHeight:Math.round(G*M)+z,pixelRatio:x*M,resample:{region:{x:Math.round((q.x-w.left)*M)+w.left,y:Math.round((q.y-w.top)*M)+w.top,width:Math.round(q.width*M),height:Math.round(q.height*M)},width:A,
height:d}}};f.toDataUrl=p;f.toRenderSettings=function(g,w){const B=u(g,w),A=B.area,d=B.width/A.width,x=a(B,w.padding),q=x.left+x.right,z=x.top+x.bottom;return{framebufferWidth:Math.floor((w.width-q)*d+q),framebufferHeight:Math.floor((w.height-z)*d+z),region:{x:Math.floor(A.x*d)+x.left,y:Math.floor(A.y*d)+x.top,width:B.width,height:B.height},format:B.format,quality:B.quality,rotation:B.rotation,pixelRatio:d,layers:g?.layers??[],disableDecorations:B.disableDecorations,ignoreBackground:B.ignoreBackground,
ignorePadding:B.ignorePadding,objectAndLayerIdColor:!1}};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/core/imageUtils":function(){define("require exports ../request ./Error ./promiseUtils ./urlUtils ../support/base64Utils".split(" "),function(f,c,h,b,u,k,p){function l(t,v,r){r||(e||(e=document.createElement("canvas"),e.width=1,e.height=1),r=e);return r.getContext("2d").createImageData(t,v)}async function m(t,v){t=window.URL.createObjectURL(t);try{const {data:r}=await h(t,
{...v,responseType:"image"});return r}catch(r){if(!u.isAbortError(r))throw new b("invalid-image",`Could not fetch requested image at ${t}`);throw r;}finally{window.URL.revokeObjectURL(t)}}async function a(t,v){const r=k.dataComponents(t);if(r?.isBase64)return{arrayBuffer:p.base64ToArrayBuffer(r.data),mediaType:r.mediaType};v=await h(t,{responseType:"array-buffer",...v});t=v.data;v=v.getHeader?.("Content-Type")??"";return{arrayBuffer:t,mediaType:v}}let e=null,n=!0;c.createEmptyImageData=function(t,
v,r){if(!t||!v)throw Error("Cannot construct image data without dimensions");if(n)try{return new ImageData(t,v)}catch(g){n=!1}return l(t,v,r)};c.getImageData=async function(t,v){const {arrayBuffer:r,mediaType:g}=await a(t,v);t="image/png"===g;if("image/gif"===g){const {isAnimatedGIF:w,parseGif:B}=await new Promise((A,d)=>f(["./image/gif"],A,d));if(w(r))return B(r,v)}if(t){const {isAnimatedPNG:w,parseApng:B}=await new Promise((A,d)=>f(["./image/apng"],A,d));if(w(r))return B(r,v)}t=new Blob([r],{type:g});
return m(t,v)};c.wrapImageData=function(t,v,r,g){if(!v||!r)throw Error("Cannot construct image data without dimensions");if(n)try{return new ImageData(t,v,r)}catch(w){n=!1}v=l(v,r,g);v.data.set(t,0);return v};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/StationaryManager":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,h,b,u,k,p,l){f.StationaryManager=class extends h{constructor(){super(...arguments);this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now();null==this._timer&&(this._timer=setInterval(()=>{160<=performance.now()-this._timestamp&&this.clear()},160))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c.__decorate([b.property()],f.StationaryManager.prototype,"_timer",void 0);c.__decorate([b.property()],f.StationaryManager.prototype,
"stationary",null);f.StationaryManager=c.__decorate([l.subclass("esri.views.2d.support.StationaryManager")],f.StationaryManager);Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(f){class c{constructor(){this._names=new Map}begin(h){this._names.has(h)||(this._names.set(h,!1),h.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${h}.Start`))}end(h){this._names.has(h)&&!this._names.get(h)&&(this._names.set(h,
!0),performance.mark(`Esri.${h}.End`))}record(h){this._names.has(h)||(this._names.set(h,!0),performance.mark(`Esri.${h}`))}}f.Timeline=c;Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(f,c,h){f.check=function(b){const u=h.getWebGLCapabilities();return u.available?"3d"===b&&u.majorPerformanceCaveat?new c("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):
u.supportsHighPrecisionFragment?u.supportsVertexShaderSamplers?null:new c("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new c("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new c("webgl:required","WebGL2 is required but not supported.",Error().stack)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports",
"./contextUtils"],function(f,c){function h(k){if("undefined"===typeof WebGL2RenderingContext)return null;var p=document.createElement("canvas");if(!p)return null;let l=c.createContext(p,{failIfMajorPerformanceCaveat:!0});null==l&&(l=c.createContext(p),null!=l&&(k.majorPerformanceCaveat=!0));if(null==l)return l;k.available=!0;k.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE);k.supportsVertexShaderSamplers=0<l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(p=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,
l.HIGH_FLOAT))k.supportsHighPrecisionFragment=0<p.precision;return l}let b;class u{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1}}f.getWebGLCapabilities=function(){if(!b){{const k=new u,p=h(k);null!=p&&(k.supportsColorBufferFloat=null!==p.getExtension("EXT_color_buffer_float"),k.supportsColorBufferFloatBlend=
null!==p.getExtension("EXT_float_blend"),k.supportsColorBufferHalfFloat=k.supportsColorBufferFloat||null!==p.getExtension("EXT_color_buffer_half_float"));b=k}}return b};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports"],function(f){f.createContext=function(c,h={}){return(c=c.getContext("webgl2",h))?c:null};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/DefaultUI":function(){define("../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t){c=class extends m{constructor(v){super(v);this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};this.components=[];this._updateViewAwareWidgets=r=>{this.components.forEach(g=>{g=this._find(g)?.widget;void 0!==g?.view&&(g.view=r)})};this._componentsWatcher=(r,g)=>{this._removeComponents(g);this._addComponents(r);this._adjustPadding(r)}}initialize(){this.addHandles([b.watch(()=>this.components,this._componentsWatcher,
b.initial),b.watch(()=>this.view,this._updateViewAwareWidgets,b.initial)])}_add(v,r,g,w,B){let A=v;if("string"===typeof v&&this._defaultPositionLookup[v]){if(this._find(v))return;A=this._createComponent(v)}super._add(A,r,g,w,B)}_removeComponents(v){v.forEach(r=>{if(r=this._find(r))this.remove(r),r.destroy()})}_adjustPadding(v){v.includes("attribution")||this._isOverridden("padding")||({top:v}=this.padding,this.padding=v)}_addComponents(v){this.constructed&&v.forEach(r=>this.add(this._createComponent(r),
this._defaultPositionLookup[r]))}_createComponent(v){const r=this._createWidget(v);return new l({id:v,node:r})}_createWidget(v){const {view:r}=this;switch(v){case "attribution":return new a({view:r});case "compass":return new e({view:r});case "navigation-toggle":return new n({view:r});case "zoom":return new t({view:r})}}};f.__decorate([u.property()],c.prototype,"components",void 0);return c=f.__decorate([p.subclass("esri.views.ui.DefaultUI")],c)})},"esri/views/ui/Component":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,h,b,u,k,p,l){c=class extends c{constructor(){super(...arguments);this.widget=null}destroy(){this.node=null;this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(m){this._set("id",m)}set node(m){const a=this._get("node");m!==a&&(m&&m.classList.add("esri-component"),a&&a.classList.remove("esri-component"),this._set("node",m))}castNode(m){this.widget?.destroy();if(!m)return this._set("widget",null),null;if("string"===typeof m||m&&"nodeType"in m)return this._set("widget",
null),h.byId(m);m&&"function"===typeof m.render&&!m.domNode&&(m.domNode=document.createElement("div"));this._set("widget",m);return m.domNode}};f.__decorate([b.property()],c.prototype,"id",null);f.__decorate([b.property()],c.prototype,"node",null);f.__decorate([u.cast("node")],c.prototype,"castNode",null);f.__decorate([b.property({readOnly:!0})],c.prototype,"widget",void 0);return c=f.__decorate([l.subclass("esri.views.ui.Component")],c)})},"esri/views/ui/UI":function(){define("../../chunks/tslib.es6 ../../intl ../../core/arrayUtils ../../core/domUtils ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v){function r(d){return 0===d?"0":`${d}px`}function g(d){const x="object"===typeof d&&null!==d&&Object.getPrototypeOf(d);return null!==x&&x!==Object.prototype||!("component"in d||"index"in d||"position"in d)?null:d}function w(d,{top:x,bottom:q,left:z,right:E}){d.style.top=x;d.style.bottom=q;d.style.left=z;d.style.right=E}const B={left:0,top:0,bottom:0,right:0},A={bottom:30,top:15,right:15,left:15};c=class extends u.EventedAccessor{constructor(d){super(d);this._cornerNameToContainerLookup=
{};this._positionNameToContainerLookup={};this._components=[];this._componentMap=new Map;this._locale=v.getLocale();this.view=null;this._applyViewPadding=()=>{const x=this.container;x&&w(x,this._toPixelPosition(this._getViewPadding()))};this._applyUIPadding=()=>{const x=this._innerContainer;x&&w(x,this._toPixelPosition(this.padding))};this._initContainers()}initialize(){this.addHandles([k.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,k.initial),k.watch(()=>this.padding,this._applyUIPadding,
k.initial),k.watch(()=>[this.container,this._locale],([d,x])=>{d&&d.setAttribute("lang",x)},k.initial),v.onLocaleChange(d=>{this._locale=d})])}destroy(){this.container=null;for(const d of this._components)d.destroy();this._components.length=0;this._componentMap.clear()}set container(d){const x=this._get("container");d!==x&&(d&&(d.classList.add("esri-ui"),e.setCalciteThemeClass(d),this._attachContainers(d)),x&&(x.classList.remove("esri-ui"),w(x,{top:"",bottom:"",left:"",right:""}),b.empty(x)),this._set("container",
d))}get height(){const d=this.view?.height??0;if(0===d)return d;const x=this._getViewPadding(),{top:q,bottom:z}=x;return Math.max(d-q-z,0)}get padding(){return this._get("padding")}set padding(d){this._overrideIfSome("padding",d)}castPadding(d){return"number"===typeof d?{bottom:d,top:d,right:d,left:d}:{...A,...d}}get width(){const d=this.view?.width??0;if(0===d)return d;const x=this._getViewPadding(),{left:q,right:z}=x;return Math.max(d-q-z,0)}add(d,x){let q,z,E;if(Array.isArray(d))d.forEach(M=>this.add(M,
x));else{var G=g(d);G&&({index:q,position:x,component:d,key:z}=G);x&&"object"===typeof x&&({index:q,key:z,position:x,internal:E}=x);!d||x&&!this._isValidPosition(x)||this._add(d,x,q,z,E)}}remove(d,x){if(d){if(Array.isArray(d))return d.map(z=>this.remove(z,x));if((d=this._find(d))&&(!this._componentMap.has(d)||this._componentMap.get(d)?.key===x)){var q=this._components.indexOf(d);d.node.parentNode?.removeChild(d.node);this._componentMap.delete(d);return this._components.splice(q,1)[0]}}}empty(d,x=
{removeInternal:!1}){if(Array.isArray(d))for(const q of d)this.empty(q,x);else{d=Array.prototype.slice.call(this._positionNameToContainerLookup[d??"manual"].children).map(q=>this._findByNode(q)).filter(q=>null==q?!1:!(this._componentMap.get(q)?.internal??!1)||x.removeInternal);for(const q of d)this.remove(q)}}move(d,x){Array.isArray(d)&&d.forEach(E=>this.move(E,x));if(d){var q=g(d)||g(x);if(q){var z=q.index;x=q.position;d=q.component||d}(!x||this._isValidPosition(x))&&(d=this.remove(d))&&this.add(d,
{position:x,index:z})}}find(d){return d?(d=this._findById(d))&&(d.widget||d.node):null}getComponents(d,x={includeInternal:!1}){return d?Array.isArray(d)?d.flatMap(q=>this._getComponentsAtPosition(q,x)):this._getComponentsAtPosition(d,x):this._components.filter(q=>x.includeInternal||!(this._componentMap.get(q)?.internal??!1)).map(({widget:q,node:z})=>q??z)}getPosition(d){for(const x in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[x].contains(d))return x;return null}_add(d,
x,q,z,E){d instanceof n||(d=new n({node:d}));this._place({component:d,position:x,index:q});this._components.push(d);this._componentMap.set(d,{key:z,internal:E})}_find(d){return d?d instanceof n?this._findByComponent(d):"string"===typeof d?this._findById(d):this._findByNode(d.domNode||d):null}_getViewPadding(){return this.view?.padding??B}_attachContainers(d){d.appendChild(this._innerContainer);d.appendChild(this._manualContainer)}_initContainers(){var d=document.createElement("div");d.classList.add("esri-ui-inner-container",
"esri-ui-corner-container");const x=document.createElement("div");x.classList.add("esri-ui-inner-container","esri-ui-manual-container");const q=document.createElement("div");q.classList.add("esri-ui-top-left","esri-ui-corner");d.appendChild(q);const z=document.createElement("div");z.classList.add("esri-ui-top-right","esri-ui-corner");d.appendChild(z);const E=document.createElement("div");E.classList.add("esri-ui-bottom-left","esri-ui-corner");d.appendChild(E);const G=document.createElement("div");
G.classList.add("esri-ui-bottom-right","esri-ui-corner");d.appendChild(G);this._innerContainer=d;this._manualContainer=x;d=t.isRTL();this._cornerNameToContainerLookup={"top-left":q,"top-right":z,"bottom-left":E,"bottom-right":G,"top-leading":d?z:q,"top-trailing":d?q:z,"bottom-leading":d?G:E,"bottom-trailing":d?E:G};this._positionNameToContainerLookup={manual:x,...this._cornerNameToContainerLookup}}_isValidPosition(d){return!!this._positionNameToContainerLookup[d]}_place(d){var x=d.position??"manual";
const {component:q,index:z}=d;d=this._positionNameToContainerLookup[x];x=null!=z&&-1<z;var E=q.widget;E&&!E._started&&"function"===typeof E.postMixInProperties&&"function"===typeof E.buildRendering&&"function"===typeof E.postCreate&&"function"===typeof E.startup&&q.widget.startup();x?(x=Array.from(d.children),0===z?d.firstChild?b.insertBefore(q.node,d.firstChild):d.appendChild(q.node):z>=x.length?d.appendChild(q.node):b.insertBefore(q.node,x[z])):d.appendChild(q.node)}_toPixelPosition(d){return{top:r(d.top),
left:r(d.left),right:r(d.right),bottom:r(d.bottom)}}_findByComponent(d){return this._components.find(x=>x===d)??null}_findById(d){return this._components.find(({id:x})=>x===d)??null}_findByNode(d){return this._components.find(({node:x})=>x===d)??null}_getComponentsAtPosition(d,x){return Array.prototype.slice.call(this._positionNameToContainerLookup[d].children).map(q=>this._findByNode(q)).filter(h.isSome).filter(q=>x.includeInternal||!(this._componentMap.get(q)?.internal??!1)).map(({widget:q,node:z})=>
q??z)}};f.__decorate([p.property()],c.prototype,"_locale",void 0);f.__decorate([p.property()],c.prototype,"container",null);f.__decorate([p.property()],c.prototype,"height",null);f.__decorate([p.property({value:A})],c.prototype,"padding",null);f.__decorate([l.cast("padding")],c.prototype,"castPadding",null);f.__decorate([p.property()],c.prototype,"view",void 0);f.__decorate([p.property()],c.prototype,"width",null);return c=f.__decorate([a.subclass("esri.views.ui.UI")],c)})},"esri/widgets/Attribution":function(){define("../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/globalCss ./support/legacyIcon ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r){var g=e.legacyIcon.description;b=class extends l{constructor(w,B){super(w,B);this._attributionTextOverflowed=this._isOpen=!1;this._prevSourceNodeHeight=0;this._resizeObserver=new ResizeObserver(A=>A.forEach(({target:d})=>this._checkSourceTextOverflow(d)));this.iconClass=g;this.icon=null;this.itemDelimiter=" | ";this.messages=null;this.viewModel=new m}initialize(){this.addHandles(c.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||
this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((w,B)=>{w.includes(B.text)||w.push(B.text);return w},[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(w){this._overrideIfSome("label",w)}get view(){return this.viewModel.view}set view(w){this.viewModel.view=w}render(){return v.tsx("div",{bind:this,class:this.classes("esri-attribution",a.globalCss.widget,{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,
onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return v.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",v.tsx("a",{class:"esri-attribution__link",href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const w=this._isOpen,B=this._isInteractive,A=B?0:void 0,{attributionText:d}=this;return v.tsx("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes("esri-attribution__sources",
{["esri-attribution__sources--open"]:w,[a.globalCss.interactive]:B}),innerHTML:d,tabIndex:A})}_afterSourcesNodeCreate(w){this._prevSourceNodeHeight=w.clientWidth;this._resizeObserver.observe(w)}_checkSourceTextOverflow(w){let B=!1;const {clientHeight:A,clientWidth:d,scrollWidth:x}=w;w=x>d;const q=this._attributionTextOverflowed!==w;this._attributionTextOverflowed=w;q&&(B=!0);this._isOpen&&(w=A<this._prevSourceNodeHeight,this._prevSourceNodeHeight=A,w&&(this._isOpen=!1,B=!0));B&&this.scheduleRender()}_toggleState(){this._isInteractive&&
(this._isOpen=!this._isOpen)}};f.__decorate([h.property()],b.prototype,"_isOpen",void 0);f.__decorate([h.property()],b.prototype,"_isInteractive",null);f.__decorate([h.property()],b.prototype,"_attributionTextOverflowed",void 0);f.__decorate([h.property()],b.prototype,"_prevSourceNodeHeight",void 0);f.__decorate([h.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],b.prototype,"attributionText",null);f.__decorate([h.property()],b.prototype,"iconClass",void 0);f.__decorate([h.property()],
b.prototype,"icon",void 0);f.__decorate([h.property()],b.prototype,"itemDelimiter",void 0);f.__decorate([h.property()],b.prototype,"label",null);f.__decorate([h.property(),t.messageBundle("esri/widgets/Attribution/t9n/Attribution")],b.prototype,"messages",void 0);f.__decorate([h.property()],b.prototype,"view",null);f.__decorate([h.property({type:m})],b.prototype,"viewModel",void 0);f.__decorate([n.accessibleHandler()],b.prototype,"_toggleState",null);return b=f.__decorate([p.subclass("esri.widgets.Attribution")],
b)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../views/3d/layers/Lyr3DWasm".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r){function g(d,x){return d&&"copyright"in d&&(!x||"function"===typeof d.originOf&&"user"===d.originOf("copyright"))}function w(d,x){return d.length!==x.length||d.some((q,z)=>q.text!==x[z].text)}function B(d,x,q){q&&x&&(d.find(z=>z.layerView===x&&z.text===q)||d.push({text:q,layerView:x}))}const A=[];c=class extends c{constructor(d){super(d);this._clear=()=>{this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.removeHandles("suspension");
this.notifyChange("state")};this._pendingAttributions=new Set;this._fetchedAttributionData=new Map;this.items=new b;this.view=null;this._allLayerViewsChange=x=>{this.removeHandles("suspension");const q=this.view?.allLayerViews;q&&this.addHandles(q.map(z=>u.watch(()=>[z.suspended,z.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension");x?.removed&&x.removed.forEach(z=>{this._pendingAttributions.delete(z);this._fetchedAttributionData.delete(z)});this._updateAttributionItems()};
this.addHandles([u.on(()=>this.view?.allLayerViews,"change",x=>this._allLayerViewsChange(x),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),u.when(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()}get state(){return this.view?.ready?0<this._pendingAttributions.size?"loading":"ready":"disabled"}_updateAttributionItems(){const d=this.view;
var x=d?.allLayerViews;A.length=0;if(d&&x){x.forEach(z=>{if(!z.suspended&&z.layer?.attributionVisible){var E=z.layer;if(g(E,"user"))B(A,z,E.copyright);else if(E.hasAttributionData)if(this._fetchedAttributionData.has(z)){var G=this._fetchedAttributionData.get(z);G?B(A,z,this._getDynamicAttribution(G,d,E)):g(E)&&B(A,z,E.copyright)}else this._fetchAttributionData(z);else(G="portalItem"in E?E.portalItem?.accessInformation:void 0)?B(A,z,G):B(A,z,E.copyright)}});x=x.find(z=>"integrated-mesh-3dtiles"===
z.layer?.type);if(this.view&&x){var q=r.getLyr3DWasm(this.view);if(q){q=q.getAttributionText();for(let z=0;z<q.length;++z)B(A,x,q[z])}}w(this.items,A)&&(this.items.removeAll(),this.items.addMany(A));A.length=0;this.notifyChange("state")}else this._clear()}async _fetchAttributionData(d){if(!this._pendingAttributions.has(d)){this._pendingAttributions.add(d);var x=await h.result(d.layer.fetchAttributionData());this._pendingAttributions.has(d)&&(x=x.ok?this._createContributionIndex(x.value,"bing-maps"===
d.layer.type):null,this._pendingAttributions.delete(d),this._fetchedAttributionData.set(d,x));this._updateAttributionItems()}}_createContributionIndex(d,x){d=d.contributors;const q={};if(!d)return q;for(let M=0;M<d.length;M++){const L=d[M];var z=L.coverageAreas;if(!z)return;for(const P of z){var E=P.bbox,G=P.zoomMin-(x&&P.zoomMin?1:0);z=P.zoomMax-(x&&P.zoomMax?1:0);E=new e({xmin:E[1],ymin:E[0],xmax:E[3],ymax:E[2],spatialReference:n.WGS84});for(E={extent:v.geographicToWebMercator(E),attribution:L.attribution||
"",score:null!=P.score?P.score:100,id:M};G<=z;G++){let ba,Z;(ba=q)[Z=G]??(ba[Z]=[]);q[G].push(E)}}}q.maxKey=Math.max.apply(null,Object.keys(q));return q}_getDynamicAttribution(d,x,q){const {extent:z,scale:E}=x;q=q.tileInfo?.scaleToZoom(E)??0;q=Math.min(d.maxKey??0,Math.round(q));if(!z||null==q||-1>=q)return"";d=d[q];const G=v.project(z.center.clone().normalize(),x.spatialReference),M=new Set;return d?d.filter(L=>{const P=L.id;(L=!M.has(P)&&G&&L.extent&&t.extentContainsPoint(L.extent,G))&&M.add(P);
return L}).sort((L,P)=>P.score-L.score||L.objectId-P.objectId).map(L=>L.attribution).join(", "):""}};f.__decorate([k.property({readOnly:!0,type:b})],c.prototype,"items",void 0);f.__decorate([k.property({readOnly:!0})],c.prototype,"state",null);f.__decorate([k.property()],c.prototype,"view",void 0);return c=f.__decorate([a.subclass("esri.widgets.Attribution.AttributionViewModel")],c)})},"esri/views/3d/layers/Lyr3DWasm":function(){define(["require","exports"],function(f,c){let h,b=null;const u=new Map;
c.addLayerViewToWasm=async function(k){null==b&&(null==h&&(h=new Promise((m,a)=>f(["../../../layers/Lyr3DWasmPerSceneView"],e=>m(Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}))),a))),b=await h);const p=k.view;let l=u.get(p);l||(l=new b.default({view:p}),u.set(p,l));await l.initializeWasm();return l.add3DTilesLayerView(k)};c.getLyr3DWasm=function(k){return u.get(k)};c.removeLayerViewFromWasm=function(k){const p=k.view,l=u.get(p);l&&1>l.remove3DTilesLayerView(k)&&
(u.delete(p),0===u.size&&(b=h=null))};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/globalCss":function(){define(["exports"],function(f){f.globalCss={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",
disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",
menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",
widgetDisabled:"esri-widget--disabled"};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),function(f,
c,h,b,u,k,p,l,m,a,e,n,t,v,r){b=class extends l{constructor(g,w){super(g,w);this.iconClass=a.css.widgetIcon;this.messages=this.icon=null;this.viewModel=new m;this._reset=()=>{this.viewModel.reset()};this._toRotationTransform=B=>({transform:`rotateZ(${B.z}deg)`})}loadDependencies(){return e.loadCalciteComponents({button:()=>new Promise((g,w)=>f(["../chunks/calcite-button"],g,w)),icon:()=>new Promise((g,w)=>f(["../chunks/calcite-icon"],g,w))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(g){this.viewModel.goToOverride=
g}get label(){return this.messages?.widgetLabel??""}set label(g){this._overrideIfSome("label",g)}get view(){return this.viewModel.view}set view(g){this.viewModel.view=g}reset(){return this.viewModel.reset()}render(){const {orientation:g,state:w}=this.viewModel,B=this.icon??("rotation"===w?"arrow-up":"compass-needle"),{messages:A}=this;return r.tsx("div",{class:this.classes(a.css.base,n.globalCss.widget)},r.tsx("calcite-button",{class:n.globalCss.widgetButton,disabled:"disabled"===w,kind:"neutral",
label:A.reset,onclick:this._reset,round:!0,scale:"s",title:A.reset},r.tsx("div",{"aria-hidden":"true",class:a.css.iconContainer,title:A.reset},r.tsx("calcite-icon",{icon:B,scale:"m",styles:this._toRotationTransform(g)}))))}};c.__decorate([h.property()],b.prototype,"goToOverride",null);c.__decorate([h.property()],b.prototype,"iconClass",void 0);c.__decorate([h.property()],b.prototype,"icon",void 0);c.__decorate([h.property()],b.prototype,"label",null);c.__decorate([h.property(),v.messageBundle("esri/widgets/Compass/t9n/Compass")],
b.prototype,"messages",void 0);c.__decorate([h.property()],b.prototype,"view",null);c.__decorate([h.property({type:m})],b.prototype,"viewModel",void 0);return b=c.__decorate([p.subclass("esri.widgets.Compass")],b)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./utils ../support/GoTo".split(" "),
function(f,c,h,b,u,k,p,l,m,a){c=class extends a.GoToMixin(c){constructor(e){super(e);this.orientation={x:0,y:0,z:0};this.view=null;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(h.watch(()=>this.view,this._updateRotationWatcher,h.initial))}destroy(){this.view=null}get canShowNorth(){return m.canShowNorth(this.view)}get state(){return!this.view?.ready||
"2d"===this.view.type&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){if(this.view?.ready){var e={};"2d"===this.view?.type?e.rotation=0:e.heading=0;this.callGoTo({target:e})}}_updateForRotation(e){void 0!==e&&null!==e&&(this.orientation={z:e})}_updateForCamera(e){e&&(this.orientation={x:0,y:0,z:-e.heading})}_updateRotationWatcher(e){this.removeAllHandles();e&&this.addHandles("2d"===e.type?h.watch(()=>e?.rotation,this._updateForRotation,h.initial):
h.watch(()=>e?.camera,this._updateForCamera,h.initial))}};f.__decorate([b.property({readOnly:!0})],c.prototype,"canShowNorth",null);f.__decorate([b.property()],c.prototype,"orientation",void 0);f.__decorate([b.property({readOnly:!0})],c.prototype,"state",null);f.__decorate([b.property()],c.prototype,"view",void 0);return c=f.__decorate([l.subclass("esri.widgets.CompassViewModel")],c)})},"esri/widgets/Compass/utils":function(){define(["exports"],function(f){f.canShowNorth=function(c){return c?.spatialReference?.isWebMercator||
c?.spatialReference?.isGeographic||!1};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("exports ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,h,b,u,k,p,l){f.GoToMixin=m=>{m=class extends m{constructor(...a){super(...a);this.view=this.goToOverride=null}callGoTo(a){const {view:e}=
this;h.assertIsSome(e);return this.goToOverride?this.goToOverride(e,a):e.goTo(a.target,a.options)}};c.__decorate([b.property()],m.prototype,"goToOverride",void 0);c.__decorate([b.property()],m.prototype,"view",void 0);return m=c.__decorate([l.subclass("esri.widgets.support.GoTo")],m)};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass/css":function(){define(["exports","../support/legacyIcon"],function(f,c){f.css={base:"esri-compass",widgetIcon:c.legacyIcon.locateCircled,
iconContainer:"esri-compass__icon-container"};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r){b=class extends l{constructor(g,w){super(g,w);this.iconClass=m.css.widgetIcon;this.messages=this.icon=null;this.viewModel=new a;this.toggle=()=>this.viewModel.toggle();this._rotateButton=this._panButton=null;this._toggle=()=>{("pan"===this.viewModel?.navigationMode?this._rotateButton:this._panButton)?.setFocus();this.toggle()}}loadDependencies(){return e.loadCalciteComponents({button:()=>new Promise((g,w)=>f(["../chunks/calcite-button"],g,w))})}get label(){return this.messages?.widgetLabel??
""}set label(g){this._overrideIfSome("label",g)}set layout(g){"horizontal"!==g&&(g="vertical");this._set("layout",g)}get view(){return this.viewModel.view}set view(g){this.viewModel.view=g}render(){const g="disabled"===this.viewModel?.state,w="pan"===this.viewModel?.navigationMode,B=this.messages.toggle;return r.tsx("div",{class:this.classes(m.css.base,n.globalCss.widget,{[m.css.isLayoutHorizontal]:"horizontal"===this.layout})},r.tsx("calcite-button",{afterCreate:A=>{this._panButton=A},appearance:w?
"outline-fill":"solid",class:n.globalCss.widgetButton,disabled:g,iconStart:"move",kind:"neutral",label:B,onclick:this._toggle,tabIndex:w?void 0:-1,title:B}),r.tsx("calcite-button",{afterCreate:A=>{this._rotateButton=A},appearance:w?"solid":"outline-fill",class:n.globalCss.widgetButton,disabled:g,iconStart:"rotate",kind:"neutral",label:B,onclick:this._toggle,tabIndex:w?-1:void 0,title:B}))}};c.__decorate([h.property()],b.prototype,"iconClass",void 0);c.__decorate([h.property()],b.prototype,"icon",
void 0);c.__decorate([h.property()],b.prototype,"label",null);c.__decorate([h.property({value:"vertical"})],b.prototype,"layout",null);c.__decorate([h.property(),v.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],b.prototype,"messages",void 0);c.__decorate([h.property()],b.prototype,"view",null);c.__decorate([h.property({type:a})],b.prototype,"viewModel",void 0);return b=c.__decorate([p.subclass("esri.widgets.NavigationToggle")],b)})},"esri/widgets/NavigationToggle/css":function(){define(["exports",
"../support/legacyIcon"],function(f,c){f.css={base:"esri-navigation-toggle",widgetIcon:c.legacyIcon.pan2,isLayoutHorizontal:"esri-navigation-toggle--horizontal"};Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,h,b,u,k,p,l){c=class extends c{constructor(m){super(m);this.navigationMode="pan";this.view=null}initialize(){this.addHandles(h.when(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&"3d"===this.view?.type?"ready":"disabled"}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){const m=this.view?.inputManager;m&&(m.primaryDragAction=
"pan"===this.navigationMode?"pan":"rotate")}};f.__decorate([b.property({readOnly:!0})],c.prototype,"state",null);f.__decorate([b.property()],c.prototype,"navigationMode",void 0);f.__decorate([b.property()],c.prototype,"view",void 0);return c=f.__decorate([l.subclass("esri.widgets.NavigationToggleViewModel")],c)})},"esri/widgets/Zoom":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ../chunks/componentsUtils ./support/globalCss ./support/legacyIcon ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/ZoomViewModel".split(" "),
function(f,c,h,b,u,k,p,l,m,a,e,n,t,v,r){var g=e.legacyIcon.zoomInMagnifyingGlass;b=class extends l{constructor(w,B){super(w,B);this.iconClass=g;this.messages=this.icon=null;this.viewModel=new r;this.zoomIn=()=>this.viewModel.zoomIn();this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return m.loadCalciteComponents({button:()=>new Promise((w,B)=>f(["../chunks/calcite-button"],w,B))})}get label(){return this.messages?.widgetLabel??""}set label(w){this._overrideIfSome("label",w)}set layout(w){"horizontal"!==
w&&(w="vertical");this._set("layout",w)}set view(w){this.viewModel.view=w}get view(){return this.viewModel.view}render(){const w={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:B,canZoomOut:A}=this.viewModel,{zoomIn:d,zoomOut:x}=this.messages;return v.tsx("div",{class:this.classes("esri-zoom",a.globalCss.widget,w)},v.tsx("calcite-button",{class:a.globalCss.widgetButton,disabled:!B,iconStart:"plus",kind:"neutral",label:d,onclick:this.zoomIn,title:d}),v.tsx("calcite-button",{class:a.globalCss.widgetButton,
disabled:!A,iconStart:"minus",kind:"neutral",label:x,onclick:this.zoomOut,title:x}))}};c.__decorate([h.property()],b.prototype,"iconClass",void 0);c.__decorate([h.property()],b.prototype,"icon",void 0);c.__decorate([h.property()],b.prototype,"label",null);c.__decorate([h.property({value:"vertical"})],b.prototype,"layout",null);c.__decorate([h.property(),t.messageBundle("esri/widgets/Zoom/t9n/Zoom")],b.prototype,"messages",void 0);c.__decorate([h.property()],b.prototype,"view",null);c.__decorate([h.property({type:r})],
b.prototype,"viewModel",void 0);return b=c.__decorate([p.subclass("esri.widgets.Zoom")],b)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(f,c,h,b,u,k,p,l,m,a){c=class extends c{constructor(e){super(e)}destroy(){this.view=
null}get canZoomIn(){return null!=this._zoomConditions&&this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?"2d"===e.type?this._zoomConditions=new m({view:e}):"3d"===e.type&&(this._zoomConditions=new a({view:e})):this._zoomConditions=null;this._set("view",e)}zoomIn(){if(this.canZoomIn){var e=this.view;"2d"===e.type?e.mapViewNavigation.zoomIn():h.ignoreAbortErrors(e.goTo({zoomFactor:2}))}}zoomOut(){if(this.canZoomOut){var e=
this.view;"2d"===e.type?e.mapViewNavigation.zoomOut():h.ignoreAbortErrors(e.goTo({zoomFactor:.5}))}}};f.__decorate([b.property()],c.prototype,"_zoomConditions",void 0);f.__decorate([b.property()],c.prototype,"canZoomIn",null);f.__decorate([b.property()],c.prototype,"canZoomOut",null);f.__decorate([b.property({readOnly:!0})],c.prototype,"state",null);f.__decorate([b.property()],c.prototype,"view",null);return c=f.__decorate([l.subclass("esri.widgets.Zoom.ZoomViewModel")],c)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,h,b,u,k,p){c=class extends c{get canZoomIn(){if(!this.view?.ready)return!1;const l=this.view?.constraints?.effectiveMaxScale;return 0===l||this._scale>l}get canZoomOut(){var {view:l}=this;if(!l?.ready)return!1;l=l.constraints?.effectiveMinScale;return 0===l||this._scale<l}get _scale(){const l=this.view?.animation?.target;return(l&&"then"in l?void 0:l?.scale)??this.view?.scale??0}};f.__decorate([h.property({readOnly:!0})],c.prototype,"canZoomIn",null);f.__decorate([h.property({readOnly:!0})],
c.prototype,"canZoomOut",null);f.__decorate([h.property()],c.prototype,"view",void 0);f.__decorate([h.property()],c.prototype,"_scale",null);return c=f.__decorate([p.subclass("esri.widgets.Zoom.ZoomConditions2D")],c)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(f,c,h,b,u,k,p){c=
class extends c{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};f.__decorate([h.property({readOnly:!0})],c.prototype,"canZoomIn",null);f.__decorate([h.property({readOnly:!0})],c.prototype,"canZoomOut",null);f.__decorate([h.property()],c.prototype,"view",void 0);return c=f.__decorate([p.subclass("esri.widgets.Zoom.ZoomConditions3D")],c)})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(f,c,h,b,u,k,p){h=class extends p{constructor(l){super(l);this.components=["attribution","zoom"]}};f.__decorate([c.property()],h.prototype,"components",void 0);return h=f.__decorate([k.subclass("esri.views.ui.2d.DefaultUI2D")],h)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(f,c,h,b,u,k,p,l){var m;h=m=class extends h.JSONSupport{constructor(a){super(a);this.color=new c([0,0,0,1])}clone(){return new m(b.clone({color:this.color}))}};f.__decorate([u.property({type:c,json:{write:!0}})],h.prototype,"color",void 0);return h=m=f.__decorate([l.subclass("esri.webmap.background.ColorBackground")],h)})},"*noref":1}});
define("require ../chunks/tslib.es6 ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../geometry/projection ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./2d/AnimationManager ./2d/FrameTask ./2d/GoToManager ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/ViewStateManager ./2d/input/MapViewInputManager ./2d/layers/features/support/TileStore ./2d/support/HighlightOptions ./2d/support/hitTestUtils ./2d/support/screenshotUtils ./2d/support/StationaryManager ./2d/support/Timeline ./support/screenUtils ./support/WebGLRequirements ./ui/DefaultUI ./ui/2d/DefaultUI2D ../webmap/background/ColorBackground".split(" "),function(f,
c,h,b,u,k,p,l,m,a,e,n,t,v,r,g,w,B,A,d,x,q,z,E,G,M,L,P,ba,Z,W,fa,ha,y,C,J,R,K,S,V,X,Y,aa,da,D){async function F(){const [,{GraphicsView2D:I,GraphicContainer:O,LabelManager:U,MapViewNavigation:ca,MagnifierView2D:ma,Stage:la}]=await Promise.all([new Promise((ja,ka)=>f(["./2d/webglDeps"],ja,ka)),new Promise((ja,ka)=>f(["./2d/mapViewDeps"],ja,ka))]);N=I;Q=O;T=U;ea=ca;ia=ma;H=la}let H,N,Q,T,ea,ia;v=class extends A.BreakpointsOwner(x.PopupView(d.DOMContainer(q))){constructor(I){super(I);this.stage=this._magnifierView=
null;this._resolveWhenReady=[];this.rootLayerViews=new u({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});this.featuresTilingScheme=null;this.fullOpacity=1;this.goToManager=new G.GoToManager({view:this});this.graphicsView=null;this.stateManager=new ha.ViewStateManager({constraints:new L({view:this})});this.stationaryManager=new S.StationaryManager;this.mapViewNavigation=this.labelManager=null;this.renderingOptions=
{samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};this.supersampleScreenshotsEnabled=!0;this.supportsGround=!1;this.frameTask=new E(this);this.floors=new b;this.highlightOptions=new J;this.inputManager=new y({view:this});this.map=null;this.spatialReferenceLocked=!1;this.timeline=new V.Timeline;this.type="2d";this.ui=new da;this.test={takeScreenshot:async O=>K.takeRawScreenshot(this._getScreenshotView(O),O)};this.padding={top:0,right:0,bottom:0,left:0};
this.addHandles([a.watch(()=>this.viewpoint,()=>this.stationaryManager.flip(),a.sync),this.on("resize",O=>this.stateManager.resize(O.width,O.height))]);e.initialize()}destroy(){this._set("preconditionsReady",!1);this.frameTask=m.destroyMaybe(this.frameTask);this.goToManager.destroy();this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)}get graphicsTileStore(){return new C(this.featuresTilingScheme)}get constraintsInfo(){const I=this.defaultsFromMap?.tileInfo,O=
this.spatialReference;return{lods:I?.spatialReference?.equals(O)?I.lods:null,spatialReference:O}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const {scale:I,constraints:O,center:U,viewpoint:ca,extent:ma}=this;let la=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||ma)return!1;O?.effectiveLODs||(la=-1);return U&&(0!==I||-1!==la)||null!=ca?.targetGeometry&&("extent"===ca.targetGeometry.type||
ca.scale)?!1:!0}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const I=this._getDefaultViewpoint();return I?w.isLoadedOrLoadFor(I.targetGeometry.spatialReference,this.spatialReference):!1}set animation(I){var O=this._get("animation");I!==O&&(O&&O.stop(),I!==this.animationManager.animation&&this.animationManager.stop(),!I||I.isFulfilled()?(this._set("animation",
null),this.frameTask.animationInProgress=!1):(this._set("animation",I),this.frameTask.animationInProgress=!0,O=()=>{this.destroyed||(I===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)},I.when(O,O)))}get background(){return"esri.WebMap"===this.map?.declaredClass?this.map.initialViewProperties.background:null}set background(I){this._override("background",I)}get center(){return this.stateManager?.center??null}set center(I){this.stateManager.center=
I}get constraints(){return this.stateManager?.constraints}set constraints(I){I.view=this;const O=this.stateManager.constraints;this.stateManager.constraints=I;O?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(I){this.stateManager.extent=I}get padding(){return this.stateManager?.padding}set padding(I){this.stateManager&&(this.stateManager.padding=I)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(I){this.stateManager.resizeAlign=
I}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(I){const {rotationEnabled:O}=this.constraints;this.constraints.rotationEnabled=!0;this.stateManager.rotation=I;this.constraints.rotationEnabled=O}get scale(){return this.stateManager?.scale??0}set scale(I){this.stateManager&&(this.stateManager.scale=I)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){const I=
!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||!0===this.graphicsView.updating||this.allLayerViews.some(O=>!O.destroyed&&!("layerViews"in O)&&!0===O.updating));if(p("esri-2d-log-updating")){const O=this.allLayerViews.reduce((U,ca)=>({...U,[`${ca.layer.id}(${ca.layer.type})`]:!ca.destroyed&&!("layerViews"in ca)&&ca.updating}),{});console.log(`Updating MapView: ${I}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(O)}\n`)}return I}get viewpoint(){return this.stateManager.viewpoint??
null}set viewpoint(I){this.stateManager.viewpoint=I;this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(I){this.stateManager.zoom=I}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(I,O){return this.goToManager.goTo(I,O)}async hitTest(I,O){return R.hitTest(this,I,O)}async takeScreenshot(I){return K.takeScreenshot(this._getScreenshotView(I),I)}toMap(I){if(!this.ready)return null;I=X.isSupportedScreenPointEvent(I)?X.createScreenPointFromSupportedEvent(this,
I):I;return this.stateManager.toMap(I)}toScreen(I,O){return this.stateManager.toScreen(I,O)}on(I,O,U,ca){return(U=this.inputManager&&this.viewEvents.on(I,O,U,ca))?U:super.on(I,O)}hasEventListener(I){return super.hasEventListener(I)||this.viewEvents.hasHandler(I)}whenLayerView(I){return super.whenLayerView(I)}graphicChanged(I){this.graphicsView&&this.graphicsView.graphicUpdateHandler(I)}whenReady(){return new Promise(I=>{this.ready?I(this):this._resolveWhenReady.push(I)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&
"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return"esri.WebMap"===this.map?.declaredClass?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(I){return M.layerView2DImporter.hasLayerViewModule(I)}importLayerView(I){return M.layerView2DImporter.importLayerView(I)}pixelSizeAt(){return this.ready?this.resolution:(l.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),
null)}async popupHitTest(I){const O=this.toMap(I);I=await this.hitTest(I);const U=this.allLayerViews.toArray().reverse(),ca=new globalThis.Map(U.map(na=>[na.layer.uid,na])),ma=[];let la=0,ja=0;for(;la<I.results.length||ja<U.length;){var ka=I.results.at(la);if(ka&&"graphic"!==ka.type){++la;continue}const na=ca.get(ka?.graphic.layer?.uid);(!ka||na)&&ja<U.length&&U.at(ja)!==na?(ka=U.at(ja),"fetchPopupFeaturesAtLocation"in ka&&ma.push({mapPoint:O,layerView:ka}),++ja):ka&&(ma.push({graphic:ka.graphic,
layerView:na}),++la)}return{hits:ma,location:O}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let I=Y.check(this.type);p("safari")&&9>p("safari")&&(I=new k("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:p("safari")}));if(null!=I)throw l.getLogger(this).warn("#validate()",I.message),I;}loadAsyncDependencies(){return F()}_getDefaultViewpoint(){const {constraints:I,initialExtent:O,
map:U,padding:ca,size:ma}=this;if(!I)return null;var la=U&&"initialViewProperties"in U?U.initialViewProperties:void 0;const ja=this.stateManager.getUserStartupOptions(this.size);var ka=la?.viewpoint;const na=ka?.targetGeometry?.extent??O;var oa=na?.center;la=ka?.rotation??0;ka=ka?.scale||na&&fa.extentToScale(na,[ma[0]-ca.left-ca.right,ma[1]-ca.top-ca.bottom]);oa=ja.center??oa;ka=ja.scale??ka;return oa&&ka?new h({targetGeometry:oa,scale:ka,rotation:ja.rotation??la}):null}_startup(){this.timeline.begin("MapView Startup");
var I=this._getDefaultViewpoint();this.stateManager.startup(I,this.size,this.spatialReference,this.defaultsFromMap.extent?.center);this.graphics.owner=this;const O=new H(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=O;this._magnifierView=new ia;this._magnifierView.magnifier=this.magnifier;I=new T({view:this});this._set("labelManager",
I);I=new z({view:this});this._set("animationManager",I);I=new ea({view:this,animationManager:I});this._set("mapViewNavigation",I);this._setupSpatialReferenceDependentProperties();this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),O.on("webgl-error",U=>this.fatalError=U.error),a.watch(()=>this.stationary,U=>O.stationary=U,a.syncAndInitial),a.watch(()=>this.background,U=>{O.backgroundColor=U?.color;this._magnifierView.backgroundColor=U?.color},a.syncAndInitial),a.watch(()=>
this.magnifier,U=>this._magnifierView.magnifier=U,a.syncAndInitial),a.watch(()=>this.renderingOptions,U=>O.renderingOptions=U,a.syncAndInitial),a.watch(()=>this.highlightOptions,U=>O.highlightOptions=U,a.syncAndInitial),a.watch(()=>this.state.id,()=>O.state=this.state,a.syncAndInitial)],"map-view");this._updateStageChildren();I=this._resolveWhenReady;this._resolveWhenReady=[];I.forEach(U=>U(this));this.timeline.end("MapView Startup");this.frameTask.start();this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties();
this.removeHandles("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animation=null;this.animationManager.destroy();this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this.stage.destroy();this.stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask.stop();this.stationaryManager.clear();
this._set("ready",!1);this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren();this.rootLayerViews.forEach(I=>{this.stage.addChild(I.container)});this.stage.addChild(this.graphicsView.container);this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){var I=new P(B.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",I);I=new N({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),
container:new Q(I)});this._set("graphicsView",I)}_destroySpatialReferenceDependentProperties(){const I=this.graphicsView;this._set("graphicsView",null);I.destroy();this._set("featuresTilingScheme",null)}_getScreenshotView(I){const {allLayerViews:O,padding:U,size:ca,stage:ma}=this;return{allLayerViews:O,backgroundColor:I?.ignoreBackground?null:this.background?.color,padding:U,size:ca,stage:ma}}_spatialReferenceChanged(I){if(this.ready){this.frameTask.stop();for(const O of this.allLayerViews)O.processDetach();
this._destroySpatialReferenceDependentProperties();this.stateManager.changeSpatialReference(I);this.stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const O of this.allLayerViews)O.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}}};v.type="2d";c.__decorate([n.property({readOnly:!0})],v.prototype,"animationManager",void 0);c.__decorate([n.property({constructOnly:!0})],v.prototype,"deactivatedWebGLExtensions",void 0);c.__decorate([n.property({constructOnly:!0})],
v.prototype,"debugWebGLExtensions",void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"featuresTilingScheme",void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"fullOpacity",void 0);c.__decorate([n.property()],v.prototype,"goToManager",void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"graphicsTileStore",null);c.__decorate([n.property()],v.prototype,"graphicsView",void 0);c.__decorate([n.property()],v.prototype,"stateManager",void 0);c.__decorate([n.property()],v.prototype,
"constraintsInfo",null);c.__decorate([n.property({readOnly:!0})],v.prototype,"state",null);c.__decorate([n.property()],v.prototype,"initialExtentRequired",null);c.__decorate([n.property()],v.prototype,"labelManager",void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"mapViewNavigation",void 0);c.__decorate([n.property({constructOnly:!0})],v.prototype,"renderCanvas",void 0);c.__decorate([n.property()],v.prototype,"renderingOptions",void 0);c.__decorate([n.property({constructOnly:!0})],v.prototype,
"supersampleScreenshotsEnabled",void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"supportsGround",void 0);c.__decorate([n.property()],v.prototype,"_defaultsFromMapSettings",null);c.__decorate([n.property({readOnly:!0})],v.prototype,"typeSpecificPreconditionsReady",null);c.__decorate([n.property()],v.prototype,"animation",null);c.__decorate([n.property({type:D})],v.prototype,"background",null);c.__decorate([n.property()],v.prototype,"center",null);c.__decorate([n.property({type:L})],v.prototype,
"constraints",null);c.__decorate([n.property()],v.prototype,"extent",null);c.__decorate([n.property()],v.prototype,"floors",void 0);c.__decorate([n.property({type:J})],v.prototype,"highlightOptions",void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"inputManager",void 0);c.__decorate([n.property()],v.prototype,"map",void 0);c.__decorate([n.property()],v.prototype,"padding",null);c.__decorate([n.property({readOnly:!0})],v.prototype,"rendering",null);c.__decorate([n.property()],v.prototype,
"resizeAlign",null);c.__decorate([n.property({readOnly:!0})],v.prototype,"resolution",null);c.__decorate([n.property()],v.prototype,"rotation",null);c.__decorate([n.property()],v.prototype,"scale",null);c.__decorate([n.property({constructOnly:!0})],v.prototype,"spatialReferenceLocked",void 0);c.__decorate([n.property()],v.prototype,"stationary",null);c.__decorate([n.property({type:V.Timeline,readOnly:!0})],v.prototype,"timeline",void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"type",
void 0);c.__decorate([n.property({readOnly:!0})],v.prototype,"updating",null);c.__decorate([n.property()],v.prototype,"viewpoint",null);c.__decorate([n.property()],v.prototype,"zoom",null);c.__decorate([n.property({readOnly:!0})],v.prototype,"navigating",null);c.__decorate([n.property(),t.cast(I=>I instanceof aa?I:g.ensureClass(da,I))],v.prototype,"ui",void 0);return v=c.__decorate([r.subclass("esri.views.MapView")],v)});