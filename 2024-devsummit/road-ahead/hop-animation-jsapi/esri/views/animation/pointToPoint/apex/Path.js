// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../easing","../Path","../Segment","./planning"],function(k,l,m,g,n){class p extends m.Path{constructor(b,c){super();this._preallocSegments=[new g.Segment,new g.Segment,new g.Segment];this._descensionSegment=this._ascensionSegment=null;this.update(b,c)}update(b,c){if(b){this.definition?this.definition.copyFrom(b):this.definition=b.clone();var a=null;c?.apex&&(a=n.optimalDistance(b,c.apex));this.segments.length=0;this._descensionSegment=this._ascensionSegment=null;null==a?this._updateWithoutApex():
this._updateWithApex(a,c?.apex)}}segmentInterpolateComponentsAt(b,c,a){a=b.interpolateComponentsAt(c,a);b===this._ascensionSegment?a.zoom=l.outQuad(a.zoom):b===this._descensionSegment&&(a.zoom=l.inQuad(a.zoom));return a}_updateWithApex(b,c){const [a,d,e]=this._preallocSegments,f=c?.ascensionFactor??.5;c=Math.min(1-f,null!=c?.ascensionFactor&&null!=c.descensionFactor?c.descensionFactor:.5);const h=1-f-c;a.definition?a.definition.copyFrom(this.definition):a.definition=this.definition.clone();a.definition.compared.targetZoom=
b;a.definition.compared.pan=this.definition.compared.pan*f;a.definition.compared.rotate=this.definition.compared.rotate*f;a.update();this._ascensionSegment=a;this.segments.push(a);0<h&&(d.definition?d.definition.copyFrom(this.definition):d.definition=this.definition.clone(),d.definition.copyFrom(this.definition),d.definition.compared.sourceZoom=b,d.definition.compared.targetZoom=b,d.definition.compared.pan=this.definition.compared.pan*h,d.definition.compared.rotate=this.definition.compared.rotate*
h,d.update(),this.segments.push(d));e.definition?e.definition.copyFrom(this.definition):e.definition=this.definition.clone();e.definition.compared.sourceZoom=b;e.definition.compared.pan=this.definition.compared.pan*c;e.definition.compared.rotate=this.definition.compared.rotate*c;e.update();this._descensionSegment=e;this.segments.push(e)}_updateWithoutApex(){const [b]=this._preallocSegments;b.update(this.definition);this.segments.push(b)}}k.Path=p;Object.defineProperty(k,Symbol.toStringTag,{value:"Module"})});