// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","./functions"],function(p,c){function q(a,e){const b=Math.max(a.compared.sourceZoom,a.compared.targetZoom);a=a.source.zoomAtPixelsPerPan(a.desiredPixelFlow/a.compared.pan)/2;return a<b?null!=e.maximumDistance?b+(e.maximumDistance-b)/2:1.5*b:e.maximumDistance?Math.min(e.maximumDistance,a):a}p.optimalDistance=function(a,e){let b=q(a,e);const f={ascensionFactor:null!=e.ascensionFactor?e.ascensionFactor:.5,descensionFactor:null!=e.descensionFactor?e.descensionFactor:.5};var h=0===f.ascensionFactor,
k=0===f.descensionFactor;const r=h?c.tAscensionZoomOnly:c.tAscensionZoomPan,t=h?c.dtAscensionZoomOnly:c.dtAscensionZoomPan,u=h?c.ddtAscensionZoomOnly:c.ddtAscensionZoomPan,v=k?c.tDescensionZoomOnly:c.tDescensionZoomPan,w=k?c.dtDescensionZoomOnly:c.dtDescensionZoomPan,x=k?c.ddtDescensionZoomOnly:c.ddtDescensionZoomPan;h=d=>r(a,d,f)+c.tPanion(a,d,f)+v(a,d,f);k=d=>t(a,d,f)+c.dtPanion(a,d,f)+w(a,d,f);const y=d=>u(a,d,f)+c.ddtPanion(a,d,f)+x(a,d,f);let l=h(b);const z=c.tBaseLine(a);let m;const A=e.maximumIterations||
20,n=null!=e.maximumDistance?e.maximumDistance:Infinity;for(m=0;m<A;m++){var g=e.desiredSlope??1E-6;let d=k(b);Math.abs(d)>g&&(d+=g);g=d/y(b);if(isNaN(g)||b>=n&&0>g){if(!isFinite(n))return null;b=n;l=h(b);break}b-=g;if(b<a.compared.sourceZoom||b<a.compared.targetZoom)return null;g=h(b);if(.005>=Math.abs(g-l)/l)break;l=g}return l>.7*z||b<a.compared.sourceZoom||b<a.compared.targetZoom?null:b};Object.defineProperty(p,Symbol.toStringTag,{value:"Module"})});