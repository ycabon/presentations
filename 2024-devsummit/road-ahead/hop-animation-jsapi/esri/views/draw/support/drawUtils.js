// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../../../core/mathUtils","../../../geometry/support/aaBoundingRect","../../../geometry/support/boundsUtils","../../../geometry/support/coordsUtils"],function(r,C,z,A,w){function u(a,e,f,b){null==b||a.hasZ||(b=void 0);if("point"===a.type)return a.x+=e,a.y+=f,a.hasZ&&null!=b&&(a.z+=b),a;if("multipoint"===a.type){var c=a.points;for(var d=0;d<c.length;d++)c[d]=B(c[d],e,f,b);return a}if("extent"===a.type)return a.xmin+=e,a.xmax+=e,a.ymin+=f,a.ymax+=f,null!=b&&(a.zmin??(a.zmin=0),a.zmin+=
b,a.zmax??(a.zmax=0),a.zmax+=b),a;c=w.geometryToCoordinates(a);d="polyline"===a.type?a.paths:a.rings;for(let g=0;g<c.length;g++){const h=c[g];for(let k=0;k<h.length;k++)h[k]=B(h[k],e,f,b)}"paths"in a?a.paths=d:a.rings=d;return a}function B(a,e,f,b){return v(a,a[0]+e,a[1]+f,null!=a[2]&&null!=b?a[2]+b:void 0)}function v(a,e,f,b){e=[e,f];2<a.length&&e.push(null!=b?b:a[2]);3<a.length&&e.push(a[3]);return e}r.cloneMove=function(a,e,f,b,c){a=a.clone();var d=b.resolution;if("point"===a.type)return c?u(a,
e*d,-f*d):(c=b.state.transform,b=b.state.inverseTransform,d=c[0]*a.x+c[2]*a.y+c[4],c=c[1]*a.x+c[3]*a.y+c[5],a.x=b[0]*(d+e)+b[2]*(c+f)+b[4],a.y=b[1]*(d+e)+b[3]*(c+f)+b[5]),a;if("multipoint"===a.type){if(c)u(a,e*d,-f*d);else{c=a.points;d=b.state.transform;b=b.state.inverseTransform;for(var g=0;g<c.length;g++){var h=c[g],k=d[0]*h[0]+d[2]*h[1]+d[4],n=d[1]*h[0]+d[3]*h[1]+d[5];c[g]=v(h,b[0]*(k+e)+b[2]*(n+f)+b[4],b[1]*(k+e)+b[3]*(n+f)+b[5],void 0)}}return a}if("extent"===a.type)return c?u(a,e*d,-f*d):(c=
b.state.transform,b=b.state.inverseTransform,d=c[0]*a.xmin+c[2]*a.ymin+c[4],g=c[1]*a.xmin+c[3]*a.ymin+c[5],h=c[0]*a.xmax+c[2]*a.ymax+c[4],c=c[1]*a.xmax+c[3]*a.ymax+c[5],a.xmin=b[0]*(d+e)+b[2]*(g+f)+b[4],a.ymin=b[1]*(d+e)+b[3]*(g+f)+b[5],a.xmax=b[0]*(h+e)+b[2]*(c+f)+b[4],a.ymax=b[1]*(h+e)+b[3]*(c+f)+b[5]),a;if(c)u(a,e*d,-f*d);else{c=w.geometryToCoordinates(a);d="polyline"===a.type?a.paths:a.rings;g=b.state.transform;b=b.state.inverseTransform;for(h=0;h<c.length;h++)for(k=c[h],n=0;n<k.length;n++){const p=
k[n],x=g[0]*p[0]+g[2]*p[1]+g[4],l=g[1]*p[0]+g[3]*p[1]+g[5];k[n]=v(p,b[0]*(x+e)+b[2]*(l+f)+b[4],b[1]*(x+e)+b[3]*(l+f)+b[5],void 0)}"paths"in a?a.paths=d:a.rings=d}return a};r.getRotationAngle=function(a,e,f,b=!1){a=Math.atan2(e.y-f.y,e.x-f.x)-Math.atan2(a.y-f.y,a.x-f.x);a=Math.atan2(Math.sin(a),Math.cos(a));return b?a:C.rad2deg(a)};r.getScaleRatio=function(a,e,f,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-e)*(d-e))/Math.sqrt((f-a)*(f-a)+(b-e)*(b-e))};r.move=u;r.scale=function(a,e,f,b){if("point"===a.type){const {x:l,
y:m}=a;var c=b?b[0]:l,d=b?b[1]:m;a=a.clone();a.x=(l-c)*e+c;a.y=(m-d)*f+d;return a}if("multipoint"===a.type){c=w.geometryToCoordinates(a);d=z.create();const [l,m,q,t]=A.getRingsOrPathsBounds(d,[c]);c=b?b[0]:(l+q)/2;d=b?b[1]:(t+m)/2;a=a.clone();b=a.points;for(var g=0;g<b.length;g++){var h=b[g];const [y,D]=h;b[g]=v(h,(y-c)*e+c,(D-d)*f+d,void 0)}return a}if("extent"===a.type){const {xmin:l,xmax:m,ymin:q,ymax:t}=a;c=b?b[0]:(l+m)/2;d=b?b[1]:(t+q)/2;a=a.clone();a.xmin=(l-c)*e+c;a.ymax=(t-d)*f+d;a.xmax=(m-
c)*e+c;a.ymin=(q-d)*f+d;a.xmin>a.xmax&&(e=a.xmin,a.xmin=a.xmax,a.xmax=e);a.ymin>a.ymax&&(e=a.ymin,a.ymin=a.ymax,a.ymax=e);return a}c=w.geometryToCoordinates(a);d=z.create();const [k,n,p,x]=A.getRingsOrPathsBounds(d,c);d=b?b[0]:(k+p)/2;b=b?b[1]:(x+n)/2;a=a.clone();g="polyline"===a.type?a.paths:a.rings;for(h=0;h<c.length;h++){const l=c[h];for(let m=0;m<l.length;m++){const q=l[m],[t,y]=q;g[h][m]=v(q,(t-d)*e+d,(y-b)*f+b,void 0)}}"paths"in a?a.paths=g:a.rings=g;return a};Object.defineProperty(r,Symbol.toStringTag,
{value:"Module"})});