// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../core/Evented ../../../core/handleUtils ./EditGeometry ./interfaces ./operations/AppendVertex ./operations/UpdateVertices ./operations/RemoveVertices ./operations/SplitEdge ./operations/SetVertexPosition ./operations/CloseComponent ./operations/MoveVertex ./operations/OffsetEdgeVertex ./operations/RotateVertex ./operations/ScaleVertex ./operations/UndoGroup".split(" "),function(h,l,m,n,d,p,g,q,r,t,u,v,w,x,y,z){class k extends l{constructor(a){super();this.data=a;this._undoStack=
[];this._redoStack=[];this._listener=this.data.on("change",b=>{b.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:b.addedVertices,operation:b.operation});b.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:b.removedVertices,operation:b.operation});b.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:b.updatedVertices,operation:b.operation})})}destroy(){this._listener.remove()}splitEdge(a,b){return this._apply(new r.SplitEdge(this.data,
a,b))}updateVertices(a,b,c=d.AccumulationBehavior.ACCUMULATE_STEPS){return this._apply(new g.UpdateVertices(this.data,a,b),c)}moveVertices(a,b,c,e,f=d.AccumulationBehavior.ACCUMULATE_STEPS){return this.updateVertices(a,new v.MoveVertex(this.data.coordinateHelper,b,c,e),f)}scaleVertices(a,b,c,e,f,A=d.AccumulationBehavior.ACCUMULATE_STEPS,B=g.AccumulationType.CUMULATIVE){return this.updateVertices(a,new y.ScaleVertex(b,c,e,f,B),A)}rotateVertices(a,b,c,e=d.AccumulationBehavior.ACCUMULATE_STEPS,f=g.AccumulationType.CUMULATIVE){return this.updateVertices(a,
new x.RotateVertex(b,c,f),e)}removeVertices(a){return this._apply(new q.RemoveVertices(this.data,a,this._minNumVerticesPerType))}appendVertex(a){return 0===this.data.components.length?null:this._apply(new p.AppendVertex(this.data,this.data.components[0],a))}setVertexPosition(a,b){return this._apply(new t.SetVertexPosition(this.data,a,b))}offsetEdge(a,b,c,e=d.AccumulationBehavior.ACCUMULATE_STEPS){return this.updateVertices([b.leftVertex,b.rightVertex],new w.OffsetEdgeVertex(this.data.coordinateHelper,
a,b,c),e)}closeComponent(a){return this.data.components.includes(a)?this._apply(new u.CloseComponent(this.data,a)):null}canRemoveVertex(a){return a.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const a=new z.UndoGroup;this._apply(a);return m.makeHandle(()=>a.close())}undo(){if(0<this._undoStack.length){const a=this._undoStack.pop();a.undo();this._redoStack.push(a);return a}return null}redo(){if(0<this._redoStack.length){const a=this._redoStack.pop();a.apply();this._undoStack.push(a);
return a}return null}get canUndo(){return 0<this._undoStack.length}get canRedo(){return 0<this._redoStack.length}get lastOperation(){return 0<this._undoStack.length?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case "point":return 1;case "polyline":return 2;case "polygon":return 3;default:return 0}}_apply(a,b=d.AccumulationBehavior.ACCUMULATE_STEPS){b!==d.AccumulationBehavior.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(a)||
(a.apply(),this._undoStack.push(a),this._redoStack=[]);return a}static fromGeometry(a,b){return new k(n.EditGeometry.fromGeometry(a,b))}}h.EditGeometryOperations=k;Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});