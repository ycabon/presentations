// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/support/UpdatingHandles":function(){define("exports ../../chunks/tslib.es6 ../Accessor ../handleUtils ../reactiveUtils ../scheduling ../accessorSupport/decorators/property ../accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f,w){a.UpdatingHandles=class extends y{constructor(){super(...arguments);this.updating=!1;this._scheduleHandleId=this._handleId=0;this._pendingPromises=new Set}destroy(){this.removeAll()}add(d,u,A={}){return this._installWatch(d,u,
A,C.watch)}addWhen(d,u,A={}){return this._installWatch(d,u,A,C.when)}addOnCollectionChange(d,u,{initial:A=!1,final:r=!1}={}){const H=++this._handleId;this.addHandles([C.on(d,"after-changes",this._createSyncUpdatingCallback(),C.sync),C.on(d,"change",u,{onListenerAdd:A?p=>u({added:p.toArray(),removed:[]}):void 0,onListenerRemove:r?p=>u({added:[],removed:p.toArray()}):void 0})],H);return t.makeHandle(()=>this.removeHandles(H))}addPromise(d){if(null==d)return d;const u=++this._handleId;this.addHandles(t.makeHandle(()=>
{this._pendingPromises.delete(d)&&(0!==this._pendingPromises.size||this.hasHandles(-42)||this._set("updating",!1))}),u);this._pendingPromises.add(d);this._set("updating",!0);const A=()=>this.removeHandles(u);d.then(A,A);return d}removeAll(){this._pendingPromises.clear();this.removeAllHandles();this._set("updating",!1)}_installWatch(d,u,A={},r){const H=++this._handleId;A.sync||this._installSyncUpdatingWatch(d,H);d=r(d,u,A);this.addHandles(d,H);return t.makeHandle(()=>this.removeHandles(H))}_installSyncUpdatingWatch(d,
u){const A=this._createSyncUpdatingCallback();d=C.watch(d,A,{sync:!0,equals:()=>!1});this.addHandles(d,u);return d}_createSyncUpdatingCallback(){return()=>{this.removeHandles(-42);++this._scheduleHandleId;const d=this._scheduleHandleId;this._get("updating")||this._set("updating",!0);this.addHandles(z.schedule(()=>{d===this._scheduleHandleId&&(this._set("updating",0<this._pendingPromises.size),this.removeHandles(-42))}),-42)}}};c.__decorate([f.property({readOnly:!0})],a.UpdatingHandles.prototype,"updating",
void 0);a.UpdatingHandles=c.__decorate([w.subclass("esri.core.support.UpdatingHandles")],a.UpdatingHandles);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../core/arrayUtils ../../../core/Error ../../../core/Evented ../../../core/Logger ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../featureConversionUtils ./BoundsStore ./geometryUtils ./optimizedFeatureQueryEngineAdapter".split(" "),
function(a,c,y,t,C,z,f,w,d,u){const A=C.create();class r{constructor(H){this.geometryInfo=H;this._boundsStore=new w.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new y;this.featureAdapter=u.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let H=
0;this._featuresById.forEach(p=>{null!=p.geometry&&p.geometry.coords&&(H+=p.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:H/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(H){if(null==this.fullBounds)return null;const [p,h,b,k]=this.fullBounds;return{xmin:p,ymin:h,xmax:b,ymax:k,spatialReference:d.cleanFromGeometryEngine(H)}}add(H){this._add(H);this._emitChanged()}addMany(H){for(const p of H)this._add(p);this._emitChanged()}upsertMany(H){H=H.map(p=>this._upsert(p));
this._emitChanged();return H.filter(a.isSome)}clear(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()}removeById(H){H=this._featuresById.get(H);if(!H)return null;this._remove(H);this._emitChanged();return H}removeManyById(H){this._boundsStore.invalidateIndex();for(const p of H)(H=this._featuresById.get(p))&&this._remove(H);this._emitChanged()}forEachBounds(H,p){for(const h of H)(H=this._boundsStore.get(h.objectId))&&p(C.fromRect(A,H))}getFeature(H){return this._featuresById.get(H)}has(H){return this._featuresById.has(H)}forEach(H){this._featuresById.forEach(p=>
H(p))}forEachInBounds(H,p){this._boundsStore.forEachInBounds(H,h=>{p(this._featuresById.get(h))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex();this._markedIds.clear()}sweep(){let H=!1;this._featuresById.forEach((p,h)=>{this._markedIds.has(h)||(H=!0,this._remove(p))});this._markedIds.clear();H&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(H){if(H){var p=H.objectId;if(null==p)t.getLogger("esri.layers.graphics.data.FeatureStore").error(new c("featurestore:invalid-feature",
"feature id is missing",{feature:H}));else{var h=this._featuresById.get(p);this._markedIds.add(p);if(h){H.displayId=h.displayId;var b=this._boundsStore.get(p);this._boundsStore.delete(p)}else if(null!=this.onFeatureAdd)this.onFeatureAdd(H);H.geometry?.coords?.length?(b=f.getBoundsOptimizedGeometry(null!=b?b:z.create(),H.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=b&&this._boundsStore.set(p,b)):this._boundsStore.set(p,null);this._featuresById.set(p,H)}}}_upsert(H){const p=H?.objectId;
if(null==p)return t.getLogger("esri.layers.graphics.data.FeatureStore").error(new c("featurestore:invalid-feature","feature id is missing",{feature:H})),null;const h=this._featuresById.get(p);if(!h)return this._add(H),H;this._markedIds.add(p);const {geometry:b,attributes:k}=H;for(const x in k)h.attributes[x]=k[x];b&&(h.geometry=b,this._boundsStore.set(p,f.getBoundsOptimizedGeometry(z.create(),b,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null));return h}_remove(H){if(null!=this.onFeatureRemove)this.onFeatureRemove(H);
const p=H.objectId;this._markedIds.delete(p);this._boundsStore.delete(p);this._featuresById.delete(p);return H}}return r})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../Extent","./aaBoundingRect"],function(a,c,y){function t(h=H){return[h[0],h[1],h[2],h[3],h[4],h[5]]}function C(h,b,k,x,F,M,g=t()){g[0]=h;g[1]=b;g[2]=k;g[3]=x;g[4]=F;g[5]=M;return g}function z(h){return h[0]>=h[3]?0:h[3]-h[0]}function f(h){return h[1]>=h[4]?0:h[4]-h[1]}function w(h){return h[2]>=h[5]?0:h[5]-
h[2]}function d(h,b){return Math.max(b[0],h[0])<=Math.min(b[3],h[3])&&Math.max(b[1],h[1])<=Math.min(b[4],h[4])&&Math.max(b[2],h[2])<=Math.min(b[5],h[5])}function u(h,b){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];h[4]=b[4];h[5]=b[5];return h}function A(h){return 6===h.length}const r=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],H=[0,0,0,0,0,0],p=t();a.allFinite=function(h){for(let b=0;6>b;b++)if(!isFinite(h[b]))return!1;return!0};a.center=function(h,b=[0,0,0]){b[0]=h[0]+z(h)/2;b[1]=h[1]+
f(h)/2;b[2]=h[2]+w(h)/2;return b};a.contains=function(h,b){return b[0]>=h[0]&&b[1]>=h[1]&&b[2]>=h[2]&&b[3]<=h[3]&&b[4]<=h[4]&&b[5]<=h[5]};a.containsPoint=function(h,b){return b[0]>=h[0]&&b[1]>=h[1]&&b[2]>=h[2]&&b[0]<=h[3]&&b[1]<=h[4]&&b[2]<=h[5]};a.containsPointWithMargin=function(h,b,k){return b[0]>=h[0]-k&&b[1]>=h[1]-k&&b[2]>=h[2]-k&&b[0]<=h[3]+k&&b[1]<=h[4]+k&&b[2]<=h[5]+k};a.create=t;a.depth=f;a.diameter=function(h){const b=z(h),k=w(h);h=f(h);return Math.sqrt(b*b+k*k+h*h)};a.empty=function(h){return h?
u(h,r):t(r)};a.equals=function(h,b,k){if(null==h||null==b)return h===b;if(!A(h)||!A(b))return!1;if(k)for(let x=0;x<h.length;x++){if(!k(h[x],b[x]))return!1}else for(k=0;k<h.length;k++)if(h[k]!==b[k])return!1;return!0};a.expandWithAABB=function(h,b){h[0]=Math.min(h[0],b[0]);h[1]=Math.min(h[1],b[1]);h[2]=Math.min(h[2],b[2]);h[3]=Math.max(h[3],b[3]);h[4]=Math.max(h[4],b[4]);h[5]=Math.max(h[5],b[5])};a.expandWithBuffer=function(h,b,k=0,x=b.length/3){let F=h[0],M=h[1],g=h[2],J=h[3],R=h[4],m=h[5];for(let v=
0;v<x;v++)F=Math.min(F,b[k+3*v]),M=Math.min(M,b[k+3*v+1]),g=Math.min(g,b[k+3*v+2]),J=Math.max(J,b[k+3*v]),R=Math.max(R,b[k+3*v+1]),m=Math.max(m,b[k+3*v+2]);h[0]=F;h[1]=M;h[2]=g;h[3]=J;h[4]=R;h[5]=m};a.expandWithNestedArray=function(h,b,k){const x=b.length;let F=h[0],M=h[1],g=h[2],J=h[3],R=h[4],m=h[5];if(k)for(k=0;k<x;k++){var v=b[k];F=Math.min(F,v[0]);M=Math.min(M,v[1]);g=Math.min(g,v[2]);J=Math.max(J,v[0]);R=Math.max(R,v[1]);m=Math.max(m,v[2])}else for(k=0;k<x;k++)v=b[k],F=Math.min(F,v[0]),M=Math.min(M,
v[1]),J=Math.max(J,v[0]),R=Math.max(R,v[1]);h[0]=F;h[1]=M;h[2]=g;h[3]=J;h[4]=R;h[5]=m};a.expandWithOffset=function(h,b,k,x){h[0]=Math.min(h[0],h[0]+b);h[3]=Math.max(h[3],h[3]+b);h[1]=Math.min(h[1],h[1]+k);h[4]=Math.max(h[4],h[4]+k);h[2]=Math.min(h[2],h[2]+x);h[5]=Math.max(h[5],h[5]+x)};a.expandWithRect=function(h,b){h[0]=Math.min(h[0],b[0]);h[1]=Math.min(h[1],b[1]);h[3]=Math.max(h[3],b[2]);h[4]=Math.max(h[4],b[3])};a.expandWithVec3=function(h,b){h[0]=Math.min(h[0],b[0]);h[1]=Math.min(h[1],b[1]);h[2]=
Math.min(h[2],b[2]);h[3]=Math.max(h[3],b[0]);h[4]=Math.max(h[4],b[1]);h[5]=Math.max(h[5],b[2])};a.fromExtent=function(h,b=t()){b[0]=h.xmin;b[1]=h.ymin;b[2]=h.hasZ?h.zmin:-Infinity;b[3]=h.xmax;b[4]=h.ymax;b[5]=h.hasZ?h.zmax:Infinity;return b};a.fromMinMax=function(h,b,k=t()){k[0]=h[0];k[1]=h[1];k[2]=h[2];k[3]=b[0];k[4]=b[1];k[5]=b[2];return k};a.fromRect=function(h,b){h[0]=b[0];h[1]=b[1];h[2]=Number.NEGATIVE_INFINITY;h[3]=b[2];h[4]=b[3];h[5]=Number.POSITIVE_INFINITY;return h};a.fromRectValues=function(h,
b,k,x,F){h[0]=b;h[1]=k;h[2]=Number.NEGATIVE_INFINITY;h[3]=x;h[4]=F;h[5]=Number.POSITIVE_INFINITY;return h};a.fromValues=C;a.getMax=function(h,b){b[0]=h[3];b[1]=h[4];b[2]=h[5];return b};a.getMin=function(h,b){b[0]=h[0];b[1]=h[1];b[2]=h[2];return b};a.height=w;a.intersects=d;a.intersectsClippingArea=function(h,b){return null==b?!0:d(h,b)};a.is=A;a.isPoint=function(h){return 0===z(h)&&0===f(h)&&0===w(h)};a.maximumDimension=function(h){return Math.max(z(h),w(h),f(h))};a.negativeInfinity=r;a.offset=function(h,
b,k,x,F=h){F[0]=h[0]+b;F[1]=h[1]+k;F[2]=h[2]+x;F[3]=h[3]+b;F[4]=h[4]+k;F[5]=h[5]+x;return F};a.positiveInfinity=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];a.scale=function(h,b,k=h){const x=h[0]+z(h)/2,F=h[1]+f(h)/2,M=h[2]+w(h)/2;k[0]=x+(h[0]-x)*b;k[1]=F+(h[1]-F)*b;k[2]=M+(h[2]-M)*b;k[3]=x+(h[3]-x)*b;k[4]=F+(h[4]-F)*b;k[5]=M+(h[5]-M)*b;return k};a.set=u;a.setMax=function(h,b,k=h){k[3]=b[0];k[4]=b[1];k[5]=b[2];k!==h&&(k[0]=h[0],k[1]=h[1],k[2]=h[2]);return h};a.setMin=function(h,b,k=
h){k[0]=b[0];k[1]=b[1];k[2]=b[2];k!==h&&(k[3]=h[3],k[4]=h[4],k[5]=h[5]);return k};a.size=function(h,b=[0,0,0]){b[0]=z(h);b[1]=f(h);b[2]=w(h);return b};a.toExtent=function(h,b){return isFinite(h[2])||isFinite(h[5])?new c({xmin:h[0],xmax:h[3],ymin:h[1],ymax:h[4],zmin:h[2],zmax:h[5],spatialReference:b}):new c({xmin:h[0],xmax:h[3],ymin:h[1],ymax:h[4],spatialReference:b})};a.toRect=function(h,b){b||=y.create();b[0]=h[0];b[1]=h[1];b[2]=h[3];b[3]=h[4];return b};a.width=z;a.wrap=function(h,b,k,x,F,M){return C(h,
b,k,x,F,M,p)};a.zero=H;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Error ../../core/Logger ../../core/maybe ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(a,c,y,t,C,z,f,w,d,u){function A(I,O){return I?O?4:3:O?3:2}function r(I,O,Q,W){if(I){if(Q)return O&&
W?L:Va;if(O&&W)return n}else if(O&&W)return Va;return Sa}function H({scale:I,translate:O},Q){return Math.round((Q-O[0])/I[0])}function p({scale:I,translate:O},Q){return Math.round((O[1]-Q)/I[1])}function h({scale:I,translate:O},Q,W){return Q*I[W]+O[W]}function b(I){I=I.coords;return{x:I[0],y:I[1]}}function k(I,O){I.coords[0]=O.x;I.coords[1]=O.y;return I}function x(I){I=I.coords;return{x:I[0],y:I[1],z:I[2]}}function F(I,O){I.coords[0]=O.x;I.coords[1]=O.y;I.coords[2]=O.z;return I}function M(I){I=I.coords;
return{x:I[0],y:I[1],m:I[2]}}function g(I,O){I.coords[0]=O.x;I.coords[1]=O.y;I.coords[2]=O.m;return I}function J(I){I=I.coords;return{x:I[0],y:I[1],z:I[2],m:I[3]}}function R(I,O){I.coords[0]=O.x;I.coords[1]=O.y;I.coords[2]=O.z;I.coords[3]=O.m;return I}function m(I,O){return I&&O?R:I?F:O?g:k}function v(I,O,Q,W,Z){Q=m(Q,W);for(const {geometry:ba,attributes:da}of O)O=null!=ba?Q(new u,ba):null,I.push(new w.OptimizedFeature(O,da,null,Z?da[Z]:void 0));return I}function E(I,O,Q=m(null!=O.z,null!=O.m)){return Q(I,
O)}function N(I,O,Q,W){for(const {geometry:Z,attributes:ba}of O)I.push({attributes:ba,geometry:null!=Z?l(Z,Q,W):null});return I}function l(I,O,Q){if(null==I)return null;const W=A(O,Q),Z=[];for(let ba=0;ba<I.coords.length;ba+=W){const da=[];for(let ia=0;ia<W;ia++)da.push(I.coords[ba+ia]);Z.push(da)}return O?Q?{points:Z,hasZ:O,hasM:Q}:{points:Z,hasZ:O}:Q?{points:Z,hasM:Q}:{points:Z}}function B(I,O,Q,W,Z){Q=A(Q,W);for(const {geometry:ba,attributes:da}of O)O=null!=ba?D(new u,ba,Q):null,I.push(new w.OptimizedFeature(O,
da,null,Z?da[Z]:void 0));return I}function D(I,O,Q=A(O.hasZ,O.hasM)){I.lengths[0]=O.points.length;const W=I.coords;let Z=0;for(const ba of O.points)for(O=0;O<Q;O++)W[Z++]=ba[O];return I}function G(I,O,Q){if(!I)return null;const W=A(O,Q),{coords:Z,lengths:ba}=I;I=[];let da=0;for(const ia of ba){const ka=[];for(let ra=0;ra<ia;ra++){const oa=[];for(let qa=0;qa<W;qa++)oa.push(Z[da++]);ka.push(oa)}I.push(ka)}return O?Q?{paths:I,hasZ:O,hasM:Q}:{paths:I,hasZ:O}:Q?{paths:I,hasM:Q}:{paths:I}}function S(I,
O,Q,W,Z){Q=A(Q,W);for(const {geometry:ba,attributes:da,centroid:ia}of O)O=null!=ba?P(new u,ba,Q):null,W=null!=ia?E(new u,ia):null,I.push(new w.OptimizedFeature(O,da,W,Z?da[Z]:void 0));return I}function P(I,O,Q=A(O.hasZ,O.hasM)){const {lengths:W,coords:Z}=I;let ba=0;for(const da of O.paths){for(const ia of da)for(O=0;O<Q;O++)Z[ba++]=ia[O];W.push(da.length)}return I}function U(I,O,Q){if(!I)return null;const W=A(O,Q),{coords:Z,lengths:ba}=I;I=[];let da=0;for(const ia of ba){const ka=[];for(let ra=0;ra<
ia;ra++){const oa=[];for(let qa=0;qa<W;qa++)oa.push(Z[da++]);ka.push(oa)}I.push(ka)}return O?Q?{rings:I,hasZ:O,hasM:Q}:{rings:I,hasZ:O}:Q?{rings:I,hasM:Q}:{rings:I}}function Y(I,O,Q=O.hasZ,W=O.hasM){return ea(I,O.rings,Q,W)}function ea(I,O,Q,W){Q=A(Q,W);const {lengths:Z,coords:ba}=I;W=0;Da(I);for(const da of O){for(const ia of da)for(O=0;O<Q;O++)ba[W++]=ia[O];Z.push(da.length)}return I}function la(I,O,Q,W,Z,ba){Ia(I);if(!Q){for(const da of O)I.push(new w.OptimizedFeature(null,da.attributes,null,ba?
da.attributes[ba]:void 0));return I}switch(Q){case "esriGeometryPoint":return v(I,O,W,Z,ba);case "esriGeometryMultipoint":return B(I,O,W,Z,ba);case "esriGeometryPolyline":return S(I,O,W,Z,ba);case "esriGeometryPolygon":for(const {geometry:da,centroid:ia,attributes:ka}of O)O=null!=da?Y(new u,da,W,Z):null,Q=ba?ka[ba]:void 0,null!=ia?I.push(new w.OptimizedFeature(O,ka,k(new u,ia),Q)):I.push(new w.OptimizedFeature(O,ka,null,Q));break;default:Ra().error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Q}'`)),
Ia(I)}return I}function na(I,O,Q,W){I=I&&("coords"in I?I:I.geometry);if(null==I)return null;switch(O){case "esriGeometryPoint":return O=b,Q&&W?O=J:Q?O=x:W&&(O=M),O(I);case "esriGeometryMultipoint":return l(I,Q,W);case "esriGeometryPolyline":return G(I,Q,W);case "esriGeometryPolygon":return U(I,Q,W);default:return Ra().error("convertToGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${O}'`)),null}}function sa(I,O,Q,W,Z){Ia(I);if(null==Q){for(const da of O)I.push({attributes:da.attributes});
return I}switch(Q){case "esriGeometryPoint":Q=b;W&&Z?Q=J:W?Q=x:Z&&(Q=M);for(var ba of O){const {geometry:da,attributes:ia}=ba;W=null!=da?Q(da):null;I.push({attributes:ia,geometry:W})}break;case "esriGeometryMultipoint":return N(I,O,W,Z);case "esriGeometryPolyline":for(const {geometry:da,attributes:ia}of O)I.push({attributes:ia,geometry:null!=da?G(da,W,Z):null});break;case "esriGeometryPolygon":for(const {geometry:da,attributes:ia,centroid:ka}of O)ba=null!=da?U(da,W,Z):null,null!=ka?(O=b(ka),I.push({attributes:ia,
centroid:O,geometry:ba})):I.push({attributes:ia,geometry:ba});break;default:Ra().error("convertToFeatureSet:unknown-geometry",new c(`Unable to parse unknown geometry type '${Q}'`))}return I}function ua(I,O,Q,W,Z,ba,da=Q,ia=W){Da(I);if(!O?.coords.length)return null;Z=Na[Z];const {coords:ka,lengths:ra}=O;O=A(Q,W);const oa=A(Q&&da,W&&ia);Q=r(Q,W,da,ia);if(!ra.length)return Q(I.coords,ka,0,0,H(ba,ka[0]),p(ba,ka[1])),Da(I,O,0),I;let qa,Ca=0,va,Ba=0;for(const Aa of ra){if(Aa<Z)continue;let ya=0;va=Ba;ia=
W=H(ba,ka[Ca]);qa=da=p(ba,ka[Ca+1]);Q(I.coords,ka,va,Ca,ia,qa);ya++;Ca+=O;va+=oa;for(let Ha=1;Ha<Aa;Ha++,Ca+=O)if(ia=H(ba,ka[Ca]),qa=p(ba,ka[Ca+1]),ia!==W||qa!==da)Q(I.coords,ka,va,Ca,ia-W,qa-da),va+=oa,ya++,W=ia,da=qa;ya>=Z&&(I.lengths.push(ya),Ba=va)}Ia(I.coords,Ba);return I.coords.length?I:null}function ta(I,O,Q,W,Z,ba,da){let ia=W,ka=0;for(let oa=ba+Q;oa<da;oa+=Q){var ra=O[oa];const qa=O[oa+1],Ca=O[da],va=O[da+1];let Ba=O[ba],Aa=O[ba+1],ya=Ca-Ba,Ha=va-Aa;if(0!==ya||0!==Ha){const Pa=((ra-Ba)*ya+
(qa-Aa)*Ha)/(ya*ya+Ha*Ha);1<Pa?(Ba=Ca,Aa=va):0<Pa&&(Ba+=ya*Pa,Aa+=Ha*Pa)}ya=ra-Ba;Ha=qa-Aa;ra=ya*ya+Ha*Ha;ra>ia&&(ka=oa,ia=ra)}ia>W&&(ka-ba>Q&&ta(I,O,Q,W,Z,ba,ka),Z(I,O,I.length,ka,O[ka],O[ka+1]),da-ka>Q&&ta(I,O,Q,W,Z,ka,da))}function wa(I,O,Q,W,Z){const {coords:ba,lengths:da}=O;Q=A(Q,W);if(!ba.length)return I!==O&&Da(I),I;t.assertIsSome(Z);const {originPosition:ia,scale:ka,translate:ra}=Z;Z=ha;Z.originPosition=ia;W=Z.scale;W[0]=ka[0]??1;W[1]=-(ka[1]??1);W[2]=ka[2]??1;W[3]=ka[3]??1;var oa=Z.translate;
oa[0]=ra[0]??0;oa[1]=ra[1]??0;oa[2]=ra[2]??0;oa[3]=ra[3]??0;if(!da.length){for(W=0;W<Q;++W)I.coords[W]=h(Z,ba[W],W);I!==O&&Da(I,Q,0);return I}oa=0;for(let Ca=0;Ca<da.length;Ca++){const va=da[Ca];I.lengths[Ca]=va;for(var qa=0;qa<Q;++qa)I.coords[oa+qa]=h(Z,ba[oa+qa],qa);qa=I.coords[oa];let Ba=I.coords[oa+1];oa+=Q;for(let Aa=1;Aa<va;Aa++,oa+=Q){qa+=ba[oa]*W[0];Ba+=ba[oa+1]*W[1];I.coords[oa]=qa;I.coords[oa+1]=Ba;for(let ya=2;ya<Q;++ya)I.coords[oa+ya]=h(Z,ba[oa+ya],ya)}}I!==O&&Da(I,ba.length,da.length);
return I}function xa(I,O,Q,W){let Z=0,ba=I[W*O],da=I[W*(O+1)];for(let ia=1;ia<Q;ia++){const ka=ba+I[W*(O+ia)],ra=da+I[W*(O+ia)+1],oa=(ka-ba)*(ra+da);ba=ka;da=ra;Z+=oa}return.5*Z}function Da(I,O=0,Q=0){Ia(I.lengths,Q);Ia(I.coords,O)}function Ia(I,O=0){I.length!==O&&(I.length=O)}const Ra=()=>y.getLogger("esri.layers.graphics.featureConversionUtils"),Na={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},Sa=(I,O,Q,W,Z,ba)=>{I[Q]=Z;I[Q+1]=
ba},Va=(I,O,Q,W,Z,ba)=>{I[Q]=Z;I[Q+1]=ba;I[Q+2]=O[W+2]},n=(I,O,Q,W,Z,ba)=>{I[Q]=Z;I[Q+1]=ba;I[Q+2]=O[W+3]},L=(I,O,Q,W,Z,ba)=>{I[Q]=Z;I[Q+1]=ba;I[Q+2]=O[W+2];I[Q+3]=O[W+3]},X=[],aa=[],ha={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};a.convertFromFeature=function(I,O,Q,W,Z){X[0]=I;[I]=la(aa,X,O,Q,W,Z);Ia(X);Ia(aa);return I};a.convertFromFeatureSet=function(I,O){const Q=new d,{hasM:W,hasZ:Z,features:ba,objectIdFieldName:da,spatialReference:ia,geometryType:ka,exceededTransferLimit:ra,
transform:oa,fields:qa}=I;qa&&(Q.fields=qa);Q.geometryType=ka??null;Q.objectIdFieldName=da??O??null;Q.spatialReference=ia??null;if(!Q.objectIdFieldName)return Ra().error(new c("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Q;ba&&la(Q.features,ba,ka,Z,W,Q.objectIdFieldName);ra&&(Q.exceededTransferLimit=ra);W&&(Q.hasM=W);Z&&(Q.hasZ=Z);oa&&(Q.transform=oa);return Q};a.convertFromFeatures=la;a.convertFromGeometry=function(I,O,Q){if(null==I)return null;const W=new u;"hasZ"in
I&&null==O&&(O=I.hasZ);"hasM"in I&&null==Q&&(Q=I.hasM);if(f.isPoint(I))return m(null!=O?O:null!=I.z,null!=Q?Q:null!=I.m)(W,I);if(f.isPolygon(I))return Y(W,I,O,Q);if(f.isPolyline(I))return P(W,I,A(O,Q));if(f.isMultipoint(I))return D(W,I,A(O,Q));Ra().error("convertFromGeometry:unknown-geometry",new c(`Unable to parse unknown geometry type '${I}'`))};a.convertFromMultipoint=D;a.convertFromMultipointFeatures=B;a.convertFromNestedArray=ea;a.convertFromPoint=E;a.convertFromPointFeatures=v;a.convertFromPolygon=
Y;a.convertFromPolyline=P;a.convertFromPolylineFeatures=S;a.convertToFeature=function(I,O,Q,W){aa[0]=I;sa(X,aa,O,Q,W);I=X[0];Ia(X);Ia(aa);return I};a.convertToFeatureSet=function(I){const {objectIdFieldName:O,spatialReference:Q,transform:W,fields:Z,hasM:ba,hasZ:da,features:ia,geometryType:ka,exceededTransferLimit:ra,uniqueIdField:oa,queryGeometry:qa,queryGeometryType:Ca}=I;I=sa([],ia,ka,da,ba);const va=na(qa,Ca,!1,!1);I={features:I,fields:Z,geometryType:ka,objectIdFieldName:O,spatialReference:Q,uniqueIdField:oa,
queryGeometry:va};W&&(I.transform=W);ra&&(I.exceededTransferLimit=ra);ba&&(I.hasM=ba);da&&(I.hasZ=da);return I};a.convertToFeatures=sa;a.convertToGeometry=na;a.convertToMultipoint=l;a.convertToMultipointFeatures=N;a.convertToPoint=function(I,O,Q){return I?O?Q?J(I):x(I):Q?M(I):b(I):null};a.convertToPolygon=U;a.convertToPolyline=G;a.deltaDecodeGeometry=function(I,O){if(null==I)return null;const Q=I.clone(),W=I.coords;I=I.lengths;let Z=0;for(let ia=0;ia<I.length;ia++){const ka=I[ia];var ba=W[O*Z],da=
W[O*Z+1];for(let ra=1;ra<ka;ra++)ba+=W[O*(Z+ra)],da+=W[O*(Z+ra)+1],Q.coords[O*(Z+ra)]=ba,Q.coords[O*(Z+ra)+1]=da;Z+=ka}return Q};a.deltaEncodeGeometry=function(I,O){const Q=I.clone(),W=I.coords;I=I.lengths;let Z=0;for(let da=0;da<I.length;da++){const ia=I[da];let ka=W[O*Z];var ba=W[O*Z+1];for(let ra=1;ra<ia;ra++){const oa=W[O*(Z+ra)],qa=W[O*(Z+ra)+1];ba=qa-ba;Q.coords[O*(Z+ra)]=oa-ka;Q.coords[O*(Z+ra)+1]=ba;ka=oa;ba=qa}Z+=ia}return Q};a.generalizeOptimizedGeometry=function(I,O,Q,W,Z,ba,da=Q,ia=W){Da(I);
if(!O?.coords.length)return null;Z=Na[Z];const {coords:ka,lengths:ra}=O;O=A(Q,W);const oa=A(Q&&da,W&&ia);Q=r(Q,W,da,ia);if(!ra.length)return Q(I.coords,ka,0,0,ka[0],ka[1]),Da(I,O,0),I;W=0;ba*=ba;for(const qa of ra){if(qa<Z){W+=qa*O;continue}da=I.coords.length/oa;ia=W;const Ca=W+(qa-1)*O;Q(I.coords,ka,I.coords.length,ia,ka[ia],ka[ia+1]);ta(I.coords,ka,O,ba,Q,ia,Ca);Q(I.coords,ka,I.coords.length,Ca,ka[Ca],ka[Ca+1]);ia=I.coords.length/oa-da;ia>=Z?I.lengths.push(ia):Ia(I.coords,da*oa);W+=qa*O}return I.coords.length?
I:null};a.getBoundsOptimizedGeometry=function(I,O,Q,W){if(!O?.coords?.length)return null;Q=A(Q,W);let Z=W=Number.POSITIVE_INFINITY,ba=Number.NEGATIVE_INFINITY,da=Number.NEGATIVE_INFINITY;if(O&&O.coords){O=O.coords;for(let ia=0;ia<O.length;ia+=Q){const ka=O[ia],ra=O[ia+1];W=Math.min(W,ka);ba=Math.max(ba,ka);Z=Math.min(Z,ra);da=Math.max(da,ra)}}C.is(I)?C.fromRectValues(I,W,Z,ba,da):z.fromValues(W,Z,ba,da,I);return I};a.getQuantizedArea=function(I,O){const {coords:Q,lengths:W}=I;let Z=I=0;for(let ba=
0;ba<W.length;ba++){const da=W[ba];Z+=xa(Q,I,da,O);I+=da}return Math.abs(Z)};a.getQuantizedBoundsOptimizedGeometry=function(I,O,Q,W){Q=A(Q,W);const {lengths:Z,coords:ba}=O;W=O=Number.POSITIVE_INFINITY;let da=Number.NEGATIVE_INFINITY,ia=Number.NEGATIVE_INFINITY,ka=0;for(const ra of Z){let oa=ba[ka],qa=ba[ka+1];O=Math.min(oa,O);W=Math.min(qa,W);da=Math.max(oa,da);ia=Math.max(qa,ia);ka+=Q;for(let Ca=1;Ca<ra;Ca++,ka+=Q){const va=ba[ka],Ba=ba[ka+1];oa+=va;qa+=Ba;0>va&&(O=Math.min(O,oa));0<va&&(da=Math.max(da,
oa));0>Ba?W=Math.min(W,qa):0<Ba&&(ia=Math.max(ia,qa))}}I[0]=O;I[1]=W;I[2]=da;I[3]=ia;return I};a.getSignedQuantizedRingArea=xa;a.quantizeOptimizedFeatureSet=function(I,O){const {geometryType:Q,features:W,hasM:Z,hasZ:ba}=O;if(!I)return O;for(let da=0;da<W.length;da++){const ia=W[da],ka=ia.weakClone();ka.geometry=new u;ua(ka.geometry,ia.geometry,Z,ba,Q,I);ia.centroid&&(ka.centroid=new u,ua(ka.centroid,ia.centroid,Z,ba,"esriGeometryPoint",I));W[da]=ka}O.transform=I;return O};a.quantizeOptimizedGeometry=
ua;a.quantizeX=H;a.quantizeY=p;a.removeCollinearVertices=function(I,O,Q,W,Z){if(!O?.coords?.length)return null;Q=Na[Q];const {coords:ba,lengths:da}=O;O=r(W,Z,W,Z);W=A(W,Z);let ia=Z=0,ka=0,ra=0;for(const Ca of da){ia=ra;O(I.coords,ba,ia,Z,ba[Z],ba[Z+1]);Z+=W;var oa=ba[Z];let va=ba[Z+1],Ba=oa,Aa=va;var qa=va/oa;ia+=W;O(I.coords,ba,ia,Z,Ba,Aa);Z+=W;for(let ya=2;ya<Ca;ya++){oa=ba[Z];va=ba[Z+1];const Ha=va/oa,Pa=qa===Ha||!isFinite(qa)&&!isFinite(Ha);qa=Pa&&isFinite(Ha)?0<=qa&&0<=Ha||0>=qa&&0>=Ha:0<=Aa&&
0<=va||0>=Aa&&0>=va;Pa&&qa?(Ba+=oa,Aa+=va):(Ba=oa,Aa=va,ia+=W);O(I.coords,ba,ia,Z,Ba,Aa);Z+=W;qa=Ha}ia+=W;oa=(ia-ra)/W;oa>=Q&&(I.lengths[ka]=oa,ra=ia,ka++)}I.coords.length>ra&&(I.coords.length=ra);I.lengths.length>ka&&(I.lengths.length=ka);return I.coords.length&&I.lengths.length?I:null};a.removeZMValues=function(I,O,Q,W,Z,ba){Da(I);I.lengths.push(...O.lengths);if(Q===Z&&W===ba)for(var da=0;da<O.coords.length;da++)I.coords.push(O.coords[da]);else for(da=A(Q,W),Q=r(Q,W,Z,ba),O=O.coords,W=0;W<O.length;W+=
da)Q(I.coords,O,I.coords.length,W,O[W],O[W+1]);return I};a.unquantizeOptimizedFeatureSet=function(I){const {transform:O,features:Q,hasM:W,hasZ:Z}=I;if(!O)return I;for(const ba of Q)null!=ba.geometry&&wa(ba.geometry,ba.geometry,W,Z,O),null!=ba.centroid&&wa(ba.centroid,ba.centroid,W,Z,O);I.transform=null;return I};a.unquantizeOptimizedGeometry=wa;a.unquantizeValue=h;a.unquantizeX=function(I,O){return h(I,O,0)};a.unquantizeY=function(I,O){return h(I,-O,1)};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/OptimizedFeature":function(){define(["exports"],function(a){class c{constructor(t=null,C={},z,f){this.geometry=t;this.attributes=C;this.centroid=z;this.objectId=f;this.geohashY=this.geohashX=this.displayId=0}weakClone(){const t=new c(this.geometry,this.attributes,this.centroid,this.objectId);t.displayId=this.displayId;t.geohashX=this.geohashX;t.geohashY=this.geohashY;return t}clone(){var t=this.geometry?.clone();t=new c(t,{...this.attributes},this.centroid?.clone(),
this.objectId);t.displayId=this.displayId;t.geohashX=this.geohashX;t.geohashY=this.geohashY;return t}}class y extends c{}a.OptimizedFeature=c;a.OptimizedFeatureWithGeometry=y;a.hasGeometry=function(t){return!!t.geometry?.coords?.length};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){class a{constructor(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=
this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}weakClone(){const c=new a;c.objectIdFieldName=this.objectIdFieldName;c.globalIdFieldName=this.globalIdFieldName;c.geohashFieldName=this.geohashFieldName;c.geometryProperties=this.geometryProperties;c.geometryType=this.geometryType;c.spatialReference=this.spatialReference;c.hasZ=this.hasZ;c.hasM=this.hasM;
c.features=this.features;c.fields=this.fields;c.transform=this.transform;c.exceededTransferLimit=this.exceededTransferLimit;c.uniqueIdField=this.uniqueIdField;c.queryGeometry=this.queryGeometry;c.queryGeometryType=this.queryGeometryType;return c}}return a})},"esri/layers/graphics/OptimizedGeometry":function(){define(function(){class a{constructor(c=[],y=[],t=!1){this.lengths=c??[];this.coords=y??[];this.hasIndeterminateRingOrder=t}static fromRect(c){const [y,t,C,z]=c;c=C-y;const f=z-t;return new a([5],
[y,t,c,0,0,f,-c,0,0,-f])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((c,y)=>c+y)}forEachVertex(c){let y=0;this.lengths.length||c(this.coords[0],this.coords[1]);for(let t=0;t<this.lengths.length;t++){const C=this.lengths[t];for(let z=0;z<C;z++)c(this.coords[2*(z+y)],this.coords[2*(z+y)+1]);y+=C}}deltaDecode(){const c=this.clone(),{coords:y,lengths:t}=c;let C=0;for(const z of t){for(let f=1;f<z;f++)y[2*(C+f)]+=y[2*
(C+f)-2],y[2*(C+f)+1]+=y[2*(C+f)-1];C+=z}return c}clone(c){if(0===this.lengths.length)return new a([],[this.coords[0],this.coords[1]]);var y=2*(0===this.lengths.length?1:this.lengths.reduce((t,C)=>t+C));y=this.coords.slice(0,y);return c?(c.set(y),new a(this.lengths,c,this.hasIndeterminateRingOrder)):new a(Array.from(this.lengths),Array.from(y),this.hasIndeterminateRingOrder)}}return a})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush",
"../../../geometry/support/aaBoundingRect"],function(a,c,y,t){function C(w,d,u){z.minX=d[0];z.minY=d[1];z.maxX=d[2];z.maxY=d[3];w.search(z,u)}const z={minX:0,minY:0,maxX:0,maxY:0};class f{constructor(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new y.PooledRBush(9,c("esri-csp-restrictions")?w=>({minX:w[0],minY:w[1],maxX:w[2],maxY:w[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const w=Array(this._idByBounds.size);
let d=0;this._idByBounds.forEach((u,A)=>{w[d++]=A});this._indexInvalid=!1;this._index.clear();this._index.load(w)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(w=>this._idByBounds.has(w))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const w=t.empty();for(const d of this._boundsById.values())d&&(w[0]=Math.min(d[0],w[0]),w[1]=Math.min(d[1],w[1]),w[2]=Math.max(d[2],w[2]),w[3]=Math.max(d[3],w[3]));return w}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=
!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()}delete(w){const d=this._boundsById.get(w);this._boundsById.delete(w);d&&(this._idByBounds.delete(d),this._indexInvalid||this._index.remove(d))}forEachInBounds(w,d){this._loadIndex();C(this._index,w,u=>d(this._idByBounds.get(u)))}get(w){return this._boundsById.get(w)}has(w){return this._boundsById.has(w)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(w,
d){if(!this._indexInvalid){const u=this._boundsById.get(w);u&&(this._index.remove(u),this._idByBounds.delete(u))}this._boundsById.set(w,d);d&&(this._idByBounds.set(d,w),this._indexInvalid||(this._boundsToLoad.push(d),5E4<this._boundsToLoad.length&&this._loadIndex()))}}a.BoundsStore=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/rbush/PooledRBush":function(){define(["exports","../../arrayUtils","../../PooledArray","../../../chunks/quickselect"],function(a,c,y,t){function C(m,
v){z(m,0,m.children.length,v,m)}function z(m,v,E,N,l){l||=new J([]);l.minX=Infinity;l.minY=Infinity;l.maxX=-Infinity;l.maxY=-Infinity;for(let B=v,D;B<E;B++)D=m.children[B],f(l,m.leaf?N(D):D);return l}function f(m,v){m.minX=Math.min(m.minX,v.minX);m.minY=Math.min(m.minY,v.minY);m.maxX=Math.max(m.maxX,v.maxX);m.maxY=Math.max(m.maxY,v.maxY)}function w(m,v){return m.minX-v.minX}function d(m,v){return m.minY-v.minY}function u(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function A(m){return m.maxX-m.minX+
(m.maxY-m.minY)}function r(m,v){return m.minX<=v.minX&&m.minY<=v.minY&&v.maxX<=m.maxX&&v.maxY<=m.maxY}function H(m,v){return v.minX<=m.maxX&&v.minY<=m.maxY&&v.maxX>=m.minX&&v.maxY>=m.minY}function p(m,v,E,N,l){for(v=[v,E];v.length;){E=v.pop();const B=v.pop();if(E-B<=N)continue;const D=B+Math.ceil((E-B)/N/2)*N;t.quickselect(m,D,B,E,l);v.push(B,D,D,E)}}class h{constructor(m=9,v){this._compareMinX=w;this._compareMinY=d;this._toBBox=E=>E;this._maxEntries=Math.max(4,m||9);this._minEntries=Math.max(2,Math.ceil(.4*
this._maxEntries));v&&("function"===typeof v?this._toBBox=v:this._initFormat(v));this.clear()}destroy(){this.clear();b.prune();k.prune();x.prune();F.prune()}all(m){this._all(this._data,m)}search(m,v){let E=this._data;const N=this._toBBox;if(H(m,E))for(b.clear();E;){for(let l=0,B=E.children.length;l<B;l++){const D=E.children[l],G=E.leaf?N(D):D;H(m,G)&&(E.leaf?v(D):r(m,G)?this._all(D,v):b.push(D))}E=b.pop()}}collides(m){let v=this._data;const E=this._toBBox;if(!H(m,v))return!1;for(b.clear();v;){for(let N=
0,l=v.children.length;N<l;N++){const B=v.children[N],D=v.leaf?E(B):B;if(H(m,D)){if(v.leaf||r(m,D))return!0;b.push(B)}}v=b.pop()}return!1}load(m){if(!m.length)return this;if(m.length<this._minEntries){for(let v=0,E=m.length;v<E;v++)this.insert(m[v]);return this}m=this._build(m.slice(0,m.length),0,m.length-1,0);if(this._data.children.length)if(this._data.height===m.height)this._splitRoot(this._data,m);else{if(this._data.height<m.height){const v=this._data;this._data=m;m=v}this._insert(m,this._data.height-
m.height-1,!0)}else this._data=m;return this}insert(m){m&&this._insert(m,this._data.height-1);return this}clear(){this._data=new J([]);return this}remove(m){if(!m)return this;let v=this._data,E=null,N=0,l=!1,B;const D=this._toBBox(m);x.clear();for(F.clear();v||0<x.length;){v||(v=x.pop(),E=x.data[x.length-1],N=F.pop()??0,l=!0);if(v.leaf&&(B=c.indexOf(v.children,m,v.children.length,v.indexHint),-1!==B)){v.children.splice(B,1);x.push(v);this._condense(x);break}l||v.leaf||!r(v,D)?E?(N++,v=E.children[N],
l=!1):v=null:(x.push(v),F.push(N),N=0,E=v,v=v.children[0])}return this}toJSON(){return this._data}fromJSON(m){this._data=m;return this}_all(m,v){for(k.clear();m;){if(!0===m.leaf)for(const E of m.children)v(E);else k.pushArray(m.children);m=k.pop()??null}}_build(m,v,E,N){var l=E-v+1,B=this._maxEntries;if(l<=B)return m=new J(m.slice(v,E+1)),C(m,this._toBBox),m;N||(N=Math.ceil(Math.log(l)/Math.log(B)),B=Math.ceil(l/B**(N-1)));const D=new R([]);D.height=N;l=Math.ceil(l/B);B=l*Math.ceil(Math.sqrt(B));
for(p(m,v,E,B,this._compareMinX);v<=E;v+=B){const G=Math.min(v+B-1,E);p(m,v,G,l,this._compareMinY);for(let S=v;S<=G;S+=l)D.children.push(this._build(m,S,Math.min(S+l-1,G),N-1))}C(D,this._toBBox);return D}_chooseSubtree(m,v,E,N){for(;;){N.push(v);if(!0===v.leaf||N.length-1===E)break;let l=Infinity,B=Infinity,D=void 0;for(let G=0,S=v.children.length;G<S;G++){const P=v.children[G],U=u(P),Y=(Math.max(P.maxX,m.maxX)-Math.min(P.minX,m.minX))*(Math.max(P.maxY,m.maxY)-Math.min(P.minY,m.minY))-U;Y<B?(B=Y,
l=U<l?U:l,D=P):Y===B&&U<l&&(l=U,D=P)}v=D||v.children[0]}return v}_insert(m,v,E){var N=this._toBBox;E=E?m:N(m);x.clear();N=this._chooseSubtree(E,this._data,v,x);N.children.push(m);for(f(N,E);0<=v;)if(x.data[v].children.length>this._maxEntries)this._split(x,v),v--;else break;this._adjustParentBBoxes(E,x,v)}_split(m,v){const E=m.data[v];var N=E.children.length;const l=this._minEntries;this._chooseSplitAxis(E,l,N);(N=this._chooseSplitIndex(E,l,N))?(N=E.children.splice(N,E.children.length-N),N=E.leaf?
new J(N):new R(N),N.height=E.height,C(E,this._toBBox),C(N,this._toBBox),v?m.data[v-1].children.push(N):this._splitRoot(E,N)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}_splitRoot(m,v){this._data=new R([m,v]);this._data.height=m.height+1;C(this._data,this._toBBox)}_chooseSplitIndex(m,v,E){let N,l,B=void 0;N=l=Infinity;for(let G=v;G<=E-v;G++){var D=z(m,0,G,this._toBBox);const S=z(m,G,E,this._toBBox),P=Math.max(0,Math.min(D.maxX,S.maxX)-Math.max(D.minX,S.minX))*
Math.max(0,Math.min(D.maxY,S.maxY)-Math.max(D.minY,S.minY));D=u(D)+u(S);P<N?(N=P,B=G,l=D<l?D:l):P===N&&D<l&&(l=D,B=G)}return B}_chooseSplitAxis(m,v,E){const N=m.leaf?this._compareMinX:w,l=m.leaf?this._compareMinY:d,B=this._allDistMargin(m,v,E,N);v=this._allDistMargin(m,v,E,l);B<v&&m.children.sort(N)}_allDistMargin(m,v,E,N){m.children.sort(N);N=this._toBBox;var l=z(m,0,v,N);const B=z(m,E-v,E,N);let D=A(l)+A(B);for(let G=v;G<E-v;G++){const S=m.children[G];f(l,m.leaf?N(S):S);D+=A(l)}for(E=E-v-1;E>=v;E--)l=
m.children[E],f(B,m.leaf?N(l):l),D+=A(B);return D}_adjustParentBBoxes(m,v,E){for(;0<=E;E--)f(v.data[E],m)}_condense(m){for(let v=m.length-1;0<=v;v--){const E=m.data[v];if(0===E.children.length)if(0<v){const N=m.data[v-1],l=N.children;l.splice(c.indexOf(l,E,l.length,N.indexHint),1)}else this.clear();else C(E,this._toBBox)}}_initFormat(m){const v=["return a"," - b",";"];this._compareMinX=new Function("a","b",v.join(m[0]));this._compareMinY=new Function("a","b",v.join(m[1]));this._toBBox=new Function("a",
"return {minX: a"+m[0]+", minY: a"+m[1]+", maxX: a"+m[2]+", maxY: a"+m[3]+"};")}}const b=new y,k=new y,x=new y,F=new y({deallocator:void 0});class M{constructor(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity}}class g extends M{constructor(){super(...arguments);this.height=1;this.indexHint=new c.PositionHint}}class J extends g{constructor(m){super();this.children=m;this.leaf=!0}}class R extends g{constructor(m){super();this.children=m;this.leaf=!1}}a.BBox=M;a.PooledRBush=h;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(a,c){var y={exports:{}};(function(t){(function(C){C=C();void 0!==C&&(t.exports=C)})(function(){function C(w,d,u,A,r){for(;A>u;){if(600<A-u){var H=A-u+1,p=d-u+1,h=Math.log(H),b=.5*Math.exp(2*h/3);h=.5*Math.sqrt(h*b*(H-b)/H)*(0>p-H/2?-1:1);C(w,d,Math.max(u,Math.floor(d-p*b/H+h)),Math.min(A,Math.floor(d+(H-p)*b/H+h)),r)}H=w[d];p=u;b=A;z(w,u,d);for(0<r(w[A],H)&&z(w,u,A);p<b;){z(w,
p,b);p++;for(b--;0>r(w[p],H);)p++;for(;0<r(w[b],H);)b--}0===r(w[u],H)?z(w,u,b):(b++,z(w,b,A));b<=d&&(u=b+1);d<=b&&(A=b-1)}}function z(w,d,u){var A=w[d];w[d]=w[u];w[u]=A}function f(w,d){return w<d?-1:w>d?1:0}return function(w,d,u,A,r){C(w,d,u||0,A||w.length-1,r||f)}})})(y);c=c.getDefaultExportFromCjs(y.exports);a.quickselect=c})},"esri/layers/graphics/data/geometryUtils":function(){define(["exports","../featureConversionUtils","../OptimizedGeometry"],function(a,c,y){const t=new y,C=new y,z=new y,f=
{esriGeometryPoint:c.convertToPoint,esriGeometryPolyline:c.convertToPolyline,esriGeometryPolygon:c.convertToPolygon,esriGeometryMultipoint:c.convertToMultipoint},w=(d,u)=>"_geVersion"!==d?u:void 0;a.cleanFromGeometryEngine=function(d){return d&&"_geVersion"in d?JSON.parse(JSON.stringify(d,w)):d};a.getGeometry=function(d,u,A,r,H,p,h=u,b=A){const k=u&&h,x=A&&b;r=null!=r?"coords"in r?r:r.geometry:null;if(null==r)return null;if(H)return u=c.generalizeOptimizedGeometry(C,r,u,A,d,H,h,b),p&&(u=c.quantizeOptimizedGeometry(z,
u,k,x,d,p)),f[d]?.(u,k,x)??null;if(p)return p=c.quantizeOptimizedGeometry(z,r,u,A,d,p,h,b),f[d]?.(p,k,x)??null;c.removeZMValues(t,r,u,A,h,b);return f[d]?.(t,k,x)??null};a.transformCentroid=function(d,u,A,r=d.hasZ,H=d.hasM){if(null==u)return null;const p=d.hasZ&&r,h=d.hasM&&H;return A?(d=c.quantizeOptimizedGeometry(z,u,d.hasZ,d.hasM,"esriGeometryPoint",A,r,H),c.convertToPoint(d,p,h)):c.convertToPoint(u,p,h)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports",
"../centroid","../OptimizedFeature","../OptimizedGeometry"],function(a,c,y,t){a.optimizedFeatureQueryEngineAdapter={getObjectId(C){return C.objectId},getAttributes(C){return C.attributes},getAttribute(C,z){return C.attributes[z]},cloneWithGeometry(C,z){return new y.OptimizedFeature(z,C.attributes,null,C.objectId)},getGeometry(C){return C.geometry},getCentroid(C,z){null==C.centroid&&(C.centroid=c.getCentroidOptimizedGeometry(new t,C.geometry,z.hasZ,z.hasM));return C.centroid}};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(a){function c(t,C,z,f,w,d){d=w?d?4:3:d?3:2;let u=z,A=z+d,r=0,H=0,p=z=0,h=0;for(let b=0,k=f-1;b<k;b++,u+=d,A+=d){f=C[u];const x=C[u+1],F=C[u+2],M=C[A],g=C[A+1],J=C[A+2];let R=f*g-M*x;p+=R;r+=(f+M)*R;H+=(x+g)*R;w&&(R=f*J-M*F,z+=(F+J)*R,h+=R);f<t[0]&&(t[0]=f);f>t[1]&&(t[1]=f);x<t[2]&&(t[2]=x);x>t[3]&&(t[3]=x);w&&(F<t[4]&&(t[4]=F),F>t[5]&&(t[5]=F))}0<p&&(p*=-1);0<h&&(h*=-1);if(!p)return null;
t=[r,H,.5*p];w&&(t[3]=z,t[4]=.5*h);return t}function y(t,C,z,f,w){w=f?w?4:3:w?3:2;let d=C,u=C+w,A=0,r=0,H=0,p=0;for(let x=0,F=z-1;x<F;x++,d+=w,u+=w){var h=t[d];const M=t[d+1],g=t[d+2],J=t[u],R=t[u+1],m=t[u+2];if(f){var b=J-h;var k=R-M;const v=m-g;b=Math.sqrt(b*b+k*k+v*v)}else b=J-h,k=R-M,b=Math.sqrt(b*b+k*k);b&&(A+=b,f?(h=[h+.5*(J-h),M+.5*(R-M),g+.5*(m-g)],r+=b*h[0],H+=b*h[1],p+=b*h[2]):(h=[h+.5*(J-h),M+.5*(R-M)],r+=b*h[0],H+=b*h[1]))}return 0<A?f?[r/A,H/A,p/A]:[r/A,H/A]:0<z?f?[t[C],t[C+1],t[C+2]]:
[t[C],t[C+1]]:null}a.getCentroidOptimizedGeometry=function(t,C,z,f){if(!C?.lengths.length)return null;t.lengths.length&&(t.lengths.length=0);t.coords.length&&(t.coords.length=0);const w=t.coords,d=[],u=z?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:A,coords:r}=C;var H=z?f?4:3:f?3:2;
let p=0;for(const h of A){const b=c(u,r,p,h,z,f);b&&d.push(b);p+=h*H}d.sort((h,b)=>{let k=h[2]-b[2];0===k&&z&&(k=h[4]-b[4]);return k});d.length&&(H=6*d[0][2],w[0]=d[0][0]/H,w[1]=d[0][1]/H,z&&(H=6*d[0][4],w[2]=0!==H?d[0][3]/H:0),w[0]<u[0]||w[0]>u[1]||w[1]<u[2]||w[1]>u[3]||z&&(w[2]<u[4]||w[2]>u[5]))&&(w.length=0);if(!w.length)if(C=C.lengths[0]?y(r,0,A[0],z,f):null)w[0]=C[0],w[1]=C[1],z&&2<C.length&&(w[2]=C[2]);else return null;return t};a.lineCentroid=y;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../core/arrayUtils ../../../core/Error ../../../core/JSONSupport ../../../core/lang ../../../core/maybe ../../../core/MemCache ../../../core/promiseUtils ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/aaBoundingBox ../../../geometry/support/aaBoundingRect ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./attributeSupport ./geometryUtils ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./queryUtils ./queryValidationUtils ./spatialQuerySupport ./timeSupport ../../support/FieldsIndex ../../../views/support/Scheduler".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x,F,M,g,J,R,m,v,E,N,l){class B{constructor(P,U=null,Y,ea,la){this.attributes=P;this.geometry=Y;this.centroid=ea;this.filterFlags=la;this.groupId=-1;this.displayId=U}}const D=new f.MemCacheStorage(2E6);let G=0;class S{constructor(P){this._changeHandle=this._geometryQueryCache=null;this.capabilities={query:g.queryCapabilities};this.geometryType=P.geometryType;this.hasM=!!P.hasM;this.hasZ=!!P.hasZ;this.objectIdField=P.objectIdField;this.spatialReference=P.spatialReference;
this.definitionExpression=P.definitionExpression;this.featureStore=P.featureStore;this.aggregateAdapter=P.aggregateAdapter;this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=P.timeInfo;P.cacheSpatialQueries&&(this._geometryQueryCache=new f.MemCache(G++ +"$$",D));this.fieldsIndex=t.isSerializable(P.fieldsIndex)?P.fieldsIndex:N.fromJSON(P.fieldsIndex);this.availableFields=null==P.availableFields?new Set(this.fieldsIndex.fields.map(U=>U.name)):new Set(P.availableFields.map(U=>
this.fieldsIndex.get(U)?.name).filter(U=>null!=U));P.scheduler&&P.priority&&(this._frameTask=P.scheduler.registerTask(P.priority))}destroy(){this._frameTask=z.removeMaybe(this._frameTask);this.clearCache();z.destroyMaybe(this._geometryQueryCache);this._changeHandle=z.removeMaybe(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear();this._fullExtentPromise=this._timeExtentPromise=this._allFeaturesPromise=null}async executeQuery(P,
U){U=w.signalFromSignalOrOptions(U);try{return(await this._executeQuery(P,{},U)).createQueryResponse()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return(new J.QueryEngineResult([],P,this)).createQueryResponse()}}async executeQueryForCount(P={},U){U=w.signalFromSignalOrOptions(U);try{return(await this._executeQuery(P,{returnGeometry:!1,returnCentroid:!1,outSR:null},U)).createQueryResponseForCount()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return 0}}async executeQueryForExtent(P,U){U=
w.signalFromSignalOrOptions(U);const Y=P.outSR;try{const ea=await this._executeQuery(P,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),la=ea.size;if(!la)return{count:0,extent:null};const na=await this._getBounds(ea.items,ea.spatialReference,Y||this.spatialReference);return{count:la,extent:na}}catch(ea){if(ea===R.queryEngineEmptyResult)return{count:0,extent:null};throw ea;}}async executeQueryForIds(P,U){return this.executeQueryForIdSet(P,U).then(Y=>Array.from(Y))}async executeQueryForIdSet(P,U){U=
w.signalFromSignalOrOptions(U);try{const Y=await this._executeQuery(P,{returnGeometry:!0,returnCentroid:!1,outSR:null},U),ea=Y.items,la=new Set;await this._reschedule(()=>{for(const na of ea)la.add(Y.featureAdapter.getObjectId(na))},U);return la}catch(Y){if(Y===R.queryEngineEmptyResult)return new Set;throw Y;}}async executeQueryForSnapping(P,U){const Y=w.signalFromSignalOrOptions(U),{point:ea,distance:la,returnEdge:na,vertexMode:sa}=P;if(!na&&"none"===sa)return{candidates:[]};let ua=C.clone(P.query);
ua=await this._schedule(()=>R.normalizeQueryLike(ua,this.definitionExpression,this.spatialReference),Y);ua=await this._reschedule(()=>m.validateQuery(ua,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);(U=!b.equals(ea.spatialReference,this.spatialReference))&&await M.checkProjectionSupport(ea.spatialReference,this.spatialReference);var ta="number"===typeof la?la:la.x,wa="number"===typeof la?la:la.y;ta={xmin:ea.x-
ta,xmax:ea.x+ta,ymin:ea.y-wa,ymax:ea.y+wa,spatialReference:ea.spatialReference};ta=U?M.project(ta,this.spatialReference):ta;if(!ta)return{candidates:[]};wa=(await h.normalizeCentralMeridian(p.fromJSON(ea),null,{signal:Y}))[0];const xa=(await h.normalizeCentralMeridian(p.fromJSON(ta),null,{signal:Y}))[0];if(null==wa||null==xa)return{candidates:[]};const Da=new J.QueryEngineResult(await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(xa.toJSON())),Y),ua,this);await this._reschedule(()=>
this._executeObjectIdsQuery(Da),Y);await this._reschedule(()=>this._executeTimeQuery(Da),Y);await this._reschedule(()=>this._executeAttributesQuery(Da),Y);await this._reschedule(()=>this._executeGeometryQueryForSnapping(Da,Y),Y);wa=wa.toJSON();wa=U?M.project(wa,this.spatialReference):wa;return Da.createSnappingResponse({...P,point:wa,distance:U?Math.max(ta.xmax-ta.xmin,ta.ymax-ta.ymin)/2:la},ea.spatialReference)}async executeQueryForLatestObservations(P,U){U=w.signalFromSignalOrOptions(U);if(!this.timeInfo?.trackIdField)throw new y("unsupported-query",
"Missing timeInfo or timeInfo.trackIdField",{query:P,timeInfo:this.timeInfo});try{const Y=await this._executeQuery(P,{},U);await this._reschedule(()=>this._filterLatest(Y),U);return Y.createQueryResponse()}catch(Y){if(Y!==R.queryEngineEmptyResult)throw Y;return(new J.QueryEngineResult([],P,this)).createQueryResponse()}}async executeQueryForSummaryStatistics(P={},U,Y){Y=w.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(P,
{field:ea,normalizationField:la,valueExpression:na},Y)).createSummaryStatisticsResponse(U)}async executeQueryForUniqueValues(P={},U,Y){Y=w.signalFromSignalOrOptions(Y);const {field:ea,field2:la,field3:na,valueExpression:sa}=U;return(await this._executeQueryForStatistics(P,{field:ea,field2:la,field3:na,valueExpression:sa},Y)).createUniqueValuesResponse(U)}async executeQueryForClassBreaks(P={},U,Y){Y=w.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(P,
{field:ea,normalizationField:la,valueExpression:na},Y)).createClassBreaksResponse(U)}async executeQueryForHistogram(P={},U,Y){Y=w.signalFromSignalOrOptions(Y);const {field:ea,normalizationField:la,valueExpression:na}=U;return(await this._executeQueryForStatistics(P,{field:ea,normalizationField:la,valueExpression:na},Y)).createHistogramResponse(U)}async fetchRecomputedExtents(P){P=w.signalFromSignalOrOptions(P);this._timeExtentPromise||(this._timeExtentPromise=E.getTimeExtent(this.timeInfo,this.featureStore));
const [U,Y]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);w.throwIfAborted(P);return{fullExtent:U,timeExtent:Y}}async _getBounds(P,U,Y){const ea=A.set(A.create(),A.negativeInfinity);await this.featureStore.forEachBounds(P,la=>A.expandWithAABB(ea,la));P={xmin:ea[0],ymin:ea[1],xmax:ea[3],ymax:ea[4],spatialReference:F.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(ea[2])&&isFinite(ea[5])&&(P.zmin=ea[2],P.zmax=ea[5]);U=M.project(P,U,Y);U.spatialReference=F.cleanFromGeometryEngine(Y);
0===U.xmax-U.xmin&&(Y=d.getMetersPerUnitForSR(U.spatialReference),U.xmin-=Y,U.xmax+=Y);0===U.ymax-U.ymin&&(Y=d.getMetersPerUnitForSR(U.spatialReference),U.ymin-=Y,U.ymax+=Y);this.hasZ&&null!=U.zmin&&null!=U.zmax&&0===U.zmax-U.zmin&&(Y=d.getMetersPerUnitForSR(U.spatialReference),U.zmin-=Y,U.zmax+=Y);return U}_getFullExtent(){this._fullExtentPromise||(this._fullExtentPromise="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):
this._getAllFeatures().then(P=>this._getBounds(P,this.spatialReference,this.spatialReference)));return this._fullExtentPromise}async _schedule(P,U){return null!=this._frameTask?this._frameTask.schedule(P,U):P(l.noBudget)}async _reschedule(P,U){return null!=this._frameTask?this._frameTask.reschedule(P,U):P(l.noBudget)}async _getAllFeaturesQueryEngineResult(P){return new J.QueryEngineResult(await this._getAllFeatures(),P,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const Y=[];this._allFeaturesPromise=
(async()=>{await this.featureStore.forEach(ea=>Y.push(ea))})().then(()=>Y)}const P=this._allFeaturesPromise,U=await P;return P===this._allFeaturesPromise?U.slice():this._getAllFeatures()}async _executeQuery(P,U,Y){P=C.clone(P);P=await this._schedule(()=>R.normalizeQuery(P,this.definitionExpression,this.spatialReference),Y);P=await this._reschedule(()=>m.validateQuery(P,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),
Y);P={...P,...U};const ea=await this._reschedule(()=>this._executeSceneFilterQuery(P,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(P,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}async _executeSceneFilterQuery(P,U){if(null==P.sceneFilter)return null;const {outSR:Y,
returnGeometry:ea,returnCentroid:la}=P;var na=this.featureStore.featureSpatialReference,sa=P.sceneFilter.geometry;const ua=null==na||b.equals(na,sa.spatialReference)?sa:M.project(sa,na);if(!ua)return null;na=ea||la;na=b.isValid(Y)&&!b.equals(this.spatialReference,Y)&&na?async Da=>this._project(Da,Y):Da=>Da;const ta=this.featureAdapter;sa=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ua)),U);if("disjoint"===P.sceneFilter.spatialRelationship){if(!sa.length)return null;const Da=
new Set;for(var wa of sa)Da.add(ta.getObjectId(wa));const Ia=await this._reschedule(()=>this._getAllFeatures(),U);wa=await this._reschedule(async()=>{const Ra=await v.getSpatialQueryOperator("esriSpatialRelDisjoint",ua,this.geometryType,this.hasZ,this.hasM),Na=await this._runSpatialFilter(Ia,Sa=>!Da.has(ta.getObjectId(Sa))||Ra(ta.getGeometry(Sa)),U);return new J.QueryEngineResult(Na,P,this)},U);return na(wa)}if(!sa.length)return new J.QueryEngineResult([],P,this);if(this._canExecuteSinglePass(ua,
P))return na(new J.QueryEngineResult(sa,P,this));const xa=await v.getSpatialQueryOperator("esriSpatialRelContains",ua,this.geometryType,this.hasZ,this.hasM);wa=await this._runSpatialFilter(sa,Da=>xa(ta.getGeometry(Da)),U);return na(new J.QueryEngineResult(wa,P,this))}async _executeGeometryQuery(P,U,Y){if(null!=U&&0===U.items.length)return U;P=null!=U?U.query:P;const {geometry:ea,outSR:la,spatialRel:na,returnGeometry:sa,returnCentroid:ua}=P;var ta=this.featureStore.featureSpatialReference;const wa=
!ea||null==ta||b.equals(ta,ea.spatialReference)?ea:M.project(ea,ta),xa=sa||ua,Da=b.isValid(la)&&!b.equals(this.spatialReference,la),Ia=this._geometryQueryCache&&null==U?Da&&xa?JSON.stringify({originalFilterGeometry:ea,spatialRelationship:na,outSpatialReference:la}):JSON.stringify({originalFilterGeometry:ea,spatialRelationship:na}):null;ta=Ia?this._geometryQueryCache.get(Ia):null;if(null!=ta)return new J.QueryEngineResult(ta,P,this);ta=async n=>{Da&&xa&&await this._project(n,la);Ia&&this._geometryQueryCache.put(Ia,
n.items,n.items.length+1);return n};if(!wa)return ta(null!=U?U:await this._getAllFeaturesQueryEngineResult(P));const Ra=this.featureAdapter;let Na=await this._reschedule(()=>this._searchFeatures(this._getQueryBBoxes(ea)),Y);if("esriSpatialRelDisjoint"===na){if(!Na.length)return ta(null!=U?U:await this._getAllFeaturesQueryEngineResult(P));const n=new Set;for(var Sa of Na)n.add(Ra.getObjectId(Sa));const L=null!=U?U.items:await this._reschedule(()=>this._getAllFeatures(),Y);Sa=await this._reschedule(async()=>
{const X=await v.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM),aa=await this._runSpatialFilter(L,ha=>!n.has(Ra.getObjectId(ha))||X(Ra.getGeometry(ha)),Y);return new J.QueryEngineResult(aa,P,this)},Y);return ta(Sa)}if(null!=U){const n=new c.PositionHint;Na=Na.filter(L=>0<=c.indexOf(U.items,L,U.items.length,n))}if(!Na.length)return ta=new J.QueryEngineResult([],P,this),Ia&&this._geometryQueryCache.put(Ia,ta.items,1),ta;if(this._canExecuteSinglePass(wa,P))return ta(new J.QueryEngineResult(Na,
P,this));const Va=await v.getSpatialQueryOperator(na,wa,this.geometryType,this.hasZ,this.hasM);Sa=await this._runSpatialFilter(Na,n=>Va(Ra.getGeometry(n)),Y);return ta(new J.QueryEngineResult(Sa,P,this))}async _executeGeometryQueryForSnapping(P,U){const {query:Y}=P,{spatialRel:ea}=Y;if(P?.items?.length&&Y.geometry&&ea){var la=await v.getSpatialQueryOperator(ea,Y.geometry,this.geometryType,this.hasZ,this.hasM);U=await this._runSpatialFilter(P.items,na=>la(na.geometry),U);P.items=U}}_executeAggregateIdsQuery(P){if(0!==
P.items.length&&P.query.aggregateIds?.length&&null!=this.aggregateAdapter){var U=new Set;for(const ea of P.query.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(ea).forEach(la=>U.add(la));var Y=this.featureAdapter.getObjectId;P.items=P.items.filter(ea=>U.has(Y(ea)))}}_executeObjectIdsQuery(P){if(0!==P.items.length&&P.query.objectIds?.length){var U=new Set(P.query.objectIds),Y=this.featureAdapter.getObjectId;P.items=P.items.filter(ea=>U.has(Y(ea)))}}_executeTimeQuery(P){if(0!==P.items.length){var U=
E.getTimeOperator(this.timeInfo,P.query.timeExtent,this.featureAdapter);null!=U&&(P.items=P.items.filter(U))}}_executeAttributesQuery(P){if(0!==P.items.length){var U=x.getWhereClause(P.query.where,this.fieldsIndex);if(U){if(!U.isStandardized)throw new TypeError("Where clause is not standardized");P.items=P.items.filter(Y=>U.testFeature(Y,this.featureAdapter))}}}async _runSpatialFilter(P,U,Y){if(!U)return P;if(null==this._frameTask)return P.filter(sa=>U(sa));let ea=0;const la=[],na=async sa=>{for(;ea<
P.length;){const ua=P[ea++];U(ua)&&(la.push(ua),sa.madeProgress());sa.done&&await this._reschedule(ta=>na(ta),Y)}};return this._reschedule(sa=>na(sa),Y).then(()=>la)}_filterLatest(P){const {trackIdField:U,startTimeField:Y,endTimeField:ea}=this.timeInfo,la=ea||Y,na=new Map,sa=this.featureAdapter.getAttribute;for(const ua of P.items){const ta=sa(ua,U),wa=sa(ua,la),xa=na.get(ta);(!xa||wa>sa(xa,la))&&na.set(ta,ua)}P.items=Array.from(na.values())}_canExecuteSinglePass(P,U){({spatialRel:U}=U);return v.canQueryWithRBush(P)&&
("esriSpatialRelEnvelopeIntersects"===U||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===U||"esriSpatialRelContains"===U))}async _project(P,U){if(!U||b.equals(this.spatialReference,U))return P;const Y=this.featureAdapter;let ea=void 0;try{const la=await this._getFullExtent();ea=u.getTransformation(this.spatialReference,U,la)}catch{}U=await M.projectMany(P.items.map(la=>F.getGeometry(this.geometryType,this.hasZ,this.hasM,Y.getGeometry(la))),this.spatialReference,U,ea);P.items=
U.map((la,na)=>Y.cloneWithGeometry(P.items[na],k.convertFromGeometry(la,this.hasZ,this.hasM)));return P}_getQueryBBoxes(P){if(v.canQueryWithRBush(P)){if(p.isExtent(P))return[r.fromValues(Math.min(P.xmin,P.xmax),Math.min(P.ymin,P.ymax),Math.max(P.xmin,P.xmax),Math.max(P.ymin,P.ymax))];if(p.isPolygon(P))return P.rings.map(U=>r.fromValues(Math.min(U[0][0],U[2][0]),Math.min(U[0][1],U[2][1]),Math.max(U[0][0],U[2][0]),Math.max(U[0][1],U[2][1])))}return[H.getBoundsXY(r.create(),P)]}async _searchFeatures(P){const U=
new Set;await Promise.all(P.map(Y=>this.featureStore.forEachInBounds(Y,ea=>U.add(ea))));P=Array.from(U.values());U.clear();return P}async _executeQueryForStatistics(P,U,Y){P=C.clone(P);try{P=await this._schedule(()=>R.normalizeQuery(P,this.definitionExpression,this.spatialReference),Y);P=await this._reschedule(()=>m.validateStatisticsQuery(P,U,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference}),Y);const ea=await this._reschedule(()=>
this._executeSceneFilterQuery(P,Y),Y),la=await this._reschedule(()=>this._executeGeometryQuery(P,ea,Y),Y);await this._reschedule(()=>this._executeAggregateIdsQuery(la),Y);await this._reschedule(()=>this._executeObjectIdsQuery(la),Y);await this._reschedule(()=>this._executeTimeQuery(la),Y);await this._reschedule(()=>this._executeAttributesQuery(la),Y);return la}catch(ea){if(ea!==R.queryEngineEmptyResult)throw ea;return new J.QueryEngineResult([],P,this)}}}a.Feature=B;a.QueryEngine=S;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/core/MemCache":function(){define(["exports","./PooledArray"],function(a,c){a.RemoveMode=void 0;(function(f){f[f.ALL=0]="ALL";f[f.SOME=1]="SOME"})(a.RemoveMode||(a.RemoveMode={}));class y{constructor(f,w,d){this.name=f;this._storage=w;this.id=`${C++}:`;this.size=0;this.maxSize=-1;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);d&&(this._storage.registerRemoveFunc(this.id,d),this._removeFunc=!0)}destroy(){this._storage.clear(this);
this._removeFunc&&this._storage.deregisterRemoveFunc(this.id);this._storage.deregister(this);this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(f){return this._storage.getSize(this,f)}resetHitRate(){this._hit=this._miss=0}put(f,w,d,u=0){this._storage.put(this,f,w,d,u)}pop(f){f=this._storage.pop(this,f);void 0===f?++this._miss:++this._hit;return f}get(f){f=this._storage.get(this,f);void 0===f?++this._miss:++this._hit;return f}peek(f){return this._storage.peek(this,
f)}updateSize(f,w,d){this._storage.updateSize(this,f,w,d)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class t{get size(){return this._size}constructor(f=10485760){this._maxSize=f;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new c;this._users=new c}destroy(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null}register(f){this._users.push(f)}deregister(f){this._users.removeUnordered(f)}registerRemoveFunc(f,
w){this._removeFuncs.push([f,w])}deregisterRemoveFunc(f){this._removeFuncs.filterInPlace(w=>w[0]!==f)}get maxSize(){return this._maxSize}set maxSize(f){this._maxSize=Math.max(f,-1);this._checkSize()}getSize(f,w){return this._db.get(f.id+w)?.size??0}put(f,w,d,u,A){w=f.id+w;const r=this._db.get(w);r&&(this._size-=r.size,f.size-=r.size,this._db.delete(w),r.entry!==d&&this._notifyRemove(w,r.entry,r.size,a.RemoveMode.ALL));u>this._maxSize?this._notifyRemove(w,d,u,a.RemoveMode.ALL):void 0===d?console.warn("Refusing to cache undefined entry "):
!u||0>u?(console.warn(`Refusing to cache entry with size ${u} for key ${w}`),this._notifyRemove(w,d,0,a.RemoveMode.ALL)):(this._db.set(w,new z(d,u,1+Math.max(A,-4)- -3)),this._size+=u,f.size+=u,this._checkSize())}updateSize(f,w,d,u){w=f.id+w;const A=this._db.get(w);if(A&&A.entry===d){this._size-=A.size;for(f.size-=A.size;u>this._maxSize;)if(u=this._notifyRemove(w,d,u,a.RemoveMode.SOME),!(null!=u&&0<u)){this._db.delete(w);return}A.size=u;this._size+=u;f.size+=u;this._checkSize()}}pop(f,w){w=f.id+w;
const d=this._db.get(w);if(d)return this._size-=d.size,f.size-=d.size,this._db.delete(w),++this._hit,d.entry;++this._miss}get(f,w){w=f.id+w;f=this._db.get(w);if(void 0===f)++this._miss;else return this._db.delete(w),f.lives=f.lifetime,this._db.set(w,f),++this._hit,f.entry}peek(f,w){(f=this._db.get(f.id+w))?++this._hit:++this._miss;return f?.entry}get performanceInfo(){const f={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+
"%",Entries:this._db.size.toString()},w={},d=[];this._db.forEach((r,H)=>{const p=r.lifetime;d[p]=(d[p]||0)+r.size;this._users.forAll(h=>{const {id:b,name:k}=h;H.startsWith(b)&&(w[k]=(w[k]||0)+r.size)})});const u={};this._users.forAll(r=>{const H=r.name;"hitRate"in r&&"number"===typeof r.hitRate&&!isNaN(r.hitRate)&&0<r.hitRate?(w[H]=w[H]||0,u[H]=Math.round(100*r.hitRate)+"%"):u[H]="0%"});var A=Object.keys(w);A.sort((r,H)=>w[H]-w[r]);A.forEach(r=>f[r]=Math.round(w[r]/2**20)+"MB / "+u[r]);for(A=d.length-
1;0<=A;--A){const r=d[A];r&&(f["Priority "+(A+-3-1)]=Math.round(r/this._size*100)+"%")}return f}resetStats(){this._hit=this._miss=0;this._users.forAll(f=>f.resetHitRate())}clear(f){const w=f.id;this._db.forEach((d,u)=>{u.startsWith(w)&&(this._size-=d.size,this._db.delete(u),this._notifyRemove(u,d.entry,d.size,a.RemoveMode.ALL))});f.size=0}clearAll(){this._db.forEach((f,w)=>this._notifyRemove(w,f.entry,f.size,a.RemoveMode.ALL));this._users.forAll(f=>f.size=0);this._size=0;this._db.clear()}_getHitRate(){return this._hit/
(this._hit+this._miss)}_notifyRemove(f,w,d,u){let A;this._removeFuncs.some(r=>f.startsWith(r[0])?(r=r[1](w,u,d),"number"===typeof r&&(A=r),!0):!1);return A}_checkSize(){this._users.forAll(f=>this._checkSizeLimits(f));this._checkSizeLimits()}_checkSizeLimits(f){const w=f??this;if(!(0>w.maxSize||w.size<=w.maxSize)){for(var d=f?.id,u=!0;u;){u=!1;for(const [A,r]of this._db)if(0===r.lifetime&&(!d||A.startsWith(d))){this._purgeItem(A,r,f);if(w.size<=.9*w.maxSize)return;u||=this._db.has(A)}}for(const [A,
r]of this._db)if(!d||A.startsWith(d))if(this._purgeItem(A,r,f),w.size<=.9*w.maxSize)break}}_purgeItem(f,w,d=this._users.find(u=>f.startsWith(u.id))){this._db.delete(f);if(1>=w.lives){this._size-=w.size;d&&(d.size-=w.size);const u=this._notifyRemove(f,w.entry,w.size,a.RemoveMode.SOME);null!=u&&0<u&&(this._size+=u,d&&(d.size+=u),w.lives=w.lifetime,w.size=u,this._db.set(f,w))}else--w.lives,this._db.set(f,w)}}let C=0;class z{constructor(f,w,d){this.entry=f;this.size=w;this.lives=this.lifetime=d}}a.MemCache=
y;a.MemCacheStorage=t;a.MinPriority=-3;a.NoPriority=-4;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/Error ../../core/Logger ../Polygon ../Polyline ./normalizeUtilsCommon ./spatialReferenceUtils ./webMercatorUtils ../../rest/geometryService/cut ../../rest/geometryService/simplify".split(" "),function(a,c,y,t,C,z,f,w,d,u,A){function r(F){const M=[];let g=0,J=0;for(let R=0;R<F.length;R++){const m=
F[R];let v=null;for(let E=0;E<m.length;E++)v=m[E],M.push(v),0===E?J=g=v[0]:(g=Math.min(g,v[0]),J=Math.max(J,v[0]));v&&M.push([(g+J)/2,0])}return M}function H(F,M){if(!(F instanceof z||F instanceof C))throw x().error("straightLineDensify: the input geometry is neither polyline nor polygon"),new y("straightLineDensify: the input geometry is neither polyline nor polygon");var g=f.getGeometryParts(F);const J=[];for(const m of g){g=[];J.push(g);g.push([m[0][0],m[0][1]]);for(let v=0;v<m.length-1;v++){const E=
m[v][0],N=m[v][1],l=m[v+1][0],B=m[v+1][1];var R=Math.sqrt((l-E)*(l-E)+(B-N)*(B-N));const D=(B-N)/R,G=(l-E)/R,S=R/M;if(1<S){for(let P=1;P<=S-1;P++){const U=P*M;g.push([G*U+E,D*U+N])}R=(R+Math.floor(S-1)*M)/2;g.push([G*R+E,D*R+N])}g.push([l,B])}}return"polygon"===F.type?new C({rings:J,spatialReference:F.spatialReference}):new z({paths:J,spatialReference:F.spatialReference})}function p(F,M,g){M&&(F=H(F,1E6),F=d.webMercatorToGeographic(F,!0));g&&(F=f.updatePolyGeometry(F,g));return F}function h(F,M,g){if(Array.isArray(F)){var J=
F[0];J>M?(g=f.offsetMagnitude(J,M),F[0]=J+-2*g*M):J<g&&(M=f.offsetMagnitude(J,g),F[0]=J+-2*M*g)}else J=F.x,J>M?(g=f.offsetMagnitude(J,M),F=F.clone().offset(-2*g*M,0)):J<g&&(M=f.offsetMagnitude(J,g),F=F.clone().offset(-2*M*g,0));return F}function b(F,M){let g=-1;for(let J=0;J<M.cutIndexes.length;J++){const R=M.cutIndexes[J],m=M.geometries[J],v=f.getGeometryParts(m);for(let E=0;E<v.length;E++){const N=v[E];N.some(l=>{if(180>l[0])return!0;l=0;for(var B=0;B<N.length;B++){var D=N[B][0];l=D>l?D:l}l=Number(l.toFixed(9));
l=-360*f.offsetMagnitude(l,180);for(B=0;B<N.length;B++)D=m.getPoint(E,B),m.setPoint(E,B,D.clone().offset(l,0));return!0})}if(R===g)if("polygon"===F[0].type)for(const E of f.getGeometryParts(m))F[R]=F[R].addRing(E);else{if("polyline"===F[0].type)for(const E of f.getGeometryParts(m))F[R]=F[R].addPath(E)}else g=R,F[R]=m}return F}async function k(F,M,g){if(!Array.isArray(F))return k([F],M);M&&"string"!==typeof M&&x().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");
var J="string"===typeof M?M:M?.url??c.geometryServiceUrl;let R,m,v;let E=0;var N=[];M=[];for(var l of F)if(null==l)M.push(l);else{if(!B){var B=l.spatialReference;var D=w.getInfo(B);var G=(R=B.isWebMercator)?102100:4326;m=f.cutParams[G].maxX;v=f.cutParams[G].minX;var S=f.cutParams[G].plus180Line;G=f.cutParams[G].minus180Line}if(D)if("mesh"===l.type)M.push(l);else if("point"===l.type)M.push(h(l.clone(),m,v));else if("multipoint"===l.type){var P=l.clone();P.points=P.points.map(U=>h(U,m,v));M.push(P)}else if("extent"===
l.type)P=l.clone()._normalize(!1,!1,D),M.push(P.rings?new C(P):P);else if(l.extent){P=l.extent;const U=2*f.offsetMagnitude(P.xmin,v)*m;let Y=0===U?l.clone():f.updatePolyGeometry(l.clone(),U);P.offset(U,0);P.intersects(S)&&P.xmax!==m?(E=P.xmax>E?P.xmax:E,Y=p(Y,R),N.push(Y),M.push("cut")):P.intersects(G)&&P.xmin!==v?(E=2*P.xmax*m>E?2*P.xmax*m:E,Y=p(Y,R,360),N.push(Y),M.push("cut")):M.push(Y)}else M.push(l.clone());else M.push(l)}B=f.offsetMagnitude(E,m);D=-90;S=B;for(l=new z;0<B;)G=-180+360*B,l.addPath([[G,
D],[G,-1*D]]),D*=-1,B--;if(0<N.length&&0<S){B=await u.cut(J,N,l,g);B=b(N,B);D=[];N=[];for(S=0;S<M.length;S++)l=M[S],"cut"!==l?N.push(l):(l=B.shift(),G=F[S],null!=G&&"polygon"===G.type&&G.rings&&1<G.rings.length&&l.rings.length>=G.rings.length?(D.push(l),N.push("simplify")):N.push(R?d.geographicToWebMercator(l):l));if(!D.length)return N;M=await A.simplify(J,D,g);F=[];for(g=0;g<N.length;g++)J=N[g],"simplify"!==J?F.push(J):F.push(R?d.geographicToWebMercator(M.shift()):M.shift());return F}F=[];for(g=
0;g<M.length;g++)J=M[g],"cut"!==J?F.push(J):(J=N.shift(),F.push(!0===R?d.geographicToWebMercator(J):J));return F}const x=()=>t.getLogger("esri.geometry.support.normalizeUtils");a.getClosestDenormalizedXToReference=function(F,M,g){g=w.getInfo(g);if(null==g)return F;const [J,R]=g.valid;g=2*R;let m=0,v=0;M>R?m=Math.ceil(Math.abs(M-R)/g):M<J&&(m=-Math.ceil(Math.abs(M-J)/g));F>R?v=Math.ceil(Math.abs(F-R)/g):F<J&&(v=-Math.ceil(Math.abs(F-J)/g));F+=(m-v)*g;M=F-M;M>R?F-=g:M<J&&(F+=g);return F};a.getDenormalizedExtent=
function(F){if(!F)return null;const M=F.extent;if(!M)return null;var g=F.spatialReference&&w.getInfo(F.spatialReference);if(!g)return M;const [J,R]=g.valid;({width:g}=M);let {xmin:m,xmax:v}=M;[m,v]=[v,m];if("extent"===F.type||0===g||g<=R||g>2*R||m<J||v>R)return M;let E;switch(F.type){case "polygon":if(1<F.rings.length)E=r(F.rings);else return M;break;case "polyline":if(1<F.paths.length)E=r(F.paths);else return M;break;case "multipoint":E=F.points}F=M.clone();for(let N=0;N<E.length;N++){let l=E[N][0];
0>l?(l+=R,v=Math.max(l,v)):(l-=R,m=Math.min(l,m))}F.xmin=m;F.xmax=v;return F.width<g?(F.xmin-=R,F.xmax-=R,F):M};a.normalizeCentralMeridian=k;a.normalizeMapX=function(F,M){if(M=w.getInfo(M)){const [g,J]=M.valid;M=J-g;if(F<g)for(;F<g;)F+=M;if(F>J)for(;F>J;)F-=M}return F};a.straightLineDensify=H;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../Polyline","../SpatialReference","./jsonUtils"],function(a,c,y,t){function C(z){return t.isPolygon(z)?
z.rings:z.paths}c={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new c({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:y.WebMercator}),minus180Line:new c({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:y.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:y.WGS84}),minus180Line:new c({paths:[[[-180,
-180],[-180,180]]],spatialReference:y.WGS84})}};a.cutParams=c;a.getGeometryParts=C;a.offsetMagnitude=function(z,f){return Math.ceil((z-f)/(2*f))};a.updatePolyGeometry=function(z,f){const w=C(z);for(const d of w)for(const u of d)u[0]+=f;return z};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/cut":function(){define("exports ../../geometry ../../request ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ../utils".split(" "),function(a,
c,y,t,C,z){a.cut=async function(f,w,d,u){f=z.parseUrl(f);const A=w[0].spatialReference;w={...u,responseType:"json",query:{...f.query,f:"json",sr:C.srToRESTValue(A),target:JSON.stringify({geometryType:t.getJsonType(w[0]),geometries:w}),cutter:JSON.stringify(d)}};w=await y(f.path+"/cut",w);const {cutIndexes:r,geometries:H=[]}=w.data;return{cutIndexes:r,geometries:H.map(p=>{p=t.fromJSON(p);p.spatialReference=A;return p})}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/utils":function(){define("exports ../config ../kernel ../core/lang ../core/urlUtils ../support/apiKeyUtils".split(" "),
function(a,c,y,t,C,z){function f(w,d,u){const A={};for(const H in w)if("declaredClass"!==H){var r=w[H];null!=r&&"function"!==typeof r&&(Array.isArray(r)?A[H]=r.map(p=>f({item:p},d,u).item):"object"===typeof r?r.toJSON?(r=r.toJSON(u?.[H]),A[H]=d?r:JSON.stringify(r)):A[H]=d?r:JSON.stringify(r):A[H]=r)}return A}a.asValidOptions=function(w,d){return d?{...d,query:{...(w??{}),...d.query}}:{query:w}};a.encode=f;a.getToken=function(w,d){return w?z.supportsApiKey(w)&&(d||c.apiKey)?d||c.apiKey:y.id?.findCredential(w)?.token:
null};a.parseUrl=function(w){return"string"===typeof w?C.urlToObject(w):t.clone(w)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/simplify":function(){define("exports ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils ./utils".split(" "),function(a,c,y,t,C,z){a.simplify=async function(f,w,d){const u="string"===typeof f?y.urlToObject(f):f;f=w[0].spatialReference;const A=t.getJsonType(w[0]);w={...d,
query:{...u.query,f:"json",sr:C.srToRESTValue(f),geometries:JSON.stringify(z.encodeGeometries(w))}};({data:w}=await c(u.path+"/simplify",w));return z.decodeGeometries(w.geometries,A,f)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(a,c){a.decodeGeometries=function(y,t,C){const z=c.getGeometryType(t);return y.map(f=>{f=z.fromJSON(f);f.spatialReference=C;return f})};a.encodeGeometries=
function(y){return{geometryType:c.getJsonType(y[0]),geometries:y.map(t=>t.toJSON())}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache","../../support/fieldType"],function(a,c,y,t){function C(p,h,b={}){const k=z(h,p);if(!k)throw b=A.getError(h,p),new c("unsupported-query","invalid SQL expression",{expression:h,error:b});p=b.expressionName||"expression";
if(b.validateStandardized&&!k.isStandardized)throw new c("unsupported-query",`${p} is not standard`,{expression:h});if(b.validateAggregate&&!k.isAggregate)throw new c("unsupported-query",`${p} does not contain a valid aggregate function`,{expression:h});return k.fieldNames}function z(p,h){return p?A.get(p,h):null}function f(p){return/\((.*?)\)/.test(p)?p:p.split(" as ")[0]}function w(p,h,b,k={}){const x=new Map;d(x,p,h,k.allowedFieldTypes??H,b);if(x.size)throw new c("unsupported-query",`${k.expressionName??
"expression"} contains invalid or missing fields`,{errors:Array.from(x.values()),query:k.query});}function d(p,h,b,k,x){x=x.includes("*")?[...b,...x.filter(F=>"*"!==F)]:x;for(const F of x)if(h.get(F))u(p,h,b,k,F);else try{const M=f(F),g=C(h,M,{validateStandardized:!0});for(const J of g)u(p,h,b,k,J)}catch(M){p.set(F,{type:"expression-error",expression:F,error:M})}}function u(p,h,b,k,x){(h=h.get(x))?b.has(h.name)?"all"!==k&&!1===k?.has(h.type)&&p.set(x,{type:"invalid-type",fieldName:h.name,fieldType:t.kebabDict.fromJSON(h.type),
allowedFieldTypes:Array.from(k,F=>t.kebabDict.fromJSON(F))}):p.set(x,{type:"missing-field",fieldName:h.name}):p.set(x,{type:"invalid-field",fieldName:x})}const A=new y.WhereClauseCache(50,500);y=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeBigInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong".split(" "));const r=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),H=new Set(["esriFieldTypeString",
"esriFieldTypeGUID","esriFieldTypeGlobalID",...y,...r]);a.allDateAndTimeFieldTypes=r;a.getAliasFromFieldName=function(p){return p.split(" as ")[1]};a.getExpressionFromFieldName=f;a.getWhereClause=z;a.numericFieldTypes=y;a.validateFields=w;a.validateHaving=function(p,h,b,k,x){if(!b)return!0;const F=C(p,b,{validateAggregate:!0,expressionName:"having clause"});w(p,h,F,{expressionName:"having clause",query:x});if(!z(b,p)?.getExpressions().every(M=>{const {aggregateType:g,field:J}=M,R=p.get(J)?.name;return k.some(m=>
{const {onStatisticField:v,statisticType:E}=m;return p.get(v)?.name===R&&E.toLowerCase().trim()===g})}))throw new c("unsupported-query","expressions in having clause should also exist in outStatistics",{having:b});return!0};a.validateWhere=function(p,h,b,k){if(!b)return!0;b=C(p,b,{validateStandardized:!0,expressionName:"where clause"});w(p,h,b,{expressionName:"where clause",query:k});return!0};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClauseCache":function(){define(["exports",
"../LRUCache","./WhereClause"],function(a,c,y){class t{constructor(C,z){this._cache=new c.LRUCache(C);this._invalidCache=new c.LRUCache(z)}get(C,z){const f=`${z.uid}:${C}`,w=this._cache.get(f);if(w)return w;if(null!=this._invalidCache.get(f))return null;try{const d=y.WhereClause.create(C,z);this._cache.put(f,d);return d}catch(d){return this._invalidCache.put(f,d),null}}getError(C,z){return this._invalidCache.get(`${z.uid}:${C}`)??null}}a.WhereClauseCache=t;Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/core/LRUCache":function(){define(["exports","./MemCache"],function(a,c){class y{constructor(t,C){this._storage=new c.MemCacheStorage;this.name=this.id="";this.size=0;this._storage.maxSize=t;this._storage.register(this);C&&this._storage.registerRemoveFunc("",C)}destroy(){this._storage.deregister(this);this._storage.destroy()}put(t,C,z=1){this._storage.put(this,t,C,z,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=
t}resetHitRate(){}}a.LRUCache=y;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereClause":function(){define("exports ../../arcade/ArcadeDate ../../arcade/featureset/support/errorsupport ../has ./AggregateFunctions ./DateOnly ./sqlArithmeticUtils ./sqlCompareUtils ./sqlDateParsingUtils ./SqlInterval ./SqlTimestampOffset ./StandardizedFunctions ./TimeOnly ./WhereGrammar ../../chunks/datetime".split(" "),function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h){function b(l){return Array.isArray(l)?
l:[l]}function k(l){return null!==l?!0!==l:null}function x(l,B){return null!=l&&null!=B?!0===l&&!0===B:!1===l||!1===B?!1:null}function F(l,B){return null!=l&&null!=B?!0===l||!0===B:!0===l||!0===B?!0:null}function M(l,B){if(null==l)return null;let D=!1;for(const G of B)if(null==G)D=null;else if(l===G){D=!0;break}return D}function g(l,B,D){if(null==l)return null;let G="",S=E.Normal;for(let P=0;P<B.length;P++){const U=B.charAt(P);switch(S){case E.Normal:U===D?S=E.Escaped:G="-[]/{}()*+?.\\^$|".includes(U)?
G+("\\"+U):"%"===U?G+".*":"_"===U?G+".":G+U;break;case E.Escaped:G="-[]/{}()*+?.\\^$|".includes(U)?G+("\\"+U):G+U,S=E.Normal}}return(new RegExp("^"+G+"$","m")).test(l)}function J(l,B,D,G){l=G.getAttribute(l,B);B=D?.get(B);return null==l||"esriFieldTypeDate"!==B?.type&&"date"!==B?.type?null==l||"esriFieldTypeDateOnly"!==B?.type&&"date-only"!==B?.type?null==l||"esriFieldTypeTimeOnly"!==B?.type&&"time-only"!==B?.type?null==l||"esriFieldTypeTimestampOffset"!==B?.type&&"timestamp-offset"!==B?.type?l:new A.SqlTimeStampOffset(l):
H.TimeOnly.fromReader(l):z.DateOnly.fromReader(l):d.convertToExecutingTimeZone(new Date(l),D?.getLuxonTimeZone(B.name)??h.FixedOffsetZone.utcInstance)}const R=new Set(["current_timestamp","current_date","current_time"]);class m{static makeBool(l){return!0===l}static featureValue(l,B,D,G){return J(l,B,D,G)}static equalsNull(l){return null===l}static applyLike(l,B,D){return g(l,B,D)}static ensureArray(l){return b(l)}static applyIn(l,B){return M(l,B)}static currentDate(l){return z.DateOnly.fromNow(l)}static makeSqlInterval(l,
B,D){return u.SqlInterval.createFromValueAndQualifier(l,B,D)}static convertInterval(l){return l instanceof u.SqlInterval?l.valueInMilliseconds():l}static currentTimestamp(l){return d.convertToExecutingTimeZone(new Date,l)}static compare(l,B,D,G){return w.sqlCompare(B,D,l)}static calculate(l,B,D,G){return f.sqlCalculateFunction(l,B,D,G)}static evaluateTime(l){return d.parseTime(l)}static evaluateTimestamp(l,B,D){return d.parseTimestamp(l,B,D)}static evaluateDate(l,B){return d.parseDate(l,B)}static evaluateFunction(l,
B,D){return r.evaluateFunction(l,B,D)}static lookup(l,B){l=B[l];return void 0===l?null:l}static between(l,B,D){return null==l||null==B[0]||null==B[1]?null:w.sqlCompare(l,B[0],"\x3e\x3d")&&w.sqlCompare(l,B[1],"\x3c\x3d")}static notbetween(l,B,D){return null==l||null==B[0]||null==B[1]?null:w.sqlCompare(l,B[0],"\x3c")||w.sqlCompare(l,B[1],"\x3e")}static ternaryNot(l){return k(l)}static ternaryAnd(l,B){return x(l,B)}static ternaryOr(l,B){return F(l,B)}}class v{constructor(l,B,D="UTC"){this.fieldsIndex=
B;this.timeZone=D;this.parameters={};this._hasDateFunctions=void 0;this.parseTree=p.WhereGrammar.parse(l);const {isStandardized:G,isAggregate:S,referencedFieldNames:P}=this._extractExpressionInfo(B);this._referencedFieldNames=P;this.isStandardized=G;this.isAggregate=S}static convertValueToStorageFormat(l,B=null){if(null===B)return d.isDate(l)?l.getTime():d.isDateTime(l)?l.toMillis():d.isTimestampOffset(l)?l.toStorageFormat():d.isTimeOnly(l)?l.toStorageString():d.isDateOnly(l)?l.toStorageFormat():
l;switch(B){case "date":if(d.isDate(l))return l.getTime();if(d.isDateTime(l))return l.toMillis();if(d.isTimestampOffset(l))return l.toMilliseconds();if(d.isDateOnly(l))return l.toNumber();break;case "date-only":if(d.isDate(l))return z.DateOnly.fromDateJS(l).toString();if(d.isTimestampOffset(l))return z.DateOnly.fromSqlTimeStampOffset(l).toString();if(d.isDateTime(l))return z.DateOnly.fromDateTime(l).toString();break;case "time-only":if(d.isDate(l))return H.TimeOnly.fromDateJS(l).toStorageString();
if(d.isDateTime(l))return H.TimeOnly.fromDateTime(l).toStorageString();if(d.isTimestampOffset(l))return H.TimeOnly.fromSqlTimeStampOffset(l).toStorageString();if(d.isTimeOnly(l))return l.toStorageString();break;case "timestamp-offset":if(d.isDate(l))return A.SqlTimeStampOffset.fromJSDate(l).toStorageFormat();if(d.isDateTime(l))return A.SqlTimeStampOffset.fromDateTime(l).toStorageFormat();if(d.isTimestampOffset(l))return l.toStorageFormat()}return l}static create(l,B,D="UTC"){return new v(l,B,D)}get fieldNames(){return this._referencedFieldNames}testSet(l,
B=N){return!!this._evaluateNode(this.parseTree,null,B,l)}calculateValue(l,B=N){l=this._evaluateNode(this.parseTree,l,B,null);return l instanceof u.SqlInterval?l.valueInMilliseconds()/864E5:l}calculateValueCompiled(l,B=N){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(l,this.parameters,B,this.fieldsIndex,this.timeZone);if(t("esri-csp-restrictions"))return this.calculateValue(l,B);this._compileMe();return this.parseTree._compiledVersion(l,this.parameters,B,this.fieldsIndex,
this.timeZone)}testFeature(l,B=N){return!!this._evaluateNode(this.parseTree,l,B,null)}testFeatureCompiled(l,B=N){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(l,this.parameters,B,this.fieldsIndex,this.timeZone);if(t("esri-csp-restrictions"))return this.testFeature(l,B);this._compileMe();return!!this.parseTree._compiledVersion(l,this.parameters,B,this.fieldsIndex,this.timeZone)}get hasDateFunctions(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=
!1;this._visitAll(this.parseTree,l=>{"current-time"===l.type?this._hasDateFunctions=!0:"function"===l.type&&(this._hasDateFunctions=this._hasDateFunctions||R.has(l.name.toLowerCase()))});return this._hasDateFunctions}getFunctions(){const l=new Set;this._visitAll(this.parseTree,B=>{"function"===B.type&&l.add(B.name.toLowerCase())});return Array.from(l)}getExpressions(){const l=new Map;this._visitAll(this.parseTree,B=>{if("function"===B.type){const D=B.name.toLowerCase();B=B.args.value[0];if("column-reference"===
B.type){B=B.column;const G=`${D}-${B}`;l.has(G)||l.set(G,{aggregateType:D,field:B})}}});return[...l.values()]}getVariables(){const l=new Set;this._visitAll(this.parseTree,B=>{"parameter"===B.type&&l.add(B.value.toLowerCase())});return Array.from(l)}_compileMe(){const l="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",l)).bind(m)}_extractExpressionInfo(l){const B=
[],D=new Set;let G=!0,S=!1;this._visitAll(this.parseTree,P=>{switch(P.type){case "column-reference":var U=l?.get(P.column);let Y;U?U=Y=U.name??"":(Y=P.column,U=Y.toLowerCase());D.has(U)||(D.add(U),B.push(Y));P.column=Y;break;case "function":const {name:ea,args:la}=P;P=la.value.length;G&&=r.isStandardized(ea,P);!1===S&&(S=C.isAggregate(ea,P))}});return{referencedFieldNames:Array.from(B),isStandardized:G,isAggregate:S}}_visitAll(l,B){if(null!=l)switch(B(l),l.type){case "when-clause":this._visitAll(l.operand,
B);this._visitAll(l.value,B);break;case "case-expression":for(const D of l.clauses)this._visitAll(D,B);"simple"===l.format&&this._visitAll(l.operand,B);null!==l.else&&this._visitAll(l.else,B);break;case "expression-list":for(const D of l.value)this._visitAll(D,B);break;case "unary-expression":this._visitAll(l.expr,B);break;case "binary-expression":this._visitAll(l.left,B);this._visitAll(l.right,B);break;case "function":this._visitAll(l.args,B)}}evaluateNodeToJavaScript(l){switch(l.type){case "interval":return"this.makeSqlInterval("+
this.evaluateNodeToJavaScript(l.value)+", "+JSON.stringify(l.qualifier)+","+JSON.stringify(l.op)+")";case "case-expression":var B="";if("simple"===l.format){var D=this.evaluateNodeToJavaScript(l.operand);B="( ";for(let G=0;G<l.clauses.length;G++)B+=" (this.compare('\x3d',"+D+","+this.evaluateNodeToJavaScript(l.clauses[G].operand)+") ? ("+this.evaluateNodeToJavaScript(l.clauses[G].value)+") : "}else for(B="( ",D=0;D<l.clauses.length;D++)B+=" this.makeBool("+this.evaluateNodeToJavaScript(l.clauses[D].operand)+
")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(l.clauses[D].value)+") : ";B=null!==l.else?B+this.evaluateNodeToJavaScript(l.else):B+"null";return B+" )";case "parameter":return"this.lookup("+JSON.stringify(l.value.toLowerCase())+",lookups)";case "expression-list":B="[";for(D of l.value)"["!==B&&(B+=","),B+=this.evaluateNodeToJavaScript(D);return B+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(l.expr)+")";case "binary-expression":switch(l.operator){case "AND":return"this.ternaryAnd("+
this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "IS":if("null"!==l.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")";case "ISNOT":if("null"!==l.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+
")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(l.left)+
","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(l.operator)+
","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+", timeZone)"}throw new y.SqlError(y.SqlErrorCodes.UnsupportedOperator,{operator:l.operator});case "null":case "boolean":case "string":case "number":return JSON.stringify(l.value);case "time":return"this.evaluateTime(JSON.stringify(node.value))";
case "date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case "timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case "current-time":return"date"===l.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(l.column)+",fieldsIndex,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(l.name)+","+this.evaluateNodeToJavaScript(l.args)+", timeZone)"}throw new y.SqlError(y.SqlErrorCodes.UnsupportedSyntax,
{node:l.type});}_evaluateNode(l,B,D,G){switch(l.type){case "interval":return D=this._evaluateNode(l.value,B,D,G),u.SqlInterval.createFromValueAndQualifier(D,l.qualifier,l.op);case "case-expression":if("simple"===l.format){var S=this._evaluateNode(l.operand,B,D,G);for(var P=0;P<l.clauses.length;P++)if(w.sqlCompare(S,this._evaluateNode(l.clauses[P].operand,B,D,G),"\x3d",this.timeZone))return this._evaluateNode(l.clauses[P].value,B,D,G)}else for(S=0;S<l.clauses.length;S++)if(!0===this._evaluateNode(l.clauses[S].operand,
B,D,G))return this._evaluateNode(l.clauses[S].value,B,D,G);return null!==l.else?this._evaluateNode(l.else,B,D,G):null;case "parameter":return l=this.parameters[l.value.toLowerCase()],d.isDate(l)?h.DateTime.fromJSDate(l):l instanceof c.ArcadeDate?l.toDateTime():l;case "expression-list":S=[];for(var U of l.value)S.push(this._evaluateNode(U,B,D,G));return S;case "unary-expression":return k(this._evaluateNode(l.expr,B,D,G));case "binary-expression":switch(l.operator){case "AND":return x(this._evaluateNode(l.left,
B,D,G),this._evaluateNode(l.right,B,D,G));case "OR":return F(this._evaluateNode(l.left,B,D,G),this._evaluateNode(l.right,B,D,G));case "IS":if("null"!==l.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return null===this._evaluateNode(l.left,B,D,G);case "ISNOT":if("null"!==l.right.type)throw new y.SqlError(y.SqlErrorCodes.UnsupportedIsRhs);return null!==this._evaluateNode(l.left,B,D,G);case "IN":return S=b(this._evaluateNode(l.right,B,D,G)),M(this._evaluateNode(l.left,B,D,G),S);case "NOT IN":return S=
b(this._evaluateNode(l.right,B,D,G)),k(M(this._evaluateNode(l.left,B,D,G),S));case "BETWEEN":return S=this._evaluateNode(l.left,B,D,G),l=this._evaluateNode(l.right,B,D,G),null==S||null==l[0]||null==l[1]?null:w.sqlCompare(S,l[0],"\x3e\x3d",this.timeZone)&&w.sqlCompare(S,l[1],"\x3c\x3d",this.timeZone);case "NOTBETWEEN":return S=this._evaluateNode(l.left,B,D,G),l=this._evaluateNode(l.right,B,D,G),null==S||null==l[0]||null==l[1]?null:w.sqlCompare(S,l[0],"\x3c",this.timeZone)||w.sqlCompare(S,l[1],"\x3e",
this.timeZone);case "LIKE":return g(this._evaluateNode(l.left,B,D,G),this._evaluateNode(l.right,B,D,G),l.escape);case "NOT LIKE":return k(g(this._evaluateNode(l.left,B,D,G),this._evaluateNode(l.right,B,D,G),l.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return w.sqlCompare(this._evaluateNode(l.left,B,D,G),this._evaluateNode(l.right,B,D,G),l.operator,this.timeZone);case "-":case "+":case "*":case "/":case "||":return f.sqlCalculateFunction(l.operator,
this._evaluateNode(l.left,B,D,G),this._evaluateNode(l.right,B,D,G),this.timeZone)}case "null":case "boolean":case "string":case "number":return l.value;case "date":return l.parsedValue??(l.parsedValue=d.parseDate(l.value,"unknown")),l.parsedValue;case "timestamp":return l.parsedValue??(l.parsedValue=d.parseTimestamp(l.value,"unknown")),l.parsedValue;case "time":return d.parseTime(l.value);case "current-time":return"date"===l.mode?z.DateOnly.fromNow(this.timeZone):d.convertToExecutingTimeZone(new Date,
this.timeZone);case "column-reference":return J(B,l.column,this.fieldsIndex,D);case "data-type":return l.value;case "function":if(this.isAggregate&&C.isAggregate(l.name,l.args.value.length)){B=[];for(S of l.args?.value||[]){U=[];for(P of G||[])U.push(this._evaluateNode(S,P,D,null));B.push(U)}return C.aggregateFunction(l.name,B)}D=this._evaluateNode(l.args,B,D,G);return r.evaluateFunction(l.name,D,this.timeZone)}throw new y.SqlError(y.SqlErrorCodes.UnsupportedSyntax,{node:l.type});}}var E;(function(l){l[l.Normal=
0]="Normal";l[l.Escaped=1]="Escaped"})(E||={});const N={getAttribute(l,B){return(l&&"object"===typeof l.attributes?l.attributes:l)[B]}};a.WhereClause=v;a.defaultAttributeAdapter=N;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(a,c,y,t){function C(u,A,r){return u<A?u-A:u>r?u-r:0}function z(u,A=!0){if(u instanceof t.Zone)return u;if("system"===u.toLowerCase())return"system";
if("utc"===u.toLowerCase())return"UTC";if("unknown"===u.toLowerCase())return y.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(u)){const r=t.FixedOffsetZone.parseSpecifier("UTC"+(u.startsWith("+")||u.startsWith("-")?"":"+")+u);if(r)return r}u=t.IANAZone.create(u);if(!u.isValid){if(A)throw new w(a.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return u}a.ArcadeDateErrorCodes=void 0;(a.ArcadeDateErrorCodes||(a.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";
const f={[a.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class w extends Error{constructor(u,A){super(c.replace(f[u],A));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,w)}}class d{constructor(u){this._date=u;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(u=0,A=1,r=1,H=0,p=0,h=0,b=0,k){if(isNaN(u)||isNaN(A)||isNaN(r)||isNaN(H)||isNaN(p)||isNaN(h)||isNaN(b))return null;const x=
t.DateTime.local(u,A).daysInMonth;u=t.DateTime.fromObject({day:1>r?1:r>x?x:r,year:u,month:1>A?1:12<A?12:A,hour:0>H?0:23<H?23:H,minute:0>p?0:59<p?59:p,second:0>h?0:59<h?59:h,millisecond:0>b?0:999<b?999:b},{zone:z(k)});u=u.plus({months:C(A,1,12),days:C(r,1,x),hours:C(H,0,23),minutes:C(p,0,59),seconds:C(h,0,59),milliseconds:C(b,0,999)});return new d(u)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(u,A){A=
z(A);return u.isUnknownTimeZone||A===y.UnknownTimeZone.instance?d.fromParts(u.year,u.monthJS+1,u.day,u.hour,u.minute,u.second,u.millisecond,A):new d(u._date.setZone(A))}static dateJSToArcadeDate(u){return new d(t.DateTime.fromJSDate(u,{zone:"system"}))}static dateJSAndZoneToArcadeDate(u,A="system"){A=z(A);return new d(t.DateTime.fromJSDate(u,{zone:A}))}static unknownEpochToArcadeDate(u){return new d(t.DateTime.fromMillis(u,{zone:y.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(u){return new d(t.DateTime.fromMillis(u.getTime(),
{zone:y.UnknownTimeZone.instance}))}static epochToArcadeDate(u,A="system"){A=z(A);return new d(t.DateTime.fromMillis(u,{zone:A}))}static dateTimeToArcadeDate(u){return new d(u)}clone(){return new d(this._date)}changeTimeZone(u){u=z(u);return d.dateTimeToArcadeDate(this._date.setZone(u))}static dateTimeAndZoneToArcadeDate(u,A){A=z(A);return u.zone===y.UnknownTimeZone.instance||A===y.UnknownTimeZone.instance?d.fromParts(u.year,u.month,u.day,u.hour,u.minute,u.second,u.millisecond,A):new d(u.setZone(A))}static nowToArcadeDate(u){u=
z(u);return new d(t.DateTime.fromJSDate(new Date,{zone:u}))}static nowUTCToArcadeDate(){return new d(t.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===d.systemTimeZoneCanonicalName}equals(u){return this.isSystem&&u.isSystem?this.toNumber()===u.toNumber():this.isUnknownTimeZone!==u.isUnknownTimeZone?!1:this._date.equals(u._date)}get isUnknownTimeZone(){return this._date.zone===y.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let u=
this._date.weekday;6<u&&(u=0);return u}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const u=this.zone;return"fixed"===u.type?0===u.fixed?"UTC":u.formatOffset(0,"short"):u.name}stringify(){return JSON.stringify(this.toJSDate())}plus(u){return new d(this._date.plus(u))}diff(u,A="milliseconds"){return this._date.diff(u._date,A)[A]}toISODate(){return this._date.toISODate()}toISOString(u){return u?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(u,A){return this._date.toISOTime({suppressMilliseconds:u,
includeOffset:A&&!this.isUnknownTimeZone})}toFormat(u,A){this.isUnknownTimeZone&&(u=u.replaceAll("Z",""));return this._date.toFormat(u,A)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new d(this._date.toUTC())}toLocal(){return new d(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(u){if(!u)return null;
u=t.DateTime.fromISO(u,{setZone:!0});return new d(u)}}a.ArcadeDate=d;a.ArcadeDateError=w;a.arcadeDateErrorMessages=f;a.createDateTimeZone=z;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/UnknownTimeZone":function(){define(["exports","../../chunks/datetime"],function(a,c){function y(C){return C instanceof c.Zone?C===t.instance?!0:!1:"unknown"===C?.toString().toLowerCase()?!0:!1}class t{}t.instance=new c.IANAZone("Etc/UTC");a.UnknownTimeZone=t;a.adoptTimeZone=function(C,
z){return c.DateTime.fromObject({day:C.day,year:C.year,month:C.month,hour:C.hour,minute:C.minute,second:C.second,millisecond:C.millisecond},{zone:z})};a.isUnknownTimeZone=y;a.substituteUnknownTimezone=function(C){return y(C)?t.instance:C};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../core/string"],function(a,c){a.SqlErrorCodes=void 0;(function(f){f.InvalidFunctionParameters="InvalidFunctionParameters";
f.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction";f.UnsupportedSqlFunction="UnsupportedSqlFunction";f.UnsupportedOperator="UnsupportedOperator";f.UnsupportedSyntax="UnsupportedSyntax";f.UnsupportedIsRhs="UnsupportedIsRhs";f.UnsupportedIsLhs="UnsupportedIsLhs";f.InvalidDataType="InvalidDataType";f.CannotCastValue="CannotCastValue";f.FunctionNotRecognized="FunctionNotRecognized";f.InvalidTime="InvalidTime";f.InvalidParameterCount="InvalidParameterCount";f.InvalidTimeStamp="InvalidTimeStamp";
f.InvalidDate="InvalidDate";f.InvalidOperator="InvalidOperator";f.IllegalInterval="IllegalInterval";f.YearMonthIntervals="YearMonthIntervals";f.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers";f.MissingStatisticParameters="MissingStatisticParameters"})(a.SqlErrorCodes||(a.SqlErrorCodes={}));const y={[a.SqlErrorCodes.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[a.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[a.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",
[a.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[a.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[a.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",[a.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[a.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[a.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[a.SqlErrorCodes.InvalidDate]:"Invalid date encountered",
[a.SqlErrorCodes.InvalidOperator]:"Invalid operator encountered",[a.SqlErrorCodes.InvalidTime]:"Invalid time encountered",[a.SqlErrorCodes.IllegalInterval]:"Illegal interval",[a.SqlErrorCodes.FunctionNotRecognized]:"Function not recognized",[a.SqlErrorCodes.InvalidTimeStamp]:"Invalid timestamp encountered",[a.SqlErrorCodes.InvalidParameterCount]:"Invalid parameter count for call to {name}",[a.SqlErrorCodes.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[a.SqlErrorCodes.YearMonthIntervals]:"Year-Month Intervals not supported",
[a.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};class t extends Error{constructor(f,w){super(c.replace(y[f],w));this.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(this,t)}}a.FeatureSetErrorCodes=void 0;(function(f){f.NeverReach="NeverReach";f.NotImplemented="NotImplemented";f.Cancelled="Cancelled";f.InvalidStatResponse="InvalidStatResponse";f.InvalidRequest="InvalidRequest";f.RequestFailed="RequestFailed";
f.MissingFeatures="MissingFeatures";f.AggregationFieldNotFound="AggregationFieldNotFound";f.DataElementsNotFound="DataElementsNotFound"})(a.FeatureSetErrorCodes||(a.FeatureSetErrorCodes={}));const C={[a.FeatureSetErrorCodes.Cancelled]:"Cancelled",[a.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[a.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[a.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[a.FeatureSetErrorCodes.MissingFeatures]:"Missing features",
[a.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[a.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[a.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",[a.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};class z extends Error{constructor(f,w){super(c.replace(C[f],w));this.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(this,z)}}a.FeatureSetError=
z;a.SqlError=t;a.featureSetErrorMessages=C;a.sqlErrorMessages=y;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/AggregateFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlTimestampOffset ./TimeOnly ../../chunks/datetime".split(" "),function(a,c,y,t,C,z){function f(A){if(null===A)return null;let r=0,H=0;for(let p=0;p<A.length;p++){const h=A[p];if(null!==h){if("number"!==typeof h)throw new c.SqlError(c.SqlErrorCodes.InvalidValueForAggregateFunction);
H++;r+=h}}return 0===H?null:r/A.length}function w(A,r){if(null===A)return null;let H=null,p=null;for(const h of A)A=h,A=h instanceof y.DateOnly?h.toNumber():h instanceof C.TimeOnly?h.toNumber():h instanceof z.DateTime?h.toMillis():h instanceof t.SqlTimeStampOffset?h.toMilliseconds():h,null===H?(H=h,p=A):"max"===r&&null!==p&&null!==A&&p<=A?(H=h,p=A):"min"===r&&null!==p&&null!==A&&p>=A&&(H=h,p=A);return H}function d(A){if(null===A)return null;A=A.filter(p=>null!==p);if(0===A.length)return null;const r=
f(A);if(null===r)return null;let H=0;for(const p of A){if("number"!==typeof p)throw new c.SqlError(c.SqlErrorCodes.InvalidValueForAggregateFunction);H+=(r-p)**2}return H/(A.length-1)}const u={min:{minParams:1,maxParams:1,evaluate:A=>w(A[0],"min")},max:{minParams:1,maxParams:1,evaluate:A=>w(A[0],"max")},avg:{minParams:1,maxParams:1,evaluate:A=>f(A[0])},sum:{minParams:1,maxParams:1,evaluate:A=>{A=A[0];if(null===A)A=null;else{var r=0;for(let H=0;H<A.length;H++){const p=A[H];if(null!==p){if("number"!==
typeof p)throw new c.SqlError(c.SqlErrorCodes.InvalidValueForAggregateFunction);r+=p}}A=r}return A}},stddev:{minParams:1,maxParams:1,evaluate:A=>{A=A[0];null===A?A=null:(A=d(A),A=null===A?null:Math.sqrt(A));return A}},count:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:A[0].length},var:{minParams:1,maxParams:1,evaluate:A=>d(A[0])}};a.aggregateFunction=function(A,r){const H=u[A.toLowerCase()];if(null==H)throw new c.SqlError(c.SqlErrorCodes.FunctionNotRecognized);if(r.length<H.minParams||r.length>
H.maxParams)throw new c.SqlError(c.SqlErrorCodes.InvalidParameterCount,{name:A.toUpperCase()});return H.evaluate(r)};a.isAggregate=function(A,r){A=u[A.toLowerCase()];return null!=A&&r>=A.minParams&&r<=A.maxParams};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/DateOnly":function(){define(["exports","../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(a,c,y,t){function C(f){f=f.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let w="";const d=
/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const u of f.match(d)||[])switch(u){case "D":w+="d";break;case "DD":w+="dd";break;case "DDD":w+="o";break;case "d":w+="c";break;case "ddd":w+="ccc";break;case "dddd":w+="cccc";break;case "M":w+="L";break;case "MM":w+="LL";break;case "MMM":w+="LLL";break;case "MMMM":w+="LLLL";break;case "YY":w+="yy";
break;case "Y":case "YYYY":w+="yyyy";break;case "Q":w+="q";break;case "X":case "x":w+=u;break;default:w=2<=u.length&&"["===u.slice(0,1)&&"]"===u.slice(-1)?w+`'${u.slice(1,-1)}'`:w+`'${u}'`}return w}class z{constructor(f,w,d){this._year=f;this._month=w;this._day=d;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(f){return f instanceof
z&&f.day===this.day&&f.month===this.month&&f.year===this.year}clone(){return new z(this._year,this._month,this._day)}toDateTime(f){return t.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:c.createDateTimeZone(f)})}toDateTimeLuxon(f){return t.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:c.createDateTimeZone(f)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(f=
null){if(null===f||""===f)return this.toString();f=C(f);if(!f)return"";const w=this.toDateTime("unknown");return c.ArcadeDate.dateTimeToArcadeDate(w).toFormat(f,{locale:y.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const f=this.toDateTime("unknown");return c.ArcadeDate.dateTimeToArcadeDate(f)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(f,w){return z.fromDateTime(this.toUTCDateTime().plus({[f]:w}))}toUTCDateTime(){return t.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(f,w){switch(w.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===w?this.toUTCDateTime().diff(f.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(f){f=t.DateTime.fromMillis(f,{zone:t.FixedOffsetZone.utcInstance});return f.isValid?z.fromParts(f.year,f.month,f.day):null}static fromSeconds(f){f=t.DateTime.fromSeconds(f,{zone:t.FixedOffsetZone.utcInstance});return f.isValid?z.fromParts(f.year,f.month,f.day):null}static fromReader(f){if(!f)return null;f=f.split("-");return 3!==f.length?null:new z(parseInt(f[0],10),parseInt(f[1],
10),parseInt(f[2],10))}static fromParts(f,w,d){f=new z(f,w,d);return!1===f.isValid?null:f}static fromDateJS(f){return z.fromParts(f.getFullYear(),f.getMonth()+1,f.getDay())}static fromDateTime(f){return z.fromParts(f.year,f.month,f.day)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,w=null){if(""===f||null===f)return null;var d=[];if(w)(w=C(w))&&d.push(w);else if(null===w||""===w)return f=t.DateTime.fromISO(f,{setZone:!0}),f.isValid?z.fromParts(f.year,
f.month,f.day):null;for(const u of d)if(d=t.DateTime.fromFormat(f,w??u),d.isValid)return new z(d.year,d.month,d.day);return null}static fromNow(f="system"){f=t.DateTime.fromJSDate(new Date).setZone(c.createDateTimeZone(f));return new z(f.year,f.month,f.day)}}a.DateOnly=z;a.standardizeDateOnlyFormat=C;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlTimestampOffset":function(){define(["exports","../../chunks/datetime"],function(a,c){function y(C){return Number.isNaN(C)||
0===C?C:Math.trunc(C)}class t{constructor(C){this._timeStampOffset=C;this._date=null}toDateTime(){this._date??(this._date=c.DateTime.fromISO(this._timeStampOffset,{setZone:!0}));return this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return y(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return y(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return t.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(C){return new t(c.DateTime.fromJSDate(C).toISO({includeOffset:!0}))}static fromDateTime(C){return new t(C.toISO({includeOffset:!0}))}static fromParts(C,
z,f=0,w=0,d=0,u=0,A=0,r=!1,H=0,p=0){C=`${C.toString().padStart(4,"0")}-${z.toString().padStart(2,"0")}-${f.toString().padStart(2,"0")}`;z="";10>u&&(z="0");w=`${w.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${z+u.toString()}`;0!==A&&(w+="."+A.toString().padStart(3,"0"));A=`${r?"-":"+"}${H.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`;return new t(C+"T"+w+A)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let C=this.toDateTime().toSQL({includeOffset:!0,
includeOffsetSpace:!0});C&&=C.replace(".000","");return C}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(C){C=this.toDateTime().plus(C);return t.fromDateTime(C)}}a.SqlTimeStampOffset=t;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(a,c,y,t){function C(f){if(!f)return"";const w=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let d="";for(const u of f.match(w)||
[])switch(u){case "SSS":d+=u;break;case "A":case "a":d+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":d+=u;break;default:d+=`'${u}'`}return d}class z{constructor(f,w,d,u){this._hour=f;this._minute=w;this._second=d;this._millisecond=u;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(f){return f instanceof z&&f.hour===
this.hour&&f.minute===this.minute&&f.second===this.second&&f.millisecond===this.millisecond}clone(){return new z(this.hour,this.minute,this.second,this.millisecond)}isValid(){return c.isInteger(this.hour)&&c.isInteger(this.minute)&&c.isInteger(this.second)&&c.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(f=null){return null===f||""===f?this.toString():(f=C(f))?t.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(f,{locale:y.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(f,w,d,u){f=new z(f,w,d,u);return f.isValid()?f:null}static fromReader(f){if(!f)return null;f=f.split(":");return 3!==f.length?null:new z(parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],
10),0)}static fromMilliseconds(f){return 864E5<f||0>f?null:new z(Math.floor(f/36E5%24),Math.floor(f/6E4%60),Math.floor(f/1E3%60),Math.floor(f%1E3))}static fromDateJS(f){return new z(f.getHours(),f.getMinutes(),f.getSeconds(),f.getMilliseconds())}static fromDateTime(f){return new z(f.hour,f.minute,f.second,f.millisecond)}static fromSqlTimeStampOffset(f){return this.fromDateTime(f.toDateTime())}static fromString(f,w=null){if(""===f||null===f)return null;const d=[];if(w)(w=C(w))&&d.push(w);else if(null===
w||""===w)d.push("HH:mm:ss"),d.push("HH:mm:ss.SSS"),d.push("hh:mm:ss a"),d.push("hh:mm:ss.SSS a"),d.push("HH:mm"),d.push("hh:mm a"),d.push("H:mm"),d.push("h:mm a"),d.push("H:mm:ss"),d.push("h:mm:ss a"),d.push("H:mm:ss.SSS"),d.push("h:mm:ss.SSS a");for(const u of d)if(w=t.DateTime.fromFormat(f,u),w.isValid)return new z(w.hour,w.minute,w.second,w.millisecond);return null}plus(f,w){switch(f){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return z.fromDateTime(this.toUTCDateTime().plus({[f]:w}))}return null}toUTCDateTime(){return t.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(f,w){switch(w.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(f.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===w?this.toUTCDateTime().diff(f.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(f.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(f.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(f.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(f.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(f.toUTCDateTime(),"milliseconds").milliseconds}}}a.TimeOnly=z;a.standardizeTimeFormat=C;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(a,c){a.cloneGeometry=function(y){if(null==y)return null;const t=y.clone();void 0!==y.cache._geVersion&&(t.cache._geVersion=y.cache._geVersion);return t};a.convertLinearUnitsToCode=function(y){if(null==y)return null;if("number"===typeof y)return y;y=y.toLowerCase();y=y.replaceAll(/\s/g,"");y=y.replaceAll("-","");switch(y){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};a.convertSquareUnitsToCode=
function(y){if(null==y)return null;if("number"===typeof y)return y;y=y.toLowerCase();y=y.replaceAll(/\s/g,"");y=y.replaceAll("-","");switch(y){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};a.isInteger=function(y){return"number"===typeof y&&isFinite(y)&&Math.floor(y)===y};a.sameGeomType=function(y,t){return y===t||"point"===y&&"esriGeometryPoint"===t||"polyline"===y&&"esriGeometryPolyline"===
t||"polygon"===y&&"esriGeometryPolygon"===t||"extent"===y&&"esriGeometryEnvelope"===t||"multipoint"===y&&"esriGeometryMultipoint"===t||"point"===t&&"esriGeometryPoint"===y||"polyline"===t&&"esriGeometryPolyline"===y||"polygon"===t&&"esriGeometryPolygon"===y||"extent"===t&&"esriGeometryEnvelope"===y||"multipoint"===t&&"esriGeometryMultipoint"===y?!0:!1};a.shapeExtent=function(y){if(null==y)return null;switch(y.type){case "polygon":case "multipoint":case "polyline":return y.extent;case "point":return new c({xmin:y.x,
ymin:y.y,xmax:y.x,ymax:y.y,spatialReference:y.spatialReference});case "extent":return y}return null};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlArithmeticUtils":function(){define(["exports","../../arcade/featureset/support/errorsupport","./sqlDateParsingUtils","./SqlInterval","./StandardizedFunctions"],function(a,c,y,t,C){function z(I,O,Q){switch(Q){case "+":return I+O;case "-":return I-O;case "*":return I*O;case "/":return I/O}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}function f(I,O,Q){switch(Q){case "+":return O.plus({milliseconds:I.valueInMilliseconds()});case "-":return I.valueInMilliseconds()-O.toMillis()}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function w(I,O,Q){switch(Q){case "+":return O.plus("milliseconds",I.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function d(I,O,Q){switch(Q){case "+":return O.plus("milliseconds",I.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function u(I,
O,Q){switch(Q){case "+":return I.plus("milliseconds",O.valueInMilliseconds());case "-":return I.plus("milliseconds",-1*O.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function A(I,O,Q){switch(Q){case "+":return O.addMilliseconds(I.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function r(I,O,Q){switch(Q){case "+":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()+O.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()-
O.valueInMilliseconds());case "*":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()*O.valueInMilliseconds());case "/":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()/O.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function H(I,O,Q){switch(Q){case "+":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()+O);case "-":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()-O);case "*":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()*
O);case "/":return t.SqlInterval.createFromMilliseconds(I.valueInMilliseconds()/O)}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function p(I,O,Q){switch(Q){case "+":return t.SqlInterval.createFromMilliseconds(I+O.valueInMilliseconds());case "-":return t.SqlInterval.createFromMilliseconds(I-O.valueInMilliseconds());case "*":return t.SqlInterval.createFromMilliseconds(I*O.valueInMilliseconds());case "/":return t.SqlInterval.createFromMilliseconds(I/O.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}function h(I,O,Q){switch(Q){case "+":return I.plus("milliseconds",O.valueInMilliseconds());case "-":return I.plus("milliseconds",-1*O.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function b(I,O,Q){switch(Q){case "+":return I.plus({milliseconds:O.valueInMilliseconds()});case "-":return I.minus({milliseconds:O.valueInMilliseconds()})}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function k(I,O,Q){switch(Q){case "+":return I.addMilliseconds(O.valueInMilliseconds());
case "-":return I.addMilliseconds(-1*O.valueInMilliseconds())}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function x(I,O,Q){O*=864E5;switch(Q){case "+":return I.plus({milliseconds:O});case "-":return I.minus({milliseconds:O})}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function F(I,O,Q){O*=864E5;switch(Q){case "+":return I.plus("milliseconds",O);case "-":return I.plus("milliseconds",-1*O)}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function M(I,O,Q){O*=864E5;switch(Q){case "+":return I.plus("milliseconds",
O);case "-":return I.plus("milliseconds",-1*O)}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function g(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function J(I,O,Q){O*=864E5;switch(Q){case "+":return I.addMilliseconds(O);case "-":return I.addMilliseconds(-1*O)}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function R(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function m(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function v(I,
O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function E(I,O,Q){O=parseFloat(O);if(isNaN(O))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);return z(I,O,Q)}function N(I,O,Q){I=parseFloat(I);if(isNaN(I))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);return z(I,O,Q)}function l(I,O,Q){switch(Q){case "+":return I+O}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function B(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function D(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}function G(I,O,Q){switch(Q){case "-":return I.toDateTimeLuxon(O.zone).diff(O).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function S(I,O,Q){switch(Q){case "-":return I.toDateTimeLuxon(O.toDateTime().zone).diff(O.toDateTime()).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function P(I,O,Q){switch(Q){case "-":return I.toDateTimeLuxon("UTC").diff(O.toDateTimeLuxon("UTC")).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function U(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}function Y(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function ea(I,O,Q){switch(Q){case "-":return I.toDateTime().diff(O.toDateTimeLuxon(I.toDateTime().zone)).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function la(I,O,Q){switch(Q){case "-":return I.toDateTime().diff(O).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function na(I,O,Q){switch(Q){case "-":return I.toDateTime().diff(O.toDateTime()).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}function sa(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function ua(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function ta(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function wa(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function xa(I,O,Q){switch(Q){case "-":return I.diff(O).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function Da(I,O,Q){switch(Q){case "-":return I.diff(O.toDateTimeLuxon(I.zone)).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}function Ia(I,O,Q){switch(Q){case "-":return I.diff(O.toDateTime()).as("days")}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function Ra(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function Na(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function Sa(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function Va(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function n(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}function L(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function X(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function aa(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}function ha(I,O,Q){throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}a.calculateDateOnlyAndDateOnly=P;a.calculateDateOnlyAndDateTime=G;a.calculateDateOnlyAndNumber=F;a.calculateDateOnlyAndSqlInterval=h;a.calculateDateOnlyAndString=Na;a.calculateDateOnlyAndTimeOnly=U;a.calculateDateOnlyAndTimestamp=
S;a.calculateDateTimeAndDateOnly=Da;a.calculateDateTimeAndDateTime=xa;a.calculateDateTimeAndNumber=x;a.calculateDateTimeAndSqlInterval=b;a.calculateDateTimeAndString=Va;a.calculateDateTimeAndTimeOnly=Ra;a.calculateDateTimeAndTimestamp=Ia;a.calculateNumberAndDateOnly=v;a.calculateNumberAndDateTime=g;a.calculateNumberAndNumber=z;a.calculateNumberAndSqlInterval=p;a.calculateNumberAndString=E;a.calculateNumberAndTimeOnly=m;a.calculateNumberAndTimestamp=R;a.calculateSqlIntervalAndDateOnly=d;a.calculateSqlIntervalAndDateTime=
f;a.calculateSqlIntervalAndNumber=H;a.calculateSqlIntervalAndSqlInterval=r;a.calculateSqlIntervalAndString=B;a.calculateSqlIntervalAndTimeOnly=w;a.calculateSqlIntervalAndTimestamp=A;a.calculateStringAndDateOnly=X;a.calculateStringAndDateTime=aa;a.calculateStringAndNumber=N;a.calculateStringAndSqlInterval=D;a.calculateStringAndString=l;a.calculateStringAndTimeOnly=L;a.calculateStringAndTimestamp=ha;a.calculateTimeOnlyAndDateOnly=ua;a.calculateTimeOnlyAndDateTime=sa;a.calculateTimeOnlyAndNumber=M;a.calculateTimeOnlyAndSqlInterval=
u;a.calculateTimeOnlyAndString=Sa;a.calculateTimeOnlyAndTimeOnly=wa;a.calculateTimeOnlyAndTimestamp=ta;a.calculateTimestampAndDateOnly=ea;a.calculateTimestampAndDateTime=la;a.calculateTimestampAndNumber=J;a.calculateTimestampAndSqlInterval=k;a.calculateTimestampAndString=n;a.calculateTimestampAndTimeOnly=Y;a.calculateTimestampAndTimestamp=na;a.sqlCalculateFunction=function(I,O,Q,W){if("||"===I)return C.evaluateFunction("concat",[O,Q],W);if(null===O||null===Q)return null;if(y.isNumber(O)){if(y.isNumber(Q))return z(O,
Q,I);if(y.isSqlInterval(Q))return p(O,Q,I);if(y.isTimeOnly(Q))return m();if(y.isDateOnly(Q))return v();if(y.isTimestampOffset(Q))return R();if(y.isDateTime(Q))return g();if(y.isString(Q))return E(O,Q,I)}else if(y.isDateOnly(O)){if(y.isNumber(Q))return F(O,Q,I);if(y.isSqlInterval(Q))return h(O,Q,I);if(y.isTimeOnly(Q))return U();if(y.isDateOnly(Q))return P(O,Q,I);if(y.isTimestampOffset(Q))return S(O,Q,I);if(y.isDateTime(Q))return G(O,Q,I);if(y.isString(Q))return Na()}else if(y.isTimeOnly(O)){if(y.isNumber(Q))return M(O,
Q,I);if(y.isSqlInterval(Q))return u(O,Q,I);if(y.isTimeOnly(Q))return wa();if(y.isDateOnly(Q))return ua();if(y.isTimestampOffset(Q))return ta();if(y.isDateTime(Q))return sa();if(y.isString(Q))return Sa()}else if(y.isSqlInterval(O)){if(y.isNumber(Q))return H(O,Q,I);if(y.isSqlInterval(Q))return r(O,Q,I);if(y.isTimeOnly(Q))return w(O,Q,I);if(y.isDateOnly(Q))return d(O,Q,I);if(y.isTimestampOffset(Q))return A(O,Q,I);if(y.isDateTime(Q))return f(O,Q,I);if(y.isString(Q))return B()}else if(y.isDateTime(O)){if(y.isNumber(Q))return x(O,
Q,I);if(y.isSqlInterval(Q))return b(O,Q,I);if(y.isTimeOnly(Q))return Ra();if(y.isDateOnly(Q))return Da(O,Q,I);if(y.isTimestampOffset(Q))return Ia(O,Q,I);if(y.isDateTime(Q))return xa(O,Q,I);if(y.isString(Q))return Va()}else if(y.isTimestampOffset(O)){if(y.isNumber(Q))return J(O,Q,I);if(y.isSqlInterval(Q))return k(O,Q,I);if(y.isTimeOnly(Q))return Y();if(y.isDateOnly(Q))return ea(O,Q,I);if(y.isTimestampOffset(Q))return na(O,Q,I);if(y.isDateTime(Q))return la(O,Q,I);if(y.isString(Q))return n()}else if(y.isString(O)){if(y.isNumber(Q))return N(O,
Q,I);if(y.isSqlInterval(Q))return D();if(y.isTimeOnly(Q))return L();if(y.isDateOnly(Q))return X();if(y.isTimestampOffset(Q))return ha();if(y.isDateTime(Q))return aa();if(y.isString(Q))return l(O,Q,I)}throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlDateParsingUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./DateOnly ./SqlInterval ./SqlTimestampOffset ./TimeOnly ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(a,c,y,t,C,z,f,w){function d(x,F,M){M=p.exec(x);if(null!==M){const [,g,J,R,m,v,E,N]=M;x=w.DateTime.fromObject({year:parseInt(g,10),month:parseInt(J,10),day:parseInt(R,10),hour:parseInt(m,10),minute:parseInt(v,10),second:parseInt(E,10),millisecond:N?parseInt(N.replace(".",""),10):0},{zone:f.substituteUnknownTimezone(F)});if(!1===x.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return x}M=h.exec(x);if(null!==M){const [,g,J,R,m,v,E,N,l,B,D]=M;x=C.SqlTimeStampOffset.fromParts(parseInt(g,
10),parseInt(J,10),parseInt(R,10),parseInt(m,10),parseInt(v,10),parseInt(E,10),N?parseInt(N.replace(".",""),10):0,"-"===l,parseInt(B,10),parseInt(D,10));if(!1===x.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return x}M=b.exec(x);if(null!==M){const [,g,J,R,m,v,E,N,l]=M;x=C.SqlTimeStampOffset.fromParts(parseInt(g,10),parseInt(J,10),parseInt(R,10),parseInt(m,10),parseInt(v,10),0,0,"-"===E,parseInt(N,10),parseInt(l,10));if(!1===x.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);
return x}M=k.exec(x);if(null!==M){const [,g,J,R,m,v]=M;x=w.DateTime.fromObject({year:parseInt(g,10),month:parseInt(J,10),day:parseInt(R,10),hour:parseInt(m,10),minute:parseInt(v,10),second:0},{zone:f.substituteUnknownTimezone(F)});if(!1===x.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return x}M=H.exec(x);if(null!==M){const [,g,J,R]=M;x=w.DateTime.fromObject({year:parseInt(g,10),month:parseInt(J,10),day:parseInt(R,10),hour:0,minute:0,second:0},{zone:f.substituteUnknownTimezone(F)});
if(!1===x.isValid)throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);return x}throw new c.SqlError(c.SqlErrorCodes.InvalidTimeStamp);}const u=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,A=/^(\d{1,2}):(\d{1,2})$/,r=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,H=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,p=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,h=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,b=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,
k=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;a.convertToExecutingTimeZone=function(x,F){if(F instanceof w.Zone)return F===f.UnknownTimeZone.instance?w.DateTime.fromMillis(x.getTime(),{zone:f.UnknownTimeZone.instance}):w.DateTime.fromJSDate(x,{zone:F});switch(F){case "system":case "local":case null:return w.DateTime.fromJSDate(x);default:return"unknown"===F?.toLowerCase()?w.DateTime.fromMillis(x.getTime(),{zone:f.UnknownTimeZone.instance}):w.DateTime.fromJSDate(x,{zone:F})}};a.isDate=function(x){return x instanceof
Date};a.isDateOnly=function(x){return x instanceof y.DateOnly};a.isDateTime=function(x){return x instanceof w.DateTime};a.isNumber=function(x){return"number"===typeof x};a.isSqlInterval=function(x){return x instanceof t.SqlInterval};a.isString=function(x){return"string"===typeof x||x instanceof String};a.isTimeOnly=function(x){return x instanceof z.TimeOnly};a.isTimestampOffset=function(x){return x instanceof C.SqlTimeStampOffset};a.parseDate=function(x,F){const M=H.exec(x);if(null===M)try{return d(x,
F)}catch{throw new c.SqlError(c.SqlErrorCodes.InvalidDate);}const [,g,J,R]=M;x=y.DateOnly.fromParts(parseInt(g,10),parseInt(J,10),parseInt(R,10));if(null===x)throw new c.SqlError(c.SqlErrorCodes.InvalidDate);return x};a.parseTime=function(x){let F=u.exec(x);if(null!==F){const [,M,g,J]=F;x=z.TimeOnly.fromParts(parseInt(M,10),parseInt(g,10),parseInt(J,10),0);if(null!==x)return x;throw new c.SqlError(c.SqlErrorCodes.InvalidTime);}F=A.exec(x);if(null!==F){const [,M,g]=F;x=z.TimeOnly.fromParts(parseInt(M,
10),parseInt(g,10),0,0);if(null!==x)return x;throw new c.SqlError(c.SqlErrorCodes.InvalidTime);}F=r.exec(x);if(null!==F){const [,M,g,J,R]=F;x=z.TimeOnly.fromParts(parseInt(M,10),parseInt(g,10),parseInt(J,10),parseInt(R,10));if(null!==x)return x}throw new c.SqlError(c.SqlErrorCodes.InvalidTime);};a.parseTimestamp=d;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/SqlInterval":function(){define(["exports","../../arcade/featureset/support/errorsupport"],function(a,c){class y{constructor(){this.op=
"+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}static _fixDefaults(t){if(null!==t.precision||null!==t.secondary)throw new c.SqlError(c.SqlErrorCodes.PrimarySecondaryQualifiers);}static _parseSecondsComponent(t,C){C.includes(".")?(C=C.split("."),t.second=parseFloat(C[0]),t.millis=parseInt(C[1],10)):t.second=parseFloat(C)}static createFromMilliseconds(t){const C=new y;C.second=t/1E3;return C}static createFromValueAndQualifier(t,C,z){let f=null;const w=new y;w.op="-"===
z?"-":"+";if("interval-period"===C.type){y._fixDefaults(C);z=RegExp("^[0-9]{1,}$");if("year"===C.period||"month"===C.period)throw new c.SqlError(c.SqlErrorCodes.YearMonthIntervals);if("second"===C.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(t))y._parseSecondsComponent(w,t);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);else if(z.test(t))w[C.period]=parseFloat(t);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);}else{y._fixDefaults(C.start);y._fixDefaults(C.end);if("year"===
C.start.period||"month"===C.start.period||"year"===C.end.period||"month"===C.end.period)throw new c.SqlError(c.SqlErrorCodes.YearMonthIntervals);switch(C.start.period){case "day":switch(C.end.period){case "hour":f=RegExp("^[0-9]{1,} [0-9]{1,}$");if(f.test(t))w[C.start.period]=parseFloat(t.split(" ")[0]),w[C.end.period]=parseFloat(t.split(" ")[1]);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);break;case "minute":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(f.test(t))w[C.start.period]=
parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),w.hour=parseFloat(t[0]),w.minute=parseFloat(t[1]);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(t))w[C.start.period]=parseFloat(t.split(" ")[0]),t=t.split(" ")[1].split(":"),w.hour=parseFloat(t[0]),w.minute=parseFloat(t[1]),y._parseSecondsComponent(w,t[2]);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);break;default:throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);
}break;case "hour":switch(C.end.period){case "minute":f=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(f.test(t))w.hour=parseFloat(t.split(":")[0]),w.minute=parseFloat(t.split(":")[1]);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);break;case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(t))t=t.split(":"),w.hour=parseFloat(t[0]),w.minute=parseFloat(t[1]),y._parseSecondsComponent(w,t[2]);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);break;default:throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);
}break;case "minute":switch(C.end.period){case "second":f=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(f.test(t))t=t.split(":"),w.minute=parseFloat(t[0]),y._parseSecondsComponent(w,t[1]);else throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);break;default:throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);}break;default:throw new c.SqlError(c.SqlErrorCodes.IllegalInterval);}}return w}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*
this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)}}a.SqlInterval=y;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define("exports ../../arcade/featureset/support/errorsupport ../string ./DateOnly ./sqlCompareUtils ./sqlDateParsingUtils ./TimeOnly ../../chunks/datetime".split(" "),function(a,c,y,t,C,z,f,w){function d(b){return"string"===typeof b||b instanceof String}function u(b){return z.isDate(b)||z.isDateOnly(b)||
z.isDateTime(b)||z.isTimeOnly(b)||z.isTimestampOffset(b)?!1:!0}function A(b){return z.isDateOnly(b)||z.isTimeOnly(b)?b.toString():z.isTimestampOffset(b)?b.toSQLValue():z.isDateTime(b)?0===b.millisecond?b.toFormat("yyyy-LL-dd HH:mm:ss"):b.toSQL({includeOffset:!1}):z.isDate(b)?A(w.DateTime.fromJSDate(b)):b.toString()}function r(b){if(z.isDate(b))return t.DateOnly.fromDateJS(b);if(z.isDateTime(b))return t.DateOnly.fromParts(b.year,b.month,b.day);if(z.isDateOnly(b))return b;if(z.isTimeOnly(b))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);
if(z.isTimestampOffset(b)&&null===t.DateOnly.fromParts(b.year,b.month,b.day))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);if(d(b)&&(b=t.DateOnly.fromReader(b),null!==b&&b.isValid))return b;throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);}function H(b,k,x){if(z.isDate(b))return z.convertToExecutingTimeZone(b,k);if(z.isDateTime(b))return b;if(z.isDateOnly(b))return b.toDateTimeLuxon("unknown");if(z.isTimeOnly(b))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);if(z.isTimestampOffset(b))return b;
if(d(b))return z.parseTimestamp(b,"unknown",x);throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);}function p(b){if(z.isDate(b))return f.TimeOnly.fromDateJS(b);if(z.isDateTime(b))return f.TimeOnly.fromDateTime(b);if(z.isDateOnly(b))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);if(z.isTimeOnly(b))return b;if(z.isTimestampOffset(b))return f.TimeOnly.fromSqlTimeStampOffset(b);if(d(b))return z.parseTime(b);throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);}const h={extract:{minParams:2,
maxParams:2,evaluate:([b,k])=>{if(null==k)return null;if(z.isDate(k))switch(b.toUpperCase()){case "SECOND":return k.getSeconds();case "MINUTE":return k.getMinutes();case "HOUR":return k.getHours();case "DAY":return k.getDate();case "MONTH":return k.getMonth()+1;case "YEAR":return k.getFullYear();case "TIMEZONE_HOUR":return 0;case "TIMEZONE_MINUTE":return 0}else if(z.isDateTime(k))switch(b.toUpperCase()){case "SECOND":return k.second;case "MINUTE":return k.minute;case "HOUR":return k.hour;case "DAY":return k.day;
case "MONTH":return k.month;case "YEAR":return k.year}else if(z.isDateOnly(k))switch(b.toUpperCase()){case "DAY":return k.day;case "MONTH":return k.month;case "YEAR":return k.year}else if(z.isTimeOnly(k))switch(b.toUpperCase()){case "SECOND":return k.second;case "MINUTE":return k.minute;case "HOUR":return k.hour}else if(z.isTimestampOffset(k))switch(b.toUpperCase()){case "SECOND":return k.second;case "MINUTE":return k.minute;case "HOUR":return k.hour;case "DAY":return k.day;case "MONTH":return k.month;
case "YEAR":return k.year;case "TIMEZONE_HOUR":return k.timezoneOffsetHour;case "TIMEZONE_MINUTE":return k.timezoneOffsetMinutes}throw new c.SqlError(c.SqlErrorCodes.InvalidFunctionParameters,{function:"EXTRACT"});}},substring:{minParams:2,maxParams:3,evaluate:b=>{if(2===b.length){const [k,x]=b;return null==k||null==x?null:k.toString().substring(x-1)}if(3===b.length){const [k,x,F]=b;return null==k||null==x||null==F?null:0>=F?"":k.toString().substring(x-1,x+F-1)}}},position:{minParams:2,maxParams:2,
evaluate:([b,k])=>null==b||null==k?null:k.indexOf(b)+1},trim:{minParams:2,maxParams:3,evaluate:b=>{var k=3===b.length,x=k?b[1]:" ";k=k?b[2]:b[1];if(null==x||null==k)return null;x=`(${y.escapeRegExpString(x)})`;switch(b[0]){case "BOTH":return k.replaceAll(new RegExp(`^${x}*|${x}*$`,"g"),"");case "LEADING":return k.replaceAll(new RegExp(`^${x}*`,"g"),"");case "TRAILING":return k.replaceAll(new RegExp(`${x}*$`,"g"),"")}throw new c.SqlError(c.SqlErrorCodes.InvalidFunctionParameters,{function:"TRIM"});
}},abs:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.abs(b[0])},ceiling:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.ceil(b[0])},floor:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.floor(b[0])},log:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.log(b[0])},log10:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.log(b[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.sin(b[0])},cos:{minParams:1,maxParams:1,evaluate:b=>
null==b[0]?null:Math.cos(b[0])},tan:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.tan(b[0])},asin:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.asin(b[0])},acos:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.acos(b[0])},atan:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.atan(b[0])},sign:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:0<b[0]?1:0>b[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:b=>null==b[0]||null==b[1]?null:b[0]**b[1]},mod:{minParams:2,
maxParams:2,evaluate:b=>null==b[0]||null==b[1]?null:b[0]%b[1]},round:{minParams:1,maxParams:2,evaluate:b=>{const k=b[0];b=2===b.length?10**b[1]:1;return null==k?null:Math.round(k*b)/b}},truncate:{minParams:1,maxParams:2,evaluate:b=>null==b[0]?null:1===b.length?parseInt(b[0].toFixed(0),10):parseFloat(b[0].toFixed(b[1]))},char_length:{minParams:1,maxParams:1,evaluate:b=>d(b[0])?b[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:b=>{let k="";for(let x=0;x<b.length;x++){if(null==b[x])return null;
k+=b[x].toString()}return k}},lower:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:b[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:b[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:b=>{for(const k of b)if(null!==k)return k;return null}},cosh:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.cosh(b[0])},sinh:{minParams:1,maxParams:1,evaluate:b=>null==b[0]?null:Math.sinh(b[0])},tanh:{minParams:1,maxParams:1,evaluate:b=>
null==b[0]?null:Math.tanh(b[0])},nullif:{minParams:2,maxParams:2,evaluate:(b,k)=>C.sqlCompare(b[0],b[1],"\x3d")?null:b[0]},cast:{minParams:2,maxParams:2,evaluate:(b,k)=>{const x=b[0];b=b[1];if(null===x)return null;switch(b.type){case "integer":if(!u(x))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);k=parseInt(x,10);if(isNaN(k))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);return k;case "smallint":if(!u(x))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);k=parseInt(x,10);if(isNaN(k))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);
if(32767<k||-32767>k)throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);return k;case "float":case "real":if(!u(x))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);k=parseFloat(x);if(isNaN(k))throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);return k;case "time":return p(x);case "date":return r(x);case "timestamp":return H(x,k,!0===b.withtimezone);case "varchar":k=A(x);if(k.length>b.size)throw new c.SqlError(c.SqlErrorCodes.CannotCastValue);return k;default:throw new c.SqlError(c.SqlErrorCodes.InvalidDataType);
}}}};a.evaluateFunction=function(b,k,x){const F=h[b.toLowerCase()];if(null==F)throw new c.SqlError(c.SqlErrorCodes.FunctionNotRecognized);if(k.length<F.minParams||k.length>F.maxParams)throw new c.SqlError(c.SqlErrorCodes.InvalidParameterCount,{name:b.toUpperCase()});return F.evaluate(k,x)};a.isStandardized=function(b,k){b=h[b.toLowerCase()];return null!=b&&k>=b.minParams&&k<=b.maxParams};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/sqlCompareUtils":function(){define("exports ../../arcade/featureset/support/errorsupport ./sqlDateParsingUtils ./SqlTimestampOffset ./UnknownTimeZone ../../chunks/datetime".split(" "),
function(a,c,y,t,C,z){function f(b){return y.isDateTime(b)||y.isTimestampOffset(b)?!0:!1}function w(b){return y.isDateTime(b)||y.isDateOnly(b)||y.isTimestampOffset(b)||y.isTimeOnly(b)?!0:!1}function d(b){if(y.isDateTime(b))return b.toMillis();if(y.isDateOnly(b))return b.toNumber();if(y.isTimestampOffset(b))return b.toMilliseconds();throw new c.SqlError(c.SqlErrorCodes.InvalidDataType);}function u(b,k,x){switch(x){case "\x3c\x3e":return b!==k;case "\x3d":return b===k;case "\x3e":return b>k;case "\x3c":return b<
k;case "\x3e\x3d":return b>=k;case "\x3c\x3d":return b<=k}}function A(b,k,x){const F=parseFloat(k);if(!isNaN(F))return u(b,F,x);b=b.toString();switch(x){case "\x3c\x3e":return b!==k;case "\x3d":return b===k;case "\x3e":return b>k;case "\x3c":return b<k;case "\x3e\x3d":return b>=k;case "\x3c\x3d":return b<=k}}function r(b,k,x){const F=parseFloat(b);if(!isNaN(F))return u(F,k,x);k=k.toString();switch(x){case "\x3c\x3e":return b!==k;case "\x3d":return b===k;case "\x3e":return b>k;case "\x3c":return b<
k;case "\x3e\x3d":return b>=k;case "\x3c\x3d":return b<=k}}function H(b,k,x){switch(x){case "\x3c\x3e":return b!==k;case "\x3d":return b===k;case "\x3e":return b>k;case "\x3c":return b<k;case "\x3e\x3d":return b>=k;case "\x3c\x3d":return b<=k}}function p(b,k,x){b instanceof t.SqlTimeStampOffset&&(b=b.toDateTime());k instanceof t.SqlTimeStampOffset&&(k=k.toDateTime());b=h(b);k=h(k);switch(x){case "\x3c\x3e":return b!==k;case "\x3d":return b===k;case "\x3e":return b>k;case "\x3c":return b<k;case "\x3e\x3d":return b>=
k;case "\x3c\x3d":return b<=k}}function h(b){return 321408E5*b.year+26784E5*b.month+864E5*b.day+36E5*b.hour+6E4*b.minute+1E3*b.second+b.millisecond}a.dateValueInMilliseconds=d;a.isDateOrTimeValue=w;a.isDateTimeComparableValue=f;a.sqlCompare=function(b,k,x,F){if(null==b||null==k)return null;if(y.isNumber(b)){if(y.isNumber(k))return u(b,k,x);if(y.isString(k))return A(b,k,x);if(w(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
}else if(y.isString(b)){if(y.isNumber(k))return r(b,k,x);if(y.isString(k))return H(b,k,x);if(y.isDateTime(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isTimeOnly(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isTimestampOffset(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}else if(y.isDateTime(b)){if(f(k)){if(b instanceof z.DateTime&&C.isUnknownTimeZone(b.zone)){if(k instanceof z.DateTime&&
!1===C.isUnknownTimeZone(k.zone)||k instanceof t.SqlTimeStampOffset)return p(b,k,x)}else if(k instanceof z.DateTime&&C.isUnknownTimeZone(k.zone)&&(b instanceof z.DateTime&&!1===C.isUnknownTimeZone(b.zone)||b instanceof t.SqlTimeStampOffset))return p(b,k,x);return u(d(b),d(k),x)}if(y.isString(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(k))return k=k.toDateTimeLuxon(b.zone),b=b.startOf("day"),u(b.toMillis(),k.toMillis(),x);if(y.isTimeOnly(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
if(y.isNumber(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}else if(y.isDateOnly(b)){if(y.isTimestampOffset(k))return b=b.toDateTimeLuxon(k.toDateTime().zone),k=k.startOfDay(),u(b.toMillis(),k.toMilliseconds(),x);if(y.isDateTime(k))return b=b.toDateTimeLuxon(k.zone),k=k.startOf("day"),u(b.toMillis(),k.toMillis(),x);if(y.isString(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(k))return u(b.toNumber(),k.toNumber(),x);if(y.isTimeOnly(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);
if(y.isNumber(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}else if(y.isTimeOnly(b)){if(y.isTimeOnly(k))return u(b.toNumber(),k.toNumber(),x);if(y.isString(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isNumber(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(f(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}else if(y.isTimestampOffset(b)){if(f(k))return k instanceof z.DateTime&&
C.isUnknownTimeZone(k.zone)?p(b,k,x):u(d(b),d(k),x);if(y.isString(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isDateOnly(k))return k=k.toDateTimeLuxon(b.toDateTime().zone),b=b.startOfDay(),u(b.toMilliseconds(),k.toMillis(),x);if(y.isTimeOnly(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);if(y.isNumber(k))throw new c.SqlError(c.SqlErrorCodes.InvalidOperator);}switch(x){case "\x3c\x3e":return b!==k;case "\x3d":return b===k;case "\x3e":return b>k;case "\x3c":return b<k;case "\x3e\x3d":return b>=
k;case "\x3c\x3d":return b<=k}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(a,c){var y={exports:{}};(function(z){(function(f,w){z.exports&&(z.exports=w())})(c.commonjsGlobal,function(){function f(d,u,A,r){d=Error.call(this,d);Object.setPrototypeOf&&Object.setPrototypeOf(d,f.prototype);d.expected=u;d.found=A;d.location=r;d.name="SyntaxError";return d}function w(d,u,A){A=A||" ";if(d.length>
u)return d;u-=d.length;A+=A.repeat(u);return d+A.slice(0,u)}(function(d,u){function A(){this.constructor=d}A.prototype=u.prototype;d.prototype=new A})(f,Error);f.prototype.format=function(d){var u="Error: "+this.message;if(this.location){var A=null,r;for(r=0;r<d.length;r++)if(d[r].source===this.location.source){A=d[r].text.split(/\r\n|\n|\r/g);break}d=this.location.start;r=this.location.source&&"function"===typeof this.location.source.offset?this.location.source.offset(d):d;var H=this.location.source+
":"+r.line+":"+r.column;if(A){var p=this.location.end,h=w("",r.line.toString().length," ");A=A[d.line-1];p=(d.line===p.line?p.column:A.length+1)-d.column||1;u+="\n --\x3e "+H+"\n"+h+" |\n"+r.line+" | "+A+"\n"+h+" | "+w("",d.column-1," ")+w("",p,"^")}else u+="\n at "+H}return u};f.buildMessage=function(d,u){function A(b){return b.charCodeAt(0).toString(16).toUpperCase()}function r(b){return b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(k){return"\\x0"+A(k)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(k){return"\\x"+A(k)})}function H(b){return b.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(k){return"\\x0"+A(k)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(k){return"\\x"+A(k)})}function p(b){return h[b.type](b)}var h={literal:function(b){return'"'+
r(b.text)+'"'},class:function(b){var k=b.parts.map(function(x){return Array.isArray(x)?H(x[0])+"-"+H(x[1]):H(x)});return"["+(b.inverted?"^":"")+k.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(b){return b.description}};return"Expected "+function(b){b=b.map(p);var k,x;b.sort();if(0<b.length){for(x=k=1;k<b.length;k++)b[k-1]!==b[k]&&(b[x]=b[k],x++);b.length=x}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,
-1).join(", ")+", or "+b[b.length-1]}}(d)+" but "+(u?'"'+r(u)+'"':"end of input")+" found."};return{SyntaxError:f,parse:function(d,u){function A(K,T){T=void 0!==T?T:h(ma,q);throw new f(K,null,null,T);}function r(K,T){return{type:"literal",text:K,ignoreCase:T}}function H(K,T,V){return{type:"class",parts:K,inverted:T,ignoreCase:V}}function p(K){var T=Zb[K],V;if(!T){for(V=K-1;!Zb[V];)V--;T=Zb[V];for(T={line:T.line,column:T.column};V<K;)10===d.charCodeAt(V)?(T.line++,T.column=1):T.column++,V++;Zb[K]=
T}return T}function h(K,T,V){var ca=p(K),pa=p(T);K={source:Mb,start:{offset:K,line:ca.line,column:ca.column},end:{offset:T,line:pa.line,column:pa.column}};V&&Mb&&"function"===typeof Mb.offset&&(K.start=Mb.offset(K.start),K.end=Mb.offset(K.end));return K}function b(K){q<eb||(q>eb&&(eb=q,zc=[]),zc.push(K))}function k(){var K=q;ja();var T=F();T!==e?(ja(),ma=K,K=T):(q=K,K=e);return K}function x(){var K=q;var T=F();if(T!==e){var V=[];var ca=q;var pa=ja();var za=Wa();if(za!==e){var Ea=ja();var Fa=F();Fa!==
e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)}else q=ca,ca=e;for(;ca!==e;)V.push(ca),ca=q,pa=ja(),za=Wa(),za!==e?(Ea=ja(),Fa=F(),Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)):(q=ca,ca=e);ma=K;K={type:"expression-list"};T=[T];for(ca=0;ca<V.length;ca++)T.push(V[ca][3]);K.value=T}else q=K,K=e;return K}function F(){var K=q;var T=M();if(T!==e){var V=[];var ca=q;var pa=ja();var za=Q();if(za!==e){var Ea=ja();var Fa=M();Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)}else q=ca,ca=e;for(;ca!==e;)V.push(ca),ca=q,pa=ja(),za=Q(),za!==
e?(Ea=ja(),Fa=M(),Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)):(q=ca,ca=e);ma=K;K=nb(T,V)}else q=K,K=e;return K}function M(){var K=q;var T=g();if(T!==e){var V=[];var ca=q;var pa=ja();var za=O();if(za!==e){var Ea=ja();var Fa=g();Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)}else q=ca,ca=e;for(;ca!==e;)V.push(ca),ca=q,pa=ja(),za=O(),za!==e?(Ea=ja(),Fa=g(),Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)):(q=ca,ca=e);ma=K;K=nb(T,V)}else q=K,K=e;return K}function g(){var K=q;var T=I();if(T===e){T=q;if(33===d.charCodeAt(q)){var V=
Nd;q++}else V=e,0===fa&&b(Od);if(V!==e){var ca=q;fa++;if(61===d.charCodeAt(q)){var pa=Sc;q++}else pa=e,0===fa&&b(Tc);fa--;pa===e?ca=void 0:(q=ca,ca=e);ca!==e?T=V=[V,ca]:(q=T,T=e)}else q=T,T=e}T!==e?(V=ja(),ca=g(),ca!==e?(ma=K,K={type:"unary-expression",operator:"NOT",expr:ca}):(q=K,K=e)):(q=K,K=e);if(K===e){T=q;K=v();if(K!==e){ja();V=q;ca=[];pa=q;var za=ja();var Ea=J();if(Ea!==e){var Fa=ja();var ob=v();ob!==e?pa=za=[za,Ea,Fa,ob]:(q=pa,pa=e)}else q=pa,pa=e;if(pa!==e)for(;pa!==e;)ca.push(pa),pa=q,za=
ja(),Ea=J(),Ea!==e?(Fa=ja(),ob=v(),ob!==e?pa=za=[za,Ea,Fa,ob]:(q=pa,pa=e)):(q=pa,pa=e);else ca=e;ca!==e&&(ma=V,ca={type:"arithmetic",tail:ca});V=ca;V===e&&(V=q,ca=m(),ca!==e?(ja(),pa=Ja(),pa!==e?(ja(),pa=x(),pa!==e?(ja(),za=Ka(),za!==e?(ma=V,V={op:ca,right:pa}):(q=V,V=e)):(q=V,V=e)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,ca=m(),ca!==e?(ja(),pa=Ja(),pa!==e?(ja(),pa=Ka(),pa!==e?(ma=V,V={op:ca,right:{type:"expression-list",value:[]}}):(q=V,V=e)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,ca=m(),ca!==e?(ja(),pa=ea(),
pa!==e?(ma=V,V={op:ca,right:pa}):(q=V,V=e)):(q=V,V=e))),V===e&&(V=q,za=I(),za!==e?(ja(),ca=W(),ca!==e?(ja(),pa=v(),pa!==e?(ja(),Ea=O(),Ea!==e?(ja(),za=v(),za!==e?(ma=V,V={op:"NOT"+ca,right:{type:"expression-list",value:[pa,za]}}):(q=V,V=e)):(q=V,V=e)):(q=V,V=e)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,za=W(),za!==e?(ja(),ca=v(),ca!==e?(ja(),pa=O(),pa!==e?(ja(),Ea=v(),Ea!==e?(ma=V,V={op:za,right:{type:"expression-list",value:[ca,Ea]}}):(q=V,V=e)):(q=V,V=e)):(q=V,V=e)):(q=V,V=e)),V===e&&(V=q,ca=aa(),ca!==
e?(ja(),pa=I(),pa!==e?(ja(),pa=v(),pa!==e?(ma=V,V={op:ca+"NOT",right:pa}):(q=V,V=e)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,ca=aa(),ca!==e?(ja(),pa=v(),pa!==e?(ma=V,V={op:ca,right:pa}):(q=V,V=e)):(q=V,V=e)),V===e&&(V=q,ca=R(),ca!==e?(ja(),pa=wa(),pa!==e?(ja(),za=q,d.substr(q,6).toLowerCase()===Pd?(Ea=d.substr(q,6),q+=6):(Ea=e,0===fa&&b(Qd)),Ea!==e?(Ea=q,fa++,Fa=S(),fa--,Fa===e?Ea=void 0:(q=Ea,Ea=e),Ea!==e?(ma=za,za="ESCAPE"):(q=za,za=e)):(q=za,za=e),za!==e?(ja(),za=xa(),za!==e?(ma=V,V={op:ca,right:pa,escape:za.value}):
(q=V,V=e)):(q=V,V=e)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,ca=R(),ca!==e?(ja(),pa=wa(),pa!==e?(ma=V,V={op:ca,right:pa,escape:""}):(q=V,V=e)):(q=V,V=e))))));V===e&&(V=null);ma=T;T=V;""==T||void 0==T||null==T?T=K:(V=null,T=V="arithmetic"==T.type?nb(K,T.tail):Nb(T.op,K,T.right,T.escape))}else q=T,T=e;K=T}return K}function J(){if(d.substr(q,2)===Uc){var K=Uc;q+=2}else K=e,0===fa&&b(Rd);K===e&&(62===d.charCodeAt(q)?(K=Sd,q++):(K=e,0===fa&&b(Td)),K===e&&(d.substr(q,2)===Vc?(K=Vc,q+=2):(K=e,0===fa&&b(Ud)),K===
e&&(d.substr(q,2)===Wc?(K=Wc,q+=2):(K=e,0===fa&&b(Vd)),K===e&&(60===d.charCodeAt(q)?(K=Wd,q++):(K=e,0===fa&&b(Xd)),K===e&&(61===d.charCodeAt(q)?(K=Sc,q++):(K=e,0===fa&&b(Tc)),K===e&&(d.substr(q,2)===Xc?(K=Xc,q+=2):(K=e,0===fa&&b(Yd))))))));return K}function R(){var K;var T=K=q;var V=I();if(V!==e){var ca=ja();var pa=ha();pa!==e?T=V=[V,ca,pa]:(q=T,T=e)}else q=T,T=e;T!==e&&(ma=K,T=T[0]+" "+T[2]);K=T;K===e&&(K=ha());return K}function m(){var K;var T=K=q;var V=I();if(V!==e){var ca=ja();var pa=X();pa!==
e?T=V=[V,ca,pa]:(q=T,T=e)}else q=T,T=e;T!==e&&(ma=K,T=T[0]+" "+T[2]);K=T;K===e&&(K=X());return K}function v(){var K=q;var T=N();if(T!==e){var V=[];var ca=q;var pa=ja();var za=E();if(za!==e){var Ea=ja();var Fa=N();Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)}else q=ca,ca=e;for(;ca!==e;)V.push(ca),ca=q,pa=ja(),za=E(),za!==e?(Ea=ja(),Fa=N(),Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)):(q=ca,ca=e);ma=K;K=nb(T,V)}else q=K,K=e;return K}function E(){if(43===d.charCodeAt(q)){var K=Ac;q++}else K=e,0===fa&&b(Bc);K===
e&&(45===d.charCodeAt(q)?(K=Cc,q++):(K=e,0===fa&&b(Dc)),K===e&&(d.substr(q,2)===Yc?(K=Yc,q+=2):(K=e,0===fa&&b(Zd))));return K}function N(){var K=q;var T=B();if(T!==e){var V=[];var ca=q;var pa=ja();var za=l();if(za!==e){var Ea=ja();var Fa=B();Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)}else q=ca,ca=e;for(;ca!==e;)V.push(ca),ca=q,pa=ja(),za=l(),za!==e?(Ea=ja(),Fa=B(),Fa!==e?ca=pa=[pa,za,Ea,Fa]:(q=ca,ca=e)):(q=ca,ca=e);ma=K;K=nb(T,V)}else q=K,K=e;return K}function l(){if(42===d.charCodeAt(q)){var K=$d;q++}else K=
e,0===fa&&b(ae);K===e&&(47===d.charCodeAt(q)?(K=be,q++):(K=e,0===fa&&b(ce)));return K}function B(){var K=xa();if(K===e){var T=q;var V=q;var ca=Na();if(ca!==e){var pa=Sa();if(pa!==e){var za=Va();za!==e?(ma=V,V=parseFloat(ca+pa+za)):(q=V,V=e)}else q=V,V=e}else q=V,V=e;V===e&&(V=q,ca=Na(),ca!==e?(pa=Sa(),pa!==e?(ma=V,V=parseFloat(ca+pa)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,ca=Na(),ca!==e?(pa=Va(),pa!==e?(ma=V,V=parseFloat(ca+pa)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,ca=Na(),ca!==e&&(ma=V,ca=parseFloat(ca)),
V=ca)));var Ea=V;if(Ea!==e){var Fa=q;fa++;var ob=G();fa--;ob===e?Fa=void 0:(q=Fa,Fa=e);Fa!==e?(ma=T,T={type:"number",value:Ea}):(q=T,T=e)}else q=T,T=e;K=T;if(K===e){var pb=q;var Jb=q;if(d.substr(q,4).toLowerCase()===de){var $b=d.substr(q,4);q+=4}else $b=e,0===fa&&b(ee);if($b!==e){var Ob=q;fa++;var fe=S();fa--;fe===e?Ob=void 0:(q=Ob,Ob=e);Ob!==e?Jb=$b=[$b,Ob]:(q=Jb,Jb=e)}else q=Jb,Jb=e;var qb=Jb;qb!==e&&(ma=pb,qb={type:"boolean",value:!0});pb=qb;if(pb===e){pb=q;var Kb=q;if(d.substr(q,5).toLowerCase()===
ge){var ac=d.substr(q,5);q+=5}else ac=e,0===fa&&b(he);if(ac!==e){var Pb=q;fa++;var ie=S();fa--;ie===e?Pb=void 0:(q=Pb,Pb=e);Pb!==e?Kb=ac=[ac,Pb]:(q=Kb,Kb=e)}else q=Kb,Kb=e;qb=Kb;qb!==e&&(ma=pb,qb={type:"boolean",value:!1});pb=qb}K=pb;if(K===e){var je=q;var Lb=q;if(d.substr(q,4).toLowerCase()===ke){var bc=d.substr(q,4);q+=4}else bc=e,0===fa&&b(le);if(bc!==e){var Qb=q;fa++;var me=S();fa--;me===e?Qb=void 0:(q=Qb,Qb=e);Qb!==e?Lb=bc=[bc,Qb]:(q=Lb,Lb=e)}else q=Lb,Lb=e;var Ec=Lb;Ec!==e&&(ma=je,Ec={type:"null",
value:null});K=Ec;if(K===e){var rb=q;if(ia()!==e){ja();var cc=wa();cc!==e?(ma=rb,"string"===cc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(cc.value)&&A("Date literal is invalid"),rb={type:"date",
value:cc.value}):(q=rb,rb=e)}else q=rb,rb=e;K=rb;if(K===e){var sb=q;if(da()!==e){ja();var dc=wa();dc!==e?(ma=sb,"string"===dc.type&&!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(dc.value)&&A("Timestamp literal is invalid"),
sb={type:"timestamp",value:dc.value}):(q=sb,sb=e)}else q=sb,sb=e;K=sb;if(K===e){var Ta=q;var Fc=ra();if(Fc!==e){ja();if(45===d.charCodeAt(q)){var hb=Cc;q++}else hb=e,0===fa&&b(Dc);hb===e&&(43===d.charCodeAt(q)?(hb=Ac,q++):(hb=e,0===fa&&b(Bc)));if(hb!==e){ja();var Rb=wa();if(Rb!==e){ja();var Zc=na();Zc!==e?(ma=Ta,Ta={type:"interval",value:Rb,qualifier:Zc,op:hb}):(q=Ta,Ta=e)}else q=Ta,Ta=e}else q=Ta,Ta=e}else q=Ta,Ta=e;Ta===e&&(Ta=q,Fc=ra(),Fc!==e?(ja(),hb=wa(),hb!==e?(ja(),Rb=na(),Rb!==e?(ma=Ta,Ta=
{type:"interval",value:hb,qualifier:Rb,op:""}):(q=Ta,Ta=e)):(q=Ta,Ta=e)):(q=Ta,Ta=e));K=Ta;if(K===e){var tb=q;if(ka()!==e){ja();var ec=wa();ec!==e?(ma=tb,"string"===ec.type&&!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(ec.value)&&A("Time literal is invalid"),tb={type:"time",value:ec.value}):(q=tb,tb=e)}else q=tb,tb=e;K=tb}}}}}}}var La=K;if(La===e){var Za=q;var ub=q;if(d.substr(q,7).toLowerCase()===ne){var $c=d.substr(q,7);q+=7}else $c=
e,0===fa&&b(oe);if($c!==e){var fc=q;fa++;var pe=S();fa--;pe===e?fc=void 0:(q=fc,fc=e);fc!==e?(ma=ub,ub="EXTRACT"):(q=ub,ub=e)}else q=ub,ub=e;if(ub!==e){ja();var qe=Ja();if(qe!==e){ja();var $a=oa();if($a===e&&($a=qa(),$a===e&&($a=Ca(),$a===e&&($a=va(),$a===e&&($a=Ba(),$a===e&&($a=Aa(),$a===e)))))){var vb=q;if(d.substr(q,13).toLowerCase()===re){var ad=d.substr(q,13);q+=13}else ad=e,0===fa&&b(se);if(ad!==e){var gc=q;fa++;var te=S();fa--;te===e?gc=void 0:(q=gc,gc=e);gc!==e?(ma=vb,vb="TIMEZONE_HOUR"):
(q=vb,vb=e)}else q=vb,vb=e;$a=vb;if($a===e){var wb=q;if(d.substr(q,15).toLowerCase()===ue){var bd=d.substr(q,15);q+=15}else bd=e,0===fa&&b(ve);if(bd!==e){var hc=q;fa++;var we=S();fa--;we===e?hc=void 0:(q=hc,hc=e);hc!==e?(ma=wb,wb="TIMEZONE_MINUTE"):(q=wb,wb=e)}else q=wb,wb=e;$a=wb}}var cd=$a;if(cd!==e){ja();var xe=Z();if(xe!==e){ja();var dd=F();if(dd!==e){ja();var ye=Ka();ye!==e?(ma=Za,Za={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:cd},dd]}}):(q=Za,Za=
e)}else q=Za,Za=e}else q=Za,Za=e}else q=Za,Za=e}else q=Za,Za=e}else q=Za,Za=e;La=Za;if(La===e){var ab=q;var xb=q;if(d.substr(q,9).toLowerCase()===ze){var ed=d.substr(q,9);q+=9}else ed=e,0===fa&&b(Ae);if(ed!==e){var ic=q;fa++;var Be=S();fa--;Be===e?ic=void 0:(q=ic,ic=e);ic!==e?(ma=xb,xb="SUBSTRING"):(q=xb,xb=e)}else q=xb,xb=e;if(xb!==e){ja();var Ce=Ja();if(Ce!==e){ja();var Gc=F();if(Gc!==e){ja();var De=Z();if(De!==e){ja();var Hc=F();if(Hc!==e){ja();var ib=q;var yb=q;if(d.substr(q,3).toLowerCase()===
Ee){var fd=d.substr(q,3);q+=3}else fd=e,0===fa&&b(Fe);if(fd!==e){var jc=q;fa++;var Ge=S();fa--;Ge===e?jc=void 0:(q=jc,jc=e);jc!==e?(ma=yb,yb="FOR"):(q=yb,yb=e)}else q=yb,yb=e;var Sb=yb;if(Sb!==e){var He=ja();var gd=F();if(gd!==e){var Ie=ja();ib=Sb=[Sb,He,gd,Ie]}else q=ib,ib=e}else q=ib,ib=e;ib===e&&(ib=null);Sb=Ka();Sb!==e?(ma=ab,ab={type:"function",name:"substring",args:{type:"expression-list",value:ib?[Gc,Hc,ib[2]]:[Gc,Hc]}}):(q=ab,ab=e)}else q=ab,ab=e}else q=ab,ab=e}else q=ab,ab=e}else q=ab,ab=
e}else q=ab,ab=e;La=ab;if(La===e){var Oa=q;var Ic=ba();if(Ic!==e){ja();var Jc=Ja();if(Jc!==e){ja();var jb=la();jb===e&&(jb=null);ja();var Tb=F();if(Tb!==e){ja();var Kc=Z();if(Kc!==e){ja();var hd=F();if(hd!==e){ja();var Je=Ka();Je!==e?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb,hd]}}):(q=Oa,Oa=e)}else q=Oa,Oa=e}else q=Oa,Oa=e}else q=Oa,Oa=e}else q=Oa,Oa=e}else q=Oa,Oa=e;Oa===e&&(Oa=q,Ic=ba(),Ic!==e?(ja(),Jc=Ja(),Jc!==e?(ja(),
jb=la(),jb===e&&(jb=null),ja(),Tb=F(),Tb!==e?(ja(),Kc=Ka(),Kc!==e?(ma=Oa,Oa={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==jb?"BOTH":jb},Tb]}}):(q=Oa,Oa=e)):(q=Oa,Oa=e)):(q=Oa,Oa=e)):(q=Oa,Oa=e));La=Oa;if(La===e){var bb=q;var zb=q;if(d.substr(q,8).toLowerCase()===Ke){var id=d.substr(q,8);q+=8}else id=e,0===fa&&b(Le);if(id!==e){var kc=q;fa++;var Me=S();fa--;Me===e?kc=void 0:(q=kc,kc=e);kc!==e?(ma=zb,zb="POSITION"):(q=zb,zb=e)}else q=zb,zb=e;if(zb!==e){ja();
var Ne=Ja();if(Ne!==e){ja();var jd=F();if(jd!==e){ja();var Oe=X();if(Oe!==e){ja();var kd=F();if(kd!==e){ja();var Pe=Ka();Pe!==e?(ma=bb,bb={type:"function",name:"position",args:{type:"expression-list",value:[jd,kd]}}):(q=bb,bb=e)}else q=bb,bb=e}else q=bb,bb=e}else q=bb,bb=e}else q=bb,bb=e}else q=bb,bb=e;La=bb;if(La===e){var cb=q;var Ab=q;if(d.substr(q,4).toLowerCase()===Qe){var ld=d.substr(q,4);q+=4}else ld=e,0===fa&&b(Re);if(ld!==e){var lc=q;fa++;var Se=S();fa--;Se===e?lc=void 0:(q=lc,lc=e);lc!==
e?(ma=Ab,Ab="CAST"):(q=Ab,Ab=e)}else q=Ab,Ab=e;if(Ab!==e){ja();var Te=Ja();if(Te!==e){ja();var md=F();if(md!==e){ja();var Bb=q;if(d.substr(q,2).toLowerCase()===Ue){var nd=d.substr(q,2);q+=2}else nd=e,0===fa&&b(Ve);if(nd!==e){var mc=q;fa++;var We=S();fa--;We===e?mc=void 0:(q=mc,mc=e);mc!==e?(ma=Bb,Bb="AS"):(q=Bb,Bb=e)}else q=Bb,Bb=e;var Xe=Bb;if(Xe!==e){ja();var Ga=q;var Cb=q;if(d.substr(q,7).toLowerCase()===Ye){var od=d.substr(q,7);q+=7}else od=e,0===fa&&b(Ze);if(od!==e){var nc=q;fa++;var $e=S();
fa--;$e===e?nc=void 0:(q=nc,nc=e);nc!==e?(ma=Cb,Cb="INTEGER"):(q=Cb,Cb=e)}else q=Cb,Cb=e;var Ma=Cb;Ma!==e&&(ma=Ga,Ma={type:"data-type",value:{type:"integer"}});Ga=Ma;if(Ga===e){Ga=q;var Db=q;if(d.substr(q,8).toLowerCase()===af){var pd=d.substr(q,8);q+=8}else pd=e,0===fa&&b(bf);if(pd!==e){var oc=q;fa++;var cf=S();fa--;cf===e?oc=void 0:(q=oc,oc=e);oc!==e?(ma=Db,Db="SMALLINT"):(q=Db,Db=e)}else q=Db,Db=e;Ma=Db;Ma!==e&&(ma=Ga,Ma={type:"data-type",value:{type:"smallint"}});Ga=Ma;if(Ga===e){Ga=q;var Eb=
q;if(d.substr(q,5).toLowerCase()===df){var qd=d.substr(q,5);q+=5}else qd=e,0===fa&&b(ef);if(qd!==e){var pc=q;fa++;var ff=S();fa--;ff===e?pc=void 0:(q=pc,pc=e);pc!==e?(ma=Eb,Eb="FLOAT"):(q=Eb,Eb=e)}else q=Eb,Eb=e;Ma=Eb;Ma!==e&&(ma=Ga,Ma={type:"data-type",value:{type:"float"}});Ga=Ma;if(Ga===e){Ga=q;var Fb=q;if(d.substr(q,4).toLowerCase()===gf){var rd=d.substr(q,4);q+=4}else rd=e,0===fa&&b(hf);if(rd!==e){var qc=q;fa++;var jf=S();fa--;jf===e?qc=void 0:(q=qc,qc=e);qc!==e?(ma=Fb,Fb="REAL"):(q=Fb,Fb=e)}else q=
Fb,Fb=e;Ma=Fb;Ma!==e&&(ma=Ga,Ma={type:"data-type",value:{type:"real"}});Ga=Ma;if(Ga===e&&(Ga=q,Ma=ia(),Ma!==e&&(ma=Ga,Ma={type:"data-type",value:{type:"date"}}),Ga=Ma,Ga===e&&(Ga=q,Ma=da(),Ma!==e&&(ma=Ga,Ma={type:"data-type",value:{type:"timestamp"}}),Ga=Ma,Ga===e&&(Ga=q,Ma=ka(),Ma!==e&&(ma=Ga,Ma={type:"data-type",value:{type:"time"}}),Ga=Ma,Ga===e)))){Ga=q;var Gb=q;if(d.substr(q,7).toLowerCase()===kf){var sd=d.substr(q,7);q+=7}else sd=e,0===fa&&b(lf);if(sd!==e){var rc=q;fa++;var mf=S();fa--;mf===
e?rc=void 0:(q=rc,rc=e);rc!==e?(ma=Gb,Gb="VARCHAR"):(q=Gb,Gb=e)}else q=Gb,Gb=e;Ma=Gb;if(Ma!==e){ja();var nf=Ja();if(nf!==e){ja();var td=n();if(td!==e){ja();var of=Ka();of!==e?(ma=Ga,Ga={type:"data-type",value:{type:"varchar",size:parseInt(td)}}):(q=Ga,Ga=e)}else q=Ga,Ga=e}else q=Ga,Ga=e}else q=Ga,Ga=e}}}}var ud=Ga;if(ud!==e){ja();var pf=Ka();pf!==e?(ma=cb,cb={type:"function",name:"cast",args:{type:"expression-list",value:[md,ud]}}):(q=cb,cb=e)}else q=cb,cb=e}else q=cb,cb=e}else q=cb,cb=e}else q=cb,
cb=e}else q=cb,cb=e;La=cb;if(La===e){var kb=q;var db=q;var Ub=D();Ub!==e&&(ma=db);db=Ub;if(db===e)if(db=q,96===d.charCodeAt(q)?(Ub=vd,q++):(Ub=e,0===fa&&b(wd)),Ub!==e){var sc=[];if(xd.test(d.charAt(q))){var lb=d.charAt(q);q++}else lb=e,0===fa&&b(yd);if(lb!==e)for(;lb!==e;)sc.push(lb),xd.test(d.charAt(q))?(lb=d.charAt(q),q++):(lb=e,0===fa&&b(yd));else sc=e;sc!==e?(96===d.charCodeAt(q)?(lb=vd,q++):(lb=e,0===fa&&b(wd)),lb!==e?(ma=db,db=sc.join("")):(q=db,db=e)):(q=db,db=e)}else q=db,db=e;var zd=db;if(zd!==
e){ja();var qf=Ja();if(qf!==e){ja();var tc=x();tc===e&&(tc=null);ja();var rf=Ka();rf!==e?(ma=kb,kb={type:"function",name:zd,args:tc?tc:{type:"expression-list",value:[]}}):(q=kb,kb=e)}else q=kb,kb=e}else q=kb,kb=e;La=kb;if(La===e){var fb;var Ua=q;var Lc=ya();if(Lc!==e){ja();var Vb=F();if(Vb!==e){ja();var Wb=[];for(fb=Ia();fb!==e;)Wb.push(fb),fb=Ia();fb=ja();var uc=Ha();uc!==e?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:null}):(q=Ua,Ua=e)}else q=Ua,Ua=e}else q=Ua,Ua=
e;if(Ua===e)if(Ua=q,Lc=ya(),Lc!==e)if(ja(),Vb=F(),Vb!==e){ja();Wb=[];for(fb=Ia();fb!==e;)Wb.push(fb),fb=Ia();fb=ja();uc=Ra();if(uc!==e){ja();var sf=Ha();sf!==e?(ma=Ua,Ua={type:"case-expression",format:"simple",operand:Vb,clauses:Wb,else:uc.value}):(q=Ua,Ua=e)}else q=Ua,Ua=e}else q=Ua,Ua=e;else q=Ua,Ua=e;var Mc=Ua;if(Mc===e){var gb;var Xa=q;var Nc=ya();if(Nc!==e){ja();var Xb=[];for(gb=Da();gb!==e;)Xb.push(gb),gb=Da();gb=ja();var vc=Ha();vc!==e?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,
else:null}):(q=Xa,Xa=e)}else q=Xa,Xa=e;if(Xa===e)if(Xa=q,Nc=ya(),Nc!==e){ja();Xb=[];for(gb=Da();gb!==e;)Xb.push(gb),gb=Da();gb=ja();vc=Ra();if(vc!==e){ja();var tf=Ha();tf!==e?(ma=Xa,Xa={type:"case-expression",format:"searched",clauses:Xb,else:vc.value}):(q=Xa,Xa=e)}else q=Xa,Xa=e}else q=Xa,Xa=e;Mc=Xa}La=Mc;if(La===e){var Hb=q;var uf=q;var wc;var Yb=q;var Ad=G();if(Ad!==e){var Bd=[];for(wc=P();wc!==e;)Bd.push(wc),wc=P();ma=Yb;Yb=Ad+Bd.join("")}else q=Yb,Yb=e;var Cd=Yb;Cd!==e&&(ma=uf);var mb=Cd;if(mb!==
e){ma=Hb;var Oc=mb;mb=/^CURRENT_DATE$/i.test(Oc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:Oc}}Hb=mb;if(Hb===e){Hb=q;var Ib=q;if(Y()!==e){var xc;var vf=q;var Pc=[];for(xc=U();xc!==e;)Pc.push(xc),xc=U();ma=vf;var wf=Pc=Pc.join("");var xf=Y();xf!==e?(ma=Ib,Ib=wf):(q=Ib,Ib=e)}else q=Ib,Ib=e;mb=Ib;mb!==e&&(ma=Hb,mb={type:"column-reference",table:"",column:mb,delimited:!0});Hb=mb}La=Hb;if(La===e&&(La=
ea(),La===e)){La=q;var yf=Ja();if(yf!==e){ja();var Qc=F();if(Qc!==e){ja();var zf=Ka();zf!==e?(ma=La,Qc.paren=!0,La=Qc):(q=La,La=e)}else q=La,La=e}else q=La,La=e}}}}}}}}}return La}function D(){var K;var T=q;var V=G();if(V!==e){var ca=[];for(K=S();K!==e;)ca.push(K),K=S();ma=T;T=V+ca.join("")}else q=T,T=e;return T}function G(){if(Af.test(d.charAt(q))){var K=d.charAt(q);q++}else K=e,0===fa&&b(Bf);return K}function S(){if(Cf.test(d.charAt(q))){var K=d.charAt(q);q++}else K=e,0===fa&&b(Df);return K}function P(){if(Dd.test(d.charAt(q))){var K=
d.charAt(q);q++}else K=e,0===fa&&b(Ed);return K}function U(){if(Dd.test(d.charAt(q))){var K=d.charAt(q);q++}else K=e,0===fa&&b(Ed);if(K===e)if(K=q,Y()!==e){var T=Y();T!==e?(ma=K,K='"'):(q=K,K=e)}else q=K,K=e;return K}function Y(){if(Ef.test(d.charAt(q))){var K=d.charAt(q);q++}else K=e,0===fa&&b(Ff);return K}function ea(){var K;var T=K=q;if(64===d.charCodeAt(q)){var V=Gf;q++}else V=e,0===fa&&b(Hf);if(V!==e){var ca=D();ca!==e?T=V=[V,ca]:(q=T,T=e)}else q=T,T=e;T!==e&&(ma=K,T={type:"parameter",value:T[1]});
return T}function la(){var K=q;if(d.substr(q,7).toLowerCase()===If){var T=d.substr(q,7);q+=7}else T=e,0===fa&&b(Jf);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="LEADING"):(q=K,K=e)}else q=K,K=e;K===e&&(K=q,d.substr(q,8).toLowerCase()===Kf?(T=d.substr(q,8),q+=8):(T=e,0===fa&&b(Lf)),T!==e?(T=q,fa++,V=S(),fa--,V===e?T=void 0:(q=T,T=e),T!==e?(ma=K,K="TRAILING"):(q=K,K=e)):(q=K,K=e),K===e&&(K=q,d.substr(q,4).toLowerCase()===Mf?(T=d.substr(q,4),q+=4):(T=e,0===fa&&b(Nf)),T!==
e?(T=q,fa++,V=S(),fa--,V===e?T=void 0:(q=T,T=e),T!==e?(ma=K,K="BOTH"):(q=K,K=e)):(q=K,K=e)));return K}function na(){var K=q;var T=q;var V=sa();if(V!==e){ja();var ca=Ja();if(ca!==e)if(ja(),ca=ta(),ca!==e){ja();var pa=Ka();pa!==e?(ma=T,T={type:"interval-period",period:V.value,precision:ca,secondary:null}):(q=T,T=e)}else q=T,T=e;else q=T,T=e}else q=T,T=e;T===e&&(T=q,V=sa(),V!==e&&(ma=T,V={type:"interval-period",period:V.value,precision:null,secondary:null}),T=V);if(T!==e)if(ja(),V=q,d.substr(q,2).toLowerCase()===
Of?(ca=d.substr(q,2),q+=2):(ca=e,0===fa&&b(Pf)),ca!==e?(ca=q,fa++,pa=S(),fa--,pa===e?ca=void 0:(q=ca,ca=e),ca!==e?(ma=V,V="TO"):(q=V,V=e)):(q=V,V=e),V!==e){ja();V=q;ca=sa();ca!==e&&(ma=V,ca={type:"interval-period",period:ca.value,precision:null,secondary:null});V=ca;if(V===e){V=q;ca=Aa();if(ca!==e)if(ja(),ca=Ja(),ca!==e)if(ja(),ca=ta(),ca!==e)if(ja(),pa=Wa(),pa!==e)if(ja(),pa=ua(),pa!==e){ja();var za=Ka();za!==e?(ma=V,V={type:"interval-period",period:"second",precision:ca,secondary:pa}):(q=V,V=e)}else q=
V,V=e;else q=V,V=e;else q=V,V=e;else q=V,V=e;else q=V,V=e;V===e&&(V=q,ca=Aa(),ca!==e?(ja(),ca=Ja(),ca!==e?(ja(),ca=ta(),ca!==e?(ja(),pa=Ka(),pa!==e?(ma=V,V={type:"interval-period",period:"second",precision:ca,secondary:null}):(q=V,V=e)):(q=V,V=e)):(q=V,V=e)):(q=V,V=e),V===e&&(V=q,ca=Aa(),ca!==e&&(ma=V,ca={type:"interval-period",period:"second",precision:null,secondary:null}),V=ca))}V!==e?(ma=K,K={type:"interval-qualifier",start:T,end:V}):(q=K,K=e)}else q=K,K=e;else q=K,K=e;K===e&&(K=q,V=sa(),V!==
e?(ja(),T=Ja(),T!==e?(ja(),T=ua(),T!==e?(ja(),ca=Ka(),ca!==e?(ma=K,K={type:"interval-period",period:V.value,precision:T,secondary:null}):(q=K,K=e)):(q=K,K=e)):(q=K,K=e)):(q=K,K=e),K===e&&(K=q,V=sa(),V!==e&&(ma=K,V={type:"interval-period",period:V.value,precision:null,secondary:null}),K=V,K===e&&(K=q,V=Aa(),V!==e?(ja(),T=Ja(),T!==e?(ja(),T=ta(),T!==e?(ja(),ca=Wa(),ca!==e?(ja(),V=ua(),V!==e?(ja(),ca=Ka(),ca!==e?(ma=K,K={type:"interval-period",period:"second",precision:T,secondary:V}):(q=K,K=e)):(q=
K,K=e)):(q=K,K=e)):(q=K,K=e)):(q=K,K=e)):(q=K,K=e),K===e&&(K=q,V=Aa(),V!==e?(ja(),T=Ja(),T!==e?(ja(),T=ua(),T!==e?(ja(),ca=Ka(),ca!==e?(ma=K,K={type:"interval-period",period:"second",precision:T,secondary:null}):(q=K,K=e)):(q=K,K=e)):(q=K,K=e)):(q=K,K=e),K===e&&(K=q,V=Aa(),V!==e&&(ma=K,V={type:"interval-period",period:"second",precision:null,secondary:null}),K=V)))));return K}function sa(){var K=q;var T=Ca();T!==e&&(ma=K,T={type:"string",value:"day"});K=T;K===e&&(K=q,T=va(),T!==e&&(ma=K,T={type:"string",
value:"hour"}),K=T,K===e&&(K=q,T=Ba(),T!==e&&(ma=K,T={type:"string",value:"minute"}),K=T,K===e&&(K=q,T=qa(),T!==e&&(ma=K,T={type:"string",value:"month"}),K=T,K===e&&(K=q,T=oa(),T!==e&&(ma=K,T={type:"string",value:"year"}),K=T))));return K}function ua(){var K=q;var T=n();T!==e&&(ma=K,T=parseFloat(T));return T}function ta(){var K=q;var T=n();T!==e&&(ma=K,T=parseFloat(T));return T}function wa(){var K=xa();K===e&&(K=ea());return K}function xa(){var K=q;if(39===d.charCodeAt(q)){var T=Fd;q++}else T=e,0===
fa&&b(Gd);T===e&&(d.substr(q,2)===Hd?(T=Hd,q+=2):(T=e,0===fa&&b(Qf)));if(T!==e){T=[];var V=q;if(d.substr(q,2)===yc){var ca=yc;q+=2}else ca=e,0===fa&&b(Id);ca!==e&&(ma=V,ca="'");V=ca;V===e&&(Jd.test(d.charAt(q))?(V=d.charAt(q),q++):(V=e,0===fa&&b(Kd)));for(;V!==e;)T.push(V),V=q,d.substr(q,2)===yc?(ca=yc,q+=2):(ca=e,0===fa&&b(Id)),ca!==e&&(ma=V,ca="'"),V=ca,V===e&&(Jd.test(d.charAt(q))?(V=d.charAt(q),q++):(V=e,0===fa&&b(Kd)));39===d.charCodeAt(q)?(V=Fd,q++):(V=e,0===fa&&b(Gd));V!==e?(ma=K,K={type:"string",
value:T.join("")}):(q=K,K=e)}else q=K,K=e;return K}function Da(){var K=q;if(Pa()!==e){ja();var T=F();if(T!==e){ja();var V=Ya();V!==e?(ja(),V=F(),V!==e?(ma=K,K={type:"when-clause",operand:T,value:V}):(q=K,K=e)):(q=K,K=e)}else q=K,K=e}else q=K,K=e;return K}function Ia(){var K=q;if(Pa()!==e){ja();var T=F();if(T!==e){ja();var V=Ya();V!==e?(ja(),V=F(),V!==e?(ma=K,K={type:"when-clause",operand:T,value:V}):(q=K,K=e)):(q=K,K=e)}else q=K,K=e}else q=K,K=e;return K}function Ra(){var K=q;var T=q;if(d.substr(q,
4).toLowerCase()===Rf){var V=d.substr(q,4);q+=4}else V=e,0===fa&&b(Sf);if(V!==e){V=q;fa++;var ca=S();fa--;ca===e?V=void 0:(q=V,V=e);V!==e?(ma=T,T="ELSE"):(q=T,T=e)}else q=T,T=e;T!==e?(ja(),T=F(),T!==e?(ma=K,K={type:"else-clause",value:T}):(q=K,K=e)):(q=K,K=e);return K}function Na(){var K=n();if(K===e){K=q;if(45===d.charCodeAt(q)){var T=Cc;q++}else T=e,0===fa&&b(Dc);T===e&&(43===d.charCodeAt(q)?(T=Ac,q++):(T=e,0===fa&&b(Bc)));if(T!==e){var V=n();V!==e?(ma=K,K=T[0]+V):(q=K,K=e)}else q=K,K=e}return K}
function Sa(){var K=q;if(46===d.charCodeAt(q)){var T=Tf;q++}else T=e,0===fa&&b(Uf);T!==e?(T=n(),T===e&&(T=null),ma=K,K="."+(null!=T?T:"")):(q=K,K=e);return K}function Va(){var K;var T=K=q;if(Vf.test(d.charAt(q))){var V=d.charAt(q);q++}else V=e,0===fa&&b(Wf);V!==e?(Xf.test(d.charAt(q))?(V=d.charAt(q),q++):(V=e,0===fa&&b(Yf)),V===e&&(V=null),ma=T,T="e"+(null===V?"":V)):(q=T,T=e);T!==e?(V=n(),V!==e?(ma=K,K=T+V):(q=K,K=e)):(q=K,K=e);return K}function n(){var K=q;var T=[];var V=L();if(V!==e)for(;V!==e;)T.push(V),
V=L();else T=e;T!==e&&(ma=K,T=T.join(""));return T}function L(){if(Zf.test(d.charAt(q))){var K=d.charAt(q);q++}else K=e,0===fa&&b($f);return K}function X(){var K=q;if(d.substr(q,2).toLowerCase()===ag){var T=d.substr(q,2);q+=2}else T=e,0===fa&&b(bg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="IN"):(q=K,K=e)}else q=K,K=e;return K}function aa(){var K=q;if(d.substr(q,2).toLowerCase()===cg){var T=d.substr(q,2);q+=2}else T=e,0===fa&&b(dg);if(T!==e){T=q;fa++;var V=S();fa--;
V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="IS"):(q=K,K=e)}else q=K,K=e;return K}function ha(){var K=q;if(d.substr(q,4).toLowerCase()===eg){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(fg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="LIKE"):(q=K,K=e)}else q=K,K=e;return K}function I(){var K=q;if(d.substr(q,3).toLowerCase()===gg){var T=d.substr(q,3);q+=3}else T=e,0===fa&&b(hg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="NOT"):(q=K,K=e)}else q=K,
K=e;return K}function O(){var K=q;if(d.substr(q,3).toLowerCase()===ig){var T=d.substr(q,3);q+=3}else T=e,0===fa&&b(jg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="AND"):(q=K,K=e)}else q=K,K=e;return K}function Q(){var K=q;if(d.substr(q,2).toLowerCase()===kg){var T=d.substr(q,2);q+=2}else T=e,0===fa&&b(lg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="OR"):(q=K,K=e)}else q=K,K=e;return K}function W(){var K=q;if(d.substr(q,7).toLowerCase()===
mg){var T=d.substr(q,7);q+=7}else T=e,0===fa&&b(ng);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="BETWEEN"):(q=K,K=e)}else q=K,K=e;return K}function Z(){var K=q;if(d.substr(q,4).toLowerCase()===og){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(pg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="FROM"):(q=K,K=e)}else q=K,K=e;return K}function ba(){var K=q;if(d.substr(q,4).toLowerCase()===qg){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(rg);if(T!==
e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="TRIM"):(q=K,K=e)}else q=K,K=e;return K}function da(){var K=q;if(d.substr(q,9).toLowerCase()===sg){var T=d.substr(q,9);q+=9}else T=e,0===fa&&b(tg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="TIMESTAMP"):(q=K,K=e)}else q=K,K=e;return K}function ia(){var K=q;if(d.substr(q,4).toLowerCase()===ug){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(vg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==
e?(ma=K,K="DATE"):(q=K,K=e)}else q=K,K=e;return K}function ka(){var K=q;if(d.substr(q,4).toLowerCase()===wg){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(xg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="TIME"):(q=K,K=e)}else q=K,K=e;return K}function ra(){var K=q;if(d.substr(q,8).toLowerCase()===yg){var T=d.substr(q,8);q+=8}else T=e,0===fa&&b(zg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="INTERVAL"):(q=K,K=e)}else q=K,K=e;return K}function oa(){var K=
q;if(d.substr(q,4).toLowerCase()===Ag){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(Bg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="YEAR"):(q=K,K=e)}else q=K,K=e;return K}function qa(){var K=q;if(d.substr(q,5).toLowerCase()===Cg){var T=d.substr(q,5);q+=5}else T=e,0===fa&&b(Dg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="MONTH"):(q=K,K=e)}else q=K,K=e;return K}function Ca(){var K=q;if(d.substr(q,3).toLowerCase()===Eg){var T=d.substr(q,3);q+=
3}else T=e,0===fa&&b(Fg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="DAY"):(q=K,K=e)}else q=K,K=e;return K}function va(){var K=q;if(d.substr(q,4).toLowerCase()===Gg){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(Hg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="HOUR"):(q=K,K=e)}else q=K,K=e;return K}function Ba(){var K=q;if(d.substr(q,6).toLowerCase()===Ig){var T=d.substr(q,6);q+=6}else T=e,0===fa&&b(Jg);if(T!==e){T=q;fa++;var V=S();fa--;V===
e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="MINUTE"):(q=K,K=e)}else q=K,K=e;return K}function Aa(){var K=q;if(d.substr(q,6).toLowerCase()===Kg){var T=d.substr(q,6);q+=6}else T=e,0===fa&&b(Lg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="SECOND"):(q=K,K=e)}else q=K,K=e;return K}function ya(){var K=q;if(d.substr(q,4).toLowerCase()===Mg){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(Ng);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="CASE"):(q=K,K=e)}else q=
K,K=e;return K}function Ha(){var K=q;if(d.substr(q,3).toLowerCase()===Og){var T=d.substr(q,3);q+=3}else T=e,0===fa&&b(Pg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="END"):(q=K,K=e)}else q=K,K=e;return K}function Pa(){var K=q;if(d.substr(q,4).toLowerCase()===Qg){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(Rg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="WHEN"):(q=K,K=e)}else q=K,K=e;return K}function Ya(){var K=q;if(d.substr(q,4).toLowerCase()===
Sg){var T=d.substr(q,4);q+=4}else T=e,0===fa&&b(Tg);if(T!==e){T=q;fa++;var V=S();fa--;V===e?T=void 0:(q=T,T=e);T!==e?(ma=K,K="THEN"):(q=K,K=e)}else q=K,K=e;return K}function Wa(){if(44===d.charCodeAt(q)){var K=Ug;q++}else K=e,0===fa&&b(Vg);return K}function Ja(){if(40===d.charCodeAt(q)){var K=Wg;q++}else K=e,0===fa&&b(Xg);return K}function Ka(){if(41===d.charCodeAt(q)){var K=Yg;q++}else K=e,0===fa&&b(Zg);return K}function ja(){var K;var T=[];for(K=Qa();K!==e;)T.push(K),K=Qa();return T}function Qa(){if($g.test(d.charAt(q))){var K=
d.charAt(q);q++}else K=e,0===fa&&b(ah);return K}function Nb(K,T,V,ca){K={type:"binary-expression",operator:K,left:T,right:V};void 0!==ca&&(K.escape=ca);return K}function nb(K,T){for(var V=0;V<T.length;V++)K=Nb(T[V][1],K,T[V][3]);return K}u=void 0!==u?u:{};var e={},Mb=u.grammarSource,Ld={start:k},Md=k,Nd="!",Sc="\x3d",Uc="\x3e\x3d",Sd="\x3e",Vc="\x3c\x3d",Wc="\x3c\x3e",Wd="\x3c",Xc="!\x3d",Ac="+",Cc="-",Yc="||",$d="*",be="/",Gf="@",Fd="'",Hd="N'",yc="''",Tf=".",ke="null",de="true",ge="false",ag="in",
cg="is",eg="like",Pd="escape",gg="not",ig="and",kg="or",mg="between",og="from",Ee="for",ze="substring",ne="extract",qg="trim",Ke="position",sg="timestamp",ug="date",wg="time",If="leading",Kf="trailing",Mf="both",Qe="cast",Ue="as",Ye="integer",af="smallint",df="float",gf="real",kf="varchar",Of="to",yg="interval",Ag="year",re="timezone_hour",ue="timezone_minute",Cg="month",Eg="day",Gg="hour",Ig="minute",Kg="second",Mg="case",Og="end",Qg="when",Sg="then",Rf="else",Ug=",",Wg="(",Yg=")",vd="`",Af=/^[A-Za-z_\x80-\uFFFF]/,
Cf=/^[A-Za-z0-9_]/,Dd=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ef=/^["]/,Jd=/^[^']/,Zf=/^[0-9]/,Vf=/^[eE]/,Xf=/^[+\-]/,$g=/^[ \t\n\r]/,xd=/^[^`]/,Od=r("!",!1),Tc=r("\x3d",!1),Rd=r("\x3e\x3d",!1),Td=r("\x3e",!1),Ud=r("\x3c\x3d",!1),Vd=r("\x3c\x3e",!1),Xd=r("\x3c",!1),Yd=r("!\x3d",!1),Bc=r("+",!1),Dc=r("-",!1),Zd=r("||",!1),ae=r("*",!1),ce=r("/",!1),Bf=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Df=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ed=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],
!1,!1),Ff=H(['"'],!1,!1),Hf=r("@",!1),Gd=r("'",!1),Qf=r("N'",!1),Id=r("''",!1),Kd=H(["'"],!0,!1),Uf=r(".",!1),$f=H([["0","9"]],!1,!1),Wf=H(["e","E"],!1,!1),Yf=H(["+","-"],!1,!1),le=r("NULL",!0),ee=r("TRUE",!0),he=r("FALSE",!0),bg=r("IN",!0),dg=r("IS",!0),fg=r("LIKE",!0),Qd=r("ESCAPE",!0),hg=r("NOT",!0),jg=r("AND",!0),lg=r("OR",!0),ng=r("BETWEEN",!0),pg=r("FROM",!0),Fe=r("FOR",!0),Ae=r("SUBSTRING",!0),oe=r("EXTRACT",!0),rg=r("TRIM",!0),Le=r("POSITION",!0),tg=r("TIMESTAMP",!0),vg=r("DATE",!0),xg=r("TIME",
!0),Jf=r("LEADING",!0),Lf=r("TRAILING",!0),Nf=r("BOTH",!0),Re=r("CAST",!0),Ve=r("AS",!0),Ze=r("INTEGER",!0),bf=r("SMALLINT",!0),ef=r("FLOAT",!0),hf=r("REAL",!0),lf=r("VARCHAR",!0),Pf=r("TO",!0),zg=r("INTERVAL",!0),Bg=r("YEAR",!0),se=r("TIMEZONE_HOUR",!0),ve=r("TIMEZONE_MINUTE",!0),Dg=r("MONTH",!0),Fg=r("DAY",!0),Hg=r("HOUR",!0),Jg=r("MINUTE",!0),Lg=r("SECOND",!0),Ng=r("CASE",!0),Pg=r("END",!0),Rg=r("WHEN",!0),Tg=r("THEN",!0),Sf=r("ELSE",!0),Vg=r(",",!1),Xg=r("(",!1),Zg=r(")",!1),ah=H([" ","\t","\n",
"\r"],!1,!1),wd=r("`",!1),yd=H(["`"],!0,!1),q=0,ma=0,Zb=[{line:1,column:1}],eb=0,zc=[],fa=0;if("startRule"in u){if(!(u.startRule in Ld))throw Error("Can't start parsing from rule \""+u.startRule+'".');Md=Ld[u.startRule]}var Rc=Md();if(Rc!==e&&q===d.length)return Rc;Rc!==e&&q<d.length&&b({type:"end"});throw function(K,T,V){return new f(f.buildMessage(K,T),K,T,V)}(zc,eb<d.length?d.charAt(eb):null,eb<d.length?h(eb,eb+1):h(eb,eb));}}})})(y);var t=y.exports;class C{static parse(z){return t.parse(z)}}a.WhereGrammar=
C;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(a,c){c=new c.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",
esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});a.kebabDict=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/projectionSupport":function(){define("exports ../../../core/arrayUtils ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/geometryAdapters/json ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(a,c,y,t,C,z,f){function w(b,k){if(!k)return null;if("x"in k){var x={x:0,y:0};[x.x,x.y]=b(k.x,k.y,A);null!=k.z&&(x.z=k.z);null!=k.m&&(x.m=k.m);return x}return"xmin"in k?(x={xmin:0,ymin:0,xmax:0,ymax:0},[x.xmin,x.ymin]=b(k.xmin,k.ymin,A),[x.xmax,x.ymax]=b(k.xmax,k.ymax,A),k.hasZ&&(x.zmin=k.zmin,x.zmax=k.zmax,x.hasZ=!0),k.hasM&&(x.mmin=k.mmin,x.mmax=k.mmax,x.hasM=!0),x):"rings"in k?{rings:d(k.rings,b),hasM:k.hasM,hasZ:k.hasZ}:"paths"in k?{paths:d(k.paths,b),hasM:k.hasM,hasZ:k.hasZ}:"points"in
k?{points:u(k.points,b),hasM:k.hasM,hasZ:k.hasZ}:null}function d(b,k){const x=[];for(const F of b)x.push(u(F,k));return x}function u(b,k){const x=[];for(const F of b)b=k(F[0],F[1],[0,0]),x.push(b),2<F.length&&b.push(F[2]),3<F.length&&b.push(F[3]);return x}const A=[0,0],r=w.bind(null,f.lngLatToXY),H=w.bind(null,f.xyToLngLat);class p{constructor(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}async push(b,k,x,F){if(!b?.length||!k||!x||z.equals(k,x))return b;b={geometries:b,inSpatialReference:k,
outSpatialReference:x,geographicTransformation:F,resolve:y.createResolver()};this._jobs.push(b);this._timer??(this._timer=setTimeout(this._process,10));return b.resolve.promise}_process(){this._timer=null;const b=this._jobs.shift();if(b){var {geometries:k,inSpatialReference:x,outSpatialReference:F,resolve:M,geographicTransformation:g}=b;f.canProject(x,F)?z.isWebMercator(F)?M(k.map(r)):M(k.map(H)):M(t.projectMany(C.jsonAdapter,k,x,F,g,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}}}const h=new p;a.checkProjectionSupport=async function(b,k){b&&k&&(b=Array.isArray(b)?b.map(x=>null!=x.geometry?x.geometry.spatialReference:null).filter(c.isSome):[b],await t.initializeProjection(b.map(x=>({source:x,dest:k}))))};a.project=function(b,k,x,F){if(!b)return b;x||(x=k,k=b.spatialReference);return z.isValid(k)&&z.isValid(x)&&!z.equals(k,x)?f.canProject(k,x)?(b=z.isWebMercator(x)?r(b):H(b),b.spatialReference=x,b):t.projectMany(C.jsonAdapter,[b],k,x,null,F)[0]:b};a.projectMany=function(b,
k,x,F){return h.push(b,k,x,F)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(a){class c{constructor(f,w,d){this.x=f;this.y=w;this.spatialReference=d;this.m=this.z=void 0}}class y{constructor(f,w,d,u){this.rings=f;this.spatialReference=w;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);u&&(this.hasM=u)}}class t{constructor(f,w,d,u){this.paths=f;this.spatialReference=w;this.hasM=this.hasZ=void 0;d&&(this.hasZ=
d);u&&(this.hasM=u)}}class C{constructor(f,w,d,u){this.points=f;this.spatialReference=w;this.hasM=this.hasZ=void 0;d&&(this.hasZ=d);u&&(this.hasM=u)}}class z{constructor(f,w,d,u,A){this.xmin=f;this.ymin=w;this.xmax=d;this.ymax=u;this.spatialReference=A;this.mmax=this.mmin=this.zmax=this.zmin=void 0}}a.jsonAdapter={convertToGEGeometry:function(f,w){return null==w?null:f.convertJSONToGeometry(w)},exportPoint:function(f,w,d){d=new c(f.getPointX(w),f.getPointY(w),d);const u=f.hasZ(w),A=f.hasM(w);u&&(d.z=
f.getPointZ(w));A&&(d.m=f.getPointM(w));return d},exportPolygon:function(f,w,d){return new y(f.exportPaths(w),d,f.hasZ(w),f.hasM(w))},exportPolyline:function(f,w,d){return new t(f.exportPaths(w),d,f.hasZ(w),f.hasM(w))},exportMultipoint:function(f,w,d){return new C(f.exportPoints(w),d,f.hasZ(w),f.hasM(w))},exportExtent:function(f,w,d){var u=f.hasZ(w);const A=f.hasM(w);d=new z(f.getXMin(w),f.getYMin(w),f.getXMax(w),f.getYMax(w),d);u&&(u=f.getZExtent(w),d.zmin=u.vmin,d.zmax=u.vmax);A&&(f=f.getMExtent(w),
d.mmin=f.vmin,d.mmax=f.vmax);return d}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(a){a.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,
maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports ../../../core/lang ../../../geometry/support/centroid ../../../geometry/support/extentUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ./AttributesBuilder ./geometryUtils ./projectionSupport ./SnappingCandidate ../../support/fieldUtils ../../../statistics/utils".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H){function p(x,F,M,g){const J=g.x-M.x;g=g.y-M.y;F=Math.min(1,Math.max(0,((F.x-M.x)*J+(F.y-M.y)*g)/(J*J+g*g)));x.x=M.x+J*F;x.y=M.y+g*F}function h(x,F){return x?F?4:3:F?3:2}class b{constructor(x,F,M){this.items=x;this.query=F;this.geometryType=M.geometryType;this.hasM=M.hasM;this.hasZ=M.hasZ;this.fieldsIndex=M.fieldsIndex;this.objectIdField=M.objectIdField;this.spatialReference=M.spatialReference;this.featureAdapter=M.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const x=
new w(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return x.countDistinctValues(this.items);const {groupByFieldsForStatistics:F,having:M,outStatistics:g}=this.query;if(!F?.length)return 1;const J=new Map,R=new Map,m=new Set;for(const N of g){var {statisticType:v}=N;v="exceedslimit"!==v?N.onStatisticField:void 0;if(!R.has(v)){var E=[];for(const l of F){const B=this._getAttributeValues(x,l,J);E.push(B)}R.set(v,this._calculateUniqueValues(E,x.returnDistinctValues))}v=
R.get(v);for(const l in v){const {data:B,items:D}=v[l];E=B.join(",");M&&!x.validateItems(D,M)||m.add(E)}}return m.size}async createQueryResponse(){let x;x=this.query.outStatistics?this.query.outStatistics.some(F=>"exceedslimit"===F.statisticType)?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const F=this.query.geometry;f.isValid(this.query.outSR)&&!f.equals(F.spatialReference,
this.query.outSR)?x.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...u.project(F,F.spatialReference,this.query.outSR)}):x.queryGeometry=d.cleanFromGeometryEngine({spatialReference:this.query.outSR,...F})}return x}createSnappingResponse(x,F){const M=this.featureAdapter,g=h(this.hasZ,this.hasM),{point:J,mode:R}=x,m="number"===typeof x.distance?x.distance:x.distance.x,v="number"===typeof x.distance?x.distance:x.distance.y,E={candidates:[]},N="esriGeometryPolygon"===this.geometryType;
F=this._getPointCreator(R,this.spatialReference,F);const l=new k(null,0),B=new k(null,0),D={x:0,y:0,z:0};for(const la of this.items){var G=M.getGeometry(la);if(null==G)continue;const {coords:na,lengths:sa}=G;l.coords=na;B.coords=na;if(x.returnEdge){G=0;for(var S=0;S<sa.length;S++){var P=sa[S];for(var U=0;U<P;U++,G+=g){var Y=l;Y.coordsIndex=G;if(U!==P-1){const ua=B;ua.coordsIndex=G+g;const ta=D;p(D,J,Y,ua);var ea=(J.x-ta.x)/m;const wa=(J.y-ta.y)/v;ea=ea*ea+wa*wa;1>=ea&&E.candidates.push(A.makeEdgeCandidate(M.getObjectId(la),
F(ta),Math.sqrt(ea),F(Y),F(ua)))}}}}if("none"!==x.vertexMode)if(G=N?na.length-g:na.length,"all"===x.vertexMode)for(S=0;S<G;S+=g)P=l,P.coordsIndex=S,U=(J.x-P.x)/m,Y=(J.y-P.y)/v,U=U*U+Y*Y,1>=U&&E.candidates.push(A.makeVertexCandidate(M.getObjectId(la),F(P),Math.sqrt(U)));else if("ends"===x.vertexMode){G=[0];N||G.push(na.length-g);for(const ua of G)G=l,G.coordsIndex=ua,S=(J.x-G.x)/m,P=(J.y-G.y)/v,S=S*S+P*P,1>=S&&E.candidates.push(A.makeVertexCandidate(M.getObjectId(la),F(G),Math.sqrt(S)))}}E.candidates.sort((la,
na)=>la.distance-na.distance);return E}_getPointCreator(x,F,M){const g=null==M||f.equals(F,M)?R=>R:R=>u.project(R,F,M),{hasZ:J}=this;return"3d"===x?J?({x:R,y:m,z:v})=>g({x:R,y:m,z:v}):({x:R,y:m})=>g({x:R,y:m,z:0}):({x:R,y:m})=>g({x:R,y:m})}async createSummaryStatisticsResponse(x){const {field:F,valueExpression:M,normalizationField:g,normalizationType:J,normalizationTotal:R,minValue:m,maxValue:v,scale:E,timeZone:N}=x;var l=this.fieldsIndex.get(F);x=r.isDateField(l)||r.isDateOnlyField(l)||r.isTimestampOffsetField(l);
const B=await this._getDataValues({field:F,valueExpression:M,normalizationField:g,normalizationType:J,normalizationTotal:R,scale:E,timeZone:N}),D=H.isNullCountSupported({normalizationType:J,normalizationField:g,minValue:m,maxValue:v}),G={value:.5,fieldType:l?.type};l=r.isStringField(l)?H.calculateStringStatistics({values:B,supportsNullCount:D,percentileParams:G}):H.calculateStatistics({values:B,minValue:m,maxValue:v,useSampleStdDev:!J,supportsNullCount:D,percentileParams:G});return H.processSummaryStatisticsResult(l,
x)}async createUniqueValuesResponse(x){const {field:F,valueExpression:M,domains:g,returnAllCodedValues:J,scale:R,timeZone:m}=x;var v=await this._getDataValues({field:F,field2:x.field2,field3:x.field3,fieldDelimiter:x.fieldDelimiter,valueExpression:M,scale:R,timeZone:m},!1);v=H.calculateUniqueValuesCount(v);return H.createUVResult(v,g,J,x.fieldDelimiter)}async createClassBreaksResponse(x){const {field:F,valueExpression:M,normalizationField:g,normalizationType:J,normalizationTotal:R,classificationMethod:m,
standardDeviationInterval:v,minValue:E,maxValue:N,numClasses:l,scale:B,timeZone:D}=x;x=await this._getDataValues({field:F,valueExpression:M,normalizationField:g,normalizationType:J,normalizationTotal:R,scale:B,timeZone:D});x=H.calculateClassBreaks(x,{field:F,normalizationField:g,normalizationType:J,normalizationTotal:R,classificationMethod:m,standardDeviationInterval:v,minValue:E,maxValue:N,numClasses:l});return H.resolveCBResult(x,m)}async createHistogramResponse(x){const {field:F,valueExpression:M,
normalizationField:g,normalizationType:J,normalizationTotal:R,classificationMethod:m,standardDeviationInterval:v,minValue:E,maxValue:N,numBins:l,scale:B,timeZone:D}=x;x=await this._getDataValues({field:F,valueExpression:M,normalizationField:g,normalizationType:J,normalizationTotal:R,scale:B,timeZone:D});return H.calculateHistogram(x,{field:F,normalizationField:g,normalizationType:J,normalizationTotal:R,classificationMethod:m,standardDeviationInterval:v,minValue:E,maxValue:N,numBins:l})}_sortFeatures(x,
F,M){if(1<x.length&&F?.length)for(const g of F.reverse()){F=g.split(" ");const J=F[0],R=this.fieldsIndex.get(J);F=F[1]?"desc"===F[1].toLowerCase():!1;const m=H.getAttributeComparator(R?.type,F);x.sort((v,E)=>{v=M(v,J,R);E=M(E,J,R);return m(v,E)})}}_createFeatureQueryResponse(x){const F=this.items,{geometryType:M,hasM:g,hasZ:J,objectIdField:R,spatialReference:m}=this,{outFields:v,outSR:E,quantizationParameters:N,resultRecordCount:l,resultOffset:B,returnZ:D,returnM:G}=x,S=null!=l?F.length>(B||0)+l:
!1,P=v&&(v.includes("*")?[...this.fieldsIndex.fields]:v.map(U=>this.fieldsIndex.get(U)));return{exceededTransferLimit:S,features:this._createFeatures(x,F),fields:P,geometryType:M,hasM:g&&G,hasZ:J&&D,objectIdFieldName:R,spatialReference:d.cleanFromGeometryEngine(E||m),transform:N&&z.toQuantizationTransform(N)||null}}_createFeatures(x,F){const M=new w(x,this.featureAdapter,this.fieldsIndex),{hasM:g,hasZ:J}=this,{orderByFields:R,quantizationParameters:m,returnGeometry:v,returnCentroid:E,maxAllowableOffset:N,
resultOffset:l,resultRecordCount:B,returnZ:D=!1,returnM:G=!1}=x,S=J&&D,P=g&&G;x=[];var U=0;const Y=[...F];this._sortFeatures(Y,R,(ua,ta,wa)=>M.getFieldValue(ua,ta,wa));if(this.geometryType&&(v||E)){var ea=z.toQuantizationTransform(m)??void 0;F="esriGeometryPolygon"===this.geometryType||"esriGeometryPolyline"===this.geometryType;if(v&&!E)for(var la of Y){var na=this.featureAdapter.getGeometry(la),sa={attributes:M.getAttributes(la),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,na,N,ea,
S,P)};F&&na&&!sa.geometry&&(sa.centroid=d.transformCentroid(this,this.featureAdapter.getCentroid(la,this),ea));x[U++]=sa}else if(!v&&E)for(na of Y)x[U++]={attributes:M.getAttributes(na),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(na,this),ea)};else for(sa of Y)x[U++]={attributes:M.getAttributes(sa),centroid:d.transformCentroid(this,this.featureAdapter.getCentroid(sa,this),ea),geometry:d.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(sa),N,ea,
S,P)}}else for(ea of Y)(la=M.getAttributes(ea))&&(x[U++]={attributes:la});U=l||0;null!=B&&(x=x.slice(U,Math.min(x.length,U+B)));return x}_createExceedsLimitQueryResponse(x){var F=!1;let M=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY;F=Number.POSITIVE_INFINITY;for(const J of x.outStatistics??[])if("exceedslimit"===J.statisticType){M=null!=J.maxPointCount?J.maxPointCount:Number.POSITIVE_INFINITY;g=null!=J.maxRecordCount?J.maxRecordCount:Number.POSITIVE_INFINITY;F=null!=J.maxVertexCount?J.maxVertexCount:
Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)F=this.items.length>M;else if(this.items.length>g)F=!0;else{x=h(this.hasZ,this.hasM);const J=this.featureAdapter;F=this.items.reduce((R,m)=>{m=J.getGeometry(m);return R+(null!=m&&m.coords.length||0)},0)/x>F}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(F)}}]}}async _createStatisticsQueryResponse(x){var F=
{attributes:{}};const M=[],g=new Map,J=new Map,R=new Map,m=new Map,v=new w(x,this.featureAdapter,this.fieldsIndex);var E=x.outStatistics;const {groupByFieldsForStatistics:N,having:l,orderByFields:B,resultRecordCount:D}=x;x=N?.length;const G=!!x,S=G?N[0]:null,P=G&&!this.fieldsIndex.get(S);for(const na of E??[]){const {outStatisticFieldName:sa,statisticType:ua}=na;E=na;const ta="exceedslimit"!==ua?na.onStatisticField:void 0,wa="percentile_disc"===ua||"percentile_cont"===ua;var U="EnvelopeAggregate"===
ua||"CentroidAggregate"===ua||"ConvexHullAggregate"===ua;const xa=G&&1===x&&(ta===S||P)&&"count"===ua;if(G){if(!R.has(ta)){var Y=[];for(const Da of N){var ea=this._getAttributeValues(v,Da,g);Y.push(ea)}R.set(ta,this._calculateUniqueValues(Y,U?!1:v.returnDistinctValues))}Y=R.get(ta);if(!Y)continue;ea=Object.keys(Y);for(const Da of ea){const {count:Ia,data:Ra,items:Na,itemPositions:Sa}=Y[Da];ea=Ra.join(",");if(!l||v.validateItems(Na,l)){const Va=m.get(ea)||{attributes:{}};if(U){Va.aggregateGeometries||
(Va.aggregateGeometries={});const {aggregateGeometries:L,outStatisticFieldName:X}=await this._getAggregateGeometry(E,Na);Va.aggregateGeometries[X]=L}else{var la=null;if(xa)la=Ia;else{const L=this._getAttributeValues(v,ta,g);la=Sa.map(X=>L[X]);la=wa&&"statisticParameters"in E?this._getPercentileValue(E,la):this._getStatisticValue(E,la,null,v.returnDistinctValues)}Va.attributes[sa]=la}let n=0;N.forEach((L,X)=>Va.attributes[this.fieldsIndex.get(L)?L:`EXPR_${++n}`]=Ra[X]);m.set(ea,Va)}}}else if(U){F.aggregateGeometries||
(F.aggregateGeometries={});const {aggregateGeometries:Da,outStatisticFieldName:Ia}=await this._getAggregateGeometry(E,this.items);F.aggregateGeometries[Ia]=Da}else U=this._getAttributeValues(v,ta,g),F.attributes[sa]=wa&&"statisticParameters"in E?this._getPercentileValue(E,U):this._getStatisticValue(E,U,J,v.returnDistinctValues);E="min"!==ua&&"max"!==ua||!r.isStringField(this.fieldsIndex.get(ta))&&!this._isAnyDateField(ta)?null:this.fieldsIndex.get(ta)?.type;M.push({name:sa,alias:sa,type:E||"esriFieldTypeDouble"})}F=
G?Array.from(m.values()):[F];this._sortFeatures(F,B,(na,sa)=>na.attributes[sa]);D&&(F.length=Math.min(D,F.length));return{fields:M,features:F}}_isAnyDateField(x){x=this.fieldsIndex.get(x);return r.isDateField(x)||r.isDateOnlyField(x)||r.isTimestampOffsetField(x)||r.isTimeOnlyField(x)}async _getAggregateGeometry(x,F){const {convexHull:M,union:g}=await new Promise((D,G)=>a(["../../../geometry/geometryEngineJSON"],D,G)),{statisticType:J,outStatisticFieldName:R}=x,{featureAdapter:m,spatialReference:v,
geometryType:E,hasZ:N,hasM:l}=this;F=F.map(D=>d.getGeometry(E,N,l,m.getGeometry(D)));const B=M(v,F,!0)[0];x={aggregateGeometries:null,outStatisticFieldName:null};"EnvelopeAggregate"===J?(F=B?C.getPolygonExtent(B):C.getGeometryExtent(g(v,F)),x.aggregateGeometries={...F,spatialReference:v},x.outStatisticFieldName=R||"extent"):"CentroidAggregate"===J?(F=B?t.polygonCentroid(B):t.extentCentroid(C.getGeometryExtent(g(v,F))),x.aggregateGeometries={x:F[0],y:F[1],spatialReference:v},x.outStatisticFieldName=
R||"centroid"):"ConvexHullAggregate"===J&&(x.aggregateGeometries=B,x.outStatisticFieldName=R||"convexHull");return x}_getStatisticValue(x,F,M,g){const {onStatisticField:J,statisticType:R}=x;x=null;x=M?.has(J)?M.get(J):r.isStringField(this.fieldsIndex.get(J))||this._isAnyDateField(J)?H.calculateStringStatistics({values:F,returnDistinct:g}):H.calculateStatistics({values:g?[...(new Set(F))]:F,minValue:null,maxValue:null,useSampleStdDev:!0});M&&M.set(J,x);return x["var"===R?"variance":R]}_getPercentileValue(x,
F){const {onStatisticField:M,statisticParameters:g,statisticType:J}=x,{value:R,orderBy:m}=g;x=this.fieldsIndex.get(M);return H.calculatePercentile(F,{value:R,orderBy:m,fieldType:x?.type,isDiscrete:"percentile_disc"===J})}_getAttributeValues(x,F,M){if(M.has(F))return M.get(F);const g=this.fieldsIndex.get(F),J=this.items.map(R=>x.getFieldValue(R,F,g));M.set(F,J);return J}_calculateUniqueValues(x,F){const M={},g=this.items,J=g.length;for(let R=0;R<J;R++){const m=g[R],v=[];for(const N of x)v.push(N[R]);
const E=v.join(",");null==M[E]?M[E]={count:1,data:v,items:[m],itemPositions:[R]}:(F||M[E].count++,M[E].items.push(m),M[E].itemPositions.push(R))}return M}async _getDataValues(x,F=!0){const M=new w(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:g,scale:J,timeZone:R}=x;return g?M.getExpressionValues(this.items,g,{viewingMode:"map",scale:J,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},R):M.getDataValues(this.items,
y.clone(x),F)}}class k{constructor(x,F){this.coords=x;this.coordsIndex=F}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}c.QueryEngineResult=b;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(a,c){function y({scale:E,translate:N},l){return Math.round((l-N[0])/E[0])}function t({scale:E,translate:N},
l){return Math.round((N[1]-l)/E[1])}function C(E,N,l){const B=[];let D,G,S,P;for(let U=0;U<l.length;U++){const Y=l[U];if(0<U){if(S=y(E,Y[0]),P=t(E,Y[1]),S!==D||P!==G)B.push(N(Y,S-D,P-G)),D=S,G=P}else D=y(E,Y[0]),G=t(E,Y[1]),B.push(N(Y,D,G))}return 0<B.length?B:null}function z(E,N,l,B){return C(E,l?B?v:m:B?m:R,N)}function f(E,N,l,B){const D=[];l=l?B?v:m:B?m:R;for(B=0;B<N.length;B++){const G=C(E,l,N[B]);G&&3<=G.length&&D.push(G)}return D.length?D:null}function w(E,N,l,B){const D=[];l=l?B?v:m:B?m:R;
for(B=0;B<N.length;B++){const G=C(E,l,N[B]);G&&2<=G.length&&D.push(G)}return D.length?D:null}function d({scale:E,translate:N},l){return l*E[0]+N[0]}function u({scale:E,translate:N},l){return N[1]-l*E[1]}function A(E,N,l){const B=Array(l.length);if(!l.length)return B;const [D,G]=E.scale;let S=d(E,l[0][0]);E=u(E,l[0][1]);B[0]=N(l[0],S,E);for(let P=1;P<l.length;P++){const U=l[P];S+=U[0]*D;E-=U[1]*G;B[P]=N(U,S,E)}return B}function r(E,N,l){const B=Array(l.length);for(let D=0;D<l.length;D++)B[D]=A(E,N,
l[D]);return B}function H(E,N,l,B){return A(E,l?B?v:m:B?m:R,N)}function p(E,N,l,B){return r(E,l?B?v:m:B?m:R,N)}function h(E,N,l,B){return r(E,l?B?v:m:B?m:R,N)}function b(E,N,l){let [B,D]=l[0],G=Math.min(B,N[0]),S=Math.min(D,N[1]),P=Math.max(B,N[2]);N=Math.max(D,N[3]);for(let U=1;U<l.length;U++){const [Y,ea]=l[U];B+=Y;D+=ea;0>Y&&(G=Math.min(G,B));0<Y&&(P=Math.max(P,B));0>ea?S=Math.min(S,D):0<ea&&(N=Math.max(N,D))}E[0]=G;E[1]=S;E[2]=P;E[3]=N;return E}function k(E,N){if(!N.length)return null;E[0]=E[1]=
Number.POSITIVE_INFINITY;E[2]=E[3]=Number.NEGATIVE_INFINITY;for(let l=0;l<N.length;l++)b(E,E,N[l]);return E}function x(E,N,l,B,D){N.xmin=y(E,l.xmin);N.ymin=t(E,l.ymin);N.xmax=y(E,l.xmax);N.ymax=t(E,l.ymax);N!==l&&(B&&(N.zmin=l.zmin,N.zmax=l.zmax),D&&(N.mmin=l.mmin,N.mmax=l.mmax));return N}function F(E,N,l,B,D){N.points=z(E,l.points,B,D)??[];return N}function M(E,N,l,B,D){N.x=y(E,l.x);N.y=t(E,l.y);N!==l&&(B&&(N.z=l.z),D&&(N.m=l.m));return N}function g(E,N,l,B,D){E=f(E,l.rings,B,D);if(!E)return null;
N.rings=E;return N}function J(E,N,l,B,D){E=w(E,l.paths,B,D);if(!E)return null;N.paths=E;return N}const R=(E,N,l)=>[N,l],m=(E,N,l)=>[N,l,E[2]],v=(E,N,l)=>[N,l,E[2],E[3]];a.equals=function(E,N){if(E===N||null==E&&null==N)return!0;if(null==E||null==N)return!1;let l,B,D,G;E&&"upperLeft"===E.originPosition?(l=E.translate[0],B=E.translate[1],E=E.scale[0]):(l=null!=E.extent?E.extent.xmin:0,B=null!=E.extent?E.extent.ymax:0,E=E.tolerance);N&&"upperLeft"===N.originPosition?(D=N.translate[0],G=N.translate[1],
N=N.scale[0]):(D=null!=N.extent?N.extent.xmin:0,G=null!=N.extent?N.extent.ymax:0,N=N.tolerance);return l===D&&B===G&&E===N};a.getQuantizedBoundsCoordsArray=b;a.getQuantizedBoundsCoordsArrayArray=k;a.getQuantizedBoundsPaths=function(E){return k([0,0,0,0],E)};a.getQuantizedBoundsPoints=function(E){const N=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return b(N,N,E)};a.getQuantizedBoundsRings=function(E){return k([0,0,0,0],E)};a.quantizeBounds=
function(E,N,l){N[0]=y(E,l[0]);N[3]=t(E,l[1]);N[2]=y(E,l[2]);N[1]=t(E,l[3]);return N};a.quantizeExtent=x;a.quantizeGeometry=function(E,N){return E&&N?c.isPoint(N)?M(E,{},N,!1,!1):c.isPolyline(N)?J(E,{},N,!1,!1):c.isPolygon(N)?g(E,{},N,!1,!1):c.isMultipoint(N)?F(E,{},N,!1,!1):c.isExtent(N)?x(E,{},N,!1,!1):null:null};a.quantizeMultipoint=F;a.quantizePaths=w;a.quantizePoint=M;a.quantizePoints=z;a.quantizePolygon=g;a.quantizePolyline=J;a.quantizeRings=f;a.quantizeX=y;a.quantizeY=t;a.toQuantizationTransform=
function(E){return E?{originPosition:"upper-left"===E.originPosition?"upperLeft":"lower-left"===E.originPosition?"lowerLeft":E.originPosition,scale:E.tolerance?[E.tolerance,E.tolerance]:[1,1],translate:null!=E.extent?[E.extent.xmin,E.extent.ymax]:[0,0]}:null};a.unquantizeBounds=function(E,N,l){return l?(N[0]=d(E,l[0]),N[1]=u(E,l[3]),N[2]=d(E,l[2]),N[3]=u(E,l[1]),N):[d(E,N[0]),u(E,N[3]),d(E,N[2]),u(E,N[1])]};a.unquantizeCoordsArray=A;a.unquantizeCoordsArrayArray=r;a.unquantizeExtent=function(E,N,l,
B,D){N.xmin=d(E,l.xmin);N.ymin=u(E,l.ymin);N.xmax=d(E,l.xmax);N.ymax=u(E,l.ymax);N!==l&&(B&&(N.zmin=l.zmin,N.zmax=l.zmax),D&&(N.mmin=l.mmin,N.mmax=l.mmax));return N};a.unquantizeMultipoint=function(E,N,l,B,D){null!=l&&(N.points=H(E,l.points,B,D));return N};a.unquantizePaths=p;a.unquantizePoint=function(E,N,l,B,D){if(null==l)return N;N.x=d(E,l.x);N.y=u(E,l.y);N!==l&&(B&&(N.z=l.z),D&&(N.m=l.m));return N};a.unquantizePoints=H;a.unquantizePolygon=function(E,N,l,B,D){null!=l&&(N.rings=h(E,l.rings,B,D));
return N};a.unquantizePolyline=function(E,N,l,B,D){null!=l&&(N.paths=p(E,l.paths,B,D));return N};a.unquantizeRings=h;a.unquantizeX=d;a.unquantizeY=u;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/AttributesBuilder":function(){define("./attributeSupport ./geometryUtils ../../support/fieldUtils ../../../smartMapping/statistics/support/utils ../../../statistics/utils ../../../support/arcadeOnDemand".split(" "),function(a,c,y,t,C,z){class f{constructor(w,d,
u){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=w.returnDistinctValues??!1;this.fieldsIndex=u;this.featureAdapter=d;if((d=w.outFields)&&!d.includes("*")){this.outFields=d;w=0;for(const r of d){var A=a.getExpressionFromFieldName(r);A=(d=this.fieldsIndex.get(A))?null:a.getWhereClause(A,u);d=d?d.name:a.getAliasFromFieldName(r)||`FIELD_EXP_${w++}`;this._fieldDataCache.set(r,{alias:d,clause:A})}}}countDistinctValues(w){if(!this.returnDistinctValues)return w.length;
w.forEach(d=>this.getAttributes(d));return this._returnDistinctMap.size}getAttributes(w){w=this._processAttributesForOutFields(w);return this._processAttributesForDistinctValues(w)}getFieldValue(w,d,u){const A=u?u.name:d;let r=null;this._fieldDataCache.has(A)?r=this._fieldDataCache.get(A)?.clause:u||(r=a.getWhereClause(d,this.fieldsIndex),this._fieldDataCache.set(A,{alias:A,clause:r}));return u?this.featureAdapter.getAttribute(w,A):r?.calculateValue(w,this.featureAdapter)}getDataValues(w,d,u=!0){const A=
d.normalizationType,r=d.normalizationTotal,H=this.fieldsIndex.get(d.field),p=y.isDateOnlyField(H)||y.isTimestampOffsetField(H),h=y.isTimeOnlyField(H);return w.map(b=>{let k=d.field&&this.getFieldValue(b,d.field,this.fieldsIndex.get(d.field));d.field2?(k=`${C.processNullValue(k)}${d.fieldDelimiter}${C.processNullValue(this.getFieldValue(b,d.field2,this.fieldsIndex.get(d.field2)))}`,d.field3&&(k=`${k}${d.fieldDelimiter}${C.processNullValue(this.getFieldValue(b,d.field3,this.fieldsIndex.get(d.field3)))}`)):
"string"===typeof k&&u&&(p?k=k?(new Date(k)).getTime():null:h&&(k=k?t.timeOnlyToMilliseconds(k):null));A&&Number.isFinite(k)&&(b="field"===A&&d.normalizationField?this.getFieldValue(b,d.normalizationField,this.fieldsIndex.get(d.normalizationField)):null,k=C.getNormalizedValue(k,A,b,r));return k})}async getExpressionValues(w,d,u,A,r){const {arcadeUtils:H}=await z.loadArcade(),p=H.hasGeometryOperations(d);p&&await H.enableGeometryOperations();const h=H.createFunction(d),b=H.getViewInfo(u),k={fields:this.fieldsIndex.fields};
return w.map(x=>{x={attributes:this.featureAdapter.getAttributes(x),layer:k,geometry:p?{...c.getGeometry(A.geometryType,A.hasZ,A.hasM,this.featureAdapter.getGeometry(x)),spatialReference:u?.spatialReference}:null};x=H.createExecContext(x,b,r);return H.executeFunction(h,x)})}validateItem(w,d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:a.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testFeature(w,this.featureAdapter)??!1}validateItems(w,
d){this._fieldDataCache.has(d)||this._fieldDataCache.set(d,{alias:d,clause:a.getWhereClause(d,this.fieldsIndex)});return this._fieldDataCache.get(d)?.clause?.testSet(w,this.featureAdapter)??!1}_processAttributesForOutFields(w){const d=this.outFields;if(!d?.length)return this.featureAdapter.getAttributes(w);const u={};for(const A of d){const {alias:r,clause:H}=this._fieldDataCache.get(A);u[r]=H?H.calculateValue(w,this.featureAdapter):this.featureAdapter.getAttribute(w,r)}return u}_processAttributesForDistinctValues(w){if(null==
w||!this.returnDistinctValues)return w;var d=this.outFields,u=[];if(d)for(const r of d){var {alias:A}=this._fieldDataCache.get(r);u.push(w[A])}else for(A in w)u.push(w[A]);d=`${(d||["*"]).join(",")}=${u.join(",")}`;u=this._returnDistinctMap.get(d)||0;this._returnDistinctMap.set(d,++u);return 1<u?null:w}}return f})},"esri/smartMapping/statistics/support/utils":function(){define("exports ../../../geometry ../../../core/Error ../../../core/screenUtils ../../../core/timeUtils ../../../geometry/SpatialReference ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/support/fieldUtils ../../../renderers/support/heatmapUtils ../../support/utils ../../../statistics/utils ../../../support/arcadeOnDemand ../../../geometry/Point".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p){function h(g){g=M.exec(g);if(!g)return null;const {hh:J,mm:R,ss:m,ms:v}=g.groups;return Number(J)*C.millisecondsPerTimeUnit.hours+Number(R)*C.millisecondsPerTimeUnit.minutes+Number(m)*C.millisecondsPerTimeUnit.seconds+Number(v||0)}function b(g,J){g=null!=g?g:"";null!=J&&J&&(g=g?"("+g+") AND ("+J+")":J);return g}function k(g){const J=g.layer;return g.fields.filter(R=>!J.getField(R))}function x(g){const J=g.layer;return g.fields.filter(R=>{R=J.getFieldUsageInfo(R);
return!R||!R.supportsStatistics})}let F=null;const M=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;a.calculateHeatmapStats=function(g,J=18,R,m,v){const E=new Float64Array(m*v);J=Math.round(t.pt2px(J));let N=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;R=u.createValueFunction(R);for(const {geometry:G,attributes:S}of g){const {x:P,y:U}=G;g=Math.max(0,P-J);var B=Math.max(0,U-J);const Y=Math.min(v,U+J),ea=Math.min(m,P+J),la=+R(S);for(;B<Y;B++)for(let na=
g;na<ea;na++){var D=B*m+na;const sa=u.evaluateDensityKernel(na-P,B-U,J)*la;D=E[D]+=sa;N=Math.min(N,D);l=Math.max(l,D)}}return{min:N,max:l}};a.getDataValues=async function(g,J,R=!0){if(!J)return[];const {field:m,field2:v,field3:E,fieldDelimiter:N,fieldInfos:l,timeZone:B}=g;var D=m&&l?.find(ta=>ta.name.toLowerCase()===m.toLowerCase());const G=D?d.isTimeOnlyField(D):!1,S=D?A.isAnyDateField(D):!1,P=g.valueExpression,U=g.normalizationType,Y=g.normalizationField,ea=g.normalizationTotal,la=[];D=g.viewInfoParams;
let na=null,sa=null;if(P){if(!F){const {arcadeUtils:ta}=await H.loadArcade();F=ta}F.hasGeometryOperations(P)&&await F.enableGeometryOperations();na=F.createFunction(P);sa=D?F.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:new z(D.spatialReference)}):null}g=g.fieldInfos;const ua=J[0]&&"declaredClass"in J[0]&&"esri.Graphic"===J[0].declaredClass||!g?null:{fields:g};J.forEach(ta=>{var wa=ta.attributes;if(P){var xa=F.createExecContext(ua?{...ta,layer:ua}:ta,sa,B);xa=F.executeFunction(na,
xa)}else wa&&(xa=wa[m],v?(xa=`${r.processNullValue(xa)}${N}${r.processNullValue(wa[v])}`,E&&(xa=`${xa}${N}${r.processNullValue(wa[E])}`)):"string"===typeof xa&&R&&(S?xa=xa?(new Date(xa)).getTime():null:G&&(xa=xa?h(xa):null)));U&&"number"===typeof xa&&isFinite(xa)&&(wa=wa&&parseFloat(wa[Y]),xa=r.getNormalizedValue(xa,U,wa,ea));la.push(xa)});return la};a.getRangeExpr=function(g,J,R){J=null!=J?g+" \x3e\x3d "+J:"";g=null!=R?g+" \x3c\x3d "+R:"";R="";return(R=J&&g?b(J,g):J||g)?"("+R+")":""};a.getSQLFilterForNormalization=
function(g){const J=g.field,R=g.normalizationType;g=g.normalizationField;let m;if("field"===R)m="(NOT "+g+" \x3d 0)";else if("log"===R||"natural-log"===R||"square-root"===R)m=`(${J} > 0)`;return m};a.getSumOfAttributesExpr=function(g,J,R){const m=[],v=[],E=[],N=[],l=[];g.forEach((G,S)=>{const P=G.field?"field":"expression",U=G.field||G.valueExpression;G.field?(l.push(U),v.push(`var ${P}${S} = Number($feature["${U}"]);`)):(m.push(`function getValueForExpr${S}() {\n  ${U} \n}`),v.push(`var ${P}${S} = Number(getValueForExpr${S}());`));
R||E.push(`${P}${S} = IIf(${P}${S} < 0, 0, ${P}${S});`);N.push(`${P}${S}`)});g="return sum;";const B=m.length?null:l.reduce((G,S)=>`${G} + ${S}`);let D=null;J||R?J?R||(g="return IIf(sum \x3e\x3d 0, sum, null);",B&&(D=`(( ${B} ) >= 0)`)):(g="return IIf(sum !\x3d 0, sum, null);",B&&(D=`(( ${B} ) <> 0)`)):(g="return IIf(sum \x3e 0, sum, null);",B&&(D=`(( ${B} ) > 0)`));return{valueExpression:[m.length?m.join("\n"):"",v.join("\n"),E.join("\n"),`var sum = ${N.join(" + ")};`,g].filter(Boolean).join("\n\n"),
sqlExpression:B,sqlWhere:D}};a.mergeWhereClauses=b;a.quantizeFeatures=function(g,J,R,m){const v=w.isWrappable(R)?w.getInfo(R):null,E=v?Math.round((v.valid[1]-v.valid[0])/J.scale[0]):null;return g.map(N=>{const l=new p(N.geometry);f.quantizePoint(J,l,l,l.hasZ,l.hasM);if(v){var B=E??0,D=m[0];0>l.x?l.x+=B:l.x>D&&(l.x-=B)}N.geometry=l;return N})};a.timeOnlyToMilliseconds=h;a.verifyBasicFieldValidity=function(g,J,R){const m=k({layer:g,fields:J});if(m.length)return new y(R,"Unknown fields: "+m.join(", ")+
". You can only use fields defined in the layer schema");g=x({layer:g,fields:J});if(g.length)return new y(R,"Unsupported fields: "+g.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true")};a.verifyFieldType=function(g,J,R,m){let v;J?J.name!==g.objectIdField&&m.includes(J.type)||(v=new y(R,"'field' should be one of these types: "+m.join(","))):v=new y(R,"'field' is not defined in the layer schema");return v};a.verifyFilterValidty=function(g,
J){if(g&&"intersects"!==g.spatialRelationship)return new y(J,"Only 'intersects' spatialRelationship is supported for featureFilter")};a.verifyNumericField=function(g,J,R){let m;J?J.name!==g.objectIdField&&d.isNumericField(J)||(m=new y(R,"'field' should be one of these numeric types: "+d.numericTypes.join(","))):m=new y(R,"'field' is not defined in the layer schema");return m};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/screenUtils":function(){define(["exports"],function(a){function c(t){return t?
72*t/96:0}const y=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.castRenderScreenPointArray=function(t){return t};a.castRenderScreenPointArray3=function(t){return t};a.castScreenPointArray=function(t){return t};a.createRenderScreenPoint=function(t=0,C=0){return{x:t,y:C}};a.createRenderScreenPointArray=function(t=0,C=0){return[t,C]};a.createRenderScreenPointArray3=function(t=0,C=0,z=0){return[t,C,z]};a.createScreenPoint=function(t=0,C=0){return{x:t,y:C}};a.createScreenPointArray=function(t=0,C=0){return[t,
C]};a.pt2px=function(t){return t?t/72*96:0};a.px2pt=c;a.screenPointArrayToObject=function(t,C){return C?(C.x=t[0],C.y=t[1],C):{x:t[0],y:t[1]}};a.screenPointObjectToArray=function(t,C){return C?(C[0]=t.x,C[1]=t.y,2<C.length&&(C[2]=0),C):[t.x,t.y]};a.toPt=function(t){if("string"===typeof t){var C=t.match(y);if(C){var z=Number(C[1]);C=C[3]&&C[3].toLowerCase();t="-"===t.charAt(0);z="px"===C?c(z):z;return t?-z:z}console.warn("screenUtils.toPt: input not recognized!");return null}return t};Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/core/timeUtils":function(){define(["exports","../intl/date","../time/timeZoneUtils","../chunks/datetime"],function(a,c,y,t){function C(w,d,u){return 0===w?0:w*f[d]/f[u]}function z(w){switch(w){case "milliseconds":return"millisecond";case "seconds":return"second";case "minutes":return"minute";case "hours":return"hour";case "days":return"day";case "weeks":return"week";case "months":return"month";case "years":return"year"}}const f={milliseconds:1,seconds:1E3,
minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};a.convertTime=C;a.isValidDate=function(w){return w instanceof Date&&!isNaN(w.getTime())};a.makeUTCTime=function(w,d,u="milliseconds"){d=new Date(C(d,u,"milliseconds"));d.setUTCFullYear(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate());return d};a.mergeTimeExtents=function(w,d){return w&&d?w.intersection(d):w||d};a.millisecondsPerTimeUnit=f;a.offsetDate=function(w,d,u,A=y.system){A=new t.IANAZone(c.resolveTimeZone(A));
w=t.DateTime.fromJSDate(w,{zone:A});A="decades"===u||"centuries"===u?"year":z(u);"decades"===u&&(d*=10);"centuries"===u&&(d*=100);return w.plus({[A]:d}).toJSDate()};a.offsetDateUTC=function(w,d,u="milliseconds"){w=w.getTime();d=C(d,u,"milliseconds");return new Date(w+d)};a.resetUTCDate=function(w,d){w=new Date(w.getTime());w.setUTCFullYear(d.getFullYear(),d.getMonth(),d.getDate());return w};a.timeSinceUTCMidnight=function(w,d="milliseconds"){const u=C(w.getUTCHours(),"hours","milliseconds"),A=C(w.getUTCMinutes(),
"minutes","milliseconds"),r=C(w.getUTCSeconds(),"seconds","milliseconds");w=w.getUTCMilliseconds();return C(u+A+r+w,"milliseconds",d)};a.truncateDate=function(w,d,u=y.system){u=new t.IANAZone(c.resolveTimeZone(u));w=t.DateTime.fromJSDate(w,{zone:u});if("decades"===d||"centuries"===d)return w=w.startOf("year"),{year:u}=w,w.set({year:u-u%("decades"===d?10:100)}).toJSDate();d=z(d);return w.startOf(d).toJSDate()};a.truncateLocalTime=function(w){const d=new Date(0);d.setHours(0);d.setMinutes(0);d.setSeconds(0);
d.setMilliseconds(0);d.setFullYear(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate());return d};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/heatmapUtils":function(){define(["exports","../../core/mathUtils","../../core/screenUtils","../../chunks/vec42","../../core/libs/gl-matrix-2/factories/vec4f64"],function(a,c,y,t,C){function z(f,w,d,u){let {color:A,ratio:r}=w,{color:H,ratio:p}=d;p===r&&(1===p?r-=1E-6:p+=1E-6);w=c.clamp((u-r)/(p-r),0,1);t.lerp(f,A.toArray(),
H.toArray(),w)}a.createValueFunction=function(f){return"function"===typeof f?f:f?w=>+w[f]:()=>1};a.evaluateDensityKernel=function(f,w,d){f=Math.sqrt(f**2+w**2)/d;return 1<f?0:3/(Math.PI*d**2)*(1-f**2)**2};a.gaussianBlurRadiusPxToKernelDensityRadiusPt=function(f){return y.px2pt(2.4*f)};a.generateGradient=function(f){const w=new Uint8ClampedArray(2048);f=f.filter(({ratio:H})=>0<=H&&1>=H).sort((H,p)=>H.ratio-p.ratio).map(({color:H,ratio:p})=>({color:H,ratio:Math.max(p,.001)}));if(1>f.length)return w;
let d=f[0],u=f[0],A=1;const r=C.create();for(let H=0;512>H;H++){const p=(H+.5)/512;for(;p>u.ratio&&A<f.length;)d=u,u=f[A++];z(r,d,u,p);w.set(r,4*H)}return w};a.kernelDensityRadiusPtToGaussianBlurRadiusPx=function(f){return y.pt2px(f)/2.4};a.magicKernelDensityRadiusInflationFactor=2.4;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),
function(a,c,y,t,C,z){function f(p){return String(p).padStart(2,"0")}function w(p,h,b){if("date"===h||"number"===h){"number"===h&&(p=new Date(p));h=b?p.getFullYear():p.getUTCFullYear();const k=f((b?p.getMonth():p.getUTCMonth())+1),x=f(b?p.getDate():p.getUTCDate()),F=f(b?p.getHours():p.getUTCHours()),M=f(b?p.getMinutes():p.getUTCMinutes());p=f(b?p.getSeconds():p.getUTCSeconds());p=`TIMESTAMP'${h}-${k}-${x} ${F}:${M}:${p}'`}return p}function d(p,h){if(h instanceof Date)return"date";if("number"===typeof h)return"number";
if("string"===typeof h&&(p=p.getField(h),"\x3cnow\x3e"!==h.toLowerCase()&&y.isDateField(p)))return"field"}const u={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},A={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},r=new Set(["integer","small-integer"]);let H=null;a.castIntegerFieldToFloat=function(p){return`cast(${p} as float)`};a.dateTypes=
["date","date-only","timestamp-offset"];a.defaultBasemapGroups=u;a.fieldDelimiter=",";a.formatAnyDate=function(p,h){const {format:b,timeZoneOptions:k,fieldType:x}=h??{};let F;k&&({timeZone:M,timeZoneName:F}=z.getTimeZoneFormattingOptions(k.layerTimeZone,k.datesInUnknownTimezone,k.viewTimeZone,c.convertDateFormatToIntlOptions(b||"short-date-short-time"),x));if("string"===typeof p&&isNaN(Date.parse("time-only"===x?`1970-01-01T${p}Z`:p)))return p;switch(x){case "date-only":var M=c.convertDateFormatToIntlOptions(b||
"short-date");return"string"===typeof p?c.formatDateOnly(p,{...M}):c.formatDate(p,{...M,timeZone:z.utc});case "time-only":return M=c.convertDateFormatToIntlOptions(b||"short-time"),"string"===typeof p?c.formatTimeOnly(p,M):c.formatDate(p,{...M,timeZone:z.utc});case "timestamp-offset":if(!M&&"string"===typeof p&&(new Date(p)).toISOString()!==p)return p;M=(h=b||k?c.convertDateFormatToIntlOptions(b||"short-date-short-time"):void 0)?{...h,timeZone:M,timeZoneName:F}:void 0;return"string"===typeof p?c.formatTimestamp(p,
M):c.formatDate(p,M);default:return h=b||k?c.convertDateFormatToIntlOptions(b||"short-date-short-time"):void 0,c.formatDate("string"===typeof p?new Date(p):p,h?{...h,timeZone:M,timeZoneName:F}:void 0)}};a.getBasemapGroup=function(p,h=u){for(const b in h)if(h[b].includes(p))return b};a.getBasemapId=function(p,h,b=!0){let k=null;p&&("string"===typeof p?h.includes(p)&&(k=p):k=C.getWellKnownBasemapId(p));return b?k||"gray":k};a.getDateDiffSQL=function(p,h,b,k){const {hasQueryEngine:x}=p;b=w(b,d(p,b),
x);p=w(h,d(p,h),x);p=`(${b} - ${p})`;k=A[k];h="/";1>k&&(k=1/k,h="*");return{sqlExpression:1===k?p:`(${p} ${h} ${k})`,sqlWhere:null}};a.getDateType=d;a.getFieldsList=async function(p){const {field:h,field2:b,field3:k,normalizationField:x,valueExpression:F}=p;p=[];F&&(H||({arcadeUtils:p}=await t.loadArcade(),H=p),p=H.extractFieldNames(F));h&&p.push(h);b&&p.push(b);k&&p.push(k);x&&p.push(x);return p};a.getNormalizationType=function(p){let h=p.normalizationType;h||(p.normalizationField?h="field":null!=
p.normalizationTotal&&(h="percent-of-total"));return h??void 0};a.isAnyDateField=function(p){return y.isDateField(p)||y.isDateOnlyField(p)||y.isTimestampOffsetField(p)};a.isIntegerField=function(p,h){p=h&&p.getField(h);return!!p&&r.has(p.type)};a.unitValueInDays=A;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/basemapUtils":function(){define("exports ../Basemap ../config ../core/Collection ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/ensureType ../layers/effects/utils ./basemapDefinitions".split(" "),
function(a,c,y,t,C,z,f,w,d,u){function A(B,D){let G;if("string"===typeof B){const S=B in u.esriBasemapDefinitions,P=!S&&B.includes("/");if(!S&&!P)return D=Object.entries(u.esriBasemapDefinitions).filter(([,U])=>y.apiKey&&!U.classic||!y.apiKey&&(U.classic||U.is3d)).map(([U])=>`"${U}"`).sort().join(", "),C.getLogger("esri.support.basemapUtils").warn(`Unable to find basemap definition for: ${B}. Try one of these: ${D}`),null;D&&(G=D[B]);G||(G=S?c.fromId(B):new c({style:{id:B}}),D&&(D[B]=G))}else G=w.ensureType(c,
B);G?.destroyed&&(C.getLogger("esri.support.basemapUtils").warn("The provided basemap is already destroyed",{basemap:G}),G=null);return G}function r(B){if(N)return N(B);let D=null;B=b(B);const G=!B?.baseLayers.length;for(const P in u.esriBasemapDefinitions){var S=M(u.esriBasemapDefinitions[P]);S=J(B,S,{mustMatchReferences:G});if("equal"===S){D=P;break}"base-layers-equal"===S&&(D=P)}return D}function H(B,D){const G=new t;B.forEach(S=>{const P=D.find(U=>"scene"!==U.type&&m(x(S),x(U)))||S;G.includes(P)?
G.push(S):G.push(P)});return G}function p(B){if(h(B.url))return!0;if("vector-tile"===B.type)for(const D in B.sourceNameToSource)if(h(B.sourceNameToSource[D]?.sourceUrl))return!0;return!1}function h(B){if(!B)return!1;B=new f.Url(f.makeAbsolute(B));return!!B.authority&&l.test(B.authority)}function b(B){return B?!B.loaded&&B.resourceInfo?M(B.resourceInfo.data):{baseLayers:k(B.baseLayers),referenceLayers:k(B.referenceLayers)}:null}function k(B){return(t.isCollection(B)?B.toArray():B).map(x)}function x(B){return{type:B.type,
effect:"effect"in B?B.effect:void 0,url:v("urlTemplate"in B&&B.urlTemplate||B.url||"styleUrl"in B&&B.styleUrl||""),minScale:"minScale"in B&&null!=B.minScale?B.minScale:0,maxScale:"maxScale"in B&&null!=B.maxScale?B.maxScale:0,opacity:null!=B.opacity?B.opacity:1,visible:null!=B.visible?!!B.visible:!0,sublayers:"map-image"!==B.type&&"wms"!==B.type||null==B.sublayers?void 0:B.sublayers?.map(D=>({id:D.id,visible:D.visible})),activeLayerId:"wmts"===B.type?B.activeLayer?.id:void 0}}function F(B){return B.isReference||
"ArcGISSceneServiceLayer"===B.layerType}function M(B){return B?{baseLayers:g((B.baseMapLayers??[]).filter(D=>!F(D))),referenceLayers:g((B.baseMapLayers??[]).filter(D=>F(D)))}:null}function g(B){return B.map(D=>{let G;switch(D.layerType){case "VectorTileLayer":G="vector-tile";break;case "ArcGISTiledMapServiceLayer":G="tile";break;case "ArcGISSceneServiceLayer":G="scene";break;default:G="unknown"}return{type:G,effect:D.effect,url:v(D.templateUrl||D.urlTemplate||D.styleUrl||D.url),minScale:D.minScale??
0,maxScale:D.maxScale??0,opacity:D.opacity??1,visible:null!=D.visibility?!!D.visibility:!0,sublayers:void 0,activeLayerId:void 0}})}function J(B,D,G){return null!=B!==(null!=D)?"not-equal":B&&D?R(B.baseLayers,D.baseLayers)?R(B.referenceLayers,D.referenceLayers)?"equal":G.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function R(B,D){if(B.length!==D.length)return!1;for(let G=0;G<B.length;G++)if(!m(B[G],D[G]))return!1;return!0}function m(B,D){if(B.type!==D.type||B.url!==D.url||
B.minScale!==D.minScale||B.maxScale!==D.maxScale||B.visible!==D.visible||B.opacity!==D.opacity||!d.effectEquals(B.effect,D.effect))return!1;if(null!=B.activeLayerId||null!=D.activeLayerId)return B.activeLayerId===D.activeLayerId;if(null!=B.sublayers||null!=D.sublayers){if(null==B.sublayers||null==D.sublayers||B.sublayers.length!==D.sublayers.length)return!1;for(let G=0;G<B.sublayers.length;G++){const S=B.sublayers.at(G),P=D.sublayers.at(G);if(S?.id!==P?.id||S?.visible!==P?.visible)return!1}}return!0}
function v(B){return B?f.normalize(B).replace(/^\s*https?:/i,"").toLowerCase():""}function E(B){return"portalItem"in B?B.portalItem?.thumbnailUrl:void 0}let N;const l=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;a.clonePreservingTiledLayers=function(B,D=null){B=A(B);if(!B)return null;B=B.clone();D&&(B.baseLayers=H(B.baseLayers,D.baseLayers),B.referenceLayers=H(B.referenceLayers,D.referenceLayers));return B};a.contentEquals=function(B,D){if(B===D||null!=B?.portalItem?.id&&B.portalItem.id===D?.portalItem?.id)return!0;
B=b(B);D=b(D);return"equal"===J(B,D,{mustMatchReferences:!0})};a.createCache=function(){return{}};a.destroyCache=function(B){for(const D in B)z.destroyMaybe(B[D]),delete B[D]};a.ensureType=A;a.findSpatialReference=function(B,D){if(null==D||null==B)return{spatialReference:null,updating:!1};if("not-loaded"===D.loadStatus)return D.load(),{spatialReference:null,updating:!0};if(D.spatialReference)return{spatialReference:D.spatialReference,updating:!1};if(0===D.baseLayers.length)return{spatialReference:null,
updating:!1};D=D.baseLayers.at(0);switch(D.loadStatus){case "not-loaded":D.load();case "loading":return{spatialReference:null,updating:!0};case "failed":return{spatialReference:null,updating:!1}}D=(("supportedSpatialReferences"in D?D.supportedSpatialReferences:null)||["tileInfo"in D?D.tileInfo?.spatialReference:D.spatialReference]).filter(Boolean);const G=B.spatialReference;return G?{spatialReference:D.find(S=>G.equals(S))??D[0]??null,updating:!1}:{spatialReference:D[0],updating:!1}};a.getBasemapThumbnailUrl=
function(B){if(!B)return null;var {thumbnailUrl:D}=B;return D?D:(D=r(B))?u.esriBasemapDefinitions[D].thumbnailUrl:z.mappedFind(B.baseLayers,E)};a.getWellKnownBasemapId=r;a.hasDeveloperBasemapLayer=function(B){return!!B?.baseLayers.concat(B.referenceLayers).some(p)};a.isBasemap3D=function(B){return"Web Scene"===B.portalItem?.type||B.referenceLayers.some(D=>"scene"===D.type)};a.isBasemapInBeta=function(B){return!!B?.portalItem?.tags?.some(D=>"beta"===D.toLowerCase())};a.isBasemapLayer=function(B,D){return B.basemap?.referenceLayers?.some(G=>
G.uid===D)||B.basemap?.baseLayers?.some(G=>G.uid===D)};a.isDeveloperBasemapLayer=p;a.overrideGetWellKnownBasemapId=function(B){N=B};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/Basemap":function(){define("require ./chunks/tslib.es6 ./request ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./geometry/SpatialReference ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./support/BasemapStyle ./webdoc/support/writeUtils".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x,F,M,g,J,R){var m;let v=0;z=m=class extends z.JSONSupportMixin(w){constructor(l){super(l);this.thumbnailUrl=this.style=this.spatialReference=this.portalItem=this.id=null;this.title="Basemap";this.id=Date.now().toString(16)+"-basemap-"+v++;this.baseLayers=new t;this.referenceLayers=new t;const B=D=>{D.parent&&D.parent!==this&&"remove"in D.parent&&D.parent.remove(D);D.parent=this;"elevation"===D.type&&u.getLogger(this).error(`Layer '${D.title}, id:${D.id}' of type '${D.type}' is not supported as a basemap layer and will therefore be ignored.`)};
this.addHandles([this.baseLayers.on("after-add",D=>B(D.item)),this.referenceLayers.on("after-add",D=>B(D.item)),this.baseLayers.on("after-remove",D=>{D.item.parent=null}),this.referenceLayers.on("after-remove",D=>{D.item.parent=null})])}initialize(){this.when().catch(l=>{u.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,l)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var l=this.baseLayers.toArray();for(const B of l)B.destroy();
l=this.referenceLayers.toArray();for(const B of l)B.destroy();this.baseLayers.destroy();this.referenceLayers.destroy();this.portalItem=A.destroyMaybe(this.portalItem)}normalizeCtorArgs(l){l&&"resourceInfo"in l&&(this._set("resourceInfo",l.resourceInfo),l={...l},delete l.resourceInfo);return l}set baseLayers(l){this._set("baseLayers",C.referenceSetter(l,this._get("baseLayers")))}_writeBaseLayers(l,B,D){const G=[];l&&(D={...D,layerContainerType:"basemap"},this.baseLayers.forEach(S=>{S=R.getLayerJSON(S,
D.webmap?D.webmap.getLayerJSONFromResourceInfo(S):null,D);null!=S&&G.push(S)}),this.referenceLayers.forEach(S=>{const P=R.getLayerJSON(S,D.webmap?D.webmap.getLayerJSONFromResourceInfo(S):null,D);null!=P&&("scene"!==S.type&&(P.isReference=!0),G.push(P))}));B.baseMapLayers=G}set referenceLayers(l){this._set("referenceLayers",C.referenceSetter(l,this._get("referenceLayers")))}writeTitle(l,B){B.title=l||"Basemap"}load(l){this.addResolvingPromise(this._loadFromSource(l));return Promise.resolve(this)}loadAll(){return d.loadAll(this,
l=>{l(this.baseLayers,this.referenceLayers)})}clone(){const l={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(B=>f.isClonable(B)?B.clone():B),referenceLayers:this.referenceLayers.map(B=>f.isClonable(B)?B.clone():B)};this.loaded&&(l.loadStatus="loaded");return(new m({resourceInfo:this.resourceInfo})).set(l)}read(l,B){this.resourceInfo||this._set("resourceInfo",{data:l,context:B});super.read(l,B)}write(l,B){l=l||{};B?.origin||(B={origin:"web-map",...B});super.write(l,
B);!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(l.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(D=>{D=f.clone(D);D.url&&H.isProtocolRelative(D.url)&&(D.url=`https:${D.url}`);D.templateUrl&&H.isProtocolRelative(D.templateUrl)&&(D.templateUrl=`https:${D.templateUrl}`);return D}));return l}async _loadFromSource(l){const {resourceInfo:B,portalItem:D,style:G}=this;r.throwIfAborted(l);const S=[];B?(S.push(this._loadLayersFromJSON(B.data,B.context?B.context.url:null,l)),B.data.id&&!B.data.title&&
S.push(g.getBasemapTitle(B.data.id).then(P=>{P&&this.read({title:P},B.context)}))):D?S.push(this._loadFromItem(D,l)):G&&S.push(this._loadFromStylesService(G,l));await Promise.all(S)}async _loadLayersFromJSON(l,B,D){const G=this.resourceInfo?.context,S=this.portalItem?.portal||G?.portal||null,P=N[G?.origin||""]??"web-map",{populateOperationalLayers:U}=await new Promise((ea,la)=>a(["./layers/support/layersCreator"],ea,la)),Y=[];r.throwIfAborted(D);if(l.baseMapLayers&&Array.isArray(l.baseMapLayers)){B=
{context:{...G,origin:P,url:B,portal:S,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"};const ea=la=>"web-scene"===P&&"ArcGISSceneServiceLayer"===la.layerType||la.isReference;D=U(this.baseLayers,l.baseMapLayers.filter(la=>!ea(la)),B);Y.push(D);l=U(this.referenceLayers,l.baseMapLayers.filter(ea),B);Y.push(l)}await Promise.allSettled(Y)}async _loadFromItem(l,B){const D=await (await l.load(B)).fetchData("json",B),G=H.urlToObject(l.itemUrl??"");this._set("resourceInfo",{data:D.baseMap??
{},context:{origin:E[l.type||""]??"web-map",portal:l.portal||F.getDefault(),url:G}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:D.spatialReference},this.resourceInfo.context);this.read({title:l.title,thumbnailUrl:l.thumbnailUrl},{origin:"portal-item",portal:l.portal||F.getDefault(),url:G});return this._loadLayersFromJSON(this.resourceInfo.data,G,B)}async _loadFromStylesService(l,B){var D=`${l.serviceUrl}/${l.id}`;l=(await y(D,{query:{language:l.getLanguageParamValue(),
places:l.places,worldview:l.worldview},signal:B?.signal})).data;D=H.urlToObject(D);this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:D}});this.read(this.resourceInfo.data,this.resourceInfo.context);this.read({spatialReference:l.spatialReference},this.resourceInfo.context);return this._loadLayersFromJSON(this.resourceInfo.data,D,B)}static fromId(l){return(l=g.esriBasemapDefinitions[l])?l.itemId?new m({portalItem:{id:l.itemId,portal:{url:"https://www.arcgis.com"}}}):m.fromJSON(l,
{origin:l.is3d?"web-scene":"web-map"}):null}};c.__decorate([p.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(l,B,D,G){this._writeBaseLayers(l,B,G)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:t}},writer(l,B,D,G){this._writeBaseLayers(l,B,G)}}}}}})],z.prototype,"baseLayers",null);c.__decorate([p.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],z.prototype,"id",void 0);c.__decorate([p.property({type:M})],z.prototype,"portalItem",void 0);
c.__decorate([p.property()],z.prototype,"referenceLayers",null);c.__decorate([p.property({readOnly:!0})],z.prototype,"resourceInfo",void 0);c.__decorate([p.property({type:x})],z.prototype,"spatialReference",void 0);c.__decorate([p.property({type:J})],z.prototype,"style",void 0);c.__decorate([p.property()],z.prototype,"thumbnailUrl",void 0);c.__decorate([p.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],z.prototype,"title",void 0);c.__decorate([k.writer("title")],z.prototype,
"writeTitle",null);z=m=c.__decorate([b.subclass("esri.Basemap")],z);const E={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},N={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"};return z})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(a,c){a.castForReferenceSetter=function(y){return y};a.referenceSetter=function(y,t,C=c){t||=new C;if(t===y)return t;t.removeAll();y&&(Array.isArray(y)||"items"in y&&Array.isArray(y.items))?
t.addMany(y):y&&t.add(y);return t};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/Loadable":function(){define("../chunks/tslib.es6 ./Error ./maybe ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f,w){const d=u=>{u=class extends u{constructor(...A){super(...A);this.loadError=this._loadController=null;this.loadStatus="not-loaded";this._set("loadWarnings",[]);this.addResolvingPromise(new Promise(r=>
{const H=this.load.bind(this);this.load=p=>{const h=new Promise((b,k)=>{const x=C.onAbortOrThrow(p,k);this.destroyed&&k(new c("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this}));this.when(b,k).finally(()=>{x&&x.remove()})});if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const b=this._loadController=new AbortController;H({signal:b.signal})}r();return h}}));this.when(()=>{this._set("loadStatus","loaded");
this._loadController=null},r=>{this._set("loadStatus","failed");this._set("loadError",r);this._loadController=null})}destroy(){this._loadController&&(this._loadController=y.abortMaybe(this._loadController),this._promiseProps.abort());this._set("loadError",null);this._set("loadWarnings",[])}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){if(this.isFulfilled())return this;this._set("loadError",new c("load:cancelled","Cancelled"));
this._loadController?.abort();this._promiseProps.abort();return this}};a.__decorate([f.property({readOnly:!0})],u.prototype,"loaded",null);a.__decorate([f.property({readOnly:!0})],u.prototype,"loadError",void 0);a.__decorate([f.property({clonable:!1})],u.prototype,"loadStatus",void 0);a.__decorate([f.property({type:[z],readOnly:!0})],u.prototype,"loadWarnings",null);return u=a.__decorate([w.subclass("esri.core.Loadable")],u)};t=class extends d(t.EsriPromise){};t=a.__decorate([w.subclass("esri.core.Loadable")],
t);(function(u){u.LoadableMixin=d;u.isLoadable=function(A){return!(!A||!A.load)}})(t||={});return t})},"esri/core/Promise":function(){define(["exports","../chunks/tslib.es6","./Accessor","./promiseUtils","./accessorSupport/decorators/subclass"],function(a,c,y,t,C){var z;(function(d){d[d.PENDING=0]="PENDING";d[d.RESOLVED=1]="RESOLVED";d[d.REJECTED=2]="REJECTED"})(z||={});class f{constructor(){this._resolver=t.createResolver();this._status=z.PENDING;this._resolvingPromises=[];this._resolver.promise.then(()=>
{this._status=z.RESOLVED;this._cleanUp()},()=>{this._status=z.REJECTED;this._cleanUp()});this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(d){this._resolvingPromises.push(d);this._tryResolve()}isResolved(){return this._status===z.RESOLVED}isRejected(){return this._status===z.REJECTED}isFulfilled(){return this._status!==z.PENDING}abort(){this._resolver.reject(t.createAbortError())}_cleanUp(){this._resolvingPromises=this._allPromise=null}_tryResolve(){if(!this.isFulfilled()){var d=
t.createResolver(),u=[...this._resolvingPromises,d.promise],A=this._allPromise=Promise.all(u);A.then(()=>{this.isFulfilled()||this._allPromise!==A||this._resolver.resolve()},r=>{this.isFulfilled()||this._allPromise!==A||t.isAbortError(r)||this._resolver.reject(r)});d.resolve()}}}const w=d=>{d=class extends d{constructor(...u){super(...u);this._promiseProps=new f;this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(u,
A){return this._promiseProps.promise.then(()=>this).then(u,A)}catch(u){return this.when(null,u)}addResolvingPromise(u){u&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in u?u.when():u)}};return d=c.__decorate([C.subclass("esri.core.Promise")],d)};a.EsriPromise=class extends w(y){};a.EsriPromise=c.__decorate([C.subclass("esri.core.Promise")],a.EsriPromise);a.EsriPromiseMixin=w;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/loadAll":function(){define(["exports",
"./asyncUtils","./Collection","./Loadable"],function(a,c,y,t){async function C(z,f){const w=[],d=(...A)=>{for(const r of A)null!=r&&(Array.isArray(r)?d(...r):y.isCollection(r)?r.forEach(H=>d(H)):t.isLoadable(r)&&w.push(r))};f(d);let u=null;await c.map(w,async A=>{A=await c.result("loadAll"in A&&"function"===typeof A.loadAll?A.loadAll():A.load());!1!==A.ok||u||(u=A)});if(u)throw u.error;return z}a.loadAll=async function(z,f){await z.load();return C(z,f)};a.loadAllChildren=C;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/portal/Portal":function(){define("require ../chunks/tslib.es6 ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ../intl/locale ./portalDefault ./PortalGroup ./PortalQueryParams ./PortalQueryResult ./PortalUser ../support/apiKeyUtils".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x,F,M,g,J,R,m){function v(G){const S=t.id;return()=>{const P=G.deref();P&&S.findCredential(P.restUrl)&&P.signIn().catch(()=>{})}}const E=G=>Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"}));var N;let l;const B={PortalGroup:()=>Promise.resolve({default:M}),PortalItem:()=>new Promise((G,S)=>a(["./PortalItem"],P=>G(E(P)),S)),PortalUser:()=>Promise.resolve({default:R})};f=N=class extends f.JSONSupportMixin(w){constructor(G){super(G);
this.access=this._esriIdCredentialCreateHandle=null;this.allSSL=!1;this.authMode="auto";this.bingKey=this.basemapGalleryGroupQuery3D=this.basemapGalleryGroupQuery=this.authorizedCrossOriginDomains=null;this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.canSearchPublic=!0;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=
this.featuredItemsGroupQuery=this.featuredGroups=this.eueiEnabled=this.devBasemapGalleryGroupQuery=this.description=this.defaultVectorBasemap=this.defaultExtent=this.defaultDevBasemap=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.hasCategorySchema=!1;this.ipCntryCode=this.id=this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.helperServices=null;this.isReadOnly=this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=
this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;this.showHomePageDescription=!1;this.sourceJSON=null;this.supportsHostedServices=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=y.portalUrl;this.user=this.urlKey=null;this.use3dBasemaps=!0;this.useVectorBasemaps=this.useStandardizedQuery=!1;this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(G){return"string"===typeof G?{url:G}:G}destroy(){D.unregister(this);
this.defaultBasemap=d.destroyMaybe(this.defaultBasemap);this.defaultDevBasemap=d.destroyMaybe(this.defaultDevBasemap);this.defaultVectorBasemap=d.destroyMaybe(this.defaultVectorBasemap);this._esriIdCredentialCreateHandle=d.removeMaybe(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(G){if(G)for(const S of G)y.request.trustedServers.includes(S)||y.request.trustedServers.push(S);return G}readDefaultBasemap(G){return this._readBasemap(G)}readDefaultDevBasemap(G){return this._readBasemap(G)}readDefaultVectorBasemap(G){return this._readBasemap(G)}get extraQuery(){const G=
!this.user?.orgId||this.canSearchPublic;return this.id&&!G?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let G=this.url;if(G){const S=G.indexOf("/sharing");G=0<S?G.substring(0,S):this.url.replace(/\/+$/,"");G+="/sharing/rest"}return G}get thumbnailUrl(){const G=this.restUrl,S=this.thumbnail;return G&&S?this._normalizeSSL(G+"/portals/self/resources/"+S):null}readUrlKey(G){return G?G.toLowerCase():
G}readUser(G){let S=null;G&&(S=R.fromJSON(G),S.portal=this);return S}load(G){const S=(new Promise((P,U)=>a(["../Basemap"],Y=>P(E(Y)),U))).then(({default:P})=>{u.throwIfAborted(G);l=P}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,G)).then(P=>{if(t.id){const U=t.id;this.credential=U.findCredential(this.restUrl);this.credential||this.authMode!==N.AUTH_MODE_AUTO&&this.authMode!==N.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=
U.on("credential-create",v(new WeakRef(this))),D.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=P;this.read(P)});this.addResolvingPromise(S);return Promise.resolve(this)}async createElevationLayers(){await this.load();const G=this._getHelperService("defaultElevationLayers"),S=(await new Promise((P,U)=>a(["../layers/ElevationLayer"],Y=>P(E(Y)),U))).default;return G?G.map(P=>new S({id:P.id,url:P.url})):[]}async fetchBasemaps(G,S){const P=await this._fetchBasemaps(G,S);!0===
S?.include3d&&!1!==this.use3dBasemaps&&(G=await this._fetchBasemaps3D(G,S),P.unshift(...G));return P}fetchCategorySchema(G){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",G).then(S=>S.categorySchema):u.isAborted(G)?Promise.reject(u.createAbortError()):Promise.resolve([])}fetchFeaturedGroups(G){const S=this.featuredGroups,P=new g;P.num=100;P.sortField="title";if(S&&S.length){const U=[];for(const Y of S)U.push(`(title:"${Y.title}" AND owner:${Y.owner})`);P.query=
U.join(" OR ");return this.queryGroups(P,G).then(Y=>Y.results)}return u.isAborted(G)?Promise.reject(u.createAbortError()):Promise.resolve([])}fetchRegions(G){const S=this.user?.culture||this.culture||x.getLocale();return this.request(this.restUrl+"/portals/regions",{...G,query:{culture:S}})}fetchSettings(G){const S=this.user?.culture||this.culture||x.getLocale();return this.request(this.restUrl+"/portals/self/settings",{...G,query:{culture:S}})}static getDefault(){return F.ensureDefaultPortalInstance(()=>
new N)}queryGroups(G,S){return this.queryPortal("/community/groups",G,"PortalGroup",S)}queryItems(G,S){return this.queryPortal("/search",G,"PortalItem",S)}queryUsers(G,S){G.sortField||(G.sortField="username");return this.queryPortal("/community/users",G,"PortalUser",S)}fetchSelf(G=this.authMode,S=!1,P){const U=this.restUrl+"/portals/self";G={authMode:G,query:{culture:x.getLocale().toLowerCase()},withCredentials:!0,...P};"auto"===G.authMode&&(G.authMode="no-prompt");S&&(G.query.default=!0);return this.request(U,
G)}queryPortal(G,S,P,U){const Y=r.ensureType(g,S),ea=la=>this.request(this.restUrl+G,{...Y.toRequestOptions(this),...U}).then(na=>{const sa=Y.clone();sa.start=na.nextStart;return new J({nextQueryParams:sa,queryParams:Y,total:na.total,results:N._resultsToTypedArray(la,{portal:this},na,U)})}).then(na=>Promise.all(na.results.map(sa=>"function"===typeof sa.when?sa.when():na)).then(()=>na,sa=>{u.throwIfAbortError(sa);return na}));return P&&B[P]?B[P]().then(({default:la})=>{u.throwIfAborted(U);return ea(la)}):
ea()}signIn(){if(this.authMode===N.AUTH_MODE_ANONYMOUS||this.authMode===N.AUTH_MODE_NO_PROMPT&&!t.id)return Promise.reject(new z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===this.loadStatus)return Promise.reject(this.loadError);const G=S=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return S||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=
S;return this.fetchSelf("immediate")});if(this.user&&this.credential===S)return null;this.credential=S;return this.fetchSelf("immediate")}).then(P=>{P&&(this.sourceJSON=P,this.read(P))});return t.id?t.id.getCredential(this.restUrl,{prompt:this.authMode!==N.AUTH_MODE_NO_PROMPT}).then(S=>G(S)):G(this.credential)}normalizeUrl(G){const S=this.credential?.token;return this._normalizeSSL(S?G+(G.includes("?")?"\x26":"?")+"token\x3d"+S:G)}requestToTypedArray(G,S,P){return this.request(G,S).then(U=>{const Y=
N._resultsToTypedArray(P,{portal:this},U);return Promise.all(Y.map(ea=>"function"===typeof ea.when?ea.when():U)).then(()=>Y,()=>Y)})}request(G,S={}){var P={f:"json",...S.query};const {authMode:U=this.authMode===N.AUTH_MODE_ANONYMOUS||this.authMode===N.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:Y=null,cacheBust:ea=!1,method:la="auto",responseType:na="json",signal:sa}=S;P={authMode:U,body:Y,cacheBust:ea,method:la,query:P,responseType:na,timeout:0,signal:sa};S.withCredentials&&(P.withCredentials=
!0);return C(this._normalizeSSL(G),P).then(ua=>ua.data)}toJSON(){throw new z("internal:not-yet-implemented","Portal.toJSON is not yet implemented");}static fromJSON(G){if(!G)return null;if(G.declaredClass)throw Error("JSON object is already hydrated");return new N({sourceJSON:G})}_getHelperService(G){const S=this.helperServices&&this.helperServices[G];if(!S)throw new z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${G}"`);return S}async _fetchBasemaps(G,S){const P=
new g;P.query=G||(y.apiKey&&m.supportsApiKey(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);P.disableExtraQuery=!0;G=await this.queryGroups(P,S);if(!G.total)return[];G=G.results[0];P.num=100;P.query='type:"Web Map" -type:"Web Application"';P.sortField=G.sortField||"name";P.sortOrder=G.sortOrder||"desc";S=await G.queryItems(P,S);return S.total?S.results.filter(U=>"Web Map"===U.type).map(U=>new l({portalItem:U})):
[]}async _fetchBasemaps3D(G,S){G=G||this.basemapGalleryGroupQuery3D;if(!G)return[];G=new g({query:G,disableExtraQuery:!0});var P=await this.queryGroups(G,S);if(!P.total)return[];P=P.results[0];G.num=100;G.query='type:"Web Scene"';G.sortField=P.sortField||"name";G.sortOrder=P.sortOrder||"desc";S=await P.queryItems(G,S);return S.total?S.results.filter(U=>"Web Scene"===U.type).map(U=>new l({portalItem:U})):[]}_normalizeSSL(G){return G.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(G){return G?
(G=l.fromJSON(G),G.portalItem={portal:this},G):null}static _resultsToTypedArray(G,S,P,U){let Y=[];if(P){const ea=null!=U?U.signal:null;Y=P.listings||P.notifications||P.userInvitations||P.tags||P.items||P.groups||P.comments||P.provisions||P.results||P.relatedItems||P;if(G||S)Y=Y.map(la=>{la=Object.assign(G?G.fromJSON(la):la,S);"function"===typeof la.load&&la.load(ea);return la})}else Y=[];return Y}};f.AUTH_MODE_ANONYMOUS="anonymous";f.AUTH_MODE_AUTO="auto";f.AUTH_MODE_IMMEDIATE="immediate";f.AUTH_MODE_NO_PROMPT=
"no-prompt";c.__decorate([A.property()],f.prototype,"access",void 0);c.__decorate([A.property()],f.prototype,"allSSL",void 0);c.__decorate([A.property()],f.prototype,"authMode",void 0);c.__decorate([A.property()],f.prototype,"authorizedCrossOriginDomains",void 0);c.__decorate([h.reader("authorizedCrossOriginDomains")],f.prototype,"readAuthorizedCrossOriginDomains",null);c.__decorate([A.property()],f.prototype,"basemapGalleryGroupQuery",void 0);c.__decorate([A.property({json:{name:"3DBasemapGalleryGroupQuery"}})],
f.prototype,"basemapGalleryGroupQuery3D",void 0);c.__decorate([A.property()],f.prototype,"bingKey",void 0);c.__decorate([A.property()],f.prototype,"canListApps",void 0);c.__decorate([A.property()],f.prototype,"canListData",void 0);c.__decorate([A.property()],f.prototype,"canListPreProvisionedItems",void 0);c.__decorate([A.property()],f.prototype,"canProvisionDirectPurchase",void 0);c.__decorate([A.property()],f.prototype,"canSearchPublic",void 0);c.__decorate([A.property()],f.prototype,"canShareBingPublic",
void 0);c.__decorate([A.property()],f.prototype,"canSharePublic",void 0);c.__decorate([A.property()],f.prototype,"canSignInArcGIS",void 0);c.__decorate([A.property()],f.prototype,"canSignInIDP",void 0);c.__decorate([A.property()],f.prototype,"colorSetsGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"commentsEnabled",void 0);c.__decorate([A.property({type:Date})],f.prototype,"created",void 0);c.__decorate([A.property()],f.prototype,"credential",void 0);c.__decorate([A.property()],f.prototype,
"culture",void 0);c.__decorate([A.property()],f.prototype,"currentVersion",void 0);c.__decorate([A.property()],f.prototype,"customBaseUrl",void 0);c.__decorate([A.property()],f.prototype,"defaultBasemap",void 0);c.__decorate([h.reader("defaultBasemap")],f.prototype,"readDefaultBasemap",null);c.__decorate([A.property()],f.prototype,"defaultDevBasemap",void 0);c.__decorate([h.reader("defaultDevBasemap")],f.prototype,"readDefaultDevBasemap",null);c.__decorate([A.property({type:k})],f.prototype,"defaultExtent",
void 0);c.__decorate([A.property()],f.prototype,"defaultVectorBasemap",void 0);c.__decorate([h.reader("defaultVectorBasemap")],f.prototype,"readDefaultVectorBasemap",null);c.__decorate([A.property()],f.prototype,"description",void 0);c.__decorate([A.property()],f.prototype,"devBasemapGalleryGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"eueiEnabled",void 0);c.__decorate([A.property({readOnly:!0})],f.prototype,"extraQuery",null);c.__decorate([A.property()],f.prototype,"featuredGroups",
void 0);c.__decorate([A.property()],f.prototype,"featuredItemsGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"galleryTemplatesGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"livingAtlasGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"hasCategorySchema",void 0);c.__decorate([A.property()],f.prototype,"helpBase",void 0);c.__decorate([A.property()],f.prototype,"helperServices",void 0);c.__decorate([A.property()],f.prototype,"helpMap",void 0);c.__decorate([A.property()],
f.prototype,"homePageFeaturedContent",void 0);c.__decorate([A.property()],f.prototype,"homePageFeaturedContentCount",void 0);c.__decorate([A.property()],f.prototype,"httpPort",void 0);c.__decorate([A.property()],f.prototype,"httpsPort",void 0);c.__decorate([A.property()],f.prototype,"id",void 0);c.__decorate([A.property()],f.prototype,"ipCntryCode",void 0);c.__decorate([A.property({readOnly:!0})],f.prototype,"isOrganization",null);c.__decorate([A.property()],f.prototype,"isPortal",void 0);c.__decorate([A.property()],
f.prototype,"isReadOnly",void 0);c.__decorate([A.property({readOnly:!0})],f.prototype,"itemPageUrl",null);c.__decorate([A.property()],f.prototype,"layerTemplatesGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"maxTokenExpirationMinutes",void 0);c.__decorate([A.property({type:Date})],f.prototype,"modified",void 0);c.__decorate([A.property()],f.prototype,"name",void 0);c.__decorate([A.property()],f.prototype,"portalHostname",void 0);c.__decorate([A.property()],f.prototype,"portalMode",void 0);
c.__decorate([A.property()],f.prototype,"portalProperties",void 0);c.__decorate([A.property()],f.prototype,"region",void 0);c.__decorate([A.property({readOnly:!0})],f.prototype,"restUrl",null);c.__decorate([A.property()],f.prototype,"rotatorPanels",void 0);c.__decorate([A.property()],f.prototype,"showHomePageDescription",void 0);c.__decorate([A.property()],f.prototype,"sourceJSON",void 0);c.__decorate([A.property()],f.prototype,"staticImagesUrl",void 0);c.__decorate([A.property({json:{name:"2DStylesGroupQuery"}})],
f.prototype,"stylesGroupQuery2d",void 0);c.__decorate([A.property({json:{name:"stylesGroupQuery"}})],f.prototype,"stylesGroupQuery3d",void 0);c.__decorate([A.property()],f.prototype,"supportsHostedServices",void 0);c.__decorate([A.property()],f.prototype,"symbolSetsGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"templatesGroupQuery",void 0);c.__decorate([A.property()],f.prototype,"thumbnail",void 0);c.__decorate([A.property({readOnly:!0})],f.prototype,"thumbnailUrl",null);c.__decorate([A.property()],
f.prototype,"units",void 0);c.__decorate([A.property()],f.prototype,"url",void 0);c.__decorate([A.property()],f.prototype,"urlKey",void 0);c.__decorate([h.reader("urlKey")],f.prototype,"readUrlKey",null);c.__decorate([A.property()],f.prototype,"user",void 0);c.__decorate([h.reader("user")],f.prototype,"readUser",null);c.__decorate([A.property()],f.prototype,"use3dBasemaps",void 0);c.__decorate([A.property()],f.prototype,"useStandardizedQuery",void 0);c.__decorate([A.property()],f.prototype,"useVectorBasemaps",
void 0);c.__decorate([A.property()],f.prototype,"vectorBasemapGalleryGroupQuery",void 0);c=f=N=c.__decorate([b.subclass("esri.portal.Portal")],f);const D=new FinalizationRegistry(G=>{G.remove()});return c})},"esri/portal/portalDefault":function(){define(["exports"],function(a){let c;a.clearDefaultPortalInstance=function(){c=void 0};a.ensureDefaultPortalInstance=function(y){if(!c||c.destroyed)c=y();return c};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/PortalGroup":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./PortalQueryParams".split(" "),
function(a,c,y,t,C,z,f,w,d){var u;y=u=class extends y.JSONSupport{constructor(A){super(A);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sourceJSON=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}get thumbnailUrl(){const A=this.url,r=this.thumbnail;return A&&r&&this.portal?this.portal?.normalizeUrl(`${A}/info/${r}?f=json`):null}get url(){const A=this.portal?.restUrl;return A?A+"/community/groups/"+this.id:
null}fetchCategorySchema(A){return this.portal.request(this.url+"/categorySchema",A).then(r=>{r=r.categorySchema||[];return r.some(H=>"contentCategorySetsGroupQuery.LivingAtlas"===H.source)?this._fetchCategorySchemaSet("LivingAtlas",A):r})}fetchMembers(A){return this.portal.request(this.url+"/users",A)}getThumbnailUrl(A){let r=this.thumbnailUrl;r&&A&&(r+=`&w=${A}`);return r}toJSON(){throw new c("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");}static fromJSON(A){if(!A)return null;
if(A.declaredClass)throw Error("JSON object is already hydrated");const r=new u;r.sourceJSON=A;r.read(A);return r}queryItems(A,r){A=C.ensureType(d,A);const H=this.portal;if(5<parseFloat(H.currentVersion))return A=A||new d,H.queryPortal(`/content/groups/${this.id}/search`,A,"PortalItem",r);A=A?A.clone():new d;A.query="group:"+this.id+(A.query?" "+A.query:"");return H.queryItems(A,r)}_fetchCategorySchemaSet(A,r){const H=this.portal;return H.fetchSelf(H.authMode,!0,r).then(p=>{if(p=p.contentCategorySetsGroupQuery){const h=
new d;h.disableExtraQuery=!0;h.num=1;h.query=p;return H.queryGroups(h,r)}throw new c("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(p=>{if(p.total){p=p.results[0];const h=new d;h.num=1;h.query=`typekeywords:"${A}"`;return p.queryItems(h,r)}throw new c("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(p=>p.total?p.results[0].fetchData("json",r).then(h=>{h=h?.categorySchema;return h?.length?h:[]}):[])}};a.__decorate([t.property()],
y.prototype,"access",void 0);a.__decorate([t.property({type:Date})],y.prototype,"created",void 0);a.__decorate([t.property()],y.prototype,"description",void 0);a.__decorate([t.property()],y.prototype,"id",void 0);a.__decorate([t.property()],y.prototype,"isInvitationOnly",void 0);a.__decorate([t.property({type:Date})],y.prototype,"modified",void 0);a.__decorate([t.property()],y.prototype,"owner",void 0);a.__decorate([t.property()],y.prototype,"portal",void 0);a.__decorate([t.property()],y.prototype,
"snippet",void 0);a.__decorate([t.property()],y.prototype,"sortField",void 0);a.__decorate([t.property()],y.prototype,"sortOrder",void 0);a.__decorate([t.property()],y.prototype,"sourceJSON",void 0);a.__decorate([t.property()],y.prototype,"tags",void 0);a.__decorate([t.property()],y.prototype,"thumbnail",void 0);a.__decorate([t.property({readOnly:!0})],y.prototype,"thumbnailUrl",null);a.__decorate([t.property()],y.prototype,"title",void 0);a.__decorate([t.property({readOnly:!0})],y.prototype,"url",
null);return y=u=a.__decorate([w.subclass("esri.portal.PortalGroup")],y)})},"esri/portal/PortalQueryParams":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(a,c,y,t,C,z,f,w,d,u,A){var r;const H=new y.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",
numComments:"num-comments",numViews:"num-views"});c=r=class extends c{constructor(p){super(p);this.categories=null;this.disableExtraQuery=!1;this.filter=this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(p){"asc"!==p&&"desc"!==p||this._set("sortOrder",p)}clone(){return new r({categories:this.categories?t.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():
null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(p,h){let b=[];this.categories&&(b=this.categories.map(F=>Array.isArray(F)?JSON.stringify(F):F));let k="";if(this.extent){var x=A.project(this.extent,u.WGS84);null!=x&&(k=`${x.xmin},${x.ymin},${x.xmax},${x.ymax}`)}x=this.query;!this.disableExtraQuery&&p.extraQuery&&(x="("+x+")"+p.extraQuery);p={categories:b,bbox:k,q:x,filter:this.filter,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(p.sortField=this.sortField.split(",").map(F=>H.toJSON(F.trim())).join(","),p.sortOrder=this.sortOrder);return{query:{...h,...p}}}};a.__decorate([C.property()],c.prototype,"categories",void 0);a.__decorate([C.property()],c.prototype,"disableExtraQuery",void 0);a.__decorate([C.property({type:d})],c.prototype,"extent",void 0);a.__decorate([C.property()],c.prototype,"filter",void 0);a.__decorate([C.property()],c.prototype,"num",void 0);a.__decorate([C.property()],
c.prototype,"query",void 0);a.__decorate([C.property()],c.prototype,"sortField",void 0);a.__decorate([C.property()],c.prototype,"sortOrder",null);a.__decorate([C.property()],c.prototype,"start",void 0);return c=r=a.__decorate([w.subclass("esri.portal.PortalQueryParams")],c)})},"esri/portal/PortalQueryResult":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f){c=class extends c{constructor(w){super(w);this.total=this.results=this.queryParams=this.nextQueryParams=null}};a.__decorate([y.property()],c.prototype,"nextQueryParams",void 0);a.__decorate([y.property()],c.prototype,"queryParams",void 0);a.__decorate([y.property()],c.prototype,"results",void 0);a.__decorate([y.property()],c.prototype,"total",void 0);return c=a.__decorate([f.subclass("esri.portal.PortalQueryResult")],c)})},"esri/portal/PortalUser":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./PortalFolder ./PortalGroup".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A){var r;t=r=class extends t.JSONSupport{constructor(...H){super(...H);this.userType=this.username=this.units=this.sourceJSON=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}get thumbnailUrl(){const H=this.url,p=this.thumbnail;return H&&p?this.portal.normalizeUrl(`${H}/info/${p}?f=json`):null}get userContentUrl(){const H=this.portal?.restUrl;
return H?`${H}/content/users/${this.username}`:null}get url(){const H=this.portal?.restUrl;return H?`${H}/community/users/${this.username}`:null}addItem(H){const p=H&&H.item;var h=H?.data;H=H?.folder;const b={method:"post"};p&&(b.query=p.createPostQuery(),null!=h&&("string"===typeof h?b.query.text=h:"object"===typeof h&&(b.query.text=JSON.stringify(h))));h=this.userContentUrl;H&&(h+="/"+("string"===typeof H?H:H.id));return this.portal.request(h+"/addItem",b).then(k=>{p.id=k.id;p.portal=this.portal;
return p.loaded?p.reload():p.load()})}deleteItem(H){let p=this.userContentUrl;H.ownerFolder&&(p+="/"+H.ownerFolder);return this.portal.request(p+`/items/${H.id}/delete`,{method:"post"}).then(()=>{H.id=null;H.portal=null})}deleteItems(H){const p=this.userContentUrl+"/deleteItems";var h=H.map(b=>b.id);return h.length?(h={method:"post",query:{items:h.join(",")}},this.portal.request(p,h).then(()=>{H.forEach(b=>{b.id=null;b.portal=null})})):Promise.resolve(void 0)}fetchFolders(){return this.portal.request(this.userContentUrl??
"",{query:{num:1}}).then(H=>H&&H.folders?H.folders.map(p=>{p=u.fromJSON(p);p.portal=this.portal;return p}):[])}fetchGroups(){return this.portal.request(this.url??"").then(H=>H&&H.groups?H.groups.map(p=>{p=A.fromJSON(p);p.portal=this.portal;return p}):[])}fetchItems(H){const p=H??{};let h=this.userContentUrl??"";p.folder&&(h+="/"+p.folder.id);let b;return(new Promise((k,x)=>a(["./PortalItem"],F=>k(Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}))),
x))).then(({default:k})=>{b=k;return this.portal.request(h,{query:{folders:!1,num:p.num||10,start:p.start||1,sortField:p.sortField||"created",sortOrder:p.sortOrder||"asc"}})}).then(k=>{let x;return k?.items?(x=k.items.map(F=>{F=b.fromJSON(F);F.portal=this.portal;return F}),Promise.all(x.map(F=>F.load())).catch(F=>F).then(()=>({items:x,nextStart:k.nextStart,total:k.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(H=>H.tags)}getThumbnailUrl(H){let p=
this.thumbnailUrl;p&&H&&(p+=`&w=${H}`);return p}queryFavorites(H){return this.favGroupId?(this._favGroup||(this._favGroup=new A({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(H)):Promise.reject(new y("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new y("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented");}static fromJSON(H){if(!H)return null;if(H.declaredClass)throw Error("JSON object is already hydrated");
const p=new r;p.sourceJSON=H;p.read(H);return p}};c.__decorate([C.property()],t.prototype,"access",void 0);c.__decorate([C.property({type:Date})],t.prototype,"created",void 0);c.__decorate([C.property()],t.prototype,"culture",void 0);c.__decorate([C.property()],t.prototype,"description",void 0);c.__decorate([C.property()],t.prototype,"email",void 0);c.__decorate([C.property()],t.prototype,"favGroupId",void 0);c.__decorate([C.property()],t.prototype,"fullName",void 0);c.__decorate([C.property({type:Date})],
t.prototype,"modified",void 0);c.__decorate([C.property()],t.prototype,"orgId",void 0);c.__decorate([C.property()],t.prototype,"portal",void 0);c.__decorate([C.property()],t.prototype,"preferredView",void 0);c.__decorate([C.property()],t.prototype,"privileges",void 0);c.__decorate([C.property()],t.prototype,"region",void 0);c.__decorate([C.property()],t.prototype,"role",void 0);c.__decorate([C.property()],t.prototype,"roleId",void 0);c.__decorate([C.property()],t.prototype,"sourceJSON",void 0);c.__decorate([C.property()],
t.prototype,"thumbnail",void 0);c.__decorate([C.property({readOnly:!0})],t.prototype,"thumbnailUrl",null);c.__decorate([C.property()],t.prototype,"units",void 0);c.__decorate([C.property({readOnly:!0})],t.prototype,"userContentUrl",null);c.__decorate([C.property({readOnly:!0})],t.prototype,"url",null);c.__decorate([C.property()],t.prototype,"username",void 0);c.__decorate([C.property()],t.prototype,"userType",void 0);return t=r=c.__decorate([d.subclass("esri.portal.PortalUser")],t)})},"esri/portal/PortalFolder":function(){define("../chunks/tslib.es6 ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f,w){y=class extends y.JSONSupport{constructor(d){super(d);this.username=this.title=this.portal=this.id=this.created=null}get url(){const d=this.portal?.restUrl;return d?`${d}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new c("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");}};a.__decorate([t.property({type:Date})],y.prototype,"created",void 0);a.__decorate([t.property()],y.prototype,"id",void 0);a.__decorate([t.property()],y.prototype,
"portal",void 0);a.__decorate([t.property()],y.prototype,"title",void 0);a.__decorate([t.property({readOnly:!0})],y.prototype,"url",null);a.__decorate([t.property()],y.prototype,"username",void 0);return y=a.__decorate([w.subclass("esri.portal.PortalFolder")],y)})},"esri/portal/PortalItem":function(){define("require ../chunks/tslib.es6 ../assets ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../geometry/Extent ./Portal ./PortalItemResource ./PortalRating ../chunks/persistableUrlUtils".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k){var x;const F=new Set("Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;GeoJson;CSV;KML;WFS;WMTS;WMS;Feed".split(";")),M=new Set(["KML","GeoJson","CSV"]);C=x=class extends C.JSONSupportMixin(f){static from(g){return u.ensureClass(x,g)}constructor(g){super(g);this.id=this.groupCategories=this.extent=this.description=this.culture=this.created=this.categories=this.avgRating=this.applicationProxies=
this.apiKey=this.accessInformation=this.access=null;this.isOrgItem=!1;this.url=this.typeKeywords=this.type=this.title=this.tags=this.spatialReference=this.sourceUrl=this.sourceJSON=this.snippet=this.size=this.screenshots=this.portal=this.ownerFolder=this.owner=this.numViews=this.numRatings=this.numComments=this.name=this.modified=this.licenseInfo=this.itemControl=null}destroy(){this.portal=null}get displayName(){const g=this.type,J=this.typeKeywords||[];let R=g;"Feature Service"===g||"Feature Collection"===
g?R=J.includes("Table")?"Table":J.includes("Route Layer")?"Route Layer":J.includes("Markup")?"Markup":"Feature Layer":"Image Service"===g?R=J.includes("Elevation 3D Layer")?"Elevation Layer":J.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===g?R="Scene Layer":"Video Service"===g?R="Video Layer":"Scene Package"===g?R="Scene Layer Package":"Stream Service"===g?R="Feature Layer":"Geoprocessing Service"===g?R=J.includes("Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===
g?R="GeoEnrichment Service":"Geocoding Service"===g?R="Locator":"Microsoft Powerpoint"===g?R="Microsoft PowerPoint":"GeoJson"===g?R="GeoJSON":"Globe Service"===g?R="Globe Layer":"Vector Tile Service"===g?R="Tile Layer":"netCDF"===g?R="NetCDF":"Map Service"===g?R=J.includes("Spatiotemporal")||!J.includes("Hosted Service")&&!J.includes("Tiled")||J.includes("Relational")?"Map Image Layer":"Tile Layer":g&&g.toLowerCase().includes("add in")?R=g.replaceAll(/(add in)/gi,"Add-In"):"datastore catalog service"===
g?R="Big Data File Share":"Compact Tile Package"===g?R="Tile Package (tpkx)":"Raster function template"===g?R="Raster Function Template":"OGCFeatureServer"===g?R="OGC Feature Layer":"web mapping application"===g&&J.includes("configurableApp")?R="Instant App":"Insights Page"===g?R="Insights Report":"Excalibur Imagery Project"===g&&(R="Excalibur Project");return R}readExtent(g){return g&&g.length?new H(g[0][0],g[0][1],g[1][0],g[1][1]):null}get iconUrl(){var g=this.type?.toLowerCase()||"";const J=this.typeKeywords||
[];var R=!1,m=!1;let v=!1,E=!1,N=!1,l=!1;R=m=!1;0<g.indexOf("service")||"feature collection"===g||"kml"===g||"wms"===g||"wmts"===g||"wfs"===g?(R=J.includes("Hosted Service"),"feature service"===g||"feature collection"===g||"kml"===g||"wfs"===g?(m=J.includes("Table"),v=J.includes("Route Layer"),E=J.includes("Markup"),N=J.includes("Spatiotemporal"),l=J.includes("UtilityNetwork"),g=N&&m?"spatiotemporaltable":m?"table":v?"routelayer":E?"markup":N?"spatiotemporal":l?"utilitynetwork":R?"featureshosted":
"features"):"map service"===g||"wms"===g||"wmts"===g?(N=J.includes("Spatiotemporal"),m=J.includes("Relational"),g=N||m?"mapimages":R||J.includes("Tiled")||"wmts"===g?"maptiles":"mapimages"):g="scene service"===g?J.includes("Line")?"sceneweblayerline":J.includes("3DObject")?"sceneweblayermultipatch":J.includes("Point")?"sceneweblayerpoint":J.includes("IntegratedMesh")?"sceneweblayermesh":J.includes("PointCloud")?"sceneweblayerpointcloud":J.includes("Polygon")?"sceneweblayerpolygon":J.includes("Building")?
"sceneweblayerbuilding":J.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===g?J.includes("Elevation 3D Layer")?"elevationlayer":J.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===g?"streamlayer":"vector tile service"===g?"vectortile":"datastore catalog service"===g?"datastorecollection":"geocoding service"===g?"geocodeservice":"video service"===g?J.includes("Live Stream")?"livestreamvideolayer":"videolayer":"geoprocessing service"===g?J.includes("Web Tool")?
"tool":"layers":"geodata service"===g?"geodataservice":"3dtiles service"===g?J.includes("3DObject")?"3dobjecttileslayer":J.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):g="web map"===g||"cityengine web scene"===g?"maps":"web scene"===g?J.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===g&&J.includes("configurableApp")?"instantapps":"web mapping application"===g||"mobile application"===g||"application"===g||"operation view"===
g||"desktop application"===g?"apps":"map document"===g||"map package"===g||"published map"===g||"scene document"===g||"globe document"===g||"basemap package"===g||"mobile basemap package"===g||"mobile map package"===g||"project package"===g||"project template"===g||"pro map"===g||"layout"===g||"layer"===g&&J.includes("ArcGIS Pro")||"explorer map"===g&&J.indexOf("Explorer Document")?"mapsgray":"service definition"===g||"csv"===g||"shapefile"===g||"cad drawing"===g||"geojson"===g||"netcdf"===g||"administrative report"===
g?"datafiles":"360 vr experience"===g?"360vr":"explorer add in"===g||"desktop add in"===g||"windows viewer add in"===g||"windows viewer configuration"===g?"appsgray":"arcgis pro add in"===g||"arcgis pro configuration"===g?"addindesktop":"rule package"===g||"file geodatabase"===g||"sqlite geodatabase"===g||"csv collection"===g||"kml collection"===g||"windows mobile package"===g||"map template"===g||"desktop application template"===g||"gml"===g||"arcpad package"===g||"code sample"===g||"document link"===
g||"earth configuration"===g||"operations dashboard add in"===g||"rules package"===g||"image"===g||"workflow manager package"===g||"explorer map"===g&&J.includes("Explorer Mapping Application")||J.includes("Document")?"datafilesgray":"network analysis service"===g||"geoprocessing service"===g||"geodata service"===g||"geometry service"===g||"geoprocessing package"===g||"locator package"===g||"geoprocessing sample"===g||"workflow manager service"===g?"toolsgray":"layer"===g||"layer package"===g||"explorer layer"===
g?"layersgray":"scene package"===g?"scenepackage":"3dtiles package"===g?"3dtileslayerpackage":"3dtiles service"===g?"3dtileslayer":"mobile scene package"===g?"mobilescenepackage":"tile package"===g||"compact tile package"===g?"tilepackage":"task file"===g?"taskfile":"report template"===g?"report-template":"statistical data collection"===g?"statisticaldatacollection":"insights workbook"===g?"workbook":"insights model"===g?"insightsmodel":"insights page"===g?"insightspage":"insights theme"===g?"insightstheme":
"hub initiative"===g?"hubinitiative":"hub page"===g?"hubpage":"hub site application"===g?"hubsite":"hub event"===g?"hubevent":"hub project"===g?"hubproject":"relational database connection"===g?"relationaldatabaseconnection":"big data file share"===g?"datastorecollection":"image collection"===g?"imagecollection":"desktop style"===g?"desktopstyle":"style"===g?"style":"dashboard"===g?"dashboard":"raster function template"===g?"rasterprocessingtemplate":"vector tile package"===g?"vectortilepackage":
"ortho mapping project"===g?"orthomappingproject":"ortho mapping template"===g?"orthomappingtemplate":"solution"===g?"solutions":"geopackage"===g?"geopackage":"deep learning package"===g?"deeplearningpackage":"real time analytic"===g?"realtimeanalytics":"big data analytic"===g?"bigdataanalytics":"feed"===g?"feed":"excalibur imagery project"===g?"excaliburimageryproject":"notebook"===g?"notebook":"storymap"===g?"storymap":"survey123 add in"===g?"survey123addin":"mission"===g?"mission":"mission report"===
g?"missionreport":"mission template"===g?"missiontemplate":"quickcapture project"===g?"quickcaptureproject":"pro report"===g?"proreport":"pro report template"===g?"proreporttemplate":"urban model"===g?"urbanmodel":"web experience"===g?"experiencebuilder":"web experience template"===g?"webexperiencetemplate":"experience builder widget"===g?"experiencebuilderwidget":"experience builder widget package"===g?"experiencebuilderwidgetpackage":"workflow"===g?"workflow":"kernel gateway connection"===g?"kernelgatewayconnection":
"insights script"===g?"insightsscript":"hub initiative template"===g?"hubinitiativetemplate":"storymap theme"===g?"storymaptheme":"knowledge graph"===g?"knowledgegraph":"knowledge studio project"===g?"knowledgestudio":"native application"===g?"nativeapp":"native application installer"===g?"nativeappinstaller":"link chart"===g?"linkchart":"investigation"===g?"investigation":"ogcfeatureserver"===g?"features":"pro project"===g?"proproject":"insights workbook package"===g?"insightsworkbookpackage":"apache parquet"===
g?"apacheparquet":"notebook code snippets"===g||"notebook code snippet library"===g?"notebookcodesnippets":"suitability model"===g?"suitabilitymodel":"esri classifier definition"===g?"classifierdefinition":"esri classification schema"===g?"classificationschema":"insights data engineering workbook"===g?"dataengineeringworkbook":"insights data engineering model"===g?"dataengineeringmodel":"deep learning studio project"===g?"deeplearningproject":"discussion"===g?"discussion":"allsource project"===g?
"allsourceproject":"api key"===g?"apikey":"data pipeline"===g?"datapipelines":"group layer"===g?(R=J.includes("Map"))?"layergroup2d":"layergroup":"media layer"===g?"onlinemedialayer":"form"===g?J.includes("Survey123")?"survey":"datafilesgray":"maps";return g?y.getAssetUrl("esri/images/portal/"+g+"16.png"):null}get isLayer(){return null!=this.type&&F.has(this.type)}get itemCdnUrl(){return k.toCDNUrl(this.itemUrl)}get itemPageUrl(){const g=this.portal?.itemPageUrl;return g&&this.id?`${g}?id=${this.id}`:
null}get itemUrl(){const g=this.portal?.restUrl;return g&&this.id?`${g}/content/items/${this.id}`:null}get thumbnailUrl(){const g=this.itemUrl,J=this.thumbnail;return g&&J?this.portal?.normalizeUrl(`${g}/info/${J}?f=json`)??null:null}get userItemUrl(){const g=this.portal?.restUrl;if(!g)return null;const J=this.owner||this.portal?.user?.username;return J?`${g}/content/users/${this.ownerFolder?`${J}/${this.ownerFolder}`:J}/items/${this.id}`:null}load(g){const J=this.portal??(this.portal=p.getDefault()),
R=J.load(g).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?J.request(this.itemUrl,{signal:null!=g?g.signal:null,query:{token:this.apiKey}}):{}).then(m=>{this.sourceJSON=m;this.read(m)});this.addResolvingPromise(R);return Promise.resolve(this)}async addRating(g){const J={method:"post",query:{}};g instanceof b&&(g=g.rating);null==g||isNaN(g)||"number"!==typeof g||(J.query.rating=g);if(!this.portal)return null;await this.portal.request(this.itemUrl+"/addRating",J);return new b({rating:g,
created:new Date})}clone(){var g={access:this.access,accessInformation:this.accessInformation,applicationProxies:z.clone(this.applicationProxies),avgRating:this.avgRating,categories:z.clone(this.categories),created:z.clone(this.created),culture:this.culture,description:this.description,extent:z.clone(this.extent),groupCategories:z.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:z.clone(this.modified),name:this.name,numComments:this.numComments,
numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:z.clone(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:z.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:z.clone(this.typeKeywords),url:this.url};this.loaded&&(g.loadStatus="loaded");g=(new x({sourceJSON:this.sourceJSON})).set(g);g._set("isOrgItem",this.isOrgItem);
return g}createPostQuery(){const g=this.toJSON();for(var J of["tags","typeKeywords","categories"])g[J]=g[J]?.join(", ");({extent:J}=g);J&&(g.extent=JSON.stringify(J));return g}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(g="json",J){return this.portal.request(this.itemUrl+"/data",{responseType:g,...J,query:{token:this.apiKey}})}async fetchRating(g){g=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...g});return null!=
g.rating?(g.created=new Date(g.created),new b(g)):null}fetchRelatedItems(g,J){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...g,token:this.apiKey},...J},x)}getThumbnailUrl(g){let J=this.thumbnailUrl;J&&g&&(J+=`&w=${g}`);return J}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(g=>{this.sourceJSON=g;this.read(g);return this})}update(g){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const J=g?.data,
R={method:"post"};R.query=this.createPostQuery();for(const m in R.query)null===R.query[m]&&(R.query[m]="");R.query.clearEmptyFields=!0;null!=J&&("string"===typeof J?R.query.text=J:"object"===typeof J&&(R.query.text=JSON.stringify(J)));return this.portal.request(`${this.userItemUrl}/update`,R).then(()=>this.reload())}):Promise.reject(new t("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(g){if(!this.id)throw new t("portal:item-does-not-exist","The item does not exist yet");
await this.load();const {portal:J,itemUrl:R}=this;await J.signIn();const {copyResources:m,folder:v,tags:E,title:N}=g||{};g={method:"post",query:{copyPrivateResources:"all"===m,folder:"string"===typeof v?v:v?.id,includeResources:!!m,tags:E?.join(","),title:N}};({itemId:g}=await J.request(`${R}/copy`,g));return new x({id:g,portal:J})}updateThumbnail(g){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const J=g.thumbnail,R=g.filename,m={method:"post"};if("string"===typeof J)w.isDataProtocol(J)?
m.query={data:J}:m.query={url:w.makeAbsolute(J)},null!=R&&(m.query.filename=R);else{const v=new FormData;null!=R?v.append("file",J,R):v.append("file",J);m.body=v}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,m).then(()=>this.reload())}):Promise.reject(new t("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(g={},J){const {fetchResources:R}=await new Promise((m,v)=>a(["./support/resourceUtils"],m,v));return R(this,g,J)}async addResource(g,
J,R){const {addOrUpdateResources:m}=await new Promise((v,E)=>a(["./support/resourceUtils"],v,E));g.portalItem=this;await m(this,[{resource:g,content:J,compress:R?.compress,access:R?.access}],"add",R);return g}async removeResource(g,J){const {removeResource:R}=await new Promise((m,v)=>a(["./support/resourceUtils"],m,v));if(g.portalItem&&g.portalItem.itemUrl!==this.itemUrl)throw new t("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");
return R(this,g,J)}async removeAllResources(g){const {removeAllResources:J}=await new Promise((R,m)=>a(["./support/resourceUtils"],R,m));return J(this,g)}resourceFromPath(g){return new h({portalItem:this,path:g})}toJSON(){var g=this.extent;g={accessInformation:this.accessInformation,categories:z.clone(this.categories),created:this.created?.getTime(),description:this.description,extent:g&&[[g.xmin,g.ymin],[g.xmax,g.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),
name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:z.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:z.clone(this.typeKeywords),url:this.url};return z.fixJson(g)}static fromJSON(g){if(!g)return null;if(g.declaredClass)throw Error("JSON object is already hydrated");return new x({sourceJSON:g})}_getPostQuery(){const g=this.toJSON();for(const J in g)"tags"===J&&null!==
g[J]&&(g[J]=g[J].join(", ")),"typeKeywords"===J&&null!==g[J]&&(g[J]=g[J].join(", ")),"extent"===J&&g[J]&&(g[J]=JSON.stringify(g[J]));return g}};c.__decorate([d.property({type:["private","shared","org","public"]})],C.prototype,"access",void 0);c.__decorate([d.property()],C.prototype,"accessInformation",void 0);c.__decorate([d.property({type:String})],C.prototype,"apiKey",void 0);c.__decorate([d.property({json:{read:{source:"appProxies"}}})],C.prototype,"applicationProxies",void 0);c.__decorate([d.property()],
C.prototype,"avgRating",void 0);c.__decorate([d.property()],C.prototype,"categories",void 0);c.__decorate([d.property({type:Date})],C.prototype,"created",void 0);c.__decorate([d.property()],C.prototype,"culture",void 0);c.__decorate([d.property()],C.prototype,"description",void 0);c.__decorate([d.property({readOnly:!0})],C.prototype,"displayName",null);c.__decorate([d.property({type:H})],C.prototype,"extent",void 0);c.__decorate([A.reader("extent")],C.prototype,"readExtent",null);c.__decorate([d.property()],
C.prototype,"groupCategories",void 0);c.__decorate([d.property({readOnly:!0})],C.prototype,"iconUrl",null);c.__decorate([d.property()],C.prototype,"id",void 0);c.__decorate([d.property({readOnly:!0})],C.prototype,"isLayer",null);c.__decorate([d.property({type:Boolean,readOnly:!0})],C.prototype,"isOrgItem",void 0);c.__decorate([d.property()],C.prototype,"itemControl",void 0);c.__decorate([d.property({readOnly:!0})],C.prototype,"itemPageUrl",null);c.__decorate([d.property({readOnly:!0})],C.prototype,
"itemUrl",null);c.__decorate([d.property()],C.prototype,"licenseInfo",void 0);c.__decorate([d.property({type:Date})],C.prototype,"modified",void 0);c.__decorate([d.property()],C.prototype,"name",void 0);c.__decorate([d.property()],C.prototype,"numComments",void 0);c.__decorate([d.property()],C.prototype,"numRatings",void 0);c.__decorate([d.property()],C.prototype,"numViews",void 0);c.__decorate([d.property()],C.prototype,"owner",void 0);c.__decorate([d.property()],C.prototype,"ownerFolder",void 0);
c.__decorate([d.property({type:p})],C.prototype,"portal",void 0);c.__decorate([d.property()],C.prototype,"screenshots",void 0);c.__decorate([d.property()],C.prototype,"size",void 0);c.__decorate([d.property()],C.prototype,"snippet",void 0);c.__decorate([d.property()],C.prototype,"sourceJSON",void 0);c.__decorate([d.property({type:String})],C.prototype,"sourceUrl",void 0);c.__decorate([d.property({type:String})],C.prototype,"spatialReference",void 0);c.__decorate([d.property()],C.prototype,"tags",
void 0);c.__decorate([d.property()],C.prototype,"thumbnail",void 0);c.__decorate([d.property({readOnly:!0})],C.prototype,"thumbnailUrl",null);c.__decorate([d.property()],C.prototype,"title",void 0);c.__decorate([d.property()],C.prototype,"type",void 0);c.__decorate([d.property()],C.prototype,"typeKeywords",void 0);c.__decorate([d.property({type:String,json:{read(g,J){M.has(J.type)&&(J=this.portal?.restUrl,g||=J&&this.id?`${J}/content/items/${this.id}/data`:null);return g}}})],C.prototype,"url",void 0);
c.__decorate([d.property({readOnly:!0})],C.prototype,"userItemUrl",null);return C=x=c.__decorate([r.subclass("esri.portal.PortalItem")],C)})},"esri/portal/PortalItemResource":function(){define("require ../chunks/tslib.es6 ../core/Accessor ../core/Error ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f,w,d,u,A){y=class extends y{constructor(r){super(r);
this.portalItem=null}normalizeCtorArgs(r){return r?.portalItem&&r.path?{...r,path:this._normalizePath(r.path,r.portalItem)}:r}set path(r){null!=r&&z.isAbsolute(r)?C.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",r)}_castPath(r){return this._normalizePath(r,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:
null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(r="json",H){const p=this.cdnUrl;if(null==p)throw new t("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(p,{responseType:r,query:{token:this.portalItem.apiKey},signal:H?.signal})}async update(r,H){const {addOrUpdateResources:p}=await new Promise((h,b)=>a(["./support/resourceUtils"],h,b));await p(this.portalItem,[{resource:this,
content:r,compress:H?.compress,access:H?.access}],"update",H);return this}hasPath(){return null!=this.path}_normalizePath(r,H){if(null==r)return r;r=r.replace(/^\/+/,"");null!=H&&z.isAbsolute(r)&&(r=z.makeRelative(r,H.itemUrl));return r?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,"")}};c.__decorate([f.property()],y.prototype,"portalItem",void 0);c.__decorate([f.property({type:String,value:null})],y.prototype,"path",null);c.__decorate([w.cast("path")],y.prototype,"_castPath",null);c.__decorate([f.property({type:String,
readOnly:!0})],y.prototype,"url",null);c.__decorate([f.property({type:String,readOnly:!0})],y.prototype,"cdnUrl",null);c.__decorate([f.property({type:String,readOnly:!0})],y.prototype,"itemRelativeUrl",null);return y=c.__decorate([A.subclass("esri.portal.PortalItemResource")],y)})},"esri/portal/PortalRating":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f){c=class extends c{constructor(w){super(w);this.rating=this.created=null}};a.__decorate([y.property()],c.prototype,"created",void 0);a.__decorate([y.property()],c.prototype,"rating",void 0);return c=a.__decorate([f.subclass("esri.portal.PortalRating")],c)})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../kernel","../core/urlUtils"],function(a,c,y){function t(k,x){var F=x?.url?.path;k&&F&&(k=y.makeAbsolute(k,F,{preserveProtocolRelative:!0}),x.portalItem&&
x.readResourcePaths&&(F=y.makeRelative(k,x.portalItem.itemUrl),null!=F&&h.test(F)&&x.readResourcePaths.push(x.portalItem.resourceFromPath(F).path)));return(k=A(k,x?.portal))&&p.test(k)?r(k):k}function C(k,x,F=a.MarkKeep.YES){k=k&&p.test(k)?H(k):k;if(null==k)return k;!y.isAbsolute(k)&&x?.blockedRelativeUrls&&x.blockedRelativeUrls.push(k);let M=y.makeAbsolute(k);if(x){var g=x.verifyItemRelativeUrls?.rootPath||x.url?.path;if(g){g=A(g,x.portal);const J=A(M,x.portal);M=y.makeRelative(J,g,g);null!=M&&M!==
J&&M!==k&&x.verifyItemRelativeUrls&&x.verifyItemRelativeUrls.writtenUrls.push(M)}}M=u(M,x?.portal);y.isAbsolute(M)&&(M=y.normalize(M));x?.resources&&x?.portalItem&&!y.isAbsolute(M)&&!y.isDataProtocol(M)&&F===a.MarkKeep.YES&&x.resources.toKeep.push({resource:x.portalItem.resourceFromPath(M),compress:!1});return M}function z(k,x,F){return t(k,F)}function f(k,x,F,M){k=C(k,M);void 0!==k&&(x[F]=k)}function w(k){return(k?.match(p)??null)?.[1]??null}function d(k){k=k?.match(p)??null;if(null==k)return null;
k=k[2];const x=k.lastIndexOf("/");if(-1===x){const {path:g,extension:J}=y.splitPathExtension(k);return{prefix:null,filename:g,extension:J}}const {path:F,extension:M}=y.splitPathExtension(k.slice(x+1));return{prefix:k.slice(0,x),filename:F,extension:M}}function u(k,x){return x&&!x.isPortal&&x.urlKey&&x.customBaseUrl?y.changeDomain(k,`${x.urlKey}.${x.customBaseUrl}`,x.portalHostname):k}function A(k,x){if(!x||x.isPortal||!x.urlKey||!x.customBaseUrl)return k;const F=`${x.urlKey}.${x.customBaseUrl}`,M=
y.getAppUrl();return y.hasSameOrigin(M,`${M.scheme}://${F}`)?y.changeDomain(k,x.portalHostname,F):y.changeDomain(k,F,x.portalHostname)}function r(k){if(!k)return k||null;k&&c.id&&!c.id.findCredential(k)&&(k=c.id._normalizeAGOLorgDomain(k),k=k.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),k=k.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),k=k.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com"));return k}function H(k){if(!k)return k||null;
k=k.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com");k=k.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com");(k=k.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"))&&c.id&&!c.id.findCredential(k)&&(k=c.id._normalizeAGOLorgDomain(k));return k}const p=/\/items\/([^\/]+)\/resources\/(.*)/,h=/^\.\/resources\//;a.MarkKeep=void 0;(function(k){k[k.YES=0]="YES";k[k.NO=1]="NO"})(a.MarkKeep||(a.MarkKeep={}));const b=Object.freeze(Object.defineProperty({__proto__:null,
get MarkKeep(){return a.MarkKeep},ensureMainOnlineDomain:u,fromCDNUrl:H,fromJSON:t,itemIdFromResourceUrl:w,prefixAndFilenameFromResourceUrl:d,read:z,toCDNUrl:r,toJSON:C,write:f},Symbol.toStringTag,{value:"Module"}));a.ensureMainOnlineDomain=u;a.fromCDNUrl=H;a.fromJSON=t;a.itemIdFromResourceUrl=w;a.persistableUrlUtils=b;a.prefixAndFilenameFromResourceUrl=d;a.read=z;a.toCDNUrl=r;a.toJSON=C;a.write=f})},"esri/support/basemapDefinitions":function(){define(["exports","../assets","../intl/messages"],function(a,
c,y){a.esriBasemapDefinitions={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",
url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/terrain.jpg")},
baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",
classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",
isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get "dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/gray-vector.jpg")},
baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],
id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/topo-vector.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},
"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-relief.jpg")},
baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
classic:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",
styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",
layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",
layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",
itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,
visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",
url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,
opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",
itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},
{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",
title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},
"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",
layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",
baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",
title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",
title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",
title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},
"arcgis-topographic":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return c.getAssetUrl("esri/images/basemap/oceans.jpg")},
title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",
title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},
"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",
styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},
{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},
"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",
title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",
title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",
showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",
title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",
title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}};a.getBasemapTitle=async function(t){if(t){var C=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):
t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,z=await y.fetchMessageBundle("esri/t9n/basemaps");return z[t]||z[C]}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/support/BasemapStyle":function(){define("../chunks/tslib.es6 ../core/Accessor ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../intl/locale".split(" "),function(a,c,y,t,C,z,f,w){const d=new Set("ar bs ca hr cs da nl en et fi fr de el he hu id it ja ko lv lt nb pl ro ru sr es sv th tr uk vi".split(" "));
c=class extends c{constructor(u){super(u);this.places=this.language=this.id=null;this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps";this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;var u=w.getLocale().toLowerCase();switch(u){case "pt-br":return"pt-BR";case "pt-pt":return"pt-PT";case "zh-cn":return"zh-CN";case "zh-hk":return"zh-HK";case "zh-tw":return"zh-TW"}u=w.getLanguage(u);return"pt"===u?"pt-BR":u&&d.has(u)?u:"global"}};
a.__decorate([y.property()],c.prototype,"id",void 0);a.__decorate([y.property()],c.prototype,"language",void 0);a.__decorate([y.property()],c.prototype,"places",void 0);a.__decorate([y.property()],c.prototype,"serviceUrl",void 0);a.__decorate([y.property()],c.prototype,"worldview",void 0);return c=a.__decorate([f.subclass("esri.support.BasemapStyle")],c)})},"esri/webdoc/support/writeUtils":function(){define("exports ../../core/Error ../../core/lang ../../core/object ../../core/accessorSupport/extensions/serializableProperty/writer ../../layers/support/layerUtils".split(" "),
function(a,c,y,t,C,z){function f(u,A){"maxScale"in u&&(A.maxScale=C.numberToJSON(u.maxScale)??void 0);"minScale"in u&&(A.minScale=C.numberToJSON(u.minScale)??void 0)}const w=new Set("bing-maps imagery imagery-tile map-image open-street-map tile unknown unsupported vector-tile web-tile wms wmts".split(" ")),d=new Set("csv feature geo-rss geojson group imagery imagery-tile kml map-image map-notes media ogc-feature oriented-imagery route stream subtype-group tile unknown unsupported vector-tile web-tile wfs wms wmts".split(" "));
a.disableRestrictedWriting=function(u){w.add(u);d.add(u)};a.enableRestrictedWriting=function(u){w.delete(u);d.delete(u)};a.getLayerJSON=function(u,A,r){if(!u.persistenceEnabled)return null;if(!("write"in u&&u.write))return r?.messages&&r.messages.push(new c("layer:unsupported",`Layers (${u.title}, ${u.id}) of type '${u.declaredClass}' cannot be persisted`,{layer:u})),null;if(z.isFeatureCollectionLayer(u)&&!u.isTable)A=u.resourceInfo;else{if(r.restrictedWebMapWriting){var H="basemap"===r.layerContainerType?
w:"operational-layers"===r.layerContainerType?d:null;H=null!=H?H.has(u.type)&&!z.isFeatureCollectionLayer(u):!0}else H=!0;if(H)return A={},u.write(A,r)?A:null}if(null!=A){A=y.clone(A);if(r=A)z.isFeatureCollectionLayer(u)?(H=t.getDeepValue("featureCollection.layers",r)?.[0]?.layerDefinition)&&f(u,H):"group"!==u.type&&f(u,r);if(r&&(r.id=u.id,"blendMode"in u&&(r.blendMode=u.blendMode,"normal"===r.blendMode&&delete r.blendMode),r.opacity=C.numberToJSON(u.opacity)??void 0,r.title=u.title||"Layer",r.visibility=
u.visible,"legendEnabled"in u&&"wmts"!==u.type))if(z.isFeatureCollectionLayer(u)){if(r=r.featureCollection)r.showLegend=u.legendEnabled}else r.showLegend=u.legendEnabled}return A};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/layerUtils":function(){define(["exports","../../kernel","../../request"],function(a,c,y){function t(z){return"scene"===z?.type}function C(z){z=z?.type;return"imagery-tile"===z||"tile"===z||"open-street-map"===z||"vector-tile"===z||"web-tile"===
z||"wmts"===z}a.getEffectiveEditingEnabled=function(z){a:if("editingEnabled"in z)switch(z.type){case "csv":case "feature":case "geojson":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":var f=!0;break a;default:f=!1}else f=!1;return f?"effectiveEditingEnabled"in z?z.effectiveEditingEnabled:z.editingEnabled:!1};a.getEffectiveLayerCapabilities=function(z){a:if("capabilities"in z)switch(z.type){case "catalog":case "csv":case "feature":case "geojson":case "imagery":case "knowledge-graph-sublayer":case "ogc-feature":case "oriented-imagery":case "scene":case "subtype-group":case "subtype-sublayer":case "wfs":var f=
!0;break a;default:f=!1}else f=!1;return f?"effectiveCapabilities"in z?z.effectiveCapabilities:z.capabilities:null};a.getOwningPortalUrl=async function(z,f){var w=c.id?.findServerInfo(z);if(null!=w?.currentVersion)return w.owningSystemUrl||null;w=z.toLowerCase().indexOf("/rest/services");if(-1===w)return null;z=`${z.substring(0,w)}/rest/info`;({data:f}=await y(z,{query:{f:"json"},responseType:"json",signal:null!=f?f.signal:null}));return f?.owningSystemUrl||null};a.getTileMaxtrixSetFromActiveLayer=
function(z){if(z.activeLayer){const f=z.activeLayer.tileMatrixSet;if(f)return f;if(z=z.activeLayer.tileMatrixSets)return z}return null};a.isBaseLayer=function(z){return null!=z?.parent&&"declaredClass"in z.parent&&"esri.Basemap"===z.parent.declaredClass&&z.parent.baseLayers.includes(z)};a.isBasemap3DSupportedLayer=function(z){return C(z)||t(z)};a.isBasemapSupportedTiledLayer=C;a.isFeatureCollectionLayer=function(z){return"feature"===z?.type&&!z.url&&"memory"===z.source?.type};a.isFeatureLayer=function(z){return null!=
z&&"object"===typeof z&&"type"in z&&"feature"===z.type};a.isFeatureServiceLayer=function(z){return"feature"===z?.type&&"feature-layer"===z.source?.type};a.isGraphicsLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"graphics"===z.type};a.isGroupLayer=function(z){return null!=z&&"type"in z&&"group"===z.type};a.isImageryTileLayer=function(z){return"imagery-tile"===z?.type};a.isIntegratedMeshLayer=function(z){return"integrated-mesh"===z||"integrated-mesh-3dtiles"===z};a.isIntegratedMeshOperationalLayer=
function(z){return"IntegratedMeshLayer"===z||"IntegratedMesh3DTilesLayer"===z};a.isKnowledgeGraphLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"knowledge-graph"===z.type&&"layers"in z};a.isLayerWithFeatureLayerSource=function(z){return("feature"===z?.type||"subtype-group"===z?.type)&&"feature-layer"===z.source?.type};a.isLinkChartLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"link-chart"===z.type&&"layers"in z};a.isMapNotesLayer=function(z){return null!=z&&
"object"===typeof z&&"type"in z&&"map-notes"===z.type&&"sublayers"in z};a.isSceneLayer=t;a.isSceneServiceLayer=function(z){z=z?.type;return"building-scene"===z||"integrated-mesh"===z||"point-cloud"===z||"scene"===z};a.isSubtypeGroupLayer=function(z){return null!=z&&"object"===typeof z&&"type"in z&&"subtype-group"===z.type&&"sublayers"in z};a.isTable=function(z){return null!=z&&"object"===typeof z&&"isTable"in z&&!!z.isTable};a.isTiledLayer=function(z){z=z?.type;return"base-tile"===z||"tile"===z||
"elevation"===z||"imagery-tile"===z||"base-elevation"===z||"open-street-map"===z||"wcs"===z||"web-tile"===z||"wmts"===z||"vector-tile"===z};a.isVoxelLayer=function(z){return"voxel"===z?.type};a.sceneServiceLayerTypeToClassName={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};a.serializeLayerDefinitions=function(z){const f=/[:;]/,w=[];let d=!1;if(z&&(z.forEach((u,A)=>{w.push([A,u]);!d&&f.test(u)&&(d=!0)}),0<
w.length)){if(d){const u={};w.forEach(A=>{u[A[0]]=A[1]});z=JSON.stringify(u)}else{const u=[];w.forEach(A=>{u.push(A[0]+":"+A[1])});z=u.join(";")}return z}return null};a.serializeTimeOptions=function(z){if(z){var f=[];z.forEach((w,d)=>{f.push('"'+d+'":'+JSON.stringify(w))});if(f.length)return"{"+f.join(",")+"}"}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/utils":function(){define(["exports","./effects"],function(a,c){a.canInterpolateEffects=function(y,t){const C=
y.length>t.length?y:t;return(y.length>t.length?t:y).every((z,f)=>z.type===C[f].type)};a.effectEquals=function(y,t){y=JSON.stringify(y??null);t=JSON.stringify(t??null);return y===t};a.isEffectFunctions=function(y){return(y=y[0])?"type"in y:!1};a.normalizeEffects=function(y,t){const C=y.length>t.length?y:t;y=y.length>t.length?t:y;for(t=y.length;t<C.length;t++)y.push(c.createEffectWithInitialValues(C[t]))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/effects":function(){define(["exports",
"../../colorUtils","../../core/screenUtils","../../core/libs/gl-matrix-2/factories/mat4f32","./colorMatrixFunctions"],function(a,c,y,t,C){function z(p,h,b){return p+(h-p)*b}function f(p){return Math.round(1E3*y.px2pt(p))/1E3}class w{constructor(p,h,b){this.strength=p;this.radius=h;this.threshold=b;this.type="bloom"}interpolate(p,h,b){this.strength=z(p.strength,h.strength,b);this.radius=z(p.radius,h.radius,b);this.threshold=z(p.threshold,h.threshold,b)}clone(){return new w(this.strength,this.radius,
this.threshold)}toJSON(){return{type:"bloom",radius:f(this.radius),strength:this.strength,threshold:this.threshold}}}class d{constructor(p){this.radius=p;this.type="blur"}interpolate(p,h,b){this.radius=Math.round(z(p.radius,h.radius,b))}clone(){return new d(this.radius)}toJSON(){return{type:"blur",radius:f(this.radius)}}}class u{constructor(p,h){this.type=p;this.amount=h;if("invert"===this.type||"grayscale"===this.type||"sepia"===this.type)this.amount=Math.min(this.amount,1)}get colorMatrix(){this._colorMatrix||
this._updateMatrix();return this._colorMatrix}interpolate(p,h,b){this.amount=z(p.amount,h.amount,b);this._updateMatrix()}clone(){return new u(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const p=this._colorMatrix||t.create();switch(this.type){case "brightness":this._colorMatrix=C.brightness(p,this.amount);break;case "contrast":this._colorMatrix=C.contrast(p,this.amount);break;case "grayscale":this._colorMatrix=C.grayscale(p,this.amount);break;case "invert":this._colorMatrix=
C.invert(p,this.amount);break;case "saturate":this._colorMatrix=C.saturate(p,this.amount);break;case "sepia":this._colorMatrix=C.sepia(p,this.amount)}}}class A{constructor(p,h,b,k){this.offsetX=p;this.offsetY=h;this.blurRadius=b;this.color=k;this.type="drop-shadow"}interpolate(p,h,b){this.offsetX=z(p.offsetX,h.offsetX,b);this.offsetY=z(p.offsetY,h.offsetY,b);this.blurRadius=z(p.blurRadius,h.blurRadius,b);this.color[0]=Math.round(z(p.color[0],h.color[0],b));this.color[1]=Math.round(z(p.color[1],h.color[1],
b));this.color[2]=Math.round(z(p.color[2],h.color[2],b));this.color[3]=z(p.color[3],h.color[3],b)}clone(){return new A(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const p=[...this.color];p[3]*=255;return{type:"drop-shadow",xoffset:f(this.offsetX),yoffset:f(this.offsetY),blurRadius:f(this.blurRadius),color:p}}}class r{constructor(p){this.angle=p;this.type="hue-rotate"}get colorMatrix(){this._colorMatrix||this._updateMatrix();return this._colorMatrix}interpolate(p,h,b){this.angle=
z(p.angle,h.angle,b);this._updateMatrix()}clone(){return new r(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const p=this._colorMatrix||t.create();this._colorMatrix=C.rotateHue(p,this.angle)}}class H{constructor(p){this.amount=p;this.type="opacity";this.amount=Math.min(this.amount,1)}interpolate(p,h,b){this.amount=z(p.amount,h.amount,b)}clone(){return new H(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}a.BloomEffect=w;a.BlurEffect=d;a.ColorMatrixEffect=
u;a.DropShadowEffect=A;a.HueRotateEffect=r;a.OpacityEffect=H;a.createEffectWithInitialValues=function(p){switch(p.type){case "grayscale":case "sepia":case "invert":return new u(p.type,0);case "saturate":case "brightness":case "contrast":return new u(p.type,1);case "opacity":return new H(1);case "hue-rotate":return new r(0);case "blur":return new d(0);case "drop-shadow":return new A(0,0,0,[...c.getNamedColor("transparent")]);case "bloom":return new w(0,0,1)}};Object.defineProperty(a,Symbol.toStringTag,
{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["exports"],function(a){function c(){const w=new Float32Array(16);w[0]=1;w[5]=1;w[10]=1;w[15]=1;return w}function y(w){const d=new Float32Array(16);d[0]=w[0];d[1]=w[1];d[2]=w[2];d[3]=w[3];d[4]=w[4];d[5]=w[5];d[6]=w[6];d[7]=w[7];d[8]=w[8];d[9]=w[9];d[10]=w[10];d[11]=w[11];d[12]=w[12];d[13]=w[13];d[14]=w[14];d[15]=w[15];return d}function t(w,d,u,A,r,H,p,h,b,k,x,F,M,g,J,R){const m=new Float32Array(16);m[0]=w;m[1]=d;
m[2]=u;m[3]=A;m[4]=r;m[5]=H;m[6]=p;m[7]=h;m[8]=b;m[9]=k;m[10]=x;m[11]=F;m[12]=M;m[13]=g;m[14]=J;m[15]=R;return m}function C(w,d){return new Float32Array(w,d,16)}const z=c(),f=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:z,clone:y,create:c,createView:C,fromValues:t},Symbol.toStringTag,{value:"Module"}));a.IDENTITY=z;a.clone=y;a.create=c;a.createView=C;a.fromValues=t;a.mat4f32=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/effects/colorMatrixFunctions":function(){define(["exports",
"../../core/libs/gl-matrix-2/math/mat4"],function(a,c){a.brightness=(y,t)=>{y=c.set(y,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return c.transpose(y,y)};a.contrast=(y,t)=>{y=c.set(y,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return c.transpose(y,y)};a.grayscale=(y,t)=>{t=1-t;y=c.set(y,.2126+.7874*t,.7152-.7152*t,.0722-.0722*t,0,.2126-.2126*t,.7152+.2848*t,.0722-.0722*t,0,.2126-.2126*t,.7152-.7152*t,.0722+.9278*t,0,0,0,0,1);return c.transpose(y,y)};a.invert=(y,t)=>{const C=1-2*t;y=c.set(y,C,0,0,t,0,
C,0,t,0,0,C,t,0,0,0,1);return c.transpose(y,y)};a.rotateHue=(y,t)=>{const C=Math.sin(t*Math.PI/180);t=Math.cos(t*Math.PI/180);y=c.set(y,.213+.787*t-.213*C,.715-.715*t-.715*C,.072-.072*t+.928*C,0,.213-.213*t+.143*C,.715+.285*t+.14*C,.072-.072*t-.283*C,0,.213-.213*t-.787*C,.715-.715*t+.715*C,.072+.928*t+.072*C,0,0,0,0,1);return c.transpose(y,y)};a.saturate=(y,t)=>{y=c.set(y,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return c.transpose(y,
y)};a.sepia=(y,t)=>{t=1-t;y=c.set(y,.393+.607*t,.769-.769*t,.189-.189*t,0,.349-.349*t,.686+.314*t,.168-.168*t,0,.272-.272*t,.534-.534*t,.131+.869*t,0,0,0,0,1);return c.transpose(y,y)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["exports","../factories/vec3f64","./common"],function(a,c,y){function t(n,L){n[0]=L[0];n[1]=L[1];n[2]=L[2];n[3]=L[3];n[4]=L[4];n[5]=L[5];n[6]=L[6];n[7]=L[7];n[8]=L[8];n[9]=L[9];n[10]=L[10];n[11]=
L[11];n[12]=L[12];n[13]=L[13];n[14]=L[14];n[15]=L[15];return n}function C(n,L,X,aa,ha,I,O,Q,W,Z,ba,da,ia,ka,ra,oa,qa){n[0]=L;n[1]=X;n[2]=aa;n[3]=ha;n[4]=I;n[5]=O;n[6]=Q;n[7]=W;n[8]=Z;n[9]=ba;n[10]=da;n[11]=ia;n[12]=ka;n[13]=ra;n[14]=oa;n[15]=qa;return n}function z(n){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function f(n,L){if(n===L){const X=L[1],aa=L[2],ha=L[3],I=L[6],O=L[7],Q=L[11];n[1]=L[4];n[2]=L[8];n[3]=L[12];
n[4]=X;n[6]=L[9];n[7]=L[13];n[8]=aa;n[9]=I;n[11]=L[14];n[12]=ha;n[13]=O;n[14]=Q}else n[0]=L[0],n[1]=L[4],n[2]=L[8],n[3]=L[12],n[4]=L[1],n[5]=L[5],n[6]=L[9],n[7]=L[13],n[8]=L[2],n[9]=L[6],n[10]=L[10],n[11]=L[14],n[12]=L[3],n[13]=L[7],n[14]=L[11],n[15]=L[15];return n}function w(n,L){d(n,L)||z(n);return n}function d(n,L){const X=L[0],aa=L[1],ha=L[2],I=L[3],O=L[4],Q=L[5],W=L[6],Z=L[7],ba=L[8],da=L[9],ia=L[10],ka=L[11],ra=L[12],oa=L[13],qa=L[14];L=L[15];const Ca=X*Q-aa*O,va=X*W-ha*O,Ba=X*Z-I*O,Aa=aa*W-
ha*Q,ya=aa*Z-I*Q,Ha=ha*Z-I*W,Pa=ba*oa-da*ra,Ya=ba*qa-ia*ra,Wa=ba*L-ka*ra,Ja=da*qa-ia*oa,Ka=da*L-ka*oa,ja=ia*L-ka*qa;let Qa=Ca*ja-va*Ka+Ba*Ja+Aa*Wa-ya*Ya+Ha*Pa;if(!Qa)return null;Qa=1/Qa;n[0]=(Q*ja-W*Ka+Z*Ja)*Qa;n[1]=(ha*Ka-aa*ja-I*Ja)*Qa;n[2]=(oa*Ha-qa*ya+L*Aa)*Qa;n[3]=(ia*ya-da*Ha-ka*Aa)*Qa;n[4]=(W*Wa-O*ja-Z*Ya)*Qa;n[5]=(X*ja-ha*Wa+I*Ya)*Qa;n[6]=(qa*Ba-ra*Ha-L*va)*Qa;n[7]=(ba*Ha-ia*Ba+ka*va)*Qa;n[8]=(O*Ka-Q*Wa+Z*Pa)*Qa;n[9]=(aa*Wa-X*Ka-I*Pa)*Qa;n[10]=(ra*ya-oa*Ba+L*Ca)*Qa;n[11]=(da*Ba-ba*ya-ka*Ca)*
Qa;n[12]=(Q*Ya-O*Ja-W*Pa)*Qa;n[13]=(X*Ja-aa*Ya+ha*Pa)*Qa;n[14]=(oa*va-ra*Aa-qa*Ca)*Qa;n[15]=(ba*Aa-da*va+ia*Ca)*Qa;return n}function u(n,L){const X=L[0],aa=L[1],ha=L[2],I=L[3],O=L[4],Q=L[5],W=L[6],Z=L[7],ba=L[8],da=L[9],ia=L[10],ka=L[11],ra=L[12],oa=L[13],qa=L[14];L=L[15];n[0]=Q*(ia*L-ka*qa)-da*(W*L-Z*qa)+oa*(W*ka-Z*ia);n[1]=-(aa*(ia*L-ka*qa)-da*(ha*L-I*qa)+oa*(ha*ka-I*ia));n[2]=aa*(W*L-Z*qa)-Q*(ha*L-I*qa)+oa*(ha*Z-I*W);n[3]=-(aa*(W*ka-Z*ia)-Q*(ha*ka-I*ia)+da*(ha*Z-I*W));n[4]=-(O*(ia*L-ka*qa)-ba*
(W*L-Z*qa)+ra*(W*ka-Z*ia));n[5]=X*(ia*L-ka*qa)-ba*(ha*L-I*qa)+ra*(ha*ka-I*ia);n[6]=-(X*(W*L-Z*qa)-O*(ha*L-I*qa)+ra*(ha*Z-I*W));n[7]=X*(W*ka-Z*ia)-O*(ha*ka-I*ia)+ba*(ha*Z-I*W);n[8]=O*(da*L-ka*oa)-ba*(Q*L-Z*oa)+ra*(Q*ka-Z*da);n[9]=-(X*(da*L-ka*oa)-ba*(aa*L-I*oa)+ra*(aa*ka-I*da));n[10]=X*(Q*L-Z*oa)-O*(aa*L-I*oa)+ra*(aa*Z-I*Q);n[11]=-(X*(Q*ka-Z*da)-O*(aa*ka-I*da)+ba*(aa*Z-I*Q));n[12]=-(O*(da*qa-ia*oa)-ba*(Q*qa-W*oa)+ra*(Q*ia-W*da));n[13]=X*(da*qa-ia*oa)-ba*(aa*qa-ha*oa)+ra*(aa*ia-ha*da);n[14]=-(X*(Q*
qa-W*oa)-O*(aa*qa-ha*oa)+ra*(aa*W-ha*Q));n[15]=X*(Q*ia-W*da)-O*(aa*ia-ha*da)+ba*(aa*W-ha*Q);return n}function A(n){const L=n[0],X=n[1],aa=n[2],ha=n[3],I=n[4],O=n[5],Q=n[6],W=n[7],Z=n[8],ba=n[9],da=n[10],ia=n[11],ka=n[12],ra=n[13],oa=n[14];n=n[15];return(L*O-X*I)*(da*n-ia*oa)-(L*Q-aa*I)*(ba*n-ia*ra)+(L*W-ha*I)*(ba*oa-da*ra)+(X*Q-aa*O)*(Z*n-ia*ka)-(X*W-ha*O)*(Z*oa-da*ka)+(aa*W-ha*Q)*(Z*ra-ba*ka)}function r(n,L,X){const aa=L[0],ha=L[1],I=L[2],O=L[3],Q=L[4],W=L[5],Z=L[6],ba=L[7],da=L[8],ia=L[9],ka=L[10],
ra=L[11],oa=L[12],qa=L[13],Ca=L[14];L=L[15];let va=X[0],Ba=X[1],Aa=X[2],ya=X[3];n[0]=va*aa+Ba*Q+Aa*da+ya*oa;n[1]=va*ha+Ba*W+Aa*ia+ya*qa;n[2]=va*I+Ba*Z+Aa*ka+ya*Ca;n[3]=va*O+Ba*ba+Aa*ra+ya*L;va=X[4];Ba=X[5];Aa=X[6];ya=X[7];n[4]=va*aa+Ba*Q+Aa*da+ya*oa;n[5]=va*ha+Ba*W+Aa*ia+ya*qa;n[6]=va*I+Ba*Z+Aa*ka+ya*Ca;n[7]=va*O+Ba*ba+Aa*ra+ya*L;va=X[8];Ba=X[9];Aa=X[10];ya=X[11];n[8]=va*aa+Ba*Q+Aa*da+ya*oa;n[9]=va*ha+Ba*W+Aa*ia+ya*qa;n[10]=va*I+Ba*Z+Aa*ka+ya*Ca;n[11]=va*O+Ba*ba+Aa*ra+ya*L;va=X[12];Ba=X[13];Aa=X[14];
ya=X[15];n[12]=va*aa+Ba*Q+Aa*da+ya*oa;n[13]=va*ha+Ba*W+Aa*ia+ya*qa;n[14]=va*I+Ba*Z+Aa*ka+ya*Ca;n[15]=va*O+Ba*ba+Aa*ra+ya*L;return n}function H(n,L,X){const aa=X[0],ha=X[1];X=X[2];if(L===n)n[12]=L[0]*aa+L[4]*ha+L[8]*X+L[12],n[13]=L[1]*aa+L[5]*ha+L[9]*X+L[13],n[14]=L[2]*aa+L[6]*ha+L[10]*X+L[14],n[15]=L[3]*aa+L[7]*ha+L[11]*X+L[15];else{const I=L[0],O=L[1],Q=L[2],W=L[3],Z=L[4],ba=L[5],da=L[6],ia=L[7],ka=L[8],ra=L[9],oa=L[10],qa=L[11];n[0]=I;n[1]=O;n[2]=Q;n[3]=W;n[4]=Z;n[5]=ba;n[6]=da;n[7]=ia;n[8]=ka;
n[9]=ra;n[10]=oa;n[11]=qa;n[12]=I*aa+Z*ha+ka*X+L[12];n[13]=O*aa+ba*ha+ra*X+L[13];n[14]=Q*aa+da*ha+oa*X+L[14];n[15]=W*aa+ia*ha+qa*X+L[15]}return n}function p(n,L,X){const aa=X[0],ha=X[1];X=X[2];n[0]=L[0]*aa;n[1]=L[1]*aa;n[2]=L[2]*aa;n[3]=L[3]*aa;n[4]=L[4]*ha;n[5]=L[5]*ha;n[6]=L[6]*ha;n[7]=L[7]*ha;n[8]=L[8]*X;n[9]=L[9]*X;n[10]=L[10]*X;n[11]=L[11]*X;n[12]=L[12];n[13]=L[13];n[14]=L[14];n[15]=L[15];return n}function h(n,L,X,aa){let ha=aa[0],I=aa[1];aa=aa[2];let O=Math.sqrt(ha*ha+I*I+aa*aa);var Q=void 0,
W=void 0;let Z=void 0,ba=void 0,da=void 0,ia=void 0,ka=void 0,ra=void 0,oa=void 0,qa=void 0,Ca=void 0,va=void 0,Ba=void 0,Aa=void 0,ya=void 0,Ha=void 0,Pa=void 0,Ya=void 0,Wa=void 0,Ja=void 0,Ka=void 0,ja=void 0;W=Q=void 0;if(O<y.getEpsilon())return null;O=1/O;ha*=O;I*=O;aa*=O;Q=Math.sin(X);W=Math.cos(X);Z=1-W;ba=L[0];da=L[1];ia=L[2];ka=L[3];ra=L[4];oa=L[5];qa=L[6];Ca=L[7];va=L[8];Ba=L[9];Aa=L[10];ya=L[11];Ha=ha*ha*Z+W;Pa=I*ha*Z+aa*Q;Ya=aa*ha*Z-I*Q;Wa=ha*I*Z-aa*Q;Ja=I*I*Z+W;Ka=aa*I*Z+ha*Q;ja=ha*aa*
Z+I*Q;Q=I*aa*Z-ha*Q;W=aa*aa*Z+W;n[0]=ba*Ha+ra*Pa+va*Ya;n[1]=da*Ha+oa*Pa+Ba*Ya;n[2]=ia*Ha+qa*Pa+Aa*Ya;n[3]=ka*Ha+Ca*Pa+ya*Ya;n[4]=ba*Wa+ra*Ja+va*Ka;n[5]=da*Wa+oa*Ja+Ba*Ka;n[6]=ia*Wa+qa*Ja+Aa*Ka;n[7]=ka*Wa+Ca*Ja+ya*Ka;n[8]=ba*ja+ra*Q+va*W;n[9]=da*ja+oa*Q+Ba*W;n[10]=ia*ja+qa*Q+Aa*W;n[11]=ka*ja+Ca*Q+ya*W;L!==n&&(n[12]=L[12],n[13]=L[13],n[14]=L[14],n[15]=L[15]);return n}function b(n,L,X){const aa=Math.sin(X);X=Math.cos(X);const ha=L[4],I=L[5],O=L[6],Q=L[7],W=L[8],Z=L[9],ba=L[10],da=L[11];L!==n&&(n[0]=
L[0],n[1]=L[1],n[2]=L[2],n[3]=L[3],n[12]=L[12],n[13]=L[13],n[14]=L[14],n[15]=L[15]);n[4]=ha*X+W*aa;n[5]=I*X+Z*aa;n[6]=O*X+ba*aa;n[7]=Q*X+da*aa;n[8]=W*X-ha*aa;n[9]=Z*X-I*aa;n[10]=ba*X-O*aa;n[11]=da*X-Q*aa;return n}function k(n,L,X){const aa=Math.sin(X);X=Math.cos(X);const ha=L[0],I=L[1],O=L[2],Q=L[3],W=L[8],Z=L[9],ba=L[10],da=L[11];L!==n&&(n[4]=L[4],n[5]=L[5],n[6]=L[6],n[7]=L[7],n[12]=L[12],n[13]=L[13],n[14]=L[14],n[15]=L[15]);n[0]=ha*X-W*aa;n[1]=I*X-Z*aa;n[2]=O*X-ba*aa;n[3]=Q*X-da*aa;n[8]=ha*aa+W*
X;n[9]=I*aa+Z*X;n[10]=O*aa+ba*X;n[11]=Q*aa+da*X;return n}function x(n,L,X){const aa=Math.sin(X);X=Math.cos(X);const ha=L[0],I=L[1],O=L[2],Q=L[3],W=L[4],Z=L[5],ba=L[6],da=L[7];L!==n&&(n[8]=L[8],n[9]=L[9],n[10]=L[10],n[11]=L[11],n[12]=L[12],n[13]=L[13],n[14]=L[14],n[15]=L[15]);n[0]=ha*X+W*aa;n[1]=I*X+Z*aa;n[2]=O*X+ba*aa;n[3]=Q*X+da*aa;n[4]=W*X-ha*aa;n[5]=Z*X-I*aa;n[6]=ba*X-O*aa;n[7]=da*X-Q*aa;return n}function F(n,L){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=
0;n[12]=L[0];n[13]=L[1];n[14]=L[2];n[15]=1;return n}function M(n,L){n[0]=L[0];n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=L[1];n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=L[2];n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function g(n,L,X){if(0===L)return z(n);let aa=X[0],ha=X[1];X=X[2];let I=Math.sqrt(aa*aa+ha*ha+X*X),O=void 0,Q=void 0,W=void 0;if(I<y.getEpsilon())return null;I=1/I;aa*=I;ha*=I;X*=I;O=Math.sin(L);Q=Math.cos(L);W=1-Q;n[0]=aa*aa*W+Q;n[1]=ha*aa*W+X*O;n[2]=X*aa*W-ha*O;n[3]=0;n[4]=aa*ha*W-X*O;n[5]=ha*ha*
W+Q;n[6]=X*ha*W+aa*O;n[7]=0;n[8]=aa*X*W+ha*O;n[9]=ha*X*W-aa*O;n[10]=X*X*W+Q;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function J(n,L){const X=Math.sin(L);L=Math.cos(L);n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=L;n[6]=X;n[7]=0;n[8]=0;n[9]=-X;n[10]=L;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function R(n,L){const X=Math.sin(L);L=Math.cos(L);n[0]=L;n[1]=0;n[2]=-X;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=X;n[9]=0;n[10]=L;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function m(n,L){const X=
Math.sin(L);L=Math.cos(L);n[0]=L;n[1]=X;n[2]=0;n[3]=0;n[4]=-X;n[5]=L;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function v(n,L,X){var aa=L[0],ha=L[1],I=L[2],O=L[3],Q=aa+aa,W=ha+ha;const Z=I+I;L=aa*Q;const ba=aa*W;aa*=Z;const da=ha*W;ha*=Z;I*=Z;Q*=O;W*=O;O*=Z;n[0]=1-(da+I);n[1]=ba+O;n[2]=aa-W;n[3]=0;n[4]=ba-O;n[5]=1-(L+I);n[6]=ha+Q;n[7]=0;n[8]=aa+W;n[9]=ha-Q;n[10]=1-(L+da);n[11]=0;n[12]=X[0];n[13]=X[1];n[14]=X[2];n[15]=1;return n}function E(n,L){const X=Va,
aa=-L[0],ha=-L[1],I=-L[2],O=L[3],Q=L[4],W=L[5],Z=L[6],ba=L[7],da=aa*aa+ha*ha+I*I+O*O;0<da?(X[0]=2*(Q*O+ba*aa+W*I-Z*ha)/da,X[1]=2*(W*O+ba*ha+Z*aa-Q*I)/da,X[2]=2*(Z*O+ba*I+Q*ha-W*aa)/da):(X[0]=2*(Q*O+ba*aa+W*I-Z*ha),X[1]=2*(W*O+ba*ha+Z*aa-Q*I),X[2]=2*(Z*O+ba*I+Q*ha-W*aa));v(n,L,X);return n}function N(n,L){n[0]=L[12];n[1]=L[13];n[2]=L[14];return n}function l(n,L){const X=L[0],aa=L[1],ha=L[2],I=L[4],O=L[5],Q=L[6],W=L[8],Z=L[9];L=L[10];n[0]=Math.sqrt(X*X+aa*aa+ha*ha);n[1]=Math.sqrt(I*I+O*O+Q*Q);n[2]=Math.sqrt(W*
W+Z*Z+L*L);return n}function B(n,L){const X=L[0]+L[5]+L[10];let aa=0;0<X?(aa=2*Math.sqrt(X+1),n[3]=.25*aa,n[0]=(L[6]-L[9])/aa,n[1]=(L[8]-L[2])/aa,n[2]=(L[1]-L[4])/aa):L[0]>L[5]&&L[0]>L[10]?(aa=2*Math.sqrt(1+L[0]-L[5]-L[10]),n[3]=(L[6]-L[9])/aa,n[0]=.25*aa,n[1]=(L[1]+L[4])/aa,n[2]=(L[8]+L[2])/aa):L[5]>L[10]?(aa=2*Math.sqrt(1+L[5]-L[0]-L[10]),n[3]=(L[8]-L[2])/aa,n[0]=(L[1]+L[4])/aa,n[1]=.25*aa,n[2]=(L[6]+L[9])/aa):(aa=2*Math.sqrt(1+L[10]-L[0]-L[5]),n[3]=(L[1]-L[4])/aa,n[0]=(L[8]+L[2])/aa,n[1]=(L[6]+
L[9])/aa,n[2]=.25*aa);return n}function D(n,L,X,aa){var ha=L[0],I=L[1],O=L[2],Q=L[3],W=ha+ha,Z=I+I,ba=O+O;L=ha*W;const da=ha*Z;ha*=ba;const ia=I*Z;I*=ba;O*=ba;W*=Q;Z*=Q;Q*=ba;ba=aa[0];const ka=aa[1];aa=aa[2];n[0]=(1-(ia+O))*ba;n[1]=(da+Q)*ba;n[2]=(ha-Z)*ba;n[3]=0;n[4]=(da-Q)*ka;n[5]=(1-(L+O))*ka;n[6]=(I+W)*ka;n[7]=0;n[8]=(ha+Z)*aa;n[9]=(I-W)*aa;n[10]=(1-(L+ia))*aa;n[11]=0;n[12]=X[0];n[13]=X[1];n[14]=X[2];n[15]=1;return n}function G(n,L,X,aa,ha){var I=L[0],O=L[1],Q=L[2],W=L[3],Z=I+I,ba=O+O,da=Q+Q;
L=I*Z;var ia=I*ba,ka=I*da;I=O*ba;O*=da;var ra=Q*da;Q=W*Z;ba*=W;const oa=W*da;var qa=aa[0],Ca=aa[1];da=aa[2];aa=ha[0];W=ha[1];ha=ha[2];Z=(1-(I+ra))*qa;const va=(ia+oa)*qa;qa*=ka-ba;ia=(ia-oa)*Ca;ra=(1-(L+ra))*Ca;Ca*=O+Q;ka=(ka+ba)*da;O=(O-Q)*da;L=(1-(L+I))*da;n[0]=Z;n[1]=va;n[2]=qa;n[3]=0;n[4]=ia;n[5]=ra;n[6]=Ca;n[7]=0;n[8]=ka;n[9]=O;n[10]=L;n[11]=0;n[12]=X[0]+aa-(Z*aa+ia*W+ka*ha);n[13]=X[1]+W-(va*aa+ra*W+O*ha);n[14]=X[2]+ha-(qa*aa+Ca*W+L*ha);n[15]=1;return n}function S(n,L){var X=L[0],aa=L[1],ha=
L[2];L=L[3];var I=X+X,O=aa+aa;const Q=ha+ha;X*=I;const W=aa*I;aa*=O;const Z=ha*I,ba=ha*O;ha*=Q;I*=L;O*=L;L*=Q;n[0]=1-aa-ha;n[1]=W+L;n[2]=Z-O;n[3]=0;n[4]=W-L;n[5]=1-X-ha;n[6]=ba+I;n[7]=0;n[8]=Z+O;n[9]=ba-I;n[10]=1-X-aa;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}function P(n,L,X,aa,ha,I,O){const Q=1/(X-L),W=1/(ha-aa),Z=1/(I-O);n[0]=2*I*Q;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=2*I*W;n[6]=0;n[7]=0;n[8]=(X+L)*Q;n[9]=(ha+aa)*W;n[10]=(O+I)*Z;n[11]=-1;n[12]=0;n[13]=0;n[14]=O*I*2*Z;n[15]=0;return n}function U(n,
L,X,aa,ha){L=1/Math.tan(L/2);let I=void 0;n[0]=L/X;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=L;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[11]=-1;n[12]=0;n[13]=0;n[15]=0;null!=ha&&Infinity!==ha?(I=1/(aa-ha),n[10]=(ha+aa)*I,n[14]=2*ha*aa*I):(n[10]=-1,n[14]=-2*aa);return n}function Y(n,L,X,aa){const ha=Math.tan(L.upDegrees*Math.PI/180),I=Math.tan(L.downDegrees*Math.PI/180),O=Math.tan(L.leftDegrees*Math.PI/180);L=Math.tan(L.rightDegrees*Math.PI/180);const Q=2/(O+L),W=2/(ha+I);n[0]=Q;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=W;n[6]=
0;n[7]=0;n[8]=-((O-L)*Q*.5);n[9]=(ha-I)*W*.5;n[10]=aa/(X-aa);n[11]=-1;n[12]=0;n[13]=0;n[14]=aa*X/(X-aa);n[15]=0;return n}function ea(n,L,X,aa,ha,I,O){const Q=1/(L-X),W=1/(aa-ha),Z=1/(I-O);n[0]=-2*Q;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=-2*W;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=2*Z;n[11]=0;n[12]=(L+X)*Q;n[13]=(ha+aa)*W;n[14]=(O+I)*Z;n[15]=1;return n}function la(n,L,X,aa){const ha=L[0],I=L[1];L=L[2];let O=ha-X[0],Q=I-X[1];X=L-X[2];var W=y.getEpsilon();if(Math.abs(O)<W&&Math.abs(Q)<W&&Math.abs(X)<W)z(n);else{var Z=
1/Math.sqrt(O*O+Q*Q+X*X);O*=Z;Q*=Z;X*=Z;Z=aa[0];var ba=aa[1];W=aa[2];aa=ba*X-W*Q;W=W*O-Z*X;ba=Z*Q-ba*O;(Z=Math.sqrt(aa*aa+W*W+ba*ba))?(Z=1/Z,aa*=Z,W*=Z,ba*=Z):ba=W=aa=0;var da=Q*ba-X*W,ia=X*aa-O*ba,ka=O*W-Q*aa;(Z=Math.sqrt(da*da+ia*ia+ka*ka))?(Z=1/Z,da*=Z,ia*=Z,ka*=Z):ka=ia=da=0;n[0]=aa;n[1]=da;n[2]=O;n[3]=0;n[4]=W;n[5]=ia;n[6]=Q;n[7]=0;n[8]=ba;n[9]=ka;n[10]=X;n[11]=0;n[12]=-(aa*ha+W*I+ba*L);n[13]=-(da*ha+ia*I+ka*L);n[14]=-(O*ha+Q*I+X*L);n[15]=1}}function na(n,L,X,aa){const ha=L[0],I=L[1];L=L[2];
var O=aa[0];const Q=aa[1];var W=aa[2];aa=ha-X[0];let Z=I-X[1];X=L-X[2];let ba=aa*aa+Z*Z+X*X;0<ba&&(ba=1/Math.sqrt(ba),aa*=ba,Z*=ba,X*=ba);let da=Q*X-W*Z;W=W*aa-O*X;O=O*Z-Q*aa;ba=da*da+W*W+O*O;0<ba&&(ba=1/Math.sqrt(ba),da*=ba,W*=ba,O*=ba);n[0]=da;n[1]=W;n[2]=O;n[3]=0;n[4]=Z*O-X*W;n[5]=X*da-aa*O;n[6]=aa*W-Z*da;n[7]=0;n[8]=aa;n[9]=Z;n[10]=X;n[11]=0;n[12]=ha;n[13]=I;n[14]=L;n[15]=1;return n}function sa(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+
", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function ua(n){return Math.sqrt(n[0]**2+n[1]**2+n[2]**2+n[3]**2+n[4]**2+n[5]**2+n[6]**2+n[7]**2+n[8]**2+n[9]**2+n[10]**2+n[11]**2+n[12]**2+n[13]**2+n[14]**2+n[15]**2)}function ta(n,L,X){n[0]=L[0]+X[0];n[1]=L[1]+X[1];n[2]=L[2]+X[2];n[3]=L[3]+X[3];n[4]=L[4]+X[4];n[5]=L[5]+X[5];n[6]=L[6]+X[6];n[7]=L[7]+X[7];n[8]=L[8]+X[8];n[9]=L[9]+X[9];n[10]=L[10]+X[10];n[11]=L[11]+X[11];n[12]=L[12]+X[12];n[13]=L[13]+X[13];n[14]=L[14]+X[14];
n[15]=L[15]+X[15];return n}function wa(n,L,X){n[0]=L[0]-X[0];n[1]=L[1]-X[1];n[2]=L[2]-X[2];n[3]=L[3]-X[3];n[4]=L[4]-X[4];n[5]=L[5]-X[5];n[6]=L[6]-X[6];n[7]=L[7]-X[7];n[8]=L[8]-X[8];n[9]=L[9]-X[9];n[10]=L[10]-X[10];n[11]=L[11]-X[11];n[12]=L[12]-X[12];n[13]=L[13]-X[13];n[14]=L[14]-X[14];n[15]=L[15]-X[15];return n}function xa(n,L,X){n[0]=L[0]*X;n[1]=L[1]*X;n[2]=L[2]*X;n[3]=L[3]*X;n[4]=L[4]*X;n[5]=L[5]*X;n[6]=L[6]*X;n[7]=L[7]*X;n[8]=L[8]*X;n[9]=L[9]*X;n[10]=L[10]*X;n[11]=L[11]*X;n[12]=L[12]*X;n[13]=L[13]*
X;n[14]=L[14]*X;n[15]=L[15]*X;return n}function Da(n,L,X,aa){n[0]=L[0]+X[0]*aa;n[1]=L[1]+X[1]*aa;n[2]=L[2]+X[2]*aa;n[3]=L[3]+X[3]*aa;n[4]=L[4]+X[4]*aa;n[5]=L[5]+X[5]*aa;n[6]=L[6]+X[6]*aa;n[7]=L[7]+X[7]*aa;n[8]=L[8]+X[8]*aa;n[9]=L[9]+X[9]*aa;n[10]=L[10]+X[10]*aa;n[11]=L[11]+X[11]*aa;n[12]=L[12]+X[12]*aa;n[13]=L[13]+X[13]*aa;n[14]=L[14]+X[14]*aa;n[15]=L[15]+X[15]*aa;return n}function Ia(n,L){return n[0]===L[0]&&n[1]===L[1]&&n[2]===L[2]&&n[3]===L[3]&&n[4]===L[4]&&n[5]===L[5]&&n[6]===L[6]&&n[7]===L[7]&&
n[8]===L[8]&&n[9]===L[9]&&n[10]===L[10]&&n[11]===L[11]&&n[12]===L[12]&&n[13]===L[13]&&n[14]===L[14]&&n[15]===L[15]}function Ra(n,L){if(n===L)return!0;const X=n[0],aa=n[1],ha=n[2],I=n[3],O=n[4],Q=n[5],W=n[6],Z=n[7],ba=n[8],da=n[9],ia=n[10],ka=n[11],ra=n[12],oa=n[13],qa=n[14];n=n[15];const Ca=L[0],va=L[1],Ba=L[2],Aa=L[3],ya=L[4],Ha=L[5],Pa=L[6],Ya=L[7],Wa=L[8],Ja=L[9],Ka=L[10],ja=L[11],Qa=L[12],Nb=L[13],nb=L[14];L=L[15];const e=y.getEpsilon();return Math.abs(X-Ca)<=e*Math.max(1,Math.abs(X),Math.abs(Ca))&&
Math.abs(aa-va)<=e*Math.max(1,Math.abs(aa),Math.abs(va))&&Math.abs(ha-Ba)<=e*Math.max(1,Math.abs(ha),Math.abs(Ba))&&Math.abs(I-Aa)<=e*Math.max(1,Math.abs(I),Math.abs(Aa))&&Math.abs(O-ya)<=e*Math.max(1,Math.abs(O),Math.abs(ya))&&Math.abs(Q-Ha)<=e*Math.max(1,Math.abs(Q),Math.abs(Ha))&&Math.abs(W-Pa)<=e*Math.max(1,Math.abs(W),Math.abs(Pa))&&Math.abs(Z-Ya)<=e*Math.max(1,Math.abs(Z),Math.abs(Ya))&&Math.abs(ba-Wa)<=e*Math.max(1,Math.abs(ba),Math.abs(Wa))&&Math.abs(da-Ja)<=e*Math.max(1,Math.abs(da),Math.abs(Ja))&&
Math.abs(ia-Ka)<=e*Math.max(1,Math.abs(ia),Math.abs(Ka))&&Math.abs(ka-ja)<=e*Math.max(1,Math.abs(ka),Math.abs(ja))&&Math.abs(ra-Qa)<=e*Math.max(1,Math.abs(ra),Math.abs(Qa))&&Math.abs(oa-Nb)<=e*Math.max(1,Math.abs(oa),Math.abs(Nb))&&Math.abs(qa-nb)<=e*Math.max(1,Math.abs(qa),Math.abs(nb))&&Math.abs(n-L)<=e*Math.max(1,Math.abs(n),Math.abs(L))}function Na(n){const L=y.getEpsilon(),X=n[0],aa=n[1],ha=n[2],I=n[4],O=n[5],Q=n[6],W=n[8],Z=n[9];n=n[10];return Math.abs(1-(X*X+I*I+W*W))<=L&&Math.abs(1-(aa*aa+
O*O+Z*Z))<=L&&Math.abs(1-(ha*ha+Q*Q+n*n))<=L}function Sa(n){return 1===n[0]&&0===n[1]&&0===n[2]&&0===n[4]&&1===n[5]&&0===n[6]&&0===n[8]&&0===n[9]&&1===n[10]}const Va=c.create();c=Object.freeze(Object.defineProperty({__proto__:null,add:ta,adjoint:u,copy:t,determinant:A,equals:Ra,exactEquals:Ia,frob:ua,fromQuat:S,fromQuat2:E,fromRotation:g,fromRotationTranslation:v,fromRotationTranslationScale:D,fromRotationTranslationScaleOrigin:G,fromScaling:M,fromTranslation:F,fromXRotation:J,fromYRotation:R,fromZRotation:m,
frustum:P,getRotation:B,getScaling:l,getTranslation:N,hasIdentityRotation:Sa,identity:z,invert:d,invertOrIdentity:w,isOrthoNormal:Na,lookAt:la,mul:r,multiply:r,multiplyScalar:xa,multiplyScalarAndAdd:Da,ortho:ea,perspective:U,perspectiveFromFieldOfView:Y,rotate:h,rotateX:b,rotateY:k,rotateZ:x,scale:p,set:C,str:sa,sub:wa,subtract:wa,targetTo:na,translate:H,transpose:f},Symbol.toStringTag,{value:"Module"}));a.add=ta;a.adjoint=u;a.copy=t;a.determinant=A;a.equals=Ra;a.exactEquals=Ia;a.frob=ua;a.fromQuat=
S;a.fromQuat2=E;a.fromRotation=g;a.fromRotationTranslation=v;a.fromRotationTranslationScale=D;a.fromRotationTranslationScaleOrigin=G;a.fromScaling=M;a.fromTranslation=F;a.fromXRotation=J;a.fromYRotation=R;a.fromZRotation=m;a.frustum=P;a.getRotation=B;a.getScaling=l;a.getTranslation=N;a.hasIdentityRotation=Sa;a.identity=z;a.invert=d;a.invertOrIdentity=w;a.isOrthoNormal=Na;a.lookAt=la;a.mat4=c;a.mul=r;a.multiply=r;a.multiplyScalar=xa;a.multiplyScalarAndAdd=Da;a.ortho=ea;a.perspective=U;a.perspectiveFromFieldOfView=
Y;a.rotate=h;a.rotateX=b;a.rotateY=k;a.rotateZ=x;a.scale=p;a.set=C;a.str=sa;a.sub=wa;a.subtract=wa;a.targetTo=na;a.translate=H;a.transpose=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/statistics/utils":function(){define(["exports","../rest/support/ClassBreaksDefinition","../rest/support/generateRendererUtils"],function(a,c,y){function t(D){return null==D||"string"===typeof D&&!D?"\x3cNull\x3e":D}function C(D){const G=null!=D.minValue||null!=D.maxValue,S=!!D.sqlExpression&&
D.supportsSQLExpression;return!(null!=D.normalizationField||null!=D.normalizationType)&&!G&&!S}function z(D){const {values:G,useSampleStdDev:S,supportsNullCount:P}=D;var U=Number.POSITIVE_INFINITY;let Y=Number.NEGATIVE_INFINITY,ea=null,la=null;var na=null;let sa=null,ua=0;const ta=null==D.minValue?-Infinity:D.minValue,wa=null==D.maxValue?Infinity:D.maxValue;for(const xa of G)Number.isFinite(xa)?xa>=ta&&xa<=wa&&(ea=null===ea?xa:ea+xa,U=Math.min(U,xa),Y=Math.max(Y,xa),ua++):"string"===typeof xa&&ua++;
if(ua&&null!=ea){la=ea/ua;na=0;for(const xa of G)Number.isFinite(xa)&&xa>=ta&&xa<=wa&&(na+=(xa-la)**2);sa=S?1<ua?na/(ua-1):0:0<ua?na/ua:0;na=Math.sqrt(sa)}else Y=U=null;U={avg:la,count:ua,max:Y,min:U,stddev:na,sum:ea,variance:sa};P&&(U.nullcount=G.length-ua);D.percentileParams&&(U.median=f(G,D.percentileParams));return U}function f(D,G){const {fieldType:S,value:P,orderBy:U,isDiscrete:Y}=G,ea=w(S,"desc"===U);D=[...D].filter(ua=>null!=ua).sort((ua,ta)=>ea(ua,ta));if(0===D.length)return null;if(0>=P)return D[0];
if(1<=P)return D[D.length-1];var la=(D.length-1)*P,na=Math.floor(la);G=na+1;la%=1;na=D[na];const sa=D[G];return G>=D.length||Y||"string"===typeof na||"string"===typeof sa?na:na*(1-la)+sa*la}function w(D,G){if(D){if(F.has(D))return G?l:B;if(M.has(D))return d(G,!1);if("esriFieldTypeTimestampOffset"===D)return G?v:m;const Y=d(G,!0);if("esriFieldTypeString"===D)return Y;if("esriFieldTypeGUID"===D||"esriFieldTypeGlobalID"===D)return(ea,la)=>Y(u(ea),u(la))}const S=G?1:-1,P=G?l:B,U=d(G,!0);return(Y,ea)=>
"number"===typeof Y&&"number"===typeof ea?P(Y,ea):"string"===typeof Y&&"string"===typeof ea?U(Y,ea):S}function d(D,G){if(!G)return D?N:E;const S=D?J:R;return D?(P,U)=>{const Y=S(P,U);if(null!=Y)return Y;P=P.toUpperCase();U=U.toUpperCase();return P>U?-1:P<U?1:0}:(P,U)=>{const Y=S(P,U);if(null!=Y)return Y;P=P.toUpperCase();U=U.toUpperCase();return P<U?-1:P>U?1:0}}function u(D){return D.substr(24,12)+D.substr(19,4)+D.substr(16,2)+D.substr(14,2)+D.substr(11,2)+D.substr(9,2)+D.substr(6,2)+D.substr(4,2)+
D.substr(2,2)+D.substr(0,2)}function A(D){return"coded-value"!==D?.type?[]:D.codedValues.map(G=>G.code)}function r(D,G){const S=p({field:G.field,normalizationType:G.normalizationType,normalizationField:G.normalizationField,classificationMethod:G.classificationMethod,standardDeviationInterval:G.standardDeviationInterval,breakCount:G.numClasses||5});D=H(D,G.minValue,G.maxValue);return y.createGenerateRendererClassBreaks({definition:S,values:D,normalizationTotal:G.normalizationTotal})}function H(D,G,
S){const P=null==G?-Infinity:G,U=null==S?Infinity:S;return D.filter(Y=>Number.isFinite(Y)&&Y>=P&&Y<=U)}function p(D){const {breakCount:G,field:S,normalizationField:P,normalizationType:U}=D,Y=D.classificationMethod||"equal-interval";return new c({breakCount:G,classificationField:S,classificationMethod:Y,normalizationField:"field"===U?P:void 0,normalizationType:U,standardDeviationInterval:"standard-deviation"===Y?D.standardDeviationInterval||1:void 0})}function h(D,G){const {field:S,classificationMethod:P,
standardDeviationInterval:U,normalizationType:Y,normalizationField:ea,normalizationTotal:la,minValue:na,maxValue:sa}=G,ua=G.numBins||10;let ta=G=null,wa=null;P&&"equal-interval"!==P||Y?({classBreaks:D}=r(D,{field:S,normalizationType:Y,normalizationField:ea,normalizationTotal:la,classificationMethod:P,standardDeviationInterval:U,minValue:na,maxValue:sa,numClasses:ua}),G=D[0].minValue,ta=D[D.length-1].maxValue,wa=D.map(xa=>[xa.minValue,xa.maxValue])):(null!=na&&null!=sa?(G=na,ta=sa):(D=z({values:D,
minValue:na,maxValue:sa,useSampleStdDev:!Y,supportsNullCount:C({normalizationType:Y,normalizationField:ea,minValue:na,maxValue:sa})}),G=D.min??null,ta=D.max??null),wa=k(G??0,ta??0,ua));return{min:G,max:ta,intervals:wa}}function b(D,G){let S=-1;for(let P=D.length-1;0<=P;P--)if(G>=D[P][0]){S=P;break}return S}function k(D,G,S){const P=(G-D)/S,U=[];let Y;for(let ea=1;ea<=S;ea++)Y=D+P,Y=Number(Y.toFixed(16)),U.push([D,ea===S?G:Y]),D=Y;return U}const x=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,F=new Set("esriFieldTypeDate esriFieldTypeInteger esriFieldTypeSmallInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeOID esriFieldTypeBigInteger".split(" ")),
M=new Set(["esriFieldTypeTimeOnly","esriFieldTypeDateOnly"]),g="min max avg stddev count sum variance nullcount median".split(" "),J=(D,G)=>null==D?null==G?0:1:null==G?-1:null,R=(D,G)=>null==D?null==G?0:-1:null==G?1:null,m=(D,G)=>R(D,G)??(D===G?0:(new Date(D)).getTime()-(new Date(G)).getTime()),v=(D,G)=>J(D,G)??(D===G?0:(new Date(G)).getTime()-(new Date(D)).getTime()),E=(D,G)=>R(D,G)??(D===G?0:D<G?-1:1),N=(D,G)=>J(D,G)??(D===G?0:D<G?1:-1),l=(D,G)=>J(D,G)??G-D,B=(D,G)=>R(D,G)??D-G;a.calculateClassBreaks=
r;a.calculateHistogram=function(D,G){var S=h(D,G);if(null==S.min&&null==S.max)return{bins:[],minValue:S.min,maxValue:S.max,normalizationTotal:G.normalizationTotal};const P=S.intervals,U=S.min??0;S=S.max??0;const Y=P.map((ea,la)=>({minValue:P[la][0],maxValue:P[la][1],count:0}));for(const ea of D)null!=ea&&ea>=U&&ea<=S&&(D=b(P,ea),-1<D&&Y[D].count++);return{bins:Y,minValue:U,maxValue:S,normalizationTotal:G.normalizationTotal}};a.calculatePercentile=f;a.calculateStatistics=z;a.calculateStringStatistics=
function(D){const G=D.returnDistinct?[...(new Set(D.values))]:D.values;var S=G.filter(U=>null!=U).sort();const P=S.length;S={count:P,min:S[0],max:S[P-1]};D.supportsNullCount&&(S.nullcount=G.length-P);D.percentileParams&&(S.median=f(G,D.percentileParams));return S};a.calculateUniqueValuesCount=function(D){const G={};for(let S of D){if(null==S||"string"===typeof S&&""===S.trim())S=null;null==G[S]?G[S]={count:1,data:S}:G[S].count++}return{count:G}};a.createClassBreaksDefinition=p;a.createUVResult=function(D,
G,S,P){D=D.count;const U=[];if(S&&G){S=[];var Y=A(G[0]);for(const ea of Y)if(G[1]){Y=A(G[1]);for(const la of Y)if(G[2]){Y=A(G[2]);for(const na of Y)S.push(`${t(ea)}${P}${t(la)}${P}${t(na)}`)}else S.push(`${t(ea)}${P}${t(la)}`)}else S.push(ea);for(const ea of S)D.hasOwnProperty(ea)||(D[ea]={data:ea,count:0})}for(const ea in D)G=D[ea],U.push({value:G.data,count:G.count,label:G.label});return{uniqueValueInfos:U}};a.getAttributeComparator=w;a.getEqualIntervalBins=k;a.getNormalizedValue=function(D,G,S,
P){let U=null;switch(G){case "log":0!==D&&(U=Math.log(D)*Math.LOG10E);break;case "percent-of-total":Number.isFinite(P)&&0!==P&&(U=D/P*100);break;case "field":Number.isFinite(S)&&0!==S&&(U=D/S);break;case "natural-log":0<D&&(U=Math.log(D));break;case "square-root":0<D&&(U=D**.5)}return U};a.isNullCountSupported=C;a.processNullValue=t;a.processSummaryStatisticsResult=function(D,G){let S;for(S in D)g.includes(S)&&(Number.isFinite(D[S])||(D[S]=null));if(!G)return D;["avg","stddev","variance"].forEach(P=>
{null!=D[P]&&(D[P]=Math.ceil(D[P]??0))});return D};a.resolveCBResult=function(D,G){let S=D.classBreaks;const P=S[0]?.minValue,U=S[S.length-1]?.maxValue,Y="standard-deviation"===G;S=S.map(ea=>{const la=ea.label;ea={minValue:ea.minValue,maxValue:ea.maxValue,label:la};if(Y&&la){const na=la.match(x)?.map(sa=>+sa.trim())??[];2===na.length?(ea.minStdDev=na[0],ea.maxStdDev=na[1],0>na[0]&&0<na[1]&&(ea.hasAvg=!0)):1===na.length&&(la.includes("\x3c")?(ea.minStdDev=null,ea.maxStdDev=na[0]):la.includes("\x3e")&&
(ea.minStdDev=na[0],ea.maxStdDev=null))}return ea});return{minValue:P,maxValue:U,classBreakInfos:S,normalizationTotal:D.normalizationTotal}};a.statisticTypes=g;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ClassBreaksDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f,w,d){C=new c.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});c=new c.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});y=class extends y.JSONSupport{constructor(u){super(u);this.type="class-breaks-definition";
this.normalizationType=this.normalizationField=this.classificationMethod=this.classificationField=this.breakCount=null}set standardDeviationInterval(u){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",u)}set definedInterval(u){"defined-interval"===this.classificationMethod&&this._set("definedInterval",u)}};a.__decorate([w.enumeration({classBreaksDef:"class-breaks-definition"})],y.prototype,"type",void 0);a.__decorate([t.property({json:{write:!0}})],y.prototype,
"breakCount",void 0);a.__decorate([t.property({json:{write:!0}})],y.prototype,"classificationField",void 0);a.__decorate([t.property({type:String,json:{read:C.read,write:C.write}})],y.prototype,"classificationMethod",void 0);a.__decorate([t.property({json:{write:!0}})],y.prototype,"normalizationField",void 0);a.__decorate([t.property({json:{read:c.read,write:c.write}})],y.prototype,"normalizationType",void 0);a.__decorate([t.property({value:null,json:{write:!0}})],y.prototype,"standardDeviationInterval",
null);a.__decorate([t.property({value:null,json:{write:!0}})],y.prototype,"definedInterval",null);return y=a.__decorate([d.subclass("esri.rest.support.ClassBreaksDefinition")],y)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","../../jsonMap","./property"],function(a,c,y){a.enumeration=function(t,C={}){t=t instanceof c.JSONMap?t:new c.JSONMap(t,C);t={type:C?.ignoreUnknown??!0?t.apiValues:String,json:{type:t.jsonValues,read:C?.readOnly?!1:{reader:t.read},write:{writer:t.write}}};
void 0!==C?.readOnly&&(t.readOnly=!!C.readOnly);void 0!==C?.default&&(t.json.default=C.default);void 0!==C?.name&&(t.json.name=C.name);void 0!==C?.nonNullable&&(t.nonNullable=C.nonNullable);return y.property(t)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/generateRendererUtils":function(){define(["exports","../../core/Logger"],function(a,c){function y(r){var H=r.definition;const {classificationMethod:p,normalizationType:h,definedInterval:b}=H;H=H.breakCount??
1;const k=[];var x=r.values;if(0===x.length)return[];x=x.sort((m,v)=>m-v);var F=x[0],M=x[x.length-1];if("equal-interval"===p)if(x.length>=H){x=(M-F)/H;r=F;for(var g=1;g<H;g++){var J=Number((F+g*x).toFixed(6));k.push({minValue:r,maxValue:J,label:t(r,J,h)});r=J}k.push({minValue:r,maxValue:M,label:t(r,M,h)})}else x.forEach(m=>{k.push({minValue:m,maxValue:m,label:t(m,m,h)})});else if("natural-breaks"===p){x=C(x);r=z(x.uniqueValues,r.valueFrequency||x.valueFrequency,H);for(g=1;g<H;g++)x.uniqueValues.length>
g&&(J=Number(x.uniqueValues[r[g]].toFixed(6)),k.push({minValue:F,maxValue:J,label:t(F,J,h)}),F=J);k.push({minValue:F,maxValue:M,label:t(F,M,h)})}else if("quantile"===p)if(x.length>=H&&F!==M){r=Math.ceil(x.length/H);g=0;for(J=1;J<H;J++){var R=r+g-1;R>x.length&&(R=x.length-1);0>R&&(R=0);k.push({minValue:F,maxValue:x[R],label:t(F,x[R],h)});F=x[R];g+=r;r=Math.ceil((x.length-g)/(H-J))}k.push({minValue:F,maxValue:M,label:t(F,M,h)})}else for(H=-1,M=0;M<x.length;M++)F=x[M],F!==H&&(H=F,k.push({minValue:H,
maxValue:F,label:t(H,F,h)}),H=F);else if("standard-deviation"===p)if(r=d(x),g=u(x,r),0===g)k.push({minValue:x[0],maxValue:x[0],label:t(x[0],x[0],h)});else{x=w(F,M,H,r,g)*g;g=0;for(J=H;1<=J;J--)R=Number((r-(J-.5)*x).toFixed(6)),k.push({minValue:F,maxValue:R,label:t(F,R,h)}),F=R,g++;J=Number((r+.5*x).toFixed(6));k.push({minValue:F,maxValue:J,label:t(F,J,h)});F=J;g++;for(R=1;R<=H;R++)J=g===2*H?M:Number((r+(R+.5)*x).toFixed(6)),k.push({minValue:F,maxValue:J,label:t(F,J,h)}),F=J,g++}else if("defined-interval"===
p){if(!b)return k;H=x[0];M=x[x.length-1];x=Math.ceil((M-H)/b);F=H;for(r=1;r<x;r++)g=Number((H+r*b).toFixed(6)),k.push({minValue:F,maxValue:g,label:t(F,g,h)}),F=g;k.push({minValue:F,maxValue:M,label:t(F,M,h)})}return k}function t(r,H,p){let h=null;return h=r===H?p&&"percent-of-total"===p?r+"%":r.toString():p&&"percent-of-total"===p?r+"% - "+H+"%":r+" - "+H}function C(r){const H=[],p=[];let h=Number.MIN_VALUE,b=1,k=-1;for(let x=0;x<r.length;x++){const F=r[x];F===h?(b++,p[k]=b):null!==F&&(H.push(F),
h=F,b=1,p.push(b),k++)}return{uniqueValues:H,valueFrequency:p}}function z(r,H,p){var h=r.length;const b=[];p>h&&(p=h);for(var k=0;k<p;k++)b.push(Math.round(k*h/p-1));b.push(h-1);k=f(b,r,H,p);h=k.mean;k=k.sdcm;var x=p,F=0,M=0;let g=0,J=0,R=!0;for(let v=0;2>v&&R;v++){0===v&&(R=!1);for(var m=0;m<x-1;m++)for(;b[m+1]+1!==b[m+2];)if(b[m+1]+=1,F=A(m,b,r,H),g=F.sbMean,F=F.sbSdcm,M=A(m+1,b,r,H),J=M.sbMean,M=M.sbSdcm,F+M<k[m]+k[m+1])k[m]=F,k[m+1]=M,h[m]=g,h[m+1]=J,R=!0;else{--b[m+1];break}for(m=x-1;0<m;m--)for(;b[m]!==
b[m-1]+1;)if(--b[m],F=A(m-1,b,r,H),g=F.sbMean,F=F.sbSdcm,M=A(m,b,r,H),J=M.sbMean,M=M.sbSdcm,F+M<k[m-1]+k[m])k[m-1]=F,k[m]=M,h[m-1]=g,h[m]=J,R=!0;else{b[m]+=1;break}}R&&(k=f(b,r,H,p));return b}function f(r,H,p,h){let b=[];var k=[],x=[];let F=0;const M=[],g=[];for(var J=0;J<h;J++){var R=A(J,r,H,p);M.push(R.sbMean);g.push(R.sbSdcm);F+=g[J]}R=F;for(J=!0;J||F<R;){J=!1;b=[];for(k=0;k<h;k++)b.push(r[k]);for(x=0;x<h;x++)for(R=r[x]+1;R<=r[x+1];R++)if(k=H[R],0<x&&R!==r[x+1]&&Math.abs(k-M[x])>Math.abs(k-M[x-
1]))r[x]=R;else if(x<h-1&&r[x]!==R-1&&Math.abs(k-M[x])>Math.abs(k-M[x+1])){r[x+1]=R-1;break}R=F;F=0;k=[];x=[];for(let m=0;m<h;m++){k.push(M[m]);x.push(g[m]);const v=A(m,r,H,p);M[m]=v.sbMean;g[m]=v.sbSdcm;F+=g[m]}}if(F>R){for(H=0;H<h;H++)r[H]=b[H],M[H]=k[H],g[H]=x[H];F=R}return{mean:M,sdcm:g}}function w(r,H,p,h,b){r=Math.max(h-r,H-h)/b/p;return 1<=r?1:.5<=r?.5:.25}function d(r){let H=0;for(let p=0;p<r.length;p++)H+=r[p];return H/=r.length}function u(r,H){let p=0;for(let h=0;h<r.length;h++){const b=
r[h];p+=(b-H)*(b-H)}p/=r.length;return Math.sqrt(p)}function A(r,H,p,h){var b=0,k=0;for(var x=H[r]+1;x<=H[r+1];x++){const F=h[x];b+=p[x]*F;k+=F}0>=k&&c.getLogger("esri.rest.support.generateRendererUtils").warn("Exception in Natural Breaks calculation");b/=k;k=0;for(x=H[r]+1;x<=H[r+1];x++)k+=h[x]*(p[x]-b)**2;return{sbMean:b,sbSdcm:k}}a.createGenerateRendererClassBreaks=function(r){const {normalizationTotal:H}=r;return{classBreaks:y(r),normalizationTotal:H}};a.createGenerateRendererUniqueValues=function(r){r=
C(r);const H=[],p=r.uniqueValues.length;for(let h=0;h<p;h++){const b=r.uniqueValues[h];H.push({value:b,count:r.valueFrequency[h],label:b.toString()})}return{uniqueValues:H}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/SnappingCandidate":function(){define(["exports"],function(a){a.makeEdgeCandidate=function(c,y,t,C,z,f=!1){return{objectId:c,target:y,distance:t,type:"edge",start:C,end:z,draped:f}};a.makeVertexCandidate=function(c,y,t){return{objectId:c,
target:y,distance:t,type:"vertex"}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryUtils":function(){define("require exports ../../../core/jsonMap ../../../core/unitUtils ../../../geometry/projection ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ./projectionSupport".split(" "),function(a,c,y,t,C,z,f,w,d,u){async function A(k,x,F){if(!k)return null;
var {where:M}=k;k.where=M=M?.trim();if(!M||/^1 *= *1$/.test(M)||x&&x===M)k.where=null;if(!k.geometry)return k;x=await H(k);k.distance=0;k.units=null;"esriSpatialRelEnvelopeIntersects"===k.spatialRel&&({spatialReference:M}=k.geometry,x=z.getGeometryExtent(x),x.spatialReference=M);if(x){await u.checkProjectionSupport(x.spatialReference,F);M=x.spatialReference;x=r(x,F)&&f.isExtent(x)?{spatialReference:M,rings:[[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]]}:x;M=(await w.normalizeCentralMeridian(f.fromJSON(x)))[0];
if(null==M)throw b;const g="quantizationParameters"in k&&k.quantizationParameters?.tolerance||"maxAllowableOffset"in k&&k.maxAllowableOffset||0;x=g&&r(x,F)?{densificationStep:8*g}:void 0;M=M.toJSON();x=u.project(M,M.spatialReference,F,x);if(!x)throw b;x.spatialReference=F;k.geometry=x}return k}function r(k,x){if(!k)return!1;const F=k.spatialReference;return(f.isExtent(k)||f.isPolygon(k)||f.isPolyline(k))&&!d.equals(F,x)&&!C.canProjectWithoutEngine(F,x)}async function H(k){const {distance:x,units:F}=
k,M=k.geometry;if(null==x||"vertexAttributes"in M)return M;var g=M.spatialReference;k=F?h.fromJSON(F):t.getUnitString(g);g=g&&(d.isGeographic(g)||d.isWebMercator(g))?M:await u.checkProjectionSupport(g,d.wgs84).then(()=>u.project(M,d.wgs84));return(await p())(g.spatialReference,g,x,k)}async function p(){return(await new Promise((k,x)=>a(["../../../geometry/geometryEngineJSON"],k,x))).geodesicBuffer}const h=new y.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",
esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),b=Object.freeze({});c.normalizeQuery=async function(k,x,F){const {outFields:M,orderByFields:g,groupByFieldsForStatistics:J,outStatistics:R}=k;if(M)for(var m=0;m<M.length;m++)M[m]=M[m].trim();if(g)for(m=0;m<g.length;m++)g[m]=g[m].trim();if(J)for(m=0;m<J.length;m++)J[m]=J[m].trim();if(R)for(m=0;m<R.length;m++)R[m].onStatisticField&&(R[m].onStatisticField=R[m].onStatisticField.trim());
k.geometry&&!k.outSR&&(k.outSR=k.geometry.spatialReference);return A(k,x,F)};c.normalizeQueryLike=A;c.queryEngineEmptyResult=b;c.unitsKebabDict=h;Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/queryValidationUtils":function(){define("exports ../../../core/Error ./attributeSupport ./projectionSupport ./spatialQuerySupport ../../../support/arcadeOnDemand".split(" "),function(a,c,y,t,C,z){function f(r,H,p){const {outFields:h,orderByFields:b,returnDistinctValues:k,
outStatistics:x}=p,F=x?x.map(M=>M.outStatisticFieldName&&M.outStatisticFieldName.toLowerCase()).filter(Boolean):[];if(b&&0<b.length){const M=b.map(g=>{const J=g.toLowerCase();return J.includes(" asc")?J.split(" asc")[0]:J.includes(" desc")?J.split(" desc")[0]:g}).filter(g=>!F.includes(g));y.validateFields(r,H,M,{expressionName:"orderByFields",query:p})}if(h&&0<h.length)y.validateFields(r,H,h,{expressionName:"outFields",query:p,allowedFieldTypes:"all"});else if(k)throw new c("unsupported-query","outFields should be specified for returnDistinctValues",
{query:p});y.validateWhere(r,H,p.where,p)}function w(r,H,p){const {outStatistics:h,groupByFieldsForStatistics:b,having:k}=p;var x=b?.length,F=h?.length;if(k){if(!x||!F)throw new c("unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:p});y.validateHaving(r,H,k,h,p)}if(F&&u(h)){F=h.map(M=>M.onStatisticField).filter(Boolean);y.validateFields(r,H,F,{expressionName:"onStatisticFields",query:p});x&&y.validateFields(r,H,b,{expressionName:"groupByFieldsForStatistics",
query:p});for(const M of h){const {onStatisticField:g,statisticType:J}=M;if(("percentile_disc"===J||"percentile_cont"===J)&&"statisticParameters"in M){if({statisticParameters:x}=M,!x)throw new c("unsupported-query","statisticParameters should be set for percentile type",{definition:M,query:p});}else r.get(g)&&"count"!==J&&"min"!==J&&"max"!==J&&y.validateFields(r,H,[g],{expressionName:`outStatistics with '${J}' statistic type`,allowedFieldTypes:A,query:p})}}}async function d(r,H,p,h){var b=[];p.valueExpression&&
({arcadeUtils:b}=await z.loadArcade(),b=b.extractFieldNames(p.valueExpression));p.field&&b.push(p.field);p.field2&&b.push(p.field2);p.field3&&b.push(p.field3);p.normalizationField&&b.push(p.normalizationField);if(!b.length&&!p.valueExpression)throw new c("unsupported-query","field or valueExpression is required",{params:p});y.validateFields(r,H,b,{expressionName:"statistics",query:h})}function u(r){return null!=r&&r.every(H=>"exceedslimit"!==H.statisticType)}const A=new Set([...y.numericFieldTypes,
...y.allDateAndTimeFieldTypes]);a.validateQuery=async function(r,{fieldsIndex:H,geometryType:p,spatialReference:h,availableFields:b}){if(0>(r.distance??0)||null!=r.geometryPrecision||r.multipatchOption&&"xyFootprint"!==r.multipatchOption||r.pixelSize||r.relationParam||r.text)throw new c("unsupported-query","Unsupported query options",{query:r});f(H,b,r);w(H,b,r);return Promise.all([C.checkSpatialQuerySupport(r,p,h),t.checkProjectionSupport(h,r.outSR)]).then(()=>r)};a.validateStatisticsQuery=async function(r,
H,{fieldsIndex:p,geometryType:h,spatialReference:b,availableFields:k}){if(0>(r.distance??0)||null!=r.geometryPrecision||r.multipatchOption||r.pixelSize||r.relationParam||r.text||r.outStatistics||r.groupByFieldsForStatistics||r.having||r.orderByFields)throw new c("unsupported-query","Unsupported query options",{query:r});f(p,k,r);return Promise.all([d(p,k,H,r),C.checkSpatialQuerySupport(r,h,b),t.checkProjectionSupport(b,r.outSR)]).then(()=>r)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../../../geometry/support/spatialReferenceUtils ../contains ../featureConversionUtils ../OptimizedGeometry ./geometryUtils ./projectionSupport".split(" "),function(a,c,y,t,C,z,f,w,d,u,A,r){function H(){return new Promise((x,F)=>a(["../../../geometry/geometryEngineJSON"],x,F))}const p={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var h={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},b={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},k={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};c.canQueryWithRBush=function(x){if(z.isExtent(x))return!0;if(z.isPolygon(x)){for(const F of x.rings)if(5!==F.length||F[0][0]!==F[1][0]||F[0][0]!==F[4][0]||F[2][0]!==F[3][0]||F[0][1]!==F[3][1]||F[0][1]!==
F[4][1]||F[1][1]!==F[2][1])return!1;return!0}return!1};c.checkSpatialQuerySupport=async function(x,F,M){const {spatialRel:g,geometry:J}=x;if(J){if(null==g||!0!==h[g])throw new y("unsupported-query","Unsupported query spatial relationship",{query:x});if(f.isValid(J.spatialReference)&&f.isValid(M)){if(null==J||!0!==b[z.getJsonType(J)])throw new y("unsupported-query","Unsupported query geometry type",{query:x});if(null==F||!0!==k[F])throw new y("unsupported-query","Unsupported layer geometry type",{query:x});
if(x.outSR)return r.checkProjectionSupport(x.geometry?.spatialReference,x.outSR)}}};c.getSpatialQueryOperator=function(x,F,M,g,J){if(z.isPolygon(F)&&"esriGeometryPoint"===M&&("esriSpatialRelIntersects"===x||"esriSpatialRelContains"===x)){const R=d.convertFromPolygon(new u,F,!1,!1);return Promise.resolve(m=>w.polygonContainsPoint(R,!1,!1,m))}if(z.isPolygon(F)&&"esriGeometryMultipoint"===M){const R=d.convertFromPolygon(new u,F,!1,!1);if("esriSpatialRelContains"===x)return Promise.resolve(m=>w.polygonContainsMultipoint(R,
!1,!1,m,g,J))}if(z.isExtent(F)&&"esriGeometryPoint"===M&&("esriSpatialRelIntersects"===x||"esriSpatialRelContains"===x))return Promise.resolve(R=>t.extentContainsPoint(F,A.getGeometry(M,g,J,R)));if(z.isExtent(F)&&"esriGeometryMultipoint"===M&&"esriSpatialRelContains"===x)return Promise.resolve(R=>t.extentContainsMultipoint(F,A.getGeometry(M,g,J,R)));if(z.isExtent(F)&&"esriSpatialRelIntersects"===x){const R=C.getExtentIntersector(M);return Promise.resolve(m=>R(F,A.getGeometry(M,g,J,m)))}return H().then(R=>
{const m=R[p[x]].bind(null,F.spatialReference,F);return v=>m(A.getGeometry(M,g,J,v))})};Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/intersects":function(){define(["exports","./intersectsBase"],function(a,c){a.extentIntersectsExtent=c.extentIntersectsExtent;a.extentIntersectsMultipoint=c.extentIntersectsMultipoint;a.extentIntersectsPoint=c.extentIntersectsPoint;a.extentIntersectsPolygon=c.extentIntersectsPolygon;a.extentIntersectsPolyline=c.extentIntersectsPolyline;
a.extentIntersectsRings=c.extentIntersectsRings;a.getFeatureExtentIntersector=c.getFeatureExtentIntersector;a.isSelfIntersecting=c.isSelfIntersecting;a.segmentIntersects=c.segmentIntersects;a.getExtentIntersector=function(y){return"mesh"===y?c.extentIntersectsExtent:c.getFeatureExtentIntersector(y)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/contains":function(){define(["exports"],function(a){function c(y,t,C,z,f){if(!y)return!1;t=t?C?4:3:C?3:2;const {coords:w,
lengths:d}=y;C=!1;y=0;for(const A of d){var u=y;for(let r=y,H=y+A*t;r<H;r+=t){u=r+t;u===H&&(u=y);const p=w[r],h=w[r+1],b=w[u];u=w[u+1];(h<f&&u>=f||u<f&&h>=f)&&p+(f-h)/(u-h)*(b-p)<z&&(C=!C)}y+=A*t}return C}a.polygonContainsCoords=c;a.polygonContainsMultipoint=function(y,t,C,z,f,w){f=f?w?4:3:w?3:2;const {coords:d,lengths:u}=z;if(!u)return!1;for(let A=0,r=0;A<u.length;A++,r+=f)if(!c(y,t,C,d[r],d[r+1]))return!1;return!0};a.polygonContainsPoint=function(y,t,C,z){return c(y,t,C,z.coords[0],z.coords[1])};
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(a){function c(C,z,f,w,d){if(null!=w&&null!=d)return u=>{const A=C(u,z);u=C(u,f);return(null==A||A<=d)&&(null==u||u>=w)};if(null!=w)return u=>{u=C(u,f);return null==u||u>=w};if(null!=d)return u=>{u=C(u,z);return null==u||u<=d}}function y(C,z,f,w){if(null!=f&&null!=w&&f===w)return d=>C(d,z)===f;if(null!=f&&null!=w)return d=>{d=C(d,z);return null!=d&&d>=f&&d<=
w};if(null!=f)return d=>{d=C(d,z);return null!=d&&d>=f};if(null!=w)return d=>{d=C(d,z);return null!=d&&d<=w}}function t(){return()=>!1}a.getTimeExtent=async function(C,z){if(!C)return null;const f=z.featureAdapter,{startTimeField:w,endTimeField:d}=C;let u=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY;if(w&&d)await z.forEach(r=>{const H=f.getAttribute(r,w);r=f.getAttribute(r,d);null==H||isNaN(H)||(u=Math.min(u,H));null==r||isNaN(r)||(A=Math.max(A,r))});else{const r=w||d;await z.forEach(H=>{H=
f.getAttribute(H,r);null==H||isNaN(H)||(u=Math.min(u,H),A=Math.max(A,H))})}return{start:u,end:A}};a.getTimeOperator=function(C,z,f){if(!z||!C)return null;const {startTimeField:w,endTimeField:d}=C;if(!w&&!d)return null;const {start:u,end:A}=z;if(null===u&&null===A)return null;if(void 0===u&&void 0===A)return t();C=f.getAttributeAsTimestamp?.bind(f)??f.getAttribute.bind(f);return w&&d?c(C,w,d,u,A):y(C,w||d,u,A)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/FieldsIndex":function(){define("../../core/Error ../../core/JSONSupport ../../core/Logger ../../core/MapUtils ../../core/sql/UnknownTimeZone ./fieldUtils ../../time/timeZoneUtils ../../chunks/datetime".split(" "),
function(a,c,y,t,C,z,f,w){function d(p){return p.trim().toLowerCase()}function u(p){const h=new Map;if(!p.fields)return h;const b=!0===p.datesInUnknownTimezone,{timeInfo:k,editFieldsInfo:x}=p;var F=(k?"startField"in k?k.startField:k.startTimeField:"")??"";const M=(k?"endField"in k?k.endField:k.endTimeField:"")??"",g="dateFieldsTimeZone"in p?p.dateFieldsTimeZone??null:p.dateFieldsTimeReference?f.fromTimeReference(p.dateFieldsTimeReference):null,J=x?"timeZone"in x?x.timeZone??g:x.dateFieldsTimeReference?
f.fromTimeReference(x.dateFieldsTimeReference):g??f.utc:null,R=k?"timeZone"in k?k.timeZone??g:k.timeReference?f.fromTimeReference(k.timeReference):g:null;F=new Map([[d(x?.creationDateField??""),J],[d(x?.editDateField??""),J],[d(F),R],[d(M),R]]);for(const {name:m,type:v}of p.fields)H.has(v)?h.set(m,f.unknown):"date"!==v&&"esriFieldTypeDate"!==v?h.set(m,null):b?h.set(m,f.unknown):(p=F.get(d(m??""))??g,h.set(m,p));return h}const A=new Map;class r{static fromJSON(p){return new r(p.fields,p.timeZoneByFieldName)}static fromLayer(p){return new r(p.fields??
[],u(p))}static fromLayerJSON(p){return new r(p.fields??[],u(p))}constructor(p=[],h){this._fieldsMap=new Map;this._normalizedFieldsMap=new Map;this._dateFieldsSet=new Set;this._numericFieldsSet=new Set;this._requiredFields=null;this.dateFields=[];this.numericFields=[];this.fields=p||[];this._timeZoneByFieldName=h?new Map(h):null;p=[];for(const b of this.fields){h=b?.name;const k=z.normalizeFieldName(h)?.toLowerCase()??"";if(h&&k){const x=d(h);this._fieldsMap.set(h,b);this._fieldsMap.set(x,b);this._normalizedFieldsMap.set(k,
b);p.push(`${x}:${b.type}:${this._timeZoneByFieldName?.get(h)}`);z.isDateField(b)?(this.dateFields.push(b),this._dateFieldsSet.add(b)):z.isNumericField(b)&&(this._numericFieldsSet.add(b),this.numericFields.push(b));z.isObjectIDField(b)||z.isGlobalIDField(b)||(b.editable=null==b.editable||!!b.editable,b.nullable=null==b.nullable||!!b.nullable)}}p.sort();this.uid=p.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const p of this.fields)z.isObjectIDField(p)||z.isGlobalIDField(p)||
p.nullable||void 0!==z.getFieldDefaultValue(p)||this._requiredFields.push(p)}return this._requiredFields}equals(p){return this.uid===p?.uid}has(p){return null!=this.get(p)}get(p){if(p){var h=this._fieldsMap.get(p);if(h)return h;(h=this._fieldsMap.get(d(p))??this._normalizedFieldsMap.get(z.normalizeFieldName(p)?.toLowerCase()??""))&&this._fieldsMap.set(p,h);return h}}getTimeZone(p){p=this.get(p&&"string"!==typeof p?p.name:p);return p?this._timeZoneByFieldName?this._timeZoneByFieldName.get(p.name):
"date"===p.type||"esriFieldTypeDate"===p.type?(y.getLogger("esri.layers.support.FieldsIndex").error(new a("getTimeZone:no-timezone-information",`no time zone information for field '${p.name}'`)),f.utc):H.has(p.type)?f.unknown:null:null}getLuxonTimeZone(p){const h=this.getTimeZone(p);return h?h===f.unknown?C.UnknownTimeZone.instance:h===f.utc?w.FixedOffsetZone.utcInstance:t.getOrCreateMapValue(A,h,()=>w.IANAZone.create(h)):null}isDateField(p){return this._dateFieldsSet.has(this.get(p))}isTimeOnlyField(p){return z.isTimeOnlyField(this.get(p))}isNumericField(p){return this._numericFieldsSet.has(this.get(p))}normalizeFieldName(p){return this.get(p)?.name??
void 0}toJSON(){return{fields:this.fields.map(p=>c.isSerializable(p)?p.toJSON():p),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}const H=new Set("time-only date-only timestamp-offset esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "));return r})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h){function b(N){return k.has(N)?k.get(N):"number"===typeof N?N:1}a.TaskPriority=void 0;(function(N){N.RESOURCE_CONTROLLER_IMMEDIATE="immediate";N.RESOURCE_CONTROLLER="schedule";N.SLIDE="slide";N.STREAM_DATA_LOADER="stream loader";N.ELEVATION_QUERY="elevation query";N.TERRAIN_SURFACE="terrain";N.SURFACE_GEOMETRY_UPDATES="surface geometry updates";N.LOD_RENDERER="LoD renderer";N.GRAPHICS_CORE="Graphics3D";N.I3S_CONTROLLER="I3S";N.POINT_CLOUD_LAYER="point cloud";
N.FEATURE_TILE_FETCHER="feature fetcher";N.OVERLAY="overlay";N.STAGE="stage";N.GRAPHICS_DECONFLICTOR="graphics deconflictor";N.FILTER_VISIBILITY="Graphics3D filter visibility";N.SCALE_VISIBILITY="Graphics3D scale visibility";N.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";N.POINT_OF_INTEREST_FREQUENT="POI frequent";N.POINT_OF_INTEREST_INFREQUENT="POI infrequent";N.LABELER="labeler";N.FEATURE_QUERY_ENGINE="feature query";N.FEATURE_TILE_TREE="feature tile tree";N.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
N.ELEVATION_ALIGNMENT="elevation alignment";N.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";N.TEXT_TEXTURE_ATLAS="text texture atlas";N.TEXTURE_UNLOAD="texture unload";N.LINE_OF_SIGHT_TOOL="line of sight tool";N.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";N.ELEVATION_PROFILE="elevation profile";N.SNAPPING="snapping";N.SHADOW_ACCUMULATOR="shadow accumulator";N.CLOUDS_GENERATOR="clouds generator";N[N.NONE=0]="NONE";N[N.TEST_PRIO=1]="TEST_PRIO"})(a.TaskPriority||(a.TaskPriority=
{}));const k=new Map([[a.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[a.TaskPriority.RESOURCE_CONTROLLER,4],[a.TaskPriority.SLIDE,0],[a.TaskPriority.STREAM_DATA_LOADER,0],[a.TaskPriority.ELEVATION_QUERY,0],[a.TaskPriority.TERRAIN_SURFACE,1],[a.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[a.TaskPriority.LOD_RENDERER,2],[a.TaskPriority.GRAPHICS_CORE,2],[a.TaskPriority.I3S_CONTROLLER,2],[a.TaskPriority.POINT_CLOUD_LAYER,2],[a.TaskPriority.FEATURE_TILE_FETCHER,2],[a.TaskPriority.OVERLAY,4],[a.TaskPriority.STAGE,
4],[a.TaskPriority.GRAPHICS_DECONFLICTOR,4],[a.TaskPriority.FILTER_VISIBILITY,4],[a.TaskPriority.SCALE_VISIBILITY,4],[a.TaskPriority.FRUSTUM_VISIBILITY,4],[a.TaskPriority.CLOUDS_GENERATOR,4],[a.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[a.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[a.TaskPriority.LABELER,8],[a.TaskPriority.FEATURE_QUERY_ENGINE,8],[a.TaskPriority.FEATURE_TILE_TREE,16],[a.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[a.TaskPriority.ELEVATION_ALIGNMENT,12],[a.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[a.TaskPriority.TEXT_TEXTURE_ATLAS,12],[a.TaskPriority.TEXTURE_UNLOAD,12],[a.TaskPriority.LINE_OF_SIGHT_TOOL,16],[a.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[a.TaskPriority.SNAPPING,0],[a.TaskPriority.SHADOW_ACCUMULATOR,30]]),x=A.Milliseconds(6.5),F=A.Milliseconds(1),M=A.Milliseconds(30),g=A.Milliseconds(1E3/30),J=A.Milliseconds(100);var R;(function(N){class l{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(G=>G.needsUpdate)}constructor(){this._updating=
u.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new z("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new D;this._state=p.RenderState.INTERACTING;this._tasks=new f;this._runQueue=new f;this._load=0;this._idleStateCallbacks=new f;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=d.watch(()=>H.SCHEDULER_LOG_SLOW_TASKS,S=>this._debug=S,d.initial);for(const S of Object.keys(a.TaskPriority))this.performanceInfo.tasks.set(a.TaskPriority[S],
new z(a.TaskPriority[S]));const G=this;this._test={FRAME_SAFETY_BUDGET:x,INTERACTING_BUDGET:g,IDLE_BUDGET:J,get availableBudget(){return G._budget.budget},usedBudget:0,getBudget:()=>G._budget,setBudget:S=>G._budget=S,updateTask:S=>this._updateTask(S),getState:S=>this._getState(S),getRuntime:S=>this._getRuntime(S),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(G=>G.remove());this._tasks.clear();
C.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(G){this._updatingChanged();G&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this.frame())}))}registerTask(G,S){S=new B(this,G,S);this._tasks.push(S);this._updatingChanged();this.performanceInfo.tasks.has(G)||this.performanceInfo.tasks.set(G,new z(G));return S}registerIdleStateCallbacks(G,
S){const P={idleBegin:G,idleEnd:S};this._idleStateCallbacks.push(P);this.state===p.RenderState.IDLE&&this._idleUpdatesStartFired&&P.idleBegin();const U=this;return{remove:()=>this._removeIdleStateCallbacks(P),set idleBegin(Y){U._idleUpdatesStartFired&&(P.idleEnd(),U._state===p.RenderState.IDLE&&Y());P.idleBegin=Y},set idleEnd(Y){P.idleEnd=Y}}}get load(){return this._load}set state(G){this._state!==G&&(this._state=G,this.state!==p.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=
!1,this._idleStateCallbacks.forAll(S=>S.idleEnd())))}get state(){return this._state}updateBudget(G){this._test.usedBudget=0;++this._frameNumber;let S=x,P=G.frameDuration,U=F;switch(this.state){case p.RenderState.IDLE:S=A.Milliseconds(0);P=A.Milliseconds(Math.max(J,G.frameDuration));U=M;break;case p.RenderState.INTERACTING:P=A.Milliseconds(Math.max(g,G.frameDuration))}P=A.Milliseconds(P-G.elapsedFrameTime-S);if(this.state!==p.RenderState.IDLE&&P<F&&!this._forceTask)return this._forceTask=!0,!1;P=A.Milliseconds(Math.max(P,
U));this._budget.reset(P,this.state);this._updateLoad();return this._schedule()}frame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case p.RenderState.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(G=>G.idleBegin()));this._runIdle();break;case p.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(A.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(G){this._idleUpdatesStartFired&&
G.idleEnd();this._idleStateCallbacks.removeUnordered(G)}removeTask(G){this._tasks.removeUnordered(G);this._runQueue.removeUnordered(G);this._updatingChanged()}_updateTask(G){this._tasks.forAll(S=>{S.name===G&&S.setPriority(G)})}_getState(G){if(this._runQueue.some(P=>P.name===G))return a.TaskState.SCHEDULED;let S=a.TaskState.IDLE;this._tasks.forAll(P=>{P.name===G&&P.needsUpdate&&(1>=P.schedulePriority?S=a.TaskState.READY:S!==a.TaskState.READY&&(S=a.TaskState.WAITING))});return S}_getRuntime(G){let S=
0;this._tasks.forAll(P=>{P.name===G&&(S+=P.runtime)});return S}_resetRuntimes(){this._tasks.forAll(G=>G.runtime=0)}_getRunning(){const G=new Map;this._tasks.forAll(P=>{P.needsUpdate&&G.set(P.name,(G.get(P.name)||0)+1)});if(0===G.size)return null;let S="";G.forEach((P,U)=>{S=1<P?S+` ${P}x ${U}`:S+` ${U}`});return S}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const G=this._tasks.reduce((S,P)=>P.needsUpdate?++S:S,0);this._load=.9*this._load+G*(1-.9)}_schedule(){this._runQueue.filterInPlace(G=>
{if(G.needsUpdate)return!0;G.schedulePriority=G.basePriority;return!1});for(this._tasks.forAll(G=>{0===G.basePriority&&G.needsUpdate&&!this._runQueue.includes(G)&&G.blockFrame!==this._frameNumber&&this._runQueue.unshift(G)});0===this._runQueue.length;){let G=!1;this._tasks.forAll(S=>{if(S.needsUpdate&&0!==S.schedulePriority&&0!==S.basePriority&&S.blockFrame!==this._frameNumber)switch(G=!0,S.schedulePriority){case 1:S.schedulePriority=0;this._runQueue.push(S);break;default:--S.schedulePriority}});
if(!G)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){const G=this._budget.now();this._startFrameTaskTimes();do for(;0<this._runQueue.length;){var S=this._budget.now();const P=this._runQueue.pop();this._budget.resetProgress();try{P.task.runTask(this._budget)===h.Yield&&(P.blockFrame=this._frameNumber)}catch(U){t.getLogger("esri.views.support.Scheduler").error(`Exception in task "${P.name}"`,U),P.blockFrame=this._frameNumber}!this._budget.hasProgressed&&P.blockFrame!==this._frameNumber&&
P.needsUpdate&&(P.blockFrame=this._frameNumber);P.schedulePriority=P.basePriority;S=this._budget.now()-S;P.runtime+=S;this._frameTaskTimes.set(P.priority,this._frameTaskTimes.get(P.priority)+S);this._debug&&S>2*this._budget.budget&&console.log("Task",P.name,"used",S,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining){this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-G);return}}while(this._schedule());this._updatingChanged();this._recordFrameTaskTimes(this._budget.now()-
G)}_startFrameTaskTimes(){for(const G of Object.keys(a.TaskPriority))this._frameTaskTimes.set(a.TaskPriority[G],0)}_recordFrameTaskTimes(G){this._frameTaskTimes.forEach((S,P)=>this.performanceInfo.tasks.get(P).record(S));this.performanceInfo.total.record(G)}get test(){return this._test}}N.Scheduler=l;class B{get task(){return this._task.value}get updating(){return this._queue.running}constructor(G,S,P){this._scheduler=G;this.name=S;this.runtime=this.blockFrame=0;this._queue=new r.PromiseQueue;this._handles=
new c;this.schedulePriority=this._basePriority=b(S);this._task=u.signal(null!=P?P:this._queue);this._handles.add(d.when(()=>this.task.running,U=>G.taskRunningChanged(U)))}remove(){this.processQueue(m);this._scheduler.removeTask(this);this.schedule=E.schedule;this.reschedule=E.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(G){if(this.name!==G){this.name=G;G=b(G);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=G;this._basePriority=
G}}get priority(){return this.name}set priority(G){this.setPriority(G)}get needsUpdate(){return this.updating||this.task.running}schedule(G,S,P){return this._queue.push(G,S,P)}reschedule(G,S,P){return this._queue.unshift(G,S,P)}processQueue(G){return this._queue.runTask(G)}}class D{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=p.RenderState.IDLE;this._progressed=this._done=!1;this._enabled=!0}run(G){if(this.done)return!1;!0===G()&&this.madeProgress();
return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(G){this._enabled=G}reset(G,S){this._begin=this.now();this._budget=G;this._state=S;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._done=
this._progressed=!1}get hasProgressed(){return this._progressed}}N.Budget=D})(R||={});a.TaskState=void 0;(function(N){N.SCHEDULED="s";N.READY="r";N.WAITING="w";N.IDLE="i"})(a.TaskState||(a.TaskState={}));const m=(()=>{const N=new R.Budget;N.enabled=!1;return N})();class v{remove(){}processQueue(){}schedule(N,l,B){try{if(w.isAborted(l)){const D=w.createAbortError();return B?Promise.resolve(B(D)):Promise.reject(D)}return w.when(N(m))}catch(D){return Promise.reject(D)}}reschedule(N,l,B){return this.schedule(N,
l,B)}}const E=new v;a.ImmediateTask=E;a.getTaskPriority=b;a.newScheduler=function(){return new R.Scheduler};a.noBudget=m;a.taskPriorities=k;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/signal":function(){define(["exports","./lang","./accessorSupport/tracking","./accessorSupport/tracking/SimpleObservable"],function(a,c,y,t){class C{constructor(z,f){this._observable=new t.SimpleObservable;this._value=z;this._equalityFunction=f}get value(){y.trackAccess(this._observable);
return this._value}set value(z){this._equalityFunction(z,this._value)||(this._value=z,this._observable.notify())}mutate(z){z(this._value);this._observable.notify()}}a.signal=function(z,f=c.equalsShallow){return new C(z,f)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(a,c,y,t){class C{constructor(){this._tasks=[];this._runningTasks=y.signal(0)}get length(){return this._tasks.length}get running(){return 0<
this._runningTasks.value}destroy(){this.cancelAll()}runTask(f){if(0===this.length)return t.Yield;for(;!f.done&&this._process(f);)f.madeProgress()}push(f,w,d){++this._runningTasks.value;return(new Promise((u,A)=>this._tasks.push(new z(u,A,f,w,d)))).finally(()=>--this._runningTasks.value)}unshift(f,w,d){++this._runningTasks.value;return(new Promise((u,A)=>this._tasks.unshift(new z(u,A,f,w,d)))).finally(()=>--this._runningTasks.value)}_process(f){if(0===this._tasks.length)return!1;const w=this._tasks.shift();
try{const d=c.isAborted(w.signal);if(d&&!w.abortCallback)w.reject(c.createAbortError());else{const u=d?w.abortCallback?.(c.createAbortError()):w.callback(f);c.isPromiseLike(u)?u.then(w.resolve,w.reject):w.resolve(u)}}catch(d){w.reject(d)}return!0}cancelAll(){const f=c.createAbortError();for(const w of this._tasks)if(w.abortCallback){const d=w.abortCallback(f);w.resolve(d)}else w.reject(f);this._tasks.length=0}}class z{constructor(f,w,d,u,A){this.resolve=f;this.reject=w;this.callback=d;this.signal=
u;this.abortCallback=A}}a.PromiseQueue=C;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],function(a){const c=Symbol("Yield");a.Yield=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f){c=class extends c{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};a.__decorate([y.property()],c.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);a.__decorate([y.property()],c.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);c=a.__decorate([f.subclass("esri.views.support.DebugFlags")],c);return new c})},"esri/views/support/RenderState":function(){define(["exports"],function(a){a.RenderState=
void 0;var c=a.RenderState||(a.RenderState={});c[c.ANIMATING=0]="ANIMATING";c[c.INTERACTING=1]="INTERACTING";c[c.IDLE=2]="IDLE";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x){var F;c=new c.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});y=F=class extends y.JSONSupport{static create(M={}){const {resolutionFactor:g=1,scales:J,size:R=256,spatialReference:m=H.WebMercator,numLODs:v=24}=M;if(!h.isValid(m)){M=[];if(J)for(var E=0;E<J.length;E++){var N=
J[E];M.push(new k({level:E,scale:N,resolution:N}))}else for(E=5E-4,N=v-1;0<=N;N--)M.unshift(new k({level:N,scale:E,resolution:E})),E*=2;return new F({dpi:96,lods:M,origin:new r(0,0,m),size:[R,R],spatialReference:m})}E=h.getInfo(m);M=M.origin?new r({x:M.origin.x,y:M.origin.y,spatialReference:m}):E?new r({x:E.origin[0],y:E.origin[1],spatialReference:m}):new r({x:0,y:0,spatialReference:m});E=1/(39.37*t.getMetersPerUnitForSR(m)*96);N=[];if(J)for(var l=0;l<J.length;l++){var B=J[l];N.push(new k({level:l,
scale:B,resolution:B*E}))}else{var D=h.isGeographic(m)?512/R*5.916575275917094E8:256/R*5.91657527591555E8;l=Math.ceil(v/g);N.push(new k({level:0,scale:D,resolution:D*E}));for(B=1;B<l;B++)D/=2**g,N.push(new k({level:B,scale:D,resolution:D*E}))}return new F({dpi:96,lods:N,origin:M,size:[R,R],spatialReference:m})}constructor(M){super(M);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:M,origin:g}=this;if(M&&g){const J=h.getInfo(M);return M.isWrappable&&
!!J&&Math.abs(J.origin[0]-g.x)<=J.dx}return!1}readOrigin(M,g){return r.fromJSON({spatialReference:g.spatialReference,...M})}set lods(M){const g=[],J=this._levelToLOD={};M&&M.forEach(R=>{g.push(R.scale);J[R.level]=R});this._set("scales",g);this._set("lods",M);this._initializeUpsampleLevels()}readSize(M,g){return[g.cols,g.rows]}writeSize(M,g){g.cols=M[0];g.rows=M[1]}zoomToScale(M){const g=this.scales;if(0>=M)return g[0];if(M>=g.length-1)return g[g.length-1];const J=Math.floor(M);return g[J]/(g[J]/g[J+
1])**(M-J)}scaleToZoom(M){const g=this.scales,J=g.length-1;let R=0;for(;R<J;R++){const m=g[R],v=g[R+1];if(m<=M)break;if(v===M)return R+1;if(m>M&&v<M)return R+Math.log(m/M)/Math.log(m/v)}return R}snapScale(M,g=.95){M=this.scaleToZoom(M);return M%Math.floor(M)>=g?this.zoomToScale(Math.ceil(M)):this.zoomToScale(Math.floor(M))}tileAt(M,g,J,R){var m=this.lodAt(M);if(!m)return null;let v;if("number"===typeof g)v=g,g=J;else{if(h.equals(g.spatialReference,this.spatialReference))v=g.x,g=g.y;else{R=b.project(g,
this.spatialReference);if(null==R)return null;v=R.x;g=R.y}R=J}J=m.resolution*this.size[0];m=m.resolution*this.size[1];R||=new x.TileKey(null,0,0,0,p.create());R.level=M;R.row=Math.floor((this.origin.y-g)/m+.001);R.col=Math.floor((v-this.origin.x)/J+.001);this.updateTileInfo(R);return R}updateTileInfo(M,g=F.ExtrapolateOptions.NONE){var J=this.lodAt(M.level);J||g!==F.ExtrapolateOptions.POWER_OF_TWO||(g=this.lods[this.lods.length-1],g.level<M.level&&(J=g));if(J){var R=M.level-J.level;g=J.resolution*
this.size[0]/2**R;J=J.resolution*this.size[1]/2**R;M.id=`${M.level}/${M.row}/${M.col}`;M.extent||(M.extent=p.create());M.extent[0]=this.origin.x+M.col*g;M.extent[1]=this.origin.y-(M.row+1)*J;M.extent[2]=M.extent[0]+g;M.extent[3]=M.extent[1]+J}}upsampleTile(M){const g=this._upsampleLevels[M.level];if(!g||-1===g.parentLevel)return!1;M.level=g.parentLevel;M.row=Math.floor(M.row/g.factor+.001);M.col=Math.floor(M.col/g.factor+.001);this.updateTileInfo(M);return!0}getTileBounds(M,g){var J=this.lodAt(g.level);
if(null==J)return null;var {resolution:R}=J;J=R*this.size[0];R*=this.size[1];M[0]=this.origin.x+g.col*J;M[1]=this.origin.y-(g.row+1)*R;M[2]=M[0]+J;M[3]=M[1]+R;return M}lodAt(M){return this._levelToLOD?.[M]??null}clone(){return F.fromJSON(this.write({}))}getOrCreateCompatible(M,g){if(256===this.size[0]&&256===this.size[1])return 256===M?this:null;const J=[],R=this.lods.length;for(let m=0;m<R;m++){const v=this.lods[m];J.push(new k({level:v.level,scale:v.scale,resolution:v.resolution*g}))}return new F({size:[M,
M],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:J})}_initializeUpsampleLevels(){const M=this.lods;this._upsampleLevels=[];let g=null;for(let J=0;J<M.length;J++){const R=M[J];this._upsampleLevels[R.level]={parentLevel:g?g.level:-1,factor:g?g.resolution/R.resolution:0};g=R}}};a.__decorate([C.property({type:Number,json:{write:!0}})],y.prototype,"compressionQuality",void 0);a.__decorate([C.property({type:Number,
json:{write:!0}})],y.prototype,"dpi",void 0);a.__decorate([C.property({type:String,json:{read:c.read,write:c.write,origins:{"web-scene":{read:!1,write:!1}}}})],y.prototype,"format",void 0);a.__decorate([C.property({readOnly:!0})],y.prototype,"isWrappable",null);a.__decorate([C.property({type:r,json:{write:!0}})],y.prototype,"origin",void 0);a.__decorate([d.reader("origin")],y.prototype,"readOrigin",null);a.__decorate([C.property({type:[k],value:null,json:{write:!0}})],y.prototype,"lods",null);a.__decorate([C.property({readOnly:!0})],
y.prototype,"scales",void 0);a.__decorate([C.property({cast:M=>Array.isArray(M)?M:"number"===typeof M?[M,M]:[256,256]})],y.prototype,"size",void 0);a.__decorate([d.reader("size",["rows","cols"])],y.prototype,"readSize",null);a.__decorate([A.writer("size",{cols:{type:z.Integer},rows:{type:z.Integer}})],y.prototype,"writeSize",null);a.__decorate([C.property({type:H,json:{write:!0}})],y.prototype,"spatialReference",void 0);y=F=a.__decorate([u.subclass("esri.layers.support.TileInfo")],y);(function(M){M=
M.ExtrapolateOptions||(M.ExtrapolateOptions={});M[M.NONE=0]="NONE";M[M.POWER_OF_TWO=1]="POWER_OF_TWO"})(y||={});return y})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f){var w;c=w=class extends c.JSONSupport{constructor(d){super(d);this.cols=null;this.level=
0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new w({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};a.__decorate([y.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"cols",void 0);a.__decorate([y.property({type:t.Integer,json:{write:!0}})],c.prototype,"level",void 0);a.__decorate([y.property({type:String,json:{write:!0}})],
c.prototype,"levelValue",void 0);a.__decorate([y.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"origin",void 0);a.__decorate([y.property({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0);a.__decorate([y.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"rows",void 0);a.__decorate([y.property({type:Number,json:{write:!0}})],c.prototype,"scale",void 0);
return c=w=a.__decorate([f.subclass("esri.layers.support.LOD")],c)})},"esri/layers/support/TileKey":function(){define(["exports"],function(a){class c{constructor(y,t,C,z,f){this.id=y;this.level=t;this.row=C;this.col=z;this.extent=f}}a.TileKey=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/Query":function(){define("../../chunks/tslib.es6 ../../geometry ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../layers/support/source/DataLayerSource ./FullTextSearch ./QuantizationParameters ./spatialRelationships ./StatisticDefinition ../../geometry/SpatialReference ../../geometry/Point".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x,F,M){var g;t=new t.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let J=g=class extends C.JSONSupport{static from(R){return r.ensureClass(g,R)}constructor(R){super(R);this.aggregateIds=null;this.cacheHint=void 0;this.compactGeometryEnabled=!1;this.datumTransformation=null;this.defaultSpatialReferenceEnabled=
!1;this.dynamicDataSource=this.distance=void 0;this.geometry=this.gdbVersion=this.fullText=this.formatOf3DObjects=null;this.geometryPrecision=void 0;this.historicMoment=this.having=this.groupByFieldsForStatistics=null;this.maxAllowableOffset=void 0;this.maxRecordCountFactor=1;this.multipatchOption=null;this.num=void 0;this.resultType=this.relationParameter=this.rangeValues=this.quantizationParameters=this.pixelSize=this.parameterValues=this.outStatistics=this.outSpatialReference=this.outFields=this.orderByFields=
this.objectIds=null;this.returnDistinctValues=this.returnCentroid=!1;this.returnExceededLimitFeatures=!0;this.returnQueryGeometry=this.returnGeometry=!1;this.returnZ=this.returnM=void 0;this.sourceSpatialReference=null;this.spatialRelationship="intersects";this.start=void 0;this.timeExtent=this.text=this.sqlFormat=null;this.timeReferenceUnknownClient=!1;this.where=this.units=null}castDatumTransformation(R){return"number"===typeof R||"object"===typeof R?R:null}writeHistoricMoment(R,m){m.historicMoment=
R&&R.getTime()}writeParameterValues(R,m){if(R){const v={};for(const E in R){const N=R[E];Array.isArray(N)?v[E]=N.map(l=>l instanceof Date?l.getTime():l):v[E]=N instanceof Date?N.getTime():N}m.parameterValues=v}}writeStart(R,m){m.resultOffset=this.start;m.resultRecordCount=this.num||10;m.where="1\x3d1"}writeWhere(R,m){m.where=R||"1\x3d1"}clone(){return new g(z.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,
defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};J.MAX_MAX_RECORD_COUNT_FACTOR=5;a.__decorate([f.property({json:{write:!0}})],
J.prototype,"aggregateIds",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],J.prototype,"cacheHint",void 0);a.__decorate([f.property({type:Boolean,json:{default:!1,write:!0}})],J.prototype,"compactGeometryEnabled",void 0);a.__decorate([f.property({json:{write:!0}})],J.prototype,"datumTransformation",void 0);a.__decorate([w.cast("datumTransformation")],J.prototype,"castDatumTransformation",null);a.__decorate([f.property({type:Boolean,json:{default:!1,write:!0}})],J.prototype,"defaultSpatialReferenceEnabled",
void 0);a.__decorate([f.property({type:Number,json:{write:{overridePolicy(R){return{enabled:0<R}}}}})],J.prototype,"distance",void 0);a.__decorate([f.property({type:p.DataLayerSource,json:{write:!0}})],J.prototype,"dynamicDataSource",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],J.prototype,"formatOf3DObjects",void 0);a.__decorate([f.property({type:[h],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.fullText&&0<this.fullText.length}}}}})],J.prototype,"fullText",
void 0);a.__decorate([f.property({type:String,json:{write:!0}})],J.prototype,"gdbVersion",void 0);a.__decorate([f.property({types:c.geometryTypes,json:{read:H.fromJSON,write:!0}})],J.prototype,"geometry",void 0);a.__decorate([f.property({type:Number,json:{write:!0}})],J.prototype,"geometryPrecision",void 0);a.__decorate([f.property({type:[String],json:{write:!0}})],J.prototype,"groupByFieldsForStatistics",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],J.prototype,"having",void 0);
a.__decorate([f.property({type:Date})],J.prototype,"historicMoment",void 0);a.__decorate([A.writer("historicMoment")],J.prototype,"writeHistoricMoment",null);a.__decorate([f.property({type:Number,json:{write:!0}})],J.prototype,"maxAllowableOffset",void 0);a.__decorate([f.property({type:Number,cast(R){return 1>R?1:R>J.MAX_MAX_RECORD_COUNT_FACTOR?J.MAX_MAX_RECORD_COUNT_FACTOR:R},json:{write:{overridePolicy(R){return{enabled:1<R}}}}})],J.prototype,"maxRecordCountFactor",void 0);a.__decorate([f.property({type:["xyFootprint"],
json:{write:!0}})],J.prototype,"multipatchOption",void 0);a.__decorate([f.property({type:Number,json:{read:{source:"resultRecordCount"}}})],J.prototype,"num",void 0);a.__decorate([f.property({json:{write:!0}})],J.prototype,"objectIds",void 0);a.__decorate([f.property({type:[String],json:{write:!0}})],J.prototype,"orderByFields",void 0);a.__decorate([f.property({type:[String],json:{write:!0}})],J.prototype,"outFields",void 0);a.__decorate([f.property({type:F,json:{name:"outSR",write:!0}})],J.prototype,
"outSpatialReference",void 0);a.__decorate([f.property({type:[x],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&0<this.outStatistics.length}}}}})],J.prototype,"outStatistics",void 0);a.__decorate([f.property({json:{write:!0}})],J.prototype,"parameterValues",void 0);a.__decorate([A.writer("parameterValues")],J.prototype,"writeParameterValues",null);a.__decorate([f.property({type:M,json:{write:!0}})],J.prototype,"pixelSize",void 0);a.__decorate([f.property({type:b,
json:{write:!0}})],J.prototype,"quantizationParameters",void 0);a.__decorate([f.property({type:[Object],json:{write:!0}})],J.prototype,"rangeValues",void 0);a.__decorate([f.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],J.prototype,"relationParameter",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],J.prototype,"resultType",void 0);a.__decorate([f.property({type:Boolean,
json:{default:!1,write:!0}})],J.prototype,"returnCentroid",void 0);a.__decorate([f.property({type:Boolean,json:{default:!1,write:!0}})],J.prototype,"returnDistinctValues",void 0);a.__decorate([f.property({type:Boolean,json:{default:!0,write:!0}})],J.prototype,"returnExceededLimitFeatures",void 0);a.__decorate([f.property({type:Boolean,json:{write:!0}})],J.prototype,"returnGeometry",void 0);a.__decorate([f.property({type:Boolean,json:{default:!1,write:!0}})],J.prototype,"returnQueryGeometry",void 0);
a.__decorate([f.property({type:Boolean,json:{default:!1,write:!0}})],J.prototype,"returnM",void 0);a.__decorate([f.property({type:Boolean,json:{write:{overridePolicy(R){return{enabled:R}}}}})],J.prototype,"returnZ",void 0);a.__decorate([f.property({type:F,json:{write:!0}})],J.prototype,"sourceSpatialReference",void 0);a.__decorate([d.enumeration(k.spatialRelKebabDict,{ignoreUnknown:!1,name:"spatialRel"})],J.prototype,"spatialRelationship",void 0);a.__decorate([f.property({type:Number,json:{read:{source:"resultOffset"}}})],
J.prototype,"start",void 0);a.__decorate([A.writer("start"),A.writer("num")],J.prototype,"writeStart",null);a.__decorate([f.property({type:String,json:{write:!0}})],J.prototype,"sqlFormat",void 0);a.__decorate([f.property({type:String,json:{write:!0}})],J.prototype,"text",void 0);a.__decorate([f.property({type:y,json:{write:!0}})],J.prototype,"timeExtent",void 0);a.__decorate([f.property({type:Boolean,json:{default:!1,write:!0}})],J.prototype,"timeReferenceUnknownClient",void 0);a.__decorate([d.enumeration(t,
{ignoreUnknown:!1}),f.property({json:{write:{overridePolicy(R){return{enabled:!!R&&null!=this.distance&&0<this.distance}}}}})],J.prototype,"units",void 0);a.__decorate([f.property({type:String,json:{write:{overridePolicy(R){return{enabled:null!=R||null!=this.start&&0<this.start}}}}})],J.prototype,"where",void 0);a.__decorate([A.writer("where")],J.prototype,"writeWhere",null);return J=g=a.__decorate([u.subclass("esri.rest.support.Query")],J)})},"esri/TimeExtent":function(){define("./chunks/tslib.es6 ./core/JSONSupport ./core/timeUtils ./core/accessorSupport/decorators/property ./core/has ./core/Logger ./core/RandomLCG ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./time/timeZoneUtils".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A){var r;c=r=class extends c.JSONSupport{static get allTime(){return H}static get empty(){return p}constructor(h){super(h);this.start=this.end=null}readEnd(h,b){return null!=b.end?new Date(b.end):null}writeEnd(h,b){b.end=h?.getTime()??null}get isAllTime(){return this.equals(r.allTime)}get isEmpty(){return this.equals(r.empty)}readStart(h,b){return null!=b.start?new Date(b.start):null}writeStart(h,b){b.start=h?.getTime()??null}clone(){return new r({end:this.end,start:this.start})}equals(h){if(!h)return!1;
const b=this.start?.getTime()??this.start,k=this.end?.getTime()??this.end,x=h.start?.getTime()??h.start;h=h.end?.getTime()??h.end;return b===x&&k===h}expandTo(h,b=A.system){if(this.isEmpty||this.isAllTime)return this.clone();let k=this.start;k&&=y.truncateDate(k,h,b);let x=this.end;if(x){const F=y.truncateDate(x,h,b);x=x.getTime()===F.getTime()?F:y.offsetDate(F,1,h,b)}return new r({start:k,end:x})}intersection(h){if(!h)return this.clone();if(this.isEmpty||h.isEmpty)return r.empty;if(this.isAllTime)return h.clone();
if(h.isAllTime)return this.clone();var b=this.start?.getTime()??-Infinity;const k=this.end?.getTime()??Infinity,x=h.start?.getTime()??-Infinity;h=h.end?.getTime()??Infinity;let F,M;x>=b&&x<=k?F=x:b>=x&&b<=h&&(F=b);k>=x&&k<=h?M=k:h>=b&&h<=k&&(M=h);return null==F||null==M||isNaN(F)||isNaN(M)?r.empty:(b=new r,b.start=-Infinity===F?null:new Date(F),b.end=Infinity===M?null:new Date(M),b)}offset(h,b,k=A.system){if(this.isEmpty||this.isAllTime)return this.clone();const x=new r,{start:F,end:M}=this;null!=
F&&(x.start=y.offsetDate(F,h,b,k));null!=M&&(x.end=y.offsetDate(M,h,b,k));return x}union(h){if(!h||h.isEmpty)return this.clone();if(this.isEmpty)return h.clone();if(this.isAllTime||h.isAllTime)return H.clone();const b=null!=this.start&&null!=h.start?new Date(Math.min(this.start.getTime(),h.start.getTime())):null;h=null!=this.end&&null!=h.end?new Date(Math.max(this.end.getTime(),h.end.getTime())):null;return new r({start:b,end:h})}};a.__decorate([t.property({type:Date,json:{write:{allowNull:!0}}})],
c.prototype,"end",void 0);a.__decorate([w.reader("end")],c.prototype,"readEnd",null);a.__decorate([u.writer("end")],c.prototype,"writeEnd",null);a.__decorate([t.property({readOnly:!0,json:{read:!1}})],c.prototype,"isAllTime",null);a.__decorate([t.property({readOnly:!0,json:{read:!1}})],c.prototype,"isEmpty",null);a.__decorate([t.property({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"start",void 0);a.__decorate([w.reader("start")],c.prototype,"readStart",null);a.__decorate([u.writer("start")],
c.prototype,"writeStart",null);c=r=a.__decorate([d.subclass("esri.TimeExtent")],c);const H=new c,p=new c({start:void 0,end:void 0});return c})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/jsonMap ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/extensions/serializableProperty/reader ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b){function k(){g||=A.createTypeReader({types:x()});return g}function x(){J||={key:"type",base:null,typeMap:{"data-layer":a.DataLayerSource,"map-layer":H.MapLayerSource}};return J}var F,M;y=y.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});a.JoinTableDataSource=F=class extends t.JSONSupport{constructor(R){super(R);this.type="join-table"}readLeftTableSource(R,m,v){return k()(R,m,v)}castLeftTableSource(R){return u.ensureOneOfType(x(),
R)}readRightTableSource(R,m,v){return k()(R,m,v)}castRightTableSource(R){return u.ensureOneOfType(x(),R)}clone(){const {leftTableKey:R,rightTableKey:m,leftTableSource:v,rightTableSource:E,joinType:N}=this,l={leftTableKey:R,rightTableKey:m,leftTableSource:v?.clone()??void 0,rightTableSource:E?.clone()??void 0,joinType:N};return new F(l)}};c.__decorate([f.enumeration({joinTable:"join-table"})],a.JoinTableDataSource.prototype,"type",void 0);c.__decorate([C.property({type:String,json:{write:!0}})],a.JoinTableDataSource.prototype,
"leftTableKey",void 0);c.__decorate([C.property({type:String,json:{write:!0}})],a.JoinTableDataSource.prototype,"rightTableKey",void 0);c.__decorate([C.property({json:{write:!0}})],a.JoinTableDataSource.prototype,"leftTableSource",void 0);c.__decorate([w.reader("leftTableSource")],a.JoinTableDataSource.prototype,"readLeftTableSource",null);c.__decorate([z.cast("leftTableSource")],a.JoinTableDataSource.prototype,"castLeftTableSource",null);c.__decorate([C.property({json:{write:!0}})],a.JoinTableDataSource.prototype,
"rightTableSource",void 0);c.__decorate([w.reader("rightTableSource")],a.JoinTableDataSource.prototype,"readRightTableSource",null);c.__decorate([z.cast("rightTableSource")],a.JoinTableDataSource.prototype,"castRightTableSource",null);c.__decorate([f.enumeration(y)],a.JoinTableDataSource.prototype,"joinType",void 0);a.JoinTableDataSource=F=c.__decorate([d.subclass("esri.layers.support.source.JoinTableDataSource")],a.JoinTableDataSource);let g=null,J=null;z={key:"type",base:null,typeMap:{"join-table":a.JoinTableDataSource,
"query-table":p.QueryTableDataSource,raster:h.RasterDataSource,table:b.TableDataSource}};a.DataLayerSource=M=class extends t.JSONSupport{constructor(R){super(R);this.type="data-layer"}clone(){const {fields:R,dataSource:m}=this;return new M({fields:R,dataSource:m})}};c.__decorate([f.enumeration({dataLayer:"data-layer"})],a.DataLayerSource.prototype,"type",void 0);c.__decorate([C.property({type:[r],json:{write:!0}})],a.DataLayerSource.prototype,"fields",void 0);c.__decorate([C.property({types:z,json:{write:!0}})],
a.DataLayerSource.prototype,"dataSource",void 0);a.DataLayerSource=M=c.__decorate([d.subclass("esri.layers.support.source.DataLayerSource")],a.DataLayerSource);a.DataLayerSource.from=u.ensureType(a.DataLayerSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Field":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./domains ./fieldType".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r){var H;const p=new c.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});c=H=class extends y.JSONSupport{constructor(h){super(h);
this.alias=null;this.defaultValue=void 0;this.domain=this.description=null;this.editable=!0;this.length=void 0;this.name=null;this.nullable=!0;this.valueType=this.type=null;this.visible=!0}readDescription(h,{description:b}){h=null;try{h=b?JSON.parse(b):null}catch(k){}return h?.value??null}readValueType(h,{description:b}){h=null;try{h=b?JSON.parse(b):null}catch(k){}return h?p.fromJSON(h.fieldValueType):null}clone(){return new H({alias:this.alias,defaultValue:this.defaultValue,description:this.description,
domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};a.__decorate([t.property({type:String,json:{write:!0}})],c.prototype,"alias",void 0);a.__decorate([t.property({type:[String,Number],json:{write:{allowNull:!0}}})],c.prototype,"defaultValue",void 0);a.__decorate([t.property()],c.prototype,"description",void 0);a.__decorate([d.reader("description")],c.prototype,"readDescription",
null);a.__decorate([t.property({types:A.types,json:{read:{reader:A.fromJSON},write:!0}})],c.prototype,"domain",void 0);a.__decorate([t.property({type:Boolean,json:{write:!0}})],c.prototype,"editable",void 0);a.__decorate([t.property({type:C.Integer,json:{write:{overridePolicy(h){return{enabled:Number.isFinite(h)}}}}})],c.prototype,"length",void 0);a.__decorate([t.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);a.__decorate([t.property({type:Boolean,json:{write:!0}})],c.prototype,
"nullable",void 0);a.__decorate([w.enumeration(r.kebabDict)],c.prototype,"type",void 0);a.__decorate([t.property()],c.prototype,"valueType",void 0);a.__decorate([d.reader("valueType",["description"])],c.prototype,"readValueType",null);a.__decorate([t.property({type:Boolean,json:{read:!1}})],c.prototype,"visible",void 0);return c=H=a.__decorate([u.subclass("esri.layers.support.Field")],c)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),
function(a,c,y,t,C,z){c={key:"type",base:t,typeMap:{range:z,"coded-value":y,inherited:C}};a.CodedValueDomain=y;a.DomainBase=t;a.InheritedDomain=C;a.RangeDomain=z;a.fromJSON=function(f){if(!f?.type)return null;switch(f.type){case "range":return z.fromJSON(f);case "codedValue":return y.fromJSON(f);case "inherited":return C.fromJSON(f)}return null};a.types=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/tslib.es6 ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./CodedValue ./Domain".split(" "),
function(a,c,y,t,C,z,f,w,d){var u;t=u=class extends d{constructor(A){super(A);this.codedValues=null;this.type="coded-value"}getName(A){let r=null;if(this.codedValues){const H=String(A);this.codedValues.some(p=>{String(p.code)===H&&(r=p.name);return!!r})}return r}clone(){return new u({codedValues:c.clone(this.codedValues),name:this.name})}};a.__decorate([y.property({type:[w.CodedValue],json:{write:!0}})],t.prototype,"codedValues",void 0);a.__decorate([z.enumeration({codedValue:"coded-value"})],t.prototype,
"type",void 0);return t=u=a.__decorate([f.subclass("esri.layers.support.CodedValueDomain")],t)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f,w){var d;a.CodedValue=d=class extends y.JSONSupport{constructor(u){super(u);this.code=this.name=null}clone(){return new d({name:this.name,
code:this.code})}};c.__decorate([t.property({type:String,json:{write:!0}})],a.CodedValue.prototype,"name",void 0);c.__decorate([t.property({type:[String,Number],json:{write:!0}})],a.CodedValue.prototype,"code",void 0);a.CodedValue=d=c.__decorate([w.subclass("esri.layers.support.CodedValue")],a.CodedValue);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/Domain":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f,w,d){c=new c.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});y=class extends y.JSONSupport{constructor(u){super(u);this.type=this.name=null}};a.__decorate([t.property({type:String,json:{write:!0}})],y.prototype,"name",void 0);a.__decorate([w.enumeration(c)],y.prototype,"type",void 0);return y=a.__decorate([d.subclass("esri.layers.support.Domain")],y)})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/tslib.es6 ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(a,c,y,t,C,z,f,w){var d;c=d=class extends w{constructor(u){super(u);this.type="inherited"}clone(){return new d}};a.__decorate([z.enumeration({inherited:"inherited"})],c.prototype,"type",void 0);return c=d=a.__decorate([f.subclass("esri.layers.support.InheritedDomain")],c)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./Domain".split(" "),
function(a,c,y,t,C,z,f,w){var d;y=d=class extends w{constructor(u){super(u);this.minValue=this.maxValue=null;this.type="range"}clone(){return new d({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};a.__decorate([c.property({json:{type:[Number],read:{source:"range",reader(u,A){return A.range?.[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(u,A,r){A[r]=[this.minValue||0,u]}}}})],y.prototype,"maxValue",void 0);a.__decorate([c.property({json:{type:[Number],
read:{source:"range",reader(u,A){return A.range?.[0]}},write:{target:"range",writer(u,A,r){A[r]=[u,this.maxValue||0]}}}})],y.prototype,"minValue",void 0);a.__decorate([z.enumeration({range:"range"})],y.prototype,"type",void 0);return y=d=a.__decorate([f.subclass("esri.layers.support.RangeDomain")],y)})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/RandomLCG ../../../core/has ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f,w,d){var u;a.MapLayerSource=u=class extends y.JSONSupport{constructor(A){super(A);this.type="map-layer"}clone(){const {mapLayerId:A,gdbVersion:r}=this;return new u({mapLayerId:A,gdbVersion:r})}};c.__decorate([w.enumeration({mapLayer:"map-layer"})],a.MapLayerSource.prototype,"type",void 0);c.__decorate([t.property({type:C.Integer,json:{write:!0}})],a.MapLayerSource.prototype,"mapLayerId",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],a.MapLayerSource.prototype,
"gdbVersion",void 0);a.MapLayerSource=u=c.__decorate([d.subclass("esri.layers.support.source.MapLayerSource")],a.MapLayerSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../geometry ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../geometry/SpatialReference ../../../geometry/support/typeUtils".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r){var H;a.QueryTableDataSource=H=class extends t.JSONSupport{constructor(p){super(p);this.type="query-table"}clone(){const {workspaceId:p,query:h,oidFields:b,spatialReference:k,geometryType:x}=this,F={workspaceId:p,query:h,oidFields:b,spatialReference:k?.clone()??void 0,geometryType:x};return new H(F)}};c.__decorate([d.enumeration({queryTable:"query-table"})],a.QueryTableDataSource.prototype,"type",void 0);c.__decorate([C.property({type:String,json:{write:!0}})],a.QueryTableDataSource.prototype,
"workspaceId",void 0);c.__decorate([C.property({type:String,json:{write:!0}})],a.QueryTableDataSource.prototype,"query",void 0);c.__decorate([C.property({type:String,json:{write:!0}})],a.QueryTableDataSource.prototype,"oidFields",void 0);c.__decorate([C.property({type:A,json:{write:!0}})],a.QueryTableDataSource.prototype,"spatialReference",void 0);c.__decorate([d.enumeration(r.featureGeometryTypeKebabDictionary)],a.QueryTableDataSource.prototype,"geometryType",void 0);a.QueryTableDataSource=H=c.__decorate([u.subclass("esri.layers.support.source.QueryTableDataSource")],
a.QueryTableDataSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f,w,d){var u;a.RasterDataSource=u=class extends y.JSONSupport{constructor(A){super(A);
this.type="raster"}clone(){const {workspaceId:A,dataSourceName:r}=this;return new u({workspaceId:A,dataSourceName:r})}};c.__decorate([w.enumeration({raster:"raster"})],a.RasterDataSource.prototype,"type",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],a.RasterDataSource.prototype,"dataSourceName",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],a.RasterDataSource.prototype,"workspaceId",void 0);a.RasterDataSource=u=c.__decorate([d.subclass("esri.layers.support.source.RasterDataSource")],
a.RasterDataSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f,w,d){var u;a.TableDataSource=u=class extends y.JSONSupport{constructor(A){super(A);
this.type="table"}clone(){const {workspaceId:A,gdbVersion:r,dataSourceName:H}=this;return new u({workspaceId:A,gdbVersion:r,dataSourceName:H})}};c.__decorate([w.enumeration({table:"table"})],a.TableDataSource.prototype,"type",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],a.TableDataSource.prototype,"workspaceId",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],a.TableDataSource.prototype,"gdbVersion",void 0);c.__decorate([t.property({type:String,json:{write:!0}})],
a.TableDataSource.prototype,"dataSourceName",void 0);a.TableDataSource=u=c.__decorate([d.subclass("esri.layers.support.source.TableDataSource")],a.TableDataSource);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/FullTextSearch":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(a,c,y,t,C,z,f,w){c=class extends c.ClonableMixin(y.JSONSupport){constructor(d){super(d);this.searchType=this.searchTerm=this.operator=this.onFields=null}};a.__decorate([t.property({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&0<this.onFields.length}}}}})],c.prototype,"onFields",void 0);a.__decorate([t.property({type:String,json:{write:!0}})],c.prototype,"operator",void 0);a.__decorate([t.property({type:String,json:{write:!0}})],c.prototype,"searchTerm",
void 0);a.__decorate([t.property({type:String,json:{write:!0}})],c.prototype,"searchType",void 0);return c=a.__decorate([w.subclass("esri.rest.support.FullTextSearch")],c)})},"esri/core/Clonable":function(){define("exports ../chunks/tslib.es6 ./Accessor ./has ./lang ./Logger ./maybe ./accessorSupport/PropertyOrigin ./accessorSupport/utils ./accessorSupport/decorators/subclass".split(" "),function(a,c,y,t,C,z,f,w,d,u){t=A=>{A=class extends A{clone(){var r=d.getProperties(this);f.assertIsSome(r,"unable to clone instance of non-accessor class");
var H=r.metadata;const p=r.store,h={};r=new Map;for(var b in H){var k=H[b];const x=p?.originOf(b),F=k.clonable;if(k.readOnly||!1===F||x!==w.OriginId.USER&&x!==w.OriginId.DEFAULTS&&x!==w.OriginId.WEB_MAP&&x!==w.OriginId.WEB_SCENE)continue;k=this[b];let M=null;M="function"===typeof F?F(k):"reference"===F?k:C.tryClone(k);if(null==k||null!=M)x===w.OriginId.DEFAULTS?r.set(b,M):h[b]=M}H=new (Object.getPrototypeOf(this).constructor)(h);if(r.size&&(b=d.getProperties(H)?.store))for(const [x,F]of r)b.set(x,
F,w.OriginId.DEFAULTS);return H}};return A=c.__decorate([u.subclass("esri.core.Clonable")],A)};a.Clonable=class extends t(y){};a.Clonable=c.__decorate([u.subclass("esri.core.Clonable")],a.Clonable);a.ClonableMixin=t;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/QuantizationParameters":function(){define("../../chunks/tslib.es6 ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../geometry/Extent".split(" "),
function(a,c,y,t,C,z,f,w,d,u){var A;c=new y.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});t=A=class extends t.JSONSupport{constructor(r){super(r);this.extent=null;this.mode="view";this.originPosition="upper-left";this.tolerance=1}clone(){return new A(C.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};a.__decorate([z.property({type:u,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],t.prototype,"extent",void 0);
a.__decorate([z.property({type:["view","edit"],json:{write:!0}})],t.prototype,"mode",void 0);a.__decorate([z.property({type:String,json:{read:c.read,write:c.write}})],t.prototype,"originPosition",void 0);a.__decorate([z.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],t.prototype,"tolerance",void 0);return t=A=a.__decorate([d.subclass("esri.rest.support.QuantizationParameters")],t)})},"esri/rest/support/spatialRelationships":function(){define(["exports",
"../../core/jsonMap"],function(a,c){c=new c.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});a.spatialRelKebabDict=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/support/StatisticDefinition":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer".split(" "),function(a,c,y,t,C,z,f,w,d){var u;c=new c.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",
percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});y=u=class extends y.JSONSupport{constructor(A){super(A);this.maxVertexCount=this.maxRecordCount=this.maxPointCount=void 0;this.statisticParameters=this.statisticType=this.outStatisticFieldName=this.onStatisticField=null}writeStatisticParameters(A,r){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)r.statisticParameters=
t.clone(A)}clone(){return new u({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:t.clone(this.statisticParameters)})}};a.__decorate([C.property({type:Number,json:{write:!0}})],y.prototype,"maxPointCount",void 0);a.__decorate([C.property({type:Number,json:{write:!0}})],y.prototype,"maxRecordCount",void 0);
a.__decorate([C.property({type:Number,json:{write:!0}})],y.prototype,"maxVertexCount",void 0);a.__decorate([C.property({type:String,json:{write:!0}})],y.prototype,"onStatisticField",void 0);a.__decorate([C.property({type:String,json:{write:!0}})],y.prototype,"outStatisticFieldName",void 0);a.__decorate([C.property({type:String,json:{read:{source:"statisticType",reader:c.read},write:{target:"statisticType",writer:c.write}}})],y.prototype,"statisticType",void 0);a.__decorate([C.property({type:Object})],
y.prototype,"statisticParameters",void 0);a.__decorate([d.writer("statisticParameters")],y.prototype,"writeStatisticParameters",null);return y=u=a.__decorate([w.subclass("esri.rest.support.StatisticDefinition")],y)})},"esri/symbols/support/ElevationInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ./FeatureExpressionInfo ./unitConversionUtils".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H){var p;z=c.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"});c=new c.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});y=p=class extends y.JSONSupport{constructor(h){super(h);this.offset=null}readFeatureExpressionInfo(h,b){if(null!=h)return h;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}}writeFeatureExpressionInfo(h,
b,k,x){b[k]=h.write({},x);"0"===h.expression&&(b.featureExpression={value:0})}get mode(){const {offset:h,featureExpressionInfo:b}=this;return this._isOverridden("mode")?this._get("mode"):null!=h||b?"relative-to-ground":"on-the-ground"}set mode(h){this._override("mode",h)}set unit(h){this._set("unit",h)}write(h,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(h,b):null}clone(){return new p({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?
this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(h){return this.mode===h.mode&&this.offset===h.offset&&this.unit===h.unit&&t.equalsMaybe(this.featureExpressionInfo,h.featureExpressionInfo)}};a.__decorate([C.property({type:r,json:{write:!0}})],y.prototype,"featureExpressionInfo",void 0);a.__decorate([d.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],y.prototype,"readFeatureExpressionInfo",null);a.__decorate([A.writer("featureExpressionInfo",{featureExpressionInfo:{type:r},
"featureExpression.value":{type:[0]}})],y.prototype,"writeFeatureExpressionInfo",null);a.__decorate([C.property({type:z.apiValues,nonNullable:!0,json:{type:z.jsonValues,read:z.read,write:{writer:z.write,isRequired:!0}}})],y.prototype,"mode",null);a.__decorate([C.property({type:Number,json:{write:!0}})],y.prototype,"offset",void 0);a.__decorate([C.property({type:H.supportedUnits,json:{type:String,read:c.read,write:c.write}})],y.prototype,"unit",null);return y=p=a.__decorate([u.subclass("esri.layers.support.ElevationInfo")],
y)})},"esri/symbols/support/FeatureExpressionInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldUtils".split(" "),function(a,c,y,t,C,z,f,w){var d;c=d=class extends c.JSONSupport{constructor(u){super(u)}async collectRequiredFields(u,A){return w.collectArcadeFieldNames(u,A,this.expression)}clone(){return new d({expression:this.expression,
title:this.title})}equals(u){return this.expression===u.expression&&this.title===u.title}};a.__decorate([y.property({type:String,json:{write:!0}})],c.prototype,"expression",void 0);a.__decorate([y.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=d=a.__decorate([f.subclass("esri.layers.support.FeatureExpressionInfo")],c)})},"esri/symbols/support/unitConversionUtils":function(){define(["exports","../../renderers/support/lengthUtils"],function(a,c){const y=function(){const t=
Object.keys(c.meterIn);t.sort();return t}();a.getMetersPerUnit=function(t){return 1/(c.meterIn[t]||1)};a.supportedUnits=y;a.supportsUnit=function(t){return!!t&&null!=c.meterIn[t]};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../core/unitUtils","../../geometry/support/Ellipsoid"],function(a,c,y){c={unknown:1,inches:c.convertUnit(1,"meters","inches"),feet:c.convertUnit(1,"meters","feet"),"us-feet":c.convertUnit(1,
"meters","us-feet"),yards:c.convertUnit(1,"meters","yards"),miles:c.convertUnit(1,"meters","miles"),"nautical-miles":c.convertUnit(1,"meters","nautical-miles"),millimeters:c.convertUnit(1,"meters","millimeters"),centimeters:c.convertUnit(1,"meters","centimeters"),decimeters:c.convertUnit(1,"meters","decimeters"),meters:c.convertUnit(1,"meters","meters"),kilometers:c.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/c.lengthToDegrees(1,"meters",y.earth.radius)};a.meterIn=c;Object.defineProperty(a,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment":function(){define("exports ../../../../core/has ../../../../core/LRUCache ../../../../core/MapUtils ../../../../core/promiseUtils ../../../../core/unitUtils ../../../../symbols/support/unitConversionUtils".split(" "),function(a,c,y,t,C,z,f){function w(H,{x:p,y:h,z:b,spatialReference:k}){return`${H}-${p}-${h}-${b??0}}-wkid:${k?.wkid}`}function d(){return[]}class u{async alignCandidates(H,
p,h){return H}notifyElevationSourceChange(){}}class A{constructor(H,p){this._elevationInfo=H;this._alignPointsInFeatures=p;this._alignmentsCache=new y.LRUCache(1024);this._cacheVersion=0}async alignCandidates(H,p,h){const b=this._elevationInfo;return null==b||"absolute-height"!==b.mode||b.featureExpressionInfo?this._alignComputedElevationCandidates(H,p,h):(this._alignAbsoluteElevationCandidates(H,p,b),H)}notifyElevationSourceChange(){this._alignmentsCache.clear();this._cacheVersion++}_alignAbsoluteElevationCandidates(H,
p,h){const {offset:b,unit:k}=h;if(null!=b){p=z.getMetersPerVerticalUnitForSR(p);h=f.getMetersPerUnit(k??"meters");p=h/p*b;for(const x of H)switch(x.type){case "edge":x.start.z+=p;x.end.z+=p;continue;case "vertex":x.target.z+=p}}}async _alignComputedElevationCandidates(H,p,h){var b=new Map;for(const J of H)t.getOrCreateMapValue(b,J.objectId,d).push(J);const [k,x,F]=this._prepareQuery(b,p);b=await this._alignPointsInFeatures(k,h);C.throwIfAborted(h);if(F!==this._cacheVersion)return this._alignComputedElevationCandidates(H,
p,h);this._applyCacheAndResponse(k,b,x);const {drapedObjectIds:M,failedObjectIds:g}=b;p=[];for(const J of H)({objectId:H}=J),M.has(H)&&"edge"===J.type&&(J.draped=!0),g.has(H)||p.push(J);return p}_prepareQuery(H,p){const h=[],b=[];for(const [k,x]of H){H=[];for(const F of x)this._addToQueriesOrCachedResult(k,F.target,H,b),"edge"===F.type&&(this._addToQueriesOrCachedResult(k,F.start,H,b),this._addToQueriesOrCachedResult(k,F.end,H,b));0!==H.length&&h.push({objectId:k,points:H})}return[{spatialReference:p.toJSON(),
pointsInFeatures:h},b,this._cacheVersion]}_addToQueriesOrCachedResult(H,p,h,b){H=w(H,p);H=this._alignmentsCache.get(H);null!=H?b.push(new r(p,H)):h.push(p)}_applyCacheAndResponse(H,{elevations:p,drapedObjectIds:h,failedObjectIds:b},k){for(var x of k)x.apply();k=0;x=this._alignmentsCache;for(const {objectId:F,points:M}of H.pointsInFeatures)if(b.has(F))k+=M.length;else{H=!h.has(F);for(const g of M){const J=w(F,g),R=p[k++];g.z=R;H&&x.put(J,R,1)}}}}class r{constructor(H,p){this.point=H;this.z=p}apply(){this.point.z=
this.z}}a.getSnappingCandidateElevationAligner=function(H=!1,p){if(H){const {elevationInfo:h,alignPointsInFeatures:b}=p;return new A(h,b)}return new u};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/snappingCandidateElevationFilter":function(){define(["exports","../../../../core/has"],function(a,c){function y(d){return 1>=d.distance}function t(d,u,{x:A,y:r,z:H}){const {start:p,end:h,target:b}=d;if(!d.draped){const F=h.x-p.x;var k=h.y-
p.y,x=h.z-p.z;const M=Math.min(1,Math.max(0,((u.x-p.x)*F+(u.y-p.y)*k+x*(u.z-p.z))/(F*F+k*k+x*x)));k=p.y+k*M;x=p.z+x*M;b.x=p.x+F*M;b.y=k;b.z=x}A=(u.x-b.x)/A;r=(u.y-b.y)/r;u=(u.z-b.z)/H;d.distance=Math.sqrt(A*A+r*r+u*u)}function C(d,u,{x:A,y:r,z:H}){const {target:p}=d;A=(u.x-p.x)/A;r=(u.y-p.y)/r;u=(u.z-p.z)/H;d.distance=Math.sqrt(A*A+r*r+u*u)}function z(d,u){return d.distance-u.distance}class f{filter(d,u){return u}notifyElevationSourceChange(){}}class w{filter(d,u){const {point:A,distance:r}=d;({z:d}=
A);if(null==d||0===u.length)return u;d="number"===typeof r?{x:r,y:r,z:r}:r;u=this._updateCandidatesTo3D(u,A,d).filter(y);u.sort(z);return u}_updateCandidatesTo3D(d,u,A){for(const r of d)switch(r.type){case "edge":t(r,u,A);continue;case "vertex":C(r,u,A)}return d}}a.getSnappingCandidateElevationFilter=function(d=!1){return d?new w:new f};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/symbologySnappingCandidates":function(){define("exports ../../../../core/has ../../../../core/lang ../../../../core/LRUCache ../../../../core/promiseUtils ../../../../core/string".split(" "),
function(a,c,y,t,C,z){function f(u){switch(u.type){case "vertex":const {objectId:A,target:r}=u;return z.numericHash(`${A}-vertex-${r.x}-${r.y}-${r.z??0}`).toString();case "edge":const {objectId:H,start:p,end:h}=u;return z.numericHash(`${H}-edge-${p.x}-${p.y}-${p.z??0}-to-${h.x}-${h.y}-${h.z??0}`).toString();default:return""}}class w{async fetch(){return[]}notifySymbologyChange(){}}class d{constructor(u){this._getSymbologyCandidates=u;this._candidatesCache=new t.LRUCache(1024);this._cacheVersion=0}async fetch(u,
A){if(0===u.length)return[];const r=[],H=[],p=this._candidatesCache;for(var h of u){var b=f(h),k=p.get(b);if(k)for(var x of k)H.push(y.clone(x));else r.push(h),p.put(b,[],1)}if(0===r.length)return H;h=this._cacheVersion;const {candidates:F,sourceCandidateIndices:M}=await this._getSymbologyCandidates(r,A);C.throwIfAborted(A);if(h!==this._cacheVersion)return this.fetch(u,A);u=[];({length:A}=F);for(h=0;h<A;++h)b=F[h],k=f(r[M[h]]),x=p.get(k),x.push(b),p.put(k,x,x.length),u.push(y.clone(b));return H.concat(u)}notifySymbologyChange(){this._candidatesCache.clear();
this._cacheVersion++}}a.getSymbologySnappingCandidatesFetcher=function(u=!1,A){return u?new d(A):new w};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/arrayUtils ../../../../../core/AsyncSequence ../../../../../core/asyncUtils ../../../../../core/handleUtils ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/SetUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/support/UpdatingHandles ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/arcgisLayerUrl ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../rest/support/Query ./PendingFeatureTile".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x,F,M,g,J,R){a.FeatureServiceTiledFetcher=class extends y{get _minimumVerticesPerFeature(){switch(this.store?.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}get _mandatoryOutFields(){const m=new Set;this.objectIdField&&m.add(this.objectIdField);this.globalIdField&&m.add(this.globalIdField);return m}set outFields(m){const v=this._get("outFields");
m=A.union(m,this._mandatoryOutFields);A.equals(m,v)||(this._set("outFields",m),A.isSubsetOf(m,v)||this.refresh())}get outFields(){return this._get("outFields")??this._mandatoryOutFields}set filter(m){const v=this._get("filter");m=this._filterProperties(m);JSON.stringify(v)!==JSON.stringify(m)&&this._set("filter",m)}set customParameters(m){const v=this._get("customParameters");JSON.stringify(v)!==JSON.stringify(m)&&this._set("customParameters",m)}get _configuration(){return{filter:this.filter,customParameters:this.customParameters,
tileInfo:this.tileInfo,tileSize:this.tileSize}}set tileInfo(m){const v=this._get("tileInfo");v===m||null!=m&&null!=v&&JSON.stringify(m)===JSON.stringify(v)||(this._set("tileInfo",m),this.store.tileInfo=m)}set tileSize(m){this._get("tileSize")!==m&&this._set("tileSize",m)}get updating(){return this.updatingExcludingEdits||this._pendingEdits.updating}get updatingExcludingEdits(){return this._updatingHandles.updating}get hasZ(){return this.store.featureStore.hasZ}constructor(m){super(m);this.suspended=
!0;this.tilesOfInterest=[];this.availability=0;this._pendingTiles=new Map;this._updatingHandles=new h.UpdatingHandles;this._pendingEdits=new C.AsyncSequence;this._pendingEditsAbortController=new AbortController}initialize(){this._initializeFetchExtent();this._updatingHandles.add(()=>this._configuration,()=>this.refresh());this._updatingHandles.add(()=>this.tilesOfInterest,(m,v)=>{t.equals(m,v,({id:E},{id:N})=>E===N)||this._process()},u.sync);this.addHandles(u.when(()=>!this.suspended,()=>this._process()))}destroy(){this._pendingTiles.forEach(m=>
this._deletePendingTile(m));this._pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this._pendingEditsAbortController.abort();this._pendingEditsAbortController=null;this._updatingHandles.destroy()}refresh(){this.store.refresh();this._pendingTiles.forEach(m=>this._deletePendingTile(m));this._process()}applyEdits(m){this._pendingEdits.push(m,async v=>{if(0!==v.addedFeatures.length||0!==v.updatedFeatures.length||0!==v.deletedFeatures.length){for(const [,E]of this._pendingTiles)E.reset();
v={...v,deletedFeatures:v.deletedFeatures.map(({objectId:E,globalId:N})=>E&&-1!==E?E:this._lookupObjectIdByGlobalId(N))};await this._updatingHandles.addPromise(this.store.processEdits(v,(E,N)=>this._queryFeaturesById(E,N),this._pendingEditsAbortController.signal));this._processPendingTiles()}})}_initializeFetchExtent(){if(this.capabilities.query.supportsExtent&&F.isHostedAgolService(this.url)){var m=z.createTask(async v=>{try{const E=await g.executeQueryForExtent(this.url,new J({where:"1\x3d1",outSpatialReference:this.spatialReference,
cacheHint:this.capabilities.query.supportsCacheHint??void 0}),{query:this._configuration.customParameters,signal:v});this.store.extent=b.fromJSON(E.data?.extent)}catch(E){d.throwIfAbortError(E),w.getLogger(this).warn("Failed to fetch data extent",E)}});this._updatingHandles.addPromise(m.promise.then(()=>this._process()));this.addHandles(f.makeHandle(()=>m.abort()))}}get debugInfo(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this._pendingTiles.values()).map(m=>
m.debugInfo),storedTiles:this.store.debugInfo}}_process(){this._markTilesNotAlive();this._createPendingTiles();this._deletePendingTiles();this._processPendingTiles()}_markTilesNotAlive(){for(const [,m]of this._pendingTiles)m.alive=!1}_createPendingTiles(){if(!this.suspended){var m=this._collectMissingTilesInfo();this._setAvailability(null==m?1:m.coveredArea/m.fullArea);if(null!=m)for(const {data:v,resolution:E}of m.missingTiles)(m=this._pendingTiles.get(v.id))?(m.resolution=E,m.alive=!0):this._createPendingTile(v,
E)}}_collectMissingTilesInfo(){let m=null;for(let v=this.tilesOfInterest.length-1;0<=v;v--){const E=this.store.process(this.tilesOfInterest[v],(N,l)=>this._verifyTileComplexity(N,l),this.outFields);null==m?m=E:m.prepend(E)}return m}_deletePendingTiles(){for(const [,m]of this._pendingTiles)m.alive||this._deletePendingTile(m)}_processPendingTiles(){const m={fetchCount:(v,E)=>this._fetchCount(v,E),fetchFeatures:(v,E,N)=>this._fetchFeatures(v,E,N),finish:(v,E)=>this._finishPendingTile(v,E),resume:()=>
this._processPendingTiles()};if(this._ensureFetchAllCounts(m))for(const [,v]of this._pendingTiles)this._verifyTileComplexity(this.store.getFeatureCount(v.data),v.resolution)&&this._updatingHandles.addPromise(v.process(m))}_verifyTileComplexity(m,v){return this._verifyVertexComplexity(m)&&this._verifyFeatureDensity(m,v)}_verifyVertexComplexity(m){return 1E6>m*this._minimumVerticesPerFeature}_verifyFeatureDensity(m,v){if(null==this.tileInfo)return!1;v*=this.tileSize;return 1>25/(v*v)*m}_ensureFetchAllCounts(m){let v=
!0;for(const [,E]of this._pendingTiles)E.state.type<R.StateType.FETCHED_COUNT&&this._updatingHandles.addPromise(E.process(m)),E.state.type<=R.StateType.FETCH_COUNT&&(v=!1);return v}_finishPendingTile(m,v){this.store.add(m.data,v);this._deletePendingTile(m);this._updateAvailability()}_updateAvailability(){const m=this._collectMissingTilesInfo();this._setAvailability(null==m?1:m.coveredArea/m.fullArea)}_setAvailability(m){this._set("availability",m)}_createPendingTile(m,v){v=new R.PendingFeatureTile(m,
v);this._pendingTiles.set(m.id,v);return v}_deletePendingTile(m){m.reset();this._pendingTiles.delete(m.data.id)}async _fetchCount(m,v){return this.store.fetchCount(m.data,this.url,this._createCountQuery(m),{query:this.customParameters,timeout:6E5,signal:v})}async _fetchFeatures(m,v,E){let N=0;const l=[];let B=0,D=v;for(;;){const G=this._createFeaturesQuery(m),S=this._setPagingParameters(G,N,D),{features:P,exceededTransferLimit:U}=await this._queryFeatures(G,E);S&&(N+=G.num);B+=P.length;for(const Y of P)l.push(Y);
D=v-B;if(!S||!U||0>=D)return l}}_filterProperties(m){return null==m?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:m.where||"1\x3d1",timeExtent:m.timeExtent,gdbVersion:m.gdbVersion}}_lookupObjectIdByGlobalId(m){const v=this.globalIdField,E=this.objectIdField;if(null==v)throw Error("Expected globalIdField to be defined");let N=null;this.store.featureStore.forEach(l=>{m===l.attributes[v]&&(N=l.objectId??l.attributes[E])});if(null==N)throw Error(`Expected to find a feature with globalId ${m}`);
return N}_queryFeaturesById(m,v){const E=this._createFeaturesQuery();E.objectIds=m;return this._queryFeatures(E,v)}_queryFeatures(m,v){return this.capabilities.query.supportsFormatPBF?this._queryFeaturesPBF(m,v):this._queryFeaturesJSON(m,v)}async _queryFeaturesPBF(m,v){const {sourceSpatialReference:E}=this;({data:m}=await g.executeQueryPBF(this.url,m,new M.OptimizedFeatureSetParserContext({sourceSpatialReference:E}),{query:this._configuration.customParameters,timeout:6E5,signal:v}));return x.unquantizeOptimizedFeatureSet(m)}async _queryFeaturesJSON(m,
v){const {sourceSpatialReference:E}=this;({data:m}=await g.executeQuery(this.url,m,E,{query:this._configuration.customParameters,timeout:6E5,signal:v}));return x.convertFromFeatureSet(m,this.objectIdField)}_createCountQuery(m){m=this._createBaseQuery(m);this.capabilities.query.supportsCacheHint&&(m.cacheHint=!0);return m}_createFeaturesQuery(m=null){const v=this._createBaseQuery(m);var E=null!=m?.data?this.store.getAttributesForTile(m?.data?.id):null;E=A.union(A.difference(this.outFields,E??new Set),
this._mandatoryOutFields);v.outFields=Array.from(E);v.returnGeometry=!0;null!=m&&(this.capabilities.query.supportsResultType?v.resultType="tile":this.capabilities.query.supportsCacheHint&&(v.cacheHint=!0));return v}_createBaseQuery(m){m=new J({returnZ:this.hasZ,returnM:!1,geometry:null!=this.tileInfo&&null!=m?k.toExtent(m.data.extent,this.tileInfo.spatialReference):void 0});const v=this._configuration.filter;null!=v&&(m.where=v.where,m.gdbVersion=v.gdbVersion,m.timeExtent=v.timeExtent);m.outSpatialReference=
this.spatialReference;return m}_setPagingParameters(m,v,E){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:N,supportsCacheHint:l,tileMaxRecordCount:B,maxRecordCount:D,supportsResultType:G}=this.capabilities.query,S=N?J.MAX_MAX_RECORD_COUNT_FACTOR:1,P=S*((G||l)&&B?B:D||2E3);m.start=v;N?(m.maxRecordCountFactor=Math.min(S,Math.ceil(E/P)),m.num=Math.min(E,m.maxRecordCountFactor*P)):m.num=Math.min(E,P);return!0}};c.__decorate([r.property({constructOnly:!0})],
a.FeatureServiceTiledFetcher.prototype,"url",void 0);c.__decorate([r.property({constructOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);c.__decorate([r.property({constructOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"globalIdField",void 0);c.__decorate([r.property({constructOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);c.__decorate([r.property({constructOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"sourceSpatialReference",void 0);c.__decorate([r.property({constructOnly:!0})],
a.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);c.__decorate([r.property({constructOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"store",void 0);c.__decorate([r.property({readOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"_minimumVerticesPerFeature",null);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,"_mandatoryOutFields",null);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,"outFields",null);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,
"suspended",void 0);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,"filter",null);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,"customParameters",null);c.__decorate([r.property({readOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"_configuration",null);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,"tileInfo",null);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,"tileSize",null);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,
"tilesOfInterest",void 0);c.__decorate([r.property({readOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"updating",null);c.__decorate([r.property({readOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"updatingExcludingEdits",null);c.__decorate([r.property({readOnly:!0})],a.FeatureServiceTiledFetcher.prototype,"availability",void 0);c.__decorate([r.property()],a.FeatureServiceTiledFetcher.prototype,"hasZ",null);a.FeatureServiceTiledFetcher=c.__decorate([p.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],
a.FeatureServiceTiledFetcher);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/AsyncSequence":function(){define(["exports","../chunks/tslib.es6","./Accessor","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass"],function(a,c,y,t,C){a.AsyncSequence=class extends y{constructor(){super(...arguments);this.updating=!1;this._pending=[]}push(z,f){this._pending.push({promise:z,callback:f});1===this._pending.length&&this._process()}_process(){if(this._pending.length){this.updating=
!0;var z=this._pending[0];z.promise.then(f=>z.callback(f)).catch(()=>{}).then(()=>{this._pending.shift();this._process()})}else this.updating=!1}};c.__decorate([t.property()],a.AsyncSequence.prototype,"updating",void 0);a.AsyncSequence=c.__decorate([C.subclass("esri.core.AsyncSequence")],a.AsyncSequence);Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(a,
c,y){function t(r){if(null==r)return null;r=c.urlToObject(r);r=r?.path.match(d)||r?.path.match(u);if(!r)return null;const [,H,p,h,b]=r;r=p.indexOf("/");return{title:z(-1!==r?p.slice(r+1):p),serverType:f[h.toLowerCase()],sublayer:null!=b&&""!==b?parseInt(b,10):null,url:{path:H}}}function C(r){return(r=c.urlToObject(r).path.match(A))?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function z(r){r=r.replaceAll(/\s*[/_]+\s*/g," ");return r[0].toUpperCase()+r.slice(1)}const f={mapserver:"MapServer",imageserver:"ImageServer",
featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer"},w=Object.values(f),d=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${w.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),u=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${w.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),A=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;a.cleanTitle=z;a.isArcGISUrl=function(r){return!!d.test(r)};a.isHostedAgolService=
function(r){if(!r)return!1;r=r.toLowerCase();const H=r.includes(".arcgis.com/");r=r.includes("//services")||r.includes("//tiles")||r.includes("//features");return H&&r};a.isServerOrServicesAGOLUrl=function(r){if(!r)return!1;r=(new c.Url(c.makeAbsolute(r))).authority?.toLowerCase();return"server.arcgisonline.com"===r||"services.arcgisonline.com"===r};a.isWmsServer=function(r){if(!r)return!1;var H=r.toLowerCase();r=H.includes("/services/");const p=H.includes("/mapserver/wmsserver"),h=H.includes("/imageserver/wmsserver");
H=H.includes("/wmsserver");return r&&(p||h||H)};a.parse=t;a.parseNonStandardSublayerUrl=C;a.sanitizeUrl=function(r,H){return r?c.removeTrailingSlash(c.removeQueryParameters(r,H)):r};a.sanitizeUrlWithLayerId=function(r){let {url:H}=r;if(!H)return{url:H};H=c.removeQueryParameters(H,r.logger);const p=c.urlToObject(H),h=t(p.path);let b=void 0;null!=h?(null!=h.sublayer&&null==r.layer.layerId&&(b=h.sublayer),H=h.url.path):r.nonStandardUrlAllowed&&(r=C(p.path),null!=r&&(H=r.serviceUrl,b=r.sublayerId));return{url:c.removeTrailingSlash(H),
layerId:b}};a.serverTypes=w;a.titleFromUrlAndName=function(r,H){const p=[];r&&(r=t(r),null!=r&&r.title&&p.push(r.title));H&&(H=z(H),p.push(H));if(2===p.length){if(p[0].toLowerCase().includes(p[1].toLowerCase()))return p[0];if(p[1].toLowerCase().includes(p[0].toLowerCase()))return p[1]}return p.join(" - ")};a.writeUrlWithLayerId=function(r,H,p,h,b){y.write(H,h,"url",b);h.url&&null!=r.layerId&&(h.url=c.join(h.url,p,r.layerId.toString()))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../core/unitUtils ../../../geometry/support/spatialReferenceUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),function(a,c,y,t,C,z){const f=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class w{constructor(d){this._options=d;this.geometryTypes=f;this._vertexDimension=this._coordinatePtr=
0}createFeatureResult(){return new C}prepareFeatures(d){this._vertexDimension=2;d.hasZ&&this._vertexDimension++;d.hasM&&this._vertexDimension++}finishFeatureResult(d){if(d?.features&&d.hasZ&&this._options.sourceSpatialReference&&d.spatialReference&&!y.equals(d.spatialReference,this._options.sourceSpatialReference)&&!d.spatialReference.vcsWkid){var u=c.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference),A=c.getMetersPerVerticalUnitForSR(d.spatialReference);u/=A;if(1!==u)for(const r of d.features)if(t.hasGeometry(r))for(d=
r.geometry.coords,A=2;A<d.length;A+=3)d[A]*=u}}addFeature(d,u){d.features.push(u)}createFeature(){return new t.OptimizedFeature}createSpatialReference(){return{wkid:0}}createGeometry(){return new z}addField(d,u){d.fields.push(u)}allocateCoordinates(d){d.coords.length=d.lengths.reduce((u,A)=>u+A,0)*this._vertexDimension;this._coordinatePtr=0}addCoordinate(d,u){d.coords[this._coordinatePtr++]=u}addCoordinatePoint(d,u){d.coords.push(u)}addLength(d,u){d.lengths.push(u)}addQueryGeometry(d,u){d.queryGeometry=
u.queryGeometry;d.queryGeometryType=u.queryGeometryType}createPointGeometry(){return new z}}a.OptimizedFeatureSetParserContext=w;a.optimizedGeometryTypes=f;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/query":function(){define("exports ../../../request ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../geometry/support/normalizeUtils ../../../geometry/support/spatialReferenceUtils ../../operations/urlUtils ./pbfQueryUtils ./queryZScale".split(" "),
function(a,c,y,t,C,z,f,w,d){function u(p,h){if(h&&"extent"===p.type)return`${p.xmin},${p.ymin},${p.xmax},${p.ymax}`;if(h&&"point"===p.type)return`${p.x},${p.y}`;p=p.toJSON();delete p.spatialReference;return JSON.stringify(p)}function A(p,h){const b=p.geometry,k=p.toJSON();delete k.compactGeometryEnabled;delete k.defaultSpatialReferenceEnabled;let x,F,M;null!=b&&(F=b.spatialReference,M=z.srToRESTValue(F),k.geometryType=t.getJsonType(b),k.geometry=u(b,p.compactGeometryEnabled),k.inSR=M);k.groupByFieldsForStatistics&&
(k.groupByFieldsForStatistics=k.groupByFieldsForStatistics.join(","));k.objectIds&&(k.objectIds=k.objectIds.join(","));k.orderByFields&&(k.orderByFields=k.orderByFields.join(","));!k.outFields||!k.returnDistinctValues&&(h?.returnCountOnly||h?.returnExtentOnly||h?.returnIdsOnly)?delete k.outFields:k.outFields.includes("*")?k.outFields="*":k.outFields=k.outFields.join(",");k.outSR?(k.outSR=z.srToRESTValue(k.outSR),x=p.outSpatialReference):b&&(k.returnGeometry||k.returnCentroid)&&(k.outSR=k.inSR,x=F);
k.returnGeometry&&delete k.returnGeometry;k.outStatistics&&(k.outStatistics=JSON.stringify(k.outStatistics));k.fullText&&(k.fullText=JSON.stringify(k.fullText));k.pixelSize&&(k.pixelSize=JSON.stringify(k.pixelSize));k.quantizationParameters&&(p.defaultSpatialReferenceEnabled&&null!=F&&null!=p.quantizationParameters?.extent&&F.equals(p.quantizationParameters.extent.spatialReference)&&delete k.quantizationParameters.extent.spatialReference,k.quantizationParameters=JSON.stringify(k.quantizationParameters));
k.parameterValues&&(k.parameterValues=JSON.stringify(k.parameterValues));k.rangeValues&&(k.rangeValues=JSON.stringify(k.rangeValues));k.dynamicDataSource&&(k.layer=JSON.stringify({source:k.dynamicDataSource}),delete k.dynamicDataSource);if(k.timeExtent){const {start:g,end:J}=k.timeExtent;if(null!=g||null!=J)k.time=g===J?g:`${null==g?"null":g},${null==J?"null":J}`;delete k.timeExtent}p.defaultSpatialReferenceEnabled&&null!=F&&null!=x&&F.equals(x)&&(k.defaultSR=k.inSR,delete k.inSR,delete k.outSR);
return k}function r(p,h,b){return H(p,h,"pbf",b)}async function H(p,h,b,k={},x={}){p="string"===typeof p?y.urlToObject(p):p;var F=(await C.normalizeCentralMeridian(h.geometry?[h.geometry]:[],null,{signal:k.signal}))?.[0];null!=F&&(h=h.clone(),h.geometry=F);F=f.mapParameters({...p.query,f:b,...x,...A(h,x)});return c(y.join(p.path,null==h.formatOf3DObjects||x.returnCountOnly||x.returnExtentOnly||x.returnIdsOnly?"query":"query3d"),{...k,responseType:"pbf"===b?"array-buffer":"json",query:{...F,...k.query}})}
a.encodeGeometry=u;a.executeQuery=async function(p,h,b,k){p=null!=h.timeExtent&&h.timeExtent.isEmpty?{data:{features:[]}}:await H(p,h,"json",k);d.applyFeatureSetZUnitScaling(h,b,p.data);return p};a.executeQueryForCount=function(p,h,b){return null!=h.timeExtent&&h.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):H(p,h,"json",b,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=async function(p,h,b){if(null!=h.timeExtent&&h.timeExtent.isEmpty)return{data:{count:0,extent:null}};p=await H(p,
h,"json",b,{returnExtentOnly:!0,returnCountOnly:!0});h=p.data;if(h.hasOwnProperty("extent"))return p;if(h.features)throw Error("Layer does not support extent calculation.");if(h.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return p};a.executeQueryForIds=function(p,h,b){return null!=h.timeExtent&&h.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):H(p,h,"json",b,{returnIdsOnly:!0})};a.executeQueryPBF=async function(p,h,b,k){if(null!=h.timeExtent&&h.timeExtent.isEmpty)return{data:b.createFeatureResult()};
p=await r(p,h,k);p.data=w.parsePBFFeatureQuery(p.data,b);return p};a.executeQueryPBFBuffer=r;a.queryToQueryStringParameters=A;a.runQuery=H;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/operations/urlUtils":function(){define(["exports"],function(a){function c(y){const t={};for(const C in y){if("declaredClass"===C)continue;const z=y[C];if(null!=z&&"function"!==typeof z)if(Array.isArray(z)){t[C]=[];for(let f=0;f<z.length;f++)t[C][f]=c(z[f])}else"object"===typeof z?z.toJSON&&
(t[C]=JSON.stringify(z)):t[C]=z}return t}a.mapParameters=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(a,c){a.parsePBFFeatureQuery=function(y,t){var C=c.parseFeatureQuery(y,t);y=C.queryResult.featureResult;t=C.queryResult.queryGeometry;C=C.queryResult.queryGeometryType;if(y&&y.features&&y.features.length&&y.objectIdFieldName){const z=y.objectIdFieldName;for(const f of y.features)f.attributes&&
(f.objectId=f.attributes[z])}y&&(y.queryGeometry=t,y.queryGeometryType=C);return y};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define(["exports","../../../core/Error","../../../core/pbf","../../../layers/graphics/OptimizedGeometry","./pbfOptimizedFeatureSet"],function(a,c,y,t,C){function z(m){return m>=g.length?null:g[m]}function f(m,v,E){m=m.asUnsafe();for(E=v.createPointGeometry(E);m.next();)switch(m.tag()){case 3:var N=
m.getUInt32();N=m.pos()+N;let l=0;for(;m.pos()<N;)v.addCoordinatePoint(E,m.getSInt64(),l++);break;default:m.skip()}return E}function w(m,v,E){m=m.asUnsafe();const N=v.createGeometry(E);for(E=2+(E.hasZ?1:0)+(E.hasM?1:0);m.next();)switch(m.tag()){case 2:var l=m.getUInt32();l=m.pos()+l;for(var B=0;m.pos()<l;)v.addLength(N,m.getUInt32(),B++);break;case 3:l=m.getUInt32();l=m.pos()+l;B=0;for(v.allocateCoordinates(N);m.pos()<l;)v.addCoordinate(N,m.getSInt64(),B),B++,B===E&&(B=0);break;default:m.skip()}return N}
function d(m){m=m.asUnsafe();const v=new t;let E="esriGeometryPoint";for(;m.next();)switch(m.tag()){case 2:var N=m.getUInt32();for(N=m.pos()+N;m.pos()<N;)v.lengths.push(m.getUInt32());break;case 3:N=m.getUInt32();for(N=m.pos()+N;m.pos()<N;)v.coords.push(m.getSInt64());break;case 1:E=C.optimizedGeometryTypes[m.getEnum()];break;default:m.skip()}return{queryGeometry:v,queryGeometryType:E}}function u(m){for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:return m.getString();case 2:return m.getFloat();
case 3:return m.getDouble();case 4:return m.getSInt32();case 5:return m.getUInt32();case 6:return m.getInt64();case 7:return m.getUInt64();case 8:return m.getSInt64();case 9:return m.getBool();default:return m.skip(),null}return null}function A(m){m=m.asUnsafe();const v={type:z(0)};for(;m.next();)switch(m.tag()){case 1:v.name=m.getString();break;case 2:v.type=z(m.getEnum());break;case 3:v.alias=m.getString();break;case 4:var E=m.getEnum();E=E>=J.length?null:J[E];v.sqlType=E;break;case 5:m.skip();
break;case 6:v.defaultValue=m.getString();break;default:m.skip()}return v}function r(m){const v={};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:v.name=m.getString();break;case 2:v.isSystemMaintained=m.getBool();break;default:m.skip()}return v}function H(m,v,E,N){const l=v.createFeature(E);let B=0;for(;m.next();)switch(m.tag()){case 1:const D=N[B++].name;l.attributes[D]=m.processMessage(u);break;case 2:l.geometry=m.processMessageWithArgs(w,v,E);break;case 4:l.centroid=m.processMessageWithArgs(f,
v,E);break;default:m.skip()}return l}function p(m){const v=[1,1,1,1];for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:v[0]=m.getDouble();break;case 2:v[1]=m.getDouble();break;case 4:v[2]=m.getDouble();break;case 3:v[3]=m.getDouble();break;default:m.skip()}return v}function h(m){const v=[0,0,0,0];for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:v[0]=m.getDouble();break;case 2:v[1]=m.getDouble();break;case 4:v[2]=m.getDouble();break;case 3:v[3]=m.getDouble();break;default:m.skip()}return v}function b(m){const v=
{originPosition:0>=R.length?null:R[0]};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:var E=m.getEnum();v.originPosition=E>=R.length?null:R[E];break;case 2:v.scale=m.processMessage(p);break;case 3:v.translate=m.processMessage(h);break;default:m.skip()}return v}function k(m){const v={};for(m=m.asUnsafe();m.next();)switch(m.tag()){case 1:v.shapeAreaFieldName=m.getString();break;case 2:v.shapeLengthFieldName=m.getString();break;case 3:v.units=m.getString();break;default:m.skip()}return v}function x(m,
v){for(v=v.createSpatialReference();m.next();)switch(m.tag()){case 1:v.wkid=m.getUInt32();break;case 5:v.wkt=m.getString();break;case 2:v.latestWkid=m.getUInt32();break;case 3:v.vcsWkid=m.getUInt32();break;case 4:v.latestVcsWkid=m.getUInt32();break;default:m.skip()}return v}function F(m,v){const E=v.createFeatureResult();m=m.asUnsafe();E.geometryType=0>=v.geometryTypes.length?null:v.geometryTypes[0];let N=!1;for(;m.next();)switch(m.tag()){case 1:E.objectIdFieldName=m.getString();break;case 3:E.globalIdFieldName=
m.getString();break;case 4:E.geohashFieldName=m.getString();break;case 5:E.geometryProperties=m.processMessage(k);break;case 7:var l=m.getEnum();E.geometryType=l>=v.geometryTypes.length?null:v.geometryTypes[l];break;case 8:E.spatialReference=m.processMessageWithArgs(x,v);break;case 10:E.hasZ=m.getBool();break;case 11:E.hasM=m.getBool();break;case 12:E.transform=m.processMessage(b);break;case 9:E.exceededTransferLimit=m.getBool();break;case 13:v.addField(E,m.processMessage(A));break;case 15:N||(v.prepareFeatures(E),
N=!0);v.addFeature(E,m.processMessageWithArgs(H,v,E,E.fields));break;case 2:E.uniqueIdField=m.processMessage(r);break;default:m.skip()}v.finishFeatureResult(E);return E}function M(m,v){const E={};let N=null;for(;m.next();)switch(m.tag()){case 4:N=m.processMessageWithArgs(d);break;case 1:E.featureResult=m.processMessageWithArgs(F,v);break;default:m.skip()}null!=N&&E.featureResult&&v.addQueryGeometry(E,N);return E}const g="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML esriFieldTypeBigInteger esriFieldTypeDateOnly esriFieldTypeTimeOnly esriFieldTypeTimestampOffset".split(" "),
J="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),R=["upperLeft","lowerLeft"];a.parseFeatureQuery=function(m,v){try{const E=new y(new Uint8Array(m),new DataView(m));
for(m={};E.next();)switch(E.tag()){case 2:m.queryResult=E.processMessageWithArgs(M,v);break;default:E.skip()}return m}catch(E){throw new c("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:E});}};a.parseField=A;a.parseFieldType=z;a.parseTransform=b;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/rest/query/operations/queryZScale":function(){define(["exports","../../../geometry/support/zscale"],function(a,c){a.applyFeatureSetZUnitScaling=function(y,t,C){if(C?.features&&
C.hasZ&&(y=c.getGeometryZScaler(C.geometryType,t,y.outSpatialReference),null!=y))for(const z of C.features)y(z.geometry)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define(["exports","../../../../../core/asyncUtils","../../../../../geometry/support/aaBoundingRect"],function(a,c,y){class t{constructor(z,f){this.data=z;this.resolution=f;this.state={type:a.StateType.CREATED};this.alive=
!0}process(z){switch(this.state.type){case a.StateType.CREATED:return this.state=this._gotoFetchCount(this.state,z),this.state.task.promise.then(z.resume,z.resume);case a.StateType.FETCHED_COUNT:return this.state=this._gotoFetchFeatures(this.state,z),this.state.task.promise.then(z.resume,z.resume);case a.StateType.FETCHED_FEATURES:this.state=this._goToDone(this.state,z)}return null}get debugInfo(){return{data:this.data,featureCount:this._featureCount,state:this._stateToString}}get _featureCount(){switch(this.state.type){case a.StateType.CREATED:case a.StateType.FETCH_COUNT:return 0;
case a.StateType.FETCHED_COUNT:return this.state.featureCount;case a.StateType.FETCH_FEATURES:return this.state.previous.featureCount;case a.StateType.FETCHED_FEATURES:return this.state.features.length;case a.StateType.DONE:return this.state.previous.features.length}}get _stateToString(){switch(this.state.type){case a.StateType.CREATED:return"created";case a.StateType.FETCH_COUNT:return"fetch-count";case a.StateType.FETCHED_COUNT:return"fetched-count";case a.StateType.FETCH_FEATURES:return"fetch-features";
case a.StateType.FETCHED_FEATURES:return"fetched-features";case a.StateType.DONE:return"done"}}_gotoFetchCount(z,f){return{type:a.StateType.FETCH_COUNT,previous:z,task:c.createTask(async w=>{w=await c.resultOrAbort(f.fetchCount(this,w));this.state.type===a.StateType.FETCH_COUNT&&(this.state=this._gotoFetchedCount(this.state,w.ok?w.value:Infinity))})}}_gotoFetchedCount(z,f){return{type:a.StateType.FETCHED_COUNT,featureCount:f,previous:z}}_gotoFetchFeatures(z,f){return{type:a.StateType.FETCH_FEATURES,
previous:z,task:c.createTask(async w=>{w=await c.resultOrAbort(f.fetchFeatures(this,z.featureCount,w));this.state.type===a.StateType.FETCH_FEATURES&&(this.state=this._gotoFetchedFeatures(this.state,w.ok?w.value:[]))})}}_gotoFetchedFeatures(z,f){return{type:a.StateType.FETCHED_FEATURES,previous:z,features:f}}_goToDone(z,f){f.finish(this,z.features);return{type:a.StateType.DONE,previous:z}}reset(){const z=this.state;this.state={type:a.StateType.CREATED};switch(z.type){case a.StateType.FETCH_COUNT:case a.StateType.FETCH_FEATURES:z.task.abort()}}intersects(z){if(null==
z||!this.data.extent)return!0;y.fromExtent(z,C);return y.intersects(this.data.extent,C)}}a.StateType=void 0;(function(z){z[z.CREATED=0]="CREATED";z[z.FETCH_COUNT=1]="FETCH_COUNT";z[z.FETCHED_COUNT=2]="FETCHED_COUNT";z[z.FETCH_FEATURES=3]="FETCH_FEATURES";z[z.FETCHED_FEATURES=4]="FETCHED_FEATURES";z[z.DONE=5]="DONE"})(a.StateType||(a.StateType={}));const C=y.create();a.PendingFeatureTile=t;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/tslib.es6 ../../../../../core/Accessor ../../../../../core/byteSizeEstimations ../../../../../core/ByteSizeUnit ../../../../../core/SetUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/RandomLCG ../../../../../core/accessorSupport/decorators/subclass ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/BoundsStore ../../../../../layers/support/TileInfo ../../../../../layers/support/TileKey ../../../../../rest/query/operations/query ./FeatureServiceTileCache".split(" "),
function(a,c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x){function F(v){return v.reduce((E,N)=>{var l=N.geometry;if(null==l)l=0;else{var B=t.estimateFixedArraySize(l.lengths,4);l=32+t.estimateFixedArraySize(l.coords,8)+B}N=32+l+t.estimateAttributesObjectSize(N.attributes);return E+N},0)}a.FeatureServiceTileStore=class extends y{constructor(v){super(v);this.extent=this.tileInfo=null;this.maximumByteSize=10*C.ByteSizeUnit.MEGABYTES;this._tileBounds=new p.BoundsStore;this._tiles=new x.FeatureServiceTileCache;this._refCounts=
new Map;this._tileFeatureCounts=new Map;this._tmpBoundingRect=r.create()}add(v,E){for(var N of E)this._referenceFeature(N.objectId);E=this.featureStore.upsertMany(E);N=E.map(l=>new Set(Object.keys(l.attributes))).reduce((l,B)=>z.intersection(l,B),new Set(Object.keys(E[0]?.attributes??[])));this._addTileStorage(v,new Set(E.map(l=>l.objectId)),F(E),N);this._tiles.applyByteSizeLimit(this.maximumByteSize,l=>this._removeTileStorage(l))}getAttributesForTile(v){return v?this._tiles.get(v)?.attributeKeys:
null}destroy(){this.clear();this._tileFeatureCounts.clear()}clear(){this.featureStore.clear();this._tileBounds.clear();this._tiles.clear();this._refCounts.clear()}refresh(){this.clear();this._tileFeatureCounts.clear()}processEdits(v,E,N){this._processEditsDelete(v.deletedFeatures.concat(v.updatedFeatures));return this._processEditsRefetch(v.addedFeatures.concat(v.updatedFeatures),E,N)}_addTileStorage(v,E,N,l){const B=v.id;this._tiles.set(B,new M(v,E,N,l));this._tileBounds.set(B,v.extent);this._tileFeatureCounts.set(B,
E.size)}_remove({id:v}){(v=this._tiles.get(v))&&this._removeTileStorage(v)}_removeTileStorage(v){const E=[];for(const N of v.objectIds)this._unreferenceFeature(N)===m.REMOVED&&E.push(N);this.featureStore.removeManyById(E);v=v.data.id;this._tiles.delete(v);this._tileBounds.delete(v)}_processEditsDelete(v){this.featureStore.removeManyById(v);for(const [,E]of this._tiles){for(const N of v)E.objectIds.delete(N);this._tileFeatureCounts.set(E.data.id,E.objectIds.size)}for(const E of v)this._refCounts.delete(E)}async _processEditsRefetch(v,
E,N){v=(await E(v,N)).features;const {hasZ:l,hasM:B}=this.featureStore;for(const D of v)v=H.getBoundsOptimizedGeometry(this._tmpBoundingRect,D.geometry,l,B),null!=v&&this._tileBounds.forEachInBounds(v,G=>{G=this._tiles.get(G);this.featureStore.add(D);const S=D.objectId;G.objectIds.has(S)||(G.objectIds.add(S),this._referenceFeature(S),this._tileFeatureCounts.set(G.data.id,G.objectIds.size))})}process(v,E=()=>!0,N){if(null==this.tileInfo||!v.extent||null!=this.extent&&!r.intersects(r.fromExtent(this.extent,
this._tmpBoundingRect),v.extent))return new J(v);var l=this.getAttributesForTile(v.id);if(z.isSubsetOf(N,l))return new J(v);l=this._createTileTree(v,this.tileInfo);this._simplify(l,E,null,0,1);return this._collectMissingTiles(v,l,this.tileInfo,N)}get debugInfo(){return Array.from(this._tiles.values()).map(({data:v})=>({data:v,featureCount:this._tileFeatureCounts.get(v.id)||0}))}getFeatureCount(v){return this._tileFeatureCounts.get(v.id)??0}async fetchCount(v,E,N,l){const B=this._tileFeatureCounts.get(v.id);
if(null!=B)return B;E=await k.executeQueryForCount(E,N,l);this._tileFeatureCounts.set(v.id,E.data.count);return E.data.count}_createTileTree(v,E){const N=new g(v.level,v.row,v.col);E.updateTileInfo(N,h.ExtrapolateOptions.POWER_OF_TWO);this._tileBounds.forEachInBounds(v.extent,l=>{(l=this._tiles.get(l)?.data)&&this._tilesAreRelated(v,l)&&this._populateChildren(N,l,E,this._tileFeatureCounts.get(l.id)||0)});return N}_tilesAreRelated(v,E){if(!v||!E)return!1;if(v.level===E.level)return v.row===E.row&&
v.col===E.col;const N=v.level<E.level,l=N?v:E;v=N?E:v;E=1<<v.level-l.level;return Math.floor(v.row/E)===l.row&&Math.floor(v.col/E)===l.col}_populateChildren(v,E,N,l){var B=E.level-v.level-1;if(0>B)v.isLeaf=!0;else{var D=E.row>>B,G=E.col>>B;B=(D-(v.row<<1)<<1)+(G-(v.col<<1));var S=v.children[B];null!=S?this._populateChildren(S,E,N,l):(D=new g(v.level+1,D,G),N.updateTileInfo(D,h.ExtrapolateOptions.POWER_OF_TWO),v.children[B]=D,this._populateChildren(D,E,N,l))}}_simplify(v,E,N,l,B){const D=B*B;if(v.isLeaf)return E(this.getFeatureCount(v),
B)?0:(this._remove(v),null!=N&&(N.children[l]=null),D);B/=2;const G=B*B;let S=0;for(let P=0;P<v.children.length;P++){const U=v.children[P];S+=null!=U?this._simplify(U,E,v,P,B):G}0===S?this._mergeChildren(v):.18751>1-S/D&&(this._purge(v),null!=N&&(N.children[l]=null),S=D);return S}_mergeChildren(v){const E=new Set;let N=0,l;this._forEachLeaf(v,B=>{const D=this._tiles.get(B.id);if(D){l=l?z.intersection(l,D.attributeKeys):new Set(D.attributeKeys);N+=D.byteSize;for(const G of D.objectIds)E.has(G)||(E.add(G),
this._referenceFeature(G));this._remove(B)}});this._addTileStorage(v,E,N,l??new Set);v.isLeaf=!0;v.children[0]=v.children[1]=v.children[2]=v.children[3]=null;this._tileFeatureCounts.set(v.id,E.size)}_forEachLeaf(v,E){for(const N of v.children)null!=N&&(N.isLeaf?E(N):this._forEachLeaf(N,E))}_purge(v){if(null!=v)if(v.isLeaf)this._remove(v);else for(let E=0;E<v.children.length;E++)this._purge(v.children[E]),v.children[E]=null}_collectMissingTiles(v,E,N,l){v=new R(N,v,this.extent);this._collectMissingTilesRecurse(E,
v,1,l);return v.info}_collectMissingTilesRecurse(v,E,N,l){var B=this.getAttributesForTile(v.id);(B=B&&!z.isSubsetOf(l,B))&&E.addMissing(v.level,v.row,v.col,N);if(!v.isLeaf)if(v.hasChildren)for(N/=2,B=0;B<v.children.length;B++){const D=v.children[B];null==D?E.addMissing(v.level+1,(v.row<<1)+((B&2)>>1),(v.col<<1)+(B&1),N):this._collectMissingTilesRecurse(D,E,N,l)}else B||E.addMissing(v.level,v.row,v.col,N)}_referenceFeature(v){const E=(this._refCounts.get(v)||0)+1;this._refCounts.set(v,E);return 1===
E?m.ADDED:m.UNCHANGED}_unreferenceFeature(v){const E=(this._refCounts.get(v)||0)-1;if(0===E)return this._refCounts.delete(v),m.REMOVED;0<E&&this._refCounts.set(v,E);return m.UNCHANGED}get test(){return{tiles:Array.from(this._tiles.values()).map(v=>`${v.data.id}:[${Array.from(v.objectIds)}]`),featureReferences:Array.from(this._refCounts.keys()).map(v=>`${v}:${this._refCounts.get(v)}`)}}};c.__decorate([f.property({constructOnly:!0})],a.FeatureServiceTileStore.prototype,"featureStore",void 0);c.__decorate([f.property()],
a.FeatureServiceTileStore.prototype,"tileInfo",void 0);c.__decorate([f.property()],a.FeatureServiceTileStore.prototype,"extent",void 0);c.__decorate([f.property()],a.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);a.FeatureServiceTileStore=c.__decorate([A.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],a.FeatureServiceTileStore);class M{constructor(v,E,N,l){this.data=v;this.objectIds=E;this.byteSize=N;this.attributeKeys=l}}class g{constructor(v,
E,N){this.level=v;this.row=E;this.col=N;this.isLeaf=!1;this.extent=null;this.children=[null,null,null,null]}get hasChildren(){return!this.isLeaf&&(null!=this.children[0]||null!=this.children[1]||null!=this.children[2]||null!=this.children[3])}}class J{constructor(v,E=[]){this.missingTiles=E;this.coveredArea=this.fullArea=0;this.coveredArea=this.fullArea=r.area(v.extent)}prepend(v){this.missingTiles=v.missingTiles.concat(this.missingTiles);this.coveredArea+=v.coveredArea;this.fullArea+=v.fullArea}}
class R{constructor(v,E,N){this._tileInfo=v;this._extent=null;this.info=new J(E);null!=N&&(this._extent=r.fromExtent(N))}addMissing(v,E,N,l){v=new b.TileKey(null,v,E,N);this._tileInfo.updateTileInfo(v,h.ExtrapolateOptions.POWER_OF_TWO);null==v.extent||null!=this._extent&&!r.intersects(this._extent,v.extent)||(this.info.missingTiles.push({data:v,resolution:l}),this.info.coveredArea-=r.area(v.extent))}}var m;(function(v){v[v.ADDED=0]="ADDED";v[v.REMOVED=1]="REMOVED";v[v.UNCHANGED=2]="UNCHANGED"})(m||=
{});a.ProcessResult=J;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(a){a.ByteSizeUnit=void 0;var c=a.ByteSizeUnit||(a.ByteSizeUnit={});c[c.KILOBYTES=1024]="KILOBYTES";c[c.MEGABYTES=1048576]="MEGABYTES";c[c.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],
function(a){class c{constructor(){this._store=new Map;this._byteSize=0}set(y,t){this.delete(y);this._store.set(y,t);this._byteSize+=t.byteSize}delete(y){const t=this._store.get(y);return this._store.delete(y)?(null!=t&&(this._byteSize-=t.byteSize),!0):!1}get(y){this._used(y);return this._store.get(y)}has(y){this._used(y);return this._store.has(y)}clear(){this._store.clear()}applyByteSizeLimit(y,t){for(const [C,z]of this._store){if(this._byteSize<=y)break;this.delete(C);t(z)}}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}_used(y){const t=
this._store.get(y);t&&(this._store.delete(y),this._store.set(y,t))}}a.FeatureServiceTileCache=c;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("../../../../../chunks/tslib.es6 ../../../../../geometry ../../../../../core/Evented ../../../../../core/promiseUtils ../../../../../core/reactiveUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/has ../../../../../core/Logger ../../../../../core/RandomLCG ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/support/UpdatingHandles ../../../../../geometry/SpatialReference ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/TileInfo ../../../../../rest/support/Query ../../../../../symbols/support/ElevationInfo ../snappingCandidateElevationAlignment ../snappingCandidateElevationFilter ../symbologySnappingCandidates ./FeatureServiceTiledFetcher ./FeatureServiceTileStore ../../../../../geometry/support/jsonUtils".split(" "),function(a,
c,y,t,C,z,f,w,d,u,A,r,H,p,h,b,k,x,F,M,g,J,R){c=class extends y.EventedAccessor{constructor(){super(...arguments);this._isInitializing=!0;this.remoteClient=null;this._whenSetup=t.createResolver();this._elevationAligner=x.getSnappingCandidateElevationAligner();this._elevationFilter=F.getSnappingCandidateElevationFilter();this._symbologyCandidatesFetcher=M.getSymbologySnappingCandidatesFetcher();this._updatingHandles=new A.UpdatingHandles;this._editsUpdatingHandles=new A.UpdatingHandles;this._pendingApplyEdits=
new Map;this._alignPointsInFeatures=async(v,E)=>{v=await this.remoteClient.invoke("alignElevation",{query:v},{signal:E});t.throwIfAborted(E);return v};this._getSymbologyCandidates=async(v,E)=>{v={candidates:v,spatialReference:this._spatialReference.toJSON()};v=await this.remoteClient.invoke("getSymbologyCandidates",v,{signal:E});t.throwIfAborted(E);return v}}get updating(){return this.updatingExcludingEdits||this._editsUpdatingHandles.updating||this._featureFetcher.updating}get updatingExcludingEdits(){return this._featureFetcher.updatingExcludingEdits||
this._isInitializing||this._updatingHandles.updating}destroy(){this._featureFetcher?.destroy();this._queryEngine?.destroy();this._featureStore?.clear()}async setup(v){if(this.destroyed)return{result:{}};const {geometryType:E,objectIdField:N,timeInfo:l,fieldsIndex:B}=v.serviceInfo;var {hasZ:D}=v;const G=r.fromJSON(v.spatialReference);this._spatialReference=G;this._featureStore=new H({...v.serviceInfo,hasZ:D,hasM:!1});this._queryEngine=new p.QueryEngine({spatialReference:v.spatialReference,featureStore:this._featureStore,
geometryType:E,fieldsIndex:B,hasZ:D,hasM:!1,objectIdField:N,timeInfo:l});this._featureFetcher=new g.FeatureServiceTiledFetcher({store:new J.FeatureServiceTileStore({featureStore:this._featureStore}),url:v.serviceInfo.url,objectIdField:v.serviceInfo.objectIdField,globalIdField:v.serviceInfo.globalIdField,capabilities:v.serviceInfo.capabilities,spatialReference:G,sourceSpatialReference:r.fromJSON(v.serviceInfo.spatialReference)});D="3d"===v.configuration.viewType;this._elevationAligner=x.getSnappingCandidateElevationAligner(D,
{elevationInfo:null!=v.elevationInfo?k.fromJSON(v.elevationInfo):null,alignPointsInFeatures:this._alignPointsInFeatures});this._elevationFilter=F.getSnappingCandidateElevationFilter(D);this.addHandles([C.watch(()=>this._featureFetcher.availability,S=>this.emit("notify-availability",{availability:S}),C.sync),C.watch(()=>this.updating,()=>this._notifyUpdating())]);this._whenSetup.resolve();this._isInitializing=!1;return this.configure(v.configuration)}async configure(v){await this._updatingHandles.addPromise(this._whenSetup.promise);
this._updateFeatureFetcherConfiguration(v);return m}async setSuspended(v,E){await this._updatingHandles.addPromise(this._whenSetup.promise);t.throwIfAborted(E);this._featureFetcher.suspended=v;return m}async updateOutFields(v,E){await this._updatingHandles.addPromise(this._whenSetup.promise);t.throwIfAborted(E);this._featureFetcher.outFields=new Set(v??[]);return m}async fetchCandidates(v,E){await this._whenSetup.promise;t.throwIfAborted(E);if(v.filter){var {distance:N,units:l,spatialRel:B,where:D,
timeExtent:G,objectIds:S}=v.filter;var P={geometry:v.filter.geometry?R.fromJSON(v.filter.geometry):void 0,distance:N,units:l,spatialRel:B,timeExtent:G,objectIds:S,where:D??"1\x3d1"};P={...v,query:P}}else P={...v,query:{where:"1\x3d1"}};E=E?.signal;var U=await this._queryEngine.executeQueryForSnapping(P,E);t.throwIfAborted(E);v=await this._elevationAligner.alignCandidates(U.candidates,r.fromJSON(v.point.spatialReference)??r.WGS84,E);t.throwIfAborted(E);U=await this._symbologyCandidatesFetcher.fetch(v,
E);t.throwIfAborted(E);v=0===U.length?v:v.concat(U);return{result:{candidates:this._elevationFilter.filter(P,v)}}}async updateTiles(v,E){await this._updatingHandles.addPromise(this._whenSetup.promise);t.throwIfAborted(E);this._featureFetcher.tileSize=v.tileSize;this._featureFetcher.tilesOfInterest=v.tiles;this._featureFetcher.tileInfo=null!=v.tileInfo?h.fromJSON(v.tileInfo):null;return m}async refresh(v,E){await this._updatingHandles.addPromise(this._whenSetup.promise);t.throwIfAborted(E);this._featureFetcher.refresh();
return m}async whenNotUpdating(v,E){await this._updatingHandles.addPromise(this._whenSetup.promise);t.throwIfAborted(E);await C.whenOnce(()=>!this.updatingExcludingEdits,E);t.throwIfAborted(E);return m}async getDebugInfo(v,E){t.throwIfAborted(E);return{result:this._featureFetcher.debugInfo}}async beginApplyEdits(v,E){this._updatingHandles.addPromise(this._whenSetup.promise);t.throwIfAborted(E);E=t.createResolver();this._pendingApplyEdits.set(v.id,E);this._featureFetcher.applyEdits(E.promise);this._editsUpdatingHandles.addPromise(E.promise);
return m}async endApplyEdits(v,E){const N=this._pendingApplyEdits.get(v.id);N&&N.resolve(v.edits);t.throwIfAborted(E);return m}async notifyElevationSourceChange(v,E){this._elevationAligner.notifyElevationSourceChange();return m}async notifySymbologyChange(v,E){this._symbologyCandidatesFetcher.notifySymbologyChange();return m}async setSymbologySnappingSupported(v){this._symbologyCandidatesFetcher=M.getSymbologySnappingCandidatesFetcher(v,this._getSymbologyCandidates);return m}_updateFeatureFetcherConfiguration(v){this._featureFetcher.filter=
null!=v.filter?b.fromJSON(v.filter):null;this._featureFetcher.customParameters=v.customParameters}_notifyUpdating(){this.emit("notify-updating",{updating:this.updating})}};a.__decorate([z.property({readOnly:!0})],c.prototype,"updating",null);a.__decorate([z.property({readOnly:!0})],c.prototype,"updatingExcludingEdits",null);a.__decorate([z.property()],c.prototype,"_isInitializing",void 0);c=a.__decorate([u.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],
c);const m={result:{}};return c});