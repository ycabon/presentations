// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/Error ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Point ../../layers/support/commonProperties ../../rest/support/Query ./support/popupUtils".split(" "),function(c,l,p,e,z,A,B,q,m,r,t,u){return a=>{a=class extends a{constructor(){super(...arguments);this.view=null}async fetchPopupFeaturesAtLocation(d,k){const {layer:f}=
this;if(!d)throw new l("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:f});var {popupEnabled:b}=f;const g=u.getFetchPopupTemplate(f,k);if(!b||null==g)throw new l("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:b,popupTemplate:g});const v=await g.getRequiredFields();p.throwIfAborted(k);b=new t;b.timeExtent=this.timeExtent;b.geometry=d;b.outFields=v;b.outSpatialReference=d.spatialReference;const {resolution:h,spatialReference:n}=
this.view;d="2d"===this.view.type?new m(h,h,n):new m(.5*h,.5*h,n);const {returnTopmostRaster:w,showNoDataRecords:x}=g.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};return f.queryVisibleRasters(b,{returnDomainValues:!0,returnTopmostRaster:w,pixelSize:d,showNoDataRecords:x,signal:k?.signal}).then(y=>y)}canResume(){return!super.canResume()||this.timeExtent?.isEmpty?!1:!0}};c.__decorate([e.property()],a.prototype,"layer",void 0);c.__decorate([e.property()],a.prototype,"suspended",void 0);
c.__decorate([e.property(r.combinedViewLayerTimeExtentProperty)],a.prototype,"timeExtent",void 0);c.__decorate([e.property()],a.prototype,"view",void 0);return a=c.__decorate([q.subclass("esri.views.layers.ImageryLayerView")],a)}});