// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define(["exports","../3d/webgl-engine/lib/basicInterfaces","./enums"],function(b,l,h){function m(a){return I.intern(a)}function n(a){return J.intern(a)}function p(a){return K.intern(a)}function q(a){return L.intern(a)}function r(a){return M.intern(a)}function t(a){return N.intern(a)}function u(a){return O.intern(a)}function v(a){return P.intern(a)}function w(a){return Q.intern(a)}function d(a){return"["+a.join(",")+"]"}function x(a){return a?d([a.srcRgb,a.srcAlpha,a.dstRgb,a.dstAlpha,a.opRgb,a.opAlpha,
a.color.r,a.color.g,a.color.b,a.color.a]):null}function y(a){return a?d([a.face,a.mode]):null}function z(a){return a?d([a.factor,a.units]):null}function A(a){return a?d([a.func]):null}function B(a){return a?d([a.function.func,a.function.ref,a.function.mask,a.operation.fail,a.operation.zFail,a.operation.zPass]):null}function C(a){return a?d([a.zNear,a.zFar]):null}function D(a){return a?d([a.r,a.g,a.b,a.a]):null}function E(a){return a?d([a.mask]):null}function F(a){return a?d(a.buffers):null}const G=
{face:h.Face.BACK,mode:h.CullMode.CCW},H={face:h.Face.FRONT,mode:h.CullMode.CCW};class e{constructor(a,c){this._makeKey=a;this._makeRef=c;this._interns=new Map}intern(a){if(!a)return null;const c=this._makeKey(a),f=this._interns;f.has(c)||f.set(c,this._makeRef(a));return f.get(c)??null}}const I=new e(x,a=>({__tag:"Blending",...a})),J=new e(y,a=>({__tag:"Culling",...a})),K=new e(z,a=>({__tag:"PolygonOffset",...a})),L=new e(A,a=>({__tag:"DepthTest",...a})),M=new e(B,a=>({__tag:"StencilTest",...a})),
N=new e(C,a=>({__tag:"DepthWrite",...a})),O=new e(D,a=>({__tag:"ColorWrite",...a})),P=new e(E,a=>({__tag:"StencilWrite",...a})),Q=new e(F,a=>({__tag:"DrawBuffers",...a})),R=new e(function(a){return a?d([x(a.blending),y(a.culling),z(a.polygonOffset),A(a.depthTest),B(a.stencilTest),C(a.depthWrite),D(a.colorWrite),E(a.stencilWrite),F(a.drawBuffers)]):null},a=>({blending:m(a.blending),culling:n(a.culling),polygonOffset:p(a.polygonOffset),depthTest:q(a.depthTest),stencilTest:r(a.stencilTest),depthWrite:t(a.depthWrite),
colorWrite:u(a.colorWrite),stencilWrite:v(a.stencilWrite),drawBuffers:w(a.drawBuffers)}));class S{constructor(a){this._drawBuffersInvalid=this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=a}setPipeline(a){if(this._pipelineInvalid||a!==this._pipeline)this._setBlending(a.blending),this._setCulling(a.culling),this._setPolygonOffset(a.polygonOffset),
this._setDepthTest(a.depthTest),this._setStencilTest(a.stencilTest),this._setDepthWrite(a.depthWrite),this._setColorWrite(a.colorWrite),this._setStencilWrite(a.stencilWrite),this._setDrawBuffers(a.drawBuffers),this._pipeline=a;this._pipelineInvalid=!1}invalidateBlending(){this._pipelineInvalid=this._blendingInvalid=!0}invalidateCulling(){this._pipelineInvalid=this._cullingInvalid=!0}invalidatePolygonOffset(){this._pipelineInvalid=this._polygonOffsetInvalid=!0}invalidateDepthTest(){this._pipelineInvalid=
this._depthTestInvalid=!0}invalidateStencilTest(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDepthWrite(){this._pipelineInvalid=this._depthWriteInvalid=!0}invalidateColorWrite(){this._pipelineInvalid=this._colorWriteInvalid=!0}invalidateStencilWrite(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDrawBuffers(){this._pipelineInvalid=this._drawBuffersInvalid=!0}_setBlending(a){this._blending=this._setSubState(a,this._blending,this._blendingInvalid,this._stateSetters.setBlending);
this._blendingInvalid=!1}_setCulling(a){this._culling=this._setSubState(a,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1}_setPolygonOffset(a){this._polygonOffset=this._setSubState(a,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1}_setDepthTest(a){this._depthTest=this._setSubState(a,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1}_setStencilTest(a){this._stencilTest=
this._setSubState(a,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1}_setDepthWrite(a){this._depthWrite=this._setSubState(a,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1}_setColorWrite(a){this._colorWrite=this._setSubState(a,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1}_setStencilWrite(a){this._stencilWrite=this._setSubState(a,this._stencilWrite,
this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1}_setDrawBuffers(a){this._drawBuffers=this._setSubState(a,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers);this._drawBuffersInvalid=!1}_setSubState(a,c,f,g){if(f||a!==c)g(a),this._pipelineInvalid=!0;return a}}b.StateTracker=S;b.backFaceCullingParams=G;b.cullingParams=a=>a===l.CullFaceOptions.Back?G:a===l.CullFaceOptions.Front?H:null;b.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};
b.defaultDepthWriteParams={zNear:0,zFar:1};b.frontFaceCullingParams=H;b.makeBlending=m;b.makeColorWrite=u;b.makeCulling=n;b.makeDepthTest=q;b.makeDepthWrite=t;b.makeDrawBuffers=w;b.makePipelineState=function(a){return R.intern(a)};b.makePolygonOffset=p;b.makeStencilTest=r;b.makeStencilWrite=v;b.separateBlendingParams=function(a,c,f,g,T=h.BlendOperation.ADD,U=h.BlendOperation.ADD,k=[0,0,0,0]){return{srcRgb:a,srcAlpha:c,dstRgb:f,dstAlpha:g,opRgb:T,opAlpha:U,color:{r:k[0],g:k[1],b:k[2],a:k[3]}}};b.simpleBlendingParams=
function(a,c,f=h.BlendOperation.ADD,g=[0,0,0,0]){return{srcRgb:a,srcAlpha:a,dstRgb:c,dstAlpha:c,opRgb:f,opAlpha:f,color:{r:g[0],g:g[1],b:g[2],a:g[3]}}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})});