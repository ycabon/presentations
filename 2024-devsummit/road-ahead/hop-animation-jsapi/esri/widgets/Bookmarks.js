// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("require ../chunks/tslib.es6 ../core/arrayUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/has ../core/accessorSupport/decorators/subclass ../intl/date ../time/timeZoneUtils ../webdoc/support/SlideThumbnail ./Widget ./Bookmarks/BookmarksUserState ./Bookmarks/BookmarksViewModel ./Bookmarks/css ./FeatureTable/Grid/support/ButtonMenu ./FeatureTable/Grid/support/ButtonMenuItem ../chunks/componentsUtils ./support/globalCss ./support/Heading ./support/legacyIcon ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../chunks/sortable.esm".split(" "),
function(x,k,F,r,m,G,h,H,u,B,I,J,y,C,e,K,z,L,l,M,q,N,D,O,d,P){function v(a){return a["data-bookmark"]}const E={addBookmark:!0,thumbnail:!0,time:!0},A=/^https:\/\/.*/i;h=class extends J{constructor(a,b){super(a,b);this._tooltipReferenceMap=new Map;this._addBookmarkButtonNode=this._urlEditInputNode=this._editInputNode=this._addInputNode=null;this._focusUrlEditInputBox=this._focusAddInputBox=this._focusEditInputBox=this._focusAddBookmarkButton=!1;this._selectedSortUid=this._focusSortUid=this._sortableNode=
this._sortable=null;this._sortableSavedItems=[];this._editIncludeTimeExtent=void 0;this._userState=null;this.editingEnabled=this.disabled=!1;this.headingLevel=2;this.iconClass=e.css.widgetIcon;this.messagesCommon=this.messages=this.icon=null;this.viewModel=new C;this.visibleElements={...E}}initialize(){this.addHandles([r.watch(()=>this.viewModel?.bookmarks,()=>this._bookmarksInitialized(),r.initial),r.watch(()=>this.editingEnabled,()=>this._toggleSorting(),r.initial)])}destroy(){this._destroySortable();
this._editMenu.destroy();this._tooltipReferenceMap.clear()}loadDependencies(){return L.loadCalciteComponents({label:()=>new Promise((a,b)=>x(["../chunks/calcite-label"],a,b)),switch:()=>new Promise((a,b)=>x(["../chunks/calcite-switch"],a,b)),tooltip:()=>new Promise((a,b)=>x(["../chunks/calcite-tooltip"],a,b))})}get _editMenuItems(){const {messages:a,_userState:b}=this;var c=b?.editedBookmark?.thumbnail?.url;const f=new z({label:a?.menu.refreshThumbnail,iconClass:q.legacyIcon.refresh,clickFunction:()=>
this._refreshThumbnail()}),g=new z({label:c&&A.test(c)?a?.menu.editImageUrl:a?.menu.useImageUrl,iconClass:q.legacyIcon.link,clickFunction:()=>this._startUseImageUrl()});c=c?new z({label:a?.menu.removeThumbnail,iconClass:q.legacyIcon.erase,clickFunction:()=>this._removeThumbnail()}):null;return[f,g,c].filter(F.isSome)}get _editMenu(){const {_editMenuItems:a,messages:b,disabled:c}=this;var f=this._get("_editMenu");f&&f.destroy();f=new K({disabled:c,iconClass:q.legacyIcon.handleHorizontal,label:b?.menu.label});
f.items=a;return f}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(a){this.viewModel.defaultCreateOptions=a}get defaultEditOptions(){return this.viewModel.defaultEditOptions}set defaultEditOptions(a){this.viewModel.defaultEditOptions=a}get bookmarks(){return this.viewModel.bookmarks}set bookmarks(a){this.viewModel.bookmarks=a}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(a){this.viewModel.goToOverride=a}get label(){return this.messages?.widgetLabel??
""}set label(a){this._overrideIfSome("label",a)}get view(){return this.viewModel.view}set view(a){this.viewModel.view=a}castVisibleElements(a){return{...E,...a}}endAddBookmark(){this._userState=null}goTo(a){return this.viewModel.goTo(a)}render(){var {state:a}=this.viewModel;a="loading"===a?this._renderLoading():this._renderBookmarks();return d.tsx("div",{class:this.classes(e.css.base,l.globalCss.widget,l.globalCss.panel,{[l.globalCss.widgetDisabled]:this.disabled})},a)}startAddBookmark(){this._userState=
new y({state:"add"});this._focusAddInputBox=!0;this.scheduleRender()}_renderBookmarkTooltips(a){return a.toArray().map(b=>this._renderBookmarkTooltip(b))??[]}_renderBookmarkTooltip(a){const {_tooltipReferenceMap:b,messagesCommon:c}=this;var f=this._getBookmarkTitle(a);f=`${c?.dragHandleTitle} ${f}`;return a?d.tsx("calcite-tooltip",{key:`tooltip-${a.uid}`,referenceElement:b.get(a.uid)},f):null}_renderLoading(){return d.tsx("div",{class:e.css.loaderContainer,key:"loader",tabIndex:this.disabled?-1:void 0},
d.tsx("div",{class:e.css.loader}))}_renderNoBookmarksContainer(){const {messages:a,disabled:b}=this;return d.tsx("div",{class:l.globalCss.empty,key:"no-bookmarks",tabIndex:b?-1:void 0},d.tsx("span",{"aria-hidden":"true",class:this.classes(l.globalCss.noBookmarksIcon,e.css.widgetIcon)}),d.tsx(M.Heading,{class:this.classes(l.globalCss.heading,e.css.noBookmarksHeader),level:this.headingLevel},a?.noBookmarksHeading),d.tsx("p",{class:e.css.noBookmarksDescription},a?.noBookmarksDescription))}_renderAddBookmarkLoading(){return d.tsx("div",
{class:e.css.addingBookmark,key:"adding-bookmark"},d.tsx("span",{"aria-hidden":"true",class:this.classes(q.legacyIcon.loadingIndicator,l.globalCss.rotating)}),this.messages?.addingBookmark)}_renderBookmarkItems(a){if(!a)return[];const {_userState:b,editingEnabled:c}=this;return a.map(f=>c&&f&&b&&("edit"===b.state||"edit-thumbnail"===b.state)&&b.bookmark===f?"edit-thumbnail"===b.state?this._renderEditingBookmarkUrl(b.editedBookmark):this._renderEditingBookmark(b.editedBookmark):this._renderBookmark(f)).toArray()}_renderBookmarksContainer(a){const {_userState:b,
editingEnabled:c,disabled:f,view:g}=this;var n="add"===b?.state;const p=g&&c&&!n?this._renderAddBookmarkButton():null;n=c?n&&b.loading?this._renderAddBookmarkLoading():"add"===b?.state?this._renderAddingBookmark():null:null;return[d.tsx("ul",{afterCreate:this._sortNodeCreated,afterRemoved:this._destroySortable,"aria-label":this.messages?.widgetLabel,bind:this,class:this.classes(e.css.bookmarkList,{[e.css.bookmarkListSortable]:this.editingEnabled}),key:"bookmark-list",tabIndex:f?-1:void 0},this._renderBookmarkItems(a)),
p,n]}_renderAddBookmarkButton(){return this.visibleElements.addBookmark?d.tsx("div",{class:e.css.addBookmark,key:"add-bookmark-item"},d.tsx("button",{afterCreate:this._storeAddBookmarkButton,afterUpdate:this._storeAddBookmarkButton,bind:this,class:this.classes(l.globalCss.button,l.globalCss.buttonTertiary,e.css.addBookmarkButton),disabled:this.disabled,onclick:this.startAddBookmark,type:"button"},d.tsx("span",{"aria-hidden":"true",class:this.classes(e.css.addBookmarkIcon,q.legacyIcon.plus)}),this.messages?.addBookmark)):
null}_renderBookmarks(){var {bookmarks:a}=this.viewModel,b=a&&a.filter(Boolean),c=b&&b.length;b=c||this.editingEnabled?this._renderBookmarksContainer(b):null;c=c?null:this._renderNoBookmarksContainer();a=this._renderBookmarkTooltips(a);return[c,b,a]}_renderEditContainer(a){const {messagesCommon:b,disabled:c}=this,f=this._getBookmarkTitle(a);return d.tsx("div",{class:e.css.bookmarkEditButtonContainer,key:"edit-container"},d.tsx("button",{"aria-label":`${b?.edit} ${f}`,bind:this,class:e.css.bookmarkEditButton,
"data-bookmark":a,disabled:c,onclick:this._showEditBookmarkForm,title:`${b?.edit} ${f}`,type:"button"},d.tsx("span",{"aria-hidden":"true",class:q.legacyIcon.edit})))}_renderDragHandle(a){const {messagesCommon:b,disabled:c}=this,f=this._getBookmarkTitle(a);return d.tsx("div",{afterCreate:this._focusDragHandle,afterUpdate:this._focusDragHandle,"aria-label":`${b?.dragHandleTitle} ${f}`,"aria-pressed":this._selectedSortUid===a.uid?"true":"false",bind:this,class:e.css.bookmarkDragHandle,"data-bookmark":a,
key:"drag-handle",onblur:this._dragHandleBlur,onkeydown:this._dragHandleKeydown,role:"button",tabIndex:c?-1:0,["data-bookmark-uid"]:a.uid},d.tsx("span",{"aria-hidden":"true",class:this.classes(e.css.bookmarkDragHandleIcon,q.legacyIcon.handleVertical)}))}_renderBookmarkImageIcon(){return d.tsx("span",{"aria-hidden":"true",class:this.classes(e.css.bookmarkIcon,e.css.widgetIcon)})}_renderBookmarkImage(a){const {visibleElements:b}=this;({thumbnail:a}=a);a=a?.url||"";return b.thumbnail&&a?d.tsx("img",
{alt:"",class:e.css.bookmarkImage,src:a}):null}_renderBookmarkTimeSwitch(a){const {messages:b,disabled:c}=this;({timeExtent:a}=a);const {view:f}=this.viewModel;return f?.timeExtent??a?d.tsx("calcite-label",{layout:"inline-space-between"},b?.includeTimeExtent,d.tsx("calcite-switch",{checked:!!a,disabled:c,scale:"s",onCalciteSwitchChange:g=>{this._editIncludeTimeExtent=!!g.target.checked}})):null}_renderBookmarkTimeExtent(a){const {visibleElements:b}=this;({timeExtent:a}=a);return a?d.tsx("span",{class:e.css.timeExtent},
[null!=a.start&&d.tsx("span",{class:e.css.timeExtentGroup,key:"start-date-group"},d.tsx("span",{class:e.css.timeExtentDate,key:"start-date"},this._formatDate(a.start)),b.time?d.tsx("span",{class:e.css.timeExtentTime,key:"start-time"},this._formatTime(a.start)):null),null!=a.end&&(null==a.start||a.start.getTime()!==a.end.getTime())&&d.tsx("span",{class:e.css.timeExtentGroup,key:"end-date-group"},d.tsx("span",{class:e.css.timeExtentDate,key:"end-date"},this._formatDate(a.end)),b.time?d.tsx("span",{class:e.css.timeExtentTime,
key:"end-time"},this._formatTime(a.end)):null)]):null}_renderBookmarkButton(a){const {disabled:b}=this;var {timeExtent:c}=a;const {capabilities:f}=this.viewModel,g=this._getBookmarkTitle(a);var {thumbnail:n}=a;n=d.tsx("div",{class:this.classes(e.css.bookmarkImageContainer,n?.url?e.css.bookmarkImageContainerHasImage:null)},this._renderBookmarkImage(a)||this._renderBookmarkImageIcon());c=f.time&&c?d.tsx("span",{class:e.css.bookmarkTimeExtent,key:"time-extent"},this._renderBookmarkTimeExtent(a)):null;
return d.tsx("button",{bind:this,class:e.css.bookmarkButton,"data-bookmark":a,disabled:b,key:"bookmark-button",onclick:this._goToBookmark,type:"button"},n,d.tsx("div",{class:e.css.bookmarkLabel},d.tsx("span",{class:e.css.bookmarkName,key:"bookmark-title"},g),c))}_renderBookmark(a){var {activeBookmark:b}=this.viewModel;b={[e.css.bookmarkActive]:b===a};const c=this.editingEnabled?this._renderEditContainer(a):null,f={["data-bookmark-uid"]:a.uid},g=this.editingEnabled?this._renderDragHandle(a):null;return d.tsx("li",
{class:this.classes(e.css.bookmark,b),key:a,...f},g,this._renderBookmarkButton(a),c)}_renderEditingBookmarkName(a){const {messages:b,_userState:c,disabled:f}=this,g="name-required"===c?.validationState;return d.tsx("label",{class:this.classes({[e.css.authoringLabel]:!0,[e.css.authoringLabelStartPadding]:!!this.visibleElements?.thumbnail})},b?.title,g?d.tsx("strong",null,b?.invalidTitle):null,d.tsx("input",{afterCreate:this._storeEditInput,afterUpdate:this._focusEditInput,bind:this,class:this.classes(l.globalCss.input,
g?e.css.authoringInputInvalid:null),"data-bookmark":a,disabled:f,placeholder:b?.titlePlaceholder,required:!0,type:"text",value:a.name}))}_renderEditingBookmarkUrlActions(){const {messagesCommon:a,disabled:b}=this;return d.tsx("div",{class:e.css.authoringActions},d.tsx("input",{bind:this,class:this.classes(l.globalCss.button,l.globalCss.buttonTertiary),disabled:b,onclick:this._closeUrlEditBookmarkForm,type:"button",value:a?.back}),d.tsx("input",{class:l.globalCss.button,disabled:b,type:"submit",value:a?.add}))}_renderEditingBookmarkActions(){const {messagesCommon:a,
disabled:b}=this,c=this._userState?.bookmark;return d.tsx("div",{class:e.css.authoringActions},d.tsx("input",{bind:this,class:this.classes(l.globalCss.button,l.globalCss.buttonTertiary,e.css.authoringDeleteButton),"data-bookmark":c,disabled:b,onclick:this._deleteBookmark,type:"button",value:a?.delete}),d.tsx("input",{bind:this,class:this.classes(l.globalCss.button,l.globalCss.buttonTertiary),disabled:b,onclick:this._closeEditBookmarkForm,type:"button",value:a?.cancel}),d.tsx("input",{class:l.globalCss.button,
disabled:b,type:"submit",value:a?.save}))}_renderEditingBookmarkUrlInput(a){const {messages:b,_userState:c,disabled:f}=this;var g=a.thumbnail?.url;g=g&&A.test(g)?g:void 0;const n="absolute-url-required"===c?.validationState;return d.tsx("label",{class:this.classes({[e.css.authoringLabel]:!0,[e.css.authoringLabelStartPadding]:!!this.visibleElements?.thumbnail})},n?d.tsx("strong",null,b?.invalidImageUrl):null,d.tsx("input",{afterCreate:this._storeUrlEditInput,afterUpdate:this._focusUrlEditInput,bind:this,
class:this.classes(l.globalCss.input,n?e.css.authoringInputInvalid:null),"data-bookmark":a,disabled:f,placeholder:b?`https://<${b.imageUrlPlaceholder}>`:void 0,required:!0,title:b?.imageUrlTooltip,type:"text",value:g}))}_renderEditingBookmarkUrl(a){return a?d.tsx("li",{class:e.css.authoringCard,key:"edit-bookmark-url-form",["data-bookmark-uid"]:a.uid},d.tsx("form",{bind:this,class:e.css.authoringForm,disabled:this.disabled,onsubmit:this._editBookmarkUrlSubmit},this._renderEditingBookmarkUrlInput(a),
this._renderEditingBookmarkUrlActions())):null}_renderEditingBookmark(a){if(!a)return null;const b={["data-bookmark-uid"]:a.uid};var {capabilities:c}=this.viewModel;c=c.time?d.tsx("div",{class:e.css.timeExtentContainer,key:"edit-bookmark-time-container"},this._renderBookmarkTimeSwitch(a),this._editIncludeTimeExtent?this._renderBookmarkTimeExtent(a):null):null;return d.tsx("li",{class:e.css.authoringCard,key:"edit-bookmark-form",...b},d.tsx("form",{bind:this,class:e.css.authoringForm,disabled:this.disabled,
onsubmit:this._editBookmarkSubmit},d.tsx("div",{class:e.css.authoringContainer},this.visibleElements.thumbnail?d.tsx("div",{class:e.css.bookmarkImageContainer},this._renderBookmarkImage(a),this._editMenu.render()):null,this._renderEditingBookmarkName(a)),c,this._renderEditingBookmarkActions()))}_renderAddingBookmarkName(){const {_userState:a,messages:b,disabled:c}=this,f="name-required"===a?.validationState;return d.tsx("label",{class:e.css.authoringLabel},b?.title,f?d.tsx("strong",null,b?.invalidTitle):
null,d.tsx("input",{afterCreate:this._storeAddInput,afterUpdate:this._focusAddInput,bind:this,class:this.classes(l.globalCss.input,f?e.css.authoringInputInvalid:null),disabled:c,placeholder:b?.titlePlaceholder,required:!0,type:"text",value:""}))}_renderAddingBookmarkActions(){const {messagesCommon:a,disabled:b}=this;return d.tsx("div",{class:this.classes(e.css.authoringActions)},d.tsx("input",{bind:this,class:this.classes(l.globalCss.button,l.globalCss.buttonTertiary,e.css.authoringCancelButton),
disabled:b,onclick:this._endAddBookmark.bind(this),type:"button",value:a?.cancel}),d.tsx("input",{class:l.globalCss.button,disabled:b,type:"submit",value:a?.add}))}_renderAddingBookmark(){return d.tsx("div",{class:e.css.authoringCard,key:"add-bookmark-form"},d.tsx("form",{bind:this,class:this.classes(e.css.authoringForm,e.css.authoringFormAdding),onsubmit:this._addBookmarkSubmit},this._renderAddingBookmarkName(),this._renderAddingBookmarkActions()))}_setTooltipReference(a,b){this._tooltipReferenceMap.set(b.uid,
a);this.scheduleRender()}_getBookmarkTitle(a){return(a?.name||this.messagesCommon?.untitled)??""}_formatDate(a){return a?u.formatDate(a,{...u.convertDateFormatToIntlOptions("short-date"),timeZone:this.view?.timeZone??B.system}):""}_formatTime(a){return a?u.formatDate(a,{...u.convertDateFormatToIntlOptions("long-time"),timeZone:this.view?.timeZone??B.system}):""}_dragHandleBlur(){this._selectedSortUid=null;this.scheduleRender()}_dragHandleKeydown(a){const {_sortableSavedItems:b}=this,{key:c,target:f}=
a;if("ArrowDown;ArrowUp;Escape;Tab; ;Enter".split(";").includes(c)){var {_sortable:g,_selectedSortUid:n}=this;if(g){var p=g.toArray(),t=f.getAttribute("data-bookmark-uid"),w=p.indexOf(t);N.isActivationKey(c)?(this._selectedSortUid=(p=n&&n===t)?null:t,this._sortableSavedItems=p?[]:g.toArray(),this.scheduleRender()):"Tab"===c?(this._selectedSortUid=null,this.scheduleRender()):"Escape"===c&&0!==b.length?(a.stopPropagation(),this._selectedSortUid=null,this._updateSortItems(b,g,t),this.scheduleRender()):
-1!==w&&n&&(a="ArrowUp"===c?w-1:w+1,a>=p.length||-1>=a||(p.splice(a,0,p.splice(w,1)[0]),this._updateSortItems(p,g,t)))}}}_updateSortItems(a,b,c){b.sort(a);this._sortBookmarks(b);this._selectedSortUid=this._focusSortUid=c}_focusDragHandle(a){var b=v(a);b&&(this._setTooltipReference(a,b),{_focusSortUid:b}=this,a&&b&&a.getAttribute("data-bookmark-uid")===b&&(a.focus(),this._focusSortUid=null))}_toggleSorting(){const {_sortable:a,_sortableNode:b,editingEnabled:c,disabled:f}=this;if(b)if(a)a.option("disabled",
f||!c);else{const g=P.Sortable.create(b,{dataIdAttr:"data-bookmark-uid",handle:`.${e.css.bookmarkDragHandle}`,group:"bookmarks",disabled:f||!c,onSort:()=>this._sortBookmarks(g)});this._sortable=g}}_sortNodeCreated(a){this._sortableNode=a;this._toggleSorting()}_sortBookmarks(a){const {bookmarks:b}=this.viewModel;if(b){var c=a.toArray();b.sort((f,g)=>{f=c.indexOf(f.uid);g=c.indexOf(g.uid);return f>g?1:f<g?-1:0})}}_destroySortable(){const {_sortable:a}=this;a&&a.destroy();this._sortable=null}_endAddBookmark(){this._focusAddBookmarkButton=
!0;this.endAddBookmark()}_bookmarksInitialized(){this.removeHandles("bookmarks-init");this.addHandles(r.on(()=>this.viewModel?.bookmarks,"change",()=>this._bookmarksChanged()),"bookmarks-init")}_bookmarksChanged(){var {bookmarks:a}=this.viewModel;this.removeHandles("bookmarks-change");a=a.map(b=>r.watch(()=>[b?.name,b?.thumbnail?.url],()=>this.scheduleRender()));this.addHandles(a.toArray(),"bookmarks-change");this.scheduleRender()}_showEditBookmarkForm(a){if(a=v(a.currentTarget))this._editIncludeTimeExtent=
!!a.timeExtent,this._focusEditInputBox=!0,this._userState=new y({bookmark:a,state:"edit"}),this.viewModel.goTo(a),this.scheduleRender()}_closeUrlEditBookmarkForm(){this._focusEditInputBox=!0;this._userState&&(this._userState.state="edit")}_closeEditBookmarkForm(){this._userState=null}_addBookmarkSubmit(a){a.preventDefault();const {_addInputNode:b,_userState:c}=this;if(c){var f=b?b.value.trim():null;f?(c.loading=!0,this.viewModel.createBookmark().then(g=>{g.name=f;this.viewModel.bookmarks.add(g);this._endAddBookmark()})):
c.validationState="name-required"}}async _editBookmarkAndClose(a,b){const {viewModel:c}=this;await c.editBookmark(a,{...c.defaultEditOptions,...b});this._closeEditBookmarkForm()}_editBookmarkSubmit(a){a.preventDefault();const {_editInputNode:b,_userState:c,_editIncludeTimeExtent:f}=this;c?.bookmark&&c.editedBookmark&&((a=b&&b.value.trim())?(c.bookmark.name=a,c.bookmark.thumbnail=c.editedBookmark.thumbnail,f||(c.bookmark.timeExtent=null),this._editBookmarkAndClose(c.bookmark,{takeScreenshot:!1,captureTimeExtent:f})):
c.validationState="name-required")}_storeAddBookmarkButton(a){this._addBookmarkButtonNode=a;this._focusAddBookmark()}_storeEditInput(a){this._editInputNode=a;this._focusEditInput()}_storeAddInput(a){this._addInputNode=a;this._focusAddInput()}_storeUrlEditInput(a){this._urlEditInputNode=a;this._focusUrlEditInput()}_focusUrlEditInput(){this._urlEditInputNode&&this._focusUrlEditInputBox&&(this._focusUrlEditInputBox=!1,this._urlEditInputNode.focus())}_focusAddInput(){this._addInputNode&&this._focusAddInputBox&&
(this._focusAddInputBox=!1,this._addInputNode.focus())}_focusAddBookmark(){this._addBookmarkButtonNode&&this._focusAddBookmarkButton&&(this._focusAddBookmarkButton=!1,this._addBookmarkButtonNode.focus())}_focusEditInput(){this._editInputNode&&this._focusEditInputBox&&(this._focusEditInputBox=!1,this._editInputNode.focus())}_deleteBookmark(a){(a=v(a.currentTarget))&&this.viewModel.bookmarks.remove(a)}_goToBookmark(a){if(a=v(a.currentTarget))this.endAddBookmark(),this._closeEditBookmarkForm(),this.viewModel.goTo(a)}async _refreshThumbnail(){const {_userState:a,
_editMenu:b,viewModel:c}=this;a&&(a.validationState=void 0,await c.editBookmark(a.editedBookmark,{takeScreenshot:!0,captureViewpoint:!1,captureRotation:!1,captureScale:!1,captureTimeExtent:!1}),b.open=!1,this._focusEditInputBox=!0,this.scheduleRender())}_removeThumbnail(){const {_userState:a,_editMenu:b}=this;a?.editedBookmark&&(a.editedBookmark.thumbnail=null,a.validationState=void 0,b.open=!1,this._focusEditInputBox=!0,this.scheduleRender())}_startUseImageUrl(){this._userState&&(this._userState.state=
"edit-thumbnail");this._editMenu.open=!1;this._focusUrlEditInputBox=!0;this.scheduleRender()}_editBookmarkUrlSubmit(a){a.preventDefault();const {_urlEditInputNode:b,_userState:c}=this;b&&c&&(a=b.value,A.test(a)?(a&&c.editedBookmark&&(c.editedBookmark.thumbnail=new I.SlideThumbnail({url:a})),this._closeUrlEditBookmarkForm()):c.validationState="absolute-url-required")}};k.__decorate([m.property()],h.prototype,"_editIncludeTimeExtent",void 0);k.__decorate([m.property({type:y})],h.prototype,"_userState",
void 0);k.__decorate([m.property({readOnly:!0})],h.prototype,"_editMenuItems",null);k.__decorate([m.property({readOnly:!0})],h.prototype,"_editMenu",null);k.__decorate([m.property()],h.prototype,"defaultCreateOptions",null);k.__decorate([m.property()],h.prototype,"defaultEditOptions",null);k.__decorate([m.property()],h.prototype,"bookmarks",null);k.__decorate([m.property()],h.prototype,"disabled",void 0);k.__decorate([m.property()],h.prototype,"editingEnabled",void 0);k.__decorate([m.property()],
h.prototype,"headingLevel",void 0);k.__decorate([m.property()],h.prototype,"goToOverride",null);k.__decorate([m.property()],h.prototype,"iconClass",void 0);k.__decorate([m.property()],h.prototype,"icon",void 0);k.__decorate([m.property()],h.prototype,"label",null);k.__decorate([m.property(),D.messageBundle("esri/widgets/Bookmarks/t9n/Bookmarks")],h.prototype,"messages",void 0);k.__decorate([m.property(),D.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);k.__decorate([m.property()],
h.prototype,"uiStrings",void 0);k.__decorate([m.property()],h.prototype,"view",null);k.__decorate([m.property({type:C}),O.vmEvent(["select-bookmark","bookmark-edit","bookmark-select"])],h.prototype,"viewModel",void 0);k.__decorate([m.property()],h.prototype,"visibleElements",void 0);k.__decorate([G.cast("visibleElements")],h.prototype,"castVisibleElements",null);k.__decorate([m.property()],h.prototype,"endAddBookmark",null);k.__decorate([m.property()],h.prototype,"startAddBookmark",null);return h=
k.__decorate([H.subclass("esri.widgets.Bookmarks")],h)});