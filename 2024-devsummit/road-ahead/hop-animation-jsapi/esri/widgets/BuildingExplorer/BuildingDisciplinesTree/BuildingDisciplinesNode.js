// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../../chunks/tslib.es6 ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../Widget ../support/LayerTreeNode ../../support/legacyIcon ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(g,k,h,d,u,v,p,q,r,l,n,e){var m;const t={expand:"expand",collapse:"collapse",hideSublayer:"hideSublayer",showSublayer:"showSublayer"},c={base:"esri-building-disciplines-tree-node",
root:"esri-building-disciplines-tree-node--root",leaf:"esri-building-disciplines-tree-node--leaf",label:"esri-building-disciplines-tree-node__label",checkbox:"esri-building-disciplines-tree-node__checkbox",checkboxChecked:"esri-building-disciplines-tree-node__checkbox--checked",checkboxIndeterminate:"esri-building-disciplines-tree-node__checkbox--indeterminate",collapseToggle:"esri-building-disciplines-tree-node__collapse-toggle",collapseToggleCollapsed:"esri-building-disciplines-tree-node__collapse-toggle--collapsed",
children:"esri-building-disciplines-tree-node__children",level:a=>`${"esri-building-disciplines-tree-node"}--level-${a}`};d=m=class extends q{constructor(a){super(a);this.messages=t;this.toggleSiblingsVisibility=!1;this._childWidgets=[];this._updateChildWidgets=()=>{this._destroyChildWidgets();this._childWidgets=this.node.children.toArray().reverse().map(b=>new m({node:b,messages:this.messages,toggleSiblingsVisibility:this.toggleSiblingsVisibility}))}}initialize(){this.addHandles([k.on(()=>this.node.children,
"after-changes",this._updateChildWidgets,{onListenerAdd:this._updateChildWidgets,onListenerRemove:this._updateChildWidgets}),k.watch(()=>[this.messages,this.toggleSiblingsVisibility],this._updateChildWidgets,k.initial)])}destroy(){this._destroyChildWidgets()}render(){const a=this.node,b=a.isRoot,f=a.isLeaf;return a.isDiscipline&&f?e.tsx("div",{key:`${a.id}-empty`}):e.tsx("div",{"aria-expanded":a.collapsed?"false":"true",bind:this,class:this.classes(c.base,c.level(a.level),{[c.root]:b,[c.leaf]:f}),
key:a.id,onkeydown:this._onKeydown,role:"treeitem",tabIndex:f?void 0:0},e.tsx("label",{bind:this,class:c.label,onclick:this._onCheckboxToggle},this._renderCollapseToggle(),this._renderCheckbox(),e.tsx("span",null,a.title)),this._renderChildren(a))}_renderCheckbox(){var a=this.node.visible;const b=!0===a;a=null===a;const f=b?this.messages?.hideSublayer:this.messages?.showSublayer;return e.tsx("button",{"aria-checked":b?"true":"false","aria-label":f,bind:this,class:this.classes(c.checkbox,{[c.checkboxChecked]:b,
[l.legacyIcon.checkMark]:b,[c.checkboxIndeterminate]:a,[l.legacyIcon.minus]:a}),onclick:this._onCheckboxToggle,role:"checkbox",title:f,type:"button"})}_renderCollapseToggle(){if(!this.node.hasChildren)return null;const a=this.node.collapsed,b=a?this.messages?.expand:this.messages?.collapse;return e.tsx("div",{"aria-label":b,bind:this,class:this.classes(c.collapseToggle,l.legacyIcon.right,{[c.collapseToggleCollapsed]:a}),onclick:this._onCollapseToggle,title:b})}_renderChildren(a){return!a.hasChildren||
a.collapsed?null:e.tsx("div",{class:c.children},this._childWidgets.map(b=>b.render()))}_onKeydown(a){switch(a.key){case "Space":case "Enter":if(!a.target.classList.contains(c.base))break;a.stopPropagation();this.node.toggleVisibility();break;case "ArrowLeft":a.stopPropagation();this.node.toggleCollapsed(!n.isRTL(this.container));break;case "ArrowRight":a.stopPropagation(),this.node.toggleCollapsed(n.isRTL(this.container))}}_onCheckboxToggle(a){a.preventDefault();a.stopPropagation();(a.metaKey||a.ctrlKey)&&
this.toggleSiblingsVisibility?this.node.toggleAllSiblingsVisibility():this.node.toggleVisibility()}_onCollapseToggle(a){a.preventDefault();a.stopPropagation();this.node.toggleCollapsed()}_destroyChildWidgets(){this._childWidgets.forEach(a=>a.destroy());this._childWidgets=[]}};g.__decorate([h.property({type:r.LayerTreeNode})],d.prototype,"node",void 0);g.__decorate([h.property()],d.prototype,"messages",void 0);g.__decorate([h.property({nonNullable:!0})],d.prototype,"toggleSiblingsVisibility",void 0);
g.__decorate([h.property()],d.prototype,"_childWidgets",void 0);return d=m=g.__decorate([p.subclass("esri.widgets.BuildingExplorer.BuildingDisciplinesTree.BuildingDisciplinesNode")],d)});