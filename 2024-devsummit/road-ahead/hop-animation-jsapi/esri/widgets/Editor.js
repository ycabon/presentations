// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/sketch/SketchValueOptions":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../support/angularMeasurementUtils".split(" "),function(q,u,v,A,z,Q,w,L){u=class extends u{constructor(W){super(W);this.directionMode="relative";this.relativeDirectionIsBilateral=!1}get effectiveDirectionMode(){switch(this.directionMode){case "relative":return this.relativeDirectionIsBilateral?
L.DirectionMode.RelativeBilateral:L.DirectionMode.Relative;case "absolute":return L.DirectionMode.Absolute}}};q.__decorate([v.property({type:String,nonNullable:!0})],u.prototype,"directionMode",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"relativeDirectionIsBilateral",void 0);q.__decorate([v.property()],u.prototype,"effectiveDirectionMode",null);return u=q.__decorate([w.subclass("esri.views.interactive.sketch.SketchValueOptions")],u)})},"esri/views/support/angularMeasurementUtils":function(){define("exports ../../core/Cyclical ../../core/quantityUtils ../../core/unitUtils ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../../geometry/projection/projectVectorToVector ../../geometry/support/geodesicUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R){function F(M,G){if(null!=M&&null!=G)return M=y(M,G),null!=M?v.createAngle(M,"radians","geographic"):void 0}function E(M,G,X){if(M&&G&&X&&(M=y(M,G),G=y(G,X),null!=M&&null!=G))return v.createAngle(G-M,"radians","geographic")}function I(M,G){if(null!=M)switch(M=H(M),G){case q.DirectionMode.Absolute:return G=Z.normalize(M,0,!0),v.createAngle(G,"degrees","geographic");case q.DirectionMode.Relative:return G=aa.normalize(M,0,!0),-180===G&&(G=180),v.createAngle(G,"degrees",
"geographic");case q.DirectionMode.RelativeBilateral:return G=Math.abs(aa.normalize(M,0,!0)),v.createAngle(G,"degrees","geographic")}}function H(M){return null!=M?v.convertRotationType(A.convertUnit(M.value,M.unit,"degrees"),M.rotationType,"geographic"):void 0}q.DirectionMode=void 0;(function(M){M.Absolute="absolute";M.Relative="relative";M.RelativeBilateral="relative-bilateral"})(q.DirectionMode||(q.DirectionMode={}));const y=(()=>{const M=L.create(),G=L.create();return(X,C)=>{w.set(M,X.x,X.y,X.z??
0);w.set(G,C.x,C.y,C.z??0);return O(M,G,X.spatialReference,C.spatialReference)}})(),O=(()=>{const M=Q.create(),G=L.create(),X=L.create();return(C,V,ia,oa)=>{if(!w.exactEquals(C,V)){var ma=B.geodesicCompatibleSpatialReference(ia),D=B.geodesicCompatibleSpatialReference(oa);if(ma&&D&&R.equals(ma,D)&&W.projectVectorToVector(C,ia,G,ma)&&W.projectVectorToVector(V,oa,X,D))return{azimuth:C}=B.inverseGeodeticSolver(P,G,X,ma),null!=C?A.convertUnit(C,"degrees","radians"):void 0;M[0]=V[0]-C[0];M[1]=V[1]-C[1];
C=z.angle(Q.UNIT_Y,M);0>M[0]&&(C=S-C);return C}}})(),U=(()=>{const M=L.create();return(G,X,C,V,ia,oa="geodesic")=>{w.copy(M,X);ia=H(ia);if("geodesic"===oa&&(oa=B.geodesicCompatibleSpatialReference(C))&&W.projectVectorToVector(M,C,M,oa))return B.directGeodeticSolver(G,M,ia,V,oa),G[2]=X[2],W.projectVectorToVector(G,oa,G,C)?!0:!1;C=v.convertRotationType(ia,"geographic","arithmetic");C=A.convertUnit(C,"degrees","radians");w.set(G,X[0]+V*Math.cos(C),X[1]+V*Math.sin(C),X[2]);return!0}})(),P=new B.InverseGeodeticSolverResult,
S=2*Math.PI,Z=u.cyclicalDegrees,aa=new u.Cyclical(-180,180);q.directionBetweenPoints=F;q.directionForVertices=function(M,G,X,C=q.DirectionMode.Absolute){if(G&&X)switch(C){case q.DirectionMode.Absolute:return F(G,X);case q.DirectionMode.Relative:return I(E(M,G,X),q.DirectionMode.Relative);case q.DirectionMode.RelativeBilateral:return I(E(M,G,X),q.DirectionMode.RelativeBilateral)}};q.getDegreesGeographic=H;q.getNormalizedDirection=I;q.pointFromDistanceAlongAzimuth=U;q.radiansGeographicBetweenVec=O;
Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/quantityUtils":function(){define(["exports","./unitUtils"],function(q,u){function v(I,H){return{type:u.unitType(H),value:I,unit:H}}function A(I,H){return{type:u.unitType(H),value:I,unit:H}}function z(I,H){return{type:u.unitType(H),value:I,unit:H}}function Q(I,H,y="arithmetic"){return{type:u.unitType(H),value:I,unit:H,rotationType:y}}function w(I,H){const y=L(I,H);return"angle"===I.type?Q(y,H,I.rotationType):v(y,H)}function L(I,
H){return u.convertUnit(I.value,I.unit,H)}const W=A(0,"meters"),B=z(0,"square-meters"),R=Q(0,"radians"),F=Q(0,"degrees"),E=Q(0,"degrees","geographic");q.convertRotationType=function(I,H,y){if(H===y)return I;switch(y){case "arithmetic":case "geographic":return-I+90}};q.createAngle=Q;q.createArea=z;q.createLength=A;q.createQuantity=v;q.createVolume=function(I,H){return{type:u.unitType(H),value:I,unit:H}};q.isBaseUnit=function(I){return u.isBaseUnit(I.unit)};q.max=function(I,H){return null==I?H:null==
H?I:I.value>u.convertUnit(H.value,H.unit,I.unit)?I:H};q.min=function(I,H){return null==I?H:null==H?I:I.value<u.convertUnit(H.value,H.unit,I.unit)?I:H};q.scale=function(I,H){return null==I?null:{...I,value:I.value*H}};q.toBaseUnit=function(I){return w(I,u.baseUnitForUnit(I.unit))};q.toUnit=w;q.valueInUnit=L;q.zeroDegrees=F;q.zeroDegreesGeographic=E;q.zeroMeters=W;q.zeroRadians=R;q.zeroSquareMeters=B;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],
function(q){function u(){return[0,0]}function v(y){return[y[0],y[1]]}function A(y,O){return[y,O]}function z(y,O=[0,0]){const U=Math.min(2,y.length);for(let P=0;P<U;++P)O[P]=y[P];return O}function Q(y,O){return new Float64Array(y,O,2)}function w(){return[0,0]}function L(){return[1,1]}function W(){return[1,0]}function B(){return[0,1]}const R=[0,0],F=[1,1],E=[1,0],I=[0,1],H=Object.freeze(Object.defineProperty({__proto__:null,ONES:F,UNIT_X:E,UNIT_Y:I,ZEROS:R,clone:v,create:u,createView:Q,fromArray:z,
fromValues:A,ones:L,unitX:W,unitY:B,zeros:w},Symbol.toStringTag,{value:"Module"}));q.ONES=F;q.UNIT_X=E;q.UNIT_Y=I;q.ZEROS=R;q.clone=v;q.create=u;q.createView=Q;q.fromArray=z;q.fromValues=A;q.ones=L;q.unitX=W;q.unitY=B;q.vec2f64=H;q.zeros=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectVectorToVector":function(){define(["exports","../projection","../SpatialReference","./projectPointToVector","../../layers/graphics/dehydratedPoint"],function(q,u,v,
A,z){function Q(L,W,B,R,F){if(null==W||null==R||2>L.length)return!1;w.x=L[0];w.y=L[1];w.z=L[2];w.spatialReference=W;return A.projectPointToVector(w,B,R,F)}const w=z.makeDehydratedPoint(0,0,0,v.WGS84);q.projectVectorToVector=Q;q.projectVectorToVectorAsync=async function(L,W,B,R,F,E){await u.initializeProjection(W,R,null,E);return Q(L,W,B,R,F)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectPointToVector":function(){define(["exports","../../core/libs/gl-matrix-2/factories/vec3f64",
"../projection","./projectBuffer"],function(q,u,v,A){function z(w,L,W,B){if(v.canProjectWithoutEngine(w.spatialReference,W))return Q[0]=w.x,Q[1]=w.y,Q[2]=w.z??B??0,A.projectBuffer(Q,w.spatialReference,0,L,W,0,1);w=v.tryProjectWithZConversion(w,W);if(!w)return!1;L[0]=w?.x;L[1]=w?.y;L[2]=w?.z??B??0;return!0}const Q=u.create();q.projectPointToVector=z;q.projectPointToVectorAsync=async function(w,L,W,B,R){await v.initializeProjection(w.spatialReference,W,null,R);return z(w,L,W,B)};Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/layers/graphics/dehydratedPoint":function(){define(["exports"],function(q){q.makeDehydratedPoint=function(u,v,A,z){return{x:u,y:v,z:A,hasZ:null!=A,hasM:!1,spatialReference:z,type:"point"}};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../geometry ../../core/Error ../../core/unitUtils ./geodesicConstants ./spatialReferenceUtils ../Polyline ../Polygon ../Point ../SpatialReference".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){function R(S){if(!S)return null;if(Q.isGeographic(S)&&S.wkid){var Z=z.spheroids[S.wkid];if(Z)return Z}if(S=S.wkt2||S.wkt)if((S=z.wktSpheroidRegex.exec(S))&&2===S.length?(Z=S[1].split(","),!Z||3>Z.length?S=null:(S=parseFloat(Z[1]),Z=parseFloat(Z[2]),S=isNaN(S)||isNaN(Z)?null:{a:S,f:0===Z?0:1/Z})):S=null,S)return S;return null}function F(S){S=R(S);if(null!=S&&"b"in S&&"eSq"in S&&"radius"in S)return S;const Z=S.a*(1-S.f);return Object.assign(S,{b:Z,eSq:1-(Z/S.a)**2,radius:(2*
S.a+Z)/3,densificationRatio:1E4/((2*S.a+Z)/3)})}function E(S){return null!=S&&0>S?S+360:S}function I(S,Z,aa){const {a:M,eSq:G}=F(aa);aa=Math.sqrt(G);const X=Math.sin(Z[1]*z.toRadians);Z=M*Z[0]*z.toRadians;aa=0<G?M*(1-G)*(X/(1-G*X*X)-1/(2*aa)*Math.log((1-aa*X)/(1+aa*X)))*.5:M*X;S[0]=Z;S[1]=aa;return S}function H(S){return null!==R(S)}function y(S,Z){if("polyline"!==S.type&&"polygon"!==S.type)throw new v("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:aa}=
S;if(!H(aa))throw new v("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var M="polyline"===S.type?S.paths:S.rings;const G=[],X=[0,0],C=new P;for(const oa of M){M=[];G.push(M);M.push([oa[0][0],oa[0][1]]);var V=oa[0][0],ia=oa[0][1];let ma,D;for(let J=0;J<oa.length-1;J++){ma=oa[J+1][0];D=oa[J+1][1];if(V===ma&&ia===D)continue;const ea=[V,ia];U(C,[V,ia],[ma,D],aa);const {azimuth:ba,distance:T}=C;V=T/Z;if(1<V){for(ia=1;ia<=V-1;ia++)O(X,ea,ba,ia*Z,aa),
M.push(X.slice(0));O(X,ea,ba,(T+Math.floor(V-1)*Z)/2,aa);M.push(X.slice(0))}O(X,ea,ba,T,aa);M.push(X.slice(0));V=X[0];ia=X[1]}}return"polyline"===S.type?new w({paths:G,spatialReference:aa}):new L({rings:G,spatialReference:aa})}function O(S,Z,aa,M,G){const X=Z[0]*z.toRadians;Z=Z[1]*z.toRadians;aa=(aa??0)*z.toRadians;const {a:C,b:V,f:ia}=F(G);G=Math.sin(aa);aa=Math.cos(aa);var oa=(1-ia)*Math.tan(Z);Z=1/Math.sqrt(1+oa*oa);const ma=oa*Z,D=Math.atan2(oa,aa);oa=Z*G;const J=oa*oa;var ea=1-J,ba=ea*(C*C-V*
V)/(V*V);const T=1+ba/16384*(4096+ba*(-768+ba*(320-175*ba))),Y=ba/1024*(256+ba*(-128+ba*(74-47*ba)));ba=M/(V*T);let fa=2*Math.PI,pa,va,xa,ya;for(;1E-12<Math.abs(ba-fa);)xa=Math.cos(2*D+ba),pa=Math.sin(ba),va=Math.cos(ba),ya=Y*pa*(xa+Y/4*(va*(-1+2*xa*xa)-Y/6*xa*(-3+4*pa*pa)*(-3+4*xa*xa))),fa=ba,ba=M/(V*T)+ya;M=ma*pa-Z*va*aa;ea=ia/16*ea*(4+ia*(4-3*ea));M=Math.atan2(ma*va+Z*pa*aa,(1-ia)*Math.sqrt(J+M*M))/z.toRadians;S[0]=(X+(Math.atan2(pa*G,Z*va-ma*pa*aa)-(1-ea)*ia*oa*(ba+ea*pa*(xa+ea*va*(-1+2*xa*xa)))))/
z.toRadians;S[1]=M;return S}function U(S,Z,aa,M){var G=Z[0]*z.toRadians;Z=Z[1]*z.toRadians;var X=aa[0]*z.toRadians;aa=aa[1]*z.toRadians;const {a:C,b:V,f:ia,radius:oa}=F(M),ma=X-G;var D=Math.atan((1-ia)*Math.tan(Z)),J=Math.atan((1-ia)*Math.tan(aa));M=Math.sin(D);D=Math.cos(D);const ea=Math.sin(J);J=Math.cos(J);let ba=1E3,T=ma,Y,fa,pa;let va,xa,ya;do{var Da=Math.sin(T);var Ca=Math.cos(T);pa=Math.sqrt(J*Da*J*Da+(D*ea-M*J*Ca)*(D*ea-M*J*Ca));if(0===pa)return S.distance=0,S.azimuth=void 0,S.reverseAzimuth=
void 0,S;Ca=M*ea+D*J*Ca;va=Math.atan2(pa,Ca);xa=D*J*Da/pa;fa=1-xa*xa;Da=Ca-2*M*ea/fa;isNaN(Da)&&(Da=0);ya=ia/16*fa*(4+ia*(4-3*fa));Y=T;T=ma+(1-ya)*ia*xa*(va+ya*pa*(Da+ya*Ca*(-1+2*Da*Da)))}while(1E-12<Math.abs(T-Y)&&0<--ba);if(0===ba)return M=Math.acos(Math.sin(Z)*Math.sin(aa)+Math.cos(Z)*Math.cos(aa)*Math.cos(X-G))*oa,G=X-G,S.azimuth=Math.atan2(Math.sin(G)*Math.cos(aa),Math.cos(Z)*Math.sin(aa)-Math.sin(Z)*Math.cos(aa)*Math.cos(G))/z.toRadians,S.distance=M,S.reverseAzimuth=void 0,S;G=fa*(C*C-V*V)/
(V*V);Z=G/1024*(256+G*(-128+G*(74-47*G)));X=Math.atan2(D*Math.sin(T),D*ea*Math.cos(T)-M*J);S.azimuth=Math.atan2(J*Math.sin(T),D*ea-M*J*Math.cos(T))/z.toRadians;S.distance=V*(1+G/16384*(4096+G*(-768+G*(320-175*G))))*(va-Z*pa*(Da+Z/4*(Ca*(-1+2*Da*Da)-Z/6*Da*(-3+4*pa*pa)*(-3+4*Da*Da))));S.reverseAzimuth=X/z.toRadians;return S}class P{constructor(S=0,Z,aa){this.distance=S;this.azimuth=Z;this.reverseAzimuth=aa}}q.InverseGeodeticSolverResult=P;q.directGeodeticSolver=O;q.geodesicAreas=function(S,Z="square-meters"){if(S.some(X=>
!H(X.spatialReference)))throw new v("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const aa=[];for(var M=0;M<S.length;M++){var G=S[M];const {radius:X,densificationRatio:C}=F(G.spatialReference);aa.push(y(G,X*C))}S=[];M=[0,0];G=[0,0];for(let X=0;X<aa.length;X++){const {rings:C,spatialReference:V}=aa[X];let ia=0;for(let oa=0;oa<C.length;oa++){const ma=C[oa];I(M,ma[0],V);I(G,ma[ma.length-1],V);let D=G[0]*M[1]-M[0]*G[1];for(let J=0;J<ma.length-1;J++)I(M,
ma[J+1],V),I(G,ma[J],V),D+=G[0]*M[1]-M[0]*G[1];ia+=D}ia=A.convertUnit(ia,"square-meters",Z);S.push(ia/-2)}return S};q.geodesicCompatibleSpatialReference=function(S){return H(S)?S:Q.isWebMercator(S)?B.WGS84:null};q.geodesicDensify=y;q.geodesicDistance=function(S,Z,aa="meters"){if(!S||!Z)throw new v("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!S.spatialReference||!Z.spatialReference)throw new v("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");
if(!Q.equals(S.spatialReference,Z.spatialReference))throw new v("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:M}=S;if(!H(M))throw new v("geodesic-distance:not-supported","input geometry spatial reference is not supported");if(S.x===Z.x&&S.y===Z.y)return new P(0,0,0);const G=new P;U(G,[S.x,S.y],[Z.x,Z.y],M);G.distance=A.convertUnit(G.distance,"meters",aa);G.azimuth=E(G.azimuth);G.reverseAzimuth=E(G.reverseAzimuth);return G};q.geodesicLengths=
function(S,Z="meters"){if(!S)throw new v("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(S.some(G=>!H(G.spatialReference)))throw new v("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const aa=[];for(let G=0;G<S.length;G++){var M=S[G];const {spatialReference:X}=M;M="polyline"===M.type?M.paths:M.rings;let C=0;for(let V=0;V<M.length;V++){const ia=M[V];let oa=0;for(let ma=1;ma<ia.length;ma++){const D=ia[ma-
1][0],J=ia[ma][0],ea=ia[ma-1][1],ba=ia[ma][1];if(ea!==ba||D!==J){const T=new P;U(T,[D,ea],[J,ba],X);oa+=T.distance}}C+=oa}C=A.convertUnit(C,"meters",Z);aa.push(C)}return aa};q.inverseGeodeticSolver=U;q.isSupported=H;q.pointFromDistance=function(S,Z,aa){if(!S||null==Z||null==aa)throw new v("point-from-distance:missing-parameters","one or more input parameters are missing or undefined");if(0>aa||360<aa)throw new v("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");
if(!S.spatialReference)throw new v("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:M}=S;if(!H(M))throw new v("geodesic-distance:not-supported","input geometry spatial reference is not supported");const G=[0,0];O(G,[S.x,S.y],aa,Z,M);return new W({x:G[0],y:G[1],spatialReference:M})};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments":function(){define("require ../chunks/tslib.es6 ../core/Error ../core/reactiveUtils ../core/unitFormatUtils ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/has ../core/accessorSupport/decorators/subclass ./Widget ./Attachments/AttachmentsViewModel ./Attachments/support/attachmentUtils ../chunks/componentsUtils ./support/globalCss ./support/legacyIcon ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P){const S={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Z=window.CSS;L=class extends R{constructor(aa,M){super(aa,M);this.displayType="auto";this.selectedFile=this.messagesUnits=this.messages=null;this.submitting=!1;this.viewModel=null;this.visibleElements={...S};this._supportsImageOrientation=Z&&Z.supports&&Z.supports("image-orientation","from-image");this._updateAttachmentForm=
this._addAttachmentForm=null}normalizeCtorArgs(aa){aa?.viewModel||(aa={viewModel:new F,...aa});return aa}initialize(){this.addHandles([A.on(()=>this.viewModel?.attachmentInfos,"change",()=>this.scheduleRender()),A.on(()=>this.viewModel?.fileInfos,"change",()=>this.scheduleRender()),A.watch(()=>this.viewModel?.mode,()=>this._modeChanged(),A.initial)])}loadDependencies(){return I.loadCalciteComponents({icon:()=>new Promise((aa,M)=>q(["../chunks/calcite-icon"],aa,M))})}get capabilities(){return this.viewModel.capabilities}set capabilities(aa){this.viewModel.capabilities=
aa}get effectiveDisplayType(){const {displayType:aa}=this;return aa&&"auto"!==aa?aa:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(aa){this.viewModel.graphic=aa}get label(){return this.messages?.widgetLabel??""}set label(aa){this._overrideIfSome("label",aa)}castVisibleElements(aa){return{...S,...aa}}addAttachment(){const {_addAttachmentForm:aa,viewModel:M}=this;this._set("submitting",!0);this._set("error",null);return M.addAttachment(aa).then(G=>
{this._set("submitting",!1);this._set("error",null);M.mode="view";return G}).catch(G=>{this._set("submitting",!1);this._set("error",new v("attachments:add-attachment",this.messages.addErrorMessage,G));throw G;})}deleteAttachment(aa){const {viewModel:M}=this;this._set("submitting",!0);this._set("error",null);return M.deleteAttachment(aa).then(G=>{this._set("submitting",!1);this._set("error",null);M.mode="view";return G}).catch(G=>{this._set("submitting",!1);this._set("error",new v("attachments:delete-attachment",
this.messages.deleteErrorMessage,G));throw G;})}updateAttachment(){const {viewModel:aa}=this,{_updateAttachmentForm:M}=this;this._set("submitting",!0);this._set("error",null);return aa.updateAttachment(M).then(G=>{this._set("submitting",!1);this._set("error",null);aa.mode="view";return G}).catch(G=>{this._set("submitting",!1);this._set("error",new v("attachments:update-attachment",this.messages.updateErrorMessage,G));throw G;})}addFile(){const aa=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);
this.viewModel.mode="view";return aa}updateFile(){const {viewModel:aa}=this,M=aa.updateFile(this.selectedFile,this._updateAttachmentForm,aa.activeFileInfo);aa.mode="view";return M}deleteFile(aa){aa=this.viewModel.deleteFile(aa||this.viewModel.activeFileInfo?.file);this.viewModel.mode="view";return aa}render(){const {submitting:aa,viewModel:M}=this,{state:G}=M;return P.tsx("div",{class:this.classes("esri-attachments",H.globalCss.widget)},aa?this._renderProgressBar():null,"loading"===G?this._renderLoading():
this._renderAttachments(),this._renderErrorMessage())}_renderErrorMessage(){const {error:aa,visibleElements:M}=this;return aa&&M.errorMessage?P.tsx("div",{class:"esri-attachments__error-message",key:"error-message"},aa.message):null}_renderAttachments(){const {activeFileInfo:aa,mode:M,activeAttachmentInfo:G}=this.viewModel;return"add"===M?this._renderAddForm():"edit"===M?this._renderDetailsForm(G||aa):this._renderAttachmentContainer()}_renderLoading(){return P.tsx("div",{class:"esri-attachments__loader-container",
key:"loader"},P.tsx("div",{class:"esri-attachments__loader"}))}_renderProgressBar(){return this.visibleElements.progressBar?P.tsx("div",{class:"esri-attachments__progress-bar",key:"progress-bar"}):null}_renderAddForm(){const {submitting:aa,selectedFile:M}=this;var G=aa||!M,X=this.visibleElements.cancelAddButton?P.tsx("button",{bind:this,class:this.classes(H.globalCss.button,H.globalCss.buttonTertiary,H.globalCss.buttonSmall,H.globalCss.buttonHalf,aa&&H.globalCss.buttonDisabled),disabled:aa,onclick:this._cancelForm,
type:"button"},this.messages.cancel):null;G=this.visibleElements.addSubmitButton?P.tsx("button",{class:this.classes(H.globalCss.button,H.globalCss.buttonSecondary,H.globalCss.buttonSmall,H.globalCss.buttonHalf,{[H.globalCss.buttonDisabled]:G}),disabled:G,type:"submit"},this.messages.add):null;const C=M?P.tsx("span",{class:"esri-attachments__file-name",key:"file-name"},M.name):null;X=P.tsx("form",{afterCreate:O.storeNode,afterRemoved:O.discardNode,bind:this,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},
P.tsx("fieldset",{class:"esri-attachments__file-fieldset"},C,P.tsx("label",{class:this.classes("esri-attachments__file-label",H.globalCss.button,H.globalCss.buttonSecondary)},M?this.messages.changeFile:this.messages.selectFile,P.tsx("input",{bind:this,class:"esri-attachments__file-input",name:"attachment",onchange:this._handleFileInputChange,type:"file"}))),G,X);return P.tsx("div",{class:"esri-attachments__form-node",key:"add-form-container"},X)}_renderDetailsForm(aa){const {visibleElements:M,viewModel:G,
selectedFile:X,submitting:C}=this;var {capabilities:V}=G,ia=C||!X;let oa;if(X){var ma=X.type;oa=X.name;var D=X.size}else if(aa&&"file"in aa)ma=aa.file.type,oa=aa.file.name,D=aa.file.size;else if(aa&&"contentType"in aa){ma=aa.contentType;oa=aa.name;D=aa.size;var J=aa.url}var ea=V.editing&&V.operations?.delete&&M.deleteButton?P.tsx("button",{bind:this,class:this.classes(H.globalCss.button,H.globalCss.buttonSmall,H.globalCss.buttonTertiary,"esri-attachments__delete-button",{[H.globalCss.buttonDisabled]:C}),
disabled:C,key:"delete-button",onclick:T=>this._submitDeleteAttachment(T,aa),type:"button"},this.messages.delete):void 0;ia=V.editing&&V.operations?.update&&M.updateButton?P.tsx("button",{class:this.classes(H.globalCss.button,H.globalCss.buttonSmall,H.globalCss.buttonThird,{[H.globalCss.buttonDisabled]:ia}),disabled:ia,key:"update-button",type:"submit"},this.messages.update):void 0;const ba=this.visibleElements.cancelUpdateButton?P.tsx("button",{bind:this,class:this.classes(H.globalCss.button,H.globalCss.buttonSmall,
H.globalCss.buttonTertiary,H.globalCss.buttonThird,{[H.globalCss.buttonDisabled]:C}),disabled:C,key:"cancel-button",onclick:this._cancelForm,type:"button"},this.messages.cancel):void 0;V=V.editing&&V.operations?.update?P.tsx("fieldset",{class:"esri-attachments__file-fieldset",key:"file"},P.tsx("span",{class:"esri-attachments__file-name",key:"file-name"},oa),P.tsx("label",{class:this.classes("esri-attachments__file-label",H.globalCss.button,H.globalCss.buttonSecondary)},this.messages.changeFile,P.tsx("input",
{bind:this,class:"esri-attachments__file-input",name:"attachment",onchange:this._handleFileInputChange,type:"file"}))):void 0;D=P.tsx("fieldset",{class:"esri-attachments__metadata-fieldset",key:"size"},P.tsx("label",null,z.formatFileSize(this.messagesUnits,D??0)));ma=P.tsx("fieldset",{class:"esri-attachments__metadata-fieldset",key:"content-type"},P.tsx("label",null,ma));J=null!=J?P.tsx("a",{class:"esri-attachments__item-link",href:J,rel:"noreferrer",target:"_blank"},this._renderImageMask(aa,400),
P.tsx("div",{class:"esri-attachments__item-link-overlay"},P.tsx("span",{class:"esri-attachments__item-link-overlay-icon"},P.tsx("calcite-icon",{icon:"launch"})))):this._renderImageMask(aa,400);ea=P.tsx("form",{afterCreate:O.storeNode,afterRemoved:O.discardNode,bind:this,"data-node-ref":"_updateAttachmentForm",onsubmit:T=>this._submitUpdateAttachment(T,aa)},P.tsx("div",{class:"esri-attachments__metadata"},D,ma),V,P.tsx("div",{class:"esri-attachments__actions"},ea,ba,ia));return P.tsx("div",{class:"esri-attachments__form-node",
key:"edit-form-container"},J,ea)}_renderImageMask(aa,M){return aa?"file"in aa?this._renderGenericImageMask(aa.file.name,aa.file.type):this._renderImageMaskForAttachment(aa,M):null}_renderGenericImageMask(aa,M){var {supportsResizeAttachments:G}=this.viewModel;M=E.getIconPath(M);G={["esri-attachments__image--resizable"]:G};return P.tsx("div",{class:this.classes("esri-attachments__item-mask--icon","esri-attachments__item-mask"),key:M},P.tsx("img",{alt:aa,class:this.classes(G,"esri-attachments__image"),
src:M,title:aa}))}_renderImageMaskForAttachment(aa,M){var {supportsResizeAttachments:G}=this.viewModel;if(!aa)return null;const {contentType:X,name:C,url:V}=aa;if(!G||!E.isSupportedImage(X))return this._renderGenericImageMask(C,X);aa=(aa=this._getCSSTransform(aa))?{transform:aa,"image-orientation":"none"}:{};M=`${V}${V?.includes("?")?"\x26":"?"}w=${M}`;G={["esri-attachments__image--resizable"]:G};return P.tsx("div",{class:this.classes("esri-attachments__item-mask"),key:M},P.tsx("img",{alt:C,class:this.classes(G,
"esri-attachments__image"),src:M,styles:aa,title:C}))}_renderFile(aa){const {file:M}=aa;return P.tsx("li",{class:"esri-attachments__item",key:M},P.tsx("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:"esri-attachments__item-button",key:"details-button",onclick:()=>this._startEditFile(aa),title:this.messages.attachmentDetails,type:"button"},this._renderImageMask(aa),P.tsx("label",{class:"esri-attachments__label"},P.tsx("span",{class:"esri-attachments__filename"},M.name||this.messages.noTitle),
P.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",O.isRTL(this.container)?y.legacyIcon.left:y.legacyIcon.right)}))))}_renderAttachmentInfo({attachmentInfo:aa,displayType:M}){const {viewModel:G,effectiveDisplayType:X}=this,{capabilities:C,supportsResizeAttachments:V}=G,{contentType:ia,name:oa,url:ma}=aa;M=this._renderImageMask(aa,"list"===M?48:400);var D=C.editing?P.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-chevron-icon",O.isRTL(this.container)?
y.legacyIcon.left:y.legacyIcon.right)}):null;D="preview"===X&&V&&E.isSupportedImage(ia)?null:P.tsx("label",{class:"esri-attachments__label"},P.tsx("span",{class:"esri-attachments__filename"},oa||this.messages.noTitle),D);M=[M,D];M=C.editing?P.tsx("button",{"aria-label":this.messages.attachmentDetails,bind:this,class:"esri-attachments__item-button","data-attachment-info-id":aa.id,key:"details-button",onclick:()=>this._startEditAttachment(aa),title:this.messages.attachmentDetails,type:"button"},M):
P.tsx("a",{class:"esri-attachments__item-button",href:ma??void 0,key:"details-link",target:"_blank"},M);return P.tsx("li",{class:"esri-attachments__item",key:aa},M)}_renderAttachmentContainer(){const {effectiveDisplayType:aa,viewModel:M,visibleElements:G}=this,{attachmentInfos:X,capabilities:C,fileInfos:V}=M;var ia=!!X?.length;const oa=!!V?.length,ma={["esri-attachments__container--list"]:"preview"!==aa,["esri-attachments__container--preview"]:"preview"===aa},D=C.editing&&C.operations?.add&&G.addButton?
P.tsx("button",{bind:this,class:this.classes(H.globalCss.button,H.globalCss.buttonTertiary,"esri-attachments__add-attachment-button"),onclick:()=>this._startAddAttachment(),type:"button"},P.tsx("span",{"aria-hidden":"true",class:this.classes("esri-attachments__item-add-icon",y.legacyIcon.plus)}),this.messages.add):void 0,J=ia?P.tsx("ul",{class:"esri-attachments__items",key:"attachments-list"},X.toArray().map(ba=>this._renderAttachmentInfo({attachmentInfo:ba,displayType:aa}))):void 0,ea=oa?P.tsx("ul",
{class:"esri-attachments__items",key:"file-list"},V.toArray().map(ba=>this._renderFile(ba))):void 0;ia=oa||ia?void 0:P.tsx("div",{class:H.globalCss.empty},this.messages.noAttachments);return P.tsx("div",{class:this.classes("esri-attachments__container",ma),key:"attachments-container"},J,ea,ia,D)}_modeChanged(){this._set("error",null);this._set("selectedFile",null)}_handleFileInputChange(aa){aa=aa.target.files?.item(0);this._set("selectedFile",aa)}_submitDeleteAttachment(aa,M){aa.preventDefault();
M&&("file"in M?this.deleteFile(M.file):M&&this.deleteAttachment(M))}_submitAddAttachment(aa){aa.preventDefault();this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(aa,M){aa.preventDefault();M&&"file"in M?this.updateFile():this.updateAttachment()}_startEditAttachment(aa){const {viewModel:M}=this;M.activeFileInfo=null;M.activeAttachmentInfo=aa;M.mode="edit"}_startEditFile(aa){const {viewModel:M}=this;M.activeAttachmentInfo=null;M.activeFileInfo=aa;M.mode="edit"}_startAddAttachment(){this.viewModel.mode=
"add"}_cancelForm(aa){aa.preventDefault();this.viewModel.mode="view"}_getCSSTransform(aa){({orientationInfo:aa}=aa);return!this._supportsImageOrientation&&aa?[aa.rotation?`rotate(${aa.rotation}deg)`:"",aa.mirrored?"scaleX(-1)":""].join(" "):""}};u.__decorate([Q.property()],L.prototype,"capabilities",null);u.__decorate([Q.property()],L.prototype,"displayType",void 0);u.__decorate([Q.property({readOnly:!0})],L.prototype,"effectiveDisplayType",null);u.__decorate([Q.property()],L.prototype,"graphic",
null);u.__decorate([Q.property()],L.prototype,"label",null);u.__decorate([Q.property(),U.messageBundle("esri/widgets/Attachments/t9n/Attachments")],L.prototype,"messages",void 0);u.__decorate([Q.property(),U.messageBundle("esri/core/t9n/Units")],L.prototype,"messagesUnits",void 0);u.__decorate([Q.property({readOnly:!0})],L.prototype,"selectedFile",void 0);u.__decorate([Q.property({readOnly:!0})],L.prototype,"submitting",void 0);u.__decorate([Q.property({readOnly:!0})],L.prototype,"error",void 0);
u.__decorate([Q.property({type:F})],L.prototype,"viewModel",void 0);u.__decorate([Q.property()],L.prototype,"visibleElements",void 0);u.__decorate([w.cast("visibleElements")],L.prototype,"castVisibleElements",null);return L=u.__decorate([B.subclass("esri.widgets.Attachments")],L)})},"esri/core/unitFormatUtils":function(){define("exports ./ByteSizeUnit ./Cyclical ./mathUtils ./quantityUtils ./string ./unitUtils ../intl/number".split(" "),function(q,u,v,A,z,Q,w,L){function W(H,y,O){return H.units[y][O]}
function B(H,y,O,U=2,P="abbr"){return`${L.formatNumber(y,{minimumFractionDigits:U,maximumFractionDigits:U,signDisplay:0<y?"never":"exceptZero"})} ${W(H,O,P)}`}function R(H,y,O,U=2,P="abbr"){return`${L.formatNumber(y,{minimumFractionDigits:U,maximumFractionDigits:U,signDisplay:"exceptZero"})} ${W(H,O,P)}`}function F(H,y){const O=JSON.stringify(y);let U=E.get(O);U||(U=new Intl.NumberFormat("en-US",y),E.set(O,U));return/\-?\+?360/.test(U.format(H))?0:H}const E=new Map,I=["B","kB","MB","GB","TB"];q.formatAngleDegrees=
function(H,y,O,U,P){P=P??2;H=v.cyclicalDegrees.normalize(z.convertRotationType(w.convertUnit(H,y,"degrees"),O,U),0,!0);P={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:P,minimumFractionDigits:P,signDisplay:0<H?"never":"exceptZero"};H=F(H,P);return L.formatNumber(H,P)};q.formatDMS=function(H,y,O=2){H=w.convertUnit(H,y,"degrees");y=H-Math.floor(H);H-=y;y*=60;let U=y-Math.floor(y);y-=U;U*=60;return`${H.toFixed()}\u00b0 ${y.toFixed()}' ${U.toFixed(O)}"`};q.formatDecimal=B;q.formatFileSize=
function(H,y){y=Math.round(y);let O=0===y?0:Math.floor(Math.log(y)/Math.log(u.ByteSizeUnit.KILOBYTES));O=A.clamp(O,0,I.length-1);y=L.formatNumber(y/u.ByteSizeUnit.KILOBYTES**O,{maximumFractionDigits:2});return Q.replace(H.units.bytes[I[O]],{fileSize:y})};q.formatImperialArea=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveImperialAreaUnit(y,O);return B(H,w.convertUnit(y,O,S),S,U,P)};q.formatImperialLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveImperialLengthUnit(y,O);return B(H,w.convertUnit(y,
O,S),S,U,P)};q.formatImperialRelativeLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveImperialLengthUnit(y,O);return R(H,w.convertUnit(y,O,S),S,U,P)};q.formatImperialRelativeVerticalLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveImperialVerticalLengthUnit(y,O);return R(H,w.convertUnit(y,O,S),S,U,P)};q.formatImperialVerticalLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveImperialVerticalLengthUnit(y,O);return B(H,w.convertUnit(y,O,S),S,U,P)};q.formatMetricArea=function(H,y,O,U=2,
P="abbr"){const S=w.adaptiveMetricAreaUnit(y,O);return B(H,w.convertUnit(y,O,S),S,U,P)};q.formatMetricLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveMetricLengthUnit(y,O);return B(H,w.convertUnit(y,O,S),S,U,P)};q.formatMetricRelativeLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveMetricLengthUnit(y,O);return R(H,w.convertUnit(y,O,S),S,U,P)};q.formatMetricRelativeVerticalLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveMetricVerticalLengthUnit(y,O);return R(H,w.convertUnit(y,O,S),
S,U,P)};q.formatMetricVerticalLength=function(H,y,O,U=2,P="abbr"){const S=w.adaptiveMetricVerticalLengthUnit(y,O);return B(H,w.convertUnit(y,O,S),S,U,P)};q.formatRelativeAngleDegrees=function(H,y,O,U,P){O!==U&&(H=-H);P=P??2;O={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:P,minimumFractionDigits:P,signDisplay:"exceptZero"};H=w.convertUnit(H,y,"degrees")%360;H=F(H,O);return L.formatNumber(H,O)};q.formatRelativeDecimal=R;q.unitName=W;Object.defineProperty(q,Symbol.toStringTag,
{value:"Module"})})},"esri/core/ByteSizeUnit":function(){define(["exports"],function(q){q.ByteSizeUnit=void 0;var u=q.ByteSizeUnit||(q.ByteSizeUnit={});u[u.KILOBYTES=1024]="KILOBYTES";u[u.MEGABYTES=1048576]="MEGABYTES";u[u.GIGABYTES=1073741824]="GIGABYTES";Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/AttachmentsViewModel":function(){define("../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/Collection ../../core/Error ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ../../rest/query/support/AttachmentInfo ../../rest/support/AttachmentQuery ../Feature/support/featureUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I){const H={editing:!1,operations:{add:!0,update:!0,delete:!0}},y=A.ofType(F);v=class extends v{constructor(O){super(O);this._attachmentLayer=this._getAttachmentsPromise=null;this.capabilities={...H};this.activeFileInfo=this.activeAttachmentInfo=null;this.attachmentInfos=new y;this.fileInfos=new A;this.graphic=null;this.mode="view";this.filesEnabled=!1;this.addHandles(Q.watch(()=>this.graphic,()=>this._graphicChanged(),Q.initial))}destroy(){this.graphic=this._attachmentLayer=
null}castCapabilities(O){return{...H,...O}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){var {graphic:O}=this;if(!O)return!1;O=O.layer||O.sourceLayer;return O?.loaded&&"capabilities"in O&&O.capabilities&&"operations"in O.capabilities&&"supportsResizeAttachments"in O.capabilities.operations&&O.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const {_attachmentLayer:O,attachmentInfos:U}=this;if(!O||
"function"!==typeof O.queryAttachments)throw new z("invalid-layer","getAttachments(): A valid layer is required.");const P=this._getObjectId();var S=new E({objectIds:[P],returnMetadata:!0});const Z=[];this._getAttachmentsPromise=S=O.queryAttachments(S).then(aa=>aa[P]||Z).catch(()=>Z);this.notifyChange("state");S=await S;U.removeAll();S.length&&U.addMany(S);this._getAttachmentsPromise=null;this.notifyChange("state");return S}async addAttachment(O,U=this.graphic){const {_attachmentLayer:P,attachmentInfos:S,
capabilities:Z}=this;if(!U)throw new z("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:U});if(!O)throw new z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:O});if(!Z.operations?.add)throw new z("invalid-capabilities","addAttachment(): add capabilities are required.");if(!P||"function"!==typeof P.addAttachment)throw new z("invalid-layer","addAttachment(): A valid layer is required.");O=await P.addAttachment(U,O).then(aa=>this._queryAttachment(aa.objectId,
U));S.add(O);return O}async deleteAttachment(O){const {_attachmentLayer:U,attachmentInfos:P,graphic:S,capabilities:Z}=this;if(!O)throw new z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:O});if(!Z.operations?.delete)throw new z("invalid-capabilities","deleteAttachment(): delete capabilities are required.");if(!U||"function"!==typeof U.deleteAttachments)throw new z("invalid-layer","deleteAttachment(): A valid layer is required.");if(!S)throw new z("invalid-graphic",
"deleteAttachment(): A graphic is required.");const aa=await U.deleteAttachments(S,[O.id]).then(()=>O);P.remove(aa);return aa}async updateAttachment(O,U=this.activeAttachmentInfo){const {_attachmentLayer:P,attachmentInfos:S,graphic:Z,capabilities:aa}=this;if(!O)throw new z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:O});if(!U)throw new z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:U});if(!aa.operations?.update)throw new z("invalid-capabilities",
"updateAttachment(): Update capabilities are required.");const M=S.indexOf(U);if(!P||"function"!==typeof P.updateAttachment)throw new z("invalid-layer","updateAttachment(): A valid layer is required.");if(!Z)throw new z("invalid-graphic","updateAttachment(): A graphic is required.");O=await P.updateAttachment(Z,U.id,O).then(G=>this._queryAttachment(G.objectId));S.splice(M,1,O);return O}async commitFiles(){await Promise.all(this.fileInfos.items.map(O=>this.addAttachment(O.form)));this.fileInfos.removeAll();
return this.getAttachments()}addFile(O,U){if(!O||!U)return null;O={file:O,form:U};this.fileInfos.add(O);return O}updateFile(O,U,P=this.activeFileInfo){if(!O||!U||!P)return null;P=this.fileInfos.indexOf(P);-1<P&&this.fileInfos.splice(P,1,{file:O,form:U});return this.fileInfos.items[P]}deleteFile(O){const U=this.fileInfos.find(P=>P.file===O);return U?(this.fileInfos.remove(U),U):null}async _queryAttachment(O,U){const {_attachmentLayer:P}=this;if(!O||!P?.queryAttachments)throw new z("invalid-attachment-id",
"Could not query attachment.");const S=this._getObjectId(U);O=new E({objectIds:[S],attachmentsWhere:`AttachmentId=${O}`,returnMetadata:!0});return P.queryAttachments(O).then(Z=>Z[S][0])}_getObjectId(O=this.graphic){return O?.getObjectId()??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){var {graphic:O}=this;this._attachmentLayer=(O=I.getSourceLayer(O))?"scene"===O.type&&null!=O.associatedLayer?O.associatedLayer:O:null}};q.__decorate([w.property()],
v.prototype,"capabilities",void 0);q.__decorate([L.cast("capabilities")],v.prototype,"castCapabilities",null);q.__decorate([w.property()],v.prototype,"activeAttachmentInfo",void 0);q.__decorate([w.property()],v.prototype,"activeFileInfo",void 0);q.__decorate([w.property({readOnly:!0,type:y})],v.prototype,"attachmentInfos",void 0);q.__decorate([w.property()],v.prototype,"fileInfos",void 0);q.__decorate([w.property({type:u})],v.prototype,"graphic",void 0);q.__decorate([w.property()],v.prototype,"mode",
void 0);q.__decorate([w.property({readOnly:!0})],v.prototype,"state",null);q.__decorate([w.property()],v.prototype,"filesEnabled",void 0);q.__decorate([w.property({readOnly:!0})],v.prototype,"supportsResizeAttachments",null);return v=q.__decorate([R.subclass("esri.widgets.Attachments.AttachmentsViewModel")],v)})},"esri/rest/query/support/AttachmentInfo":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/RandomLCG ../../../core/has ../../../core/accessorSupport/decorators/subclass ../../../layers/support/exifUtils".split(" "),
function(q,u,v,A,z,Q,w,L){var W;const B={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};u=W=class extends u.JSONSupport{constructor(R){super(R);this.url=this.size=this.parentObjectId=this.parentGlobalId=this.name=this.keywords=this.globalId=this.id=this.exifInfo=this.contentType=null}get orientationInfo(){var {exifInfo:R}=
this;R=L.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:R});return B[R]||null}clone(){return new W({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};q.__decorate([v.property({type:String})],u.prototype,"contentType",void 0);q.__decorate([v.property()],u.prototype,"exifInfo",void 0);q.__decorate([v.property({readOnly:!0})],
u.prototype,"orientationInfo",null);q.__decorate([v.property({type:A.Integer})],u.prototype,"id",void 0);q.__decorate([v.property({type:String})],u.prototype,"globalId",void 0);q.__decorate([v.property({type:String})],u.prototype,"keywords",void 0);q.__decorate([v.property({type:String})],u.prototype,"name",void 0);q.__decorate([v.property({json:{read:!1}})],u.prototype,"parentGlobalId",void 0);q.__decorate([v.property({json:{read:!1}})],u.prototype,"parentObjectId",void 0);q.__decorate([v.property({type:A.Integer})],
u.prototype,"size",void 0);q.__decorate([v.property({json:{read:!1}})],u.prototype,"url",void 0);return u=W=q.__decorate([w.subclass("esri.layers.support.AttachmentInfo")],u)})},"esri/layers/support/exifUtils":function(){define(["exports"],function(q){function u(v){const {tagName:A,tags:z}=v;return z&&A?z.find(Q=>Q.name===A)?.value||null:null}q.getExifValue=function(v){const {exifInfo:A,exifName:z,tagName:Q}=v;return A&&z&&Q?(v=A.find(w=>w.name===z))?u({tagName:Q,tags:v.tags}):null:null};Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Feature/support/featureUtils":function(){define("exports ../../../core/Logger ../../../core/string ../../../intl/date ../../../intl/number ../../../layers/support/fieldUtils ../../../layers/support/layerUtils ../../../smartMapping/support/utils ../../../support/arcadeOnDemand ../../../time/timeZoneUtils".split(" "),function(q,u,v,A,z,Q,w,L,W,B){function R(na){return na?va.test(na):!1}function F(na,sa){if(R(sa)&&na){var ra=sa.replace(va,"").toLowerCase();
return na.find(({name:Aa})=>Aa.toLowerCase()===ra)}}function E(na,sa){return(sa=I(sa,na))?sa.name:na}function I(na,sa){return na&&"function"===typeof na.getField&&sa?na.getField(sa)??null:null}function H({formattedAttributes:na,template:sa,fieldInfoMap:ra}){return`${v.replace(v.replace(sa,Aa=>`{${ra.get(Aa.toLowerCase())?.fieldName||Aa}}`),na).replaceAll(Y,"")}`.trim()}function y(na,sa,ra=!1){const Aa=sa[na];"string"===typeof Aa&&(ra=(ra?encodeURIComponent(Aa):Aa).replaceAll(pa,"%27"),sa[na]=ra)}
function O(na,sa=!1){const ra={...na};Object.keys(ra).forEach(Aa=>y(Aa,ra,sa));return ra}function U(na,sa){return na.replaceAll(fa,(ra,Aa,Fa)=>(ra=I(sa,Fa))?`{${ra.name}}`:Aa)}function P(na,sa,ra){return(na=U(na,ra))?na.replaceAll(Da,(Aa,Fa,Ia)=>{Fa=`${Fa||Ia}`.trim();return v.replace(Aa,O(sa,Fa&&"{"!==Fa[0]||!1))}):na}function S(na){return null!=na&&"object"===typeof na&&"fieldsIndex"in na&&"geometryType"in na&&"getField"in na&&"load"in na&&"loaded"in na&&"objectIdField"in na&&"spatialReference"in
na&&"type"in na&&("feature"===na.type||"scene"===na.type)&&"when"in na}function Z(na){return null!=na&&"object"===typeof na&&"createQuery"in na&&"queryFeatureCount"in na&&"queryObjectIds"in na&&"queryRelatedFeatures"in na&&"queryRelatedFeaturesCount"in na&&"relationships"in na}function aa(na){return S(na)&&Z(na)}function M(na,sa){const {fieldInfos:ra,fieldName:Aa,preventPlacesFormatting:Fa,layer:Ia,timeZone:la}=sa;sa=X(ra,Aa);var qa=I(Ia,Aa);if(sa&&!Q.isRasterPixelValueField(Aa)){qa=qa?.type;const ja=
sa.format?.dateFormat;if("date"===qa||"date-only"===qa||"time-only"===qa||"timestamp-offset"===qa||ja)return L.formatAnyDate(na,{format:ja,fieldType:qa,timeZoneOptions:{layerTimeZone:Ia&&"preferredTimeZone"in Ia?Ia.preferredTimeZone:null,viewTimeZone:la,datesInUnknownTimezone:Ia&&"datesInUnknownTimezone"in Ia?!!Ia.datesInUnknownTimezone:!1}})}sa=sa?.format;if("string"===typeof na&&Q.isRasterPixelValueField(Aa)&&sa)return na=na.trim(),/\d{2}-\d{2}/.test(na)?na:na.includes(",")?G(na,",",", ",sa):na.includes(";")?
G(na,";","; ",sa):na.includes(" ")?G(na," "," ",sa):z.formatNumber(Number(na),z.convertNumberFormatToIntlOptions(sa));"string"!==typeof na||!sa||null!=sa.dateFormat||null==sa.places&&null==sa.digitSeparator||(qa=Number(na),isNaN(qa)||(na=qa));return"string"===typeof na||null==na||null==sa?ia(na):Fa?z.formatNumber(na,{...z.convertNumberFormatToIntlOptions(sa),minimumFractionDigits:0,maximumFractionDigits:20}):z.formatNumber(na,z.convertNumberFormatToIntlOptions(sa))}function G(na,sa,ra,Aa){return na.trim().split(sa).map(Fa=>
z.formatNumber(Number(Fa),z.convertNumberFormatToIntlOptions(Aa))).join(ra)}function X(na,sa){if(na?.length&&sa)return na.find(ra=>ra.fieldName?.toLowerCase()===sa.toLowerCase())}function C({fieldName:na,graphic:sa,layer:ra}){if(J(na)||!ra||"function"!==typeof ra.getFeatureType)return null;const {typeIdField:Aa}=ra;return Aa&&na===Aa?(na=ra.getFeatureType(sa))?na.name:null:null}function V({fieldName:na,value:sa,graphic:ra,layer:Aa}){return J(na)||!Aa||"function"!==typeof Aa.getFieldDomain?null:(na=
ra&&Aa.getFieldDomain(na,{feature:ra}))&&"coded-value"===na.type?na.getName(sa):null}function ia(na){return"string"===typeof na?na.replaceAll(xa,'\x3cbr class\x3d"esri-text-new-line" /\x3e'):na}function oa(na){const {value:sa,fieldName:ra,fieldInfos:Aa,fieldInfoMap:Fa,layer:Ia,graphic:la,timeZone:qa}=na;return null==sa?"":(na=V({fieldName:ra,value:sa,graphic:la,layer:Ia}))||(na=C({fieldName:ra,graphic:la,layer:Ia}))?na:Fa.get(ra.toLowerCase())?M(sa,{fieldInfos:Aa||Array.from(Fa.values()),fieldName:ra,
layer:Ia,timeZone:qa}):(na=Ia?.fieldsIndex?.get(ra))&&(L.isAnyDateField(na)||Q.isTimeOnlyField(na))?L.formatAnyDate(sa,{fieldType:na.type,timeZoneOptions:{layerTimeZone:Ia&&"preferredTimeZone"in Ia?Ia.preferredTimeZone:null,viewTimeZone:qa,datesInUnknownTimezone:Ia&&"datesInUnknownTimezone"in Ia?!!Ia.datesInUnknownTimezone:!1}}):ia(sa)}async function ma(na,sa){const {layer:ra,graphic:Aa,outFields:Fa,objectIds:Ia,returnGeometry:la,spatialReference:qa}=na;na=Ia[0];if("number"!==typeof na&&"string"!==
typeof na)return sa={layer:ra,graphic:Aa,objectId:na,requiredFields:Fa},u.getLogger("esri.widgets.Feature.support.featureUtils").warn("Could not query required fields for the specified feature. The feature's ID is invalid.",sa),null;if(!w.getEffectiveLayerCapabilities(ra)?.operations?.supportsQuery)return sa={layer:ra,graphic:Aa,requiredFields:Fa,returnGeometry:la},u.getLogger("esri.widgets.Feature.support.featureUtils").warn("The specified layer cannot be queried. The following fields will not be available.",
sa),null;na=ra.createQuery();na.objectIds=Ia;na.outFields=Fa?.length?Fa:[ra.objectIdField];na.returnGeometry=!!la;na.returnZ=!!la;na.returnM=!!la;na.outSpatialReference=qa;return(await ra.queryFeatures(na,sa)).features[0]}async function D(na){if(!na.expressionInfos?.length)return!1;var sa=await W.loadArcade();({arcadeUtils:{hasGeometryFunctions:sa}}=sa);return sa(na)}function J(na=""){return na?na.includes("relationships/"):!1}function ea({attributes:na,graphic:sa,relatedInfo:ra,fieldInfos:Aa,fieldInfoMap:Fa,
layer:Ia,timeZone:la}){na&&sa&&ra&&Object.keys(sa.attributes).forEach(qa=>{var ja=(ja={layerId:ra.relation.id.toString(),fieldName:qa},`${"relationships/"}${ja.layerId}/${ja.fieldName}`);na[ja]=oa({fieldName:ja,fieldInfos:Aa,fieldInfoMap:Fa,layer:Ia,value:sa.attributes[qa],graphic:sa,timeZone:la})})}function ba({attributes:na,relatedInfo:sa,fieldInfoMap:ra,fieldInfos:Aa,layer:Fa,timeZone:Ia}){na&&sa&&(sa.relatedFeatures?.forEach(la=>ea({attributes:na,graphic:la,relatedInfo:sa,fieldInfoMap:ra,fieldInfos:Aa,
layer:Fa,timeZone:Ia})),sa.relatedStatsFeatures?.forEach(la=>ea({attributes:na,graphic:la,relatedInfo:sa,fieldInfoMap:ra,fieldInfos:Aa,layer:Fa,timeZone:Ia})))}function T(na,sa,{relatedTableId:ra}){const Aa="scene"===sa.type&&sa.associatedLayer?sa.associatedLayer.url:sa.url;return na.filter(aa).find(Fa=>Fa!==sa&&Fa.url===Aa&&Fa.layerId===ra)}const Y=/href=(""|'')/gi,fa=/(\{([^\{\r\n]+)\})/g,pa=/'/g,va=/^\s*expression\//i,xa=/(\n)/gi,ya=/[\u00A0-\u9999<>&]/gim,Da=/href\s*=\s*(?:"([^"]+)"|'([^']+)')/gi,
Ca=/^(?:mailto:|tel:)/,Ka=A.convertDateFormatToIntlOptions("short-date-short-time"),Oa=na=>{if(!na)return!1;na=na.toUpperCase();return na.includes("CURRENT_TIMESTAMP")||na.includes("CURRENT_DATE")||na.includes("CURRENT_TIME")},Ba=({layer:na,method:sa,query:ra,definitionExpression:Aa})=>{na.capabilities?.query?.supportsCacheHint&&"attachments"!==sa&&(na=null!=ra.where?ra.where:null,sa=null!=ra.geometry?ra.geometry:null,Oa(Aa)||Oa(na)||"extent"===sa?.type||"tile"===ra.resultType||(ra.cacheHint=!0))};
q.applyTextFormattingHTML=ia;q.createFieldInfoMap=function(na,sa){const ra=new Map;if(!na)return ra;na.forEach(Aa=>{const Fa=E(Aa.fieldName,sa);Aa.fieldName=Fa;ra.set(Fa.toLowerCase(),Aa)});return ra};q.findRelatedLayer=function(na,sa,ra){return na&&sa&&ra?T(na.allLayers,sa,ra)||T(na.allTables,sa,ra):null};q.fixTokens=U;q.formatAttributes=function({fieldInfos:na,attributes:sa,layer:ra,graphic:Aa,fieldInfoMap:Fa,relatedInfos:Ia,timeZone:la}){const qa={};Ia?.forEach(ja=>ba({attributes:qa,relatedInfo:ja,
fieldInfoMap:Fa,fieldInfos:na,layer:ra,timeZone:la}));sa&&Object.keys(sa).forEach(ja=>{qa[ja]=oa({fieldName:ja,fieldInfos:na,fieldInfoMap:Fa,layer:ra,value:sa[ja],graphic:Aa,timeZone:la})});return qa};q.formatEditInfo=function(na,sa,ra,Aa){const {creatorField:Fa,creationDateField:Ia,editorField:la,editDateField:qa}=na;if(sa){na=B.getTimeZoneFormattingOptions(Aa&&"preferredTimeZone"in Aa?Aa.preferredTimeZone:null,Aa&&"datesInUnknownTimezone"in Aa?!!Aa.datesInUnknownTimezone:!1,ra,Ka,"date");na={...Ka,
...na};ra=sa[qa];if("number"===typeof ra)return sa=sa[la],{type:"edit",date:A.formatDate(ra,na),user:sa};ra=sa[Ia];return"number"===typeof ra?(sa=sa[Fa],{type:"create",date:A.formatDate(ra,na),user:sa}):null}};q.formatValueToFieldInfo=M;q.getAllFieldInfos=function(na){const sa=[];if(!na)return sa;const {fieldInfos:ra,content:Aa}=na;ra&&sa.push(...ra);if(!Aa||!Array.isArray(Aa))return sa;Aa.forEach(Fa=>{"fields"===Fa.type&&(Fa=Fa?.fieldInfos)&&sa.push(...Fa)});return sa};q.getFieldInfo=X;q.getFieldInfoLabel=
function(na,sa){return(sa=F(sa,na?.fieldName))?sa.title||null:na?na.label||na.fieldName:null};q.getFixedFieldName=E;q.getFixedFieldNames=function(na,sa){return na&&na.map(ra=>E(ra,sa))};q.getHighlightKeyForFeature=function(na){const sa=na.getObjectId();return null!=sa?`oid:${sa}`:`uid:${na.uid}`};q.getSourceLayer=function(na){if(null!=na)return(na.sourceLayer||na.layer)??void 0};q.graphicCallback=async function(na,sa){return"function"===typeof na?na(sa):na};q.htmlEntities=function(na){return na.replaceAll(ya,
sa=>`&#${sa.charCodeAt(0)};`)};q.isExpressionField=R;q.isFeatureSupportedLayer=S;q.isGraphicForRelatableFeatureSupportedLayer=function(na){return!!na&&"object"===typeof na&&"sourceLayer"in na&&aa(na.sourceLayer)};q.isRelatableFeatureSupportedLayer=aa;q.isRelatableLayer=Z;q.isRelatedField=J;q.preLayerQueryCallback=({query:na,layer:sa,method:ra})=>{Ba({layer:sa,method:ra,query:na,definitionExpression:`${sa.definitionExpression} ${sa.serviceDefinitionExpression}`})};q.preRequestCallback=({queryPayload:na,
layer:sa,method:ra})=>{Ba({layer:sa,method:ra,query:na,definitionExpression:`${sa.definitionExpression} ${sa.serviceDefinitionExpression}`})};q.querySourceLayer=ma;q.queryUpdatedFeature=async function({graphic:na,popupTemplate:sa,layer:ra,spatialReference:Aa},Fa){if(ra&&sa&&("function"===typeof ra.load&&await ra.load(Fa),na.attributes)){var Ia=na.attributes[ra.objectIdField];if(null!=Ia){Ia=[Ia];var la=await sa.getRequiredFields(ra.fieldsIndex),qa=Q.featureHasFields(la,na);la=qa?[]:la;sa=sa.returnGeometry||
await D(sa);if(!qa||sa)if(ra=await ma({layer:ra,graphic:na,outFields:la,objectIds:Ia,returnGeometry:sa,spatialReference:Aa},Fa))ra.geometry&&(na.geometry=ra.geometry),ra.attributes&&(na.attributes={...na.attributes,...ra.attributes})}}};q.shouldOpenInNewTab=function(na=""){if(na)return!Ca.test(na.trim().toLowerCase())};q.substituteAttributes=H;q.substituteFieldsInLinksAndAttributes=function({attributes:na,globalAttributes:sa,layer:ra,text:Aa,expressionAttributes:Fa,fieldInfoMap:Ia}){return Aa?H({formattedAttributes:sa,
template:P(Aa,{...sa,...Fa,...na},ra),fieldInfoMap:Ia}):""};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/smartMapping/support/utils":function(){define("exports ../../intl/date ../../layers/support/fieldUtils ../../support/arcadeOnDemand ../../support/basemapUtils ../../time/timeZoneUtils".split(" "),function(q,u,v,A,z,Q){function w(I){return String(I).padStart(2,"0")}function L(I,H,y){if("date"===H||"number"===H){"number"===H&&(I=new Date(I));H=y?I.getFullYear():I.getUTCFullYear();
const O=w((y?I.getMonth():I.getUTCMonth())+1),U=w(y?I.getDate():I.getUTCDate()),P=w(y?I.getHours():I.getUTCHours()),S=w(y?I.getMinutes():I.getUTCMinutes());I=w(y?I.getSeconds():I.getUTCSeconds());I=`TIMESTAMP'${H}-${O}-${U} ${P}:${S}:${I}'`}return I}function W(I,H){if(H instanceof Date)return"date";if("number"===typeof H)return"number";if("string"===typeof H&&(I=I.getField(H),"\x3cnow\x3e"!==H.toLowerCase()&&v.isDateField(I)))return"field"}const B={light:"streets gray topo terrain oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector topo-3d navigation-3d streets-3d osm-3d gray-3d arcgis-light-gray arcgis-navigation arcgis-streets arcgis-streets-relief arcgis-topographic arcgis-oceans osm-standard osm-standard-relief osm-streets osm-streets-relief osm-light-gray arcgis-terrain arcgis-charted-territory arcgis-community arcgis-colored-pencil arcgis-modern-antique arcgis-midcentury arcgis-newspaper arcgis-hillshade-light".split(" "),
dark:"satellite hybrid dark-gray dark-gray-vector streets-night-vector navigation-dark-3d streets-dark-3d dark-gray-3d arcgis-imagery arcgis-imagery-standard arcgis-dark-gray arcgis-navigation-night arcgis-streets-night osm-dark-gray arcgis-nova arcgis-hillshade-dark".split(" ")},R={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},F=new Set(["integer","small-integer"]);let E=null;q.castIntegerFieldToFloat=function(I){return`cast(${I} as float)`};q.dateTypes=
["date","date-only","timestamp-offset"];q.defaultBasemapGroups=B;q.fieldDelimiter=",";q.formatAnyDate=function(I,H){const {format:y,timeZoneOptions:O,fieldType:U}=H??{};let P;O&&({timeZone:S,timeZoneName:P}=Q.getTimeZoneFormattingOptions(O.layerTimeZone,O.datesInUnknownTimezone,O.viewTimeZone,u.convertDateFormatToIntlOptions(y||"short-date-short-time"),U));if("string"===typeof I&&isNaN(Date.parse("time-only"===U?`1970-01-01T${I}Z`:I)))return I;switch(U){case "date-only":var S=u.convertDateFormatToIntlOptions(y||
"short-date");return"string"===typeof I?u.formatDateOnly(I,{...S}):u.formatDate(I,{...S,timeZone:Q.utc});case "time-only":return S=u.convertDateFormatToIntlOptions(y||"short-time"),"string"===typeof I?u.formatTimeOnly(I,S):u.formatDate(I,{...S,timeZone:Q.utc});case "timestamp-offset":if(!S&&"string"===typeof I&&(new Date(I)).toISOString()!==I)return I;S=(H=y||O?u.convertDateFormatToIntlOptions(y||"short-date-short-time"):void 0)?{...H,timeZone:S,timeZoneName:P}:void 0;return"string"===typeof I?u.formatTimestamp(I,
S):u.formatDate(I,S);default:return H=y||O?u.convertDateFormatToIntlOptions(y||"short-date-short-time"):void 0,u.formatDate("string"===typeof I?new Date(I):I,H?{...H,timeZone:S,timeZoneName:P}:void 0)}};q.getBasemapGroup=function(I,H=B){for(const y in H)if(H[y].includes(I))return y};q.getBasemapId=function(I,H,y=!0){let O=null;I&&("string"===typeof I?H.includes(I)&&(O=I):O=z.getWellKnownBasemapId(I));return y?O||"gray":O};q.getDateDiffSQL=function(I,H,y,O){const {hasQueryEngine:U}=I;y=L(y,W(I,y),
U);I=L(H,W(I,H),U);I=`(${y} - ${I})`;O=R[O];H="/";1>O&&(O=1/O,H="*");return{sqlExpression:1===O?I:`(${I} ${H} ${O})`,sqlWhere:null}};q.getDateType=W;q.getFieldsList=async function(I){const {field:H,field2:y,field3:O,normalizationField:U,valueExpression:P}=I;I=[];P&&(E||({arcadeUtils:I}=await A.loadArcade(),E=I),I=E.extractFieldNames(P));H&&I.push(H);y&&I.push(y);O&&I.push(O);U&&I.push(U);return I};q.getNormalizationType=function(I){let H=I.normalizationType;H||(I.normalizationField?H="field":null!=
I.normalizationTotal&&(H="percent-of-total"));return H??void 0};q.isAnyDateField=function(I){return v.isDateField(I)||v.isDateOnlyField(I)||v.isTimestampOffsetField(I)};q.isIntegerField=function(I,H){I=H&&I.getField(H);return!!I&&F.has(I.type)};q.unitValueInDays=R;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Attachments/support/attachmentUtils":function(){define(["exports","../../../assets"],function(q,u){q.getIconPath=function(v){const A=u.getAssetUrl("esri/themes/base/images/files/");
return v?"text/plain"===v?`${A}text-32.svg`:"application/pdf"===v?`${A}pdf-32.svg`:"text/csv"===v?`${A}csv-32.svg`:"application/gpx+xml"===v?`${A}gpx-32.svg`:"application/x-dwf"===v?`${A}cad-32.svg`:"application/postscript"===v||"application/json"===v||"text/xml"===v||"model/vrml"===v?`${A}code-32.svg`:"application/x-zip-compressed"===v||"application/x-7z-compressed"===v||"application/x-gzip"===v||"application/x-tar"===v||"application/x-gtar"===v||"application/x-bzip2"===v||"application/gzip"===v||
"application/x-compress"===v||"application/x-apple-diskimage"===v||"application/x-rar-compressed"===v||"application/zip"===v?`${A}zip-32.svg`:v.includes("image/")?`${A}image-32.svg`:v.includes("audio/")?`${A}sound-32.svg`:v.includes("video/")?`${A}video-32.svg`:v.includes("msexcel")||v.includes("ms-excel")||v.includes("spreadsheetml")?`${A}excel-32.svg`:v.includes("msword")||v.includes("ms-word")||v.includes("wordprocessingml")?`${A}word-32.svg`:v.includes("powerpoint")||v.includes("presentationml")?
`${A}report-32.svg`:`${A}generic-32.svg`:`${A}generic-32.svg`};q.isSupportedImage=function(v){v=v.toLowerCase();return"image/bmp"===v||"image/emf"===v||"image/exif"===v||"image/gif"===v||"image/x-icon"===v||"image/jpeg"===v||"image/png"===v||"image/tiff"===v||"image/x-wmf"===v};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/globalCss":function(){define(["exports"],function(q){q.globalCss={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",
button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",
loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",
rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureForm":function(){define("require ../chunks/tslib.es6 ../intl ../core/arrayUtils ../core/deprecate ../core/Logger ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/accessorSupport/decorators/subclass ../layers/support/fieldUtils ./Widget ./FeatureForm/css ./FeatureForm/featureFormUtils ./FeatureForm/FeatureFormViewModel ../chunks/componentsUtils ./support/dataUtils ./support/dateUtils ./support/globalCss ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G,X){v=class extends F{constructor(C,V){super(C,V);this._attemptFocusOnNextRender=!1;this._dateComponentMap=new Map;this._inputsWithChanges=new Set;this._listObserverNode=this._focusedFieldName=null;this._listObserver=new IntersectionObserver(ia=>{ia.length&&ia[0].isIntersecting&&this._incrementRelatedRecordPage()},{root:window.document});this.groupDisplay="all";this.headingLevel=2;this.messagesTemplates=this.messagesFeature=this.messagesCommon=
this.messages=null;this.viewModel=new H;this._onShowAllRelatedRecordsClick=ia=>{const {feature:oa,relatedRecordCallbacks:ma}=this;oa&&ma?.showAllRelatedRecords&&ma.showAllRelatedRecords({parentFeature:oa,relationshipId:ia})};this._onAddRelatedRecordsClick=(ia,oa)=>{const {feature:ma,relatedRecordCallbacks:D}=this;ma&&D?.addRelatedRecord&&D.addRelatedRecord({parentFeature:ma,relatedLayer:oa,relationshipId:ia})};this._onFormKeyDown=this._onFormKeyDown.bind(this);this._onFormSubmit=this._onFormSubmit.bind(this);
this._onGroupToggle=this._onGroupToggle.bind(this);this._onComponentBlur=this._onComponentBlur.bind(this);this._onComponentFocus=this._onComponentFocus.bind(this);this._onComponentKeyDown=this._onComponentKeyDown.bind(this);this._afterComponentCreate=this._afterComponentCreate.bind(this);this._afterComponentCreateOrUpdate=this._afterComponentCreateOrUpdate.bind(this);this._afterDateComponentCreate=this._afterDateComponentCreate.bind(this);this._afterDateComponentCreateOrUpdate=this._afterDateComponentCreateOrUpdate.bind(this);
this._afterRadioGroupCreateOrUpdate=this._afterRadioGroupCreateOrUpdate.bind(this)}initialize(){this.addHandles([w.watch(()=>this.feature,()=>{w.whenOnce(()=>!this.viewModel.updating).then(()=>{const C=this._getFocusableInput("forward");this._inputsWithChanges.clear();this._dateComponentMap.clear();this._syncGroupInputStates();this._focusedFieldName=C?.name||null;this._attemptFocusOnNextRender=!0})}),w.watch(()=>this.groupDisplay,()=>this._syncGroupInputStates()),this.on("submit",C=>{if(0<C.invalid.length){const [V]=
C.invalid;C.invalid.forEach(ia=>this._inputsWithChanges.add(ia));this._focusedFieldName=V;this._attemptFocusOnNextRender=!0;this.scheduleRender()}}),w.watch(()=>[this.viewModel.activeRelationshipInput,this._listObserverNode],()=>this._onObserverChange())])}loadDependencies(){return y.loadCalciteComponents({block:()=>new Promise((C,V)=>q(["../chunks/calcite-block"],C,V)),button:()=>new Promise((C,V)=>q(["../chunks/calcite-button"],C,V)),combobox:()=>new Promise((C,V)=>q(["../chunks/calcite-combobox"],
C,V)),"combobox-item":()=>new Promise((C,V)=>q(["../chunks/calcite-combobox-item"],C,V)),"combobox-item-group":()=>new Promise((C,V)=>q(["../chunks/calcite-combobox-item-group"],C,V)),icon:()=>new Promise((C,V)=>q(["../chunks/calcite-icon"],C,V)),input:()=>new Promise((C,V)=>q(["../chunks/calcite-input"],C,V)),"input-date-picker":()=>new Promise((C,V)=>q(["../chunks/calcite-input-date-picker"],C,V)),"input-message":()=>new Promise((C,V)=>q(["../chunks/calcite-input-message"],C,V)),"input-number":()=>
new Promise((C,V)=>q(["../chunks/calcite-input-number"],C,V)),"input-time-picker":()=>new Promise((C,V)=>q(["../chunks/calcite-input-time-picker"],C,V)),"input-time-zone":()=>new Promise((C,V)=>q(["../chunks/calcite-input-time-zone"],C,V)),label:()=>new Promise((C,V)=>q(["../chunks/calcite-label"],C,V)),list:()=>new Promise((C,V)=>q(["../chunks/calcite-list"],C,V)),"list-item":()=>new Promise((C,V)=>q(["../chunks/calcite-list-item"],C,V)),loader:()=>new Promise((C,V)=>q(["../chunks/calcite-loader"],
C,V)),notice:()=>new Promise((C,V)=>q(["../chunks/calcite-notice"],C,V)),"radio-button":()=>new Promise((C,V)=>q(["../chunks/calcite-radio-button"],C,V)),"radio-button-group":()=>new Promise((C,V)=>q(["../chunks/calcite-radio-button-group"],C,V)),switch:()=>new Promise((C,V)=>q(["../chunks/calcite-switch"],C,V)),"text-area":()=>new Promise((C,V)=>q(["../chunks/calcite-text-area"],C,V))})}destroy(){this._listObserverNode&&this._listObserver.unobserve(this._listObserverNode)}get _relatedRecordsEnabled(){const C=
this.relatedRecordCallbacks;return!(!C||!(C.addRelatedRecord||C.editRelatedRecord||C.showAllRelatedRecords))}get disabled(){return this.viewModel.disabled}set disabled(C){this.viewModel.disabled=C}get feature(){return this.viewModel.feature}set feature(C){this.viewModel.feature=C}get formTemplate(){return this.viewModel.formTemplate}set formTemplate(C){this.viewModel.formTemplate=C}get label(){return this.messages?.widgetLabel??""}set label(C){this._overrideIfSome("label",C)}get layer(){return this.viewModel.layer}set layer(C){this.viewModel.layer=
C}get map(){return this.viewModel.map}set map(C){this.viewModel.map=C}get relatedRecordCallbacks(){return this.viewModel.relatedRecordCallbacks}set relatedRecordCallbacks(C){this.viewModel.relatedRecordCallbacks=C}get relationshipId(){return this.viewModel.relationshipId}set relationshipId(C){this.viewModel.relationshipId=C}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(C){this.viewModel.spatialReference=C}get strict(){return this.viewModel.strict}set strict(C){this.viewModel.strict=
C}get timeZone(){return this.viewModel.timeZone}set timeZone(C){this.viewModel.timeZone=C}get view(){z.deprecatedProperty(Q.getLogger(this),"view",{replacement:"Use FeatureForm.map instead.",version:"4.27"});return this.viewModel.view}set view(C){z.deprecatedProperty(Q.getLogger(this),"view",{replacement:"Use FeatureForm.map instead.",version:"4.27"});this.viewModel.view=C}getValues(){return this.viewModel.getValues()}submit(){return this.viewModel.submit()}render(){const {state:C}=this.viewModel;
return G.tsx("div",{class:this.classes(E.css.base,P.globalCss.widget,P.globalCss.panel)},"ready"===C?this._renderForm():null)}_renderForm(){return G.tsx("form",{class:E.css.form,novalidate:!0,onkeydown:this._onFormKeyDown,onsubmit:this._onFormSubmit},this._renderHeader(),this._renderContent())}_renderHeader(){var C=this.viewModel;if(C.formHeaderVisible){var V=null!=C.formTitle&&G.tsx(S.Heading,{key:"title",level:this.headingLevel},C.formTitle);C=null!=C.formDescription&&G.tsx("p",{class:E.css.description,
key:"description"},C.formDescription);return G.tsx("div",{class:E.css.formHeader},V,C)}}_renderContent(){const {viewModel:C}=this;return C.activeRelationshipInput?this._renderActiveRelationshipInput(C.activeRelationshipInput):C.inputs.filter(A.isSome).filter(V=>V.visible).map((V,ia)=>{if(I.isGroupInput(V))return this._renderGroup(V,ia);if(I.isFieldInput(V))return this._renderLabeledField(V);if(I.isRelationshipInput(V))return this._renderRelationshipInput(V)})}_renderActiveRelationshipInput(C){return this._renderRelationshipInput(C)}_renderDescriptionOrEmpty(C,
V){return null==C?null:G.tsx("div",{class:this.classes(E.css.description),id:V},C)}_renderGroup(C,V){const {disabled:ia,formTemplate:oa,headingLevel:ma}=this,{description:D,inputs:J,label:ea,open:ba}=C,T=J.filter(fa=>fa.visible),Y=this.viewModel.findField(this._focusedFieldName);V=`${this.id}_group_${V}`;return G.tsx("calcite-block",{class:this.classes(E.css.group,"sequential"===this.groupDisplay?E.css.groupSequential:null,Y?.group===C?E.css.groupActive:null,ia?E.css.inputDisabled:null),collapsible:!0,
"data-group":C,description:D||void 0,disabled:ia,heading:`${ea}`,headingLevel:oa?.title?S.incrementHeadingLevel(ma):ma,id:V,key:V,open:ba,onCalciteBlockToggle:({target:fa})=>this._onGroupToggle(fa,C)},T.map(fa=>{if(I.isFieldInput(fa))return this._renderLabeledField(fa);if(I.isRelationshipInput(fa))return this._renderRelationshipInput(fa)}))}_getFocusableInput(C,V){var ia=this.viewModel.allFieldInputs;ia="forward"===C?ia:ia.slice().reverse();!V||I.isRelationshipInput(V)?C=0:I.isGroupInput(V)?C=(C=
V.inputs.find(I.isFieldInput))?ia.indexOf(C):0:(I.isInputInGroupInput(V)&&!V.group.open?(V=V.group.inputs.filter(I.isFieldInput),C="forward"===C?V[V.length-1]:V[0]):C=V,C=ia.indexOf(C)+1);for(;C<ia.length;C++)if(V=ia[C],V.visible&&I.isFieldInput(V))return V;return null}_renderLabeledField(C){const {dataType:V,feature:ia,label:oa,layer:ma,required:D}=C,J={"aria-label":D?X.substitute(this.messages.requiredFieldLabel,{name:oa}):oa,class:E.css.label,key:`${ma.id}-${ia.uid}-${C.name}`},ea=[G.tsx("div",
{class:E.css.labelTextContent,key:"labelTextContainer"},oa,D?G.tsx("span",{"aria-hidden":"true",title:this.messagesCommon.required},"*"):void 0),"unsupported"!==V?this._renderFieldInput(C):this._renderReadOnlyComponent(C),this._renderAuxiliaryText(C)];return"date"===V&&"coded-value"!==C.domain?.type?G.tsx("label",{...J},ea):G.tsx("calcite-label",{...J},ea)}_renderFieldInput(C){const {dataType:V,domain:ia,inputType:oa,name:ma}=C,D=this.getCommonInputProps(C);if("coded-value"===ia?.type){const J=this.viewModel.getFieldValueOptionsForField(ma,
this.messages.empty);return"switch"!==oa||C.hasInvalidSwitchValue?"radio-buttons"===oa?this._renderRadioButtonComponents(C,J.flat(),D):this._renderComboBoxComponent(C,J,D):this._renderSwitchComponent(C,D)}return"datetime-picker"===oa||"date"===V?this._renderDateComponents(C,D):"number"===V?this._renderNumberComponent(C,D):this._renderStringComponent(C,D)}_renderStringComponent(C,V){return"text-area"===C.inputType?V.readOnly?G.tsx("calcite-input",{...V,loading:C.updating,type:"textarea",onCalciteInputInput:ia=>
this._saveValueFromComponent(ia.target)}):G.tsx("calcite-text-area",{...V,resize:"vertical",onCalciteTextAreaInput:ia=>this._saveValueFromComponent(ia.target)}):G.tsx("calcite-input",{...V,loading:C.updating,type:"text",onCalciteInputInput:ia=>this._saveValueFromComponent(ia.target)})}_renderNumberComponent(C,V){return G.tsx("calcite-input-number",{...V,integer:R.isIntegerField(C.field),loading:C.updating,type:"number",onCalciteInputNumberInput:ia=>this._saveValueFromComponent(ia.target)})}_renderDateComponents(C,
V){const {field:ia}=C;switch(ia.type){case "date":return this._renderDateFieldComponents(C,V);case "date-only":return this._renderDateOnlyFieldComponent(C,V);case "time-only":return this._renderTimeOnlyFieldComponent(C,V);case "timestamp-offset":return this._renderTimestampOffsetFieldComponents(C,V);default:return this._renderReadOnlyComponent(C,U.getLabelForDateFieldValue(ia,V.value,{timeZone:this.timeZone,...U.getIntlOptionsForField(ia)}))}}_renderDateOnlyFieldComponent(C,V){const {range:ia,valid:oa,
value:ma}=C,{class:D,key:J,readOnly:ea}=V,{rawMax:ba,rawMin:T}=ia;return G.tsx("calcite-input-date-picker",{afterCreate:this._afterDateComponentCreate,afterUpdate:this._afterDateComponentCreateOrUpdate,"aria-invalid":!oa,class:D,"data-date-part":"date","data-field-name":V["data-field-name"],key:`${J}-date-input`,max:O.isString(ba)?ba:void 0,min:O.isString(T)?T:void 0,numberingSystem:U.numberingSystem,onblur:Y=>{this._focusedFieldName=null;this._saveValueFromDateComponent(Y.target)},onfocus:this._onComponentFocus,
overlayPositioning:"fixed",readOnly:ea,value:null!=ma?`${ma}`:void 0,onCalciteInputDatePickerChange:Y=>this._saveValueFromDateComponent(Y.target)})}_renderTimeOnlyFieldComponent(C,V){const {valid:ia,value:oa}=C,{class:ma,key:D,readOnly:J}=V;return G.tsx("calcite-input-time-picker",{afterCreate:this._afterDateComponentCreate,afterUpdate:this._afterDateComponentCreateOrUpdate,"aria-invalid":!ia,class:ma,"data-date-part":"time","data-field-name":V["data-field-name"],key:`${D}-time-input`,numberingSystem:U.numberingSystem,
onblur:ea=>{this._focusedFieldName=null;this._saveValueFromDateComponent(ea.target)},onfocus:this._onComponentFocus,overlayPositioning:"fixed",readOnly:J,step:C.timeStep,value:null!=oa?`${oa}`:void 0,onCalciteInputTimePickerChange:ea=>this._saveValueFromDateComponent(ea.target)})}_renderTimestampOffsetFieldComponents(C,V){const {name:ia,range:oa,valid:ma,value:D}=C,{class:J,key:ea,readOnly:ba}=V,{rawMax:T,rawMin:Y}=oa;V={afterCreate:this._afterDateComponentCreate,afterUpdate:this._afterDateComponentCreateOrUpdate,
"aria-invalid":!ma,numberingSystem:U.numberingSystem,overlayPositioning:"fixed",readOnly:ba,["data-field-name"]:ia,onfocus:this._onComponentFocus};const fa=U.prepareISOFieldValueForDateComponents(T),pa=U.prepareISOFieldValueForDateComponents(Y),va=U.prepareISOFieldValueForDateComponents(D);return G.tsx("div",{class:E.css.dateInputContainer,key:`${ea}-date-time-container`},G.tsx("calcite-input-date-picker",{...V,class:J,"data-date-part":"date",key:`${ea}-date-input`,max:fa?.date??void 0,min:pa?.date??
void 0,onblur:xa=>{this._focusedFieldName=null;this._saveValueFromDateComponent(xa.target)},value:va.date??void 0,onCalciteInputDatePickerChange:xa=>this._saveValueFromDateComponent(xa.target)}),G.tsx("calcite-input-time-picker",{...V,class:J,"data-date-part":"time",key:`${ea}-time-input`,onblur:xa=>{this._focusedFieldName=null;this._saveValueFromDateComponent(xa.target)},step:C.timeStep,value:va.time??void 0,onCalciteInputTimePickerChange:xa=>this._saveValueFromDateComponent(xa.target)}),C.includeTimeOffset?
G.tsx("calcite-input-time-zone",{...V,class:J,"data-date-part":"timeZone",disabled:ba,key:`${ea}-timezone-input`,onblur:xa=>{this._focusedFieldName=null;this._saveValueFromDateComponent(xa.target)},value:va.timeZoneOffset??"0",onCalciteInputTimeZoneChange:xa=>this._saveValueFromDateComponent(xa.target)}):null)}_renderDateFieldComponents(C,V){const {includeTime:ia,name:oa,valid:ma,value:D}=C,{class:J,key:ea,max:ba,min:T,readOnly:Y}=V;var {timeZone:fa}=this;C={afterCreate:this._afterDateComponentCreate,
afterUpdate:this._afterDateComponentCreateOrUpdate,"aria-invalid":!ma,numberingSystem:U.numberingSystem,overlayPositioning:"fixed",readOnly:Y,["data-field-name"]:oa,onfocus:this._onComponentFocus};V=U.prepareUnixFieldValueForDateComponents(D,fa);const pa=U.prepareUnixFieldValueForDateComponents(ba,fa);fa=U.prepareUnixFieldValueForDateComponents(T,fa);return G.tsx("div",{class:E.css.dateInputContainer,key:`${ea}-date-time-container`},G.tsx("calcite-input-date-picker",{...C,class:J,"data-date-part":"date",
key:`${ea}-date-input`,max:pa?.date??void 0,min:fa?.date??void 0,onblur:va=>{this._focusedFieldName=null;this._saveValueFromDateComponent(va.target)},value:V.date??void 0,onCalciteInputDatePickerChange:va=>this._saveValueFromDateComponent(va.target)}),ia?G.tsx("calcite-input-time-picker",{...C,class:J,"data-date-part":"time",key:`${ea}-time-input`,onblur:va=>{this._focusedFieldName=null;this._saveValueFromDateComponent(va.target)},step:1,value:V.time??void 0,onCalciteInputTimePickerChange:va=>this._saveValueFromDateComponent(va.target)}):
null)}_renderReadOnlyComponent(C,V){C=this.getCommonInputProps(C);return G.tsx("calcite-input",{...C,class:this.classes(E.css.fieldInput,E.css.inputDisabled),readOnly:!0,type:"text",value:null!=V?`${V}`:C.value})}_renderComboBoxComponent(C,V,ia){const {value:oa,name:ma}=C,{messages:D,messagesTemplates:J,viewModel:ea,_inputsWithChanges:ba}=this;V=V.map(xa=>xa.map(({name:ya,value:Da})=>G.tsx("calcite-combobox-item",{key:`#${Da}`,selected:oa===Da,textLabel:ya,value:`${Da}`})));const [T,Y]=V;this.viewModel.fieldsWithInvalidCodedValue.has(C)&&
Y.unshift(G.tsx("calcite-combobox-item",{key:"incompatible-option",readOnly:!0,textLabel:`${C.value}`,value:`${C.value}`}));V=0<Y.length?[G.tsx("calcite-combobox-item-group",{key:"recommended",label:D.recommended},T),G.tsx("calcite-combobox-item-group",{key:"other",label:J.other},Y)]:T;const fa="INSERT"===ea.arcadeEditType,pa=ba.has(ma),va=null==oa&&(!fa||pa);C.showNoValueOptionEnabled&&V.unshift(G.tsx("calcite-combobox-item",{key:"empty-option",selected:va,textLabel:D.empty,value:""},C.showNoValueLabel||
D.empty));return G.tsx("calcite-combobox",{...ia,allowCustomValues:!1,clearDisabled:!0,disabled:ia.readOnly,onblur:fa&&C.showNoValueOptionEnabled&&!pa?()=>{}:ia.onblur,overlayPositioning:"fixed",selectionMode:"single",onCalciteComboboxChange:({target:xa})=>{va&&0===xa.selectedItems.length?this._ignoreDeselectionOfNoValueOption(xa):this._saveValueFromComponent(xa)}},V)}_renderRadioButtonComponents(C,V,ia){const {name:oa,value:ma}=C;V=V.map(({name:D,value:J})=>this._renderRadioButtonComponent({key:D,
label:D,name:oa,value:J,selected:J===ma,props:ia}));C.showNoValueOptionEnabled&&V.unshift(this._renderRadioButtonComponent({key:"empty-option",label:C.showNoValueLabel||this.messages.empty,name:oa,value:"",selected:""===ma||null===ma,props:ia}));return G.tsx("calcite-radio-button-group",{afterCreate:this._afterRadioGroupCreateOrUpdate,afterUpdate:this._afterRadioGroupCreateOrUpdate,class:E.css.inputRadioGroup,"data-field-name":ia["data-field-name"],key:`${ia.key}-radio-group`,layout:"vertical",name:ia.key,
required:ia.required},V)}_renderSwitchComponent(C,V){const {value:ia}=C;C=I.isFieldElementWithInputType(C.element,"switch")?ia===C.element.input.onValue:!1;return G.tsx("calcite-switch",{...V,checked:C,class:E.css.inputSwitch,disabled:V.readOnly,onblur:()=>{this._focusedFieldName=null},onCalciteSwitchChange:oa=>this._saveValueFromComponent(oa.target)})}_renderRadioButtonComponent({key:C,name:V,value:ia,selected:oa,label:ma,props:D}){return G.tsx("calcite-label",{class:E.css.inputRadioLabel,key:C,
layout:"inline"},G.tsx("calcite-radio-button",{...D,afterCreate:void 0,afterUpdate:void 0,checked:oa,class:E.css.inputRadio,disabled:D.readOnly,name:V,onblur:()=>{this._focusedFieldName=null},value:ia,onCalciteRadioButtonChange:({target:J})=>{J.checked&&this._saveValueFromComponent(J)}}),ma)}_renderAuxiliaryText(C){var V=C.name;V=this._inputsWithChanges.has(V)&&!C.valid?I.getErrorMessageForFieldInput(C,this.messages,this.timeZone):null!=this.viewModel.contingencyConstraintViolations.get(V)?this.messages.validationErrors.valuesIncompatible:
null!=C.valueExpressionExecutor&&C.valueExpressionExecutor.stale?this.messages.valueExpressionError:null;return null!=V?G.tsx("calcite-input-message",{icon:!0,status:"invalid"},V):this._renderDescriptionOrEmpty(C.description)}_renderShowAllRelatedRecordsListItem(C){const {featureCount:V,relationshipId:ia,showAllActionVisible:oa}=C;({relatedRecordCallbacks:C}=this);if(oa&&C?.showAllRelatedRecords)return C=this.messages,G.tsx("calcite-list-item",{description:X.substitute(C.totalCount,{count:V}),label:C.showAll,
value:!0,onCalciteListItemSelect:()=>this._onShowAllRelatedRecordsClick(ia)},G.tsx("calcite-icon",{icon:"list",scale:"s",slot:"content-end"}))}_renderAddRelatedRecordButton(C){const {canAddRelatedFeature:V,relationshipId:ia,relatedLayer:oa}=C,{messages:ma,relatedRecordCallbacks:D}=this;if(V&&D?.addRelatedRecord&&oa)return G.tsx("calcite-button",{alignment:"center",appearance:"outline-fill",class:E.css.centeredButton,disabled:C.updating||!C.originHasValidKey,iconStart:"plus",key:`${ia}-add-button`,
onclick:()=>this._onAddRelatedRecordsClick(ia,oa),round:!0,scale:"s",width:"half"},C.relatedLayerIsTable?ma.addRecord:ma.addFeature)}_renderRelatedRecordListItem(C,V){const {feature:ia,description:oa,title:ma}=C,{feature:D,relatedRecordCallbacks:J}=this,{highlightHelper:ea}=this.viewModel;return G.tsx("calcite-list-item",{bind:this,description:oa,key:`${V}-${ia.uid}`,label:ma,onclick:()=>{ea?.removeAll();J?.editRelatedRecord&&D&&J.editRelatedRecord({parentFeature:D,relationshipId:V,relatedFeature:ia})},
onmouseenter:ea?()=>ea.add(ia):void 0,onmouseleave:ea?()=>ea.remove(ia):void 0,value:ma},G.tsx("calcite-icon",{icon:I.getIconForFeature(ia),scale:"m",slot:"content-start"}),G.tsx("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"}))}_renderRelationshipInput(C){if(this._relatedRecordsEnabled&&C.editable){var {featureCount:V,relationshipId:ia,showAllEnabled:oa}=C,ma=oa?null:this._renderDescriptionOrEmpty(C.description),D=0<V?this._renderRelatedRecordsList(C):C.loaded?C.originHasValidKey?
this._renderNoRelatedRecordsNotice():this._renderNoValidOriginKeyNotice(C):void 0;return G.tsx("calcite-label",{class:this.classes(E.css.label,E.css.relatedRecordsLabel),key:`relationship-${ia}-container`},G.tsx("div",null,this._renderRelatedRecordsHeaderContainer(C),ma,D),this._renderAddRelatedRecordButton(C))}}_renderRelatedRecordsHeaderContainer(C){const V=C.updating||!C.loaded;return G.tsx("div",{class:E.css.relatedRecordsHeader,key:`relationship-${C.relationshipId}-header`},G.tsx("span",null,
C.label),V?G.tsx("calcite-loader",{inline:!0,key:"loader",label:this.messagesCommon?.loading,scale:"s",type:"indeterminate"}):void 0)}_renderRelatedRecordsList(C){const {relationshipId:V}=C;return G.tsx("calcite-list",{class:E.css.relatedRecordsList},C.relatedFeatureInfos.map(ia=>this._renderRelatedRecordListItem(ia,V)),this._renderShowAllRelatedRecordsListItem(C),this._renderObserverNode())}_renderNoValidOriginKeyNotice(C){var {messages:V}=this;V=C.relatedLayerIsTable?V.noOriginKeyRecord:V.noOriginKeyFeature;
const ia=C.relationship?.keyField,oa=this.viewModel.findField(ia),ma=C.layer?.fieldsIndex.get(ia);C=X.substitute(V,{relatedLayerName:C.relatedLayer?.title,originKeyField:oa?.label||ma?.alias||ia});return G.tsx("calcite-notice",{icon:"information",kind:"brand",open:!0,scale:"s",width:"full"},G.tsx("div",{slot:"message"},C))}_renderNoRelatedRecordsNotice(){return G.tsx("calcite-notice",{icon:"information",kind:"brand",open:!0,scale:"s",width:"full"},G.tsx("div",{slot:"message"},this.messagesFeature.noRelatedFeatures))}_renderObserverNode(){if(this.viewModel.activeRelationshipInput?.showAllEnabled)return G.tsx("div",
{afterCreate:this._afterListObserverCreated,afterRemoved:this._afterListObserverRemoved,bind:this,class:E.css.listObserver,key:"feature-observer"})}getCommonInputProps(C){var {disabled:V}=this;const {editable:ia,hint:oa,label:ma,maxLength:D,minLength:J,name:ea,range:{max:ba,min:T},required:Y,valid:fa,value:pa}=C;C=this._inputsWithChanges.has(ea);V=!ia||V;return{afterCreate:this._afterComponentCreate,afterUpdate:this._afterComponentCreateOrUpdate,"aria-invalid":fa?"false":"true",class:this.classes(E.css.fieldInput,
V?E.css.inputDisabled:null,C&&!fa?E.css.inputInvalid:null),key:ea,label:ma,max:null!=ba?ba:void 0,min:null!=T?T:void 0,maxLength:-1<D?D:void 0,minLength:-1<J?J:void 0,placeholder:oa??void 0,readOnly:V,required:Y,value:null==pa?"":`${pa}`,onblur:this._onComponentBlur,onfocus:this._onComponentFocus,onkeydown:this._onComponentKeyDown,["data-field-name"]:ea}}_getFieldInputFromHTMLElement(C){return this.viewModel.findField(C.getAttribute("data-field-name"))}_afterDateComponentCreate(C){const V=this._getFieldInputFromHTMLElement(C),
ia=C.dataset.datePart,oa=this._dateComponentMap.get(V.name);if("valueAsDate"in C&&null!=C.value){const ma=C.value,D=new ResizeObserver(()=>{C.value=void 0;C.value=ma;D.unobserve(C)});D.observe(C)}if(null!=oa)switch(ia){case "date":oa.date=C;break;case "time":oa.time=C;break;case "timeZone":oa.timeZone=C}else this._dateComponentMap.set(V.name,{[ia]:C});this._afterDateComponentCreateOrUpdate(C)}_afterDateComponentCreateOrUpdate(C){this._afterComponentCreateOrUpdate(C)}_afterComponentCreate(C){const V=
this._getFieldInputFromHTMLElement(C);I.isNumberFieldInput(V)&&null!=C.value&&"setNumberValue"in C&&C.setNumberValue({committing:!1,value:C.value,origin:"direct"});this._afterComponentCreateOrUpdate(C)}_afterRadioGroupCreateOrUpdate(C){var V=C.selectedItem;C=C.querySelector("calcite-radio-button");(V=V||C)&&this._afterComponentCreateOrUpdate(V)}_afterComponentCreateOrUpdate(C){var {viewModel:V}=this;const ia=this._getFieldInputFromHTMLElement(C);V=V.findField(this._focusedFieldName);this._attemptFocusOnNextRender&&
V===ia&&(this._attemptFocusOnNextRender=!1,I.isInputInGroupInput(ia)&&(ia.group.open=!0),C.setFocus())}_onComponentFocus(C){this._focusedFieldName=this._getFieldInputFromHTMLElement(C.target).name}_onComponentBlur(C){C=C.target;this._focusedFieldName=null;this._saveValueFromComponent(C)}_saveValueFromDateComponent(C){var V=this._getFieldInputFromHTMLElement(C);const ia=V.field.type,{name:oa,range:ma}=V;if(V=this._dateComponentMap.get(oa)){var D=this.viewModel.getValue(oa),J=null;"date-only"===ia?
J=C.value:"time-only"===ia?(D=U.normalizeTimeOnlyString(D),J=U.normalizeTimeOnlyString(C.value)):J="timestamp-offset"===ia?null!=C.value?U.getISOFieldValueFromDateComponents({dateComponent:V.date,timeComponent:V.time,timeZoneComponent:V.timeZone,oldValue:D}):null:null!=C.value?U.getUnixFieldValueFromDateComponents({oldValue:D,dateComponent:V.date,timeComponent:V.time,timeZone:this.timeZone,max:ma.max,min:ma.min}):null;null!==J&&C.value?D!==J&&this._updateFieldValue(oa,J):this._updateFieldValue(oa,
null)}}_saveValueFromComponent(C){const V=this._getFieldInputFromHTMLElement(C);this._updateFieldValue(V.name,this._parseValue(C))}_onComponentKeyDown({key:C,target:V}){V=this._getFieldInputFromHTMLElement(V);"Enter"===C&&I.isInputInGroupInput(V)&&!V.group.open&&(V.group.open=!0)}_updateFieldValue(C,V){this.viewModel.setValue(C,V);this._inputsWithChanges.add(C);this.viewModel.fieldsWithContingentValues.has(C)&&(C=Object.fromEntries(Object.entries(this.getValues()).filter(([,ia])=>null!=ia)),this.viewModel.validateContingencyConstraints(C))}_parseValue(C){const V=
this._getFieldInputFromHTMLElement(C),ia=C.value;return I.isFieldElementWithInputType(V.element,"switch")?C.checked?V.element.input.onValue:V.element.input.offValue:null==ia||""===ia?null:"number"===V.dataType?"-0"===ia||"-0."===ia||"-0,"===ia?ia:parseFloat(ia):"date"===V.field.type?parseFloat(ia):ia}_ignoreDeselectionOfNoValueOption(C){const {firstChild:V,selectedItems:ia}=C;0===ia.length&&V&&"selected"in V?V.selected=!0:Q.getLogger(this).warnOnce("Failed to override user attempt to deselect 'No value' option.")}_onGroupToggle(C,
V){C.open?(V.open=!0,this._focusedFieldName=this._getFocusableInput("forward",V)?.name||null,this._attemptFocusOnNextRender=!0,"sequential"===this.groupDisplay&&this.viewModel.allGroupInputs.forEach(ia=>{ia!==V&&(ia.open=!1)})):V.open=!1;this.scheduleRender()}_onFormSubmit(C){C.preventDefault()}_onFormKeyDown(C){"Enter"===C.key&&this.viewModel.submit()}_afterListObserverCreated(C){this.viewModel.activeRelationshipInput&&(this._listObserverNode=C)}_afterListObserverRemoved(){this._listObserverNode=
null}_onObserverChange(){this._listObserverNode&&this._listObserver.unobserve(this._listObserverNode);const C=this.viewModel.activeRelationshipInput;C&&this._listObserverNode&&C.showAllEnabled&&this._listObserver.observe(this._listObserverNode)}_incrementRelatedRecordPage(){this.viewModel.activeRelationshipInput?.incrementPage()}_syncGroupInputStates(){if("sequential"===this.groupDisplay){var C=this.viewModel.allGroupInputs;if(C.length){var V=C.filter(ia=>ia.open);0===V.length?C[0].open=!0:1<V.length&&
V.slice(1).forEach(ia=>ia.open=!1)}}}};u.__decorate([L.property()],v.prototype,"_listObserverNode",void 0);u.__decorate([L.property()],v.prototype,"_relatedRecordsEnabled",null);u.__decorate([L.property()],v.prototype,"disabled",null);u.__decorate([L.property()],v.prototype,"feature",null);u.__decorate([L.property()],v.prototype,"formTemplate",null);u.__decorate([L.property()],v.prototype,"groupDisplay",void 0);u.__decorate([L.property()],v.prototype,"headingLevel",void 0);u.__decorate([L.property()],
v.prototype,"label",null);u.__decorate([L.property()],v.prototype,"layer",null);u.__decorate([L.property()],v.prototype,"map",null);u.__decorate([L.property(),aa.messageBundle("esri/widgets/FeatureForm/t9n/FeatureForm")],v.prototype,"messages",void 0);u.__decorate([L.property(),aa.messageBundle("esri/t9n/common")],v.prototype,"messagesCommon",void 0);u.__decorate([L.property(),aa.messageBundle("esri/widgets/Feature/t9n/Feature")],v.prototype,"messagesFeature",void 0);u.__decorate([L.property(),aa.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],
v.prototype,"messagesTemplates",void 0);u.__decorate([L.property()],v.prototype,"relatedRecordCallbacks",null);u.__decorate([L.property()],v.prototype,"relationshipId",null);u.__decorate([L.property()],v.prototype,"spatialReference",null);u.__decorate([L.property()],v.prototype,"strict",null);u.__decorate([L.property()],v.prototype,"timeZone",null);u.__decorate([L.property()],v.prototype,"view",null);u.__decorate([L.property(),M.vmEvent(["value-change","submit"])],v.prototype,"viewModel",void 0);
return v=u.__decorate([B.subclass("esri.widgets.FeatureForm")],v)})},"esri/widgets/FeatureForm/css":function(){define(["exports"],function(q){q.css={base:"esri-feature-form",form:"esri-feature-form__form",formHeader:"esri-feature-form__form-header",label:"esri-feature-form__label",labelTextContent:"esri-feature-form__label-text-content",fieldInput:"esri-feature-form__input",inputRadio:"esri-feature-form__input--radio",inputRadioGroup:"esri-feature-form__input--radio-group",inputRadioLabel:"esri-feature-form__input--radio-label",
inputDisabled:"esri-feature-form__input--disabled",inputSwitch:"esri-feature-form__input--switch",inputInvalid:"esri-feature-form__input--invalid",centeredButton:"esri-feature-form__centered-button",description:"esri-feature-form__description-text",listObserver:"esri-feature-form__list-observer",relatedRecordsHeader:"esri-feature-form__related-records_header",relatedRecordsLabel:"esri-feature-form__related-records_label",relatedRecordsList:"esri-feature-form__related-records_list",dateInputContainer:"esri-feature-form__date-input-container",
group:"esri-feature-form__group",groupSequential:"esri-feature-form__group--sequential",groupActive:"esri-feature-form__group--active"};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureForm/featureFormUtils":function(){define("exports ../../intl ../../core/arrayUtils ../../core/compilerUtils ../../core/string ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../smartMapping/support/utils ../support/dateUtils ../../intl/substitute".split(" "),function(q,
u,v,A,z,Q,w,L,W,B){function R(M){const {fields:G,values:X}=M,C=M.timeZone??void 0;M=G.map((V,ia)=>{let oa=X[ia];V.domain&&"coded-value"===V.domain.type&&(ia=V.domain.codedValues.find(ma=>ma.code===oa),ia?.name&&(oa=ia.name));if(L.isAnyDateField(V)||w.isTimeOnlyField(V))oa=W.getLabelForDateFieldValue(V,oa,{timeZone:C,...W.getIntlOptionsForField(V)});return[V.name,oa]});return Object.fromEntries(M)}function F(M,G){return z.replace(z.replace(M,X=>`{${X.toLowerCase()}}`),Object.fromEntries(Object.entries(G).map(([X,
C])=>[X.toLowerCase(),C])))}function E(M){return 1E7<=M||-1E7>=M}function I(M,{validationErrors:G}){return null!=M.max&&null!=M.min?G.outsideRange:null!=M.max?G.outsideRangeMax:G.outsideRangeMin}const H=M=>"field"===M?.type,y=M=>"relationship"===M?.type,O=M=>"field"===M.type,U=M=>M.reduce((G,X)=>"group"===X?.type?[...G,...X.inputs]:[...G,X],[]),P=(M,G)=>null!=M&&M.input?.type===G,S={typeFieldName:null,types:[]};q.LengthValidationError=void 0;(q.LengthValidationError||(q.LengthValidationError={})).TOO_SHORT=
"length-validation-error::too-short";const Z={type:"number"},aa={type:"number",intlOptions:{notation:"scientific"}};q.capabilitiesAllowEditType=(M,G)=>{if(!M)return!0;({operations:M}=M);switch(G){case "INSERT":return M.supportsAdd;case "UPDATE":case "DELETE":return M.supportsUpdate;default:return!0}};q.flattenFieldInputs=M=>U(M).filter(H);q.flattenInputs=U;q.flattenRelationshipInputs=M=>U(M).filter(y);q.formTemplateHasInvalidFields=function(M,G){return(G=G??("formTemplate"in M&&M.formTemplate))?(G.elements?.filter(O)??
[]).some(({fieldName:X})=>!M.fieldsIndex.get(X)):!1};q.getComputedAttributes=R;q.getErrorMessageForFieldInput=(M,G,X)=>{const {dataType:C,error:V,minLength:ia,value:oa,required:ma}=M,D=G?.validationErrors;if(!D||!V)return null;if(ma&&null===oa)return D.cannotBeNull;if(V===Q.DomainValidationError.VALUE_OUT_OF_RANGE||V===w.NumericRangeValidationError.OUT_OF_RANGE){const {field:J,range:ea}=M;M={type:"date",intlOptions:{timeZone:"date"===J.type&&X?X:void 0,...W.getIntlOptionsForField(J)}};G=I(ea,G);return B.substitute(G,
ea,{format:{max:"date"===C?M:null!=ea.max&&E(ea.max)?aa:Z,min:"date"===C?M:null!=ea.min&&E(ea.min)?aa:Z}})}return V===Q.DomainValidationError.INVALID_CODED_VALUE?D.invalidCodedValue:V===w.TypeValidationError.INVALID_TYPE?D.invalidType:V===q.LengthValidationError.TOO_SHORT?B.substitute(D.tooShort,{min:ia}):null};q.getFieldsInTitleAndDesc=M=>{const G=[];if(M.formTemplate){const {description:X,title:C}=M.formTemplate;M.fields?.forEach(V=>{const ia=C&&z.templateHasKey(C,V.name),oa=X&&z.templateHasKey(X,
V.name);(ia||oa)&&G.push(V.name)})}return G};q.getIconForFeature=M=>{if(M){var G=M.layer;G=G&&"geometryType"in G?G.geometryType:void 0;M=M.geometry?.type;return"polyline"===M||"polyline"===G?"line":M||G||"table"}};q.getNormalizedFeatureTypeInfo=M=>M?"subtype-sublayer"===M.type?{typeFieldName:M.parent?.subtypeField,types:M.parent?.subtypes??[]}:"types"in M&&M.types?{typeFieldName:M.typeIdField,types:M.types.map(({id:G,name:X,domains:C})=>({code:G,name:X,domains:C}))}:S:S;q.isFieldElement=O;q.isFieldElementWithInputType=
P;q.isFieldElementWithShowNoValueOptionInput=M=>null!=M&&(P(M,"combo-box")||P(M,"radio-buttons"));q.isFieldElementWithTextInput=M=>null!=M&&(P(M,"text-box")||P(M,"text-area"));q.isFieldInput=H;q.isGroupElement=M=>"group"===M.type;q.isGroupInput=M=>"group"===M?.type;q.isInputInGroupInput=M=>"group"!==M?.type&&null!=M.group;q.isInteractiveElement=M=>null!=M&&"label"in M&&"description"in M;q.isNumberFieldInput=({domain:M,inputType:G="text-box",dataType:X})=>"number"===X&&"text-box"===G&&(!M||"coded-value"!==
M.type);q.isRelationshipElement=M=>"relationship"===M.type;q.isRelationshipInput=y;q.isTemplateItemGroup=M=>"items"in M;q.parseFormTemplateString=function(M){const {attributes:G,fieldsIndex:X,label:C,timeZone:V}=M;if(!G||"object"!==typeof G)return C;var ia=Object.keys(G).filter(oa=>z.templateHasKey(C,oa));M=ia.map(oa=>G[oa]);ia=ia.map(oa=>X.get(oa)).filter(v.isSome);return F(C,R({values:M,fields:ia,timeZone:V}))};q.substituteFieldTemplatesInString=F;q.valueIsInvalidSwitchValue=function(M,G){return null==
M||G.onValue!==M&&G.offValue!==M};q.valueIsValidContingentValue=function(M,G){switch(G.objectType){case "any":return!0;case "null":return null==M;case "code":return M===G.codedValue?.code;case "range":return null!=M&&null!=G.minValue&&null!=G.maxValue&&+M>=G.minValue&&+M<=G.maxValue;default:return A.neverReached(G.objectType),!1}};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureForm/FeatureFormViewModel":function(){define("../../chunks/tslib.es6 ../../Graphic ../../core/deprecate ../../core/Evented ../../core/Logger ../../core/maybe ../../core/Promise ../../core/reactiveUtils ../../core/string ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../form/FormTemplate ../../layers/support/ContingentValue ../../layers/support/editableLayers ../../layers/support/LayerContingentValuesCache ../../time/timeZoneUtils ./featureFormUtils ./FieldInput ./FormExpressionArcadeExecutor ./FormExpressionsManager ./GroupInput ./RelationshipInput".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G,X){function C(D){if("field"===D.type||"group"===D.type||"relationship"===D.type)return!0;const J=S.isInteractiveElement(D)?" "+D.label:"";z.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel").warn("form-info::unsupported-element-type","Only element types 'field', 'group' and 'relationship' are supported",`Element${J} has unsupported type '${D.type}'`);return!1}const V=new u({attributes:{}}),ia=["editableExpression","requiredExpression",
"valueExpression","visibilityExpression"],oa=["visibilityExpression"],ma=["editableExpression","visibilityExpression"];u=class extends w.EsriPromiseMixin(A.EventedAccessor){constructor(D){super(D);this._expressionExecutorsInUse=new Set;this._expressionExecutorLookup=new Map;this._contingentValuesCache=this._expressionsManager=null;this._featureClone=V.clone();this._initialFeature=V.clone();this._timeZone=null;this._updatingHandles=new I.UpdatingHandles;this.arcadeEditType="NA";this.contingencyConstraintViolations=
new Map;this.disabled=!1;this.highlightHelper=null;this.inputs=[];this.relatedRecordCallbacks=this.map=null;this.strict=!1}initialize(){const D=L.watch(()=>[this.layer,!!this.layer?.loaded,this.formTemplate,this.feature,this.timeZone,this.arcadeEditType],async([ba,T])=>{null!=ba&&(T?this._updatingHandles.addPromise(this._updateInputs()):ba.load().catch(()=>{}))},{equals:([ba,T,Y,fa,pa,va],[xa,ya,Da,Ca,Ka,Oa])=>ba===xa&&T===ya&&Y===Da&&fa===Ca&&pa===Ka&&va===Oa,initial:!0}),J=L.watch(()=>this._arcadeContextInfo,
ba=>{null!=this._expressionsManager&&(this._expressionsManager.arcadeContextInfo=ba,this._updatingHandles.addPromise(this._expressionsManager.evaluateAll().finally(()=>this._afterExpressionsEvaluated())))}),ea=L.watch(()=>this.layer,ba=>{(ba="subtype-sublayer"===ba?.type?ba.parent:"feature"===ba?.type?ba:null)&&this.addResolvingPromise(U.createLoadedLayerContingentValuesCache(ba).then(T=>{this._contingentValuesCache=T;this.notifyChange("fieldsWithContingentValues")}))},{initial:!0});this.addHandles([D,
J,ea])}destroy(){this.layer=this.feature=null;this._contingentValuesCache=Q.destroyMaybe(this._contingentValuesCache);this.highlightHelper?.removeAll();this._updatingHandles.destroy()}get _expressionInfosLookup(){return new Map(this.formTemplate?.expressionInfos?.map(D=>[D.name,D]))}get activeRelationshipInput(){return this.allRelationshipInputs.find(D=>D.relationshipId===this.relationshipId)}get _arcadeContextInfo(){const {_initialFeature:D,arcadeEditType:J,layer:ea,map:ba,spatialReference:T,timeZone:Y}=
this;return{layer:O.isEditableLayer(ea)?ea:null,originalFeature:D,editType:J,map:ba,spatialReference:T,timeZone:Y}}get allFieldInputs(){return S.flattenFieldInputs(this.inputs)}get allGroupInputs(){return this.inputs.filter(S.isGroupInput)}get allRelationshipInputs(){return S.flattenRelationshipInputs(this.inputs)}get _layerFieldsByName(){return new Map(this.layer?.fields.map(D=>[D.name,D]))}get feature(){return this._get("feature")}set feature(D){this._featureClone=D?D.clone():V.clone();this._initialFeature=
this._featureClone.clone();this._expressionsManager&&(this._expressionsManager.feature=this._featureClone);D?(this._resetFieldInputValues(this._featureClone),this.allRelationshipInputs.forEach(J=>J.feature=D)):(this.inputs.forEach(J=>J.destroy()),this.inputs.length=0);this.contingencyConstraintViolations.clear();this._set("feature",D)}get fieldsWithContingentValues(){if(null==this._contingentValuesCache)return new Set;const D=this._contingentValuesCache.fieldGroups.flatMap(J=>J.fields);return new Set(D)}get fieldsWithInvalidCodedValue(){return new Set(this.allFieldInputs.filter(D=>
{const {name:J,domain:ea,value:ba}=D;return"coded-value"===ea?.type?(D=this.getFieldValueOptionsForField(J),null!=ba&&""!==ba&&!D.flat().some(T=>T.value===ba)):!1}))}get formTemplate(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null}set formTemplate(D){void 0===D?this._clearOverride("formTemplate"):this._override("formTemplate",D)}get formDescription(){const {formTemplate:D,layer:J}=this;return D?.description&&J?S.parseFormTemplateString({label:D.description,attributes:this.getValues(),
fieldsIndex:J.fieldsIndex,timeZone:this.timeZone}):null}get formTitle(){const {formTemplate:D,layer:J}=this;return D?.title&&J?S.parseFormTemplateString({label:D.title,attributes:this.getValues(),fieldsIndex:J.fieldsIndex,timeZone:this.timeZone}):null}get formHeaderVisible(){const {activeRelationshipInput:D,formDescription:J,formTitle:ea}=this;return!(D||!J&&!ea)}get joinedContingentValues(){return this._joinContingentValues()}get layer(){return this.feature?.sourceLayer&&"applyEdits"in this.feature.sourceLayer?
this.feature.sourceLayer:null}set layer(D){this._override("layer",D)}get relationshipId(){return this._get("relationshipId")}set relationshipId(D){var J=this.allRelationshipInputs;null!=D&&D===this.relationshipId||J.forEach(ea=>ea.showAllEnabled=!1);null!=D&&(J=J.find(ea=>ea.relationshipId===D))&&(J.showAllEnabled=!0);this._set("relationshipId",D)}get spatialReference(){return this.layer?.spatialReference??null}set spatialReference(D){this._override("spatialReference",D)}get state(){return this.layer?.loaded?
"ready":"disabled"}get submittable(){return this.valid?!0:this.allFieldInputs.filter(D=>!D.valid).every(({submittable:D})=>D)}get timeZone(){var {layer:D}=this;if(D&&"datesInUnknownTimezone"in D&&D.datesInUnknownTimezone)return P.utc;D=D&&"preferredTimeZone"in D&&D.preferredTimeZone;return this._timeZone===P.unknown?D||P.utc:this._timeZone||P.system}set timeZone(D){this._timeZone=D}get updating(){return this._updatingHandles.updating}get valid(){const D=this.allFieldInputs;return 0<D.length&&D.every(({valid:J})=>
J)}get view(){v.deprecatedProperty(z.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel"),"view",{replacement:"FeatureForm.map",version:"4.27"});return this._get("view")}set view(D){v.deprecatedProperty(z.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel"),"view",{replacement:"FeatureForm.map",version:"4.27"});this._set("view",D);D?.map&&(this.map=D.map)}findField(D){return this.allFieldInputs.find(J=>J.name===D)}getFieldValueOptionsForField(D,J){var ea=this.findField(D);if(!ea)return[[],
[]];ea="coded-value"===ea.domain?.type?ea.domain.codedValues.map(({name:ba,code:T})=>({name:ba,value:T})):[];D=this.fieldsWithContingentValues.has(D)?this._getContingentValueOptionsForField(D,J):[];if(0<D.length){const ba=new Set(D.map(T=>T.value));J=ea.filter(T=>!ba.has(T.value));return[D,J]}return[ea,[]]}getValue(D){const {_featureClone:J,layer:ea}=this,ba=!!ea?.getField(D);return J.getAttribute(D)??(ba?null:void 0)}setValue(D,J){const {_featureClone:ea,strict:ba}=this,T=this.findField(D);J=""===
J?null:J;T&&ea.getAttribute(D)!==J&&(T.value=J,!ba||T.valid)&&(this._afterValueChange(T),null!=this._expressionsManager&&this._updatingHandles.addPromise(this._expressionsManager.evaluateInvalidated([T.name]).finally(()=>this._afterExpressionsEvaluated())))}getValues(){return{...this._featureClone.attributes}}overrideInitialFeature(D){this._initialFeature=D}submit(){var D=this.allFieldInputs;const J=new Set(D.filter(ba=>ba.valid).map(({name:ba})=>ba));D=D.filter(ba=>!ba.valid).map(({name:ba})=>ba);
const ea=this.getValues();if(0<this.validateContingencyConstraints(ea,{includeIncompleteViolations:!0}).length)for(const [ba,T]of this.contingencyConstraintViolations.entries())"error"===T.type&&(J.delete(ba),D.push(ba));this.emit("submit",{valid:[...J],invalid:D,values:ea})}validateContingencyConstraints(D,J){const {_contingentValuesCache:ea}=this,ba=new Map;this.contingencyConstraintViolations=ba;if(null==ea)return[];const {invalid:T,incomplete:Y}=ea.validateContingencyConstraints(D);D=[...T,...(J?.includeIncompleteViolations?
Y:[])];for(const fa of D)for(const pa of fa.fieldGroup.fields)ba.set(pa,fa);return D}notifyFeatureGeometryChanged(){const {_expressionsManager:D,feature:J,_featureClone:ea}=this;ea.geometry=J.geometry;null!=D&&this._updatingHandles.addPromise(D.evaluateInvalidatedByGeometry().finally(()=>this._afterExpressionsEvaluated()))}_emitChangeEvent({name:D,valid:J,value:ea}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:D,value:ea,valid:J})}async _updateInputs(){this._stopExpressions();
const {_featureClone:D,_initialFeature:J,arcadeEditType:ea,formTemplate:ba,inputs:T,layer:Y,timeZone:fa}=this;if(Y){var pa={arcadeEditType:ea,feature:D,initialFeature:J,layer:Y,timeZone:fa},va=T.slice();this.inputs=ba?.elements&&0<ba.elements.length?await this._updateInputsUsingFormElements(va,ba.elements,pa):this._updateInputsUsingLayerFields(va,Y?.fields,pa);await this._startExpressions()}}async _updateInputsUsingFormElements(D,J,ea){const ba=new Map;for(const T of D)if(S.isGroupInput(T)){ba.set(T.element,
T);for(const Y of T.inputs)Y.element&&ba.set(Y.element,Y)}else T.element&&ba.set(T.element,T);D=new Map;J=this._updateInputsUsingFormElementsRecursive({existingInputsByElement:ba,updatedElements:J.filter(C),sharedInitializationProperties:ea,group:null,newExpressionExecutorPromises:D});for(const [T,Y]of ba.entries())ba.delete(T),Y.destroy();await Promise.all(Array.from(D.values()));return J}_updateInputsUsingFormElementsRecursive(D){const {existingInputsByElement:J,updatedElements:ea,sharedInitializationProperties:ba,
group:T,newExpressionExecutorPromises:Y}=D;D=[];for(const pa of ea){var fa=J.has(pa);const va=fa?J.get(pa):S.isGroupElement(pa)?this._makeGroupInputFromElement(pa,ba):S.isFieldElement(pa)?this._makeFieldInputFromElement(pa,ba,T):S.isRelationshipElement(pa)?this._makeRelationshipInputFromElement(pa,ba,T):null;if(va){D.push(va);this._assignExpressionExecutors(va,pa,Y);if(fa)if(J.delete(pa),S.isGroupInput(va)){const {feature:xa,timeZone:ya}=ba;va.set({feature:xa,timeZone:ya})}else S.isRelationshipInput(va)?
(fa=this.relationshipId===pa.relationshipId,va.set(ba),va.set({map:this.map,showAllEnabled:fa})):va.set(ba);S.isGroupElement(pa)&&(fa=pa.elements.filter(xa=>C(xa)),va.inputs=this._updateInputsUsingFormElementsRecursive({existingInputsByElement:J,updatedElements:fa,sharedInitializationProperties:ba,group:va,newExpressionExecutorPromises:Y}))}}return D}_updateInputsUsingLayerFields(D,J,ea){if(!Array.isArray(J))return z.getLogger("esri.widgets.FeatureForm.FeatureFormViewModel").warn(this.declaredClass,
"No attribute fields found."),[];const ba=new Map;for(const xa of D)if(S.isGroupInput(xa)){for(const ya of xa.inputs)ya.destroy();xa.inputs.length=0;xa.destroy()}else S.isRelationshipInput(xa)?xa.destroy():S.isFieldInput(xa)&&(null!==xa.element?xa.destroy():ba.set(xa.field,xa));D=[];const {arcadeEditType:T,feature:Y,initialFeature:fa,layer:pa,timeZone:va}=ea;for(const xa of J)J=ba.get(xa)??new Z({arcadeEditType:T,field:xa,feature:Y,initialFeature:fa,layer:pa,value:Y?.getAttribute(xa.name)??null,preservesValueWhenHidden:this.formTemplate?.preserveFieldValuesWhenHidden,
timeZone:va}),D.push(J),ba.delete(xa);for(const [xa,ya]of ba.entries())ba.delete(xa),ya.destroy();return D}_resetFieldInputValues(D){for(const J of this.allFieldInputs)J.value=D.getAttribute(J.name)}_makeFieldInputFromElement(D,J,ea){const {arcadeEditType:ba,feature:T,initialFeature:Y,layer:fa,timeZone:pa}=J;({fieldName:J}=D);return(J=J&&this._layerFieldsByName.get(J))?new Z({arcadeEditType:ba,element:D,field:J,value:T?.getAttribute(D.fieldName)??null,feature:T,initialFeature:Y,layer:fa,group:ea,
preservesValueWhenHidden:this.formTemplate?.preserveFieldValuesWhenHidden,timeZone:pa}):null}_makeGroupInputFromElement(D,J){const {feature:ea,layer:ba}=J;return new G({element:D,inputs:[],feature:ea,layer:ba})}_makeRelationshipInputFromElement(D,J,ea=null){const {map:ba}=this,{feature:T,layer:Y,timeZone:fa}=J;return new X({element:D,feature:T,group:ea,layer:Y,map:ba,timeZone:fa})}_assignExpressionExecutors(D,J,ea){var ba=S.isGroupElement(J)?oa:S.isRelationshipElement(J)?ma:ia;for(const T of ba){const Y=
`${T}Executor`;if(D[Y]){this._useExecutor(D[Y]);continue}ba=J[T];const {_expressionExecutorLookup:fa}=this;if(null!=ba&&""!==ba){const pa=this._expressionInfosLookup.get(ba)?.expression??ba;fa.has(pa)?D[Y]=this._useExecutor(fa.get(pa)):ea.has(pa)?(ba=ea.get(pa).then(va=>D[Y]=va),ea.set(pa,ba)):(ba=aa.createFormExpressionArcadeExecutor(pa,this.layer).then(va=>{D[Y]=this._useExecutor(va);fa.set(pa,va);return va}),ea.set(pa,ba))}}return[]}_createExpressionsManager(D){const {_arcadeContextInfo:J,_featureClone:ea,
allFieldInputs:ba,formTemplate:T}=this;this._expressionsManager=new M.FormExpressionsManager({executors:D,feature:ea,arcadeContextInfo:J,fieldInputs:ba,preserveFieldValuesWhenHidden:!0===T?.preserveFieldValuesWhenHidden})}async _startExpressions(){if(0!==this._expressionExecutorsInUse.size){var D=Array.from(this._expressionExecutorsInUse);this._createExpressionsManager(D);await this._expressionsManager.evaluateAll().finally(()=>this._afterExpressionsEvaluated())}}_stopExpressions(){this._expressionsManager=
Q.destroyMaybe(this._expressionsManager);this._expressionExecutorsInUse.clear()}_useExecutor(D){this._expressionExecutorsInUse.add(D);return D}_afterValueChange(D){const {name:J,value:ea}=D,{_featureClone:ba,formTemplate:T,layer:Y}=this;if(Y){var fa=ba.getAttribute(J);ba.setAttribute(J,ea);var {typeFieldName:pa,types:va}=S.getNormalizedFeatureTypeInfo(Y);if(J===pa&&ea!==fa){"subtype-sublayer"===Y.type&&(fa=Y.parent?.findSublayerForFeature(ba),ba.sourceLayer=this.feature.sourceLayer=fa);fa=new Set;
for(var xa of va)if(xa.domains&&"object"===typeof xa.domains)for(const ya of Object.keys(xa.domains))fa.add(ya);for(const ya of fa)(xa=this.findField(ya))&&xa.notifyChange("domain")}if(null!=T){const {description:ya,title:Da}=T;Da&&W.templateHasKey(Da,J)&&this.notifyChange("formTitle");ya&&W.templateHasKey(ya,J)&&this.notifyChange("formDescription")}this._emitChangeEvent(D)}}_afterExpressionsEvaluated(){const {_featureClone:D}=this;for(const J of this.allFieldInputs)J.value!==D.getAttribute(J.name)&&
this._afterValueChange(J)}_joinContingentValues(){var D=this._contingentValuesCache;if(null==D)return[];var {typeFieldName:J}=S.getNormalizedFeatureTypeInfo(this.layer);J=J?this.getValue(J):null;const ea=[];for(var ba of D.fieldGroups){const {contingencies:pa,fields:va,name:xa}=ba;D=[];for(var T of pa)T.isRetired||(null==T.subtype||T.subtype.code===J)&&D.push({values:T.values});0<D.length&&ea.push({name:xa,fields:va,contingencies:D})}const [Y,fa]=this._generateJoinPlan(ea);ba=Y.flatMap(pa=>this._joinFieldGroupContingencies(pa));
T=fa.flatMap(pa=>pa.contingencies);return[...ba,...T]}_generateJoinPlan(D){var J=new Map,ea=[],ba=new Set;for(var T of D)for(const va of T.fields)if(J.has(va)){const xa=J.get(va),ya=T,Da=[xa.name,ya.name].sort().join("|");ba.has(Da)||(ea.push([xa,ya]),ba.add(Da),J.set(va,ya))}else J.set(va,T);J=new Set(ea.flat());D=new Set(D);for(var Y of J)D.delete(Y);Y=new Map;J=new Map;for(var fa of new Set(ea.flat()))ba=Symbol(fa.name),Y.set(ba,new Set([fa])),J.set(fa,ba);for(const [va,xa]of ea)if(ea=J.get(va),
fa=J.get(xa),ea!==fa){ba=Y.get(ea);T=Y.get(fa);for(var pa of T)ba.add(pa),J.set(pa,ea);Y.delete(fa)}pa=[...Y.values()].map(va=>[...va]);ea=[...D];return[pa,ea]}_joinFieldGroupContingencies(D){const J=D.slice();var ea=J.shift(),ba=J.shift();D=this._generateJoinKey(ea.fields,ba.fields);let T=new Set([...ea.fields,...ba.fields]),Y=new Map;for(var fa of ea.contingencies)[ea]=this._hashContingency(fa,D.codedValueFields,!0),Y.has(ea)?Y.get(ea)?.push(fa):Y.set(ea,[fa]);for(;0<J.length;){fa=new Map;ea=J.shift();
const xa=this._generateJoinKey(T,ea.fields);for(var pa of ba.contingencies){const [ya,Da]=this._hashContingency(pa,D.codedValueFields);ba=Da?this._findMatchingContingenciesWithAnyHashMask(Y,ya):Y.get(ya);Y.has("#JSAPI_CONTINGENT_VALUE_ANY_HASH")&&ba?.push(...this._findMatchingContingenciesContainingAny(pa,Y.get("#JSAPI_CONTINGENT_VALUE_ANY_HASH"),D.codedValueFields));if(null!=ba)for(var va of ba){ba=0<D.rangeFields.length?this._joinContingenciesWithRangeDomains(va,pa,D.rangeFields):this._joinContingencies(va,
pa);if(null==ba)break;const [Ca]=this._hashContingency(ba,xa.codedValueFields,!0);fa.has(Ca)?fa.get(Ca)?.push(ba):fa.set(Ca,[ba])}}Y=fa;ba=ea;D=xa;T=new Set([...T,...ba.fields])}pa=[];for(const xa of ba.contingencies){const [ya,Da]=this._hashContingency(xa,D.codedValueFields);va=Da?this._findMatchingContingenciesWithAnyHashMask(Y,ya):Y.get(ya);Y.has("#JSAPI_CONTINGENT_VALUE_ANY_HASH")&&va.push(...this._findMatchingContingenciesContainingAny(xa,Y.get("#JSAPI_CONTINGENT_VALUE_ANY_HASH"),D.codedValueFields));
if(null!=va)for(const Ca of va)va=0<D.rangeFields.length?this._joinContingenciesWithRangeDomains(Ca,xa,D.rangeFields):this._joinContingencies(Ca,xa),null!=va&&pa.push(va)}return pa}_joinContingencies(D,J){J={values:{...D.values,...J.values}};for(const [ea,ba]of Object.entries(J.values))"any"===ba.objectType&&null!=D.values[ea]&&(J.values[ea]=D.values[ea]);return J}_joinContingenciesWithRangeDomains(D,J,ea){const ba=this._joinContingencies(D,J);for(const Y of ea){var T=D.values[Y];const fa=J.values[Y],
{leftIsNull:pa,rightIsNull:va,bothAreNull:xa,leftIsAny:ya,rightIsAny:Da,bothAreAny:Ca,leftIsRange:Ka,rightIsRange:Oa}=this._compareObjectTypes(T.objectType,fa.objectType);if(!xa&&!Ca)if(pa&&Da||va&&ya)ba.values[Y]=new y({objectType:"null"});else{if(pa&&Oa||va&&Ka)return null;ya?(T.minValue=-Infinity,T.maxValue=Infinity):Da&&(fa.minValue=-Infinity,fa.maxValue=Infinity);ea=Math.max(T.minValue,fa.minValue);T=Math.min(T.maxValue,fa.maxValue);if(ea>T)return null;ba.values[Y]=new y({objectType:"range",
minValue:ea,maxValue:T})}}return ba}_findMatchingContingenciesContainingAny(D,J,ea){return J.filter(ba=>ea.every(T=>{const Y=ba.values[T];T=D.values[T];return"any"===Y.objectType||"any"===T.objectType||Y.codedValue?.code===T.codedValue?.code}))}_findMatchingContingenciesWithAnyHashMask(D,J){J=RegExp(`${J}$`);const ea=[];for(const [ba,T]of D){if("#JSAPI_CONTINGENT_VALUE_ANY_HASH"===ba)break;J.test(ba)&&ea.push(...T)}return ea}_generateJoinKey(D,J){D=Array.isArray(D)?new Set(D):D;var ea=Array.isArray(J)?
new Set(J):J;J=D.size<ea.size?D:ea;D=J===D?ea:D;ea=new Set;const ba=new Set;for(const T of J)if(D.has(T)&&(J=this.layer?.getFieldDomain(T,{feature:this.feature}),null!=J))switch(J.type){case "coded-value":ea.add(T);break;case "range":ba.add(T)}return{codedValueFields:[...ea],rangeFields:[...ba]}}_contingencyIsValid(D,J){const ea={};for(const {name:ba,value:T}of this.allFieldInputs)this.fieldsWithContingentValues.has(ba)&&null!=T&&ba!==D&&(ea[ba]=T);return Object.entries(ea).every(([ba,T])=>!J.values.hasOwnProperty(ba)||
S.valueIsValidContingentValue(T,J.values[ba]))}_getContingentValueOptionsForField(D,J){var ea=this.joinedContingentValues.slice();const ba=new Map;J={code:"",name:J??"No value"};for(const T of ea)if(ea=T.values[D],"code"===ea?.objectType||"null"===ea?.objectType){const {code:Y,name:fa}=ea.codedValue&&"null"!==ea.objectType?ea.codedValue:J;!ba.has(Y)&&this._contingencyIsValid(D,T)&&ba.set(Y,{name:fa,value:Y})}return[...ba.values()]}_hashContingency(D,J,ea=!1){if(1>J.length)return["#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",
!1];const ba=[];let T=!1;for(const Y of J)if(J=D.values[Y],"any"===J.objectType){if(ea)return["#JSAPI_CONTINGENT_VALUE_ANY_HASH",!0];T=!0;ba.push(`${Y}:.*`)}else"null"===J.objectType?ba.push(`${Y}:${"#JSAPI_CONTINGENT_VALUE_NULL_HASH"}`):ba.push(`${Y}:${J.codedValue?.code}`);return[ba.sort().join("\x26"),T]}_compareObjectTypes(D,J){return{leftIsNull:"null"===D,rightIsNull:"null"===J,bothAreNull:"null"===D&&"null"===J,leftIsAny:"any"===D,rightIsAny:"any"===J,bothAreAny:"any"===D&&"any"===J,leftIsRange:"range"===
D,rightIsRange:"range"===J}}};q.__decorate([B.property()],u.prototype,"_expressionInfosLookup",null);q.__decorate([B.property()],u.prototype,"_featureClone",void 0);q.__decorate([B.property()],u.prototype,"_timeZone",void 0);q.__decorate([B.property()],u.prototype,"activeRelationshipInput",null);q.__decorate([B.property()],u.prototype,"_arcadeContextInfo",null);q.__decorate([B.property()],u.prototype,"allFieldInputs",null);q.__decorate([B.property()],u.prototype,"allGroupInputs",null);q.__decorate([B.property()],
u.prototype,"allRelationshipInputs",null);q.__decorate([B.property()],u.prototype,"_layerFieldsByName",null);q.__decorate([B.property()],u.prototype,"arcadeEditType",void 0);q.__decorate([B.property()],u.prototype,"contingencyConstraintViolations",void 0);q.__decorate([B.property()],u.prototype,"disabled",void 0);q.__decorate([B.property()],u.prototype,"feature",null);q.__decorate([B.property()],u.prototype,"fieldsWithContingentValues",null);q.__decorate([B.property()],u.prototype,"fieldsWithInvalidCodedValue",
null);q.__decorate([B.property({type:H})],u.prototype,"formTemplate",null);q.__decorate([B.property()],u.prototype,"formDescription",null);q.__decorate([B.property()],u.prototype,"formTitle",null);q.__decorate([B.property()],u.prototype,"formHeaderVisible",null);q.__decorate([B.property()],u.prototype,"highlightHelper",void 0);q.__decorate([B.property()],u.prototype,"inputs",void 0);q.__decorate([B.property()],u.prototype,"joinedContingentValues",null);q.__decorate([B.property()],u.prototype,"layer",
null);q.__decorate([B.property()],u.prototype,"map",void 0);q.__decorate([B.property()],u.prototype,"relatedRecordCallbacks",void 0);q.__decorate([B.property()],u.prototype,"relationshipId",null);q.__decorate([B.property()],u.prototype,"spatialReference",null);q.__decorate([B.property()],u.prototype,"state",null);q.__decorate([B.property()],u.prototype,"strict",void 0);q.__decorate([B.property()],u.prototype,"submittable",null);q.__decorate([B.property()],u.prototype,"timeZone",null);q.__decorate([B.property()],
u.prototype,"updating",null);q.__decorate([B.property()],u.prototype,"valid",null);q.__decorate([B.property()],u.prototype,"view",null);q.__decorate([B.property()],u.prototype,"getValues",null);q.__decorate([B.property()],u.prototype,"submit",null);return u=q.__decorate([E.subclass("esri.widgets.FeatureForm.FeatureFormViewModel")],u)})},"esri/layers/support/ContingentValue":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.codedValue=this.minValue=this.maxValue=null}};q.__decorate([v.property()],u.prototype,"objectType",void 0);q.__decorate([v.property()],u.prototype,"maxValue",void 0);q.__decorate([v.property()],u.prototype,"minValue",void 0);q.__decorate([v.property()],u.prototype,"codedValue",void 0);return u=q.__decorate([w.subclass("esri.layers.support.ContingentValue")],u)})},"esri/layers/support/LayerContingentValuesCache":function(){define("../../chunks/tslib.es6 ../../request ../../core/arrayUtils ../../core/JSONSupport ../../core/Loadable ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./arcgisLayerUrl ./Contingency ./ContingencyConstraintViolation ./ContingentValue ./ContingentValuesResult ./FieldGroup ./fieldUtils ./Subtype".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O){var U;A=U=class extends A.JSONSupportMixin(z){constructor(P){super(P);this.request=u;this.fieldGroupDefinitions=this.fieldGroups=null}initialize(){}get subtypeFieldName(){const {layer:P}=this;return"subtype-group"===P.type?P.subtypeField:P.typeIdField}static async createLoadedLayerContingentValuesCache(P){await P.load();if(void 0===P.layerId)return null;var S=P.sourceJSON.hasContingentValuesDefinition;if(S)return(new U({layer:P})).load();if(void 0===S){S=
B.parse(P.url);if(null==S)return null;S=S.url.path;if((await U._staticFetchEnterpriseFeatureRoot(S)).supportsQueryDataElements&&(S=await U._staticFetchEnterpriseFieldGroup(S,P.layerId.toString())))return S=S.map(Z=>({name:Z.name,isEditingRestrictive:Z.isEditingRestrictive,fields:Z.fieldNames.names.map(aa=>P.fieldsIndex.normalizeFieldName(aa))})),(new U({layer:P,fieldGroupDefinitions:S})).load()}return null}async load(P){const S=this.layer.load(P).then(()=>this._initializeContingentValues(this.fieldGroupDefinitions,
P));this.addResolvingPromise(S);return this}validateContingencyConstraints(P,S){const Z=Object.keys(P),aa=[],M=[];for(const X of this.fieldGroups){const C=X.isEditingRestrictive?"error":"warning";if(S&&!X.fields.some(oa=>S.includes(oa)))continue;if(!X.fields.every(oa=>Z.includes(oa))){M.push(new F({fieldGroup:X,type:C}));continue}let V=!1;const ia=P[this.subtypeFieldName];var G=X.contingencies.filter(oa=>!oa.isRetired&&oa.subtype?oa.subtype.code===ia:!0);for(const oa of G){G=!0;for(const ma in oa.values){const D=
oa.values[ma];if("any"!==D.objectType)if("null"===D.objectType){if(null!=P[ma]){G=!1;break}}else if("code"===D.objectType){if(P[ma]!==D.codedValue.code){G=!1;break}}else if("range"===D.objectType){const J=P[ma];if(J<D.minValue||J>D.maxValue){G=!1;break}}}if(G){V=!0;break}}V||aa.push(new F({fieldGroup:X,type:C}))}return{invalid:aa,incomplete:M}}getContingentValues(P,S,Z=!1){const aa=P[this.subtypeFieldName],M=void 0!==aa&&null!==aa,G={};let X=[];const C=this.fieldGroups.filter(ia=>ia.fields.includes(S));
X.push(new E({objectType:"any"}));for(const ia of C){let oa=[];var V=ia.contingencies.filter(J=>!J.isRetired&&(J.subtype&&M?J.subtype.code===aa:!0));let ma=!1;const D={};for(const J of V){let ea;V=!0;for(const ba in J.values){const T=J.values[ba];if(S===ba)ea=T,ma=ma||"range"===T.objectType;else if(void 0!==P[ba]&&"any"!==T.objectType)if("null"===T.objectType)null!==P[ba]&&(V=!1);else if("code"===T.objectType)P[ba]!==T.codedValue.code&&(V=!1);else if("range"===T.objectType){const Y=P[ba];if(Y<T.minValue||
Y>T.maxValue)V=!1}}if(ea&&V){if("any"===ea.objectType){oa.length=0;oa.push(ea);break}V=this._generateKey(ea);D[V]||oa.push(ea);D[V]=!0}}ma&&(oa=this._joinRange(oa));G[ia.name]=oa;X=Z?this._filterIntersection(X,oa):[]}1===C.length&&Z&&(X=[]);return new I({contingentValuesAllGroups:X,contingentValuesByFieldGroup:G})}_generateKey(P){switch(P.objectType){case "any":return"@any@";case "null":return"@null@";case "code":return P.codedValue.name+P.codedValue.code.toString();case "range":return P.minValue.toString()+
"-"+P.maxValue.toString()}}_joinRange(P){P.sort((M,G)=>"null"===M.objectType?-1:"null"===G.objectType?1:M.minValue-G.minValue);let S,Z;const aa=[];for(const M of P)"null"===M.objectType?aa.push(M):null==S||null==Z?(S=M.minValue,Z=M.maxValue):Z<M.minValue?(aa.push(new E({objectType:"range",minValue:S,maxValue:Z})),S=M.minValue,Z=M.maxValue):Z<M.maxValue&&(Z=M.maxValue);aa.push(new E({objectType:"range",minValue:S,maxValue:Z}));return aa}_filterIntersection(P,S){if(0===P.length||0===S.length)return[];
if("any"===P[0].objectType)return S;if("any"===S[0].objectType)return P;const Z="range"===S[0].objectType||"range"===S[1]?.objectType;return"range"===P[0].objectType||"range"===P[1]?.objectType||Z?this._intersectRanges(P,S):this._intersectValues(P,S)}_intersectRanges(P,S){const Z=[];let aa=0;for(const M of P)for(;aa<S.length;aa++){const G=S[aa];if("null"===M.objectType&&"null"===G.objectType)Z.push(new E({objectType:"null"}));else if("null"===M.objectType)break;else if("null"===G.objectType)continue;
if(M.maxValue<G.minValue)break;if(M.maxValue===G.minValue){Z.push(new E({objectType:"range",minValue:M.maxValue,maxValue:G.minValue}));break}if(!(M.minValue>G.maxValue))if(M.minValue===G.maxValue)Z.push(new E({objectType:"range",minValue:M.minValue,maxValue:G.maxValue}));else{P=M.minValue>G.minValue?M.minValue:G.minValue;if(M.maxValue<G.maxValue){Z.push(new E({objectType:"range",minValue:P,maxValue:M.maxValue}));break}Z.push(new E({objectType:"range",minValue:P,maxValue:G.maxValue}))}}return Z}_intersectValues(P,
S){const Z=[];for(const aa of P)S.some(M=>{if(aa.objectType===M.objectType)switch(aa.objectType){case "any":case "null":return!0;case "code":return aa.codedValue.code===M.codedValue.code&&aa.codedValue.name===M.codedValue.name}return!1})&&Z.push(aa);return Z}static async _staticFetchEnterpriseFeatureRoot(P,S){return u(P,{responseType:"json",query:{f:"json"},...S}).then(Z=>Z.data)}static async _staticFetchEnterpriseFieldGroup(P,S,Z){return u(`${P}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([S]),
f:"json"},...Z}).then(aa=>aa.data.layerDataElements?.[0].dataElement.fieldGroups)}async _initializeContingentValues(P,S){P=P??await this._fetchFieldGroupDefs(S);this.fieldGroups=0===P.length?[]:await this._fetchContingentValues(P,S)}async _fetchFieldGroupDefs(P){if(void 0===this.layer.layerId)return[];const S=this.layer.sourceJSON,Z=this.layer.layerId.toString(),aa=B.parse(this.layer.url).url.path;return S.hasContingentValuesDefinition?(await this._fetchAGOLFieldGroup(aa,Z,P)).map(M=>({name:M.name,
isEditingRestrictive:M.restrictive,fields:M.fields.map(G=>this.layer.fieldsIndex.normalizeFieldName(G))})):void 0!==S.hasContingentValuesDefinition?[]:this._fetchEnterpriseFeatureRoot(aa,P).then(async M=>M.supportsQueryDataElements?(await this._fetchEnterpriseFieldGroup(aa,Z,P)).map(G=>({name:G.name,isEditingRestrictive:G.isEditingRestrictive,fields:G.fieldNames.names.map(X=>this.layer.fieldsIndex.normalizeFieldName(X))})):[])}async _fetchAGOLFieldGroup(P,S,Z){return u(`${P}/${S}/fieldgroups`,{responseType:"json",
query:{f:"json"},...Z}).then(aa=>aa.data.fieldGroups)}async _fetchEnterpriseFieldGroup(P,S,Z){return U._staticFetchEnterpriseFieldGroup(P,S,Z)}async _fetchEnterpriseFeatureRoot(P,S){return U._staticFetchEnterpriseFeatureRoot(P,S)}async _fetchContingentValues(P,S){if(void 0===this.layer.layerId)return[];const Z=this.layer.sourceJSON,aa=this.layer.layerId.toString(),M=B.parse(this.layer.url).url.path;if(Z.hasContingentValuesDefinition)return S=await this._fetchAGOLContingentValues(M,aa,S),this._constructFieldGroupsAGOL(P,
S);S=await this._fetchEnterpriseContingentValues(M,aa,S);return this._constructFieldGroupsEnterprise(P,S)}_constructFieldGroupsAGOL(P,S){return P.map(Z=>{const aa=S.contingentValuesDefinition.fieldGroups.find(M=>M.name===Z.name);if(aa){let M=[];M=S.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(Z,S,aa.subTypes):this._parseAGOLFieldGroup(Z,S,aa.contingentValues);return new H({name:Z.name,isEditingRestrictive:Z.isEditingRestrictive,fields:Z.fields,contingencies:M})}return null}).filter(v.isSome)}_parseAGOLFieldGroupSubtype(P,
S,Z){let aa=[];Z?.forEach(M=>{const G=this._getSubtypeAGOL(M.name);aa=aa.concat(this._parseAGOLFieldGroup(P,S,M.contingentValues,G))});return aa}_parseAGOLFieldGroup(P,S,Z,aa=null){const M=[];for(const G of Z??[])Z=this._parseAGOLContingency(G,P,S,aa),M.push(Z);return M}_parseAGOLContingency(P,S,Z,aa){const M=P.id,G=P.retired?1===P.retired:!1,X={};for(let V=0,ia=0;V<S.fields.length;V++){const oa=S.fields[V];var C=Z.typeCodes[P.types[V]];if("Code"===C){let ma=P.values[ia];ia++;const D=this._getDomain(aa,
oa);"string"===this.layer.getField(oa)?.type&&(C=Z.stringDicts.find(J=>J.domain===D?.name))&&(ma=C.entries[ma]);C=D?.codedValues.find(J=>J.code===ma);C=new E({codedValue:C,objectType:"code"});X[oa]=C}else"Range"===C?(C=P.values[ia],ia++,C=new E({minValue:C.range[0],maxValue:C.range[1],objectType:"range"}),X[oa]=C):"Any"===C?(C=new E({objectType:"any"}),X[oa]=C):(C=new E({objectType:"null"}),X[oa]=C)}return new R({id:M,isRetired:G,subtype:aa,values:X})}_constructFieldGroupsEnterprise(P,S){const Z=
S.fieldGroups;return P.map(aa=>{var M=Z.find(G=>G.name===aa.name);return M?(M=M.contingencies.map(G=>{const X=G.id,C=G.isRetired||!1,V=this._getSubtypeEnterprise(G.subtypeCode),ia={};for(let ma=0;ma<aa.fields.length;ma++){const D=aa.fields[ma];let J=G.values[ma];if("number"===typeof J||"string"===typeof J){var oa=this._getDomain(V,D);const ea=this.layer.getField(D);y.isStringField(ea)?J=S.stringDictionary[J]:y.isDateField(ea)&&(J=(new Date(`${J}+00:00`)).getTime());oa=oa?.codedValues.find(ba=>ba.code===
J);oa=new E({codedValue:oa,objectType:"code"});ia[D]=oa}else"object"===typeof J?(oa=new E({minValue:J.minValue,maxValue:J.maxValue,objectType:"range"}),ia[D]=oa):J?(oa=new E({objectType:"any"}),ia[D]=oa):(oa=new E({objectType:"null"}),ia[D]=oa)}return new R({id:X,isRetired:C,subtype:V,values:ia})}),new H({name:aa.name,isEditingRestrictive:aa.isEditingRestrictive,fields:aa.fields,contingencies:M})):null}).filter(v.isSome)}async _fetchEnterpriseContingentValues(P,S,Z){return u(`${P}/queryContingentValues`,
{responseType:"json",query:{layers:JSON.stringify([S]),f:"json"},...Z}).then(aa=>aa.data.contingentValueSets?.[0])}async _fetchAGOLContingentValues(P,S,Z){return u(`${P}/${S}/contingentValues`,{responseType:"json",query:{f:"json"},...Z}).then(aa=>aa.data)}_getSubtypeEnterprise(P){var S=this.layer.sourceJSON;let Z;S.subtypes&&(S=S.subtypes.find(aa=>aa.code===P),Z=O.fromJSON(S));return Z||null}_getSubtypeAGOL(P){var S=this.layer.sourceJSON;let Z;S.subtypes&&(S=S.subtypes.find(aa=>aa.name===P),Z=O.fromJSON(S));
return Z||null}_findDomainByFieldName(P,S){return(P=P.domains)?([,P]=Object.entries(P).find(([Z])=>Z.trim().toLowerCase()===S.trim().toLowerCase())||[],P||null):null}_getDomain(P,S){P=P?this._findDomainByFieldName(P,S):this.layer.getFieldDomain(S);return"inherited"===P?.type?this.layer.getFieldDomain(S):P}};q.__decorate([Q.property({constructOnly:!0})],A.prototype,"layer",void 0);q.__decorate([Q.property({constructOnly:!0})],A.prototype,"request",void 0);q.__decorate([Q.property({type:[H]})],A.prototype,
"fieldGroups",void 0);q.__decorate([Q.property({constructOnly:!0})],A.prototype,"fieldGroupDefinitions",void 0);q.__decorate([Q.property()],A.prototype,"subtypeFieldName",null);return A=U=q.__decorate([W.subclass("esri.layers.support.LayerContingentValuesCache")],A)})},"esri/layers/support/Contingency":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.isRetired=!1}};q.__decorate([v.property()],u.prototype,"id",void 0);q.__decorate([v.property()],u.prototype,"isRetired",void 0);q.__decorate([v.property()],u.prototype,"subtype",void 0);q.__decorate([v.property()],u.prototype,"values",void 0);return u=q.__decorate([w.subclass("esri.layers.support.Contingency")],u)})},"esri/layers/support/ContingencyConstraintViolation":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L)}};q.__decorate([v.property()],u.prototype,"fieldGroup",void 0);q.__decorate([v.property()],u.prototype,"type",void 0);return u=q.__decorate([w.subclass("esri.layers.support.ContingencyConstraintViolation")],u)})},"esri/layers/support/ContingentValuesResult":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L)}};q.__decorate([v.property()],u.prototype,"contingentValuesAllGroups",void 0);q.__decorate([v.property()],u.prototype,"contingentValuesByFieldGroup",void 0);return u=q.__decorate([w.subclass("esri.layers.support.ContingentValuesResult")],u)})},"esri/layers/support/FieldGroup":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.fields=null;this.isEditingRestrictive=!1}};q.__decorate([v.property()],u.prototype,"name",void 0);q.__decorate([v.property()],u.prototype,"fields",void 0);q.__decorate([v.property()],u.prototype,"isEditingRestrictive",void 0);q.__decorate([v.property()],u.prototype,"contingencies",void 0);return u=q.__decorate([w.subclass("esri.layers.support.FieldGroup")],u)})},"esri/widgets/FeatureForm/FieldInput":function(){define("../../chunks/tslib.es6 ../../core/Error ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/CodedValue ../../layers/support/CodedValueDomain ../../layers/support/Domain ../../layers/support/InheritedDomain ../../layers/support/RangeDomain ../../layers/support/domainUtils ../../layers/support/fieldUtils ../../smartMapping/support/utils ../Feature/support/featureUtils ./EditableInput ./featureFormUtils ../support/dataUtils ../support/dateUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z){var aa;(function(M){M.Text="text";M.Number="number";M.Date="date";M.Unsupported="unsupported"})(aa||={});z=class extends U{constructor(M){super(M);this.error=this._storedValue=null;this.preservesValueWhenHidden=!0;this.requiredExpressionExecutor=this.group=this.field=null;this.type="field";this._fieldInputWasVisibleDuringLifetime=!1;this.valueExpressionExecutor=null}initialize(){this.addHandles(v.watch(()=>this.feature,()=>this._fieldInputWasVisibleDuringLifetime=
!1,v.sync))}get _dateFormRange(){const {element:M,field:G}=this;if("date"!==this.dataType)return{};const X=M?.domain?I.getDomainRange(G,M.domain):null;if(!M?.input)return X??{};var C=M.input,{type:V}=C;let ia={};if("date-picker"===V||"time-picker"===V||"datetimeoffset-picker"===V)ia=I.dateTimeFieldValuesToNumericRange(G,C.max,C.min);if("datetime-picker"===V){const {max:D,min:J}=C;ia={max:null!=D&&D&&!Number.isNaN(D.valueOf())?D.getTime():null,min:null!=J&&J&&!Number.isNaN(J.valueOf())?J.getTime():
null}}const {max:oa,min:ma}=ia;if(X){const {max:D,min:J}=X;C=S.isNumber(D)&&(null==oa||null!=oa&&D<oa);V=S.isNumber(J)&&(null==ma||null!=ma&&J>ma);return{max:C?D:oa??null,min:V?J:ma??null,rawMax:C?X.rawMax:ia?.rawMax??null,rawMin:V?X.rawMin:ia?.rawMin??null}}return{min:ma,max:oa,rawMax:ia?.rawMax??null,rawMin:ia?.rawMin??null}}get _dateRange(){const {_dateFormRange:M,field:G}=this;if("date"!==this.dataType)return{};var X=I.getDomainRange(G);if(!X)return M;const {max:C,min:V,rawMax:ia,rawMin:oa}=M;
if("date"===G.type){const {max:ma,min:D}=X;return{max:S.isNumber(C)&&(null===ma||null!=ma&&C<ma)?C:ma??null,min:S.isNumber(V)&&(null===D||null!=D&&V>D)?V:D??null}}if("date-only"===G.type||"time-only"===G.type||"timestamp-offset"===G.type){const {max:ma,min:D,rawMax:J,rawMin:ea}=X;X=S.isNumber(C)&&ia&&(null==ma||C<ma);const ba=S.isNumber(V)&&oa&&(null==D||V>D);return{max:X?C:ma,min:ba?V:D,rawMax:X?ia:J,rawMin:X?oa:ea}}return{max:null,min:null}}get _configAllowsEdits(){const {element:M,layer:G,name:X}=
this;return null!=M?M.editableExpression?!!this.evaluatedEditableExpression:!1!==M.editable:G?.userHasUpdateItemPrivileges?!0:(G&&"popupTemplate"in G?G?.popupTemplate?.fieldInfos?.find(({fieldName:C})=>C===X):null)?.isEditable??!0}get _layerAndFieldAllowEdits(){return this.layerAllowsEdits&&this.field?.editable}get _isVisibleByDefault(){const {field:M,layer:G}=this;return!!M?.visible&&H.isFieldVisibleByDefault(M,G)}get _isEditTrackingField(){return H.getLowerCaseEditTrackingFields(this.layer).includes(this.name?.toLowerCase())}get _shouldUseValueExpression(){return this._layerAndFieldAllowEdits&&
!this._configAllowsEdits&&null!=this.valueExpressionExecutor}get _isSubtypeField(){const {layer:M}=this;if(M&&"subtypeField"in M){const {subtypeField:G,fieldsIndex:X}=M;return(X.get(G)?.name??G)===this.name}return!1}get test(){return{_isSubtypeField:this._isSubtypeField}}get dataType(){const {field:M}=this;return H.isNumericField(M)?aa.Number:H.isStringField(M)?aa.Text:y.isAnyDateField(M)||H.isTimeOnlyField(M)?aa.Date:aa.Unsupported}get dateDataType(){if(this.dataType===aa.Date)return"date"!==this.field.type?
"string":"number"}get description(){const {element:M,feature:G,layer:X,timeZone:C}=this,V=M?.description;return null!=X&&null!=V?P.parseFormTemplateString({label:V,attributes:G.attributes,fieldsIndex:X.fieldsIndex,timeZone:C}):V}get domain(){var {layer:M}=this;const {typeFieldName:G,types:X}=P.getNormalizedFeatureTypeInfo(M);if(this._isSubtypeField&&"subtypes"in M&&M.subtypes)return new B({name:"__internal-type-based-coded-value-domain__",codedValues:M.subtypes.map(({code:V,name:ia})=>new W.CodedValue({code:V,
name:ia}))});if(G===this.name&&null==this.field.domain)return new B({name:"__internal-type-based-coded-value-domain__",codedValues:X.map(({code:V,name:ia})=>new W.CodedValue({code:V,name:ia}))});var {feature:C}=this;M=M?.getFieldDomain(this.name,{feature:C});C=this.element?.domain;return null!=C&&this._isDomainCompatible(C)?C:M}get editable(){return this._layerAndFieldAllowEdits?this.evaluatedEditableExpression??this._configAllowsEdits:!1}get evaluatedRequiredExpression(){const {requiredExpressionExecutor:M}=
this;return null!=M?!!M.lastEvaluatedValue:null}get evaluatedValueExpression(){const {valueExpressionExecutor:M}=this;return null!=M?M.lastEvaluatedValue:null}get hint(){return this.element?.hint}get includeDate(){return!(this.dataType!==aa.Date||"time-only"===this.field.type)}get includeTime(){const {element:M,field:G}=this;if(this.dataType!==aa.Date)return!1;if("time-only"===G.type)return!0;if("date-only"===G.type)return!1;const X="datetime-picker"===M?.input?.type?M.input.includeTime:void 0;return void 0===
X||X}get includeTimeOffset(){if("timestamp-offset"!==this.field.type)return!1;const M=this.element?.input;return M?"datetimeoffset-picker"===M.type&&M.includeTimeOffset:!0}set initialFeature(M){this._set("initialFeature",M);this.notifyChange("valid")}get inputType(){return this.element?.input?.type}get hasInvalidSwitchValue(){var {element:M}=this;M=P.isFieldElementWithInputType(M,"switch")?M.input:null;return!M||P.valueIsInvalidSwitchValue(this.value,M)}get isRelationshipKeyField(){const {field:M,
layer:G}=this;return O.isRelatableFeatureSupportedLayer(G)&&!!G.relationships?.some(X=>X.keyField===M.name)}get label(){const {element:M,feature:G,field:X,layer:C,timeZone:V}=this;return null!=C&&null!=M?.label?P.parseFormTemplateString({label:M.label,attributes:G.attributes,fieldsIndex:C.fieldsIndex,timeZone:V}):M?.label||X.alias||X.name}get maxLength(){if(this.dataType===aa.Date)return-1;const {field:M,element:G}=this,X=M?.length??-1,C=P.isFieldElementWithTextInput(G)?G.input.maxLength:NaN;return null!=
C&&!isNaN(C)&&-1<=C&&(-1===X||C<=X)?C:X}get minLength(){if(this.dataType===aa.Date)return-1;const {field:M,element:G}=this,X=M?.length??-1,C=P.isFieldElementWithTextInput(G)?G.input.minLength:NaN;return null!=C&&!isNaN(C)&&-1<=C&&(-1===X||C<=X)?C:-1}get name(){return this.field?.name}get range(){const {domain:M,element:G,field:X}=this;if("date"===this.dataType)return this._dateRange;var C=I.getDomainRange(X,M)||H.getFieldRange(X,M);const V=C?.max===Number.MAX_VALUE?null:C?.max??null;C=C?.min===-Number.MAX_VALUE?
null:C?.min??null;if(!G?.domain||"range"!==G.domain.type)return{max:V,min:C};const {max:ia,min:oa}=I.getDomainRange(X)||{};return{max:null!=ia&&(null===V||null!=V&&ia<V)?ia:V,min:null!=oa&&(null===C||null!=C&&oa>C)?oa:C}}get required(){const {editable:M,evaluatedRequiredExpression:G,field:X,visible:C,_isSubtypeField:V}=this;return M?!1===X?.nullable||V?!0:C&&null!=G?G:!1:!1}set required(M){this._overrideIfSome("required",M)}get showNoValueOptionEnabled(){const {element:M}=this;return this.required?
!1:P.isFieldElementWithShowNoValueOptionInput(M)?M.input.showNoValueOption:!0}get showNoValueLabel(){const {element:M}=this;return P.isFieldElementWithShowNoValueOptionInput(M)?M.input.noValueOptionLabel:null}get submittable(){const {field:M,required:G,valid:X,value:C}=this;return G&&null==C?!1:X?!0:this.initialFeature.getAttribute(M.name)===C}get timeResolution(){const M=this.element?.input;if(M&&("datetimeoffset-picker"===M.type||"time-picker"===M.type))return M.timeResolution??"minutes"}get timeStep(){return null!=
this.timeResolution?Z.timeResolutionToStepMap.get(this.timeResolution):void 0}get updating(){const {editableExpressionExecutor:M,valueExpressionExecutor:G,visibilityExpressionExecutor:X,preservesValueWhenHidden:C}=this;return null!=G&&G.updating||null!=M&&M.updating||!1===C&&null!=X&&X.updating}get valid(){const M=this.editable?this._validate():null;this._set("error",M);return null===M}get value(){this._fieldInputWasVisibleDuringLifetime=this._fieldInputWasVisibleDuringLifetime||this.visible&&!1!==
this.group?.visible;if(!1===this.preservesValueWhenHidden&&this._fieldInputWasVisibleDuringLifetime&&(!1===this.visibilityExpressionExecutor?.lastEvaluatedValue||!1===this.group?.visibilityExpressionExecutor?.lastEvaluatedValue))return null!==this._storedValue&&this.set("_storedValue",null),null;if(this._shouldUseValueExpression){const M=this.evaluatedValueExpression;return this.dataType===aa.Date?this._arcadeOutputToDateFieldValue(M):null!=M&&"object"===typeof M?M.toString():M}return this._storedValue}set value(M){this.notifyChange("evaluatedVisibilityExpression");
this.set("_storedValue",M)}get visible(){return this._isEditTrackingField?!1:null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element?!0:this._isVisibleByDefault}_arcadeOutputToDateFieldValue(M){const G=this.field.type;try{if("object"===typeof M){if(null!==M){if(Z.isArcadeDate(M))return Z.arcadeDateToFieldValue(M,G);if("getTime"in M&&"function"===typeof M.getTime&&"date"===G)return parseInt(M.getTime(),10);if("date-only"===G||"time-only"===G||"timestamp-offset"===
G)return M.toString()}}else{if("string"===typeof M)return"date"===G?parseInt(M,10):M;if("number"===typeof M&&"date"===G)return M}throw new u("feature-form:invalid-date-value");}catch{return"date"===G?NaN:""}}_isDomainCompatible(M){const {field:G}=this;if("coded-value"===M?.type){const X=typeof M.codedValues[0].code;if("string"===X&&H.isStringField(G)||"number"===X&&H.isNumericField(G))return!0}return"range"===M?.type&&H.isNumericField(G)||y.isAnyDateField(G)||H.isTimeOnlyField(G)?!0:!1}_validate(){const {dataType:M,
domain:G,field:X,initialFeature:C,minLength:V,range:ia,required:oa,valid:ma,value:D}=this,J=oa&&null==D,ea=void 0!==ma;return!J&&C.getAttribute(X.name)===D&&ea?null:J?H.TypeValidationError.INVALID_TYPE:"text"===M&&-1<V&&"string"===typeof D&&D.length<V?P.LengthValidationError.TOO_SHORT:"date"!==M||null==D||Z.dateTimeIsInRange({type:X.type,range:ia,value:D})?G?null!==D||oa?I.validateDomainValue(X,D):null:H.validateFieldValue(X,D):H.NumericRangeValidationError.OUT_OF_RANGE}};q.__decorate([A.property()],
z.prototype,"_dateFormRange",null);q.__decorate([A.property()],z.prototype,"_dateRange",null);q.__decorate([A.property()],z.prototype,"_storedValue",void 0);q.__decorate([A.property()],z.prototype,"_configAllowsEdits",null);q.__decorate([A.property()],z.prototype,"_layerAndFieldAllowEdits",null);q.__decorate([A.property()],z.prototype,"_isVisibleByDefault",null);q.__decorate([A.property()],z.prototype,"_isEditTrackingField",null);q.__decorate([A.property()],z.prototype,"_shouldUseValueExpression",
null);q.__decorate([A.property()],z.prototype,"_isSubtypeField",null);q.__decorate([A.property()],z.prototype,"dataType",null);q.__decorate([A.property()],z.prototype,"dateDataType",null);q.__decorate([A.property()],z.prototype,"description",null);q.__decorate([A.property()],z.prototype,"domain",null);q.__decorate([A.property()],z.prototype,"editable",null);q.__decorate([A.property({readOnly:!0})],z.prototype,"error",void 0);q.__decorate([A.property({constructOnly:!0})],z.prototype,"preservesValueWhenHidden",
void 0);q.__decorate([A.property()],z.prototype,"evaluatedRequiredExpression",null);q.__decorate([A.property()],z.prototype,"evaluatedValueExpression",null);q.__decorate([A.property()],z.prototype,"field",void 0);q.__decorate([A.property()],z.prototype,"group",void 0);q.__decorate([A.property({readOnly:!0})],z.prototype,"hint",null);q.__decorate([A.property()],z.prototype,"includeDate",null);q.__decorate([A.property()],z.prototype,"includeTime",null);q.__decorate([A.property()],z.prototype,"includeTimeOffset",
null);q.__decorate([A.property()],z.prototype,"initialFeature",null);q.__decorate([A.property({readOnly:!0})],z.prototype,"inputType",null);q.__decorate([A.property()],z.prototype,"hasInvalidSwitchValue",null);q.__decorate([A.property()],z.prototype,"isRelationshipKeyField",null);q.__decorate([A.property()],z.prototype,"label",null);q.__decorate([A.property()],z.prototype,"maxLength",null);q.__decorate([A.property()],z.prototype,"minLength",null);q.__decorate([A.property({readOnly:!0})],z.prototype,
"name",null);q.__decorate([A.property()],z.prototype,"range",null);q.__decorate([A.property()],z.prototype,"required",null);q.__decorate([A.property()],z.prototype,"requiredExpressionExecutor",void 0);q.__decorate([A.property()],z.prototype,"showNoValueOptionEnabled",null);q.__decorate([A.property()],z.prototype,"submittable",null);q.__decorate([A.property()],z.prototype,"timeResolution",null);q.__decorate([A.property()],z.prototype,"timeStep",null);q.__decorate([A.property({readOnly:!0})],z.prototype,
"type",void 0);q.__decorate([A.property()],z.prototype,"updating",null);q.__decorate([A.property()],z.prototype,"valid",null);q.__decorate([A.property({value:null})],z.prototype,"value",null);q.__decorate([A.property()],z.prototype,"valueExpressionExecutor",void 0);q.__decorate([A.property()],z.prototype,"visible",null);return z=q.__decorate([L.subclass("esri.widgets.FeatureForm.FieldInput")],z)})},"esri/widgets/FeatureForm/EditableInput":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/layerUtils ./featureFormUtils ./InputBase".split(" "),
function(q,u,v,A,z,Q,w,L,W){v=class extends W{constructor(B){super(B);this.arcadeEditType="NA";this.editableExpressionExecutor=null}get editable(){return this.layerAllowsEdits?this.evaluatedEditableExpression??!0:!1}get evaluatedEditableExpression(){const {editableExpressionExecutor:B}=this;return null!=B?!!B.lastEvaluatedValue:null}get layerAllowsEdits(){var {layer:B}=this;if(!B)return!1;var R=w.getEffectiveLayerCapabilities(B);B=R?.operations.supportsEditing;R=L.capabilitiesAllowEditType(R,this.arcadeEditType);
return!(!B||!R)}};q.__decorate([u.property()],v.prototype,"arcadeEditType",void 0);q.__decorate([u.property()],v.prototype,"editable",null);q.__decorate([u.property()],v.prototype,"editableExpressionExecutor",void 0);q.__decorate([u.property()],v.prototype,"evaluatedEditableExpression",null);q.__decorate([u.property()],v.prototype,"layerAllowsEdits",null);return v=q.__decorate([Q.subclass("esri.widgets.FeatureForm.EditableInput")],v)})},"esri/widgets/FeatureForm/InputBase":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./featureFormUtils".split(" "),
function(q,u,v,A,z,Q,w,L){u=class extends u{constructor(W){super(W);this.visibilityExpressionExecutor=this.type=this.timeZone=this.layer=this.feature=this.element=null}get description(){return L.isInteractiveElement(this.element)?this.element?.description:null}get evaluatedVisibilityExpression(){const {visibilityExpressionExecutor:W}=this;return null!=W?!!W.lastEvaluatedValue:null}get label(){return L.isInteractiveElement(this.element)?this.element?.label:null}get visible(){return null!=this.evaluatedVisibilityExpression?
this.evaluatedVisibilityExpression:null!=this.element}};q.__decorate([v.property({readOnly:!0})],u.prototype,"description",null);q.__decorate([v.property({constructOnly:!0})],u.prototype,"element",void 0);q.__decorate([v.property()],u.prototype,"evaluatedVisibilityExpression",null);q.__decorate([v.property()],u.prototype,"feature",void 0);q.__decorate([v.property()],u.prototype,"label",null);q.__decorate([v.property()],u.prototype,"layer",void 0);q.__decorate([v.property()],u.prototype,"timeZone",
void 0);q.__decorate([v.property()],u.prototype,"type",void 0);q.__decorate([v.property()],u.prototype,"visible",null);q.__decorate([v.property()],u.prototype,"visibilityExpressionExecutor",void 0);return u=q.__decorate([w.subclass("esri.widgets.FeatureForm.InputBase")],u)})},"esri/widgets/FeatureForm/FormExpressionArcadeExecutor":function(){define("exports ../../chunks/tslib.es6 ../../arcade ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../layers/support/fieldUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F){w=Symbol("FormExpressionArcadeExecutor");q.FormExpressionArcadeExecutor=class extends A{constructor(I){super(I);this[E]=!0;this._lastEvaluatedValue=null;this._abortController=new AbortController;this._stale=!1;this._updatingTracking=new R.UpdatingHandles;this._executeAsyncDebounced=z.debounce(async(H,y,O)=>{H=await this.executor.executeAsync(H,{...y,abortSignal:O});if(O.aborted)return this._lastEvaluatedValue;this._lastEvaluatedValue=H;this._stale=!1;return H})}get isAsync(){return this.executor.isAsync}get fieldsUsed(){return this.executor.fieldsUsed}get syntaxTree(){return this.executor.syntaxTree}get updating(){return this._updatingTracking.updating}get stale(){return this._stale}get geometryUsed(){return this.executor.geometryUsed}get variablesUsed(){return this.executor.variablesUsed}get lastEvaluatedValue(){return this._lastEvaluatedValue}abort(){this._abortController.abort()}execute(I,
H){this._abortController=new AbortController;return this._lastEvaluatedValue=I=this.executor.execute(I,{...H,abortSignal:this._abortController.signal})}async executeAsync(I,H){this._abortController=new AbortController;return this._updatingTracking.addPromise(this._executeAsyncDebounced(I,H??{},this._abortController.signal))}markStale(){this._stale=!0}reset(){this.abort();this._lastEvaluatedValue=null;this._stale=!1}};var E=w;u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"_lastEvaluatedValue",
void 0);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"_stale",void 0);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"_updatingTracking",void 0);u.__decorate([Q.property({constructOnly:!0})],q.FormExpressionArcadeExecutor.prototype,"executor",void 0);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"isAsync",null);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"fieldsUsed",null);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,
"syntaxTree",null);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"updating",null);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"stale",null);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"geometryUsed",null);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"variablesUsed",null);u.__decorate([Q.property()],q.FormExpressionArcadeExecutor.prototype,"lastEvaluatedValue",null);q.FormExpressionArcadeExecutor=u.__decorate([B.subclass("esri.widgets.FeatureForm.FormExpressionArcadeExecutor")],
q.FormExpressionArcadeExecutor);q.createFormExpressionArcadeExecutor=async(I,H)=>{const y=v.createArcadeProfile("form-calculation");I=await v.createArcadeExecutor(I,y,{});H?.fieldsIndex&&(I.fieldsUsed=F.fixFields(H.fieldsIndex,I.fieldsUsed));return new q.FormExpressionArcadeExecutor({executor:I})};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/arcade":function(){define("exports ./Graphic ./arcade/ArcadeDate ./arcade/ImmutableArray ./core/Error ./core/lang ./core/sql/DateOnly ./core/sql/TimeOnly ./layers/FeatureLayer ./portal/Portal ./rest/support/FeatureSet ./support/arcadeOnDemand".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F){function E(X,C,V,ia={}){C=C.elementType;const oa="array"===C.type?[{name:"value",type:C.type,elementType:C.elementType}]:"dictionary"===C.type?[{name:"value",type:C.type,properties:C.properties}]:[{name:"value",type:C.type}];return new A(X.map(ma=>{const D={};O(D,oa,{value:ma},V,ia);return D.value}))}function I(X,C,V={}){X=X instanceof R?new W({source:X.features,geometryType:X.geometryType,fields:X.fields,spatialReference:X.spatialReference}):X;return C.constructFeatureSet(X,
V.spatialReference,null,!0,V.lruCache,V.interceptor)}function H(X,C,V={}){const {spatialReference:ia,interceptor:oa,lruCache:ma}=V;return"string"===typeof X?C.createFeatureSetCollectionFromService(X,ia,ma,oa):C.createFeatureSetCollectionFromMap(X,ia,ma,oa)}function y(X,C,V,ia={}){const oa={};O(oa,C.properties,X,V,ia);return new Z.Dictionary(oa)}function O(X,C,V,ia,oa={}){const ma={};for(const D of Object.keys(V))ma[D.toLowerCase()]=V[D];for(const D of C)if(C=D.name.toLowerCase(),oa.variablesPreProcessed)X[C]=
ma[C];else switch(D.type){case "array":V=ma[C];X[C]=null==V?null:E(V,D,ia,oa);break;case "feature":V=ma[C];X[C]=null==V?null:Z.Feature.createFromGraphic(V,oa?.timeZone);break;case "featureSet":V=ma[C];X[C]=null==V?null:ia?I(V,ia,oa):null;break;case "featureSetCollection":V=ma[C];X[C]=null==V?null:ia?H(V,ia,oa):null;break;case "dictionary":V=ma[C];X[C]=null==V?null:y(V,D,ia,oa);break;case "date":V=ma[C];X[C]=V?V instanceof v.ArcadeDate?V:oa?.timeZone?v.ArcadeDate.dateJSAndZoneToArcadeDate(V,oa?.timeZone):
v.ArcadeDate.dateJSToArcadeDate(V):null;break;case "dateOnly":V=ma[C];X[C]=V?V instanceof w.DateOnly?V:w.DateOnly.fromReader(V):null;break;case "time":V=ma[C];X[C]=V?V instanceof L.TimeOnly?V:L.TimeOnly.fromReader(V):null;break;case "geometry":case "boolean":case "text":case "number":X[C]=ma[C]}}function U(X,C){for(const V of X)C.push(V),"dictionary"===V.type&&U(V.properties,C);return C}function P(X,C,V,ia,oa){const {spatialReference:ma,interceptor:D,lruCache:J,console:ea,abortSignal:ba,timeZone:T,
services:Y={portal:B.getDefault()}}=V;oa={vars:{},spatialReference:ma,interceptor:D,timeZone:T,lrucache:J,useAsync:oa,services:Y,console:ea,abortSignal:ba};if(!C)return oa;O(oa.vars,X.variables,C,ia,V);return oa}function S(X,C){switch(C.getArcadeType(X)){case "date":return X.toJSDate();case "time":return X.toString();case "dateOnly":return X.toString();case "feature":var V="geometry"in X?X.geometry():null;X="readAttributes"in X?X.readAttributes():X.attributes;return new u({geometry:V,attributes:X});
case "dictionary":V=X.attributes;const ia={};for(const oa of Object.keys(V))ia[oa]=S(X.field(oa),C);return ia;case "array":return("toArray"in X?X.toArray():X).map(oa=>S(oa,C))}return X}let Z=null;const aa={variables:[{name:"$feature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},{name:"$userInput",type:"geometry"}]},M={variables:[{name:"$feature",type:"feature"},{name:"$aggregatedFeatures",type:"featureSet"}]},
G=new Map([["form-constraint",{variables:[{name:"$feature",type:"feature"}]}],["feature-z",{variables:[{name:"$feature",type:"feature"}]}],["field-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$datastore",type:"featureSetCollection"}]}],["form-calculation",{variables:[{name:"$feature",type:"feature"},{name:"$originalFeature",type:"feature"},{name:"$layer",type:"featureSet"},{name:"$featureSet",type:"featureSet"},{name:"$datastore",type:"featureSetCollection"},{name:"$map",type:"featureSetCollection"},
{name:"$editContext",type:"dictionary",properties:[{name:"editType",type:"text"}]}]}],["labeling",{variables:[{name:"$feature",type:"feature"}]}],["popup",aa],["popup-element",aa],["feature-reduction-popup",M],["feature-reduction-popup-element",M],["visualization",{variables:[{name:"$feature",type:"feature"},{name:"$view",type:"dictionary",properties:[{name:"scale",type:"number"}]}]}]]);q.createArcadeExecutor=async function(X,C,V={}){Z||=await F.loadArcade();const {arcade:ia,arcadeUtils:oa}=Z,{loadScriptDependencies:ma,
referencesMember:D,scriptIsAsync:J}=ia;var ea=U(C.variables,[]),ba=ea.filter(Da=>"featureSet"===Da.type||"featureSetCollection"===Da.type).map(Da=>Da.name.toLowerCase());const T=ia.parseScript(X,ba);if(!T)throw new z("arcade:invalid-script","Unable to create SyntaxTree");X=oa.extractFieldNames(T);const Y=ia.scriptTouchesGeometry(T);ea=ea.map(Da=>Da.name.toLowerCase()).filter(Da=>D(T,Da));const fa=J(T,ba);await ma(T,fa,ba);ba={vars:{},spatialReference:null,useAsync:fa};for(const Da of ea)ba.vars[Da]=
"any";const {lruCache:pa}=V,va=ia.compileScript(T,ba),xa=ia.featureSetUtils(),{services:ya}=V;return{execute:(Da,Ca={})=>{if(fa)throw new z("arcade:invalid-execution-mode","Cannot execute the script in synchronous mode");Da=va(P(C,Da,{lruCache:pa,...Ca},xa,fa));return Ca.rawOutput?Da:S(Da,oa)},executeAsync:async(Da,Ca={})=>{Da=await va(P(C,Da,{lruCache:pa,services:ya,...Ca},xa,fa));return Ca.rawOutput?Da:S(Da,oa)},isAsync:fa,variablesUsed:ea,fieldsUsed:X,geometryUsed:Y,syntaxTree:T}};q.createArcadeProfile=
function(X){var C=G.get(X);if(!C)throw C=Array.from(G.keys()).map(V=>`'${V}'`).join(", "),new z("createArcadeProfile:invalid-profile-name",`Invalid profile name '${X}'. You must specify one of the following values: ${C}`);return Q.clone(C)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ArcadeDate":function(){define(["exports","../core/string","../core/sql/UnknownTimeZone","../chunks/datetime"],function(q,u,v,A){function z(B,R,F){return B<R?B-R:B>F?B-F:0}function Q(B,
R=!0){if(B instanceof A.Zone)return B;if("system"===B.toLowerCase())return"system";if("utc"===B.toLowerCase())return"UTC";if("unknown"===B.toLowerCase())return v.UnknownTimeZone.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(B)){const F=A.FixedOffsetZone.parseSpecifier("UTC"+(B.startsWith("+")||B.startsWith("-")?"":"+")+B);if(F)return F}B=A.IANAZone.create(B);if(!B.isValid){if(R)throw new L(q.ArcadeDateErrorCodes.TimeZoneNotRecognized);return null}return B}q.ArcadeDateErrorCodes=void 0;(q.ArcadeDateErrorCodes||
(q.ArcadeDateErrorCodes={})).TimeZoneNotRecognized="TimeZoneNotRecognized";const w={[q.ArcadeDateErrorCodes.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class L extends Error{constructor(B,R){super(u.replace(w[B],R));this.declaredRootClass="esri.arcade.arcadedate.dateerror";Error.captureStackTrace&&Error.captureStackTrace(this,L)}}class W{constructor(B){this._date=B;this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(B=0,R=1,F=1,E=0,I=0,H=0,y=0,O){if(isNaN(B)||
isNaN(R)||isNaN(F)||isNaN(E)||isNaN(I)||isNaN(H)||isNaN(y))return null;const U=A.DateTime.local(B,R).daysInMonth;B=A.DateTime.fromObject({day:1>F?1:F>U?U:F,year:B,month:1>R?1:12<R?12:R,hour:0>E?0:23<E?23:E,minute:0>I?0:59<I?59:I,second:0>H?0:59<H?59:H,millisecond:0>y?0:999<y?999:y},{zone:Q(O)});B=B.plus({months:z(R,1,12),days:z(F,1,U),hours:z(E,0,23),minutes:z(I,0,59),seconds:z(H,0,59),milliseconds:z(y,0,999)});return new W(B)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??
"system"}static arcadeDateAndZoneToArcadeDate(B,R){R=Q(R);return B.isUnknownTimeZone||R===v.UnknownTimeZone.instance?W.fromParts(B.year,B.monthJS+1,B.day,B.hour,B.minute,B.second,B.millisecond,R):new W(B._date.setZone(R))}static dateJSToArcadeDate(B){return new W(A.DateTime.fromJSDate(B,{zone:"system"}))}static dateJSAndZoneToArcadeDate(B,R="system"){R=Q(R);return new W(A.DateTime.fromJSDate(B,{zone:R}))}static unknownEpochToArcadeDate(B){return new W(A.DateTime.fromMillis(B,{zone:v.UnknownTimeZone.instance}))}static unknownDateJSToArcadeDate(B){return new W(A.DateTime.fromMillis(B.getTime(),
{zone:v.UnknownTimeZone.instance}))}static epochToArcadeDate(B,R="system"){R=Q(R);return new W(A.DateTime.fromMillis(B,{zone:R}))}static dateTimeToArcadeDate(B){return new W(B)}clone(){return new W(this._date)}changeTimeZone(B){B=Q(B);return W.dateTimeToArcadeDate(this._date.setZone(B))}static dateTimeAndZoneToArcadeDate(B,R){R=Q(R);return B.zone===v.UnknownTimeZone.instance||R===v.UnknownTimeZone.instance?W.fromParts(B.year,B.month,B.day,B.hour,B.minute,B.second,B.millisecond,R):new W(B.setZone(R))}static nowToArcadeDate(B){B=
Q(B);return new W(A.DateTime.fromJSDate(new Date,{zone:B}))}static nowUTCToArcadeDate(){return new W(A.DateTime.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===W.systemTimeZoneCanonicalName}equals(B){return this.isSystem&&B.isSystem?this.toNumber()===B.toNumber():this.isUnknownTimeZone!==B.isUnknownTimeZone?!1:this._date.equals(B._date)}get isUnknownTimeZone(){return this._date.zone===v.UnknownTimeZone.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let B=
this._date.weekday;6<B&&(B=0);return B}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";
const B=this.zone;return"fixed"===B.type?0===B.fixed?"UTC":B.formatOffset(0,"short"):B.name}stringify(){return JSON.stringify(this.toJSDate())}plus(B){return new W(this._date.plus(B))}diff(B,R="milliseconds"){return this._date.diff(B._date,R)[R]}toISODate(){return this._date.toISODate()}toISOString(B){return B?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(B,R){return this._date.toISOTime({suppressMilliseconds:B,
includeOffset:R&&!this.isUnknownTimeZone})}toFormat(B,R){this.isUnknownTimeZone&&(B=B.replaceAll("Z",""));return this._date.toFormat(B,R)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new W(this._date.toUTC())}toLocal(){return new W(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(B){if(!B)return null;
B=A.DateTime.fromISO(B,{setZone:!0});return new W(B)}}q.ArcadeDate=W;q.ArcadeDateError=L;q.arcadeDateErrorMessages=w;q.createDateTimeZone=Q;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/arcade/ImmutableArray":function(){define(function(){class q{constructor(u=[]){this._elements=u}length(){return this._elements.length}get(u){return this._elements[u]}toArray(){const u=[];for(let v=0;v<this.length();v++)u.push(this.get(v));return u}}return q})},"esri/core/sql/DateOnly":function(){define(["exports",
"../../arcade/ArcadeDate","../../intl/locale","../../chunks/datetime"],function(q,u,v,A){function z(w){w=w.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");let L="";const W=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const B of w.match(W)||[])switch(B){case "D":L+="d";break;case "DD":L+="dd";break;case "DDD":L+="o";break;case "d":L+="c";break;
case "ddd":L+="ccc";break;case "dddd":L+="cccc";break;case "M":L+="L";break;case "MM":L+="LL";break;case "MMM":L+="LLL";break;case "MMMM":L+="LLLL";break;case "YY":L+="yy";break;case "Y":case "YYYY":L+="yyyy";break;case "Q":L+="q";break;case "X":case "x":L+=B;break;default:L=2<=B.length&&"["===B.slice(0,1)&&"]"===B.slice(-1)?L+`'${B.slice(1,-1)}'`:L+`'${B}'`}return L}class Q{constructor(w,L,W){this._year=w;this._month=L;this._day=W;this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-
1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(w){return w instanceof Q&&w.day===this.day&&w.month===this.month&&w.year===this.year}clone(){return new Q(this._year,this._month,this._day)}toDateTime(w){return A.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:u.createDateTimeZone(w)})}toDateTimeLuxon(w){return A.DateTime.fromObject({day:this.day,month:this.month,year:this.year},{zone:u.createDateTimeZone(w)})}toString(){return`${this.year.toString().padStart(4,
"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(w=null){if(null===w||""===w)return this.toString();w=z(w);if(!w)return"";const L=this.toDateTime("unknown");return u.ArcadeDate.dateTimeToArcadeDate(L).toFormat(w,{locale:v.getLocale(),numberingSystem:"latn"})}toArcadeDate(){const w=this.toDateTime("unknown");return u.ArcadeDate.dateTimeToArcadeDate(w)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+
this.toFormat("yyyy-LL-dd")+"'"}plus(w,L){return Q.fromDateTime(this.toUTCDateTime().plus({[w]:L}))}toUTCDateTime(){return A.DateTime.utc(this.year,this.month,this.day,0,0,0,0)}difference(w,L){switch(L.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(w.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(w.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===L?this.toUTCDateTime().diff(w.toUTCDateTime(),
"months").months:this.toUTCDateTime().diff(w.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(w.toUTCDateTime(),"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(w.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(w.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(w.toUTCDateTime(),
"years").years;default:return this.toUTCDateTime().diff(w.toUTCDateTime(),"milliseconds").milliseconds}}static fromMilliseconds(w){w=A.DateTime.fromMillis(w,{zone:A.FixedOffsetZone.utcInstance});return w.isValid?Q.fromParts(w.year,w.month,w.day):null}static fromSeconds(w){w=A.DateTime.fromSeconds(w,{zone:A.FixedOffsetZone.utcInstance});return w.isValid?Q.fromParts(w.year,w.month,w.day):null}static fromReader(w){if(!w)return null;w=w.split("-");return 3!==w.length?null:new Q(parseInt(w[0],10),parseInt(w[1],
10),parseInt(w[2],10))}static fromParts(w,L,W){w=new Q(w,L,W);return!1===w.isValid?null:w}static fromDateJS(w){return Q.fromParts(w.getFullYear(),w.getMonth()+1,w.getDay())}static fromDateTime(w){return Q.fromParts(w.year,w.month,w.day)}static fromSqlTimeStampOffset(w){return this.fromDateTime(w.toDateTime())}static fromString(w,L=null){if(""===w||null===w)return null;var W=[];if(L)(L=z(L))&&W.push(L);else if(null===L||""===L)return w=A.DateTime.fromISO(w,{setZone:!0}),w.isValid?Q.fromParts(w.year,
w.month,w.day):null;for(const B of W)if(W=A.DateTime.fromFormat(w,L??B),W.isValid)return new Q(W.year,W.month,W.day);return null}static fromNow(w="system"){w=A.DateTime.fromJSDate(new Date).setZone(u.createDateTimeZone(w));return new Q(w.year,w.month,w.day)}}q.DateOnly=Q;q.standardizeDateOnlyFormat=z;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/TimeOnly":function(){define(["exports","../../arcade/kernel","../../intl/locale","../../chunks/datetime"],function(q,u,v,
A){function z(w){if(!w)return"";const L=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let W="";for(const B of w.match(L)||[])switch(B){case "SSS":W+=B;break;case "A":case "a":W+="a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":W+=B;break;default:W+=`'${B}'`}return W}class Q{constructor(w,L,W,B){this._hour=w;this._minute=L;this._second=W;this._millisecond=B;this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(w){return w instanceof
Q&&w.hour===this.hour&&w.minute===this.minute&&w.second===this.second&&w.millisecond===this.millisecond}clone(){return new Q(this.hour,this.minute,this.second,this.millisecond)}isValid(){return u.isInteger(this.hour)&&u.isInteger(this.minute)&&u.isInteger(this.second)&&u.isInteger(this.millisecond)&&0<=this.hour&&24>this.hour&&0<=this.minute&&60>this.minute&&0<=this.second&&60>this.second&&0<=this.millisecond&&1E3>this.millisecond}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,
"0")}:${this.second.toString().padStart(2,"0")}`+(0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${0<this.millisecond?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,
"0")}`}toFormat(w=null){return null===w||""===w?this.toString():(w=z(w))?A.DateTime.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(w,{locale:v.getLocale(),numberingSystem:"latn"}):""}toNumber(){return this.millisecond+1E3*this.second+6E4*this.minute+36E5*this.hour}static fromParts(w,L,W,B){w=new Q(w,L,W,B);return w.isValid()?w:null}static fromReader(w){if(!w)return null;w=w.split(":");return 3!==w.length?null:new Q(parseInt(w[0],10),parseInt(w[1],10),parseInt(w[2],
10),0)}static fromMilliseconds(w){return 864E5<w||0>w?null:new Q(Math.floor(w/36E5%24),Math.floor(w/6E4%60),Math.floor(w/1E3%60),Math.floor(w%1E3))}static fromDateJS(w){return new Q(w.getHours(),w.getMinutes(),w.getSeconds(),w.getMilliseconds())}static fromDateTime(w){return new Q(w.hour,w.minute,w.second,w.millisecond)}static fromSqlTimeStampOffset(w){return this.fromDateTime(w.toDateTime())}static fromString(w,L=null){if(""===w||null===w)return null;const W=[];if(L)(L=z(L))&&W.push(L);else if(null===
L||""===L)W.push("HH:mm:ss"),W.push("HH:mm:ss.SSS"),W.push("hh:mm:ss a"),W.push("hh:mm:ss.SSS a"),W.push("HH:mm"),W.push("hh:mm a"),W.push("H:mm"),W.push("h:mm a"),W.push("H:mm:ss"),W.push("h:mm:ss a"),W.push("H:mm:ss.SSS"),W.push("h:mm:ss.SSS a");for(const B of W)if(L=A.DateTime.fromFormat(w,B),L.isValid)return new Q(L.hour,L.minute,L.second,L.millisecond);return null}plus(w,L){switch(w){case "days":case "years":case "months":return this.clone();case "hours":case "minutes":case "seconds":case "milliseconds":return Q.fromDateTime(this.toUTCDateTime().plus({[w]:L}))}return null}toUTCDateTime(){return A.DateTime.utc(1970,
1,1,this.hour,this.minute,this.second,this.millisecond)}difference(w,L){switch(L.toLowerCase()){case "days":case "day":case "d":return this.toUTCDateTime().diff(w.toUTCDateTime(),"days").days;case "months":case "month":return this.toUTCDateTime().diff(w.toUTCDateTime(),"months").months;case "minutes":case "minute":case "m":return"M"===L?this.toUTCDateTime().diff(w.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(w.toUTCDateTime(),"minutes").minutes;case "seconds":case "second":case "s":return this.toUTCDateTime().diff(w.toUTCDateTime(),
"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return this.toUTCDateTime().diff(w.toUTCDateTime(),"milliseconds").milliseconds;case "hours":case "hour":case "h":return this.toUTCDateTime().diff(w.toUTCDateTime(),"hours").hours;case "years":case "year":case "y":return this.toUTCDateTime().diff(w.toUTCDateTime(),"years").years;default:return this.toUTCDateTime().diff(w.toUTCDateTime(),"milliseconds").milliseconds}}}q.TimeOnly=Q;q.standardizeTimeFormat=z;Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/arcade/kernel":function(){define(["exports","../geometry/Extent"],function(q,u){q.cloneGeometry=function(v){if(null==v)return null;const A=v.clone();void 0!==v.cache._geVersion&&(A.cache._geVersion=v.cache._geVersion);return A};q.convertLinearUnitsToCode=function(v){if(null==v)return null;if("number"===typeof v)return v;v=v.toLowerCase();v=v.replaceAll(/\s/g,"");v=v.replaceAll("-","");switch(v){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":return 9093;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};q.convertSquareUnitsToCode=
function(v){if(null==v)return null;if("number"===typeof v)return v;v=v.toLowerCase();v=v.replaceAll(/\s/g,"");v=v.replaceAll("-","");switch(v){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109439;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};q.isInteger=function(v){return"number"===typeof v&&isFinite(v)&&Math.floor(v)===v};q.sameGeomType=function(v,A){return v===A||"point"===v&&"esriGeometryPoint"===A||"polyline"===v&&"esriGeometryPolyline"===
A||"polygon"===v&&"esriGeometryPolygon"===A||"extent"===v&&"esriGeometryEnvelope"===A||"multipoint"===v&&"esriGeometryMultipoint"===A||"point"===A&&"esriGeometryPoint"===v||"polyline"===A&&"esriGeometryPolyline"===v||"polygon"===A&&"esriGeometryPolygon"===v||"extent"===A&&"esriGeometryEnvelope"===v||"multipoint"===A&&"esriGeometryMultipoint"===v?!0:!1};q.shapeExtent=function(v){if(null==v)return null;switch(v.type){case "polygon":case "multipoint":case "polyline":return v.extent;case "point":return new u({xmin:v.x,
ymin:v.y,xmax:v.x,ymax:v.y,spatialReference:v.spatialReference});case "extent":return v}return null};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureForm/FormExpressionsManager":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/MapUtils ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(q,u,
v,A,z,Q,w,L,W,B){q.FormExpressionsManager=class extends v{constructor(E){super(E);this._fieldReferencesLookup=new Map;this._fieldsAffectedLookup=new Map;this.preserveFieldValuesWhenHidden=!0;this._latestFieldValues={...E.feature.attributes}}initialize(){this._dependencyGraph=this._buildDependencyGraph()}destroy(){this.resetExecutors()}get _baseContext(){const {editType:E,layer:I,map:H,originalFeature:y,spatialReference:O,timeZone:U}=this.arcadeContextInfo,P="feature"===I?.type?I:"scene"===I?.type&&
null!=I.associatedLayer?I.associatedLayer:void 0;return[{$originalfeature:y,$editcontext:{editType:E},$layer:P,$featureset:P,$datastore:I?.url,$map:H},{rawOutput:!0,spatialReference:O??void 0,timeZone:U}]}set feature(E){this._latestFieldValues={...E?.attributes};this._set("feature",E)}evaluateAll(){return this._evaluate(this.executors)}evaluateExpressions(E){return this._evaluate(E)}evaluateInvalidated(E){const {_fieldReferencesLookup:I,_latestFieldValues:H,feature:y}=this,O=new Set;for(const U of E)if(H[U]=
y.getAttribute(U),I.has(U))for(const P of I.get(U))O.add(P);return this._evaluate([...O])}async evaluateInvalidatedByGeometry(){if(this._fieldReferencesLookup.has("#JSAPI_FORM_EXPRESSIONS_MANAGER_GEOMETRY"))return this._evaluate([...this._fieldReferencesLookup.get("#JSAPI_FORM_EXPRESSIONS_MANAGER_GEOMETRY")])}resetExecutors(){for(const E of this.executors)E.reset()}_buildDependencyGraph(){const {_fieldReferencesLookup:E,_fieldsAffectedLookup:I,executors:H,preserveFieldValuesWhenHidden:y}=this,O=new Map(this.fieldInputs.map(S=>
[S.name,S])),U=!1===y,P=new Map(H.map(S=>[S,[]]));for(const S of H){for(const Z of S.fieldsUsed){A.getOrCreateMapValue(E,Z,()=>new Set).add(S);const aa=O.get(Z);[aa?.valueExpressionExecutor,aa?.editableExpressionExecutor,U?aa?.group?.visibilityExpressionExecutor:null,U?aa?.visibilityExpressionExecutor:null].filter(M=>null!=M&&M!==S).forEach(M=>{P.get(M).push(S);A.getOrCreateMapValue(I,M,()=>new Set).add(aa)})}S.geometryUsed&&A.getOrCreateMapValue(E,"#JSAPI_FORM_EXPRESSIONS_MANAGER_GEOMETRY",()=>new Set).add(S)}return P}async _evaluate(E){const I=
new Map,{_dependencyGraph:H,_fieldsAffectedLookup:y,_latestFieldValues:O}=this;for(const U of E)R(U,I,H);for(const [U,{resolver:P,dependencyPromises:S}]of I)Promise.all(S).then(async()=>{const [Z,aa]=this._makeContext(O);return U.executeAsync(Z,aa)}).then(()=>{if(y.has(U))for(const Z of y.get(U))this._latestFieldValues[Z.name]=Z.value;P.resolve()},Z=>{!Z||z.isAbortError(Z)||F(Z)||U.markStale();P.reject(Z)});E=(await Promise.allSettled(Array.from(I.values(),({resolver:U})=>U.promise))).filter(U=>"rejected"===
U.status&&!(z.isAbortError(U.reason)||F(U.reason)));if(0<E.length)throw new AggregateError(E,"One or more expression executions failed");}_makeContext(E){const [I,H]=this._baseContext,y=this.feature.clone();y.attributes=E;return[{...I,$feature:y},H]}};u.__decorate([Q.property()],q.FormExpressionsManager.prototype,"_baseContext",null);u.__decorate([Q.property()],q.FormExpressionsManager.prototype,"feature",null);u.__decorate([Q.property({constructOnly:!0})],q.FormExpressionsManager.prototype,"preserveFieldValuesWhenHidden",
void 0);u.__decorate([Q.property()],q.FormExpressionsManager.prototype,"executors",void 0);u.__decorate([Q.property()],q.FormExpressionsManager.prototype,"fieldInputs",void 0);u.__decorate([Q.property()],q.FormExpressionsManager.prototype,"arcadeContextInfo",void 0);q.FormExpressionsManager=u.__decorate([B.subclass("esri.widgets.FeatureForm.FormExpressionsManager")],q.FormExpressionsManager);const R=(E,I,H)=>{if(!I.has(E)){var y=z.createResolver();I.set(E,{resolver:y,dependencyPromises:[]});E.abort();
E=H.get(E);for(const O of E)R(O,I,H),I.get(O).dependencyPromises.push(y.promise)}},F=E=>E&&"object"===typeof E&&"message"in E&&"Cancelled"===E.message;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureForm/GroupInput":function(){define("../../chunks/tslib.es6 ../../core/deprecate ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./featureFormUtils ./InputBase".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){Q=class extends B{constructor(R){super(R);this._expressionTrackingHandles=new Map;this.type="group"}initialize(){this.addHandles([A.watch(()=>[this.visible,this.inputs],([R])=>{const {inputs:F}=this;R=R?void 0:!1;for(const E of F)W.isFieldInput(E)&&(E.required=R)},{initial:!0,equals:(R,F)=>F[0]===R[0]&&F[1]===R[1]})])}destroy(){for(const R of this._expressionTrackingHandles.values())R.remove()}get initialState(){return this.element.initialState||"expanded"}get inputs(){return this._get("inputs")}set inputs(R){this.removeAllHandles();
R&&this.addHandles(R.map(F=>A.watch(()=>F.visible,()=>this._dirtyEvaluatedVisibilityExpression())));this._set("inputs",R)}get label(){return this.element.label}set label(R){const {element:F}=this;F&&(F.label=R)}get open(){return"expanded"===this.initialState}set open(R){this._override("open",R)}get state(){u.deprecatedProperty(v.getLogger(this),"state",{replacement:"open",version:"4.28",warnOnce:!0});return this.open?"expanded":"collapsed"}set state(R){u.deprecatedProperty(v.getLogger(this),"state",
{replacement:"open",version:"4.28",warnOnce:!0});this.open="expanded"===R}get visible(){return!1!==this.evaluatedVisibilityExpression&&this.inputs&&this.inputs.some(R=>R.visible)}_dirtyEvaluatedVisibilityExpression(){const {element:R}=this;R.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};q.__decorate([z.property()],Q.prototype,"initialState",null);q.__decorate([z.property()],Q.prototype,"inputs",null);q.__decorate([z.property()],Q.prototype,"label",null);q.__decorate([z.property()],
Q.prototype,"open",null);q.__decorate([z.property()],Q.prototype,"type",void 0);q.__decorate([z.property()],Q.prototype,"visible",null);return Q=q.__decorate([L.subclass("esri.widgets.FeatureForm.GroupInput")],Q)})},"esri/widgets/FeatureForm/RelationshipInput":function(){define("../../chunks/tslib.es6 ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/layerUtils ../Feature/FeatureRelationship/FeatureRelationshipViewModel ../Feature/support/featureUtils ./EditableInput ./featureFormUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F){A=class extends R{constructor(E){super(E);this.group=this._relationshipVM=null;this.type="relationship";this.addHandles([u.watch(()=>({feature:this.feature,element:this.element,layer:this.layer}),I=>this._createRelationshipVM(I),u.initial)])}destroy(){this._relationshipVM?.destroy()}get canAddRelatedFeature(){const {editable:E,featureCount:I,relationship:H}=this;if(!H||!this.loaded||!this.relatedLayerAllowsAdds)return!1;const {cardinality:y,role:O}=H;return"one-to-one"===
y&&0<I||"many-to-many"===y||"one-to-many"===y&&"destination"===O&&0<I?!1:E}get displayCount(){return this.element.displayCount??3}get displayType(){return this.element.displayType}get editable(){return this.relatedLayerAllowsEdits?this.evaluatedEditableExpression??!0:!1}get featureCount(){return this._relationshipVM?.featureCount??0}get loaded(){return"loading"!==this._relationshipVM?.state}get map(){return this._get("map")}set map(E){E&&this._relationshipVM?.set("map",E);this._set("map",E)}get orderByFields(){return this.element.orderByFields}get originHasValidKey(){return!(!this.relationship||
!this.feature.getAttribute(this.relationship.keyField))}get relationship(){return this._relationshipVM?.relationship}get relationshipId(){return this.element.relationshipId}get relatedFeatureInfos(){const {_relationshipVM:E,timeZone:I}=this;if(!E?.relatedFeatures?.length||!E?.relatedLayer)return[];const {itemDescriptionFieldName:H,relatedFeatures:y,relatedLayer:O}=E,U=O&&"formTemplate"in O&&O.formTemplate?O.formTemplate.title:void 0;return y.map(P=>{let S=void 0;if(H){var Z=P.getAttribute(H);const aa=
O.fieldsIndex.get(H);aa&&(Z=F.getComputedAttributes({values:[Z],fields:[aa],timeZone:I??void 0})[H],null!=Z&&(S=Z.toString()))}Z=U?F.parseFormTemplateString({label:U,attributes:P.attributes,fieldsIndex:O.fieldsIndex,timeZone:I}):void 0;return{feature:P,description:S,title:Z}}).toArray()}get relatedLayer(){return this._relationshipVM?.relatedLayer}get relatedLayerIsTable(){return!!this.relatedLayer?.isTable}get relatedLayerAllowsAdds(){const {relatedLayer:E}=this;return E&&this.relatedLayerAllowsEdits?
!!L.getEffectiveLayerCapabilities(E)?.operations?.supportsAdd:!1}get relatedLayerAllowsEdits(){const {relatedLayer:E}=this;return E?!!L.getEffectiveLayerCapabilities(E)?.operations?.supportsEditing:!1}get showAllEnabled(){return this._get("showAllEnabled")}set showAllEnabled(E){this._relationshipVM?.set("showAllEnabled",E);this._set("showAllEnabled",E)}get showAllActionVisible(){return!this.showAllEnabled&&0<this.featureCount&&this.featureCount>this.displayCount}get visible(){var {relationship:E}=
this;if(!E)return!1;({cardinality:E}=E);return"many-to-many"===E?!1:null!=this.evaluatedVisibilityExpression?this.evaluatedVisibilityExpression:null!=this.element}get updating(){return"loading"===this._relationshipVM?.state||"querying"===this._relationshipVM?.state}incrementPage(){this._relationshipVM&&this._relationshipVM.featurePage++}getRelatedFeatureByObjectId(E){return this._relationshipVM?.getRelatedFeatureByObjectId(E)}_createRelationshipVM(E){const {feature:I,element:H,layer:y}=E;this._relationshipVM?.destroy();
if(I&&H&&y){var {displayCount:O,map:U,orderByFields:P,relationshipId:S,showAllEnabled:Z}=this;B.isRelatableFeatureSupportedLayer(y)&&(this._relationshipVM=new W({graphic:I,displayCount:O,layer:y,map:U,orderByFields:P,relationshipId:S,showAllEnabled:Z}))}}};q.__decorate([v.property()],A.prototype,"_relationshipVM",void 0);q.__decorate([v.property()],A.prototype,"canAddRelatedFeature",null);q.__decorate([v.property()],A.prototype,"displayCount",null);q.__decorate([v.property()],A.prototype,"displayType",
null);q.__decorate([v.property()],A.prototype,"editable",null);q.__decorate([v.property()],A.prototype,"featureCount",null);q.__decorate([v.property()],A.prototype,"group",void 0);q.__decorate([v.property()],A.prototype,"loaded",null);q.__decorate([v.property()],A.prototype,"map",null);q.__decorate([v.property()],A.prototype,"orderByFields",null);q.__decorate([v.property()],A.prototype,"originHasValidKey",null);q.__decorate([v.property()],A.prototype,"relationship",null);q.__decorate([v.property()],
A.prototype,"relationshipId",null);q.__decorate([v.property()],A.prototype,"relatedFeatureInfos",null);q.__decorate([v.property()],A.prototype,"relatedLayer",null);q.__decorate([v.property()],A.prototype,"relatedLayerIsTable",null);q.__decorate([v.property()],A.prototype,"relatedLayerAllowsAdds",null);q.__decorate([v.property()],A.prototype,"relatedLayerAllowsEdits",null);q.__decorate([v.property()],A.prototype,"showAllEnabled",null);q.__decorate([v.property()],A.prototype,"showAllActionVisible",
null);q.__decorate([v.property({readOnly:!0})],A.prototype,"type",void 0);q.__decorate([v.property()],A.prototype,"visible",null);q.__decorate([v.property()],A.prototype,"updating",null);return A=q.__decorate([w.subclass("esri.widgets.FeatureForm.RelationshipInput")],A)})},"esri/widgets/Feature/FeatureRelationship/FeatureRelationshipViewModel":function(){define("../../../chunks/tslib.es6 ../../../Graphic ../../../core/Accessor ../../../core/arrayUtils ../../../core/Clonable ../../../core/Collection ../../../core/Identifiable ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../../rest/support/RelationshipQuery ../support/featureUtils ../../FeatureForm/featureFormUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y){v=class extends z.ClonableMixin(w.IdentifiableMixin(v)){constructor(O){super(O);this._loaded=!1;this._queryFeatureCountAbortController=this._queryPageAbortController=this._queryAbortController=null;this.featuresPerPage=10;this.orderByFields=this.map=this.layer=this.graphic=this.description=null;this.featureCount=0;this.relationshipId=null;this.showAllEnabled=!1;this.title=null;this._cancelQuery=()=>{const {_queryAbortController:U}=this;U&&U.abort();this._queryAbortController=
null};this._cancelQueryFeatureCount=()=>{const {_queryFeatureCountAbortController:U}=this;U&&U.abort();this._queryFeatureCountAbortController=null};this._cancelQueryPage=()=>{const {_queryPageAbortController:U}=this;U&&U.abort();this._queryPageAbortController=null};this._queryController=async()=>{this._cancelQuery();const U=new AbortController;this._queryAbortController=U;await L.ignoreAbortErrors(this._query());this._queryAbortController===U&&(this._queryAbortController=null)};this._queryFeatureCountController=
async()=>{this._loaded=!1;this._cancelQueryFeatureCount();const U=new AbortController;this._queryFeatureCountAbortController=U;await L.ignoreAbortErrors(this._queryFeatureCount());this._queryFeatureCountAbortController===U&&(this._queryFeatureCountAbortController=null);this._loaded=!0};this._queryPageController=async()=>{const U=new AbortController;this._queryPageAbortController=U;await L.ignoreAbortErrors(this._queryPage());this._queryPageAbortController===U&&(this._queryPageAbortController=null)};
this._queryDebounced=L.debounce(this._queryController,100);this._queryFeatureCountDebounced=L.debounce(this._queryFeatureCountController,100);this._queryPageDebounced=L.debounce(this._queryPageController,100);this._query=async()=>{const {_queryAbortController:U,relatedFeatures:P}=this;this.featureCount&&(this._destroyRelatedFeatureViewModels(),this.featurePage=1,P.removeAll(),this.destroyed||P.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:U?.signal}))))};this.addHandles([W.watch(()=>
[this.displayCount,this.graphic,this.layer,this.layer?.loaded,this.map,this.orderByFields,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryDebounced(),W.initial),W.watch(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageDebounced()),W.watch(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountDebounced())])}destroy(){this._destroyRelatedFeatureViewModels();this.relatedFeatures.removeAll();
this._cancelQuery();this._cancelQueryFeatureCount();this._cancelQueryPage()}set featurePage(O){const {featuresPerPage:U,featureCount:P}=this;this._set("featurePage",Math.min(Math.max(O,1),Math.ceil(P/U)||1))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const {orderByFields:O,relatedLayer:U}=this;return O&&U?.loaded?O.map(P=>{const S=P.clone();S.field=H.getFixedFieldName(P.field,U);return S}):O??[]}get supportsCacheHint(){return!!this.layer?.capabilities?.queryRelated?.supportsCacheHint}get canLoad(){return!!this.map&&
"number"===typeof this.relationshipId&&"number"===typeof this.objectId}get canQuery(){const O=this.layer?.capabilities?.queryRelated;return!!this.relatedLayer&&!!this.relationship&&"number"===typeof this.relationshipId&&"number"===typeof this.objectId&&!!O?.supportsCount&&!!O?.supportsPagination}get itemDescriptionFieldName(){return this.orderByFieldsFixedCasing[0]?.field||null}set displayCount(O){this._set("displayCount",Math.min(Math.max(O,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){return(this.objectIdField&&
this.graphic?.attributes?.[this.objectIdField])??null}get objectIdField(){return this.layer?.objectIdField||null}get relatedFeatures(){return this._get("relatedFeatures")||new Q}get relatedLayer(){const {layer:O,map:U,relationship:P}=this;return O?.loaded&&U&&P?H.findRelatedLayer(U,O,P)??null:null}get relationship(){const {relationshipId:O,layer:U}=this;return"number"===typeof O?U?.relationships?.find(({id:P})=>P===O)??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||
new Q}get state(){const {_queryAbortController:O,_queryFeatureCountAbortController:U,_queryPageAbortController:P,canQuery:S,_loaded:Z,canLoad:aa}=this;return U||aa&&!Z?"loading":O||P?"querying":S?"ready":"disabled"}getRelatedFeatureByObjectId(O){return this.relatedFeatures.find(U=>U.getObjectId()===O)}_destroyRelatedFeatureViewModels(){this.relatedFeatureViewModels?.forEach(O=>!O.destroyed&&O.destroy());this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const {layer:O,relatedLayer:U,
relationshipId:P,objectId:S,_queryFeatureCountAbortController:Z,canQuery:aa,supportsCacheHint:M}=this;await O?.load();await U?.load();if(aa&&O&&U){var G=U.createQuery();G=new I({cacheHint:M,relationshipId:P,returnGeometry:!1,objectIds:[S],where:G.where??void 0});G=await O.queryRelatedFeaturesCount(G,{signal:Z?.signal});this._set("featureCount",G[S]||0)}else this._set("featureCount",0)}_sliceFeatures(O){const {showAllEnabled:U,displayCount:P}=this;return U?O:P?O.slice(0,P):[]}async _queryPage(){const {relatedFeatures:O,
featurePage:U,showAllEnabled:P,_queryPageAbortController:S,featureCount:Z}=this;!P||2>U||!Z||O.addMany(await this._queryRelatedFeatures({signal:S?.signal}))}async _queryRelatedFeatures(O){const {orderByFieldsFixedCasing:U,showAllEnabled:P,featuresPerPage:S,displayCount:Z,layer:aa,relationshipId:M,featurePage:G,featureCount:X,relatedLayer:C,supportsCacheHint:V}=this,{canQuery:ia,objectId:oa}=this;if(!ia||!aa||!C)return[];var ma=P?((G-1)*S+X)%X:0;const D=P?S:Z;var J=C.objectIdField;J=[...U.map(T=>T.field),
...y.getFieldsInTitleAndDesc(C),J].filter(A.isSome);const ea=U.map(T=>`${T.field} ${T.order}`),ba=C.createQuery();ma=new I({orderByFields:ea,start:ma,num:D,outFields:J,cacheHint:V,relationshipId:M,returnGeometry:!1,objectIds:[oa],where:ba.where??void 0});O=(await aa.queryRelatedFeatures(ma,{signal:O?.signal}))[oa]?.features||[];O.forEach(T=>{T.sourceLayer=C;T.layer=C});return O}};q.__decorate([B.property()],v.prototype,"_loaded",void 0);q.__decorate([B.property()],v.prototype,"_queryAbortController",
void 0);q.__decorate([B.property()],v.prototype,"_queryPageAbortController",void 0);q.__decorate([B.property()],v.prototype,"_queryFeatureCountAbortController",void 0);q.__decorate([B.property({value:1})],v.prototype,"featurePage",null);q.__decorate([B.property()],v.prototype,"featuresPerPage",void 0);q.__decorate([B.property({readOnly:!0})],v.prototype,"orderByFieldsFixedCasing",null);q.__decorate([B.property({readOnly:!0})],v.prototype,"supportsCacheHint",null);q.__decorate([B.property({readOnly:!0})],
v.prototype,"canLoad",null);q.__decorate([B.property({readOnly:!0})],v.prototype,"canQuery",null);q.__decorate([B.property()],v.prototype,"description",void 0);q.__decorate([B.property({readOnly:!0})],v.prototype,"itemDescriptionFieldName",null);q.__decorate([B.property({value:3})],v.prototype,"displayCount",null);q.__decorate([B.property({type:u})],v.prototype,"graphic",void 0);q.__decorate([B.property()],v.prototype,"layer",void 0);q.__decorate([B.property()],v.prototype,"map",void 0);q.__decorate([B.property({readOnly:!0})],
v.prototype,"objectId",null);q.__decorate([B.property({readOnly:!0})],v.prototype,"objectIdField",null);q.__decorate([B.property()],v.prototype,"orderByFields",void 0);q.__decorate([B.property({readOnly:!0})],v.prototype,"relatedFeatures",null);q.__decorate([B.property({readOnly:!0})],v.prototype,"relatedLayer",null);q.__decorate([B.property({readOnly:!0})],v.prototype,"relationship",null);q.__decorate([B.property()],v.prototype,"featureCount",void 0);q.__decorate([B.property({readOnly:!0})],v.prototype,
"relatedFeatureViewModels",null);q.__decorate([B.property()],v.prototype,"relationshipId",void 0);q.__decorate([B.property()],v.prototype,"showAllEnabled",void 0);q.__decorate([B.property()],v.prototype,"state",null);q.__decorate([B.property()],v.prototype,"title",void 0);q.__decorate([B.property()],v.prototype,"getRelatedFeatureByObjectId",null);return v=q.__decorate([E.subclass("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],v)})},"esri/widgets/support/Heading":function(){define(["exports",
"../../core/mathUtils","./globalCss","./widgetUtils","./jsxFactory"],function(q,u,v,A,z){q.Heading=function({level:Q,class:w,...L},W){Q=u.clamp(Math.ceil(Q),1,6);return z.tsx(`h${Q}`,{...L,"aria-level":String(Q),class:A.classes(v.globalCss.heading,w),role:"heading"},W)};q.incrementHeadingLevel=function(Q,w=1){return u.clamp(Math.ceil(Q+w),1,6)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureTemplates":function(){define("require ../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/support/layerUtils ./Widget ./FeatureForm/featureFormUtils ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList ./FeatureTemplates/TemplateItem ./FeatureTemplates/VisibleElements ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z){function aa(M){return M.id}z=class extends B{constructor(M,G){super(M,G);this.enableListScroll=!0;this.filterText="";this.headingLevel=4;this.messagesCommon=this.messages=null;this.selectionMode="none";this.viewModel=new F;this.visibleElements=new H;this.renderCustomItem=X=>null;this.renderCustomGroupContent=X=>null;this.renderItemLabel=()=>null;this.renderItemDescription=()=>null;this.renderItemContent=X=>null;this.renderItemContentEnd=X=>null;
this._iconIntersectionObserver=new IntersectionObserver((X,C)=>{X.forEach(async V=>{if(V.isIntersecting){const ma=V.target;if(ma?.["data-has-icon"])C.unobserve(ma);else{var {layer:ia,template:oa}=ma?.["data-item"];ma&&(ma["data-has-icon"]=!0);V=await I.fetchThumbnail(ia,oa).catch(()=>{ma&&(ma["data-has-icon"]=!1);return null});null!=V&&ma.appendChild(V)}}})});this._renderItemIcon=X=>W.isTable(X.layer)?Z.tsx("span",{"data-has-icon":!0,"data-item":X,key:"icon"},Z.tsx("calcite-icon",{icon:"table"})):
Z.tsx("span",{afterCreate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,afterUpdate:this._afterItemCreateOrUpdate,"data-has-icon":!1,"data-item":X,key:"icon"});this._afterItemCreateOrUpdate=X=>{this._iconIntersectionObserver?.observe(X)};this._afterItemRemoved=X=>{this._iconIntersectionObserver?.unobserve(X)}}initialize(){const M=({label:G})=>!this.filterText||!!G?.toLowerCase().includes(this.filterText.toLowerCase());this.addHandles(v.watch(()=>this.viewModel,(G,X)=>{G&&!G.filterFunction&&
(this.filterFunction=M);X&&X!==G&&X.filterFunction===M&&(X.filterFunction=null)},v.initial))}destroy(){this._iconIntersectionObserver?.disconnect();this._iconIntersectionObserver=null}loadDependencies(){return y.loadCalciteComponents({icon:()=>new Promise((M,G)=>q(["../chunks/calcite-icon"],M,G)),loader:()=>new Promise((M,G)=>q(["../chunks/calcite-loader"],M,G)),input:()=>new Promise((M,G)=>q(["../chunks/calcite-input"],M,G)),list:()=>new Promise((M,G)=>q(["../chunks/calcite-list"],M,G)),"list-item":()=>
new Promise((M,G)=>q(["../chunks/calcite-list-item"],M,G)),notice:()=>new Promise((M,G)=>q(["../chunks/calcite-notice"],M,G))})}get disabled(){return this.viewModel.disabled}set disabled(M){this.viewModel.disabled=M}get filterFunction(){return this.viewModel.filterFunction}set filterFunction(M){this.viewModel.filterFunction=M}get groupBy(){return this.viewModel.groupBy}set groupBy(M){this.viewModel.groupBy=M}get label(){return this.messages?.widgetLabel??""}set label(M){this._overrideIfSome("label",
M)}get layers(){return this.viewModel.layers}set layers(M){this.viewModel.layers=M}get selectedItem(){return this.viewModel.selectedItem}select(M,G){return this.viewModel.select(M,G)}render(){const {disabled:M,enableListScroll:G,filterText:X,headingLevel:C,messages:V,viewModel:{items:ia,numberOfFeatureTemplates:oa,selectedItem:ma,state:D}}=this,J=this.visibleElements.filter&&1<oa;if(0<ia.length&&R.isTemplateItemGroup(ia[0])){const ea=ia.find(ba=>ba.label===F.nullGroupBy.label);ea&&(ea.label=V.other)}return Z.tsx("div",
{"aria-label":V.widgetLabel,class:this.classes("esri-feature-templates",O.globalCss.widget)},"loading"===D?Z.tsx("calcite-loader",{key:"loader",label:this.messagesCommon.loading,type:"indeterminate"}):"ready"===D?Z.tsx(E.ItemList,{disabled:M,enableListScroll:G,filterEnabled:J,filterText:X,headingLevel:C,id:this.id,identify:aa,items:ia,messages:{filterPlaceholder:V.filterPlaceholder,noItems:V.noItems,noMatches:V.noMatches},renderCustomGroupContent:this.renderCustomGroupContent,renderCustomItem:this.renderCustomItem,
renderIcon:this._renderItemIcon,renderItemContent:this.renderItemContent,renderItemContentEnd:this.renderItemContentEnd,renderItemDescription:this.renderItemDescription,renderItemLabel:this.renderItemLabel,selectedItem:ma??void 0,selectionMode:this.selectionMode??void 0,onFilterChange:ea=>{this.filterText=ea;this.viewModel.refresh()},onItemSelect:ea=>!R.isTemplateItemGroup(ea)&&this.viewModel.select(ea)}):null)}};u.__decorate([A.property()],z.prototype,"disabled",null);u.__decorate([A.property()],
z.prototype,"enableListScroll",void 0);u.__decorate([A.property()],z.prototype,"filterFunction",null);u.__decorate([A.property()],z.prototype,"filterText",void 0);u.__decorate([A.property()],z.prototype,"groupBy",null);u.__decorate([A.property()],z.prototype,"headingLevel",void 0);u.__decorate([A.property()],z.prototype,"label",null);u.__decorate([A.property()],z.prototype,"layers",null);u.__decorate([A.property(),P.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],z.prototype,
"messages",void 0);u.__decorate([A.property(),P.messageBundle("esri/t9n/common")],z.prototype,"messagesCommon",void 0);u.__decorate([A.property({readOnly:!0})],z.prototype,"selectedItem",null);u.__decorate([A.property()],z.prototype,"selectionMode",void 0);u.__decorate([A.property(),S.vmEvent("select")],z.prototype,"viewModel",void 0);u.__decorate([A.property({type:H,nonNullable:!0})],z.prototype,"visibleElements",void 0);u.__decorate([A.property()],z.prototype,"renderCustomItem",void 0);u.__decorate([A.property()],
z.prototype,"renderCustomGroupContent",void 0);u.__decorate([A.property()],z.prototype,"renderItemLabel",void 0);u.__decorate([A.property()],z.prototype,"renderItemDescription",void 0);u.__decorate([A.property()],z.prototype,"renderItemContent",void 0);u.__decorate([A.property()],z.prototype,"renderItemContentEnd",void 0);return z=u.__decorate([L.subclass("esri.widgets.FeatureTemplates")],z)})},"esri/widgets/FeatureTemplates/FeatureTemplatesViewModel":function(){define("../../chunks/tslib.es6 ../../core/Evented ../../core/ObjectPool ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/layerUtils ./TemplateItem ./TemplateItemGroup ../support/templateUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E){var I;const H=({layer:O})=>({key:O,label:O.title??""}),y=({layer:O})=>({key:O.geometryType,label:O.geometryType??""});u=I=class extends u.EventedAccessor{constructor(O){super(O);this._groupPool=new v(F);this._itemPool=new v(R);this.disabled=!1;this.selectedItem=this.filterFunction=this.disabledItemFunction=null}initialize(){this._get("groupBy")||(this.groupBy="layer")}get _featureTemplatesByLayer(){if(!this.layers)return new Map;const O=new Map;for(const U of this.layers)if("subtype-group"===
U.type)for(const P of U.sublayers)O.set(P,E.getAllTemplatesForLayer(P));else O.set(U,E.getAllTemplatesForLayer(U));return O}set groupBy(O){this._set("groupBy",O);if("function"===typeof O)this._groupByFunction=U=>this._ensureGroupByObject(O(U));else switch(O){case "layer":this._groupByFunction=H;break;case "geometry":this._groupByFunction=y;break;default:this._groupByFunction=null}}set layers(O){this.removeHandles("layers");if(O){const U=()=>this.notifyChange("state");this.addHandles(O.map(P=>A.when(()=>
P.loadStatus,U)),"layers")}this._set("layers",O)}get layers(){return this._get("layers")}get state(){const {layers:O}=this;return O&&0!==O.length?O.some(U=>"loading"===U.loadStatus||"not-loaded"===U.loadStatus)?"loading":"ready":"disabled"}get numberOfFeatureTemplates(){return Array.from(this._featureTemplatesByLayer.values()).reduce((O,U)=>O+U.length,0)}get items(){if(0===this.numberOfFeatureTemplates)return this._releasePreviousItems(),[];var O=this._featureTemplatesByLayer,U=[],P=null!=this.filterFunction?
this.filterFunction:I._nullFilterFunction;for(const [aa,M]of O)if(aa.loaded||"subtype-sublayer"===aa.type&&aa.parent?.loaded)if(O=B.getEffectiveLayerCapabilities(aa)?.operations,O?.supportsEditing&&O?.supportsAdd)for(var S of M)U.push({layer:aa,template:S,matchesFilter:P({label:S.name})});if(null==this._groupByFunction)return P=U.filter(({matchesFilter:aa})=>aa).map(({template:aa,layer:M})=>this._createItem(aa,M)),this._releasePreviousItems(),P;S=new Map;for(var Z of U){const {template:aa,layer:M}=
Z;U=this._groupByFunction({template:aa,layer:M});const {key:G,label:X}=null!=U.key?U:I.nullGroupBy;S.has(G)||S.set(G,{label:X,templateItemInfos:[]});S.get(G)?.templateItemInfos.push(Z)}Z=[];for(const aa of S.values()){const {label:M,templateItemInfos:G}=aa;U=G.filter(({matchesFilter:X})=>X);U=P({label:M})?G:0<G.length?U:[];0<U.length&&(U=U.map(({template:X,layer:C})=>this._createItem(X,C)),Z.push(this._createGroup(M,U)))}if(1===Z.length&&Z[0].label===I.nullGroupBy.label)return this._releasePreviousItems(),
Z[0].items;this._releasePreviousItems();return Z}refresh(){this.notifyChange("items")}select(O,{emit:U=!0}={}){const P=this.selectedItem;O=O?.clone()||null;this._set("selectedItem",O);U&&this.emit("select",{item:O,oldItem:P,template:O?.template??null})}_createItem(O,U){const P=this._itemPool.acquire(),S=this.disabledItemFunction?.({template:O,layer:U})??!1;P.set({disabled:S,layer:U,template:O});return P}_createGroup(O,U){const P=this._groupPool.acquire();P.set("label",O);P.items=U;return P}_releasePreviousItems(){this._destroyItems(this._get("items"))}_destroyItems(O){O&&
(O[0]instanceof R?O.forEach(U=>this._destroyItem(U)):O.forEach(U=>this._destroyGroup(U)))}_destroyGroup(O){O.items.forEach(U=>this._destroyItem(U));O.items.length=0;this._groupPool.release(O)}_destroyItem(O){O.layer=null;O.template=null;this._itemPool.release(O)}_ensureGroupByObject(O){return"string"===typeof O?{key:O,label:O}:O}};u.nullGroupBy={key:Symbol(),label:"Other\u200b"};u._nullFilterFunction=O=>!0;q.__decorate([z.property()],u.prototype,"_featureTemplatesByLayer",null);q.__decorate([z.property()],
u.prototype,"_groupByFunction",void 0);q.__decorate([z.property()],u.prototype,"disabled",void 0);q.__decorate([z.property()],u.prototype,"disabledItemFunction",void 0);q.__decorate([z.property()],u.prototype,"filterFunction",void 0);q.__decorate([z.property()],u.prototype,"groupBy",null);q.__decorate([z.property()],u.prototype,"layers",null);q.__decorate([z.property()],u.prototype,"state",null);q.__decorate([z.property({readOnly:!0})],u.prototype,"numberOfFeatureTemplates",null);q.__decorate([z.property({readOnly:!0})],
u.prototype,"items",null);q.__decorate([z.property({readOnly:!0})],u.prototype,"selectedItem",void 0);return u=I=q.__decorate([W.subclass("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],u)})},"esri/widgets/FeatureTemplates/TemplateItem":function(){define("require ../../chunks/tslib.es6 ../../Graphic ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../symbols/support/symbolUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R){async function F(y,O){var {renderer:U}=y;return U&&(O=new v({attributes:O.prototype.attributes}),U=await U.getSymbolAsync(O))?U:E(y)}async function E(y){({geometryType:y}=y);return(y="point"===y||"multipoint"===y?await new Promise((O,U)=>q(["../../symbols/SimpleMarkerSymbol"],P=>O(I(P)),U)):"polyline"===y?await new Promise((O,U)=>q(["../../symbols/SimpleLineSymbol"],P=>O(I(P)),U)):"polygon"===y||"mesh"===y||"multipatch"===y?await new Promise((O,U)=>q(["../../symbols/SimpleFillSymbol"],
P=>O(I(P)),U)):null)?new y.default:null}const I=y=>Object.freeze(Object.defineProperty({__proto__:null,default:y},Symbol.toStringTag,{value:"Module"}));var H;A=H=class extends A{constructor(y){super(y);this._activeFetchInfo={id:null,request:null};this.disabled=!1;this.thumbnail=this.template=this.layer=null}initialize(){this.addHandles(z.watch(()=>{const {layer:y}=this;return[y&&"renderer"in y?y.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null;this._activeFetchInfo.request=null;this._set("thumbnail",
null)},z.initial))}get description(){return this.template?.description}set description(y){this.template&&(this.template.description=y)}get label(){return this.template?.name}set label(y){this.template&&(this.template.name=y)}get id(){return`${this.label??""}\u2013${this.layer?.id}`}get supportsUpload(){return"scene"===this.layer?.type}clone(){const y=null!=this.thumbnail?this.thumbnail.cloneNode(!0):null,O=new H({layer:this.layer,template:this.template});O._set("thumbnail",y);return O}static async fetchThumbnail(y,
O){const U=await F(y,O);if(null==U)return null;const P={maxSize:36};"dictionary"===y.renderer?.type&&(P.fieldMap=y.renderer.fieldMap??void 0,P.feature={attributes:O.prototype.attributes??{}});return await R.renderPreviewHTML(U,P)}};u.__decorate([Q.property()],A.prototype,"description",null);u.__decorate([Q.property()],A.prototype,"disabled",void 0);u.__decorate([Q.property()],A.prototype,"label",null);u.__decorate([Q.property()],A.prototype,"layer",void 0);u.__decorate([Q.property()],A.prototype,
"template",void 0);u.__decorate([Q.property({readOnly:!0})],A.prototype,"thumbnail",void 0);u.__decorate([Q.property()],A.prototype,"id",null);u.__decorate([Q.property()],A.prototype,"supportsUpload",null);return A=H=u.__decorate([B.subclass("esri.widgets.FeatureTemplates.TemplateItem")],A)})},"esri/symbols/support/symbolUtils":function(){define("require exports ../../core/has ../../support/arcadeOnDemand ./gfxUtils ./previewUtils ./renderUtils ./utils ../../widgets/Legend/styles/support/relationshipUtils ../../widgets/Legend/support/relationshipRampUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){function R(y,O){if(O&&(y.style.filter=L.getCSSFilterFromEffectList(O),O=O.effects))for(const U of O)if("drop-shadow"===U?.type){0>U.offsetX?y.style.marginLeft=`${Math.abs(U.offsetX)}px`:y.style.marginRight=`${U.offsetX}px`;break}}async function F(y,O){switch(y.type){case "web-style":var {previewWebStyleSymbol:U}=await new Promise((P,S)=>q(["./previewWebStyleSymbol"],P,S));return U(y,F,O);case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return{previewSymbol3D:U}=
await new Promise((P,S)=>q(["./previewSymbol3D"],P,S)),U(y,O);case "simple-marker":case "simple-line":case "simple-fill":case "picture-marker":case "picture-fill":case "text":return{previewSymbol2D:U}=await new Promise((P,S)=>q(["./previewSymbol2D"],P,S)),U(y,O);case "cim":return{previewCIMSymbol:U}=await new Promise((P,S)=>q(["./previewCIMSymbol"],P,S)),U(y,O)}}function E(y){return y&&"opacity"in y?y.opacity*E(y.parent):1}let I=null;const H=[255,255,255];u.getDisplayedColor=async function(y,O){if(y){var U=
y.layer,P=y.sourceLayer,S=E(U??P);if(null!=y.symbol&&(null==O||!0!==O.ignoreGraphicSymbol))return y="web-style"===y.symbol.type?await L.fetchWebStyleSymbol(y.symbol,O):y.symbol.clone(),L.getColorFromSymbol(y,S);if(P=(U=O?.renderer||(U&&"renderer"in U?U.renderer:void 0)||(P&&"renderer"in P?P.renderer:void 0))&&"getSymbolAsync"in U?await U.getSymbolAsync(y,O):void 0){P="web-style"===P.type?await L.fetchWebStyleSymbol(P,O):P.clone();P=L.getColorFromSymbol(P,S);if(!(U&&"visualVariables"in U)||"visualVariables"in
U&&!U.visualVariables||"visualVariables"in U&&!U.visualVariables?.length)return P;"arcadeRequiredForVisualVariables"in U&&U.arcadeRequiredForVisualVariables&&null==O?.arcade&&(O={...O},O.arcade=await A.loadArcade());var {getColor:Z,getOpacity:aa}=await new Promise((C,V)=>q(["../../renderers/visualVariables/support/visualVariableUtils"],C,V)),M=[],G=[];for(var X of U.visualVariables)switch(X.type){case "color":M.push(X);break;case "opacity":G.push(X)}X=(X=0<M.length?M[M.length-1]:null)?Z(X,y,O):P;
y=(U=0<G.length?G[G.length-1]:null)?aa(U,y,O):null;null!=S&&(y=null!=y?y*S:S);return X?L.applyOpacityToColor(X,y):null}}};u.getDisplayedSymbol=async function(y,O){if(y){var U=y.sourceLayer,P=(null!=O&&(O.useSourceLayer??!1)?U:y.layer)??U;U=E(P);if(null!=y.symbol&&(null==O||!0!==O.ignoreGraphicSymbol))return y="web-style"===y.symbol.type?await L.fetchWebStyleSymbol(y.symbol,{...O,cache:null!=O?O.webStyleCache:null}):y.symbol.clone(),L.applyColorToSymbol(y,null,U),y;var S=(null!=O?O.renderer:null)??
(P&&"renderer"in P?P.renderer:null);if(P=S&&"getSymbolAsync"in S?await S.getSymbolAsync(y,O):null){P="web-style"===P.type?await P.fetchSymbol({...O,cache:null!=O?O.webStyleCache:null}):P.clone();if(!(S&&"visualVariables"in S&&S.visualVariables?.length))return L.applyColorToSymbol(P,null,U),P;"arcadeRequiredForVisualVariables"in S&&S.arcadeRequiredForVisualVariables&&null==O?.arcade&&(O={...O},O.arcade=await A.loadArcade());var {getColor:Z,getOpacity:aa,getAllSizes:M,getRotationAngle:G}=await new Promise((ma,
D)=>q(["../../renderers/visualVariables/support/visualVariableUtils"],ma,D)),X=[],C=[],V=[],ia=[];for(var oa of S.visualVariables)switch(oa.type){case "color":X.push(oa);break;case "opacity":C.push(oa);break;case "rotation":ia.push(oa);break;case "size":oa.target||V.push(oa)}oa=(oa=!!X.length&&X[X.length-1])?Z(oa,y,O):null;C=(C=!!C.length&&C[C.length-1])?aa(C,y,O):null;null!=U&&(C=null!=C?C*U:U);L.applyColorToSymbol(P,oa,C);V.length&&(U=M(V,y,O),await L.applySizesToSymbol(P,U));for(const ma of ia)L.applyRotationToSymbol(P,
G(ma,y,O),ma.axis);return P}}};u.renderColorRampPreviewHTML=function(y,O={}){var U="horizontal"===O.align;const P=O.width??(U?75:24),S=O.height??(U?24:75);var Z=O.gradient??!0,aa=window.devicePixelRatio,M=P*aa,G=S*aa;aa=document.createElement("canvas");aa.width=M;aa.height=G;aa.ariaLabel=O.ariaLabel??null;aa.style.width=`${P}px`;aa.style.height=`${S}px`;const X=aa.getContext("2d");var C=U?M:0;const V=U?0:G;if(Z){const ia=X.createLinearGradient(0,0,C,V);U=y.length;const oa=1===U?0:1/(U-1);y.forEach((ma,
D)=>ia.addColorStop(D*oa,ma.toString()));X.fillStyle=ia;X.fillRect(0,0,M,G)}else{M=U?M/y.length:M;G=U?G:G/y.length;C=Z=0;for(const ia of y)X.fillStyle=ia.toString(),X.fillRect(Z,C,M,G),Z=U?Z+M:0,C=U?0:C+G}y=document.createElement("div");y.style.width=`${P}px`;y.style.height=`${S}px`;R(y,O?.effectList);y.appendChild(aa);return y};u.renderDotDensityPreviewHTML=function(y,O,U){const {backgroundColor:P,outline:S,dotSize:Z}=y;var aa=U?.swatchSize||Q.SymbolSizeDefaults.size;const M=Math.round(aa*aa/Math.max(Z,
.5)**2*.8),G=window.devicePixelRatio;y=document.createElement("canvas");const X=aa*G;y.width=X;y.height=X;y.style.width=`${y.width/G}px`;y.style.height=`${y.height/G}px`;const C=y.getContext("2d");P&&(C.fillStyle=P.toCss(!0),C.fillRect(0,0,X,X),C.fill());C.fillStyle=O?.toCss(!0)??"";if(I&&I.length/2===M)for(O=0;O<2*M;O+=2)C.fillRect(I[O],I[O+1],Z*G,Z*G),C.fill();else for(I=[],O=0;O<2*M;O+=2){const V=Math.floor(Math.random()*(X-0+1)),ia=Math.floor(Math.random()*(X-0+1));I.push(V,ia);C.fillRect(V,ia,
Z*G,Z*G);C.fill()}S&&(S.color&&(C.strokeStyle=S.color.toCss(!0)),C.lineWidth=S.width,C.strokeRect(0,0,X,X));aa=new Image(aa,aa);aa.src=y.toDataURL();aa.ariaLabel=U?.ariaLabel??null;aa.alt=U?.ariaLabel??"";return aa};u.renderPieChartPreviewHTML=function(y,O={}){const U=O.radius||40;var P=2*Math.PI*U,S=y.length;const Z=P/S,aa=[],M=z.getStroke(O.outline);null!=M?.width&&(M.width*=2);(M||O.backgroundColor)&&aa.push({shape:{type:"circle",cx:U,cy:U,r:U},fill:O.backgroundColor,stroke:M,offset:[0,0]});const G=
O.values,X=G&&G.length===S&&100===G.reduce((V,ia)=>V+ia,0),C=[0];for(let V=0;V<S;V++){let ia=null;X&&(ia=G[V]*P/100,C.push(ia+C[V]));aa.push({shape:{type:"circle",cx:U,cy:U,r:U/2},fill:[0,0,0,0],stroke:{width:U,dashArray:`${(ia??Z)/2} ${P}`,dashoffset:`-${X?C[V]/2:Z/2*V}`,color:y[V]},offset:[0,0]})}S=null;y=2*U+(M?.width||0);if(P=O.holePercentage)M&&aa.push({shape:{type:"circle",cx:U,cy:U,r:U*P},fill:null,stroke:M,offset:[0,0]}),S=y/2,S=[[{shape:{type:"circle",cx:S,cy:S,r:S},fill:H,stroke:M?{...M,
color:H}:null,offset:[0,0]},{shape:{type:"circle",cx:S,cy:S,r:U*P},fill:[0,0,0],stroke:null,offset:[0,0]}]];return w.renderSymbol([aa],[y,y],{effectView:O.effectList,ignoreStrokeWidth:!0,masking:S,rotation:-90,ariaLabel:O.ariaLabel})};u.renderPreviewHTML=F;u.renderRelationshipRampPreviewHTML=function(y,O={}){const U=y?.authoringInfo;if("relationship"!==U?.type||!U?.numClasses||!y.uniqueValueInfos)return null;const {focus:P,numClasses:S}=U,Z=B.getRelationshipRampElement({focus:P,numClasses:S,infos:y.uniqueValueInfos});
y=O?.node||document.createElement("div");w.renderOnce(y,()=>W.renderRelationshipRamp(Z,O.id||"relationship",{opacity:O.opacity||1,effectList:O.effectList,ariaLabel:O.ariaLabel}));return y};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/gfxUtils":function(){define("exports ../../assets ../../Color ../../request ../../core/LRUCache ../../core/screenUtils ./cimSymbolUtils".split(" "),function(q,u,v,A,z,Q,w){function L(E){if(!E)return null;let I=null;switch(E.type){case "simple-fill":case "picture-fill":case "simple-marker":I=
L(E.outline);break;case "simple-line":const H=Q.pt2px(E.width);null!=E.style&&"none"!==E.style&&0!==H&&(I={color:E.color,style:F(E.style),width:H,cap:E.cap,join:"miter"===E.join?Q.pt2px(E.miterLimit):E.join},I.dashArray=W(I).join(",")||"none");break;default:I=null}return I}function W(E){if(!E?.style)return[];const {dashArray:I,style:H,width:y}=E;if("string"===typeof I&&"none"!==I)return I.split(",").map(P=>Number(P));const O=y??0,U=B.has(H)?B.get(H).map(P=>P*O):[];if("butt"!==E.cap)for(const [P,S]of U.entries())U[P]=
1===P%2?S+O:Math.max(S-O,1);return U}const B=new Map([["dash",[4,3]],["dashdot",[4,3,1,3]],["dot",[1,3]],["longdash",[8,3]],["longdashdot",[8,3,1,3]],["longdashdotdot",[8,3,1,3,1,3]],["shortdash",[4,1]],["shortdashdot",[4,1,1,1]],["shortdashdotdot",[4,1,1,1,1,1]],["shortdot",[1,1]],["solid",[]]]),R=new z.LRUCache(1E3),F=(()=>{const E={};return I=>{if(E[I])return E[I];const H=I.replaceAll("-","");return E[I]=H}})();v=new v([128,128,128]);q.defaultThematicColor=v;q.dekebabifyLineStyle=F;q.getDashArray=
W;q.getFill=function(E){const I=E.style;let H=null;if(E)switch(E.type){case "simple-marker":"cross"!==I&&"x"!==I&&(H=E.color);break;case "simple-fill":"solid"===I?H=E.color:"none"!==I&&(H={type:"pattern",x:0,y:0,src:u.getAssetUrl(`esri/symbols/patterns/${I}.png`),width:5,height:5});break;case "picture-fill":H={type:"pattern",src:E.url,width:Q.pt2px(E.width)*E.xscale,height:Q.pt2px(E.height)*E.yscale,x:Q.pt2px(E.xoffset),y:Q.pt2px(E.yoffset)};break;case "text":H=E.color;break;case "cim":H=w.getCIMSymbolColor(E)}return H};
q.getPatternUrlWithColor=function(E,I){const H=E+"-"+I;return void 0!==R.get(H)?Promise.resolve(R.get(H)):A(E,{responseType:"image"}).then(y=>{y=y.data;const O=y.naturalWidth,U=y.naturalHeight,P=document.createElement("canvas");P.width=O;P.height=U;const S=P.getContext("2d");S.fillStyle=I;S.fillRect(0,0,O,U);S.globalCompositeOperation="destination-in";S.drawImage(y,0,0);y=P.toDataURL();R.put(H,y);return y})};q.getStroke=L;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/cimSymbolUtils":function(){define(["exports",
"../../Color","../cim/utils"],function(q,u,v){function A(F){F=v.toCIMSymbolJSON(F);if("CIMTextSymbol"===F?.type)return F.height??0;let E=0;if(F?.symbolLayers)for(const I of F.symbolLayers)v.isCIMMarker(I)&&null!=I.size&&I.size>E?E=I.size:v.isCIMStroke(I)&&null!=I.width&&I.width>E?E=I.width:v.isCIMFill(I);return E}function z(F,E,I,H){if(F)if("CIMTextSymbol"===F.type)null!=F.height&&(F.height*=E);else{if(I&&F.effects)for(const y of F.effects)L(y,E);if(F.symbolLayers)for(const y of F.symbolLayers)switch(y.type){case "CIMPictureMarker":case "CIMVectorMarker":Q(y,
E,H);break;case "CIMPictureStroke":case "CIMSolidStroke":!H?.preserveOutlineWidth&&y.width&&(y.width*=E);break;case "CIMPictureFill":y.height&&(y.height*=E);y.offsetX&&(y.offsetX*=E);y.offsetY&&(y.offsetY*=E);break;case "CIMHatchFill":z(y.lineSymbol,E,!0,{...H,preserveOutlineWidth:!1}),y.offsetX&&(y.offsetX*=E),y.offsetY&&(y.offsetY*=E),y.separation&&(y.separation*=E)}}}function Q(F,E,I){if(F&&(F.markerPlacement&&w(F.markerPlacement,E),F.offsetX&&(F.offsetX*=E),F.offsetY&&(F.offsetY*=E),F.anchorPoint&&
"Absolute"===F.anchorPointUnits&&(F.anchorPoint={x:F.anchorPoint.x*E,y:F.anchorPoint.y*E}),F.size=null!=F.size?F.size*E:0,"CIMVectorMarker"===F.type&&F.markerGraphics))for(const H of F.markerGraphics)F.scaleSymbolsProportionally||z(H.symbol,E,!0,I)}function w(F,E){v.isCIMMarkerStrokePlacement(F)&&F.offset&&(F.offset*=E);switch(F.type){case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineSameSize":F.customEndingOffset&&(F.customEndingOffset*=E);F.offsetAlongLine&&(F.offsetAlongLine*=
E);if(F.placementTemplate&&F.placementTemplate.length){var I=F.placementTemplate.map(H=>H*E);F.placementTemplate=I}break;case "CIMMarkerPlacementAlongLineVariableSize":F.maxRandomOffset&&(F.maxRandomOffset*=E);F.placementTemplate&&F.placementTemplate.length&&(I=F.placementTemplate.map(H=>H*E),F.placementTemplate=I);break;case "CIMMarkerPlacementOnLine":F.startPointOffset&&(F.startPointOffset*=E);break;case "CIMMarkerPlacementAtExtremities":F.offsetAlongLine&&(F.offsetAlongLine*=E);break;case "CIMMarkerPlacementAtRatioPositions":F.beginPosition&&
(F.beginPosition*=E);F.endPosition&&(F.endPosition*=E);break;case "CIMMarkerPlacementPolygonCenter":F.offsetX&&(F.offsetX*=E);F.offsetY&&(F.offsetY*=E);break;case "CIMMarkerPlacementInsidePolygon":F.offsetX&&(F.offsetX*=E),F.offsetY&&(F.offsetY*=E),F.stepX&&(F.stepX*=E),F.stepY&&(F.stepY*=E)}}function L(F,E){switch(F.type){case "CIMGeometricEffectArrow":case "CIMGeometricEffectDonut":F.width&&(F.width*=E);break;case "CIMGeometricEffectBuffer":F.size&&(F.size*=E);break;case "CIMGeometricEffectCut":F.beginCut&&
(F.beginCut*=E);F.endCut&&(F.endCut*=E);F.middleCut&&(F.middleCut*=E);break;case "CIMGeometricEffectDashes":F.customEndingOffset&&(F.customEndingOffset*=E);F.offsetAlongLine&&(F.offsetAlongLine*=E);if(F.dashTemplate&&F.dashTemplate.length){const I=F.dashTemplate.map(H=>H*E);F.dashTemplate=I}break;case "CIMGeometricEffectExtension":case "CIMGeometricEffectJog":case "CIMGeometricEffectRadial":F.length&&(F.length*=E);break;case "CIMGeometricEffectMove":F.offsetX&&(F.offsetX*=E);F.offsetY&&(F.offsetY*=
E);break;case "CIMGeometricEffectOffset":case "CIMGeometricEffectOffsetTangent":F.offset&&(F.offset*=E);break;case "CIMGeometricEffectRegularPolygon":F.radius&&(F.radius*=E);break;case "CIMGeometricEffectTaperedPolygon":F.fromWidth&&(F.fromWidth*=E);F.length&&(F.length*=E);F.toWidth&&(F.toWidth*=E);break;case "CIMGeometricEffectWave":F.amplitude&&(F.amplitude*=E),F.period&&(F.period*=E)}}function W(F,E){if(F){var I="CIMTextSymbol"===F.type?F.symbol:F;F="CIMPolygonSymbol"===F.type;if(I?.symbolLayers)for(const H of I.symbolLayers)if(!(H.colorLocked||
F&&(v.isCIMStroke(H)||v.isCIMMarker(H)&&H.markerPlacement&&v.isCIMMarkerStrokePlacement(H.markerPlacement))))switch(H.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":H.tintColor&&B(E,H.tintColor);break;case "CIMVectorMarker":H.markerGraphics?.forEach(y=>{W(y.symbol,E)});break;case "CIMSolidStroke":case "CIMSolidFill":B(E,H.color);break;case "CIMHatchFill":W(H.lineSymbol,E)}}}function B(F,E){for(const I of F)if(I.join(".")===E.join("."))return;F.push(E)}function R(F,E,I){if(F){var H=
"CIMTextSymbol"===F.type?F.symbol:F;F="CIMPolygonSymbol"===H?.type;if(H?.symbolLayers)for(const y of H.symbolLayers)if(!y.colorLocked){if(F)if(I){if({layersToColor:H}=I,(v.isCIMStroke(y)||v.isCIMMarker(y)&&y.markerPlacement&&v.isCIMMarkerStrokePlacement(y.markerPlacement))&&"fill"===H||v.isCIMFill(y)&&"outline"===H)continue}else if(v.isCIMStroke(y)||v.isCIMMarker(y)&&y.markerPlacement&&v.isCIMMarkerStrokePlacement(y.markerPlacement))continue;H=E.toArray();switch(y.type){case "CIMPictureMarker":case "CIMPictureStroke":case "CIMPictureFill":y.tintColor=
H;break;case "CIMVectorMarker":y.markerGraphics?.forEach(O=>{R(O.symbol,E,I)});break;case "CIMSolidStroke":case "CIMSolidFill":y.color=H;break;case "CIMHatchFill":R(y.lineSymbol,E,I)}}}}q.applyCIMSymbolColor=function(F,E,I){E instanceof u||(E=new u(E));(F=v.toCIMSymbolJSON(F))&&R(F,E,I)};q.applyCIMSymbolRotation=function(F,E,I=!1){F=v.toCIMSymbolJSON(F);I&&0!==E&&(E=360-E);if("CIMTextSymbol"===F?.type)F.angle=E;else if("CIMPointSymbol"===F?.type&&F.symbolLayers){I=E-(F.angle||0);for(const H of F.symbolLayers)if(v.isCIMMarker(H)){let y=
H.rotation||0;y=H.rotateClockwise?y-I:y+I;H.rotation=y}F.angle=E}};q.getCIMSymbolColor=function(F){F=v.toCIMSymbolJSON(F);const E=[];W(F,E);return E.length?new u(v.normalizeAlpha(E[0])):null};q.getCIMSymbolRotation=function(F,E=!1){F=v.toCIMSymbolJSON(F);return"CIMTextSymbol"===F?.type||"CIMPointSymbol"===F?.type?(F=F.angle,null!=F&&0!==F&&E?360-F:F??0):0};q.getCIMSymbolSize=A;q.getCIMSymbolType=function(F){F=v.toCIMSymbolJSON(F);if(!F)return null;switch(F.type){case "CIMPointSymbol":return"CIMPointSymbol";
case "CIMLineSymbol":return"CIMLineSymbol";case "CIMPolygonSymbol":return"CIMPolygonSymbol";case "CIMTextSymbol":return"CIMTextSymbol";case "CIMMeshSymbol":return"CIMMeshSymbol";default:return null}};q.scaleCIMMarker=Q;q.scaleCIMSymbol=z;q.scaleCIMSymbolTo=function(F,E,I){if(F){var H=v.toCIMSymbolJSON(F);F=A(F);if(0===F){if(H)if("CIMTextSymbol"===H.type)H.height=E;else if(H.symbolLayers)for(const y of H.symbolLayers)switch(y.type){case "CIMPictureMarker":case "CIMVectorMarker":y.size=E;break;case "CIMPictureStroke":case "CIMSolidStroke":y.width=
E}}else z(H,E/F,!1,I)}};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewUtils":function(){define(["exports","../../Color"],function(q,u){function v(A,z){return Math.round(Math.min(Math.max(A+191.25*z,0),255))}q.SymbolSizeDefaults=void 0;(function(A){A[A.size=22]="size";A[A.lineWidth=50]="lineWidth";A[A.maxSize=120]="maxSize";A[A.maxOutlineSize=80]="maxOutlineSize";A[A.tallSymbolWidth=20]="tallSymbolWidth"})(q.SymbolSizeDefaults||(q.SymbolSizeDefaults={}));
q.adjustColorBrightness=function(A,z){if(null==A)return new u;if("type"in A&&("linear"===A.type||"pattern"===A.type))return A;A=new u(A);return new u([v(A.r,z),v(A.g,z),v(A.b,z),A.a])};q.adjustColorComponentBrightness=v;q.getConeShapes=function(A,z){let Q=z?q.SymbolSizeDefaults.tallSymbolWidth:A;z=z?4:6;Q=Q<=q.SymbolSizeDefaults.size?Q-.5*z:Q-z;z=.15*Q;const w=Q;A-=z;return[{type:"ellipse",cx:.5*Q,cy:A,rx:.5*Q,ry:z},{type:"path",path:[{command:"M",values:[.5*w,0]},{command:"L",values:[w,A]},{command:"L",
values:[0,A]},{command:"Z",values:[]}]}]};q.getCubeShapes=function(A,z){let Q=z?q.SymbolSizeDefaults.tallSymbolWidth:A;var w=z?4:6;w=Q=Q<=q.SymbolSizeDefaults.size?Q-.5*w:Q-w;z=z?.35*Q:.5*Q;return[{type:"path",path:[{command:"M",values:[.5*w,0]},{command:"L",values:[w,.5*z]},{command:"L",values:[.5*w,z]},{command:"L",values:[0,.5*z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*z]},{command:"L",values:[.5*w,z]},{command:"L",values:[.5*w,A]},{command:"L",values:[0,A-.5*z]},
{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*w,z]},{command:"L",values:[.5*w,A]},{command:"L",values:[w,A-.5*z]},{command:"L",values:[w,.5*z]},{command:"Z",values:[]}]}]};q.getCylinderShapes=function(A,z){var Q=z?q.SymbolSizeDefaults.tallSymbolWidth:A;z=z?4:6;Q=Q<=q.SymbolSizeDefaults.size?Q-.5*z:Q-z;z=.5*Q;const w=.15*Q;A-=w;return[{type:"ellipse",cx:.5*Q,cy:A,rx:z,ry:w},{type:"path",path:[{command:"M",values:[0,w]},{command:"L",values:[0,A]},{command:"L",values:[Q,A]},{command:"L",
values:[Q,w]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*Q,cy:w,rx:z,ry:w}]};q.getDiamondShapes=function(A){var z=A;z=z<q.SymbolSizeDefaults.size?z-2:z-4;const Q=Math.floor(A/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*z,0]},{command:"L",values:[z,.5*A-Q]},{command:"L",values:[.45*z-Q,.5*A+Q]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*z,0]},{command:"L",values:[.45*z-Q,.5*A+Q]},{command:"L",values:[0,.5*A-Q]},{command:"Z",values:[]}]},{type:"path",
path:[{command:"M",values:[0,.5*A-Q]},{command:"L",values:[.45*z-Q,.5*A+Q]},{command:"L",values:[.45*z,A]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*z,A]},{command:"L",values:[z,.5*A-Q]},{command:"L",values:[.45*z-Q,.5*A+Q]},{command:"Z",values:[]}]}]};q.getExtrudeSymbolShapes=function(A){const z=q.SymbolSizeDefaults.size;A*=.5;return[{type:"path",path:[{command:"M",values:[0,.35*z]},{command:"L",values:[.3*z,.7*z]},{command:"L",values:[.3*z,.7*z+A]},{command:"L",values:[0,
.7*z+A-.35*z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*z,.7*z]},{command:"L",values:[.3*z,.7*z+A]},{command:"L",values:[z,A]},{command:"L",values:[z,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*z,0]},{command:"L",values:[z,0]},{command:"L",values:[.3*z,.7*z]},{command:"L",values:[0,.35*z]},{command:"Z",values:[]}]}]};q.getInvertedConeShapes=function(A){let z=A;z=z<q.SymbolSizeDefaults.size?z-3:z-6;const Q=.15*z,w=z;return[{type:"path",path:[{command:"M",
values:[0,0]},{command:"L",values:[w,0]},{command:"L",values:[.5*w,A-Q]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*z,cy:0,rx:.5*z,ry:Q}]};q.getPathSymbolShapes=function(A,z,Q){var w=q.SymbolSizeDefaults.size;let L=w,W=w;1>A?L*=.75:1<A&&(W*=1.25);A=w;z&&Q&&(L=W=A=w=0);return[{type:"path",path:[{command:"M",values:[A,0]},{command:"L",values:[Q?A:.875*A,0]},{command:"L",values:[Q?L-.5*A:0,W-.5*w]},{command:"L",values:[L-.5*A,W-.5*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[A,
0]},{command:"L",values:[A,z?0:.125*w]},{command:"L",values:[L-.5*A,z?W-.5*w:w]},{command:"L",values:[L-.5*A,W-.5*w]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[L-.5*A,W-.5*w]},{command:"L",values:[Q?L-.5*A:0,W-.5*w]},{command:"L",values:[Q?L-.5*A:0,z?W-.5*w:w]},{command:"L",values:[L-.5*A,z?W-.5*w:w]},{command:"Z",values:[]}]}]};q.getTetrahedronShapes=function(A){var z=A;z=z<q.SymbolSizeDefaults.size?z-1:z-2;return[{type:"path",path:[{command:"M",values:[.45*A,0]},{command:"L",
values:[A,z]},{command:"L",values:[.45*A,.6*z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*A,0]},{command:"L",values:[.45*A,.6*z]},{command:"L",values:[0,z]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,z]},{command:"L",values:[.45*A,.6*z]},{command:"L",values:[A,z]},{command:"Z",values:[]}]}]};q.getWaterSymbolShapes=function(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},
{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},
{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]};
q.shapes={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],meshSymbol3DFill:[{type:"path",path:"M -10,-8 L 6,0 L 6,6 L -10,6 L -10,-8 Z"},{type:"path",path:"M -10,-8 L -7,-10 L 9,-2 L 6,0 L -10,-8 Z"},{type:"path",path:"M 6,0 L 9,-2 L 9,4 L 6,6 L 6,0 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",
path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",
path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,
cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",
path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/renderUtils":function(){define("exports ../../kernel ../../request ../../core/colorUtils ../../core/Error ../../core/has ../../libs/maquette/projection ../../libs/maquette/projector ./svgUtils ./utils".split(" "),function(q,u,v,A,z,Q,w,L,W,B){function R(I,H){E.append(I,H);E.detach(H)}function F(I,H,y){return I?v(I,{responseType:"image"}).then(O=>{O=O.data;const U=O.width,P=
O.height,S=U/P;let Z=H;y&&(Z=Math.min(Z,Math.max(U,P)));return{image:O,width:1>=S?Math.ceil(Z*S):Z,height:1>=S?Z:Math.ceil(Z/S)}}):Promise.reject(new z("renderUtils: imageDataSize","href not provided."))}const E=L.createProjector();q.renderOnce=R;q.renderSymbol=function(I,H,y){const O=Math.ceil(H[0]),U=Math.ceil(H[1]);if(!I.some(P=>!!P.length))return null;H=y?.node||document.createElement("div");null!=y.opacity&&(H.style.opacity=y.opacity.toString());null!=y.effectView&&(H.style.filter=B.getCSSFilterFromEffectList(y.effectView));
R(H,()=>W.renderSVG(I,O,U,y));return H};q.tintImageWithColor=function(I,H,y,O,U){return F(I,H,U).then(P=>{const S=P.width??H,Z=P.height??H;var aa;if(aa=P.image)aa=y&&"ignore"!==O?"multiply"===O&&255===y.r&&255===y.g&&255===y.b&&1===y.a?!1:!0:!1;if(aa){var M=P.image.width,G=P.image.height;Q("edge")&&/\.svg$/i.test(I)&&(--M,--G);aa=Math.ceil(S);var X=Math.ceil(Z);var C=document.createElement("canvas");C.width=aa;C.height=X;C.style.width=aa+"px";C.style.height=X+"px";C=C.getContext("2d");C.clearRect(0,
0,aa,X);aa=C;aa.drawImage(P.image,0,0,M,G,0,0,S,Z);X=aa.getImageData(0,0,S,Z);C=[y.r/255,y.g/255,y.b/255,y.a];const ia=A.toHSV(y);for(let oa=0;oa<X.data.length;oa+=4){P=X.data;M=oa;G=C;var V=ia;switch(O){case "multiply":P[M]*=G[0];P[M+1]*=G[1];P[M+2]*=G[2];P[M+3]*=G[3];break;default:const ma=A.toHSV({r:P[M],g:P[M+1],b:P[M+2]});ma.h=V.h;ma.s=V.s;ma.v=ma.v/100*V.v;V=A.toRGB(ma);P[M]=V.r;P[M+1]=V.g;P[M+2]=V.b;P[M+3]*=G[3]}}aa.putImageData(X,0,0);I=aa.canvas.toDataURL("image/png")}else aa=u.id?.findCredential(I),
aa?.token&&(P=I.includes("?")?"\x26":"?",I=`${I}${P}token=${aa.token}`);return{url:I,width:S,height:Z}}).catch(()=>({url:I,width:H,height:H}))};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/svgUtils":function(){define("exports ../../Color ../../core/has ../../core/maybe ../../core/libs/gl-matrix-2/factories/mat2df32 ../../core/libs/gl-matrix-2/math/mat2d ./gfxUtils ../../widgets/support/widgetUtils ../../widgets/support/jsxFactory".split(" "),function(q,u,v,
A,z,Q,w,L,W){function B(T,Y){T*=ea/180;return Math.abs(Y*Math.sin(T))+Math.abs(Y*Math.cos(T))}function R(T){return T.map(Y=>`${Y.command} ${Y.values.join(" ")}`).join(" ").trim()}function F(T,Y,fa,pa,va){if(T){if("circle"===T.type)return W.tsx("circle",{cx:T.cx,cy:T.cy,fill:Y,"fill-rule":"evenodd",r:T.r,stroke:fa.color,"stroke-dasharray":fa.dashArray,"stroke-dashoffset":fa.dashOffset,"stroke-linecap":fa.cap,"stroke-linejoin":fa.join,"stroke-miterlimit":"4","stroke-width":fa.width});if("ellipse"===
T.type)return W.tsx("ellipse",{cx:T.cx,cy:T.cy,fill:Y,"fill-rule":"evenodd",rx:T.rx,ry:T.ry,stroke:fa.color,"stroke-dasharray":fa.dashArray,"stroke-linecap":fa.cap,"stroke-linejoin":fa.join,"stroke-miterlimit":"4","stroke-width":fa.width});if("rect"===T.type)return W.tsx("rect",{fill:Y,"fill-rule":"evenodd",height:T.height,stroke:fa.color,"stroke-dasharray":fa.dashArray,"stroke-linecap":fa.cap,"stroke-linejoin":fa.join,"stroke-miterlimit":"4","stroke-width":fa.width,width:T.width,x:T.x,y:T.y});if("image"===
T.type)return W.tsx("image",{alt:va||"image",height:T.height,href:T.src,preserveAspectRatio:"none",width:T.width,x:T.x,y:T.y});if("path"===T.type)return T="string"!==typeof T.path?R(T.path):T.path,W.tsx("path",{d:T,fill:Y,"fill-rule":"evenodd",stroke:fa.color,"stroke-dasharray":fa.dashArray,"stroke-linecap":fa.cap,"stroke-linejoin":fa.join,"stroke-miterlimit":"4","stroke-width":fa.width});if("text"===T.type)return A.assertIsSome(pa),W.tsx("text",{"dominant-baseline":pa.dominantBaseline,fill:Y,"fill-rule":"evenodd",
"font-family":pa.font.family,"font-size":pa.font.size,"font-style":pa.font.style,"font-variant":pa.font.variant,"font-weight":pa.font.weight,kerning:pa.kerning,rotate:pa.rotate,stroke:fa.color,"stroke-dasharray":fa.dashArray,"stroke-linecap":fa.cap,"stroke-linejoin":fa.join,"stroke-miterlimit":"4","stroke-width":fa.width,"text-anchor":pa.align,"text-decoration":pa.decoration,"text-rendering":ia,x:T.x,y:T.y},T.text)}return null}function E(T){const Y={fill:"none",pattern:null,linearGradient:null};if(T)if("type"in
T&&"pattern"===T.type){var fa=`patternId-${++C}`;Y.fill=`url(#${fa})`;Y.pattern={id:fa,x:T.x,y:T.y,width:T.width,height:T.height,image:{x:0,y:0,width:T.width,height:T.height,href:T.src}}}else"type"in T&&"linear"===T.type?(fa=`linearGradientId-${++V}`,Y.fill=`url(#${fa})`,Y.linearGradient={id:fa,x1:T.x1,y1:T.y1,x2:T.x2,y2:T.y2,stops:T.colors.map(pa=>({offset:pa.offset,color:pa.color&&(new u(pa.color)).toString()}))}):T&&(T=new u(T),Y.fill=T.toString());return Y}function I(T){const Y={color:"none",
width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};T&&(null!=T.width&&(Y.width=T.width),T.cap&&(Y.cap=T.cap),T.join&&(Y.join=T.join.toString()),T.color&&(Y.color=(new u(T.color)).toString()),T.dashArray&&(Y.dashArray=T.dashArray),T.dashoffset&&(Y.dashOffset=T.dashoffset),T.style&&!T.dashArray&&(Y.dashArray=w.getDashArray(T).join(",")||"none"));return Y}function H(T,Y){const fa={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};
if(T){const pa=T.alignBaseline;fa.align=T.align;fa.dominantBaseline="baseline"===pa?"auto":"top"===pa?"text-top":"bottom"===pa?"hanging":pa;fa.decoration=T.decoration;fa.kerning=T.kerning?"auto":"0";fa.rotate=T.rotated?"90":"0";A.assertIsSome(Y);fa.font.style=Y.style||"normal";fa.font.variant=Y.variant||"normal";fa.font.weight=Y.weight||"normal";fa.font.size=Y.size&&Y.size.toString()||"10pt";fa.font.family=Y.family||"serif"}return fa}function y(T){const {pattern:Y,linearGradient:fa}=T;return Y?W.tsx("pattern",
{height:Y.height,id:Y.id,patternUnits:"userSpaceOnUse",width:Y.width,x:Y.x,y:Y.y},W.tsx("image",{height:Y.image.height,href:Y.image.href,width:Y.image.width,x:Y.image.x,y:Y.image.y})):fa?(T=fa.stops.map((pa,va)=>W.tsx("stop",{key:`${va}-stop`,offset:pa.offset,"stop-color":pa.color})),W.tsx("linearGradient",{gradientUnits:"userSpaceOnUse",id:fa.id,x1:fa.x1,x2:fa.x2,y1:fa.y1,y2:fa.y2},T)):null}function O(T,Y){if(!T||0===T.length)return null;const fa=[];for(const pa of T){const {shape:va,fill:xa,stroke:ya,
font:Da}=pa;T=E(xa);const Ca=I(ya),Ka="text"===va.type?H(va,Da):null;(T=F(va,T.fill,Ca,Ka))&&fa.push(T)}return W.tsx("mask",{id:Y,maskUnits:"userSpaceOnUse"},W.tsx("g",null,fa))}function U(T,Y,fa,pa,va){Q.scale(T,Q.identity(T),[Y,fa]);T[4]=T[4]*Y-pa*Y+pa;T[5]=T[5]*fa-va*fa+va;return T}function P(T,Y){if(D&&"left"in D){null!=D.left&&D.left>T&&(D.left=T);if(null==D.right||D.right<T)D.right=T;if(null==D.top||D.top>Y)D.top=Y;if(null==D.bottom||D.bottom<Y)D.bottom=Y}else D={left:T,bottom:Y,right:T,top:Y}}
function S(T){const Y=T.args,fa=Y.length;switch(T.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(T=0;T<fa;T+=2)P(Y[T],Y[T+1]);J.x=Y[fa-2];J.y=Y[fa-1];break;case "H":for(T=0;T<fa;++T)P(Y[T],J.y);J.x=Y[fa-1];break;case "V":for(T=0;T<fa;++T)P(J.x,Y[T]);J.y=Y[fa-1];break;case "m":T=0;"x"in J||(P(J.x=Y[0],J.y=Y[1]),T=2);for(;T<fa;T+=2)P(J.x+=Y[T],J.y+=Y[T+1]);break;case "l":case "t":for(T=0;T<fa;T+=2)P(J.x+=Y[T],J.y+=Y[T+1]);break;case "h":for(T=0;T<fa;++T)P(J.x+=Y[T],J.y);break;case "v":for(T=
0;T<fa;++T)P(J.x,J.y+=Y[T]);break;case "c":for(T=0;T<fa;T+=6)P(J.x+Y[T],J.y+Y[T+1]),P(J.x+Y[T+2],J.y+Y[T+3]),P(J.x+=Y[T+4],J.y+=Y[T+5]);break;case "s":case "q":for(T=0;T<fa;T+=4)P(J.x+Y[T],J.y+Y[T+1]),P(J.x+=Y[T+2],J.y+=Y[T+3]);break;case "A":for(T=0;T<fa;T+=7)P(Y[T+5],Y[T+6]);J.x=Y[fa-2];J.y=Y[fa-1];break;case "a":for(T=0;T<fa;T+=7)P(J.x+=Y[T+5],J.y+=Y[T+6])}}function Z(T,Y,fa){const pa=oa[T.toLowerCase()];"number"===typeof pa&&(pa?Y.length>=pa&&(T={action:T,args:Y.slice(0,Y.length-Y.length%pa)},
fa.push(T),S(T)):(T={action:T,args:[]},fa.push(T),S(T)))}function aa(T){const Y={x:0,y:0,width:0,height:0};if("circle"===T.type)Y.x=T.cx-T.r,Y.y=T.cy-T.r,Y.width=2*T.r,Y.height=2*T.r;else if("ellipse"===T.type)Y.x=T.cx-T.rx,Y.y=T.cy-T.ry,Y.width=2*T.rx,Y.height=2*T.ry;else if("image"===T.type||"rect"===T.type)Y.x=T.x,Y.y=T.y,Y.width=T.width,Y.height=T.height;else if("path"===T.type){{const va=("string"!==typeof T.path?R(T.path):T.path).match(ma),xa=[];D={};J={};if(va){T="";var fa=[],pa=va.length;
for(let ya=0;ya<pa;++ya){const Da=va[ya],Ca=parseFloat(Da);isNaN(Ca)?(T&&Z(T,fa,xa),fa=[],T=Da):fa.push(Ca)}Z(T,fa,xa);T={x:0,y:0,width:0,height:0};D&&"left"in D&&(T.x=D.left,T.y=D.top,T.width=D.right-D.left,T.height=D.bottom-D.top)}else T=null}Y.x=T.x;Y.y=T.y;Y.width=T.width;Y.height=T.height}return Y}function M(T){const Y={x:0,y:0,width:0,height:0};let fa=null,pa=Number.NEGATIVE_INFINITY,va=Number.NEGATIVE_INFINITY;for(const xa of T)fa?(fa.x=Math.min(fa.x,xa.x),fa.y=Math.min(fa.y,xa.y),pa=Math.max(pa,
xa.x+xa.width),va=Math.max(va,xa.y+xa.height)):(fa=Y,fa.x=xa.x,fa.y=xa.y,pa=xa.x+xa.width,va=xa.y+xa.height);fa&&(fa.width=pa-fa.x,fa.height=va-fa.y);return fa}function G(T,Y,fa,pa,va,xa,ya,Da,Ca){var Ka=(ya&&xa?B(xa,Y):Y)/2,Oa=(ya&&xa?B(xa,fa):fa)/2;if(Ca){var Ba=Ca[0];Ca=Ca[1];Ka=(ya&&xa?B(xa,Ba):Ba)/2;Oa=(ya&&xa?B(xa,Ca):Ca)/2}Ba=T.width+pa;var na=T.height+pa;Ca=z.create();ya=z.create();var sa=!1;if(va&&0!==Ba&&0!==na){va=Y!==fa?Y/fa:Ba/na;sa=Y>fa?Y:fa;let ra=1,Aa=1;isNaN(sa)||(1<va?(ra=sa/Ba,
Aa=sa/va/na):(Aa=sa/na,ra=sa*va/Ba));Q.multiply(ya,ya,U(Ca,ra,Aa,Ka,Oa));sa=!0}va=T.x+(Ba-pa)/2;T=T.y+(na-pa)/2;pa=Q.multiply;Ka-=va;Oa-=T;Ka=Q.translate(Ca,Q.identity(Ca),[Ka,Oa]);pa.call(Q,ya,ya,Ka);!sa&&(Ba>Y||na>fa)&&(Ka=Ba/Y>na/fa,Y=(Ka?Y:fa)/(Ka?Ba:na),Q.multiply(ya,ya,U(Ca,Y,Y,va,T)));xa&&(Y=Q.multiply,fa=xa%360*Math.PI/180,Q.rotate(Ca,Q.identity(Ca),fa),xa=Math.cos(fa),fa=Math.sin(fa),Ba=Ca[4],na=Ca[5],Ca[4]=Ba*xa-na*fa+T*fa-va*xa+va,Ca[5]=na*xa+Ba*fa-va*fa-T*xa+T,Y.call(Q,ya,ya,Ca));Da&&
(xa=Q.multiply,Y=Da[0],Da=Da[1],Da=Q.translate(Ca,Q.identity(Ca),[Y,Da]),xa.call(Q,ya,ya,Da));return`matrix(${ya[0]},${ya[1]},${ya[2]},${ya[3]},${ya[4]},${ya[5]})`}function X(T,Y,fa){T=T?.effects.find(Da=>"bloom"===Da.type);if(!T)return null;const {strength:pa,radius:va}=T;T=0<pa?va:0;const xa=(pa+T)*Y,ya=4*pa+1;return W.tsx("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${fa}`,width:"300%",x:"-100%",y:"-100%"},W.tsx("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(pa+.5*
T)*5**(Y/100)*(.4+Y/100),result:"dilate"}),W.tsx("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:xa/25}),W.tsx("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:xa/50}),W.tsx("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},W.tsx("feFuncR",{slope:ya,type:"linear"}),W.tsx("feFuncG",{slope:ya,type:"linear"}),W.tsx("feFuncB",{slope:ya,type:"linear"})),W.tsx("feMerge",null,W.tsx("feMergeNode",{in:"intensityBlur"}),W.tsx("feMergeNode",{in:"intensityBrightness"}),
W.tsx("feGaussianBlur",{stdDeviation:pa/10})))}let C=0,V=0;L=v("android");const ia=v("chrome")||L&&4<=L?"auto":"optimizeLegibility",oa={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},ma=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let D={},J={};const ea=Math.PI;let ba=1;q.computeBBox=M;q.generateFillAttributes=E;q.generateStrokeAttributes=I;q.generateTextAttributes=H;q.getBoundingBox=aa;q.getTransformMatrix=G;q.renderDef=y;q.renderSVG=function(T,Y,fa,pa={}){const va=[],xa=[],ya=++ba,Da=X(pa.effectView,
Y,ya);var Ca=null;Da&&(Ca=pa.effectView?.effects.find(sa=>"bloom"===sa.type),Ca=(Ca.strength?Ca.strength+Ca.radius/2:0)/3,Ca=[Math.max(Y+Y*Ca,10),Math.max(fa+fa*Ca,10)]);for(let sa=0;sa<T.length;sa++){var Ka=T[sa];const ra=[];var Oa=[],Ba=0,na=0;let Aa=0;for(const Fa of Ka){const {shape:Ia,fill:la,stroke:qa,font:ja,offset:za}=Fa;pa.ignoreStrokeWidth||"text"===Ia.type||(Ba+=qa?.width||0);Ka=E(la);const Ha=I(qa),Ua="text"===Ia.type?H(Ia,ja):null;va.push(y(Ka));ra.push(F(Ia,Ka.fill,Ha,Ua,pa.ariaLabel));
Oa.push(aa(Ia));za&&(na+=za[0],Aa+=za[1])}Oa=M(Oa);Ba=G(Oa,Y,fa,Ba,pa.scale??!1,pa.rotation,pa.useRotationSize??!1,[na,Aa],Ca);na=null;pa.masking&&(na=`mask-${sa}`,va.push(O(pa.masking[sa],na)),na=`url(#${na})`);xa.push(na?W.tsx("g",{mask:na},W.tsx("g",{transform:Ba},ra)):W.tsx("g",{transform:Ba},ra))}pa.useRotationSize&&pa.rotation&&(Y=B(pa.rotation,Y),fa=B(pa.rotation,fa));Da&&(A.assertIsSome(Ca),Y=Ca[0],fa=Ca[1]);return W.tsx("svg",{"aria-labelledby":pa.ariaLabel,focusable:!1,height:fa,role:"img",
style:"display: block;",width:Y,xmlns:"http://www.w3.org/2000/svg"},Da,W.tsx("defs",null,va),Da?W.tsx("g",{filter:`url(#bloom${ya})`},xa):xa)};q.renderShape=F;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/utils":function(){define("require exports ../../Color ../../symbols ../../core/asyncUtils ../../core/has ../../core/screenUtils ../../core/libs/gl-matrix-2/factories/vec3f64 ../../layers/effects/jsonUtils ./cimSymbolUtils ./gfxUtils ./Symbol3DMaterial".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F){function E(G){G=G.symbolLayers;if(!G)return null;let X=null;G.forEach(C=>{"object"===C.type&&C.resource?.href||(X="water"===C.type?C.color:C.material?C.material.color:null)});return X?new v(X):null}function I(G,X){if(null==X||null==G)return G;G=G.toRgba();G[3]*=X;return new v(G)}function H(G,X,C){if(G=G.symbolLayers){var V=ia=>{X=X??ia??(null!=C?M:null);return I(X,C)};G.forEach(ia=>{if("object"!==ia.type||!ia.resource?.href||X)if("water"===ia.type)ia.color=V(ia.color);
else{const oa=V(null!=ia.material?ia.material.color:null);null==ia.material?ia.material=new F.Symbol3DMaterial({color:oa}):ia.material.color=oa;null!=C&&"outline"in ia&&null!=ia.outline?.color&&(ia.outline.color=I(ia.outline.color,C))}})}}async function y(G,X){(G=G.symbolLayers)&&await z.forEach(G,async C=>O(C,X))}async function O(G,X){switch(G.type){case "extrude":G.size="number"===typeof X[2]?X[2]:0;break;case "icon":case "line":case "text":X=U(X);null!=X&&(G.size=X);break;case "path":const C=S(X,
L.ONES,[G.width,void 0,G.height]);G.width=aa(X[0],G.width,1,C);G.height=aa(X[2],G.height,1,C);break;case "object":await P(G,X)}}function U(G){for(const X of G)if("number"===typeof X)return X;return null}async function P(G,X){const {resourceSize:C,symbolSize:V}=await Z(G),ia=S(X,C,V);G.width=aa(X[0],V[0],C[0],ia);G.depth=aa(X[1],V[1],C[1],ia);G.height=aa(X[2],V[2],C[2],ia)}function S(G,X,C){for(let V=0;3>V;V++){const ia=G[V];switch(ia){case "symbol-value":return G=C[V],null!=G?G/X[V]:1;case "proportional":break;
default:if(ia&&X[V])return ia/X[V]}}return 1}async function Z(G){var {computeObjectLayerResourceSize:X}=await new Promise((D,J)=>q(["./symbolLayerUtils"],D,J));X=await X(G,10);const {width:C,height:V,depth:ia}=G;G=[C,ia,V];let oa=1;for(var ma=0;3>ma;ma++){const D=G[ma];if(null!=D){oa=D/X[ma];break}}for(ma=0;3>ma;ma++)null==G[ma]&&(G[ma]=X[ma]*oa);return{resourceSize:X,symbolSize:G}}function aa(G,X,C,V){switch(G){case "proportional":return C*V;case "symbol-value":return null!=X?X:C;default:return G}}
const M=new v("white");u.applyColorToSymbol=function(G,X,C){if(G&&(X||null!=C))if(X&&=new v(X),A.isSymbol3D(G))H(G,X,C);else if(A.isSymbol2D(G)){if(X=X??G.color)G.color=I(X,C);null!=C&&"outline"in G&&G.outline?.color&&(G.outline.color=I(G.outline.color,C))}};u.applyOpacityToColor=I;u.applyRotationToSymbol=function(G,X,C){G&&null!=X&&(A.isSymbol3D(G)?(G=G.symbolLayers)&&G.forEach(V=>{if(V&&"object"===V.type)switch(C){case "tilt":V.tilt=X;break;case "roll":V.roll=X;break;default:V.heading=X}}):!A.isSymbol2D(G)||
"simple-marker"!==G.type&&"picture-marker"!==G.type&&"text"!==G.type||(G.angle=X))};u.applySizesToSymbol=async function(G,X){if(G&&X){if(A.isSymbol3D(G))return y(G,X);if(A.isSymbol2D(G)&&(X=U(X),null!=X))switch(G.type){case "simple-marker":G.size=X;break;case "picture-marker":const C=G.width/G.height;1<C?(G.width=X,G.height=X*C):(G.width=X*C,G.height=X);break;case "simple-line":G.width=X;break;case "text":G.font.size=X}}};u.fetchWebStyleSymbol=async function(G,X){const C=await G.fetchSymbol(X);return C?
C:G.fetchCIMSymbol(X)};u.getCSSFilterFromEffectList=function(G){if(!G)return null;G=G.effects.filter(X=>"bloom"!==X.type).map(X=>X.toJSON());return W.effectFunctionsFromJSON(G)};u.getColorFromSymbol=function(G,X){if(!G)return null;let C=null;A.isSymbol3D(G)?C=E(G):A.isSymbol2D(G)&&(C="cim"===G.type?B.getCIMSymbolColor(G):G.color?new v(G.color):null);return C?I(C,X):null};u.getIconHref=function(G){return G.resource?.href??""};u.getSymbolOutlineSize=function(G){return G?A.isSymbol3D(G)?(G=(G=G.symbolLayers?.at(-1))&&
"outline"in G?G?.outline?.size:void 0,null!=G?G:0):w.px2pt(R.getStroke(G)?.width):0};u.isVolumetricSymbol=function(G){if(null==G||!("symbolLayers"in G)||null==G.symbolLayers)return!1;switch(G.type){case "point-3d":return G.symbolLayers.some(X=>"object"===X.type);case "line-3d":return G.symbolLayers.some(X=>"path"===X.type);case "polygon-3d":return G.symbolLayers.some(X=>"object"===X.type||"extrude"===X.type);default:return!1}};u.symbolHasExtrudeSymbolLayer=function(G){return null!=G&&"polygon-3d"===
G.type&&G.symbolLayers.some(X=>"extrude"===X.type)};Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/styles/support/relationshipUtils":function(){define(["exports","../../../../symbols/support/svgUtils","../../../../symbols/support/utils","../../../support/widgetUtils","../../../support/jsxFactory"],function(q,u,v,A,z){function Q(W,B,R){const F=`${R}_arrowStart`;R=`${R}_arrowEnd`;W="left"===W;const E={markerStart:null,markerEnd:null};switch(B){case "HL":W?E.markerStart=
`url(#${R})`:E.markerEnd=`url(#${F})`;break;case "LL":E.markerStart=`url(#${R})`;break;case "LH":W?E.markerEnd=`url(#${F})`:E.markerStart=`url(#${R})`;break;default:E.markerEnd=`url(#${F})`}return E}function w(W,B,R={}){const {focus:F,numClasses:E,colors:I,rotation:H}=W,{opacity:y,effectList:O,ariaLabel:U}=R;W=R.size??60;R=!!F;const P=Math.sqrt(W**2+W**2)+(R?0:5),S=[],Z=[];var aa=[],M=(W||75)/E;for(var G=0;G<E;G++){var X=G*M;for(var C=0;C<E;C++){var V=C*M,ia=u.generateFillAttributes(I[G][C]);const oa=
u.generateStrokeAttributes(null);V={type:"rect",x:V,y:X,width:M,height:M};const ma=u.renderDef(ia);ma&&S.push(ma);(ia=u.renderShape(V,ia.fill,oa,null))&&Z.push(ia);aa.push(u.getBoundingBox(V))}}M=null;R||(M="margin: -15px -15px -18px -15px");G=Q("left",F,B);X=Q("right",F,B);C=u.computeBBox(aa);aa=u.getTransformMatrix(C,P,P,0,!1,H,!1);C=u.getTransformMatrix(C,P,P,0,!1,R?-45:null,!1);ia={filter:v.getCSSFilterFromEffectList(O)??void 0,opacity:null==y?"":`${y}`};return z.tsx("div",{class:R?L.diamondMidColRamp:
L.squareTableCell,styles:ia},z.tsx("svg",{"aria-labelledBy":U,focusable:!1,height:P,role:"image",style:M,width:P,xmlns:"http://www.w3.org/2000/svg"},z.tsx("defs",null,z.tsx("marker",{id:`${B}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},z.tsx("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),z.tsx("marker",{id:`${B}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",
refY:"5"},z.tsx("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),S),z.tsx("g",{transform:aa},Z),z.tsx("g",{transform:C},z.tsx("line",{fill:"none","marker-end":G.markerEnd,"marker-start":G.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:W-15,y2:15}),z.tsx("line",{fill:"none","marker-end":X.markerEnd,"marker-start":X.markerStart,stroke:"#555555","stroke-width":"1",x1:15,x2:W-15,y1:W+10,y2:W+10}))))}const L={diamondContainer:"esri-relationship-ramp--diamond__container",
diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",
squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};q.renderRelationshipRamp=function(W,B,R={}){const {focus:F,labels:E}=W,I=!!F;W=w(W,B,R);B={justifyContent:"center"};
R=A.isRTL();return I?z.tsx("div",{class:L.diamondContainer,styles:B},z.tsx("div",{class:L.diamondLeftCol},R?E.right:E.left),z.tsx("div",{class:L.diamondMidCol},z.tsx("div",{class:L.diamondMidColLabel},E.top),W,z.tsx("div",{class:L.diamondMidColLabel},E.bottom)),z.tsx("div",{class:L.diamondRightCol},R?E.left:E.right)):z.tsx("div",{class:L.squareTable},z.tsx("div",{class:L.squareTableRow},z.tsx("div",{class:A.classes(L.squareTableCell,L.squareTableLabel,L.squareTableLabelRightBottom)},R?E.top:E.left),
z.tsx("div",{class:L.squareTableCell}),z.tsx("div",{class:A.classes(L.squareTableCell,L.squareTableLabel,L.squareTableLabelLeftBottom)},R?E.left:E.top)),z.tsx("div",{class:L.squareTableRow},z.tsx("div",{class:L.squareTableCell}),W,z.tsx("div",{class:L.squareTableCell})),z.tsx("div",{class:L.squareTableRow},z.tsx("div",{class:A.classes(L.squareTableCell,L.squareTableLabel,L.squareTableLabelRightTop)},R?E.right:E.bottom),z.tsx("div",{class:L.squareTableCell}),z.tsx("div",{class:A.classes(L.squareTableCell,
L.squareTableLabel,L.squareTableLabelLeftTop)},R?E.bottom:E.right)))};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Legend/support/relationshipRampUtils":function(){define(["exports","../../../core/lang","../../../symbols/support/gfxUtils","../../../symbols/support/previewSymbol3D"],function(q,u,v,A){function z(B){if(B){var {type:R}=B;return R.includes("3d")?A.getSymbolLayerFill(B.symbolLayers.at(0)):"simple-line"===R||"simple-marker"===B.type&&("x"===B.style||"cross"===
B.style)?(B=v.getStroke(B))&&B.color:v.getFill(B)}}function Q(B,R){const F=R.HH.label,E=R.LL.label,I=R.HL.label;R=R.LH.label;switch(B){case "HH":return{top:F,bottom:E,left:I,right:R};case "HL":return{top:I,bottom:R,left:E,right:F};case "LL":return{top:E,bottom:F,left:R,right:I};case "LH":return{top:R,bottom:I,left:F,right:E};default:return{top:F,bottom:E,left:I,right:R}}}function w(B){let R=L[B];B&&null==R&&(R=L.HH);return R||0}const L={HH:315,HL:45,LL:135,LH:225},W={2:[["HL","HH"],["LL","LH"]],3:[["HL",
"HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};q.getRelationshipRampColors2D=function(B,R){const F=[],E=B.length**.5;B=u.clone(B);var I=(R||"HH").split("");R=I[0];for(I="H"===I[1];B.length;){const H=[];for(;H.length<E;)H.push(B.shift());I&&H.reverse();F.push(H)}"L"===R&&F.reverse();return F};q.getRelationshipRampElement=function(B){const {focus:R,infos:F,numClasses:E}=B;var I=W[E];const H={};
F.forEach(y=>{H[y.value]={label:y.label,fill:z(y.symbol)}});B=[];for(let y=0;y<E;y++){const O=[];for(let U=0;U<E;U++)O.push(H[I[y][U]].fill);B.push(O)}I=Q(R,H);return{type:"relationship-ramp",numClasses:E,focus:R,colors:B,labels:I,rotation:w(R)}};q.getRotationAngleForFocus=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/previewSymbol3D":function(){define("exports ../../assets ../../core/colorUtils ../../core/has ../../core/Error ../../core/Logger ../../core/screenUtils ./gfxUtils ./IconSymbol3DLayerResource ./ObjectSymbol3DLayerResource ./previewUtils ./renderUtils ./utils ./webStyleSymbolUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I){function H(Y){const fa=Y.outline;var pa=null!=Y.material?Y.material.color:null;pa=null!=pa?pa.toHex():null;if(null==fa||"pattern"in fa&&null!=fa.pattern&&"style"===fa.pattern.type&&"none"===fa.pattern.style)return"fill"===Y.type&&"#ffffff"===pa?{color:"#bdc3c7",width:.75}:null;Y=w.pt2px(fa.size)||0;return{color:"rgba("+(null!=fa.color?fa.color.toRgba():"255,255,255,1")+")",width:Math.min(Y,ea),style:"pattern"in fa&&null!=fa.pattern&&"style"===fa.pattern.type?
L.dekebabifyLineStyle(fa.pattern.style):null,join:"butt",cap:"patternCap"in fa?fa.patternCap:"butt"}}async function y(Y,fa){if(Y.thumbnail?.url)return Y.thumbnail.url;if("icon"===fa.type&&fa?.resource?.href)return E.getIconHref(fa);fa=u.getAssetUrl("esri/images/Legend/legend3dsymboldefault.png");return Y.styleOrigin&&(Y.styleOrigin.styleName||Y.styleOrigin.styleUrl)&&(Y=await I.resolveWebStyleSymbol(Y.styleOrigin,{portal:Y.styleOrigin.portal},"webRef").catch(()=>null))&&"thumbnail"in Y&&Y.thumbnail?.url?
Y.thumbnail.url:fa}function O(Y,fa=1){const pa=Y.a;Y=v.toHSV(Y);const {r:va,g:xa,b:ya}=v.toRGB({h:Y.h,s:Y.s/fa,v:100-(100-Y.v)/fa});return[va,xa,ya,pa]}function U(Y){return"water"===Y.type?null==Y.color?null:Y.color:null==Y.material?.color?null:Y.material.color}function P(Y,fa=0){var pa=U(Y);if(!pa){if("fill"===Y.type)return null;fa=R.adjustColorComponentBrightness(L.defaultThematicColor.r,fa);return[fa,fa,fa,100]}Y=pa.toRgba();for(pa=0;3>pa;pa++)Y[pa]=R.adjustColorComponentBrightness(Y[pa],fa);return Y}
async function S(Y,fa){Y=Y.style;return"none"===Y?null:{type:"pattern",x:0,y:0,src:await L.getPatternUrlWithColor(u.getAssetUrl(`esri/symbols/patterns/${Y}.png`),fa.toCss(!0)),width:5,height:5}}function Z(Y){return Y.outline?H(Y):{color:"rgba(0, 0, 0, 1)",width:1.5}}function aa(Y,fa){Y=U(Y);if(!Y)return null;let pa;pa="rgba("+(R.adjustColorComponentBrightness(Y.r,fa)+",");pa+=R.adjustColorComponentBrightness(Y.g,fa)+",";pa+=R.adjustColorComponentBrightness(Y.b,fa)+",";return pa+Y.a+");"}function M(Y,
fa){fa=aa(Y,fa);if(!fa)return{};if("pattern"in Y&&null!=Y.pattern&&"style"===Y.pattern.type&&"none"===Y.pattern.style)return null;const pa=Math.min(Y.size?w.pt2px(Y.size):.75,ea);return{color:fa,width:pa,style:"pattern"in Y&&null!=Y.pattern&&"style"===Y.pattern.type?L.dekebabifyLineStyle(Y.pattern.style):null,cap:"cap"in Y?Y.cap:null,join:"join"in Y?"miter"===Y.join?w.pt2px(2):Y.join:null}}function G(Y,fa,pa){pa=null!=pa?.75*pa:0;return{type:"linear",x1:pa?.25*pa:0,y1:pa?.5*pa:0,x2:pa||4,y2:pa?.5*
pa:4,colors:[{color:Y,offset:0},{color:fa,offset:1}]}}function X(Y){const fa=Y.depth,pa=Y.height;Y=Y.width;return 0!==Y&&0!==fa&&0!==pa&&Y===fa&&null!=Y&&null!=pa&&Y<pa}function C(Y,fa,pa){const va=[];if(!Y)return va;switch(Y.type){case "icon":switch(Y.resource&&Y.resource.primitive||W.defaultPrimitive){case "circle":va.push({shape:{type:"circle",cx:0,cy:0,r:.5*fa},fill:P(Y,0),stroke:H(Y)});break;case "square":va.push({shape:{type:"path",path:[{command:"M",values:[0,fa]},{command:"L",values:[0,0]},
{command:"L",values:[fa,0]},{command:"L",values:[fa,fa]},{command:"Z",values:[]}]},fill:P(Y,0),stroke:H(Y)});break;case "triangle":va.push({shape:{type:"path",path:[{command:"M",values:[0,fa]},{command:"L",values:[.5*fa,0]},{command:"L",values:[fa,fa]},{command:"Z",values:[]}]},fill:P(Y,0),stroke:H(Y)});break;case "cross":va.push({shape:{type:"path",path:[{command:"M",values:[.5*fa,0]},{command:"L",values:[.5*fa,fa]},{command:"M",values:[0,.5*fa]},{command:"L",values:[fa,.5*fa]}]},stroke:Z(Y)});break;
case "x":va.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[fa,fa]},{command:"M",values:[fa,0]},{command:"L",values:[0,fa]}]},stroke:Z(Y)});break;case "kite":va.push({shape:{type:"path",path:[{command:"M",values:[0,.5*fa]},{command:"L",values:[.5*fa,0]},{command:"L",values:[fa,.5*fa]},{command:"L",values:[.5*fa,fa]},{command:"Z",values:[]}]},fill:P(Y,0),stroke:H(Y)})}break;case "object":switch(Y.resource&&Y.resource.primitive||B.defaultPrimitive){case "cone":var xa=
P(Y,0);Y=P(Y,-.6);Y=G(xa,Y,pa?T:fa);fa=R.getConeShapes(fa,pa);va.push({shape:fa[0],fill:Y},{shape:fa[1],fill:Y});break;case "inverted-cone":pa=P(Y,0);Y=P(Y,-.6);Y=G(pa,Y,fa);fa=R.getInvertedConeShapes(fa);va.push({shape:fa[0],fill:Y},{shape:fa[1],fill:pa});break;case "cube":fa=R.getCubeShapes(fa,pa);va.push({shape:fa[0],fill:P(Y,0)},{shape:fa[1],fill:P(Y,-.3)},{shape:fa[2],fill:P(Y,-.5)});break;case "cylinder":xa=P(Y,0);const ya=P(Y,-.6);xa=G(xa,ya,pa?T:fa);fa=R.getCylinderShapes(fa,pa);va.push({shape:fa[0],
fill:xa},{shape:fa[1],fill:xa},{shape:fa[2],fill:P(Y,0)});break;case "diamond":fa=R.getDiamondShapes(fa);va.push({shape:fa[0],fill:P(Y,-.3)},{shape:fa[1],fill:P(Y,0)},{shape:fa[2],fill:P(Y,-.3)},{shape:fa[3],fill:P(Y,-.7)});break;case "sphere":pa=P(Y,0);Y=P(Y,-.6);Y=G(pa,Y);Y.x1=0;Y.y1=0;Y.x2=.25*fa;Y.y2=.25*fa;va.push({shape:{type:"circle",cx:0,cy:0,r:.5*fa},fill:Y});break;case "tetrahedron":fa=R.getTetrahedronShapes(fa),va.push({shape:fa[0],fill:P(Y,-.3)},{shape:fa[1],fill:P(Y,0)},{shape:fa[2],
fill:P(Y,-.6)})}}return va}function V(Y){return(Y="number"===typeof Y?.size?Y?.size:null)?w.pt2px(Y):null}async function ia(Y,fa){const pa=V(fa),va=fa?.maxSize?w.pt2px(fa.maxSize):null,xa=fa?.disableUpsampling??!1,ya=Y.symbolLayers,Da=[];let Ca=0,Ka=0;const Oa=ya.at(-1);let Ba;Oa&&"icon"===Oa.type&&(Ba=Oa.size&&w.pt2px(Oa.size));ya.forEach(sa=>{if("icon"===sa.type||"object"===sa.type){var ra="icon"===sa.type?sa.size&&w.pt2px(sa.size):0,Aa=pa||ra?Math.ceil(Math.min(pa||ra,va||J)):D;if(sa?.resource?.href){var Fa=
y(Y,sa).then(Ia=>{const la=sa?.material?.color;var qa="icon"===sa.type?"multiply":"tint";return F.tintImageWithColor(Ia,Aa,la,qa,xa)}).then(Ia=>{const la=Ia.width,qa=Ia.height;Ca=Math.max(Ca,la);Ka=Math.max(Ka,qa);return[{shape:{type:"image",x:0,y:0,width:la,height:qa,src:Ia.url},fill:null,stroke:null}]});Da.push(Fa)}else Fa=Aa,"icon"===sa.type&&Ba&&pa&&(Fa=ra/Ba*Aa),ra="tall"===fa?.symbolConfig||fa?.symbolConfig?.isTall||("object"===sa.type?X(sa):!1),Ca=Math.max(Ca,ra?T:Fa),Ka=Math.max(Ka,Fa),Da.push(Promise.resolve(C(sa,
Fa,ra)))}});const na=[];(await Promise.allSettled(Da)).forEach(sa=>{"fulfilled"===sa.status?na.push(sa.value):sa.reason&&Q.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",sa.reason)});return F.renderSymbol(na,[Ca,Ka],{node:fa?.node,scale:!1,opacity:fa?.opacity,ariaLabel:fa?.ariaLabel})}function oa(Y,fa){const pa=Y.symbolLayers,va=[];Y=E.isVolumetricSymbol(Y);const xa=V(fa),ya=(fa?.maxSize?w.pt2px(fa.maxSize):null)||ea;let Da=0,Ca=0,Ka;pa.forEach((Oa,Ba)=>
{if(Oa&&("line"===Oa.type||"path"===Oa.type)){var na=[];switch(Oa.type){case "line":var sa=M(Oa,0);if(null==sa)break;var ra=sa?.width||0;0===Ba&&(Ka=ra);Oa=Math.min(xa||ra,ya);Ba=0===Ba?Oa:xa?ra/Ka*Oa:Oa;ra=Ba>ba/2?2*Ba:ba;Ca=Math.max(Ca,Ba);Da=Math.max(Da,ra);sa.width=Ba;na.push({shape:{type:"path",path:[{command:"M",values:[0,.5*Ca]},{command:"L",values:[Da,.5*Ca]}]},stroke:sa});break;case "path":sa=Math.min(xa||D,ya);Ba=P(Oa,0);ra=P(Oa,-.2);var Aa=aa(Oa,-.4);Aa=Aa?{color:Aa,width:1}:{};if("quad"===
Oa.profile){const Fa=Oa.width;Oa=Oa.height;Oa=R.getPathSymbolShapes(Fa&&Oa?Fa/Oa:1,0===Oa,0===Fa);Aa={...Aa,join:"bevel"};na.push({shape:Oa[0],fill:ra,stroke:Aa},{shape:Oa[1],fill:ra,stroke:Aa},{shape:Oa[2],fill:Ba,stroke:Aa})}else na.push({shape:R.shapes.pathSymbol3DLayer[0],fill:ra,stroke:Aa},{shape:R.shapes.pathSymbol3DLayer[1],fill:Ba,stroke:Aa});Da=Ca=Math.max(Ca,sa)}va.push(na)}});return Promise.resolve(F.renderSymbol(va,[Da,Ca],{node:fa?.node,scale:Y,opacity:fa?.opacity,ariaLabel:fa?.ariaLabel}))}
async function ma(Y,fa){const pa="mesh-3d"===Y.type;Y=Y.symbolLayers;var va=V(fa);const xa=fa?.maxSize?w.pt2px(fa.maxSize):null;va=va||D;const ya=[];let Da=0,Ca=0;var Ka=!1;for(let ra=0;ra<Y.length;ra++){var Oa=Y.at(ra);const Aa=[];if(!pa||"fill"===Oa.type){switch(Oa.type){case "fill":Ka=Math.min(va,xa||J);Da=Math.max(Da,Ka);Ca=Math.max(Ca,Ka);Ka=!0;if(pa){var Ba=R.shapes.meshSymbol3DFill,na=aa(Oa,-.4);na=na?{color:na,width:1,join:"round"}:{};Aa.push({shape:Ba[0],fill:P(Oa,0),stroke:na},{shape:Ba[1],
fill:P(Oa,-.2),stroke:na},{shape:Ba[2],fill:P(Oa,-.6),stroke:na})}else{Ba=P(Oa,0);na="pattern"in Oa?Oa.pattern:null;var sa=H(Oa);Oa=U(Oa);null!=na&&"style"===na.type&&"solid"!==na.style&&Oa&&(Ba=await S(na,Oa));Aa.push({shape:R.shapes.fill[0],fill:Ba,stroke:sa})}break;case "line":Oa=M(Oa,0);if(null==Oa)break;Oa={stroke:Oa,shape:R.shapes.fill[0]};Da=Math.max(Da,D);Ca=Math.max(Ca,D);Aa.push(Oa);break;case "extrude":Ba={join:"round",width:1,...M(Oa,-.4)};na=P(Oa,0);Oa=P(Oa,-.2);sa=Math.min(va,xa||J);
const Fa=R.getExtrudeSymbolShapes(sa);Ba.width=1;Aa.push({shape:Fa[0],fill:Oa,stroke:Ba},{shape:Fa[1],fill:Oa,stroke:Ba},{shape:Fa[2],fill:na,stroke:Ba});Oa=.7*D+.5*sa;Da=Math.max(Da,D);Ca=Math.max(Ca,Oa);break;case "water":Ka=U(Oa),Oa=O(Ka),Ba=O(Ka,2),na=O(Ka,3),sa=R.getWaterSymbolShapes(),Ka=!0,Aa.push({shape:sa[0],fill:Oa},{shape:sa[1],fill:Ba},{shape:sa[2],fill:na}),Oa=Math.min(va,xa||J),Da=Math.max(Da,Oa),Ca=Math.max(Ca,Oa)}ya.push(Aa)}}return F.renderSymbol(ya,[Da,Ca],{node:fa?.node,scale:Ka,
opacity:fa?.opacity,ariaLabel:fa?.ariaLabel})}const D=R.SymbolSizeDefaults.size,J=R.SymbolSizeDefaults.maxSize,ea=R.SymbolSizeDefaults.maxOutlineSize,ba=R.SymbolSizeDefaults.lineWidth,T=R.SymbolSizeDefaults.tallSymbolWidth;q.getPatternDescriptor=S;q.getSizeFromOptions=V;q.getSymbolLayerFill=P;q.previewSymbol3D=function(Y,fa){if(0===Y.symbolLayers.length)return Promise.reject(new z("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(Y.type){case "point-3d":return ia(Y,fa);
case "line-3d":return oa(Y,fa);case "polygon-3d":case "mesh-3d":return ma(Y,fa)}return Promise.reject(new z("symbolPreview: swatchInfo3D","symbol not supported."))};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/symbols/support/webStyleSymbolUtils":function(){define("exports ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/urlUtils ../../portal/Portal ../../chunks/persistableUrlUtils ./jsonUtils ./StyleOrigin ./styleUtils ./Thumbnail".split(" "),function(q,
u,v,A,z,Q,w,L,W,B,R){function F(H,y){return y.items.find(O=>O.name===H)}function E(H,y,O,U,P,S){const Z=null!=O?.portal?O.portal:Q.getDefault(),aa={portal:Z,url:z.urlToObject(H.baseUrl),origin:"portal-item"},M=F(y,H.data);if(!M)return Promise.reject(new A("symbolstyleutils:symbol-name-not-found",`The symbol name '${y}' could not be found`,{symbolName:y}));P=w.fromJSON(P(M,U),aa);let G=M.thumbnail?.href??null;const X=M.thumbnail?.imageData;v.isDevEnvironment()&&(P=v.adjustStaticAGOUrl(P)??"",G=v.adjustStaticAGOUrl(G));
const C={portal:Z,url:z.urlToObject(z.removeFile(P)),origin:"portal-item"};return B.requestJSON(P,S).then(V=>{V="cimRef"===U?B.makeCIMSymbolRef(V.data):V.data;if((V=L.fromJSON(V,C))&&u.isSymbol3D(V)){if(G){const ia=w.fromJSON(G,aa);V.thumbnail=new R.Thumbnail({url:ia})}else X&&(V.thumbnail=new R.Thumbnail({url:`data:image/png;base64,${X}`}));H.styleUrl?V.styleOrigin=new W({portal:O.portal,styleUrl:H.styleUrl,name:y}):H.styleName&&(V.styleOrigin=new W({portal:O.portal,styleName:H.styleName,name:y}))}return V})}
function I(H,y,O){const U=B.Style2DUrlTemplate.replaceAll(/\{SymbolName\}/gi,H),P=null!=y.portal?y.portal:Q.getDefault();return B.requestJSON(U,O).then(S=>{S=B.makeCIMSymbolRef(S.data);return L.fromJSON(S,{portal:P,url:z.urlToObject(z.removeFile(U)),origin:"portal-item"})})}q.fetchSymbolFromStyle=E;q.getStyleItemFromStyle=F;q.resolveWebStyleSymbol=function(H,y,O,U){const P=H.name;return null==P?Promise.reject(new A("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):
H.styleName&&"Esri2DPointSymbolsStyle"===H.styleName?I(P,y,U):B.fetchStyle(H,y,U).then(S=>E(S,P,y,O,B.symbolUrlFromStyleItem,U))};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/devEnvironmentUtils":function(){define(["exports"],function(q){const u=/^devext.arcgis.com$/,v=/^qaext.arcgis.com$/,A=/^[\w-]*\.mapsdevext.arcgis.com$/,z=/^[\w-]*\.mapsqa.arcgis.com$/,Q=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,u,v,/^jsapps.esri.com$/,A,z];q.adjustStaticAGOUrl=function(w,L){return w?
(L=L||globalThis.location.hostname)?null!=L.match(u)||null!=L.match(A)?w.replace("static.arcgis.com","staticdev.arcgis.com"):null!=L.match(v)||null!=L.match(z)?w.replace("static.arcgis.com","staticqa.arcgis.com"):w:w:w};q.devHostnames=Q;q.isDevEnvironment=function(w){w=w||globalThis.location.hostname;return Q.some(L=>null!=w?.match(L))};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureTemplates/TemplateItemGroup":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w,L){u=class extends v.IdentifiableMixin(u){constructor(W){super(W);this.label=this.items=null}get id(){return this.label}findByTemplate(W){return this.items.find(B=>B.template===W)}};q.__decorate([A.property()],u.prototype,"items",void 0);q.__decorate([A.property()],u.prototype,"label",void 0);q.__decorate([A.property()],u.prototype,"id",null);return u=q.__decorate([L.subclass("esri.widgets.FeatureTemplates.TemplateItemGroup")],u)})},"esri/widgets/support/templateUtils":function(){define(["exports"],
function(q){q.getAllTemplatesForLayer=u=>{if(null==u||"object"!==typeof u)return[];const v="templates"in u&&Array.isArray(u.templates)?u.templates:[];u="types"in u&&Array.isArray(u.types)?u.types.flatMap(A=>A.templates):[];return[...v,...u]};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureTemplates/ItemList":function(){define(["exports","../support/Heading","../support/widgetUtils","../support/jsxFactory"],function(q,u,v,A){function z(B){const {headingLevel:R,
items:F,...E}=B;return 0===F.length?A.tsx("div",{class:W.noMatchesMessage,key:"no-matches"},B.messages.noMatches):A.tsx("div",{class:v.classes({[W.scroller]:!0,[W.scrollerEnabled]:!!B.enableListScroll}),key:"item-container"},F.map(I=>I.items?L({...E,group:I,headingLevel:R}):w({...E,grouped:!0,item:I})))}function Q(B){const {disabled:R,messages:F,filterText:E,enableListScroll:I}=B;return A.tsx("div",{class:I?void 0:W.filterContainerSticky,key:"filter"},A.tsx("calcite-input",{disabled:R,placeholder:F.filterPlaceholder,
type:"search",value:E,onCalciteInputInput:H=>{H=H.currentTarget;B.onFilterChange&&B.onFilterChange(H.value)}}))}function w(B){const {disabled:R,grouped:F,identify:E,item:I,onItemMouseEnter:H,onItemMouseLeave:y,onItemSelect:O,renderIcon:U,renderCustomItem:P,renderItemContent:S,renderItemContentEnd:Z,renderItemLabel:aa,renderItemDescription:M,selectedItem:G}=B,X=I?`${E?.(I)||I.id}__${I.label}`:"";var C=G?`${E?.(G)||G.id}__${G.label}`:"";const V=X===C;if(B=P?.(B))return B;B=S?.(I);C=Z?.(I);const ia=
!(!I.disabled&&!R);return A.tsx("calcite-list-item",{afterUpdate:oa=>{oa.selected=V},"aria-level":F?"2":"",class:v.classes({[W.item]:!0,[W.itemDisabled]:ia}),"data-item":I,description:B?void 0:M?.(I)??void 0,disabled:ia,key:X,label:B?void 0:aa?.(I)??I.label??void 0,onmouseenter:oa=>H?.(oa.currentTarget["data-item"]),onmouseleave:oa=>y?.(oa.currentTarget["data-item"]),selected:V,tabIndex:ia?-1:0,onCalciteListItemSelect:oa=>{oa.preventDefault();O?.(oa.currentTarget["data-item"])}},A.tsx("div",{class:W.itemIcon,
key:"content-start",slot:"content-start"},U?.(I)),B?A.tsx("div",{key:"content",slot:"content"},B):null,C?A.tsx("div",{class:W.itemContentEnd,key:"content-end",slot:"content-end"},C):null)}function L(B){const {disabled:R,group:F,headingLevel:E=4,selectionMode:I="none",renderCustomGroupContent:H,...y}=B;B=H?.(B);return A.tsx("div",{class:W.group,key:F.label??void 0},A.tsx(u.Heading,{class:W.groupHeader,level:E},F.label),B||A.tsx("calcite-list",{disabled:R,selectionAppearance:"border",selectionMode:I},
F.items.map(O=>w({...y,disabled:R,item:O,grouped:!0}))))}const W={base:"esri-item-list",filterContainerSticky:"esri-item-list__filter-container--sticky",group:"esri-item-list__group",groupHeader:"esri-item-list__group__header",item:"esri-item-list__list-item",itemDisabled:"esri-item-list__list-item--disabled",itemIcon:"esri-item-list__list-item-icon",itemContentEnd:"esri-item-list__list-item-content-end",noMatchesMessage:"esri-item-list__no-matches-message",scroller:"esri-item-list__scroller",scrollerEnabled:"esri-item-list__scroller--enabled"};
q.ItemList=function(B){const {disabled:R,filterText:F="",id:E,messages:I,onFilterChange:H,...y}=B;return A.tsx("div",{key:E},B.filterEnabled??!0?Q({disabled:R,filterText:F,id:E,messages:I,onFilterChange:H}):null,z({...y,disabled:R,enableListScroll:B.enableListScroll??!0,filterText:F,messages:I}))};q.renderGroup=L;q.renderItem=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/FeatureTemplates/VisibleElements":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.filter=!0}};q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"filter",void 0);return u=q.__decorate([w.subclass("esri.widgets.FeatureTemplates.VisibleElements")],u)})},"esri/widgets/Spinner":function(){define("../chunks/tslib.es6 ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Spinner/SpinnerViewModel ./support/widgetUtils ./support/jsxFactory".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F){z=class extends W{constructor(E,I){super(E,I);this._animationDelay=500;this._animationPromise=null;this.viewModel=new B}initialize(){this.addHandles(v.watch(()=>this.visible,E=>this._visibleChange(E)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(E){this.viewModel.location=E}get view(){return this.viewModel.view}set view(E){this.viewModel.view=E}get visible(){return this.viewModel.visible}set visible(E){this.viewModel.visible=
E}show(E){const {location:I,promise:H}=E??{};I&&(this.viewModel.location=I);this.visible=!0;E=()=>this.hide();H&&H.catch(()=>{}).then(E)}hide(){this.visible=!1}render(){var {visible:E}=this,{screenLocation:I}=this.viewModel;I=!!I;E={["esri-spinner--start"]:E&&I,["esri-spinner--finish"]:!E&&I};I=this._getPositionStyles();return F.tsx("div",{class:this.classes("esri-spinner",E),styles:I})}_visibleChange(E){if(E)this.viewModel.screenLocationEnabled=!0;else{var I=u.after(this._animationDelay);this._animationPromise=
I;I.catch(()=>{}).then(()=>{this._animationPromise===I&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}}_getPositionStyles(){const {screenLocation:E,view:I}=this.viewModel;if(null==I||null==E)return{};const {padding:H}=I;return{left:`${E.x-H.left}px`,top:`${E.y-H.top}px`}}};q.__decorate([A.property()],z.prototype,"location",null);q.__decorate([A.property()],z.prototype,"view",null);q.__decorate([A.property({type:B})],z.prototype,"viewModel",void 0);q.__decorate([A.property()],
z.prototype,"visible",null);return z=q.__decorate([L.subclass("esri.widgets.Spinner")],z)})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../support/AnchorElementViewModel".split(" "),function(q,u,v,A,z,Q,w){v=class extends w{constructor(L){super(L);this.visible=!1}};q.__decorate([u.property()],v.prototype,"visible",
void 0);return v=q.__decorate([Q.subclass("esri.widgets.CompassViewModel")],v)})},"esri/widgets/support/AnchorElementViewModel":function(){define("../../chunks/tslib.es6 ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/projection".split(" "),function(q,u,v,A,z,Q,w,L,W){u=class extends u.EventedAccessor{constructor(B){super(B);this.location=null;
this.screenLocationEnabled=!1;this.view=null;this.addHandles([v.when(()=>{const R=this.screenLocationEnabled?this.view:null;return R?[R.size,"3d"===R.type?R.camera:R.viewpoint]:null},()=>this.notifyChange("screenLocation")),v.watch(()=>this.screenLocation,(R,F)=>{null!=R&&null!=F&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){const {location:B,view:R,screenLocationEnabled:F}=this;var E=R?.spatialReference;E=E?W.projectOrLoad(B,E).geometry:null;return F&&E&&R?.ready?R.toScreen(E):
null}};q.__decorate([A.property()],u.prototype,"location",void 0);q.__decorate([A.property()],u.prototype,"screenLocation",null);q.__decorate([A.property()],u.prototype,"screenLocationEnabled",void 0);q.__decorate([A.property()],u.prototype,"view",void 0);return u=q.__decorate([L.subclass("esri.widgets.support.AnchorElementViewModel")],u)})},"esri/widgets/Editor/css":function(){define(["exports","../support/legacyIcon"],function(q,u){q.css={base:"esri-editor",helpMessage:"esri-editor__help-message",
updateActions:"esri-editor__update-actions",updateActionsList:"esri-editor__update-actions-list",featureTemplatesContainer:"esri-editor__feature-templates-container",templateItemContentEnd:"esri-editor__template-item-content-end",widgetIcon:u.legacyIcon.edit};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/EditorViewModel":function(){define("../../chunks/tslib.es6 ../../core/asyncUtils ../../core/Collection ../../core/deprecate ../../core/Error ../../core/Evented ../../core/handleUtils ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../layers/GraphicsLayer ../../layers/support/editableLayers ../../layers/support/layerUtils ../../portal/support/urlUtils ../Attachments/AttachmentsViewModel ./CreateFeaturesWorkflow ./UpdateWorkflow ./workflowUtils ../FeatureForm/featureFormUtils ../FeatureTemplates/FeatureTemplatesViewModel ../Sketch/SketchViewModel ../Spinner/SpinnerViewModel".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G,X,C,V,ia){function oa(J,ea,ba){L.getLogger("esri.widgets.Editor.EditorViewModel").error(new z(J,ea,ba))}function ma(J,ea){return J?.find(ba=>ba.layer===ea)}const D=["create-features","update"];Q=class extends Q.EventedAccessor{constructor(J){super(J);this._editableItems=new v;this._sketchEventListenerHandle=null;this._sketchGraphicsLayer=new O({listMode:"hide",internal:!0});this._updateEditableItemsTask=null;this._updatingHandles=new y.UpdatingHandles;
this._featureTemplatesViewModelLocked=!1;this.activeWorkflow=null;this._activityQueue=[];this.failures=[];this.hideTemplatesForInactiveLayers=!1;this.attachmentsViewModel=new Z({capabilities:{editing:!0}});this.featureTemplatesViewModel=new C({disabledItemFunction:({layer:ea})=>this._itemIsSuspended(ea)});this.ownSketchViewModel=new V({layer:this._sketchGraphicsLayer});this.spinnerViewModel=new ia;this.pageStack=[];this.showDiscardEditsPrompt=()=>Promise.resolve(!0);this._candidateCommitted=!1;this.back=
async()=>{this.canGoBack&&(this.activeWorkflow?.hasPreviousStep?await this.activeWorkflow.back(this.showDiscardEditsPrompt):await this._cancelWorkflow({force:!this.hasPendingEdits}))};this.saveWorkflow=async()=>{const {featureFormViewModel:ea}=this;if(ea){ea.submit();if(!ea.submittable)return;const ba=ea.getValues();if(0<ea.validateContingencyConstraints(ba,{includeIncompleteViolations:!0}).length)return}await this.activeWorkflow?.save()};this.selectFeature=(ea,ba=!1)=>{const T=this.activeWorkflow;
this._candidateCommitted||"update"!==T?.type||(T.data.rootFeature=ea,ba&&(T.next(),this._candidateCommitted=!0))}}initialize(){this.addHandles([R.watch(()=>{const J=this.view?.map?.editableLayers.filter(({parent:ba,visible:T})=>ba&&"visible"in ba?T&&ba.visible:T),ea=this.view?.allLayerViews?.filter(ba=>!!J?.includes(ba.layer)&&!ba.suspended);return[J,ea,this.layerInfos,this.allowedWorkflows,this.hideTemplatesForInactiveLayers]},()=>this._updateEditableItems(),R.syncAndInitial),R.on(()=>this.activeWorkflow,
"cancel",()=>this.emit("workflow-cancel")),R.on(()=>this.activeWorkflow,"commit",()=>this.emit("workflow-commit")),R.on(()=>this.activeWorkflow,"complete",()=>{this.emit("workflow-commit");this._set("activeWorkflow",null)}),R.when(()=>this.view?.map,J=>J.add(this._sketchGraphicsLayer),R.initial),R.watch(()=>this._editableItems.toArray(),()=>{const {activeWorkflow:J}=this;this.syncFeatureTemplates();if(J){var {stepId:ea}=J;"create-features"===J.type?"awaiting-feature-creation-info"!==ea||this.canCreate||
this._cancelWorkflow():"update"===J.type&&("awaiting-feature-to-update"===ea&&!this.canUpdate||"awaiting-update-feature-candidate"===ea&&!J.data.candidates.some(ba=>this._editableItems.find(T=>T.layer===ba.layer)?.supports.includes("update")))&&this._cancelWorkflow()}}),R.watch(()=>this.page,(J,ea)=>{ea=[...this.pageStack];if(-1===ea.indexOf(J))ea.push(J);else for(;ea.length&&ea.at(-1)!==J;)ea.pop();this.pageStack=ea},R.syncAndInitial),R.when(()=>"awaiting-update-feature-candidate"===this.state,()=>
this._candidateCommitted=!1),R.on(()=>this.featureTemplatesViewModel,"select",async({item:J,oldItem:ea})=>{var {activeWorkflow:ba}=this;if(ba){if("update"===ba.type&&"awaiting-feature-creation-info"===ba.activeWorkflow?.stepId)return;try{await this.cancelWorkflow({force:!this.hasPendingEdits})}catch{this.featureTemplatesViewModel.select(ea,{emit:!1});return}}if(J){ba={layer:J.layer,template:J.template};if(J.supportsUpload)return this.featureTemplatesViewModel.select(ea,{emit:!1}),this.startCreateFeaturesWorkflow(ba);
this.startCreateFeaturesWorkflowAtFeatureCreation(ba)}}),R.on(()=>this.view,"key-down",J=>{"Escape"===J.key&&this.activeWorkflow?.keyboardCancellationEnabled&&(J.stopPropagation(),this.back())}),R.on(()=>this.sketchViewModel,["create","delete","update"],J=>{const {activeWorkflow:ea}=this,ba="update"===ea?.type,T=`sketch-${J.type}`;this.emit(T,{type:T,detail:J,layer:ba?ea.activeWorkflow?.layer:ea?.layer,parentLayer:ba?ea?.activeWorkflow?.parentLayer:void 0})},R.sync)])}destroy(){this._cancelWorkflow({warnIfNoWorkflow:!1}).then(()=>
{this.view?.map?.remove(this._sketchGraphicsLayer);this.view=null});this._updateEditableItemsTask=W.abortMaybe(this._updateEditableItemsTask);this._updatingHandles.destroy();this._sketchEventListenerHandle=W.removeMaybe(this._sketchEventListenerHandle)}get allowedWorkflows(){return this._get("allowedWorkflows")}set allowedWorkflows(J){J&&0!==J.length||(J=[...D]);this._set("allowedWorkflows",J)}get canCreate(){return this._editableItems.some(J=>J.supports.includes("create")&&!J.suspended)}get canUpdate(){return this._editableItems.some(({attachmentsOnUpdateEnabled:J,
layer:ea,supports:ba,suspended:T})=>{J=!T&&(ba.includes("update")||ba.includes("delete")||J);ba=ea.parent;ba=!(ba&&"visible"in ba)||!!ba.visible;return ea.visible&&ba&&J})}get editableItems(){return this._editableItems}get featureFormViewModel(){const {activeWorkflow:J}=this;return"update"===J?.type?J.activeFeatureFormViewModel:"create-features"===J?.type?J.featureFormViewModel:null}get labelOptions(){return this.ownSketchViewModel.labelOptions}set labelOptions(J){this.ownSketchViewModel.labelOptions=
J}set layerInfos(J){J?.some(ea=>"allowAttachments"in ea)&&A.deprecated(L.getLogger("esri.widgets.Editor.EditorViewModel"),"Property: layerInfo.allowAttachments",{replacement:"layerInfo.attachmentsOnCreateEnabled or layerInfo.attachmentsOnUpdateEnabled",version:"4.26"});this._set("layerInfos",J)}get sketchOptions(){return this.ownSketchViewModel.sketchOptions}get sketchViewModel(){const {activeWorkflow:J}=this;return"update"===J?.type?J.activeSketchViewModel:"create-features"===J?.type?J.sketchViewModel:
this.ownSketchViewModel}get snappingOptions(){return this.ownSketchViewModel.snappingOptions}set snappingOptions(J){this.ownSketchViewModel.snappingOptions=J}get state(){if(!this.view?.ready)return"disabled";var J=this.attachmentsViewModel.mode;if("add"===J)return"adding-attachment";if("edit"===J)return"editing-attachment";({activeWorkflow:J}=this);return J?.stepId?"update"===J.type&&J.activeWorkflow?.stepId?J.activeWorkflow.stepId:J.stepId:"ready"}get syncing(){return 0<this._activityQueue.length}get updating(){return this._updatingHandles.updating||
!0===this.activeWorkflow?.updating}get tooltipOptions(){return this.ownSketchViewModel.tooltipOptions}set tooltipOptions(J){this.ownSketchViewModel.tooltipOptions=J}get valueOptions(){return this.ownSketchViewModel.valueOptions}set valueOptions(J){this.ownSketchViewModel.valueOptions=J}set view(J){this.ownSketchViewModel.view=J;this.spinnerViewModel.view=J;this._set("view",J)}get page(){const {activeWorkflow:J,state:ea}=this;if("update"===J?.type&&"awaiting-feature-to-update"===J.stepId)return"ready";
if("create-features"===J?.type&&0===J.numPendingFeatures){const ba=J.data.upload;if(ba)return"default"===ba.state?"ready":"creating-features-upload-details"}return ea??"disabled"}get featureFormDisabled(){const {activeWorkflow:J}=this;return"update"===J?.type&&!1===J.activeEditableItem?.attributeUpdatesEnabled}get canGoBack(){return null!=this.activeWorkflow&&!this.syncing}get shouldShowDeleteButton(){const {activeWorkflow:J}=this;return!!J&&"update"===J.type&&!!J.activeEditableItem?.supports.includes("delete")}get hasPendingEdits(){return this.activeWorkflow?.hasPendingEdits??
!1}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.startCreateFeaturesWorkflow()}async startCreateFeaturesWorkflowAtFeatureCreation(J){return this.startCreateFeaturesWorkflow(J,"creating-features")}async startCreateFeaturesWorkflow(J,ea="awaiting-feature-creation-info"){await R.whenOnce(()=>!this.updating);if(!this.canCreate)throw new z("editing:unsupported-workflow","Creating features is unsupported or disabled.");const ba=this._createUpdatingResolver();await this._cancelWorkflow();
J=this._createCreateFeaturesWorkflow(J,ea);this._set("activeWorkflow",J);await J.start();ba.resolve()}async startCreateFeaturesWorkflowAtFeatureEdit(J){await R.whenOnce(()=>!this.updating);const ea=this._createUpdatingResolver();({initialFeature:J}=J);var ba=J.sourceLayer;ba=ba?this.findEditableItemForLayer(ba):void 0;if(!this.canCreate||!ba)throw new z("editing:unsupported-workflow","Creating features is unsupported or disabled.");await this._cancelWorkflow();J=this._createCreateFeaturesWorkflow({initialFeature:J,
layer:ba.layer,maxFeatures:1},"creating-features");this._set("activeWorkflow",J);await J.start();ea.resolve()}async startUpdateWorkflowAtFeatureSelection(){await R.whenOnce(()=>!this.updating);if(this.canUpdate){var J=this._createUpdatingResolver();await this._cancelWorkflow();var ea=this._createUpdateWorkflow();this._set("activeWorkflow",ea);await ea.start();J.resolve()}else oa("editing:unsupported-workflow","Update workflow is unsupported or disabled.")}async startUpdateWorkflowAtMultipleFeatureSelection(J){await R.whenOnce(()=>
!this.updating);if(this.canUpdate){var ea=this._createUpdatingResolver();await this._cancelWorkflow();var ba=this._createUpdateWorkflow("awaiting-update-feature-candidate");ba.data.candidates=J;this._set("activeWorkflow",ba);await ba.start();ea.resolve()}else oa("editing:unsupported-workflow","Update workflow is unsupported or disabled.")}async startUpdateWorkflowAtFeatureEdit(J){await R.whenOnce(()=>!this.updating);if(this.canUpdate){var ea=this._createUpdatingResolver();await this._cancelWorkflow();
var ba=this._createUpdateWorkflow("editing-existing-feature");ba.data.rootFeature=J;this._set("activeWorkflow",ba);await ba.start();ea.resolve()}else oa("editing:unsupported-workflow","Update workflow is unsupported or disabled.")}async deleteFeatureFromWorkflow(){const {activeWorkflow:J}=this;J&&"update"===J.type?await J.deleteActiveFeature():oa("editing:unsupported-workflow","Deleting requires an active update workflow.")}async cancelWorkflow(J){return this._cancelWorkflow({warnIfNoWorkflow:!0,
...J})}findEditableItemForLayer(J){const ea="subtype-sublayer"===J.type?J.parent:J;return this._editableItems.find(ba=>ba.layer===ea)}itemHasInvalidFormTemplate(J){return J?this.findEditableItemForLayer(J.layer)?.hasInvalidFormTemplate??!1:!1}itemHasUnsupportedFields(J){return J?this.findEditableItemForLayer(J.layer)?.hasUnsupportedFields??!1:!1}syncFeatureTemplates(){if(!this._featureTemplatesViewModelLocked){var J=[];for(const {layer:ea,supports:ba}of this._editableItems)ea.loaded&&ba.includes("create")&&
!P.isTable(ea)&&J.push(ea);this.featureTemplatesViewModel.layers=J}}async toggleUpdateWorkflow(){!this.canUpdate||this.hasPendingEdits&&!await this.showDiscardEditsPrompt()||(this.activeWorkflow&&"awaiting-feature-to-update"===this.state?await this.cancelWorkflow({force:!0}):await this.startUpdateWorkflowAtFeatureSelection())}lockFeatureTemplatesViewModel(){this._featureTemplatesViewModelLocked=!0;return w.makeHandle(()=>{this._featureTemplatesViewModelLocked=!1;this.syncFeatureTemplates()})}async _updateEditableItems(){W.abortMaybe(this._updateEditableItemsTask);
const J=u.createTask(async ea=>{const ba=this.view?.allLayerViews;var T=this.view?.map,Y=T?.editableLayers.toArray()??[];T=T?.allTables.toArray().filter(P.isFeatureLayer)??[];await Promise.allSettled(T.map(va=>va.load()));T=T.filter(va=>U.isEditableLayer(va));var fa=[...Y.reverse(),...T.reverse()].filter(va=>"mesh"===va.geometryType?"3d"===this.view?.type:!0);if(ba&&Y){Y=[];T=[];for(const va of fa){var pa=ba.find(xa=>xa.layer===va);fa=pa?Y:T;pa=!!pa?.suspended;if(!pa||!this.hideTemplatesForInactiveLayers)if("subtype-group"===
va.type){await va.loadAll();B.throwIfAborted(ea);for(let xa=va.sublayers.length-1;0<=xa;--xa)fa.push(this._makeEditableItemForLayer(va.sublayers.at(xa),pa))}else fa.push(this._makeEditableItemForLayer(va,pa))}ea.aborted||(ea=this._editableItems,this._editableItems=new v(Y.concat(T)),ea.destroy())}});this._updatingHandles.addPromise(J.promise);this._updateEditableItemsTask=J}async _cancelWorkflow(J){const ea=this.activeWorkflow;ea?J&&!1===J.force?(await ea.cancel(J),this._set("activeWorkflow",null)):
(this.emit("workflow-cancel"),this._set("activeWorkflow",null),await ea.cancel(J)):J?.warnIfNoWorkflow&&oa("editing:no-active-workflow","There is no active workflow to cancel.")}_createCreateFeaturesWorkflow(J,ea){return aa.create({viewModel:this,creationInfo:J,startAt:ea,applyEditsCallback:(ba,T,Y)=>this._applyEdits(ba,T,Y),addAttachmentsCallback:(ba,T)=>this._addAttachments(ba,T)})}_createUpdateWorkflow(J){return M.create({viewModel:this,startAt:J,applyEditsCallback:(ea,ba,T)=>this._applyEdits(ea,
ba,T),addAttachmentsCallback:(ea,ba)=>this._addAttachments(ea,ba)})}_addAttachments(J,ea){ea=ea.map(ba=>this._addAttachment(J,ba.feature,ba.attachment))??[];return Promise.all(ea)}async _addAttachment(J,ea,ba){let T=null;if(!("addAttachment"in J)||null==J.capabilities?.attachment)throw new z("editor:attachments-not-supported","Adding attachments is not supported for this layer type");await this._queueOperation(async()=>T=await J.addAttachment?.(ea,ba).catch(Y=>{throw Y?.error||Y;})??null);return T}async _applyEdits(J,
ea,ba){let T=null;const Y=J.url?await P.getOwningPortalUrl(J.url):null,fa={returnServiceEditsOption:Y&&S.parseKnownArcGISOnlineDomain(Y)||RegExp("/hosted/","i").test(J.url)?void 0:"original-and-current-features",...ba};await this._queueOperation(async()=>{const {view:pa}=this;if(!pa)return null;const va=await G.whenEditorLayerView(pa,J).catch(()=>null);T=await J.applyEdits(ea,fa);va&&await R.whenOnce(()=>!va.updating);return T});return T}_queueOperation(J){this._activityQueue.push(J);this.notifyChange("syncing");
const ea=(ba,T)=>{ba=T.indexOf(ba);-1<ba&&T.splice(ba,1)};return J().then(ba=>{if(null!=ba&&"error"in ba&&null!=ba.error)throw ba.error;if(null!=ba&&"addFeatureResults"in ba){const {addFeatureResults:T,deleteFeatureResults:Y,updateFeatureResults:fa}=ba,pa=T.find(va=>!!va.error)||fa.find(va=>!!va.error)||Y.find(va=>!!va.error);if(pa)throw pa.error;}return ba}).catch(ba=>{oa("editing:operation-error","An error occurred.",{error:ba});const T={error:ba,retry:()=>{ea(T,this.failures);return this._queueOperation(J)},
cancel:()=>{ea(T,this.failures)}};this._set("failures",[...this.failures,T])}).then(()=>{ea(J,this._activityQueue);this.notifyChange("syncing")})}_createUpdatingResolver(){const J=B.createResolver();this._updatingHandles.addPromise(J.promise);return J}_makeEditableItemForLayer(J,ea=!0){const ba=P.getEffectiveLayerCapabilities(J);var T=ba?.operations;const Y=ma(this.layerInfos,J),fa=X.formTemplateHasInvalidFields(J),pa=fa||ea;var {allowedWorkflows:va}=this;const xa=va.includes("create-features");var ya=
va.includes("update");va=ya&&!!T?.supportsUpdate&&(!Y||!1!==Y.enabled&&!1!==Y.updateEnabled);const Da=!pa&&ya&&!!T?.supportsDelete&&(!Y||!1!==Y.enabled&&!1!==Y.deleteEnabled);ya=[];xa&&T?.supportsAdd&&(!Y||!1!==Y.enabled&&!1!==Y.addEnabled)&&ya.push("create");va&&ya.push("update");Da&&ya.push("delete");T=!!ba?.data?.supportsAttachment&&(!Y||!1!==Y.allowAttachments);return{layer:J,supports:ya,suspended:ea,attributeUpdatesEnabled:va&&!pa&&(!Y||!1!==Y.attributeUpdatesEnabled),geometryUpdatesEnabled:va&&
!pa&&!!ba?.editing?.supportsGeometryUpdate&&(!Y||!1!==Y.geometryUpdatesEnabled),hasAttachments:T,attachmentsOnCreateEnabled:T&&xa&&(!Y||!1!==Y.attachmentsOnCreateEnabled),attachmentsOnUpdateEnabled:!pa&&T&&(!Y||!1!==Y.attachmentsOnUpdateEnabled),hasInvalidFormTemplate:fa,hasUnsupportedFields:!1}}_itemIsSuspended(J){return this.findEditableItemForLayer(J)?.suspended??!1}};q.__decorate([F.property()],Q.prototype,"_editableItems",void 0);q.__decorate([F.property({readOnly:!0})],Q.prototype,"activeWorkflow",
void 0);q.__decorate([F.property({readOnly:!0})],Q.prototype,"_activityQueue",void 0);q.__decorate([F.property({value:[...D]})],Q.prototype,"allowedWorkflows",null);q.__decorate([F.property({readOnly:!0})],Q.prototype,"canCreate",null);q.__decorate([F.property({readOnly:!0})],Q.prototype,"canUpdate",null);q.__decorate([F.property()],Q.prototype,"editableItems",null);q.__decorate([F.property({readOnly:!0})],Q.prototype,"failures",void 0);q.__decorate([F.property()],Q.prototype,"hideTemplatesForInactiveLayers",
void 0);q.__decorate([F.property()],Q.prototype,"attachmentsViewModel",void 0);q.__decorate([F.property()],Q.prototype,"featureFormViewModel",null);q.__decorate([F.property()],Q.prototype,"featureTemplatesViewModel",void 0);q.__decorate([F.property()],Q.prototype,"labelOptions",null);q.__decorate([F.property()],Q.prototype,"layerInfos",null);q.__decorate([F.property()],Q.prototype,"ownSketchViewModel",void 0);q.__decorate([F.property()],Q.prototype,"sketchOptions",null);q.__decorate([F.property()],
Q.prototype,"sketchViewModel",null);q.__decorate([F.property()],Q.prototype,"snappingOptions",null);q.__decorate([F.property()],Q.prototype,"spinnerViewModel",void 0);q.__decorate([F.property()],Q.prototype,"state",null);q.__decorate([F.property({readOnly:!0})],Q.prototype,"syncing",null);q.__decorate([F.property()],Q.prototype,"updating",null);q.__decorate([F.property()],Q.prototype,"tooltipOptions",null);q.__decorate([F.property()],Q.prototype,"valueOptions",null);q.__decorate([F.property()],Q.prototype,
"view",null);q.__decorate([F.property()],Q.prototype,"pageStack",void 0);q.__decorate([F.property()],Q.prototype,"showDiscardEditsPrompt",void 0);q.__decorate([F.property()],Q.prototype,"_candidateCommitted",void 0);q.__decorate([F.property()],Q.prototype,"page",null);q.__decorate([F.property()],Q.prototype,"featureFormDisabled",null);q.__decorate([F.property()],Q.prototype,"canGoBack",null);q.__decorate([F.property()],Q.prototype,"shouldShowDeleteButton",null);q.__decorate([F.property()],Q.prototype,
"hasPendingEdits",null);return Q=q.__decorate([H.subclass("esri.widgets.Editor.EditorViewModel")],Q)})},"esri/layers/GraphicsLayer":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),function(q,u,v,A,z,Q,w,L,W,B,R,F){v=
class extends W.BlendLayer(B.ScaleRangeLayer(L)){constructor(E){super(E);this.elevationInfo=null;this.graphics=new R.GraphicsCollection;this.screenSizePerspectiveEnabled=!0;this.type="graphics";this.internal=!1}destroy(){this.removeAll();this.graphics.destroy()}add(E){this.graphics.add(E);return this}addMany(E){this.graphics.addMany(E);return this}removeAll(){this.graphics.removeAll();return this}remove(E){this.graphics.remove(E)}removeMany(E){this.graphics.removeMany(E)}on(E,I){return super.on(E,
I)}graphicChanged(E){this.emit("graphic-update",E)}};q.__decorate([u.property({type:F})],v.prototype,"elevationInfo",void 0);q.__decorate([u.property(w.owningCollectionProperty(R.GraphicsCollection,"graphics"))],v.prototype,"graphics",void 0);q.__decorate([u.property({type:["show","hide"]})],v.prototype,"listMode",void 0);q.__decorate([u.property()],v.prototype,"screenSizePerspectiveEnabled",void 0);q.__decorate([u.property({readOnly:!0})],v.prototype,"type",void 0);q.__decorate([u.property({constructOnly:!0})],
v.prototype,"internal",void 0);return v=q.__decorate([Q.subclass("esri.layers.GraphicsLayer")],v)})},"esri/widgets/Editor/CreateFeaturesWorkflow":function(){define("require ../../chunks/tslib.es6 ../../Graphic ../../core/arrayUtils ../../core/handleUtils ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/uuid ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../layers/support/layerUtils ../../views/draw/support/helpMessageUtils ../../views/interactive/snapping/FeatureSnappingLayerSource ./CreateFeaturesWorkflowData ./modelUploadUtils ./Workflow ./workflowUtils ../FeatureForm/FeatureFormViewModel ../Sketch/SketchViewModel".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M){function G(D,J){let ea=null;const ba=()=>{null!=ea&&(D.snappingOptions.featureSources.remove(ea),ea=Q.destroyMaybe(ea))};return z.handlesGroup([L.watch(()=>{const T=J.creationInfo?.layer,Y=D.snappingOptions.featureSources.find(fa=>fa.layer===T);return{hasFeatureLayerSource:!!Y,enabled:Y?.enabled??!1}},({hasFeatureLayerSource:T,enabled:Y})=>{if(T)null==ea&&(ea=new O({layer:D.layer}),D.snappingOptions.featureSources.add(ea)),ea.enabled=Y;else return ba()},
L.syncAndInitial),z.makeHandle(ba)])}function X(D,J,ea,ba){const T=[];J.forEach((Y,fa)=>{if(!Y.error){const pa=D[fa];fa=ba.get(pa)||[];pa.attributes[ea.objectIdField]=Y.objectId;fa.forEach(({form:va})=>T.push({feature:pa,attachment:va}))}});return T}function C(D,J,ea){const ba=[],T=J.globalIdField;D.forEach((Y,fa)=>{let pa;(pa=D[fa].attributes)[T]??(pa[T]=W.generateBracedUUID());(ea?.get(Y)||[]).forEach(({file:va})=>ba.push({feature:Y,attachment:{globalId:W.generateBracedUUID(),data:va}}))});return ba.length?
{addFeatures:D,addAttachments:ba}:{addFeatures:D}}var V;const ia=Symbol(),oa=Symbol(),ma=Symbol();R=V=class extends S{constructor(D){super(D);this.type="create-features";this.createFeatureState="create-new";this.isNested=!1;this._getDrawMeshHelpMessage=void 0;this._featureFormHandle=null;this._visualVariableAttributes={rotation:null,size:null};this._featureFormViewModel=new aa;this._sketchViewModel=null;this._attachmentFileInfos=new Map;this._highlightHandles=new Map;this._preventDefaultActionOnCancel=
!1;this._lastActiveGraphics=[];this._isActive=!0;this._updateGraphicDebounced=w.debounce((J,ea,ba)=>Z.updateGraphicSymbolWhenRequired(J,ea,ba))}initialize(){this.isNested&&(this._isActive=!1);this._initializeSketchViewModel()}destroy(){this._sketchViewModel.destroy()}get featureFormViewModel(){return this._featureFormViewModel}get hasPendingEdits(){if(0<this.numPendingFeatures)return!0;const {creationInfo:D,upload:J}=this.data;var ea=this._sketchViewModel;const {activeComponent:ba}=ea;ea=ea.createGraphic?.geometry?.type;
return!("polyline"!==ea&&"polygon"!==ea&&"multipoint"!==ea||"draw-2d"!==ba?.type&&"draw-3d"!==ba?.type)&&0<ba.drawOperation.committedVertices.length||J&&("pending"===J.state||"success"===J.state)||D?.geometryToPlace?!0:!1}get helpMessage(){const {creationInfo:D,viewModel:J}=this.data;if("creating-features"===this.stepId&&D){var ea=D.layer.geometryType,ba=this._sketchViewModel.createGraphic;return"mesh"===ea?(this._getDrawMeshHelpMessage||(new Promise((T,Y)=>q(["../../views/draw/support/helpMessageUtils3d"],
T,Y))).then(T=>{this._getDrawMeshHelpMessage=T.getDrawMeshHelpMessage}),{view:ea}=J,"3d"===ea?.type?this._getDrawMeshHelpMessage?.(ba,ea):void 0):y.getDrawHelpMessage(ea,ba?.geometry)}}get layer(){return this.data.creationInfo?.layer}get numPendingFeatures(){return this.pendingFeatures.length}get parent(){return this.data.parent}get parentLayer(){return this.parent?.data.editableItem.layer}get pendingFeatures(){return this.data.pendingFeatures}get keyboardCancellationEnabled(){return 0===this.numPendingFeatures}get reliesOnOwnerAdminPrivileges(){var {creationInfo:D}=
this.data;if(!D)return!1;({layer:D}=D);const J=D.capabilities?.operations.supportsAdd,ea=H.getEffectiveLayerCapabilities(D)?.operations.supportsAdd;return H.getEffectiveEditingEnabled(D)&&!D.editingEnabled||!!ea&&!J}get shouldShowAttachments(){const {data:D}=this;return D.creationInfo&&D.viewModel?Z.shouldShowAttachmentsForCreateFeaturesWorkflow(D):!1}get shouldAllowAttachmentEditing(){return this.shouldShowAttachments}get sketchViewModel(){return this._sketchViewModel}get test(){return{addAttachment:(D,
J)=>{this._attachmentFileInfos.set(D,J)},sketchViewModel:this._sketchViewModel}}async enter(){this._isActive=!0;"awaiting-feature-creation-info"!==this.stepId&&this._setUpCreatingFeaturesStep()}exit(){this._isActive=!1;this.removeHandles([ma])}async updatePendingFeature(D,J){this._preventDefaultActionOnCancel=!0;this._sketchViewModel.cancel();A.remove(this._lastActiveGraphics,D);return this._startUpdating(D,J)}async start(){await super.start();return H.isTable(this.data.creationInfo?.layer)?null:
{enter:async()=>{},exit:async()=>{},viewModel:this._sketchViewModel}}static create(D){const {addAttachmentsCallback:J,applyEditsCallback:ea,isNested:ba,creationInfo:T,parent:Y,startAt:fa,viewModel:pa}=D,va=new V({data:new U.CreateFeaturesWorkflowData({creationInfo:T,parent:Y,viewModel:pa}),isNested:ba,onCommit:async xa=>{var {creationInfo:ya}=xa;if(ya){xa=xa.pendingFeatures.toArray();({layer:ya}=ya);var Da=va._attachmentFileInfos;if(ya.capabilities?.editing.supportsGlobalId&&"globalIdField"in ya)xa=
C(xa,ya,Da),await ea(ya,xa,{globalIdUsed:!0});else{var Ca=await ea(ya,{addFeatures:xa});0<Da.size&&await J(ya,X(xa,Ca?.addFeatureResults??[],ya,Da))}}}});va._set("steps",this._createWorkflowSteps(va,fa));return va}_fadeExistingFeatures(D){if("effect"in D){const ea=D.effect;D.effect="saturate(0.6) opacity(0.8)";return z.makeHandle(()=>D.effect=ea)}const J=D.opacity;D.opacity=.7;return z.makeHandle(()=>D.opacity=J)}_highlight(D){const J=this.data.viewModel.view;"3d"===J?.type&&this._highlightHandles.set(D,
J.highlight(D))}_removeHighlight(D){Q.removeMaybe(this._highlightHandles.get(D));this._highlightHandles.delete(D)}async _startCreating(D){this.removeHandles(oa);const {creationInfo:J}=this.data;J&&(this.createFeatureState="create-new",D=await Z.startCreatingNewFeature(this._sketchViewModel,J,D),this.addHandles(D,oa))}async _startUpdating(D,J){var {pendingFeatures:ea}=this;ea.includes(D)||ea.add(D);const {_featureFormViewModel:ba,_sketchViewModel:T}=this,{creationInfo:Y,viewModel:fa}=this.data,{attachmentsViewModel:pa,
editableItems:va,layerInfos:xa,view:ya}=fa;if(ya&&Y){var Da=Y.layer;ea=Z.findLayerInfo(xa,Da)?.formTemplate;var Ca=ya.spatialReference;this.data.editableItem=va.find(Ka=>Ka.layer===Da);ba.set({arcadeEditType:"INSERT",feature:D,formTemplate:ea,spatialReference:Ca,map:ya.map});"add"!==pa.mode&&"edit"!==pa.mode||fa.activeWorkflow?.previous();pa.graphic=D;pa.fileInfos.removeAll();pa.mode="view";(this._attachmentFileInfos.get(D)||[]).forEach(({file:Ka,form:Oa})=>pa.addFile(Ka,Oa));this._removeHighlight(D);
await Z.updateGraphicSymbolWhenRequired(D,J,"2d"===ya.type?ya.scale:null);this.removeHandles(oa);Q.removeMaybe(this._featureFormHandle);"2d"===ya.type&&(ea=L.watch(()=>ya.scale,Ka=>this._updateGraphicDebounced(D,J,Ka)),this.addHandles(ea,oa));this._featureFormHandle=z.handlesGroup([ba.on("value-change",async()=>{D.attributes=ba.getValues();await Z.updateGraphicSymbolWhenRequired(D,J,"2d"===ya.type?ya.scale:null)}),T.on(["update","undo","redo"],Ka=>{("undo"===Ka.type||"redo"===Ka.type||"update"===
Ka.type&&null!=Ka.toolEventInfo&&Z.isTerminalUpdateEventType(Ka.toolEventInfo.type))&&ba.notifyFeatureGeometryChanged()})]);this.createFeatureState="update-pending";this._visualVariableAttributes=Z.getVisualVariableAttributes(D);if(!H.isTable(Da))return Z.startUpdatingFeature({graphic:D,sketchViewModel:T,sourceLayer:Da,visualVariables:this._visualVariableAttributes,webStyleCache:J})}}static _createWorkflowSteps(D,J="awaiting-feature-creation-info"){const {data:ea}=D;J=Z.createWorkflowSteps(["awaiting-feature-creation-info",
"creating-features","adding-attachment","editing-attachment"],J,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){const {creationInfo:ba,viewModel:T}=ea,{view:Y}=T;Y&&(P.isModelUpload(ba)?D.addHandles(await P.handleModelUpload({view:Y,data:ea,next:()=>D.next(),cancel:()=>T.cancelWorkflow({warnIfNoWorkflow:!1})}),this.id):(ea.parent&&ba&&(D.addHandles(T.lockFeatureTemplatesViewModel(),this.id),T.featureTemplatesViewModel.layers=[ba.layer]),D.addHandles(T.featureTemplatesViewModel.on("select",
({item:fa})=>{fa&&(ea.creationInfo={...ea.creationInfo,layer:fa.layer,template:fa.template},D.next())}),this.id)))},async tearDown(){D.removeHandles([this.id,oa])}}),"creating-features":()=>({id:"creating-features",async setUp(){D._isActive&&await D._setUpCreatingFeaturesStep()},async tearDown(ba){const {viewModel:T}=ea;ba.canceled&&(D.removeHandles([ma,ia,oa]),T.attachmentsViewModel.fileInfos.removeAll(),D._attachmentFileInfos.clear())}}),"adding-attachment":()=>({id:"adding-attachment",parent:"creating-features",
async setUp(){},async tearDown(){const {attachmentsViewModel:ba}=ea.viewModel,{graphic:T,fileInfos:Y}=ba;D._attachmentFileInfos.set(T,Y.toArray());ba.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"creating-features",async setUp(){},async tearDown(){const {attachmentsViewModel:ba}=ea.viewModel,{graphic:T,fileInfos:Y}=ba;D._attachmentFileInfos.set(T,Y.toArray());ba.mode="view"}})});return Z.avoidFeatureTemplateSelectionWithOnlyOneItem(ea,J)}static _configureSketchViewModel(D,
J){const {data:ea}=D,{creationInfo:ba,viewModel:T}=ea,{view:Y}=T,fa=D._sketchViewModel;let pa=null;const va=[];if(!Y)return z.makeHandle();"2d"===Y.type&&ba&&va.push(D._fadeExistingFeatures(ba.layer));va.push(fa.on("create",async xa=>{if("cancel"===xa.state){if(D._preventDefaultActionOnCancel){D._preventDefaultActionOnCancel=!1;return}if(1>D._lastActiveGraphics.length)return D._startCreating(J);xa=D._lastActiveGraphics.pop();return D._startUpdating(xa,J)}if("complete"===xa.state&&xa.graphic)return D._startUpdating(xa.graphic,
J)}),fa.on("update",async xa=>{var {attachmentsViewModel:ya}=T;const {_featureFormViewModel:Da}=D;var Ca=xa.graphics[0];if("complete"===xa.state){Ca!==pa&&(D._lastActiveGraphics.push(Ca),D._highlight(Ca));pa=null;if(D.numPendingFeatures===ba?.maxFeatures)return xa=D._lastActiveGraphics.pop(),D._startUpdating(xa,J);"add"!==ya.mode&&"edit"!==ya.mode||T.activeWorkflow?.previous();if(xa.aborted&&D._preventDefaultActionOnCancel){D._preventDefaultActionOnCancel=!1;return}D.addHandles([Z.showProgressCursor(Y),
Y.on("click",Ba=>Ba.preventDefault())],ia);await L.whenOnce(()=>!Da.updating);D.removeHandles(ia);D._startCreating(J)}"start"===xa.state&&D._removeHighlight(Ca);ya=D._visualVariableAttributes;await Z.visualVariableInteractiveUpdate(Y,Ca,xa,ya,J);xa=Ca.attributes;const {rotation:Ka,size:Oa}=ya;null!=Ka&&({field:Ca}=Ka,Da.setValue(Ca,xa[Ca]));null!=Oa&&({field:Ca}=Oa,Da.setValue(Ca,xa[Ca]))}),fa.on("delete",async xa=>{xa=xa.graphics[0];D.pendingFeatures.remove(xa);A.remove(D._lastActiveGraphics,xa);
pa=xa}),Y.on("immediate-click",async xa=>{!P.isModelUpload(ba)&&({results:xa}=await Y.hitTest(xa,{include:fa.layer}),xa=xa.find(ya=>"graphic"===ya.type&&ya.graphic.sourceLayer===ba?.layer))&&(xa=xa.graphic,"transform"!==fa.activeTool&&"reshape"!==fa.activeTool||fa.updateGraphics.at(0)===xa||await D.updatePendingFeature(xa,J))}),z.makeHandle(()=>{D._preventDefaultActionOnCancel=!0;fa.cancel()}),G(fa,ea));return z.handlesGroup(va)}_initializeSketchViewModel(){const {creationInfo:D,viewModel:J}=this.data,
{labelOptions:ea,snappingOptions:ba,tooltipOptions:T,valueOptions:Y,view:fa}=J,pa=new I({elevationInfo:D?.layer.elevationInfo,internal:!0,listMode:"hide"}),va=new M({labelOptions:ea,layer:pa,snappingOptions:ba,tooltipOptions:T,valueOptions:Y,updateOnGraphicClick:!1,view:fa});this._sketchViewModel=va;this.addHandles([L.watch(()=>[J.labelOptions,J.snappingOptions,J.tooltipOptions],([xa,ya,Da])=>va.set({labelOptions:xa,snappingOptions:ya,tooltipOptions:Da}))]);fa?.map.add(pa);this.addHandles(z.makeHandle(()=>
{fa?.destroyed||fa?.map.remove(pa);pa.destroy()}))}async _setUpCreatingFeaturesStep(){if(!this.hasHandles(ma)){var {creationInfo:D,viewModel:J}=this.data,{attachmentsViewModel:ea,view:ba}=J;if(ba){var T=this._sketchViewModel,Y=new Map,fa=[];this._lastActiveGraphics=[];this._featureFormHandle=Q.removeMaybe(this._featureFormHandle);this._visualVariableAttributes={rotation:null,size:null};Z.prepareAttachmentsForCreateFeaturesWorkflow(ea);fa.push(L.watch(()=>ea.mode,xa=>{switch(xa){case "add":this.go("adding-attachment");
break;case "edit":this.go("editing-attachment")}}));var pa=Z.showProgressCursor(ba);fa.push(pa);var va=H.isTable(D?.layer);try{if(va){const xa=D?.initialFeature??new v({attributes:{...D?.template?.prototype.attributes,...D?.attributeOverrides},sourceLayer:D?.layer});await this._startUpdating(xa,Y)}else fa.push(V._configureSketchViewModel(this,Y)),D?.initialFeature?(T.layer.add(D.initialFeature),await this._startUpdating(D.initialFeature,Y)):await this._startCreating(Y)}finally{pa.remove()}Y=z.makeHandle(()=>
this.pendingFeatures.drain(xa=>T.layer.remove(xa)));pa=L.watch(()=>ba?.timeZone,xa=>this._featureFormViewModel.timeZone=xa,L.initial);va=z.makeHandle(()=>{P.isModelUpload(D)&&J.cancelWorkflow({warnIfNoWorkflow:!1})});this._featureFormHandle&&fa.push(this._featureFormHandle);this.addHandles(fa,this._handleKeys.beforeCommit);this.addHandles([z.makeHandle(()=>ea.fileInfos.removeAll()),z.handlesGroup(fa),va,Y,pa],ma)}}}};u.__decorate([B.property({constructOnly:!0})],R.prototype,"isNested",void 0);u.__decorate([B.property()],
R.prototype,"featureFormViewModel",null);u.__decorate([B.property()],R.prototype,"hasPendingEdits",null);u.__decorate([B.property()],R.prototype,"_getDrawMeshHelpMessage",void 0);u.__decorate([B.property()],R.prototype,"helpMessage",null);u.__decorate([B.property()],R.prototype,"layer",null);u.__decorate([B.property()],R.prototype,"parent",null);u.__decorate([B.property()],R.prototype,"parentLayer",null);u.__decorate([B.property()],R.prototype,"keyboardCancellationEnabled",null);u.__decorate([B.property()],
R.prototype,"reliesOnOwnerAdminPrivileges",null);u.__decorate([B.property()],R.prototype,"shouldShowAttachments",null);u.__decorate([B.property()],R.prototype,"shouldAllowAttachmentEditing",null);u.__decorate([B.property()],R.prototype,"sketchViewModel",null);return R=V=u.__decorate([E.subclass("esri.widgets.Editor.CreateFeaturesWorkflow")],R)})},"esri/views/draw/support/helpMessageUtils":function(){define(["exports"],function(q){q.getDrawHelpMessage=function(u,v){switch(u){case "point":case "multipoint":return"point";
case "polyline":return 2>(null!=v&&"polyline"===v.type&&v.paths.length?v.paths[0].length:0)?"polylineZeroVertices":"polylineOneVertex";case "polygon":return u=null!=v&&"polygon"===v.type&&v.rings.length?v.rings[0].length:0,u=3>u?"polylineZeroVertices":4>u?"polygonOneVertex":"polygonTwoVertices",u}};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.layer=null;this.enabled=!0;this.updating=!1;this.availability=1}};q.__decorate([v.property({constructOnly:!0})],u.prototype,"layer",void 0);q.__decorate([v.property()],u.prototype,"enabled",void 0);q.__decorate([v.property()],u.prototype,"updating",void 0);q.__decorate([v.property()],u.prototype,"availability",void 0);return u=q.__decorate([w.subclass("esri.views.interactive.snapping.FeatureSnappingLayerSource")],u)})},"esri/widgets/Editor/CreateFeaturesWorkflowData":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w,L,W){q.CreateFeaturesWorkflowData=class extends v{constructor(B){super(B);this.parent=this.editableItem=this.creationInfo=null;this.pendingFeatures=new A;this.upload=this.viewModel=null}};u.__decorate([z.property()],q.CreateFeaturesWorkflowData.prototype,"creationInfo",void 0);u.__decorate([z.property()],q.CreateFeaturesWorkflowData.prototype,"editableItem",void 0);u.__decorate([z.property()],q.CreateFeaturesWorkflowData.prototype,"parent",void 0);u.__decorate([z.property()],
q.CreateFeaturesWorkflowData.prototype,"viewModel",void 0);u.__decorate([z.property()],q.CreateFeaturesWorkflowData.prototype,"upload",void 0);q.CreateFeaturesWorkflowData=u.__decorate([W.subclass("esri.widgets.Editor.CreateFeaturesWorkflowData")],q.CreateFeaturesWorkflowData);Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/modelUploadUtils":function(){define("require exports ../../core/handleUtils ../../core/promiseUtils ../../core/reactiveUtils ./workflowUtils".split(" "),
function(q,u,v,A,z,Q){function w(L){return"scene"===L?.layer?.type}u.handleModelUpload=async function({view:L,data:W,signal:B,next:R,cancel:F}){const {creationInfo:E}=W;if(!E||!w(E))return v.makeHandle();const {layer:I}=E,H=null!=E.geometryToPlace;E.geometryToPlace=null;if(H)return F(),v.makeHandle();({Upload:F}=await new Promise((U,P)=>q(["./Upload"],U,P)));A.throwIfAborted(B);const y=new F;W.upload=y;let O=null;W=v.handlesGroup([z.watch(()=>y.state,U=>{switch(U){case "default":O?.remove();break;
case "pending":O?.remove();O=Q.showProgressCursor(L);break;case "success":E.maxFeatures=1;E.geometryToPlace=y.result;O?.remove();R();break;case "error":O?.remove()}}),v.makeHandle(()=>{y.cancel();O?.remove()})]);y.uploadTo(I);return W};u.isModelUpload=w;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/workflowUtils":function(){define("require exports ../../Graphic ../../core/arrayUtils ../../core/asyncUtils ../../core/has ../../core/handleUtils ../../core/lang ../../core/promiseUtils ../../core/reactiveUtils ../../core/screenUtils ../../core/accessorSupport/diffUtils ../../layers/support/fieldUtils ../../renderers/support/clickToleranceUtils ../../renderers/support/lengthUtils ../../renderers/visualVariables/support/sizeVariableUtils ../../renderers/visualVariables/support/visualVariableUtils ../../support/featureFlags ../../symbols/support/symbolConversion ../../symbols/support/symbolUtils ../../views/3d/layers/graphics/GraphicState ../../views/support/drapedUtils ../../views/support/hitTestSelectUtils ../support/templateUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G){function X(Ba){const na=Ba.sourceLayer;var sa;if(!(sa=!na||"feature"!==na.type)){a:switch(na.renderer?.type){case "class-breaks":case "simple":case "unique-value":case "dot-density":case "dictionary":case "pie-chart":sa=!0;break a;default:sa=!1}sa=!sa}if(sa)return{rotation:null,size:null};let ra=sa=null;var Aa=na.renderer.getVisualVariablesForType("rotation").filter(Fa=>(!Fa.axis||"heading"===Fa.axis)&&Fa.field&&!Fa.valueExpression&&null!=
O.getRotationAngle(Fa,Ba));1===Aa.length&&(sa=C(Aa[0],na));Aa=na.renderer.getVisualVariablesForType("size").filter(Fa=>Fa.field&&!Fa.useSymbolValue&&!Fa.valueExpression&&y.getTransformationType(Fa)===y.TransformationType.RealWorldSize&&null!=O.getSize(Fa,Ba));1===Aa.length&&(ra=oa(Aa[0],na));return{rotation:sa,size:ra}}function C(Ba,na){const sa="heading"===(Ba.axis||"heading")&&"arithmetic"===Ba.rotationType?-1:1,ra=Ba.field,Aa=(na=na.fields&&na.fields.filter(la=>la.name===ra))&&1===na.length?na[0].type:
"double";var Fa=0,Ia=0;return{field:ra,fieldType:Aa,getDefault:()=>Promise.resolve(0),getValue:la=>{Ia=Fa-sa*la;return ma((Ia+360)%360,Aa)},initValue:la=>{Fa=null!=la?la:Ia;Ia=0},isUpdatingInteractively:!1,rotationType:Ba.rotationType??"geographic"}}function V(Ba,na){switch(na){case "width":return Ba[0];case "depth":return Ba[1];case "height":return Ba[2];default:return Ba[2]||Ba[1]||Ba[0]}}async function ia(Ba,na,sa){if(null==na)return 0;({symbol:na}=P.to3D(na));if(null==na||"web-style"===na.type||
"cim"===na.type)return 0;na=na.symbolLayers.at(0);if(!na)return 0;switch(na.type){case "icon":return{computeIconLayerResourceSize:sa}=await new Promise((Aa,Fa)=>q(["../../symbols/support/symbolLayerUtils"],Aa,Fa)),na.size||Math.min(Ka.icon,(await sa(na,Ka.icon))[0])||Ka.icon;case "text":return na.size||Ka.text;case "line":return na.size||Ka.line;case "object":const {computeObjectLayerResourceSize:ra}=await new Promise((Aa,Fa)=>q(["../../symbols/support/symbolLayerUtils"],Aa,Fa));Ba=await ra(na,Ba.scale/
Ka.viewScaleSizeFactor);return V(Ba,sa);case "path":return(null!=na.width?na.width:na.height)||Ba.scale/Ka.viewScaleSizeFactor;case "extrude":return na.size||Ba.scale/Ka.viewScaleSizeFactor;case "fill":case "water":return 0;default:return 0}}function oa(Ba,na){const sa=Ba.field,ra=Ba.axis,Aa=(na=na.fields&&na.fields.filter(ja=>ja.name===sa))&&1===na.length?na[0].type:"double";var Fa=0,Ia=0;const la=H.meterIn[Ba.valueUnit]??1;let qa;qa="area"===Ba.valueRepresentation?ja=>(ja*la/2)**2*Math.PI:"radius"===
Ba.valueRepresentation||"distance"===Ba.valueRepresentation?ja=>ja*la/2:ja=>ja*la;return{field:sa,fieldType:Aa,getDefault:async(ja,za)=>ma(qa(await ia(za,ja,ra)),Aa),getValue:(ja,za)=>{Fa||=za.pixelSizeAt(za.center);Ia=Fa*ja;return ma(Ia,Aa)},initValue:ja=>{Fa=null!=ja?ja:Ia;Ia=0},isUpdatingInteractively:!1,displayUnit:Da(Ba.valueUnit),axis:Ba.axis}}function ma(Ba,na){switch(na){case "small-integer":case "integer":case "long":return Math.round(Ba);case "double":case "single":return Ba;default:return 0}}
async function D(Ba,na,sa){na=await S.getDisplayedSymbol(Ba,{useSourceLayer:!0,ignoreGraphicSymbol:!0,webStyleCache:na,scale:sa});null!=F.diff(Ba.symbol,na)&&(Ba.symbol=na)}function J(Ba){if(!Ba)throw Error("no geometry type");return"multipatch"===Ba?"mesh":Ba}async function ea(Ba,na,sa,ra,Aa){na=new v({sourceLayer:na,attributes:sa});const {rotation:Fa,size:Ia}=X(na);let la=await S.getDisplayedSymbol(na,{useSourceLayer:!0,webStyleCache:ra,scale:Aa}),qa=!1;for(const ja of[Ia,Fa])null!=ja&&null==sa[ja.field]&&
(sa[ja.field]=await ja.getDefault(la,Ba.view),qa=!0);qa&&(la=await S.getDisplayedSymbol(na,{useSourceLayer:!0,webStyleCache:ra,scale:Aa}));switch(la?.type){case "simple-fill":case "polygon-3d":Ba.polygonSymbol=la;break;case "simple-line":case "line-3d":Ba.polylineSymbol=la;break;case "simple-marker":case "picture-marker":case "point-3d":case "cim":Ba.pointSymbol=la;break;case "mesh-3d":Ba.meshSymbol=la}ba(Ba.tooltipOptions,Ia,Fa)}function ba(Ba,na,sa){Ba.visualVariables=null!=na||null!=sa?{size:null!=
na?{unit:na.displayUnit,axis:na.axis,valueType:na.fieldType}:null,rotation:null!=sa?{valueType:sa.fieldType,rotationType:sa.rotationType??"geographic"}:null}:null}async function T(Ba,na,sa,ra){if(0===Ba.length)return[];const {updatable:Aa,graphicsByLayer:Fa}=await sa.async(async()=>{var {results:Ia}=await W.whenOrAbort(M.hitTestSelectSimilarDistance(na,sa),ra);const la=new Map;M.filterGraphicHits(Ia).forEach(({graphic:qa})=>{var ja=qa.layer;var za=la.get(ja);za?ja=za:(za=[],la.set(ja,za),ja=za);return ja.push(qa)});
Ia=Ba.filter(({supports:qa,layer:ja})=>qa.includes("update")&&la.has(ja));0!==Ia.length&&sa.stopPropagation();return{updatable:Ia,graphicsByLayer:la}});return W.whenOrAbort(Promise.allSettled(Aa.map(async({layer:Ia})=>{var la=Fa.get(Ia);const qa=fa(Ia);if(la.every(Ha=>E.featureHasFields(qa,Ha)))return la;const ja=[];for(var za of la)ja.push(za.getObjectId()),la=Object.keys(za.attributes),A.addMany(qa,la);za=Ia.createQuery();za.returnGeometry=!1;za.objectIds=ja;za.outFields=E.fixFields(Ia.fieldsIndex,
qa);return Ia.queryFeatures(za,{signal:ra}).then(({features:Ha})=>Ha)})),ra)}async function Y(Ba,na,sa,ra){if(0===Ba.length)return[];const {mapPoint:Aa}=sa;if(null==Aa)return[];let Fa=null;const Ia=await sa.async(async()=>{var {results:la}=await W.whenOrAbort(na.hitTest(sa),ra);if(0===la.length)return[];const qa=new Set;Fa=M.filterGraphicHits(la);Fa.forEach(({graphic:ja})=>ja&&qa.add(ja.layer));la=Ba.items.filter(({layer:ja,supports:za,attachmentsOnUpdateEnabled:Ha})=>qa.has(ja)&&(za.includes("update")||
za.includes("delete")||Ha));0<la.length&&sa.stopPropagation();return la});return W.whenOrAbort(Promise.allSettled(Ia.map(async({layer:la})=>{const qa=la.createQuery();qa.returnGeometry=!1;qa.outFields=fa(la);const ja="renderer"in la?I.calculateTolerance({renderer:la.renderer,pointerType:sa.pointerType}):0;qa.geometry=aa.createQueryGeometry(Aa,ja,na);qa.outSpatialReference=na.spatialReference;const {features:za}=await la.queryFeatures(qa,{signal:ra});Fa?.forEach(({graphic:Ha})=>{Ha.layer!==la||za.some(Ua=>
Ua.getObjectId()===Ha.getObjectId())||za.push(Ha)});return za})),ra)}function fa(Ba){return E.fixFields(Ba.fieldsIndex,[Ba.objectIdField,E.getDisplayFieldName({displayField:"displayField"in Ba?Ba.displayField:null,fields:Ba.fields})])}async function pa(Ba){const {graphic:na,sketchViewModel:sa,sourceLayer:ra,visualVariables:Aa,webStyleCache:Fa}=Ba;let Ia=!1;const {rotation:la,size:qa}=Aa;[la,qa].forEach(async ja=>{if(null!=ja){var za=na.getAttribute(ja.field);null!=za?ja.initValue(za):(za=await ja.getDefault(na.symbol,
sa.view),ja.initValue(za),na.setAttribute(ja.field,za),Ia=!0)}});Ia&&await D(na,Fa,"2d"===sa.view?.type?sa.view.scale:null);Ba={multipleSelectionEnabled:!1};"point"===ra.geometryType&&(Ba.enableRotation=null!=la,Ba.enableScaling=null!=qa);ba(sa.tooltipOptions,qa,la);sa.layer.elevationInfo=ra.elevationInfo;return sa.update(na,Ba)}async function va(Ba,na,sa,ra,Aa){if(null!=na.geometry&&"point"===na.geometry?.type){var Fa=ra.rotation;var Ia=sa.toolEventInfo;Ia=null==Ia||"rotate-start"!==Ia.type&&"rotate"!==
Ia.type&&"rotate-stop"!==Ia.type?null:Ia;if(null!=Fa&&null!=Ia)if("rotate-stop"===Ia.type)Fa.isUpdatingInteractively=!1,Fa.initValue();else{Fa.isUpdatingInteractively=!0;const {field:la,getValue:qa}=Fa;na.setAttribute(la,qa(Ia.angle,Ba))}ra=ra.size;sa=sa.toolEventInfo;sa=null==sa||"scale-start"!==sa.type&&"scale"!==sa.type&&"scale-stop"!==sa.type?null:sa;if(null!=ra&&null!=sa)if("scale-stop"===sa.type)ra.isUpdatingInteractively=!1,ra.initValue();else{ra.isUpdatingInteractively=!0;const {field:la,
getValue:qa}=ra;na.setAttribute(la,qa(sa.xScale,Ba))}await D(na,Aa,"2d"===Ba.type?Ba.scale:null)}}function xa(Ba,na,sa){if("3d"===Ba.type){const ra=new Z.GraphicState({graphic:na});return w.handlesGroup([Ba.trackGraphicState(ra),B.watch(()=>ra.displaying,sa)])}return B.watch(()=>na.visible,sa)}async function ya(Ba,na){if("3d"===Ba.type){const sa=new Z.GraphicState({graphic:na});Ba=Ba.trackGraphicState(sa);await B.whenOnce(()=>sa.displaying);Ba.remove()}else await B.whenOnce(()=>na.visible)}function Da(Ba){switch(Ba){case "unknown":case "decimal-degrees":return null;
default:return Ba}}function Ca(Ba){const na=Ba.geometry;if("mesh"===na?.type){const sa=Ba.cloneShallow();sa.attributes=L.clone(Ba.attributes);sa.geometry=na.cloneShallow();sa.geometry.transform=na.transform?.clone()??null;return sa}return Ba.clone()}const Ka={icon:R.px2pt(24),text:R.px2pt(12),line:R.px2pt(1),viewScaleSizeFactor:100},Oa=(Ba,na)=>Ba.whenLayerView("subtype-sublayer"===na.type?na.parent:na);Q=Symbol();u.UsesSketchViewModelSymbol=Q;u.avoidFeatureTemplateSelectionWithOnlyOneItem=function(Ba,
na){Ba.viewModel.syncFeatureTemplates();Ba=Ba.creationInfo;if("awaiting-feature-creation-info"===na[0].id&&Ba){const sa=Ba.layer,ra=G.getAllTemplatesForLayer(sa);1===ra.length&&"scene"!==sa.type&&(Ba.template=ra[0],na.shift())}return na};u.canCreateInteractiveEditSession=function(Ba){return"createInteractiveEditSession"in Ba};u.cloneGraphicExceptMesh=Ca;u.createWorkflowSteps=function(Ba,na,sa){let ra=!1;return Ba.filter(Aa=>ra?!0:ra=Aa===na).map(Aa=>sa[Aa]())};u.fetchCandidates=async function(Ba,
na,sa,ra){switch(na.type){case "3d":return T(Ba,na,sa,ra);case "2d":return Y(Ba,na,sa,ra)}};u.fetchFullFeature=async function(Ba,na,sa){const {sourceLayer:ra}=Ba,Aa=ra.createQuery();Aa.objectIds=[Ba.getAttribute(ra.objectIdField)];Aa.outFields=["*"];Aa.outSpatialReference=na;Aa.returnM=ra.capabilities.data.supportsM;Aa.returnZ=ra.capabilities.data.supportsZ;U.sceneLayerEditingEnabled()&&U.i3sPatchingEnabled()&&"scene"===ra.type&&null!=ra.infoFor3D&&(Aa.returnGeometry=!0,Aa.formatOf3DObjects="3D_glb");
Ba=await ra.queryFeatures(Aa,{signal:sa});W.throwIfAborted(sa);return Ba.features[0]};u.findLayerInfo=function(Ba,na){return Ba?.find(sa=>sa.layer===na)};u.getVisualVariableAttributes=X;u.isCreateFeaturesWorkflow=function(Ba){return null!=Ba&&"create-features"===Ba.type};u.isTerminalUpdateEventType=Ba=>/-stop/.test(Ba)||/vertex-/.test(Ba);u.prepareAttachmentsForCreateFeaturesWorkflow=function(Ba){Ba.filesEnabled=!0;Ba.mode="view";Ba.capabilities={editing:!0,operations:{add:!0,update:!0,delete:!0}}};
u.setUpGeometryUpdate=async function({feature:Ba,featureClone:na,visualVariableAttributes:sa,sketchViewModel:ra,view:Aa,onUpdate:Fa,webStyleCache:Ia}){await D(na,Ia,"2d"===Aa.type?Aa.scale:null);let la=null;if("2d"===ra?.view?.type){const Ma=W.debounce(Sa=>D(na,Ia,Sa));la=B.watch(()=>ra?.view?.scale,Sa=>Ma(Sa))}const qa=na.sourceLayer;var ja=Oa(Aa,qa);await pa({graphic:na,sketchViewModel:ra,sourceLayer:qa,visualVariables:sa,webStyleCache:Ia});let za=null;ja.then(Ma=>za=Ma).catch(()=>{});const Ha=
sa.size,Ua=sa.rotation;ja=B.watch(()=>Ba.attributes,async Ma=>{let Sa=!1;for(const Va in Ma){const Pa=Ma[Va];Pa!==na.getAttribute(Va)&&(na.setAttribute(Va,Pa),null==Ha||Ha.isUpdatingInteractively||Ha.field!==Va||Ha.initValue(Pa),null==Ua||Ua.isUpdatingInteractively||Ua.field!==Va||Ua.initValue(Pa),null==za||za.requiredFields.includes(Va))&&(Sa=!0)}Sa&&await D(na,Ia,"2d"===Aa.type?Aa.scale:null)});const Qa=ra.on("update",async Ma=>{const Sa=Ma.graphics[0];if("complete"===Ma.state)return pa({graphic:Sa,
sketchViewModel:ra,sourceLayer:qa,visualVariables:sa,webStyleCache:Ia});await va(Aa,Sa,Ma,sa,Ia);Fa(Ca(Sa),Ma)}),Ja=ra.on(["undo","redo"],async Ma=>{Fa(Ca(Ma.graphics[0]),Ma)});return w.handlesGroup([Ja,Qa,w.makeHandle(()=>ra.cancel()),ja,la])};u.shouldShowAttachmentsForCreateFeaturesWorkflow=function(Ba){const {creationInfo:na,viewModel:sa}=Ba;if(!na)return!1;const {layer:ra}=na;if(Ba=sa.editableItems.find(Fa=>Fa.layer===ra))return Ba.attachmentsOnCreateEnabled;Ba=ra.capabilities?.data;const Aa=
sa.layerInfos?.find(Fa=>Fa.layer===ra);return!(!(Ba&&"supportsAttachment"in Ba&&Ba.supportsAttachment)||Aa&&(!1===Aa.allowAttachments||!1===Aa.attachmentsOnUpdateEnabled))};u.showProgressCursor=function(Ba){const na=Ba.cursor;Ba.cursor="progress";return w.makeHandle(()=>Ba.cursor=na)};u.sizeDefaults=Ka;u.sizeVariableUnitToLengthUnit=Da;u.startCreatingNewFeature=async function(Ba,na,sa){const ra=na.layer,Aa={...na.template?.prototype.attributes,...na.attributeOverrides};let Fa=null;const {view:Ia}=
Ba,la="2d"===Ia?.type;await ea(Ba,ra,Aa,sa,la?Ia.scale:null);if(la){const za=W.debounce(Ha=>ea(Ba,ra,Aa,sa,Ha));Fa=B.watch(()=>Ia.scale,Ha=>za(Ha))}const {data:qa,editing:ja}=ra.capabilities;Ba.layer.elevationInfo=ra.elevationInfo;await Ba.create(J(ra.geometryType),{graphicProperties:{attributes:Aa,sourceLayer:ra},hasZ:qa.supportsZ,defaultZ:(la?ja.zDefault:null)??Ba.defaultCreateOptions.defaultZ,geometryToPlace:na.geometryToPlace??void 0});return Fa??w.makeHandle()};u.startUpdatingFeature=pa;u.swapForEditingSession=
async function(Ba,na,sa){function ra(qa){la?.abort();la=z.createTask(async ja=>{const za=await Oa(Aa,Fa);W.throwIfAborted(ja);za.setVisibility?.(Ia,qa)})}const Aa=Ba.view;Ba.layer.add(sa);const Fa=na.sourceLayer,Ia=na.getAttribute(na.layer.objectIdField);let la=null;await ya(Aa,sa);ra(!1);return w.handlesGroup([xa(Aa,sa,qa=>ra(!qa)),w.makeHandle(async()=>{ra(!0);try{const qa=await Oa(Aa,Fa);await B.whenOnce(()=>!qa.updating)}finally{Ba.layer.remove(sa)}})])};u.updateGraphicSymbolWhenRequired=D;u.visualVariableInteractiveUpdate=
va;u.whenEditorLayerView=Oa;u.whenGraphicDisplayed=ya;Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/renderers/support/clickToleranceUtils":function(){define(["exports"],function(q){function u(z,Q){return Q?"xoffset"in Q&&Q.xoffset?Math.max(z,Math.abs(Q.xoffset)):"yoffset"in Q&&Q.yoffset?Math.max(z,Math.abs(Q.yoffset||0)):z:z}function v(z,Q){if("number"===typeof z)return z;if(z?.stops?.length){z=z.stops;let w=Q=0;for(let L=0;L<z.length;L++){const W=z[L].size;"number"===typeof W&&
(Q+=W,w++)}return Q/w}return Q}function A(z,Q){if(!Q)return z;Q=Q.filter(W=>"size"===W.type).map(W=>{const {maxSize:B,minSize:R}=W;return(v(B,z)+v(R,z))/2});let w=0;const L=Q.length;if(0===L)return z;for(let W=0;W<L;W++)w+=Q[W];return Math.max(Math.floor(w/L),z)}q.calculateTolerance=function(z){const Q=z?.renderer;z="touch"===z?.pointerType?9:6;if(!Q)return z;z="visualVariables"in Q?A(z,Q.visualVariables):z;if("simple"===Q.type)return u(z,Q.symbol);if("unique-value"===Q.type){let w=z;Q.uniqueValueInfos?.forEach(L=>
{w=u(w,L.symbol)});return w}if("class-breaks"===Q.type){let w=z;Q.classBreakInfos.forEach(L=>{w=u(w,L.symbol)});return w}return z};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/graphics/GraphicState":function(){define("exports ../../../../chunks/tslib.es6 ../../../../core/Evented ../../../../core/accessorSupport/decorators/property ../../../../core/has ../../../../core/Logger ../../../../core/RandomLCG ../../../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w,L){q.GraphicState=class extends v.EventedAccessor{constructor(W){super(W);this.isDraped=this.displaying=this.tracking=!1}};u.__decorate([A.property({constructOnly:!0})],q.GraphicState.prototype,"graphic",void 0);u.__decorate([A.property()],q.GraphicState.prototype,"tracking",void 0);u.__decorate([A.property()],q.GraphicState.prototype,"displaying",void 0);u.__decorate([A.property()],q.GraphicState.prototype,"isDraped",void 0);q.GraphicState=u.__decorate([L.subclass("esri.views.3d.layers.graphics.GraphicState")],
q.GraphicState);Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/drapedUtils":function(){define(["exports","../../geometry","../../core/unitUtils","../../renderers/support/clickToleranceUtils","../../geometry/Extent"],function(q,u,v,A,z){function Q(L,W,B,R=new z){let F=0;if("2d"===B.type)F=W*(B.resolution??0);else if("3d"===B.type){var E=B.overlayPixelSizeInMapUnits(L),I=B.basemapSpatialReference;F=null==I||I.equals(B.spatialReference)?W*E:v.getMetersPerUnitForSR(I)/
v.getMetersPerUnitForSR(B.spatialReference)}W=L.x-F;E=L.y-F;I=L.x+F;L=L.y+F;({spatialReference:B}=B);R.xmin=Math.min(W,I);R.ymin=Math.min(E,L);R.xmax=Math.max(W,I);R.ymax=Math.max(E,L);R.spatialReference=B;return R}const w=new z;q.createQueryGeometry=Q;q.intersectsDrapedGeometry=function(L,W,B){L=B.toMap(L);if(null==L)return!1;const R=A.calculateTolerance();return Q(L,R,B,w).intersects(W)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/hitTestSelectUtils":function(){define(["exports"],
function(q){function u(v){return"graphic"===v?.type}q.filterGraphicHits=function(v){return v.filter(u)};q.findFirstGraphicHit=function(v){return v.find(u)??null};q.hitTestSelectSimilarDistance=async function(v,A){if("2d"===v.type)return v.hitTest(A);v=await v.hitTest(A);if(0===v.results.length)return v;A=v.results[0];const z=1.05*(A.distance??0),Q=v.results.findIndex(w=>(w.distance??0)>z);-1!==Q&&(v.results=v.results.slice(0,Q));A&&v.ground.distance>z&&(v.ground.mapPoint=null);return v};Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/Workflow":function(){define("../../chunks/tslib.es6 ../../core/Error ../../core/Evented ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles".split(" "),function(q,u,v,A,z,Q,w,L,W,B){v=class extends v.EventedAccessor{constructor(R){super(R);this._indexHistory=[];this._stepIndex=this._lastStepIndex=
-1;this._updatingHandles=new B.UpdatingHandles;this._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"};this.data=void 0;this.started=!1;this.steps=[];this._pendingOperation=this.type=null}destroy(){this._updatingHandles.destroy()}get hasNextStep(){const {steps:R}=this;return!!(R&&this._stepIndex<R.filter(F=>!F.parent).length-1)}get hasPreviousStep(){return 0<this._stepIndex}get reliesOnOwnerAdminPrivileges(){return!1}get hasInvalidFormTemplate(){return!1}get hasUnsupportedFields(){return!1}get shouldShowAttachments(){return!1}get shouldAllowAttachmentEditing(){return!1}get stepId(){var {steps:R}=
this;return(R=R&&R[this._stepIndex])&&R.id}get helpMessage(){}get hasPendingEdits(){return!1}get keyboardCancellationEnabled(){return!0}get updating(){return this._updatingHandles.updating}async back(R=()=>Promise.resolve(!0)){if(!this.hasPendingEdits||await R())this.hasPreviousStep?await this.previous({cancelCurrentStep:!0}):await this.cancel({force:!0})}async cancel(R={force:!0}){return!1!==R.force?this._cancel(R):new Promise((F,E)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel({...R,
force:!0}).then(F)},deny:()=>E(new u("workflow:cancel-denied","Request to cancel workflow was denied."))}})})}async commit(){this.removeHandles(this._handleKeys.beforeCommit);this.onCommit&&await this.onCommit(this.data);this.removeHandles(this._handleKeys.afterCommit);this.emit("commit")}async go(R){var {steps:F}=this;F=F.findIndex(E=>E.id===R);this._indexHistory.push(this._stepIndex);await this._go(F)}async next(){this._indexHistory.push(this._stepIndex);await this._go(this._stepIndex+1)}async previous(R=
{cancelCurrentStep:!1}){await this._go(this._indexHistory.pop(),R.cancelCurrentStep)}async reset(){await this._cancel({emitCancelEvent:!1});await this.start()}async save(){await this.commit();await this.reset()}async start(){this._set("started",!0);await this._go(-1===this._stepIndex?0:this._stepIndex)}async _cancel({emitCancelEvent:R=!0,error:F}={}){this.started&&(this._set("started",!1),await this._transaction(()=>this.steps[this._stepIndex]?.tearDown({canceled:!0})));this.removeHandles([this._handleKeys.afterCommit,
this._handleKeys.beforeCommit]);this._resetIndexing(R);R&&this.emit("cancel",{error:F})}_go(R=-1,F=!1){return this._transaction(async()=>{const {steps:E}=this;if(!(-1>=R||R>=E.length)){if(this.started){-1<this._lastStepIndex&&await E[this._lastStepIndex].tearDown({canceled:F});try{await E[R].setUp()}catch(I){A.throwIfNotAbortError(I)}this._lastStepIndex=R}this._stepIndex=R;this._notifyStepProps()}})}async _transaction(R){const F=this._pendingOperation,E=A.createResolver(),I=(F??Promise.resolve()).then(()=>
E.promise);this._pendingOperation=I;this._updatingHandles.addPromise(I);try{F&&await F,await R()}finally{E.resolve(),I===this._pendingOperation&&(this._pendingOperation=null)}}_resetIndexing(R=!0){this._lastStepIndex=this._stepIndex=-1;this._indexHistory.length=0;R&&this._notifyStepProps()}_notifyStepProps(){this.notifyChange("stepId");this.notifyChange("hasPreviousStep");this.notifyChange("hasNextStep")}};q.__decorate([z.property()],v.prototype,"data",void 0);q.__decorate([z.property()],v.prototype,
"hasNextStep",null);q.__decorate([z.property()],v.prototype,"hasPreviousStep",null);q.__decorate([z.property()],v.prototype,"onCommit",void 0);q.__decorate([z.property()],v.prototype,"reliesOnOwnerAdminPrivileges",null);q.__decorate([z.property()],v.prototype,"hasInvalidFormTemplate",null);q.__decorate([z.property()],v.prototype,"hasUnsupportedFields",null);q.__decorate([z.property()],v.prototype,"shouldShowAttachments",null);q.__decorate([z.property()],v.prototype,"shouldAllowAttachmentEditing",
null);q.__decorate([z.property()],v.prototype,"started",void 0);q.__decorate([z.property({readOnly:!0})],v.prototype,"stepId",null);q.__decorate([z.property()],v.prototype,"steps",void 0);q.__decorate([z.property({readOnly:!0})],v.prototype,"type",void 0);q.__decorate([z.property()],v.prototype,"helpMessage",null);q.__decorate([z.property()],v.prototype,"hasPendingEdits",null);q.__decorate([z.property()],v.prototype,"keyboardCancellationEnabled",null);q.__decorate([z.property()],v.prototype,"updating",
null);return v=q.__decorate([W.subclass("esri.widgets.Editor.Workflow")],v)})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/tslib.es6 ../../symbols ../../core/Collection ../../core/Error ../../core/Evented ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/ellipsoidUtils ../../geometry/projection ../../geometry/support/coordsUtils ../../geometry/support/spatialReferenceUtils ../../layers/GraphicsLayer ../../layers/support/layerUtils ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/layerUtils ../../views/input/InputManager ../../views/interactive/keybindings ../../views/interactive/sketch/SketchLabelOptions ../../views/interactive/sketch/SketchOptions ../../views/interactive/sketch/SketchTooltipOptions ../../views/interactive/sketch/SketchValueOptions ../../views/interactive/snapping/SnappingManager ../../views/interactive/snapping/SnappingOptions ../../views/interactive/snapping/snappingUtils ../../views/support/hitTestSelectUtils ../../views/support/screenUtils ./support/OperationHandle ../../symbols/SimpleMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleLineSymbol ../../symbols/MeshSymbol3D ../../symbols/FillSymbol3DLayer".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G,X,C,V,ia,oa,ma,D,J,ea,ba,T,Y,fa,pa,va,xa,ya,Da){function Ca(la){return"polygon"===la||"rectangle"===la||"circle"===la}function Ka(la,qa){Ba("undo",la.history.undo,la.history.redo,qa)}function Oa(la,qa){Ba("redo",la.history.redo,la.history.undo,qa)}function Ba(la,qa,ja,za){if(qa=qa.pop()){var Ha=qa.updates,Ua=[];za.forEach((Qa,Ja)=>{Ja=Ha[Ja];null!=Ja&&("geometry"in Ja&&null!=Ja.geometry&&(Ua.push({geometry:Qa.geometry}),Qa.geometry=Ja.geometry),
"symbol"in Ja&&null!=Ja.symbol&&(Ua.push({symbol:Qa.symbol}),Qa.symbol=Ja.symbol),"undo"in Ja&&(Ua.push(Ja),Ja[la](Qa)))});ja.push({updates:Ua})}}function na(la){return{updates:la.map(qa=>({geometry:qa.geometry}))}}function sa(la){return"requireError"in la&&"aborted"===la.requireError}const ra=la=>Object.freeze(Object.defineProperty({__proto__:null,default:la},Symbol.toStringTag,{value:"Module"})),Aa={defaultZ:0},Fa={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},
enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"};Q=class extends Q.EventedAccessor{constructor(la){super(la);this._numUpdating=0;this._internalGraphicsLayer=new P({listMode:"hide",internal:!0,title:"SVM Internal"});this._operationHandle=null;this._viewHandlesKey="viewHandles";this.activeVertexSymbol=this.activeLineSymbol=this.activeFillSymbol=null;this.allowDeleteKey=
!0;this.layer=null;this.pointSymbol=new pa({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});this.polygonSymbol=new va({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}});this.polylineSymbol=new xa({color:[130,130,130,1],width:2});this.meshSymbol=new ya({symbolLayers:new A([new Da])});this._snappingManager=null;this.updateGraphics=new A;this.updateOnGraphicClick=!0;this.vertexSymbol=new pa({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],
width:1}});this.sketchOptions=new oa;this._originalPopupEnabled=this._viewReadyAbortController=this._moduleLoaderAbortController=null;this.defaultCreateOptions=Aa;this.defaultUpdateOptions=Fa;this.snappingOptions=new ea}initialize(){this.addHandles([B.on(()=>this.view?.map?.layers,"change",la=>{la.removed.includes(this.layer)&&this.cancel()}),B.on(()=>this.layer?.graphics,"change",la=>{if(null!=this._operationHandle)for(const qa of la.removed)this.updateGraphics.includes(qa)&&(1<this.updateGraphics.length?
this._operationHandle.removeFromSelection(qa):this._operationHandle.cancel())}),B.watch(()=>this.layer?.elevationInfo??null,la=>{la!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=la)},B.syncAndInitial),B.watch(()=>this.view,la=>{L.destroyMaybe(this._snappingManager);la&&(this._snappingManager=new J.SnappingManager({view:la,options:this.snappingOptions}),"2d"===la.type?new Promise((qa,ja)=>q(["../../views/2d/interactive/editingTools"],qa,ja)):
"3d"===la.type&&(new Promise((qa,ja)=>q(["../../views/3d/interactive/editingTools"],qa,ja)),new Promise((qa,ja)=>q(["../../views/3d/layers/GraphicsLayerView3D"],za=>qa(ra(za)),ja))))},B.syncAndInitial),B.watch(()=>this.view?.spatialReference,(la,qa)=>{la&&qa&&!la.equals(qa)&&this.cancel()})]);ba.setupSnappingToggleHandles(this)}destroy(){this.cancel();this._removeDefaultLayer();this._snappingManager=L.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")}get _defaultUpdateTool(){return"3d"===
this.view?.type?"move":"transform"}get updating(){return 0<this._numUpdating||null!=this._snappingManager&&this._snappingManager.updating}get activeTool(){return this._operationHandle?.tool??null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return null==this.activeComponent||"draw-3d"!==this.activeComponent.type&&"draw-2d"!==this.activeComponent.type?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(la){this._set("defaultCreateOptions",
{...Aa,...la})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(la){this._set("defaultUpdateOptions",{...Fa,...la,reshapeOptions:{...Fa.reshapeOptions,...la?.reshapeOptions},highlightOptions:{...Fa.highlightOptions,...la?.highlightOptions}})}get labelOptions(){return this.sketchOptions.labels}set labelOptions(la){this.sketchOptions.labels=la}set snappingOptions(la){null!=this._snappingManager&&(this._snappingManager.options=la);this._set("snappingOptions",
la)}get state(){const la=!(!this.view?.ready||!this.layer),qa=this._operationHandle;return la&&qa?"active":la?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(la){this.sketchOptions.tooltips=la}get valueOptions(){return this.sketchOptions.values}set valueOptions(la){this.sketchOptions.values=la}get view(){return this._get("view")}set view(la){const qa=this._get("view");if(qa){const {container:ja,map:za}=qa;ja&&(qa.cursor=null);za?.remove(this._internalGraphicsLayer);
this.removeHandles(this._viewHandlesKey);this.cancel()}this.removeHandles("view-ready");la&&this.addHandles(B.when(()=>la.ready,ja=>{this.removeHandles(this._viewHandlesKey);ja&&this.addHandles(this._generateViewHandles(la),this._viewHandlesKey)},B.syncAndInitial),"view-ready");this._set("view",la)}cancel(){this._moduleLoaderAbortController=L.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=L.abortMaybe(this._viewReadyAbortController);this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&
this._operationHandle.complete()}delete(){const {state:la,updateGraphics:qa}=this;if("active"===la&&qa.length){const {activeTool:ja,layer:za}=this,Ha=qa.toArray();za.removeMany(Ha);this.cancel();this._emitDeleteEvent({graphics:Ha,tool:ja})}}duplicate(){if("active"===this.state&&this.updateGraphics.length){const la=this.updateGraphics.map(qa=>qa.clone()).toArray();this.layer.addMany(la);this.emit("duplicate",{graphics:la,type:"duplicate"});return la}return[]}async create(la,qa){this.cancel();await this._waitViewReady();
const {view:ja,layer:za}=this;if(!ja||"disabled"===this.state)throw za||this._logMissingLayer(),W.createAbortError();null!=ja.activeTool&&(ja.activeTool=null);if(la){X.addUniqueLayer(ja,this._internalGraphicsLayer);var Ha=await this._setupCreateOperation(la,qa);null==Ha||this.destroyed?ja.map.remove(this._internalGraphicsLayer):(Ha.on("complete",()=>{if(Ha===this._operationHandle){const Ua=this.createGraphic,Qa=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=
null;this._set("createGraphic",null);this.view?.map&&this.view.map.remove(this._internalGraphicsLayer);Ha.cancelled||null==Ua||za.add(Ua);this.emit("create",{graphic:Ua,state:Qa?"cancel":"complete",tool:la,toolEventInfo:null,type:"create"})}}),this._operationHandle=Ha,ja.ready&&ja.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")}async update(la,qa){this.cancel();await this._waitViewReady();const {layer:ja,view:za,state:Ha}=this;if(!za||"disabled"===Ha)throw ja||
this._logMissingLayer(),W.createAbortError();null!=za.activeTool&&(za.activeTool=null);const Ua=Array.isArray(la)?la:[la];null!=la&&Ua?.length?Ua.some(Qa=>Qa.layer!==ja?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):null==Qa.geometry?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0):!1)||(la=await this._setupUpdateOperation(Ua,
qa),this.destroyed||null==la||sa(la)||(X.addUniqueLayer(za,this._internalGraphicsLayer),this._setUpdateOperationHandle(la,qa),this.emit("update",{graphics:Ua,state:"start",aborted:!1,tool:la.tool,toolEventInfo:null,type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")}async _updateSpatialReference(la){const qa=this.view;if(qa){this._beginAsyncOperation();la=Array.isArray(la)?la:[la];for(const ja of la)null==ja.geometry||"mesh"===ja.geometry.type||U.equals(ja.geometry.spatialReference,
qa.spatialReference)||(y.canProjectWithoutEngine(ja.geometry.spatialReference,qa.spatialReference)||y.isLoaded()||await y.load(),ja.geometry=y.project(ja.geometry,qa.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&
this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(la){var qa=this.view;if(!qa)return this._logMissingView(),null;if("2d"===qa.type){const za=[];qa.map.allLayers.forEach(Ha=>{"vector-tile"!==Ha.type&&"imagery"!==Ha.type||za.push(Ha)});qa=await qa.hitTest(la,{exclude:za});return T.findFirstGraphicHit(qa.results)}const ja=[qa.map.ground];qa.map.allLayers.forEach(za=>{S.isIntegratedMeshLayer(za.type)&&ja.push(za)});la=await qa.hitTest(la,{exclude:ja});if(0<la.results.length){const za=
la.results[0];if(null!=za&&"graphic"===za.type&&za.graphic&&(!la.ground.mapPoint||1>qa.map.ground.opacity||la.ground.distance-(za.distance??0)>-Math.min(3*la.ground.distance,"global"===qa.viewingMode?H.getReferenceEllipsoid(qa.renderCoordsHelper.spatialReference).radius/qa.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return za}return null}_generateViewHandles(la){return[la.on("immediate-click",async qa=>{var ja="active"===this.state&&"create"===this._operationHandle?.type;if("disabled"!==
this.state&&!ja&&this.updateOnGraphicClick){this._beginAsyncOperation();var za=await qa.async(()=>this._getFirstHit(Y.createScreenPointFromEvent(qa)));ja=null;null!=za?(za=za.graphic,this.updateGraphics.includes(za)||za.layer===this.layer?(qa.stopPropagation(),ja=za):"2d"!==la.type||this._isComponentGraphic(za)||"active"!==this.state||this.cancel()):"active"===this.state&&this.cancel();null==ja||this.updateGraphics.includes(ja)||await this.update([ja],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}});
this._endAsyncOperation()}},C.ViewEventPriorities.WIDGET)]}async _setupCreateOperation(la,qa){const ja=this.view;if(!ja)return this._logMissingView(),null;la=await this._setupDrawGraphicTool(la,ja,{hasZ:"3d"===ja.type,...this.defaultCreateOptions,...qa});if(null==la)return null;ja.tools.add(la);ja.activeTool=la;return this._setupCreateOperationHandle(la)}async _setupDrawGraphicTool(la,qa,ja){if("multipoint"===la&&"3d"===qa.type)return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),
null;if(!qa)return this._logMissingView(),null;const {cursor:za,defaultZ:Ha,hasZ:Ua,geometryToPlace:Qa,graphicProperties:Ja,mode:Ma,preserveAspectRatio:Sa}=ja;ja="rectangle"===la||"circle"===la?"hybrid":"click";const Va=Sa??"rectangle"!==la;la={centered:"rectangle"!==la&&!("circle"===la&&!Va),cursor:za,defaultZ:Ha,forceUniformSize:Va,graphicProperties:Ja,geometryToPlace:Qa,geometryType:la,graphicSymbol:this._getGraphicSymbolFromTool(la),hasZ:Ua,mode:Ma??ja,snappingManager:this._snappingManager,snapToScene:!1,
view:qa};return"2d"===qa.type?this._makeDrawGraphicTool2D(la):this._makeDrawGraphicTool3D(la)}async _makeDrawGraphicTool2D(la){const qa=await this._requireModule(new Promise((ja,za)=>q(["../../views/2d/interactive/editingTools"],ja,za)));return sa(qa)||this.destroyed?null:new qa.module.DrawGraphicTool2D({...la,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:Ca(la.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions})}async _makeDrawGraphicTool3D(la){const qa=
await this._requireModule(new Promise((za,Ha)=>q(["../../views/3d/interactive/editingTools"],za,Ha)));if(sa(qa)||this.destroyed)return null;const {elevationInfo:ja}=this.layer;return new qa.module.DrawGraphicTool3D({...la,elevationInfo:ja,snapToScene:!0,sketchOptions:this.sketchOptions})}_setupCreateOperationHandle(la){const qa=this.view;if(!qa)return this._logMissingView(),null;let ja=null;const za=la.forceUniformSize,Ha=la.centered,Ua=[qa.on("key-down",Ja=>{if(Ja.key===V.sketchKeys.pan)Ja.stopPropagation(),
Ja.repeat||(la.enabled=!1);else if(Ja.key===V.sketchKeys.complete)Ja.stopPropagation(),la.completeCreateOperation();else if(Ja.key!==V.sketchKeys.vertexAdd||Ja.repeat)Ja.key===V.sketchKeys.undo?(Ja.stopPropagation(),Qa.undo()):Ja.key===V.sketchKeys.redo?(Ja.stopPropagation(),Qa.redo()):Ja.key!==V.sketchKeys.constraint||"rectangle"!==la.geometryType&&"circle"!==la.geometryType||Ja.repeat?Ja.key!==V.sketchKeys.center||Ja.repeat||(la.centered=!Ha,Ja.stopPropagation()):(la.forceUniformSize=!za,Ja.stopPropagation());
else{const Ma=la.drawOperation.geometryType;if("polyline"===Ma||"polygon"===Ma||"multipoint"===Ma)Ja.stopPropagation(),la.drawOperation.commitStagedVertex()}},C.ViewEventPriorities.WIDGET),qa.on("key-up",Ja=>{Ja.key===V.sketchKeys.pan?la.enabled=!0:Ja.key!==V.sketchKeys.constraint||"rectangle"!==la.geometryType&&"circle"!==la.geometryType?Ja.key===V.sketchKeys.center&&(la.centered=Ha,Ja.stopPropagation()):(la.forceUniformSize=za,Ja.stopPropagation())},C.ViewEventPriorities.WIDGET),la.on("vertex-add",
Ja=>{ja=null==ja?"start":"active";switch(Ja.operation){case "apply":this.emit("create",{graphic:la.graphic,state:ja,tool:this.activeTool,toolEventInfo:Ja,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[la.graphic],tool:la.geometryType});break;case "redo":this._emitRedoEvent({graphics:[la.graphic],tool:la.geometryType})}}),la.on("cursor-update",Ja=>{0<la.drawOperation.numCommittedVertices&&this.emit("create",{graphic:la.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:Ja.vertices[0].coordinates,
type:"cursor-update"},type:"create"})}),la.on("vertex-remove",Ja=>{switch(Ja.operation){case "apply":this.emit("create",{graphic:la.graphic,state:"active",tool:this.activeTool,toolEventInfo:Ja,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[la.graphic],tool:la.geometryType});break;case "redo":this._emitRedoEvent({graphics:[la.graphic],tool:la.geometryType})}}),la.on("complete",Ja=>{this._set("createGraphic",Ja.graphic);ja="complete";Ja.aborted?Qa&&Qa.cancel():Qa&&Qa.complete()}),
B.watch(()=>this._getGraphicSymbolFromTool(la.geometryType),Ja=>{la.graphicSymbol=Ja})],Qa=new fa.CreateOperationHandle({activeComponent:la,tool:la.geometryType,type:"create",onEnd:()=>{Ua.forEach(Ja=>Ja.remove());Ua.length=0;qa.tools?.remove(la)},undo:()=>{la.canUndo&&la.undo()},redo:()=>{la.canRedo&&la.redo()},canUndo:()=>la.canUndo,canRedo:()=>la.canRedo});return Qa}_getGraphicSymbolFromTool(la){switch(la){case "point":case "multipoint":return this.pointSymbol;case "polyline":return this.polylineSymbol;
case "circle":case "rectangle":case "polygon":return this.polygonSymbol;case "mesh":return this.meshSymbol}}async _setupUpdateOperation(la,qa){const {layer:ja,view:za}=this;if(!za)return this._logMissingView(),null;qa={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...qa,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...qa?.reshapeOptions},highlightOptions:{...this.defaultUpdateOptions.highlightOptions,...qa?.highlightOptions}};var Ha=qa.tool;for(var Ua of la)ja.remove(Ua),
ja.add(Ua);if("3d"===za.type){if(0===la.length)return null;switch(Ha){case "move":return this._setupMove3DOperation(la,qa,za,Ha);case "reshape":if(1<la.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;Ha=M.isSupportedGraphic(la[0]);if(Ha===Z.SupportedGraphicResult.SUPPORTED)return this._setupReshape3DOperation(la[0],qa,za);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${Z.isSupportedGraphicResultMessage(Ha)}).`);
return null;case "transform":return this._setupGraphicTransform3DOperation(la,qa,za)}}switch(Ha){case "move":return this._setupMove2DOperation(la,qa,za);case "reshape":if(1<la.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;Ua=M.isSupportedGraphic(la[0]);if(Ua===Z.SupportedGraphicResult.SUPPORTED)return this._setupTransformOrReshape2DOperation(la,Ha,qa,za);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${Z.isSupportedGraphicResultMessage(Ua)}).`);
return null;case "transform":return 1===la.length&&(Ua=la[0].geometry?.type,"point"===Ua||"multipoint"===Ua)&&(Ha="reshape"),this._setupTransformOrReshape2DOperation(la,Ha,qa,za)}}async _setupMove3DOperation(la,qa,ja,za,Ha=!1){for(var Ua of la){const Sa=aa.isSupportedGraphic(Ua);if(Sa!==Z.SupportedGraphicResult.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${Z.isSupportedGraphicResultMessage(Sa)}).`),null}Ua=await this._requireModule(new Promise((Sa,
Va)=>q(["../../views/3d/interactive/editingTools"],Sa,Va)));if(sa(Ua))return Ua;const Qa=new Ua.module.GraphicMoveTool({view:ja,enableZ:qa.enableZ,snappingManager:this._snappingManager,sketchOptions:this.sketchOptions});ja.tools.add(Qa);Qa.graphics.addMany(la);Ha||this.updateGraphics.addMany(la);const Ja=[],Ma=new fa.UpdateOperationHandle({activeComponent:Qa,tool:za,type:"update",onEnd:()=>{Ja.forEach(Sa=>Sa.remove());Ja.length=0;ja.tools?.remove(Qa);Qa.destroyed||Qa.destroy()},undo:()=>{Ka(Ma,this.updateGraphics.toArray());
this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:za})},redo:()=>{Oa(Ma,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:za})},addToSelection:Sa=>{this.updateGraphics.push(Sa);Qa.graphics.push(Sa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Sa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:Sa=>{const Va=this.updateGraphics.indexOf(Sa);
Ma.history.undo.forEach(Pa=>Pa.updates.splice(Va,1));Ma.history.redo.forEach(Pa=>Pa.updates.splice(Va,1));this.updateGraphics.remove(Sa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Sa],type:"selection-change"},type:"update"});0===this.updateGraphics.length?Ma.complete():Qa.graphics.remove(Sa)},toggleTool:async()=>{if(1===this.updateGraphics.length&&!1!==qa.toggleToolOnClick&&"transform"===za){var Sa=this.updateGraphics.at(0);
M.isSupportedGraphic(Sa)===Z.SupportedGraphicResult.SUPPORTED&&(Ma.onEnd(),Ma.destroy(),Sa=await this._setupReshape3DOperation(Sa,qa,ja,!0),sa(Sa)||this._setUpdateOperationHandle(Sa,qa))}}});Ja.push(...this._getHandlesForComponent(Ma,qa),ja.on("immediate-click",Sa=>this._getCommonUpdateOperationClickHandlers(Ma,Sa,qa),C.ViewEventPriorities.WIDGET),ja.on("key-down",Sa=>{this._getCommonUpdateOperationKeyDownHandlers(Ma,Sa)},C.ViewEventPriorities.WIDGET));return Ma}_setupGraphicTransform3DOperation(la,
qa,ja,za=!1){if(1===la.length&&G.isSupportedGraphic(la[0])===Z.SupportedGraphicResult.SUPPORTED){const Ha=la[0],Ua=Ha.geometry;if(null!=Ua&&("point"===Ua.type||"mesh"===Ua.type))return this._setupPointTransform3DOperation(Ha,qa,ja);if(null!=Ua&&("polygon"===Ua.type||"polyline"===Ua.type))return this._setupPolyTransform3DOperation(Ha,qa,ja,za)}return this._setupMove3DOperation(la,qa,ja,"transform",za)}async _setupPointTransform3DOperation(la,qa,ja){const {enableRotation:za,enableScaling:Ha,enableZ:Ua}=
qa,Qa=await this._requireModule(new Promise((Va,Pa)=>q(["../../views/3d/interactive/editingTools"],Va,Pa)));if(sa(Qa))return Qa;const Ja=new Qa.module.GraphicTransformTool({graphic:la,view:ja,enableRotation:za,enableScaling:Ha,enableZ:Ua,snappingManager:this._snappingManager,sketchOptions:this.sketchOptions});ja.tools.add(Ja);this.updateGraphics.add(la);const Ma=[],Sa=new fa.UpdateOperationHandle({activeComponent:Ja,tool:"transform",type:"update",onEnd:()=>{Ma.forEach(Va=>Va.remove());Ma.length=0;
ja.tools?.remove(Ja);Ja.destroyed||Ja.destroy()},undo:()=>{Ka(Sa,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{Oa(Sa,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:async Va=>{this.updateGraphics.add(Va);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Va],removed:[],type:"selection-change"},
type:"update"});Sa.onEnd();Sa.destroy();Va=await this._setupMove3DOperation(this.updateGraphics.toArray(),qa,ja,"transform",!0);sa(Va)||this._setUpdateOperationHandle(Va,qa)},removeFromSelection:Va=>{this.updateGraphics.remove(Va);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Va],type:"selection-change"},type:"update"});Sa.complete()},toggleTool:()=>{}});Ma.push(...this._getHandlesForComponent(Sa,qa),ja.on("immediate-click",
Va=>this._getCommonUpdateOperationClickHandlers(Sa,Va,qa),C.ViewEventPriorities.WIDGET),ja.on("key-down",Va=>{this._getCommonUpdateOperationKeyDownHandlers(Sa,Va)},C.ViewEventPriorities.WIDGET));return Sa}async _setupPolyTransform3DOperation(la,qa,ja,za=!1){const {enableRotation:Ha,enableScaling:Ua,enableZ:Qa,preserveAspectRatio:Ja}=qa,Ma=await this._requireModule(new Promise((g,N)=>q(["../../views/3d/interactive/editingTools"],g,N)));if(sa(Ma))return Ma;const Sa=this.view?.inputManager?.isModifierKeyDown(V.sketchKeys.constraint),
Va=new Ma.module.ExtentTransformTool({graphic:la,view:ja,enableRotation:Ha,enableScaling:Ua,enableZ:Qa,preserveAspectRatio:!!Ja!==!!Sa,sketchOptions:this.sketchOptions});ja.tools.add(Va);za||this.updateGraphics.add(la);const Pa=[],kb=new fa.UpdateOperationHandle({activeComponent:Va,tool:"transform",type:"update",onEnd:()=>{Pa.forEach(g=>g.remove());Pa.length=0;ja.tools?.remove(Va);Va.destroyed||Va.destroy()},canUndo:()=>Va.canUndo,undo:()=>{Va.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),
tool:"transform"})},canRedo:()=>Va.canRedo,redo:()=>{Va.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:async g=>{this.updateGraphics.add(g);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[g],removed:[],type:"selection-change"},type:"update"});kb.onEnd();kb.destroy();g=await this._setupMove3DOperation(this.updateGraphics.toArray(),qa,ja,"transform",!0);sa(g)||this._setUpdateOperationHandle(g,
qa)},removeFromSelection:g=>{this.updateGraphics.remove(g);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[g],type:"selection-change"},type:"update"});kb.complete()},toggleTool:async()=>{if(1===this.updateGraphics.length&&!1!==qa.toggleToolOnClick){var g=this.updateGraphics.at(0);M.isSupportedGraphic(g)===Z.SupportedGraphicResult.SUPPORTED&&(kb.onEnd(),kb.destroy(),g=await this._setupReshape3DOperation(g,qa,
ja,!0),sa(g)||this._setUpdateOperationHandle(g,qa))}}});Pa.push(...this._getHandlesForComponent(kb,qa),ja.on("immediate-click",g=>this._getCommonUpdateOperationClickHandlers(kb,g,qa),C.ViewEventPriorities.WIDGET),ja.on("key-down",g=>this._getCommonUpdateOperationKeyDownHandlers(kb,g),C.ViewEventPriorities.WIDGET),ja.on("key-down",g=>{g.key!==V.sketchKeys.constraint||g.repeat||(Va.preserveAspectRatio=!Va.preserveAspectRatio,g.stopPropagation())},C.ViewEventPriorities.WIDGET),ja.on("key-up",g=>{g.key===
V.sketchKeys.constraint&&(Va.preserveAspectRatio=!Va.preserveAspectRatio,g.stopPropagation())},C.ViewEventPriorities.WIDGET));return kb}async _setupMove2DOperation(la,qa,ja){this.updateGraphics.addMany(la);await this._updateSpatialReference(la);const za=await this._getGraphicMover(la,qa,ja);if(sa(za))return za;const Ha=new fa.UpdateOperationHandle({activeComponent:za,tool:"move",type:"update",onEnd:()=>{this._displayDefaultCursor();Ja.forEach(Ma=>Ma.remove());Qa.forEach(Ma=>Ma.remove());Ja=[];Qa=
[];za.destroy();this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const Ma=this.updateGraphics.toArray();Ka(Ha,Ma);Ha.refreshComponent();this._emitUndoEvent({graphics:Ma,tool:"move"})},redo:()=>{const Ma=this.updateGraphics.toArray();Oa(Ha,Ma);Ha.refreshComponent();this._emitRedoEvent({graphics:Ma,tool:"move"})},addToSelection:async Ma=>{await this._updateSpatialReference(Ma);this.updateGraphics.push(Ma);za.graphics=this.updateGraphics.toArray();this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Ma],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:Ma=>{const Sa=this.updateGraphics.indexOf(Ma);Ha.history.undo.forEach(Pa=>Pa.updates.splice(Sa,1));Ha.history.redo.forEach(Pa=>Pa.updates.splice(Sa,1));this.updateGraphics.remove(Ma);const Va=this.updateGraphics.toArray();this.emit("update",{graphics:Va,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],
removed:[Ma],type:"selection-change"},type:"update"});0===this.updateGraphics.length?Ha.complete():za.graphics=Va}});let Ua=!1,Qa=[ja.on("immediate-click",Ma=>this._getCommonUpdateOperationClickHandlers(Ha,Ma,qa),C.ViewEventPriorities.WIDGET),ja.on("key-down",Ma=>{this._getCommonUpdateOperationKeyDownHandlers(Ha,Ma);Ma.key!==V.sketchKeys.constraint||Ma.repeat||(Ua=!0,za.enableMoveAllGraphics=!za.enableMoveAllGraphics)},C.ViewEventPriorities.WIDGET),ja.on("key-up",Ma=>{Ma.key===V.sketchKeys.constraint&&
Ua&&(Ua=!1,za.enableMoveAllGraphics=!za.enableMoveAllGraphics)},C.ViewEventPriorities.WIDGET)],Ja=this._getHandlesForComponent(Ha,qa);return Ha}async _setupReshape3DOperation(la,qa,ja,za=!1){const Ha=await this._requireModule(new Promise((Sa,Va)=>q(["../../views/3d/interactive/editingTools"],Sa,Va)));if(sa(Ha))return Ha;const Ua=qa.reshapeOptions,Qa=new Ha.module.GraphicReshapeTool({view:ja,graphic:la,enableZVertex:qa.enableZ&&"move"===Ua?.vertexOperation,enableZShape:qa.enableZ&&"move"===Ua?.shapeOperation,
enableMoveGraphic:"move"===Ua?.shapeOperation||"move-xy"===Ua?.shapeOperation,enableMidpoints:"split"===Ua?.edgeOperation,enableEdgeOffset:"offset"===Ua?.edgeOperation,snappingManager:this._snappingManager,sketchOptions:this.sketchOptions});ja.tools.add(Qa);za||this.updateGraphics.add(la);const Ja=[],Ma=new fa.UpdateOperationHandle({activeComponent:Qa,tool:"reshape",type:"update",onEnd:()=>{Ja.forEach(Sa=>Sa.remove());Ja.length=0;ja.tools?.remove(Qa);Qa.destroyed||Qa.destroy()},canUndo:()=>Qa.canUndo,
undo:()=>{Qa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},canRedo:()=>Qa.canRedo,redo:()=>{Qa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:async Sa=>{this.updateGraphics.add(Sa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Sa],removed:[],type:"selection-change"},type:"update"});Ma.onEnd();Ma.destroy();Sa=await this._setupMove3DOperation(this.updateGraphics.toArray(),
qa,ja,"transform",!0);sa(Sa)||this._setUpdateOperationHandle(Sa,qa)},removeFromSelection:Sa=>{this.updateGraphics.remove(Sa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Sa],type:"selection-change"},type:"update"});Ma.complete()},toggleTool:async()=>{if(!1!==qa.toggleToolOnClick){Ma.onEnd();Ma.destroy();var Sa=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),qa,ja,!0);sa(Sa)||this._setUpdateOperationHandle(Sa,
qa)}}});Ja.push(...this._getHandlesForComponent(Ma,qa),ja.on("immediate-click",Sa=>this._getCommonUpdateOperationClickHandlers(Ma,Sa,qa),C.ViewEventPriorities.WIDGET),ja.on("key-down",Sa=>{this._getCommonUpdateOperationKeyDownHandlers(Ma,Sa)},C.ViewEventPriorities.WIDGET));return Ma}async _setupTransformOrReshape2DOperation(la,qa,ja,za){this.updateGraphics.addMany(la);await this._updateSpatialReference(la);la="transform"===qa?await this._getBox(la,ja,za):await this._getReshape(la,ja,za);if(sa(la))return la;
const Ha=new fa.UpdateOperationHandle({activeComponent:la,type:"update",onEnd:()=>{Qa.forEach(Ja=>Ja.remove());Ua.forEach(Ja=>Ja.remove());Qa=[];Ua=[];Ha.activeComponent&&!Ha.activeComponent.destroyed&&Ha.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Ka(Ha,this.updateGraphics.toArray());Ha.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:Ha.tool})},redo:()=>{Oa(Ha,this.updateGraphics.toArray());Ha.refreshComponent();
this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:Ha.tool})},addToSelection:async Ja=>{var Ma=Ha.activeComponent;if("reshape"===Ma?.type){Ma=[...this.updateGraphics,Ja];this.updateGraphics.removeAll();Ha.onEnd();Ha.destroy();Ma=await this._setupTransformOrReshape2DOperation(Ma,"transform",ja,za);if(sa(Ma))return;this._setUpdateOperationHandle(Ma,ja)}else this.updateGraphics.add(Ja),Ma.graphics=this.updateGraphics.toArray(),Ma.refresh(),Ha.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Ja],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async Ja=>{const Ma=this.updateGraphics.indexOf(Ja);Ha.history.undo.forEach(Va=>Va.updates.splice(Ma,1));Ha.history.redo.forEach(Va=>Va.updates.splice(Ma,1));this.updateGraphics.remove(Ja);const Sa=this.updateGraphics.toArray();if(0===Sa.length)Ha.complete();else{const Va=Sa[0].geometry;1!==Sa.length||null==Va||"point"!==Va.type&&"multipoint"!==Va.type?
Ha.activeComponent.graphics=Sa:Ha.toggleTool()}this.emit("update",{graphics:Sa,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ja],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(!(1<this.updateGraphics.length)){var Ja=this.updateGraphics.at(0),Ma=Ja.geometry;if(null==Ma||("reshape"!==Ha.tool||"point"!==Ma.type&&"multipoint"!==Ma.type)&&("transform"!==Ha.tool||"extent"!==Ma.type))Ma=null,"transform"===Ha.tool?Ma=await this._getReshape([Ja],ja,za):
"reshape"===Ha.tool&&(Ma=await this._getBox([Ja],ja,za)),sa(Ma)||(Ha.activeComponent?.destroy(),Ha.activeComponent=Ma,Ha.activeComponent&&(Qa.forEach(Sa=>Sa.remove()),Qa=this._getHandlesForComponent(Ha,ja)))}}});let Ua=[za.on("immediate-click",Ja=>this._getCommonUpdateOperationClickHandlers(Ha,Ja,ja),C.ViewEventPriorities.WIDGET),za.on("key-down",Ja=>{this._getCommonUpdateOperationKeyDownHandlers(Ha,Ja);Ja.key===V.sketchKeys.constraint&&!Ja.repeat&&Ha&&(Ja=Ha.activeComponent)&&"box"===Ja.type&&(Ja.preserveAspectRatio=
!Ja.preserveAspectRatio)},C.ViewEventPriorities.WIDGET),za.on("key-up",Ja=>{Ja.key===V.sketchKeys.constraint&&Ha&&(Ja=Ha.activeComponent)&&"box"===Ja.type&&(Ja.preserveAspectRatio=!Ja.preserveAspectRatio)},C.ViewEventPriorities.WIDGET)],Qa=this._getHandlesForComponent(Ha,ja);return Ha}async _getGraphicMover(la,qa,ja){const {enableMoveAllGraphics:za,highlightOptions:Ha}=qa;qa=await this._requireModule(new Promise((Ua,Qa)=>q(["../../views/draw/support/GraphicMover"],Ja=>Ua(ra(Ja)),Qa)));return sa(qa)?
qa:new qa.module.default({enableMoveAllGraphics:za,highlightsEnabled:!!Ha?.enabled,indicatorsEnabled:!1,graphics:la,view:ja,callbacks:{onGraphicMoveStart:({dx:Ua,dy:Qa,graphic:Ja})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ua,dy:Qa,mover:Ja,type:"move-start"},type:"update"})},onGraphicMove:({dx:Ua,dy:Qa,graphic:Ja})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ua,dy:Qa,mover:Ja,type:"move"},type:"update"}),onGraphicMoveStop:({dx:Ua,dy:Qa,graphic:Ja})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Ua,dy:Qa,mover:Ja,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(la,qa,ja){const {enableRotation:za,
enableScaling:Ha,highlightOptions:Ua,preserveAspectRatio:Qa}=qa;qa=await this._requireModule(new Promise((Ma,Sa)=>q(["../../views/draw/support/Box"],Va=>Ma(ra(Va)),Sa)));if(sa(qa))return qa;const Ja=this.view?.inputManager?.isModifierKeyDown(V.sketchKeys.constraint);return new qa.module.default({graphics:la,enableRotation:za,enableScaling:Ha,highlightsEnabled:!!Ua?.enabled,preserveAspectRatio:!!Qa!==!!Ja,layer:this._internalGraphicsLayer,view:ja,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:Ma=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onMove:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onMoveStop:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onScaleStart:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onScale:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onScaleStop:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onRotateStart:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,
tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onRotate:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"}),onRotateStop:Ma=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Ma},type:"update"})}})}async _getReshape(la,qa,ja){const za="split"===qa.reshapeOptions?.edgeOperation,Ha="move"===qa.reshapeOptions?.shapeOperation;
qa=!!qa.highlightOptions?.enabled;const Ua=await this._requireModule(new Promise((Qa,Ja)=>q(["../../views/draw/support/Reshape"],Ma=>Qa(ra(Ma)),Ja)));return sa(Ua)?Ua:new Ua.module.default({enableMidpoints:za,enableMovement:Ha,graphic:la[0],highlightsEnabled:qa,layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,sketchOptions:this.sketchOptions,view:ja,callbacks:{onReshapeStart:Qa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{...Qa},type:"update"}),onReshape:Qa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Qa},type:"update"}),onReshapeStop:({mover:Qa,type:Ja})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Qa,type:Ja},type:"update"}),onMoveStart:({dx:Qa,dy:Ja,mover:Ma,type:Sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Qa,dy:Ja,mover:Ma,type:Sa},type:"update"}),onMove:({dx:Qa,dy:Ja,mover:Ma,type:Sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Qa,dy:Ja,mover:Ma,type:Sa},type:"update"}),onMoveStop:({dx:Qa,dy:Ja,mover:Ma,type:Sa})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Qa,dy:Ja,mover:Ma,type:Sa},type:"update"}),
onVertexAdd:({added:Qa,type:Ja,vertices:Ma})=>{Qa=Qa.map(Sa=>O.geometryToCoordinates(Sa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:Qa,vertices:Ma,type:Ja},type:"update"})},onVertexRemove:({removed:Qa,type:Ja,vertices:Ma})=>{Qa=Qa.map(Sa=>O.geometryToCoordinates(Sa.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:Qa,
vertices:Ma,type:Ja},type:"update"})}}})}_getHandlesForComponent(la,qa){const ja=la.activeComponent;if(!ja)return[];switch(ja.type){case "graphic-mover":return[ja.on("graphic-click",({graphic:za,viewEvent:Ha})=>{Ha.native?.shiftKey&&(Ha.stopPropagation(),la.removeFromSelection(za))}),ja.on("graphic-move-start",za=>la.addToHistory(na(za.allGraphics)))];case "box":return[ja.on("graphic-click",za=>this._onTransformOrReshape2DGraphicClick(la,qa,za)),ja.on("move-start",za=>la.addToHistory(na(za.graphics))),
ja.on("rotate-start",za=>la.addToHistory(na(za.graphics))),ja.on("scale-start",za=>la.addToHistory(na(za.graphics)))];case "reshape":return[ja.on("graphic-click",za=>this._onTransformOrReshape2DGraphicClick(la,qa,za)),ja.on("move-start",za=>la.addToHistory(na([za.mover]))),ja.on("reshape-start",za=>la.addToHistory(na([za.graphic]))),ja.on("vertex-add",za=>la.addToHistory(na([za.oldGraphic]))),ja.on("vertex-remove",za=>la.addToHistory(na([za.oldGraphic])))];case "move-3d":return[ja.on("graphic-move-start",
za=>{la.addToHistory(na(za.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<za.allGraphics.length?za.allGraphics[0]:null,type:"move-start"},type:"update"})}),ja.on("graphic-move",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:za.dx,dy:za.dy,mover:0<za.allGraphics.length?za.allGraphics[0]:null,type:"move"},type:"update"})}),
ja.on("graphic-move-stop",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:0<za.allGraphics.length?za.allGraphics[0]:null,type:"move-stop"},type:"update"})}),ja.on("immediate-click",za=>{za.shiftKey?this._toggleSelection([za.graphic],la,qa):la.toggleTool()})];case "transform-3d":return[ja.on("record-undo",({record:za})=>{la.addToHistory({updates:[za]})}),ja.on("graphic-translate-start",za=>{this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,dx:za.dxScreen,dy:za.dyScreen,type:"move-start"},type:"update"})}),ja.on("graphic-translate-stop",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,dx:za.dxScreen,dy:za.dyScreen,type:"move-stop"},type:"update"})}),ja.on("graphic-rotate-start",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,angle:za.angle,type:"rotate-start"},type:"update"})}),ja.on("graphic-rotate-stop",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,angle:za.angle,type:"rotate-stop"},type:"update"})}),ja.on("graphic-scale-start",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,
xScale:za.xScale,yScale:za.yScale,type:"scale-start"},type:"update"})}),ja.on("graphic-scale-stop",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,xScale:za.xScale,yScale:za.yScale,type:"scale-stop"},type:"update"})}),ja.on("graphic-translate",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,dx:za.dxScreen,dy:za.dyScreen,
type:"move"},type:"update"})}),ja.on("graphic-rotate",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,angle:za.angle,type:"rotate"},type:"update"})}),ja.on("graphic-scale",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:za.graphic,xScale:za.xScale,yScale:za.yScale,type:"scale"},type:"update"})}),ja.on("immediate-click",za=>
{za.shiftKey?this._toggleSelection([za.graphic],la,qa):la.toggleTool()})];case "reshape-3d":return[ja.on("reshape",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:za,type:"update"})}),ja.on("move",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:za,type:"update"})}),ja.on("vertex-add",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:za,type:"update"})}),ja.on("vertex-remove",za=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:za,type:"update"})}),ja.on("immediate-click",za=>{za.shiftKey?this._toggleSelection([za.graphic],la,qa):la.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(la,qa,ja){const {graphic:za,viewEvent:Ha}=ja;if(Ha.native?.shiftKey&&za.layer===this.layer)return Ha.stopPropagation(),
la.removeFromSelection(za);if(qa.toggleToolOnClick)return Ha.stopPropagation(),la.toggleTool()}_setUpdateOperationHandle(la,qa){this._operationHandle=la;const ja=this.view?.map;this._disablePopup(qa);la.on("complete",()=>{if(la===this._operationHandle){const za=this.updateGraphics.toArray(),Ha=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();ja&&ja.remove(this._internalGraphicsLayer);
this._restorePopup(qa);this.emit("update",{graphics:za,state:"complete",aborted:la.cancelled,tool:Ha,toolEventInfo:null,type:"update"})}})}async _getCommonUpdateOperationClickHandlers(la,qa,ja){const za=Y.createScreenPointFromEvent(qa),Ha=await qa.async(()=>this._getFirstHit(za));null==Ha?la.complete():qa.native.shiftKey&&this._toggleSelection([Ha.graphic],la,ja)?qa.stopPropagation():this.updateGraphics.includes(Ha.graphic)?qa.stopPropagation():la.complete()}_toggleSelection(la,qa,ja){const za=!!ja.multipleSelectionEnabled;
return la.some(Ha=>null==Ha?!1:za&&Ha.layer===this.layer?(this.updateGraphics.includes(Ha)?qa.removeFromSelection(Ha):qa.addToSelection(Ha),!0):!1)}_getCommonUpdateOperationKeyDownHandlers(la,qa){if(la){var ja=qa.key;ja===V.sketchKeys.undo&&la.canUndo()?(qa.stopPropagation(),la.undo()):ja===V.sketchKeys.redo&&la.canRedo()?(qa.stopPropagation(),la.redo()):ja===V.sketchKeys.cancel?(qa.stopPropagation(),la.cancel()):this.allowDeleteKey&&V.sketchKeys.delete.includes(ja)&&this._onDeleteKey(qa)}}_onDeleteKey(la){if(this._operationHandle&&
"update"===this._operationHandle.type){var qa=this.activeComponent,ja=this.updateGraphics.toArray();null!=qa&&"reshape-3d"!==qa.type&&("reshape"!==qa.type||1===ja.length&&"point"===ja[0].geometry?.type)&&(la.stopPropagation(),this.delete())}}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=L.destroyMaybe(this._internalGraphicsLayer))}_isComponentGraphic(la){const {activeComponent:qa}=this;return la&&null!=qa?la.attributes?.esriSketchTool||
"draw-2d"===qa.type&&qa.graphic===la||("box"===qa.type||"reshape"===qa.type)&&qa.isUIGraphic(la):!1}_displayPointerCursor(){this.view?.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view?.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view?.container&&null!==this.view.cursor&&(this.view.cursor=null)}_logError(la,qa,ja){w.getLogger(this).error(new z(la,qa,ja))}async _requireModule(la){const qa=
new AbortController;this._moduleLoaderAbortController=qa;la=await la;return this._moduleLoaderAbortController!==qa||qa.signal.aborted?{requireError:"aborted"}:{module:la}}_emitUndoEvent(la){this.emit("undo",{...la,type:"undo"})}_emitRedoEvent(la){this.emit("redo",{...la,type:"redo"})}_emitDeleteEvent(la){this.emit("delete",{...la,type:"delete"})}get test(){return{operationHandle:this._operationHandle,snappingManager:this._snappingManager,defaultUpdateOptions:Fa}}wait(){return B.whenOnce(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=
1;this.notifyChange("updating")}_endAsyncOperation(){--this._numUpdating;this.notifyChange("updating")}_disablePopupEnabled(la){return"3d"!==this.view?.type||this.updateOnGraphicClick||(la?.toggleToolOnClick??!1)}_disablePopup(la){this._disablePopupEnabled(la)&&this.view&&null==this._originalPopupEnabled&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(la){this._disablePopupEnabled(la)&&this.view&&null!=this._originalPopupEnabled&&(this.view.popupEnabled=
this._originalPopupEnabled,this._originalPopupEnabled=null)}async _waitViewReady(){const la=this.view;la?(L.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await W.whenOrAbort(B.whenOnce(()=>la?.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",Ia("view"))}_logMissingLayer(){this._logError("sketch:missing-property",Ia("layer"))}};u.__decorate([R.property()],Q.prototype,"updating",
null);u.__decorate([R.property()],Q.prototype,"_operationHandle",void 0);u.__decorate([R.property({readOnly:!0})],Q.prototype,"activeTool",null);u.__decorate([R.property()],Q.prototype,"activeFillSymbol",void 0);u.__decorate([R.property()],Q.prototype,"activeLineSymbol",void 0);u.__decorate([R.property()],Q.prototype,"activeVertexSymbol",void 0);u.__decorate([R.property()],Q.prototype,"allowDeleteKey",void 0);u.__decorate([R.property({readOnly:!0})],Q.prototype,"createGraphic",null);u.__decorate([R.property()],
Q.prototype,"defaultCreateOptions",null);u.__decorate([R.property()],Q.prototype,"defaultUpdateOptions",null);u.__decorate([R.property({type:ia,nonNullable:!0})],Q.prototype,"labelOptions",null);u.__decorate([R.property()],Q.prototype,"layer",void 0);u.__decorate([R.property({types:v.symbolTypes})],Q.prototype,"pointSymbol",void 0);u.__decorate([R.property({types:v.symbolTypes})],Q.prototype,"polygonSymbol",void 0);u.__decorate([R.property({types:v.symbolTypes})],Q.prototype,"polylineSymbol",void 0);
u.__decorate([R.property()],Q.prototype,"meshSymbol",void 0);u.__decorate([R.property({type:ea,nonNullable:!0})],Q.prototype,"snappingOptions",null);u.__decorate([R.property()],Q.prototype,"_snappingManager",void 0);u.__decorate([R.property({readOnly:!0})],Q.prototype,"state",null);u.__decorate([R.property({type:ma,nonNullable:!0})],Q.prototype,"tooltipOptions",null);u.__decorate([R.property({readOnly:!0})],Q.prototype,"updateGraphics",void 0);u.__decorate([R.property()],Q.prototype,"updateOnGraphicClick",
void 0);u.__decorate([R.property({type:D,nonNullable:!0})],Q.prototype,"valueOptions",null);u.__decorate([R.property({types:v.symbolTypes})],Q.prototype,"vertexSymbol",void 0);u.__decorate([R.property({value:null})],Q.prototype,"view",null);u.__decorate([R.property()],Q.prototype,"sketchOptions",void 0);Q=u.__decorate([I.subclass("esri.widgets.Sketch.SketchViewModel")],Q);const Ia=la=>`Property '${la}' is missing on SketchViewModel.`;return Q})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports",
"../../../../core/has"],function(q,u){q.SupportedGraphicResult=void 0;(function(v){v[v.SUPPORTED=0]="SUPPORTED";v[v.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING";v[v.GEOMETRY_MISSING=2]="GEOMETRY_MISSING";v[v.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED";v[v.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED";v[v.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(q.SupportedGraphicResult||(q.SupportedGraphicResult={}));q.isSupportedGraphicResultMessage=function(v){switch(v){case q.SupportedGraphicResult.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";
case q.SupportedGraphicResult.GEOMETRY_MISSING:return"no geometry";case q.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case q.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case q.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports",
"../../../../../core/has","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(q,u,v,A){q.isSupportedGraphic=function(z){if("graphics"!==z.layer?.type)return A.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;if(null==z.geometry)return A.SupportedGraphicResult.GEOMETRY_MISSING;switch(z.geometry.type){case "polygon":case "point":case "polyline":case "mesh":break;case "multipoint":case "extent":return A.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED;default:return A.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}return"on-the-ground"!==
v.getGraphicEffectiveElevationMode(z)&&v.hasGraphicFeatureExpressionInfo(z)?A.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:A.SupportedGraphicResult.SUPPORTED};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/support/elevationInfoUtils":function(){define(["exports","../symbols/support/unitConversionUtils"],function(q,u){function v(F,E){return E?.mode?E.mode:(F?B:R).mode}function A(F,E){return null!=E?E:F?B:R}function z(F,E){return v(null!=F?F.hasZ:!1,E)}function Q(F){const E=
w(F);return z(F.geometry,E)}function w(F){return F.layer&&"elevationInfo"in F.layer?F.layer.elevationInfo:null}function L(F,E,I,H,y,O,U=null){if(null!=O){var P=null!=U?U.mode:"absolute-height";if("on-the-ground"===P)return 0;({absoluteZ:O}=W(E,I,H,y,F,O));a:{U=null!=U?.offset?U.offset:0;switch(P){case "absolute-height":F=O-U;break a;case "relative-to-ground":F=O-((F.elevationProvider.getElevation(E,I,H,y,"ground")??0)+U);break a;case "relative-to-scene":F=O-((F.elevationProvider.getElevation(E,I,
H,y,"scene")??0)+U);break a}F=void 0}return F}}function W(F,E,I,H,y,O){const U=null!=O.offset?O.offset:0;switch(O.mode){case "absolute-height":return{absoluteZ:I+U,elevation:0};case "on-the-ground":return I=y.elevationProvider.getElevation(F,E,0,H,"ground")??0,{absoluteZ:I,elevation:I};case "relative-to-ground":return F=y.elevationProvider.getElevation(F,E,I,H,"ground")??0,{absoluteZ:I+F+U,elevation:F};case "relative-to-scene":return F=y.elevationProvider.getElevation(F,E,I,H,"scene")??0,{absoluteZ:I+
F+U,elevation:F}}}const B={mode:"absolute-height",offset:0},R={mode:"on-the-ground",offset:null};q.absoluteHeightElevationInfo=B;q.elevationContextAffectsAlignment=function(F,E){if(null==E)return!1;({mode:E}=E);return null!=E&&("scene"===F&&"relative-to-scene"===E||"ground"===F&&"absolute-height"!==E)};q.elevationInfoLikeEquals=function(F,E){return F===E||null!=F&&null!=E&&F.mode===E.mode&&F.offset===E.offset};q.elevationModeRequiredMessage=function(F,E,I){return I&&I.mode!==E?`${F} only support ${E} elevation mode`:
null};q.elevationModeUnsupportedMessage=function(F,E,I){return I?.mode===E?`${F} do not support ${E} elevation mode`:null};q.featureExpressionUnsupportedMessage=function(F,E){return null!=E?.featureExpressionInfo&&"0"!==E.featureExpressionInfo.expression?`${F} do not support featureExpressionInfo`:null};q.getConvertedElevation=function(F,E,I,H=null){return L(F,E.x,E.y,E.hasZ?E.z:0,E.spatialReference,I,H)};q.getConvertedElevationFromVector=function(F,E,I,H,y=null){return L(F,E[0],E[1],2<E.length?E[2]:
0,I,H,y)};q.getConvertedElevationFromXYZ=L;q.getEffectiveElevationInfo=A;q.getEffectiveElevationMode=v;q.getGeometryEffectiveElevationInfo=function(F,E){return A(null!=F?!!F.hasZ:!1,E)};q.getGeometryEffectiveElevationMode=z;q.getGraphicEffectiveElevationInfo=function(F){var E=w(F);F=z(F.geometry,E);E=null!=E&&"on-the-ground"!==F?(E.offset??0)*u.getMetersPerUnit(E.unit??"meters"):0;return{mode:F,offset:E}};q.getGraphicEffectiveElevationMode=Q;q.getZForElevationMode=function(F,E,I){if(I?.mode){var H=
F.hasZ?F.z:0,y=null!=I.offset?I.offset:0;switch(I.mode){case "absolute-height":return H-y;case "on-the-ground":return 0;case "relative-to-ground":return F=(E.elevationProvider.getElevation(F.x,F.y,H,F.spatialReference,"ground")??0)+y,H-F;case "relative-to-scene":return F=(E.elevationProvider.getElevation(F.x,F.y,H,F.spatialReference,"scene")??0)+y,H-F}}};q.hasGraphicFeatureExpressionInfo=function(F){if("on-the-ground"===Q(F))return!1;F=w(F);F=F?.featureExpressionInfo?F.featureExpressionInfo.expression:
null;return!(!F||"0"===F)};q.logInvalidElevationInfoWarning=function(F,E){E&&F.warn(".elevationInfo\x3d",E)};q.onTheGroundElevationInfo=R;q.zValueInAbsoluteHeightMode=W;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(q,u,v,A){function z(Q){if("graphics"!==Q.layer?.type)return{result:A.SupportedGraphicResult.GRAPHICS_LAYER_MISSING,
geometry:null};const {geometry:w}=Q;if(null==w)return{result:A.SupportedGraphicResult.GEOMETRY_MISSING,geometry:null};if("on-the-ground"!==v.getGraphicEffectiveElevationMode(Q)&&v.hasGraphicFeatureExpressionInfo(Q))return{result:A.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED,geometry:null};const L=w.type;return"point"!==L&&"mesh"!==L&&"polyline"!==L&&("polygon"!==L||Q.geometry instanceof u)?{result:A.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:A.SupportedGraphicResult.SUPPORTED,
geometry:w}}q.geometryOfSupportedGraphic=function(Q){return z(Q).geometry};q.isSupportedGraphic=function(Q){return z(Q).result};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/Circle":function(){define("../chunks/tslib.es6 ../core/unitUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./ellipsoidUtils ./Point ./Polygon ./SpatialReference ./support/geodesicUtils ./support/webMercatorUtils ./support/WKIDUnitConversion".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I){var H;A=H=class extends B{constructor(...y){super(...y);this.center=null;this.geodesic=!1;this.numberOfPoints=60;this.radius=1E3;this.radiusUnit="meters"}normalizeCtorArgs(y,O){if(!y?.center){if(y?.rings)return super.normalizeCtorArgs(y,O);y={center:y}}return{...super.normalizeCtorArgs(),...y,...O}}initialize(){var y=this.center;const O=this.numberOfPoints;this.hasZ=y?.hasZ??!1;if(0===this.rings.length&&y){var U=u.convertUnit(this.radius,this.radiusUnit,"meters"),
P=y.spatialReference,S="geographic";if(P.isWebMercator)S="webMercator";else if(null!=(P.wkid&&I[P.wkid])||(P.wkt2||P.wkt)&&u.isProjectedWKT(P.wkt2||P.wkt))S="projected";if(this.geodesic){let Z;switch(S){case "webMercator":Z=E.webMercatorToGeographic(y);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":Z=y}y=this._createGeodesicCircle(Z,U,O);"webMercator"===S&&(y=E.geographicToWebMercator(y))}else{let Z;
"webMercator"===S||"projected"===S?Z=U/u.getMetersPerUnit(y.spatialReference):"geographic"===S&&(Z=u.lengthToDegrees(U,"meters",L.getReferenceEllipsoid(y.spatialReference).radius));y=this._createPlanarCircle(y,Z,O)}this.spatialReference=y.spatialReference;this.addRing(y.rings[0])}}clone(){const {center:y,numberOfPoints:O,radius:U,radiusUnit:P,geodesic:S}=this;return new H({center:y?.clone(),numberOfPoints:O,radius:U,radiusUnit:P,geodesic:S})}_createGeodesicCircle(y,O,U){let P=0;const S=[];for(;360>
P;){const Z=[0,0];F.directGeodeticSolver(Z,[y.x,y.y],P,O,R.WGS84);this.hasZ&&Z.push(y.z);S.push(Z);P+=360/U}S.push(S[0]);return new B(S)}_createPlanarCircle(y,O,U){const P=[],S=2*Math.PI/U;for(let aa=0;aa<U;++aa){var Z=S*aa;Z=[y.x+Math.cos(-Z)*O,y.y+Math.sin(-Z)*O];this.hasZ&&Z.push(y.z);P.push(Z)}P.push(P[0]);return new B({spatialReference:y.spatialReference,rings:[P]})}};q.__decorate([v.property({type:W})],A.prototype,"center",void 0);q.__decorate([v.property()],A.prototype,"geodesic",void 0);q.__decorate([v.property()],
A.prototype,"numberOfPoints",void 0);q.__decorate([v.property()],A.prototype,"radius",void 0);q.__decorate([v.property()],A.prototype,"radiusUnit",void 0);return A=H=q.__decorate([w.subclass("esri.geometry.Circle")],A)})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../support/elevationInfoUtils","../isSupportedGraphicUtils"],function(q,u,v,A){q.isSupportedGraphic=function(z){if("graphics"!==z.layer?.type)return A.SupportedGraphicResult.GRAPHICS_LAYER_MISSING;
if(null==z.geometry)return A.SupportedGraphicResult.GEOMETRY_MISSING;switch(z.geometry.type){case "point":break;case "polygon":case "polyline":case "multipoint":case "extent":case "mesh":return A.SupportedGraphicResult.SUPPORTED;default:return A.SupportedGraphicResult.GEOMETRY_TYPE_UNSUPPORTED}const Q=null!=z.symbol&&"point-3d"===z.symbol.type&&z.symbol.symbolLayers;return Q&&Q.some(w=>"object"===w.type)?"on-the-ground"!==v.getGraphicEffectiveElevationMode(z)&&v.hasGraphicFeatureExpressionInfo(z)?
A.SupportedGraphicResult.ELEVATION_MODE_UNSUPPORTED:A.SupportedGraphicResult.SUPPORTED:A.SupportedGraphicResult.SYMBOL_TYPE_UNSUPPORTED};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/draw/support/layerUtils":function(){define(["exports"],function(q){q.addUniqueLayer=function(u,v,A){if(v&&u?.map){({map:u}=u);var z=u.layers.find(Q=>Q===v);z||u.add(v,A);z&&null!=A&&u.layers.reorder(z,A)}};q.findLayerView=function(u,v){const A="subtype-sublayer"===v?.type?v.parent:v;return u.allLayerViews.find(z=>
{z=z.layer;return z===A||"sublayers"in z&&null!=z.sublayers&&z.sublayers.includes(A)})};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/keybindings":function(){define(["exports"],function(q){q.sketchKeys={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "};q.snappingKeys={toggle:"Control"};q.tooltipKeys={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"};Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchLabelOptions":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.enabled=!1}};q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"enabled",void 0);
return u=q.__decorate([w.subclass("esri.views.interactive.sketch.SketchLabelOptions")],u)})},"esri/views/interactive/sketch/SketchOptions":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./SketchLabelOptions ./SketchTooltipOptions ./SketchValueOptions".split(" "),function(q,u,v,A,z,Q,w,L,W,B){u=class extends u{constructor(R){super(R);
this.labels=new L;this.tooltips=new W;this.values=new B}};q.__decorate([v.property({nonNullable:!0,type:L})],u.prototype,"labels",void 0);q.__decorate([v.property({nonNullable:!0,type:W})],u.prototype,"tooltips",void 0);q.__decorate([v.property({nonNullable:!0,type:B})],u.prototype,"values",void 0);return u=q.__decorate([w.subclass("esri.views.interactive.sketch.SketchOptions")],u)})},"esri/views/interactive/sketch/SketchTooltipOptions":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./SketchTooltipElevationOptions ./SketchTooltipVisibleElements".split(" "),
function(q,u,v,A,z,Q,w,L,W){u=class extends u{constructor(B){super(B);this.forceEnabled=this.enabled=!1;this.inputEnabled=!0;this.elevation=new L.SketchTooltipElevationOptions;this.visibleElements=new W;this.visualVariables=null}get effectiveEnabled(){return this.forceEnabled||this.enabled}};q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"enabled",void 0);q.__decorate([v.property()],u.prototype,"forceEnabled",void 0);q.__decorate([v.property()],u.prototype,"effectiveEnabled",
null);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"inputEnabled",void 0);q.__decorate([v.property({type:L.SketchTooltipElevationOptions,nonNullable:!0})],u.prototype,"elevation",void 0);q.__decorate([v.property({type:W,nonNullable:!0})],u.prototype,"visibleElements",void 0);q.__decorate([v.property()],u.prototype,"visualVariables",void 0);return u=q.__decorate([w.subclass("esri.widgets.sketch.SketchTooltipOptions")],u)})},"esri/views/interactive/sketch/SketchTooltipElevationOptions":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w,L){q.SketchTooltipElevationOptions=class extends v{constructor(W){super(W);this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};u.__decorate([A.property({type:String,nonNullable:!0})],q.SketchTooltipElevationOptions.prototype,"mode",void 0);q.SketchTooltipElevationOptions=u.__decorate([L.subclass("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],q.SketchTooltipElevationOptions);Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/SketchTooltipVisibleElements":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.header=this.elevation=this.distance=this.direction=this.area=!0;this.helpMessage=!1;this.totalLength=this.size=this.scale=this.rotation=this.radius=this.orientation=!0}toJSON(){return{area:this.area,direction:this.direction,distance:this.distance,elevation:this.elevation,header:this.header,helpMessage:this.helpMessage,orientation:this.orientation,radius:this.radius,rotation:this.rotation,scale:this.scale,size:this.size,totalLength:this.totalLength}}};
q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"area",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"direction",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"distance",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"elevation",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"header",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,
"helpMessage",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"orientation",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"radius",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"rotation",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"scale",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"size",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],
u.prototype,"totalLength",void 0);return u=q.__decorate([w.subclass("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],u)})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Evented ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../support/elevationInfoUtils ../sketch/normalizedPoint ./Settings ./SnappingDomain ./snappingFactory ./SnappingOptions ./snappingUtils ./candidates/IntersectionSnappingCandidate ../support/viewUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z){function aa({coordinateHelper:G,elevationInfo:X}){return G.hasZ()?E.absoluteHeightElevationInfo:X}q.SnappingManager=class extends A.EventedMixin(v){constructor(G){super(G);this.options=new U;this.snappingEnginesFactory=O.defaultSnappingEnginesFactory;this._engines=[];this._currentMainCandidate=null;this._currentOtherActiveCandidates=[];this._currentSnappedType=M.MAIN}initialize(){this.addHandles([Q.watch(()=>{const {effectiveFeatureEnabled:G,effectiveSelfEnabled:X,
touchSensitivityMultiplier:C,distance:V}=this.options;return{effectiveFeatureEnabled:G,effectiveSelfEnabled:X,touchSensitivityMultiplier:C,distance:V}},()=>{this.doneSnapping();this.emit("changed")},Q.sync),Q.watch(()=>this.options,G=>{for(const X of this._engines)X.options=G},Q.sync),Q.watch(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:G,snappingEnginesFactory:X})=>this._recreateEngines(G,X),Q.syncAndInitial)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(G=>
G.updating)}_recreateEngines(G,X){this._destroyEngines();if(G){var {view:C,options:V}=this;this._engines=X(C,V)}}_destroyEngines(){for(const G of this._engines)G.destroy();this._engines=[]}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const {distance:G,touchSensitivityMultiplier:X}=this.options,C=G*X;return C*C}get _squaredSatisfiesConstraintThreshold(){return H.defaults.satisfiesConstraintScreenThreshold*H.defaults.satisfiesConstraintScreenThreshold}snap(G){return null!=
G.scenePoint?this._snapMultiPoint(G):this._snapSinglePoint(G)}update(G){const {point:X,context:C}=G;this._removeVisualization();const V=this._currentMainCandidate;if(null==V)return X;var ia=this._selectUpdateInput(G);if(null==ia)return X;({spatialReference:G}=C);var oa=F.project(ia,G);if(null==oa)return X;({view:ia}=this);const {elevationInfo:ma,visualizer:D}=C,J=[];oa=I.fromPoint(oa,ia,ma);const ea=V.constraint.closestTo(oa);if(!this._arePointsWithinScreenThreshold(oa,ea,C))return this._resetSnappingState(),
X;V.targetPoint=ea;J.push(...V.hints);for(const ba of this._currentOtherActiveCandidates)ba.targetPoint=ea,J.push(...ba.hints);null!=D&&this.addHandles(D.draw(J,{spatialReference:G,elevationInfo:aa(C),view:ia,selfSnappingZ:C.selfSnappingZ}),"visualization-handle");return I.toElevationAlignedDehydratedPoint(ea,ia,X,C)}doneSnapping(){this._removeVisualization();this._resetSnappingState()}_selectUpdateInput({point:G,scenePoint:X}){switch(this._currentSnappedType){case M.MAIN:return G;case M.SCENE:return X}}_resetSnappingState(){this._currentMainCandidate=
null;this._currentOtherActiveCandidates=[];this._currentSnappedType=M.MAIN}_removeVisualization(){this.removeHandles("visualization-handle")}async _snapSinglePoint({point:G,context:X,signal:C}){const {view:V}=this;var {elevationInfo:ia}=X;ia=I.fromPoint(G,V,ia);const oa=await this._fetchCandidates(ia,y.SnappingDomain.ALL,X,C);return this._createSnapResult(ia,M.MAIN,oa,V,G,X,C)}async _snapMultiPoint({point:G,scenePoint:X,context:C,signal:V}){const {view:ia}=this,{coordinateHelper:oa,elevationInfo:ma,
spatialReference:D}=C;await F.initializeProjection(X.spatialReference,D);X=F.project(X,D);var J=I.fromPoint(X,ia,ma);const ea=await this._fetchCandidates(J,y.SnappingDomain.FEATURE,C,V);if(0<ea.length)return G=await this._fetchCandidates(J,y.SnappingDomain.SELF,C,V),this._createSnapResult(J,M.SCENE,[...ea,...G],ia,X,C,V);X=I.fromPoint(G,ia,ma);J=await this._fetchCandidates(X,y.SnappingDomain.SELF,C,V);return this._createSnapResult(X,M.MAIN,J,ia,{z:oa.hasZ()&&G.hasZ?G.z??0:void 0,m:oa.hasM()&&G.hasM?
G.m??0:void 0},C,V)}async _fetchCandidates(G,X,C,V){return(await Promise.all(this._engines.map(ia=>ia.fetchCandidates(G,X,C,V)))).flat()}_createSnapResult(G,X,C,V,ia,oa,ma){return{get valid(){return!z.isAborted(ma)},apply:()=>{const {spatialReference:D}=oa,{snappedPoint:J,hints:ea}=this._processCandidates(G,X,C,oa);this._removeVisualization();null!=oa.visualizer&&this.addHandles(oa.visualizer.draw(ea,{spatialReference:D,elevationInfo:E.absoluteHeightElevationInfo,view:V,selfSnappingZ:oa.selfSnappingZ}),
"visualization-handle");return I.toElevationAlignedDehydratedPoint(J,V,ia,oa)}}}_processCandidates(G,X,C,V){if(1>C.length)return this.doneSnapping(),{snappedPoint:G,hints:[]};this._currentSnappedType!==X&&this._resetSnappingState();P.sortCandidatesInPlace(G,C);const ia=this._currentMainCandidate;if(null!=ia){const oa=this._findOldConstraintInNewCandidates(ia,C);if(0<=oa)if(C[oa]instanceof S.IntersectionSnappingCandidate){if(this._arePointsWithinScreenThreshold(G,ia.targetPoint,V))return this._updateSnappingCandidate(ia,
X,C,V)}else return this._intersectWithOtherCandidates(oa,C,G,X,V)}return this._intersectWithOtherCandidates(0,C,G,X,V)}_findOldConstraintInNewCandidates(G,X){return G instanceof S.IntersectionSnappingCandidate?0<=this._findOldCandidateIndex(X,G.first)&&0<=this._findOldCandidateIndex(X,G.second)?0:-1:this._findOldCandidateIndex(X,G)}_intersectWithOtherCandidates(G,X,C,V,ia){const {coordinateHelper:oa}=ia,ma=X[G],D=[];for(let J=0;J<X.length;++J){if(J===G)continue;const ea=X[J],ba=ma.constraint.intersect(ea.constraint);
if(ba)for(const T of ba.closestPoints(ma.targetPoint))D.push([new S.IntersectionSnappingCandidate(T,ma,ea,ea.isDraped),this._squaredScreenDistance(C,T,oa)])}return 0<D.length&&(D.sort((J,ea)=>J[1]-ea[1]),D[0][1]<this._squaredPointProximityThreshold(ia.pointer))?this._updateSnappingCandidate(D[0][0],V,X,ia):this._updateSnappingCandidate(ma,V,X,ia)}_updateSnappingCandidate(G,X,C,V){this.doneSnapping();this._currentMainCandidate=G;this._currentSnappedType=X;X=this._currentMainCandidate.targetPoint;const ia=
[];ia.push(...G.hints);for(const oa of C){if(G instanceof S.IntersectionSnappingCandidate){if(oa.constraint.equals(G.first.constraint)||oa.constraint.equals(G.second.constraint))continue}else if(oa.constraint.equals(G.constraint))continue;C=oa.constraint.closestTo(X);this._squaredScreenDistance(C,X,V.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(oa.targetPoint=X,this._currentOtherActiveCandidates.push(oa),ia.push(...oa.hints))}return{snappedPoint:X,hints:ia}}_squaredPointProximityThreshold(G){return"touch"===
G?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(G,X,C){return this._squaredScreenDistance(G,X,C.coordinateHelper)<this._squaredPointProximityThreshold(C.pointer)}_squaredScreenDistance(G,X,C){return P.squaredScreenDistance(this._toScreen(G,C),this._toScreen(X,C))}_toScreen(G,X){return Z.vectorToScreenPoint(G,X.spatialReference,E.absoluteHeightElevationInfo,this.view)}_findOldCandidateIndex(G,X){let C=-1;for(let V=0;V<G.length;++V)if(X.constraint.equals(G[V].constraint)){C=
V;break}return C}get test(){return{visualizationsActive:this.hasHandles("visualization-handle"),engines:this._engines}}};u.__decorate([w.property({constructOnly:!0})],q.SnappingManager.prototype,"view",void 0);u.__decorate([w.property()],q.SnappingManager.prototype,"options",void 0);u.__decorate([w.property({readOnly:!0})],q.SnappingManager.prototype,"updating",null);u.__decorate([w.property()],q.SnappingManager.prototype,"snappingEnginesFactory",void 0);u.__decorate([w.property()],q.SnappingManager.prototype,
"_engines",void 0);u.__decorate([w.property()],q.SnappingManager.prototype,"_squaredMouseProximityThreshold",null);u.__decorate([w.property()],q.SnappingManager.prototype,"_squaredTouchProximityThreshold",null);u.__decorate([w.property()],q.SnappingManager.prototype,"_squaredSatisfiesConstraintThreshold",null);q.SnappingManager=u.__decorate([R.subclass("esri.views.interactive.snapping.SnappingManager")],q.SnappingManager);var M;(function(G){G[G.MAIN=0]="MAIN";G[G.SCENE=1]="SCENE"})(M||={});Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/normalizedPoint":function(){define(["exports","../../../core/libs/gl-matrix-2/factories/vec3f64","../../../layers/graphics/dehydratedPoint","../../../support/elevationInfoUtils"],function(q,u,v,A){function z(w,L,W){if(null==w)return null;if(null==L)return u.fromValues(w.x,w.y,w.z??0);if("2d"===L.type)return u.fromValues(w.x,w.y,0);L=A.getConvertedElevation(L,w,W,A.absoluteHeightElevationInfo)??0;return u.fromValues(w.x,w.y,L)}
const Q=v.makeDehydratedPoint(0,0,0,null);q.asVec2=function(w){return w};q.clone=function(w){return u.clone(w)};q.create=function(w,L,W){return u.fromValues(w,L,W)};q.fromAnyMapPoint=function(w,L,{coordinateHelper:W,elevationInfo:B}){return w?z(W.vectorToDehydratedPoint(w,Q),L,B):null};q.fromPoint=z;q.fromValues=function(w,L,W){return u.fromValues(w,L,W)};q.fromVec3=function(w){return w};q.toDehydratedPoint=function(w,L){return v.makeDehydratedPoint(w[0],w[1],w[2],L)};q.toElevationAlignedDehydratedPoint=
function(w,L,{z:W,m:B},R){const {spatialReference:F,elevationInfo:E}=R;L=null==W&&null==B?void 0:null==L||"2d"===L.type?W??void 0:A.getConvertedElevationFromVector(L,w,F,A.absoluteHeightElevationInfo,E)??0;w=v.makeDehydratedPoint(w[0],w[1],L,F);null!=B&&(w.m=B,w.hasM=!0);return w};q.toWritableVec3=function(w){return u.clone(w)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/tslib.es6 ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q){let w=class extends A.JSONSupport{constructor(){super(...arguments);this.enabled=!0}};u.__decorate([z.property({type:Boolean})],w.prototype,"enabled",void 0);w=u.__decorate([Q.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],w);A=class extends A.JSONSupport{constructor(L){super(L);this.lineSnapper=new w;this.parallelLineSnapper=new w;this.rightAngleSnapper=new w;this.rightAngleTriangleSnapper=new w;this.shortLineThreshold=15;this.distance=5;this.parallelLineThreshold=
this.intersectionParallelLineThreshold=this.pointThreshold=1E-6;this.verticalLineThresholdMeters=.3;this.touchSensitivityMultiplier=1.5;this.pointOnLineThreshold=1E-6;this.orange=new v([255,127,0]);this.orangeTransparent=new v([255,127,0,.5]);this.lineHintWidthTarget=this.lineHintWidthReference=3;this.lineHintFadedExtensions=.3;this.parallelLineHintWidth=2;this.parallelLineHintLength=24;this.parallelLineHintOffset=1.5;this.rightAngleHintSize=24;this.rightAngleHintOutlineSize=1.5;this.satisfiesConstraintScreenThreshold=
1}};u.__decorate([z.property({type:w,constructOnly:!0,nonNullable:!0,json:{write:!0}})],A.prototype,"lineSnapper",void 0);u.__decorate([z.property({type:w,constructOnly:!0,nonNullable:!0,json:{write:!0}})],A.prototype,"parallelLineSnapper",void 0);u.__decorate([z.property({type:w,constructOnly:!0,nonNullable:!0,json:{write:!0}})],A.prototype,"rightAngleSnapper",void 0);u.__decorate([z.property({type:w,constructOnly:!0,nonNullable:!0,json:{write:!0}})],A.prototype,"rightAngleTriangleSnapper",void 0);
u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],A.prototype,"shortLineThreshold",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],A.prototype,"distance",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],A.prototype,"pointThreshold",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],
A.prototype,"intersectionParallelLineThreshold",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],A.prototype,"parallelLineThreshold",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],A.prototype,"verticalLineThresholdMeters",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],A.prototype,"touchSensitivityMultiplier",void 0);u.__decorate([z.property({type:Number,
nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],A.prototype,"pointOnLineThreshold",void 0);u.__decorate([z.property({type:v,nonNullable:!0})],A.prototype,"orange",void 0);u.__decorate([z.property({type:v,nonNullable:!0})],A.prototype,"orangeTransparent",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],A.prototype,"lineHintWidthReference",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],
A.prototype,"lineHintWidthTarget",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],A.prototype,"lineHintFadedExtensions",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],A.prototype,"parallelLineHintWidth",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],A.prototype,"parallelLineHintLength",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,
range:{min:0,max:5},json:{write:!0}})],A.prototype,"parallelLineHintOffset",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],A.prototype,"rightAngleHintSize",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],A.prototype,"rightAngleHintOutlineSize",void 0);u.__decorate([z.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],A.prototype,"satisfiesConstraintScreenThreshold",void 0);
A=u.__decorate([Q.subclass("esri.views.interactive.snapping.Settings.Defaults")],A);u=new A;q.defaults=u;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingDomain":function(){define(["exports"],function(q){q.SnappingDomain=void 0;var u=q.SnappingDomain||(q.SnappingDomain={});u[u.FEATURE=1]="FEATURE";u[u.SELF=2]="SELF";u[u.ALL=3]="ALL";Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/snappingFactory":function(){define(["exports",
"./FeatureSnappingEngine","./SelfSnappingEngine"],function(q,u,v){q.defaultSnappingEnginesFactory=function(A,z){return[new v.SelfSnappingEngine({view:A,options:z}),new u.FeatureSnappingEngine({view:A,options:z,spatialReference:A.spatialReference})]};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/handleUtils ../../../core/promiseUtils ../../../core/reactiveUtils ../../../core/unitUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/math/vec2 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../core/libs/gl-matrix-2/math/common ../../../core/support/UpdatingHandles ../../../support/elevationInfoUtils ../sketch/constraints ../sketch/normalizedPoint ./FeatureSnappingSourceInfo ./SnappingDomain ./snappingUtils ./candidates/DrapedEdgeSnappingCandidate ./candidates/EdgeSnappingCandidate ./candidates/FeatureSnappingCandidate ./candidates/RightAngleSnappingCandidate ../support/viewUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G,X,C,V,ia,oa){function ma({constraint:{start:ba,end:T}}){const Y=H.squaredDistance(ba,T);ba=I.squaredDistance(Z.asVec2(ba),Z.asVec2(T));return Y<O.getEpsilon()||1E-4>ba/Y}function D(ba,T,Y,fa,pa,va,{spatialReference:xa}){T=H.copy(ea,T);T[0]+=Y;T[1]+=fa;T[2]+=pa;return(Y=oa.vectorToScreenPoint(T,xa,P.absoluteHeightElevationInfo,va))?G.screenDistance(Y,ba):Infinity}u.FeatureSnappingEngine=class extends A{get updating(){return this._snappingSources.some(ba=>
null==ba||ba.valid&&ba.snappingSource.updating)||this._updatingHandles.updating}constructor(ba){super(ba);this.options=null;this._domain=M.SnappingDomain.FEATURE;this._updatingHandles=new U.UpdatingHandles;this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){const ba=w.mapCollectionAsync(()=>this.options?.featureSources,(T,Y)=>this._createSourceInfo(T,
Y));this._snappingSources=ba;this.addHandles(z.destroyHandle(ba))}destroy(){this._set("options",null);this._updatingHandles.destroy()}async fetchCandidates(ba,T,Y,fa){if(!(T&this._domain&&null!=this.options&&this.options.effectiveFeatureEnabled))return[];const pa=[];T=this._computeScreenSizeDistanceParameters(ba,Y);for(const xa of this._snappingSources){if(null==xa||!xa.valid||!xa.snappingSource.layerSource.enabled||xa.layerView?.suspended)continue;const ya=xa.getFetchCandidatesParameters(ba,Y,T);
for(var va of ya)pa.push(xa.snappingSource.fetchCandidates(va,fa).then(Da=>Da.filter(Ca=>!this._candidateIsExcluded(xa.snappingSource,Ca,Y.excludeFeature))))}va=(await Q.allSettledValues(pa)).flat();this._addRightAngleCandidates(va,ba,T,Y);Q.throwIfAborted(fa);G.sortCandidatesInPlace(ba,va);return va}_addRightAngleCandidates(ba,T,Y,fa){var pa=null!=fa.vertexHandle?fa.vertexHandle.rightEdge?.rightVertex?.pos:null!=fa.editGeometryOperations&&"polygon"===fa.editGeometryOperations.data.type?fa.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:
null,va=null!=fa.vertexHandle?fa.vertexHandle.leftEdge?.leftVertex?.pos:null!=fa.editGeometryOperations?fa.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:xa}=this;pa=Z.fromAnyMapPoint(pa,xa,fa);fa=Z.fromAnyMapPoint(va,xa,fa);va=ba.length;for(xa=0;xa<va;xa++)this._addRightAngleCandidate(ba[xa],fa,T,Y,ba),this._addRightAngleCandidate(ba[xa],pa,T,Y,ba)}_addRightAngleCandidate(ba,T,Y,fa,pa){var va;(va=null==T)||(va=!((ba instanceof C.EdgeSnappingCandidate||ba instanceof X.DrapedEdgeSnappingCandidate)&&
!ma(ba)));if(!va){va=ba.constraint.closestTo(T);var xa=(va[0]-Y[0])/fa.x;Y=(va[1]-Y[1])/fa.y;var {start:ya,end:Da}=ba.constraint;1>=xa*xa+Y*Y&&(ba=new ia.RightAngleSnappingCandidate({targetPoint:va,otherVertex:T,otherVertexType:ia.OtherVertexType.NEXT,previousVertex:I.squaredDistance(Z.asVec2(va),Z.asVec2(ya))>I.squaredDistance(Z.asVec2(va),Z.asVec2(Da))?ya:Da,constraint:new S.VerticalHalfPlaneConstraint(T,va),objectId:ba.objectId,isDraped:ba.isDraped}),pa.push(ba))}}_computeScreenSizeDistanceParameters(ba,
T){let Y=null!=this.options?this.options.distance*("touch"===T.pointer?this.options.touchSensitivityMultiplier:1):0;return null==this.view?{x:Y,y:Y,z:Y,distance:Y}:"2d"===this.view.type?(Y*=this.view.resolution,{x:Y,y:Y,z:Y,distance:Y}):this._computeScreenSizeDistanceParameters3D(ba,Y,this.view,T)}_computeScreenSizeDistanceParameters3D(ba,T,Y,fa){var {spatialReference:pa}=fa;Y.renderCoordsHelper.toRenderCoords(ba,pa,J);const va=Y.state.camera.computeScreenPixelSizeAt(J);var xa=va*Y.renderCoordsHelper.unitInMeters,
ya=xa/L.getMetersPerUnitForSR(pa);const Da=xa/L.getMetersPerVerticalUnitForSR(pa);xa=T*ya;const Ca=T*Da,Ka=oa.vectorToScreenPoint(ba,pa,P.absoluteHeightElevationInfo,Y);pa=Ka?D(Ka,ba,ya,0,0,Y,fa):0;ya=Ka?D(Ka,ba,0,ya,0,Y,fa):0;ba=Ka?D(Ka,ba,0,0,Da,Y,fa):0;return{x:0===pa?0:xa/pa,y:0===ya?0:xa/ya,z:0===ba?0:Ca/ba,distance:va*T}}_candidateIsExcluded(ba,T,Y){if(null==Y)return!1;T=this._getCandidateObjectId(T);if(null==T)return!1;ba=ba.layerSource.layer;return"graphics"===ba.type?Y.uid===T:Y.sourceLayer===
ba&&Y.attributes&&"objectIdField"in ba?Y.attributes[ba.objectIdField]===T:!1}_getCandidateObjectId(ba){return ba instanceof V.FeatureSnappingCandidate?ba.objectId:null}async _createSourceInfo(ba,T){const Y=ba.layer;Y.loaded||(await Y.load(),Q.throwIfAborted(T));const {view:fa}=this;ba=await this._createFeatureSnappingSourceType(ba);Q.throwIfAborted(T);return null==ba?new aa.FeatureSnappingSourceInfo({}):new aa.FeatureSnappingSourceInfo({snappingSource:ba,view:fa,layer:Y})}async _createFeatureSnappingSourceType(ba){switch(ba.layer.type){case "feature":case "geojson":case "csv":case "oriented-imagery":case "subtype-group":case "wfs":return this._createFeatureSnappingSourceFeatureLayer(ba);
case "graphics":return this._createFeatureSnappingSourceGraphicsLayer(ba);case "map-notes":return this._createFeatureSnappingSourceMapNotesLayer(ba);case "scene":case "building-scene":return this._createFeatureSnappingSourceSceneLayer(ba)}return null}async _createFeatureSnappingSourceSceneLayer(ba){const {view:T}=this;return null==T||"3d"!==T.type?null:new ((await this._getSourceModule("scene")).SceneLayerSnappingSource)({layerSource:ba,view:T})}async _createFeatureSnappingSourceFeatureLayer(ba){switch(ba.layer.source?.type){case "feature-layer":case "oriented-imagery":return new ((await this._getSourceModule("featureService")).FeatureServiceSnappingSource)({spatialReference:this.spatialReference,
view:this.view,layerSource:ba});case "memory":case "csv":case "geojson":case "wfs":if("mesh"!==ba.layer.geometryType)return new ((await this._getSourceModule("featureCollection")).FeatureCollectionSnappingSource)({layerSource:ba,view:this.view})}return null}async _createFeatureSnappingSourceGraphicsLayer(ba){return new ((await this._getSourceModule("graphics")).GraphicsSnappingSource)({getGraphicsLayers:()=>[ba.layer],spatialReference:this.spatialReference,view:this.view,layerSource:ba})}async _createFeatureSnappingSourceMapNotesLayer(ba){return new ((await this._getSourceModule("notes")).GraphicsSnappingSource)({getGraphicsLayers:()=>
ba.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:ba})}async _getSourceModule(ba){var T=this._sourceModules[ba];if(null==T.loader){T=this._loadSourceModule(ba);this._sourceModules[ba]={module:null,loader:T};const Y=await T;this._sourceModules[ba]={module:Y,loader:T};return Y}return null==T.module?T.loader:T.module}_loadSourceModule(ba){const T=this._updatingHandles;switch(ba){case "featureService":return T.addPromise(new Promise((Y,fa)=>q(["./featureSources/FeatureServiceSnappingSource"],
Y,fa)));case "featureCollection":return T.addPromise(new Promise((Y,fa)=>q(["./featureSources/FeatureCollectionSnappingSource"],Y,fa)));case "graphics":return T.addPromise(new Promise((Y,fa)=>q(["./featureSources/GraphicsSnappingSource"],Y,fa)));case "notes":return T.addPromise(new Promise((Y,fa)=>q(["./featureSources/GraphicsSnappingSource"],Y,fa)));case "scene":return T.addPromise(new Promise((Y,fa)=>q(["./featureSources/SceneLayerSnappingSource"],Y,fa)))}}get test(){return{snappingSources:this._snappingSources}}};
v.__decorate([W.property({constructOnly:!0})],u.FeatureSnappingEngine.prototype,"spatialReference",void 0);v.__decorate([W.property({constructOnly:!0})],u.FeatureSnappingEngine.prototype,"view",void 0);v.__decorate([W.property()],u.FeatureSnappingEngine.prototype,"options",void 0);v.__decorate([W.property({readOnly:!0})],u.FeatureSnappingEngine.prototype,"updating",null);v.__decorate([W.property()],u.FeatureSnappingEngine.prototype,"_snappingSources",void 0);u.FeatureSnappingEngine=v.__decorate([E.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],
u.FeatureSnappingEngine);const J=y.create(),ea=y.create();Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/sketch/constraints":function(){define("exports ../../../core/arrayUtils ../../../core/mathUtils ../../../core/libs/gl-matrix-2/math/vec2 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../chunks/vec42 ../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../geometry/support/geodesicConstants ../../../geometry/support/geodesicUtils ../../../geometry/support/plane ../../../chunks/sphere ../../3d/support/mathUtils ./normalizedPoint ../../support/geometry3dUtils ../../support/geometry2dUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O){function U(l,c){if(l instanceof ya){var a=[];for(const b of l.constraints)(l=b.intersect(c))&&a.push(l);return V(a)}if(c instanceof ya)return U(c,l);if(l instanceof Ha)return M(l,c);if(c instanceof Ha)return M(c,l);if(ia(l))return{point:a}=l,c=c.closestTo(a),Q.equals(c,a)?l:void 0;if(oa(l)){if(ia(c))return U(c,l);if(oa(c))return X(y.intersectLineLikes(l.lineLike,c.lineLike));if(ma(c))return Sa(l,c);if(D(c))return X(y.intersectVerticalPlaneAndLineLike(c.planeLike,
l.lineLike));if(J(c))return X(y.intersectLineLikeAndVerticalCylinder(l.lineLike,c.center,c.radius));if(ba(c))return X(y.intersectLineLikeAndCircle(l.lineLike,c));if(ea(c))return P(l,c);if(T(c))return S(l,c)}else if(ma(l)){if(ia(c)||oa(c))return U(c,l);if(ma(c))return y.isClose(l.z,c.z)?l:void 0;if(D(c))return Z(l,c);if(J(c)){const [b,d]=c.center;return new Ca(H.fromValues(b,d,l.z),c.radius)}if(ba(c))return Pa(l,c);if(ea(c))return y.isClose(c.center[2],l.z)?c:void 0;if(T(c))return aa(l,c)}else if(D(l)){if(ia(c)||
oa(c)||ma(c))return U(c,l);if(D(c))return G(y.intersectVerticalPlanes(l.planeLike,c.planeLike));if(J(c))return G(y.intersectVerticalPlaneAndVerticalCylinder(l.planeLike,c.center,c.radius));if(ba(c))return g(l,c);if(ea(c))return kb(l,c);if(T(c))return N(l,c)}else if(J(l)){if(ia(c)||oa(c)||ma(c)||D(c))return U(c,l);if(J(c))return G(y.intersectVerticalCylinders(H.asVec2(l.center),l.radius,H.asVec2(c.center),c.radius));if(!ba(c)){if(ea(c))return a=A.squaredDistance(H.asVec2(l.center),H.asVec2(c.center)),
y.isClose(a,0)&&y.isClose(l.radius,c.radius)||(l=y.intersectVerticalCylinders(H.asVec2(l.center),l.radius,H.asVec2(c.center),c.radius),c=C(l,c.center[2])),c;T(c)}}else if(ba(l)){if(ia(c)||oa(c)||ma(c)||D(c)||J(c))return U(c,l);ba(c)||(ea(c)?c.asCircle():T(c))}else if(ea(l)){if(ia(c)||oa(c)||ma(c)||D(c)||J(c)||ba(c))return U(c,l);if(ea(c))return y.vectorsHaveCloseZ(c.center,l.center)?(a=A.squaredDistance(H.asVec2(c.center),H.asVec2(l.center)),y.isClose(a,0)&&y.isClose(c.radius,l.radius)||(l=y.intersectVerticalCylinders(H.asVec2(c.center),
c.radius,H.asVec2(l.center),l.radius),c=C(l,c.center[2]))):c=void 0,c;T(c)}else if(T(l)){if(ia(c)||oa(c)||ma(c)||D(c)||J(c)||ea(c))return U(c,l);T(c)}}function P({lineLike:l},{center:c,radius:a}){const b=c[2];l=y.intersectLineLikeAndVerticalCylinder(l,c,a).filter(d=>y.isClose(d[2],b));return X(l)}function S({lineLike:l},{sphere:c}){return X(E.intersectLine(c,l.start,l.end))}function Z({z:l},{planeLike:c}){const [a,b]=c.start,[d,e]=c.end,f=H.fromValues(a,b,l);l=H.fromValues(d,e,l);return c.type===
y.VerticalPlaneType.PLANE?new va(f,l):new xa(f,l)}function aa(l,{center:c,radius:a}){const b=Math.abs(c[2]-l.z);if(!(b>a)||y.isClose(b,a))if(l=H.fromValues(c[0],c[1],l.z),a=Math.sqrt(a**2-b**2),!y.isClose(a,0))return new Ca(l,a)}function M(l,c){const {planeLike:a,getZ:b}=l,d=[];if(ia(c))l.addIfOnTheGround(d,y.intersectVerticalPlaneAndPoint(a,c.point));else if(oa(c))l.addIfOnTheGround(d,y.intersectVerticalPlaneAndLineLike(a,c.lineLike));else if(J(c))for(const [e,f]of y.intersectVerticalPlaneAndVerticalCylinder(a,
c.center,c.radius))l=b(e,f),null!=l&&d.push(w.fromValues(e,f,l));else if(D(c)||c instanceof Ha)for(const [e,f]of y.intersectVerticalPlanes(a,c.planeLike))l=b(e,f)??0,d.push(w.fromValues(e,f,l));return X(d)}function G(l){return V(l.map(([c,a])=>{const b=H.fromValues(c,a,0);c=H.fromValues(c,a,1);return new va(b,c)}))}function X(l){return V(l.map(c=>c?new fa(H.fromVec3(c)):void 0))}function C(l,c){return X(l.map(([a,b])=>[a,b,c]))}function V(l){if(0!==l.length)return 1===l.length?l[0]??void 0:new ya(l.filter(u.isSome))}
function ia(l){return l instanceof fa}function oa(l){return l instanceof pa}function ma(l){return l instanceof na}function D(l){return l instanceof ra}function J(l){return l instanceof Da}function ea(l){return l instanceof Ca}function ba(l){return l instanceof Ka}function T(l){return l instanceof za}class Y{intersect(l){return U(this,l)}closestPoints(l){return[this.closestTo(l)]}}class fa extends Y{constructor(l){super();this.point=l}equals(l){return this===l||ia(l)&&Q.exactEquals(this.point,l.point)}closestTo(){return H.clone(this.point)}}
class pa extends Y{constructor(l,c,a){super();this.start=l;this.end=c;this.lineLike={start:l,end:c,type:a}}equals(l){return this===l||oa(l)&&this.lineLike.type===l.lineLike.type&&Q.exactEquals(this.start,l.start)&&Q.exactEquals(this.end,l.end)}closestTo(l){l=y.projectPointToLineLike(l,this.lineLike);return H.fromVec3(l)}}class va extends pa{constructor(l,c){super(l,c,O.LineType.LINE)}}class xa extends pa{constructor(l,c){super(l,c,O.LineType.RAY)}}class ya extends Y{constructor(l){super();this.constraints=
l}equals(l){return this===l||l instanceof ya&&u.equals(this.constraints,l.constraints,(c,a)=>c.equals(a))}closestTo(l){let c=Infinity,a;for(const b of this.constraints){const d=b.closestTo(l),e=Q.squaredDistance(l,d);e<c&&(c=e,a=d)}return a?H.clone(a):l}closestPoints(l){return this.constraints.flatMap(c=>c===this?[]:c.closestPoints(l))}}class Da extends Y{constructor(l,c){super();this.center=l;this.radius=c}equals(l){return this===l||J(l)&&this.center[0]===l.center[0]&&this.center[1]===l.center[1]&&
this.radius===l.radius}closestTo(l){l=y.projectPointToVerticalCylinder(l,this.center,this.radius);return H.fromVec3(l)}}class Ca extends Y{constructor(l,c){super();this.center=l;this.radius=c}equals(l){return this===l||ea(l)&&Q.exactEquals(this.center,l.center)&&this.radius===l.radius}closestTo(l){l=y.projectPointToVerticalCylinder(l,this.center,this.radius);l[2]=this.center[2];return H.fromVec3(l)}asCircle(){return new Ka(H.clone(this.center),this.radius,H.fromValues(0,0,1))}}class Ka extends Y{constructor(l,
c,a,b){super();this.center=l;this.radius=c;this.normal=a;this.slicePlane=b}equals(l){return this===l||ba(l)&&Q.exactEquals(this.center,l.center)&&Q.exactEquals(this.normal,l.normal)&&this.radius===l.radius}closestTo(l){const {center:c,radius:a}=this;F.projectPoint(this.getPlane(Ba),l,Oa);var b=Q.sub(Oa,Oa,c),d=Q.squaredLength(b);if(y.isClose(d,0))return H.clone(l);d=a/Math.sqrt(d);b=Q.scaleAndAdd(w.create(),c,b,d);({slicePlane:d}=this);return d&&!y.isPointInsidePlane(d,b)?Va(d,this)?.closestTo(l)??
H.clone(l):H.fromVec3(b)}getPlane(l=F.create()){return F.fromPositionAndNormal(this.center,this.normal,l)}}const Oa=w.create(),Ba=F.create();class na extends Y{constructor(l){super();this.z=l}equals(l){return this===l||ma(l)&&this.z===l.z}closestTo(l){return H.fromVec3(w.fromValues(l[0],l[1],this.z))}getPlane(l=F.create()){Q.set(sa,0,0,this.z);return F.fromPositionAndNormal(sa,w.UNIT_Z,l)}}const sa=w.create();class ra extends Y{constructor(l,c,a){super();this.start=l;this.end=c;this.planeLike={start:H.asVec2(l),
end:H.asVec2(c),type:a}}equals(l){return this===l||D(l)&&this.planeLike.type===l.planeLike.type&&Q.exactEquals(this.start,l.start)&&Q.exactEquals(this.end,l.end)}closestTo(l){return H.fromVec3(y.projectPointToVerticalPlane(l,this.planeLike))}closestEndTo(l){const {start:c,end:a}=this.planeLike;return 0<Math.sign(A.dot(A.subtract(Aa,a,c),A.subtract(Fa,H.asVec2(l),c)))?this.end:this.start}getPlane(l=F.create()){const c=Q.copy(Ia,this.end);c[2]+=1;return F.fromPoints(this.start,this.end,c,l)}getSlicePlane(l=
F.create()){const {start:c,end:a,type:b}=this.planeLike;if(b!==y.VerticalPlaneType.PLANE){var d=Q.set(Ia,c[0],c[1],0),e=Q.set(la,a[0],a[1],0);e=Q.subtract(la,e,d);F.fromPositionAndNormal(d,e,l);return l}}}const Aa=z.create(),Fa=z.create(),Ia=w.create(),la=w.create();class qa extends ra{constructor(l,c){super(l,c,y.VerticalPlaneType.HALF_PLANE)}}class ja extends ra{constructor(l,c){super(l,c,y.VerticalPlaneType.PLANE)}}class za extends Y{constructor(l,c){super();this.sphere=E.fromCenterAndRadius(l,
c)}equals(l){return this===l||T(l)&&E.exactEquals(this.sphere,l.sphere)}closestTo(l){l=E.projectPoint(this.sphere,l,w.create());return H.fromVec3(l)}get center(){return E.getCenter(this.sphere)}get radius(){return this.sphere[3]}}class Ha extends Y{constructor(l,c,a){super();this.start=l;this.end=c;this.getZ=a;this.planeLike={start:H.asVec2(l),end:H.asVec2(c),type:y.VerticalPlaneType.PLANE}}equals(l){return this===l||l instanceof Ha&&Q.exactEquals(this.start,l.start)&&Q.exactEquals(this.end,l.end)&&
this.getZ===l.getZ}closestTo(l){l=y.projectPointToVerticalPlane(l,this.planeLike);l[2]=this.getZ(l[0],l[1])??0;return H.fromVec3(l)}addIfOnTheGround(l,c){for(const a of c)c=this.getZ(a[0],a[1])??0,y.isClose(a[2],c)&&(a[2]=c,l.push(a))}}class Ua extends Y{constructor(l,c,a,b,d){super();this._origin=l;this._spatialReference=c;this._distanceMeters=a;this._elevationMeters=b;this._directionDegrees=d}equals(l){return this===l||l instanceof Ua&&A.exactEquals(this._origin,l._origin)&&this._distanceMeters===
l._distanceMeters&&this._elevationMeters===l._elevationMeters&&this._directionDegrees===l._directionDegrees}closestTo([l,c,a]){A.set(Qa,l,c);if(null!=this._directionDegrees&&null!=this._distanceMeters)R.directGeodeticSolver(Qa,this._origin,this._directionDegrees,this._distanceMeters,this._spatialReference);else if(null!=this._directionDegrees){l=Qa;c=this._origin;var b=this._directionDegrees,d=this._spatialReference;let {azimuth:e,distance:f}=R.inverseGeodeticSolver(Ma,c,Qa,d);e??=0;let h=f*Math.cos((e-
b)*B.toRadians);h=Math.max(0,h);R.directGeodeticSolver(l,c,b,h,d)}else null!=this._distanceMeters&&({azimuth:l}=R.inverseGeodeticSolver(Ja,this._origin,Qa,this._spatialReference),R.directGeodeticSolver(Qa,this._origin,l??0,this._distanceMeters,this._spatialReference));return H.create(Qa[0],Qa[1],this._elevationMeters??a)}}const Qa=[0,0],Ja=new R.InverseGeodeticSolverResult,Ma=new R.InverseGeodeticSolverResult,Sa=(()=>{const l=F.create();return(c,a)=>{const {start:b,end:d}=c;if(y.vectorsHaveCloseZ(b,
d)&&y.isClose(b[2],a.z))return c;c=w.create();if(F.intersectLine(a.getPlane(l),b,d,c))return new fa(H.fromVec3(c))}})(),Va=(()=>{const l=W.create(),c=w.create(),a=w.create();return(b,d,e)=>{const {normal:f,center:h,radius:k}=d;I.tangentFrame(f,c,a);const m=F.getNormal(b);var n=k*Q.dot(m,c),p=k*Q.dot(m,a);L.set(l,h[0],h[1],h[2],1);const r=L.dot(b,l),t=Math.hypot(n,p),x=y.isClose(t,0);if(y.isClose(F.distance(b,h),0)){if(x)return d;if(y.isClose(k,0))return!e||y.isPointInsidePlane(e,h)?new fa(H.clone(h)):
void 0;Q.cross(c,m,f);Q.normalize(c,c);n=[];p=w.clone(h);Q.scaleAndAdd(p,p,c,k);e&&!y.isPointInsidePlane(e,p)||n.push(p);p=w.clone(h);Q.scaleAndAdd(p,p,c,-k);e&&!y.isPointInsidePlane(e,p)||n.push(p);return X(n)}if(!(x||(b=-r/t,1<Math.abs(b)||y.isClose(b,1))))return n=Math.atan(n/p),b=v.asinClamped(b)-n,n=Math.PI-b,p=[],d=w.create(),Q.scaleAndAdd(d,h,c,k*Math.cos(b)),Q.scaleAndAdd(d,d,a,k*Math.sin(b)),p.push(d),b=w.create(),Q.scaleAndAdd(b,h,c,k*Math.cos(n)),Q.scaleAndAdd(b,b,a,k*Math.sin(n)),p.push(b),
X(e?y.pointsInsidePlane(e,p):p)}})(),Pa=(()=>{const l=F.create();return(c,a)=>Va(c.getPlane(l),a,a.slicePlane)})(),kb=(()=>{const l=F.create();return(c,{center:a,radius:b})=>{b=y.intersectVerticalPlaneAndVerticalCylinder(c.planeLike,a,b);a=a[2];c.getSlicePlane(l);c=[];for(const [d,e]of b)b=[d,e,a],y.isPointInsidePlane(l,b)&&c.push(b);return X(c)}})(),g=(()=>{const l=F.create(),c=F.create();return(a,b)=>Va(a.getPlane(l),b,a.getSlicePlane(c))})(),N=(()=>{const l=F.create();return(c,{center:a,radius:b})=>
{const d=c.getPlane(l),e=F.signedDistance(d,a);var f=Math.abs(e);if(!(f>b)||y.isClose(f,b)){f=w.clone(F.getNormal(d));var h=Q.scaleAndAdd(w.create(),a,f,e);b=Math.sqrt(b**2-e**2);return y.isClose(b,0)?new fa(H.fromVec3(F.projectPoint(d,a,w.create()))):new Ka(H.fromVec3(h),b,f,c.getSlicePlane())}}})();q.CircleConstraint=Ka;q.Constraint=Y;q.DrapedLineConstraint=Ha;q.GeodesicConstraint=Ua;q.HorizontalCircleConstraint=Ca;q.HorizontalPlaneConstraint=na;q.LineConstraint=va;q.LineLikeConstraint=pa;q.PointConstraint=
fa;q.RayConstraint=xa;q.SetConstraint=ya;q.SphereConstraint=za;q.VerticalCylinderConstraint=Da;q.VerticalHalfPlaneConstraint=qa;q.VerticalPlaneConstraint=ja;q.VerticalPlaneLikeConstraint=ra;q.constraintOrSet=V;q.isPoint=ia;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../../chunks/vec42 ../../core/libs/gl-matrix-2/math/common ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){function R(ma=C){return[ma[0],ma[1],ma[2],ma[3]]}function F(ma,D){return E(D[0],D[1],D[2],D[3],ma)}function E(ma,D,J,ea,ba=R()){ba[0]=ma;ba[1]=D;ba[2]=J;ba[3]=ea;return ba}function I(ma,D,J){var ea=D[0]*D[0]+D[1]*D[1]+D[2]*D[2];ea=1E-5<Math.abs(ea-1)&&1E-12<ea?1/Math.sqrt(ea):1;J[0]=D[0]*ea;J[1]=D[1]*ea;J[2]=D[2]*ea;J[3]=-(J[0]*ma[0]+J[1]*ma[1]+J[2]*ma[2]);return J}function H(ma,D,J,ea=R()){var ba=J[0]-D[0],T=J[1]-D[1],Y=J[2]-D[2];J=ma[0]-D[0];const fa=ma[1]-D[1],pa=
ma[2]-D[2];D=T*pa-Y*fa;Y=Y*J-ba*pa;ba=ba*fa-T*J;T=D*D+Y*Y+ba*ba;T=1E-5<Math.abs(T-1)&&1E-12<T?1/Math.sqrt(T):1;ea[0]=D*T;ea[1]=Y*T;ea[2]=ba*T;ea[3]=-(ea[0]*ma[0]+ea[1]*ma[1]+ea[2]*ma[2]);return ea}function y(ma,D,J,ea=0,ba=Math.floor(1/3*J),T=Math.floor(2/3*J)){if(3>J)return!1;D(Z,ea);let Y=ba,fa=!1;for(;Y<J-1&&!fa;)D(aa,Y),Y++,fa=!v.exactEquals(Z,aa);if(!fa)return!1;Y=Math.max(Y,T);for(fa=!1;Y<J&&!fa;)D(M,Y),Y++,v.subtract(G,Z,aa),v.normalize(G,G),v.subtract(X,aa,M),v.normalize(X,X),fa=!v.exactEquals(Z,
M)&&!v.exactEquals(aa,M)&&.99619469809>Math.abs(v.dot(G,X));if(!fa)return 0===ea&&1===ba&&2===T?!1:y(ma,D,J,0,1,2);H(Z,aa,M,ma);return!0}function O(ma,D,J){ma=v.scale(W.sv3d.get(),ma,v.dot(ma,D));v.subtract(J,D,ma);return J}function U(ma,D){return v.dot(ma,D)+ma[3]}function P(ma,D,J,ea,ba){const T=v.dot(ma,J);if(0===T)return!1;ma=-(v.dot(ma,D)+ma[3])/T;ea&V.CLAMP&&(ma=u.clamp(ma,0,1));if(!(ea&V.INFINITE_MIN)&&0>ma||!(ea&V.INFINITE_MAX)&&1<ma)return!1;v.add(ba,D,v.scale(ba,J,ma));return!0}const S=
z.exactEquals;z=z.equals;const Z=A.create(),aa=A.create(),M=A.create(),G=A.create(),X=A.create(),C=[0,0,1,0];var V;(function(ma){ma[ma.NONE=0]="NONE";ma[ma.CLAMP=1]="CLAMP";ma[ma.INFINITE_MIN=4]="INFINITE_MIN";ma[ma.INFINITE_MAX=8]="INFINITE_MAX"})(V||={});const ia=V.INFINITE_MIN|V.INFINITE_MAX,oa=V.INFINITE_MAX;q.clip=function(ma,D){const J=v.dot(ma,D.ray.direction);ma=-U(ma,D.ray.origin);if(0>ma&&0<=J)return!1;if(-1E-6<J&&1E-6>J)return 0<ma;if((0>ma||0>J)&&!(0>ma&&0>J))return!0;ma/=J;0<J?ma<D.c1&&
(D.c1=ma):ma>D.c0&&(D.c0=ma);return D.c0<=D.c1};q.clipInfinite=function(ma,D){const J=v.dot(ma,D.ray.direction);ma=-U(ma,D.ray.origin);if(-1E-6<J&&1E-6>J)return 0<ma;ma/=J;0<J?ma<D.c1&&(D.c1=ma):ma>D.c0&&(D.c0=ma);return D.c0<=D.c1};q.copy=F;q.create=R;q.distance=function(ma,D){return Math.abs(U(ma,D))};q.equals=z;q.exactEquals=S;q.fromArray=function(ma,D,J=!0){const ea=D.length/3;return y(ma,(ba,T)=>v.set(ba,D[3*T],D[3*T+1],D[3*T+2]),J?ea-1:ea)};q.fromManyPoints=y;q.fromNormalAndOffset=function(ma,
D,J){v.copy(J,ma);J[3]=D;return J};q.fromPoints=H;q.fromPositionAndNormal=I;q.fromValues=E;q.fromVectorsAndPoint=function(ma,D,J,ea){v.cross(M,D,ma);return I(J,M,ea)};q.getNormal=function(ma){return ma};q.intersectLine=function(ma,D,J,ea){J=v.subtract(W.sv3d.get(),J,D);return P(ma,D,J,ia,ea)};q.intersectLineSegment=function(ma,D,J){return P(ma,D.origin,D.vector,V.NONE,J)};q.intersectLineSegmentClamp=function(ma,D,J){return P(ma,D.origin,D.vector,V.CLAMP,J)};q.intersectRay=function(ma,D,J){return null!=
D?P(ma,D.origin,D.direction,oa,J):!1};q.isPointInside=function(ma,D){return 0<=U(ma,D)};q.isPointOutside=function(ma,D){return 0>U(ma,D)};q.isSphereFullyInside=function(ma,D){return 0<=U(ma,w.getCenter(D))-D[3]};q.isSphereFullyOutside=function(ma,D){return 0>U(ma,w.getCenter(D))+D[3]};q.isVertical=function(ma){return Math.abs(ma[2])<Q.getEpsilon()};q.negate=function(ma,D){D[0]=-ma[0];D[1]=-ma[1];D[2]=-ma[2];D[3]=-ma[3];return D};q.projectPoint=function(ma,D,J){const ea=v.scale(W.sv3d.get(),ma,-ma[3]);
D=v.subtract(W.sv3d.get(),D,ea);ma=O(ma,D,W.sv3d.get());v.add(J,ma,ea);return J};q.projectPointLocal=function(ma,D,J,ea){var ba=W.sv3d.get(),T=W.sv3d.get();B.tangentFrame(ma,ba,T);D=v.subtract(W.sv3d.get(),J,D);ba=L.projectPointSignedLength(ba,D);T=L.projectPointSignedLength(T,D);ma=L.projectPointSignedLength(ma,D);return v.set(ea,ba,T,ma)};q.projectVector=O;q.setOffsetFromPoint=function(ma,D,J){D!==ma&&F(ma,D);ma[3]=-v.dot(ma,J);return ma};q.signedDistance=U;q.up=C;q.wrap=function(ma=C[0],D=C[1],
J=C[2],ea=C[3]){return E(ma,D,J,ea,W.sv4d.get())};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ../core/libs/gl-matrix-2/math/mat4 ./vec32 ../core/libs/gl-matrix-2/factories/vec3f64 ./vec42 ../core/libs/gl-matrix-2/factories/vec4f64 ../core/libs/gl-matrix-2/math/common ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I){function H(){return W.create()}function y(ra,Aa){return L.copy(Aa,ra)}function O(ra,Aa){return W.fromValues(ra[0],ra[1],ra[2],Aa)}function U(ra){return ra}function P(ra){ra[0]=ra[1]=ra[2]=ra[3]=0}function S(ra,Aa){ra[0]=ra[1]=ra[2]=0;ra[3]=Aa;return ra}function Z(ra){return ra[3]}function aa(ra){return ra}function M(ra,Aa,Fa,Ia){return W.fromValues(ra,Aa,Fa,Ia)}function G(ra,Aa,Fa){ra!==Fa&&(Fa[0]=ra[0],Fa[1]=ra[1],Fa[2]=ra[2]);Fa[3]=ra[3]+Aa;return Fa}function X(ra,
Aa,Fa){v.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");ra!==Fa&&y(ra,Fa);return Fa}function C(ra,Aa,Fa){if(null==Aa||!ia(ra,Aa,Ca))return!1;let {t0:Ia,t1:la}=Ca;if(0>Ia||la<Ia&&0<la)Ia=la;if(0>Ia)return!1;if(Fa){const {origin:qa,direction:ja}=Aa;Fa[0]=qa[0]+ja[0]*Ia;Fa[1]=qa[1]+ja[1]*Ia;Fa[2]=qa[2]+ja[2]*Ia}return!0}function V(ra,Aa,Fa){Aa=F.fromPoints(Aa,Fa);if(!ia(ra,Aa,Ca))return[];const {origin:Ia,direction:la}=Aa,{t0:qa,t1:ja}=Ca;Aa=za=>{const Ha=w.create();
Q.scaleAndAdd(Ha,Ia,la,za);return ea(ra,Ha,Ha)};return Math.abs(qa-ja)<B.getEpsilon()?[Aa(qa)]:[Aa(qa),Aa(ja)]}function ia(ra,Aa,Fa){const {origin:Ia,direction:la}=Aa,qa=Ka;qa[0]=Ia[0]-ra[0];qa[1]=Ia[1]-ra[1];qa[2]=Ia[2]-ra[2];Aa=la[0]*la[0]+la[1]*la[1]+la[2]*la[2];if(0===Aa)return!1;const ja=2*(la[0]*qa[0]+la[1]*qa[1]+la[2]*qa[2]);ra=ja*ja-4*Aa*(qa[0]*qa[0]+qa[1]*qa[1]+qa[2]*qa[2]-ra[3]*ra[3]);if(0>ra)return!1;ra=Math.sqrt(ra);Fa.t0=(-ja-ra)/(2*Aa);Fa.t1=(-ja+ra)/(2*Aa);return!0}function oa(ra,Aa){return C(ra,
Aa,null)}function ma(ra,Aa,Fa){if(C(ra,Aa,Fa))return Fa;ra=D(ra,Aa,I.sv3d.get());Q.add(Fa,Aa.origin,Q.scale(I.sv3d.get(),Aa.direction,Q.distance(Aa.origin,ra)/Q.length(Aa.direction)));return Fa}function D(ra,Aa,Fa){const Ia=I.sv3d.get(),la=I.sm4d.get();Q.cross(Ia,Aa.origin,Aa.direction);const qa=ra[3];Q.cross(Fa,Ia,Aa.origin);Q.scale(Fa,Fa,1/Q.length(Fa)*qa);ra=T(ra,Aa.origin);Aa=E.angle(Aa.origin,Fa);z.fromRotation(la,Aa+ra,Ia);Q.transformMat4(Fa,Fa,la);return Fa}function J(ra,Aa,Fa){if(C(ra,Aa,
Fa))return Fa;F.closestPoint(Aa,ra,Fa);return ea(ra,Fa,Fa)}function ea(ra,Aa,Fa){Aa=Q.subtract(I.sv3d.get(),Aa,ra);Aa=Q.scale(I.sv3d.get(),Aa,ra[3]/Q.length(Aa));return Q.add(Fa,Aa,ra)}function ba(ra,Aa){Aa=Q.subtract(I.sv3d.get(),Aa,ra);Aa=Q.squaredLength(Aa);return Math.sqrt(Math.abs(Aa-ra[3]*ra[3]))}function T(ra,Aa){Aa=Q.subtract(I.sv3d.get(),Aa,ra);Aa=Q.length(Aa);ra=ra[3];return A.acosClamped(ra/(ra+Math.abs(ra-Aa)))}function Y(ra,Aa,Fa,Ia){ra=Q.subtract(Oa,Aa,ra);switch(Fa){case R.Axis.X:return Fa=
A.cartesianToSpherical(ra,Oa)[2],Q.set(Ia,-Math.sin(Fa),Math.cos(Fa),0);case R.Axis.Y:return ra=A.cartesianToSpherical(ra,Oa),Fa=ra[1],ra=ra[2],Aa=Math.sin(Fa),Q.set(Ia,-Aa*Math.cos(ra),-Aa*Math.sin(ra),Math.cos(Fa));case R.Axis.Z:return Q.normalize(Ia,ra)}}function fa(ra,Aa){Aa=Q.subtract(Ba,Aa,ra);return Q.length(Aa)-ra[3]}function pa(ra,Aa,Fa,Ia){const la=fa(ra,Aa);ra=Y(ra,Aa,R.Axis.Z,Ba);Fa=Q.scale(Ba,ra,Fa-la);return Q.add(Ia,Aa,Fa)}function va(ra,Aa){Aa=Q.squaredDistance(ra,Aa);ra=ra[3];return Aa<=
ra*ra}function xa(ra,Aa,Fa=W.create()){const Ia=Q.distance(ra,Aa),la=ra[3],qa=Aa[3];if(Ia+qa<la)return L.copy(Fa,ra),Fa;if(Ia+la<qa)return L.copy(Fa,Aa),Fa;Q.lerp(Fa,ra,Aa,(Ia+qa-la)/(2*Ia));Fa[3]=(Ia+la+qa)/2;return Fa}u=H();const ya=L.equals,Da=L.equals,Ca={t0:0,t1:0},Ka=w.create(),Oa=w.create(),Ba=w.create(),na=H(),sa=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:u,altitudeAt:fa,angleToSilhouette:T,axisAt:Y,clear:P,closestPoint:J,closestPointOnSilhouette:D,containsPoint:va,copy:y,
create:H,distanceToSilhouette:ba,elevate:G,equals:Da,exactEquals:ya,fromCenterAndRadius:O,fromRadius:S,fromValues:M,getCenter:aa,getRadius:Z,intersectLine:V,intersectRay:C,intersectRayClosestSilhouette:ma,intersectsRay:oa,projectPoint:ea,setAltitudeAt:pa,setExtent:X,tmpSphere:na,union:xa,wrap:U},Symbol.toStringTag,{value:"Module"}));q.NullSphere=u;q.altitudeAt=fa;q.angleToSilhouette=T;q.axisAt=Y;q.clear=P;q.closestPoint=J;q.closestPointOnSilhouette=D;q.containsPoint=va;q.copy=y;q.create=H;q.distanceToSilhouette=
ba;q.elevate=G;q.equals=Da;q.exactEquals=ya;q.fromCenterAndRadius=O;q.fromRadius=S;q.fromValues=M;q.getCenter=aa;q.getRadius=Z;q.intersectLine=V;q.intersectRay=C;q.intersectRayClosestSilhouette=ma;q.intersectsRay=oa;q.projectPoint=ea;q.setAltitudeAt=pa;q.setExtent=X;q.sphere=sa;q.tmpSphere=na;q.union=xa;q.wrap=U})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ./vectorStacks".split(" "),
function(q,u,v,A,z,Q){function w(F){return F?L(z.clone(F.origin),z.clone(F.direction)):L(z.create(),z.create())}function L(F,E){return{origin:F,direction:E}}function W(F,E,I=w()){A.copy(I.origin,F);A.copy(I.direction,E);return I}function B(F,E){F=A.cross(Q.sv3d.get(),A.normalize(Q.sv3d.get(),F.direction),A.subtract(Q.sv3d.get(),E,F.origin));return A.dot(F,F)}const R=new v.ObjectStack(()=>w());q.closestPoint=function(F,E,I){E=A.dot(F.direction,A.subtract(I,E,F.origin));A.add(I,F.origin,A.scale(I,F.direction,
E));return I};q.copy=function(F,E=w()){return W(F.origin,F.direction,E)};q.create=w;q.distance=function(F,E){return Math.sqrt(B(F,E))};q.distance2=B;q.equals=function(F,E){return u.equals(F.origin,E.origin)&&u.equals(F.direction,E.direction)};q.fromPoints=function(F,E,I=w()){A.copy(I.origin,F);A.subtract(I.direction,E,F);return I};q.fromValues=W;q.wrap=function(F,E){const I=R.get();I.origin=F;I.direction=E;return I};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/ObjectStack":function(){define(["exports",
"./nextTick"],function(q,u){class v{constructor(A){this._allocator=A;this._items=[];this._itemsPtr=0;this._grow()}get(){0===this._itemsPtr&&u.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]}_reset(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0}_grow(){for(let A=0;A<Math.max(8,Math.min(this._items.length,1024));A++)this._items.push(this._allocator())}}q.ObjectStack=
v;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports","../../core/VectorStack"],function(q,u){const v=u.VectorStack.createVec2f64(),A=u.VectorStack.createVec3f64(),z=u.VectorStack.createVec4f64(),Q=u.VectorStack.createMat3f64(),w=u.VectorStack.createMat4f64();u=u.VectorStack.createQuatf64();q.sm3d=Q;q.sm4d=w;q.sq4d=u;q.sv2d=v;q.sv3d=A;q.sv4d=z;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ./nextTick ./libs/gl-matrix-2/factories/mat3f64 ./libs/gl-matrix-2/factories/mat4f64 ./libs/gl-matrix-2/factories/quatf64 ./libs/gl-matrix-2/factories/vec2f64 ./libs/gl-matrix-2/factories/vec3f64 ./libs/gl-matrix-2/factories/vec4f64".split(" "),
function(q,u,v,A,z,Q,w,L){class W{constructor(B){this._create=B;this._items=[];this._itemsPtr=0}get(){0===this._itemsPtr&&u.nextTick(()=>this._reset());this._itemsPtr>=this._items.length&&this._items.push(this._create());return this._items[this._itemsPtr++]}_reset(){const B=2*this._itemsPtr;this._items.length>B&&(this._items.length=B);this._itemsPtr=0}static createVec2f64(){return new W(Q.create)}static createVec3f64(){return new W(w.create)}static createVec4f64(){return new W(L.create)}static createMat3f64(){return new W(v.create)}static createMat4f64(){return new W(A.create)}static createQuatf64(){return new W(z.create)}get test(){return{length:this._items.length}}}
q.VectorStack=W;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["exports"],function(q){function u(){return[1,0,0,0,1,0,0,0,1]}function v(L){return[L[0],L[1],L[2],L[3],L[4],L[5],L[6],L[7],L[8]]}function A(L,W,B,R,F,E,I,H,y){return[L,W,B,R,F,E,I,H,y]}function z(L,W){return new Float64Array(L,W,9)}const Q=u(),w=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Q,clone:v,create:u,createView:z,fromValues:A},Symbol.toStringTag,
{value:"Module"}));q.IDENTITY=Q;q.clone=v;q.create=u;q.createView=z;q.fromValues=A;q.mat3f64=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/quatf64":function(){define(["exports"],function(q){function u(){return[0,0,0,1]}function v(L){return[L[0],L[1],L[2],L[3]]}function A(L,W,B,R){return[L,W,B,R]}function z(L,W){return new Float64Array(L,W,4)}const Q=u(),w=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Q,clone:v,create:u,createView:z,
fromValues:A},Symbol.toStringTag,{value:"Module"}));q.IDENTITY=Q;q.clone=v;q.create=u;q.createView=z;q.fromValues=A;q.quatf64=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64"],function(q,u,v,A){const z=A.create(),Q=A.create();q.angle=function(w,L){w=v.dot(w,L)/(v.length(w)*v.length(L));return-u.acosClamped(w)};q.angleAroundAxis=function(w,
L,W){v.normalize(z,w);v.normalize(Q,L);w=v.dot(z,Q);w=u.acosClamped(w);L=v.cross(z,z,Q);return 0>v.dot(L,W)?2*Math.PI-w:w};q.projectPoint=function(w,L,W){L=v.dot(w,L)/v.dot(w,w);return v.scale(W,w,L)};q.projectPointSignedLength=function(w,L){return v.dot(w,L)/v.length(w)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec32","../../../core/libs/gl-matrix-2/factories/vec3f64"],
function(q,u,v,A){const z=A.create(),Q=A.create(),w=A.create(),L=A.create(),W=A.create();q.angle=function(B,R,F){B=v.normalize(L,B);R=v.normalize(W,R);const E=u.acosClamped(v.dot(B,R));return F&&(B=v.cross(w,B,R),0>v.dot(B,F))?-E:E};q.bilerp=function(B,R,F,E,I,H){B+=(R-B)*I;return B+(F+(E-F)*I-B)*H};q.cosCapped=function(B,R){return B>R?Math.cos(R):Math.cos(B)};q.fovx2fovy=function(B,R,F){return 2*Math.atan(F*Math.tan(.5*B)/R)};q.fovy2fovx=function(B,R,F){return 2*Math.atan(R*Math.tan(.5*B)/F)};q.makeOrthonormal=
function(B,R,F){F=F||B;const E=v.dot(B,R);v.set(F,B[0]-E*R[0],B[1]-E*R[1],B[2]-E*R[2]);v.normalize(F,F)};q.makePiecewiseLinearFunction=function(B){const R=B.length;return F=>{if(F<=B[0][0])return B[0][1];if(F>=B[R-1][0])return B[R-1][1];let E=1;for(;F>B[E][0];)E++;const I=B[E][0];F=(I-F)/(I-B[E-1][0]);return F*B[E-1][1]+(1-F)*B[E][1]}};q.maxScale=function(B){return Math.sqrt(Math.max(B[0]*B[0]+B[4]*B[4]+B[8]*B[8],B[1]*B[1]+B[5]*B[5]+B[9]*B[9],B[2]*B[2]+B[6]*B[6]+B[10]*B[10]))};q.midpoint3d=function(B,
R){v.set(R,0,0,0);if(0<B.length){for(let F=0;F<B.length;++F)v.add(R,R,B[F]);v.scale(R,R,1/B.length)}};q.planeFromPoints=function(B,R,F,E){v.subtract(z,R,B);v.subtract(Q,F,B);v.cross(E,z,Q);v.normalize(E,E);E[3]=-v.dot(B,E)};q.scaleFromMatrix=function(B,R){v.set(B,Math.sqrt(R[0]*R[0]+R[4]*R[4]+R[8]*R[8]),Math.sqrt(R[1]*R[1]+R[5]*R[5]+R[9]*R[9]),Math.sqrt(R[2]*R[2]+R[6]*R[6]+R[10]*R[10]));return B};q.slerp=function(B,R,F,E=A.create()){const I=v.length(B);var H=v.length(R),y=v.dot(B,R)/(I*H);if(.9999999999999999>
y){y=Math.acos(y);const O=((1-F)*I+F*H)/Math.sin(y);H=O/H*Math.sin(F*y);v.scale(L,B,O/I*Math.sin((1-F)*y));v.scale(W,R,H);return v.add(E,L,W)}return v.lerp(E,B,R,F)};q.slerpTangent=function(B,R,F,E=A.create(),I=A.create()){const H=v.length(B),y=v.length(R);var O=v.dot(B,R)/(H*y);if(.9999999999999999>O){O=Math.acos(O);const U=Math.sin(O),P=Math.sin(F*O),S=Math.sin((1-F)*O),Z=(1-F)*H+F*y,aa=Z/U,M=aa/y*P;v.scale(L,B,aa/H*S);v.scale(W,R,M);v.add(E,L,W);v.scale(L,B,1/H*(-Math.cos((1-F)*O)*O*Z+S*(-H+y)));
v.scale(W,R,1/y*(Math.cos(F*O)*O*Z+P*(-H+y)));v.add(I,L,W);v.scale(I,I,1/U);return I}v.lerp(E,B,R,F);v.subtract(I,R,B);v.normalize(I,I);return I};q.tangentFrame=function(B,R,F){Math.abs(B[0])>Math.abs(B[1])?v.set(R,0,1,0):v.set(R,1,0,0);v.cross(F,B,R);v.cross(R,F,B);v.normalize(F,F);v.normalize(R,R)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geometry3dUtils":function(){define("exports ../../core/mathUtils ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../chunks/vec32 ../../core/libs/gl-matrix-2/factories/vec3f64 ../../geometry/support/plane ../3d/support/mathUtils ./geometry2dUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W){function B(D,{start:J,end:ea,type:ba},T=Q.create()){D=z.sub(Z,D,J);ea=z.sub(aa,ea,J);D=z.dot(D,ea)/z.dot(ea,ea);return z.scaleAndAdd(T,J,ea,ba===W.LineType.RAY?Math.max(D,0):D)}function R({start:D,end:J,type:ea},ba){const T=z.sub(Z,ba,D);J=z.sub(aa,J,D);if(ea===W.LineType.RAY&&-1E-6>z.dot(J,T))return z.distance(D,ba);D=z.cross(M,J,T);return z.len(D)/z.len(J)}function F(D,J){const ea=D.start,ba=J.start;var T=J.end;const Y=z.sub(Z,D.end,ea);T=z.sub(aa,T,ba);var fa=z.sub(M,
ba,ea),pa=z.cross(G,Y,T),va=z.dot(fa,pa);if(!H(va,0))return[];va=z.sqrLen(pa);if(H(va,0))return[];fa=z.cross(X,fa,T);pa=z.dot(fa,pa)/va;pa=z.scaleAndAdd(C,ea,Y,pa);return D.type===W.LineType.RAY&&(D=z.sub(V,pa,ea),-1E-6>z.dot(Y,D))||J.type===W.LineType.RAY&&(J=z.sub(V,pa,ba),-1E-6>z.dot(T,J))?[]:[Q.clone(pa)]}function E({start:D,end:J,type:ea},ba){const T=z.sub(Z,ba,D);D=z.sub(aa,J,D);J=z.cross(M,D,T);if(1E-6>z.sqrLen(J)/z.sqrLen(D))switch(ea){case W.LineType.LINE:return[Q.clone(ba)];case W.LineType.RAY:return-1E-6>
z.dot(D,T)?[]:[Q.clone(ba)]}return[]}function I(D,J,{start:ea,end:ba,type:T}){z.set(D.start,ea[0],ea[1],J);z.set(D.end,ba[0],ba[1],J);D.type=U[T];return D}function H(D,J){return u.floatEqualAbsolute(Math.abs(D-J),0,1E-6)}function y(D,J){return w.isPointInside(D,J)}const O=(()=>{const D=Q.create(),J=Q.create(),ea=Q.create();return({start:ba,end:T},{center:Y,radius:fa,normal:pa,slicePlane:va})=>{var xa=w.fromPositionAndNormal(Y,pa,ia);if(H(w.distance(xa,ba),0)&&H(w.distance(xa,T),0)){L.tangentFrame(pa,
D,J);xa=(ya,Da)=>{z.subtract(ea,Da,Y);v.set(ya,z.dot(ea,D),z.dot(ea,J));return ya};T=W.intersectLineLikeAndCircle({start:xa(P,ba),end:xa(S,T),type:W.LineType.LINE},A.ZEROS,fa);ba=[];for(const [ya,Da]of T)T=z.copy(Q.create(),Y),z.scaleAndAdd(T,T,D,ya),z.scaleAndAdd(T,T,J,Da),va&&!y(va,T)||ba.push(T);return ba}pa=Q.create();return w.intersectLine(xa,ba,T,pa)?!H(z.distance(pa,Y),fa)||va&&!y(va,pa)?[]:[pa]:[]}})();q.VerticalPlaneType=void 0;(function(D){D[D.PLANE=0]="PLANE";D[D.HALF_PLANE=1]="HALF_PLANE"})(q.VerticalPlaneType||
(q.VerticalPlaneType={}));const U={[q.VerticalPlaneType.PLANE]:W.LineType.LINE,[q.VerticalPlaneType.HALF_PLANE]:W.LineType.RAY},P=A.create(),S=A.create(),Z=Q.create(),aa=Q.create(),M=Q.create(),G=Q.create(),X=Q.create(),C=Q.create(),V=Q.create(),ia=w.create(),oa={start:Q.create(),end:Q.create(),type:W.LineType.LINE},ma={start:Q.create(),end:Q.create(),type:W.LineType.LINE};Object.defineProperty(q,"LineType",{enumerable:!0,get:()=>W.LineType});q.epsilon=1E-6;q.intersectLineAndPoint=E;q.intersectLineLikeAndCircle=
O;q.intersectLineLikeAndVerticalCylinder=function({start:D,end:J,type:ea},ba,T){const Y=[];J=z.subtract(Z,J,D);var fa=v.subtract(S,D,ba);ba=v.squaredLength(J);const pa=2*v.dot(J,fa);T=v.squaredLength(fa)-T*T;T=pa*pa-4*ba*T;0===T?(ba=-pa/(2*ba),(ea===W.LineType.LINE||0<=ba)&&Y.push(z.scaleAndAdd(Q.create(),D,J,ba))):0<T&&(T=Math.sqrt(T),fa=(-pa+T)/(2*ba),(ea===W.LineType.LINE||0<=fa)&&Y.push(z.scaleAndAdd(Q.create(),D,J,fa)),ba=(-pa-T)/(2*ba),(ea===W.LineType.LINE||0<=ba)&&Y.push(z.scaleAndAdd(Q.create(),
D,J,ba)));return Y};q.intersectLineLikes=F;q.intersectVerticalCylinderAndPoint=function(D,J,ea){return H(v.squaredDistance(ea,D),J*J)?[Q.clone(ea)]:[]};q.intersectVerticalCylinders=function(D,J,ea,ba){const [T,Y]=D,[fa,pa]=ea;var va=fa-T,xa=pa-Y;const ya=va*va+xa*xa,Da=Math.sqrt(ya);if(Da>J+ba||Da<Math.abs(J-ba)||H(Da,0)&&H(J,ba))return[];ba=(J*J-ba*ba+ya)/(2*Da);J=Math.sqrt(J*J-ba*ba);xa=J*xa/Da;va=J*va/Da;const [Ca,Ka]=v.lerp(P,D,ea,ba/Da);return H(xa,va)?[A.fromValues(Ca,Ka)]:[A.fromValues(Ca+
xa,Ka-va),A.fromValues(Ca-xa,Ka+va)]};q.intersectVerticalPlaneAndLineLike=function(D,J){const ea=D.start,ba=v.subtract(P,D.end,ea);var T=z.set(aa,-ba[1],ba[0],0);const Y=J.start,fa=z.sub(M,J.end,Y);var pa=z.dot(fa,T),va=z.set(G,ea[0],ea[1],0);va=z.sub(X,va,Y);T=z.dot(va,T);if(1E-6>Math.abs(pa))return[];pa=z.scaleAndAdd(C,Y,fa,T/pa);return J.type===W.LineType.RAY&&(J=z.sub(V,pa,Y),-1E-6>z.dot(J,fa))||D.type===q.VerticalPlaneType.HALF_PLANE&&(D=v.sub(S,pa,ea),-1E-6>v.dot(D,ba))?[]:[Q.clone(pa)]};q.intersectVerticalPlaneAndPoint=
function(D,J){return E(I(oa,J[2],D),J)};q.intersectVerticalPlaneAndVerticalCylinder=function({start:D,end:J,type:ea},ba,T){const Y=[];J=v.subtract(P,J,D);var fa=v.subtract(S,D,ba);ba=v.squaredLength(J);const pa=2*v.dot(J,fa);T=v.squaredLength(fa)-T*T;T=pa*pa-4*ba*T;0===T?(ba=-pa/(2*ba),(ea===q.VerticalPlaneType.PLANE||0<=ba)&&Y.push(v.scaleAndAdd(A.create(),D,J,ba))):0<T&&(T=Math.sqrt(T),fa=(-pa+T)/(2*ba),(ea===q.VerticalPlaneType.PLANE||0<=fa)&&Y.push(v.scaleAndAdd(A.create(),D,J,fa)),ba=(-pa-T)/
(2*ba),(ea===q.VerticalPlaneType.PLANE||0<=ba)&&Y.push(v.scaleAndAdd(A.create(),D,J,ba)));return Y};q.intersectVerticalPlanes=function(D,J){D=I(oa,0,D);J=I(ma,0,J);return F(D,J).map(([ea,ba])=>A.fromValues(ea,ba))};q.isClose=H;q.isPointInsidePlane=y;q.pointToLineLikeDistance=R;q.pointToVerticalCylinderDistance=function(D,J,ea){return v.distance(D,J)-ea};q.pointToVerticalPlaneDistance=function(D,J){return R(I(oa,D[2],J),D)};q.pointsInsidePlane=function(D,J){return J.filter(ea=>y(D,ea))};q.projectPointToLineLike=
B;q.projectPointToVerticalCylinder=function(D,J,ea){const ba=v.subtract(P,D,J);var T=v.length(ba);ea=0===T?1:ea/T;T=Q.create();v.scaleAndAdd(T,J,ba,ea);T[2]=D[2];return T};q.projectPointToVerticalPlane=function(D,J){return B(D,I(oa,D[2],J))};q.vectorsHaveCloseZ=function(D,J){return H(D[2],J[2])};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../core/libs/gl-matrix-2/math/vec2","../../core/libs/gl-matrix-2/factories/vec2f64"],
function(q,u,v,A){function z(E,I){return E[0]*I[1]-E[1]*I[0]}function Q(E,I,H){I=v.dot(H,I)/v.squaredLength(H);return v.scale(E,H,I)}function w(E,I,H,y,O=H){v.subtract(W,y,H);v.subtract(R,I,O);Q(F,R,W);return v.add(E,O,F)}function L(E,I,H,y){v.subtract(W,I,H);I=y/v.length(W);return v.scaleAndAdd(E,H,W,I)}q.LineType=void 0;(function(E){E[E.RAY=0]="RAY";E[E.LINE=1]="LINE"})(q.LineType||(q.LineType={}));const W=A.create(),B=A.create(),R=A.create(),F=A.create();q.cross=z;q.intersectCircleAndPoint=function(E,
I,H){L(R,H,E,I);return u.floatEqualAbsolute(R[0],H[0])&&u.floatEqualAbsolute(R[1],H[1])?[A.clone(H)]:[]};q.intersectLineAndPoint=function(E,I){w(R,I,E.start,E.end);return u.floatEqualAbsolute(R[0],I[0])&&u.floatEqualAbsolute(R[1],I[1])?[A.clone(I)]:[]};q.intersectLineAndRay=function(E,I){const H=E.start;var y=I.start,O=I.end;const U=v.subtract(W,E.end,H);var P=v.subtract(B,O,y);O=z(U,P);if(1E-6>=Math.abs(O))return[];y=v.subtract(R,H,y);P=z(P,y)/O;O=z(U,y)/O;if(0<=P){if(0<=O||I.type===q.LineType.LINE)return[v.scaleAndAdd(F,
H,U,P)]}else if(E.type===q.LineType.LINE&&(0<=O||I.type===q.LineType.LINE))return[v.scaleAndAdd(F,H,U,P)];return[]};q.intersectLineLikeAndCircle=function(E,I,H){const y=[],O=v.subtract(W,E.end,E.start);var U=v.subtract(B,E.start,I);I=v.squaredLength(O);const P=2*v.dot(O,U);H=v.squaredLength(U)-H*H;H=P*P-4*I*H;0===H?(I=-P/(2*I),(E.type===q.LineType.LINE||0<=I)&&y.push(v.scaleAndAdd(F,E.start,O,I))):0<H&&(H=Math.sqrt(H),U=(-P+H)/(2*I),(E.type===q.LineType.LINE||0<=U)&&y.push(v.scaleAndAdd(F,E.start,
O,U)),I=(-P-H)/(2*I),(E.type===q.LineType.LINE||0<=I)&&y.push(v.scaleAndAdd(R,E.start,O,I)));return y};q.pointToLineDistance=function(E,I,H){return Math.abs((I[0]-E[0])*(H[1]-E[1])-(I[1]-E[1])*(H[0]-E[0]))/v.distance(I,H)};q.projectPoint=Q;q.projectPointToCircle=L;q.projectPointToLine=w;q.projectPointToRay=function(E,I,H,y){v.subtract(W,y,H);v.subtract(R,I,H);I=v.dot(W,R)/v.squaredLength(W);return 0<I?v.scaleAndAdd(E,H,W,I):v.copy(E,H)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/snapping/FeatureSnappingSourceInfo":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Logger ../../../core/reactiveUtils ../../../core/sql ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../layers/support/FeatureFilter ../../../layers/support/floorFilterUtils ../../../layers/support/layerUtils ./snappingUtils".split(" "),function(q,u,v,
A,z,Q,w,L,W,B,R,F,E,I){function H(y,O){return null==y?new R({where:O}):y.where?new R({where:Q.sqlAnd(y.where,O)}):new R({where:O})}q.FeatureSnappingSourceInfo=class extends v{get layerView(){return this.view?.allLayerViews?.find(y=>y.layer===this.layer)}get valid(){return this._valid}get subtypeFilter(){const {layer:y}=this;if(!E.isSubtypeGroupLayer(y)||!y.subtypes?.length)return{mode:"not-in-use",filter:null};const O=y.fieldsIndex.get(y.subtypeField)?.name??y.subtypeField,U=y.sublayers.filter(P=>
P.visible).map(P=>P.subtypeCode);return U.length?U.length===y.subtypes.length?{mode:"all-visible",filter:null}:1===U.length?{mode:"in-use",filter:`${O} = ${U.getItemAt(0)}`}:{mode:"in-use",filter:`${O} IN (${U.join(", ")})`}:{mode:"none-visible",filter:null}}get floorFilter(){const {view:y,layer:O}=this;return y&&O?F.getFloorFilterClause({view:y,layer:O}):null}constructor(y){super(y);this.rulesTable=null;this._valid=!1}initialize(){if(this.snappingSource&&this.layer){var {layer:y,snappingSource:O}=
this;"refresh"in y&&this.addHandles(y.on("refresh",()=>O.refresh()));this.loadRules();this.addHandles([z.watch(()=>O.updating,U=>O.layerSource.updating=U,z.syncAndInitial),z.watch(()=>O.availability,U=>O.layerSource.availability=U,z.syncAndInitial)])}}getFetchCandidatesParameters(y,O,U){if(!this.valid)return[];const {layer:P,layerView:S,floorFilter:Z,rulesTable:aa,subtypeFilter:M}=this;y={distance:U,mode:this.view?.type??"2d",point:y,coordinateHelper:O.coordinateHelper,...this._types,filter:S&&"filter"in
S?S.filter:null};Z&&(y.filter=H(y.filter,Z));if("not-in-use"!==M.mode&&"all-visible"!==M.mode){if("none-visible"===M.mode)return[];y.filter?y.filter.where=Q.sqlAnd(y.filter.where,M.mode):y.filter=new R({where:M.filter})}U=O.feature;const G=U?.sourceLayer;if(aa&&U&&I.isUtilityNetworkWebMap(this.view?.map)&&E.isFeatureLayer(P)&&P.layerId&&E.isFeatureLayer(G)&&this.view.map.utilityNetworks?.find(C=>C.isUtilityLayer(G))){if("loaded"!==aa.loadStatus)return[];O=[];var X=P.layerId;X=aa.getFeatureSQL(G,U)?.[X];
if(!X)return[];U=X.anyVertex;(X=X.endVertex)&&U&&X===U&&(X="");X&&O.push({...y,returnEdge:!1,vertexMode:"ends",filter:H(y.filter,X)});U&&O.push({...y,returnEdge:!1,vertexMode:"all",filter:H(y.filter,U)});return O}return[y]}async loadRules(){const {layer:y,view:O}=this;if(y&&O&&I.isUtilityNetworkWebMap(O?.map)&&E.isFeatureLayer(y)){const U=O.map.utilityNetworks?.find(P=>P.isUtilityLayer(y));if(U)try{this.rulesTable=await U.getRulesTable(),await this.rulesTable?.load()}catch(P){A.getLogger("esri.views.interactive.snapping.FeatureSnappingSourceInfo").error("Failed to load rules table for snapping source",
y.title);return}}this._valid=!0}get _types(){return{returnEdge:!0,vertexMode:"all"}}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};u.__decorate([w.property({constructOnly:!0})],q.FeatureSnappingSourceInfo.prototype,"layer",void 0);u.__decorate([w.property({constructOnly:!0})],q.FeatureSnappingSourceInfo.prototype,"snappingSource",void 0);u.__decorate([w.property({constructOnly:!0})],q.FeatureSnappingSourceInfo.prototype,"view",void 0);u.__decorate([w.property()],q.FeatureSnappingSourceInfo.prototype,
"layerView",null);u.__decorate([w.property()],q.FeatureSnappingSourceInfo.prototype,"rulesTable",void 0);u.__decorate([w.property()],q.FeatureSnappingSourceInfo.prototype,"valid",null);u.__decorate([w.property()],q.FeatureSnappingSourceInfo.prototype,"subtypeFilter",null);u.__decorate([w.property()],q.FeatureSnappingSourceInfo.prototype,"floorFilter",null);u.__decorate([w.property()],q.FeatureSnappingSourceInfo.prototype,"_valid",void 0);q.FeatureSnappingSourceInfo=u.__decorate([B.subclass("esri.views.interactive.snapping.FeatureSnappingSourceInfo")],
q.FeatureSnappingSourceInfo);Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/floorFilterUtils":function(){define(["exports"],function(q){function u(v,A){if(!v?.length)return null;v=v.filter(z=>""!==z).map(z=>`'${z}'`);v.push("''");return`${A} IN (${v.join(",")}) OR ${A} IS NULL`}q.getFloorFilterClause=function(v){const A=v.layer;return"floorInfo"in A&&A.floorInfo?.floorField&&"floors"in v.view?u(v.view.floors,A.floorInfo.floorField):null};q.getLayerFloorFilterClause=
function(v,A){return"floorInfo"in A&&A.floorInfo?.floorField?u(v,A.floorInfo.floorField):null};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../core/reactiveUtils ../../../core/SetUtils ../../../core/sql ../../../core/timeUtils ../../../chunks/vec32 ../../../layers/graphics/dehydratedPoint ../../../rest/support/Query ../../input/InputManager ../keybindings ../sketch/normalizedPoint".split(" "),function(q,
u,v,A,z,Q,w,L,W,B,R){function F(I,H){const y=I.x-H.x;I=I.y-H.y;return y*y+I*I}q.LineSegmentHintType=void 0;(function(I){I[I.TARGET=0]="TARGET";I[I.REFERENCE=1]="REFERENCE";I[I.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(q.LineSegmentHintType||(q.LineSegmentHintType={}));const E=Symbol("snapping-toggle");q.editEdgeToSnappingEdge=function(I,H,y){return{left:R.fromAnyMapPoint(I.leftVertex.pos,H,y),right:R.fromAnyMapPoint(I.rightVertex.pos,H,y)}};q.isUtilityNetworkWebMap=function(I){return null!=I&&
"object"===typeof I&&"declaredClass"in I&&"esri.WebMap"===I.declaredClass&&"utilityNetworks"in I&&!!I?.utilityNetworks?.length};q.makeFilter=function(I){return I.createQuery()};q.makeSnappingQuery=function({point:I,distance:H,returnEdge:y,vertexMode:O,coordinateHelper:{spatialReference:U},filter:P},S,Z){Z=null!=Z?Z.clone():new L({where:"1\x3d1"});if(P){Z.geometry=P.geometry;Z.distance=P.distance;Z.spatialRelationship=P.spatialRelationship;Z.where=A.sqlAnd(Z.where,P.where);Z.timeExtent=z.mergeTimeExtents(Z.timeExtent,
P.timeExtent);var aa=Z;var M=Z.objectIds;P=P.objectIds;M=M||P?P?M?Array.from(v.intersection(new Set(M),new Set(P))):P:M:null;aa.objectIds=M}return{point:w.makeDehydratedPoint(I[0],I[1],I[2],U.toJSON()),mode:S,distance:H,returnEdge:y,vertexMode:O,query:Z.toJSON()}};q.objectEqual=function(I,H){const y=I.length===H.length&&I[0]===H[0]&&I[1]===H[1];switch(I.length){case 2:return y;case 3:return y&&I[2]===H[2];case 4:return y&&I[2]===H[2]&&I[3]===H[3]}return!1};q.screenDistance=function(I,H){return Math.sqrt(F(I,
H))};q.setupSnappingToggleHandles=function(I,H=()=>{}){const y=u.watch(()=>({view:I.view,snappingOptions:I.snappingOptions}),({view:O,snappingOptions:U})=>{I.removeHandles(E);if(O&&U){var P=W.ViewEventPriorities.TOOL;O=[O.on("key-down",S=>{S.key!==B.snappingKeys.toggle||S.repeat||(U.enabledToggled=!0,H())},P),O.on("key-up",S=>{S.key===B.snappingKeys.toggle&&(U.enabledToggled=!1,H())},P),O.on("pointer-move",S=>{S=S.native.ctrlKey;U.enabledToggled!==S&&(U.enabledToggled=S,H())},P)];I.addHandles(O,E)}},
u.syncAndInitial);I.addHandles(y)};q.sortCandidatesInPlace=function(I,H){H.sort((y,O)=>{y=Q.squaredDistance(y.targetPoint,I);O=Q.squaredDistance(O.targetPoint,I);return y-O})};q.squaredScreenDistance=F;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/DrapedEdgeSnappingCandidate":function(){define(["exports","../../sketch/constraints","../snappingUtils","./FeatureSnappingCandidate","../hints/LineSnappingHint"],function(q,u,v,A,z){class Q extends A.FeatureSnappingCandidate{constructor(w){super({...w,
isDraped:!0,constraint:new u.DrapedLineConstraint(w.edgeStart,w.edgeEnd,w.getGroundElevation)})}get hints(){return[new z.LineSnappingHint(v.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}q.DrapedEdgeSnappingCandidate=Q;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../SnappingDomain","./SnappingCandidate"],function(q,u,v){class A extends v.SnappingCandidate{constructor({targetPoint:z,
objectId:Q,constraint:w,isDraped:L}){super(z,w,L,u.SnappingDomain.FEATURE);this.objectId=Q}}q.FeatureSnappingCandidate=A;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],function(q){class u{constructor(v,A,z,Q){this.targetPoint=v;this.constraint=A;this.isDraped=z;this.domain=Q}}q.SnappingCandidate=u;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../core/has ../../../../core/Logger ../../../../chunks/vec32 ../SnappingDomain ./SnappingHint".split(" "),
function(q,u,v,A,z,Q){class w extends Q.SnappingHint{constructor(L,W,B,R,F=z.SnappingDomain.ALL,E=!0,I=!0){super(R,F);this.type=L;this.lineStart=W;this.lineEnd=B;this.fadeLeft=E;this.fadeRight=I}equals(L){return L instanceof w?this.type===L.type&&A.exactEquals(this.lineStart,L.lineStart)&&A.exactEquals(this.lineEnd,L.lineEnd)&&this.fadeLeft===L.fadeLeft&&this.fadeRight===L.fadeRight:!1}get length(){return A.distance(this.lineStart,this.lineEnd)}}q.LineSnappingHint=w;Object.defineProperty(q,Symbol.toStringTag,
{value:"Module"})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(q){class u{constructor(v,A){this.isDraped=v;this.domain=A}}q.SnappingHint=u;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/EdgeSnappingCandidate":function(){define(["exports","../../sketch/constraints","../snappingUtils","./FeatureSnappingCandidate","../hints/LineSnappingHint"],function(q,u,v,A,z){class Q extends A.FeatureSnappingCandidate{constructor(w){super({...w,
constraint:new u.LineConstraint(w.edgeStart,w.edgeEnd)})}get hints(){return[new z.LineSnappingHint(v.LineSegmentHintType.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}}q.EdgeSnappingCandidate=Q;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define("exports ../SnappingDomain ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(q,u,v,A,z,Q){class w extends A.SnappingCandidate{constructor({targetPoint:L,constraint:W,previousVertex:B,otherVertex:R,otherVertexType:F,objectId:E,isDraped:I}){super(L,W,I,u.SnappingDomain.SELF);this.previousVertex=B;this.otherVertex=R;this.otherVertexType=F;this.objectId=E}get hints(){const L=this.previousVertex,W=this.otherVertexType===q.OtherVertexType.CENTER?this.otherVertex:this.targetPoint,B=this.otherVertexType===q.OtherVertexType.CENTER?this.targetPoint:this.otherVertex;return[new z.LineSnappingHint(v.LineSegmentHintType.TARGET,
W,B,this.isDraped,this.domain),new z.LineSnappingHint(v.LineSegmentHintType.REFERENCE,L,W,this.isDraped,this.domain),new Q.RightAngleSnappingHint(this.previousVertex,W,B,this.isDraped,this.domain)]}}q.OtherVertexType=void 0;(function(L){L[L.NEXT=0]="NEXT";L[L.CENTER=1]="CENTER"})(q.OtherVertexType||(q.OtherVertexType={}));q.RightAngleSnappingCandidate=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../core/has ../../../../core/Logger ../../../../chunks/vec32 ../SnappingDomain ./SnappingHint".split(" "),
function(q,u,v,A,z,Q){class w extends Q.SnappingHint{constructor(L,W,B,R,F=z.SnappingDomain.ALL){super(R,F);this.previousVertex=L;this.centerVertex=W;this.nextVertex=B}equals(L){return L instanceof w?A.exactEquals(this.previousVertex,L.previousVertex)&&A.exactEquals(this.centerVertex,L.centerVertex)&&A.exactEquals(this.nextVertex,L.nextVertex):!1}}q.RightAngleSnappingHint=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/support/viewUtils":function(){define("exports ../../../core/screenUtils ../../../core/libs/gl-matrix-2/math/vec2 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../layers/graphics/dehydratedPoint ../../../support/elevationInfoUtils".split(" "),
function(q,u,v,A,z,Q,w){function L(y,O,U,P,S=z.create()){y=O.toXYZ(y);y[2]=w.getConvertedElevationFromVector(P,y,O.spatialReference,U)||0;P.renderCoordsHelper.toRenderCoords(y,O.spatialReference,S);return S}function W(y,O,U,P,S=z.create()){y=A.copy(F,y);y[2]=w.getConvertedElevationFromVector(P,y,O,U)||0;P.renderCoordsHelper.toRenderCoords(y,O,S);return S}function B(y,O,U,P){if("2d"===P.type)return R.x=y[0],R.y=y[1],R.spatialReference=O,P.toScreen(R);W(y,O,U,P,F);P.state.camera.projectToScreen(F,H);
return u.createScreenPoint(H[0],H[1])}const R=Q.makeDehydratedPoint(0,0,0,null),F=z.create(),E=u.createRenderScreenPointArray(),I=u.createRenderScreenPointArray(),H=u.createScreenPointArray();q.anyMapPointToRender=L;q.anyMapPointToScreenPoint=function(y,O,U,P){return B(O.toXYZ(y),O.spatialReference,U,P)};q.anyMapPointsToRenderWithEqualRelativeZ=function(y,O,U,P,S,Z,aa){if("absolute-height"===P.mode)L(y,U,P,S,Z),L(O,U,P,S,aa);else{y=U.toXYZ(y);O=U.toXYZ(O);var M=w.getConvertedElevationFromVector(S,
y,U.spatialReference,P);P=w.getConvertedElevationFromVector(S,O,U.spatialReference,P);P=(null==M?P:null==P?M:Math.min(M,P))||0;y[2]=P;O[2]=P;S.renderCoordsHelper.toRenderCoords(y,U.spatialReference,Z);S.renderCoordsHelper.toRenderCoords(O,U.spatialReference,aa)}};q.renderScreenSpaceTangent=function(y,O,U,P){U.projectToRenderScreen(y,E);U.projectToRenderScreen(O,I);v.subtract(P,I,E);v.normalize(P,P)};q.vectorToRender=W;q.vectorToScreenPoint=B;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},
"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper ./SnappingDomain ./snappingUtils".split(" "),function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H){q.SelfSnappingEngine=
class extends v{constructor(y){super(y);this.updating=!1;this._snappers=new A;this._domain=I.SnappingDomain.SELF}initialize(){this._snappers.push(new R.ParallelLineSnapper(this.view,this.options),new B.LineSnapper(this.view,this.options),new F.RightAngleSnapper(this.view,this.options),new E.RightAngleTriangleSnapper(this.view,this.options))}set options(y){this._set("options",y);for(const O of this._snappers)O.options=y}async fetchCandidates(y,O,U){if(!(O&this._domain&&this.options.effectiveSelfEnabled))return[];
O=[];for(const P of this._snappers.items)for(const S of P.snap(y,U))O.push(S);H.sortCandidatesInPlace(y,O);return O}};u.__decorate([z.property({readOnly:!0})],q.SelfSnappingEngine.prototype,"updating",void 0);u.__decorate([z.property({constructOnly:!0})],q.SelfSnappingEngine.prototype,"view",void 0);u.__decorate([z.property()],q.SelfSnappingEngine.prototype,"options",null);q.SelfSnappingEngine=u.__decorate([W.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],q.SelfSnappingEngine);Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../core/Cyclical ../../../core/quantityUtils ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../support/elevationInfoUtils ../sketch/normalizedPoint ./SnappingAlgorithm ./snappingUtils ./candidates/LineSnappingCandidate ../support/viewUtils ../../support/angularMeasurementUtils ../../support/geodesicLengthMeasurementUtils ../../support/geometry3dUtils ../../support/geometry2dUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I){class H extends w.SnappingAlgorithm{snapNewVertex(y,O){var U=O.editGeometryOperations.data.components[0],P=U.edges.length;const S=[];if(1>P)return S;var {spatialReference:Z}=O;Z=B.vectorToScreenPoint(y,Z,z.absoluteHeightElevationInfo,this.view);const {view:aa}=this;P=U=U.edges[P-1];do{if(this.edgeExceedsShortLineThreshold(P,O)){const M=L.editEdgeToSnappingEdge(P,aa,O);this._processCandidateProposal(M.left,M.right,y,Z,O,S)}P=P.leftVertex.leftEdge}while(P&&P!==
U);return S}snapExistingVertex(y,O){const U=[],P=O.vertexHandle;var S=P.component;if(2>S.edges.length)return U;const {view:Z}=this;var {spatialReference:aa}=O;aa=B.vectorToScreenPoint(y,aa,z.absoluteHeightElevationInfo,Z);var M=P.leftEdge,G=P.rightEdge;M&&G&&this.edgeExceedsShortLineThreshold(M,O)&&this.edgeExceedsShortLineThreshold(G,O)&&this._processCandidateProposal(Q.fromAnyMapPoint(M.leftVertex.pos,Z,O),Q.fromAnyMapPoint(G.rightVertex.pos,Z,O),y,aa,O,U);M=S=S.edges[0];do M!==P.leftEdge&&M!==
P.rightEdge&&this.edgeExceedsShortLineThreshold(M,O)&&(G=L.editEdgeToSnappingEdge(M,Z,O),this._processCandidateProposal(G.left,G.right,y,aa,O,U)),M=M.rightVertex.rightEdge;while(M&&M!==S);return U}_processCandidateProposal(y,O,U,P,S,Z){const {spatialReference:aa,pointer:M}=S,G=A.create();this._projectedLine(G,y,O,U,S);U=Q.fromVec3(G);L.squaredScreenDistance(P,B.vectorToScreenPoint(U,aa,z.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(M)&&Z.push(new W.LineSnappingCandidate({lineStart:y,
lineEnd:O,targetPoint:U,isDraped:"on-the-ground"===S.elevationInfo?.mode}))}_projectedLine(y,O,U,P,S){this._projectToLineGeodesic(y,O,U,P,S)||this._projectToLinePlanar(y,P,O,U)}_projectToLineGeodesic(y,O,U,P,{spatialReference:S}){var Z=R.radiansGeographicBetweenVec(O,U,S,S);if(null==Z)return!1;const aa=R.radiansGeographicBetweenVec(U,P,S,S);if(null==aa)return!1;O=F.geodesicDistance(U,P,S);if(null==O)return!1;Z=Math.abs(u.cyclicalPI.shortestSignedDiff(Z,aa))>Math.PI/2?u.cyclical2PI.normalize(Z+Math.PI):
Z;R.pointFromDistanceAlongAzimuth(y,U,S,v.valueInUnit(O,"meters"),v.createAngle(Z,"radians","geographic"),"geodesic");y[2]=P[2];return!0}_projectToLinePlanar(y,O,U,P){E.projectPointToLineLike(O,{start:U,end:P,type:I.LineType.LINE},y);y[2]=O[2]}}q.LineSnapper=H;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define("exports ../../../core/unitUtils ../../../core/libs/gl-matrix-2/math/vec2 ../../../support/elevationInfoUtils ../sketch/normalizedPoint ./Settings ./snappingUtils ../support/viewUtils".split(" "),
function(q,u,v,A,z,Q,w,L){class W{constructor(B,R){this.view=B;this.options=R;this.squaredShortLineThreshold=Q.defaults.shortLineThreshold*Q.defaults.shortLineThreshold}snap(B,R){return null!=R.vertexHandle?"vertex"!==R.vertexHandle.type?[]:this.snapExistingVertex(B,R):this.snapNewVertex(B,R)}edgeExceedsShortLineThreshold(B,R){return this.exceedsShortLineThreshold(z.fromAnyMapPoint(B.leftVertex.pos,this.view,R),z.fromAnyMapPoint(B.rightVertex.pos,this.view,R),R)}exceedsShortLineThreshold(B,R,{spatialReference:F}){return 0===
this.squaredShortLineThreshold||w.squaredScreenDistance(L.vectorToScreenPoint(R,F,A.absoluteHeightElevationInfo,this.view),L.vectorToScreenPoint(B,F,A.absoluteHeightElevationInfo,this.view))>this.squaredShortLineThreshold}isVertical(B,R,{spatialReference:F}){F=u.getMetersPerUnitForSR(F);return v.distance(z.asVec2(B),z.asVec2(R))*F<Q.defaults.verticalLineThresholdMeters}squaredProximityThreshold(B){return"touch"===B?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*
this.options.distance}get _squaredTouchProximityThreshold(){const {distance:B,touchSensitivityMultiplier:R}=this.options,F=B*R;return F*F}}q.SnappingAlgorithm=W;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../sketch/constraints ../SnappingDomain ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint".split(" "),function(q,u,v,A,z,Q){class w extends z.SnappingCandidate{constructor({lineStart:L,
lineEnd:W,targetPoint:B,isDraped:R}){super(B,new u.VerticalPlaneConstraint(L,W),R,v.SnappingDomain.SELF);this._referenceLineHint=new Q.LineSnappingHint(A.LineSegmentHintType.REFERENCE_EXTENSION,L,W,R,this.domain)}get hints(){return[this._referenceLineHint,new Q.LineSnappingHint(A.LineSegmentHintType.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}}q.LineSnappingCandidate=w;Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicLengthMeasurementUtils":function(){define("exports ../../geometry ../../core/quantityUtils ../../core/libs/gl-matrix-2/factories/vec3f64 ../../geometry/geometryEngine ../../geometry/projection/projectPolylineToWGS84ComparableLonLat ../../geometry/projection/projectVectorToWGS84ComparableLonLat ../../geometry/support/geodesicUtils ../../geometry/support/spatialReferenceUtils ./geodesicMeasurementUtils ../../geometry/SpatialReference".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R){function F(G,X,C){return B.geodesicMeasure(C,E,I,H,G,X,C)}function E(G,X,C){return v.createLength(L.inverseGeodeticSolver(P,G,X,C).distance,"meters")}function I(G,X,C){return v.createLength(z.geodesicLength({type:"polyline",spatialReference:C,paths:[[[...G],[...X]]]},"meters"),"meters")}function H(G,X,C){return w.projectVectorToWGS84ComparableLonLat(G,C,aa)&&w.projectVectorToWGS84ComparableLonLat(X,C,M)?v.createLength(L.inverseGeodeticSolver(P,aa,M,R.WGS84).distance,
"meters"):null}function y(G){return v.createLength(L.geodesicLengths([G],"meters")[0],"meters")}function O(G){return v.createLength(z.geodesicLength(G,"meters"),"meters")}function U(G){var X=[];if(!Q.projectPolylineToWGS84ComparableLonLat(G,X))return null;G=0;for(const C of X){X=0;for(let V=1;V<C.length;++V)X+=L.inverseGeodeticSolver(P,C[V-1],C[V],R.WGS84).distance;G+=X}return v.createLength(G,"meters")}const P=new L.InverseGeodeticSolverResult,S=A.create(),Z=A.create(),aa=A.create(),M=A.create();
q.geodesicDistance=F;q.geodesicDistanceBetweenPoints=function(G,X){if(!W.equals(G.spatialReference,X.spatialReference))return null;const {spatialReference:C}=G;S[0]=G.x;S[1]=G.y;S[2]=G.hasZ?G.z:0;Z[0]=X.x;Z[1]=X.y;Z[2]=X.hasZ?X.z:0;return F(S,Z,C)};q.geodesicLength=function(G){const {spatialReference:X}=G;return B.geodesicMeasure(X,y,O,U,G)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/geometryEngine":function(){define(["exports","../chunks/geometryEngineBase","./geometryAdapters/hydrated"],
function(q,u,v){function A(w){return Array.isArray(w)?w[0].spatialReference:w&&w.spatialReference}function z(w){return"xmin"in w?"center"in w?w.center:null:"x"in w?w:"extent"in w?w.extent?.center??null:null}class Q extends Error{constructor(){super("Illegal Argument Exception")}}q.buffer=function(w,L,W,B=!1){return u.GeometryEngineApi.buffer(v.hydratedAdapter,A(w),w,L,W,B)};q.changeDefaultSpatialReferenceTolerance=function(w,L){u.GeometryEngineApi.changeDefaultSpatialReferenceTolerance(w,L)};q.clearDefaultSpatialReferenceTolerance=
function(w){u.GeometryEngineApi.clearDefaultSpatialReferenceTolerance(w)};q.clip=function(w,L){return u.GeometryEngineApi.clip(v.hydratedAdapter,A(w),w,L)};q.contains=function(w,L){return u.GeometryEngineApi.contains(v.hydratedAdapter,A(w),w,L)};q.convexHull=function(w,L=!1){return u.GeometryEngineApi.convexHull(v.hydratedAdapter,A(w),w,L)};q.crosses=function(w,L){return u.GeometryEngineApi.crosses(v.hydratedAdapter,A(w),w,L)};q.cut=function(w,L){return u.GeometryEngineApi.cut(v.hydratedAdapter,A(w),
w,L)};q.densify=function(w,L,W){return u.GeometryEngineApi.densify(v.hydratedAdapter,A(w),w,L,W)};q.difference=function(w,L){return u.GeometryEngineApi.difference(v.hydratedAdapter,A(w),w,L)};q.disjoint=function(w,L){return u.GeometryEngineApi.disjoint(v.hydratedAdapter,A(w),w,L)};q.distance=function(w,L,W){return u.GeometryEngineApi.distance(v.hydratedAdapter,A(w),w,L,W)};q.equals=function(w,L){return u.GeometryEngineApi.equals(v.hydratedAdapter,A(w),w,L)};q.extendedSpatialReferenceInfo=function(w){return u.GeometryEngineApi.extendedSpatialReferenceInfo(w)};
q.flipHorizontal=function(w,L){if(null==w)throw new Q;const W=w.spatialReference;L=L??z(w);if(null==L)throw new Q;w=w.constructor.fromJSON(u.GeometryEngineApi.flipHorizontal(w,L));w.spatialReference=W;return w};q.flipVertical=function(w,L){if(null==w)throw new Q;const W=w.spatialReference;L=L??z(w);if(null==L)throw new Q;w=w.constructor.fromJSON(u.GeometryEngineApi.flipVertical(w,L));w.spatialReference=W;return w};q.generalize=function(w,L,W,B){return u.GeometryEngineApi.generalize(v.hydratedAdapter,
A(w),w,L,W,B)};q.geodesicArea=function(w,L,W){return u.GeometryEngineApi.geodesicArea(v.hydratedAdapter,A(w),w,L,W)};q.geodesicBuffer=function(w,L,W,B,R,F){return u.GeometryEngineApi.geodesicBuffer(v.hydratedAdapter,A(w),w,L,W,B,R,F)};q.geodesicDensify=function(w,L,W,B=0){return u.GeometryEngineApi.geodesicDensify(v.hydratedAdapter,A(w),w,L,W,B)};q.geodesicLength=function(w,L,W){return u.GeometryEngineApi.geodesicLength(v.hydratedAdapter,A(w),w,L,W)};q.intersect=function(w,L){return u.GeometryEngineApi.intersect(v.hydratedAdapter,
A(w),w,L)};q.intersectLinesToPoints=function(w,L){return u.GeometryEngineApi.intersectLinesToPoints(v.hydratedAdapter,A(w),w,L)};q.intersects=function(w,L){return u.GeometryEngineApi.intersects(v.hydratedAdapter,A(w),w,L)};q.isSimple=function(w){return u.GeometryEngineApi.isSimple(v.hydratedAdapter,A(w),w)};q.nearestCoordinate=function(w,L,W=!0){return u.GeometryEngineApi.nearestCoordinate(v.hydratedAdapter,A(w),w,L,W)};q.nearestVertex=function(w,L){return u.GeometryEngineApi.nearestVertex(v.hydratedAdapter,
A(w),w,L)};q.nearestVertices=function(w,L,W,B){return u.GeometryEngineApi.nearestVertices(v.hydratedAdapter,A(w),w,L,W,B)};q.offset=function(w,L,W,B,R,F){return u.GeometryEngineApi.offset(v.hydratedAdapter,A(w),w,L,W,B,R,F)};q.overlaps=function(w,L){return u.GeometryEngineApi.overlaps(v.hydratedAdapter,A(w),w,L)};q.planarArea=function(w,L){return u.GeometryEngineApi.planarArea(v.hydratedAdapter,A(w),w,L)};q.planarLength=function(w,L){return u.GeometryEngineApi.planarLength(v.hydratedAdapter,A(w),
w,L)};q.relate=function(w,L,W){return u.GeometryEngineApi.relate(v.hydratedAdapter,A(w),w,L,W)};q.rotate=function(w,L,W){if(null==w)throw new Q;const B=w.spatialReference;W=W??z(w);if(null==W)throw new Q;w=w.constructor.fromJSON(u.GeometryEngineApi.rotate(w,L,W));w.spatialReference=B;return w};q.simplify=function(w){return u.GeometryEngineApi.simplify(v.hydratedAdapter,A(w),w)};q.symmetricDifference=function(w,L){return u.GeometryEngineApi.symmetricDifference(v.hydratedAdapter,A(w),w,L)};q.touches=
function(w,L){return u.GeometryEngineApi.touches(v.hydratedAdapter,A(w),w,L)};q.union=function(w,L=null){return u.GeometryEngineApi.union(v.hydratedAdapter,A(w),w,L)};q.within=function(w,L){return u.GeometryEngineApi.within(v.hydratedAdapter,A(w),w,L)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/geometryEngineBase":function(){define(["exports","./_commonjsHelpers"],function(q,u){var v={exports:{}};(function(A,z){z=function(){function Q(g){if("number"===typeof g)return ja.Tc.Zg(g);
if(null==g)return null;if(null!=Ma[g])return ja.Tc.Zg(Ma[g]);throw Error("Unrecognised Unit Type");}function w(g){if("number"===typeof g)return ja.Tc.Zg(g);if(null==g)return null;if(null!=Sa[g])return ja.Tc.Zg(Sa[g]);throw Error("Unrecognised Unit Type");}function L(g){if(g)switch(g){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function W(g,N,l,c){if(null==l||l.B())return null;switch(l.getType()){case ja.qn.Point:return g.exportPoint(N,
l,c);case ja.qn.Polygon:return g.exportPolygon(N,l,c);case ja.qn.Polyline:return g.exportPolyline(N,l,c);case ja.qn.MultiPoint:return g.exportMultipoint(N,l,c);case ja.qn.Envelope:return g.exportExtent(N,l,c)}return null}function B(g,N,l,c){if(l.getType()!==ja.qn.Point)throw Error("Geometry not Point");return g.exportPoint(N,l,c)}function R(g){var N=g.wkid;g=g.wkt2||g.wkt;var l=Va.get(N||g);null==l&&(-1!==N&&null!=N?(l=ja.Eg.create(N),Va.set(N,l)):g&&(l=ja.Eg.qP(g),Va.set(g,l)),kb.has(N||g)&&l.VW(kb.get(N||
g)));return l}function F(g){var N,l,c;if(null==g)return null;var a=R(g);g=a.Hd();a=a.Kn();return N={},N.tolerance=a,N.unitType=null==g?-1:g.od,N.unitID=null==g?-1:g.Ec(),N.unitBaseFactor=null==g?0:g.ai,N.unitSquareDerivative=null==g?0:null!==(c=null===(l=ja.Tc.aG(g))||void 0===l?void 0:l.Ec())&&void 0!==c?c:0,N}function E(g,N,l,c){if(null==l)return null;l=ja.$b.clip(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N));return W(g,Pa,l,N)}function I(g,N,l,c){l=ja.$b.dl(g.convertToGEGeometry(Pa,
l),g.convertToGEGeometry(Pa,c),R(N));c=[];for(var a=0;a<l.length;a++)c.push(W(g,Pa,l[a],N));return c}function H(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.contains(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N))}function y(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.BP(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N))}function O(g,N,l,c,a){if(null==l||null==c)throw Error("Illegal Argument Exception");
return ja.$b.tb(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N),Q(a))}function U(g,N,l,c){return null==l&&null!=c||null==c&&null!=l?!1:ja.$b.Nb(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N))}function P(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.TS(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N))}function S(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.touches(g.convertToGEGeometry(Pa,
l),g.convertToGEGeometry(Pa,c),R(N))}function Z(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.qY(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N))}function aa(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.TP(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N))}function M(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.DU(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,
c),R(N))}function G(g,N,l,c,a){if(null==l||null==c)throw Error("Illegal Argument Exception");return ja.$b.yB(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N),a)}function X(g,N,l){if(null==l)throw Error("Illegal Argument Exception");return ja.$b.dT(g.convertToGEGeometry(Pa,l),R(N))}function C(g,N,l){if(null==l)throw Error("Illegal Argument Exception");l=ja.$b.eC(g.convertToGEGeometry(Pa,l),R(N));return W(g,Pa,l,N)}function V(g,N,l,c){void 0===c&&(c=!1);if(null==l)throw Error("Illegal Argument Exception");
if(Array.isArray(l)){var a=c,b=[];for(c=0;c<l.length;c++)b.push(g.convertToGEGeometry(Pa,l[c]));l=ja.$b.jP(b,a);a=Array(l.length);for(c=0;c<l.length;c++)a[c]=W(g,Pa,l[c],N);return a}c=ja.$b.iP(g.convertToGEGeometry(Pa,l),R(N));return W(g,Pa,c,N)}function ia(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(g.convertToGEGeometry(Pa,l[b]));l=ja.$b.QP(a,g.convertToGEGeometry(Pa,c),R(N));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=
W(g,Pa,l[b],N);return c}b=ja.$b.im(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N));return W(g,Pa,b,N)}function oa(g,N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(g.convertToGEGeometry(Pa,l[b]));l=ja.$b.VX(a,g.convertToGEGeometry(Pa,c),R(N));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=W(g,Pa,l[b],N);return c}b=ja.$b.ep(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N));return W(g,Pa,b,N)}function ma(g,
N,l,c){if(null==l||null==c)throw Error("Illegal Argument Exception");if(Array.isArray(l)){for(var a=[],b=0;b<l.length;b++)a.push(g.convertToGEGeometry(Pa,l[b]));l=ja.$b.RS(a,g.convertToGEGeometry(Pa,c),R(N));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=W(g,Pa,l[b],N);return c}b=ja.$b.Ea(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N));return W(g,Pa,b,N)}function D(g,N,l,c){if(null==l)return null;var a=[];if(Array.isArray(l)){if(0===l.length)return null;for(c=0;c<l.length;c++)a.push(g.convertToGEGeometry(Pa,
l[c]))}else a.push(g.convertToGEGeometry(Pa,l)),null!=c&&a.push(g.convertToGEGeometry(Pa,c));return W(g,Pa,ja.$b.jY(a,R(N)),N)}function J(g,N,l,c,a,b,d,e){var f=0;if(null!=b)switch(b){case "round":f=0;break;case "bevel":f=1;break;case "miter":f=2;break;case "square":f=3}if(Array.isArray(l)){if(null==l)g=null;else if(0===l.length)g=[];else{var h=[];for(b=0;b<l.length;b++)h.push(g.convertToGEGeometry(Pa,l[b]));l=ja.$b.BU(h,R(N),c,f,d,e,Q(a));c=Array(l.length);for(b=0;b<l.length;b++)c[b]=W(g,Pa,l[b],
N);g=c}return g}l=ja.$b.offset(g.convertToGEGeometry(Pa,l),R(N),c,f,d,e,Q(a));return W(g,Pa,l,N)}function ea(g,N,l,c,a,b){void 0===b&&(b=!1);if(Array.isArray(l)){if(!Array.isArray(c)){for(var d=[],e=0;e<l.length;e++)d.push(c);c=d}if(c.length!=l.length){if(0==c.length)throw Error("Illegal Argument Exception");d=[];var f=0;for(e=0;e<l.length;e++)void 0===c[e]?d.push(f):(d.push(c[e]),f=c[e]);c=d}return T(g,N,l,c,a,!1,b,"geodesic",NaN)}l=ja.$b.buffer(g.convertToGEGeometry(Pa,l),R(N),c,Q(a),!1,0,NaN);
return W(g,Pa,l,N)}function ba(g,N,l,c,a,b,d,e){if(Array.isArray(l)){if(!Array.isArray(c)){for(var f=[],h=0;h<l.length;h++)f.push(c);c=f}if(c.length!==l.length){if(0===c.length)throw Error("Illegal Argument Exception");f=[];var k=0;for(h=0;h<l.length;h++)void 0===c[h]?f.push(k):(f.push(c[h]),k=c[h]);c=f}return T(g,N,l,c,a,!0,b,d,e)}void 0===d&&(d=NaN);l=ja.$b.buffer(g.convertToGEGeometry(Pa,l),R(N),c,Q(a),!0,L(b),d);return W(g,Pa,l,N)}function T(g,N,l,c,a,b,d,e,f){void 0===f&&(f=NaN);if(null==l)return null;
if(0===l.length)return[];for(var h=[],k=0;k<l.length;k++)h.push(g.convertToGEGeometry(Pa,l[k]));l=ja.$b.MN(h,R(N),c,Q(a),b,d,L(e),f);c=Array(l.length);for(k=0;k<l.length;k++)c[k]=W(g,Pa,l[k],N);return c}function Y(g,N,l,c,a){var b;void 0===a&&(a=!0);l=ja.$b.nz(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),a);return b={},b.coordinate=B(g,Pa,l.fz(),N),b.distance=l.hz(),b.isRightSide=l.Sz(),b.vertexIndex=l.Ua(),b.isEmpty=l.B(),b}function fa(g,N,l,c){var a;l=ja.$b.oz(g.convertToGEGeometry(Pa,
l),g.convertToGEGeometry(Pa,c));return a={},a.coordinate=B(g,Pa,l.fz(),N),a.distance=l.hz(),a.isRightSide=l.Sz(),a.vertexIndex=l.Ua(),a.isEmpty=l.B(),a}function pa(g,N,l,c,a,b){var d;l=ja.$b.pz(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),a,b);c=[];for(a=0;a<l.length;a++)!1===l[a].B()&&c.push((d={},d.coordinate=B(g,Pa,l[a].fz(),N),d.distance=l[a].hz(),d.isRightSide=l[a].Sz(),d.vertexIndex=l[a].Ua(),d.isEmpty=l[a].B(),d));return c}function va(g,N,l,c,a,b){l=ja.$b.QQ(g.convertToGEGeometry(Pa,
l),R(N),c,a,Q(b));return W(g,Pa,l,N)}function xa(g,N,l,c,a){l=ja.$b.Qr(g.convertToGEGeometry(Pa,l),R(N),c,Q(a));return W(g,Pa,l,N)}function ya(g,N,l,c,a,b){void 0===b&&(b=0);l=ja.$b.Wy(g.convertToGEGeometry(Pa,l),R(N),c,Q(a),b);return W(g,Pa,l,N)}function Da(g,N,l,c){if(null==l)throw Error("Illegal Argument Exception");return ja.$b.JU(g.convertToGEGeometry(Pa,l),R(N),w(c))}function Ca(g,N,l,c){if(null==l)throw Error("Illegal Argument Exception");return ja.$b.KU(g.convertToGEGeometry(Pa,l),R(N),Q(c))}
function Ka(g,N,l,c,a){if(null==l)throw Error("Illegal Argument Exception");return ja.$b.WQ(g.convertToGEGeometry(Pa,l),R(N),w(c),L(a))}function Oa(g,N,l,c,a){if(null==l)throw Error("Illegal Argument Exception");return ja.$b.ZQ(g.convertToGEGeometry(Pa,l),R(N),Q(c),L(a))}function Ba(g){ja.NL.bind(g)}function na(g,N,l,c,a){var b=null,d=null;if(c){if(!a)throw ja.i.N("AOI missing Spatial Reference");b=g.convertToGEGeometry(Pa,c);d=R(a).fh()}g=ja.gu.XR(R(N).fh(),R(l).fh(),b,d);return null!==g?g:null}
function sa(g,N,l,c,a){var b=null,d=null;if(c){if(!a)throw ja.i.N("AOI missing Spatial Reference");b=g.convertToGEGeometry(Pa,c);d=R(a).fh()}return ja.gu.YR(R(N).fh(),R(l).fh(),b,d)}function ra(g,N,l,c,a,b){void 0===a&&(a=null);void 0===b&&(b=null);if(b){var d=new ja.yC;d.Vu=b.densificationStep;d.Jr=b.centralMeridianOfOutputGCS;b.clipWithInputHorizon&&d.PW(b.clipWithInputHorizon);b.clipWithOutputHorizon&&d.QW(b.clipWithOutputHorizon)}if(!1===this.KY)throw Error("Projection Engine must be enabled using enableProjection");
if(0===N.length)return[];if(a){if(b=a.getCachedGeTransformation(l,c),!b)a:{b=a;a=null;if(b){var e=b.getGTListEntry();if(null!==e){a=new ja.wC(null);for(var f=0,h=e.steps;f<h.length;f++){e=h[f];var k=new ja.Dx(e.geogtran);e.isInverse&&k.Qz();a.add(k)}d=ja.vr.Nr(R(l).fh(),R(c).fh(),a,d);b.assignCachedGe(l,c,d);b=d;break a}}if(null===a&&b&&b.steps&&0<b.steps.length){a=new ja.wC(null);f=0;for(h=b.steps;f<h.length;f++)e=h[f],-1!=e.wkid&&null!=e.wkid?a.add(ja.Dx.create(e.wkid,e.isInverse)):a.add(ja.Dx.uP(e.wkt,
e.isInverse));d=ja.vr.Nr(R(l).fh(),R(c).fh(),a,d);b.assignCachedGe(l,c,d);b=d}else b=ja.vr.Nr(R(l).fh(),R(c).fh(),a,d)}}else b=ja.vr.Nr(R(l).fh(),R(c).fh(),null);l=[];for(a=0;a<N.length;a++){d=N[a];e=l;f=e.push;h=g;k=c;var m=b;d=ja.$b.zh(h.convertToGEGeometry(Pa,d),m);d=W(h,Pa,d,k);f.call(e,d)}return l}function Aa(g,N){null!=g&&(g=g.wkid||g.wkt2||g.wkt,kb.has(g),kb.set(g,N),Va.has(g)&&Va.delete(g))}function Fa(g){null!=g&&(g=g.wkid||g.wkt2||g.wkt,kb.has(g)&&(kb.delete(g),Va.has(g)&&Va.delete(g)))}
function Ia(g,N,l,c){if(null==l||null==c)return[];var a=[],b=0;for(l=ja.$b.QS(g.convertToGEGeometry(Pa,l),g.convertToGEGeometry(Pa,c),R(N))||[];b<l.length;b++)a.push(W(g,Pa,l[b],N));return a}var la,qa=this&&this.__extends||function(){function g(N,l){g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,a){c.__proto__=a}||function(c,a){for(var b in a)a.hasOwnProperty(b)&&(c[b]=a[b])};return g(N,l)}return function(N,l){function c(){this.constructor=N}g(N,l);N.prototype=null===l?Object.create(l):
(c.prototype=l.prototype,new c)}}(),ja;(function(g){(function(l){l[l.Unknown=0]="Unknown";l[l.Point=33]="Point";l[l.Line=322]="Line";l[l.Envelope=197]="Envelope";l[l.MultiPoint=550]="MultiPoint";l[l.Polyline=1607]="Polyline";l[l.Polygon=1736]="Polygon"})(g.qn||(g.qn={}));(function(l){l[l.enumMild=0]="enumMild";l[l.enumMedium=1]="enumMedium";l[l.enumHot=2]="enumHot"})(g.YK||(g.YK={}));var N=function(){function l(){this.description=null;this.VA=0}l.prototype.getType=function(){return 0};l.prototype.Db=
function(){return-1};l.prototype.Nf=function(c){this.vc();c!=this.description&&this.sn(c)};l.prototype.sn=function(){};l.prototype.Jl=function(c){this.vc();c!=this.description&&(c=g.ee.CR(this.description,c),c!=this.description&&this.sn(c))};l.prototype.hasAttribute=function(c){return this.description.hasAttribute(c)};l.prototype.re=function(c){this.vc();this.description.hasAttribute(c)||(c=g.ee.BR(this.description,c),this.sn(c))};l.prototype.Tg=function(){return null};l.prototype.bn=function(){};
l.prototype.A=function(){};l.prototype.Qo=function(){};l.prototype.xc=function(c){this.A(c)};l.prototype.B=function(){return!0};l.prototype.Oa=function(){};l.prototype.Oc=function(){};l.prototype.Ia=function(){return null};l.prototype.copyTo=function(){};l.prototype.Ke=function(){return 0};l.prototype.Qb=function(){return 0};l.prototype.iG=function(){return this.hasAttribute(1)};l.tf=function(c){return((c&192)>>6)+1>>1};l.Rn=function(c){return 0!=(c&32)};l.US=function(c){return 0!=(c&128)};l.yd=function(c){return 0!=
(c&256)};l.xj=function(c){return 0!=(c&512)};l.Hc=function(c){return 0!=(c&1024)};l.prototype.Of=function(){var c=this.Ia();this.copyTo(c);return c};l.prototype.mg=function(){return null};l.jg=function(c){var a=c.Ia();c.copyTo(a);return a};l.prototype.vc=function(){0<=this.VA&&(this.VA+=2147483649)};l.Ax=function(c){var a=c.getType();if(l.xj(a))return c.I();if(c.B())return 0;if(197==a)return 4;if(33==a)return 1;if(l.yd(a))return 2;throw g.i.fa("missing type");};return l}();g.aa=N})(ja||={});(function(g){var N=
function(){function l(){this.y=this.x=0}l.construct=function(c,a){var b=new l;b.x=c;b.y=a;return b};l.al=function(c){var a=new l;a.x=c.x;a.y=c.y;return a};l.prototype.ma=function(c,a){this.x=c;this.y=a};l.prototype.L=function(c){this.x=c.x;this.y=c.y};l.prototype.fq=function(c,a){return this.x===c&&this.y===a};l.prototype.Rz=function(c){return 2.220446049250313E-16>=Math.abs(this.x-c.x)&&2.220446049250313E-16>=Math.abs(this.y-c.y)};l.prototype.qb=function(c){return this.x===c.x&&this.y===c.y};l.prototype.Nb=
function(c){return c==this?!0:c instanceof l?this.x==c.x&&this.y==c.y:!1};l.prototype.sub=function(c){this.x-=c.x;this.y-=c.y};l.prototype.uc=function(c,a){this.x=c.x-a.x;this.y=c.y-a.y};l.prototype.add=function(c,a){void 0!==a?(this.x=c.x+a.x,this.y=c.y+a.y):(this.x+=c.x,this.y+=c.y)};l.prototype.Sq=function(){this.x=-this.x;this.y=-this.y};l.prototype.mt=function(c){this.x=-c.x;this.y=-c.y};l.prototype.NS=function(c,a,b){this.x=c.x*(1-b)+a.x*b;this.y=c.y*(1-b)+a.y*b};l.prototype.Ct=function(c,a){this.x=
this.x*c+a.x;this.y=this.y*c+a.y};l.prototype.HW=function(c,a,b){this.x=a.x*c+b.x;this.y=a.y*c+b.y};l.prototype.scale=function(c){this.x*=c;this.y*=c};l.prototype.compare=function(c){return this.y<c.y?-1:this.y>c.y?1:this.x<c.x?-1:this.x>c.x?1:0};l.prototype.normalize=function(){var c=this.length();0==c&&(this.x=1,this.y=0);this.x/=c;this.y/=c};l.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};l.prototype.Sk=function(){return this.x*this.x+this.y*this.y};l.tb=function(c,
a){return Math.sqrt(this.yc(c,a))};l.Oy=function(c,a,b,d){c-=b;a-=d;return Math.sqrt(c*c+a*a)};l.prototype.Qh=function(c){return this.x*c.x+this.y*c.y};l.prototype.fD=function(c){return Math.abs(this.x*c.x)+Math.abs(this.y*c.y)};l.prototype.wi=function(c){return this.x*c.y-this.y*c.x};l.prototype.Bt=function(c,a){var b=-this.x*a+this.y*c;this.x=this.x*c+this.y*a;this.y=b};l.prototype.Hv=function(){var c=this.x;this.x=-this.y;this.y=c};l.prototype.MG=function(c){this.x=-c.y;this.y=c.x};l.prototype.ar=
function(){var c=this.x;this.x=this.y;this.y=-c};l.prototype.qu=function(){return 0<this.x?0<=this.y?1:4:0<this.y?2:0==this.x?4:3};l.nu=function(c,a){var b=c.qu(),d=a.qu();return d==b?(c=c.wi(a),0>c?1:0<c?-1:0):b<d?-1:1};l.yc=function(c,a){var b=c.x-a.x;c=c.y-a.y;return b*b+c*c};l.prototype.toString=function(){return"("+this.x+" , "+this.y+")"};l.prototype.Rc=function(){this.y=this.x=NaN};l.prototype.isNaN=function(){return isNaN(this.x)||isNaN(this.y)};l.prototype.offset=function(c,a){var b=l.tb(c,
a),d=l.construct(this.x,this.y);if(0==b)return l.tb(d,c);var e=new l;e.L(a);e.sub(c);d.sub(c);return d.wi(e)/b};l.Uq=function(c,a,b){var d=new g.Wb;d.set(a.x);d.sub(c.x);var e=new g.Wb;e.set(b.y);e.sub(c.y);var f=new g.Wb;f.set(a.y);f.sub(c.y);var h=new g.Wb;h.set(b.x);h.sub(c.x);d.Ag(e);f.Ag(h);d.sub(f);if(!d.ps())return b=d.value(),0>b?-1:0<b?1:0;d=new g.hp(a.x);e=new g.hp(c.x);f=new g.hp(c.y);d=d.jt(e);c=new g.hp(b.y);c=c.jt(f);a=new g.hp(a.y);a=a.jt(f);b=new g.hp(b.x);b=b.jt(e);d=d.lr(c);a=a.lr(b);
d=d.lr(a);return d.nT()?-1:d.fS()?1:0};l.prototype.cc=function(){return g.O.uj(g.O.uj())};return l}();g.h=N})(ja||={});(function(g){var N=function(){function l(c){this.Fy=this.Mt=0;this.OX=c}l.prototype.reset=function(){this.Fy=this.Mt=0};l.prototype.add=function(c){c-=this.Fy;var a=this.Mt+c;this.Fy=a-this.Mt-c;this.Mt=a};l.prototype.sub=function(c){this.add(-c)};l.prototype.rm=function(){return this.OX+this.Mt};return l}();g.Fx=N;g.lc=function(){function l(){}l.Cn=function(c,a){return 0<=a?Math.abs(c):
-Math.abs(c)};l.sign=function(c){return 0>c?-1:0<c?1:0};l.RK=function(c){return c-360*Math.floor(c/360)};l.round=function(c){return Math.floor(c+.5)};l.ox=function(c){return c*c};l.hq=function(c,a,b){return.5>=b?c+(a-c)*b:a-(a-c)*(1-b)};l.OG=function(c,a,b,d){.5>=b?(d.x=c.x+(a.x-c.x)*b,d.y=c.y+(a.y-c.y)*b):(d.x=a.x-(a.x-c.x)*(1-b),d.y=a.y-(a.y-c.y)*(1-b))};l.lT=function(c,a,b,d,e,f){.5>=e?(f.x=c+(b-c)*e,f.y=a+(d-a)*e):(f.x=b-(b-c)*(1-e),f.y=d-(d-a)*(1-e))};return l}()})(ja||={});(function(g){var N=
function(l){function c(){var a=l.call(this)||this;a.sa=0;a.na=0;a.pa=0;a.la=0;a.ka=null;return a}qa(c,l);c.prototype.ac=function(){return g.h.construct(this.sa,this.na)};c.prototype.Yp=function(a){a.x=this.sa;a.y=this.na};c.prototype.Dc=function(a){this.em(0,a)};c.prototype.ZB=function(a,b){this.em(0,g.h.construct(a,b))};c.prototype.To=function(a){this.hD(0,a)};c.prototype.setStart=function(a){this.uD(0,a)};c.prototype.wv=function(a,b){return this.Od(0,a,b)};c.prototype.YB=function(a,b,d){this.tn(0,
a,b,d)};c.prototype.wc=function(){return g.h.construct(this.pa,this.la)};c.prototype.Tr=function(a){a.x=this.pa;a.y=this.la};c.prototype.Qc=function(a){this.em(1,a)};c.prototype.Ql=function(a,b){this.em(1,g.h.construct(a,b))};c.prototype.Po=function(a){this.hD(1,a)};c.prototype.setEnd=function(a){this.uD(1,a)};c.prototype.gv=function(a,b){return this.Od(1,a,b)};c.prototype.OB=function(a,b,d){this.tn(1,a,b,d)};c.prototype.Db=function(){return 1};c.prototype.B=function(){return this.Ac()};c.prototype.Oa=
function(){};c.prototype.Ke=function(){return 0};c.prototype.Ea=function(a,b,d,e,f){return this.KM(a,b,d,e,f)};c.prototype.isIntersecting=function(a,b){return 0!=this.zr(a,b,!1)};c.prototype.qs=function(a,b){return this.ru(a,b,!1)};c.prototype.ru=function(){return null};c.prototype.Ac=function(){return!1};c.prototype.ay=function(a){this.vc();if(null==this.ka&&0<a)this.ka=g.O.lg(2*a);else if(null!=this.ka&&this.ka.length<2*a){for(var b=this.ka.slice(0),d=this.ka.length;d<2*a;d++)b[d]=0;this.ka=b}};
c.gM=function(a,b,d){if(0<d)var e=0;for(var f=0;f<d;f++)b[0+e]=a[0],e++};c.prototype.em=function(a,b){0!=a?(this.pa=b.x,this.la=b.y):(this.sa=b.x,this.na=b.y)};c.prototype.sn=function(a){if(null!=this.ka){for(var b=g.ee.Iw(a,this.description),d=[],e=c.Gg(this.description,0),f=c.Gg(this.description,1),h=c.Gg(a,0),k=c.Gg(a,1),m=0,n=1,p=a.Aa;n<p;n++){var r=a.kd(n),t=g.ra.Va(r);if(-1==b[n]){var x=g.ra.se(r);for(r=0;r<t;r++)d[h+m]=x,d[k+m]=x,m++}else for(x=this.description.$j(b[n])-2,r=0;r<t;r++)d[h+m]=
this.ka[e+x],d[k+m]=this.ka[f+x],m++,x++}this.ka=d}this.description=a};c.prototype.hD=function(a,b){if(this.Ac())throw g.i.fa("empty geometry");b.Nf(this.description);b.Ac()&&b.un();for(var d=0;d<this.description.Aa;d++)for(var e=this.description.Ed(d),f=0,h=g.ra.Va(e);f<h;f++){var k=this.Od(a,e,f);b.setAttribute(e,f,k)}};c.prototype.uD=function(a,b){this.vc();if(b.Ac())throw g.i.fa("empty geometry");for(var d=b.description,e=0,f=d.Aa;e<f;e++)for(var h=d.Ed(e),k=g.ra.Va(h),m=0;m<k;m++){var n=b.Uc(h,
m);this.tn(a,h,m,n)}};c.prototype.Od=function(a,b,d){if(this.Ac())throw g.i.fa("This operation was performed on an Empty Geometry.");if(0==b)return 0!=a?0!=d?this.la:this.pa:0!=d?this.na:this.sa;if(d>=g.ra.Va(b))throw g.i.ce();var e=this.description.Pf(b);return 0<=e?(null!=this.ka&&this.ay(this.description.Ae.length-2),this.ka[c.Gg(this.description,a)+this.description.$j(e)-2+d]):g.ra.se(b)};c.prototype.tn=function(a,b,d,e){this.vc();if(d>=g.ra.Va(b))throw g.i.ce();var f=this.description.Pf(b);0>
f&&(this.re(b),f=this.description.Pf(b));0==b?0!=a?0!=d?this.la=e:this.pa=e:0!=d?this.na=e:this.sa=e:(null==this.ka&&this.ay(this.description.Ae.length-2),this.ka[c.Gg(this.description,a)+this.description.$j(f)-2+d]=e)};c.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw g.i.N();a.description=this.description;a.ay(this.description.Ae.length-2);c.gM(this.ka,a.ka,2*(this.description.Ae.length-2));a.sa=this.sa;a.na=this.na;a.pa=this.pa;a.la=this.la;a.vc();this.op(a)};c.prototype.Tg=function(a,
b){var d=new g.Nc;if(this.Ac())return d.Oa(),d;d.oa=this.Od(0,a,b);d.va=d.oa;d.Lk(this.Od(1,a,b));return d};c.prototype.ZI=function(a){this.Ac()?a.Oa():(a.oa=this.Od(0,0,0),a.va=a.oa,a.Lk(this.Od(1,0,0)))};c.prototype.Tw=function(a,b){b.Nf(this.description);b.Cb(this.hc(a));for(var d=1,e=this.description.Aa;d<e;d++)for(var f=this.description.Ed(d),h=g.ra.Va(f),k=0;k<h;k++){var m=this.Uc(a,f,k);b.setAttribute(f,k,m)}};c.prototype.FM=function(a){if(this.description!=a.description||this.sa!=a.sa||this.pa!=
a.pa||this.na!=a.na||this.la!=a.la)return!1;for(var b=0;b<2*(this.description.Ae.length-2);b++)if(this.ka[b]!=a.ka[b])return!1;return!0};c.prototype.BG=function(){return this.sa==this.pa&&this.na==this.la};c.prototype.reverse=function(){var a=this.sa;this.sa=this.pa;this.pa=a;a=this.na;this.na=this.la;this.la=a;a=1;for(var b=this.description.Aa;a<b;a++)for(var d=this.description.kd(a),e=0,f=g.ra.Va(d);e<f;e++){var h=this.Od(0,d,e),k=this.Od(1,d,e);this.tn(0,d,e,k);this.tn(1,d,e,h)}};c.prototype.zr=
function(a,b,d){var e=this.getType(),f=a.getType();switch(e){case 322:if(322==f)return g.yb.OM(this,a,b,d);throw g.i.Qa();default:throw g.i.Qa();}};c.prototype.KM=function(a,b,d,e,f){var h=this.getType(),k=a.getType();switch(h){case 322:if(322==k)return g.yb.Zx(this,a,b,d,e,f);throw g.i.Qa();default:throw g.i.Qa();}};c.prototype.Tx=function(){return null};c.Gg=function(a,b){return b*(a.Ae.length-2)};c.prototype.hc=function(a,b){if(void 0===b)return b=new g.h,this.hc(a,b),b;g.lc.lT(this.sa,this.na,
this.pa,this.la,a,b)};c.prototype.fe=function(){return null};c.prototype.eG=function(){return null};c.prototype.cq=function(){return null};c.prototype.Bi=function(){return null};c.prototype.Pn=function(){return null};c.prototype.kg=function(){return null};c.prototype.Ux=function(a,b){return void 0!==b?this.vx(b)-this.vx(a):this.vx(a)};c.prototype.op=function(){};c.prototype.dl=function(){return null};c.prototype.ah=function(){};c.prototype.Uc=function(){return null};c.prototype.Pe=function(){return null};
c.prototype.vx=function(){return null};c.prototype.NG=function(){return null};c.prototype.tb=function(a,b){if(!b&&0!=this.zr(a,0,!1))return 0;b=1.7976931348623157E308;var d=this.ac(),e=a.fe(d,!1);d.sub(a.hc(e));d=d.length();d<b&&(b=d);d=this.wc();e=a.fe(d,!1);d.sub(a.hc(e));d=d.length();d<b&&(b=d);d=a.ac();e=this.fe(d,!1);d.sub(this.hc(e));d=d.length();d<b&&(b=d);d=a.wc();e=this.fe(d,!1);d.sub(this.hc(e));d=d.length();d<b&&(b=d);return b};c.prototype.mg=function(){return g.pi.gm(this,null)};return c}(g.aa);
g.SC=N})(ja||={});new ja.h;(function(g){(function(l){l[l.Unknown=-1]="Unknown";l[l.Not=0]="Not";l[l.Weak=1]="Weak";l[l.Strong=2]="Strong"})(g.$K||(g.$K={}));(function(l){l[l.DirtyIsKnownSimple=1]="DirtyIsKnownSimple";l[l.IsWeakSimple=2]="IsWeakSimple";l[l.IsStrongSimple=4]="IsStrongSimple";l[l.DirtyOGCFlags=8]="DirtyOGCFlags";l[l.DirtyVerifiedStreams=32]="DirtyVerifiedStreams";l[l.DirtyExactIntervals=64]="DirtyExactIntervals";l[l.DirtyLooseIntervals=128]="DirtyLooseIntervals";l[l.DirtyIntervals=192]=
"DirtyIntervals";l[l.DirtyIsEnvelope=256]="DirtyIsEnvelope";l[l.DirtyLength2D=512]="DirtyLength2D";l[l.DirtyRingAreas2D=1024]="DirtyRingAreas2D";l[l.DirtyCoordinates=1993]="DirtyCoordinates";l[l.DirtyAllInternal=65535]="DirtyAllInternal";l[l.DirtyAll=16777215]="DirtyAll"})(g.MK||(g.MK={}));var N=function(l){function c(){var a=l.call(this)||this;a.Hm=65535;a.wa=0;a.Pg=-1;a.Bb=null;return a}qa(c,l);c.prototype.op=function(){};c.prototype.$x=function(){};c.prototype.iy=function(){};c.prototype.I=function(){return this.wa};
c.prototype.B=function(){return this.Ac()};c.prototype.Ac=function(){return 0==this.wa};c.prototype.ak=function(a){return 0!=(this.Hm&a)};c.prototype.Lf=function(a,b){this.Hm=b?this.Hm|a:this.Hm&~a};c.prototype.mc=function(){this.ak(32)&&this.bN()};c.prototype.wx=function(){if(this.Ac())throw g.i.fa("This operation was performed on an Empty Geometry.");};c.prototype.ve=function(a,b){if(0>a||a>=this.wa)throw g.i.fa("index out of bounds");this.mc();b.Nf(this.description);b.B()&&b.un();for(var d=0;d<
this.description.Aa;d++)for(var e=this.description.Ed(d),f=0,h=g.ra.Va(e);f<h;f++){var k=this.za[d].eg(h*a+f);b.setAttribute(e,f,k)}};c.prototype.Ht=function(a,b){this.mc();for(var d=b.description,e=0;e<d.Aa;e++)for(var f=d.Ed(e),h=g.ra.Va(f),k=0;k<h;k++){var m=b.Uc(f,k);this.setAttribute(f,a,k,m)}};c.prototype.D=function(a,b){if(0>a||a>=this.I())throw g.i.ce();this.mc();this.za[0].tc(2*a,b)};c.prototype.Na=function(a){var b=new g.h;this.D(a,b);return b};c.prototype.Gc=function(a,b){this.za[0].tc(2*
a,b)};c.prototype.Cb=function(a,b,d){if(0>a||a>=this.wa)throw g.i.ce();this.mc();var e=this.za[0];void 0!==d?(e.write(2*a,b),e.write(2*a+1,d)):e.Tt(2*a,b);this.Pc(1993)};c.prototype.Cz=function(){if(void 0>=this.I())throw g.i.ce();this.mc();var a=this.za[0],b=new g.Nd;b.x=a.read(NaN);b.y=a.read(NaN);b.z=this.hasAttribute(1)?this.za[1].eg():g.ra.se(1);return b};c.prototype.dC=function(a){if(0>a||a>=this.I())throw g.i.ce();this.re(1);this.mc();this.Pc(1993);var b=this.za[0];b.write(2*a,(void 0).x);
b.write(2*a+1,(void 0).y);this.za[1].pr(a,(void 0).z)};c.prototype.Uc=function(a,b,d){if(0>b||b>=this.wa)throw g.i.ce();var e=g.ra.Va(a);if(d>=e)throw g.i.ce();this.mc();var f=this.description.Pf(a);return 0<=f?this.za[f].eg(b*e+d):g.ra.se(a)};c.prototype.yF=function(a,b){return this.Uc(a,b)};c.prototype.setAttribute=function(a,b,d,e){if(0>b||b>=this.wa)throw g.i.ce();var f=g.ra.Va(a);if(d>=f)throw g.i.ce();this.re(a);this.mc();a=this.description.Pf(a);this.Pc(1993);this.za[a].pr(b*f+d,e)};c.prototype.ub=
function(a){this.wx();this.re(a);this.mc();return this.za[this.description.Pf(a)]};c.prototype.hn=function(a,b){if(null!=b&&g.ra.Tp(a)!=b.Tp())throw g.i.N();this.re(a);a=this.description.Pf(a);null==this.za&&(this.za=g.Yc.qI(this.description.Aa));this.za[a]=b;this.Pc(16777215)};c.prototype.sn=function(a){var b=null;if(null!=this.za){var d=g.ee.Iw(a,this.description);b=[];for(var e=0,f=a.Aa;e<f;e++)-1!=d[e]&&(b[e]=this.za[d[e]])}this.description=a;this.za=b;this.Pg=-1;this.Pc(16777215)};c.prototype.AD=
function(a){this.wu(!0);a instanceof g.l?this.$.A(a):this.$.Qo(a)};c.prototype.aN=function(a){this.wu(!1);a instanceof g.l?this.$.A(a):this.$.Qo(a)};c.prototype.bn=function(a){this.wu(!0);this.$.copyTo(a)};c.prototype.A=function(a){this.AD(a)};c.prototype.Qo=function(a){this.AD(a)};c.prototype.xc=function(a){this.aN(a)};c.prototype.Tg=function(a,b){var d=new g.Nc;if(this.Ac())return d.Oa(),d;this.wu(!0);return this.$.Tg(a,b)};c.prototype.cc=function(){var a=this.description.cc();if(!this.Ac())for(var b=
this.I(),d=0,e=this.description.Aa;d<e;d++)a=this.za[d].An(a,0,b*g.ra.Va(this.description.Ed(d)));return a};c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c&&this.description.Nb(a.description))||this.Ac()!=a.Ac())return!1;if(this.Ac())return!0;var b=this.I();if(b!=a.I())return!1;for(var d=0;d<this.description.Aa;d++){var e=this.description.kd(d),f=this.ub(e),h=a.ub(e);if(!f.Nb(h,0,b*g.ra.Va(e)))return!1}return!0};c.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw g.i.N();
this.dD(a)};c.prototype.dD=function(a){this.mc();a.description=this.description;a.za=null;var b=this.description.Aa,d=null;if(null!=this.za){d=[];for(var e=0;e<b;e++)null!=this.za[e]&&(d[e]=this.za[e].GB(this.I()*g.ra.Va(this.description.Ed(e))))}null!=this.$?(a.$=this.$.Ia(),this.$.copyTo(a.$)):a.$=null;a.wa=this.wa;a.Hm=this.Hm;a.za=d;try{this.op(a)}catch(f){throw a.Oa(),g.i.fu();}};c.prototype.wD=function(){this.wa=0;this.Pg=-1;this.za=null;this.Pc(16777215)};c.prototype.Pc=function(a){16777215==
a&&(this.Pg=-1,this.$x());this.Hm|=a;this.lM();this.vc()};c.prototype.wu=function(a){this.mc();if(this.ak(192))if(null==this.$?this.$=new g.Fh(this.description):this.$.Nf(this.description),this.B())this.$.Oa();else{this.hy(a);for(var b=1;b<this.description.Aa;b++)for(var d=this.description.Ed(b),e=g.ra.Va(d),f=this.za[b],h=0;h<e;h++){var k=new g.Nc;k.Oa();for(var m=0;m<this.wa;m++){var n=f.eg(m*e+h);k.Zb(n)}this.$.setInterval(d,h,k)}a&&this.Lf(192,!1)}};c.prototype.hy=function(){this.$.Oa();for(var a=
this.za[0],b=new g.h,d=0;d<this.wa;d++)a.tc(2*d,b),this.$.Zb(b)};c.prototype.yp=function(a){a.Oa();for(var b=this.za[0],d=new g.h,e=0;e<this.wa;e++)b.tc(2*e,d),a.Zb(d)};c.prototype.bN=function(){if(this.Pg<this.wa){null==this.za&&(this.za=g.Yc.qI(this.description.Aa));this.Pg=2147483647;for(var a=0;a<this.description.Aa;a++){var b=this.description.Ed(a);if(null!=this.za[a]){var d=g.ra.Va(b),e=g.O.truncate(this.za[a].size/d);e<this.wa&&(e=g.O.truncate(this.Pg>this.wa+5?(5*this.wa+3)/4:this.wa),this.za[a].resize(e*
d,g.ra.se(b)));e<this.Pg&&(this.Pg=e)}else this.za[a]=g.Yc.YE(b,this.wa),this.Pg=this.wa}}this.iy();this.Lf(32,!1)};c.prototype.dm=function(a){if(0>a)throw g.i.N();a!=this.wa&&(this.wa=a,this.Pc(65535))};c.prototype.om=function(a){if(!this.ak(1)){if(!this.ak(2))return 0;if(this.QT>=a)return this.ak(8)?1:2}return-1};c.prototype.Ch=function(a,b){this.QT=b;if(-1==a)this.Lf(1,!0),this.Lf(8,!0);else if(this.Lf(1,!1),this.Lf(8,!0),0==a)this.Lf(2,!1),this.Lf(4,!1);else if(1==a)this.Lf(2,!0),this.Lf(4,!1);
else if(2==a)this.Lf(2,!0),this.Lf(4,!0);else throw g.i.fa("internal error.");};c.prototype.lM=function(){null!=this.Bb&&(this.Bb=null)};c.prototype.kD=function(a,b,d,e){if(0>a||a>=this.wa)throw g.i.fa("index out of bounds");if(0>b||b>=this.wa)throw g.i.fa("index out of bounds");this.mc();e.Nf(this.description);e.B()&&e.un();for(var f=0;f<this.description.Aa;f++)for(var h=this.description.Ed(f),k=0,m=g.ra.Va(h);k<m;k++){var n=this.za[f].eg(m*a+k),p=this.za[f].eg(m*b+k);e.setAttribute(h,k,g.lc.hq(n,
p,d))}};c.prototype.yr=function(a,b){var d=this.za[0].o,e=d[2*a]-d[2*b];a=d[2*a+1]-d[2*b+1];return Math.sqrt(e*e+a*a)};c.prototype.KR=function(a){if(0>a||a>=this.wa)throw g.i.ce();this.mc();var b=new g.Sa;b.Nf(this.description);b.B()&&b.un();for(var d=0;d<this.description.Aa;d++)for(var e=this.description.kd(d),f=0,h=g.ra.Va(e);f<h;f++){var k=this.za[d].eg(h*a+f);b.setAttribute(e,f,k)}return b};c.prototype.Dh=function(a,b){if(0>a||a>=this.wa)throw g.i.ce();if(b.B())throw g.i.N();this.mc();for(var d=
b.description,e=0;e<d.Aa;e++)for(var f=d.kd(e),h=g.ra.Va(f),k=0;k<h;k++){var m=b.Uc(f,k);this.setAttribute(f,a,k,m)}};c.prototype.lu=function(){return null};c.prototype.fj=function(){return null};return c}(g.aa);g.Gx=N})(ja||={});(function(g){var N=function(){function l(){this.ob=this.Zn=null;this.Tm=124234251;this.Rv=!0;this.Qe=-1;this.ob=new g.$c(7);this.Zn=null}l.prototype.Vo=function(c){this.Zn=c};l.prototype.RP=function(){this.Rv=!1};l.prototype.De=function(c){this.ob.De(c)};l.prototype.Pr=function(c){var a=
this.ob.Ce();this.rX(a);this.uX(c,a);return a};l.prototype.MP=function(c){this.ob.jd(c)};l.prototype.addElement=function(c,a){-1==a&&(-1==this.Qe&&(this.Qe=this.Pr(-1)),a=this.Qe);return this.FD(c,0,a)};l.prototype.KD=function(c){-1==this.Qe&&(this.Qe=this.Pr(-1));return this.FD(c,1,this.Qe)};l.prototype.xn=function(c){-1==this.Qe&&(this.Qe=this.Pr(-1));var a=this.Qe,b=this.ob.o;if(-1==a||-1==b[7*a])return c=this.ob.Ll([-1,-1,-1,c,this.gl(),-1,-1]),b=this.ob.o,b[7*a]=c,this.vp(-1,c,a,b),c;var d=-1==
a?-1:b[7*a+2];c=this.ob.Ll([-1,-1,d,c,this.gl(),-1,-1]);b=this.ob.o;b[7*d+1]=c;this.oy(c,b);-1===b[7*c+2]&&(b[7*a]=c);this.vp(-1,c,a,b);return c};l.prototype.zu=function(c,a,b,d){var e=-1;-1==e&&(-1==this.Qe&&(this.Qe=this.Pr(-1)),e=this.Qe);var f=this.ob.o;if(-1==e||-1==f[7*e])return b=this.ob.Ll([-1,-1,-1,b,this.gl(),-1,-1]),f=this.ob.o,f[7*e]=b,this.vp(-1,b,e,f),b;if(d){d=-1!=a?this.Zn.compare(this,b,a):-1;var h=-1!=c?this.Zn.compare(this,b,c):1}else d=-1,h=1;if(0==d||0==h)return f[7*e+3]=0==d?
a:c,-1;(-1!=a&&-1!=c?this.Tm>g.O.bB(this.Tm)>>1:-1!=a)?c=a:d=h;for(a=!0;;){if(0>d)if(h=f[7*c],-1!=h)c=h;else{d=c;b=this.ob.Ll([-1,-1,c,b,this.gl(),-1,-1]);f=this.ob.o;f[7*c]=b;break}else if(h=f[7*c+1],-1!=h)c=h;else{d=f[7*c+6];b=this.ob.Ll([-1,-1,c,b,this.gl(),-1,-1]);f=this.ob.o;f[7*c+1]=b;break}a&&(d*=-1,a=!1)}this.oy(b,f);-1===f[7*b+2]&&(f[7*e]=b);this.vp(d,b,e,f);return b};l.prototype.FF=function(){return this.iR(this.Qe)};l.prototype.vd=function(c,a){a=-1==a?this.Qe:a;this.Rv?this.LP(c,a):this.iY(c,
a)};l.prototype.search=function(c,a){for(a=this.sv(a);-1!=a;){var b=this.Zn.compare(this,c,a);if(0==b)return a;a=0>b?this.ll(a):this.Xp(a)}return-1};l.prototype.IW=function(c){for(var a=this.sv(-1),b=-1;-1!=a;){var d=c.compare(this,a);if(0==d)return a;0>d?a=this.ll(a):(b=a,a=this.Xp(a))}return b};l.prototype.uJ=function(c){for(var a=this.sv(-1),b=-1;-1!=a;){var d=c.compare(this,a);if(0==d)return a;0>d?(b=a,a=this.ll(a)):a=this.Xp(a)}return b};l.prototype.ja=function(c){return this.ob.T(c,3)};l.prototype.ll=
function(c){return this.ob.T(c,0)};l.prototype.Xp=function(c){return this.ob.T(c,1)};l.prototype.getParent=function(c){return this.ob.T(c,2)};l.prototype.lb=function(c){return this.ob.T(c,6)};l.prototype.we=function(c){return this.ob.T(c,5)};l.prototype.rc=function(c){return-1==c?this.kl(this.Qe):this.kl(c)};l.prototype.Fc=function(c){return-1==c?this.Zr(this.Qe):this.Zr(c)};l.prototype.ZR=function(c){return-1==c?this.bG(this.Qe):this.bG(c)};l.prototype.Sj=function(c,a){this.NB(c,a)};l.prototype.sv=
function(c){return-1==c?this.YF(this.Qe):this.YF(c)};l.prototype.clear=function(){this.ob.mj(!1);this.Qe=-1};l.prototype.size=function(c){return-1==c?this.$F(this.Qe):this.$F(c)};l.prototype.KN=function(c,a){for(var b=a[7*c],d=a[7*c+1],e=a[7*c+4];-1!=b||-1!=d;){var f=-1!=b?a[7*b+4]:2147483647;d=-1!=d?a[7*d+4]:2147483647;if(e<=Math.min(f,d))break;f<=d?this.sJ(b,a):this.rJ(c,a);b=a[7*c];d=a[7*c+1]}};l.prototype.oy=function(c,a){if(this.Rv)for(var b=a[7*c+4],d=a[7*c+2];-1!=d&&a[7*d+4]>b;)a[7*d]==c?this.sJ(c,
a):this.rJ(d,a),d=a[7*c+2]};l.prototype.rJ=function(c,a){var b=a[7*c+1];a[7*b+2]=a[7*c+2];a[7*c+2]=b;var d=a[7*b];a[7*c+1]=d;-1!=d&&(a[7*d+2]=c);a[7*b]=c;d=a[7*b+2];-1!=d&&(a[7*d]==c?a[7*d]=b:a[7*d+1]=b)};l.prototype.sJ=function(c,a){var b=a[7*c+2];a[7*c+2]=a[7*b+2];a[7*b+2]=c;var d=a[7*c+1];a[7*b]=d;-1!=d&&(a[7*d+2]=b);a[7*c+1]=b;d=a[7*c+2];-1!=d&&(a[7*d]===b?a[7*d]=c:a[7*d+1]=c)};l.prototype.Pk=function(c,a){this.ob.S(c,2,a)};l.prototype.TB=function(c,a){this.ob.S(c,0,a)};l.prototype.XB=function(c,
a){this.ob.S(c,1,a)};l.prototype.WB=function(c,a){this.ob.S(c,5,a)};l.prototype.ex=function(c,a){this.ob.S(c,6,a)};l.prototype.XJ=function(c,a){this.ob.S(a,0,c)};l.prototype.rX=function(c){this.ob.S(c,4,0)};l.prototype.uX=function(c,a){this.ob.S(a,5,c)};l.prototype.YF=function(c){return-1==c?-1:this.ob.T(c,0)};l.prototype.kl=function(c){return-1==c?-1:this.ob.T(c,1)};l.prototype.Zr=function(c){return-1==c?-1:this.ob.T(c,2)};l.prototype.iR=function(c){return-1==c?-1:this.ob.T(c,3)};l.prototype.$F=
function(c){return-1==c?0:this.ob.T(c,4)};l.prototype.bG=function(c){return this.ob.T(c,5)};l.prototype.Pw=function(){return this.ob.Ll([-1,-1,-1,void 0,this.gl(),-1,-1])};l.prototype.fl=function(c){-1!=c&&this.ob.jd(c)};l.prototype.gl=function(){this.Tm=g.O.bB(this.Tm);return this.Tm&1073741823};l.prototype.FD=function(c,a,b){var d=this.ob.o;if(-1==b||-1==d[7*b])return c=this.ob.Ll([-1,-1,-1,c,this.gl(),-1,-1]),d=this.ob.o,d[7*b]=c,this.vp(-1,c,b,d),c;for(var e=-1==b?-1:d[7*b];;){var f=-1==a?1:this.Zn.compare(this,
c,e);if(0>f)if(f=this.ll(e),-1!=f)e=f;else{a=e;c=this.ob.Ll([-1,-1,e,c,this.gl(),-1,-1]);d=this.ob.o;d[7*e]=c;break}else{if(1==a&&0==f)return d[7*b+3]=e,-1;f=d[7*e+1];if(-1!=f)e=f;else{a=d[7*e+6];c=this.ob.Ll([-1,-1,e,c,this.gl(),-1,-1]);d=this.ob.o;d[7*e+1]=c;break}}}this.oy(c,d);-1===d[7*c+2]&&(d[7*b]=c);this.vp(a,c,b,d);return c};l.prototype.vp=function(c,a,b,d){if(-1!=c){var e=d[7*c+5];d[7*c+5]=a}else e=-1==b?-1:d[7*b+2];d[7*a+5]=e;-1!=e&&(d[7*e+6]=a);d[7*a+6]=c;c==(-1==b?-1:d[7*b+1])&&(d[7*b+
1]=a);-1==c&&(d[7*b+2]=a);d[7*b+4]=(-1==b?0:d[7*b+4])+1};l.prototype.AB=function(c,a){var b=this.ob.o,d=b[7*c+5];c=b[7*c+6];-1!=d?b[7*d+6]=c:b[7*a+1]=c;-1!=c?b[7*c+5]=d:b[7*a+2]=d;b[7*a+4]=-1===a?-1:b[7*a+4]-1};l.prototype.iY=function(c,a){this.AB(c,a);var b=this.ll(c),d=this.Xp(c),e=this.getParent(c),f=c;if(-1!=b&&-1!=d){this.Tm=g.O.bB(this.Tm);var h=1073741823<this.Tm?this.lb(c):this.we(c),k=this.getParent(h)==c;this.ob.gC(c,h,0);this.ob.gC(c,h,1);this.ob.gC(c,h,2);-1!=e?this.ll(e)==c?this.TB(e,
h):this.XB(e,h):this.XJ(h,a);k?(b==h?(this.TB(h,c),this.Pk(d,h)):d==h&&(this.XB(h,c),this.Pk(b,h)),this.Pk(c,h),e=h):(this.Pk(b,h),this.Pk(d,h),e=this.getParent(c),f=h);b=this.ll(c);d=this.Xp(c);-1!=b&&this.Pk(b,c);-1!=d&&this.Pk(d,c)}b=-1!=b?b:d;-1==e?this.XJ(b,a):this.ll(e)==f?this.TB(e,b):this.XB(e,b);-1!=b&&this.Pk(b,e);this.fl(c)};l.prototype.LP=function(c,a){var b=this.ob.o;b[7*c+4]=2147483647;var d=-1,e=-1,f=-1===a?-1:b[7*a],h=f==c;h&&(d=b[7*f],e=b[7*f+1],-1==d&&-1==e)?(this.AB(f,a),this.fl(f),
b[7*a]=-1):(this.KN(c,b),f=b[7*c+2],-1!=f&&(b[7*f]==c?b[7*f]=-1:b[7*f+1]=-1),this.AB(c,a),this.fl(c),h&&(b[7*a]=-1==d||-1!=b[7*d+2]?e:d))};l.prototype.NB=function(c,a){this.ob.S(c,3,a)};return l}();g.Yj=N})(ja||={});(function(g){var N=function(){function l(c,a){void 0!==c&&this.K(c,a)}l.prototype.K=function(c,a){this.oa=c;this.va=a;this.normalize()};l.prototype.isIntersecting=function(c){return this.oa<=c.oa?this.va>=c.oa:c.va>=this.oa};l.prototype.move=function(c){this.B()||(this.oa+=c,this.va+=
c)};l.prototype.normalize=function(){if(!isNaN(this.oa)){if(this.oa>this.va){var c=this.oa;this.oa=this.va;this.va=c}isNaN(this.va)&&this.Oa()}};l.prototype.Oa=function(){this.va=this.oa=NaN};l.prototype.B=function(){return isNaN(this.oa)};l.prototype.Zb=function(c){"number"===typeof c?this.B()?this.va=this.oa=c:this.Lk(c):c.B()||(this.B()?(this.oa=c.oa,this.va=c.va):(this.oa>c.oa&&(this.oa=c.oa),this.va<c.va&&(this.va=c.va),this.oa>this.va&&this.Oa()))};l.prototype.Lk=function(c){c<this.oa?this.oa=
c:c>this.va&&(this.va=c)};l.prototype.contains=function(c){return"number"===typeof c?c>=this.oa&&c<=this.va:c.oa>=this.oa&&c.va<=this.va};l.prototype.Ea=function(c){this.B()||c.B()?this.Oa():(this.oa<c.oa&&(this.oa=c.oa),this.va>c.va&&(this.va=c.va),this.oa>this.va&&this.Oa())};l.prototype.W=function(c){this.B()||(this.oa-=c,this.va+=c,this.va<this.oa&&this.Oa())};l.prototype.xr=function(){return this.B()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.oa)+Math.abs(this.va)+1)};l.prototype.KB=
function(c,a){c>a?(this.oa=a,this.va=c):(this.oa=c,this.va=a)};l.prototype.It=function(c){return g.O.Rk(c,this.oa,this.va)};l.prototype.R=function(){return this.va-this.oa};l.prototype.sf=function(){return.5*(this.oa+this.va)};l.prototype.Nb=function(c){return c==this?!0:c instanceof l?this.B()&&c.B()?!0:this.oa!=c.oa||this.va!=c.va?!1:!0:!1};l.prototype.cc=function(){return g.O.uj(g.O.uj())};return l}();g.Nc=N})(ja||={});(function(g){var N=new g.Nc,l=new g.Nc,c=function(){return function(){this.ne=
null;this.pb=-1;this.sb=new g.yb;this.qA=55555555;this.Tv=this.Vv=!1;this.Uf=new g.Nc;this.Uf.KB(0,0)}}();g.IY=c;var a=function(){function b(d,e,f){this.g=d;this.Hk=NaN;this.NH=this.Kq=0;this.OH=NaN;this.qa=e;this.Nq=10*e;this.PH=this.QH=NaN;this.rg=!1;this.Dm=this.gt=this.Lo=this.Xs=this.Ws=-1;this.gA=f;this.TA=new c;this.YH=new c;g.O.truncate(3*d.fd/2)}b.prototype.mG=function(d,e,f,h){d.ne=null===h?null:h[f[5*e]];d.Tv=null!=d.ne;d.Tv||(h=f[5*e+2],-1!==h&&this.g.mW(f[5*e],f[5*h],d.sb),d.ne=d.sb,
d.Uf.KB(d.sb.sa,d.sb.pa),d.Uf.va+=this.qa,d.sb.rI(),d.Vv=d.sb.la==d.sb.na,d.Vv||(d.qA=(d.sb.pa-d.sb.sa)/(d.sb.la-d.sb.na)))};b.prototype.OO=function(d,e){var f=d.zr(e,this.qa,!0);if(0!=f)return 2==f?this.Qy():this.xi();d.Yp(Ha);d.Tr(Ua);e.Yp(Qa);e.Tr(Ja);za.ma(this.Kq,this.Hk);Ha.qb(Qa)&&this.Hk==Ha.y?0>Ua.compare(Ja)?za.L(Ua):za.L(Ja):Ha.qb(Ja)&&this.Hk==Ha.y?0>Ua.compare(Qa)?za.L(Ua):za.L(Qa):Qa.qb(Ua)&&this.Hk==Qa.y?0>Ha.compare(Ja)?za.L(Ha):za.L(Ja):Ua.qb(Ja)&&this.Hk==Ua.y&&(0>Ha.compare(Qa)?
za.L(Ha):za.L(Qa));return d.Pe(za.y,za.x)<e.Pe(za.y,za.x)?-1:1};b.prototype.MO=function(d,e){if(d.sb.na==e.sb.na&&d.sb.sa==e.sb.sa)return d.sb.la==e.sb.la&&d.sb.pa==e.sb.pa?this.gA?this.Qy():0:this.PE(d,e);if(d.sb.la==e.sb.la&&d.sb.pa==e.sb.pa)return this.OE(d,e);var f=this.OE(d,e);d=this.PE(d,e);return 0>f&&0>d?-1:0<f&&0<d?1:this.xi()};b.prototype.IO=function(d,e){if(d.pa>e.pa){if(e.pa>e.sa&&e.la-e.na<2*this.qa&&d.vi(e.pa,e.la,this.qa))return this.xi()}else if((e.la-e.na)/(e.pa-e.sa)*(d.pa-d.sa)<
this.Nq&&e.vi(d.pa,d.la,this.qa))return this.xi();return 1};b.prototype.JO=function(d,e){if(d.sa<e.sa){if(e.pa>e.sa&&e.la-e.na<2*this.qa&&d.vi(e.pa,e.la,this.qa))return this.xi()}else if((e.la-e.na)/(e.pa-e.sa)*(d.sa-d.pa)<this.Nq&&e.vi(d.sa,d.na,this.qa))return this.xi();return-1};b.prototype.KO=function(d,e){var f=new g.h;f.uc(e.wc(),e.ac());f.ar();f.normalize();var h=new g.h;h.uc(d.ac(),e.ac());var k=new g.h;k.uc(d.wc(),e.ac());h=h.Qh(f);f=k.Qh(f);k=Math.abs(h);var m=Math.abs(f);if(k<m){if(k<this.Nq&&
e.vi(d.sa,d.na,this.qa))return this.xi()}else if(m<this.Nq&&e.vi(d.pa,d.la,this.qa))return this.xi();return 0>h&&0>f?-1:0<h&&0<f?1:this.xi()};b.prototype.NE=function(d,e){return d.na==e.na&&d.sa==e.sa?this.IO(d,e):d.la==e.la&&d.pa==e.pa?this.JO(d,e):this.KO(d,e)};b.prototype.LO=function(d,e){return d.la==e.la&&d.pa==e.pa&&d.na==e.na&&d.sa==e.sa?this.gA?this.Qy():0:this.xi()};b.prototype.OE=function(d,e){var f=1;if(d.sb.na<e.sb.na){f=-1;var h=d;d=e;e=h}d=d.sb;h=e.sb;var k=d.sa-h.sa;e=e.qA*(d.na-h.na);
var m=this.Nq;return k<e-m?-f:k>e+m?f:h.vi(d.sa,d.na,this.qa)?this.xi():k<e?-f:f};b.prototype.PE=function(d,e){var f=1;if(e.sb.la<d.sb.la){f=-1;var h=d;d=e;e=h}d=d.sb;h=e.sb;var k=d.pa-h.sa;e=e.qA*(d.la-h.na);var m=this.Nq;return k<e-m?-f:k>e+m?f:h.vi(d.pa,d.la,this.qa)?this.xi():k<e?-f:f};b.prototype.Qy=function(){this.rg=!0;this.Ni=new g.Md(5,this.Lo,this.gt);return-1};b.prototype.xi=function(){this.rg=!0;this.gA?this.Ni=new g.Md(4,this.Lo,this.gt):this.gt=this.Lo=this.Xs=this.Ws=-1;return-1};b.prototype.NO=
function(d,e,f,h){if(this.rg)return-1;var k=this.OH==this.Hk&&this.NH==this.Kq;if(k&&d==this.Ws)var m=this.PH;else m=NaN,this.Ws=-1;k&&e==this.Xs?k=this.QH:(k=NaN,this.Xs=-1);f.ne.ZI(N);h.ne.ZI(l);if(N.va<l.oa)return-1;if(l.va<N.oa)return 1;this.OH=this.Hk;this.NH=this.Kq;isNaN(m)&&(this.Ws=d,this.PH=m=d=f.ne.Pe(this.Hk,this.Kq));isNaN(k)&&(this.Xs=e,this.QH=k=d=h.ne.Pe(this.Hk,this.Kq));return Math.abs(m-k)<=this.qa?this.OO(f.ne,h.ne):m<k?-1:m>k?1:0};b.prototype.Kr=function(){this.rg=!1};b.prototype.rm=
function(){return this.Ni};b.prototype.$J=function(d,e){this.Hk=d;this.Kq=e;this.gt=this.Lo=this.Xs=this.Ws=-1};b.prototype.compare=function(d,e,f){if(this.rg)return-1;d=d.ja(f);this.Dm=f;return this.RE(e,e,d,d)};b.prototype.RE=function(d,e,f,h){if(this.Lo==e)var k=this.TA;else this.Lo=e,k=this.TA,this.TA.pb=d,this.mG(k,e,this.g.td.o,this.g.We);if(null==m){this.gt=h;var m=this.YH;this.YH.pb=f;this.mG(m,h,this.g.td.o,this.g.We)}if(k.Tv||m.Tv)return this.NO(e,h,k,m);if(k.Uf.va<m.Uf.oa)return-1;if(m.Uf.va<
k.Uf.oa)return 1;d=k.Vv?1:0;d|=m.Vv?2:0;return 0==d?this.MO(k,m):1==d?this.NE(k.sb,m.sb):2==d?-1*this.NE(m.sb,k.sb):this.LO(k.sb,m.sb)};return b}();g.UC=a})(ja||={});(function(g){var N=function(){function l(c,a){this.g=c;this.qa=a;this.rg=!1;this.Lo=-1;this.Uf=new g.Nc;this.Gq=new g.h;this.Gq.Rc();this.ie=new g.yb;this.Dm=-1;this.BA=1.7976931348623157E308}l.prototype.Kr=function(){this.rg=!1;this.BA=1.7976931348623157E308};l.prototype.Dh=function(c){this.Gq.L(c)};l.prototype.compare=function(c,a){return this.SE(a,
c.ja(a))};l.prototype.SE=function(c,a){var b=null!=this.g.bc(a);b||(this.g.ed(a,this.ie),this.Uf.KB(this.ie.sa,this.ie.pa));if(b)throw g.i.fa("not implemented");if(this.Gq.x+this.qa<this.Uf.oa)return-1;if(this.Gq.x-this.qa>this.Uf.va)return 1;if(this.ie.na==this.ie.la)return this.Dm=c,this.rg=!0,0;this.ie.rI();b=this.ie.ac();a=new g.h;a.uc(this.ie.wc(),b);a.ar();var d=new g.h;d.uc(this.Gq,b);b=a.Qh(d);b/=a.length();return b<10*-this.qa?-1:b>10*this.qa?1:this.ie.qs(this.Gq,this.qa)&&(a=Math.abs(b),
a<this.BA&&(this.Dm=c,this.BA=a),this.rg=!0,a<.25*this.qa)?0:0>b?-1:1};return l}();g.aM=N})(ja||={});(function(g){function N(c,a,b,d){b=new Float64Array(c.subarray(b,d));c.set(b,a)}var l=function(){function c(a){this.Pb=this.pk=!1;this.o=null;var b=a;2>b&&(b=2);this.o=new Float64Array(b);this.size=a}c.prototype.rotate=function(a,b,d){if(this.Pb)throw g.i.fa("invalid_call");if(b<a||b>d||a>d)throw g.i.N();a!=b&&d!=b&&(this.ni(a,b-a,1),this.ni(b,d-b,1),this.ni(a,d-a,1))};c.qf=function(a,b){var d=new c(a),
e=d.o;2>a&&(a=2);if(0!==b)for(var f=0;f<a;f++)e[f]=b;return d};c.Bn=function(a){var b=new c(0);b.o=new Float64Array(a.o);b.size=a.size;return b};c.Lr=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.o=new Float64Array(b);d.o.set(a.o.length<=b?a.o:a.o.subarray(0,b),0);return d};c.prototype.Jb=function(a){0>=a||(null==this.o?this.o=new Float64Array(a):a<=this.o.length||(0<this.o.length?(a=new Float64Array(a),a.set(this.o),this.o=a):this.o=new Float64Array(a)))};
c.prototype.read=function(a){return this.o[a]};c.prototype.tc=function(a,b){b.x=this.o[a];b.y=this.o[a+1]};c.prototype.get=function(a){return this.o[a]};c.prototype.write=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.set=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.Tt=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.o[this.size-1]=a};c.prototype.GB=function(a){return c.Lr(this,a)};
c.prototype.eg=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.pk)throw g.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var d=new Float64Array(this.o,0,a);this.o=d}}else{a>this.o.length&&(d=g.O.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Float64Array(d),d.set(this.o),this.o=d);d=this.o;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Bh=function(a){(null==this.o||
a>this.o.length)&&this.resize(a);if(this.pk)throw g.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.pr=function(a,b){this.write(a,b)};c.prototype.An=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=g.O.uj(this.read(b));return a};c.prototype.Nb=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,
b,d,e,f){if(this.Pb)throw g.i.Hb();if(!e&&(1>f||0!=d%f))throw g.i.N();var h=this.size;this.resize(h+d);if(e)this.o.set(a.o.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=f){e-=f;for(var m=0;m<f;m++)this.o[h+k+m]=a.o[b+e+m]}}};c.prototype.Mn=function(a,b,d,e,f,h,k){if(this.Pb)throw g.i.Hb();if(!f&&(1>h||0!=e%h))throw g.i.N();var m=this.size-k;m<e&&this.resize(this.size+e-m);N(this.o,a+e,a,a+(k-a));this.o==b.o&&a<d&&(d+=e);if(f)this.o.set(b.o.subarray(d,d+e),a);else for(f=e,k=0;k<e;k+=h)for(f-=h,m=
0;m<h;m++)this.o[a+k+m]=b.o[d+f+m]};c.prototype.Iz=function(a,b,d,e,f,h){if(this.Pb)throw g.i.Hb();0>h&&(h=this.size);this.size+2*e>this.o.length?this.resize(this.size+2*e):this.size+=2*e;N(this.o,a+2*e,a,a+(h-a));if(f)for(f=0;f<e;f++)h=b[d++],this.o[a++]=h.x,this.o[a++]=h.y;else{f=0;for(var k=e-1;f<e;++f)h=b[d+k],this.o[a++]=h.x,this.o[a++]=h.y,k--}};c.prototype.Ln=function(a,b,d,e){if(this.Pb)throw g.i.Hb();e-=a;N(this.o,a+e,a,a+e);for(e=0;e<d;e++)this.o[a+e]=b};c.prototype.vj=function(a,b,d){if(this.Pb)throw g.i.Hb();
N(this.o,a+2,a,a+(d-a));this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.Ut=function(a,b,d,e,f,h){if(0>a||0>b||0>e)throw g.i.N();if(!f&&(0>=h||0!=b%h))throw g.i.N();if(d.size<e+b)throw g.i.N();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.Ar(a,b,e,f,h);else if(f)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e++;else if(e=e+b-h,1==h)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e--;else for(f=0,b=g.O.truncate(b/h);f<b;f++){for(var k=0;k<h;k++)this.o[a+k]=d.o[e+k];a+=h;e-=h}};c.prototype.En=function(a,b,d){if(this.Pb)throw g.i.Hb();
if(a+b>this.size)throw g.i.Hb();0<d-(a+b)&&N(this.o,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.ni=function(a,b,d){if(this.Pb)throw g.i.Hb();if(1>d||0!=b%d)throw g.i.Hb();for(var e=b>>1,f=0;f<e;f+=d){b-=d;for(var h=0;h<d;h++){var k=this.o[a+f+h];this.o[a+f+h]=this.o[a+b+h];this.o[a+b+h]=k}}};c.prototype.Wj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw g.i.N();for(var e=b;e<b+d;e++)this.o[e]=a};c.prototype.Ar=function(a,b,d,e,f){if(!e||a!=d)if(this.o.set(this.o.subarray(d,d+b),a),!e)for(d=
a,a=a+b-f,e=0,b=g.O.truncate(b/2);e<b;e++){for(var h=0;h<f;h++){var k=this.o[d+h];this.o[d+h]=this.o[a+h];this.o[a+h]=k}d+=f;a-=f}};c.prototype.vC=function(a,b,d,e,f){if(0>a||0>b||0>e)throw g.i.N();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),f||(a+=b-1<<1),f=f?2:-2,b+=e;e<b;e++)this.o[a]=d[e].x,this.o[a+1]=d[e].y,a+=f};c.prototype.uC=function(a,b,d){if(0>a||0>b)throw g.i.N();if(0!=b){this.size<(b<<1)+a&&this.resize((b<<1)+a);b+=0;for(var e=0;e<b;e++)this.o[a]=d[e][0],this.o[a+1]=d[e][1],
a+=2}};c.prototype.Vw=function(a,b,d,e,f){if(0>a||0>b||0>e||this.size<b+a)throw g.i.N();if(f)for(f=0;f<b;f++)d[e+f]=this.o[a+f];else for(e=e+b-1;a<b;a++)d[e]=this.o[a],e--};c.prototype.uB=function(a,b,d){if(0>a||0>b||this.size<(b>>1)+a)throw g.i.N();if(0!=b){b=0+b;for(var e=0;e<b;e++)d[e][0]=this.o[a],d[e][1]=this.o[a+1],a+=2}};c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)};c.prototype.ix=function(){this.pk=this.Pb=!0};c.prototype.Vd=function(a,b,d){Array.prototype.sort.call(this.o.subarray(a,
b),d)};c.prototype.Tp=function(){return 1};return c}();g.be=l})(ja||={});(function(g){function N(c,a,b,d){b=new Int32Array(c.subarray(b,d));c.set(b,a)}g.rY=function(){return function(){this.random=1973}}();var l=function(){function c(a){this.Pb=this.pk=!1;this.o=null;var b=a;2>b&&(b=2);this.o=new Int32Array(b);this.size=a}c.prototype.rotate=function(a,b,d){if(this.Pb)throw g.i.fa("invalid_call");if(b<a||b>d||a>d)throw g.i.N();a!=b&&d!=b&&(this.ni(a,b-a,1),this.ni(b,d-b,1),this.ni(a,d-a,1))};c.qf=
function(a,b){var d=new c(a),e=d.o;2>a&&(a=2);if(0!==b)for(var f=0;f<a;f++)e[f]=b;return d};c.Bn=function(a){var b=new c(0);b.o=new Int32Array(a.o);b.size=a.size;return b};c.Lr=function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.o=new Int32Array(b);d.o.set(a.o.length<=b?a.o:a.o.subarray(0,b),0);return d};c.prototype.Jb=function(a){0>=a||(null==this.o?this.o=new Int32Array(a):a<=this.o.length||(0<this.o.length?(a=new Int32Array(a),a.set(this.o),this.o=a):this.o=new Int32Array(a)))};
c.prototype.read=function(a){return this.o[a]};c.prototype.tc=function(a,b){b.x=this.o[a];b.y=this.o[a+1]};c.prototype.get=function(a){return this.o[a]};c.prototype.write=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.set=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.Tt=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.o[this.size-1]=a};c.prototype.GB=function(a){return c.Lr(this,a)};
c.prototype.eg=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.pk)throw g.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var d=new Int32Array(this.o,0,a);this.o=d}}else{a>this.o.length&&(d=g.O.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Int32Array(d),d.set(this.o),this.o=d);d=this.o;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Bh=function(a){(null==this.o||
a>this.o.length)&&this.resize(a);if(this.pk)throw g.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.pr=function(a,b){this.write(a,b)};c.prototype.An=function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=g.O.Th(this.read(b),a);return a};c.prototype.Nb=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,
b,d,e,f){if(this.Pb)throw g.i.Hb();if(!e&&(1>f||0!=d%f))throw g.i.N();var h=this.size;this.resize(h+d);if(e)this.o.set(a.o.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=f){e-=f;for(var m=0;m<f;m++)this.o[h+k+m]=a.o[b+e+m]}}};c.prototype.Mn=function(a,b,d,e,f,h,k){if(this.Pb)throw g.i.Hb();if(!f&&(1>h||0!=e%h))throw g.i.N();N(this.o,a+e,a,a+(k-a));this.o==b.o&&a<d&&(d+=e);if(f)this.o.set(b.o.subarray(d,d+e),a);else for(f=e,k=0;k<e;k+=h){f-=h;for(var m=0;m<h;m++)this.o[a+k+m]=b.o[d+f+m]}};c.prototype.Iz=
function(a,b,d,e,f,h){if(this.Pb)throw g.i.Hb();0>h&&(h=this.size);this.size+2*e>this.o.length?this.resize(this.size+2*e):this.size+=2*e;N(this.o,a+2*e,a,a+(h-a));if(f)for(f=0;f<e;f++)h=b[d++],this.o[a++]=h.x,this.o[a++]=h.y;else{f=0;for(var k=e-1;f<e;++f)h=b[d+k],this.o[a++]=h.x,this.o[a++]=h.y,k--}};c.prototype.Ln=function(a,b,d,e){if(this.Pb)throw g.i.Hb();e-=a;N(this.o,a+e,a,a+e);for(e=0;e<d;e++)this.o[a+e]=b};c.prototype.vj=function(a,b,d){if(this.Pb)throw g.i.Hb();N(this.o,a+2,a,a+(d-a));this.o[a]=
b.x;this.o[a+1]=b.y};c.prototype.Ut=function(a,b,d,e,f,h){if(0>a||0>b||0>e)throw g.i.N();if(!f&&(0>=h||0!=b%h))throw g.i.N();if(d.size<e+b)throw g.i.N();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.Ar(a,b,e,f,h);else if(f)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e++;else if(e=e+b-h,1==h)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e--;else for(f=0,b=g.O.truncate(b/h);f<b;f++){for(var k=0;k<h;k++)this.o[a+k]=d.o[e+k];a+=h;e-=h}};c.prototype.En=function(a,b,d){if(this.Pb)throw g.i.Hb();if(a+b>this.size)throw g.i.Hb();
0<d-(a+b)&&N(this.o,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.ni=function(a,b,d){if(this.Pb)throw g.i.Hb();if(1>d||0!=b%d)throw g.i.Hb();for(var e=b>>1,f=0;f<e;f+=d){b-=d;for(var h=0;h<d;h++){var k=this.o[a+f+h];this.o[a+f+h]=this.o[a+b+h];this.o[a+b+h]=k}}};c.prototype.Wj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw g.i.N();for(var e=b;e<b+d;e++)this.o[e]=a};c.prototype.Ar=function(a,b,d,e,f){if(!e||a!=d)if(this.o.set(this.o.subarray(d,d+b),a),!e)for(d=a,a=a+b-f,e=0,b=g.O.truncate(b/
2);e<b;e++){for(var h=0;h<f;h++){var k=this.o[d+h];this.o[d+h]=this.o[a+h];this.o[a+h]=k}d+=f;a-=f}};c.prototype.vC=function(a,b,d,e,f){if(0>a||0>b||0>e)throw g.i.N();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<1)+a),f||(a+=b-1<<1),f=f?2:-2,b+=e;e<b;e++)this.o[a]=d[e].x,this.o[a+1]=d[e].y,a+=f};c.prototype.Vw=function(a,b,d,e,f){if(0>a||0>b||0>e||this.size<b+a)throw g.i.N();if(f)for(f=0;f<b;f++)d[e+f]=this.o[a+f];else for(e=e+b-1;a<b;a++)d[e]=this.o[a],e--};c.prototype.clear=function(a){a?this.resize(0):
this.Bh(0)};c.prototype.ix=function(){this.pk=this.Pb=!0};c.prototype.Vd=function(a,b,d){10>b-a?c.rG(this.o,a,b,d):c.qB(this.o,a,b-1,d)};c.prototype.Tp=function(){return 2};c.prototype.Fc=function(){return this.o[this.size-1]};c.prototype.If=function(){this.resize(this.size-1)};c.prototype.bX=function(a){this.o[this.size-1]=a};c.prototype.SV=function(a){a<this.size-1&&(this.o[a]=this.o[this.size-1]);this.resize(this.size-1)};c.prototype.lF=function(a){for(var b=0,d=this.size;b<d;b++)if(this.o[b]==
a)return b;return-1};c.prototype.hG=function(a){return 0<=this.lF(a)};c.rG=function(a,b,d,e){for(var f=b;f<d;f++){for(var h=a[f],k=f-1;k>=b&&0<e(a[k],h);)a[k+1]=a[k],k--;a[k+1]=h}};c.tx=function(a,b,d){var e=a[d];a[d]=a[b];a[b]=e};c.qB=function(a,b,d,e){if(!(b>=d))for(;;){if(9>d-b){c.rG(a,b,d+1,e);break}var f=a[b];c.tx(a,b,d);for(var h=b,k=b;k<d;k++)0>=e(a[k],f)&&(c.tx(a,h,k),h+=1);c.tx(a,h,d);h-b<d-h?(c.qB(a,b,h-1,e),b=h+1):(c.qB(a,h+1,d,e),d=h-1)}};return c}();g.ia=l})(ja||={});(function(g){function N(c,
a,b,d){b=new Int8Array(c.subarray(b,d));c.set(b,a)}var l=function(){function c(a){this.o=null;var b=a;2>b&&(b=2);this.o=new Int8Array(b);this.size=a}c.prototype.rotate=function(a,b,d){if(this.Pb)throw g.i.fa("invalid_call");if(b<a||b>d||a>d)throw g.i.N();a!=b&&d!=b&&(this.ni(a,b-a,1),this.ni(b,d-b,1),this.ni(a,d-a,1))};c.qf=function(a,b){var d=new c(a),e=d.o;2>a&&(a=2);if(0!==b)for(var f=0;f<a;f++)e[f]=b;return d};c.Bn=function(a){var b=new c(0);b.o=new Int8Array(a.o);b.size=a.size;return b};c.Lr=
function(a,b){var d=new c(0);d.size=a.size;d.size>b&&(d.size=b);b=d.size;2>b&&(b=2);d.o=new Int8Array(b);d.o.set(a.o.length<=b?a.o:a.o.subarray(0,b),0);return d};c.prototype.Jb=function(a){0>=a||(null==this.o?this.o=new Int8Array(a):a<=this.o.length||(0<this.o.length?(a=new Int8Array(a),a.set(this.o),this.o=a):this.o=new Int8Array(a)))};c.prototype.read=function(a){return this.o[a]};c.prototype.tc=function(a,b){b.x=this.o[a];b.y=this.o[a+1]};c.prototype.get=function(a){return this.o[a]};c.prototype.write=
function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.set=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b};c.prototype.Tt=function(a,b){if(this.Pb)throw g.i.Hb();this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.add=function(a){this.resize(this.size+1);this.o[this.size-1]=a};c.prototype.GB=function(a){return c.Lr(this,a)};c.prototype.eg=function(a){return this.read(a)};c.prototype.resize=function(a,b){void 0===b&&(b=0);if(this.pk)throw g.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");
if(a<=this.size){if(30<this.o.length&&5*a/4<this.o.length){var d=new Int8Array(this.o,0,a);this.o=d}}else{a>this.o.length&&(d=g.O.truncate(64>a?Math.max(2*a,4):5*a/4),d=new Int8Array(d),d.set(this.o),this.o=d);d=this.o;for(var e=this.size;e<a;e++)d[e]=b}this.size=a};c.prototype.Bh=function(a){(null==this.o||a>this.o.length)&&this.resize(a);if(this.pk)throw g.i.fa("invalid call. Attribute Stream is locked and cannot be resized.");this.size=a};c.prototype.pr=function(a,b){this.write(a,b)};c.prototype.An=
function(a,b,d){for(var e=this.size;b<e&&b<d;b++)a=g.O.Th(this.read(b),a);return a};c.prototype.Nb=function(a,b,d){if(null==a||!(a instanceof c))return!1;var e=this.size,f=a.size;if(d>e||d>f&&e!=f)return!1;for(d>e&&(d=e);b<d;b++)if(this.read(b)!=a.read(b))return!1;return!0};c.prototype.addRange=function(a,b,d,e,f){if(this.Pb)throw g.i.Hb();if(!e&&(1>f||0!=d%f))throw g.i.N();var h=this.size;this.resize(h+d);if(e)this.o.set(a.o.subarray(b,b+d),h);else{e=d;for(var k=0;k<d;k+=f){e-=f;for(var m=0;m<f;m++)this.o[h+
k+m]=a.o[b+e+m]}}};c.prototype.Mn=function(a,b,d,e,f,h,k){if(this.Pb)throw g.i.Hb();if(!f&&(1>h||0!=e%h))throw g.i.N();N(this.o,a+e,a,a+(k-a));this.o==b.o&&a<d&&(d+=e);if(f)this.o.set(b.o.subarray(d,d+e),a);else for(f=e,k=0;k<e;k+=h){f-=h;for(var m=0;m<h;m++)this.o[a+k+m]=b.o[d+f+m]}};c.prototype.Ln=function(a,b,d,e){if(this.Pb)throw g.i.Hb();e-=a;N(this.o,a+e,a,a+e);for(e=0;e<d;e++)this.o[a+e]=b};c.prototype.Iz=function(a,b,d,e,f,h){if(this.Pb)throw g.i.Hb();0>h&&(h=this.size);this.size+2*e>this.o.length?
this.resize(this.size+2*e):this.size+=2*e;N(this.o,a+2*e,a,a+(h-a));if(f)for(f=0;f<e;f++)h=b[d++],this.o[a++]=h.x,this.o[a++]=h.y;else{f=0;for(var k=e-1;f<e;++f)h=b[d+k],this.o[a++]=h.x,this.o[a++]=h.y,k--}};c.prototype.vj=function(a,b,d){if(this.Pb)throw g.i.Hb();N(this.o,a+2,a,a+(d-a));this.o[a]=b.x;this.o[a+1]=b.y};c.prototype.Ut=function(a,b,d,e,f,h){if(0>a||0>b||0>e)throw g.i.N();if(!f&&(0>=h||0!=b%h))throw g.i.N();if(d.size<e+b)throw g.i.N();if(0!=b)if(this.size<b+a&&this.resize(b+a),d==this)this.Ar(a,
b,e,f,h);else if(f)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e++;else if(e=e+b-h,1==h)for(f=0;f<b;f++)this.o[a]=d.o[e],a++,e--;else for(f=0,b=g.O.truncate(b/h);f<b;f++){for(var k=0;k<h;k++)this.o[a+k]=d.o[e+k];a+=h;e-=h}};c.prototype.En=function(a,b,d){if(this.Pb)throw g.i.Hb();if(a+b>this.size)throw g.i.Hb();0<d-(a+b)&&N(this.o,a,a+b,a+(d-(a+b))+b);this.size-=b};c.prototype.ni=function(a,b,d){if(this.Pb)throw g.i.Hb();if(1>d||0!=b%d)throw g.i.Hb();for(var e=b>>1,f=0;f<e;f+=d){b-=d;for(var h=0;h<d;h++){var k=
this.o[a+f+h];this.o[a+f+h]=this.o[a+b+h];this.o[a+b+h]=k}}};c.prototype.Wj=function(a,b,d){if(0>b||0>d||0>b||d+b>this.size)throw g.i.N();for(var e=b;e<b+d;e++)this.o[e]=a};c.prototype.Ar=function(a,b,d,e,f){if(!e||a!=d)if(this.o.set(this.o.subarray(d,d+b),a),!e)for(d=a,a=a+b-f,e=0,b=g.O.truncate(b/2);e<b;e++){for(var h=0;h<f;h++){var k=this.o[d+h];this.o[d+h]=this.o[a+h];this.o[a+h]=k}d+=f;a-=f}};c.prototype.vC=function(a,b,d,e,f){if(0>a||0>b||0>e)throw g.i.N();if(0!=b)for(this.size<(b<<1)+a&&this.resize((b<<
1)+a),f||(a+=b-1<<1),f=f?2:-2,b+=e;e<b;e++)this.o[a]=d[e].x,this.o[a+1]=d[e].y,a+=f};c.prototype.Vw=function(a,b,d,e,f){if(0>a||0>b||0>e||this.size<b+a)throw g.i.N();if(f)for(f=0;f<b;f++)d[e+f]=this.o[a+f];else for(e=e+b-1;a<b;a++)d[e]=this.o[a],e--};c.prototype.clear=function(a){a?this.resize(0):this.Bh(0)};c.prototype.ix=function(){this.pk=this.Pb=!0};c.prototype.Vd=function(a,b,d){b=this.o.subarray(a,b);Array.prototype.sort.call(b,d);this.o.set(b,a)};c.prototype.zJ=function(a,b){if(this.Pb)throw g.i.fa("invalid call. Attribute Stream is read only.");
this.o[a]|=b};c.prototype.KE=function(a,b){if(this.Pb)throw g.i.fa("invalid call. Attribute Stream is read only.");this.o[a]&=~b};c.prototype.Tp=function(){return 1};return c}();g.pn=l})(ja||={});(function(g){g.Yc=function(){function N(){}N.Mr=function(l,c){return g.pn.qf(l,c)};N.Dn=function(l,c){return g.be.qf(l,c)};N.pP=function(l,c,a){switch(l){case 1:l=g.be.qf(c,a);break;case 2:l=g.ia.qf(c,a);break;case 4:l=g.pn.qf(c,a);break;default:throw g.i.Qa();}return l};N.YE=function(l,c){return N.pP(g.ra.Tp(l),
c*g.ra.Va(l),g.ra.se(l))};N.Oh=function(l,c){return g.ia.qf(l,c)};N.qI=function(l){var c,a=[];for(c=0;c<l;c++)a.push(null);return a};return N}()})(ja||={});(function(g){g.ga=function(){return function(N){void 0===N&&(N=0);this.u=N}}()})(ja||={});(function(g){g.NL=function(){function N(){}N.bind=function(l){g.Sc=l.PeDefs;g.pf=l.PeFactory;g.NC=l.PeVertcs;g.ej=l.PeCSTransformations;g.MC=l.PeGTTransformations;g.LL=l.PeGeogtran;g.KL=l.PeFactoryCodechange;g.LC=l.PeGCSExtent;g.Cg=l.PePCSInfo;g.ML=l.PeHorizon;
g.JL=l.PeCoordsys;g.lp=l.PeGTlistExtended;g.lp.PE_GTLIST_OPTS_USE_DEFAULT=128;g.pf.initialize(null);g.Mx=l.PeGTlistExtendedEntry;g.pf.fromString(g.Sc.PE_TYPE_UNIT,'UNIT["Meter",1.0]')};return N}();g.pf=null;g.NC=null;g.JL=null;g.ML=null;g.Cg=null;g.lp=null;g.Mx=null;g.LC=null;g.KL=null;g.LL=null;g.Sc=null;g.MC=null;g.ej=null})(ja||={});(function(g){var N=function(){function l(){}l.Mb=function(c,a){return 0<=a?l.P(c):-l.P(c)};l.P=function(c){return 0>c?-c:c};l.ti=function(c){return 3.552713678800501E-15>
c};l.KC=function(c,a,b){return l.P(c-a)<=b*(1+(l.P(c)+l.P(a))/2)};l.Y=function(c,a){return l.KC(c,a,3.552713678800501E-15)};l.FL=function(c){return 3.552713678800501E-15>=l.P(c)};l.Cd=function(c){return l.FL(c)};return l}();g.s=N;g.F=function(){function l(){}l.gp=function(c,a){c=N.P(c);a=N.P(a);var b=0;0!=c+a&&(c>a?(b=a/c,b=c*Math.sqrt(1+b*b)):(b=c/a,b=a*Math.sqrt(1+b*b)));return b};l.Wq=function(c,a,b,d,e){for(var f=[0,0,0],h=[0,0,0],k=0;2>=k;k++)a[k]-=c[k],b[k]-=a[k];b=f[1]*h[2]-f[2]*h[1];a=f[2]*
h[0]-f[0]*h[2];f=f[0]*h[1]-f[1]*h[0];c=-1*(b*c[0]+a*c[1]+f*c[2]);d[0]=b;d[1]=a;d[2]=f;d[3]=c;h=l.on(d);d[0]/=h;d[1]/=h;d[2]/=h;d[3]/=h;0!=e&&(h=N.Cd(f)?N.Cd(c)?N.Mb(1,a):-N.Mb(1,c):N.Mb(1,f),h*=N.Mb(1,e),d[0]*=h,d[1]*=h,d[2]*=h,d[3]*=h)};l.zx=function(c,a,b){b[0]=c[1]*a[2]-a[1]*c[2];b[1]=c[2]*a[0]-a[2]*c[0];b[2]=c[0]*a[1]-a[0]*c[1]};l.St=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]};l.on=function(c){return l.gp(l.gp(c[0],c[1]),c[2])};l.cl=function(c,a,b,d,e,f,h,k){c=l.n(c,a,b);var m=Math.cos(b);
f.u=(c+e)*m*Math.cos(d);h.u=(c+e)*m*Math.sin(d);k.u=(c*(1-a)+e)*Math.sin(b)};l.jO=function(c,a,b,d,e,f,h){var k=l.gp(a,b),m=1*Math.sqrt(1-c),n=m/1;if(N.Y(k,0))f.u=0,e.u=N.Mb(1.570796326794897,d),h.u=N.P(d)-m;else{f.u=Math.atan2(b,a);b=Math.atan2(1*d,m*k);f=Math.cos(b);var p=Math.sin(b);a=m*c/(1-c);c*=1;b=Math.atan2(d+a*p*p*p,k-c*f*f*f);3.141592653589793<N.P(b)&&(b=N.Mb(3.141592653589793,b)-b);b=Math.atan(n*Math.tan(b));p=Math.sin(b);f=Math.cos(b);e.u=Math.atan2(d+a*p*p*p,k-c*f*f*f);1.570796326794897<
N.P(e.u)&&(e.u=N.Mb(3.141592653589793,e.u)-e.u);b=Math.atan(n*Math.tan(e.u));p=Math.sin(b);f=Math.cos(b);h.u=(d-m*p)*Math.sin(e.u)+(k-1*f)*Math.cos(e.u)}};l.n=function(c,a,b){b=Math.sin(b);return c/Math.sqrt(1-a*b*b)};l.ot=function(c,a){return Math.atan2(Math.sin(a)*(1-c),Math.cos(a))};l.Qj=function(c,a){return Math.atan2(Math.sin(a),Math.cos(a)*(1-c))};l.Rq=function(c,a){if(N.ti(c)||0==a||N.Y(N.P(a),1.570796326794897))return a;if(.006884661117170036>c){var b=Math.sqrt(1-c),d=(1-b)/(1+b),e=d*d,f=
d*e,h=d*f,k=d*h,m=d*k,n=d*m,p=1.572916666666667*f-3.2578125*k+4.295068359375*n;c=2.142578125*h-6.071484375*m;b=3.129296875*k-11.249837239583334*n;var r=4.775276692708333*m,t=7.958636765252976*n,x=Math.cos(2*a);return a+Math.sin(2*a)*(1.5*d-.84375*f+.525390625*k-.2688395182291667*n-p+b-t+x*(2*(1.3125*e-1.71875*h+1.650146484375*m)-4*c+6*r+x*(4*p-12*b+24*t+x*(8*c-32*r+x*(16*b-80*t+x*(32*r+64*x*t))))))}b=1-c;d=c/2;e=N.P(a);f=e*l.Zu(c)/(1.570796326794897*b);h=9999;m=e;for(e=0;1E-16<h&&50>e;e++)n=l.w(c,
m),k=(l.kG(m,c)-d*Math.sin(2*m)/n)/b-f,n=1/(n*n*n),p=k/n,k=m-p,h=N.P(p),m=k;return 0<=a?m:-m};l.qW=function(c,a){return N.ti(a)?c:c*l.Zu(a)/1.570796326794897};l.ba=function(c){c=l.pF(c,6.283185307179586);return 0>c?c+6.283185307179586:3.141592653589793>N.P(c)||N.Y(N.P(c),3.141592653589793)?c:c-6.283185307179586};l.pF=function(c,a){return c-Math.floor(c/a)*a};l.Ah=function(c,a){if(.006884661117170036>a){a=Math.sqrt(1-a);a=(1-a)/(1+a);var b=a*a,d=b*b;return c/(1+a)*(1+.25*b+.015625*d+.00390625*b*d)*
1.570796326794897}return c*l.Zu(a)};l.Vq=function(c,a){var b=N.Mb(1,Math.sin(a));a=N.P(l.pF(a,3.141592653589793));a=1.570796326794897>=a?a:3.141592653589793-a;return(N.Y(a,1.570796326794897)?a:Math.atan(Math.sqrt(1-c)*Math.tan(a)))*b};l.q=function(c,a,b){if(.006884661117170036>a){a=Math.sqrt(1-a);a=(1-a)/(1+a);var d=a*a,e=a*d,f=a*e,h=a*f,k=a*h,m=a*k,n=-.7291666666666666*e+.2278645833333333*h+.03987630208333334*m,p=.615234375*f-.21533203125*k,r=-.54140625*h+.20302734375*m,t=.48876953125*k,x=-.4488699776785715*
m,K=Math.cos(2*b);return c/(1+a)*((1+.25*d+.015625*f+.00390625*k)*b+Math.sin(2*b)*(-1.5*a+.1875*e+.0234375*h+.00732421875*m-n+r-x+K*(2*(.9375*d-.234375*f-.03662109375*k)-4*p+6*t+K*(4*n-12*r+24*x+K*(8*p-32*t+K*(16*r-80*x+K*(32*t+64*K*x)))))))}return c*(l.kG(b,a)-.5*a*Math.sin(2*b)/l.w(a,b))};l.w=function(c,a){a=Math.sin(a);return Math.sqrt(1-c*a*a)};l.Zu=function(c){return N.KC(c,1,2.220446049250313E-16)?1:1>c?l.Xw(0,1-c)-c/3*l.Uw(0,1-c):NaN};l.kG=function(c,a){var b=N.Mb(1,c);c=N.P(c);var d=Math.floor(c/
1.570796326794897);if(1<a)a=0==c?0:NaN;else if(N.Cd(d))c=l.sin(c),a=c*l.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*l.Uw(1-c*c,1-a*c*c);else{var e=g.O.truncate(d%2),f=l.Zu(a);0<e?(c=1.570796326794897*(d+1)-c,c=Math.sin(c),a=c*l.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*l.Uw(1-c*c,1-a*c*c),a=f*(d+1)-a):(c-=1.570796326794897*d,c=Math.sin(c),a=c*l.Xw(1-c*c,1-a*c*c)-a/3*c*c*c*l.Uw(1-c*c,1-a*c*c),a=f*d+a)}return a*b};l.sin=function(c){c=l.ba(c);var a=N.Mb(1,c);c=N.P(c);return N.Y(c,3.141592653589793)?0:N.Y(c,1.570796326794897)?1*a:
Math.sin(c)*a};l.Uw=function(c,a){var b=c,d=a,e=1;a=0;c=1;for(var f,h,k,m;;){f=.2*(b+d+3*e);h=(f-b)/f;k=(f-d)/f;m=(f-e)/f;if(1E-4>N.P(h)&&1E-4>N.P(k)&&1E-4>N.P(m))break;m=Math.sqrt(d);f=Math.sqrt(e);m=Math.sqrt(b)*(m+f)+m*f;a+=c/(f*(e+m));c*=.25;b=.25*(b+m);d=.25*(d+m);e=.25*(e+m)}b=h*k;e=m*m;d=b-e;e=b-6*e;h=e+d+d;return 3*a+c*(1+e*(-.2142857142857143+.10227272727272728*e-.1730769230769231*m*h)+m*(.1666666666666667*h+m*(-.4090909090909091*d+.1153846153846154*m*b)))/(f*Math.sqrt(f))};l.Xw=function(c,
a){for(var b,d,e,f,h=1;;h=.25*(h+b)){b=(c+a+h)/3;d=2-(b+c)/b;e=2-(b+a)/b;f=2-(b+h)/b;if(1E-4>N.P(d)&&1E-4>N.P(e)&&1E-4>N.P(f))break;b=Math.sqrt(a);d=Math.sqrt(h);b=Math.sqrt(c)*(b+d)+b*d;c=.25*(c+b);a=.25*(a+b)}c=d*e-f*f;a=d*e*f;return(1+(.04166666666666666*c-.1-.06818181818181818*a)*c+.07142857142857142*a)/Math.sqrt(b)};l.Qw=function(c,a){if(N.ti(c)||0==a||N.Y(N.P(a),1.570796326794897))return a;if(.006884661117170036>c){var b=c*c,d=c*b,e=c*d,f=c*e,h=c*f,k=c*h,m=-(.02708333333333333*d+.03430059523809524*
e+.03149181547619048*f+.02634359154541446*h+.02156896735835538*k),n=.007669890873015873*e+.01299603174603175*f+.0148051353064374*h+.01454454953803912*k,p=-(.002275545634920635*f+.004830845032667949*h+.006558395368616723*k),r=6.957236677288761E-4*h+.001775193002406544*k,t=-(2.17324089394402E-4*k),x=Math.cos(2*a);return a+Math.sin(2*a)*(-(.5*c+.2083333333333333*b+.09375*d+.04878472222222222*e+.02916666666666667*f+.01938905423280423*h+.01388255931712963*k)-m+p-t+x*(2*(.1041666666666667*b+.0875*d+.06050347222222222*
e+.04151785714285714*f+.02958958540013228*h+.02203667534722222*k)-4*n+6*r+x*(4*m-12*p+24*t+x*(8*n-32*r+x*(16*p-80*t+x*(32*r+64*x*t))))))}0==a||N.Y(N.P(a),1.570796326794897)?b=a:(d=Math.sqrt(c),e=d*Math.sin(a),b=Math.tan(.7853981633974483+a/2)*Math.pow((1-e)/(1+e),d/2),b=2*Math.atan(b)-1.570796326794897);return b};l.yO=function(c,a){if(N.ti(c)||0==a||N.Y(N.P(a),1.570796326794897))return a;if(.006884661117170036>c){x=c*c;p=c*x;r=c*p;var b=c*r;t=c*b;var d=c*t,e=.05833333333333333*p+.07232142857142858*
r+.05634300595238095*b+.0355325796406526*t+.020235546186067*d,f=.02653149801587302*r+.04379960317460317*b+.0429211791776896*t+.03255384637546096*d,h=.01294022817460318*b+.02668104344536636*t+.03155651254609588*d,k=.00659454790965208*t+.0163075268674227*d,m=.003463473736911237*d,n=Math.cos(2*a);return a+Math.sin(2*a)*(.5*c+.2083333333333333*x+.08333333333333333*p+.03611111111111111*r+.01875*b+.01195601851851852*t+.008863673941798942*d-e+h-m+n*(2*(.1458333333333333*x+.1208333333333333*p+.07039930555555556*
r+.03616071428571429*b+.01839451058201058*t+.01017113095238095*d)-4*f+6*k+n*(4*e-12*h+24*m+n*(8*f-32*k+n*(16*h-80*m+n*(32*k+64*n*m))))))}var p=Math.sqrt(c),r=p/2,t=Math.tan(.7853981633974483+a/2);c=0;e=1;for(var x=a;0!=e;x=d)if(b=p*Math.sin(x),d=t*Math.pow((1+b)/(1-b),r),d=2*Math.atan(d)-1.570796326794897,c++,N.Y(d,x)||3E4<c)e=0;return x};return l}()})(ja||={});(function(g){var N=function(){function l(c){this.ul=this.Us=null;this.Iv=!1;this.GA=this.HA=0;this.HH=new g.h;this.XH=new g.h;this.KA=!1;
this.vq=new g.l;this.wH=this.sw=0;this.tw=null;this.zl=!1;this.Eo=null;this.bA=0;this.Ue=c;this.As=g.zb.xv(this.Ue,0,!0);this.HH.Rc();this.XH.Rc();this.RH=NaN;var a=c.getCode();0<a?(this.Kk=a,g.pf.getCode(c)):this.Kk=g.pf.getCode(c);0>this.Kk&&(this.Kk=0);var b=this.Ue.getType();this.jH=b==g.Sc.PE_TYPE_PROJCS?2:1;if(b==g.Sc.PE_TYPE_PROJCS&&!c.loadConstants())throw g.i.N("PeProjcs.loadConstants failed");a=b==g.Sc.PE_TYPE_GEOGCS?this.Ue:this.Ue.getGeogcs();b!=g.Sc.PE_TYPE_GEOGCS&&g.pf.getCode(a);this.Eo=
c.getUnit();this.RH=a.getPrimem().getLongitude();this.wH=c=a.getUnit().getUnitFactor();c=Math.PI/(180*c);1E-10>Math.abs(c-1)&&(c=1);this.GA=c;0!=(b&g.Sc.PE_TYPE_PROJCS)?(a=this.Ue,this.HA=1/a.getUnit().getUnitFactor(),this.sw=.001/this.Ue.getUnit().getUnitFactor(),this.tw=g.Cg.generate(a,g.Cg.PE_PCSINFO_OPTION_NONE),this.zl=this.tw.isPannableRectangle(),this.bA=g.zb.qN(this.tw.getCentralMeridian(),this.GA)):(this.KA=this.zl=!0,this.HA=0,b=1/a.getUnit().getUnitFactor(),this.sw=.001/a.getDatum().getSpheroid().getAxis()*
b,this.bA=0);this.zl&&(this.xx(),this.DK(),this.nY(),this.CK(),this.lY(),this.mY())}l.prototype.$r=function(){return this.Kk};l.prototype.kk=function(){return this.tw};l.Py=function(c,a){return c==a?!0:null!=c&&null!=a&&0==c.Kk&&0==a.Kk?c.As===a.As:!1};l.prototype.Wc=function(){return this.zl};l.prototype.gh=function(c){c.K(this.so)};l.prototype.pv=function(){return this.so.v};l.prototype.ov=function(){return this.so.C};l.prototype.GR=function(c){c.K(this.uw)};l.prototype.lY=function(){var c=this.Ue.getType();
if(c==g.Sc.PE_TYPE_PROJCS){c=this.Ue;var a=this.kk().getCentralMeridian(),b=c.getGeogcs();if(null==b)throw g.i.fa("internal error");b=1/b.getUnit().getUnitFactor()*Math.PI;a=[[a+b,0]];g.ej.geogToProj(c,1,a);a=a[0][0];b=c.getParameters()[g.Sc.PE_PARM_X0].getValue();var d=this.ml();c=new g.l;d.A(c);d=Math.abs(a-b);a=d+b;b=-1*d+b;d=c.H;c=c.G;var e=new g.l;e.K(b,c,a,d);null==this.so&&(this.so=e)}else if(c==g.Sc.PE_TYPE_GEOGCS)b=1/this.Ue.getUnit().getUnitFactor()*Math.PI,c=new g.l,c.K(-b,-b/2,b,b/2),
null==this.so&&(this.so=c);else throw g.i.fa("internal error");};l.prototype.mY=function(){var c=this.Ue.getType();if(c==g.Sc.PE_TYPE_PROJCS){var a=this.Ue;c=this.kk().getCentralMeridian();a=a.getGeogcs();if(null==a)throw g.i.fa("internal error");a=1/a.getUnit().getUnitFactor()*Math.PI;var b=this.Vr(),d=new g.l;b.A(d);b=new g.l;b.K(c-a,d.G,c+a,d.H);null==this.uw&&(this.uw=b)}else if(c==g.Sc.PE_TYPE_GEOGCS)a=1/this.Ue.getUnit().getUnitFactor()*Math.PI,c=new g.l,c.K(-a,-a/2,a,a/2),null==this.uw&&(this.uw=
c);else throw g.i.fa("internal error");};l.prototype.bf=function(){return this.GA};l.prototype.pm=function(){return this.HA};l.prototype.Vr=function(){if(this.zl)return this.ul;var c=this.ul;if(null!=c)return c;this.xx();return this.ul};l.prototype.Wr=function(){if(this.zl)return null;if(null!=this.ul)return this.YG;this.xx();return this.YG};l.prototype.xx=function(){if(this.Ue.getType()==g.Sc.PE_TYPE_PROJCS){var c=this.Ue,a=c.getGeogcs(),b=c.horizonGcsGenerate();if(null!=b){var d=b[0].getNump(),
e=b[0].getKind();c=0<b[0].getInclusive();var f=this.bf(),h=90*f,k=360*f,m=370*f,n=180*f*g.Sc.PE_HORIZON_DELTA/Math.PI,p=new g.l,r=null;if(1<d)for(var t=1;t<d;t++)if(b[t].getKind()==g.Sc.PE_HORIZON_LINE){null==r&&(r=new g.Ta);var x=b[t].getCoord();r.sx(x[0][0],x[0][1]);r.yj(x[1][0],x[1][1])}if(e==g.Sc.PE_HORIZON_RECT)b=b[0].getCoord(),p.K(b[0][0],b[0][1]),p.Zb(b[1][0],b[1][1]),Math.abs(p.H-h)<1E-7*n&&(p.H=h),Math.abs(p.G+h)<1E-7*n&&(p.G=-h),p.R()>m&&(b=-400*f,p.K(b,p.G,b+5*k,p.H)),b=new g.Fh(p),null==
this.ul&&(this.ul=b,this.Iv=c);else{m=new g.Da;k=this.kk().isGcsHorizonMultiOverlap();p=g.gu.bF(a,g.hu.Integer64);if(k){m=new g.gL;n=g.Gh.local().V(m,p,null);for(t=0;t<d;t++)if(b[t].getKind()==g.Sc.PE_HORIZON_POLY){a=b[t].getSize();f=b[t].getCoord();e=[];for(h=0;h<a;h++)e[h]=g.h.construct(f[h][0],f[h][1]);b[t].getInclusive();k&&(f=new g.Da,f.Yk(e,a-1),m.ZX(f),n.qe())}m=n.next()}else for(t=0;t<d;t++)if(b[t].getKind()==g.Sc.PE_HORIZON_POLY){a=b[t].getSize();f=b[t].getCoord();k=[];for(h=0;h<a;h++)k[h]=
g.h.construct(f[h][0],f[h][1]);b[t].getInclusive();m.Yk(k,a-1)}c?g.Xj.local().wn(m,p,1):g.kp.local().wn(m,p,1);g.dj.local().wn(m,p,1);null==this.ul&&(this.ul=m,this.Iv=c,this.YG=r)}}}};l.prototype.hv=function(){if(this.zl)return this.Iv;null==this.ul&&this.xx();return this.Iv};l.prototype.DK=function(){if(2==this.jH){var c=this.Ue.horizonPcsGenerate();if(null!=c){var a=c[0].getKind();c[0].getInclusive();var b=c[0].getNump(),d=!1;if(a==g.Sc.PE_HORIZON_RECT)c=c[0].getCoord(),b=new g.l,b.K(c[0][0],c[0][1]),
b.Zb(c[1][0],c[1][1]),c=new g.Fh(b);else{a=-1;for(d=0;d<b;d++)c[d].getKind()==g.Sc.PE_HORIZON_POLY&&(a=d);d=c[a].getSize()-1;c=c[a].getCoord();b=[];for(a=0;a<d;a++)b[a]=g.h.construct(c[a][0],c[a][1]);c=a=new g.Da;a.Yk(b,d);d=!0}this.kk().isDensificationNeeded()&&(b=1E5*this.pm(),c=g.Xl.local().V(c,b,null));d&&(d=new g.Fh,c.bn(d),c.Ke(),c.Qb(),c.qR(),g.Xj.local().wn(c,null,1));null==this.Us&&(this.Us=c)}}};l.prototype.ml=function(){if(this.zl)return this.Us;var c=this.Us;if(null!=c)return c;this.DK();
return this.Us};l.prototype.nY=function(){if(this.Ue.getType()==g.Sc.PE_TYPE_PROJCS){var c=90*this.bf();c=[[0,c],[0,-c]];g.ej.geogToProj(this.Ue,2,c);var a=this.kk(),b=a.getNorthPoleLocation()!=g.Cg.PE_POLE_OUTSIDE_BOUNDARY;a=a.getSouthPoleLocation()!=g.Cg.PE_POLE_OUTSIDE_BOUNDARY;this.KA||(b&&this.HH.ma(c[0][0],c[0][1]),a&&this.XH.ma(c[1][0],c[1][1]))}this.KA=!0};l.prototype.CK=function(){if(1==this.jH){var c=400*this.bf();this.vq.K(-c,-c,c,c)}else c=g.Cg.generate(this.Ue,g.Cg.PE_PCSINFO_OPTION_DOMAIN),
c=g.l.construct(c.getDomainMinx(),c.getDomainMiny(),c.getDomainMaxx(),c.getDomainMaxy()),this.vq.B()&&this.vq.K(c)};l.prototype.hR=function(c){this.zl&&c.K(this.vq);this.vq.B()&&this.CK();c.K(this.vq)};l.prototype.Up=function(){return this.RH};l.prototype.zi=function(){return this.bA};l.prototype.Hd=function(){return this.Eo};l.prototype.Xr=function(){return this.wH};return l}();g.OC=N})(ja||={});(function(g){var N=function(){function l(c){this.KT=c;this.As=g.zb.xv(c,0,!0);var a=c.getCode();this.ss=
0<a?a:g.pf.getCode(c);0>this.ss&&(this.ss=0);this.Eo=a=this.KT.getUnit();this.IH=1/a.getUnitFactor();g.pf.getCode(c)}l.Py=function(c,a){return c==a?!0:null!=c&&null!=a&&0==c.ss&&0==a.ss?c.As===a.As:!1};l.prototype.$r=function(){return this.ss};return l}();g.PL=N})(ja||={});(function(g){g.Yg=function(){function N(){}N.tb=function(l,c,a,b,d,e,f,h){if(null!=e||null!=f||null!=h){b=g.F.ba(b);c=g.F.ba(c);a=g.F.ba(a);d=g.F.ba(d);1.570796326794897<g.s.P(a)&&(a=g.s.Mb(3.141592653589793,a)-a,c=g.F.ba(c+3.141592653589793));
1.570796326794897<g.s.P(d)&&(d=g.s.Mb(3.141592653589793,d)-d,b=g.F.ba(b+3.141592653589793));var k=g.F.ba(b-c);if(g.s.Y(a,d)&&(g.s.Y(c,b)||g.s.Y(g.s.P(a),1.570796326794897)))null!=e&&(e.u=0),null!=f&&(f.u=0),null!=h&&(h.u=0);else{if(g.s.Y(a,-d)){if(g.s.Y(g.s.P(a),1.570796326794897)){null!=e&&(e.u=3.141592653589793*l);null!=f&&(f.u=0<a?g.F.ba(3.141592653589793-g.F.ba(b)):g.F.ba(b));null!=h&&(h.u=0<a?g.F.ba(b):g.F.ba(3.141592653589793-g.F.ba(b)));return}if(g.s.Y(g.s.P(k),3.141592653589793)){null!=e&&
(e.u=3.141592653589793*l);null!=f&&(f.u=0);null!=h&&(h.u=0);return}}var m=1.570796326794897==g.s.P(a)?0:Math.cos(a),n=Math.sin(a),p=1.570796326794897==g.s.P(d)?0:Math.cos(d),r=Math.sin(d),t=1.570796326794897==g.s.P(k)?0:Math.cos(k),x=3.141592653589793==g.s.P(k)?0:Math.sin(k);if(null!=e){var K=Math.sin((d-a)/2);k=Math.sin(k/2);e.u=2*Math.asin(Math.sqrt(K*K+m*p*k*k))*l}null!=f&&(f.u=g.s.Y(g.s.P(a),1.570796326794897)?0>a?b:g.F.ba(3.141592653589793-b):Math.atan2(p*x,m*r-n*p*t));null!=h&&(g.s.Y(g.s.P(d),
1.570796326794897)?h.u=0>d?c:g.F.ba(3.141592653589793-c):(h.u=Math.atan2(m*x,r*m*t-p*n),h.u=g.F.ba(h.u+3.141592653589793)))}}};N.rf=function(l,c,a,b,d,e,f){if(null!=e||null!=f){c=g.F.ba(c);a=g.F.ba(a);1.570796326794897<g.s.P(a)&&(a=g.s.Mb(3.141592653589793,a)-a,c=g.F.ba(c+3.141592653589793));g.s.Y(g.s.P(a),1.570796326794897)&&(c=0);d=g.F.ba(d);var h=g.s.Y(g.s.P(d),1.570796326794897)?0:Math.cos(d),k=g.s.Y(g.s.P(d),3.141592653589793)?0:Math.sin(d),m=g.s.Y(g.s.P(a),1.570796326794897)?0:Math.cos(a),n=
Math.sin(a);l=b/l;b=g.s.Y(g.s.P(l),1.570796326794897)?0:Math.cos(l);var p=g.s.Y(g.s.P(l),3.141592653589793)?0:Math.sin(l),r=Math.asin(n*b+m*p*h);null!=f&&(f.u=r);null!=e&&(e.u=g.s.Y(g.s.P(r),1.570796326794897)?g.s.Y(a,-r)?0>r?d:g.F.ba(3.141592653589793-d):c:g.s.Y(g.s.P(a),1.570796326794897)&&g.s.Y(l,3.141592653589793)?0>a?d:g.F.ba(3.141592653589793-d):g.F.ba(c+Math.atan2(p*k,m*b-n*p*h)))}};return N}()})(ja||={});(function(g){g.Wk=function(){function N(){}N.tb=function(l,c,a,b,d,e,f,h,k){var m=new g.ga(0),
n=new g.ga(0),p=[0,0,0],r=[0,0,0],t=[0,0,0],x=new g.ga(0),K=new g.ga(0),ca=new g.ga(0),ha=new g.ga(0),da=new g.ga(0);if(null!=f||null!=h||null!=k)if(g.s.ti(c))g.Yg.tb(l,a,b,d,e,f,h,k);else{d=g.F.ba(d);a=g.F.ba(a);var ka=g.F.ba(d-a);if(g.s.Y(b,e)&&(g.s.Y(a,d)||g.s.Y(g.s.P(b),1.570796326794897)))null!=f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.Y(b,-e)){if(g.s.Y(g.s.P(b),1.570796326794897)){null!=f&&(f.u=2*g.F.Ah(l,c));null!=h&&(h.u=0<b?g.F.ba(3.141592653589793-g.F.ba(d)):g.F.ba(d));null!=
k&&(k.u=0<b?g.F.ba(d):g.F.ba(3.141592653589793-g.F.ba(d)));return}g.s.Y(g.s.P(ka),3.141592653589793)&&(null!=f&&(f.u=2*g.F.Ah(l,c)),null!=h&&(h.u=0),null!=k&&(k.u=0))}else if(g.s.Y(g.s.P(b),1.570796326794897)||g.s.Y(g.s.P(e),1.570796326794897))g.s.Y(g.s.P(b),1.570796326794897)?a=d:d=a;var ta=0;if(0>ka){ta=1;var ua=a;a=d;d=ua;ua=b;b=e;e=ua}ka=g.F.ot(c,b);var wa=g.F.ot(c,e);if(null!=h||null!=k)g.Yg.tb(l,a,ka,d,wa,null,m,n),m=Math.atan2(Math.sin(m.u)*Math.cos(b-ka),Math.cos(m.u)),n=Math.atan2(Math.sin(n.u)*
Math.cos(e-wa),Math.cos(n.u)),0!=ta&&(ua=m,m=n,n=ua),null!=h&&(h.u=m),null!=k&&(k.u=n);null!=f&&(g.F.cl(1,c,b,a,0,ca,ha,da),p[0]=ca.u,p[1]=ha.u,p[2]=da.u,g.F.cl(1,c,e,d,0,ca,ha,da),r[0]=ca.u,r[1]=ha.u,r[2]=da.u,t[0]=p[1]*r[2]-r[1]*p[2],t[1]=-(p[0]*r[2]-r[0]*p[2]),t[2]=p[0]*r[1]-r[0]*p[1],c=1-g.F.w(c,g.F.Vq(c,g.F.Qj(c,Math.acos(t[2]/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))))),c*=2-c,h=Math.atan2(-t[1],-t[0]),t=g.F.ba(h-1.570796326794897),h=g.F.ba(h+1.570796326794897),t=g.s.P(g.F.ba(a-t))<=g.s.P(g.F.ba(a-
h))?t:h,g.Yg.tb(1,t,0,a,ka,x,null,null),g.Yg.tb(1,t,0,d,wa,K,null,null),3.141592653589793<x.u+K.u&&(t=g.F.ba(t+3.141592653589793),g.Yg.tb(1,t,0,a,ka,x,null,null),g.Yg.tb(1,t,0,d,wa,K,null,null)),x.u*=g.s.Mb(1,b),K.u*=g.s.Mb(1,e),x.u=g.F.Qj(c,x.u),K.u=g.F.Qj(c,K.u),a=g.F.q(l,c,x.u),l=g.F.q(l,c,K.u),f.u=g.s.P(l-a))}}};N.rf=function(l,c,a,b,d,e,f,h){var k=0,m=new g.ga(0),n=new g.ga(0),p=[0,0,0],r=[0,0,0],t=new g.ga(0),x=new g.ga(0),K=new g.ga(0);if(null!=f||null!=h)if(g.s.ti(c))g.Yg.rf(l,a,b,d,e,f,h);
else if(g.s.Cd(d))null!=f&&(f.u=a),null!=h&&(h.u=b);else if(e=g.F.ba(e),0>d&&(d=g.s.P(d),e=g.F.ba(e+3.141592653589793)),a=g.F.ba(a),b=g.F.ba(b),1.570796326794897<g.s.P(b)&&(a=g.F.ba(a+3.141592653589793),b=g.s.Mb(3.141592653589793,b)-b),g.s.Y(g.s.P(b),1.570796326794897)&&(a=0),g.s.Cd(b)){var ca=g.s.P(1.570796326794897-g.s.P(e));ca=g.F.Qj(c,ca);ca=1-g.F.w(c,g.F.Vq(c,ca));ca*=2-ca;l=d/g.F.Ah(l,ca)*1.570796326794897;l=g.F.Rq(ca,l);l=g.F.ot(ca,l);g.Yg.rf(1,a,b,l,e,f,m);null!=h&&(k=m.u);null!=h&&(h.u=g.F.Qj(c,
k))}else if(g.s.Y(g.s.P(b),1.570796326794897))k=g.F.Ah(l,c),m=2*k,l=g.s.Mb(1.570796326794897,b),e=0<l?g.F.ba(3.141592653589793-e):e,b=k-d,g.s.P(b)<=k?null!=f&&(f.u=e):(b=Math.floor(d/m),0==g.O.truncate(b%2)?(null!=f&&(f.u=e),d-=b*m):(null!=f&&(f.u=g.F.ba(e+3.141592653589793)),d=(b+1)*m-d),b=k-d),null!=h&&(h.u=g.F.Rq(c,b/k*l));else{ca=g.F.ot(c,b);e=Math.atan2(Math.sin(e),Math.cos(e)*Math.cos(b-ca));var ha=g.O.truncate(g.s.Mb(1,ca))*(1.570796326794897>=g.s.P(e)?1:-1);e=g.F.ba(a+Math.atan(Math.tan(e)*
-Math.sin(ca)));g.Yg.tb(l,e,0,a,ca,null,n,null);ca=g.s.P(1.570796326794897-g.s.P(n.u));ca=g.F.Qj(c,ca);ca=1-g.F.w(c,g.F.Vq(c,ca));ca*=2-ca;g.F.cl(1,c,0,e,0,t,x,K);p[0]=t.u;p[1]=x.u;p[2]=K.u;g.F.cl(1,c,b,a,0,t,x,K);r[0]=t.u;r[1]=x.u;r[2]=K.u;b=Math.acos((p[0]*r[0]+p[1]*r[1]+p[2]*r[2])/Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]));b=g.F.Qj(ca,b);b=g.F.q(l,ca,b)+d*ha;d=0<b?n.u:g.F.ba(n.u+3.141592653589793);l=g.s.P(b)/g.F.Ah(l,ca)*1.570796326794897;l=g.F.Rq(ca,l);l=g.F.ot(ca,l);g.Yg.rf(1,e,0,l,d,f,m);null!=
h&&(k=m.u);null!=h&&(h.u=g.F.Qj(c,k))}};return N}()})(ja||={});(function(g){g.cu=function(){function N(){}N.tb=function(l,c,a,b,d,e,f,h,k){var m=0,n=0,p=0;if(null!=f||null!=h||null!=k)if(g.s.ti(c))g.Yg.tb(l,a,b,d,e,f,h,k);else{var r=g.F.ba(d-a);if(g.s.Y(b,e)&&(g.s.Cd(r)||g.s.Y(g.s.P(b),1.570796326794897)))null!=f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.Y(b,-e)){if(g.s.Y(g.s.P(b),1.570796326794897)){null!=f&&(f.u=2*g.F.Ah(l,c));null!=h&&(h.u=0<b?g.F.ba(3.141592653589793-g.F.ba(d)):g.F.ba(d));
null!=k&&(k.u=0<b?g.F.ba(d):g.F.ba(3.141592653589793-g.F.ba(d)));return}g.s.Y(g.s.P(r),3.141592653589793)&&(null!=f&&(f.u=2*g.F.Ah(l,c)),null!=h&&(h.u=0),null!=k&&(k.u=0))}else{if(g.s.Y(g.s.P(b),1.570796326794897)||g.s.Y(g.s.P(e),1.570796326794897)){g.Wk.tb(l,c,a,b,d,e,f,h,k);return}if(g.s.Cd(r)||g.s.Y(g.s.P(r),3.141592653589793)){g.Wk.tb(l,c,a,b,d,e,f,h,k);return}}var t=1-Math.sqrt(1-c),x=c/(1-c),K=l*(1-t);l=g.F.Vq(c,b);var ca=g.F.Vq(c,e);c=1.570796326794897==g.s.P(l)?0:Math.cos(l);var ha=Math.sin(l),
da=1.570796326794897==g.s.P(ca)?0:Math.cos(ca),ka=Math.sin(ca),ta=r,ua=Math.cos(ta),wa=Math.sin(ta),Ea=1,Ga=0;do{var Na=ta,La=Math.sqrt(Math.pow(da*wa,2)+Math.pow(c*ka-ha*da*ua,2)),Ta=ha*ka+c*da*ua,Ra=Math.atan2(La,Ta);if(0==La){Ea=0;break}var Wa=c*da*wa/La;m=Math.cos(Math.asin(Wa));m*=m;n=Ta-2*ha*ka/m;1<g.s.P(n)&&(n=g.s.Mb(1,n));p=n*n;ta=t/16*m*(4+t*(4-3*m));ta=r+(1-ta)*t*Wa*(Ra+ta*La*(n+ta*Ta*(2*p-1)));ua=Math.cos(ta);wa=Math.sin(ta);Ga++;if(3.141592653589793<g.s.P(ta)&&30<Ga){Ea=0;break}}while(5E3>=
Ga&&!g.s.Y(Na,ta));if(0!=Ea)x*=m,t=x*(256+x*(-128+x*(74-47*x)))/1024,null!=f&&(f.u=K*(1+x*(4096+x*(-768+x*(320-175*x)))/16384)*(Ra-t*La*(n+t/4*(Ta*(2*p-1)-t/6*n*(4*La*La-3)*(4*p-3))))),null!=h&&(h.u=g.s.Y(g.s.P(b),1.570796326794897)?0>b?d:g.F.ba(3.141592653589793-d):Math.atan2(da*wa,c*ka-ha*da*ua)),null!=k&&(g.s.Y(g.s.P(e),1.570796326794897)?k.u=0>e?a:g.F.ba(3.141592653589793-a):(k.u=Math.atan2(c*wa,c*ka*ua-ha*da),k.u=g.F.ba(k.u+3.141592653589793)));else{ta=g.s.Mb(3.141592653589793,r);Ta=ha*ka-c*
da;Ra=Math.acos(Ta);La=Math.sin(Ra);m=1;Ga=Wa=0;do p=Wa,m*=m,ua=m*m,Wa=t*m*(1+t+t*t),n=t*t*ua*(1+2.25*t),Ea=t*t*t*ua*m,ua=1-.25*Wa+.1875*n-.1953125*Ea,Wa=.25*Wa-.25*n+.29296875*Ea,wa=.03125*n-.05859375*Ea,Ea*=.00651041666666667,n=Ta-2*ha*ka/m,1<g.s.P(n)&&(n=g.s.Mb(1,n)),m=Math.acos(n),Ta=Math.cos(2*m),Na=Math.cos(3*m),Wa=g.s.Y(b,-e)?g.F.ba(3.141592653589793-r)/(3.141592653589793*t*ua):g.F.ba(ta-r)/(t*(ua*Ra+Wa*La*n+wa*Math.sin(2*Ra)*Ta+Ea*Math.sin(3*Ra)*Na)),wa=Wa*La/(c*da),ta=1.570796326794897<g.s.P(r)?
g.s.Mb(3.141592653589793,wa)-Math.asin(wa):Math.asin(wa),ua=Math.cos(ta),La=Math.sqrt(Math.pow(da*wa,2)+Math.pow(c*ka-ha*da*ua,2)),Ra=3.141592653589793-Math.asin(g.s.P(La)),Ta=Math.cos(Ra),m=Math.cos(Math.asin(Wa)),Ga++;while(70>=Ga&&!g.s.Y(p,Wa));null!=f&&(m*=m,x*=m,ua=1+x*(4096+x*(-768+x*(320-175*x)))/16384,g.s.Y(b,-e)?f.u=3.141592653589793*K*ua:(n=Ta-2*ha*ka/m,m=Math.acos(n),Ta=Math.cos(2*m),Na=Math.cos(3*m),f.u=K*(ua*Ra+x*(-512+x*(128+x*(-60+35*x)))/2048*La*n+x*(-4+5*x)/6144*x*x*Math.sin(2*Ra)*
Ta+Ea*Math.sin(3*Ra)*Na+-7.62939453125E-5*x*x*x*x*Math.sin(4*Ra)*Math.cos(4*m))));null!=h&&(g.s.Cd(b)&&g.s.Cd(e)?(m=Math.sqrt(1-Wa*Wa),h.u=Math.acos(m),0>r&&(h.u*=-1)):g.s.Y(g.s.P(b),1.570796326794897)?h.u=0>b?d:g.F.ba(3.141592653589793-d):(f=Wa/c,K=Math.sqrt(1-f*f),0>c*ka-ha*da*Math.cos(ta)&&(K*=-1),h.u=Math.atan2(f,K),g.s.Y(b,-e)&&g.s.P(g.F.ba(a-d))>3.141592653589793*(1-t*Math.cos(b))&&(0<b&&1.570796326794897>g.s.P(h.u)||0>b&&1.570796326794897<g.s.P(h.u))&&(h.u=g.s.Mb(3.141592653589793,h.u)-h.u)));
if(null!=k)if(g.s.Cd(b)&&g.s.Cd(e))m=Math.sqrt(1-Wa*Wa),k.u=Math.acos(m),0<=r&&(k.u*=-1);else if(g.s.Y(g.s.P(e),1.570796326794897))k.u=0>e?a:g.F.ba(3.141592653589793-a);else if(r=Wa/da,f=Math.sqrt(1-r*r),K=Math.sin(ta/2),0>Math.sin(ca-l)-2*c*ka*K*K&&(f*=-1),k.u=Math.atan2(r,f),k.u=g.F.ba(k.u+3.141592653589793),g.s.Y(b,-e)&&!g.s.Cd(b)&&!g.s.Y(g.s.P(b),1.570796326794897)&&g.s.P(g.F.ba(a-d))>3.141592653589793*(1-t*Math.cos(b))&&(null!=h?K=h.u:(f=Wa/c,K=Math.sqrt(1-f*f),0>c*ka-ha*da*Math.cos(ta)&&(K*=
-1),K=Math.atan2(f,K),g.s.Y(b,-e)&&g.s.P(g.F.ba(a-d))>3.141592653589793*(1-t*Math.cos(b))&&(0<b&&1.570796326794897>g.s.P(K)||0>b&&1.570796326794897<g.s.P(K))&&(K=g.s.Mb(3.141592653589793,K)-K)),1.570796326794897>=g.s.P(K)&&1.570796326794897<g.s.P(k.u)||1.570796326794897<=g.s.P(K)&&1.570796326794897>g.s.P(k.u)))k.u=-1*g.F.ba(k.u+3.141592653589793)}}}};N.rf=function(l,c,a,b,d,e,f,h){if(null!=f||null!=h)if(g.s.ti(c))g.Yg.rf(l,a,b,d,e,f,h);else if(e=g.F.ba(e),g.s.Y(g.s.P(b),1.570796326794897)||g.s.Cd(e)||
g.s.Y(g.s.P(e),3.141592653589793))g.Wk.rf(l,c,a,b,d,e,f,h);else{var k=1.570796326794897==g.s.P(e)?0:Math.cos(e),m=3.141592653589793==g.s.P(e)?0:Math.sin(e);g.s.Y(g.s.P(b),1.570796326794897)&&(a=0);e=1-Math.sqrt(1-c);var n=g.F.Vq(c,b);b=1.570796326794897==g.s.P(n)?0:Math.cos(n);var p=Math.sin(n);n=Math.atan2(Math.tan(n),k);var r=b*m,t=r*r,x=1-t,K=c/(1-c)*x;c=K*(256+K*(-128+K*(74-47*K)))/1024;var ca=c/4,ha=c/6,da=d/(l*(1-e)*(1+K*(4096+K*(-768+K*(320-175*K)))/16384)),ka=da;do{var ta=ka;d=1.570796326794897==
g.s.P(ka)?0:Math.cos(ka);K=3.141592653589793==g.s.P(ka)?0:Math.sin(ka);var ua=K*K;l=Math.cos(2*n+ka);ka=l*l;ka=c*K*(l+ca*(d*(2*ka-1)-ha*l*(4*ua-3)*(4*ka-3)))+da}while(!g.s.Y(ta,ka));d=1.570796326794897==g.s.P(ka)?0:Math.cos(ka);K=3.141592653589793==g.s.P(ka)?0:Math.sin(ka);null!=f&&(m=Math.atan2(K*m,b*d-p*K*k),x=e/16*x*(4+e*(4-3*x)),l=Math.cos(2*n+ka),f.u=g.F.ba(a+(m-(1-x)*e*r*(ka+x*K*(l+x*d*(2*l*l-1))))));null!=h&&(x=p*K-b*d*k,x=(1-e)*Math.sqrt(t+x*x),h.u=Math.atan2(p*d+b*K*k,x))}};return N}()})(ja||=
{});(function(g){g.PC=function(){function N(){}N.tb=function(l,c,a,b,d,e,f,h,k){var m=g.F.ba(d-a),n=g.s.Y(g.s.P(b),1.570796326794897),p=g.s.Y(g.s.P(e),1.570796326794897);if(g.s.Y(b,e)&&(g.s.Cd(m)||n))null!=f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.ti(c)){var r=Math.sin(b),t=Math.sin(e);r=Math.sqrt((1+r)/(1-r));t=Math.sqrt((1+t)/(1-t));r=Math.log(t)-Math.log(r);r=Math.atan2(m,r);null!=f&&(f.u=g.s.Y(b,e)?g.s.P(l*Math.cos(b)*m):g.s.P((l*e-l*b)/Math.cos(r)))}else t=g.F.Qw(c,e),r=Math.sin(g.F.Qw(c,
b)),t=Math.sin(t),r=Math.sqrt((1+r)/(1-r)),t=Math.sqrt((1+t)/(1-t)),r=Math.log(t)-Math.log(r),r=Math.atan2(m,r),null!=f&&(g.s.Y(b,e)?f.u=g.s.P(l*m*Math.cos(b)/g.F.w(c,b)):(m=g.F.q(l,c,b),l=g.F.q(l,c,e),f.u=g.s.P((l-m)/Math.cos(r))));if(null!=h||null!=k)f=g.F.ba(r+3.141592653589793),n&&p||!n&&!p||(n?r=0>b?d:g.F.ba(3.141592653589793-d):p&&(f=0>e?a:g.F.ba(3.141592653589793-a))),null!=h&&(h.u=r),null!=k&&(k.u=f)}};N.rf=function(l,c,a,b,d,e,f,h){e=g.F.ba(e);0>d&&(d=g.s.P(d),e=g.F.ba(e+3.141592653589793));
g.s.ti(c)?g.s.Y(g.s.P(b),1.570796326794897)?(a=0>b?e:g.F.ba(3.141592653589793-e),e=d/l%6.283185307179586,3.141592653589793>=e?l=b-g.s.Mb(e,b):(a=g.F.ba(a+3.141592653589793),l=-b+g.s.Mb(e-3.141592653589793,b))):g.s.Y(g.s.P(e),1.570796326794897)?(a=g.F.ba(a+g.s.Mb(d,e)/(l*Math.cos(b))),l=b):(l=b+d*Math.cos(e)/l,1.570796326794897<g.s.P(l)&&(l=1.570796326794897),g.s.Y(g.s.P(l),1.570796326794897)&&(g.s.Cd(e)||g.s.Y(g.s.P(e),3.141592653589793))||(1.570796316258184<g.s.P(l)&&(l=g.s.Mb(1.570796316258184,
l)),c=Math.sin(b),b=Math.sin(l),c=Math.sqrt((1+c)/(1-c)),b=Math.sqrt((1+b)/(1-b)),c=Math.log(b)-Math.log(c),a=g.F.ba(a+Math.tan(e)*c))):g.s.Y(g.s.P(b),1.570796326794897)?(a=0>b?e:g.F.ba(3.141592653589793-e),e=d/g.F.qW(l,c),e%=6.283185307179586,3.141592653589793>=e?l=b-g.s.Mb(e,b):(a=g.F.ba(a+3.141592653589793),l=-b+g.s.Mb(e-3.141592653589793,b)),l=g.F.Rq(c,l)):g.s.Y(g.s.P(e),1.570796326794897)?(a=g.F.ba(a+g.s.Mb(d,e)*g.F.w(c,b)/(l*Math.cos(b))),l=b):(l=1.570796326794897*(d*Math.cos(e)+g.F.q(l,c,b))/
g.F.Ah(l,c),1.570796326794897<g.s.P(l)&&(l=g.s.Mb(1.570796326794897,l)),l=g.F.Rq(c,l),g.s.Y(g.s.P(l),1.570796326794897)&&(g.s.Cd(e)||g.s.Y(g.s.P(e),3.141592653589793))||(d=g.F.Qw(c,b),b=g.F.Qw(c,l),1.570796316258184<g.s.P(b)&&(b=g.s.Mb(1.570796316258184,l),l=g.F.yO(c,b)),c=Math.sin(d),b=Math.sin(b),c=Math.sqrt((1+c)/(1-c)),b=Math.sqrt((1+b)/(1-b)),c=Math.log(b)-Math.log(c),a=g.F.ba(a+Math.tan(e)*c)));null!=f&&(f.u=a);null!=h&&(h.u=l)};return N}()})(ja||={});(function(g){g.kb=function(){function N(){}
N.Xy=function(l,c,a,b,d,e,f){g.cu.tb(l,c,a,b,d,e,null,f,null)};N.yi=function(l,c,a,b,d,e,f,h){g.cu.rf(l,c,a,b,d,e,f,h)};N.wd=function(l,c,a,b,d,e,f,h,k,m){switch(m){case 2:g.Wk.tb(l,c,a,b,d,e,f,h,k);break;case 3:g.QC.tb(l,c,a,b,d,e,f,h,k);break;case 1:g.PC.tb(l,c,a,b,d,e,f,h,k);break;default:g.cu.tb(l,c,a,b,d,e,f,h,k)}};N.oj=function(l,c,a,b,d,e,f,h,k){switch(k){case 2:g.Wk.rf(l,c,a,b,d,e,f,h);break;case 3:g.QC.rf(l,c,a,b,d,e,f,h);break;case 1:g.PC.rf(l,c,a,b,d,e,f,h);break;default:g.cu.rf(l,c,a,
b,d,e,f,h)}};return N}()})(ja||={});(function(g){var N=function(){function c(){this.y=this.x=null}c.construct=function(a){var b=new c;b.x=new g.Wb;b.x.set(a.x);b.y=new g.Wb;b.y.set(a.y);return b};c.VE=function(a,b){var d=new c;d.x=new g.Wb;d.x.set(a);d.y=new g.Wb;d.y.set(b);return d};c.prototype.qg=function(){return this.x.qg()&&this.y.qg()};c.prototype.value=function(){return g.h.construct(this.x.value(),this.y.value())};return c}();g.vY=N;var l=function(){function c(){this.z=this.y=this.x=null}
c.construct=function(a){var b=new c;b.x=new g.Wb;b.x.set(a.x);b.y=new g.Wb;b.y.set(a.y);b.z=new g.Wb;b.z.set(a.z);return b};c.VE=function(a,b,d){var e=new c;e.x=new g.Wb;e.x.set(a);e.y=new g.Wb;e.y.set(b);e.z=new g.Wb;e.z.set(d);return e};c.prototype.qg=function(){return this.x.qg()&&this.y.qg()&&this.z.qg()};c.prototype.value=function(){return new g.Nd(this.x.value(),this.y.value(),this.z.value())};c.prototype.Qh=function(a){var b=new g.Wb,d=new g.Wb,e=new g.Wb;b.Kl(this.x,a.x);d.Kl(this.y,a.y);
e.Kl(this.z,a.z);a=new g.Wb;a.dN(b,d);a.add(e);return a};c.prototype.cF=function(a){var b=new c;b.x.Kl(this.y,a.z);b.y.Kl(this.z,a.x);b.z.Kl(this.x,a.y);var d=new g.Wb,e=new g.Wb,f=new g.Wb;d.Kl(this.z,a.y);e.Kl(this.x,a.z);f.Kl(this.y,a.x);b.x.sub(d);b.y.sub(e);b.z.sub(f);return b};return c}();g.wY=l;g.Ox=function(){function c(){}c.EP=function(a,b,d){var e=b.x;b=b.y;c.cl(1,a,Math.cos(e),Math.sin(e),Math.cos(b),Math.sin(b),d)};c.DP=function(a,b){var d=new g.Nd;c.EP(a,b,d);return d};c.cl=function(a,
b,d,e,f,h,k){a/=Math.sqrt(1-b*h*h);k.K(a*f*d,a*f*e,a*(1-b)*h)};c.Yu=function(a,b){var d=new g.Wb,e=new g.Wb,f=new g.Wb,h=new g.Wb;d.cos(b.x);e.sin(b.x);f.cos(b.y);h.sin(b.y);var k=new g.Wb;k.set(h);k.Ag(h);k.No(a);k.No(-1);k.kN();k.sqrt();b=new g.Wb;b.set(1);b.jm(k);k=new g.Wb;k.set(b);k.Ag(f);k.Ag(d);d=new g.Wb;d.set(b);d.Ag(f);d.Ag(e);e=new g.Wb;e.set(b);e.No(1-a);e.Ag(h);return l.VE(k,d,e)};c.SS=function(a,b,d,e){if(Math.abs(b.x-d.x)>Math.PI||Math.abs(b.y)>.5*Math.PI||Math.abs(d.y)>.5*Math.PI||
(Math.abs(b.y)==.5*Math.PI||Math.abs(d.y)==.5*Math.PI)&&b.x!=d.x)return NaN;e=c.cB(e,Math.min(b.x,d.x),Math.max(b.x,d.x));if(!(new g.Nc(b.x,d.x)).contains(e))return NaN;var f=N.construct(b);d=N.construct(d);f=c.Yu(a,f);d=c.Yu(a,d);d=f.cF(d);if(d.z.qg())return b=b.y;var h=new g.Wb;h.set(d.x);h.jm(d.z);h.No(-1);var k=new g.Wb;k.set(d.y);k.jm(d.z);k.No(-1);var m=new g.Wb;m.set(k);m.Ag(k);f=new g.Wb;f.set(h);f.Ag(h);f.add(m);f.sqrt();if(f.qg()||h.qg()&&k.qg())return b=b.y;b=Math.atan2(k.value(),h.value());
b=Math.atan2(f.value()*Math.cos(b-e),1-a);e=c.DP(a,g.h.construct(e,b));a=new g.Nd(e.x,e.y,-e.z);e=d.value().Qh(e);a=d.value().Qh(a);Math.abs(a)<Math.abs(e)&&(b=-b);return b};c.Oz=function(a,b,d,e,f){f[0]=NaN;f[1]=NaN;if(Math.abs(b.x-d.x)>Math.PI||Math.abs(b.y)>.5*Math.PI||Math.abs(d.y)>.5*Math.PI||(Math.abs(b.y)==.5*Math.PI||Math.abs(d.y)==.5*Math.PI)&&b.x!=d.x||Math.abs(e)>=.5*Math.PI||0<b.y&&0<d.y&&b.y>e&&d.y>e||0>b.y&&0>d.y&&b.y<e&&d.y<e)return 0;var h=N.construct(b),k=N.construct(d);h=c.Yu(a,
h);k=c.Yu(a,k);var m=h.cF(k);if(m.z.qg())return(new g.Nc(b.y,d.y)).contains(e)?(f[0]=b.x,1):0;k=new g.Wb;k.set(m.x);k.jm(m.z);k.No(-1);h=new g.Wb;h.set(m.y);h.jm(m.z);h.No(-1);m=new g.Wb;m.set(h);m.Ag(h);var n=new g.Wb;n.set(k);n.Ag(k);n.add(m);n.sqrt();if(n.qg()||k.qg()&&h.qg())return 0==e?(f[0]=b.x,f[1]=d.x,2):0;a=(1-a)*Math.tan(e)/n.value();if(1<Math.abs(a))return 0;a=Math.acos(a);m=Math.atan2(h.value(),k.value());k=Math.min(b.x,d.x);h=Math.max(b.x,d.x);d=c.cB(m-a,k,h);a=0!=e?c.cB(m+a,k,h):d;e=
0;k<=d&&d<=h&&(f[e]=d,e++);a!=d&&k<=a&&a<=h&&(f[e]=a,e++,2==e&&Math.abs(f[0]-b.x)>Math.abs(f[1]-b.x)&&(b=f[0],f[0]=f[1],f[1]=b));return e};c.cB=function(a,b,d){a>d?(b=Math.ceil((a-d)/(2*Math.PI)),a-=2*b*Math.PI):a<b&&(b=Math.ceil((b-a)/(2*Math.PI)),a+=2*b*Math.PI);return a};return c}()})(ja||={});(function(g){g.XK=function(){function N(){}N.$X=function(l,c){var a=[0,0,0,0],b=new g.h;b.L(c);b.scale(9102==g.cb.sc(l).Hd().Ec()?1:g.cb.sc(l).Hd().ai/3.141592653589793*180);-180>b.x?(b.x-=b.x%360,-180>b.x&&
(b.x+=360)):180<b.x&&(b.x-=b.x%360,180<b.x&&(b.x-=360));90<b.y&&(b.y=90);-90>b.y&&(b.y=-90);l=40;c=(l+31)/32;for(var d=-180,e=180,f=l-1,h=c-1;0<=h;h--)for(var k=f-32*h,m=Math.min(32,l-32*h),n=1;n<m;n+=2){var p=.5*(e+d);b.x>=p?(a[h]|=1<<k,d=p):e=p;k-=2;f-=2}d=-90;e=90;f=l-2;for(h=c-1;0<=h;h--)for(k=f-32*h,m=Math.min(32,l-32*h),n=0;n<m;n+=2)p=.5*(e+d),b.y>=p?(a[h]|=1<<k,d=p):e=p,k-=2,f-=2;return N.$P(a,8,8)};N.$P=function(l,c,a){for(var b=[],d=0;d<c;d++)b[d]="";for(var e=d=0,f=0;f<c;f++){var h=l[d]>>
e&31;e+=5;if(31<e){var k=37-e;h&=(1<<k)-1;e-=32;d++;h|=(l[d]&(1<<e)-1)<<k}b[c-1-f]="0123456789bcdefghjkmnpqrstuvwxyz".split("")[h]}if(a>c)for(f=0;f<a-c;f++)b.push("0");else a<c&&(b.length=a);return b.join("")};return N}()})(ja||={});(function(g){var N={gcstol:[0,2E-9,1,2.241706620489156E-9,2,2.313672246530541E-9,3,8.98240164660333E-9,4,8.982433838020134E-9,5,8.982439417325895E-9,6,8.982466029667677E-9,7,8.982476760268133E-9,8,8.982492642167149E-9,9,8.98251968292634E-9,10,8.98253685210448E-9,11,8.982546725256576E-9,
12,8.982557456049832E-9,13,8.98257333682596E-9,14,8.982575482995276E-9,15,8.982578488197342E-9,16,8.982579775336987E-9,17,8.9825840676828E-9,18,8.982599090925448E-9,19,8.982605529473397E-9,20,8.982609220517402E-9,21,8.982611968030573E-9,22,8.982616260407152E-9,23,8.982620552787834E-9,24,8.982633429954492E-9,25,8.982637722351582E-9,26,8.98264416095491E-9,27,8.982646307158072E-9,28,8.982654891980968E-9,29,8.982667769246082E-9,30,8.982674207892485E-9,31,8.982680646548117E-9,32,8.982682792768713E-9,33,
8.982685798042582E-9,34,8.982689231436652E-9,35,8.98269137766135E-9,36,8.98269266624163E-9,37,8.982705114087017E-9,38,8.982706830791106E-9,39,8.982711958374661E-9,40,8.982712839964735E-9,41,8.982717991496125E-9,42,8.982721424914803E-9,43,8.982723571154887E-9,44,8.982727863638127E-9,45,8.982730868942154E-9,46,8.982734302370678E-9,47,8.982745033612112E-9,48,8.982751472369276E-9,49,8.982755764879183E-9,50,8.982762203651733E-9,51,8.982764776628385E-9,52,8.982766496171896E-9,53,8.98277722749025E-9,54,
8.98278152002477E-9,55,8.98279933943848E-9,56,8.9829143024805E-9,57,8.982922161948598E-9,58,8.98292327314211E-9,59,8.982925667349601E-9,60,8.982932222965576E-9,61,8.982961298941316E-9,62,8.982965524049989E-9,63,8.982994818246099E-9,64,8.982994895706967E-9,65,8.98299489597736E-9,66,8.983000733443498E-9,67,8.983055097289157E-9,68,8.983064111047368E-9,69,8.983111996941178E-9,70,8.983120447446023E-9,71,8.98312748954554E-9,72,8.983134531656096E-9,73,8.983141573777694E-9,74,8.983148615910332E-9,75,8.983152841195215E-9,
76,8.983153545409748E-9,77,8.983153827095593E-9,78,8.98315396793852E-9,79,8.983154249624393E-9,80,8.983155658054012E-9,81,8.983960794340072E-9,82,8.984061344391998E-9,83,8.984072829255685E-9,84,8.984194981201908E-9,85,8.984275233099427E-9,86,8.984326127007554E-9,87,8.984330099816539E-9,88,8.98433275258421E-9,89,8.984333047023206E-9,90,8.984333885258723E-9,91,8.984337959508212E-9,92,8.984365176209457E-9,93,8.984727360418079E-9,94,8.984901041679577E-9,95,8.98542662091587E-9,96,8.98610024130669E-9,97,
8.992894229037531E-9,98,8.993203677616635E-9,99,8.993206178094346E-9,100,8.993216059187305E-9,101,8.99322029394808E-9,102,8.994627867045891E-9,103,9.467559984315793E-9,104,9.46881168618118E-9,105,9.980888154931644E-9,106,9.981105353606775E-9,107,9.983807356573187E-9,108,1.687060485811522E-8,109,1.688447560354875E-8,110,2.176606011487185E-8,111,2.225078816042032E-8,112,2.348476432064694E-8,113,2.348765250187846E-8,114,2.378108974103778E-8,115,3.14559636297708E-8,116,3.297788621680806E-8,117,3.667892343788279E-8,
118,4.235973644320739E-8,119,4.794625900676345E-8,120,7.262742998235812E-8,121,7.499447580246377E-8,122,7.525056410964318E-8,123,7.979913581209237E-8,124,9.662020153976783E-8,125,9.799175562353741E-8,126,9.897353517547472E-8,127,1.02313891987647E-7,128,1.081460541960784E-7,129,1.21905913857622E-7,130,2.246893314238523E-7,131,2.297344808062643E-7,132,2.42984645941825E-7,133,2.754604784282804E-7,134,2.884548130346993E-7,135,3.370339971357784E-7,136,4.307953346848296E-7,137,5.208707228462029E-7,138,
5.509209568565608E-7,139,6.452227422644406E-7,140,6.740679942715567E-7,141,6.861770001566745E-7,142,7.252630318111686E-7,143,7.441010326374328E-7,144,7.742672907173287E-7,145,9.629542775307953E-7,146,1.061032953945969E-6,147,1.143628333594458E-6,148,1.162186197019925E-6,149,1.36418522650196E-6,150,1.367441038498385E-6,151,1.432394487827058E-6,152,1.736235742820677E-6,153,1.848250952034914E-6,154,1.909859317102744E-6,155,1.975716534933873E-6,156,2.122065907891938E-6,157,2.72837045300392E-6,158,3.183098861837907E-6,
159,3.580986219567645E-6,160,3.819718634205488E-6,161,4.09255567950588E-6,162,4.407367654852486E-6,163,4.774648292756861E-6,164,5.161781938115525E-6,165,5.20870722846203E-6,166,5.729577951308232E-6,167,6.031134685587613E-6,168,6.987290184522236E-6,169,9.241254760174569E-6,170,1.145915590261646E-5],pcstol:[0,6.666666666666667E-9,1,2E-8,2,4.970973863636364E-5,3,4.970978156565657E-5,4,4.970980410559237E-5,5,.001,6,.001093615055555556,7,.001093615194444445,8,.001093619003239988,9,.001093623110088878,
10,.003280833333333333,11,.003280839895013123,12,.003280843014596366,13,.003280845583333334,14,.003280869330266636,15,.00497101413676763],newtoold:[2154,102110,2195,102200,2204,32036,2205,26979,2225,102641,2226,102642,2227,102643,2228,102644,2229,102645,2230,102646,2231,102653,2232,102654,2233,102655,2234,102656,2235,102657,2236,102658,2237,102659,2238,102660,2239,102666,2240,102667,2241,102668,2242,102669,2243,102670,2246,102679,2247,102680,2248,102685,2249,102686,2250,102687,2254,102694,2255,102695,
2257,102712,2258,102713,2259,102714,2260,102715,2261,102716,2262,102717,2263,102718,2264,102719,2267,102724,2268,102725,2271,102728,2272,102729,2274,102736,2275,102737,2276,102738,2277,102739,2278,102740,2279,102741,2283,102746,2284,102747,2285,102748,2286,102749,2287,102752,2288,102753,2289,102754,2312,23433,2326,102140,2395,2091,2396,2092,2397,2166,2398,2167,2399,2168,2759,102229,2760,102230,2761,102248,2762,102249,2763,102250,2764,102251,2765,102252,2766,102241,2767,102242,2768,102243,2769,102244,
2770,102245,2771,102246,2772,102253,2773,102254,2774,102255,2775,102256,2776,102257,2777,102258,2778,102259,2779,102260,2780,102266,2781,102267,2782,102261,2783,102262,2784,102263,2785,102264,2786,102265,2787,102268,2788,102269,2789,102270,2790,102271,2791,102272,2792,102273,2793,102274,2794,102275,2795,102276,2796,102277,2797,102278,2798,102279,2799,102280,2800,102281,2801,102282,2802,102283,2803,102284,2804,102285,2805,102286,2806,102287,2807,102288,2808,102289,2809,102290,2810,102291,2811,102292,
2812,102293,2813,102294,2814,102295,2815,102296,2816,102297,2817,102298,2818,102300,2819,102304,2820,102307,2821,102308,2822,102309,2823,102310,2824,102311,2825,102312,2826,102313,2827,102314,2828,102315,2829,102316,2830,102317,2831,102318,2832,102320,2833,102321,2834,102322,2835,102323,2836,102324,2837,102325,2838,102326,2839,102327,2840,102330,2841,102334,2842,102335,2843,102336,2844,102337,2845,102338,2846,102339,2847,102340,2848,102341,2849,102342,2850,102343,2851,102344,2852,102345,2853,102346,
2854,102347,2855,102348,2856,102349,2857,102350,2858,102351,2859,102352,2860,102353,2861,102354,2862,102355,2863,102356,2864,102357,2865,102358,2866,102361,2942,102167,2943,102169,2944,2139,2945,2140,2946,2141,2947,2142,2948,2143,2949,2144,2950,2145,2951,2146,2952,2147,2953,2036,2954,2291,2955,2153,2956,2152,2957,2151,2958,2150,2959,2149,2960,2037,2961,2038,2962,2148,2965,2244,2966,2245,3003,102091,3004,102092,3005,102190,3060,2982,3067,102139,3072,102606,3074,102608,3075,102208,3077,102210,3078,
102123,3080,102119,3081,102603,3082,102602,3083,102601,3088,65163,3089,102763,3090,102363,3092,102151,3093,102152,3094,102153,3095,102154,3096,102155,3097,102145,3098,102146,3099,102147,3100,102148,3101,102149,3102,2155,3107,102172,3110,102170,3111,102171,3119,2214,3158,102234,3159,102235,3160,102236,3336,2979,3338,102006,3346,2600,3370,102126,3371,102127,3372,102130,3373,102131,3389,2577,3390,2694,3400,102184,3401,102185,3404,3359,3407,3366,3417,102675,3418,102676,3419,102677,3420,102678,3421,102707,
3422,102708,3423,102709,3424,102711,3433,102651,3434,102652,3435,102671,3436,102672,3437,102710,3438,102730,3448,102095,3451,102681,3452,102682,3455,102735,3461,2063,3462,2064,3463,3073,3464,3076,3560,102742,3566,102743,3567,102744,3734,102722,3735,102723,3736,102755,3737,102756,3738,102757,3739,102758,3741,102205,3742,102206,3743,102207,3748,102211,3750,102202,3751,102203,3759,102663,3760,102463,3764,102112,3770,102090,3771,102180,3772,102181,3773,102182,3775,102186,3776,102187,3777,102188,3800,
102183,3801,102189,3812,102199,3814,102609,3815,102469,3819,104990,3821,104136,3824,104137,3825,102444,3826,102443,3827,102442,3828,102441,3857,102100,3889,104991,3906,104992,4048,103201,4049,103202,4050,103203,4051,103204,4056,103205,4057,103206,4058,103207,4059,103208,4060,103209,4061,103210,4062,103211,4063,103212,4071,103213,4082,103214,4083,103215,4093,103216,4094,103217,4095,103218,4096,103219,4167,104108,4169,37252,4171,104107,4189,104110,4197,4234,4223,37223,4304,104304,4414,102201,4415,102762,
4417,102764,4434,102765,4437,102647,4455,32029,4456,32018,4457,3454,4462,102439,4463,4466,4470,4469,4484,103794,4485,103795,4486,103796,4487,103797,4488,103798,4489,103799,4611,104104,4612,104111,4613,37255,4615,37247,4616,37250,4617,4140,4618,4291,4620,37211,4626,37235,4647,102362,4658,37204,4668,37201,4669,4126,4672,37217,4673,104125,4675,37220,4684,37232,4698,4631,4707,37213,4708,37231,4709,37212,4710,37238,4711,37214,4712,37237,4713,37208,4714,37215,4715,37253,4716,37216,4717,37239,4719,37219,
4722,37242,4724,37233,4725,37222,4727,37224,4728,37246,4729,37226,4730,37227,4731,37228,4732,37229,4733,37230,4734,37251,4735,37259,4736,37254,4739,37205,4758,104133,4760,37001,4762,104114,4826,102214,5013,104142,5014,102331,5015,102332,5016,102333,5173,102085,5174,102086,5175,102087,5176,102088,5177,102089,5178,102040,5179,102080,5185,102081,5186,102082,5187,102083,5188,102084,5221,102066,5246,104100,5247,102490,5324,104144,5325,102420,5329,2934,5365,104143,5367,102305,5451,104132,5513,102065,5514,
102067,5519,102111,5520,31461,5646,102745,5839,5388,5858,5532,5879,4474,6207,104256,6244,102769,6245,102790,6246,102770,6247,102771,6248,102793,6249,102796,6250,102772,6251,102788,6252,102775,6253,102795,6254,102781,6255,102767,6256,102774,6257,102768,6258,102797,6259,102789,6260,102780,6261,102783,6262,102787,6263,102791,6264,102777,6265,102798,6266,102779,6267,102784,6268,102792,6269,102782,6270,102785,6271,102794,6272,102773,6273,102778,6274,102786,6275,102776,6311,104141,6318,104145,6322,104287,
6325,104286,6328,102046,6329,102047,6330,102048,6331,102049,6332,102050,6333,102051,6334,102052,6335,102053,6336,102054,6337,102055,6338,102056,6339,102057,6340,102058,6341,102059,6342,102382,6343,102383,6344,102384,6345,102385,6346,102386,6347,102387,6348,102388,6350,102965,6355,102975,6356,102976,6391,6141,6393,102966,6394,102977,6395,102978,6396,102979,6397,102980,6398,102981,6399,102982,6400,102983,6401,102984,6402,102985,6403,102986,6404,102988,6405,102991,6406,102987,6407,102990,6408,102989,
6409,102992,6410,102993,6411,102995,6412,102994,6413,102996,6414,102962,6415,102997,6416,103003,6417,102998,6418,103004,6419,102999,6420,103005,6421,103E3,6422,103006,6423,103001,6424,103007,6425,103002,6426,103008,6427,103010,6428,103013,6429,103009,6430,103012,6431,103011,6432,103014,6433,103015,6434,103016,6435,103017,6436,103018,6437,103019,6438,103022,6439,102967,6440,103021,6441,103024,6442,103020,6443,103023,6444,103025,6445,103027,6446,103026,6447,103028,6448,103030,6449,103033,6450,103029,
6451,103032,6452,103031,6453,103034,6454,103035,6455,103037,6456,103036,6457,103038,6458,103039,6459,103041,6460,103040,6461,103042,6462,103043,6463,103045,6464,103044,6465,103046,6466,103047,6467,103049,6468,103048,6469,103050,6470,103051,6471,103052,6472,103053,6473,103054,6474,103055,6475,103056,6476,103057,6477,103059,6478,103058,6479,103060,6480,103066,6481,103065,6482,103067,6483,103061,6484,103063,6485,103062,6486,103064,6487,103068,6488,103069,6489,103071,6490,103073,6491,103070,6492,103072,
6493,103075,6494,103078,6495,103074,6496,103077,6497,102968,6498,103076,6499,103079,6500,103081,6501,103084,6502,103080,6503,103083,6504,103082,6505,103085,6506,103086,6507,103088,6508,102963,6509,103087,6510,103089,6511,103091,6512,103090,6513,103092,6514,103093,6515,103094,6516,103095,6518,103098,6519,103101,6520,103097,6521,103100,6522,103099,6523,103102,6524,103103,6525,103104,6526,103105,6527,103106,6528,103108,6529,103111,6530,103107,6531,103110,6532,103109,6533,103112,6534,103114,6535,103118,
6536,103113,6537,103117,6538,103116,6539,103120,6540,103115,6541,103119,6542,103121,6543,103122,6544,103123,6545,103125,6546,103124,6547,103126,6548,103127,6549,103129,6550,103128,6551,103130,6552,103131,6553,103133,6554,103132,6555,103134,6556,102969,6557,102970,6558,103135,6559,103137,6560,103136,6561,103138,6562,103139,6563,103140,6564,103141,6565,103142,6566,103200,6567,103143,6568,103144,6569,103145,6570,103146,6571,103147,6572,103149,6573,103148,6574,103150,6575,103151,6576,103152,6577,103155,
6578,103160,6579,102971,6580,102972,6581,103153,6582,103158,6583,103154,6584,103159,6585,103157,6586,103162,6587,103156,6588,103161,6589,103172,6590,103173,6592,103174,6593,103176,6594,103175,6595,103177,6596,103178,6597,103180,6598,103179,6599,103181,6600,103182,6601,103184,6602,103183,6603,103185,6605,103190,6606,103186,6607,103189,6608,103188,6609,103191,6610,102973,6611,103192,6612,103196,6613,103193,6614,103197,6615,103195,6616,103199,6617,103194,6618,103198,6619,103164,6620,103163,6621,103165,
6625,103170,6626,103169,6627,103171,6628,102520,6629,102521,6630,102522,6631,102523,6632,102524,6633,102527,6634,102493,6635,102494,6636,102496,6637,102495,6668,104020,6669,102610,6670,102611,6671,102612,6672,102613,6673,102614,6674,102615,6675,102616,6676,102617,6677,102618,6678,102619,6679,102620,6680,102621,6681,102622,6682,102623,6683,102624,6684,102625,6685,102626,6686,102627,6687,102628,6688,102593,6689,102594,6690,102595,6691,102596,6692,102597,6783,104223,6784,102530,6785,102500,6788,102532,
6789,102502,6792,102533,6793,102503,6796,102531,6797,102501,6800,102534,6801,102504,6804,102535,6805,102505,6808,102536,6809,102506,6812,102537,6813,102507,6816,102538,6817,102508,6820,102539,6821,102509,6824,102540,6825,102510,6828,102541,6829,102511,6832,102542,6833,102512,6836,102543,6837,102513,6840,102544,6841,102514,6844,102546,6845,102516,6848,102545,6849,102515,6852,102547,6853,102517,6856,102548,6857,102518,6860,102549,6861,102519,6867,102380,6868,102381,6879,103187,6880,103096,6884,102376,
6885,102378,6886,102377,6887,102379,7136,6980,7139,6987,7142,102706,7692,102557,7693,102558,7694,102559,7695,102560,7696,102561,8090,103318,8091,103418,8092,103317,8093,103417,8095,103371,8096,103471,8097,103369,8098,103469,8099,103368,8100,103468,8101,103367,8102,103467,8103,103366,8104,103466,8105,103365,8106,103465,8107,103364,8108,103464,8109,103363,8110,103463,8111,103362,8112,103462,8113,103361,8114,103461,8115,103360,8116,103460,8117,103359,8118,103459,8119,103357,8120,103457,8121,103356,8122,
103456,8123,103355,8124,103455,8125,103354,8126,103454,8127,103353,8128,103453,8129,103352,8130,103452,8131,103350,8132,103450,8133,103349,8134,103449,8135,103348,8136,103448,8139,103343,8140,103443,8141,103342,8142,103442,8143,103341,8144,103441,8145,103339,8146,103439,8147,103337,8148,103437,8149,103336,8150,103436,8151,103334,8152,103434,8153,103333,8154,103433,8155,103331,8156,103431,8161,103326,8162,103426,8163,103325,8164,103425,8165,103324,8166,103424,8171,103321,8172,103421,8173,103320,8177,
103420,8179,103316,8180,103416,8181,103315,8182,103415,8184,103314,8185,103414,8191,103312,8193,103412,8196,103311,8197,103411,8198,103310,8200,103410,8201,103309,8202,103409,8203,103308,8204,103408,8207,103306,8208,103406,8209,103305,8210,103405,8212,103304,8213,103404,8214,103303,8216,103403,8218,103302,8220,103402,8222,103301,8224,103401,8431,104248,8441,102590,8693,102449,8826,102605,8857,54035,8858,54036,8859,54037,8860,8449,8988,104115,8989,104116,8990,104117,8991,104118,8992,104119,8993,104120,
8994,104121,8995,104122,8996,104123,8997,104124,8998,104896,8999,104257,9E3,104019,9014,104010,9019,104021,9053,104011,9054,104012,9055,104013,9056,104014,9057,104015,9059,104258,9060,104179,9061,104180,9062,104181,9063,104182,9064,104183,9065,104184,9066,104185,9067,104186,21896,21891,21897,21892,21898,21893,21899,21894,26701,102124,26702,102125,26799,26747,26847,102683,26848,102684,26849,102691,26850,102692,26851,102693,26852,102704,26853,102750,26854,102751,26857,102466,26858,102467,26859,102468,
26901,102128,26902,102129,27493,27492,29101,29100,29168,29118,29169,29119,29170,29120,29171,29121,29172,29122,29187,29177,29188,29178,29189,29179,29190,29180,29191,29181,29192,29182,29193,29183,29194,29184,29195,29185,29902,29900,31279,31278,31281,31291,31282,31292,31283,31293,31284,31294,31285,31295,31286,31296,31287,31297,31466,31462,31467,31463,31468,31464,31469,31465,31986,31917,31987,31918,31988,31919,31989,31920,31990,31921,31991,31922,32064,32074,32065,32075,32066,32076,32067,32077,102550,
2181,102551,2182,102552,2183,102553,2184,102554,2185,102555,2186,102556,2187],pcsid:[2066,15,2136,12,2155,10,2157,5,2158,5,2159,12,2160,12,2219,5,2220,5,2244,10,2245,10,2256,11,2265,11,2266,11,2269,11,2270,11,2273,11,2290,5,2291,5,2294,5,2295,5,2313,5,2314,14,2899,10,2900,10,2901,11,2909,11,2910,11,2911,10,2912,10,2913,11,2914,11,2964,10,2967,10,2968,10,2991,5,2992,11,2993,5,2994,11,3073,5,3076,5,3079,5,3091,10,3106,5,3108,5,3109,5,3141,5,3142,5,3167,4,3337,5,3347,5,3348,5,3359,10,3360,5,3361,11,
3362,5,3363,10,3364,5,3365,10,3366,14,3402,5,3403,5,3405,5,3406,5,3439,5,3440,5,3447,5,3449,5,3450,5,3453,10,3454,10,3460,5,3479,11,3480,5,3481,11,3482,5,3483,11,3484,5,3485,10,3486,5,3487,10,3488,5,3489,5,3490,10,3491,5,3492,10,3493,5,3494,10,3495,5,3496,10,3497,5,3498,10,3499,5,3500,10,3501,5,3502,10,3503,5,3504,10,3505,5,3506,10,3507,5,3508,10,3509,5,3510,10,3511,5,3512,10,3513,5,3514,5,3515,10,3516,5,3517,10,3518,5,3519,10,3520,5,3521,10,3522,5,3523,10,3524,5,3525,10,3526,5,3527,10,3528,5,3529,
10,3530,5,3531,10,3532,5,3533,10,3534,5,3535,10,3536,5,3537,10,3538,5,3539,10,3540,5,3541,10,3542,5,3543,10,3544,5,3545,10,3546,5,3547,10,3548,5,3549,10,3550,5,3551,10,3552,5,3553,10,3582,10,3583,5,3584,10,3585,5,3586,10,3587,5,3588,11,3589,5,3590,11,3591,5,3592,5,3593,11,3598,10,3599,5,3600,10,3605,11,3606,5,3607,5,3608,10,3609,5,3610,10,3611,5,3612,10,3613,5,3614,10,3615,5,3616,10,3617,5,3618,10,3619,5,3620,10,3621,5,3622,10,3623,5,3624,10,3625,5,3626,10,3627,5,3628,10,3629,5,3630,10,3631,5,3632,
10,3633,5,3634,11,3635,5,3636,11,3640,10,3641,5,3642,10,3643,5,3644,11,3645,5,3646,11,3647,5,3648,11,3649,5,3650,10,3651,5,3652,10,3653,5,3654,10,3655,5,3656,11,3657,5,3658,10,3659,5,3660,10,3661,5,3662,10,3663,5,3664,10,3668,10,3669,5,3670,10,3671,5,3672,10,3673,5,3674,10,3675,5,3676,11,3677,10,3678,5,3679,11,3680,10,3681,5,3682,11,3683,10,3684,5,3685,5,3686,10,3687,5,3688,10,3689,5,3690,10,3691,5,3692,10,3696,10,3697,5,3698,10,3699,5,3700,10,3740,5,3749,5,3783,5,3784,5,3793,5,3794,5,3802,5,3816,
5,3829,5,3854,5,3911,5,3912,5,3920,5,3978,5,3979,5,3991,10,3992,10,4026,5,4037,5,4038,5,4087,5,4088,5,4217,10,4438,10,4439,10,4467,5,4471,5,4474,5,4559,5,4822,5,4839,5,5018,5,5048,5,5167,5,5168,5,5223,5,5234,5,5235,5,5243,5,5266,5,5316,5,5320,5,5321,5,5330,5,5331,5,5337,5,5361,5,5362,5,5382,5,5383,5,5396,5,5456,5,5457,5,5469,5,5472,9,5490,5,5518,5,5523,5,5559,5,5588,11,5589,14,5596,5,5627,5,5629,5,5641,5,5643,5,5644,5,5654,10,5655,10,5659,5,5700,5,5825,5,5836,5,5837,5,5842,5,5844,5,5880,5,5887,5,
5890,5,6128,11,6129,11,6141,11,6204,5,6210,5,6211,5,6307,5,6312,5,6316,5,6362,5,6591,5,6646,5,6703,5,6786,5,6787,11,6790,5,6791,11,6794,5,6795,11,6798,5,6799,11,6802,5,6803,11,6806,5,6807,11,6810,5,6811,11,6814,5,6815,11,6818,5,6819,11,6822,5,6823,11,6826,5,6827,11,6830,5,6831,11,6834,5,6835,11,6838,5,6839,11,6842,5,6843,11,6846,5,6847,11,6850,5,6851,11,6854,5,6855,11,6858,5,6859,11,6862,5,6863,11,6870,5,6875,5,6876,5,6915,5,6922,5,6923,10,6924,5,6925,10,6962,5,6984,5,6991,5,7128,10,7131,5,7132,10,
7257,5,7258,10,7259,5,7260,10,7261,5,7262,10,7263,5,7264,10,7265,5,7266,10,7267,5,7268,10,7269,5,7270,10,7271,5,7272,10,7273,5,7274,10,7275,5,7276,10,7277,5,7278,10,7279,5,7280,10,7281,5,7282,10,7283,5,7284,10,7285,5,7286,10,7287,5,7288,10,7289,5,7290,10,7291,5,7292,10,7293,5,7294,10,7295,5,7296,10,7297,5,7298,10,7299,5,7300,10,7301,5,7302,10,7303,5,7304,10,7305,5,7306,10,7307,5,7308,10,7309,5,7310,10,7311,5,7312,10,7313,5,7314,10,7315,5,7316,10,7317,5,7318,10,7319,5,7320,10,7321,5,7322,10,7323,5,
7324,10,7325,5,7326,10,7327,5,7328,10,7329,5,7330,10,7331,5,7332,10,7333,5,7334,10,7335,5,7336,10,7337,5,7338,10,7339,5,7340,10,7341,5,7342,10,7343,5,7344,10,7345,5,7346,10,7347,5,7348,10,7349,5,7350,10,7351,5,7352,10,7353,5,7354,10,7355,5,7356,10,7357,5,7358,10,7359,5,7360,10,7361,5,7362,10,7363,5,7364,10,7365,5,7366,10,7367,5,7368,10,7369,5,7370,10,7877,5,7878,5,7882,5,7883,5,7887,5,7899,5,7991,5,7992,5,8035,10,8036,10,8058,5,8059,5,8082,5,8083,5,8088,5,8137,5,8138,10,8157,5,8158,10,8159,5,8160,
10,8167,5,8168,10,8169,5,8170,10,8187,5,8189,10,8205,5,8206,10,8225,5,8226,10,8311,5,8312,11,8313,5,8314,11,8315,5,8316,11,8317,5,8318,11,8319,5,8320,11,8321,5,8322,11,8323,5,8324,11,8325,5,8326,11,8327,5,8328,11,8329,5,8330,11,8331,5,8332,11,8333,5,8334,11,8335,5,8336,11,8337,5,8338,11,8339,5,8340,11,8341,5,8342,11,8343,5,8344,11,8345,5,8346,11,8347,5,8348,11,8352,5,8353,5,8379,5,8380,10,8381,5,8382,10,8383,5,8384,10,8385,5,8387,10,8391,5,8395,5,8433,5,8455,5,8456,5,8531,10,8682,5,8687,5,8692,5,
8903,5,8950,5,8951,5,9039,5,9040,5,9141,5,9149,5,9150,5,9191,5,9221,5,9222,5,20499,5,20538,5,20539,5,20790,5,20791,5,21291,5,21292,5,21500,5,21817,5,21818,5,22032,5,22033,5,22091,5,22092,5,22332,5,22391,5,22392,5,22700,5,22770,5,22780,5,22832,5,23090,5,23095,5,23239,5,23240,5,23433,5,23700,5,24047,5,24048,5,24100,14,24200,5,24305,5,24306,5,24382,6,24383,5,24500,5,24547,5,24548,5,24571,2,24600,5,25E3,5,25231,5,25884,5,25932,5,26237,5,26331,5,26332,5,26591,5,26592,5,26632,5,26692,5,26855,10,26856,10,
27120,5,27200,5,27291,7,27292,7,27429,5,27492,5,27500,5,27700,5,28232,5,28600,5,28991,5,28992,5,29100,5,29220,5,29221,5,29333,5,29635,5,29636,5,29701,5,29738,5,29739,5,29849,5,29850,5,29871,3,29872,13,29873,5,29900,5,29901,5,29903,5,30200,15,30339,5,30340,5,30791,5,30792,5,31028,5,31121,5,31154,5,31170,5,31171,5,31370,5,31528,5,31529,5,31600,5,31700,5,31838,5,31839,5,31901,5,32061,5,32062,5,32098,5,32099,10,32100,5,32104,5,32161,5,32766,5,53048,5,53049,5,54090,5,54091,5,65061,10,65062,10,65161,5,
65163,5,102041,10,102064,8,102068,1,102069,0,102118,10,102119,11,102120,10,102121,10,102217,10,102218,5,102219,10,102220,10,102378,11,102379,11,102380,5,102381,11,102498,5,102499,5,102589,10,102590,5,102599,10,102600,10,102604,10,102605,5,102606,5,102647,5,102704,10,102705,10,102706,5,102733,10,102761,10,102762,5,102763,10,102764,5,102765,5,102766,10,102962,5,102963,5,102970,11,102974,10,102993,5,102994,5,102995,10,102996,10,103015,5,103016,10,103017,5,103018,10,103025,5,103026,5,103027,10,103028,
10,103035,5,103036,5,103037,10,103038,10,103039,5,103040,5,103041,10,103042,10,103043,5,103044,5,103045,10,103046,10,103047,5,103048,5,103049,10,103050,10,103051,5,103052,10,103053,5,103054,10,103055,5,103056,10,103057,5,103058,5,103059,10,103060,10,103061,5,103062,5,103063,10,103064,10,103069,10,103070,5,103071,5,103072,10,103073,10,103086,5,103087,5,103088,10,103089,10,103094,11,103095,5,103096,10,103103,5,103104,10,103105,5,103106,10,103121,5,103122,10,103123,5,103124,5,103125,11,103126,11,103127,
5,103128,5,103129,10,103130,10,103131,5,103132,5,103133,10,103134,10,103135,5,103136,5,103137,11,103138,11,103139,5,103140,10,103141,5,103142,10,103143,5,103144,10,103145,5,103146,11,103147,5,103148,5,103149,10,103150,10,103151,5,103152,10,103172,5,103173,10,103174,5,103175,5,103176,10,103177,10,103178,5,103179,5,103180,10,103181,10,103182,5,103183,5,103184,10,103185,10,103228,5,103229,5,103230,10,103231,10,103250,5,103251,10,103252,5,103253,10,103260,5,103261,5,103262,10,103263,10,103270,5,103271,
5,103272,10,103273,10,103274,5,103275,5,103276,10,103277,10,103278,5,103279,5,103280,10,103281,10,103282,5,103283,5,103284,10,103285,10,103286,5,103287,10,103288,5,103289,10,103290,5,103291,10,103292,5,103293,5,103294,10,103295,10,103296,5,103297,5,103298,10,103299,10,103376,10,103377,5,103378,5,103379,10,103380,10,103393,5,103394,5,103395,10,103396,10,103472,5,103473,11,103474,5,103475,10,103482,5,103483,10,103484,5,103485,10,103500,5,103501,10,103502,5,103503,5,103504,11,103505,11,103506,5,103507,
5,103508,10,103509,10,103510,5,103511,5,103512,10,103513,10,103514,5,103515,10,103516,5,103517,10,103518,5,103519,10,103520,5,103521,11,103522,5,103523,5,103524,10,103525,10,103526,5,103527,10,103561,10,103562,10,103563,5,103564,5,103565,10,103566,10,103567,5,103568,5,103569,10,103570,10,103585,10,103586,5,103587,10,103588,11,103589,5,103590,10,103591,11,103592,5,103593,10,103594,11,103695,10,103846,5,103946,10],pcsidc:[[2E3,2045,5],[2056,2065,5],[2067,2135,5],[2137,2153,5],[2161,2170,5],[2172,2193,
5],[2196,2198,5],[2200,2203,5],[2206,2217,5],[2222,2224,11],[2251,2253,11],[2280,2282,11],[2308,2311,5],[2315,2325,5],[2327,2394,5],[2400,2491,5],[2494,2758,5],[2867,2869,11],[2870,2888,10],[2891,2895,10],[2896,2898,11],[2902,2908,10],[2915,2920,10],[2921,2923,11],[2924,2930,10],[2931,2941,5],[2969,2973,5],[2975,2982,5],[2984,2988,5],[2995,3002,5],[3006,3051,5],[3054,3059,5],[3061,3066,5],[3068,3071,5],[3084,3087,5],[3112,3118,5],[3120,3138,5],[3146,3151,5],[3153,3157,5],[3161,3166,5],[3168,3172,
5],[3174,3203,5],[3294,3313,5],[3315,3335,5],[3339,3345,5],[3350,3358,5],[3367,3369,5],[3374,3388,5],[3391,3399,5],[3408,3416,5],[3425,3432,10],[3441,3446,10],[3456,3459,10],[3465,3478,5],[3554,3559,5],[3561,3565,10],[3568,3570,10],[3571,3581,5],[3594,3597,5],[3601,3604,5],[3637,3639,5],[3665,3667,5],[3693,3695,5],[3701,3727,5],[3728,3733,10],[3744,3747,5],[3753,3758,10],[3761,3763,5],[3765,3769,5],[3779,3781,5],[3788,3791,5],[3797,3799,5],[3832,3841,5],[3844,3852,5],[3873,3885,5],[3890,3893,5],[3942,
3950,5],[3968,3970,5],[3973,3976,5],[3986,3989,5],[3994,3997,5],[4390,4398,5],[4399,4413,10],[4418,4433,10],[4491,4554,5],[4568,4589,5],[4652,4656,5],[4766,4800,5],[5069,5072,5],[5105,5130,5],[5180,5184,5],[5253,5259,5],[5269,5275,5],[5292,5311,5],[5343,5349,5],[5355,5357,5],[5387,5389,5],[5459,5463,5],[5479,5482,5],[5530,5539,5],[5550,5552,5],[5562,5583,5],[5623,5625,10],[5631,5639,5],[5649,5653,5],[5663,5680,5],[5682,5685,5],[5875,5877,5],[5896,5899,5],[5921,5940,5],[6050,6125,5],[6351,6354,5],
[6366,6372,5],[6381,6387,5],[6622,6624,5],[6707,6709,5],[6720,6723,5],[6732,6738,5],[6931,6933,5],[7005,7007,5],[7057,7070,10],[7074,7082,5],[7109,7118,5],[7119,7127,11],[7374,7376,5],[7528,7586,5],[7587,7645,10],[7755,7787,5],[7791,7795,5],[7799,7801,5],[7803,7805,5],[7825,7831,5],[7845,7859,5],[8013,8032,5],[8065,8068,11],[8518,8529,10],[8533,8536,10],[8538,8540,10],[8677,8679,5],[8836,8840,5],[8908,8910,5],[9154,9159,5],[9205,9218,5],[20002,20032,5],[20062,20092,5],[20135,20138,5],[20248,20258,
5],[20348,20358,5],[20436,20440,5],[20822,20824,5],[20934,20936,5],[21035,21037,5],[21095,21097,5],[21148,21150,5],[21413,21423,5],[21473,21483,5],[21780,21782,5],[21891,21894,5],[22171,22177,5],[22181,22187,5],[22191,22197,5],[22234,22236,5],[22521,22525,5],[22991,22994,5],[23028,23038,5],[23830,23853,5],[23866,23872,5],[23877,23884,5],[23886,23894,5],[23946,23948,5],[24311,24313,5],[24342,24347,5],[24370,24374,6],[24375,24381,5],[24718,24721,5],[24817,24821,5],[24877,24882,5],[24891,24893,5],[25391,
25395,5],[25828,25838,5],[26191,26195,5],[26391,26393,5],[26703,26722,5],[26729,26760,10],[26766,26798,10],[26860,26870,10],[26891,26899,5],[26903,26923,5],[26929,26946,5],[26948,26998,5],[27037,27040,5],[27205,27232,5],[27258,27260,5],[27391,27398,5],[27561,27564,5],[27571,27574,5],[27581,27584,5],[27591,27594,5],[28191,28193,5],[28348,28358,5],[28402,28432,5],[28462,28492,5],[29118,29122,5],[29177,29185,5],[30161,30179,5],[30491,30494,5],[30729,30732,5],[31251,31259,5],[31265,31268,5],[31275,31278,
5],[31288,31297,5],[31461,31465,5],[31491,31495,5],[31917,31922,5],[31965,31985,5],[31992,32E3,5],[32001,32003,10],[32005,32031,10],[32033,32060,10],[32074,32077,10],[32081,32086,5],[32107,32130,5],[32133,32158,5],[32164,32167,10],[32180,32199,5],[32201,32260,5],[32301,32360,5],[32601,32662,5],[32664,32667,10],[32701,32761,5],[53001,53004,5],[53008,53019,5],[53021,53032,5],[53034,53037,5],[53042,53046,5],[53074,53080,5],[54001,54004,5],[54008,54019,5],[54021,54032,5],[54034,54037,5],[54042,54046,
5],[54048,54053,5],[54074,54080,5],[54098,54101,5],[102001,102040,5],[102042,102063,5],[102065,102067,5],[102070,102112,5],[102114,102117,5],[102122,102208,5],[102210,102216,5],[102221,102300,5],[102304,102377,5],[102382,102388,5],[102389,102398,10],[102399,102444,5],[102445,102447,10],[102448,102458,5],[102459,102468,10],[102469,102496,5],[102500,102519,11],[102520,102524,5],[102525,102529,10],[102530,102549,5],[102557,102588,5],[102593,102598,5],[102601,102603,5],[102608,102628,5],[102629,102646,
10],[102648,102672,10],[102675,102700,10],[102701,102703,5],[102707,102730,10],[102735,102758,10],[102767,102900,5],[102965,102969,5],[102971,102973,5],[102975,102989,5],[102990,102992,11],[102997,103002,5],[103003,103008,10],[103009,103011,5],[103012,103014,10],[103019,103021,5],[103022,103024,10],[103029,103031,5],[103032,103034,10],[103065,103068,5],[103074,103076,5],[103077,103079,11],[103080,103082,5],[103083,103085,10],[103090,103093,5],[103097,103099,5],[103100,103102,10],[103107,103109,5],
[103110,103112,10],[103113,103116,5],[103117,103120,10],[103153,103157,5],[103158,103162,10],[103163,103165,5],[103166,103168,11],[103169,103171,10],[103186,103188,5],[103189,103191,10],[103192,103195,5],[103196,103199,10],[103200,103224,5],[103225,103227,11],[103232,103237,5],[103238,103243,10],[103244,103246,5],[103247,103249,10],[103254,103256,5],[103257,103259,10],[103264,103266,5],[103267,103269,10],[103300,103375,5],[103381,103383,5],[103384,103386,11],[103387,103389,5],[103390,103392,10],[103397,
103399,5],[103400,103471,10],[103476,103478,5],[103479,103481,10],[103486,103488,5],[103489,103491,10],[103492,103495,5],[103496,103499,10],[103539,103543,5],[103544,103548,10],[103549,103551,5],[103552,103554,11],[103555,103557,10],[103558,103560,5],[103571,103573,5],[103574,103576,10],[103577,103580,5],[103581,103583,10],[103595,103597,5],[103600,103694,5],[103696,103698,5],[103700,103793,10],[103794,103799,5]],gcsid:[4001,81,4002,85,4003,70,4004,84,4005,82,4006,83,4007,60,4008,67,4009,39,4010,
57,4011,63,4012,64,4013,64,4014,63,4015,92,4016,90,4018,86,4019,75,4020,68,4021,70,4022,55,4023,75,4024,66,4025,73,4027,95,4028,59,4029,58,4031,75,4032,78,4033,77,4034,65,4035,100,4036,70,4042,88,4044,87,4045,89,4046,75,4047,99,4052,101,4053,97,4054,61,4075,75,4081,75,4120,84,4121,75,4122,80,4123,55,4124,84,4126,75,4130,75,4131,92,4132,64,4133,75,4134,64,4140,75,4141,75,4142,64,4143,64,4144,92,4145,87,4146,89,4147,66,4148,75,4149,84,4150,84,4151,75,4152,75,4153,55,4154,55,4155,63,4156,84,4157,60,
4162,84,4163,75,4164,66,4165,55,4166,75,4168,58,4170,75,4172,75,4173,75,4174,58,4175,64,4176,75,4178,66,4179,66,4180,75,4188,81,4190,75,4191,66,4192,55,4193,63,4198,64,4199,55,4200,66,4201,64,4202,70,4203,70,4204,55,4205,66,4206,63,4207,55,4208,55,4209,64,4210,64,4211,84,4212,64,4213,63,4214,66,4215,55,4216,67,4218,55,4219,84,4220,64,4221,55,4222,64,4224,55,4225,55,4229,68,4230,55,4231,55,4232,64,4234,64,4235,55,4236,55,4237,70,4238,70,4239,92,4240,92,4241,65,4242,67,4243,88,4244,92,4245,86,4246,
64,4250,64,4251,64,4252,63,4253,67,4254,55,4255,55,4256,64,4257,84,4258,75,4259,55,4260,64,4261,106,4262,84,4263,64,4265,55,4266,63,4267,67,4269,75,4270,64,4271,55,4272,55,4273,82,4274,55,4275,63,4276,73,4280,84,4281,57,4282,63,4283,75,4284,66,4285,55,4286,68,4288,55,4289,84,4291,70,4292,55,4293,83,4294,84,4295,84,4296,63,4297,55,4298,90,4299,85,4300,85,4301,84,4302,60,4303,68,4306,84,4307,64,4308,84,4309,55,4310,63,4311,55,4312,84,4313,55,4314,84,4315,63,4316,55,4317,66,4318,75,4319,75,4322,80,4324,
80,4326,75,4466,75,4469,75,4475,55,4483,75,4490,75,4555,66,4558,75,4608,67,4609,67,4610,74,4614,55,4619,75,4624,75,4625,55,4627,75,4636,55,4637,55,4638,67,4639,55,4657,93,4659,75,4660,55,4661,75,4666,84,4667,75,4670,75,4671,63,4674,75,4679,64,4680,64,4682,92,4683,67,4686,75,4687,75,4693,75,4694,75,4695,67,4696,64,4697,64,4702,75,4703,64,4704,55,4705,55,4706,68,4718,55,4720,80,4721,55,4723,67,4726,67,4737,75,4738,60,4740,79,4741,55,4742,75,4743,64,4744,64,4745,84,4746,84,4747,75,4748,56,4749,75,4750,
75,4751,91,4752,56,4753,55,4754,55,4759,75,4761,75,4801,84,4802,55,4803,55,4804,84,4805,84,4806,55,4807,106,4808,84,4809,55,4810,105,4811,106,4816,106,4817,82,4818,84,4820,84,4821,106,4823,55,4824,55,4901,107,4902,107,4903,59,4904,84,5228,84,5229,84,5233,92,5252,75,5264,75,5340,75,5354,75,5360,75,5371,75,5373,75,5381,75,5393,75,5464,60,5467,67,5489,75,5524,55,5527,70,5546,75,5561,66,5593,75,5681,84,5886,75,6135,75,6365,75,6706,75,6881,64,6882,64,6883,55,6892,64,6894,64,6980,75,6983,75,6987,75,6990,
75,7035,75,7037,75,7039,75,7041,75,7073,75,7084,75,7086,75,7133,75,7373,75,7683,76,7798,75,7844,75,7881,75,7886,75,8042,96,8043,96,8086,75,8232,75,8237,75,8240,75,8246,75,8249,75,8252,75,8255,75,8351,84,8427,75,8428,55,8449,75,8545,75,8685,75,8694,64,8699,75,8818,75,8888,75,8900,75,8902,75,8907,75,8949,75,9003,75,9006,75,9009,75,9012,75,9017,75,9068,75,9069,75,9140,75,9148,75,9153,75,37001,73,37002,69,37003,72,37004,71,37005,62,37006,91,37007,94,37008,101,37201,55,37202,92,37203,87,37204,55,37205,
55,37206,64,37207,71,37208,64,37211,64,37220,67,37221,55,37222,55,37223,63,37224,55,37225,106,37226,55,37227,55,37228,64,37229,62,37230,55,37231,70,37232,55,37233,55,37235,55,37237,55,37238,55,37239,67,37240,64,37241,55,37242,55,37243,67,37252,67,37253,55,37254,64,37255,84,37257,66,37259,55,37260,67,104017,79,104018,79,104024,75,104027,75,104047,98,104050,75,104100,75,104101,84,104102,84,104103,64,104104,55,104105,84,104106,55,104107,75,104108,75,104109,67,104110,75,104111,75,104112,67,104113,67,
104128,102,104129,75,104130,55,104131,84,104132,67,104133,75,104134,75,104135,66,104136,70,104137,75,104138,55,104139,106,104140,106,104223,75,104248,55,104256,92,104261,63,104286,75,104287,75,104304,63,104700,49,104701,9,104702,24,104703,15,104704,28,104705,32,104706,53,104707,46,104708,37,104709,54,104710,11,104711,14,104712,30,104713,52,104714,4,104715,4,104716,23,104717,14,104718,48,104719,29,104720,22,104721,21,104722,35,104723,21,104724,46,104725,22,104726,49,104727,45,104728,52,104729,10,104730,
10,104731,21,104732,31,104733,26,104734,40,104735,19,104736,30,104737,34,104738,27,104739,46,104740,5,104741,12,104742,50,104743,9,104744,43,104745,21,104746,26,104747,25,104748,21,104749,7,104750,53,104751,6,104752,33,104753,29,104754,19,104755,41,104756,31,104757,3,104758,41,104759,25,104760,49,104761,41,104762,44,104763,50,104764,46,104765,6,104766,40,104767,16,104768,8,104769,17,104770,48,104771,42,104772,50,104773,25,104774,29,104775,25,104776,32,104777,13,104778,36,104779,47,104780,14,104781,
29,104782,23,104783,38,104784,42,104785,18,104786,20,104808,51,104896,75,104900,112,104901,104,104902,103,104903,116,104904,109,104905,108,104906,169,104907,164,104908,0,104909,168,104910,141,104911,166,104912,114,104913,160,104914,151,104915,117,104916,110,104917,140,104918,115,104919,170,104920,163,104921,154,104922,158,104923,161,104924,148,104925,0,104926,159,104927,167,104928,127,104929,131,104930,145,104931,159,104932,136,104933,123,104934,139,104935,134,104936,166,104937,150,104938,137,104939,
147,104940,121,104941,165,104942,128,104943,111,104944,1,104945,126,104946,152,104947,157,104948,162,104949,153,104950,156,104951,149,104952,132,104953,122,104954,160,104955,146,104956,143,104957,156,104958,120,104959,125,104960,2,104961,144,104962,142,104963,138,104964,155,104965,135,104966,133,104967,151,104968,118,104969,119,104970,124,104971,108,104972,129,104973,130,104974,113,104975,0,104990,84,104991,75,104992,84],gcsidc:[[4127,4129,67],[4135,4139,67],[4158,4161,55],[4181,4185,55],[4194,4196,
55],[4226,4228,63],[4247,4249,55],[4277,4279,81],[4600,4607,64],[4621,4623,55],[4628,4633,55],[4641,4646,55],[4662,4665,55],[4676,4678,66],[4688,4692,55],[4699,4701,64],[4755,4757,75],[4763,4765,75],[4813,4815,84],[8972,8987,75],[37212,37219,55],[37245,37247,55],[37249,37251,55],[104009,104015,75],[104019,104022,75],[104114,104124,75],[104125,104127,55],[104141,104145,75],[104179,104186,75],[104257,104260,75]]},l={c:[[2E3,2035,9001],[2039,2045,9001],[2056,2062,9001],[2067,2090,9001],[2093,2135,9001],
[2161,2165,9001],[2172,2180,9001],[2188,2193,9001],[2195,2198,9001],[2200,2203,9001],[2205,2213,9001],[2215,2217,9001],[2222,2224,9002],[2225,2243,9003],[2246,2250,9003],[2251,2253,9002],[2257,2264,9003],[2274,2279,9003],[2280,2282,9002],[2283,2289,9003],[2308,2313,9001],[2315,2491,9001],[2494,2576,9001],[2578,2599,9001],[2601,2693,9001],[2695,2866,9001],[2867,2869,9002],[2870,2888,9003],[2891,2895,9003],[2896,2898,9002],[2902,2908,9003],[2915,2920,9003],[2921,2923,9002],[2924,2930,9003],[2931,2933,
9001],[2935,2962,9001],[2964,2968,9003],[2969,2973,9001],[2975,2978,9001],[2984,2988,9001],[2995,3051,9001],[3054,3072,9001],[3077,3079,9001],[3081,3088,9001],[3092,3101,9001],[3106,3138,9001],[3146,3151,9001],[3153,3166,9001],[3168,3172,9001],[3174,3203,9001],[3294,3313,9001],[3315,3348,9001],[3350,3358,9001],[3367,3403,9001],[3408,3416,9001],[3417,3438,9003],[3441,3446,9003],[3447,3450,9001],[3451,3453,9003],[3455,3459,9003],[3460,3478,9001],[3554,3559,9001],[3560,3570,9003],[3571,3581,9001],[3594,
3597,9001],[3601,3604,9001],[3637,3639,9001],[3665,3667,9001],[3693,3695,9001],[3701,3727,9001],[3728,3739,9003],[3740,3751,9001],[3753,3760,9003],[3761,3773,9001],[3775,3777,9001],[3779,3781,9001],[3788,3791,9001],[3797,3802,9001],[3814,3816,9001],[3825,3829,9001],[3832,3841,9001],[3844,3852,9001],[3873,3885,9001],[3890,3893,9001],[3942,3950,9001],[3968,3970,9001],[3973,3976,9001],[3986,3989,9001],[3994,3997,9001],[4001,4016,9102],[4018,4025,9102],[4027,4029,9102],[4031,4036,9102],[4044,4047,9102],
[4048,4051,9001],[4052,4054,9102],[4056,4063,9001],[4093,4096,9001],[4120,4124,9102],[4127,4139,9102],[4141,4176,9102],[4178,4185,9102],[4188,4216,9102],[4218,4232,9102],[4235,4260,9102],[4265,4267,9102],[4269,4286,9102],[4292,4304,9102],[4306,4319,9102],[4390,4398,9001],[4399,4413,9003],[4418,4433,9003],[4455,4457,9003],[4484,4489,9001],[4491,4554,9001],[4568,4589,9001],[4600,4630,9102],[4636,4639,9102],[4641,4646,9102],[4652,4656,9001],[4657,4680,9102],[4682,4684,9102],[4686,4765,9102],[4766,4800,
9001],[4801,4806,9102],[4813,4815,9102],[5014,5016,9001],[5069,5072,9001],[5105,5130,9001],[5173,5188,9001],[5253,5259,9001],[5269,5275,9001],[5292,5311,9001],[5329,5331,9001],[5343,5349,9001],[5355,5357,9001],[5459,5463,9001],[5479,5482,9001],[5518,5520,9001],[5533,5539,9001],[5550,5552,9001],[5562,5583,9001],[5623,5625,9003],[5631,5639,9001],[5649,5653,9001],[5663,5680,9001],[5682,5685,9001],[5875,5877,9001],[5896,5899,9001],[5921,5940,9001],[6050,6125,9001],[6244,6275,9001],[6328,6348,9001],[6350,
6356,9001],[6366,6372,9001],[6381,6387,9001],[6393,6404,9001],[6480,6483,9001],[6511,6514,9001],[6579,6581,9001],[6619,6624,9001],[6625,6627,9003],[6628,6632,9001],[6634,6637,9001],[6669,6692,9001],[6707,6709,9001],[6720,6723,9001],[6732,6738,9001],[6881,6883,9102],[6931,6933,9001],[7005,7007,9001],[7057,7070,9003],[7074,7082,9001],[7109,7118,9001],[7119,7127,9002],[7374,7376,9001],[7528,7586,9001],[7587,7645,9003],[7692,7696,9001],[7755,7787,9001],[7791,7795,9001],[7799,7801,9001],[7803,7805,9001],
[7825,7831,9001],[7845,7859,9001],[8013,8032,9001],[8065,8068,9002],[8518,8529,9003],[8533,8536,9003],[8538,8540,9003],[8677,8679,9001],[8836,8840,9001],[8857,8859,9001],[8908,8910,9001],[8972,9E3,9102],[9053,9057,9102],[9059,9069,9102],[9154,9159,9001],[9205,9218,9001],[20002,20032,9001],[20062,20092,9001],[20135,20138,9001],[20248,20258,9001],[20348,20358,9001],[20436,20440,9001],[20822,20824,9001],[20934,20936,9001],[21035,21037,9001],[21095,21097,9001],[21148,21150,9001],[21413,21423,9001],[21473,
21483,9001],[21780,21782,9001],[21896,21899,9001],[22171,22177,9001],[22181,22187,9001],[22191,22197,9001],[22234,22236,9001],[22521,22525,9001],[22991,22994,9001],[23028,23038,9001],[23830,23853,9001],[23866,23872,9001],[23877,23884,9001],[23886,23894,9001],[23946,23948,9001],[24311,24313,9001],[24342,24347,9001],[24370,24374,9084],[24375,24381,9001],[24718,24721,9001],[24817,24821,9001],[24877,24882,9001],[24891,24893,9001],[25391,25395,9001],[25828,25838,9001],[26191,26195,9001],[26391,26393,9001],
[26701,26722,9001],[26729,26746,9003],[26748,26760,9003],[26766,26799,9003],[26847,26870,9003],[26891,26899,9001],[26901,26923,9001],[26929,26946,9001],[26948,26978,9001],[26980,26998,9001],[27037,27040,9001],[27205,27232,9001],[27258,27260,9001],[27391,27398,9001],[27561,27564,9001],[27571,27574,9001],[27581,27584,9001],[27591,27594,9001],[28191,28193,9001],[28348,28358,9001],[28402,28432,9001],[28462,28492,9001],[29168,29172,9001],[29187,29195,9001],[29901,29903,9001],[30161,30179,9001],[30491,
30494,9001],[30729,30732,9001],[31251,31259,9001],[31265,31268,9001],[31275,31277,9001],[31281,31290,9001],[31466,31469,9001],[31491,31495,9001],[31965,32E3,9001],[32001,32003,9003],[32005,32017,9003],[32019,32028,9003],[32033,32035,9003],[32037,32060,9003],[32064,32067,9003],[32081,32086,9001],[32107,32130,9001],[32133,32158,9001],[32164,32167,9003],[32180,32199,9001],[32201,32260,9001],[32301,32360,9001],[32601,32662,9001],[32664,32667,9003],[32701,32761,9001],[37002,37008,9102],[53001,53004,9001],
[53008,53019,9001],[53021,53032,9001],[53034,53037,9001],[53042,53046,9001],[53074,53080,9001],[54001,54004,9001],[54008,54019,9001],[54021,54032,9001],[54042,54046,9001],[54048,54053,9001],[54074,54080,9001],[54098,54101,9001],[102001,102005,9001],[102007,102039,9001],[102042,102045,9001],[102060,102063,9001],[102070,102079,9001],[102096,102099,9001],[102101,102109,9001],[102114,102117,9001],[102132,102138,9001],[102141,102144,9001],[102156,102166,9001],[102173,102179,9001],[102191,102198,9001],
[102221,102228,9001],[102231,102233,9001],[102237,102240,9001],[102364,102375,9001],[102389,102398,9003],[102399,102419,9001],[102421,102438,9001],[102445,102447,9003],[102450,102458,9001],[102459,102462,9003],[102470,102489,9001],[102550,102556,9001],[102562,102588,9001],[102629,102640,9003],[102648,102650,9003],[102688,102690,9003],[102696,102700,9003],[102701,102703,9001],[102799,102900,9001],[103166,103168,9002],[103220,103224,9001],[103225,103227,9002],[103232,103237,9001],[103238,103243,9003],
[103244,103246,9001],[103247,103249,9003],[103254,103256,9001],[103257,103259,9003],[103264,103266,9001],[103267,103269,9003],[103327,103330,9001],[103344,103347,9001],[103372,103375,9001],[103381,103383,9001],[103384,103386,9002],[103387,103389,9001],[103390,103392,9003],[103397,103399,9001],[103427,103430,9003],[103444,103447,9003],[103476,103478,9001],[103479,103481,9003],[103486,103488,9001],[103489,103491,9003],[103492,103495,9001],[103496,103499,9003],[103539,103543,9001],[103544,103548,9003],
[103549,103551,9001],[103552,103554,9002],[103555,103557,9003],[103558,103560,9001],[103571,103573,9001],[103574,103576,9003],[103577,103580,9001],[103581,103583,9003],[103595,103597,9001],[103600,103694,9001],[103696,103698,9001],[103700,103793,9003],[104101,104103,9102],[104126,104131,9102],[104259,104261,9102],[104700,104786,9102],[104900,104975,9102]],nc:[2065,9001,2066,9039,2136,9094,2137,9001,2138,9001,2154,9001,2157,9001,2158,9001,2159,9094,2160,9094,2169,9001,2170,9001,2204,9003,2219,9001,
2220,9001,2254,9003,2255,9003,2256,9002,2265,9002,2266,9002,2267,9003,2268,9003,2269,9002,2270,9002,2271,9003,2272,9003,2273,9002,2290,9001,2294,9001,2295,9001,2314,9005,2899,9003,2900,9003,2901,9002,2909,9002,2910,9002,2911,9003,2912,9003,2913,9002,2914,9002,2980,9001,2981,9001,2991,9001,2992,9002,2993,9001,2994,9002,3074,9001,3075,9001,3080,9002,3089,9003,3090,9001,3091,9003,3102,9003,3141,9001,3142,9001,3167,9301,3360,9001,3361,9002,3362,9001,3363,9003,3364,9001,3365,9003,3404,9003,3405,9001,3406,
9001,3407,9005,3439,9001,3440,9001,3479,9002,3480,9001,3481,9002,3482,9001,3483,9002,3484,9001,3485,9003,3486,9001,3487,9003,3488,9001,3489,9001,3490,9003,3491,9001,3492,9003,3493,9001,3494,9003,3495,9001,3496,9003,3497,9001,3498,9003,3499,9001,3500,9003,3501,9001,3502,9003,3503,9001,3504,9003,3505,9001,3506,9003,3507,9001,3508,9003,3509,9001,3510,9003,3511,9001,3512,9003,3513,9001,3514,9001,3515,9003,3516,9001,3517,9003,3518,9001,3519,9003,3520,9001,3521,9003,3522,9001,3523,9003,3524,9001,3525,9003,
3526,9001,3527,9003,3528,9001,3529,9003,3530,9001,3531,9003,3532,9001,3533,9003,3534,9001,3535,9003,3536,9001,3537,9003,3538,9001,3539,9003,3540,9001,3541,9003,3542,9001,3543,9003,3544,9001,3545,9003,3546,9001,3547,9003,3548,9001,3549,9003,3550,9001,3551,9003,3552,9001,3553,9003,3582,9003,3583,9001,3584,9003,3585,9001,3586,9003,3587,9001,3588,9002,3589,9001,3590,9002,3591,9001,3592,9001,3593,9002,3598,9003,3599,9001,3600,9003,3605,9002,3606,9001,3607,9001,3608,9003,3609,9001,3610,9003,3611,9001,3612,
9003,3613,9001,3614,9003,3615,9001,3616,9003,3617,9001,3618,9003,3619,9001,3620,9003,3621,9001,3622,9003,3623,9001,3624,9003,3625,9001,3626,9003,3627,9001,3628,9003,3629,9001,3630,9003,3631,9001,3632,9003,3633,9001,3634,9002,3635,9001,3636,9002,3640,9003,3641,9001,3642,9003,3643,9001,3644,9002,3645,9001,3646,9002,3647,9001,3648,9002,3649,9001,3650,9003,3651,9001,3652,9003,3653,9001,3654,9003,3655,9001,3656,9002,3657,9001,3658,9003,3659,9001,3660,9003,3661,9001,3662,9003,3663,9001,3664,9003,3668,9003,
3669,9001,3670,9003,3671,9001,3672,9003,3673,9001,3674,9003,3675,9001,3676,9002,3677,9003,3678,9001,3679,9002,3680,9003,3681,9001,3682,9002,3683,9003,3684,9001,3685,9001,3686,9003,3687,9001,3688,9003,3689,9001,3690,9003,3691,9001,3692,9003,3696,9003,3697,9001,3698,9003,3699,9001,3700,9003,3783,9001,3784,9001,3793,9001,3794,9001,3812,9001,3819,9102,3821,9102,3824,9102,3854,9001,3857,9001,3889,9102,3906,9102,3911,9001,3912,9001,3920,9001,3978,9001,3979,9001,3991,9003,3992,9003,4026,9001,4037,9001,4038,
9001,4042,9102,4071,9001,4075,9102,4081,9102,4082,9001,4083,9001,4087,9001,4088,9001,4217,9003,4261,9105,4262,9102,4263,9102,4288,9102,4289,9102,4322,9102,4324,9102,4326,9102,4414,9001,4415,9001,4417,9001,4434,9001,4437,9001,4438,9003,4439,9003,4462,9001,4463,9102,4467,9001,4470,9102,4471,9001,4475,9102,4483,9102,4490,9102,4555,9102,4558,9102,4559,9001,4632,9102,4633,9102,4647,9001,4807,9105,4808,9102,4809,9102,4810,9105,4811,9105,4816,9105,4817,9102,4818,9102,4820,9102,4821,9105,4822,9001,4823,9102,
4824,9102,4826,9001,4839,9001,4901,9105,4902,9105,4903,9102,4904,9102,5013,9102,5018,9001,5048,9001,5167,9001,5168,9001,5221,9001,5223,9001,5228,9102,5229,9102,5233,9102,5234,9001,5235,9001,5243,9001,5246,9102,5247,9001,5252,9102,5264,9102,5266,9001,5316,9001,5320,9001,5321,9001,5324,9102,5325,9001,5337,9001,5340,9102,5354,9102,5360,9102,5361,9001,5362,9001,5365,9102,5367,9001,5371,9102,5373,9102,5381,9102,5382,9001,5383,9001,5387,9001,5389,9001,5393,9102,5396,9001,5451,9102,5456,9001,5457,9001,5464,
9102,5467,9102,5469,9001,5472,9037,5489,9102,5490,9001,5513,9001,5514,9001,5523,9001,5524,9102,5527,9102,5530,9001,5531,9001,5546,9102,5559,9001,5561,9102,5588,9002,5589,9005,5593,9102,5596,9001,5627,9001,5629,9001,5641,9001,5643,9001,5644,9001,5646,9003,5654,9003,5655,9003,5659,9001,5681,9102,5700,9001,5825,9001,5836,9001,5837,9001,5839,9001,5842,9001,5844,9001,5858,9001,5879,9001,5880,9001,5886,9102,5887,9001,5890,9001,6128,9002,6129,9002,6135,9102,6204,9001,6207,9102,6210,9001,6211,9001,6307,9001,
6311,9102,6312,9001,6316,9001,6318,9102,6322,9102,6325,9102,6362,9001,6365,9102,6391,9002,6405,9002,6406,9001,6407,9002,6408,9001,6409,9002,6410,9001,6411,9003,6412,9001,6413,9003,6414,9001,6415,9001,6416,9003,6417,9001,6418,9003,6419,9001,6420,9003,6421,9001,6422,9003,6423,9001,6424,9003,6425,9001,6426,9003,6427,9001,6428,9003,6429,9001,6430,9003,6431,9001,6432,9003,6433,9001,6434,9003,6435,9001,6436,9003,6437,9001,6438,9003,6439,9001,6440,9001,6441,9003,6442,9001,6443,9003,6444,9001,6445,9003,6446,
9001,6447,9003,6448,9001,6449,9003,6450,9001,6451,9003,6452,9001,6453,9003,6454,9001,6455,9003,6456,9001,6457,9003,6458,9001,6459,9003,6460,9001,6461,9003,6462,9001,6463,9003,6464,9001,6465,9003,6466,9001,6467,9003,6468,9001,6469,9003,6470,9001,6471,9003,6472,9001,6473,9003,6474,9001,6475,9003,6476,9001,6477,9003,6478,9001,6479,9003,6484,9003,6485,9001,6486,9003,6487,9001,6488,9003,6489,9001,6490,9003,6491,9001,6492,9003,6493,9001,6494,9002,6495,9001,6496,9002,6497,9001,6498,9001,6499,9002,6500,9001,
6501,9003,6502,9001,6503,9003,6504,9001,6505,9003,6506,9001,6507,9003,6508,9001,6509,9001,6510,9003,6515,9002,6516,9001,6518,9001,6519,9003,6520,9001,6521,9003,6522,9001,6523,9003,6524,9001,6525,9003,6526,9001,6527,9003,6528,9001,6529,9003,6530,9001,6531,9003,6532,9001,6533,9003,6534,9001,6535,9003,6536,9001,6537,9003,6538,9001,6539,9003,6540,9001,6541,9003,6542,9001,6543,9003,6544,9001,6545,9002,6546,9001,6547,9002,6548,9001,6549,9003,6550,9001,6551,9003,6552,9001,6553,9003,6554,9001,6555,9003,6556,
9001,6557,9002,6558,9001,6559,9002,6560,9001,6561,9002,6562,9001,6563,9003,6564,9001,6565,9003,6566,9001,6567,9001,6568,9003,6569,9001,6570,9002,6571,9001,6572,9003,6573,9001,6574,9003,6575,9001,6576,9003,6577,9001,6578,9003,6582,9003,6583,9001,6584,9003,6585,9001,6586,9003,6587,9001,6588,9003,6589,9001,6590,9003,6591,9001,6592,9001,6593,9003,6594,9001,6595,9003,6596,9001,6597,9003,6598,9001,6599,9003,6600,9001,6601,9003,6602,9001,6603,9003,6605,9003,6606,9001,6607,9003,6608,9001,6609,9003,6610,9001,
6611,9001,6612,9003,6613,9001,6614,9003,6615,9001,6616,9003,6617,9001,6618,9003,6633,9003,6646,9001,6668,9102,6703,9001,6706,9102,6783,9102,6784,9001,6785,9002,6786,9001,6787,9002,6788,9001,6789,9002,6790,9001,6791,9002,6792,9001,6793,9002,6794,9001,6795,9002,6796,9001,6797,9002,6798,9001,6799,9002,6800,9001,6801,9002,6802,9001,6803,9002,6804,9001,6805,9002,6806,9001,6807,9002,6808,9001,6809,9002,6810,9001,6811,9002,6812,9001,6813,9002,6814,9001,6815,9002,6816,9001,6817,9002,6818,9001,6819,9002,6820,
9001,6821,9002,6822,9001,6823,9002,6824,9001,6825,9002,6826,9001,6827,9002,6828,9001,6829,9002,6830,9001,6831,9002,6832,9001,6833,9002,6834,9001,6835,9002,6836,9001,6837,9002,6838,9001,6839,9002,6840,9001,6841,9002,6842,9001,6843,9002,6844,9001,6845,9002,6846,9001,6847,9002,6848,9001,6849,9002,6850,9001,6851,9002,6852,9001,6853,9002,6854,9001,6855,9002,6856,9001,6857,9002,6858,9001,6859,9002,6860,9001,6861,9002,6862,9001,6863,9002,6867,9001,6868,9002,6870,9001,6875,9001,6876,9001,6879,9001,6880,9003,
6884,9001,6885,9002,6886,9001,6887,9002,6892,9102,6894,9102,6915,9001,6922,9001,6923,9003,6924,9001,6925,9003,6962,9001,6983,9102,6984,9001,6990,9102,6991,9001,7035,9102,7037,9102,7039,9102,7041,9102,7073,9102,7084,9102,7086,9102,7128,9003,7131,9001,7132,9003,7133,9102,7136,9102,7139,9102,7142,9001,7257,9001,7258,9003,7259,9001,7260,9003,7261,9001,7262,9003,7263,9001,7264,9003,7265,9001,7266,9003,7267,9001,7268,9003,7269,9001,7270,9003,7271,9001,7272,9003,7273,9001,7274,9003,7275,9001,7276,9003,7277,
9001,7278,9003,7279,9001,7280,9003,7281,9001,7282,9003,7283,9001,7284,9003,7285,9001,7286,9003,7287,9001,7288,9003,7289,9001,7290,9003,7291,9001,7292,9003,7293,9001,7294,9003,7295,9001,7296,9003,7297,9001,7298,9003,7299,9001,7300,9003,7301,9001,7302,9003,7303,9001,7304,9003,7305,9001,7306,9003,7307,9001,7308,9003,7309,9001,7310,9003,7311,9001,7312,9003,7313,9001,7314,9003,7315,9001,7316,9003,7317,9001,7318,9003,7319,9001,7320,9003,7321,9001,7322,9003,7323,9001,7324,9003,7325,9001,7326,9003,7327,9001,
7328,9003,7329,9001,7330,9003,7331,9001,7332,9003,7333,9001,7334,9003,7335,9001,7336,9003,7337,9001,7338,9003,7339,9001,7340,9003,7341,9001,7342,9003,7343,9001,7344,9003,7345,9001,7346,9003,7347,9001,7348,9003,7349,9001,7350,9003,7351,9001,7352,9003,7353,9001,7354,9003,7355,9001,7356,9003,7357,9001,7358,9003,7359,9001,7360,9003,7361,9001,7362,9003,7363,9001,7364,9003,7365,9001,7366,9003,7367,9001,7368,9003,7369,9001,7370,9003,7373,9102,7683,9102,7798,9102,7844,9102,7877,9001,7878,9001,7881,9102,7882,
9001,7883,9001,7886,9102,7887,9001,7899,9001,7991,9001,7992,9001,8035,9003,8036,9003,8042,9102,8043,9102,8058,9001,8059,9001,8082,9001,8083,9001,8086,9102,8088,9001,8090,9001,8091,9003,8092,9001,8093,9003,8095,9001,8096,9003,8097,9001,8098,9003,8099,9001,8100,9003,8101,9001,8102,9003,8103,9001,8104,9003,8105,9001,8106,9003,8107,9001,8108,9003,8109,9001,8110,9003,8111,9001,8112,9003,8113,9001,8114,9003,8115,9001,8116,9003,8117,9001,8118,9003,8119,9001,8120,9003,8121,9001,8122,9003,8123,9001,8124,9003,
8125,9001,8126,9003,8127,9001,8128,9003,8129,9001,8130,9003,8131,9001,8132,9003,8133,9001,8134,9003,8135,9001,8136,9003,8137,9001,8138,9003,8139,9001,8140,9003,8141,9001,8142,9003,8143,9001,8144,9003,8145,9001,8146,9003,8147,9001,8148,9003,8149,9001,8150,9003,8151,9001,8152,9003,8153,9001,8154,9003,8155,9001,8156,9003,8157,9001,8158,9003,8159,9001,8160,9003,8161,9001,8162,9003,8163,9001,8164,9003,8165,9001,8166,9003,8167,9001,8168,9003,8169,9001,8170,9003,8171,9001,8172,9003,8173,9001,8177,9003,8179,
9001,8180,9003,8181,9001,8182,9003,8184,9001,8185,9003,8187,9001,8189,9003,8191,9001,8193,9003,8196,9001,8197,9003,8198,9001,8200,9003,8201,9001,8202,9003,8203,9001,8204,9003,8205,9001,8206,9003,8207,9001,8208,9003,8209,9001,8210,9003,8212,9001,8213,9003,8214,9001,8216,9003,8218,9001,8220,9003,8222,9001,8224,9003,8225,9001,8226,9003,8232,9102,8237,9102,8240,9102,8246,9102,8249,9102,8252,9102,8255,9102,8311,9001,8312,9002,8313,9001,8314,9002,8315,9001,8316,9002,8317,9001,8318,9002,8319,9001,8320,9002,
8321,9001,8322,9002,8323,9001,8324,9002,8325,9001,8326,9002,8327,9001,8328,9002,8329,9001,8330,9002,8331,9001,8332,9002,8333,9001,8334,9002,8335,9001,8336,9002,8337,9001,8338,9002,8339,9001,8340,9002,8341,9001,8342,9002,8343,9001,8344,9002,8345,9001,8346,9002,8347,9001,8348,9002,8351,9102,8352,9001,8353,9001,8379,9001,8380,9003,8381,9001,8382,9003,8383,9001,8384,9003,8385,9001,8387,9003,8391,9001,8395,9001,8427,9102,8428,9102,8431,9102,8433,9001,8441,9001,8455,9001,8456,9001,8531,9003,8545,9102,8682,
9001,8685,9102,8687,9001,8692,9001,8693,9001,8694,9102,8699,9102,8818,9102,8826,9001,8860,9102,8888,9102,8900,9102,8902,9102,8903,9001,8907,9102,8949,9102,8950,9001,8951,9001,9003,9102,9006,9102,9009,9102,9012,9102,9014,9102,9017,9102,9019,9102,9039,9001,9040,9001,9140,9102,9141,9001,9148,9102,9149,9001,9150,9001,9153,9102,9191,9001,9221,9001,9222,9001,20499,9001,20538,9001,20539,9001,20790,9001,20791,9001,21291,9001,21292,9001,21500,9001,21817,9001,21818,9001,22032,9001,22033,9001,22091,9001,22092,
9001,22332,9001,22391,9001,22392,9001,22700,9001,22770,9001,22780,9001,22832,9001,23090,9001,23095,9001,23239,9001,23240,9001,23700,9001,24047,9001,24048,9001,24100,9005,24200,9001,24305,9001,24306,9001,24382,9084,24383,9001,24500,9001,24547,9001,24548,9001,24571,9062,24600,9001,25E3,9001,25231,9001,25884,9001,25932,9001,26237,9001,26331,9001,26332,9001,26591,9001,26592,9001,26632,9001,26692,9001,27120,9001,27200,9001,27291,9040,27292,9040,27429,9001,27493,9001,27500,9001,27700,9001,28232,9001,28600,
9001,28991,9001,28992,9001,29101,9001,29220,9001,29221,9001,29333,9001,29635,9001,29636,9001,29701,9001,29738,9001,29739,9001,29849,9001,29850,9001,29871,9042,29872,9041,29873,9001,30200,9039,30339,9001,30340,9001,30791,9001,30792,9001,31028,9001,31121,9001,31154,9001,31170,9001,31171,9001,31279,9001,31370,9001,31528,9001,31529,9001,31600,9001,31700,9001,31838,9001,31839,9001,31901,9001,32030,9003,32031,9003,32061,9001,32062,9001,32098,9001,32099,9003,32100,9001,32104,9001,32161,9001,32766,9001,37202,
9102,37203,9102,37206,9102,37207,9102,37218,9102,37221,9102,37225,9105,37240,9102,37241,9102,37243,9102,37245,9102,37249,9102,37257,9102,37260,9102,53048,9001,53049,9001,54034,9001,54090,9001,54091,9001,65061,9003,65062,9003,65161,9001,102041,9003,102064,9085,102068,109030,102069,109031,102093,9001,102094,9001,102118,9003,102120,9003,102121,9003,102122,9001,102150,9001,102168,9001,102204,9001,102212,9001,102213,9001,102215,9001,102216,9001,102217,9003,102218,9001,102219,9003,102220,9003,102247,9001,
102299,9001,102306,9001,102319,9001,102328,9001,102329,9001,102359,9001,102360,9001,102440,9001,102448,9001,102464,9003,102465,9003,102491,9001,102492,9001,102498,9001,102499,9001,102525,9003,102526,9003,102528,9003,102529,9003,102589,9003,102598,9001,102599,9003,102600,9003,102604,9003,102661,9003,102662,9003,102664,9003,102665,9003,102705,9003,102720,9003,102721,9003,102726,9003,102727,9003,102733,9003,102761,9003,102766,9003,102974,9003,103228,9001,103229,9001,103230,9003,103231,9003,103250,9001,
103251,9003,103252,9001,103253,9003,103260,9001,103261,9001,103262,9003,103263,9003,103270,9001,103271,9001,103272,9003,103273,9003,103274,9001,103275,9001,103276,9003,103277,9003,103278,9001,103279,9001,103280,9003,103281,9003,103282,9001,103283,9001,103284,9003,103285,9003,103286,9001,103287,9003,103288,9001,103289,9003,103290,9001,103291,9003,103292,9001,103293,9001,103294,9003,103295,9003,103296,9001,103297,9001,103298,9003,103299,9003,103300,9001,103307,9001,103313,9001,103319,9001,103322,9001,
103323,9001,103332,9001,103335,9001,103338,9001,103340,9001,103351,9001,103358,9001,103370,9001,103376,9003,103377,9001,103378,9001,103379,9003,103380,9003,103393,9001,103394,9001,103395,9003,103396,9003,103400,9003,103407,9003,103413,9003,103419,9003,103422,9003,103423,9003,103432,9003,103435,9003,103438,9003,103440,9003,103451,9003,103458,9003,103470,9003,103472,9001,103473,9002,103474,9001,103475,9003,103482,9001,103483,9003,103484,9001,103485,9003,103500,9001,103501,9003,103502,9001,103503,9001,
103504,9002,103505,9002,103506,9001,103507,9001,103508,9003,103509,9003,103510,9001,103511,9001,103512,9003,103513,9003,103514,9001,103515,9003,103516,9001,103517,9003,103518,9001,103519,9003,103520,9001,103521,9002,103522,9001,103523,9001,103524,9003,103525,9003,103526,9001,103527,9003,103561,9003,103562,9003,103563,9001,103564,9001,103565,9003,103566,9003,103567,9001,103568,9001,103569,9003,103570,9003,103585,9003,103586,9001,103587,9003,103588,9002,103589,9001,103590,9003,103591,9002,103592,9001,
103593,9003,103594,9002,103695,9003,103846,9001,103946,9003,104009,9102,104017,9102,104018,9102,104022,9102,104024,9102,104027,9102,104047,9102,104050,9102,104105,9102,104106,9102,104109,9102,104112,9102,104113,9102,104134,9102,104135,9102,104138,9102,104139,9105,104140,9105,104808,9102]};g.wr=function(){function c(){}c.Sy=function(a){!1===c.xp&&c.yt();var b=c.FQ(a);if(-1==b){var d=c.Bx(a);d!=a&&(b=c.Sy(d))}-1==b&&(d=c.FK(a),d!=a&&(b=c.Sy(d)));return b};c.FQ=function(a){return void 0!==c.Fw[a]?c.Fw[a]:
-1};c.CQ=function(a){!1===c.xp&&c.yt();var b=c.nF(a);if(1E38==b){var d=c.Bx(a);d!=a&&(b=c.nF(d));if(1E38==b)return 1E-10}return b};c.ZS=function(a){if(void 0!==c.Is[a])return!0;var b=c.Bx(a);return b!=a&&void 0!==c.Is[b]?!0:!1};c.aT=function(a){if(void 0!==c.xo[a])return!0;var b=c.Bx(a);return b!=a&&void 0!==c.xo[b]?!0:!1};c.nF=function(a){!1===c.xp&&c.yt();return void 0!==c.Is[a]?c.Is[a]:void 0!==c.xo[a]?c.xo[a]:1E38};c.FK=function(a){!1===c.xp&&c.yt();return void 0!==c.WA[a]?c.WA[a]:a};c.Bx=function(a){!1===
c.xp&&c.yt();return void 0!==c.XA[a]?c.XA[a]:a};c.yt=function(){for(var a=N,b,d=0;d<a.pcsid.length;d+=2)c.xo[a.pcsid[d]]=a.pcstol[2*a.pcsid[d+1]+1];for(d=0;d<a.pcsidc.length;d+=1){b=a.pcsidc[d];for(var e=b[0];e<=b[1];e++)c.xo[e]=a.pcstol[2*b[2]+1]}for(d=0;d<a.gcsid.length;d+=2)c.Is[a.gcsid[d]]=a.gcstol[2*a.gcsid[d+1]+1];for(d=0;d<a.gcsidc.length;d+=1)for(b=a.gcsidc[d],e=b[0];e<=b[1];e++)c.xo[e]=a.gcstol[2*b[2]+1];for(d=0;d<l.c.length;d+=1)for(b=l.c[d],e=b[0];e<=b[1];e++)c.Fw[e]=b[2];for(d=0;d<l.nc.length;d+=
2)c.Fw[l.nc[d]]=l.nc[d+1];l=null;for(d=0;d<a.newtoold.length;d+=2)c.WA[a.newtoold[d+1]]=a.newtoold[d],c.XA[a.newtoold[d]]=a.newtoold[d+1];N=null;c.xp=!0};c.xp=!1;c.Is=[];c.xo=[];c.WA=[];c.XA=[];c.Fw=[];return c}()})(ja||={});(function(g){function N(c){return 0===c.length?'""':'"'==c[0]||"."==c[0]||"0"<=c[0]&&"9">=c[0]?c:'"'+c.trim()+'"'}var l=[];g.XC=function(){function c(){}c.EQ=function(a){try{for(var b=0;b<l.length;b++)if(l[b].wkttext===a)return l[b].unit;for(var d,e=b="",f=!1,h=0;h<a.length;h++){var k=
a[h];!0===f?'"'==k?'"'==a[h+1]?b+=k:f=f=!1:b+=k:/[\s]/.test(k)||(","==k?(e=""!==b?e+(N(b)+","):e+",",b=""):")"==k||"]"==k?(e=""!==b?e+(N(b)+"]}"):e+"]}",b=""):"("==k||"["==k?(e+='{ "entity": "'+b.toUpperCase().trim()+'", "values":[',b=""):'"'==k?(f=!0,b=""):b+=k)}d=JSON.parse(e);var m=c.mF(d);if(null===m)return null;d=null;for(k=0;k<m.values.length;k++)if("object"===typeof m.values[k]&&("UNIT"===m.values[k].entity||"ANGLEUNIT"===m.values[k].entity||"LENGTHUNIT"===m.values[k].entity)){d=m.values[k];
break}if(null===d)return null;var n=g.Tc.ZO("GEOGCS"===m.entity||"GEOGCRS"===m.entity?1:0,d.values[1],d.values[2]);l.push({wkttext:a,unit:n});10<l.length&&l.shift();return n}catch(p){return null}};c.mF=function(a){if(null===a)return null;switch(a.entity){case "GEOGCRS":case "GEOGCS":case "PROJCRS":case "PROJCS":return a}for(var b=[],d=0;d<a.values.length;d++)if("object"===typeof a.values[d]&&void 0!==a.values[d].entity)switch(a.values[d].entity){case "GEOGCRS":case "GEOGCS":case "PROJCRS":case "PROJCS":return a.values[d];
default:b.push(a.values[d])}for(a=0;a<b.length;a++)if(d=c.mF(b[a]),null!==d)return d;return null};c.DQ=function(a){var b=-1;if(null!=a&&0<a.length){var d=a.search(/PROJCR?S/);if(0<=d){var e=0;d=a.lastIndexOf("UNIT");if(0<=d&&(d=a.indexOf(",",d+4),0<d)){d++;var f=a.indexOf("]",d+1);if(0<f)try{e=parseFloat(a.substring(d,f))}catch(k){e=0}}0<e&&(b=.001/e)}else if(d=a.search(/GEOGCR?S/),0<=d){var h=0;e=0;d=a.indexOf("SPHEROID",d+6);-1===d&&(d=a.indexOf("ELLIPSOID",d+7));if(0<d&&(d=a.indexOf(",",d+8),0<
d)){d++;f=a.indexOf(",",d+1);if(0<f)try{h=parseFloat(a.substring(d,f))}catch(k){h=0}if(0<h&&(d=a.lastIndexOf("ANGLEUNIT",f+1),-1===d&&(d=a.lastIndexOf("UNIT",f+1)),0<=d&&(d=a.indexOf(",",d+4),0<d&&(d++,f=a.indexOf("]",d+1),0<f))))try{e=parseFloat(a.substring(d,f))}catch(k){e=0}}0<h&&0<e&&(b=.001/(h*e))}}return b};return c}()})(ja||={});(function(g){(function(l){l[l.NONE=0]="NONE";l[l.LINEAR=1]="LINEAR";l[l.ANGULAR=2]="ANGULAR"})(g.eL||(g.eL={}));(function(l){l[l.enumFloat=0]="enumFloat";l[l.enumDouble=
1]="enumDouble";l[l.enumInt32=2]="enumInt32";l[l.enumInt64=3]="enumInt64";l[l.enumInt8=4]="enumInt8";l[l.enumInt16=5]="enumInt16"})(g.QL||(g.QL={}));(function(l){l[l.POSITION=0]="POSITION";l[l.Z=1]="Z";l[l.M=2]="M";l[l.ID=3]="ID";l[l.NORMAL=4]="NORMAL";l[l.TEXTURE1D=5]="TEXTURE1D";l[l.TEXTURE2D=6]="TEXTURE2D";l[l.TEXTURE3D=7]="TEXTURE3D";l[l.ID2=8]="ID2";l[l.MAXSEMANTICS=10]="MAXSEMANTICS"})(g.Ih||(g.Ih={}));var N=function(){function l(c,a){this.Vs=this.Ae=null;this.Oq=this.Aa=0;this.uh=this.bg=null;
this.wl=0;if(void 0!==a){this.Aa=a.Aa;this.Oq=a.Oq;this.bg=a.bg.slice(0);this.uh=a.uh.slice(0);this.wl=a.wl;this.Vs=[];for(c=a=0;c<this.Aa;c++)this.Vs[c]=a,a+=l.Va(this.bg[c]);this.Oq=a;this.Ae=[];for(c=0;c<this.Aa;c++){a=l.Va(this.kd(c));for(var b=l.se(this.kd(c)),d=0;d<a;d++)this.Ae[this.Vs[c]+d]=b}}else this.Oq=this.Aa=0}l.prototype.kd=function(c){if(0>c||c>this.Aa)throw g.i.N();return this.bg[c]};l.prototype.Pf=function(c){return this.uh[c]};l.lz=function(c){return l.JM[c]};l.Tp=function(c){return l.SM[c]};
l.Va=function(c){return l.rM[c]};l.prototype.hasAttribute=function(c){return 0<=this.uh[c]};l.prototype.iG=function(){return this.hasAttribute(1)};l.se=function(c){return l.eD[c]};l.prototype.LR=function(c){return this.Vs[c]};l.DG=function(c,a){return l.eD[c]===a};l.prototype.Nb=function(c){return this===c};l.prototype.An=function(){for(var c=g.O.Th(this.bg[0]),a=1;a<this.Aa;a++)c=g.O.Th(this.bg[a],c);return c};l.prototype.$j=function(c){return this.Vs[c]};l.prototype.cc=function(){return this.wl};
l.prototype.Ed=function(c){return this.bg[c]};l.eD=[0,0,NaN,0,0,0,0,0,0];l.JM=[1,1,1,0,2,1,1,1,0];l.SM=[1,1,1,2,0,0,0,0,2];l.rM=[2,1,1,1,3,1,2,3,2];return l}();g.ra=N})(ja||={});(function(g){function N(f,h,k){var m=h-(f=new e(f)).e,n=f.c;n.length>++h&&l(f,m,e.eu);for(n[0]?k?m=h:(n=f.c,m=f.e+m+1):++m;n.length<m;n.push(0));m=f.e;return 1===k||k&&(h<=m||m<=a)?(0>f.Bd&&n[0]?"-":"")+(1<n.length?n[0]+"."+n.join("").slice(1):n[0])+(0>m?"e":"e+")+m:f.toString()}function l(f,h,k,m){var n=f.c,p=f.e+h+1;1===
k?m=5<=n[p]:2===k?m=5<n[p]||5==n[p]&&(m||0>p||void 0!==n[p+1]||n[p-1]&1):3===k?m=m||void 0!==n[p]||0>p:(m=!1,0!==k&&c("!Big.RM!"));if(1>p||!n[0])m?(f.e=-h,f.c=[1]):f.c=[f.e=0];else{n.length=p--;if(m)for(;9<++n[p];)n[p]=0,p--||(++f.e,n.unshift(1));for(p=n.length;!n[--p];n.pop());}return f}function c(f){f=Error(f);f.name="BigError";throw f;}var a=-7,b=21,d=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,e=function(){function f(h){if(h instanceof f)this.Bd=h.Bd,this.e=h.e,this.c=h.c.slice();else{var k,m,n;0===
h&&0>1/h?h="-0":d.test(h+="")||c(NaN);this.Bd="-"==h.charAt(0)?(h=h.slice(1),-1):1;-1<(k=h.indexOf("."))&&(h=h.replace(".",""));0<(m=h.search(/e/i))?(0>k&&(k=m),k+=+h.slice(m+1),h=h.substring(0,m)):0>k&&(k=h.length);for(m=0;"0"==h.charAt(m);m++);if(m==(n=h.length))this.c=[this.e=0];else{for(;"0"==h.charAt(--n););this.e=k-m-1;this.c=[];for(k=0;m<=n;this.c[k++]=+h.charAt(m++));}}}f.prototype.abs=function(){var h=new f(this);h.Bd=1;return h};f.prototype.cmp=function(h){var k=this.c,m=(h=new f(h)).c,
n=this.Bd,p=h.Bd,r=this.e,t=h.e;if(!k[0]||!m[0])return k[0]?n:m[0]?-p:0;if(n!=p)return n;h=0>n;if(r!=t)return r>(t^h)?1:-1;n=-1;for(p=(r=k.length)<(t=m.length)?r:t;++n<p;)if(k[n]!=m[n])return k[n]>(m[n]^h)?1:-1;return r==t?0:r>(t^h)?1:-1};f.prototype.jm=function(h){var k=this.c,m=(h=new f(h)).c,n=this.Bd==h.Bd?1:-1,p=f.rr;(p!==~~p||0>p||1E6<p)&&c("!Big.DP!");if(!k[0]||!m[0])return k[0]==m[0]&&c(NaN),m[0]||c(n/0),new f(0*n);var r,t,x=m.slice(),K=r=m.length,ca=k.length,ha=k.slice(0,r),da=ha.length,
ka=h,ta=ka.c=[],ua=0,wa=p+(ka.e=this.e-h.e)+1;ka.Bd=n;n=0>wa?0:wa;for(x.unshift(0);da++<r;ha.push(0));do{for(t=0;10>t;t++){if(r!=(da=ha.length))var Ea=r>da?1:-1;else{var Ga=-1;for(Ea=0;++Ga<r;)if(m[Ga]!=ha[Ga]){Ea=m[Ga]>ha[Ga]?1:-1;break}}if(0>Ea){for(h=da==r?m:x;da;){if(ha[--da]<h[da]){for(Ga=da;Ga&&!ha[--Ga];ha[Ga]=9);--ha[Ga];ha[da]+=10}ha[da]-=h[da]}for(;!ha[0];ha.shift());}else break}ta[ua++]=Ea?t:++t;ha[0]&&Ea?ha[da]=k[K]||0:ha=[k[K]]}while((K++<ca||void 0!==ha[0])&&n--);ta[0]||1==ua||(ta.shift(),
ka.e--);ua>wa&&l(ka,p,f.eu,void 0!==ha[0]);return ka};f.prototype.fS=function(){return 0<this.cmp(0)};f.prototype.nT=function(){return 0>this.cmp(0)};f.prototype.jt=function(h){var k,m=this.Bd,n=(h=new f(h)).Bd;if(m!=n)return h.Bd=-n,this.tI(h);var p=this.c.slice(),r=this.e,t=h.c,x=h.e;if(!p[0]||!t[0])return t[0]?(h.Bd=-n,h):new f(p[0]?this:0);if(m=r-x){(k=0>m)?(m=-m,r=p):(x=r,r=t);r.reverse();for(n=m;n--;r.push(0));r.reverse()}else for(r=((k=p.length<t.length)?p:t).length,m=n=0;n<r;n++)if(p[n]!=
t[n]){k=p[n]<t[n];break}k&&(r=p,p=t,t=r,h.Bd=-h.Bd);if(0<(n=(r=t.length)-(k=p.length)))for(;n--;p[k++]=0);for(n=k;r>m;){if(p[--r]<t[r]){for(k=r;k&&!p[--k];p[k]=9);--p[k];p[r]+=10}p[r]-=t[r]}for(;0==p[--n];p.pop());for(;0==p[0];)p.shift(),--x;p[0]||(h.Bd=1,p=[x=0]);h.c=p;h.e=x;return h};f.prototype.tI=function(h){var k=this.Bd,m=(h=new f(h)).Bd;if(k!=m)return h.Bd=-m,this.jt(h);m=this.e;var n=this.c,p=h.e,r=h.c;if(!n[0]||!r[0])return r[0]?h:new f(n[0]?this:0*k);n=n.slice();if(k=m-p){0<k?(p=m,m=r):
(k=-k,m=n);for(m.reverse();k--;m.push(0));m.reverse()}0>n.length-r.length&&(m=r,r=n,n=m);k=r.length;for(m=0;k;)m=(n[--k]=n[k]+r[k]+m)/10|0,n[k]%=10;m&&(n.unshift(m),++p);for(k=n.length;0==n[--k];n.pop());h.c=n;h.e=p;return h};f.prototype.pow=function(h){var k=this,m=new f(1),n=m,p=0>h;(h!==~~h||-1E6>h||1E6<h)&&c("!pow!");for(h=p?-h:h;;){h&1&&(n=n.lr(k));h>>=1;if(!h)break;k=k.lr(k)}return p?m.jm(n):n};f.prototype.round=function(h,k){var m=this;null==h?h=0:(h!==~~h||0>h||1E6<h)&&c("!round!");l(m=new f(m),
h,null==k?f.eu:k);return m};f.prototype.sqrt=function(){var h=this.c,k=this.Bd,m=this.e,n=new f("0.5");if(!h[0])return new f(this);0>k&&c(NaN);k=Math.sqrt(this.toString());0==k||k==1/0?(k=h.join(""),k.length+m&1||(k+="0"),h=new f(Math.sqrt(k).toString()),h.e=((m+1)/2|0)-(0>m||m&1)):h=new f(k.toString());k=h.e+(f.rr+=4);do m=h,h=n.lr(m.tI(this.jm(m)));while(m.c.slice(0,k).join("")!==h.c.slice(0,k).join(""));l(h,f.rr-=4,f.eu);return h};f.prototype.lr=function(h){var k=this.c,m=(h=new f(h)).c,n=k.length,
p=m.length,r=this.e,t=h.e;h.Bd=this.Bd==h.Bd?1:-1;if(!k[0]||!m[0])return new f(0*h.Bd);h.e=r+t;if(n<p){var x=k;k=m;m=x;t=n;n=p;p=t}for(x=Array(t=n+p);t--;x[t]=0);for(r=p;r--;){p=0;for(t=n+r;t>r;)p=x[t]+m[r]*k[t-r-1]+p,x[t--]=p%10,p=p/10|0;x[t]=(x[t]+p)%10}p&&++h.e;x[0]||x.shift();for(r=x.length;!x[--r];x.pop());h.c=x;return h};f.prototype.toString=function(){var h=this.e,k=this.c.join(""),m=k.length;if(h<=a||h>=b)k=k.charAt(0)+(1<m?"."+k.slice(1):"")+(0>h?"e":"e+")+h;else if(0>h){for(;++h;k="0"+k);
k="0."+k}else if(0<h)if(++h>m)for(h-=m;h--;k+="0");else h<m&&(k=k.slice(0,h)+"."+k.slice(h));else 1<m&&(k=k.charAt(0)+"."+k.slice(1));return 0>this.Bd&&this.c[0]?"-"+k:k};f.prototype.toExponential=function(h){null==h?h=this.c.length-1:(h!==~~h||0>h||1E6<h)&&c("!toExp!");return N(this,h,1)};f.prototype.toFixed=function(h){var k=a,m=b;a=-(b=1/0);if(null==h)var n=this.toString();else h===~~h&&0<=h&&1E6>=h&&(n=N(this,this.e+h),0>this.Bd&&this.c[0]&&0>n.indexOf("-")&&(n="-"+n));a=k;b=m;n||c("!toFix!");
return n};f.prototype.toPrecision=function(h){if(null==h)return this.toString();(h!==~~h||1>h||1E6<h)&&c("!toPre!");return N(this,h-1,2)};f.rr=20;f.eu=1;return f}();g.hp=e})(ja||={});(function(g){var N=function(){function l(c){this.lf=c}l.prototype.nr=function(c,a,b){var d=new g.h,e=new g.h,f=this.lf;b.Vd(c,a,function(h,k){f.tc(2*h,d);f.tc(2*k,e);return d.compare(e)})};l.prototype.$p=function(c){return this.lf.read(2*c+1)};return l}();g.pi=function(){function l(){}l.aq=function(c){if(c.B())return!1;
var a=c.getType();return 1736==a?0==c.Ke()?!1:!0:1607==a?(a=[!1],l.sE(c,!0,a),a[0]):197==a||g.aa.yd(a)&&!c.BG()?!0:!1};l.gm=function(c){var a=c.getType();if(1736==a)return a=new g.Ta(c.description),c.B()||c.dD(a),a;if(1607==a)return l.sE(c,!1,null);if(197==a)return a=new g.Ta(c.description),c.B()||a.ad(c,!1),a;if(g.aa.yd(a)){a=new g.de(c.description);if(!c.B()&&!c.BG()){var b=new g.Sa;c.To(b);a.add(b);c.Po(b);a.add(b)}return a}if(g.aa.Rn(a))return null;throw g.i.N();};l.sE=function(c,a,b){null!=b&&
(b[0]=!1);var d=null;a||(d=new g.de(c.description));if(!c.B()){var e=new g.ia(0);e.Jb(2*c.da());for(var f=0,h=c.da();f<h;f++)if(0<c.Ja(f)&&!c.Nn(f)){var k=c.Ba(f);e.add(k);k=c.Vc(f)-1;e.add(k)}if(0<e.size){h=new g.Xt;f=c.ub(0);h.sort(e,0,e.size,new N(f));h=new g.h;f.tc(2*e.get(0),h);k=0;for(var m=1,n=new g.Sa,p=new g.h,r=1,t=e.size;r<t;r++)if(f.tc(2*e.get(r),p),p.qb(h))e.get(k)>e.get(r)?(e.set(k,2147483647),k=r):e.set(r,2147483647),m++;else{if(0==(m&1))e.set(k,2147483647);else if(a)return null!=b&&
(b[0]=!0),null;h.L(p);k=r;m=1}if(0==(m&1))e.set(k,2147483647);else if(a)return null!=b&&(b[0]=!0),null;if(!a)for(e.Vd(0,e.size,function(x,K){return x-K}),r=0,t=e.size;r<t&&2147483647!=e.get(r);r++)c.ve(e.get(r),n),d.add(n)}}return a?null:d};return l}()})(ja||={});(function(g){var N=function(){function l(){this.yf=new g.ia(0);this.ys=new g.ia(0);this.EH=1;this.Es=NaN}l.prototype.sort=function(c,a,b,d){if(32>b-a)d.nr(a,b,c);else{var e=!0;try{for(var f=Infinity,h=-Infinity,k=a;k<b;k++){var m=d.$p(c.get(k));
m<f&&(f=m);m>h&&(h=m)}if(this.reset(b-a,f,h,b-a)){for(k=a;k<b;k++){var n=c.get(k);m=d.$p(n);var p=this.zF(m);this.yf.set(p,this.yf.get(p)+1);this.ys.write(k-a,n)}var r=this.yf.get(0);this.yf.set(0,0);k=1;for(var t=this.yf.size;k<t;k++){var x=this.yf.get(k);this.yf.set(k,r);r+=x}for(k=a;k<b;k++){n=this.ys.read(k-a);m=d.$p(n);p=this.zF(m);var K=this.yf.get(p);c.set(K+a,n);this.yf.set(p,K+1)}e=!1}}catch(ca){this.yf.resize(0),this.ys.resize(0)}if(e)d.nr(a,b,c);else{k=b=0;for(t=this.yf.size;k<t;k++)e=
b,b=this.yf.get(k),b>e&&d.nr(a+e,a+b,c);100<this.yf.size&&(this.yf.resize(0),this.ys.resize(0))}}};l.prototype.reset=function(c,a,b,d){if(2>c||b==a)return!1;c=Math.min(l.hL,c);this.yf.Jb(c);this.yf.resize(c);this.yf.Wj(0,0,this.yf.size);this.EH=a;this.ys.resize(d);this.Es=(b-a)/(c-1);return!0};l.prototype.zF=function(c){return g.O.truncate((c-this.EH)/this.Es)};l.hL=65536;return l}();g.Xt=N})(ja||={});(function(g){var N;(function(e){e[e.enum_line=1]="enum_line";e[e.enum_arc=2]="enum_arc";e[e.enum_dummy=
4]="enum_dummy";e[e.enum_concave_dip=8]="enum_concave_dip";e[e.enum_connection=3]="enum_connection"})(N||={});var l=function(){function e(){}e.Qu=function(f,h,k,m,n,p){var r=new e;r.Im=new g.h;r.Vm=new g.h;r.aw=new g.h;r.Im.L(f);r.Vm.L(h);r.aw.L(k);r.Co=m;r.qh=n;r.sh=p;return r};e.construct=function(f,h,k,m){var n=new e;n.Im=new g.h;n.Vm=new g.h;n.aw=new g.h;n.Im.L(f);n.Vm.L(h);n.aw.Rc();n.Co=4;n.qh=k;n.sh=m;return n};return e}(),c=function(){function e(f,h,k,m,n,p){this.Yv=null;this.ya=0;this.EA=
f;this.bI=this.$H=0;this.Ka=h;this.Mj=k;this.vk=m;this.Dq=n;this.Ub=p}e.prototype.next=function(){for(var f=new g.Sa;;){if(this.ya==this.EA.I())return null;this.EA.ve(this.ya,f);this.ya++;if(!f.B())break}var h=!1;null==this.Yv&&(this.$H=f.Lg(),this.bI=f.ih(),this.Yv=d.buffer(f,this.Ka,this.Mj,this.vk,this.Dq,this.Ub),h=!0);if(this.ya<this.EA.I()){var k=new g.Da;this.Yv.copyTo(k)}else k=this.Yv;if(!h){h=new g.Dd;var m=f.Lg()-this.$H;f=f.ih()-this.bI;h.gg(m,f);k.Oc(h)}return k};e.prototype.La=function(){return 0};
e.prototype.qe=function(){};return e}(),a=function(){function e(f,h){this.Wa=f;this.ya=0;this.oq=h}e.prototype.next=function(){var f=this.Wa.X;if(this.ya<f.da()){var h=this.ya;this.ya++;if(!f.Nn(h))for(var k=f.Na(f.Vc(h)-1);this.ya<f.da();){var m=f.Na(f.Ba(this.ya));if(f.Nn(this.ya))break;if(m!=k)break;k=f.Na(f.Vc(this.ya)-1);this.ya++}if(1==this.ya-h)return this.Wa.kE(this.Wa.X,h,this.oq);k=new g.Ta(this.Wa.X.description);k.addPath(this.Wa.X,h,!0);for(h+=1;h<this.ya;h++)k.Dr(this.Wa.X,h,0,f.rv(h),
!1);return this.Wa.kE(k,0,this.oq)}return null};e.prototype.La=function(){return 0};e.prototype.qe=function(){};return e}(),b=function(){function e(f){this.Wa=f;this.ya=0}e.prototype.next=function(){var f=this.Wa.X;if(this.ya<f.da()){var h=this.ya;f.Ir(this.ya);for(this.ya++;this.ya<f.da()&&!(0<f.Ir(this.ya));)this.ya++;return 0==h&&this.ya==f.da()?this.Wa.py(f,0,f.da()):this.Wa.py(f,h,this.ya)}return null};e.prototype.La=function(){return 0};e.prototype.qe=function(){};return e}(),d=function(){function e(f){this.Ks=
this.lw=this.Ls=this.Id=null;this.Zd=[];this.Ub=f;this.rb=this.Kv=this.JT=this.Ka=this.tA=this.ct=this.qa=0;this.oA=this.vk=-1;this.oq=!0}e.buffer=function(f,h,k,m,n,p){if(null==f)throw g.i.N();if(0>m)throw g.i.N();if(f.B())return new g.Da(f.description);var r=new g.l;f.xc(r);0<h&&r.W(h,h);p=new e(p);p.Mj=k;p.X=f;p.qa=g.ta.Wd(k,r,!0);p.ct=g.ta.Wd(null,r,!0);p.Ka=h;p.JT=f.getType();0>=n&&(n=96);p.rb=Math.abs(p.Ka);p.Kv=0!=p.rb?1/p.rb:0;isNaN(m)||0==m?m=1E-5*p.rb:m>.5*p.rb&&(m=.5*p.rb);12>n&&(n=12);
f=Math.abs(h)*(1-Math.cos(Math.PI/n));f>m?m=f:(f=Math.PI/Math.acos(1-m/Math.abs(h)),f<n-1&&(n=g.O.truncate(f),12>n&&(n=12,m=Math.abs(h)*(1-Math.cos(Math.PI/n)))));p.vk=m;p.Dq=n;p.tA=Math.min(p.ct,.25*m);return p.lE()};e.prototype.cv=function(){if(null==this.Id)this.Id=[];else if(0!==this.Id.length)return;var f=this.qE();f=g.O.truncate((f+3)/4);var h=.5*Math.PI/f;this.oA=h;for(var k=0;k<4*f;k++)this.Id.push(null);var m=Math.cos(h);h=Math.sin(h);var n=g.h.construct(0,1);for(k=0;k<f;k++)this.Id[k+0*
f]=g.h.construct(n.y,-n.x),this.Id[k+1*f]=g.h.construct(-n.x,-n.y),this.Id[k+2*f]=g.h.construct(-n.y,n.x),this.Id[k+3*f]=n,n=g.h.construct(n.x,n.y),n.Bt(m,h)};e.prototype.lE=function(){var f=this.X.getType();if(g.aa.yd(f))return f=new g.Ta(this.X.description),f.oc(this.X,!0),this.X=f,this.lE();if(this.Ka<=this.qa)if(g.aa.US(f)){if(0>=this.Ka&&(f=new g.l,this.X.A(f),f.R()<=2*-this.Ka||f.ca()<=2*this.Ka))return new g.Da(this.X.description)}else return new g.Da(this.X.description);switch(this.X.getType()){case 33:return this.PN();
case 550:return this.ON();case 1607:return this.RN();case 1736:return this.QN();case 197:return this.LN();default:throw g.i.Qa();}};e.prototype.RN=function(){if(this.EG(this.X)){var f=new g.Sa;this.X.ve(0,f);var h=new g.l;this.X.A(h);f.Cb(h.sf());return this.Gu(f)}this.X=this.WV(this.X);f=new a(this,this.oq);return g.Gh.local().V(f,this.Mj,this.Ub).next()};e.prototype.QN=function(){if(0==this.Ka)return this.X;var f=g.Yl.local();this.cv();this.X=f.V(this.X,null,!1,this.Ub);if(0>this.Ka){var h=this.X;
h=this.py(h,0,h.da());return f.V(h,this.Mj,!1,this.Ub)}if(this.EG(this.X))return f=new g.Sa,this.X.ve(0,f),h=new g.l,this.X.A(h),f.Cb(h.sf()),this.Gu(f);f=new b(this);return g.Gh.local().V(f,this.Mj,this.Ub).next()};e.prototype.py=function(f,h,k){for(var m=new g.Da(f.description);h<k;h++)if(!(1>f.Ja(h))){var n=f.Ir(h),p=new g.l;f.Rj(h,p);if(0<this.Ka)if(0<n)if(this.FG(f,h))n=new g.Sa,f.ve(f.Ba(h),n),n.Cb(p.sf()),this.yu(m,n);else{var r=n=new g.Ta(f.description);r=g.Zt.JG(this.X,h)||2==this.zn(this.X,
h,r,!0,1)?this.jE(f,h):this.yn(n);m.add(r,!1)}else{if(!(p.R()+this.qa<=2*this.rb||p.ca()+this.qa<=2*this.rb||(r=n=new g.Ta(f.description),this.zn(this.X,h,r,!0,1),n.B()))){var t=new g.l;t.K(p);t.W(this.rb,this.rb);r.tp(t);r=this.yn(n);p=1;for(n=r.da();p<n;p++)m.addPath(r,p,!0)}}else if(0<n){if(!(p.R()+this.qa<=2*this.rb||p.ca()+this.qa<=2*this.rb||(r=n=new g.Ta(f.description),this.zn(this.X,h,r,!0,-1),n.B())))for(t=new g.l,r.xc(t),t.W(this.rb,this.rb),r.tp(t),r=this.yn(n),p=1,n=r.da();p<n;p++)m.addPath(r,
p,!0)}else for(r=n=new g.Ta(f.description),this.zn(this.X,h,r,!0,-1),r=this.yn(n),p=0,n=r.da();p<n;p++)m.addPath(r,p,!0)}if(0<this.Ka)return 1<m.da()?m=this.yn(m):e.kx(m);f=new g.l;m.xc(f);if(m.B())return e.kx(m);f.W(this.rb,this.rb);m.tp(f);m=this.yn(m);f=new g.Da(m.description);p=1;for(n=m.da();p<n;p++)f.addPath(m,p,!1);return e.kx(f)};e.prototype.PN=function(){return this.Gu(this.X)};e.prototype.Gu=function(f){var h=new g.Da(this.X.description);this.yu(h,f);return this.sX(h)};e.prototype.ON=function(){var f=
new c(this.X,this.Ka,this.Mj,this.vk,this.Dq,this.Ub);return g.Gh.local().V(f,this.Mj,this.Ub).next()};e.prototype.LN=function(){var f=new g.Da(this.X.description);if(0>=this.Ka){if(0==this.Ka)f.ad(this.X,!1);else{var h=new g.Fh;this.X.bn(h);h.W(this.Ka,this.Ka);f.ad(h,!1)}return f}f.ad(this.X,!1);this.X=f;return this.jE(f,0)};e.prototype.jE=function(f,h){this.cv();var k=new g.Da(f.description),m=new g.h,n=new g.h,p=new g.h,r=new g.h,t=new g.h,x=new g.h,K=new g.h,ca=new g.h,ha=f.Ja(h),da=f.Ba(h),
ka=0;for(h=f.Ja(h);ka<h;ka++){f.D(da+ka,n);f.D(da+(ka+1)%ha,r);f.D(da+(ka+2)%ha,x);K.uc(r,n);if(0==K.length())throw g.i.Qa();K.Hv();K.normalize();K.scale(this.rb);m.add(K,n);p.add(K,r);0==ka?k.Lt(m):k.Ci(m);k.Ci(p);ca.uc(x,r);if(0==ca.length())throw g.i.Qa();ca.Hv();ca.normalize();ca.scale(this.rb);t.add(ca,r);this.GD(k,r,p,t,!1)}return e.kx(k)};e.prototype.kE=function(f,h,k){this.cv();if(1>f.Ja(h))return null;if(this.FG(f,h)&&0<this.Ka){k=new g.Sa;f.ve(f.Ba(h),k);var m=new g.l;f.Rj(h,m);k.Cb(m.sf());
return this.Gu(k)}m=new g.Ta(f.description);if(f.Nn(h))this.zn(f,h,m,k,1),this.zn(f,h,m,k,-1);else{var n=new g.Ta(f.description);n.addPath(f,h,!1);n.Dr(f,h,0,f.rv(h),!1);this.zn(n,0,m,k,1)}return this.yn(m)};e.prototype.Xq=function(){this.Ys++;if(0==this.Ys%1024&&null!=this.Ub&&!this.Ub.progress(-1,-1))throw g.i.fu("user_canceled");};e.prototype.yn=function(f){return g.Fg.Mk(f,this.ct,!0,!0,this.Ub)};e.prototype.qE=function(){if(0==this.vk)return this.Dq;var f=1-this.vk*Math.abs(this.Kv);f=-1>f?4:
2*Math.PI/Math.acos(f)+.5;4>f?f=4:f>this.Dq&&(f=this.Dq);return g.O.truncate(f)};e.prototype.GD=function(f,h,k,m,n){this.cv();var p=new g.h;p.uc(k,h);p.scale(this.Kv);var r=new g.h;r.uc(m,h);r.scale(this.Kv);p=Math.atan2(p.y,p.x)/this.oA;0>p&&(p=this.Id.length+p);p=this.Id.length-p;r=Math.atan2(r.y,r.x)/this.oA;0>r&&(r=this.Id.length+r);r=this.Id.length-r;r<p&&(r+=this.Id.length);var t=g.O.truncate(r);r=g.O.truncate(Math.ceil(p));p=new g.h;p.L(this.Id[r%this.Id.length]);p.Ct(this.rb,h);var x=10*this.qa;
p.sub(k);p.length()<x&&(r+=1);p.L(this.Id[t%this.Id.length]);p.Ct(this.rb,h);p.sub(m);p.length()<x&&--t;k=t-r;k++;t=0;for(r%=this.Id.length;t<k;t++,r=(r+1)%this.Id.length)p.L(this.Id[r]),p.Ct(this.rb,h),f.Ci(p),this.Xq();n&&f.Ci(m)};e.prototype.zn=function(f,h,k,m,n){var p=new g.gd,r=p.mN(f,h);p.Gp(this.tA,!1,!1);if(2>p.I(r)){if(0>n)return 1;n=f;p=new g.Sa;n.ve(n.Ba(h),p);this.yu(k,p);return 1}var t=p.Na(p.Xa(p.Ob(r))),x=new g.Dd;x.gg(-t.x,-t.y);p.Oc(x);if(m&&(this.tQ(p,r,n),2>p.I(r))){if(0>n)return 1;
n=f;p=new g.Sa;n.ve(n.Ba(h),p);this.yu(k,p);return 1}this.Zd.length=0;var K=p.Ob(r);h=p.Xa(K);var ca=1==n?p.Ma(h):p.U(h);f=1==n?p.U(h):p.Ma(h);var ha=!0;m=new g.h;r=new g.h;var da=new g.h,ka=new g.h,ta=new g.h,ua=new g.h,wa=new g.h,Ea=new g.h,Ga=new g.h,Na=new g.h,La=this.rb;K=p.Ja(K);for(var Ta=0;Ta<K;Ta++)p.D(f,r),ha&&(p.D(h,m),p.D(ca,da),Ea.uc(m,da),Ea.normalize(),Na.MG(Ea),Na.scale(La),ka.add(Na,m)),wa.uc(r,m),wa.normalize(),Ga.MG(wa),Ga.scale(La),ta.add(m,Ga),ca=Ea.wi(wa),ha=Ea.Qh(wa),0>ca||
0>ha&&0==ca?this.Zd.push(l.Qu(ka,ta,m,2,this.Zd.length+1,this.Zd.length-1)):ka.qb(ta)||(this.Zd.push(l.construct(ka,m,this.Zd.length+1,this.Zd.length-1,"dummy")),this.Zd.push(l.construct(m,ta,this.Zd.length+1,this.Zd.length-1,"dummy"))),ua.add(r,Ga),this.Zd.push(l.Qu(ta,ua,m,1,this.Zd.length+1,this.Zd.length-1)),ka.L(ua),Na.L(Ga),da.L(m),m.L(r),Ea.L(wa),ca=h,h=f,ha=!1,f=1==n?p.U(h):p.Ma(h);this.Zd[this.Zd.length-1].qh=0;this.Zd[0].sh=this.Zd.length-1;this.YV(k);x.gg(t.x,t.y);k.YD(x,k.da()-1);return 1};
e.prototype.YV=function(f){for(var h=this.zO(),k=!0,m=h+1,n=h;m!=h;n=m){var p=this.Zd[n];m=-1!=p.qh?p.qh:(n+1)%this.Zd.length;0!=p.Co&&(k&&f.Lt(p.Im),2==p.Co?this.GD(f,p.aw,p.Im,p.Vm,!0):f.Ci(p.Vm),k=!1)}};e.prototype.zO=function(){null==this.Ks&&(this.Ks=[null,null,null,null,null,null,null,null,null]);for(var f=0,h=0,k=this.Zd.length;h<k;){var m=this.Zd[h];if(0!=(m.Co&3)){f=h;break}h=m.qh}k=f+1;for(h=f;k!=f;h=k){m=this.Zd[h];k=m.qh;for(var n=1,p=null;k!=h;){p=this.Zd[k];if(0!=(p.Co&3))break;k=p.qh;
n++}1!=n&&1==(m.Co&p.Co)&&(null==this.Ls&&(this.Ls=new g.yb,this.lw=new g.yb),this.Ls.Dc(m.Im),this.Ls.Qc(m.Vm),this.lw.Dc(p.Im),this.lw.Qc(p.Vm),1==this.Ls.Ea(this.lw,this.Ks,null,null,this.ct)&&(m.Vm.L(this.Ks[0]),p.Im.L(this.Ks[0]),m.qh=k,p.sh=h))}return f};e.prototype.Fv=function(f,h,k){var m=new g.h;m.uc(k,f);k=m.length();k=this.rb*this.rb-k*k*.25;if(0<k){k=Math.sqrt(k);m.normalize();m.ar();var n=new g.h;n.uc(h,f);if(n.Qh(m)+k>=this.rb)return!0}return!1};e.prototype.tQ=function(f,h,k){for(var m=
0;1>m;m++){var n=!1,p=f.Ob(h),r=f.Ja(p);if(0==r)break;var t=r;if(3>r)break;!f.dc(p)&&(t=r-1);p=f.Xa(p);r=0<k?f.Ma(p):f.U(p);for(var x=0<k?f.U(p):f.Ma(p),K=r,ca=!0,ha=new g.h,da=new g.h,ka=new g.h,ta=new g.h,ua=new g.h,wa=g.h.construct(0,0),Ea=new g.h,Ga=new g.h,Na=new g.h,La=new g.h,Ta=this.rb,Ra=0,Wa=0;Wa<t;){f.D(x,da);ca&&(f.D(p,ha),f.D(r,ka),K=r);Ga.uc(ha,ka);Ga.normalize();Ea.uc(da,ha);Ea.normalize();if(K==x)break;var Xa=Ga.wi(Ea),$a=Ga.Qh(Ea),cb=!0;0>Xa||0>$a&&0==Xa||!this.Fv(ka,ha,da)||(wa.L(da),
cb=!1,++Ra,n=!0);if(cb){if(0<Ra)for(;;){Xa=0<k?f.Ma(K):f.U(K);if(Xa==p)break;f.D(Xa,ta);if(this.Fv(ta,ka,wa))ka.L(ta),K=Xa,cb=!1,++Ra;else{Xa!=x&&this.Fv(ta,ka,da)&&this.Fv(ta,ha,da)&&(ka.L(ta),K=Xa,cb=!1,++Ra);break}}if(!cb)continue;if(0<Ra){K=0<k?f.Ma(r):f.U(r);for(ca=1;ca<Ra;ca++)cb=0<k?f.Ma(K):f.U(K),f.pd(K,!0),K=cb;Na.uc(ha,ka);Ra=Na.length();Ra=Ta*Ta-Ra*Ra*.25;Ra=Math.sqrt(Ra);Ta-Ra>.5*this.vk?(ua.add(ka,ha),ua.scale(.5),Na.normalize(),Na.ar(),La.L(Na),La.scale(Ta-Ra),ua.add(La),f.mf(r,ua)):
f.pd(r,!0);Ra=0}ka.L(ha);K=p}ha.L(da);r=p;p=x;x=0<k?f.U(p):f.Ma(p);Wa++;ca=!1}if(0<Ra){K=0<k?f.Ma(r):f.U(r);for(ca=1;ca<Ra;ca++)cb=0<k?f.Ma(K):f.U(K),f.pd(K,!0),K=cb;ua.add(ka,ha);ua.scale(.5);Na.uc(ha,ka);Ra=Na.length();Ra=Ta*Ta-Ra*Ra*.25;Ra=Math.sqrt(Ra);Na.normalize();Na.ar();La.L(Na);La.scale(Ta-Ra);ua.add(La);f.mf(r,ua)}f.Gp(this.tA,!1,!1);if(!n)break}};e.prototype.FG=function(f,h){if(1==f.Ja(h))return!0;var k=new g.l;f.Rj(h,k);return Math.max(k.R(),k.ca())<.5*this.vk?!0:!1};e.prototype.EG=function(f){var h=
new g.l;f.A(h);return Math.max(h.R(),h.ca())<.5*this.vk?!0:!1};e.prototype.WV=function(f){f=g.EC.local().V(f,.25*this.vk,!1,this.Ub);for(var h=0,k=0,m=f.da();k<m;k++)h=Math.max(f.Ja(k),h);if(32>h)return this.oq=!1,f;this.oq=!0;return g.Fg.Mk(f,this.ct,!1,!0,this.Ub)};e.prototype.yu=function(f,h){h=h.D();if(null!=this.Id&&0!==this.Id.length){var k=new g.h;k.L(this.Id[0]);k.Ct(this.rb,h);f.Lt(k);for(var m=1,n=this.Id.length;m<n;m++)k.L(this.Id[m]),k.Ct(this.rb,h),f.Ci(k)}else{m=this.qE();k=g.O.truncate((m+
3)/4);m=.5*Math.PI/k;n=Math.cos(m);for(var p=Math.sin(m),r=new g.h,t=3;0<=t;t--){r.ma(0,this.rb);switch(t){case 0:for(m=0;m<k;m++)f.yj(r.x+h.x,r.y+h.y),r.Bt(n,p);break;case 1:for(m=0;m<k;m++)f.yj(-r.y+h.x,r.x+h.y),r.Bt(n,p);break;case 2:for(m=0;m<k;m++)f.yj(-r.x+h.x,-r.y+h.y),r.Bt(n,p);break;default:for(f.sx(r.y+h.x,-r.x+h.y),m=1;m<k;m++)r.Bt(n,p),f.yj(r.y+h.x,-r.x+h.y)}this.Xq()}}};e.kx=function(f){f.Ch(1,0);return f};e.prototype.sX=function(f){f.Ch(2,this.qa);f.fm();return f};return e}();g.HK=d})(ja||=
{});(function(g){var N=function(){function l(c){this.Ca=c;this.g=new g.gd;this.dd=new g.ia(0)}l.prototype.Lh=function(c,a,b){switch(a){case 0:if(c.v<b&&c.C<=b)break;else return c.v>=b?1:-1;case 1:if(c.G<b&&c.H<=b)break;else return c.G>=b?1:-1;case 2:if(c.v>=b&&c.C>b)break;else return c.C<=b?1:-1;case 3:if(!(c.G>=b&&c.H>b))return c.H<=b?1:-1}return 0};l.prototype.Ay=function(c,a){return 1736==c.getType()?this.Cy(c,a):this.Dy(c)};l.prototype.Cy=function(c,a){if(0==this.Ca.R()||0==this.Ca.ca())return c.Ia();
var b=new g.l;c.xc(b);this.X=this.g.Ib(c);var d=new g.l,e=new g.l,f=new g.h,h=new g.h,k=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0];new g.ig;var n=new g.yb,p=new g.ia(0);p.Jb(Math.min(100,c.I()));for(var r=!1,t=0;!r&&4>t;t++){var x=!1,K=0!=(t&1),ca=0;switch(t){case 0:ca=this.Ca.v;x=b.v<=ca&&b.C>=ca;break;case 1:ca=this.Ca.G;x=b.G<=ca&&b.H>=ca;break;case 2:ca=this.Ca.C;x=b.v<=ca&&b.C>=ca;break;case 3:ca=this.Ca.H,x=b.G<=ca&&b.H>=ca}if(x)for(r=!0,x=this.g.Ob(this.X);-1!=x;){var ha=-1,da=-1,ka=this.g.Xa(x),
ta=ka;do{var ua=this.g.bc(ta);null==ua&&(ua=n,this.g.D(ta,f),ua.Dc(f),this.g.D(this.g.U(ta),h),ua.Qc(h));ua.A(d);var wa=this.Lh(d,t,ca),Ea=0,Ga=-1;if(-1==wa){ua=ua.cq(K,ca,k,m);Ea=0<ua?this.g.Ul(ta,m,ua):0;Ea+=1;var Na=ta,La=this.g.U(Na);for(ua=0;ua<Ea;ua++){this.g.D(Na,f);this.g.D(La,h);Ga=this.g.bc(Na);null==Ga&&(Ga=n,Ga.Dc(f),Ga.Qc(h));Ga.A(e);Ga=this.Lh(e,t,ca);if(-1==Ga){if(K)Ga=Math.abs(f.y-ca),Ta=Math.abs(h.y-ca),Ga<Ta?(f.y=ca,this.g.mf(Na,f)):(h.y=ca,this.g.mf(La,h));else{Ga=Math.abs(f.x-
ca);var Ta=Math.abs(h.x-ca);Ga<Ta?(f.x=ca,this.g.mf(Na,f)):(h.x=ca,this.g.mf(La,h))}Ga=this.g.bc(Na);null==Ga&&(Ga=n,Ga.Dc(f),Ga.Qc(h));Ga.A(e);Ga=this.Lh(e,t,ca)}Ta=ha;ha=Ga;-1==da&&(da=ha);0==Ta&&1==ha||1==Ta&&0==ha||0!=Ta||0!=ha||p.add(Na);1==ha&&(r=!1);Ga=Na=La;La=this.g.U(La)}}0==Ea&&(Ta=ha,ha=wa,-1==da&&(da=ha),0==Ta&&1==ha||1==Ta&&0==ha||0!=Ta||0!=ha||p.add(ta),1==ha&&(r=!1),Ga=this.g.U(ta));ta=Ga}while(ta!=ka);0==da&&0==ha&&p.add(ka);ua=0;for(ha=p.size;ua<ha;ua++)da=p.get(ua),this.g.pd(da,
!1);p.clear(!1);x=3>this.g.Ja(x)?this.g.Zq(x):this.g.Rb(x)}}if(r)return c.Ia();this.FB();0<a&&this.My(a);return this.g.Ne(this.X)};l.prototype.Dy=function(c){var a=new g.l,b=new g.l,d=[0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0],f=new g.ig,h=c,k=new g.l;c.xc(k);for(var m=0;4>m;m++){var n=!1,p=0!=(m&1),r=0;switch(m){case 0:r=this.Ca.v;n=k.v<=r&&k.C>=r;break;case 1:r=this.Ca.G;n=k.G<=r&&k.H>=r;break;case 2:r=this.Ca.C;n=k.v<=r&&k.C>=r;break;case 3:r=this.Ca.H,n=k.G<=r&&k.H>=r}if(n){n=h;h=c.Ia();n=n.Ga();
n.Zi();for(var t,x=new g.h;n.$a();)for(var K,ca=!0;n.Ha();){var ha=n.ha();ha.A(a);var da=this.Lh(a,m,r);if(-1==da){if(da=ha.cq(p,r,d,e),0<da){var ka=0;t=ha.ac();for(var ta=0;ta<=da;ta++)if(K=ta<da?e[ta]:1,ka!=K){ha.ah(ka,K,f);var ua=f.get();ua.Dc(t);ta<da&&(p?(x.x=d[ta],x.y=r):(x.x=r,x.y=d[ta]),ua.Qc(x));ua.A(b);var wa=this.Lh(b,m,r);if(-1==wa){t=ua.ac();ka=ua.wc();if(p)wa=Math.abs(t.y-r),Ea=Math.abs(ka.y-r),wa<Ea?(t.y=r,ua.Dc(t)):(ka.y=r,ua.Qc(ka));else{wa=Math.abs(t.x-r);var Ea=Math.abs(ka.x-r);
wa<Ea?(t.x=r,ua.Dc(t)):(ka.x=r,ua.Qc(ka))}ua.A(b);wa=this.Lh(b,m,r)}t=ua.wc();ka=K;K=wa;1==K?(h.oc(ua,ca),ca=!1):ca=!0}}}else K=da,1==K?(h.oc(ha,ca),ca=!1):ca=!0}}}return h};l.prototype.FB=function(){this.ji=-1;this.Vl(!1,this.Ca.v);this.Vl(!1,this.Ca.C);this.Vl(!0,this.Ca.G);this.Vl(!0,this.Ca.H);this.dd.resize(0);this.dd.Jb(100);this.ji=this.g.Gd();for(var c=new g.h,a=this.g.Ob(this.X);-1!=a;a=this.g.Rb(a))for(var b=this.g.Xa(a),d=0,e=this.g.Ja(a);d<e;d++,b=this.g.U(b))if(this.g.D(b,c),this.Ca.v==
c.x||this.Ca.C==c.x||this.Ca.G==c.y||this.Ca.H==c.y)this.g.Ra(b,this.ji,this.dd.size),this.dd.add(b);this.Nl(!1,this.Ca.v);this.Nl(!1,this.Ca.C);this.Nl(!0,this.Ca.G);this.Nl(!0,this.Ca.H);this.Ty()};l.prototype.My=function(c){for(var a=new g.h,b=new g.h,d=g.O.lg(2048,0),e=this.g.Ob(this.X);-1!=e;e=this.g.Rb(e)){var f=this.g.Xa(e),h=f;do{var k=this.g.U(h);this.g.D(h,a);var m=-1;a.x==this.Ca.v?(this.g.D(k,b),b.x==this.Ca.v&&(m=1)):a.x==this.Ca.C&&(this.g.D(k,b),b.x==this.Ca.C&&(m=1));a.y==this.Ca.G?
(this.g.D(k,b),b.y==this.Ca.G&&(m=0)):a.y==this.Ca.H&&(this.g.D(k,b),b.y==this.Ca.H&&(m=0));if(-1!=m&&(m=g.h.tb(a,b),m=g.O.truncate(Math.min(Math.ceil(m/c),2048)),!(1>=m))){for(var n=1;n<m;n++)d[n-1]=1*n/m;this.g.Ul(h,d,m-1)}h=k}while(h!=f)}};l.prototype.Vl=function(c,a){var b=this.g.Gd(),d=new g.h,e=new g.ia(0);e.Jb(100);for(var f=this.g.Ob(this.X);-1!=f;f=this.g.Rb(f))for(var h=this.g.Xa(f),k=0,m=this.g.Ja(f);k<m;k++){var n=this.g.U(h);this.g.D(h,d);if(c?d.y==a:d.x==a)if(this.g.D(n,d),c?d.y==a:
d.x==a)1!=this.g.Pa(h,b)&&(e.add(h),this.g.Ra(h,b,1)),1!=this.g.Pa(n,b)&&(e.add(n),this.g.Ra(n,b,1));h=n}this.g.Td(b);if(!(3>e.size)){var p=this;e.Vd(0,e.size,function(wa,Ea){return p.Mh(wa,Ea)});b=new g.h;f=new g.h;h=new g.h;f.Rc();var r=-1;k=new g.ia(0);m=new g.ia(0);n=this.g.Gd();for(var t=this.g.Gd(),x=0,K=e.size;x<K;x++){var ca=e.get(x);this.g.D(ca,d);if(!d.qb(f)){if(-1!=r){for(var ha=r;ha<x;ha++){r=e.get(ha);var da=this.g.U(r);ca=this.g.Ma(r);var ka=!1;0>this.Mh(r,da)&&(this.g.D(da,b),c?b.y==
a:b.x==a)&&(k.add(r),ka=!0,this.g.Ra(r,t,1));0>this.Mh(r,ca)&&(this.g.D(ca,b),c?b.y==a:b.x==a)&&(ka||k.add(r),this.g.Ra(r,n,1))}ha=0;for(ka=k.size;ha<ka;ha++){r=k.get(ha);ca=this.g.Pa(r,n);da=this.g.Pa(r,t);if(1==ca){ca=this.g.Ma(r);this.g.D(ca,h);var ta=[0];ta[0]=0;if(!h.qb(d)){var ua=g.h.tb(f,h);ta[0]=g.h.tb(h,d)/ua;0==ta[0]?ta[0]=2.220446049250313E-16:1==ta[0]&&(ta[0]=.9999999999999998);this.g.Ul(ca,ta,1);ca=this.g.Ma(r);this.g.mf(ca,d);m.add(ca);this.g.Ra(ca,n,1);this.g.Ra(ca,t,-1)}}1==da&&(da=
this.g.U(r),this.g.D(da,h),ta=[0],ta[0]=0,h.qb(d)||(ua=g.h.tb(f,h),ta[0]=g.h.tb(f,d)/ua,0==ta[0]?ta[0]=2.220446049250313E-16:1==ta[0]&&(ta[0]=.9999999999999998),this.g.Ul(r,ta,1),ca=this.g.U(r),this.g.mf(ca,d),m.add(ca),this.g.Ra(ca,n,-1),this.g.Ra(ca,t,1)))}r=k;k=m;m=r;m.clear(!1)}r=x;f.L(d)}}this.g.Td(n);this.g.Td(t)}};l.prototype.Nl=function(c,a){var b=new g.h,d=new g.ia(0);d.Jb(100);for(var e=this.g.Gd(),f=0,h=this.dd.size;f<h;f++){var k=this.dd.get(f);if(-1!=k){var m=this.g.U(k);this.g.D(k,b);
if(c?b.y==a:b.x==a)if(this.g.D(m,b),c?b.y==a:b.x==a)-2!=this.g.Pa(k,e)&&(d.add(k),this.g.Ra(k,e,-2)),-2!=this.g.Pa(m,e)&&(d.add(m),this.g.Ra(m,e,-2))}}if(0!=d.size){var n=this;d.Vd(0,d.size,function(Ea,Ga){return n.Mh(Ea,Ga)});f=0;for(h=d.size;f<h;f++){var p=d.get(f);this.g.Ra(p,e,f)}k=new g.h;m=new g.h;m.Rc();var r=-1;f=0;for(h=d.size;f<h;f++)if(p=d.get(f),-1!=p&&(this.g.D(p,b),!b.qb(m))){if(-1!=r)for(;;){p=!1;for(var t=1<f-r?f-1:f,x=r;x<t;x++){var K=d.get(x);if(-1!=K){var ca=-1,ha=this.g.U(K);0>
this.Mh(K,ha)&&(this.g.D(ha,k),c?k.y==a:k.x==a)&&(ca=ha);ha=-1;var da=this.g.Ma(K);0>this.Mh(K,da)&&(this.g.D(da,k),c?k.y==a:k.x==a)&&(ha=da);if(-1!=ca&&-1!=ha)this.Kh(K,d,e),this.g.pd(K,!1),this.Kh(ca,d,e),this.g.pd(ca,!1),p=!0;else if(-1!=ca||-1!=ha){for(da=x+1;da<f;da++){var ka=d.get(da);if(-1!=ka){var ta=this.g.U(ka),ua=-1;0>this.Mh(ka,ta)&&(this.g.D(ta,k),c?k.y==a:k.x==a)&&(ua=ta);ta=this.g.Ma(ka);var wa=-1;0>this.Mh(ka,ta)&&(this.g.D(ta,k),c?k.y==a:k.x==a)&&(wa=ta);if(-1!=ua&&-1!=wa){this.Kh(ka,
d,e);this.g.pd(ka,!1);this.Kh(ua,d,e);this.g.pd(ua,!1);p=!0;break}if(-1!=ca&&-1!=wa){this.zt(d,K,ca,ka,wa,e);p=!0;break}else if(-1!=ha&&-1!=ua){this.zt(d,ka,ua,K,ha,e);p=!0;break}}}if(p)break}}}if(!p)break}r=f;m.L(b)}}this.g.Td(e)};l.prototype.Kh=function(c,a,b){b=this.g.Pa(c,b);a.set(b,-1);b=this.g.Pa(c,this.ji);this.dd.set(b,-1);a=this.g.bd(c);-1!=a&&this.g.Xa(a)==c&&(this.g.Jf(a,-1),this.g.Wg(a,-1))};l.prototype.zt=function(c,a,b,d,e,f){this.g.Bc(a,d);this.g.Cc(d,a);this.g.Cc(b,e);this.g.Bc(e,
b);this.Kh(d,c,f);this.g.mi(d,!1);this.Kh(e,c,f);this.g.mi(e,!0)};l.prototype.Ty=function(){for(var c=0,a=this.dd.size;c<a;c++){var b=this.dd.get(c);-1!=b&&this.g.aj(b,-1)}for(var d=0,e=0,f=this.g.Ob(this.X);-1!=f;){var h=this.g.Xa(f);if(-1==h||f!=this.g.bd(h)){var k=f;f=this.g.Rb(f);this.g.Jf(k,-1);this.g.$q(k)}else{b=h;k=0;do this.g.aj(b,f),k++,b=this.g.U(b);while(b!=h);2>=k?(b=this.g.Pa(h,this.ji),this.dd.set(b,-1),h=this.g.pd(h,!1),2==k&&(b=this.g.Pa(h,this.ji),this.dd.set(b,-1),this.g.pd(h,!1)),
k=f,f=this.g.Rb(f),this.g.Jf(k,-1),this.g.$q(k)):(this.g.cp(f,!1),this.g.Wg(f,this.g.Ma(h)),this.g.Vj(f,k),e+=k,d++,f=this.g.Rb(f))}}c=0;for(a=this.dd.size;c<a;c++)if(b=this.dd.get(c),-1!=b&&(f=this.g.bd(b),-1==f)){f=this.g.vf(this.X,-1);k=0;h=b;do this.g.aj(b,f),k++,b=this.g.U(b);while(b!=h);2>=k?(b=this.g.Pa(h,this.ji),this.dd.set(b,-1),h=this.g.pd(h,!1),2==k&&(b=this.g.Pa(h,this.ji),0<=b&&this.dd.set(b,-1),this.g.pd(h,!1)),k=f,this.g.Jf(k,-1),this.g.$q(k)):(this.g.kn(f,!0),this.g.Vj(f,k),this.g.Jf(f,
h),this.g.Wg(f,this.g.Ma(h)),this.g.cp(f,!1),e+=k,d++)}this.g.Rl(this.X,d);this.g.Tj(this.X,e);c=0;for(a=this.g.ld;-1!=a;a=this.g.ue(a))c+=this.g.I(a);this.g.bC(c)};l.By=function(c,a,b){return(new l(a)).Ay(c,b)};l.clip=function(c,a,b,d){if(c.B())return c;if(a.B())return c.Ia();b=c.getType();if(33==b)return d=c.D(),a.contains(d)?c:c.Ia();if(197==b)return d=new g.l,c.A(d),d.Ea(a)?(a=new g.Fh,c.copyTo(a),a.Xo(d),a):c.Ia();var e=new g.l;c.xc(e);if(a.contains(e))return c;if(!a.isIntersecting(e))return c.Ia();
e=c.Bb;if(null!=e&&(e=e.Fk,null!=e)){e=e.Ro(a);if(1==e){if(1736!=b)throw g.i.Qa();c=new g.Da(c.description);c.tp(a);return c}if(0==e)return c.Ia()}switch(b){case 550:b=null;e=c.I();for(var f=c.ub(0),h=0,k=0;k<e;k++)d=new g.h,f.tc(2*k,d),a.contains(d)||(0==h&&(b=c.Ia()),h<k&&b.Fd(c,h,k),h=k+1);0<h&&b.Fd(c,h,e);return 0==h?c:b;case 1736:case 1607:return l.By(c,a,d);default:throw g.i.Qa();}};l.prototype.Mh=function(c,a){var b=new g.h;this.g.D(c,b);c=new g.h;this.g.D(a,c);return b.compare(c)};return l}();
g.Ud=N})(ja||={});(function(g){var N=function(){function l(c,a){this.Ca=c;this.g=new g.gd;this.dd=new g.ia(0);this.nd=a}l.prototype.Lh=function(c,a,b){switch(a){case 0:if(c.v<b&&c.C<=b)break;else return c.v>=b?1:-1;case 1:if(c.G<b&&c.H<=b)break;else return c.G>=b?1:-1;case 2:if(c.v>=b&&c.C>b)break;else return c.C<=b?1:-1;case 3:if(!(c.G>=b&&c.H>b))return c.H<=b?1:-1}return 0};l.prototype.Ay=function(c,a){return 1736==c.getType()?this.Cy(c,a):this.Dy(c)};l.prototype.Cy=function(c,a){if(0==this.Ca.R()||
0==this.Ca.ca())return c.Ia();var b=new g.l;c.xc(b);this.X=this.g.Ib(c);var d=new g.l,e=new g.l,f=new g.h,h=new g.h,k=[0,0,0,0,0,0,0,0,0],m=[0,0,0,0,0,0,0,0,0],n=new g.yb,p=new g.ia(0);p.Jb(256);for(var r=!1,t=0;!r&&4>t;t++){var x=!1,K=0!=(t&1),ca=0;switch(t){case 0:ca=this.Ca.v;x=b.v<=ca&&b.C>=ca;break;case 1:ca=this.Ca.G;x=b.G<=ca&&b.H>=ca;break;case 2:ca=this.Ca.C;x=b.v<=ca&&b.C>=ca;break;case 3:ca=this.Ca.H,x=b.G<=ca&&b.H>=ca}if(x)for(r=!0,x=this.g.Ob(this.X);-1!=x;){var ha=!0,da=-1,ka=-1,ta=
this.g.Xa(x),ua=ta;do{var wa=this.g.bc(ua);null==wa&&(wa=n,this.g.D(ua,f),wa.Dc(f),this.g.D(this.g.U(ua),h),wa.Qc(h));wa.A(d);var Ea=this.Lh(d,t,ca),Ga=0,Na=-1;if(-1==Ea){wa=wa.cq(K,ca,k,m);Ga=0<wa?this.g.LX(ua,m,wa):0;Ga+=1;var La=ua,Ta=this.g.U(La);for(wa=0;wa<Ga;wa++){this.g.D(La,f);this.g.D(Ta,h);Na=this.g.bc(La);null==Na&&(Na=n,Na.Dc(f),Na.Qc(h));Na.A(e);Na=this.Lh(e,t,ca);if(-1==Na){if(K)Na=Math.abs(f.y-ca),Ra=Math.abs(h.y-ca),Na<Ra?(f.y=ca,this.g.mf(La,f)):(h.y=ca,this.g.mf(Ta,h));else{Na=
Math.abs(f.x-ca);var Ra=Math.abs(h.x-ca);Na<Ra?(f.x=ca,this.g.mf(La,f)):(h.x=ca,this.g.mf(Ta,h))}Na=this.g.bc(La);null==Na&&(Na=n,Na.Dc(f),Na.Qc(h));Na.A(e);Na=this.Lh(e,t,ca)}Ra=da;da=Na;-1==ka&&(ka=da);0==Ra&&1==da||1==Ra&&0==da||0!=Ra||0!=da||p.add(La);1==da&&(ha=r=!1);Na=La=Ta;Ta=this.g.U(Ta)}}0==Ga&&(Ra=da,da=Ea,-1==ka&&(ka=da),0==Ra&&1==da||1==Ra&&0==da||0!=Ra||0!=da||p.add(ua),1==da&&(ha=r=!1),Na=this.g.U(ua));ua=Na;if(256<=p.size){wa=1;for(Ea=p.size-1;wa<Ea;wa++)Ga=p.get(wa),this.g.pd(Ga,
!1);p.set(1,p.Fc());p.Bh(2)}}while(ua!=ta);if(!ha)for(0==ka&&0==da&&p.add(ta),wa=0,Ea=p.size;wa<Ea;wa++)Ga=p.get(wa),this.g.pd(Ga,!1);p.clear(!1);x=ha||0==this.g.Ja(x)?this.g.Zq(x):this.g.Rb(x)}}if(r)return c.Ia();this.FB();0<a&&this.My(a);return this.g.Ne(this.X)};l.prototype.Dy=function(c){var a=new g.l,b=new g.l,d=[0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0],f=new g.ig,h=c,k=new g.l;c.xc(k);for(var m=new g.h,n=new g.h,p=null,r=null,t=0;4>t;t++){var x=!1,K=0!=(t&1),ca=0;switch(t){case 0:ca=this.Ca.v;
x=k.v<=ca&&k.C>=ca;break;case 1:ca=this.Ca.G;x=k.G<=ca&&k.H>=ca;break;case 2:ca=this.Ca.C;x=k.v<=ca&&k.C>=ca;break;case 3:ca=this.Ca.H,x=k.G<=ca&&k.H>=ca}if(x)for(x=h,h=c.Ia(),x=x.Ga(),x.Zi();x.$a();)for(var ha,da=!0;x.Ha();){var ka=x.ha();ka.A(a);var ta=this.Lh(a,t,ca);if(-1==ta){if(ta=ka.cq(K,ca,d,e),0<ta){var ua=0;ka.Yp(m);for(var wa=0;wa<=ta;wa++)if(ha=wa<ta?e[wa]:1,ua!=ha){ka.ah(ua,ha,f);var Ea=f.get();Ea.Dc(m);wa<ta&&(K?(n.x=d[wa],n.y=ca):(n.x=ca,n.y=d[wa]),Ea.Qc(n));Ea.A(b);var Ga=this.Lh(b,
t,ca);-1==Ga&&(null==p&&(p=new g.h),null==r&&(r=new g.h),Ea.Yp(p),Ea.Tr(r),K?(ua=Math.abs(p.y-ca),Ga=Math.abs(r.y-ca),ua<Ga?(p.y=ca,Ea.Dc(p)):(r.y=ca,Ea.Qc(r))):(ua=Math.abs(p.x-ca),Ga=Math.abs(r.x-ca),ua<Ga?(p.x=ca,Ea.Dc(p)):(r.x=ca,Ea.Qc(r))),Ea.A(b),Ga=this.Lh(b,t,ca));Ea.Tr(m);ua=ha;ha=Ga;1==ha?(h.oc(Ea,da),da=!1):da=!0}}}else ha=ta,1==ha?(h.oc(ka,da),da=!1):da=!0}}return h};l.prototype.FB=function(){this.ji=-1;this.Vl(!1,this.Ca.v);this.Vl(!1,this.Ca.C);this.Vl(!0,this.Ca.G);this.Vl(!0,this.Ca.H);
this.dd.resize(0);this.dd.Jb(100);this.ji=this.g.Gd();for(var c=new g.h,a=this.g.Ob(this.X);-1!=a;a=this.g.Rb(a))for(var b=this.g.Xa(a),d=0,e=this.g.Ja(a);d<e;d++,b=this.g.U(b))if(this.g.D(b,c),this.Ca.v==c.x||this.Ca.C==c.x||this.Ca.G==c.y||this.Ca.H==c.y)this.g.Ra(b,this.ji,this.dd.size),this.dd.add(b);this.Nl(!1,this.Ca.v);this.Nl(!1,this.Ca.C);this.Nl(!0,this.Ca.G);this.Nl(!0,this.Ca.H);this.Ty()};l.prototype.My=function(c){for(var a=new g.h,b=new g.h,d=null,e=null,f=g.O.lg(2048,0),h=this.g.Ob(this.X);-1!=
h;h=this.g.Rb(h)){var k=this.g.Xa(h),m=k;do{var n=this.g.U(m);this.g.D(m,a);var p=-1;a.x==this.Ca.v?(this.g.D(n,b),b.x==this.Ca.v&&(p=1)):a.x==this.Ca.C&&(this.g.D(n,b),b.x==this.Ca.C&&(p=1));a.y==this.Ca.G?(this.g.D(n,b),b.y==this.Ca.G&&(p=0)):a.y==this.Ca.H&&(this.g.D(n,b),b.y==this.Ca.H&&(p=0));if(-1!=p){null==d&&(d=new g.h);null==e&&(e=new g.h);d.L(a);e.ma(0,0);if(0==p){var r=a.x-this.Ca.v;e.x=g.lc.sign(b.x-a.x);d.x=c*g.lc.Cn(Math.floor(Math.abs(r/c)),r)+this.Ca.v;0>d.x&&(d.x+=c)}else r=a.y-this.Ca.G,
e.y=g.lc.sign(b.y-a.y),d.y=c*g.lc.Cn(Math.floor(Math.abs(r/c)),r)+this.Ca.G,0>d.y&&(d.y+=c);r=0!=p?b.y-a.y:b.x-a.x;var t=Math.abs(r);if(65536<t/c)throw g.i.fa("internal error");if(0<t){t=g.O.truncate(t/c)+2;f.length<t&&(f=g.O.lg(t));for(var x=t=0;;x++){var K=new g.h;K.x=d.x+e.x*x*c;K.y=d.y+e.y*x*c;K=(0!=p?K.y-a.y:K.x-a.x)/r;if(1<=K)break;0>=K||(f[t]=K,t++)}0!=t&&this.g.Ul(m,f,t)}}m=n}while(m!=k)}};l.prototype.Vl=function(c,a){for(var b=-1,d=new g.h,e=null,f=this.g.Ob(this.X);-1!=f;f=this.g.Rb(f))for(var h=
this.g.Xa(f),k=0,m=this.g.Ja(f);k<m;k++){var n=this.g.U(h);this.g.D(h,d);if(c?d.y==a:d.x==a)if(this.g.D(n,d),c?d.y==a:d.x==a)-1==b&&(b=this.g.Gd()),null==e&&(e=new g.ia(0),e.Jb(100)),1!=this.g.Pa(h,b)&&(e.add(h),this.g.Ra(h,b,1)),1!=this.g.Pa(n,b)&&(e.add(n),this.g.Ra(n,b,1));h=n}-1!=b&&this.g.Td(b);if(!(null==e||3>e.size)){var p=this;e.Vd(0,e.size,function(wa,Ea){return p.Mh(wa,Ea)});b=new g.h;f=new g.h;h=new g.h;f.Rc();var r=-1;k=new g.ia(0);m=new g.ia(0);n=null;for(var t=this.g.Gd(),x=this.g.Gd(),
K=0,ca=e.size;K<ca;K++){var ha=e.get(K);this.g.D(ha,d);if(!d.qb(f)){if(-1!=r){for(var da=r;da<K;da++){r=e.get(da);var ka=this.g.U(r);ha=this.g.Ma(r);var ta=!1;this.g.D(ka,b);0>f.compare(b)&&(c?b.y==a:b.x==a)&&(k.add(r),ta=!0,this.g.Ra(r,x,1));this.g.D(ha,b);0>f.compare(b)&&(c?b.y==a:b.x==a)&&(ta||k.add(r),this.g.Ra(r,t,1))}da=0;for(ta=k.size;da<ta;da++){r=k.get(da);ha=this.g.Pa(r,t);ka=this.g.Pa(r,x);if(1==ha&&(ha=this.g.Ma(r),this.g.D(ha,h),!h.qb(d))){null==n&&(n=[]);var ua=g.h.tb(f,h);n[0]=g.h.tb(h,
d)/ua;0==n[0]?n[0]=2.220446049250313E-16:1==n[0]&&(n[0]=.9999999999999998);this.g.Ul(ha,n,1);ha=this.g.Ma(r);this.g.mf(ha,d);m.add(ha);this.g.Ra(ha,t,1);this.g.Ra(ha,x,-1)}1==ka&&(ka=this.g.U(r),this.g.D(ka,h),h.qb(d)||(null==n&&(n=[]),ua=g.h.tb(f,h),n[0]=g.h.tb(f,d)/ua,0==n[0]?n[0]=2.220446049250313E-16:1==n[0]&&(n[0]=.9999999999999998),this.g.Ul(r,n,1),ha=this.g.U(r),this.g.mf(ha,d),m.add(ha),this.g.Ra(ha,t,-1),this.g.Ra(ha,x,1)))}r=k;k=m;m=r;m.clear(!1)}r=K;f.L(d)}}this.g.Td(t);this.g.Td(x)}};
l.prototype.Nl=function(c,a){for(var b=new g.h,d=null,e=-1,f=0,h=this.dd.size;f<h;f++){var k=this.dd.get(f);if(-1!=k){var m=this.g.U(k);this.g.D(k,b);if(c?b.y==a:b.x==a)if(this.g.D(m,b),c?b.y==a:b.x==a)-1==e&&(e=this.g.Gd()),null==d&&(d=new g.ia(0),d.Jb(100)),-2!=this.g.Pa(k,e)&&(d.add(k),this.g.Ra(k,e,-2)),-2!=this.g.Pa(m,e)&&(d.add(m),this.g.Ra(m,e,-2))}}if(null==d)-1!=e&&this.g.Td(e);else{var n=this;d.Vd(0,d.size,function(Ea,Ga){return n.Mh(Ea,Ga)});f=0;for(h=d.size;f<h;f++){var p=d.get(f);this.g.Ra(p,
e,f)}k=new g.h;m=new g.h;m.Rc();var r=-1;f=0;for(h=d.size;f<h;f++)if(p=d.get(f),-1!=p&&(this.g.D(p,b),!b.qb(m))){if(-1!=r)for(;;){p=!1;for(var t=1<f-r?f-1:f,x=r;x<t;x++){var K=d.get(x);if(-1!=K){var ca=-1,ha=this.g.U(K);this.g.D(ha,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(ca=ha);ha=-1;var da=this.g.Ma(K);this.g.D(da,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(ha=da);if(-1!=ca&&-1!=ha)this.Kh(K,d,e),this.g.pd(K,!1),this.Kh(ca,d,e),this.g.pd(ca,!1),p=!0;else if(-1!=ca||-1!=ha){for(da=x+1;da<f;da++){var ka=
d.get(da);if(-1!=ka){var ta=this.g.U(ka),ua=-1;this.g.D(ta,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(ua=ta);ta=this.g.Ma(ka);var wa=-1;this.g.D(ta,k);0>m.compare(k)&&(c?k.y==a:k.x==a)&&(wa=ta);if(-1!=ua&&-1!=wa){this.Kh(ka,d,e);this.g.pd(ka,!1);this.Kh(ua,d,e);this.g.pd(ua,!1);p=!0;break}if(-1!=ca&&-1!=wa){this.zt(d,K,ca,ka,wa,e);p=!0;break}else if(-1!=ha&&-1!=ua){this.zt(d,ka,ua,K,ha,e);p=!0;break}}}if(p)break}}}if(!p)break}r=f;m.L(b)}this.g.Td(e)}};l.prototype.Kh=function(c,a,b){b=this.g.Pa(c,b);a.set(b,
-1);b=this.g.Pa(c,this.ji);this.dd.set(b,-1);a=this.g.bd(c);-1!=a&&this.g.Xa(a)==c&&(this.g.Jf(a,-1),this.g.Wg(a,-1))};l.prototype.zt=function(c,a,b,d,e,f){this.g.Bc(a,d);this.g.Cc(d,a);this.g.Cc(b,e);this.g.Bc(e,b);this.Kh(d,c,f);this.g.mi(d,!1);this.Kh(e,c,f);this.g.mi(e,!0)};l.prototype.Ty=function(){for(var c=0,a=this.dd.size;c<a;c++){var b=this.dd.get(c);-1!=b&&this.g.aj(b,-1)}for(var d=0,e=0,f=this.g.Ob(this.X);-1!=f;){var h=this.g.Xa(f);if(-1==h||f!=this.g.bd(h)){var k=f;f=this.g.Rb(f);this.g.Jf(k,
-1);this.g.$q(k)}else{b=h;k=0;do this.g.aj(b,f),k++,b=this.g.U(b);while(b!=h);this.g.cp(f,!1);this.g.Wg(f,this.g.Ma(h));this.g.Vj(f,k);e+=k;d++;f=this.g.Rb(f)}}c=0;for(a=this.dd.size;c<a;c++)if(b=this.dd.get(c),-1!=b&&(f=this.g.bd(b),-1==f)){f=this.g.vf(this.X,-1);k=0;h=b;do this.g.aj(b,f),k++,b=this.g.U(b);while(b!=h);2>=k?(b=this.g.Pa(h,this.ji),this.dd.set(b,-1),h=this.g.pd(h,!1),2==k&&(b=this.g.Pa(h,this.ji),0<=b&&this.dd.set(b,-1),this.g.pd(h,!1)),k=f,this.g.Jf(k,-1),this.g.$q(k)):(this.g.kn(f,
!0),this.g.Vj(f,k),this.g.Jf(f,h),this.g.Wg(f,this.g.Ma(h)),this.g.cp(f,!1),e+=k,d++)}this.g.Rl(this.X,d);this.g.Tj(this.X,e);c=0;for(a=this.g.ld;-1!=a;a=this.g.ue(a))c+=this.g.I(a);this.g.bC(c)};l.By=function(c,a,b,d){return(new l(a,d)).Ay(c,b)};l.clip=function(c,a,b,d,e){return l.Nu(c,a,null,b,d,e)};l.Nu=function(c,a,b,d,e,f){var h=c.getType();if(33==h)return e=c.D(),a.contains(e)?c:c.Ia();if(197==h)return e=new g.l,c.A(e),e.Ea(a)?(a=new g.Fh,c.copyTo(a),a.Xo(e),a):c.Ia();if(c.B())return c;if(a.B())return c.Ia();
var k=new g.l;c.xc(k);if(a.contains(k))return c;if(!a.isIntersecting(k))return c.Ia();(null!=b||isNaN(d))&&g.ta.ty(b,a,!1);if(!g.aa.xj(h))throw g.i.N();b=c.Bb;if(null!=b&&(b=b.Fk,null!=b)){b=b.Ro(a);if(1==b){if(1736!=h)throw g.i.fa("internal error");c=new g.Da(c.description);c.tp(a);return c}if(0==b)return c.Ia()}switch(h){case 550:f=null;h=c.I();b=c.ub(0);d=0;e=new g.h;for(k=0;k<h;k++)b.tc(2*k,e),a.contains(e)||(0==d&&(f=c.Ia()),d<k&&f.Fd(c,d,k),d=k+1);0<d&&f.Fd(c,d,h);return 0==d?c:f;case 1736:case 1607:return l.By(c,
a,e,f);default:throw g.i.fa("internal error");}};l.prototype.Mh=function(c,a){var b=new g.h;this.g.D(c,b);c=new g.h;this.g.D(a,c);return b.compare(c)};return l}();g.ri=N})(ja||={});(function(g){var N=new g.h,l=function(){function a(b,d,e,f,h){this.Pm=new g.h;this.Dk=new g.h;this.Pi=new g.h;this.g=b;this.Aw=e;this.no=f;this.Pm=d;this.yl=h;this.Dk.Rc();this.Pi.Rc()}a.prototype.xE=function(b){this.g.D(b,this.Dk);b=g.O.truncate((this.Dk.x-this.Pm.x)*this.no+.5);var d=g.O.truncate((this.Dk.y-this.Pm.y)*
this.no+.5);return c.jG(b,d)};a.prototype.jz=function(b){return this.g.Pa(b,this.yl)};a.prototype.Py=function(b,d){this.g.D(b,this.Dk);this.g.D(d,this.Pi);return c.Cv(this.Dk.x,this.Dk.y,this.Pi.x,this.Pi.y,this.Aw)};return a}();g.sY=function(){return function(){}}();var c=function(){function a(){this.Pm=new g.h;this.pq=[0,0,0,0];this.xs=[0,0,0,0];this.qo=this.yl=-1}a.iQ=function(b,d){var e=new a;e.g=b;e.qa=d;e.Aw=d*d;e.$v=2*d;e.no=1/e.$v;return e.BO()};a.Cv=function(b,d,e,f,h){b-=e;d-=f;return b*
b+d*d<=h};a.jG=function(b,d){return g.O.Th(d,g.O.Th(b))};a.prototype.DO=function(b,d){this.g.Gc(b,N);for(var e=(N.y-this.Pm.y)*this.no,f=g.O.truncate((N.x-this.Pm.x)*this.no),h=g.O.truncate(e),k=e=0;1>=k;k+=1)for(var m=0;1>=m;m+=1){var n=a.jG(f+k,h+m),p=this.xl.rR(n);-1!=p&&(this.pq[e]=p,this.xs[e]=n,e++)}for(f=e-1;1<=f;f--)for(p=this.pq[f],h=f-1;0<=h;h--)if(p==this.pq[h]){this.xs[h]=-1;e--;f!=e&&(this.xs[f]=this.xs[e],this.pq[f]=this.pq[e]);break}for(h=0;h<e;h++)this.EO(b,this.xs[h],N,this.pq[h],
d)};a.prototype.EO=function(b,d,e,f,h){for(var k=new g.h;-1!=f;f=this.xl.ER(f)){var m=this.xl.ja(f);b==m||-1!=d&&this.g.Pa(m,this.yl)!=d||(this.g.Gc(m,k),a.Cv(e.x,e.y,k.x,k.y,this.Aw)&&h.add(f))}};a.prototype.Xm=function(b,d,e){var f=this.g.Pa(b,this.qo),h=this.g.Pa(d,this.qo);-1==f&&(f=this.zd.Ph(),this.zd.addElement(f,b),this.g.Ra(b,this.qo,f));-1==h?this.zd.addElement(f,d):this.zd.Hy(f,h);this.g.Ra(d,this.qo,-2);d=this.YT(b,d);e&&(e=this.kw.xE(b),this.g.Ra(b,this.yl,e));return d};a.WT=function(b,
d,e){b.Nb(d);e=b;var f=new g.h;a.XT(b.D(),d.D(),f);e.Cb(f)};a.XT=function(b,d,e){var f=b.x;b.x!=d.x&&(f=(1*b.x+1*d.x)/2);var h=b.y;b.y!=d.y&&(h=(1*b.y+1*d.y)/2);e.ma(f,h)};a.prototype.YT=function(b,d){var e=new g.h;this.g.D(b,e);var f=new g.h;this.g.D(d,f);var h=this.g.cG(b);d=this.g.cG(d);var k=h+d,m=0,n=e.x;e.x!=f.x&&(n=(e.x*h+f.x*d)/k,m++);var p=e.y;e.y!=f.y&&(p=(e.y*h+f.y*d)/k,m++);0<m&&this.g.Cb(b,n,p);this.g.vX(b,k);return 0!=m};a.prototype.BO=function(){var b=this.g.fd,d=this.g.IF();this.Pm=
d.mz();d=Math.max(d.ca(),d.R())/2147483646;this.$v<d&&(this.$v=d,this.no=1/this.$v);this.zd=new g.au;this.zd.At(g.O.truncate(this.g.fd/3+1));this.zd.fn(g.O.truncate(this.g.fd/3+1));this.yl=this.g.Gd();this.qo=this.g.Gd();this.kw=new l(this.g,this.Pm,this.Aw,this.no,this.yl);this.xl=new g.dL(g.O.truncate(4*b/3),this.kw);this.xl.AW(this.g.fd);b=!1;for(d=this.g.ld;-1!=d;d=this.g.ue(d))for(var e=this.g.Ob(d);-1!=e;e=this.g.Rb(e))for(var f=this.g.Xa(e),h=0,k=this.g.Ja(e);h<k;h++){var m=this.kw.xE(f);this.g.Ra(f,
this.yl,m);this.xl.addElement(f,m);f=this.g.U(f)}var n=new g.ia(0);n.Jb(10);for(d=this.g.ld;-1!=d;d=this.g.ue(d))for(e=this.g.Ob(d);-1!=e;e=this.g.Rb(e))for(f=this.g.Xa(e),h=0,k=this.g.Ja(e);h<k;h++){if(-2!=this.g.Pa(f,this.qo))for(m=this.g.Pa(f,this.yl),this.xl.jd(f,m);;){this.DO(f,n);if(0==n.size)break;m=!1;for(var p=0,r=n.size;p<r;p++){var t=n.get(p),x=this.xl.ja(t);this.xl.vd(t);m=this.Xm(f,x,p+1==r)||m}b=b||m;n.clear(!1);if(!m)break}f=this.g.U(f)}b&&this.vN();this.kw=this.xl=null;this.g.Td(this.yl);
this.g.Td(this.qo);return b};a.prototype.vN=function(){for(var b=new g.h,d=this.zd.je;-1!=d;d=this.zd.qz(d)){var e=this.zd.rc(d);this.g.D(this.zd.ja(e),b);for(e=this.zd.lb(e);-1!=e;e=this.zd.lb(e))this.g.mf(this.zd.ja(e),b)}};return a}();g.Yt=c})(ja||={});(function(g){var N=function(){function l(c){void 0===c&&(c=null);this.yg=null;this.Pb=!1;this.yg=null===c?[]:c}l.prototype.copyTo=function(c){if(c.Pb)throw g.i.fa("CompositeGeographicTransformation is read-only");for(var a=0;a<this.yg.length;a++)c.yg.push(this.yg[a].Of())};
l.prototype.count=function(){return this.yg.length};l.prototype.add=function(c){if(this.Pb)throw g.i.fa("CompositeGeographicTransformation is read-only");this.yg.push(c.Of())};l.prototype.clear=function(){if(this.Pb)throw g.i.fa("CompositeGeographicTransformation is read-only");this.yg.length=0};l.prototype.remove=function(c){if(this.Pb)throw g.i.fa("CompositeGeographicTransformation is read-only");this.yg.splice(c,1)};l.prototype.jg=function(){var c=new l;this.copyTo(c);return c};l.prototype.Of=
function(){return this.jg()};l.prototype.transform=function(c,a,b,d){if(c.length<a)throw g.i.fa("invalid Argument");var e=b;for(b=0;b<this.yg.length;b++){var f=this.yg[b];if(null!=f.qm()){var h=f.Un,k=h?1:0,m=h?f.qm().getGeogcs2():f.qm().getGeogcs1();m=m.getUnit().getUnitFactor();m=e/m;if(3.552713678800501E-15<Math.abs(m-1))for(e=0;e<a;e++)c[e][0]*=m,c[e][1]*=m;g.MC.geogToGeog(f.qm(),a,c,null,k);e=(h?f.qm().getGeogcs1():f.qm().getGeogcs2()).getUnit().getUnitFactor()}}m=e/d;if(3.552713678800501E-15<
Math.abs(m-1))for(e=0;e<a;e++)c[e][0]*=m,c[e][1]*=m;return a};l.prototype.Nb=function(c){if(c==this)return!0;if(!(c instanceof l)||this.yg.length!=c.yg.length)return!1;for(var a=0;a<this.yg.length;a++)if(!this.yg[a].Nb(c.yg[a]))return!1;return!0};l.prototype.ix=function(){this.Pb=!0};l.prototype.toString=function(){for(var c="CGT ("+this.count()+") ",a=0,b=this.count();a<b;++a)c+=this.yg[a].toString()+", ";return 200<c.length?c.substring(0,197)+"... ("+c.length.toString()+" characters)":c};l.create=
function(){return new l};return l}();g.wC=N})(ja||={});(function(g){var N=Math.PI,l=2*Math.PI,c=Math.PI/2,a=function(){function e(){}e.TO=function(f,h){var k=new e;k.x=f;k.y=h;k.type=0;k.Uh=0;return k};e.al=function(f){var h=new e;h.x=f.x;h.y=f.y;h.type=0;h.Uh=0;return h};e.SO=function(f){var h=new e;h.x=f.x;h.y=f.y;h.type=f.type;h.Uh=f.Uh;return h};e.Pd=function(f,h,k){var m=new e;m.x=f.x+h*Math.cos(k);m.y=f.y+h*Math.sin(k);m.type=f.type;m.Uh=f.Uh;return m};e.Pu=function(f,h){var k=new e;k.x=.5*
(f.x+h.x);k.y=.5*(f.y+h.y);k.type=f.type;k.Uh=f.Uh;return k};e.TE=function(f,h){var k=new e;k.x=f.x+.001*(h.x-f.x);k.y=f.y+.001*(h.y-f.y);k.type=f.type;k.Uh=f.Uh;return k};return e}(),b=function(){return function(){}}();(function(e){e[e.Round=0]="Round";e[e.Bevel=1]="Bevel";e[e.Miter=2]="Miter";e[e.Square=3]="Square"})(g.fL||(g.fL={}));var d=function(){function e(f){this.NA=this.Yb=this.wg=null;this.nd=f}e.V=function(f,h,k,m,n,p){if(null==f)throw g.i.N();if(1>f.Db())throw g.i.N();if(0==h||f.B())return f;
p=new e(p);p.ko=f;p.Ka=h;p.qa=n;p.Ki=k;p.CA=m;return p.Rx()};e.prototype.eM=function(){var f=this.ko,h=f.ac(),k=f.wc(),m=new g.h;m.uc(k,h);m.normalize();m.Hv();m.scale(this.Ka);h.add(m);k.add(m);m=f.Ia();f.Dc(h);f.Qc(k);return m};e.prototype.dM=function(){var f=this.ko;if(0<this.Ka&&2!=this.Ki){var h=new g.Da;h.ad(f,!1);this.ko=h;return this.Rx()}f=new g.Fh(f.$);f.W(this.Ka,this.Ka);return f};e.prototype.tJ=function(f,h,k,m){return(h.x-f.x)*(m.x-k.x)+(h.y-f.y)*(m.y-k.y)};e.prototype.fc=function(f,
h){if(void 0===h)this.Yb.push(f),this.gf++;else if(0==this.gf)this.fc(f);else{var k=this.Bw,m=this.wg[0==h?k-1:h-1],n=this.wg[h],p=this.tJ(m,n,this.Yb[this.gf-1],f);0<p?this.fc(f):0>p&&(0<this.tJ(m,n,n,this.Yb[this.gf-1])?(n=this.wg[0==h?k-2:1==h?k-1:h-2],k=a.Pd(m,this.Ka,Math.atan2(m.y-n.y,m.x-n.x)-c),this.Yb[this.gf-1]=k,1==this.Ki||2==this.Ki?(k=a.Pu(k,m),this.fc(k),k=a.Pd(m,this.Ka,this.Jv+c),m=a.Pu(k,m),m.type|=256,this.fc(m)):(k=a.Pd(m,this.Ka,this.Jv+c),k.type|=256),this.fc(k),this.fc(f,h)):
(k=a.Pd(n,this.Ka,this.Jv+c),this.fc(k),1==this.Ki||2==this.Ki?(k=a.Pu(k,n),this.fc(k),k=a.Pd(n,this.Ka,this.aA-c),m=a.Pu(k,n),m.type|=256,this.fc(m)):(k=a.Pd(n,this.Ka,this.aA-c),k.type|=256),this.fc(k)))}};e.prototype.mE=function(){var f,h=this.Bw;this.gf=0;var k=.5*this.qa,m=0,n=0;for(f=0;f<h;f++){var p=this.wg[f],r=0==f?this.wg[h-1]:this.wg[f-1],t=f==h-1?this.wg[0]:this.wg[f+1],x=r.x-p.x,K=r.y-p.y,ca=t.x-p.x,ha=t.y-p.y,da=Math.atan2(K,x),ka=Math.atan2(ha,ca);this.Jv=da;this.aA=ka;0==f&&(m=da,
n=ka);x=x*ha-ca*K;K=ka;ka<da&&(ka+=l);if(0<x*this.Ka)1==this.Ki||2==this.Ki?(da=a.Pd(p,this.Ka,da+c),this.fc(da),da=a.TE(p,da),this.fc(da),da=a.Pd(p,this.Ka,ka-c),p=a.TE(p,da),p.type|=256,this.fc(p),this.fc(da)):(x=.5*(ka-da),x=this.Ka/Math.abs(Math.sin(x)),da=a.Pd(p,x,.5*(da+ka)),this.fc(da,f));else if(0!=(p.type&512)){x=1-k/Math.abs(this.Ka);r=1;t=0>this.Ka?-N:N;-1<x&&1>x&&(K=2*Math.acos(x),.017453292519943295>K&&(K=.017453292519943295),r=g.O.truncate(N/K+1.5),1<r&&(t/=r));K=da+c;da=a.Pd(p,this.Ka,
K);0==f&&(da.type|=1024);this.fc(da,f);x=this.Ka/Math.cos(t/2);K+=t/2;da=a.Pd(p,x,K);da.type|=1024;for(this.fc(da);0<--r;)K+=t,da=a.Pd(p,x,K),da.type|=1024,this.fc(da);da=a.Pd(p,this.Ka,ka-c);da.type|=1024;this.fc(da)}else if(1==this.Ki)da=a.Pd(p,this.Ka,da+c),this.fc(da,f),da=a.Pd(p,this.Ka,ka-c),this.fc(da);else if(0==this.Ki)for(x=1-k/Math.abs(this.Ka),r=1,t=ka-c-(da+c),-1<x&&1>x&&(K=2*Math.acos(x),.017453292519943295>K&&(K=.017453292519943295),r=g.O.truncate(Math.abs(t)/K+1.5),1<r&&(t/=r)),x=
this.Ka/Math.cos(.5*t),K=da+c+.5*t,da=a.Pd(p,x,K),this.fc(da,f);0<--r;)K+=t,da=a.Pd(p,x,K),this.fc(da);else 2==this.Ki?(x=r.x-p.x,K=r.y-p.y,ca=t.x-p.x,ha=t.y-p.y,r=(x*ca+K*ha)/Math.sqrt(x*x+K*K)/Math.sqrt(ca*ca+ha*ha),.99999999<r?(da=a.Pd(p,1.4142135623730951*this.Ka,ka-.25*N),this.fc(da,f),da=a.Pd(p,1.4142135623730951*this.Ka,ka+.25*N),this.fc(da)):(r=Math.abs(this.Ka/Math.sin(.5*Math.acos(r))),t=Math.abs(this.CA*this.Ka),r>t?(x=.5*(ka-da),x=this.Ka/Math.abs(Math.sin(x)),da=a.Pd(p,x,.5*(da+ka)),
ka=g.h.construct(da.x,da.y),da=g.h.construct(p.x,p.y),p=new g.h,p.uc(ka,da),ka=new g.h,ka.HW(t/p.length(),p,da),da=(r-t)*Math.abs(this.Ka)/Math.sqrt(r*r-this.Ka*this.Ka),0<this.Ka?p.Hv():p.ar(),p.scale(da/p.length()),da=new g.h,da.add(ka,p),r=new g.h,r.uc(ka,p),da=a.al(da),this.fc(da,f),da=a.al(r),this.fc(da)):(x=.5*(ka-da),x=this.Ka/Math.abs(Math.sin(x)),da=a.Pd(p,x,.5*(da+ka)),this.fc(da,f)))):(ka=K,0<this.Ka?(ka>da&&(ka-=l),r=da-ka<c):(ka<da&&(ka+=l),r=ka-da<c),r?(x=1.4142135623730951*this.Ka,
K=0>x?da+.25*N:da+.75*N,da=a.Pd(p,x,K),this.fc(da,f),K=0>x?ka-.25*N:ka-.75*N,da=a.Pd(p,x,K),this.fc(da)):(x=.5*(ka-da),x=this.Ka/Math.abs(Math.sin(x)),ka<da&&(ka+=l),da=a.Pd(p,x,(da+ka)/2),this.fc(da,f)))}this.Jv=m;this.aA=n;this.fc(this.Yb[0],0);p=a.SO(this.Yb[this.gf-1]);this.Yb[0]=p;return this.wW()};e.prototype.Au=function(f,h){if(!(2>h))for(var k=0;k<h;k++){var m=this.Yb[f+k];0!=k?this.NA.Ci(g.h.construct(m.x,m.y)):this.NA.Lt(g.h.construct(m.x,m.y))}};e.prototype.fM=function(f,h,k){var m=f.Ba(h),
n=f.Vc(h);this.Yb=[];this.NA=k;if(f.dc(h)){for(h=f.Na(m);f.Na(n-1).qb(h);)n--;if(2<=n-m){this.Bw=n-m;this.wg=[];for(h=m;h<n;h++)this.wg.push(a.al(f.Na(h)));this.mE()&&this.Au(0,this.gf-1)}}else{for(h=f.Na(m);m<n&&f.Na(m+1).qb(h);)m++;for(h=f.Na(n-1);m<n&&f.Na(n-2).qb(h);)n--;if(2<=n-m){this.Bw=2*(n-m)-2;this.wg=[];k=a.al(f.Na(m));k.type|=1536;this.wg.push(k);for(h=m+1;h<n-1;h++)k=a.al(f.Na(h)),this.wg.push(k);k=a.al(f.Na(n-1));k.type|=512;this.wg.push(k);for(h=n-2;h>=m+1;h--)k=a.al(f.Na(h)),k.type|=
1024,this.wg.push(k);if(this.mE())if(2<=this.Yb.length){f=-1;(n=0!=(this.Yb[this.gf-1].type&1024))||(f=0);for(h=1;h<this.gf;h++)(m=0!=(this.Yb[h].type&1024))?n||(n=h-1,1<n-f+1&&this.Au(f,n-f+1)):n&&(f=h-1),n=m;n||(n=this.gf-1,1<n-f+1&&this.Au(f,n-f+1))}else f=0,n=this.gf-1,0<=f&&1<=n-f&&this.Au(f,n-f+1)}}this.wg=null;this.Bw=0;this.Yb=null;this.gf=0};e.prototype.wW=function(){for(var f=!1,h=0;h<this.gf;h++){var k=this.Yb[h];k.qh=h+1;k.sh=h-1;this.Yb[h]=k}k=this.Yb[0];k.sh=this.gf-2;this.Yb[0]=k;k=
this.Yb[this.gf-2];k.qh=0;this.Yb[this.gf-2]=k;for(h=k=0;h<this.gf;h++)if(0!=(this.Yb[k].type&256)){var m=this.GP(k);if(-1!=m)k=m;else{f=!0;break}}else k=this.Yb[k].qh;if(f)return!1;this.QO(k);return!0};e.prototype.GP=function(f){for(var h=this.gf-1,k=f,m,n,p=1;p<=h-2;p++){m=k=this.Yb[k].qh;n=f;for(var r=1;r<=p;r++){n=this.Yb[n].sh;if(0==(this.Yb[n].type&256)&&0==(this.Yb[m].type&256)){var t=this.gS(n,m);if(-1!=t)return t}m=this.Yb[m].sh}}return-1};e.prototype.gS=function(f,h){var k=this.Yb[this.Yb[f].sh],
m=this.Yb[f],n=this.Yb[this.Yb[h].sh],p=this.Yb[h];if(!this.JW(k,m,n,p))return-1;var r=new b;return this.xQ(k,m,n,p,r)&&!r.bE&&g.O.bK((m.x-k.x)*(p.y-n.y)-(m.y-k.y)*(p.x-n.x))!=g.O.bK(this.Ka)?(k=this.Yb[f].sh,r.an.type=m.type,r.an.qh=h,r.an.sh=k,this.Yb[f]=r.an,r.an=this.Yb[h],r.an.sh=f,this.Yb[h]=r.an,h):-1};e.prototype.JW=function(f,h,k,m){return Math.max(f.x,h.x)>=Math.min(k.x,m.x)&&Math.max(k.x,m.x)>=Math.min(f.x,h.x)&&Math.max(f.y,h.y)>=Math.min(k.y,m.y)&&Math.max(k.y,m.y)>=Math.min(f.y,h.y)};
e.prototype.xQ=function(f,h,k,m,n){n.bE=!1;var p=(h.y-f.y)*(m.x-k.x)-(h.x-f.x)*(m.y-k.y),r=(k.y-f.y)*(h.x-f.x)-(k.x-f.x)*(h.y-f.y);p=0==p?2:r/p;if(0<=p&&1>=p){var t=p;p=(m.y-k.y)*(h.x-f.x)-(m.x-k.x)*(h.y-f.y);r=(f.y-k.y)*(m.x-k.x)-(f.x-k.x)*(m.y-k.y);p=0==p?2:r/p;if(0<=p&&1>=p)return n.an=a.TO(f.x+p*(h.x-f.x),f.y+p*(h.y-f.y)),n.an.Uh=k.Uh+t*(m.Uh-k.Uh),0!=t&&1!=t||0!=p&&1!=p||(n.bE=!0),n.VY=p,n.WY=t,(0==t||1==t)&&0<p&&1>p||(0==p||1==p)&&0<t&&1>t?!1:!0}return!1};e.prototype.QO=function(f){for(;this.Yb[f].sh<
f;)f=this.Yb[f].sh;var h=0,k=f;do k=this.Yb[k],this.Yb[h]=k,k=k.qh,h++;while(k!=f);this.Yb[h]=this.Yb[0];this.gf=h+1};e.prototype.$C=function(f){var h=this.ko,k=h.Ga();if(null!=k){k.Zi();for(var m=-1;k.$a();)m++,this.fM(h,m,f)}};e.prototype.Rx=function(){var f=this.ko.getType();return 322==f?this.eM():197==f?this.dM():g.aa.yd(f)?(f=new g.Ta,f.oc(this.ko,!0),this.ko=f,this.Rx()):1607==f?(f=new g.Ta,this.$C(f),f):1736==f?(f=new g.Da,this.$C(f),f):null};return e}();g.IK=d})(ja||={});(function(g){var N=
function(){function b(d){this.qk=d}b.prototype.D=function(d,e){this.qk.g.D(d,e)};b.prototype.vd=function(d){var e=this.qk.Fa.ja(d);this.qk.Fa.vd(d,-1);this.qk.g.pd(e,!1)};return b}(),l=function(){function b(d){this.qk=d}b.prototype.D=function(d,e){this.qk.IT.D(d,e)};b.prototype.vd=function(d){this.qk.Fa.vd(d,-1)};return b}(),c=function(){function b(d){this.qk=d}b.prototype.D=function(d,e){e.L(this.qk.LT[d])};b.prototype.vd=function(d){this.qk.Fa.vd(d,-1)};return b}(),a=function(){function b(d){void 0===
d?(this.Fa=new g.Yj,this.Fa.De(20),this.g=new g.gd,this.xT=this.g.Ig(550),this.Ss=this.g.vf(this.xT,-1),this.Xh=new N(this)):d instanceof Array?(this.Fa=new g.Yj,this.Fa.De(20),this.LT=d,this.Xh=new c(this)):(this.Fa=new g.Yj,this.Fa.De(20),this.IT=d,this.Xh=new l(this))}b.prototype.Ib=function(d){var e=d.getType();if(g.Gx.xj(e))this.jN(d);else if(g.Vk.yd(e))this.oN(d);else if(197==e)this.gN(d);else if(33==e)this.nN(d);else throw g.i.N("invalid shape type");};b.prototype.cR=function(){var d=new g.Sa,
e=this.Fa.rc(-1),f=new g.Da(this.g.ht);this.g.Vi(this.Fa.ja(e),d);f.nf(d);for(e=this.Fa.lb(e);-1!=e;e=this.Fa.lb(e))this.g.Vi(this.Fa.ja(e),d),f.lineTo(d);return f};b.RO=function(d){var e=new b(d),f=d.I(),h=1,k=new g.h,m=new g.h,n=new g.h;for(d.D(0,k);;){d.D(h,m);if(!(m.Rz(k)&&h<f-1))break;h++}e.Fa.addElement(0,-1);e.Fa.xn(h);for(f=h+1;f<d.I();f++)d.D(f,n),h=e.pC(n),-1!=h&&e.Fa.Sj(h,f);n=new g.Sa;h=e.Fa.rc(-1);f=new g.Da(d.description);d.ve(e.Fa.ja(h),n);f.nf(n);for(h=e.Fa.lb(h);-1!=h;h=e.Fa.lb(h))d.ve(e.Fa.ja(h),
n),f.lineTo(n);return f};b.construct=function(d,e,f){for(var h=new b(d),k=1,m=d[0];d[k].Rz(m)&&k<e-1;)k++;h.Fa.addElement(0,-1);h.Fa.xn(k);for(k+=1;k<e;k++)m=h.pC(d[k]),-1!=m&&h.Fa.Sj(m,k);d=0;for(e=h.Fa.rc(-1);-1!=e;e=h.Fa.lb(e))f[d++]=h.Fa.ja(e);return d};b.JG=function(d,e){var f=d.Ba(e),h=d.Vc(e);e=!d.dc(e)&&d.Nn(e);d=d.ub(0);f*=2;h*=2;e&&(h-=2);if(6>h-f)return!0;e=new g.h;var k=new g.h,m=new g.h;d.tc(f,e);d.tc(f+2,k);d.tc(f+4,m);var n=b.Wu(k,m,e);if(n.ps()||!b.um(n.value()))return!1;var p=g.h.construct(k.x,
k.y),r=new g.h;for(f+=6;f<h;f+=2){r.L(k);k.L(m);d.tc(f,m);n=b.Wu(k,m,e);if(n.ps()||!b.um(n.value()))return!1;n=b.Wu(p,m,e);if(n.ps()||!b.um(n.value()))return!1;n=b.Wu(k,m,r);if(n.ps()||!b.um(n.value()))return!1}return!0};b.prototype.jN=function(d){for(var e=new g.Sa,f=new g.h,h=0;h<d.I();h++){d.D(h,f);var k=this.Cr(f);if(-1!=k){d.ve(h,e);var m=this.g.fc(this.Ss,e);this.Fa.Sj(k,m)}}};b.prototype.gN=function(d){for(var e=new g.Sa,f=new g.h,h=0;4>h;h++){d.mB(h,f);var k=this.Cr(f);if(-1!=k){d.Hf(h,e);
var m=this.g.fc(this.Ss,e);this.Fa.Sj(k,m)}}};b.prototype.oN=function(d){var e=new g.Sa,f=d.ac();f=this.Cr(f);if(-1!=f){d.To(e);var h=this.g.fc(this.Ss,e);this.Fa.Sj(f,h)}f=d.wc();f=this.Cr(f);-1!=f&&(d.Po(e),d=this.g.fc(this.Ss,e),this.Fa.Sj(f,d))};b.prototype.nN=function(d){var e=d.D();e=this.Cr(e);-1!=e&&(d=this.g.fc(this.Ss,d),this.Fa.Sj(e,d))};b.prototype.Cr=function(d){var e=-1;if(0==this.Fa.size(-1))return e=this.Fa.addElement(-4,-1);if(1==this.Fa.size(-1)){var f=this.g.Na(this.Fa.ja(this.Fa.rc(-1)));
d.Rz(f)||(e=this.Fa.xn(-5));return e}return e=this.pC(d)};b.prototype.pC=function(d){var e=-1,f=this.Fa.rc(-1),h=this.Fa.Fc(-1),k=this.Fa.ja(f),m=this.Fa.ja(h),n=new g.h,p=new g.h;this.Xh.D(k,n);this.Xh.D(m,p);k=g.h.Uq(p,d,n);if(b.um(k))e=this.Fa.xn(-1),n=this.nC(d,h,f),n!=f&&this.oC(d,f,this.Fa.we(n));else if(b.CG(k)){p=this.Fa.sv(-1);var r=this.Fa.rc(-1),t=this.Fa.Fc(-1);k=new g.h;for(m=new g.h;r!=this.Fa.we(t);){var x=this.Fa.ja(p);this.Xh.D(x,k);x=g.h.Uq(k,d,n);b.CG(x)?(t=p,p=this.Fa.ll(p)):(r=
p,p=this.Fa.Xp(p))}p=t;n=r;x=this.Fa.ja(p);r=this.Fa.ja(n);this.Xh.D(x,k);this.Xh.D(r,m);if(n==f||(k=g.h.Uq(m,d,k),b.um(k)))e=this.Fa.zu(n,p,-2,!1),this.oC(d,p,h),this.nC(d,n,f)}else null==this.sb&&(this.sb=new g.yb),this.sb.Dc(p),this.sb.Qc(n),n=this.sb.fe(d,!0),0>n?(n=this.Fa.we(h),this.Fa.vd(h,-1),e=this.Fa.xn(-3),this.nC(d,n,f)):1<n&&(n=this.Fa.lb(f),this.Fa.vd(f,-1),e=this.Fa.zu(-1,n,-3,!1),this.oC(d,n,h));return e};b.prototype.oC=function(d,e,f){if(e!=f){var h=this.Fa.ja(e),k=this.Fa.lb(e),
m=new g.h,n=new g.h;for(this.Xh.D(h,m);e!=f&&2<this.Fa.size(-1);){this.Xh.D(this.Fa.ja(k),n);h=g.h.Uq(n,d,m);if(b.um(h))break;h=e;e=k;m.L(n);k=this.Fa.lb(e);this.Xh.vd(h)}}};b.prototype.nC=function(d,e,f){if(e==f)return f;var h=this.Fa.ja(e),k=this.Fa.we(e),m=new g.h,n=new g.h;for(this.Xh.D(h,m);e!=f&&2<this.Fa.size(-1);){this.Xh.D(this.Fa.ja(k),n);h=g.h.Uq(m,d,n);if(b.um(h))break;h=e;e=k;m.L(n);k=this.Fa.we(e);this.Xh.vd(h)}return e};b.Wu=function(d,e,f){var h=new g.Wb;h.set(e.x);h.sub(d.x);var k=
new g.Wb;k.set(f.y);k.sub(d.y);var m=new g.Wb;m.set(e.y);m.sub(d.y);e=new g.Wb;e.set(f.x);e.sub(d.x);h.Ag(k);m.Ag(e);h.sub(m);return h};b.um=function(d){return 0>d};b.CG=function(d){return 0<d};return b}();g.Zt=a})(ja||={});(function(g){var N=function(){function l(c){this.g=null;this.tH=!0;this.nd=c}l.zU=function(c,a,b){c=g.ta.Er(c);return g.Yt.Cv(a.Lg(),a.ih(),b.Lg(),b.ih(),g.lc.ox(c))};l.CO=function(c,a){var b=new g.Sa;g.Yt.WT(c,a,b);return b};l.V=function(c,a,b,d){b=new l(b);b.g=c;b.qa=a;b.tH=
d;return b.EM()};l.prototype.nM=function(c){return g.Yt.iQ(this.g,c)};l.prototype.sM=function(c){return g.$t.V(this.g,c,this.nd)};l.prototype.EM=function(){var c=this.qa,a=g.ta.Er(c);c=g.ta.rN(c);var b=1.00001*c;c*=1.000001;for(var d=!1,e=30<this.g.fd+10?1E3:(this.g.fd+10)*(this.g.fd+10),f=0,h=this.g.jS();;f++){if(f>e)throw g.i.fa("Internal Error: max number of iterations exceeded");var k=this.nM(a);d=d||k;this.tH&&(k=0!=this.g.Gp(a,!0,!1),d=d||k);k=!1;if(0==f||h||g.$t.kI(!0,this.g,c,null,this.nd))k=
this.sM(b),d=d||k;if(!k)break;g.mp.zp(this.nd)}return d};return l}();g.Tk=N})(ja||={});(function(g){var N=function(){function c(a){this.$d=this.Mc=null;this.Ys=0;this.Ub=a;this.cA=!0}c.prototype.uv=function(a,b){var d=this.g.bc(a);if(null==d){if(!this.g.ed(a,b))return null;d=b}return d};c.prototype.Xq=function(){var a;void 0===a&&(a=!1);this.Ys++;if(a||0==(this.Ys&4095))this.Ys=0,g.mp.zp(this.Ub)};c.prototype.nP=function(){var a=this.g.Yq(!1),b=!1,d=new g.yb,e=new g.yb,f=new g.l;f.Oa();var h=new g.l;
h.Oa();for(var k=new g.Sa,m=new g.TC,n=a.next();-1!=n;n=a.next()){g.mp.zp(this.Ub);var p=null,r=!1;if(!g.aa.Rn(this.g.ic(a.ck))){p=this.uv(n,d);if(null==p)continue;p.A(f);f.W(this.qa,this.qa);if(p.Bi(this.qa))if(p.Bi(0))r=!0,p=null;else continue}var t=this.g.Yq(a),x=t.next();for(-1!=x&&(x=t.next());-1!=x;x=t.next()){var K=null,ca=!1;if(!g.aa.Rn(this.g.ic(t.ck))){K=this.uv(x,e);if(null==K)continue;K.A(h);if(K.Bi(this.qa))if(K.Bi(0))ca=!0,K=null;else continue}var ha=0,da=0;if(null!=p&&null!=K)f.HG(h)&&
(m.Oo(p),m.Oo(K),m.Ea(this.qa,!1),ha=m.ol(0),da=m.ol(1),0<ha+da&&(this.g.jr(n,m,0,!0),this.g.jr(x,m,1,!0)),m.clear());else if(null!=p){var ka=new g.h;this.g.D(x,ka);if(f.contains(ka)){m.Oo(p);this.g.Vi(x,k);m.Kz(this.qa,k,!1);ha=m.ol(0);if(0<ha)if(this.g.jr(n,m,0,!0),ca){ca=-1;for(ka=this.g.U(x);-1!=ka&&ka!=x&&(K=this.uv(ka,e),ca=ka,null!=K&&K.Bi(0));ka=this.g.U(ka));for(ka=x;-1!=ka&&(this.g.Dh(ka,m.Bf),ka!=ca);ka=this.g.U(ka));}else this.g.Dh(x,m.Bf);m.clear()}}else if(null!=K){if(ka=new g.h,this.g.D(n,
ka),h.W(this.qa,this.qa),h.contains(ka)){m.Oo(K);this.g.Vi(n,k);m.Kz(this.qa,k,!1);da=m.ol(0);if(0<da)if(this.g.jr(x,m,0,!0),r){ca=-1;for(ka=this.g.U(n);-1!=ka&&ka!=n&&(K=this.uv(ka,e),ca=ka,null!=K&&K.Bi(0));ka=this.g.U(ka));for(ka=n;-1!=ka&&(this.g.Dh(ka,m.Bf),ka!=ca);ka=this.g.U(ka));}else this.g.Dh(n,m.Bf);m.clear()}}else continue;if(0!=ha+da){if(0!=ha){p=this.g.bc(n);if(null==p){if(!this.g.ed(n,d))continue;p=d;d.A(f)}else p.A(f);if(p.Bi(this.qa))break}b=!0}}}return b};c.prototype.oP=function(){return this.QU()};
c.prototype.QU=function(){return(new g.RC).PX(this.g,this.qa)};c.prototype.lI=function(){var a=!1;null==this.Mc&&(this.Mc=new g.Yj);var b=new g.ia(0);b.Jb(this.g.fd+1);for(var d=this.g.Yq(),e=d.next();-1!=e;e=d.next())b.add(e);this.g.nx(b,b.size);b.add(-1);d=this.g.Gd();e=this.g.Gd();this.$d=new g.UC(this.g,this.qa,!this.cA);this.Mc.Vo(this.$d);var f=new g.ia(0),h=new g.ia(0),k=0;new g.h;var m=this.g.td;this.g.vb.mc();for(var n=this.g.vb.za[0].o,p,r,t=b.get(k++);-1!=t;){r=m.T(t,0);p=n[2*r];r=n[2*
r+1];var x=p,K=r;do{var ca=m.T(t,2),ha=m.T(t,1);if(-1!=ca){var da=m.T(ca,0),ka=n[2*da];da=n[2*da+1];0>(K<da?-1:K>da?1:x<ka?-1:x>ka?1:0)&&(h.add(t),h.add(ca))}-1!=ha&&(da=m.T(ha,0),ka=n[2*da],da=n[2*da+1],0>(K<da?-1:K>da?1:x<ka?-1:x>ka?1:0)&&(h.add(ha),h.add(ha)));ka=this.g.Pa(t,d);-1!=ka&&(f.add(ka),this.g.Ra(t,d,-1));ka=this.g.Pa(t,e);-1!=ka&&(f.add(ka),this.g.Ra(t,e,-1));t=b.get(k++);-1!==t&&(K=m.T(t,0),x=n[2*K],K=n[2*K+1])}while(-1!=t&&x===p&&K===r);x=1==f.size&&2==h.size;ka=K=-1;ca=0;for(ha=f.size;ca<
ha;ca++){da=f.get(ca);var ta=this.Mc.we(da);-1==ta||f.hG(ta)||(K=ta);da=this.Mc.lb(da);-1==da||f.hG(da)||(ka=da);if(-1!=K&&-1!=ka)break}this.$d.$J(r,p);ca=0;for(ha=f.size;ca<ha;ca++)da=f.get(ca),this.Mc.vd(da,-1);f.clear(!1);if(!x&&-1!=K&&-1!=ka&&this.qO(K,ka)){a=!0;this.Ni=this.$d.rm();break}ca=0;for(ha=h.size;ca<ha;ca+=2){r=h.get(ca);p=h.get(ca+1);x?(r=this.Mc.zu(K,ka,r,!0),x=!1):r=this.Mc.addElement(r,-1);if(this.$d.rg){this.Ni=this.$d.rm();a=!0;break}-1==this.g.Pa(p,d)?this.g.Ra(p,d,r):this.g.Ra(p,
e,r)}if(a)break;h.Bh(0)}this.g.Td(d);this.g.Td(e);return a};c.prototype.qO=function(a,b){this.$d.compare(this.Mc,this.Mc.ja(a),b);a=this.$d.rg;this.$d.Kr();return a};c.yE=function(a){for(var b=a.ld;-1!=b;b=a.ue(b))if(g.aa.Hc(a.ic(b)))return!0;return!1};c.fQ=function(a,b,d,e){if(!c.yE(a))return!1;b=new c(e);b.g=a;b.qa=d;if(15>a.fd)a=b.nP();else return b.oP();return a};c.V=function(a,b,d){return c.fQ(a,a.IF(),b,d)};c.kI=function(a,b,d,e,f){if(!c.yE(b))return!1;var h=new c(f);h.g=b;h.qa=d;h.cA=a;if(h.lI())return null!=
e&&e.Wt(h.Ni),!0;var k=new g.Dd;k.$B();b.Oc(k);h=new c(f);h.g=b;h.qa=d;h.cA=a;a=h.lI();k.$B();b.Oc(k);return a?(null!=e&&e.Wt(h.Ni),!0):!1};c.Ml=function(a,b){a=a.I();return 16>a?!1:2*a+Math.log(a)*Math.LOG10E/Math.log(2)*b<1*a*b};c.lP=function(a,b,d,e){var f=b.getType();if(g.aa.Hc(f))return(new c(e)).mP(a,b,d);throw g.i.fa("crack_A_with_B");};c.prototype.mP=function(a,b,d){var e=new g.l;a.xc(e);var f=new g.l;b.xc(f);f.W(d,d);if(!f.isIntersecting(e))return a;var h=a.Bb,k=null;null!=h&&(k=h.Fb);c.Ml(a,
a.I())&&(k=g.ta.jj(a,f));var m=null!=k?k.getIterator():null,n=b.Ga();b=a.Ga();var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(f=[];n.$a();)for(;n.Ha();){var r=n.ha();if(null!=k)for(m.Uo(r,d),h=m.next();-1!=h;h=m.next()){if(this.Xq(),b.Vb(k.ja(h),-1),b.Ha()){h=b.ha();var t=h.Ea(r,null,p,null,d);for(h=0;h<t;++h){var x=p[h];if(0!=x&&1!=x){var K=b.wb(),ca=new l;ca.t=x;ca.index=K;f.push(ca)}}}}else{var ha=new g.l;r.xc(ha);ha.W(d,d);if(e.isIntersecting(ha))for(b.Zi();b.$a();)for(;b.Ha();)if(this.Xq(),h=b.ha(),
x=new g.l,h.xc(x),x.isIntersecting(ha))for(t=h.Ea(r,null,p,null,d),h=0;h<t;++h)x=p[h],0!=x&&1!=x&&(K=b.wb(),ca=new l,ca.t=x,ca.index=K,f.push(ca))}}if(0==f.length)return a;f=f.sort(l.Ey);a=a.Ia();for(b.Zi();b.$a()&&!b.Ha(););d=b.ha();e=new g.ig;k=-1;h=0;for(m=f.length;h<m;){p=f[h].index;for(n=h+1;n<m&&f[n].index==p;)++n;for(;b.wb()<p;){this.Xq();r=b.Ha();x=b.gb;(ha=r||!b.On()||b.Pn())&&a.oc(d,k!=x);k=x;if(!r)for(;b.$a()&&!b.Ha(););d=b.ha()}for(p=0;h<n;h++)x=f[h].t,x!=p&&(d.ah(p,x,e),p=x,x=b.gb,a.oc(e.get(),
k!=x),k=x);if(ha=(r=b.Ha())||!b.On()||b.Pn())d.ah(p,1,e),a.oc(e.get(),!1);if(r)d=b.ha();else{for(;b.$a()&&!b.Ha(););d=b.Ha()?b.ha():null}h=n}null!=d&&(x=b.gb,(ha=(r=b.Ha())||!b.On()||b.Pn())&&a.oc(d,k!=x),k=x);for(r=b.Ha();;){if(!r){for(;b.$a()&&!(r=b.Ha()););if(!r)break}d=b.ha();x=b.gb;(ha=(r=b.Ha())||!b.On()||b.Pn())&&a.oc(d,k!=x);k=x}return a};return c}();g.$t=N;var l=function(){function c(){}c.Ey=function(a,b){return a.index==b.index?a.t>b.t?1:a.t<b.t?-1:0:a.index>b.index?1:-1};return c}()})(ja||=
{});(function(g){(function(a){a[a.Left=0]="Left";a[a.Right=1]="Right";a[a.Coincident=2]="Coincident";a[a.Undefined=3]="Undefined";a[a.Uncut=4]="Uncut"})(g.KK||(g.KK={}));var N=function(){return function(a,b,d,e,f,h,k,m,n,p,r){this.X=a;this.bt=b;this.Ns=d;this.tg=e;this.Lm=p;this.Al=r}}();g.uY=N;var l=function(){function a(b,d){this.JH=b;this.Hi=d}a.prototype.qM=function(b,d){var e=new g.h;this.Hi.D(b,e);var f=new g.h;this.Hi.D(d,f);e=e.compare(f);if(0!=e)return e;b=this.Hi.Pa(b,this.JH);d=this.Hi.Pa(d,
this.JH);return b<d?-1:b==d?0:1};return a}(),c=function(){return function(a,b,d,e,f,h,k,m,n){this.tg=a;this.Ns=b;this.OA=d;this.UH=e;this.Ei=f;this.Al=h;this.Lm=k;this.VH=m;this.OT=n}}();g.tY=c;g.LK=function(){function a(){}a.JK=function(b,d,e,f,h,k){if(d.B())b=new N(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),h.push(b);else if(e.B())b=new N(d,4,-1,-1,NaN,4,-1,-1,NaN,-1,-1,NaN,-1,-1,NaN),h.push(b);else{var m=new g.gd;m.Ib(d);m.Ib(e);g.Tk.V(m,f,k,!0);if(0==m.fd)b=new N(d.Ia(),4,-1,-1,NaN,4,-1,-1,
NaN,-1,-1,NaN,-1,-1,NaN),h.push(b);else{d=0;e=m.Gd();for(f=m.ld;-1!=f;f=m.ue(f))for(k=m.Ob(f);-1!=k;k=m.Rb(k))for(var n=m.Xa(k),p=0,r=m.Ja(k);p<r;n=m.U(n),p++)m.Ra(n,e,d++);d=a.HM(e,m);a.cM(b,d,m,h)}}};a.HM=function(b,d){for(var e=d.fd,f=new g.ia(0),h=d.ld;-1!=h;h=d.ue(h))for(var k=d.Ob(h);-1!=k;k=d.Rb(k))for(var m=d.Xa(k),n=0,p=d.Ja(k);n<p;m=d.U(m),n++)f.add(m);var r=new l(b,d);f.Vd(0,e,function(Na,La){return r.qM(Na,La)});b=[];var t=[],x=d.Gd(),K=d.Gd();h=d.ld;k=d.ue(h);p=new g.h;var ca=new g.h,
ha=f.get(0),da=d.bd(ha),ka=d.Qf(da);d.D(ha,p);var ta=1;for(m=0;ta<e-1;){var ua=!1;for(n=ta;n<e;n++)if(n!=m){var wa=f.get(n),Ea=d.bd(wa),Ga=d.Qf(Ea);d.D(wa,ca);if(p.qb(ca))ka==h&&Ga==k&&(ua=a.uM(x,K,d,b,t,da,ha,Ea,wa));else break}if(ua||m==ta-1){ua&&m==ta-1&&ta--;if(++m==e)break;ha=f.get(m);da=d.bd(ha);ka=d.Qf(da);d.D(ha,p)}ua||(ta=m+1)}e=[];for(h=d.ld;-1!=h;h=d.ue(h))for(k=d.Ob(h);-1!=k;k=d.Rb(k))for(f=d.Xa(k),n=0,p=d.Ja(k);n<p;f=d.U(f),n++){m=d.Pa(f,K);if(0<=m)for(;m<t.length&&t[m].tg==f;)e.push(t[m++]);
m=d.Pa(f,x);if(0<=m)for(;m<b.length&&b[m].tg==f;)e.push(b[m++])}d.Td(x);d.Td(K);return e};a.uM=function(b,d,e,f,h,k,m,n,p){var r=e.rj(k),t=e.rj(n),x=e.Xa(k),K=e.Xa(n),ca=e.Ma(m),ha=e.Ma(p),da=!1,ka=!1,ta=!1,ua=!1;m!=x&&(p!=K&&(da=a.vM(b,e,f,k,ca,n,ha)),p!=t&&(ka=a.wM(b,e,f,k,ca,n,p)));m!=r&&(p!=K&&(ta=a.xM(d,e,h,k,m,n,ha,x)),p!=t&&(ua=a.yM(d,e,h,k,m,n,p,x)));da&&ka&&ta?(b=f.length-1,2==h[ua?h.length-2:h.length-1].Ei&&(f[b-1]=f[b],--f.length)):da&&ka&&ua&&2==h[h.length-1].Ei&&(h=f[f.length-1],--f.length,
e.Pa(h.tg,b)==f.length&&e.Ra(h.tg,b,-1));return da||ka||ta||ua};a.vM=function(b,d,e,f,h,k,m){var n=new g.yb,p=new g.yb,r=[0,0],t=[0,0],x=d.bc(h);null==x&&(d.ed(h,n),x=n);n=d.bc(m);null==n&&(d.ed(m,p),n=p);x=x.Ea(n,null,r,t,0);2>x&&(f=new c(h,f,r[0],NaN,x,m,k,t[0],NaN),e.push(f),f=d.Pa(h,b),0>f&&d.Ra(h,b,e.length-1));return!0};a.wM=function(b,d,e,f,h,k,m){var n=new g.yb,p=new g.yb,r=[0,0],t=[0,0],x=d.bc(h);null==x&&(d.ed(h,n),x=n);n=d.bc(m);null==n&&(d.ed(m,p),n=p);x=x.Ea(n,null,r,t,0);return 2>x?
(f=new c(h,f,r[0],NaN,x,m,k,t[0],NaN),e.push(f),f=d.Pa(h,b),0>f&&d.Ra(h,b,e.length-1),!0):!1};a.xM=function(b,d,e,f,h,k,m,n){var p=new g.yb,r=new g.yb,t=[0,0],x=[0,0],K=d.bc(h);null==K&&(d.ed(h,p),K=p);p=d.bc(m);null==p&&(d.ed(m,r),p=r);K=K.Ea(p,null,t,x,0);if(2==K)return f=new c(h,f,t[0],t[1],K,m,k,x[0],x[1]),e.push(f),f=d.Pa(h,b),0>f&&d.Ra(h,b,e.length-1),!0;r=!1;h==n&&(f=new c(h,f,t[0],NaN,K,m,k,x[0],NaN),e.push(f),f=d.Pa(h,b),0>f&&d.Ra(h,b,e.length-1),r=!0);return r};a.yM=function(b,d,e,f,h,k,
m,n){var p=new g.yb,r=new g.yb,t=[0,0],x=[0,0],K=d.bc(h);null==K&&(d.ed(h,p),K=p);p=d.bc(m);null==p&&(d.ed(m,r),p=r);K=K.Ea(p,null,t,x,0);if(2==K)return f=new c(h,f,t[0],t[1],K,m,k,x[0],x[1]),e.push(f),f=d.Pa(h,b),0>f&&d.Ra(h,b,e.length-1),!0;r=!1;h==n&&(f=new c(h,f,t[0],NaN,K,m,k,x[0],NaN),e.push(f),f=d.Pa(h,b),0>f&&d.Ra(h,b,e.length-1),r=!0);return r};a.cM=function(b,d,e,f){var h=[];h[0]=new g.h;h[1]=new g.h;h[2]=new g.h;h[3]=new g.h;var k=new g.h,m=new g.h,n=new g.h,p=new g.h,r=null;null!=f&&(r=
new g.ig,r.Or());var t=0,x=null,K=new g.yb;new g.yb;for(var ca=e.Ob(e.ld);-1!=ca;ca=e.Rb(ca)){for(var ha=4,da=-1,ka=-1,ta=-1,ua=-1,wa=NaN,Ea=!0,Ga=!1,Na=!0,La=!0,Ta=!0,Ra=0,Wa=ca,Xa=0,$a=e.Xa(ca),cb=e.Ja(ca),hb=0;hb<cb;$a=e.U($a),hb++){var fb=e.bc($a);if(null==fb){if(!e.ed($a,K))continue;fb=K}-1==ka&&(ka=$a);for(var Za=0;t<d.length&&$a==d[t].tg;){da=d[t].Ns;var ab=d[t].tg,Ya=d[t].OA,gb=d[t].Lm,eb=d[t].Al,jb=d[t].VH;if(2==d[t].Ei){if(Ga||(Wa=da,ka=ab,Xa=Ya,ta=gb,ua=eb,wa=jb,ha=2,null!=f?x=new g.Ta:
Ra=0,Ta=!1,La=!0),Ya=d[t].UH,jb=d[t].OT,null!=f?(fb.ah(Za,d[t].UH,r),x.oc(r.get(),La)):Ra++,Za=Ya,Ga=!0,La=Ea=!1,t+1==d.length||2!=d[t+1].Ei||d[t+1].tg==ab&&d[t+1].OA!=Za){if(null!=f){var bb=new N(x,2,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa);f.push(bb)}else null.add(Ra);Wa=da;ka=ab;Xa=Ya;ta=gb;ua=eb;wa=jb;ha=2;Ga=Ea=!1;La=Ta=!0}}else{var ib=e.U(ab);if(t<d.length-1&&d[t+1].tg==ib&&d[t+1].Al==eb&&2==d[t+1].Ei)Ya!=Za&&(Ta&&(null!=f?x=new g.Ta:Ra=0),Ea=0<t&&d[t-1].Ns==da?1==ha?0:0==ha?1:3:3,null!=f?(fb.ah(Za,
Ya,r),x.oc(r.get(),La),bb=new N(x,Ea,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa),f.push(bb)):(Ra++,null.add(Ra)),Za=Ya,Wa=da,ka=ab,Xa=Ya,ta=gb,ua=eb,wa=jb,ha=Ea,Ea=Na=!1,La=Ta=!0);else if(!a.CM(b,e,d,t,k,m)){a.zM(e,d,t,ca,$a,n,p);var db=!1;ib=!1;bb=!0;if(!(k.qb(n)||m.qb(n)||k.qb(p)||m.qb(p))){h[0].L(k);h[1].L(m);h[2].L(n);h[3].L(p);h.sort(g.h.nu);var lb=h[0],mb=h[1],nb=h[2],ob=h[3];lb.qb(k)?mb.qb(m)?b?(ib=db=!0,bb=!1):db=!1:ob.qb(m)?b?bb=ib=db=!0:db=!1:(db=!0,bb=mb.qb(n)):mb.qb(k)?nb.qb(m)?b?(ib=db=!0,
bb=!1):db=!1:lb.qb(m)?b?bb=ib=db=!0:db=!1:(db=!0,bb=nb.qb(n)):nb.qb(k)?ob.qb(m)?b?(ib=db=!0,bb=!1):db=!1:mb.qb(m)?b?bb=ib=db=!0:db=!1:(db=!0,bb=ob.qb(n)):lb.qb(m)?b?(ib=db=!0,bb=!1):db=!1:nb.qb(m)?b?bb=ib=db=!0:db=!1:(db=!0,bb=lb.qb(n))}if(db){db=$a==ab;if(Ya!=Za||db&&0==Za)Ta&&(null!=f?x=new g.Ta:Ra=0),null!=f?(fb.ah(Za,Ya,r),x.oc(r.get(),La)):Ra++;if(bb)if(1!=ha){if(Ya!=Za||db&&0==Za)null!=f?(bb=new N(x,1,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa),f.push(bb)):null.add(Ra);if(!ib)ha=1;else if(t>=d.length-
2||d[t+2].Ns!=da)ha=0}else{if(Ya!=Za||db&&0==Za)null!=f?(bb=new N(x,3,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa),f.push(bb)):null.add(Ra);ha=1}else if(0!=ha){if(Ya!=Za||db&&0==Za)null!=f?(bb=new N(x,0,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa),f.push(bb)):null.add(Ra);if(!ib)ha=0;else if(t>=d.length-2||d[t+2].Ns!=da)ha=1}else{if(Ya!=Za||db&&0==Za)null!=f?(bb=new N(x,3,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa),f.push(bb)):null.add(Ra);ha=0}if(Ya!=Za||db&&0==Za)Za=Ya,Wa=da,ka=ab,Xa=Ya,ta=gb,ua=eb,wa=jb,Ea=
Na=!1,La=Ta=!0}}}t++}1!=Za&&(Ta&&(null!=f?x=new g.Ta:Ra=0),null!=f?(fb.ah(Za,1,r),x.oc(r.get(),La)):Ra++,La=Ta=!1,Na=!0)}Na&&(Ya=1,ab=e.rj(ca),ab=e.Ma(ab),eb=gb=-1,jb=NaN,Ea?null!=f?(bb=new N(x,4,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa),f.push(bb)):null.add(Ra):(Ea=1==ha?0:0==ha?1:3,null!=f?(bb=new N(x,Ea,da,ab,Ya,ha,Wa,ka,Xa,gb,eb,jb,ta,ua,wa),f.push(bb)):null.add(Ra)))}};a.CM=function(b,d,e,f,h,k){var m=e[f].VH;if(1==m)return a.AM(b,d,e,f,h,k);if(0==m)return a.BM(b,d,e,f,h,k);throw g.i.Qa();};a.AM=
function(b,d,e,f,h,k){var m=new g.yb,n=e[f].tg,p=e[f].Lm,r=e[f].Al,t=-1,x=-1,K=-1,ca=-1;if(!b&&0<f){var ha=e[f-1];t=ha.tg;x=ha.Lm;K=ha.Al;ca=ha.Ei}var da=-1,ka=-1,ta=-1,ua=-1;f<e.length-1&&(ha=e[f+1],da=ha.tg,ka=ha.Lm,ta=ha.Al,ua=ha.Ei);var wa=d.U(n);ha=d.U(r);if(!b)return 0<f&&t==n&&x==p&&K==ha&&2==ca||f<e.length-1&&da==wa&&ka==p&&ta==ha&&2==ua?(b=d.bc(r),null==b&&(d.ed(r,m),b=m),k.L(b.kg()),h.mt(k),k.normalize(),h.normalize(),!1):f<e.length-1&&da==n&&ka==p&&ta==ha?(b=d.bc(r),null==b&&(d.ed(r,m),
b=m),h.L(b.kg()),b=d.bc(ha),null==b&&(d.ed(ha,m),b=m),k.L(b.kg()),h.Sq(),k.normalize(),h.normalize(),!1):!0;if(f==e.length-1||da!=n||ka!=p||ta!=ha||2==ua)return b=d.bc(r),null==b&&(d.ed(r,m),b=m),k.L(b.kg()),h.mt(k),k.normalize(),h.normalize(),!1;b=d.bc(r);null==b&&(d.ed(r,m),b=m);h.L(b.kg());b=d.bc(ha);null==b&&(d.ed(ha,m),b=m);k.L(b.kg());h.Sq();k.normalize();h.normalize();return!1};a.BM=function(b,d,e,f,h,k){var m=new g.yb,n=e[f].tg,p=e[f].Lm,r=e[f].Al,t=-1,x=-1,K=-1,ca=-1;if(!b&&f<e.length-1){var ha=
e[f+1];t=ha.tg;x=ha.Lm;K=ha.Al;ca=ha.Ei}var da=-1,ka=-1,ta=-1;ha=-1;0<f&&(ha=e[f-1],da=ha.tg,ka=ha.Lm,ta=ha.Al,ha=ha.Ei);var ua=d.U(n),wa=d.Ma(r);return b?0==f||da!=n||ka!=p||ta!=wa||2==ha?(b=d.bc(r),null==b&&(d.ed(r,m),b=m),k.L(b.kg()),h.mt(k),k.normalize(),h.normalize(),!1):!0:0<f&&da==n&&ka==p&&ta==wa&&2==ha||f<e.length-1&&t==ua&&x==p&&K==wa&&2==ca?(b=d.bc(r),null==b&&(d.ed(r,m),b=m),k.L(b.kg()),h.mt(k),k.normalize(),h.normalize(),!1):!0};a.zM=function(b,d,e,f,h,k,m){var n=new g.yb,p=b.bc(h);null==
p&&(b.ed(h,n),p=n);e=d[e];d=e.tg;e=e.OA;h=b.U(d);if(1==e)k.L(p.kg()),-1!=h&&h!=b.rj(f)?(p=b.bc(h),null==p&&(b.ed(h,n),p=n),m.L(p.kg()),p=b.bc(d),null==p&&b.ed(d,n)):m.L(k),k.Sq(),m.normalize(),k.normalize();else if(0==e)m.L(p.kg()),k.mt(m),m.normalize(),k.normalize();else throw g.i.Qa();};return a}()})(ja||={});(function(g){(function(f){f[f.Linear=0]="Linear";f[f.Angular=1]="Angular";f[f.Area=2]="Area"})(g.bM||(g.bM={}));var N=function(){function f(h,k,m){this.od=k;this.ai=m;this.vA=h}f.prototype.Nb=
function(h){return h instanceof f?this.ai===h.ai:!1};f.aG=function(h){return 0!==h.od?null:-1===h.vA?new f(-1,2,h.ai*h.ai):f.Zg(d[h.vA])};f.Zg=function(h){h=b[h];return void 0===h?null:h};f.ZO=function(h,k,m){var n=null;if(void 0!==m&&null!==m)try{"EPSG"===m.values[0]&&(n=f.Zg(parseInt(m.values[1])))}catch(p){}null===n&&(n=new f(-1,h,k));return n};f.prototype.Ec=function(){return this.vA};f.prototype.CF=function(h){if(h.od!=this.od)throw g.i.Hb();return this.ai/h.ai};f.Nh=function(h,k,m){return k.CF(m)*
h};f.XE=function(h,k,m,n,p){m=m.CF(n);for(n=0;n<k;n++)p[n]=h[n]*m};return f}();g.Tc=N;for(var l=[109401,1E4,109402,4046.8564224,109403,4046.87260987425,109404,1,109405,.09290304,109406,.09290341161327487,109407,.09290137299531805,109408,3.34450944,109409,3429904,109410,1.000027193184865,109411,404.6872609874253,109412,.04046872609874253,109413,2589998.4703195216,109414,1E6,109415,.8361123569578626,109416,404.67838076760535,109417,.04046783807676053,109418,.8361244606523066,109419,.09290271785025629,
109420,404.68423895571647,109421,.04046842389557164,109422,.83612589696064,109423,.0929028774400711,109424,404.6849341289498,109425,.04046849341289498,109426,.836125904805842,109427,.09290287831176021,109428,404.68493792602754,109429,.04046849379260275,109430,.09290354800069446,109431,.09290274144751023,109432,.09290207073852812,109433,.09290279616016,109434,.09290273520025,109435,.836124673027592,109436,.836118636646753,109437,.8361251654414399,109438,.83612461680225,109439,2589988.110336,109440,
.09290286332673177,109441,.09290349665192114,109442,.83612736,109443,.8361307045194736,109444,404.68564224000005,109445,.04046856422400001,109446,.8361237024040001,109447,.0929026336004445,109448,404.683871963536,109449,.0404683871963536,109450,.01,109451,1E-4,109452,1E-6,109453,6.4516E-4,109454,6.451625806477421E-4,109455,25.292852640000003,109456,25.29295381171408,109457,3434528.1495040003,109458,3434290.937856,109459,2.89612324,109460,25E8,109461,225E8,109462,.7168473118308245,109463,100,109464,
1.244521604938272E-7,109465,1E-12,109466,1E-18],c=[1031,4.84813681109536E-9,9101,1,9102,.0174532925199433,9103,2.908882086657216E-4,9104,4.84813681109536E-6,9105,.01570796326794897,9106,.01570796326794897,9109,1E-6,9112,1.570796326794897E-4,9113,1.570796326794897E-6,9114,9.817477042468104E-4],a=[1025,.001,109452,1033,.01,109451,9001,1,109404,9002,.3048,109405,9003,.3048006096012192,109406,9005,.3047972654,109407,9014,1.8288,109408,9030,1852,109409,9031,1.0000135965,109410,9033,20.11684023368047,109411,
9034,.2011684023368047,109412,9035,1609.3472186944375,109413,9036,1E3,109414,9037,.9143917962000001,109415,9038,20.1166195164,109416,9039,.201166195164,109417,9040,.9143984146160287,109418,9041,.304799471538676,109419,9042,20.116765121552632,109420,9043,.2011676512155263,109421,9050,.9143992,109422,9051,.3047997333333333,109423,9052,20.1167824,109424,9053,.201167824,109425,9060,.9143992042898124,109426,9061,.3047997347632708,109427,9062,20.116782494375872,109428,9063,.2011678249437587,109429,9070,
.3048008333333334,109430,9080,.3047995102481469,109431,9081,.30479841,109432,9082,.3047996,109433,9083,.3047995,109434,9084,.9143985307444408,109435,9085,.91439523,109436,9086,.9143988,109437,9087,.9143985,109438,9093,1609.344,109439,9094,.3047997101815088,109440,9095,.3048007491,109441,9096,.9144,109442,9097,20.1168,109444,9098,.201168,109445,9099,.914398,109446,9300,.3047993333333334,109447,9301,20.116756,109448,9302,.20116756,109449,109001,.9144,109442,109002,.9144018288036576,109443,109003,20.1168,
109444,109004,.201168,109445,109005,.1,109450,109006,.01,109451,109007,.001,109452,109008,.0254,109453,109009,.0254000508001016,109454,109010,5.0292,109455,109011,5.029210058420118,109456,109012,1853.248,109457,109013,1853.184,109458,109014,1.7018,109459,109015,.8466683600033867,109462,109016,3.527777777777778E-4,109464,109017,1E-6,109465,109018,1E-9,109466,109030,5E4,109460,109031,15E4,109461],b=[],d=[],e=0;e<l.length;e+=2)b[l[e]]=new N(l[e],2,l[e+1]);l=null;for(e=0;e<c.length;e+=2)b[c[e]]=new N(c[e],
1,c[e+1]);c=null;for(e=0;e<a.length;e+=3)b[a[e]]=new N(a[e],0,a[e+1]),d[a[e]]=a[e+2];a=null})(ja||={});(function(g){var N=function(){function l(){this.xb=this.pb=0}l.prototype.set=function(c,a){void 0!==a?(this.pb=c,this.xb=a):"number"===typeof c?(this.pb=c,this.xb=0):(this.pb=c.pb,this.xb=c.xb)};l.prototype.value=function(){return this.pb};l.prototype.add=function(c){var a=this.pb+c.pb;c=this.xb+c.xb+2.220446049250313E-16*Math.abs(a);this.pb=a;this.xb=c};l.prototype.kN=function(){var c=this.pb+1,
a=this.xb+2.220446049250313E-16*Math.abs(c);this.pb=c;this.xb=a};l.prototype.dN=function(c,a){this.pb=c.pb+a.pb;this.xb=c.xb+a.xb+2.220446049250313E-16*Math.abs(this.pb)};l.prototype.sub=function(c){if("number"===typeof c){var a=this.pb-c;c=this.xb+2.220446049250313E-16*Math.abs(a)}else a=this.pb-c.pb,c=this.xb+c.xb+2.220446049250313E-16*Math.abs(a);this.pb=a;this.xb=c};l.prototype.Ag=function(c){var a=this.pb*c.pb;this.xb=this.xb*Math.abs(c.pb)+c.xb*Math.abs(this.pb)+this.xb*c.xb+2.220446049250313E-16*
Math.abs(a);this.pb=a};l.prototype.No=function(c){var a=this.pb*c;this.xb=this.xb*Math.abs(c)+2.220446049250313E-16*Math.abs(a);this.pb=a};l.prototype.Kl=function(c,a){var b=Math.abs(c.pb)*Math.abs(a.pb);this.xb=c.xb*Math.abs(a.pb)+a.xb*Math.abs(c.pb)+c.xb*a.xb+2.220446049250313E-16*Math.abs(b);this.pb=b};l.prototype.jm=function(c){var a=Math.abs(c.pb),b=this.pb/c.pb,d=(this.xb+Math.abs(b)*c.xb)/a;c.xb>.01*a&&(c=c.xb/a,d*=1+(1+c)*c);this.pb=b;this.xb=d+2.220446049250313E-16*Math.abs(b)};l.prototype.sqrt=
function(){if(0<=this.pb){var c=Math.sqrt(this.pb),a=this.pb>10*this.xb?.5*this.xb/c:this.pb>this.xb?c-Math.sqrt(this.pb-this.xb):Math.max(c,Math.sqrt(this.pb+this.xb)-c);a+=2.220446049250313E-16*Math.abs(c)}else this.pb<-1*this.xb?a=c=NaN:(c=0,a=Math.sqrt(this.xb));this.pb=c;this.xb=a};l.prototype.sin=function(c){var a=Math.sin(c.pb),b=Math.cos(c.pb);this.pb=a;a=Math.abs(a);this.xb=(Math.abs(b)+.5*a*c.xb)*c.xb+2.220446049250313E-16*a};l.prototype.cos=function(c){var a=Math.sin(c.pb),b=Math.cos(c.pb);
this.pb=b;b=Math.abs(b);this.xb=(Math.abs(a)+.5*b*c.xb)*c.xb+2.220446049250313E-16*b};l.prototype.qg=function(){return Math.abs(this.pb)<=this.xb};l.prototype.ps=function(){return this.qg()&&0!=this.xb};return l}();g.Wb=N})(ja||={});var za=new ja.h,Ha=new ja.h,Ua=new ja.h,Qa=new ja.h,Ja=new ja.h;(function(g){(function(c){c[c.closedPath=1]="closedPath";c[c.exteriorPath=2]="exteriorPath";c[c.ringAreaValid=4]="ringAreaValid"})(l||={});var N=function(){function c(a,b,d,e,f,h,k){void 0!==b?(this.ib=a,
this.ck=b,this.bl=d,this.ii=e,this.ya=h,this.hA=k,this.ew=f):(this.ib=a.ib,this.ck=a.ck,this.bl=a.bl,this.ii=a.ii,this.ya=a.ya,this.hA=a.hA,this.ew=a.ew);this.bH=!0}c.prototype.next=function(){return this.bH?(this.bH=!1,this.ii):-1!=this.ii?(this.ii=this.ib.U(this.ii),this.ya++,-1!=this.ii&&this.ii!=this.ew?this.ii:this.$T()):-1};c.prototype.$T=function(){this.bl=this.ib.Rb(this.bl);for(this.ya=0;-1!=this.ck;){for(;-1!=this.bl;this.bl=this.ib.Rb(this.bl))if(this.ew=this.ii=this.ib.Xa(this.bl),-1!=
this.ii)return this.ii;this.ck=this.ib.ue(this.ck);if(-1==this.ck)break;if(!this.hA||g.aa.Hc(this.ib.ic(this.ck)))this.bl=this.ib.Ob(this.ck)}return-1};c.AP=function(a,b,d,e,f,h,k){return new c(a,b,d,e,f,h,k)};return c}();g.zY=N;var l=function(){function c(){this.jo=this.Am=this.wk=this.cd=this.Ck=this.vo=this.Oi=this.md=this.bi=this.Sg=this.We=this.Il=null;this.qw=this.ld=-1;this.fd=0;this.fA=!1;this.ht=this.it=this.vb=null}c.prototype.Sh=function(a){return null!=this.We?this.We[a]:null};c.prototype.Xg=
function(a,b){if(null==this.We){if(null==b)return;this.We=[];for(var d=0,e=this.vb.I();d<e;d++)this.We.push(null)}this.We[a]=b};c.prototype.bp=function(a,b){this.md.S(a,1,b)};c.prototype.ap=function(a,b){this.md.S(a,2,b)};c.prototype.VB=function(a,b){this.md.S(a,6,b)};c.prototype.Sp=function(a){return this.md.T(a,6)};c.prototype.gx=function(a,b){this.md.S(a,7,b)};c.prototype.qv=function(a){return this.md.T(a,0)};c.prototype.OJ=function(a,b){this.cd.S(a,1,b)};c.prototype.SJ=function(a,b){this.cd.S(a,
0,b)};c.prototype.JF=function(a){return this.cd.T(a,7)};c.prototype.Zo=function(a,b){this.cd.S(a,3,b)};c.prototype.$o=function(a,b){this.cd.S(a,4,b)};c.prototype.uU=function(a){null==this.cd&&(this.cd=new g.$c(8));var b=this.cd.Ce();this.cd.S(b,2,a);this.cd.S(b,5,0);this.cd.S(b,6,0);this.cd.S(b,7,b);return b};c.prototype.OQ=function(a){this.cd.jd(a)};c.prototype.wU=function(a){null==this.md&&(this.md=new g.$c(8),this.td=new g.$c(5),this.Oi=new g.be(0),this.vo=new g.be(0));var b=this.md.Ce();this.md.S(b,
0,b);this.md.S(b,3,0);this.md.S(b,6,0);this.gx(b,a);b>=this.Oi.size&&(a=16>b?16:g.O.truncate(3*b/2),this.Oi.resize(a),this.vo.resize(a));this.Oi.set(b,0);this.vo.set(b,0);return b};c.prototype.sF=function(a){this.md.jd(a)};c.prototype.Vy=function(a){this.td.jd(a);this.fd--};c.prototype.oI=function(a){null==this.md&&(this.md=new g.$c(8),this.td=new g.$c(5),this.Oi=new g.be(0),this.vo=new g.be(0));var b=this.td.Ce(),d=0<=a?a:b;this.td.S(b,0,d);if(0>a){if(d>=this.vb.I()){a=16>d?16:g.O.truncate(3*d/2);
this.vb.resize(a);if(null!=this.We)for(var e=0;e<a;e++)this.We.push(null);null!=this.Sg&&this.Sg.resize(a);this.it=this.vb.ub(0)}this.vb.Cb(d,-1E38,-1E38);null!=this.We&&(this.We[d]=null);null!=this.Sg&&this.Sg.write(d,1)}this.td.S(b,4,2*d);this.fd++;return b};c.prototype.wj=function(a,b,d){var e=-1!=b?this.Ma(b):this.rj(a),f=-1!=e?this.U(e):-1,h=this.oI(null==d?this.fd:-1),k=this.Ua(h);null!=d&&this.vb.Ht(k,d);this.aj(h,a);this.Bc(h,f);this.Cc(h,e);-1!=f&&this.Cc(f,h);-1!=e&&this.Bc(e,h);d=this.dc(a);
e=this.Xa(a);-1==b&&this.Wg(a,h);b==e&&this.Jf(a,h);d&&-1==f&&(this.Bc(h,h),this.Cc(h,h));this.Vj(a,this.Ja(a)+1);a=this.Qf(a);this.Tj(a,this.I(a)+1);return h};c.prototype.nm=function(){null==this.jo&&(this.jo=new g.Sa(this.vb.description));return this.jo};c.prototype.Yo=function(a,b){this.cd.S(a,2,this.cd.T(a,2)&-134217729||(1==b?134217728:0))};c.prototype.In=function(a){return 0!=(this.cd.T(a,2)&134217728)?1:0};c.prototype.hN=function(a){var b=this.Ig(a.getType(),a.description);1736==a.getType()&&
this.Yo(b,a.In());this.UD(b,a);return b};c.prototype.iN=function(a){var b=this.Ig(a.getType(),a.description);this.VD(b,a);return b};c.prototype.XV=function(a,b){null==this.md&&(this.md=new g.$c(8),this.td=new g.$c(5),this.Oi=new g.be(0),this.vo=new g.be(0));this.md.De(this.md.Hg+a);this.td.De(this.td.Hg+b);this.Oi.Jb(this.Oi.size+a);this.vo.Jb(this.vo.size+a)};c.prototype.UD=function(a,b){this.XV(b.da(),b.I());this.Il.Fd(b,0,b.I());this.it=this.vb.ub(0);for(var d=null!=this.We&&null!=b.Ve,e=0,f=b.da();e<
f;e++)if(!(2>b.Ja(e))){var h=this.vf(a,-1);this.kn(h,b.dc(e));for(var k=b.Ba(e),m=b.Vc(e);k<m;k++){var n=this.wj(h,-1,null);if(d)if(n=this.Ua(n),0!=(b.ZF(k)&1))this.Xg(n,null);else{var p=new g.ig;b.bc(k,p,!0);this.Xg(n,p.get())}}}};c.prototype.VD=function(a,b){this.Il.Fd(b,0,b.I());this.it=this.vb.ub(0);a=this.vf(a,-1);var d=0;for(b=b.I();d<b;d++)this.wj(a,-1,null)};c.prototype.NX=function(a,b,d){var e=this.U(a);if(-1==e)throw g.i.Qa();for(var f=this.nm(),h=this.bd(a),k=0,m=b.ol(d);k<m;k++){var n=
this.Ua(a),p=this.U(a),r=b.Vp(d,k);0==k&&(r.To(f),this.Dh(a,f));322==r.getType()?this.Xg(n,null):this.Xg(n,g.aa.jg(r));r.Po(f);k<m-1?a=this.wj(h,p,f):this.Dh(e,f)}};c.prototype.MX=function(a,b,d){var e=this.U(a);if(-1==e)throw g.i.Qa();for(var f=this.nm(),h=this.bd(a),k=0,m=b.ol(d);k<m;k++){var n=this.Ua(a),p=this.U(a),r=b.Vp(d,m-k-1);0==k&&(r.Po(f),this.Dh(a,f));322==r.getType()?this.Xg(n,null):this.Xg(n,g.aa.jg(r));r.To(f);k<m-1?a=this.wj(h,p,f):this.Dh(e,f)}};c.prototype.IF=function(){var a=new g.l;
a.Oa();for(var b=this.Yq(),d=new g.h,e=!0,f=b.next();-1!=f;f=b.next())this.D(f,d),e?a.Zb(d.x,d.y):a.Lk(d.x,d.y),e=!1;return a};c.prototype.Ib=function(a){var b=a.getType();if(g.aa.Hc(b))return this.hN(a);if(550==b)return this.iN(a);throw g.i.Qa();};c.prototype.uN=function(a,b){var d=b.getType();if(g.aa.Hc(d))this.UD(a,b);else if(550==d)this.VD(a,b);else throw g.i.Qa();};c.prototype.mN=function(a,b){var d=this.Ig(1736,a.description);if(2>a.Ja(b))return d;this.Il.Fd(a,a.Ba(b),a.Vc(b));this.it=this.vb.ub(0);
var e=this.vf(d,-1);this.kn(e,a.dc(b)||!0);var f=null!=this.We&&null!=a.Ve,h=a.Ba(b);for(b=a.Vc(b);h<b;h++){var k=this.wj(e,-1,null);if(f)if(k=this.Ua(k),0!=(a.ZF(h)&1))this.Xg(k,null);else{var m=new g.ig;a.bc(h,m,!0);this.Xg(k,m.get())}}return d};c.prototype.Ne=function(a){var b=this.ic(a),d=g.ZK.Ig(b,this.Il.description),e=this.I(a);if(0==e)return d;if(g.aa.Hc(b)){b=this.da(a);for(var f=g.Yc.Oh(b+1),h=g.Yc.Mr(b+1,0),k=d.description,m=0,n=k.Aa;m<n;m++){for(var p=k.kd(m),r=g.ra.Va(p),t=g.Yc.YE(p,
e),x=this.vb.ub(p),K=0,ca=0,ha=0,da=this.Ob(a);-1!=da;da=this.Rb(da)){var ka=0;this.dc(da)&&(ka|=1);this.YS(da)&&(ka|=4);0!=ka&&h.zJ(ca,ka);var ta=this.Ja(da);f.write(ca++,ha);ha+=ta;if(0==p){ta=x;var ua=t,wa=new g.h;for(ka=this.Xa(da);K<ha;ka=this.U(ka),K++){var Ea=this.Ua(ka);ta.tc(2*Ea,wa);ua.Tt(2*K,wa)}}else for(ka=this.Xa(da);K<ha;ka=this.U(ka),K++)for(Ea=this.Ua(ka),ua=0;ua<r;ua++)wa=x.eg(Ea*r+ua),t.pr(K*r+ua,wa)}d.hn(p,t);f.write(b,e)}d.PJ(h);d.QJ(f);d.Pc(16777215)}else if(550==b){k=d.description;
d.resize(e);m=0;for(n=k.Aa;m<n;m++){p=k.kd(m);r=g.ra.Va(p);t=d.ub(p);x=this.vb.ub(p);K=0;da=this.Ob(a);ta=this.Ja(da);for(ka=this.Xa(da);K<ta;ka=this.U(ka),K++)for(Ea=this.Ua(ka),ua=0;ua<r;ua++)wa=x.eg(Ea*r+ua),t.pr(K*r+ua,wa);d.hn(p,t)}d.Pc(16777215)}return d};c.prototype.BB=function(a){for(var b=this.Ob(a);-1!=b;b=this.Zq(b));b=this.PR(a);var d=this.ue(a);-1!=b?this.OJ(b,d):this.ld=d;-1!=d?this.SJ(d,b):this.qw=b;this.OQ(a)};c.prototype.Ig=function(a,b){return void 0===b?this.$E(a,g.ee.og()):this.$E(a,
b)};c.prototype.$E=function(a,b){a=this.uU(a);null==this.vb?this.vb=this.Il=new g.de(b):this.Il.Jl(b);this.ht=this.Il.description;this.fA=1<this.ht.Aa;-1==this.ld?this.ld=a:(this.SJ(a,this.qw),this.OJ(this.qw,a));return this.qw=a};c.prototype.ue=function(a){return this.cd.T(a,1)};c.prototype.PR=function(a){return this.cd.T(a,0)};c.prototype.ic=function(a){return this.cd.T(a,2)&2147483647};c.prototype.HJ=function(a,b,d){b=this.wk[b];a=this.JF(a);a>=b.size&&b.resize(Math.max(g.O.truncate(1.25*a),16),
-1);b.write(a,d)};c.prototype.KF=function(a,b){a=this.JF(a);b=this.wk[b];return a<b.size?b.read(a):-1};c.prototype.aF=function(){null==this.wk&&(this.wk=[]);for(var a=0;a<this.wk.length;a++)if(null==this.wk[a])return this.wk[a]=g.Yc.Oh(0),a;this.wk.push(g.Yc.Oh(0));return this.wk.length-1};c.prototype.xW=function(a){this.wk[a]=null};c.prototype.Ob=function(a){return this.cd.T(a,3)};c.prototype.kv=function(a){return this.cd.T(a,4)};c.prototype.I=function(a){return this.cd.T(a,5)};c.prototype.da=function(a){return this.cd.T(a,
6)};c.prototype.Gp=function(a,b,d){for(var e=0,f=this.ld;-1!=f;f=this.ue(f)){var h=this.ic(f);if(g.aa.Hc(h)&&(!d||1736==h)){h=1736==this.ic(f);for(var k=this.Ob(f);-1!=k;){for(var m=0,n=this.Xa(k);m<g.O.truncate(this.Ja(k)/2);){var p=this.U(n);if(-1==p)break;var r=this.Ua(n),t=this.Sh(r);null!=t?r=t.Qb():(t=this.Ua(p),r=this.vb.yr(r,t));r<=a?(0==r?0==e&&(e=-1):e=1,p!=this.rj(k)&&(this.lC(p,n),this.pd(p,!0))):n=this.U(n);m++}m=this.Xa(k);for(n=this.dc(k)?m:this.rj(k);0<this.Ja(k);)if(p=this.Ma(n),
-1!=p){var x=this.Ua(p);t=this.Sh(x);null!=t?r=t.Qb():(r=this.Ua(n),r=this.vb.yr(r,x));if(r<=a)0==r?0==e&&(e=-1):e=1,this.lC(p,n),this.pd(p,!1),m==p&&(m=this.Xa(k));else if(n=this.Ma(n),n==m)break}else{this.pd(n,!0);0==e&&(e=-1);break}n=this.Ja(k);b&&(h?3>n:2>n)?(k=this.Zq(k),e=0<n?1:0==e?-1:e):k=this.Rb(k)}}}return e};c.prototype.lC=function(a,b){var d=this.Ua(a),e=this.Ua(b);null!=this.Sg&&(d=this.Sg.read(d),this.Sg.write(e,d));if(null!=this.bi)for(e=0,d=this.bi.length;e<d;e++)if(null!=this.bi[e]){var f=
this.Pa(a,e);-1!=f&&this.Ra(b,e,f)}};c.prototype.Ul=function(a,b,d){var e=0,f=this.U(a);if(-1==f)throw g.i.Qa();for(var h=this.Ua(a),k=this.Ua(f),m=this.Sh(h),n=null==m?this.vb.yr(h,k):m.Qb(),p=0;p<d;p++){var r=b[p];if(0<r&&1>r){var t=r;null!=m&&(t=0<n?m.Ux(r)/n:0);this.vb.kD(h,k,t,this.nm());var x=this.wj(this.bd(a),f,this.nm());e++;if(null!=m){var K=m.dl(0,r);t=this.Ua(this.Ma(x));this.Xg(t,K);this.mf(x,K.wc());if(p==d-1||1==b[p+1])r=m.dl(r,1),this.Xg(t,r)}}}return e};c.prototype.LX=function(a,
b,d){var e=0,f=this.U(a);if(-1==f)throw g.i.fa("internal error");var h=this.Ua(a),k=this.Ua(f),m=this.Sh(h),n=null==m?this.vb.yr(h,k):m.Qb(),p=0;a=this.bd(a);for(var r=0;r<d;r++){var t=b[r];if(p<t&&1>t){var x=t;null!=m&&(x=0<n?m.Ux(t)/n:0);this.vb.kD(h,k,x,this.nm());x=this.yS(a,f,this.nm());e++;if(null!=m){p=m.dl(p,t);var K=this.Ua(this.Ma(x));this.Xg(K,p);this.Cb(x,p.pa,p.la);if(r==d-1||1==b[r+1])p=m.dl(t,1),x=this.Ua(x),this.Xg(x,p)}}p=t}return e};c.prototype.yS=function(a,b,d){var e=-1!=b?this.Ma(b):
this.rj(a),f=-1!=e?this.U(e):-1,h=this.oI(null==d?this.fd:-1),k=this.Ua(h);null!=d&&this.vb.Ht(k,d);this.aj(h,a);this.Bc(h,f);this.Cc(h,e);-1!=f&&this.Cc(f,h);-1!=e&&this.Bc(e,h);d=this.dc(a);e=this.Xa(a);-1==b&&this.Wg(a,h);b==e&&(d&&-1!=e||this.Jf(a,h));d&&-1==f&&(this.Bc(h,h),this.Cc(h,h));this.Vj(a,this.Ja(a)+1);a=this.Qf(a);this.Tj(a,this.I(a)+1);return h};c.prototype.uE=function(a,b,d){var e=this.Ua(b),f=this.Ua(d);if(0>e||f>this.fd-1)throw g.i.N("invalid call");if(e>f&&!this.dc(a))throw g.i.N("cannot iterate across an open path");
for(a=0;b!=d;b=this.U(b))e=this.Ua(b),f=this.Sh(e),null!=f?a+=f.Qb():(f=this.Ua(this.U(b)),a+=this.vb.yr(e,f));return a};c.prototype.Dh=function(a,b){var d=this.Ua(a);this.vb.Ht(d,b);d=this.Sh(d);null!=d&&d.setStart(b);a=this.Ma(a);-1!=a&&(a=this.Ua(a),null!=this.Sh(a)&&d.setEnd(b))};c.prototype.Vi=function(a,b){a=this.Ua(a);this.vb.ve(a,b)};c.prototype.mf=function(a,b){this.Cb(a,b.x,b.y)};c.prototype.Cb=function(a,b,d){var e=this.Ua(a);this.vb.Cb(e,b,d);e=this.Sh(e);null!=e&&e.ZB(b,d);a=this.Ma(a);
-1!=a&&(a=this.Ua(a),null!=this.Sh(a)&&e.Ql(b,d))};c.prototype.D=function(a,b){this.vb.D(this.td.T(a,0),b)};c.prototype.Gc=function(a,b){this.vb.za[0].tc(2*this.td.T(a,0),b)};c.prototype.Na=function(a){var b=new g.h;this.vb.D(this.td.T(a,0),b);return b};c.prototype.dG=function(a,b){this.it.tc(2*a,b)};c.prototype.Uc=function(a,b,d){return this.vb.Uc(a,this.Ua(b),d)};c.prototype.setAttribute=function(a,b,d,e){this.vb.setAttribute(a,this.Ua(b),d,e)};c.prototype.Ua=function(a){return this.td.T(a,0)};
c.prototype.ih=function(){var a=new g.h;this.D(void 0,a);return a.y};c.prototype.fq=function(a,b){a=this.Ua(a);b=this.Ua(b);var d=this.vb.za[0].o;return d[2*a]===d[2*b]&&d[2*a+1]===d[2*b+1]};c.prototype.Dv=function(a,b){a=this.Ua(a);var d=this.vb.za[0].o;return d[2*a]===b.x&&d[2*a+1]===b.y};c.prototype.vX=function(a,b){1>b&&(b=1);if(null==this.Sg){if(1==b)return;this.Sg=g.Yc.Dn(this.vb.I(),1)}a=this.Ua(a);a>=this.Sg.size&&this.Sg.resize(a+1,1);this.Sg.write(a,b)};c.prototype.cG=function(a){a=this.Ua(a);
return null==this.Sg||a>=this.Sg.size?1:this.Sg.read(a)};c.prototype.Ra=function(a,b,d){b=this.bi[b];a=this.Ua(a);b.size<this.vb.I()&&b.resize(this.vb.I(),-1);b.write(a,d)};c.prototype.Pa=function(a,b){a=this.Ua(a);b=this.bi[b];return a<b.size?b.read(a):-1};c.prototype.Gd=function(){null==this.bi&&(this.bi=[]);for(var a=0;a<this.bi.length;a++)if(null==this.bi[a])return this.bi[a]=g.Yc.Oh(0,-1),a;this.bi.push(g.Yc.Oh(0,-1));return this.bi.length-1};c.prototype.Td=function(a){this.bi[a]=null};c.prototype.bc=
function(a){return null!=this.We?(a=this.Ua(a),this.We[a]):null};c.prototype.ed=function(a,b){var d=this.td.T(a,2);if(-1==d)return!1;if(this.fA){var e=new g.Sa;this.Vi(a,e);b.setStart(e);this.Vi(d,e);b.setEnd(e)}else this.vb.Gc(this.td.T(a,0),za),b.em(0,za),this.vb.Gc(this.td.T(d,0),za),b.em(1,za);return!0};c.prototype.mW=function(a,b,d){if(this.fA){var e=new g.Sa;this.Vi(a,e);d.setStart(e);this.Vi(b,e);d.setEnd(e)}else this.vb.Gc(a,za),d.em(0,za),this.vb.Gc(b,za),d.em(1,za)};c.prototype.vf=function(a,
b){if(-1!=b){if(a!=this.Qf(b))throw g.i.Qa();var d=this.cs(b)}else d=this.kv(a);var e=this.wU(a);-1!=b&&this.bp(b,e);this.ap(e,b);this.bp(e,d);-1!=d?this.ap(d,e):this.Zo(a,e);-1==b&&this.$o(a,e);this.Rl(a,this.da(a)+1);return e};c.prototype.nG=function(a,b,d,e){a=this.vf(a,-1);for(var f=0,h=b,k=!1;h==d&&(k=!0),this.aj(h,a),f++,h=this.U(h),h!=b;);this.kn(a,!0);this.Vj(a,f);k&&(b=d);this.Jf(a,b);this.Wg(a,this.Ma(b));this.cp(a,!1);null!=e&&(e[0]=k);return a};c.prototype.Zq=function(a){var b=this.cs(a),
d=this.Rb(a),e=this.Qf(a);-1!=b?this.ap(b,d):this.Zo(e,d);-1!=d?this.bp(d,b):this.$o(e,b);this.AO(a);this.Rl(e,this.da(e)-1);this.sF(a);return d};c.prototype.AO=function(a){var b=this.Xa(a);if(-1!=b){for(var d=0,e=this.Ja(a);d<e;d++){var f=b;b=this.U(b);this.Vy(f)}b=this.Qf(a);this.Tj(b,this.I(b)-this.Ja(a))}this.Vj(a,0)};c.prototype.Rb=function(a){return this.md.T(a,2)};c.prototype.cs=function(a){return this.md.T(a,1)};c.prototype.Ja=function(a){return this.md.T(a,3)};c.prototype.dc=function(a){return 0!=
(this.Sp(a)&1)};c.prototype.kn=function(a,b){if(this.dc(a)!=b){if(0<this.Ja(a)){var d=this.Xa(a),e=this.rj(a);b?(this.Bc(e,d),this.Cc(d,e),d=this.Ua(e)):(this.Bc(e,-1),this.Cc(d,-1),d=this.Ua(e));this.Xg(d,null)}this.VB(a,(this.Sp(a)|1)-1|(b?1:0))}};c.prototype.Qf=function(a){return this.md.T(a,7)};c.prototype.YS=function(a){return 0!=(this.Sp(a)&2)};c.prototype.PB=function(a,b){this.VB(a,(this.Sp(a)|2)-2|(b?2:0))};c.prototype.wz=function(a){if(this.cT(a))return this.Oi.get(this.qv(a));var b=new g.yb,
d=this.Xa(a);if(-1==d)return 0;var e=new g.h;this.D(d,e);for(var f=0,h=0,k=this.Ja(a);h<k;h++,d=this.U(d)){var m=this.bc(d);if(null==m){if(!this.ed(d,b))continue;m=b}f+=m.Tx(e.x,e.y)}this.cp(a,!0);this.Oi.set(this.qv(a),f);return f};c.prototype.gr=function(a,b,d){b=this.Ck[b];a=this.qv(a);b.size<this.Oi.size&&b.resize(this.Oi.size,-1);b.write(a,d)};c.prototype.sj=function(a,b){a=this.qv(a);b=this.Ck[b];return a<b.size?b.read(a):-1};c.prototype.Ky=function(){null==this.Ck&&(this.Ck=[]);for(var a=0;a<
this.Ck.length;a++)if(null==this.Ck[a])return this.Ck[a]=g.Yc.Oh(0),a;this.Ck.push(g.Yc.Oh(0));return this.Ck.length-1};c.prototype.CB=function(a){this.Ck[a]=null};c.prototype.ZT=function(a,b,d){if(-1==d)throw g.i.N();if(b!=d){var e=this.Rb(d),f=this.cs(d),h=this.Qf(d);-1==f?this.Zo(h,e):this.ap(f,e);-1==e?this.$o(h,f):this.bp(e,f);this.Tj(h,this.I(h)-this.Ja(d));this.Rl(h,this.da(h)-1);f=-1==b?this.kv(a):this.cs(b);this.bp(d,f);this.ap(d,b);-1==b?this.$o(a,d):this.bp(b,d);-1==f?this.Zo(a,d):this.ap(f,
d);this.Tj(a,this.I(a)+this.Ja(d));this.Rl(a,this.da(a)+1);this.gx(d,a)}};c.prototype.ij=function(a,b){this.vb.ve(this.Ua(b),this.nm());this.wj(a,-1,this.nm())};c.prototype.pd=function(a,b){var d=this.bd(a),e=this.Ma(a),f=this.U(a);-1!=e&&this.Bc(e,f);var h=this.Ja(d);a==this.Xa(d)&&this.Jf(d,1<h?f:-1);-1!=f&&this.Cc(f,e);a==this.rj(d)&&this.Wg(d,1<h?e:-1);if(-1!=e&&-1!=f){e=this.Ua(e);var k=this.Ua(f);b?(b=this.Sh(e),null!=b&&(e=new g.h,this.vb.D(k,e),b.Qc(e))):(k=this.Ua(a),b=this.Sh(k),this.Xg(e,
b),null!=b&&(e=this.vb.Na(e),b.Dc(e)))}this.Vj(d,h-1);d=this.Qf(d);this.Tj(d,this.I(d)-1);this.Vy(a);return f};c.prototype.Xa=function(a){return this.md.T(a,4)};c.prototype.rj=function(a){return this.md.T(a,5)};c.prototype.U=function(a){return this.td.T(a,2)};c.prototype.Ma=function(a){return this.td.T(a,1)};c.prototype.bd=function(a){return this.td.T(a,3)};c.prototype.fc=function(a,b){return this.wj(a,-1,b)};c.prototype.Yq=function(a){if(void 0===a)return this.Yq(!1);if(a instanceof N)return new N(a);
var b,d=-1,e=-1,f=-1,h=0,k=!1;for(b=this.ld;-1!=b;b=this.ue(b))if(!a||g.aa.Hc(this.ic(b))){for(d=this.Ob(b);-1!=d;d=this.Rb(d))if(f=e=this.Xa(d),h=0,-1!=e){k=!0;break}if(k)break}return N.AP(this,b,d,e,f,h,a)};c.prototype.Oc=function(a){this.Il.Oc(a);if(null!=this.We)for(var b=0,d=this.We.length;b<d;b++)null!=this.We[b]&&this.We[b].Oc(a)};c.prototype.jr=function(a,b,d,e){e?this.NX(a,b,d):this.MX(a,b,d)};c.prototype.Cc=function(a,b){this.td.S(a,1,b)};c.prototype.Bc=function(a,b){this.td.S(a,2,b)};c.prototype.aj=
function(a,b){this.td.S(a,3,b)};c.prototype.Vj=function(a,b){this.md.S(a,3,b)};c.prototype.Jf=function(a,b){this.md.S(a,4,b)};c.prototype.Wg=function(a,b){this.md.S(a,5,b)};c.prototype.Rl=function(a,b){this.cd.S(a,6,b)};c.prototype.Tj=function(a,b){this.cd.S(a,5,b)};c.prototype.pJ=function(a){var b=a;do{var d=this.U(b);this.Bc(b,this.Ma(b));this.Cc(b,d);b=d}while(b!=a)};c.prototype.bC=function(a){this.fd=a};c.prototype.$q=function(a){var b=this.cs(a),d=this.Rb(a),e=this.Qf(a);-1!=b?this.ap(b,d):this.Zo(e,
d);-1!=d?this.bp(d,b):this.$o(e,b);this.Jf(a,-1);this.Wg(a,-1);this.sF(a)};c.prototype.mi=function(a,b){var d=this.Ma(a),e=this.U(a);-1!=d&&this.Bc(d,e);-1!=e&&this.Cc(e,d);if(-1!=d&&-1!=e)if(d=this.Ua(d),e=this.Ua(e),b){if(b=this.Sh(d),null!=b){var f=new g.h;this.vb.D(e,f);b.Qc(f)}}else b=this.Ua(a),b=this.Sh(b),this.Xg(d,b),null!=b&&(f=new g.h,this.vb.D(d,f),b.Dc(f));this.Vy(a)};c.prototype.cT=function(a){return 0!=(this.Sp(a)&4)};c.prototype.cp=function(a,b){this.VB(a,(this.Sp(a)|4)-4|(b?4:0))};
c.prototype.nx=function(a,b){var d=this.td.o;this.vb.mc();var e=this.vb.za[0].o;a.Vd(0,b,function(f,h){var k=d[5*f];f=d[5*h];h=e[2*k];k=e[2*k+1];var m=e[2*f];f=e[2*f+1];return k<f?-1:k>f?1:h<m?-1:h>m?1:0})};c.prototype.jS=function(){for(var a=this.ld;-1!=a;a=this.ue(a))if(!g.aa.Hc(this.ic(a)))return!0;return!1};c.prototype.hC=function(a,b){for(var d=this.Ob(a),e=this.Ob(b),f=this.kv(a),h=this.kv(b),k=this.Ob(a);-1!=k;k=this.Rb(k))this.gx(k,b);for(k=this.Ob(b);-1!=k;k=this.Rb(k))this.gx(k,a);this.Zo(a,
e);this.Zo(b,d);this.$o(a,h);this.$o(b,f);d=this.I(a);e=this.da(a);f=this.da(b);this.Tj(a,this.I(b));this.Tj(b,d);this.Rl(a,f);this.Rl(b,e);d=this.cd.T(a,2);this.cd.S(a,2,this.cd.T(b,2));this.cd.S(b,2,d)};return c}();g.gd=l})(ja||={});(function(g){var N=function(l){function c(a,b,d,e){var f=l.call(this)||this;f.$=new g.l;void 0===a?f.UE():"number"===typeof a?f.VO(a,b,d,e):a instanceof g.Sa?void 0!==b?f.Qu(a,b,d):f.WO(a):a instanceof g.ra?void 0!==b?f.YO(a,b):f.XO(a):a instanceof g.l?f.UO(a):f.UE();
return f}qa(c,l);c.prototype.Qu=function(a,b,d){this.description=g.ee.og();this.$.Oa();a.B()||this.tu(a,b,d)};c.prototype.UO=function(a){this.description=g.ee.og();this.$.K(a);this.$.normalize()};c.prototype.XO=function(a){if(null==a)throw g.i.N();this.description=a;this.$.Oa()};c.prototype.YO=function(a,b){if(null==a)throw g.i.N();this.description=a;this.$.K(b);this.$.normalize()};c.prototype.UE=function(){this.description=g.ee.og();this.$.Oa()};c.prototype.WO=function(a){this.description=g.ee.og();
this.$.Oa();a.B()||this.tu(a)};c.prototype.VO=function(a,b,d,e){this.description=g.ee.og();this.K(a,b,d,e)};c.prototype.K=function(a,b,d,e){this.vc();if("number"===typeof a)this.$.K(a,b,d,e);else for(this.Oa(),b=0,d=a.length;b<d;b++)this.Zb(a[b])};c.prototype.Xo=function(a){this.vc();if(!a.fT())throw g.i.N();this.$.K(a)};c.prototype.Oa=function(){this.vc();this.$.Oa()};c.prototype.B=function(){return this.$.B()};c.prototype.R=function(){return this.$.R()};c.prototype.ca=function(){return this.$.ca()};
c.prototype.gk=function(){return this.$.gk()};c.prototype.Jp=function(){return this.$.Jp()};c.prototype.Ip=function(){return this.$.sf()};c.prototype.Zb=function(a){if(a instanceof g.h)this.vc(),this.$.Zb(a);else if(a instanceof g.l)this.vc(),this.$.Zb(a);else if(a instanceof g.Sa){if(this.vc(),!a.Ac()){var b=a.description;this.description!=b&&this.Jl(b);if(this.B())this.tu(a);else{this.$.Zb(a.D());for(var d=1,e=b.Aa;d<e;d++)for(var f=b.Ed(d),h=g.ra.Va(f),k=0;k<h;k++){var m=a.Uc(f,k),n=this.Tg(f,
k);n.Zb(m);this.setInterval(f,k,n)}}}}else if(a instanceof c&&!a.B())for(b=a.description,b!=this.description&&this.Jl(b),this.$.Zb(a.$),d=1,e=b.Aa;d<e;d++)for(f=b.kd(d),h=g.ra.Va(f),k=0;k<h;k++)m=a.Tg(f,k),n=this.Tg(f,k),n.Zb(m),this.setInterval(f,k,n)};c.prototype.tu=function(a,b,d){if(void 0!==b){this.$.K(a.D(),b,d);b=a.description;d=1;for(var e=b.Aa;d<e;d++)for(var f=b.Ed(d),h=g.ra.Va(f),k=0;k<h;k++){var m=a.Uc(f,k);this.setInterval(f,k,m,m)}}else for(this.$.K(a.ka[0],a.ka[1]),b=a.description,
d=1,e=b.Aa;d<e;d++)for(f=b.Ed(d),h=g.ra.Va(f),k=0;k<h;k++)m=a.Uc(f,k),this.setInterval(f,k,m,m)};c.prototype.setInterval=function(a,b,d,e){d="number"===typeof d?new g.Nc(d,e):d;this.vc();if(0==a)if(0==b)this.$.v=d.oa,this.$.C=d.va;else if(1==b)this.$.G=d.oa,this.$.H=d.va;else throw g.i.ce();else this.vD(0,a,b,d.oa),this.vD(1,a,b,d.va)};c.prototype.W=function(a,b){this.vc();this.$.W(a,b)};c.prototype.Oc=function(a){if(a instanceof g.Dd)this.vc(),a.mC(this.$);else if(this.vc(),!this.$.B()){var b=new g.OK;
this.Qo(b);b.XS()?b.Oa():a.mC(b)}};c.prototype.copyTo=function(a){if(a.getType()!=this.getType())throw g.i.N();a.vc();a.description=this.description;a.$.K(this.$);a.ka=null;if(null!=this.ka){a.ou();for(var b=0;b<2*(this.description.Ae.length-2);b++)a.ka[b]=this.ka[b]}};c.prototype.Ia=function(){return new c(this.description)};c.prototype.Ke=function(){return this.$.wF()};c.prototype.Qb=function(){return this.$.yR()};c.prototype.getType=function(){return 197};c.prototype.Db=function(){return 2};c.prototype.bn=
function(a){this.copyTo(a)};c.prototype.A=function(a){a.v=this.$.v;a.G=this.$.G;a.C=this.$.C;a.H=this.$.H};c.prototype.Qo=function(a){a.v=this.$.v;a.G=this.$.G;a.C=this.$.C;a.H=this.$.H;a.K(this.$.v,this.$.G,this.Od(0,1,0),this.$.C,this.$.H,this.Od(1,1,0))};c.prototype.Tg=function(a,b){var d=new g.Nc;d.K(this.Od(0,a,b),this.Od(1,a,b));return d};c.prototype.Hf=function(a,b){b.Nf(this.description);var d=this.description.Aa-1;switch(a){case 0:for(a=0;a<d;a++)for(var e=this.description.kd(a),f=g.ra.Va(e),
h=0;h<f;h++)b.setAttribute(e,h,this.Od(0,e,h));b.Cb(this.$.v,this.$.G);break;case 1:for(a=0;a<d;a++)for(e=this.description.kd(a),f=g.ra.Va(e),h=0;h<f;h++)b.setAttribute(e,h,this.Od(1,e,h));b.Cb(this.$.v,this.$.H);break;case 2:for(a=0;a<d;a++)for(e=this.description.kd(a),f=g.ra.Va(e),h=0;h<f;h++)b.setAttribute(e,h,this.Od(0,e,h));b.Cb(this.$.C,this.$.H);break;case 3:for(a=0;a<d;a++)for(e=this.description.kd(a),f=g.ra.Va(e),h=0;h<f;h++)b.setAttribute(e,h,this.Od(1,e,h));b.Cb(this.$.C,this.$.G);break;
default:throw g.i.ce();}};c.prototype.mB=function(a,b){a=this.$.mB(a);b.ma(a.x,a.y)};c.prototype.kR=function(a,b){return b*(a.Oq-2)};c.prototype.xF=function(a,b,d){if(this.$.B())throw g.i.fa("empty geometry");if(0==b)return 0!=a?0!=d?this.$.H:this.$.C:0!=d?this.$.G:this.$.v;if(d>=g.ra.Va(b))throw g.i.N();var e=this.description.Pf(b);this.ou();return 0<=e?this.ka[this.kR(this.description,a)+this.description.LR(e)-2+d]:g.ra.se(b)};c.prototype.ou=function(){this.vc();if(null==this.ka&&2<this.description.Ae.length){this.ka=
[];for(var a=c.Gg(this.description,0),b=c.Gg(this.description,1),d=0,e=1,f=this.description.Aa;e<f;e++){var h=this.description.kd(e),k=g.ra.Va(h);h=g.ra.se(h);for(var m=0;m<k;m++)this.ka[a+d]=h,this.ka[b+d]=h,d++}}};c.prototype.sn=function(a){if(null!=this.ka)if(2<a.Ae.length){for(var b=g.ee.Iw(a,this.description),d=[],e=c.Gg(this.description,0),f=c.Gg(this.description,1),h=c.Gg(a,0),k=c.Gg(a,1),m=0,n=1,p=a.Aa;n<p;n++){var r=a.kd(n),t=g.ra.Va(r);if(-1==b[n]){var x=g.ra.se(r);for(r=0;r<t;r++)d[h+m]=
x,d[k+m]=x,m++}else for(x=this.description.$j(b[n])-2,r=0;r<t;r++)d[h+m]=this.ka[e+x],d[k+m]=this.ka[f+x],m++,x++}this.ka=d}else this.ka=null;this.description=a};c.prototype.Od=function(a,b,d){if(this.$.B())throw g.i.fa("This operation was performed on an Empty Geometry.");if(0==b)return 0!=a?0!=d?this.$.H:this.$.C:0!=d?this.$.G:this.$.v;if(d>=g.ra.Va(b))throw g.i.ce();var e=this.description.Pf(b);return 0<=e?(this.ou(),this.ka[c.Gg(this.description,a)+this.description.$j(e)-2+d]):g.ra.se(b)};c.prototype.vD=
function(a,b,d,e){this.vc();if(0==b)0!=a?0!=d?this.$.H=e:this.$.C=e:0!=d?this.$.G=e:this.$.v=e;else{if(d>=g.ra.Va(b))throw g.i.ce();if(!this.hasAttribute(b)){if(g.ra.DG(b,e))return;this.re(b)}b=this.description.Pf(b);this.ou();this.ka[c.Gg(this.description,a)+this.description.$j(b)-2+d]=e}};c.Gg=function(a,b){return b*(a.Ae.length-2)};c.prototype.Ea=function(a){this.vc();var b=new g.l;a.A(b);return this.$.Ea(b)};c.prototype.isIntersecting=function(a){return a instanceof g.l?this.$.isIntersecting(a):
this.$.isIntersecting(a.$)};c.prototype.Ju=function(a,b){this.vc();a.B()?this.Oa():void 0!==b?this.tu(a,b):this.$.Ju(a.Lg(),a.ih())};c.prototype.offset=function(a,b){this.vc();this.$.offset(a,b)};c.prototype.normalize=function(){this.vc();this.$.normalize()};c.prototype.sf=function(a){if(void 0!==a)if(a.Nf(this.description),this.B())a.Oa();else{for(var b=this.description.Aa,d=1;d<b;d++)for(var e=this.description.kd(d),f=g.ra.Va(e),h=0;h<f;h++){var k=.5*(this.xF(0,e,h)+this.xF(1,e,h));a.setAttribute(e,
h,k)}a.Cb(this.$.sf())}else{a=new g.Sa(this.description);if(this.B())return a;b=this.description.Aa;for(d=1;d<b;d++)for(e=this.description.Ed(d),f=g.ra.Va(e),h=0;h<f;h++)k=.5*(this.Od(0,e,h)+this.Od(1,e,h)),a.setAttribute(e,h,k);a.Cb(this.$.gk(),this.$.Jp());return a}};c.prototype.mz=function(){return new g.Sa(this.$.mz())};c.prototype.contains=function(a){return a instanceof g.Sa?a.B()?!1:this.$.contains(a.Lg(),a.ih()):this.$.contains(a.$)};c.prototype.dP=function(a){return this.$.contains(a)};c.prototype.Nb=
function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;if(this.B())return a.B()?!0:!1;if(!this.$.Nb(a.$))return!1;for(var b=0,d=2*(this.description.Ae.length-2);b<d;b++)if(this.ka[b]!=a.ka[b])return!1;return!0};c.prototype.cc=function(){var a=this.description.cc();a=g.O.Th(a,this.$.cc());if(!this.B()&&null!=this.ka)for(var b=0,d=2*(this.description.Ae.length-2);b<d;b++)a=g.O.Th(a,this.ka[b]);return a};c.prototype.es=function(){return this.$.v};c.prototype.gs=
function(){return this.$.G};c.prototype.ds=function(){return this.$.C};c.prototype.fs=function(){return this.$.H};c.prototype.mg=function(){return g.pi.gm(this,null)};c.prototype.toString=function(){return this.B()?"Envelope: []":"Envelope: ["+this.$.v+", "+this.$.G+", "+this.$.C+", "+this.$.H+"]"};return c}(g.aa);g.Fh=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d){void 0===c?this.Oa():(this.v=c,this.G=a,this.C=b,this.H=d)}l.construct=function(c,a,b,d){var e=new l;e.v=c;e.G=a;e.C=
b;e.H=d;return e};l.prototype.K=function(c,a,b,d){"number"===typeof c?void 0!==b?(this.v=c,this.G=a,this.C=b,this.H=d,this.normalize()):(this.v=c,this.G=a,this.C=c,this.H=a):c instanceof g.h?void 0!==a?(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*b,this.H=this.G+b,this.normalize()):(this.v=c.x,this.G=c.y,this.C=c.x,this.H=c.y):c instanceof l?this.K(c.v,c.G,c.C,c.H):c instanceof g.Nc&&(c.B()||a.B()?this.Oa():(this.v=c.oa,this.C=c.va,this.G=a.oa,this.H=a.va))};l.prototype.Zw=function(c,a){if(void 0!==
a)if(0==a)this.Oa();else{this.v=c[0].x;this.G=c[0].y;this.C=this.v;this.H=this.G;for(var b=1;b<a;b++){var d=c[b];d.x<this.v?this.v=d.x:d.x>this.C&&(this.C=d.x);d.y<this.G?this.G=d.y:d.y>this.H&&(this.H=d.y)}}else if(null==c||0==c.length)this.Oa();else for(d=c[0],this.K(d.x,d.y),b=1;b<c.length;b++)a=c[b],this.Lk(a.x,a.y)};l.prototype.Oa=function(){this.H=this.C=this.G=this.v=NaN};l.prototype.B=function(){return isNaN(this.v)};l.prototype.Zb=function(c,a){"number"===typeof c?this.B()?(this.v=c,this.G=
a,this.C=c,this.H=a):(this.v>c?this.v=c:this.C<c&&(this.C=c),this.G>a?this.G=a:this.H<a&&(this.H=a)):c instanceof g.h?this.Zb(c.x,c.y):c instanceof g.Nd?this.Zb(c.x,c.y):c instanceof l&&!c.B()&&(this.Zb(c.v,c.G),this.Zb(c.C,c.H))};l.prototype.Lk=function(c,a){this.v>c?this.v=c:this.C<c&&(this.C=c);this.G>a?this.G=a:this.H<a&&(this.H=a)};l.prototype.W=function(c,a){this.B()||(this.v-=c,this.C+=c,this.G-=a,this.H+=a,(this.v>this.C||this.G>this.H)&&this.Oa())};l.prototype.scale=function(c){0>c&&this.Oa();
this.B()||(this.v*=c,this.C*=c,this.G*=c,this.H*=c)};l.prototype.zoom=function(c,a){this.B()||this.K(this.sf(),c*this.R(),a*this.ca())};l.prototype.isIntersecting=function(c){return!this.B()&&!c.B()&&(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)};l.prototype.HG=function(c){return(this.v<=c.v?this.C>=c.v:c.C>=this.v)&&(this.G<=c.G?this.H>=c.G:c.H>=this.G)};l.prototype.Ea=function(c){if(this.B()||c.B())return!1;c.v>this.v&&(this.v=c.v);c.C<this.C&&(this.C=c.C);c.G>this.G&&
(this.G=c.G);c.H<this.H&&(this.H=c.H);(c=this.v<=this.C&&this.G<=this.H)||this.Oa();return c};l.prototype.mB=function(c){switch(c){case 0:return g.h.construct(this.v,this.G);case 1:return g.h.construct(this.v,this.H);case 2:return g.h.construct(this.C,this.H);case 3:return g.h.construct(this.C,this.G);default:throw g.i.ce();}};l.prototype.nB=function(c){if(null==c||4>c.length)throw g.i.N();null!=c[0]?c[0].ma(this.v,this.G):c[0]=g.h.construct(this.v,this.G);null!=c[1]?c[1].ma(this.v,this.H):c[1]=g.h.construct(this.v,
this.H);null!=c[2]?c[2].ma(this.C,this.H):c[2]=g.h.construct(this.C,this.H);null!=c[3]?c[3].ma(this.C,this.G):c[3]=g.h.construct(this.C,this.G)};l.prototype.wF=function(){return this.B()?0:this.R()*this.ca()};l.prototype.yR=function(){return this.B()?0:2*(this.R()+this.ca())};l.prototype.gk=function(){return(this.C+this.v)/2};l.prototype.Jp=function(){return(this.H+this.G)/2};l.prototype.R=function(){return this.C-this.v};l.prototype.ca=function(){return this.H-this.G};l.prototype.move=function(c,
a){this.B()||(this.v+=c,this.G+=a,this.C+=c,this.H+=a)};l.prototype.Ju=function(c,a){if(void 0!==a)this.move(c-this.gk(),a-this.Jp());else if(c instanceof g.h)this.Ju(c.x,c.y);else if(c instanceof g.Sa){a=(this.C-this.v)/2;var b=(this.H-this.G)/2;this.v=c.Lg()-a;this.C=c.Lg()+a;this.G=c.ih()-b;this.H=c.ih()+b}else throw g.i.N();};l.prototype.offset=function(c,a){this.v+=c;this.C+=c;this.G+=a;this.H+=a};l.prototype.normalize=function(){if(!this.B()){var c=Math.min(this.v,this.C),a=Math.max(this.v,
this.C);this.v=c;this.C=a;c=Math.min(this.G,this.H);a=Math.max(this.G,this.H);this.G=c;this.H=a}};l.prototype.dn=function(c){c.ma(this.v,this.G)};l.prototype.$I=function(c){c.ma(this.C,this.G)};l.prototype.cJ=function(c){c.ma(this.v,this.H)};l.prototype.en=function(c){c.ma(this.C,this.H)};l.prototype.fT=function(){return this.B()||this.v<=this.C&&this.G<=this.H};l.prototype.sf=function(){return g.h.construct((this.C+this.v)/2,(this.H+this.G)/2)};l.prototype.mz=function(){return g.h.construct(this.v,
this.G)};l.prototype.contains=function(c,a){if(void 0!==a)return c>=this.v&&c<=this.C&&a>=this.G&&a<=this.H;if(c instanceof g.Sa)return this.contains(c.Lg(),c.ih());if(c instanceof g.h)return this.contains(c.x,c.y);if(c instanceof l)return c.v>=this.v&&c.C<=this.C&&c.G>=this.G&&c.H<=this.H;throw g.i.N();};l.prototype.hm=function(c,a){if(void 0!==a)return c>this.v&&c<this.C&&a>this.G&&a<this.H;if(c instanceof g.h)return this.hm(c.x,c.y);if(c instanceof l)return c.v>this.v&&c.C<this.C&&c.G>this.G&&
c.H<this.H;throw g.i.N();};l.prototype.Nb=function(c){return c==this?!0:c instanceof l?this.B()&&c.B()?!0:this.v!=c.v||this.G!=c.G||this.C!=c.C||this.H!=c.H?!1:!0:!1};l.prototype.cc=function(){var c=this.v;c=g.O.truncate(c^c>>>32);var a=g.O.Th(c);c=this.C;c=g.O.truncate(c^c>>>32);a=g.O.Th(c,a);c=this.G;c=g.O.truncate(c^c>>>32);a=g.O.Th(c,a);c=this.H;c=g.O.truncate(c^c>>>32);return a=g.O.Th(c,a)};l.prototype.xr=function(){return this.B()?2.220446049250313E-14:2.220446049250313E-14*(Math.abs(this.v)+
Math.abs(this.C)+Math.abs(this.G)+Math.abs(this.H)+1)};l.prototype.zy=function(c,a){var b=this.Zj(c),d=this.Zj(a);if(0!=(b&d))return 0;if(0==(b|d))return 4;var e=(0!=b?1:0)|(0!=d?2:0);do{var f=a.x-c.x,h=a.y-c.y;f>h?0!=(b&l.YC)?(0!=(b&l.ju)?(c.y+=h*(this.v-c.x)/f,c.x=this.v):(c.y+=h*(this.C-c.x)/f,c.x=this.C),b=this.Zj(c)):0!=(d&l.YC)?(0!=(d&l.ju)?(a.y+=h*(this.v-a.x)/f,a.x=this.v):(a.y+=h*(this.C-a.x)/f,a.x=this.C),d=this.Zj(a)):0!=b?(0!=(b&l.ku)?(c.x+=f*(this.G-c.y)/h,c.y=this.G):(c.x+=f*(this.H-
c.y)/h,c.y=this.H),b=this.Zj(c)):(0!=(d&l.ku)?(a.x+=f*(this.G-a.y)/h,a.y=this.G):(a.x+=f*(this.H-a.y)/h,a.y=this.H),d=this.Zj(a)):0!=(b&l.ZC)?(0!=(b&l.ku)?(c.x+=f*(this.G-c.y)/h,c.y=this.G):(c.x+=f*(this.H-c.y)/h,c.y=this.H),b=this.Zj(c)):0!=(d&l.ZC)?(0!=(d&l.ku)?(a.x+=f*(this.G-a.y)/h,a.y=this.G):(a.x+=f*(this.H-a.y)/h,a.y=this.H),d=this.Zj(a)):0!=b?(0!=(b&l.ju)?(c.y+=h*(this.v-c.x)/f,c.x=this.v):(c.y+=h*(this.C-c.x)/f,c.x=this.C),b=this.Zj(c)):(0!=(d&l.ju)?(a.y+=h*(this.v-a.x)/f,a.x=this.v):(a.y+=
h*(this.C-a.x)/f,a.x=this.C),d=this.Zj(a));if(0!=(b&d))return 0}while(0!=(b|d));return e};l.prototype.Zj=function(c){return(c.x<this.v?1:0)|(c.x>this.C?1:0)<<1|(c.y<this.G?1:0)<<2|(c.y>this.H?1:0)<<3};l.prototype.Bi=function(c){return!this.B()&&(this.R()<=c||this.ca()<=c)};l.prototype.tb=function(c){return c instanceof g.h?Math.sqrt(this.iK(c)):Math.sqrt(this.px(c))};l.prototype.px=function(c){var a=0,b=0,d=this.v-c.C;d>a&&(a=d);d=this.G-c.H;d>b&&(b=d);d=c.v-this.C;d>a&&(a=d);d=c.G-this.H;d>b&&(b=
d);return a*a+b*b};l.prototype.iK=function(c){var a=0,b=0,d=this.v-c.x;d>a&&(a=d);d=this.G-c.y;d>b&&(b=d);d=c.x-this.C;d>a&&(a=d);d=c.y-this.H;d>b&&(b=d);return a*a+b*b};l.prototype.cn=function(c){this.B()?c.Oa():c.K(this.v,this.C)};l.ju=1;l.ku=4;l.YC=3;l.ZC=12;return l}();g.l=N})(ja||={});(function(g){(function(c){c[c.initialize=0]="initialize";c[c.initializeRed=1]="initializeRed";c[c.initializeBlue=2]="initializeBlue";c[c.initializeRedBlue=3]="initializeRedBlue";c[c.sweep=4]="sweep";c[c.sweepBruteForce=
5]="sweepBruteForce";c[c.sweepRedBlueBruteForce=6]="sweepRedBlueBruteForce";c[c.sweepRedBlue=7]="sweepRedBlue";c[c.sweepRed=8]="sweepRed";c[c.sweepBlue=9]="sweepBlue";c[c.iterate=10]="iterate";c[c.iterateRed=11]="iterateRed";c[c.iterateBlue=12]="iterateBlue";c[c.iterateBruteForce=13]="iterateBruteForce";c[c.iterateRedBlueBruteForce=14]="iterateRedBlueBruteForce";c[c.resetRed=15]="resetRed";c[c.resetBlue=16]="resetBlue"})(l||={});var N=function(){function c(a,b){this.ci=a;this.dH=b}c.prototype.nr=
function(a,b,d){this.ci.JX(d,a,b,this.dH)};c.prototype.$p=function(a){return this.ci.Rr(a,this.dH)};return c}();var l=function(){function c(){this.ow=this.oo=this.ff=this.rd=null;this.wq=new g.l;this.Am=this.Hj=this.Ij=this.Ad=this.Ef=this.Ld=this.cw=this.fo=this.qd=this.Eb=null;this.Xb=-1;this.qa=0;this.Nk()}c.prototype.kr=function(){this.Nk();this.Pv=!0;null==this.Eb?(this.fo=new g.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)};c.prototype.ad=function(a,b){if(!this.Pv)throw g.i.Hb();var d=
new g.l;d.K(b);this.fo.add(a);this.Eb.push(d)};c.prototype.Fp=function(){if(!this.Pv)throw g.i.Hb();this.Pv=!1;null!=this.Eb&&0<this.Eb.length&&(this.Xb=0,this.Ic=!1)};c.prototype.pK=function(){this.Nk();this.Ov=!0;null==this.Eb?(this.fo=new g.ia(0),this.Eb=[]):(this.fo.Bh(0),this.Eb.length=0)};c.prototype.JD=function(a,b){if(!this.Ov)throw g.i.Hb();var d=new g.l;d.K(b);this.fo.add(a);this.Eb.push(d)};c.prototype.iF=function(){if(!this.Ov)throw g.i.Hb();this.Ov=!1;null!=this.Eb&&0<this.Eb.length&&
null!=this.qd&&0<this.qd.length&&(-1==this.Xb?this.Xb=3:2==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=1),this.Ic=!1)};c.prototype.oK=function(){this.Nk();this.Nv=!0;null==this.qd?(this.cw=new g.ia(0),this.qd=[]):(this.cw.Bh(0),this.qd.length=0)};c.prototype.ED=function(a,b){if(!this.Nv)throw g.i.Hb();var d=new g.l;d.K(b);this.cw.add(a);this.qd.push(d)};c.prototype.hF=function(){if(!this.Nv)throw g.i.Hb();this.Nv=!1;null!=this.Eb&&0<this.Eb.length&&null!=this.qd&&0<this.qd.length&&(-1==this.Xb?this.Xb=
3:1==this.Xb?this.Xb=3:3!=this.Xb&&(this.Xb=2),this.Ic=!1)};c.prototype.next=function(){if(this.Ic)return!1;for(var a=!0;a;)switch(this.Xb){case 0:a=this.Gz();break;case 1:a=this.rS();break;case 2:a=this.oS();break;case 3:a=this.qS();break;case 4:a=this.UX();break;case 5:a=this.QX();break;case 6:a=this.RX();break;case 7:a=this.SX();break;case 8:a=this.ux();break;case 9:a=this.iC();break;case 10:a=this.Uz();break;case 11:a=this.jT();break;case 12:a=this.gT();break;case 13:a=this.hT();break;case 14:a=
this.iT();break;case 15:a=this.kJ();break;case 16:a=this.jJ();break;default:throw g.i.Qa();}return this.Ic?!1:!0};c.prototype.aC=function(a){this.qa=a};c.prototype.uz=function(a){return this.Eb[a]};c.prototype.az=function(a){return this.qd[a]};c.prototype.nl=function(a){return this.fo.read(a)};c.prototype.hl=function(a){return this.cw.read(a)};c.Tz=function(a){return 1==(a&1)};c.eq=function(a){return 0==(a&1)};c.prototype.Nk=function(){this.Pv=this.Nv=this.Ov=!1;this.Cf=this.Df=this.Rg=this.pe=-1;
this.Ic=!0};c.prototype.Gz=function(){this.Af=this.Vf=-1;if(10>this.Eb.length)return this.pe=this.Eb.length,this.Xb=5,!0;null==this.rd&&(this.rd=new g.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new g.ia(0));this.rd.kr();for(var a=0;a<this.Eb.length;a++){var b=this.Eb[a];this.rd.Br(b.v,b.C)}this.rd.Fp();this.Ld.Jb(2*this.Eb.length);this.Ld.resize(0);for(a=0;a<2*this.Eb.length;a++)this.Ld.add(a);this.Kt(this.Ld,2*this.Eb.length,!0);this.pe=2*this.Eb.length;this.Xb=4;return!0};c.prototype.rS=function(){this.Af=
this.Vf=-1;if(10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;null==this.rd&&(this.rd=new g.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new g.ia(0));this.rd.kr();for(var a=0;a<this.Eb.length;a++){var b=this.Eb[a];this.rd.Br(b.v,b.C)}this.rd.Fp();this.Ld.Jb(2*this.Eb.length);this.Ld.resize(0);for(a=0;a<2*this.Eb.length;a++)this.Ld.add(a);this.Kt(this.Ld,this.Ld.size,!0);this.pe=this.Ld.size;-1!=this.Df&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1);this.Xb=7;return this.jJ()};
c.prototype.oS=function(){this.Af=this.Vf=-1;if(10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;null==this.ff&&(this.ff=new g.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new g.ia(0));this.ff.kr();for(var a=0;a<this.qd.length;a++){var b=this.qd[a];this.ff.Br(b.v,b.C)}this.ff.Fp();this.Ef.Jb(2*this.qd.length);this.Ef.resize(0);for(a=0;a<2*this.qd.length;a++)this.Ef.add(a);this.Kt(this.Ef,this.Ef.size,!1);this.Rg=this.Ef.size;-1!=this.Cf&&(this.Ad.bh(this.Cf),this.Hj.resize(0),
this.Cf=-1);this.Xb=7;return this.kJ()};c.prototype.qS=function(){this.Af=this.Vf=-1;if(10>this.Eb.length||10>this.qd.length)return this.pe=this.Eb.length,this.Xb=6,!0;null==this.rd&&(this.rd=new g.sr(!0),this.oo=this.rd.getIterator(),this.Ld=new g.ia(0));null==this.ff&&(this.ff=new g.sr(!0),this.ow=this.ff.getIterator(),this.Ef=new g.ia(0));this.rd.kr();for(var a=0;a<this.Eb.length;a++){var b=this.Eb[a];this.rd.Br(b.v,b.C)}this.rd.Fp();this.ff.kr();for(a=0;a<this.qd.length;a++)b=this.qd[a],this.ff.Br(b.v,
b.C);this.ff.Fp();this.Ld.Jb(2*this.Eb.length);this.Ef.Jb(2*this.qd.length);this.Ld.resize(0);this.Ef.resize(0);for(a=0;a<2*this.Eb.length;a++)this.Ld.add(a);for(a=0;a<2*this.qd.length;a++)this.Ef.add(a);this.Kt(this.Ld,this.Ld.size,!0);this.Kt(this.Ef,this.Ef.size,!1);this.pe=this.Ld.size;this.Rg=this.Ef.size;-1!=this.Df&&(this.Ad.bh(this.Df),this.Ij.resize(0),this.Df=-1);-1!=this.Cf&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1);this.Xb=7;return!0};c.prototype.UX=function(){var a=this.Ld.get(--this.pe),
b=a>>1;if(c.eq(a))return this.rd.remove(b),0==this.pe?(this.Af=this.Vf=-1,this.Ic=!0,!1):!0;this.oo.EB(this.Eb[b].v,this.Eb[b].C,this.qa);this.Vf=b;this.Xb=10;return!0};c.prototype.QX=function(){if(-1==--this.pe)return this.Af=this.Vf=-1,this.Ic=!0,!1;this.Rg=this.Vf=this.pe;this.Xb=13;return!0};c.prototype.RX=function(){if(-1==--this.pe)return this.Af=this.Vf=-1,this.Ic=!0,!1;this.Vf=this.pe;this.Rg=this.qd.length;this.Xb=14;return!0};c.prototype.SX=function(){var a=this.Ld.get(this.pe-1),b=this.Ef.get(this.Rg-
1),d=this.Rr(a,!0),e=this.Rr(b,!1);return d>e?this.ux():d<e?this.iC():c.Tz(a)?this.ux():c.Tz(b)?this.iC():this.ux()};c.prototype.ux=function(){var a=this.Ld.get(--this.pe),b=a>>1;if(c.eq(a))return-1!=this.Df&&-1!=this.Ij.get(b)?(this.Ad.jd(this.Df,this.Ij.get(b)),this.Ij.set(b,-1)):this.rd.remove(b),0==this.pe?(this.Af=this.Vf=-1,this.Ic=!0,!1):!0;if(-1!=this.Cf&&0<this.Ad.bs(this.Cf))for(a=this.Ad.rc(this.Cf);-1!=a;){var d=this.Ad.getData(a);this.ff.vj(d);this.Hj.set(d,-1);d=this.Ad.lb(a);this.Ad.jd(this.Cf,
a);a=d}0<this.ff.size()?(this.ow.EB(this.Eb[b].v,this.Eb[b].C,this.qa),this.Vf=b,this.Xb=12):(-1==this.Df&&(null==this.Ad&&(this.Ad=new g.jp),this.Ij=new g.ia(0),this.Ij.resize(this.Eb.length,-1),this.Ij.Wj(-1,0,this.Eb.length),this.Df=this.Ad.Ph(1)),this.Ij.set(b,this.Ad.addElement(this.Df,b)),this.Xb=7);return!0};c.prototype.iC=function(){var a=this.Ef.get(--this.Rg),b=a>>1;if(c.eq(a))return-1!=this.Cf&&-1!=this.Hj.get(b)?(this.Ad.jd(this.Cf,this.Hj.get(b)),this.Hj.set(b,-1)):this.ff.remove(b),
0==this.Rg?(this.Af=this.Vf=-1,this.Ic=!0,!1):!0;if(-1!=this.Df&&0<this.Ad.bs(this.Df))for(a=this.Ad.rc(this.Df);-1!=a;){var d=this.Ad.getData(a);this.rd.vj(d);this.Ij.set(d,-1);d=this.Ad.lb(a);this.Ad.jd(this.Df,a);a=d}0<this.rd.size()?(this.oo.EB(this.qd[b].v,this.qd[b].C,this.qa),this.Af=b,this.Xb=11):(-1==this.Cf&&(null==this.Ad&&(this.Ad=new g.jp),this.Hj=new g.ia(0),this.Hj.resize(this.qd.length,-1),this.Hj.Wj(-1,0,this.qd.length),this.Cf=this.Ad.Ph(0)),this.Hj.set(b,this.Ad.addElement(this.Cf,
b)),this.Xb=7);return!0};c.prototype.Uz=function(){this.Af=this.oo.next();if(-1!=this.Af)return!1;var a=this.Ld.get(this.pe)>>1;this.rd.vj(a);this.Xb=4;return!0};c.prototype.jT=function(){this.Vf=this.oo.next();if(-1!=this.Vf)return!1;this.Af=this.Vf=-1;var a=this.Ef.get(this.Rg)>>1;this.ff.vj(a);this.Xb=7;return!0};c.prototype.gT=function(){this.Af=this.ow.next();if(-1!=this.Af)return!1;var a=this.Ld.get(this.pe)>>1;this.rd.vj(a);this.Xb=7;return!0};c.prototype.hT=function(){if(-1==--this.Rg)return this.Xb=
5,!0;this.wq.K(this.Eb[this.pe]);var a=this.Eb[this.Rg];this.wq.W(this.qa,this.qa);return this.wq.isIntersecting(a)?(this.Af=this.Rg,!1):!0};c.prototype.iT=function(){if(-1==--this.Rg)return this.Xb=6,!0;this.wq.K(this.Eb[this.pe]);var a=this.qd[this.Rg];this.wq.W(this.qa,this.qa);return this.wq.isIntersecting(a)?(this.Af=this.Rg,!1):!0};c.prototype.kJ=function(){if(null==this.rd)return this.Ic=!0,!1;this.pe=this.Ld.size;0<this.rd.size()&&this.rd.reset();-1!=this.Df&&(this.Ad.bh(this.Df),this.Ij.resize(0),
this.Df=-1);this.Ic=!1;return!0};c.prototype.jJ=function(){if(null==this.ff)return this.Ic=!0,!1;this.Rg=this.Ef.size;0<this.ff.size()&&this.ff.reset();-1!=this.Cf&&(this.Ad.bh(this.Cf),this.Hj.resize(0),this.Cf=-1);this.Ic=!1;return!0};c.prototype.Kt=function(a,b,d){null==this.Am&&(this.Am=new g.Xt);d=new N(this,d);this.Am.sort(a,0,b,d)};c.prototype.JX=function(a,b,d,e){var f=this;a.Vd(b,d,function(h,k){var m=f.Rr(h,e),n=f.Rr(k,e);return m<n||m==n&&c.eq(h)&&c.Tz(k)?-1:1})};c.prototype.Rr=function(a,
b){var d=.5*this.qa;if(b)return b=this.Eb[a>>1],a=c.eq(a)?b.G-d:b.H+d;b=this.qd[a>>1];return a=c.eq(a)?b.G-d:b.H+d};return c}();g.xC=l})(ja||={});(function(g){var N=function(){function l(){}l.construct=function(c,a,b,d,e,f){var h=new l;h.v=c;h.G=a;h.Ye=b;h.C=d;h.H=e;h.Bg=f;return h};l.prototype.Oa=function(){this.Ye=this.v=NaN};l.prototype.B=function(){return isNaN(this.v)};l.prototype.XS=function(){return isNaN(this.Ye)};l.prototype.K=function(c,a,b,d,e,f){void 0!==d?"number"===typeof c?(this.v=
c,this.G=a,this.Ye=b,this.C=d,this.H=e,this.Bg=f):(this.v=c.x-.5*a,this.C=this.v+a,this.G=c.y-.5*b,this.H=this.G+b,this.Ye=c.z-.5*d,this.Bg=this.Ye+d):(this.v=c,this.G=a,this.Ye=b,this.C=c,this.H=a,this.Bg=b)};l.prototype.move=function(c){this.v+=c.x;this.G+=c.y;this.Ye+=c.z;this.C+=c.x;this.H+=c.y;this.Bg+=c.z};l.prototype.copyTo=function(c){c.v=this.v;c.G=this.G;c.C=this.C;c.H=this.H};l.prototype.Lk=function(c,a,b){this.v>c?this.v=c:this.C<c&&(this.C=c);this.G>a?this.G=a:this.H<a&&(this.H=a);0==
isNaN(this.Ye)?this.Ye>b?this.Ye=b:this.Bg<b&&(this.Bg=b):this.Bg=this.Ye=b};l.prototype.Zb=function(c,a,b){if("number"===typeof c)this.B()?(this.v=c,this.G=a,this.Ye=b,this.C=c,this.H=a,this.Bg=b):this.Lk(c,a,b);else if(c instanceof g.Nd)this.Zb(c.x,c.y,c.z);else if(c instanceof l)c.B()||(this.Zb(c.v,c.G,c.Ye),this.Zb(c.C,c.H,c.Bg));else throw g.i.N();};l.prototype.construct=function(c,a,b){c.B()||a.B()?this.Oa():(this.v=c.oa,this.C=c.va,this.G=a.oa,this.H=a.va,this.Ye=b.oa,this.Bg=b.va)};l.prototype.nB=
function(c){if(null==c||8>c.length)throw g.i.N();c[0]=new g.Nd(this.v,this.G,this.Ye);c[1]=new g.Nd(this.v,this.H,this.Ye);c[2]=new g.Nd(this.C,this.H,this.Ye);c[3]=new g.Nd(this.C,this.G,this.Ye);c[4]=new g.Nd(this.v,this.G,this.Bg);c[5]=new g.Nd(this.v,this.H,this.Bg);c[6]=new g.Nd(this.C,this.H,this.Bg);c[7]=new g.Nd(this.C,this.G,this.Bg)};l.prototype.Zw=function(c){if(null==c||0==c.length)this.Oa();else{var a=c[0];this.K(a.x,a.y,a.z);for(a=1;a<c.length;a++){var b=c[a];this.Lk(b.x,b.y,b.z)}}};
return l}();g.OK=N})(ja||={});(function(g){(function(N){N.Qa=function(){var l=Error();l.message="Internal Error";return l};N.Ie=function(){var l=Error();l.message="Not Implemented";return l};N.Xk=function(){var l=Error();l.message="The input unit and the spatial reference unit are not of the same unit type.ie Linear vs.Angular";return l};N.Hb=function(){var l=Error();l.message="Invalid Call";return l};N.N=function(l){var c=Error();c.message="Illegal Argument Exception";void 0!==l&&(c.message+=": "+
l);return c};N.fu=function(l){var c=Error();c.message=void 0!==l?"Runtime Exception: "+l:"Runtime Exception.";return c};N.fa=function(l){var c=Error();c.message="Geometry Exception: "+l;return c};N.GK=function(){var l=Error();l.message="Assert Failed Exception";return l};N.ce=function(){var l=Error();l.message="IndexOutOfBoundsException";return l};N.WC=function(){var l=Error();l.message="UserCancelException";return l}})(g.i||(g.i={}))})(ja||={});(function(g){g=g.bm||(g.bm={});g[g.forward=0]="forward";
g[g.reverse=1]="reverse"})(ja||={});(function(g){var N=function(){function a(b,d){this.Wa=b;this.FH=d;this.LH=-1;this.sl=!1}a.prototype.qe=function(){};a.prototype.next=function(){if(++this.LH==this.FH.I())return null;var b=this.FH.Na(this.LH);b.scale(this.Wa.ec);var d=new g.Da;this.Wa.sy(b,this.sl,d);return d};a.prototype.La=function(){return 0};return a}(),l=function(){function a(b,d,e){this.Wa=b;this.rw=d;this.Xn=!1;this.co=e;this.bw=[0];this.sk=[0];this.Nj=[0];this.Gs=[0];this.sl=!1;this.qq=new g.Da;
this.uk=[]}a.prototype.qe=function(){};a.prototype.next=function(){if(this.Xn){this.Xn=!1;this.sd.ha();var b=g.aa.jg(this.qq);return b=g.Fg.Mk(b,this.Wa.Aq,!0,!0,this.Wa.Ub)}null==this.sd&&(this.sd=this.rw.Ga(),this.sd.$a(),null!=this.co&&this.co.Yk(null,0));if(!this.sd.Ha()){if(!this.sd.$a())return null;null!=this.co&&this.co.Yk(null,0)}b=null;this.sk[0]=0;this.FA=this.bw[0]=0;this.di=NaN;this.Xn=!1;for(var d=this.uk.length=0,e=new g.h,f=new g.h,h=[0];this.sd.Ha()&&8>this.FA;){var k=this.sd.ha();
e.L(k.ac());f.L(k.wc());e.scale(this.Wa.ec);f.scale(this.Wa.ec);g.cj.Mu(e,f)?e.x=f.x:g.cj.Ku(e,f)&&(f.x=e.x);this.uk.length=0;g.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,e,f,this.Wa.QA,this.Wa.Zs,h,this.Nj,this.Gs,this.uk,this.bw);null!=this.co&&(k=this.uk.slice(0),this.co.qG(this.co.da()-1,k,k.length-1));g.cj.Lu(e,f)?(this.qq.Oa(),this.Wa.sy(e,this.sl,this.qq),this.Xn=!0):(this.qq.Oa(),this.Xn=this.xy(h[0],this.qq));if(this.Xn){this.sd.li();if(this.sd.Ez()){this.sd.li();this.sd.ha();break}this.sd.DW();
break}null==b&&(b=new g.Da,b.Yk(null,0));this.OD(b);d++}this.bw[0]=0;if(0<d){for(h=this.sd.wb();0<d;)this.sd.li(),e.L(this.rw.Na(this.sd.wb())),f.L(this.rw.Na(this.sd.ik())),e.scale(this.Wa.ec),f.scale(this.Wa.ec),this.sl&&(g.cj.Mu(e,f)?e.x=f.x:g.cj.Ku(e,f)&&(f.x=e.x)),this.uk.length=0,g.cj.tF(this.Wa.Tb,this.Wa.kc,this.Wa.ze,f,e,this.Wa.QA,this.Wa.Zs,null,this.Nj,this.Gs,this.uk,this.bw),this.OD(b),d--;e.L(this.rw.Na(this.sd.wb()));e.scale(this.Wa.ec);c.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,
e,this.di+1.570796326794897,this.di+4.71238898038469,this.Wa.ao,this.sl,this.sk,b,NaN,NaN);this.sd.Vb(h);this.sd.ha();d=g.ta.kj(null,b,!0);return b=g.Fg.Mk(b,d,!0,!0,this.Wa.Ub)}this.Xn=!1;this.sd.ha();b=g.aa.jg(this.qq);return b=g.Fg.Mk(b,this.Wa.Aq,!0,!0,this.Wa.Ub)};a.prototype.OD=function(b){var d=this.uk[0],e=this.Nj[0]-1.570796326794897,f=this.Gs[0]+1.570796326794897;if(!isNaN(this.di)){if(this.di>=this.Nj[0]){var h=this.di+1.570796326794897;e=h+3.141592653589793-(this.di-this.Nj[0])}else h=
this.di+1.570796326794897,e=h+3.141592653589793-(6.283185307179586-(this.Nj[0]-this.di));var k=this.di>=this.Nj[0]&&3.141592653589793>=this.di-this.Nj[0]?!1:this.di<this.Nj[0]&&3.141592653589793<=this.Nj[0]-this.di?!1:!0,m=!1;if(Math.abs(e-h)<=.5*this.Wa.ao)if(k){var n=b.Na(b.I()-2);n.scale(this.Wa.ec);var p=new g.ga(0);g.kb.Xy(this.Wa.Tb,this.Wa.kc,d.x,d.y,n.x,n.y,p);for(n=p.u;n<=h;)n+=6.283185307179586;for(;n>h;)n-=6.283185307179586;n<e&&(m=!0)}else m=!0;m?(b.DB(0,b.I()-1),this.sl||(d=new g.h,d.L(b.Na(b.I()-
1)),d.scale(this.Wa.ec),-3.141592653589793>d.x-this.sk[0]?this.sk[0]-=6.283185307179586:3.141592653589793<d.x-this.sk[0]&&(this.sk[0]+=6.283185307179586)),k||(e=.5*(e+h))):(k?(h=new g.h,h.L(d),h.scale(1/this.Wa.ec),b.wf(0,-1,h)):c.Hr(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.uk[0],h,e,this.Wa.ao,this.sl,this.sk,b,NaN,NaN),this.FA+=1)}c.qy(this.Wa.Tb,this.Wa.kc,this.Wa.ec,this.Wa.rb,this.Wa.ze,this.uk,e,f,this.sl,this.sk,b);this.di=this.Gs[0]};a.prototype.xy=function(b,d){return this.Wa.xy(this.uk,
b,this.Nj[0],this.Gs[0],this.sl,d)};a.prototype.La=function(){return 0};return a}(),c=function(){function a(){}a.buffer=function(b,d,e,f,h,k){if(null==b)throw g.i.N("Geometry::Geodesic_bufferer::buffer");if(b.B())return new g.Da(b.description);var m=new a;m.Qg=d;m.Jc=g.cb.sc(d);var n=g.cb.vv(m.Jc);m.Ub=k;m.Tb=g.cb.ev(m.Jc);m.kc=n*(2-n);m.ec=m.Jc.Hd().ai;m.qa=m.Qg.Kn();m.Aq=m.Jc.Kn();m.Zs=m.Aq*m.ec;m.zq=1.570796326794897/m.ec;m.OY=3.141592653589793/m.ec;m.Js=6.283185307179586/m.ec;m.PY=m.Js/6;m.LA=
0;m.NY=1.5707963267948966*m.Tb/m.LA;4==e?(m.ze=2,m.Wv=!0):(m.ze=e,m.Wv=!1);m.Ka=f;m.rb=Math.abs(f);isNaN(h)||.001>h?m.xX():m.$n=h;e=b.getType();g.aa.yd(e)?(e=new g.Ta(b.description),e.oc(b,!0),b=e,e=1607):197==e&&(e=new g.l,b.A(e),e.R()<=m.qa||e.ca()<=m.qa?(e=new g.Ta(b.description),e.ad(b,!1),b=e,e=1607):(e=new g.Da(b.description),e.ad(b,!1),b=e,e=1736));m.yX();g.aa.Rn(e)||m.zX();if(m.rb<=.5*m.$n)return 1736!=e?new g.Da(b.description):m.Wv?b:g.cj.Qr(b,m.Qg,m.ze,m.QA,-1,k);if(0>m.Ka&&1736!=e)return new g.Da(b.description);
m.Wv&&g.aa.Hc(e)?(d=g.cj.Qr(b,d,4,NaN,m.$n,k),b=g.cb.zh(d,m.Qg,m.Jc)):b=g.cb.zh(b,m.Qg,m.Jc);b=g.Hh.lj(b,m.Jc);if(b.B())return new g.Da(b.description);!m.Wv&&g.aa.Hc(e)&&(b=g.cj.pI(m.ec,b));b=a.KX(b,m.Jc);switch(e){case 1736:d=m.UN(b);break;case 1607:d=m.VN(b);break;case 550:d=m.SN(b);break;case 33:d=m.TN(b);break;default:throw g.i.fa("corrupted_geometry");}m=g.cb.zh(d,m.Jc,m.Qg);m.Jl(b.description);return m};a.prototype.UN=function(b){var d=new g.Da;b=new l(this,b,d);b=g.Gh.local().V(b,this.Jc,this.Ub).next();
b=g.ip.nj(b,this.Jc,2);var e=new g.Dd;e.scale(1/this.ec,1/this.ec);d.Oc(e);d=g.ip.nj(d,this.Jc,2);return 0<=this.Ka?g.Gh.local().V(d,b,this.Jc,this.Ub):g.kp.local().V(d,b,this.Jc,this.Ub)};a.prototype.VN=function(b){b=new l(this,b,null);b=g.Gh.local().V(b,this.Jc,this.Ub).next();return b=g.ip.nj(b,this.Jc,2)};a.prototype.SN=function(b){b=new N(this,b);b=g.Gh.local().V(b,this.Jc,this.Ub).next();return b=g.ip.nj(b,this.Jc,2)};a.prototype.TN=function(b){b=b.D();b.scale(this.ec);var d=new g.Da;this.sy(b,
!1,d);return d=g.ip.nj(d,this.Jc,2)};a.prototype.xy=function(b,d,e,f,h,k){var m=b[0],n=b[b.length-1],p=m.y>n.y?m.y:n.y,r=g.F.q(this.Tb,this.kc,m.y<n.y?m.y:n.y);p=g.F.q(this.Tb,this.kc,p);if(.001<this.LA-(r+d+this.rb)&&.001<this.LA+(p-d-this.rb))return!1;d=e-1.570796326794897;e=f+1.570796326794897;r=d-3.141592653589793;p=d+3.141592653589793;var t=e+3.141592653589793,x=[NaN],K=[NaN],ca=[NaN],ha=[NaN];f=!1;a.dJ(this.Tb,this.kc,this.rb,m,d,r,n,e,x,K);a.dJ(this.Tb,this.kc,this.rb,n,t,e,m,r,ca,ha);e<x[0]&&
x[0]<t?f=!0:e<K[0]&&K[0]<t&&(f=!0);f||(r<ca[0]&&ca[0]<d?f=!0:r<ha[0]&&ha[0]<d&&(f=!0));if(!f&&h)return!1;for(var da=[],ka=b.length-1;0<=ka;ka--)da.push(b[ka]);k.Oa();k.Yk(null,0);ka=[0];a.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,b,d,e,h,ka,k);a.Hr(this.Tb,this.kc,this.ec,this.rb,n,e,t,this.ao,h,ka,k,x[0],K[0]);a.qy(this.Tb,this.kc,this.ec,this.rb,this.ze,da,t,p,h,ka,k);a.Hr(this.Tb,this.kc,this.ec,this.rb,m,r,d,this.ao,h,ka,k,ca[0],ha[0]);b=!1;h||(b=this.IE(this.ec,k));return f||b};a.prototype.sy=
function(b,d,e){e.Oa();e.Yk(null,0);a.Hr(this.Tb,this.kc,this.ec,this.rb,b,-this.ao,6.283185307179586,this.ao,d,[0],e,NaN,NaN);d||this.IE(this.ec,e)};a.prototype.IE=function(b,d){var e=this.vO(b,d);b=this.wO(b,d);return e||b};a.prototype.vO=function(b,d){var e=d.I(),f=!1,h=new g.l;d.A(h);if(!g.s.Y(h.H*b,1.570796326794897)&&!g.s.Y(h.G*b,-1.570796326794897))return!1;var k=new g.h;for(--e;0<=e;e--)d.D(e,k),k.y==h.H&&g.s.Y(k.y*b,1.570796326794897)?(f=!0,this.OI(k,e,d)):k.y==h.G&&g.s.Y(k.y*b,-1.570796326794897)&&
(f=!0,this.OI(k,e,d));return f};a.prototype.wO=function(b,d){var e=d.Na(0),f=d.Na(d.I()-1);return 3.141592653589793<Math.abs(e.x-f.x)*b?(this.VV(d),!0):this.uO(d)};a.prototype.uO=function(b){return 0>b.Ke()?(this.UV(b),!0):!1};a.prototype.OI=function(b,d,e){var f=e.I(),h=0<d?d-1:f-1;f=e.Na(d<f-1?d+1:0);h=e.Na(h);if(!g.s.Y(f.y,b.y)&&!g.s.Y(f.x,b.x)){var k=new g.h;k.ma(f.x,b.y);e.Cb(d,k)}g.s.Y(h.y,b.y)||g.s.Y(h.x,b.x)||(f=new g.h,f.ma(h.x,b.y),e.wf(0,d,f))};a.prototype.VV=function(b){var d=new g.Da,
e=new g.Da,f=new g.Dd,h=b.Na(0),k=b.Na(b.I()-1),m=new g.h;h.x>k.x?(k=this.zq,f.gg(-this.Js,0)):(k=-this.zq,f.gg(this.Js,0));d.add(b,!1);b.Oa();e.add(d,!1);e.Oc(f);h=new g.l;e.A(h);h.W((this.Js-h.R())/2,0);h.G=-this.zq;h.H=this.zq;for(var n=0;n<e.I();n++)e.D(n,m),d.wf(0,-1,m);e.Oc(f);for(n=0;n<e.I();n++)e.D(n,m),d.wf(0,-1,m);e=d.Na(0);f=d.Na(d.I()-1);m.ma(f.x,k);d.wf(0,-1,m);m.ma(.5*(f.x+e.x),k);d.wf(0,-1,m);m.ma(e.x,k);d.wf(0,-1,m);d=g.Hh.ks(d,this.Jc,2,!0,h.v);d=g.Hh.ks(d,this.Jc,2,!0,h.C);d=g.Ud.clip(d,
h,this.Aq,NaN);b.add(d,!1)};a.prototype.UV=function(b){var d=new g.l;b.A(d);d.W((this.Js-d.R())/2,0);d.G=-this.zq;d.H=this.zq;b.Yk(null,0);var e=new g.h;e.ma(d.v,d.G);b.wf(1,-1,e);e.ma(d.v,d.H);b.wf(1,-1,e);e.ma(.5*(d.v+d.C),d.H);b.wf(1,-1,e);e.ma(d.C,d.H);b.wf(1,-1,e);e.ma(d.C,d.G);b.wf(1,-1,e);e.ma(.5*(d.v+d.C),d.G);b.wf(1,-1,e)};a.qy=function(b,d,e,f,h,k,m,n,p,r,t){var x=null;p||(x=new g.h,x.Rc(),0<t.I()&&(x.L(t.Na(t.I()-1)),x.scale(e)));var K=new g.ga(0),ca=new g.ga(0),ha=new g.ga(0),da=new g.h,
ka=new g.h,ta=k[k.length-1];e=1/e;for(var ua=0;ua<k.length;ua++){var wa=k[ua];if(0==ua)var Ea=m;else ua==k.length-1?Ea=n:(g.kb.wd(b,d,ta.x,ta.y,wa.x,wa.y,null,null,K,h),Ea=K.u-1.570796326794897);g.kb.yi(b,d,wa.x,wa.y,f,Ea,ca,ha);p?ka.ma(ca.u,ha.u):(da.ma(ca.u,ha.u),a.gJ(wa.x,da.x,x.x,r),ka.ma(r[0]+da.x,da.y),x.L(ka));ka.scale(e);t.wf(0,-1,ka)}};a.Hr=function(b,d,e,f,h,k,m,n,p,r,t,x,K){if(!(m-k<n)){var ca=new g.ga(0),ha=new g.ga(0),da=new g.h,ka=new g.h,ta=null;p||(ta=new g.h,ta.Rc(),0<t.I()&&(ta.L(t.Na(t.I()-
1)),ta.scale(e)));var ua=g.O.truncate(Math.ceil(k/n)),wa=ua++*n;wa==k&&(wa=ua++*n);for(e=1/e;wa<m+n;){k<x&&x<wa?(wa=x,ua--):k<K&&K<wa&&(wa=K,ua--);if(wa>=m)break;g.kb.yi(b,d,h.x,h.y,f,wa,ca,ha);p?ka.ma(ca.u,ha.u):(da.ma(ca.u,ha.u),a.gJ(h.x,da.x,ta.x,r),ka.ma(r[0]+da.x,da.y),ta.L(ka));ka.scale(e);t.wf(0,-1,ka);k=wa;wa=ua++*n}}};a.dJ=function(b,d,e,f,h,k,m,n,p,r){var t=new g.h,x=new g.h,K=new g.ga(0),ca=new g.ga(0);g.kb.yi(b,d,f.x,f.y,e,h,K,ca);t.ma(K.u,ca.u);g.kb.yi(b,d,f.x,f.y,e,k,K,ca);x.ma(K.u,
ca.u);e=new g.ga(0);g.kb.Xy(b,d,m.x,m.y,t.x,t.y,e);p[0]=e.u;g.kb.Xy(b,d,m.x,m.y,x.x,x.y,e);for(r[0]=e.u;p[0]<=r[0];)p[0]+=6.283185307179586;for(;p[0]>r[0];)p[0]-=6.283185307179586;for(;p[0]>=n;)p[0]-=6.283185307179586,r[0]-=6.283185307179586;for(;p[0]<n;)p[0]+=6.283185307179586,r[0]+=6.283185307179586};a.gJ=function(b,d,e,f){if(isNaN(e)){for(;3.141592653589793<f[0]+d-b;)f[0]-=6.283185307179586;for(;3.141592653589793<b-(f[0]+d);)f[0]+=6.283185307179586}else 3.141592653589793<f[0]+d-e?f[0]-=6.283185307179586:
3.141592653589793<e-(f[0]+d)&&(f[0]+=6.283185307179586)};a.KX=function(b,d){var e=b.getType(),f=g.aa.Hc(e)?b.da():550==e?b.I():1;if(1==f)return b;var h=new g.ia(0);h.resize(f);for(var k=[],m=new g.l,n=0;n<f;n++){h.write(n,n);if(g.aa.Hc(e)){b.Rj(n,m);var p=m.sf()}else p=b.Na(n);p=g.XK.$X(d,p);k[n]=p}h.Vd(0,h.size,function(r,t){return k[r]<k[t]?-1:k[r]>k[t]?1:0});d=b.Ia();for(n=0;n<f;n++)m=h.read(n),g.aa.Hc(e)?d.addPath(b,m,!0):d.Fd(b,m,m+1);return d};a.prototype.yX=function(){var b=Math.min(3.141592653589793*
this.Tb-this.rb,this.rb);b=Math.min(b,.39269908169872414*this.Tb);var d=new g.h;d.ma(0,10*this.ec);var e=45*this.ec,f=new g.ga(0),h=new g.ga(0),k=new g.ga(0),m=new g.ga(0),n=new g.ga(0),p=new g.ga(0),r=new g.ga(0),t=new g.ga(0),x=new g.h,K=new g.h,ca=new g.h,ha=new g.h;g.kb.yi(this.Tb,this.kc,d.x,d.y,b,0,f,h);x.ma(f.u,h.u);g.kb.yi(this.Tb,this.kc,d.x,d.y,b,e,k,m);K.ma(k.u,m.u);f=new g.ga(0);h=new g.ga(0);for(var da=new g.ga(0);;){g.kb.yi(this.Tb,this.kc,d.x,d.y,b,.5*(0+e),n,p);ca.ma(n.u,p.u);g.kb.wd(this.Tb,
this.kc,x.x,x.y,K.x,K.y,f,h,null,2);g.kb.oj(this.Tb,this.kc,x.x,x.y,.5*f.u,h.u,r,t,2);ha.ma(r.u,t.u);g.kb.wd(this.Tb,this.kc,ca.x,ca.y,ha.x,ha.y,da,null,null,2);if(da.u<=this.$n)break;e*=.9;g.kb.yi(this.Tb,this.kc,d.x,d.y,b,e,k,m);K.ma(k.u,m.u)}this.ao=6.283185307179586/Math.ceil(6.283185307179586/(e-0))};a.prototype.zX=function(){var b=Math.min(3.141592653589793*this.Tb-this.rb,this.rb);b=Math.min(b,.39269908169872414*this.Tb);var d=new g.h,e=new g.h;d.ma(0,10*this.ec);e.ma(10*this.ec,10*this.ec);
var f=new g.ga(0),h=new g.ga(0),k=new g.ga(0);g.kb.wd(this.Tb,this.kc,d.x,d.y,e.x,e.y,k,f,h,this.ze);var m=new g.ga(0),n=new g.ga(0),p=new g.ga(0),r=new g.ga(0),t=new g.h,x=new g.ga(0),K=new g.ga(0),ca=new g.ga(0),ha=new g.ga(0),da=new g.ga(0),ka=new g.ga(0),ta=new g.ga(0),ua=new g.ga(0),wa=new g.ga(0),Ea=new g.h,Ga=new g.h,Na=new g.h,La=new g.h,Ta=1;f=f.u;h=h.u+1.570796326794897;k=k.u;g.kb.yi(this.Tb,this.kc,d.x,d.y,b,f-1.570796326794897,K,ca);Ea.ma(K.u,ca.u);g.kb.yi(this.Tb,this.kc,e.x,e.y,b,h,
ha,da);Ga.ma(ha.u,da.u);K=new g.ga(0);ca=new g.ga(0);h=new g.ga(0);for(var Ra=new g.ga(0);;){g.kb.oj(this.Tb,this.kc,d.x,d.y,.5*(0+Ta)*k,f,m,n,this.ze);t.ma(m.u,n.u);g.kb.wd(this.Tb,this.kc,d.x,d.y,t.x,t.y,null,null,x,this.ze);g.kb.yi(this.Tb,this.kc,t.x,t.y,b,x.u+1.570796326794897,ka,ta);Na.ma(ka.u,ta.u);g.kb.wd(this.Tb,this.kc,Ea.x,Ea.y,Ga.x,Ga.y,K,ca,null,2);g.kb.oj(this.Tb,this.kc,Ea.x,Ea.y,.5*K.u,ca.u,ua,wa,2);La.ma(ua.u,wa.u);g.kb.wd(this.Tb,this.kc,Na.x,Na.y,La.x,La.y,h,null,null,2);if(h.u<=
this.$n)break;Ta*=.9;g.kb.oj(this.Tb,this.kc,d.x,d.y,Ta*k,f,p,r,this.ze);e.ma(p.u,r.u);g.kb.wd(this.Tb,this.kc,d.x,d.y,e.x,e.y,null,null,Ra,this.ze);g.kb.yi(this.Tb,this.kc,e.x,e.y,b,Ra.u+1.570796326794897,ha,da);Ga.ma(ha.u,da.u)}b=Ta*k;1E5<b&&(b=1E5);this.QA=b};a.prototype.xX=function(){var b=5E4<this.rb?100:1E4<this.rb?10:1;500>this.rb/b&&(b=this.rb/500);.01>b&&(b=.01);this.$n=b};return a}();g.VK=c})(ja||={});(function(g){var N=function(){function l(){}l.Mf=function(c,a){var b=new g.h;b.L(a);c.push(b)};
l.up=function(c,a){c.add(a.x);c.add(a.y)};l.hB=function(c){c.Bh(c.size-2)};l.oB=function(c,a){a.ma(c.get(c.size-2),c.get(c.size-1))};l.Qr=function(c,a,b,d,e,f){if(null==c)throw g.i.N();var h=c.getType();if(c.B()||g.aa.Rn(h))return c;var k=new l;k.Qg=a;k.Jc=g.cb.sc(a);var m=g.cb.vv(k.Jc);k.Ub=f;k.Tb=g.cb.ev(k.Jc);k.kc=m*(2-m);k.ec=k.Jc.Hd().ai;k.Aq=k.Jc.Kn();k.Zs=k.Aq*k.ec;k.AA=d;k.zA=e;k.ze=b;197==h?(b=new g.Da(c.description),b.ad(c,!1)):g.aa.yd(h)?(b=new g.Ta(c.description),b.oc(c,!0)):b=c;if(4!=
k.ze){a=0==k.Qg.Nb(k.Jc)?g.cb.zh(b,k.Qg,k.Jc):g.Hh.lj(b,k.Jc);if(a.B())return a;a=l.pI(k.ec,a);a=k.Zy(a);a=g.ip.nj(a,k.Jc,k.ze);k=g.cb.zh(a,k.Jc,k.Qg)}else{2==g.Eg.Sb(a)?(c=g.cb.ml(),a=g.Xj.local().V(b,c,a,f),a==c&&(a=new g.Da,c.copyTo(a))):a=g.Hh.lj(b,k.Jc);if(a.B())return a;k=k.CX(a)}return k};l.pI=function(c,a){var b=new g.l;a.xc(b);if(3.141592653589793>b.R()*c)return a;var d=!1;b=a.Ga();for(var e=new g.h,f=new g.h;b.$a();)for(;b.Ha();){var h=b.ha();e.L(h.ac());f.L(h.wc());e.scale(c);f.scale(c);
if(3.141592653589793<Math.abs(e.x-f.x)){var k=l.Lu(e,f);if(!k){d=!0;break}if(6.283185307179586<Math.abs(e.x-f.x)){d=!0;break}}}if(!d)return a;d=a.Ia();var m=1<a.description.Aa,n=new g.h,p=new g.h,r=new g.h,t=new g.h,x=new g.Sa;for(b.Zi();b.$a();)for(var K=NaN,ca=[0];b.Ha();){h=b.ha();e.L(h.ac());f.L(h.wc());e.scale(c);f.scale(c);isNaN(K)?(l.Wi(e.x,NaN,ca),p.L(e)):p.L(r);K=p.x;if(k=l.Lu(e,f)){if(6.283185307179586<f.x-e.x)for(;6.283185307179586<f.x-e.x;)f.x-=6.283185307179586;if(-6.283185307179586>
f.x-e.x)for(;-6.283185307179586>f.x-e.x;)f.x+=6.283185307179586;l.Wi(f.x,NaN,ca);r.L(f)}else n.L(f),l.AU(n),l.Wi(n.x,K,ca),r.ma(ca[0]+n.x,n.y);.5>Math.abs(r.x-f.x)&&r.L(f);m?(h.Tw(0,x),t.L(p),t.scale(1/c),x.Cb(t),(k=b.vm())?d.nf(x):d.lineTo(x),b.Qn()&&!a.dc(b.gb)&&(h.Tw(1,x),t.L(r),t.scale(1/c),x.Cb(t),d.lineTo(x))):((k=b.vm())&&d.Hz(null,0),h=d.da()-1,t.L(p),t.scale(1/c),d.wf(h,-1,t),b.Qn()&&!a.dc(b.gb)&&(t.L(r),t.scale(1/c),d.wf(h,-1,t)))}return d};l.tF=function(c,a,b,d,e,f,h,k,m,n,p,r){var t=new g.h,
x=new g.h,K=0<d.compare(e);l.fJ(K,d,e,t,x);l.uF(c,a,b,t,x,f,NaN,h,k,m,n,null,p,r);K&&l.fC(m,n,null,p)};l.prototype.Zy=function(c){var a=c.Ia(),b=c.Ga(),d=[],e=null,f=null,h=1<c.description.Aa;h&&(e=new g.be(0),f=new g.ig);for(var k=[0],m=new g.h,n=new g.h,p=new g.h,r=new g.h;b.$a();)for(k[0]=0;b.Ha();){var t=b.ha();m.L(t.ac());n.L(t.wc());m.scale(this.ec);n.scale(this.ec);var x=0<m.compare(n);l.fJ(x,m,n,p,r);d.length=0;null!=e&&e.Bh(0);0<this.AA?l.uF(this.Tb,this.kc,this.ze,p,r,this.AA,this.zA,this.Zs,
null,null,null,h?e:null,d,k):l.aR(this.Tb,this.kc,this.ze,p,r,this.zA,this.Zs,h?e:null,d,k);x&&l.fC(null,null,h?e:null,d);d[0].L(t.ac());d[d.length-1].L(t.wc());for(var K=1;K<d.length-1;K++)d[K].scale(1/this.ec);h?(x=l.eJ(x,t,f),l.TD(b.vm(),b.Qn()&&!c.dc(b.gb),t,x,e,d,a)):l.SD(b.vm(),b.Qn()&&!c.dc(b.gb),d,a)}return a};l.prototype.CX=function(c){var a=c.Ia(),b=c.Ga(),d=[],e=null,f=new g.ig,h=1<c.description.Aa;for(h&&(e=new g.be(0));b.$a();)for(;b.Ha();){var k=b.ha(),m=k.ac(),n=k.wc();m=0<m.compare(n);
n=l.eJ(m,k,f);d.length=0;null!=e&&e.Bh(0);l.BX(this.Tb,this.kc,this.ec,n,this.Qg,this.AA,this.zA,h?e:null,d);m&&l.fC(null,null,h?e:null,d);h?l.TD(b.vm(),b.Qn()&&!c.dc(b.gb),k,n,e,d,a):l.SD(b.vm(),b.Qn()&&!c.dc(b.gb),d,a)}return a};l.SD=function(c,a,b,d){c&&d.Hz(null,0);c=d.da()-1;var e=b.slice(0);d.qG(c,e,e.length-1);a&&d.wf(c,-1,b[b.length-1])};l.TD=function(c,a,b,d,e,f,h){var k=new g.Sa;b.To(k);c?h.nf(k):h.lineTo(k);if(2<f.length){c=d.Qb();for(var m=1;m<f.length-1;m++){var n=d.NG(e.get(m)*c);d.Tw(n,
k);k.Cb(f[m]);h.lineTo(k)}}a&&(b.Po(k),h.lineTo(k))};l.uF=function(c,a,b,d,e,f,h,k,m,n,p,r,t,x){var K=new g.ga(0),ca=new g.ga(0),ha=new g.ga(0);g.kb.wd(c,a,d.x,d.y,e.x,e.y,ha,K,ca,b);ha=ha.u;var da=K=K.u;ca=ca.u;0>da&&(da+=6.283185307179586);0>ca&&(ca+=6.283185307179586);null!=m&&(m[0]=ha);null!=n&&(n[0]=da);null!=p&&(p[0]=ca);n=m=NaN;null!=r&&(n=g.F.Ah(c,a),p=g.F.q(c,a,d.y),m=(n-p)/ha,n=(n+p)/ha);p=l.Mu(d,e);ca=l.Ku(d,e);da=p||ca;var ka=l.FE(d,e,k),ta=new g.ga(0),ua=new g.ga(0),wa=new g.h,Ea=new g.h,
Ga=new g.h;l.Wi(d.x,NaN,x);var Na=[x[0]];if(ha<=f)l.Mf(t,d),l.Wi(e.x,NaN,x),null!=r&&r.add(0),da?(p&&l.kB(d,e,r,t),ca&&l.iB(d,e,r,t)):ka?l.jB(d,e,K,m,n,r,t):0<h&&(Ea.ma(d.x-Na[0],d.y),wa.ma(e.x-x[0],e.y),l.Yy(c,a,b,d,ha,K,Ea,wa,0,1,h,r,t,Na)),l.Mf(t,e);else{f=1+g.O.truncate(Math.ceil(ha/f));var La=ha/(f-1),Ta=new g.h,Ra=0;l.Mf(t,d);Ta.L(d);Ea.ma(d.x-x[0],d.y);null!=r&&r.add(0);for(var Wa=1;Wa<f;Wa++){if(Wa<f-1){g.kb.oj(c,a,d.x,d.y,Wa*La,K,ta,ua,b);wa.ma(ta.u,ua.u);l.Wi(wa.x,Ta.x,x);Ga.ma(x[0]+wa.x,
wa.y);var Xa=Wa/(f-1)}else l.Wi(e.x,NaN,x),wa.ma(e.x-x[0],e.y),Ga.L(e),Xa=1;da?(1==Wa&&p&&l.kB(d,Ga,r,t),Wa==f-1&&ca&&l.iB(Ta,e,r,t)):ka?l.EE(Ta,Ga,k)&&(d.x<e.x?Ta.x>Ga.x&&(x[0]+=6.283185307179586,Ga.ma(x[0]+wa.x,wa.y)):Ta.x<Ga.x&&(x[0]-=6.283185307179586,Ga.ma(x[0]+wa.x,wa.y)),l.jB(Ta,Ga,K,m,n,r,t)):0<h&&l.Yy(c,a,b,d,ha,K,Ea,wa,Ra,Xa,h,r,t,Na);l.Mf(t,Ga);null!=r&&r.add(Xa);Ta.L(Ga);Ea.L(wa);Na[0]=x[0];Ra=Xa}}};l.aR=function(c,a,b,d,e,f,h,k,m,n){var p=new g.ga(0),r=new g.ga(0),t=new g.ga(0);g.kb.wd(c,
a,d.x,d.y,e.x,e.y,t,p,r,b);r=t.u;p=p.u;var x=t=NaN;if(null!=k){x=g.F.Ah(c,a);var K=g.F.q(c,a,d.y);t=(x-K)/r;x=(x+K)/r}K=l.Mu(d,e);var ca=l.Ku(d,e),ha=K||ca;h=l.FE(d,e,h);var da=l.Lu(d,e);da=ha||h||da;l.Wi(d.x,NaN,n);var ka=new g.h;l.Mf(m,d);ka.L(d);null!=k&&k.add(0);da?(ha?(K&&l.kB(d,e,k,m),ca&&l.iB(d,e,k,m)):h&&l.jB(d,e,p,t,x,k,m),l.Wi(e.x,NaN,n),l.Mf(m,e)):r<=f?(l.Wi(e.x,NaN,n),l.Mf(m,e)):(t=new g.h,h=new g.h,t.L(d),h.L(e),t.x-=n[0],h.x-=n[0],-3.141592653589793>h.x?h.x+=6.283185307179586:3.141592653589793<
h.x&&(h.x-=6.283185307179586),l.Yy(c,a,b,d,r,p,t,h,0,1,f,k,m,n),l.Mf(m,e),l.Wi(e.x,NaN,n));null!=k&&k.add(1)};l.Yy=function(c,a,b,d,e,f,h,k,m,n,p,r,t,x){var K=new g.h,ca=new g.h;K.ma(h.x+x[0],h.y);new g.ga(0);new g.ga(0);new g.ga(0);new g.ga(0);var ha=new g.ga(0),da=new g.ga(0),ka=new g.ga(0),ta=new g.h,ua=new g.h,wa=new g.h,Ea=new g.h;ta.L(h);ua.L(k);h=new g.be(0);k=new g.be(0);l.up(h,ua);k.add(n);var Ga=new g.h,Na=new g.yb,La=[];for(l.YJ(4,La);0<h.size;){for(var Ta=!1,Ra,Wa=NaN,Xa=0;3>Xa;Xa++)if(Ra=
La[Xa]*n+(1-La[Xa])*m,g.kb.oj(c,a,d.x,d.y,Ra*e,f,ha,da,b),wa.ma(ha.u,da.u),0==Xa&&(Wa=Ra,Ea.L(wa)),l.WW(ta,wa,ua,Na),Na.hc(Na.fe(wa,!0),Ga),g.kb.wd(c,a,wa.x,wa.y,Ga.x,Ga.y,ka,null,null,2),ka.u>p){Ta=!0;break}Ta?(ua.L(Ea),n=Wa,l.up(h,ua),k.add(n)):(l.hB(h),k.En(k.size-1,1,k.size-1),0<h.size&&(l.Wi(ua.x,K.x,x),ca.ma(x[0]+ua.x,ua.y),l.Mf(t,ca),K.L(ca),null!=r&&r.add(n),ta.L(ua),m=n,l.oB(h,ua),n=k.get(k.size-1)))}};l.BX=function(c,a,b,d,e,f,h,k,m){var n=new g.h,p=new g.h,r=new g.h,t=new g.h,x=new g.h,
K=new g.h,ca=new g.h,ha=new g.h,da=new g.h,ka=new g.h,ta=new g.ga(0),ua=new g.ga(0),wa=new g.h,Ea=[[],[]],Ga=1==g.Eg.Sb(e);e=e.Xd(0);var Na=d.ac(),La=d.wc();Ga?(K.ma(Na.x*b,Na.y*b),ca.ma(La.x*b,La.y*b)):(Ea[0][0]=Na.x,Ea[0][1]=Na.y,Ea[1][0]=La.x,Ea[1][1]=La.y,g.cb.vt(),K.x=Ea[0][0]*b,K.y=Ea[0][1]*b,ca.x=Ea[1][0]*b,ca.y=Ea[1][1]*b);var Ta=0,Ra=0,Wa=1,Xa=d.Pn();n.L(Na);p.L(La);La=new g.be(0);var $a=new g.be(0),cb=new g.be(0);l.up(La,p);l.up($a,ca);cb.add(Wa);l.Mf(m,n);null!=k&&k.add(Ra);var hb=[],fb=
0<h?Xa?5:3:Xa?5:1;l.YJ(fb,hb);for(var Za=new g.ga(0),ab=new g.ga(0),Ya=new g.ga(0),gb=new g.ga(0),eb=new g.ga(0),jb=new g.ga(0),bb=new g.ga(0);0<$a.size;){var ib=!1,db=NaN;g.kb.wd(c,a,K.x,K.y,ca.x,ca.y,Za,ab,null,2);for(Na=0;Na<fb;Na++){if(0==Na){if(!Xa&&0>=h&&Za.u<=f&&3.141592653589793>Math.abs(K.x-ca.x))break;if(d.Ux(Ra,Wa)<=e)break}var lb=hb[Na]*Wa+(1-hb[Na])*Ra;d.hc(lb,r);Ga?ha.ma(r.x*b,r.y*b):(Ea[0][0]=r.x,Ea[0][1]=r.y,g.cb.vt(),ha.x=Ea[0][0]*b,ha.y=Ea[0][1]*b);if(0==Na&&(db=lb,x.L(r),ka.L(ha),
0<f&&(Za.u>f||3.141592653589793<=Math.abs(K.x-ca.x)))){ib=!0;break}if(Xa&&0<f){if(g.kb.wd(c,a,K.x,K.y,ha.x,ha.y,Ya,null,null,2),Ya.u>f||3.141592653589793<=Math.abs(K.x-ha.x)){ib=!0;break}}else if(0<h)if(Xa?(t.NS(n,p,hb[Na]),Ga?da.ma(t.x*b,t.y*b):(Ea[0][0]=t.x,Ea[0][1]=t.y,g.cb.vt(),da.x=Ea[0][0]*b,da.y=Ea[0][1]*b)):(t.L(r),da.L(ha)),g.kb.wd(c,a,K.x,K.y,da.x,da.y,gb,null,null,2),gb.u<=Za.u){g.kb.oj(c,a,K.x,K.y,gb.u,ab.u,ta,ua,2);wa.ma(ta.u,ua.u);g.kb.wd(c,a,wa.x,wa.y,ha.x,ha.y,eb,null,null,2);if(eb.u>
h){ib=!0;break}if(Xa){g.kb.wd(c,a,wa.x,wa.y,da.x,da.y,jb,null,null,2);if(jb.u>h){ib=!0;break}g.kb.wd(c,a,da.x,da.y,ha.x,ha.y,bb,null,null,2);if(bb.u>h){ib=!0;break}}}else{ib=!0;break}}ib?(p.L(x),ca.L(ka),Wa=db,l.up(La,p),l.up($a,ca),cb.add(Wa)):(l.hB(La),l.hB($a),cb.En(cb.size-1,1,cb.size-1),l.Mf(m,p),Ta+=Za.u,null!=k&&k.add(Ta),0<$a.size&&(n.L(p),K.L(ca),Ra=Wa,l.oB(La,p),l.oB($a,ca),Wa=cb.get(cb.size-1)))}if(null!=k)for(c=1/Ta,Na=0;Na<k.size;Na++)k.write(Na,k.read(Na)*c)};l.fC=function(c,a,b,d){d.reverse();
null!=b&&b.ni(0,b.size,1);b=null!=c?c[0]:NaN;d=null!=a?a[0]:NaN;null!=c&&(c[0]=d);null!=a&&(a[0]=b)};l.fJ=function(c,a,b,d,e){c?(d.L(b),e.L(a)):(d.L(a),e.L(b))};l.eJ=function(c,a,b){if(!c)return a;b.create(a.getType());a.copyTo(b.get());b.get().reverse();return b.get()};l.Wi=function(c,a,b){if(isNaN(a)){for(;3.141592653589793<b[0]-c;)b[0]-=6.283185307179586;for(;3.141592653589793<c-b[0];)b[0]+=6.283185307179586}else 3.141592653589793<b[0]+c-a?b[0]-=6.283185307179586:3.141592653589793<a-(b[0]+c)&&
(b[0]+=6.283185307179586)};l.WW=function(c,a,b,d){3.141592653589793>Math.abs(a.x-c.x)?(d.Dc(c),3.141592653589793<=b.x-c.x?d.Ql(b.x-6.283185307179586,b.y):3.141592653589793<=c.x-b.x?d.Ql(b.x+6.283185307179586,b.y):d.Ql(b.x,b.y)):(d.Dc(b),3.141592653589793<=c.x-b.x?d.Ql(c.x-6.283185307179586,c.y):3.141592653589793<=b.x-c.x?d.Ql(c.x+6.283185307179586,c.y):d.Ql(c.x,c.y))};l.YJ=function(c,a){for(var b=0;b<c;b++){var d=Math.ceil(b/2)/(c+1);0!=b%2&&(d=-d);a[b]=.5+d}};l.Mu=function(c,a){return g.s.Y(c.y,
1.570796326794897)&&!g.s.Y(a.y,1.570796326794897)||g.s.Y(c.y,-1.570796326794897)&&!g.s.Y(a.y,-1.570796326794897)?!0:!1};l.Ku=function(c,a){return g.s.Y(a.y,1.570796326794897)&&!g.s.Y(c.y,1.570796326794897)||g.s.Y(a.y,-1.570796326794897)&&!g.s.Y(c.y,-1.570796326794897)?!0:!1};l.FE=function(c,a,b){return!l.EE(c,a,b)||g.s.Y(c.y,1.570796326794897)||g.s.Y(c.y,-1.570796326794897)||g.s.Y(a.y,1.570796326794897)||g.s.Y(a.y,-1.570796326794897)?!1:!0};l.EE=function(c,a,b){return Math.abs(Math.abs(c.x-a.x)-3.141592653589793)<=
b?!0:!1};l.Lu=function(c,a){return g.s.Y(c.y,1.570796326794897)&&g.s.Y(a.y,1.570796326794897)||g.s.Y(c.y,-1.570796326794897)&&g.s.Y(a.y,-1.570796326794897)?!0:!1};l.kB=function(c,a,b,d){if(0<c.y){var e=new g.h;e.ma(a.x,1.570796326794897)}else e=new g.h,e.ma(a.x,-1.570796326794897);g.s.Y(c.x,e.x)||g.s.Y(a.y,e.y)||(l.Mf(d,e),null!=b&&b.add(0))};l.iB=function(c,a,b,d){if(0<a.y){var e=new g.h;e.ma(c.x,1.570796326794897)}else e=new g.h,e.ma(c.x,-1.570796326794897);g.s.Y(a.x,e.x)||g.s.Y(c.y,e.y)||(l.Mf(d,
e),null!=b&&b.add(1))};l.jB=function(c,a,b,d,e,f,h){g.s.Cd(b)?(0<1.570796326794897-c.y&&(b=new g.h,b.ma(c.x,1.570796326794897),l.Mf(h,b),null!=f&&f.add(d)),0<1.570796326794897-a.y&&(b=new g.h,b.ma(a.x,1.570796326794897),l.Mf(h,b),null!=f&&f.add(d))):(0<1.570796326794897+c.y&&(b=new g.h,b.ma(c.x,-1.570796326794897),l.Mf(h,b),null!=f&&f.add(e)),0<1.570796326794897+a.y&&(b=new g.h,b.ma(a.x,-1.570796326794897),l.Mf(h,b),null!=f&&f.add(e)))};l.AU=function(c){if(-3.141592653589793>c.x)for(;-3.141592653589793>
c.x;)c.x+=6.283185307179586;if(3.141592653589793<c.x)for(;3.141592653589793<c.x;)c.x-=6.283185307179586};return l}();g.cj=N})(ja||={});(function(g){g.ip=function(){function N(){}N.nj=function(l,c,a){if(null==l||null==c||!g.cb.Wc(c))throw g.i.N();if(l.B())return l;var b=l,d=b.getType();if(g.aa.Hc(d)){b=g.Hh.lj(l,c);l=new g.l;b.A(l);d=g.ta.Wd(c,l,!1);for(var e=g.cb.gh(c),f=Math.floor((l.v-e.v)/e.R())*e.R()+e.v;f<l.C;)f>l.v+d&&f<l.C-d&&(b=g.Hh.ks(b,c,a,!0,f)),f+=e.R()}else{if(197==d)return l=new g.Da(b.description),
l.ad(b,!1),N.nj(l,c,a);if(g.aa.yd(d))return l=new g.Ta(b.description),l.oc(b,!0),N.nj(l,c,a)}return N.Uy(b,c)};N.Uy=function(l,c){if(null==l||null==c||!g.cb.Wc(c))throw g.i.N();if(l.B())return l;var a=l.getType();197==a?(a=new g.Da(l.description),a.ad(l,!1)):g.aa.yd(a)?(a=new g.Ta(l.description),a.oc(l,!0)):a=l;a=g.Hh.lj(a,c);return a.B()?a:1==g.Eg.Sb(c)?g.Hh.Fn(a,c,0,a!=l,0):N.NQ(a,c,a!=l)};N.NQ=function(l,c,a){if(!g.cb.Wc(c))throw g.i.N();if(l.B())return l;var b=g.cb.bf(c),d=-(180*b);b*=360;2==
g.Eg.Sb(c)&&(d=g.cb.gh(c),b=d.C,d=d.v,b-=d);return g.Hh.Hp(l,d,b,c,a,0,!0)};return N}()})(ja||={});(function(g){g.BY=function(){function N(){}N.P=function(l){return 0>l?-l:l};N.Mb=function(l,c){return 0<=c?N.P(l):-N.P(l)};N.Y=function(l,c){return l==c||N.P(l-c)<=N.JC*(1+(N.P(l)+N.P(c))/2)};N.Cd=function(l){return 0==l||N.P(l)<=N.JC};N.Ah=function(l,c){c=Math.sqrt(1-c);c=(1-c)/(1+c);var a=c*c;return l/(1+c)*(1+a*(.25+a*(.015625+1/256*a)))*N.EL};N.EL=1.5707963267948966;N.JC=3.552713678800501E-15;return N}()})(ja||=
{});(function(g){var N=function(){return function(c){this.Wf=c;this.Kk=this.Wf.getCode();0>this.Kk&&(this.Kk=0)}}();g.DY=N;var l=function(){function c(a){void 0===a&&(a=null);this.Cj=null;this.Un=!1;null!==a&&(this.Cj=new N(a))}c.prototype.Ec=function(){return null!=this.Cj?this.Cj.Kk:0};c.prototype.Of=function(){var a=new c;this.copyTo(a);return a};c.prototype.copyTo=function(a){a.Cj=this.Cj;a.Un=this.Un};c.prototype.Qz=function(){this.Un=!this.Un};c.prototype.qm=function(){return null!=this.Cj?
this.Cj.Wf:null};c.prototype.LJ=function(a){if(0>=a)throw g.i.N();if(a!=this.Ec()){a=g.pf.geogtran(a);if(null==a)throw g.i.N("Geogtran not found.");this.Cj=new N(a)}};c.prototype.Bz=function(){return null==this.Cj?null:this.Cj.Wf.toString()};c.prototype.tX=function(a){if(null==a)throw g.i.N();var b=null;try{b=g.pf.fromString(g.Sc.PE_TYPE_GEOGTRAN,a)}catch(d){throw g.i.N();}this.Cj=new N(b)};c.prototype.Nb=function(a){return a==this?!0:a instanceof c&&(!(0>=this.Ec()||this.Ec()!=a.Ec())||this.qm().isEqual(a.qm()))?
this.Un==a.Un:!1};c.prototype.toString=function(){var a="GeographicTransformation: "+this.Bz();return 200<a.length?a.substring(0,197)+"... ("+a.length.toString()+" characters)":a};c.create=function(a,b){var d=new c;d.LJ(a);b&&d.Qz();return d};c.uP=function(a,b){var d=new c;d.tX(a);b&&d.Qz();return d};return c}();g.Dx=l})(ja||={});(function(g){var N=function(){function c(){}c.construct=function(a,b,d,e){var f=new c;f.hw=a;f.iw=b;f.QY=d;f.RY=e;return f};c.Ey=function(a,b){return a.hw==b.hw?a.iw==b.iw?
0:a.iw<b.iw?-1:1:a.hw<b.hw?-1:1};return c}(),l=function(){function c(){this.yT=[];this.zT=[];this.qp()}c.kz=function(){null==c.jK&&(c.jK=new c);return c.jK};c.prototype.qp=function(){this.iD(this.yT);this.iD(this.zT)};c.prototype.iD=function(a){try{var b=[];b=b.sort(N.Ey);for(var d=0;d<b.length;d++)a.push(b[d])}catch(e){}};return c}();g.CY=l})(ja||={});(function(g){var N=function(){function l(){}l.prototype.yD=function(c){this.Fk=c};l.prototype.WM=function(c){this.Fb=c};l.prototype.xD=function(c){this.zo=
c};l.CE=function(c){return c.B()||1607!=c.getType()&&1736!=c.getType()?!1:!0};l.AE=function(c){return c.B()||1607!=c.getType()&&1736!=c.getType()||20>c.I()?!1:!0};l.BE=function(c){return c.B()||1607!=c.getType()&&1736!=c.getType()||20>c.I()?!1:!0};return l}();g.Uk=N})(ja||={});(function(g){g.$b=function(){function N(){}N.TT=function(l){var c=new g.Da;c.sx(l.es(),l.gs());c.yj(l.es(),l.fs());c.yj(l.ds(),l.fs());c.yj(l.ds(),l.gs());return c};N.zh=function(l,c){return null===l?null:g.Hx.local().V(l,c,
null)};N.jY=function(l,c){var a=g.Gh.local();l=new g.Zc(l);return a.V(l,c,null).next()};N.im=function(l,c,a){return g.kp.local().V(l,c,a,null)};N.ep=function(l,c,a){return g.Kx.local().V(l,c,a,null)};N.VX=function(l,c,a){var b=g.Kx.local();l=new g.Zc(l);c=new g.Zc(c);a=b.V(l,c,a,null);for(b=[];null!=(c=a.next());)b.push(c);return b};N.Nb=function(l,c,a){return g.dj.local().V(3,l,c,a,null)};N.TP=function(l,c,a){return g.dj.local().V(4,l,c,a,null)};N.RS=function(l,c,a){var b=g.Xj.local();l=new g.Zc(l);
c=new g.Zc(c);a=b.V(l,c,a,null);for(b=[];null!=(c=a.next());)b.push(c);return b};N.QP=function(l,c,a){var b=g.kp.local();l=new g.Zc(l);c=new g.Zc(c);a=b.V(l,c,a,null);for(b=[];null!=(c=a.next());)b.push(c);return b};N.Ea=function(l,c,a){return g.Xj.local().V(l,c,a,null)};N.QS=function(l,c,a){l=g.Xj.local().V(l,c,a,null,1);if(null===l)return[];if(550===l.getType()){c=[];for(a=0;a<l.wa;a++)c.push(l.KR(a));return c}return 33===l.getType()?[l]:[]};N.qY=function(l,c,a){return g.dj.local().V(2,l,c,a,null)};
N.contains=function(l,c,a){return g.dj.local().V(1,l,c,a,null)};N.BP=function(l,c,a){return g.dj.local().V(16,l,c,a,null)};N.touches=function(l,c,a){return g.dj.local().V(8,l,c,a,null)};N.DU=function(l,c,a){return g.dj.local().V(32,l,c,a,null)};N.TS=function(l,c,a){return g.dj.local().V(1073741824,l,c,a,null)};N.yB=function(l,c,a,b){return g.zL.local().V(l,c,a,b,null)};N.tb=function(l,c,a,b){var d=null;if(null!=a){if(d=a.Hd(),null!=b&&d.Ec()!=b.Ec()&&d.od!=b.od)throw g.i.Xk();}else if(null!=b)throw g.i.N();
l=g.rL.local().V(l,c,null);null!==d&&null!==b&&(l=g.Tc.Nh(l,d,b));return l};N.clip=function(l,c,a){return g.kL.local().V(l,g.l.construct(c.es(),c.gs(),c.ds(),c.fs()),a,null)};N.dl=function(l,c,a){if(null==l||null==c)return null;l=g.mL.local().V(!0,l,c,a,null);for(c=[];null!=(a=l.next());)a.B()||c.push(a);return c.slice(0)};N.MN=function(l,c,a,b,d,e,f,h){if(!0===d)return N.NN(l,c,a,b,e,f,h);d=a;if(null!=c){if(f=c.Hd(),null!=b&&f.Ec()!=b.Ec()){if(f.od!=b.od)throw g.i.Xk();d=[];g.Tc.XE(a,a.length,b,
f,d)}}else if(null!=b)throw g.i.N();a=g.AC.local();if(e){l=new g.Zc(l);c=a.V(l,c,d,e,null);for(l=[];null!=(e=c.next());)l.push(e);e=l.slice(0)}else for(e=[],b=0;b<l.length;b++)e[b]=a.V(l[b],c,d[b],null);return e};N.NN=function(l,c,a,b,d,e,f){if(null===c)throw g.i.N();if(null===b||void 0===b)b=4326!==c.Ec()?c.Hd():g.Tc.Zg(9001);if(0!==b.od)throw g.i.N();g.Tc.XE(a,a.length,b,g.Tc.Zg(9001),a);b=g.FC.local();if(d){l=new g.Zc(l);c=b.V(l,c,e,a,f,!1,d,null);for(a=[];null!=(e=c.next());)a.push(e);d=a.slice(0)}else{d=
[];for(var h=0;h<l.length;h++)d[h]=b.V(l[h],c,e,a[h],f,!1,null)}return d};N.buffer=function(l,c,a,b,d,e,f){var h=a;if(!1===d){if(null!=c){if(d=c.Hd(),null!=b&&d.Ec()!=b.Ec()){if(d.od!=b.od)throw g.i.Xk();h=g.Tc.Nh(a,b,d)}}else if(null!=b)throw g.i.N();l=g.AC.local().V(l,c,h,null)}else{if(null===c)throw g.i.N();if(null===b||void 0===b)b=4326!==c.Ec()?c.Hd():g.Tc.Zg(9001);if(0!==b.od)throw g.i.N();h=g.Tc.Nh(a,b,g.Tc.Zg(9001));l=g.FC.local().V(l,c,e,h,f,!1,null)}return l};N.BU=function(l,c,a,b,d,e,f){if(null!=
c){var h=c.Hd();if(null!=f&&h.Ec()!=f.Ec()){if(h.od!=f.od)throw g.i.Xk();a=g.Tc.Nh(a,f,h)}}else if(null!=f)throw g.i.N();l=new g.Zc(l);c=g.IC.local().V(l,c,a,b,d,e,null);for(a=[];null!=(b=c.next());)a.push(b);return a.slice(0)};N.offset=function(l,c,a,b,d,e,f){if(null!=c){var h=c.Hd();if(null!=f&&h.Ec()!=f.Ec()){if(h.od!=f.od)throw g.i.Xk();a=g.Tc.Nh(a,f,h)}}else if(null!=f)throw g.i.N();return g.IC.local().V(l,c,a,b,d,e,null)};N.iP=function(l){return g.CC.local().V(l,null)};N.jP=function(l,c){var a=
g.CC.local();l=new g.Zc(l);c=a.V(l,c,null);for(a=[];null!=(l=c.next());)a.push(l);return a};N.nz=function(l,c,a){return g.Ix.local().nz(l,c,a)};N.oz=function(l,c){return g.Ix.local().oz(l,c)};N.pz=function(l,c,a,b){return g.Ix.local().pz(l,c,a,b)};N.eC=function(l,c){return g.Yl.local().V(l,c,!1,null)};N.dT=function(l,c){return g.Yl.local().rs(l,c,null)};N.QQ=function(l,c,a,b,d){var e=g.EC.local();if(null!=c){if(c=c.Hd(),null!=d&&c.Ec()!=d.Ec()){if(c.od!=d.od)throw g.i.Xk();a=g.Tc.Nh(a,d,c)}}else if(null!=
d)throw g.i.N();return e.V(l,a,b,null)};N.Qr=function(l,c,a,b){var d=g.Xl.local();if(null!=c){if(c=c.Hd(),null!=b&&c.Ec()!=b.Ec()){if(c.od!=b.od)throw g.i.Xk();a=g.Tc.Nh(a,b,c)}}else if(null!=b)throw g.i.N();return d.V(l,a,null)};N.Wy=function(l,c,a,b,d){void 0===d&&(d=0);var e=g.tL.local();if(4==d)throw g.i.Ie();if(0!==d)throw g.i.Ie();if(null!==b){if(0!==b.od)throw g.i.N("Unit must be a linear unit type");a=g.Tc.Nh(a,b,g.Tc.Zg(9001))}return e.V(l,a,c,d,null)};N.WQ=function(l,c,a,b){if(null===l)return 0;
if(4==b)throw g.i.Ie();if(0!==b)throw g.i.Ie();if(197==l.getType())l=N.TT(l);else if(1736!=l.getType())return 0;b=g.cb.sc(c);l=g.cb.zh(l,c,b);l=g.UK.XQ([l])[0];if(null!==a){if(2!==a.od)throw g.i.N("Unit must be a area unit type");l=g.Tc.Nh(l,g.Tc.Zg(109404),a)}return l};N.ZQ=function(l,c,a,b){l=g.vL.local().V(l,c,b,null);if(null!==a){if(0!==a.od)throw g.i.N("Unit must be a linear unit type");l=g.Tc.Nh(l,g.Tc.Zg(9001),a)}return l};N.JU=function(l,c,a){if(null===l)return 0;var b=null;if(null!=c){b=
c.Hd();if(0==b.od&&(b=g.Tc.aG(b),null==b&&null!==a))throw g.i.N();if(null!=a&&b.Ec()!=a.Ec()&&b.od!=a.od)throw g.i.Xk();}else if(null!=a)throw g.i.N();return 1736==l.getType()||197==l.getType()?(l=l.Ke(),null!==a?g.Tc.Nh(l,b,a):l):0};N.KU=function(l,c,a){if(null===l||l.B()||1>l.Db())return 0;var b=null;if(null!=c){if(b=c.Hd(),null!=a&&b.Ec()!=a.Ec()&&b.od!=a.od)throw g.i.Xk();}else if(null!=a)throw g.i.N();1736==l.getType()||197==l.getType()?c=l.mg():g.aa.yd(l.getType())?(c=new g.Ta(l.description),
c.oc(l,!0)):c=l;l=0;c=c.Ga();for(var d=new g.h,e=new g.h;c.$a();)for(;c.Ha();){var f=c.ha();f.Yp(d);f.Tr(e);l+=g.h.tb(d,e)}null!==b&&null!==a&&(l=g.Tc.Nh(l,b,a));return l};N.fP=function(l){return void 0!==l.points?N.mS(l,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM):void 0!==l.rings?N.lG(l.rings,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM,"P"):void 0!==l.paths?N.lG(l.paths,void 0===l.hasZ?!1:l.hasZ,void 0===l.hasM?!1:l.hasM,"L"):void 0!==l.x?N.nS(l):void 0!==l.xmin?N.lS(l):null};N.nS=
function(l){if(null==l.x||"NaN"==l.x)return new g.Sa;var c=new g.Sa(l.x,l.y);void 0!==l.z&&null!==l.z&&c.wX(l.z);void 0!==l.m&&null!==l.m&&c.hX(l.m);return c};N.lS=function(l){if(null==l.xmin||"NaN"==l.xmin)return new g.Fh;var c=new g.Fh(l.xmin,l.ymin,l.xmax,l.ymax);void 0!==l.zmin&&null!==l.zmin&&c.setInterval(1,0,l.zmin,l.zmax);void 0!==l.mmin&&null!==l.mmin&&c.setInterval(2,0,l.mmin,l.mmax);return c};N.mS=function(l,c,a){var b=0,d=new g.de,e=3*l.points.length;0!=e%2&&e++;2>e&&(e=2);var f=g.O.truncate(3*
l.points.length/2);4>f?f=4:16>f&&(f=16);e=g.Yc.Dn(e,0);var h=g.Yc.Dn(f);f=g.Yc.Dn(f);for(var k=0;k<l.points.length;k++)e.write(2*k,l.points[k][0]),e.write(2*k+1,l.points[k][1]),h.write(k,c||a?l.points[k][2]:NaN),f.write(k,a&&c?l.points[k][3]:NaN),b++;0!=b&&(d.resize(b),d.hn(0,e));c&&(d.re(1),d.hn(1,h));a&&(d.re(2),d.hn(2,0==c?h:f));d.Pc(16777215);return d};N.lG=function(l,c,a,b){var d=0,e=2;if("P"==b){var f=new g.Da;d=1;e=3}else f=new g.Ta;for(var h=g.Yc.Oh(0),k=g.Yc.Mr(0),m=0,n=0,p=[],r=[],t=0;t<
l.length;t++){var x=l[t].length;p[t]=!1;if("P"===b&&l[t][0][0]===l[t][l[t].length-1][0]&&l[t][0][1]===l[t][l[t].length-1][1]){var K=0==a?!0:l[t][0][3]===l[t][l[t].length-1][3]||void 0===l[t][0][3]&&void 0===l[t][l[t].length-1][3];(0==c||l[t][0][2]===l[t][l[t].length-1][2]||void 0===l[t][0][2]&&void 0===l[t][l[t].length-1][2])&&K&&(p[t]=!0,--x)}x>=e?(r[t]=!1,n+=1,h.add(m),k.add(d),m+=x):r[t]=!0}b=3*m;0!=b%2&&b++;2>b&&(b=2);t=g.O.truncate(3*m/2);4>t?t=4:16>t&&(t=16);b=g.Yc.Dn(b,0);d=g.Yc.Dn(t);e=g.Yc.Dn(t);
for(t=x=0;t<l.length;t++)if(!1===r[t])for(K=0;K<l[t].length;K++){var ca=!1;K===l[t].length-1&&!0===p[t]&&(ca=!0);ca||(b.write(2*x,l[t][K][0]),b.write(2*x+1,l[t][K][1]),d.write(x,c||a?l[t][K][2]:NaN),e.write(x,a&&c?l[t][K][3]:NaN),x++)}0!=m&&(l=f,h.resize(n),k.resize(n),0<m&&(h.add(m),k.add(0)),l.hn(0,b),l.PJ(k),l.QJ(h));c&&(f.re(1),f.hn(1,d));a&&(f.re(2),f.hn(2,0==c?d:e));f.Pc(16777215);return f};return N}()})(ja||={});(function(g){g.Ex=function(){function N(){}N.br=function(l){var c=0,a,b=l.length,
d=l[0];for(a=0;a<b-1;a++){var e=l[a+1];c+=(e[0]-d[0])*(e[1]+d[1]);d=e}return 0<=c};N.rotate=function(l,c,a){c=c*Math.PI/180;var b=Math.cos(c),d=Math.sin(c);if(void 0!==l.paths){c={paths:[]};for(var e=0;e<l.paths.length;e++){for(var f=l.paths[e],h=[],k=0;k<f.length;k++){var m=f[k].slice(0);h.push(m);var n=b*(f[k][0]-a.x)-d*(f[k][1]-a.y)+a.x,p=d*(f[k][0]-a.x)+b*(f[k][1]-a.y)+a.y;m[0]=n;m[1]=p}c.paths.push(h);void 0!==l.hasZ&&(c.hasZ=l.hasZ);void 0!==l.hasM&&(c.hasM=l.hasM)}return c}if(void 0!==l.rings){c=
{rings:[]};for(e=0;e<l.rings.length;e++){f=l.rings[e];h=[];var r=N.br(f);for(k=0;k<f.length;k++)m=f[k].slice(0),h.push(m),n=b*(f[k][0]-a.x)-d*(f[k][1]-a.y)+a.x,p=d*(f[k][0]-a.x)+b*(f[k][1]-a.y)+a.y,m[0]=n,m[1]=p;N.br(h)!==r&&h.reverse();c.rings.push(h);void 0!==l.hasZ&&(c.hasZ=l.hasZ);void 0!==l.hasM&&(c.hasM=l.hasM)}return c}if(void 0!==l.x)return c={x:b*(l.x-a.x)-d*(l.y-a.y)+a.x,y:d*(l.x-a.x)+b*(l.y-a.y)+a.y},void 0!==l.z&&(c.z=l.z),void 0!==l.m&&(c.m=l.m),void 0!==l.hasZ&&(c.hasZ=l.hasZ),void 0!==
l.hasM&&(c.hasM=l.hasM),c;if(void 0!==l.points){c={points:[]};e=l.points;for(k=0;k<e.length;k++)f=e[k].slice(0),f[0]=b*(e[k][0]-a.x)-d*(e[k][1]-a.y)+a.x,f[1]=d*(e[k][0]-a.x)+b*(e[k][1]-a.y)+a.y,c.points.push(f);void 0!==l.hasZ&&(c.hasZ=l.hasZ);void 0!==l.hasM&&(c.hasM=l.hasM);return c}return null};N.JQ=function(l,c){if(void 0!==l.paths){for(var a={paths:[]},b=0;b<l.paths.length;b++){for(var d=l.paths[b],e=[],f=0;f<d.length;f++){var h=d[f].slice(0);e.push(h);var k=c.x-d[f][0];h[0]=d[f][0]+2*k}a.paths.push(e)}void 0!==
l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==l.rings){a={rings:[]};for(b=0;b<l.rings.length;b++){d=l.rings[b];var m=N.br(d);e=[];for(f=0;f<d.length;f++)h=d[f].slice(0),e.push(h),k=c.x-d[f][0],h[0]=d[f][0]+2*k;N.br(e)!==m&&e.reverse();a.rings.push(e)}void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==l.x)return k=c.x-l.x,a={x:l.x+2*k,y:l.y},void 0!==l.z&&(a.z=l.z),void 0!==l.m&&(a.m=l.m),void 0!==l.hasZ&&(a.hasZ=l.hasZ),void 0!==
l.hasM&&(a.hasM=l.hasM),a;if(void 0!==l.points){a={points:[]};b=l.points;for(f=0;f<b.length;f++)d=b[f].slice(0),k=c.x-d[0],d[0]+=2*k,a.points.push(d);void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}return void 0!==l.xmin?(a={v:l.xmin,G:l.ymin,C:l.xmax,H:l.ymax},void 0!==l.zmin&&(a.zmin=l.zmin,a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin,a.mmax=l.mmax),k=c.x-l.xmin,a.xmax=l.xmin+2*k,k=c.x-l.xmax,a.xmin=l.xmax+2*k,void 0!==l.zmin&&(a.zmin=l.zmin),void 0!==l.zmax&&(a.zmax=
l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin),void 0!==l.mmax&&(a.mmax=l.mmax),void 0!==l.hasZ&&(a.hasZ=l.hasZ),void 0!==l.hasM&&(a.hasM=l.hasM),a):null};N.KQ=function(l,c){if(void 0!==l.paths){for(var a={paths:[]},b=0;b<l.paths.length;b++){for(var d=l.paths[b],e=[],f=0;f<d.length;f++){var h=d[f].slice(0);e.push(h);var k=c.y-d[f][1];h[1]=d[f][1]+2*k}a.paths.push(e)}void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==l.rings){a={rings:[]};for(b=0;b<l.rings.length;b++){d=
l.rings[b];var m=N.br(d);e=[];for(f=0;f<d.length;f++)h=d[f].slice(0),e.push(h),k=c.y-d[f][1],h[1]=d[f][1]+2*k;N.br(e)!==m&&e.reverse();a.rings.push(e)}void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}if(void 0!==l.x)return k=c.y-l.y,a={y:l.y+2*k,x:l.x},void 0!==l.z&&(a.z=l.z),void 0!==l.m&&(a.m=l.m),void 0!==l.hasZ&&(a.hasZ=l.hasZ),void 0!==l.hasM&&(a.hasM=l.hasM),a;if(void 0!==l.points){a={points:[]};b=l.points;for(f=0;f<b.length;f++)d=b[f].slice(0),k=c.y-d[1],d[1]+=2*k,
a.points.push(d);void 0!==l.hasZ&&(a.hasZ=l.hasZ);void 0!==l.hasM&&(a.hasM=l.hasM);return a}return void 0!==l.xmin?(a={v:l.xmin,G:l.ymin,C:l.xmax,H:l.ymax},void 0!==l.zmin&&(a.zmin=l.zmin,a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin,a.mmax=l.mmax),k=c.y-l.ymin,a.ymax=l.ymin+2*k,k=c.y-l.ymax,a.ymin=l.ymax+2*k,void 0!==l.zmin&&(a.zmin=l.zmin),void 0!==l.zmax&&(a.zmax=l.zmax),void 0!==l.mmin&&(a.mmin=l.mmin),void 0!==l.mmax&&(a.mmax=l.mmax),void 0!==l.hasZ&&(a.hasZ=l.hasZ),void 0!==l.hasM&&(a.hasM=
l.hasM),a):null};return N}()})(ja||={});(function(g){g.ZK=function(){function N(){}N.Ig=function(l,c){null==c&&(c=g.ee.og());switch(l){case 33:return new g.Sa(c);case 322:return new g.yb(c);case 197:return new g.Fh(c);case 550:return new g.de(c);case 1607:return new g.Ta(c);case 1736:return new g.Da(c);default:throw g.i.fa("invalid argument.");}};return N}()})(ja||={});(function(g){var N=function(){function l(c,a){this.Te=g.ia.qf(c,-1);this.ua=new g.au;this.wl=a}l.prototype.AW=function(c){this.ua.At(Math.min(this.Te.size,
c));this.ua.fn(c)};l.prototype.addElement=function(c,a){if(void 0===a)return this.eN(c);a=g.O.truncate(a%this.Te.size);var b=this.Te.get(a);-1==b&&(b=this.ua.Ph(),this.Te.set(a,b));return this.ua.addElement(b,c)};l.prototype.eN=function(c){var a=this.wl.jz(c);a=g.O.truncate(a%this.Te.size);var b=this.Te.get(a);-1==b&&(b=this.ua.Ph(),this.Te.set(a,b));return this.ua.addElement(b,c)};l.prototype.jd=function(c,a){if(void 0===a)this.KP(c);else{a=g.O.truncate(a%this.Te.size);var b=this.Te.get(a);if(-1==
b)throw g.i.N();for(var d=this.ua.rc(b),e=-1;-1!=d;){var f=this.ua.lb(d);this.ua.ja(d)==c?(this.ua.jd(b,e,d),-1==this.ua.rc(b)&&(this.ua.bh(b),this.Te.set(a,-1))):e=d;d=f}}};l.prototype.KP=function(c){var a=this.wl.jz(c);a=g.O.truncate(a%this.Te.size);var b=this.Te.get(a);if(-1==b)throw g.i.N();for(var d=this.ua.rc(b),e=-1;-1!=d;){var f=this.ua.lb(d);this.ua.ja(d)==c?(this.ua.jd(b,e,d),-1==this.ua.rc(b)&&(this.ua.bh(b),this.Te.set(a,-1))):e=d;d=f}};l.prototype.rR=function(c){c=g.O.truncate(c%this.Te.size);
c=this.Te.get(c);return-1==c?-1:this.ua.rc(c)};l.prototype.ER=function(c){return this.ua.lb(c)};l.prototype.vd=function(c){var a=this.wl.jz(this.ja(c));a=g.O.truncate(a%this.Te.size);var b=this.Te.get(a);if(-1==b)throw g.i.N();for(var d=this.ua.rc(b),e=-1;-1!=d;){if(d==c){this.ua.jd(b,e,d);-1==this.ua.rc(b)&&(this.ua.bh(b),this.Te.set(a,-1));return}e=d;d=this.ua.lb(d)}throw g.i.N();};l.prototype.ja=function(c){return this.ua.ja(c)};l.prototype.clear=function(){this.Te=g.ia.qf(this.Te.size,-1);this.ua.clear()};
l.prototype.size=function(){return this.ua.TF()};return l}();g.dL=N})(ja||={});(function(g){var N=function(){function l(){this.Li=new g.$c(3);this.ua=new g.$c(6);this.sT=!1;this.je=-1}l.prototype.fl=function(c){this.Li.jd(c)};l.prototype.Pw=function(){return this.Li.Ce()};l.prototype.bv=function(c){this.ua.jd(c)};l.prototype.$A=function(){return this.ua.Ce()};l.prototype.WB=function(c,a){this.Li.S(c,1,a)};l.prototype.ex=function(c,a){this.Li.S(c,2,a)};l.prototype.gX=function(c,a){this.Li.S(c,3,a)};
l.prototype.UB=function(c,a){this.ua.S(c,4,a)};l.prototype.jX=function(c,a){this.ua.S(c,3,a)};l.prototype.TJ=function(c,a){this.ua.S(c,2,a)};l.prototype.Ph=function(c){var a=this.$A();this.ua.S(a,3,this.je);this.ua.S(a,4,0);this.ua.S(a,5,c);-1!=this.je&&this.TJ(this.je,a);return this.je=a};l.prototype.bh=function(c){this.LE(c);var a=this.ua.T(c,2),b=this.ua.T(c,3);-1!=a?this.jX(a,b):this.je=b;-1!=b&&this.TJ(b,a);this.bv(c);return b};l.prototype.At=function(c){this.ua.De(c)};l.prototype.PF=function(c){return this.ua.T(c,
5)};l.prototype.fX=function(c,a){this.ua.S(c,5,a)};l.prototype.addElement=function(c,a){return this.tS(c,a)};l.prototype.tS=function(c,a){var b=this.Pw();this.ex(b,-1);-1==this.ua.T(c,0)&&this.ua.S(c,0,b);var d=this.ua.T(c,1);this.WB(b,d);-1!=d&&this.ex(d,b);this.ua.S(c,1,b);this.setData(b,a);this.UB(c,this.bs(c)+1);this.sT&&this.gX(b,c);return b};l.prototype.jd=function(c,a){var b=this.we(a),d=this.lb(a);-1!=b?this.ex(b,d):this.ua.S(c,0,d);-1!=d?this.WB(d,b):this.ua.S(c,1,b);this.fl(a);this.UB(c,
this.bs(c)-1);return d};l.prototype.fn=function(c){this.Li.De(c)};l.prototype.getData=function(c){return this.Li.T(c,0)};l.prototype.setData=function(c,a){this.Li.S(c,0,a)};l.prototype.lb=function(c){return this.Li.T(c,2)};l.prototype.we=function(c){return this.Li.T(c,1)};l.prototype.rc=function(c){return this.ua.T(c,0)};l.prototype.Fc=function(c){return this.ua.T(c,1)};l.prototype.clear=function(){for(var c=this.je;-1!=c;)c=this.bh(c)};l.prototype.LE=function(c){for(var a=this.Fc(c);-1!=a;){var b=
a;a=this.we(b);this.fl(b)}this.ua.S(c,0,-1);this.ua.S(c,1,-1);this.UB(c,0)};l.prototype.B=function(){return 0==this.Li.size};l.prototype.TF=function(){return this.Li.size};l.prototype.bs=function(c){return this.ua.T(c,4)};l.prototype.qz=function(c){return this.ua.T(c,3)};return l}();g.jp=N})(ja||={});(function(g){var N=function(){function l(c){void 0===c?(this.ug=new g.$c(2),this.ua=new g.$c(4),this.je=-1,this.Qv=!0):(this.ug=new g.$c(2),this.ua=new g.$c(c?4:2),this.je=-1,this.Qv=c)}l.prototype.fl=
function(c){this.ug.jd(c)};l.prototype.Pw=function(){return this.ug.Ce()};l.prototype.bv=function(c){this.ua.jd(c)};l.prototype.$A=function(){return this.ua.Ce()};l.prototype.Ph=function(){var c=this.$A();this.Qv&&(this.ua.S(c,3,this.je),-1!=this.je&&this.ua.S(this.je,2,c),this.je=c);return c};l.prototype.bh=function(c){for(var a=this.rc(c);-1!=a;){var b=a;a=this.lb(a);this.fl(b)}this.Qv&&(a=this.ua.T(c,2),b=this.ua.T(c,3),-1!=a?this.ua.S(a,3,b):this.je=b,-1!=b&&this.ua.S(b,2,a));this.bv(c)};l.prototype.At=
function(c){this.ua.De(c)};l.prototype.addElement=function(c,a){var b=this.ua.T(c,1),d=this.Pw();-1!=b?this.ug.S(b,1,d):this.ua.S(c,0,d);this.ua.S(c,1,d);this.ug.S(d,0,a);return d};l.prototype.fn=function(c){this.ug.De(c)};l.prototype.jd=function(c,a,b){-1!=a?(this.ug.S(a,1,this.ug.T(b,1)),this.ua.T(c,1)==b&&this.ua.S(c,1,a)):(this.ua.S(c,0,this.ug.T(b,1)),this.ua.T(c,1)==b&&this.ua.S(c,1,-1));this.fl(b)};l.prototype.Hy=function(c,a){var b=this.ua.T(c,1),d=this.ua.T(a,0);-1!=d&&(-1!=b?this.ug.S(b,
1,d):this.ua.S(c,0,d),this.ua.S(c,1,this.ua.T(a,1)));this.Qv&&(c=this.ua.T(a,2),b=this.ua.T(a,3),-1!=c?this.ua.S(c,3,b):this.je=b,-1!=b&&this.ua.S(b,2,c));this.bv(a)};l.prototype.ja=function(c){return this.ug.T(c,0)};l.prototype.Sj=function(c,a){this.ug.S(c,0,a)};l.prototype.lb=function(c){return this.ug.T(c,1)};l.prototype.rc=function(c){return this.ua.T(c,0)};l.prototype.Jn=function(c){return this.ja(this.rc(c))};l.prototype.clear=function(){this.ug.mj(!0);this.ua.mj(!0);this.je=-1};l.prototype.B=
function(){return 0==this.ug.size};l.prototype.TF=function(){return this.ug.size};l.prototype.qz=function(c){return this.ua.T(c,3)};return l}();g.au=N})(ja||={});(function(g){g.ta=function(){function N(){}N.Wd=function(l,c,a){c=c.xr();l=null!=l&&void 0!==l.Xd?l.Xd(0):0;a&&(c*=4,l*=1.1);return Math.max(l,c)};N.Er=function(l){return 2*Math.sqrt(2)*l};N.rN=function(l){return Math.sqrt(2)*l};N.kj=function(l,c,a){var b=new g.l;c.A(b);return N.Wd(l,b,a)};N.wE=function(l,c,a){c=c.Tg(1,0).xr();l=null!=l?
l.Xd(1):0;a&&(c*=4,l*=1.1);return Math.max(l,c)};N.mv=function(l,c){var a=new g.l;l.xc(a);l=new g.l;c.xc(l);a.Zb(l);return a};N.YN=function(l){var c=new g.l;l.xc(c);if(c.B())return null;var a=new g.du(c,8),b=-1,d=new g.l,e=!1;do for(var f=0,h=l.da();f<h;f++)if(l.Rj(f,d),b=a.Jz(f,d,b),-1==b){if(e)throw g.i.fa("internal error");l.yp(c,!1);e=!0;a.reset(c,8);break}else e=!1;while(e);return a};N.nE=function(l){var c=new g.l;l.xc(c);for(var a=new g.du(c,8),b=-1,d=l.Ga(),e=new g.l,f=!1;d.$a();)for(;d.Ha();){var h=
d.ha(),k=d.wb();h.A(e);b=a.Jz(k,e,b);if(-1==b){if(f)throw g.i.Qa();l.yp(c,!1);f=!0;a.reset(c,8);d.Zi();break}}return a};N.jj=function(l,c){var a=new g.l;l.xc(a);for(var b=new g.du(a,8),d=-1,e=new g.l,f=l.Ga(),h=!1;f.$a();)for(;f.Ha();){var k=f.ha(),m=f.wb();k.A(e);if(e.isIntersecting(c)&&(d=b.Jz(m,e,d),-1==d)){if(h)throw g.i.fa("internal error.");l.yp(a,!1);h=!0;b.reset(a,8);f.Zi();break}}return b};N.oE=function(l,c){for(var a=new g.du(c,8),b=new g.h,d=!1,e=new g.l,f=0;f<l.I();f++)if(l.D(f,b),c.contains(b)&&
(e.K(b),-1==a.vj(f,e))){if(d)throw g.i.Qa();d=!0;f=new g.l;l.yp(f,!1);a.reset(f,8);f=-1}return a};N.lR=function(l,c,a){var b=new g.l,d=new g.l;l.xc(b);c.xc(d);b.W(a,a);d.W(a,a);var e=new g.l;e.K(b);e.Ea(d);l=l.Ga();c=c.Ga();var f=new g.xC;f.aC(a);var h=!1;for(f.pK();l.$a();)for(;l.Ha();)l.ha().A(b),b.isIntersecting(e)&&(h=!0,a=new g.l,a.K(b),f.JD(l.wb(),a));f.iF();if(!h)return null;b=!1;for(f.oK();c.$a();)for(;c.Ha();)c.ha().A(d),d.isIntersecting(e)&&(b=!0,a=new g.l,a.K(d),f.ED(c.wb(),a));f.hF();
return b?f:null};N.mR=function(l,c,a,b,d){var e=l.getType(),f=c.getType(),h=new g.l,k=new g.l;l.xc(h);c.xc(k);h.W(a,a);k.W(a,a);var m=new g.l;m.K(h);m.Ea(k);var n=new g.xC;n.aC(a);var p=!1;n.pK();var r=0;for(a=l.da();r<a;r++)if(!b||1736!=e||l.Ev(r))l.Rj(r,h),h.isIntersecting(m)&&(p=!0,n.JD(r,h));n.iF();if(!p)return null;l=!1;n.oK();b=0;for(a=c.da();b<a;b++)if(!d||1736!=f||c.Ev(b))c.Rj(b,k),k.isIntersecting(m)&&(l=!0,n.ED(b,k));n.hF();return l?n:null};N.Ru=function(l,c,a){if(l!=c)for(var b=0;b<a;b++)null==
l[b]?l[b]=g.h.al(c[b]):l[b].L(c[b])};N.Jy=function(l,c,a,b){var d=0;for(b+=0;d<b;a++,d++)null==l[d]&&(l[d]=[0,0]),l[d][0]=c[a].x,l[d][1]=c[a].y};N.Iy=function(l,c,a,b){var d=c,e=0;for(c=b+c;d<c;e++,d++)null==l[d]?l[d]=g.h.construct(a[e][0],a[e][1]):l[d].ma(a[e][0],a[e][1])};N.kP=function(l,c,a){if(l!=c)for(var b=0;b<a;b++)null==l[b]?l[b]=new g.Sa(c[b]):c[b].copyTo(l[b])};N.vE=function(l,c,a,b){var d=0;null!=l&&(d=l.Xd(0),b&&!a||null==l||(d+=1.01*l.vz(0)));a&&(c*=4,d*=1.01);return Math.max(d,c)};N.ty=
function(l,c,a){return N.vE(l,c.xr(),a,!1)};N.gO=function(l,c){var a=new g.l;c.A(a);return N.ty(l,a,!0)};N.uy=function(l,c){return N.vE(l,c.xr(),!1,!0)};N.Hu=function(l,c){var a=new g.l;c.A(a);return N.uy(l,a)};N.AG=function(l,c,a,b){b*=b;var d=new g.h;d.uc(l,c);l=new g.h;l.uc(a,c);c=d.Sk();a=l.Sk();if(c<=b&&a<=b)return!0;var e=g.lc.ox(d.wi(l));return e<=b*c||e<=b*a?0<=d.Qh(l):!1};N.dK=function(l,c,a,b){for(var d=0;d<c;d++){var e=l[d].y,f=g.O.Rk(e,a,b);f!=e&&(l[d].y=f)}};return N}()})(ja||={});(function(g){var N=
function(){function d(e){this.Ya=e}d.prototype.compare=function(e,f,h){e=e.ja(h);h=this.Ya.nk(f);var k=this.Ya.nk(e);return h<k?-1:h==k?b.gq(f)&&b.Gv(e)?-1:b.gq(e)&&b.Gv(f)?1:0:1};return d}(),l=function(){function d(e){this.Ya=e}d.prototype.nr=function(e,f,h){this.Ya.GX(h,e,f)};d.prototype.$p=function(e){return this.Ya.nk(e)};return d}(),c;(function(d){d[d.initialize=0]="initialize";d[d.pIn=1]="pIn";d[d.pL=2]="pL";d[d.pR=3]="pR";d[d.pT=4]="pT";d[d.right=5]="right";d[d.left=6]="left";d[d.all=7]="all"})(c||=
{});var a=function(){function d(){this.Ya=null;this.Qi=new g.Nc;this.hi=new g.ia(0);this.sg=[0,0]}d.prototype.Xi=function(e,f){this.Qi.oa=e.oa-f;this.Qi.va=e.va+f;this.hi.resize(0);this.he=0;this.sg[0]=0};d.prototype.EB=function(e,f,h){if(e>f)throw g.i.N();this.Qi.oa=e-h;this.Qi.va=f+h;this.hi.resize(0);this.he=0;this.sg[0]=0};d.prototype.Uo=function(e,f){this.Qi.oa=e-f;this.Qi.va=e+f;this.hi.resize(0);this.he=0;this.sg[0]=0};d.prototype.next=function(){if(!this.Ya.lq)throw g.i.Hb();if(0>this.he)return-1;
for(var e=!0;e;)switch(this.sg[this.he]){case 1:e=this.FU();break;case 2:e=this.GU();break;case 3:e=this.HU();break;case 4:e=this.IU();break;case 5:e=this.GW();break;case 6:e=this.kT();break;case 7:e=this.tN();break;case 0:e=this.Gz();break;default:throw g.i.Qa();}return-1!=this.Og?this.Mp()>>1:-1};d.construct=function(e){var f=new d;f.Ya=e;f.hi.Jb(20);f.he=-1;return f};d.prototype.Gz=function(){this.Og=this.vH=this.Mi=this.Lc=-1;if(null!=this.Ya.me&&0<this.Ya.me.size)return this.sg[0]=1,this.Mi=
this.Ya.kf,!0;this.he=-1;return!1};d.prototype.FU=function(){this.Lc=this.Mi;if(-1==this.Lc)return this.Og=this.he=-1,!1;var e=this.Ya.Np(this.Lc);if(this.Qi.va<e)return e=this.Ya.mk(this.Lc),this.Mi=this.Ya.qj(this.Lc),-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=6),!0;if(e<this.Qi.oa)return e=this.Ya.mk(this.Lc),this.Mi=this.Ya.lk(this.Lc),-1!=e&&(this.ei=this.Ya.Zr(e),this.sg[++this.he]=5),!0;this.sg[this.he]=2;this.vH=this.Lc;e=this.Ya.mk(this.Lc);this.Mi=this.Ya.qj(this.Lc);-1!=e&&(this.ei=
this.Ya.kl(e),this.sg[++this.he]=7);return!0};d.prototype.GU=function(){this.Lc=this.Mi;if(-1==this.Lc)return this.sg[this.he]=3,this.Mi=this.Ya.lk(this.vH),!0;if(this.Ya.Np(this.Lc)<this.Qi.oa){var e=this.Ya.mk(this.Lc);this.Mi=this.Ya.lk(this.Lc);-1!=e&&(this.ei=this.Ya.Zr(e),this.sg[++this.he]=5);return!0}e=this.Ya.mk(this.Lc);this.Mi=this.Ya.qj(this.Lc);-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=7);e=this.Ya.lk(this.Lc);-1!=e&&this.hi.add(e);return!0};d.prototype.HU=function(){this.Lc=this.Mi;
if(-1==this.Lc)return this.sg[this.he]=4,!0;if(this.Qi.va<this.Ya.Np(this.Lc)){var e=this.Ya.mk(this.Lc);this.Mi=this.Ya.qj(this.Lc);-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=6);return!0}e=this.Ya.mk(this.Lc);this.Mi=this.Ya.lk(this.Lc);-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=7);e=this.Ya.qj(this.Lc);-1!=e&&this.hi.add(e);return!0};d.prototype.IU=function(){if(0==this.hi.size)return this.Og=this.he=-1,!1;this.Lc=this.hi.get(this.hi.size-1);this.hi.resize(this.hi.size-1);var e=this.Ya.mk(this.Lc);
-1!=e&&(this.ei=this.Ya.kl(e),this.sg[++this.he]=7);-1!=this.Ya.qj(this.Lc)&&this.hi.add(this.Ya.qj(this.Lc));-1!=this.Ya.lk(this.Lc)&&this.hi.add(this.Ya.lk(this.Lc));return!0};d.prototype.kT=function(){this.Og=this.ei;if(-1!=this.Og&&b.gq(this.Mp())&&this.Ya.nk(this.Mp())<=this.Qi.va)return this.ei=this.SF(),!1;this.he--;return!0};d.prototype.GW=function(){this.Og=this.ei;if(-1!=this.Og&&b.Gv(this.Mp())&&this.Ya.nk(this.Mp())>=this.Qi.oa)return this.ei=this.QR(),!1;this.he--;return!0};d.prototype.tN=
function(){this.Og=this.ei;if(-1!=this.Og&&b.gq(this.Mp()))return this.ei=this.SF(),!1;this.he--;return!0};d.prototype.SF=function(){return this.Ya.Sf?this.Ya.$f.lb(this.Og):this.Ya.Ti.lb(this.Og)};d.prototype.QR=function(){return this.Ya.Sf?this.Ya.$f.we(this.Og):this.Ya.Ti.we(this.Og)};d.prototype.Mp=function(){return this.Ya.Sf?this.Ya.$f.ja(this.Og):this.Ya.Ti.getData(this.Og)};return d}();g.EY=a;var b=function(){function d(e){this.Am=this.$h=this.$f=this.Ti=this.Km=this.Ej=this.me=this.Fj=null;
this.Sf=e;this.lq=this.Sv=!1}d.prototype.kr=function(){this.Nk(!0)};d.prototype.Br=function(e,f){if(!this.Sv)throw g.i.Hb();this.Fj.push(new g.Nc(e,f))};d.prototype.Fp=function(){if(!this.Sv)throw g.i.fa("invalid call");this.Sv=!1;this.lq=!0;this.Sf||(this.vS(),this.Zv=this.Fj.length)};d.prototype.vj=function(e){if(!this.Sf||!this.lq)throw g.i.N("invalid call");if(-1==this.kf){var f=this.Fj.length;if(this.iA){var h=new g.ia(0);h.Jb(2*f);this.bJ(h);this.$h.Jb(2*f);this.$h.resize(0);this.aJ(h);this.Km.resize(f,
-1);this.Km.Wj(-1,0,f);this.iA=!1}else this.Km.Wj(-1,0,f);this.kf=this.Tu()}f=this.pG(e<<1,this.kf);h=this.$f.addElement((e<<1)+1,this.xz(f));this.VJ(f,h);this.Km.set(e,f);this.Zv++};d.prototype.remove=function(e){if(!this.Sf||!this.lq)throw g.i.fa("invalid call");var f=this.Km.get(e);if(-1==f)throw g.i.N("the interval does not exist in the interval tree");this.Km.set(e,-1);this.Zv--;var h=this.xz(f),k=this.$f.ZR(h);this.$f.vd(this.wR(f),h);this.$f.vd(this.TR(f),h);e=this.$f.size(h);0==e&&(this.$f.MP(h),
this.ZJ(k,-1));this.Ej.jd(f);h=this.UF(k);var m=this.qj(k),n=this.lk(k);for(f=0;!(0<e||k==this.kf||-1!=m&&-1!=n);)k==this.qj(h)?-1!=m?(this.Ok(h,m),this.Uj(m,h),this.Ok(k,-1)):-1!=n?(this.Ok(h,n),this.Uj(n,h),this.Qk(k,-1)):this.Ok(h,-1):-1!=m?(this.Qk(h,m),this.Uj(m,h),this.Ok(k,-1)):-1!=n?(this.Qk(h,n),this.Uj(n,h),this.Qk(k,-1)):this.Qk(h,-1),this.Uj(k,-1),f++,k=h,h=this.mk(k),e=-1!=h?this.$f.size(h):0,m=this.qj(k),n=this.lk(k),h=this.UF(k)};d.prototype.reset=function(){if(!this.Sf||!this.lq)throw g.i.N("invalid call");
this.Nk(!1)};d.prototype.size=function(){return this.Zv};d.prototype.getIterator=function(){return a.construct(this)};d.prototype.bJ=function(e){for(var f=this.Fj.length,h=0;h<2*f;h++)e.add(h);this.HX(e,2*f)};d.prototype.aJ=function(e){for(var f=NaN,h=0;h<e.size;h++){var k=e.get(h),m=this.nk(k);m!=f&&(this.$h.add(k),f=m)}};d.prototype.vS=function(){var e=this.Fj.length,f=new g.ia(0);f.Jb(2*e);this.bJ(f);this.$h.Jb(2*e);this.$h.resize(0);this.aJ(f);this.Ej.De(e);this.Ti.fn(2*e);var h=g.Yc.Oh(e);h.Wj(-1,
0,e);this.kf=this.Tu();for(e=0;e<f.size;e++){var k=f.get(e),m=h.get(k>>1);-1!=m?this.VJ(m,this.Ti.addElement(this.xz(m),k)):(m=this.pG(k,this.kf),h.set(k>>1,m))}};d.prototype.pG=function(e,f){var h=f,k=f,m=-1,n=0,p=this.$h.size-1,r=0,t=e>>1,x=NaN,K=NaN,ca=!0,ha=this.DR(t);for(t=this.AR(t);ca;){n<p?(r=n+g.O.truncate((p-n)/2),-1==this.gz(h)&&this.FJ(h,this.$h.get(r),this.$h.get(r+1))):-1==this.gz(h)&&this.FJ(h,this.$h.get(n),this.$h.get(n));var da=this.Np(h);if(t<da)-1!=f&&(f==h?(k=h,x=da,f=this.qj(h),
K=-1!=f?this.Np(f):NaN):K>da&&(da<x?this.Ok(k,h):this.Qk(k,h),this.Qk(h,f),this.Sf&&(this.Uj(h,k),this.Uj(f,h)),k=h,x=da,f=-1,K=NaN)),p=this.xR(h),-1==p&&(p=this.Tu(),this.dX(h,p)),h=p,p=r;else if(ha>da)-1!=f&&(f==h?(k=h,x=da,f=this.lk(h),K=-1!=f?this.Np(f):NaN):K<da&&(da<x?this.Ok(k,h):this.Qk(k,h),this.Ok(h,f),this.Sf&&(this.Uj(h,k),this.Uj(f,h)),k=h,x=da,f=-1,K=NaN)),n=this.UR(h),-1==n&&(n=this.Tu(),this.oX(h,n)),h=n,n=r+1;else{ca=this.mk(h);-1==ca&&(ca=this.zP(h),this.ZJ(h,ca));var ka=this.fN(ca,
e);m=this.xP();this.qX(m,ca);this.cX(m,ka);h!=f&&(da<x?this.Ok(k,h):this.Qk(k,h),this.Sf&&this.Uj(h,k),-1!=f&&(K<da?this.Ok(h,f):this.Qk(h,f),this.Sf&&this.Uj(f,h)));ca=!1}}return m};d.prototype.Tu=function(){return this.me.Ce()};d.prototype.zP=function(e){return this.Sf?this.$f.Pr(e):this.Ti.Ph(e)};d.prototype.xP=function(){return this.Ej.Ce()};d.prototype.Nk=function(e){e?(this.Sv=this.iA=!0,this.lq=!1,null==this.$h?this.$h=g.Yc.Oh(0):this.$h.resize(0),null==this.Fj?this.Fj=[]:this.Fj.length=0):
this.iA=!1;this.Sf?null==this.Km?(this.Km=g.Yc.Oh(0),this.$f=new g.Yj,this.$f.Vo(new N(this))):this.$f.clear():null==this.Ti?this.Ti=new g.jp:this.Ti.clear();null==this.me?(this.Ej=new g.$c(3),this.me=new g.$c(this.Sf?8:7)):(this.Ej.mj(!1),this.me.mj(!1));this.kf=-1;this.Zv=0};d.prototype.FJ=function(e,f,h){this.XW(e,f);this.YW(e,h)};d.prototype.Np=function(e){var f=this.gz(e);if(-1==f)return NaN;f=this.nk(f);e=this.nk(this.gR(e));return f==e?f:.5*(f+e)};d.prototype.XW=function(e,f){this.me.S(e,0,
f)};d.prototype.YW=function(e,f){this.me.S(e,1,f)};d.prototype.dX=function(e,f){this.me.S(e,3,f)};d.prototype.oX=function(e,f){this.me.S(e,4,f)};d.prototype.ZJ=function(e,f){this.me.S(e,2,f)};d.prototype.Ok=function(e,f){this.me.S(e,5,f)};d.prototype.Qk=function(e,f){this.me.S(e,6,f)};d.prototype.Uj=function(e,f){this.me.S(e,7,f)};d.prototype.qX=function(e,f){this.Ej.S(e,0,f)};d.prototype.fN=function(e,f){return this.Sf?this.$f.addElement(f,e):this.Ti.addElement(e,f)};d.prototype.cX=function(e,f){this.Ej.S(e,
1,f)};d.prototype.VJ=function(e,f){this.Ej.S(e,2,f)};d.prototype.kl=function(e){return this.Sf?this.$f.rc(e):this.Ti.rc(e)};d.prototype.Zr=function(e){return this.Sf?this.$f.Fc(e):this.Ti.Fc(e)};d.gq=function(e){return 0==(e&1)};d.Gv=function(e){return 1==(e&1)};d.prototype.gz=function(e){return this.me.T(e,0)};d.prototype.gR=function(e){return this.me.T(e,1)};d.prototype.mk=function(e){return this.me.T(e,2)};d.prototype.xR=function(e){return this.me.T(e,3)};d.prototype.UR=function(e){return this.me.T(e,
4)};d.prototype.qj=function(e){return this.me.T(e,5)};d.prototype.lk=function(e){return this.me.T(e,6)};d.prototype.UF=function(e){return this.me.T(e,7)};d.prototype.xz=function(e){return this.Ej.T(e,0)};d.prototype.wR=function(e){return this.Ej.T(e,1)};d.prototype.TR=function(e){return this.Ej.T(e,2)};d.prototype.DR=function(e){return this.Fj[e].oa};d.prototype.AR=function(e){return this.Fj[e].va};d.prototype.HX=function(e,f){null==this.Am&&(this.Am=new g.Xt);var h=new l(this);this.Am.sort(e,0,f,
h)};d.prototype.GX=function(e,f,h){var k=this;e.Vd(f,h,function(m,n){var p=k.nk(m),r=k.nk(n);return p<r||p==r&&d.gq(m)&&d.Gv(n)?-1:1})};d.prototype.nk=function(e){var f=this.Fj[e>>1];return d.gq(e)?f.oa:f.va};return d}();g.sr=b})(ja||={});(function(g){var N=function(){function l(c){if(null==c)throw g.i.fa("Invalid arguement");this.hf=c;var a=c.nR();a.hS()?c.ef.IG()?this.lo=g.si.PannableFold:this.lo=g.si.Clip:this.lo=g.si.DontClip;a.iS()?c.Yf.IG()?this.Qm=g.si.PannableFold:this.Qm=g.si.Clip:this.Qm=
g.si.DontClip;this.Bm=a.Jr;this.mH=a.Vu;c=this.hf.sH;this.aH=c.hs(2147483648);this.Uv=c.hs(1073741824)}l.zh=function(c,a,b){return a.ww.zh(c,b)};l.Rt=function(c,a,b,d){return c.ww.Rt(a,b,d)};l.Qt=function(c,a,b,d){b=0>b?a.length:b;c=c.ww.Rt(a,b,d);if(c==b)return c;for(var e=a=0;e<b;e++){var f=d[e];f.isNaN()||(a<e&&d[a].L(f),a++)}for(;a<b;a++)d[a].Rc();return c};l.transform=function(c,a,b,d,e){if(c.isIdentity())return g.ta.kP(d,a,b),b;for(var f=[],h=0,k=0;k<b;){for(var m=Math.min(f.length,b-k),n=k,
p=0;n<m;n++,p++)null==f[p]?f[p]=a[n].D():a[n].D(f[p]);var r=e?l.Qt(c,f,m,f):l.Rt(c,f,m,f);for(p=n=0;n<r;n++,p++)null==d[k]&&(d[k]=new g.Sa(a[k])),d[k].Cb(f[p]);k+=m;h+=r}return h};l.prototype.Rt=function(c,a,b){if(this.hf.isIdentity())return c!=b&&g.ta.Ru(b,c,a),a;var d=this.hf.ef,e=this.hf.Yf,f=d.Sb(),h=e.Sb();if(0==f&&f===h){var k=d.Qp();e=e.Qp();e=k/e;k=new g.Dd;k.setScale(e,e);k.eY(c,a,b);return a}k=g.O.Fu(Math.min(a,64));if(3==f){var m=d.Ji;d=m.fk();f=d.Sb();b!=c&&g.ta.Ru(b,c,a);g.zb.$k(m,b,
a,!0);m.Qt(g.bm.forward,b,a);g.zb.Zk(m,b,a,!0)}if(3==f||3===h)throw g.i.fa("image: transform_in_place_");if(2==f)this.lo==g.si.Clip?(b!=c&&g.ta.Ru(b,c,a),c=d.ml(),g.zb.OS(c,d,b,a)):(b!=c&&g.ta.Ru(b,c,a),d.Wc()&&(f=d.Xd(0),m=d.Oe(),g.zb.EX(b,a,m,f),g.zb.qF(b,a,d,0))),g.zb.IL(d,b,a,k);else for(f=d.Xd(0),m=d.Oe(),d=0;d<a;d++)g.zb.FX(c[d],m,f,b[d]);g.zb.GL(this.hf,b,a,k);c=0;(h=2==h)?c=e.zi():isNaN(this.Bm)||(c=this.Bm);h&&this.Qm!=g.si.Clip||g.zb.qF(b,a,e.sc(),c);h&&(g.zb.yG(b,a,e,this.Qm),g.zb.HL(e,
b,a,k));c=a;for(d=0;d<a;++d)b[d].isNaN()&&c--;return c};l.prototype.zh=function(c,a){if(this.hf.isIdentity()||c.B())return c;if(33==c.getType())return this.XI(c);var b=this.hf.ef,d=this.hf.Yf,e=b.Sb(),f=d.Sb();if(0==e&&e==f)return a=b.Qp(),d=d.Qp(),a/=d,d=new g.Dd,d.setScale(a,a),c=g.aa.jg(c),c.Oc(d),c;switch(c.getType()){case 1607:case 1736:c=this.VI(c,a);break;case 550:c=this.fW(c,a);break;case 197:c=this.eW(c,a);break;default:throw g.i.fa("");}return c};l.prototype.XI=function(c){var a=c.D(),b=
[];b[0]=a;this.Rt(b,1,b);c=new g.Sa(c);c.Cb(b[0]);return c};l.prototype.VI=function(c,a){if(c.tm())throw g.i.fa("curves not supported");var b=c.getType();if(1736==b)return this.gW(c,a);if(1607==b)return this.hW(c,a);throw g.i.fa("projectMultiPath");};l.prototype.gW=function(c,a){var b=this.hf.ef,d=this.hf.Yf,e=b.Sb(),f=d.Sb(),h=g.O.Fu(Math.min(c.I(),64)),k=g.Da.jg(c);3==e&&(c=b.Ji,b=c.fk(),e=b.Sb(),k=c.$k(k,!0),this.wp(c,g.bm.forward,k),k=c.Zk(k,!0));c=null;3==f&&(c=d.Ji,d=c.fk(),f=d.Sb());var m=
2==e,n=2==f,p=n?d.sc():d,r=!n&&!this.Uv;f=!1;var t=k;if(m){if(t=g.zb.UI(t,b,this.lo,a),t.B())return t}else{k=new g.l;t.xc(k);e=b.Oe();if(k.G<e.G||k.H>e.H){var x=g.l.construct(k.v-1,e.G,k.C+1,e.H);t=g.ri.Nu(t,x,b,NaN,0,a);if(t.B())return t}k.R()>2*e.R()&&(t=g.zb.Hp(t,-2*e.R(),2*e.R(),b,!0,0,!0,a))}k=this.mH;(e=!isNaN(k))&&(t=g.Xl.local().V(t,k,a));x=n?d.kk():null;var K=NaN;m&&(K=b.zi());var ca=null!=d.Wr();if(this.aH)m&&(g.zb.ur(b,K,t,h),e&&(m=b.hh(),K=b.sc().hh(),k*=K/m)),g.zb.tr(this.hf,t,r,h),e&&
(m=b.sc().hh(),K=d.sc().hh(),k*=K/m),b=t;else{var ha=new g.Ta(t.description);ha.DD(t);m&&(g.zb.ur(b,K,ha,h),e&&(m=b.hh(),K=b.sc().hh(),k*=K/m));g.zb.tr(this.hf,ha,r,h);e&&(m=b.sc().pm(),K=d.sc().pm(),k*=K/m);r=NaN;n?(x=d.kk(),r=d.zi()):isNaN(this.Bm)||(r=this.Bm);m=l.tv(b)|l.tv(d);K=10*p.Xd(0);this.Uv&&(m=3,K=0);b=g.zb.UQ(t,b,ha,p,r,a,m,K)}ca&&(b=g.zb.XD(b,d,a));n&&(f||(n=p.Oe().R(),b.Tg(0,0).R()>=n-p.Xd(0)&&(p=x.getNorthPoleLocation(),n=x.getSouthPoleLocation(),t=x.getNorthPoleGeometry(),x=x.getSouthPoleGeometry(),
r=0,t==g.Cg.PE_POLE_POINT&&p!=g.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(r=1),x==g.Cg.PE_POLE_POINT&&n!=g.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(r|=2),0!==r&&(f=!0))),b=g.zb.Mz(b,d,this.Qm,a),e&&(b=g.Xl.local().V(b,k,a)),g.zb.Lx(d,b,h));if(b.B())return b;f&&(b=g.Yl.local().V(b,d,!1,a));null!=c&&(b=c.Zk(b,!1),this.wp(c,g.bm.reverse,b),b=c.$k(b,!1));return b};l.tv=function(c){if(2!=c.Sb())return 0;var a=0,b=c.kk();c=b.getNorthPoleLocation();var d=b.getSouthPoleLocation(),e=b.getNorthPoleGeometry();b=b.getSouthPoleGeometry();
e==g.Cg.PE_POLE_POINT&&c!=g.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(a=1);b==g.Cg.PE_POLE_POINT&&d!=g.Cg.PE_POLE_OUTSIDE_BOUNDARY&&(a|=2);return a};l.prototype.hW=function(c,a){var b=this.hf.ef,d=this.hf.Yf,e=b.Sb(),f=d.Sb(),h=g.O.Fu(Math.min(c.I(),64)),k=g.Ta.jg(c);3==e&&(c=b.Ji,b=c.fk(),e=b.Sb(),k=c.$k(k,!0),this.wp(c,g.bm.forward,k),k=c.Zk(k,!0));c=null;3==f&&(c=d.Ji,d=c.fk(),f=d.Sb());var m=2==e;e=(f=2==f)?d.sc():d;var n=!f&&!this.Uv;if(m){if(k=g.zb.UI(k,b,this.lo,a),k.B())return k}else{var p=new g.l;k.xc(p);
var r=b.Oe();if(p.G<r.G||p.H>r.H)if(p=g.l.construct(p.v-1,r.G,p.C+1,r.H),k=g.ri.Nu(k,p,b,NaN,0,a),k.B())return k}var t=NaN;m&&(t=b.zi());p=null!=d.Wr();r=this.mH;var x=!isNaN(r);x&&(k=g.Xl.local().V(k,r,a));if(this.aH)m&&g.zb.ur(b,t,k,h),x&&(m=b.hh(),t=b.sc().hh(),r*=t/m),g.zb.tr(this.hf,k,n,h),x&&(m=b.sc().hh(),t=d.sc().hh(),r*=t/m),b=k;else{var K=new g.Ta(k.description);K.DD(k);m&&(g.zb.ur(b,t,K,h),x&&(m=b.hh(),t=b.sc().hh(),r*=t/m));g.zb.tr(this.hf,K,n,h);x&&(m=b.sc().hh(),t=d.sc().hh(),r*=t/m);
n=NaN;f?n=d.zi():isNaN(this.Bm)||(n=this.Bm);m=l.tv(b)|l.tv(d);t=10*e.Xd(0);this.Uv&&(m=3,t=0);b=g.zb.VQ(k,b,K,e,n,a,m,t)}p&&(b=g.zb.XD(b,d,a));f&&(b=g.zb.Mz(b,d,this.Qm,a),x&&(b=g.Xl.local().V(b,r,a)),g.zb.Lx(d,b,h));if(b.B())return b;null!=c&&(b=c.Zk(b,!1),this.wp(c,g.bm.reverse,b),b=c.$k(b,!1));return b};l.prototype.eW=function(c,a){var b=(c.ca()+c.R())/400;0!=b?(b=g.Xl.local().V(c,b,a),b=this.VI(b,a),a=c.Ia(),b.bn(a)):(a=new g.Sa(c.Ip()),b=this.XI(a),a=c.Ia(),b.B()?a.Oa():(c.copyTo(a),c=b.D(),
a.K(c.x,c.y,c.x,c.y)));return a};l.prototype.fW=function(c,a){c=g.aa.jg(c);var b=this.hf.ef,d=this.hf.Yf,e=b.Sb(),f=d.Sb(),h=g.O.Fu(Math.min(c.I(),64));if(3==e){var k=b.Ji;b=k.fk();e=b.Sb();c=k.Zk(c,!0);this.wp(k,g.bm.forward,c);c=k.$k(c,!0)}if(2==e){this.lo==g.si.Clip?c=g.Xj.local().V(c,b.ml(),b,a):b.Wc()&&(e=new g.l,c.xc(e),b.Oe().contains(e)||(this.lo==g.si.PannableFold&&(c=g.zb.lj(c,b)),g.zb.Jt(c,b.Oe(),b.Xd(0),!0),c=g.zb.Fn(c,b,0,!0,0,a)));if(c.B())return c;g.zb.ur(b,0,c,h)}else g.zb.Jt(c,b.Oe(),
b.Xd(0),!0);g.zb.tr(this.hf,c,!1,h);b=0;e=!1;k=null;3==f&&(e=!0,k=d.Ji,d=k.fk(),f=d.Sb());(f=2==f)?b=d.zi():isNaN(this.Bm)||(b=this.Bm);f&&this.Qm!=g.si.Clip||(c=g.zb.Fn(c,d.sc(),b,!1,0,a));if(f&&(c=g.zb.Mz(c,d,this.Qm,a),g.zb.Lx(d,c,h),c.B()))return c;e&&(c=k.Zk(c,!0),this.wp(k,g.bm.reverse,c),c=k.$k(c,!0));return c};l.prototype.wp=function(c,a,b){var d=b.I();if(0!=d){for(var e=b.ub(0),f=g.O.lg(200,0),h=[],k=0;k<d;){var m=Math.min(100,d-k);e.Vw(2*k,2*m,f,2,!0);for(var n=0;n<m;++n)h[n]=g.h.construct(f[2*
k],f[2*k+1]);c.Qt(a,h,m);k+=m}b.Pc(1993)}};l.Uy=function(c,a,b){if(null==c||null==a||!a.Wc())throw g.i.fa("Invalid Arguement");if(c.B())return c;var d=c.getType();197==d?(d=new g.Da(c.description),d.ad(c,!1)):g.aa.yd(d)?(d=new g.Ta(c.description),d.oc(c,!0)):d=c;d=g.zb.lj(d,a);return d.B()?d:g.zb.Fn(d,a,0,d!=c,0,b)};l.nj=function(c,a,b,d){if(null==c||null==a||!a.Wc())throw g.i.fa("Invalid Arguement");if(c.B())return c;var e=c.getType();if(g.aa.Hc(e)){c=g.zb.lj(c,a);e=new g.l;c.A(e);for(var f=g.ta.ty(a,
e,!1),h=a.gh(),k=Math.floor((e.v-h.v)/h.R())*h.R()+h.v;k<e.C;)k>e.v+f&&k<e.C-f&&(c=g.zb.uS(c,a,b,k)),k+=h.R()}else{if(197==e)return e=new g.Da(c.description),e.ad(c,!1),l.nj(e,a,b,d);if(g.aa.yd(e))return e=new g.Ta(c.description),e.oc(c,!0),l.nj(e,a,b,d)}return l.Uy(c,a,d)};return l}();g.bu=N})(ja||={});(function(g){var N=function(l){function c(a,b,d,e){var f=l.call(this)||this;void 0===a?f.description=g.ee.og():void 0===d?f.description=a:(f.description=g.ee.og(),f.ZB(a,b),f.Ql(d,e));return f}qa(c,
l);c.prototype.getType=function(){return 322};c.prototype.Qb=function(){var a=this.sa-this.pa,b=this.na-this.la;return Math.sqrt(a*a+b*b)};c.prototype.Bi=function(a){var b=this.sa-this.pa,d=this.na-this.la;return Math.sqrt(b*b+d*d)<=a};c.prototype.Pn=function(){return!1};c.prototype.kg=function(){var a=new g.h;a.uc(this.wc(),this.ac());return a};c.cP=function(a,b){return new c(a.x,a.y,b.x,b.y)};c.prototype.bn=function(a){a.Oa();a.Nf(this.description);var b=new g.l;this.A(b);a.Xo(b);b=1;for(var d=
this.description.Aa;b<d;b++)for(var e=this.description.kd(b),f=g.ra.Va(e);b<f;b++){var h=this.Tg(e,0);a.setInterval(e,0,h)}};c.prototype.A=function(a){a.K(this.sa,this.na,this.pa,this.la);a.normalize()};c.prototype.Qo=function(a){a.Oa();a.Zb(this.sa,this.na,this.Od(0,1,0));a.Zb(this.pa,this.la,this.Od(1,1,0))};c.prototype.Oc=function(a){if(a instanceof g.Dd){this.vc();var b=new g.h;b.x=this.sa;b.y=this.na;a.Eh(b,b);this.sa=b.x;this.na=b.y;b.x=this.pa;b.y=this.la;a.Eh(b,b);this.pa=b.x;this.la=b.y}else this.vc(),
b=new g.Nd,b.x=this.sa,b.y=this.na,b.z=this.Od(0,1,0),b=a.fp(b),this.sa=b.x,this.na=b.y,this.tn(0,1,0,b.z),b.x=this.pa,b.y=this.la,b.z=this.Od(1,1,0),b=a.fp(b),this.pa=b.x,this.la=b.y,this.tn(1,1,0,b.z)};c.prototype.Ia=function(){return new c(this.description)};c.prototype.Tx=function(a,b){return(this.pa-a-(this.sa-a))*(this.la-b+(this.na-b))*.5};c.prototype.vx=function(a){return a*this.Qb()};c.prototype.NG=function(a){return a/this.Qb()};c.prototype.DF=function(a){return g.lc.hq(this.sa,this.pa,
a)};c.prototype.fR=function(a){return g.lc.hq(this.na,this.la,a)};c.prototype.dl=function(a,b){var d=new g.ig;this.ah(a,b,d);return d.get()};c.prototype.ah=function(a,b,d){if(null==d)throw g.i.N();d.Or();d=d.get();d.Nf(this.description);var e=new g.h;this.hc(a,e);d.ZB(e.x,e.y);this.hc(b,e);d.Ql(e.x,e.y);e=1;for(var f=this.description.Aa;e<f;e++)for(var h=this.description.Ed(e),k=g.ra.Va(h),m=0;m<k;m++){var n=this.Uc(a,h,m);d.YB(h,m,n);n=this.Uc(b,h,m);d.OB(h,m,n)}};c.prototype.Uc=function(a,b,d){if(0==
b)return 0==d?this.hc(a).x:this.hc(a).y;switch(g.ra.lz(b)){case 0:return.5>a?this.wv(b,d):this.gv(b,d);case 1:var e=this.wv(b,d);b=this.gv(b,d);return g.lc.hq(e,b,a);case 2:throw g.i.fa("not implemented");}throw g.i.Qa();};c.prototype.fe=function(a,b){var d=this.pa-this.sa,e=this.la-this.na,f=d*d+e*e;if(0==f)return.5;a=((a.x-this.sa)*d+(a.y-this.na)*e)/f;b||(0>a?a=0:1<a&&(a=1));return a};c.prototype.cq=function(a,b,d,e){if(a){a=this.la-this.na;if(0==a)return b==this.la?-1:0;b=(b-this.na)/a;if(0>b||
1<b)return 0;null!=d&&(d[0]=this.DF(b))}else{a=this.pa-this.sa;if(0==a)return b==this.pa?-1:0;b=(b-this.sa)/a;if(0>b||1<b)return 0;null!=d&&(d[0]=this.fR(b))}null!=e&&(e[0]=b);return 1};c.prototype.Pe=function(a,b){var d=this.la-this.na;if(0==d)return a==this.la?b:NaN;a=(a-this.na)/d;b=this.DF(a);1==a&&(b=this.pa);return b};c.prototype.ru=function(a,b,d){return 0<=this.rp(a.x,a.y,b,d)};c.prototype.vi=function(a,b,d){return 0<=this.rp(a,b,d,!0)};c.prototype.qs=function(a,b){return this.ru(a,b,!1)};
c.prototype.rI=function(){if(this.la<this.na||this.la==this.na&&this.pa<this.sa){var a=this.sa;this.sa=this.pa;this.pa=a;a=this.na;this.na=this.la;this.la=a;a=0;for(var b=this.description.Oq-2;a<b;a++){var d=this.ka[a];this.ka[a]=this.ka[a+b];this.ka[a+b]=d}}};c.prototype.uu=function(a,b){b=g.h.construct(a,b);b.sub(this.ac());var d=new g.h;d.uc(this.wc(),this.ac());a=d.wi(b);b=8.881784197001252E-16*(Math.abs(d.x*b.y)+Math.abs(d.y*b.x));return a>b?-1:a<-b?1:0};c.prototype.rp=function(a,b,d,e){var f=
this.sa,h=this.na,k=a-f,m=b-h;k=Math.sqrt(k*k+m*m);if(k<=Math.max(d,6.661338147750939E-16*k))return e&&0==k?NaN:0;k=a-this.pa;m=b-this.la;k=Math.sqrt(k*k+m*m);if(k<=Math.max(d,6.661338147750939E-16*k))return e&&0==k?NaN:1;k=this.pa-this.sa;m=this.la-this.na;e=Math.sqrt(k*k+m*m);if(0<e){var n=1/e;k*=n;m*=n;var p=a-f,r=b-h,t=p*k+r*m,x=1.7763568394002505E-15*(Math.abs(p*k)+Math.abs(r*m)),K=k;k=-m;m=K;x=Math.max(d,x);if(t<-x||t>e+x)return NaN;if(Math.abs(p*k+r*m)<=Math.max(d,1.7763568394002505E-15*(Math.abs(p*
k)+Math.abs(r*m)))&&(k=g.O.Rk(t*n,0,1),.5>=k?(m=this.sa+(this.pa-this.sa)*k,e=this.na+(this.la-this.na)*k):(m=this.pa-(this.pa-this.sa)*(1-k),e=this.la-(this.la-this.na)*(1-k)),g.h.Oy(m,e,a,b)<=d)){if(.5>k){if(g.h.Oy(m,e,f,h)<=d)return 0}else if(g.h.Oy(m,e,this.pa,this.la)<=d)return 1;return k}}return NaN};c.prototype.Nb=function(a){return null==a?!1:a==this?!0:a.constructor!==this.constructor?!1:this.FM(a)};c.prototype.rD=function(a,b,d){var e=d?this.sa:this.pa;d=d?this.na:this.la;var f=new g.h;
f.x=a.pa-e;f.y=a.la-d;return b.Qh(f)>6.661338147750939E-16*b.fD(f)?(f.x=a.sa-e,f.y=a.na-d,b.Qh(f)<=6.661338147750939E-16*b.fD(f)):!0};c.prototype.qD=function(a){var b=new g.h;b.x=this.pa-this.sa;b.y=this.la-this.na;if(!this.rD(a,b,!1))return!1;b.Sq();return this.rD(a,b,!0)?!0:!1};c.NM=function(a,b){var d=a.uu(b.sa,b.na),e=a.uu(b.pa,b.la);if(0>d&&0>e||0<d&&0<e)return!1;d=b.uu(a.sa,a.na);e=b.uu(a.pa,a.la);if(0>d&&0>e||0<d&&0<e)return!1;d=a.Qb();e=b.Qb();return d>e?a.qD(b):b.qD(a)};c.LM=function(a,b,
d){var e=g.h.construct(NaN,NaN),f=a.pa-a.sa,h=a.la-a.na,k=b.pa-b.sa,m=b.la-b.na,n=k*h-f*m;if(0==n)return e;var p=8.881784197001252E-16*(Math.abs(k*h)+Math.abs(f*m)),r=b.sa-a.sa,t=b.na-a.na,x=k*t-r*m,K=x/n,ca=Math.abs(n);k=(8.881784197001252E-16*(Math.abs(k*t)+Math.abs(r*m))*ca+p*Math.abs(x))/(n*n)+2.220446049250313E-16*Math.abs(K);if(K<-k||K>1+k)return e;m=f*t-r*h;k=m/n;f=(8.881784197001252E-16*(Math.abs(f*t)+Math.abs(r*h))*ca+p*Math.abs(m))/(n*n)+2.220446049250313E-16*Math.abs(k);if(k<-f||k>1+f)return e;
K=g.O.Rk(K,0,1);f=g.O.Rk(k,0,1);h=a.hc(K);n=b.hc(f);p=new g.h;p.uc(h,n);if(p.length()>d&&(p.add(h,n),p.scale(.5),K=a.fe(p,!1),f=b.fe(p,!1),a=a.hc(K),b=b.hc(f),a.sub(b),a.length()>d))return e;e.ma(K,f);return e};c.OM=function(a,b,d,e){var f=0;if(a.sa==b.sa&&a.na==b.na||a.sa==b.pa&&a.na==b.la)if(f++,!e)return 1;if(a.pa==b.sa&&a.la==b.na||a.pa==b.pa&&a.la==b.la){f++;if(2==f)return 2;if(!e)return 1}return b.vi(a.sa,a.na,d)||b.vi(a.pa,a.la,d)||a.vi(b.sa,b.na,d)||a.vi(b.pa,b.la,d)?1:e&&0!=f?0:0==c.NM(a,
b)?0:1};c.Zx=function(a,b,d,e,f,h){var k=0,m=a.rp(b.sa,b.na,h,!1),n=a.rp(b.pa,b.la,h,!1),p=b.rp(a.sa,a.na,h,!1),r=b.rp(a.pa,a.la,h,!1);isNaN(m)||(null!=e&&(e[k]=m),null!=f&&(f[k]=0),null!=d&&(d[k]=g.h.construct(b.sa,b.na)),k++);isNaN(n)||(null!=e&&(e[k]=n),null!=f&&(f[k]=1),null!=d&&(d[k]=g.h.construct(b.pa,b.la)),k++);2==k||isNaN(p)||0==m&&0==p||0==n&&1==p||(null!=e&&(e[k]=0),null!=f&&(f[k]=p),null!=d&&(d[k]=g.h.construct(a.sa,a.na)),k++);2==k||isNaN(r)||1==m&&0==r||1==n&&1==r||(null!=e&&(e[k]=1),
null!=f&&(f[k]=r),null!=d&&(d[k]=g.h.construct(b.pa,b.la)),k++);if(0<k)return 2==k&&null!=e&&e[0]>e[1]&&(a=e[0],e[0]=e[1],e[1]=a,null!=f&&(e=f[0],f[0]=f[1],f[1]=e),null!=d&&(f=g.h.construct(d[0].x,d[0].y),d[0]=d[1],d[1]=f)),k;k=c.LM(a,b,h);if(isNaN(k.x))return 0;null!=d&&(d[0]=a.hc(k.x));null!=e&&(e[0]=k.x);null!=f&&(f[0]=k.y);return 1};c.prototype.eG=function(){return 0};c.prototype.op=function(){};c.prototype.toString=function(){return"Line: ["+this.sa.toString()+", "+this.na.toString()+", "+this.pa.toString()+
", "+this.la.toString()+"]"};return c}(g.SC);g.yb=N})(ja||={});(function(g){var N=function(){function l(){this.Jm=[];this.ya=-1}l.prototype.La=function(){return this.ya};l.prototype.next=function(){if(null!=this.Jm&&0!=this.Jm.length){this.ya++;var c=this.Jm[0];this.Jm=1>=this.Jm.length?[]:this.Jm.slice(1);return c}return this.Jm=null};l.prototype.ZX=function(c){this.Jm.push(c)};l.prototype.qe=function(){};return l}();g.gL=N})(ja||={});(function(g){(function(l){l[l.enumFillRuleOddEven=0]="enumFillRuleOddEven";
l[l.enumFillRuleWinding=1]="enumFillRuleWinding"})(g.SL||(g.SL={}));var N=function(l){function c(a,b){var d=l.call(this)||this;d.xf=!1;d.Eq=null;d.sq=0;d.rq=0;d.Aj=null;d.Mg=!1;d.nb=null;d.mb=null;d.Ve=null;d.Lj=null;d.Sd=null;d.tq=0;d.gb=0;d.xq=0;if(void 0===b)d.xf=a,d.Mg=!1,d.tq=0,d.sq=0,d.rq=0,d.wa=0,d.description=g.ee.og();else{if(null==b)throw g.i.N();d.xf=a;d.Mg=!1;d.tq=0;d.sq=0;d.rq=0;d.wa=0;d.description=b}d.Aj=null;d.gb=0;return d}qa(c,l);c.prototype.tm=function(){return 0<this.tq};c.prototype.Yx=
function(){this.vc();null==this.Eq?this.Eq=new g.Sa(this.description):this.Eq.Nf(this.description)};c.prototype.sx=function(a,b){var d=new g.h;d.x=a;d.y=b;this.Lt(d)};c.prototype.Lt=function(a){this.Yx();this.Eq.Cb(a);this.Mg=!0};c.prototype.nf=function(a){if(a.B())throw g.i.N();this.Jl(a.description);this.Yx();a.copyTo(this.Eq);this.Mg=!0};c.prototype.Sx=function(){var a=1;this.Mg&&(this.Yx(),null==this.nb?(this.nb=g.Yc.Oh(2),this.nb.write(0,0),this.mb=g.Yc.Mr(2,0)):(this.nb.resize(this.nb.size+
1,0),this.mb.resize(this.mb.size+1,0)),this.xf&&this.mb.write(this.mb.size-2,1),a++);var b=this.wa;this.nb.write(this.nb.size-1,this.wa+a);this.dm(b+a);this.mb.write(this.nb.size-1,0);this.Mg&&(this.Ht(b,this.Eq),this.Mg=!1)};c.prototype.yj=function(a,b){this.Sx();this.Cb(this.wa-1,a,b)};c.prototype.Ci=function(a){this.Sx();this.Cb(this.wa-1,a)};c.prototype.lineTo=function(a){this.Sx();this.Ht(this.wa-1,a)};c.prototype.CU=function(a){this.vc();if(this.xf)throw g.i.Qa();var b=this.da();if(a>b)throw g.i.Qa();
if(this.dc(a)){if(null==this.mb)throw g.i.Qa();var d=this.wa,e=this.Ba(a),f=this.Vc(a);this.dm(this.wa+1);this.mc();for(var h=0,k=this.description.Aa;h<k;h++)if(null!=this.za[h]){var m=g.ra.Va(this.description.Ed(h));this.za[h].Mn(m*f,this.za[h],m*e,m,!0,1,m*d)}for(;b>a;b--)d=this.nb.read(b),this.nb.write(b,d+1);this.mb.KE(a,1)}};c.prototype.Ap=function(){this.wx();if(void 0===a){this.Mg=!1;var a=this.da()-1}var b=this.mb.read(a);this.mb.write(a,b|1);null!=this.Ve&&(a=this.Vc(a)-1,this.Ve.write(a,
1),this.Lj.write(a,-1))};c.prototype.dc=function(a){return 0!=(this.mb.read(a)&1)};c.prototype.Nn=function(a){if(this.dc(a))return!0;var b=this.Ba(a);a=this.Vc(a)-1;if(b>a)return!1;b=this.Na(b);a=this.Na(a);return b.qb(a)};c.prototype.yv=function(a){return 0!=(this.mb.read(a)&2)};c.prototype.oc=function(a,b){this.Jl(a.description);if(322==a.getType()){var d=new g.Sa;if(b||this.B())a.To(d),this.nf(d);a.Po(d);this.lineTo(d)}else throw g.i.Qa();};c.prototype.tp=function(a){var b=0==this.wa;this.sx(a.v,
a.G);this.yj(a.v,a.H);this.yj(a.C,a.H);this.yj(a.C,a.G);this.Ap();this.Mg=!1;b&&this.Lf(256,!1)};c.prototype.ad=function(a,b){if(!a.B()){for(var d=0==this.wa,e=new g.Sa(this.description),f=0;4>f;f++)a.Hf(b?4-f-1:f,e),0==f?this.nf(e):this.lineTo(e);this.Ap();this.Mg=!1;d&&!b&&this.Lf(256,!1)}};c.prototype.add=function(a,b){for(var d=0;d<a.da();d++)this.addPath(a,d,!b)};c.prototype.addPath=function(a,b,d){this.vf(-1,a,b,d)};c.prototype.Yk=function(a,b){this.Hz(a,b)};c.prototype.Dr=function(a,b,d,e,
f){f||0!=this.da()||(f=!0);0>b&&(b=a.da()-1);if(b>=a.da()||0>d||0>e||e>a.rv(b))throw g.i.fa("index out of bounds");if(0!=e){var h=a.dc(b)&&d+e==a.rv(b);if(!h||1!=e){this.Mg=!1;this.Jl(a.description);d=a.Ba(b)+d+1;f&&(e++,d--);h&&e--;h=this.wa;this.dm(this.wa+e);this.mc();if(f){if(0==e)return;this.nb.add(this.wa);f=a.mb.read(b);f&=-5;this.xf&&(f|=1);this.mb.write(this.mb.size-1,f);this.mb.add(0)}else this.nb.write(this.mb.size-1,this.wa);f=0;for(var k=this.description.Aa;f<k;f++){var m=this.description.kd(f),
n=g.ra.Va(m),p=a.description.Pf(m);0>p||null==a.za[p]?this.za[f].Ln(n*h,g.ra.se(m),e*n,n*h):this.za[f].Mn(n*h,a.za[p],n*d,e*n,!0,n,n*h)}if(this.tm())throw g.i.Qa();if(a.yv(b))throw g.i.Qa();this.Pc(1993)}}};c.prototype.oJ=function(){for(var a=0,b=this.da();a<b;a++)this.FW(a)};c.prototype.FW=function(a){this.mc();if(a>=this.da())throw g.i.N();var b=this.Ba(a),d=this.Ja(a);a=this.dc(a)?1:0;for(var e=0,f=this.description.Aa;e<f;e++)if(null!=this.za[e]){var h=g.ra.Va(this.description.Ed(e));this.za[e].ni(h*
(b+a),h*(d-a),h)}this.Pc(1993)};c.prototype.Zq=function(a){this.mc();var b=this.da();0>a&&(a=b-1);if(a>=b)throw g.i.N();for(var d=this.Ba(a),e=this.Ja(a),f=0,h=this.description.Aa;f<h;f++)if(null!=this.za[f]){var k=g.ra.Va(this.description.Ed(f));this.za[f].En(k*d,k*e,k*this.wa)}for(d=a+1;d<=b;d++)f=this.nb.read(d),this.nb.write(d-1,f-e);if(null==this.mb)for(d=a+1;d<=b;d++)a=this.mb.read(d),this.mb.write(d-1,a);this.nb.resize(b);this.mb.resize(b);this.wa-=e;this.Pg-=e;this.Pc(1993)};c.prototype.vf=
function(a,b,d,e){if(b==this)throw g.i.N();if(d>=b.da())throw g.i.N();var f=this.da();if(a>f)throw g.i.N();0>a&&(a=f);0>d&&(d=b.da()-1);this.Mg=!1;this.Jl(b.description);b.mc();var h=b.Ba(d),k=b.Ja(d),m=this.wa,n=b.dc(d)&&!e?1:0;this.dm(this.wa+k);this.mc();for(var p=a<f?this.Ba(a):m,r=0,t=this.description.Aa;r<t;r++){var x=this.description.Ed(r),K=b.description.Pf(x),ca=g.ra.Va(x);0<=K&&null!=b.za[K]?(0!=n&&this.za[r].Mn(p*ca,b.za[K],ca*h,ca,!0,ca,ca*m),this.za[r].Mn((p+n)*ca,b.za[K],ca*(h+n),ca*
(k-n),e,ca,ca*(m+n))):this.za[r].Ln(p*ca,g.ra.se(x),ca*k,ca*m)}this.nb.add(m+k);for(e=f;e>=a+1;e--)h=this.nb.read(e-1),this.nb.write(e,h+k);b.yv(d);this.mb.add(0);for(e=f-1;e>=a+1;e--)f=this.mb.read(e),f&=-5,this.mb.write(e+1,f);f=b.JR().read(d);f&=-5;this.xf&&(f|=1);this.mb.write(a,f)};c.prototype.Hz=function(a,b){var d=-1,e=this.da();if(d>e)throw g.i.N();0>d&&(d=e);this.Mg=!1;var f=this.wa;this.dm(this.wa+b);this.mc();var h=d<e?this.Ba(d):f;if(null!=a)this.za[0].Iz(2*h,a,0,b,!0,2*f);else{var k=
g.ra.se(0);this.za[0].Ln(2*h,k,2*b,2*f)}a=1;for(var m=this.description.Aa;a<m;a++){k=this.description.kd(a);var n=g.ra.Va(k);k=g.ra.se(k);this.za[a].Ln(h*n,k,n*b,n*f)}this.nb.add(this.wa);for(f=e;f>=d+1;f--)h=this.nb.read(f-1),this.nb.write(f,h+b);this.mb.add(0);for(f=e-1;f>=d+1;f--)b=this.mb.read(f),b&=-5,this.mb.write(f+1,b);this.xf&&this.mb.write(d,1)};c.prototype.qG=function(a,b,d){var e=-1;0>a&&(a=this.da());if(a>this.da()||e>this.Ja(a)||d>b.length)throw g.i.fa("index out of bounds");if(0!=d){a==
this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0));0>e&&(e=this.Ja(a));this.mc();var f=this.wa;this.dm(this.wa+d);this.mc();for(var h=0,k=this.description.Aa;h<k;h++){var m=this.description.Ed(h),n=g.ra.Va(m);this.za[h].Ut(n*(this.Ba(a)+e+d),(f-this.Ba(a)-e)*n,this.za[h],n*(this.Ba(a)+e),!0,n);0==h?this.za[h].vC(n*(this.Ba(a)+e),d,b,0,!0):this.za[h].Wj(g.ra.se(m),(this.Ba(a)+e)*n,d*n)}this.tm()&&(this.Ve.Ut(this.Ba(a)+e+d,f-this.Ba(a)-e,this.Ve,this.Ba(a)+e,!0,1),this.Lj.Ut(this.Ba(a)+
e+d,f-this.Ba(a)-e,this.Lj,this.Ba(a)+e,!0,1),this.Ve.Wj(1,this.Ba(a)+e,d),this.Lj.Wj(-1,this.Ba(a)+e,d));a+=1;for(b=this.da();a<=b;a++)this.nb.write(a,this.nb.read(a)+d)}};c.prototype.wf=function(a,b,d){var e=this.da();0>a&&(a=this.da());if(a>=e||b>this.Ja(a))throw g.i.fa("index out of bounds");a==this.da()&&(this.nb.add(this.wa),this.xf?this.mb.add(1):this.mb.add(0));0>b&&(b=this.Ja(a));var f=this.wa;this.dm(this.wa+1);this.mc();var h=this.Ba(a);this.za[0].vj(2*(h+b),d,2*f);d=1;for(var k=this.description.Aa;d<
k;d++){var m=this.description.Ed(d),n=g.ra.Va(m);this.za[d].Ln(n*(h+b),g.ra.se(m),n,n*f)}for(a+=1;a<=e;a++)this.nb.write(a,this.nb.read(a)+1)};c.prototype.DB=function(a,b){var d=this.da();0>a&&(a=d-1);if(a>=d||b>=this.Ja(a))throw g.i.fa("index out of bounds");this.mc();var e=this.Ba(a);0>b&&(b=this.Ja(a)-1);b=e+b;e=0;for(var f=this.description.Aa;e<f;e++)if(null!=this.za[e]){var h=g.ra.Va(this.description.Ed(e));this.za[e].En(h*b,h,h*this.wa)}for(;d>=a+1;d--)b=this.nb.read(d),this.nb.write(d,b-1);
this.wa--;this.Pg--;this.Pc(1993)};c.prototype.uE=function(a,b,d){var e=this.Ba(a)+b;d=this.Ba(d)+void 0;if(d<e||0>e||d>this.I()-1)throw g.i.N();a=this.Ga();b=0;a.Vb(e);do{for(;a.Ha();){e=a.ha();if(a.wb()==d)break;e=e.Qb();b+=e}if(a.wb()==d)break}while(a.$a());return b};c.prototype.fO=function(a,b,d){b=this.Ba(a)+b;d=this.Ba(a)+d;if(0>b||d>this.I()-1)throw g.i.N();var e=this.Ga();if(b>d){if(!this.dc(a))throw g.i.N("cannot iterate across an open path");e.JB()}var f=a=0;e.Vb(b);do f+=a,a=e.ha().Qb();
while(e.wb()!=d);return f};c.prototype.mg=function(){return g.pi.gm(this,null)};c.prototype.KS=function(a,b,d){for(var e=a;e<d-1;e++)if(this.dc(e))throw g.i.N("cannot interpolate across closed paths");e=this.description.Aa;if(1!=e){var f=this.uE(a,b,d);if(0!=f)for(var h=1;h<e;h++){var k=this.description.kd(h);if(2!=g.ra.lz(k))for(var m=g.ra.Va(k),n=0;n<m;n++)this.MS(k,a,b,d,f,n)}}};c.prototype.JS=function(a,b,d){var e=this.description.Aa;if(1!=e){var f=this.fO(a,b,d);if(0!=f)for(var h=1;h<e;h++){var k=
this.description.kd(h);if(2!=g.ra.lz(k))for(var m=g.ra.Va(k),n=0;n<m;n++)this.LS(k,a,b,d,f,n)}}};c.prototype.MS=function(a,b,d,e,f,h){var k=this.Ga(),m=this.Ba(b)+d;e=this.Ba(e)+void 0;b=this.Uc(a,m,h);d=this.Uc(a,e,h);var n=b,p=0;k.Vb(m);do if(k.Ha()){k.ha();if(k.wb()==e)break;this.setAttribute(a,k.wb(),h,n);k.li();do{m=k.ha();if(k.ik()==e)return;m=m.Qb();p+=m;n=g.lc.hq(b,d,p/f);k.On()||this.setAttribute(a,k.ik(),h,n)}while(k.Ha())}while(k.$a())};c.prototype.LS=function(a,b,d,e,f,h){var k=this.Ga(),
m=this.Ba(b)+d;b=this.Ba(b)+e;if(b!=m){e=this.Uc(a,m,h);d=this.Uc(a,b,h);var n=0;k.Vb(m);k.JB();m=e;do{var p=k.ha();this.setAttribute(a,k.wb(),h,m);m=p.Qb();n+=m;m=g.lc.hq(e,d,n/f)}while(k.ik()!=b)}};c.prototype.Oa=function(){this.tq=0;this.Mg=!1;this.Sd=this.Ve=this.Lj=this.mb=this.nb=null;this.wD()};c.prototype.Oc=function(a){a instanceof g.Dd?this.YD(a,-1):this.wN(a)};c.prototype.YD=function(a,b){if(!this.B()&&!a.isIdentity()){this.mc();var d=this.za[0],e=new g.h,f=new g.h;if(0>b){var h=this.tm(),
k=0;b=this.wa}else h=this.yv(b),k=this.Ba(b),b=this.Vc(b);for(;k<b;k++){e.x=d.read(2*k);e.y=d.read(2*k+1);if(h){var m=this.Lj.read(k);if(0<=m)switch(this.Ve.read(k)&7){case 2:f.x=this.Sd.read(m);f.y=this.Sd.read(m+1);a.Eh(f,f);this.Sd.write(m,f.x);this.Sd.write(m+1,f.y);f.x=this.Sd.read(m+3);f.y=this.Sd.read(m+4);a.Eh(f,f);this.Sd.write(m+3,f.x);this.Sd.write(m+4,f.y);break;case 4:throw g.i.Qa();}}a.Eh(e,e);d.write(2*k,e.x);d.write(2*k+1,e.y)}this.Pc(1993)}};c.prototype.wN=function(a){if(!this.B()){this.re(1);
this.mc();for(var b=this.za[0],d=this.za[1],e=new g.Nd,f=new g.Nd,h=this.tm(),k=0;k<this.wa;k++){e.x=b.read(2*k);e.y=b.read(2*k+1);e.z=d.read(k);if(h){var m=this.Lj.read(k);if(0<=m)switch(this.Ve.read(k)&7){case 2:f.x=this.Sd.read(m);f.y=this.Sd.read(m+1);f.z=this.Sd.read(m+2);f=a.fp(f);this.Sd.write(m,f.x);this.Sd.write(m+1,f.y);this.Sd.write(m+1,f.z);f.x=this.Sd.read(m+3);f.y=this.Sd.read(m+4);f.z=this.Sd.read(m+5);f=a.fp(f);this.Sd.write(m+3,f.x);this.Sd.write(m+4,f.y);this.Sd.write(m+5,f.z);break;
case 4:throw g.i.Qa();}}e=a.fp(e);b.write(2*k,e.x);b.write(2*k+1,e.y);d.write(k,e.z)}this.Pc(1993)}};c.prototype.iy=function(){null==this.nb&&(this.nb=g.Yc.Oh(1,0),this.mb=g.Yc.Mr(1,0));null!=this.Ve&&(this.Ve.resize(this.Pg,1),this.Lj.resize(this.Pg,-1))};c.prototype.op=function(a){a.Mg=!1;a.tq=this.tq;a.xq=this.xq;a.nb=null!=this.nb?g.ia.Bn(this.nb):null;a.mb=null!=this.mb?g.pn.Bn(this.mb):null;a.Lj=null!=this.Lj?g.ia.Bn(this.Lj):null;a.Ve=null!=this.Ve?g.pn.Bn(this.Ve):null;a.Sd=null!=this.Sd?
g.be.Bn(this.Sd):null;a.sq=this.sq;a.rq=this.rq;a.Aj=this.ak(1024)?null:this.Aj};c.prototype.Qb=function(){if(!this.ak(512))return this.sq;for(var a=this.Ga(),b=new g.Fx(0);a.$a();)for(;a.Ha();)b.add(a.ha().Qb());this.sq=b.rm();this.Lf(512,!1);return b.rm()};c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c&&l.prototype.Nb.call(this,a)))return!1;var b=this.da();return b!=a.da()||null!=this.nb&&!this.nb.Nb(a.nb,0,b+1)||this.xq!=a.xq||null!=this.mb&&!this.mb.Nb(a.mb,0,b)?!1:l.prototype.Nb.call(this,
a)};c.prototype.Ga=function(){return new g.YL(this)};c.prototype.hy=function(a){l.prototype.hy.call(this,a);if(this.tm())for(a=this.Ga();a.$a();)for(;a.Ha();)break};c.prototype.yp=function(a,b){l.prototype.yp.call(this,a,b);if(this.tm())for(a=this.Ga();a.$a();)for(;a.Ha();)break};c.prototype.$x=function(){this.wa=null==this.nb||0==this.nb.size?0:this.nb.read(this.nb.size-1)};c.prototype.Ke=function(){if(!this.xf)return 0;this.xu();return this.rq};c.prototype.Ev=function(a){if(!this.xf)return!1;if(!this.ak(8))return 0!=
(this.mb.read(a)&4);this.xu();return 0<this.Aj.read(a)};c.prototype.Ir=function(a){if(!this.xf)return 0;this.xu();return this.Aj.read(a)};c.prototype.xu=function(){if(this.ak(1024)){var a=this.da();null==this.Aj?this.Aj=new g.be(a):this.Aj.size!=a&&this.Aj.resize(a);a=new g.Fx(0);for(var b=new g.Fx(0),d=new g.h,e=0,f=this.Ga();f.$a();){b.reset();for(this.D(this.Ba(f.gb),d);f.Ha();)b.add(f.ha().Tx(d.x,d.y));a.add(b.rm());var h=e++;this.Aj.write(h,b.rm())}this.rq=a.rm();this.Lf(1024,!1)}};c.prototype.FR=
function(){if(this.xf){this.fm();for(var a=0,b=this.da(),d=0;d<b;d++)0!=(this.mb.read(d)&4)&&a++}};c.prototype.fm=function(){if(this.ak(8)){this.xu();var a=this.da();if(null==this.mb||this.mb.size<a)this.mb=g.Yc.Mr(a+1);for(var b=1,d=0;d<a;d++){var e=this.Aj.read(d);0==d&&(b=0<e?1:-1);0<e*b?this.mb.zJ(d,4):this.mb.KE(d,4)}this.Lf(8,!1)}};c.prototype.sz=function(a){var b=this.gb,d=this.da();if(0<=b&&b<d){if(a<this.Vc(b)){if(a>=this.Ba(b))return b;b--}else b++;if(0<=b&&b<d&&a>=this.Ba(b)&&a<this.Vc(b))return this.gb=
b}if(5>d){for(b=0;b<d;b++)if(a<this.Vc(b))return this.gb=b;throw g.i.fa("corrupted geometry");}b=0;for(--d;d>b;){var e=b+(d-b>>1),f=this.Ba(e);if(a<f)d=e-1;else if(b=this.Vc(e),a>=b)b=e+1;else return this.gb=e}return this.gb=b};c.prototype.yz=function(){var a=this.I();if(!this.xf){a-=this.da();for(var b=0,d=this.da();b<d;b++)this.dc(b)&&a++}return a};c.prototype.rv=function(a){var b=this.Ja(a);this.dc(a)||b--;return b};c.prototype.Ia=function(){return new c(this.xf,this.description)};c.prototype.Db=
function(){return this.xf?2:1};c.prototype.getType=function(){return this.xf?1736:1607};c.prototype.QJ=function(a){this.nb=a;this.Pc(16777215)};c.prototype.VR=function(){this.wx();return this.Ve};c.prototype.JR=function(){this.wx();return this.mb};c.prototype.PJ=function(a){this.mb=a;this.Pc(16777215)};c.prototype.da=function(){return null!=this.nb?this.nb.size-1:0};c.prototype.Vc=function(a){return this.nb.read(a+1)};c.prototype.Ja=function(a){return this.nb.read(a+1)-this.nb.read(a)};c.prototype.Ba=
function(a){return this.nb.read(a)};c.prototype.lu=function(a,b){null==this.Bb&&(this.Bb=new g.Uk);b=g.Nx.pW(b);var d=this.Bb.Fk;if(null!=d)if(d.Ik<a||b>d.RR())this.Bb.yD(null);else return!0;d=g.Nx.create(this,a,b);this.Bb.yD(d);return!0};c.prototype.cc=function(){var a=l.prototype.cc.call(this);if(!this.Ac()){var b=this.da();null!=this.nb&&this.nb.An(a,0,b+1);null!=this.mb&&this.mb.An(a,0,b)}return a};c.prototype.ZF=function(a){return null!=this.Ve?this.Ve.read(a):1};c.prototype.bc=function(a,b,
d){var e=this.sz(a);if(a==this.Vc(e)-1&&!this.dc(e))throw g.i.fa("index out of bounds");this.mc();var f=this.Ve,h=1;null!=f&&(h=f.read(a)&7);switch(h){case 1:b.Or();break;case 2:throw g.i.Qa();case 4:throw g.i.Qa();default:throw g.i.Qa();}b=b.get();d?b.Nf(g.ee.og()):b.Nf(this.description);e=a==this.Vc(e)-1&&this.dc(e)?this.Ba(e):a+1;f=new g.h;this.D(a,f);b.Dc(f);this.D(e,f);b.Qc(f);if(!d)for(d=1,f=this.description.Aa;d<f;d++){h=this.description.Ed(d);for(var k=g.ra.Va(h),m=0;m<k;m++){var n=this.Uc(h,
a,m);b.YB(h,m,n);n=this.Uc(h,e,m);b.OB(h,m,n)}}};c.prototype.Rj=function(a,b){if(a>=this.da())throw g.i.N();if(this.B())b.Oa();else{if(this.yv(a))throw g.i.fa("not implemented");var d=this.ub(0),e=new g.h,f=new g.l;f.Oa();var h=this.Ba(a);for(a=this.Vc(a);h<a;h++)d.tc(2*h,e),f.Zb(e);b.K(f)}};c.prototype.fj=function(a){null==this.Bb&&(this.Bb=new g.Uk);if(0==a||16>this.I())return!1;a=g.ta.nE(this);this.Bb.WM(a);return!0};c.prototype.hM=function(){null==this.Bb&&(this.Bb=new g.Uk);if(null==this.Bb.zo){this.Bb.xD(null);
var a=g.ta.YN(this);this.Bb.xD(a)}};c.prototype.Yo=function(a){this.xq=a};c.prototype.In=function(){return this.xq};c.prototype.DD=function(a){if(this==a)throw g.i.fa("MultiPathImpl.add");for(var b=this.da(),d=0;d<a.da();d++)this.addPath(a,d,!0),this.CU(b),b++};c.prototype.kO=function(a){var b=this.sz(a),d=this.Ba(b);if(d!=a){b=this.Vc(b);if(a>=b||a<d)throw g.i.fa("change_ring_start_point");for(var e=0,f=this.description.Aa;e<f;e++){var h=this.description.kd(e);h=g.ra.Va(h);this.za[e].rotate(d*h,
a*h,b*h)}}};return c}(g.Gx);g.Vk=N})(ja||={});(function(g){var N=function(l){function c(a){var b=l.call(this)||this;if(void 0!==a){if(null==a)throw g.i.N();b.description=a}else b.description=g.ee.og();b.wa=0;return b}qa(c,l);c.prototype.Ia=function(){return new c(this.description)};c.prototype.add=function(a){this.resize(this.wa+1);this.Dh(this.wa-1,a)};c.prototype.Bu=function(a,b){this.resize(this.wa+1);var d=new g.h;d.ma(a,b);this.Cb(this.wa-1,d)};c.prototype.Fd=function(a,b,d){d=0>d?a.I():d;if(0>
b||b>a.I()||d<b)throw g.i.N();if(b!=d){this.Jl(a.description);d-=b;var e=this.wa;this.resize(this.wa+d);this.mc();for(var f=0,h=a.description.Aa;f<h;f++){var k=a.description.Ed(f),m=g.ra.Va(k),n=this.ub(k);k=a.ub(k);n.Mn(e*m,k,b*m,d*m,!0,1,e*m)}}};c.prototype.HD=function(a,b){var d=a.length;b=0>b?d:b;if(0>d||0>b)throw g.i.N();if(0!=b){d=b-0;b=this.wa;this.resize(this.wa+d);for(var e=0;e<d;e++)this.Cb(b+e,a[0+e])}};c.prototype.DB=function(a){if(0>a||a>=this.I())throw g.i.fa("index out of bounds");
this.mc();for(var b=0,d=this.description.Aa;b<d;b++)if(null!=this.za[b]){var e=g.ra.Va(this.description.Ed(b));this.za[b].En(e*a,e,e*this.wa)}this.wa--;this.Pg--;this.Pc(1993)};c.prototype.resize=function(a){this.dm(a)};c.prototype.op=function(){};c.prototype.Oa=function(){l.prototype.wD.call(this)};c.prototype.Oc=function(a){if(a instanceof g.Dd){if(this.B())return;this.mc();for(var b=this.za[0],d=new g.h,e=0;e<this.wa;e++)d.x=b.read(2*e),d.y=b.read(2*e+1),a.Eh(d,d),b.write(2*e,d.x),b.write(2*e+
1,d.y)}else{if(this.B())return;this.mc();this.re(1);this.mc();b=this.za[0];d=this.za[1];var f=new g.Nd;for(e=0;e<this.wa;e++){f.x=b.read(2*e);f.y=b.read(2*e+1);f.z=d.read(e);var h=a.fp(f);b.write(2*e,h.x);b.write(2*e+1,h.y);d.write(e,h.z)}}this.Pc(1993)};c.prototype.Db=function(){return 0};c.prototype.getType=function(){return 550};c.prototype.Ke=function(){return 0};c.prototype.Qb=function(){return 0};c.prototype.Nb=function(a){return a==this?!0:a instanceof c?l.prototype.Nb.call(this,a):!1};c.prototype.lW=
function(a,b){var d=this.wa;d=Math.min(d,b+1E3);if(0>b||b>=this.wa||d<b||1E3!=a.length)throw g.i.N();var e=this.ub(0),f=d-b,h=[];e.Vw(2*b,2*f,h,0,!0);for(b=0;b<f;b++)a[b]=g.h.construct(h[2*b],h[2*b+1]);return d};c.prototype.$x=function(){};c.prototype.iy=function(){};c.prototype.lu=function(){return!1};c.prototype.fj=function(){return!1};c.prototype.mg=function(){return null};return c}(g.Gx);g.de=N})(ja||={});(function(g){(function(l){l[l.NotDetermined=0]="NotDetermined";l[l.Structure=1]="Structure";
l[l.DegenerateSegments=2]="DegenerateSegments";l[l.Clustering=3]="Clustering";l[l.Cracking=4]="Cracking";l[l.CrossOver=5]="CrossOver";l[l.RingOrientation=6]="RingOrientation";l[l.RingOrder=7]="RingOrder";l[l.OGCPolylineSelfTangency=8]="OGCPolylineSelfTangency";l[l.OGCPolygonSelfTangency=9]="OGCPolygonSelfTangency";l[l.OGCDisconnectedInterior=10]="OGCDisconnectedInterior"})(g.iL||(g.iL={}));var N=function(){function l(c,a,b){void 0===c?(this.Jj=0,this.Ko=this.Jo=-1):(this.Jj=c,this.Jo=a,this.Ko=b)}
l.prototype.Wt=function(c){this.Jj=c.Jj;this.Jo=c.Jo;this.Ko=c.Ko};return l}();g.Md=N})(ja||={});(function(g){g.O=function(){function N(){}N.assert=function(l){if(!1===l)throw g.i.GK();};N.bK=function(l){return isNaN(l)?NaN:0===l?l:0<l?1:-1};N.Fu=function(l){var c;void 0===c&&(c=0);for(var a=[],b=0;b<l;b++)a[b]=N.lg(2,c);return a};N.lg=function(l,c){void 0===c&&(c=0);for(var a=[],b=0;b<l;b++)a[b]=c;return a};N.$u=function(l,c){var a,b;void 0===a&&(a=0);for(void 0===b&&(b=l.length-1);a<=b;a++)l[a]=
c};N.Rk=function(l,c,a){return l<c?c:l>a?a:l};N.Th=function(l,c){var a=5381;a=void 0!==c?(c<<5)+c+(l&255):(a<<5)+a+(l&255);a=(a<<5)+a+(l>>8&255);a=(a<<5)+a+(l>>16&255);return(a<<5)+a+(l>>24&255)&2147483647};N.uj=function(){throw Error("Not Implemented");};N.bB=function(l){return N.aU(l)+12345&2147483647};N.XG=function(l){var c=32,a=l%N.Qx|0,b=l/N.Qx|0;if(0===(c&=63))return l;32>c?(l=a>>>c|b<<32-c,c=b>>c):(l=b>>c-32,c=0<=b?0:-1);return c*N.Qx+(l>>>0)};N.aU=function(l){l|=0;return(1103495168*l|0)+(20077*
l|0)|0};N.truncate=function(l){return 0>l?-1*Math.floor(Math.abs(l)):Math.floor(l)};N.MAX_SAFE_INTEGER=Math.pow(2,53)-1;N.MIN_SAFE_INTEGER=-N.MAX_SAFE_INTEGER;N.VC=65536;N.Qx=N.VC*N.VC;return N}()})(ja||={});(function(g){(function(l){l[l.Project=0]="Project";l[l.Union=1]="Union";l[l.Difference=2]="Difference";l[l.Proximity2D=3]="Proximity2D";l[l.Relate=4]="Relate";l[l.Equals=5]="Equals";l[l.Disjoint=6]="Disjoint";l[l.Intersects=7]="Intersects";l[l.Within=8]="Within";l[l.Contains=9]="Contains";l[l.Crosses=
10]="Crosses";l[l.Touches=11]="Touches";l[l.Overlaps=12]="Overlaps";l[l.Buffer=13]="Buffer";l[l.Distance=14]="Distance";l[l.Intersection=15]="Intersection";l[l.Clip=16]="Clip";l[l.Cut=17]="Cut";l[l.DensifyByLength=18]="DensifyByLength";l[l.DensifyByAngle=19]="DensifyByAngle";l[l.LabelPoint=20]="LabelPoint";l[l.GeodesicBuffer=21]="GeodesicBuffer";l[l.GeodeticDensifyByLength=22]="GeodeticDensifyByLength";l[l.ShapePreservingDensify=23]="ShapePreservingDensify";l[l.GeodeticLength=24]="GeodeticLength";
l[l.GeodeticArea=25]="GeodeticArea";l[l.Simplify=26]="Simplify";l[l.SimplifyOGC=27]="SimplifyOGC";l[l.Offset=28]="Offset";l[l.Generalize=29]="Generalize";l[l.SymmetricDifference=30]="SymmetricDifference";l[l.ConvexHull=31]="ConvexHull";l[l.Boundary=32]="Boundary";l[l.SimpleRelation=33]="SimpleRelation"})(g.CL||(g.CL={}));var N=function(){function l(){}l.prototype.getType=function(){return null};l.prototype.wn=function(){};l.prototype.Iu=function(){return!1};return l}();g.Je=N})(ja||={});(function(g){var N=
function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 13};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d,e,f){return a instanceof g.aa?(f=new g.Zc(a),this.V(f,b,[d],!1,e).next()):!0===e?(d=new g.BC(a,b,d,!1,f),g.Gh.local().V(d,b,f)):new g.BC(a,b,d,!1,f)};c.instance=null;return c}(g.Je);g.AC=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d,e){this.ya=-1;this.Rd=c;this.$z=
a;this.Cs=b;this.tT=new g.l;this.tT.Oa();this.eo=-1;this.Ub=e}l.prototype.next=function(){for(var c;null!=(c=this.Rd.next());)return this.ya=this.Rd.La(),this.eo+1<this.Cs.length&&this.eo++,this.buffer(c,this.Cs[this.eo]);return null};l.prototype.La=function(){return this.ya};l.prototype.buffer=function(c,a){return g.HK.buffer(c,a,this.$z,NaN,96,this.Ub)};l.prototype.qe=function(){};return l}();g.BC=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||
this}qa(c,l);c.prototype.getType=function(){return 16};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d,e){return a instanceof g.aa?(a=new g.Zc(a),this.V(a,b,d,e).next()):new g.lL(a,b,d,e)};c.instance=null;return c}(g.Je);g.kL=N})(ja||={});(function(g){var N=function(){function l(c,a,b){this.ya=-1;if(null==c)throw g.i.N();this.$=a;this.yk=c;this.qa=g.ta.Wd(b,a,!1)}l.prototype.next=function(){var c;return null!=(c=this.yk.next())?(this.ya=this.yk.La(),
g.Ud.clip(c,this.$,this.qa,0)):null};l.prototype.La=function(){return this.ya};l.prototype.qe=function(){};return l}();g.lL=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 31};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d){return a instanceof g.aa?g.DC.rE(a):new g.DC(b,a,d)};c.instance=null;return c}(g.Je);g.CC=N})(ja||={});(function(g){var N=
function(){function l(c,a,b){this.uA=new g.Zt;this.ya=-1;if(null==a)throw g.i.N();this.cH=c;this.Ic=!1;this.yk=a;this.Ub=b}l.prototype.next=function(){if(this.cH){if(!this.Ic){var c=this.dO(this.yk);this.Ic=!0;return c}return null}if(!this.Ic){c=this.yk.next();if(null!=c)return this.ya=this.yk.La(),l.rE(c);this.Ic=!0}return null};l.prototype.La=function(){return this.ya};l.prototype.dO=function(c){for(var a;null!=(a=c.next());)this.uA.Ib(a);return this.uA.cR()};l.prototype.qe=function(){if(!this.Ic){if(!this.cH)throw g.i.fa("Invalid call for non merging convex hull.");
var c=this.yk.next();if(null!=c)this.uA.Ib(c);else throw g.i.fa("Expects a non-null geometry.");}};l.rE=function(c){if(l.VS(c))return c;var a=c.getType();if(g.Vk.yd(a))return a=new g.Ta(c.description),a.oc(c,!0),a;if(550==a&&2==c.I()){var b=new g.Sa;a=new g.Ta(c.description);c.ve(0,b);a.nf(b);c.ve(1,b);a.lineTo(b);return a}return g.Zt.RO(c)};l.VS=function(c){if(c.B())return!0;var a=c.getType();return 33==a||197==a?!0:g.Vk.yd(a)?!1:550==a?1==c.I()?!0:!1:1607==a?1==c.da()&&2>=c.I()?!0:!1:1!=c.da()?
!1:2>=c.I()?!0:g.Zt.JG(c,0)};return l}();g.DC=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 17};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d,e,f){return new g.nL(a,b,d,e,f)};c.instance=null;return c}(g.Je);g.mL=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d,e){this.Tf=null;if(null==a||null==b)throw g.i.fa("invalid argument");
this.qT=c;this.nA=a;this.lH=b;c=g.ta.mv(a,b);this.qa=g.ta.Wd(d,c,!0);this.kH=-1;this.nd=e}l.prototype.La=function(){return 0};l.prototype.next=function(){this.RQ();return++this.kH<this.Tf.length?this.Tf[this.kH]:null};l.prototype.RQ=function(){if(null==this.Tf)switch(this.Tf=[],this.nA.getType()){case 1607:this.TQ();break;case 1736:this.SQ()}};l.prototype.TQ=function(){var c=new g.Ta,a=new g.Ta,b=new g.Ta;this.Tf.push(c);this.Tf.push(a);var d=[];g.LK.JK(this.qT,this.nA,this.lH,this.qa,d,this.nd);
for(var e=0;e<d.length;e++){var f=d[e];if(0==f.bt)c.add(f.X,!1);else if(1==f.bt||2==f.bt)a.add(f.X,!1);else if(3==f.bt)this.Tf.push(f.X);else if(4==f.bt)b.add(f.X,!1);else throw g.i.fa("internal");}b.B()||c.B()&&a.B()&&!(3<=this.Tf.length)||this.Tf.push(b);c.B()&&a.B()&&3>this.Tf.length&&(this.Tf.length=0)};l.prototype.SQ=function(){var c=new g.ia(0),a=new g.gd,b=a.aF(),d=a.Ib(this.nA),e=a.Ib(this.lH),f=new g.Fg;try{f.Ft(a,this.qa,this.nd);f.dl(b,d,e,c);var h=a.Ne(d),k=new g.Da,m=new g.Da;this.Tf.length=
0;this.Tf.push(k);this.Tf.push(m);for(d=0;d<c.size;d++){var n=new g.gd,p=n.Ib(h),r=n.Ib(a.Ne(c.get(d)));f.dr(n,this.nd);var t=f.Av(p,r),x=n.Ne(t);if(!x.B()){var K=a.KF(c.get(d),b);2==K?k.add(x,!1):1==K?m.add(x,!1):this.Tf.push(x);var ca=new g.gd;p=ca.Ib(h);r=ca.Ib(a.Ne(c.get(d)));f.dr(ca,this.nd);h=ca.Ne(f.im(p,r))}}!h.B()&&0<c.size&&this.Tf.push(h);k.B()&&m.B()&&(this.Tf.length=0)}finally{f.Ug()}};l.prototype.qe=function(){};return l}();g.nL=N})(ja||={});(function(g){var N=function(l){function c(){return null!==
l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 18};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d){if(a instanceof g.aa)return a=new g.Zc(a),this.V(a,b,d).next();if(0>=b)throw g.i.N();return new g.oL(a,b,d)};c.instance=null;return c}(g.Je);g.Xl=N})(ja||={});(function(g){var N=function(){function l(c,a){this.ya=-1;this.Rd=c;this.Ps=a}l.prototype.La=function(){return this.ya};l.prototype.next=function(){var c;
return null!=(c=this.Rd.next())?(this.ya=this.Rd.La(),this.NP(c)):null};l.prototype.NP=function(c){if(c.B()||1>c.Db())return c;var a=c.getType();if(1736==a||1607==a)return this.Ny(c);if(g.aa.yd(a))return this.PP(c);if(197==a)return this.OP(c);throw g.i.Qa();};l.prototype.PP=function(c){if(c.Qb()<=this.Ps)return c;var a=new g.Ta(c.description);a.oc(c,!0);return this.Ny(a)};l.prototype.OP=function(c){var a=new g.Da(c.description);a.ad(c,!1);var b=new g.l;c.A(b);c=b.ca();return b.R()<=this.Ps&&c<=this.Ps?
a:this.Ny(a)};l.prototype.Ny=function(c){for(var a=c.Ia(),b=c.Ga();b.$a();)for(var d=!0;b.Ha();){var e=b.ha();if(322!=e.getType())throw g.i.fa("not implemented");var f=b.On(),h=e.Qb();if(h>this.Ps){var k=Math.ceil(h/this.Ps);h=new g.Sa(c.description);d&&(e.To(h),a.nf(h));var m=d=1/k,n=0;for(--k;n<k;n++)e.Tw(m,h),a.lineTo(h),m+=d;f?a.Ap():(e.Po(h),a.lineTo(h))}else f?a.Ap():a.oc(e,d);d=!1}return a};l.prototype.qe=function(){};return l}();g.oL=N})(ja||={});(function(g){var N=function(l){function c(){return null!==
l&&l.apply(this,arguments)||this}qa(c,l);c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.getType=function(){return 2};c.prototype.V=function(a,b,d,e){return a instanceof g.aa?(a=new g.Zc(a),b=new g.Zc(b),this.V(a,b,d,e).next()):new g.qL(a,b,d,e)};c.im=function(a,b,d,e){if(a.B()||b.B())return a;var f=a.Db(),h=b.Db();if(f>h)return a;var k=a.getType(),m=b.getType(),n=new g.l,p=new g.l,r=new g.l;a.A(n);b.A(p);r.K(n);r.Zb(p);r=g.ta.Wd(d,r,!0);var t=r*Math.sqrt(2)*
1.00001,x=new g.l;x.K(n);x.W(t,t);if(!x.isIntersecting(p))return a;if(1==f&&2==h)return c.KV(a,b,m,d,e);if(33==k)switch(g.Vk.yd(m)?(d=new g.Ta(b.description),d.oc(b,!0)):d=b,m){case 1736:return c.XU(a,d,r);case 1607:return c.YU(a,d,r);case 550:return c.VU(a,d,r);case 197:return c.UU(a,d,r);case 33:return c.WU(a,d,r);default:throw g.i.N();}else if(550==k)switch(m){case 1736:return c.nU(a,b,r);case 197:return c.lU(a,b,r);case 33:return c.mU(a,b,r)}return g.Fg.im(a,b,d,e)};c.XU=function(a,b,d){return 0==
g.hd.KG(b,a,d)?a:a.Ia()};c.YU=function(a,b,d){var e=a.D();b=b.Ga();for(var f=d*Math.sqrt(2)*1.00001,h=f*f,k=new g.l;b.$a();)for(;b.Ha();){var m=b.ha();m.A(k);k.W(f,f);if(k.contains(e)){if(m.qs(e,d))return a.Ia();var n=m.ac();if(g.h.yc(e,n)<=h)return a.Ia();n=m.wc();if(g.h.yc(e,n)<=h)return a.Ia()}}return a};c.VU=function(a,b,d){var e=b.ub(0);b=b.I();var f=a.D(),h=new g.h;d=d*Math.sqrt(2)*1.00001;d*=d;for(var k=0;k<b;k++)if(e.tc(2*k,h),g.h.yc(h,f)<=d)return a.Ia();return a};c.UU=function(a,b,d){var e=
new g.l;b.A(e);e.W(d,d);b=a.D();return e.contains(b)?a.Ia():a};c.WU=function(a,b,d){d=d*Math.sqrt(2)*1.00001;d*=d;var e=a.D();b=b.D();return g.h.yc(e,b)<=d?a.Ia():a};c.nU=function(a,b,d){var e=new g.l;b.A(e);e.W(d,d);for(var f=a.I(),h=!1,k=[],m=0;m<f;m++)k[m]=!1;var n=new g.h;for(m=0;m<f;m++)a.D(m,n),e.contains(n)&&0!=g.hd.Yd(b,n,d)&&(h=!0,k[m]=!0);if(!h)return a;b=a.Ia();for(m=0;m<f;m++)k[m]||b.Fd(a,m,m+1);return b};c.lU=function(a,b,d){var e=new g.l;b.A(e);e.W(d,d);b=a.I();var f=!1;d=[];for(var h=
0;h<b;h++)d[h]=!1;var k=new g.h;for(h=0;h<b;h++)a.D(h,k),e.contains(k)&&(f=!0,d[h]=!0);if(!f)return a;e=a.Ia();for(h=0;h<b;h++)d[h]||e.Fd(a,h,h+1);return e};c.mU=function(a,b,d){var e=a.ub(0),f=a.I(),h=b.D(),k=new g.h,m=!1;b=[];for(var n=0;n<f;n++)b[n]=!1;n=d*Math.sqrt(2)*1.00001;d=n*n;for(n=0;n<f;n++)e.tc(2*n,k),g.h.yc(k,h)<=d&&(m=!0,b[n]=!0);if(!m)return a;e=a.Ia();for(n=0;n<f;n++)b[n]||e.Fd(a,n,n+1);return e};c.KV=function(a,b,d,e,f){var h=new g.Fh;a.bn(h);var k=new g.l;b.A(k);h.Zb(k);h.W(.1*h.R(),
.1*h.ca());k=new g.Da;k.ad(h,!1);1736==d?k.add(b,!0):k.ad(b,!0);return g.Xj.local().V(a,k,e,f)};c.instance=null;return c}(g.Je);g.kp=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d){this.ts=null==a;this.ya=-1;this.Rd=c;this.$z=b;this.wT=a.next();this.Ub=d}l.prototype.next=function(){if(this.ts)return null;var c;return null!=(c=this.Rd.next())?(this.ya=this.Rd.La(),g.kp.im(c,this.wT,this.$z,this.Ub)):null};l.prototype.La=function(){return this.ya};l.prototype.qe=function(){};return l}();
g.qL=N})(ja||={});(function(g){var N=function(){function c(a){this.nd=a;this.Bj=new g.l;this.Bj.Oa();this.oh=new g.l;this.oh.Oa()}c.prototype.Nt=function(){var a=this.Bj.v;this.Bj.v=this.oh.v;this.oh.v=a;a=this.Bj.C;this.Bj.C=this.oh.C;this.oh.C=a;a=this.Bj.G;this.Bj.G=this.oh.G;this.oh.G=a;a=this.Bj.H;this.Bj.H=this.oh.H;this.oh.H=a};c.prototype.eQ=function(a,b){if(null!=this.nd&&!this.nd.progress(-1,-1))throw g.i.fu("user_canceled");var d=!this.Bj.isIntersecting(this.oh);if(g.aa.Hc(a.getType())&&
g.aa.Hc(b.getType())){if(a.I()>b.I())return this.gE(a,b,d);this.Nt();a=this.gE(b,a,d);this.Nt();return a}if(550==a.getType()&&g.aa.Hc(b.getType()))return a=this.hE(b,a,d),this.Nt(),a;if(550==b.getType()&&g.aa.Hc(a.getType()))return this.hE(a,b,d);if(550==a.getType()&&550==b.getType()){if(a.I()>b.I())return this.iE(a,b);this.Nt();a=this.iE(b,a);this.Nt();return a}return 0};c.prototype.gE=function(a,b,d){var e=a.Ga(),f=b.Ga(),h=new g.l,k=new g.l,m=1.7976931348623157E308;if(!d&&this.pY(a,b,e,f))return 0;
for(;e.$a();)for(;e.Ha();)if(a=e.ha(),a.A(h),!(h.px(this.oh)>m)){for(;f.$a();)for(;f.Ha();)if(b=f.ha(),b.A(k),h.px(k)<m&&(b=a.tb(b,d),b*=b,b<m)){if(0==b)return 0;m=b}f.Zi()}return Math.sqrt(m)};c.prototype.hE=function(a,b,d){var e=a.Ga(),f=new g.l,h=1.7976931348623157E308,k=new g.h,m=b.I();for(d=!d&&1736==a.getType();e.$a();)for(;e.Ha();){var n=e.ha();n.A(f);if(!(1<m&&f.px(this.oh)>h)){for(var p=0;p<m;p++){b.D(p,k);if(d&&0!=g.hd.Yd(a,k,0))return 0;var r=n.fe(k,!1);k.sub(n.hc(r));r=k.Sk();if(r<h){if(0==
r)return 0;h=r}}d=!1}}return Math.sqrt(h)};c.prototype.iE=function(a,b){for(var d=1.7976931348623157E308,e=new g.h,f=new g.h,h,k=a.I(),m=b.I(),n=0;n<k;n++)if(a.D(n,e),!(1<m&&this.oh.iK(e)>d))for(var p=0;p<m;p++)if(b.D(p,f),h=g.h.yc(e,f),h<d){if(0==h)return 0;d=h}return Math.sqrt(d)};c.prototype.pY=function(a,b,d,e){if(1736==a.getType()){for(;e.$a();)if(e.Ha()){var f=e.ha();if(0!=g.hd.Yd(a,f.wc(),0))return!0}e.Zi()}if(1736==b.getType()){for(;d.$a();)if(d.Ha()&&(a=d.ha(),0!=g.hd.Yd(b,a.wc(),0)))return!0;
d.Zi()}return!1};c.prototype.gm=function(a,b){if(a.B()||b.B())return NaN;a.A(this.Bj);b.A(this.oh);return this.eQ(a,b)};return c}(),l=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}qa(a,c);a.prototype.V=function(b,d,e){if(null==b||null==d)throw g.i.N();if(b.B()||d.B())return NaN;var f=b.getType(),h=d.getType();if(33==f){if(33==h)return g.h.tb(b.D(),d.D());if(197==h)return e=new g.l,d.A(e),e.tb(b.D());f=new g.de;f.add(b);b=f}else if(197==f){if(197==h)return h=new g.l,b.A(h),
e=new g.l,d.A(e),e.tb(h);f=new g.Da;f.ad(b,!1);b=f}33==h?(h=new g.de,h.add(d),d=h):197==h&&(h=new g.Da,h.ad(d,!1),d=h);return(new N(e)).gm(b,d)};a.local=function(){null===a.instance&&(a.instance=new a);return a.instance};a.prototype.getType=function(){return 14};a.instance=null;return a}(g.Je);g.rL=l})(ja||={});(function(g){var N=function(){function l(c,a,b,d){this.zH=c;this.DH=a;this.nd=d;this.$G=b}l.prototype.next=function(){var c=this.zH.next();return null==c?null:this.zC(c)};l.prototype.La=function(){return this.zH.La()};
l.prototype.zC=function(c){var a=c.getType();if(g.aa.Rn(a))return c;if(197==a)return a=new g.Da(c.description),a.ad(c,!1),this.zC(a);if(c.B())return c;if(null==c)throw g.i.Qa();a=c.Ia();for(var b=new g.yb,d=0,e=c.da();d<e;d++)this.TK(c,d,a,b);return a};l.prototype.TK=function(c,a,b,d){if(!(2>c.Ja(a))){var e=c.Ba(a),f=c.Vc(a)-1,h=c.ub(0),k=c.dc(a),m=new g.ia(0);m.Jb(c.Ja(a)+1);var n=new g.ia(0);n.Jb(c.Ja(a)+1);m.add(k?e:f);m.add(e);for(e=new g.h;1<m.size;){var p=m.Fc();m.If();var r=m.Fc();c.D(p,e);
d.Dc(e);c.D(r,e);d.Qc(e);r=this.SK(d,e,h,p,r,f);0<=r?(m.add(r),m.add(p)):n.add(p)}k||n.add(m.get(0));if(n.size==m.size)b.addPath(c,a,!0);else if(2<=n.size&&(!this.$G||2!=n.size||!(k||g.h.tb(c.Na(n.get(0)),c.Na(n.get(1)))<=this.DH))){a=new g.Sa;d=0;for(f=n.size;d<f;d++)c.ve(n.get(d),a),0==d?b.nf(a):b.lineTo(a);k&&(this.$G||2!=n.size||b.lineTo(a),b.Ap())}}};l.prototype.SK=function(c,a,b,d,e,f){var h=e-1;e<=d&&(h=f);f=e=-1;for(d+=1;d<=h;d++){b.tc(2*d,a);var k=a.x,m=a.y;c.hc(c.fe(a,!1),a);a.x-=k;a.y-=
m;k=a.length();k>this.DH&&k>f&&(e=d,f=k)}return e};l.prototype.qe=function(){};return l}();g.sL=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 29};c.prototype.V=function(a,b,d,e){return a instanceof g.aa?(a=new g.Zc(a),this.V(a,b,d,e).next()):new g.sL(a,b,d,e)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(g.Je);g.EC=N})(ja||={});(function(g){var N=
function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 21};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d,e,f,h,k,m){return a instanceof g.aa?(m=new g.Zc(a),this.V(m,b,d,[e],f,h,!1,k).next()):!0===k?(d=new g.GC(a,b,d,e,f,!1,!1,m),g.Gh.local().V(d,b,m)):new g.GC(a,b,d,e,f,!1,!1,m)};c.instance=null;return c}(g.Je);g.FC=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d,
e,f,h,k){if(f)throw g.i.Ie();if(null==a)throw g.i.N();this.ya=-1;this.Ms=c;this.vg=a;this.ze=b;this.Cs=d;this.$n=e;this.eo=-1;this.Ub=k;this.uT=new g.l;this.uT.Oa()}l.prototype.next=function(){for(var c;null!=(c=this.Ms.next());)return this.ya=this.Ms.La(),this.eo+1<this.Cs.length&&this.eo++,this.$Q(c,this.Cs[this.eo]);return null};l.prototype.La=function(){return this.ya};l.prototype.$Q=function(c,a){return g.VK.buffer(c,this.vg,this.ze,a,this.$n,this.Ub)};l.prototype.qe=function(){};return l}();
g.GC=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 24};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d){if(null==b)throw g.i.N();if(a.B()||1>a.Db())return 0;if(4==d)throw g.i.Ie();var e=g.cb.sc(b),f=g.cb.vv(e),h=g.cb.ev(e);f*=2-f;var k=e.Hd().ai,m=a.getType();if(1736==m||197==m)var n=a.mg();else g.aa.yd(m)?(n=new g.Ta(a.description),n.oc(a,
!0)):n=a;if(0==e.Nb(b)){if(g.cb.Wc(b)){n=g.Hh.lj(n,b);1607==m&&n==a&&(n=g.aa.jg(a));a=new g.Nc;g.cb.gh(b).cn(a);m=0;for(var p=n.I();m<p;m++){var r=n.Na(m);r.x=g.Hh.Zm(r.x,a);n.Cb(m,r)}}a=n.Ia();n=g.Hh.WI(b,e,n,a)?a:g.cb.zh(n,b,e)}return this.hQ(n,d,h,f,k)};c.prototype.hQ=function(a,b,d,e,f){var h=new g.ga(0),k=0;for(a=a.Ga();a.$a();)for(;a.Ha();){var m=a.ha(),n=m.ac();m=m.wc();n.scale(f);m.scale(f);g.kb.wd(d,e,n.x,n.y,m.x,m.y,h,null,null,b);k+=h.u}return k};c.instance=null;return c}(g.Je);g.vL=N})(ja||=
{});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 18};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d,e,f){return a instanceof g.aa?(a=new g.Zc(a),this.V(a,b,d,e,f).next()):new g.uL(a,d,e,b,-1,-1,f)};c.instance=null;return c}(g.Je);g.tL=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d,e,f){if(0<f)throw g.i.Ie();if(4!=b&&0<e)throw g.i.Ie();
if(null==a)throw g.i.N();this.ya=-1;this.Ms=c;this.vg=a;this.ze=b;this.DT=d;this.CT=e}l.prototype.next=function(){for(var c;null!=(c=this.Ms.next());)return this.ya=this.Ms.La(),this.Zy(c);return null};l.prototype.La=function(){return this.ya};l.prototype.Zy=function(c){return g.cj.Qr(c,this.vg,this.ze,this.DT,this.CT,this.Ub)};l.prototype.qe=function(){};return l}();g.uL=N})(ja||={});(function(g){(function(N){N[N.Unknown=0]="Unknown";N[N.Contains=1]="Contains";N[N.Within=2]="Within";N[N.Equals=3]=
"Equals";N[N.Disjoint=4]="Disjoint";N[N.Touches=8]="Touches";N[N.Crosses=16]="Crosses";N[N.Overlaps=32]="Overlaps";N[N.NoThisRelation=64]="NoThisRelation";N[N.Intersects=1073741824]="Intersects";N[N.IntersectsOrDisjoint=1073741828]="IntersectsOrDisjoint"})(g.cL||(g.cL={}));g.wL=function(){function N(){}N.nW=function(l,c){var a=l.getType(),b=c.getType();if(g.aa.xj(a)){var d=l.Bb;if(null!=d&&(d=d.Fk,null!=d)){if(33==b){var e=c.D();d=d.So(e.x,e.y)}else e=new g.l,c.A(e),d=d.Ro(e);if(1==d)return 1;if(0==
d)return 4}}if(g.aa.xj(b)&&(d=c.Bb,null!=d&&(d=d.Fk,null!=d))){33==a?(l=l.D(),d=d.So(l.x,l.y)):(c=new g.l,l.A(c),d=d.Ro(c));if(1==d)return 2;if(0==d)return 4}return 0};return N}()})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.getType=function(){return 15};c.prototype.V=function(a,b,d,e,f){return a instanceof g.aa?(a=new g.Zc(a),b=new g.Zc(b),this.V(a,
b,d,e,void 0===f?-1:f).next()):void 0===f?new g.HC(a,b,d,e,-1):new g.HC(a,b,d,e,f)};c.prototype.wn=function(a,b,d){this.Iu(a)&&(b=g.ta.kj(b,a,!1),a.fj(d)||a.lu(b,d))};c.prototype.Iu=function(a){return g.Nx.zE(a)};c.instance=null;return c}(g.Je);g.Xj=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d,e){this.ts=null==a;this.ya=-1;this.Rd=c;this.vg=b;this.Se=a.next();this.Dj=this.Se.getType();this.Ub=d;this.Fi=e;if(-1!=this.Fi&&(0>=this.Fi||7<this.Fi))throw g.i.N("bad dimension mask");}l.prototype.next=
function(){if(this.ts)return null;if(null!=this.zw){var c=this.zw.next();if(null!=c)return c;this.zw=null}for(;null!=(c=this.Rd.next());)return this.ya=this.Rd.La(),-1==this.Fi?c=this.Ea(c):(this.zw=this.PS(c),c=this.zw.next()),c;return null};l.prototype.La=function(){return this.ya};l.prototype.Ea=function(c){var a=this.zK(c);if(null!=a)return a;a=g.ta.mv(this.Se,c);var b=g.ta.Wd(this.vg,a,!0);a=new g.l;this.Se.A(a);var d=new g.l;c.A(d);a.W(2*b,2*b);a.Ea(d);a.W(100*b,100*b);b=g.Ud.clip(this.Se,a,
0,0);c=g.Ud.clip(c,a,0,0);return g.Fg.Av(c,b,this.vg,this.Ub)};l.prototype.QI=function(c,a,b){var d=0;if(0!=(a&1))null==b[0]&&(b[0]=new g.de(c)),d++;else for(var e=0;e<b.length-1;e++)b[e]=b[e+1];if(0!=(a&2))null==b[d]&&(b[d]=new g.Ta(c)),d++;else for(e=d;e<b.length-1;e++)b[e]=b[e+1];if(0!=(a&4))null==b[d]&&(b[d]=new g.Da(c)),d++;else for(e=d;e<b.length-1;e++)b[e]=b[e+1];if(3!=d){c=[];for(e=0;e<d;e++)c[e]=b[e];return new g.Zc(c)}return new g.Zc(b)};l.prototype.PS=function(c){var a=this.zK(c);if(null!=
a){var b=[null,null,null];b[a.Db()]=a;return this.QI(c.description,this.Fi,b)}a=g.ta.mv(this.Se,c);b=g.ta.Wd(this.vg,a,!0);a=new g.l;this.Se.A(a);a.W(2*b,2*b);var d=new g.l;c.A(d);a.Ea(d);a.W(100*b,100*b);b=g.Ud.clip(this.Se,a,0,0);a=g.Ud.clip(c,a,0,0);b=g.Fg.Pz(a,b,this.vg,this.Ub);return this.QI(c.description,this.Fi,b)};l.prototype.zK=function(c){var a=g.ta.mv(c,this.Se),b=g.ta.Wd(this.vg,a,!0);a=c.getType();var d=c.B(),e=this.Se.B();e=d||e;if(!e){e=new g.l;c.A(e);var f=new g.l;this.Se.A(f);f.W(2*
b,2*b);e=!e.isIntersecting(f)}if(!e)if(f=g.wL.nW(this.Se,c),4==f)e=!0;else{if(0!=(f&2))return this.Se;if(0!=(f&1))return c}if(e)return b=g.aa.tf(a),e=g.aa.tf(this.Dj),b<e?l.HB(c,d):b>e?this.nJ():0==b?550==a&&33==this.Dj?this.nJ():l.HB(c,d):l.HB(c,d);if((-1==this.Fi||4==this.Fi)&&197==a&&197==this.Dj)return b=this.Se,a=new g.l,c.A(a),d=new g.l,b.A(d),a.Ea(d),b=new g.Fh,c.copyTo(b),b.Xo(a),b;if(197==a&&0==g.aa.tf(this.Dj)||197==this.Dj&&0==g.aa.tf(a))return d=197==a?c:this.Se,c=197==a?this.Se:c,a=new g.l,
d.A(a),g.Ud.clip(c,a,b,0);if(0==g.aa.tf(a)&&0<g.aa.tf(this.Dj)||0<g.aa.tf(a)&&0==g.aa.tf(this.Dj)){b=g.ta.kj(this.vg,c,!1);if(550==a||33==a)return g.Fg.zG(c,this.Se,b);if(550==this.Dj||33==this.Dj)return g.Fg.zG(this.Se,c,b);throw g.i.Qa();}return-1!=this.Fi&&2!=this.Fi||1607!=a||1736!=this.Dj?-1!=this.Fi&&2!=this.Fi||1736!=a||1607!=this.Dj?null:this.wK(this.Se,c):this.wK(c,this.Se)};l.prototype.wK=function(c,a){var b=c,d=a,e=g.ta.kj(this.vg,a,!1),f=new g.l;d.A(f);var h=new g.l;b.A(h);h.W(2*e,2*e);
f.Ea(h);f.W(10*e,10*e);b=c=g.Ud.clip(c,f,0,0);h=new g.ia(0);var k=-1,m=d.Bb;if(null!=m){var n=m.Fk;if(null!=n){k=0;h.Jb(b.I()+b.da());for(var p=new g.l,r=b.Ga();r.$a();)for(;r.Ha();){r.ha().A(p);var t=n.Ro(p);1==t?h.add(1):0==t?h.add(0):(h.add(-1),k++)}}}5<a.I()&&(d=a=g.Ud.clip(a,f,0,0),m=d.Bb);0>k&&(k=b.yz());f=b.I()+d.I();if(k*d.I()>Math.log(f)*f*4)return null;f=null;k=d.Ga();null!=m&&null!=m.Fb&&(f=m.Fb);null==f&&20<d.I()&&(f=g.ta.nE(d));c=c.Ia();d=null;m=b.Ga();n=[0,0,0,0,0,0,0,0,0];p=new g.be(0);
r=new g.ig;t=-1;for(var x=0,K=0,ca=0<h.size,ha=-1;m.$a();){ha=m.gb;var da=0;t=-1;for(x=0;m.Ha();){var ka=ca?g.O.truncate(h.get(K)):-1;K++;var ta=m.ha();if(0>ka){if(null!=f)for(null==d?d=f.vR(ta,e):d.Uo(ta,e),ka=d.next();-1!=ka;ka=d.next()){k.Vb(f.ja(ka));ka=k.ha();var ua=ta.Ea(ka,null,n,null,e);for(ka=0;ka<ua;ka++)p.add(n[ka])}else for(k.Zi();k.$a();)for(;k.Ha();)for(ka=k.ha(),ua=ta.Ea(ka,null,n,null,e),ka=0;ka<ua;ka++)p.add(n[ka]);if(0<p.size){p.Vd(0,p.size,function(La,Ta){return La-Ta});var wa=
0;p.add(1);ua=-1;ka=0;for(var Ea=p.size;ka<Ea;ka++){var Ga=p.get(ka);if(Ga!=wa){var Na=!1;0!=wa||1!=Ga?(ta.ah(wa,Ga,r),wa=r.get()):(wa=ta,Na=!0);if(2<=da){c.Dr(b,ha,t,x,3==da);if(1!=this.QD(a,wa.ac(),e)&&1!=this.RD(a,wa,e))return null;c.oc(wa,!1);da=1;x=0}else switch(ua=this.RD(a,wa,e),ua){case 1:Na?2>da?(t=m.wb()-b.Ba(ha),x=1,da=0==da?3:2):x++:(c.oc(wa,0==da),da=1);break;case 0:da=0;t=-1;x=0;break;default:return null}wa=Ga}}}else{ka=this.QD(a,ta.ac(),e);if(0>ka)return null;1==ka?(2>da&&(t=m.wb()-
b.Ba(ha),da=0==da?3:2),x++):(t=-1,x=0)}p.clear(!1)}else 0!=ka&&1==ka&&(0==da?(da=3,t=m.wb()-b.Ba(ha)):1==da?(da=2,t=m.wb()-b.Ba(ha)):x++)}2<=da&&(c.Dr(b,ha,t,x,3==da),t=-1)}return c};l.prototype.QD=function(c,a,b){return g.Dg.wm(c,a,b)};l.prototype.RD=function(c,a,b){var d=a.ac();a=a.wc();var e=g.Dg.wm(c,d,b),f=g.Dg.wm(c,a,b);if(1==e&&0==f||0==e&&1==f)return-1;if(0==e||0==f)return 0;if(1==e||1==f)return 1;e=new g.h;e.add(d,a);e.scale(.5);c=g.Dg.wm(c,e,b);return 0==c?0:1==c?1:-1};l.HB=function(c,a){return a?
c:c.Ia()};l.prototype.nJ=function(){null==this.yH&&(this.yH=this.Se.Ia());return this.yH};l.prototype.qe=function(){};return l}();g.HC=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 28};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d,e,f,h,k){return a instanceof g.aa?(a=new g.Zc(a),this.V(a,b,d,e,f,h,k).next()):new g.xL(a,b,d,e,f,h,k)};c.instance=
null;return c}(g.Je);g.IC=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d,e,f,h){this.ya=-1;this.Rd=c;this.Mj=a;this.Ka=b;this.Ki=d;this.CA=e;this.uH=f;this.nd=h}l.prototype.next=function(){var c=this.Rd.next();return null!=c?(this.ya=this.Rd.La(),this.jL(c)):null};l.prototype.La=function(){return this.ya};l.prototype.jL=function(c){var a=0>=this.uH?g.ta.kj(this.Mj,c,!1):this.uH;return g.IK.V(c,this.Ka,this.Ki,this.CA,a,this.nd)};l.prototype.qe=function(){};return l}();g.xL=N})(ja||=
{});(function(g){(function(l){l[l.clipToDomainOnly=1]="clipToDomainOnly";l[l.clipWithHorizon=2]="clipWithHorizon";l[l.foldAndClipWithHorizon=3]="foldAndClipWithHorizon"})(g.NK||(g.NK={}));var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 0};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d){return a instanceof g.aa?(a=new g.Zc(a),this.V(a,b,d).next()):new g.yL(a,b,d)};c.prototype.transform=
function(a,b,d,e){return g.bu.transform(a,b,d,e,!0)};c.prototype.Qt=function(a,b,d,e){return g.bu.Qt(a,b,d,e)};c.instance=null;return c}(g.Je);g.Hx=N})(ja||={});(function(g){var N=function(){function l(c,a,b){this.ya=-1;this.Rd=c;this.MT=a;this.nd=b}l.prototype.next=function(){var c=this.Rd.next();return null!=c?(this.ya=this.Rd.La(),g.bu.zh(c,this.MT,this.nd)):null};l.prototype.La=function(){return this.ya};l.prototype.qe=function(){};return l}();g.yL=N})(ja||={});(function(g){var N=function(){function c(){}
c.prototype.reset=function(){this.ph=this.xk=-1;this.us=this.kq=!1};c.prototype.AQ=function(a,b,d){for(a.Vb(b,d);a.Ha();){var e=a.ha();e=e.Qb();if(0!=e)return a.wb()}for(a.Vb(b,d);a.Ez();)if(e=a.li(),e=e.Qb(),0!=e)return a.wb();return-1};c.prototype.BQ=function(a,b){for(a.Vb(b,-1);a.Ez();)if(0!=a.li().Qb())return a.wb();return-1};c.prototype.zQ=function(a,b){a.Vb(b,-1);for(a.ha();a.Ha();)if(0!=a.ha().Qb())return a.wb();return-1};c.prototype.yQ=function(a,b,d,e){this.xk=this.AQ(b,d,e);if(-1!=this.xk){b.Vb(this.xk,
-1);var f=b.ha(),h=f.hc(f.fe(a,!1));d=g.h.yc(h,a);e=new g.h;e.L(h);e.sub(f.ac());h=new g.h;h.L(a);h.sub(f.ac());this.kq=0>e.wi(h);this.ph=this.zQ(b,this.xk);if(-1!=this.ph){b.Vb(this.ph,-1);f=b.ha();var k=f.fe(a,!1);k=f.hc(k);var m=g.h.yc(k,a);m>d?this.ph=-1:(e.L(k),e.sub(f.ac()),h.L(a),h.sub(f.ac()),this.us=0>e.wi(h))}-1==this.ph&&(this.ph=this.BQ(b,this.xk),-1!=this.ph&&(b.Vb(this.ph,-1),f=b.ha(),k=f.fe(a,!1),k=f.hc(k),m=g.h.yc(k,a),m>d?this.ph=-1:(e.L(k),e.sub(f.ac()),h.L(a),h.sub(f.ac()),this.us=
0>e.wi(h),a=this.xk,this.xk=this.ph,this.ph=a,a=this.kq,this.kq=this.us,this.us=a)))}};c.prototype.cO=function(a,b,d,e,f){d=d.Ga();this.yQ(a,d,e,f);if(-1!=this.xk&&-1==this.ph)return this.kq;if(-1!=this.xk&&-1!=this.ph){if(this.kq==this.us)return this.kq;d.Vb(this.xk,-1);a=d.ha().kg();d.Vb(this.ph,-1);b=d.ha().kg();return 0<=a.wi(b)?!0:!1}return b};return c}(),l=function(c){function a(){return null!==c&&c.apply(this,arguments)||this}qa(a,c);a.local=function(){null===a.instance&&(a.instance=new a);
return a.instance};a.prototype.getType=function(){return 3};a.prototype.nz=function(b,d,e){var f;void 0===f&&(f=!1);if(b.B())return new g.$l;d=d.D();var h=b,k=b.getType();197==k&&(h=new g.Da,h.ad(b,!1),k=1736);switch(k){case 33:return this.xI(h,d);case 550:return this.jI(h,d);case 1607:case 1736:return this.bU(h,d,e,f);default:throw g.i.fa("not implemented");}};a.prototype.oz=function(b,d){if(b.B())return new g.$l;d=d.D();var e=b,f=b.getType();197==f&&(e=new g.Da,e.ad(b,!1),f=1736);switch(f){case 33:return this.xI(e,
d);case 550:case 1607:case 1736:return this.jI(e,d);default:throw g.i.fa("not implemented");}};a.prototype.pz=function(b,d,e,f){if(0>f)throw g.i.N();if(b.B())return[];d=d.D();var h=b,k=b.getType();197==k&&(h=new g.Da,h.ad(b,!1),k=1736);switch(k){case 33:return this.TU(h,d,e,f);case 550:case 1607:case 1736:return this.tU(h,d,e,f);default:throw g.i.fa("not implemented");}};a.prototype.bU=function(b,d,e,f){if(1736==b.getType()&&e&&(e=new g.l,b.A(e),e=g.ta.Wd(null,e,!1),0!=(f?g.hd.Yd(b,d,0):g.hd.Yd(b,
d,e)))){var h=new g.$l(d,0,0);f&&h.WJ(!0);return h}var k=b.Ga();h=new g.h;for(var m=e=-1,n=1.7976931348623157E308,p=0;k.$a();)for(;k.Ha();){var r=k.ha();r=r.hc(r.fe(d,!1));var t=g.h.yc(r,d);t<n?(p=1,h=r,e=k.wb(),m=k.gb,n=t):t==n&&p++}h=new g.$l(h,e,Math.sqrt(n));f&&(k.Vb(e,m),r=k.ha(),f=0>g.h.Uq(d,r.ac(),r.wc()),1<p&&(p=new N,p.reset(),f=p.cO(d,f,b,e,m)),h.WJ(f));return h};a.prototype.xI=function(b,d){b=b.D();d=g.h.tb(b,d);return new g.$l(b,0,d)};a.prototype.jI=function(b,d){for(var e=b.ub(0),f=b.I(),
h=b=0,k=0,m=1.7976931348623157E308,n=0;n<f;n++){var p=new g.h;e.tc(2*n,p);var r=g.h.yc(p,d);r<m&&(h=p.x,k=p.y,b=n,m=r)}d=new g.$l;d.ey(h,k,b,Math.sqrt(m));return d};a.prototype.TU=function(b,d,e,f){if(0==f)return e=[];e*=e;b=b.D();d=g.h.yc(b,d);d<=e?(e=[],f=new g.$l,f.ey(b.x,b.y,0,Math.sqrt(d)),e[0]=f):e=[];return e};a.prototype.tU=function(b,d,e,f){if(0==f)return f=[];var h=b.ub(0),k=b.I();b=[];e*=e;for(var m=0;m<k;m++){var n=h.read(2*m),p=h.read(2*m+1),r=d.x-n,t=d.y-p;r=r*r+t*t;r<=e&&(t=new g.$l,
t.ey(n,p,m,Math.sqrt(r)),b.push(t))}d=b.length;b.sort(function(x,K){return x.Ka<K.Ka?-1:x.Ka==K.Ka?0:1});if(f>=d)return b.slice(0);b.length=f;return b.slice(0)};a.instance=null;return a}(g.Je);g.Ix=l})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 4};c.prototype.V=function(a,b,d,e,f){return g.am.yB(a,b,d,e,f)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.Iu=
function(a){return g.Vt.wy(a)};c.prototype.wn=function(a,b,d){g.Vt.CD(a,b,d)};c.instance=null;return c}(g.Je);g.zL=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 33};c.prototype.V=function(a,b,d,e,f){return 1073741824===a?!g.ud.zB(b,d,e,4,f):g.ud.zB(b,d,e,a,f)};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.Iu=function(a){return g.Vt.wy(a)};c.prototype.wn=
function(a,b,d){g.Vt.CD(a,b,d)};c.instance=null;return c}(g.Je);g.dj=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d){this.nd=d;this.rT=b;this.ya=-1;if(null==c)throw g.i.N();this.yk=c;this.Mj=a}l.prototype.next=function(){var c;if(null!=(c=this.yk.next())){this.ya=this.yk.La();if(null!=this.nd&&!this.nd.progress(-1,-1))throw g.i.fu("user_canceled");return this.eC(c)}return null};l.prototype.La=function(){return this.ya};l.prototype.eC=function(c){if(null==c)throw g.i.N();return g.Jx.cK(c,
this.Mj,this.rT,this.nd)};l.prototype.qe=function(){};return l}();g.AL=N})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 26};c.prototype.V=function(a,b,d,e){return a instanceof g.aa?(a=new g.Zc(a),this.V(a,b,d,e).next()):new g.AL(a,b,d,e)};c.prototype.rs=function(a,b,d,e,f){return 0<(void 0!==e?g.Jx.rs(a,b,d,e,f):g.Jx.rs(a,b,!1,null,d))};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};
c.instance=null;return c}(g.Je);g.Yl=N})(ja||={});(function(g){var N=function(){function f(){this.yq=0}f.prototype.nX=function(h){this.yq&=-2;this.yq|=h?1:0};f.prototype.Wp=function(){return 0!=(this.yq&1)};f.prototype.XF=function(){return this.Wp()?0:1};return f}();g.xY=N;var l=function(){return function(){}}(),c=function(){return function(f,h,k,m){this.x=f;this.y=h;this.Ai=k;this.xm=m}}(),a=function(){function f(h){this.Be=h}f.prototype.compare=function(h,k,m){h=h.ja(m);k=this.Be.lf.read(2*k);h=
this.Be.lf.read(2*h);k-=h;return 0>k?-1:0<k?1:0};return f}(),b=function(){function f(h){this.Be=h}f.prototype.compare=function(h,k,m){k=this.Be.hb[k];h=this.Be.hb[h.ja(m)];var n=k.Wp(),p=h.Wp();m=k.ne.Pe(this.Be.Mo,0);var r=h.ne.Pe(this.Be.Mo,0);m==r&&(m=Math.min(n?k.ne.na:k.ne.la,p?h.ne.na:h.ne.la),n=.5*(m-this.Be.Mo)+this.Be.Mo,n==this.Be.Mo&&(n=m),m=k.ne.Pe(n,0),r=h.ne.Pe(n,0));return m<r?-1:m>r?1:0};return f}(),d=function(){function f(h,k){this.YI=new g.h;this.parent=h;this.dS=k}f.prototype.nr=
function(h,k,m){var n=this.parent,p=this.dS;m.Vd(h,k,function(r,t){return n.Mh(r,t,p)})};f.prototype.$p=function(h){h=this.parent.gi.get(h);this.parent.lf.tc(2*(h>>1),this.YI);return this.YI.y+(0!=(h&1)?this.parent.Oj:-this.parent.Oj)};return f}(),e=function(){function f(h,k,m,n,p){this.nH=h.description;this.X=h;this.Qg=k;this.Oj=g.ta.kj(this.Qg,h,!1);this.Bo=g.ta.kj(this.Qg,h,!0);this.xA=m;this.oT=this.nH.Aa;this.hb=[];this.po=[];this.mh=new g.jp;this.fb=new g.Yj;this.ke=new g.Md;this.ZG=this.ql=
p}f.prototype.eT=function(){this.ZG=!0;return(!g.aa.Hc(this.X.getType())||this.GE()&&this.DE(!1))&&this.mO()?g.aa.Hc(this.X.getType())?this.pO()?1607==this.X.getType()?this.rO()?2:0:this.sO()?this.tO():0:0:2:0};f.prototype.kC=function(h,k){var m=this.lf.read(2*h);h=this.lf.read(2*h+1);var n=this.lf.read(2*k);k=this.lf.read(2*k+1);var p=!g.Yt.Cv(m,h,n,k,this.Oj*this.Oj);return p?p:0==this.X.Db()?!1:m==n&&h==k};f.prototype.GE=function(){for(var h=this.X,k=h.xf?3:2,m=0,n=h.da();m<n;m++)if(h.Ja(m)<k)return this.ke=
new g.Md(1,m,0),!1;return!0};f.prototype.DE=function(h){var k=this.X,m=k.Ga(),n=k.hasAttribute(1);for(k=n?g.ta.wE(this.Qg,k,!1):0;m.$a();)for(;m.Ha();){var p=m.ha();if(!(p.Qb()>this.Oj)){if(h&&n){var r=p.wv(1,0);p=p.wv(1,0);if(Math.abs(p-r)>k)continue}this.ke=new g.Md(2,m.wb(),-1);return!1}}return!0};f.prototype.mO=function(){var h=this.X,k=null;g.aa.Hc(this.X.getType())&&(k=this.X);var m=(this.ZG||this.ql)&&null!=k,n=h.I();this.lf=h.ub(0);this.gi=new g.ia(0);this.gi.Jb(2*n);this.fi=new g.ia(0);this.fi.Jb(2*
n);m&&(null==this.Fl&&(this.Fl=new g.ia(0)),this.Fl.Jb(n));for(var p=h=0;p<n;p++)if(this.gi.add(2*p),this.gi.add(2*p+1),this.fi.add(2*p),this.fi.add(2*p+1),m){for(;p>=k.Vc(h);)h++;this.Fl.add(h)}(new g.Xt).sort(this.fi,0,2*n,new d(this,m));this.fb.clear();this.fb.Vo(new a(this));this.fb.De(n);k=0;for(n*=2;k<n;k++)if(m=this.fi.get(k),h=this.gi.get(m),m=h>>1,0==(h&1)){h=this.fb.addElement(m,-1);p=this.fb.we(h);if(-1!=p&&!this.kC(this.fb.ja(p),m))return this.ke=new g.Md(3,m,this.fb.ja(p)),!1;var r=this.fb.lb(h);
if(-1!=r&&!this.kC(this.fb.ja(r),m))return this.ke=new g.Md(3,m,this.fb.ja(r)),!1}else if(h=this.fb.search(m,-1),p=this.fb.we(h),r=this.fb.lb(h),this.fb.vd(h,-1),-1!=p&&-1!=r&&!this.kC(this.fb.ja(p),this.fb.ja(r)))return this.ke=new g.Md(3,this.fb.ja(p),this.fb.ja(r)),!1;return!0};f.prototype.pO=function(){return 10>this.X.I()?this.nO():this.oO()};f.prototype.oO=function(){var h=new g.gd;h.Ib(this.X);var k=new g.Md;return g.$t.kI(!1,h,this.Oj,k,this.nd)?(k.Jo=h.Ua(k.Jo),k.Ko=h.Ua(k.Ko),this.ke.Wt(k),
!1):!0};f.prototype.nO=function(){var h=this.X,k=h.Ga();for(h=h.Ga();k.$a();)for(;k.Ha();){var m=k.ha();if(!k.Qn()||!k.$S()){h.BW(k);do for(;h.Ha();){var n=h.ha();n=m.zr(n,this.Oj,!0);if(0!=n)return this.ke=new g.Md(2==n?5:4,k.wb(),h.wb()),!1}while(h.$a())}}return!0};f.prototype.sO=function(){var h=this.X;this.hb.length=0;this.po.length=0;this.Zf=h.Ga();this.Zf.JB();var k=new g.ia(0);k.Jb(10);var m=NaN,n=0,p=0;for(h=2*h.I();p<h;p++){var r=this.fi.get(p);r=this.gi.get(r);if(0==(r&1)){r>>=1;var t=this.lf.read(2*
r),x=this.lf.read(2*r+1);if(0!=k.size&&(t!=m||x!=n)){if(!this.RI(k))return!1;null!=k&&k.clear(!1)}k.add(r);m=t;n=x}}return this.RI(k)?!0:!1};f.prototype.rO=function(){for(var h=this.X,k=Array(h.da()),m=0,n=h.da();m<n;m++)k[m]=h.Nn(m);n=new l;var p=new g.h;m=this.fi.get(0);m=this.gi.get(m);var r=m>>1;this.lf.tc(2*r,p);m=this.Fl.get(r);var t=k[m],x=h.Ba(m),K=h.Vc(m)-1;n.el=r==x||r==K;n.ny=this.ql?!t&&n.el:n.el;n.Ai=m;n.x=p.x;n.y=p.y;n.xm=r;for(var ca=new l,ha=1,da=this.fi.size;ha<da;ha++)if(m=this.fi.get(ha),
m=this.gi.get(m),0==(m&1)){r=m>>1;this.lf.tc(2*r,p);m=this.Fl.get(r);m!=n.Ai&&(t=k[m],x=h.Ba(m),K=h.Vc(m)-1);var ka=r==x||r==K,ta=this.ql?!t&&n.el:n.el;ca.x=p.x;ca.y=p.y;ca.Ai=m;ca.xm=r;ca.ny=ta;ca.el=ka;if(ca.x==n.x&&ca.y==n.y)if(this.ql){if(!ca.ny||!n.ny)if(ca.Ai!=n.Ai||!ca.el&&!n.el)return this.ke=new g.Md(8,ca.xm,n.xm),!1}else if(!ca.el||!n.el)return this.ke=new g.Md(5,ca.xm,n.xm),!1;m=n;n=ca;ca=m}return!0};f.prototype.JE=function(){for(var h=this.X,k=[],m=-1,n=!1,p=0,r=h.da();p<r;p++)h.Ev(p)&&
(n=!1,m++,p<r-1&&(h.Ev(p+1)||(n=!0))),k[p]=n?m:-1;n=new g.h;p=this.fi.get(0);p=this.gi.get(p);var t=p>>1;this.lf.tc(2*t,n);p=this.Fl.get(t);m=new c(n.x,n.y,p,t,k[p]);h=[];var x=1;for(r=this.fi.size;x<r;x++)if(p=this.fi.get(x),p=this.gi.get(p),0==(p&1)){t=p>>1;this.lf.tc(2*t,n);p=this.Fl.get(t);p=new c(n.x,n.y,p,t,k[p]);if(p.x==m.x&&p.y==m.y){if(p.Ai==m.Ai)return this.ke=new g.Md(9,p.xm,m.xm),!1;0<=k[p.Ai]&&k[p.Ai]==k[m.Ai]&&(0!=h.length&&h[h.length-1]==m||h.push(m),h.push(p))}m=p}if(0==h.length)return!0;
p=new g.jp(!0);g.O.$u(k,-1);n=-1;x=new g.h;x.Rc();m=0;for(r=h.length;m<r;m++){t=h[m];if(t.x!=x.x||t.y!=x.y)n=p.Ph(0),x.x=t.x,x.y=t.y;var K=k[t.Ai];-1==K&&(K=p.Ph(2),k[t.Ai]=K);p.addElement(K,n);p.addElement(n,K)}r=new g.ia(0);r.Jb(10);for(m=p.je;-1!=m;m=p.qz(m))if(h=p.PF(m),0==(h&1)&&0!=(h&2)){h=-1;r.add(m);for(r.add(-1);0<r.size;){n=r.Fc();r.If();x=r.Fc();r.If();t=p.PF(x);if(0!=(t&1)){h=0==(t&2)?n:x;break}p.fX(x,t|1);for(t=p.rc(x);-1!=t;t=p.lb(t))K=p.getData(t),K!=n&&(r.add(K),r.add(x))}if(-1!=h){p=
-1;m=0;for(r=k.length;m<r;m++)if(k[m]==h){p=m;break}this.ke=new g.Md(10,p,-1);return!1}}return!0};f.prototype.tO=function(){var h=this.X;if(0>=h.Ke())return this.ke=new g.Md(6,1==h.da()?1:-1,-1),0;if(1==h.da())return this.ql&&!this.JE()?0:2;this.to=g.ia.qf(h.da(),0);this.JA=g.ia.qf(h.da(),-1);for(var k=-1,m=0,n=0,p=h.da();n<p;n++){var r=h.Ir(n);this.to.write(n,0>r?0:256);if(0<r)k=n,m=r;else{if(0==r)return this.ke=new g.Md(6,n,-1),0;if(0>k||m<Math.abs(r))if(this.ke=new g.Md(7,n,-1),this.ql)return 0;
this.JA.write(n,k)}}this.dt=h.da();this.Om=new g.ia(0);this.Om.Jb(10);p=h.I();this.Mo=NaN;h=new g.ia(0);h.Jb(10);this.Qq=g.ia.qf(p,-1);this.Hw=g.ia.qf(p,-1);null!=this.zj?this.zj.clear(!1):this.zj=new g.ia(0);this.zj.Jb(10);this.fb.clear();this.fb.Vo(new b(this));k=0;for(p*=2;0<this.dt&&k<p;k++)if(m=this.fi.get(k),m=this.gi.get(m),0==(m&1)){m>>=1;n=this.lf.read(2*m+1);if(n!=this.Mo&&0!=h.size){if(!this.ut(h))return 0;null!=h&&h.clear(!1)}h.add(m);this.Mo=n}return 0<this.dt&&!this.ut(h)?0:this.ql?
0==this.ke.Jj&&this.JE()?2:0:0==this.ke.Jj?2:1};f.prototype.RI=function(h){if(1==h.size)return!0;for(var k=0,m=h.size;k<m;k++){var n=h.get(k);this.Zf.Vb(n);var p=this.Zf.li();this.hb.push(this.Su(p,n,this.Zf.gb,!0));this.Zf.ha();p=this.Zf.ha();this.hb.push(this.Su(p,n,this.Zf.gb,!1))}var r=this;this.hb.sort(function(K,ca){return r.XP(K,ca)});n=this.mh.je;-1==n&&(n=this.mh.Ph(0));this.mh.fn(this.hb.length);k=0;for(m=this.hb.length;k<m;k++)this.mh.addElement(n,k);k=!0;for(var t=m=-1;k;){k=!1;p=this.mh.rc(n);
if(-1==p)break;for(var x=this.mh.lb(p);-1!=x;){m=this.mh.getData(p);t=this.mh.getData(x);m=this.hb[m].Io;t=this.hb[t].Io;if(m==t)if(k=!0,this.mh.jd(n,p),p=this.mh.we(x),x=this.mh.jd(n,x),-1==x||-1==p)break;else continue;p=x;x=this.mh.lb(p)}}k=this.mh.bs(n);this.mh.LE(n);if(0<k)return this.ke=new g.Md(5,m,t),!1;k=0;for(m=h.size;k<m;k++)this.vB(this.hb[k]);this.hb.length=0;return!0};f.prototype.ut=function(h){for(var k=0,m=h.size;k<m;k++){var n=h.get(k),p=this.Qq.read(n);if(-1!=p){var r=this.fb.ja(p);
this.zj.add(r);this.fb.vd(p,-1);this.vB(this.hb[r]);this.hb[r]=null;this.Qq.write(n,-1)}p=this.Hw.read(n);-1!=p&&(r=this.fb.ja(p),this.zj.add(r),this.fb.vd(p,-1),this.vB(this.hb[r]),this.hb[r]=null,this.Hw.write(n,-1))}k=0;for(m=h.size;k<m;k++){n=h.get(k);this.Zf.Vb(n);p=this.Zf.li();if(p.na>p.la){var t=this.Zf.wb(),x=this.Su(p,n,this.Zf.gb,!0);0<this.zj.size?(r=this.zj.Fc(),this.zj.If(),this.hb[r]=x):(r=this.hb.length,this.hb.push(x));p=this.fb.addElement(r,-1);-1==this.Qq.read(t)?this.Qq.write(t,
p):this.Hw.write(t,p);0==(this.to.read(this.Zf.gb)&3)&&this.Om.add(p)}this.Zf.ha();p=this.Zf.ha();p.na<p.la&&(t=this.Zf.ik(),x=this.Su(p,n,this.Zf.gb,!1),0<this.zj.size?(r=this.zj.Fc(),this.zj.If(),this.hb[r]=x):(r=this.hb.length,this.hb.push(x)),p=this.fb.addElement(r,-1),-1==this.Qq.read(t)?this.Qq.write(t,p):this.Hw.write(t,p),0==(this.to.read(this.Zf.gb)&3)&&this.Om.add(p))}k=0;for(m=this.Om.size;k<m&&0<this.dt;k++)if(p=this.Om.get(k),0==(this.to.read(this.hb[this.fb.ja(p)].IA)&3)){h=-1;n=this.fb.we(p);
var K=p;x=null;r=-1;for(var ca=0;-1!=n;){r=this.fb.ja(n);x=this.hb[r];r=x.IA;ca=this.to.read(r);if(0!=(ca&3))break;K=n;n=this.fb.we(n)}-1==n?(t=1,n=K):(h=1==(ca&3)?r:this.JA.read(r),t=0!=x.XF()?0:1,n=this.fb.lb(n));do{r=this.fb.ja(n);x=this.hb[r];r=x.IA;K=this.to.read(r);if(0==(K&3)){if(t!=x.XF())return this.ke=new g.Md(6,r,-1),!1;ca=0==t||x.Wp()?2:1;K=K&252|ca;this.to.write(r,ca);if(2==ca&&0==this.ke.Jj&&this.JA.read(r)!=h&&(this.ke=new g.Md(7,r,-1),this.ql))return!1;this.dt--;if(0==this.dt)return!0}1==
(K&3)&&(h=r);K=n;n=this.fb.lb(n);t=0!=t?0:1}while(K!=p)}null!=this.Om?this.Om.clear(!1):this.Om=new g.ia(0);return!0};f.prototype.Su=function(h,k,m,n){if(322==h.getType())h=this.sP(h);else throw g.i.Qa();h.Io=k;h.IA=m;h.yq=0;h.nX(n);return h};f.prototype.sP=function(h){if(0<this.po.length){var k=this.po[this.po.length-1];--this.po.length;h.copyTo(k.ne)}else k=new N,k.ne=g.SC.jg(h);return k};f.prototype.vB=function(h){322==h.ne.getType()&&this.po.push(h)};f.prototype.kU=function(){for(var h=this.X.I(),
k=new g.ia(0),m=0;m<h;m++)k.add(m);var n=this;k.Vd(0,h,function(p,r){return n.Ou(p,r)});for(m=1;m<h;m++)if(0==this.Ou(k.get(m-1),k.get(m)))return this.ke=new g.Md(3,k.get(m-1),k.get(m)),0;return 2};f.prototype.JV=function(){return this.GE()?this.DE(!0)?2:0:0};f.prototype.oV=function(){return this.eT()};f.prototype.pU=function(){for(var h=this.X.I(),k=new g.ia(0),m=0;m<h;m++)k.add(m);var n=this;k.Vd(0,h,function(K,ca){return n.PO(K,ca)});var p=Array(h);g.O.$u(p,!1);p[k.get(0)]=!0;for(m=1;m<h;m++){var r=
k.get(m-1),t=k.get(m);0==this.Ou(r,t)?p[t]=!1:p[t]=!0}k=this.X.Ia();r=this.X;t=0;var x=1;for(m=0;m<h;m++)p[m]?x=m+1:(t<x&&k.Fd(r,t,x),t=m+1);t<x&&k.Fd(r,t,x);k.Ch(2,this.Bo);return k};f.prototype.NV=function(){var h=this.X,k=h.Ga(),m=h.Ga(),n=this.X.Ia(),p=this.X,r=h.hasAttribute(1),t=r?g.ta.wE(this.Qg,h,!0):0,x=new g.ia(0),K=new g.ia(0);x.Jb(g.O.truncate(h.I()/2+1));for(K.Jb(g.O.truncate(h.I()/2+1));k.$a();)if(m.$a(),!(2>h.Ja(k.gb))){m.EW();for(var ca,ha,da=!0;k.Ha();){var ka=k.ha(),ta=m.li();if(k.wb()>
m.wb())break;da&&(x.add(k.wb()),K.add(m.ik()),da=!1);ha=x.Fc();var ua=k.ik();if(1<ua-ha){var wa=new g.h;wa.uc(h.Na(ha),h.Na(ua));ca=wa.length()}else ca=ka.Qb();ha=K.Fc();ua=m.wb();1<ua-ha?(wa=new g.h,wa.uc(h.Na(ha),h.Na(ua)),ha=wa.length()):ha=ta.Qb();ca>this.Bo?x.add(k.ik()):r&&(ca=h.Uc(1,x.Fc(),0),ka=ka.gv(1,0),Math.abs(ka-ca)>t&&x.add(k.ik()));ha>this.Bo?K.add(m.wb()):r&&(ca=h.Uc(1,K.Fc(),0),ka=ta.gv(1,0),Math.abs(ka-ca)>t&&K.add(m.wb()))}x.Fc()<K.Fc()?x.size>K.size?x.If():K.If():(x.Fc()!=K.Fc()&&
K.If(),K.If());if(2<=K.size+x.size){da=new g.Sa;ta=0;for(ka=x.size;ta<ka;ta++)p.ve(x.get(ta),da),0==ta?n.nf(da):n.lineTo(da);for(ta=K.size-1;0<ta;ta--)p.ve(K.get(ta),da),n.lineTo(da);p.dc(k.gb)?n.Ap():0<K.size&&(p.ve(K.get(0),da),n.lineTo(da))}null!=x&&x.clear(!1);null!=K&&K.clear(!1)}n.Ch(2,this.Bo);return n};f.prototype.rV=function(){return this.DX()};f.prototype.DX=function(){if(1736==this.X.getType()&&1==this.X.In())return g.Fg.Mk(this.X,this.Bo,!0,!1,this.nd);this.Hi=new g.gd;this.Hi.Ib(this.X);
0!=this.Hi.fd&&(1!=this.xA&&g.Tk.V(this.Hi,this.Bo,this.nd,!0),1736==this.X.getType()&&g.rn.V(this.Hi,this.Hi.ld,this.xA,!1,this.nd));this.X=this.Hi.Ne(this.Hi.ld);1736==this.X.getType()&&(this.X.fm(),this.X.Yo(0));this.X.Ch(2,this.Bo);return this.X};f.rs=function(h,k,m,n,p){null!=n&&(n.Jj=0,n.Jo=-1,n.Ko=-1);if(h.B())return 1;var r=h.getType();if(33==r)return 1;var t=g.ta.kj(k,h,!1);if(197==r)return k=new g.l,h.A(k),k.Bi(t)?(null!=n&&(n.Jj=2,n.Jo=-1,n.Ko=-1),0):1;if(g.aa.yd(r))return t=new g.Ta(h.description),
t.oc(h,!0),f.rs(t,k,m,n,p);var x=h.om(t);m=m?-1:x;if(-1!=m)return m;k=new f(h,k,m,p,!1);if(550==r)m=k.kU();else if(1607==r)m=k.JV();else if(1736==r)m=k.oV();else throw g.i.Qa();h.Ch(m,t);null!=n&&0==m&&n.Wt(k.ke);return m};f.cK=function(h,k,m,n){if(h.B())return h;var p=h.getType();if(33==p)return h;var r=g.ta.kj(k,h,!1);if(197==p)return k=new g.l,h.A(k),k.Bi(r)?h.Ia():h;if(g.aa.yd(p))return p=new g.Ta(h.description),p.oc(h,!0),f.cK(p,k,m,n);r=h.om(r);m=m?-1:r;if(2==m)return h;h=new f(h,k,m,n,!1);
if(550==p)h=h.pU();else if(1607==p)h=h.NV();else if(1736==p)h=h.rV();else throw g.i.Qa();return h};f.prototype.Mh=function(h,k,m){if(h==k)return 0;h=this.gi.get(h);var n=this.gi.get(k);k=h>>1;var p=n>>1,r=new g.h,t=new g.h;this.lf.tc(2*k,r);r.y+=0!=(h&1)?this.Oj:-this.Oj;this.lf.tc(2*p,t);t.y+=0!=(n&1)?this.Oj:-this.Oj;h=r.compare(t);return 0==h&&m?(m=this.Fl.get(k)-this.Fl.get(p),0>m?-1:0<m?1:0):h};f.prototype.Ou=function(h,k){if(h==k)return 0;var m=this.X,n=m.Na(h),p=m.Na(k);if(n.x<p.x)return-1;
if(n.x>p.x)return 1;if(n.y<p.y)return-1;if(n.y>p.y)return 1;for(n=1;n<this.oT;n++){p=this.nH.kd(n);for(var r=g.ra.Va(p),t=0;t<r;t++){var x=m.Uc(p,h,t),K=m.Uc(p,k,t);if(x<K)return-1;if(x>K)return 1}}return 0};f.prototype.PO=function(h,k){var m=this.Ou(h,k);return 0==m?h<k?-1:1:m};f.prototype.XP=function(h,k){if(h===k)return 0;var m=h.ne.kg();h.Wp()&&m.Sq();h=k.ne.kg();k.Wp()&&h.Sq();k=m.qu();var n=h.qu();return n==k?(k=m.wi(h),Math.abs(k)<=8.881784197001252E-16*(Math.abs(h.x*m.y)+Math.abs(h.y*m.x))&&
(k--,k++),0>k?1:0<k?-1:0):k<n?-1:1};return f}();g.Jx=e})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 30};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.prototype.V=function(a,b,d,e){return a instanceof g.aa?(a=new g.Zc(a),b=new g.Zc(b),this.V(a,b,d,e).next()):new g.BL(a,b,d,e)};c.ep=function(a,b,d,e){var f=a.Db(),h=b.Db();if(a.B()&&b.B())return f>h?a:b;if(a.B())return b;
if(b.B())return a;var k=new g.l,m=new g.l,n=new g.l;a.A(k);b.A(m);n.K(k);n.Zb(m);k=g.ta.Wd(d,n,!0);m=a.getType();n=b.getType();return 33==m&&33==n?c.aV(a,b,k):m!=n?0<f||0<h?f>h?a:b:550==m?c.iI(a,b,k):c.iI(b,a,k):g.Fg.ep(a,b,d,e)};c.aV=function(a,b,d){d=d*Math.sqrt(2)*1.00001;d*=d;var e=a.D(),f=b.D(),h=new g.de(a.description);g.h.yc(e,f)>d&&(h.add(a),h.add(b));return h};c.iI=function(a,b,d){var e=a.ub(0),f=a.I(),h=b.D(),k=a.Ia();d=d*Math.sqrt(2)*1.00001;var m=new g.l;a.A(m);m.W(d,d);if(m.contains(h)){d*=
d;m=!1;for(var n=[],p=0;p<f;p++)n[p]=!1;for(p=0;p<f;p++){var r=e.read(2*p),t=e.read(2*p+1);r-=h.x;t-=h.y;r*r+t*t<=d&&(m=!0,n[p]=!0)}if(m)for(p=0;p<f;p++)n[p]||k.Fd(a,p,p+1);else k.Fd(a,0,f),k.add(b)}else k.Fd(a,0,f),k.add(b);return k};c.instance=null;return c}(g.Je);g.Kx=N})(ja||={});(function(g){var N=function(){function l(c,a,b,d){this.ts=null==a;this.ya=-1;this.Rd=c;this.vg=b;this.NT=a.next();this.Ub=d}l.prototype.next=function(){if(this.ts)return null;var c;return null!=(c=this.Rd.next())?(this.ya=
this.Rd.La(),g.Kx.ep(c,this.NT,this.vg,this.Ub)):null};l.prototype.La=function(){return this.ya};l.prototype.qe=function(){};return l}();g.BL=N})(ja||={});(function(g){var N=function(){function a(){}a.prototype.Fz=function(){this.$y=null;this.Ax=-1;this.AK=!1};return a}(),l=function(){function a(){this.Gr=0;this.pj=[]}a.prototype.pN=function(b){this.Gr+=b.Ax;this.pj.push(b)};a.prototype.TV=function(){this.Gr-=this.pj[this.pj.length-1].Ax;--this.pj.length};a.prototype.my=function(){return this.pj[this.pj.length-
1]};a.prototype.Nb=function(b){return b===this};return a}(),c=function(){function a(b,d,e){this.ya=-1;this.Ic=!1;this.AH=[!1,!1,!1,!1];this.uq=[0,0,0,0];this.jA=!1;this.zk=-1;this.iq=0;this.bo=-1;this.Do=[];this.Rd=b;this.vg=d;this.Ub=e}a.dE=function(b){var d=[],e=0;for(b=Object.keys(b);e<b.length;e++)d.push(Number(b[e]));d.sort(function(f,h){return f-h});return d};a.prototype.fG=function(b){var d=this.Do[b],e=a.dE(d)[0],f=d[e],h=f.my().$y;f=f.my().AK;delete d[e];f&&(h=g.Yl.local().V(h,this.vg,!1,
this.Ub),0==b&&33==h.getType()&&(b=new g.de(h.description),h.B()||b.add(h),h=b));return h};a.prototype.next=function(){if(this.Ic&&this.bo==this.zk)return null;for(;!this.qK(););if(-1==this.zk)return null;if(this.jA){for(this.bo++;;){if(this.bo>this.zk||0>this.bo)throw g.i.Qa();if(this.AH[this.bo])break}this.ya++;return this.fG(this.bo)}this.ya=0;this.bo=this.zk;return this.fG(this.zk)};a.prototype.La=function(){return this.ya};a.prototype.qK=function(){if(this.Ic)return!0;var b=null;null!=this.Rd&&
(b=this.Rd.next(),null==b&&(this.Ic=!0,this.Rd=null));g.mp.zp(this.Ub);if(null!=b){var d=b.Db();this.AH[d]=!0;d>=this.zk&&!this.jA&&(this.ND(d,!1,b),d>this.zk&&!this.jA&&this.zW(d))}if(0<this.iq)for(d=0;d<=this.zk;d++)for(;1<this.uq[d];)if(b=this.FO(d),0!=b.length)b=g.Fg.VP(b,this.vg,this.Ub),this.ND(d,!0,b);else break;return this.Ic};a.prototype.FO=function(b){for(var d=[],e=[],f=this.Do[b],h=a.dE(f),k=0;k<h.length;k++){var m=h[k],n=f[m];if(this.Ic||1E4<n.Gr&&1<n.pj.length){this.uq[b]-=n.pj.length;
for(this.iq-=n.pj.length;0<n.pj.length;)d.push(n.my().$y),n.TV();e.push(m)}}for(k=0;k<e.length;k++)delete f[e[k]];return d};a.prototype.zW=function(b){for(var d=0;d<b;d++)this.Do[d]=[],this.iq-=this.uq[d],this.uq[d]=0};a.prototype.ND=function(b,d,e){var f=new N;f.Fz();f.$y=e;e=a.eS(e);f.Ax=e;e=a.cS(e);if(b+1>this.Do.length)for(var h=0,k=Math.max(2,b+1);h<k;h++)this.Do.push([]);h=this.Do[b][e];void 0===h&&(h=new l,this.Do[b][e]=h);f.AK=d;h.pN(f);this.uq[b]++;this.iq++;this.zk=Math.max(this.zk,b)};
a.cS=function(b){return 0<b?g.O.truncate(Math.log(b)/Math.log(4)+.5):0};a.eS=function(b){var d=b.getType();if(g.aa.xj(d))return b.I();if(33==d)return 1;if(197==d)return 4;if(g.aa.yd(d))return 2;throw g.i.Qa();};a.prototype.qe=function(){this.qK()};return a}();g.DL=c})(ja||={});(function(g){var N=function(l){function c(){return null!==l&&l.apply(this,arguments)||this}qa(c,l);c.prototype.getType=function(){return 1};c.prototype.V=function(a,b,d,e){return void 0===e?new g.DL(a,b,d):this.gQ(a,b,d,e)};
c.prototype.gQ=function(a,b,d,e){a=new g.Zc([a,b]);return this.V(a,d,e).next()};c.local=function(){null===c.instance&&(c.instance=new c);return c.instance};c.instance=null;return c}(g.Je);g.Gh=N})(ja||={});(function(g){(function(l){l[l.nextPath=0]="nextPath";l[l.nextSegment=1]="nextSegment";l[l.iterate=2]="iterate"})(N||={});var N=function(){function l(c,a,b,d){this.Ts=new g.l;this.GT=c;this.HT=a;this.mq=d;this.uo=-1;this.rl=!1;var e=c.Bb;null!=e&&(e=d?e.zo:e.Fb,null!=e&&(this.Ic=!1,this.qa=b,this.Fb=
e,this.xw=this.Fb.getIterator(),this.nq=this.rl=!0,this.Xb=0,d?this.uo=a.da():this.sd=a.Ga()));this.rl||(e=a.Bb,null!=e&&(e=d?e.zo:e.Fb,null!=e&&(this.Ic=!1,this.qa=b,this.Fb=e,this.xw=this.Fb.getIterator(),this.rl=!0,this.nq=!1,this.Xb=0,d?this.uo=c.da():this.sd=c.Ga())));this.rl||(this.ci=d?g.ta.mR(c,a,b,1<=c.om(0),1<=a.om(0)):g.ta.lR(c,a,b))}l.prototype.next=function(){if(this.rl){if(this.Ic)return!1;for(var c=!0;c;)switch(this.Xb){case 0:c=this.xU();break;case 1:c=this.yU();break;case 2:c=this.Uz();
break;default:throw g.i.fa("internal error");}return this.Ic?!1:!0}return null==this.ci?!1:this.ci.next()};l.prototype.nl=function(){return this.rl?this.nq?this.Fb.ja(this.Fs):this.mq?this.uo:this.sd.wb():this.ci.nl(this.ci.Vf)};l.prototype.hl=function(){return this.rl?this.nq?this.mq?this.uo:this.sd.wb():this.Fb.ja(this.Fs):this.ci.hl(this.ci.Af)};l.prototype.uz=function(){if(!this.mq)throw g.i.fa("internal error");return this.rl?this.nq?this.Fb.GF(this.Fs):this.Ts:this.ci.uz(this.ci.Vf)};l.prototype.az=
function(){if(!this.mq)throw g.i.fa("internal error");return this.rl?this.nq?this.Ts:this.Fb.GF(this.Fs):this.ci.az(this.ci.Af)};l.prototype.xU=function(){if(!this.mq){if(!this.sd.$a())return this.Ic=!0,!1;this.Xb=1;return!0}if(-1==--this.uo)return this.Ic=!0,!1;this.nq?this.HT.Rj(this.uo,this.Ts):this.GT.Rj(this.uo,this.Ts);this.xw.Xi(this.Ts,this.qa);this.Xb=2;return!0};l.prototype.yU=function(){if(!this.sd.Ha())return this.Xb=0,!0;var c=this.sd.ha();this.xw.Uo(c,this.qa);this.Xb=2;return!0};l.prototype.Uz=
function(){this.Fs=this.xw.next();return-1==this.Fs?(this.Xb=this.mq?0:1,!0):!1};return l}();g.Zl=N})(ja||={});(function(g){g=g.OL||(g.OL={});g[g.enumClosed=1]="enumClosed";g[g.enumHasNonlinearSegments=2]="enumHasNonlinearSegments";g[g.enumOGCStartPolygon=4]="enumOGCStartPolygon";g[g.enumCalcMask=4]="enumCalcMask"})(ja||={});(function(g){g.QC=function(){function N(){}N.tb=function(l,c,a,b,d,e,f,h,k){var m=[0,0,0],n=[0,0,0],p=[0,0,0],r=[0,0,0,0],t=new g.ga(0),x=new g.ga(0),K=new g.ga(0);if(null!=f||
null!=h||null!=k)if(g.s.ti(c))g.Yg.tb(l,a,b,d,e,f,h,k);else{d=g.F.ba(d);a=g.F.ba(a);var ca=g.F.ba(d-a);if(g.s.Y(b,e)&&(g.s.Y(a,d)||g.s.Y(g.s.P(b),1.570796326794897)))null!=f&&(f.u=0),null!=h&&(h.u=0),null!=k&&(k.u=0);else{if(g.s.Y(b,-e)){if(g.s.Y(g.s.P(b),1.570796326794897)){null!=f&&(f.u=2*g.F.Ah(l,c));null!=h&&(h.u=0<b?g.F.ba(3.141592653589793-g.F.ba(d)):g.F.ba(d));null!=k&&(k.u=0<b?g.F.ba(d):g.F.ba(3.141592653589793-g.F.ba(d)));return}g.s.Y(g.s.P(ca),3.141592653589793)&&(null!=f&&(f.u=2*g.F.Ah(l,
c)),null!=h&&(h.u=0),null!=k&&(k.u=0))}else{if(g.s.Y(g.s.P(b),1.570796326794897)||g.s.Y(g.s.P(e),1.570796326794897)){g.Wk.tb(l,c,a,b,d,e,f,h,k);return}if(g.s.Y(a,d)||g.s.Y(g.s.P(ca),3.141592653589793)){g.Wk.tb(l,c,a,b,d,e,f,h,k);return}if(g.s.Cd(b)){g.Wk.tb(l,c,a,b,d,e,f,h,k);return}}var ha=Math.sqrt(1-c);d=g.F.ba(d-a);a=0;g.F.cl(1,c,b,a,0,t,x,K);m[0]=t.u;m[1]=x.u;m[2]=K.u;g.F.cl(1,c,e,d,0,t,x,K);n[0]=t.u;n[1]=x.u;n[2]=K.u;p[0]=0;p[1]=0;p[2]=-1*c*g.F.n(1,c,b)*Math.sin(b);0>d?g.F.Wq(p,n,m,r,0):g.F.Wq(p,
m,n,r,0);x=[0,0,0];K=[0,0,0];var da=[0,0,0];m=[0,0,0];t=[0,0,0];var ka=Math.acos(r[2]/1),ta=1-c,ua=Math.tan(ka),wa=1+ua*ua/ta,Ea=2*p[2]*ua/ta;ua=Math.sqrt(Ea*Ea-4*wa*(p[2]*p[2]/ta-1));wa*=2;ta=(-Ea+ua)/wa;Ea=(-Ea-ua)/wa;ua=Math.tan(ka);wa=ua*ta+p[2];ka=(ta+Ea)/2;p=(wa+(ua*Ea+p[2]))/2;ua=g.F.gp(ta-ka,wa-p);ta=p/ha*1.570796326794897;for(Ea=0;100>Ea;Ea++){wa=g.F.w(c,ta);wa=wa*wa/Math.cos(ta)*(Math.sin(ta)-p*wa/(1-c));if(g.s.Cd(wa))break;ta-=wa}p=g.F.n(1,c,ta)*Math.cos(ta);p=Math.sqrt((p-ka)*(p+ka));
ua=1-ua/p;ua*=2-ua;wa=g.F.on(x);ka=g.F.on(K);ta=g.F.on(da);var Ga=g.F.St(da,x);Ea=g.F.St(da,K);g.F.zx(da,x,m);g.F.zx(da,K,t);x=Math.acos(Ga/(ta*wa));K=Math.acos(Ea/(ta*ka));K*=g.s.Mb(1,g.F.St(m,t));if(1.570796326794897<=g.s.P(x)&&1.570796326794897<=g.s.P(K)||3.141592653589793<g.s.P(x-K))x=(3.141592653589793-g.s.P(x))*g.s.Mb(1,x),K=(3.141592653589793-g.s.P(K))*g.s.Mb(1,K);m=g.F.Qj(ua,K);t=g.F.q(p,ua,g.F.Qj(ua,x));m=g.F.q(p,ua,m);m=g.s.P(m-t)*l;x=new g.ga(0);K=new g.ga(0);da=r[1]/1;da*=-g.s.Mb(1,ca);
t=Math.acos(da)*g.s.Mb(1,ca);N.rf(l,c,a,b,m,t,x,K);g.s.Y(d,x.u)&&g.s.Y(e,K.u)||(ua=g.F.gp(g.F.ba(d-x.u),e-K.u),N.rf(l,c,a,b,m,g.F.ba(t+3.141592653589793),x,K),wa=g.F.gp(g.F.ba(d-x.u),e-K.u),wa<ua&&(t=g.F.ba(t+3.141592653589793)));x=[0,0,0,0];K=[0,0,0,0];p=[0,0,0];ua=[0,0,0];l=[0,0,0];a=[0,0,0];b=[0,0,0];da=[0,0,0];p[0]=0;p[1]=0;p[2]=ha;ua[0]=0;ua[1]=0;ua[2]=0;g.F.Wq(ua,p,n,x,0);g.s.Cd(e)?(l[0]=n[0],l[1]=n[1],l[2]=1,a[0]=1*Math.cos(d)-1*Math.sin(d),a[1]=1*Math.sin(d)+1*Math.cos(d)):(c=g.F.n(1,c,e)*
Math.cos(e),l[0]=0,l[1]=0,n[2]+=Math.tan(1.570796326794897-g.s.P(e))*c*g.s.Mb(1,e),a[0]=c*Math.cos(d)-c*Math.sin(d),a[1]=c*Math.sin(d)+c*Math.cos(d));a[2]=n[2];g.F.Wq(n,a,l,K,1);g.F.zx(K,x,b);g.F.zx(K,r,da);da=g.F.St(b,da)/(g.F.on(b)*g.F.on(da));da*=g.s.Mb(1,ca);d=Math.acos(da)*-g.s.Mb(1,ca);0<t&&0<d?d=g.F.ba(d+3.141592653589793):0>t&&0>d&&(d=g.F.ba(d+3.141592653589793));null!=f&&(f.u=m);null!=h&&(h.u=t);null!=k&&(k.u=d)}}};N.rf=function(l,c,a,b,d,e,f,h){var k=[0,0,0],m=[0,0,0],n=[0,0,0],p=[0,0,0],
r=[0,0,0],t=[0,0,0],x=[0,0,0],K=[0,0,0,0],ca=new g.ga(0),ha=new g.ga(0),da=new g.ga(0),ka=new g.ga(0),ta=new g.ga(0),ua=new g.ga(0);if(null!=f&&null!=h)if(g.s.ti(c))g.Yg.rf(l,a,b,d,e,f,h);else if(g.s.Cd(d))null!=f&&(f.u=a),null!=h&&(h.u=b);else if(e=g.F.ba(e),0>d&&(d=g.s.P(d),e=g.F.ba(e+3.141592653589793)),a=g.F.ba(a),b=g.F.ba(b),1.570796326794897<g.s.P(b)&&(a=g.F.ba(a+3.141592653589793),b=g.s.Mb(3.141592653589793,b)-b),g.s.Y(g.s.P(b),1.570796326794897)||g.s.Cd(b)||g.s.Cd(e)||g.s.Y(g.s.P(e),3.141592653589793))g.Wk.rf(l,
c,a,b,d,e,f,h);else{var wa=Math.sqrt(1-c);l=d/l;g.F.cl(1,c,b,0,0,ka,ta,ua);k[0]=ka.u;k[1]=ta.u;k[2]=ta.u;x[0]=0;x[1]=0;x[2]=-1*c*g.F.n(1,c,b)*Math.sin(b);ka=g.F.n(1,c,b);ta=g.F.ba(1.570796326794897-e);ua=Math.sin(ta);d=Math.cos(b);b=Math.sin(b);r[0]=ka*d-b*ua;r[1]=Math.cos(ta);r[2]=(1-c)*ka*b+d*ua;0>e?g.F.Wq(x,r,k,K,0):g.F.Wq(x,k,r,K,0);k=Math.acos(K[2]/1);K=Math.atan2(-K[1],-K[0]);b=1-c;r=Math.tan(k);ta=1+r*r/b;ka=2*x[2]*r/b;r=Math.sqrt(ka*ka-4*ta*(x[2]*x[2]/b-1));ta*=2;b=(-ka+r)/ta;ka=(-ka-r)/ta;
r=Math.tan(k);ta=r*b+x[2];k=(b+ka)/2;x=(ta+(r*ka+x[2]))/2;r=g.F.gp(b-k,ta-x);wa=x/wa*1.570796326794897;for(b=0;100>b;b++){ka=g.F.w(c,wa);ka=ka*ka/Math.cos(wa)*(Math.sin(wa)-x*ka/(1-c));if(g.s.Cd(ka))break;wa-=ka}wa=g.F.n(1,c,wa)*Math.cos(wa);wa=Math.sqrt((wa-k)*(wa+k));x=1-r/wa;x*=2-x;t=Math.acos(g.F.St(t,m)/(g.F.on(t)*g.F.on(m)));t*=g.s.Mb(1,m[0]);e=(g.F.q(wa,x,g.F.Qj(x,t))+l*g.s.Mb(1,e))/g.F.Ah(wa,x);e=g.F.ba(1.570796326794897*e);e=g.F.Rq(x,e);g.F.n(wa,x,e);r=g.F.ba(K+a);a=Math.cos(r);e=Math.sin(r);
n[0]=p[0]*a+p[1]*-e;n[1]=p[0]*e+p[1]*a;n[2]=p[2];g.F.jO(c,n[0],n[1],n[2],da,ha,ca);null!=f&&(f.u=ha.u);null!=h&&(h.u=da.u)}};return N}()})(ja||={});(function(g){var N=function(){function d(e){this.Ya=null;this.wt=new g.h;this.xt=new g.h;this.g=e}d.prototype.compare=function(e,f,h){this.g.Gc(f,this.wt);this.g.Gc(e.ja(h),this.xt);return this.wt.compare(this.xt)};return d}(),l=function(){function d(e){this.Bf=new g.h;this.Dk=new g.h;this.g=e}d.prototype.Dh=function(e){this.Bf.L(e)};d.prototype.compare=
function(e,f){this.g.Gc(e.ja(f),this.Dk);return this.Bf.compare(this.Dk)};return d}(),c=function(d){function e(f){var h=d.call(this,f.g,f.qa,!1)||this;h.ib=f;return h}qa(e,d);e.prototype.compare=function(f,h,k){if(this.rg)return-1;var m=this.ib.Qd.Jn(this.ib.Rh(h));f=f.ja(k);var n=this.ib.Qd.Jn(this.ib.Rh(f));this.Dm=k;return this.RE(h,m,f,n)};return e}(g.UC),a=function(d){function e(f){var h=d.call(this,f.g,f.qa)||this;h.ib=f;return h}qa(e,d);e.prototype.compare=function(f,h){if(this.rg)return-1;
f=this.ib.Qd.Jn(this.ib.Rh(f.ja(h)));this.Dm=h;return this.SE(h,f)};return e}(g.aM),b=function(){function d(){this.Mc=this.df=this.jo=this.Qd=this.lh=this.zd=this.hb=this.g=null;this.Ng=!1;this.vh=this.Nm=this.ie=this.Gk=this.nh=this.Ak=this.Ff=this.$d=null;this.xh=this.Jq=this.UA=this.qa=0;this.Xv=this.Wn=!1;this.yo=new g.h;this.Pi=new g.h;this.hb=new g.$c(8);this.zd=new g.$c(5);this.lh=new g.au;this.Qd=new g.au;this.Ng=!1;this.vh=new g.h;this.vh.ma(0,0);this.qa=0;this.xh=-1;this.Wn=!1;this.g=null;
this.df=new g.Yj;this.Mc=new g.Yj;this.nh=new g.ia(0);this.Gk=new g.TC;this.Ff=new g.ia(0);this.Ak=new g.ia(0);this.jo=new g.Sa}d.prototype.PX=function(e,f){var h=new g.Dd;h.$B();e.Oc(h);this.er(e);this.Wn=!1;this.qa=f;this.UA=f*f;f=this.jC();e.Oc(h);f||(this.qQ(),f||this.jC());-1!=this.xh&&(this.g.Td(this.xh),this.xh=-1);this.g=null;return this.Wn};d.prototype.TX=function(e,f){this.er(e);this.Wn=!1;this.qa=f;this.UA=f*f;this.Ng=!1;this.jC();this.Ng||(this.Ng=1==e.Gp(f,!0,!1));-1!=this.xh&&(this.g.Td(this.xh),
this.xh=-1);this.g=null};d.prototype.pg=function(e,f){return this.hb.T(e,0+f)};d.prototype.LB=function(e,f,h){this.hb.S(e,0+f,h)};d.prototype.Rh=function(e){return this.hb.T(e,2)};d.prototype.ZW=function(e,f){this.hb.S(e,2,f)};d.prototype.RF=function(e,f){return this.hb.T(e,3+f)};d.prototype.Pp=function(e){return this.hb.T(e,7)};d.prototype.Pl=function(e,f){this.hb.S(e,7,f)};d.prototype.Rp=function(e,f){return this.hb.T(e,3+this.Op(e,f))};d.prototype.fr=function(e,f,h){this.hb.S(e,3+this.Op(e,f),
h)};d.prototype.NR=function(e,f){return this.hb.T(e,5+this.Op(e,f))};d.prototype.hr=function(e,f,h){this.hb.S(e,5+this.Op(e,f),h)};d.prototype.Sr=function(e){return this.zd.T(e,0)};d.prototype.UW=function(e,f){this.zd.S(e,0,f)};d.prototype.ez=function(e){return this.zd.T(e,4)};d.prototype.cr=function(e,f){this.zd.S(e,4,f)};d.prototype.il=function(e){return this.zd.T(e,1)};d.prototype.ln=function(e,f){this.zd.S(e,1,f)};d.prototype.dz=function(e){return this.zd.T(e,3)};d.prototype.Et=function(e,f){this.zd.S(e,
3,f)};d.prototype.Ym=function(e){var f=this.zd.Ce(),h=this.lh.Ph();this.UW(f,h);-1!=e?(this.lh.addElement(h,e),this.g.Ra(e,this.xh,f),this.cr(f,this.g.Ua(e))):this.cr(f,-1);return f};d.prototype.HP=function(e){this.zd.jd(e)};d.prototype.LD=function(e,f){this.lh.addElement(this.Sr(e),f);this.g.Ra(f,this.xh,e)};d.prototype.nt=function(e){var f=this.hb.Ce(),h=this.Qd.Ph();this.ZW(f,h);-1!=e&&this.Qd.addElement(h,e);return f};d.prototype.MD=function(e,f){this.Qd.addElement(this.Rh(e),f)};d.prototype.Uu=
function(e){this.hb.jd(e);e=this.nh.lF(e);0<=e&&this.nh.SV(e)};d.prototype.hj=function(e,f){if(-1==this.pg(e,0))this.LB(e,0,f);else if(-1==this.pg(e,1))this.LB(e,1,f);else throw g.i.Qa();this.ky(e,f)};d.prototype.ky=function(e,f){var h=this.il(f);if(-1!=h){var k=this.Rp(h,f);this.hr(k,f,e);this.fr(e,f,k);this.fr(h,f,e);this.hr(e,f,h)}else this.hr(e,f,e),this.fr(e,f,e),this.ln(f,e)};d.prototype.Op=function(e,f){return this.pg(e,0)==f?0:1};d.prototype.Xm=function(e,f){var h=this.dz(f);-1!=h&&(this.df.vd(h,
-1),this.Et(f,-1));var k;h=this.il(f);if(-1!=h){var m=k=h;do{var n=!1,p=this.Op(k,f),r=this.RF(k,p);if(this.pg(k,p+1&1)==e){this.Xu(k);this.Qd.bh(this.Rh(k));this.Uu(k);if(k==r){h=-1;break}h==k&&(h=this.il(f),m=r,n=!0)}k=r}while(k!=m||n);if(-1!=h){do p=this.Op(k,f),r=this.RF(k,p),this.LB(k,p,e),k=r;while(k!=m);k=this.il(e);-1!=k?(m=this.Rp(k,e),n=this.Rp(h,e),m==k?(this.ln(e,h),this.ky(k,e),this.ln(e,k)):n==h&&this.ky(h,e),this.fr(h,e,m),this.hr(m,e,h),this.fr(k,e,n),this.hr(n,e,k)):this.ln(e,h)}}h=
this.Sr(e);k=this.Sr(f);for(m=this.lh.rc(k);-1!=m;m=this.lh.lb(m))this.g.Ra(this.lh.ja(m),this.xh,e);this.lh.Hy(h,k);this.HP(f)};d.prototype.UT=function(e,f){var h=this.pg(e,0),k=this.pg(e,1),m=this.pg(f,0),n=this.pg(f,1);this.Qd.Hy(this.Rh(e),this.Rh(f));f==this.il(h)&&this.ln(h,e);f==this.il(k)&&this.ln(k,e);this.Xu(f);this.Uu(f);h==m&&k==n||k==m&&h==n||(this.Hn(h,this.yo),this.Hn(m,this.Pi),this.yo.qb(this.Pi)?(h!=m&&this.Xm(h,m),k!=n&&this.Xm(k,n)):(k!=m&&this.Xm(k,m),h!=n&&this.Xm(h,n)))};d.prototype.Xu=
function(e){var f=this.pg(e,1);this.dF(e,this.pg(e,0));this.dF(e,f)};d.prototype.dF=function(e,f){var h=this.Rp(e,f),k=this.NR(e,f),m=this.il(f);h!=e?(this.fr(k,f,h),this.hr(h,f,k),m==e&&this.ln(f,h)):this.ln(f,-1)};d.prototype.WD=function(e,f,h){var k=this.Qd.rc(e),m=this.Qd.ja(k);e=this.Le(m);var n=this.Le(this.g.U(m));this.g.jr(m,f,h,!0);for(k=this.Qd.lb(k);-1!=k;k=this.Qd.lb(k)){m=this.Qd.ja(k);var p=this.Le(m)==e;this.g.jr(m,f,h,p)}k=f.Vp(h,0).ac();f=f.Vp(h,f.ol(h)-1).wc();this.BK(e,k);this.BK(n,
f)};d.prototype.ZE=function(e,f,h){var k=this.Rh(e),m=this.pg(e,0),n=this.pg(e,1),p=this.nt(-1);this.nh.add(p);this.Pl(p,-3);this.Ff.add(p);this.hj(p,m);e=1;for(f=f.ol(h);e<f;e++)h=this.Ym(-1),this.Ak.add(h),this.Ff.add(h),this.hj(p,h),p=this.nt(-1),this.nh.add(p),this.Pl(p,-3),this.Ff.add(p),this.hj(p,h);this.hj(p,n);for(k=this.Qd.rc(k);-1!=k;k=this.Qd.lb(k))if(n=this.Qd.ja(k),this.Le(n)==m){e=0;do 0<e&&(p=this.Ff.get(e-1),this.LD(p,n),-1==this.ez(p)&&this.cr(p,this.g.Ua(n))),p=this.Ff.get(e),e+=
2,this.MD(p,n),n=this.g.U(n);while(e<this.Ff.size)}else{e=this.Ff.size-1;do e<this.Ff.size-2&&(p=this.Ff.get(e+1),this.LD(p,n),0>this.ez(p)&&this.cr(p,this.g.Ua(n))),p=this.Ff.get(e),e-=2,this.MD(p,n),n=this.g.U(n);while(0<=e)}this.Ff.clear(!1)};d.prototype.Le=function(e){return this.g.Pa(e,this.xh)};d.prototype.TI=function(e,f,h){var k=this.pg(f,0),m=new g.h;this.Hn(k,m);var n=new g.h,p=this.pg(f,1);this.Hn(p,n);var r=h.ol(e),t=h.Vp(e,0),x=new g.h;t.Yp(x);if(!m.qb(x)){if(!this.Ng){var K=m.compare(this.vh);
x=x.compare(this.vh);0>K*x&&(this.Ng=!0)}this.vF(k,this.Ff);this.Ak.add(k)}!this.Ng&&1<r&&(K=m.compare(n),t=t.wc(),m.compare(t)!=K||t.compare(n)!=K?this.Ng=!0:0>t.compare(this.vh)&&(this.Ng=!0));t=h.Vp(e,r-1);e=t.wc();n.qb(e)||(this.Ng||(K=n.compare(this.vh),x=e.compare(this.vh),0>K*x&&(this.Ng=!0)),this.vF(p,this.Ff),this.Ak.add(p));this.Ff.add(f);n=0;for(p=this.Ff.size;n<p;n++)e=this.Ff.get(n),h=this.Pp(e),g.$c.LG(h)&&(this.Mc.vd(h,-1),this.Pl(e,-1)),e!=f&&-3!=this.Pp(e)&&(this.nh.add(e),this.Pl(e,
-3));this.Ff.clear(!1)};d.prototype.lO=function(e,f){this.$d.compare(this.Mc,this.Mc.ja(e),f);this.$d.rg&&(this.$d.Kr(),this.oF(e,f))};d.prototype.oF=function(e,f){this.Wn=!0;e=this.Mc.ja(e);f=this.Mc.ja(f);var h=this.Qd.Jn(this.Rh(e)),k=this.Qd.Jn(this.Rh(f)),m=this.g.bc(h);null==m&&(null==this.ie&&(this.ie=new g.yb),this.g.ed(h,this.ie),m=this.ie);h=this.g.bc(k);null==h&&(null==this.Nm&&(this.Nm=new g.yb),this.g.ed(k,this.Nm),h=this.Nm);this.Gk.Oo(m);this.Gk.Oo(h);this.Gk.Ea(this.qa,!0)&&(this.Ng=
!0);this.hK(e,f,-1,this.Gk);this.Gk.clear()};d.prototype.GQ=function(e,f){this.Wn=!0;f=this.Mc.ja(f);var h=this.Qd.Jn(this.Rh(f)),k=this.g.bc(h);null==k&&(null==this.ie&&(this.ie=new g.yb),this.g.ed(h,this.ie),k=this.ie);h=this.BF(e);this.Gk.Oo(k);this.g.Vi(h,this.jo);this.Gk.Kz(this.qa,this.jo,!0);this.hK(f,-1,e,this.Gk);this.Gk.clear()};d.prototype.xS=function(){if(0!=this.nh.size)for(;0!=this.nh.size;){if(this.nh.size>Math.max(100,this.g.fd)){this.nh.clear(!1);this.Ng=!0;break}var e=this.nh.Fc();
this.nh.If();this.Pl(e,-1);-1!=this.WS(e)&&this.wS(e);this.Vn=!1}};d.prototype.wS=function(e){if(this.Vn){var f=this.Mc.zu(this.MH,this.GH,e,!0);this.Vn=!1}else f=this.Mc.KD(e);-1==f?this.UT(this.Mc.ja(this.Mc.FF()),e):(this.Pl(e,f),this.$d.rg&&(this.$d.Kr(),this.oF(this.$d.Dm,f)))};d.prototype.WS=function(e){var f=this.pg(e,0);e=this.pg(e,1);this.Hn(f,this.yo);this.Hn(e,this.Pi);if(g.h.yc(this.yo,this.Pi)<=this.UA)return this.Ng=!0,-1;var h=this.yo.compare(this.vh),k=this.Pi.compare(this.vh);return 0>=
h&&0<k?e:0>=k&&0<h?f:-1};d.prototype.oQ=function(){var e=new g.ia(0);e.Jb(this.g.fd);for(var f=this.g.Yq(),h=f.next();-1!=h;h=f.next())-1!=this.g.Pa(h,this.xh)&&e.add(h);this.g.nx(e,e.size);this.pQ(e)};d.prototype.pQ=function(e){this.df.clear();this.df.De(e.size);this.df.Vo(new N(this.g));var f=new g.h;f.Rc();for(var h=-1,k=new g.h,m=0,n=e.size;m<n;m++){var p=e.get(m);this.g.Gc(p,k);k.qb(f)?(p=this.g.Pa(p,this.xh),this.Xm(h,p)):(h=this.Le(p),this.g.Gc(p,f),p=this.df.xn(p),this.Et(h,p))}};d.prototype.qQ=
function(){var e=new g.ia(0);e.Jb(this.g.fd);for(var f=this.df.rc(-1);-1!=f;f=this.df.lb(f))e.add(this.df.ja(f));this.df.clear();this.g.nx(e,e.size);f=0;for(var h=e.size;f<h;f++){var k=e.get(f),m=this.Le(k);k=this.df.xn(k);this.Et(m,k)}};d.prototype.vF=function(e,f){var h=this.il(e);if(-1!=h){var k=h;do g.$c.LG(this.Pp(k))&&f.add(k),k=this.Rp(k,e);while(k!=h)}};d.prototype.BK=function(e,f){for(e=this.lh.rc(this.Sr(e));-1!=e;e=this.lh.lb(e))this.g.mf(this.lh.ja(e),f)};d.prototype.hK=function(e,f,h,
k){this.Xu(e);-1!=f&&this.Xu(f);this.TI(0,e,k);-1!=f&&this.TI(1,f,k);-1!=h&&(k.Bf.D(this.yo),this.Hn(h,this.Pi),this.Pi.qb(this.yo)||this.Ak.add(h));h=0;for(var m=this.Ak.size;h<m;h++){var n=this.Ak.get(h),p=this.dz(n);-1!=p&&(this.df.vd(p,-1),this.Et(n,-1))}h=this.Rh(e);m=-1!=f?this.Rh(f):-1;this.WD(h,k,0);-1!=f&&this.WD(m,k,1);this.ZE(e,k,0);-1!=f&&this.ZE(f,k,1);this.Qd.bh(h);this.Uu(e);-1!=f&&(this.Qd.bh(m),this.Uu(f));h=0;for(m=this.Ak.size;h<m;h++)n=this.Ak.get(h),n==this.Jq&&(this.Xv=!0),p=
this.dz(n),-1==p&&(p=this.df.KD(this.BF(n)),-1==p?(e=this.Le(this.df.ja(this.df.FF())),this.Xm(e,n)):this.Et(n,p));this.Ak.clear(!1)};d.prototype.Hn=function(e,f){this.g.dG(this.ez(e),f)};d.prototype.BF=function(e){return this.lh.Jn(this.Sr(e))};d.prototype.jC=function(){this.Xv=!1;this.Jq=-1;null==this.$d&&(this.Mc.Rv=!1,this.$d=new c(this),this.Mc.Zn=this.$d);var e=new g.ia(0),f=null,h=null;this.GH=this.MH=-1;this.Vn=!1;for(var k=this.df.rc(-1);-1!=k;){this.Vn=!1;var m=this.df.ja(k);this.Jq=this.Le(m);
this.g.Gc(m,this.vh);this.$d.$J(this.vh.y,this.vh.x);var n=this.il(this.Jq),p=-1==n;if(!p){m=n;do{var r=this.Pp(m);-1==r?(this.nh.add(m),this.Pl(m,-3)):-3!=r&&e.add(r);m=this.Rp(m,this.Jq)}while(m!=n)}if(0<e.size){this.Vn=1==e.size&&1==this.nh.size;p=0;for(n=e.size;p<n;p++)m=this.Mc.ja(e.get(p)),this.Pl(m,-2);var t=-2,x=-2;p=0;for(n=e.size;p<n;p++){r=e.get(p);if(-2==t){var K=this.Mc.we(r);-1!=K?(m=this.Mc.ja(K),m=this.Pp(m),-2!=m&&(t=K)):t=-1}-2==x&&(r=this.Mc.lb(r),-1!=r?(m=this.Mc.ja(r),m=this.Pp(m),
-2!=m&&(x=r)):x=-1);if(-2!=t&&-2!=x)break}p=0;for(n=e.size;p<n;p++)r=e.get(p),m=this.Mc.ja(r),this.Mc.vd(r,-1),this.Pl(m,-1);e.clear(!1);this.MH=-1!=t?t:-1;this.GH=-1!=x?x:-1;-1!=t&&-1!=x?this.Vn||this.lO(t,x):-1==t&&-1==x&&(this.Vn=!1)}else p&&(null==f&&(f=new a(this)),f.Dh(this.vh),this.Mc.uJ(f),f.rg&&(f.Kr(),this.GQ(this.Jq,f.Dm)));this.xS();this.Xv?(this.Xv=!1,null==h&&(h=new l(this.g)),h.Dh(this.vh),k=this.df.uJ(h)):k=this.df.lb(k)}return this.Wn};d.prototype.er=function(e){this.g=e;this.xh=
this.g.Gd();this.hb.De(e.fd+32);this.zd.De(e.fd);this.lh.At(e.fd);this.lh.fn(e.fd);this.Qd.At(e.fd+32);this.Qd.fn(e.fd+32);for(e=this.g.ld;-1!=e;e=this.g.ue(e))if(g.aa.Hc(this.g.ic(e)))for(r=this.g.Ob(e);-1!=r;r=this.g.Rb(r)){var f=this.g.Ja(r),h=this.g.Xa(r),k=this.Ym(h),m=this.nt(h);this.hj(m,k);t=this.g.U(h);h=0;for(f-=2;h<f;h++){var n=this.g.U(t),p=this.Ym(t);this.hj(m,p);m=this.nt(t);this.hj(m,p);t=n}this.g.dc(r)?(p=this.Ym(t),this.hj(m,p),m=this.nt(t),this.hj(m,p),this.hj(m,k)):(p=this.Ym(t),
this.hj(m,p))}else for(var r=this.g.Ob(e);-1!=r;r=this.g.Rb(r)){var t=this.g.Xa(r);k=0;for(f=this.g.Ja(r);k<f;k++)this.Ym(t),t=this.g.U(t)}this.oQ()};return d}();g.RC=b})(ja||={});(function(g){var N=function(l){function c(a,b,d){var e=l.call(this)||this;if(void 0!==a)if(void 0!==d){e.description=g.ee.og();var f=new g.Nd;f.K(a,b,d);e.dC(f)}else if(void 0!==b)e.description=g.ee.og(),e.Cb(a,b);else if(a instanceof g.ra)e.description=a;else if(a instanceof g.h)e.description=g.ee.og(),e.Cb(a);else if(a instanceof
c)e.description=a.description,e.Cb(a.Lg(),a.ih()),null!==a.ka&&(e.ka=a.ka.slice(0));else throw g.i.N();else e.description=g.ee.og();return e}qa(c,l);c.prototype.D=function(a){if(void 0!==a){if(this.Ac())throw g.i.fa("This operation should not be performed on an empty geometry.");a.ma(this.ka[0],this.ka[1])}else{if(this.Ac())throw g.i.fa("This operation should not be performed on an empty geometry.");a=new g.h;a.ma(this.ka[0],this.ka[1]);return a}};c.prototype.Cb=function(a,b){"number"===typeof a?
(this.vc(),null==this.ka&&this.un(),this.ka[0]=a,this.ka[1]=b):(this.vc(),this.Cb(a.x,a.y))};c.prototype.Cz=function(){if(this.Ac())throw g.i.fa("This operation should not be performed on an empty geometry.");var a=new g.Nd;a.x=this.ka[0];a.y=this.ka[1];a.z=this.description.iG()?this.ka[2]:g.ra.se(1);return a};c.prototype.dC=function(a){this.vc();var b=this.hasAttribute(1);b||g.ra.DG(1,a.z)||(this.re(1),b=!0);null==this.ka&&this.un();this.ka[0]=a.x;this.ka[1]=a.y;b&&(this.ka[2]=a.z)};c.prototype.Lg=
function(){if(this.Ac())throw g.i.fa("This operation should not be performed on an empty geometry.");return this.ka[0]};c.prototype.cC=function(a){this.setAttribute(0,0,a)};c.prototype.ih=function(){if(this.Ac())throw g.i.fa("This operation should not be performed on an empty geometry.");return this.ka[1]};c.prototype.aK=function(a){this.setAttribute(0,1,a)};c.prototype.bS=function(){return this.Uc(1,0)};c.prototype.wX=function(a){this.setAttribute(1,0,a)};c.prototype.zR=function(){return this.Uc(2,
0)};c.prototype.hX=function(a){this.setAttribute(2,0,a)};c.prototype.Ec=function(){return this.yF(3,0)};c.prototype.LJ=function(a){this.setAttribute(3,0,a)};c.prototype.Uc=function(a,b){var d=this.description.Pf(a);return 0<=d?this.ka[this.description.$j(d)+b]:g.ra.se(a)};c.prototype.yF=function(a,b){var d=this.description.Pf(a);return 0<=d?this.ka[this.description.$j(d)+b]:g.ra.se(a)};c.prototype.setAttribute=function(a,b,d){this.vc();var e=this.description.Pf(a);0>e&&(this.re(a),e=this.description.Pf(a));
null==this.ka&&this.un();this.ka[this.description.$j(e)+b]=d};c.prototype.getType=function(){return 33};c.prototype.Db=function(){return 0};c.prototype.Oa=function(){this.vc();null!=this.ka&&(this.ka[0]=NaN,this.ka[1]=NaN)};c.prototype.sn=function(a){if(null!=this.ka){for(var b=g.ee.Iw(a,this.description),d=[],e=0,f=0,h=a.Aa;f<h;f++){var k=a.kd(f),m=g.ra.Va(k);if(-1==b[f]){var n=g.ra.se(k);for(k=0;k<m;k++)d[e]=n,e++}else for(n=this.description.$j(b[f]),k=0;k<m;k++)d[e]=this.ka[n],e++,n++}this.ka=
d}this.description=a};c.prototype.un=function(){this.lJ(this.description.Ae.length);c.cE(this.description.Ae,this.ka,this.description.Ae.length);this.ka[0]=NaN;this.ka[1]=NaN};c.prototype.Oc=function(a){if(a instanceof g.Dd){if(!this.Ac()){var b=this.D();a.Eh(b,b);this.Cb(b)}}else this.Ac()||(this.re(1),b=this.Cz(),this.dC(a.fp(b)))};c.prototype.copyTo=function(a){if(33!=a.getType())throw g.i.N();a.vc();null==this.ka?(a.Oa(),a.ka=null,a.Nf(this.description)):(a.Nf(this.description),a.lJ(this.description.Ae.length),
c.cE(this.ka,a.ka,this.description.Ae.length))};c.prototype.Ia=function(){return new c(this.description)};c.prototype.B=function(){return this.Ac()};c.prototype.Ac=function(){return null==this.ka||isNaN(this.ka[0])||isNaN(this.ka[1])};c.prototype.bn=function(a){a.Oa();this.description!=a.description&&a.Nf(this.description);a.Zb(this)};c.prototype.A=function(a){this.Ac()?a.Oa():(a.v=this.ka[0],a.G=this.ka[1],a.C=this.ka[0],a.H=this.ka[1])};c.prototype.Qo=function(a){if(this.Ac())a.Oa();else{var b=
this.Cz();a.v=b.x;a.G=b.y;a.Ye=b.z;a.C=b.x;a.H=b.y;a.Bg=b.z}};c.prototype.Tg=function(a,b){var d=new g.Nc;if(this.Ac())return d.Oa(),d;a=this.Uc(a,b);d.oa=a;d.va=a;return d};c.prototype.lJ=function(a){if(null==this.ka)this.ka=g.O.lg(a);else if(this.ka.length<a){for(var b=this.ka.slice(0),d=this.ka.length;d<a;d++)b[d]=0;this.ka=b}};c.cE=function(a,b,d){if(0<d)for(d=0;d<a.length;d++)b[d]=a[d]};c.prototype.Nb=function(a){if(a==this)return!0;if(!(a instanceof c)||this.description!=a.description)return!1;
if(this.Ac())return a.Ac()?!0:!1;for(var b=0,d=this.description.Ae.length;b<d;b++)if(this.ka[b]!=a.ka[b])return!1;return!0};c.prototype.cc=function(){var a=this.description.cc();if(!this.Ac())for(var b=0,d=this.description.Ae.length;b<d;b++){var e=this.ka[b];e=g.O.truncate(e^e>>>32);a=g.O.Th(e,a)}return a};c.prototype.mg=function(){return null};return c}(g.aa);g.Sa=N})(ja||={});(function(g){var N=function(){function l(c,a,b){void 0!==c&&(this.x=c,this.y=a,this.z=b)}l.construct=function(c,a,b){var d=
new l;d.x=c;d.y=a;d.z=b;return d};l.prototype.K=function(c,a,b){this.x=c;this.y=a;this.z=b};l.prototype.lx=function(){this.z=this.y=this.x=0};l.prototype.normalize=function(){var c=this.length();0==c&&(this.x/=c,this.y/=c,this.z/=c)};l.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};l.prototype.sub=function(c){return new l(this.x-c.x,this.y-c.y,this.z-c.z)};l.prototype.Ag=function(c){new l(this.x*c,this.y*c,this.z*c)};l.prototype.Qh=function(c){return this.x*
c.x+this.y*c.y+this.z*c.z};return l}();g.Nd=N})(ja||={});(function(g){var N=function(){function l(c,a,b){this.Gw=this.DA=null;this.Xf=a;this.FT=a.y-b;this.ET=a.y+b;this.Ew=0;this.dA=c;this.qa=b;this.RT=b*b;this.eA=0!=b;this.Lv=!1}l.prototype.result=function(){return 0!=this.Ew?1:0};l.prototype.ZM=function(c){c=c.hc(c.fe(this.Xf,!1));return g.h.yc(c,this.Xf)<=this.RT?!0:!1};l.prototype.fF=function(c){if(!this.eA&&(this.dA&&this.Xf.qb(c.ac())||this.Xf.qb(c.wc())))this.Lv=!0;else if(c.na==this.Xf.y&&
c.na==c.la){if(this.dA&&!this.eA){var a=Math.max(c.sa,c.pa);this.Xf.x>Math.min(c.sa,c.pa)&&this.Xf.x<a&&(this.Lv=!0)}}else{var b=!1;a=Math.max(c.sa,c.pa);this.Xf.x>a?b=!0:this.Xf.x>=Math.min(c.sa,c.pa)&&(b=0<c.cq(!0,this.Xf.y,this.Gw,null)&&this.Gw[0]<=this.Xf.x);if(b){if(this.Xf.y==c.ac().y){if(this.Xf.y<c.wc().y)return}else if(this.Xf.y==c.wc().y&&this.Xf.y<c.ac().y)return;this.Ew=this.dA?this.Ew^1:this.Ew+(c.ac().y>c.wc().y?1:-1)}}};l.prototype.SI=function(c){var a=c.Tg(0,1);if(a.oa>this.ET||a.va<
this.FT)return!1;if(this.eA&&this.ZM(c))return!0;if(a.oa>this.Xf.y||a.va<this.Xf.y)return!1;null==this.DA&&(this.DA=[null,null,null,null,null]);null==this.Gw&&(this.Gw=[0,0,0]);a=c.eG();if(0<a)for(c=0;c<a;c++){var b=this.DA[c].get();this.fF(b);if(this.Lv)return!0}else if(this.fF(c),this.Lv)return!0;return!1};l.PM=function(c,a,b){a=new l(0==c.In(),a,b);for(c=c.Ga();c.$a();)for(;c.Ha();)if(b=c.ha(),a.SI(b))return-1;return a.result()};l.QM=function(c,a,b,d){var e=new g.l;c.xc(e);e.W(d,d);var f=new l(0==
c.In(),b,d);c=c.Ga();var h=new g.l;h.K(e);h.C=b.x+d;h.G=b.y-d;h.H=b.y+d;b=a.MF(h,d);for(d=b.next();-1!=d;d=b.next())if(c.Vb(a.ja(d)),c.Ha()&&(d=c.ha(),f.SI(d)))return-1;return f.result()};l.wm=function(c,a,b){if(c.B())return 0;var d=new g.l;c.xc(d);d.W(b,b);if(!d.contains(a))return 0;d=c.Bb;if(null!=d){var e=d.Fk;if(null!=e){e=e.So(a.x,a.y);if(1==e)return 1;if(0==e)return 0}d=d.Fb;if(null!=d)return l.QM(c,d,a,b)}return l.PM(c,a,b)};l.bT=function(c,a,b){return a.B()?0:l.wm(c,a.D(),b)};l.Ml=function(c,
a){c=c.I();return 16>c?!1:2*c+Math.log(c)/Math.log(2)*a<1*c*a};return l}();g.Dg=N})(ja||={});(function(g){var N=function(l){function c(a){return l.call(this,!0,a)||this}qa(c,l);c.prototype.Ia=function(){return new c(this.description)};c.prototype.Db=function(){return 2};c.prototype.getType=function(){return 1736};c.prototype.xG=function(a,b,d){this.JS(a,b,d)};c.prototype.qR=function(){this.FR()};return c}(g.Vk);g.Da=N})(ja||={});(function(g){(function(N){N[N.PiPOutside=0]="PiPOutside";N[N.PiPInside=
1]="PiPInside";N[N.PiPBoundary=2]="PiPBoundary"})(g.RL||(g.RL={}));g.hd=function(){function N(){}N.KG=function(l,c,a){l=g.Dg.bT(l,c,a);return 0==l?0:1==l?1:2};N.Yd=function(l,c,a){l=g.Dg.wm(l,c,a);return 0==l?0:1==l?1:2};N.WX=function(l,c,a,b,d){if(c.length<a||d.length<a)throw g.i.N();for(var e=0;e<a;e++)d[e]=N.Yd(l,c[e],b)};N.sK=function(l,c,a,b,d){if(1736==l.getType())N.WX(l,c,a,b,d);else if(197==l.getType()){var e=new g.l;l.A(e);N.$M(e,c,a,b,d)}else throw g.i.fa("invalid_call");};N.$M=function(l,
c,a,b,d){if(c.length<a||d.length<a)throw g.i.N();if(l.B())for(b=0;b<a;b++)d[b]=0;else for(l.W(.5*-b,.5*-b),l.W(.5*b,.5*b),b=0;b<a;b++)l.contains(c[b])?d[b]=1:l.contains(c[b])?d[b]=2:d[b]=0};N.YX=function(l,c,a,b,d){for(var e=0;e<a;e++)d[e]=l.qs(c[e],b)?2:0};N.XX=function(l,c,a,b,d){var e=l.Bb,f=null;null!=e&&(f=e.Fk);e=a;for(var h=0;h<a;h++)if(d[h]=1,null!=f){var k=c[h];0==f.So(k.x,k.y)&&(d[h]=0,e--)}if(0!=e)for(l=l.Ga();l.$a()&&0!=e;)for(;l.Ha()&&0!=e;)for(f=l.ha(),h=0;h<a&&0!=e;h++)1==d[h]&&f.qs(c[h],
b)&&(d[h]=2,e--);for(h=0;h<a;h++)1==d[h]&&(d[h]=0)};N.tK=function(l,c,a,b,d){var e=l.getType();if(1607==e)N.XX(l,c,a,b,d);else if(g.aa.yd(e))N.YX(l,c,a,b,d);else throw g.i.fa("Invalid call.");};return N}()})(ja||={});(function(g){var N=function(l){function c(a,b){if(2==arguments.length){var d=l.call(this,!1,a.description)||this;d.nf(a);d.lineTo(b)}else d=l.call(this,!1,a)||this;return d}qa(c,l);c.prototype.Ia=function(){return new c(this.description)};c.prototype.Db=function(){return 1};c.prototype.getType=
function(){return 1607};c.prototype.xG=function(a,b,d){this.KS(a,b,d)};return c}(g.Vk);g.Ta=N})(ja||={});(function(g){var N=function(){function l(){}l.prototype.progress=function(){return!0};l.zp=function(c){if(null!=c&&!c.progress(-1,-1))throw g.i.WC();};return l}();g.mp=N})(ja||={});(function(g){(function(a){a[a.clipWithInputHorizon=1]="clipWithInputHorizon";a[a.clipWithOutputHorizon=2]="clipWithOutputHorizon"})(g.PK||(g.PK={}));var N=function(){function a(){this.Kg=3;this.Vu=this.Jr=NaN}a.prototype.PW=
function(b){this.QB(1,b)};a.prototype.QW=function(b){this.QB(2,b)};a.prototype.hS=function(){return this.hs(1)};a.prototype.iS=function(){return this.hs(2)};a.prototype.QB=function(b,d){this.Kg=d?this.Kg|b:this.Kg&~b};a.prototype.hs=function(b){return 0!=(this.Kg&b)};a.prototype.Of=function(){var b=new a;b.Jr=this.Jr;b.Vu=this.Vu;b.Kg=this.Kg;return b};return a}();g.yC=N;(function(a){a[a.Dont_Geonomalize_Polygon=2147483648]="Dont_Geonomalize_Polygon";a[a.Dont_Adjust_At_Poles=1073741824]="Dont_Adjust_At_Poles"})(g.QK||
(g.QK={}));var l=function(){function a(){this.Kg=0}a.prototype.QB=function(b,d){this.Kg=d?this.Kg|b:this.Kg&~b};a.prototype.hs=function(b){return 0!=(this.Kg&b)};a.jg=function(b){var d=new a;d.Kg=b.Kg;return d};a.prototype.mM=function(b){this.Kg=b.Kg};return a}();g.AY=l;var c=function(){function a(b,d,e){this.ef=b;this.Yf=d;this.Uf=new g.l;this.Uf.K(e);this.AT=b.cc()+d.cc()+this.Uf.cc().toString()}a.prototype.cc=function(){return this.AT};a.prototype.Nb=function(b){return this==b||this.ef.Nb(b.ef)&&
this.Yf.Nb(b.Yf)&&this.Uf.Nb(b.Uf)};return a}();g.FY=c;c=function(){function a(){this.Yf=this.ef=null;this.rH=new N;this.sH=new l;this.ww=this.Wf=null;this.mw=this.Tn=!0}a.Nr=function(b,d,e,f){var h;void 0===f&&(f=null);void 0===h&&(h=null);var k=new a;k.qp(b,d,e,f,h);return k};a.prototype.qp=function(b,d,e,f,h){if(null==b||null==d)throw g.i.fa("invalidArgument");this.ef=b;this.Yf=d;this.mw=this.Tn=!1;null!=f&&(this.rH=f.Of());null!=h&&this.sH.mM(h);h=!1;1==d.Sb()&&null!=f&&(f=f.Jr,isNaN(f)||0==f||
(h=!0));if(b==d)this.Tn=!h,this.mw=!0;else{f=b.Sb();var k=d.Sb();if(0==f||0==k){if(null!=e)throw g.i.N();null!=b.Hd()&&null!=d.Hd()&&(this.Tn=b.Hd().Nb(d.Hd()))}else 3==f||3==k?this.Tn=b.Nb(d):this.ef.kS(this.Yf)?this.Tn=!h:this.Tn=!1,this.Wf=e,null!=this.Wf&&this.Wf.ix(),this.mw=(null==this.Wf||0==this.Wf.count())&&this.ef.sc().Nb(this.Yf.sc())}this.oY()};a.prototype.isIdentity=function(){return this.Tn};a.prototype.nR=function(){return this.rH.Of()};a.prototype.Nb=function(b){return b==this?!0:
b instanceof a&&this.ef.Nb(b.ef)&&this.Yf.Nb(b.Yf)?this.Wf==b.Wf?!0:null!=this.Wf&&null!=b.Wf&&this.Wf.Nb(b.Wf)?!0:!1:!1};a.prototype.oY=function(){this.ww=new g.bu(this)};return a}();g.vr=c})(ja||={});(function(g){var N=function(){function l(){}l.Cp=function(c){return c*l.oW};l.mx=function(c,a){return l.gP(a-c)};l.hP=function(c){if(-360<=c&&720>c)return 0>c?c+=360:360<=c&&(c-=360),c;c=g.lc.RK(c);0>c&&(c+=360);return c};l.gP=function(c){c=l.hP(c);180<c&&(c-=360);return c};l.oW=57.29577951308232;return l}();
g.qr=N;g.Hh=function(){function l(){}l.lj=function(c,a){var b=new g.l;c.A(b);var d=g.cb.gh(a),e=new g.l;e.K(d);e.v=b.v;e.C=b.C;e.W(.01*e.ca(),0);a=g.ta.Wd(a,b,!1);return e.contains(b)?c:g.Ud.clip(c,e,a,0)};l.ks=function(c,a,b,d,e){if(!g.cb.Wc(a))throw g.i.N();var f=g.ta.kj(a,c,!1),h=g.cb.gh(a),k=g.cb.sc(a),m=k.Hd().ai,n=g.cb.vv(k);k=g.cb.ev(k);n*=2-n;var p=new g.Nc;h.cn(p);var r=[[0,0],[0,0]];2==g.Eg.Sb(a)?d?(r[0][0]=l.Zm(e,p),r[0][1]=h.Jp(),g.cb.vt(),h=r[0][0]*m):(r[0][0]=h.gk(),r[0][1]=e,g.cb.vt(),
h=r[0][1]*m):h=e*m;if(!d&&0!=h)throw g.i.N();var t=new g.ga,x=new g.gd;c=x.Ib(c);for(var K=[0],ca=new g.h,ha=new g.h,da=new g.h,ka=new g.h,ta=new g.h,ua=new g.h,wa=x.Ob(c);-1!=wa;wa=x.Rb(wa)){var Ea=x.Xa(wa);x.D(Ea,da);for(var Ga=!1,Na=Ea=x.U(Ea);-1!=Na;Na=x.U(Na)){if(Na==Ea){if(Ga)break;Ga=!0}x.D(Na,ka);if(d&&f<e-da.x&&ka.x-e>f||f<e-ka.x&&da.x-e>f||!d&&f<-da.y&&ka.y>f||f<-ka.y&&da.y>f){do if(!(Math.abs(da.x-ka.x)>=.5*p.R())){2==g.Eg.Sb(a)?(r[0][0]=l.Zm(da.x,p),r[0][1]=da.y,r[1][0]=l.Zm(ka.x,p),r[1][1]=
ka.y,g.cb.dW(),ta.x=r[0][0]*m,ta.y=r[0][1]*m,ua.x=r[1][0]*m,ua.y=r[1][1]*m):(ta.x=da.x*m,ta.y=da.y*m,ua.x=ka.x*m,ua.y=ka.y*m);ua.x=6.283185307179586*(ka.x-da.x)/p.R()+ta.x;if(d){if(ha.x=h,ha.y=l.Nz(k,n,ta,ua,h,b),isNaN(ha.y))break}else{ha.x=l.Lz(k,n,ta,ua,b);if(isNaN(ha.x))break;ha.y=0}g.kb.wd(k,n,ta.x,ta.y,ua.x,ua.y,t,null,null,b);var La=t.u;g.kb.wd(k,n,ta.x,ta.y,ha.x,ha.y,t,null,null,b);var Ta=t.u;2==g.Eg.Sb(a)?(r[0][0]=ha.x/m,r[0][1]=ha.y/m,g.cb.bR(),d?(ca.y=r[0][1],ca.x=e):(ca.x=l.os(r[0][0],
da.x,ka.x,p),ca.y=e)):d?(ca.x=e,ca.y=ha.y/m):(ca.x=l.os(ha.x/m,da.x,ka.x,p),ca.y=e);K[0]=0<La?g.O.Rk(Ta/La,0,1):.5;0!=K[0]&&1!=K[0]&&(La=x.Ma(Na),x.Ul(La,K,1),x.Cb(x.U(La),ca.x,ca.y))}while(0)}da.L(ka)}}return x.Ne(c)};l.Fn=function(c,a,b,d,e){if(c.B())return c;var f=g.cb.bf(a);return l.Hp(c,b-180*f,360*f,a,d,e,!0)};l.Nz=function(c,a,b,d,e,f){if(3.141592653589793<=Math.abs(b.x-d.x)||!l.Sn(b.x,d.x,e))return NaN;if(b.x>d.x)var h=d;else h=b,b=d;d=new g.ga(0);var k=new g.ga(0),m=new g.ga(0);g.kb.wd(c,
a,h.x,h.y,b.x,b.y,k,d,null,f);var n=k.u,p=0,r=1,t=new g.h;for(t.L(h);n*(r-p)>1E-12*c;){var x=.5*(p+r);g.kb.oj(c,a,h.x,h.y,n*x,d.u,k,m,f);t.x=k.u;t.y=m.u;if(t.x==e)break;if(l.Sn(h.x,t.x,e))r=x;else if(l.Sn(b.x,t.x,e))p=x;else return NaN}return t.y};l.Sn=function(c,a,b){c=N.Cp(c);a=N.mx(c,N.Cp(a));b=N.mx(c,N.Cp(b));return 0==b||0<a&&0<b&&b<=a||0>a&&0>b&&b>=a?!0:!1};l.Zm=function(c,a){var b=a.va-a.oa;return a.It(c-Math.floor((c-a.oa)/b)*b)};l.os=function(c,a,b,d){var e=new g.Nc;e.K(a,b);b=d.R();c=Math.floor((c-
a)/b)*b+c;for(e=e.sf();Math.abs(c-e)>Math.abs(c+b-e);)c+=b;return c};l.Lz=function(c,a,b,d,e){if(b.y>d.y)var f=d;else f=b,b=d;d=new g.Nc;d.K(f.y,b.y);if(!d.contains(0)||3.141592653589793<=Math.abs(f.x-b.x))return NaN;if(f.x==b.x)return f.x;var h=new g.ga(0),k=new g.ga(0),m=new g.ga(0);g.kb.wd(c,a,f.x,f.y,b.x,b.y,k,h,null,e);var n=k.u,p=0,r=1,t=new g.h;for(t.L(f);n*(r-p)>1E-12*c;){var x=.5*(p+r);g.kb.oj(c,a,f.x,f.y,n*x,h.u,k,m,e);t.x=k.u;t.y=m.u;d.K(f.y,t.y);if(0==t.y)break;if(d.contains(0))r=x;else if(d.K(b.y,
t.y),d.contains(0))p=x;else return NaN}return t.x};l.Hp=function(c,a,b,d,e,f,h){var k=new g.l;c.A(k);if(k.B())return c;var m=new g.Nc;k.cn(m);var n=new g.Nc;n.K(a,a+b);if(n.contains(m)&&n.va!=m.va)return c;var p=new g.l;p.K(k);var r=c.getType();if(33==r){p=e?c:c.Of();k=p.Lg();if(k<n.oa||k>=n.va||h&&k==n.va)k+=Math.ceil((n.oa-k)/b)*b,k=n.It(k),p.cC(k);return p}if(550==r){p=e?c:c.Of();d=p.ub(0);r=2*p.I();c=!1;for(e=0;e<r;e+=2)if(k=d.read(e),k<n.oa||k>=n.va||h&&k==n.va)c=!0,k+=Math.ceil((n.oa-k)/b)*
b,k=n.It(k),d.write(e,k);c&&p.Pc(1993);return p}if(n.contains(m))return c;if(197==r)return b=e?c:c.Of(),k.Ea(p),b.Xo(k),b;var t=.1*Math.max(k.ca(),k.R());p.W(0,t);h=c;n=d.Xd(0);c=g.Gh.local();e=new g.Dd;for(var x=0;;){var K=Math.floor((m.oa-a)/b),ca=Math.ceil((m.va-a)/b);if(3<ca-K){K=Math.floor(.5*(ca+K));p.v=k.v-t;p.C=a+b*K;var ha=g.Ud.clip(h,p,n,f);p.v=p.C;p.C=k.C+t;var da=g.Ud.clip(h,p,n,f);e.gg((K-ca)*b,0);da.Oc(e);1736==r?h=c.V(ha,da,d,null):(h=ha,h.add(da,!1));h.A(k);k.cn(m);x++}else break}p.v=
a;p.C=a+b;a=new g.l;a.K(p);a.W(n,0);a=Math.floor((k.v-p.v)/b)*b;0!=a?(p.move(a,0),e.gg(-a,0)):e.RB();a=1607==r?new g.Ta(h.description):new g.Da(h.description);f=new g.l;for(m=new g.l;k.C>p.v;){t=g.Ud.clip(h,p,n,0);t.A(m);if(1607==r?!t.B()&&(m.R()>n||m.ca()>n):!t.B()&&(1736!=r||m.R()>n))t.Oc(e),t.A(m),a.A(f),f.W(n,n),f.isIntersecting(m)&&1736==r?a=c.V(a,t,d,null):a.add(t,!1);p.move(b,0);e.shift(-b,0)}return a};l.WI=function(c,a,b,d){var e=new g.de(b.description);e.Fd(b,0,-1);e=g.cb.zh(e,c,a);var f=
b.I();d.Oa();if(!g.cb.Wc(c)||f!=e.I())return!1;var h=new g.l;b.A(h);var k=new g.l;e.A(k);h=h.R();k=k.R();if(0!=h&&0!=k){if(k/=h,c=g.cb.gh(a).R()/g.cb.gh(c).R(),1E-10<Math.abs(k/c-1))return!1}else if(0!=h||0!=k)return!1;d.add(b,!1);for(b=0;b<f;b++)c=e.Na(b),d.Cb(b,c);return!0};l.Oz=function(){throw g.i.Ie();};return l}()})(ja||={});(function(g){var N;(function(c){c[c.Clip=0]="Clip";c[c.DontClip=1]="DontClip";c[c.PannableFold=2]="PannableFold"})(N=g.si||(g.si={}));var l;(function(c){c[c.Geodesic=0]=
"Geodesic";c[c.Loxodrome=1]="Loxodrome";c[c.GreatElliptic=2]="GreatElliptic";c[c.NormalSection=3]="NormalSection";c[c.ShapePreserving=4]="ShapePreserving"})(l=g.WK||(g.WK={}));g.zb=function(){function c(){}c.xv=function(a,b,d){if(d||0<b){a=a.toString(g.Sc.PE_STR_NAME_CANON|g.Sc.PE_STR_AUTH_NONE);b=[];for(d=0;d<a.length;d++)b[d]="a"<=a[d]&&"z">=a[d]?b[d]=a[d].toUpperCase():a[d];return b.join()}return a.toString(g.Sc.PE_STR_AUTH_TOP)};c.ur=function(a,b,d,e){var f=e.length,h=d.I();if(0!=h){var k=d.ub(0),
m=Math.min(h,f),n=0,p=a.eh();isNaN(b)&&(b=0);var r=a.Wc();a=r?a.sc().Oe().R():0;for(var t=179*a/360;0<h;){k.uB(n<<1,m,e);g.ej.projToGeogCenter(p,m,e,b);if(r)for(var x=0;x<m;x++){var K=e[x][0]-b,ca=g.lc.sign(K),ha=k.read(2*(n+x));0>ca*g.lc.sign(ha)&&Math.abs(K)>t&&(e[x][0]+=-ca*a)}k.uC(n<<1,m,e);n+=m;h-=m;m=Math.min(h,f)}d.Pc(1993)}};c.IL=function(a,b,d,e){var f=0,h=a.eh();isNaN(f)&&(f=0);var k=a.Wc(),m=a.bf();a=360*m;m*=179;for(var n=e.length,p=0;p<d;){for(var r=p;r<d&&b[r].isNaN();++r)p++;var t=
Math.min(n,d-p);if(0<t){r=1;for(var x=p+1;r<t;++r,++x)if(b[x].isNaN()){t=r;break}g.ta.Jy(e,b,p,t);g.ej.projToGeogCenter(h,t,e,f);if(k)for(r=0,x=p;r<t;++r,++x){var K=b[x].x,ca=e[r][0]-f,ha=g.lc.sign(ca);0>ha*g.lc.sign(K)&&Math.abs(ca)>m&&(e[r][0]-=ha*a)}g.ta.Iy(b,p,e,t);p+=t}}};c.Lx=function(a,b,d){var e=d.length,f=b.I();if(!(1>f)){var h=b.ub(0),k=Math.min(f,e),m=0,n=a.eh(),p=a.Wc(),r=p?a.Oe().R():0,t=179*r/360,x=0;for(p&&(x=a.zi());0<f;){h.uB(m<<1,k,d);g.ej.geogToProj(n,k,d);if(p)for(a=0;a<k;a++){var K=
d[a][0],ca=g.lc.sign(K),ha=h.read(2*(m+a))-x;0>ca*g.lc.sign(ha)&&Math.abs(K)>t&&(d[a][0]+=-ca*r)}h.uC(m<<1,k,d);m+=k;f-=k;k=Math.min(f,e)}b.Pc(1993)}};c.HL=function(a,b,d,e){if(0!=d){var f=a.eh(),h=a.Wc(),k=h?a.Oe().R():0,m=179*k/360,n=0;h&&(n=a.zi());for(a=0;a<d;){for(var p=a;p<d&&b[p].isNaN();++p)a++;var r=Math.min(e.length,d-a);if(0<r){p=1;for(var t=a+1;p<r;++p,++t)if(b[t].isNaN()){r=p;break}g.ta.Jy(e,b,a,r);g.ej.geogToProj(f,r,e);if(h)for(p=0,t=a;p<r;p++){var x=e[p][0],K=g.lc.sign(x);0>K*g.lc.sign(b[t].x-
n)&&Math.abs(x)>m&&(e[p][0]-=K*k)}g.ta.Iy(b,a,e,r);a+=r}}}};c.tr=function(a,b,d,e){var f=b.I();if(0!=f){var h=b.ub(0),k=a.ef,m=a.Yf,n=k.sc().Qp(),p=m.sc().Qp(),r=k.bf(),t=m.bf();a=a.Wf;if(null==a||0==a.count()){d=n/p;e=(k.Up()-m.Up())*t;p=-90*r;a=90*r;n=!1;t=1;for(k=2*f;t<k;)r=h.get(t),m=g.O.Rk(r,p,a),m!=r&&(h.set(t,m),n=!0),t+=2;if(0!=e||1!=d)for(n=!0,p=new g.h,t=0;t<f;t++)h.tc(2*t,p),p.x*=d,p.x+=e,p.y*=d,h.Tt(2*t,p);n&&b.Pc(1993)}else{k=e.length;m=Math.min(f,k);var x=g.O.lg(m),K=null,ca=0,ha=NaN,
da=NaN,ka=360*t,ta=t/r;d&&(da=90*t,ha=89.9*r,K=g.O.lg(m));for(var ua=!0,wa=0;0!=f;){r=!1;h.uB(ca<<1,m,e);for(t=0;t<m;t++)x[t]=e[t][0];if(d)for(t=0;t<m;t++){var Ea=Math.abs(e[t][1])-ha;0<Ea&&(r=e[t][1],e[t][1]=g.lc.Cn(ha,r),K[t]=g.lc.Cn(Ea,r),r=!0)}t=e[0][0];a.transform(e,m,n,p);ua&&(wa=e[0][0]-ta*t,ua=!1);for(t=0;t<m;t++)Ea=e[t][0]-x[t]*ta-wa,200<Math.abs(Ea)&&(e[t][0]=0<Ea?e[t][0]-ka:e[t][0]+ka);if(r){for(t=0;t<m;t++)0!=K[t]&&(e[t][1]+=ta*K[t],e[t][1]>da?e[t][1]=da:e[t][1]<-da&&(e[t][1]=-da));for(r=
0;r<m;r++)K[r]=0}h.uC(ca<<1,m,e);ca+=m;f-=m;m=Math.min(f,k)}b.Pc(1993)}}};c.GL=function(a,b,d,e){if(a.mw)e=90*a.ef.bf(),g.ta.dK(b,d,-e,e);else{var f=a.Wf,h=a.ef,k=a.Yf;a=h.Xr();var m=k.Xr(),n=h.bf(),p=90*n,r=k.bf();if(null==f||0==f.count()){if(e=a/m,f=(h.Up()-k.Up())*r,g.ta.dK(b,d,-p,p),0!=f||1!=e)for(r=0;r<d;r++)b[r].x*=e,b[r].x+=f,b[r].y*=e}else{h=Math.min(d,e.length);p=g.O.lg(h);k=360*r;n=r/n;for(var t=!0,x=0,K=0;0!=d;){for(r=0;r<h;r++)p[r]=b[r+K].x;r=b[0].x;g.ta.Jy(e,b,K,h);f.transform(e,h,a,
m);g.ta.Iy(b,K,e,h);t&&(x=b[0].x-n*r,t=!1);for(r=0;r<h;r++){var ca=b[K+r].x-p[r]*n-x;200<Math.abs(ca)&&(b[K+r].x=0<ca?b[K+r].x-k:b[K+r].x+k)}K+=h;d-=h;h=Math.min(d,e.length)}}}};c.dv=function(a,b){a=a.gh();isNaN(b)||a.Ju(b,0);return a};c.UQ=function(a,b,d,e,f,h,k,m){for(var n=c.dv(e,f),p=n.R(),r=p/360,t=c.pE*r,x=a.ub(0),K=b.Wc(),ca=K?p/b.Oe().R():0,ha=!1,da=new g.Da(d.description),ka=0,ta=d.da();ka<ta;++ka){var ua=K,wa=new g.Ta(d.description);wa.addPath(d,ka,!0);if(0!=k){var Ea=c.PD(!0,wa,n.H-m,n.H,
k);(ha=ha||Ea)&&(ua=!1)}var Ga=-1;ua&&(Ga=a.Ba(ka));var Na=wa.ub(0),La=wa.I(),Ta=0,Ra=Na.read(0),Wa=0;Ea=3*e.Xd(0);var Xa=!1,$a=new g.h;$a.Rc();var cb=new g.h;cb.Rc();for(var hb=!1,fb=1;fb<La;++fb){var Za=g.h.construct(Na.eg(2*fb),Na.eg(2*fb+1)),ab=Za.x,Ya=ab+Ta,gb=Ya-Ra;Za.x=Ya;if(Math.abs(gb)>t){if(ua){var eb=Ga+(fb+1<La?fb:0),jb=x.read(2*(Ga+fb-1));eb=(x.read(2*eb)-jb)*ca;Math.abs(gb-eb)>1*r&&(ua=!1)}ua||(Ta-=g.lc.Cn(p,Ya-Ra),Ya=ab+Ta,++Wa,hb=0!=Ta,Za.x=Ya)}else Xa||g.ta.AG(cb,$a,Za,Ea)&&(Xa=!0);
hb&&Na.write(2*fb,Ya);Ra=Ya;cb.L($a);$a.L(Za)}0<Wa&&wa.Pc(1993);ua=wa.Na(0);La=wa.Na(La-1);wa=g.h.tb(ua,La)<Ea?c.uQ(wa,e,f,h,Xa):c.vQ(a,ka,wa,e,f);da.add(wa,!1)}f=e.Xd(0);d=n.R()/180;c.Jt(da,n,.1*f,!1);f=g.ri.clip(da,n,f,d,h);da=da!=f;a=a.Ke();m=f.Ke();k=0;0<m&&0>a?k=1:0>=m&&0<a&&(0==m?(m=NaN,2==b.Sb()?m=b.ml().Ke():1==b.Sb()&&(m=b.Oe().wF()),a>.99*m&&(k=-1)):k=-1);0!=k&&(b=new g.Da(f.description),b.tp(n),b=g.Xl.local().V(b,d,h),b.add(f,!1),da=!0,f=b);da&&(f=g.Yl.local().V(f,e,!1,h));return f};c.vQ=
function(a,b,d,e,f){var h=d.I(),k=d.Na(0),m=d.Na(h-1);e=c.dv(e,f);f=e.R();k=g.lc.sign(m.x-k.x);var n=new g.l;d.xc(n);var p=e.gk();m=p-f;p+=f;if(0<=k){var r=Math.ceil((m-n.v)/f);for(r*=f;m>n.v+r;)r+=f;for(;m<n.C+r;)r-=f;var t=r;720<n.R()&&(p=m+360*Math.ceil(n.R()/360))}else{r=Math.ceil((p-n.C)/f);for(r*=f;p<n.C+r;)r-=f;for(;p>n.v+r;)r+=f;t=r;720<n.R()&&(m=p-360*Math.ceil(n.R()/360))}r=k*f;var x=g.l.construct(n.v,n.G,n.C,n.H);x.move(t,0);var K=new g.Dd;K.gg(t,0);d.Oc(K);n=new g.Ta(d.description);n.add(d,
!1);t=d.Na(h-1);f=0;for(var ca=n.Na(0).x,ha=0;0<k?x.C<p:x.v>m;)1024<=ha&&(ha=0),x.move(r,0),K.Gb=r,d.Oc(K),ca+=r,e.v<=ca&&e.C>=ca&&(f=n.I()-1),d.Cb(0,t),t=d.Na(h-1),n.Dr(d,0,0,h-1,!1);d=new g.Da(n.description);h=0<a.Ir(b);d.add(n,!1);a=n.Na(0);m=n.Na(n.I()-1);b=d.da()-1;(0>k?h:!h)?(k=g.h.construct(m.x,e.H),d.Ci(k),k=g.h.construct(e.gk(),e.H),d.Ci(k),e=g.h.construct(a.x,e.H)):(k=g.h.construct(m.x,e.G),d.Ci(k),k=g.h.construct(e.gk(),e.G),d.Ci(k),e=g.h.construct(a.x,e.G));d.Ci(e);d.xG(0,b,0);d.kO(f);
return d};c.uQ=function(a,b,d,e,f){var h=new g.Da(a.description);h.add(a,!1);h.DB(0,h.I()-1);var k=new g.l;h.xc(k);d=c.dv(b,d);var m=d.R(),n=Math.ceil((d.v-k.v)/m);for(n*=m;d.v>k.v+n;)n+=m;for(;d.v<k.C+n;)n-=m;n+=m;if(0!=n){k.move(n,0);var p=new g.Dd;p.gg(n,0);h.Oc(p)}if(d.v<=k.v&&d.C>k.C)return f&&(f=h.Ke(),h=g.Yl.local().V(h,b,!0,e),b=h.Ke(),(b=g.lc.sign(f)!=g.lc.sign(b))&&h.oJ()),h;a=new g.Da(a.description);a.add(h,!1);for(f=f||k.R()>m-b.Xd(0);k.v<d.C;)k.move(m,0),p=new g.Dd,p.gg(m,0),h.Oc(p),
a.add(h,!1);f&&(f=a.Ke(),a.Yo(1),a=g.Yl.local().V(a,b,!0,e),b=a.Ke(),(b=g.lc.sign(f)!=g.lc.sign(b))&&a.oJ());return a};c.PD=function(a,b,d,e,f){for(var h=b.ub(0),k=b.I(),m=!1,n=0;n<k;n++){var p=g.h.construct(h.eg(2*n),h.eg(2*n+1));if(0!=(f&1)&&p.y>=d){m=!0;break}if(0!=(f&2)&&p.y<=-d){m=!0;break}}if(!m)return!1;h=!1;a&&(h=b.Nn(0));a=new g.gd;k=a.Ib(b);m=a.Ob(k);var r=-1,t=!0,x=new g.h;x.Rc();n=new g.Sa;for(var K=-1,ca=a.Xa(m);-1!=ca;ca=a.U(ca)){p=a.Na(ca);var ha=0!=(f&1)&&90<=p.y?1:0;ha|=0!=(f&2)&&
p.y<=-d?2:0;if(0<r&&r!=ha){if(x.x!=p.x){x.x=p.x;a.Vi(a.Ma(ca),n);var da=a.wj(m,ca,n);a.mf(da,x)}if(h)for(K=-1!=K?a.U(K):a.Xa(m),da=a.Ma(ca);K!=da;)K=a.pd(K,!1);K=-1}0<ha&&(p.y=g.lc.Cn(e,p.y),a.mf(ca,p),t||r==ha||(p.x!=x.x?(a.Vi(ca,n),da=a.wj(m,ca,n),a.Cb(da,x.x,p.y),K=da):K=ca));r=ha;x=p;t=!1}if(h){if(-1!=K)for(K=a.U(K);-1!=K;)K=a.pd(K,!1);d=a.Xa(m);a.fq(d,a.rj(m))||(a.Vi(d,n),a.wj(m,-1,n))}a.Ne(k).copyTo(b);return!0};c.Mz=function(a,b,d,e){var f=a;if(f.B()||d==N.DontClip)return f;var h=f.getType();
if(33==h)return e=f,f=[e.D()],c.yG(f,1,b,d),f[0].isNaN()?e.Oa():e.Cb(f[0]),a;a=b.sc();var k=a.bf(),m=90*k,n=180*k,p=360*k,r=b.zi(),t=.5*k,x=new g.l;f.A(x);var K=b.Vr(),ca=b.PQ(),ha=197==K.getType();b=new g.l;K.A(b);d==N.PannableFold&&(d=a.Oe().R(),b.v=r-.5*d,b.C=b.v+d);if(x.G<-m||x.H>m){(new g.l).K(x.v-k,-m,x.C+k,m);f=g.ri.Nu(f,b,a,NaN,0,e);if(f.B())return f;f.A(x)}if(ca&&(b.H<x.G||b.G>x.H))return f.Ia();x.R()>p&&(f=c.Hp(f,r-n,p,a,!0,0,!0,e),f.A(x));m=c.eO(x.v,x.C,b.v,b.C,p);0!=m&&x.move(m,0);if(x.C>
b.C||x.v<b.v){if(x.C>b.C)for(;x.v>=b.C;)x.move(-p,0),m-=p;for(;x.v<b.C-p;)x.move(p,0),m+=p}d=g.ta.Hu(a,K);0!=m&&(k=new g.Dd,k.gg(m,0),f.Oc(k));if(ca){if(ha&&b.contains(x))return f;ca=[null,null];for(m=0;2>m;m++){ha?k=g.aa.Hc(h)?g.ri.clip(f,b,d,t,e):g.ri.clip(f,b,d,0,e):(k=g.Xj.local().V(f,K,a,e),k==K&&(k=g.aa.jg(k)));if(b.v<=x.v&&b.C>=x.C||b.v>=x.v&&b.C<=x.C)return k;ca[m]=k;0==m&&(x.move(-p,0),k=new g.Dd,k.gg(-p,0),f.Oc(k))}if(550==h)ca[0].Fd(ca[1],0,-1);else if(g.aa.Hc(h))ca[0].add(ca[1],!1);else if(33==
h)ca[0].B()&&(ca[0]=ca[1]);else throw g.i.fa("intersect_with_GCS_horizon: unexpected geometry type");return ca[0]}if(b.H<x.G||b.G>x.H)return f;for(h=0;!f.B()&&x.C>b.v;)0!=h&&(k=new g.Dd,k.gg(h,0),f.Oc(k)),g.dj.local().V(4,f,K,a,e)||(f=g.kp.local().V(f,K,a,e),K==f&&(f=g.aa.jg(f))),0!=h&&(t=new g.Dd,t.gg(-h,0),f.Oc(t)),h-=p,x.move(-p,0);return f};c.yG=function(a,b,d,e){if(0!=b&&e!=N.DontClip)if(e==N.PannableFold){e=d.HR();for(var f=b,h=0;h<b;h++)if(a[h].y>e.H||a[h].y<e.G)a[h].Rc(),f--;0!=f&&c.av(a,
b,e.v,e.R())}else{e=d.bf();var k=90*e,m=180*e;e*=360;f=b;for(h=0;h<b;h++)if(a[h].y>k||a[h].y<-k)a[h].Rc(),f--;if(0!=f){f=new g.l;f.Zw(a,b);k=d.Vr();var n=d.hv();h=197==k.getType();var p=new g.l;k.A(p);if(!n||!(p.H<f.G||p.G>f.H))if(n)if(c.av(a,b,p.gk()-m,e),f=b,h)for(h=0;h<b;h++)p.contains(a[h])||(a[h].Rc(),f--);else for(d=g.ta.Hu(d.sc(),k),h=0;h<b;h++)(m=0!=g.hd.Yd(k,a[h],d))||(a[h].Rc(),f--);else for(c.av(a,b,-m,e),f=b,d=g.ta.Hu(d.sc(),k),h=0;h<b;h++)if(m=a[h],m.isNaN()&&f--,n=c.tE(m.x,p.v,p.C,e),
m.x+=n,m=0!=g.hd.Yd(k,m,d))a[h].Rc(),f--}}};c.Hp=function(a,b,d,e,f,h,k,m){var n=a.getType(),p=b+d;if(33===n){e=f?a:a.Of();var r=e.Lg();if(r<b||r>=p||k&&r==p)r+=Math.ceil((b-r)/d)*d,r=g.O.Rk(r,b,p),e.cC(r);return e}if(a.B())return a;r=new g.l;a.A(r);if(r.B())return a;var t=new g.Nc;r.cn(t);var x=new g.Nc;x.K(b,p);if(x.contains(t))return a;p=new g.l;p.K(r);if(550===n){e=f?a:a.Of();m=e.ub(0);n=2*e.I();p=!1;for(b=0;b<n;b+=2)if(r=m.read(b),r<x.oa||r>=x.va||k&&r==x.va)p=!0,r+=Math.ceil((x.oa-r)/d)*d,r=
x.It(r),m.write(b,r);p&&e.Pc(1993);return e}if(197==n)return d=f?a:a.Of(),r.Ea(p),d.Xo(r),d;var K=.1*Math.max(r.ca(),r.R());p.W(0,K);k=a;x=e.Xd(0);a=g.Gh.local();for(f=new g.Dd;;){var ca=Math.floor((t.oa-b)/d),ha=Math.ceil((t.va-b)/d);if(3<ha-ca){ca=Math.floor(.5*(ha+ca));p.v=r.v-K;p.C=b+d*ca;var da=g.ri.clip(k,p,x,h,m);p.v=p.C;p.C=r.C+K;var ka=g.ri.clip(k,p,x,h,m);f.gg((ca-ha)*d,0);ka.Oc(f);1736==n?k=a.V(da,ka,e,null):(k=da,k.add(ka,!1));k.A(r);r.cn(t)}else break}p.v=b;p.C=b+d;b=new g.l;b.K(p);b.W(x,
0);b=Math.floor((r.v-p.v)/d)*d;0!=b?(p.move(b,0),f.gg(-b,0)):f.RB();b=1607==n?new g.Ta(k.description):new g.Da(k.description);h=new g.l;for(t=new g.l;r.C>p.v;){K=g.ri.clip(k,p,x,0,m);K.A(t);if(1607==n?!K.B()&&(t.R()>x||t.ca()>x):!K.B()&&(1736!=n||t.R()>x))K.Oc(f),K.A(t),b.A(h),h.W(x,x),h.isIntersecting(t)&&1736==n?b=a.V(b,K,e,null):b.add(K,!1);p.move(d,0);f.shift(-d,0)}return b};c.av=function(a,b,d,e){for(var f=d+e,h=0;h<b;h++){var k=a[h].x;d<=k&&k<f||!(k<d||k>f||k==f)||(k+=Math.ceil((d-k)/e)*e,k=
g.O.Rk(k,d,f),a[h].x=k)}};c.Fn=function(a,b,d,e,f,h){if(!b.Wc())throw g.i.fa("fold_into_360_degree_range");if(a.B())return a;if(2==b.Sb()){d=b.pv();var k=b.ov()-d}else{var m=b.bf();k=360*m;d-=180*m}return c.Hp(a,d,k,b,e,f,!0,h)};c.qF=function(a,b,d,e){if(2==d.Sb())e=d.pv(),d=d.ov()-e;else{var f=d.bf();d=360*f;e-=180*f}c.av(a,b,e,d)};c.lj=function(a,b){var d=b.Oe();if(33==a.getType()){var e=a.ih();return d.G<=e&&e<=d.H?a:a.Ia()}e=new g.l;a.A(e);var f=new g.l;f.K(d);f.v=e.v;f.C=e.C;f.W(.01*f.ca(),0);
d=g.ta.uy(b,e);return f.contains(e)?a:g.ri.clip(a,f,d,0,null)};c.ir=function(a,b,d){return a>b.C&&a-b.C<d?b.C:a<b.v&&b.v-a<d?b.v:a};c.FX=function(a,b,d,e){e.x=c.ir(a.x,b,d);e.y=a.y};c.EX=function(a,b,d,e){for(var f=0;f<b;f++)a[f].y<d.G||a[f].y>d.H?a[f].Rc():a[f].x=c.ir(a[f].x,d,e)};c.Jt=function(a,b,d,e){if(!a.B()){var f=a.getType();if(!e||1736!=f)if(g.aa.xj(f)){e=a.ub(0);f=0;for(var h=a.I();f<h;f++){var k=e.read(2*f),m=c.ir(k,b,d);m!=k&&e.write(2*f,m)}a.Pc(1993)}else if(197==f)e=new g.l,a.A(e),e.v=
c.ir(e.v,b,d),e.C=c.ir(e.C,b,d),a.Xo(e);else if(33==f)a.cC(c.ir(a.Lg(),b,d));else throw g.i.fa("internal error");}};c.uS=function(a,b,d,e){var f=new g.gd,h=f.Ib(a);a=g.ta.Hu(b,a);c.ks(f,h,b,a,d,!0,e);return f.Ne(h)};c.ks=function(a,b,d,e,f,h,k){if(!d.Wc())throw g.i.N("invalid call");var m=d.Oe(),n=d.sc(),p=n.eh().getDatum().getSpheroid();n=n.Hd().ai;var r=p.getFlattening();p=p.getAxis();r*=2-r;var t=new g.Nc;m.cn(t);var x=null,K=[[0,0],[0,0]];2==d.Sb()?(x=d.eh(),h?(K[0][0]=c.Zm(k,t),K[0][1]=m.Jp(),
g.ej.projToGeog(x,1,K),m=K[0][0]*n):(K[0][0]=m.gk(),K[0][1]=k,g.ej.projToGeog(x,1,K),m=K[0][1]*n)):m=k*n;if(!h&&0!=m&&f!=l.GreatElliptic)throw g.i.fa("invalid argument");var ca=new g.ga,ha=[0],da=new g.h,ka=new g.h,ta=new g.h,ua=[null,null],wa=new g.h,Ea=new g.h,Ga=new g.h,Na=new g.h;for(b=a.Ob(b);-1!=b;b=a.Rb(b)){var La=a.Xa(b);a.D(La,wa);for(var Ta=!1,Ra=La=a.U(La);-1!=Ra;Ra=a.U(Ra)){if(Ra==La){if(Ta)break;Ta=!0}a.D(Ra,Ea);if(h&&(e<k-wa.x&&Ea.x-k>e||e<k-Ea.x&&wa.x-k>e)||!h&&(0!=k||e<-wa.y&&Ea.y>
e||e<-Ea.y&&wa.y>e)){do if(!(Math.abs(wa.x-Ea.x)>=.5*t.R())){2==d.Sb()?(K[0][0]=c.Zm(wa.x,t),K[0][1]=wa.y,K[1][0]=c.Zm(Ea.x,t),K[1][1]=Ea.y,g.ej.projToGeogCenter(x,2,K,0),Ga.x=K[0][0]*n,Ga.y=K[0][1]*n,Na.y=K[1][1]*n):(Ga.x=wa.x*n,Ga.y=wa.y*n,Na.y=Ea.y*n);Na.x=2*(Ea.x-wa.x)*Math.PI/t.R()+Ga.x;if(h){ka.x=m;ka.y=c.Nz(p,r,Ga,Na,m,f);if(isNaN(ka.y))break;ua[0]=ka;var Wa=1}else if(f==l.GreatElliptic){var Xa=[0,0];Wa=g.Ox.Oz(r,Ga,Na,m,Xa);if(0==Wa)break;ka.x=Xa[0];ka.y=m;ua[0]=ka;2==Wa&&(ta.x=Xa[1],ta.y=
m,ua[1]=ta)}else{ka.x=c.Lz(p,r,Ga,Na,f);if(isNaN(ka.x))break;ka.y=0;ua[0]=ka;Wa=1}var $a=-1;for(Xa=0;Xa<Wa;Xa++){g.kb.wd(p,r,Ga.x,Ga.y,Na.x,Na.y,ca,null,null,f);var cb=ca.u;g.kb.wd(p,r,Ga.x,Ga.y,ua[Xa].x,ua[Xa].y,ca,null,null,f);var hb=ca.u;2==d.Sb()?(K[0][0]=ua[Xa].x/n,K[0][1]=ua[Xa].y/n,g.ej.geogToProj(x,1,K),h?(da.y=K[0][1],da.x=k):(da.x=c.os(K[0][0],wa.x,Ea.x,t),da.y=k)):h?(da.x=k,da.y=ua[Xa].y/n):(da.x=c.os(ua[Xa].x/n,wa.x,Ea.x,t),da.y=k);ha[0]=0<cb?g.O.Rk(hb/cb,0,1):.5;if(0==ha[0]||1==ha[0])break;
$a>ha[0]||($a=a.Ma(Ra),a.Ul($a,ha,1),a.Cb(a.U($a),da.x,da.y),$a=ha[0])}}while(0)}wa.L(Ea)}}};c.Zm=function(a,b){var d=b.va-b.oa;return b.It(a-Math.floor((a-b.oa)/d)*d)};c.os=function(a,b,d,e){var f=new g.Nc;f.K(b,d);d=e.R();a=Math.floor((a-b)/d)*d+a;for(f=f.sf();Math.abs(a-f)>Math.abs(a+d-f);)a+=d;return a};c.Sn=function(a,b,d){a=g.qr.Cp(a);b=g.qr.mx(a,g.qr.Cp(b));d=g.qr.mx(a,g.qr.Cp(d));return 0==d||0<b&&0<d&&d<=b||0>b&&0>d&&d>=b?!0:!1};c.Nz=function(a,b,d,e,f,h){if(h==l.GreatElliptic)return g.Ox.SS(b,
d,e,f);if(Math.abs(d.x-e.x)>=Math.PI||!c.Sn(d.x,e.x,f))return NaN;if(d.x>e.x)var k=e;else k=d,d=e;e=new g.ga;var m=new g.ga,n=new g.ga;g.kb.wd(a,b,k.x,k.y,d.x,d.y,m,e,null,h);var p=m.u,r=0,t=1,x=new g.h;for(x.L(k);p*(t-r)>1E-12*a;){var K=.5*(r+t);g.kb.oj(a,b,k.x,k.y,p*K,e.u,m,n,h);x.x=m.u;x.y=n.u;if(x.x==f)break;if(c.Sn(k.x,x.x,f))t=K;else if(c.Sn(d.x,x.x,f))r=K;else return NaN}return x.y};c.Lz=function(a,b,d,e,f){if(f==l.GreatElliptic)return a=[0,0],g.Ox.Oz(b,d,e,0,a),a[0];if(d.y>e.y)var h=e;else h=
d,d=e;e=new g.Nc;e.K(h.y,d.y);if(!e.contains(0)||Math.abs(h.x-d.x)>=Math.PI)return NaN;if(h.x==d.x)return h.x;var k=new g.ga,m=new g.ga,n=new g.ga;g.kb.wd(a,b,h.x,h.y,d.x,d.y,m,k,null,f);var p=m.u,r=0,t=1,x=new g.h;for(x.L(h);p*(t-r)>1E-12*a;){var K=.5*(r+t);g.kb.oj(a,b,h.x,h.y,p*K,k.u,m,n,f);x.x=m.u;x.y=n.u;e.K(h.y,x.y);if(0==x.y)break;if(e.contains(0))t=K;else if(e.K(d.y,x.y),e.contains(0))r=K;else return NaN}return x.x};c.WI=function(a,b,d,e){if(!a.ef.Wc())return!1;var f=new g.de(b.description);
f.Fd(b,0,-1);e=g.Hx.local().V(f,a,e);f=b.I();d.Oa();if(f!=e.I())return!1;var h=new g.l;b.A(h);var k=new g.l;e.A(k);h=h.R();k=k.R();if(0!=h&&0!=k){if(k/=h,a=a.Yf.gh().R()/a.ef.gh().R(),1E-10<Math.abs(k/a-1))return!1}else if(0!=h||0!=k)return!1;d.add(b,!1);b=new g.h;for(a=0;a<f;a++)e.D(a,b),d.Cb(a,b);return!0};c.qN=function(a,b){a%=360*b;a>=180*b&&(a-=360*b);return a};c.UI=function(a,b,d,e){if(d==N.Clip){var f=b.ml();197==f.getType()?(d=new g.l,f.A(d),f=g.ta.uy(b,d),a=g.ri.clip(a,d,f,5E4*b.pm(),e)):
g.dj.local().V(1,f,a,b,e)||(a=g.Xj.local().V(a,f,b,e),a==f&&(a=g.Vk.jg(a)))}else b.Wc()&&(e=new g.l,a.xc(e),b.Oe().contains(e)||(c.Jt(a,b.Oe(),b.Xd(0),!0),d==N.PannableFold&&(a=c.lj(a,b)),a=c.Fn(a,b,0,!0,1E5*b.pm(),null)));return a};c.XD=function(a,b,d){var e=b.Wr();if(null==e)return a;b=b.sc();var f=b.Oe().R(),h=new g.l;a.xc(h);var k=new g.Nc;h.cn(k);h=e.Ga();e=null;for(var m=new g.Dd;h.$a();)for(;h.Ha();){var n=h.ha(),p=n.Tg(0,0),r=new g.Nc;r.K(p.oa,p.va);for(p=0;r.va>k.oa;)r.move(-f),--p;for(;r.oa<=
k.va;){if(r.isIntersecting(k)){null==e&&(e=new g.Ta);var t=g.yb.cP(n.ac(),n.wc());0!=p&&(m.gg(p*f,0),t.Oc(m));e.oc(t,!0)}r.move(f);++p}}return null!=e?(b=g.ta.gO(b,e),b=g.ta.Er(b),g.$t.lP(a,e,b,d)):a};c.eO=function(a,b,d,e,f){return a>=d&&b<=e?0:c.tE(.5*(b+a),d,e,f)};c.tE=function(a,b,d,e){return g.lc.round((.5*(d+b)-a)/e)*e};c.VQ=function(a,b,d,e,f,h,k,m){var n=c.dv(e,f),p=n.R(),r=p/360,t=c.pE*r,x=a.ub(0),K=b.Wc(),ca=K?p/b.Oe().R():0;b=a.Ia();for(var ha=0,da=d.da();ha<da;++ha){var ka=K,ta=new g.Ta(d.description);
ta.addPath(d,ha,!0);var ua=d.dc(ha);0!=k&&(ua=c.PD(ua,ta,n.H-m,n.H,k))&&(ka=!1);var wa=-1;ua=ta.I();var Ea=!1;ka&&(wa=a.Ba(ha),Ea=a.dc(ha));var Ga=ta.ub(0),Na=0,La=Ga.read(0),Ta=0,Ra=3*e.Xd(0),Wa=!1,Xa=new g.h;Xa.Rc();var $a=new g.h;$a.Rc();for(var cb=!1,hb=1;hb<ua;++hb){var fb=g.h.construct(Ga.eg(2*hb),Ga.eg(2*hb+1)),Za=fb.x,ab=Za+Na,Ya=ab-La;fb.x=ab;if(Math.abs(Ya)>t){if(ka){var gb=wa+hb-1,eb=wa;if(!Ea||hb+1<ua)eb+=hb;gb=x.read(2*gb);eb=(x.read(2*eb)-gb)*ca;Math.abs(Ya-eb)>1*r&&(K=!1)}ka||(Na-=
g.lc.Cn(p,ab-La),ab=Za+Na,++Ta,cb=0!=Na,fb.x=ab)}else Wa||g.ta.AG(Xa,$a,fb,Ra)&&(Wa=!0);cb&&Ga.write(2*hb,ab);La=ab;Xa.L($a);$a.L(fb)}0!=Ta&&ta.Pc(1993);ka=ta.Na(0);ua=ta.Na(ua-1);g.h.tb(ka,ua);ta=c.wQ(ta,e,isNaN(f)?0:f,h);b.add(ta,!1)}a=e.Xd(0);d=n.R()/180;c.Jt(b,n,.1*a,!1);return g.ri.clip(b,n,a,d,h)};c.wQ=function(a,b,d,e){return c.Fn(a,b,d,!0,0,e)};c.OS=function(a,b,d,e){var f=a.getType();if(1736==f)for(b=null!=b?b.Xd(0):0,f=0;f<e;f++)1!=g.hd.Yd(a,d[f],b)&&d[f].Rc();else if(197==f)for(f=0;f<e;f++)a.dP(d[f])||
d[f].Rc();else throw g.i.N();};c.$k=function(a,b,d,e){if(32>d)for(var f=new g.Sa,h=0;h<d;h++)f.Cb(b[h]),a.$k(f,e).D(b[h]);else{var k=new g.de;k.re(3);k.HD(b,d);f=k.ub(3);for(h=0;h<d;h++)f.write(h,h);h=a.$k(k,e);a=h.ub(0);f=h.ub(3);e=g.h.construct(NaN,NaN);for(k=0;k<d;k++)b[k]=e;d=h.I();for(h=0;h<d;h++)e=f.read(h),a.tc(2*h,b[e])}};c.Zk=function(a,b,d,e){if(32>d)for(var f=new g.Sa,h=0;h<d;h++)f.Cb(b[h]),a.Zk(f,e).D(b[h]);else{var k=new g.de;k.re(3);k.HD(b,d);f=k.ub(3);for(h=0;h<d;h++)f.write(h,h);h=
a.Zk(k,e);a=h.ub(0);f=h.ub(3);e=g.h.construct(NaN,NaN);for(k=0;k<d;k++)b[k]=e;d=h.I();for(h=0;h<d;h++)e=f.read(h),a.tc(2*h,b[e])}};c.pE=210;return c}()})(ja||={});(function(g){(function(l){l[l.rightSide=1]="rightSide"})(g.UL||(g.UL={}));var N=function(){function l(c,a,b){this.Bs=new g.h;void 0===c?this.Io=-1:(this.Bs.L(c),this.Io=a,this.Ka=b,this.nw=0)}l.prototype.WJ=function(c){this.nw=c?this.nw|1:this.nw&-2};l.prototype.B=function(){return 0>this.Io};l.prototype.fz=function(){if(this.B())throw g.i.fa("invalid call");
return new g.Sa(this.Bs.x,this.Bs.y)};l.prototype.Ua=function(){if(this.B())throw g.i.fa("invalid call");return this.Io};l.prototype.hz=function(){if(this.B())throw g.i.fa("invalid call");return this.Ka};l.prototype.Sz=function(){return 0!=(this.nw&1)};l.prototype.ey=function(c,a,b,d){this.Bs.x=c;this.Bs.y=a;this.Io=b;this.Ka=d};return l}();g.$l=N})(ja||={});(function(g){var N=function(){function c(){}c.prototype.Uo=function(a,b){this.th.resize(0);this.Ii.length=0;this.tk=-1;a.xc(this.Ek);this.Ek.W(b,
b);if(this.Ek.isIntersecting(this.Fb.Ca)){var d=a.getType();(this.vs=g.aa.yd(d))?(this.TH=a.ac(),this.SH=a.wc(),this.qa=b):this.qa=NaN;this.th.add(this.Fb.kf);this.Ii.push(this.Fb.Ca);this.Qs=this.Fb.Ur(this.Fb.kf)}else this.Qs=-1};c.prototype.Xi=function(a,b){this.th.resize(0);this.Ii.length=0;this.tk=-1;this.Ek.K(a);this.Ek.W(b,b);this.qa=NaN;this.Ek.isIntersecting(this.Fb.Ca)?(this.th.add(this.Fb.kf),this.Ii.push(this.Fb.Ca),this.Qs=this.Fb.Ur(this.Fb.kf),this.vs=!1):this.Qs=-1};c.prototype.next=
function(){if(0==this.th.size)return-1;this.tk=this.Qs;var a=null,b=null,d=null,e=null;this.vs&&(a=new g.h,b=new g.h,d=new g.l);for(var f=!1;!f;){for(;-1!=this.tk;){var h=this.Fb.bz(this.Fb.fv(this.tk));if(h.isIntersecting(this.Ek))if(this.vs){if(a.L(this.TH),b.L(this.SH),d.K(h),d.W(this.qa,this.qa),0<d.zy(a,b)){f=!0;break}}else{f=!0;break}this.tk=this.Fb.nv(this.tk)}if(-1==this.tk){h=this.th.Fc();var k=this.Ii[this.Ii.length-1];null==e&&(e=[],e[0]=new g.l,e[1]=new g.l,e[2]=new g.l,e[3]=new g.l);
l.EJ(k,e);this.th.If();--this.Ii.length;for(k=0;4>k;k++){var m=this.Fb.Lp(h,k);if(-1!=m&&0<this.Fb.WR(m)&&e[k].isIntersecting(this.Ek))if(this.vs){if(a.L(this.TH),b.L(this.SH),d.K(e[k]),d.W(this.qa,this.qa),0<d.zy(a,b)){var n=new g.l;n.K(e[k]);this.th.add(m);this.Ii.push(n)}}else n=new g.l,n.K(e[k]),this.th.add(m),this.Ii.push(n)}if(0==this.th.size)return-1;this.tk=this.Fb.Ur(this.th.get(this.th.size-1))}}this.Qs=this.Fb.nv(this.tk);return this.tk};c.bP=function(a,b,d){var e=new c;e.Fb=a;e.Ek=new g.l;
e.th=new g.ia(0);e.Ii=[];e.Uo(b,d);return e};c.aP=function(a,b,d){var e=new c;e.Fb=a;e.Ek=new g.l;e.th=new g.ia(0);e.Ii=[];e.Xi(b,d);return e};c.$O=function(a){var b=new c;b.Fb=a;b.Ek=new g.l;b.th=new g.ia(0);b.Ii=[];return b};return c}();g.GY=N;var l=function(){function c(a,b){this.jf=new g.$c(11);this.Zh=new g.$c(5);this.ws=[];this.gw=new g.ia(0);this.Ca=new g.l;this.Nk(a,b)}c.prototype.reset=function(a,b){this.jf.mj(!1);this.Zh.mj(!1);this.ws.length=0;this.gw.clear(!1);this.Nk(a,b)};c.prototype.vj=
function(a,b){return this.zv(a,b,0,this.Ca,this.kf,!1,-1)};c.prototype.Jz=function(a,b,d){d=-1==d?this.kf:this.WF(d);var e=this.ca(d),f=this.oR(d);return this.zv(a,b,e,f,d,!1,-1)};c.prototype.ja=function(a){return this.jR(a)};c.prototype.GF=function(a){return this.bz(this.fv(a))};c.prototype.ca=function(a){return this.jv(a)};c.prototype.oR=function(a){var b=new g.l;b.K(this.Ca);var d=this.jv(a);a=this.QF(a);for(var e=0;e<2*d;e+=2){var f=g.O.truncate(3&a>>e);0==f?(b.v=.5*(b.v+b.C),b.G=.5*(b.G+b.H)):
1==f?(b.C=.5*(b.v+b.C),b.G=.5*(b.G+b.H)):(2==f?b.C=.5*(b.v+b.C):b.v=.5*(b.v+b.C),b.H=.5*(b.G+b.H))}return b};c.prototype.WR=function(a){return this.Az(a)};c.prototype.vR=function(a,b){return N.bP(this,a,b)};c.prototype.MF=function(a,b){return N.aP(this,a,b)};c.prototype.getIterator=function(){return N.$O(this)};c.prototype.Nk=function(a,b){if(0>b||32<2*b)throw g.i.N("invalid height");this.BT=b;this.Ca.K(a);this.kf=this.jf.Ce();this.jx(this.kf,0);this.ax(this.kf,0);this.NJ(this.kf,0);this.KJ(this.kf,
0)};c.prototype.zv=function(a,b,d,e,f,h,k){if(!e.contains(b))return 0==d?-1:this.zv(a,b,0,this.Ca,this.kf,h,k);if(!h)for(var m=f;-1!=m;m=this.IR(m))this.jx(m,this.Az(m)+1);m=new g.l;m.K(e);e=f;var n=[];n[0]=new g.l;n[1]=new g.l;n[2]=new g.l;for(n[3]=new g.l;d<this.BT&&this.iO(e);d++){c.EJ(m,n);for(var p=!1,r=0;4>r;r++)if(n[r].contains(b)){p=!0;var t=this.Lp(e,r);-1==t&&(t=this.rP(e,r));this.jx(t,this.Az(t)+1);e=t;m.K(n[r]);break}if(!p)break}return this.sS(a,b,d,m,e,h,f,k)};c.prototype.sS=function(a,
b,d,e,f,h,k,m){var n=this.NF(f);if(h){if(f==k)return m;this.SP(m);h=m}else h=this.tP(),this.NB(h,a),this.KW(this.fv(h),b);this.mX(h,f);-1!=n?(this.hx(h,n),this.bx(n,h)):this.GJ(f,h);this.SB(f,h);this.ax(f,this.lv(f)+1);this.hO(f)&&this.MQ(d,e,f);return h};c.prototype.SP=function(a){var b=this.WF(a),d=this.NF(b),e=this.OR(a),f=this.nv(a);this.Ur(b)==a?(-1!=f?this.hx(f,-1):this.SB(b,-1),this.GJ(b,f)):d==a?(this.bx(e,-1),this.SB(b,e)):(this.hx(f,e),this.bx(e,f));this.hx(a,-1);this.bx(a,-1);this.ax(b,
this.lv(b)-1)};c.EJ=function(a,b){var d=.5*(a.v+a.C),e=.5*(a.G+a.H);b[0].K(d,e,a.C,a.H);b[1].K(a.v,e,d,a.H);b[2].K(a.v,a.G,d,e);b[3].K(d,a.G,a.C,e)};c.prototype.hO=function(a){return 8==this.lv(a)&&!this.gG(a)};c.prototype.MQ=function(a,b,d){var e=this.Ur(d);do{var f=this.fv(e),h=this.Zh.T(e,0);f=this.bz(f);this.zv(h,f,a,b,d,!0,e);e=h=this.nv(e)}while(-1!=e)};c.prototype.iO=function(a){return 8<=this.lv(a)||this.gG(a)};c.prototype.gG=function(a){return-1!=this.Lp(a,0)||-1!=this.Lp(a,1)||-1!=this.Lp(a,
2)||-1!=this.Lp(a,3)};c.prototype.rP=function(a,b){var d=this.jf.Ce();this.OW(a,b,d);this.jx(d,0);this.ax(d,0);this.Pk(d,a);this.KJ(d,this.jv(a)+1);this.NJ(d,b<<2*this.jv(a)|this.QF(a));return d};c.prototype.tP=function(){var a=this.Zh.Ce();if(0<this.gw.size){var b=this.gw.Fc();this.gw.If()}else b=this.ws.length,this.ws.push(new g.l);this.LW(a,b);return a};c.prototype.Lp=function(a,b){return this.jf.T(a,b)};c.prototype.OW=function(a,b,d){this.jf.S(a,b,d)};c.prototype.Ur=function(a){return this.jf.T(a,
4)};c.prototype.GJ=function(a,b){this.jf.S(a,4,b)};c.prototype.NF=function(a){return this.jf.T(a,5)};c.prototype.SB=function(a,b){this.jf.S(a,5,b)};c.prototype.QF=function(a){return this.jf.T(a,6)};c.prototype.NJ=function(a,b){this.jf.S(a,6,b)};c.prototype.lv=function(a){return this.jf.T(a,7)};c.prototype.Az=function(a){return this.jf.T(a,8)};c.prototype.ax=function(a,b){this.jf.S(a,7,b)};c.prototype.jx=function(a,b){this.jf.S(a,8,b)};c.prototype.IR=function(a){return this.jf.T(a,9)};c.prototype.Pk=
function(a,b){this.jf.S(a,9,b)};c.prototype.jv=function(a){return this.jf.T(a,10)};c.prototype.KJ=function(a,b){this.jf.S(a,10,b)};c.prototype.jR=function(a){return this.Zh.T(a,0)};c.prototype.NB=function(a,b){this.Zh.S(a,0,b)};c.prototype.OR=function(a){return this.Zh.T(a,1)};c.prototype.nv=function(a){return this.Zh.T(a,2)};c.prototype.hx=function(a,b){this.Zh.S(a,1,b)};c.prototype.bx=function(a,b){this.Zh.S(a,2,b)};c.prototype.WF=function(a){return this.Zh.T(a,3)};c.prototype.mX=function(a,b){this.Zh.S(a,
3,b)};c.prototype.fv=function(a){return this.Zh.T(a,4)};c.prototype.LW=function(a,b){this.Zh.S(a,4,b)};c.prototype.bz=function(a){return this.ws[a]};c.prototype.KW=function(a,b){this.ws[a].K(b)};return c}();g.du=l})(ja||={});(function(g){(function(c){c[c.Outside=0]="Outside";c[c.Inside=1]="Inside";c[c.Border=2]="Border"})(g.aL||(g.aL={}));var N=function(){function c(a,b){this.PT=b;this.Vh=a}c.prototype.setColor=function(a,b){this.iH!=b&&a.flush();this.iH=b};c.prototype.gF=function(a,b){for(var d=
0;d<b;)for(var e=a[d++],f=a[d++],h=a[d++]*this.PT;e<f;e++)this.Vh[h+(e>>4)]|=this.iH<<2*(e&15)};return c}();g.HY=N;var l=function(){function c(a,b,d){this.Vh=null;this.SA=this.Ik=this.cI=this.aI=this.Es=this.qH=this.Gf=this.Um=0;this.Ri=this.Jk=this.vl=null;this.Fz(a,b,d)}c.create=function(a,b,d){if(!c.zE(a))throw g.i.N();return c.wP(a,b,d)};c.pW=function(a){switch(a){case 0:a=1024;break;case 1:a=16384;break;case 2:a=262144;break;default:throw g.i.fa("Internal Error");}return a};c.zE=function(a){return a.B()||
1607!=a.getType()&&1736!=a.getType()?!1:!0};c.prototype.rQ=function(a,b){b=b.Ga();for(var d=new g.h,e=new g.h;b.$a();)for(;b.Ha();){var f=b.ha();if(322!=f.getType())throw g.i.fa("Internal Error");a.Eh(f.ac(),d);a.Eh(f.wc(),e);this.Ri.jy(d.x,d.y,e.x,e.y)}this.Ri.iJ(g.Px.Cx)};c.prototype.sQ=function(){throw g.i.fa("Internal Error");};c.prototype.Ry=function(a,b){for(var d=1;4>d;d++)a.jy(b[d-1].x,b[d-1].y,b[d].x,b[d].y);a.jy(b[3].x,b[3].y,b[0].x,b[0].y);this.Ri.iJ(g.Px.Cx)};c.prototype.rK=function(a,
b,d){for(var e=[null,null,null,null],f=0;f<e.length;f++)e[f]=new g.h;b=b.Ga();d=this.Jk.dY(d)+1.5;f=new g.h;for(var h=new g.h,k=new g.h,m=new g.h,n=new g.h,p=new g.l,r=new g.h;b.$a();){var t=!1,x=!0;for(r.ma(0,0);b.Ha();){var K=b.ha();m.x=K.sa;m.y=K.na;n.x=K.pa;n.y=K.la;p.Oa();p.Zb(m.x,m.y);p.Lk(n.x,n.y);if(this.vl.HG(p)){this.Jk.Eh(n,n);x?(this.Jk.Eh(m,m),r.L(m),x=!1):m.L(r);f.uc(n,m);K=f.length();var ca=.5>K;0==K?f.ma(1,0):(ca||r.L(n),f.scale(d/K),h.ma(-f.y,f.x),k.ma(f.y,-f.x),m.sub(f),n.add(f),
e[0].add(m,h),e[1].add(m,k),e[2].add(n,k),e[3].add(n,h),ca?t=!0:this.Ry(a,e))}else t&&(this.Ry(a,e),t=!1),x=!0}t&&this.Ry(a,e)}};c.prototype.sC=function(a){return g.O.truncate(a*this.qH+this.aI)};c.prototype.tC=function(a){return g.O.truncate(a*this.Es+this.cI)};c.wP=function(a,b,d){return new c(a,b,d)};c.prototype.Fz=function(a,b,d){this.Gf=Math.max(g.O.truncate(2*Math.sqrt(d)+.5),64);this.Um=g.O.truncate((2*this.Gf+31)/32);this.vl=new g.l;this.Ik=b;d=0;for(var e=this.Gf,f=this.Um;8<=e;)d+=e*f,e=
g.O.truncate(e/2),f=g.O.truncate((2*e+31)/32);this.Vh=g.O.lg(d,0);this.Ri=new g.Px;d=new N(this.Vh,this.Um,this);this.Ri.AX(this.Gf,this.Gf,d);a.A(this.vl);this.vl.W(b,b);e=new g.l;f=g.l.construct(1,1,this.Gf-2,this.Gf-2);var h=b*f.R();b*=f.ca();e.K(this.vl.sf(),Math.max(h,this.vl.R()),Math.max(b,this.vl.ca()));this.SA=this.Ik;this.Jk=new g.Dd;this.Jk.pS(e,f);new g.Dd;switch(a.getType()){case 550:d.setColor(this.Ri,2);this.sQ();break;case 1607:d.setColor(this.Ri,2);this.rK(this.Ri,a,this.SA);break;
case 1736:d.setColor(this.Ri,1),this.rQ(this.Jk,a),d.setColor(this.Ri,2),this.rK(this.Ri,a,this.SA)}this.qH=this.Jk.bb;this.Es=this.Jk.ab;this.aI=this.Jk.Gb;this.cI=this.Jk.Lb;this.XN()};c.prototype.XN=function(){this.Ri.flush();for(var a=0,b=this.Gf*this.Um,d=this.Gf,e=g.O.truncate(this.Gf/2),f=this.Um,h=g.O.truncate((2*e+31)/32);8<d;){for(d=0;d<e;d++)for(var k=2*d,m=2*d+1,n=0;n<e;n++){var p=2*n,r=2*n+1,t=p>>4;p=2*(p&15);var x=r>>4;r=2*(r&15);var K=this.Vh[a+f*k+t]>>p&3;K|=this.Vh[a+f*k+x]>>r&3;
K|=this.Vh[a+f*m+t]>>p&3;K|=this.Vh[a+f*m+x]>>r&3;this.Vh[b+h*d+(n>>4)]|=K<<2*(n&15)}d=e;f=h;a=b;e=g.O.truncate(d/2);h=g.O.truncate((2*e+31)/32);b=a+f*d}};c.prototype.So=function(a,b){if(!this.vl.contains(a,b))return 0;a=this.sC(a);b=this.tC(b);if(0>a||a>=this.Gf||0>b||b>=this.Gf)return 0;b=this.Vh[this.Um*b+(a>>4)]>>2*(a&15)&3;return 0==b?0:1==b?1:2};c.prototype.Ro=function(a){if(!a.Ea(this.vl))return 0;var b=this.sC(a.v),d=this.sC(a.C),e=this.tC(a.G);a=this.tC(a.H);0>b&&(b=0);0>e&&(e=0);d>=this.Gf&&
(d=this.Gf-1);a>=this.Gf&&(a=this.Gf-1);if(b>d||e>a)return 0;for(var f=Math.max(d-b,1)*Math.max(a-e,1),h=0,k=this.Um,m=this.Gf,n=0;;){if(32>f||16>m){for(f=e;f<=a;f++)for(var p=b;p<=d;p++)if(n=this.Vh[h+k*f+(p>>4)]>>2*(p&15)&3,1<n)return 2;if(0==n)return 0;if(1==n)return 1}h+=k*m;m=g.O.truncate(m/2);k=g.O.truncate((2*m+31)/32);b=g.O.truncate(b/2);e=g.O.truncate(e/2);d=g.O.truncate(d/2);a=g.O.truncate(a/2);f=Math.max(d-b,1)*Math.max(a-e,1)}};c.prototype.RR=function(){return this.Gf*this.Um};return c}();
g.Nx=l})(ja||={});(function(g){(function(c){c[c.contains=1]="contains";c[c.within=2]="within";c[c.equals=3]="equals";c[c.disjoint=4]="disjoint";c[c.touches=8]="touches";c[c.crosses=16]="crosses";c[c.overlaps=32]="overlaps";c[c.unknown=0]="unknown";c[c.intersects=1073741824]="intersects"})(g.VL||(g.VL={}));var N=function(){function c(){}c.construct=function(a,b,d,e,f,h,k,m){var n=new c;n.pw=a;n.Mm=b;n.Kj=d;n.Si=e;n.BH=f;n.SY=h;n.TY=k;n.UY=m;return n};return c}();g.Vt=function(){function c(){}c.CD=
function(a,b,d){if(c.wy(a)){var e=g.ta.kj(b,a,!1);b=!1;g.Uk.CE(a)&&(b=b||a.lu(e,d));e=a.getType();1736!=e&&1607!=e||!g.Uk.AE(a)||0==d||(b=b||a.fj(d));1736!=e&&1607!=e||!g.Uk.BE(a)||0==d||b||a.hM()}};c.wy=function(a){return g.Uk.CE(a)||g.Uk.AE(a)||g.Uk.BE(a)};return c}();var l=function(){function c(){this.rh=[]}c.zB=function(a,b,d,e,f){var h=a.getType(),k=b.getType();if(197==h){if(197==k)return c.tW(a,b,d,e);if(33==k)return 2==e?e=1:1==e&&(e=2),c.hJ(b,a,d,e)}else if(33==h){if(197==k)return c.hJ(a,
b,d,e);if(33==k)return c.vW(a,b,d,e)}if(a.B()||b.B())return 4==e?!0:!1;var m=new g.l;a.A(m);var n=new g.l;b.A(n);var p=new g.l;p.K(m);p.Zb(n);d=g.ta.Wd(d,p,!1);if(c.dk(m,n,d))return 4==e?!0:!1;m=!1;g.Vk.yd(h)&&(h=new g.Ta(a.description),h.oc(a,!0),a=h,h=1607);g.Vk.yd(k)&&(k=new g.Ta(b.description),k.oc(b,!0),b=k,k=1607);if(197!=h&&197!=k){if(a.Db()<b.Db()||33==h&&550==k)2==e?e=1:1==e&&(e=2)}else 1736!=h&&197!=k&&(2==e?e=1:1==e&&(e=2));switch(h){case 1736:switch(k){case 1736:m=c.rt(a,b,d,e,f);break;
case 1607:m=c.$m(a,b,d,e,f);break;case 33:m=c.qt(a,b,d,e);break;case 550:m=c.pt(a,b,d,e,f);break;case 197:m=c.GI(a,b,d,e,f)}break;case 1607:switch(k){case 1736:m=c.$m(b,a,d,e,f);break;case 1607:m=c.gB(a,b,d,e,f);break;case 33:m=c.tt(a,b,d,e,f);break;case 550:m=c.st(a,b,d,e,f);break;case 197:m=c.MI(a,b,d,e)}break;case 33:switch(k){case 1736:m=c.qt(b,a,d,e);break;case 1607:m=c.tt(b,a,d,e,f);break;case 550:m=c.lt(b,a,d,e)}break;case 550:switch(k){case 1736:m=c.pt(b,a,d,e,f);break;case 1607:m=c.st(b,
a,d,e,f);break;case 550:m=c.ZA(a,b,d,e,f);break;case 33:m=c.lt(a,b,d,e);break;case 197:m=c.hI(a,b,d,e)}break;case 197:switch(k){case 1736:m=c.GI(b,a,d,e,f);break;case 1607:m=c.MI(b,a,d,e);break;case 550:m=c.hI(b,a,d,e)}}return m};c.tW=function(a,b,d,e){if(a.B()||b.B())return 4==e?!0:!1;var f=new g.l,h=new g.l,k=new g.l;a.A(f);b.A(h);k.K(f);k.Zb(h);a=g.ta.Wd(d,k,!1);switch(e){case 4:return c.dk(f,h,a);case 2:return c.jF(h,f,a);case 1:return c.jF(f,h,a);case 3:return c.ek(f,h,a);case 8:return c.cQ(f,
h,a);case 32:return c.bQ(f,h,a);case 16:return c.aQ(f,h,a)}return!1};c.hJ=function(a,b,d,e){if(a.B()||b.B())return 4==e?!0:!1;a=a.D();var f=new g.l,h=new g.l;b.A(f);h.K(a);h.Zb(f);b=g.ta.Wd(d,h,!1);switch(e){case 4:return c.Rw(a,f,b);case 2:return c.eB(a,f,b);case 1:return c.RU(a,f,b);case 3:return c.vI(a,f,b);case 8:return c.dB(a,f,b)}return!1};c.vW=function(a,b,d,e){if(a.B()||b.B())return 4==e?!0:!1;a=a.D();b=b.D();var f=new g.l;f.K(a);f.Zb(b);d=g.ta.Wd(d,f,!1);switch(e){case 4:return c.SU(a,b,
d);case 2:return c.uI(b,a,d);case 1:return c.uI(a,b,d);case 3:return c.wI(a,b,d)}return!1};c.rt=function(a,b,d,e,f){switch(e){case 4:return c.kV(a,b,d);case 2:return c.Sw(b,a,d,f);case 1:return c.Sw(a,b,d,f);case 3:return c.nV(a,b,d);case 8:return c.vV(a,b,d);case 32:return c.qV(a,b,d,f)}return!1};c.$m=function(a,b,d,e,f){switch(e){case 4:return c.lV(a,b,d);case 1:return c.fB(a,b,d,f);case 8:return c.wV(a,b,d,f);case 16:return c.gV(a,b,d)}return!1};c.qt=function(a,b,d,e){switch(e){case 4:return c.jV(a,
b,d);case 1:return c.dV(a,b,d);case 8:return c.uV(a,b,d)}return!1};c.pt=function(a,b,d,e){switch(e){case 4:return c.iV(a,b,d);case 1:return c.cV(a,b,d);case 8:return c.tV(a,b,d);case 16:return c.fV(a,b,d)}return!1};c.GI=function(a,b,d,e,f){if(c.hV(a,b,d))return 4==e?!0:!1;if(4==e)return!1;switch(e){case 2:return c.xV(a,b,d);case 1:return c.bV(a,b,d);case 3:return c.mV(a,b,d);case 8:return c.sV(a,b,d,f);case 32:return c.pV(a,b,d,f);case 16:return c.eV(a,b,d,f)}return!1};c.gB=function(a,b,d,e){switch(e){case 4:return c.GV(a,
b,d);case 2:return c.KI(b,a,d);case 1:return c.KI(a,b,d);case 3:return c.IV(a,b,d);case 8:return c.NI(a,b,d);case 32:return c.MV(a,b,d);case 16:return c.LI(a,b,d)}return!1};c.tt=function(a,b,d,e){switch(e){case 4:return c.FV(a,b,d);case 1:return c.AV(a,b,d);case 8:return c.QV(a,b,d)}return!1};c.st=function(a,b,d,e){switch(e){case 4:return c.EV(a,b,d);case 1:return c.zV(a,b,d);case 8:return c.PV(a,b,d);case 16:return c.CV(a,b,d)}return!1};c.MI=function(a,b,d,e){if(c.DV(a,b,d))return 4==e?!0:!1;if(4==
e)return!1;switch(e){case 2:return c.RV(a,b,d);case 1:return c.yV(a,b,d);case 3:return c.HV(a,b,d);case 8:return c.OV(a,b,d);case 32:return c.LV(a,b,d);case 16:return c.BV(a,b,d)}return!1};c.ZA=function(a,b,d,e){switch(e){case 4:return c.gU(a,b,d);case 2:return c.eI(b,a,d);case 1:return c.eI(a,b,d);case 3:return c.iU(a,b,d);case 32:return c.oU(a,b,d)}return!1};c.lt=function(a,b,d,e){switch(e){case 4:return c.fI(a,b,d);case 2:return c.sU(a,b,d);case 1:return c.dU(a,b,d);case 3:return c.Nw(a,b,d)}return!1};
c.hI=function(a,b,d,e){switch(e){case 4:return c.fU(a,b,d);case 2:return c.rU(a,b,d);case 1:return c.cU(a,b,d);case 3:return c.hU(a,b,d);case 8:return c.qU(a,b,d);case 16:return c.eU(a,b,d)}return!1};c.nV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.ek(e,f,d))return!1;e=c.qc(a,b,!1);if(4==e||1==e||2==e)return!1;if(c.dI(a,b,d))return!0;e=a.Qb();f=b.Qb();return Math.abs(e-f)>4*Math.max(a.I(),b.I())*d?!1:c.Wz(a,b,d,!0)};c.kV=function(a,b,d){var e=c.qc(a,b,!0);return 4==e?!0:1==e||2==e||
1073741824==e?!1:c.EI(a,b,d)};c.vV=function(a,b,d){var e=c.qc(a,b,!1);return 4==e||1==e||2==e?!1:c.II(a,b,d,null)};c.qV=function(a,b,d,e){var f=c.qc(a,b,!1);return 4==f||1==f||2==f?!1:c.FI(a,b,d,e)};c.Sw=function(a,b,d,e){var f=new g.l,h=new g.l;a.A(f);b.A(h);if(!c.zc(f,h,d))return!1;f=c.qc(a,b,!1);return 4==f||2==f?!1:1==f?!0:c.BI(a,b,d,e)};c.lV=function(a,b,d){var e=c.qc(a,b,!0);return 4==e?!0:1==e||1073741824==e?!1:c.EI(a,b,d)};c.wV=function(a,b,d,e){var f=c.qc(a,b,!1);return 4==f||1==f?!1:c.JI(a,
b,d,e)};c.gV=function(a,b,d){var e=c.qc(a,b,!1);return 4==e||1==e?!1:c.DI(a,b,d,null)};c.fB=function(a,b,d,e){var f=new g.l,h=new g.l;a.A(f);b.A(h);if(!c.zc(f,h,d))return!1;f=c.qc(a,b,!1);return 4==f?!1:1==f?!0:c.CI(a,b,d,e)};c.jV=function(a,b,d){return 0==g.hd.KG(a,b,d)?!0:!1};c.uV=function(a,b,d){b=b.D();return c.HI(a,b,d)};c.dV=function(a,b,d){b=b.D();return c.AI(a,b,d)};c.iV=function(a,b,d){var e=c.qc(a,b,!1);if(4==e)return!0;if(1==e)return!1;e=new g.l;a.A(e);e.W(d,d);for(var f=new g.h,h=0;h<
b.I();h++)if(b.D(h,f),e.contains(f)){var k=g.hd.Yd(a,f,d);if(1==k||2==k)return!1}return!0};c.tV=function(a,b,d){var e=this.qc(a,b,!1);if(4==e||1==e)return!1;e=new g.l;a.A(e);e.W(d,d);for(var f=!1,h=a,k=!1,m=0;m<b.I();m++){var n=b.Na(m);if(e.contains(n))if(n=g.hd.Yd(h,n,d),2==n)f=!0;else if(1==n)return!1;k||(!g.Dg.Ml(a,b.I()-1)||null!=a.Bb&&null!=a.Bb.Fb?h=a:(h=new g.Da,a.copyTo(h),h.fj(1)),k=!0)}return f?!0:!1};c.fV=function(a,b,d){var e=this.qc(a,b,!1);if(4==e||1==e)return!1;var f=new g.l;e=new g.l;
var h=new g.l;a.A(f);b.A(h);e.K(f);e.W(d,d);h=f=!1;for(var k=a,m=!1,n=0;n<b.I();n++){var p=b.Na(n);e.contains(p)?(p=g.hd.Yd(k,p,d),0==p?h=!0:1==p&&(f=!0)):h=!0;if(f&&h)return!0;m||(!g.Dg.Ml(a,b.I()-1)||null!=a.Bb&&null!=a.Bb.Fb?k=a:(k=new g.Da,a.copyTo(k),k.fj(1)),m=!0)}return!1};c.cV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!this.zc(e,f,d))return!1;f=this.qc(a,b,!1);if(4==f)return!1;if(1==f)return!0;f=!1;for(var h=a,k=!1,m=0;m<b.I();m++){var n=b.Na(m);if(!e.contains(n))return!1;n=
g.hd.Yd(h,n,d);if(1==n)f=!0;else if(0==n)return!1;k||(!g.Dg.Ml(a,b.I()-1)||null!=a.Bb&&null!=a.Bb.Fb?h=a:(h=new g.Da,a.copyTo(h),h.fj(1)),k=!0)}return f};c.mV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.ek(e,f,d))return!1;e=new g.Da;e.ad(b,!1);return c.Wz(a,e,d,!0)};c.hV=function(a,b,d){var e=c.qc(a,b,!1);if(4==e)return!0;if(1==e||2==e)return!1;var f=new g.l;e=new g.l;a.A(f);b.A(e);if(c.zc(e,f,d))return!1;f=new g.h;e.dn(f);b=g.hd.Yd(a,f,d);if(0!=b)return!1;e.$I(f);b=g.hd.Yd(a,f,d);
if(0!=b)return!1;e.en(f);b=g.hd.Yd(a,f,d);if(0!=b)return!1;e.cJ(f);b=g.hd.Yd(a,f,d);if(0!=b)return!1;b=a.ub(0);f=new g.l;f.K(e);f.W(d,d);for(var h=0,k=a.I();h<k;h++){var m=b.read(2*h),n=b.read(2*h+1);if(f.contains(m,n))return!1}return!c.TG(a,e,d)};c.sV=function(a,b,d,e){var f=c.qc(a,b,!1);if(4==f||1==f||2==f)return!1;f=new g.l;var h=new g.l;a.A(f);b.A(h);if(c.zc(h,f,d))return!1;if(h.R()<=d&&h.ca()<=d)return b=b.Ip(),c.HI(a,b,d);if(h.R()<=d||h.ca()<=d)return f=new g.Ta,h=new g.Sa,b.Hf(0,h),f.nf(h),
b.Hf(2,h),f.lineTo(h),c.JI(a,f,d,e);f=new g.Da;f.ad(b,!1);return c.II(a,f,d,e)};c.pV=function(a,b,d,e){var f=c.qc(a,b,!1);if(4==f||1==f||2==f)return!1;f=new g.l;var h=new g.l;a.A(f);b.A(h);if(c.zc(h,f,d)||h.R()<=d||h.ca()<=d)return!1;f=new g.Da;f.ad(b,!1);return c.FI(a,f,d,e)};c.xV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.zc(f,e,d)};c.bV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.zc(e,f,d))return!1;e=c.qc(a,b,!1);if(4==e||2==e)return!1;if(1==e)return!0;if(f.R()<=
d&&f.ca()<=d)return b=b.Ip(),c.AI(a,b,d);if(f.R()<=d||f.ca()<=d)return f=new g.Ta,e=new g.Sa,b.Hf(0,e),f.nf(e),b.Hf(2,e),f.lineTo(e),c.CI(a,f,d,null);f=new g.Da;f.ad(b,!1);return c.BI(a,f,d,null)};c.eV=function(a,b,d,e){var f=new g.l,h=new g.l;a.A(f);b.A(h);if(c.zc(h,f,d)||h.ca()>d&&h.R()>d||h.ca()<=d&&h.R()<=d)return!1;f=new g.Ta;h=new g.Sa;b.Hf(0,h);f.nf(h);b.Hf(2,h);f.lineTo(h);return c.DI(a,f,d,e)};c.IV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.ek(e,f,d)&&4!=c.qc(a,b,!1)?
c.dI(a,b,d)?!0:c.Wz(a,b,d,!1):!1};c.GV=function(a,b,d){return 4==this.qc(a,b,!1)?!0:(new g.Zl(a,b,d,!0)).next()?!this.UG(a,b,d):!1};c.NI=function(a,b,d){if(4==c.qc(a,b,!1))return!1;var e=new g.be(0);if(0!=c.Xz(a,b,d,e))return!1;for(var f=new g.de,h=0;h<e.size;h+=2){var k=e.read(h),m=e.read(h+1);f.Bu(k,m)}a=a.mg();b=b.mg();a.Fd(b,0,b.I());return c.Mw(a,f,d)};c.LI=function(a,b,d){if(4==c.qc(a,b,!1))return!1;var e=new g.be(0);if(0!=c.Xz(a,b,d,e))return!1;for(var f=new g.de,h=0;h<e.size;h+=2){var k=e.read(h),
m=e.read(h+1);f.Bu(k,m)}a=a.mg();b=b.mg();a.Fd(b,0,b.I());return!c.Mw(a,f,d)};c.MV=function(a,b,d){return 4==c.qc(a,b,!1)?!1:c.WG(a,b,d)};c.KI=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.zc(e,f,d)&&4!=c.qc(a,b,!1)?c.ym(b,a,d,!1):!1};c.FV=function(a,b,d){if(4==c.qc(a,b,!1))return!0;b=b.D();return!c.Yz(a,b,d)};c.QV=function(a,b,d){if(4==c.qc(a,b,!1))return!1;b=b.D();return c.Zz(a,b,d)};c.AV=function(a,b,d){if(4==c.qc(a,b,!1))return!1;b=b.D();return c.SG(a,b,d)};c.EV=function(a,b,
d){return 4==c.qc(a,b,!1)?!0:!c.VG(a,b,d,!1)};c.PV=function(a,b,d){if(4==this.qc(a,b,!1))return!1;var e=a.Ga(),f=new g.l,h=new g.l,k=new g.l;a.A(f);b.A(h);f.W(d,d);h.W(d,d);k.K(f);k.Ea(h);f=null;var m=a.Bb;if(null!=m){var n=m.Fb;f=m.zo;null==n&&(n=m=g.ta.jj(a,k))}else n=m=g.ta.jj(a,k);var p=n.getIterator(),r=null;null!=f&&(r=f.getIterator());var t=new g.h,x=new g.h,K=!1,ca=d*d;f=new g.pn(b.I());for(m=0;m<b.I();m++)f.write(m,0);for(m=0;m<b.I();m++)if(b.D(m,t),k.contains(t))if(h.K(t.x,t.y,t.x,t.y),
null==r||(r.Xi(h,d),-1!=r.next())){p.Xi(h,d);for(var ha=p.next();-1!=ha;ha=p.next())if(e.Vb(n.ja(ha)),ha=e.ha(),ha.hc(ha.fe(t,!1),x),g.h.yc(t,x)<=ca){f.write(m,1);K=!0;break}}if(!K)return!1;a=a.mg();e=new g.de;h=new g.h;for(m=0;m<b.I();m++)0!=f.read(m)&&(b.D(m,h),e.Bu(h.x,h.y));return this.Mw(a,e,d)};c.CV=function(a,b,d){if(4==this.qc(a,b,!1))return!1;var e=a.Ga(),f=new g.l,h=new g.l,k=new g.l;a.A(f);b.A(h);f.W(d,d);h.W(d,d);k.K(f);k.Ea(h);f=null;var m=a.Bb;if(null!=m){var n=m.Fb;f=m.zo;null==n&&
(n=m=g.ta.jj(a,k))}else n=m=g.ta.jj(a,k);var p=n.getIterator(),r=null;null!=f&&(r=f.getIterator());var t=new g.h,x=new g.h,K=!1,ca=!1,ha=d*d;f=new g.pn(b.I());for(m=0;m<b.I();m++)f.write(m,0);for(m=0;m<b.I();m++)if(b.D(m,t),k.contains(t))if(h.K(t.x,t.y,t.x,t.y),null!=r&&(r.Xi(h,d),-1==r.next()))ca=!0;else{p.Xi(h,d);for(var da=!1,ka=p.next();-1!=ka;ka=p.next())if(e.Vb(n.ja(ka)),ka=e.ha(),ka.hc(ka.fe(t,!1),x),g.h.yc(t,x)<=ha){f.write(m,1);da=K=!0;break}da||(ca=!0)}else ca=!0;if(!K||!ca)return!1;a=a.mg();
e=new g.de;h=new g.h;for(m=0;m<b.I();m++)0!=f.read(m)&&(b.D(m,h),e.Bu(h.x,h.y));return!this.Mw(a,e,d)};c.zV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.zc(e,f,d)||4==c.qc(a,b,!1)||!c.VG(a,b,d,!0))return!1;a=a.mg();return!c.gI(a,b,d)};c.HV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return f.ca()>d&&f.R()>d?!1:c.ek(e,f,d)};c.DV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.zc(f,e,d)?!1:!c.TG(a,f,d)};c.OV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);
if(f.ca()<=d&&f.R()<=d)return f=b.Ip(),c.Zz(a,f,d);if(f.ca()<=d||f.R()<=d)return f=new g.Ta,e=new g.Sa,b.Hf(0,e),f.nf(e),b.Hf(2,e),f.lineTo(e),c.NI(a,f,d);a=a.Ga();b=new g.l;e=new g.l;b.K(f);e.K(f);b.W(-d,-d);e.W(d,d);f=!1;for(var h=new g.l,k=new g.l;a.$a();)for(;a.Ha();){a.ha().A(h);k.K(b);k.Ea(h);if(!k.B()&&(k.ca()>d||k.R()>d))return!1;k.K(e);k.Ea(h);k.B()||(f=!0)}return f};c.LV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.zc(e,f,d)||c.zc(f,e,d)||c.zc(f,e,d)||f.ca()>d&&f.R()>d||f.ca()<=
d&&f.R()<=d)return!1;e=new g.Ta;f=new g.Sa;b.Hf(0,f);e.nf(f);b.Hf(2,f);e.lineTo(f);return c.WG(a,e,d)};c.RV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.zc(f,e,d)||f.ca()<=d&&f.R()<=d)return!1;if(f.ca()<=d||f.R()<=d)return c.zc(f,e,d);a=a.Ga();b=new g.l;b.K(f);b.W(-d,-d);f=!1;e=new g.l;for(var h=new g.l;a.$a();)for(;a.Ha();)a.ha().A(e),b.hm(e)?f=!0:(h.K(b),h.Ea(e),!h.B()&&(h.ca()>d||h.R()>d)&&(f=!0));return f};c.yV=function(a,b,d){var e=new g.l,f=new g.l;b.A(f);a.A(e);if(!c.zc(e,f,
d)||f.ca()>d&&f.R()>d)return!1;if(f.ca()<=d&&f.R()<=d)return b=b.Ip(),c.SG(a,b,d);e=new g.Ta;f=new g.Sa;b.Hf(0,f);e.nf(f);b.Hf(2,f);e.lineTo(f);return c.ym(e,a,d,!1)};c.BV=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.zc(f,e,d)||f.ca()<=d&&f.R()<=d)return!1;if(f.ca()<=d||f.R()<=d)return e=new g.Ta,f=new g.Sa,b.Hf(0,f),e.nf(f),b.Hf(2,f),e.lineTo(f),c.LI(a,e,d);a=a.Ga();b=new g.l;e=new g.l;e.K(f);b.K(f);e.W(-d,-d);b.W(d,d);for(var h=f=!1,k=new g.l,m=new g.l;a.$a();)for(;a.Ha();)if(a.ha().A(k),
h||b.contains(k)||(h=!0),f||(m.K(e),m.Ea(k),!m.B()&&(m.ca()>d||m.R()>d)&&(f=!0)),f&&h)return!0;return!1};c.iU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.ek(e,f,d)?c.jU(a,b,d)?!0:c.YA(a,b,d,!1,!0,!1):!1};c.gU=function(a,b,d){return!c.gI(a,b,d)};c.oU=function(a,b,d){return c.YA(a,b,d,!1,!1,!0)};c.eI=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.zc(e,f,d)?c.YA(b,a,d,!0,!1,!1):!1};c.Mw=function(a,b,d){d*=d;for(var e=new g.h,f=new g.h,h=0;h<b.I();h++){b.D(h,f);for(var k=
!1,m=0;m<a.I();m++)if(a.D(m,e),g.h.yc(e,f)<=d){k=!0;break}if(!k)return!1}return!0};c.Nw=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return c.ek(e,f,d)};c.fI=function(a,b,d){b=b.D();return c.kt(a,b,d)};c.sU=function(a,b,d){return c.Nw(a,b,d)};c.dU=function(a,b,d){return!c.fI(a,b,d)};c.hU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);return f.ca()>d||f.R()>d?!1:c.ek(e,f,d)};c.fU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.zc(f,e,d))return!1;b=new g.l;b.K(f);b.W(d,d);
d=new g.h;for(f=0;f<a.I();f++)if(a.D(f,d),b.contains(d))return!1;return!0};c.qU=function(a,b,d){var e=new g.l,f=new g.l,h=new g.l;b.A(e);if(e.ca()<=d&&e.R()<=d)return!1;if(e.ca()<=d||e.R()<=d){b=new g.h;var k=!1;f.K(e);h.K(e);f.W(d,d);e.ca()>d?h.W(0,-d):h.W(-d,0);for(var m=0;m<a.I();m++)if(a.D(m,b),f.contains(b)){if(e.ca()>d){if(b.y>h.G&&b.y<h.H)return!1}else if(b.x>h.v&&b.x<h.C)return!1;k=!0}return k}f.K(e);h.K(e);f.W(d,d);h.W(-d,-d);b=new g.h;k=!1;for(m=0;m<a.I();m++)if(a.D(m,b),f.contains(b)){if(h.hm(b))return!1;
k=!0}return k};c.rU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.zc(f,e,d))return!1;if(f.ca()<=d&&f.R()<=d)return c.ek(e,f,d);if(f.ca()<=d||f.R()<=d){b=!1;e=new g.l;var h=new g.l;e.K(f);h.K(f);f.ca()>d?e.W(0,-d):e.W(-d,0);h.W(d,d);for(var k=new g.h,m=0;m<a.I();m++){a.D(m,k);if(!h.contains(k))return!1;f.ca()>d?k.y>e.G&&k.y<e.H&&(b=!0):k.x>e.v&&k.x<e.C&&(b=!0)}return b}b=!1;e=new g.l;h=new g.l;e.K(f);h.K(f);e.W(-d,-d);h.W(d,d);k=new g.h;for(m=0;m<a.I();m++){a.D(m,k);if(!h.contains(k))return!1;
e.hm(k)&&(b=!0)}return b};c.cU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(!c.zc(e,f,d)||f.ca()>d||f.R()>d)return!1;b=b.Ip();return!c.kt(a,b,d)};c.eU=function(a,b,d){var e=new g.l,f=new g.l;a.A(e);b.A(f);if(c.zc(f,e,d)||f.ca()<=d&&f.R()<=d)return!1;if(f.ca()<=d||f.R()<=d){b=new g.l;e=new g.l;b.K(f);f.ca()>d?b.W(0,-d):b.W(-d,0);e.K(f);e.W(d,d);for(var h=new g.h,k=!1,m=!1,n=0;n<a.I();n++)if(a.D(n,h),k||(f.ca()>d?h.y>b.G&&h.y<b.H&&(k=!0):h.x>b.v&&h.x<b.C&&(k=!0)),m||e.contains(h)||(m=!0),
k&&m)return!0;return!1}b=new g.l;e=new g.l;b.K(f);b.W(-d,-d);e.K(f);e.W(d,d);h=new g.h;m=k=!1;for(n=0;n<a.I();n++)if(a.D(n,h),!k&&b.hm(h)&&(k=!0),m||e.contains(h)||(m=!0),k&&m)return!0;return!1};c.wI=function(a,b,d){return g.h.yc(a,b)<=d*d?!0:!1};c.SU=function(a,b,d){return g.h.yc(a,b)>d*d?!0:!1};c.uI=function(a,b,d){return c.wI(a,b,d)};c.vI=function(a,b,d){var e=new g.l;e.K(a);return c.ek(e,b,d)};c.Rw=function(a,b,d){var e=new g.l;e.K(b);e.W(d,d);return!e.contains(a)};c.dB=function(a,b,d){if(b.ca()<=
d&&b.R()<=d)return!1;var e=new g.l,f=new g.l;e.K(b);e.W(d,d);if(!e.contains(a))return!1;if(b.ca()<=d||b.R()<=d){f.K(b);b.ca()>d?f.W(0,-d):f.W(-d,0);if(b.ca()>d){if(a.y>f.G&&a.y<f.H)return!1}else if(a.x>f.v&&a.x<f.C)return!1;return!0}f.K(b);f.W(-d,-d);return f.hm(a)?!1:!0};c.eB=function(a,b,d){if(b.ca()<=d&&b.R()<=d)return!0;if(b.ca()<=d||b.R()<=d){var e=new g.l;e.K(b);b.ca()>d?e.W(0,-d):e.W(-d,0);var f=!1;b.ca()>d?a.y>e.G&&a.y<e.H&&(f=!0):a.x>e.v&&a.x<e.C&&(f=!0);return f}e=new g.l;e.K(b);e.W(-d,
-d);return e.hm(a)};c.RU=function(a,b,d){return c.vI(a,b,d)};c.ek=function(a,b,d){return c.zc(a,b,d)&&c.zc(b,a,d)};c.dk=function(a,b,d){var e=new g.l;e.K(b);e.W(d,d);return!a.isIntersecting(e)};c.cQ=function(a,b,d){if(a.ca()<=d&&a.R()<=d){var e=a.sf();return c.dB(e,b,d)}if(b.ca()<=d&&b.R()<=d)return e=b.sf(),c.dB(e,a,d);a.ca()>d&&a.R()>d&&(b.ca()<=d||b.R()<=d)?e=b:(e=a,a=b);if(e.ca()<=d||e.R()<=d){if(a.ca()<=d||a.R()<=d){b=new g.yb;var f=new g.yb,h=[0,0],k=[0,0],m=new g.h;e.dn(m);b.Dc(m);e.en(m);
b.Qc(m);a.dn(m);f.Dc(m);a.en(m);f.Qc(m);b.Ea(f,null,h,k,d);return 1!=b.Ea(f,null,null,null,d)?!1:0==h[0]||1==h[1]||0==k[0]||1==k[1]}b=new g.l;f=new g.l;b.K(a);b.W(-d,-d);f.K(b);f.Ea(e);return!f.B()&&(f.ca()>d||f.R()>d)?!1:!0}a.W(d,d);f=new g.l;f.K(e);f.Ea(a);return f.B()||!f.B()&&f.ca()>d&&f.R()>d?!1:!0};c.bQ=function(a,b,d){if(c.zc(a,b,d)||c.zc(b,a,d)||a.ca()<=d&&a.R()<=d||b.ca()<=d&&b.R()<=d)return!1;if(a.ca()<=d||a.R()<=d){if(b.ca()>d&&b.R()>d)return!1;var e=new g.yb,f=new g.yb,h=[0,0],k=[0,0],
m=new g.h;a.dn(m);e.Dc(m);a.en(m);e.Qc(m);b.dn(m);f.Dc(m);b.en(m);f.Qc(m);e.Ea(f,null,h,k,d);return 2!=e.Ea(f,null,null,null,d)?!1:(0<h[0]||1>h[1])&&(0<k[0]||1>k[1])}if(b.ca()<=d||b.R()<=d)return!1;e=new g.l;e.K(a);e.Ea(b);return e.B()||e.ca()<=d||e.R()<=d?!1:!0};c.jF=function(a,b,d){if(!c.zc(a,b,d))return!1;if(a.ca()<=d&&a.R()<=d)return a=a.sf(),c.eB(a,b,d);if(b.ca()<=d&&b.R()<=d)return b=b.sf(),c.eB(b,a,d);if(a.ca()<=d||a.R()<=d)return c.zc(a,b,d);if(b.ca()<=d||b.R()<=d){var e=new g.l;e.K(a);e.W(-d,
-d);if(e.hm(b))return!0;a=new g.l;a.K(e);a.Ea(b);return a.B()||a.ca()<=d&&a.R()<=d?!1:!0}return c.zc(a,b,d)};c.aQ=function(a,b,d){if(c.zc(a,b,d)||c.zc(b,a,d)||a.ca()<=d&&a.R()<=d||b.ca()<=d&&b.R()<=d||b.ca()>d&&b.R()>d&&a.ca()>d&&a.R()>d)return!1;if(a.ca()>d&&a.R()>d)var e=b;else e=a,a=b;if(a.ca()>d&&a.R()>d){b=new g.l;var f=new g.l;f.K(a);f.W(-d,-d);b.K(f);b.Ea(e);return b.B()||b.ca()<=d&&b.R()<=d?!1:!0}b=new g.yb;f=new g.yb;var h=[0,0],k=[0,0],m=new g.h;e.dn(m);b.Dc(m);e.en(m);b.Qc(m);a.dn(m);f.Dc(m);
a.en(m);f.Qc(m);b.Ea(f,null,h,k,d);return 1!=b.Ea(f,null,null,null,d)?!1:0<h[0]&&1>h[1]&&0<k[0]&&1>k[1]};c.EI=function(a,b,d){var e=new g.l,f=new g.l,h=new g.Zl(a,b,d,!0);if(!h.next())return!0;if(this.UG(a,b,d))return!1;var k=a,m=null;1736==b.getType()&&(m=b);var n=!1,p=!1;do{var r=h.nl(),t=h.hl();t=b.Na(b.Ba(t));e.K(h.uz());e.W(d,d);if(e.contains(t)&&(t=g.hd.Yd(k,t,0),0!=t)||1736==b.getType()&&(r=a.Na(a.Ba(r)),f.K(h.az()),f.W(d,d),f.contains(r)&&(t=g.hd.Yd(m,r,0),0!=t)))return!1;n||(!g.Dg.Ml(a,b.da()-
1)||null!=a.Bb&&null!=a.Bb.Fb?k=a:(k=new g.Da,a.copyTo(k),k.fj(1)),n=!0);1736!=b.getType()||p||(p=b,!g.Dg.Ml(p,a.da()-1)||null!=b.Bb&&null!=b.Bb.Fb?m=b:(m=new g.Da,p.copyTo(m),m.fj(1)),p=!0)}while(h.next());return!0};c.zc=function(a,b,d){var e=new g.l;e.K(a);e.W(d,d);return e.contains(b)};c.ls=function(a,b,d){var e=new g.l;e.K(b);e.W(d,d);b=new g.h;a.dn(b);if(!e.contains(b))return!0;a.$I(b);if(!e.contains(b))return!0;a.cJ(b);if(!e.contains(b))return!0;a.en(b);return e.contains(b)?!1:!0};c.dI=function(a,
b,d){if(a.da()!=b.da()||a.I()!=b.I())return!1;var e=new g.h,f=new g.h,h=!0;d*=d;for(var k=0;k<a.da();k++){if(a.Vc(k)!=b.Vc(k)){h=!1;break}for(var m=a.Ba(k);m<b.Vc(k);m++)if(a.D(m,e),b.D(m,f),g.h.yc(e,f)>d){h=!1;break}if(!h)break}return h?!0:!1};c.jU=function(a,b,d){if(a.I()!=b.I())return!1;var e=new g.h,f=new g.h,h=!0;d*=d;for(var k=0;k<a.I();k++)if(a.D(k,e),b.D(k,f),g.h.yc(e,f)>d){h=!1;break}return h?!0:!1};c.YA=function(a,b,d,e,f,h){var k=!1;if(a.I()>b.I()){e&&(e=!1,k=!0);var m=b}else m=a,a=b;b=
null;if(f||h||k){b=new g.pn(a.I());for(var n=0;n<a.I();n++)b.write(n,0)}n=new g.l;var p=new g.l,r=new g.l;m.A(n);a.A(p);n.W(d,d);p.W(d,d);r.K(n);r.Ea(p);p=new g.h;for(var t=new g.h,x=!0,K=g.ta.oE(a,r),ca=K.getIterator(),ha=d*d,da=0;da<m.I();da++)if(m.D(da,p),r.contains(p)){var ka=!1;n.K(p.x,p.y,p.x,p.y);ca.Xi(n,d);for(var ta=ca.next();-1!=ta&&!(ta=K.ja(ta),a.D(ta,t),g.h.yc(p,t)<=ha&&((f||h||k)&&b.write(ta,1),ka=!0,e));ta=ca.next());if(!ka&&(x=!1,f||e))return!1}else{if(f||e)return!1;x=!1}if(h&&x)return!1;
if(e)return!0;for(n=0;n<a.I();n++)if(1==b.read(n)){if(h)return!0}else if(f||k)return!1;return h?!1:!0};c.gI=function(a,b,d){if(a.I()>b.I())var e=b;else e=a,a=b;b=new g.l;var f=new g.l,h=new g.l;e.A(b);a.A(f);b.W(d,d);f.W(d,d);h.K(b);h.Ea(f);f=new g.h;for(var k=new g.h,m=d*d,n=g.ta.oE(a,h),p=n.getIterator(),r=0;r<e.I();r++)if(e.D(r,f),h.contains(f)){b.K(f.x,f.y,f.x,f.y);p.Xi(b,d);for(var t=p.next();-1!=t;t=p.next())if(a.D(n.ja(t),k),g.h.yc(f,k)<=m)return!0}return!1};c.Wz=function(a,b,d,e){return c.ym(a,
b,d,e)&&c.ym(b,a,d,e)};c.ym=function(a,b,d,e){function f(Ta,Ra){return r.QE(Ta,Ra)}var h=!0,k=[0,0],m=[0,0],n=0,p=new g.ia(0),r=new c,t,x=new g.l,K=new g.l,ca=new g.l;a.A(x);b.A(K);x.W(d,d);K.W(d,d);ca.K(x);ca.Ea(K);a=a.Ga();K=b.Ga();var ha=null,da=ha=null,ka=b.Bb;null!=ka?(ha=ka.Fb,da=ka.zo,null==ha&&(ha=g.ta.jj(b,ca))):ha=g.ta.jj(b,ca);b=ha.getIterator();ka=null;for(null!=da&&(ka=da.getIterator());a.$a();)for(;a.Ha();){var ta=!1,ua=a.ha();ua.A(x);if(!x.isIntersecting(ca))return!1;if(null!=ka&&(ka.Xi(x,
d),-1==ka.next()))return h=!1;da=ua.Qb();b.Uo(ua,d);for(t=b.next();-1!=t;t=b.next()){K.Vb(ha.ja(t));t=K.ha();var wa=ua.Ea(t,null,k,m,d);if(2==wa&&(!e||m[0]<=m[1])){wa=k[0];var Ea=k[1],Ga=m[0],Na=m[1];if(wa*da<=d&&(1-Ea)*da<=d){ta=!0;n=0;p.resize(0);r.rh.length=0;var La=a.wb();for(Ga=!0;Ga;){if(a.Ha()){ua=a.ha();da=ua.Qb();wa=ua.Ea(t,null,k,m,d);if(2==wa&&(!e||m[0]<=m[1])&&(wa=k[0],Ea=k[1],wa*da<=d&&(1-Ea)*da<=d)){La=a.wb();continue}if(K.Ha()&&(t=K.ha(),wa=ua.Ea(t,null,k,m,d),2==wa&&(!e||m[0]<=m[1])&&
(wa=k[0],Ea=k[1],wa*da<=d&&(1-Ea)*da<=d))){La=a.wb();continue}}Ga=!1}La!=a.wb()&&(a.Vb(La),a.ha());break}else La=a.wb(),t=N.construct(La,a.gb,wa,Ea,K.wb(),K.gb,Ga,Na),r.rh.push(t),p.add(p.size)}}if(!ta){if(n==r.rh.length)return!1;1<p.size-n&&p.Vd(n,p.size,f);for(ta=0;n<r.rh.length;n++)if(t=r.rh[p.get(n)],!(t.Kj<ta&&t.Si<ta)){if(da*(t.Kj-ta)>d)return!1;ta=t.Si;if(da*(1-ta)<=d||1==ta)break}if(da*(1-ta)>d)return!1;n=0;p.resize(0);r.rh.length=0}}return h};c.WG=function(a,b,d){if(1>c.Xz(a,b,d,null))return!1;
var e=new g.l,f=new g.l;a.A(e);b.A(f);var h=c.ls(e,f,d);e=c.ls(f,e,d);return h&&e?!0:h&&!e?!c.ym(b,a,d,!1):e&&!h?!c.ym(a,b,d,!1):!c.ym(a,b,d,!1)&&!c.ym(b,a,d,!1)};c.Xz=function(a,b,d,e){function f($a,cb){return x.QE($a,cb)}if(a.yz()>b.yz())var h=b,k=a;else h=a,k=b;a=h.Ga();b=k.Ga();var m=[0,0],n=[0,0],p=-1,r=0,t=new g.ia(0),x=new c,K=new g.l,ca=new g.l,ha=new g.l;h.A(K);k.A(ca);K.W(d,d);ca.W(d,d);ha.K(K);ha.Ea(ca);h=null;null!=e&&(h=new g.h);var da=ca=ca=null,ka=k.Bb;null!=ka?(ca=ka.Fb,da=ka.zo,null==
ca&&(ca=g.ta.jj(k,ha))):ca=g.ta.jj(k,ha);k=ca.getIterator();ka=null;for(null!=da&&(ka=da.getIterator());a.$a();)for(da=0;a.Ha();){var ta=a.ha();ta.A(K);if(K.isIntersecting(ha)&&(null==ka||(ka.Xi(K,d),-1!=ka.next()))){var ua=ta.Qb();k.Uo(ta,d);for(var wa=k.next();-1!=wa;wa=k.next()){var Ea=ca.ja(wa);b.Vb(Ea);var Ga=b.ha(),Na=Ga.Qb(),La=ta.Ea(Ga,null,m,n,d);if(0<La){wa=m[0];p=n[0];var Ta=2==La?m[1]:NaN,Ra=2==La?n[1]:NaN;if(2==La){if(ua*(Ta-wa)>d)return p=1;var Wa=ua*(Ta-wa);if(b.Ha()){Ga=b.ha();La=
ta.Ea(Ga,null,m,null,d);if(2==La){La=m[0];var Xa=m[1];La=ua*(Xa-La);if(Wa+La>d)return p=1}b.Vb(Ea);b.ha()}if(!b.vm()){b.li();Ga=b.li();La=ta.Ea(Ga,null,m,null,d);if(2==La&&(La=m[0],Xa=m[1],La=ua*(Xa-La),Wa+La>d))return p=1;b.Vb(Ea);b.ha()}if(a.Ha()){Ea=a.wb();ta=a.ha();La=ta.Ea(Ga,null,m,null,d);if(2==La&&(La=m[0],Xa=m[1],La=ua*(Xa-La),Wa+La>d))return p=1;a.Vb(Ea);a.ha()}if(!a.vm()){Ea=a.wb();a.li();ta=a.li();La=ta.Ea(Ga,null,m,null,d);if(2==La&&(La=m[0],Xa=m[1],La=Na*(Xa-La),Wa+La>d))return p=1;
a.Vb(Ea);a.ha()}Ga=N.construct(a.wb(),a.gb,wa,Ta,b.wb(),b.gb,p,Ra);x.rh.push(Ga);t.add(t.size)}p=0;null!=e&&(ta.hc(wa,h),e.add(h.x),e.add(h.y))}}if(r<x.rh.length){t.Vd(r,t.size,f);ta=0;for(wa=x.rh[t.get(r)].Mm;r<x.rh.length;r++)if(Ga=x.rh[t.get(r)],!(Ga.Kj<ta&&Ga.Si<ta))if(ua*(Ga.Kj-ta)>d)da=ua*(Ga.Si-Ga.Kj),ta=Ga.Si,wa=Ga.Mm;else{Ga.Mm!=wa?(da=ua*(Ga.Si-Ga.Kj),wa=Ga.Mm):da+=ua*(Ga.Si-Ga.Kj);if(da>d)return p=1;ta=Ga.Si;if(1==ta)break}ua*(1-ta)>d&&(da=0);r=0;t.resize(0);x.rh.length=0}}}return p};c.UG=
function(a,b,d){var e=a.Ga(),f=b.Ga();for(a=new g.Zl(a,b,d,!1);a.next();){b=a.nl();var h=a.hl();e.Vb(b);f.Vb(h);b=e.ha();if(0<f.ha().Ea(b,null,null,null,d))return!0}return!1};c.VG=function(a,b,d,e){var f=a.Ga(),h=new g.l,k=new g.l,m=new g.l;a.A(h);b.A(k);h.W(d,d);h.contains(k);k.W(d,d);m.K(h);m.Ea(k);h=a.Bb;null!=h?(h=h.Fb,null==h&&(h=g.ta.jj(a,m))):h=g.ta.jj(a,m);a=h.getIterator();for(var n=new g.h,p=new g.h,r=d*d,t=0;t<b.I();t++)if(b.D(t,n),m.contains(n)){k.K(n.x,n.y,n.x,n.y);a.Xi(k,d);for(var x=
!1,K=a.next();-1!=K;K=a.next())if(f.Vb(h.ja(K)),K=f.ha(),K.hc(K.fe(n,!1),p),g.h.yc(p,n)<=r){x=!0;break}if(e){if(!x)return!1}else if(x)return!0}return e?!0:!1};c.Yz=function(a,b,d){var e=new g.h,f=d*d,h=a.Ga();a=a.Bb;if(null!=a&&(a=a.Fb,null!=a)){var k=new g.l;k.K(b);d=a.MF(k,d);for(k=d.next();-1!=k;k=d.next())if(h.Vb(a.ja(k)),h.Ha()){k=h.ha();var m=k.fe(b,!1);k.hc(m,e);if(g.h.yc(b,e)<=f)return!0}return!1}for(a=new g.l;h.$a();)for(;h.Ha();)if(k=h.ha(),k.A(a),a.W(d,d),a.contains(b)&&(m=k.fe(b,!1),k.hc(m,
e),g.h.yc(b,e)<=f))return!0;return!1};c.SG=function(a,b,d){return c.Yz(a,b,d)&&!c.Zz(a,b,d)};c.Zz=function(a,b,d){a=a.mg();return!c.kt(a,b,d)};c.TG=function(a,b,d){if(a.tm()){var e=new g.yb(b.v,b.G,b.v,b.H),f=new g.yb(b.v,b.H,b.C,b.H),h=new g.yb(b.C,b.H,b.C,b.G);b=new g.yb(b.C,b.G,b.v,b.G);for(a=a.Ga();a.$a();)for(;a.Ha();){var k=a.ha();if(k.isIntersecting(e,d)||k.isIntersecting(f,d)||k.isIntersecting(h,d)||k.isIntersecting(b,d))return!0}}else{e=new g.l;e.K(b);e.W(d,d);d=a.ub(0);f=new g.h;h=new g.h;
b=new g.h;k=new g.h;for(var m=0,n=a.da();m<n;m++)for(var p=!0,r=a.Ba(m),t=a.Vc(m);r<t;r++)if(p)d.tc(2*r,h),p=!1;else{d.tc(2*r,f);b.L(h);k.L(f);if(0!=e.zy(b,k))return!0;h.L(f)}}return!1};c.qc=function(a,b,d){var e=a.getType(),f=b.getType();if(g.aa.xj(e)){var h=a.Bb;if(null!=h&&(h=h.Fk,null!=h))if(33==f){var k=b.D();k=h.So(k.x,k.y);if(1==k)return 1;if(0==k)return 4}else{k=new g.l;b.A(k);k=h.Ro(k);if(1==k)return 1;if(0==k)return 4;if(d&&g.aa.xj(f)&&c.HE(b,h))return 1073741824}}if(g.aa.xj(f)&&(h=b.Bb,
null!=h&&(h=h.Fk,null!=h)))if(33==e){a=a.D();k=h.So(a.x,a.y);if(1==k)return 2;if(0==k)return 4}else{b=new g.l;a.A(b);k=h.Ro(b);if(1==k)return 2;if(0==k)return 4;if(d&&g.aa.xj(e)&&c.HE(a,h))return 1073741824}return 0};c.HE=function(a,b){for(var d=a.I(),e=new g.h,f=0;f<d;f++)if(a.D(f,e),1==b.So(e.x,e.y))return!0;return!1};c.II=function(a,b,d,e){for(var f=1<=a.om(0)&&1<=b.om(0),h=a.Ga(),k=b.Ga(),m=[0,0],n=[0,0],p=new g.Zl(a,b,d,!1),r=!1;p.next();){var t=p.nl(),x=p.hl();h.Vb(t);k.Vb(x);t=h.ha();x=k.ha().Ea(t,
null,n,m,d);if(2==x){r=m[0];x=m[1];t=t.Qb();if(f&&(x-r)*t>d)return!1;r=!0}else if(0!=x){r=m[0];t=n[0];if(0<r&&1>r&&0<t&&1>t)return!1;r=!0}}if(!r)return!1;h=new g.l;k=new g.l;f=new g.l;a.A(h);b.A(k);h.W(1E3*d,1E3*d);k.W(1E3*d,1E3*d);f.K(h);f.Ea(k);return 10<a.I()&&(a=g.Ud.clip(a,f,d,0),a.B())||10<b.I()&&(b=g.Ud.clip(b,f,d,0),b.B())?!1:g.am.rt(a,b,d,"F********",e)};c.FI=function(a,b,d,e){var f=1<=a.om(0)&&1<=b.om(0),h=new g.l,k=new g.l,m=new g.l;a.A(h);b.A(k);for(var n=!1,p=c.ls(h,k,d),r=c.ls(k,h,d),
t=a.Ga(),x=b.Ga(),K=[0,0],ca=[0,0],ha=new g.Zl(a,b,d,!1);ha.next();){var da=ha.nl(),ka=ha.hl();t.Vb(da);x.Vb(ka);ka=t.ha();da=x.ha().Ea(ka,null,ca,K,d);if(2==da){da=K[0];var ta=K[1];ka=ka.Qb();if(f&&(ta-da)*ka>d&&(n=!0,p&&r))return!0}else if(0!=da&&(da=K[0],ka=ca[0],0<da&&1>da&&0<ka&&1>ka))return!0}f=new g.l;t=new g.l;f.K(h);f.W(1E3*d,1E3*d);t.K(k);t.W(1E3*d,1E3*d);m.K(f);m.Ea(t);h="";h=n?h+"**":h+"T*";if(p){if(10<b.I()&&(b=g.Ud.clip(b,m,d,0),b.B()))return!1;h+="****"}else h+="T***";if(r){if(10<a.I()&&
(a=g.Ud.clip(a,m,d,0),a.B()))return!1;h+="***"}else h+="T**";return g.am.rt(a,b,d,h.toString(),e)};c.BI=function(a,b,d,e){var f=[!1],h=c.zI(a,b,d,f);if(f[0])return h;f=new g.l;b.A(f);f.W(1E3*d,1E3*d);return 10<a.I()&&(a=g.Ud.clip(a,f,d,0),a.B())?!1:g.am.Sw(a,b,d,e)};c.zI=function(a,b,d,e){e[0]=!1;for(var f=a.Ga(),h=b.Ga(),k=[0,0],m=[0,0],n=new g.Zl(a,b,d,!1),p=!1;n.next();){var r=n.nl(),t=n.hl();f.Vb(r,-1);h.Vb(t,-1);r=f.ha();r=h.ha().Ea(r,null,m,k,d);if(0!=r&&(p=!0,1==r&&(r=k[0],t=m[0],0<r&&1>r&&
0<t&&1>t)))return e[0]=!0,!1}if(!p){e[0]=!0;k=new g.l;a.A(k);k.W(d,d);n=a;p=!1;m=new g.l;e=0;for(f=b.da();e<f;e++)if(0<b.Ja(e)){b.Rj(e,m);if(k.isIntersecting(m)){if(h=b.Na(b.Ba(e)),h=g.Dg.wm(n,h,0),0==h)return!1}else return!1;p||(!g.Dg.Ml(a,b.da()-1)||null!=a.Bb&&null!=a.Bb.Fb?n=a:(h=new g.Da,a.copyTo(h),h.fj(1),n=h),p=!0)}if(1==a.da()||1607==b.getType())return!0;k=new g.l;b.A(k);k.W(d,d);m=b;n=!1;d=new g.l;e=0;for(f=a.da();e<f;e++)if(0<a.Ja(e)){a.Rj(e,d);if(k.isIntersecting(d)&&(h=a.Na(a.Ba(e)),
h=g.Dg.wm(m,h,0),1==h))return!1;n||(!g.Dg.Ml(b,a.da()-1)||null!=b.Bb&&null!=b.Bb.Fb?m=b:(h=new g.Da,b.copyTo(h),h.fj(1),m=h),n=!0)}return!0}return!1};c.JI=function(a,b,d,e){for(var f=a.Ga(),h=b.Ga(),k=[0,0],m=[0,0],n=new g.Zl(a,b,d,!1),p=!1;n.next();){var r=n.nl(),t=n.hl();f.Vb(r);h.Vb(t);r=f.ha();r=h.ha().Ea(r,null,m,k,d);if(2==r)p=!0;else if(0!=r){p=k[0];r=m[0];if(0<p&&1>p&&0<r&&1>r)return!1;p=!0}}if(!p)return!1;h=new g.l;k=new g.l;f=new g.l;a.A(h);b.A(k);h.W(1E3*d,1E3*d);k.W(1E3*d,1E3*d);f.K(h);
f.Ea(k);return 10<a.I()&&(a=g.Ud.clip(a,f,d,0),a.B())||10<b.I()&&(b=g.Ud.clip(b,f,d,0),b.B())?!1:g.am.$m(a,b,d,"F********",e)};c.DI=function(a,b,d,e){for(var f=a.Ga(),h=b.Ga(),k=[0,0],m=[0,0],n=new g.Zl(a,b,d,!1),p=!1;n.next();){var r=n.nl(),t=n.hl();f.Vb(r);h.Vb(t);r=f.ha();r=h.ha().Ea(r,null,m,k,d);if(2==r)p=!0;else if(0!=r){p=k[0];r=m[0];if(0<p&&1>p&&0<r&&1>r)return!0;p=!0}}if(!p)return!1;h=new g.l;k=new g.l;m=new g.l;n=new g.l;f=new g.l;a.A(h);b.A(k);return c.ls(k,h,d)?(m.K(h),m.W(1E3*d,1E3*d),
n.K(k),n.W(1E3*d,1E3*d),f.K(m),f.Ea(n),10<a.I()&&(a=g.Ud.clip(a,f,d,0),a.B())||10<b.I()&&(b=g.Ud.clip(b,f,d,0),b.B())?!1:d=g.am.$m(a,b,d,"T********",e)):d=g.am.$m(a,b,d,"T*****T**",e)};c.CI=function(a,b,d,e){var f=[!1],h=c.zI(a,b,d,f);if(f[0])return h;f=new g.l;b.A(f);f.W(1E3*d,1E3*d);return 10<a.I()&&(a=g.Ud.clip(a,f,d,0),a.B())?!1:g.am.fB(a,b,d,e)};c.AI=function(a,b,d){return 1==g.hd.Yd(a,b,d)?!0:!1};c.HI=function(a,b,d){return 2==g.hd.Yd(a,b,d)?!0:!1};c.kt=function(a,b,d){var e=new g.h;d*=d;for(var f=
0;f<a.I();f++)if(a.D(f,e),g.h.yc(e,b)<=d)return!1;return!0};c.prototype.QE=function(a,b){a=this.rh[a];b=this.rh[b];return a.Mm<b.Mm||a.Mm==b.Mm&&(a.pw<b.pw||a.pw==b.pw&&(a.Kj<b.Kj||a.Kj==b.Kj&&(a.Si<b.Si||a.Si==b.Si&&a.BH<b.BH)))?-1:1};return c}();g.ud=l})(ja||={});(function(g){(function(c){c[c.InteriorInterior=0]="InteriorInterior";c[c.InteriorBoundary=1]="InteriorBoundary";c[c.InteriorExterior=2]="InteriorExterior";c[c.BoundaryInterior=3]="BoundaryInterior";c[c.BoundaryBoundary=4]="BoundaryBoundary";
c[c.BoundaryExterior=5]="BoundaryExterior";c[c.ExteriorInterior=6]="ExteriorInterior";c[c.ExteriorBoundary=7]="ExteriorBoundary";c[c.ExteriorExterior=8]="ExteriorExterior"})(l||={});var N;(function(c){c[c.AreaAreaPredicates=0]="AreaAreaPredicates";c[c.AreaLinePredicates=1]="AreaLinePredicates";c[c.LineLinePredicates=2]="LineLinePredicates";c[c.AreaPointPredicates=3]="AreaPointPredicates";c[c.LinePointPredicates=4]="LinePointPredicates";c[c.PointPointPredicates=5]="PointPointPredicates"})(N||={});
var l=function(){function c(){this.le=0;this.j=new g.iu;this.J=[0,0,0,0,0,0,0,0,0];this.Za=[0,0,0,0,0,0,0,0,0];this.ea=[!1,!1,!1,!1,!1,!1,!1,!1,!1];this.Sm=this.vw=-1}c.yB=function(a,b,d,e,f){if(9!=e.length)throw g.i.fa("relation string length has to be 9 characters");for(var h=0;9>h;h++){var k=e.charAt(h);if("*"!=k&&"T"!=k&&"F"!=k&&"0"!=k&&"1"!=k&&"2"!=k)throw g.i.fa("relation string");}h=this.MR(e,a.Db(),b.Db());if(0!=h)return g.ud.zB(a,b,d,h,f);h=new g.l;a.A(h);k=new g.l;b.A(k);var m=new g.l;m.K(h);
m.Zb(k);d=g.ta.Wd(d,m,!1);a=this.WE(a,d);b=this.WE(b,d);if(a.B()||b.B())return this.uW(a,b,e);h=a.getType();k=b.getType();m=!1;switch(h){case 1736:switch(k){case 1736:m=this.rt(a,b,d,e,f);break;case 1607:m=this.$m(a,b,d,e,f);break;case 33:m=this.qt(a,b,d,e);break;case 550:m=this.pt(a,b,d,e,f)}break;case 1607:switch(k){case 1736:m=this.$m(b,a,d,this.Zp(e),f);break;case 1607:m=this.gB(a,b,d,e,f);break;case 33:m=this.tt(a,b,d,e,f);break;case 550:m=this.st(a,b,d,e,f)}break;case 33:switch(k){case 1736:m=
this.qt(b,a,d,this.Zp(e));break;case 1607:m=this.tt(b,a,d,this.Zp(e),f);break;case 33:m=this.$U(a,b,d,e);break;case 550:m=this.lt(b,a,d,this.Zp(e))}break;case 550:switch(k){case 1736:m=this.pt(b,a,d,this.Zp(e),f);break;case 1607:m=this.st(b,a,d,this.Zp(e),f);break;case 550:m=this.ZA(a,b,d,e,f);break;case 33:m=this.lt(a,b,d,e)}break;default:m=!1}return m};c.rt=function(a,b,d,e,f){var h=new c;h.Yi();h.bj(e);h.xJ();var k=new g.l,m=new g.l;a.A(k);b.A(m);e=!1;g.ud.dk(k,m,d)&&(h.Cu(a,b),e=!0);e||(k=g.ud.qc(a,
b,!1),4==k?(h.Cu(a,b),e=!0):1==k?(h.ly(b),e=!0):2==k&&(h.ZD(a),e=!0));e||(e=new g.gd,a=e.Ib(a),b=e.Ib(b),h.Wo(e,d,f),h.Bp(a,b),h.j.Ug());return c.fg(h.J,h.Xc)};c.Sw=function(a,b,d,e){var f=new c;f.Yi();f.bj("T*****F**");f.xJ();var h=new g.l,k=new g.l;a.A(h);b.A(k);var m=!1;g.ud.dk(h,k,d)&&(f.Cu(a,b),m=!0);m||(h=g.ud.qc(a,b,!1),4==h?(f.Cu(a,b),m=!0):1==h?(f.ly(b),m=!0):2==h&&(f.ZD(a),m=!0));if(m)return h=this.fg(f.J,f.Xc);m=new g.gd;a=m.Ib(a);h=m.Ib(b);g.Tk.V(m,d,e,!1);d=m.Ne(h).mg();m.Gp(0,!0,!0);
g.rn.V(m,a,-1,!1,e);if(0==m.I(a))return!1;g.rn.V(m,h,-1,!1,e);f.er(m,e);b=0==m.I(h);if(!b&&(f.Bp(a,h),f.j.Ug(),h=this.fg(f.J,f.Xc),!h))return h;a=m.Ne(a);m=new g.gd;a=m.Ib(a);h=m.Ib(d);f.er(m,e);f.le=0;f.Yi();f.bj(b?"T*****F**":"******F**");f.IB();f.Bp(a,h);f.j.Ug();return h=this.fg(f.J,f.Xc)};c.$m=function(a,b,d,e,f){var h=new c;h.Yi();h.bj(e);h.IB();var k=new g.l,m=new g.l;a.A(k);b.A(m);e=!1;g.ud.dk(k,m,d)&&(h.Du(a,b),e=!0);e||(k=g.ud.qc(a,b,!1),4==k?(h.Du(a,b),e=!0):1==k&&(h.$D(b),e=!0));e||(e=
new g.gd,a=e.Ib(a),b=e.Ib(b),h.Wo(e,d,f),h.kh=h.j.Dp(),c.Jw(b,h.j,h.kh),h.Bp(a,b),h.j.Ep(h.kh),h.j.Ug());return c.fg(h.J,h.Xc)};c.fB=function(a,b,d,e){var f=new c;f.Yi();f.bj("T*****F**");f.IB();var h=new g.l,k=new g.l;a.A(h);b.A(k);var m=!1;g.ud.dk(h,k,d)&&(f.Du(a,b),m=!0);m||(h=g.ud.qc(a,b,!1),4==h?(f.Du(a,b),m=!0):1==h&&(f.$D(b),m=!0));if(m)return d=this.fg(f.J,f.Xc);m=new g.gd;a=m.Ib(a);b=m.Ib(b);f.Wo(m,d,e);if(0==m.I(a))return!1;f.Bp(a,b);f.j.Ug();return d=this.fg(f.J,f.Xc)};c.pt=function(a,
b,d,e,f){var h=new c;h.Yi();h.bj(e);h.yJ();var k=new g.l,m=new g.l;a.A(k);b.A(m);e=!1;g.ud.dk(k,m,d)&&(h.Eu(a),e=!0);e||(k=g.ud.qc(a,b,!1),4==k?(h.Eu(a),e=!0):1==k&&(h.zN(),e=!0));e||(e=new g.gd,a=e.Ib(a),b=e.Ib(b),h.Wo(e,d,f),h.Gy(a,b),h.j.Ug());return c.fg(h.J,h.Xc)};c.gB=function(a,b,d,e,f){var h=new c;h.Yi();h.bj(e);h.eX();e=new g.l;var k=new g.l;a.A(e);b.A(k);var m=!1;g.ud.dk(e,k,d)&&(h.PG(a,b),m=!0);m||4!=g.ud.qc(a,b,!1)||(h.PG(a,b),m=!0);m||(e=new g.gd,a=e.Ib(a),b=e.Ib(b),h.Wo(e,d,f),h.Yh=
h.j.Dp(),h.kh=h.j.Dp(),c.Jw(a,h.j,h.Yh),c.Jw(b,h.j,h.kh),h.Bp(a,b),h.j.Ep(h.Yh),h.j.Ep(h.kh),h.j.Ug());return c.fg(h.J,h.Xc)};c.st=function(a,b,d,e,f){var h=new c;h.Yi();h.bj(e);h.MJ();e=new g.l;var k=new g.l;a.A(e);b.A(k);var m=!1;g.ud.dk(e,k,d)&&(h.Vz(a),m=!0);m||4!=g.ud.qc(a,b,!1)||(h.Vz(a),m=!0);m||(e=new g.gd,a=e.Ib(a),b=e.Ib(b),h.Wo(e,d,f),h.Yh=h.j.Dp(),c.Jw(a,h.j,h.Yh),h.Gy(a,b),h.j.Ep(h.Yh),h.j.Ug());return c.fg(h.J,h.Xc)};c.ZA=function(a,b,d,e,f){var h=new c;h.Yi();h.bj(e);h.RJ();e=new g.l;
var k=new g.l;a.A(e);b.A(k);var m=!1;g.ud.dk(e,k,d)&&(h.yI(),m=!0);m||(e=new g.gd,a=e.Ib(a),b=e.Ib(b),h.Wo(e,d,f),h.Gy(a,b),h.j.Ug());return c.fg(h.J,h.Xc)};c.qt=function(a,b,d,e){var f=new c;f.Yi();f.bj(e);f.yJ();var h=new g.l;a.A(h);b=b.D();var k=!1;g.ud.Rw(b,h,d)&&(f.Eu(a),k=!0);k||(d=g.hd.Yd(a,b,d),1==d?(f.J[0]=0,f.J[2]=2,f.J[3]=-1,f.J[5]=1,f.J[6]=-1):2==d?(f.J[6]=-1,0!=a.Ke()?(f.J[0]=-1,f.J[3]=0,f.J[2]=2,f.J[5]=1):(f.J[0]=0,f.J[3]=-1,f.J[5]=-1,d=new g.l,a.A(d),f.J[2]=0==d.ca()&&0==d.R()?-1:1)):
f.Eu(a));return this.fg(f.J,e)};c.tt=function(a,b,d,e,f){var h=new c;h.Yi();h.bj(e);h.MJ();var k=new g.l;a.A(k);e=b.D();var m=!1;g.ud.Rw(e,k,d)&&(h.Vz(a),m=!0);if(!m){k=null;var n=m=!1;if(h.ea[0]||h.ea[6])g.ud.Yz(a,e,d)?(h.ea[0]&&(k=g.pi.gm(a,f),n=!g.ud.kt(k,e,d),m=!0,h.J[0]=n?-1:0),h.J[6]=-1):(h.J[0]=-1,h.J[6]=0);h.ea[3]&&(null!=k&&k.B()?h.J[3]=-1:(m||(null==k&&(k=g.pi.gm(a,f)),n=!g.ud.kt(k,e,d),m=!0),h.J[3]=n?0:-1));h.ea[5]&&(null!=k&&k.B()?h.J[5]=-1:m&&!n?h.J[5]=0:(null==k&&(k=g.pi.gm(a,f)),f=
g.ud.Nw(k,b,d),h.J[5]=f?-1:0));h.ea[2]&&(0!=a.Qb()?h.J[2]=1:(f=new g.de(a.description),f.Fd(a,0,a.I()),a=g.ud.Nw(f,b,d),h.J[2]=a?-1:0))}return this.fg(h.J,h.Xc)};c.lt=function(a,b,d,e){var f=new c;f.Yi();f.bj(e);f.RJ();var h=new g.l;a.A(h);b=b.D();var k=!1;g.ud.Rw(b,h,d)&&(f.yI(),k=!0);if(!k){h=!1;k=!0;d*=d;for(var m=0;m<a.I();m++){var n=a.Na(m);g.h.yc(n,b)<=d?h=!0:k=!1;if(h&&!k)break}h?(f.J[0]=0,f.J[2]=k?-1:0,f.J[6]=-1):(f.J[0]=-1,f.J[2]=0,f.J[6]=0)}return c.fg(f.J,e)};c.$U=function(a,b,d,e){a=a.D();
b=b.D();for(var f=[],h=0;9>h;h++)f[h]=-1;g.h.yc(a,b)<=d*d?f[0]=0:(f[2]=0,f[6]=0);f[8]=2;return c.fg(f,e)};c.fg=function(a,b){for(var d=0;9>d;d++)switch(b.charAt(d)){case "T":if(-1==a[d])return!1;break;case "F":if(-1!=a[d])return!1;break;case "0":if(0!=a[d])return!1;break;case "1":if(1!=a[d])return!1;break;case "2":if(2!=a[d])return!1}return!0};c.uW=function(a,b,d){var e=[-1,-1,-1,-1,-1,-1,-1,-1,-1];if(a.B()&&b.B()){for(var f=0;9>f;f++)e[f]=-1;return this.fg(e,d)}f=!1;a.B()&&(a=b,f=!0);e[0]=-1;e[1]=
-1;e[3]=-1;e[4]=-1;e[6]=-1;e[7]=-1;e[8]=2;b=a.getType();g.aa.Hc(b)?1736==b?0!=a.Ke()?(e[2]=2,e[5]=1):(e[5]=-1,b=new g.l,a.A(b),e[2]=0==b.ca()&&0==b.R()?0:1):(b=0!=a.Qb(),e[2]=b?1:0,e[5]=g.pi.aq(a)?0:-1):(e[2]=0,e[5]=-1);f&&this.vK(e);return this.fg(e,d)};c.MR=function(a,b,d){return c.dQ(a)?3:c.UP(a)?4:c.cY(a,b,d)?8:c.CP(a,b,d)?16:c.eP(a)?1:c.EU(a,b,d)?32:0};c.dQ=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"F"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"F"==a.charAt(5)&&"F"==a.charAt(6)&&
"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.UP=function(a){return"F"==a.charAt(0)&&"F"==a.charAt(1)&&"*"==a.charAt(2)&&"F"==a.charAt(3)&&"F"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.cY=function(a,b,d){if(0==b&&0==d)return!1;if(2!=b||2!=d)if("F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"T"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)||1==b&&1==d&&"F"==a.charAt(0)&&"T"==a.charAt(1)&&
"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0;return 0!=d&&"F"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"T"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.CP=function(a,b,d){return b>d?"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?
!0:!1:1==b&&1==d&&"0"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"*"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.eP=function(a){return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"*"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"F"==a.charAt(6)&&"F"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1};c.EU=function(a,b,d){if(b==d){if(1!=b)return"T"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&
"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8)?!0:!1;if("1"==a.charAt(0)&&"*"==a.charAt(1)&&"T"==a.charAt(2)&&"*"==a.charAt(3)&&"*"==a.charAt(4)&&"*"==a.charAt(5)&&"T"==a.charAt(6)&&"*"==a.charAt(7)&&"*"==a.charAt(8))return!0}return!1};c.Jw=function(a,b,d){a=b.La(a);for(var e=b.Re;-1!=e;e=b.Rf(e))if(0!=(b.xd(e)&a)){var f=b.Me(e);if(-1==f)b.nn(e,d,0);else{var h=f,k=0;do 0!=(b.dh(h)&a)&&k++,h=b.jc(b.xa(h));while(h!=f);b.nn(e,d,k)}}};c.Zp=function(a){var b=""+a.charAt(0);b+=a.charAt(3);
b+=a.charAt(6);b+=a.charAt(1);b+=a.charAt(4);b+=a.charAt(7);b+=a.charAt(2);b+=a.charAt(5);return b+=a.charAt(8)};c.prototype.Yi=function(){for(var a=0;9>a;a++)this.J[a]=-2,this.Za[a]=-2};c.vK=function(a){var b=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[5]=a[7];a[3]=b;a[6]=d;a[7]=e};c.prototype.bj=function(a){this.Xc=a;for(a=0;9>a;a++)"*"!=this.Xc.charAt(a)?(this.ea[a]=!0,this.le++):this.ea[a]=!1};c.prototype.UJ=function(){for(var a=0;9>a;a++)this.ea[a]&&-2==this.J[a]&&(this.J[a]=-1,this.ea[a]=!1)};
c.prototype.pc=function(a){if(-2==this.J[a])return!1;if(-1==this.J[a])return this.ea[a]=!1,this.le--,!0;if("T"!=this.Xc.charAt(a)&&"F"!=this.Xc.charAt(a)){if(this.J[a]<this.Za[a])return!1;this.ea[a]=!1;this.le--;return!0}this.ea[a]=!1;this.le--;return!0};c.prototype.xJ=function(){this.vw=0;this.Za[0]=2;this.Za[1]=1;this.Za[2]=2;this.Za[3]=1;this.Za[4]=1;this.Za[5]=1;this.Za[6]=2;this.Za[7]=1;this.Za[8]=2;this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)};c.prototype.IB=function(){this.vw=1;this.Sm=
3;this.Za[0]=1;this.Za[1]=0;this.Za[2]=2;this.Za[3]=1;this.Za[4]=0;this.Za[5]=1;this.Za[6]=1;this.Za[7]=0;this.Za[8]=2;this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)};c.prototype.eX=function(){this.vw=2;this.Sm=4;this.Za[0]=1;this.Za[1]=0;this.Za[2]=1;this.Za[3]=0;this.Za[4]=0;this.Za[5]=0;this.Za[6]=1;this.Za[7]=0;this.Za[8]=2;this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)};c.prototype.yJ=function(){this.Sm=3;this.Za[0]=0;this.Za[1]=-1;this.Za[2]=2;this.Za[3]=0;this.Za[4]=-1;this.Za[5]=1;this.Za[6]=
0;this.Za[7]=-1;this.Za[8]=2;this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--);this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--);this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--);this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)};c.prototype.MJ=function(){this.Sm=4;this.Za[0]=0;this.Za[1]=-1;this.Za[2]=1;this.Za[3]=0;this.Za[4]=-1;this.Za[5]=0;this.Za[6]=0;this.Za[7]=-1;this.Za[8]=2;this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--);this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--);this.ea[7]&&
(this.J[7]=-1,this.ea[7]=!1,this.le--);this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)};c.prototype.RJ=function(){this.Sm=5;this.Za[0]=0;this.Za[1]=-1;this.Za[2]=0;this.Za[3]=-1;this.Za[4]=-1;this.Za[5]=-1;this.Za[6]=0;this.Za[7]=-1;this.Za[8]=2;this.ea[1]&&(this.J[1]=-1,this.ea[1]=!1,this.le--);this.ea[3]&&(this.J[3]=-1,this.ea[3]=!1,this.le--);this.ea[4]&&(this.J[4]=-1,this.ea[4]=!1,this.le--);this.ea[5]&&(this.J[5]=-1,this.ea[5]=!1,this.le--);this.ea[7]&&(this.J[7]=-1,this.ea[7]=!1,this.le--);
this.ea[8]&&(this.J[8]=2,this.ea[8]=!1,this.le--)};c.prototype.xN=function(a,b,d){var e=!0;this.ea[0]&&(this.CS(a,b,d),e=e&&this.pc(0));this.ea[1]&&(this.sG(a,b,1),e=e&&this.pc(1));this.ea[2]&&(this.tG(a,b,d,2),e=e&&this.pc(2));this.ea[3]&&(this.sG(a,d,3),e=e&&this.pc(3));this.ea[4]&&(this.BN(a,b,d),e=e&&this.pc(4));this.ea[5]&&(this.eE(a,d,5),e=e&&this.pc(5));this.ea[6]&&(this.tG(a,d,b,6),e=e&&this.pc(6));this.ea[7]&&(this.eE(a,b,7),e=e&&this.pc(7));return e};c.prototype.Cu=function(a,b){this.J[0]=
-1;this.J[1]=-1;this.J[3]=-1;this.J[4]=-1;this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5));this.Fr(b,this.ea[6]?6:-1,this.Xc.charAt(6),this.ea[7]?7:-1,this.Xc.charAt(7))};c.prototype.Fr=function(a,b,d,e,f){if(-1!=b||-1!=e)("T"!=d&&"F"!=d&&-1!=b||"T"!=f&&"F"!=f&&-1!=e?0!=a.Ke():1)?(-1!=b&&(this.J[b]=2),-1!=e&&(this.J[e]=1)):(-1!=e&&(this.J[e]=-1),-1!=b&&(d=new g.l,a.A(d),this.J[b]=0==d.ca()&&0==d.R()?0:1))};c.prototype.ly=function(a){this.J[2]=2;this.J[3]=-1;this.J[4]=
-1;this.J[5]=1;this.J[6]=-1;this.J[7]=-1;this.Fr(a,this.ea[0]?0:-1,this.Xc.charAt(0),this.ea[1]?1:-1,this.Xc.charAt(1))};c.prototype.ZD=function(a){this.ly(a);c.vK(this.J)};c.prototype.Du=function(a,b){this.J[0]=-1;this.J[1]=-1;this.J[3]=-1;this.J[4]=-1;if(this.ea[6]){var d=this.Xc.charAt(6);d="T"!=d&&"F"!=d?0!=b.Qb():!0;this.J[6]=d?1:0}this.ea[7]&&(b=g.pi.aq(b),this.J[7]=b?0:-1);this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))};c.prototype.$D=function(a){if(this.ea[0]){var b=
this.Xc.charAt(0);b="T"!=b&&"F"!=b?0!=a.Qb():!0;this.J[0]=b?1:0}this.ea[1]&&(a=g.pi.aq(a),this.J[1]=a?0:-1);this.J[2]=2;this.J[3]=-1;this.J[4]=-1;this.J[5]=1;this.J[6]=-1;this.J[7]=-1};c.prototype.Eu=function(a){this.J[0]=-1;this.J[3]=-1;this.J[6]=0;this.Fr(a,this.ea[2]?2:-1,this.Xc.charAt(2),this.ea[5]?5:-1,this.Xc.charAt(5))};c.prototype.zN=function(){this.J[0]=0;this.J[2]=2;this.J[3]=-1;this.J[5]=1;this.J[6]=-1};c.prototype.PG=function(a,b){this.J[0]=-1;this.J[1]=-1;this.J[3]=-1;this.J[4]=-1;if(this.ea[2]){var d=
this.Xc.charAt(2);d="T"!=d&&"F"!=d?0!=a.Qb():!0;this.J[2]=d?1:0}this.ea[5]&&(a=g.pi.aq(a),this.J[5]=a?0:-1);this.ea[6]&&(d=this.Xc.charAt(6),d="T"!=d&&"F"!=d?0!=b.Qb():!0,this.J[6]=d?1:0);this.ea[7]&&(b=g.pi.aq(b),this.J[7]=b?0:-1)};c.prototype.Vz=function(a){this.J[0]=-1;this.J[3]=-1;if(this.ea[2]){var b=this.Xc.charAt(2);b="T"!=b&&"F"!=b?0!=a.Qb():!0;this.J[2]=b?1:0}this.ea[5]&&(a=g.pi.aq(a),this.J[5]=a?0:-1);this.J[6]=0};c.prototype.yI=function(){this.J[0]=-1;this.J[2]=0;this.J[6]=0};c.prototype.yN=
function(a,b,d){var e=!0;this.ea[0]&&(this.DS(a,b),e=e&&this.pc(0));this.ea[1]&&(this.zS(a,b,d,this.kh),e=e&&this.pc(1));this.ea[2]&&(this.AS(a,b),e=e&&this.pc(2));this.ea[3]&&(this.FN(a,b,d,this.kh),e=e&&this.pc(3));this.ea[4]&&(this.CN(a,b,d,this.kh),e=e&&this.pc(4));this.ea[5]&&(this.DN(a,b,d),e=e&&this.pc(5));this.ea[6]&&(this.lQ(a,b),e=e&&this.pc(6));this.ea[7]&&(this.kQ(a,b,d,this.kh),e=e&&this.pc(7));return e};c.prototype.mT=function(a,b,d){var e=!0;this.ea[0]&&(this.GS(a,b,d,this.Yh,this.kh),
e=e&&this.pc(0));this.ea[1]&&(this.uG(a,b,d,this.Yh,this.kh,1),e=e&&this.pc(1));this.ea[2]&&(this.vG(a,b,d,2),e=e&&this.pc(2));this.ea[3]&&(this.uG(a,d,b,this.kh,this.Yh,3),e=e&&this.pc(3));this.ea[4]&&(this.HN(a,b,d,this.Yh,this.kh),e=e&&this.pc(4));this.ea[5]&&(this.fE(a,d,this.Yh,5),e=e&&this.pc(5));this.ea[6]&&(this.vG(a,d,b,6),e=e&&this.pc(6));this.ea[7]&&(this.fE(a,b,this.kh,7),e=e&&this.pc(7));return e};c.prototype.aE=function(a,b,d){var e=!0;this.ea[0]&&(this.ES(a,b),e=e&&this.pc(0));this.ea[2]&&
(this.BS(a,b),e=e&&this.pc(2));this.ea[3]&&(this.GN(a,b,d),e=e&&this.pc(3));this.ea[5]&&(this.EN(a,b),e=e&&this.pc(5));this.ea[6]&&(this.mQ(a,b),e=e&&this.pc(6));return e};c.prototype.QG=function(a,b,d){var e=!0;this.ea[0]&&(this.HS(a,b,d,this.Yh),e=e&&this.pc(0));this.ea[2]&&(this.FS(a,d),e=e&&this.pc(2));this.ea[3]&&(this.JN(a,b,d,this.Yh),e=e&&this.pc(3));this.ea[5]&&(this.IN(a,b,d,this.Yh),e=e&&this.pc(5));this.ea[6]&&(this.nQ(a,b,d),e=e&&this.pc(6));return e};c.prototype.ZU=function(a,b,d){var e=
!0;this.ea[0]&&(this.IS(a,b,d),e=e&&this.pc(0));this.ea[2]&&(this.wG(a,b,d,2),e=e&&this.pc(2));this.ea[6]&&(this.wG(a,d,b,6),e=e&&this.pc(6));return e};c.prototype.CS=function(a,b,d){2!=this.J[0]&&(a=this.j.af(a),0!=(a&b)&&0!=(a&d)&&(this.J[0]=2))};c.prototype.sG=function(a,b,d){if(1!=this.J[d]){var e=this.j.af(this.j.xa(a));0!=(this.j.af(a)&b)&&0!=(e&b)&&(this.J[d]=1)}};c.prototype.tG=function(a,b,d,e){2!=this.J[e]&&(a=this.j.af(a),0!=(a&b)&&0==(a&d)&&(this.J[e]=2))};c.prototype.BN=function(a,b,
d){if(1!=this.J[4]){var e=this.j.dh(a);0!=(e&b)&&0!=(e&d)?this.J[4]=1:0!=this.J[4]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)&&(a=this.j.xd(this.j.uf(a)),0!=(a&b)&&0!=(a&d)&&(this.J[4]=0))}};c.prototype.eE=function(a,b,d){if(1!=this.J[d]){var e=this.j.af(this.j.xa(a));0==(this.j.af(a)&b)&&0==(e&b)&&(this.J[d]=1)}};c.prototype.DS=function(a,b){if(1!=this.J[0]){var d=this.j.af(this.j.xa(a));0!=(this.j.af(a)&b)&&0!=(d&b)&&(this.J[0]=1)}};c.prototype.zS=function(a,b,d,e){if(0!=this.J[1]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),
this.Ui)){var f=this.j.uf(a),h=this.j.xd(f);0==(h&b)&&0!=(this.j.af(a)&b)&&(a=this.j.ng(f,e),0!=(h&d)&&0!=a%2&&(this.J[1]=0))}};c.prototype.AS=function(a,b){2!=this.J[2]&&0!=(this.j.dh(a)&b)&&(this.J[2]=2)};c.prototype.FN=function(a,b,d,e){if(1!=this.J[3]){var f=this.j.dh(a);0!=(f&b)&&0!=(f&d)?this.J[3]=1:0!=this.J[3]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)&&(f=this.j.uf(a),a=this.j.xd(f),0!=(a&b)&&(b=this.j.ng(f,e),0!=(a&d)&&0==b%2&&(this.J[3]=0)))}};c.prototype.CN=function(a,b,d,e){if(0!=
this.J[4]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)){var f=this.j.uf(a);a=this.j.xd(f);0!=(a&b)&&(b=this.j.ng(f,e),0!=(a&d)&&0!=b%2&&(this.J[4]=0))}};c.prototype.DN=function(a,b,d){1!=this.J[5]&&(a=this.j.dh(a),0!=(a&b)&&0==(a&d)&&(this.J[5]=1))};c.prototype.lQ=function(a,b){if(1!=this.J[6]){var d=this.j.af(this.j.xa(a));0==(this.j.af(a)&b)&&0==(d&b)&&(this.J[6]=1)}};c.prototype.kQ=function(a,b,d,e){if(0!=this.J[7]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)){var f=this.j.uf(a),h=this.j.xd(f);
0==(h&b)&&0==(this.j.af(a)&b)&&(a=this.j.ng(f,e),0!=(h&d)&&0!=a%2&&(this.J[7]=0))}};c.prototype.GS=function(a,b,d,e,f){if(1!=this.J[0]){var h=this.j.dh(a);0!=(h&b)&&0!=(h&d)?this.J[0]=1:0!=this.J[0]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)&&(a=this.j.uf(a),h=this.j.xd(a),0!=(h&b)&&0!=(h&d)&&(b=this.j.ng(a,e),f=this.j.ng(a,f),0==b%2&&0==f%2&&(this.J[0]=0)))}};c.prototype.uG=function(a,b,d,e,f,h){if(0!=this.J[h]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)){a=this.j.uf(a);var k=this.j.xd(a);
0!=(k&b)&&0!=(k&d)&&(b=this.j.ng(a,e),f=this.j.ng(a,f),0==b%2&&0!=f%2&&(this.J[h]=0))}};c.prototype.vG=function(a,b,d,e){1!=this.J[e]&&(a=this.j.dh(a),0!=(a&b)&&0==(a&d)&&(this.J[e]=1))};c.prototype.HN=function(a,b,d,e,f){if(0!=this.J[4]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)){a=this.j.uf(a);var h=this.j.xd(a);0!=(h&b)&&0!=(h&d)&&(b=this.j.ng(a,e),f=this.j.ng(a,f),0!=b%2&&0!=f%2&&(this.J[4]=0))}};c.prototype.fE=function(a,b,d,e){0!=this.J[e]&&1!=this.j.Ab(this.j.te(this.j.xa(a)),this.Ui)&&
(a=this.j.uf(a),0==(this.j.xd(a)&b)&&0!=this.j.ng(a,d)%2&&(this.J[e]=0))};c.prototype.ES=function(a,b){0!=this.J[0]&&0==(this.j.xd(a)&b)&&0!=(this.j.hk(this.j.cz(a))&b)&&(this.J[0]=0)};c.prototype.BS=function(a,b){2!=this.J[2]&&0!=(this.j.xd(a)&b)&&(this.J[2]=2)};c.prototype.GN=function(a,b,d){0!=this.J[3]&&(a=this.j.xd(a),0!=(a&b)&&0!=(a&d)&&(this.J[3]=0))};c.prototype.EN=function(a,b){1!=this.J[5]&&0!=(this.j.xd(a)&b)&&(this.J[5]=1)};c.prototype.mQ=function(a,b){0!=this.J[6]&&0==(this.j.xd(a)&b)&&
0==(this.j.hk(this.j.cz(a))&b)&&(this.J[6]=0)};c.prototype.HS=function(a,b,d,e){if(0!=this.J[0]){var f=this.j.xd(a);0!=(f&b)&&0!=(f&d)&&0==this.j.ng(a,e)%2&&(this.J[0]=0)}};c.prototype.FS=function(a,b){1!=this.J[2]&&(-1!=this.j.Me(a)?this.J[2]=1:0!=this.J[2]&&0==(this.j.xd(a)&b)&&(this.J[2]=0))};c.prototype.JN=function(a,b,d,e){if(0!=this.J[3]){var f=this.j.xd(a);0!=(f&b)&&0!=(f&d)&&0!=this.j.ng(a,e)%2&&(this.J[3]=0)}};c.prototype.IN=function(a,b,d,e){if(0!=this.J[5]){var f=this.j.xd(a);0!=(f&b)&&
0==(f&d)&&0!=this.j.ng(a,e)%2&&(this.J[5]=0)}};c.prototype.nQ=function(a,b,d){0!=this.J[6]&&(a=this.j.xd(a),0==(a&b)&&0!=(a&d)&&(this.J[6]=0))};c.prototype.IS=function(a,b,d){0!=this.J[0]&&(a=this.j.xd(a),0!=(a&b)&&0!=(a&d)&&(this.J[0]=0))};c.prototype.wG=function(a,b,d,e){0!=this.J[e]&&(a=this.j.xd(a),0!=(a&b)&&0==(a&d)&&(this.J[e]=0))};c.prototype.Bp=function(a,b){var d=!1;a=this.j.La(a);b=this.j.La(b);this.Ui=this.j.$g();for(var e=this.j.Re;-1!=e;e=this.j.Rf(e)){var f=this.j.Me(e);if(-1==f){if(-1!=
this.Sm)switch(this.Sm){case 3:d=this.aE(e,a,b);break;case 4:d=this.QG(e,a,b);break;default:throw g.i.fa("internal error");}}else{var h=f;do{var k=h;if(1!=this.j.Ab(k,this.Ui)){do{switch(this.vw){case 0:d=this.xN(k,a,b);break;case 1:d=this.yN(k,a,b);break;case 2:d=this.mT(k,a,b);break;default:throw g.i.fa("internal error");}if(d)break;this.j.Kb(k,this.Ui,1);k=this.j.jc(k)}while(k!=h&&!d)}if(d)break;h=this.j.jc(this.j.xa(k))}while(h!=f);if(d)break}}d||this.UJ();this.j.Jg(this.Ui)};c.prototype.Gy=function(a,
b){var d=!1;a=this.j.La(a);b=this.j.La(b);for(var e=this.j.Re;-1!=e;e=this.j.Rf(e)){switch(this.Sm){case 3:d=this.aE(e,a,b);break;case 4:d=this.QG(e,a,b);break;case 5:d=this.ZU(e,a,b);break;default:throw g.i.Qa();}if(d)break}d||this.UJ()};c.prototype.er=function(a,b){this.j.dr(a,b)};c.prototype.Wo=function(a,b,d){this.YP(a,b,d);this.er(a,d)};c.prototype.YP=function(a,b,d){g.Tk.V(a,b,d,!1);a.Gp(0,!0,!0);for(b=a.ld;-1!=b;b=a.ue(b))1736==a.ic(b)&&g.rn.V(a,b,-1,!1,d)};c.WE=function(a,b){var d=a.getType();
if(g.aa.yd(d))return b=new g.Ta(a.description),b.oc(a,!0),b;if(197==d){d=new g.l;a.A(d);if(d.ca()<=b&&d.R()<=b)return b=new g.Sa(a.description),a.sf(b),b;if(d.ca()<=b||d.R()<=b)return b=new g.Ta(a.description),d=new g.Sa,a.Hf(0,d),b.nf(d),a.Hf(2,d),b.lineTo(d),b;b=new g.Da(a.description);b.ad(a,!1);return b}return a};return c}();g.am=l})(ja||={});(function(g){var N=function(){function a(b){this.Em=new g.ia(0);this.dw=new g.ia(0);this.wt=new g.h;this.xt=new g.h;this.g=b;this.Hs=-1}a.prototype.bc=function(b){return this.g.bc(this.zz(b))};
a.prototype.Bv=function(b){var d=this.iz(b);b=this.HF(b);if(this.g.Ma(d)==b){var e=d;d=b;b=e}this.g.Gc(d,this.wt);this.g.Gc(b,this.xt);return this.wt.y<this.xt.y};a.prototype.zz=function(b){var d=this.iz(b);b=this.HF(b);return this.g.U(d)==b?d:b};a.prototype.iz=function(b){return this.Em.get(b)};a.prototype.HF=function(b){return this.dw.get(b)};a.prototype.rF=function(b){this.Em.set(b,this.Hs);this.Hs=b};a.prototype.nI=function(b){if(-1!=this.Hs){var d=this.Hs;this.Hs=this.Em.get(d);this.Em.set(d,
b);this.dw.set(d,this.g.U(b));return d}null==this.Em&&(this.Em=new g.ia(0),this.dw=new g.ia(0));d=this.Em.size;this.Em.add(b);this.dw.add(this.g.U(b));return d};a.prototype.rz=function(b){return this.g.bd(this.iz(b))};return a}();g.yY=N;var l=function(){function a(b){this.Be=b;this.ie=new g.yb;this.Nm=new g.yb;this.CH=0;this.Ao=null;this.yA=-1}a.prototype.compare=function(b,d,e){e=b.ja(e);var f=this.Be.hb;if(this.yA==d)var h=this.CH;else this.Ao=f.bc(d),null==this.Ao?(b=f.g,b.ed(f.zz(d),this.ie),
this.Ao=this.ie,h=this.ie.Pe(this.Be.yh,0)):h=this.Ao.Pe(this.Be.yh,0),this.CH=h,this.yA=d;b=f.bc(e);if(null==b){b=f.g;b.ed(f.zz(e),this.Nm);b=this.Nm;var k=this.Nm.Pe(this.Be.yh,0)}else k=b.Pe(this.Be.yh,0);h==k&&(d=f.Bv(d),e=f.Bv(e),e=Math.min(d?this.Ao.la:this.Ao.na,e?b.la:b.na),d=.5*(e+this.Be.yh),d==this.Be.yh&&(d=e),h=this.Ao.Pe(d,0),k=b.Pe(d,0));return h<k?-1:h>k?1:0};a.prototype.reset=function(){this.yA=-1};return a}(),c=function(){function a(){this.Wm=this.Gl=null;this.fb=new g.Yj;this.fb.RP();
this.$d=new l(this);this.fb.Vo(this.$d)}a.prototype.HQ=function(){var b=!1;this.fw&&(b=this.IQ());if(1==this.g.da(this.X)){var d=this.g.Ob(this.X);b=this.g.wz(d);this.g.PB(d,!0);return 0>b?(b=this.g.Xa(d),this.g.pJ(b),this.g.Wg(d,this.g.Ma(b)),!0):!1}this.El=this.g.Ky();this.wo=this.g.Ky();for(d=this.g.Ob(this.X);-1!=d;d=this.g.Rb(d))this.g.gr(d,this.El,0),this.g.gr(d,this.wo,-1);d=new g.ia(0);this.yh=NaN;var e=new g.h;this.et=this.g.da(this.X);this.ro=this.g.Gd();this.Rs=this.g.Gd();for(var f=this.Gl.rc(this.Gl.je);-1!=
f;f=this.Gl.lb(f)){var h=this.Gl.getData(f);this.g.Gc(h,e);e.y!=this.yh&&0!=d.size&&(b=this.ut(d)||b,this.$d.reset(),d.clear(!1));d.add(h);this.yh=e.y;if(0==this.et)break}0<this.et&&(b=this.ut(d)||b,d.clear(!1));this.g.Td(this.ro);this.g.Td(this.Rs);for(d=this.g.Ob(this.X);-1!=d;)if(3==this.g.sj(d,this.El)){this.g.PB(d,!0);e=d;for(d=this.g.sj(d,this.wo);-1!=d;)f=this.g.sj(d,this.wo),this.g.ZT(this.X,this.g.Rb(e),d),e=d,d=f;d=this.g.Rb(e)}else this.g.PB(d,!1),d=this.g.Rb(d);this.g.CB(this.El);this.g.CB(this.wo);
return b};a.prototype.ut=function(b){return this.$V(b)};a.prototype.$V=function(b){var d=!1;null==this.hb&&(this.hb=new N(this.g));null==this.Wm?(this.Wm=new g.ia(0),this.Wm.Jb(16)):this.Wm.clear(!1);this.ZV(b);for(var e=0,f=b.size;e<f;e++){var h=b.get(e);-1!=h&&this.oG(h,-1)}for(e=0;e<this.Wm.size&&0<this.et;e++)if(b=this.Wm.get(e),h=this.hb.rz(this.fb.ja(b)),f=-1,0==this.g.sj(h,this.El)){h=this.fb.we(b);for(var k=b,m;-1!=h;){var n=this.fb.ja(h),p=this.hb.rz(n),r=this.g.sj(p,this.El);if(0!=r){f=
p;break}k=h;h=this.fb.we(h)}-1==h?(m=!0,h=k):(n=this.fb.ja(h),m=this.hb.Bv(n),h=this.fb.lb(h),m=!m);do{n=this.fb.ja(h);p=this.hb.rz(n);r=this.g.sj(p,this.El);if(0==r&&(m!=this.hb.Bv(n)&&(d=this.g.Xa(p),this.g.pJ(d),this.g.Wg(p,this.g.Ma(d)),d=!0),this.g.gr(p,this.El,m?3:2),m||(k=this.g.sj(f,this.wo),this.g.gr(f,this.wo,p),this.g.gr(p,this.wo,k)),this.et--,0==this.et))return d;f=p;k=h;h=this.fb.lb(h);m=!m}while(k!=b)}return d};a.prototype.ZV=function(b){for(var d=0,e=b.size;d<e;d++){var f=b.get(d),
h=this.g.Pa(f,this.ro),k=this.g.Pa(f,this.Rs);if(-1!=h){var m=this.fb.ja(h);this.hb.rF(m);this.g.Ra(f,this.ro,-1)}-1!=k&&(m=this.fb.ja(k),this.hb.rF(m),this.g.Ra(f,this.Rs,-1));m=-1;-1!=h&&-1!=k?(this.fb.vd(h,-1),this.fb.vd(k,-1),b.set(d,-1)):m=-1!=h?h:k;-1!=m&&(this.oG(f,m)||this.fb.vd(m,-1),b.set(d,-1))}};a.prototype.oG=function(b,d){var e=new g.h,f=new g.h;this.g.Gc(b,e);var h=this.g.U(b);this.g.Gc(h,f);var k=!1;if(e.y<f.y){k=!0;var m=this.hb.nI(b);if(-1==d)var n=this.fb.addElement(m,-1);else n=
d,this.fb.Sj(n,m);m=this.g.Pa(h,this.ro);-1==m?this.g.Ra(h,this.ro,n):this.g.Ra(h,this.Rs,n);h=this.g.bd(b);0==this.g.sj(h,this.El)&&this.Wm.add(n)}h=this.g.Ma(b);this.g.Gc(h,f);e.y<f.y&&(k=!0,m=this.hb.nI(h),-1==d?n=this.fb.addElement(m,-1):(n=d,this.fb.Sj(n,m)),m=this.g.Pa(h,this.ro),-1==m?this.g.Ra(h,this.ro,n):this.g.Ra(h,this.Rs,n),h=this.g.bd(b),0==this.g.sj(h,this.El)&&this.Wm.add(n));return k};a.V=function(b,d,e,f){var h=new a;h.g=b;h.X=d;h.Gl=e;h.fw=f;return h.HQ()};a.prototype.IQ=function(){var b=
new g.ia(0),d=new g.ia(0),e=-1,f=-1,h=new g.h;h.Rc();for(var k=-1,m=-1,n=-1,p=new g.h,r=this.Gl.rc(this.Gl.je);-1!=r;r=this.Gl.lb(r)){var t=this.Gl.getData(r);this.g.Gc(t,p);var x=this.g.bd(t);h.qb(p)&&m==x?(-1==f&&(e=this.g.Ky(),f=this.g.Gd()),-1==n&&(n=d.size,this.g.Ra(k,f,n),d.add(1),-1==this.g.sj(x,e)&&(this.g.gr(x,e,k),b.add(x))),this.g.Ra(t,f,n),d.bX(d.Fc()+1)):(n=-1,h.L(p));k=t;m=x}if(0==b.size)return!1;h=new g.ia(0);k=new g.ia(0);m=0;for(n=b.size;m<n;m++){x=b.get(m);var K=this.g.sj(x,e);t=
this.g.Pa(K,f);h.clear(!1);k.clear(!1);h.add(K);k.add(t);for(t=this.g.U(K);t!=K;t=this.g.U(t)){var ca=t;p=this.g.Pa(ca,f);if(-1!=p)if(0==k.size)k.add(p),h.add(ca);else if(k.Fc()==p){r=h.Fc();var ha=this.g.U(r);K=this.g.U(ca);this.g.Bc(r,K);this.g.Cc(K,r);this.g.Bc(ca,ha);this.g.Cc(ha,ca);ca=[!1];ha=this.g.nG(this.X,ha,this.g.Xa(x),ca);this.g.Ra(t,f,-1);ca[0]&&this.g.Jf(x,K);t=this.g.Ja(x);K=this.g.Ja(ha);t-=K;this.g.Vj(x,t);d.set(p,d.get(p)-1);1==d.get(p)&&(d.set(p,0),k.If(),h.If());t=K=r}else h.add(t),
k.add(p)}}this.g.CB(e);this.g.Td(f);return!0};return a}();g.WL=c})(ja||={});(function(g){var N=function(){function l(){}l.prototype.ig=function(){this.PA=this.sb=null};l.prototype.get=function(){return this.PA};l.prototype.set=function(c){this.PA=c;if(null!=c)throw 322==c.getType()&&(this.sb=c),g.i.Qa();};l.prototype.create=function(c){if(322==c)this.Or();else throw g.i.fa("Not Implemented");};l.prototype.Or=function(){null==this.sb&&(this.sb=new g.yb);this.PA=this.sb};return l}();g.ig=N})(ja||={});
(function(g){g=g.XL||(g.XL={});g[g.enumLineSeg=1]="enumLineSeg";g[g.enumBezierSeg=2]="enumBezierSeg";g[g.enumArcSeg=4]="enumArcSeg";g[g.enumNonlinearSegmentMask=6]="enumNonlinearSegmentMask";g[g.enumSegmentMask=7]="enumSegmentMask";g[g.enumDensified=8]="enumDensified"})(ja||={});(function(g){var N=function(){return function(c){this.$i=c;this.qC=this.rC=1;this.sB=this.rB=this.tB=0}}(),l=function(){function c(){this.Fq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Bk=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Bf=
new g.Sa;this.qa=this.Cw=0;this.mo=[];this.$s=[];this.yw=[];this.Iq=[];this.MA=[]}c.prototype.wB=function(a){if(null!=a){for(var b=0,d=a.length;b<d;b++)this.rW(a[b]);a.length=0}};c.prototype.rW=function(a){a.$i=null;this.Iq.push(a)};c.prototype.Ow=function(a){if(0===this.Iq.length)var b=new N(a);else b=this.Iq[this.Iq.length-1],b.$i=a,--this.Iq.length;return b};c.prototype.SR=function(a,b){return 0==a?this.$s[b]:this.yw[b]};c.prototype.aB=function(){this.Cw>=this.MA.length&&this.MA.push(new g.ig);
var a=this.MA[this.Cw];this.Cw++;return a};c.prototype.clear=function(){this.wB(this.mo);this.wB(this.$s);this.wB(this.yw);this.Cw=0};c.prototype.Oo=function(a){this.mo.push(this.Ow(a))};c.prototype.ol=function(a){return 0==a?this.$s.length:this.yw.length};c.prototype.Vp=function(a,b){return this.SR(a,b).$i};c.prototype.Ea=function(a,b){if(2!=this.mo.length)throw g.i.Qa();this.qa=a;var d=g.lc.ox(.01*a),e=!1,f=this.mo[0],h=this.mo[1];if(b||0!=(f.$i.zr(h.$i,a,!0)&5)){if(322==f.$i.getType()){var k=f.$i;
if(322==h.$i.getType()){b=h.$i;var m=g.yb.Zx(k,b,null,this.Fq,this.Bk,a);if(0==m)throw g.yb.Zx(k,b,null,this.Fq,this.Bk,a),g.i.Qa();a=Array(9);g.O.$u(a,null);for(var n=0;n<m;n++){var p=this.Fq[n],r=this.Bk[n],t=f.sB,x=1;0==p?(t=f.tB,x=f.rC):1==p&&(t=f.rB,x=f.qC);var K=h.sB,ca=1;0==r?(K=h.tB,ca=h.rC):1==r&&(K=h.rB,ca=h.qC);var ha=new g.h;t==K?(t=new g.h,k.hc(p,t),p=new g.h,b.hc(r,p),r=x+ca,ca/=r,g.lc.OG(t,p,ca,ha),g.h.yc(ha,t)+g.h.yc(ha,p)>d&&(e=!0)):t>K?(k.hc(p,ha),p=new g.h,b.hc(r,p),g.h.yc(ha,p)>
d&&(e=!0)):(b.hc(r,ha),t=new g.h,k.hc(p,t),g.h.yc(ha,t)>d&&(e=!0));a[n]=ha}f=0;h=-1;for(n=0;n<=m;n++)ca=n<m?this.Fq[n]:1,ca!=f&&(d=this.aB(),k.ah(f,ca,d),-1!=h&&d.get().Dc(a[h]),n!=m&&d.get().Qc(a[n]),f=ca,this.$s.push(this.Ow(d.get()))),h=n;k=[0,0,0,0,0,0,0,0,0];for(n=0;n<m;n++)k[n]=n;1<m&&this.Bk[0]>this.Bk[1]&&(ca=this.Bk[0],this.Bk[0]=this.Bk[1],this.Bk[1]=ca,n=k[0],k[0]=k[1],k[1]=n);f=0;h=-1;for(n=0;n<=m;n++)ca=n<m?this.Bk[n]:1,ca!=f&&(d=this.aB(),b.ah(f,ca,d),-1!=h&&(f=k[h],d.get().Dc(a[f])),
n!=m&&(f=k[n],d.get().Qc(a[f])),f=ca,this.yw.push(this.Ow(d.get()))),h=n;return e}}throw g.i.Qa();}return!1};c.prototype.Kz=function(a,b,d){b.copyTo(this.Bf);if(1!=this.mo.length)throw g.i.Qa();this.qa=a;var e=this.mo[0];if(d||e.$i.ru(b.D(),a,!0))if(322==e.$i.getType()){a=e.$i;var f=a.fe(b.D(),!1);this.Fq[0]=f;var h=e.sB;d=1;0==f?(h=e.tB,d=e.rC):1==f&&(h=e.rB,d=e.qC);e=new g.h;0==h?(h=new g.h,a.hc(f,h),b=b.D(),g.lc.OG(h,b,1/(d+1),e)):0<h?(e=new g.h,a.hc(f,e)):e=b.D();d=0;f=-1;for(h=0;1>=h;h++){b=
1>h?this.Fq[h]:1;if(b!=d){var k=this.aB();a.ah(d,b,k);-1!=f&&k.get().Dc(e);1!=h&&k.get().Qc(e);d=b;this.$s.push(this.Ow(k.get()))}f=h}this.Bf.Cb(e)}else throw g.i.Qa();};return c}();g.TC=l})(ja||={});(function(g){var N=function(){function l(c){this.Ds=this.rk=this.sb=null;this.ag=0;this.zm=!1;this.zf=-1;this.Cl=this.Jd=0;this.gb=-1;this.ib=c;this.ag=this.Wx(this.Cl);this.zm=!1;this.rk=null;this.Ds=new g.h}l.prototype.BW=function(c){if(this.ib!=c.ib)throw g.i.Hb();this.zf=c.zf;this.Jd=c.Jd;this.gb=
c.gb;this.Cl=c.Cl;this.ag=c.ag;this.zm=c.zm;this.rk=null};l.prototype.ha=function(){this.zf!=this.Jd&&this.BD();if(this.zm)this.Jd=(this.Jd+1)%this.ag;else{if(this.Jd==this.ag)throw g.i.ce();this.Jd++}return this.rk};l.prototype.li=function(){if(this.zm)this.Jd=(this.ag+this.Jd-1)%this.ag;else{if(0==this.Jd)throw g.i.ce();this.Jd--}this.Jd!=this.zf&&this.BD();return this.rk};l.prototype.DW=function(){this.zf=-1;this.Jd=0};l.prototype.EW=function(){this.Jd=this.ag;this.zf=-1};l.prototype.Vb=function(c,
a){void 0===a&&(a=-1);if(0<=this.gb&&this.gb<this.ib.da()){var b=this.IM();if(c>=b&&c<this.ib.Vc(this.gb)){this.zf=-1;this.Jd=c-b;return}}a=0<=a&&a<this.ib.da()&&c>=this.ib.Ba(a)&&c<this.ib.Vc(a)?a:this.ib.sz(c);this.Cl=a+1;this.gb=a;this.zf=-1;this.Jd=c-this.ib.Ba(a);this.ag=this.Wx(a);this.ib.Ba(this.gb);this.ib.dc(this.gb)};l.prototype.$a=function(){this.gb=this.Cl;if(this.gb>=this.ib.da())return!1;this.zf=-1;this.Jd=0;this.ag=this.Wx(this.gb);this.ib.Ba(this.gb);this.ib.dc(this.gb);this.Cl++;
return!0};l.prototype.Zi=function(){this.ag=this.Jd=this.zf=-1;this.Cl=0;this.gb=-1};l.prototype.Wx=function(c){if(this.ib.Ac())return 0;var a=1;this.ib.dc(c)&&(a=0);return this.ib.Ja(c)-a};l.prototype.On=function(){return this.zf==this.ag-1&&this.ib.dc(this.gb)};l.prototype.JB=function(){this.zm=!0};l.prototype.wb=function(){return this.ib.nb.o[this.gb]+this.zf};l.prototype.IM=function(){return this.ib.Ba(this.gb)};l.prototype.ik=function(){return this.On()?this.ib.Ba(this.gb):this.wb()+1};l.prototype.vm=
function(){return 0==this.zf};l.prototype.Qn=function(){return this.zf==this.ag-1};l.prototype.Ha=function(){return this.Jd<this.ag};l.prototype.Ez=function(){return 0<this.Jd};l.prototype.Of=function(){var c=new l(this.ib);c.zf=this.zf;c.Jd=this.Jd;c.ag=this.ag;c.gb=this.gb;c.Cl=this.Cl;c.ib=this.ib;c.zm=this.zm;return c};l.prototype.BD=function(){if(0>this.Jd||this.Jd>=this.ag)throw g.i.ce();this.zf=this.Jd;var c=this.wb();this.ib.mc();var a=this.ib.Ve,b=1;null!=a&&(b=a.read(c)&7);a=this.ib.description;
switch(b){case 1:null==this.sb&&(this.sb=new g.yb);this.rk=this.sb;break;case 2:throw g.i.fa("internal error");case 4:throw g.i.Qa();default:throw g.i.Qa();}this.rk.Nf(a);b=this.ik();this.ib.Gc(c,this.Ds);this.rk.Dc(this.Ds);this.ib.Gc(b,this.Ds);this.rk.Qc(this.Ds);for(var d=1,e=a.Aa;d<e;d++)for(var f=a.kd(d),h=g.ra.Va(f),k=0;k<h;k++){var m=this.ib.Uc(f,c,k);this.rk.YB(f,k,m);m=this.ib.Uc(f,b,k);this.rk.OB(f,k,m)}};l.prototype.$S=function(){return this.gb==this.ib.da()-1};l.prototype.Pn=function(){var c=
this.ib.VR();return null!=c?1!=(c.read(this.zf)&7):!1};return l}();g.YL=N})(ja||={});(function(g){var N=function(){function l(c){c instanceof g.aa?(this.xH=c,this.ya=-1,this.Ei=1):(this.vT=c.slice(0),this.ya=-1,this.Ei=c.length)}l.prototype.La=function(){return this.ya};l.prototype.next=function(){return this.ya<this.Ei-1?(this.ya++,null!=this.xH?this.xH:this.vT[this.ya]):null};l.prototype.qe=function(){};return l}();g.Zc=N})(ja||={});(function(g){var N=function(){return function(){this.next=null}}(),
l=function(){function c(){this.Tq=this.Kw=this.Lw=0;this.kF=!1;this.gK=0;this.gn=this.Kf=this.Wl=this.Jh=null;this.Ol=0;this.vy=null;this.pl=this.oi=-1}c.prototype.AX=function(a,b,d){this.oi=a;this.pl=b;this.Jh=this.Wl=null;this.Tq=0;this.vy=d;null==this.gn&&(this.gn=g.O.lg(384,0));this.nK()};c.prototype.R=function(){return this.oi};c.prototype.ca=function(){return this.pl};c.prototype.flush=function(){0<this.Ol&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)};c.prototype.nK=function(){if(0<this.Tq){for(var a=
0;a<this.pl;a++){for(var b=this.Wl[a];null!=b;){var d=b;b=b.next;d.next=null}this.Wl[a]=null}this.Jh=null}this.Lw=this.pl;this.Kw=-1;this.Tq=0};c.prototype.iJ=function(a){this.kF=a==c.Cx;for(a=this.Lw;a<=this.Kw;a++)this.sN(),this.lN(a),this.ZP();this.nK()};c.prototype.jy=function(a,b,d,e){if(b!=e){var f=1;b>e&&(f=a,a=d,d=f,f=b,b=e,e=f,f=-1);if(!(0>e||b>=this.pl)){0>a&&0>d?d=a=-1:a>=this.oi&&d>=this.oi&&(d=a=this.oi);var h=(d-a)/(e-b);e>this.pl&&(e=this.pl,d=h*(e-b)+a);0>b&&(a=h*(0-b)+a,b=0);var k=
Math.max(this.oi+1,8388607);-8388607>a?(b=(0-a)/h+b,a=0):a>k&&(b=(this.oi-a)/h+b,a=this.oi);-8388607>d?e=(0-a)/h+b:d>k&&(e=(this.oi-a)/h+b);b=g.O.truncate(b);e=g.O.truncate(e);b!=e&&(d=new N,d.x=g.O.truncate(4294967296*a),d.y=b,d.H=e,d.WP=g.O.truncate(4294967296*h),d.dir=f,null==this.Wl&&(this.Wl=g.O.lg(this.pl,null)),d.next=this.Wl[d.y],this.Wl[d.y]=d,d.y<this.Lw&&(this.Lw=d.y),d.H>this.Kw&&(this.Kw=d.H),this.Tq++)}}};c.prototype.sN=function(){if(null!=this.Jh){for(var a=!1,b=null,d=this.Jh;null!=
d;)if(d.y++,d.y==d.H){var e=d;d=d.next;null!=b?b.next=d:this.Jh=d;e.next=null}else d.x+=d.WP,null!=b&&b.x>d.x&&(a=!0),b=d,d=d.next;a&&(this.Jh=this.fK(this.Jh))}};c.prototype.lN=function(a){if(!(a>=this.pl)){var b=this.Wl[a];if(null!=b){this.Wl[a]=null;b=this.fK(b);this.Tq-=this.gK;a=this.Jh;for(var d=!0,e=b,f=null;null!=a&&null!=e;)a.x>e.x?(d&&(this.Jh=e),d=e.next,e.next=a,null!=f&&(f.next=e),f=e,e=d):(d=a.next,a.next=e,null!=f&&(f.next=a),f=a,a=d),d=!1;null==this.Jh&&(this.Jh=b)}}};c.eK=function(a,
b){return 0>a?0:a>b?b:a};c.prototype.ZP=function(){if(null!=this.Jh)for(var a=0,b=this.Jh,d=g.O.truncate(g.O.XG(b.x)),e=b.next;null!=e;e=e.next)if(a=this.kF?a^1:a+e.dir,e.x>b.x){var f=g.O.truncate(g.O.XG(e.x));0!=a&&(b=c.eK(d,this.oi),d=c.eK(f,this.oi),d>b&&b<this.oi&&(this.gn[this.Ol++]=b,this.gn[this.Ol++]=d,this.gn[this.Ol++]=e.y,this.Ol==this.gn.length&&(this.vy.gF(this.gn,this.Ol),this.Ol=0)));b=e;d=f}};c.prototype.fK=function(a){for(var b=0,d=a;null!=d;d=d.next)b++;this.gK=b;if(1==b)return a;
null==this.Kf?this.Kf=g.O.lg(Math.max(b,16),null):this.Kf.length<b&&(this.Kf=g.O.lg(Math.max(b,2*this.Kf.length),null));var e=0;for(d=a;null!=d;d=d.next)this.Kf[e++]=d;2==b?this.Kf[0].x>this.Kf[1].x&&(a=this.Kf[0],this.Kf[0]=this.Kf[1],this.Kf[1]=a):c.AN(this.Kf,b,function(f,h){return f==h?0:f.x<h.x?-1:f.x>h.x?1:0});a=this.Kf[0];this.Kf[0]=null;d=a;for(e=1;e<b;e++)d.next=this.Kf[e],d=this.Kf[e],this.Kf[e]=null;d.next=null;return a};c.AN=function(a,b,d){if(b==a.length)a.sort(d);else{var e=a.slice(0,
0),f=a.slice(b);b=a.slice(0,b).sort(d);a.length=0;a.push.apply(a,e.concat(b).concat(f))}};c.Cx=0;return c}();g.Px=l})(ja||={});(function(g){var N=function(){function l(){}l.prototype.ui=function(c,a){var b=this.g.Pa(c,this.Pq);this.Dl==b&&(this.Dl=this.oe.lb(this.Dl));this.ho==b&&(this.ho=this.oe.lb(this.ho));this.oe.jd(this.RA,b);this.bk(c);if(a&&(a=this.g.bd(c),-1!=a&&this.g.Xa(a)==c)){var d=this.g.U(c);if(d!=c){b=this.g.bd(d);if(b==a){this.g.Jf(a,d);return}d=this.g.Ma(c);if(d!=c&&(b=this.g.bd(d),
b==a)){this.g.Jf(a,d);return}}this.g.Jf(a,-1);this.g.Wg(a,-1)}};l.prototype.pD=function(){for(var c=!1,a=0,b=new g.h;;){a++;null==this.Wh?(this.Wh=new g.ia(0),this.zs=new g.ia(0),this.xe=new g.ia(0)):(this.Wh.clear(!1),this.zs.clear(!1),this.xe.clear(!1));for(var d=this.ho,e=0,f=!0;d!=this.Dl;){var h=this.oe.getData(d),k=new g.h;this.g.Gc(h,k);f&&(this.g.Gc(h,b),f=!1);k=this.g.Ma(h);var m=this.g.U(h);-559038737!=this.g.Pa(k,this.zg)&&(this.Wh.add(k),this.g.Ra(k,this.zg,-559038737),this.zs.add(h),
this.xe.add(e++));-559038737!=this.g.Pa(m,this.zg)&&(this.Wh.add(m),this.g.Ra(m,this.zg,-559038737),this.zs.add(h),this.xe.add(e++));d=this.oe.lb(d)}if(2>this.Wh.size)break;var n=this;this.xe.Vd(0,this.xe.size,function(p,r){return n.pM(p,r)});d=0;for(e=this.xe.size;d<e;d++)f=this.xe.get(d),f=this.Wh.get(f),this.g.Ra(f,this.zg,d),k=new g.h,this.g.Gc(f,k);k=this.TM(b);d=0;for(e=this.xe.size;d<e;d++)f=this.xe.get(d),-1!=f&&(f=this.Wh.get(f),this.g.Ra(f,this.zg,-1));if(k)c=!0;else break}return c};l.prototype.TM=
function(c){for(var a=!1,b=!0;b;){b=!1;var d=0;-1==this.xe.get(d)&&(d=this.cm(d));for(var e=this.cm(d),f=0,h=this.xe.size;f<h&&-1!=d&&-1!=e&&d!=e;f++){var k=this.xe.get(d);e=this.xe.get(e);k=this.Wh.get(k);e=this.Wh.get(e);var m=this.g.U(k);this.g.Dv(m,c)||(m=this.g.Ma(k));var n=this.g.U(e);this.g.Dv(n,c)||(n=this.g.Ma(e));var p=this.pu(m,k),r=this.pu(n,e),t=p?this.g.Ma(m):this.g.U(m),x=r?this.g.Ma(n):this.g.U(n),K=!1;this.sp(m)?K=!0:this.sp(n)?K=!0:this.sp(k)?K=!0:this.sp(e)?K=!0:this.sp(t)?K=!0:
this.sp(x)&&(K=!0);!K&&this.g.fq(k,e)&&(K=!0,this.tD(p,r,m,k,n,e));!K&&this.g.fq(t,x)&&(K=!0,this.tD(!p,!r,m,t,n,x));K&&(a=!0);b=b||K;d=this.cm(d);e=this.cm(d)}}if(!a)for(d=0,-1==this.xe.get(d)&&(d=this.cm(d)),e=this.cm(d),f=0,h=this.xe.size;f<h&&-1!=d&&-1!=e&&d!=e;f++)k=this.xe.get(d),e=this.xe.get(e),k=this.Wh.get(k),e=this.Wh.get(e),m=this.g.U(k),this.g.Dv(m,c)||(m=this.g.Ma(k)),n=this.g.U(e),this.g.Dv(n,c)||(n=this.g.Ma(e)),p=this.pu(m,k),r=this.pu(n,e),t=p?this.g.Ma(m):this.g.U(m),x=r?this.g.Ma(n):
this.g.U(n),this.DM(p,r,k,m,t,e,n,x)&&(a=!0),d=this.cm(d),e=this.cm(d);return a};l.prototype.XM=function(){1736==this.g.ic(this.X)&&1==this.g.In(this.X)&&(new g.Fg).MU(this.fw,this.g,this.X,this.nd);var c=!1,a=!0;this.zg=this.Pq=-1;var b=this.g.I(this.X),d=new g.ia(0);d.Jb(b);for(var e=this.g.Ob(this.X);-1!=e;e=this.g.Rb(e))for(var f=this.g.Xa(e),h=0,k=this.g.Ja(e);h<k;h++)d.add(f),f=this.g.U(f);var m=this.g.td.o,n=this.g.td.stride;this.g.vb.mc();var p=this.g.vb.za[0].o;d.Vd(0,b,function(t,x){var K=
m[n*t],ca=m[n*x],ha=p[2*K];K=p[2*K+1];var da=p[2*ca];ca=p[2*ca+1];ha=K<ca?-1:K>ca?1:ha<da?-1:ha>da?1:0;0==ha&&(t=m[n*t+3],x=m[n*x+3],ha=t<x?-1:t==x?0:1);return ha});this.Pq=this.g.Gd();this.oe=new g.jp;this.RA=this.oe.Ph(0);this.oe.fn(b);for(e=0;e<b;e++)f=d.get(e),h=this.oe.addElement(this.RA,f),this.g.Ra(f,this.Pq,h);this.zg=this.g.Gd();this.Dl=-1;for(this.cD()&&(c=!0);a;){a=!1;b=0;d=!1;do{d=!1;this.ho=-1;k=0;e=new g.h;h=new g.h;for(var r=this.oe.rc(this.RA);-1!=r;)f=this.oe.getData(r),-1!=this.ho?
(this.g.Gc(f,h),e.qb(h))?k++:(e.L(h),this.Dl=r,0<k&&(f=this.pD())&&(d=!0,-1!=this.Dl&&(f=this.oe.getData(this.Dl),this.g.Gc(f,e))),this.ho=r=this.Dl,k=0):(this.ho=r,this.g.Gc(this.oe.getData(r),e),k=0),-1!=r&&(r=this.oe.lb(r));this.Dl=-1;0<k&&(f=this.pD())&&(d=!0);if(10<b++)throw g.i.Qa();d&&this.GM();this.cD()&&(d=!0);a=a||d&&!1;c=c||d}while(d)}this.g.Td(this.Pq);this.g.Td(this.zg);return c=g.WL.V(this.g,this.X,this.oe,this.fw)||c};l.prototype.pu=function(c,a){return this.g.U(a)==c?!1:!0};l.prototype.DM=
function(c,a,b,d,e,f,h,k){if(d==h)return this.bk(b),this.bk(f),!1;var m=this.g.Pa(b,this.zg),n=this.g.Pa(e,this.zg),p=this.g.Pa(f,this.zg),r=this.g.Pa(k,this.zg);b=[0,0,0,0,0,0,0,0];var t=[0,0,0,0];b[0]=0;t[0]=m;b[1]=0;t[1]=n;b[2]=1;t[2]=p;b[3]=1;t[3]=r;for(m=1;4>m;m++){n=t[m];p=b[m];for(r=m-1;0<=r&&t[r]>n;)t[r+1]=t[r],b[r+1]=b[r],r--;t[r+1]=n;b[r+1]=p}t=0;0!=b[0]&&(t|=1);0!=b[1]&&(t|=2);0!=b[2]&&(t|=4);0!=b[3]&&(t|=8);if(5!=t&&10!=t)return!1;c==a?c?(this.g.Bc(k,d),this.g.Cc(d,k),this.g.Bc(e,h),this.g.Cc(h,
e)):(this.g.Cc(k,d),this.g.Bc(d,k),this.g.Cc(e,h),this.g.Bc(h,e)):c?(this.g.Cc(d,f),this.g.Bc(f,d),this.g.Cc(h,e),this.g.Bc(e,h)):(this.g.Bc(d,f),this.g.Cc(f,d),this.g.Bc(h,e),this.g.Cc(e,h));return!0};l.prototype.tD=function(c,a,b,d,e,f){this.MY?this.VM():this.UM(c,a,b,d,e,f)};l.prototype.VM=function(){throw g.i.fa("not implemented.");};l.prototype.UM=function(c,a,b,d,e,f){if(c!=a)c?(this.g.Bc(b,e),this.g.Cc(e,b),this.g.Bc(f,d),this.g.Cc(d,f),this.vn(e,b),this.ui(e,!0),this.g.mi(e,!0),this.bk(b),
this.vn(f,d),this.ui(f,!0),this.g.mi(f,!1)):(this.g.Bc(e,b),this.g.Cc(b,e),this.g.Bc(d,f),this.g.Cc(f,d),this.vn(e,b),this.ui(e,!0),this.g.mi(e,!1),this.bk(b),this.vn(f,d),this.ui(f,!0),this.g.mi(f,!0)),this.bk(d);else{var h=c?b:d,k=a?e:f;c=c?d:b;a=a?f:e;e=!1;this.g.Bc(h,k);this.g.Bc(k,h);this.g.Cc(c,a);this.g.Cc(a,c);for(f=a;f!=k;)b=this.g.Ma(f),d=this.g.U(f),this.g.Cc(f,d),this.g.Bc(f,b),e=e||f==h,f=d;e||(b=this.g.Ma(k),d=this.g.U(k),this.g.Cc(k,d),this.g.Bc(k,b));this.vn(k,h);this.ui(k,!0);this.g.mi(k,
!1);this.bk(h);this.vn(a,c);this.ui(a,!0);this.g.mi(a,!1);this.bk(c)}};l.prototype.cD=function(){for(var c=!1,a=this.g.Ob(this.X);-1!=a;){for(var b=this.g.Xa(a),d=0,e=this.g.Ja(a);d<e&&1<e;){var f=this.g.Ma(b),h=this.g.U(b);this.g.fq(f,h)?(c=!0,this.ui(b,!1),this.g.pd(b,!0),this.ui(h,!1),this.g.pd(h,!0),b=f,d=0,e=this.g.Ja(a)):(b=h,d++)}if(2>this.g.Ja(a)){c=this.g.Xa(a);d=0;for(e=this.g.Ja(a);d<e;d++)this.ui(c,!1),c=this.g.U(c);a=this.g.Zq(a);c=!0}else a=this.g.Rb(a)}return c};l.prototype.sp=function(c){for(var a=
!1;;){var b=this.g.U(c),d=this.g.Ma(c);if(b==c)return this.ui(c,!0),this.g.mi(c,!1),!0;if(!this.g.fq(b,d))break;a=!0;this.bk(d);this.bk(b);this.ui(c,!0);this.g.mi(c,!1);this.vn(b,d);this.ui(b,!0);this.g.mi(b,!0);if(b==d)break;c=d}return a};l.prototype.GM=function(){for(var c=0,a=this.oe.rc(this.oe.je);-1!=a;a=this.oe.lb(a)){var b=this.oe.getData(a);this.g.aj(b,-1)}for(var d=0,e=this.g.Ob(this.X);-1!=e;)if(a=this.g.Xa(e),-1==a||-1!=this.g.bd(a))b=e,e=this.g.Rb(e),this.g.$q(b);else{this.g.aj(a,e);var f=
1;for(b=this.g.U(a);b!=a;b=this.g.U(b))this.g.aj(b,e),f++;this.g.cp(e,!1);this.g.Vj(e,f);this.g.Wg(e,this.g.Ma(a));d+=f;c++;e=this.g.Rb(e)}for(a=this.oe.rc(this.oe.je);-1!=a;a=this.oe.lb(a))b=this.oe.getData(a),-1==this.g.bd(b)&&(e=this.g.nG(this.X,b,b,null),d+=this.g.Ja(e),c++);this.g.Rl(this.X,c);this.g.Tj(this.X,d);c=0;for(d=this.g.ld;-1!=d;d=this.g.ue(d))c+=this.g.I(d);this.g.bC(c)};l.prototype.cm=function(c){for(var a=0,b=this.xe.size-1;a<b;a++)if(c=(c+1)%this.xe.size,-1!=this.xe.get(c))return c;
return-1};l.prototype.vn=function(c,a){var b=this.g.Pa(a,this.Pq),d=this.g.Pa(a,this.zg);this.g.lC(c,a);this.g.Ra(a,this.Pq,b);this.g.Ra(a,this.zg,d)};l.prototype.bk=function(c){var a=this.g.Pa(c,this.zg);-1!=a&&(this.xe.set(a,-1),this.g.Ra(c,this.zg,-1))};l.V=function(c,a,b,d,e){var f=new l;f.g=c;f.X=a;f.xA=b;f.fw=d;f.nd=e;return f.XM()};l.prototype.pM=function(c,a){var b=this.Wh.get(c),d=new g.h;this.g.Gc(b,d);b=new g.h;var e=this.Wh.get(a);this.g.Gc(e,b);if(d.qb(b))return 0;e=this.zs.get(c);c=
new g.h;this.g.Gc(e,c);e=this.zs.get(a);a=new g.h;this.g.Gc(e,a);e=new g.h;e.uc(d,c);d=new g.h;d.uc(b,a);return g.h.nu(e,d)};return l}();g.rn=N})(ja||={});(function(g){(function(l){l[l.Local=0]="Local";l[l.Geographic=1]="Geographic";l[l.Projected=2]="Projected";l[l.Image=3]="Image";l[l.Unknown=4]="Unknown"})(g.$L||(g.$L={}));(function(l){l[l.Integer32=0]="Integer32";l[l.Integer64=1]="Integer64";l[l.FloatingPoint=2]="FloatingPoint"})(g.TL||(g.TL={}));var N=function(){function l(){this.mA=null;this.pp=
"";this.su=null;this.dg=0;this.ZH=this.Ho=-1;this.wh=null}l.prototype.Ec=function(){return this.dg};l.prototype.VF=function(){return 1};l.prototype.VW=function(c){this.mA=c};l.prototype.Xd=function(){if(null!==this.mA)return this.mA;var c=.001;0!=this.dg?c=g.wr.CQ(this.dg):null!=this.wh&&(c=g.XC.DQ(this.wh));return c};l.prototype.Bz=function(){return this.wh};l.prototype.Hd=function(){if(0!=this.dg)return g.Tc.Zg(g.wr.Sy(this.dg));if(null!=this.wh)return g.XC.EQ(this.wh)};l.Sb=function(c){if(0!=c.dg){if(!0===
g.wr.ZS(c.dg))return 1;if(!0===g.wr.aT(c.dg))return 2}return 4};l.prototype.$r=function(){var c=this.Ec();if(-1!=this.Ho)return this.Ho;this.Ho=g.wr.FK(c);return-1!=this.Ho?this.Ho:c};l.create=function(c){if(0>=c)throw g.i.N("Invalid or unsupported wkid: "+c);var a=new l;a.dg=c;return a};l.qP=function(c){if(null==c||0==c.length)throw g.i.N("Cannot create SpatialReference from null or empty text.");var a=new l;a.wh=c;return a};l.prototype.Nb=function(c){return this==c?!0:null==c||this.constructor!=
c.constructor||this.dg!=c.dg||0==this.dg&&this.wh!==c.wh?!1:!0};l.prototype.toString=function(){return"[ tol: "+this.Kn()+"; wkid: "+this.Ec()+"; wkt: "+this.Bz()+"]"};l.prototype.cc=function(){if(""!==this.pp)return this.pp;var c=this.toString();if(Array.prototype.reduce)return this.pp="S"+c.split("").reduce(function(d,e){d=(d<<5)-d+e.charCodeAt(0);return d&d},0);var a=0;if(0===c.length)return"";for(var b=0;b<c.length;b++)a=(a<<5)-a+c.charCodeAt(b),a&=a;return this.pp="S"+a};l.prototype.Kn=function(){return this.Xd(0)};
l.prototype.fh=function(){return null!==this.su?this.su:this.su=g.gu.yP(this)};l.ZN=2147483645;l.$N=9007199254740990;return l}();g.Eg=N})(ja||={});(function(g){var N=function(l){function c(){var a=null!==l&&l.apply(this,arguments)||this;a.Ji=null;a.ST=null;a.Hq=new g.ZL;a.Eo=null;a.jw=null;return a}qa(c,l);c.yP=function(a){var b=new c;b.dg=a.dg;b.Ho=a.Ho;b.ZH=a.ZH;b.wh=a.wh;if(""!==b.wh&&null!==b.wh){a=c.kM(b.wh);var d=c.iM(b.wh);b.Hq.Xx(a,d,g.hu.Integer64);b.by(a);b.gy(d);b.dg=a.$r()}else a=c.jM(b.dg),
b.by(a),b.gy(null),b.Hq.Xx(a,null,g.hu.Integer64);return b};c.prototype.Xd=function(a){return this.Hq.Kn(a)};c.iM=function(a){if(0>=a.length)throw g.i.N();var b=null;try{b=g.NC.fromString(a)}catch(d){b=null}return null==b?null:c.bD(b,!0)};c.prototype.by=function(a){this.Kd=a;this.Eo=this.Kd.Hd()};c.prototype.gy=function(a){this.KH=a;this.ST=null!=this.KH?this.KH.Eo:null};c.prototype.Wc=function(){return 0==this.Sb()||3==this.Sb()?!1:this.Kd.Wc()};c.prototype.IG=function(){return 0==this.Sb()?!1:3==
this.Sb()?this.Ji.fk().Wc():this.Kd.Wc()};c.prototype.eh=function(){return null!=this.Kd?this.Kd.Ue:null};c.prototype.pm=function(){return this.Kd.pm()};c.prototype.bf=function(){return this.Kd.bf()};c.prototype.hh=function(){return null!=this.Kd?this.Kd.sw:NaN};c.prototype.Up=function(){return this.Kd.Up()};c.prototype.Wr=function(){return this.Kd.Wr()};c.prototype.kk=function(){return this.Kd.kk()};c.prototype.kS=function(a){return g.OC.Py(this.Kd,a.Kd)};c.prototype.ml=function(){return this.Kd.ml()};
c.prototype.Vr=function(){return this.Kd.Vr()};c.prototype.zi=function(){return 3==this.Sb()?this.Ji.fk().zi():this.Kd.zi()};c.prototype.gh=function(){if(!this.Wc())throw g.i.N("!isPannable()");var a=new g.l;this.Kd.gh(a);return a};c.prototype.Oe=function(){if(!this.Wc())throw g.i.N("!isPannable()");return this.Kd.so};c.prototype.HR=function(){if(!this.Wc())throw g.i.N("!isPannable()");var a=new g.l;this.Kd.GR(a);return a};c.prototype.pv=function(){if(!this.Wc())throw g.i.N("!isPannable()");return this.Kd.pv()};
c.prototype.ov=function(){if(!this.Wc())throw g.i.N("!isPannable()");return this.Kd.ov()};c.prototype.Xr=function(){return null!=this.Ji?this.Ji.fk().Xr():this.Kd.Xr()};c.prototype.PQ=function(){return this.Kd.hv()};c.prototype.Qp=function(){return this.Eo.getUnitFactor()};c.prototype.vz=function(a){return this.Hq.vz(a)};c.prototype.sc=function(){var a=this.Sb();if(1==a)return this;if(3==a)return this.Ji.fk().sc();if(0==a)throw g.i.fa("invalid call");if(4===a)throw g.i.fa("invalid call");if(null!==
this.jw)return this.jw;a=this.eh().getGeogcs();if(null==a)throw g.i.Qa();return this.jw=c.bF(a,this.Hq.VF())};c.bF=function(a,b){if(null==a)throw g.i.N("null pointer.");var d=new c;a=c.mu(a,!0);d.Hq.Xx(a,null,b);d.by(a);d.gy(null);d.dg=a.$r();return d};c.prototype.Sb=function(){var a=this.eh();if(null!=a)switch(a.getType()){case g.Sc.PE_TYPE_GEOGCS:return 1;case g.Sc.PE_TYPE_PROJCS:return 2}return 4};c.prototype.hv=function(){return this.Kd.hv()};c.mu=function(a,b){var d=a.getCode();if(0>=d&&(d=g.pf.getCode(a),
0<d)){a=g.pf.coordsys(d);if(null==a)throw g.i.N("Text to wkid mapping had failed: "+d);return c.mu(a,b)}if(b&&0<d&&(b=c.qx[d]))return b;b=g.zb.xv(a,d,!1);var e=c.lK[b];if(e)return e;a=0>=d?a:g.pf.coordsys(d);a=new g.OC(a);c.lK[b]=a;0<d&&(c.qx[d]=a);return a};c.jM=function(a){if(0>=a)throw g.i.N("Invalid or unsupported wkid: "+a);var b=c.qx[a];if(null!=b)return b;b=g.pf.coordsys(a);if(null==b)throw g.i.N("Invalid or unsupported wkid: "+a);b=c.mu(b,!1);b.$r()!=a&&(c.qx[a]=b);return b};c.kM=function(a){if(null==
a||void 0===a||0==a.length)throw g.i.N("Cannot create SpatialReference from null or empty text.");var b=null;try{b=g.pf.fromString(g.Sc.PE_TYPE_COORDSYS,a)}catch(d){throw g.i.N("Cannot create SpatialReference from text. "+d.message);}if(null===b)throw g.i.N("Cannot create SpatialReference from text. ");return c.mu(b,!0)};c.bD=function(a,b){var d=a.getCode();if(0>=d&&(d=g.pf.getCode(a),0<d)){d=g.pf.vertcs(d);if(null===d)throw g.i.N();return c.bD(d,b)}if(b&&0<d&&(b=c.kK[d]))return b;a=g.zb.xv(a,d,!1);
if(b=c.mK[a])return b;var e;0>=d||(e=g.pf.vertcs(d));if(null===e)throw g.i.N();e=new g.PL(e);c.mK[a]=e;0<d&&(c.kK[d]=e);return e};c.sI=function(a,b){if(null===b||b.B())return null;var d=new g.l;if(null!==b&&1!=a.Sb()){var e=a.sc(),f=e.eh();a=g.vr.Nr(a,e,null,null);b=g.Hx.local().V(b,a,null)}else f=a.eh();b.A(d);b=f.getPrimem().getLongitude();f=f.getUnit().getUnitFactor();return new g.LC(d.v,d.G,d.C,d.H,b,f)};c.lD=function(a){var b={name:"",steps:[],_pt:null,_entry:null},d=0;for(a=a.getEntries();d<
a.length;d++){var e=a[d],f={LY:!1,ZY:"",YY:-1,geogtran:null};0===e.getDirection()?f.isInverse=!1:f.isInverse=!0;var h=e.getGeogtran().getCode();-1<h?f.wkid=h:f.wkt=e.getGeogtran().toString();b.steps.push(f)}return b};c.XR=function(a,b,d,e){void 0===d&&(d=null);d=c.sI(e,d);a=g.lp.getGTlist(a.eh(),b.eh(),2,g.lp.PE_GTLIST_OPTS_COMMON,d,1);b=null;a&&0<a.length&&(b=this.lD(a[0]),g.Mx.destroy(a));null!==d&&d.destroy();return b};c.YR=function(a,b,d,e){var f;void 0===d&&(d=null);void 0===e&&(e=null);void 0===
f&&(f=30);d=c.sI(e,d);a=g.lp.getGTlist(a.eh(),b.eh(),2,g.lp.PE_GTLIST_OPTS_COMMON,d,f);b=[];if(a&&0<a.length){for(f=0;f<a.length;f++)b.push(this.lD(a[f]));g.Mx.destroy(a)}null!==d&&d.destroy();return b};c.qx={};c.lK={};c.kK={};c.mK={};return c}(g.Eg);g.gu=N})(ja||={});(function(g){var N;(function(c){c[c.Integer32=0]="Integer32";c[c.Integer64=1]="Integer64";c[c.FloatingPoint=2]="FloatingPoint"})(N=g.hu||(g.hu={}));var l=function(){function c(){this.qp()}c.prototype.assign=function(a){this.Fm=a.Fm;
this.Gm=a.Gm;this.Pj=a.Pj;this.sA=a.sA;this.Fo=a.Fo;this.rA=a.rA;this.Ik=a.Ik;this.Mq=a.Mq;this.Lq=a.Lq;this.Rm=a.Rm};c.prototype.VF=function(){return this.Rm};c.prototype.qp=function(){this.Gm=this.Fm=0;this.Pj=1;this.sA=0;this.Fo=1;this.rA=0;this.Lq=this.Mq=this.Ik=2.220446049250313E-14;this.Rm=N.FloatingPoint};c.prototype.Xx=function(a,b,d){this.qp();this.Rm=d;if(d!=N.FloatingPoint){var e=new g.l;a.hR(e);this.Fm=e.v;this.Gm=e.G}else this.Gm=this.Fm=-1.7976931348623157E308;e=a.Ue.getType();e==g.Sc.PE_TYPE_GEOGCS?
(e=(d==N.Integer64?1E-9:1/18E5)*a.bf(),this.Pj=1/e):e==g.Sc.PE_TYPE_PROJCS&&(e=(d==N.Integer64?1E-4:.001)*a.pm(),this.Pj=1/e);null!=b?(e=(d==N.Integer32?.001:1E-4)*b.IH,this.Fo=1/e):this.Fo=1E4;this.YM();this.Ik=a.sw;this.Mq=null!=b?.001*b.IH:.001;this.Lq=2.220446049250313E-14};c.prototype.YM=function(){if(this.Rm!=N.FloatingPoint){var a=this.Rm==N.Integer64?g.Eg.$N:g.Eg.ZN,b=a/this.Pj,d=this.Fm+b,e=g.O.truncate((d-this.Fm)*this.Pj);e>a&&(this.Pj=a/(d-this.Fm));b=this.Gm+b;e=g.O.truncate((b-this.Gm)*
this.Pj);e>a&&(this.Pj=a/(b-this.Gm))}};c.prototype.aC=function(a){switch(a){case 0:this.Ik=void 0;case 1:this.Mq=void 0;case 2:this.Lq=void 0}};c.prototype.Kn=function(a){switch(a){case 0:return this.Ik;case 1:return this.Mq;case 2:return this.Lq}return 0};c.prototype.vz=function(a){if(this.Rm==N.FloatingPoint)return 0;switch(a){case 0:return 1/this.Pj;case 1:return 1/this.Fo;case 2:return 1/this.Fo;default:return 0}};c.prototype.toString=function(){var a="SRPD [m_toleranceXY: "+this.Ik.toString();
a=a+";m_falseX: "+this.Fm.toString();a=a+";m_falseY: "+this.Gm.toString();a=a+";m_unitsXY: "+this.Pj.toString();a=a+";m_falseZ: "+this.sA.toString();a=a+";m_unitsZ: "+this.Fo.toString();a=a+";m_falseM: "+this.rA.toString();a=a+";m_toleranceZ: "+this.Mq.toString();a=a+";m_toleranceM: "+this.Lq.toString();a=a+";m_precision: "+this.Rm.toString();return a+"] "};return c}();g.ZL=l})(ja||={});(function(g){function N(e,f){89.99999<f?f=89.99999:-89.99999>f&&(f=-89.99999);f*=.017453292519943;return[111319.49079327169*
e,3189068.5*Math.log((1+Math.sin(f))/(1-Math.sin(f)))]}function l(e,f,h){e=e/6378137*57.29577951308232;return h?[e,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*f/6378137)))]:[e-360*Math.floor((e+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*f/6378137)))]}function c(e,f,h){var k=e.Of();if(33===e.getType())f=f(k.Lg(),k.ih()),k.Cb(f[0],f[1]);else if(197===e.getType()){var m=f(e.es(),e.gs(),h);f=f(e.ds(),e.fs(),h);k.K(m[0],m[1],f[0],f[1])}else for(m=new g.h,
e=0;e<k.I();e++){k.D(e,m);var n=f(m.x,m.y,h);m.ma(n[0],n[1]);k.Cb(e,m)}return k}function a(e){return c(e,l,!0)}function b(e){return c(e,N,!0)}var d=Math.PI/180;g.UK=function(){function e(){}e.vu=function(f){var h=Math.sqrt(.006694379990197414),k=Math.sin(f.y*d);return g.h.construct(6378137*f.x*d,3167719.6636462314*(k/(1-.006694379990197414*k*k)-1/(2*h)*Math.log((1-h*k)/(1+h*k))))};e.Vx=function(f,h,k,m){var n=1/298.257223563,p=Math.sin(k);k=Math.cos(k);var r=(1-n)*Math.tan(f);f=1/Math.sqrt(1+r*r);
var t=r*f,x=Math.atan2(r,k);r=f*p;var K=r*r,ca=1-K,ha=2.7233160610754688E11*ca/4.040829998466145E13,da=1+ha/16384*(4096+ha*(-768+ha*(320-175*ha))),ka=ha/1024*(256+ha*(-128+ha*(74-47*ha)));ha=m/(6356752.31424518*da);for(var ta=2*Math.PI,ua,wa,Ea,Ga;1E-12<Math.abs(ha-ta);)Ea=Math.cos(2*x+ha),ua=Math.sin(ha),wa=Math.cos(ha),Ga=ka*ua*(Ea+ka/4*(wa*(-1+2*Ea*Ea)-ka/6*Ea*(-3+4*ua*ua)*(-3+4*Ea*Ea))),ta=ha,ha=m/(6356752.31424518*da)+Ga;m=t*ua-f*wa*k;ca=n/16*ca*(4+n*(4-3*ca));return g.h.construct((h+(Math.atan2(ua*
p,f*wa-t*ua*k)-(1-ca)*n*r*(ha+ca*ua*(Ea+ca*wa*(-1+2*Ea*Ea)))))/d,Math.atan2(t*wa+f*ua*k,(1-n)*Math.sqrt(K+m*m))/d)};e.MM=function(f,h,k,m){var n=1/298.257223563,p=m-h,r=Math.atan((1-n)*Math.tan(f)),t=Math.atan((1-n)*Math.tan(k)),x=Math.sin(r);r=Math.cos(r);var K=Math.sin(t);t=Math.cos(t);var ca=p,ha=1E3;do{var da=Math.sin(ca),ka=Math.cos(ca),ta=Math.sqrt(t*da*t*da+(r*K-x*t*ka)*(r*K-x*t*ka));if(0===ta)return 0;ka=x*K+r*t*ka;var ua=Math.atan2(ta,ka),wa=r*t*da/ta,Ea=1-wa*wa;da=ka-2*x*K/Ea;isNaN(da)&&
(da=0);var Ga=n/16*Ea*(4+n*(4-3*Ea)),Na=ca;ca=p+(1-Ga)*n*wa*(ua+Ga*ta*(da+Ga*ka*(-1+2*da*da)))}while(1E-12<Math.abs(ca-Na)&&0<--ha);if(0===ha)return x=m-h,{azimuth:Math.atan2(Math.sin(x)*Math.cos(k),Math.cos(f)*Math.sin(k)-Math.sin(f)*Math.cos(k)*Math.cos(x)),geodesicDistance:6371008.771415059*Math.acos(Math.sin(f)*Math.sin(k)+Math.cos(f)*Math.cos(k)*Math.cos(m-h))};f=2.7233160610754688E11*Ea/4.040829998466145E13;h=f/1024*(256+f*(-128+f*(74-47*f)));return{azimuth:Math.atan2(t*Math.sin(ca),r*K-x*t*
Math.cos(ca)),YQ:6356752.31424518*(1+f/16384*(4096+f*(-768+f*(320-175*f))))*(ua-h*ta*(da+h/4*(ka*(-1+2*da*da)-h/6*da*(-3+4*ta*ta)*(-3+4*da*da)))),XY:Math.atan2(r*Math.sin(ca),r*K*Math.cos(ca)-x*t)}};e.jQ=function(f){var h=f.hasAttribute(1),k=f.hasAttribute(2),m=[],n=f.da(),p=null,r=null;h&&(p=f.ub(1));k&&(r=f.ub(2));for(var t=new g.h,x=0;x<n;x++){for(var K=f.Ba(x),ca=f.Ja(x),ha=0,da=0,ka=NaN,ta=NaN,ua=NaN,wa=NaN,Ea=f.dc(x),Ga=[],Na=K;Na<K+ca;Na++){f.D(Na,t);wa=ua=NaN;var La=[t.x,t.y];h&&(ua=p.get(Na),
La.push(ua));k&&(n=r.get(Na),La.push(wa));Na==K&&Ea&&(ha=t.x,da=t.y,ka=ua,ta=wa);Ga.push(La)}!Ea||ha==t.x&&da==t.y&&(!h||isNaN(ka)&&isNaN(ua)||ka==ua)&&(!k||isNaN(ta)&&isNaN(wa)||ta==wa)||Ga.push(Ga[0].slice(0));m.push(Ga)}return m};e.Wy=function(f,h){f=e.jQ(f);637.100877141506>h&&(h=637.100877141506);for(var k=[],m,n=0;n<f.length;n++){var p=f[n];k.push(m=[]);m.push([p[0][0],p[0][1]]);var r,t,x=p[0][0]*d,K=p[0][1]*d;for(r=0;r<p.length-1;r++){var ca=p[r+1][0]*d,ha=p[r+1][1]*d;if(x!==ca||K!==ha){ha=
e.MM(K,x,ha,ca);ca=ha.azimuth;ha=ha.YQ;var da=ha/h;if(1<da){for(t=1;t<=da-1;t++){var ka=e.Vx(K,x,ca,t*h);m.push([ka.x,ka.y])}t=e.Vx(K,x,ca,(ha+Math.floor(da-1)*h)/2);m.push([t.x,t.y])}K=e.Vx(K,x,ca,ha);m.push([K.x,K.y]);x=K.x*d;K=K.y*d}}}return{qJ:k}};e.XQ=function(f){for(var h=[],k=0;k<f.length;k++){var m=f[k];m=e.Wy(m,1E4);h.push(m)}f=[];for(var n=0;n<h.length;n++){m=h[n];var p=0;for(k=0;k<m.qJ.length;k++){var r=m.qJ[k],t=e.vu(g.h.construct(r[0][0],r[0][1])),x=e.vu(g.h.construct(r[r.length-1][0],
r[r.length-1][1])),K=x.x*t.y-t.x*x.y,ca;for(ca=0;ca<r.length-1;ca++)t=e.vu(g.h.construct(r[ca+1][0],r[ca+1][1])),x=e.vu(g.h.construct(r[ca][0],r[ca][1])),K+=x.x*t.y-t.x*x.y;p+=K}p/=1;f.push(p/-2)}return f};return e}();g.cb=function(){function e(){}e.xB=function(f,h,k,m,n,p,r){e.gD[f.cc()]=h;0==isNaN(k)&&(e.mD[f.cc()]=k);0==isNaN(m)&&(e.zD[f.cc()]=m);0==isNaN(n)&&(e.aD[f.cc()]=n);e.nD[f.cc()]=p;null!==r&&(e.oD[f.cc()]=r)};e.Ww=function(f,h,k){e.sD[f.cc()+"-"+h.cc()]=k};e.sc=function(f){f=e.gD[f.cc()];
if(void 0==f)throw g.i.Ie();return f};e.bf=function(f){f=e.mD[f.cc()];if(void 0==f)throw g.i.Ie();return f};e.vv=function(f){f=e.zD[f.cc()];if(void 0==f)throw g.i.Ie();return f};e.ev=function(f){f=e.aD[f.cc()];if(void 0==f)throw g.i.Ie();return f};e.gh=function(f){f=e.oD[f.cc()];if(void 0==f)throw g.i.Ie();return g.l.construct(f[0],f[1],f[2],f[3])};e.Wc=function(f){f=e.nD[f.cc()];if(void 0==f)throw g.i.Ie();return f};e.zh=function(f,h,k){if(h.Nb(k))return f;var m=e.sD[h.cc()+"-"+k.cc()];if(void 0!==
m)return m(f,h,k);throw g.i.Ie();};e.vt=function(){throw g.i.Ie();};e.bR=function(){throw g.i.Ie();};e.dW=function(){throw g.i.Ie();};e.ml=function(){throw g.i.Ie();};e.sW=function(){var f=g.Eg.create(102100),h=g.Eg.create(3857),k=g.Eg.create(4326);g.cb.xB(f,k,NaN,NaN,NaN,!1,null);g.cb.xB(k,k,1,.0033528106647474805,6378137,!0,[-180,-90,180,90]);g.cb.xB(h,k,NaN,NaN,NaN,!1,null);g.cb.Ww(f,k,a);g.cb.Ww(k,f,b);g.cb.Ww(h,k,a);g.cb.Ww(k,h,b)};e.gD=[];e.mD=[];e.zD=[];e.aD=[];e.nD=[];e.oD=[];e.sD=[];return e}()})(ja||=
{});ja.cb.sW();(function(g){var N=function(){function l(c){this.o=new Int32Array(0);this.io=-1;this.Hg=this.size=this.Bl=0;this.stride=c}l.prototype.jd=function(c){c<this.Bl?(this.o[c*this.stride]=this.io,this.io=c):this.Bl--;this.size--};l.prototype.T=function(c,a){return this.o[c*this.stride+a]};l.prototype.S=function(c,a,b){this.o[c*this.stride+a]=b};l.prototype.Ce=function(){var c=this.io;if(-1==c){if(this.Bl==this.Hg){c=0!=this.Hg?g.O.truncate(3*(this.Hg+1)/2):1;2147483647<c&&(c=2147483647);
if(c==this.Hg)throw g.i.ce();this.Dz(c)}c=this.Bl;this.Bl++}else this.io=this.o[c*this.stride];this.size++;for(var a=c*this.stride;a<c*this.stride+this.stride;a++)this.o[a]=-1;return c};l.prototype.Ll=function(c){var a=this.io;if(-1==a){if(this.Bl==this.Hg){a=0!=this.Hg?g.O.truncate(3*(this.Hg+1)/2):1;2147483647<a&&(a=2147483647);if(a==this.Hg)throw g.i.ce();this.Dz(a)}a=this.Bl;this.Bl++}else this.io=this.o[a*this.stride];this.size++;for(var b=a*this.stride,d=0;d<c.length;d++)this.o[b+d]=c[d];return a};
l.prototype.mj=function(c){this.io=-1;this.size=this.Bl=0;c&&(this.o=null,this.Hg=0)};l.prototype.De=function(c){c>this.Hg&&this.Dz(c)};l.prototype.tx=function(c,a){c*=this.stride;a*=this.stride;for(var b=0;b<this.stride;b++){var d=this.o[a+b];this.o[a+b]=this.o[c+b];this.o[c+b]=d}};l.prototype.gC=function(c,a,b){var d=this.o[this.stride*a+b];this.o[this.stride*a+b]=this.o[this.stride*c+b];this.o[this.stride*c+b]=d};l.LG=function(c){return 0<=c};l.prototype.Dz=function(c){null==this.o&&(this.o=new Int32Array(0));
var a=new Int32Array(this.stride*c);a.set(this.o,0);this.o=a;this.Hg=c};return l}();g.$c=N})(ja||={});(function(g){(function(a){a[a.enumInputModeBuildGraph=0]="enumInputModeBuildGraph";a[a.enumInputModeSimplifyAlternate=4]="enumInputModeSimplifyAlternate";a[a.enumInputModeSimplifyWinding=5]="enumInputModeSimplifyWinding";a[a.enumInputModeIsSimplePolygon=7]="enumInputModeIsSimplePolygon"})(c||={});var N=function(){function a(b){this.Be=b;this.yh=NaN;this.eH=new g.ig;this.fH=new g.ig;this.ms=new g.Nc;
this.ns=new g.Nc}a.prototype.compare=function(b,d,e){b=b.ja(e);this.Be.pB(d,this.eH);this.Be.pB(b,this.fH);d=this.eH.get();b=this.fH.get();this.ms.K(d.sa,d.pa);this.ns.K(b.sa,b.pa);if(this.ms.va<this.ns.oa)return-1;if(this.ms.oa>this.ns.va)return 1;e=d.na==d.la;var f=b.na==b.la;if(e||f){if(e&&f)return 0;if(d.na==b.na&&d.sa==b.sa)return e?1:-1;if(d.la==b.la&&d.pa==b.pa)return e?-1:1}e=d.Pe(this.yh,this.ms.oa);f=b.Pe(this.yh,this.ns.oa);e==f&&(e=Math.min(d.la,b.la),f=.5*(e+this.yh),f==this.yh&&(f=e),
e=d.Pe(f,this.ms.oa),f=b.Pe(f,this.ns.oa));return e<f?-1:e>f?1:0};a.prototype.aK=function(b){this.yh=b};return a}(),l=function(){function a(b){this.ib=b;this.WH=new g.ig;this.Bf=new g.h;this.wA=new g.Nc}a.prototype.kX=function(b){this.Bf.L(b)};a.prototype.compare=function(b,d){this.ib.pB(b.ja(d),this.WH);b=this.WH.get();this.wA.K(b.sa,b.pa);if(this.Bf.x<this.wA.oa)return-1;if(this.Bf.x>this.wA.va)return 1;b=b.Pe(this.Bf.y,this.Bf.x);return this.Bf.x<b?-1:this.Bf.x>b?1:0};return a}();var c=function(){function a(){this.hH=
this.Di=this.Gi=this.kA=this.Yn=this.ye=this.Kc=this.jh=this.ge=null;this.Go=this.xg=-1;this.gH=!0;this.pA=!1;this.lA=NaN;this.Ni=new g.Md;this.bO=2147483647;this.aO=g.O.truncate(-2147483648);this.cg=this.ae=this.Hl=this.Cq=this.Cm=this.Bq=this.Os=this.Re=-1;this.wa=0}a.prototype.yy=function(b){this.lA=b};a.prototype.Ym=function(){null==this.ge&&(this.ge=new g.$c(8));var b=this.ge.Ce();this.ge.S(b,1,0);return b};a.prototype.vU=function(){null==this.Kc&&(this.Kc=new g.$c(8));var b=this.Kc.Ce();this.Kc.S(b,
2,0);this.Kc.S(b,3,0);var d=this.Kc.Ce();this.Kc.S(d,2,0);this.Kc.S(d,3,0);this.JJ(b,d);this.JJ(d,b);return b};a.prototype.mI=function(){null==this.ye&&(this.ye=new g.$c(8));var b=this.ye.Ce();this.ye.S(b,2,0);return b};a.prototype.TW=function(b,d){this.ge.S(b,7,d)};a.prototype.mn=function(b,d){this.ge.S(b,2,d)};a.prototype.SW=function(b,d){this.ge.S(b,1,d)};a.prototype.lX=function(b,d){this.ge.S(b,3,d)};a.prototype.iX=function(b,d){this.ge.S(b,4,d)};a.prototype.cr=function(b,d){this.ge.S(b,5,d)};
a.prototype.eR=function(b){return this.ge.T(b,5)};a.prototype.RW=function(b,d){this.ge.S(b,6,d)};a.prototype.cN=function(b,d){this.RW(d,b)};a.prototype.IJ=function(b,d){this.Kc.S(b,1,d)};a.prototype.JJ=function(b,d){this.Kc.S(b,4,d)};a.prototype.Tl=function(b,d){this.Kc.S(b,5,d)};a.prototype.Sl=function(b,d){this.Kc.S(b,6,d)};a.prototype.$W=function(b,d){this.Kc.S(b,2,d)};a.prototype.$w=function(b,d){this.Kc.S(b,3,d)};a.prototype.LF=function(b){return this.Kc.T(b,3)};a.prototype.Gt=function(b,d){this.Kc.S(b,
7,d)};a.prototype.EK=function(b,d){if(-1!=this.mm(b))for(d=d?-1:b,b=this.mm(b);-1!=b;b=this.js(b))this.g.Ra(this.tj(b),this.Cq,d)};a.prototype.yx=function(b,d){-1!=b&&(this.EK(b,d),this.EK(this.xa(b),d))};a.prototype.Dt=function(b,d){this.ye.S(b,1,d)};a.prototype.Vg=function(b,d){this.ye.S(b,2,d)};a.prototype.jn=function(b,d){this.ye.S(b,3,d);this.NW(b,this.dR(d));this.MW(d,b)};a.prototype.MW=function(b,d){this.ye.S(b,4,d)};a.prototype.NW=function(b,d){this.ye.S(b,5,d)};a.prototype.DJ=function(b,
d){this.ye.S(b,6,d)};a.prototype.BJ=function(b,d){this.ye.S(b,7,d)};a.prototype.AJ=function(b,d){this.Yn.write(b,d)};a.prototype.CJ=function(b,d){this.kA.write(b,d)};a.prototype.kY=function(b){var d=0,e=0,f=this.AF(b),h=new g.h,k=new g.h,m=new g.h;this.Yr(f,h);k.L(h);var n=f;do this.lm(n,m),e+=g.h.tb(k,m),this.$e(this.xa(n))!=b&&(d+=(m.x-h.x-(k.x-h.x))*(m.y-h.y+(k.y-h.y))*.5),k.L(m),n=this.jc(n);while(n!=f);this.Yn.write(b,d);this.kA.write(b,e)};a.prototype.PU=function(b,d){var e=new N(this),f=new g.Yj;
f.De(g.O.truncate(this.wa/2));f.Vo(e);for(var h=new g.ia(0),k=this.$g(),m=null,n=0,p=new g.h,r=this.Re;-1!=r;r=this.Rf(r)){n++;if(0==(n&255)&&null!=d&&!d.progress(-1,-1))throw g.i.WC();var t=this.Me(r);if(-1!=t){h.Bh(0);if(!this.gY(f,k,h,t)){this.D(r,p);e.aK(p.y);var x=t;do{var K=this.Ab(x,k);-1!=K&&(f.vd(K,-1),this.Kb(x,k,-2));x=this.jc(this.xa(x))}while(t!=x);x=t;do K=this.Ab(x,k),-1==K&&(K=f.addElement(x,-1),h.add(K)),x=this.jc(this.xa(x));while(t!=x)}for(t=h.size-1;0<=t;t--)K=h.get(t),x=f.ja(K),
this.Kb(this.xa(x),k,K),this.OU(f,K,b)}else-1==this.cz(r)&&(null==m&&(m=new l(this)),this.D(r,p),m.kX(p),x=f.IW(m),t=this.Hl,-1!=x&&(K=f.ja(x),this.$e(K)==this.$e(this.xa(K))&&(K=this.OF(f,x)),-1!=K&&(t=this.$e(K))),this.cN(t,r))}this.Jg(k)};a.prototype.OU=function(b,d,e){var f=b.ja(d),h=this.$e(f);if(-1==this.Gn(h)){var k=this.OF(b,d),m=this.xa(f),n=this.$e(m);this.Kp(h);this.Kp(n);var p=this.Gn(h),r=this.Gn(n);-1==k&&-1==p&&(n==h?(this.jn(n,this.Hl),p=r=this.Hl):(-1==r&&(this.jn(n,this.Hl),r=this.Hl),
this.jn(h,n),p=n));if(-1!=k){var t=this.$e(k);-1==r&&(0>=this.Kp(t)?(r=this.Gn(t),this.jn(n,r)):(this.jn(n,t),r=t),n==h&&(p=r))}-1==p&&this.hY(h,n);0==e?this.jW(b,d,f,k,h,n):5==e?this.kW(b,d,f,m,h,n):4==e&&this.iW(f,k,h,n)}};a.prototype.jW=function(b,d,e,f,h,k){var m=this.hk(h);if(-1!=f){var n=this.hk(k),p=this.hk(this.$e(f));f=m&n&p;p^=p&this.dh(e);p|=f;0!=p&&(this.Vg(k,n|p),this.Vg(h,p|m),m=m||p)}for(d=b.lb(d);-1!=d;d=b.lb(d)){f=b.ja(d);e=this.$e(this.xa(f));h=this.hk(e);k=this.dh(f);n=this.$e(f);
p=this.hk(n);f=h&p&m;m^=m&k;m|=f;if(0==m)break;this.Vg(e,h|m);this.Vg(n,p|m)}};a.prototype.kW=function(b,d,e,f,h,k){if(h!=k){e=this.Ab(e,this.cg);e+=this.Ab(f,this.cg);f=0;var m=new g.ia(0),n=new g.ia(0);n.add(0);for(var p=b.rc(-1);p!=d;p=b.lb(p)){var r=b.ja(p),t=this.xa(r),x=this.$e(r),K=this.$e(t);if(x!=K){r=this.Ab(r,this.cg);r+=this.Ab(t,this.cg);f+=r;t=!1;0!=m.size&&m.Fc()==K&&(n.If(),m.If(),t=!0);if(-1==this.Gn(K))throw g.i.Qa();t&&this.Gn(K)==x||(n.add(f),m.add(x))}}f+=e;0!=m.size&&m.Fc()==
k&&(n.If(),m.If());0!=f?0==n.Fc()&&(b=this.g.ld,b=this.La(b),this.Vg(h,b)):0!=n.Fc()&&(b=this.g.ld,b=this.La(b),this.Vg(h,b))}};a.prototype.iW=function(b,d,e,f){var h=this.La(this.g.ld);if(-1==d)this.Vg(f,this.Go),b=this.Ab(b,this.xg),0!=(b&1)?this.Vg(e,h):this.Vg(e,this.Go);else{var k=this.hk(f);0==k?(k=this.hk(this.$e(d)),this.Vg(f,k),b=this.Ab(b,this.xg),0!=(b&1)?this.Vg(e,k==h?this.Go:h):this.Vg(e,k)):(b=this.Ab(b,this.xg),0!=(b&1)?this.Vg(e,k==h?this.Go:h):this.Vg(e,k))}};a.prototype.gY=function(b,
d,e,f){var h=f,k=-1,m=-1,n=0;do{if(2==n)return!1;var p=this.Ab(h,d);if(-1!=p){if(-1!=k)return!1;k=p}else{if(-1!=m)return!1;m=h}n++;h=this.jc(this.xa(h))}while(f!=h);if(-1==m||-1==k)return!1;this.Kb(b.ja(k),d,-2);b.Sj(k,m);e.add(k);return!0};a.prototype.hY=function(b,d){var e=this.Kp(b);if(0!=e){var f=this.Kp(d);0<e&&0>f?this.jn(b,d):0>e&&0<f?this.jn(b,d):(d=this.Gn(d),-1!=d&&this.jn(b,d))}};a.prototype.vP=function(b,d){this.Cq=this.g.Gd();for(var e=0,f=d.size;e<f;e++){var h=d.get(e),k=this.g.Pa(h,
this.Cm),m=this.g.Qf(this.g.bd(h)),n=this.g.ic(m);if(g.aa.Hc(n)){var p=this.g.U(h);if(-1!=p){var r=this.g.Pa(p,this.Cm);if(k!=r){var t=this.vU(),x=this.xa(t),K=this.jh.Ce();this.jh.S(K,0,h);this.jh.S(K,1,-1);this.Gt(t,K);this.IJ(t,k);K=this.Me(k);-1==K?(this.mn(k,t),this.Tl(t,x),this.Sl(x,t)):(k=this.te(K),this.Tl(K,x),this.Sl(x,K),this.Sl(k,t),this.Tl(t,k));this.IJ(x,r);k=this.Me(r);-1==k?(this.mn(r,x),this.Sl(t,x),this.Tl(x,t)):(r=this.te(k),this.Tl(k,t),this.Sl(t,k),this.Sl(r,x),this.Tl(x,r));
m=this.La(m);0==b?(this.Kb(x,this.ae,0),this.Kb(t,this.ae,1736==n?m:0)):5==b?(r=new g.h,this.g.D(h,r),h=new g.h,this.g.D(p,h),k=p=0,0>r.compare(h)?p=1:k=-1,this.Kb(x,this.ae,0),this.Kb(t,this.ae,0),this.Kb(t,this.cg,p),this.Kb(x,this.cg,k)):7==b?(this.Kb(x,this.ae,this.Go),this.Kb(t,this.ae,1736==n?m:0)):4==b&&(this.Kb(x,this.ae,0),this.Kb(t,this.ae,0),this.Kb(t,this.xg,1),this.Kb(x,this.xg,1));n=1736==n?this.aO:0;this.$w(t,m|n);this.$w(x,m|n)}}}}};a.prototype.VT=function(b,d){var e=this.mm(d);if(-1!=
e){var f=this.mm(b);this.jh.S(e,1,f);this.Gt(b,e);this.Gt(d,-1)}b=this.xa(b);d=this.xa(d);e=this.mm(d);-1!=e&&(f=this.mm(b),this.jh.S(e,1,f),this.Gt(b,e),this.Gt(d,-1))};a.prototype.IX=function(b){function d(ta,ua){return f.HO(ta,ua)}var e=new g.ia(0);e.Jb(10);for(var f=this,h=this.Re;-1!=h;h=this.Rf(h)){e.clear(!1);var k=this.Me(h);if(-1!=k){var m=k;do e.add(m),m=this.jc(this.xa(m));while(m!=k);if(1<e.size){m=!0;if(2<e.size)e.Vd(0,e.size,d),e.add(e.get(0));else if(0<this.GO(e.get(0),e.get(1))){var n=
e.get(0);e.set(0,e.get(1));e.set(1,n)}else m=!1;for(var p=n=e.get(0),r=this.uf(p),t=this.xa(p),x=-1,K=1,ca=e.size;K<ca;K++){var ha=e.get(K),da=this.xa(ha),ka=this.jk(da);if(ka==r&&ha!=p){if(0==b)x=this.LF(p)|this.LF(ha),this.$w(p,x),this.$w(t,x),this.Kb(p,this.ae,this.Ab(p,this.ae)|this.Ab(ha,this.ae)),this.Kb(t,this.ae,this.Ab(t,this.ae)|this.Ab(da,this.ae));else if(-1!=this.cg)x=this.Ab(p,this.cg)+this.Ab(ha,this.cg),da=this.Ab(t,this.cg)+this.Ab(da,this.cg),this.Kb(p,this.cg,x),this.Kb(t,this.cg,
da);else{if(7==b){this.Ni=new g.Md(5,h,-1);return}-1!=this.xg&&(x=this.Ab(p,this.xg)+this.Ab(ha,this.xg),da=this.Ab(t,this.xg)+this.Ab(da,this.xg),this.Kb(p,this.xg,x),this.Kb(t,this.xg,da))}this.VT(p,ha);this.Ly(ha);x=p;e.set(K,-1);ha==n&&(e.set(0,-1),n=-1)}else this.yx(x,!1),x=-1,p=ha,r=ka,t=da}this.yx(x,!1);x=-1;if(m){n=-1;K=0;for(ca=e.size;K<ca;K++)if(ha=e.get(K),-1!=ha)if(-1==n)p=n=ha,r=this.uf(p),t=this.xa(p);else if(ha!=p&&(da=this.xa(ha),ka=this.jk(da),this.Sl(t,ha),this.Tl(ha,t),p=ha,r=ka,
t=da,7==b&&(this.Ab(ha,this.ae)|this.Ab(this.te(ha),this.ae))==(this.Go|1))){this.Ni=new g.Md(5,h,-1);return}this.mn(h,n)}else{n=-1;K=0;for(ca=e.size;K<ca;K++)if(ha=e.get(K),-1!=ha){n=ha;break}k!=n&&this.mn(h,n)}}}}};a.prototype.WN=function(){for(var b=-1,d=this.$g(),e=this.Re;-1!=e;e=this.Rf(e)){var f=this.Me(e);if(-1!=f){var h=f;do{if(1!=this.Ab(h,d)){var k=this.mI();this.Dt(k,h);this.BJ(k,b);-1!=b&&this.DJ(b,k);b=k;var m=0,n=h;do m|=this.Ab(n,this.ae),this.$W(n,k),this.Kb(n,d,1),n=this.jc(n);while(n!=
h);this.Vg(k,m)}h=this.jc(this.xa(h))}while(h!=f)}}k=this.mI();this.Dt(k,-1);this.BJ(k,b);-1!=b&&this.DJ(b,k);this.Hl=k;this.Yn=g.be.qf(this.ye.size,NaN);this.kA=g.be.qf(this.ye.size,NaN);this.AJ(this.Hl,Infinity);this.CJ(this.Hl,Infinity);this.Jg(d)};a.prototype.sR=function(b,d,e){d=-1!=d?d:this.Me(b);if(-1==d)return-1;for(b=d;;){if(1!=this.Ab(d,e))return d;d=this.jc(this.xa(d));if(d==b)return-1}};a.prototype.yW=function(){for(var b=this.$g(),d=this.Re;-1!=d;d=this.Rf(d))for(var e=-1;;){var f=this.sR(d,
e,b);if(-1==f)break;e=this.jc(this.xa(f));for(var h=f;;){var k=this.jc(h),m=this.te(h),n=this.xa(h);if(m==n){this.IP(h);if(e==h||e==n)e=-1;if(h==f||m==f){f=k;if(h==f||m==f)break;h=k;continue}}else this.Kb(h,b,1);h=k;if(h==f)break}}this.Jg(b)};a.prototype.MB=function(b,d,e,f,h){this.Ug();this.gH=h;this.g=b;this.Bq=this.g.aF();b=new g.ia(0);b.Jb(null!=e?this.g.I(e.get(0)):this.g.fd);var k=0,m=1,n=null!=e?e.get(0):this.g.ld;for(h=1;-1!=n;){this.g.HJ(n,this.Bq,m);m<<=1;for(var p=this.g.Ob(n);-1!=p;p=
this.g.Rb(p))for(var r=this.g.Xa(p),t=0,x=this.g.Ja(p);t<x;t++)b.add(r),r=this.g.U(r);g.aa.Rn(this.g.ic(n))||(k+=this.g.da(n));null!=e?(n=h<e.size?e.get(h):-1,h++):n=this.g.ue(n)}this.Go=m;this.wa=b.size;this.g.nx(b,this.wa);null==this.jh&&(this.jh=new g.$c(2),this.ge=new g.$c(8),this.Kc=new g.$c(8),this.ye=new g.$c(8));this.jh.De(this.wa);g.mp.zp(f);this.ge.De(this.wa+10);this.Kc.De(2*this.wa+32);this.ye.De(Math.max(32,k));this.Cm=this.g.Gd();e=new g.h;h=0;k=new g.h;e.Rc();for(m=0;m<=this.wa;m++)if(m<
this.wa?(r=b.get(m),this.g.D(r,k)):k.Rc(),!e.qb(k)){if(h<m){r=this.Ym();for(x=t=-1;h<m;h++)x=b.get(h),this.g.Ra(x,this.Cm,r),n=this.jh.Ce(),this.jh.S(n,0,x),this.jh.S(n,1,t),t=n,p=this.g.bd(x),n=this.g.Qf(p),n=this.La(n),this.SW(r,this.xd(r)|n);this.TW(r,t);this.cr(r,this.g.Ua(x));-1!=this.Os&&this.iX(this.Os,r);this.lX(r,this.Os);this.Os=r;-1==this.Re&&(this.Re=r)}h=m;e.L(k)}g.mp.zp(f);this.ae=this.$g();5==d&&(this.cg=this.$g());4==d&&(this.xg=this.$g());this.vP(d,b);0==this.Ni.Jj&&(this.IX(d),0==
this.Ni.Jj&&(isNaN(this.lA)||this.xO()?(this.WN(),0==this.Ni.Jj&&(this.Jg(this.ae),this.ae=-1,this.gH&&this.PU(d,f))):this.pA=!0))};a.prototype.Ly=function(b){var d=this.jc(b),e=this.te(b),f=this.xa(b),h=this.jc(f),k=this.te(f);d!=f&&(this.Sl(k,d),this.Tl(d,k));e!=f&&(this.Sl(e,h),this.Tl(h,e));e=this.jk(b);this.Me(e)==b&&(h!=b?this.mn(e,h):this.mn(e,-1));h=this.jk(f);this.Me(h)==f&&(d!=f?this.mn(h,d):this.mn(h,-1));this.Kc.jd(b);this.Kc.jd(f)};a.prototype.OF=function(b,d){for(;;)if(d=b.we(d),-1!=
d){var e=b.ja(d);if(this.$e(e)!=this.$e(this.xa(e)))return e}else return-1};a.prototype.dr=function(b,d){var e;void 0===e&&(e=!0);this.MB(b,0,null,d,e)};a.prototype.vJ=function(b,d,e){var f=new g.ia(0);f.add(d);this.MB(b,4,f,e,1736==b.ic(d))};a.prototype.wJ=function(b,d,e){var f=new g.ia(0);f.add(d);this.MB(b,5,f,e,!0)};a.prototype.Ug=function(){null!=this.g&&(-1!=this.Bq&&(this.g.xW(this.Bq),this.Bq=-1),-1!=this.Cm&&(this.g.Td(this.Cm),this.Cm=-1),-1!=this.Cq&&(this.g.Td(this.Cq),this.Cq=-1),-1!=
this.ae&&(this.Jg(this.ae),this.ae=-1),-1!=this.cg&&(this.Jg(this.cg),this.cg=-1),-1!=this.xg&&(this.Jg(this.xg),this.xg=-1),this.g=null,this.ge.mj(!0),this.jh.mj(!0),this.Os=this.Re=-1,null!=this.Kc&&this.Kc.mj(!0),null!=this.Gi&&(this.Gi.length=0),null!=this.Di&&(this.Di.length=0),null!=this.hH&&(this.hH.length=0),null!=this.ye&&this.ye.mj(!0),this.Hl=-1,this.Yn=null)};a.prototype.Me=function(b){return this.ge.T(b,2)};a.prototype.D=function(b,d){this.g.dG(this.eR(b),d)};a.prototype.xd=function(b){return this.ge.T(b,
1)};a.prototype.Rf=function(b){return this.ge.T(b,4)};a.prototype.cz=function(b){return this.ge.T(b,6)};a.prototype.km=function(b){return this.ge.T(b,7)};a.prototype.js=function(b){return this.jh.T(b,1)};a.prototype.tj=function(b){return this.jh.T(b,0)};a.prototype.ng=function(b,d){d=this.Di[d];return d.size<=b?-1:d.read(b)};a.prototype.nn=function(b,d,e){d=this.Di[d];d.size<=b&&d.resize(this.ge.size,-1);d.write(b,e)};a.prototype.Dp=function(){null==this.Di&&(this.Di=[]);for(var b=g.ia.qf(this.ge.Hg,
-1),d=0,e=this.Di.length;d<e;d++)if(null==this.Di[d])return this.Di[d]=b,d;this.Di.push(b);return this.Di.length-1};a.prototype.Ep=function(b){this.Di[b]=null};a.prototype.jk=function(b){return this.Kc.T(b,1)};a.prototype.uf=function(b){return this.jk(this.xa(b))};a.prototype.xa=function(b){return this.Kc.T(b,4)};a.prototype.te=function(b){return this.Kc.T(b,5)};a.prototype.jc=function(b){return this.Kc.T(b,6)};a.prototype.$e=function(b){return this.Kc.T(b,2)};a.prototype.af=function(b){return this.hk(this.Kc.T(b,
2))};a.prototype.mm=function(b){return this.Kc.T(b,7)};a.prototype.Yr=function(b,d){this.D(this.jk(b),d)};a.prototype.lm=function(b,d){this.D(this.uf(b),d)};a.prototype.dh=function(b){return this.Kc.T(b,3)&this.bO};a.prototype.Ab=function(b,d){d=this.Gi[d];return d.size<=b?-1:d.read(b)};a.prototype.Kb=function(b,d,e){d=this.Gi[d];d.size<=b&&d.resize(this.Kc.size,-1);d.write(b,e)};a.prototype.$g=function(){null==this.Gi&&(this.Gi=[]);for(var b=g.ia.qf(this.Kc.Hg,-1),d=0,e=this.Gi.length;d<e;d++)if(null==
this.Gi[d])return this.Gi[d]=b,d;this.Gi.push(b);return this.Gi.length-1};a.prototype.Jg=function(b){this.Gi[b]=null};a.prototype.IP=function(b){var d=this.$e(b),e=this.xa(b),f=this.jc(b);f==e&&(f=this.jc(f),f==b&&(f=-1));var h=this.AF(d);h!==b&&h!=e||this.Dt(d,f);e=this.Yn.read(d);isNaN(e)||(this.AJ(d,NaN),this.CJ(d,NaN));this.yx(b,!0);this.Ly(b)};a.prototype.JP=function(b){for(var d=0,e=b.size;d<e;d++){var f=b.get(d),h=this.$e(this.xa(f));this.Dt(this.$e(f),-1);this.Dt(h,-1);this.yx(f,!0);this.Ly(f)}};
a.prototype.AF=function(b){return this.ye.T(b,1)};a.prototype.hk=function(b){return this.ye.T(b,2)};a.prototype.Gn=function(b){return this.ye.T(b,3)};a.prototype.dR=function(b){return this.ye.T(b,4)};a.prototype.Kp=function(b){var d=this.Yn.read(b);isNaN(d)&&(this.kY(b),d=this.Yn.read(b));return d};a.prototype.La=function(b){return this.g.KF(b,this.Bq)};a.prototype.Le=function(b){return this.g.Pa(b,this.Cm)};a.prototype.uR=function(b){return this.g.Pa(b,this.Cq)};a.prototype.tR=function(b,d){var e=
this.Me(b);if(-1==e)return-1;var f=e,h=-1,k=-1;do{if(this.uf(f)==d)return f;if(-1==h){h=this.Me(d);if(-1==h)break;k=h}if(this.uf(k)==b)return f=this.xa(k);f=this.jc(this.xa(f));k=this.jc(this.xa(k))}while(f!=e&&k!=h);return-1};a.prototype.pB=function(b,d){d.Or();d=d.get();var e=new g.h;this.Yr(b,e);d.Dc(e);this.lm(b,e);d.Qc(e)};a.prototype.HO=function(b,d){if(b==d)return 0;var e=new g.h;this.lm(b,e);var f=new g.h;this.lm(d,f);if(e.qb(f))return 0;d=new g.h;this.Yr(b,d);b=new g.h;b.uc(e,d);e=new g.h;
e.uc(f,d);return g.h.nu(b,e)};a.prototype.GO=function(b,d){if(b==d)return 0;var e=new g.h;this.lm(b,e);var f=new g.h;this.lm(d,f);if(e.qb(f))return 0;d=new g.h;this.Yr(b,d);b=new g.h;b.uc(e,d);e=new g.h;e.uc(f,d);return 0<=e.y&&0<b.y?g.h.nu(b,e):0};a.prototype.xO=function(){for(var b=g.lc.ox(this.lA),d=new g.h,e=new g.h,f=new g.h,h=new g.h,k=new g.h,m=this.Re;-1!=m;m=this.Rf(m)){var n=this.Me(m);if(-1!=n){var p=n;this.Yr(p,d);this.lm(p,e);k.uc(e,d);var r=k.Sk();do{var t=p;p=this.jc(this.xa(p));if(p!=
t){this.lm(p,f);h.uc(f,d);t=h.Sk();var x=h.wi(k);if(x*x/(t*r)*Math.min(t,r)<=b)return!1;k.L(h);r=t;e.L(f)}}while(p!=n)}}return!0};return a}();g.iu=c})(ja||={});(function(g){var N=function(){function l(){this.j=null;this.oH=new g.h;this.pH=new g.h;this.Gj=null;this.Mv=!1;this.tl=-1}l.prototype.cf=function(c){return c<this.Gj.length?this.Gj[c]:!1};l.prototype.dl=function(c,a,b,d){var e=g.aa.tf(this.j.g.ic(b));if(2==g.aa.tf(this.j.g.ic(a))&&1==e)this.FP(c,a,b,d);else throw g.i.Qa();};l.prototype.dr=
function(c,a){null==this.j&&(this.j=new g.iu);this.j.dr(c,a)};l.prototype.Ft=function(c,a,b){g.Tk.V(c,a,b,!0);for(a=c.ld;-1!=a;a=c.ue(a))1736==c.ic(a)&&g.rn.V(c,a,-1,this.Mv,b);this.dr(c,b)};l.prototype.ME=function(c,a,b,d,e){var f=this.j.g;if(1736==f.ic(c))for(c=f.Ob(c);-1!=c;c=f.Rb(c)){var h=f.Xa(c);this.j.Le(h);this.j.Le(f.U(h));var k=this.j.uR(h);if(-1!=k){var m=this.j.Ab(k,b);if(1!=m&&2!=m)if(this.cf(this.j.af(k))){this.j.Kb(k,b,1);m=f.vf(a,-1);var n=k,p=this.j.Le(h),r=1;do{var t=this.sm(h,e);
f.ij(m,t);-1!=d&&this.j.nn(p,d,1);this.j.Kb(n,b,1);n=this.j.jc(n);do{t=1==r?f.U(h):f.Ma(h);var x=-1!=t?this.j.Le(t):-1}while(x==p);var K=this.j.jk(n);if(K!=x){do t=1==r?f.Ma(h):f.U(h),x=-1!=t?this.j.Le(t):-1;while(x==p);K!=x?(x=K,t=this.j.tj(this.j.km(x))):r=-r}p=x;h=t}while(n!=k);f.kn(m,!0)}else this.j.Kb(k,b,2)}}};l.prototype.eF=function(){for(var c=this.j.$g(),a=new g.ia(0),b=this.j.Re;-1!=b;b=this.j.Rf(b)){var d=this.j.Me(b),e=d;if(-1!=d){do{if(1!=this.j.Ab(e,c)){var f=this.j.xa(e);this.j.Kb(f,
c,1);this.j.Kb(e,c,1);this.cf(this.j.af(e))&&this.cf(this.j.af(f))&&a.add(e)}e=this.j.jc(this.j.xa(e))}while(e!=d)}}this.j.Jg(c);this.j.JP(a)};l.prototype.sm=function(c,a){return-1==a?c:this.aS(c,a)};l.prototype.aS=function(c,a){var b=this.j.g,d=this.j.km(this.j.Le(c));do{var e=this.j.tj(d);if(b.Qf(b.bd(e))==a)return e;d=this.j.js(d)}while(-1!=d);return c};l.prototype.Ot=function(c,a,b){this.eF();var d=this.j.g,e=d.Ig(1736),f=this.j.$g();this.uK(c,a,e,b,f,-1);this.j.Jg(f);g.rn.V(d,e,1,this.Mv,null);
return e};l.prototype.uK=function(c,a,b,d,e,f){this.ME(c,b,e,f,d);-1!=a&&this.ME(a,b,e,f,d);c=this.j.g;for(a=this.j.Re;-1!=a;a=this.j.Rf(a)){var h=this.j.Me(a);if(-1!=h){var k=h;do{var m=this.j.Ab(k,e);if(1!=m&&2!=m)if(this.cf(this.j.af(k))){m=c.vf(b,-1);var n=k;do{var p=this.j.mm(n);-1!=p?p=this.j.tj(p):(p=this.j.tj(this.j.mm(this.j.xa(n))),p=this.j.g.U(p));p=this.sm(p,d);c.ij(m,p);this.j.Kb(n,e,1);-1!=f&&(p=this.j.Le(p),this.j.nn(p,f,1));n=this.j.jc(n)}while(n!=k);c.kn(m,!0)}else this.j.Kb(k,e,
2);k=this.j.jc(this.j.xa(k))}while(k!=h)}}};l.prototype.aY=function(c,a,b){var d=this.j.g,e=d.Ig(1736),f=d.Ig(1607),h=d.Ig(550);this.eF();var k=-1,m=this.j.$g(),n=this.j.Dp();this.uK(c,a,e,b,m,n);for(c=this.j.Re;-1!=c;c=this.j.Rf(c))if(a=this.j.Me(c),-1!=a){var p=a;do{var r=this.j.Ab(p,m),t=this.j.Ab(this.j.xa(p),m);r|=t;if(2==r)if(r=this.j.dh(p),this.cf(r)){var x=d.vf(f,-1),K=p;r=this.Yw(c,d);r=this.sm(r,b);d.ij(x,r);this.j.nn(c,n,1);do{r=this.j.uf(K);t=this.Yw(r,d);t=this.sm(t,b);d.ij(x,t);this.j.Kb(K,
m,1);this.j.Kb(this.j.xa(K),m,1);this.j.nn(r,n,1);K=this.j.jc(K);r=this.j.Ab(K,m);t=this.j.Ab(this.j.xa(K),m);r|=t;if(2!=r)break;r=this.j.dh(K);if(!this.cf(r)){this.j.Kb(K,m,1);this.j.Kb(this.j.xa(K),m,1);break}}while(K!=p)}else this.j.Kb(p,m,1),this.j.Kb(this.j.xa(p),m,1);p=this.j.jc(this.j.xa(p))}while(p!=a)}for(c=this.j.Re;-1!=c;c=this.j.Rf(c))r=this.j.ng(c,n),1!=r&&(r=this.j.xd(c),this.cf(r)&&(-1==k&&(k=d.vf(h,-1)),a=this.j.km(c),-1!=a&&(a=this.j.tj(a),r=this.sm(a,b),d.ij(k,r))));this.j.Ep(n);
this.j.Jg(m);g.rn.V(d,e,1,this.Mv,null);b=[];b[0]=h;b[1]=f;b[2]=e;return b};l.prototype.Yw=function(c,a){var b=-1;for(c=this.j.km(c);-1!=c;c=this.j.js(c)){var d=this.j.tj(c);-1==b&&(b=d);var e=this.j.La(a.Qf(a.bd(d)));if(this.cf(e)){b=d;break}}return b};l.prototype.lB=function(c,a){for(var b=this.jl(a),d=this.j.jk(a),e=this.j.uf(a),f=0,h=0,k=this.j.km(d);-1!=k;k=this.j.js(k)){var m=this.j.tj(k),n=c.bd(m),p=this.j.La(c.Qf(n));n=c.Xa(n);(p=0!=(p&b))&&n==m&&(this.tl=a);var r=c.U(m);-1!=r&&this.j.Le(r)==
e?(f++,p&&(-1===this.tl&&n==r&&(m=this.j.jc(a),this.cf(this.jl(m))&&(this.tl=m)),h++)):(m=c.Ma(m),-1!=m&&this.j.Le(m)==e&&(f--,p&&(-1===this.tl&&n===m&&(m=this.j.jc(a),this.cf(this.jl(m))&&(this.tl=m)),h--)))}this.j.D(d,this.oH);this.j.D(e,this.pH);c=g.h.tb(this.oH,this.pH);return(0!=h?h:f)*c};l.prototype.jl=function(c){return this.j.dh(c)|this.j.af(c)|this.j.af(this.j.xa(c))};l.prototype.xK=function(c){for(var a=this.j.xa(this.j.te(c)),b=-1;a!=c;){if(this.cf(this.jl(a))){if(-1!=b)return-1;b=a}a=
this.j.xa(this.j.te(a))}return-1!=b?this.j.xa(b):-1};l.prototype.yK=function(c){for(var a=this.j.xa(this.j.jc(c)),b=-1;a!=c;){if(this.cf(this.jl(a))){if(-1!=b)return-1;b=a}a=this.j.xa(this.j.jc(a))}return-1!=b?this.j.xa(b):-1};l.prototype.mJ=function(c,a,b,d,e){var f=this.j.g,h=c,k=this.j.xa(h);this.j.Kb(h,b,1);this.j.Kb(k,b,1);this.tl=-1;for(var m=this.lB(f,h),n=h,p=-1,r=!1,t=1;;){var x=this.j.te(h);if(x==k)break;k=this.j.jc(k);if(this.j.xa(x)!=k)if(h=this.xK(h),-1==h){r=!0;break}else k=this.j.xa(h);
else h=x;if(h==c){p=c;break}x=this.jl(h);if(!this.cf(x))break;this.j.Kb(h,b,1);this.j.Kb(k,b,1);n=h;m+=this.lB(f,h);t++}if(-1==p)for(h=c,k=this.j.xa(h),p=h;;){c=this.j.jc(h);if(c==k)break;k=this.j.te(k);if(this.j.xa(c)!=k)if(h=this.yK(h),-1==h){r=!0;break}else k=this.j.xa(h);else h=c;x=this.jl(h);if(!this.cf(x))break;this.j.Kb(h,b,1);this.j.Kb(k,b,1);p=h;m+=this.lB(f,h);t++}else if(-1!=this.tl&&(n=this.tl,p=this.j.te(this.tl),this.j.xa(p)!=this.j.jc(this.j.xa(n))&&(p=this.xK(n),-1==p)))throw g.i.Qa();
0<=m||(h=p,p=this.j.xa(n),n=this.j.xa(h));b=f.vf(a,-1);h=n;n=this.j.jk(n);r=this.j.uf(p)==n&&r;m=this.Yw(n,f);m=this.sm(m,e);f.ij(b,m);-1!=d&&this.j.nn(n,d,1);n=0;for(t=r?g.O.truncate((t+1)/2):-1;;){c=this.j.uf(h);m=this.Yw(c,f);m=this.sm(m,e);f.ij(b,m);n++;-1!=d&&this.j.nn(c,d,1);r&&n==t&&(b=f.vf(a,-1),f.ij(b,m));if(h==p)break;c=this.j.jc(h);if(this.j.te(this.j.xa(h))!=this.j.xa(c)){if(h=this.yK(h),-1==h)throw g.i.Qa();}else h=c}};l.prototype.Pt=function(c){for(var a=this.j.g.Ig(1607),b=this.j.$g(),
d=this.j.Re;-1!=d;d=this.j.Rf(d)){var e=this.j.Me(d),f=e;do 1!=this.j.Ab(f,b)&&this.cf(this.jl(f))&&this.mJ(f,a,b,-1,c),f=this.j.jc(this.j.xa(f));while(f!=e)}this.j.Jg(b);return a};l.prototype.bY=function(c){for(var a=this.j.g,b=a.Ig(1607),d=a.Ig(550),e=this.j.$g(),f=this.j.Dp(),h=-1,k=this.j.Re;-1!=k;k=this.j.Rf(k)){var m=this.j.Me(k),n=m;do{var p=this.j.Ab(n,e);1!=p&&(p=this.jl(n),this.cf(p)&&this.mJ(n,b,e,f,c));n=this.j.jc(this.j.xa(n))}while(n!=m)}for(k=this.j.Re;-1!=k;k=this.j.Rf(k))p=this.j.ng(k,
f),1!=p&&(p=this.j.xd(k),this.cf(p)&&(-1==h&&(h=a.vf(d,-1)),m=this.j.km(k),-1!=m&&(m=this.j.tj(m),m=this.sm(m,c),a.ij(h,m))));this.j.Jg(e);this.j.Ep(f);c=[];c[0]=d;c[1]=b;return c};l.prototype.mr=function(){for(var c=this.j.g,a=c.Ig(550),b=c.vf(a,-1),d=this.j.Re;-1!=d;d=this.j.Rf(d))if(this.cf(this.j.xd(d))){for(var e=-1,f=this.j.km(d);-1!=f;f=this.j.js(f)){var h=this.j.tj(f);-1==e&&(e=h);var k=this.j.La(c.Qf(c.bd(h)));if(this.cf(k)){e=h;break}}c.ij(b,e)}return a};l.prototype.bq=function(c){this.Gj=
[];for(var a=0;a<c;a++)this.Gj[a]=!1};l.aW=function(c,a,b){var d=c.Ia(),e=Array(1E3);g.O.$u(e,null);var f=g.O.lg(1E3,0),h=c.I(),k=!0,m=2==a.Db();if(1!=a.Db()&&2!=a.Db())throw g.i.Qa();for(var n=0;n<h;){var p=g.O.truncate(c.lW(e,n)-n);m?g.hd.sK(a,e,p,b,f):g.hd.tK(a,e,p,b,f);for(var r=0,t=0;t<p;t++)0==f[t]&&(k&&(k=!1,d.Fd(c,0,n)),r!=t&&d.Fd(c,n+r,n+t),r=t+1);k||r==p||d.Fd(c,n+r,n+p);n+=p}return k?c:d};l.zG=function(c,a,b){return c instanceof g.de?l.aW(c,a,b):a instanceof g.Sa?c.B()||a.B()?c.Ia():g.Tk.zU(b,
c,a)?g.Tk.CO(c,a):c.Ia():l.bW(c,a,b)};l.Av=function(c,a,b,d){var e=new g.l;c.A(e);var f=new g.l;a.A(f);var h=new g.l;h.K(e);h.Zb(f);b=g.ta.Wd(b,h,!0);h=new g.l;h.K(f);f=g.ta.Er(b);h.W(f,f);if(!e.isIntersecting(h)){if(c.Db()<=a.Db())return l.ki(l.Xe(c.Ia()),c,"\x26");if(c.Db()>a.Db())return l.ki(l.Xe(a.Ia()),c,"\x26")}f=new l;e=new g.gd;h=e.Ib(l.Xe(c));a=e.Ib(l.Xe(a));f.Ft(e,b,d);d=f.Av(h,a);c=l.ki(e.Ne(d),c,"\x26");g.aa.Hc(c.getType())&&(c.Ch(2,b),1736==c.getType()&&c.fm());return c};l.bW=function(c,
a,b){if(c.B()||a.B())return c.Ia();var d=[null],e=[0],f=2==a.Db();if(1!=a.Db()&&2!=a.Db())throw g.i.Qa();d[0]=c.D();f?g.hd.sK(a,d,1,b,e):g.hd.tK(a,d,1,b,e);return 0==e[0]?c.Ia():c};l.prototype.LU=function(c,a,b,d,e){if(c.B())return c;var f=new g.gd;c=f.Ib(c);return this.Mk(f,c,a,b,d,e)};l.prototype.NU=function(c,a,b,d,e,f){if(e&&550!=c.ic(a)){var h=new g.RC;h.TX(c,b);h.Ng?(g.Tk.V(c,b,f,!0),e=!1):this.j.yy(b)}else g.Tk.V(c,b,f,!0),e=!1;d&&550!=c.ic(a)?this.j.wJ(c,a,f):this.j.vJ(c,a,f);if(this.j.pA)return this.j.Ug(),
this.j=null,this.Mk(c,a,b,d,!1,f);this.j.yy(NaN);f=this.j.La(a);this.bq(f+1);this.Gj[f]=!0;if(1736==c.ic(a)||d&&550!=c.ic(a))return c.Yo(a,0),a=this.Ot(a,-1,-1),c=c.Ne(a),c.Yo(0),e?c.Ch(1,0):(c.Ch(2,b),c.fm()),c;if(1607==c.ic(a))return a=this.Pt(-1),c=c.Ne(a),e||c.Ch(2,b),c;if(550==c.ic(a))return a=this.mr(),c=c.Ne(a),e||c.Ch(2,b),c;throw g.i.Qa();};l.prototype.Mk=function(c,a,b,d,e,f){this.j=new g.iu;try{return this.NU(c,a,b,d,e,f)}finally{this.j.Ug()}};l.Mk=function(c,a,b,d,e){return(new l).LU(c,
a,b,d,e)};l.prototype.MU=function(c,a,b,d){this.Mv=c;this.j=new g.iu;c=a.In(b);var e=a.ic(b);1!=c||550==e?this.j.vJ(a,b,d):this.j.wJ(a,b,d);if(!this.j.pA)if(this.j.yy(NaN),d=this.j.La(b),this.bq(d+1),this.Gj[d]=!0,1736==a.ic(b)||1==c&&550!=a.ic(b))a.Yo(b,0),d=this.Ot(b,-1,-1),a.hC(d,b),a.BB(d);else if(1607==a.ic(b))d=this.Pt(-1),a.hC(d,b),a.BB(d);else if(550==a.ic(b))d=this.mr(),a.hC(d,b),a.BB(d);else throw g.i.fa("internal error");};l.prototype.im=function(c,a){var b=g.aa.tf(this.j.g.ic(c)),d=g.aa.tf(this.j.g.ic(a));
if(b>d)return c;var e=this.j.La(c),f=this.j.La(a);this.bq((e|f)+1);this.Gj[this.j.La(c)]=!0;if(2==b&&2==d)return this.Ot(c,a,-1);if(1==b&&2==d||1==b&&1==d)return this.Pt(-1);if(0==b)return this.mr();throw g.i.Qa();};l.prototype.Av=function(c,a){var b=g.aa.tf(this.j.g.ic(c)),d=g.aa.tf(this.j.g.ic(a)),e=this.j.La(c),f=this.j.La(a);this.bq((e|f)+1);this.Gj[this.j.La(c)|this.j.La(a)]=!0;e=-1;1<this.j.g.ht.Aa&&(e=c);if(2==b&&2==d)return this.Ot(c,a,e);if(1==b&&0<d||1==d&&0<b)return this.Pt(e);if(0==b||
0==d)return this.mr();throw g.i.Qa();};l.prototype.Pz=function(c,a){var b=g.aa.tf(this.j.g.ic(c)),d=g.aa.tf(this.j.g.ic(a)),e=this.j.La(c),f=this.j.La(a);this.bq((e|f)+1);this.Gj[this.j.La(c)|this.j.La(a)]=!0;e=-1;1<this.j.g.ht.Aa&&(e=c);if(2==b&&2==d)return this.aY(c,a,e);if(1==b&&0<d||1==d&&0<b)return this.bY(e);if(0==b||0==d)return c=[],c[0]=this.mr(),c;throw g.i.Qa();};l.prototype.ep=function(c,a){var b=g.aa.tf(this.j.g.ic(c)),d=g.aa.tf(this.j.g.ic(a)),e=this.j.La(c),f=this.j.La(a);this.bq((e|
f)+1);this.Gj[this.j.La(c)]=!0;this.Gj[this.j.La(a)]=!0;if(2==b&&2==d)return this.Ot(c,a,-1);if(1==b&&1==d)return this.Pt(-1);if(0==b&&0==d)return this.mr();throw g.i.Qa();};l.Xe=function(c){var a=c.getType();return 197==a?(a=new g.Da(c.description),c.B()||a.ad(c,!1),a):33==a?(a=new g.de(c.description),c.B()||a.add(c),a):322==a?(a=new g.Ta(c.description),c.B()||a.oc(c,!0),a):c};l.ki=function(c,a,b){var d=c.getType();return 197==d?(a=new g.Da(c.description),c.B()||a.ad(c,!1),a):33!=d||"|"!=b&&"^"!=
b?322==d?(a=new g.Ta(c.description),c.B()||a.oc(c,!0),a):33==d&&"-"==b&&33==a.getType()||550==d&&"\x26"==b&&33==a.getType()?(a=new g.Sa(c.description),c.B()||c.ve(0,a),a):c:(a=new g.de(c.description),c.B()||a.add(c),a)};l.im=function(c,a,b,d){if(c.B()||a.B()||c.Db()>a.Db())return l.ki(l.Xe(c),c,"-");var e=new g.l;c.A(e);var f=new g.l;a.A(f);if(!e.isIntersecting(f))return l.ki(l.Xe(c),c,"-");var h=new g.l;h.K(e);h.Zb(f);b=g.ta.Wd(b,h,!0);f=new l;e=new g.gd;h=e.Ib(l.Xe(c));a=e.Ib(l.Xe(a));f.Ft(e,b,
d);d=f.im(h,a);d=e.Ne(d);c=l.ki(d,c,"-");g.aa.Hc(c.getType())&&(c.Ch(2,b),1736==c.getType()&&c.fm());return c};l.VP=function(c,a,b){if(2>c.length)throw g.i.N("not enough geometries to dissolve");for(var d=0,e=0,f=c.length;e<f;e++)d=Math.max(c[e].Db(),d);var h=new g.l;h.Oa();var k=new g.gd,m=-1,n=0,p=-1;e=0;for(f=c.length;e<f;e++)if(c[e].Db()==d)if(c[e].B())-1==p&&(p=e);else{p=e;-1==m?m=k.Ib(l.Xe(c[e])):k.uN(m,l.Xe(c[e]));var r=new g.l;c[e].xc(r);h.Zb(r);n++}if(2>n)return l.Xe(c[p]);c=2==d;a=g.ta.Wd(0==
d?a:null,h,!0);return(new l).Mk(k,m,a,c,!0,b)};l.Pz=function(c,a,b,d){var e=[null,null,null],f=new g.l;c.A(f);var h=new g.l;a.A(h);var k=new g.l;k.K(f);k.Zb(h);b=g.ta.Wd(b,k,!0);k=new g.l;k.K(h);h=g.ta.Er(b);k.W(h,h);if(!f.isIntersecting(k)){if(c.Db()<=a.Db())return c=l.ki(l.Xe(c.Ia()),c,"\x26"),e[c.Db()]=c,e;if(c.Db()>a.Db())return c=l.ki(l.Xe(a.Ia()),c,"\x26"),e[c.Db()]=c,e}h=new l;f=new g.gd;k=f.Ib(l.Xe(c));a=f.Ib(l.Xe(a));h.Ft(f,b,d);d=h.Pz(k,a);for(a=0;a<d.length;a++)h=l.ki(f.Ne(d[a]),c,"\x26"),
g.aa.Hc(h.getType())&&(h.Ch(2,b),1736==h.getType()&&h.fm()),e[h.Db()]=h;return e};l.ep=function(c,a,b,d){if(c.Db()>a.Db())return l.ki(l.Xe(c),c,"^");if(c.Db()<a.Db()||c.B())return l.ki(l.Xe(a),c,"^");if(a.B())return l.ki(l.Xe(c),c,"^");var e=new g.l;c.A(e);var f=new g.l;a.A(f);var h=new g.l;h.K(e);h.Zb(f);b=g.ta.Wd(b,h,!0);f=new l;e=new g.gd;h=e.Ib(l.Xe(c));a=e.Ib(l.Xe(a));f.Ft(e,b,d);d=f.ep(h,a);c=l.ki(e.Ne(d),c,"^");g.aa.Hc(c.getType())&&(c.Ch(2,b),1736==c.getType()&&c.fm());return c};l.prototype.LQ=
function(c,a){var b=this.j.g;c=b.vf(c,-1);for(var d=a.size,e=0;e<d;e++){var f=a.get(e);b.ij(c,f)}b.kn(c,!0)};l.prototype.aX=function(c,a){for(var b=this.j.g,d=b.ld;-1!=d;d=b.ue(d))if(d==a)for(var e=b.Ob(d);-1!=e;e=b.Rb(e)){var f=b.Xa(e);if(-1!=f)for(var h=b.U(f);-1!=h;){f=this.j.Le(f);var k=this.j.Le(h);f=this.j.tR(f,k);-1!=f&&(k=this.j.xa(f),this.j.Kb(f,c,1),this.j.Kb(k,c,2));f=h;h=b.U(f)}}};l.prototype.cW=function(c,a,b,d){b=this.j.La(b);d=this.j.La(d);var e=new g.ia(0);e.Jb(256);for(var f=this.j.g,
h=this.j.$g(),k=this.j.Re;-1!=k;k=this.j.Rf(k)){var m=this.j.Me(k);if(-1!=m){var n=m;do{if(1!=this.j.Ab(n,h)){var p=n,r=n,t=!1,x=0;do{this.j.Kb(p,h,1);if(!t){var K=this.j.dh(p);0!=(K&d)&&0!=(this.j.af(p)&b)&&(r=p,t=!0)}t&&(e.add(this.j.tj(this.j.km(this.j.jk(p)))),-1!=c&&(K=this.j.dh(p),0!=(K&d)&&(K=this.j.Ab(p,c),x|=K)));p=this.j.jc(p)}while(p!=r);t&&0<this.j.Kp(this.j.$e(r))&&(p=f.Ig(1736),this.LQ(p,e),-1!=a&&f.HJ(p,a,x));e.clear(!1)}n=this.j.jc(this.j.xa(n))}while(n!=m)}}this.j.Jg(h)};l.prototype.FP=
function(c,a,b,d){this.j.yW();var e=-1;-1!=c&&(e=this.j.$g(),this.aX(e,b));this.cW(e,c,a,b);-1!=e&&(this.j.Jg(e),e=-1);var f=this.j.g;c=0;for(e=f.ld;-1!=e;e=f.ue(e))e!=a&&e!=b&&(d.add(e),c++);d.Vd(0,c,function(h,k){h=f.wz(f.Ob(h));k=f.wz(f.Ob(k));return h<k?-1:h==k?0:1})};l.prototype.Ug=function(){null!=this.j&&(this.j.Ug(),this.j=null)};return l}();g.Fg=N})(ja||={});(function(g){var N=function(){function l(c){void 0!==c?this.setScale(c):this.RB()}l.prototype.lx=function(){this.Lb=this.Gb=this.jb=
this.eb=this.ab=this.bb=0};l.prototype.Nb=function(c){return this==c?!0:c instanceof l?this.bb==c.bb&&this.eb==c.eb&&this.Gb==c.Gb&&this.jb==c.jb&&this.ab==c.ab&&this.Lb==c.Lb:!1};l.prototype.cc=function(){g.O.uj();g.O.uj();g.O.uj();g.O.uj();g.O.uj();return g.O.uj()};l.prototype.Eh=function(c,a){var b=this.jb*c.x+this.ab*c.y+this.Lb;a.x=this.bb*c.x+this.eb*c.y+this.Gb;a.y=b};l.prototype.eY=function(c,a,b){for(var d=0;d<a;d++){var e=c[d].x,f=c[d].y,h=this.bb*e+this.eb*f+this.Gb;e=this.jb*e+this.ab*
f+this.Lb;null!=b[d]?b[d].ma(h,e):b[d]=g.h.construct(h,e)}};l.prototype.multiply=function(c){l.multiply(this,c,this)};l.multiply=function(c,a,b){var d=c.bb*a.bb+c.jb*a.eb,e=c.eb*a.bb+c.ab*a.eb,f=c.Gb*a.bb+c.Lb*a.eb+a.Gb,h=c.bb*a.jb+c.jb*a.ab,k=c.eb*a.jb+c.ab*a.ab;c=c.Gb*a.jb+c.Lb*a.ab+a.Lb;b.bb=d;b.eb=e;b.Gb=f;b.jb=h;b.ab=k;b.Lb=c};l.prototype.Of=function(){var c=new l;c.bb=this.bb;c.eb=this.eb;c.Gb=this.Gb;c.jb=this.jb;c.ab=this.ab;c.Lb=this.Lb;return c};l.prototype.mC=function(c){if(!c.B()){for(var a=
[],b=0;4>b;b++)a[b]=new g.h;c.nB(a);this.fY(a,a);c.Zw(a,4)}};l.prototype.fY=function(c,a){for(var b=0;b<c.length;b++){var d=new g.h,e=c[b];d.x=this.bb*e.x+this.eb*e.y+this.Gb;d.y=this.jb*e.x+this.ab*e.y+this.Lb;a[b]=d}};l.prototype.pS=function(c,a){c.B()||a.B()||0==c.R()||0==c.ca()?this.lx():(this.eb=this.jb=0,this.bb=a.R()/c.R(),this.ab=a.ca()/c.ca(),this.Gb=a.v-c.v*this.bb,this.Lb=a.G-c.G*this.ab)};l.prototype.dY=function(c){var a=new g.h,b=new g.h;a.ma(this.bb,this.jb);b.ma(this.eb,this.ab);a.sub(a);
var d=.5*a.Sk();a.ma(this.bb,this.jb);b.ma(this.eb,this.ab);a.add(b);a=.5*a.Sk();return c*(d>a?Math.sqrt(d):Math.sqrt(a))};l.prototype.RB=function(){this.bb=1;this.jb=this.Gb=this.eb=0;this.ab=1;this.Lb=0};l.prototype.isIdentity=function(c){if(void 0!==c){var a=g.h.construct(0,1);this.Eh(a,a);a.sub(g.h.construct(0,1));if(a.Sk()>c*c)return!1;a.ma(0,0);this.Eh(a,a);if(a.Sk()>c*c)return!1;a.ma(1,0);this.Eh(a,a);a.sub(g.h.construct(1,0));return a.Sk()<=c*c}return 1==this.bb&&1==this.ab&&0==this.eb&&0==
this.Gb&&0==this.jb&&0==this.Lb};l.prototype.Bi=function(c){return Math.abs(this.bb*this.ab-this.jb*this.eb)<=2*c*(Math.abs(this.bb*this.ab)+Math.abs(this.jb*this.eb))};l.prototype.gg=function(c,a){this.bb=1;this.eb=0;this.Gb=c;this.jb=0;this.ab=1;this.Lb=a};l.prototype.setScale=function(c,a){void 0!==a?(this.bb=c,this.jb=this.Gb=this.eb=0,this.ab=a,this.Lb=0):this.setScale(c,c)};l.prototype.$B=function(){this.bb=0;this.eb=1;this.Gb=0;this.jb=1;this.Lb=this.ab=0};l.prototype.setRotate=function(c){this.pX(Math.cos(c),
Math.sin(c))};l.prototype.pX=function(c,a){this.bb=c;this.eb=-a;this.Gb=0;this.jb=a;this.ab=c;this.Lb=0};l.prototype.shift=function(c,a){this.Gb+=c;this.Lb+=a};l.prototype.scale=function(c,a){this.bb*=c;this.eb*=c;this.Gb*=c;this.jb*=a;this.ab*=a;this.Lb*=a};l.prototype.flipX=function(c,a){this.bb=-this.bb;this.eb=-this.eb;this.Gb=c+a-this.Gb};l.prototype.flipY=function(c,a){this.jb=-this.jb;this.ab=-this.ab;this.Lb=c+a-this.Lb};l.prototype.rotate=function(c){var a=new l;a.setRotate(c);this.multiply(a)};
l.prototype.inverse=function(c){if(void 0!==c){var a=this.bb*this.ab-this.eb*this.jb;0==a?c.lx():(a=1/a,c.Gb=(this.eb*this.Lb-this.Gb*this.ab)*a,c.Lb=(this.Gb*this.jb-this.bb*this.Lb)*a,c.bb=this.ab*a,c.eb=-this.eb*a,c.jb=-this.jb*a,c.ab=this.bb*a)}else this.inverse(this)};return l}();g.Dd=N})(ja||={});(function(g){var N=function(){function l(){}l.prototype.lx=function(){this.hg=this.Lb=this.Gb=this.He=this.Fe=this.Ee=this.Ge=this.ab=this.eb=this.Ze=this.jb=this.bb=0};l.prototype.setScale=function(c,
a,b){this.bb=c;this.eb=this.Ze=this.jb=0;this.ab=a;this.Fe=this.Ee=this.Ge=0;this.He=b;this.hg=this.Lb=this.Gb=0};l.prototype.setTranslate=function(c,a,b){this.bb=1;this.eb=this.Ze=this.jb=0;this.ab=1;this.Fe=this.Ee=this.Ge=0;this.He=1;this.Gb=c;this.Lb=a;this.hg=b};l.prototype.translate=function(c,a,b){this.Gb+=c;this.Lb+=a;this.hg+=b};l.prototype.mC=function(c){if(!c.B()){for(var a=new g.Nd[8],b=0;8>b;b++)a[b]=new g.Nd;c.nB(a);this.transform(a,8,a);c.Zw(a)}};l.prototype.transform=function(c,a,
b){for(var d=0;d<a;d++){var e=new g.Nd,f=c[d];e.x=this.bb*f.x+this.eb*f.y+this.Ee*f.z+this.Gb;e.y=this.jb*f.x+this.ab*f.y+this.Fe*f.z+this.Lb;e.z=this.Ze*f.x+this.Ge*f.y+this.He*f.z+this.hg;b[d]=e}};l.prototype.fp=function(c){var a=new g.Nd;a.x=this.bb*c.x+this.eb*c.y+this.Ee*c.z+this.Gb;a.y=this.jb*c.x+this.ab*c.y+this.Fe*c.z+this.Lb;a.z=this.Ze*c.x+this.Ge*c.y+this.He*c.z+this.hg;return a};l.prototype.Ag=function(c){l.multiply(this,c,this)};l.multiply=function(c,a,b){var d=c.bb*a.bb+c.jb*a.eb+c.Ze*
a.Ee,e=c.bb*a.jb+c.jb*a.ab+c.Ze*a.Fe,f=c.bb*a.Ze+c.jb*a.Ge+c.Ze*a.He,h=c.eb*a.bb+c.ab*a.eb+c.Ge*a.Ee,k=c.eb*a.jb+c.ab*a.ab+c.Ge*a.Fe,m=c.eb*a.Ze+c.ab*a.Ge+c.Ge*a.He,n=c.Ee*a.bb+c.Fe*a.eb+c.He*a.Ee,p=c.Ee*a.jb+c.Fe*a.ab+c.He*a.Fe,r=c.Ee*a.Ze+c.Fe*a.Ge+c.He*a.He,t=c.Gb*a.bb+c.Lb*a.eb+c.hg*a.Ee+a.Gb,x=c.Gb*a.jb+c.Lb*a.ab+c.hg*a.Fe+a.Lb;c=c.Gb*a.Ze+c.Lb*a.Ge+c.hg*a.He+a.hg;b.bb=d;b.jb=e;b.Ze=f;b.eb=h;b.ab=k;b.Ge=m;b.Ee=n;b.Fe=p;b.He=r;b.Gb=t;b.Lb=x;b.hg=c};l.inverse=function(c,a){var b=c.bb*(c.ab*c.He-
c.Ge*c.Fe)-c.jb*(c.eb*c.He-c.Ge*c.Ee)+c.Ze*(c.eb*c.Fe-c.ab*c.Ee);if(0!=b){var d=1/b;b=(c.ab*c.He-c.Ge*c.Fe)*d;var e=-(c.eb*c.He-c.Ge*c.Ee)*d,f=(c.eb*c.Fe-c.ab*c.Ee)*d,h=-(c.jb*c.He-c.Fe*c.Ze)*d,k=(c.bb*c.He-c.Ze*c.Ee)*d,m=-(c.bb*c.Fe-c.jb*c.Ee)*d,n=(c.jb*c.Ge-c.Ze*c.ab)*d,p=-(c.bb*c.Ge-c.Ze*c.eb)*d;d*=c.bb*c.ab-c.jb*c.eb;var r=-(c.Gb*b+c.Lb*e+c.hg*f),t=-(c.Gb*h+c.Lb*k+c.hg*m);c=-(c.Gb*n+c.Lb*p+c.hg*d);a.bb=b;a.jb=h;a.Ze=n;a.eb=e;a.ab=k;a.Ge=p;a.Ee=f;a.Fe=m;a.He=d;a.Gb=r;a.Lb=t;a.hg=c}else throw g.i.fa("math singularity");
};l.prototype.Of=function(){var c=new l;c.bb=this.bb;c.jb=this.jb;c.Ze=this.Ze;c.eb=this.eb;c.ab=this.ab;c.Ge=this.Ge;c.Ee=this.Ee;c.Fe=this.Fe;c.He=this.He;c.Gb=this.Gb;c.Lb=this.Lb;c.hg=this.hg;return c};return l}();g.JY=N})(ja||={});(function(g){var N=function(c){function a(b){if(void 0!==b)b=c.call(this,b.cc(),b)||this;else{b=c.call(this)||this;b.bg=[];b.bg[0]=0;b.Aa=1;b.uh=[];for(var d=0;10>d;d++)b.uh[d]=-1;b.uh[b.bg[0]]=0}b.jq=!0;return b}qa(a,c);a.prototype.re=function(b){this.hasAttribute(b)||
(this.uh[b]=0,this.jD())};a.prototype.removeAttribute=function(b){if(0==b)throw g.i.N("Position attribue cannot be removed");this.hasAttribute(b)&&(this.uh[b]=-1,this.jD())};a.prototype.reset=function(){this.bg[0]=0;this.Aa=1;for(var b=0;b<this.uh.length;b++)this.uh[b]=-1;this.uh[this.bg[0]]=0;this.jq=!0};a.prototype.EF=function(){return l.kz().add(this)};a.og=function(){return l.kz().$R()};a.prototype.tM=function(){var b=this.cc();return new g.ra(b,this)};a.prototype.jD=function(){for(var b=this.Aa=
0,d=0;10>b;b++)0<=this.uh[b]&&(this.bg[d]=b,this.uh[b]=d,d++,this.Aa++);this.jq=!0};a.prototype.cc=function(){this.jq&&(this.wl=this.An(),this.jq=!1);return this.wl};a.prototype.Nb=function(b){if(null==b)return!1;if(b==this)return!0;if(!(b instanceof a)||b.Aa!=this.Aa)return!1;for(var d=0;d<this.Aa;d++)if(this.bg[d]!=b.bg[d])return!1;return this.jq!=b.jq?!1:!0};a.prototype.GG=function(b){if(b.Aa!=this.Aa)return!1;for(var d=0;d<this.Aa;d++)if(this.bg[d]!=b.bg[d])return!1;return!0};a.Iw=function(b,
d){for(var e=[],f=0;f<b.Aa;f++)e[f]=-1;f=0;for(var h=b.Aa;f<h;f++)e[f]=d.Pf(b.kd(f));return e};a.BR=function(b,d){b=new a(b);b.re(d);return b.EF()};a.CR=function(b,d){for(var e=null,f=0;10>f;f++)!b.hasAttribute(f)&&d.hasAttribute(f)&&(null==e&&(e=new a(b)),e.re(f));return null!=e?e.EF():b};return a}(g.ra);g.ee=N;var l=function(){function c(){this.map=[];var a=new N;this.add(a);a=new N;a.re(1);this.add(a)}c.kz=function(){return c.bL};c.prototype.$R=function(){return c.ft};c.prototype.add=function(a){var b=
a.cc();if(null!=c.ft&&c.ft.cc()==b&&a.GG(c.ft))return c.ft;if(null!=c.Dw&&c.Dw.cc()==b&&a.GG(c.Dw))return c.Dw;var d=null;void 0!==this.map[b]&&(d=this.map[b]);null==d&&(d=a.tM(),1==d.Aa?c.ft=d:2==d.Aa&&1==d.kd(1)?c.Dw=d:this.map[b]=d);return d};c.bL=new c;return c}()})(ja||={});var Ma={feet:9002,kilometers:9036,meters:9001,miles:9093,"nautical-miles":9030,yards:9096},Sa={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109439,
"square-yards":109442},Va=new (function(){function g(){this.RM=50;this.np=new Map;this.gj=[]}g.prototype.clear=function(){this.gj.length=0;this.np.clear()};g.prototype.delete=function(N){return this.np.delete(N)?(this.gj.splice(this.gj.indexOf(N),1),!0):!1};g.prototype.get=function(N){var l=this.np.get(N);if(void 0!==l)return this.gj[0]!==N&&(this.gj.splice(this.gj.indexOf(N),1),this.gj.unshift(N)),l};g.prototype.has=function(N){return this.np.has(N)};g.prototype.set=function(N,l){void 0!==this.get(N)&&
this.delete(N);this.gj.unshift(N);this.np.set(N,l);this.oM();return this};g.prototype.oM=function(){for(;this.gj.length&&this.gj.length>this.RM;){var N=this.gj.pop();this.np.delete(N)}};return g}()),Pa=(la={},la.convertJSONToGeometry=function(g){return ja.$b.fP(g)},la.hasM=function(g){return g.hasAttribute(ja.Ih.M)},la.hasZ=function(g){return g.hasAttribute(ja.Ih.Z)},la.getPointX=function(g){return g.Lg()},la.getPointY=function(g){return g.ih()},la.getPointZ=function(g){return g.bS()},la.getPointM=
function(g){return g.zR()},la.getXMin=function(g){return g.es()},la.getYMin=function(g){return g.gs()},la.getXMax=function(g){return g.ds()},la.getYMax=function(g){return g.fs()},la.getZExtent=function(g){return g.Tg(ja.Ih.Z,0)},la.getMExtent=function(g){return g.Tg(ja.Ih.M,0)},la.exportPaths=function(g){var N=[],l=g.da(),c=null,a=null,b=g.hasAttribute(ja.Ih.Z),d=g.hasAttribute(ja.Ih.M);b&&(c=g.ub(ja.Ih.Z));d&&(a=g.ub(ja.Ih.M));for(var e=new ja.h,f=0;f<l;f++){for(var h=g.Ba(f),k=g.Ja(f),m=0,n=0,p=
NaN,r=NaN,t=NaN,x=NaN,K=g.dc(f),ca=[],ha=h;ha<h+k;ha++){g.D(ha,e);x=t=NaN;var da=[e.x,e.y];b&&(t=c.get(ha),da.push(t));d&&(x=a.get(ha),da.push(x));ha==h&&K&&(m=e.x,n=e.y,p=t,r=x);ca.push(da)}!K||m==e.x&&n==e.y&&(!b||isNaN(p)&&isNaN(t)||p==t)&&(!d||isNaN(r)&&isNaN(x)||r==x)||ca.push(ca[0].slice(0));N.push(ca)}return N},la.exportPathsFlat=function(){},la.exportPoints=function(g){var N=g.hasAttribute(ja.Ih.Z),l=g.hasAttribute(ja.Ih.M),c=null,a=null;N&&(c=g.ub(ja.Ih.Z));l&&(a=g.ub(ja.Ih.M));for(var b=
new ja.h,d=g.I(),e=[],f=0;f<d;f++){g.D(f,b);var h=[b.x,b.y];N&&h.push(c.get(f));l&&h.push(a.get(f));e.push(h)}return e},la.exportPointsFlat=function(){},la),kb=new Map;return function(){function g(){}g.buffer=ea;g.clip=E;g.contains=H;g.convexHull=V;g.crosses=y;g.cut=I;g.densify=xa;g.difference=ia;g.disjoint=aa;g.distance=O;g.equals=U;g.extendedSpatialReferenceInfo=F;g.generalize=va;g.geodesicArea=Ka;g.geodesicBuffer=ba;g.geodesicDensify=ya;g.geodesicLength=Oa;g.intersect=ma;g.intersects=P;g.isSimple=
X;g.nearestCoordinate=Y;g.nearestVertex=fa;g.nearestVertices=pa;g.offset=J;g.overlaps=M;g.planarArea=Da;g.planarLength=Ca;g.relate=G;g.simplify=C;g.symmetricDifference=oa;g.touches=S;g.union=D;g.within=Z;g.rotate=ja.Ex.rotate;g.flipHorizontal=ja.Ex.JQ;g.flipVertical=ja.Ex.KQ;g.intersectLinesToPoints=Ia;g.ExtendedParams=ja.yC;g.clearDefaultSpatialReferenceTolerance=Fa;g.changeDefaultSpatialReferenceTolerance=Aa;g._enableProjection=Ba;g._project=ra;g._getTransformation=na;g._getTransformationBySuitability=
sa;return g}()}();void 0!==z&&(A.exports=z)})(v);v=v.exports;u=u.getDefaultExportFromCjs(v);v=function(A,z){for(var Q=0;Q<z.length;Q++){const w=z[Q];if("string"!==typeof w&&!Array.isArray(w))for(const L in w)if("default"!==L&&!(L in A)){const W=Object.getOwnPropertyDescriptor(w,L);W&&Object.defineProperty(A,L,W.get?W:{enumerable:!0,get:()=>w[L]})}}return Object.freeze(Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}))}({__proto__:null,default:u},[v]);q.GeometryEngineApi=u;q.geometryEngineBase=
v})},"esri/geometry/geometryAdapters/hydrated":function(){define("exports ../Extent ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(q,u,v,A,z,Q){q.hydratedAdapter={convertToGEGeometry:function(w,L){if(null==L)return null;let W="cache"in L?L.cache._geVersion:void 0;null==W&&(W=w.convertJSONToGeometry(L),"cache"in L&&(L.cache._geVersion=W));return W},exportPoint:function(w,L,W){const B=w.hasZ(L),R=w.hasM(L);W=new A({x:w.getPointX(L),y:w.getPointY(L),spatialReference:W});B&&(W.z=w.getPointZ(L));
R&&(W.m=w.getPointM(L));W.cache._geVersion=L;return W},exportPolygon:function(w,L,W){w=new z({rings:w.exportPaths(L),hasZ:w.hasZ(L),hasM:w.hasM(L),spatialReference:W});w.cache._geVersion=L;return w},exportPolyline:function(w,L,W){w=new Q({paths:w.exportPaths(L),hasZ:w.hasZ(L),hasM:w.hasM(L),spatialReference:W});w.cache._geVersion=L;return w},exportMultipoint:function(w,L,W){w=new v({hasZ:w.hasZ(L),hasM:w.hasM(L),points:w.exportPoints(L),spatialReference:W});w.cache._geVersion=L;return w},exportExtent:function(w,
L,W){var B=w.hasZ(L);const R=w.hasM(L);W=new u({xmin:w.getXMin(L),ymin:w.getYMin(L),xmax:w.getXMax(L),ymax:w.getYMax(L),spatialReference:W});B&&(B=w.getZExtent(L),W.zmin=B.vmin,W.zmax=B.vmax);R&&(w=w.getMExtent(L),W.mmin=w.vmin,W.mmax=w.vmax);W.cache._geVersion=L;return W}};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectPolylineToWGS84ComparableLonLat":function(){define(["exports","../../chunks/vec32","../../core/libs/gl-matrix-2/factories/vec3f64",
"./projectors"],function(q,u,v,A){const z=v.create();q.projectPolylineToWGS84ComparableLonLat=function({hasZ:Q,spatialReference:w,paths:L},W,B=0){w=A.getWGS84ComparableLonLatProjector(w);if(null==w)return!1;Q=Q?R=>R:R=>u.set(z,R[0],R[1],B);for(const R of L){L=[];for(const F of R){const E=[0,0,B];w(Q(F),0,E,0);L.push(E)}W.push(L)}return!0};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/projectVectorToWGS84ComparableLonLat":function(){define(["exports","../../core/libs/gl-matrix-2/factories/vec3f64",
"./projectors"],function(q,u,v){const A=u.create();q.projectVectorToWGS84ComparableLonLat=function(z,Q,w){if(null==Q)return!1;Q=v.getWGS84ComparableLonLatProjector(Q);if(null==Q)return!1;Q(z,0,A,0);w!==A&&(w[0]=A[0],w[1]=A[1],2<w.length&&(w[2]=A[2]));return!0};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/geodesicMeasurementUtils":function(){define(["exports","../../geometry/support/geodesicUtils","../../geometry/support/spatialReferenceUtils"],function(q,u,v){q.geodesicDistanceThreshold=
1E5;q.geodesicMeasure=function(A,z,Q,w,...L){return v.isGeographic(A)&&u.isSupported(A)?z.apply(void 0,L):v.isWebMercator(A)?Q.apply(void 0,L):w.apply(void 0,L)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../core/libs/gl-matrix-2/math/vec2 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../support/elevationInfoUtils ../sketch/normalizedPoint ./Settings ./SnappingAlgorithm ./snappingUtils ./candidates/ParallelLineSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R){class F extends w.SnappingAlgorithm{snapNewVertex(I,H){var y=H.editGeometryOperations.data.components[0],O=y.edges.length,U=y.vertices.length;const P=[];if(2>O)return P;const {view:S}=this,Z=B.vectorToScreenPoint(I,H.spatialReference,A.absoluteHeightElevationInfo,S);U=z.fromAnyMapPoint(y.vertices[U-1].pos,S,H);const aa=z.fromAnyMapPoint(y.vertices[0].pos,S,H);O=y=y.edges[O-1];do{if(this.edgeExceedsShortLineThreshold(O,H)){const M=L.editEdgeToSnappingEdge(O,S,H);this._checkEdgeForParallelLines(M,
U,I,Z,H,P);this._checkEdgeForParallelLines(M,aa,I,Z,H,P)}O=O.leftVertex.leftEdge}while(O&&O!==y);return P}snapExistingVertex(I,H){const y=[],O=H.vertexHandle;var U=O.component;if(3>U.edges.length)return y;const {view:P}=this,S=B.vectorToScreenPoint(I,H.spatialReference,A.absoluteHeightElevationInfo,P),Z=O.leftEdge,aa=O.rightEdge,M=U.vertices[0],G=z.fromAnyMapPoint(M.pos,P,H),X=U.vertices[U.vertices.length-1],C=z.fromAnyMapPoint(X.pos,P,H);let V=U=U.edges[0];do{if(V!==Z&&V!==aa&&this.edgeExceedsShortLineThreshold(V,
H)){const ia=L.editEdgeToSnappingEdge(V,P,H);Z&&this._checkEdgeForParallelLines(ia,z.fromAnyMapPoint(Z.leftVertex.pos,P,H),I,S,H,y);aa&&this._checkEdgeForParallelLines(ia,z.fromAnyMapPoint(aa.rightVertex.pos,P,H),I,S,H,y);O===M?this._checkEdgeForParallelLines(ia,C,I,S,H,y):O===X&&this._checkEdgeForParallelLines(ia,G,I,S,H,y)}V=V.rightVertex.rightEdge}while(V&&V!==U);return y}_checkEdgeForParallelLines(I,H,y,O,U,P){const S=I.left,Z=I.right;R.projectPointToLine(E,z.asVec2(H),z.asVec2(S),z.asVec2(Z));
if(!(u.squaredDistance(E,z.asVec2(H))<Q.defaults.parallelLineThreshold)){R.projectPointToLine(E,z.asVec2(y),z.asVec2(S),z.asVec2(Z),z.asVec2(H));var {spatialReference:aa,pointer:M}=U;y=z.fromValues(E[0],E[1],y[2]);L.squaredScreenDistance(O,B.vectorToScreenPoint(y,aa,A.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(M)&&!(this.isVertical(y,H,U)||this.isVertical(S,Z,U)||this._parallelToPreviousCandidate(I,P))&&P.push(new W.ParallelLineSnappingCandidate({referenceLine:I,lineStart:H,
targetPoint:y,isDraped:"on-the-ground"===U.elevationInfo?.mode}))}}_parallelToPreviousCandidate(I,H){const y=I.left,O=I.right;for(const U of H)if(R.projectPointToLine(E,z.asVec2(O),z.asVec2(U.constraint.start),z.asVec2(U.constraint.end),z.asVec2(y)),u.squaredDistance(E,z.asVec2(O))<Q.defaults.parallelLineThreshold)return U.addReferenceLine(I),!0;return!1}}const E=v.create();q.ParallelLineSnapper=F;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../sketch/constraints ../../sketch/normalizedPoint ../SnappingDomain ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/ParallelSnappingHint".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){class R extends L.SnappingCandidate{constructor({referenceLine:F,lineStart:E,targetPoint:I,isDraped:H}){const y=v.clone(E),{left:O,right:U}=F;u.subtract(y,u.add(y,y,U),O);super(I,new A.VerticalPlaneConstraint(E,z.fromVec3(y)),H,Q.SnappingDomain.SELF);this._referenceLines=[{edge:F,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new W.LineSnappingHint(w.LineSegmentHintType.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new B.ParallelSnappingHint(this.constraint.start,
this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(F=>new W.LineSnappingHint(w.LineSegmentHintType.REFERENCE,F.edge.left,F.edge.right,this.isDraped,this.domain,F.fadeLeft,F.fadeRight))]}addReferenceLine(F){const E={edge:F,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(I=>{u.exactEquals(F.right,I.edge.left)&&(I.fadeLeft=!1,E.fadeRight=!1);u.exactEquals(F.right,I.edge.right)&&(I.fadeRight=!1,E.fadeRight=!1);u.exactEquals(F.left,I.edge.right)&&(I.fadeRight=!1,E.fadeLeft=
!1);u.exactEquals(F.left,I.edge.left)&&(I.fadeLeft=!1,E.fadeLeft=!1)});this._referenceLines.push(E)}}q.ParallelLineSnappingCandidate=R;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../core/has ../../../../core/Logger ../../../../chunks/vec32 ../SnappingDomain ./SnappingHint".split(" "),function(q,u,v,A,z,Q){class w extends Q.SnappingHint{constructor(L,W,B,R=z.SnappingDomain.ALL){super(B,
R);this.lineStart=L;this.lineEnd=W}equals(L){return L instanceof w?A.exactEquals(this.lineStart,L.lineStart)&&A.exactEquals(this.lineEnd,L.lineEnd):!1}}q.ParallelSnappingHint=w;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../core/Cyclical ../../../core/quantityUtils ../../../core/libs/gl-matrix-2/math/vec2 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../chunks/vec32 ../../../core/libs/gl-matrix-2/factories/vec3f64 ../../../support/elevationInfoUtils ../sketch/constraints ../sketch/normalizedPoint ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleSnappingCandidate ../support/viewUtils ../../support/angularMeasurementUtils ../../support/geodesicLengthMeasurementUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y){class O extends R.SnappingAlgorithm{snapNewVertex(S,Z){var aa=Z.editGeometryOperations.data.components[0];const M=[];if(2>aa.vertices.length)return M;var {view:G}=this;G=I.vectorToScreenPoint(S,Z.spatialReference,L.absoluteHeightElevationInfo,G);const X=aa.vertices.at(-1);this._checkForSnappingCandidate(M,X.leftEdge,X,X.leftEdge.leftVertex,S,G,Z);aa=aa.vertices[0];this._checkForSnappingCandidate(M,aa.rightEdge,aa,aa.rightEdge.rightVertex,S,G,Z);return M}snapExistingVertex(S,
Z){const aa=[];var M=Z.vertexHandle;if(3>M.component.vertices.length)return aa;var {view:G}=this;G=I.vectorToScreenPoint(S,Z.spatialReference,L.absoluteHeightElevationInfo,G);var X=M.leftEdge;M=M.rightEdge;X?.leftVertex.leftEdge&&(X=X.leftVertex.leftEdge,this._checkForSnappingCandidate(aa,X,X.rightVertex,X.leftVertex,S,G,Z));M?.rightVertex.rightEdge&&(M=M.rightVertex.rightEdge,this._checkForSnappingCandidate(aa,M,M.leftVertex,M.rightVertex,S,G,Z));return aa}_checkForSnappingCandidate(S,Z,aa,M,G,X,
C){this.edgeExceedsShortLineThreshold(Z,C)&&(Z=this.view,aa=B.fromAnyMapPoint(aa.pos,Z,C),M=B.fromAnyMapPoint(M.pos,Z,C),this._checkForSnappingCandidateNormalized(S,M,aa,G,X,C))}_checkForSnappingCandidateNormalized(S,Z,aa,M,G,X){this._projectionRay(P,Z,aa,M,X);this._checkForSnappingCandidateAlongProjectedRay(S,Z,aa,P,M,G,X)}_projectionRay(S,Z,aa,M,G){this._projectionRayGeodesic(S,Z,aa,M,G)||this._projectionRayPlanar(S,Z,aa)}_projectionRayGeodesic(S,Z,aa,M,{spatialReference:G}){Z=H.radiansGeographicBetweenVec(Z,
aa,G,G);if(null==Z)return!1;var X=H.radiansGeographicBetweenVec(aa,M,G,G);if(null==X)return!1;X=Math.sign(u.cyclical2PI.shortestSignedDiff(Z,X))*Math.PI*.5;Z=v.createAngle(Z+X,"radians","geographic");X=w.create();M=y.geodesicDistance(aa,M,G);if(null==M)return!1;H.pointFromDistanceAlongAzimuth(X,aa,G,v.valueInUnit(M,"meters"),Z,"geodesic");Q.subtract(S,X,aa);return!0}_projectionRayPlanar(S,Z,aa){Z=A.subtract(U,B.asVec2(aa),B.asVec2(Z));Q.set(S,Z[1],-Z[0],0)}_checkForSnappingCandidateAlongProjectedRay(S,
Z,aa,M,G,X,C){const {spatialReference:V,pointer:ia}=C;var oa=A.subtract(U,B.asVec2(G),B.asVec2(aa));oa=A.dot(M,oa)/A.squaredLength(M);const ma=A.scaleAndAdd(U,B.asVec2(aa),M,oa);G=B.fromValues(ma[0],ma[1],G[2]);F.squaredScreenDistance(X,I.vectorToScreenPoint(G,V,L.absoluteHeightElevationInfo,this.view))>this.squaredProximityThreshold(ia)||this.isVertical(G,aa,C)||this.isVertical(aa,Z,C)||(M=Q.scaleAndAdd(w.create(),aa,M,Math.sign(oa)),S.push(new E.RightAngleSnappingCandidate({targetPoint:G,constraint:new W.VerticalHalfPlaneConstraint(aa,
B.fromVec3(M)),previousVertex:Z,otherVertex:aa,otherVertexType:E.OtherVertexType.CENTER,isDraped:"on-the-ground"===C.elevationInfo?.mode})))}}const U=z.create(),P=w.create();q.RightAngleSnapper=O;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../core/libs/gl-matrix-2/math/vec2 ../../../core/libs/gl-matrix-2/factories/vec2f64 ../../../support/elevationInfoUtils ../sketch/normalizedPoint ./SnappingAlgorithm ./snappingUtils ./candidates/RightAngleTriangleSnappingCandidate ../support/viewUtils ../../support/geometry2dUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){class R extends Q.SnappingAlgorithm{snapNewVertex(E,I){var H=I.editGeometryOperations.data.components[0];const y=[];var O=H.vertices.length;if("polygon"!==I.editGeometryOperations.data.type||2>O)return y;var {view:U}=this;O=H.vertices[O-1];H=z.fromAnyMapPoint(H.vertices[0].pos,U,I);U=z.fromAnyMapPoint(O.pos,U,I);this._processCandidateProposal(H,U,E,I,y);return y}snapExistingVertex(E,I){const H=[];var y=I.vertexHandle,O=y.component;if(2>O.edges.length||"polyline"===I.editGeometryOperations.data.type&&
(0===y.index||y.index===O.vertices.length-1))return H;const {view:U}=this;O=z.fromAnyMapPoint(y.leftEdge.leftVertex.pos,U,I);y=z.fromAnyMapPoint(y.rightEdge.rightVertex.pos,U,I);this._processCandidateProposal(O,y,E,I,H);return H}_processCandidateProposal(E,I,H,y,O){if(this.exceedsShortLineThreshold(E,I,y)){var U=u.lerp(F,z.asVec2(E),z.asVec2(I),.5),P=.5*u.distance(z.asVec2(E),z.asVec2(I));U=B.projectPointToCircle(F,z.asVec2(H),U,P);U=z.fromValues(U[0],U[1],H[2]);var {spatialReference:S,pointer:Z}=
y;H=W.vectorToScreenPoint(H,S,A.absoluteHeightElevationInfo,this.view);w.squaredScreenDistance(H,W.vectorToScreenPoint(U,S,A.absoluteHeightElevationInfo,this.view))<this.squaredProximityThreshold(Z)&&!this.isVertical(E,U,y)&&!this.isVertical(U,I,y)&&O.push(new L.RightAngleTriangleSnappingCandidate({targetPoint:U,point1:E,point2:I,isDraped:"on-the-ground"===y.elevationInfo?.mode}))}}}const F=v.create();q.RightAngleTriangleSnapper=R;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../core/libs/gl-matrix-2/math/vec2 ../../../../chunks/vec32 ../../../../core/libs/gl-matrix-2/factories/vec3f64 ../../sketch/constraints ../../sketch/normalizedPoint ../SnappingDomain ../snappingUtils ./SnappingCandidate ../hints/LineSnappingHint ../hints/RightAngleSnappingHint".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R){class F extends W.SnappingCandidate{constructor({targetPoint:E,point1:I,point2:H,isDraped:y}){super(E,new z.VerticalCylinderConstraint(Q.fromVec3(v.lerp(A.create(),I,H,.5)),.5*u.distance(Q.asVec2(I),Q.asVec2(H))),y,w.SnappingDomain.SELF);this._p1=I;this._p2=H}get hints(){return[new B.LineSnappingHint(L.LineSegmentHintType.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new B.LineSnappingHint(L.LineSegmentHintType.REFERENCE,this.targetPoint,this._p2,this.isDraped,
this.domain),new R.RightAngleSnappingHint(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}}q.RightAngleTriangleSnappingCandidate=F;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./FeatureSnappingLayerSource ./Settings".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){u=class extends u{constructor(R){super(R);this.forceDisabled=this.enabledToggled=this.enabled=!1;this.featureEnabled=this.selfEnabled=!0;this.featureSources=new v;this.distance=B.defaults.distance;this.touchSensitivityMultiplier=B.defaults.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&
this.featureEnabled}};q.__decorate([A.property()],u.prototype,"enabled",void 0);q.__decorate([A.property()],u.prototype,"enabledToggled",void 0);q.__decorate([A.property()],u.prototype,"forceDisabled",void 0);q.__decorate([A.property()],u.prototype,"selfEnabled",void 0);q.__decorate([A.property()],u.prototype,"featureEnabled",void 0);q.__decorate([A.property({type:v.ofType(W)})],u.prototype,"featureSources",void 0);q.__decorate([A.property()],u.prototype,"distance",void 0);q.__decorate([A.property()],
u.prototype,"touchSensitivityMultiplier",void 0);q.__decorate([A.property({readOnly:!0})],u.prototype,"effectiveEnabled",null);q.__decorate([A.property({readOnly:!0})],u.prototype,"effectiveSelfEnabled",null);q.__decorate([A.property({readOnly:!0})],u.prototype,"effectiveFeatureEnabled",null);return u=q.__decorate([L.subclass("esri.views.interactive.snapping.SnappingOptions")],u)})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../sketch/constraints",
"../SnappingDomain","./SnappingCandidate","../hints/IntersectionSnappingHint"],function(q,u,v,A,z){class Q extends A.SnappingCandidate{constructor(w,L,W,B){super(w,new u.PointConstraint(w),B,v.SnappingDomain.ALL);this.first=L;this.second=W}get hints(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new z.IntersectionSnappingHint(this.targetPoint,this.isDraped,this.domain)]}}q.IntersectionSnappingCandidate=Q;Object.defineProperty(q,
Symbol.toStringTag,{value:"Module"})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/vec32","../SnappingDomain","./SnappingHint"],function(q,u,v,A){class z extends A.SnappingHint{constructor(Q,w,L=v.SnappingDomain.ALL){super(w,L);this.intersectionPoint=Q}equals(Q){return Q instanceof z?u.exactEquals(this.intersectionPoint,Q.intersectionPoint):!1}}q.IntersectionSnappingHint=z;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},
"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/tslib.es6 ../../../core/compilerUtils ../../../core/Evented ../../../core/accessorSupport/decorators/property ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(q,u,v,A,z,Q,w,L){q.OperationHandle=class extends A.EventedAccessor{constructor(W){super(W);this.cancelled=!1;this.history={undo:[],redo:[]};this.type=null}get tool(){if(!this.activeComponent)return null;
switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";case "draw-2d":case "draw-3d":return this.activeComponent.geometryType;default:v.neverReached(this.activeComponent)}return null}addToHistory(W){this.history.redo=[];this.history.undo.push(W)}resetHistory(){this.history.redo=[];this.history.undo=[]}canUndo(){return 0<this.history.undo.length}canRedo(){return 0<this.history.redo.length}complete(){this._reset();
this.onEnd();this.emit("complete")}cancel(){this.cancelled=!0;this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){const W=this.activeComponent;W&&("box"!==W.type&&"reshape"!==W.type&&"graphic-mover"!==W.type||W.refresh())}set undo(W){this._set("undo",()=>{this.canUndo()&&W()})}set redo(W){this._set("redo",()=>{this.canRedo()&&W()})}};u.__decorate([z.property()],q.OperationHandle.prototype,"activeComponent",void 0);u.__decorate([z.property()],q.OperationHandle.prototype,"cancelled",
void 0);u.__decorate([z.property()],q.OperationHandle.prototype,"history",void 0);u.__decorate([z.property()],q.OperationHandle.prototype,"tool",null);u.__decorate([z.property()],q.OperationHandle.prototype,"type",void 0);u.__decorate([z.property()],q.OperationHandle.prototype,"canUndo",null);u.__decorate([z.property()],q.OperationHandle.prototype,"canRedo",null);u.__decorate([z.property()],q.OperationHandle.prototype,"onEnd",void 0);u.__decorate([z.property()],q.OperationHandle.prototype,"undo",
null);u.__decorate([z.property()],q.OperationHandle.prototype,"redo",null);u.__decorate([z.property()],q.OperationHandle.prototype,"toggleTool",void 0);u.__decorate([z.property()],q.OperationHandle.prototype,"addToSelection",void 0);u.__decorate([z.property()],q.OperationHandle.prototype,"removeFromSelection",void 0);q.OperationHandle=u.__decorate([L.subclass("esri.widgets.Sketch.support.OperationHandle")],q.OperationHandle);q.CreateOperationHandle=class extends q.OperationHandle{};u.__decorate([z.property()],
q.CreateOperationHandle.prototype,"activeComponent",void 0);q.CreateOperationHandle=u.__decorate([L.subclass("esri.widgets.Sketch.support.CreateOperationHandle")],q.CreateOperationHandle);q.UpdateOperationHandle=class extends q.OperationHandle{};u.__decorate([z.property()],q.UpdateOperationHandle.prototype,"activeComponent",void 0);q.UpdateOperationHandle=u.__decorate([L.subclass("esri.widgets.Sketch.support.UpdateOperationHandle")],q.UpdateOperationHandle);Object.defineProperty(q,Symbol.toStringTag,
{value:"Module"})})},"esri/widgets/Editor/UpdateWorkflow":function(){define("../../chunks/tslib.es6 ../../Graphic ../../core/Error ../../core/handleUtils ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/reactiveUtils ../../core/SetUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/editableLayers ../../layers/support/layerUtils ../../views/draw/support/HighlightHelper ./CreateFeaturesWorkflow ./UpdateFeatureWorkflow ./UpdateRecordWorkflow ./UpdateWorkflowData ./Workflow ./workflowUtils ../Feature/support/featureUtils ../support/templateUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G,X){var C;F=C=class extends aa{constructor(ia){super(ia);this._workflowStack=new L(B.last);this._sketchStack=new L(B.last);this.type="update"}get activeEditableItem(){return this.activeWorkflow?.data.editableItem??void 0}get activeFeatureFormViewModel(){return this.activeWorkflow?.featureFormViewModel}get activeSketchViewModel(){return this._sketchStack.peek()?.viewModel}get activeWorkflow(){return this._workflowStack.last()}get nestedWorkflowCount(){return this._workflowStack.length}get shouldShowAttachments(){return!!this.activeEditableItem?.attachmentsOnUpdateEnabled}get shouldAllowAttachmentEditing(){return!!this.activeEditableItem?.supports.includes("update")}get hasPendingEdits(){return Array.from(this._workflowStack).some(ia=>
ia.hasPendingEdits)}get helpMessage(){return this.activeWorkflow?.helpMessage?this.activeWorkflow.helpMessage:"awaiting-feature-to-update"===this.stepId?"select":void 0}get reliesOnOwnerAdminPrivileges(){return this.activeWorkflow?.reliesOnOwnerAdminPrivileges??!1}get hasInvalidFormTemplate(){return!!this.activeEditableItem?.hasInvalidFormTemplate}get hasUnsupportedFields(){return!!this.activeEditableItem?.hasUnsupportedFields}async back(ia=()=>Promise.resolve(!0)){const {activeWorkflow:oa}=this;
if(null!=oa?.featureFormViewModel.relationshipId)oa.featureFormViewModel.relationshipId=null;else if(oa){if(!oa.hasPendingEdits||await ia())oa.hasPreviousStep?await oa.previous({cancelCurrentStep:!0}):await this.cancelActiveWorkflow({force:!0})}else this.hasPreviousStep?await this.previous({cancelCurrentStep:!0}):await this.cancel({force:!0})}async cancelActiveWorkflow(ia){await this.activeWorkflow?.cancel(ia);await this._popWorkflow()}async commit(){await this._drainWorkflowStack(ia=>ia.commit());
await super.commit()}static create(ia){const {viewModel:oa,startAt:ma,addAttachmentsCallback:D,applyEditsCallback:J}=ia;ia=new C({data:new Z({addAttachmentsCallback:D,applyEditsCallback:J,viewModel:oa}),onCommit:async()=>{}});ia._set("steps",this._createWorkflowSteps(ia,ma));return ia}async save(){1<this.nestedWorkflowCount?(await this.activeWorkflow?.commit(),await this._popWorkflow()):await this.commit()}async startCreatingRelatedRecord(ia){try{const oa=await this._createNestedCreateFeaturesWorkflow(ia);
await this._pushWorkflow(oa)}catch(oa){throw new v("editor:unable-to-start-creating","Could not begin updating the provided feature or table record.",{error:oa});}}async startUpdating(ia){try{const oa=await this._createNestedUpdateWorkflow(ia);await this._pushWorkflow(oa)}catch(oa){throw new v("editor:unable-to-start-updating","Could not begin updating the provided feature or table record.",{error:oa});}}async deleteActiveFeature(){const {activeWorkflow:ia}=this;if(!ia)throw new v("editor:nothing-to-delete",
"There is no feature to delete");ia&&/update-/.test(ia.type)?await ia.deleteAndCommit():await ia.cancel();1===this.nestedWorkflowCount?await this.reset():await this._popWorkflow()}async cancelAll(){await this._drainWorkflowStack(ia=>ia.cancel({force:!0}))}async _createNestedCreateFeaturesWorkflow(ia){const {relatedLayer:oa}=ia,{addAttachmentsCallback:ma,applyEditsCallback:D,viewModel:J}=this.data;if(!H.isEditableLayer(oa))throw new v("editor:unsupported-layer","Editing is not supported on the provided layer");
ia=this._getCreationInfoForNestedCreateFeaturesWorkflow(ia);return U.create({addAttachmentsCallback:ma,applyEditsCallback:D,creationInfo:ia,isNested:!0,parent:"create-features"!==this.activeWorkflow?.type?this.activeWorkflow:void 0,startAt:ia.template||ia.initialFeature?"creating-features":"awaiting-feature-creation-info",viewModel:J})}_getCreationInfoForNestedCreateFeaturesWorkflow(ia){const {relatedLayer:oa}=ia;if(!H.isEditableLayer(oa)||y.isSubtypeGroupLayer(oa))throw new v("editor:unsupported-layer",
"Editing is not supported on the provided layer");const ma={layer:oa,maxFeatures:1};ia=this._makeRelatedRecordAttributes(ia);const D=X.getAllTemplatesForLayer(oa);0<D?.length?(ma.attributeOverrides=ia,1===D.length&&(ma.template=D[0])):ma.initialFeature=new u({sourceLayer:oa,attributes:ia});return ma}async _createNestedUpdateWorkflow(ia){const oa=y.isTable(ia.sourceLayer)?S.UpdateRecordWorkflow:P.UpdateFeatureWorkflow,{applyEditsCallback:ma,viewModel:D}=this.data,J=await oa.create({feature:ia,parent:"create-features"!==
this.activeWorkflow?.type?this.activeWorkflow:void 0,viewModel:D,applyEdits:ma,relatedRecordCallbacks:{addRelatedRecord:async ea=>await this.startCreatingRelatedRecord(ea),editRelatedRecord:async({relatedFeature:ea})=>await this.startUpdating(ea)}});await W.whenOnce(()=>!J.updating);return J}async _drainWorkflowStack(ia){const oa=this._workflowStack,ma=[];for(;0<oa.length;){const D=oa.pop();this._sketchStack.pop();const J=ia(D).then(()=>D.destroy());this._updatingHandles.addPromise(J);ma.push(J)}await Promise.all(ma)}_makeRelatedRecordAttributes(ia){const {parentFeature:oa,
relatedLayer:ma,relationshipId:D}=ia;if(G.isGraphicForRelatableFeatureSupportedLayer(oa))if(ia=ma.relationships?.find(ea=>ea.id===D))if("origin"===ia.role)V("unsupported-role","Creating new related records in the 'origin' table of a relationship is not yet supported");else{var J=oa.sourceLayer;ia.relatedTableId!==J.layerId&&V("invalid-argument-combination","The given parent feature does not belong to the relationship designated by the given relationship ID.");if(J=J.relationships?.find(ea=>ea.id===
D))return(J=oa.getAttribute(J.keyField))||V("no-key-on-origin-feature","The given parent feature does not have a value for the relationship's origin primary key field."),{[ia.keyField]:J};V("relationship-not-found","Could not begin creating a related record because the relationship specified could not be found on the origin layer.")}else V("relationship-not-found","Could not begin creating a related record because the relationship specified could not be found on the destination layer.")}async _popWorkflow(){this._workflowStack.pop()?.destroy();
this._sketchStack.pop();const ia=await this._reconcileWorkflowStack();if(0<ia.failureCount)throw new v("editor:next-workflow-failed","Popped the top workflow, but the next workflow in the stack failed to activate",ia);}async _pushWorkflow(ia){var oa=this._workflowRequiresSketchViewModel(ia);this.activeWorkflow?.exit({removeSketchHandles:oa});oa=this._sketchStack;const ma=await ia?.start(),D=oa.peek();ma?(D?.exit(),oa.push(ma)):oa.push(this._cloneSketchController(D));this._workflowStack.push(ia);ia=
await this._reconcileWorkflowStack();if(0<ia.failureCount)throw new v("editor:failed-to-start-updating-feature","Failed to enter the provided workflow.",ia);}async _reconcileWorkflowStack(){const ia=this._workflowStack,oa=this._sketchStack;try{const ma=ia.peek();await ma?.enter();await oa.peek()?.enter();return{activeWorkflow:ma,failureCount:0}}catch(ma){ia.pop().destroy();oa.pop();const {activeWorkflow:D,failureCount:J}=await this._reconcileWorkflowStack();return{activeWorkflow:D,failureCount:J+
1}}}_cloneSketchController(ia){return{enter:ia?.enter??(async()=>{}),exit:ia?.exit??(async()=>{}),viewModel:ia?.viewModel}}_workflowRequiresSketchViewModel(ia){const {type:oa}=ia;return"update-feature"===oa||"create-features"===oa&&!y.isTable(ia.data.creationInfo?.layer)}static _createWorkflowSteps(ia,oa="awaiting-feature-to-update"){const {data:ma}=ia;return M.createWorkflowSteps(["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],
oa,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",async setUp(){const {spinnerViewModel:D}=ma.viewModel,J=ma.viewModel.view;let ea=null;ia.addHandles(A.makeHandle(()=>{ea=Q.abortMaybe(ea)}),this.id);ma.rootFeature=null;ma.candidates=[];const ba=J.on("immediate-click",async T=>{T.stopPropagation();D.location=T.mapPoint;D.visible=!0;ea?.abort();const {editableItems:Y}=ma.viewModel;ea=new AbortController;const fa=await new Promise((pa,va)=>{w.onAbort(ea?.signal,()=>va(w.createAbortError()));
pa(M.fetchCandidates(Y,J,T,ea?.signal))});w.throwIfAborted(ea);ma.candidates=fa.filter(pa=>"fulfilled"===pa.status).flatMap(pa=>pa.value);D.visible=1===ma.candidates.length;0!==ma.candidates.length&&(1===ma.candidates.length?(ma.rootFeature=ma.candidates[0],ia.go("editing-existing-feature").catch(()=>{}).then(()=>D.visible=!1)):ia.next())});J.focus();ia.addHandles(ba,this.id)},async tearDown(){0===ma.candidates.length&&(ma.viewModel.spinnerViewModel.visible=!1);ia.removeHandles(this.id)}}),"awaiting-update-feature-candidate":()=>
({id:"awaiting-update-feature-candidate",async setUp(){ma.rootFeature=null;const {view:D}=ma.viewModel;if(D){var J=new O({view:D});ia.addHandles([W.watch(()=>ma.rootFeature,(ea,ba)=>{J.remove(ba);J.add(ea)},W.sync),A.makeHandle(()=>J.removeAll())],this.id)}},async tearDown(){ia.removeHandles(this.id)}}),"editing-existing-feature":()=>({id:"editing-existing-feature",async setUp(){const {rootFeature:D,viewModel:J}=ia.data;if(!D)throw new v("editor:no-feature-specified","Cannot setup the 'updating-existing-feature' step until the root feature is defined");
await ia.startUpdating(D);J.spinnerViewModel.visible=!1;const ea=w.debounce(async()=>{await W.whenOnce(()=>!ia.updating);ia.previous()});ia.addHandles([W.watch(()=>ia.nestedWorkflowCount,(ba,T)=>{0===ba&&0!==T&&ea()},W.sync)],this.id)},async tearDown(){await ia.cancelAll();ia.removeHandles(this.id)}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){ma.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",
parent:"editing-existing-feature",async setUp(){},async tearDown(){ma.viewModel.attachmentsViewModel.mode="view"}})})}};q.__decorate([R.property()],F.prototype,"activeEditableItem",null);q.__decorate([R.property()],F.prototype,"activeFeatureFormViewModel",null);q.__decorate([R.property()],F.prototype,"activeSketchViewModel",null);q.__decorate([R.property()],F.prototype,"activeWorkflow",null);q.__decorate([R.property()],F.prototype,"nestedWorkflowCount",null);q.__decorate([R.property()],F.prototype,
"shouldShowAttachments",null);q.__decorate([R.property()],F.prototype,"shouldAllowAttachmentEditing",null);q.__decorate([R.property()],F.prototype,"hasPendingEdits",null);q.__decorate([R.property()],F.prototype,"helpMessage",null);q.__decorate([R.property()],F.prototype,"reliesOnOwnerAdminPrivileges",null);q.__decorate([R.property()],F.prototype,"hasInvalidFormTemplate",null);q.__decorate([R.property()],F.prototype,"hasUnsupportedFields",null);F=C=q.__decorate([I.subclass("esri.widgets.Editor.UpdateWorkflow")],
F);const V=(ia,oa)=>z.getLogger("esri.widgets.Editor.UpdateWorkflow").warn(`editor:${ia}`,oa,"The create operation will be allowed to proceed, but the resulting feature may not be related to the given parent feature.");return F})},"esri/views/draw/support/HighlightHelper":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./layerUtils ../../support/layerViewUtils ../../../widgets/Feature/support/featureUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){u=class extends u{constructor(R){super(R);this.view=null}add(R){R=!R||Array.isArray(R)?R:[R];R?.length&&R.forEach(F=>this._highlight(F))}remove(R){R=!R||Array.isArray(R)?R:[R];R?.length&&R.forEach(F=>this._removeHighlight(F))}removeAll(){this.removeAllHandles()}_highlight(R){const F=L.findLayerView(this.view,R.layer);W.highlightsSupported(F)&&this.addHandles(F.highlight(R),B.getHighlightKeyForFeature(R))}_removeHighlight(R){R&&this.removeHandles(B.getHighlightKeyForFeature(R))}};
q.__decorate([v.property()],u.prototype,"view",void 0);return u=q.__decorate([w.subclass("esri.views.draw.support.HighlightHelper")],u)})},"esri/views/support/layerViewUtils":function(){define(["exports"],function(q){q.extractSafeScaleBounds=function(u){u=u.effectiveScaleRange;return{minScale:u?.minScale??0,maxScale:u?.maxScale??0}};q.highlightsSupported=function(u){return u&&"function"===typeof u.highlight};q.isScaleRangeActive=function(u,v){return null!=u&&0<u||null!=v&&0<v};q.isSelectableLayerView2D=
function(u){return null!=u&&"object"===typeof u&&"createQuery"in u&&"queryFeatures"in u&&"layer"in u&&"view"in u};q.occludeesSupported=function(u){return u&&"function"===typeof u.maskOccludee};q.scaleBoundsPredicate=function(u,v,A){return null==u||u>A&&(0===v||u<v)};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/UpdateFeatureWorkflow":function(){define("exports ../../chunks/tslib.es6 ../../core/Error ../../core/handleUtils ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/GraphicsLayer ../../views/support/layerViewUtils ./UpdateFeatureWorkflowData ./UpdateRecordWorkflow ./workflowUtils ../Sketch/SketchViewModel".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O){var U;const P={...H.handleKeys,highlights:Symbol(),sketchGraphics:Symbol(),sketchViewModel:Symbol()};q.UpdateFeatureWorkflow=U=class extends H.UpdateRecordWorkflow{constructor(S){super(S);this.type="update-feature";this._sketchViewModel=this._sketchGraphicClone=this._layerViewEditSession=null;this._webStyleCache=new Map}initialize(){const {edits:{feature:S},layerView:Z}=this.data;y.canCreateInteractiveEditSession(Z)&&(this._layerViewEditSession=Z.createInteractiveEditSession(S))}destroy(){this._layerViewEditSession?.rollback()}async commit(){this.removeHandles(P.sketchGraphics);
try{const S=this.data.edits.stagedForDelete;await super.commit();const Z=this._layerViewEditSession;S?Z?.rollback():Z?.commit()}catch(S){throw await this._configureSketchViewModel(),new v("editor-workflow:failed-to-commit","An error occurred when sending the updates to the service",{error:S});}}async start(){await super.start();return await this._initializeSketchViewModel()}_initializeFeatureFormViewModel(){super._initializeFeatureFormViewModel();this.addHandles(this._featureFormViewModel.on("value-change",
S=>{this._layerViewEditSession?.setAttribute(S.fieldName,S.value)}))}_configureHighlight(){const {edits:S,layerView:Z}=this.data;E.highlightsSupported(Z)&&this.addHandles(Z.highlight(S.feature),P.highlights)}async _configureSketchViewModel(){var S=this._sketchViewModel;if(S){var {data:Z,_featureFormViewModel:aa,_sketchGraphicClone:M}=this,{edits:G,viewModel:X}=Z,C=G.feature,{view:V}=X,ia=y.getVisualVariableAttributes(C);S=await y.setUpGeometryUpdate({feature:C,featureClone:M,visualVariableAttributes:ia,
sketchViewModel:S,view:V,onUpdate:({geometry:oa,attributes:ma},D)=>{G.updateAttributes(ma);G.updateGeometry(oa);aa.feature.geometry=oa;null!=ia.rotation&&({field:oa}=ia.rotation,aa.setValue(oa,ma[oa]));null!=ia.size&&({field:oa}=ia.size,aa.setValue(oa,ma[oa]));("undo"===D.type||"redo"===D.type||"update"===D.type&&null!=D.toolEventInfo&&y.isTerminalUpdateEventType(D.toolEventInfo.type))&&aa.notifyFeatureGeometryChanged()},webStyleCache:this._webStyleCache});this.addHandles(S,P.sketchGraphics)}}async _initializeSketchViewModel(){const {data:S,
_sketchGraphicClone:Z}=this,aa=S.edits.feature,{geometryUpdatesEnabled:M,layer:G}=S.editableItem,{view:X}=S.viewModel;this.removeHandles([P.highlights,P.sketchGraphics,P.sketchViewModel]);if(!M)return{enter:async()=>{this.hasHandles(P.highlights)||this._configureHighlight()},exit:()=>this.removeHandles([P.highlights])};const {viewModel:C}=S,{labelOptions:V,snappingOptions:ia,tooltipOptions:oa,valueOptions:ma}=C,D=new F({elevationInfo:G.elevationInfo,internal:!0,listMode:"hide"}),J=new O({allowDeleteKey:!1,
labelOptions:V,layer:D,snappingOptions:ia,tooltipOptions:oa,valueOptions:ma,updateOnGraphicClick:!1,view:X});this._sketchViewModel=J;this.addHandles([Q.watch(()=>[C.labelOptions,C.snappingOptions,C.tooltipOptions],([ea,ba,T])=>J.set({labelOptions:ea,snappingOptions:ba,tooltipOptions:T}))]);X?.map.add(D);this.addHandles(A.makeHandle(()=>{X?.destroyed||X?.map.remove(D);D.destroy();this._sketchViewModel=z.destroyMaybe(J)}),P.sketchViewModel);await y.updateGraphicSymbolWhenRequired(Z,this._webStyleCache,
"2d"===X?.type?X.scale:null);this.addHandles([await y.swapForEditingSession(J,aa,Z)]);return{enter:async()=>{this.hasHandles(P.sketchGraphics)||await this._configureSketchViewModel()},exit:()=>this.removeHandles([P.sketchGraphics]),viewModel:J}}_onFullFeatureLoaded(S){super._onFullFeatureLoaded(S);this._sketchGraphicClone=y.cloneGraphicExceptMesh(S);const {edits:Z}=this.data;Z.updateGeometry(S.geometry);Z.trackChanges()}static async create(S){S=new U({data:await I.create(S),onCommit:this._onCommitFactory(S.applyEdits)});
S._set("steps",this._createWorkflowSteps(S));return S}get test(){return{graphicClone:this._sketchGraphicClone}}};u.__decorate([w.property()],q.UpdateFeatureWorkflow.prototype,"_layerViewEditSession",void 0);u.__decorate([w.property()],q.UpdateFeatureWorkflow.prototype,"_sketchGraphicClone",void 0);u.__decorate([w.property()],q.UpdateFeatureWorkflow.prototype,"_sketchViewModel",void 0);q.UpdateFeatureWorkflow=U=u.__decorate([R.subclass("esri.widgets.Editor.UpdateFeatureWorkflow")],q.UpdateFeatureWorkflow);
q.handleKeys=P;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/UpdateFeatureWorkflowData":function(){define("../../chunks/tslib.es6 ../../core/Error ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./UpdateRecordWorkflowData ./workflowUtils".split(" "),function(q,u,v,A,z,Q,w,L,W){var B;A=B=class extends L{constructor(R){super(R)}static async create(R){const {feature:F,
viewModel:E}=R;var {view:I}=E;if(!I)throw new u("editor:cannot-create-workflow-data","The provided EditorViewModel does not have an associated view");I=await W.whenEditorLayerView(I,F.layer);return new B({...B._makeConstructorProps(R),layerView:I})}};q.__decorate([v.property()],A.prototype,"layerView",void 0);return A=B=q.__decorate([w.subclass("esri.widgets.Editor.UpdateFeatureWorkflowData")],A)})},"esri/widgets/Editor/UpdateRecordWorkflowData":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Edits ./workflowUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B){var R;u=R=class extends u{constructor(F){super(F);this.viewModel=this.relatedRecordCallbacks=this.parent=this.formTemplate=this.edits=this.editableItem=this.attachmentsCapabilities=null}static async create(F){F=R._makeConstructorProps(F);return new R(F)}static _makeConstructorProps(F){const {feature:E,parent:I,relatedRecordCallbacks:H,viewModel:y}=F;F=y.editableItems.find(S=>S.layer===E.layer);if(!F)throw new v("no-editableItem-found","The EditorViewModel provided did not have an EditableItem associated with the specified Graphic's layer");
const O=B.findLayerInfo(y.layerInfos,E.sourceLayer);var U=F.supports;const P=U.includes("create");U=U.includes("update");return{attachmentsCapabilities:{editing:!0,operations:{add:P||U,update:U,delete:U}},editableItem:F,edits:new W.Edits({feature:E}),formTemplate:O?.formTemplate,parent:I,relatedRecordCallbacks:H,viewModel:y}}};q.__decorate([A.property()],u.prototype,"attachmentsCapabilities",void 0);q.__decorate([A.property({constructOnly:!0})],u.prototype,"editableItem",void 0);q.__decorate([A.property()],
u.prototype,"edits",void 0);q.__decorate([A.property()],u.prototype,"formTemplate",void 0);q.__decorate([A.property()],u.prototype,"parent",void 0);q.__decorate([A.property()],u.prototype,"relatedRecordCallbacks",void 0);q.__decorate([A.property()],u.prototype,"viewModel",void 0);return u=R=q.__decorate([L.subclass("esri.widgets.Editor.UpdateRecordWorkflowData")],u)})},"esri/widgets/Editor/Edits":function(){define("exports ../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w,L){function W(B){return null==B?null:JSON.stringify(B)}q.Edits=class extends v{constructor(B){super(B);this._stagedForDelete=!1;this.initialFeature=this.feature=null}get attributesModified(){return this._stringifyAttributes(this.feature)!==this._stringifyAttributes(this.initialFeature)}get geometryModified(){return this._stringifyGeometry(this.feature)!==this._stringifyGeometry(this.initialFeature)}get stagedForDelete(){return this._stagedForDelete}get modified(){return this.attributesModified||
this.geometryModified||this._stagedForDelete}stageDelete(){this._stagedForDelete=!0}unstageDelete(){this._stagedForDelete=!1}trackChanges(){this.initialFeature=this.feature?.clone()}updateAttributes(B){const {feature:R}=this;R&&(R.attributes=B,this.notifyChange("attributesModified"))}updateGeometry(B){const {feature:R}=this;R&&(R.geometry=B,this.notifyChange("geometryModified"))}_stringifyAttributes(B){return W(B?.attributes)}_stringifyGeometry(B){B=B?.geometry;return"mesh"===B?.type?W({transform:B.transform,
vertexSpace:B.vertexSpace}):W(B)}};u.__decorate([A.property()],q.Edits.prototype,"_stagedForDelete",void 0);u.__decorate([A.property()],q.Edits.prototype,"attributesModified",null);u.__decorate([A.property()],q.Edits.prototype,"feature",void 0);u.__decorate([A.property()],q.Edits.prototype,"geometryModified",null);u.__decorate([A.property()],q.Edits.prototype,"initialFeature",void 0);u.__decorate([A.property()],q.Edits.prototype,"modified",null);q.Edits=u.__decorate([L.subclass("esri.widgets.Editor.Edits")],
q.Edits);Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/UpdateRecordWorkflow":function(){define("exports ../../chunks/tslib.es6 ../../core/Error ../../core/handleUtils ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/support/layerUtils ../../support/featureFlags ../../views/draw/support/HighlightHelper ./UpdateRecordWorkflowData ./Workflow ./workflowUtils ../FeatureForm/FeatureFormViewModel".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U){var P;const S={exit:Symbol()};q.UpdateRecordWorkflow=P=class extends y{constructor(Z){super(Z);this.fullFeature=this._highlightHelper=null;this.type="update-table-record"}initialize(){const {data:Z}=this;var {edits:aa}=Z;const {view:M}=Z.viewModel;aa=aa.feature;const G=new AbortController;this.addHandles(A.abortHandle(G));this._updatingHandles.addPromise(O.fetchFullFeature(aa,Z.viewModel.view.spatialReference,G.signal).then(X=>{z.isAborted(G)||(this._onFullFeatureLoaded(X),
this._initializeFeatureFormViewModel())},X=>this.cancel({force:!0,error:new v("editor:failed-to-fetch-full-feature","Failed to retrieve all information for this feature. The update cannot proceed.",{detail:{error:X}})})));M&&(this._highlightHelper=new I({view:M}),this.addHandles(A.makeHandle(()=>this._highlightHelper?.removeAll())))}get editableItem(){return this.data.editableItem}get featureFormViewModel(){return this._featureFormViewModel}get hasPendingEdits(){return this.data.edits.modified}get layer(){return this.data.editableItem.layer}get parent(){return this.data.parent}get parentLayer(){return this.parent?.data.editableItem.layer}get shouldShowAttachments(){return this.editableItem.attachmentsOnUpdateEnabled}get shouldAllowAttachmentEditing(){return this.editableItem.supports.includes("update")}get reliesOnOwnerAdminPrivileges(){const {layer:Z}=
this.editableItem,aa=Z.capabilities?.operations.supportsUpdate,M=F.getEffectiveLayerCapabilities(Z)?.operations.supportsUpdate;return F.getEffectiveEditingEnabled(Z)&&!Z.editingEnabled||!!M&&!aa}async deleteAndCommit(){this.data.edits.stageDelete();return this.commit()}async enter(){this._configureAttachmentsViewModel()}exit(Z){this.removeHandles(S.exit)}async start(){await super.start();return null}_configureAttachmentsViewModel(){const {data:Z,fullFeature:aa}=this,{attachmentsCapabilities:M,viewModel:G}=
Z,{attachmentsViewModel:X}=G;X.set({capabilities:M,graphic:aa,filesEnabled:!1,mode:"view"});this.addHandles([A.makeHandle(()=>X.fileInfos.removeAll()),Q.watch(()=>X.mode,C=>{switch(C){case "add":this.go("adding-attachment");break;case "edit":this.go("editing-attachment")}})],S.exit)}_initializeFeatureFormViewModel(){const {edits:Z,formTemplate:aa,viewModel:{view:M}}=this.data,G=this._featureFormViewModel=new U({arcadeEditType:"UPDATE",feature:this.fullFeature,formTemplate:aa,highlightHelper:this._highlightHelper,
map:M?.map,spatialReference:M.spatialReference,timeZone:M?.timeZone});G.relatedRecordCallbacks={...this.data.relatedRecordCallbacks,showAllRelatedRecords:C=>G.relationshipId=C.relationshipId};const {initialFeature:X}=Z;X&&G.overrideInitialFeature(X);this.addHandles([G.on("value-change",()=>{Z.updateAttributes(G.getValues());this.fullFeature.attributes=Z.feature.attributes}),Q.watch(()=>M?.timeZone,C=>G.timeZone=C)])}_onFullFeatureLoaded(Z){this.fullFeature=Z;const {edits:aa}=this.data;aa.updateAttributes(Z.attributes);
aa.trackChanges()}static async create(Z){Z=new P({data:await H.create(Z),onCommit:this._onCommitFactory(Z.applyEdits)});Z._set("steps",this._createWorkflowSteps(Z));return Z}static _createWorkflowSteps(Z){const {attachmentsViewModel:aa}=Z.data.viewModel;return[{id:"editing-attributes",async setUp(){},async tearDown(){}},{id:"adding-attachment",async setUp(){},async tearDown(){aa.mode="view"}},{id:"editing-attachment",async setUp(){},async tearDown(){aa.mode="view"}}]}};q.UpdateRecordWorkflow._onCommitFactory=
Z=>async aa=>{({edits:aa}=aa);const {feature:M}=aa;if(M){var G=M.sourceLayer,X=M.clone();if(!aa.attributesModified||aa.stagedForDelete){var C=G.objectIdField;X.attributes={[C]:M.getAttribute(C)};E.sceneLayerEditingEnabled()&&E.i3sPatchingEnabled()&&"scene"===G.type&&null!=G.infoFor3D&&(C=G.associatedLayer?.globalIdField,null!=C&&X.setAttribute(C,M.getAttribute(C)))}if(!aa.geometryModified||aa.stagedForDelete)X.geometry=null;await Z(G,{[aa.stagedForDelete?"deleteFeatures":"updateFeatures"]:[X]})}};
u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"editableItem",null);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"featureFormViewModel",null);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"fullFeature",void 0);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"hasPendingEdits",null);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"layer",null);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"parent",null);u.__decorate([w.property()],
q.UpdateRecordWorkflow.prototype,"parentLayer",null);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"shouldShowAttachments",null);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"shouldAllowAttachmentEditing",null);u.__decorate([w.property()],q.UpdateRecordWorkflow.prototype,"reliesOnOwnerAdminPrivileges",null);q.UpdateRecordWorkflow=P=u.__decorate([R.subclass("esri.widgets.Editor.UpdateRecordWorkflow")],q.UpdateRecordWorkflow);q.handleKeys=S;Object.defineProperty(q,Symbol.toStringTag,
{value:"Module"})})},"esri/widgets/Editor/UpdateWorkflowData":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.viewModel=this.rootFeature=this.candidates=this.applyEditsCallback=this.addAttachmentsCallback=null}};q.__decorate([v.property()],u.prototype,"addAttachmentsCallback",
void 0);q.__decorate([v.property()],u.prototype,"applyEditsCallback",void 0);q.__decorate([v.property()],u.prototype,"candidates",void 0);q.__decorate([v.property()],u.prototype,"rootFeature",void 0);q.__decorate([v.property()],u.prototype,"viewModel",void 0);return u=q.__decorate([w.subclass("esri.widgets.Editor.UpdateWorkflowData")],u)})},"esri/widgets/Editor/icons":function(){define(["exports"],function(q){q.warningIcon="exclamation-mark-triangle";Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},
"esri/widgets/Editor/VisibleElements":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../support/SnappingControls/VisibleElements".split(" "),function(q,u,v,A,z,Q,w,L){u=class extends u{constructor(W){super(W);this.createFeaturesSection=!0;this.directionModePicker=!1;this.snappingControls=this.labelsToggle=this.editFeaturesSection=!0;this.snappingControlsElements=
new L;this.tooltipsToggle=!0;this.undoRedoButtons=!1}};q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"createFeaturesSection",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"directionModePicker",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"editFeaturesSection",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"labelsToggle",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],
u.prototype,"snappingControls",void 0);q.__decorate([v.property({type:L,nonNullable:!0})],u.prototype,"snappingControlsElements",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"tooltipsToggle",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"undoRedoButtons",void 0);return u=q.__decorate([w.subclass("esri.widgets.Editor.VisibleElements")],u)})},"esri/widgets/support/SnappingControls/VisibleElements":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.featureEnabledToggle=this.enabledToggle=!0;this.header=!1;this.selfEnabledToggle=this.layerListToggleLayersButton=this.layerList=!0}};q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"enabledToggle",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"featureEnabledToggle",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"header",void 0);q.__decorate([v.property({type:Boolean,
nonNullable:!0})],u.prototype,"layerList",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"layerListToggleLayersButton",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"selfEnabledToggle",void 0);return u=q.__decorate([w.subclass("esri.widgets.support.SnappingControls.VisibleElements")],u)})},"esri/widgets/Editor/components/CreateFeaturesPanelContent":function(){define(["exports","./PanelContent","../../support/widgetUtils","../../support/jsxFactory"],
function(q,u,v,A){q.CreateFeaturesPanelContent=function({helpMessage:z}){return A.tsx(u.PanelContent,{key:"creating-features-panel-content"},A.tsx(u.PanelContentMessage,{key:"content-message"},z))};q.loadCreateFeaturesPanelContentComponents=()=>u.loadPanelContentComponents();Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/PanelContent":function(){define(["require","exports","../../../chunks/componentsUtils","../../support/widgetUtils","../../support/jsxFactory"],
function(q,u,v,A,z){const Q={base:"esri-editor__panel-content",message:"esri-editor__panel-content__message",section:"esri-editor__panel-content__section",sectionGroup:"esri-editor__panel-content__section__group",scrimContainer:"esri-editor__panel-content__scrim-container"};u.PanelContent=function(w,...L){return z.tsx("div",{class:A.classes(Q.base,w?.showScrimOverlay?Q.scrimContainer:void 0),key:w?.key??"panel-content"},...L,w?.showScrimOverlay?z.tsx("calcite-scrim",null):void 0)};u.PanelContentMessage=
function(w,...L){return z.tsx("div",{class:Q.message,"data-testid":"panel-content-message",key:w?.key??"panel-content-message"},...L)};u.PanelContentSection=function(w,...L){return z.tsx("div",{class:Q.section,key:w?.key??"panel-content-section"},...L)};u.PanelContentSectionGroup=function(w,...L){return z.tsx("div",{class:Q.sectionGroup,key:w?.key??"panel-content-section-group"},...L)};u.css=Q;u.loadPanelContentComponents=()=>v.loadCalciteComponents({scrim:()=>new Promise((w,L)=>q(["../../../chunks/calcite-scrim"],
w,L))});Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/FeatureList":function(){define("exports ../../../core/arrayUtils ../../../layers/support/fieldUtils ./PanelContent ../../FeatureTemplates/ItemList ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(q,u,v,A,z,Q,w){q.FeatureList=function({editableItems:L,filterText:W,id:B,messagesTemplates:R,onFilterTextChange:F,onSelectFeature:E,workflow:I}){const H=new Map;let y=0;I.data.candidates.map(O=>
{var U=O.layer;if(U){var P=U.fieldsIndex.get(U.objectIdField);var S=P.alias||P.name,{attributes:Z}=O;P=(U=v.getDisplayFieldName(U))&&Z[U]&&`${Z[U]}`||`${S}: ${Z[P.name]}`}else P=null;return{label:P,id:O.attributes[O.layer.objectIdField],data:O}}).filter(O=>{const {label:U,data:P}=O;O=W.toLowerCase();const {title:S}=P.layer,Z=L.find(G=>G.layer===P.layer);if(!Z)return null;const {attachmentsOnUpdateEnabled:aa,supports:M}=Z;return(M.includes("update")||M.includes("delete")||aa)&&(!O||U?.toLowerCase().includes(O)||
S?.toLowerCase().includes(O))}).filter(u.isSome).forEach(O=>{y++;const U=O.data.layer;H.has(U)?H.get(U)?.items.push(O):H.set(U,{id:`${U.id}`,label:U.title??"",items:[O]})});I=L.toArray().map(({layer:O})=>H.get(O)).filter(u.isSome);return w.tsx(A.PanelContent,{key:"feature-list"},w.tsx(A.PanelContentSection,null,z.ItemList({enableListScroll:!1,filterEnabled:10<y||0<W.length,filterText:W,id:B,items:I,messages:{filterPlaceholder:R.filterPlaceholder,noItems:R.noItems,noMatches:R.noMatches},onFilterChange:O=>
F(O),onItemMouseEnter:O=>E(O.data),onItemMouseLeave:()=>E(null),onItemSelect:O=>E(O.data,!0)})))};q.loadFeatureListComponents=()=>A.loadPanelContentComponents();Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/FooterActions":function(){define("require exports ../../../core/arrayUtils ../../../chunks/componentsUtils ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(q,u,v,A,z,Q){const w={base:"esri-editor__actions"};u.FooterActions=
function({buttons:L,key:W}){return Q.tsx("div",{class:w.base,key:W??"footer-actions",slot:"footer"},L.filter(v.isSome).map(({disabled:B,onClick:R,label:F,...E},I)=>Q.tsx("calcite-button",{disabled:B??!1,key:`action-${I}`,onclick:R,slot:"footer-actions",width:"full",...E},F)))};u.css=w;u.loadFooterActionsComponents=()=>A.loadCalciteComponents({button:()=>new Promise((L,W)=>q(["../../../chunks/calcite-button"],L,W))});Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/Notices":function(){define("require exports ../icons ../../../chunks/componentsUtils ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(q,u,v,A,z,Q){function w({message:W,...B}){return Q.tsx("calcite-notice",{class:L.notice,open:!0,scale:"s",...B},Q.tsx("div",{slot:"message"},W))}const L={notice:"esri-editor__notice"};u.Notice=w;u.Notices=function({workflow:W,messages:B}){return Q.tsx(Q.tsxFragment,null,W?.reliesOnOwnerAdminPrivileges?Q.tsx(w,{message:B.ownerAdminNotice}):void 0,W?.hasInvalidFormTemplate?Q.tsx(w,{icon:v.warningIcon,message:B.formFieldUpdateError}):void 0,W?.hasUnsupportedFields?Q.tsx(w,{icon:v.warningIcon,
message:B.formFieldUnsupportedUpdateError}):void 0)};u.css=L;u.loadNoticesComponents=()=>A.loadCalciteComponents({notice:()=>new Promise((W,B)=>q(["../../../chunks/calcite-notice"],W,B))});Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/PanelToolbar":function(){define(["require","exports","./Settings","../../../chunks/componentsUtils","../../support/jsxFactory"],function(q,u,v,A,z){const Q={base:"esri-editor__panel-toolbar"};u.PanelToolbar=function({editorViewModel:w,
messagesCommon:L,visibleElements:W}){const {sketchViewModel:B}=w;return z.tsx("div",{class:Q.base,key:"panel-toolbar"},z.tsx(v.Settings,{editorViewModel:w,messagesCommon:L,visibleElements:W}),W.undoRedoButtons?[z.tsx("calcite-button",{alignment:"center",appearance:"transparent",disabled:!B?.canUndo(),iconStart:"undo",key:"undo-button",kind:"neutral",label:L.undo,onclick:()=>B?.undo(),scale:"l"},L.undo),z.tsx("calcite-button",{alignment:"center",appearance:"transparent",disabled:!B?.canRedo(),iconStart:"redo",
key:"redo-button",kind:"neutral",label:L.redo,onclick:()=>B?.redo(),scale:"l"},L.redo)]:null)};u.css=Q;u.loadPanelToolbarComponents=()=>Promise.all([A.loadCalciteComponents({button:()=>new Promise((w,L)=>q(["../../../chunks/calcite-button"],w,L))}),v.loadSettingsComponents()]);Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/Settings":function(){define("require exports ../../../chunks/componentsUtils ../../support/SketchTooltipControls ../../support/SnappingControls ../../support/widgetUtils ../../support/jsxFactory ../../support/SnappingControls/VisibleElements".split(" "),
function(q,u,v,A,z,Q,w,L){const W={settingsContainer:"esri-editor__settings"};u.Settings=function({editorViewModel:B,messagesCommon:R,visibleElements:F}){const {snappingOptions:E,sketchOptions:I,view:H}=B;B=[];const y={directionModePicker:F.directionModePicker,labelsToggle:F.labelsToggle,tooltipsToggle:F.tooltipsToggle};Q.someElementsAreVisible(y)&&B.push(w.tsx(A,{sketchOptions:I,viewType:H?.type,visibleElements:y}));F.snappingControls&&B.push(w.tsx(z,{afterCreate:O=>O.layerListOpen=!1,snappingOptions:E,
view:H,visibleElements:F.snappingControlsElements??new L}));return 0===B.length?null:w.tsx("calcite-accordion",{appearance:"transparent",class:W.settingsContainer,key:"settings"},w.tsx("calcite-accordion-item",{"data-testid":"settings",heading:R.settings,iconStart:"gear"},B))};u.css=W;u.loadSettingsComponents=()=>v.loadCalciteComponents({accordion:()=>new Promise((B,R)=>q(["../../../chunks/calcite-accordion"],B,R)),"accordion-item":()=>new Promise((B,R)=>q(["../../../chunks/calcite-accordion-item"],
B,R))});Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SketchTooltipControls":function(){define("require ../../chunks/tslib.es6 ../../core/arrayUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../../views/interactive/sketch/SketchOptions ../../views/interactive/tooltip/components/directionModeIcons ../Widget ../../chunks/componentsUtils ./globalCss ./LabeledSwitch ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SketchTooltipControls/VisibleElements".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O){z=class extends B{constructor(U,P){super(U,P);this.viewModel=null;this.visibleElements=new O;this.sketchOptions=new L;this.viewType=void 0;this._onTooltipsEnabledChange=S=>{this.sketchOptions.tooltips.enabled=S};this._onLabelsEnabledChange=S=>{this.sketchOptions.labels.enabled=S};this._onDirectionModeChange=S=>{this.sketchOptions.values.directionMode=S.target.selectedItem.value}}loadDependencies(){return Promise.all([R.loadCalciteComponents({block:()=>new Promise((U,
P)=>q(["../../chunks/calcite-block"],U,P)),label:()=>new Promise((U,P)=>q(["../../chunks/calcite-label"],U,P)),icon:()=>new Promise((U,P)=>q(["../../chunks/calcite-icon"],U,P)),"radio-button":()=>new Promise((U,P)=>q(["../../chunks/calcite-radio-button"],U,P)),"radio-button-group":()=>new Promise((U,P)=>q(["../../chunks/calcite-radio-button-group"],U,P))}),E.loadLabeledSwitchComponents()])}render(){const {label:U,visibleElements:P}=this,S=this._renderContent();return y.tsx("div",{"aria-label":U,class:this.classes("esri-sketch-tooltip-controls",
F.globalCss.widget)},S?y.tsx("calcite-block",{class:"esri-sketch-tooltip-controls__block",heading:P.header?this.label:"",key:"content-block",open:!0},y.tsx("div",{class:"esri-sketch-tooltip-controls__block-content",key:"content"},S)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(U){this._overrideIfSome("label",U)}_renderContent(){const {visibleElements:U,viewType:P}=this,S=[U.tooltipsToggle?this._renderTooltipsToggle():null,U.labelsToggle&&"2d"!==P?this._renderLabelsToggle():
null,U.directionModePicker?this._renderDirectionModePicker():null].filter(v.isSome);return 0===S.length?null:S}_renderTooltipsToggle(){const {messages:U,sketchOptions:P}=this;return y.tsx(E.LabeledSwitch,{checked:P.tooltips.effectiveEnabled,hint:U.tooltipsToggleHint,key:`${this.id}__tooltips`,label:U.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const {messages:U,sketchOptions:P}=this;return y.tsx(E.LabeledSwitch,{checked:P.labels.enabled,hint:U.labelsToggleHint,key:`${this.id}__labels`,
label:U.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){const {messages:U,sketchOptions:P}=this,{directionMode:S}=P.values;return y.tsx("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},U.directionModePicker,y.tsx("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:S,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",S,U.directionModeRelative),this._renderDirectionModeOption("absolute",
S,U.directionModeAbsolute)))}_renderDirectionModeOption(U,P,S){return y.tsx("calcite-label",{key:U,layout:"inline",scale:"s"},y.tsx("calcite-radio-button",{checked:U===P,scale:"s",value:U}),y.tsx("div",{class:"esri-sketch-tooltip-controls__radio-button-label-wrapper",key:"label-wrapper"},y.tsx("calcite-icon",{icon:W.directionModeIcons[U],scale:"s"}),S))}};u.__decorate([A.property()],z.prototype,"label",null);u.__decorate([A.property({type:O,nonNullable:!0})],z.prototype,"visibleElements",void 0);
u.__decorate([A.property(),H.messageBundle("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],z.prototype,"messages",void 0);u.__decorate([A.property({nonNullable:!0,type:L})],z.prototype,"sketchOptions",void 0);u.__decorate([A.property({type:String})],z.prototype,"viewType",void 0);return z=u.__decorate([w.subclass("esri.widgets.support.SketchTooltipControls")],z)})},"esri/views/interactive/tooltip/components/directionModeIcons":function(){define(["exports"],function(q){q.directionModeIcons=
{absolute:"absolute-direction",relative:"relative-direction"};Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/LabeledSwitch":function(){define(["require","exports","../../chunks/componentsUtils","./widgetUtils","./jsxFactory"],function(q,u,v,A,z){u.LabeledSwitch=function({checked:Q,disabled:w,hint:L,key:W,label:B,onChange:R}){return z.tsx("calcite-label",{class:"esri-labeled-switch__label",disabled:w,key:W,layout:"inline-space-between",scale:"s"},z.tsx("div",
{class:"esri-labeled-switch__label-content",key:"label-content"},L?z.tsx(z.tsxFragment,null,z.tsx("div",null,B),z.tsx("calcite-icon",{class:"esri-labeled-switch__icon",icon:"information",id:W,scale:"s"}),z.tsx("calcite-tooltip",{class:"esri-labeled-switch__tooltip",referenceElement:W},L)):B),z.tsx("calcite-switch",{checked:Q,disabled:w,scale:"s",onCalciteSwitchChange:F=>R(F.target.checked)}))};u.loadLabeledSwitchComponents=()=>Promise.all([v.loadCalciteComponents({icon:()=>new Promise((Q,w)=>q(["../../chunks/calcite-icon"],
Q,w)),label:()=>new Promise((Q,w)=>q(["../../chunks/calcite-label"],Q,w)),switch:()=>new Promise((Q,w)=>q(["../../chunks/calcite-switch"],Q,w)),tooltip:()=>new Promise((Q,w)=>q(["../../chunks/calcite-tooltip"],Q,w))})]);Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SketchTooltipControls/VisibleElements":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(q,u,v,A,z,Q,w){u=class extends u{constructor(L){super(L);this.header=this.directionModePicker=!1;this.tooltipsToggle=this.labelsToggle=!0}};q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"directionModePicker",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"header",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"labelsToggle",void 0);q.__decorate([v.property({type:Boolean,nonNullable:!0})],u.prototype,"tooltipsToggle",
void 0);return u=q.__decorate([w.subclass("esri.widgets.support.SketchTooltipControls.VisibleElements")],u)})},"esri/widgets/support/SnappingControls":function(){define("require ../../chunks/tslib.es6 ../../core/arrayUtils ../../core/maybe ../../core/uid ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ../Widget ../../chunks/componentsUtils ./globalCss ./LabeledSwitch ./legacyIcon ./widgetUtils ./decorators/messageBundle ./jsxFactory ./SnappingControls/SnappingControlsViewModel ./SnappingControls/VisibleElements".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P){var S=I.legacyIcon.vertexGps;w=class extends B{constructor(Z,aa){super(Z,aa);this._layerListFilter=this._defaultViewModel=null;this.iconClass=S;this.icon=null;this.layerListOpen=!0;this.messages=null;this.visibleElements=new P;this._enableSnappingSwitchChange=C=>{this.snappingOptions.enabled=C};this._featureEnabledSwitchChange=C=>{this.snappingOptions.featureEnabled=C};this._selfEnabledSwitchChange=C=>{this.snappingOptions.selfEnabled=C};this._onToggleLayersButtonClick=
C=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled);requestAnimationFrame(()=>C.target.setFocus())};const {snappingOptions:M,view:G,viewModel:X}=Z;this.viewModel=X??(this._defaultViewModel=new U({snappingOptions:M,view:G}))}normalizeCtorArgs(Z){const {snappingOptions:aa,view:M,viewModel:G,...X}=Z;return X}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=A.destroyMaybe(this._defaultViewModel))}loadDependencies(){return Promise.all([R.loadCalciteComponents({accordion:()=>
new Promise((Z,aa)=>q(["../../chunks/calcite-accordion"],Z,aa)),"accordion-item":()=>new Promise((Z,aa)=>q(["../../chunks/calcite-accordion-item"],Z,aa)),action:()=>new Promise((Z,aa)=>q(["../../chunks/calcite-action"],Z,aa)),block:()=>new Promise((Z,aa)=>q(["../../chunks/calcite-block"],Z,aa)),button:()=>new Promise((Z,aa)=>q(["../../chunks/calcite-button"],Z,aa)),icon:()=>new Promise((Z,aa)=>q(["../../chunks/calcite-icon"],Z,aa)),input:()=>new Promise((Z,aa)=>q(["../../chunks/calcite-input"],Z,
aa)),list:()=>new Promise((Z,aa)=>q(["../../chunks/calcite-list"],Z,aa)),"list-item":()=>new Promise((Z,aa)=>q(["../../chunks/calcite-list-item"],Z,aa))}),E.loadLabeledSwitchComponents()])}get label(){return this.messages?.widgetLabel??""}set label(Z){this._overrideIfSome("label",Z)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(Z){this.viewModel.snappingOptions=Z}get view(){return this.viewModel.view}set view(Z){this.viewModel.view=Z}set viewModel(Z){if(Z!==this._get("viewModel")){if(null==
this._defaultViewModel||this._defaultViewModel!==Z)this._defaultViewModel=A.destroyMaybe(this._defaultViewModel);this._set("viewModel",Z)}}render(){const {label:Z}=this;return O.tsx("div",{"aria-label":Z,class:this.classes("esri-snapping-controls",F.globalCss.widget)},O.tsx("div",{class:"esri-snapping-controls__container"},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){const {visibleElements:Z}=this;var aa=[Z.selfEnabledToggle?this._renderSelfEnabledToggle():
null,Z.featureEnabledToggle?this._renderFeatureEnabledToggle():null].filter(v.isSome);aa=[Z.enabledToggle?this._renderEnabledToggle():null,0<aa.length?O.tsx("div",{class:"esri-snapping-controls__nested-container"},aa):null].filter(v.isSome);return 0===aa.length?null:O.tsx("calcite-block",{class:"esri-snapping-controls__toggle-block",heading:Z.header?this.label:"",key:"toggle-block",open:!0},aa)}_renderEnabledToggle(){const {messages:Z,viewModel:aa}=this,{snappingOptions:M}=aa;return O.tsx(E.LabeledSwitch,
{checked:M.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:Z.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){const {messages:Z,viewModel:aa}=this,{snappingOptions:M}=aa;return O.tsx(E.LabeledSwitch,{checked:M.enabled&&M.selfEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:Z.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){const {messages:Z,viewModel:aa}=
this,{snappingOptions:M}=aa;return O.tsx(E.LabeledSwitch,{checked:M.enabled&&M.featureEnabled,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:Z.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;const {messages:Z,viewModel:aa}=this;var M=({target:{value:X}})=>{this._layerListFilter=""===X?null:new RegExp(X,"i")};M=9<aa.layerListViewModel.operationalItems.length?O.tsx("calcite-input",
{class:"esri-snapping-controls__layer-list__filter",clearable:!0,placeholder:Z?.searchLayers,onCalciteInputInput:M}):null;const G=this._secondaryElementsDisabled;return O.tsx("calcite-block",{class:"esri-snapping-controls__layer-list-block",collapsible:!0,disabled:this._secondaryElementsDisabled,heading:Z.snappingLayers,key:"list-block",open:this.layerListOpen&&!G,onCalciteBlockToggle:X=>this.layerListOpen=X.target.open},M,this._renderToggleLayersButton(),O.tsx("calcite-list",{class:"esri-snapping-controls__layer-list"},
this._renderLayerListItemCollection(aa.layerListViewModel.operationalItems,this._layerListFilter)))}_renderLayerListItemCollection(Z,aa){return Z.map(M=>{if(aa?this._itemTitleMatchesFilter(M,aa):1)return 0<M.children.length?this._renderLayerListItemGroup(M):this._renderLayerListItem(M);const G=M.children.filter(X=>this._itemTitleMatchesFilter(X,aa));return 0<G.length?this._renderLayerListItemGroup(M,G):null}).toArray().filter(v.isSome)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;
const {viewModel:{allLayersEnabled:Z},messages:aa}=this,M=Z?aa.disableAllLayers:aa.enableAllLayers;return O.tsx("calcite-button",{appearance:"transparent",class:"esri-snapping-controls__layer-list__button",label:M,name:"layer-toggle",onclick:this._onToggleLayersButtonClick,scale:"m"},M)}_renderLayerListItem(Z){const {messages:{untitledLayer:aa}}=this,M=Z.enabled;return O.tsx("calcite-list-item",{class:"esri-snapping-controls__layer-list__item",key:`${this.id}-list-item-${Z.uid}`,label:Z.title||aa,
onCalciteListItemSelect:()=>{this._handleLayerListItemChange({checked:!M,value:Z.layer.id})}},O.tsx("calcite-icon",{icon:M?"check-square-f":"square",scale:"s",slot:"content-start"}))}_renderLayerListItemGroup(Z,aa){const {allChildrenEnabled:M,children:G,hasChildrenEnabled:X,title:C}=Z,V=this.messages,ia=C||V.untitledLayer,oa=C&&""!==C?C:z.generateUID(),ma=aa??G;return O.tsx("calcite-list-item",{class:"esri-snapping-controls__layer-list__item",key:oa},O.tsx("calcite-accordion",{appearance:"transparent",
class:"esri-snapping-controls__layer-list__group"},O.tsx("calcite-accordion-item",{expanded:!!aa,heading:ia,key:Z.uid},O.tsx("calcite-action",{onclick:()=>{this.viewModel.toggleSnappingForLayers(Z.childLayerIds,!M)},scale:"m",slot:"actions-start",text:M?V.disableAllLayers:V.enableAllLayers,textEnabled:!1},O.tsx("calcite-icon",{icon:M?"check-square-f":X?"minus-square":"square",scale:"s"})),O.tsx("calcite-list",null,this._renderLayerListItemCollection(ma)))))}_itemTitleMatchesFilter(Z,aa){return null!=
aa&&aa.test(Z.title)}async _handleLayerListItemChange(Z){Z.checked?this.viewModel.enableSnappingForLayer(Z.value):this.viewModel.disableSnappingForLayer(Z.value)}get _enabledToggleDisabled(){const Z=this.snappingOptions;return Z.enabledToggled||Z.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};u.__decorate([Q.property()],w.prototype,"_defaultViewModel",void 0);u.__decorate([Q.property()],w.prototype,"_layerListFilter",void 0);u.__decorate([Q.property()],
w.prototype,"iconClass",void 0);u.__decorate([Q.property()],w.prototype,"icon",void 0);u.__decorate([Q.property()],w.prototype,"label",null);u.__decorate([Q.property({type:Boolean,nonNullable:!0})],w.prototype,"layerListOpen",void 0);u.__decorate([Q.property(),y.messageBundle("esri/widgets/support/SnappingControls/t9n/SnappingControls")],w.prototype,"messages",void 0);u.__decorate([Q.property()],w.prototype,"snappingOptions",null);u.__decorate([Q.property()],w.prototype,"view",null);u.__decorate([Q.property()],
w.prototype,"viewModel",null);u.__decorate([Q.property({type:P,nonNullable:!0})],w.prototype,"visibleElements",void 0);u.__decorate([Q.property()],w.prototype,"_enabledToggleDisabled",null);u.__decorate([Q.property()],w.prototype,"_secondaryElementsDisabled",null);return w=u.__decorate([W.subclass("esri.widgets.support.SnappingControls")],w)})},"esri/widgets/support/SnappingControls/SnappingControlsViewModel":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Error ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../views/interactive/snapping/FeatureSnappingLayerSource ../../../views/interactive/snapping/SnappingOptions ../../LayerList/support/layerListUtils ./SnappingLayerListViewModel".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E){u=class extends u{constructor(I){super(I);this.layerListViewModel=new E.SnappingLayerListViewModel;this.snappingOptions=new R;this.view=null}initialize(){this.addHandles([A.watch(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:I,view:H})=>{I.view=H},A.initial),A.watch(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:I,sources:H})=>{I.featureSnappingSources=H},A.initial)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??
[]).every(I=>I.enabled)}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every(I=>!I.enabled)}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter(I=>I.enabled).length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(I,H){I?.forEach(y=>H?this.enableSnappingForLayer(y):this.disableSnappingForLayer(y))}toggleSnappingForAllLayers(I){this.layerListViewModel.selectableItems.forEach(({layer:{id:H}})=>{I?this.enableSnappingForLayer(H):
this.disableSnappingForLayer(H)})}enableSnappingForLayer(I){(this._findSnappingSourceForLayer(I)??this._makeSnappingSourceForLayer(I)).enabled=!0}disableSnappingForLayer(I){if(I=this._findSnappingSourceForLayer(I))I.enabled=!1}updateEnabledFeatureSources(I){for(const H of this.snappingOptions.featureSources)F.canDisplayLayer(H.layer)&&(H.enabled=I.includes(H.layer.id))}_findSnappingSourceForLayer(I){return this.snappingOptions.featureSources.find(H=>H.layer.id===I)}_makeSnappingSourceForLayer(I){var H=
this.layerListViewModel.operationalItemsFlat.find(y=>y.layer.id===I)?.layer;if(!H)throw new v("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${I} because no such layer was found in the view`);H=new B({layer:H});this.snappingOptions.featureSources.add(H);return H}};q.__decorate([z.property()],u.prototype,"allLayersEnabled",null);q.__decorate([z.property()],u.prototype,"allLayersDisabled",null);q.__decorate([z.property({constructOnly:!0})],u.prototype,"layerListViewModel",
void 0);q.__decorate([z.property()],u.prototype,"layersEnabledCount",null);q.__decorate([z.property({type:R,nonNullable:!0})],u.prototype,"snappingOptions",void 0);q.__decorate([z.property()],u.prototype,"state",null);q.__decorate([z.property()],u.prototype,"view",void 0);return u=q.__decorate([W.subclass("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],u)})},"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(q){function u(B){if(B)return null!=
B.listMode?B.listMode:void 0}function v(B){return null!=B&&"minScale"in B&&null!=B.minScale?B.minScale:void 0}function A(B){return null!=B&&"maxScale"in B&&null!=B.maxScale?B.maxScale:void 0}function z(B){if(B&&!("type"in B&&"wmts"===B.type)&&B.listMode!==W.hideChildren)return"sublayers"in B?"sublayers":"layers"in B?"layers":void 0}function Q(B,R){B?.sort((F,E)=>{F="uid"in F?R.indexOf(F.uid):-1;E="uid"in E?R.indexOf(E.uid):-1;return F>E?-1:F<E?1:0})}function w(B){return null!=B&&"layer"in B&&null!=
B.layer}function L(B){return B&&"capabilities"in B&&null!=B.capabilities&&"exportMap"in B.capabilities?B.capabilities.exportMap:void 0}const W={hide:"hide",hideChildren:"hide-children"};q.canDisplayLayer=function(B){return u(B)!==W.hide};q.canSortSublayers=function(B){B=(B?.layer&&w(B.layer)?B.layer.layer:void 0)??B?.layer;if(!B)return!1;B=L(B);return(null!=B&&"supportsDynamicLayers"in B?B.supportsDynamicLayers:void 0)??!0};q.findLayerListMode=u;q.findLayerMaxScale=A;q.findLayerMinScale=v;q.findLayerVisibilityMode=
function(B){if(!B)return"inherited";var R=w(B)?B.layer:B;R=L(R);R=null!=R&&"supportsSublayerVisibility"in R?R.supportsSublayerVisibility:void 0;return null!=R?R?"independent":"inherited":"visibilityMode"in B&&null!=B.visibilityMode?B.visibilityMode:"independent"};q.getItem=function(B){return B?.["data-item"]};q.getItemLayers=function(B){return(B=B?.layer)&&"layers"in B?B.layers:null};q.getLayerType=function(B){return B?.getAttribute("data-layer-type")};q.getLegendLayerInfo=function(B){var R=w(B)?
B:null;const F=B?.parent;return(R=null!=F&&"type"in F&&"map-image"===F.type?R?.source:null)&&F?{layer:F,title:"",sublayerIds:[R.mapLayerId]}:{layer:B,title:""}};q.getNormalizedChildLayerProperty=z;q.getStatusIcon=function({connectionStatus:B,isUpdating:R,publishing:F}){const E=!!B;return E||F||R?E?"connected"===B?"beacon":"offline":F?"stop-square":"bullet-point":"blank"};q.getVisibilityIcon=function({exclusive:B,visible:R,visibilityAppearance:F}){F="checkbox"===F;return R?B?"circle-f":F?"check-square-f":
"view-visible":B?"circle":F?"square":"view-hide"};q.isLayerOutsideScaleRange=function(B,R){if(!B||null==R||isNaN(R))return!1;var F=v(B);B=A(B);F=null!=F&&!isNaN(F)&&0<F&&R>F;R=null!=B&&!isNaN(B)&&0<B&&R<B;return F||R};q.isSublayer=w;q.listItemHasChildren=function({children:B,error:R,incompatible:F}){return!!B?.filter(E=>!E.hidden).length&&!R&&!F};q.sortChildLayersToIds=function(B,R){if(B=B?.layer){var F=z(B);if(F){if("layers"===F&&"layers"in B)var E=B.layers;else"sublayers"===F&&"sublayers"in B&&
(E=B.sublayers);Q(E,R)}}};q.sortLayersToIds=Q;q.sortableRoot="root";Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SnappingControls/SnappingLayerListViewModel":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../LayerList/LayerListViewModel ./snappingLayerListUtils ./SnappingListItem".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R){q.SnappingLayerListViewModel=class extends W{constructor(){super(...arguments);this.featureSnappingSources=new v}get operationalItemsFlat(){return this.operationalItems.flatten(F=>F.children)}get selectableItems(){return this.operationalItemsFlat.filter(F=>!F.children?.length)}_compileList(){var F=this.view?.map?.layers;F&&(F=F.filter(B.isValidSnappingLayer),this._watchLayersListMode(F),F=this._getViewableLayers(F),F?.length?(this._createNewItems(F),this._removeItems(F),
this._sortItems(F)):this._removeAllItems())}_createListItem(F){return new R.SnappingListItem({layer:F,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};u.__decorate([A.property()],q.SnappingLayerListViewModel.prototype,"featureSnappingSources",void 0);u.__decorate([A.property()],q.SnappingLayerListViewModel.prototype,"operationalItems",void 0);u.__decorate([A.property()],q.SnappingLayerListViewModel.prototype,"operationalItemsFlat",null);u.__decorate([A.property()],q.SnappingLayerListViewModel.prototype,
"selectableItems",null);q.SnappingLayerListViewModel=u.__decorate([L.subclass("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],q.SnappingLayerListViewModel);Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/tslib.es6 ../../core/Collection ../../core/Evented ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ListItem ./support/layerListUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R){const F=u.ofType(B);u=class extends v.EventedAccessor{constructor(E){super(E);this.checkPublishStatusEnabled=!1;this.listItemCreatedFunction=null;this.operationalItems=new F;this.view=null}initialize(){this.addHandles([A.watch(()=>!0===this.view?.ready,()=>this._viewHandles(),A.initial),A.watch(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled],()=>this._recompileList())],"view")}destroy(){this.view=null;this.operationalItems.removeAll()}get state(){const {view:E}=
this;return E?.ready?"ready":E?"loading":"disabled"}triggerAction(E,I){E&&!E.disabled&&this.emit("trigger-action",{action:E,item:I})}moveListItem(E,I,H,y){const O=E?.layer;if(O){var U=this.view?.map?.layers,P=I?R.getItemLayers(I):U;U=H?R.getItemLayers(H):U;if(P&&U){var {operationalItems:S}=this,Z=H?.children||S;y=U.length-y;E.parent=H||null;(I?.children||S).remove(E);P.remove(O);Z.includes(E)||Z.add(E,y);U.includes(O)||U.add(O,y);this._compileList()}}}_createLayerViewHandles(E){this.removeHandles("layer-views");
this._compileList();E&&this.addHandles(E.on("change",()=>this._compileList()),"layer-views")}_createMapLayerHandles(E){this.removeHandles("map-layers");this._compileList();E&&this.addHandles(E.on("change",()=>this._compileList()),"map-layers")}_createListItem(E){const {view:I,listItemCreatedFunction:H,checkPublishStatusEnabled:y}=this;return new B({checkPublishStatusEnabled:y,layer:E,listItemCreatedFunction:H,view:I})}_removeAllItems(){this.operationalItems.removeAll()}_getViewableLayers(E){if(E)return E.filter(I=>
"hide"!==R.findLayerListMode(I))}_watchLayersListMode(E){this.removeHandles("layer-list-mode");E&&E.forEach(I=>{"listMode"in I&&this.addHandles(A.watch(()=>I.listMode,()=>this._compileList()),"layer-list-mode")})}_compileList(){var E=this.view?.map?.layers;this._watchLayersListMode(E);E=this._getViewableLayers(E);E?.length?(this._createNewItems(E),this._removeItems(E),this._sortItems(E)):this._removeAllItems()}_createNewItems(E){const {operationalItems:I}=this;E.forEach(H=>{I.some(y=>y.layer===H)||
I.add(this._createListItem(H))})}_removeItems(E){const {operationalItems:I}=this,H=[];I.forEach(y=>{y&&E&&E.includes(y.layer)||H.push(y)});I.removeMany(H)}_sortItems(E){const {operationalItems:I}=this;I.sort((H,y)=>{H=E.indexOf(H.layer);y=E.indexOf(y.layer);return H>y?-1:H<y?1:0})}_recompileList(){this._removeAllItems();this._compileList()}_viewHandles(){const {view:E}=this;this.removeHandles(["map-layers","layer-views","view-layers"]);E?.ready?this.addHandles([A.watch(()=>this.view?.map?.allLayers,
I=>this._createMapLayerHandles(I),A.initial),A.watch(()=>this.view?.allLayerViews,I=>this._createLayerViewHandles(I),A.initial)],"view-layers"):this._removeAllItems()}};q.__decorate([z.property()],u.prototype,"checkPublishStatusEnabled",void 0);q.__decorate([z.property()],u.prototype,"listItemCreatedFunction",void 0);q.__decorate([z.property({type:F})],u.prototype,"operationalItems",void 0);q.__decorate([z.property({readOnly:!0})],u.prototype,"state",null);q.__decorate([z.property()],u.prototype,
"view",void 0);return u=q.__decorate([W.subclass("esri.widgets.LayerList.LayerListViewModel")],u)})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/arrayUtils ../../core/Collection ../../core/Identifiable ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/get ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionSlider ../../support/actions/ActionToggle ./ListItemPanel ./support/layerListUtils".split(" "),
function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O){var U;W=A.ofType({key:"type",defaultKeyValue:"button",base:F,typeMap:{button:E,toggle:H,slider:I}});const P=A.ofType(W);u=U=class extends z.IdentifiableMixin(u){constructor(S){super(S);this.actionsSections=new P;this.checkPublishStatusEnabled=this.actionsOpen=!1;this.children=new (A.ofType(U));this.childrenSortable=!0;this.hidden=!1;this.listItemCreatedFunction=this.layerView=this.layer=null;this.open=!1;this.parent=this.panel=null;this.sortable=!0;this.view=
null}initialize(){this.addHandles([Q.watch(()=>[this.layer,this.layer?.listMode],()=>this._watchLayerProperties(this.layer),Q.initial),Q.watch(()=>this.checkPublishStatusEnabled,S=>this._updateChildrenPublishing(S),Q.initial),Q.watch(()=>this.view,S=>this._updateChildrenView(S),Q.initial),Q.watch(()=>this.panel,S=>this._setListItemOnPanel(S),Q.initial),Q.watch(()=>[this.layer,this.view],()=>this._getLayerView(),Q.initial)]);"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,
{item:this})}destroy(){this.view=null}get connectionStatus(){const {layerView:S,publishing:Z}=this;if(!Z&&S&&"connectionStatus"in S)return S.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){const {layerView:S}=this;return S&&"spatialReferenceSupported"in S?!S.spatialReferenceSupported:!1}castPanel(S){this.panel?.open&&!S.hasOwnProperty("open")&&(S.open=!0);return S?new y(S):null}get title(){const S=R.get(this,"layer.layer");return(!S||S&&R.get(this,"layer.layer.loaded"))&&
R.get(this,"layer.title")||R.get(this,"layer.attributes.title")||""}set title(S){this._override("title",S)}get publishing(){const {layer:S,checkPublishStatusEnabled:Z}=this;return Z&&S&&"publishingInfo"in S&&"publishing"===S.publishingInfo?.status}get updating(){const {layerView:S,connectionStatus:Z,layer:aa,publishing:M}=this;return M||Z?!1:S?S.updating:"loading"===aa?.loadStatus||!1}get visible(){return this.layer?.visible}set visible(S){const Z=this.layer;Z&&(Z.visible=S)}get visibleAtCurrentScale(){return!O.isLayerOutsideScaleRange(this.layer,
this.view?.scale)}get visibilityMode(){return O.findLayerVisibilityMode(this.layer)}clone(){return new U({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,
visible:this.visible})}_setListItemOnPanel(S){S&&(S.listItem=this)}_updateChildrenPublishing(S){const Z=this.children;Z&&Z.forEach(aa=>aa.checkPublishStatusEnabled=S)}_updateChildrenView(S){const Z=this.children;Z&&Z.forEach(aa=>aa.view=S)}_addChildren(S){this.removeHandles("child-list-mode");this.children.removeAll();if(S){S.forEach(aa=>{this.addHandles(Q.watch(()=>aa.listMode,()=>this._addChildren(S)),"child-list-mode")});var Z=S.filter(aa=>"hide"!==O.findLayerListMode(aa));this.children.addMany(this._makeChildren(Z))}}_watchSublayerChanges(S){S&&
this.addHandles(S.on("change",()=>{this._addChildren(S)}),"layer")}_initializeChildLayers(S){this._addChildren(S);this._watchSublayerChanges(S)}_makeChildren(S){return S.map(Z=>O.canDisplayLayer(Z)?new U({layer:Z,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).filter(v.isSome).reverse()}_watchLayerProperties(S){this.removeHandles("layer");this.removeHandles("child-list-mode");if(S)if("hide-children"===
O.findLayerListMode(S))this.children.removeAll();else{var Z=O.getNormalizedChildLayerProperty(S);Z&&this.addHandles(Q.watch(()=>S[Z],aa=>{S.hasOwnProperty(Z)&&this._initializeChildLayers(aa)},Q.initial),"layer")}}async _getLayerView(){const {layer:S,view:Z}=this;if(S&&Z)try{const aa=await Z.whenLayerView(S);aa.layer===this.layer&&this._set("layerView",aa)}catch{}}};q.__decorate([w.property({type:P})],u.prototype,"actionsSections",void 0);q.__decorate([w.property()],u.prototype,"actionsOpen",void 0);
q.__decorate([w.property()],u.prototype,"checkPublishStatusEnabled",void 0);q.__decorate([w.property({type:A})],u.prototype,"children",void 0);q.__decorate([w.property()],u.prototype,"childrenSortable",void 0);q.__decorate([w.property({readOnly:!0})],u.prototype,"connectionStatus",null);q.__decorate([w.property({readOnly:!0})],u.prototype,"error",null);q.__decorate([w.property()],u.prototype,"hidden",void 0);q.__decorate([w.property({readOnly:!0})],u.prototype,"incompatible",null);q.__decorate([w.property()],
u.prototype,"layer",void 0);q.__decorate([w.property({readOnly:!0})],u.prototype,"layerView",void 0);q.__decorate([w.property()],u.prototype,"listItemCreatedFunction",void 0);q.__decorate([w.property()],u.prototype,"open",void 0);q.__decorate([w.property({type:y})],u.prototype,"panel",void 0);q.__decorate([L.cast("panel")],u.prototype,"castPanel",null);q.__decorate([w.property()],u.prototype,"parent",void 0);q.__decorate([w.property()],u.prototype,"sortable",void 0);q.__decorate([w.property()],u.prototype,
"title",null);q.__decorate([w.property({readOnly:!0})],u.prototype,"publishing",null);q.__decorate([w.property({readOnly:!0})],u.prototype,"updating",null);q.__decorate([w.property()],u.prototype,"view",void 0);q.__decorate([w.property()],u.prototype,"visible",null);q.__decorate([w.property({readOnly:!0})],u.prototype,"visibleAtCurrentScale",null);q.__decorate([w.property({readOnly:!0})],u.prototype,"visibilityMode",null);return u=U=q.__decorate([B.subclass("esri.widgets.LayerList.ListItem")],u)})},
"esri/support/actions/ActionSlider":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ActionBase".split(" "),function(q,u,v,A,z,Q,w){var L;v=L=class extends w{constructor(W){super(W);this.displayValueEnabled=!1;this.max=1;this.min=0;this.step=.1;this.type="slider";this.value=null}clone(){return new L({active:this.active,className:this.className,disabled:this.disabled,
id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};q.__decorate([u.property()],v.prototype,"displayValueEnabled",void 0);q.__decorate([u.property()],v.prototype,"max",void 0);q.__decorate([u.property()],v.prototype,"min",void 0);q.__decorate([u.property()],v.prototype,"step",void 0);q.__decorate([u.property()],v.prototype,"value",void 0);return v=L=q.__decorate([Q.subclass("esri.support.Action.ActionSlider")],
v)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/tslib.es6 ../../core/Identifiable ../../core/maybe ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../Widget ./support/layerListUtils ../support/widget ../support/jsxFactory".split(" "),function(q,u,v,A,z,Q,w,L,W,B,R,F,E,I){v=class extends v.IdentifiableMixin(R){constructor(H,y){super(H,y);
this.content=this._legend=null;this.flowEnabled=!1;this.listItem=this.image=null;this.open=!1;this.visible=!0}initialize(){this.addHandles(z.watch(()=>this.content,H=>this._createLegend(H),z.initial))}destroy(){this._legend=A.destroyMaybe(this._legend)}get className(){const {image:H}=this,y=this._getFirstWidget();return this._get("className")||(!H&&y?y.iconClass??"":"")}set className(H){this._override("className",H)}get disabled(){const {listItem:H,_legend:y,content:O}=this;return H?Array.isArray(O)&&
1<O.length?!1:y?!y.activeLayerInfos?.length||!H.visibleAtCurrentScale||!H.visible:!1:!0}set disabled(H){this._overrideIfSome("disabled",H)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(H){this._override("title",H)}render(){return I.tsx("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(H){const {_legend:y,disabled:O}=this;return!H||O?null:"legend"===H&&y?I.tsx("div",{key:"legend-widget"},y.render()):"string"===typeof H?I.tsx("div",{innerHTML:H,
key:H}):E.isWidget(H)?I.tsx("div",{key:"content-widget"},H.render()):H instanceof HTMLElement?I.tsx("div",{afterCreate:this._attachToNode,bind:H,key:"content-element"}):null}_renderContents(){const {content:H}=this;return Array.isArray(H)?H.map(y=>this._renderContent(y)):this._renderContent(H)}_getLegendOptions(){const {listItem:H}=this;if(!H)return{};const {layer:y,view:O}=H;return y&&O?{view:O,layerInfos:[F.getLegendLayerInfo(y)]}:{}}async _createLegend(H){if(this._hasLegend(H)&&!this._legend){({default:H}=
await new Promise((U,P)=>q(["../Legend"],S=>U(Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"}))),P)));var {listItem:y}=this,O=new H(this._getLegendOptions());this._legend=O;this.notifyChange("className");this.notifyChange("title");H=z.watch(()=>[y?.view,y?.layer,y?.layer?.source,y?.layer?.parent],()=>this._updateLegend(O),z.initial);this.addHandles(H,"legends");this.scheduleRender()}}_hasLegend(H){return"legend"===H?!0:null!=H&&(Array.isArray(H)?
H.includes("legend"):!1)}_attachToNode(H){H.appendChild(this)}_updateLegend(H){H.set(this._getLegendOptions());this.scheduleRender()}_getWidget(H){return"legend"===H?this._legend:E.isWidget(H)?H:null}_getFirstWidget(){const {content:H}=this;return Array.isArray(H)?H.map(y=>this._getWidget(y)).find(y=>y):this._getWidget(H)}};u.__decorate([Q.property()],v.prototype,"_legend",void 0);u.__decorate([Q.property()],v.prototype,"className",null);u.__decorate([Q.property()],v.prototype,"content",void 0);u.__decorate([Q.property()],
v.prototype,"disabled",null);u.__decorate([Q.property()],v.prototype,"flowEnabled",void 0);u.__decorate([Q.property()],v.prototype,"image",void 0);u.__decorate([Q.property()],v.prototype,"listItem",void 0);u.__decorate([Q.property()],v.prototype,"open",void 0);u.__decorate([Q.property()],v.prototype,"title",null);u.__decorate([Q.property()],v.prototype,"visible",void 0);return v=u.__decorate([B.subclass("esri.widgets.LayerList.ListItemPanel")],v)})},"esri/widgets/support/SnappingControls/snappingLayerListUtils":function(){define(["exports",
"../../LayerList/support/layerListUtils"],function(q,u){const v=Q=>A(Q)||z(Q),A=Q=>{if(!("type"in Q))return!1;switch(Q.type){case "feature":case "geojson":case "csv":case "graphics":case "wfs":case "map-notes":case "oriented-imagery":case "scene":case "building-scene":return!0;default:return!1}},z=Q=>{const w=u.getNormalizedChildLayerProperty(Q);if(null!=w&&Q.hasOwnProperty(w)&&null!=Q[w])for(const L of Q[w])if(v(L))return!0;return!1};q.isValidSnappingLayer=v;q.isValidSnappingLayerGroup=z;q.isValidSnappingLayerSource=
A;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/SnappingControls/SnappingListItem":function(){define("exports ../../../chunks/tslib.es6 ../../../core/arrayUtils ../../../core/Collection ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/accessorSupport/decorators/subclass ../../LayerList/ListItem ../../LayerList/support/layerListUtils ./snappingLayerListUtils".split(" "),function(q,u,v,A,z,Q,w,L,W,B,R){var F;
q.SnappingListItem=F=class extends W{constructor(E){super(E);this.children=new A;this.parent=null}get allChildrenEnabled(){return this.children.every(E=>E.enabled)??!1}get childLayerIds(){return this.children.map(E=>E.layer.id).toArray()}get enabled(){return null!=this.featureSource?this.featureSource.enabled:!1}get featureSource(){const {layer:E,getFeatureSnappingSources:I}=this;return I().find(H=>H.layer===E)}get hasChildrenEnabled(){return this.children.some(E=>E.enabled)}_initializeChildLayers(E){E&&
(E=E.filter(R.isValidSnappingLayer),super._initializeChildLayers(E))}_makeChildren(E){return E.map(I=>B.canDisplayLayer(I)?new F({layer:I,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(v.isSome).reverse()}};u.__decorate([z.property()],q.SnappingListItem.prototype,"allChildrenEnabled",null);u.__decorate([z.property()],q.SnappingListItem.prototype,"children",void 0);u.__decorate([z.property()],q.SnappingListItem.prototype,"childLayerIds",null);u.__decorate([z.property()],
q.SnappingListItem.prototype,"enabled",null);u.__decorate([z.property()],q.SnappingListItem.prototype,"featureSource",null);u.__decorate([z.property({constructOnly:!0})],q.SnappingListItem.prototype,"getFeatureSnappingSources",void 0);u.__decorate([z.property()],q.SnappingListItem.prototype,"hasChildrenEnabled",null);u.__decorate([z.property()],q.SnappingListItem.prototype,"parent",void 0);q.SnappingListItem=F=u.__decorate([L.subclass("esri.widgets.support.SnappingControls.SnappingListItem")],q.SnappingListItem);
Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/Prompt":function(){define("require exports ../icons ../../../chunks/componentsUtils ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(q,u,v,A,z,Q,w){function L(B){requestAnimationFrame(()=>B.setFocus())}const W={base:"esri-editor__prompt",header:"esri-editor__prompt__header",heading:"esri-editor__prompt__header__heading",message:"esri-editor__prompt__message",
divider:"esri-editor__prompt__divider",actions:"esri-editor__prompt__actions"};u.Prompt=function({actions:B,context:R,headingLevel:F,message:E,title:I}){var H=B.secondary;let y;switch(R){case "danger":y="danger";break;case "info":y="brand";break;default:y="neutral"}B=w.tsx("calcite-button",{afterCreate:L,appearance:"solid","data-testid":"primary-prompt-button",key:"prompt-primary-button",kind:y,onclick:B.primary.action,scale:"m",width:H?"half":"full"},B.primary.label);H=H&&w.tsx("calcite-button",
{appearance:"outline","data-testid":"secondary-prompt-button",key:"prompt-secondary-button",kind:y,onclick:H.action,scale:"m",width:"half"},H.label);return w.tsx("calcite-scrim",{"data-testid":"prompt",key:"prompt"},w.tsx("div",{class:`${W.base}--${R}`},w.tsx("div",{class:W.header},w.tsx("calcite-icon",{icon:v.warningIcon}),w.tsx(z.Heading,{class:W.heading,level:F},I)),w.tsx("div",{class:W.message},E),w.tsx("div",{class:W.divider}),w.tsx("div",{class:W.actions},H,B)))};u.css=W;u.loadPromptComponents=
()=>A.loadCalciteComponents({button:()=>new Promise((B,R)=>q(["../../../chunks/calcite-button"],B,R)),icon:()=>new Promise((B,R)=>q(["../../../chunks/calcite-icon"],B,R)),scrim:()=>new Promise((B,R)=>q(["../../../chunks/calcite-scrim"],B,R))});Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/UpdateFeaturePanelContent":function(){define("exports ../../../intl/substitute ./FooterActions ./Notices ./PanelContent ../../support/Heading ../../support/widgetUtils ../../support/jsxFactory".split(" "),
function(q,u,v,A,z,Q,w,L){q.UpdateFeaturePanelContent=function({editorViewModel:W,headingLevel:B,messages:R,messagesCommon:F,onDelete:E,onSave:I,renderAttachments:H,renderFeatureForm:y}){const {activeWorkflow:O,featureFormViewModel:U,syncing:P}=W;if(!O||!U)return null;var S=O.type,Z="activeWorkflow"in O?O.activeWorkflow:void 0;const aa=Z&&!Z.hasPendingEdits||"update"===S&&!O.hasPendingEdits||P||U.updating,M="update"===S&&"create-features"!==Z?.type?F.update:F.create;Z="create-features"===S&&"create-new"===
O.createFeatureState;S="create-features"===S?O.numPendingFeatures:0;S=1<S?u.substitute(R.createFeaturesTemplate,{numFeatures:S}):M;const G=O.shouldShowAttachments&&!U.activeRelationshipInput;B=U.inputs.every(X=>!X.visible)&&!G?L.tsx(z.PanelContentMessage,{key:"panel-content-message"},u.substitute(R.clickToFinishTemplate,{button:M})):L.tsx(z.PanelContentSection,{key:"panel-content-section"},L.tsx(A.Notices,{messages:R,workflow:O}),L.tsx(z.PanelContentSectionGroup,null,y(),G?L.tsx("div",{key:"attachments"},
L.tsx(Q.Heading,{level:Q.incrementHeadingLevel(B)},R.attachments),H()):null));return L.tsx(L.tsxFragment,null,L.tsx(z.PanelContent,{key:"attribute-panel-content",showScrimOverlay:Z},B),L.tsx(v.FooterActions,{buttons:[{onClick:I,disabled:aa,label:S},W.shouldShowDeleteButton?{appearance:"outline",onClick:E,disabled:P,kind:"danger",label:F.delete}:void 0]}))};q.loadUpdateFeaturePanelContentComponents=()=>Promise.all([v.loadFooterActionsComponents(),A.loadNoticesComponents(),z.loadPanelContentComponents()]);
Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Editor/components/UploadDetails":function(){define("require exports ../../../layers/graphics/sources/support/uploadAssetErrors ./FooterActions ./PanelContent ../../../chunks/componentsUtils ../../support/widgetUtils ../../support/jsxFactory".split(" "),function(q,u,v,A,z,Q,w,L){function W(H){const y=B(H);return y?L.tsx("div",{class:E.base,"data-testid":"upload-details",key:"upload-details-content"},L.tsx("div",{class:E.status,
key:"status"},y.iconContent,L.tsx("div",{class:E.titleWrapper,key:"text"},L.tsx("div",{class:E.title,key:"title"},y.title),L.tsx("div",{class:E.description,key:"description"},y.description))),F(H.upload)):null}function B({helpMessage:H,messages:y,upload:O}){switch(O.state){case "pending":const {title:U,description:P}=y.modelUploads.pending;return{title:U,description:P,iconContent:L.tsx("calcite-loader",{"aria-hidden":"true",class:E.loader,label:"",scale:"s",type:"determinate",value:Math.min(Math.round(100*
O.progress),1===O.progress?100:99)})};case "success":return{title:O}=y.modelUploads.success,{title:O,description:H||y.helpMessages3d.mesh,iconContent:L.tsx("calcite-icon",{class:w.classes(E.iconSuccess),icon:"check",scale:"l"})};case "error":return{title:H}=y.modelUploads.error,{title:H,description:R(O.error,y),iconContent:L.tsx("calcite-icon",{class:w.classes(E.iconError),icon:"exclamation-mark-circle",scale:"l"})};default:return null}}function R(H,y){if(!H)return null;y=y.modelUploads.error.messages;
switch(H.constructor){case v.NoModelError:return y.noModel;case v.MultipleModelsError:return y.multipleModels;case v.Convert3DFailedError:return y.conversionFailed;default:return y.default}}function F(H){return L.tsx("div",{class:E.fileList,key:"file-list"},H.files.map(y=>{var O=L.tsx,U={class:E.file,key:`file-${y.name}`},P=L.tsx,S=E.fileIcon;const Z=y.name.split(".").pop()?.toLowerCase();return O.call(L,"div",U,P.call(L,"calcite-icon",{class:S,icon:(Z?I[Z]:null)??"file",scale:"s"}),L.tsx("span",
{class:E.fileName},y.name.split("/").pop()?.split("\\").pop()??""))}))}const E={base:"esri-editor__upload-details",status:"esri-editor__upload-details__status",titleWrapper:"esri-editor__upload-details__title-wrapper",title:"esri-editor__upload-details__title",description:"esri-editor__upload-details__description",loader:"esri-editor__upload-details__loader",iconSuccess:"esri-editor__upload-details__icon esri-editor__upload-details__icon--success",iconError:"esri-editor__upload-details__icon esri-editor__upload-details__icon--error",
fileList:"esri-editor__upload-details__file-list",file:"esri-editor__upload-details__file",fileIcon:"esri-editor__upload-details__file-icon",fileName:"esri-editor__upload-details__file-name"},I={glb:"file-shape",gltf:"file-shape",jpeg:"file-image",jpg:"file-image",png:"file-image",svg:"file-image",zip:"file-zip"};u.UploadDetails=function(H){const {messages:y,key:O,upload:U}=H;return L.tsx(L.tsxFragment,null,L.tsx(z.PanelContent,{key:O??"upload-details"},L.tsx(z.PanelContentSection,null,W(H))),"error"===
U.state?L.tsx(A.FooterActions,{buttons:[{onClick:()=>U.retry(),label:y.modelUploads.error.uploadNew,iconStart:"upload-to"}],key:"upload-details-footer-actions"}):null)};u.css=E;u.loadUploadDetailsComponents=()=>Promise.all([Q.loadCalciteComponents({icon:()=>new Promise((H,y)=>q(["../../../chunks/calcite-icon"],H,y)),loader:()=>new Promise((H,y)=>q(["../../../chunks/calcite-loader"],H,y))}),A.loadFooterActionsComponents(),z.loadPanelContentComponents()]);Object.defineProperty(u,Symbol.toStringTag,
{value:"Module"})})},"esri/layers/graphics/sources/support/uploadAssetErrors":function(){define(["exports","../../../../core/Error"],function(q,u){class v extends u{constructor(){super("upload-assets:unsupported","Layer does not support asset uploads.",Error())}}class A extends u{constructor(){super("upload-assets:no-glb-support","Layer does not support glb.",Error())}}class z extends u{constructor(){super("upload-assets:no-supported-source","No supported external source found",Error())}}class Q extends u{constructor(){super("upload-assets:not-base-64",
"Expected gltf data in base64 format after conversion.",Error())}}class w extends u{constructor(){super("upload-assets:unable-to-prepare-options","Unable to prepare uploadAsset request options.",Error())}}class L extends u{constructor(I,H){super("upload-assets:bad-response",`Bad response. Uploaded ${I} items and received ${H} results.`,Error())}}class W extends u{constructor(I,H){super("upload-assets-layer:upload-failed",`Failed to upload mesh file ${I}. Error code: ${H?.code??"-1"}. Error message: ${H?.messages??
"unknown"}`,Error())}}class B extends u{constructor(I){super("upload-assets-layer:unsupported-format",`The service allowed us to upload an asset of FormatID ${I}, but it does not list it in its supported formats.`,Error())}}class R extends u{constructor(){super("upload-assets:convert3D-failed","convert3D failed.")}}class F extends u{constructor(){super("invalid-input:no-model","No supported model found")}}class E extends u{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}
q.BadResponseError=L;q.Convert3DFailedError=R;q.MultipleModelsError=E;q.NoGlbSupportError=A;q.NoModelError=F;q.NoSupportedSourceError=z;q.NotBase64Error=Q;q.UnableToPrepareOptionsError=w;q.UnsupportedError=v;q.UnsupportedFormatUploadedError=B;q.UploadFailedError=W;Object.defineProperty(q,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("require ../chunks/tslib.es6 ../intl ../core/maybe ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../views/interactive/sketch/SketchValueOptions ./Attachments ./FeatureForm ./FeatureTemplates ./Spinner ./Widget ./Editor/css ./Editor/EditorViewModel ./Editor/icons ./Editor/modelUploadUtils ./Editor/VisibleElements ./Editor/components/CreateFeaturesPanelContent ./Editor/components/FeatureList ./Editor/components/FooterActions ./Editor/components/Notices ./Editor/components/PanelContent ./Editor/components/PanelToolbar ./Editor/components/Prompt ./Editor/components/UpdateFeaturePanelContent ./Editor/components/UploadDetails ./FeatureTemplates/ItemList ../chunks/componentsUtils ./support/globalCss ./support/Heading ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ../intl/substitute".split(" "),function(q,
u,v,A,z,Q,w,L,W,B,R,F,E,I,H,y,O,U,P,S,Z,aa,M,G,X,C,V,ia,oa,ma,D,J,ea,ba,T,Y,fa,pa,va,xa){v=class extends O{constructor(ya,Da){super(ya,Da);this._featureForm=new I;this._attachments=new E({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}});this._featureTemplates=new H({enableListScroll:!1,renderItemContentEnd:Ca=>Ca.supportsUpload?va.tsx("calcite-icon",{class:U.css.templateItemContentEnd,icon:"upload-to",key:"upload-icon"}):
null,renderItemLabel:Ca=>Ca.label,renderCustomGroupContent:Ca=>this._renderCustomTemplateGroupContent(Ca)});this._filterText="";this._prompt=null;this._spinner=new y;this.headingLevel=4;this.iconClass=U.css.widgetIcon;this.supportingWidgetDefaults=this.messagesTemplates=this.messagesCommon=this.messages=null;this.viewModel=new P;this.visibleElements=new aa;this._renderSelectIcon=()=>va.tsx("calcite-icon",{icon:"cursor",slot:"content-start"});this.EditorPanel=({heading:Ca,key:Ka},...Oa)=>va.tsx("calcite-flow-item",
{closable:!1,heading:Ca,headingLevel:this.headingLevel,key:Ka,loading:this._loading,onCalciteFlowItemBack:this._onBack},va.tsx(ia.PanelToolbar,{editorViewModel:this.viewModel,messagesCommon:this.messagesCommon,visibleElements:this.visibleElements}),...Oa);this._showDiscardEditsPrompt=()=>{const {messages:Ca,activeWorkflow:Ka}=this;return"create-features"===Ka?.type&&Z.isModelUpload(Ka.data.creationInfo)?this._showPrompt("success"===Ka.data.upload?.state?Ca.modelUploads.cancelPlacementPrompt:Ca.modelUploads.cancelUploadPrompt):
this._showPrompt({title:Ca.cancelEditTitle,message:Ca.cancelEditWarningMessage,yesLabel:Ca.discardEdits,noLabel:Ca.continueEditing})};this._showGenericCancelPrompt=()=>{const {messages:Ca,messagesCommon:Ka}=this;return this._showPrompt({title:Ca.cancelRequestTitle,message:Ca.cancelRequestWarningMessage,yesLabel:Ka.form.yes,noLabel:Ka.form.no})};this._onSave=()=>{this.viewModel.saveWorkflow()};this._onDelete=()=>{const {messages:Ca,messagesCommon:Ka}=this;this._prompt={title:Ca.deleteWarningTitle,
message:Ca.deleteWarningMessage,context:"danger",actions:{primary:{label:Ka.delete,action:()=>{this.deleteFeatureFromWorkflow();this._clearPrompt()}},secondary:{label:Ca.keepFeature,action:this._clearPrompt}}}};this._onToggleUpdateWorkflow=()=>this.viewModel.toggleUpdateWorkflow();this._onBack=Ca=>{Ca?.stopPropagation();return this.viewModel.back()};this._onAttachmentAdd=()=>{const {activeWorkflow:Ca}=this.viewModel;Ca&&("create-features"===Ca.type||"update"===Ca.type&&"create-features"===Ca.activeWorkflow?.type?
(this._attachments.addFile(),Ca.back()):this._attachments.addAttachment().then(()=>Ca.back()))};this._onAttachmentUpdate=()=>{const {activeWorkflow:Ca}=this.viewModel;Ca&&("create-features"===Ca.type?(this._attachments.updateFile(),Ca.back()):this._attachments.updateAttachment().then(()=>Ca.back()))};this._onAttachmentDelete=()=>{const {messages:Ca,messagesCommon:Ka}=this;this._prompt={title:Ca.deleteAttachmentWarningTitle,message:Ca.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:Ka.delete,
action:this._onAttachmentDeleteConfirm},secondary:{label:Ca.keepAttachment,action:this._clearPrompt}}}};this._onAttachmentDeleteConfirm=async()=>{const Ca=this._attachments,{activeWorkflow:Ka}=this.viewModel;Ka&&("create-features"===Ka.type?Ca.deleteFile():(await Ca.deleteAttachment(Ca.viewModel.activeAttachmentInfo),this._clearPrompt()),await Ka.back(),this._clearPrompt())};this._onAttachmentsError=Ca=>{this._prompt={title:this.messages.errorWarningTitle,message:Ca.message,context:"warning",actions:{primary:{label:this.messagesCommon.form.ok,
action:this._clearPrompt}}}};this._clearPrompt=()=>{this._prompt=null}}initialize(){this.addHandles([Q.watch(()=>T.incrementHeadingLevel(this.headingLevel),ya=>{this._featureForm.headingLevel=ya;this._featureTemplates.headingLevel=ya},Q.initial),Q.on(()=>this.viewModel.activeWorkflow,"cancel-request",({controller:ya})=>{(this.viewModel.hasPendingEdits?this._showDiscardEditsPrompt():this._showGenericCancelPrompt()).then(Da=>Da?ya.allow():ya.deny())}),Q.when(()=>this.viewModel.featureFormViewModel,
ya=>{this._featureForm.viewModel=ya},Q.initial),Q.watch(()=>this.viewModel,ya=>{this._attachments.viewModel=ya?.attachmentsViewModel??null;this._featureTemplates.viewModel=ya?.featureTemplatesViewModel??null;this._spinner.viewModel=ya?.spinnerViewModel??null;ya.showDiscardEditsPrompt=this._showDiscardEditsPrompt},Q.initial),Q.watch(()=>this.view,(ya,Da)=>{const Ca=`editor-${this.id}-spinner`;Da?.ui.remove(this._spinner,Ca);ya?.ui.add(this._spinner,{key:Ca,position:"manual"})},Q.initial),Q.when(()=>
this.supportingWidgetDefaults,ya=>{this._featureForm.set(ya.featureForm);this._attachments.set(ya.attachments);this._featureTemplates.set(ya.featureTemplates);this.viewModel.ownSketchViewModel.set(ya.sketch)},Q.initial),Q.when(()=>this._attachments?.error,ya=>this._onAttachmentsError(ya)),Q.when(()=>this.viewModel?.failures,ya=>{const {messages:Da}=this,[{error:Ca,retry:Ka,cancel:Oa}]=ya;this._prompt={title:Da.errorWarningTitle,message:xa.substitute(Da.errorWarningMessageTemplate,{errorMessage:Ca.message}),
context:"warning",actions:{primary:{label:Da.retry,action:()=>{Ka();this._clearPrompt()}},secondary:{label:Da.ignore,action:()=>{Oa();this._clearPrompt()}}}}}),Q.watch(()=>this.viewModel?.state,ya=>{switch(ya){case "awaiting-feature-to-update":case "ready":case "disabled":this._filterText="",this._featureTemplates.filterText=""}}),Q.watch(()=>this.viewModel.featureFormDisabled,ya=>this._featureForm.disabled=ya)])}destroy(){this._attachments.destroy();this._featureForm.destroy();this._featureTemplates.destroy()}loadDependencies(){return Promise.all([ea.loadCalciteComponents({"flow-item":()=>
new Promise((ya,Da)=>q(["../chunks/calcite-flow-item"],ya,Da)),flow:()=>new Promise((ya,Da)=>q(["../chunks/calcite-flow"],ya,Da)),icon:()=>new Promise((ya,Da)=>q(["../chunks/calcite-icon"],ya,Da)),list:()=>new Promise((ya,Da)=>q(["../chunks/calcite-list"],ya,Da))}),M.loadCreateFeaturesPanelContentComponents(),G.loadFeatureListComponents(),X.loadFooterActionsComponents(),C.loadNoticesComponents(),V.loadPanelContentComponents(),ia.loadPanelToolbarComponents(),oa.loadPromptComponents(),ma.loadUpdateFeaturePanelContentComponents(),
D.loadUploadDetailsComponents()])}get _deleteButtonCommonInfo(){return{appearance:"outline",kind:"danger"}}get _loading(){const {viewModel:ya}=this;return ya.syncing||ya.updating||this._attachments.submitting}get activeWorkflow(){return this.viewModel.activeWorkflow}get allowedWorkflows(){return this.viewModel.allowedWorkflows}set allowedWorkflows(ya){this.viewModel.allowedWorkflows=ya}get hideTemplatesForInactiveLayers(){return this.viewModel.hideTemplatesForInactiveLayers}set hideTemplatesForInactiveLayers(ya){this.viewModel.hideTemplatesForInactiveLayers=
ya}get label(){return this.messages?.widgetLabel??""}set label(ya){this._overrideIfSome("label",ya)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(ya){this.viewModel.labelOptions=ya}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(ya){this.viewModel.layerInfos=ya}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(ya){this.viewModel.snappingOptions=ya}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(ya){this.viewModel.tooltipOptions=
ya}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(ya){this.viewModel.valueOptions=ya}get view(){return this.viewModel.view}set view(ya){this.viewModel.view=ya}startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()}startCreateFeaturesWorkflowAtFeatureCreation(ya){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(ya)}startCreateFeaturesWorkflowAtFeatureEdit(ya){return this.viewModel.startCreateFeaturesWorkflowAtFeatureEdit(ya)}startUpdateWorkflowAtFeatureSelection(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}startUpdateWorkflowAtMultipleFeatureSelection(ya){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(ya)}startUpdateWorkflowAtFeatureEdit(ya){return this.viewModel.startUpdateWorkflowAtFeatureEdit(ya)}deleteFeatureFromWorkflow(){return this.viewModel.deleteFeatureFromWorkflow()}cancelWorkflow(ya){return this.viewModel.cancelWorkflow(ya)}render(){const {viewModel:ya}=
this,Da=this.classes(U.css.base,ba.globalCss.widget,ba.globalCss.panel);return ya?va.tsx("div",{class:Da,key:"base"},va.tsx("calcite-flow",{key:"flow"},ya.pageStack.map(Ca=>this._renderPage(Ca))),this._prompt?va.tsx(oa.Prompt,{...this._prompt,headingLevel:this.headingLevel}):void 0):va.tsx("div",{class:Da,key:"empty"})}_renderPage(ya){switch(ya){case "ready":return this._renderReady();case "awaiting-feature-creation-info":return this._renderAwaitingFeatureCreationInfo();case "creating-features-upload-details":return this._renderUploadDetails();
case "creating-features":return this._renderCreatingFeatures();case "editing-existing-feature":case "editing-attributes":return this._renderUpdateFeature();case "awaiting-update-feature-candidate":return this._renderFeatureList();case "adding-attachment":return this._renderAttachmentAdding();case "editing-attachment":return this._renderAttachmentEditing()}return va.tsx("div",{key:"empty-page"})}_renderAwaitingFeatureCreationInfo(){const {EditorPanel:ya,messages:Da}=this;return va.tsx(ya,{heading:Da.selectTemplate,
key:"templates-panel"},va.tsx(V.PanelContent,{key:"feature-templates"},va.tsx(V.PanelContentSection,null,this._featureTemplates.render())))}_renderUploadDetails(){const {EditorPanel:ya,activeWorkflow:Da,messages:Ca}=this;if("create-features"!==Da?.type)return null;const Ka=Da.data.upload;return Ka?va.tsx(ya,{heading:Ca.createFeatures,key:"upload-details-panel"},va.tsx(D.UploadDetails,{helpMessage:this._helpMessage,messages:Ca,upload:Ka})):null}_renderCreatingFeatures(){const {EditorPanel:ya,activeWorkflow:Da,
messages:Ca,messagesCommon:Ka,headingLevel:Oa,viewModel:Ba}=this;return Da?va.tsx(ya,{heading:Ca.createFeatures,key:"create-features-panel"},"create-features"===Da.type&&0<Da.numPendingFeatures||"update"===Da.type&&"create-features"===Da?.activeWorkflow?.type&&0<Da.activeWorkflow?.numPendingFeatures?va.tsx(ma.UpdateFeaturePanelContent,{editorViewModel:Ba,headingLevel:Oa,messages:Ca,messagesCommon:Ka,renderAttachments:()=>this._attachments.render(),renderFeatureForm:()=>this._featureForm.render(),
onDelete:this._onDelete,onSave:this._onSave}):va.tsx(M.CreateFeaturesPanelContent,{helpMessage:this._helpMessage})):null}_renderUpdateFeature(){const {EditorPanel:ya,messages:Da,messagesCommon:Ca,headingLevel:Ka,viewModel:Oa}=this;return va.tsx(ya,{heading:Da.editFeature,key:"update-feature-panel"},va.tsx(ma.UpdateFeaturePanelContent,{editorViewModel:Oa,headingLevel:Ka,messages:Da,messagesCommon:Ca,renderAttachments:()=>this._attachments.render(),renderFeatureForm:()=>this._featureForm.render(),onDelete:this._onDelete,
onSave:this._onSave}))}_renderCustomTemplateGroupContent(ya){const {messages:Da,viewModel:Ca}=this;return(ya=A.mappedFind(ya.group.items,Ka=>Ca.itemHasUnsupportedFields(Ka)?Da.formFieldUnsupportedCreateError:Ca.itemHasInvalidFormTemplate(Ka)?Da.formFieldCreateError:void 0))?va.tsx(C.Notice,{icon:S.warningIcon,message:ya}):null}_renderAttachmentAdding(){const {EditorPanel:ya,_attachments:Da,messages:Ca,messagesCommon:Ka}=this;return va.tsx(ya,{heading:Ca.addAttachment,key:"attachment-adding-panel"},
va.tsx(V.PanelContent,{key:"attachments"},Da.render()),va.tsx(X.FooterActions,{buttons:[{label:Da.submitting?Ka.cancel:Ka.add,disabled:Da.submitting||!Da.selectedFile,onClick:this._onAttachmentAdd}]}))}_renderAttachmentEditing(){const {EditorPanel:ya,_attachments:Da,activeWorkflow:Ca,messages:Ka,messagesCommon:Oa}=this;return Ca?va.tsx(ya,{heading:Ka.editAttachment,key:"attachment-editing-panel"},va.tsx(V.PanelContent,{key:"attachments"},Da.render()),Ca.shouldAllowAttachmentEditing?va.tsx(X.FooterActions,
{buttons:[{label:Oa.update,disabled:Da.submitting||!Da.selectedFile,onClick:this._onAttachmentUpdate},{...this._deleteButtonCommonInfo,onClick:this._onAttachmentDelete,disabled:Da.submitting,label:Oa.delete}]}):void 0):null}_renderReady(){const {EditorPanel:ya,messages:Da,viewModel:Ca,visibleElements:Ka}=this,Oa=this._helpMessage;return va.tsx(ya,{heading:Da.widgetLabel,key:"landing-panel"},va.tsx(V.PanelContent,{key:"landing-content"},Ca.editableItems.length?[Ka.editFeaturesSection?va.tsx(V.PanelContentSection,
{key:"edit-actions"},this._renderUpdateActions()):null,Ka.createFeaturesSection?va.tsx(V.PanelContentSection,{key:"create-actions"},this._renderCreateActions()):null]:va.tsx(V.PanelContentMessage,{key:"no-content"},Da.noEditableLayers)),Oa?va.tsx("div",{class:U.css.helpMessage,key:"footer-actions",slot:"footer"},Oa):void 0)}get _helpMessage(){const {activeWorkflow:ya,messages:Da,view:Ca}=this,Ka=ya?.helpMessage;return Ka?Da["3d"===Ca?.type?"helpMessages3d":"helpMessages2d"]?.[Ka]:void 0}_renderUpdateActions(){const {messages:ya,
messagesCommon:Da,viewModel:Ca}=this,Ka={id:"select",label:Da.select};return va.tsx("div",{class:U.css.updateActions,key:"update-actions"},va.tsx(T.Heading,{level:T.incrementHeadingLevel(this.headingLevel)},ya.editFeatures),va.tsx("calcite-list",{class:U.css.updateActionsList,selectionAppearance:"border",selectionMode:"single"},J.renderItem({disabled:!Ca.canUpdate,grouped:!1,item:Ka,selectedItem:"awaiting-feature-to-update"===Ca.activeWorkflow?.stepId?Ka:void 0,renderIcon:this._renderSelectIcon,onItemSelect:this._onToggleUpdateWorkflow})))}_renderCreateActions(){return va.tsx("div",
{key:"create-actions"},va.tsx(T.Heading,{level:T.incrementHeadingLevel(this.headingLevel)},this.messages.createFeatures),va.tsx("div",{class:U.css.featureTemplatesContainer,key:"templates"},this._featureTemplates.render()))}_renderFeatureList(){const {EditorPanel:ya,viewModel:Da}=this,{activeWorkflow:Ca}=Da;if("update"!==Ca?.type)return null;const Ka=xa.substitute(this.messages.multipleFeaturesTemplate,{total:Ca.data.candidates.length});return va.tsx(ya,{heading:Ka,key:"feature-list"},va.tsx(G.FeatureList,
{editableItems:Da.editableItems,filterText:this._filterText,id:this.id,messagesTemplates:this.messagesTemplates,workflow:Ca,onFilterTextChange:Oa=>this._filterText=Oa,onSelectFeature:(Oa,Ba)=>Da.selectFeature(Oa,Ba)}))}_showPrompt({title:ya,message:Da,yesLabel:Ca,noLabel:Ka}){const Oa=z.createResolver(),{view:Ba}=this,na=Ba?.focused;this._prompt={title:ya,message:Da,context:"danger",actions:{primary:{label:Ca,action:()=>Oa.resolve(!0)},secondary:{label:Ka,action:()=>Oa.resolve(!1)}}};return Oa.promise.finally(()=>
{this._clearPrompt();na&&Ba?.focus()})}};u.__decorate([w.property()],v.prototype,"_featureForm",void 0);u.__decorate([w.property()],v.prototype,"_attachments",void 0);u.__decorate([w.property()],v.prototype,"_featureTemplates",void 0);u.__decorate([w.property()],v.prototype,"_filterText",void 0);u.__decorate([w.property()],v.prototype,"_prompt",void 0);u.__decorate([w.property()],v.prototype,"_spinner",void 0);u.__decorate([w.property()],v.prototype,"_deleteButtonCommonInfo",null);u.__decorate([w.property()],
v.prototype,"_loading",null);u.__decorate([w.property({readOnly:!0})],v.prototype,"activeWorkflow",null);u.__decorate([w.property()],v.prototype,"allowedWorkflows",null);u.__decorate([w.property()],v.prototype,"headingLevel",void 0);u.__decorate([w.property()],v.prototype,"hideTemplatesForInactiveLayers",null);u.__decorate([w.property()],v.prototype,"iconClass",void 0);u.__decorate([w.property()],v.prototype,"label",null);u.__decorate([w.property()],v.prototype,"labelOptions",null);u.__decorate([w.property()],
v.prototype,"layerInfos",null);u.__decorate([w.property(),fa.messageBundle("esri/widgets/Editor/t9n/Editor")],v.prototype,"messages",void 0);u.__decorate([w.property(),fa.messageBundle("esri/t9n/common")],v.prototype,"messagesCommon",void 0);u.__decorate([w.property(),fa.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],v.prototype,"messagesTemplates",void 0);u.__decorate([w.property()],v.prototype,"snappingOptions",null);u.__decorate([w.property()],v.prototype,"tooltipOptions",
null);u.__decorate([w.property()],v.prototype,"supportingWidgetDefaults",void 0);u.__decorate([w.property({type:F,nonNullable:!0})],v.prototype,"valueOptions",null);u.__decorate([w.property()],v.prototype,"view",null);u.__decorate([w.property(),pa.vmEvent(["workflow-cancel","workflow-commit"])],v.prototype,"viewModel",void 0);u.__decorate([w.property({type:aa,nonNullable:!0})],v.prototype,"visibleElements",void 0);u.__decorate([w.property()],v.prototype,"_helpMessage",null);return v=u.__decorate([R.subclass("esri.widgets.Editor")],
v)});