// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../Color ../../core/handleUtils ../../core/memoize ../../core/reactiveUtils ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ElevationProfileLine ./support/elevationQuerySourceUtils".split(" "),function(c,k,p,q,r,l,d,b,y,z,t,u,v){b=class extends u{constructor(a){super(a);this.type="ground";this.color=new k("#ff7f00");this.viewVisualizationEnabled=
!0;this.numSamplesForPreview=50;this.numSamplesPerChunk=1E3;this._getQueryElevationDependencies=q.memoize((f,e)=>({ground:f,groundLayers:e}))}get available(){const a=this._ground;return null!=a&&a.layers.some(f=>f.visible)}get minDemResolution(){return v.getGroundMinDemResolution(this._ground)}get _queryElevationDependencies(){return this._getQueryElevationDependencies(this._ground,this._groundLayers)}get _ground(){return this._viewModel?.view?.map?.ground}get _groundLayers(){return this._ground?.layers?.toArray()??
[]}async queryElevation(a,f){var e=this._queryElevationDependencies;if(null==e)throw Error("ElevationProfileLineGround: no dependencies");const {ground:g}=e;if(null==g)throw Error("No ground configured in the view");e=await g.queryElevation(a,f);const m=l.getMetersPerVerticalUnitForSR(a.spatialReference),n=l.getMetersPerVerticalUnitForSR(g.layers.at(0).spatialReference);m!==n&&(a=e.geometry,a.points=a.points.map(([w,x,h])=>[w,x,h===f.noDataValue?h:h*n/m]));return e}attach(a){return p.handlesGroup([super.attach(a),
r.watch(()=>this._queryElevationDependencies,()=>this._onChange())])}};c.__decorate([d.property({type:k,nonNullable:!0})],b.prototype,"color",void 0);c.__decorate([d.property()],b.prototype,"viewVisualizationEnabled",void 0);c.__decorate([d.property()],b.prototype,"available",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"minDemResolution",null);c.__decorate([d.property()],b.prototype,"_queryElevationDependencies",null);c.__decorate([d.property()],b.prototype,"_ground",null);c.__decorate([d.property()],
b.prototype,"_groundLayers",null);return b=c.__decorate([t.subclass("esri.widgets.ElevationProfile.ElevationProfileLineGround")],b)});