// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/tslib.es6 ../../../Color ../../../core/Accessor ../../../core/reactiveUtils ../../../core/throttle ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/factories/vec4f64 ../../../geometry/Polyline ../../../views/3d/interactive/visualElements/OutlineVisualElement ./constants".split(" "),function(g,k,p,q,m,r,n,z,A,B,t,u,v,w,x){g.ProfileLines3D=
class extends q{constructor(a){super(a);this._chartData=null;this._visualElements=[]}initialize(){const a=r.throttle(c=>{this._update(c)},100);this.addHandles([m.watch(()=>({spatialReference:this.view.spatialReference,chartData:this._chartData}),a,m.syncAndInitial),a])}destroy(){this._destroyVisualElements()}remove(){this._destroyVisualElements()}update(a){this._chartData=a}_update(a){var {chartData:c}=a;if(null==c)return this.remove();if(c.refined){var e=this._visualElements;c=c.lines.filter(h=>
h.viewVisualizationEnabled);for(var f=c.length;e.length>f;)e.pop().destroy();for(var b=x.getConfig().profileLinesStyle3D;e.length<f;){var d=new w.OutlineVisualElement({view:this.view,elevationInfo:{mode:"absolute-height",offset:0},innerWidth:b.width-b.outlineSize,width:b.width,falloff:b.falloff,color:b.outlineColor,renderOccluded:b.renderOccluded,isDecoration:!0});e.push(d)}a=a.spatialReference;for(b=0;b<f;++b){d=e[b];const h=c[f-1-b];d.geometry=this._createLineGeometry(h,a);d.innerColor=u.fromArray(p.toUnitRGBA(h.color))}}}_createLineGeometry(a,
c){a=a.samples??[];const e=a.length-1,f=[];let b=[];for(let d=0;d<=e;d++){const {x:h,y,z:l}=a[d];null!=l&&b.push([h,y,l]);d!==e&&null!=l||!b.length||(f.push(b),b=[])}return new v({paths:f,hasZ:!0,spatialReference:c})}_destroyVisualElements(){this._visualElements.forEach(a=>a.destroy());this._visualElements.length=0}};k.__decorate([n.property()],g.ProfileLines3D.prototype,"view",void 0);k.__decorate([n.property()],g.ProfileLines3D.prototype,"_chartData",void 0);g.ProfileLines3D=k.__decorate([t.subclass("esri.widgets.ElevationProfile.support.ProfileLines3D")],
g.ProfileLines3D);Object.defineProperty(g,Symbol.toStringTag,{value:"Module"})});