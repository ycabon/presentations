// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("require ../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../Widget ./css ../../chunks/componentsUtils ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),function(h,e,f,c,u,v,l,m,k,n,w,p,d){c=class extends m{constructor(a,b){super(a,b);this.messages=null;this.closed=!1;this.closable=!0;this._handleOpenRelatedFeature=g=>{this.emit("open-related-feature",
{feature:g})}}loadDependencies(){return n.loadCalciteComponents({action:()=>new Promise((a,b)=>h(["../../chunks/calcite-action"],a,b)),"flow-item":()=>new Promise((a,b)=>h(["../../chunks/calcite-flow-item"],a,b))})}render(){var {flowItems:a}=this;a=a?.toArray();return d.tsx(d.tsxFragment,null,a?.map(b=>this._renderRelatedRecordsFlowItem(b)))}_handleCloseClick(){this.emit("close")}_handleExitClick(){this.emit("exit")}_handleRelatedRecordsBackClick(){const a=this.flowItems?.pop();a&&("showAllEnabled"in
a.viewModel&&(a.viewModel.showAllEnabled=!1),a&&(a.viewModel=null,a.destroy()))}_renderRelatedRecordsFlowItem(a){const {messages:b,closable:g,closed:q}=this,r="graphic"in a&&!a.isTable;return d.tsx("calcite-flow-item",{bind:this,closable:g,closed:q,description:this._getRelatedRecordsFlowItemDescription(a),heading:a.title??"",key:`flow-item-${a.viewModel.uid}`,onCalciteFlowItemBack:t=>{t.preventDefault();this._handleRelatedRecordsBackClick()},onCalciteFlowItemClose:this._handleCloseClick},d.tsx("calcite-action",
{appearance:"transparent",bind:this,class:k.css.actionExit,icon:"move-up",key:"exit-related-records-action",label:b.exitRelatedRecords,onclick:this._handleExitClick,scale:"m",slot:"header-actions-start",text:b.exitRelatedRecords,title:b.exitRelatedRecords}),r?d.tsx("calcite-action",{appearance:"transparent",bind:this,icon:"zoom-to-object",key:"open-related-feature-action",label:b.selectFeature,onclick:()=>this._handleOpenRelatedFeature(a),scale:"m",slot:"header-actions-end",text:b.selectFeature,title:b.selectFeature}):
null,d.tsx("div",{class:k.css.container},a.render()))}_getRelatedRecordsFlowItemDescription(a){return"featureCountDescription"in a?a.featureCountDescription:a.viewModel.description??""}};e.__decorate([f.property()],c.prototype,"flowItems",void 0);e.__decorate([f.property(),p.messageBundle("esri/widgets/Features/t9n/Features")],c.prototype,"messages",void 0);e.__decorate([f.property()],c.prototype,"closed",void 0);e.__decorate([f.property()],c.prototype,"closable",void 0);return c=e.__decorate([l.subclass("esri.widgets.Features.FeaturesRelatedRecords")],
c)});