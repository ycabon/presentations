// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("require ../chunks/tslib.es6 ../core/deprecate ../core/Logger ../core/accessorSupport/decorators/property ../core/has ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Locate/LocateViewModel ../chunks/componentsUtils ./support/globalCss ./support/legacyIcon ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory".split(" "),function(h,c,n,p,d,b,F,y,z,q,A,r,B,G,t,C,g){var u=B.legacyIcon.northNavigation;b=class extends z{constructor(a,
e){super(a,e);this.iconClass=u;this.messagesCommon=this.messages=this.icon=null;this.viewModel=new q;this._locate=()=>{const {viewModel:f}=this;"locating"===f.state?f.cancelLocate():f.locate().catch(()=>{})}}loadDependencies(){return A.loadCalciteComponents({button:()=>new Promise((a,e)=>h(["../chunks/calcite-button"],a,e)),loader:()=>new Promise((a,e)=>h(["../chunks/calcite-loader"],a,e)),tooltip:()=>new Promise((a,e)=>h(["../chunks/calcite-tooltip"],a,e))})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(a){this.viewModel.geolocationOptions=
a}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(a){this.viewModel.goToLocationEnabled=a}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(a){this.viewModel.goToOverride=a}get graphic(){return this.viewModel.graphic}set graphic(a){this.viewModel.graphic=a}get label(){return this.messages?.widgetLabel??""}set label(a){this._overrideIfSome("label",a)}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(a){this.viewModel.popupEnabled=
a}get rotationEnabled(){return this.viewModel.rotationEnabled}set rotationEnabled(a){this.viewModel.rotationEnabled=a}get scale(){return this.viewModel.scale}set scale(a){this.viewModel.scale=a}get useHeadingEnabled(){n.deprecatedProperty(p.getLogger(this),"useHeadingEnabled",{replacement:"rotationEnabled",version:"4.27",warnOnce:!0});return this.viewModel.rotationEnabled}set useHeadingEnabled(a){n.deprecatedProperty(p.getLogger(this),"useHeadingEnabled",{replacement:"rotationEnabled",version:"4.27",
warnOnce:!0});this.viewModel.rotationEnabled=a}get view(){return this.viewModel.view}set view(a){this.viewModel.view=a}cancelLocate(){this.viewModel.cancelLocate()}locate(){return this.viewModel.locate()}render(){const {viewModel:a,icon:e,iconClass:f}=this,{state:k}=a,l="locating"===k,v=l?this.messagesCommon.cancel:this.messages.title,D="feature-unsupported"===k,m=f===u?void 0:f,E=void 0===m?"gps-off":void 0,w=null==e&&m,x=this._localizeError(this.viewModel?.error);return g.tsx("div",{class:this.classes("esri-locate",
r.globalCss.widget)},!D&&g.tsx("calcite-button",{class:r.globalCss.widgetButton,disabled:"disabled"===k,iconStart:l?void 0:e??E,kind:"neutral",label:v,onclick:this._locate,scale:w?"s":"m",title:v},l?g.tsx("calcite-loader",{inline:!0,label:"",scale:"m"}):w?this._renderLegacyIcon(m):null),x?g.tsx("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},x):null)}_renderLegacyIcon(a){return g.tsx("span",{"aria-hidden":"true",class:a,styles:{display:"flex"}})}_localizeError(a){if(a instanceof
GeolocationPositionError)return a.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:a.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable;if(a instanceof Error)return a.message}};c.__decorate([d.property()],b.prototype,"geolocationOptions",null);c.__decorate([d.property()],b.prototype,"goToLocationEnabled",null);c.__decorate([d.property()],b.prototype,"goToOverride",null);c.__decorate([d.property()],b.prototype,"graphic",
null);c.__decorate([d.property()],b.prototype,"iconClass",void 0);c.__decorate([d.property()],b.prototype,"icon",void 0);c.__decorate([d.property()],b.prototype,"label",null);c.__decorate([d.property(),t.messageBundle("esri/widgets/Locate/t9n/Locate")],b.prototype,"messages",void 0);c.__decorate([d.property(),t.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0);c.__decorate([d.property()],b.prototype,"popupEnabled",null);c.__decorate([d.property()],b.prototype,"rotationEnabled",
null);c.__decorate([d.property()],b.prototype,"scale",null);c.__decorate([d.property()],b.prototype,"useHeadingEnabled",null);c.__decorate([d.property()],b.prototype,"view",null);c.__decorate([d.property({type:q}),C.vmEvent(["locate","locate-error"])],b.prototype,"viewModel",void 0);return b=c.__decorate([y.subclass("esri.widgets.Locate")],b)});