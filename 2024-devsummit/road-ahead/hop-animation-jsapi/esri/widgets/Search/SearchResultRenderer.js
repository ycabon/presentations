// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../Widget ./searchResultRendererCSS ./SearchViewModel ../support/globalCss ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../support/jsxFactory ../support/widgetUtils".split(" "),function(f,k,d,w,x,p,q,e,r,l,n,t,c,y){d=class extends q{constructor(a,b){super(a,b);this.messages=null;this.showMoreResultsOpen=
!1;this.viewModel=null}destroy(){this.viewModel=null}render(){const a={[e.css.showMoreResults]:this.showMoreResultsOpen};return c.tsx("div",{class:this.classes(e.css.base,l.globalCss.widget)},c.tsx("div",{class:this.classes(e.css.moreResults,a),key:"esri-search-renderer__container"},this._renderSearchResultName(),this._renderMoreResults()))}_renderMoreResults(){return c.tsx("div",{key:"esri-search-renderer__more-results"},this._renderMoreResultsButton(),this._renderMoreResultsLists())}_renderSearchResultName(){return c.tsx("div",
{class:e.css.moreResultsItem,key:"esri-search-renderer__result-name"},this.viewModel?.selectedResult?.name||"")}_renderMoreResultsLists(){var {viewModel:a}=this;if(!a)return[];if(2>(a.resultCount??0))return null;a=a.results?.map(b=>this._renderMoreResultsList(b));return c.tsx("div",{class:e.css.moreResultsList,key:"esri-search-renderer__more-results-container"},a)}_renderMoreResultsButton(){const {messages:a,viewModel:b}=this;return!b||2>(b.resultCount??0)?null:c.tsx("div",{class:e.css.moreResultsItem,
key:"esri-search-renderer__more-results-button"},c.tsx("a",{bind:this,class:l.globalCss.anchor,href:"#",onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?a.hideMoreResults:a.showMoreResults))}_renderMoreResultsHeader(a,b){return c.tsx("div",{class:e.css.moreResultsListHeader,key:`esri-search-result-renderer__header-${b}`},a)}_renderMoreResultsList(a){var {results:b}=a,g=b?.length??0;const m=0<g;var h=this.viewModel?.selectedResult;g=1===g&&b[0]===h;
h=this._getSourceName(a.source,a.sourceIndex);h=1<(this.viewModel?.results?.length??0)&&!g?this._renderMoreResultsHeader(h,a.sourceIndex):null;b=m&&b.map((u,v)=>this._renderMoreResultsListItem(u,v));b=m&&!g?c.tsx("ul",{key:`esri-search-result-renderer__list-${a.sourceIndex}`},b):null;return m?c.tsx("div",{key:`esri-search-result-renderer__results-${a.sourceIndex}`},h,b):null}_renderMoreResultsListItem(a,b){return a!==this.viewModel?.selectedResult?c.tsx("li",{key:`esri-search-result-renderer__list-item-${b}`},
c.tsx("a",{bind:this,class:l.globalCss.anchor,"data-result":a,href:"#",onclick:this._selectResultClick,onkeydown:this._selectResultClick,tabIndex:0},a.name)):null}_showMoreResultsClick(a){a.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(a=this.viewModel?.view?.popup)&&"reposition"in a&&a.reposition()}_selectResultClick(a){a.preventDefault();a=a.currentTarget["data-result"];this.viewModel?.select(a)}_getSourceName(a,b){return b===r.ALL_INDEX?this.messages.all:a.name}};f.__decorate([k.property(),
t.messageBundle("esri/widgets/Search/t9n/Search")],d.prototype,"messages",void 0);f.__decorate([k.property()],d.prototype,"showMoreResultsOpen",void 0);f.__decorate([k.property()],d.prototype,"viewModel",void 0);f.__decorate([n.accessibleHandler()],d.prototype,"_showMoreResultsClick",null);f.__decorate([n.accessibleHandler()],d.prototype,"_selectResultClick",null);return d=f.__decorate([p.subclass("esri.widgets.Search.SearchResultRenderer")],d)});