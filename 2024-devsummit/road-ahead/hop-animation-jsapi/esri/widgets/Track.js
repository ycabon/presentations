// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("require ../chunks/tslib.es6 ../core/deprecate ../core/Logger ../core/accessorSupport/decorators/property ../core/has ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ../chunks/componentsUtils ./support/globalCss ./support/legacyIcon ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ./support/jsxFactory ./Track/TrackViewModel".split(" "),function(m,c,n,p,d,b,G,x,y,z,q,A,H,B,C,h,r){var t=A.legacyIcon.tracking;b=class extends y{constructor(a,
e){super(a,e);this.iconClass=t;this.messages=this.icon=null;this.viewModel=new r;this._toggleTracking=()=>{const f=this.viewModel;f&&"feature-unsupported"!==f.state&&"disabled"!==f.state&&("tracking"===f.state||"waiting"===f.state?this.viewModel.stop():this.viewModel.start())}}loadDependencies(){return z.loadCalciteComponents({button:()=>new Promise((a,e)=>m(["../chunks/calcite-button"],a,e)),tooltip:()=>new Promise((a,e)=>m(["../chunks/calcite-tooltip"],a,e))})}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(a){this.viewModel.geolocationOptions=
a}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(a){this.viewModel.goToLocationEnabled=a}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(a){this.viewModel.goToOverride=a}get graphic(){return this.viewModel.graphic}set graphic(a){this.viewModel.graphic=a}get label(){return this.messages?.widgetLabel??""}set label(a){this._overrideIfSome("label",a)}get rotationEnabled(){return this.viewModel.rotationEnabled}set rotationEnabled(a){this.viewModel.rotationEnabled=
a}get scale(){return this.viewModel.scale}set scale(a){this.viewModel.scale=a}get tracking(){return this.viewModel.tracking}get useHeadingEnabled(){n.deprecatedProperty(p.getLogger(this),"useHeadingEnabled",{replacement:"rotationEnabled",version:"4.27",warnOnce:!0});return this.viewModel.rotationEnabled}set useHeadingEnabled(a){n.deprecatedProperty(p.getLogger(this),"useHeadingEnabled",{replacement:"rotationEnabled",version:"4.27",warnOnce:!0});this.viewModel.rotationEnabled=a}get view(){return this.viewModel.view}set view(a){this.viewModel.view=
a}start(){this.viewModel.start()}stop(){this.viewModel.stop()}render(){const {viewModel:a,messages:e,icon:f,iconClass:u}=this,g=a?.state;var k="tracking"===g;const v=this._localizeError(this.viewModel?.error);k=(k?e?.stopTracking:e?.startTracking)??"";const D="feature-unsupported"===g,E=("tracking"===g?"pause":void 0)??f,l=u===t?void 0:u,F=void 0===l?"compass-north-circle":void 0,w=null==f&&l;return h.tsx("div",{class:this.classes("esri-track",q.globalCss.widget)},!D&&h.tsx("calcite-button",{class:q.globalCss.widgetButton,
disabled:"disabled"===g,iconStart:E??F,kind:"neutral",label:k,loading:"waiting"===g,onclick:this._toggleTracking,scale:w?"s":"m",title:k},w?this._renderLegacyIcon(l):null),v?h.tsx("calcite-tooltip",{open:!0,overlayPositioning:"fixed",referenceElement:this.container},v):null)}_renderLegacyIcon(a){return h.tsx("span",{"aria-hidden":"true",class:a,styles:{display:"flex"}})}_localizeError(a){if(a instanceof GeolocationPositionError)return a.code===GeolocationPositionError.PERMISSION_DENIED?this.messages?.permissionError:
a.code===GeolocationPositionError.TIMEOUT?this.messages?.timeoutError:this.messages?.positionUnavailable;if(a instanceof Error)return a.message}};c.__decorate([d.property()],b.prototype,"geolocationOptions",null);c.__decorate([d.property()],b.prototype,"goToLocationEnabled",null);c.__decorate([d.property()],b.prototype,"goToOverride",null);c.__decorate([d.property()],b.prototype,"graphic",null);c.__decorate([d.property()],b.prototype,"iconClass",void 0);c.__decorate([d.property()],b.prototype,"icon",
void 0);c.__decorate([d.property()],b.prototype,"label",null);c.__decorate([d.property(),B.messageBundle("esri/widgets/Track/t9n/Track")],b.prototype,"messages",void 0);c.__decorate([d.property()],b.prototype,"rotationEnabled",null);c.__decorate([d.property()],b.prototype,"scale",null);c.__decorate([d.property({readOnly:!0})],b.prototype,"tracking",null);c.__decorate([d.property()],b.prototype,"useHeadingEnabled",null);c.__decorate([d.property()],b.prototype,"view",null);c.__decorate([d.property({type:r}),
C.vmEvent(["track","track-error"])],b.prototype,"viewModel",void 0);return b=c.__decorate([x.subclass("esri.widgets.Track")],b)});