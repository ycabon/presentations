// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.29/esri/copyright.txt for details.
//>>built
define("../../chunks/tslib.es6 ../../Color ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/RandomLCG ../../core/has ../../core/accessorSupport/decorators/subclass ../../renderers/support/ClassBreakInfo ./SmartMappingSliderBase ./ClassedSizeSlider/ClassedSizeSliderViewModel ./support/utils ../support/globalCss ../support/legacyIcon ../support/widgetUtils ../support/decorators/messageBundle ../support/jsxFactory".split(" "),function(g,f,h,z,H,I,A,
B,C,D,w,q,J,E,F,k){var r;const x={trackFillColor:new f([149,149,149]),trackBackgroundColor:new f([224,224,224])};f=r=class extends C.SmartMappingSliderBase{constructor(a,c){super(a,c);this.messages=this._rampNode=null;this.style={...x};this.viewModel=new D}get breaks(){return this.viewModel.breaks}set breaks(a){this.viewModel.breaks=a}get label(){return this.messages?.widgetLabel??""}set label(a){this._overrideIfSome("label",a)}castStyle(a){return{...x,...a}}static fromRendererResult(a,c){({renderer:{classBreakInfos:a}}=
a);a=a.map(b=>{const d=b.symbol;let e;switch(d.type){case "simple-line":e=d.width;break;case "simple-marker":e=d.size;break;case "picture-marker":e=d.height}return{min:b.minValue,max:b.maxValue,size:e}});return new r({breaks:a,histogramConfig:{bins:c?c.bins:[]}})}updateClassBreakInfos(a){const c=this.breaks;if(c.length!==a.length)console.error(`Number of input breakInfos must match number of slider breaks: ${c.length}`);else return a.map((b,d)=>{b=b.symbol;switch(b.type){case "simple-line":b.width=
c[d].size;break;case "simple-marker":b.size=c[d].size;break;case "picture-marker":const e=c[d].size,t=b.width,u=b.height;b.height=e;b.width=e/u*t}return new B({minValue:c[d].min,maxValue:c[d].max,symbol:b})})}updateFromRendererResult(a,c){({renderer:{classBreakInfos:a}}=a);a=a.map(b=>{const d=b.symbol;let e;switch(d.type){case "simple-line":e=d.width;break;case "simple-marker":e=d.size;break;case "picture-marker":e=d.height}return{min:b.minValue,max:b.maxValue,size:e}});this.set({breaks:a});c?.bins&&
(this.histogramConfig.bins=c.bins)}render(){const {state:a,label:c,visibleElements:b}=this,d="disabled"===a,e=this.classes("esri-classed-size-slider",q.globalCss.widget,q.globalCss.panel,{[q.globalCss.disabled]:d,["esri-classed-size-slider--interactive-track"]:!!b.interactiveTrack});return k.tsx("div",{"aria-label":c,class:e},d?null:this.renderContent(this._renderRamp(),"esri-classed-size-slider__slider-container","esri-classed-size-slider__histogram-container"))}_renderRamp(){const {style:{trackBackgroundColor:a}}=
this;return k.tsx("div",{afterCreate:E.storeNode,bind:this,class:"esri-classed-size-slider__ramp","data-node-ref":"_rampNode"},k.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},k.tsx("rect",{fill:w.getFillFromColor(a),height:"100%",width:"100%",x:"0",y:"0"}),this._renderPath()))}_renderPath(){if(this._rampNode){var {offsetHeight:a=0,offsetWidth:c=0}=this._rampNode;if(null!=a&&null!=c){var {breaks:b,viewModel:{max:d,min:e},style:{trackFillColor:t}}=this,u=d-e,v=c/b.length,G=b.map(l=>a-Math.round((l.min-
e)/u*a)+1).reverse(),y=b[0].size>b[b.length-1].size||!1,m=y?v:c,n=`M${m} 0 `;G.forEach((l,p)=>{p=v*(p+1);n+=`L${m} ${l} `;m=y?v+p:c-p;n+=`L${m} ${l} `});n+=`L0 ${a} L0 ${a} L0 0 Z`;return k.tsx("path",{d:n,fill:w.getFillFromColor(t)})}}}};g.__decorate([h.property()],f.prototype,"breaks",null);g.__decorate([h.property()],f.prototype,"label",null);g.__decorate([h.property(),F.messageBundle("esri/widgets/smartMapping/ClassedSizeSlider/t9n/ClassedSizeSlider")],f.prototype,"messages",void 0);g.__decorate([h.property()],
f.prototype,"style",void 0);g.__decorate([z.cast("style")],f.prototype,"castStyle",null);g.__decorate([h.property()],f.prototype,"viewModel",void 0);return f=r=g.__decorate([A.subclass("esri.widgets.smartMapping.ClassedSizeSlider")],f)});